const a4_0x599477=a4_0x4e5c,a4_0x7ea9d4=(function(){let _0x2373bf=!![];return function(_0x4220b3,_0x4013e2){const _0x43e4f3=_0x2373bf?function(){if(_0x4013e2){const _0x4b990b=_0x4013e2['apply'](_0x4220b3,arguments);return _0x4013e2=null,_0x4b990b;}}:function(){};return _0x2373bf=![],_0x43e4f3;};}()),a4_0x35389e=a4_0x7ea9d4(this,function(){const _0x4f2879=a4_0x4e5c,_0x270a1b=function(){const _0xda382e=a4_0x4e5c;let _0x2f70d0;try{_0x2f70d0=Function(_0xda382e(0x42d)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3bf3ba){_0x2f70d0=window;}return _0x2f70d0;},_0x66d35c=_0x270a1b(),_0x375dca=_0x66d35c['console']=_0x66d35c[_0x4f2879(0x27f)]||{},_0x2bbc71=['log','warn',_0x4f2879(0x388),_0x4f2879(0x27b),'exception',_0x4f2879(0x309),'trace'];for(let _0x196140=0x0;_0x196140<_0x2bbc71['length'];_0x196140++){const _0x4c21ca=a4_0x7ea9d4['constructor']['prototype']['bind'](a4_0x7ea9d4),_0x2be24a=_0x2bbc71[_0x196140],_0x1064d6=_0x375dca[_0x2be24a]||_0x4c21ca;_0x4c21ca['__proto__']=a4_0x7ea9d4['bind'](a4_0x7ea9d4),_0x4c21ca['toString']=_0x1064d6['toString'][_0x4f2879(0x2ac)](_0x1064d6),_0x375dca[_0x2be24a]=_0x4c21ca;}});a4_0x35389e();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x369ba1){const _0x59c967=a4_0x4e5c;if(!_0x369ba1)return'#ffffff';_0x369ba1=_0x369ba1['replace']('#','');_0x369ba1['length']===0x3&&(_0x369ba1=_0x369ba1['split']('')['map'](_0x25b739=>_0x25b739+_0x25b739)['join'](''));if(_0x369ba1['length']!==0x6)return'#ffffff';const _0x40324d=parseInt(_0x369ba1['substring'](0x0,0x2),0x10),_0xe6982d=parseInt(_0x369ba1[_0x59c967(0x268)](0x2,0x4),0x10),_0xde7f1d=parseInt(_0x369ba1[_0x59c967(0x268)](0x4,0x6),0x10),_0x37af1b=(_0x40324d*0x12b+_0xe6982d*0x24b+_0xde7f1d*0x72)/0x3e8;return _0x37af1b>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE=a4_0x599477(0x2d0),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x171b4a=>{const _0x4b6a0e=a4_0x4e5c;if(!_0x171b4a){window['location'][_0x4b6a0e(0x354)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x22827e){console[_0x4b6a0e(0x27b)]('Error\x20initializing\x20dashboard:',_0x22827e),showNotification(_0x4b6a0e(0x2e4),'error');}});});async function getUserTabPermissions(_0x22d134){const _0x22694f=a4_0x599477;if(!_0x22d134)return[_0x22694f(0x36c)];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x22d134+_0x22694f(0x2b1));const _0x25ad8e=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':_0x22694f(0x3c4)},{'name':'playersD3','displayName':_0x22694f(0x221)},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x50190a=auth['currentUser'];let _0x2fe709=null,_0x4d1ae1=null;for(const _0x11965a of _0x25ad8e){try{if(_0x50190a){const _0x30aa9a=doc(db,_0x11965a['name'],_0x50190a['uid']),_0x44b82f=await getDoc(_0x30aa9a);if(_0x44b82f['exists']()){const _0xd8ad25=_0x44b82f['data']();console['log']('Found\x20user\x20in\x20'+_0x11965a['displayName']+'\x20by\x20UID:',_0xd8ad25);const _0x3f33cf=(_0xd8ad25['roleName']||_0xd8ad25['role']||'')[_0x22694f(0x291)]();if(_0x3f33cf&&_0x3f33cf!=='none'){_0x2fe709=_0x3f33cf,_0x4d1ae1=_0x11965a[_0x22694f(0x2cf)],console['log'](_0x22694f(0x1f5)+_0x2fe709+_0x22694f(0x27c)+_0x4d1ae1);break;}}}if(!_0x2fe709){const _0xc1a920=collection(db,_0x11965a[_0x22694f(0x312)]),_0x4a8def=query(_0xc1a920,where(_0x22694f(0x430),'==',_0x22d134)),_0x2a3bec=await getDocs(_0x4a8def);if(!_0x2a3bec['empty']){const _0x58be4e=_0x2a3bec['docs'][0x0][_0x22694f(0x3a1)]();console['log'](_0x22694f(0x31f)+_0x11965a[_0x22694f(0x2cf)]+'\x20with\x20email\x20'+_0x22d134+':',_0x58be4e);const _0x59e455=(_0x58be4e['roleName']||_0x58be4e['role']||'')[_0x22694f(0x291)]();if(_0x59e455&&_0x59e455!==_0x22694f(0x36f)){_0x2fe709=_0x59e455,_0x4d1ae1=_0x11965a['displayName'],console['log'](_0x22694f(0x1f5)+_0x2fe709+_0x22694f(0x27c)+_0x4d1ae1);break;}}}}catch(_0x26707f){console['error']('Error\x20checking\x20'+_0x11965a[_0x22694f(0x2cf)]+':',_0x26707f);}}if(_0x2fe709){console[_0x22694f(0x3df)](_0x22694f(0x342)+_0x2fe709+_0x22694f(0x217)+_0x4d1ae1+')');const _0x3fe045={'admin':[_0x22694f(0x36c),_0x22694f(0x37b),'manage-matches','manage-articles',_0x22694f(0x28b),_0x22694f(0x431),'inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x22694f(0x33b),_0x22694f(0x276),'manage-points',_0x22694f(0x318),_0x22694f(0x349)],'owner':['dashboard','manage-players','manage-matches',_0x22694f(0x3a9),'manage-trophies','manage-ranks',_0x22694f(0x3b4),'settings',_0x22694f(0x28b),'elo-history','manage-highlights','user-roles-section','manage-matches',_0x22694f(0x313),'manage-levels-ribbons',_0x22694f(0x349)],'council':['dashboard','manage-players',_0x22694f(0x276)],'creative\x20lead':['dashboard',_0x22694f(0x3a9),_0x22694f(0x28b),'elo-history',_0x22694f(0x227)]};if(_0x3fe045[_0x2fe709])return console['log'](_0x22694f(0x410)+_0x2fe709+'\x27\x20has\x20permissions:',_0x3fe045[_0x2fe709]),_0x3fe045[_0x2fe709];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x22d134+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x5c879c=[]){const _0xbe1031=a4_0x599477,_0x524f24=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x597478=document['querySelectorAll']('.admin-section');(!_0x5c879c||_0x5c879c['length']===0x0)&&(_0x5c879c=['dashboard']);_0x524f24['forEach'](_0x42a1e6=>{const _0x22db6a=a4_0x4e5c,_0x1f4cf8=_0x42a1e6['getAttribute'](_0x22db6a(0x250));_0x5c879c['includes'](_0x1f4cf8)?_0x42a1e6['style']['display']='flex':_0x42a1e6['style'][_0x22db6a(0x334)]=_0x22db6a(0x36f),_0x42a1e6['addEventListener'](_0x22db6a(0x360),()=>{const _0x23792f=_0x22db6a,_0x1bd4b3=_0x42a1e6[_0x23792f(0x31b)]('data-section');if(!_0x5c879c['includes'](_0x1bd4b3)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x23792f(0x27b));return;}_0x524f24['forEach'](_0xfed39=>_0xfed39['classList']['remove']('active')),_0x42a1e6['classList']['add'](_0x23792f(0x308)),_0x597478['forEach'](_0x4ecad0=>{const _0x37d910=_0x23792f;_0x4ecad0[_0x37d910(0x2d3)]['display']=_0x37d910(0x36f);});const _0x290a30=document['getElementById'](_0x1bd4b3);_0x290a30&&(_0x290a30['style'][_0x23792f(0x334)]=_0x23792f(0x38d),console[_0x23792f(0x3df)]('Switched\x20to\x20'+_0x1bd4b3+'\x20section'));});});const _0x4fe320=document[_0xbe1031(0x2a9)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x5c879c[0x0]+'\x22]');_0x4fe320&&_0x4fe320['click'](),console['log'](_0xbe1031(0x3e3));}function setupTabNavigation(){const _0x4f7869=a4_0x599477,_0x34b113=document[_0x4f7869(0x355)]('.nav-item');let _0xf267a3=null,_0x3d93ef=new Set();_0x34b113['forEach'](_0x125f53=>{_0x125f53['addEventListener']('click',function(){const _0x4696fe=a4_0x4e5c,_0x2260d5=this[_0x4696fe(0x31b)](_0x4696fe(0x250));if(_0x2260d5===_0xf267a3)return;_0xf267a3&&(document[_0x4696fe(0x3dd)](_0xf267a3)['style']['display']='none',_0x34b113['forEach'](_0x523f75=>_0x523f75['classList']['remove'](_0x4696fe(0x308)))),document[_0x4696fe(0x3dd)](_0x2260d5)['style']['display']='block',this[_0x4696fe(0x377)]['add']('active'),_0xf267a3=_0x2260d5;});});}function loadSectionData(_0x11f155){return;}async function initializeAdminDashboard(){const _0x2317bf=a4_0x599477;try{const _0x23abc8=auth[_0x2317bf(0x210)],_0x1faf14=await getUserTabPermissions(_0x23abc8[_0x2317bf(0x430)]);console['log']('User\x20'+_0x23abc8[_0x2317bf(0x430)]+'\x20allowed\x20tabs:',_0x1faf14),window[_0x2317bf(0x35d)]=_0x1faf14,setupSidebarNavigation(_0x1faf14),setupLadderSelector(),setupDashboardSection(),_0x1faf14[_0x2317bf(0x1ec)]('manage-players')&&setupManagePlayersSection(),_0x1faf14['includes']('elo-history')&&setupEloHistorySection(),_0x1faf14['includes']('manage-ranks')&&setupRankControls(),_0x1faf14['includes'](_0x2317bf(0x3a9))&&setupManageArticlesSection(),_0x1faf14['includes'](_0x2317bf(0x33b))&&setupUserRolesSection(),_0x1faf14['includes'](_0x2317bf(0x28b))&&setupTrophyManagementSection(),_0x1faf14[_0x2317bf(0x1ec)]('manage-highlights')&&setupManageHighlightsSection(),_0x1faf14['includes'](_0x2317bf(0x3b4))&&setupInactivePlayersSection(),_0x1faf14['includes']('manage-matches')&&setupManageMatchesSection(),_0x1faf14['includes']('manage-points')&&setupManagePointsSection(),_0x1faf14['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x1faf14);}catch(_0x3f22fb){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x3f22fb);}}function setupDataLoadButtons(_0xa082d9=[]){const _0x4bcf40=a4_0x599477;(!_0xa082d9||_0xa082d9['length']===0x0)&&(_0xa082d9=['dashboard']);const _0x593271=document['getElementById'](_0x4bcf40(0x315));_0x593271&&_0x593271['addEventListener']('click',function(){const _0x12f9ca=_0x4bcf40;this[_0x12f9ca(0x377)]['add']('loading'),this['innerHTML']=_0x12f9ca(0x396),loadDashboardOverview()[_0x12f9ca(0x335)](()=>{const _0x4b7fde=_0x12f9ca;this['classList']['remove'](_0x4b7fde(0x401)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0x12f9ca(0x2b2)](_0x24b881=>{const _0x59276c=_0x12f9ca;console[_0x59276c(0x27b)](_0x59276c(0x26a),_0x24b881),this[_0x59276c(0x377)]['remove'](_0x59276c(0x401)),this['innerHTML']=_0x59276c(0x2e2),setTimeout(()=>{const _0x479a77=_0x59276c;this[_0x479a77(0x42f)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0xa082d9['includes'](_0x4bcf40(0x28b))){const _0x573e44=document['getElementById']('load-trophies-data');_0x573e44&&_0x573e44['addEventListener']('click',function(){const _0x462603=_0x4bcf40;console[_0x462603(0x3df)]('Load\x20trophies\x20data\x20clicked'),this[_0x462603(0x377)][_0x462603(0x22e)]('loading'),this[_0x462603(0x42f)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x3b5283=_0x462603;this['classList'][_0x3b5283(0x33e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x193fe3=>{console['error']('Error\x20loading\x20trophies:',_0x193fe3),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0xa082d9[_0x4bcf40(0x1ec)](_0x4bcf40(0x37b))){const _0x3f3160=document['getElementById']('load-players-data');_0x3f3160&&_0x3f3160[_0x4bcf40(0x32a)]('click',function(){const _0x1ad536=_0x4bcf40;console[_0x1ad536(0x3df)]('Load\x20players\x20data\x20clicked'),this[_0x1ad536(0x377)]['add']('loading'),this['innerHTML']=_0x1ad536(0x396),loadPlayersData()['then'](()=>{const _0x3b9c9b=_0x1ad536;this['classList']['remove']('loading'),this['innerHTML']=_0x3b9c9b(0x287);})[_0x1ad536(0x2b2)](_0x3cf5e3=>{const _0x1e87f6=_0x1ad536;console['error']('Error\x20loading\x20players:',_0x3cf5e3),this[_0x1e87f6(0x377)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0xa082d9['includes']('elo-history')){const _0x58be62=document['getElementById'](_0x4bcf40(0x3a4));_0x58be62&&_0x58be62['addEventListener']('click',function(){const _0xbf193a=_0x4bcf40;console['log']('Load\x20history\x20data\x20clicked'),this[_0xbf193a(0x377)]['add']('loading'),this['innerHTML']=_0xbf193a(0x396),loadEloHistory(0x1)['then'](()=>{const _0x4975d0=_0xbf193a;this[_0x4975d0(0x377)][_0x4975d0(0x33e)]('loading'),this[_0x4975d0(0x42f)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x2efc4a=>{const _0x4dc394=_0xbf193a;console['error'](_0x4dc394(0x2f2),_0x2efc4a),this['classList']['remove']('loading'),this[_0x4dc394(0x42f)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2b993f=_0x4dc394;this['innerHTML']=_0x2b993f(0x2de);},0xbb8);});});}if(_0xa082d9['includes']('manage-articles')){const _0x4c329e=document[_0x4bcf40(0x3dd)]('load-articles-data');_0x4c329e&&_0x4c329e[_0x4bcf40(0x32a)](_0x4bcf40(0x360),function(){const _0x33082a=_0x4bcf40;console['log']('Load\x20articles\x20data\x20clicked'),this['classList'][_0x33082a(0x22e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x411b00=>{console['error']('Error\x20loading\x20articles:',_0x411b00),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0xa082d9['includes']('user-roles-section')){const _0x2e3c8b=document[_0x4bcf40(0x3dd)](_0x4bcf40(0x38c));_0x2e3c8b&&_0x2e3c8b['addEventListener']('click',function(){const _0x2213f4=_0x4bcf40;console['log']('Load\x20users\x20data\x20clicked'),this['classList'][_0x2213f4(0x22e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x404309=_0x2213f4;this[_0x404309(0x377)]['remove'](_0x404309(0x401)),this[_0x404309(0x42f)]=_0x404309(0x2c5);})['catch'](_0xe4c6a8=>{console['error']('Error\x20loading\x20users:',_0xe4c6a8),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0xa082d9[_0x4bcf40(0x1ec)]('inactive-players')){const _0x1b94d1=document[_0x4bcf40(0x3dd)]('load-inactive-players-data');_0x1b94d1&&_0x1b94d1['addEventListener'](_0x4bcf40(0x360),function(){const _0x1c34d1=_0x4bcf40;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x1c34d1(0x396),loadInactivePlayersData()['then'](()=>{const _0x36d863=_0x1c34d1;this['classList']['remove']('loading'),this[_0x36d863(0x42f)]=_0x36d863(0x34d);})['catch'](_0x939fc9=>{const _0x42a2bd=_0x1c34d1;console['error']('Error\x20loading\x20inactive\x20players:',_0x939fc9),this[_0x42a2bd(0x377)]['remove']('loading'),this[_0x42a2bd(0x42f)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0xa082d9['includes']('manage-highlights')){const _0x576c16=document[_0x4bcf40(0x3dd)](_0x4bcf40(0x2f0));_0x576c16&&_0x576c16['addEventListener'](_0x4bcf40(0x360),function(){const _0x2092ec=_0x4bcf40;console[_0x2092ec(0x3df)](_0x2092ec(0x31d)),this['classList']['add'](_0x2092ec(0x401)),this[_0x2092ec(0x42f)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x2092ec(0x335)](()=>{const _0x1dbbf0=_0x2092ec;this['classList']['remove']('loading'),this[_0x1dbbf0(0x42f)]=_0x1dbbf0(0x329);})['catch'](_0x12c1c4=>{const _0x15c4fb=_0x2092ec;console['error']('Error\x20loading\x20highlights:',_0x12c1c4),this['classList']['remove']('loading'),this[_0x15c4fb(0x42f)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0xa082d9['includes']('manage-matches')){const _0x62ff47=document['getElementById'](_0x4bcf40(0x32f));_0x62ff47&&_0x62ff47['addEventListener'](_0x4bcf40(0x360),function(){const _0x5bcfa2=_0x4bcf40;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add'](_0x5bcfa2(0x401)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x5bcfa2(0x335)](()=>{const _0xaf45c2=_0x5bcfa2;this['classList']['remove']('loading'),this['innerHTML']=_0xaf45c2(0x2ef);})[_0x5bcfa2(0x2b2)](_0x1354c5=>{const _0xa25571=_0x5bcfa2;console['error']('Error\x20loading\x20matches:',_0x1354c5),this['classList'][_0xa25571(0x33e)](_0xa25571(0x401)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x488289=_0xa25571;this['innerHTML']=_0x488289(0x2ef);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0xa082d9[_0x4bcf40(0x1ec)]('manage-ribbons')){const _0x5566d3=document[_0x4bcf40(0x3dd)](_0x4bcf40(0x1fc));_0x5566d3&&_0x5566d3['addEventListener'](_0x4bcf40(0x360),function(){const _0x4bb4e8=_0x4bcf40;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x4bb4e8(0x335)](()=>{const _0x34fe17=_0x4bb4e8;this[_0x34fe17(0x377)][_0x34fe17(0x33e)](_0x34fe17(0x401)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x50293c=>{const _0x3f57c9=_0x4bb4e8;console['error']('Error\x20loading\x20ribbons:',_0x50293c),this['classList']['remove']('loading'),this['innerHTML']=_0x3f57c9(0x2e2),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x4bcf40(0x3b6));}function setupDashboardSection(){const _0x312de8=a4_0x599477;document[_0x312de8(0x3dd)]('player-count')[_0x312de8(0x2a3)]='-',document['getElementById']('match-count')[_0x312de8(0x2a3)]='-',document['getElementById']('pending-count')['textContent']='-',document[_0x312de8(0x3dd)](_0x312de8(0x35f))['textContent']='-';}function setupLadderSelector(){const _0x40ad6d=a4_0x599477,_0x3624b1=document['querySelectorAll']('.ladder-switch\x20input');_0x3624b1[_0x40ad6d(0x25e)](_0x328ac8=>{_0x328ac8['addEventListener']('change',()=>{const _0x15a3b8=a4_0x4e5c;currentLadder=_0x328ac8[_0x15a3b8(0x26f)],document['body']['setAttribute']('data-ladder',currentLadder);const _0x284d38=document[_0x15a3b8(0x3dd)]('current-ladder-display');_0x284d38&&(_0x284d38['textContent']=currentLadder),document[_0x15a3b8(0x3dd)]('player-count')[_0x15a3b8(0x2a3)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x15a3b8(0x2d9))['textContent']='-',document[_0x15a3b8(0x3dd)]('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution'][_0x15a3b8(0x297)](),charts['rankDistribution']=null),charts['activity']&&(charts[_0x15a3b8(0x22b)]['destroy'](),charts['activity']=null),showNotification(_0x15a3b8(0x42e)+currentLadder+_0x15a3b8(0x40b),_0x15a3b8(0x388));});});const _0xf88e90=document['getElementById']('current-ladder-display');_0xf88e90&&(_0xf88e90[_0x40ad6d(0x2a3)]=currentLadder);}async function loadDashboardOverview(){const _0x5c2bdd=a4_0x599477;try{console[_0x5c2bdd(0x3df)]('Loading\x20dashboard\x20overview\x20data...'),document['getElementById'](_0x5c2bdd(0x269))['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x5c2bdd(0x2d9))['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x1e34e1=currentLadder==='D1'?_0x5c2bdd(0x3de):currentLadder==='D2'?_0x5c2bdd(0x40d):'playersD3',_0x560a48=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x5c2bdd(0x255),_0x5c119f=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':_0x5c2bdd(0x32b),_0x390d4b=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console[_0x5c2bdd(0x3df)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x1e34e1+',\x20'+_0x560a48);const _0x4bfc8a=await getDocs(collection(db,_0x1e34e1)),_0x5aafec=_0x4bfc8a['size'],_0x4a75b1=await getDocs(collection(db,_0x560a48)),_0x73e461=_0x4a75b1['size'],_0x76573c=await getDocs(collection(db,_0x5c119f)),_0x166c48=_0x76573c['size'],_0x3bf493=await getDocs(collection(db,_0x390d4b)),_0x476bf9=_0x3bf493['size'];return document['getElementById']('player-count')['textContent']=_0x5aafec,document['getElementById']('match-count')[_0x5c2bdd(0x2a3)]=_0x73e461,document['getElementById'](_0x5c2bdd(0x2d9))['textContent']=_0x166c48,document[_0x5c2bdd(0x3dd)]('rejected-count')[_0x5c2bdd(0x2a3)]=_0x476bf9,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x5c2bdd(0x41b)),!![];}catch(_0x2e9806){console['error']('Error\x20loading\x20dashboard\x20data:',_0x2e9806);throw _0x2e9806;}}async function createRankDistributionChart(){const _0x250a88=a4_0x599477;try{const _0x396eb9=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x27592b=await getDocs(_0x396eb9),_0xfd9d31={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x27592b[_0x250a88(0x25e)](_0x233c72=>{const _0x42f2e9=_0x250a88,_0x5d40b4=_0x233c72[_0x42f2e9(0x3a1)](),_0xdd52c7=_0x5d40b4['eloRating']||0x4b0;if(_0xdd52c7>=0x7d0)_0xfd9d31['Emerald']++;else{if(_0xdd52c7>=0x708)_0xfd9d31['Gold']++;else{if(_0xdd52c7>=0x640)_0xfd9d31[_0x42f2e9(0x3f6)]++;else{if(_0xdd52c7>=0x578)_0xfd9d31['Bronze']++;else _0xfd9d31['Unranked']++;}}}});const _0x46dfe1=document['getElementById'](_0x250a88(0x25b));charts['rankDistribution']&&charts[_0x250a88(0x2c9)]['destroy'](),charts['rankDistribution']=new Chart(_0x46dfe1,{'type':'doughnut','data':{'labels':Object['keys'](_0xfd9d31),'datasets':[{'data':Object['values'](_0xfd9d31),'backgroundColor':['#808080','#CD7F32','#C0C0C0',_0x250a88(0x3a2),_0x250a88(0x214)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x250a88(0x299)}},'title':{'display':!![],'text':currentLadder+_0x250a88(0x2cb),'color':_0x250a88(0x299),'font':{'size':0x10}}}}});}catch(_0x5a1540){console[_0x250a88(0x27b)]('Error\x20creating\x20rank\x20distribution\x20chart:',_0x5a1540),document[_0x250a88(0x3dd)]('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x4e306c=a4_0x599477;try{const _0x4bb7b5=currentLadder==='D1'?_0x4e306c(0x413):'approvedMatchesD2',_0x25328e=collection(db,_0x4bb7b5),_0x29c93c=new Date();_0x29c93c['setDate'](_0x29c93c['getDate']()-0x7);const _0x287c8d=query(_0x25328e,where(_0x4e306c(0x292),'>=',_0x29c93c),orderBy('approvedAt','asc')),_0x284a77=await getDocs(_0x287c8d),_0x16105b=[_0x4e306c(0x21b),'Monday','Tuesday','Wednesday',_0x4e306c(0x2d8),'Friday',_0x4e306c(0x331)],_0x26e339=_0x16105b['reduce']((_0x5a1a62,_0x29ecda)=>({..._0x5a1a62,[_0x29ecda]:0x0}),{});_0x284a77['forEach'](_0x1fa6ef=>{const _0x2c5ec7=_0x4e306c,_0x40ebab=_0x1fa6ef['data']();if(_0x40ebab['approvedAt']){const _0x1129d3=_0x16105b[new Date(_0x40ebab['approvedAt'][_0x2c5ec7(0x1ef)]*0x3e8)[_0x2c5ec7(0x340)]()];_0x26e339[_0x1129d3]++;}});const _0x35505b=document['getElementById'](_0x4e306c(0x338));charts['activity']&&charts['activity']['destroy'](),charts[_0x4e306c(0x22b)]=new Chart(_0x35505b,{'type':'bar','data':{'labels':_0x16105b,'datasets':[{'label':_0x4e306c(0x1f1),'data':_0x16105b['map'](_0x4d5f07=>_0x26e339[_0x4d5f07]),'backgroundColor':currentLadder==='D1'?_0x4e306c(0x1e5):'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x4e306c(0x3bf):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x4e306c(0x299)},'grid':{'color':_0x4e306c(0x29f)}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x4e306c(0x38b),'color':_0x4e306c(0x299),'font':{'size':0x10}}}}});}catch(_0x3c1d90){console['error'](_0x4e306c(0x303),_0x3c1d90),document['getElementById']('activity-chart')[_0x4e306c(0x42f)]=_0x4e306c(0x345);}}async function loadPlayersData(){const _0x3fd300=a4_0x599477,_0x142c86=document[_0x3fd300(0x3dd)]('players-table-body');if(!_0x142c86)return;_0x142c86['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x206634='players';if(currentLadder==='D2')_0x206634='playersD2';else currentLadder==='D3'&&(_0x206634='playersD3');console[_0x3fd300(0x3df)]('Loading\x20players\x20from\x20'+_0x206634+'\x20collection...');const _0xe6c0a6=collection(db,_0x206634),_0x18a6ab=query(_0xe6c0a6,orderBy('eloRating',_0x3fd300(0x2b4))),_0x584e1b=await getDocs(_0x18a6ab);if(_0x584e1b['empty']){_0x142c86['innerHTML']=_0x3fd300(0x399);return;}_0x142c86['innerHTML']='';let _0x4ee9fb=0x1;_0x584e1b['forEach'](_0x194714=>{const _0x55a071=_0x3fd300,_0x434c64=_0x194714['data'](),_0x27a55a=getRankFromElo(_0x434c64['eloRating']||0x4b0),_0x5827cd=getRankStyle(_0x434c64[_0x55a071(0x3d7)]||0x4b0),_0x3fc460=document['createElement']('tr');_0x3fc460[_0x55a071(0x42f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x4ee9fb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x5827cd['color']+_0x55a071(0x3e7)+(_0x434c64['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x434c64['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x5827cd['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x27a55a+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x434c64['wins']||0x0)+_0x55a071(0x1eb)+(_0x434c64[_0x55a071(0x2b7)]||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x194714['id']+_0x55a071(0x339)+_0x194714['id']+_0x55a071(0x3fe),_0x142c86[_0x55a071(0x37d)](_0x3fc460),_0x4ee9fb++;}),setupPlayerActionButtons();}catch(_0x3fc979){console['error']('Error\x20loading\x20players:',_0x3fc979),_0x142c86['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x3fc979[_0x3fd300(0x24d)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x243b1f){const _0x9404e9=a4_0x599477;if(_0x243b1f>=0x7d0)return'Emerald';if(_0x243b1f>=0x708)return _0x9404e9(0x3fa);if(_0x243b1f>=0x640)return'Silver';if(_0x243b1f>=0x578)return _0x9404e9(0x245);return'Unranked';}function setupPlayerActionButtons(){const _0x188c5a=a4_0x599477;document[_0x188c5a(0x355)]('.edit-btn')[_0x188c5a(0x25e)](_0x3f4094=>{_0x3f4094['addEventListener']('click',async _0x54fbb0=>{const _0x16117a=a4_0x4e5c,_0x516675=_0x54fbb0[_0x16117a(0x296)][_0x16117a(0x283)]['id'];openEditPlayerModal(_0x516675);});}),document['querySelectorAll']('.delete-btn')[_0x188c5a(0x25e)](_0x15298f=>{_0x15298f['addEventListener']('click',async _0x1ed2ae=>{const _0xc5075b=_0x1ed2ae['currentTarget']['dataset']['id'];confirmDeletePlayer(_0xc5075b);});});}async function openEditPlayerModal(_0xb0ff8){const _0x4152d9=a4_0x599477;try{const _0x1a288f=currentLadder==='D1'?_0x4152d9(0x3de):'playersD2',_0x394356=doc(db,_0x1a288f,_0xb0ff8),_0x489d07=await getDoc(_0x394356);if(!_0x489d07['exists']()){showNotification(_0x4152d9(0x38a),_0x4152d9(0x27b));return;}const _0x4fa9ee=_0x489d07['data'](),_0x141c52=document[_0x4152d9(0x3dd)]('edit-player-modal'),_0x2c0c52=document['getElementById'](_0x4152d9(0x307)),_0x3a7aff=document['getElementById'](_0x4152d9(0x1fd)),_0x2a3e1f=document['getElementById']('edit-wins'),_0x2e69cf=document['getElementById']('edit-losses');_0x2c0c52['value']=_0x4fa9ee['username']||'',_0x3a7aff['value']=_0x4fa9ee[_0x4152d9(0x3d7)]||0x4b0,_0x2a3e1f[_0x4152d9(0x26f)]=_0x4fa9ee['wins']||0x0,_0x2e69cf['value']=_0x4fa9ee[_0x4152d9(0x2b7)]||0x0,_0x141c52['dataset']['playerId']=_0xb0ff8,_0x141c52[_0x4152d9(0x377)]['add']('active');}catch(_0x1dd66f){console['error']('Error\x20opening\x20edit\x20modal:',_0x1dd66f),showNotification('Failed\x20to\x20load\x20player\x20data',_0x4152d9(0x27b));}}async function saveEditedPlayer(){const _0x4ff1dc=a4_0x599477;try{const _0x1ed421=document[_0x4ff1dc(0x3dd)]('edit-player-modal'),_0x436679=_0x1ed421['dataset']['playerId'];if(!_0x436679){showNotification(_0x4ff1dc(0x211),_0x4ff1dc(0x27b));return;}const _0x5c537a=document['getElementById']('edit-username'),_0xf3ae3a=document['getElementById']('edit-elo'),_0x19506d=document['getElementById']('edit-wins'),_0x439725=document['getElementById'](_0x4ff1dc(0x350)),_0x42d8ef=_0x5c537a[_0x4ff1dc(0x26f)]['trim'](),_0x455915=parseInt(_0xf3ae3a['value']),_0x273a61=parseInt(_0x19506d['value']),_0x459693=parseInt(_0x439725[_0x4ff1dc(0x26f)]);if(!_0x42d8ef||isNaN(_0x455915)){showNotification(_0x4ff1dc(0x27a),'error');return;}const _0xf482c8=currentLadder==='D1'?'players':'playersD2',_0x29810a=doc(db,_0xf482c8,_0x436679),_0x56f1a2=await getDoc(_0x29810a),_0x5944fb=_0x56f1a2['exists']()?_0x56f1a2['data']():{},_0x16d5c4=_0x5944fb[_0x4ff1dc(0x3d7)]||0x4b0;await updateDoc(_0x29810a,{'username':_0x42d8ef,'eloRating':_0x455915,'wins':_0x273a61||0x0,'losses':_0x459693||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x4ff1dc(0x210)][_0x4ff1dc(0x430)]});if(_0x455915!==_0x16d5c4){const _0x44b900=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x44b900),{'player':_0x42d8ef,'previousElo':_0x16d5c4,'newElo':_0x455915,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x4ff1dc(0x210)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x4ff1dc(0x28d),'success');}catch(_0x12f5e8){console['error']('Error\x20updating\x20player:',_0x12f5e8),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x12f5e8['message'],'error');}}function closeEditPlayerModal(){const _0x4d0a96=a4_0x599477,_0x38219a=document['getElementById']('edit-player-modal');_0x38219a[_0x4d0a96(0x377)]['remove'](_0x4d0a96(0x308)),_0x38219a[_0x4d0a96(0x283)][_0x4d0a96(0x30f)]='';}async function confirmDeletePlayer(_0x6ff26c){const _0x31af52=a4_0x599477;if(confirm(_0x31af52(0x251)))try{const _0x4d9726=currentLadder==='D1'?'players':_0x31af52(0x40d);await deleteDoc(doc(db,_0x4d9726,_0x6ff26c)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x202105){console['error'](_0x31af52(0x2bd),_0x202105),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x202105[_0x31af52(0x24d)],_0x31af52(0x27b));}}async function setupManagePlayersSection(){const _0x5a4fe9=a4_0x599477,_0x480bd1=document['getElementById']('add-player-form');_0x480bd1&&_0x480bd1['addEventListener']('submit',async _0x8898=>{_0x8898['preventDefault'](),await addNewPlayer();});const _0x32e64a=document['getElementById']('player-search');_0x32e64a&&_0x32e64a['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x3c4277=document['getElementById']('save-player-btn');_0x3c4277&&_0x3c4277['addEventListener']('click',saveEditedPlayer);const _0x459181=document['getElementById']('cancel-edit-btn');_0x459181&&_0x459181[_0x5a4fe9(0x32a)]('click',closeEditPlayerModal);const _0x344070=document['getElementById'](_0x5a4fe9(0x239));_0x344070&&_0x344070['addEventListener']('click',_0x4c6378=>{_0x4c6378['target']===_0x344070&&closeEditPlayerModal();});const _0x464292=document[_0x5a4fe9(0x3dd)](_0x5a4fe9(0x2cc));_0x464292&&_0x464292[_0x5a4fe9(0x32a)](_0x5a4fe9(0x1ea),()=>{currentLadder=_0x464292['value'],loadPlayersData();});}async function addNewPlayer(){const _0x5188d8=a4_0x599477;try{const _0x33b97c=document[_0x5188d8(0x3dd)]('new-player-username'),_0x1f7e10=document['getElementById']('new-player-elo'),_0x1727f8=_0x33b97c[_0x5188d8(0x26f)]['trim'](),_0x21fc2e=parseInt(_0x1f7e10[_0x5188d8(0x26f)])||0x4b0;if(!_0x1727f8){alert(_0x5188d8(0x3c3));return;}console['log']('Adding\x20player\x20'+_0x1727f8+'\x20with\x20ELO\x20'+_0x21fc2e+_0x5188d8(0x286)+currentLadder+'\x20ladder');let _0x22d64e=_0x5188d8(0x3de),_0x2df274='eloHistory';if(currentLadder==='D2')_0x22d64e='playersD2',_0x2df274='eloHistoryD2';else currentLadder==='D3'&&(_0x22d64e='playersD3',_0x2df274=_0x5188d8(0x220));const _0x5d6489=query(collection(db,_0x22d64e),where('username','==',_0x1727f8)),_0x4c7725=await getDocs(_0x5d6489);if(!_0x4c7725['empty']){alert('Username\x20'+_0x1727f8+_0x5188d8(0x336)+currentLadder+'\x20ladder');return;}const _0x34d4e2=auth[_0x5188d8(0x210)],_0x2f4778={'username':_0x1727f8,'eloRating':_0x21fc2e,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x34d4e2?_0x34d4e2['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x22d64e),_0x2f4778),await addDoc(collection(db,_0x2df274),{'player':_0x1727f8,'previousElo':0x4b0,'newElo':_0x21fc2e,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x34d4e2?_0x34d4e2['email']:'admin','gameMode':currentLadder}),_0x33b97c['value']='',_0x1f7e10['value']='1200',alert('Player\x20'+_0x1727f8+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x28e0bb){console['error'](_0x5188d8(0x322),_0x28e0bb),alert('Error\x20adding\x20player:\x20'+_0x28e0bb['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x4734cb=a4_0x599477,_0x10442c=document['getElementById'](_0x4734cb(0x2ad));_0x10442c&&_0x10442c['addEventListener'](_0x4734cb(0x374),_0x26a7b6=>{_0x26a7b6['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x1a9472=a4_0x599477,_0x59fd8d=document['getElementById']('player-search')[_0x1a9472(0x26f)]['toLowerCase'](),_0x55756f=document['querySelectorAll']('#players-table-body\x20tr');let _0x45afad=0x0;_0x55756f['forEach'](_0x533501=>{const _0x1481ad=_0x1a9472,_0x2887f1=_0x533501['querySelector']('.username')?.[_0x1481ad(0x2a3)]['toLowerCase']()||'';_0x2887f1[_0x1481ad(0x1ec)](_0x59fd8d)?(_0x533501['style'][_0x1481ad(0x334)]='',_0x45afad++):_0x533501['style']['display']=_0x1481ad(0x36f);});const _0x4ec19c=document[_0x1a9472(0x3dd)](_0x1a9472(0x426));_0x4ec19c&&(_0x45afad===0x0&&_0x59fd8d!==''?_0x4ec19c['style']['display']='block':_0x4ec19c[_0x1a9472(0x2d3)]['display']='none');}function debounce(_0x338535,_0x517210){let _0x5ef5a8;return function(..._0x3ff35d){clearTimeout(_0x5ef5a8),_0x5ef5a8=setTimeout(()=>_0x338535['apply'](this,_0x3ff35d),_0x517210);};}async function loadEloHistory(_0x331ec5=0x1){const _0x18f5cb=a4_0x599477,_0x1c887a=document['getElementById'](_0x18f5cb(0x2c2)),_0x18cdd0=currentLadder['toLowerCase']();if(!_0x1c887a)return;_0x1c887a[_0x18f5cb(0x42f)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x23e84a=currentLadder==='D1'?_0x18f5cb(0x244):currentLadder==='D2'?_0x18f5cb(0x415):'eloHistoryD3',_0x289222=collection(db,_0x23e84a);let _0x11acd8;if(_0x331ec5>eloHistoryPagination[_0x18cdd0][_0x18f5cb(0x37e)]&&eloHistoryPagination[_0x18cdd0][_0x18f5cb(0x2a4)])_0x11acd8=query(_0x289222,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x18cdd0]['lastVisible']),limit(PAGE_SIZE));else _0x331ec5<eloHistoryPagination[_0x18cdd0][_0x18f5cb(0x37e)]&&eloHistoryPagination[_0x18cdd0]['firstVisible']?_0x11acd8=query(_0x289222,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x18cdd0]['firstVisible']),limitToLast(PAGE_SIZE)):_0x11acd8=query(_0x289222,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0xb2708d=await getDocs(_0x11acd8);if(_0xb2708d[_0x18f5cb(0x25f)]){_0x1c887a[_0x18f5cb(0x42f)]=_0x18f5cb(0x416),document['getElementById'](_0x18cdd0+_0x18f5cb(0x356))['textContent']=_0x18f5cb(0x35e);return;}eloHistoryPagination[_0x18cdd0]['page']=_0x331ec5,eloHistoryPagination[_0x18cdd0][_0x18f5cb(0x348)]=_0xb2708d['docs'][0x0],eloHistoryPagination[_0x18cdd0]['lastVisible']=_0xb2708d[_0x18f5cb(0x206)][_0xb2708d[_0x18f5cb(0x206)]['length']-0x1];const _0x18cca6=new Map();_0x1c887a['innerHTML']='';const _0x4e3fb0=async _0x836df3=>{const _0x556c49=_0x18f5cb;if(typeof _0x836df3!==_0x556c49(0x262)||_0x836df3[_0x556c49(0x1ee)]<0x14||/[^a-zA-Z0-9-_]/[_0x556c49(0x2fc)](_0x836df3))return _0x836df3;if(_0x18cca6['has'](_0x836df3))return _0x18cca6['get'](_0x836df3);try{for(const _0x370caa of[_0x556c49(0x3de),_0x556c49(0x40d),'playersD3','nonParticipants']){const _0x112613=await getDoc(doc(db,_0x370caa,_0x836df3));if(_0x112613['exists']()&&_0x112613['data']()['username']){const _0x1eca24=_0x112613['data']()['username'];return _0x18cca6[_0x556c49(0x421)](_0x836df3,_0x1eca24),_0x1eca24;}}return _0x836df3;}catch(_0x55da7f){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x836df3+':',_0x55da7f),_0x836df3;}};for(const _0xf6e9dd of _0xb2708d[_0x18f5cb(0x206)]){const _0x568aa8=_0xf6e9dd[_0x18f5cb(0x3a1)](),_0x11dab7=document['createElement']('tr'),_0x35b66c=_0x568aa8['timestamp']?new Date(_0x568aa8['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x42737d=_0x568aa8['newElo']-_0x568aa8['previousElo'],_0x39e3fe=_0x42737d>0x0?_0x18f5cb(0x2fa):_0x42737d<0x0?_0x18f5cb(0x2d4):'',_0x4b9714=_0x42737d>0x0?'+':'',_0xf0714a=_0x568aa8['player']||_0x568aa8['username']||_0x568aa8['userId']||'N/A',_0x5c848c=await _0x4e3fb0(_0xf0714a);_0x11dab7[_0x18f5cb(0x42f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x35b66c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x5c848c+_0x18f5cb(0x327)+(_0x568aa8[_0x18f5cb(0x3fd)]||'N/A')+_0x18f5cb(0x29b)+(_0x568aa8['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x39e3fe+'\x22>'+_0x4b9714+_0x42737d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x568aa8[_0x18f5cb(0x30c)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x568aa8[_0x18f5cb(0x3b8)]||_0x568aa8['promotedBy']||_0x568aa8['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1c887a['appendChild'](_0x11dab7);}document['getElementById'](_0x18cdd0+'-page-indicator')[_0x18f5cb(0x2a3)]='Page\x20'+_0x331ec5;const _0x27548d=document['getElementById'](_0x18cdd0+'-prev-page'),_0x13200d=document['getElementById'](_0x18cdd0+_0x18f5cb(0x29a));if(_0x27548d)_0x27548d['disabled']=_0x331ec5<=0x1;const _0x402ec8=query(_0x289222,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x18cdd0]['lastVisible']),limit(0x1)),_0x336095=await getDocs(_0x402ec8);if(_0x13200d)_0x13200d['disabled']=_0x336095[_0x18f5cb(0x25f)];}catch(_0x3f57e4){console['error']('Error\x20loading\x20ELO\x20history:',_0x3f57e4),_0x1c887a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x3f57e4['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x29ad61){const _0xad7698=a4_0x599477;switch(_0x29ad61){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return'Demotion';case'admin_modification':return _0xad7698(0x40c);case'initial_placement':return'Initial\x20Placement';default:return _0x29ad61||'Unknown';}}function setupEloHistorySection(){const _0x5100d3=a4_0x599477;document[_0x5100d3(0x3dd)](_0x5100d3(0x26c))['addEventListener'](_0x5100d3(0x360),()=>{const _0x3eb8da=_0x5100d3;loadEloHistory(eloHistoryPagination['d1'][_0x3eb8da(0x37e)]-0x1);}),document[_0x5100d3(0x3dd)](_0x5100d3(0x28f))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener'](_0x5100d3(0x360),()=>{const _0x44cfc4=_0x5100d3;loadEloHistory(eloHistoryPagination['d2'][_0x44cfc4(0x37e)]-0x1);}),document['getElementById']('d2-next-page')[_0x5100d3(0x32a)](_0x5100d3(0x360),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0xd5f476=document['getElementById']('d3-prev-page'),_0x2be5f4=document['getElementById']('d3-next-page');_0xd5f476&&_0xd5f476['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x2be5f4&&_0x2be5f4['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x461336=document['getElementById'](_0x5100d3(0x3ee));_0x461336&&_0x461336[_0x5100d3(0x32a)](_0x5100d3(0x219),debounce(filterEloHistoryTable,0x12c));const _0x4bf2f3=document['getElementById'](_0x5100d3(0x20f));_0x4bf2f3&&_0x4bf2f3['addEventListener']('change',applyEloHistoryFilters);const _0x459c5f=document['getElementById']('reset-history-filters');_0x459c5f&&_0x459c5f[_0x5100d3(0x32a)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x225219=a4_0x599477,_0x5a4fce=document['getElementById']('elo-history-search')[_0x225219(0x26f)]['toLowerCase'](),_0x26c9a3=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x2ad866=0x0;_0x26c9a3['forEach'](_0x408073=>{const _0x145b2a=_0x225219;if(_0x408073['classList']['contains'](_0x145b2a(0x343))||_0x408073['classList']['contains']('empty-state')||_0x408073['classList']['contains']('error-state'))return;const _0x3b110c=_0x408073['querySelector'](_0x145b2a(0x21e))?.['textContent']['toLowerCase']()||'',_0x2bb376=_0x408073['querySelector']('.type')?.[_0x145b2a(0x2a3)]['toLowerCase']()||'',_0x4ac36=_0x408073[_0x145b2a(0x2a9)]('.admin-action')?.[_0x145b2a(0x2a3)]['toLowerCase']()||'';_0x3b110c['includes'](_0x5a4fce)||_0x2bb376[_0x145b2a(0x1ec)](_0x5a4fce)||_0x4ac36['includes'](_0x5a4fce)?(_0x408073[_0x145b2a(0x2d3)]['display']='',_0x2ad866++):_0x408073[_0x145b2a(0x2d3)]['display']='none';});}async function applyEloHistoryFilters(){const _0x1a5e54=a4_0x599477,_0x1145cd=document['getElementById']('history-start-date')['value'],_0x16648b=document['getElementById']('history-end-date')['value'],_0x2394c8=document['getElementById']('history-type-filter')['value'],_0x4ba3a6=currentLadder['toLowerCase']();eloHistoryPagination[_0x4ba3a6]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x8e5fc0=document['getElementById'](_0x1a5e54(0x2c2));_0x8e5fc0['innerHTML']=_0x1a5e54(0x3d9);try{const _0x1b3b1d=currentLadder==='D1'?'eloHistory':_0x1a5e54(0x415),_0x49802a=collection(db,_0x1b3b1d);let _0x319878=[orderBy('timestamp','desc')];if(_0x1145cd){const _0x356a77=new Date(_0x1145cd);_0x356a77['setHours'](0x0,0x0,0x0,0x0),_0x319878['push'](where('timestamp','>=',_0x356a77));}if(_0x16648b){const _0x2f340a=new Date(_0x16648b);_0x2f340a['setHours'](0x17,0x3b,0x3b,0x3e7),_0x319878[_0x1a5e54(0x37c)](where('timestamp','<=',_0x2f340a));}_0x2394c8&&_0x2394c8!=='all'&&_0x319878['push'](where('type','==',_0x2394c8));_0x319878[_0x1a5e54(0x37c)](limit(PAGE_SIZE));const _0x175744=query(_0x49802a,..._0x319878),_0x11a4d5=await getDocs(_0x175744);!_0x11a4d5['empty']&&(eloHistoryPagination[_0x4ba3a6]['firstVisible']=_0x11a4d5['docs'][0x0],eloHistoryPagination[_0x4ba3a6][_0x1a5e54(0x2a4)]=_0x11a4d5['docs'][_0x11a4d5['docs']['length']-0x1]);_0x8e5fc0[_0x1a5e54(0x42f)]='';if(_0x11a4d5['empty']){_0x8e5fc0[_0x1a5e54(0x42f)]=_0x1a5e54(0x346);return;}_0x11a4d5['forEach'](_0x33cb73=>{const _0x46f955=_0x1a5e54,_0x531557=_0x33cb73[_0x46f955(0x3a1)](),_0x2114db=document[_0x46f955(0x26b)]('tr'),_0x26c2be=_0x531557['timestamp']?new Date(_0x531557['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x577825=_0x531557['newElo']-_0x531557['previousElo'],_0x3af416=_0x577825>0x0?'positive-change':_0x577825<0x0?'negative-change':'',_0x47d1b6=_0x577825>0x0?'+':'',_0x51667f=_0x531557['player']||_0x531557['username']||_0x531557['userId']||'N/A';_0x2114db['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x26c2be+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x51667f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x531557[_0x46f955(0x3fd)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x531557['newElo']||_0x46f955(0x3aa))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x3af416+'\x22>'+_0x47d1b6+_0x577825+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x531557[_0x46f955(0x30c)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x531557['modifiedBy']||_0x531557['promotedBy']||_0x531557[_0x46f955(0x282)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x8e5fc0['appendChild'](_0x2114db);}),document['getElementById'](_0x4ba3a6+'-page-indicator')['textContent']='Page\x201';}catch(_0x464ea6){console['error']('Error\x20applying\x20filters:',_0x464ea6),_0x8e5fc0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x464ea6['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x27bf64=a4_0x599477;document[_0x27bf64(0x3dd)](_0x27bf64(0x370))['value']='',document[_0x27bf64(0x3dd)]('history-end-date')['value']='',document['getElementById']('history-type-filter')['value']=_0x27bf64(0x397),document['getElementById'](_0x27bf64(0x3ee))['value']='';const _0xb34053=currentLadder['toLowerCase']();eloHistoryPagination[_0xb34053]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x48bd70=a4_0x599477,_0x72e1b4=document['getElementById'](_0x48bd70(0x2dd)),_0x5d2be9=document['getElementById'](_0x48bd70(0x39c)),_0x1eb082=document['getElementById']('promote-form');_0x72e1b4&&_0x5d2be9&&_0x1eb082&&(_0x72e1b4[_0x48bd70(0x32a)]('click',()=>{const _0x3b010f=_0x48bd70;_0x5d2be9[_0x3b010f(0x377)]['add']('active');}),_0x5d2be9['addEventListener'](_0x48bd70(0x360),_0x297b52=>{_0x297b52['target']===_0x5d2be9&&_0x5d2be9['classList']['remove']('active');}),_0x1eb082[_0x48bd70(0x32a)]('submit',async _0x33994b=>{const _0x5afae0=_0x48bd70;_0x33994b[_0x5afae0(0x264)]();const _0x50ba86=document['getElementById'](_0x5afae0(0x409)),_0x1e7c45=document['getElementById']('promote-ladder'),_0x326556=_0x50ba86['value']['trim'](),_0x2c9005=_0x1e7c45['value'];if(!_0x326556){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x326556,_0x2c9005),_0x5d2be9[_0x5afae0(0x377)]['remove']('active'),_0x50ba86['value']='';}catch(_0x21bb87){showNotification(_0x21bb87['message'],'error');}}),document[_0x48bd70(0x3dd)]('cancel-promote-btn')['addEventListener']('click',()=>{const _0x59e951=_0x48bd70;_0x5d2be9[_0x59e951(0x377)][_0x59e951(0x33e)]('active');}));const _0x35e539=document[_0x48bd70(0x3dd)]('demote-player-btn'),_0x590430=document['getElementById'](_0x48bd70(0x37f)),_0xdd1089=document['getElementById']('demote-form');_0x35e539&&_0x590430&&_0xdd1089&&(_0x35e539['addEventListener']('click',()=>{_0x590430['classList']['add']('active');}),_0x590430['addEventListener']('click',_0x282323=>{const _0x2c3c50=_0x48bd70;_0x282323[_0x2c3c50(0x3a6)]===_0x590430&&_0x590430['classList']['remove'](_0x2c3c50(0x308));}),_0xdd1089[_0x48bd70(0x32a)]('submit',async _0x485546=>{const _0x27fa89=_0x48bd70;_0x485546[_0x27fa89(0x264)]();const _0x5768c2=document[_0x27fa89(0x3dd)]('demote-username'),_0x299d79=document[_0x27fa89(0x3dd)]('demote-ladder'),_0x520c93=_0x5768c2['value']['trim'](),_0x4afa65=_0x299d79['value'];if(!_0x520c93){alert(_0x27fa89(0x246));return;}try{await demotePlayer(_0x520c93,_0x4afa65),document['getElementById']('demote-modal')['classList']['remove']('active'),document[_0x27fa89(0x3dd)]('demote-username')['value']='';}catch(_0x34f153){console['error']('Error\x20in\x20demotion:',_0x34f153);}}));const _0x8e4164=document[_0x48bd70(0x3dd)]('set-elo-btn'),_0x436938=document['getElementById'](_0x48bd70(0x2f3)),_0x1f2654=document[_0x48bd70(0x3dd)]('set-elo-form');_0x8e4164&&_0x436938&&_0x1f2654&&(_0x8e4164['addEventListener']('click',()=>{const _0x5af255=_0x48bd70;_0x436938[_0x5af255(0x377)][_0x5af255(0x22e)]('active');}),_0x436938['addEventListener']('click',_0x523b41=>{const _0x322c65=_0x48bd70;_0x523b41['target']===_0x436938&&_0x436938['classList']['remove'](_0x322c65(0x308));}),_0x1f2654['addEventListener'](_0x48bd70(0x374),async _0x28a983=>{const _0x3fba9a=_0x48bd70;_0x28a983['preventDefault']();const _0x508574=document['getElementById']('set-elo-username'),_0x24fabd=document['getElementById']('set-elo-value');let _0x5d3d23;const _0x4fab59=document['getElementById']('set-elo-ladder'),_0x56ba3e=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x4fab59)_0x5d3d23=_0x4fab59['value'];else _0x56ba3e?_0x5d3d23=_0x56ba3e[_0x3fba9a(0x26f)]:_0x5d3d23='D1';if(!_0x508574||!_0x24fabd){showNotification(_0x3fba9a(0x404),_0x3fba9a(0x27b));return;}const _0xa2ec9f=_0x508574['value']['trim'](),_0x202a46=parseInt(_0x24fabd['value']);if(!_0xa2ec9f||isNaN(_0x202a46)){showNotification(_0x3fba9a(0x27a),_0x3fba9a(0x27b));return;}try{await setCustomElo(_0xa2ec9f,_0x202a46,_0x5d3d23),_0x436938['classList']['remove']('active'),_0x508574['value']='',_0x24fabd['value']='';}catch(_0x223b4c){showNotification(_0x223b4c['message'],_0x3fba9a(0x27b));}}),document['getElementById'](_0x48bd70(0x261))['addEventListener']('click',()=>{_0x436938['classList']['remove']('active');}));const _0x14271d=document[_0x48bd70(0x3dd)](_0x48bd70(0x21f)),_0x2b3435=document['getElementById']('set-role-form');if(_0x14271d&&_0x2b3435){_0x14271d['addEventListener']('click',_0x5eef15=>{_0x5eef15['target']===_0x14271d&&closeModalHandler();}),_0x2b3435['addEventListener']('submit',async _0x2da198=>{const _0x508c42=_0x48bd70;_0x2da198['preventDefault']();const _0x337043=document['getElementById']('role-username'),_0x589066=document[_0x508c42(0x3dd)](_0x508c42(0x3d0)),_0x580389=document['getElementById']('role-color'),_0x44eadc=_0x337043['value']['trim'](),_0xa76a32=_0x589066['value']['trim'](),_0x2abfc7=_0x580389['value'];if(!_0x44eadc){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x44eadc,_0xa76a32,_0x2abfc7),closeModalHandler(),loadUsersWithRoles();}catch(_0x2c09bc){}});const _0x549a05=document['getElementById']('cancel-role-btn');_0x549a05&&(_0x549a05['removeEventListener']('click',closeModalHandler),_0x549a05[_0x48bd70(0x32a)](_0x48bd70(0x360),closeModalHandler));}}async function promotePlayer(_0x1c81b7,_0xeb2db8){const _0x539546=a4_0x599477;try{console['log']('Attempting\x20to\x20promote\x20'+_0x1c81b7+'\x20in\x20'+_0xeb2db8+'\x20ladder');const _0x2060d2=auth['currentUser'];if(!_0x2060d2)throw new Error(_0x539546(0x2a2));const _0x220efe=_0xeb2db8==='D2'?_0x539546(0x40d):'players',_0x2186e3=_0xeb2db8==='D2'?_0x539546(0x415):'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x220efe);const _0x1bf496=collection(db,_0x220efe),_0x2e7823=query(_0x1bf496,where(_0x539546(0x3d3),'==',_0x1c81b7)),_0x27c374=await getDocs(_0x2e7823);if(_0x27c374['empty']){alert('Player\x20not\x20found\x20in\x20'+_0xeb2db8+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0xeb2db8+'\x20ladder');}const _0x30829=_0x27c374['docs'][0x0],_0x567aa4=_0x30829['data'](),_0x4e30ba=_0x567aa4['eloRating']||0x4b0,_0x33256f=_0x30829['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x4e30ba);const _0x1aa435=[{'name':'Bronze','elo':0x578},{'name':_0x539546(0x3f6),'elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x57e335=_0x1aa435['find'](_0x4f0c0d=>_0x4f0c0d['elo']>_0x4e30ba);if(!_0x57e335){alert(_0x539546(0x3b5)+_0xeb2db8+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0xeb2db8+_0x539546(0x434));}console[_0x539546(0x3df)]('Promoting\x20player\x20to\x20'+_0x57e335['name']+'\x20('+_0x57e335[_0x539546(0x36b)]+')'),await updateDoc(doc(db,_0x220efe,_0x30829['id']),{'eloRating':_0x57e335['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x2060d2['email']||_0x539546(0x274)}),await addDoc(collection(db,_0x2186e3),{'player':_0x1c81b7,'previousElo':_0x4e30ba,'newElo':_0x57e335['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x57e335['name'],'promotedBy':_0x2060d2['email']||'admin','gameMode':_0xeb2db8});try{const {promotionManager:_0x2e21a9}=await import('./promotions.js'),_0x3fa8ee=_0x2e21a9[_0x539546(0x29d)](_0x4e30ba),_0x34279d=_0x57e335['name'];await _0x2e21a9[_0x539546(0x2dc)](_0x33256f,_0x1c81b7,_0x4e30ba,_0x57e335[_0x539546(0x36b)],_0x3fa8ee,_0x34279d,'promotion',{'displayName':_0x1c81b7,'source':'admin','adminUser':_0x2060d2[_0x539546(0x430)],'ladder':_0xeb2db8}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x1dbee6){console[_0x539546(0x27b)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x1dbee6);}return alert(_0x539546(0x3be)+_0x1c81b7+_0x539546(0x286)+_0x57e335['name']+'\x20('+_0x57e335[_0x539546(0x36b)]+')'),currentLadder===_0xeb2db8&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x23807b){console['error']('Error\x20promoting\x20player:',_0x23807b),alert(_0x539546(0x20d)+_0x23807b[_0x539546(0x24d)]);throw _0x23807b;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x37fc0e=a4_0x599477,_0x18360b=document[_0x37fc0e(0x3dd)]('promote-form');_0x18360b&&_0x18360b['addEventListener']('submit',async _0x2621f8=>{const _0x35141c=_0x37fc0e;_0x2621f8['preventDefault']();const _0x480635=document['getElementById']('promote-username')['value']['trim'](),_0x1b0226=document['querySelector'](_0x35141c(0x3f7))['value'];if(!_0x480635){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x480635,_0x1b0226),document['getElementById']('promote-modal')['classList']['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x100b83){console[_0x35141c(0x27b)]('Error\x20in\x20promotion:',_0x100b83);}});});async function demotePlayer(_0xe99c26,_0x110133){const _0x34f1be=a4_0x599477;try{console['log'](_0x34f1be(0x32c)+_0xe99c26+'\x20in\x20'+_0x110133+'\x20ladder');const _0x278fa1=auth['currentUser'];if(!_0x278fa1)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x55e19f=_0x110133==='D2'?'playersD2':'players',_0x16f314=_0x110133==='D2'?_0x34f1be(0x415):'eloHistory';console['log'](_0x34f1be(0x32e)+_0x55e19f);const _0x31c185=collection(db,_0x55e19f),_0x4f97a2=query(_0x31c185,where('username','==',_0xe99c26)),_0xf1a53e=await getDocs(_0x4f97a2);if(_0xf1a53e['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x110133+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x110133+'\x20ladder');}const _0xfb3ebb=_0xf1a53e['docs'][0x0],_0x373194=_0xfb3ebb['data'](),_0x29b07c=_0x373194['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x29b07c);const _0x14b2b2=[{'name':_0x34f1be(0x3fa),'elo':0x708},{'name':_0x34f1be(0x3f6),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':_0x34f1be(0x3d6),'elo':0x4b0}];let _0x30ec3e=_0x14b2b2[_0x34f1be(0x2b3)](_0x26e023=>_0x26e023['elo']<_0x29b07c);if(!_0x30ec3e){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x110133+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x110133+_0x34f1be(0x434));}console['log']('Demoting\x20player\x20to\x20'+_0x30ec3e[_0x34f1be(0x312)]+'\x20('+_0x30ec3e[_0x34f1be(0x36b)]+')'),await updateDoc(doc(db,_0x55e19f,_0xfb3ebb['id']),{'eloRating':_0x30ec3e['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x278fa1[_0x34f1be(0x430)]||'admin'}),await addDoc(collection(db,_0x16f314),{'player':_0xe99c26,'previousElo':_0x29b07c,'newElo':_0x30ec3e['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x30ec3e[_0x34f1be(0x312)],'demotedBy':_0x278fa1['email']||'admin','gameMode':_0x110133});try{const {promotionManager:_0x26580b}=await import('./promotions.js'),_0xacc094=_0x26580b['getRankName'](_0x29b07c),_0x38bb11=_0x30ec3e['name'];await _0x26580b['sendPromotionNotification'](_0xfb3ebb['id'],_0xe99c26,_0x29b07c,_0x30ec3e['elo'],_0xacc094,_0x38bb11,'demotion',{'displayName':_0xe99c26,'source':'admin','adminUser':_0x278fa1[_0x34f1be(0x430)],'ladder':_0x110133}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x3f8008){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x3f8008);}return alert(_0x34f1be(0x30a)+_0xe99c26+'\x20to\x20'+_0x30ec3e['name']+'\x20('+_0x30ec3e['elo']+')'),currentLadder===_0x110133&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x252570){console['error']('Error\x20demoting\x20player:',_0x252570),alert('Error\x20demoting\x20player:\x20'+_0x252570['message']);throw _0x252570;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x58dc5d=document['getElementById']('demote-form');_0x58dc5d&&_0x58dc5d['addEventListener']('submit',async _0x57a965=>{const _0x1b01fd=a4_0x4e5c;_0x57a965['preventDefault']();const _0x1bfc9b=document['getElementById']('demote-username')['value']['trim'](),_0x371fb2=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x1bfc9b){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x1bfc9b,_0x371fb2),document['getElementById']('demote-modal')[_0x1b01fd(0x377)][_0x1b01fd(0x33e)]('active'),document['getElementById']('demote-username')['value']='';}catch(_0x327d5e){console['error']('Error\x20in\x20demotion:',_0x327d5e);}});});async function setCustomElo(_0x24ef80,_0x4b26c9,_0x128d07){const _0x253be8=a4_0x599477;try{const _0x5c8156=auth[_0x253be8(0x210)];if(!_0x5c8156||!isAdmin(_0x5c8156[_0x253be8(0x430)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x322381=_0x128d07==='D2'?'playersD2':'players',_0x5b884f=_0x128d07==='D2'?'eloHistoryD2':'eloHistory',_0x3b5439=collection(db,_0x322381),_0x2c642a=query(_0x3b5439,where(_0x253be8(0x3d3),'==',_0x24ef80)),_0x20c0c4=await getDocs(_0x2c642a);if(_0x20c0c4[_0x253be8(0x25f)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x128d07+'\x20ladder');const _0xf345da=_0x20c0c4['docs'][0x0],_0x431c48=_0xf345da[_0x253be8(0x3a1)](),_0x5a7a8a=_0x431c48[_0x253be8(0x3d7)]||0x4b0,_0x20b2d3=writeBatch(db);_0x20b2d3[_0x253be8(0x237)](doc(db,_0x322381,_0xf345da['id']),{'eloRating':_0x4b26c9,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5c8156['email']});const _0x4d67e8=doc(collection(db,_0x5b884f));return _0x20b2d3['set'](_0x4d67e8,{'player':_0x24ef80,'previousElo':_0x5a7a8a,'newElo':_0x4b26c9,'timestamp':serverTimestamp(),'type':_0x253be8(0x265),'modifiedBy':_0x5c8156[_0x253be8(0x430)],'gameMode':_0x128d07}),await _0x20b2d3['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x24ef80+'\x20was\x20updated\x20from\x20'+_0x5a7a8a+'\x20to\x20'+_0x4b26c9,'success'),currentLadder===_0x128d07&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2c042c){console['error']('Error\x20setting\x20custom\x20ELO:',_0x2c042c);throw _0x2c042c;}}async function setUserRole(_0x5816d0,_0x583eec,_0x38e9e7){const _0x2eb1bc=a4_0x599477;try{const _0x3b8dcf=auth['currentUser'];if(!_0x3b8dcf||!isAdmin(_0x3b8dcf['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x5adbbe=_0x583eec?_0x583eec['trim']():null,_0x480182=_0x5adbbe?_0x38e9e7||'#808080':null,[_0x4cb6eb,_0x1ffcc8]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x5816d0))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x5816d0)))]),_0x129ea8=[];if(!_0x4cb6eb[_0x2eb1bc(0x25f)])_0x129ea8['push']({'ref':_0x4cb6eb['docs'][0x0]['ref'],'source':'D1'});if(!_0x1ffcc8['empty'])_0x129ea8['push']({'ref':_0x1ffcc8['docs'][0x0]['ref'],'source':'D2'});if(_0x129ea8['length']===0x0){const [_0xf6bdea,_0x37b140]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where(_0x2eb1bc(0x3d3),'==',_0x5816d0))),getDocs(query(collection(db,_0x2eb1bc(0x2f8)),where('username','==',_0x5816d0)))]);if(!_0xf6bdea['empty'])_0x129ea8['push']({'ref':_0xf6bdea['docs'][0x0][_0x2eb1bc(0x385)],'source':'NonParticipant'});if(!_0x37b140['empty'])_0x129ea8['push']({'ref':_0x37b140[_0x2eb1bc(0x206)][0x0][_0x2eb1bc(0x385)],'source':'UserProfile'});}if(_0x129ea8[_0x2eb1bc(0x1ee)]===0x0)throw new Error('User\x20\x22'+_0x5816d0+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0xe18505=writeBatch(db);_0x129ea8[_0x2eb1bc(0x25e)](_0x2ef90f=>{console['log']('Updating\x20role\x20for\x20'+_0x5816d0+'\x20in\x20'+_0x2ef90f['source']),!_0x5adbbe?_0xe18505['update'](_0x2ef90f['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0xe18505['update'](_0x2ef90f['ref'],{'roleName':_0x5adbbe,'roleColor':_0x480182,'roleAssignedBy':_0x3b8dcf['email'],'roleAssignedAt':serverTimestamp()});}),await _0xe18505['commit']();const _0x375729=_0x5adbbe?'Role\x20\x22'+_0x5adbbe+_0x2eb1bc(0x324):_0x2eb1bc(0x229);return showNotification(_0x375729+'\x20for\x20user\x20\x22'+_0x5816d0+'\x22','success'),!![];}catch(_0x586f82){console['error'](_0x2eb1bc(0x293),_0x586f82),showNotification(_0x2eb1bc(0x39d)+_0x586f82[_0x2eb1bc(0x24d)],'error');throw _0x586f82;}}function showNotification(_0x3e4db5,_0x167347=a4_0x599477(0x388)){const _0x3a52a3=a4_0x599477,_0x5554e2=document['createElement']('div');_0x5554e2[_0x3a52a3(0x2ee)]='notification\x20'+_0x167347,_0x5554e2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x167347)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x3e4db5+_0x3a52a3(0x368),document['body']['appendChild'](_0x5554e2),setTimeout(()=>{const _0x4acc80=_0x3a52a3;_0x5554e2[_0x4acc80(0x377)][_0x4acc80(0x22e)](_0x4acc80(0x308));},0xa);const _0x1239ef=setTimeout(()=>{closeNotification(_0x5554e2);},0x1388);_0x5554e2[_0x3a52a3(0x2a9)]('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x1239ef),closeNotification(_0x5554e2);});}function getNotificationIcon(_0x59a78c){const _0x39ec3a=a4_0x599477;switch(_0x59a78c){case'success':return _0x39ec3a(0x2b0);case'error':return _0x39ec3a(0x1fa);case'warning':return'fa-exclamation-triangle';case'info':default:return _0x39ec3a(0x407);}}function closeNotification(_0xb05289){const _0x3d0c85=a4_0x599477;_0xb05289['classList'][_0x3d0c85(0x33e)](_0x3d0c85(0x308)),setTimeout(()=>{_0xb05289['remove']();},0x12c);}function setupUserRolesSection(){const _0x4f50cd=a4_0x599477,_0x19c986=document['getElementById']('load-users-data');_0x19c986&&_0x19c986['addEventListener'](_0x4f50cd(0x360),function(){const _0x3d1f8a=_0x4f50cd;this['classList']['add'](_0x3d1f8a(0x401)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x4c5a41=_0x3d1f8a;this['classList']['remove'](_0x4c5a41(0x401)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x3d1f8a(0x2b2)](_0x2bbc4a=>{const _0x5e15fa=_0x3d1f8a;console['error'](_0x5e15fa(0x432),_0x2bbc4a),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x12fa44=document['getElementById']('add-new-role-btn');_0x12fa44&&_0x12fa44['addEventListener']('click',()=>{const _0x4f598d=_0x4f50cd,_0x4b1255=document['getElementById']('set-role-modal');_0x4b1255&&_0x4b1255['classList'][_0x4f598d(0x22e)](_0x4f598d(0x308));});const _0x18ba19=document[_0x4f50cd(0x3dd)]('user-search');_0x18ba19&&_0x18ba19['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x5b0d0d=document['getElementById']('role-filter');_0x5b0d0d&&_0x5b0d0d['addEventListener'](_0x4f50cd(0x1ea),filterUsersTable);}async function loadUsersWithRoles(){const _0x30c238=a4_0x599477,_0x3f196a=document['getElementById']('users-table-body');if(!_0x3f196a)return;_0x3f196a['innerHTML']=_0x30c238(0x23c);try{const [_0x307031,_0x5ad014,_0x6fc732,_0x2ad88a]=await Promise['all']([getDocs(collection(db,_0x30c238(0x3de))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x1b5a6a=new Map();function _0x2efc32(_0x784e69,_0x2f6102){_0x784e69['forEach'](_0x4ce881=>{const _0x46a53d=a4_0x4e5c,_0x2696ed=_0x4ce881['data']();if(!_0x2696ed['username'])return;if(!_0x1b5a6a[_0x46a53d(0x2bb)](_0x2696ed[_0x46a53d(0x3d3)]))_0x1b5a6a['set'](_0x2696ed['username'],{'username':_0x2696ed[_0x46a53d(0x3d3)],'roleName':_0x2696ed['roleName']||null,'roleColor':_0x2696ed['roleColor']||null,'roleAssignedBy':_0x2696ed['roleAssignedBy']||null,'roleAssignedAt':_0x2696ed['roleAssignedAt']||null,'sources':[_0x2f6102]});else{const _0xfee363=_0x1b5a6a['get'](_0x2696ed[_0x46a53d(0x3d3)]);_0x2696ed[_0x46a53d(0x424)]&&(!_0xfee363['roleName']||_0x2f6102==='D1'||_0x2f6102==='D2')&&(_0xfee363[_0x46a53d(0x424)]=_0x2696ed['roleName'],_0xfee363[_0x46a53d(0x42c)]=_0x2696ed['roleColor'],_0xfee363[_0x46a53d(0x332)]=_0x2696ed['roleAssignedBy'],_0xfee363[_0x46a53d(0x395)]=_0x2696ed[_0x46a53d(0x395)]),!_0xfee363['sources'][_0x46a53d(0x1ec)](_0x2f6102)&&_0xfee363['sources']['push'](_0x2f6102);}});}_0x2efc32(_0x307031,'D1'),_0x2efc32(_0x5ad014,'D2'),_0x2efc32(_0x6fc732,'Non-Participant'),_0x2efc32(_0x2ad88a,'Profile');const _0x255797=Array['from'](_0x1b5a6a['values']())['sort']((_0x255668,_0x368023)=>_0x255668['username']['localeCompare'](_0x368023[_0x30c238(0x3d3)]));if(_0x255797[_0x30c238(0x1ee)]===0x0){_0x3f196a[_0x30c238(0x42f)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x3f196a['innerHTML']='',_0x255797[_0x30c238(0x25e)](_0x1fb7f9=>{const _0x477101=_0x30c238,_0x30783a=document['createElement']('tr');_0x30783a['dataset']['username']=_0x1fb7f9['username'],_0x30783a['dataset']['roleName']=_0x1fb7f9[_0x477101(0x424)]||'',_0x30783a['dataset'][_0x477101(0x42c)]=_0x1fb7f9['roleColor']||'#808080';const _0x4cfbd4=_0x1fb7f9['roleAssignedAt']?new Date(_0x1fb7f9[_0x477101(0x395)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x23265c=_0x1fb7f9['roleName']?_0x477101(0x267)+_0x1fb7f9[_0x477101(0x42c)]+';\x20color:\x20'+getContrastColor(_0x1fb7f9['roleColor'])+';\x22>'+_0x1fb7f9['roleName']+'</span>':_0x477101(0x3eb);_0x30783a[_0x477101(0x42f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1fb7f9['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x1fb7f9['sources'][_0x477101(0x3c9)](',\x20')+_0x477101(0x24e)+_0x23265c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1fb7f9[_0x477101(0x332)]||'N/A')+_0x477101(0x3fc)+_0x4cfbd4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x1fb7f9[_0x477101(0x3d3)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1fb7f9[_0x477101(0x424)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x1fb7f9[_0x477101(0x3d3)]+_0x477101(0x1e4):'')+_0x477101(0x3f1),_0x3f196a[_0x477101(0x37d)](_0x30783a);}),document[_0x30c238(0x355)]('.edit-role-btn')['forEach'](_0x4b9fb6=>{_0x4b9fb6['addEventListener']('click',()=>{const _0x1767c7=_0x4b9fb6['dataset']['username'];openRoleEditModal(_0x1767c7);});}),document['querySelectorAll'](_0x30c238(0x2b5))['forEach'](_0x38e221=>{const _0x2e5381=_0x30c238;_0x38e221[_0x2e5381(0x32a)](_0x2e5381(0x360),()=>{const _0x4dbeac=_0x2e5381,_0x1d4524=_0x38e221['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x1d4524+'?')&&setUserRole(_0x1d4524,null,null)[_0x4dbeac(0x335)](()=>loadUsersWithRoles())[_0x4dbeac(0x2b2)](_0x2d682c=>console['error'](_0x4dbeac(0x218),_0x2d682c));});});}catch(_0x28d501){console[_0x30c238(0x27b)]('Error\x20loading\x20users:',_0x28d501),_0x3f196a[_0x30c238(0x42f)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x4b93c0){const _0x697a40=a4_0x599477;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x4b93c0);const _0x20ec6c=document['getElementById']('set-role-modal'),_0x3541ef=document['getElementById'](_0x697a40(0x2ea)),_0x428c6a=document['getElementById']('user-role');if(!_0x20ec6c){console[_0x697a40(0x27b)](_0x697a40(0x248)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x20ec6c);_0x3541ef?(_0x3541ef['value']=_0x4b93c0,console[_0x697a40(0x3df)]('Username\x20input\x20set\x20to:\x20'+_0x4b93c0)):console['warn'](_0x697a40(0x304));const _0x37807c=document['querySelector'](_0x697a40(0x365)+_0x4b93c0+'\x22]');if(_0x37807c&&_0x428c6a){const _0x1e8c7e=_0x37807c['dataset']['role'];_0x428c6a['value']=_0x1e8c7e==='none'?'':_0x1e8c7e,console[_0x697a40(0x3df)](_0x697a40(0x42b)+_0x428c6a['value']+'\x20(based\x20on\x20data-role:\x20'+_0x1e8c7e+')');}else{if(!_0x37807c)console['warn']('Table\x20row\x20for\x20user\x20'+_0x4b93c0+_0x697a40(0x3bb));if(!_0x428c6a)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x428c6a)_0x428c6a['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x20ec6c[_0x697a40(0x377)]['add']('active');const _0x36dec5=document['getElementById'](_0x697a40(0x24b));_0x36dec5?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x36dec5['removeEventListener']('click',closeModalHandler),_0x36dec5['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x20ec6c['removeEventListener'](_0x697a40(0x360),closeModalBackgroundHandler),_0x20ec6c['addEventListener'](_0x697a40(0x360),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x29780e){_0x29780e['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x475979=a4_0x599477,_0x340491=document['getElementById']('set-role-modal');_0x340491&&(_0x340491[_0x475979(0x377)]['remove']('active'),_0x340491['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x25eea3=a4_0x599477,_0x5ac46c=document[_0x25eea3(0x3dd)]('user-search')?.['value']['toLowerCase']()||'',_0x3041e5=document['getElementById'](_0x25eea3(0x381))?.['value']||'all',_0x596395=document['querySelectorAll']('#users-table-body\x20tr');let _0x274de5=0x0;_0x596395['forEach'](_0x534993=>{const _0x55c3b8=_0x25eea3;if(_0x534993[_0x55c3b8(0x2a9)]('.loading-cell')||_0x534993[_0x55c3b8(0x2a9)](_0x55c3b8(0x3cf))||_0x534993[_0x55c3b8(0x2a9)]('.error-state'))return;const _0x2af321=_0x534993['dataset']['username']?.['toLowerCase']()||'',_0x40b586=_0x534993[_0x55c3b8(0x283)]['role']||'none',_0xb21358=_0x2af321['includes'](_0x5ac46c),_0x171f56=_0x3041e5==='all'||_0x40b586===_0x3041e5;_0xb21358&&_0x171f56?(_0x534993['style'][_0x55c3b8(0x334)]='',_0x274de5++):_0x534993['style'][_0x55c3b8(0x334)]=_0x55c3b8(0x36f);});if(_0x274de5===0x0&&_0x596395[_0x25eea3(0x1ee)]>0x0){const _0x4a7e31=document['getElementById']('users-table-body');if(_0x4a7e31){if(!_0x4a7e31[_0x25eea3(0x2a9)]('.no-results')){const _0x1c2dee=document['createElement']('tr');_0x1c2dee['classList']['add']('no-results'),_0x1c2dee[_0x25eea3(0x42f)]='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x4a7e31['appendChild'](_0x1c2dee);}}}else{const _0x379bc6=document[_0x25eea3(0x2a9)](_0x25eea3(0x3e9));_0x379bc6&&_0x379bc6['remove']();}}function setupManageArticlesSection(){const _0xc0bf3c=a4_0x599477,_0x4a7c2a=document[_0xc0bf3c(0x3dd)]('load-articles-data');_0x4a7c2a&&_0x4a7c2a[_0xc0bf3c(0x32a)]('click',function(){const _0x5c77f6=_0xc0bf3c;this['classList'][_0x5c77f6(0x22e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x5c77f6(0x335)](()=>{const _0x5278ac=_0x5c77f6;this['classList'][_0x5278ac(0x33e)](_0x5278ac(0x401)),this['innerHTML']=_0x5278ac(0x22c);})[_0x5c77f6(0x2b2)](_0x4e60de=>{const _0x257136=_0x5c77f6;console[_0x257136(0x27b)]('Error\x20loading\x20articles:',_0x4e60de),this[_0x257136(0x377)]['remove']('loading'),this['innerHTML']=_0x257136(0x2e2),setTimeout(()=>{const _0x5b0952=_0x257136;this[_0x5b0952(0x42f)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x4b1b4d=document['getElementById']('create-new-article-btn');_0x4b1b4d?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x4b1b4d['style'][_0xc0bf3c(0x334)]='block',_0x4b1b4d['addEventListener'](_0xc0bf3c(0x360),()=>{openArticleModal();})):console[_0xc0bf3c(0x27b)](_0xc0bf3c(0x30b));const _0x506c78=document['getElementById']('article-form');_0x506c78&&_0x506c78[_0xc0bf3c(0x32a)](_0xc0bf3c(0x374),_0x2b77c7=>{_0x2b77c7['preventDefault'](),saveArticle();});const _0x4de528=document['getElementById']('cancel-article-btn');_0x4de528&&_0x4de528[_0xc0bf3c(0x32a)]('click',()=>{closeArticleModal();});const _0x26a23b=document[_0xc0bf3c(0x2a9)]('#article-modal\x20.close-btn');_0x26a23b&&_0x26a23b['addEventListener']('click',()=>{closeArticleModal();});const _0x59a172=document['getElementById']('article-modal');_0x59a172&&_0x59a172['addEventListener'](_0xc0bf3c(0x360),_0x1c95c7=>{const _0x23316c=_0xc0bf3c;_0x1c95c7[_0x23316c(0x3a6)]===_0x59a172&&closeArticleModal();});}async function loadArticles(){const _0x64076f=a4_0x599477,_0x2d7822=document['getElementById']('articles-table-body');if(!_0x2d7822)return;_0x2d7822['innerHTML']=_0x64076f(0x42a);try{const _0x10ef61=collection(db,'articles'),_0x2642cc=query(_0x10ef61,orderBy('createdAt','desc')),_0x387c91=await getDocs(_0x2642cc);if(_0x387c91['empty']){_0x2d7822[_0x64076f(0x42f)]=_0x64076f(0x1e6);return;}_0x2d7822['innerHTML']='',_0x387c91['forEach'](_0x4e9c4e=>{const _0x4bf5d0=_0x64076f,_0x2cc647=_0x4e9c4e['data'](),_0x280ff9=document['createElement']('tr'),_0x3e3c8b=_0x2cc647['createdAt']?new Date(_0x2cc647['createdAt'][_0x4bf5d0(0x1ef)]*0x3e8)['toLocaleString']():'N/A';_0x280ff9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2cc647[_0x4bf5d0(0x3db)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2cc647['author']||_0x4bf5d0(0x358))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3e3c8b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x4e9c4e['id']+_0x4bf5d0(0x26d)+_0x4e9c4e['id']+_0x4bf5d0(0x3fe),_0x2d7822['appendChild'](_0x280ff9);}),setupArticleActionButtons();}catch(_0x37dd3a){console['error'](_0x64076f(0x412),_0x37dd3a),_0x2d7822[_0x64076f(0x42f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x37dd3a['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x4cf922=a4_0x599477;document[_0x4cf922(0x355)]('.edit-article-btn')['forEach'](_0x338a4f=>{const _0x471530=_0x4cf922;_0x338a4f['addEventListener'](_0x471530(0x360),async _0x344b05=>{const _0x42f8cc=_0x344b05['currentTarget']['dataset']['id'];openArticleModal(_0x42f8cc);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x457982=>{const _0x2b0b9c=_0x4cf922;_0x457982[_0x2b0b9c(0x32a)]('click',async _0x28de94=>{const _0x3e963=_0x28de94['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x3e963);});});}function openArticleModal(_0x10225a=null){const _0x5cfcc2=a4_0x599477,_0x24400d=document['getElementById']('article-modal'),_0x5efd25=document[_0x5cfcc2(0x3dd)]('article-modal-title'),_0x3ff232=document[_0x5cfcc2(0x3dd)]('article-form'),_0x5bfdd3=document[_0x5cfcc2(0x3dd)]('article-id');_0x3ff232['reset'](),_0x5bfdd3[_0x5cfcc2(0x26f)]='';if(_0x10225a)_0x5efd25['textContent']='Edit\x20Article',_0x5bfdd3[_0x5cfcc2(0x26f)]=_0x10225a,loadArticleData(_0x10225a);else{_0x5efd25['textContent']=_0x5cfcc2(0x2e9);const _0x16cb20=auth['currentUser'];if(_0x16cb20){const _0x4e42f5=document['getElementById'](_0x5cfcc2(0x30e));if(_0x4e42f5&&_0x16cb20[_0x5cfcc2(0x2cf)])_0x4e42f5['value']=_0x16cb20['displayName'];else _0x4e42f5&&(_0x4e42f5['value']=_0x16cb20['email']);}}_0x24400d['classList']['add']('active');}async function loadArticleData(_0x442afa){const _0x49a35e=a4_0x599477;try{const _0x531982=doc(db,'articles',_0x442afa),_0x59c455=await getDoc(_0x531982);if(!_0x59c455['exists']()){showNotification('Article\x20not\x20found',_0x49a35e(0x27b));return;}const _0x3647a9=_0x59c455[_0x49a35e(0x3a1)]();document[_0x49a35e(0x3dd)](_0x49a35e(0x302))['value']=_0x3647a9['title']||'',document['getElementById'](_0x49a35e(0x30e))['value']=_0x3647a9['author']||'',document['getElementById']('article-image-url')[_0x49a35e(0x26f)]=_0x3647a9[_0x49a35e(0x41a)]||'',document['getElementById']('article-content')[_0x49a35e(0x26f)]=_0x3647a9[_0x49a35e(0x3e0)]||'';}catch(_0x1aee0e){console[_0x49a35e(0x27b)](_0x49a35e(0x3ca),_0x1aee0e),showNotification('Failed\x20to\x20load\x20article\x20data',_0x49a35e(0x27b));}}async function saveArticle(){const _0x263331=a4_0x599477;try{const _0x43aca8=document['getElementById']('article-id')['value'],_0x2e9ecc=document['getElementById']('article-title')[_0x263331(0x26f)][_0x263331(0x34a)](),_0x401aa4=document['getElementById']('article-author')[_0x263331(0x26f)]['trim'](),_0x4d7250=document['getElementById']('article-image-url')[_0x263331(0x26f)]['trim'](),_0x4a54be=document['getElementById'](_0x263331(0x344))['value'][_0x263331(0x34a)]();if(!_0x2e9ecc||!_0x4a54be){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x36914c=auth['currentUser'];if(!_0x36914c){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles',_0x263331(0x27b));return;}const _0x345034={'title':_0x2e9ecc,'author':_0x401aa4,'imageUrl':_0x4d7250||null,'content':_0x4a54be,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x36914c[_0x263331(0x430)]};!_0x43aca8?(_0x345034['createdAt']=serverTimestamp(),_0x345034['createdBy']=_0x36914c[_0x263331(0x430)],await addDoc(collection(db,'articles'),_0x345034),showNotification(_0x263331(0x3ec),'success')):(await updateDoc(doc(db,'articles',_0x43aca8),_0x345034),showNotification('Article\x20updated\x20successfully',_0x263331(0x383))),closeArticleModal(),loadArticles();}catch(_0x5f09bf){console['error']('Error\x20saving\x20article:',_0x5f09bf),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x5f09bf['message'],'error');}}function closeArticleModal(){const _0x1ece50=a4_0x599477,_0xce1fad=document['getElementById'](_0x1ece50(0x2be));_0xce1fad&&_0xce1fad['classList'][_0x1ece50(0x33e)]('active');}async function confirmDeleteArticle(_0x251fe3){const _0x14aef9=a4_0x599477;if(confirm(_0x14aef9(0x2d7)))try{await deleteDoc(doc(db,'articles',_0x251fe3)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x354238){console[_0x14aef9(0x27b)]('Error\x20deleting\x20article:',_0x354238),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x354238['message'],'error');}}function setupTrophyManagementSection(){const _0x1ab7c7=a4_0x599477,_0xb02411=document['getElementById'](_0x1ab7c7(0x372));_0xb02411&&_0xb02411['addEventListener'](_0x1ab7c7(0x360),function(){const _0x279013=_0x1ab7c7;this['classList'][_0x279013(0x22e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x2a2bf7=document['getElementById']('assign-trophy-image');_0x2a2bf7&&(_0x2a2bf7[_0x279013(0x2ab)]=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x320380=>{const _0x1f0b9a=_0x279013;console['error']('Error\x20loading\x20trophies:',_0x320380),this[_0x1f0b9a(0x377)][_0x1f0b9a(0x33e)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1282ea=_0x1f0b9a;this['innerHTML']=_0x1282ea(0x3c1);},0xbb8);});});const _0x301c54=document['getElementById']('create-new-trophy-btn');_0x301c54&&_0x301c54['addEventListener']('click',()=>{openTrophyModal();});const _0x464201=document['getElementById'](_0x1ab7c7(0x2aa));_0x464201&&_0x464201['addEventListener'](_0x1ab7c7(0x374),_0x532d3e=>{_0x532d3e['preventDefault'](),saveTrophyDefinition();});const _0x48c8c0=document['getElementById']('cancel-trophy-btn');_0x48c8c0&&_0x48c8c0['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll'](_0x1ab7c7(0x29e))['forEach'](_0x4377ab=>{const _0x4dc36f=_0x1ab7c7;_0x4377ab[_0x4dc36f(0x32a)](_0x4dc36f(0x360),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0xaad579=document[_0x1ab7c7(0x3dd)](_0x1ab7c7(0x285));_0xaad579&&_0xaad579['addEventListener']('click',_0x21870f=>{_0x21870f['target']===_0xaad579&&closeTrophyModal();});const _0x14d258=document[_0x1ab7c7(0x3dd)]('assign-trophy-modal');_0x14d258&&_0x14d258['addEventListener']('click',_0xbded56=>{const _0x108451=_0x1ab7c7;_0xbded56[_0x108451(0x3a6)]===_0x14d258&&closeAssignTrophyModal();});const _0x3b0cee=document['getElementById']('assign-trophy-form');_0x3b0cee&&_0x3b0cee['addEventListener']('submit',_0x4994b7=>{const _0x37825d=_0x1ab7c7;_0x4994b7[_0x37825d(0x264)](),assignTrophyToPlayer();});const _0x58b53a=document['getElementById']('cancel-assign-btn');_0x58b53a&&_0x58b53a[_0x1ab7c7(0x32a)]('click',()=>{closeAssignTrophyModal();});const _0x361d16=document['getElementById']('trophy-image-url');_0x361d16&&(_0x361d16[_0x1ab7c7(0x32a)]('input',updateTrophyImagePreview),_0x361d16['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x589974=a4_0x599477,_0x42e001=document['getElementById']('trophy-image-url')['value']['trim'](),_0x277263=document['getElementById'](_0x589974(0x3b7));if(!_0x277263){const _0x4da8a4=document[_0x589974(0x3dd)]('trophy-image-url')[_0x589974(0x258)](_0x589974(0x2ca)),_0x4cf7bd=document[_0x589974(0x26b)]('div');_0x4cf7bd['id']='trophy-image-preview',_0x4cf7bd[_0x589974(0x2ee)]='trophy-preview-container',_0x4da8a4[_0x589974(0x37d)](_0x4cf7bd);const _0x44f752=document['createElement'](_0x589974(0x320));_0x44f752['id']='trophy-preview-img',_0x44f752['alt']='Trophy\x20Preview',_0x44f752['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x4cf7bd['appendChild'](_0x44f752);}const _0x2a8c62=document['getElementById']('trophy-preview-img');_0x42e001?(_0x2a8c62['src']=_0x42e001,_0x2a8c62['style']['display']=_0x589974(0x38d),_0x2a8c62['classList']['remove']('error')):(_0x2a8c62[_0x589974(0x1f4)]=DEFAULT_TROPHY_IMAGE,_0x2a8c62['style']['display']='block');}async function loadTrophyDefinitions(){const _0x1727bf=a4_0x599477,_0x57c9a6=document['getElementById']('trophies-table-body');if(!_0x57c9a6)return;_0x57c9a6['innerHTML']=_0x1727bf(0x3f3);try{const _0x34483e=collection(db,'trophyDefinitions'),_0x39a477=query(_0x34483e,orderBy('createdAt','desc')),_0xb55ed5=await getDocs(_0x39a477);if(_0xb55ed5['empty']){_0x57c9a6['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x57c9a6['innerHTML']='',_0xb55ed5['forEach'](_0x2f2e56=>{const _0x53e81b=_0x1727bf,_0x1bd92e=_0x2f2e56[_0x53e81b(0x3a1)](),_0x2cf88a=document['createElement']('tr'),_0x5466e4=_0x1bd92e['createdAt']?new Date(_0x1bd92e['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x2cf88a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x1bd92e['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1bd92e['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x1bd92e['name']||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x1bd92e['rarity']||'common')+'\x22>'+(_0x1bd92e['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5466e4+_0x53e81b(0x3ac)+_0x2f2e56['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x2f2e56['id']+_0x53e81b(0x3e6)+_0x2f2e56['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x57c9a6['appendChild'](_0x2cf88a);}),setupTrophyActionButtons();}catch(_0x947027){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x947027),_0x57c9a6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x947027['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x221d88=a4_0x599477;document[_0x221d88(0x355)](_0x221d88(0x41d))['forEach'](_0x2b608f=>{_0x2b608f['addEventListener']('click',_0x1858ba=>{const _0x5e92dd=a4_0x4e5c,_0x584104=_0x1858ba[_0x5e92dd(0x296)]['dataset']['id'];openTrophyModal(_0x584104);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x1a639e=>{_0x1a639e['addEventListener']('click',_0x38f099=>{const _0xd32240=_0x38f099['currentTarget']['dataset']['id'];openAssignTrophyModal(_0xd32240);});}),document[_0x221d88(0x355)](_0x221d88(0x3f0))['forEach'](_0x27814d=>{_0x27814d['addEventListener']('click',_0x2583b2=>{const _0x52443f=a4_0x4e5c,_0x154490=_0x2583b2[_0x52443f(0x296)]['dataset']['id'];confirmDeleteTrophy(_0x154490);});});}function openTrophyModal(_0x56ea36=null){const _0x4ac6ce=a4_0x599477,_0x2e12e1=document[_0x4ac6ce(0x3dd)](_0x4ac6ce(0x285)),_0x41a3fb=document[_0x4ac6ce(0x3dd)]('trophy-modal-title'),_0x364e2c=document[_0x4ac6ce(0x3dd)]('trophy-form'),_0x35349e=document['getElementById'](_0x4ac6ce(0x2e5));_0x364e2c[_0x4ac6ce(0x240)](),_0x35349e[_0x4ac6ce(0x26f)]='';const _0x3a0f5f=document[_0x4ac6ce(0x3dd)](_0x4ac6ce(0x3d4));_0x3a0f5f&&(_0x3a0f5f['src']=DEFAULT_TROPHY_IMAGE,_0x3a0f5f[_0x4ac6ce(0x377)][_0x4ac6ce(0x33e)]('error')),_0x56ea36?(_0x41a3fb['textContent']='Edit\x20Trophy',_0x35349e['value']=_0x56ea36,loadTrophyData(_0x56ea36)):_0x41a3fb['textContent']='Create\x20New\x20Trophy',_0x2e12e1['classList'][_0x4ac6ce(0x22e)](_0x4ac6ce(0x308));}async function loadTrophyData(_0x1b1cf0){const _0x23ea3f=a4_0x599477;try{const _0x3514ed=doc(db,_0x23ea3f(0x225),_0x1b1cf0),_0x20b8b0=await getDoc(_0x3514ed);if(!_0x20b8b0[_0x23ea3f(0x254)]()){showNotification('Trophy\x20not\x20found',_0x23ea3f(0x27b));return;}const _0x58b035=_0x20b8b0['data']();document[_0x23ea3f(0x3dd)](_0x23ea3f(0x437))['value']=_0x58b035['name']||'',document['getElementById']('trophy-description')[_0x23ea3f(0x26f)]=_0x58b035[_0x23ea3f(0x3c8)]||'',document[_0x23ea3f(0x3dd)]('trophy-image-url')[_0x23ea3f(0x26f)]=_0x58b035['image']||'',document['getElementById']('trophy-rarity')['value']=_0x58b035['rarity']||'common',updateTrophyImagePreview();}catch(_0x3f0391){console[_0x23ea3f(0x27b)]('Error\x20loading\x20trophy\x20data:',_0x3f0391),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x231c56=a4_0x599477;try{const _0x4625cf=document['getElementById']('trophy-id')[_0x231c56(0x26f)],_0x37fc50=document[_0x231c56(0x3dd)]('trophy-name')[_0x231c56(0x26f)]['trim'](),_0x525901=document['getElementById'](_0x231c56(0x330))['value']['trim'](),_0xec0404=document['getElementById']('trophy-image-url')['value']['trim'](),_0x5262a1=document['getElementById']('trophy-rarity')['value'];if(!_0x37fc50||!_0x525901||!_0xec0404){showNotification('All\x20fields\x20are\x20required',_0x231c56(0x27b));return;}const _0x23a302=auth['currentUser'];if(!_0x23a302){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x4a3c0b={'name':_0x37fc50,'description':_0x525901,'image':_0xec0404,'rarity':_0x5262a1,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x23a302[_0x231c56(0x430)]};!_0x4625cf?(_0x4a3c0b['createdAt']=serverTimestamp(),_0x4a3c0b['createdBy']=_0x23a302['email'],await addDoc(collection(db,_0x231c56(0x225)),_0x4a3c0b),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x4625cf),_0x4a3c0b),showNotification('Trophy\x20updated\x20successfully',_0x231c56(0x383))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x3933a3){console['error']('Error\x20saving\x20trophy:',_0x3933a3),showNotification(_0x231c56(0x228)+_0x3933a3['message'],_0x231c56(0x27b));}}function closeTrophyModal(){const _0x221621=a4_0x599477,_0x238361=document[_0x221621(0x3dd)]('trophy-modal');_0x238361&&_0x238361[_0x221621(0x377)]['remove']('active');}async function confirmDeleteTrophy(_0x4b4b56){const _0x1296b1=a4_0x599477;if(!_0x4b4b56){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm(_0x1296b1(0x301)))try{const _0x5182f5=auth['currentUser'];if(!_0x5182f5){showNotification(_0x1296b1(0x3bd),_0x1296b1(0x27b));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x4b4b56),await deleteDoc(doc(db,'trophyDefinitions',_0x4b4b56)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x1296b1(0x383)),loadTrophyDefinitions();}catch(_0x20cc7e){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x20cc7e),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x20cc7e['message'],'error');}}async function openAssignTrophyModal(_0x308a06){const _0x1ba2f1=a4_0x599477;try{const _0x17302a=doc(db,_0x1ba2f1(0x225),_0x308a06),_0x4a5c12=await getDoc(_0x17302a);if(!_0x4a5c12[_0x1ba2f1(0x254)]()){showNotification('Trophy\x20not\x20found',_0x1ba2f1(0x27b));return;}const _0x54b77c=_0x4a5c12['data']();document['getElementById']('assign-trophy-id')['value']=_0x308a06,document[_0x1ba2f1(0x3dd)](_0x1ba2f1(0x386))[_0x1ba2f1(0x26f)]=_0x54b77c['name'],document['getElementById']('assign-trophy-image')['src']=_0x54b77c['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0x1ba2f1(0x295))['textContent']=_0x54b77c['name']||'Unnamed\x20Trophy',document[_0x1ba2f1(0x3dd)]('assign-trophy-description')['textContent']=_0x54b77c['description']||_0x1ba2f1(0x3ad);const _0x1fb6ec=document['getElementById'](_0x1ba2f1(0x235));_0x1fb6ec[_0x1ba2f1(0x2a3)]=_0x54b77c['rarity']||'common',_0x1fb6ec['className']='trophy-rarity\x20'+(_0x54b77c['rarity']||_0x1ba2f1(0x363));const _0x1da845=document['getElementById']('assign-trophy-modal');_0x1da845['classList']['add'](_0x1ba2f1(0x308));}catch(_0x55eee4){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x55eee4),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0xb3a73c=a4_0x599477,_0x41aa41=document['getElementById']('assign-trophy-modal');_0x41aa41&&_0x41aa41['classList'][_0xb3a73c(0x33e)]('active');}async function assignTrophyToPlayer(){const _0x4bb41d=a4_0x599477;try{const _0x85c20f=document[_0x4bb41d(0x3dd)]('assign-trophy-id')['value'],_0x212b1e=document[_0x4bb41d(0x3dd)]('assign-trophy-name')[_0x4bb41d(0x26f)],_0x72a57=document[_0x4bb41d(0x3dd)]('assign-player-username')[_0x4bb41d(0x26f)]['trim'](),_0x395fae=document['querySelector'](_0x4bb41d(0x35b))['value'];if(!_0x85c20f||!_0x72a57){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x60f8a4=auth['currentUser'];if(!_0x60f8a4){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x521007=null,_0xe3db45=null,_0x3b8379=null;if(_0x395fae===_0x4bb41d(0x364)){const _0x14780e=collection(db,_0x4bb41d(0x373)),_0x4adfb1=query(_0x14780e,where('username','==',_0x72a57)),_0x5f13ea=await getDocs(_0x4adfb1);!_0x5f13ea['empty']&&(_0x521007=_0x5f13ea[_0x4bb41d(0x206)][0x0],_0xe3db45=_0x521007['id'],_0x3b8379=_0x521007['data']());}else{const _0x3d8dd3=_0x395fae==='D1'?'players':_0x395fae==='D2'?'playersD2':'playersD3',_0x52d3a6=collection(db,_0x3d8dd3),_0x508641=query(_0x52d3a6,where(_0x4bb41d(0x3d3),'==',_0x72a57)),_0x20ffb0=await getDocs(_0x508641);!_0x20ffb0['empty']&&(_0x521007=_0x20ffb0[_0x4bb41d(0x206)][0x0],_0xe3db45=_0x521007['id'],_0x3b8379=_0x521007[_0x4bb41d(0x3a1)]());}if(!_0x521007){showNotification(_0x4bb41d(0x277)+_0x72a57+'\x22\x20not\x20found\x20in\x20'+(_0x395fae==='non-participant'?'non-participants':_0x395fae+'\x20ladder'),_0x4bb41d(0x27b));return;}const _0x311a42=collection(db,'userTrophies'),_0x9bf940=query(_0x311a42,where('userId','==',_0xe3db45),where('trophyId','==',_0x85c20f)),_0x5927a8=await getDocs(_0x9bf940);if(!_0x5927a8['empty']){showNotification(_0x4bb41d(0x277)+_0x72a57+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0xe3db45,'playerUsername':_0x72a57,'trophyId':_0x85c20f,'awardedAt':serverTimestamp(),'awardedBy':_0x60f8a4['email'],'ladder':_0x395fae}),showNotification('Trophy\x20\x22'+_0x212b1e+_0x4bb41d(0x3f8)+_0x72a57,'success'),closeAssignTrophyModal();}catch(_0x17aaaa){console['error']('Error\x20assigning\x20trophy:',_0x17aaaa),showNotification(_0x4bb41d(0x314)+_0x17aaaa[_0x4bb41d(0x24d)],'error');}}function setupInactivePlayersSection(){const _0xe71e00=a4_0x599477,_0x3ff332=document[_0xe71e00(0x3dd)]('inactive-days-filter');_0x3ff332&&_0x3ff332[_0xe71e00(0x32a)]('change',function(){const _0x353ba7=_0xe71e00,_0x60edaa=document[_0x353ba7(0x3dd)]('load-inactive-players-data');if(_0x60edaa)_0x60edaa['click']();});const _0x39c7f8=document[_0xe71e00(0x2a9)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x2bfc22=document[_0xe71e00(0x2a9)]('.ladder-switch\x20input[value=\x22D2\x22]');_0x39c7f8&&_0x2bfc22&&(_0x39c7f8['addEventListener']('change',function(){const _0x5d1623=_0xe71e00;if(this[_0x5d1623(0x36a)]){currentLadder='D1';if(document['getElementById'](_0x5d1623(0x3b4))['style']['display']!=='none'){const _0x424df6=document['getElementById']('load-inactive-players-data');if(_0x424df6)_0x424df6['click']();}}}),_0x2bfc22['addEventListener']('change',function(){const _0x4981a7=_0xe71e00;if(this['checked']){currentLadder='D2';if(document[_0x4981a7(0x3dd)]('inactive-players')['style']['display']!=='none'){const _0x55da83=document['getElementById']('load-inactive-players-data');if(_0x55da83)_0x55da83[_0x4981a7(0x360)]();}}}));const _0x262383=document['getElementById'](_0xe71e00(0x28a));_0x262383&&_0x262383['addEventListener']('input',debounce(function(){const _0x315f22=_0xe71e00,_0x2132e2=_0x262383['value']['toLowerCase'](),_0x3716ab=document['querySelectorAll'](_0x315f22(0x23f));_0x3716ab['forEach'](_0x389e14=>{const _0x3d0cfd=_0x315f22;if(_0x389e14['querySelector']('.loading-cell')||_0x389e14[_0x3d0cfd(0x2a9)]('.empty-state')||_0x389e14['querySelector']('.error-state'))return;const _0x2fc216=_0x389e14['cells'][0x0]?.['textContent'][_0x3d0cfd(0x291)]()||'',_0x4e8e61=_0x389e14['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x2fc216[_0x3d0cfd(0x1ec)](_0x2132e2)||_0x4e8e61[_0x3d0cfd(0x1ec)](_0x2132e2)?_0x389e14[_0x3d0cfd(0x2d3)]['display']='':_0x389e14['style']['display']=_0x3d0cfd(0x36f);});},0x12c)),document['addEventListener']('click',function(_0xd5db4c){const _0x1be020=_0xe71e00;if(_0xd5db4c[_0x1be020(0x3a6)]['closest'](_0x1be020(0x35c))){const _0x492bed=_0xd5db4c['target']['closest']('.view-player-btn'),_0x43075c=_0x492bed['dataset'][_0x1be020(0x3d3)];_0x43075c&&alert(_0x1be020(0x25d)+_0x43075c+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x31378b=a4_0x599477,_0x239b62=document['getElementById']('inactive-players-table-body');if(!_0x239b62)return;_0x239b62[_0x31378b(0x42f)]=_0x31378b(0x3e2);try{const _0x9980=document['getElementById'](_0x31378b(0x316)),_0x294fe4=_0x9980?parseInt(_0x9980[_0x31378b(0x26f)])||0x0:0x0,_0x35353a=collection(db,currentLadder==='D1'?_0x31378b(0x3de):'playersD2'),_0x28256a=await getDocs(_0x35353a);if(_0x28256a['empty']){_0x239b62[_0x31378b(0x42f)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x206b1d=[];_0x28256a['forEach'](_0x4612b3=>{const _0x20153b=_0x31378b,_0x5b6d10=_0x4612b3['data']();_0x206b1d['push']({..._0x5b6d10,'id':_0x4612b3['id'],'username':_0x5b6d10[_0x20153b(0x3d3)]||_0x20153b(0x28c)});}),console['log']('Found\x20'+_0x206b1d['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0xfa2e9f=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x29f4a2=_0x206b1d[_0x31378b(0x284)](async _0x49ac97=>{const _0x525d8c=_0x31378b;try{const _0x572768=collection(db,_0xfa2e9f),_0x5a5861=query(_0x572768,or(where('winnerUsername','==',_0x49ac97[_0x525d8c(0x3d3)]),where('loserUsername','==',_0x49ac97['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x56393a=await getDocs(_0x5a5861);if(!_0x56393a['empty']){const _0xeb924b=_0x56393a['docs'][0x0]['data'](),_0x45072a=_0xeb924b[_0x525d8c(0x292)]?new Date(_0xeb924b['approvedAt'][_0x525d8c(0x1ef)]*0x3e8):null,_0x298f5f=new Date(),_0x1cb331=_0x45072a?Math['floor']((_0x298f5f-_0x45072a)/(0x3e8*0x3c*0x3c*0x18)):null,_0x1ea153=_0xeb924b['winnerUsername']===_0x49ac97['username']?_0xeb924b['loserUsername']:_0xeb924b['winnerUsername'],_0x5f1d6b=_0xeb924b['winnerUsername']===_0x49ac97[_0x525d8c(0x3d3)]?'Won':'Lost';return{..._0x49ac97,'lastMatch':{'date':_0x45072a?_0x45072a['toLocaleDateString']():'N/A','opponent':_0x1ea153||'Unknown','result':_0x5f1d6b,'timestamp':_0x45072a||new Date(0x0),'daysSinceMatch':_0x1cb331||Number[_0x525d8c(0x2d2)]}};}else return{..._0x49ac97,'lastMatch':{'date':_0x525d8c(0x3cc),'opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0xaca211){return console['error'](_0x525d8c(0x3f5)+_0x49ac97['username']+':',_0xaca211),{..._0x49ac97,'lastMatch':{'date':_0x525d8c(0x378),'opponent':_0x525d8c(0x378),'result':_0x525d8c(0x378),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x1bc558=await Promise['all'](_0x29f4a2);_0x1bc558['sort']((_0x2c8c75,_0x1a728c)=>_0x1a728c['lastMatch']['daysSinceMatch']-_0x2c8c75['lastMatch']['daysSinceMatch']);_0x294fe4>0x0&&(_0x1bc558=_0x1bc558[_0x31378b(0x289)](_0x287f83=>_0x287f83[_0x31378b(0x376)]['daysSinceMatch']>=_0x294fe4));_0x239b62[_0x31378b(0x42f)]='';if(_0x1bc558['length']===0x0){_0x239b62['innerHTML']=_0x31378b(0x2ed);return;}_0x1bc558['forEach'](_0x3df2a4=>{const _0xfd7e5a=_0x31378b,_0x4a06e1=document[_0xfd7e5a(0x26b)]('tr'),_0x59d5ad=_0x3df2a4['lastMatch']['daysSinceMatch']>0x1e?_0xfd7e5a(0x425):_0x3df2a4[_0xfd7e5a(0x376)]['daysSinceMatch']>0xe?_0xfd7e5a(0x380):'';_0x4a06e1['className']=_0x59d5ad,_0x4a06e1['innerHTML']=_0xfd7e5a(0x319)+_0x3df2a4['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3df2a4[_0xfd7e5a(0x3d7)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3df2a4['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3df2a4['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0xfd7e5a(0x3aa):_0x3df2a4['lastMatch'][_0xfd7e5a(0x3d1)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+_0xfd7e5a(0x3fc)+(_0x3df2a4[_0xfd7e5a(0x376)]['date']===_0xfd7e5a(0x3cc)?'No\x20matches\x20found':_0x3df2a4['lastMatch']['result']+'\x20vs\x20'+_0x3df2a4['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x3df2a4[_0xfd7e5a(0x3d3)]+_0xfd7e5a(0x300),_0x239b62['appendChild'](_0x4a06e1);}),console['log']('Displaying\x20'+_0x1bc558[_0x31378b(0x1ee)]+'\x20inactive\x20players');}catch(_0x2fd7b5){console[_0x31378b(0x27b)](_0x31378b(0x2d1),_0x2fd7b5),_0x239b62['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x2fd7b5[_0x31378b(0x24d)]+_0x31378b(0x2da);}}function setupHighlightButtons(){const _0x492b64=a4_0x599477;console['log'](_0x492b64(0x3c6));const _0x5da63f=document['getElementById']('create-match-highlight-btn');_0x5da63f&&_0x5da63f['addEventListener']('click',function(){const _0x5421e2=_0x492b64;console[_0x5421e2(0x3df)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x5421e2(0x3c2));});const _0x166612=document['getElementById']('create-creator-highlight-btn');_0x166612&&_0x166612['addEventListener']('click',function(){const _0x5c8521=_0x492b64;console['log'](_0x5c8521(0x411)),openHighlightModal(_0x5c8521(0x2ba));});const _0x5b0c72=document[_0x492b64(0x3dd)](_0x492b64(0x2f9));_0x5b0c72&&_0x5b0c72[_0x492b64(0x32a)](_0x492b64(0x360),function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0xdec3e2='match'){const _0x568109=a4_0x599477;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0xdec3e2);const _0x1415a1=document['getElementById']('highlight-modal'),_0x2a74b8=document['getElementById']('highlight-form'),_0x11ff8a=document['getElementById']('highlight-modal-title'),_0x38dba7=document['getElementById']('highlight-id');if(!_0x1415a1||!_0x2a74b8||!_0x11ff8a){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x2a74b8['reset'](),_0x38dba7['value']='';const _0x544032=['match','creator','achievement'],_0x43da5e=!_0x544032['includes'](_0xdec3e2);if(_0x43da5e){const _0xb1561c=_0xdec3e2;_0x38dba7['value']=_0xb1561c,_0x11ff8a['textContent']='Loading...',loadHighlightDataAdmin(_0xb1561c);}else{const _0x503cce=_0xdec3e2;document['getElementById']('highlight-type')['value']=_0x503cce,_0x11ff8a['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x503cce),toggleHighlightFields(_0x503cce);const _0x4a5fb5=auth['currentUser'];_0x4a5fb5&&document['getElementById']('highlight-submitted-by')&&(document['getElementById'](_0x568109(0x1f0))['value']=_0x4a5fb5['displayName']||_0x4a5fb5['email']);}_0x1415a1['classList']['add']('active');}function toggleHighlightFields(_0x53077e){const _0x3d7600=a4_0x599477;console['log'](_0x3d7600(0x3a8)+_0x53077e);const _0x55438d=document['getElementById'](_0x3d7600(0x34f));if(!_0x55438d)return;const _0x317b0d=_0x55438d['querySelectorAll']('.form-group,\x20.form-row');_0x317b0d['forEach'](_0x5b555a=>_0x5b555a['style']['display']='none');const _0x13f342=document[_0x3d7600(0x3dd)]('highlight-video-preview-container');if(_0x13f342)_0x13f342[_0x3d7600(0x2d3)]['display']=_0x3d7600(0x36f);const _0x29a115=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x29a115['forEach'](_0x1ff1d4=>{const _0x58b981=document['getElementById'](_0x1ff1d4);if(_0x58b981)_0x58b981['style']['display']='block';});if(_0x53077e==='match'){const _0x11bf2e=['highlight-video-container',_0x3d7600(0x321),'highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x11bf2e['forEach'](_0x18db50=>{const _0x37babf=document['getElementById'](_0x18db50);_0x37babf&&(_0x18db50==='highlight-players-container'?_0x37babf['style']['display']='flex':_0x37babf['style']['display']='block');});const _0x2f9b7a=document['getElementById']('highlight-video-id');if(_0x2f9b7a){_0x2f9b7a[_0x3d7600(0x427)]=!![];const _0x36e007=_0x2f9b7a['previousElementSibling'];if(_0x36e007)_0x36e007[_0x3d7600(0x42f)]='YouTube\x20Video\x20ID*';}if(_0x13f342)_0x13f342['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x53077e==='creator'){const _0x1d572d=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x1d572d['forEach'](_0x44f931=>{const _0x30947a=document['getElementById'](_0x44f931);if(_0x30947a)_0x30947a['style']['display']='block';});const _0x265a71=document['getElementById']('highlight-video-id');if(_0x265a71){_0x265a71['required']=![];const _0x2b661f=_0x265a71['previousElementSibling'];if(_0x2b661f)_0x2b661f['innerHTML']=_0x3d7600(0x347);}}else{if(_0x53077e==='achievement'){const _0x561bd4=['highlight-achievement-player-container','highlight-achievement-type-container',_0x3d7600(0x36d),'highlight-player-profile-container','highlight-achievement-image-container',_0x3d7600(0x2af)];_0x561bd4['forEach'](_0xc5d7bb=>{const _0x201d7f=_0x3d7600,_0x20f2f2=document[_0x201d7f(0x3dd)](_0xc5d7bb);if(_0x20f2f2)_0x20f2f2['style']['display']=_0x201d7f(0x38d);});const _0x277f05=document['getElementById'](_0x3d7600(0x238));if(_0x277f05){_0x277f05['required']=![];const _0x413587=_0x277f05['previousElementSibling'];if(_0x413587)_0x413587[_0x3d7600(0x42f)]='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x352bec){const _0x8fe15b=a4_0x599477;try{const _0x4bb77c=doc(db,'highlights',_0x352bec),_0x53c473=await getDoc(_0x4bb77c);if(!_0x53c473[_0x8fe15b(0x254)]()){showNotification('Highlight\x20not\x20found',_0x8fe15b(0x27b));return;}const _0xf07950=_0x53c473['data'](),_0x4fbeba=_0xf07950[_0x8fe15b(0x30c)]||'match';document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x4fbeba),document[_0x8fe15b(0x3dd)](_0x8fe15b(0x393))['value']=_0x4fbeba,toggleHighlightFields(_0x4fbeba),document['getElementById']('highlight-title')[_0x8fe15b(0x26f)]=_0xf07950['title']||'',document[_0x8fe15b(0x3dd)]('highlight-description')['value']=_0xf07950['description']||'',document[_0x8fe15b(0x3dd)]('highlight-submitted-by')['value']=_0xf07950['submittedBy']||'';_0xf07950['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0xf07950['videoId'],updateHighlightVideoPreview());if(_0x4fbeba==='match'){document['getElementById'](_0x8fe15b(0x236))[_0x8fe15b(0x26f)]=_0xf07950['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0xf07950['map']||'';if(_0xf07950['matchDate']){const _0x1a4343=new Date(_0xf07950['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')[_0x8fe15b(0x26f)]=_0x1a4343['toISOString']()[_0x8fe15b(0x34c)]('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0xf07950['winnerName']||'',document['getElementById'](_0x8fe15b(0x2e1))['value']=_0xf07950['winnerScore']||'',document['getElementById'](_0x8fe15b(0x359))['value']=_0xf07950['loserName']||'',document[_0x8fe15b(0x3dd)]('highlight-loser-score')['value']=_0xf07950['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0xf07950['matchLink']||'';}else{if(_0x4fbeba==='creator')document['getElementById']('highlight-map')['value']=_0xf07950['map']||'',document['getElementById']('highlight-map-creator')['value']=_0xf07950['mapCreator']||'',document['getElementById'](_0x8fe15b(0x3e8))['value']=_0xf07950['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0xf07950[_0x8fe15b(0x31e)]||'';else _0x4fbeba==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0xf07950['achievementPlayer']||'',document[_0x8fe15b(0x3dd)](_0x8fe15b(0x21d))['value']=_0xf07950['achievementType']||'',document[_0x8fe15b(0x3dd)]('highlight-achievement-details')['value']=_0xf07950['achievementDetails']||'',document[_0x8fe15b(0x3dd)]('highlight-player-profile')['value']=_0xf07950['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0xf07950[_0x8fe15b(0x2c1)]||'');}}catch(_0x336d3c){console[_0x8fe15b(0x27b)](_0x8fe15b(0x361),_0x336d3c),showNotification('Error\x20loading\x20highlight:\x20'+_0x336d3c['message'],_0x8fe15b(0x27b));}}function a4_0x4358(){const _0x471ef6=['</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','rgba(211,\x2047,\x2047,\x200.7)','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','edit-match-loser','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','playerRibbonsD2','change','W\x20/\x20','includes','.edit-match-btn','length','seconds','highlight-submitted-by','Matches\x20Played','awardedAt','Untitled','src','Found\x20specific\x20role:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','points-management-forms','Found\x20ELO\x20history\x20for\x20player\x20','Setting\x20up\x20points\x20action\x20buttons...','fa-exclamation-circle','matchLink','load-ribbons-data','edit-elo','ladder','edit-highlight-winnerScore-input','#players.content-section.active','Creator','Error\x20removing\x20ribbon:','achievementDetails','edit-match-map','adminEmail','docs','openResimulateModal\x20called!','mapVersion','User\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','Error\x20searching\x20for\x20user','Error\x20promoting\x20player:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','history-type-filter','currentUser','No\x20player\x20selected','\x20Level\x20','Failed\x20to\x20save\x20match:\x20','#50C878','playerRibbonsD3','pendingResimulateData','\x20(from\x20','Error\x20removing\x20role:','input','sort','Sunday','Error\x20searching\x20user:','highlight-achievement-type','.player','set-role-modal','eloHistoryD3','D3\x20Players','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','Invalid\x20action','Create\x20test\x20match\x20button\x20setup\x20complete','trophyDefinitions','resimulate-modal','manage-highlights','Failed\x20to\x20save\x20trophy:\x20','Role\x20removed','lastUpdated','activity','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','migrate-points-btn','add','size','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','edit-highlight-achievementDetails-input','Error\x20loading\x20highlights:','achievementType','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','assign-trophy-rarity','highlight-match-info','update','highlight-video-id','edit-player-modal','highlight-match-date','Enter','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','unknown','#inactive-players-table-body\x20tr','reset','No\x20users\x20needed\x20points\x20field\x20initialization','highlights','edit-highlight-title-input','eloHistory','Bronze','Please\x20enter\x20a\x20username','selected-user-id','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','Create\x20test\x20match\x20button\x20clicked','quick-points-amount','cancel-role-btn','points-overview-search','message',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','selected-user-points','data-section','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','edit-match-winner-demo','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','exists','approvedMatchesD3','pointsHistory','Loaded\x20','closest','button[type=\x22submit\x22]','\x20(+','rank-distribution-chart','marginBottom','View\x20player\x20details\x20for\x20','forEach','empty','quick-edit-display-name','cancel-set-elo-btn','string','Match\x20ID\x20or\x20ladder\x20missing','preventDefault','admin_modification','),\x20','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','substring','player-count','Error\x20loading\x20dashboard:','createElement','d1-prev-page','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','edit-match-ladder','value','mapCreator','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','mapPlayed','disabled','admin','visibility','manage-matches','Player\x20\x22','loserSuicides','current-ribbons-list','Please\x20enter\x20valid\x20username\x20and\x20ELO','error','\x20in\x20','points','.edit-highlight-btn','console','Updated\x20ELO\x20ratings:\x20Winner\x20','User\x20data\x20loaded:','demotedBy','dataset','map','trophy-modal','\x20to\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','filter','inactive-players-search','manage-trophies','Unknown\x20Player','Player\x20updated\x20successfully','\x20Missing','d1-next-page','Setting\x20up\x20Manage\x20Matches\x20section','toLowerCase','approvedAt','Error\x20setting\x20user\x20role:','resimulation','assign-trophy-title','currentTarget','destroy','Modal\x20setup\x20complete','#e0e0e0','-next-page','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','Error\x20awarding\x20item:','getRankName','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','rgba(255,\x20255,\x20255,\x200.1)','Edit\x20match\x20clicked:','endDate','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','textContent','lastVisible','toDate','highlights-table-body','input[name=\x22test-match-ladder\x22]','quick-add','querySelector','trophy-form','onerror','bind','add-player-form','toLocaleDateString','highlight-video-container','fa-check-circle','\x20in\x20all\x20collections...','catch','find','desc','.remove-role-btn','Error\x20adding\x20ribbon:','losses','highlight-title','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','creator','has','Error\x20saving\x20highlight:\x20','Error\x20deleting\x20player:','article-modal','fromDate','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','achievementImageUrl','elo-history-table-body','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','newElo','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','Setting\x20up\x20create\x20test\x20match\x20button','input[name=\x22quick-action\x22]:checked','rankDistribution','.form-group','\x20Rank\x20Distribution','players-ladder-selector','winnerName','highlight-creator-image','displayName','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','Error\x20loading\x20inactive\x20players:','MAX_SAFE_INTEGER','style','negative-change','newPoints','#matches-table-body\x20tr','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','Thursday','pending-count','</td></tr>','matches-search','sendPromotionNotification','promote-player-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','\x20from\x20','position','highlight-winner-score','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','selected-user-name','Error\x20setting\x20up\x20admin\x20dashboard','trophy-id','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','Modal\x20background\x20clicked','keys','Create\x20Article','role-username','localeCompare','edit-highlight-loserScore-input','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','className','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','load-highlights-data','ribbon-type-select','Error\x20loading\x20history:','set-elo-modal','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','cells','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Match\x20updated\x20successfully','userProfiles','create-achievement-highlight-btn','positive-change','subtract','test','key','edit-highlight-loserName-input','highlight-achievement-image','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','article-title','Error\x20creating\x20activity\x20chart:','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','startDate','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','edit-username','active','table','Successfully\x20demoted\x20','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','type','test-match-winner-username','article-author','playerId','edit-match-modal','removeAttribute','name','manage-points','Failed\x20to\x20assign\x20trophy:\x20','load-dashboard-data','inactive-days-filter','replaceChild','manage-levels-ribbons','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Found\x20','getAttribute','matches-table-body','Load\x20highlights\x20data\x20clicked','creatorImageUrl','Found\x20user\x20in\x20','img','highlight-match-info-container','Error\x20adding\x20player:','matchInfo','\x22\x20set','ribbon-target-ladder','loserScore','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','addEventListener','pendingMatchesD3','Attempting\x20to\x20demote\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Searching\x20for\x20player\x20in\x20','load-matches-data','trophy-description','Saturday','roleAssignedBy','error-state','display','then','\x20already\x20exists\x20in\x20','previousPoints','activity-chart','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','opacity','user-roles-section','edit-highlight-winnerName-input','toLocaleString','remove','approvedMatchesD2','getDay','reset-matches-filters','Setting\x20permissions\x20based\x20on\x20role:\x20','loading-cell','article-content','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','YouTube\x20Video\x20ID\x20(Optional)','firstVisible','manage-ribbons','trim','matchDate','split','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','userId','highlight-form','edit-losses','matches-page-indicator','Create\x20test\x20match\x20form\x20not\x20found','No\x20email','href','querySelectorAll','-page-indicator','Committing\x20batch\x20update\x20for\x20','Unknown','highlight-loser-name','edit-match-id','input[name=\x22assign-ladder\x22]:checked','.view-player-btn','userAllowedTabs','Page\x201','rejected-count','click','Error\x20loading\x20highlight:','createdAt','common','non-participant','#users-table-body\x20tr[data-username=\x22','playerRibbons','ribbon-user-search','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20','edit-match-winner-score','checked','elo','dashboard','highlight-achievement-details-container','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','none','history-start-date','\x20users\x20already\x20had\x20points.','load-trophies-data','nonParticipants','submit','achievementPlayer','lastMatch','classList','Error','delete-match-summary','#create-test-match-form','manage-players','push','appendChild','page','demote-modal','moderately-inactive','role-filter','parentNode','success','create-test-match-modal','ref','assign-trophy-name','entries','info','Modal\x20close\x20button\x20clicked','Player\x20not\x20found','\x20Weekly\x20Activity','load-users-data','block','Quick\x20edit\x20form\x20submitted','cloneNode','.view-history-btn','Error\x20saving\x20highlight:','.delete-match-btn','highlight-type','points-history-table-body','roleAssignedAt','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','all','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','Error\x20resimulating\x20match:','Match\x20Highlight','promote-modal','Error:\x20','action','ribbons','Error\x20loading\x20matches:','data','#FFD700','highlight-winner-name','load-elo-history-data','ribbon-item','target','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Toggling\x20fields\x20for\x20highlight\x20type:\x20','manage-articles','N/A','creator-type','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','No\x20description','setAttribute','edit-match-loser-suicides','warn','edit-highlight-videoId-input','loserDemoLink','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','inactive-players','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','trophy-image-preview','modifiedBy','Highlight\x20added\x20successfully!','.close-btn','\x20not\x20found.','Error\x20loading\x20points\x20history:','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','Successfully\x20promoted\x20','#d32f2f','confirm-resimulate-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','match','Please\x20enter\x20a\x20valid\x20username','D2\x20Players','edit-match-loser-demo','Setting\x20up\x20highlight\x20buttons','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','description','join','Error\x20loading\x20article\x20data:','borderRadius','Never\x20played','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Queued\x20','.empty-state','role-name','daysSinceMatch','matchId','username','trophy-preview-img','visible','Unranked','eloRating','points-sort-order','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','title','stopPropagation','getElementById','players','log','content','Please\x20fill\x20all\x20fields','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>','Sidebar\x20navigation\x20initialized\x20with\x20permissions','Create\x20test\x20match\x20modal\x20setup\x20complete','edit-highlight-mapVersion-input','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','highlight-map-version','.no-results','\x20points','<span\x20class=\x22no-role\x22>None</span>','Article\x20created\x20successfully','Map\x20Creator\x20is\x20required','elo-history-search','winnerScore','.delete-trophy-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','test-match-date','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','achievement','Error\x20fetching\x20matches\x20for\x20','Silver','input[name=\x22promote-ladder\x22]:checked','\x22\x20awarded\x20to\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','Gold','TestMap','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','previousElo','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-match-winner','Points\x20updated\x20successfully\x20for\x20user:','loading','testFirebaseConnection','Failed\x20to\x20resimulate\x20match:\x20','Form\x20elements\x20are\x20missing','afterend','contains','fa-info-circle','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','promote-username','highlight-video-preview','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','Admin\x20Adjustment','playersD2','Error\x20loading\x20ribbons:','add-ribbon-form','Role\x20\x27','Creator\x20highlight\x20button\x20clicked','Error\x20loading\x20articles:','approvedMatches','winnerUsername','eloHistoryD2','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','loserUsername','Removed\x20','updatedAt','imageUrl','Dashboard\x20data\x20loaded\x20successfully','Error\x20removing\x20ribbon','.edit-trophy-btn','div','create-test-match-btn','timestamp','set','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x20matches\x20for\x20','roleName','highly-inactive','no-results-message','required','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','confirmResimulateMatch','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','Role\x20select\x20set\x20to:\x20','roleColor','return\x20(function()\x20','Switched\x20to\x20','innerHTML','email','manage-ranks','Error\x20loading\x20users:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','\x20ladder','Modal\x20should\x20now\x20be\x20visible','mapName','trophy-name','\x27</td>'];a4_0x4358=function(){return _0x471ef6;};return a4_0x4358();}async function saveHighlight(){const _0x4140c1=a4_0x599477;try{const _0x49a8f7=document['getElementById']('highlight-id')?.['value']||'',_0x26c539=document['getElementById'](_0x4140c1(0x393))?.[_0x4140c1(0x26f)]||'match',_0x33f96a={'title':document['getElementById'](_0x4140c1(0x2b8))?.[_0x4140c1(0x26f)]?.[_0x4140c1(0x34a)]()||'','description':document['getElementById']('highlight-description')?.[_0x4140c1(0x26f)]?.['trim']()||'','submittedBy':document['getElementById'](_0x4140c1(0x1f0))?.['value']?.['trim']()||'','videoId':document[_0x4140c1(0x3dd)]('highlight-video-id')?.['value']?.[_0x4140c1(0x34a)]()||null,'type':_0x26c539};if(!_0x33f96a['title']){showNotification('Title\x20is\x20required',_0x4140c1(0x27b));return;}if(_0x26c539==='match'){_0x33f96a[_0x4140c1(0x323)]=document['getElementById']('highlight-match-info')?.['value']?.['trim']()||'',_0x33f96a['map']=document['getElementById']('highlight-map')?.['value']?.[_0x4140c1(0x34a)]()||'';const _0x556020=document[_0x4140c1(0x3dd)](_0x4140c1(0x23a)),_0x13da18=_0x556020?.['value']||'';_0x33f96a['matchDate']=_0x13da18?Timestamp['fromDate'](new Date(_0x13da18)):null,_0x33f96a[_0x4140c1(0x2cd)]=document['getElementById'](_0x4140c1(0x3a3))?.['value']?.[_0x4140c1(0x34a)]()||'',_0x33f96a['winnerScore']=document['getElementById']('highlight-winner-score')?.[_0x4140c1(0x26f)]?.['trim']()||'',_0x33f96a['loserName']=document[_0x4140c1(0x3dd)]('highlight-loser-name')?.[_0x4140c1(0x26f)]?.['trim']()||'',_0x33f96a[_0x4140c1(0x326)]=document['getElementById']('highlight-loser-score')?.['value']?.['trim']()||'',_0x33f96a['matchLink']=document['getElementById']('highlight-match-link')?.[_0x4140c1(0x26f)]?.['trim']()||'';if(!_0x33f96a['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x26c539==='creator'){_0x33f96a['map']=document['getElementById']('highlight-map')?.[_0x4140c1(0x26f)]?.[_0x4140c1(0x34a)]()||'',_0x33f96a['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.['trim']()||'',_0x33f96a['mapVersion']=document['getElementById'](_0x4140c1(0x3e8))?.['value']?.['trim']()||'',_0x33f96a['creatorImageUrl']=document['getElementById'](_0x4140c1(0x2ce))?.[_0x4140c1(0x26f)]?.['trim']()||'';if(!_0x33f96a[_0x4140c1(0x270)]){showNotification(_0x4140c1(0x3ed),'error');return;}}else{if(_0x26c539===_0x4140c1(0x3f4)){_0x33f96a['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.[_0x4140c1(0x26f)]?.['trim']()||'',_0x33f96a['achievementType']=document['getElementById'](_0x4140c1(0x21d))?.['value']?.['trim']()||'',_0x33f96a['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.['trim']()||'',_0x33f96a['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.['trim']()||'',_0x33f96a[_0x4140c1(0x2c1)]=document['getElementById'](_0x4140c1(0x2ff))?.[_0x4140c1(0x26f)]?.['trim']()||'';if(!_0x33f96a['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x49a8f7?(_0x33f96a[_0x4140c1(0x419)]=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x49a8f7),_0x33f96a),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x33f96a['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x33f96a),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x571ebb){console['error'](_0x4140c1(0x391),_0x571ebb),showNotification('Error\x20saving\x20highlight:\x20'+_0x571ebb[_0x4140c1(0x24d)],'error');}}function closeHighlightModal(){const _0x491c16=a4_0x599477,_0x41e1d4=document[_0x491c16(0x3dd)]('highlight-modal');if(_0x41e1d4)_0x41e1d4['classList'][_0x491c16(0x33e)]('active');}function a4_0x4e5c(_0x46678a,_0x20d2b5){const _0x35389e=a4_0x4358();return a4_0x4e5c=function(_0x7ea9d4,_0x5b6372){_0x7ea9d4=_0x7ea9d4-0x1e3;let _0x43581e=_0x35389e[_0x7ea9d4];return _0x43581e;},a4_0x4e5c(_0x46678a,_0x20d2b5);}function getHighlightTypeName(_0x22ff5b){const _0x176ff6=a4_0x599477;switch(_0x22ff5b){case _0x176ff6(0x3c2):return _0x176ff6(0x39b);case _0x176ff6(0x2ba):return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x5b3529=a4_0x599477,_0x27585f=document[_0x5b3529(0x3dd)]('highlight-video-id'),_0x215c01=document[_0x5b3529(0x3dd)]('highlight-video-preview-container'),_0x2ad8b0=document['getElementById'](_0x5b3529(0x40a));if(!_0x27585f||!_0x2ad8b0||!_0x215c01)return;const _0x3929b4=_0x27585f['value'][_0x5b3529(0x34a)]();_0x3929b4&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x3929b4)?(_0x2ad8b0['src']='https://www.youtube.com/embed/'+_0x3929b4,_0x215c01['style']['display']='block'):(_0x2ad8b0['src']='',_0x215c01['style']['display']='none');}async function loadHighlightsAdmin(){const _0x4abf9c=a4_0x599477,_0x2432be=document['getElementById'](_0x4abf9c(0x2a6));if(!_0x2432be)return;_0x2432be['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x5475eb=query(collection(db,'highlights'),orderBy('createdAt','desc')),_0x4cfe82=await getDocs(_0x5475eb);if(_0x4cfe82[_0x4abf9c(0x25f)]){_0x2432be[_0x4abf9c(0x42f)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x2432be['innerHTML']='',_0x4cfe82['forEach'](_0xd22131=>{const _0x123dae=_0x4abf9c,_0x1ae33d=_0xd22131['data'](),_0x43ca93=document['createElement']('tr'),_0x26df16=_0x1ae33d['createdAt']?new Date(_0x1ae33d[_0x123dae(0x362)][_0x123dae(0x1ef)]*0x3e8)[_0x123dae(0x2ae)]():_0x123dae(0x3aa);let _0x5e2514=_0x123dae(0x358),_0x1bef65='';switch(_0x1ae33d['type']){case'match':_0x5e2514='Match',_0x1bef65='match-type';break;case'creator':_0x5e2514=_0x123dae(0x201),_0x1bef65=_0x123dae(0x3ab);break;case'achievement':_0x5e2514='Achievement',_0x1bef65='achievement-type';break;}_0x43ca93['innerHTML']=_0x123dae(0x319)+(_0x1ae33d['title']||_0x123dae(0x1f3))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x1bef65+'\x22>'+_0x5e2514+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x26df16+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1ae33d['submittedBy']||'Unknown')+_0x123dae(0x3fc)+(_0x1ae33d['videoId']?_0x123dae(0x234):'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0xd22131['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0xd22131['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2432be[_0x123dae(0x37d)](_0x43ca93);}),document['querySelectorAll'](_0x4abf9c(0x27e))[_0x4abf9c(0x25e)](_0x46fe43=>{_0x46fe43['addEventListener']('click',_0x15afdc=>{const _0x5d0bb8=a4_0x4e5c;openHighlightModal(_0x15afdc[_0x5d0bb8(0x296)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x17a0da=>{_0x17a0da['addEventListener']('click',_0x43f80e=>{confirmDeleteHighlight(_0x43f80e['currentTarget']['dataset']['id']);});});}catch(_0x4f1e6a){console['error'](_0x4abf9c(0x232),_0x4f1e6a),_0x2432be[_0x4abf9c(0x42f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x4f1e6a[_0x4abf9c(0x24d)]+_0x4abf9c(0x398);}}async function confirmDeleteHighlight(_0x551ecc){if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x551ecc)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x195206){console['error']('Error\x20deleting\x20highlight:',_0x195206),showNotification('Error\x20deleting\x20highlight:\x20'+_0x195206['message'],'error');}}function setupCreateTestMatchModal(){const _0xd62d24=a4_0x599477;console['log'](_0xd62d24(0x222));const _0x827fc2=document['getElementById'](_0xd62d24(0x384)),_0x377325=document['getElementById']('create-test-match-form');if(!_0x827fc2){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x377325){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x3e26f3=_0x827fc2['cloneNode'](!![]);_0x827fc2['parentNode'][_0xd62d24(0x317)](_0x3e26f3,_0x827fc2);const _0x22b386=_0x3e26f3[_0xd62d24(0x2a9)](_0xd62d24(0x37a));_0x3e26f3['addEventListener']('click',function(_0x56d735){const _0x419571=_0xd62d24;_0x56d735[_0x419571(0x3a6)]===_0x3e26f3&&(console['log'](_0x419571(0x2e7)),closeCreateTestMatchModal());});const _0xc2182c=_0x3e26f3[_0xd62d24(0x2a9)](_0xd62d24(0x3ba));_0xc2182c&&_0xc2182c[_0xd62d24(0x32a)](_0xd62d24(0x360),function(_0x246931){const _0x18259c=_0xd62d24;_0x246931['preventDefault'](),_0x246931['stopPropagation'](),console[_0x18259c(0x3df)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x31b5e7=_0x3e26f3[_0xd62d24(0x2a9)]('#cancel-create-test-match-btn');_0x31b5e7&&_0x31b5e7['addEventListener'](_0xd62d24(0x360),function(_0x4d112d){_0x4d112d['preventDefault'](),_0x4d112d['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x22b386){_0x22b386['addEventListener']('submit',function(_0x4f8292){const _0x52106c=_0xd62d24;_0x4f8292['preventDefault'](),_0x4f8292['stopPropagation'](),console[_0x52106c(0x3df)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x3664c5=_0x22b386['querySelector'](_0xd62d24(0x259));_0x3664c5&&_0x3664c5[_0xd62d24(0x32a)](_0xd62d24(0x360),function(_0x58690a){const _0x266c05=_0xd62d24;_0x58690a['preventDefault'](),_0x58690a['stopPropagation'](),console[_0x266c05(0x3df)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log'](_0xd62d24(0x3e4));}function setupManageHighlightsSection(){const _0x449bf3=a4_0x599477;console[_0x449bf3(0x3df)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x23b70f=document['getElementById']('highlight-form');_0x23b70f&&_0x23b70f[_0x449bf3(0x32a)]('submit',_0x416115=>{_0x416115['preventDefault'](),saveHighlight();});const _0x37b180=document['getElementById']('cancel-highlight-btn');_0x37b180&&_0x37b180['addEventListener']('click',closeHighlightModal);const _0x40943d=document[_0x449bf3(0x2a9)]('#highlight-modal\x20.close-btn');_0x40943d&&_0x40943d[_0x449bf3(0x32a)]('click',closeHighlightModal);const _0x5deedb=document['getElementById']('highlight-modal');_0x5deedb&&_0x5deedb['addEventListener']('click',_0x32448e=>{_0x32448e['target']===_0x5deedb&&closeHighlightModal();});const _0x14a580=document['getElementById']('highlight-video-id');_0x14a580&&_0x14a580['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x214305=a4_0x599477;console['log'](_0x214305(0x290));const _0x1443a5=document['getElementById']('matches-prev-page'),_0x584701=document['getElementById']('matches-next-page');_0x1443a5&&_0x1443a5[_0x214305(0x32a)]('click',()=>{const _0x394692=_0x214305,_0x5590d4=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x5590d4][_0x394692(0x37e)]-0x1);});_0x584701&&_0x584701[_0x214305(0x32a)]('click',()=>{const _0x5b7428=_0x214305,_0x3fd706=currentLadder[_0x5b7428(0x291)]();loadMatchesData(matchesPagination[_0x3fd706]['page']+0x1);});const _0xf56ed=document[_0x214305(0x3dd)]('apply-matches-filters'),_0xd017ba=document['getElementById'](_0x214305(0x341));_0xf56ed&&_0xf56ed['addEventListener']('click',applyMatchesFilters);_0xd017ba&&_0xd017ba['addEventListener']('click',resetMatchesFilters);const _0x20a6c5=document[_0x214305(0x3dd)]('matches-search');_0x20a6c5&&_0x20a6c5[_0x214305(0x32a)]('input',debounce(filterMatchesTable,0x12c));const _0x5164bc=document['getElementById']('resimulate-match-btn');_0x5164bc&&_0x5164bc['addEventListener'](_0x214305(0x360),openResimulateModal);const _0x549209=document['getElementById'](_0x214305(0x226));if(_0x549209){const _0x1874d5=_0x549209[_0x214305(0x2a9)]('.close');_0x1874d5&&_0x1874d5['addEventListener'](_0x214305(0x360),closeResimulateModal),_0x549209['addEventListener']('click',_0x5f084d=>{_0x5f084d['target']===_0x549209&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console[_0x214305(0x3df)]('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0xc2720e=a4_0x599477;console[_0xc2720e(0x3df)]('Opening\x20create\x20test\x20match\x20modal');const _0x4ade80=document[_0xc2720e(0x3dd)]('create-test-match-modal'),_0x3db3d1=document['getElementById']('create-test-match-form');if(!_0x4ade80){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x3db3d1){console['error'](_0xc2720e(0x352)),showNotification('Create\x20test\x20match\x20form\x20not\x20found',_0xc2720e(0x27b));return;}_0x3db3d1[_0xc2720e(0x240)]();const _0x19c14a=document['querySelectorAll'](_0xc2720e(0x2a7));let _0xf80731=![];_0x19c14a[_0xc2720e(0x25e)](_0x164cf4=>{const _0x6af8b=_0xc2720e;console[_0x6af8b(0x3df)]('Found\x20radio\x20with\x20value:',_0x164cf4[_0x6af8b(0x26f)]),_0x164cf4['value']===currentLadder&&(_0x164cf4['checked']=!![],_0xf80731=!![],console[_0x6af8b(0x3df)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0xf80731){console[_0xc2720e(0x3b0)]('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0xa66050=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0xa66050&&(_0xa66050['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x4fd79d=document['getElementById'](_0xc2720e(0x3f2));if(_0x4fd79d){const _0x51be49=new Date()['toISOString']()[_0xc2720e(0x34c)]('T')[0x0];_0x4fd79d[_0xc2720e(0x26f)]=_0x51be49;}_0x4ade80['style']['display']='flex',_0x4ade80['style'][_0xc2720e(0x275)]=_0xc2720e(0x3d5),_0x4ade80[_0xc2720e(0x2d3)]['opacity']='1',_0x4ade80['classList'][_0xc2720e(0x22e)]('active'),console[_0xc2720e(0x3df)]('Modal\x20should\x20now\x20be\x20visible');const _0x11fa6c=document['getElementById'](_0xc2720e(0x30d));_0x11fa6c&&setTimeout(()=>{_0x11fa6c['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x3eea0e=a4_0x599477;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x3613bb=document['getElementById']('create-test-match-modal');if(!_0x3613bb){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x3613bb['classList']['remove']('active'),_0x3613bb[_0x3eea0e(0x2d3)][_0x3eea0e(0x33a)]='0',_0x3613bb[_0x3eea0e(0x2d3)]['visibility']='hidden',setTimeout(()=>{const _0x343a34=_0x3eea0e;!_0x3613bb['classList']['contains']('active')&&(_0x3613bb['style'][_0x343a34(0x334)]='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x482c72=a4_0x599477;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x290558=auth['currentUser'];if(!_0x290558){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x452e14='D1',_0x1c2445=_0x482c72(0x413),_0x553736={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x482c72(0x3fb),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x290558['email'],'createdAt':serverTimestamp(),'createdBy':_0x290558['email'],'isTestMatch':!![],'ladder':_0x452e14,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x290558[_0x482c72(0x430)]};console[_0x482c72(0x3df)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x1c2445),_0x553736),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x14d9b5){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x14d9b5),showNotification(_0x482c72(0x408)+_0x14d9b5['message'],_0x482c72(0x27b));}}window[a4_0x599477(0x402)]=async function(){const _0x25850e=a4_0x599477;try{console['log']('Testing\x20Firebase\x20connection...'),console[_0x25850e(0x3df)]('Auth:',auth),console[_0x25850e(0x3df)]('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x7f22ed=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x7f22ed);const _0x29511e=query(_0x7f22ed,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x29511e);const _0x3a62c4=await getDocs(_0x29511e);console['log']('Query\x20executed.\x20Empty:',_0x3a62c4['empty']),console[_0x25850e(0x3df)]('Firebase\x20connection\x20test\x20successful!');}catch(_0xacbf2){console[_0x25850e(0x27b)]('Firebase\x20connection\x20test\x20failed:',_0xacbf2);}};function setupCreateTestMatchButton(){const _0x4d2847=a4_0x599477,_0x1661c7=document['getElementById'](_0x4d2847(0x41f));if(!_0x1661c7){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log'](_0x4d2847(0x2c7));const _0x5ad351=_0x1661c7['cloneNode'](!![]);_0x1661c7['parentNode']['replaceChild'](_0x5ad351,_0x1661c7),_0x5ad351['addEventListener'](_0x4d2847(0x360),function(_0x359c60){const _0x30e0bc=_0x4d2847;_0x359c60['preventDefault'](),_0x359c60[_0x30e0bc(0x3dc)](),console[_0x30e0bc(0x3df)](_0x30e0bc(0x249)),openCreateTestMatchModal();}),console[_0x4d2847(0x3df)](_0x4d2847(0x224));}async function loadMatchesData(_0x402800=0x1){const _0x1eec9c=a4_0x599477,_0x30b712=document['getElementById'](_0x1eec9c(0x31c));if(!_0x30b712)return;_0x30b712['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0xf10235=currentLadder['toLowerCase'](),_0x2fe4f7=matchesPagination[_0xf10235],_0x2706c3=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4d34a1=collection(db,_0x2706c3);_0x402800<=0x1?(_0x2fe4f7['page']=0x1,_0x2fe4f7['firstVisible']=null,_0x2fe4f7['lastVisible']=null):_0x2fe4f7['page']=_0x402800;const _0x900ea6=getMatchesFilters();let _0x209364=_0x4d34a1;if(_0x900ea6['startDate']||_0x900ea6[_0x1eec9c(0x2a1)]||_0x900ea6['searchTerm']){let _0x5d055c=[];_0x900ea6['startDate']&&_0x900ea6['endDate']?(_0x5d055c['push'](where('approvedAt','>=',_0x900ea6[_0x1eec9c(0x305)]),where('approvedAt','<=',_0x900ea6[_0x1eec9c(0x2a1)])),_0x209364=query(_0x4d34a1,..._0x5d055c)):_0x209364=query(_0x4d34a1,orderBy('approvedAt','desc'));}else _0x209364=query(_0x4d34a1,orderBy('approvedAt',_0x1eec9c(0x2b4)));_0x402800>0x1&&_0x2fe4f7['lastVisible']?_0x209364=query(_0x209364,startAfter(_0x2fe4f7['lastVisible']),limit(PAGE_SIZE)):_0x209364=query(_0x209364,limit(PAGE_SIZE));const _0x4a424f=await getDocs(_0x209364);!_0x4a424f['empty']&&(_0x2fe4f7[_0x1eec9c(0x348)]=_0x4a424f['docs'][0x0],_0x2fe4f7[_0x1eec9c(0x2a4)]=_0x4a424f['docs'][_0x4a424f['docs']['length']-0x1]);let _0x5e028b=![];if(!_0x4a424f['empty']){const _0x90f2bf=query(_0x209364,startAfter(_0x2fe4f7['lastVisible']),limit(0x1)),_0x396b4c=await getDocs(_0x90f2bf);_0x5e028b=!_0x396b4c['empty'];}const _0x55faa1=document['getElementById']('matches-prev-page'),_0x29c023=document['getElementById']('matches-next-page'),_0x4b0639=document[_0x1eec9c(0x3dd)](_0x1eec9c(0x351));if(_0x55faa1)_0x55faa1[_0x1eec9c(0x273)]=_0x2fe4f7['page']<=0x1;if(_0x29c023)_0x29c023[_0x1eec9c(0x273)]=!_0x5e028b;if(_0x4b0639)_0x4b0639[_0x1eec9c(0x2a3)]='Page\x20'+_0x2fe4f7['page'];if(_0x4a424f['empty']){_0x30b712['innerHTML']=_0x1eec9c(0x2c0);return;}_0x30b712[_0x1eec9c(0x42f)]='',_0x4a424f[_0x1eec9c(0x25e)](_0x2b2f76=>{const _0x49af56=_0x1eec9c,_0x34cf04=_0x2b2f76['data'](),_0x36ff43=document['createElement']('tr'),_0x3096ac=_0x34cf04['approvedAt']?new Date(_0x34cf04[_0x49af56(0x292)]['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x36ff43[_0x49af56(0x3ae)]('data-id',_0x2b2f76['id']),_0x36ff43['setAttribute']('data-ladder',currentLadder),_0x36ff43[_0x49af56(0x377)]['add']('match-row'),_0x36ff43[_0x49af56(0x42f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3096ac+_0x49af56(0x328)+(_0x34cf04[_0x49af56(0x414)]||_0x49af56(0x358))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x34cf04[_0x49af56(0x417)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x34cf04[_0x49af56(0x3ef)]||0x0)+'\x20-\x20'+(_0x34cf04['loserScore']||0x0)+_0x49af56(0x433)+(_0x34cf04['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x49af56(0x230)+_0x2b2f76['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x2b2f76['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x30b712[_0x49af56(0x37d)](_0x36ff43);}),setupMatchesActionButtons(),_0x900ea6['searchTerm']&&filterMatchesTable(),console['log'](_0x1eec9c(0x257)+_0x4a424f['size']+_0x1eec9c(0x423)+currentLadder+'\x20ladder,\x20page\x20'+_0x2fe4f7[_0x1eec9c(0x37e)]);}catch(_0x1dc81a){console['error'](_0x1eec9c(0x3a0),_0x1dc81a),_0x30b712[_0x1eec9c(0x42f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x1dc81a['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x528e1a,_0x1595b2){const _0x2a2978=a4_0x599477;try{console['log']('Deleting\x20match\x20'+_0x528e1a+_0x2a2978(0x2df)+_0x1595b2+'\x20ladder');const _0x2d1340=auth['currentUser'];if(!_0x2d1340){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x51dca1=_0x1595b2==='D1'?_0x2a2978(0x413):_0x1595b2==='D2'?'approvedMatchesD2':'approvedMatchesD3';console[_0x2a2978(0x3df)]('Using\x20collection:\x20'+_0x51dca1),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x51dca1,_0x528e1a)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x42f71d=_0x1595b2['toLowerCase']();loadMatchesData(matchesPagination[_0x42f71d][_0x2a2978(0x37e)]);}catch(_0x4e238f){console[_0x2a2978(0x27b)]('Error\x20deleting\x20match:',_0x4e238f),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x4e238f['message'],'error');}}function setupMatchesActionButtons(){const _0x4da873=a4_0x599477;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x4da873(0x1ed))[_0x4da873(0x25e)](_0x5d97a1=>{_0x5d97a1['addEventListener']('click',_0x1fa380=>{const _0x540198=a4_0x4e5c;_0x1fa380[_0x540198(0x264)](),_0x1fa380['stopPropagation']();const _0x4a06ce=_0x1fa380[_0x540198(0x296)]['dataset']['id'],_0x4dbc66=_0x1fa380['currentTarget']['closest']('tr'),_0x5366c4=_0x4dbc66['dataset']['ladder'];console[_0x540198(0x3df)](_0x540198(0x2a0),_0x4a06ce,_0x5366c4),openEditMatchModal(_0x4a06ce,_0x5366c4);});}),document['querySelectorAll'](_0x4da873(0x392))['forEach'](_0x222d65=>{_0x222d65['addEventListener']('click',_0x5a84e7=>{const _0x4c16fb=a4_0x4e5c;_0x5a84e7['preventDefault'](),_0x5a84e7[_0x4c16fb(0x3dc)]();const _0x406139=_0x5a84e7['currentTarget']['dataset']['id'],_0x173d86=_0x5a84e7['currentTarget']['closest']('tr'),_0x17069a=_0x173d86['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x406139,_0x17069a),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x406139,_0x17069a);});}),console[_0x4da873(0x3df)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x80fd41=a4_0x599477,_0x2ae8f6=document[_0x80fd41(0x3dd)](_0x80fd41(0x2db))['value']['toLowerCase'](),_0x2dcbd5=document['querySelectorAll'](_0x80fd41(0x2d6));let _0x3b687a=0x0;_0x2dcbd5['forEach'](_0x242d79=>{const _0x3e21d2=_0x80fd41;if(_0x242d79['classList']['contains']('loading-cell')||_0x242d79[_0x3e21d2(0x377)]['contains']('empty-state')||_0x242d79['classList'][_0x3e21d2(0x406)](_0x3e21d2(0x333)))return;const _0x4eed40=_0x242d79[_0x3e21d2(0x2f5)][0x1][_0x3e21d2(0x2a3)]['toLowerCase'](),_0x180e88=_0x242d79['cells'][0x2]['textContent']['toLowerCase'](),_0x369a21=_0x242d79['cells'][0x4][_0x3e21d2(0x2a3)][_0x3e21d2(0x291)]();_0x4eed40['includes'](_0x2ae8f6)||_0x180e88[_0x3e21d2(0x1ec)](_0x2ae8f6)||_0x369a21['includes'](_0x2ae8f6)?(_0x242d79['style']['display']='',_0x3b687a++):_0x242d79[_0x3e21d2(0x2d3)][_0x3e21d2(0x334)]='none';});if(_0x3b687a===0x0&&_0x2dcbd5['length']>0x0){const _0x23e22d=document[_0x80fd41(0x3dd)](_0x80fd41(0x31c)),_0x3793b6=_0x23e22d['querySelector'](_0x80fd41(0x3e9));if(!_0x3793b6){const _0xa7b899=document['createElement']('tr');_0xa7b899[_0x80fd41(0x2ee)]='no-results',_0xa7b899['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x2ae8f6+_0x80fd41(0x438),_0x23e22d['appendChild'](_0xa7b899);}}else{const _0xf575f7=document[_0x80fd41(0x2a9)]('.no-results');_0xf575f7&&_0xf575f7[_0x80fd41(0x33e)]();}}function getMatchesFilters(){const _0x3bead4=a4_0x599477,_0x228090=document['getElementById']('matches-search')['value'][_0x3bead4(0x291)](),_0x174aeb=document[_0x3bead4(0x3dd)]('matches-start-date')['value'],_0x117e13=document['getElementById']('matches-end-date')[_0x3bead4(0x26f)];let _0x449993=null,_0x2b7bb5=null;return _0x174aeb&&(_0x449993=new Date(_0x174aeb),_0x449993['setHours'](0x0,0x0,0x0,0x0),_0x449993=Timestamp[_0x3bead4(0x2bf)](_0x449993)),_0x117e13&&(_0x2b7bb5=new Date(_0x117e13),_0x2b7bb5['setHours'](0x17,0x3b,0x3b,0x3e7),_0x2b7bb5=Timestamp['fromDate'](_0x2b7bb5)),{'searchTerm':_0x228090,'startDate':_0x449993,'endDate':_0x2b7bb5};}async function applyMatchesFilters(){const _0x490b81=currentLadder['toLowerCase']();matchesPagination[_0x490b81]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x4c619b=a4_0x599477;document['getElementById']('matches-start-date')['value']='',document[_0x4c619b(0x3dd)]('matches-end-date')[_0x4c619b(0x26f)]='',document['getElementById'](_0x4c619b(0x2db))[_0x4c619b(0x26f)]='';const _0xa2050=currentLadder['toLowerCase']();matchesPagination[_0xa2050]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x4c012a,_0x5678f3){const _0x55cdd4=a4_0x599477,_0x12fb13=document['getElementById'](_0x55cdd4(0x310));if(!_0x12fb13)return;try{const _0x4d6d49=_0x5678f3==='D1'?'approvedMatches':_0x5678f3==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x55d489=doc(db,_0x4d6d49,_0x4c012a),_0x47d4a4=await getDoc(_0x55d489);if(!_0x47d4a4['exists']()){showNotification('Match\x20not\x20found',_0x55cdd4(0x27b));return;}const _0x36eb24=_0x47d4a4[_0x55cdd4(0x3a1)]();document['getElementById']('edit-match-id')['value']=_0x4c012a,document[_0x55cdd4(0x3dd)]('edit-match-ladder')['value']=_0x5678f3,document['getElementById']('edit-match-winner')['value']=_0x36eb24[_0x55cdd4(0x414)]||'',document['getElementById'](_0x55cdd4(0x369))[_0x55cdd4(0x26f)]=_0x36eb24['winnerScore']||0x0,document[_0x55cdd4(0x3dd)]('edit-match-winner-suicides')['value']=_0x36eb24['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x36eb24['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x36eb24['loserUsername']||'',document['getElementById']('edit-match-loser-score')[_0x55cdd4(0x26f)]=_0x36eb24[_0x55cdd4(0x326)]||0x0,document['getElementById'](_0x55cdd4(0x3af))['value']=_0x36eb24[_0x55cdd4(0x278)]||0x0,document['getElementById']('edit-match-loser-comment')['value']=_0x36eb24['loserComment']||'',document[_0x55cdd4(0x3dd)]('edit-match-map')['value']=_0x36eb24[_0x55cdd4(0x272)]||'',document[_0x55cdd4(0x3dd)]('edit-match-winner-demo')[_0x55cdd4(0x26f)]=_0x36eb24['winnerDemoLink']||'',document['getElementById'](_0x55cdd4(0x3c5))['value']=_0x36eb24[_0x55cdd4(0x3b2)]||_0x36eb24['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x36eb24['winnerUsername']+'\x20vs\x20'+_0x36eb24[_0x55cdd4(0x417)],_0x12fb13['classList']['add']('active');}catch(_0x2bd047){console[_0x55cdd4(0x27b)]('Error\x20loading\x20match\x20data:',_0x2bd047),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x1f16ec=document['getElementById']('edit-match-modal');_0x1f16ec&&_0x1f16ec['classList']['remove']('active');}async function saveEditedMatch(){const _0x43035d=a4_0x599477;try{const _0x25b20c=document['getElementById'](_0x43035d(0x35a))['value'],_0x103281=document[_0x43035d(0x3dd)](_0x43035d(0x26e))['value'];if(!_0x25b20c||!_0x103281){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x1e0efa=_0x103281==='D1'?'approvedMatches':_0x103281==='D2'?_0x43035d(0x33f):'approvedMatchesD3',_0x4d0ad5=document['getElementById'](_0x43035d(0x3ff))[_0x43035d(0x26f)]['trim'](),_0xd515ea=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x5802df=parseInt(document[_0x43035d(0x3dd)]('edit-match-winner-suicides')['value']),_0x1b9d08=document['getElementById']('edit-match-winner-comment')[_0x43035d(0x26f)][_0x43035d(0x34a)](),_0x21f109=document['getElementById'](_0x43035d(0x1e7))['value'][_0x43035d(0x34a)](),_0x33007a=parseInt(document['getElementById']('edit-match-loser-score')[_0x43035d(0x26f)]),_0x34e6bc=parseInt(document['getElementById']('edit-match-loser-suicides')[_0x43035d(0x26f)]),_0x4adddf=document['getElementById']('edit-match-loser-comment')['value'][_0x43035d(0x34a)](),_0x5e97d1=document['getElementById'](_0x43035d(0x204))[_0x43035d(0x26f)]['trim'](),_0xa1a92a=document['getElementById'](_0x43035d(0x252))['value']['trim'](),_0x500841=document['getElementById']('edit-match-loser-demo')[_0x43035d(0x26f)]['trim']();if(!_0x4d0ad5||!_0x21f109){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0x43035d(0x27b));return;}await updateDoc(doc(db,_0x1e0efa,_0x25b20c),{'winnerUsername':_0x4d0ad5,'winnerScore':_0xd515ea,'winnerSuicides':_0x5802df,'winnerComment':_0x1b9d08,'loserUsername':_0x21f109,'loserScore':_0x33007a,'loserSuicides':_0x34e6bc,'loserComment':_0x4adddf,'mapPlayed':_0x5e97d1,'winnerDemoLink':_0xa1a92a||null,'loserDemoLink':_0x500841||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x43035d(0x210)]['email'],'isEdited':!![]}),showNotification(_0x43035d(0x2f7),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x103281['toLowerCase']()][_0x43035d(0x37e)]);}catch(_0x2f8bb9){console['error']('Error\x20saving\x20match:',_0x2f8bb9),showNotification(_0x43035d(0x213)+_0x2f8bb9['message'],'error');}}async function openDeleteMatchModal(_0x5cc41a,_0x343977){const _0x1ee324=a4_0x599477;try{const _0x24fb49=_0x343977==='D1'?'approvedMatches':_0x343977==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x53e71f=doc(db,_0x24fb49,_0x5cc41a),_0x4fb570=await getDoc(_0x53e71f);if(!_0x4fb570['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x21bea7=_0x4fb570['data'](),_0x41b7e4=document['getElementById']('delete-match-confirm-modal');_0x41b7e4[_0x1ee324(0x283)]['matchId']=_0x5cc41a,_0x41b7e4['dataset'][_0x1ee324(0x1fe)]=_0x343977;const _0xe02ea3=_0x21bea7['approvedAt']?new Date(_0x21bea7[_0x1ee324(0x292)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x3a1880=document['getElementById'](_0x1ee324(0x379));_0x3a1880['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0xe02ea3+_0x1ee324(0x2f4)+_0x21bea7['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x21bea7['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x21bea7['winnerScore']||0x0)+'\x20-\x20'+(_0x21bea7[_0x1ee324(0x326)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x21bea7['mapPlayed']||_0x1ee324(0x3aa))+_0x1ee324(0x3da)+_0x343977+_0x1ee324(0x2b9),_0x41b7e4['classList']['add']('active');}catch(_0xe910ec){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0xe910ec),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x5ad623=a4_0x599477,_0x452aa6=document[_0x5ad623(0x3dd)]('delete-match-confirm-modal');_0x452aa6&&(_0x452aa6[_0x5ad623(0x377)]['remove']('active'),_0x452aa6[_0x5ad623(0x311)]('data-match-id'),_0x452aa6['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x171a15=a4_0x599477,_0x18dde9=document[_0x171a15(0x3dd)]('delete-match-confirm-modal'),_0x119b6f=_0x18dde9[_0x171a15(0x283)][_0x171a15(0x3d2)],_0x12cc0d=_0x18dde9['dataset']['ladder'];if(!_0x119b6f||!_0x12cc0d){showNotification(_0x171a15(0x263),'error'),closeDeleteMatchModal();return;}try{const _0x3edf24=_0x12cc0d==='D1'?_0x171a15(0x413):_0x12cc0d==='D2'?'approvedMatchesD2':_0x171a15(0x255);await deleteDoc(doc(db,_0x3edf24,_0x119b6f)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x12cc0d[_0x171a15(0x291)]()]['page']);}catch(_0x4ecbe0){console['error']('Error\x20deleting\x20match:',_0x4ecbe0),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x4ecbe0['message'],'error');}}async function saveHighlightChanges(){const _0x420adb=a4_0x599477,_0x522fe5=document['getElementById']('edit-highlight-id')['value'],_0x1c3f32=document['getElementById']('edit-highlight-type-select')[_0x420adb(0x26f)];let _0x121f85={'title':document['getElementById'](_0x420adb(0x243))[_0x420adb(0x26f)]['trim'](),'type':_0x1c3f32,'description':document['getElementById']('edit-highlight-description-input')[_0x420adb(0x26f)][_0x420adb(0x34a)](),'videoId':document['getElementById'](_0x420adb(0x3b1))['value'][_0x420adb(0x34a)](),'submittedBy':auth[_0x420adb(0x210)]['email']};if(_0x1c3f32===_0x420adb(0x3c2)){_0x121f85[_0x420adb(0x323)]=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x121f85['map']=document[_0x420adb(0x3dd)]('edit-highlight-map-input')[_0x420adb(0x26f)]['trim']();const _0x3cf06a=document['getElementById']('edit-highlight-matchDate-input')[_0x420adb(0x26f)];_0x121f85['matchDate']=_0x3cf06a?Timestamp['fromDate'](new Date(_0x3cf06a)):null,_0x121f85['winnerName']=document['getElementById'](_0x420adb(0x33c))['value'][_0x420adb(0x34a)](),_0x121f85['winnerScore']=document['getElementById'](_0x420adb(0x1ff))['value']['trim'](),_0x121f85['loserName']=document['getElementById'](_0x420adb(0x2fe))[_0x420adb(0x26f)]['trim'](),_0x121f85[_0x420adb(0x326)]=document[_0x420adb(0x3dd)](_0x420adb(0x2ec))['value']['trim'](),_0x121f85[_0x420adb(0x1fb)]=document['getElementById']('edit-highlight-matchLink-input')[_0x420adb(0x26f)]['trim'](),_0x121f85[_0x420adb(0x270)]=null,_0x121f85['mapVersion']=null,_0x121f85[_0x420adb(0x31e)]=null,_0x121f85[_0x420adb(0x375)]=null,_0x121f85[_0x420adb(0x233)]=null,_0x121f85['achievementDetails']=null,_0x121f85['playerProfileUrl']=null;}else{if(_0x1c3f32==='creator')_0x121f85[_0x420adb(0x284)]=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x121f85['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x121f85[_0x420adb(0x208)]=document['getElementById'](_0x420adb(0x3e5))['value']['trim'](),_0x121f85['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')[_0x420adb(0x26f)]['trim'](),_0x121f85['matchInfo']=null,_0x121f85[_0x420adb(0x34b)]=null,_0x121f85[_0x420adb(0x2cd)]=null,_0x121f85[_0x420adb(0x3ef)]=null,_0x121f85['loserName']=null,_0x121f85['loserScore']=null,_0x121f85[_0x420adb(0x1fb)]=null,_0x121f85['achievementPlayer']=null,_0x121f85['achievementType']=null,_0x121f85[_0x420adb(0x203)]=null,_0x121f85['playerProfileUrl']=null;else _0x1c3f32==='achievement'&&(_0x121f85['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')[_0x420adb(0x26f)]['trim'](),_0x121f85['achievementType']=document[_0x420adb(0x3dd)]('edit-highlight-achievementType-input')['value'][_0x420adb(0x34a)](),_0x121f85['achievementDetails']=document['getElementById'](_0x420adb(0x231))['value']['trim'](),_0x121f85['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')[_0x420adb(0x26f)]['trim'](),_0x121f85['matchInfo']=null,_0x121f85[_0x420adb(0x284)]=null,_0x121f85['matchDate']=null,_0x121f85['winnerName']=null,_0x121f85[_0x420adb(0x3ef)]=null,_0x121f85['loserName']=null,_0x121f85['loserScore']=null,_0x121f85['matchLink']=null,_0x121f85[_0x420adb(0x270)]=null,_0x121f85['mapVersion']=null,_0x121f85[_0x420adb(0x31e)]=null);}try{if(_0x522fe5){_0x121f85['updatedAt']=serverTimestamp();const _0x2b1243=doc(db,_0x420adb(0x242),_0x522fe5);await updateDoc(_0x2b1243,_0x121f85),showNotification('Highlight\x20updated\x20successfully!',_0x420adb(0x383));}else _0x121f85[_0x420adb(0x362)]=serverTimestamp(),await addDoc(collection(db,_0x420adb(0x242)),_0x121f85),showNotification(_0x420adb(0x3b9),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x640b10){console[_0x420adb(0x27b)]('Error\x20saving\x20highlight:',_0x640b10),showNotification(_0x420adb(0x2bc)+_0x640b10['message'],'error');}}async function resimulateMatch(){const _0x4e6ca7=a4_0x599477;try{const _0x5d6bbd=document['getElementById']('resimulate-match-id')[_0x4e6ca7(0x26f)];if(!_0x5d6bbd){showNotification('Match\x20ID\x20is\x20required',_0x4e6ca7(0x27b));return;}const _0x39a048=auth['currentUser'];if(!_0x39a048){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x190ef9=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1ce84b=doc(db,_0x190ef9,_0x5d6bbd),_0x9cd953=await getDoc(_0x1ce84b);if(!_0x9cd953['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x4de107=_0x9cd953['data'](),_0x479ad7=_0x4de107['approvedAt']?_0x4de107[_0x4e6ca7(0x292)]['toDate']()['toLocaleString']():_0x4de107['matchDate']?_0x4de107['matchDate']['toDate']?_0x4de107['matchDate'][_0x4e6ca7(0x2a5)]()['toLocaleString']():new Date(_0x4de107[_0x4e6ca7(0x34b)])['toLocaleString']():'Unknown',_0x28d2dd='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x4de107[_0x4e6ca7(0x414)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x4de107['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x4de107[_0x4e6ca7(0x3ef)]+'-'+_0x4de107['loserScore']+_0x4e6ca7(0x2e6)+(_0x4de107['mapPlayed']||_0x4de107['mapName']||'Unknown')+_0x4e6ca7(0x20e)+_0x479ad7+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x5d6bbd+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x4e6ca7(0x3dd)]('match-details-container')[_0x4e6ca7(0x42f)]=_0x28d2dd,document['getElementById']('match-details-container')['style']['display']='block',document['getElementById'](_0x4e6ca7(0x3c0))[_0x4e6ca7(0x2d3)]['display']=_0x4e6ca7(0x38d),window['pendingResimulateData']={'matchId':_0x5d6bbd,'matchData':_0x4de107,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x951ba4){console[_0x4e6ca7(0x27b)]('Error\x20finding\x20match:',_0x951ba4),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x951ba4['message'],_0x4e6ca7(0x27b));}}async function confirmResimulateMatch(){const _0x239fda=a4_0x599477;try{const {matchId:_0x150da5,matchData:_0x523a96,ladder:_0x5f290a}=window[_0x239fda(0x216)];if(!_0x150da5||!_0x523a96){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0x239fda(0x27b));return;}const _0x54d08d=_0x5f290a==='D1'?_0x239fda(0x3de):_0x5f290a==='D2'?_0x239fda(0x40d):'playersD3',_0x305042=_0x5f290a==='D1'?'eloHistory':_0x5f290a==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x3c55fa,_0x3525c8]=await Promise['all']([getDocs(query(collection(db,_0x54d08d),where('username','==',_0x523a96[_0x239fda(0x414)]))),getDocs(query(collection(db,_0x54d08d),where('username','==',_0x523a96[_0x239fda(0x417)])))]);if(_0x3c55fa['empty']||_0x3525c8['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x565a07=_0x3c55fa['docs'][0x0]['id'],_0x5cd560=_0x3525c8['docs'][0x0]['id'],_0x2c2c55=_0x3c55fa['docs'][0x0][_0x239fda(0x3a1)](),_0x37d22a=_0x3525c8['docs'][0x0]['data'](),[_0x52a5df,_0x30483c]=await Promise[_0x239fda(0x397)]([getDocs(query(collection(db,_0x305042),where('playerId','==',_0x565a07),where(_0x239fda(0x3d2),'==',_0x150da5))),getDocs(query(collection(db,_0x305042),where(_0x239fda(0x30f),'==',_0x5cd560),where('matchId','==',_0x150da5)))]),_0x4ffd9f=!_0x52a5df[_0x239fda(0x25f)],_0x2370c5=!_0x30483c['empty'],_0x2daf9e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x4ffd9f?'\x20Exists':'\x20Missing')+_0x239fda(0x20b)+(_0x2370c5?'\x20Exists':_0x239fda(0x28e))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x2c2c55[_0x239fda(0x3d7)]||'Unknown')+_0x239fda(0x2c6)+(_0x37d22a[_0x239fda(0x3d7)]||'Unknown')+_0x239fda(0x36e)+(_0x2c2c55['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x37d22a['position']||'Unknown')+_0x239fda(0x2f6);document[_0x239fda(0x3dd)]('validation-results-container')[_0x239fda(0x42f)]=_0x2daf9e,document['getElementById']('validation-results-container')[_0x239fda(0x2d3)]['display']=_0x239fda(0x38d);if(_0x4ffd9f&&_0x2370c5){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x485cb7=_0x523a96[_0x239fda(0x292)]||_0x523a96['matchDate']||serverTimestamp(),[_0x5c9185,_0xcad957]=await Promise['all']([getPlayerEloAtTime(_0x565a07,_0x485cb7,_0x305042),getPlayerEloAtTime(_0x5cd560,_0x485cb7,_0x305042)]),{calculateElo:_0x4ea67d}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x51c511,newLoserRating:_0x11ca10}=_0x4ea67d(_0x5c9185,_0xcad957),_0x165737=_0x2c2c55['position']||Number['MAX_SAFE_INTEGER'],_0x4935de=_0x37d22a[_0x239fda(0x2e0)]||Number['MAX_SAFE_INTEGER'];let _0x4fc953=_0x165737,_0x5e1abc=_0x4935de;_0x165737>_0x4935de&&(_0x4fc953=_0x4935de,_0x5e1abc=_0x4935de+0x1);const _0x4b3a78=writeBatch(db),_0x1fe5f7=doc(db,_0x54d08d,_0x565a07);_0x4b3a78[_0x239fda(0x237)](_0x1fe5f7,{'eloRating':_0x51c511,'position':_0x4fc953,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x33c1d0=doc(db,_0x54d08d,_0x5cd560);_0x4b3a78[_0x239fda(0x237)](_0x33c1d0,{'eloRating':_0x11ca10,'position':_0x5e1abc,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x239fda(0x210)]['uid']});if(_0x165737>_0x4935de){const _0x9eb7b5=await getDocs(query(collection(db,_0x54d08d),where(_0x239fda(0x2e0),'>',_0x4935de),where('position','<',_0x165737)));_0x9eb7b5[_0x239fda(0x25e)](_0x5e52f4=>{const _0x365db4=_0x239fda,_0x292628=doc(db,_0x54d08d,_0x5e52f4['id']),_0x345206=_0x5e52f4[_0x365db4(0x3a1)]()['position'];_0x4b3a78[_0x365db4(0x237)](_0x292628,{'position':_0x345206+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x365db4(0x294),'positionAdjustedAt':serverTimestamp()});});}if(!_0x4ffd9f){const _0x4454a0=doc(collection(db,_0x305042));_0x4b3a78['set'](_0x4454a0,{'playerId':_0x565a07,'player':_0x523a96['winnerUsername'],'previousElo':_0x5c9185,'newElo':_0x51c511,'eloChange':_0x51c511-_0x5c9185,'opponentId':_0x5cd560,'opponent':_0x523a96['loserUsername'],'matchResult':'win','previousPosition':_0x165737,'newPosition':_0x4fc953,'positionChange':_0x4fc953-_0x165737,'matchId':_0x150da5,'timestamp':_0x485cb7,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x239fda(0x210)]['uid'],'gameMode':_0x5f290a,'matchScore':_0x523a96['winnerScore']+'-'+_0x523a96[_0x239fda(0x326)],'mapPlayed':_0x523a96['mapPlayed']||_0x523a96[_0x239fda(0x436)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x2370c5){const _0x5189f3=doc(collection(db,_0x305042));_0x4b3a78['set'](_0x5189f3,{'playerId':_0x5cd560,'player':_0x523a96['loserUsername'],'previousElo':_0xcad957,'newElo':_0x11ca10,'eloChange':_0x11ca10-_0xcad957,'opponentId':_0x565a07,'opponent':_0x523a96['winnerUsername'],'matchResult':'loss','previousPosition':_0x4935de,'newPosition':_0x5e1abc,'positionChange':_0x5e1abc-_0x4935de,'matchId':_0x150da5,'timestamp':_0x485cb7,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5f290a,'matchScore':_0x523a96['winnerScore']+'-'+_0x523a96[_0x239fda(0x326)],'mapPlayed':_0x523a96[_0x239fda(0x272)]||_0x523a96['mapName']||_0x239fda(0x358),'note':_0x239fda(0x23d)});}const _0x5eecd6=_0x5f290a==='D1'?'approvedMatches':_0x5f290a==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x354a05=doc(db,_0x5eecd6,_0x150da5);_0x4b3a78[_0x239fda(0x237)](_0x354a05,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x239fda(0x210)]['uid'],'resimulatedReason':_0x239fda(0x271),'originalWinnerElo':_0x2c2c55['eloRating'],'originalLoserElo':_0x37d22a['eloRating'],'originalWinnerPosition':_0x165737,'originalLoserPosition':_0x4935de,'resimulatedWinnerElo':_0x51c511,'resimulatedLoserElo':_0x11ca10,'resimulatedWinnerPosition':_0x4fc953,'resimulatedLoserPosition':_0x5e1abc}),await _0x4b3a78['commit']();const _0x3e48af=(!_0x4ffd9f?0x1:0x0)+(!_0x2370c5?0x1:0x0),_0x54c808=_0x165737!==_0x4fc953||_0x4935de!==_0x5e1abc;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x3e48af+'\x20ELO\x20history\x20entries.\x20')+(_0x239fda(0x280)+_0x5c9185+''+_0x51c511+_0x239fda(0x25a)+(_0x51c511-_0x5c9185)+_0x239fda(0x266))+('Loser\x20'+_0xcad957+''+_0x11ca10+'\x20('+(_0x11ca10-_0xcad957)+').\x20')+(''+(_0x54c808?'Positions\x20updated:\x20Winner\x20'+_0x165737+''+_0x4fc953+',\x20Loser\x20'+_0x4935de+''+_0x5e1abc:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector'](_0x239fda(0x200))&&loadPlayersData();}catch(_0x10b02f){console['error'](_0x239fda(0x39a),_0x10b02f),showNotification(_0x239fda(0x403)+_0x10b02f[_0x239fda(0x24d)],'error');}}async function getPlayerEloAtTime(_0x593ba8,_0x5486f2,_0x59c51f){const _0x407b45=a4_0x599477;try{const _0x2b6557=_0x5486f2['toDate']?_0x5486f2['toDate']():new Date(_0x5486f2),_0x1819c4=query(collection(db,_0x59c51f),where('playerId','==',_0x593ba8),where('timestamp','<',_0x5486f2),orderBy(_0x407b45(0x420),'desc'),limit(0x1)),_0x512ef3=await getDocs(_0x1819c4);if(!_0x512ef3['empty']){const _0x1eea25=_0x512ef3['docs'][0x0]['data']();return console[_0x407b45(0x3df)](_0x407b45(0x1f8)+_0x593ba8+'\x20before\x20match:\x20'+_0x1eea25['newElo']),_0x1eea25[_0x407b45(0x2c4)];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x593ba8+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x5f1195){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x593ba8+':',_0x5f1195),0x4b0;}}function openResimulateModal(){const _0x560aca=a4_0x599477;console[_0x560aca(0x3df)](_0x560aca(0x207));const _0x4c349c=document[_0x560aca(0x3dd)]('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x4c349c);if(!_0x4c349c){console['error']('Modal\x20element\x20not\x20found!');return;}_0x4c349c['style']['display']=_0x560aca(0x38d),_0x4c349c['style']['visibility']='visible',_0x4c349c['style']['opacity']='1',_0x4c349c['classList']['add'](_0x560aca(0x308)),console[_0x560aca(0x3df)](_0x560aca(0x435)),console[_0x560aca(0x3df)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x4c349c)['display']);const _0x30af8f=document[_0x560aca(0x3dd)]('match-details-container'),_0x33fa51=document['getElementById']('validation-results-container'),_0x1e46a4=document['getElementById'](_0x560aca(0x3c0)),_0x5056e8=document['getElementById']('resimulate-match-id');if(_0x30af8f)_0x30af8f['innerHTML']='';if(_0x33fa51)_0x33fa51[_0x560aca(0x42f)]='';if(_0x1e46a4)_0x1e46a4['style']['display']=_0x560aca(0x36f);if(_0x5056e8)_0x5056e8['value']='';console['log'](_0x560aca(0x298));}function closeResimulateModal(){const _0x33d283=a4_0x599477;document['getElementById']('resimulate-modal')['style']['display']=_0x33d283(0x36f),window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a4_0x599477(0x429)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0xa35db8){console['error']('Error\x20loading\x20points\x20data:',_0xa35db8),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0xa35db8['message'],'error');}}function renderPointsOverview(_0x235d72){const _0x41256c=a4_0x599477,_0x5af958=document[_0x41256c(0x3dd)]('points-overview-table-body');if(!_0x5af958)return;if(_0x235d72[_0x41256c(0x1ee)]===0x0){_0x5af958[_0x41256c(0x42f)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x5af958[_0x41256c(0x42f)]='',_0x235d72[_0x41256c(0x25e)](_0x5ed504=>{const _0x4eb71d=_0x41256c,_0x22e888=document[_0x4eb71d(0x26b)]('tr'),_0x39abe9=_0x5ed504['displayName']||_0x5ed504[_0x4eb71d(0x3d3)]||'Unknown\x20User',_0x50109f=_0x5ed504['email']||_0x4eb71d(0x353),_0x2e2794=_0x5ed504[_0x4eb71d(0x27d)]||0x0,_0x5d7fdc=_0x5ed504['lastPointsModified']?new Date(_0x5ed504['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x22e888['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x39abe9+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x50109f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x2e2794>0x3e8?'high-points':_0x2e2794>0x1f4?'medium-points':'low-points')+_0x4eb71d(0x20a)+_0x2e2794['toLocaleString']()+_0x4eb71d(0x422)+_0x5d7fdc+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x5ed504['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x5ed504['id']+_0x4eb71d(0x3a7),_0x5af958[_0x4eb71d(0x37d)](_0x22e888);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x35c4a2=a4_0x599477;console['log'](_0x35c4a2(0x1f9));const _0xaa13=document[_0x35c4a2(0x355)]('.quick-edit-btn');console[_0x35c4a2(0x3df)](_0x35c4a2(0x31a)+_0xaa13['length']+'\x20quick\x20edit\x20buttons'),_0xaa13['forEach'](_0xfe5e16=>{const _0x34e37f=_0x35c4a2,_0x65b37e=_0xfe5e16[_0x34e37f(0x38f)](!![]);_0xfe5e16[_0x34e37f(0x382)]['replaceChild'](_0x65b37e,_0xfe5e16);});const _0xe413aa=document[_0x35c4a2(0x355)](_0x35c4a2(0x390));console['log']('Found\x20'+_0xe413aa['length']+'\x20view\x20history\x20buttons'),_0xe413aa['forEach'](_0xb5070b=>{const _0x472f19=_0x35c4a2,_0x33b7a3=_0xb5070b[_0x472f19(0x38f)](!![]);_0xb5070b['parentNode'][_0x472f19(0x317)](_0x33b7a3,_0xb5070b);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0x37ad52=>{_0x37ad52['addEventListener']('click',function(_0x1708af){const _0xcfdf47=a4_0x4e5c;_0x1708af['preventDefault'](),_0x1708af[_0xcfdf47(0x3dc)]();const _0x3846ce=this[_0xcfdf47(0x283)][_0xcfdf47(0x34e)];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x3846ce);if(!_0x3846ce){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x3846ce);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x30afe4=>{_0x30afe4['addEventListener']('click',function(_0x33a859){const _0x570bac=a4_0x4e5c;_0x33a859['preventDefault'](),_0x33a859['stopPropagation']();const _0x2ad195=this['dataset'][_0x570bac(0x34e)];console[_0x570bac(0x3df)]('View\x20history\x20clicked\x20for\x20user:',_0x2ad195);if(!_0x2ad195){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x2ad195);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x20f9b0){const _0x3a03bb=a4_0x599477;console[_0x3a03bb(0x3df)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x20f9b0);const _0x4e2b25=document[_0x3a03bb(0x3dd)]('quick-edit-points-modal');if(!_0x4e2b25){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...',_0x3a03bb(0x388));const _0x379d3b=doc(db,_0x3a03bb(0x2f8),_0x20f9b0),_0x11c754=await getDoc(_0x379d3b);if(!_0x11c754[_0x3a03bb(0x254)]()){showNotification('User\x20not\x20found','error');return;}const _0x247e7c=_0x11c754['data']();console['log'](_0x3a03bb(0x281),_0x247e7c);const _0x3b4b2c=document['getElementById']('quick-edit-user-id'),_0x5b7487=document['getElementById'](_0x3a03bb(0x260)),_0x46541c=document[_0x3a03bb(0x3dd)]('quick-edit-email'),_0x298f95=document['getElementById']('quick-edit-current-points'),_0x5df509=document['getElementById']('quick-edit-points-form');if(!_0x3b4b2c||!_0x5b7487||!_0x46541c||!_0x298f95||!_0x5df509){console[_0x3a03bb(0x27b)](_0x3a03bb(0x306)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x3b4b2c['value']=_0x20f9b0,_0x5b7487['textContent']=_0x247e7c['displayName']||_0x247e7c['username']||'Unknown\x20User',_0x46541c[_0x3a03bb(0x2a3)]=_0x247e7c['email']||'No\x20email',_0x298f95['textContent']=(_0x247e7c[_0x3a03bb(0x27d)]||0x0)['toLocaleString'](),_0x5df509[_0x3a03bb(0x240)]();const _0x1d4df4=document['getElementById'](_0x3a03bb(0x2a8));_0x1d4df4&&(_0x1d4df4[_0x3a03bb(0x36a)]=!![]);_0x4e2b25[_0x3a03bb(0x377)]['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x875a7a=document['getElementById']('quick-points-amount');_0x875a7a&&setTimeout(()=>_0x875a7a['focus'](),0x64);}catch(_0x4bebda){console[_0x3a03bb(0x27b)]('Error\x20opening\x20quick\x20edit\x20modal:',_0x4bebda),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x4bebda['message'],'error');}}function closeQuickEditModal(){const _0x2d1744=a4_0x599477,_0x2976d6=document['getElementById']('quick-edit-points-modal');_0x2976d6&&_0x2976d6['classList'][_0x2d1744(0x33e)]('active');}async function handleQuickEditPoints(_0x2bfcb5){const _0x2bb8bf=a4_0x599477;_0x2bfcb5['preventDefault']();const _0xb656dd=document['getElementById']('quick-edit-user-id')[_0x2bb8bf(0x26f)],_0x1f3cd4=document['querySelector'](_0x2bb8bf(0x2c8))[_0x2bb8bf(0x26f)],_0x22796d=parseInt(document[_0x2bb8bf(0x3dd)](_0x2bb8bf(0x24a))['value']),_0x60b2e4=document[_0x2bb8bf(0x3dd)]('quick-points-reason')['value']['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0xb656dd,'action':_0x1f3cd4,'amount':_0x22796d,'reason':_0x60b2e4});if(!_0xb656dd||!_0x22796d||_0x22796d<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0xb656dd,_0x1f3cd4,_0x22796d,_0x60b2e4),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log'](_0x2bb8bf(0x400),_0xb656dd);}catch(_0x1c964d){console['error']('Error\x20updating\x20points:',_0x1c964d),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x1c964d[_0x2bb8bf(0x24d)],'error');}}async function searchUsersForPoints(){const _0x828992=a4_0x599477,_0x2f84ae=document[_0x828992(0x3dd)]('points-user-search')[_0x828992(0x26f)]['trim']()['toLowerCase'](),_0x399368=document['getElementById']('user-search-results');if(!_0x2f84ae||_0x2f84ae['length']<0x2){_0x399368[_0x828992(0x42f)]='';return;}_0x399368['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x2c2b78=collection(db,'userProfiles'),_0x2d1454=await getDocs(_0x2c2b78),_0x5dea01=[];_0x2d1454['forEach'](_0x3f4bff=>{const _0xb2af20=_0x828992,_0x32c467=_0x3f4bff['data'](),_0x1e7f39=(_0x32c467[_0xb2af20(0x2cf)]||_0x32c467['username']||'')['toLowerCase'](),_0x2f630e=(_0x32c467['email']||'')['toLowerCase']();(_0x1e7f39[_0xb2af20(0x1ec)](_0x2f84ae)||_0x2f630e[_0xb2af20(0x1ec)](_0x2f84ae))&&_0x5dea01['push']({'id':_0x3f4bff['id'],..._0x32c467});});if(_0x5dea01[_0x828992(0x1ee)]===0x0){_0x399368['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x399368['innerHTML']='',_0x5dea01['forEach'](_0x2a5c3d=>{const _0x590842=_0x828992,_0x49fdb1=document['createElement']('div');_0x49fdb1[_0x590842(0x2ee)]='search-result-item',_0x49fdb1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x2a5c3d['displayName']||_0x2a5c3d['username']||'Unknown')+_0x590842(0x253)+(_0x2a5c3d[_0x590842(0x430)]||_0x590842(0x353))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x2a5c3d['points']||0x0)['toLocaleString']()+_0x590842(0x3cd),_0x49fdb1['addEventListener']('click',()=>selectUserForPoints(_0x2a5c3d)),_0x399368['appendChild'](_0x49fdb1);});}catch(_0x1f862b){console['error']('Error\x20searching\x20users:',_0x1f862b),_0x399368['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x5f5717){const _0x1647e0=a4_0x599477;document[_0x1647e0(0x3dd)](_0x1647e0(0x2e3))['textContent']=_0x5f5717['displayName']||_0x5f5717['username']||'Unknown\x20User',document['getElementById'](_0x1647e0(0x24f))[_0x1647e0(0x2a3)]=(_0x5f5717[_0x1647e0(0x27d)]||0x0)[_0x1647e0(0x33d)](),document['getElementById']('selected-user-id')['value']=_0x5f5717['id'],document['getElementById']('selected-user-info')['style'][_0x1647e0(0x334)]='block',document[_0x1647e0(0x3dd)](_0x1647e0(0x1f7))['style']['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x1cbaac){const _0x404d87=a4_0x599477;_0x1cbaac['preventDefault']();const _0xbf6afc=document['getElementById']('selected-user-id')['value'],_0x1f31ff=document['getElementById']('points-action')['value'],_0x3ee3f9=parseInt(document[_0x404d87(0x3dd)]('points-amount')['value']),_0x2c529f=document['getElementById']('points-reason')['value']['trim']();if(!_0xbf6afc||!_0x3ee3f9||_0x3ee3f9<0x0){showNotification(_0x404d87(0x1e8),'error');return;}try{await modifyUserPoints(_0xbf6afc,_0x1f31ff,_0x3ee3f9,_0x2c529f),document['getElementById']('modify-points-form')[_0x404d87(0x240)]();const _0x23a582=doc(db,_0x404d87(0x2f8),_0xbf6afc),_0xeb3372=await getDoc(_0x23a582);if(_0xeb3372[_0x404d87(0x254)]()){const _0x33307f=_0xeb3372['data']();document['getElementById']('selected-user-points')['textContent']=(_0x33307f['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x326970){console['error']('Error\x20modifying\x20points:',_0x326970),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x326970['message'],_0x404d87(0x27b));}}async function loadPointsHistory(){const _0x56f837=a4_0x599477,_0x2c56aa=document['getElementById'](_0x56f837(0x394));if(!_0x2c56aa)return;_0x2c56aa[_0x56f837(0x42f)]=_0x56f837(0x2c3);try{const _0x24af47=collection(db,'pointsHistory'),_0x3fde5f=query(_0x24af47,orderBy(_0x56f837(0x420),'desc'),limit(0x32)),_0x328252=await getDocs(_0x3fde5f);if(_0x328252['empty']){_0x2c56aa['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x2c56aa['innerHTML']='',_0x328252['forEach'](_0x59916d=>{const _0x1efe7f=_0x56f837,_0x554e37=_0x59916d['data'](),_0xcb3538=document['createElement']('tr'),_0x52ab86=_0x554e37[_0x1efe7f(0x420)]?new Date(_0x554e37['timestamp'][_0x1efe7f(0x1ef)]*0x3e8)['toLocaleString']():'Unknown';let _0x23a653='';switch(_0x554e37['action']){case _0x1efe7f(0x22e):_0x23a653='Added\x20'+_0x554e37['amount']+_0x1efe7f(0x3ea);break;case'subtract':_0x23a653='Subtracted\x20'+_0x554e37['amount']+_0x1efe7f(0x3ea);break;case'set':_0x23a653='Set\x20to\x20'+_0x554e37['amount']+'\x20points';break;default:_0x23a653=_0x554e37['action']+'\x20'+_0x554e37['amount']+_0x1efe7f(0x3ea);}_0xcb3538['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x52ab86+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x554e37['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x23a653+_0x1efe7f(0x1e3)+_0x554e37[_0x1efe7f(0x39e)]+_0x1efe7f(0x32d)+(_0x554e37[_0x1efe7f(0x337)]||0x0)+'\x20\x20'+(_0x554e37[_0x1efe7f(0x2d5)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x554e37['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x554e37[_0x1efe7f(0x205)]||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2c56aa['appendChild'](_0xcb3538);});}catch(_0x4fd53b){console['error'](_0x56f837(0x3bc),_0x4fd53b),_0x2c56aa['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x4fd53b['message']+'</td></tr>';}}function filterPointsOverview(){const _0x1da0f7=a4_0x599477,_0x17320f=document[_0x1da0f7(0x3dd)]('points-overview-search')[_0x1da0f7(0x26f)]['toLowerCase']();if(!window['allUsersPoints'])return;const _0x1c566a=window['allUsersPoints'][_0x1da0f7(0x289)](_0x218896=>{const _0xeea0e5=_0x1da0f7,_0x3fd711=(_0x218896['displayName']||_0x218896[_0xeea0e5(0x3d3)]||'')['toLowerCase'](),_0x1a891e=(_0x218896[_0xeea0e5(0x430)]||'')['toLowerCase']();return _0x3fd711[_0xeea0e5(0x1ec)](_0x17320f)||_0x1a891e['includes'](_0x17320f);});renderPointsOverview(_0x1c566a);}function sortPointsOverview(){const _0x21a64f=a4_0x599477,_0x5f2aa0=document['getElementById'](_0x21a64f(0x3d8))['value'];if(!window['allUsersPoints'])return;const _0x5b6af5=[...window['allUsersPoints']];switch(_0x5f2aa0){case'points-desc':_0x5b6af5['sort']((_0x79cb35,_0x3b7037)=>(_0x3b7037['points']||0x0)-(_0x79cb35[_0x21a64f(0x27d)]||0x0));break;case'points-asc':_0x5b6af5['sort']((_0x531064,_0x3b60ea)=>(_0x531064[_0x21a64f(0x27d)]||0x0)-(_0x3b60ea['points']||0x0));break;case'name-asc':_0x5b6af5['sort']((_0xa81bc1,_0x48f8e7)=>{const _0x5c106e=_0x21a64f,_0x4e1466=(_0xa81bc1[_0x5c106e(0x2cf)]||_0xa81bc1[_0x5c106e(0x3d3)]||'')['toLowerCase'](),_0x5f17a9=(_0x48f8e7[_0x5c106e(0x2cf)]||_0x48f8e7[_0x5c106e(0x3d3)]||'')['toLowerCase']();return _0x4e1466['localeCompare'](_0x5f17a9);});break;case'name-desc':_0x5b6af5[_0x21a64f(0x21a)]((_0x4bd3cd,_0xa4d3f)=>{const _0xd5d983=_0x21a64f,_0x100d14=(_0x4bd3cd['displayName']||_0x4bd3cd[_0xd5d983(0x3d3)]||'')[_0xd5d983(0x291)](),_0x1bded4=(_0xa4d3f['displayName']||_0xa4d3f['username']||'')['toLowerCase']();return _0x1bded4[_0xd5d983(0x2eb)](_0x100d14);});break;}renderPointsOverview(_0x5b6af5);}async function handleAwardItem(_0x4c3ecd){const _0x59a9ac=a4_0x599477;_0x4c3ecd[_0x59a9ac(0x264)]();const _0x327b3f=document[_0x59a9ac(0x3dd)](_0x59a9ac(0x247))['value'],_0xbd7b10=document[_0x59a9ac(0x3dd)]('store-item-select')['value'],_0x30037c=document['getElementById']('award-reason')['value']['trim']();if(!_0x327b3f||!_0xbd7b10){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully',_0x59a9ac(0x383)),document['getElementById']('award-item-form')['reset']();}catch(_0x4b10cc){console[_0x59a9ac(0x27b)](_0x59a9ac(0x29c),_0x4b10cc),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x4b10cc['message'],'error');}}async function loadUserPointsHistory(_0x528cf8){const _0x3b566f=a4_0x599477;try{const _0xe933f1=collection(db,_0x3b566f(0x256)),_0x58a396=query(_0xe933f1,where('userId','==',_0x528cf8),orderBy('timestamp','desc')),_0x5e8c5d=await getDocs(_0x58a396);console['log'](_0x3b566f(0x31a)+_0x5e8c5d['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x528cf8),showNotification('User\x20has\x20'+_0x5e8c5d[_0x3b566f(0x22f)]+'\x20points\x20history\x20entries','info');}catch(_0x344dbd){console[_0x3b566f(0x27b)]('Error\x20loading\x20user\x20points\x20history:',_0x344dbd),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0xb0c99f=a4_0x599477;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x564248=collection(db,'userProfiles'),_0x253e90=await getDocs(_0x564248);if(_0x253e90['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x1af07b=0x0,_0x3576a7=0x0;const _0x33808e=writeBatch(db);let _0x597bd6=0x0;return console['log'](_0xb0c99f(0x31a)+_0x253e90['size']+'\x20users\x20to\x20check...'),_0x253e90['forEach'](_0x547263=>{const _0x38c275=_0xb0c99f,_0x55d692=_0x547263['data']();_0x55d692['points']===undefined||_0x55d692[_0x38c275(0x27d)]===null?(_0x33808e['update'](_0x547263['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x1af07b++,_0x597bd6++,console['log'](_0x38c275(0x3ce)+(_0x55d692['displayName']||_0x55d692['username']||_0x55d692['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x3576a7++,console[_0x38c275(0x3df)]((_0x55d692['displayName']||_0x55d692[_0x38c275(0x3d3)]||_0x55d692['email']||_0x38c275(0x358))+'\x20already\x20has\x20points:\x20'+_0x55d692['points'])),_0x597bd6>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x1af07b>0x0?(console['log'](_0xb0c99f(0x357)+_0x1af07b+'\x20users...'),await _0x33808e['commit'](),console[_0xb0c99f(0x3df)]('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x1af07b+'\x20users')):console['log'](_0xb0c99f(0x241)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x253e90[_0xb0c99f(0x22f)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x1af07b+_0xb0c99f(0x3f9)+_0x3576a7),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x1af07b+'\x20users.\x20'+_0x3576a7+_0xb0c99f(0x371),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x253e90[_0xb0c99f(0x22f)],'usersUpdated':_0x1af07b,'usersAlreadyHadPoints':_0x3576a7};}catch(_0x41d16d){console[_0xb0c99f(0x27b)]('Error\x20initializing\x20points\x20field:',_0x41d16d),showNotification('Error\x20initializing\x20points:\x20'+_0x41d16d['message'],'error');throw _0x41d16d;}}function addPointsMigrationButton(){const _0xf02f47=a4_0x599477,_0x1f44c2=document[_0xf02f47(0x3dd)]('manage-points');if(!_0x1f44c2)return;if(document[_0xf02f47(0x3dd)](_0xf02f47(0x22d)))return;const _0x3f9258=document['createElement'](_0xf02f47(0x41e));_0x3f9258[_0xf02f47(0x2ee)]='migration-section',_0x3f9258['style'][_0xf02f47(0x25c)]='20px',_0x3f9258['style']['padding']='15px',_0x3f9258['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x3f9258['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x3f9258[_0xf02f47(0x2d3)][_0xf02f47(0x3cb)]='5px',_0x3f9258['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x30ba3a=_0x1f44c2['querySelector']('.section-header');_0x30ba3a&&_0x30ba3a['insertAdjacentElement'](_0xf02f47(0x405),_0x3f9258),document[_0xf02f47(0x3dd)](_0xf02f47(0x22d))['addEventListener']('click',async function(){if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0x3f9258['style']['display']='none';},0xbb8);}catch(_0x209ed0){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x171154=a4_0x599477;console[_0x171154(0x3df)]('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0xf41039=document['getElementById']('points-user-search');_0xf41039&&_0xf41039[_0x171154(0x32a)]('input',debounce(searchUsersForPoints,0x12c));const _0x5335f5=document['getElementById']('modify-points-form');_0x5335f5&&_0x5335f5['addEventListener']('submit',handleModifyPoints);const _0x22d1ab=document['getElementById']('award-item-form');_0x22d1ab&&_0x22d1ab['addEventListener']('submit',handleAwardItem);const _0x385625=document['getElementById'](_0x171154(0x24c));_0x385625&&_0x385625[_0x171154(0x32a)]('input',debounce(filterPointsOverview,0x12c));const _0x4e6aab=document[_0x171154(0x3dd)]('points-sort-order');_0x4e6aab&&_0x4e6aab['addEventListener']('change',sortPointsOverview);const _0x16d4c1=document['getElementById']('refresh-points-overview');_0x16d4c1&&_0x16d4c1['addEventListener'](_0x171154(0x360),loadPointsOverview);const _0x297286=document['getElementById']('quick-edit-points-modal');if(_0x297286){console['log'](_0x171154(0x3c7));const _0x3e6688=_0x297286[_0x171154(0x2a9)]('.close-btn');_0x3e6688?_0x3e6688[_0x171154(0x32a)](_0x171154(0x360),function(){const _0x5b365c=_0x171154;console['log'](_0x5b365c(0x389)),closeQuickEditModal();}):console['warn'](_0x171154(0x3b3));const _0x244e1c=document['getElementById']('cancel-quick-edit');_0x244e1c?_0x244e1c['addEventListener']('click',function(){const _0x4353cf=_0x171154;console[_0x4353cf(0x3df)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x24e0e6=document[_0x171154(0x3dd)]('quick-edit-points-form');_0x24e0e6?_0x24e0e6[_0x171154(0x32a)]('submit',function(_0x3db528){const _0x2d5d04=_0x171154;console['log'](_0x2d5d04(0x38e)),handleQuickEditPoints(_0x3db528);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x297286['addEventListener']('click',function(_0x2a51fe){_0x2a51fe['target']===_0x297286&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x197011=a4_0x599477;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x3a79ec=document[_0x197011(0x3dd)]('ribbon-user-search');_0x3a79ec&&_0x3a79ec[_0x197011(0x32a)]('input',debounce(searchRibbonUser,0x12c));const _0x571f94=document[_0x197011(0x3dd)]('search-ribbon-user-btn');_0x571f94&&_0x571f94['addEventListener'](_0x197011(0x360),searchRibbonUser);const _0x54cd42=document['getElementById'](_0x197011(0x40f));_0x54cd42&&_0x54cd42['addEventListener']('submit',addRibbon),_0x3a79ec&&_0x3a79ec[_0x197011(0x32a)]('keypress',function(_0x4e20af){const _0x21b2c3=_0x197011;_0x4e20af[_0x21b2c3(0x2fd)]===_0x21b2c3(0x23b)&&(_0x4e20af['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x467b91,_0x30ffeb,_0x26323e,_0x3ec456=''){const _0x3271da=a4_0x599477,_0x298791=doc(db,'userProfiles',_0x467b91),_0x286a17=await getDoc(_0x298791);if(!_0x286a17['exists']())throw new Error('User\x20not\x20found');const _0x225ac1=_0x286a17['data'](),_0x279081=_0x225ac1[_0x3271da(0x27d)]!==undefined?_0x225ac1['points']:0x0;_0x225ac1['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x225ac1['displayName']||_0x225ac1['email']||'Unknown')),await updateDoc(_0x298791,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x101947=_0x279081;switch(_0x30ffeb){case'add':_0x101947=_0x279081+_0x26323e;break;case _0x3271da(0x2fb):_0x101947=Math['max'](0x0,_0x279081-_0x26323e);break;case'set':_0x101947=_0x26323e;break;default:throw new Error(_0x3271da(0x223));}await updateDoc(_0x298791,{'points':_0x101947,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x3271da(0x256)),{'userId':_0x467b91,'userEmail':_0x225ac1['email']||_0x3271da(0x23e),'displayName':_0x225ac1['displayName']||_0x225ac1['username']||'Unknown\x20User','action':_0x30ffeb,'amount':_0x26323e,'previousPoints':_0x279081,'newPoints':_0x101947,'reason':_0x3ec456,'adminEmail':auth['currentUser'][_0x3271da(0x430)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x1304f2=a4_0x599477,_0x4e8b62=document['getElementById']('points-overview-table-body');if(!_0x4e8b62)return;_0x4e8b62['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x587387=collection(db,_0x1304f2(0x2f8)),_0x592b20=await getDocs(_0x587387);if(_0x592b20['empty']){_0x4e8b62['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x29dffd=[];let _0x430fb8=0x0;_0x592b20['forEach'](_0x5c6ff0=>{const _0x3533de=_0x1304f2,_0x29b76f=_0x5c6ff0['data'](),_0x5c7c76=_0x29b76f[_0x3533de(0x27d)]!==undefined?_0x29b76f['points']:0x0;_0x29b76f['points']===undefined&&_0x430fb8++,_0x29dffd[_0x3533de(0x37c)]({'id':_0x5c6ff0['id'],..._0x29b76f,'points':_0x5c7c76});}),_0x430fb8>0x0&&(console['log'](_0x1304f2(0x31a)+_0x430fb8+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x430fb8+_0x1304f2(0x428),_0x1304f2(0x388))),_0x29dffd[_0x1304f2(0x21a)]((_0x147492,_0x450a14)=>(_0x450a14[_0x1304f2(0x27d)]||0x0)-(_0x147492['points']||0x0)),window['allUsersPoints']=_0x29dffd,renderPointsOverview(_0x29dffd);}catch(_0x4174f4){console['error']('Error\x20loading\x20points\x20overview:',_0x4174f4),_0x4e8b62[_0x1304f2(0x42f)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x4174f4[_0x1304f2(0x24d)]+'</td></tr>';}}async function loadRibbonsData(){const _0x93f6f1=a4_0x599477,_0x3e3a4b=document['getElementById']('ribbons-overview-table-body');if(!_0x3e3a4b)return;_0x3e3a4b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x52ff96,_0x3e2a97,_0x3dfe7a]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x3e3a4b['innerHTML']='';const _0x385be9=(_0x2dfb08,_0x273093)=>{_0x2dfb08['forEach'](_0x58917b=>{const _0x26893f=a4_0x4e5c,_0x14cba2=_0x58917b['data'](),_0x448277=_0x14cba2[_0x26893f(0x39f)]||{},_0x34131e=Object['keys'](_0x448277)['length'],_0x5640bc=document['createElement']('tr');_0x5640bc[_0x26893f(0x42f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x14cba2['username']||_0x26893f(0x358))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x273093[_0x26893f(0x291)]()+'\x22>'+_0x273093+_0x26893f(0x288)+_0x34131e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x14cba2['lastUpdated']?new Date(_0x14cba2[_0x26893f(0x22a)]['seconds']*0x3e8)[_0x26893f(0x2ae)]():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x14cba2['username']+'\x22\x20data-ladder=\x22'+_0x273093+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3e3a4b['appendChild'](_0x5640bc);});};_0x385be9(_0x52ff96,'D1'),_0x385be9(_0x3e2a97,'D2'),_0x385be9(_0x3dfe7a,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x3fc101=>{const _0x2c9927=a4_0x4e5c;_0x3fc101[_0x2c9927(0x32a)]('click',function(){const _0x1102bf=this['dataset']['username'],_0x5ee7d1=this['dataset']['ladder'];editUserRibbons(_0x1102bf,_0x5ee7d1);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x3c3ef2){console[_0x93f6f1(0x27b)](_0x93f6f1(0x40e),_0x3c3ef2),_0x3e3a4b['innerHTML']=_0x93f6f1(0x1f6),showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x138cd0=a4_0x599477,_0x2b6df7=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x2b6df7){showNotification(_0x138cd0(0x246),'error');return;}try{const [_0x1334d1,_0x273942,_0x464dd8]=await Promise['all']([getDoc(doc(db,_0x138cd0(0x366),_0x2b6df7)),getDoc(doc(db,_0x138cd0(0x1e9),_0x2b6df7)),getDoc(doc(db,_0x138cd0(0x215),_0x2b6df7))]);let _0x13f4fd=null,_0x20e9f7=null;if(_0x1334d1['exists']())_0x13f4fd='D1',_0x20e9f7=_0x1334d1['data']();else{if(_0x273942[_0x138cd0(0x254)]())_0x13f4fd='D2',_0x20e9f7=_0x273942['data']();else _0x464dd8['exists']()&&(_0x13f4fd='D3',_0x20e9f7=_0x464dd8['data']());}_0x13f4fd?(document[_0x138cd0(0x3dd)]('current-ribbon-user')['textContent']=_0x2b6df7,document['getElementById']('ribbon-target-user')['value']=_0x2b6df7,document['getElementById'](_0x138cd0(0x325))['value']=_0x13f4fd,document['getElementById']('user-ribbon-management')['style']['display']='block',displayCurrentRibbons(_0x20e9f7['ribbons']||{}),showNotification(_0x138cd0(0x31a)+_0x2b6df7+'\x20in\x20'+_0x13f4fd+_0x138cd0(0x434),'success')):showNotification(_0x138cd0(0x209)+_0x2b6df7+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x22ae2b){console['error'](_0x138cd0(0x21c),_0x22ae2b),showNotification(_0x138cd0(0x20c),'error');}}function displayCurrentRibbons(_0x2ff95b){const _0x34f52d=a4_0x599477,_0x12da60=document[_0x34f52d(0x3dd)](_0x34f52d(0x279));if(!_0x12da60)return;_0x12da60[_0x34f52d(0x42f)]='';if(Object[_0x34f52d(0x2e8)](_0x2ff95b)[_0x34f52d(0x1ee)]===0x0){_0x12da60['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x34f52d(0x387)](_0x2ff95b)[_0x34f52d(0x25e)](([_0x5f302d,_0x19635d])=>{const _0x37d581=_0x34f52d,_0xd80e68=document['createElement'](_0x37d581(0x41e));_0xd80e68[_0x37d581(0x2ee)]=_0x37d581(0x3a5),_0xd80e68['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x5f302d+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x19635d['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x19635d[_0x37d581(0x1f2)]?new Date(_0x19635d['awardedAt']['seconds']*0x3e8)[_0x37d581(0x2ae)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x5f302d+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x12da60['appendChild'](_0xd80e68);}),document[_0x34f52d(0x355)]('.remove-ribbon-btn')['forEach'](_0x443886=>{const _0x1cd6f1=_0x34f52d;_0x443886[_0x1cd6f1(0x32a)]('click',function(){const _0x4b00bc=this['dataset']['ribbon'];removeRibbon(_0x4b00bc);});});}async function addRibbon(_0xb1ddf1){const _0x425d70=a4_0x599477;_0xb1ddf1[_0x425d70(0x264)]();const _0x15aad0=document['getElementById']('ribbon-target-user')['value'],_0x507815=document['getElementById']('ribbon-target-ladder')['value'],_0x1d292b=document[_0x425d70(0x3dd)](_0x425d70(0x2f1))['value'],_0xf8b47b=parseInt(document[_0x425d70(0x3dd)]('ribbon-level')[_0x425d70(0x26f)]);if(!_0x15aad0||!_0x507815||!_0x1d292b||!_0xf8b47b){showNotification(_0x425d70(0x3e1),_0x425d70(0x27b));return;}try{const _0x273c01='playerRibbons'+(_0x507815==='D1'?'':_0x507815),_0x5ddb7f=doc(db,_0x273c01,_0x15aad0),_0x19c07b=await getDoc(_0x5ddb7f),_0x2564b9=_0x19c07b[_0x425d70(0x254)]()?_0x19c07b['data']()[_0x425d70(0x39f)]||{}:{};_0x2564b9[_0x1d292b]={'level':_0xf8b47b,'awardedAt':serverTimestamp()},await setDoc(_0x5ddb7f,{'username':_0x15aad0,'ladder':_0x507815,'ribbons':_0x2564b9,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x1d292b+_0x425d70(0x212)+_0xf8b47b+'\x20to\x20'+_0x15aad0,'success'),displayCurrentRibbons(_0x2564b9),document['getElementById']('ribbon-type-select')['value']='',document[_0x425d70(0x3dd)]('ribbon-level')[_0x425d70(0x26f)]='1';}catch(_0x5c41ed){console['error'](_0x425d70(0x2b6),_0x5c41ed),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x1bcc0a){const _0x12c60e=a4_0x599477,_0x245ff3=document['getElementById']('ribbon-target-user')['value'],_0x325c89=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x1bcc0a+_0x12c60e(0x2df)+_0x245ff3+'?'))return;try{const _0x3c056=_0x12c60e(0x366)+(_0x325c89==='D1'?'':_0x325c89),_0x10acf9=doc(db,_0x3c056,_0x245ff3),_0x2b237c=await getDoc(_0x10acf9),_0x1c28ae=_0x2b237c['exists']()?_0x2b237c['data']()['ribbons']||{}:{};delete _0x1c28ae[_0x1bcc0a],await setDoc(_0x10acf9,{'username':_0x245ff3,'ladder':_0x325c89,'ribbons':_0x1c28ae,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x12c60e(0x418)+_0x1bcc0a+'\x20from\x20'+_0x245ff3,'success'),displayCurrentRibbons(_0x1c28ae);}catch(_0x343d5a){console['error'](_0x12c60e(0x202),_0x343d5a),showNotification(_0x12c60e(0x41c),'error');}}function editUserRibbons(_0x10765e,_0x339e63){const _0x127617=a4_0x599477;document[_0x127617(0x3dd)](_0x127617(0x367))['value']=_0x10765e,searchRibbonUser();}