const a33_0x4e33b4=a33_0x4599,a33_0x369e41=(function(){let _0x310a13=!![];return function(_0x283a8f,_0x55c223){const _0x4c05e9=_0x310a13?function(){const _0x465d66=a33_0x4599;if(_0x55c223){const _0x5dbdf8=_0x55c223[_0x465d66(0xa5)](_0x283a8f,arguments);return _0x55c223=null,_0x5dbdf8;}}:function(){};return _0x310a13=![],_0x4c05e9;};}()),a33_0x25ce77=a33_0x369e41(this,function(){const _0x1661de=a33_0x4599;let _0x2819f5;try{const _0x43f78e=Function('return\x20(function()\x20'+_0x1661de(0x93)+');');_0x2819f5=_0x43f78e();}catch(_0x59a3b7){_0x2819f5=window;}const _0x4699cd=_0x2819f5['console']=_0x2819f5[_0x1661de(0x70)]||{},_0x39f5f4=['log','warn',_0x1661de(0x9d),'error',_0x1661de(0x91),'table','trace'];for(let _0x3df90e=0x0;_0x3df90e<_0x39f5f4[_0x1661de(0xad)];_0x3df90e++){const _0x35e970=a33_0x369e41[_0x1661de(0xa0)]['prototype'][_0x1661de(0x8d)](a33_0x369e41),_0x4c0dab=_0x39f5f4[_0x3df90e],_0x28b2c2=_0x4699cd[_0x4c0dab]||_0x35e970;_0x35e970[_0x1661de(0x7c)]=a33_0x369e41[_0x1661de(0x8d)](a33_0x369e41),_0x35e970['toString']=_0x28b2c2[_0x1661de(0x97)]['bind'](_0x28b2c2),_0x4699cd[_0x4c0dab]=_0x35e970;}});a33_0x25ce77();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x38cffa from'./firebase-idle-wrapper.js';const styleEl=document['createElement'](a33_0x4e33b4(0x99));styleEl[a33_0x4e33b4(0x8e)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x2b46be=![]){const _0x28f6f5=a33_0x4e33b4,_0x5508b5=document['querySelector']('#ladder-d3\x20tbody');if(!_0x5508b5){console[_0x28f6f5(0x86)]('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x5508b5[_0x28f6f5(0x81)]=_0x28f6f5(0x8b);try{const _0x593fcc=Date['now']();if(!_0x2b46be&&playerCacheD3[_0x28f6f5(0x7a)]&&_0x593fcc-playerCacheD3[_0x28f6f5(0x74)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x28f6f5(0x7a)]);return;}const _0x398251=collection(db,'playersD3'),_0x12fff5=await getDocs(_0x398251),_0x42a8ea=[];_0x12fff5['forEach'](_0x289024=>{const _0x4f50a3=_0x28f6f5,_0xd741d5=_0x289024['data']();_0xd741d5['username']&&_0x42a8ea['push']({..._0xd741d5,'id':_0x289024['id'],'elo':_0xd741d5['eloRating']||0x0,'position':_0xd741d5[_0x4f50a3(0x84)]||Number['MAX_SAFE_INTEGER']});});const _0x486a80=collection(db,_0x28f6f5(0x9a)),_0x231754=await getDocs(_0x486a80),_0x4205bc=new Map();_0x231754['forEach'](_0xd29b63=>{const _0x4bad40=_0x28f6f5,_0x2ff7e7=_0xd29b63['data']();_0x2ff7e7['username']&&_0x4205bc[_0x4bad40(0xab)](_0x2ff7e7['username']['toLowerCase'](),_0x2ff7e7);});for(const _0x35d898 of _0x42a8ea){const _0x4d73d7=_0x35d898['username']['toLowerCase']();if(_0x4205bc['has'](_0x4d73d7)){const _0x496ca9=_0x4205bc['get'](_0x4d73d7);_0x496ca9['country']&&(_0x35d898['country']=_0x496ca9['country']['toLowerCase']());}}const _0x1679aa=_0x42a8ea[_0x28f6f5(0x95)](_0x58e8f2=>_0x58e8f2['username']),_0x114df4=await fetchBatchMatchStatsD3(_0x1679aa);_0x42a8ea['sort']((_0x2e6411,_0x22b1da)=>{const _0x32c185=_0x28f6f5,_0x66e178=_0x114df4[_0x32c185(0x89)](_0x2e6411['username'])?.['totalMatches']||0x0,_0xbe1c54=_0x114df4['get'](_0x22b1da[_0x32c185(0xa8)])?.['totalMatches']||0x0;if(_0x66e178===0x0!==(_0xbe1c54===0x0))return _0x66e178===0x0?0x1:-0x1;return(_0x2e6411['position']||0x3e7)-(_0x22b1da[_0x32c185(0x84)]||0x3e7);}),_0x42a8ea['forEach']((_0x5bb785,_0x55ebc5)=>{const _0x66d19b=_0x28f6f5;_0x5bb785[_0x66d19b(0x84)]=_0x55ebc5+0x1;}),playerCacheD3['data']=_0x42a8ea,playerCacheD3[_0x28f6f5(0x74)]=_0x593fcc,updateLadderDisplayD3(_0x42a8ea);}catch(_0x375998){console['error']('Error\x20loading\x20D3\x20ladder:',_0x375998),_0x5508b5[_0x28f6f5(0x81)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x375998['message']+_0x28f6f5(0x8a);}}function a33_0x4599(_0x2780bd,_0x2224e6){const _0x25ce77=a33_0x421c();return a33_0x4599=function(_0x369e41,_0x15f0e1){_0x369e41=_0x369e41-0x6d;let _0x421c15=_0x25ce77[_0x369e41];return _0x421c15;},a33_0x4599(_0x2780bd,_0x2224e6);}function calculateStreakDays(_0x1a2ee0){if(!_0x1a2ee0)return 0x0;const _0xa402b7=_0x1a2ee0['toDate'](),_0x414ba7=new Date(),_0x5baa1c=Math['abs'](_0x414ba7-_0xa402b7);return Math['ceil'](_0x5baa1c/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x1c6a80,_0x310104){const _0x5c8999=a33_0x4e33b4;try{const _0x3006c7=collection(db,'playersD3'),_0x461870=await getDocs(_0x3006c7),_0xb02583=[];_0x461870['forEach'](_0x1facd6=>{const _0x53259f=a33_0x4599;_0xb02583['push']({'id':_0x1facd6['id'],..._0x1facd6[_0x53259f(0x7a)]()});});const _0x373a41=_0xb02583['find'](_0x1c6abc=>_0x1c6abc['username']===_0x1c6a80),_0x5266c7=_0xb02583['find'](_0x3975a5=>_0x3975a5['username']===_0x310104);if(!_0x373a41||!_0x5266c7){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x373a41['position']>_0x5266c7['position']){const _0x3ae8b7=_0x5266c7[_0x5c8999(0x84)];for(const _0x845dc0 of _0xb02583){_0x845dc0['position']>=_0x5266c7['position']&&_0x845dc0[_0x5c8999(0x84)]<_0x373a41['position']&&_0x845dc0['username']!==_0x1c6a80&&await updateDoc(doc(db,'playersD3',_0x845dc0['id']),{'position':_0x845dc0['position']+0x1});}await updateDoc(doc(db,'playersD3',_0x373a41['id']),{'position':_0x3ae8b7});if(_0x3ae8b7===0x1){const _0x26d425=doc(db,'playersD3',_0x373a41['id']),_0x3083ec=await getDoc(_0x26d425);!_0x3083ec[_0x5c8999(0x7a)]()['firstPlaceDate']&&await updateDoc(_0x26d425,{'firstPlaceDate':Timestamp[_0x5c8999(0x6d)]()});}if(_0x5266c7['position']===0x1){const _0x127c41=doc(db,'playersD3',_0x5266c7['id']);await updateDoc(_0x127c41,{'firstPlaceDate':null});}}}catch(_0x14afdf){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x14afdf);}}async function updateLadderDisplayD3(_0x51e3a0){const _0x35c2e6=a33_0x4e33b4;_0x51e3a0['sort']((_0xb6787c,_0xb33e6d)=>_0xb6787c['position']-_0xb33e6d['position']);const _0x4e1087=document['querySelector'](_0x35c2e6(0xa1));if(!_0x4e1087)return;_0x4e1087['innerHTML']='';const _0xfbcdaf=_0x51e3a0[_0x35c2e6(0x95)](_0x59fc29=>_0x59fc29['username']),_0x4246f3=await fetchBatchMatchStatsD3(_0xfbcdaf),_0x53c656=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x53c656['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0xe0c661=_0x51e3a0['map'](_0x2cc1c9=>{const _0x1fb9da=_0x35c2e6,_0x3ca19d=_0x4246f3[_0x1fb9da(0x89)](_0x2cc1c9['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x2cc1c9,_0x3ca19d);})['join']('');_0x4e1087[_0x35c2e6(0x81)]=_0xe0c661,getPlayersLastEloChangesD3(_0xfbcdaf)[_0x35c2e6(0x94)](_0x2b08a0=>{const _0x2f61bc=new Map();_0x4e1087['querySelectorAll']('tr')['forEach']((_0x3764be,_0x52fba1)=>{const _0x47b193=a33_0x4599;_0x52fba1<_0xfbcdaf[_0x47b193(0xad)]&&_0x2f61bc['set'](_0xfbcdaf[_0x52fba1],_0x3764be);}),_0x2b08a0['forEach']((_0x17db5f,_0x426caa)=>{const _0x4ad897=a33_0x4599,_0x580800=_0x2f61bc['get'](_0x426caa);if(_0x580800&&_0x17db5f!==0x0){const _0x575599=_0x580800['querySelector']('td:nth-child(3)');if(_0x575599){const _0x4f12de=_0x17db5f>0x0?'+'+_0x17db5f:''+_0x17db5f,_0x38d9cc=_0x575599['querySelector'](_0x4ad897(0x96));_0x38d9cc&&(_0x38d9cc[_0x4ad897(0x8e)]=_0x4f12de,_0x38d9cc['style']['color']=_0x17db5f>0x0?'#4CAF50':_0x4ad897(0xaa),_0x38d9cc[_0x4ad897(0x99)]['fontWeight']=_0x4ad897(0xa6),_0x38d9cc['style']['fontSize']='0.85em',_0x38d9cc['style'][_0x4ad897(0x9c)]=_0x4ad897(0x7f),_0x38d9cc['style']['visibility']='visible',_0x38d9cc['style']['opacity']='1');}}});})['catch'](_0x5a0865=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x5a0865));}async function fetchBatchMatchStatsD3(_0x2831eb){const _0x21a45e=a33_0x4e33b4,_0x145c36=new Map();try{const _0x4dd076=collection(db,'approvedMatchesD3'),_0x1144ad=await getDocs(_0x4dd076);_0x1144ad['forEach'](_0x59c297=>{const _0x5878c6=a33_0x4599,_0x44a6e=_0x59c297[_0x5878c6(0x7a)]();if(_0x2831eb['includes'](_0x44a6e[_0x5878c6(0x7d)])){const _0xab0a24=_0x44a6e['winnerUsername'];!_0x145c36['has'](_0xab0a24)&&_0x145c36['set'](_0xab0a24,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x5e0d30=_0x145c36[_0x5878c6(0x89)](_0xab0a24);_0x5e0d30['wins']++,_0x5e0d30[_0x5878c6(0x7e)]++,_0x5e0d30['totalKills']+=parseInt(_0x44a6e[_0x5878c6(0xa2)])||0x0,_0x5e0d30[_0x5878c6(0xa4)]+=parseInt(_0x44a6e['loserScore'])||0x0;}if(_0x2831eb['includes'](_0x44a6e[_0x5878c6(0x9e)])){const _0x3bc27b=_0x44a6e['loserUsername'];!_0x145c36[_0x5878c6(0xb2)](_0x3bc27b)&&_0x145c36['set'](_0x3bc27b,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x22d178=_0x145c36['get'](_0x3bc27b);_0x22d178[_0x5878c6(0x80)]++,_0x22d178[_0x5878c6(0x7e)]++,_0x22d178[_0x5878c6(0xa3)]+=parseInt(_0x44a6e['loserScore'])||0x0,_0x22d178['totalDeaths']+=parseInt(_0x44a6e['winnerScore'])||0x0;}}),_0x145c36[_0x21a45e(0xb0)](_0x1e9e03=>{const _0x5db22=_0x21a45e;_0x1e9e03[_0x5db22(0x90)]=_0x1e9e03['totalDeaths']>0x0?(_0x1e9e03['totalKills']/_0x1e9e03['totalDeaths'])[_0x5db22(0x88)](0x2):_0x1e9e03[_0x5db22(0xa3)],_0x1e9e03['winRate']=_0x1e9e03[_0x5db22(0x7e)]>0x0?(_0x1e9e03['wins']/_0x1e9e03['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x55a7fd){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x55a7fd);}return _0x145c36;}function createPlayerRowD3(_0x433b8f,_0x103e71){const _0xf8a888=a33_0x4e33b4,_0x31aee6=parseFloat(_0x433b8f[_0xf8a888(0xb1)])||0x0;let _0x1af69c='gray';if(_0x31aee6>=0x7d0)_0x1af69c='#50C878';else{if(_0x31aee6>=0x708)_0x1af69c=_0xf8a888(0x76);else{if(_0x31aee6>=0x640)_0x1af69c=_0xf8a888(0x6e);else _0x31aee6>=0x578&&(_0x1af69c=_0xf8a888(0x77));}}let _0xda0f19='';return _0x433b8f[_0xf8a888(0x71)]&&(_0xda0f19=_0xf8a888(0x6f)+_0x433b8f['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x433b8f[_0xf8a888(0x71)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x433b8f['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x433b8f['username'])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x1af69c+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x433b8f['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xda0f19+_0xf8a888(0x8c)+_0x1af69c+_0xf8a888(0x9f)+_0x31aee6+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x103e71['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x103e71['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x103e71['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x103e71['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x103e71['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function a33_0x421c(){const _0x4e7059=['now','#C0C0C0','<img\x20src=\x22../images/flags/','console','country','gameMode','sort','timestamp','log','#FFD700','#CD7F32','eloHistoryD3','D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...','data','player','__proto__','winnerUsername','totalMatches','inline','losses','innerHTML','D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...','change','position','\x20ELO\x20change:\x20','error','pilot','toFixed','get','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','bind','textContent','find','kda','exception','filter','{}.constructor(\x22return\x20this\x22)(\x20)','then','map','.trend-indicator','toString','from','style','userProfiles','seconds','display','info','loserUsername',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','constructor','#ladder-d3\x20tbody','winnerScore','totalKills','totalDeaths','apply','bold','size','username','D3:\x20Found\x20','#F44336','set','newElo','length','playerUsername','previousElo','forEach','elo','has','D3:\x20Final\x20ELO\x20changes:'];a33_0x421c=function(){return _0x4e7059;};return a33_0x421c();}async function getPlayersLastEloChangesD3(_0x268782){const _0x9a98b7=a33_0x4e33b4,_0x5e5af1=new Map();_0x268782['forEach'](_0x58c3af=>_0x5e5af1['set'](_0x58c3af,0x0));try{console['log']('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x268782);const _0x3218b2=new Map(),_0x3a65ca=await getDocs(collection(db,'playersD3'));_0x3a65ca['forEach'](_0x57a7bd=>{const _0xe95c37=_0x57a7bd['data']();_0xe95c37['username']&&_0x3218b2['set'](_0x57a7bd['id'],_0xe95c37['username']);}),console['log']('D3:\x20Player\x20ID\x20mappings:',Array[_0x9a98b7(0x98)](_0x3218b2['entries']()));const _0x626e4a=collection(db,_0x9a98b7(0x78)),_0x3d9e1e=query(_0x626e4a,orderBy('timestamp','desc'),limit(0x64)),_0x49b8b5=await getDocs(_0x3d9e1e);_0x49b8b5['empty']?console[_0x9a98b7(0x75)](_0x9a98b7(0x79)):console['log']('D3:\x20Found\x20'+_0x49b8b5[_0x9a98b7(0xa7)]+'\x20entries\x20in\x20eloHistoryD3');const _0x545437=new Map();_0x49b8b5[_0x9a98b7(0xb0)](_0x2833fc=>{const _0x239b24=_0x9a98b7,_0x2a6bd1=_0x2833fc['data']();let _0x55612b=null;if(_0x2a6bd1[_0x239b24(0xa8)])_0x55612b=_0x2a6bd1[_0x239b24(0xa8)];else{if(_0x2a6bd1['playerUsername'])_0x55612b=_0x2a6bd1[_0x239b24(0xae)];else{if(_0x2a6bd1['player']&&typeof _0x2a6bd1['player']==='string')_0x55612b=_0x2a6bd1[_0x239b24(0x7b)];else{if(_0x2a6bd1['player']&&_0x3218b2[_0x239b24(0xb2)](_0x2a6bd1['player']))_0x55612b=_0x3218b2['get'](_0x2a6bd1['player']);else _0x2a6bd1['playerId']&&_0x3218b2[_0x239b24(0xb2)](_0x2a6bd1['playerId'])&&(_0x55612b=_0x3218b2[_0x239b24(0x89)](_0x2a6bd1['playerId']));}}}(_0x2a6bd1['username']==='pilot'||_0x2a6bd1[_0x239b24(0xae)]===_0x239b24(0x87)||_0x2a6bd1['player']&&_0x3218b2['get'](_0x2a6bd1[_0x239b24(0x7b)])==='pilot')&&console['log']('D3:\x20Found\x20pilot\x20entry:',_0x2a6bd1),_0x55612b&&_0x268782['includes'](_0x55612b)&&(!_0x545437['has'](_0x55612b)&&_0x545437[_0x239b24(0xab)](_0x55612b,[]),_0x545437['get'](_0x55612b)['push']({..._0x2a6bd1,'timestamp':_0x2a6bd1['timestamp']?.[_0x239b24(0x9b)]||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x545437['size']+'\x20players'),_0x545437[_0x9a98b7(0xb0)]((_0x3dd379,_0x5155c6)=>{const _0x4054f6=_0x9a98b7;if(_0x3dd379['length']>0x0){_0x3dd379[_0x4054f6(0x73)]((_0x539f38,_0x243805)=>_0x243805['timestamp']-_0x539f38['timestamp']);const _0x2fd252=_0x3dd379[_0x4054f6(0x8f)](_0xbda66c=>_0xbda66c['change']!==undefined||_0xbda66c['newElo']!==undefined&&_0xbda66c['previousElo']!==undefined);if(_0x2fd252){let _0x4a349e;if(_0x2fd252[_0x4054f6(0x83)]!==undefined)_0x4a349e=_0x2fd252['change'];else _0x2fd252['newElo']!==undefined&&_0x2fd252[_0x4054f6(0xaf)]!==undefined&&(_0x4a349e=_0x2fd252[_0x4054f6(0xac)]-_0x2fd252['previousElo']);_0x4a349e!==undefined&&(_0x5e5af1['set'](_0x5155c6,_0x4a349e),console[_0x4054f6(0x75)]('D3:\x20'+_0x5155c6+_0x4054f6(0x85)+_0x4a349e));}}});if(_0x545437['size']===0x0){console[_0x9a98b7(0x75)](_0x9a98b7(0x82));const _0x48308d=collection(db,'eloHistory'),_0x189048=query(_0x48308d,where(_0x9a98b7(0x72),'==','D3'),orderBy(_0x9a98b7(0x74),'desc'),limit(0x32));try{const _0x4b2aaf=await getDocs(_0x189048);console['log'](_0x9a98b7(0xa9)+_0x4b2aaf['size']+'\x20fallback\x20entries'),_0x4b2aaf['forEach'](_0x59656c=>{const _0x392160=_0x9a98b7,_0x5f368d=_0x59656c[_0x392160(0x7a)]();let _0x30b0ec=_0x5f368d['username']||_0x5f368d[_0x392160(0xae)];!_0x30b0ec&&_0x5f368d['player']&&_0x3218b2['has'](_0x5f368d['player'])&&(_0x30b0ec=_0x3218b2['get'](_0x5f368d['player']));if(_0x30b0ec&&_0x268782['includes'](_0x30b0ec)){const _0x1e2db9=_0x5f368d[_0x392160(0x83)]||(_0x5f368d['newElo']!==undefined&&_0x5f368d[_0x392160(0xaf)]!==undefined?_0x5f368d['newElo']-_0x5f368d[_0x392160(0xaf)]:0x0);_0x1e2db9!==0x0&&(_0x5e5af1['set'](_0x30b0ec,_0x1e2db9),console[_0x392160(0x75)]('D3:\x20'+_0x30b0ec+'\x20fallback\x20ELO\x20change:\x20'+_0x1e2db9));}});}catch(_0xb5ac66){console['log']('D3:\x20Fallback\x20query\x20failed:',_0xb5ac66);}}const _0x3e1a40=Array['from'](_0x5e5af1['entries']())[_0x9a98b7(0x92)](([_0x4a625d,_0x2cd6ed])=>_0x2cd6ed!==0x0);console['log'](_0x9a98b7(0xb3),_0x3e1a40);}catch(_0x53f7ab){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x53f7ab);}return _0x5e5af1;}export{displayLadderD3,updatePlayerPositions};