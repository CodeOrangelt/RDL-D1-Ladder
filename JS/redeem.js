function a46_0x4d0f(_0x529aa3,_0x13c506){const _0x1bc994=a46_0x70a4();return a46_0x4d0f=function(_0x2cba14,_0x31e8c5){_0x2cba14=_0x2cba14-0x19a;let _0x70a43b=_0x1bc994[_0x2cba14];return _0x70a43b;},a46_0x4d0f(_0x529aa3,_0x13c506);}const a46_0x5ec795=a46_0x4d0f,a46_0x2cba14=(function(){let _0x204ef0=!![];return function(_0x36e936,_0xadd1ee){const _0x32e4e2=_0x204ef0?function(){if(_0xadd1ee){const _0x24adff=_0xadd1ee['apply'](_0x36e936,arguments);return _0xadd1ee=null,_0x24adff;}}:function(){};return _0x204ef0=![],_0x32e4e2;};}()),a46_0x1bc994=a46_0x2cba14(this,function(){const _0x2c261a=a46_0x4d0f,_0x442a0b=function(){const _0x513b95=a46_0x4d0f;let _0x3452c2;try{_0x3452c2=Function('return\x20(function()\x20'+_0x513b95(0x19c)+');')();}catch(_0x47a1f1){_0x3452c2=window;}return _0x3452c2;},_0x3f599b=_0x442a0b(),_0x37c864=_0x3f599b['console']=_0x3f599b['console']||{},_0x334c88=['log',_0x2c261a(0x20a),'info','error','exception',_0x2c261a(0x1f3),'trace'];for(let _0x50e229=0x0;_0x50e229<_0x334c88['length'];_0x50e229++){const _0x292a6d=a46_0x2cba14['constructor']['prototype']['bind'](a46_0x2cba14),_0x43d518=_0x334c88[_0x50e229],_0x309a1e=_0x37c864[_0x43d518]||_0x292a6d;_0x292a6d['__proto__']=a46_0x2cba14[_0x2c261a(0x1ec)](a46_0x2cba14),_0x292a6d['toString']=_0x309a1e['toString']['bind'](_0x309a1e),_0x37c864[_0x43d518]=_0x292a6d;}});a46_0x1bc994();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':a46_0x5ec795(0x1a1),'description':'Only\x20the\x20best\x20get\x20this\x20one'},'emerald':{'price':0x3e8,'name':'Emerald','description':a46_0x5ec795(0x1b5)},'cockpit':{'price':0x4b0,'name':'Cockpit','description':'is\x20that...\x20Pfunk?'}},TOKENS={'pwr01':{'price':0x64,'name':a46_0x5ec795(0x19f),'description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':'powerup'},'fan':{'price':0x96,'name':'Fan','description':a46_0x5ec795(0x1f5),'image':'../images/tokens/Fan.gif','category':'fun'},'marker':{'price':0xfa,'name':a46_0x5ec795(0x224),'description':a46_0x5ec795(0x1cc),'image':'../images/tokens/Marker.gif','category':a46_0x5ec795(0x1de)},'laser':{'price':0x12c,'name':a46_0x5ec795(0x1fd),'description':a46_0x5ec795(0x1fc),'image':'../images/tokens/Laser.gif','category':a46_0x5ec795(0x22c)},'pbomb':{'price':0x15e,'name':'Proximity\x20Bomb','description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':'Devastating\x20fusion\x20weapon\x20technology','image':a46_0x5ec795(0x1d9),'category':'weapon'},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':a46_0x5ec795(0x230),'description':'A\x20mysterious\x20purple\x20blob\x20token','image':'../images/tokens/blob01.gif','category':a46_0x5ec795(0x1ab)},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':'weapon'},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':a46_0x5ec795(0x1f0),'image':'../images/tokens/cloak.gif','category':a46_0x5ec795(0x222)},'pwr02':{'price':0x258,'name':a46_0x5ec795(0x1e7),'description':a46_0x5ec795(0x1b4),'image':a46_0x5ec795(0x1a0),'category':'powerup'},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':a46_0x5ec795(0x20d),'image':'../images/tokens/Mercury.gif','category':'weapon'},'plasmablobl':{'price':0x258,'name':'Plasma\x20Blob','description':'A\x20mysterious\x20plasma\x20blob.','image':a46_0x5ec795(0x22b),'category':'blob'},'smissile':{'price':0x28a,'name':a46_0x5ec795(0x214),'description':'Intelligent\x20targeting\x20system','image':'../images/tokens/subgame/smissile.gif','category':a46_0x5ec795(0x22c)},'smartmine':{'price':0x2ee,'name':a46_0x5ec795(0x1b2),'description':a46_0x5ec795(0x1ed),'image':a46_0x5ec795(0x1c5),'category':'weapon'},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':a46_0x5ec795(0x1e9),'category':'weapon'},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':'Monitor\x20your\x20ship\x27s\x20energy\x20levels','image':'../images/tokens/gauge18.gif','category':'equipment'},'extralife':{'price':0x320,'name':'Extra\x20Life','description':'A\x20rare\x20extra\x20life\x20token.','image':'../images/tokens/Extralife.gif','category':'special'},'hostage':{'price':0x3b6,'name':'Hostage','description':a46_0x5ec795(0x226),'image':'../images/tokens/Hostage.gif','category':a46_0x5ec795(0x222)},'phoenix':{'price':0x3b6,'name':'Phoenix\x20Cannon','description':a46_0x5ec795(0x204),'image':'../images/tokens/Phoenix.gif','category':'weapon'},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':a46_0x5ec795(0x1af),'image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':a46_0x5ec795(0x1c1),'description':a46_0x5ec795(0x1ba),'image':a46_0x5ec795(0x1d8),'category':'powerup'},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':'The\x20final\x20blob\x20in\x20the\x20collection','image':'../images/tokens/blob03.gif','category':'blob'},'reactor':{'price':0x7d0,'name':'Reactor','description':'The\x20heart\x20of\x20every\x20mine.','image':'../images/tokens/Reactor.gif','category':'special'},'pyro':{'price':0xbb8,'name':'Pyro','description':'The\x20iconic\x20Pyro-GX\x20ship.','image':'../images/tokens/Pyro.gif','category':a46_0x5ec795(0x1df)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener'](a46_0x5ec795(0x20b),()=>{const _0x57a7c7=a46_0x5ec795;console['log']('🏪\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById']('store-content'),pointsDisplay=document['getElementById'](_0x57a7c7(0x1e6)),authWarning=document[_0x57a7c7(0x1ca)]('auth-warning'),initAuthListener(),buildStoreUI();});function a46_0x70a4(){const _0x2e5f18=['push','token','{}.constructor(\x22return\x20this\x22)(\x20)','error','\x20for\x20','Energy','../images/tokens/subgame/pwr02.gif','Gold','theme','theme_','message','background','getCurrentTheme','click','sign-in','textContent','Current\x20Theme','blob','userTokens','function','data','Another\x20enigmatic\x20blob\x20creature','includes','log','Smart\x20Mine','owned','Advanced\x20energy\x20storage\x20system','Emerald\x20City!','div','remove','❌\x20User\x20not\x20authenticated','can-afford','Become\x20invincible\x20for\x20a\x20short\x20time.','.theme-select-btn','\x20points','classList','Apply\x20Theme','tokens','Tokens\x20container\x20not\x20found','Invulnerability','permission-denied','toLocaleString','Please\x20sign\x20in\x20to\x20purchase\x20tokens','../images/tokens/Smartmine.gif','You\x20need\x20','entries','tokenId','visible','getElementById','displayLadder','Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','store-item\x20token-item','pointer','sale','currentUser','Error\x20loading\x20user\x20data:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20more\x20points.','Theme\x20system\x20not\x20found','display','code','Not\x20enough\x20points.\x20You\x20need\x20','../images/tokens/Invuln.gif','../images/tokens/subgame/fusion.gif','add','cannot-afford','username','style','fun','ship','✅\x20User\x20authenticated:','userProfiles','sign-in-free','points','[data-theme]','email','user-points','Shield\x20Orb','querySelector','../images/tokens/subgame/mmissile.gif','default','Owned','bind','A\x20cunning\x20explosive\x20device.','block','Equipped','Become\x20one\x20with\x20the\x20shadows','disabled','Sign\x20in\x20to\x20Apply','table','.token-equip-btn','Show\x20your\x20support\x20with\x20this\x20fan\x20token.','refreshUI','not-allowed','Unknown','confirm','Purchase\x20processing\x20error:','querySelectorAll','Classic\x20laser\x20weapon\x20token.','Laser','\x20theme\x20for\x20','.token-sell-btn','itemId','token_','isUserAdmin','floor','Fiery\x20phoenix\x20cannon\x20token.','closest','forEach','RedeemStore','uid','innerHTML','warn','DOMContentLoaded','warning','Fast\x20and\x20furious\x20missile\x20token.','\x20points?','\x20not\x20found','sign-in-paid','ThemeSystem','name','split','Smart\x20Missile','Failed\x20to\x20sell\x20token:\x20','inventory','var(--accent-color,\x20#2196F3)','Equip\x20','!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','Purchase\x20failed.\x20Please\x20try\x20again.','isAdmin','You\x20must\x20purchase\x20this\x20theme\x20first','cursor','unavailable',',\x20Inventory:\x20','store-message','createElement','special','info','Marker','Token\x20sale\x20failed:','Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','apply-theme','price','var(--success-color,\x20#4CAF50)','Token\x20','../images/tokens/Plasmablobl.gif','weapon','equippedToken','success','exists','Blob\x20Token\x201'];a46_0x70a4=function(){return _0x2e5f18;};return a46_0x70a4();}function initAuthListener(){onAuthStateChanged(auth,async _0x2e8222=>{const _0x137c19=a46_0x4d0f;if(_0x2e8222){console['log'](_0x137c19(0x1e0),_0x2e8222['displayName']||_0x2e8222['email']);if(authWarning)authWarning['style'][_0x137c19(0x1d5)]='none';if(storeContainer)storeContainer['style']['display']='block';await loadUserData(_0x2e8222),updateThemeButtons(),updateTokenButtons();}else{console['log'](_0x137c19(0x1b8));if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer[_0x137c19(0x1dd)]['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x137c19(0x202)]=![];}});}async function loadUserData(_0x5e781f){const _0x61b33b=a46_0x5ec795;try{const _0x3136a9=doc(db,'userProfiles',_0x5e781f[_0x61b33b(0x208)]),_0x204466=await getDoc(_0x3136a9);if(_0x204466['exists']()){const _0x309df8=_0x204466['data']();userData={'points':_0x309df8['points']||0x0,'inventory':_0x309df8['inventory']||[],'isAdmin':_0x309df8[_0x61b33b(0x21b)]||![],'equippedToken':_0x309df8[_0x61b33b(0x22d)]||null},pointsDisplay&&(pointsDisplay[_0x61b33b(0x1a9)]=userData['points']['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('👑\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+_0x61b33b(0x21f)+userData[_0x61b33b(0x216)]['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||'none'));}else await setDoc(_0x3136a9,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x5e781f['displayName']||_0x5e781f[_0x61b33b(0x1e5)]?.[_0x61b33b(0x213)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x43553d){console['error'](_0x61b33b(0x1d1),_0x43553d);}}function userOwnsTheme(_0x4e224e){if(THEMES[_0x4e224e]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x4e224e);}function userOwnsToken(_0x2c4d8e){const _0x408df5=a46_0x5ec795;return userData['inventory']['includes'](_0x408df5(0x201)+_0x2c4d8e);}function userHasTokenEquipped(_0x31a80c){return userData['equippedToken']===_0x31a80c;}function getEquippedToken(){return userData['equippedToken']||null;}async function purchaseTheme(_0x548b4f){const _0x191045=a46_0x5ec795,_0x1b2631=auth[_0x191045(0x1d0)];if(!_0x1b2631)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x10c511=THEMES[_0x548b4f];if(!_0x10c511)return console['error']('Theme\x20'+_0x548b4f+'\x20not\x20found'),![];if(userData['points']<_0x10c511['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x10c511[_0x191045(0x228)]-userData['points'])+'\x20more\x20points.',_0x191045(0x19d)),![];if(userOwnsTheme(_0x548b4f))return showMessage('You\x20already\x20own\x20the\x20'+_0x10c511['name']+'\x20theme',_0x191045(0x223)),![];try{return await processPurchase(_0x548b4f,_0x10c511,'theme');}catch(_0x104f37){return console[_0x191045(0x19d)]('Theme\x20purchase\x20failed:',_0x104f37),showMessage(_0x191045(0x21a),'error'),![];}}async function purchaseToken(_0x352d6f){const _0x46b02d=a46_0x5ec795,_0x4d210d=auth['currentUser'];if(!_0x4d210d)return showMessage(_0x46b02d(0x1c4),_0x46b02d(0x19d)),![];const _0x3ed1fd=TOKENS[_0x352d6f];if(!_0x3ed1fd)return console['error']('Token\x20'+_0x352d6f+_0x46b02d(0x20f)),![];if(userData['points']<_0x3ed1fd[_0x46b02d(0x228)])return showMessage(_0x46b02d(0x1d7)+(_0x3ed1fd[_0x46b02d(0x228)]-userData[_0x46b02d(0x1e3)])+_0x46b02d(0x1d3),'error'),![];if(userOwnsToken(_0x352d6f))return showMessage('You\x20already\x20own\x20the\x20'+_0x3ed1fd[_0x46b02d(0x212)]+'\x20token','info'),![];try{return await processPurchase(_0x352d6f,_0x3ed1fd,_0x46b02d(0x19b));}catch(_0x372c5b){return console[_0x46b02d(0x19d)]('Token\x20purchase\x20failed:',_0x372c5b),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x46b02d(0x19d)),![];}}async function processPurchase(_0x50f8ab,_0x217f3b,_0x9e1148){const _0xd3fdb2=a46_0x5ec795,_0x30a836=auth['currentUser'];try{const _0x4d3a9d=doc(db,'userProfiles',_0x30a836['uid']),_0x13130d=await getDoc(_0x4d3a9d);if(!_0x13130d['exists']())return showMessage('User\x20profile\x20not\x20found',_0xd3fdb2(0x19d)),![];const _0x245f0d=_0x13130d['data'](),_0x40aa5e=_0x245f0d['points']||0x0,_0x366423=_0x245f0d['inventory']||[];if(_0x40aa5e<_0x217f3b[_0xd3fdb2(0x228)])return showMessage('Insufficient\x20points',_0xd3fdb2(0x19d)),![];if(_0x366423['includes'](_0x9e1148+'_'+_0x50f8ab))return showMessage('You\x20already\x20own\x20this\x20'+_0x9e1148,'info'),![];const _0x1331b2=_0x40aa5e-_0x217f3b['price'],_0x3f9ea1=[..._0x366423,_0x9e1148+'_'+_0x50f8ab];await updateDoc(_0x4d3a9d,{'points':_0x1331b2,'inventory':_0x3f9ea1,'lastPurchase':serverTimestamp()});if(_0x9e1148==='token')try{const _0x752858=doc(db,'userTokens',_0x30a836['uid']),_0x17ec9d=await getDoc(_0x752858);let _0x4f25ea=[];_0x17ec9d['exists']()&&(_0x4f25ea=_0x17ec9d['data']()['tokens']||[]);const _0x3563c8=new Date();_0x4f25ea[_0xd3fdb2(0x19a)]({'tokenId':_0x50f8ab,'tokenName':_0x217f3b[_0xd3fdb2(0x212)],'tokenImage':_0x217f3b['image'],'category':_0x217f3b['category'],'purchasedAt':_0x3563c8,'price':_0x217f3b['price'],'equipped':![]}),await setDoc(_0x752858,{'userId':_0x30a836['uid'],'username':_0x245f0d[_0xd3fdb2(0x1dc)]||_0x30a836['displayName']||_0xd3fdb2(0x1f8),'tokens':_0x4f25ea,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache==='function'&&clearTokenCache(_0x30a836['uid']),console['log']('✅\x20Token\x20'+_0x50f8ab+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x4ebf3e){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:',_0x4ebf3e),_0x4ebf3e[_0xd3fdb2(0x1d6)]==='permission-denied'?console['log']('🔧\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console['error']('Unexpected\x20token\x20error:',_0x4ebf3e);}try{await addDoc(collection(db,'transactions'),{'userId':_0x30a836['uid'],'userEmail':_0x30a836['email'],'itemId':_0x9e1148+'_'+_0x50f8ab,'itemTitle':_0x217f3b[_0xd3fdb2(0x212)],'price':_0x217f3b['price'],'type':'purchase','category':_0x9e1148,'timestamp':serverTimestamp()});}catch(_0x4fa229){console['warn']('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x4fa229);}return userData['points']=_0x1331b2,userData[_0xd3fdb2(0x216)]=_0x3f9ea1,pointsDisplay&&(pointsDisplay['textContent']=userData[_0xd3fdb2(0x1e3)]['toLocaleString']()),updateTokenButtons(),_0x9e1148==='theme'&&updateThemeButtons(),console['log']('✅\x20Purchased\x20'+_0x217f3b['name']+_0xd3fdb2(0x19e)+_0x217f3b['price']+_0xd3fdb2(0x1bc)),showMessage('Successfully\x20purchased\x20'+_0x217f3b['name']+_0xd3fdb2(0x219),_0xd3fdb2(0x22e)),!![];}catch(_0x503cd9){console['error'](_0xd3fdb2(0x1fa),_0x503cd9);if(_0x503cd9[_0xd3fdb2(0x1d6)]==='permission-denied')showMessage('Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','error');else{if(_0x503cd9[_0xd3fdb2(0x1d6)]===_0xd3fdb2(0x21e))showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.','error');else _0x503cd9[_0xd3fdb2(0x1d6)]==='unauthenticated'?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.','error'):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0xd3fdb2(0x19d));}return![];}}async function equipToken(_0x4729c3){const _0x12ceaa=a46_0x5ec795,_0x11541a=auth['currentUser'];if(!_0x11541a)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens','error'),![];const _0xa16e59=TOKENS[_0x4729c3];if(!_0xa16e59)return console[_0x12ceaa(0x19d)]('Token\x20'+_0x4729c3+'\x20not\x20found'),![];if(!userOwnsToken(_0x4729c3))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','error'),![];try{const _0x5c3440=doc(db,'userProfiles',_0x11541a['uid']);await updateDoc(_0x5c3440,{'equippedToken':_0x4729c3,'lastTokenEquip':serverTimestamp()});try{const _0x151df2=doc(db,_0x12ceaa(0x1ac),_0x11541a['uid']),_0x408526=await getDoc(_0x151df2);if(_0x408526['exists']()){const _0x1d6a76=_0x408526['data'](),_0x8aba5c=_0x1d6a76['tokens']||[],_0x13ac07=_0x8aba5c['map'](_0x184471=>({..._0x184471,'equipped':_0x184471['tokenId']===_0x4729c3}));await updateDoc(_0x151df2,{'tokens':_0x13ac07,'equippedToken':_0x4729c3,'lastUpdated':serverTimestamp()});}}catch(_0xd3618f){console[_0x12ceaa(0x20a)]('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0xd3618f);}return userData[_0x12ceaa(0x22d)]=_0x4729c3,typeof clearTokenCache===_0x12ceaa(0x1ad)&&(clearTokenCache(_0x11541a['uid']),clearTokenCache()),setTimeout(()=>{const _0x5a4fd2=_0x12ceaa;window[_0x5a4fd2(0x1cb)]&&typeof window['displayLadder']==='function'&&(console['log']('🔄\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window['RedeemStore']['refreshUI']==='function'&&window[_0x5a4fd2(0x207)]['refreshUI']();},0x1f4),console['log']('✅\x20Equipped\x20token:\x20'+_0xa16e59[_0x12ceaa(0x212)]),showMessage(_0xa16e59['name']+'\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0xa21bc5){return console['error']('Token\x20equip\x20failed:',_0xa21bc5),_0xa21bc5[_0x12ceaa(0x1d6)]===_0x12ceaa(0x1c2)?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.',_0x12ceaa(0x20c)):showMessage('Failed\x20to\x20equip\x20token:\x20'+_0xa21bc5['message'],'error'),![];}}async function unequipToken(){const _0x36783f=a46_0x5ec795,_0x59414d=auth['currentUser'];if(!_0x59414d)return showMessage('Please\x20sign\x20in\x20to\x20unequip\x20tokens',_0x36783f(0x19d)),![];if(!userData['equippedToken'])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x44fd71=doc(db,'userProfiles',_0x59414d['uid']);await updateDoc(_0x44fd71,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0xa85455=doc(db,_0x36783f(0x1ac),_0x59414d['uid']),_0xe75f41=await getDoc(_0xa85455);if(_0xe75f41['exists']()){const _0x141b8f=_0xe75f41[_0x36783f(0x1ae)](),_0x1c7f12=_0x141b8f[_0x36783f(0x1bf)]||[],_0x185507=_0x1c7f12['map'](_0x44ed39=>({..._0x44ed39,'equipped':![]}));await updateDoc(_0xa85455,{'tokens':_0x185507,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache===_0x36783f(0x1ad)&&(clearTokenCache(_0x59414d['uid']),clearTokenCache()),setTimeout(()=>{const _0x39c284=_0x36783f;window['displayLadder']&&typeof window['displayLadder']==='function'&&(console[_0x39c284(0x1b1)]('🔄\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x39c284(0x207)][_0x39c284(0x1f6)]==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('✅\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x36b24b){return console[_0x36783f(0x19d)]('Token\x20unequip\x20failed:',_0x36b24b),showMessage('Failed\x20to\x20unequip\x20token:\x20'+_0x36b24b[_0x36783f(0x1a4)],'error'),![];}}async function sellToken(_0x483080){const _0x5ee9de=a46_0x5ec795,_0xf11e4d=auth['currentUser'];if(!_0xf11e4d)return showMessage('Please\x20sign\x20in\x20to\x20sell\x20tokens',_0x5ee9de(0x19d)),![];if(!userData[_0x5ee9de(0x21b)])return showMessage('Only\x20admins\x20can\x20sell\x20tokens',_0x5ee9de(0x19d)),![];const _0x1f788e=TOKENS[_0x483080];if(!_0x1f788e)return console['error'](_0x5ee9de(0x22a)+_0x483080+'\x20not\x20found'),![];if(!userOwnsToken(_0x483080))return showMessage('You\x20don\x27t\x20own\x20this\x20token',_0x5ee9de(0x19d)),![];try{const _0x1a73f2=doc(db,_0x5ee9de(0x1e1),_0xf11e4d['uid']),_0x1601b7=await getDoc(_0x1a73f2),_0x11afeb=_0x1601b7['data'](),_0x5834b3=Math['floor'](_0x1f788e[_0x5ee9de(0x228)]*0.5),_0x18b956=(_0x11afeb[_0x5ee9de(0x1e3)]||0x0)+_0x5834b3,_0x3dbd4f=(_0x11afeb[_0x5ee9de(0x216)]||[])['filter'](_0x16a1d4=>_0x16a1d4!=='token_'+_0x483080),_0xc2d104=_0x11afeb['equippedToken']===_0x483080?null:_0x11afeb['equippedToken'];await updateDoc(_0x1a73f2,{'points':_0x18b956,'inventory':_0x3dbd4f,'equippedToken':_0xc2d104,'lastSale':serverTimestamp()});const _0x3d61e6=doc(db,'userTokens',_0xf11e4d['uid']),_0x45058e=await getDoc(_0x3d61e6);if(_0x45058e[_0x5ee9de(0x22f)]()){const _0x5382cc=_0x45058e[_0x5ee9de(0x1ae)](),_0x3ef875=_0x5382cc[_0x5ee9de(0x1bf)]||[],_0x791b63=_0x3ef875['filter'](_0x5c0a00=>_0x5c0a00[_0x5ee9de(0x1c8)]!==_0x483080);await updateDoc(_0x3d61e6,{'tokens':_0x791b63,'equippedToken':_0xc2d104,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0xf11e4d['uid'],'userEmail':_0xf11e4d['email'],'itemId':'token_'+_0x483080,'itemTitle':_0x1f788e[_0x5ee9de(0x212)],'refund':_0x5834b3,'originalPrice':_0x1f788e['price'],'type':_0x5ee9de(0x1cf),'category':'token','timestamp':serverTimestamp()}),userData['points']=_0x18b956,userData['inventory']=_0x3dbd4f,userData['equippedToken']=_0xc2d104,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x5ee9de(0x1e3)][_0x5ee9de(0x1c3)]()),typeof clearTokenCache==='function'&&clearTokenCache(_0xf11e4d['uid']),console['log']('✅\x20Sold\x20token\x20'+_0x1f788e[_0x5ee9de(0x212)]+_0x5ee9de(0x19e)+_0x5834b3+'\x20points'),showMessage('Sold\x20'+_0x1f788e['name']+'\x20for\x20'+_0x5834b3+'\x20points\x20(50%\x20refund)','success'),!![];}catch(_0x24065f){return console['error'](_0x5ee9de(0x225),_0x24065f),showMessage(_0x5ee9de(0x215)+_0x24065f[_0x5ee9de(0x1a4)],'error'),![];}}function applyTheme(_0x282cb1){const _0x23b33d=a46_0x5ec795;if(!userOwnsTheme(_0x282cb1))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window[_0x23b33d(0x211)]['switchTheme'](_0x282cb1),showMessage((THEMES[_0x282cb1]?.['name']||_0x282cb1)+'\x20theme\x20applied!','success'),!![]):(console['error'](_0x23b33d(0x1d4)),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x3e3568=a46_0x5ec795,_0x308fe5=document[_0x3e3568(0x1e8)]('.themes-grid');if(!_0x308fe5){console['error']('Themes\x20container\x20not\x20found');return;}_0x308fe5['innerHTML']='',Object['entries'](THEMES)[_0x3e3568(0x206)](([_0xacc7c3,_0x363695])=>{const _0x2496d0=_0x3e3568,_0x247f96=document[_0x2496d0(0x221)]('div');_0x247f96['className']='store-item',_0x247f96['dataset']['theme']=_0xacc7c3,_0x247f96['dataset'][_0x2496d0(0x200)]=_0x2496d0(0x1a3)+_0xacc7c3,_0x247f96['dataset']['price']=_0x363695['price'],_0x247f96['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0xacc7c3+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x363695['price']===0x0?'FREE':_0x363695['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x363695[_0x2496d0(0x212)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x363695['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x308fe5['appendChild'](_0x247f96);}),setupThemeButtons();}function buildTokenItems(){const _0x1377d9=a46_0x5ec795,_0x5d3a38=document[_0x1377d9(0x1e8)]('.tokens-grid');if(!_0x5d3a38){console['error'](_0x1377d9(0x1c0));return;}_0x5d3a38[_0x1377d9(0x209)]='',Object[_0x1377d9(0x1c7)](TOKENS)['forEach'](([_0x2e7f67,_0x51be78])=>{const _0x329aac=_0x1377d9,_0x863bab=document[_0x329aac(0x221)](_0x329aac(0x1b6));_0x863bab['className']=_0x329aac(0x1cd),_0x863bab['dataset']['token']=_0x2e7f67,_0x863bab['dataset']['itemId']='token_'+_0x2e7f67,_0x863bab['dataset'][_0x329aac(0x228)]=_0x51be78['price'];const _0x2f0fbc=userData['isAdmin']&&userOwnsToken(_0x2e7f67)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math['floor'](_0x51be78['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x863bab['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x51be78['image']+'\x22\x20alt=\x22'+_0x51be78['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x51be78[_0x329aac(0x228)]+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2f0fbc+_0x329aac(0x1d2),_0x5d3a38['appendChild'](_0x863bab);}),setupTokenButtons();}function setupThemeButtons(){const _0x308c45=a46_0x5ec795,_0x4afb21=document['querySelectorAll'](_0x308c45(0x1bb));_0x4afb21['forEach'](_0x3fd1af=>{const _0xdc6d83=_0x308c45;_0x3fd1af['addEventListener'](_0xdc6d83(0x1a7),async _0x5323e3=>{const _0x3864c0=_0xdc6d83;_0x5323e3['preventDefault']();const _0x106ecf=auth[_0x3864c0(0x1d0)];if(!_0x106ecf){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x532e07=_0x3fd1af['closest'](_0x3864c0(0x1e4)),_0xb4468c=_0x532e07['dataset'][_0x3864c0(0x1a2)],_0x2fa06f=THEMES[_0xb4468c];if(!_0x2fa06f){console['error']('Theme\x20'+_0xb4468c+'\x20not\x20found');return;}console['log']('Theme\x20clicked:\x20'+_0x2fa06f[_0x3864c0(0x212)]+'\x20('+_0xb4468c+')');if(_0x3fd1af['disabled']){_0x2fa06f['price']>0x0&&showMessage('You\x20need\x20'+_0x2fa06f[_0x3864c0(0x228)]+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x3fd1af[_0x3864c0(0x1a9)]==='Current\x20Theme'){showMessage(_0x2fa06f['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x3fd1af[_0x3864c0(0x1a9)]===_0x3864c0(0x1be)){applyTheme(_0xb4468c),updateThemeButtons();return;}if(_0x3fd1af[_0x3864c0(0x1a9)]['includes']('Buy')){const _0x2b3aac=window[_0x3864c0(0x1f9)]('Purchase\x20'+_0x2fa06f['name']+_0x3864c0(0x1fe)+_0x2fa06f[_0x3864c0(0x228)]+'\x20points?');if(!_0x2b3aac)return;const _0x533c5c=await purchaseTheme(_0xb4468c);_0x533c5c&&(showMessage(_0x2fa06f['name']+'\x20theme\x20purchased!',_0x3864c0(0x22e)),applyTheme(_0xb4468c),updateThemeButtons());return;}userOwnsTheme(_0xb4468c)?applyTheme(_0xb4468c):showMessage(_0x3864c0(0x21c),'error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x382c95=a46_0x5ec795,_0x59a748=document['querySelectorAll']('.token-select-btn'),_0x51bbc5=document['querySelectorAll']('.token-equip-btn'),_0x1143ce=document[_0x382c95(0x1fb)]('.token-sell-btn');_0x59a748['forEach'](_0x36b8c5=>{const _0x221ad9=_0x382c95;_0x36b8c5['addEventListener'](_0x221ad9(0x1a7),async _0x517d80=>{const _0x3c6a07=_0x221ad9;_0x517d80['preventDefault']();const _0x762974=auth['currentUser'];if(!_0x762974){showMessage(_0x3c6a07(0x1c4),'error');return;}const _0x383ea6=_0x36b8c5['closest']('[data-token]'),_0x1f65ac=_0x383ea6['dataset'][_0x3c6a07(0x19b)],_0x2e5825=TOKENS[_0x1f65ac];if(!_0x2e5825){console['error'](_0x3c6a07(0x22a)+_0x1f65ac+'\x20not\x20found');return;}console['log']('Token\x20clicked:\x20'+_0x2e5825['name']+'\x20('+_0x1f65ac+')');if(_0x36b8c5['disabled']){showMessage(_0x3c6a07(0x1c6)+_0x2e5825['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x36b8c5[_0x3c6a07(0x1a9)]==='Owned'){showMessage('You\x20already\x20own\x20the\x20'+_0x2e5825['name']+'\x20token',_0x3c6a07(0x223));return;}if(_0x36b8c5['textContent'][_0x3c6a07(0x1b0)]('Purchase')||_0x36b8c5[_0x3c6a07(0x1a9)]['includes']('Buy')){const _0x3bdabf=window['confirm']('Purchase\x20'+_0x2e5825['name']+'\x20token\x20for\x20'+_0x2e5825[_0x3c6a07(0x228)]+_0x3c6a07(0x20e));if(!_0x3bdabf)return;const _0x2b3470=await purchaseToken(_0x1f65ac);_0x2b3470&&updateTokenButtons();return;}});}),_0x51bbc5['forEach'](_0x3fe51b=>{const _0x45b2bb=_0x382c95;_0x3fe51b['addEventListener'](_0x45b2bb(0x1a7),async _0x233da4=>{const _0x2ac239=_0x45b2bb;_0x233da4['preventDefault']();const _0xf9caac=_0x3fe51b['closest']('[data-token]'),_0x2f872c=_0xf9caac['dataset']['token'],_0x56acb5=TOKENS[_0x2f872c];if(_0x3fe51b['textContent']==='Equipped'){const _0x1f7c91=window['confirm']('Unequip\x20'+_0x56acb5[_0x2ac239(0x212)]+'?');if(!_0x1f7c91)return;const _0x5a1fac=await unequipToken();_0x5a1fac&&updateTokenButtons();}else{const _0x36e152=window[_0x2ac239(0x1f9)](_0x2ac239(0x218)+_0x56acb5[_0x2ac239(0x212)]+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x36e152)return;const _0x12d3b0=await equipToken(_0x2f872c);_0x12d3b0&&updateTokenButtons();}});}),_0x1143ce['forEach'](_0x13c937=>{_0x13c937['addEventListener']('click',async _0x21e775=>{const _0x18220c=a46_0x4d0f;_0x21e775['preventDefault']();const _0x5b80a0=_0x13c937[_0x18220c(0x205)]('[data-token]'),_0x3e65a2=_0x5b80a0['dataset']['token'],_0x3dd8b1=TOKENS[_0x3e65a2],_0x682616=Math[_0x18220c(0x203)](_0x3dd8b1[_0x18220c(0x228)]*0.5),_0x3c44e1=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x3dd8b1['name']+_0x18220c(0x19e)+_0x682616+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x3c44e1)return;const _0x1241d9=await sellToken(_0x3e65a2);_0x1241d9&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x2733b3=a46_0x5ec795,_0x141142=window['ThemeSystem']?window['ThemeSystem'][_0x2733b3(0x1a6)]():'default',_0x2da866=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')['forEach'](_0x493e6a=>{const _0x3cdd35=_0x2733b3,_0x2cfb35=_0x493e6a['closest'](_0x3cdd35(0x1e4)),_0x5bca74=_0x2cfb35['dataset']['theme'],_0x30e8df=THEMES[_0x5bca74];if(!_0x30e8df)return;_0x493e6a[_0x3cdd35(0x1f1)]=![],_0x493e6a['style']['opacity']='',_0x493e6a['style']['cursor']='pointer',_0x493e6a['classList']['remove']('current-theme',_0x3cdd35(0x227),'can-afford','cannot-afford',_0x3cdd35(0x1e2),_0x3cdd35(0x210));if(!_0x2da866){_0x30e8df[_0x3cdd35(0x228)]===0x0?(_0x493e6a[_0x3cdd35(0x1a9)]=_0x3cdd35(0x1f2),_0x493e6a['classList'][_0x3cdd35(0x1da)]('sign-in-free')):(_0x493e6a['textContent']='Sign\x20in\x20to\x20Purchase',_0x493e6a['disabled']=!![],_0x493e6a['style']['opacity']='0.7',_0x493e6a['classList']['add']('sign-in-paid'));return;}if(_0x5bca74===_0x141142){_0x493e6a['textContent']=_0x3cdd35(0x1aa),_0x493e6a[_0x3cdd35(0x1bd)][_0x3cdd35(0x1da)]('current-theme'),_0x493e6a[_0x3cdd35(0x1f1)]=!![],_0x493e6a[_0x3cdd35(0x1dd)]['cursor']='default';return;}if(userOwnsTheme(_0x5bca74)){_0x493e6a['textContent']=_0x3cdd35(0x1be),_0x493e6a['classList']['add']('apply-theme');return;}if(userData['points']>=_0x30e8df[_0x3cdd35(0x228)]){_0x493e6a['textContent']='Buy\x20for\x20'+_0x30e8df['price']+'\x20Points',_0x493e6a['classList']['add'](_0x3cdd35(0x1b9));return;}_0x493e6a['textContent']='Need\x20'+_0x30e8df['price']+'\x20Points',_0x493e6a['classList'][_0x3cdd35(0x1da)](_0x3cdd35(0x1db)),_0x493e6a['style']['opacity']='0.5',_0x493e6a['disabled']=!![],_0x493e6a['style'][_0x3cdd35(0x21d)]=_0x3cdd35(0x1f7);});}function updateTokenButtons(){const _0x20a962=auth['currentUser'];document['querySelectorAll']('.token-select-btn')['forEach'](_0x781df8=>{const _0x2f0bea=a46_0x4d0f,_0x249d87=_0x781df8[_0x2f0bea(0x205)]('[data-token]'),_0x13b069=_0x249d87['dataset']['token'],_0x2748dc=TOKENS[_0x13b069],_0x306dbd=_0x249d87['querySelector'](_0x2f0bea(0x1f4)),_0x8f5120=_0x249d87[_0x2f0bea(0x1e8)](_0x2f0bea(0x1ff));if(!_0x2748dc)return;_0x781df8['disabled']=![],_0x781df8['style']['opacity']='',_0x781df8['style']['cursor']='pointer';_0x306dbd&&(_0x306dbd['style']['display']='none',_0x306dbd['disabled']=![],_0x306dbd['style']['opacity']='',_0x306dbd[_0x2f0bea(0x1bd)][_0x2f0bea(0x1b7)]('equipped','can-equip'));_0x8f5120&&(_0x8f5120['style']['display']='none');_0x781df8[_0x2f0bea(0x1bd)]['remove']('owned',_0x2f0bea(0x1b9),'cannot-afford',_0x2f0bea(0x1a8));if(!_0x20a962){_0x781df8[_0x2f0bea(0x1a9)]='Sign\x20in\x20to\x20Purchase',_0x781df8[_0x2f0bea(0x1f1)]=!![],_0x781df8['style']['opacity']='0.7',_0x781df8[_0x2f0bea(0x1bd)][_0x2f0bea(0x1da)]('sign-in');return;}if(userOwnsToken(_0x13b069)){_0x781df8['textContent']=_0x2f0bea(0x1eb),_0x781df8['classList']['add'](_0x2f0bea(0x1b3)),_0x781df8['disabled']=!![],_0x781df8[_0x2f0bea(0x1dd)]['cursor']=_0x2f0bea(0x1ea),_0x781df8['style']['background']=_0x2f0bea(0x229);_0x306dbd&&(_0x306dbd[_0x2f0bea(0x1dd)][_0x2f0bea(0x1d5)]=_0x2f0bea(0x1ee),userHasTokenEquipped(_0x13b069)?(_0x306dbd['textContent']=_0x2f0bea(0x1ef),_0x306dbd[_0x2f0bea(0x1bd)]['add']('equipped'),_0x306dbd[_0x2f0bea(0x1dd)]['background']=_0x2f0bea(0x217),_0x306dbd['style'][_0x2f0bea(0x21d)]=_0x2f0bea(0x1ce)):(_0x306dbd['textContent']='Equip',_0x306dbd['classList']['add']('can-equip'),_0x306dbd[_0x2f0bea(0x1dd)][_0x2f0bea(0x1a5)]='var(--info-color,\x20#17a2b8)',_0x306dbd['style'][_0x2f0bea(0x21d)]='pointer'));_0x8f5120&&userData['isAdmin']&&(_0x8f5120['style']['display']=_0x2f0bea(0x1ee));return;}if(userData[_0x2f0bea(0x1e3)]>=_0x2748dc['price']){_0x781df8['textContent']='Buy\x20for\x20'+_0x2748dc['price']+'\x20Points',_0x781df8['classList'][_0x2f0bea(0x1da)]('can-afford'),_0x781df8['style'][_0x2f0bea(0x1a5)]='';return;}_0x781df8['textContent']='Need\x20'+_0x2748dc[_0x2f0bea(0x228)]+'\x20Points',_0x781df8['classList']['add']('cannot-afford'),_0x781df8[_0x2f0bea(0x1dd)]['opacity']='0.5',_0x781df8['disabled']=!![],_0x781df8[_0x2f0bea(0x1dd)][_0x2f0bea(0x21d)]=_0x2f0bea(0x1f7),_0x781df8['style']['background']='var(--muted-color,\x20#757575)';});}function showMessage(_0x444978,_0x292202='info'){const _0x1eba2e=a46_0x5ec795,_0x1656cc=document[_0x1eba2e(0x1ca)]('store-message');_0x1656cc&&_0x1656cc['remove']();const _0x5aa9c4=document['createElement']('div');_0x5aa9c4['id']=_0x1eba2e(0x220),_0x5aa9c4['className']='store-message\x20store-message-'+_0x292202,_0x5aa9c4['textContent']=_0x444978,document['body']['appendChild'](_0x5aa9c4),requestAnimationFrame(()=>{const _0x59d31d=_0x1eba2e;_0x5aa9c4['classList'][_0x59d31d(0x1da)](_0x59d31d(0x1c9));}),setTimeout(()=>{_0x5aa9c4['classList']['remove']('visible'),setTimeout(()=>{_0x5aa9c4['parentNode']&&_0x5aa9c4['remove']();},0x12c);},0xfa0);}window[a46_0x5ec795(0x207)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log']('🏪\x20Redeem\x20store\x20loaded');