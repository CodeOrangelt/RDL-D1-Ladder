const a4_0x548a45=a4_0xf849,a4_0x44a51d=(function(){let _0x4f2ab4=!![];return function(_0x9ba186,_0x254185){const _0x46fa57=_0x4f2ab4?function(){const _0x3cb9ec=a4_0xf849;if(_0x254185){const _0x23ba6b=_0x254185[_0x3cb9ec(0x1c6)](_0x9ba186,arguments);return _0x254185=null,_0x23ba6b;}}:function(){};return _0x4f2ab4=![],_0x46fa57;};}()),a4_0x185b1c=a4_0x44a51d(this,function(){const _0x3c6a0e=a4_0xf849,_0x35d1ae=function(){const _0xf11d25=a4_0xf849;let _0x559d78;try{_0x559d78=Function(_0xf11d25(0x1d6)+_0xf11d25(0x1d0)+');')();}catch(_0x244abd){_0x559d78=window;}return _0x559d78;},_0x2adc06=_0x35d1ae(),_0x1cc28d=_0x2adc06[_0x3c6a0e(0x1c7)]=_0x2adc06[_0x3c6a0e(0x1c7)]||{},_0x9af24f=[_0x3c6a0e(0x1e2),_0x3c6a0e(0x1d2),_0x3c6a0e(0x1da),_0x3c6a0e(0x1c2),_0x3c6a0e(0x1d5),_0x3c6a0e(0x1d1),_0x3c6a0e(0x1e8)];for(let _0x595409=0x0;_0x595409<_0x9af24f[_0x3c6a0e(0x1e7)];_0x595409++){const _0x58fc76=a4_0x44a51d[_0x3c6a0e(0x1c1)][_0x3c6a0e(0x1e5)][_0x3c6a0e(0x1c3)](a4_0x44a51d),_0x39dcff=_0x9af24f[_0x595409],_0x228db6=_0x1cc28d[_0x39dcff]||_0x58fc76;_0x58fc76[_0x3c6a0e(0x1cf)]=a4_0x44a51d[_0x3c6a0e(0x1c3)](a4_0x44a51d),_0x58fc76[_0x3c6a0e(0x1c0)]=_0x228db6[_0x3c6a0e(0x1c0)][_0x3c6a0e(0x1c3)](_0x228db6),_0x1cc28d[_0x39dcff]=_0x58fc76;}});function a4_0xf849(_0x2cc448,_0x547513){_0x2cc448=_0x2cc448-0x1bc;const _0x185b1c=a4_0x5b2c();let _0x44a51d=_0x185b1c[_0x2cc448];return _0x44a51d;}function a4_0x5b2c(){const _0xbb5ec9=['userProfiles','data','role','empty','toString','constructor','error','bind','email','toLowerCase','apply','console','isAdmin','admin@ladder.com','uid','roleName','Error\x20in\x20isAdminWithRoles:','playersD3','creative\x20lead','__proto__','{}.constructor(\x22return\x20this\x22)(\x20)','table','warn','exists','now','exception','return\x20(function()\x20','playersD2','Error\x20checking\x20','brian2af@outlook.com','info','owner','timestamp','includes','council','players','get','nonParticipants','log','set','admin','prototype','docs','length','trace'];a4_0x5b2c=function(){return _0xbb5ec9;};return a4_0x5b2c();}a4_0x185b1c();import{doc,getDoc,collection,query,where,getDocs}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ADMIN_EMAILS=[a4_0x548a45(0x1c9),a4_0x548a45(0x1d9)],ADMIN_ROLES=[a4_0x548a45(0x1de),a4_0x548a45(0x1ce),a4_0x548a45(0x1db),a4_0x548a45(0x1e4)],adminCache=new Map(),CACHE_DURATION=0x493e0;export function isAdmin(_0x22c83f){const _0x326429=a4_0x548a45;return _0x22c83f&&ADMIN_EMAILS[_0x326429(0x1dd)](_0x22c83f[_0x326429(0x1c5)]());}export async function isAdminWithRoles(_0x4e67c7){const _0x1bacaf=a4_0x548a45;if(!_0x4e67c7)return![];if(_0x4e67c7[_0x1bacaf(0x1c4)]&&isAdmin(_0x4e67c7[_0x1bacaf(0x1c4)]))return!![];const _0x18afc6=_0x4e67c7[_0x1bacaf(0x1ca)]||_0x4e67c7[_0x1bacaf(0x1c4)],_0x329f67=adminCache[_0x1bacaf(0x1e0)](_0x18afc6);if(_0x329f67&&Date[_0x1bacaf(0x1d4)]()-_0x329f67[_0x1bacaf(0x1dc)]<CACHE_DURATION)return _0x329f67[_0x1bacaf(0x1c8)];try{const _0x451d81=[_0x1bacaf(0x1df),_0x1bacaf(0x1d7),_0x1bacaf(0x1cd),_0x1bacaf(0x1e1),_0x1bacaf(0x1bc)];if(_0x4e67c7[_0x1bacaf(0x1ca)])for(const _0x20a6fc of _0x451d81){try{const _0x522dd4=doc(db,_0x20a6fc,_0x4e67c7[_0x1bacaf(0x1ca)]),_0x45aee6=await getDoc(_0x522dd4);if(_0x45aee6[_0x1bacaf(0x1d3)]()){const _0x5dfbe0=_0x45aee6[_0x1bacaf(0x1bd)](),_0x427b91=(_0x5dfbe0[_0x1bacaf(0x1cb)]||_0x5dfbe0[_0x1bacaf(0x1be)]||'')[_0x1bacaf(0x1c5)]();if(_0x427b91&&ADMIN_ROLES[_0x1bacaf(0x1dd)](_0x427b91))return adminCache[_0x1bacaf(0x1e3)](_0x18afc6,{'isAdmin':!![],'timestamp':Date[_0x1bacaf(0x1d4)]()}),!![];}}catch(_0x3e23c5){console[_0x1bacaf(0x1c2)](_0x1bacaf(0x1d8)+_0x20a6fc+':',_0x3e23c5);}}if(_0x4e67c7[_0x1bacaf(0x1c4)])for(const _0x45a2cd of _0x451d81){try{const _0x3300b6=collection(db,_0x45a2cd);let _0xfb1efb=query(_0x3300b6,where(_0x1bacaf(0x1c4),'==',_0x4e67c7[_0x1bacaf(0x1c4)])),_0x4a40b5=await getDocs(_0xfb1efb);_0x4a40b5[_0x1bacaf(0x1bf)]&&(_0xfb1efb=query(_0x3300b6,where(_0x1bacaf(0x1c4),'==',_0x4e67c7[_0x1bacaf(0x1c4)][_0x1bacaf(0x1c5)]())),_0x4a40b5=await getDocs(_0xfb1efb));if(!_0x4a40b5[_0x1bacaf(0x1bf)]){const _0x46b06c=_0x4a40b5[_0x1bacaf(0x1e6)][0x0][_0x1bacaf(0x1bd)](),_0x5defd8=(_0x46b06c[_0x1bacaf(0x1cb)]||_0x46b06c[_0x1bacaf(0x1be)]||'')[_0x1bacaf(0x1c5)]();if(_0x5defd8&&ADMIN_ROLES[_0x1bacaf(0x1dd)](_0x5defd8))return adminCache[_0x1bacaf(0x1e3)](_0x18afc6,{'isAdmin':!![],'timestamp':Date[_0x1bacaf(0x1d4)]()}),!![];}}catch(_0x2df68c){console[_0x1bacaf(0x1c2)](_0x1bacaf(0x1d8)+_0x45a2cd+':',_0x2df68c);}}return adminCache[_0x1bacaf(0x1e3)](_0x18afc6,{'isAdmin':![],'timestamp':Date[_0x1bacaf(0x1d4)]()}),![];}catch(_0x4dc7e0){return console[_0x1bacaf(0x1c2)](_0x1bacaf(0x1cc),_0x4dc7e0),![];}}