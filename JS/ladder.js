const a27_0x3165da=a27_0x2548,a27_0x19ced0=(function(){let _0x4e79c9=!![];return function(_0x4bd1f0,_0x7873da){const _0x4478e2=_0x4e79c9?function(){if(_0x7873da){const _0x1a4bb1=_0x7873da['apply'](_0x4bd1f0,arguments);return _0x7873da=null,_0x1a4bb1;}}:function(){};return _0x4e79c9=![],_0x4478e2;};}()),a27_0x13806f=a27_0x19ced0(this,function(){const _0x4c7d05=a27_0x2548,_0x3d97f6=function(){let _0x558bd3;try{_0x558bd3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x26ea77){_0x558bd3=window;}return _0x558bd3;},_0x4c947f=_0x3d97f6(),_0x9558f7=_0x4c947f[_0x4c7d05(0x10f)]=_0x4c947f[_0x4c7d05(0x10f)]||{},_0x1decb4=['log','warn','info',_0x4c7d05(0x120),'exception','table','trace'];for(let _0x4dc19c=0x0;_0x4dc19c<_0x1decb4['length'];_0x4dc19c++){const _0x2bc3a7=a27_0x19ced0[_0x4c7d05(0xc4)]['prototype']['bind'](a27_0x19ced0),_0x12b55b=_0x1decb4[_0x4dc19c],_0x2a0c51=_0x9558f7[_0x12b55b]||_0x2bc3a7;_0x2bc3a7['__proto__']=a27_0x19ced0['bind'](a27_0x19ced0),_0x2bc3a7['toString']=_0x2a0c51[_0x4c7d05(0x10a)][_0x4c7d05(0x125)](_0x2a0c51),_0x9558f7[_0x12b55b]=_0x2bc3a7;}});a27_0x13806f();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';function a27_0x2548(_0x52b125,_0x5b0809){const _0x13806f=a27_0xd65f();return a27_0x2548=function(_0x19ced0,_0x4ce406){_0x19ced0=_0x19ced0-0xad;let _0xd65f47=_0x13806f[_0x19ced0];return _0xd65f47;},a27_0x2548(_0x52b125,_0x5b0809);}import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x51d983=0x1){const _0x2fd376=a27_0x2548;try{document[_0x2fd376(0x11b)]('loading-indicator')[_0x2fd376(0xb6)][_0x2fd376(0xd2)]='block';const _0x24b0e1=await getLadderData(_0x51d983);_0x24b0e1['sort']((_0x3d4995,_0x5f3192)=>_0x5f3192[_0x2fd376(0x115)]-_0x3d4995['elo']);const _0x32d96c=_0x24b0e1['map'](_0x18033b=>_0x18033b['id']),_0x4cb30f=await getEloHistoryBatch(_0x32d96c,_0x51d983),_0x2deb0a=_0x24b0e1[_0x2fd376(0xc7)]((_0x141577,_0x2d7ca0)=>{const _0x31ea8f=_0x2fd376,_0x106230=_0x4cb30f[_0x141577['id']]||[],_0x5b496b=_0x106230['sort']((_0x2fd259,_0x2ca4ed)=>new Date(_0x2ca4ed['date'])-new Date(_0x2fd259['date']))[_0x31ea8f(0xae)](0x0,0x5);return{..._0x141577,'rank':_0x2d7ca0+0x1,'lastMatches':_0x5b496b,'recentActivity':_0x5b496b[_0x31ea8f(0xc8)]>0x0};});renderLadder(_0x2deb0a),setupRealTimeUpdates(_0x51d983);}catch(_0x3edac6){console['error'](_0x2fd376(0xb0),_0x3edac6),document[_0x2fd376(0x11b)]('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById'](_0x2fd376(0xb1))['style'][_0x2fd376(0xd2)]='none';}}function setupRealTimeUpdates(_0x5e6b2a=0x1){const _0x597699=a27_0x2548;activeListeners[_0x597699(0x116)](_0x33b8a5=>_0x33b8a5()),activeListeners=[];const _0x50df77=_0x5e6b2a===0x1?_0x597699(0xe7):_0x597699(0xd7)+_0x5e6b2a,_0x306d72=_0x5e6b2a===0x1?_0x597699(0xf2):'matchesD'+_0x5e6b2a,_0x144e5f=new Date();_0x144e5f['setDate'](_0x144e5f[_0x597699(0xb4)]()-0x1);const _0x499c73=setupEfficientListener(_0x306d72,[where('date','>=',_0x144e5f['toISOString']()),limit(0xa),orderBy(_0x597699(0xb3),'desc')],async _0x31a2ab=>{_0x31a2ab['length']>0x0&&await loadLadderData(_0x5e6b2a);});activeListeners['push'](_0x499c73);}function a27_0xd65f(){const _0x30bba4=['Silver','slice','previousElo','Error\x20loading\x20ladder\x20data:','loading-indicator','#CD7F32','date','getDate','toLowerCase','style','elo-recommendation-text-d3','duos-switch','visible','active','body','has','%</td>\x0a\x20\x20\x20\x20</tr>','d3-ladder-container','pointer','duos','DOMContentLoaded','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','sort','constructor','abs','hasTeam','map','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loserScore','block','add','elo-recommendation-text-d2','data','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','classList','display','addEventListener','title','player','winRate','playersD','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','Inactive','d1-switch','opacity','#FFD700',';\x22>','ðŸŽ¯\x20','textContent','exists','No\x20user\x20profile\x20found','remove','userProfiles','get','empty','elo-recommendation-text-d1','players','onAuthStateChanged','</span>','includes','oldEloRating','position','winnerScore','docs','0.85em','set','preventDefault','matches','\x20has\x20equipped:\x20','#ladder\x20tbody','none','disabled','innerHTML','td:nth-child(3)','rank','You\x27re\x20not\x20registered\x20on\x20the\x20','teammate','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','</span>.\x20Challenge\x20other\x20teams!','Recommendation\x20element\x20for\x20','losses','username','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20','email','country','totalMatches','#50C878','#b9f1fc','appendChild','timestamp','toString','change','tokenName','</span>\x20(ELO:\x20','log','console','Based\x20on\x20your\x20ELO\x20(','d2-ladder-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','playerUsername','<img\x20src=\x22../images/flags/','elo','forEach','admin','kda','totalDeaths','querySelector','getElementById','Emerald','currentUser','Error\x20fetching\x20tokens:','wins','error','Error\x20checking\x20','div','#4CAF50','size','bind','desc'];a27_0xd65f=function(){return _0x30bba4;};return a27_0xd65f();}export function cleanupListeners(){activeListeners['forEach'](_0xa02f90=>_0xa02f90()),activeListeners=[];}function renderLadder(_0x29289b){const _0x3acced=a27_0x2548,_0x5a2bc0=document['getElementById']('ladder-container');_0x5a2bc0['innerHTML']='',_0x29289b[_0x3acced(0x116)](_0x31cb53=>{const _0x20e78a=_0x3acced,_0x333cc8=document['createElement']('div');_0x333cc8['className']='ladder-player',_0x333cc8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x31cb53[_0x20e78a(0xf9)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x31cb53['username']||_0x31cb53['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x31cb53[_0x20e78a(0x115)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x31cb53['recentActivity']?'active':'inactive')+_0x20e78a(0xcf)+(_0x31cb53['recentActivity']?'Active':_0x20e78a(0xd9))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x5a2bc0[_0x20e78a(0x108)](_0x333cc8);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x3e0be4=![]){const _0x247fbd=a27_0x2548,_0x2597e0=document['querySelector']('#ladder\x20tbody');if(!_0x2597e0){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x2597e0['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x1f473c=Date['now']();if(!_0x3e0be4&&playerCache['data']&&_0x1f473c-playerCache['timestamp']<CACHE_DURATION){console[_0x247fbd(0x10e)]('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x16c6fa=collection(db,_0x247fbd(0xe7)),_0x48dcae=await getDocs(_0x16c6fa),_0x54ab8e=[];_0x48dcae['forEach'](_0x17cb00=>{const _0x54f134=_0x247fbd,_0x1e0f84=_0x17cb00[_0x54f134(0xce)]();_0x54ab8e['push']({..._0x1e0f84,'id':_0x17cb00['id'],'elo':_0x1e0f84['eloRating']||0x0,'position':_0x1e0f84[_0x54f134(0xec)]||Number['MAX_SAFE_INTEGER']});});const _0x45cee4=collection(db,_0x247fbd(0xe3)),_0x1ce331=await getDocs(_0x45cee4),_0x399a14=new Map();_0x1ce331['forEach'](_0x20c975=>{const _0x28ed01=_0x247fbd,_0x4a4adb=_0x20c975['data']();_0x4a4adb[_0x28ed01(0x101)]&&_0x399a14['set'](_0x4a4adb['username']['toLowerCase'](),_0x4a4adb);}),_0x54ab8e['forEach'](_0x3b1b1f=>{const _0x26adff=_0x247fbd,_0x3a3414=_0x3b1b1f['username']?.[_0x26adff(0xb5)]();if(_0x3a3414&&_0x399a14['has'](_0x3a3414)){const _0x105249=_0x399a14[_0x26adff(0xe4)](_0x3a3414);_0x105249['country']&&(_0x3b1b1f['country']=_0x105249['country'][_0x26adff(0xb5)]());}});const _0x224454=_0x54ab8e['map'](_0x677059=>_0x677059['username']),_0x548d0b=await fetchBatchMatchStats(_0x224454);_0x54ab8e[_0x247fbd(0xc3)]((_0x140742,_0x3bb296)=>{const _0x9b5512=_0x247fbd,_0x2bc501=_0x548d0b['get'](_0x140742['username'])?.['totalMatches']||0x0,_0x3c240c=_0x548d0b['get'](_0x3bb296[_0x9b5512(0x101)])?.[_0x9b5512(0x105)]||0x0;if(_0x2bc501===0x0!==(_0x3c240c===0x0))return _0x2bc501===0x0?0x1:-0x1;return(_0x140742[_0x9b5512(0xec)]||0x3e7)-(_0x3bb296['position']||0x3e7);}),_0x54ab8e['forEach']((_0x3334b1,_0x4f77db)=>{_0x3334b1['position']=_0x4f77db+0x1;}),playerCache['data']=_0x54ab8e,playerCache['timestamp']=_0x1f473c,updateLadderDisplay(_0x54ab8e,_0x548d0b);}catch(_0x1b423e){console[_0x247fbd(0x120)]('Error\x20loading\x20ladder:',_0x1b423e),_0x2597e0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x1b423e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x17a899){const _0x5e71b5=a27_0x2548,_0x323710=new Map();try{_0x17a899['forEach'](_0x314970=>{_0x323710['set'](_0x314970,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x41c6ba=collection(db,'approvedMatches'),_0x4da1f3=await getDocs(_0x41c6ba);_0x4da1f3['forEach'](_0x4b2a01=>{const _0x81950d=a27_0x2548,_0x214c0a=_0x4b2a01[_0x81950d(0xce)](),_0x28e868=_0x214c0a['winnerUsername'],_0x5851cb=_0x214c0a['loserUsername'];if(_0x17a899['includes'](_0x28e868)){const _0x15d6bc=_0x323710['get'](_0x28e868);_0x15d6bc[_0x81950d(0x11f)]++,_0x15d6bc['totalMatches']++,_0x15d6bc['totalKills']+=parseInt(_0x214c0a[_0x81950d(0xed)])||0x0,_0x15d6bc['totalDeaths']+=parseInt(_0x214c0a['loserScore'])||0x0;}if(_0x17a899['includes'](_0x5851cb)){const _0xbd962e=_0x323710['get'](_0x5851cb);_0xbd962e[_0x81950d(0x100)]++,_0xbd962e['totalMatches']++,_0xbd962e['totalKills']+=parseInt(_0x214c0a[_0x81950d(0xca)])||0x0,_0xbd962e['totalDeaths']+=parseInt(_0x214c0a['winnerScore'])||0x0;}}),_0x17a899['forEach'](_0x3ab56=>{const _0x2f863e=a27_0x2548,_0xc25296=_0x323710['get'](_0x3ab56);_0xc25296[_0x2f863e(0x118)]=_0xc25296[_0x2f863e(0x119)]>0x0?(_0xc25296['totalKills']/_0xc25296[_0x2f863e(0x119)])['toFixed'](0x2):_0xc25296['totalKills']['toFixed'](0x2),_0xc25296['winRate']=_0xc25296[_0x2f863e(0x105)]>0x0?(_0xc25296['wins']/_0xc25296['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x74900d){console[_0x5e71b5(0x120)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x74900d);}return _0x323710;}function createPlayerRow(_0x2a02b2,_0x17b461){const _0x249ff2=a27_0x2548,_0x32a987=parseFloat(_0x2a02b2[_0x249ff2(0x115)])||0x0;let _0x138aae='gray';if(_0x32a987>=0x7d0)_0x138aae=_0x249ff2(0x106);else{if(_0x32a987>=0x708)_0x138aae=_0x249ff2(0xdc);else{if(_0x32a987>=0x640)_0x138aae=_0x249ff2(0x107);else _0x32a987>=0x578&&(_0x138aae=_0x249ff2(0xb2));}}let _0x293c1e='';return _0x2a02b2['country']&&(_0x293c1e='<img\x20src=\x22../images/flags/'+_0x2a02b2['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2a02b2[_0x249ff2(0x104)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x249ff2(0xfc)+_0x2a02b2['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x2a02b2[_0x249ff2(0x101)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x138aae+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2a02b2['username']+_0x249ff2(0xc9)+_0x293c1e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x138aae+_0x249ff2(0xfd)+_0x32a987+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x17b461[_0x249ff2(0x105)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x17b461[_0x249ff2(0x11f)]+_0x249ff2(0xc2)+_0x17b461[_0x249ff2(0x100)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x17b461[_0x249ff2(0x118)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x17b461['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x54c07f){const _0x517c05=a27_0x2548;if(_0x54c07f>=0x7d0)return _0x517c05(0x11c);if(_0x54c07f>=0x708)return'Gold';if(_0x54c07f>=0x640)return _0x517c05(0xad);if(_0x54c07f>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x5b53e8){const _0x5cb31a=a27_0x2548,_0x97052b=new Map();_0x5b53e8['forEach'](_0x1162ed=>{const _0x54b810=a27_0x2548;_0x97052b[_0x54b810(0xf0)](_0x1162ed,0x0);});try{const _0x413653=collection(db,'players'),_0x2d0508=await getDocs(_0x413653),_0x1b8dc5=new Map(),_0x793110=new Map();_0x2d0508[_0x5cb31a(0x116)](_0xf42e1a=>{const _0x3e1ab8=_0x5cb31a,_0x5d7342=_0xf42e1a['data']();_0x5d7342['username']&&(_0x1b8dc5['set'](_0xf42e1a['id'],_0x5d7342['username']),_0x793110[_0x3e1ab8(0xf0)](_0x5d7342['username']['toLowerCase'](),_0xf42e1a['id']));});const _0x4d2bdf=collection(db,'eloHistory'),_0x3ad137=query(_0x4d2bdf,orderBy('timestamp',_0x5cb31a(0x126)),limit(0x12c)),_0x10960c=await getDocs(_0x3ad137);if(_0x10960c['empty'])return console[_0x5cb31a(0x10e)]('ELO\x20history\x20collection\x20is\x20empty'),_0x97052b;if(_0x10960c['docs']['length']>0x0){const _0xa59690=_0x10960c[_0x5cb31a(0xee)][0x0]['data']();if(_0xa59690['player']&&_0x1b8dc5[_0x5cb31a(0xbc)](_0xa59690['player'])){}}const _0x2177d9=new Map();let _0x369825=0x0;_0x10960c[_0x5cb31a(0x116)](_0x43d42c=>{const _0x30edb5=_0x5cb31a,_0x274b3b=_0x43d42c['data']();let _0x389b9b=null;if(_0x274b3b['player']&&_0x1b8dc5['has'](_0x274b3b[_0x30edb5(0xd5)]))_0x389b9b=_0x1b8dc5[_0x30edb5(0xe4)](_0x274b3b['player']);else{if(_0x274b3b['username']&&_0x793110['has'](_0x274b3b[_0x30edb5(0x101)][_0x30edb5(0xb5)]()))_0x389b9b=_0x274b3b['username'];else _0x274b3b['playerUsername']&&_0x793110[_0x30edb5(0xbc)](_0x274b3b[_0x30edb5(0x113)]['toLowerCase']())&&(_0x389b9b=_0x274b3b['playerUsername']);}_0x389b9b&&_0x5b53e8[_0x30edb5(0xea)](_0x389b9b)&&(_0x369825++,!_0x2177d9[_0x30edb5(0xbc)](_0x389b9b)&&_0x2177d9[_0x30edb5(0xf0)](_0x389b9b,[]),_0x2177d9['get'](_0x389b9b)['push']({..._0x274b3b,'timestamp':_0x274b3b[_0x30edb5(0x109)]?.['seconds']||0x0}));}),_0x2177d9['forEach']((_0x2ee77a,_0x5f3643)=>{const _0x4b2014=_0x5cb31a;if(_0x2ee77a['length']>0x0){_0x2ee77a['sort']((_0x144110,_0x5bbdf0)=>_0x5bbdf0[_0x4b2014(0x109)]-_0x144110['timestamp']);const _0x48da45=_0x2ee77a['find'](_0xb2d8a9=>_0xb2d8a9[_0x4b2014(0x10b)]!==undefined||_0xb2d8a9['newElo']!==undefined&&_0xb2d8a9['previousElo']!==undefined||_0xb2d8a9['newEloRating']!==undefined&&_0xb2d8a9['oldEloRating']!==undefined);if(_0x48da45){let _0x5679c0;if(_0x48da45['change']!==undefined)_0x5679c0=parseInt(_0x48da45['change']);else{if(_0x48da45['newElo']!==undefined&&entry[_0x4b2014(0xaf)]!==undefined)_0x5679c0=parseInt(_0x48da45['newElo'])-parseInt(_0x48da45[_0x4b2014(0xaf)]);else _0x48da45['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x5679c0=parseInt(_0x48da45['newEloRating'])-parseInt(_0x48da45[_0x4b2014(0xeb)]));}!isNaN(_0x5679c0)&&_0x5679c0!==0x0&&_0x97052b['set'](_0x5f3643,_0x5679c0);}}});}catch(_0x3257a5){console[_0x5cb31a(0x120)]('Error\x20fetching\x20ELO\x20history:',_0x3257a5);}return _0x97052b;}function createPlayerRowWithToken(_0x41bc8b,_0x3b795f,_0x533760){const _0x55866d=a27_0x2548,_0x2243ad=parseFloat(_0x41bc8b['elo'])||0x0;let _0x867463='gray';if(_0x2243ad>=0x7d0)_0x867463='#50C878';else{if(_0x2243ad>=0x708)_0x867463='#FFD700';else{if(_0x2243ad>=0x640)_0x867463='#b9f1fc';else _0x2243ad>=0x578&&(_0x867463='#CD7F32');}}let _0x1e73b0='';_0x41bc8b[_0x55866d(0x104)]&&(_0x1e73b0=_0x55866d(0x114)+_0x41bc8b['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x41bc8b['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x1ea294='';return _0x533760&&(_0x1ea294='<img\x20src=\x22'+_0x533760['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x533760['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x533760['tokenName']+'\x20'+(_0x533760['equipped']?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x41bc8b['position']+_0x55866d(0x112)+encodeURIComponent(_0x41bc8b['username'])+_0x55866d(0xd8)+_0x867463+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x41bc8b['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1e73b0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1ea294+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x867463+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x2243ad+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b795f[_0x55866d(0x105)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b795f['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b795f[_0x55866d(0x100)]+_0x55866d(0xc2)+_0x3b795f[_0x55866d(0x118)]+_0x55866d(0xc2)+_0x3b795f[_0x55866d(0xd6)]+_0x55866d(0xbd);}async function updateLadderDisplay(_0x288502,_0x4c8af5=null){const _0x404f3=a27_0x2548,_0x138e88=document['querySelector'](_0x404f3(0xf4));if(!_0x138e88){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x3cb0b0=document['querySelector']('#ladder\x20thead\x20tr');_0x3cb0b0&&(_0x3cb0b0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0xa5f782=_0x288502['map'](_0x43d909=>_0x43d909['username']);!_0x4c8af5&&(_0x4c8af5=await fetchBatchMatchStats(_0xa5f782));let _0x43cb31=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x43cb31=await getTokensByUsernames(_0xa5f782),console['log']('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x43cb31[_0x404f3(0x124)],'players'),_0x43cb31[_0x404f3(0x116)]((_0x18e8d8,_0x4f07c5)=>{const _0x7ab5bb=_0x404f3,_0x95e95b=_0x18e8d8['find'](_0x88b2c7=>_0x88b2c7['equipped']);_0x95e95b&&console['log'](_0x7ab5bb(0xde)+_0x4f07c5+_0x7ab5bb(0xf3)+_0x95e95b[_0x7ab5bb(0x10c)]);});}catch(_0x1304f9){console['error'](_0x404f3(0x11e),_0x1304f9);}const _0x309ffa=_0x288502[_0x404f3(0xc7)](_0x23ad5e=>{const _0xcf2d8b=_0x404f3,_0xbec0f8=_0x4c8af5['get'](_0x23ad5e[_0xcf2d8b(0x101)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x2a00a9=_0x43cb31['get'](_0x23ad5e[_0xcf2d8b(0x101)])||[],_0x5c3ba1=getPrimaryDisplayToken(_0x2a00a9);return _0x5c3ba1&&console['log']('ðŸŽ¨\x20'+_0x23ad5e['username']+'\x20displaying\x20token:\x20'+_0x5c3ba1['tokenName']+'\x20(equipped:\x20'+_0x5c3ba1['equipped']+')'),createPlayerRowWithToken(_0x23ad5e,_0xbec0f8,_0x5c3ba1);})['join']('');_0x138e88[_0x404f3(0xf7)]=_0x309ffa,getPlayersLastEloChanges(_0xa5f782)['then'](_0x346849=>{const _0x57cd1c=new Map();_0x138e88['querySelectorAll']('tr')['forEach']((_0x73cf70,_0x3f5494)=>{const _0x42be96=a27_0x2548;_0x3f5494<_0xa5f782[_0x42be96(0xc8)]&&_0x57cd1c['set'](_0xa5f782[_0x3f5494],_0x73cf70);}),_0x346849['forEach']((_0x27fb4b,_0x44a92c)=>{const _0x2c28f8=a27_0x2548,_0x57e566=_0x57cd1c[_0x2c28f8(0xe4)](_0x44a92c);if(_0x57e566&&_0x27fb4b!==0x0){const _0x173976=_0x57e566[_0x2c28f8(0x11a)](_0x2c28f8(0xf8));if(_0x173976){const _0x21403f=_0x27fb4b>0x0?'+'+_0x27fb4b:''+_0x27fb4b,_0x44afe5=_0x173976['querySelector']('.trend-indicator');_0x44afe5&&(_0x44afe5[_0x2c28f8(0xdf)]=_0x21403f,_0x44afe5['style']['color']=_0x27fb4b>0x0?_0x2c28f8(0x123):'#F44336',_0x44afe5[_0x2c28f8(0xb6)]['fontWeight']='bold',_0x44afe5[_0x2c28f8(0xb6)]['fontSize']=_0x2c28f8(0xef),_0x44afe5['style']['display']='inline',_0x44afe5['style']['visibility']=_0x2c28f8(0xb9),_0x44afe5[_0x2c28f8(0xb6)]['opacity']='1');}}});})['catch'](_0x48c706=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x48c706));}function initLadderToggles(){const _0x221ef5=a27_0x2548,_0x4358c2=document['getElementById'](_0x221ef5(0xda)),_0x4e5138=document['getElementById']('d2-switch'),_0x2f44c9=document[_0x221ef5(0x11b)]('d3-switch'),_0x372e49=document['getElementById'](_0x221ef5(0xb8)),_0x4b23d2=document['getElementById']('d1-ladder-container'),_0xbd9548=document[_0x221ef5(0x11b)](_0x221ef5(0x111)),_0x3cc8ac=document['getElementById'](_0x221ef5(0xbe)),_0x5cd3d6=document['getElementById']('duos-ladder-container');function _0x58533f(){const _0x48657d=_0x221ef5;if(_0x4b23d2)_0x4b23d2[_0x48657d(0xd1)]['remove']('active');if(_0xbd9548)_0xbd9548[_0x48657d(0xd1)][_0x48657d(0xe2)]('active');if(_0x3cc8ac)_0x3cc8ac['classList']['remove']('active');if(_0x5cd3d6)_0x5cd3d6[_0x48657d(0xb6)][_0x48657d(0xd2)]=_0x48657d(0xf5);if(_0x4b23d2)_0x4b23d2[_0x48657d(0xb6)][_0x48657d(0xd2)]='none';if(_0xbd9548)_0xbd9548['style']['display']='none';if(_0x3cc8ac)_0x3cc8ac['style'][_0x48657d(0xd2)]='none';}_0x4358c2&&_0x4358c2['addEventListener']('click',()=>{const _0x4b71bb=_0x221ef5;console['log']('D1\x20toggle\x20clicked'),_0x58533f();_0x4b23d2&&(_0x4b23d2['classList']['add']('active'),_0x4b23d2['style']['display']='block');document[_0x4b71bb(0x11b)]('elo-recommendation-text-d1')['style'][_0x4b71bb(0xd2)]='block',document[_0x4b71bb(0x11b)]('elo-recommendation-text-d2')['style'][_0x4b71bb(0xd2)]=_0x4b71bb(0xf5),document[_0x4b71bb(0x11b)](_0x4b71bb(0xb7))[_0x4b71bb(0xb6)]['display']=_0x4b71bb(0xf5);if(_0x4358c2)_0x4358c2['classList']['add']('active');if(_0x4e5138)_0x4e5138['classList']['remove']('active');if(_0x2f44c9)_0x2f44c9['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x4e5138&&_0x4e5138['addEventListener']('click',()=>{const _0x299dda=_0x221ef5;console['log']('D2\x20toggle\x20clicked'),_0x58533f();_0xbd9548&&(_0xbd9548[_0x299dda(0xd1)]['add']('active'),_0xbd9548[_0x299dda(0xb6)]['display']='block');document['getElementById'](_0x299dda(0xe6))['style']['display']='none',document['getElementById'](_0x299dda(0xcd))[_0x299dda(0xb6)]['display']=_0x299dda(0xcb),document[_0x299dda(0x11b)]('elo-recommendation-text-d3')['style']['display']=_0x299dda(0xf5);if(_0x4e5138)_0x4e5138['classList']['add']('active');if(_0x4358c2)_0x4358c2['classList']['remove'](_0x299dda(0xba));if(_0x2f44c9)_0x2f44c9['classList']['remove'](_0x299dda(0xba));displayLadderD2(),findBestOpponent('d2');}),_0x2f44c9&&_0x2f44c9['addEventListener']('click',()=>{const _0x4e552d=_0x221ef5;console['log']('D3\x20toggle\x20clicked'),_0x58533f();_0x3cc8ac&&(_0x3cc8ac['classList'][_0x4e552d(0xcc)]('active'),_0x3cc8ac[_0x4e552d(0xb6)][_0x4e552d(0xd2)]='block');document['getElementById'](_0x4e552d(0xe6))[_0x4e552d(0xb6)][_0x4e552d(0xd2)]='none',document['getElementById']('elo-recommendation-text-d2')[_0x4e552d(0xb6)]['display']='none',document['getElementById'](_0x4e552d(0xb7))['style']['display']='block';if(_0x2f44c9)_0x2f44c9['classList'][_0x4e552d(0xcc)]('active');if(_0x4358c2)_0x4358c2['classList']['remove']('active');if(_0x4e5138)_0x4e5138['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x372e49&&_0x372e49['addEventListener']('click',()=>{const _0x1ef411=_0x221ef5;_0x58533f();if(_0x5cd3d6)_0x5cd3d6['style']['display']=_0x1ef411(0xcb);displayLadderDuos(),findBestOpponent(_0x1ef411(0xc0)),document['getElementById']('elo-recommendation-text-duos')&&(document[_0x1ef411(0x11b)]('elo-recommendation-text-duos')['style'][_0x1ef411(0xd2)]='block'),document['getElementById']('elo-recommendation-text-d1')[_0x1ef411(0xb6)][_0x1ef411(0xd2)]=_0x1ef411(0xf5),document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')[_0x1ef411(0xb6)]['display']='none';});}document['addEventListener'](a27_0x3165da(0xc1),()=>{const _0x3ad6d7=a27_0x3165da;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')[_0x3ad6d7(0xb6)][_0x3ad6d7(0xd2)]='block';});export{displayLadder};async function findBestOpponent(_0x2665cc='d1'){const _0x5dca40=a27_0x3165da,_0x9a6662='elo-recommendation-text-'+_0x2665cc,_0x39e8e1=document['getElementById'](_0x9a6662);if(!_0x39e8e1){console['error'](_0x5dca40(0xff)+_0x2665cc+'\x20not\x20found');return;}const _0x5c74ef=auth['currentUser'];if(!_0x5c74ef){_0x39e8e1['textContent']='';return;}try{const _0x2d477c=doc(db,'userProfiles',_0x5c74ef['uid']),_0x3677d0=await getDoc(_0x2d477c);if(!_0x3677d0[_0x5dca40(0xe0)]()){console[_0x5dca40(0x10e)](_0x5dca40(0xe1)),_0x39e8e1['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x5bebb5=_0x3677d0['data'](),_0x192cc1=_0x5bebb5['username'];if(!_0x192cc1){_0x39e8e1[_0x5dca40(0xdf)]='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x401847;switch(_0x2665cc){case'd1':_0x401847=_0x5dca40(0xe7);break;case'd2':_0x401847='playersD2';break;case'd3':_0x401847='playersD3';break;case'duos':_0x401847='playersDuos';break;default:_0x401847='players';}if(_0x2665cc==='duos'){const _0x32a340=collection(db,_0x401847),_0x1aff34=query(_0x32a340,where(_0x5dca40(0x101),'==',_0x192cc1)),_0x44dacf=await getDocs(_0x1aff34);if(_0x44dacf['empty']){_0x39e8e1['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0xb27013=_0x44dacf[_0x5dca40(0xee)][0x0][_0x5dca40(0xce)](),_0x453eaa=parseInt(_0xb27013['eloRating'])||0x4b0;if(_0xb27013[_0x5dca40(0xc6)]&&_0xb27013['teammate']){_0x39e8e1[_0x5dca40(0xf7)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0xb27013[_0x5dca40(0xfb)]+_0x5dca40(0xfe);return;}const _0x1f593d=await getDocs(_0x32a340);let _0x44966f=null,_0x4186da=-0x1;_0x1f593d[_0x5dca40(0x116)](_0x3d32d1=>{const _0x519ad5=_0x5dca40,_0x11094b=_0x3d32d1['data']();if(_0x11094b[_0x519ad5(0x101)]===_0x192cc1)return;if(_0x11094b['hasTeam'])return;const _0x404896=parseInt(_0x11094b['eloRating'])||0x4b0,_0x2209ba=Math[_0x519ad5(0xc5)](_0x404896-_0x453eaa),_0x448227=Math['max'](0x0,0xc8-_0x2209ba);_0x448227>_0x4186da&&(_0x44966f=_0x11094b,_0x4186da=_0x448227);});if(_0x44966f){const _0x3251b1=parseInt(_0x44966f['eloRating'])||0x4b0;let _0x296a6f='gray';if(_0x3251b1>=0x7d0)_0x296a6f=_0x5dca40(0x106);else{if(_0x3251b1>=0x708)_0x296a6f='#FFD700';else{if(_0x3251b1>=0x640)_0x296a6f='#C0C0C0';else _0x3251b1>=0x578&&(_0x296a6f='#CD7F32');}}_0x39e8e1['innerHTML']=_0x5dca40(0xd0)+_0x296a6f+_0x5dca40(0xdd)+_0x44966f['username']+_0x5dca40(0x10d)+_0x3251b1+')';}else _0x39e8e1['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0xd67af3=collection(db,_0x401847),_0x2d4e4a=query(_0xd67af3,where('username','==',_0x192cc1)),_0x55c079=await getDocs(_0x2d4e4a);if(_0x55c079[_0x5dca40(0xe5)]){_0x39e8e1[_0x5dca40(0xdf)]=_0x5dca40(0xfa)+_0x2665cc['toUpperCase']()+'\x20ladder';return;}const _0x50cd31=_0x55c079['docs'][0x0]['data'](),_0x1a4710=parseInt(_0x50cd31['eloRating'])||0x5dc,_0x3b290f=await getDocs(_0xd67af3);let _0x23a09e=null,_0x297a23=-0x1;const _0x43df85=getPlayerRankName(_0x1a4710);_0x3b290f[_0x5dca40(0x116)](_0x2af9ac=>{const _0x2dc2b3=_0x2af9ac['data']();if(_0x2dc2b3['username']===_0x192cc1)return;const _0x1c6cd8=parseInt(_0x2dc2b3['eloRating'])||0x5dc,_0x3cd466=getPlayerRankName(_0x1c6cd8),_0x42123a=Math['abs'](_0x1c6cd8-_0x1a4710),_0x36e094=0x20,_0x4a91b6=0x1/(0x1+Math['pow'](0xa,(_0x1c6cd8-_0x1a4710)/0x190)),_0x54be0e=Math['round'](_0x36e094*(0x1-_0x4a91b6));if(_0x54be0e<=0x0)return;let _0x37221d=0x0;const _0x1d9d4d=Math['max'](0x0,0x64-_0x42123a*0.5),_0x192dc5=_0x54be0e>=0x3&&_0x54be0e<=0x8?0x32:_0x54be0e>0x0&&_0x54be0e<0xf?0x1e:0xa,_0xc52312=_0x43df85===_0x3cd466?0x28:0x0;_0x37221d=_0x1d9d4d+_0x192dc5+_0xc52312,_0x37221d>_0x297a23&&(_0x23a09e=_0x2dc2b3,_0x297a23=_0x37221d);});if(_0x23a09e){const _0x730bf5=parseInt(_0x23a09e['eloRating'])||0x5dc;let _0x5d6671='gray';if(_0x730bf5>=0x7d0)_0x5d6671='#50C878';else{if(_0x730bf5>=0x708)_0x5d6671='#FFD700';else{if(_0x730bf5>=0x640)_0x5d6671='#b9f1fc';else _0x730bf5>=0x578&&(_0x5d6671=_0x5dca40(0xb2));}}_0x39e8e1[_0x5dca40(0xf7)]=_0x5dca40(0x110)+_0x1a4710+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x5d6671+';\x22>'+_0x23a09e['username']+_0x5dca40(0xe9);}else _0x39e8e1[_0x5dca40(0xf7)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x1a4710+')';}catch(_0x199b03){console['error']('Error\x20finding\x20best\x20opponent:',_0x199b03),_0x39e8e1['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth[a27_0x3165da(0xe8)](_0xa6018f=>{const _0xa6dba1=a27_0x3165da,_0x3f7a40=document['getElementById']('d1-ladder-container')&&document[_0xa6dba1(0x11b)]('d1-ladder-container')['style']['display']!=='none',_0x2143fd=document['getElementById']('d2-ladder-container')&&document['getElementById']('d2-ladder-container')['style']['display']!=='none',_0x4f1b07=document[_0xa6dba1(0x11b)](_0xa6dba1(0xbe))&&document['getElementById'](_0xa6dba1(0xbe))['style']['display']!=='none',_0x1e0cdc=document['getElementById']('duos-ladder-container')&&document['getElementById']('duos-ladder-container')['style'][_0xa6dba1(0xd2)]!==_0xa6dba1(0xf5),_0xadded9=_0x3f7a40?'d1':_0x2143fd?'d2':_0x4f1b07?'d3':_0x1e0cdc?'duos':'d1';findBestOpponent(_0xadded9);}),document['addEventListener'](a27_0x3165da(0xc1),()=>{const _0x48b6b1=a27_0x3165da,_0x2de5f0=document[_0x48b6b1(0x11b)](_0x48b6b1(0xb8)),_0x2a41d7=document['querySelector']('label[for=\x22duos-switch\x22]');_0x2de5f0&&_0x2a41d7&&(_0x2de5f0[_0x48b6b1(0xd3)]('change',async _0x20e3bf=>{const _0x6f7e94=_0x48b6b1;if(_0x20e3bf['target']['checked']){const _0x3bb47a=auth?.[_0x6f7e94(0x11d)],_0x2d8048=await checkIfUserIsAdmin(_0x3bb47a);if(!_0x2d8048){_0x20e3bf[_0x6f7e94(0xf1)]();const _0x167ce6=document['getElementById']('d1-switch');return _0x167ce6&&(_0x167ce6['checked']=!![],_0x167ce6['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x2ce8d2=>{const _0x5beacc=_0x48b6b1,_0x1408fb=await checkIfUserIsAdmin(_0x2ce8d2);!_0x1408fb?(_0x2de5f0['disabled']=!![],_0x2a41d7['style']['opacity']='0.5',_0x2a41d7['style']['cursor']='not-allowed',_0x2a41d7[_0x5beacc(0xd4)]='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x2de5f0[_0x5beacc(0xf6)]=![],_0x2a41d7['style'][_0x5beacc(0xdb)]='1',_0x2a41d7['style']['cursor']=_0x5beacc(0xbf),_0x2a41d7[_0x5beacc(0xd4)]='');}));});async function checkIfUserIsAdmin(_0x40a868){const _0x15585c=a27_0x3165da;if(!_0x40a868)return![];try{const _0x5739f4=['admin@ladder.com','brian2af@outlook.com'];if(_0x40a868[_0x15585c(0x103)]&&_0x5739f4['includes'](_0x40a868[_0x15585c(0x103)]['toLowerCase']()))return!![];const _0x3df6d7=['userProfiles','players','playersD2','playersD3'],_0x45ef3c=[_0x15585c(0x117),'owner','council','creative\x20lead'];for(const _0x1cb953 of _0x3df6d7){try{const _0x40e112=doc(db,_0x1cb953,_0x40a868['uid']),_0x17d574=await getDoc(_0x40e112);if(_0x17d574[_0x15585c(0xe0)]()){const _0x546793=_0x17d574['data'](),_0x32cc58=(_0x546793['roleName']||_0x546793['role']||'')['toLowerCase']();if(_0x32cc58&&_0x45ef3c[_0x15585c(0xea)](_0x32cc58))return!![];}}catch(_0x15eb8e){console['warn'](_0x15585c(0x121)+_0x1cb953+':',_0x15eb8e);}}return![];}catch(_0x18eb0e){return console['error']('Error\x20checking\x20admin\x20status:',_0x18eb0e),![];}}function showAdminOnlyMessage(){const _0x39009e=a27_0x3165da,_0x51cf94=document['getElementById']('admin-only-message');_0x51cf94&&_0x51cf94['remove']();const _0x1cd48a=document['createElement'](_0x39009e(0x122));_0x1cd48a['id']='admin-only-message',_0x1cd48a['style']['cssText']=_0x39009e(0x102),_0x1cd48a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document[_0x39009e(0xbb)]['appendChild'](_0x1cd48a),setTimeout(()=>{_0x1cd48a['parentNode']&&_0x1cd48a['remove']();},0xbb8);}