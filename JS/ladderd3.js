const a33_0x5f242f=a33_0x1f8a;(function(_0x5efc0f,_0xb5a227){const _0x50da9e=a33_0x1f8a,_0x2474d6=_0x5efc0f();while(!![]){try{const _0x38f128=-parseInt(_0x50da9e(0x1c1))/0x1+parseInt(_0x50da9e(0x1a3))/0x2*(-parseInt(_0x50da9e(0x1b3))/0x3)+parseInt(_0x50da9e(0x19b))/0x4+-parseInt(_0x50da9e(0x195))/0x5*(-parseInt(_0x50da9e(0x182))/0x6)+-parseInt(_0x50da9e(0x178))/0x7*(parseInt(_0x50da9e(0x15e))/0x8)+parseInt(_0x50da9e(0x164))/0x9*(parseInt(_0x50da9e(0x1a5))/0xa)+-parseInt(_0x50da9e(0x15f))/0xb*(-parseInt(_0x50da9e(0x17d))/0xc);if(_0x38f128===_0xb5a227)break;else _0x2474d6['push'](_0x2474d6['shift']());}catch(_0x3c24e3){_0x2474d6['push'](_0x2474d6['shift']());}}}(a33_0x1c20,0x340df));const a33_0x2e301c=(function(){let _0x4c1301=!![];return function(_0x41021f,_0x267bda){const _0x5c7e6e=_0x4c1301?function(){const _0x322445=a33_0x1f8a;if(_0x267bda){const _0x3ca6b5=_0x267bda[_0x322445(0x1dd)](_0x41021f,arguments);return _0x267bda=null,_0x3ca6b5;}}:function(){};return _0x4c1301=![],_0x5c7e6e;};}()),a33_0x7dab01=a33_0x2e301c(this,function(){const _0x19c2bb=a33_0x1f8a;return a33_0x7dab01[_0x19c2bb(0x1b8)]()[_0x19c2bb(0x1d5)](_0x19c2bb(0x1b2))[_0x19c2bb(0x1b8)]()[_0x19c2bb(0x1a7)](a33_0x7dab01)[_0x19c2bb(0x1d5)](_0x19c2bb(0x1b2));});a33_0x7dab01();function a33_0x1f8a(_0x1e762e,_0x8a1386){const _0x175ae7=a33_0x1c20();return a33_0x1f8a=function(_0x20bb18,_0x2f6818){_0x20bb18=_0x20bb18-0x15c;let _0x48268a=_0x175ae7[_0x20bb18];return _0x48268a;},a33_0x1f8a(_0x1e762e,_0x8a1386);}const a33_0x2f6818=(function(){let _0x34d7e1=!![];return function(_0x4d5cd8,_0x34cef6){const _0x5e5b55=_0x34d7e1?function(){const _0xe80a5d=a33_0x1f8a;if(_0x34cef6){const _0x1e7bff=_0x34cef6[_0xe80a5d(0x1dd)](_0x4d5cd8,arguments);return _0x34cef6=null,_0x1e7bff;}}:function(){};return _0x34d7e1=![],_0x5e5b55;};}()),a33_0x20bb18=a33_0x2f6818(this,function(){const _0x1a6005=a33_0x1f8a,_0x1331fc=function(){const _0x5db08f=a33_0x1f8a;let _0x1d6405;try{_0x1d6405=Function('return\x20(function()\x20'+_0x5db08f(0x183)+');')();}catch(_0x3c45bc){_0x1d6405=window;}return _0x1d6405;},_0x2c39b9=_0x1331fc(),_0x512d54=_0x2c39b9[_0x1a6005(0x1b0)]=_0x2c39b9[_0x1a6005(0x1b0)]||{},_0x27634d=[_0x1a6005(0x1c4),'warn','info',_0x1a6005(0x1a8),'exception',_0x1a6005(0x1bc),'trace'];for(let _0x3539db=0x0;_0x3539db<_0x27634d[_0x1a6005(0x191)];_0x3539db++){const _0x4f7434=a33_0x2f6818[_0x1a6005(0x1a7)][_0x1a6005(0x16e)][_0x1a6005(0x1b5)](a33_0x2f6818),_0x1f608a=_0x27634d[_0x3539db],_0x4e997b=_0x512d54[_0x1f608a]||_0x4f7434;_0x4f7434['__proto__']=a33_0x2f6818[_0x1a6005(0x1b5)](a33_0x2f6818),_0x4f7434[_0x1a6005(0x1b8)]=_0x4e997b['toString']['bind'](_0x4e997b),_0x512d54[_0x1f608a]=_0x4f7434;}});a33_0x20bb18();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x5ac90a from'./firebase-idle-wrapper.js';const styleEl=document[a33_0x5f242f(0x1ca)](a33_0x5f242f(0x1aa));styleEl['textContent']=a33_0x5f242f(0x16d),document[a33_0x5f242f(0x17c)]['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x32dc8f=![]){const _0x169e83=a33_0x5f242f,_0x4f0149=document[_0x169e83(0x189)](_0x169e83(0x1bb));if(!_0x4f0149){console[_0x169e83(0x1a8)](_0x169e83(0x1af));return;}_0x4f0149['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x5059c0=Date[_0x169e83(0x1e3)]();if(!_0x32dc8f&&playerCacheD3[_0x169e83(0x1e0)]&&_0x5059c0-playerCacheD3[_0x169e83(0x1d4)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x169e83(0x1e0)]);return;}const _0xb430ca=collection(db,'playersD3'),_0x1d7ebd=await getDocs(_0xb430ca),_0x8740aa=[];_0x1d7ebd[_0x169e83(0x1c6)](_0x29d2ac=>{const _0x525314=_0x169e83,_0x368533=_0x29d2ac[_0x525314(0x1e0)]();_0x368533['username']&&_0x8740aa[_0x525314(0x198)]({..._0x368533,'id':_0x29d2ac['id'],'elo':_0x368533[_0x525314(0x18d)]||0x0,'position':_0x368533[_0x525314(0x17f)]||Number[_0x525314(0x169)]});});const _0x22c0d4=collection(db,_0x169e83(0x19c)),_0x4d4fa8=await getDocs(_0x22c0d4),_0x2e78bb=new Map();_0x4d4fa8[_0x169e83(0x1c6)](_0x5bd812=>{const _0x386372=_0x169e83,_0x365fe2=_0x5bd812[_0x386372(0x1e0)]();_0x365fe2[_0x386372(0x176)]&&_0x2e78bb[_0x386372(0x172)](_0x365fe2[_0x386372(0x176)]['toLowerCase'](),_0x365fe2);});for(const _0x36d3bb of _0x8740aa){const _0xae9dbf=_0x36d3bb[_0x169e83(0x176)]['toLowerCase']();if(_0x2e78bb['has'](_0xae9dbf)){const _0x5c8018=_0x2e78bb[_0x169e83(0x192)](_0xae9dbf);_0x5c8018[_0x169e83(0x18f)]&&(_0x36d3bb[_0x169e83(0x18f)]=_0x5c8018[_0x169e83(0x18f)][_0x169e83(0x1a0)]());}}const _0x39375a=_0x8740aa[_0x169e83(0x166)](_0x3fc3ec=>_0x3fc3ec[_0x169e83(0x176)]),_0x375410=await fetchBatchMatchStatsD3(_0x39375a);_0x8740aa[_0x169e83(0x1c2)]((_0xac5ccc,_0x5b8c0c)=>{const _0x284d3a=_0x169e83,_0x5012f8=_0x375410[_0x284d3a(0x192)](_0xac5ccc[_0x284d3a(0x176)])?.[_0x284d3a(0x197)]||0x0,_0x550989=_0x375410[_0x284d3a(0x192)](_0x5b8c0c[_0x284d3a(0x176)])?.[_0x284d3a(0x197)]||0x0;if(_0x5012f8===0x0!==(_0x550989===0x0))return _0x5012f8===0x0?0x1:-0x1;return(_0xac5ccc[_0x284d3a(0x17f)]||0x3e7)-(_0x5b8c0c[_0x284d3a(0x17f)]||0x3e7);}),_0x8740aa['forEach']((_0x52a0ea,_0x3d453c)=>{const _0x5bb988=_0x169e83;_0x52a0ea[_0x5bb988(0x17f)]=_0x3d453c+0x1;}),playerCacheD3[_0x169e83(0x1e0)]=_0x8740aa,playerCacheD3['timestamp']=_0x5059c0,updateLadderDisplayD3(_0x8740aa);}catch(_0x1ff72b){console[_0x169e83(0x1a8)](_0x169e83(0x188),_0x1ff72b),_0x4f0149['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x1ff72b[_0x169e83(0x1ac)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x4a27b3){const _0x2b9729=a33_0x5f242f;if(!_0x4a27b3)return 0x0;const _0x4e710b=_0x4a27b3['toDate'](),_0xcc7046=new Date(),_0x42a395=Math[_0x2b9729(0x175)](_0xcc7046-_0x4e710b);return Math[_0x2b9729(0x181)](_0x42a395/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x5e4390,_0xcaf993){const _0x5a5651=a33_0x5f242f;try{const _0x1abe28=collection(db,_0x5a5651(0x18c)),_0x4e8767=await getDocs(_0x1abe28),_0x449509=[];_0x4e8767[_0x5a5651(0x1c6)](_0x26f794=>{const _0x4cabbe=_0x5a5651;_0x449509[_0x4cabbe(0x198)]({'id':_0x26f794['id'],..._0x26f794[_0x4cabbe(0x1e0)]()});});const _0x43bd72=_0x449509[_0x5a5651(0x1cf)](_0x39f66b=>_0x39f66b['username']===_0x5e4390),_0x35da05=_0x449509['find'](_0x39793f=>_0x39793f[_0x5a5651(0x176)]===_0xcaf993);if(!_0x43bd72||!_0x35da05){console[_0x5a5651(0x1a8)](_0x5a5651(0x1cb));return;}if(_0x43bd72[_0x5a5651(0x17f)]>_0x35da05['position']){const _0x49e2e8=_0x35da05['position'];for(const _0x2ee94b of _0x449509){_0x2ee94b[_0x5a5651(0x17f)]>=_0x35da05[_0x5a5651(0x17f)]&&_0x2ee94b['position']<_0x43bd72['position']&&_0x2ee94b[_0x5a5651(0x176)]!==_0x5e4390&&await updateDoc(doc(db,_0x5a5651(0x18c),_0x2ee94b['id']),{'position':_0x2ee94b[_0x5a5651(0x17f)]+0x1});}await updateDoc(doc(db,'playersD3',_0x43bd72['id']),{'position':_0x49e2e8});if(_0x49e2e8===0x1){const _0x115211=doc(db,'playersD3',_0x43bd72['id']),_0x2950b6=await getDoc(_0x115211);!_0x2950b6[_0x5a5651(0x1e0)]()[_0x5a5651(0x16c)]&&await updateDoc(_0x115211,{'firstPlaceDate':Timestamp[_0x5a5651(0x1e3)]()});}if(_0x35da05[_0x5a5651(0x17f)]===0x1){const _0x92afa3=doc(db,_0x5a5651(0x18c),_0x35da05['id']);await updateDoc(_0x92afa3,{'firstPlaceDate':null});}}}catch(_0xf34fa4){console['error'](_0x5a5651(0x1ba),_0xf34fa4);}}async function updateLadderDisplayD3(_0x4bf92b){const _0x17a640=a33_0x5f242f;_0x4bf92b['sort']((_0x4ed06d,_0x3b8512)=>_0x4ed06d[_0x17a640(0x17f)]-_0x3b8512[_0x17a640(0x17f)]);const _0x97796e=document[_0x17a640(0x189)]('#ladder-d3\x20tbody');if(!_0x97796e)return;_0x97796e[_0x17a640(0x1b4)]='';const _0x5cfdce=_0x4bf92b['map'](_0xce88e5=>_0xce88e5['username']),_0x228a36=await fetchBatchMatchStatsD3(_0x5cfdce),_0x1ee099=document[_0x17a640(0x189)]('#ladder-d3\x20thead\x20tr');_0x1ee099[_0x17a640(0x1b4)]=_0x17a640(0x179);const _0x2b69a6=_0x4bf92b[_0x17a640(0x166)](_0x233e32=>{const _0x478cf2=_0x17a640,_0x56ed91=_0x228a36[_0x478cf2(0x192)](_0x233e32['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x233e32,_0x56ed91);})[_0x17a640(0x1c8)]('');_0x97796e[_0x17a640(0x1b4)]=_0x2b69a6,getPlayersLastEloChangesD3(_0x5cfdce)[_0x17a640(0x1e1)](_0x4e70de=>{const _0x2127a8=_0x17a640,_0x432913=new Map();_0x97796e[_0x2127a8(0x16f)]('tr')[_0x2127a8(0x1c6)]((_0x2303e2,_0x271707)=>{const _0x3e6913=_0x2127a8;_0x271707<_0x5cfdce[_0x3e6913(0x191)]&&_0x432913[_0x3e6913(0x172)](_0x5cfdce[_0x271707],_0x2303e2);}),_0x4e70de[_0x2127a8(0x1c6)]((_0xa01082,_0xa01ab7)=>{const _0x38e60b=_0x2127a8,_0xc6a6f0=_0x432913[_0x38e60b(0x192)](_0xa01ab7);if(_0xc6a6f0&&_0xa01082!==0x0){const _0x5e0a37=_0xc6a6f0[_0x38e60b(0x189)]('td:nth-child(3)');if(_0x5e0a37){const _0x316d5f=_0xa01082>0x0?'+'+_0xa01082:''+_0xa01082,_0x5862ee=_0x5e0a37[_0x38e60b(0x189)](_0x38e60b(0x193));_0x5862ee&&(_0x5862ee[_0x38e60b(0x1cd)]=_0x316d5f,_0x5862ee[_0x38e60b(0x1aa)][_0x38e60b(0x194)]=_0xa01082>0x0?_0x38e60b(0x1dc):_0x38e60b(0x18e),_0x5862ee[_0x38e60b(0x1aa)][_0x38e60b(0x19e)]=_0x38e60b(0x168),_0x5862ee['style'][_0x38e60b(0x162)]=_0x38e60b(0x161),_0x5862ee[_0x38e60b(0x1aa)][_0x38e60b(0x1c7)]=_0x38e60b(0x199),_0x5862ee[_0x38e60b(0x1aa)][_0x38e60b(0x17a)]=_0x38e60b(0x1d6),_0x5862ee[_0x38e60b(0x1aa)][_0x38e60b(0x180)]='1');}}});})[_0x17a640(0x163)](_0x167e6d=>console['error'](_0x17a640(0x1d0),_0x167e6d));}function a33_0x1c20(){const _0x5a6753=['change','1568ZlTNrV','77twwaHz','previousElo','0.85em','fontSize','catch','54rUECPD','\x20fallback\x20entries','map','D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:','bold','MAX_SAFE_INTEGER','approvedMatchesD3','string','firstPlaceDate','\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a','prototype','querySelectorAll','seconds','winnerUsername','set','D3:\x20Found\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','abs','username','#50C878','3199TChCfk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20','visibility','totalDeaths','head','343848RMsJhw','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','position','opacity','ceil','102MWNRKq','{}.constructor(\x22return\x20this\x22)(\x20)','%</td>\x0a\x20\x20\x20\x20</tr>','size','D3:\x20','eloHistory','Error\x20loading\x20D3\x20ladder:','querySelector','eloHistoryD3','#FFD700','playersD3','eloRating','#F44336','country','kda','length','get','.trend-indicator','color','38225yVlisd',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','totalMatches','push','inline','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','1007984bAUJbu','userProfiles','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','fontWeight','D3:\x20Error\x20fetching\x20ELO\x20history:','toLowerCase','D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...','desc','15752KLPWch','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','66590JEUSgU','has','constructor','error','player','style','from','message','entries','wins','D3\x20Ladder\x20table\x20body\x20not\x20found','console','filter','(((.+)+)+)+$','33luabdU','innerHTML','bind','winnerScore','D3:\x20Found\x20entries\x20for\x20','toString','#CD7F32','Error\x20updating\x20D3\x20player\x20positions:','#ladder-d3\x20tbody','table','includes','winRate','loserUsername','D3:\x20Player\x20ID\x20mappings:','233070aZlKIe','sort','\x20ELO\x20change:\x20','log','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','forEach','display','join','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','createElement','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','toFixed','textContent','playerUsername','find','Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:','newElo','#C0C0C0',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','timestamp','search','visible','D3:\x20Found\x20pilot\x20entry:','empty','playerId','elo','\x20players','#4CAF50','apply','pilot','totalKills','data','then','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','now','losses'];a33_0x1c20=function(){return _0x5a6753;};return a33_0x1c20();}async function fetchBatchMatchStatsD3(_0x15c0ec){const _0x3dc541=a33_0x5f242f,_0x1b3ce3=new Map();try{const _0x174ebc=collection(db,_0x3dc541(0x16a)),_0x2dd8a8=await getDocs(_0x174ebc);_0x2dd8a8['forEach'](_0x3eeae9=>{const _0x1c61d1=_0x3dc541,_0x73594d=_0x3eeae9['data']();if(_0x15c0ec[_0x1c61d1(0x1bd)](_0x73594d[_0x1c61d1(0x171)])){const _0xb74367=_0x73594d['winnerUsername'];!_0x1b3ce3[_0x1c61d1(0x1a6)](_0xb74367)&&_0x1b3ce3[_0x1c61d1(0x172)](_0xb74367,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x3e0d6b=_0x1b3ce3[_0x1c61d1(0x192)](_0xb74367);_0x3e0d6b[_0x1c61d1(0x1ae)]++,_0x3e0d6b['totalMatches']++,_0x3e0d6b['totalKills']+=parseInt(_0x73594d['winnerScore'])||0x0,_0x3e0d6b[_0x1c61d1(0x17b)]+=parseInt(_0x73594d['loserScore'])||0x0;}if(_0x15c0ec[_0x1c61d1(0x1bd)](_0x73594d[_0x1c61d1(0x1bf)])){const _0x16ee1f=_0x73594d[_0x1c61d1(0x1bf)];!_0x1b3ce3[_0x1c61d1(0x1a6)](_0x16ee1f)&&_0x1b3ce3[_0x1c61d1(0x172)](_0x16ee1f,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x2fefc0=_0x1b3ce3[_0x1c61d1(0x192)](_0x16ee1f);_0x2fefc0['losses']++,_0x2fefc0['totalMatches']++,_0x2fefc0[_0x1c61d1(0x1df)]+=parseInt(_0x73594d['loserScore'])||0x0,_0x2fefc0[_0x1c61d1(0x17b)]+=parseInt(_0x73594d[_0x1c61d1(0x1b6)])||0x0;}}),_0x1b3ce3[_0x3dc541(0x1c6)](_0x18a78e=>{const _0x3c051f=_0x3dc541;_0x18a78e[_0x3c051f(0x190)]=_0x18a78e[_0x3c051f(0x17b)]>0x0?(_0x18a78e[_0x3c051f(0x1df)]/_0x18a78e[_0x3c051f(0x17b)])[_0x3c051f(0x1cc)](0x2):_0x18a78e[_0x3c051f(0x1df)],_0x18a78e[_0x3c051f(0x1be)]=_0x18a78e['totalMatches']>0x0?(_0x18a78e[_0x3c051f(0x1ae)]/_0x18a78e[_0x3c051f(0x197)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x30396f){console[_0x3dc541(0x1a8)](_0x3dc541(0x19d),_0x30396f);}return _0x1b3ce3;}function createPlayerRowD3(_0xacee8e,_0x338b32){const _0x36262d=a33_0x5f242f,_0x1ecb02=parseFloat(_0xacee8e[_0x36262d(0x1da)])||0x0;let _0x1c0458='gray';if(_0x1ecb02>=0x7d0)_0x1c0458=_0x36262d(0x177);else{if(_0x1ecb02>=0x708)_0x1c0458=_0x36262d(0x18b);else{if(_0x1ecb02>=0x640)_0x1c0458=_0x36262d(0x1d2);else _0x1ecb02>=0x578&&(_0x1c0458=_0x36262d(0x1b9));}}let _0xf777b6='';return _0xacee8e[_0x36262d(0x18f)]&&(_0xf777b6='<img\x20src=\x22../images/flags/'+_0xacee8e[_0x36262d(0x18f)][_0x36262d(0x1a0)]()+_0x36262d(0x1c9)+_0xacee8e[_0x36262d(0x18f)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x36262d(0x19a)+_0xacee8e['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0xacee8e[_0x36262d(0x176)])+_0x36262d(0x17e)+_0x1c0458+_0x36262d(0x1d3)+_0xacee8e['username']+_0x36262d(0x1a4)+_0xf777b6+_0x36262d(0x1e2)+_0x1c0458+_0x36262d(0x196)+_0x1ecb02+_0x36262d(0x1c5)+_0x338b32[_0x36262d(0x197)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x338b32[_0x36262d(0x1ae)]+_0x36262d(0x174)+_0x338b32[_0x36262d(0x15c)]+_0x36262d(0x174)+_0x338b32['kda']+_0x36262d(0x174)+_0x338b32['winRate']+_0x36262d(0x184);}async function getPlayersLastEloChangesD3(_0x206e25){const _0x594d21=a33_0x5f242f,_0x55e597=new Map();_0x206e25[_0x594d21(0x1c6)](_0x570b50=>_0x55e597[_0x594d21(0x172)](_0x570b50,0x0));try{console[_0x594d21(0x1c4)](_0x594d21(0x167),_0x206e25);const _0x3892f1=new Map(),_0x266023=await getDocs(collection(db,_0x594d21(0x18c)));_0x266023[_0x594d21(0x1c6)](_0x12ea2b=>{const _0x52b846=_0x594d21,_0x277e3e=_0x12ea2b[_0x52b846(0x1e0)]();_0x277e3e[_0x52b846(0x176)]&&_0x3892f1[_0x52b846(0x172)](_0x12ea2b['id'],_0x277e3e[_0x52b846(0x176)]);}),console[_0x594d21(0x1c4)](_0x594d21(0x1c0),Array[_0x594d21(0x1ab)](_0x3892f1[_0x594d21(0x1ad)]()));const _0x462000=collection(db,_0x594d21(0x18a)),_0x43d7f4=query(_0x462000,orderBy(_0x594d21(0x1d4),_0x594d21(0x1a2)),limit(0x64)),_0x25926b=await getDocs(_0x43d7f4);_0x25926b[_0x594d21(0x1d8)]?console[_0x594d21(0x1c4)](_0x594d21(0x1a1)):console[_0x594d21(0x1c4)](_0x594d21(0x173)+_0x25926b[_0x594d21(0x185)]+'\x20entries\x20in\x20eloHistoryD3');const _0x29cba4=new Map();_0x25926b[_0x594d21(0x1c6)](_0x460d12=>{const _0x4ff3b7=_0x594d21,_0x4ef751=_0x460d12[_0x4ff3b7(0x1e0)]();let _0x19610a=null;if(_0x4ef751['username'])_0x19610a=_0x4ef751['username'];else{if(_0x4ef751['playerUsername'])_0x19610a=_0x4ef751[_0x4ff3b7(0x1ce)];else{if(_0x4ef751[_0x4ff3b7(0x1a9)]&&typeof _0x4ef751[_0x4ff3b7(0x1a9)]===_0x4ff3b7(0x16b))_0x19610a=_0x4ef751[_0x4ff3b7(0x1a9)];else{if(_0x4ef751['player']&&_0x3892f1[_0x4ff3b7(0x1a6)](_0x4ef751[_0x4ff3b7(0x1a9)]))_0x19610a=_0x3892f1['get'](_0x4ef751[_0x4ff3b7(0x1a9)]);else _0x4ef751[_0x4ff3b7(0x1d9)]&&_0x3892f1[_0x4ff3b7(0x1a6)](_0x4ef751[_0x4ff3b7(0x1d9)])&&(_0x19610a=_0x3892f1[_0x4ff3b7(0x192)](_0x4ef751[_0x4ff3b7(0x1d9)]));}}}(_0x4ef751[_0x4ff3b7(0x176)]===_0x4ff3b7(0x1de)||_0x4ef751['playerUsername']===_0x4ff3b7(0x1de)||_0x4ef751['player']&&_0x3892f1[_0x4ff3b7(0x192)](_0x4ef751[_0x4ff3b7(0x1a9)])===_0x4ff3b7(0x1de))&&console['log'](_0x4ff3b7(0x1d7),_0x4ef751),_0x19610a&&_0x206e25['includes'](_0x19610a)&&(!_0x29cba4[_0x4ff3b7(0x1a6)](_0x19610a)&&_0x29cba4[_0x4ff3b7(0x172)](_0x19610a,[]),_0x29cba4[_0x4ff3b7(0x192)](_0x19610a)[_0x4ff3b7(0x198)]({..._0x4ef751,'timestamp':_0x4ef751[_0x4ff3b7(0x1d4)]?.[_0x4ff3b7(0x170)]||0x0}));}),console[_0x594d21(0x1c4)](_0x594d21(0x1b7)+_0x29cba4[_0x594d21(0x185)]+_0x594d21(0x1db)),_0x29cba4[_0x594d21(0x1c6)]((_0x30f148,_0x157f72)=>{const _0x4d22a0=_0x594d21;if(_0x30f148[_0x4d22a0(0x191)]>0x0){_0x30f148[_0x4d22a0(0x1c2)]((_0x3a17b1,_0x25aa1b)=>_0x25aa1b[_0x4d22a0(0x1d4)]-_0x3a17b1[_0x4d22a0(0x1d4)]);const _0x300a94=_0x30f148[_0x4d22a0(0x1cf)](_0x4d2b04=>_0x4d2b04[_0x4d22a0(0x15d)]!==undefined||_0x4d2b04[_0x4d22a0(0x1d1)]!==undefined&&_0x4d2b04[_0x4d22a0(0x160)]!==undefined);if(_0x300a94){let _0x5f9ce6;if(_0x300a94[_0x4d22a0(0x15d)]!==undefined)_0x5f9ce6=_0x300a94[_0x4d22a0(0x15d)];else _0x300a94[_0x4d22a0(0x1d1)]!==undefined&&_0x300a94['previousElo']!==undefined&&(_0x5f9ce6=_0x300a94[_0x4d22a0(0x1d1)]-_0x300a94['previousElo']);_0x5f9ce6!==undefined&&(_0x55e597['set'](_0x157f72,_0x5f9ce6),console[_0x4d22a0(0x1c4)](_0x4d22a0(0x186)+_0x157f72+_0x4d22a0(0x1c3)+_0x5f9ce6));}}});if(_0x29cba4['size']===0x0){console[_0x594d21(0x1c4)]('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x56a796=collection(db,_0x594d21(0x187)),_0x53cbf5=query(_0x56a796,where('gameMode','==','D3'),orderBy(_0x594d21(0x1d4),_0x594d21(0x1a2)),limit(0x32));try{const _0xe51061=await getDocs(_0x53cbf5);console[_0x594d21(0x1c4)](_0x594d21(0x173)+_0xe51061[_0x594d21(0x185)]+_0x594d21(0x165)),_0xe51061[_0x594d21(0x1c6)](_0x3f8616=>{const _0x4f3f34=_0x594d21,_0x21b5fa=_0x3f8616['data']();let _0x3c2ea0=_0x21b5fa['username']||_0x21b5fa[_0x4f3f34(0x1ce)];!_0x3c2ea0&&_0x21b5fa[_0x4f3f34(0x1a9)]&&_0x3892f1[_0x4f3f34(0x1a6)](_0x21b5fa['player'])&&(_0x3c2ea0=_0x3892f1[_0x4f3f34(0x192)](_0x21b5fa['player']));if(_0x3c2ea0&&_0x206e25[_0x4f3f34(0x1bd)](_0x3c2ea0)){const _0x2561a1=_0x21b5fa['change']||(_0x21b5fa[_0x4f3f34(0x1d1)]!==undefined&&_0x21b5fa[_0x4f3f34(0x160)]!==undefined?_0x21b5fa[_0x4f3f34(0x1d1)]-_0x21b5fa[_0x4f3f34(0x160)]:0x0);_0x2561a1!==0x0&&(_0x55e597[_0x4f3f34(0x172)](_0x3c2ea0,_0x2561a1),console[_0x4f3f34(0x1c4)](_0x4f3f34(0x186)+_0x3c2ea0+'\x20fallback\x20ELO\x20change:\x20'+_0x2561a1));}});}catch(_0xef7951){console[_0x594d21(0x1c4)]('D3:\x20Fallback\x20query\x20failed:',_0xef7951);}}const _0x24f395=Array[_0x594d21(0x1ab)](_0x55e597[_0x594d21(0x1ad)]())[_0x594d21(0x1b1)](([_0x45d3dc,_0x4b94d5])=>_0x4b94d5!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x24f395);}catch(_0x1c2a8c){console[_0x594d21(0x1a8)](_0x594d21(0x19f),_0x1c2a8c);}return _0x55e597;}export{displayLadderD3,updatePlayerPositions};