const a25_0x33e539=a25_0x282a,a25_0x3c678b=(function(){let _0x12ea4b=!![];return function(_0xcf6582,_0x2d8e94){const _0x2ef065=_0x12ea4b?function(){const _0x3929fe=a25_0x282a;if(_0x2d8e94){const _0x36f916=_0x2d8e94[_0x3929fe(0xa4)](_0xcf6582,arguments);return _0x2d8e94=null,_0x36f916;}}:function(){};return _0x12ea4b=![],_0x2ef065;};}()),a25_0x4f2210=a25_0x3c678b(this,function(){const _0x4e6266=a25_0x282a;let _0x2bbfee;try{const _0x87647d=Function('return\x20(function()\x20'+_0x4e6266(0xc7)+');');_0x2bbfee=_0x87647d();}catch(_0x38397b){_0x2bbfee=window;}const _0x13b48a=_0x2bbfee['console']=_0x2bbfee[_0x4e6266(0xa7)]||{},_0x2b7478=[_0x4e6266(0xbf),_0x4e6266(0xc4),'info','error','exception',_0x4e6266(0xa5),'trace'];for(let _0x4ab4d5=0x0;_0x4ab4d5<_0x2b7478['length'];_0x4ab4d5++){const _0x322f65=a25_0x3c678b[_0x4e6266(0xc6)]['prototype'][_0x4e6266(0xc8)](a25_0x3c678b),_0x28a5a3=_0x2b7478[_0x4ab4d5],_0x3848f9=_0x13b48a[_0x28a5a3]||_0x322f65;_0x322f65['__proto__']=a25_0x3c678b[_0x4e6266(0xc8)](a25_0x3c678b),_0x322f65[_0x4e6266(0x9c)]=_0x3848f9[_0x4e6266(0x9c)]['bind'](_0x3848f9),_0x13b48a[_0x28a5a3]=_0x322f65;}});a25_0x4f2210();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener'](a25_0x33e539(0xbc),()=>{const _0x3a9166=a25_0x33e539,_0x55511a=document['getElementById']('d1-switch'),_0x4bbfc1=document[_0x3a9166(0xb0)](_0x3a9166(0xa2));console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x55511a),console[_0x3a9166(0xbf)](_0x3a9166(0xa0),!!_0x4bbfc1);function _0x5167e1(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0x522a38=>{const _0x4ed7c7=a25_0x282a;_0x522a38[_0x4ed7c7(0xa8)](_0x4ed7c7(0xab),_0xd59ad0=>{_0xd59ad0['target']['checked']&&(currentLadder=_0xd59ad0['target']['value'],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x5167e1();const _0x3af2c4=document['getElementById']('join-ladder-button');_0x3af2c4&&_0x3af2c4['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x303494=>{if(_0x303494)checkUserLadderStatus();else{const _0x4e7b00=document['getElementById']('ladder-join-prompt');_0x4e7b00&&(_0x4e7b00['style']['display']='none');}});});function getCollectionName(_0x543e0e){const _0x3ee6a2=a25_0x33e539;switch(_0x543e0e?.['toUpperCase']()){case'D1':return _0x3ee6a2(0xbb);case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case'DUO':return _0x3ee6a2(0xb6);case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x543e0e+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x48a1c4=a25_0x33e539;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x331421=auth['currentUser'],_0x488a1c=document['getElementById']('ladder-join-prompt'),_0x866784=document['getElementById']('join-ladder-type'),_0x3462b4=document[_0x48a1c4(0xb0)]('tiny-join-button');if(!_0x331421||!_0x331421['uid']||!_0x488a1c||!_0x866784||!_0x3462b4){if(_0x488a1c)_0x488a1c['style']['display']='none';if(_0x3462b4)_0x3462b4[_0x48a1c4(0xb5)]['display']='none';return;}try{try{await _0x331421[_0x48a1c4(0xbe)](![]);}catch(_0x5acdfb){console['error'](_0x48a1c4(0xcc),_0x5acdfb),_0x488a1c[_0x48a1c4(0xb5)][_0x48a1c4(0xb4)]='none',_0x3462b4['style'][_0x48a1c4(0xb4)]=_0x48a1c4(0xc0);return;}const _0x2093db=getCollectionName(currentLadder),_0x5927f6=doc(db,_0x2093db,_0x331421['uid']),_0x1e4003=await getDoc(_0x5927f6);if(_0x1e4003[_0x48a1c4(0x9e)]())_0x488a1c['style']['display']='none',_0x3462b4['style']['display']='none';else{_0x488a1c['style'][_0x48a1c4(0xb4)]='none',_0x3462b4[_0x48a1c4(0xb5)][_0x48a1c4(0xb4)]='block',_0x866784['textContent']=currentLadder,_0x3462b4['onclick']=()=>{const _0x3c903d=_0x48a1c4;_0x488a1c[_0x3c903d(0xb5)]['display']===_0x3c903d(0xae)?_0x488a1c['style']['display']='none':_0x488a1c['style']['display']='block';};const _0x46d55c=document['getElementById'](_0x48a1c4(0xaa)),_0x52fa2b=document['getElementById'](_0x48a1c4(0xc9));if(_0x46d55c)_0x46d55c['value']='';_0x52fa2b&&(_0x52fa2b[_0x48a1c4(0xba)]='',_0x52fa2b['className']='ladder-join-status');}}catch(_0x568a26){console['error']('Error\x20checking\x20ladder\x20status:',_0x568a26),_0x488a1c[_0x48a1c4(0xb5)]['display']=_0x48a1c4(0xc0),_0x3462b4[_0x48a1c4(0xb5)]['display']='none';}}function a25_0x282a(_0x33faf0,_0x4a0bac){const _0x4f2210=a25_0x27e6();return a25_0x282a=function(_0x3c678b,_0x26c487){_0x3c678b=_0x3c678b-0x9b;let _0x27e677=_0x4f2210[_0x3c678b];return _0x27e677;},a25_0x282a(_0x33faf0,_0x4a0bac);}function a25_0x27e6(){const _0x33ecea=['DUOS','toString','nonParticipants','exists','disabled','Ladder\x20join:\x20D2\x20radio\x20found:','className','d2-switch','playersD3','apply','table','Please\x20enter\x20your\x20username\x20to\x20confirm.','console','addEventListener','position','join-username-input','change','playersD2','error','block','ladder-join-status\x20loading','getElementById','playersCTF','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','\x20ladder...','display','style','playersDuos','email','message','data','textContent','players','DOMContentLoaded','Successfully\x20joined\x20the\x20','getIdToken','log','none','uid','Verifying\x20username...','empty','warn','ladder-join-status\x20error','constructor','{}.constructor(\x22return\x20this\x22)(\x20)','bind','ladder-join-status','trim','docs','Authentication\x20verification\x20failed:'];a25_0x27e6=function(){return _0x33ecea;};return a25_0x27e6();}async function handleJoinLadder(){const _0x3e02d2=a25_0x33e539,_0x3db9c4=auth['currentUser'],_0x4d0833=document[_0x3e02d2(0xb0)]('join-ladder-button'),_0x28b200=document['getElementById']('ladder-join-status'),_0x3f5fe9=document['getElementById'](_0x3e02d2(0xaa));if(!_0x3db9c4||!_0x3db9c4['uid']){_0x28b200[_0x3e02d2(0xba)]='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x28b200['className']=_0x3e02d2(0xc5);return;}try{await _0x3db9c4[_0x3e02d2(0xbe)](!![]);}catch(_0x4aa594){console['error']('Authentication\x20error:',_0x4aa594),_0x28b200[_0x3e02d2(0xba)]=_0x3e02d2(0xb2),_0x28b200['className']=_0x3e02d2(0xc5);return;}if(!_0x3f5fe9||!_0x3f5fe9['value'][_0x3e02d2(0xca)]()){_0x28b200[_0x3e02d2(0xba)]=_0x3e02d2(0xa6),_0x28b200['className']=_0x3e02d2(0xc5);return;}try{_0x4d0833[_0x3e02d2(0x9f)]=!![],_0x28b200['textContent']=_0x3e02d2(0xc2),_0x28b200['className']=_0x3e02d2(0xaf);let _0x21aa5c='',_0x124d26=null;const _0x181837=['players',_0x3e02d2(0xac),_0x3e02d2(0xa3),'playersDuos',_0x3e02d2(0xb1),_0x3e02d2(0x9d)];for(const _0x27f16c of _0x181837){try{const _0x417800=doc(db,_0x27f16c,_0x3db9c4[_0x3e02d2(0xc1)]),_0x5546f9=await getDoc(_0x417800);if(_0x5546f9['exists']()){_0x124d26=_0x5546f9['data']();if(_0x124d26['username']){_0x21aa5c=_0x124d26['username'];break;}}}catch(_0x26e56c){console[_0x3e02d2(0xad)]('Error\x20checking\x20'+_0x27f16c+':',_0x26e56c);}}!_0x21aa5c&&_0x3db9c4['email']&&(_0x21aa5c=_0x3db9c4[_0x3e02d2(0xb7)]['split']('@')[0x0]);if(!_0x21aa5c){_0x28b200['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x28b200['className']='ladder-join-status\x20error',_0x4d0833[_0x3e02d2(0x9f)]=![];return;}const _0x254cc2=_0x3f5fe9['value']['trim']();if(_0x21aa5c&&_0x254cc2['toLowerCase']()!==_0x21aa5c['toLowerCase']()){_0x28b200[_0x3e02d2(0xba)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x21aa5c+'\x22\x20to\x20confirm.',_0x28b200[_0x3e02d2(0xa1)]='ladder-join-status\x20error',_0x4d0833[_0x3e02d2(0x9f)]=![];return;}_0x28b200['textContent']='Joining\x20'+currentLadder+_0x3e02d2(0xb3);const _0x4151c7=getCollectionName(currentLadder),_0x467f33=doc(db,_0x4151c7,_0x3db9c4['uid']),_0x1982aa=await getDoc(_0x467f33);if(_0x1982aa['exists']()){_0x28b200['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x28b200['className']='ladder-join-status\x20error',_0x4d0833[_0x3e02d2(0x9f)]=![];return;}try{await _0x3db9c4['getIdToken'](!![]);}catch(_0xf1affc){_0x28b200['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x28b200['className']=_0x3e02d2(0xc5),_0x4d0833['disabled']=![];return;}const _0x54ecfc=_0x21aa5c,_0x4113d4=collection(db,_0x4151c7),_0x4a86fc=query(_0x4113d4,orderBy(_0x3e02d2(0xa9),'desc'),limit(0x1)),_0x5e4389=await getDocs(_0x4a86fc);let _0x3f2164=0x1;if(!_0x5e4389[_0x3e02d2(0xc3)]){const _0x3a37db=_0x5e4389[_0x3e02d2(0xcb)][0x0][_0x3e02d2(0xb9)]();_0x3f2164=(_0x3a37db[_0x3e02d2(0xa9)]||0x0)+0x1;}const _0x1e3023={'username':_0x54ecfc,'email':_0x3db9c4[_0x3e02d2(0xb7)],'eloRating':0x4b0,'position':_0x3f2164,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===_0x3e02d2(0x9b)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x467f33,_0x1e3023),currentLadder===_0x3e02d2(0x9b)?_0x28b200[_0x3e02d2(0xba)]='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x28b200['textContent']=_0x3e02d2(0xbd)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x28b200[_0x3e02d2(0xa1)]='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x448446){console['error']('Error\x20joining\x20ladder:',_0x448446),_0x28b200['textContent']='Error\x20joining\x20ladder:\x20'+_0x448446[_0x3e02d2(0xb8)],_0x28b200['className']='ladder-join-status\x20error',_0x4d0833['disabled']=![];}}