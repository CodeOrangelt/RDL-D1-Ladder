const a23_0x2c3244=a23_0x3a32,a23_0x4ebc7e=(function(){let _0xa0b162=!![];return function(_0x12da21,_0x92e06b){const _0x539bd9=_0xa0b162?function(){if(_0x92e06b){const _0xaf9f3=_0x92e06b['apply'](_0x12da21,arguments);return _0x92e06b=null,_0xaf9f3;}}:function(){};return _0xa0b162=![],_0x539bd9;};}()),a23_0x37d87d=a23_0x4ebc7e(this,function(){const _0xc28d92=a23_0x3a32;let _0x51d897;try{const _0xd29fa4=Function('return\x20(function()\x20'+_0xc28d92(0x1d9)+');');_0x51d897=_0xd29fa4();}catch(_0x5b6c64){_0x51d897=window;}const _0x583db1=_0x51d897['console']=_0x51d897[_0xc28d92(0x1bb)]||{},_0x38f3bb=['log',_0xc28d92(0x1c9),_0xc28d92(0x1ce),_0xc28d92(0x1e0),'exception',_0xc28d92(0x1ba),_0xc28d92(0x1c3)];for(let _0x4dba12=0x0;_0x4dba12<_0x38f3bb['length'];_0x4dba12++){const _0x54545b=a23_0x4ebc7e['constructor'][_0xc28d92(0x1b8)]['bind'](a23_0x4ebc7e),_0x57175b=_0x38f3bb[_0x4dba12],_0x500844=_0x583db1[_0x57175b]||_0x54545b;_0x54545b['__proto__']=a23_0x4ebc7e['bind'](a23_0x4ebc7e),_0x54545b['toString']=_0x500844['toString']['bind'](_0x500844),_0x583db1[_0x57175b]=_0x54545b;}});a23_0x37d87d();function a23_0x4c4a(){const _0x41f5ac=['tiny-join-button','toLowerCase','target','position','You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.','trim','prototype','Successfully\x20joined\x20the\x20','table','console','Joining\x20','Ladder\x20join:\x20D1\x20radio\x20found:','forEach','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','getIdToken','Checking\x20user\x20status\x20for\x20ladder:','ladder-join-status','trace',',\x20defaulting\x20to\x20D1','players','input[name=\x22ladder\x22]','ladder-join-status\x20success','email','warn','join-username-input','Please\x20enter\x20your\x20username\x20to\x20confirm.','style','getElementById','info','exists','querySelectorAll','nonParticipants','CTF','className','disabled','none','d2-switch','ladder-join-status\x20error','uid','{}.constructor(\x22return\x20this\x22)(\x20)','Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...','textContent','data','DUOS','display','DOMContentLoaded','error','log','playersD2'];a23_0x4c4a=function(){return _0x41f5ac;};return a23_0x4c4a();}import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener'](a23_0x2c3244(0x1df),()=>{const _0x20d165=a23_0x2c3244,_0x529d24=document['getElementById']('d1-switch'),_0x16f130=document['getElementById'](_0x20d165(0x1d6));console['log'](_0x20d165(0x1bd),!!_0x529d24),console[_0x20d165(0x1e1)]('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x16f130);function _0x5c122d(){const _0x5d0c9a=_0x20d165;document[_0x5d0c9a(0x1d0)](_0x5d0c9a(0x1c6))[_0x5d0c9a(0x1be)](_0x4c75dc=>{_0x4c75dc['addEventListener']('change',_0x2556d5=>{const _0x2e1232=a23_0x3a32;_0x2556d5[_0x2e1232(0x1b4)]['checked']&&(currentLadder=_0x2556d5['target']['value'],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x5c122d();const _0x4c983b=document['getElementById']('join-ladder-button');_0x4c983b&&_0x4c983b['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x3754c1=>{if(_0x3754c1)checkUserLadderStatus();else{const _0x10bdf1=document['getElementById']('ladder-join-prompt');_0x10bdf1&&(_0x10bdf1['style']['display']='none');}});});function a23_0x3a32(_0x412b02,_0x1bc7de){const _0x37d87d=a23_0x4c4a();return a23_0x3a32=function(_0x4ebc7e,_0x56ef0e){_0x4ebc7e=_0x4ebc7e-0x1b2;let _0x4c4a2c=_0x37d87d[_0x4ebc7e];return _0x4c4a2c;},a23_0x3a32(_0x412b02,_0x1bc7de);}function getCollectionName(_0x5cc40f){const _0x211ecb=a23_0x2c3244;switch(_0x5cc40f?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case'DUO':return'playersDuos';case _0x211ecb(0x1d2):return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x5cc40f+_0x211ecb(0x1c4));return _0x211ecb(0x1c5);}}async function checkUserLadderStatus(){const _0xaf1e2f=a23_0x2c3244;console['log'](_0xaf1e2f(0x1c1),currentLadder);const _0x126fe2=auth['currentUser'],_0x128601=document[_0xaf1e2f(0x1cd)]('ladder-join-prompt'),_0x5c307c=document['getElementById']('join-ladder-type'),_0x551924=document[_0xaf1e2f(0x1cd)](_0xaf1e2f(0x1b2));if(!_0x126fe2||!_0x126fe2[_0xaf1e2f(0x1d8)]||!_0x128601||!_0x5c307c||!_0x551924){if(_0x128601)_0x128601['style'][_0xaf1e2f(0x1de)]=_0xaf1e2f(0x1d5);if(_0x551924)_0x551924['style'][_0xaf1e2f(0x1de)]='none';return;}try{try{await _0x126fe2['getIdToken'](![]);}catch(_0x222d36){console['error']('Authentication\x20verification\x20failed:',_0x222d36),_0x128601['style']['display']='none',_0x551924['style'][_0xaf1e2f(0x1de)]='none';return;}const _0x3ce8d0=getCollectionName(currentLadder),_0x2c454d=doc(db,_0x3ce8d0,_0x126fe2[_0xaf1e2f(0x1d8)]),_0x10a0ef=await getDoc(_0x2c454d);if(_0x10a0ef['exists']())_0x128601['style']['display']=_0xaf1e2f(0x1d5),_0x551924[_0xaf1e2f(0x1cc)][_0xaf1e2f(0x1de)]='none';else{_0x128601['style']['display']=_0xaf1e2f(0x1d5),_0x551924['style'][_0xaf1e2f(0x1de)]='block',_0x5c307c['textContent']=currentLadder,_0x551924['onclick']=()=>{const _0x247f3c=_0xaf1e2f;_0x128601['style'][_0x247f3c(0x1de)]==='block'?_0x128601['style'][_0x247f3c(0x1de)]='none':_0x128601['style']['display']='block';};const _0x4cbce3=document[_0xaf1e2f(0x1cd)](_0xaf1e2f(0x1ca)),_0x26b76e=document['getElementById'](_0xaf1e2f(0x1c2));if(_0x4cbce3)_0x4cbce3['value']='';_0x26b76e&&(_0x26b76e['textContent']='',_0x26b76e['className']='ladder-join-status');}}catch(_0x27c752){console['error']('Error\x20checking\x20ladder\x20status:',_0x27c752),_0x128601['style']['display']='none',_0x551924['style']['display']='none';}}async function handleJoinLadder(){const _0x572928=a23_0x2c3244,_0x5d68d0=auth['currentUser'],_0x47db34=document[_0x572928(0x1cd)]('join-ladder-button'),_0x3964b4=document['getElementById']('ladder-join-status'),_0x53b6c6=document['getElementById']('join-username-input');if(!_0x5d68d0||!_0x5d68d0[_0x572928(0x1d8)]){_0x3964b4[_0x572928(0x1db)]=_0x572928(0x1b6),_0x3964b4['className']=_0x572928(0x1d7);return;}try{await _0x5d68d0[_0x572928(0x1c0)](!![]);}catch(_0xa568e6){console[_0x572928(0x1e0)]('Authentication\x20error:',_0xa568e6),_0x3964b4['textContent']=_0x572928(0x1bf),_0x3964b4[_0x572928(0x1d3)]='ladder-join-status\x20error';return;}if(!_0x53b6c6||!_0x53b6c6['value']['trim']()){_0x3964b4[_0x572928(0x1db)]=_0x572928(0x1cb),_0x3964b4['className']='ladder-join-status\x20error';return;}try{_0x47db34['disabled']=!![],_0x3964b4[_0x572928(0x1db)]='Verifying\x20username...',_0x3964b4['className']='ladder-join-status\x20loading';let _0x3e9e81='',_0x439809=null;const _0x2cc195=['players',_0x572928(0x1e2),'playersD3','playersDuos','playersCTF',_0x572928(0x1d1)];for(const _0x548793 of _0x2cc195){try{const _0x1d11a1=doc(db,_0x548793,_0x5d68d0['uid']),_0x8afe82=await getDoc(_0x1d11a1);if(_0x8afe82[_0x572928(0x1cf)]()){_0x439809=_0x8afe82['data']();if(_0x439809['username']){_0x3e9e81=_0x439809['username'];break;}}}catch(_0xc539c5){console['error']('Error\x20checking\x20'+_0x548793+':',_0xc539c5);}}!_0x3e9e81&&_0x5d68d0['email']&&(_0x3e9e81=_0x5d68d0[_0x572928(0x1c8)]['split']('@')[0x0]);if(!_0x3e9e81){_0x3964b4[_0x572928(0x1db)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x3964b4['className']='ladder-join-status\x20error',_0x47db34[_0x572928(0x1d4)]=![];return;}const _0x5c6b82=_0x53b6c6['value'][_0x572928(0x1b7)]();if(_0x3e9e81&&_0x5c6b82['toLowerCase']()!==_0x3e9e81[_0x572928(0x1b3)]()){_0x3964b4['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x3e9e81+'\x22\x20to\x20confirm.',_0x3964b4['className']='ladder-join-status\x20error',_0x47db34['disabled']=![];return;}_0x3964b4['textContent']=_0x572928(0x1bc)+currentLadder+'\x20ladder...';const _0x1c90b2=getCollectionName(currentLadder),_0x4b5bdf=doc(db,_0x1c90b2,_0x5d68d0[_0x572928(0x1d8)]),_0x31cf28=await getDoc(_0x4b5bdf);if(_0x31cf28['exists']()){_0x3964b4[_0x572928(0x1db)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x3964b4[_0x572928(0x1d3)]='ladder-join-status\x20error',_0x47db34['disabled']=![];return;}try{await _0x5d68d0['getIdToken'](!![]);}catch(_0x784cc2){_0x3964b4['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x3964b4['className']=_0x572928(0x1d7),_0x47db34['disabled']=![];return;}const _0xf62740=_0x3e9e81,_0x3ba52e=collection(db,_0x1c90b2),_0x4631dc=query(_0x3ba52e,orderBy(_0x572928(0x1b5),'desc'),limit(0x1)),_0x3f5cc0=await getDocs(_0x4631dc);let _0x49fa61=0x1;if(!_0x3f5cc0['empty']){const _0x4b46aa=_0x3f5cc0['docs'][0x0][_0x572928(0x1dc)]();_0x49fa61=(_0x4b46aa['position']||0x0)+0x1;}const _0x1fc6bd={'username':_0xf62740,'email':_0x5d68d0['email'],'eloRating':0x4b0,'position':_0x49fa61,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===_0x572928(0x1dd)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x4b5bdf,_0x1fc6bd),currentLadder==='DUOS'?_0x3964b4['textContent']=_0x572928(0x1da):_0x3964b4['textContent']=_0x572928(0x1b9)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x3964b4['className']=_0x572928(0x1c7),setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x66d82b){console['error']('Error\x20joining\x20ladder:',_0x66d82b),_0x3964b4[_0x572928(0x1db)]='Error\x20joining\x20ladder:\x20'+_0x66d82b['message'],_0x3964b4['className']='ladder-join-status\x20error',_0x47db34['disabled']=![];}}