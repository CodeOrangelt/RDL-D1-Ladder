const a16_0x39e867=a16_0x3589;(function(_0x2c530a,_0x5be5bf){const _0x1d480d=a16_0x3589,_0xf2e931=_0x2c530a();while(!![]){try{const _0x35772e=-parseInt(_0x1d480d(0x10c))/0x1+parseInt(_0x1d480d(0xfe))/0x2*(parseInt(_0x1d480d(0xe9))/0x3)+parseInt(_0x1d480d(0xef))/0x4+parseInt(_0x1d480d(0x116))/0x5*(parseInt(_0x1d480d(0xf5))/0x6)+parseInt(_0x1d480d(0xf2))/0x7+-parseInt(_0x1d480d(0xe7))/0x8+parseInt(_0x1d480d(0xf0))/0x9*(-parseInt(_0x1d480d(0x104))/0xa);if(_0x35772e===_0x5be5bf)break;else _0xf2e931['push'](_0xf2e931['shift']());}catch(_0x456724){_0xf2e931['push'](_0xf2e931['shift']());}}}(a16_0x10e4,0x52cac));function a16_0x10e4(){const _0xa5f275=['{}.constructor(\x22return\x20this\x22)(\x20)','Unknown\x20Player','search','93213pocKfo','error','Unranked','all','timestamp','__proto__','constructor','players','warn','Silver','505TSRadw','eloHistory','4798736bDYaLE','username','20730tlivWH','Bronze','table','map','log','exception','1701212EanbVy','9DhEjJS','console','3690379WrNXXq','newElo','opponent','39804fetxnm','trace','player','data','demotion','bind','match','length','apply','166DfUwQB','desc','ELO\x20history\x20recorded\x20for\x20','Error\x20recording\x20ELO\x20history:','previousElo','toString','11638930mZXtBW','Error\x20fetching\x20username:','(((.+)+)+)+$','return\x20(function()\x20','Gold'];a16_0x10e4=function(){return _0xa5f275;};return a16_0x10e4();}const a16_0x59a771=(function(){let _0x5aa74e=!![];return function(_0xce2453,_0x52e8ba){const _0x35651d=_0x5aa74e?function(){const _0xa19b0d=a16_0x3589;if(_0x52e8ba){const _0x433a03=_0x52e8ba[_0xa19b0d(0xfd)](_0xce2453,arguments);return _0x52e8ba=null,_0x433a03;}}:function(){};return _0x5aa74e=![],_0x35651d;};}()),a16_0x30daaf=a16_0x59a771(this,function(){const _0x2ff088=a16_0x3589;return a16_0x30daaf['toString']()[_0x2ff088(0x10b)]('(((.+)+)+)+$')['toString']()['constructor'](a16_0x30daaf)['search'](_0x2ff088(0x106));});a16_0x30daaf();const a16_0x242307=(function(){let _0x326788=!![];return function(_0x55206e,_0x2261b8){const _0x29dc57=_0x326788?function(){const _0x5c5c97=a16_0x3589;if(_0x2261b8){const _0x419054=_0x2261b8[_0x5c5c97(0xfd)](_0x55206e,arguments);return _0x2261b8=null,_0x419054;}}:function(){};return _0x326788=![],_0x29dc57;};}()),a16_0x312fa4=a16_0x242307(this,function(){const _0x976618=a16_0x3589,_0x475376=function(){const _0x4aac4e=a16_0x3589;let _0x5dd887;try{_0x5dd887=Function(_0x4aac4e(0x107)+_0x4aac4e(0x109)+');')();}catch(_0xb6380e){_0x5dd887=window;}return _0x5dd887;},_0x2ebbd8=_0x475376(),_0x14d851=_0x2ebbd8[_0x976618(0xf1)]=_0x2ebbd8[_0x976618(0xf1)]||{},_0x4800ea=[_0x976618(0xed),_0x976618(0x114),'info',_0x976618(0x10d),_0x976618(0xee),_0x976618(0xeb),_0x976618(0xf6)];for(let _0x4c881d=0x0;_0x4c881d<_0x4800ea[_0x976618(0xfc)];_0x4c881d++){const _0x4bbf65=a16_0x242307[_0x976618(0x112)]['prototype'][_0x976618(0xfa)](a16_0x242307),_0x2e7f05=_0x4800ea[_0x4c881d],_0x349545=_0x14d851[_0x2e7f05]||_0x4bbf65;_0x4bbf65[_0x976618(0x111)]=a16_0x242307['bind'](a16_0x242307),_0x4bbf65[_0x976618(0x103)]=_0x349545[_0x976618(0x103)][_0x976618(0xfa)](_0x349545),_0x14d851[_0x2e7f05]=_0x4bbf65;}});a16_0x312fa4();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':a16_0x39e867(0x108),'elo':0x708},{'name':a16_0x39e867(0x115),'elo':0x640},{'name':a16_0x39e867(0xea),'elo':0x578},{'name':a16_0x39e867(0x10e),'elo':0x4b0}];async function getUsernameById(_0x2f6513){const _0x4ee0b1=a16_0x39e867;try{if(!_0x2f6513)return _0x4ee0b1(0x10a);const _0x106446=await getDoc(doc(db,_0x4ee0b1(0x113),_0x2f6513));return _0x106446['exists']()?_0x106446['data']()[_0x4ee0b1(0xe8)]:_0x4ee0b1(0x10a);}catch(_0x48ab29){return console['error'](_0x4ee0b1(0x105),_0x48ab29),'Unknown\x20Player';}}export async function recordEloChange({playerId:_0x308fd3,previousElo:_0x2de344,newElo:_0x1eda09,opponentId:_0x305a44,matchResult:_0x3c4695,previousPosition:_0x2b0608,newPosition:_0x40ca3e,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x1ab779}){const _0xc78e91=a16_0x39e867;try{const _0x4ac9da=doc(collection(db,_0xc78e91(0xe6)));let _0xdd81e6=_0xc78e91(0xfb);if(isPromotion)_0xdd81e6='promotion';if(isDemotion)_0xdd81e6=_0xc78e91(0xf9);let _0x598fc7=_0xc78e91(0x10e);if(_0x1eda09>=0x834)_0x598fc7='Emerald';else{if(_0x1eda09>=0x708)_0x598fc7=_0xc78e91(0x108);else{if(_0x1eda09>=0x640)_0x598fc7=_0xc78e91(0x115);else{if(_0x1eda09>=0x578)_0x598fc7=_0xc78e91(0xea);}}}return await setDoc(_0x4ac9da,{'type':_0xdd81e6,'player':_0x308fd3,'opponent':_0x305a44,'previousElo':_0x2de344,'newElo':_0x1eda09,'change':_0x1eda09-_0x2de344,'matchResult':_0x3c4695,'previousPosition':_0x2b0608,'newPosition':_0x40ca3e,'rankAchieved':_0x598fc7,'timestamp':_0x1ab779}),console[_0xc78e91(0xed)](_0xc78e91(0x100)+_0x308fd3),!![];}catch(_0x2f5c24){console[_0xc78e91(0x10d)](_0xc78e91(0x101),_0x2f5c24);throw _0x2f5c24;}}export async function getEloHistory(){const _0x21a1d7=a16_0x39e867;try{const _0x3ce181=collection(db,_0x21a1d7(0xe6)),_0x2c8d75=query(_0x3ce181,orderBy(_0x21a1d7(0x110),_0x21a1d7(0xff))),_0x1e5f4f=await getDocs(_0x2c8d75),_0x46e649=_0x1e5f4f['docs'][_0x21a1d7(0xec)](async _0x17aa90=>{const _0x5d9ade=_0x21a1d7,_0x40ed62=_0x17aa90[_0x5d9ade(0xf8)](),[_0x280ad0,_0x53bc1d]=await Promise['all']([getUsernameById(_0x40ed62[_0x5d9ade(0xf7)]),getUsernameById(_0x40ed62[_0x5d9ade(0xf4)])]);return{..._0x40ed62,'playerUsername':_0x280ad0,'opponentUsername':_0x53bc1d,'change':_0x40ed62[_0x5d9ade(0xf3)]-_0x40ed62[_0x5d9ade(0x102)],'timestamp':_0x40ed62['timestamp']};}),_0x281d01=await Promise[_0x21a1d7(0x10f)](_0x46e649);return{'entries':_0x281d01};}catch(_0x58980b){console[_0x21a1d7(0x10d)]('Error\x20fetching\x20ELO\x20history:',_0x58980b);throw _0x58980b;}}function a16_0x3589(_0x1c2918,_0x3ae86c){const _0x25fb6c=a16_0x10e4();return a16_0x3589=function(_0x312fa4,_0x242307){_0x312fa4=_0x312fa4-0xe6;let _0x5e8b38=_0x25fb6c[_0x312fa4];return _0x5e8b38;},a16_0x3589(_0x1c2918,_0x3ae86c);}export function resetPagination(){lastVisible=null;}