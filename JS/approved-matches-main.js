const a6_0x4b3b5a=a6_0x4ceb,a6_0x4e3b15=(function(){let _0x1c1201=!![];return function(_0x2a06ca,_0x5b7a28){const _0x11dc11=_0x1c1201?function(){if(_0x5b7a28){const _0x4dda5a=_0x5b7a28['apply'](_0x2a06ca,arguments);return _0x5b7a28=null,_0x4dda5a;}}:function(){};return _0x1c1201=![],_0x11dc11;};}()),a6_0x431c11=a6_0x4e3b15(this,function(){const _0xb2621=a6_0x4ceb,_0x357e87=function(){let _0x23a50d;try{_0x23a50d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2f3fc1){_0x23a50d=window;}return _0x23a50d;},_0x25f7bb=_0x357e87(),_0x3f1fb3=_0x25f7bb['console']=_0x25f7bb[_0xb2621(0x130)]||{},_0x1cea00=[_0xb2621(0x156),'warn',_0xb2621(0x14e),'error',_0xb2621(0x143),'table',_0xb2621(0x1a3)];for(let _0x273061=0x0;_0x273061<_0x1cea00['length'];_0x273061++){const _0xef0ccd=a6_0x4e3b15[_0xb2621(0x155)]['prototype']['bind'](a6_0x4e3b15),_0x189be9=_0x1cea00[_0x273061],_0x1777a2=_0x3f1fb3[_0x189be9]||_0xef0ccd;_0xef0ccd['__proto__']=a6_0x4e3b15[_0xb2621(0x16b)](a6_0x4e3b15),_0xef0ccd[_0xb2621(0x128)]=_0x1777a2['toString']['bind'](_0x1777a2),_0x3f1fb3[_0x189be9]=_0xef0ccd;}});a6_0x431c11();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6_0x4b3b5a(0x19a),'muteFromDate':new Date('2025-07-02')['getTime']()}];function isUsernameMuted(_0x33e7b2,_0x221fd3){const _0x6178e5=a6_0x4b3b5a;if(!_0x33e7b2)return![];const _0x2f9d4f=mutedUsers[_0x6178e5(0x1d5)](_0x450fcb=>_0x450fcb['username']===_0x33e7b2);if(!_0x2f9d4f)return![];if(!_0x221fd3)return!![];const _0x238491=_0x221fd3 instanceof Date?_0x221fd3[_0x6178e5(0x1d0)]():_0x221fd3['seconds']?_0x221fd3['seconds']*0x3e8:Date['now']();return _0x238491>=_0x2f9d4f['muteFromDate'];}function filterComment(_0x3f6251,_0x35549c,_0x5608f9){if(!_0x3f6251)return'-';if(isUsernameMuted(_0x35549c,_0x5608f9))return'Muted.';return _0x3f6251;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x4fd85f,_0x52c2e8,_0x5a948b){const _0x378af9=a6_0x4b3b5a,_0x3abe5d='u:'+(_0x5a948b[_0x378af9(0x1b4)]||'');return'previewCache_'+_0x4fd85f+'_p'+_0x52c2e8+'_'+_0x3abe5d;}function getCachedPage(_0x1c32ce){const _0x4a93fa=sessionStorage['getItem'](_0x1c32ce);if(_0x4a93fa)try{return JSON['parse'](_0x4a93fa);}catch(_0x8e9fb4){return console['error']('Failed\x20to\x20parse\x20cache:',_0x8e9fb4),sessionStorage['removeItem'](_0x1c32ce),null;}return null;}function cachePage(_0x5948f7,_0x4844dd){const _0x4c605e=a6_0x4b3b5a;try{sessionStorage[_0x4c605e(0x181)](_0x5948f7,JSON['stringify'](_0x4844dd));}catch(_0x11d62e){console['error']('Failed\x20to\x20cache\x20data:',_0x11d62e);}}function a6_0x4ceb(_0x26c131,_0x43088e){const _0x431c11=a6_0x3d65();return a6_0x4ceb=function(_0x4e3b15,_0x3dc80b){_0x4e3b15=_0x4e3b15-0x127;let _0x3d6590=_0x431c11[_0x4e3b15];return _0x3d6590;},a6_0x4ceb(_0x26c131,_0x43088e);}function getEloColor(_0x5e7362){const _0x96898a=Number(_0x5e7362);if(_0x96898a>=0x7d0)return'#50C878';else{if(_0x96898a>=0x708)return'#FFD700';else{if(_0x96898a>=0x640)return'#b9f1fc';else{if(_0x96898a>=0x578)return'#CD7F32';else return'#808080';}}}}function formatDate(_0x3e45fc,_0x122fd2=![]){const _0x4b19eb=a6_0x4b3b5a;if(!_0x3e45fc||!_0x3e45fc[_0x4b19eb(0x179)])return _0x4b19eb(0x1ad);const _0x3028fb=new Date(_0x3e45fc['seconds']*0x3e8);return _0x122fd2?_0x3028fb[_0x4b19eb(0x1ca)]():_0x3028fb['toLocaleDateString']();}function truncateComment(_0x2da54e,_0x503c99=0x1e){const _0x396cba=a6_0x4b3b5a;if(!_0x2da54e)return'-';if(_0x2da54e['length']<=_0x503c99)return _0x2da54e;return _0x2da54e[_0x396cba(0x172)](0x0,_0x503c99)+'...';}function formatCommentDate(_0x38145e){const _0x39a504=a6_0x4b3b5a;if(!_0x38145e||!_0x38145e['seconds'])return'';const _0x736c19=new Date(_0x38145e['seconds']*0x3e8),_0x26a45e=new Date(),_0x169d01=Math['abs'](_0x26a45e-_0x736c19),_0x4681c4=Math['floor'](_0x169d01/(0x3e8*0x3c*0x3c*0x18));if(_0x4681c4===0x0)return _0x39a504(0x19b);else{if(_0x4681c4===0x1)return _0x39a504(0x12f);else return _0x4681c4<0x7?_0x4681c4+'\x20days\x20ago':_0x736c19['toLocaleDateString']();}}function setLoadingIndicator(_0x298c3b){const _0x42a6cb=document['getElementById']('loading-indicator');if(_0x42a6cb)_0x42a6cb['style']['display']=_0x298c3b?'block':'none';}export function updatePreviewLadderModeUI(){const _0x24e77b=a6_0x4b3b5a,_0x592711=document['getElementById']('preview-ladder-mode'),_0x20b3eb=document[_0x24e77b(0x177)]('preview-d1-button'),_0x9e2f80=document[_0x24e77b(0x177)](_0x24e77b(0x14c)),_0x5838e3=document['getElementById']('preview-d3-button');if(_0x592711)_0x592711['textContent']=previewState['currentMode'];if(_0x20b3eb)_0x20b3eb[_0x24e77b(0x145)]['toggle']('active',previewState['currentMode']==='D1');if(_0x9e2f80)_0x9e2f80[_0x24e77b(0x145)]['toggle']('active',previewState['currentMode']==='D2');if(_0x5838e3)_0x5838e3[_0x24e77b(0x145)]['toggle']('active',previewState[_0x24e77b(0x168)]==='D3');}function updatePreviewPaginationControls(_0x412e13){const _0x6e582b=a6_0x4b3b5a,_0x4725b1=document['getElementById']('previewPrevPage'),_0x2944c3=document[_0x6e582b(0x177)]('previewNextPage'),_0x15590e=document[_0x6e582b(0x177)]('previewPageInfo');if(!_0x4725b1||!_0x2944c3||!_0x15590e)return;_0x15590e['textContent']='Page\x20'+previewState['currentPage'],_0x4725b1['disabled']=previewState[_0x6e582b(0x14b)]<=0x1,_0x2944c3['disabled']=!_0x412e13;}function a6_0x3d65(){const _0x5199a1=['winner-','toString','keys','.submit-comment-btn','exists','filter-levels','.comments-container','empty','Yesterday','console','style','commentId','commentMatchId','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','commentPopupTitlePreview','disabled','comment-popup','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>','loserUsername','div','demoLink','userProfiles','subgameType','block','winnerUsername','warn','\x22</div>','max','exception','matchComments','classList','push','next','firstChild','currentUser','mega-match','currentPage','preview-d2-button','filter','info','key','href','.</div>','commentAddPopup','timestamp','addEventListener','constructor','log','text','previewPrevPage','Standard\x20Match','Loading\x20next\x20page\x20using\x20cursor','Error\x20submitting\x20comment:','Loser','addCommentForm','length','\x20matching\x20filters','desc','includes','end','commentPopupContentPreview','selected','split','demo-link','15px','currentMode','matchesPerPage','current','bind','.matches-loading[style*=\x22color:\x20red\x22]','join','className','.option-tab.active','jump-to-page','forEach','substring','title','#aaa','displayName','keypress','getElementById','none','seconds','pilots','winnerOldElo','lastVisible','required','setAttribute','commentPopupPreview','+10','setItem','Unknown\x20Map','uid','Failed\x20to\x20report\x20comment:\x20','toLowerCase','innerHTML','trim','removeAttribute','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','dataset','display','previewCache_','parentNode','Match\x20','Please\x20enter\x20a\x20comment\x20before\x20submitting','#d32f2f','.match-map','.player.loser\x20.player-score','\x20demo\x20links:','Error\x20submitting:','textContent','subgames','Submit','popup-actions','slice','Daz','Today','Submitting...','enhancedFilters','applyFilterBtn','Failed\x20to\x20submit:\x20','winnerDemoLink','value','username','trace','aria-label','isLoading','Unknown\x20User','missiles-6plus','auth','demoDescription','createdAt','approvedMatchesD3','popup-btn\x20close-btn','N/A','appendChild','Muted.','preview-d3-button','Cached\x20intermediary\x20page\x20','levels','commentAddOverlay','filterUsername','.match-card','color','blind-match','\x27s\x20Demo','commentText','Unknown','totalPages','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','description','S:\x20','.popup-actions','remove','gold','stopPropagation','from','error','popup-btn\x20report-btn','Report','map','Demo\x20link','weapon-imbalance','toLocaleString','querySelector','input','userId','message','Comment\x20from\x20','getTime','matchId','default','createElement','comment','find','unranked','winnerComment','click','submitComment','submit'];a6_0x3d65=function(){return _0x5199a1;};return a6_0x3d65();}function setPreviewLoadingState(_0x5be82c){const _0x526792=a6_0x4b3b5a;previewState['isLoading']=_0x5be82c,setLoadingIndicator(_0x5be82c);const _0x46fab3=document['getElementById']('recent-matches-preview'),_0x5b99a4=_0x46fab3?_0x46fab3['querySelector']('.matches-loading'):null,_0x2388ff=document['getElementById'](_0x526792(0x158)),_0x55c894=document['getElementById']('previewNextPage'),_0x52bb8c=document[_0x526792(0x177)]('preview-d1-button'),_0x252736=document[_0x526792(0x177)](_0x526792(0x14c)),_0x9b6f85=document['getElementById'](_0x526792(0x19e)),_0xfe4996=document[_0x526792(0x177)]('clearFilterBtn');if(_0x5b99a4&&!_0x5be82c)_0x5b99a4[_0x526792(0x131)]['display']=_0x526792(0x178);else _0x5b99a4&&_0x5be82c&&(_0x5b99a4['style']['display']='block');!_0x5be82c&&_0x46fab3&&!_0x46fab3['querySelector'](_0x526792(0x1b5))&&!_0x46fab3['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x46fab3['innerHTML']=_0x526792(0x134)+(previewState['filterUsername']?'\x20matching\x20filters':'')+_0x526792(0x151));if(_0x2388ff)_0x2388ff[_0x526792(0x136)]=_0x5be82c||previewState['currentPage']<=0x1;if(_0x55c894)_0x55c894['disabled']=_0x5be82c;if(_0x52bb8c)_0x52bb8c['disabled']=_0x5be82c;if(_0x252736)_0x252736['disabled']=_0x5be82c;if(_0x9b6f85)_0x9b6f85['disabled']=_0x5be82c;if(_0xfe4996)_0xfe4996[_0x526792(0x136)]=_0x5be82c;}function applyClientFilters(_0x3b7c32){const _0x23ab63=a6_0x4b3b5a;if(!previewState['filterUsername'])return _0x3b7c32;const _0x33d763=previewState['filterUsername'][_0x23ab63(0x185)]();return _0x3b7c32[_0x23ab63(0x14d)](_0x227eb9=>{const _0x4fdb61=_0x23ab63,_0x4a12cb=(_0x227eb9[_0x4fdb61(0x13f)]||'')['toLowerCase'](),_0x3b43ca=(_0x227eb9['loserUsername']||'')[_0x4fdb61(0x185)]();return _0x4a12cb['includes'](_0x33d763)||_0x3b43ca['includes'](_0x33d763);});}function applyEnhancedClientFilters(_0x51e7b6){if(!hasEnhancedFilters())return _0x51e7b6;return _0x51e7b6['filter'](_0x1000b1=>{const _0xd2184c=a6_0x4ceb;if(previewState[_0xd2184c(0x19d)]['pilots']){const _0xf0a69f=previewState['enhancedFilters']['pilots']['toLowerCase'](),_0x2d5a0e=(_0x1000b1[_0xd2184c(0x13f)]||'')[_0xd2184c(0x185)](),_0x41aa61=(_0x1000b1['loserUsername']||'')['toLowerCase']();if(!_0x2d5a0e[_0xd2184c(0x161)](_0xf0a69f)&&!_0x41aa61['includes'](_0xf0a69f))return![];}if(previewState[_0xd2184c(0x19d)]['levels']){const _0x4b8f2b=previewState['enhancedFilters']['levels']['toLowerCase'](),_0x12ee9d=(_0x1000b1['mapPlayed']||'')[_0xd2184c(0x185)]();if(!_0x12ee9d['includes'](_0x4b8f2b))return![];}if(previewState['enhancedFilters']['subgames']['length']>0x0){const _0x38d08c=_0x1000b1[_0xd2184c(0x13d)]||_0xd2184c(0x159);if(!previewState[_0xd2184c(0x19d)][_0xd2184c(0x196)]['includes'](_0x38d08c))return![];}return!![];});}function hasEnhancedFilters(){const _0x2f072c=a6_0x4b3b5a;return previewState[_0x2f072c(0x19d)][_0x2f072c(0x17a)]||previewState['enhancedFilters'][_0x2f072c(0x1b2)]||previewState[_0x2f072c(0x19d)]['subgames']['length']>0x0;}function clearEnhancedFilters(){const _0x3124dc=a6_0x4b3b5a;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')['value']='',document['getElementById']('filter-levels')[_0x3124dc(0x1a1)]='';const _0x1b15d1=document[_0x3124dc(0x177)]('filter-subgames');for(let _0x2cb3a8 of _0x1b15d1['options']){_0x2cb3a8[_0x3124dc(0x164)]=![];}}function jumpToPage(_0x2f179c){const _0x7922a5=a6_0x4b3b5a,_0x3d8de=document['getElementById'](_0x7922a5(0x170)),_0x261679=previewState['currentPage'];let _0x3f253a=_0x261679;switch(_0x2f179c){case'start':_0x3f253a=0x1;break;case _0x7922a5(0x162):_0x3f253a=Math[_0x7922a5(0x142)](_0x261679+0xa,previewState[_0x7922a5(0x1bb)]||_0x261679+0xa);break;case'+1':_0x3f253a=_0x261679+0x1;break;case'+5':_0x3f253a=_0x261679+0x5;break;case _0x7922a5(0x180):_0x3f253a=_0x261679+0xa;break;case'-1':_0x3f253a=Math[_0x7922a5(0x142)](0x1,_0x261679-0x1);break;case'-5':_0x3f253a=Math[_0x7922a5(0x142)](0x1,_0x261679-0x5);break;case'-10':_0x3f253a=Math[_0x7922a5(0x142)](0x1,_0x261679-0xa);break;case _0x7922a5(0x1cc):const _0x23e285=parseInt(_0x3d8de['value']);_0x23e285&&_0x23e285>0x0&&(_0x3f253a=_0x23e285,_0x3d8de['value']='');break;}_0x3f253a!==_0x261679&&_0x3f253a>0x0&&(previewState[_0x7922a5(0x14b)]=_0x3f253a,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x2b68a5=a6_0x4b3b5a(0x16a)){const _0x2506ce=a6_0x4b3b5a,_0x2fbe58=document['getElementById']('recent-matches-preview'),_0x46bd89=document['getElementById']('match-card-template');if(previewState['isLoading']||!_0x2fbe58||!_0x46bd89)return;_0x2b68a5==='current'&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object[_0x2506ce(0x129)](sessionStorage)['forEach'](_0x53fe88=>{const _0x52306f=_0x2506ce;_0x53fe88['includes'](_0x52306f(0x18c)+previewState['currentMode'])&&sessionStorage['removeItem'](_0x53fe88);}));let _0x108f01=previewState['currentPage'];if(_0x2b68a5==='next')_0x108f01++;else{if(_0x2b68a5==='prev')_0x108f01--;else _0x2b68a5==='current'&&(_0x108f01=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x108f01<0x1)_0x108f01=0x1;const _0x180fcb=previewState['currentPage'];previewState[_0x2506ce(0x14b)]=_0x108f01,updatePreviewPaginationControls(!![]);const _0x45e2e0={'filterUsername':previewState['filterUsername']},_0x471b65=getCacheKey(previewState['currentMode'],_0x108f01,_0x45e2e0),_0x96b25=_0x2b68a5!=='current'?getCachedPage(_0x471b65):null;if(_0x96b25){console['log']('Rendering\x20page\x20'+_0x108f01+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x96b25['docsData']),updatePreviewPaginationControls(_0x96b25['hasNextPage']),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x108f01+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x2fbe58['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x3fc6f0=previewState['currentMode']==='D1'?'approvedMatches':previewState[_0x2506ce(0x168)]==='D2'?'approvedMatchesD2':_0x2506ce(0x1ab),_0x3be4ad=previewState[_0x2506ce(0x168)]==='D1'?_0x2506ce(0x1aa):'approvedAt';try{const _0x362126=collection(window['db'],_0x3fc6f0);let _0x4592f0=[orderBy(_0x3be4ad,'desc')];if(_0x108f01===0x1)console[_0x2506ce(0x156)]('Loading\x20first\x20page\x20from\x20Firestore'),_0x4592f0[_0x2506ce(0x146)](limit(previewState[_0x2506ce(0x169)]));else{if(_0x2b68a5===_0x2506ce(0x147)&&previewState[_0x2506ce(0x17c)])console[_0x2506ce(0x156)](_0x2506ce(0x15a)),_0x4592f0['push'](startAfter(previewState['lastVisible'])),_0x4592f0['push'](limit(previewState[_0x2506ce(0x169)]));else{console[_0x2506ce(0x156)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x2cff43=_0x108f01*previewState['matchesPerPage'];_0x4592f0[_0x2506ce(0x146)](limit(_0x2cff43));}}const _0x16a895=query(_0x362126,..._0x4592f0),_0x3b5f91=await getDocs(_0x16a895);let _0x2699e6=_0x3b5f91['docs'];if(_0x108f01>0x1&&_0x2b68a5!=='next'){const _0x5b99c5=(_0x108f01-0x1)*previewState['matchesPerPage'];_0x2699e6=_0x2699e6[_0x2506ce(0x199)](_0x5b99c5,_0x5b99c5+previewState['matchesPerPage']);}if(_0x2699e6['length']===0x0){console['log']('No\x20results\x20found\x20for\x20this\x20page');_0x2b68a5==='next'&&(previewState['currentPage']=_0x180fcb,updatePreviewPaginationControls(![]));_0x2fbe58['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState[_0x2506ce(0x1b4)]?_0x2506ce(0x15f):'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x2699e6[0x0],previewState[_0x2506ce(0x17c)]=_0x2699e6[_0x2699e6[_0x2506ce(0x15e)]-0x1];const _0x21b255=_0x2699e6['map'](_0x13da86=>({'id':_0x13da86['id'],..._0x13da86['data']()}));let _0x2a2066=![];if(_0x2699e6['length']===previewState['matchesPerPage']){const _0x3df7f1=query(_0x362126,orderBy(_0x3be4ad,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x2fc37e=await getDocs(_0x3df7f1);_0x2a2066=!_0x2fc37e['empty'];}const _0x321e1e=applyClientFilters(_0x21b255),_0x38f585={'docsData':_0x21b255,'hasNextPage':_0x2a2066};cachePage(getCacheKey(previewState[_0x2506ce(0x168)],previewState['currentPage'],_0x45e2e0),_0x38f585);if(_0x108f01>0x1&&_0x2b68a5!=='next')for(let _0x35bcf3=0x1;_0x35bcf3<_0x108f01;_0x35bcf3++){const _0x2aef09=(_0x35bcf3-0x1)*previewState['matchesPerPage'],_0x4c4666=_0x2aef09+previewState['matchesPerPage'],_0xf1d912=_0x3b5f91['docs']['slice'](_0x2aef09,_0x4c4666);if(_0xf1d912['length']>0x0){const _0x21be2f=_0xf1d912[_0x2506ce(0x1c7)](_0x131e0b=>({'id':_0x131e0b['id'],..._0x131e0b['data']()})),_0x5d74a5=!![];cachePage(getCacheKey(previewState[_0x2506ce(0x168)],_0x35bcf3,_0x45e2e0),{'docsData':_0x21be2f,'hasNextPage':_0x5d74a5}),console[_0x2506ce(0x156)](_0x2506ce(0x1b1)+_0x35bcf3);}}_0x321e1e['length']===0x0&&previewState['filterUsername']?_0x2fbe58[_0x2506ce(0x186)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState['filterUsername']+_0x2506ce(0x141):renderMatchCards(_0x321e1e),updatePreviewPaginationControls(_0x2a2066);}catch(_0x2c3dd3){console['error']('Error\x20fetching\x20'+previewState['currentMode']+'\x20matches:',_0x2c3dd3),_0x2fbe58[_0x2506ce(0x186)]='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x2c3dd3['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x180fcb;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x46d06a){const _0x5b1341=a6_0x4b3b5a,_0x41eb87=document['getElementById']('recent-matches-preview'),_0x470340=document['getElementById']('match-card-template');if(!_0x41eb87||!_0x470340)return;!_0x41eb87['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x41eb87[_0x5b1341(0x186)]='');if(!_0x46d06a||_0x46d06a['length']===0x0){if(!_0x41eb87['querySelector'](_0x5b1341(0x16c))){const _0x5a438b=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';_0x41eb87[_0x5b1341(0x186)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x5a438b+'.</div>';}return;}const _0x279a05=applyEnhancedClientFilters(_0x46d06a);if(_0x279a05['length']===0x0){_0x41eb87['innerHTML']=_0x5b1341(0x138);return;}const _0x3792af=_0x279a05['map'](_0x4230b7=>getAllCommentsForMatch(_0x4230b7['id']));let _0x3c6b9f=[];try{_0x3c6b9f=await Promise['all'](_0x3792af);}catch(_0x5d7bbe){console['error']('Error\x20fetching\x20comments\x20batch:',_0x5d7bbe),_0x3c6b9f=_0x279a05['map'](()=>[]);}const _0x3d8900={};_0x3c6b9f[_0x5b1341(0x171)]((_0x5d81db,_0x49baed)=>{_0x3d8900[_0x279a05[_0x49baed]['id']]=_0x5d81db||[];}),_0x279a05['forEach'](_0x3f9252=>{const _0x53725b=_0x5b1341,_0x19eba9=_0x470340['content']['cloneNode'](!![]),_0x24bb88=_0x19eba9[_0x53725b(0x1cb)]('.match-display-wrapper'),_0x13ccd5=_0x19eba9['querySelector']('.match-card'),_0x4d1423=getEloRankClass(_0x3f9252['winnerOldElo']);_0x13ccd5['classList']['add'](_0x53725b(0x127)+_0x4d1423),_0x13ccd5['querySelector'](_0x53725b(0x191))['textContent']=_0x3f9252['mapPlayed']||_0x53725b(0x182),_0x13ccd5['querySelector']('.match-date')['textContent']=formatDate(_0x3f9252['approvedAt']||_0x3f9252['createdAt']);const _0x5d4213=_0x13ccd5['querySelector']('.player.winner\x20.player-name');_0x5d4213[_0x53725b(0x195)]=_0x3f9252[_0x53725b(0x13f)]||_0x53725b(0x1ba),_0x5d4213[_0x53725b(0x131)]['color']=getEloColor(_0x3f9252[_0x53725b(0x17b)]),_0x13ccd5[_0x53725b(0x1cb)]('.player.winner\x20.player-score')[_0x53725b(0x195)]=_0x3f9252['winnerScore']??0x0;const _0x4bd1ed=_0x13ccd5['querySelector']('.player.winner\x20.player-suicides'),_0xa588e1=_0x3f9252['winnerSuicides']||0x0;_0x4bd1ed['textContent']=_0x53725b(0x1be)+_0xa588e1;const _0x39b254=_0x13ccd5['querySelector']('.player.loser\x20.player-name');_0x39b254['textContent']=_0x3f9252[_0x53725b(0x139)]||'Unknown',_0x39b254[_0x53725b(0x131)]['color']=getEloColor(_0x3f9252['loserOldElo']),_0x13ccd5['querySelector'](_0x53725b(0x192))[_0x53725b(0x195)]=_0x3f9252['loserScore']??0x0;const _0x431cd7=_0x13ccd5['querySelector']('.player.loser\x20.player-suicides'),_0x51f0a8=_0x3f9252['loserSuicides']||0x0;_0x431cd7['textContent']=_0x53725b(0x1be)+_0x51f0a8;const _0x464f92=_0x13ccd5['querySelector']('.match-subgame');if(_0x464f92){if(_0x3f9252['subgameType']&&_0x3f9252['subgameType']['trim']()!==''){_0x464f92['textContent']=_0x3f9252['subgameType'],_0x464f92[_0x53725b(0x131)]['display']='block';const _0x38f6e3=getSubgameClass(_0x3f9252[_0x53725b(0x13d)]);_0x38f6e3&&_0x464f92[_0x53725b(0x145)]['add'](_0x38f6e3);}else _0x464f92[_0x53725b(0x195)]='Standard\x20Match',_0x464f92['style'][_0x53725b(0x18b)]=_0x53725b(0x13e),_0x464f92['style']['opacity']='0.6';}const _0x140733=_0x13ccd5['querySelector']('.comment.winner-comment'),_0x5356d5=_0x13ccd5[_0x53725b(0x1cb)]('.comment.loser-comment'),_0x375f7f=_0x3f9252[_0x53725b(0x1d7)]||'',_0x383aab=_0x3f9252['loserComment']||'',_0xf156c6=_0x3f9252['approvedAt']||_0x3f9252[_0x53725b(0x1aa)],_0x2c881e=filterComment(_0x375f7f,_0x3f9252[_0x53725b(0x13f)],_0xf156c6),_0x396872=filterComment(_0x383aab,_0x3f9252['loserUsername'],_0xf156c6);_0x140733[_0x53725b(0x195)]='\x22'+truncateComment(_0x375f7f)+'\x22',_0x5356d5[_0x53725b(0x195)]='\x22'+truncateComment(_0x383aab)+'\x22';_0x375f7f&&!isUsernameMuted(_0x3f9252['winnerUsername'],_0xf156c6)?_0x140733['onclick']=()=>showPreviewCommentPopup(_0x2c881e,_0x3f9252['winnerUsername']||'Winner',getEloColor(_0x3f9252['winnerOldElo'])):(_0x140733['textContent']=_0x2c881e===_0x53725b(0x1af)?_0x53725b(0x1af):'-',_0x140733['style']['cursor']=_0x53725b(0x1d2),_0x140733['onclick']=null);_0x383aab&&!isUsernameMuted(_0x3f9252[_0x53725b(0x139)])?_0x5356d5['onclick']=()=>showPreviewCommentPopup(_0x396872,_0x3f9252['loserUsername']||_0x53725b(0x15c),getEloColor(_0x3f9252['loserOldElo'])):(_0x5356d5[_0x53725b(0x195)]=_0x396872==='Muted.'?_0x53725b(0x1af):'-',_0x5356d5[_0x53725b(0x131)]['cursor']='default',_0x5356d5['onclick']=null);const _0x120f40=_0x24bb88?.[_0x53725b(0x1cb)]('.community-comments-section');if(!_0x120f40)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x3ddfae=_0x120f40[_0x53725b(0x1cb)]('.comments-container'),_0x472d92=_0x3ddfae?.['querySelector']('.no-comments-message'),_0x554efa=_0x120f40['querySelector']('.add-comment-btn');if(_0x3ddfae){while(_0x3ddfae['firstChild']&&_0x3ddfae['firstChild']!==_0x472d92){_0x3ddfae['removeChild'](_0x3ddfae[_0x53725b(0x148)]);}_0x554efa&&_0x554efa['addEventListener']('click',()=>{showAddCommentPopup(_0x3f9252['id']);});const _0x3657ce=_0x3d8900[_0x3f9252['id']]||[];if(_0x3657ce['length']>0x0){if(_0x472d92)_0x472d92['style'][_0x53725b(0x18b)]='none';const _0x2cf679=(_0x5d2f7c,_0x2ddecc)=>{const _0x2fc388=_0x53725b,_0x3342f2=_0x5d2f7c['split']('\x20');if(_0x3342f2[_0x2fc388(0x15e)]<=_0x2ddecc)return _0x5d2f7c;return _0x3342f2[_0x2fc388(0x199)](0x0,_0x2ddecc)[_0x2fc388(0x16d)]('\x20')+'...';};_0x3657ce['forEach'](_0x3710fb=>{const _0x2b6ac9=_0x53725b,_0x2cad35=document['createElement'](_0x2b6ac9(0x13a));if(_0x3710fb['type']==='demo'){_0x2cad35['className']=_0x2b6ac9(0x166),_0x2cad35[_0x2b6ac9(0x186)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x3710fb[_0x2b6ac9(0x13b)]+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x3710fb['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x3710fb[_0x2b6ac9(0x1bd)]||'No\x20description\x20provided')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x509935=window['auth'][_0x2b6ac9(0x149)],_0x417e76=_0x509935&&_0x3710fb['userId']===_0x509935[_0x2b6ac9(0x183)];if(_0x417e76){const _0x4b9876=document['createElement']('button');_0x4b9876[_0x2b6ac9(0x16e)]='delete-comment-btn',_0x4b9876['innerHTML']='×',_0x4b9876[_0x2b6ac9(0x17e)](_0x2b6ac9(0x1a4),'Delete\x20demo'),_0x4b9876[_0x2b6ac9(0x154)]('click',_0x564b06=>{_0x564b06['preventDefault'](),_0x564b06['stopPropagation'](),deleteComment(_0x3710fb['id'],_0x2cad35);}),_0x2cad35['appendChild'](_0x4b9876);}}else{_0x2cad35['className']='comment-item';const _0x521df4=isUsernameMuted(_0x3710fb['username'],_0x3710fb['timestamp']),_0x294dc9=_0x521df4?'Muted.':_0x2cf679(_0x3710fb[_0x2b6ac9(0x157)]||'',0xf),_0x19d919=_0x3710fb['username']||'Anonymous',_0x3be68d=window['auth']['currentUser'],_0x1af813=_0x3be68d&&_0x3710fb[_0x2b6ac9(0x1cd)]===_0x3be68d[_0x2b6ac9(0x183)];let _0x27c983='';_0x1af813&&(_0x27c983='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x2cad35['innerHTML']=_0x27c983+'<strong>'+_0x19d919+':</strong>\x20\x22'+_0x294dc9+'\x22';if(_0x1af813){const _0x1d5c2d=_0x2cad35['querySelector']('.delete-comment-btn');_0x1d5c2d&&_0x1d5c2d['addEventListener'](_0x2b6ac9(0x1d8),_0x584dd1=>{const _0x68dba1=_0x2b6ac9;_0x584dd1[_0x68dba1(0x1c2)](),deleteComment(_0x3710fb['id'],_0x2cad35);});}!_0x521df4?_0x2cad35['addEventListener']('click',()=>{showFullCommentLightbox(_0x3710fb);}):_0x2cad35['style']['cursor']=_0x2b6ac9(0x1d2);}_0x3ddfae['insertBefore'](_0x2cad35,_0x3ddfae['firstChild']);});}else{if(_0x472d92)_0x472d92['style'][_0x53725b(0x18b)]='block';}}}const _0x53b606=_0x13ccd5[_0x53725b(0x1cb)]('.match-demo-links');if(_0x53b606){const _0x2a0322=_0x13ccd5[_0x53725b(0x1cb)]('.winner-demo-link'),_0x229b82=_0x13ccd5['querySelector']('.loser-demo-link'),_0x4a1458=_0x3f9252[_0x53725b(0x1a0)]||null,_0x33a9a2=_0x3f9252['loserDemoLink']||_0x3f9252['demoLink']||null;console[_0x53725b(0x156)](_0x53725b(0x18e)+_0x3f9252['id']+_0x53725b(0x193),{'winner':_0x4a1458,'loser':_0x33a9a2}),_0x2a0322&&(_0x4a1458?(_0x2a0322[_0x53725b(0x150)]=_0x4a1458,_0x2a0322[_0x53725b(0x131)]['display']='flex',_0x2a0322[_0x53725b(0x173)]=_0x3f9252['winnerUsername']+'\x27s\x20Demo'):_0x2a0322[_0x53725b(0x131)]['display']=_0x53725b(0x178)),_0x229b82&&(_0x33a9a2?(_0x229b82['href']=_0x33a9a2,_0x229b82[_0x53725b(0x131)][_0x53725b(0x18b)]='flex',_0x229b82['title']=_0x3f9252['loserUsername']+_0x53725b(0x1b8)):_0x229b82['style']['display']='none'),_0x4a1458&&_0x2a0322||_0x33a9a2&&_0x229b82?_0x53b606['style']['display']='flex':_0x53b606[_0x53725b(0x131)][_0x53725b(0x18b)]='none';}_0x41eb87['appendChild'](_0x19eba9);});}function getSubgameClass(_0x1a755a){const _0x19b3ba=a6_0x4b3b5a,_0x321b0f={'Fusion\x20Match':'fusion-match','≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':_0x19b3ba(0x1a7),'Weapon\x20Imbalance':_0x19b3ba(0x1c9),'Blind\x20Match':_0x19b3ba(0x1b7),'Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':_0x19b3ba(0x14a),'Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x321b0f[_0x1a755a]||'';}async function deleteComment(_0x4c0988,_0x5cce9b){const _0x2d0eac=a6_0x4b3b5a,_0x1173b7=window['auth']['currentUser'];if(!_0x1173b7){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x20add8=doc(window['db'],'matchComments',_0x4c0988),_0x4dd65d=await getDoc(_0x20add8);if(!_0x4dd65d['exists']()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x404ca7=_0x4dd65d['data']();if(_0x404ca7[_0x2d0eac(0x1cd)]!==_0x1173b7[_0x2d0eac(0x183)]){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x20add8);if(_0x5cce9b&&_0x5cce9b['parentNode']){_0x5cce9b[_0x2d0eac(0x18d)]['removeChild'](_0x5cce9b);const _0xbad85c=_0x5cce9b['closest'](_0x2d0eac(0x12d));if(_0xbad85c&&!_0xbad85c['querySelector']('.comment-item')){const _0x39db33=_0xbad85c[_0x2d0eac(0x1cb)]('.no-comments-message');if(_0x39db33)_0x39db33[_0x2d0eac(0x131)]['display']='block';}}console[_0x2d0eac(0x156)]('Comment\x20deleted\x20successfully');}catch(_0x35291b){console[_0x2d0eac(0x1c4)]('Error\x20deleting\x20comment:',_0x35291b),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x35291b[_0x2d0eac(0x1ce)]);}}async function getAllCommentsForMatch(_0x50ebdf){const _0x4c1286=a6_0x4b3b5a;if(!_0x50ebdf)return[];try{const _0x2f14be=collection(window['db'],'matchComments'),_0x1afd90=query(_0x2f14be,where('matchId','==',_0x50ebdf),orderBy('timestamp',_0x4c1286(0x160))),_0x3256c7=await getDocs(_0x1afd90);if(_0x3256c7[_0x4c1286(0x12e)])return[];return _0x3256c7['docs']['map'](_0x335cee=>({'id':_0x335cee['id'],..._0x335cee['data']()}));}catch(_0xd7c42b){return console['error']('Error\x20fetching\x20comments:',_0xd7c42b),[];}}async function submitComment(_0x3d2577){const _0x1afba8=a6_0x4b3b5a;_0x3d2577['preventDefault']();if(!window[_0x1afba8(0x1a8)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert(_0x1afba8(0x1bc));return;}const _0x55e125=window['auth']['currentUser'];if(!_0x55e125){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x2907e6=document['getElementById'](_0x1afba8(0x133))?.['value'],_0x2c523e=document['getElementById'](_0x1afba8(0x1b9))?.['value']?.['trim']();if(!_0x2907e6||!_0x2c523e){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x55654c=_0x2c523e['split'](/\s+/)['filter'](_0x172eab=>_0x172eab[_0x1afba8(0x15e)]>0x0)[_0x1afba8(0x15e)];if(_0x55654c>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x137a31=document[_0x1afba8(0x1cb)]('.submit-comment-btn');_0x137a31&&(_0x137a31['disabled']=!![],_0x137a31[_0x1afba8(0x195)]=_0x1afba8(0x19c));try{let _0x5c7dfc='Anonymous';try{const _0x521944=doc(window['db'],_0x1afba8(0x13c),_0x55e125['uid']),_0x5cfb63=await getDoc(_0x521944);if(_0x5cfb63[_0x1afba8(0x12b)]()){const _0x5d7259=_0x5cfb63['data']();_0x5d7259[_0x1afba8(0x1a2)]&&(_0x5c7dfc=_0x5d7259['username']);}_0x5c7dfc==='Anonymous'&&_0x55e125['displayName']&&(_0x5c7dfc=_0x55e125[_0x1afba8(0x175)]);}catch(_0x2bfc99){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x2bfc99),_0x55e125['displayName']&&(_0x5c7dfc=_0x55e125['displayName']);}const _0x28976d={'matchId':_0x2907e6,'userId':_0x55e125[_0x1afba8(0x183)],'username':_0x5c7dfc,'text':_0x2c523e,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',_0x5c7dfc);const _0x2bdddb=collection(window['db'],_0x1afba8(0x144));await addDoc(_0x2bdddb,_0x28976d),console['log']('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x35b252){console['error'](_0x1afba8(0x15b),_0x35b252),alert('Failed\x20to\x20add\x20comment:\x20'+_0x35b252['message']),_0x137a31&&(_0x137a31['disabled']=![],_0x137a31[_0x1afba8(0x195)]='Submit');}}function closeAddCommentPopup(){const _0x55f098=a6_0x4b3b5a,_0x4e175d=document['getElementById'](_0x55f098(0x152)),_0x1ff69a=document['getElementById']('commentAddOverlay');if(_0x4e175d)_0x4e175d[_0x55f098(0x131)]['display']=_0x55f098(0x178);if(_0x1ff69a)_0x1ff69a['style'][_0x55f098(0x18b)]='none';}function showAddCommentPopup(_0x1193a2){const _0x408131=a6_0x4b3b5a,_0x2b689c=window[_0x408131(0x1a8)]['currentUser'];if(!_0x2b689c){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x4112e9=document['getElementById'](_0x408131(0x152)),_0x205a4d=document['getElementById']('commentAddOverlay');!_0x4112e9&&(_0x4112e9=document['createElement']('div'),_0x4112e9['id']='commentAddPopup',_0x4112e9['className']=_0x408131(0x137),document['body']['appendChild'](_0x4112e9));!_0x205a4d&&(_0x205a4d=document[_0x408131(0x1d3)]('div'),_0x205a4d['id']=_0x408131(0x1b3),_0x205a4d['className']='comment-overlay',document['body'][_0x408131(0x1ae)](_0x205a4d));_0x4112e9[_0x408131(0x186)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x1193a2+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x4112e9['style'][_0x408131(0x18b)]='block',_0x205a4d['style']['display']='block',document['getElementById']('closeAddCommentPopup')['addEventListener']('click',closeAddCommentPopup),_0x205a4d['addEventListener'](_0x408131(0x1d8),closeAddCommentPopup);const _0x209871=_0x4112e9['querySelectorAll']('.option-tab');_0x209871['forEach'](_0x127701=>{const _0x1f1fad=_0x408131;_0x127701['addEventListener'](_0x1f1fad(0x1d8),function(){const _0x338b58=_0x1f1fad;_0x209871['forEach'](_0x58d6d9=>_0x58d6d9['classList'][_0x338b58(0x1c0)]('active')),document['querySelectorAll']('.option-content')[_0x338b58(0x171)](_0x2765f6=>_0x2765f6['style']['display']='none'),this['classList']['add']('active');const _0x1fce9a=this['dataset']['option'];document[_0x338b58(0x177)](_0x1fce9a+'Option')['style']['display']='block',_0x1fce9a==='demo'?(document['getElementById']('demoLink')['setAttribute']('required',''),document['getElementById'](_0x338b58(0x1b9))['removeAttribute']('required')):(document['getElementById'](_0x338b58(0x13b))['removeAttribute'](_0x338b58(0x17d)),document['getElementById']('commentText')['setAttribute'](_0x338b58(0x17d),''));});}),document['getElementById'](_0x408131(0x1b9))['setAttribute'](_0x408131(0x17d),''),document['getElementById']('demoLink')[_0x408131(0x188)]('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription','demoWordCount',0x14),document['getElementById']('addCommentForm')['addEventListener'](_0x408131(0x1da),submitCommentOrDemo);}function setupWordCounter(_0x2fc4af,_0x200515,_0x45b8f1){const _0xc215fb=a6_0x4b3b5a,_0x87ab23=document[_0xc215fb(0x177)](_0x2fc4af),_0x30ce8a=document['getElementById'](_0x200515);if(!_0x87ab23||!_0x30ce8a)return;_0x333049(),_0x87ab23['addEventListener']('input',_0x333049);function _0x333049(){const _0x6ace3a=_0xc215fb,_0x53c032=_0x87ab23['value']['trim'](),_0x5be873=_0x53c032?_0x53c032['split'](/\s+/)[_0x6ace3a(0x14d)](_0x17ef4c=>_0x17ef4c['length']>0x0)['length']:0x0;_0x30ce8a[_0x6ace3a(0x195)]=_0x5be873,_0x5be873>_0x45b8f1?_0x30ce8a['style']['color']='#ff4444':_0x30ce8a['style']['color']=_0x6ace3a(0x174);}}async function submitCommentOrDemo(_0x3ba223){const _0x16322f=a6_0x4b3b5a;_0x3ba223['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x23169f=window['auth'][_0x16322f(0x149)];if(!_0x23169f){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x4cadfc=document['getElementById'](_0x16322f(0x133))[_0x16322f(0x1a1)],_0x1bd64e=document['querySelector'](_0x16322f(0x16f))['dataset']['option'];let _0x3cba97='Anonymous';try{const _0x4ced05=doc(window['db'],'userProfiles',_0x23169f['uid']),_0x26ee47=await getDoc(_0x4ced05);if(_0x26ee47['exists']()){const _0x3faaa9=_0x26ee47['data']();_0x3faaa9['username']&&(_0x3cba97=_0x3faaa9[_0x16322f(0x1a2)]);}_0x3cba97==='Anonymous'&&_0x23169f[_0x16322f(0x175)]&&(_0x3cba97=_0x23169f['displayName']);}catch(_0x3c17da){console[_0x16322f(0x140)]('Failed\x20to\x20fetch\x20username:',_0x3c17da),_0x23169f['displayName']&&(_0x3cba97=_0x23169f['displayName']);}const _0x41c42c=document[_0x16322f(0x1cb)](_0x16322f(0x12a));_0x41c42c&&(_0x41c42c['disabled']=!![],_0x41c42c['textContent']=_0x16322f(0x19c));try{if(_0x1bd64e===_0x16322f(0x1d4)){const _0x5370cf=document[_0x16322f(0x177)](_0x16322f(0x1b9))['value'][_0x16322f(0x187)]();if(!_0x5370cf){alert(_0x16322f(0x18f)),_0x41c42c['disabled']=![],_0x41c42c['textContent']='Submit';return;}const _0x4d7dee=_0x5370cf[_0x16322f(0x165)](/\s+/)['filter'](_0x5f49dc=>_0x5f49dc['length']>0x0)[_0x16322f(0x15e)];if(_0x4d7dee>0xf){alert(_0x16322f(0x189)),_0x41c42c['disabled']=![],_0x41c42c['textContent']='Submit';return;}const _0x36e8b6={'matchId':_0x4cadfc,'userId':_0x23169f['uid'],'username':_0x3cba97,'text':_0x5370cf,'type':'comment','timestamp':serverTimestamp()},_0x141af8=collection(window['db'],'matchComments');await addDoc(_0x141af8,_0x36e8b6);}else{const _0x28b357=document[_0x16322f(0x177)]('demoLink')['value'][_0x16322f(0x187)](),_0x1cc5c1=document['getElementById'](_0x16322f(0x1a9))['value'][_0x16322f(0x187)]()||_0x16322f(0x1c8);if(!_0x28b357){alert('Please\x20enter\x20a\x20demo\x20link'),_0x41c42c[_0x16322f(0x136)]=![],_0x41c42c['textContent']='Submit';return;}try{new URL(_0x28b357);}catch(_0x2ae197){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x41c42c[_0x16322f(0x136)]=![],_0x41c42c['textContent']=_0x16322f(0x197);return;}const _0xbe2008=_0x1cc5c1['split'](/\s+/)['filter'](_0x37c2f4=>_0x37c2f4['length']>0x0)['length'];if(_0xbe2008>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x41c42c['disabled']=![],_0x41c42c['textContent']='Submit';return;}const _0x1bd7d9={'matchId':_0x4cadfc,'userId':_0x23169f[_0x16322f(0x183)],'username':_0x3cba97,'demoLink':_0x28b357,'description':_0x1cc5c1,'type':'demo','text':'Demo:\x20'+_0x1cc5c1,'timestamp':serverTimestamp()},_0x591fb0=collection(window['db'],'matchComments');await addDoc(_0x591fb0,_0x1bd7d9);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x16322f(0x16a));}catch(_0x4a28b5){console['error'](_0x16322f(0x194),_0x4a28b5),alert(_0x16322f(0x19f)+_0x4a28b5[_0x16322f(0x1ce)]),_0x41c42c&&(_0x41c42c['disabled']=![],_0x41c42c['textContent']='Submit');}}function getEloRankClass(_0x2f6a6d){const _0xba555f=a6_0x4b3b5a,_0x561424=Number(_0x2f6a6d);if(_0x561424>=0x7d0)return'emerald';else{if(_0x561424>=0x708)return _0xba555f(0x1c1);else{if(_0x561424>=0x640)return'silver';else{if(_0x561424>=0x578)return'bronze';else return _0xba555f(0x1d6);}}}}function showPreviewCommentPopup(_0x49c821,_0x2903ae,_0x16031d='#fff'){const _0x4ce91f=a6_0x4b3b5a,_0xcc7a79=document['getElementById']('commentPopupPreview'),_0x1785f6=document['getElementById']('commentOverlayPreview'),_0x34c099=document[_0x4ce91f(0x177)]('commentPopupTitlePreview'),_0x3be39d=document['getElementById']('commentPopupContentPreview'),_0x2beba1=document[_0x4ce91f(0x177)]('reportCommentButton');if(!_0xcc7a79||!_0x1785f6||!_0x34c099||!_0x3be39d||!_0x2beba1)return;_0xcc7a79['dataset']['commentText']=_0x49c821,_0xcc7a79['dataset']['commentUser']=_0x2903ae,_0x34c099['style'][_0x4ce91f(0x1b6)]=_0x16031d,_0x34c099[_0x4ce91f(0x195)]='Comment\x20from\x20'+_0x2903ae,_0x3be39d['textContent']=_0x49c821,_0x2beba1['onclick']=reportComment,_0xcc7a79['style']['display']='block',_0x1785f6['style']['display']='block';}function closePreviewCommentPopup(){const _0x45d1cf=document['getElementById']('commentPopupPreview'),_0x14c385=document['getElementById']('commentOverlayPreview');if(_0x45d1cf)_0x45d1cf['style']['display']='none';if(_0x14c385)_0x14c385['style']['display']='none';}async function reportComment(){const _0x545cde=a6_0x4b3b5a,_0x28219c=window['auth']['currentUser'];if(!_0x28219c){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0xf3331a=document['getElementById'](_0x545cde(0x17f)),_0x30261b={'commentAuthor':_0xf3331a['dataset']['commentUser']||_0x545cde(0x1a6),'commentText':_0xf3331a['dataset'][_0x545cde(0x1b9)]||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x28219c['uid'],'reporterUsername':_0x28219c['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x235847=collection(window['db'],'badComments');await addDoc(_0x235847,_0x30261b),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x1e4b70){console[_0x545cde(0x1c4)]('Error\x20reporting\x20comment:',_0x1e4b70),alert(_0x545cde(0x184)+_0x1e4b70['message']);}}function showFullCommentLightbox(_0x8871eb){const _0x4c7c74=a6_0x4b3b5a;if(isUsernameMuted(_0x8871eb['username']))return;const _0xbe647f=document['getElementById']('commentPopupPreview'),_0x2df882=document[_0x4c7c74(0x177)]('commentOverlayPreview'),_0x3255ea=document['getElementById'](_0x4c7c74(0x135)),_0x1025c8=document[_0x4c7c74(0x177)](_0x4c7c74(0x163));if(!_0xbe647f||!_0x2df882||!_0x3255ea||!_0x1025c8)return;_0x3255ea['style']['color']='#fff',_0x3255ea['textContent']=_0x4c7c74(0x1cf)+_0x8871eb['username'];if(_0x8871eb[_0x4c7c74(0x153)]){const _0x33a83a=new Date(_0x8871eb['timestamp']['seconds']*0x3e8),_0x40a9b2=_0x33a83a['toLocaleString']();_0x1025c8['innerHTML']='<p>'+_0x8871eb[_0x4c7c74(0x157)]+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x40a9b2+'</small>';}else _0x1025c8[_0x4c7c74(0x195)]=_0x8871eb[_0x4c7c74(0x157)];_0xbe647f['dataset'][_0x4c7c74(0x132)]=_0x8871eb['id']||'',_0xbe647f[_0x4c7c74(0x18a)]['commentUser']=_0x8871eb['username']||'',_0xbe647f[_0x4c7c74(0x18a)][_0x4c7c74(0x1b9)]=_0x8871eb[_0x4c7c74(0x157)]||'',_0xbe647f[_0x4c7c74(0x18a)]['matchId']=_0x8871eb[_0x4c7c74(0x1d1)]||'';const _0x418c52=_0xbe647f['querySelector'](_0x4c7c74(0x1bf))||document['createElement']('div');!_0xbe647f['querySelector']('.popup-actions')?(_0x418c52['className']=_0x4c7c74(0x198),_0x418c52['style'][_0x4c7c74(0x18b)]='flex',_0x418c52[_0x4c7c74(0x131)]['justifyContent']='center',_0x418c52['style']['gap']='10px',_0x418c52['style']['marginTop']=_0x4c7c74(0x167),_0xbe647f['appendChild'](_0x418c52)):_0x418c52[_0x4c7c74(0x186)]='';const _0x1c36d4=document['createElement']('button');_0x1c36d4['textContent']='Close',_0x1c36d4['className']=_0x4c7c74(0x1ac),_0x1c36d4['id']='closeCommentPopupPreview',_0x1c36d4['addEventListener'](_0x4c7c74(0x1d8),closePreviewCommentPopup);const _0x4d4130=document[_0x4c7c74(0x1d3)]('button');_0x4d4130['textContent']=_0x4c7c74(0x1c6),_0x4d4130['className']=_0x4c7c74(0x1c5),_0x4d4130['style']['backgroundColor']=_0x4c7c74(0x190),_0x4d4130[_0x4c7c74(0x154)](_0x4c7c74(0x1d8),reportComment),_0x418c52['appendChild'](_0x1c36d4),_0x418c52['appendChild'](_0x4d4130),_0xbe647f['style'][_0x4c7c74(0x18b)]='block',_0x2df882['style'][_0x4c7c74(0x18b)]=_0x4c7c74(0x13e);}export function setupPreviewEventListeners(){const _0x171c76=a6_0x4b3b5a,_0x268991=document[_0x171c76(0x177)]('previewPrevPage'),_0x5d7066=document[_0x171c76(0x177)]('previewNextPage'),_0x52c917=document['getElementById']('preview-d1-button'),_0x4d1750=document['getElementById'](_0x171c76(0x14c)),_0x5424a4=document['getElementById'](_0x171c76(0x1b0)),_0x1af346=document['getElementById']('filter-toggle-button'),_0x58a8b5=document['getElementById']('enhanced-filter-section');if(!_0x268991||!_0x5d7066||!_0x52c917||!_0x4d1750||!_0x5424a4||!_0x1af346||!_0x58a8b5){console['warn']('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x268991['addEventListener'](_0x171c76(0x1d8),()=>{const _0x39d020=_0x171c76;if(!_0x268991[_0x39d020(0x136)])loadRecentMatchesPreview('prev');}),_0x5d7066['addEventListener']('click',()=>{const _0x646033=_0x171c76;if(!_0x5d7066[_0x646033(0x136)])loadRecentMatchesPreview('next');}),_0x52c917['addEventListener'](_0x171c76(0x1d8),()=>{const _0x2e88bf=_0x171c76;previewState[_0x2e88bf(0x168)]!=='D1'&&!previewState['isLoading']&&(previewState[_0x2e88bf(0x168)]='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x4d1750['addEventListener'](_0x171c76(0x1d8),()=>{const _0x397e08=_0x171c76;previewState[_0x397e08(0x168)]!=='D2'&&!previewState[_0x397e08(0x1a5)]&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x5424a4['addEventListener'](_0x171c76(0x1d8),()=>{previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x1af346&&_0x58a8b5&&_0x1af346['addEventListener']('click',()=>{const _0x1026f2=_0x171c76,_0x28ef20=_0x58a8b5['style']['display']!=='none';_0x58a8b5['style']['display']=_0x28ef20?'none':'block',_0x1af346[_0x1026f2(0x145)]['toggle']('active',!_0x28ef20);});const _0x44557b=document['getElementById']('apply-enhanced-filters'),_0x126c34=document['getElementById']('clear-enhanced-filters');_0x44557b&&_0x44557b['addEventListener']('click',()=>{const _0x1dd058=_0x171c76;previewState[_0x1dd058(0x19d)]['pilots']=document['getElementById']('filter-pilots')['value'][_0x1dd058(0x187)](),previewState['enhancedFilters']['levels']=document['getElementById'](_0x1dd058(0x12c))['value']['trim']();const _0x37a24a=document['getElementById']('filter-subgames');previewState['enhancedFilters']['subgames']=Array[_0x1dd058(0x1c3)](_0x37a24a['selectedOptions'])['map'](_0x4070c9=>_0x4070c9['value'])[_0x1dd058(0x14d)](_0x350916=>_0x350916!==''),loadRecentMatchesPreview('current');});_0x126c34&&_0x126c34['addEventListener']('click',()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document['querySelectorAll']('.jump-btn')['forEach'](_0x5b0c1a=>{_0x5b0c1a['addEventListener']('click',()=>{const _0x17cfbe=_0x5b0c1a['dataset']['jump'];jumpToPage(_0x17cfbe);});});const _0x5878d0=document['getElementById']('jump-to-page');_0x5878d0&&_0x5878d0[_0x171c76(0x154)](_0x171c76(0x176),_0x34da52=>{const _0x1b48d5=_0x171c76;_0x34da52[_0x1b48d5(0x14f)]==='Enter'&&jumpToPage('input');});const _0x5d8bef=document['getElementById']('closeCommentPopupPreview'),_0x2a60df=document['getElementById']('commentOverlayPreview');if(_0x5d8bef)_0x5d8bef['addEventListener']('click',closePreviewCommentPopup);if(_0x2a60df)_0x2a60df['addEventListener']('click',closePreviewCommentPopup);const _0xed3cdb=document['getElementById']('closeAddCommentPopup'),_0x4846fa=document['getElementById'](_0x171c76(0x1b3)),_0x126ccf=document['getElementById'](_0x171c76(0x15d));if(_0xed3cdb)_0xed3cdb['addEventListener']('click',closeAddCommentPopup);if(_0x4846fa)_0x4846fa[_0x171c76(0x154)]('click',closeAddCommentPopup);if(_0x126ccf)_0x126ccf['addEventListener'](_0x171c76(0x1da),submitComment);const _0x304d05=document['getElementById'](_0x171c76(0x1b9)),_0x43cd9a=document['getElementById']('wordCount');_0x304d05&&_0x43cd9a&&setupWordCounter('commentText','wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window[a6_0x4b3b5a(0x1d9)]=submitComment;