const a45_0x3a3366=a45_0x521b,a45_0x2792c2=(function(){let _0x3b2477=!![];return function(_0x110e6f,_0x43fc76){const _0x442f32=_0x3b2477?function(){if(_0x43fc76){const _0x3c31d5=_0x43fc76['apply'](_0x110e6f,arguments);return _0x43fc76=null,_0x3c31d5;}}:function(){};return _0x3b2477=![],_0x442f32;};}()),a45_0x156d76=a45_0x2792c2(this,function(){const _0x2b4b49=a45_0x521b;let _0x101282;try{const _0x5df8b7=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x101282=_0x5df8b7();}catch(_0x201f5c){_0x101282=window;}const _0x43406d=_0x101282[_0x2b4b49(0xb1)]=_0x101282['console']||{},_0x365509=['log',_0x2b4b49(0xa1),'info','error',_0x2b4b49(0x9f),_0x2b4b49(0xa6),'trace'];for(let _0x507e21=0x0;_0x507e21<_0x365509[_0x2b4b49(0xa8)];_0x507e21++){const _0x239053=a45_0x2792c2['constructor']['prototype']['bind'](a45_0x2792c2),_0x51c2b1=_0x365509[_0x507e21],_0x4731a5=_0x43406d[_0x51c2b1]||_0x239053;_0x239053[_0x2b4b49(0xaf)]=a45_0x2792c2[_0x2b4b49(0xa3)](a45_0x2792c2),_0x239053[_0x2b4b49(0xb0)]=_0x4731a5[_0x2b4b49(0xb0)]['bind'](_0x4731a5),_0x43406d[_0x51c2b1]=_0x239053;}});a45_0x156d76();function a45_0x521b(_0x462be6,_0x1af12a){const _0x156d76=a45_0x41cd();return a45_0x521b=function(_0x2792c2,_0x14f791){_0x2792c2=_0x2792c2-0x91;let _0x41cd51=_0x156d76[_0x2792c2];return _0x41cd51;},a45_0x521b(_0x462be6,_0x1af12a);}function a45_0x41cd(){const _0x245b50=['exists','matches','loadPlayerStats','nickname','Error\x20saving\x20profile:','motto','value','error','toFixed','forEach','Error\x20loading\x20player\x20stats:','stats-matches','src','profile-form','exception','stats-winrate','warn','favoriteMap','bind','data','size','table','stats-wins','length','handleSubmit','form','addEventListener','pfpInput','winnerScore','readAsDataURL','__proto__','toString','console','pfpUrl','getElementById','log','Stats\x20calculated:','files'];a45_0x41cd=function(){return _0x245b50;};return a45_0x41cd();}import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x44c80f=a45_0x521b;this['form']=document['getElementById'](_0x44c80f(0x9e)),this[_0x44c80f(0xac)]=document['getElementById']('pfp-upload'),this['pfpPreview']=document[_0x44c80f(0xb3)]('profile-preview'),this['statsContainer']=document['getElementById']('player-stats'),this['setupEventListeners'](),this['loadProfile']();}['setupEventListeners'](){const _0x343693=a45_0x521b;this['pfpInput']['addEventListener']('change',_0x34ef17=>this['handleImageUpload'](_0x34ef17)),this['form']['addEventListener']('submit',_0x192ed5=>this[_0x343693(0xa9)](_0x192ed5));}async['handleImageUpload'](_0x17744f){const _0x5fca72=a45_0x521b,_0x227c2f=_0x17744f['target']['files'][0x0];if(_0x227c2f){const _0x58647f=new FileReader();_0x58647f['onload']=_0x28bdf9=>{this['pfpPreview']['src']=_0x28bdf9['target']['result'];},_0x58647f[_0x5fca72(0xae)](_0x227c2f);}}async['handleSubmit'](_0x1f79cf){const _0xe188f7=a45_0x521b;_0x1f79cf['preventDefault']();const _0xb84ef9=auth['currentUser'];if(!_0xb84ef9){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x36b810=new FormData(this[_0xe188f7(0xaa)]),_0xf2e82c={'nickname':_0x36b810['get'](_0xe188f7(0x94)),'motto':_0x36b810['get'](_0xe188f7(0x96)),'favoriteMap':_0x36b810['get']('favorite-map'),'favoriteWeapon':_0x36b810['get']('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0xf9fa7c=this[_0xe188f7(0xac)][_0xe188f7(0xb6)][0x0];if(_0xf9fa7c){const _0x5d3167=ref(storage,'profile-pictures/'+_0xb84ef9['uid']);await uploadBytes(_0x5d3167,_0xf9fa7c),_0xf2e82c[_0xe188f7(0xb2)]=await getDownloadURL(_0x5d3167);}await setDoc(doc(db,'profiles',_0xb84ef9['uid']),_0xf2e82c),alert('Profile\x20saved\x20successfully!');}catch(_0x34ffce){console['error'](_0xe188f7(0x95),_0x34ffce),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x445521=>{const _0x214260=a45_0x521b;if(_0x445521)try{const _0x13eab2=await getDoc(doc(db,'profiles',_0x445521['uid']));if(_0x13eab2[_0x214260(0x91)]()){const _0x15af92=_0x13eab2[_0x214260(0xa4)]();document['getElementById']('nickname')[_0x214260(0x97)]=_0x15af92['nickname']||'',document['getElementById'](_0x214260(0x96))['value']=_0x15af92['motto']||'',document[_0x214260(0xb3)]('favorite-map')['value']=_0x15af92[_0x214260(0xa2)]||'',document['getElementById']('favorite-weapon')['value']=_0x15af92['favoriteWeapon']||'',_0x15af92['pfpUrl']&&(this['pfpPreview'][_0x214260(0x9d)]=_0x15af92[_0x214260(0xb2)]),await this[_0x214260(0x93)](_0x15af92['nickname']);}}catch(_0x3203a9){console['error']('Error\x20loading\x20profile:',_0x3203a9);}});}async['loadPlayerStats'](_0x2a11da){const _0x1d1b38=a45_0x521b;if(!_0x2a11da)return;try{const _0x9dbfcb=collection(db,'approvedMatches'),[_0x4ba5f0,_0x20d29e]=await Promise['all']([getDocs(query(_0x9dbfcb,where('winnerUsername','==',_0x2a11da))),getDocs(query(_0x9dbfcb,where('loserUsername','==',_0x2a11da)))]),_0x10d429=_0x4ba5f0[_0x1d1b38(0xa5)],_0x444d0c=_0x20d29e['size'],_0x5e9f07=_0x10d429+_0x444d0c;let _0x2c4898=0x0,_0x463063=0x0;_0x4ba5f0['forEach'](_0x41e4c6=>{const _0x41982c=_0x1d1b38,_0x268309=_0x41e4c6['data']();if(_0x268309['winnerScore'])_0x2c4898+=parseInt(_0x268309[_0x41982c(0xad)]);if(_0x268309['loserScore'])_0x463063+=parseInt(_0x268309['loserScore']);}),_0x20d29e[_0x1d1b38(0x9a)](_0x27b197=>{const _0x2fc6d4=_0x1d1b38,_0x4a5862=_0x27b197[_0x2fc6d4(0xa4)]();if(_0x4a5862['loserScore'])_0x2c4898+=parseInt(_0x4a5862['loserScore']);if(_0x4a5862['winnerScore'])_0x463063+=parseInt(_0x4a5862['winnerScore']);});const _0x4d8476=_0x463063===0x0?_0x2c4898['toFixed'](0x2):(_0x2c4898/_0x463063)[_0x1d1b38(0x99)](0x2),_0xcd20b4=_0x5e9f07===0x0?'0':(_0x10d429/_0x5e9f07*0x64)['toFixed'](0x1);console[_0x1d1b38(0xb4)](_0x1d1b38(0xb5),{'totalMatches':_0x5e9f07,'wins':_0x10d429,'losses':_0x444d0c,'totalKills':_0x2c4898,'totalDeaths':_0x463063,'kdRatio':_0x4d8476,'winRate':_0xcd20b4}),document[_0x1d1b38(0xb3)](_0x1d1b38(0x9c))['textContent']=_0x5e9f07,document[_0x1d1b38(0xb3)](_0x1d1b38(0xa7))['textContent']=_0x10d429,document['getElementById']('stats-losses')['textContent']=_0x444d0c,document[_0x1d1b38(0xb3)]('stats-kd')['textContent']=_0x4d8476,document['getElementById'](_0x1d1b38(0xa0))['textContent']=_0xcd20b4+'%';}catch(_0x54fcf3){console[_0x1d1b38(0x98)](_0x1d1b38(0x9b),_0x54fcf3),[_0x1d1b38(0x92),'wins','losses','kd','winrate']['forEach'](_0x1c99a2=>{const _0x3aaada=_0x1d1b38;document[_0x3aaada(0xb3)]('stats-'+_0x1c99a2)['textContent']='-';});}}}document[a45_0x3a3366(0xab)]('DOMContentLoaded',()=>{new ProfileManager();});