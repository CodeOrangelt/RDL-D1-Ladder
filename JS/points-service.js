const a44_0xf7537e=a44_0x40aa,a44_0x3eae77=(function(){let _0xdc736b=!![];return function(_0x15f8b6,_0xc71b8b){const _0x15a4ce=_0xdc736b?function(){const _0x18612d=a44_0x40aa;if(_0xc71b8b){const _0x54be2f=_0xc71b8b[_0x18612d(0x6d)](_0x15f8b6,arguments);return _0xc71b8b=null,_0x54be2f;}}:function(){};return _0xdc736b=![],_0x15a4ce;};}()),a44_0xbb2d7c=a44_0x3eae77(this,function(){const _0x1f74b1=a44_0x40aa,_0x33464c=function(){const _0x2c0e04=a44_0x40aa;let _0x3c4ace;try{_0x3c4ace=Function(_0x2c0e04(0x83)+_0x2c0e04(0x7b)+');')();}catch(_0x334836){_0x3c4ace=window;}return _0x3c4ace;},_0x552503=_0x33464c(),_0x326db7=_0x552503[_0x1f74b1(0x85)]=_0x552503[_0x1f74b1(0x85)]||{},_0x4435c2=[_0x1f74b1(0x77),_0x1f74b1(0x74),_0x1f74b1(0x89),_0x1f74b1(0x82),_0x1f74b1(0x93),_0x1f74b1(0x88),_0x1f74b1(0x98)];for(let _0x2d3c62=0x0;_0x2d3c62<_0x4435c2[_0x1f74b1(0x91)];_0x2d3c62++){const _0x2fede0=a44_0x3eae77[_0x1f74b1(0x96)][_0x1f74b1(0x92)][_0x1f74b1(0x6e)](a44_0x3eae77),_0x50e726=_0x4435c2[_0x2d3c62],_0x52df37=_0x326db7[_0x50e726]||_0x2fede0;_0x2fede0[_0x1f74b1(0x8f)]=a44_0x3eae77[_0x1f74b1(0x6e)](a44_0x3eae77),_0x2fede0[_0x1f74b1(0x99)]=_0x52df37[_0x1f74b1(0x99)][_0x1f74b1(0x6e)](_0x52df37),_0x326db7[_0x50e726]=_0x2fede0;}});a44_0xbb2d7c();import{db}from'./firebase-config.js';import{doc,getDoc,updateDoc,addDoc,collection,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a44_0x40aa(_0x4c3197,_0x5a6252){_0x4c3197=_0x4c3197-0x6a;const _0xbb2d7c=a44_0x4106();let _0x3eae77=_0xbb2d7c[_0x4c3197];return _0x3eae77;}const POINTS_CHART={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'â‰¥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};function a44_0x4106(){const _0x22c403=['data',',\x20skipping\x20points\x20award','unknown','apply','bind','Added\x20','exists','modifyUserPoints','Admin\x20points\x20service\x20connected','points','warn','.\x20New\x20total:\x20','\x20match\x20(Participant)','log','username','system-match-award','email','{}.constructor(\x22return\x20this\x22)(\x20)','Error\x20adding\x20points\x20to\x20user:','userProfiles','Awarded\x20','./adminbackend.js','Unknown\x20User','\x20match\x20(Winner)','error','return\x20(function()\x20','User\x20profile\x20not\x20found\x20for\x20','console','Admin\x20backend\x20not\x20available,\x20using\x20fallback\x20points\x20service','Error\x20awarding\x20match\x20points:','table','info','\x20match','all','Standard','\x20points\x20to\x20both\x20players\x20for\x20','Match\x20points:\x20','__proto__','displayName','length','prototype','exception','pointsHistory','add','constructor','\x20points\x20to\x20user\x20','trace','toString'];a44_0x4106=function(){return _0x22c403;};return a44_0x4106();}let adminModifyUserPoints=null;try{const adminModule=await import(a44_0xf7537e(0x7f));adminModule[a44_0xf7537e(0x71)]&&(adminModifyUserPoints=adminModule[a44_0xf7537e(0x71)],console[a44_0xf7537e(0x77)](a44_0xf7537e(0x72)));}catch(a44_0x426e2b){console[a44_0xf7537e(0x77)](a44_0xf7537e(0x86));}export async function awardMatchPoints(_0x43db55,_0x293ca3,_0x452d63){const _0x32f842=a44_0xf7537e;try{const _0x2ddf36=POINTS_CHART[_0x452d63]||0xa;return adminModifyUserPoints?await Promise[_0x32f842(0x8b)]([adminModifyUserPoints(_0x43db55,_0x32f842(0x95),_0x2ddf36,_0x32f842(0x8e)+(_0x452d63||_0x32f842(0x8c))+_0x32f842(0x81)),adminModifyUserPoints(_0x293ca3,_0x32f842(0x95),_0x2ddf36,_0x32f842(0x8e)+(_0x452d63||_0x32f842(0x8c))+_0x32f842(0x76))]):await Promise[_0x32f842(0x8b)]([addPointsFallback(_0x43db55,_0x2ddf36,_0x32f842(0x8e)+(_0x452d63||_0x32f842(0x8c))+_0x32f842(0x81)),addPointsFallback(_0x293ca3,_0x2ddf36,_0x32f842(0x8e)+(_0x452d63||_0x32f842(0x8c))+_0x32f842(0x76))]),console[_0x32f842(0x77)](_0x32f842(0x7e)+_0x2ddf36+_0x32f842(0x8d)+(_0x452d63||_0x32f842(0x8c))+_0x32f842(0x8a)),!![];}catch(_0x4c9595){return console[_0x32f842(0x82)](_0x32f842(0x87),_0x4c9595),![];}}async function addPointsFallback(_0x1f6cc7,_0x48c345,_0x12bffe=''){const _0x209a1d=a44_0xf7537e;try{const _0x38d576=doc(db,_0x209a1d(0x7d),_0x1f6cc7),_0x581095=await getDoc(_0x38d576);if(!_0x581095[_0x209a1d(0x70)]()){console[_0x209a1d(0x77)](_0x209a1d(0x84)+_0x1f6cc7+_0x209a1d(0x6b));return;}const _0x3f3693=_0x581095[_0x209a1d(0x6a)](),_0x9997f0=_0x3f3693[_0x209a1d(0x73)]||0x0,_0x1fa6d8=_0x9997f0+_0x48c345;await updateDoc(_0x38d576,{'points':_0x1fa6d8,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x209a1d(0x94)),{'userId':_0x1f6cc7,'userEmail':_0x3f3693[_0x209a1d(0x7a)]||_0x209a1d(0x6c),'displayName':_0x3f3693[_0x209a1d(0x90)]||_0x3f3693[_0x209a1d(0x78)]||_0x209a1d(0x80),'action':_0x209a1d(0x95),'amount':_0x48c345,'previousPoints':_0x9997f0,'newPoints':_0x1fa6d8,'reason':_0x12bffe,'adminEmail':_0x209a1d(0x79),'timestamp':serverTimestamp()}),console[_0x209a1d(0x77)](_0x209a1d(0x6f)+_0x48c345+_0x209a1d(0x97)+_0x1f6cc7+_0x209a1d(0x75)+_0x1fa6d8);}catch(_0x541d34){console[_0x209a1d(0x82)](_0x209a1d(0x7c),_0x541d34);throw _0x541d34;}}