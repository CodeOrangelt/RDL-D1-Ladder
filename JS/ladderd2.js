const a34_0x34bbc0=a34_0x4e80,a34_0x28373d=(function(){let _0x44c7c3=!![];return function(_0x56a718,_0x2bb6e7){const _0x2d50a6=_0x44c7c3?function(){const _0x2f7665=a34_0x4e80;if(_0x2bb6e7){const _0x4e19a8=_0x2bb6e7[_0x2f7665(0x197)](_0x56a718,arguments);return _0x2bb6e7=null,_0x4e19a8;}}:function(){};return _0x44c7c3=![],_0x2d50a6;};}()),a34_0x270ac0=a34_0x28373d(this,function(){const _0x438b6d=a34_0x4e80,_0x42b86b=function(){const _0x1650e2=a34_0x4e80;let _0x4426e9;try{_0x4426e9=Function(_0x1650e2(0x129)+_0x1650e2(0x136)+');')();}catch(_0x16ac1a){_0x4426e9=window;}return _0x4426e9;},_0x152274=_0x42b86b(),_0x5519cc=_0x152274[_0x438b6d(0x12f)]=_0x152274[_0x438b6d(0x12f)]||{},_0x35b3be=[_0x438b6d(0x131),_0x438b6d(0x135),_0x438b6d(0x17e),_0x438b6d(0x15d),_0x438b6d(0x14a),_0x438b6d(0x13e),_0x438b6d(0x18b)];for(let _0x24859e=0x0;_0x24859e<_0x35b3be[_0x438b6d(0x144)];_0x24859e++){const _0xc17d76=a34_0x28373d[_0x438b6d(0x128)][_0x438b6d(0x17b)][_0x438b6d(0x159)](a34_0x28373d),_0x40dfaf=_0x35b3be[_0x24859e],_0x973250=_0x5519cc[_0x40dfaf]||_0xc17d76;_0xc17d76[_0x438b6d(0x171)]=a34_0x28373d[_0x438b6d(0x159)](a34_0x28373d),_0xc17d76[_0x438b6d(0x17a)]=_0x973250[_0x438b6d(0x17a)][_0x438b6d(0x159)](_0x973250),_0x5519cc[_0x40dfaf]=_0xc17d76;}});a34_0x270ac0();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a34_0xcba912 from'./firebase-idle-wrapper.js';function a34_0x4e80(_0x4f8005,_0x115461){_0x4f8005=_0x4f8005-0x124;const _0x270ac0=a34_0x265d();let _0x28373d=_0x270ac0[_0x4f8005];return _0x28373d;}import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},profileCacheD2={'data':null,'timestamp':0x0},matchStatsCacheD2={'data':null,'timestamp':0x0},eloHistoryCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x5*0x3c*0x3e8,PROFILE_CACHE_DURATION=0xa*0x3c*0x3e8,MATCH_STATS_CACHE_DURATION=0x3*0x3c*0x3e8,ELO_HISTORY_CACHE_DURATION=0x2*0x3c*0x3e8;async function loadLadderDataOptimizedD2(_0x415a4d=![]){const _0x3e0085=a34_0x4e80,_0x1153ec=Date[_0x3e0085(0x13c)]();if(!_0x415a4d&&playerCacheD2[_0x3e0085(0x149)]&&_0x1153ec-playerCacheD2[_0x3e0085(0x161)]<CACHE_DURATION){console[_0x3e0085(0x131)](_0x3e0085(0x139));const _0x24badd=playerCacheD2[_0x3e0085(0x149)][_0x3e0085(0x133)](_0x627cf=>_0x627cf[_0x3e0085(0x1b1)]),_0x5b3871=await fetchBatchMatchStatsD2(_0x24badd);return{'players':playerCacheD2[_0x3e0085(0x149)],'matchStatsBatch':_0x5b3871};}const [_0x27e4ba,_0x129c3d]=await Promise[_0x3e0085(0x167)]([getDocs(collection(db,_0x3e0085(0x154))),getDocs(collection(db,_0x3e0085(0x13a)))]),_0x33d3a3=[];_0x27e4ba[_0x3e0085(0x1a5)](_0x5c3822=>{const _0x1389b4=_0x3e0085,_0x47ccfd=_0x5c3822[_0x1389b4(0x149)]();_0x47ccfd[_0x1389b4(0x1b1)]&&_0x33d3a3[_0x1389b4(0x181)]({..._0x47ccfd,'id':_0x5c3822['id'],'elo':_0x47ccfd[_0x1389b4(0x199)]||0x0,'position':_0x47ccfd[_0x1389b4(0x183)]||Number[_0x1389b4(0x19c)]});});const _0x1b7190=new Map();_0x129c3d[_0x3e0085(0x1a5)](_0x5ee904=>{const _0x58eaa8=_0x3e0085,_0x45fef7=_0x5ee904[_0x58eaa8(0x149)]();_0x45fef7[_0x58eaa8(0x1b1)]&&_0x1b7190[_0x58eaa8(0x191)](_0x45fef7[_0x58eaa8(0x1b1)][_0x58eaa8(0x1a3)](),_0x45fef7);});for(const _0x4dbc10 of _0x33d3a3){const _0x9ae74=_0x4dbc10[_0x3e0085(0x1b1)][_0x3e0085(0x1a3)]();if(_0x1b7190[_0x3e0085(0x1a2)](_0x9ae74)){const _0x2c4801=_0x1b7190[_0x3e0085(0x16d)](_0x9ae74);_0x2c4801[_0x3e0085(0x198)]&&(_0x4dbc10[_0x3e0085(0x198)]=_0x2c4801[_0x3e0085(0x198)][_0x3e0085(0x1a3)]()),_0x4dbc10[_0x3e0085(0x187)]=_0x2c4801[_0x3e0085(0x187)]||0x0;}else _0x4dbc10[_0x3e0085(0x187)]=0x0;}const _0x53d9d6=_0x33d3a3[_0x3e0085(0x133)](_0x351a25=>_0x351a25[_0x3e0085(0x1b1)]),_0x2a8250=await fetchBatchMatchStatsD2(_0x53d9d6);return _0x33d3a3[_0x3e0085(0x130)]((_0x563390,_0x75c24b)=>{const _0x1d175f=_0x3e0085,_0x1636b3=_0x2a8250[_0x1d175f(0x16d)](_0x563390[_0x1d175f(0x1b1)])?.[_0x1d175f(0x19b)]||0x0,_0x53a966=_0x2a8250[_0x1d175f(0x16d)](_0x75c24b[_0x1d175f(0x1b1)])?.[_0x1d175f(0x19b)]||0x0;if(_0x1636b3===0x0!==(_0x53a966===0x0))return _0x1636b3===0x0?0x1:-0x1;return(_0x563390[_0x1d175f(0x183)]||0x3e7)-(_0x75c24b[_0x1d175f(0x183)]||0x3e7);}),_0x33d3a3[_0x3e0085(0x1a5)]((_0x10b22a,_0x59f1d3)=>{const _0x3df79a=_0x3e0085;_0x10b22a[_0x3df79a(0x183)]=_0x59f1d3+0x1;}),playerCacheD2[_0x3e0085(0x149)]=_0x33d3a3,playerCacheD2[_0x3e0085(0x161)]=_0x1153ec,{'players':_0x33d3a3,'matchStatsBatch':_0x2a8250};}async function displayLadderD2(_0x17b78c=![]){const _0x1c92c9=a34_0x4e80,_0x3a4a8f=document[_0x1c92c9(0x140)](_0x1c92c9(0x15a));if(!_0x3a4a8f){console[_0x1c92c9(0x15d)](_0x1c92c9(0x190));return;}_0x3a4a8f[_0x1c92c9(0x141)]=_0x1c92c9(0x12b);try{const {players:_0x29096d,matchStatsBatch:_0x1fd657}=await loadLadderDataOptimizedD2(_0x17b78c);await updateLadderDisplayD2(_0x29096d,_0x1fd657);}catch(_0x58468e){console[_0x1c92c9(0x15d)](_0x1c92c9(0x18d),_0x58468e),_0x3a4a8f[_0x1c92c9(0x141)]=_0x1c92c9(0x15c)+_0x58468e[_0x1c92c9(0x188)]+_0x1c92c9(0x166);}}function getNextAvailablePositionD2(_0x591678){const _0x5a2840=a34_0x4e80;if(_0x591678[_0x5a2840(0x144)]===0x0)return 0x1;let _0x2c6f30=0x0;return _0x591678[_0x5a2840(0x1a5)](_0x471850=>{const _0x261dd9=_0x5a2840;_0x471850[_0x261dd9(0x183)]&&typeof _0x471850[_0x261dd9(0x183)]===_0x261dd9(0x16c)&&_0x471850[_0x261dd9(0x183)]>_0x2c6f30&&(_0x2c6f30=_0x471850[_0x261dd9(0x183)]);}),_0x2c6f30+0x1;}async function updatePlayerPositions(_0x42f109,_0x34a6af){const _0x3549fe=a34_0x4e80;try{const _0x48fbb1=collection(db,_0x3549fe(0x154)),_0x55e831=await getDocs(_0x48fbb1),_0x36af6f=[];_0x55e831[_0x3549fe(0x1a5)](_0x4b1d62=>{const _0x24eccd=_0x3549fe;_0x36af6f[_0x24eccd(0x181)]({'id':_0x4b1d62['id'],..._0x4b1d62[_0x24eccd(0x149)]()});});const _0x4ed625=_0x36af6f[_0x3549fe(0x17c)](_0x5560c2=>_0x5560c2[_0x3549fe(0x1b1)]===_0x42f109),_0x348448=_0x36af6f[_0x3549fe(0x17c)](_0x3c5000=>_0x3c5000[_0x3549fe(0x1b1)]===_0x34a6af);if(!_0x4ed625||!_0x348448){console[_0x3549fe(0x15d)](_0x3549fe(0x1b4));return;}if(_0x4ed625[_0x3549fe(0x183)]>_0x348448[_0x3549fe(0x183)]){const _0x96c5dd=_0x348448[_0x3549fe(0x183)];for(const _0x6e418 of _0x36af6f){_0x6e418[_0x3549fe(0x183)]>=_0x348448[_0x3549fe(0x183)]&&_0x6e418[_0x3549fe(0x183)]<_0x4ed625[_0x3549fe(0x183)]&&_0x6e418[_0x3549fe(0x1b1)]!==_0x42f109&&await updateDoc(doc(db,_0x3549fe(0x154),_0x6e418['id']),{'position':_0x6e418[_0x3549fe(0x183)]+0x1});}await updateDoc(doc(db,_0x3549fe(0x154),_0x4ed625['id']),{'position':_0x96c5dd});if(_0x96c5dd===0x1){const _0x59038e=doc(db,_0x3549fe(0x154),_0x4ed625['id']),_0x37717e=await getDoc(_0x59038e);!_0x37717e[_0x3549fe(0x149)]()[_0x3549fe(0x176)]&&await updateDoc(_0x59038e,{'firstPlaceDate':Timestamp[_0x3549fe(0x13c)]()});}if(_0x348448[_0x3549fe(0x183)]===0x1){const _0x339c6c=doc(db,_0x3549fe(0x154),_0x348448['id']);await updateDoc(_0x339c6c,{'firstPlaceDate':null});}playerCacheD2[_0x3549fe(0x161)]=0x0;}}catch(_0x19d970){console[_0x3549fe(0x15d)](_0x3549fe(0x132),_0x19d970);}}function getPlayerRankNameD2(_0x5bfe27,_0x527733=0x0,_0x47f996=0x0){const _0x107d13=a34_0x4e80;if(_0x527733===0x0)return _0x107d13(0x14d);if(_0x527733>=0x5&&_0x5bfe27<0xc8)return _0x107d13(0x12a);if(_0x5bfe27>=0x3e8&&_0x47f996>=0x50&&_0x527733>=0x14)return _0x107d13(0x170);if(_0x5bfe27>=0x2bc)return _0x107d13(0x193);if(_0x5bfe27>=0x1f4)return _0x107d13(0x1aa);if(_0x5bfe27>=0xc8)return _0x107d13(0x12a);return _0x107d13(0x14d);}window[a34_0x34bbc0(0x137)]=function(_0x5b46f9=!![]){const _0xdbbcec=a34_0x34bbc0;typeof displayLadderD2===_0xdbbcec(0x18e)?displayLadderD2(_0x5b46f9):console[_0xdbbcec(0x135)](_0xdbbcec(0x1ae));};async function updateLadderDisplayD2(_0xa6f9f9,_0x1ba813=null){const _0xaf5f14=a34_0x34bbc0,_0x4bd976=document[_0xaf5f14(0x140)](_0xaf5f14(0x15a));if(!_0x4bd976){console[_0xaf5f14(0x15d)](_0xaf5f14(0x190));return;}const _0x4193fb=document[_0xaf5f14(0x140)](_0xaf5f14(0x1af));_0x4193fb&&!_0x4193fb[_0xaf5f14(0x165)][_0xaf5f14(0x16b)]&&(_0x4193fb[_0xaf5f14(0x141)]=_0xaf5f14(0x16e),_0x4193fb[_0xaf5f14(0x165)][_0xaf5f14(0x16b)]=_0xaf5f14(0x153));_0xa6f9f9[_0xaf5f14(0x130)]((_0x2d6524,_0x34407c)=>_0x2d6524[_0xaf5f14(0x183)]-_0x34407c[_0xaf5f14(0x183)]);if(!_0x1ba813){const _0x3b2c02=_0xa6f9f9[_0xaf5f14(0x133)](_0x10a1b9=>_0x10a1b9[_0xaf5f14(0x1b1)]);_0x1ba813=await fetchBatchMatchStatsD2(_0x3b2c02);}const _0x4d8f2d=document[_0xaf5f14(0x16a)]();_0xa6f9f9[_0xaf5f14(0x1a5)](_0x53b466=>{const _0x5311c2=_0xaf5f14,_0xb3cd7f=_0x1ba813[_0x5311c2(0x16d)](_0x53b466[_0x5311c2(0x1b1)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0},_0x21e180=document[_0x5311c2(0x1ac)]('tr');_0x21e180[_0x5311c2(0x141)]=createPlayerRowWithTokenD2(_0x53b466,_0xb3cd7f,null),_0x4d8f2d[_0x5311c2(0x189)](_0x21e180);});const _0x543590=document[_0xaf5f14(0x1ac)]('tr');_0x543590[_0xaf5f14(0x15e)][_0xaf5f14(0x19f)]=_0xaf5f14(0x196),_0x543590[_0xaf5f14(0x141)]=_0xaf5f14(0x19e),_0x4d8f2d[_0xaf5f14(0x189)](_0x543590),_0x4bd976[_0xaf5f14(0x141)]='',_0x4bd976[_0xaf5f14(0x189)](_0x4d8f2d);const _0x13552=_0xa6f9f9[_0xaf5f14(0x133)](_0x169901=>_0x169901[_0xaf5f14(0x1b1)]);loadTokensAsyncD2(_0x4bd976,_0xa6f9f9,_0x1ba813,_0x13552),loadEloChangesAsyncD2(_0x4bd976,_0x13552);}async function loadTokensAsyncD2(_0x26e66e,_0x530979,_0x41484e,_0x3cb4d9){const _0x271e15=a34_0x34bbc0;try{const _0x4aac6c=await getTokensByUsernames(_0x3cb4d9);enhanceLadderWithTokensD2(_0x26e66e,_0x530979,_0x41484e,_0x4aac6c);}catch(_0x104945){return console[_0x271e15(0x15d)](_0x271e15(0x1ab),_0x104945),new Map();}}function enhanceLadderWithTokensD2(_0x1fc78f,_0x583681,_0x3dafc6,_0x229e7a){const _0x2f1e2a=a34_0x34bbc0,_0x1f8505=_0x1fc78f[_0x2f1e2a(0x14c)]('tr');_0x583681[_0x2f1e2a(0x1a5)]((_0x366231,_0x22f50e)=>{const _0x367b7a=_0x2f1e2a;if(_0x22f50e>=_0x1f8505[_0x367b7a(0x144)])return;const _0x2bc9f3=_0x1f8505[_0x22f50e],_0x4262e5=_0x2bc9f3[_0x367b7a(0x140)](_0x367b7a(0x174)),_0x13a83a=_0x2bc9f3[_0x367b7a(0x140)](_0x367b7a(0x182));_0x366231[_0x367b7a(0x198)]&&_0x4262e5&&(_0x4262e5[_0x367b7a(0x141)]=_0x367b7a(0x126)+_0x366231[_0x367b7a(0x198)][_0x367b7a(0x1a3)]()+_0x367b7a(0x1b3)+_0x366231[_0x367b7a(0x198)]+_0x367b7a(0x15b));const _0x3667d5=_0x229e7a[_0x367b7a(0x16d)](_0x366231[_0x367b7a(0x1b1)])||[],_0x1d837d=getPrimaryDisplayToken(_0x3667d5);_0x1d837d&&_0x13a83a&&(_0x13a83a[_0x367b7a(0x141)]=_0x367b7a(0x18f)+_0x1d837d[_0x367b7a(0x194)]+_0x367b7a(0x143)+_0x1d837d[_0x367b7a(0x1a9)]+_0x367b7a(0x148)+_0x1d837d[_0x367b7a(0x1a9)]+'\x20'+(_0x1d837d[_0x367b7a(0x124)]?_0x367b7a(0x185):'')+_0x367b7a(0x1ad));});}function loadEloChangesAsyncD2(_0x28937e,_0x22f098){const _0x500ab0=a34_0x34bbc0;getPlayersLastEloChangesD2(_0x22f098)[_0x500ab0(0x1a7)](_0x4727fc=>{const _0x5606b1=_0x500ab0,_0x507eb8=_0x28937e[_0x5606b1(0x14c)]('tr');_0x4727fc[_0x5606b1(0x1a5)]((_0x55bde6,_0x519701)=>{const _0x4fd31c=_0x5606b1,_0x18cd82=_0x22f098[_0x4fd31c(0x19d)](_0x519701);if(_0x18cd82!==-0x1&&_0x18cd82<_0x507eb8[_0x4fd31c(0x144)]&&_0x55bde6!==0x0){const _0x39f0fc=_0x507eb8[_0x18cd82],_0x32d9ce=_0x39f0fc[_0x4fd31c(0x140)](_0x4fd31c(0x164));if(_0x32d9ce){const _0x18ef7a=_0x32d9ce[_0x4fd31c(0x140)](_0x4fd31c(0x16f));if(_0x18ef7a){const _0x8a641=_0x55bde6>0x0?'+'+_0x55bde6:''+_0x55bde6;_0x18ef7a[_0x4fd31c(0x12d)]=_0x8a641,_0x18ef7a[_0x4fd31c(0x15e)][_0x4fd31c(0x180)]=_0x55bde6>0x0?_0x4fd31c(0x158):_0x4fd31c(0x138),_0x18ef7a[_0x4fd31c(0x15e)][_0x4fd31c(0x19a)]=_0x4fd31c(0x13b),_0x18ef7a[_0x4fd31c(0x15e)][_0x4fd31c(0x18c)]=_0x4fd31c(0x184),_0x18ef7a[_0x4fd31c(0x15e)][_0x4fd31c(0x1b2)]=_0x4fd31c(0x169);}}}});})[_0x500ab0(0x14e)](_0x15835f=>console[_0x500ab0(0x15d)](_0x500ab0(0x17f),_0x15835f));}function createPlayerRowWithTokenD2(_0x316d76,_0x5b61b9,_0x1ed774){const _0x51b2d0=a34_0x34bbc0,_0x2f7986=parseFloat(_0x316d76[_0x51b2d0(0x1a4)])||0x0;let _0x4c5c8a=_0x51b2d0(0x173);if(_0x5b61b9[_0x51b2d0(0x19b)]===0x0)_0x4c5c8a=_0x51b2d0(0x173);else{if(_0x5b61b9[_0x51b2d0(0x19b)]>=0x5&&_0x2f7986<0xc8)_0x4c5c8a=_0x51b2d0(0x18a);else{if(_0x2f7986>=0x3e8&&_0x5b61b9[_0x51b2d0(0x1a6)]>=0x50&&_0x5b61b9[_0x51b2d0(0x19b)]>=0x14)_0x4c5c8a=_0x51b2d0(0x168);else{if(_0x2f7986>=0x2bc)_0x4c5c8a=_0x51b2d0(0x127);else{if(_0x2f7986>=0x1f4)_0x4c5c8a=_0x51b2d0(0x12c);else _0x2f7986>=0xc8&&(_0x4c5c8a=_0x51b2d0(0x18a));}}}}return _0x51b2d0(0x179)+_0x316d76[_0x51b2d0(0x183)]+_0x51b2d0(0x178)+encodeURIComponent(_0x316d76[_0x51b2d0(0x1b1)])+_0x51b2d0(0x175)+_0x4c5c8a+_0x51b2d0(0x152)+_0x316d76[_0x51b2d0(0x1b1)]+_0x51b2d0(0x155)+_0x4c5c8a+_0x51b2d0(0x157)+_0x2f7986+_0x51b2d0(0x14b)+_0x5b61b9[_0x51b2d0(0x19b)]+_0x51b2d0(0x1b5)+_0x5b61b9[_0x51b2d0(0x12e)]+_0x51b2d0(0x1b5)+_0x5b61b9[_0x51b2d0(0x172)]+_0x51b2d0(0x1b5)+_0x5b61b9[_0x51b2d0(0x1a1)]+_0x51b2d0(0x1b5)+_0x5b61b9[_0x51b2d0(0x1a6)]+_0x51b2d0(0x156)+(_0x316d76[_0x51b2d0(0x187)]||0x0)+_0x51b2d0(0x145);}async function getPlayersLastEloChangesD2(_0x30d1bd){const _0x56e993=a34_0x34bbc0,_0x5549ab=new Map();_0x30d1bd[_0x56e993(0x1a5)](_0x35bed4=>_0x5549ab[_0x56e993(0x191)](_0x35bed4,0x0));try{const _0x583397=collection(db,_0x56e993(0x1a8)),_0x2991e0=query(_0x583397,orderBy(_0x56e993(0x161),_0x56e993(0x13d)),limit(0x64)),_0x49697d=await getDocs(_0x2991e0),_0x3bdd0d=new Map(),_0x11d6fa=await getDocs(collection(db,_0x56e993(0x154)));_0x11d6fa[_0x56e993(0x1a5)](_0x109db0=>{const _0x43e0ed=_0x56e993,_0x27590f=_0x109db0[_0x43e0ed(0x149)]();_0x27590f[_0x43e0ed(0x1b1)]&&_0x3bdd0d[_0x43e0ed(0x191)](_0x109db0['id'],_0x27590f[_0x43e0ed(0x1b1)]);});const _0x4b1293=new Map();_0x49697d[_0x56e993(0x1a5)](_0x11aa4b=>{const _0xaca36a=_0x56e993,_0x41d810=_0x11aa4b[_0xaca36a(0x149)]();let _0x358ea2=_0x41d810[_0xaca36a(0x1b1)]||_0x41d810[_0xaca36a(0x14f)];!_0x358ea2&&_0x41d810[_0xaca36a(0x142)]&&_0x3bdd0d[_0xaca36a(0x1a2)](_0x41d810[_0xaca36a(0x142)])&&(_0x358ea2=_0x3bdd0d[_0xaca36a(0x16d)](_0x41d810[_0xaca36a(0x142)])),_0x358ea2&&_0x30d1bd[_0xaca36a(0x146)](_0x358ea2)&&(!_0x4b1293[_0xaca36a(0x1a2)](_0x358ea2)&&_0x4b1293[_0xaca36a(0x191)](_0x358ea2,[]),_0x4b1293[_0xaca36a(0x16d)](_0x358ea2)[_0xaca36a(0x181)]({..._0x41d810,'timestamp':_0x41d810[_0xaca36a(0x161)]?.[_0xaca36a(0x15f)]||0x0,'username':_0x358ea2}));}),_0x4b1293[_0x56e993(0x1a5)]((_0xa67d10,_0xa6c6b8)=>{const _0x6fc506=_0x56e993;if(_0xa67d10[_0x6fc506(0x144)]>0x0){_0xa67d10[_0x6fc506(0x130)]((_0xfd45d5,_0xc5ed7c)=>_0xc5ed7c[_0x6fc506(0x161)]-_0xfd45d5[_0x6fc506(0x161)]);const _0x30ebb3=_0xa67d10[_0x6fc506(0x17c)](_0x3020a0=>_0x3020a0[_0x6fc506(0x147)]!==undefined||_0x3020a0[_0x6fc506(0x163)]!==undefined&&_0x3020a0[_0x6fc506(0x13f)]!==undefined);if(_0x30ebb3){let _0x3b6db9;if(_0x30ebb3[_0x6fc506(0x147)]!==undefined)_0x3b6db9=_0x30ebb3[_0x6fc506(0x147)];else _0x30ebb3[_0x6fc506(0x163)]!==undefined&&_0x30ebb3[_0x6fc506(0x13f)]!==undefined&&(_0x3b6db9=_0x30ebb3[_0x6fc506(0x163)]-_0x30ebb3[_0x6fc506(0x13f)]);_0x3b6db9!==undefined&&_0x5549ab[_0x6fc506(0x191)](_0xa6c6b8,_0x3b6db9);}}});if(_0x4b1293[_0x56e993(0x125)]===0x0){const _0x3476c4=collection(db,_0x56e993(0x1a0)),_0x242282=query(_0x3476c4,where(_0x56e993(0x1b0),'==','D2'),orderBy(_0x56e993(0x161),_0x56e993(0x13d)),limit(0x32));try{const _0x283a71=await getDocs(_0x242282);_0x283a71[_0x56e993(0x1a5)](_0x455356=>{const _0x4e2228=_0x56e993,_0x3e1f42=_0x455356[_0x4e2228(0x149)](),_0x24b1ed=_0x3e1f42[_0x4e2228(0x1b1)]||_0x3e1f42[_0x4e2228(0x14f)];if(_0x24b1ed&&_0x30d1bd[_0x4e2228(0x146)](_0x24b1ed)){const _0x130bb8=_0x3e1f42[_0x4e2228(0x147)]||(_0x3e1f42[_0x4e2228(0x163)]!==undefined&&_0x3e1f42[_0x4e2228(0x13f)]!==undefined?_0x3e1f42[_0x4e2228(0x163)]-_0x3e1f42[_0x4e2228(0x13f)]:0x0);_0x130bb8!==0x0&&_0x5549ab[_0x4e2228(0x191)](_0x24b1ed,_0x130bb8);}});}catch(_0x18f5ea){}}}catch(_0xe0671){console[_0x56e993(0x15d)](_0x56e993(0x160),_0xe0671);}return _0x5549ab;}function a34_0x265d(){const _0x3d1081=['equipped','size','<img\x20src=\x22../images/flags/','#FFD700','constructor','return\x20(function()\x20','Bronze','<tr><td\x20colspan=\x229\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','#b9f1fc','textContent','wins','console','sort','log','Error\x20updating\x20D2\x20player\x20positions:','map','loserUsername','warn','{}.constructor(\x22return\x20this\x22)(\x20)','refreshLadderDisplayD2','#F44336','Using\x20cached\x20D2\x20ladder\x20data','userProfiles','bold','now','desc','table','previousElo','querySelector','innerHTML','player','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','length','</td>\x0a</tr>','includes','change','\x22\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','data','exception','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td>','querySelectorAll','Unranked','catch','playerUsername','totalDeaths','winnerScore',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','true','playersD2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22flag-placeholder\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22token-placeholder\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20','%</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','#4CAF50','bind','#ladder-d2\x20tbody','\x22\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x229\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','error','style','seconds','D2:\x20Error\x20fetching\x20ELO\x20history:','timestamp','approvedMatchesD2','newElo','td:nth-child(3)','dataset','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','all','#50C878','inline','createDocumentFragment','initialized','number','get','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','.trend-indicator','Emerald','__proto__','losses','#DC143C','.flag-placeholder','&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','firstPlaceDate','totalKills','</td>\x0a\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','\x0a<tr>\x0a\x20\x20\x20\x20<td>','toString','prototype','find','loserScore','info','Error\x20updating\x20D2\x20ELO\x20changes:','color','push','.token-placeholder','position','0.85em','(Equipped)','winnerUsername','points','message','appendChild','#CD7F32','trace','fontSize','Error\x20loading\x20D2\x20ladder:','function','<img\x20src=\x22','D2\x20Ladder\x20table\x20body\x20not\x20found','set','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','Gold','tokenImage','toFixed','60px','apply','country','eloRating','fontWeight','totalMatches','MAX_SAFE_INTEGER','indexOf','<td\x20colspan=\x229\x22></td>','height','eloHistory','kda','has','toLowerCase','elo','forEach','winRate','then','eloHistoryD2','tokenName','Silver','Error\x20loading\x20D2\x20tokens:','createElement','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','displayLadderD2\x20function\x20not\x20available','#ladder-d2\x20thead\x20tr','gameMode','username','display','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list','</td>\x0a\x20\x20\x20\x20<td>'];a34_0x265d=function(){return _0x3d1081;};return a34_0x265d();}async function fetchBatchMatchStatsD2(_0x201cab){const _0x169528=a34_0x34bbc0,_0x19df41=Date[_0x169528(0x13c)]();if(matchStatsCacheD2[_0x169528(0x149)]&&_0x19df41-matchStatsCacheD2[_0x169528(0x161)]<MATCH_STATS_CACHE_DURATION){const _0x119795=new Map();return _0x201cab[_0x169528(0x1a5)](_0x39455e=>{const _0x5f2552=_0x169528;matchStatsCacheD2[_0x5f2552(0x149)][_0x5f2552(0x1a2)](_0x39455e)?_0x119795[_0x5f2552(0x191)](_0x39455e,matchStatsCacheD2[_0x5f2552(0x149)][_0x5f2552(0x16d)](_0x39455e)):_0x119795[_0x5f2552(0x191)](_0x39455e,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});}),_0x119795;}const _0x4ca0f0=new Map();try{_0x201cab[_0x169528(0x1a5)](_0xdbc33e=>{const _0x5ef9f5=_0x169528;_0x4ca0f0[_0x5ef9f5(0x191)](_0xdbc33e,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x554a75=collection(db,_0x169528(0x162)),_0x81d97e=await getDocs(_0x554a75);_0x81d97e[_0x169528(0x1a5)](_0x2cad26=>{const _0x5ee3dd=_0x169528,_0xce74dc=_0x2cad26[_0x5ee3dd(0x149)](),_0x4c6153=_0xce74dc[_0x5ee3dd(0x186)],_0x197b60=_0xce74dc[_0x5ee3dd(0x134)];if(_0x201cab[_0x5ee3dd(0x146)](_0x4c6153)){const _0x2cb3c1=_0x4ca0f0[_0x5ee3dd(0x16d)](_0x4c6153);_0x2cb3c1[_0x5ee3dd(0x12e)]++,_0x2cb3c1[_0x5ee3dd(0x19b)]++,_0x2cb3c1[_0x5ee3dd(0x177)]+=parseInt(_0xce74dc[_0x5ee3dd(0x151)])||0x0,_0x2cb3c1[_0x5ee3dd(0x150)]+=parseInt(_0xce74dc[_0x5ee3dd(0x17d)])||0x0;}if(_0x201cab[_0x5ee3dd(0x146)](_0x197b60)){const _0x2bcc32=_0x4ca0f0[_0x5ee3dd(0x16d)](_0x197b60);_0x2bcc32[_0x5ee3dd(0x172)]++,_0x2bcc32[_0x5ee3dd(0x19b)]++,_0x2bcc32[_0x5ee3dd(0x177)]+=parseInt(_0xce74dc[_0x5ee3dd(0x17d)])||0x0,_0x2bcc32[_0x5ee3dd(0x150)]+=parseInt(_0xce74dc[_0x5ee3dd(0x151)])||0x0;}}),_0x201cab[_0x169528(0x1a5)](_0x3d6671=>{const _0x4bb49d=_0x169528,_0x52ba78=_0x4ca0f0[_0x4bb49d(0x16d)](_0x3d6671);_0x52ba78[_0x4bb49d(0x1a1)]=_0x52ba78[_0x4bb49d(0x150)]>0x0?(_0x52ba78[_0x4bb49d(0x177)]/_0x52ba78[_0x4bb49d(0x150)])[_0x4bb49d(0x195)](0x2):_0x52ba78[_0x4bb49d(0x177)][_0x4bb49d(0x195)](0x2),_0x52ba78[_0x4bb49d(0x1a6)]=_0x52ba78[_0x4bb49d(0x19b)]>0x0?(_0x52ba78[_0x4bb49d(0x12e)]/_0x52ba78[_0x4bb49d(0x19b)]*0x64)[_0x4bb49d(0x195)](0x1):0x0;}),matchStatsCacheD2[_0x169528(0x149)]=_0x4ca0f0,matchStatsCacheD2[_0x169528(0x161)]=_0x19df41;}catch(_0x9e67e8){console[_0x169528(0x15d)](_0x169528(0x192),_0x9e67e8);}return _0x4ca0f0;}export{displayLadderD2,updatePlayerPositions};