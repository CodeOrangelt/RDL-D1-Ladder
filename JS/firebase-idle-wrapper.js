const a17_0x457f2a=a17_0x2bc3,a17_0x1f9fb1=(function(){let _0x3d4cfb=!![];return function(_0x54d8f0,_0x4bb63c){const _0x5acb43=_0x3d4cfb?function(){const _0x15a8cb=a17_0x2bc3;if(_0x4bb63c){const _0x42b1c8=_0x4bb63c[_0x15a8cb(0x1dc)](_0x54d8f0,arguments);return _0x4bb63c=null,_0x42b1c8;}}:function(){};return _0x3d4cfb=![],_0x5acb43;};}()),a17_0x17cc04=a17_0x1f9fb1(this,function(){const _0x3a5a2a=a17_0x2bc3,_0x1a2bda=function(){const _0x3bf43a=a17_0x2bc3;let _0xea13d9;try{_0xea13d9=Function(_0x3bf43a(0x1b8)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x498448){_0xea13d9=window;}return _0xea13d9;},_0x3e9a18=_0x1a2bda(),_0x514945=_0x3e9a18[_0x3a5a2a(0x1da)]=_0x3e9a18[_0x3a5a2a(0x1da)]||{},_0x2f08d4=[_0x3a5a2a(0x1bf),'warn','info','error',_0x3a5a2a(0x1e0),'table','trace'];for(let _0x126cf9=0x0;_0x126cf9<_0x2f08d4[_0x3a5a2a(0x1be)];_0x126cf9++){const _0x40e8ff=a17_0x1f9fb1[_0x3a5a2a(0x1d6)][_0x3a5a2a(0x1d4)]['bind'](a17_0x1f9fb1),_0x313cee=_0x2f08d4[_0x126cf9],_0x1786f2=_0x514945[_0x313cee]||_0x40e8ff;_0x40e8ff['__proto__']=a17_0x1f9fb1[_0x3a5a2a(0x1c7)](a17_0x1f9fb1),_0x40e8ff['toString']=_0x1786f2['toString']['bind'](_0x1786f2),_0x514945[_0x313cee]=_0x40e8ff;}});a17_0x17cc04();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a17_0x149a(){const _0x2b5ec8=['appendChild','safeOperation','deleteDocument','size','return\x20(function()\x20','debug','[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20','RDL_NETWORK_ERROR','[FirebaseIdle]\x20Successfully\x20suspended\x20listener:','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','length','log','set','activeListeners','message','firebase-suspend-indicator','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20','bind','add','unsubscribe','Executing\x20pending\x20','[FirebaseIdle]\x20Suspending\x20listener:','[FirebaseIdle]\x20Creating\x20listener:\x20','random','[FirebaseIdle]\x20Active\x20listeners:\x20','delete','[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension','pendingOperations','\x20operations\x20during\x20idle\x20state','listener_','prototype','error','constructor','clear','operationType','warn','console','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','apply','disabled','forEach','_suspendedListeners','exception','includes','Error\x20executing\x20pending\x20operation:','RDL_SESSION_SUSPENDED','[FirebaseIdle]\x20Error\x20suspending\x20listener:'];a17_0x149a=function(){return _0x2b5ec8;};return a17_0x149a();}class FirebaseIdleWrapper{constructor(){const _0x55001d=a17_0x2bc3;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this[_0x55001d(0x1b9)]=![];}['checkSessionActive'](){const _0x54e6f1=a17_0x2bc3;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0x54e6f1(0x1d9)]('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+_0x54e6f1(0x1d2)),![];if(window[_0x54e6f1(0x1bb)]===!![])return console[_0x54e6f1(0x1bf)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x522a3e,_0x3f0a11,..._0x4ac86a){const _0x137660=a17_0x2bc3;if(!this['checkSessionActive']()){const _0x35a9d7=_0x3f0a11+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this[_0x137660(0x1d1)]['set'](_0x35a9d7,{'operation':_0x522a3e,'operationType':_0x3f0a11,'args':_0x4ac86a}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x522a3e(..._0x4ac86a);}catch(_0x45a050){if(_0x45a050['code']==='unavailable'||_0x45a050['code']==='resource-exhausted'||_0x45a050[_0x137660(0x1c2)]&&_0x45a050[_0x137660(0x1c2)][_0x137660(0x1e1)]('network'))return handleNetworkError(),null;throw _0x45a050;}}async['getDocument'](_0x8ada5a){return this['safeOperation'](getDoc,'get',_0x8ada5a);}async['getDocuments'](_0x944f65){const _0x1e3395=a17_0x2bc3;return this[_0x1e3395(0x1b5)](getDocs,'query',_0x944f65);}async['addDocument'](_0x35fa58,_0x320aac){const _0x49244a=a17_0x2bc3;return this['safeOperation'](addDoc,_0x49244a(0x1c8),_0x35fa58,_0x320aac);}async['setDocument'](_0x4982fc,_0x55a3fc,_0x1e692d={}){const _0x545e97=a17_0x2bc3;return this['safeOperation'](setDoc,_0x545e97(0x1c0),_0x4982fc,_0x55a3fc,_0x1e692d);}async['updateDocument'](_0x29ba7b,_0x4ff7d7){return this['safeOperation'](updateDoc,'update',_0x29ba7b,_0x4ff7d7);}async[a17_0x457f2a(0x1b6)](_0x11c185){return this['safeOperation'](deleteDoc,'delete',_0x11c185);}['suspendAllListeners'](){const _0x29e12f=a17_0x457f2a;console['log'](_0x29e12f(0x1c5),this['activeListeners'][_0x29e12f(0x1b7)]),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners'][_0x29e12f(0x1de)]((_0x25c0c8,_0x4f6e1f)=>{const _0x6c1cfb=_0x29e12f;console['log'](_0x6c1cfb(0x1cb),_0x4f6e1f);if(typeof _0x25c0c8==='function')try{_0x25c0c8(),console[_0x6c1cfb(0x1bf)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x4f6e1f);}catch(_0xc0ff80){console[_0x6c1cfb(0x1d5)](_0x6c1cfb(0x1e4),_0x4f6e1f,_0xc0ff80);}else{if(_0x25c0c8&&typeof _0x25c0c8['unsubscribe']==='function')try{_0x25c0c8[_0x6c1cfb(0x1c9)](),console[_0x6c1cfb(0x1bf)](_0x6c1cfb(0x1bc),_0x4f6e1f);}catch(_0x43eb12){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x4f6e1f,_0x43eb12);}}}),this['activeListeners']['clear']();if(this['debug']){const _0x11ce65=document['createElement']('div');_0x11ce65['id']=_0x29e12f(0x1c3),_0x11ce65['style']['cssText']=_0x29e12f(0x1c4),_0x11ce65['textContent']='Firebase:\x20Suspended',document['body'][_0x29e12f(0x1b4)](_0x11ce65);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x340e1d=a17_0x457f2a;if(!this[_0x340e1d(0x1df)]||this['_suspendedListeners']['size']===0x0){console[_0x340e1d(0x1bf)]('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console[_0x340e1d(0x1bf)]('[FirebaseIdle]\x20Resuming\x20listeners:',this[_0x340e1d(0x1df)]['size']),this[_0x340e1d(0x1df)]['forEach']((_0x5ad7ed,_0x31b220)=>{const _0x43d5d0=_0x340e1d;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x31b220);try{if(typeof _0x5ad7ed==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x31b220);return;}const {query:_0x822ee,callback:_0x5ad3b7,options:_0x2ee149}=_0x5ad7ed;if(_0x822ee&&_0x5ad3b7){const _0x2983cb=onSnapshot(_0x822ee,_0x5ad3b7,_0x2ee149||{});this['activeListeners'][_0x43d5d0(0x1c0)](_0x31b220,_0x2983cb),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x31b220);}}catch(_0x4ea38f){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x31b220,_0x4ea38f);}}),this['_suspendedListeners'][_0x340e1d(0x1d7)]();const _0xa0dffb=document['getElementById']('firebase-suspend-indicator');_0xa0dffb&&_0xa0dffb['remove'](),console[_0x340e1d(0x1bf)]('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x5a6bf2,_0xc2973b,_0x5083ee={},_0x13aba6=null){const _0x1c06f=a17_0x457f2a,_0x128238=_0x13aba6||_0x1c06f(0x1d3)+Date['now']()+'_'+Math[_0x1c06f(0x1cd)]()['toString'](0x24)['substr'](0x2,0x9);this[_0x1c06f(0x1b9)]&&console['log'](_0x1c06f(0x1cc)+_0x128238);if(!this['checkSessionActive']())return console[_0x1c06f(0x1bf)](_0x1c06f(0x1ba)+_0x128238),()=>{};try{const _0x24e4aa=onSnapshot(_0x5a6bf2,_0xc2973b,_0x5083ee);return this['activeListeners'][_0x1c06f(0x1c0)](_0x128238,{'unsubscribe':_0x24e4aa,'query':_0x5a6bf2,'callback':_0xc2973b,'options':_0x5083ee}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x128238),console['log'](_0x1c06f(0x1ce)+this['activeListeners']['size'])),()=>{const _0x22bfe3=_0x1c06f;this['debug']&&console['log'](_0x22bfe3(0x1c6)+_0x128238);try{_0x24e4aa(),this[_0x22bfe3(0x1c1)][_0x22bfe3(0x1cf)](_0x128238),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x128238),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0x22bfe3(0x1b7)]));}catch(_0x27ee26){console[_0x22bfe3(0x1d5)]('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x128238+':',_0x27ee26);}};}catch(_0xe37094){return console['error'](_0x1c06f(0x1db)+_0x128238+':',_0xe37094),()=>{};}}['executePendingOperations'](_0x49d5c3='all'){const _0x5d55ec=a17_0x457f2a;console[_0x5d55ec(0x1bf)](_0x5d55ec(0x1ca)+_0x49d5c3+'\x20operations:\x20'+this['pendingOperations']['size']+'\x20total\x20operations');const _0x4b2fa6=new Map(this['pendingOperations']);this[_0x5d55ec(0x1d1)]['clear'](),_0x4b2fa6[_0x5d55ec(0x1de)]((_0x382742,_0x319fd9)=>{const _0x3566be=_0x5d55ec;_0x49d5c3==='all'||_0x382742[_0x3566be(0x1d8)]===_0x49d5c3?(console[_0x3566be(0x1bf)]('Executing\x20delayed\x20'+_0x382742['operationType']+'\x20operation'),this['safeOperation'](_0x382742['operation'],_0x382742['operationType'],..._0x382742['args'])['catch'](_0x1eb70a=>console['error'](_0x3566be(0x1e2),_0x1eb70a))):this['pendingOperations']['set'](_0x319fd9,_0x382742);});}['enableDebug'](_0x41e55f=!![]){const _0x3893a3=a17_0x457f2a;this['debug']=_0x41e55f,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x41e55f?'enabled':_0x3893a3(0x1dd)));if(_0x41e55f){const _0x15f0f9=window[_0x3893a3(0x1e3)];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system','test'))['then'](_0x39189e=>{const _0x2298fc=_0x3893a3;console['log'](_0x2298fc(0x1d0),_0x39189e);})['catch'](_0x5f026e=>{const _0x1d1cd2=_0x3893a3;console['log'](_0x1d1cd2(0x1bd),_0x5f026e);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x15f0f9;});}}}function a17_0x2bc3(_0x17ec69,_0x55ee92){const _0x17cc04=a17_0x149a();return a17_0x2bc3=function(_0x1f9fb1,_0x307b51){_0x1f9fb1=_0x1f9fb1-0x1b4;let _0x149a03=_0x17cc04[_0x1f9fb1];return _0x149a03;},a17_0x2bc3(_0x17ec69,_0x55ee92);}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x496eee=window['suspendSession']||function(){},_0x465dce=window['resumeSession']||function(){};window['suspendSession']=function(){_0x496eee(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x465dce(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;