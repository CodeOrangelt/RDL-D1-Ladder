const a43_0x417d11=a43_0x232f,a43_0x1bf20e=(function(){let _0x4d631e=!![];return function(_0x166918,_0x43c872){const _0x5ed0b6=_0x4d631e?function(){if(_0x43c872){const _0x27ce72=_0x43c872['apply'](_0x166918,arguments);return _0x43c872=null,_0x27ce72;}}:function(){};return _0x4d631e=![],_0x5ed0b6;};}()),a43_0x15e6fb=a43_0x1bf20e(this,function(){const _0x57dc74=a43_0x232f,_0x321652=function(){const _0x33d70b=a43_0x232f;let _0x81ee66;try{_0x81ee66=Function(_0x33d70b(0x1d2)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x370f4e){_0x81ee66=window;}return _0x81ee66;},_0x347bc7=_0x321652(),_0x2eb674=_0x347bc7['console']=_0x347bc7['console']||{},_0x43968b=['log','warn','info','error','exception','table','trace'];for(let _0x1adb49=0x0;_0x1adb49<_0x43968b[_0x57dc74(0x1e1)];_0x1adb49++){const _0x20318f=a43_0x1bf20e['constructor']['prototype'][_0x57dc74(0x1e5)](a43_0x1bf20e),_0x343501=_0x43968b[_0x1adb49],_0x345db1=_0x2eb674[_0x343501]||_0x20318f;_0x20318f[_0x57dc74(0x1d8)]=a43_0x1bf20e['bind'](a43_0x1bf20e),_0x20318f['toString']=_0x345db1['toString'][_0x57dc74(0x1e5)](_0x345db1),_0x2eb674[_0x343501]=_0x20318f;}});a43_0x15e6fb();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';function a43_0x232f(_0x2da46e,_0xf8f148){const _0x15e6fb=a43_0x508c();return a43_0x232f=function(_0x1bf20e,_0x439f23){_0x1bf20e=_0x1bf20e-0x1ca;let _0x508c29=_0x15e6fb[_0x1bf20e];return _0x508c29;},a43_0x232f(_0x2da46e,_0xf8f148);}import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';function a43_0x508c(){const _0x139b52=['addEventListener','src','pfpUrl','stats-matches','pfp-upload','all','handleSubmit','nickname','return\x20(function()\x20','profile-preview','loadPlayerStats','currentUser','handleImageUpload','size','__proto__','favorite-map','get','toFixed','value','error','result','approvedMatches','forEach','length','textContent','toISOString','uid','bind','readAsDataURL','profiles','winnerScore','target','change','motto','getElementById','pfpInput','losses'];a43_0x508c=function(){return _0x139b52;};return a43_0x508c();}const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x182dcc=a43_0x232f;this['form']=document['getElementById']('profile-form'),this['pfpInput']=document[_0x182dcc(0x1ec)](_0x182dcc(0x1ce)),this['pfpPreview']=document[_0x182dcc(0x1ec)](_0x182dcc(0x1d3)),this['statsContainer']=document['getElementById']('player-stats'),this['setupEventListeners'](),this['loadProfile']();}['setupEventListeners'](){const _0xb4df1c=a43_0x232f;this[_0xb4df1c(0x1ed)][_0xb4df1c(0x1ca)](_0xb4df1c(0x1ea),_0x5b453d=>this['handleImageUpload'](_0x5b453d)),this['form']['addEventListener']('submit',_0x578db9=>this['handleSubmit'](_0x578db9));}async[a43_0x417d11(0x1d6)](_0x3f2f73){const _0x12b907=a43_0x417d11,_0x2b3354=_0x3f2f73[_0x12b907(0x1e9)]['files'][0x0];if(_0x2b3354){const _0x3cb2a7=new FileReader();_0x3cb2a7['onload']=_0x12e70f=>{const _0x507f07=_0x12b907;this['pfpPreview']['src']=_0x12e70f[_0x507f07(0x1e9)][_0x507f07(0x1de)];},_0x3cb2a7[_0x12b907(0x1e6)](_0x2b3354);}}async[a43_0x417d11(0x1d0)](_0x3806b1){const _0x46e12d=a43_0x417d11;_0x3806b1['preventDefault']();const _0x349492=auth[_0x46e12d(0x1d5)];if(!_0x349492){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x950b63=new FormData(this['form']),_0x2d60e0={'nickname':_0x950b63['get'](_0x46e12d(0x1d1)),'motto':_0x950b63[_0x46e12d(0x1da)]('motto'),'favoriteMap':_0x950b63['get'](_0x46e12d(0x1d9)),'favoriteWeapon':_0x950b63['get']('favorite-weapon'),'updatedAt':new Date()[_0x46e12d(0x1e3)]()},_0x3a4c80=this['pfpInput']['files'][0x0];if(_0x3a4c80){const _0x51f1a4=ref(storage,'profile-pictures/'+_0x349492['uid']);await uploadBytes(_0x51f1a4,_0x3a4c80),_0x2d60e0['pfpUrl']=await getDownloadURL(_0x51f1a4);}await setDoc(doc(db,'profiles',_0x349492[_0x46e12d(0x1e4)]),_0x2d60e0),alert('Profile\x20saved\x20successfully!');}catch(_0x209706){console[_0x46e12d(0x1dd)]('Error\x20saving\x20profile:',_0x209706),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x2f6d38=>{const _0x3500fe=a43_0x232f;if(_0x2f6d38)try{const _0x4651b2=await getDoc(doc(db,_0x3500fe(0x1e7),_0x2f6d38['uid']));if(_0x4651b2['exists']()){const _0x19eeb3=_0x4651b2['data']();document[_0x3500fe(0x1ec)](_0x3500fe(0x1d1))['value']=_0x19eeb3['nickname']||'',document['getElementById'](_0x3500fe(0x1eb))[_0x3500fe(0x1dc)]=_0x19eeb3['motto']||'',document[_0x3500fe(0x1ec)]('favorite-map')['value']=_0x19eeb3['favoriteMap']||'',document['getElementById']('favorite-weapon')[_0x3500fe(0x1dc)]=_0x19eeb3['favoriteWeapon']||'',_0x19eeb3[_0x3500fe(0x1cc)]&&(this['pfpPreview'][_0x3500fe(0x1cb)]=_0x19eeb3['pfpUrl']),await this[_0x3500fe(0x1d4)](_0x19eeb3['nickname']);}}catch(_0x26befe){console['error']('Error\x20loading\x20profile:',_0x26befe);}});}async['loadPlayerStats'](_0x390785){const _0x588ebd=a43_0x417d11;if(!_0x390785)return;try{const _0x3547bf=collection(db,_0x588ebd(0x1df)),[_0x2ea8f6,_0x2b5635]=await Promise[_0x588ebd(0x1cf)]([getDocs(query(_0x3547bf,where('winnerUsername','==',_0x390785))),getDocs(query(_0x3547bf,where('loserUsername','==',_0x390785)))]),_0x3670d7=_0x2ea8f6['size'],_0x249477=_0x2b5635[_0x588ebd(0x1d7)],_0x1d4476=_0x3670d7+_0x249477;let _0x753d9e=0x0,_0x2720c0=0x0;_0x2ea8f6[_0x588ebd(0x1e0)](_0x14abfc=>{const _0x42d760=_0x588ebd,_0x149cc8=_0x14abfc['data']();if(_0x149cc8[_0x42d760(0x1e8)])_0x753d9e+=parseInt(_0x149cc8['winnerScore']);if(_0x149cc8['loserScore'])_0x2720c0+=parseInt(_0x149cc8['loserScore']);}),_0x2b5635['forEach'](_0x457da8=>{const _0x2a73f9=_0x457da8['data']();if(_0x2a73f9['loserScore'])_0x753d9e+=parseInt(_0x2a73f9['loserScore']);if(_0x2a73f9['winnerScore'])_0x2720c0+=parseInt(_0x2a73f9['winnerScore']);});const _0x356e41=_0x2720c0===0x0?_0x753d9e['toFixed'](0x2):(_0x753d9e/_0x2720c0)['toFixed'](0x2),_0x45f231=_0x1d4476===0x0?'0':(_0x3670d7/_0x1d4476*0x64)[_0x588ebd(0x1db)](0x1);console['log']('Stats\x20calculated:',{'totalMatches':_0x1d4476,'wins':_0x3670d7,'losses':_0x249477,'totalKills':_0x753d9e,'totalDeaths':_0x2720c0,'kdRatio':_0x356e41,'winRate':_0x45f231}),document['getElementById'](_0x588ebd(0x1cd))['textContent']=_0x1d4476,document['getElementById']('stats-wins')['textContent']=_0x3670d7,document['getElementById']('stats-losses')['textContent']=_0x249477,document[_0x588ebd(0x1ec)]('stats-kd')['textContent']=_0x356e41,document['getElementById']('stats-winrate')['textContent']=_0x45f231+'%';}catch(_0xd5c83e){console['error']('Error\x20loading\x20player\x20stats:',_0xd5c83e),['matches','wins',_0x588ebd(0x1ee),'kd','winrate']['forEach'](_0xe987c7=>{const _0x3732b3=_0x588ebd;document['getElementById']('stats-'+_0xe987c7)[_0x3732b3(0x1e2)]='-';});}}}document['addEventListener']('DOMContentLoaded',()=>{new ProfileManager();});