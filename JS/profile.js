function a43_0x1765(_0x7602da,_0x4da0fc){const _0x4d9330=a43_0x39cf();return a43_0x1765=function(_0x28b995,_0x41890b){_0x28b995=_0x28b995-0x95;let _0x39cf94=_0x4d9330[_0x28b995];return _0x39cf94;},a43_0x1765(_0x7602da,_0x4da0fc);}const a43_0x41eba9=a43_0x1765,a43_0x28b995=(function(){let _0x4cefae=!![];return function(_0x1ccf43,_0x112b2b){const _0x115084=_0x4cefae?function(){if(_0x112b2b){const _0x441e14=_0x112b2b['apply'](_0x1ccf43,arguments);return _0x112b2b=null,_0x441e14;}}:function(){};return _0x4cefae=![],_0x115084;};}()),a43_0x4d9330=a43_0x28b995(this,function(){const _0x5c7cdf=a43_0x1765,_0x39ba59=function(){let _0x138c98;try{_0x138c98=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4e61f2){_0x138c98=window;}return _0x138c98;},_0x4710b3=_0x39ba59(),_0x92c47d=_0x4710b3['console']=_0x4710b3['console']||{},_0x5c4fdd=['log',_0x5c7cdf(0x9d),'info',_0x5c7cdf(0xb4),_0x5c7cdf(0x97),'table',_0x5c7cdf(0xaa)];for(let _0x497d77=0x0;_0x497d77<_0x5c4fdd['length'];_0x497d77++){const _0x404e61=a43_0x28b995[_0x5c7cdf(0xae)][_0x5c7cdf(0xad)]['bind'](a43_0x28b995),_0x229667=_0x5c4fdd[_0x497d77],_0x2b57a2=_0x92c47d[_0x229667]||_0x404e61;_0x404e61['__proto__']=a43_0x28b995['bind'](a43_0x28b995),_0x404e61['toString']=_0x2b57a2['toString']['bind'](_0x2b57a2),_0x92c47d[_0x229667]=_0x404e61;}});function a43_0x39cf(){const _0x1b6508=['textContent','DOMContentLoaded','exception','exists','profile-pictures/','profile-preview','readAsDataURL','value','warn','data','pfp-upload','result','stats-','src','winnerUsername','winnerScore','uid','favorite-map','addEventListener','pfpInput','toFixed','trace','get','forEach','prototype','constructor','Error\x20saving\x20profile.\x20Please\x20try\x20again.','loadProfile','form','stats-wins','motto','error','getElementById','nickname'];a43_0x39cf=function(){return _0x1b6508;};return a43_0x39cf();}a43_0x4d9330();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x42eb6d=a43_0x1765;this[_0x42eb6d(0xb1)]=document['getElementById']('profile-form'),this[_0x42eb6d(0xa8)]=document[_0x42eb6d(0xb5)](_0x42eb6d(0x9f)),this['pfpPreview']=document[_0x42eb6d(0xb5)](_0x42eb6d(0x9a)),this['statsContainer']=document['getElementById']('player-stats'),this['setupEventListeners'](),this[_0x42eb6d(0xb0)]();}['setupEventListeners'](){const _0x3e7684=a43_0x1765;this['pfpInput']['addEventListener']('change',_0x9b3df4=>this['handleImageUpload'](_0x9b3df4)),this['form'][_0x3e7684(0xa7)]('submit',_0xf3f5f=>this['handleSubmit'](_0xf3f5f));}async['handleImageUpload'](_0x425d52){const _0x431bc4=a43_0x1765,_0x121b85=_0x425d52['target']['files'][0x0];if(_0x121b85){const _0x5c6e80=new FileReader();_0x5c6e80['onload']=_0x59ce78=>{const _0x296a32=a43_0x1765;this['pfpPreview'][_0x296a32(0xa2)]=_0x59ce78['target'][_0x296a32(0xa0)];},_0x5c6e80[_0x431bc4(0x9b)](_0x121b85);}}async['handleSubmit'](_0x3bbfc0){const _0x8a4366=a43_0x1765;_0x3bbfc0['preventDefault']();const _0x3e7b0c=auth['currentUser'];if(!_0x3e7b0c){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x4560d4=new FormData(this['form']),_0x525056={'nickname':_0x4560d4['get']('nickname'),'motto':_0x4560d4['get']('motto'),'favoriteMap':_0x4560d4[_0x8a4366(0xab)]('favorite-map'),'favoriteWeapon':_0x4560d4[_0x8a4366(0xab)]('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0x160216=this['pfpInput']['files'][0x0];if(_0x160216){const _0x3f00ed=ref(storage,_0x8a4366(0x99)+_0x3e7b0c[_0x8a4366(0xa5)]);await uploadBytes(_0x3f00ed,_0x160216),_0x525056['pfpUrl']=await getDownloadURL(_0x3f00ed);}await setDoc(doc(db,'profiles',_0x3e7b0c[_0x8a4366(0xa5)]),_0x525056),alert('Profile\x20saved\x20successfully!');}catch(_0x472278){console['error']('Error\x20saving\x20profile:',_0x472278),alert(_0x8a4366(0xaf));}}async['loadProfile'](){onAuthStateChanged(auth,async _0x761cb=>{const _0x4f4874=a43_0x1765;if(_0x761cb)try{const _0x2ba6f2=await getDoc(doc(db,'profiles',_0x761cb[_0x4f4874(0xa5)]));if(_0x2ba6f2[_0x4f4874(0x98)]()){const _0x5b76d6=_0x2ba6f2[_0x4f4874(0x9e)]();document['getElementById']('nickname')['value']=_0x5b76d6[_0x4f4874(0xb6)]||'',document[_0x4f4874(0xb5)]('motto')['value']=_0x5b76d6[_0x4f4874(0xb3)]||'',document['getElementById'](_0x4f4874(0xa6))['value']=_0x5b76d6['favoriteMap']||'',document['getElementById']('favorite-weapon')[_0x4f4874(0x9c)]=_0x5b76d6['favoriteWeapon']||'',_0x5b76d6['pfpUrl']&&(this['pfpPreview']['src']=_0x5b76d6['pfpUrl']),await this['loadPlayerStats'](_0x5b76d6[_0x4f4874(0xb6)]);}}catch(_0x3dbf88){console['error']('Error\x20loading\x20profile:',_0x3dbf88);}});}async['loadPlayerStats'](_0xceef8c){const _0x4834af=a43_0x1765;if(!_0xceef8c)return;try{const _0x3d2276=collection(db,'approvedMatches'),[_0xe26da6,_0x3d5740]=await Promise['all']([getDocs(query(_0x3d2276,where(_0x4834af(0xa3),'==',_0xceef8c))),getDocs(query(_0x3d2276,where('loserUsername','==',_0xceef8c)))]),_0x15640c=_0xe26da6['size'],_0x47b2fe=_0x3d5740['size'],_0x191141=_0x15640c+_0x47b2fe;let _0x3cff73=0x0,_0x5e3708=0x0;_0xe26da6[_0x4834af(0xac)](_0x397a60=>{const _0x3ae451=_0x4834af,_0x3e3abd=_0x397a60['data']();if(_0x3e3abd[_0x3ae451(0xa4)])_0x3cff73+=parseInt(_0x3e3abd['winnerScore']);if(_0x3e3abd['loserScore'])_0x5e3708+=parseInt(_0x3e3abd['loserScore']);}),_0x3d5740['forEach'](_0x709419=>{const _0x1d8bea=_0x4834af,_0x508c46=_0x709419['data']();if(_0x508c46['loserScore'])_0x3cff73+=parseInt(_0x508c46['loserScore']);if(_0x508c46[_0x1d8bea(0xa4)])_0x5e3708+=parseInt(_0x508c46[_0x1d8bea(0xa4)]);});const _0x42eb08=_0x5e3708===0x0?_0x3cff73[_0x4834af(0xa9)](0x2):(_0x3cff73/_0x5e3708)['toFixed'](0x2),_0x436122=_0x191141===0x0?'0':(_0x15640c/_0x191141*0x64)[_0x4834af(0xa9)](0x1);console['log']('Stats\x20calculated:',{'totalMatches':_0x191141,'wins':_0x15640c,'losses':_0x47b2fe,'totalKills':_0x3cff73,'totalDeaths':_0x5e3708,'kdRatio':_0x42eb08,'winRate':_0x436122}),document['getElementById']('stats-matches')['textContent']=_0x191141,document['getElementById'](_0x4834af(0xb2))['textContent']=_0x15640c,document['getElementById']('stats-losses')['textContent']=_0x47b2fe,document['getElementById']('stats-kd')['textContent']=_0x42eb08,document['getElementById']('stats-winrate')['textContent']=_0x436122+'%';}catch(_0x5b48a1){console[_0x4834af(0xb4)]('Error\x20loading\x20player\x20stats:',_0x5b48a1),['matches','wins','losses','kd','winrate']['forEach'](_0x11bfa8=>{const _0x5e2ab4=_0x4834af;document['getElementById'](_0x5e2ab4(0xa1)+_0x11bfa8)[_0x5e2ab4(0x95)]='-';});}}}document['addEventListener'](a43_0x41eba9(0x96),()=>{new ProfileManager();});