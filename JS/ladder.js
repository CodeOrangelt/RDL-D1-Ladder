const a27_0x41d501=(function(){let _0x33990a=!![];return function(_0x51eb16,_0x5c3a10){const _0x35f0cd=_0x33990a?function(){if(_0x5c3a10){const _0x116417=_0x5c3a10['apply'](_0x51eb16,arguments);return _0x5c3a10=null,_0x116417;}}:function(){};return _0x33990a=![],_0x35f0cd;};}()),a27_0x1fd009=a27_0x41d501(this,function(){const _0x562279=a27_0x1d6f;let _0x18d59c;try{const _0x28d59d=Function('return\x20(function()\x20'+_0x562279(0xc5)+');');_0x18d59c=_0x28d59d();}catch(_0x354711){_0x18d59c=window;}const _0xee4ce3=_0x18d59c['console']=_0x18d59c['console']||{},_0x2bf4a5=['log','warn','info',_0x562279(0xfd),'exception','table','trace'];for(let _0x4c49d8=0x0;_0x4c49d8<_0x2bf4a5['length'];_0x4c49d8++){const _0x14d445=a27_0x41d501[_0x562279(0xc2)]['prototype']['bind'](a27_0x41d501),_0x52a5e6=_0x2bf4a5[_0x4c49d8],_0x63880c=_0xee4ce3[_0x52a5e6]||_0x14d445;_0x14d445['__proto__']=a27_0x41d501['bind'](a27_0x41d501),_0x14d445[_0x562279(0xc7)]=_0x63880c[_0x562279(0xc7)]['bind'](_0x63880c),_0xee4ce3[_0x52a5e6]=_0x14d445;}});function a27_0x119f(){const _0x3719ad=['eloRating','totalKills','\x20(equipped:\x20','admin@ladder.com','createElement','onAuthStateChanged','docs','display','player','click','losses','toLowerCase','</span>.\x20Challenge\x20other\x20teams!','loserScore','has','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','D2\x20toggle\x20clicked','label[for=\x22duos-switch\x22]','toFixed','Gold','elo-recommendation-text-duos','country','playersD2','gray','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Ladder\x20table\x20body\x20not\x20found','brian2af@outlook.com','tokenName','You\x27re\x20not\x20registered\x20on\x20the\x20','duos','playerUsername','playersD3','</span>\x20(ELO:\x20','(Equipped)','rank','querySelectorAll','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','textContent','constructor','d3-ladder-container','log','{}.constructor(\x22return\x20this\x22)(\x20)','winRate','toString','winnerScore','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','data','div','elo','style','getElementById','preventDefault','sort','equipped','includes','Error\x20fetching\x20ELO\x20history:','elo-recommendation-text-','remove','Error\x20fetching\x20tokens:','#ladder\x20thead\x20tr','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20',';\x22>','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20','title','players','none','inactive','push','addEventListener','#F44336','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','classList','duos-switch','Error\x20checking\x20admin\x20status:','find','empty','timestamp','elo-recommendation-text-d2','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','map','#b9f1fc','#50C878','#FFD700','No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20(','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','kda','checked','fontSize','forEach','tokenImage','d1-switch','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','Error\x20checking\x20','body','username','error','elo-recommendation-text-d3','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','No\x20user\x20profile\x20found','Duos\x20ladder\x20is\x20currently\x20admin-only','teammate','#4CAF50','duos-ladder-container','newEloRating','fontWeight','Error\x20finding\x20best\x20opponent:','set','innerHTML','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','userProfiles','position','totalMatches','Based\x20on\x20your\x20ELO\x20(','totalDeaths','block','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','creative\x20lead','querySelector','active','appendChild','add','seconds','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','\x20has\x20equipped:\x20','Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents'];a27_0x119f=function(){return _0x3719ad;};return a27_0x119f();}a27_0x1fd009();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();function a27_0x1d6f(_0x50cc3a,_0x486daa){const _0x1fd009=a27_0x119f();return a27_0x1d6f=function(_0x41d501,_0x13aaf0){_0x41d501=_0x41d501-0x9c;let _0x119fa3=_0x1fd009[_0x41d501];return _0x119fa3;},a27_0x1d6f(_0x50cc3a,_0x486daa);}let activeListeners=[];export async function loadLadderData(_0x4ffdf1=0x1){const _0x370a59=a27_0x1d6f;try{document[_0x370a59(0xce)]('loading-indicator')['style'][_0x370a59(0xa3)]='block';const _0x3ffc37=await getLadderData(_0x4ffdf1);_0x3ffc37[_0x370a59(0xd0)]((_0x46870b,_0x1804b2)=>_0x1804b2['elo']-_0x46870b[_0x370a59(0xcc)]);const _0x47f7ef=_0x3ffc37['map'](_0x4f7665=>_0x4f7665['id']),_0x211296=await getEloHistoryBatch(_0x47f7ef,_0x4ffdf1),_0x3508ba=_0x3ffc37['map']((_0x508504,_0x2e00b5)=>{const _0x3b306f=_0x370a59,_0x1965c6=_0x211296[_0x508504['id']]||[],_0x3ed54c=_0x1965c6[_0x3b306f(0xd0)]((_0x24e957,_0x10d341)=>new Date(_0x10d341['date'])-new Date(_0x24e957['date']))['slice'](0x0,0x5);return{..._0x508504,'rank':_0x2e00b5+0x1,'lastMatches':_0x3ed54c,'recentActivity':_0x3ed54c['length']>0x0};});renderLadder(_0x3508ba),setupRealTimeUpdates(_0x4ffdf1);}catch(_0x1188ea){console['error']('Error\x20loading\x20ladder\x20data:',_0x1188ea),document['getElementById']('error-message')['innerText']=_0x370a59(0x119);}finally{document['getElementById']('loading-indicator')['style'][_0x370a59(0xa3)]=_0x370a59(0xdf);}}function setupRealTimeUpdates(_0x55be6e=0x1){activeListeners['forEach'](_0x340836=>_0x340836()),activeListeners=[];const _0x1304db=_0x55be6e===0x1?'players':'playersD'+_0x55be6e,_0x48435a=_0x55be6e===0x1?'matches':'matchesD'+_0x55be6e,_0x1a73a2=new Date();_0x1a73a2['setDate'](_0x1a73a2['getDate']()-0x1);const _0x3cf943=setupEfficientListener(_0x48435a,[where('date','>=',_0x1a73a2['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x437766=>{_0x437766['length']>0x0&&await loadLadderData(_0x55be6e);});activeListeners['push'](_0x3cf943);}export function cleanupListeners(){activeListeners['forEach'](_0x471300=>_0x471300()),activeListeners=[];}function renderLadder(_0x5e628f){const _0x38d169=a27_0x1d6f,_0x29640a=document['getElementById']('ladder-container');_0x29640a[_0x38d169(0x109)]='',_0x5e628f['forEach'](_0x4ff9e6=>{const _0x488e12=_0x38d169,_0xd587c6=document['createElement']('div');_0xd587c6['className']='ladder-player',_0xd587c6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x4ff9e6[_0x488e12(0xbe)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x4ff9e6['username']||_0x4ff9e6['id'])+_0x488e12(0xda)+_0x4ff9e6['elo']+_0x488e12(0xdc)+(_0x4ff9e6['recentActivity']?_0x488e12(0x114):_0x488e12(0xe0))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4ff9e6['recentActivity']?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x29640a[_0x488e12(0x115)](_0xd587c6);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x1ebeed=![]){const _0x576b28=a27_0x1d6f,_0x2aa605=document['querySelector']('#ladder\x20tbody');if(!_0x2aa605){console['error'](_0x576b28(0xb5));return;}_0x2aa605['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x200310=Date['now']();if(!_0x1ebeed&&playerCache['data']&&_0x200310-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x33aac3=collection(db,'players'),_0x4f5046=await getDocs(_0x33aac3),_0x15e7a3=[];_0x4f5046['forEach'](_0x3e0572=>{const _0x58a070=_0x576b28,_0x5625c9=_0x3e0572['data']();_0x15e7a3['push']({..._0x5625c9,'id':_0x3e0572['id'],'elo':_0x5625c9['eloRating']||0x0,'position':_0x5625c9[_0x58a070(0x10c)]||Number['MAX_SAFE_INTEGER']});});const _0x2f9dd9=collection(db,'userProfiles'),_0x118f89=await getDocs(_0x2f9dd9),_0x491691=new Map();_0x118f89[_0x576b28(0xf6)](_0x53090e=>{const _0x48414a=_0x576b28,_0x550071=_0x53090e['data']();_0x550071[_0x48414a(0xfc)]&&_0x491691[_0x48414a(0x108)](_0x550071['username'][_0x48414a(0xa7)](),_0x550071);}),_0x15e7a3['forEach'](_0xae3572=>{const _0x494407=_0x576b28,_0x5dfec2=_0xae3572['username']?.[_0x494407(0xa7)]();if(_0x5dfec2&&_0x491691['has'](_0x5dfec2)){const _0x4095a9=_0x491691['get'](_0x5dfec2);_0x4095a9['country']&&(_0xae3572['country']=_0x4095a9['country'][_0x494407(0xa7)]());}});const _0x1c802b=_0x15e7a3['map'](_0x46153b=>_0x46153b['username']),_0xcb0320=await fetchBatchMatchStats(_0x1c802b);_0x15e7a3['sort']((_0x10d1f6,_0x5b7735)=>{const _0x5ab163=_0xcb0320['get'](_0x10d1f6['username'])?.['totalMatches']||0x0,_0x48a901=_0xcb0320['get'](_0x5b7735['username'])?.['totalMatches']||0x0;if(_0x5ab163===0x0!==(_0x48a901===0x0))return _0x5ab163===0x0?0x1:-0x1;return(_0x10d1f6['position']||0x3e7)-(_0x5b7735['position']||0x3e7);}),_0x15e7a3[_0x576b28(0xf6)]((_0xe8bacc,_0x1e7866)=>{_0xe8bacc['position']=_0x1e7866+0x1;}),playerCache[_0x576b28(0xca)]=_0x15e7a3,playerCache[_0x576b28(0xea)]=_0x200310,updateLadderDisplay(_0x15e7a3,_0xcb0320);}catch(_0x5ccc1e){console['error']('Error\x20loading\x20ladder:',_0x5ccc1e),_0x2aa605['innerHTML']=_0x576b28(0xd8)+_0x5ccc1e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x11fea1){const _0x521a36=a27_0x1d6f,_0x416194=new Map();try{_0x11fea1[_0x521a36(0xf6)](_0x52e45c=>{_0x416194['set'](_0x52e45c,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x470057=collection(db,'approvedMatches'),_0x136faa=await getDocs(_0x470057);_0x136faa['forEach'](_0x58a959=>{const _0x56b6f8=_0x521a36,_0x476616=_0x58a959[_0x56b6f8(0xca)](),_0x28ef05=_0x476616['winnerUsername'],_0x1d7fd0=_0x476616['loserUsername'];if(_0x11fea1['includes'](_0x28ef05)){const _0x4ff1b6=_0x416194['get'](_0x28ef05);_0x4ff1b6['wins']++,_0x4ff1b6[_0x56b6f8(0x10d)]++,_0x4ff1b6['totalKills']+=parseInt(_0x476616['winnerScore'])||0x0,_0x4ff1b6[_0x56b6f8(0x10f)]+=parseInt(_0x476616['loserScore'])||0x0;}if(_0x11fea1[_0x56b6f8(0xd2)](_0x1d7fd0)){const _0x31ce05=_0x416194['get'](_0x1d7fd0);_0x31ce05['losses']++,_0x31ce05['totalMatches']++,_0x31ce05[_0x56b6f8(0x9d)]+=parseInt(_0x476616[_0x56b6f8(0xa9)])||0x0,_0x31ce05['totalDeaths']+=parseInt(_0x476616[_0x56b6f8(0xc8)])||0x0;}}),_0x11fea1['forEach'](_0x568922=>{const _0x1498f5=_0x521a36,_0x486634=_0x416194['get'](_0x568922);_0x486634['kda']=_0x486634[_0x1498f5(0x10f)]>0x0?(_0x486634['totalKills']/_0x486634['totalDeaths'])[_0x1498f5(0xae)](0x2):_0x486634['totalKills']['toFixed'](0x2),_0x486634[_0x1498f5(0xc6)]=_0x486634['totalMatches']>0x0?(_0x486634['wins']/_0x486634['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0xb16378){console[_0x521a36(0xfd)]('Error\x20fetching\x20batch\x20match\x20stats:',_0xb16378);}return _0x416194;}function createPlayerRow(_0x3f813a,_0x331d9c){const _0x62f556=a27_0x1d6f,_0x30870b=parseFloat(_0x3f813a['elo'])||0x0;let _0x2c92b6='gray';if(_0x30870b>=0x7d0)_0x2c92b6='#50C878';else{if(_0x30870b>=0x708)_0x2c92b6='#FFD700';else{if(_0x30870b>=0x640)_0x2c92b6='#b9f1fc';else _0x30870b>=0x578&&(_0x2c92b6='#CD7F32');}}let _0x21eb6a='';return _0x3f813a['country']&&(_0x21eb6a='<img\x20src=\x22../images/flags/'+_0x3f813a['country'][_0x62f556(0xa7)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3f813a['country']+_0x62f556(0xc0)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3f813a['position']+_0x62f556(0xab)+encodeURIComponent(_0x3f813a[_0x62f556(0xfc)])+_0x62f556(0xe4)+_0x2c92b6+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3f813a['username']+_0x62f556(0xf2)+_0x21eb6a+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x2c92b6+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x30870b+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x331d9c[_0x62f556(0x10d)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x331d9c['wins']+_0x62f556(0xb4)+_0x331d9c['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x331d9c[_0x62f556(0xf3)]+_0x62f556(0xb4)+_0x331d9c[_0x62f556(0xc6)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x46777b){const _0x2f7e93=a27_0x1d6f;if(_0x46777b>=0x7d0)return'Emerald';if(_0x46777b>=0x708)return _0x2f7e93(0xaf);if(_0x46777b>=0x640)return'Silver';if(_0x46777b>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x1d9ee6){const _0x1b012c=a27_0x1d6f,_0x88ea37=new Map();_0x1d9ee6['forEach'](_0x434f1c=>{const _0x25080b=a27_0x1d6f;_0x88ea37[_0x25080b(0x108)](_0x434f1c,0x0);});try{const _0x29f855=collection(db,'players'),_0x355ddd=await getDocs(_0x29f855),_0x53e5d8=new Map(),_0x8933bc=new Map();_0x355ddd['forEach'](_0x320f75=>{const _0x35aa5c=a27_0x1d6f,_0x5d40ef=_0x320f75[_0x35aa5c(0xca)]();_0x5d40ef[_0x35aa5c(0xfc)]&&(_0x53e5d8[_0x35aa5c(0x108)](_0x320f75['id'],_0x5d40ef['username']),_0x8933bc['set'](_0x5d40ef[_0x35aa5c(0xfc)]['toLowerCase'](),_0x320f75['id']));});const _0x12410c=collection(db,'eloHistory'),_0x1eac2e=query(_0x12410c,orderBy(_0x1b012c(0xea),'desc'),limit(0x12c)),_0x222667=await getDocs(_0x1eac2e);if(_0x222667[_0x1b012c(0xe9)])return console[_0x1b012c(0xc4)]('ELO\x20history\x20collection\x20is\x20empty'),_0x88ea37;if(_0x222667['docs']['length']>0x0){const _0x3a3e4a=_0x222667['docs'][0x0][_0x1b012c(0xca)]();if(_0x3a3e4a['player']&&_0x53e5d8['has'](_0x3a3e4a[_0x1b012c(0xa4)])){}}const _0xe5b2a0=new Map();let _0x369081=0x0;_0x222667[_0x1b012c(0xf6)](_0x4f5612=>{const _0xc0c09b=_0x1b012c,_0x280a38=_0x4f5612['data']();let _0x39a7f8=null;if(_0x280a38['player']&&_0x53e5d8[_0xc0c09b(0xaa)](_0x280a38[_0xc0c09b(0xa4)]))_0x39a7f8=_0x53e5d8['get'](_0x280a38['player']);else{if(_0x280a38['username']&&_0x8933bc['has'](_0x280a38['username']['toLowerCase']()))_0x39a7f8=_0x280a38['username'];else _0x280a38['playerUsername']&&_0x8933bc['has'](_0x280a38['playerUsername']['toLowerCase']())&&(_0x39a7f8=_0x280a38[_0xc0c09b(0xba)]);}_0x39a7f8&&_0x1d9ee6[_0xc0c09b(0xd2)](_0x39a7f8)&&(_0x369081++,!_0xe5b2a0['has'](_0x39a7f8)&&_0xe5b2a0['set'](_0x39a7f8,[]),_0xe5b2a0['get'](_0x39a7f8)[_0xc0c09b(0xe1)]({..._0x280a38,'timestamp':_0x280a38['timestamp']?.[_0xc0c09b(0x117)]||0x0}));}),_0xe5b2a0[_0x1b012c(0xf6)]((_0x4cca11,_0xe62079)=>{const _0x32d95a=_0x1b012c;if(_0x4cca11['length']>0x0){_0x4cca11['sort']((_0x4b5cae,_0x4d5d0f)=>_0x4d5d0f[_0x32d95a(0xea)]-_0x4b5cae[_0x32d95a(0xea)]);const _0x3caa60=_0x4cca11[_0x32d95a(0xe8)](_0x5aa5b9=>_0x5aa5b9['change']!==undefined||_0x5aa5b9['newElo']!==undefined&&_0x5aa5b9['previousElo']!==undefined||_0x5aa5b9[_0x32d95a(0x105)]!==undefined&&_0x5aa5b9['oldEloRating']!==undefined);if(_0x3caa60){let _0x1f6243;if(_0x3caa60['change']!==undefined)_0x1f6243=parseInt(_0x3caa60['change']);else{if(_0x3caa60['newElo']!==undefined&&entry['previousElo']!==undefined)_0x1f6243=parseInt(_0x3caa60['newElo'])-parseInt(_0x3caa60['previousElo']);else _0x3caa60['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x1f6243=parseInt(_0x3caa60['newEloRating'])-parseInt(_0x3caa60['oldEloRating']));}!isNaN(_0x1f6243)&&_0x1f6243!==0x0&&_0x88ea37['set'](_0xe62079,_0x1f6243);}}});}catch(_0x7c56d6){console['error'](_0x1b012c(0xd3),_0x7c56d6);}return _0x88ea37;}function createPlayerRowWithToken(_0x1ba1bb,_0x2c2c65,_0x3c042e){const _0x124fdf=a27_0x1d6f,_0x4e08ee=parseFloat(_0x1ba1bb['elo'])||0x0;let _0xb5203f='gray';if(_0x4e08ee>=0x7d0)_0xb5203f='#50C878';else{if(_0x4e08ee>=0x708)_0xb5203f=_0x124fdf(0xf0);else{if(_0x4e08ee>=0x640)_0xb5203f=_0x124fdf(0xee);else _0x4e08ee>=0x578&&(_0xb5203f='#CD7F32');}}let _0x407a4c='';_0x1ba1bb[_0x124fdf(0xb1)]&&(_0x407a4c='<img\x20src=\x22../images/flags/'+_0x1ba1bb[_0x124fdf(0xb1)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1ba1bb[_0x124fdf(0xb1)]+_0x124fdf(0x111));let _0x5790bd='';return _0x3c042e&&(_0x5790bd='<img\x20src=\x22'+_0x3c042e[_0x124fdf(0xf7)]+_0x124fdf(0xc9)+_0x3c042e[_0x124fdf(0xb7)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x3c042e['tokenName']+'\x20'+(_0x3c042e[_0x124fdf(0xd1)]?_0x124fdf(0xbd):'')+_0x124fdf(0xec)),_0x124fdf(0xdb)+_0x1ba1bb['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x1ba1bb['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0xb5203f+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1ba1bb[_0x124fdf(0xfc)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x407a4c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5790bd+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0xb5203f+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x4e08ee+_0x124fdf(0x10a)+_0x2c2c65['totalMatches']+_0x124fdf(0xb4)+_0x2c2c65['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2c2c65[_0x124fdf(0xa6)]+_0x124fdf(0xb4)+_0x2c2c65[_0x124fdf(0xf3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2c2c65['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x8482ea,_0xacfc4d=null){const _0x29bfff=a27_0x1d6f,_0x302e4b=document['querySelector']('#ladder\x20tbody');if(!_0x302e4b){console['error'](_0x29bfff(0xb5));return;}const _0x4b668c=document['querySelector'](_0x29bfff(0xd7));_0x4b668c&&(_0x4b668c['innerHTML']=_0x29bfff(0xff));const _0x326289=_0x8482ea[_0x29bfff(0xed)](_0x24603d=>_0x24603d['username']);!_0xacfc4d&&(_0xacfc4d=await fetchBatchMatchStats(_0x326289));let _0x269f63=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x269f63=await getTokensByUsernames(_0x326289),console['log']('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x269f63['size'],'players'),_0x269f63['forEach']((_0x21ce0a,_0x45c9a0)=>{const _0x22c936=_0x29bfff,_0x769691=_0x21ce0a['find'](_0x23e59d=>_0x23e59d['equipped']);_0x769691&&console[_0x22c936(0xc4)]('ðŸŽ¯\x20'+_0x45c9a0+_0x22c936(0x11a)+_0x769691['tokenName']);});}catch(_0x290015){console[_0x29bfff(0xfd)](_0x29bfff(0xd6),_0x290015);}const _0x199e5a=_0x8482ea['map'](_0x1c0a10=>{const _0x2791e0=_0x29bfff,_0x1b16a8=_0xacfc4d['get'](_0x1c0a10['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x21eb52=_0x269f63['get'](_0x1c0a10[_0x2791e0(0xfc)])||[],_0x130ae1=getPrimaryDisplayToken(_0x21eb52);return _0x130ae1&&console[_0x2791e0(0xc4)]('ðŸŽ¨\x20'+_0x1c0a10[_0x2791e0(0xfc)]+'\x20displaying\x20token:\x20'+_0x130ae1[_0x2791e0(0xb7)]+_0x2791e0(0x9e)+_0x130ae1['equipped']+')'),createPlayerRowWithToken(_0x1c0a10,_0x1b16a8,_0x130ae1);})['join']('');_0x302e4b[_0x29bfff(0x109)]=_0x199e5a,getPlayersLastEloChanges(_0x326289)['then'](_0x147d26=>{const _0x503e3b=_0x29bfff,_0x5caf23=new Map();_0x302e4b[_0x503e3b(0xbf)]('tr')[_0x503e3b(0xf6)]((_0x2eafa6,_0x337f14)=>{const _0x42c409=_0x503e3b;_0x337f14<_0x326289['length']&&_0x5caf23[_0x42c409(0x108)](_0x326289[_0x337f14],_0x2eafa6);}),_0x147d26['forEach']((_0x351bac,_0x3b5111)=>{const _0x3ffc24=_0x503e3b,_0xf49b0=_0x5caf23['get'](_0x3b5111);if(_0xf49b0&&_0x351bac!==0x0){const _0x6839a7=_0xf49b0[_0x3ffc24(0x113)]('td:nth-child(3)');if(_0x6839a7){const _0x15fcec=_0x351bac>0x0?'+'+_0x351bac:''+_0x351bac,_0x9e531a=_0x6839a7['querySelector']('.trend-indicator');_0x9e531a&&(_0x9e531a['textContent']=_0x15fcec,_0x9e531a[_0x3ffc24(0xcd)]['color']=_0x351bac>0x0?_0x3ffc24(0x103):_0x3ffc24(0xe3),_0x9e531a[_0x3ffc24(0xcd)][_0x3ffc24(0x106)]='bold',_0x9e531a['style'][_0x3ffc24(0xf5)]='0.85em',_0x9e531a['style'][_0x3ffc24(0xa3)]='inline',_0x9e531a[_0x3ffc24(0xcd)]['visibility']='visible',_0x9e531a['style']['opacity']='1');}}});})['catch'](_0x476c65=>console[_0x29bfff(0xfd)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x476c65));}function initLadderToggles(){const _0x1109b3=a27_0x1d6f,_0x322e26=document[_0x1109b3(0xce)](_0x1109b3(0xf8)),_0x185aba=document['getElementById']('d2-switch'),_0x10ade8=document['getElementById']('d3-switch'),_0x4cf1c1=document[_0x1109b3(0xce)](_0x1109b3(0xe6)),_0xbfc68b=document['getElementById']('d1-ladder-container'),_0x48a0d6=document['getElementById']('d2-ladder-container'),_0x2c3bd6=document[_0x1109b3(0xce)]('d3-ladder-container'),_0x501cbc=document[_0x1109b3(0xce)](_0x1109b3(0x104));function _0x48ccc6(){const _0x285731=_0x1109b3;if(_0xbfc68b)_0xbfc68b['classList']['remove']('active');if(_0x48a0d6)_0x48a0d6['classList']['remove']('active');if(_0x2c3bd6)_0x2c3bd6[_0x285731(0xe5)][_0x285731(0xd5)]('active');if(_0x501cbc)_0x501cbc['style']['display']='none';if(_0xbfc68b)_0xbfc68b['style']['display']='none';if(_0x48a0d6)_0x48a0d6['style']['display']='none';if(_0x2c3bd6)_0x2c3bd6[_0x285731(0xcd)]['display']=_0x285731(0xdf);}_0x322e26&&_0x322e26['addEventListener']('click',()=>{const _0xf7c1db=_0x1109b3;console['log']('D1\x20toggle\x20clicked'),_0x48ccc6();_0xbfc68b&&(_0xbfc68b[_0xf7c1db(0xe5)]['add']('active'),_0xbfc68b[_0xf7c1db(0xcd)][_0xf7c1db(0xa3)]='block');document['getElementById']('elo-recommendation-text-d1')[_0xf7c1db(0xcd)]['display']='block',document[_0xf7c1db(0xce)](_0xf7c1db(0xeb))['style']['display']=_0xf7c1db(0xdf),document['getElementById']('elo-recommendation-text-d3')['style']['display']=_0xf7c1db(0xdf);if(_0x322e26)_0x322e26[_0xf7c1db(0xe5)][_0xf7c1db(0x116)]('active');if(_0x185aba)_0x185aba['classList']['remove']('active');if(_0x10ade8)_0x10ade8[_0xf7c1db(0xe5)]['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x185aba&&_0x185aba['addEventListener']('click',()=>{const _0x43c76a=_0x1109b3;console[_0x43c76a(0xc4)](_0x43c76a(0xac)),_0x48ccc6();_0x48a0d6&&(_0x48a0d6['classList'][_0x43c76a(0x116)]('active'),_0x48a0d6['style'][_0x43c76a(0xa3)]='block');document['getElementById']('elo-recommendation-text-d1')[_0x43c76a(0xcd)]['display']='none',document['getElementById']('elo-recommendation-text-d2')['style'][_0x43c76a(0xa3)]='block',document['getElementById'](_0x43c76a(0xfe))['style'][_0x43c76a(0xa3)]='none';if(_0x185aba)_0x185aba['classList']['add']('active');if(_0x322e26)_0x322e26[_0x43c76a(0xe5)]['remove'](_0x43c76a(0x114));if(_0x10ade8)_0x10ade8['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x10ade8&&_0x10ade8['addEventListener'](_0x1109b3(0xa5),()=>{const _0x44efce=_0x1109b3;console[_0x44efce(0xc4)]('D3\x20toggle\x20clicked'),_0x48ccc6();_0x2c3bd6&&(_0x2c3bd6['classList'][_0x44efce(0x116)]('active'),_0x2c3bd6['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document[_0x44efce(0xce)]('elo-recommendation-text-d2')['style'][_0x44efce(0xa3)]='none',document[_0x44efce(0xce)](_0x44efce(0xfe))['style']['display']='block';if(_0x10ade8)_0x10ade8['classList'][_0x44efce(0x116)]('active');if(_0x322e26)_0x322e26[_0x44efce(0xe5)]['remove']('active');if(_0x185aba)_0x185aba['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x4cf1c1&&_0x4cf1c1[_0x1109b3(0xe2)]('click',()=>{const _0x4559c4=_0x1109b3;_0x48ccc6();if(_0x501cbc)_0x501cbc['style'][_0x4559c4(0xa3)]='block';displayLadderDuos(),findBestOpponent(_0x4559c4(0xb9)),document['getElementById'](_0x4559c4(0xb0))&&(document['getElementById'](_0x4559c4(0xb0))['style']['display']=_0x4559c4(0x110)),document['getElementById']('elo-recommendation-text-d1')[_0x4559c4(0xcd)]['display']='none',document['getElementById']('elo-recommendation-text-d2')[_0x4559c4(0xcd)]['display']='none',document['getElementById']('elo-recommendation-text-d3')[_0x4559c4(0xcd)][_0x4559c4(0xa3)]='none';});}document['addEventListener']('DOMContentLoaded',()=>{const _0x5e5dd4=a27_0x1d6f;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style']['display']=_0x5e5dd4(0x110);});export{displayLadder};async function findBestOpponent(_0x3b8770='d1'){const _0x2993fb=a27_0x1d6f,_0x11eea8=_0x2993fb(0xd4)+_0x3b8770,_0x3e90a5=document['getElementById'](_0x11eea8);if(!_0x3e90a5){console['error']('Recommendation\x20element\x20for\x20'+_0x3b8770+'\x20not\x20found');return;}const _0x578c56=auth['currentUser'];if(!_0x578c56){_0x3e90a5[_0x2993fb(0xc1)]='';return;}try{const _0x56f08c=doc(db,'userProfiles',_0x578c56['uid']),_0x166e79=await getDoc(_0x56f08c);if(!_0x166e79['exists']()){console[_0x2993fb(0xc4)](_0x2993fb(0x100)),_0x3e90a5[_0x2993fb(0xc1)]='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x272c55=_0x166e79['data'](),_0x2c8155=_0x272c55[_0x2993fb(0xfc)];if(!_0x2c8155){_0x3e90a5[_0x2993fb(0xc1)]=_0x2993fb(0x11b);return;}let _0xc678a4;switch(_0x3b8770){case'd1':_0xc678a4='players';break;case'd2':_0xc678a4=_0x2993fb(0xb2);break;case'd3':_0xc678a4='playersD3';break;case'duos':_0xc678a4='playersDuos';break;default:_0xc678a4='players';}if(_0x3b8770==='duos'){const _0x170cb4=collection(db,_0xc678a4),_0x473f4c=query(_0x170cb4,where('username','==',_0x2c8155)),_0x197dca=await getDocs(_0x473f4c);if(_0x197dca['empty']){_0x3e90a5['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x48866c=_0x197dca['docs'][0x0]['data'](),_0x45ce8b=parseInt(_0x48866c[_0x2993fb(0x9c)])||0x4b0;if(_0x48866c['hasTeam']&&_0x48866c[_0x2993fb(0x102)]){_0x3e90a5['innerHTML']=_0x2993fb(0xf9)+_0x48866c[_0x2993fb(0x102)]+_0x2993fb(0xa8);return;}const _0xde0980=await getDocs(_0x170cb4);let _0x599ce1=null,_0x8880b2=-0x1;_0xde0980['forEach'](_0xc55636=>{const _0x4654c9=_0x2993fb,_0x1c508a=_0xc55636[_0x4654c9(0xca)]();if(_0x1c508a['username']===_0x2c8155)return;if(_0x1c508a['hasTeam'])return;const _0x4db7f5=parseInt(_0x1c508a['eloRating'])||0x4b0,_0x4a6509=Math['abs'](_0x4db7f5-_0x45ce8b),_0x509b74=Math['max'](0x0,0xc8-_0x4a6509);_0x509b74>_0x8880b2&&(_0x599ce1=_0x1c508a,_0x8880b2=_0x509b74);});if(_0x599ce1){const _0x11e1ed=parseInt(_0x599ce1['eloRating'])||0x4b0;let _0x26f526=_0x2993fb(0xb3);if(_0x11e1ed>=0x7d0)_0x26f526=_0x2993fb(0xef);else{if(_0x11e1ed>=0x708)_0x26f526='#FFD700';else{if(_0x11e1ed>=0x640)_0x26f526='#C0C0C0';else _0x11e1ed>=0x578&&(_0x26f526='#CD7F32');}}_0x3e90a5['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x26f526+_0x2993fb(0xd9)+_0x599ce1['username']+_0x2993fb(0xbc)+_0x11e1ed+')';}else _0x3e90a5['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x1696d2=collection(db,_0xc678a4),_0x55f5a9=query(_0x1696d2,where(_0x2993fb(0xfc),'==',_0x2c8155)),_0x458b64=await getDocs(_0x55f5a9);if(_0x458b64[_0x2993fb(0xe9)]){_0x3e90a5[_0x2993fb(0xc1)]=_0x2993fb(0xb8)+_0x3b8770['toUpperCase']()+'\x20ladder';return;}const _0x4448d2=_0x458b64[_0x2993fb(0xa2)][0x0]['data'](),_0x4480e4=parseInt(_0x4448d2['eloRating'])||0x5dc,_0x85b50f=await getDocs(_0x1696d2);let _0xb60fd8=null,_0x119791=-0x1;const _0x34c49a=getPlayerRankName(_0x4480e4);_0x85b50f['forEach'](_0x437388=>{const _0x2ede68=_0x2993fb,_0x55686a=_0x437388['data']();if(_0x55686a[_0x2ede68(0xfc)]===_0x2c8155)return;const _0x244a6c=parseInt(_0x55686a[_0x2ede68(0x9c)])||0x5dc,_0x469eaa=getPlayerRankName(_0x244a6c),_0x4b5d88=Math['abs'](_0x244a6c-_0x4480e4),_0x5124ca=0x20,_0x563622=0x1/(0x1+Math['pow'](0xa,(_0x244a6c-_0x4480e4)/0x190)),_0x420cb6=Math['round'](_0x5124ca*(0x1-_0x563622));if(_0x420cb6<=0x0)return;let _0x3df513=0x0;const _0x5d75c8=Math['max'](0x0,0x64-_0x4b5d88*0.5),_0x24da6a=_0x420cb6>=0x3&&_0x420cb6<=0x8?0x32:_0x420cb6>0x0&&_0x420cb6<0xf?0x1e:0xa,_0x8613ae=_0x34c49a===_0x469eaa?0x28:0x0;_0x3df513=_0x5d75c8+_0x24da6a+_0x8613ae,_0x3df513>_0x119791&&(_0xb60fd8=_0x55686a,_0x119791=_0x3df513);});if(_0xb60fd8){const _0x39a86f=parseInt(_0xb60fd8['eloRating'])||0x5dc;let _0x38cb4d='gray';if(_0x39a86f>=0x7d0)_0x38cb4d='#50C878';else{if(_0x39a86f>=0x708)_0x38cb4d='#FFD700';else{if(_0x39a86f>=0x640)_0x38cb4d='#b9f1fc';else _0x39a86f>=0x578&&(_0x38cb4d='#CD7F32');}}_0x3e90a5[_0x2993fb(0x109)]=_0x2993fb(0x10e)+_0x4480e4+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x38cb4d+';\x22>'+_0xb60fd8['username']+'</span>';}else _0x3e90a5['innerHTML']=_0x2993fb(0xf1)+_0x4480e4+')';}catch(_0x16c698){console['error'](_0x2993fb(0x107),_0x16c698),_0x3e90a5['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x4148b8=>{const _0x278d76=a27_0x1d6f,_0x271c3b=document['getElementById']('d1-ladder-container')&&document[_0x278d76(0xce)]('d1-ladder-container')[_0x278d76(0xcd)]['display']!==_0x278d76(0xdf),_0x2f57da=document[_0x278d76(0xce)]('d2-ladder-container')&&document['getElementById']('d2-ladder-container')['style'][_0x278d76(0xa3)]!=='none',_0x4ae83e=document[_0x278d76(0xce)]('d3-ladder-container')&&document['getElementById'](_0x278d76(0xc3))['style']['display']!=='none',_0x428d2e=document[_0x278d76(0xce)]('duos-ladder-container')&&document['getElementById'](_0x278d76(0x104))[_0x278d76(0xcd)]['display']!=='none',_0x1b2d88=_0x271c3b?'d1':_0x2f57da?'d2':_0x4ae83e?'d3':_0x428d2e?_0x278d76(0xb9):'d1';findBestOpponent(_0x1b2d88);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x56ee76=a27_0x1d6f,_0x2c00de=document['getElementById']('duos-switch'),_0x482eac=document['querySelector'](_0x56ee76(0xad));_0x2c00de&&_0x482eac&&(_0x2c00de[_0x56ee76(0xe2)]('change',async _0x2d1e01=>{const _0x52e5f0=_0x56ee76;if(_0x2d1e01['target']['checked']){const _0x2e9c9f=auth?.['currentUser'],_0x3884c1=await checkIfUserIsAdmin(_0x2e9c9f);if(!_0x3884c1){_0x2d1e01[_0x52e5f0(0xcf)]();const _0x1fe27e=document['getElementById']('d1-switch');return _0x1fe27e&&(_0x1fe27e[_0x52e5f0(0xf4)]=!![],_0x1fe27e['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth[_0x56ee76(0xa1)](async _0xf808a8=>{const _0x371cee=_0x56ee76,_0x3dc544=await checkIfUserIsAdmin(_0xf808a8);!_0x3dc544?(_0x2c00de['disabled']=!![],_0x482eac['style']['opacity']='0.5',_0x482eac[_0x371cee(0xcd)]['cursor']='not-allowed',_0x482eac[_0x371cee(0xdd)]=_0x371cee(0x101)):(_0x2c00de['disabled']=![],_0x482eac['style']['opacity']='1',_0x482eac['style']['cursor']='pointer',_0x482eac['title']='');}));});async function checkIfUserIsAdmin(_0xec6fda){const _0x46dffb=a27_0x1d6f;if(!_0xec6fda)return![];try{const _0xccc7eb=[_0x46dffb(0x9f),_0x46dffb(0xb6)];if(_0xec6fda['email']&&_0xccc7eb['includes'](_0xec6fda['email']['toLowerCase']()))return!![];const _0x47722d=[_0x46dffb(0x10b),_0x46dffb(0xde),_0x46dffb(0xb2),_0x46dffb(0xbb)],_0x512dd0=['admin','owner','council',_0x46dffb(0x112)];for(const _0x426f31 of _0x47722d){try{const _0x382024=doc(db,_0x426f31,_0xec6fda['uid']),_0x4bfbb2=await getDoc(_0x382024);if(_0x4bfbb2['exists']()){const _0x291a92=_0x4bfbb2['data'](),_0x305e93=(_0x291a92['roleName']||_0x291a92['role']||'')[_0x46dffb(0xa7)]();if(_0x305e93&&_0x512dd0[_0x46dffb(0xd2)](_0x305e93))return!![];}}catch(_0x4b56f6){console['warn'](_0x46dffb(0xfa)+_0x426f31+':',_0x4b56f6);}}return![];}catch(_0x2219d1){return console[_0x46dffb(0xfd)](_0x46dffb(0xe7),_0x2219d1),![];}}function showAdminOnlyMessage(){const _0x2f05e9=a27_0x1d6f,_0x2c0ef4=document['getElementById']('admin-only-message');_0x2c0ef4&&_0x2c0ef4[_0x2f05e9(0xd5)]();const _0x5631cf=document[_0x2f05e9(0xa0)](_0x2f05e9(0xcb));_0x5631cf['id']='admin-only-message',_0x5631cf['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x5631cf[_0x2f05e9(0x109)]=_0x2f05e9(0x118),document[_0x2f05e9(0xfb)][_0x2f05e9(0x115)](_0x5631cf),setTimeout(()=>{const _0xf22058=_0x2f05e9;_0x5631cf['parentNode']&&_0x5631cf[_0xf22058(0xd5)]();},0xbb8);}