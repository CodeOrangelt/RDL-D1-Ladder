(function(_0x3ae267,_0x1291a2){const _0x377d37=a1_0x3e00,_0x209f0f=_0x3ae267();while(!![]){try{const _0x580c81=parseInt(_0x377d37(0x1a4))/0x1*(parseInt(_0x377d37(0x1b3))/0x2)+-parseInt(_0x377d37(0x171))/0x3+-parseInt(_0x377d37(0x178))/0x4+-parseInt(_0x377d37(0x195))/0x5+parseInt(_0x377d37(0x172))/0x6*(parseInt(_0x377d37(0x17a))/0x7)+-parseInt(_0x377d37(0x19e))/0x8*(-parseInt(_0x377d37(0x1b0))/0x9)+parseInt(_0x377d37(0x19a))/0xa;if(_0x580c81===_0x1291a2)break;else _0x209f0f['push'](_0x209f0f['shift']());}catch(_0x507a1e){_0x209f0f['push'](_0x209f0f['shift']());}}}(a1_0x4d33,0xf241b));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const _0x521245=a1_0x3e00,_0x4c0114=(function(){let _0x4f4831=!![];return function(_0x2237da,_0x3d2433){const _0x3c8cf1=_0x4f4831?function(){const _0x2c08f8=a1_0x3e00;if(_0x3d2433){const _0x26b773=_0x3d2433[_0x2c08f8(0x1ab)](_0x2237da,arguments);return _0x3d2433=null,_0x26b773;}}:function(){};return _0x4f4831=![],_0x3c8cf1;};}()),_0x106fb9=_0x4c0114(this,function(){const _0x3b42e1=a1_0x3e00;return _0x106fb9['toString']()[_0x3b42e1(0x189)](_0x3b42e1(0x1b1))[_0x3b42e1(0x193)]()[_0x3b42e1(0x1a1)](_0x106fb9)['search'](_0x3b42e1(0x1b1));});_0x106fb9();const _0x425051=(function(){let _0xb8f851=!![];return function(_0x2ba7df,_0x46a93b){const _0x2f33d6=_0xb8f851?function(){if(_0x46a93b){const _0x269702=_0x46a93b['apply'](_0x2ba7df,arguments);return _0x46a93b=null,_0x269702;}}:function(){};return _0xb8f851=![],_0x2f33d6;};}()),_0x358af3=_0x425051(this,function(){const _0xcbae75=a1_0x3e00;let _0x3ca4aa;try{const _0x349014=Function(_0xcbae75(0x1a5)+_0xcbae75(0x1ae)+');');_0x3ca4aa=_0x349014();}catch(_0x26337b){_0x3ca4aa=window;}const _0x29fde5=_0x3ca4aa['console']=_0x3ca4aa[_0xcbae75(0x198)]||{},_0x3486d5=['log',_0xcbae75(0x181),_0xcbae75(0x199),_0xcbae75(0x194),_0xcbae75(0x177),_0xcbae75(0x18f),_0xcbae75(0x18d)];for(let _0x1a24d7=0x0;_0x1a24d7<_0x3486d5['length'];_0x1a24d7++){const _0x31bea0=_0x425051[_0xcbae75(0x1a1)][_0xcbae75(0x1a7)][_0xcbae75(0x184)](_0x425051),_0x43f6aa=_0x3486d5[_0x1a24d7],_0x3bc6e2=_0x29fde5[_0x43f6aa]||_0x31bea0;_0x31bea0['__proto__']=_0x425051[_0xcbae75(0x184)](_0x425051),_0x31bea0[_0xcbae75(0x193)]=_0x3bc6e2[_0xcbae75(0x193)][_0xcbae75(0x184)](_0x3bc6e2),_0x29fde5[_0x43f6aa]=_0x31bea0;}});_0x358af3(),console[_0x521245(0x1a3)](_0x521245(0x17b));try{console[_0x521245(0x1a3)](_0x521245(0x1af));const [_0xe47fd4,_0x534d79,_0x20ffaf,_0x452bea,_0xcd2b5e]=await Promise[_0x521245(0x196)]([getDocs(collection(db,_0x521245(0x1b2))),getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x521245(0x188))),getDocs(collection(db,'nonParticipants'))]);console[_0x521245(0x1a3)](_0x521245(0x18c)+_0xe47fd4[_0x521245(0x179)]+_0x521245(0x187)+_0x534d79[_0x521245(0x179)]+'\x20D1,\x20'+_0x20ffaf[_0x521245(0x179)]+'\x20D2,\x20'+_0x452bea[_0x521245(0x179)]+'\x20D3,\x20'+_0xcd2b5e[_0x521245(0x179)]+_0x521245(0x19f));const _0x3cf0cd=new Map();_0xe47fd4[_0x521245(0x19b)](_0x5ca681=>{const _0x16ca68=_0x521245;_0x3cf0cd[_0x16ca68(0x175)](_0x5ca681['id'],_0x5ca681['data']());});const _0x83f20c=new Map(),_0x25aa37=(_0xfaf2f0,_0x59c8a5)=>{_0xfaf2f0['forEach'](_0x56b4d4=>{const _0x59fc71=a1_0x3e00,_0x8e2dc2=_0x56b4d4[_0x59fc71(0x180)](),_0x22e4e9=_0x56b4d4['id'];!_0x83f20c[_0x59fc71(0x1ac)](_0x22e4e9)&&_0x83f20c['set'](_0x22e4e9,{'userId':_0x22e4e9,'username':_0x8e2dc2[_0x59fc71(0x176)]||_0x8e2dc2[_0x59fc71(0x185)]||'Unknown','ladders':[],'isNonParticipant':![]});const _0x49130c=_0x83f20c[_0x59fc71(0x17e)](_0x22e4e9);_0x49130c[_0x59fc71(0x1a6)][_0x59fc71(0x192)]({'ladder':_0x59c8a5,'elo':_0x8e2dc2['eloRating']||_0x8e2dc2[_0x59fc71(0x191)]||0x4b0,'active':_0x8e2dc2[_0x59fc71(0x174)]!==![]});});};_0x25aa37(_0x534d79,'D1'),_0x25aa37(_0x20ffaf,'D2'),_0x25aa37(_0x452bea,'D3'),_0xcd2b5e[_0x521245(0x19b)](_0x58c2ff=>{const _0x518421=_0x521245,_0x51b606=_0x58c2ff[_0x518421(0x180)](),_0x5276d4=_0x58c2ff['id'];!_0x83f20c[_0x518421(0x1ac)](_0x5276d4)&&(_0x51b606[_0x518421(0x176)]||_0x51b606[_0x518421(0x185)])&&_0x83f20c[_0x518421(0x175)](_0x5276d4,{'userId':_0x5276d4,'username':_0x51b606[_0x518421(0x176)]||_0x51b606[_0x518421(0x185)],'ladders':[],'isNonParticipant':!![]});}),console[_0x521245(0x1a3)]('‚öôÔ∏è\x20Processed\x20'+_0x83f20c['size']+_0x521245(0x19d)),console['log'](_0x521245(0x1a9));const _0x30b156=[];let _0x328814=writeBatch(db),_0x1877e1=0x0,_0x1c6b40=0x0;_0x83f20c[_0x521245(0x19b)]((_0x14887f,_0x331071)=>{const _0x1cfe3f=_0x521245,_0x12b600=_0x3cf0cd[_0x1cfe3f(0x17e)](_0x331071)||{};let _0x41fbb0=0x0,_0x57dfde=null;if(_0x14887f[_0x1cfe3f(0x1a6)]['length']>0x0){const _0x502659=_0x14887f['ladders']['sort']((_0x5143d9,_0x212282)=>_0x212282[_0x1cfe3f(0x191)]-_0x5143d9['elo']);_0x41fbb0=_0x502659[0x0][_0x1cfe3f(0x191)],_0x57dfde=_0x502659[0x0][_0x1cfe3f(0x17c)];}const _0x1cf10e={'userId':_0x331071,'username':_0x14887f[_0x1cfe3f(0x176)],'profileImageUrl':_0x12b600[_0x1cfe3f(0x18a)]||null,'country':_0x12b600[_0x1cfe3f(0x182)]||null,'motto':_0x12b600[_0x1cfe3f(0x1a8)]||null,'favoriteMap':_0x12b600[_0x1cfe3f(0x1ad)]||null,'favoriteWeapon':_0x12b600['favoriteWeapon']||null,'isNonParticipant':_0x14887f['isNonParticipant'],'ladders':_0x14887f[_0x1cfe3f(0x1a6)],'primaryLadder':_0x57dfde,'highestElo':_0x41fbb0,'rank':getPlayerRank(_0x41fbb0),'lastUpdated':new Date(),'migrationTimestamp':new Date()[_0x1cfe3f(0x16e)]()},_0x2c0e9c=doc(collection(db,_0x1cfe3f(0x170)),_0x331071);_0x328814['set'](_0x2c0e9c,_0x1cf10e),_0x1877e1++,_0x1c6b40++,_0x1877e1>=0x1c2&&(_0x30b156[_0x1cfe3f(0x192)](_0x328814['commit']()),_0x328814=writeBatch(db),_0x1877e1=0x0,console[_0x1cfe3f(0x1a3)]('üì¶\x20Prepared\x20batch\x20'+_0x30b156[_0x1cfe3f(0x1a2)]+'\x20('+_0x1c6b40+_0x1cfe3f(0x1b4)));}),_0x1877e1>0x0&&_0x30b156[_0x521245(0x192)](_0x328814[_0x521245(0x186)]()),console[_0x521245(0x1a3)](_0x521245(0x17f)+_0x30b156[_0x521245(0x1a2)]+'\x20batches...'),await Promise['all'](_0x30b156),console[_0x521245(0x1a3)](_0x521245(0x173)+_0x83f20c['size']+_0x521245(0x17d)),console['log'](_0x521245(0x197));}catch(_0x34dc57){console[_0x521245(0x194)](_0x521245(0x1a0),_0x34dc57),_0x34dc57[_0x521245(0x18e)]===_0x521245(0x183)&&console[_0x521245(0x194)](_0x521245(0x18b));}}function a1_0x3e00(_0x5bc034,_0x16746d){const _0x3e0515=a1_0x4d33();return a1_0x3e00=function(_0x4a5224,_0x2805ce){_0x4a5224=_0x4a5224-0x16e;let _0x17b4bc=_0x3e0515[_0x4a5224];return _0x17b4bc;},a1_0x3e00(_0x5bc034,_0x16746d);}function getPlayerRank(_0x47836b){const _0x2f2db5=a1_0x3e00;if(_0x47836b>=0x7d0)return _0x2f2db5(0x1aa);if(_0x47836b>=0x708)return _0x2f2db5(0x19c);if(_0x47836b>=0x640)return _0x2f2db5(0x190);if(_0x47836b>=0x578)return'bronze';return _0x2f2db5(0x16f);}function a1_0x4d33(){const _0x3dd249=['get','üöÄ\x20Executing\x20','data','warn','country','permission-denied','bind','name','commit','\x20profiles,\x20','playersD3','search','profileImageUrl','üîí\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.','‚úÖ\x20Data\x20fetched:\x20','trace','code','table','silver','elo','push','toString','error','6276905hCKIbH','all','üí°\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!','console','info','30224820fmtGYF','forEach','gold','\x20unique\x20members','1271720pYvSRi','\x20non-participants','‚ùå\x20Migration\x20failed:','constructor','length','log','2wXjlDR','return\x20(function()\x20','ladders','prototype','motto','üíæ\x20Writing\x20aggregated\x20data...','emerald','apply','has','favoriteMap','{}.constructor(\x22return\x20this\x22)(\x20)','üì•\x20Fetching\x20all\x20collections...','9sScYxW','(((.+)+)+)+$','userProfiles','319540GqZViw','\x20members\x20processed)','toISOString','unranked','aggregatedMembers','3434202JcSXAV','202518mwaSeT','üéâ\x20Successfully\x20migrated\x20','active','set','username','exception','1649464ybDpeo','size','63VKPLYJ','üîÑ\x20Starting\x20migration\x20to\x20aggregated\x20members...','ladder','\x20members\x20to\x20aggregated\x20collection!'];a1_0x4d33=function(){return _0x3dd249;};return a1_0x4d33();}migrateToAggregatedMembers();