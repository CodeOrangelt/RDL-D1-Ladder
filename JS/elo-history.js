function a14_0x4f0f(_0x8a1055,_0x25a0aa){const _0x4bfb3a=a14_0x315f();return a14_0x4f0f=function(_0x679879,_0x3350a6){_0x679879=_0x679879-0x1ae;let _0x315f3e=_0x4bfb3a[_0x679879];return _0x315f3e;},a14_0x4f0f(_0x8a1055,_0x25a0aa);}const a14_0x679879=(function(){let _0x2d4c9b=!![];return function(_0x4505f9,_0x22fe34){const _0x43a6a5=_0x2d4c9b?function(){if(_0x22fe34){const _0x37408c=_0x22fe34['apply'](_0x4505f9,arguments);return _0x22fe34=null,_0x37408c;}}:function(){};return _0x2d4c9b=![],_0x43a6a5;};}()),a14_0x4bfb3a=a14_0x679879(this,function(){const _0x190cf9=a14_0x4f0f,_0x25b1e9=function(){const _0x3d1ed6=a14_0x4f0f;let _0x3c56df;try{_0x3c56df=Function('return\x20(function()\x20'+_0x3d1ed6(0x1bd)+');')();}catch(_0x435846){_0x3c56df=window;}return _0x3c56df;},_0x27c3cc=_0x25b1e9(),_0x2f75fe=_0x27c3cc[_0x190cf9(0x1ba)]=_0x27c3cc[_0x190cf9(0x1ba)]||{},_0x295435=['log',_0x190cf9(0x1bb),'info','error',_0x190cf9(0x1b6),_0x190cf9(0x1b9),_0x190cf9(0x1b7)];for(let _0x29b5d7=0x0;_0x29b5d7<_0x295435['length'];_0x29b5d7++){const _0x2664ee=a14_0x679879[_0x190cf9(0x1b0)]['prototype']['bind'](a14_0x679879),_0x33a894=_0x295435[_0x29b5d7],_0x32ee11=_0x2f75fe[_0x33a894]||_0x2664ee;_0x2664ee['__proto__']=a14_0x679879['bind'](a14_0x679879),_0x2664ee['toString']=_0x32ee11[_0x190cf9(0x1b4)]['bind'](_0x32ee11),_0x2f75fe[_0x33a894]=_0x2664ee;}});a14_0x4bfb3a();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];async function getUsernameById(_0x5795de){const _0x558421=a14_0x4f0f;try{if(!_0x5795de)return _0x558421(0x1be);const _0x173890=await getDoc(doc(db,_0x558421(0x1ae),_0x5795de));return _0x173890['exists']()?_0x173890['data']()[_0x558421(0x1b2)]:'Unknown\x20Player';}catch(_0x28c2fc){return console[_0x558421(0x1bc)]('Error\x20fetching\x20username:',_0x28c2fc),'Unknown\x20Player';}}export async function recordEloChange({playerId:_0x3a0d80,previousElo:_0x3f475a,newElo:_0x5b58a7,opponentId:_0x1426cc,matchResult:_0x1c339f,previousPosition:_0x298cc0,newPosition:_0xc2ff36,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x3897e0}){const _0x2460c3=a14_0x4f0f;try{const _0x55a3b8=doc(collection(db,_0x2460c3(0x1af)));let _0x3808fd='match';if(isPromotion)_0x3808fd='promotion';if(isDemotion)_0x3808fd='demotion';let _0x285098='Unranked';if(_0x5b58a7>=0x834)_0x285098='Emerald';else{if(_0x5b58a7>=0x708)_0x285098=_0x2460c3(0x1b1);else{if(_0x5b58a7>=0x640)_0x285098='Silver';else{if(_0x5b58a7>=0x578)_0x285098='Bronze';}}}return await setDoc(_0x55a3b8,{'type':_0x3808fd,'player':_0x3a0d80,'opponent':_0x1426cc,'previousElo':_0x3f475a,'newElo':_0x5b58a7,'change':_0x5b58a7-_0x3f475a,'matchResult':_0x1c339f,'previousPosition':_0x298cc0,'newPosition':_0xc2ff36,'rankAchieved':_0x285098,'timestamp':_0x3897e0}),console['log']('ELO\x20history\x20recorded\x20for\x20'+_0x3a0d80),!![];}catch(_0xbfcad9){console[_0x2460c3(0x1bc)](_0x2460c3(0x1b5),_0xbfcad9);throw _0xbfcad9;}}export async function getEloHistory(){const _0x18d7c4=a14_0x4f0f;try{const _0x184592=collection(db,_0x18d7c4(0x1af)),_0x1633de=query(_0x184592,orderBy('timestamp','desc')),_0x17c44a=await getDocs(_0x1633de),_0x36e862=_0x17c44a['docs']['map'](async _0x244363=>{const _0x248805=_0x18d7c4,_0x106db1=_0x244363['data'](),[_0x2818cb,_0x1222de]=await Promise['all']([getUsernameById(_0x106db1['player']),getUsernameById(_0x106db1[_0x248805(0x1b3)])]);return{..._0x106db1,'playerUsername':_0x2818cb,'opponentUsername':_0x1222de,'change':_0x106db1['newElo']-_0x106db1['previousElo'],'timestamp':_0x106db1['timestamp']};}),_0x201ea5=await Promise[_0x18d7c4(0x1b8)](_0x36e862);return{'entries':_0x201ea5};}catch(_0x4e5ec1){console['error']('Error\x20fetching\x20ELO\x20history:',_0x4e5ec1);throw _0x4e5ec1;}}function a14_0x315f(){const _0x1668cb=['players','eloHistory','constructor','Gold','username','opponent','toString','Error\x20recording\x20ELO\x20history:','exception','trace','all','table','console','warn','error','{}.constructor(\x22return\x20this\x22)(\x20)','Unknown\x20Player'];a14_0x315f=function(){return _0x1668cb;};return a14_0x315f();}export function resetPagination(){lastVisible=null;}