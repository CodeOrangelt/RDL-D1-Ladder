const a0_0x298b92=a0_0xfe12;function a0_0x1c53(){const _0x222daf=['querySelectorAll','sentUnsubscribe','h\x20ago','4ntdknE','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','3483LBWrjg','setupEventListeners','2172536xGdvtp','23090UgtiFr','Error\x20creating\x20team:','updateNotificationCount','492948ibpwsN','teamColor','accepted','addEventListener','434640xcFlre','add','cancelled','renderInvitations','setupActionListeners','textContent','floor','console','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','createInvitationCard','appendChild','3291aEyyMG','outbox','__proto__','init','35wLIJtU','filter','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','desc','getTimeAgo','type','remove','prototype','pending','declined','createdAt','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Failed\x20to\x20','querySelector','accept','onAuthStateChanged','toUsername','4247958DGKvBA','sent-invitation','cancel','dataset','Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.','unsubscribe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20','join','click','team_invite','256mXlwiZ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-','uid','3287185BUCwuw','respondedAt','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>','message','proposedTeamName','status','data','currentFilter','\x22\x20data-invitation-id=\x22','pageSize','docs','teamData','modal-styles','invitations'];a0_0x1c53=function(){return _0x222daf;};return a0_0x1c53();}(function(_0x1f45ad,_0xc23bb5){const _0x3331aa=a0_0xfe12,_0x3b52a8=_0x1f45ad();while(!![]){try{const _0x4adaf2=parseInt(_0x3331aa(0xb0))/0x1*(-parseInt(_0x3331aa(0xbc))/0x2)+parseInt(_0x3331aa(0xc8))/0x3*(parseInt(_0x3331aa(0x9b))/0x4)+parseInt(_0x3331aa(0x9f))/0x5+parseInt(_0x3331aa(0xb8))/0x6*(parseInt(_0x3331aa(0xcc))/0x7)+-parseInt(_0x3331aa(0xb4))/0x8+-parseInt(_0x3331aa(0xb2))/0x9*(-parseInt(_0x3331aa(0xb5))/0xa)+-parseInt(_0x3331aa(0xdf))/0xb;if(_0x4adaf2===_0xc23bb5)break;else _0x3b52a8['push'](_0x3b52a8['shift']());}catch(_0x59d559){_0x3b52a8['push'](_0x3b52a8['shift']());}}}(a0_0x1c53,0x7b4a1));const a0_0x5a34a2=(function(){let _0x5edb98=!![];return function(_0x48c27b,_0x55e392){const _0x4ae77c=_0x5edb98?function(){if(_0x55e392){const _0x408540=_0x55e392['apply'](_0x48c27b,arguments);return _0x55e392=null,_0x408540;}}:function(){};return _0x5edb98=![],_0x4ae77c;};}()),a0_0x4cadda=a0_0x5a34a2(this,function(){const _0x5e100d=a0_0xfe12,_0xd5ad88=function(){let _0x174d9c;try{_0x174d9c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3434f6){_0x174d9c=window;}return _0x174d9c;},_0x5e677a=_0xd5ad88(),_0x57959d=_0x5e677a['console']=_0x5e677a[_0x5e100d(0xc3)]||{},_0x397607=['log','warn','info','error','exception','table','trace'];for(let _0x5b3603=0x0;_0x5b3603<_0x397607['length'];_0x5b3603++){const _0x12b65f=a0_0x5a34a2['constructor'][_0x5e100d(0xd3)]['bind'](a0_0x5a34a2),_0x4fdfba=_0x397607[_0x5b3603],_0x10df43=_0x57959d[_0x4fdfba]||_0x12b65f;_0x12b65f[_0x5e100d(0xca)]=a0_0x5a34a2['bind'](a0_0x5a34a2),_0x12b65f['toString']=_0x10df43['toString']['bind'](_0x10df43),_0x57959d[_0x4fdfba]=_0x12b65f;}});a0_0x4cadda();import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0xfe12(_0x22bab6,_0x360fb1){const _0x4f7b93=a0_0x1c53();return a0_0xfe12=function(_0x4cadda,_0x5a34a2){_0x4cadda=_0x4cadda-0x92;let _0x44d9d7=_0x4f7b93[_0x4cadda];return _0x44d9d7;},a0_0xfe12(_0x22bab6,_0x360fb1);}class InboxManager{constructor(){const _0x4050a3=a0_0xfe12;this[_0x4050a3(0xa6)]=_0x4050a3(0xd4),this['invitations']=[],this['sentInvitations']=[],this[_0x4050a3(0x96)]=null,this['sentUnsubscribe']=null,this[_0x4050a3(0xa8)]=0x14,this['lastDoc']=null,this['hasMore']=!![],this[_0x4050a3(0xcb)]();}async['init'](){const _0x1a772d=a0_0xfe12;auth[_0x1a772d(0xdd)](_0x345586=>{const _0x10ab72=_0x1a772d;_0x345586?(this['loadInvitations'](_0x345586[_0x10ab72(0x9e)]),this['setupEventListeners']()):window['location']['href']='./login.html';});}[a0_0x298b92(0xb3)](){const _0x485c14=a0_0x298b92;document[_0x485c14(0xad)]('.filter-btn')['forEach'](_0xa1b158=>{const _0x4a21a3=_0x485c14;_0xa1b158[_0x4a21a3(0xbb)]('click',()=>{const _0x1059e5=_0x4a21a3;document['querySelectorAll']('.filter-btn')['forEach'](_0x340d21=>_0x340d21['classList']['remove']('active')),_0xa1b158['classList'][_0x1059e5(0xbd)]('active'),this['currentFilter']=_0xa1b158[_0x1059e5(0x94)][_0x1059e5(0xcd)],this[_0x1059e5(0xbf)]();});});}['loadInvitations'](_0x276a03){const _0x3e15f5=a0_0x298b92,_0x261010=collection(db,'gameInvitations');let _0x56f04e=query(_0x261010,where('toUserId','==',_0x276a03),orderBy('createdAt','desc'),limit(this['pageSize']));this['unsubscribe']=onSnapshot(_0x56f04e,_0x509aaf=>{const _0x592dcb=a0_0xfe12;this['invitations']=_0x509aaf['docs']['map'](_0x1f6020=>({'id':_0x1f6020['id'],..._0x1f6020[_0x592dcb(0xa5)]()})),this['renderInvitations'](),this[_0x592dcb(0xb7)]();});let _0x10d621=query(_0x261010,where('fromUserId','==',_0x276a03),orderBy('createdAt',_0x3e15f5(0xcf)),limit(this['pageSize']));this['sentUnsubscribe']=onSnapshot(_0x10d621,_0x136280=>{const _0x428436=_0x3e15f5;this['sentInvitations']=_0x136280[_0x428436(0xa9)]['map'](_0xd7d27f=>({'id':_0xd7d27f['id'],..._0xd7d27f['data'](),'isSent':!![]})),this['renderInvitations']();});}[a0_0x298b92(0xbf)](){const _0x2e2dc8=a0_0x298b92,_0x57a7b4=document['getElementById']('inbox-content');if(!_0x57a7b4)return;let _0x49d7d6=[];if(this[_0x2e2dc8(0xa6)]===_0x2e2dc8(0xc9))_0x49d7d6=this['sentInvitations'];else this[_0x2e2dc8(0xa6)]==='all'?_0x49d7d6=[...this[_0x2e2dc8(0xac)],...this['sentInvitations']]['sort']((_0x114861,_0xca2ca1)=>{const _0x18ad35=_0x2e2dc8,_0x43107c=_0x114861['createdAt']?.['toDate']?_0x114861['createdAt']['toDate']():new Date(_0x114861[_0x18ad35(0xd6)]),_0x4e4083=_0xca2ca1['createdAt']?.['toDate']?_0xca2ca1['createdAt']['toDate']():new Date(_0xca2ca1['createdAt']);return _0x4e4083-_0x43107c;}):_0x49d7d6=this['invitations']['filter'](_0x2082f8=>_0x2082f8[_0x2e2dc8(0xa4)]===this['currentFilter']);if(_0x49d7d6['length']===0x0){const _0x52d214=this['currentFilter']==='outbox'?'sent':this['currentFilter']==='all'?'':this['currentFilter'];_0x57a7b4[_0x2e2dc8(0xd7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x52d214+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this['currentFilter']===_0x2e2dc8(0xc9)?_0x2e2dc8(0x95):'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x57a7b4[_0x2e2dc8(0xd7)]=_0x49d7d6['map'](_0xf1f084=>this[_0x2e2dc8(0xc6)](_0xf1f084))[_0x2e2dc8(0x98)](''),this[_0x2e2dc8(0xc0)]();}['createInvitationCard'](_0x501fdc){const _0x1ffe0c=a0_0x298b92,_0xcdee40=_0x501fdc['createdAt']?.['toDate']?_0x501fdc[_0x1ffe0c(0xd6)]['toDate']():new Date(_0x501fdc['createdAt']),_0xd17d76=this['getTimeAgo'](_0xcdee40),_0x4eb494=_0x501fdc['isSent']||![];let _0x19b820='';return _0x501fdc['type']==='team_invite'?_0x19b820='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x501fdc[_0x1ffe0c(0xa2)]+_0x1ffe0c(0xce)+_0x501fdc['teamData']['teamColor']+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x501fdc[_0x1ffe0c(0xaa)][_0x1ffe0c(0xa3)]+_0x1ffe0c(0x97)+_0x501fdc['teamData'][_0x1ffe0c(0xb9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x19b820='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x501fdc['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x501fdc[_0x1ffe0c(0xa4)]+'\x20'+(_0x4eb494?_0x1ffe0c(0x92):'')+_0x1ffe0c(0xa7)+_0x501fdc['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4eb494?'To:\x20'+_0x501fdc[_0x1ffe0c(0xde)]:_0x501fdc['fromUsername'])+_0x1ffe0c(0xd8)+(_0x4eb494?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0xd17d76+_0x1ffe0c(0x9d)+_0x501fdc[_0x1ffe0c(0xa4)]+'\x22>'+_0x501fdc[_0x1ffe0c(0xa4)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x19b820+_0x1ffe0c(0xd9)+(!_0x4eb494&&_0x501fdc[_0x1ffe0c(0xa4)]==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x501fdc['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x501fdc['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x501fdc[_0x1ffe0c(0xd1)]!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x501fdc['id']+_0x1ffe0c(0xc5):'')+_0x1ffe0c(0xc4):'')+_0x1ffe0c(0xd9)+(_0x4eb494&&_0x501fdc['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x501fdc['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){document['querySelectorAll']('.action-btn')['forEach'](_0x54855d=>{_0x54855d['addEventListener']('click',async _0x140b5d=>{const _0xd1371f=a0_0xfe12,_0x5cb67d=_0x54855d[_0xd1371f(0x94)]['action'],_0x5650b5=_0x54855d['dataset']['invitationId'];_0x54855d['disabled']=!![];const _0x46db04=_0x54855d['innerHTML'];_0x54855d[_0xd1371f(0xd7)]=_0xd1371f(0xa1);try{switch(_0x5cb67d){case _0xd1371f(0xdc):await this['updateInvitationStatus'](_0x5650b5,_0xd1371f(0xba));break;case'decline':await this['updateInvitationStatus'](_0x5650b5,_0xd1371f(0xd5));break;case _0xd1371f(0x93):await this['updateInvitationStatus'](_0x5650b5,_0xd1371f(0xbe));break;case'respond':this['openResponseModal'](_0x5650b5);break;}}catch(_0x29b832){console['error']('Error\x20performing\x20'+_0x5cb67d+':',_0x29b832),alert(_0xd1371f(0xda)+_0x5cb67d+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x54855d['disabled']=![],_0x54855d[_0xd1371f(0xd7)]=_0x46db04;}});});}async['updateInvitationStatus'](_0x241080,_0x6299ae){const _0x38e42b=a0_0x298b92;try{const _0x510e17=this['invitations']['find'](_0x24e2e0=>_0x24e2e0['id']===_0x241080);_0x510e17&&_0x510e17['type']===_0x38e42b(0x9a)&&_0x6299ae==='accepted'&&await this['createTeamFromInvitation'](_0x510e17);const _0x456e85=doc(db,'gameInvitations',_0x241080);await updateDoc(_0x456e85,{'status':_0x6299ae,'respondedAt':new Date()}),_0x510e17&&(_0x510e17[_0x38e42b(0xa4)]=_0x6299ae,_0x510e17[_0x38e42b(0xa0)]=new Date(),this[_0x38e42b(0xbf)]());}catch(_0x22143e){console['error']('Error\x20updating\x20invitation\x20status:',_0x22143e);throw _0x22143e;}}['openResponseModal'](_0x3b82e9){const _0x5c2023=a0_0x298b92,_0x1e35ce=this['invitations']['find'](_0x14615f=>_0x14615f['id']===_0x3b82e9);if(!_0x1e35ce)return;const _0x19e08e=document['createElement']('div');_0x19e08e['className']='modal-overlay',_0x19e08e[_0x5c2023(0xd7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x1e35ce['fromUsername']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x1e35ce['value']+_0x5c2023(0xb1);if(!document['getElementById']('modal-styles')){const _0x2b670e=document['createElement']('style');_0x2b670e['id']=_0x5c2023(0xab),_0x2b670e['textContent']=_0x5c2023(0x9c),document['head']['appendChild'](_0x2b670e);}document['body'][_0x5c2023(0xc7)](_0x19e08e),_0x19e08e['querySelector']('.modal-close')['addEventListener']('click',()=>_0x19e08e[_0x5c2023(0xd2)]()),_0x19e08e[_0x5c2023(0xdb)]('#cancel-response')[_0x5c2023(0xbb)]('click',()=>_0x19e08e['remove']()),_0x19e08e[_0x5c2023(0xbb)]('click',_0x4393d7=>{if(_0x4393d7['target']===_0x19e08e)_0x19e08e['remove']();}),_0x19e08e['querySelector']('#send-response')[_0x5c2023(0xbb)](_0x5c2023(0x99),()=>{const _0xafda2f=document['getElementById']('response-message')['value']['trim']();_0xafda2f&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x19e08e['remove']());});}async['createTeamFromInvitation'](_0x4e453a){const _0x164acc=a0_0x298b92;try{const {createTeam:_0x192071}=await import('./ladderduos.js'),_0x349fe2=await _0x192071(_0x4e453a['fromUsername'],_0x4e453a['toUsername'],_0x4e453a[_0x164acc(0xaa)]['proposedTeamName'],_0x4e453a['teamData']['teamColor']);if(!_0x349fe2['success'])throw new Error(_0x349fe2['error']);alert('Team\x20\x22'+_0x4e453a['teamData']['proposedTeamName']+'\x22\x20created\x20successfully!');}catch(_0x4de446){console['error'](_0x164acc(0xb6),_0x4de446);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x4de446[_0x164acc(0xa2)]);}}[a0_0x298b92(0xb7)](){const _0x5f3c2=a0_0x298b92,_0x11caed=this[_0x5f3c2(0xac)]['filter'](_0x168870=>_0x168870[_0x5f3c2(0xa4)]==='pending')['length'],_0x46ebdd=document['getElementById']('inbox-notification');_0x46ebdd&&(_0x11caed>0x0?(_0x46ebdd['style']['display']='inline-block',_0x46ebdd[_0x5f3c2(0xc1)]=_0x11caed>0x9?'9+':_0x11caed):_0x46ebdd['style']['display']='none');}[a0_0x298b92(0xd0)](_0x1baa54){const _0x5aceac=a0_0x298b92,_0x10012f=new Date(),_0x2ec3d5=_0x10012f-_0x1baa54,_0x395e71=Math[_0x5aceac(0xc2)](_0x2ec3d5/(0x3e8*0x3c)),_0x548ffc=Math['floor'](_0x2ec3d5/(0x3e8*0x3c*0x3c)),_0x1fe8a0=Math[_0x5aceac(0xc2)](_0x2ec3d5/(0x3e8*0x3c*0x3c*0x18));if(_0x395e71<0x1)return'Just\x20now';if(_0x395e71<0x3c)return _0x395e71+'m\x20ago';if(_0x548ffc<0x18)return _0x548ffc+_0x5aceac(0xaf);if(_0x1fe8a0<0x7)return _0x1fe8a0+'d\x20ago';return _0x1baa54['toLocaleDateString']();}['destroy'](){const _0x2250bf=a0_0x298b92;this[_0x2250bf(0x96)]&&this[_0x2250bf(0x96)](),this[_0x2250bf(0xae)]&&this['sentUnsubscribe']();}}document['addEventListener']('DOMContentLoaded',()=>{new InboxManager();});