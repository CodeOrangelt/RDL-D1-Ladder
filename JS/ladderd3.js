const a33_0x19163b=a33_0x30b2,a33_0xd0ef23=(function(){let _0x1f3f43=!![];return function(_0x9a9471,_0x28148c){const _0x20ef1f=_0x1f3f43?function(){if(_0x28148c){const _0x974d2d=_0x28148c['apply'](_0x9a9471,arguments);return _0x28148c=null,_0x974d2d;}}:function(){};return _0x1f3f43=![],_0x20ef1f;};}()),a33_0x4ce86f=a33_0xd0ef23(this,function(){const _0x2d68d6=a33_0x30b2,_0x2b7b7b=function(){let _0x3cdc1f;try{_0x3cdc1f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2e92d8){_0x3cdc1f=window;}return _0x3cdc1f;},_0x11867e=_0x2b7b7b(),_0x1deff6=_0x11867e[_0x2d68d6(0xc6)]=_0x11867e['console']||{},_0x1d64ed=['log',_0x2d68d6(0xdf),'info',_0x2d68d6(0xf9),_0x2d68d6(0xff),_0x2d68d6(0xdd),_0x2d68d6(0xf1)];for(let _0xd89c8d=0x0;_0xd89c8d<_0x1d64ed[_0x2d68d6(0xc5)];_0xd89c8d++){const _0x1ce1cd=a33_0xd0ef23['constructor']['prototype']['bind'](a33_0xd0ef23),_0x5cdf19=_0x1d64ed[_0xd89c8d],_0x4874b7=_0x1deff6[_0x5cdf19]||_0x1ce1cd;_0x1ce1cd[_0x2d68d6(0xf5)]=a33_0xd0ef23['bind'](a33_0xd0ef23),_0x1ce1cd['toString']=_0x4874b7['toString']['bind'](_0x4874b7),_0x1deff6[_0x5cdf19]=_0x1ce1cd;}});a33_0x4ce86f();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x963517 from'./firebase-idle-wrapper.js';const styleEl=document['createElement']('style');function a33_0x30b2(_0x31adf5,_0x355c27){const _0x4ce86f=a33_0x55c7();return a33_0x30b2=function(_0xd0ef23,_0x5b4ca2){_0xd0ef23=_0xd0ef23-0xc2;let _0x55c7bc=_0x4ce86f[_0xd0ef23];return _0x55c7bc;},a33_0x30b2(_0x31adf5,_0x355c27);}styleEl[a33_0x19163b(0xdb)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head'][a33_0x19163b(0xe9)](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;function a33_0x55c7(){const _0x157179=['playerUsername','includes','bold','length','console','gameMode','opacity','approvedMatchesD3','newElo','fontSize','totalKills','entries','has','then','fontWeight','kda','map','totalMatches','querySelector','desc','size','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','losses','D3:\x20Fallback\x20query\x20failed:','ceil','textContent','wins','table','winRate','warn','set','\x20fallback\x20ELO\x20change:\x20','toLowerCase','get','#ladder-d3\x20thead\x20tr','username','log','totalDeaths','country','appendChild','sort','position','find','querySelectorAll','player','D3:\x20Final\x20ELO\x20changes:','data','trace','innerHTML','playersD3','now','__proto__','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','style','eloRating','error','previousElo','pilot','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','timestamp','exception','eloHistory','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','userProfiles'];a33_0x55c7=function(){return _0x157179;};return a33_0x55c7();}async function displayLadderD3(_0x500782=![]){const _0x54c220=a33_0x19163b,_0x1a112a=document['querySelector']('#ladder-d3\x20tbody');if(!_0x1a112a){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x1a112a['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x3ca4df=Date['now']();if(!_0x500782&&playerCacheD3['data']&&_0x3ca4df-playerCacheD3[_0x54c220(0xfe)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x12046d=collection(db,'playersD3'),_0x176ef3=await getDocs(_0x12046d),_0x1c2f39=[];_0x176ef3[_0x54c220(0xfc)](_0x49d600=>{const _0x2860c5=_0x54c220,_0x1f4896=_0x49d600[_0x2860c5(0xf0)]();_0x1f4896[_0x2860c5(0xe5)]&&_0x1c2f39['push']({..._0x1f4896,'id':_0x49d600['id'],'elo':_0x1f4896[_0x2860c5(0xf8)]||0x0,'position':_0x1f4896['position']||Number['MAX_SAFE_INTEGER']});});const _0x38261c=collection(db,_0x54c220(0x102)),_0x5e844c=await getDocs(_0x38261c),_0x44ef2d=new Map();_0x5e844c['forEach'](_0x403c8d=>{const _0x5027c2=_0x403c8d['data']();_0x5027c2['username']&&_0x44ef2d['set'](_0x5027c2['username']['toLowerCase'](),_0x5027c2);});for(const _0x4a4ef5 of _0x1c2f39){const _0x20f45a=_0x4a4ef5['username'][_0x54c220(0xe2)]();if(_0x44ef2d['has'](_0x20f45a)){const _0x5dc443=_0x44ef2d['get'](_0x20f45a);_0x5dc443[_0x54c220(0xe8)]&&(_0x4a4ef5[_0x54c220(0xe8)]=_0x5dc443['country'][_0x54c220(0xe2)]());}}const _0x461b84=_0x1c2f39[_0x54c220(0xd2)](_0x22c3dd=>_0x22c3dd['username']),_0x41a522=await fetchBatchMatchStatsD3(_0x461b84);_0x1c2f39['sort']((_0xf69f97,_0x211c2f)=>{const _0x30ecdf=_0x54c220,_0x35bd58=_0x41a522['get'](_0xf69f97[_0x30ecdf(0xe5)])?.['totalMatches']||0x0,_0x1dea68=_0x41a522[_0x30ecdf(0xe3)](_0x211c2f['username'])?.['totalMatches']||0x0;if(_0x35bd58===0x0!==(_0x1dea68===0x0))return _0x35bd58===0x0?0x1:-0x1;return(_0xf69f97['position']||0x3e7)-(_0x211c2f['position']||0x3e7);}),_0x1c2f39[_0x54c220(0xfc)]((_0x4eba83,_0x12240a)=>{_0x4eba83['position']=_0x12240a+0x1;}),playerCacheD3[_0x54c220(0xf0)]=_0x1c2f39,playerCacheD3['timestamp']=_0x3ca4df,updateLadderDisplayD3(_0x1c2f39);}catch(_0x890448){console['error']('Error\x20loading\x20D3\x20ladder:',_0x890448),_0x1a112a['innerHTML']=_0x54c220(0xfd)+_0x890448['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x561202){const _0x5c49a6=a33_0x19163b;if(!_0x561202)return 0x0;const _0x2f7908=_0x561202['toDate'](),_0x1073e4=new Date(),_0x2b5574=Math['abs'](_0x1073e4-_0x2f7908);return Math[_0x5c49a6(0xda)](_0x2b5574/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x35d988,_0x3c5be3){const _0x173c31=a33_0x19163b;try{const _0x3e65be=collection(db,_0x173c31(0xf3)),_0x891bc3=await getDocs(_0x3e65be),_0x28723c=[];_0x891bc3['forEach'](_0x1d154e=>{_0x28723c['push']({'id':_0x1d154e['id'],..._0x1d154e['data']()});});const _0x21d437=_0x28723c[_0x173c31(0xec)](_0xb6c373=>_0xb6c373['username']===_0x35d988),_0x4abd64=_0x28723c[_0x173c31(0xec)](_0x3ceefe=>_0x3ceefe['username']===_0x3c5be3);if(!_0x21d437||!_0x4abd64){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x21d437['position']>_0x4abd64['position']){const _0x3f9ca5=_0x4abd64['position'];for(const _0x4d303a of _0x28723c){_0x4d303a[_0x173c31(0xeb)]>=_0x4abd64['position']&&_0x4d303a['position']<_0x21d437['position']&&_0x4d303a['username']!==_0x35d988&&await updateDoc(doc(db,'playersD3',_0x4d303a['id']),{'position':_0x4d303a[_0x173c31(0xeb)]+0x1});}await updateDoc(doc(db,_0x173c31(0xf3),_0x21d437['id']),{'position':_0x3f9ca5});if(_0x3f9ca5===0x1){const _0xf806b=doc(db,'playersD3',_0x21d437['id']),_0x4b9235=await getDoc(_0xf806b);!_0x4b9235['data']()['firstPlaceDate']&&await updateDoc(_0xf806b,{'firstPlaceDate':Timestamp[_0x173c31(0xf4)]()});}if(_0x4abd64['position']===0x1){const _0x292394=doc(db,'playersD3',_0x4abd64['id']);await updateDoc(_0x292394,{'firstPlaceDate':null});}}}catch(_0x1c2a2c){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x1c2a2c);}}async function updateLadderDisplayD3(_0x5c7138){const _0x317dd2=a33_0x19163b;_0x5c7138['sort']((_0x5838fd,_0x2912c5)=>_0x5838fd['position']-_0x2912c5[_0x317dd2(0xeb)]);const _0x1c59c9=document['querySelector']('#ladder-d3\x20tbody');if(!_0x1c59c9)return;_0x1c59c9[_0x317dd2(0xf2)]='';const _0xda9754=_0x5c7138[_0x317dd2(0xd2)](_0xef2a3b=>_0xef2a3b['username']),_0x2b60c1=await fetchBatchMatchStatsD3(_0xda9754),_0x407a8c=document['querySelector'](_0x317dd2(0xe4));_0x407a8c[_0x317dd2(0xf2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x58fdd3=_0x5c7138['map'](_0x3d4568=>{const _0x10ec22=_0x317dd2,_0x5aa752=_0x2b60c1[_0x10ec22(0xe3)](_0x3d4568[_0x10ec22(0xe5)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x3d4568,_0x5aa752);})['join']('');_0x1c59c9['innerHTML']=_0x58fdd3,getPlayersLastEloChangesD3(_0xda9754)[_0x317dd2(0xcf)](_0x3aee51=>{const _0x3f1238=_0x317dd2,_0x30c39c=new Map();_0x1c59c9[_0x3f1238(0xed)]('tr')['forEach']((_0x581afc,_0x4f9aa3)=>{const _0x310f2d=_0x3f1238;_0x4f9aa3<_0xda9754[_0x310f2d(0xc5)]&&_0x30c39c['set'](_0xda9754[_0x4f9aa3],_0x581afc);}),_0x3aee51['forEach']((_0x3933f0,_0x4ca17d)=>{const _0x2ca44e=_0x3f1238,_0x36f0a5=_0x30c39c['get'](_0x4ca17d);if(_0x36f0a5&&_0x3933f0!==0x0){const _0x5057df=_0x36f0a5['querySelector']('td:nth-child(3)');if(_0x5057df){const _0x145a35=_0x3933f0>0x0?'+'+_0x3933f0:''+_0x3933f0,_0x328999=_0x5057df[_0x2ca44e(0xd4)]('.trend-indicator');_0x328999&&(_0x328999[_0x2ca44e(0xdb)]=_0x145a35,_0x328999[_0x2ca44e(0xf7)]['color']=_0x3933f0>0x0?'#4CAF50':'#F44336',_0x328999['style'][_0x2ca44e(0xd0)]=_0x2ca44e(0xc4),_0x328999['style'][_0x2ca44e(0xcb)]='0.85em',_0x328999['style']['display']='inline',_0x328999[_0x2ca44e(0xf7)]['visibility']='visible',_0x328999['style'][_0x2ca44e(0xc8)]='1');}}});})['catch'](_0x1e86bf=>console[_0x317dd2(0xf9)]('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x1e86bf));}async function fetchBatchMatchStatsD3(_0x4cade2){const _0xfd635b=a33_0x19163b,_0x5d9776=new Map();try{const _0x388718=collection(db,_0xfd635b(0xc9)),_0x502e1d=await getDocs(_0x388718);_0x502e1d[_0xfd635b(0xfc)](_0x5967ec=>{const _0x571b71=_0xfd635b,_0x196cf1=_0x5967ec[_0x571b71(0xf0)]();if(_0x4cade2[_0x571b71(0xc3)](_0x196cf1['winnerUsername'])){const _0x1cb1b9=_0x196cf1['winnerUsername'];!_0x5d9776[_0x571b71(0xce)](_0x1cb1b9)&&_0x5d9776['set'](_0x1cb1b9,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x148860=_0x5d9776[_0x571b71(0xe3)](_0x1cb1b9);_0x148860['wins']++,_0x148860['totalMatches']++,_0x148860[_0x571b71(0xcc)]+=parseInt(_0x196cf1['winnerScore'])||0x0,_0x148860[_0x571b71(0xe7)]+=parseInt(_0x196cf1['loserScore'])||0x0;}if(_0x4cade2['includes'](_0x196cf1['loserUsername'])){const _0x1c980a=_0x196cf1['loserUsername'];!_0x5d9776[_0x571b71(0xce)](_0x1c980a)&&_0x5d9776['set'](_0x1c980a,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x12c130=_0x5d9776['get'](_0x1c980a);_0x12c130[_0x571b71(0xd8)]++,_0x12c130[_0x571b71(0xd3)]++,_0x12c130['totalKills']+=parseInt(_0x196cf1['loserScore'])||0x0,_0x12c130['totalDeaths']+=parseInt(_0x196cf1['winnerScore'])||0x0;}}),_0x5d9776['forEach'](_0x5a7696=>{const _0xe16a44=_0xfd635b;_0x5a7696[_0xe16a44(0xd1)]=_0x5a7696['totalDeaths']>0x0?(_0x5a7696['totalKills']/_0x5a7696[_0xe16a44(0xe7)])['toFixed'](0x2):_0x5a7696['totalKills'],_0x5a7696['winRate']=_0x5a7696[_0xe16a44(0xd3)]>0x0?(_0x5a7696[_0xe16a44(0xdc)]/_0x5a7696['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0xc9ee93){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0xc9ee93);}return _0x5d9776;}function createPlayerRowD3(_0x32a25a,_0x4555fc){const _0x21f724=a33_0x19163b,_0xb69796=parseFloat(_0x32a25a['elo'])||0x0;let _0x1840d9='gray';if(_0xb69796>=0x7d0)_0x1840d9='#50C878';else{if(_0xb69796>=0x708)_0x1840d9='#FFD700';else{if(_0xb69796>=0x640)_0x1840d9='#C0C0C0';else _0xb69796>=0x578&&(_0x1840d9='#CD7F32');}}let _0x2ebffc='';return _0x32a25a['country']&&(_0x2ebffc='<img\x20src=\x22../images/flags/'+_0x32a25a['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x32a25a['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32a25a['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x32a25a['username'])+_0x21f724(0x101)+_0x1840d9+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x32a25a['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2ebffc+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x1840d9+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0xb69796+_0x21f724(0xd7)+_0x4555fc['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4555fc['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4555fc[_0x21f724(0xd8)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4555fc[_0x21f724(0xd1)]+_0x21f724(0xf6)+_0x4555fc[_0x21f724(0xde)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0x373af7){const _0x3e0409=a33_0x19163b,_0x1131da=new Map();_0x373af7['forEach'](_0x4b0ae2=>_0x1131da[_0x3e0409(0xe0)](_0x4b0ae2,0x0));try{console[_0x3e0409(0xe6)]('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x373af7);const _0x3566bd=new Map(),_0x374283=await getDocs(collection(db,'playersD3'));_0x374283[_0x3e0409(0xfc)](_0x364cbd=>{const _0x200283=_0x3e0409,_0x3e1a03=_0x364cbd[_0x200283(0xf0)]();_0x3e1a03[_0x200283(0xe5)]&&_0x3566bd['set'](_0x364cbd['id'],_0x3e1a03['username']);}),console[_0x3e0409(0xe6)]('D3:\x20Player\x20ID\x20mappings:',Array['from'](_0x3566bd[_0x3e0409(0xcd)]()));const _0x381b5c=collection(db,'eloHistoryD3'),_0x410a42=query(_0x381b5c,orderBy(_0x3e0409(0xfe),'desc'),limit(0x64)),_0x122c1a=await getDocs(_0x410a42);_0x122c1a['empty']?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console[_0x3e0409(0xe6)]('D3:\x20Found\x20'+_0x122c1a['size']+'\x20entries\x20in\x20eloHistoryD3');const _0x59fa9e=new Map();_0x122c1a['forEach'](_0x371620=>{const _0x4f545c=_0x3e0409,_0x581046=_0x371620['data']();let _0x4a85e2=null;if(_0x581046['username'])_0x4a85e2=_0x581046[_0x4f545c(0xe5)];else{if(_0x581046['playerUsername'])_0x4a85e2=_0x581046[_0x4f545c(0xc2)];else{if(_0x581046['player']&&typeof _0x581046['player']==='string')_0x4a85e2=_0x581046['player'];else{if(_0x581046[_0x4f545c(0xee)]&&_0x3566bd['has'](_0x581046[_0x4f545c(0xee)]))_0x4a85e2=_0x3566bd['get'](_0x581046['player']);else _0x581046['playerId']&&_0x3566bd['has'](_0x581046['playerId'])&&(_0x4a85e2=_0x3566bd['get'](_0x581046['playerId']));}}}(_0x581046['username']==='pilot'||_0x581046[_0x4f545c(0xc2)]===_0x4f545c(0xfb)||_0x581046['player']&&_0x3566bd['get'](_0x581046[_0x4f545c(0xee)])===_0x4f545c(0xfb))&&console['log']('D3:\x20Found\x20pilot\x20entry:',_0x581046),_0x4a85e2&&_0x373af7['includes'](_0x4a85e2)&&(!_0x59fa9e['has'](_0x4a85e2)&&_0x59fa9e['set'](_0x4a85e2,[]),_0x59fa9e['get'](_0x4a85e2)['push']({..._0x581046,'timestamp':_0x581046['timestamp']?.['seconds']||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x59fa9e[_0x3e0409(0xd6)]+'\x20players'),_0x59fa9e['forEach']((_0xff55c9,_0x351886)=>{const _0xaacd7b=_0x3e0409;if(_0xff55c9['length']>0x0){_0xff55c9[_0xaacd7b(0xea)]((_0x509474,_0x1915a7)=>_0x1915a7[_0xaacd7b(0xfe)]-_0x509474['timestamp']);const _0x38ba76=_0xff55c9['find'](_0x1ef4ed=>_0x1ef4ed['change']!==undefined||_0x1ef4ed['newElo']!==undefined&&_0x1ef4ed[_0xaacd7b(0xfa)]!==undefined);if(_0x38ba76){let _0x7acbd3;if(_0x38ba76['change']!==undefined)_0x7acbd3=_0x38ba76['change'];else _0x38ba76['newElo']!==undefined&&_0x38ba76['previousElo']!==undefined&&(_0x7acbd3=_0x38ba76['newElo']-_0x38ba76[_0xaacd7b(0xfa)]);_0x7acbd3!==undefined&&(_0x1131da[_0xaacd7b(0xe0)](_0x351886,_0x7acbd3),console['log']('D3:\x20'+_0x351886+'\x20ELO\x20change:\x20'+_0x7acbd3));}}});if(_0x59fa9e['size']===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0xffddba=collection(db,_0x3e0409(0x100)),_0x4da216=query(_0xffddba,where(_0x3e0409(0xc7),'==','D3'),orderBy('timestamp',_0x3e0409(0xd5)),limit(0x32));try{const _0x209398=await getDocs(_0x4da216);console['log']('D3:\x20Found\x20'+_0x209398['size']+'\x20fallback\x20entries'),_0x209398['forEach'](_0xfbc89f=>{const _0x56f2c1=_0x3e0409,_0x4d1378=_0xfbc89f['data']();let _0x31e6d4=_0x4d1378['username']||_0x4d1378[_0x56f2c1(0xc2)];!_0x31e6d4&&_0x4d1378['player']&&_0x3566bd[_0x56f2c1(0xce)](_0x4d1378[_0x56f2c1(0xee)])&&(_0x31e6d4=_0x3566bd['get'](_0x4d1378['player']));if(_0x31e6d4&&_0x373af7['includes'](_0x31e6d4)){const _0x4ab474=_0x4d1378['change']||(_0x4d1378[_0x56f2c1(0xca)]!==undefined&&_0x4d1378[_0x56f2c1(0xfa)]!==undefined?_0x4d1378['newElo']-_0x4d1378['previousElo']:0x0);_0x4ab474!==0x0&&(_0x1131da['set'](_0x31e6d4,_0x4ab474),console['log']('D3:\x20'+_0x31e6d4+_0x56f2c1(0xe1)+_0x4ab474));}});}catch(_0x773e0a){console['log'](_0x3e0409(0xd9),_0x773e0a);}}const _0x4ad538=Array['from'](_0x1131da['entries']())['filter'](([_0x2dba80,_0x2c51d0])=>_0x2c51d0!==0x0);console['log'](_0x3e0409(0xef),_0x4ad538);}catch(_0x1c9485){console[_0x3e0409(0xf9)]('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x1c9485);}return _0x1131da;}export{displayLadderD3,updatePlayerPositions};