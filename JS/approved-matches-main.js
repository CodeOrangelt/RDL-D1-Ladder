const a6_0x3570a4=a6_0x2a04;(function(_0x44e4a4,_0xc959cb){const _0x57e64b=a6_0x2a04,_0x2b321e=_0x44e4a4();while(!![]){try{const _0x4b1e4f=parseInt(_0x57e64b(0x1bd))/0x1+-parseInt(_0x57e64b(0x142))/0x2+-parseInt(_0x57e64b(0x18b))/0x3*(-parseInt(_0x57e64b(0x14e))/0x4)+parseInt(_0x57e64b(0x1c9))/0x5+parseInt(_0x57e64b(0x16e))/0x6*(parseInt(_0x57e64b(0x21e))/0x7)+parseInt(_0x57e64b(0x134))/0x8*(parseInt(_0x57e64b(0x19c))/0x9)+-parseInt(_0x57e64b(0x16d))/0xa;if(_0x4b1e4f===_0xc959cb)break;else _0x2b321e['push'](_0x2b321e['shift']());}catch(_0x5213b4){_0x2b321e['push'](_0x2b321e['shift']());}}}(a6_0x4fc8,0x93661));const a6_0x28cf9f=(function(){let _0x32624d=!![];return function(_0x3335ac,_0x251b2f){const _0xc75d24=_0x32624d?function(){const _0x26d9c4=a6_0x2a04;if(_0x251b2f){const _0x535147=_0x251b2f[_0x26d9c4(0x20b)](_0x3335ac,arguments);return _0x251b2f=null,_0x535147;}}:function(){};return _0x32624d=![],_0xc75d24;};}()),a6_0x1747bc=a6_0x28cf9f(this,function(){const _0x460b27=a6_0x2a04;return a6_0x1747bc[_0x460b27(0x186)]()[_0x460b27(0x1be)]('(((.+)+)+)+$')[_0x460b27(0x186)]()[_0x460b27(0x17b)](a6_0x1747bc)[_0x460b27(0x1be)](_0x460b27(0x153));});a6_0x1747bc();const a6_0x4223f1=(function(){let _0x1158c5=!![];return function(_0x42f656,_0x49bc53){const _0x43fb4a=_0x1158c5?function(){const _0x29005e=a6_0x2a04;if(_0x49bc53){const _0x204417=_0x49bc53[_0x29005e(0x20b)](_0x42f656,arguments);return _0x49bc53=null,_0x204417;}}:function(){};return _0x1158c5=![],_0x43fb4a;};}()),a6_0x4aaf02=a6_0x4223f1(this,function(){const _0x287362=a6_0x2a04;let _0x1b3781;try{const _0x19e91c=Function(_0x287362(0x176)+_0x287362(0x140)+');');_0x1b3781=_0x19e91c();}catch(_0x522b90){_0x1b3781=window;}const _0x2e118a=_0x1b3781[_0x287362(0x148)]=_0x1b3781[_0x287362(0x148)]||{},_0x1d5f9f=[_0x287362(0x147),_0x287362(0x10c),_0x287362(0xf5),_0x287362(0x170),'exception','table',_0x287362(0x198)];for(let _0x27526c=0x0;_0x27526c<_0x1d5f9f[_0x287362(0x150)];_0x27526c++){const _0x3fcf56=a6_0x4223f1[_0x287362(0x17b)][_0x287362(0x161)][_0x287362(0x237)](a6_0x4223f1),_0x44d84c=_0x1d5f9f[_0x27526c],_0x18a88d=_0x2e118a[_0x44d84c]||_0x3fcf56;_0x3fcf56[_0x287362(0x19e)]=a6_0x4223f1[_0x287362(0x237)](a6_0x4223f1),_0x3fcf56[_0x287362(0x186)]=_0x18a88d[_0x287362(0x186)]['bind'](_0x18a88d),_0x2e118a[_0x44d84c]=_0x3fcf56;}});a6_0x4aaf02();function a6_0x4fc8(){const _0x4981d7=['selectedOptions','slice','closeCommentPopupPreview','commentPopupPreview','rematch','Submitting\x20comment\x20as:','message','\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20','Unknown\x20User','\x20demo\x20links:','apply-enhanced-filters','disabled','jump','filter-subgames','active','subgames','Failed\x20to\x20parse\x20cache:','approvedAt','content','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','floor','commentAddOverlay','onclick','clear-enhanced-filters','loserSuicides','.matches-loading','weapon-imbalance','altered-powerups','key','silver','missiles-6plus','apply','Standard\x20Match','flex','badComments','getElementById','No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages','auth','toLowerCase','Today','+10','addEventListener','getItem','closeAddCommentPopup','stringify','color','gold','commentOverlayPreview','.player.winner\x20.player-score','\x20matching\x20filters','7jHAXYO','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','Submit','preventDefault','userId','mega-match','loserComment','gap','keypress','Cache\x20miss\x20for\x20page\x20','#d32f2f','createElement','max','opacity','removeChild','emerald','enhancedFilters','options','<p>','commentPopupTitlePreview','Failed\x20to\x20delete\x20comment:\x20','comment','recent-matches-preview','.matches-loading[style*=\x22color:\x20red\x22]',':</strong>\x20\x22','bind','from','stopPropagation','previewPrevPage','popup-actions','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22','Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link','info','Please\x20enter\x20a\x20demo\x20link','Comments\x20section\x20not\x20found\x20in\x20template','isLoading','Failed\x20to\x20add\x20comment:\x20','You\x20must\x20be\x20signed\x20in\x20to\x20continue','approvedMatchesD2','.player.loser\x20.player-score','click','\x20from\x20cache','desc','Loading\x20next\x20page\x20using\x20cursor','winnerOldElo','Muted.','levels','Rendering\x20page\x20','start','No\x20results\x20found\x20for\x20this\x20page','.winner-demo-link','.delete-comment-btn','.no-comments-message','totalPages','Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.','warn','preview-d3-button','div','gauss-and-mercs','.match-subgame','</div>','exists','demoDescription','</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>','justifyContent','textContent','Please\x20enter\x20a\x20comment\x20before\x20submitting','.match-date','Daz','Error\x20submitting\x20comment:','Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.','text','loserOldElo','.</div>','createdAt','cursor','loserScore','match-card-template','option','cloneNode','\x20days\x20ago','querySelector','uid','.option-content','lastVisible','2025-07-02','end','N/A','Page\x20','center','style','comment-overlay','display','insertBefore','71416CLvmKa','jump-to-page','setAttribute','.comment.winner-comment','Close','.player.winner\x20.player-suicides','trim','Failed\x20to\x20submit:\x20','className','previewCache_','.option-tab.active','loserUsername','{}.constructor(\x22return\x20this\x22)(\x20)',',\x20fetching\x20from\x20Firestore','1181252BUdVUS','href','includes','#aaa','.loser-demo-link','log','console','loserDemoLink','timestamp','...','ratting','preview-ladder-mode','132itnDcZ','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','length','commentAddPopup','<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>','(((.+)+)+)+$','winner-','reportCommentButton','\x20matches:','matchId','.jump-btn','winnerSuicides','disorientation','currentPage','winnerUsername','matchesPerPage','firstVisible','submit','toLocaleDateString','prototype','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','required','Error\x20fetching\x20comments\x20batch:','parentNode','matchComments','demoLink','data','userProfiles','Failed\x20to\x20cache\x20data:','commentMatchId','Error\x20fetching\x20','21859510oWqAGj','4824444lucwPb','filter','error','.match-demo-links','delete-comment-btn','<strong>','Error\x20fetching\x20comments:','input','return\x20(function()\x20','.match-card','.submit-comment-btn','title','Yesterday','constructor','.comments-container','closest','#808080','commentId','default','subgameType','Loading\x20first\x20page\x20from\x20Firestore','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments','Unknown','aria-label','toString','No\x20description\x20provided','dataset','Unknown\x20Map','wordCount','50205GcigoG','forEach','Anonymous','popup-btn\x20report-btn','Demo\x20link','push','mapPlayed','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','current','.popup-actions','docs','displayName','addCommentForm','trace','winnerScore','Error\x20reporting\x20comment:','classList','324sfSPvp','.match-map','__proto__','Unable\x20to\x20submit\x20-\x20system\x20not\x20ready','\x27s\x20Demo','commentText','approvedMatches','parse','Error\x20submitting:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20','backgroundColor','10px','<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20','0.6','preview-d1-button','add','querySelectorAll','Cached\x20intermediary\x20page\x20','filter-pilots','next','empty','Submitting...','join','preview-d2-button','keys','Firebase\x20not\x20initialized','#fff','currentMode','block','#50C878','filterUsername','map','S:\x20','964802eycvRr','search','toLocaleString','none','commentPopupContentPreview','blind-match','split','type','now','filter-levels','getTime','prev','3689095TYFkJY','submitComment','-10','previewNextPage','applyFilterBtn','enhanced-filter-section','hasNextPage','#FFD700','pilots','username','</small>','seconds','.match-display-wrapper','appendChild','currentMatchId','demo','Failed\x20to\x20report\x20comment:\x20','clearFilterBtn','value','.player.winner\x20.player-name','currentUser','button','innerHTML','commentUser','\x22</div>','Anonymous\x20User','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','showAddCommentPopup','setItem','Delete\x20demo','removeItem','toggle','dogfight','.comment.loser-comment','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo'];a6_0x4fc8=function(){return _0x4981d7;};return a6_0x4fc8();}import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6_0x3570a4(0x11a),'muteFromDate':new Date(a6_0x3570a4(0x12b))[a6_0x3570a4(0x1c7)]()}];function isUsernameMuted(_0x2ffa45,_0x28d8ea){const _0xe7f14f=a6_0x3570a4;if(!_0x2ffa45)return![];const _0x5eb7a0=mutedUsers['find'](_0x1f8934=>_0x1f8934[_0xe7f14f(0x1d2)]===_0x2ffa45);if(!_0x5eb7a0)return![];if(!_0x28d8ea)return!![];const _0x413cd8=_0x28d8ea instanceof Date?_0x28d8ea[_0xe7f14f(0x1c7)]():_0x28d8ea[_0xe7f14f(0x1d4)]?_0x28d8ea[_0xe7f14f(0x1d4)]*0x3e8:Date[_0xe7f14f(0x1c5)]();return _0x413cd8>=_0x5eb7a0['muteFromDate'];}function filterComment(_0x2d8747,_0xa00260,_0x4d6683){const _0x469639=a6_0x3570a4;if(!_0x2d8747)return'-';if(isUsernameMuted(_0xa00260,_0x4d6683))return _0x469639(0x102);return _0x2d8747;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x3dcc87,_0x2df9e2,_0x122199){const _0x15f474=a6_0x3570a4,_0x2933b2='u:'+(_0x122199[_0x15f474(0x1ba)]||'');return _0x15f474(0x13d)+_0x3dcc87+'_p'+_0x2df9e2+'_'+_0x2933b2;}function getCachedPage(_0x5b2e1e){const _0x2c6af8=a6_0x3570a4,_0x1bcc33=sessionStorage[_0x2c6af8(0x216)](_0x5b2e1e);if(_0x1bcc33)try{return JSON[_0x2c6af8(0x1a3)](_0x1bcc33);}catch(_0x48e166){return console[_0x2c6af8(0x170)](_0x2c6af8(0x1fc),_0x48e166),sessionStorage[_0x2c6af8(0x1e7)](_0x5b2e1e),null;}return null;}function cachePage(_0x444f61,_0x3f3ea7){const _0x2f0761=a6_0x3570a4;try{sessionStorage[_0x2f0761(0x1e5)](_0x444f61,JSON[_0x2f0761(0x218)](_0x3f3ea7));}catch(_0x128467){console[_0x2f0761(0x170)](_0x2f0761(0x16a),_0x128467);}}function getEloColor(_0x30b5d7){const _0xb304d7=a6_0x3570a4,_0x2ceb66=Number(_0x30b5d7);if(_0x2ceb66>=0x7d0)return _0xb304d7(0x1b9);else{if(_0x2ceb66>=0x708)return _0xb304d7(0x1d0);else{if(_0x2ceb66>=0x640)return'#b9f1fc';else{if(_0x2ceb66>=0x578)return'#CD7F32';else return _0xb304d7(0x17e);}}}}function formatDate(_0x56c49b,_0x17f44f=![]){const _0x1efa08=a6_0x3570a4;if(!_0x56c49b||!_0x56c49b[_0x1efa08(0x1d4)])return _0x1efa08(0x12d);const _0x5b8a95=new Date(_0x56c49b[_0x1efa08(0x1d4)]*0x3e8);return _0x17f44f?_0x5b8a95[_0x1efa08(0x1bf)]():_0x5b8a95[_0x1efa08(0x160)]();}function truncateComment(_0x4b49e4,_0x2cb9dd=0x1e){const _0x118a9d=a6_0x3570a4;if(!_0x4b49e4)return'-';if(_0x4b49e4['length']<=_0x2cb9dd)return _0x4b49e4;return _0x4b49e4['substring'](0x0,_0x2cb9dd)+_0x118a9d(0x14b);}function formatCommentDate(_0x4f3375){const _0x341e48=a6_0x3570a4;if(!_0x4f3375||!_0x4f3375[_0x341e48(0x1d4)])return'';const _0x4a6d1f=new Date(_0x4f3375[_0x341e48(0x1d4)]*0x3e8),_0x35f297=new Date(),_0x228ee1=Math['abs'](_0x35f297-_0x4a6d1f),_0x11d5b4=Math[_0x341e48(0x200)](_0x228ee1/(0x3e8*0x3c*0x3c*0x18));if(_0x11d5b4===0x0)return _0x341e48(0x213);else{if(_0x11d5b4===0x1)return _0x341e48(0x17a);else return _0x11d5b4<0x7?_0x11d5b4+_0x341e48(0x126):_0x4a6d1f['toLocaleDateString']();}}function setLoadingIndicator(_0x4c740f){const _0x207ee1=a6_0x3570a4,_0x1d25e6=document['getElementById']('loading-indicator');if(_0x1d25e6)_0x1d25e6['style'][_0x207ee1(0x132)]=_0x4c740f?'block':_0x207ee1(0x1c0);}function a6_0x2a04(_0x29aded,_0x2bd099){const _0x1ce25d=a6_0x4fc8();return a6_0x2a04=function(_0x4aaf02,_0x4223f1){_0x4aaf02=_0x4aaf02-0xef;let _0x2c06ff=_0x1ce25d[_0x4aaf02];return _0x2c06ff;},a6_0x2a04(_0x29aded,_0x2bd099);}export function updatePreviewLadderModeUI(){const _0x462afd=a6_0x3570a4,_0x28780f=document[_0x462afd(0x20f)](_0x462afd(0x14d)),_0x4eb19e=document[_0x462afd(0x20f)](_0x462afd(0x1aa)),_0x5de070=document[_0x462afd(0x20f)]('preview-d2-button'),_0x1c9b6d=document['getElementById'](_0x462afd(0x10d));if(_0x28780f)_0x28780f[_0x462afd(0x117)]=previewState[_0x462afd(0x1b7)];if(_0x4eb19e)_0x4eb19e[_0x462afd(0x19b)][_0x462afd(0x1e8)](_0x462afd(0x1fa),previewState[_0x462afd(0x1b7)]==='D1');if(_0x5de070)_0x5de070[_0x462afd(0x19b)]['toggle']('active',previewState[_0x462afd(0x1b7)]==='D2');if(_0x1c9b6d)_0x1c9b6d[_0x462afd(0x19b)][_0x462afd(0x1e8)](_0x462afd(0x1fa),previewState[_0x462afd(0x1b7)]==='D3');}function updatePreviewPaginationControls(_0x3dda48){const _0xf09eaa=a6_0x3570a4,_0xaddf88=document[_0xf09eaa(0x20f)]('previewPrevPage'),_0x3b6322=document[_0xf09eaa(0x20f)](_0xf09eaa(0x1cc)),_0xf5a367=document[_0xf09eaa(0x20f)]('previewPageInfo');if(!_0xaddf88||!_0x3b6322||!_0xf5a367)return;_0xf5a367[_0xf09eaa(0x117)]=_0xf09eaa(0x12e)+previewState[_0xf09eaa(0x15b)],_0xaddf88[_0xf09eaa(0x1f7)]=previewState[_0xf09eaa(0x15b)]<=0x1,_0x3b6322['disabled']=!_0x3dda48;}function setPreviewLoadingState(_0x37f60f){const _0x15d081=a6_0x3570a4;previewState['isLoading']=_0x37f60f,setLoadingIndicator(_0x37f60f);const _0x3573fb=document['getElementById'](_0x15d081(0x234)),_0x437fb0=_0x3573fb?_0x3573fb['querySelector'](_0x15d081(0x205)):null,_0x230a4b=document['getElementById'](_0x15d081(0xf1)),_0x30a33f=document[_0x15d081(0x20f)](_0x15d081(0x1cc)),_0x12941c=document[_0x15d081(0x20f)](_0x15d081(0x1aa)),_0x1494ba=document[_0x15d081(0x20f)](_0x15d081(0x1b3)),_0x3526f1=document[_0x15d081(0x20f)](_0x15d081(0x1cd)),_0x234234=document['getElementById'](_0x15d081(0x1da));if(_0x437fb0&&!_0x37f60f)_0x437fb0[_0x15d081(0x130)][_0x15d081(0x132)]=_0x15d081(0x1c0);else _0x437fb0&&_0x37f60f&&(_0x437fb0[_0x15d081(0x130)][_0x15d081(0x132)]=_0x15d081(0x1b8));!_0x37f60f&&_0x3573fb&&!_0x3573fb[_0x15d081(0x127)](_0x15d081(0x177))&&!_0x3573fb[_0x15d081(0x127)](_0x15d081(0x235))&&(_0x3573fb[_0x15d081(0x1df)]=_0x15d081(0x21f)+(previewState[_0x15d081(0x1ba)]?_0x15d081(0x21d):'')+'.</div>');if(_0x230a4b)_0x230a4b[_0x15d081(0x1f7)]=_0x37f60f||previewState[_0x15d081(0x15b)]<=0x1;if(_0x30a33f)_0x30a33f['disabled']=_0x37f60f;if(_0x12941c)_0x12941c[_0x15d081(0x1f7)]=_0x37f60f;if(_0x1494ba)_0x1494ba[_0x15d081(0x1f7)]=_0x37f60f;if(_0x3526f1)_0x3526f1[_0x15d081(0x1f7)]=_0x37f60f;if(_0x234234)_0x234234[_0x15d081(0x1f7)]=_0x37f60f;}function applyClientFilters(_0x13ad04){const _0x39c818=a6_0x3570a4;if(!previewState[_0x39c818(0x1ba)])return _0x13ad04;const _0x4db200=previewState[_0x39c818(0x1ba)][_0x39c818(0x212)]();return _0x13ad04['filter'](_0x1d264b=>{const _0x14c1e8=_0x39c818,_0x3fe5bd=(_0x1d264b[_0x14c1e8(0x15c)]||'')[_0x14c1e8(0x212)](),_0x4dcba=(_0x1d264b[_0x14c1e8(0x13f)]||'')[_0x14c1e8(0x212)]();return _0x3fe5bd[_0x14c1e8(0x144)](_0x4db200)||_0x4dcba['includes'](_0x4db200);});}function applyEnhancedClientFilters(_0x405665){const _0x5ded86=a6_0x3570a4;if(!hasEnhancedFilters())return _0x405665;return _0x405665[_0x5ded86(0x16f)](_0x1e99af=>{const _0x28f87e=_0x5ded86;if(previewState['enhancedFilters']['pilots']){const _0x511a4d=previewState[_0x28f87e(0x22e)][_0x28f87e(0x1d1)][_0x28f87e(0x212)](),_0x314ed8=(_0x1e99af['winnerUsername']||'')['toLowerCase'](),_0x49d3f1=(_0x1e99af[_0x28f87e(0x13f)]||'')[_0x28f87e(0x212)]();if(!_0x314ed8[_0x28f87e(0x144)](_0x511a4d)&&!_0x49d3f1[_0x28f87e(0x144)](_0x511a4d))return![];}if(previewState[_0x28f87e(0x22e)]['levels']){const _0x4ed4f3=previewState['enhancedFilters'][_0x28f87e(0x103)][_0x28f87e(0x212)](),_0x198138=(_0x1e99af[_0x28f87e(0x191)]||'')['toLowerCase']();if(!_0x198138['includes'](_0x4ed4f3))return![];}if(previewState['enhancedFilters'][_0x28f87e(0x1fb)][_0x28f87e(0x150)]>0x0){const _0x809138=_0x1e99af[_0x28f87e(0x181)]||_0x28f87e(0x20c);if(!previewState[_0x28f87e(0x22e)]['subgames'][_0x28f87e(0x144)](_0x809138))return![];}return!![];});}function hasEnhancedFilters(){const _0x1cee03=a6_0x3570a4;return previewState[_0x1cee03(0x22e)][_0x1cee03(0x1d1)]||previewState[_0x1cee03(0x22e)]['levels']||previewState[_0x1cee03(0x22e)][_0x1cee03(0x1fb)]['length']>0x0;}function clearEnhancedFilters(){const _0x34f70e=a6_0x3570a4;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById'](_0x34f70e(0x1ae))[_0x34f70e(0x1db)]='',document[_0x34f70e(0x20f)](_0x34f70e(0x1c6))[_0x34f70e(0x1db)]='';const _0x446cb1=document[_0x34f70e(0x20f)](_0x34f70e(0x1f9));for(let _0x2d6278 of _0x446cb1[_0x34f70e(0x22f)]){_0x2d6278['selected']=![];}}function jumpToPage(_0xa7ff44){const _0x56abfd=a6_0x3570a4,_0x3a189f=document[_0x56abfd(0x20f)](_0x56abfd(0x135)),_0x2a6679=previewState['currentPage'];let _0x41fc26=_0x2a6679;switch(_0xa7ff44){case _0x56abfd(0x105):_0x41fc26=0x1;break;case _0x56abfd(0x12c):_0x41fc26=Math[_0x56abfd(0x22a)](_0x2a6679+0xa,previewState[_0x56abfd(0x10a)]||_0x2a6679+0xa);break;case'+1':_0x41fc26=_0x2a6679+0x1;break;case'+5':_0x41fc26=_0x2a6679+0x5;break;case _0x56abfd(0x214):_0x41fc26=_0x2a6679+0xa;break;case'-1':_0x41fc26=Math[_0x56abfd(0x22a)](0x1,_0x2a6679-0x1);break;case'-5':_0x41fc26=Math[_0x56abfd(0x22a)](0x1,_0x2a6679-0x5);break;case _0x56abfd(0x1cb):_0x41fc26=Math[_0x56abfd(0x22a)](0x1,_0x2a6679-0xa);break;case'input':const _0x14de86=parseInt(_0x3a189f[_0x56abfd(0x1db)]);_0x14de86&&_0x14de86>0x0&&(_0x41fc26=_0x14de86,_0x3a189f[_0x56abfd(0x1db)]='');break;}_0x41fc26!==_0x2a6679&&_0x41fc26>0x0&&(previewState[_0x56abfd(0x15b)]=_0x41fc26,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x3733ce='current'){const _0x487dd4=a6_0x3570a4,_0x299a1a=document['getElementById'](_0x487dd4(0x234)),_0x2dc073=document[_0x487dd4(0x20f)](_0x487dd4(0x123));if(previewState[_0x487dd4(0xf8)]||!_0x299a1a||!_0x2dc073)return;_0x3733ce===_0x487dd4(0x193)&&(console[_0x487dd4(0x147)]('Clearing\x20cache\x20for\x20refresh/reset'),Object[_0x487dd4(0x1b4)](sessionStorage)[_0x487dd4(0x18c)](_0x432237=>{_0x432237['includes']('previewCache_'+previewState['currentMode'])&&sessionStorage['removeItem'](_0x432237);}));let _0x12dc1d=previewState['currentPage'];if(_0x3733ce===_0x487dd4(0x1af))_0x12dc1d++;else{if(_0x3733ce===_0x487dd4(0x1c8))_0x12dc1d--;else _0x3733ce==='current'&&(_0x12dc1d=0x1,previewState[_0x487dd4(0x15e)]=null,previewState[_0x487dd4(0x12a)]=null);}if(_0x12dc1d<0x1)_0x12dc1d=0x1;const _0x2e3c65=previewState[_0x487dd4(0x15b)];previewState[_0x487dd4(0x15b)]=_0x12dc1d,updatePreviewPaginationControls(!![]);const _0x194959={'filterUsername':previewState['filterUsername']},_0x310393=getCacheKey(previewState[_0x487dd4(0x1b7)],_0x12dc1d,_0x194959),_0x15daed=_0x3733ce!==_0x487dd4(0x193)?getCachedPage(_0x310393):null;if(_0x15daed){console[_0x487dd4(0x147)](_0x487dd4(0x104)+_0x12dc1d+_0x487dd4(0xfe)),setPreviewLoadingState(!![]),renderMatchCards(_0x15daed['docsData']),updatePreviewPaginationControls(_0x15daed[_0x487dd4(0x1cf)]),setPreviewLoadingState(![]);return;}console[_0x487dd4(0x147)](_0x487dd4(0x227)+_0x12dc1d+_0x487dd4(0x141)),setPreviewLoadingState(!![]),_0x299a1a['innerHTML']=_0x487dd4(0x152);const _0x2b5377=previewState[_0x487dd4(0x1b7)]==='D1'?_0x487dd4(0x1a2):previewState[_0x487dd4(0x1b7)]==='D2'?_0x487dd4(0xfb):'approvedMatchesD3',_0x24cd35=previewState[_0x487dd4(0x1b7)]==='D1'?_0x487dd4(0x120):_0x487dd4(0x1fd);try{const _0x1785b1=collection(window['db'],_0x2b5377);let _0x2ff4b0=[orderBy(_0x24cd35,_0x487dd4(0xff))];if(_0x12dc1d===0x1)console[_0x487dd4(0x147)](_0x487dd4(0x182)),_0x2ff4b0[_0x487dd4(0x190)](limit(previewState[_0x487dd4(0x15d)]));else{if(_0x3733ce===_0x487dd4(0x1af)&&previewState[_0x487dd4(0x12a)])console[_0x487dd4(0x147)](_0x487dd4(0x100)),_0x2ff4b0[_0x487dd4(0x190)](startAfter(previewState['lastVisible'])),_0x2ff4b0[_0x487dd4(0x190)](limit(previewState[_0x487dd4(0x15d)]));else{console[_0x487dd4(0x147)](_0x487dd4(0x210));const _0x40b657=_0x12dc1d*previewState[_0x487dd4(0x15d)];_0x2ff4b0['push'](limit(_0x40b657));}}const _0x35e10e=query(_0x1785b1,..._0x2ff4b0),_0xff28f1=await getDocs(_0x35e10e);let _0x4d7f02=_0xff28f1[_0x487dd4(0x195)];if(_0x12dc1d>0x1&&_0x3733ce!==_0x487dd4(0x1af)){const _0x4d99ea=(_0x12dc1d-0x1)*previewState[_0x487dd4(0x15d)];_0x4d7f02=_0x4d7f02[_0x487dd4(0x1ed)](_0x4d99ea,_0x4d99ea+previewState[_0x487dd4(0x15d)]);}if(_0x4d7f02[_0x487dd4(0x150)]===0x0){console[_0x487dd4(0x147)](_0x487dd4(0x106));_0x3733ce===_0x487dd4(0x1af)&&(previewState[_0x487dd4(0x15b)]=_0x2e3c65,updatePreviewPaginationControls(![]));_0x299a1a[_0x487dd4(0x1df)]='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x4d7f02[0x0],previewState['lastVisible']=_0x4d7f02[_0x4d7f02[_0x487dd4(0x150)]-0x1];const _0x1c1757=_0x4d7f02[_0x487dd4(0x1bb)](_0x3911ea=>({'id':_0x3911ea['id'],..._0x3911ea[_0x487dd4(0x168)]()}));let _0x49c40c=![];if(_0x4d7f02[_0x487dd4(0x150)]===previewState[_0x487dd4(0x15d)]){const _0xb05453=query(_0x1785b1,orderBy(_0x24cd35,_0x487dd4(0xff)),startAfter(previewState[_0x487dd4(0x12a)]),limit(0x1)),_0x3981a4=await getDocs(_0xb05453);_0x49c40c=!_0x3981a4[_0x487dd4(0x1b0)];}const _0x283ce2=applyClientFilters(_0x1c1757),_0x2c5bcd={'docsData':_0x1c1757,'hasNextPage':_0x49c40c};cachePage(getCacheKey(previewState[_0x487dd4(0x1b7)],previewState[_0x487dd4(0x15b)],_0x194959),_0x2c5bcd);if(_0x12dc1d>0x1&&_0x3733ce!==_0x487dd4(0x1af))for(let _0x1f8ee9=0x1;_0x1f8ee9<_0x12dc1d;_0x1f8ee9++){const _0x5bb991=(_0x1f8ee9-0x1)*previewState[_0x487dd4(0x15d)],_0x124d33=_0x5bb991+previewState[_0x487dd4(0x15d)],_0xf2f9f7=_0xff28f1[_0x487dd4(0x195)][_0x487dd4(0x1ed)](_0x5bb991,_0x124d33);if(_0xf2f9f7[_0x487dd4(0x150)]>0x0){const _0x204cab=_0xf2f9f7[_0x487dd4(0x1bb)](_0x3cf100=>({'id':_0x3cf100['id'],..._0x3cf100['data']()})),_0x3e4303=!![];cachePage(getCacheKey(previewState[_0x487dd4(0x1b7)],_0x1f8ee9,_0x194959),{'docsData':_0x204cab,'hasNextPage':_0x3e4303}),console[_0x487dd4(0x147)](_0x487dd4(0x1ad)+_0x1f8ee9);}}_0x283ce2['length']===0x0&&previewState[_0x487dd4(0x1ba)]?_0x299a1a['innerHTML']=_0x487dd4(0xf3)+previewState[_0x487dd4(0x1ba)]+_0x487dd4(0x1e1):renderMatchCards(_0x283ce2),updatePreviewPaginationControls(_0x49c40c);}catch(_0x4ec380){console['error'](_0x487dd4(0x16c)+previewState[_0x487dd4(0x1b7)]+_0x487dd4(0x156),_0x4ec380),_0x299a1a[_0x487dd4(0x1df)]=_0x487dd4(0x1a8)+_0x4ec380['message']+_0x487dd4(0x111),updatePreviewPaginationControls(![]),previewState[_0x487dd4(0x15b)]=_0x2e3c65;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x197acd){const _0x4f9c73=a6_0x3570a4,_0x17f42e=document['getElementById']('recent-matches-preview'),_0x435948=document[_0x4f9c73(0x20f)]('match-card-template');if(!_0x17f42e||!_0x435948)return;!_0x17f42e[_0x4f9c73(0x127)](_0x4f9c73(0x235))&&(_0x17f42e['innerHTML']='');if(!_0x197acd||_0x197acd[_0x4f9c73(0x150)]===0x0){if(!_0x17f42e[_0x4f9c73(0x127)]('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x37afc9=hasEnhancedFilters()?_0x4f9c73(0x21d):previewState[_0x4f9c73(0x1ba)]?'\x20matching\x20filters':'';_0x17f42e[_0x4f9c73(0x1df)]=_0x4f9c73(0x21f)+_0x37afc9+_0x4f9c73(0x11f);}return;}const _0x4bf584=applyEnhancedClientFilters(_0x197acd);if(_0x4bf584[_0x4f9c73(0x150)]===0x0){_0x17f42e[_0x4f9c73(0x1df)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x2c5eca=_0x4bf584[_0x4f9c73(0x1bb)](_0x1c14ba=>getAllCommentsForMatch(_0x1c14ba['id']));let _0x3cc4bc=[];try{_0x3cc4bc=await Promise['all'](_0x2c5eca);}catch(_0x228626){console['error'](_0x4f9c73(0x164),_0x228626),_0x3cc4bc=_0x4bf584[_0x4f9c73(0x1bb)](()=>[]);}const _0x3caa86={};_0x3cc4bc['forEach']((_0x58ecb4,_0x225e77)=>{_0x3caa86[_0x4bf584[_0x225e77]['id']]=_0x58ecb4||[];}),_0x4bf584[_0x4f9c73(0x18c)](_0x274bac=>{const _0x1e88fe=_0x4f9c73,_0xce97e7=_0x435948[_0x1e88fe(0x1fe)][_0x1e88fe(0x125)](!![]),_0x2f4a34=_0xce97e7[_0x1e88fe(0x127)](_0x1e88fe(0x1d5)),_0x1f4d8d=_0xce97e7[_0x1e88fe(0x127)](_0x1e88fe(0x177)),_0x5bb429=getEloRankClass(_0x274bac[_0x1e88fe(0x101)]);_0x1f4d8d[_0x1e88fe(0x19b)][_0x1e88fe(0x1ab)](_0x1e88fe(0x154)+_0x5bb429),_0x1f4d8d['querySelector'](_0x1e88fe(0x19d))[_0x1e88fe(0x117)]=_0x274bac[_0x1e88fe(0x191)]||_0x1e88fe(0x189),_0x1f4d8d['querySelector'](_0x1e88fe(0x119))[_0x1e88fe(0x117)]=formatDate(_0x274bac[_0x1e88fe(0x1fd)]||_0x274bac[_0x1e88fe(0x120)]);const _0x4660a0=_0x1f4d8d[_0x1e88fe(0x127)](_0x1e88fe(0x1dc));_0x4660a0[_0x1e88fe(0x117)]=_0x274bac[_0x1e88fe(0x15c)]||_0x1e88fe(0x184),_0x4660a0[_0x1e88fe(0x130)][_0x1e88fe(0x219)]=getEloColor(_0x274bac[_0x1e88fe(0x101)]),_0x1f4d8d[_0x1e88fe(0x127)](_0x1e88fe(0x21c))[_0x1e88fe(0x117)]=_0x274bac[_0x1e88fe(0x199)]??0x0;const _0xb1cb95=_0x1f4d8d[_0x1e88fe(0x127)](_0x1e88fe(0x139)),_0x1090a8=_0x274bac[_0x1e88fe(0x159)]||0x0;_0xb1cb95[_0x1e88fe(0x117)]='S:\x20'+_0x1090a8;const _0x4ce88e=_0x1f4d8d[_0x1e88fe(0x127)]('.player.loser\x20.player-name');_0x4ce88e[_0x1e88fe(0x117)]=_0x274bac[_0x1e88fe(0x13f)]||'Unknown',_0x4ce88e[_0x1e88fe(0x130)][_0x1e88fe(0x219)]=getEloColor(_0x274bac[_0x1e88fe(0x11e)]),_0x1f4d8d['querySelector'](_0x1e88fe(0xfc))[_0x1e88fe(0x117)]=_0x274bac[_0x1e88fe(0x122)]??0x0;const _0x3245ae=_0x1f4d8d[_0x1e88fe(0x127)]('.player.loser\x20.player-suicides'),_0x24c5dd=_0x274bac[_0x1e88fe(0x204)]||0x0;_0x3245ae[_0x1e88fe(0x117)]=_0x1e88fe(0x1bc)+_0x24c5dd;const _0x5e1d1b=_0x1f4d8d[_0x1e88fe(0x127)](_0x1e88fe(0x110));if(_0x5e1d1b){if(_0x274bac[_0x1e88fe(0x181)]&&_0x274bac[_0x1e88fe(0x181)][_0x1e88fe(0x13a)]()!==''){_0x5e1d1b['textContent']=_0x274bac['subgameType'],_0x5e1d1b['style'][_0x1e88fe(0x132)]=_0x1e88fe(0x1b8);const _0x2fca8e=getSubgameClass(_0x274bac[_0x1e88fe(0x181)]);_0x2fca8e&&_0x5e1d1b['classList'][_0x1e88fe(0x1ab)](_0x2fca8e);}else _0x5e1d1b[_0x1e88fe(0x117)]=_0x1e88fe(0x20c),_0x5e1d1b[_0x1e88fe(0x130)][_0x1e88fe(0x132)]=_0x1e88fe(0x1b8),_0x5e1d1b[_0x1e88fe(0x130)][_0x1e88fe(0x22b)]=_0x1e88fe(0x1a9);}const _0xfa132c=_0x1f4d8d[_0x1e88fe(0x127)](_0x1e88fe(0x137)),_0x4f2d8f=_0x1f4d8d['querySelector'](_0x1e88fe(0x1ea)),_0x14e513=_0x274bac['winnerComment']||'',_0x5d0ae9=_0x274bac[_0x1e88fe(0x224)]||'',_0x18916d=_0x274bac[_0x1e88fe(0x1fd)]||_0x274bac[_0x1e88fe(0x120)],_0x730896=filterComment(_0x14e513,_0x274bac[_0x1e88fe(0x15c)],_0x18916d),_0x499dd7=filterComment(_0x5d0ae9,_0x274bac['loserUsername'],_0x18916d);_0xfa132c[_0x1e88fe(0x117)]='\x22'+truncateComment(_0x14e513)+'\x22',_0x4f2d8f[_0x1e88fe(0x117)]='\x22'+truncateComment(_0x5d0ae9)+'\x22';_0x14e513&&!isUsernameMuted(_0x274bac[_0x1e88fe(0x15c)],_0x18916d)?_0xfa132c[_0x1e88fe(0x202)]=()=>showPreviewCommentPopup(_0x730896,_0x274bac[_0x1e88fe(0x15c)]||'Winner',getEloColor(_0x274bac[_0x1e88fe(0x101)])):(_0xfa132c[_0x1e88fe(0x117)]=_0x730896==='Muted.'?'Muted.':'-',_0xfa132c[_0x1e88fe(0x130)][_0x1e88fe(0x121)]=_0x1e88fe(0x180),_0xfa132c[_0x1e88fe(0x202)]=null);_0x5d0ae9&&!isUsernameMuted(_0x274bac[_0x1e88fe(0x13f)])?_0x4f2d8f['onclick']=()=>showPreviewCommentPopup(_0x499dd7,_0x274bac[_0x1e88fe(0x13f)]||'Loser',getEloColor(_0x274bac[_0x1e88fe(0x11e)])):(_0x4f2d8f[_0x1e88fe(0x117)]=_0x499dd7===_0x1e88fe(0x102)?'Muted.':'-',_0x4f2d8f[_0x1e88fe(0x130)][_0x1e88fe(0x121)]='default',_0x4f2d8f['onclick']=null);const _0x475971=_0x2f4a34?.[_0x1e88fe(0x127)]('.community-comments-section');if(!_0x475971)console[_0x1e88fe(0x10c)](_0x1e88fe(0xf7));else{const _0x35556b=_0x475971[_0x1e88fe(0x127)](_0x1e88fe(0x17c)),_0x2d5b1d=_0x35556b?.[_0x1e88fe(0x127)]('.no-comments-message'),_0xb616c2=_0x475971[_0x1e88fe(0x127)]('.add-comment-btn');if(_0x35556b){while(_0x35556b['firstChild']&&_0x35556b['firstChild']!==_0x2d5b1d){_0x35556b[_0x1e88fe(0x22c)](_0x35556b['firstChild']);}_0xb616c2&&_0xb616c2[_0x1e88fe(0x215)](_0x1e88fe(0xfd),()=>{showAddCommentPopup(_0x274bac['id']);});const _0x46c0e3=_0x3caa86[_0x274bac['id']]||[];if(_0x46c0e3[_0x1e88fe(0x150)]>0x0){if(_0x2d5b1d)_0x2d5b1d[_0x1e88fe(0x130)]['display']=_0x1e88fe(0x1c0);const _0x1a3e13=(_0x1facbe,_0x247c10)=>{const _0x4c76de=_0x1e88fe,_0x225bad=_0x1facbe[_0x4c76de(0x1c3)]('\x20');if(_0x225bad['length']<=_0x247c10)return _0x1facbe;return _0x225bad[_0x4c76de(0x1ed)](0x0,_0x247c10)[_0x4c76de(0x1b2)]('\x20')+_0x4c76de(0x14b);};_0x46c0e3['forEach'](_0x585e1a=>{const _0x183f1f=_0x1e88fe,_0x49592f=document['createElement']('div');if(_0x585e1a[_0x183f1f(0x1c4)]===_0x183f1f(0x1d8)){_0x49592f[_0x183f1f(0x13c)]='demo-link',_0x49592f['innerHTML']=_0x183f1f(0x162)+_0x585e1a[_0x183f1f(0x167)]+_0x183f1f(0x1f3)+_0x585e1a[_0x183f1f(0x1d2)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x585e1a['description']||_0x183f1f(0x187))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x467e7d=window[_0x183f1f(0x211)][_0x183f1f(0x1dd)],_0x40ce5d=_0x467e7d&&_0x585e1a[_0x183f1f(0x222)]===_0x467e7d[_0x183f1f(0x128)];if(_0x40ce5d){const _0x502995=document['createElement']('button');_0x502995['className']=_0x183f1f(0x172),_0x502995['innerHTML']='×',_0x502995[_0x183f1f(0x136)](_0x183f1f(0x185),_0x183f1f(0x1e6)),_0x502995[_0x183f1f(0x215)]('click',_0x7e80f9=>{const _0x4cda8c=_0x183f1f;_0x7e80f9[_0x4cda8c(0x221)](),_0x7e80f9[_0x4cda8c(0xf0)](),deleteComment(_0x585e1a['id'],_0x49592f);}),_0x49592f[_0x183f1f(0x1d6)](_0x502995);}}else{_0x49592f[_0x183f1f(0x13c)]='comment-item';const _0x5c81ef=isUsernameMuted(_0x585e1a[_0x183f1f(0x1d2)],_0x585e1a[_0x183f1f(0x14a)]),_0xe9512b=_0x5c81ef?_0x183f1f(0x102):_0x1a3e13(_0x585e1a[_0x183f1f(0x11d)]||'',0xf),_0x20d467=_0x585e1a['username']||'Anonymous',_0xcff36b=window[_0x183f1f(0x211)][_0x183f1f(0x1dd)],_0x3d6eaa=_0xcff36b&&_0x585e1a[_0x183f1f(0x222)]===_0xcff36b[_0x183f1f(0x128)];let _0x105581='';_0x3d6eaa&&(_0x105581=_0x183f1f(0x115));_0x49592f[_0x183f1f(0x1df)]=_0x105581+_0x183f1f(0x173)+_0x20d467+_0x183f1f(0x236)+_0xe9512b+'\x22';if(_0x3d6eaa){const _0x53b40a=_0x49592f['querySelector'](_0x183f1f(0x108));_0x53b40a&&_0x53b40a[_0x183f1f(0x215)](_0x183f1f(0xfd),_0x520b01=>{const _0x5681fe=_0x183f1f;_0x520b01[_0x5681fe(0xf0)](),deleteComment(_0x585e1a['id'],_0x49592f);});}!_0x5c81ef?_0x49592f[_0x183f1f(0x215)](_0x183f1f(0xfd),()=>{showFullCommentLightbox(_0x585e1a);}):_0x49592f['style'][_0x183f1f(0x121)]=_0x183f1f(0x180);}_0x35556b[_0x183f1f(0x133)](_0x49592f,_0x35556b['firstChild']);});}else{if(_0x2d5b1d)_0x2d5b1d[_0x1e88fe(0x130)][_0x1e88fe(0x132)]=_0x1e88fe(0x1b8);}}}const _0x167cb5=_0x1f4d8d[_0x1e88fe(0x127)](_0x1e88fe(0x171));if(_0x167cb5){const _0x6fc39f=_0x1f4d8d[_0x1e88fe(0x127)](_0x1e88fe(0x107)),_0x511b27=_0x1f4d8d['querySelector'](_0x1e88fe(0x146)),_0x65d1ce=_0x274bac['winnerDemoLink']||null,_0x3ea95c=_0x274bac[_0x1e88fe(0x149)]||_0x274bac['demoLink']||null;console[_0x1e88fe(0x147)]('Match\x20'+_0x274bac['id']+_0x1e88fe(0x1f5),{'winner':_0x65d1ce,'loser':_0x3ea95c}),_0x6fc39f&&(_0x65d1ce?(_0x6fc39f[_0x1e88fe(0x143)]=_0x65d1ce,_0x6fc39f[_0x1e88fe(0x130)]['display']=_0x1e88fe(0x20d),_0x6fc39f[_0x1e88fe(0x179)]=_0x274bac[_0x1e88fe(0x15c)]+_0x1e88fe(0x1a0)):_0x6fc39f[_0x1e88fe(0x130)]['display']=_0x1e88fe(0x1c0)),_0x511b27&&(_0x3ea95c?(_0x511b27[_0x1e88fe(0x143)]=_0x3ea95c,_0x511b27[_0x1e88fe(0x130)]['display']=_0x1e88fe(0x20d),_0x511b27[_0x1e88fe(0x179)]=_0x274bac[_0x1e88fe(0x13f)]+_0x1e88fe(0x1a0)):_0x511b27[_0x1e88fe(0x130)][_0x1e88fe(0x132)]=_0x1e88fe(0x1c0)),_0x65d1ce&&_0x6fc39f||_0x3ea95c&&_0x511b27?_0x167cb5['style'][_0x1e88fe(0x132)]=_0x1e88fe(0x20d):_0x167cb5[_0x1e88fe(0x130)][_0x1e88fe(0x132)]=_0x1e88fe(0x1c0);}_0x17f42e[_0x1e88fe(0x1d6)](_0xce97e7);});}function getSubgameClass(_0x20dc76){const _0x15c1c4=a6_0x3570a4,_0x1ef5b4={'Fusion\x20Match':'fusion-match','≥6\x20Missiles':_0x15c1c4(0x20a),'≥6\x20missiles':_0x15c1c4(0x20a),'Weapon\x20Imbalance':_0x15c1c4(0x206),'Blind\x20Match':_0x15c1c4(0x1c2),'Rematch':_0x15c1c4(0x1f0),'Disorientation':_0x15c1c4(0x15a),'Ratting':_0x15c1c4(0x14c),'Altered\x20Powerups':_0x15c1c4(0x207),'Mega\x20Match':_0x15c1c4(0x223),'Dogfight':_0x15c1c4(0x1e9),'Gauss\x20and\x20Mercs':_0x15c1c4(0x10f)};return _0x1ef5b4[_0x20dc76]||'';}async function deleteComment(_0x484ae8,_0x52d0b1){const _0xbc506e=a6_0x3570a4,_0x314e1d=window[_0xbc506e(0x211)]['currentUser'];if(!_0x314e1d){alert(_0xbc506e(0x183));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x337037=doc(window['db'],_0xbc506e(0x166),_0x484ae8),_0x11bd0b=await getDoc(_0x337037);if(!_0x11bd0b[_0xbc506e(0x112)]()){alert(_0xbc506e(0x10b));return;}const _0x5db73e=_0x11bd0b[_0xbc506e(0x168)]();if(_0x5db73e['userId']!==_0x314e1d[_0xbc506e(0x128)]){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x337037);if(_0x52d0b1&&_0x52d0b1['parentNode']){_0x52d0b1[_0xbc506e(0x165)]['removeChild'](_0x52d0b1);const _0x79b607=_0x52d0b1[_0xbc506e(0x17d)]('.comments-container');if(_0x79b607&&!_0x79b607[_0xbc506e(0x127)]('.comment-item')){const _0x231ae9=_0x79b607[_0xbc506e(0x127)](_0xbc506e(0x109));if(_0x231ae9)_0x231ae9['style'][_0xbc506e(0x132)]=_0xbc506e(0x1b8);}}console[_0xbc506e(0x147)]('Comment\x20deleted\x20successfully');}catch(_0x442f22){console[_0xbc506e(0x170)]('Error\x20deleting\x20comment:',_0x442f22),alert(_0xbc506e(0x232)+_0x442f22[_0xbc506e(0x1f2)]);}}async function getAllCommentsForMatch(_0x22ec8b){const _0x1ff8fc=a6_0x3570a4;if(!_0x22ec8b)return[];try{const _0x26bcf8=collection(window['db'],_0x1ff8fc(0x166)),_0x357075=query(_0x26bcf8,where('matchId','==',_0x22ec8b),orderBy('timestamp',_0x1ff8fc(0xff))),_0x51ddd8=await getDocs(_0x357075);if(_0x51ddd8[_0x1ff8fc(0x1b0)])return[];return _0x51ddd8[_0x1ff8fc(0x195)][_0x1ff8fc(0x1bb)](_0x5e59dd=>({'id':_0x5e59dd['id'],..._0x5e59dd[_0x1ff8fc(0x168)]()}));}catch(_0x24ccca){return console['error'](_0x1ff8fc(0x174),_0x24ccca),[];}}async function submitComment(_0x5e3520){const _0x48eb7f=a6_0x3570a4;_0x5e3520[_0x48eb7f(0x221)]();if(!window[_0x48eb7f(0x211)]||!window['db']){console[_0x48eb7f(0x170)](_0x48eb7f(0x1b5)),alert(_0x48eb7f(0x192));return;}const _0x22beaf=window[_0x48eb7f(0x211)]['currentUser'];if(!_0x22beaf){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x5623a4=document[_0x48eb7f(0x20f)]('commentMatchId')?.[_0x48eb7f(0x1db)],_0x44f50b=document[_0x48eb7f(0x20f)](_0x48eb7f(0x1a1))?.['value']?.[_0x48eb7f(0x13a)]();if(!_0x5623a4||!_0x44f50b){alert(_0x48eb7f(0x118));return;}const _0x126848=_0x44f50b[_0x48eb7f(0x1c3)](/\s+/)[_0x48eb7f(0x16f)](_0x3a9be1=>_0x3a9be1['length']>0x0)[_0x48eb7f(0x150)];if(_0x126848>0xf){alert(_0x48eb7f(0x1e3));return;}const _0x4d69cb=document[_0x48eb7f(0x127)](_0x48eb7f(0x178));_0x4d69cb&&(_0x4d69cb[_0x48eb7f(0x1f7)]=!![],_0x4d69cb[_0x48eb7f(0x117)]='Submitting...');try{let _0x1ac591='Anonymous';try{const _0x307e0c=doc(window['db'],_0x48eb7f(0x169),_0x22beaf[_0x48eb7f(0x128)]),_0x34d976=await getDoc(_0x307e0c);if(_0x34d976[_0x48eb7f(0x112)]()){const _0x113684=_0x34d976[_0x48eb7f(0x168)]();_0x113684['username']&&(_0x1ac591=_0x113684['username']);}_0x1ac591==='Anonymous'&&_0x22beaf[_0x48eb7f(0x196)]&&(_0x1ac591=_0x22beaf[_0x48eb7f(0x196)]);}catch(_0x20a9c7){console[_0x48eb7f(0x10c)]('Failed\x20to\x20fetch\x20user\x20profile:',_0x20a9c7),_0x22beaf[_0x48eb7f(0x196)]&&(_0x1ac591=_0x22beaf[_0x48eb7f(0x196)]);}const _0x494f8b={'matchId':_0x5623a4,'userId':_0x22beaf[_0x48eb7f(0x128)],'username':_0x1ac591,'text':_0x44f50b,'timestamp':serverTimestamp()};console['log'](_0x48eb7f(0x1f1),_0x1ac591);const _0x16e99e=collection(window['db'],'matchComments');await addDoc(_0x16e99e,_0x494f8b),console[_0x48eb7f(0x147)]('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview(_0x48eb7f(0x193));}catch(_0x5189dd){console[_0x48eb7f(0x170)](_0x48eb7f(0x11b),_0x5189dd),alert(_0x48eb7f(0xf9)+_0x5189dd[_0x48eb7f(0x1f2)]),_0x4d69cb&&(_0x4d69cb[_0x48eb7f(0x1f7)]=![],_0x4d69cb['textContent']='Submit');}}function closeAddCommentPopup(){const _0x20a098=a6_0x3570a4,_0x312383=document[_0x20a098(0x20f)](_0x20a098(0x151)),_0x1496a0=document[_0x20a098(0x20f)](_0x20a098(0x201));if(_0x312383)_0x312383['style']['display']='none';if(_0x1496a0)_0x1496a0[_0x20a098(0x130)]['display']=_0x20a098(0x1c0);}function showAddCommentPopup(_0x2d03c2){const _0x5eaa27=a6_0x3570a4,_0x1aae9a=window[_0x5eaa27(0x211)][_0x5eaa27(0x1dd)];if(!_0x1aae9a){alert(_0x5eaa27(0x1eb));return;}let _0x276f92=document[_0x5eaa27(0x20f)](_0x5eaa27(0x151)),_0x14b08e=document[_0x5eaa27(0x20f)]('commentAddOverlay');!_0x276f92&&(_0x276f92=document[_0x5eaa27(0x229)](_0x5eaa27(0x10e)),_0x276f92['id']='commentAddPopup',_0x276f92[_0x5eaa27(0x13c)]='comment-popup',document['body'][_0x5eaa27(0x1d6)](_0x276f92));!_0x14b08e&&(_0x14b08e=document[_0x5eaa27(0x229)]('div'),_0x14b08e['id']=_0x5eaa27(0x201),_0x14b08e[_0x5eaa27(0x13c)]=_0x5eaa27(0x131),document['body']['appendChild'](_0x14b08e));_0x276f92[_0x5eaa27(0x1df)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x2d03c2+_0x5eaa27(0x1a5),_0x276f92[_0x5eaa27(0x130)][_0x5eaa27(0x132)]=_0x5eaa27(0x1b8),_0x14b08e[_0x5eaa27(0x130)][_0x5eaa27(0x132)]=_0x5eaa27(0x1b8),document['getElementById'](_0x5eaa27(0x217))[_0x5eaa27(0x215)](_0x5eaa27(0xfd),closeAddCommentPopup),_0x14b08e[_0x5eaa27(0x215)](_0x5eaa27(0xfd),closeAddCommentPopup);const _0x217922=_0x276f92['querySelectorAll']('.option-tab');_0x217922['forEach'](_0x1536bb=>{_0x1536bb['addEventListener']('click',function(){const _0x27eddb=a6_0x2a04;_0x217922[_0x27eddb(0x18c)](_0x35f4ce=>_0x35f4ce[_0x27eddb(0x19b)]['remove'](_0x27eddb(0x1fa))),document[_0x27eddb(0x1ac)](_0x27eddb(0x129))[_0x27eddb(0x18c)](_0x2b29ca=>_0x2b29ca[_0x27eddb(0x130)][_0x27eddb(0x132)]=_0x27eddb(0x1c0)),this[_0x27eddb(0x19b)][_0x27eddb(0x1ab)]('active');const _0x4418d3=this[_0x27eddb(0x188)][_0x27eddb(0x124)];document['getElementById'](_0x4418d3+'Option')[_0x27eddb(0x130)][_0x27eddb(0x132)]='block',_0x4418d3==='demo'?(document['getElementById'](_0x27eddb(0x167))['setAttribute'](_0x27eddb(0x163),''),document[_0x27eddb(0x20f)](_0x27eddb(0x1a1))['removeAttribute'](_0x27eddb(0x163))):(document[_0x27eddb(0x20f)](_0x27eddb(0x167))['removeAttribute'](_0x27eddb(0x163)),document[_0x27eddb(0x20f)](_0x27eddb(0x1a1))[_0x27eddb(0x136)](_0x27eddb(0x163),''));});}),document[_0x5eaa27(0x20f)](_0x5eaa27(0x1a1))[_0x5eaa27(0x136)](_0x5eaa27(0x163),''),document[_0x5eaa27(0x20f)](_0x5eaa27(0x167))['removeAttribute']('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter(_0x5eaa27(0x113),'demoWordCount',0x14),document['getElementById'](_0x5eaa27(0x197))[_0x5eaa27(0x215)](_0x5eaa27(0x15f),submitCommentOrDemo);}function setupWordCounter(_0x1e2b03,_0x4e7faf,_0xe0a102){const _0x1f44a2=a6_0x3570a4,_0x2daa3a=document[_0x1f44a2(0x20f)](_0x1e2b03),_0x113f2e=document[_0x1f44a2(0x20f)](_0x4e7faf);if(!_0x2daa3a||!_0x113f2e)return;_0x424332(),_0x2daa3a[_0x1f44a2(0x215)](_0x1f44a2(0x175),_0x424332);function _0x424332(){const _0x5efd21=_0x1f44a2,_0x2ffd06=_0x2daa3a[_0x5efd21(0x1db)]['trim'](),_0x34793b=_0x2ffd06?_0x2ffd06[_0x5efd21(0x1c3)](/\s+/)[_0x5efd21(0x16f)](_0x4b6f43=>_0x4b6f43[_0x5efd21(0x150)]>0x0)[_0x5efd21(0x150)]:0x0;_0x113f2e['textContent']=_0x34793b,_0x34793b>_0xe0a102?_0x113f2e[_0x5efd21(0x130)][_0x5efd21(0x219)]='#ff4444':_0x113f2e['style'][_0x5efd21(0x219)]=_0x5efd21(0x145);}}async function submitCommentOrDemo(_0x1fe3cc){const _0x4a863d=a6_0x3570a4;_0x1fe3cc[_0x4a863d(0x221)]();if(!window[_0x4a863d(0x211)]||!window['db']){console[_0x4a863d(0x170)]('Firebase\x20not\x20initialized'),alert(_0x4a863d(0x19f));return;}const _0x3dd31a=window[_0x4a863d(0x211)]['currentUser'];if(!_0x3dd31a){alert(_0x4a863d(0xfa));return;}const _0x11ac84=document['getElementById'](_0x4a863d(0x16b))[_0x4a863d(0x1db)],_0x5b0326=document[_0x4a863d(0x127)](_0x4a863d(0x13e))['dataset'][_0x4a863d(0x124)];let _0x167540=_0x4a863d(0x18d);try{const _0x23089a=doc(window['db'],'userProfiles',_0x3dd31a[_0x4a863d(0x128)]),_0x49ddab=await getDoc(_0x23089a);if(_0x49ddab[_0x4a863d(0x112)]()){const _0x3cbc11=_0x49ddab[_0x4a863d(0x168)]();_0x3cbc11['username']&&(_0x167540=_0x3cbc11[_0x4a863d(0x1d2)]);}_0x167540==='Anonymous'&&_0x3dd31a['displayName']&&(_0x167540=_0x3dd31a[_0x4a863d(0x196)]);}catch(_0x56f4d8){console[_0x4a863d(0x10c)]('Failed\x20to\x20fetch\x20username:',_0x56f4d8),_0x3dd31a[_0x4a863d(0x196)]&&(_0x167540=_0x3dd31a[_0x4a863d(0x196)]);}const _0x339209=document[_0x4a863d(0x127)]('.submit-comment-btn');_0x339209&&(_0x339209['disabled']=!![],_0x339209[_0x4a863d(0x117)]=_0x4a863d(0x1b1));try{if(_0x5b0326===_0x4a863d(0x233)){const _0x2d3611=document['getElementById']('commentText')['value']['trim']();if(!_0x2d3611){alert(_0x4a863d(0x118)),_0x339209[_0x4a863d(0x1f7)]=![],_0x339209[_0x4a863d(0x117)]='Submit';return;}const _0x29811e=_0x2d3611['split'](/\s+/)[_0x4a863d(0x16f)](_0x452e04=>_0x452e04[_0x4a863d(0x150)]>0x0)['length'];if(_0x29811e>0xf){alert(_0x4a863d(0x1e3)),_0x339209[_0x4a863d(0x1f7)]=![],_0x339209[_0x4a863d(0x117)]=_0x4a863d(0x220);return;}const _0x4c8ed7={'matchId':_0x11ac84,'userId':_0x3dd31a[_0x4a863d(0x128)],'username':_0x167540,'text':_0x2d3611,'type':'comment','timestamp':serverTimestamp()},_0xcf5b7f=collection(window['db'],_0x4a863d(0x166));await addDoc(_0xcf5b7f,_0x4c8ed7);}else{const _0x3ac2ee=document[_0x4a863d(0x20f)]('demoLink')[_0x4a863d(0x1db)]['trim'](),_0x523e9e=document[_0x4a863d(0x20f)](_0x4a863d(0x113))[_0x4a863d(0x1db)][_0x4a863d(0x13a)]()||_0x4a863d(0x18f);if(!_0x3ac2ee){alert(_0x4a863d(0xf6)),_0x339209['disabled']=![],_0x339209[_0x4a863d(0x117)]='Submit';return;}try{new URL(_0x3ac2ee);}catch(_0xa8742a){alert(_0x4a863d(0xf4)),_0x339209[_0x4a863d(0x1f7)]=![],_0x339209['textContent']='Submit';return;}const _0x420e80=_0x523e9e[_0x4a863d(0x1c3)](/\s+/)[_0x4a863d(0x16f)](_0x114cdd=>_0x114cdd[_0x4a863d(0x150)]>0x0)[_0x4a863d(0x150)];if(_0x420e80>0x14){alert(_0x4a863d(0x1ff)),_0x339209['disabled']=![],_0x339209[_0x4a863d(0x117)]=_0x4a863d(0x220);return;}const _0x162fdc={'matchId':_0x11ac84,'userId':_0x3dd31a[_0x4a863d(0x128)],'username':_0x167540,'demoLink':_0x3ac2ee,'description':_0x523e9e,'type':_0x4a863d(0x1d8),'text':'Demo:\x20'+_0x523e9e,'timestamp':serverTimestamp()},_0x28e321=collection(window['db'],_0x4a863d(0x166));await addDoc(_0x28e321,_0x162fdc);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x4a863d(0x193));}catch(_0xbf3cd5){console[_0x4a863d(0x170)](_0x4a863d(0x1a4),_0xbf3cd5),alert(_0x4a863d(0x13b)+_0xbf3cd5[_0x4a863d(0x1f2)]),_0x339209&&(_0x339209[_0x4a863d(0x1f7)]=![],_0x339209[_0x4a863d(0x117)]=_0x4a863d(0x220));}}function getEloRankClass(_0x4de749){const _0x2db564=a6_0x3570a4,_0x2e8a46=Number(_0x4de749);if(_0x2e8a46>=0x7d0)return _0x2db564(0x22d);else{if(_0x2e8a46>=0x708)return _0x2db564(0x21a);else{if(_0x2e8a46>=0x640)return _0x2db564(0x209);else{if(_0x2e8a46>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(_0x159fc1,_0x40736a,_0x31376f=a6_0x3570a4(0x1b6)){const _0x3cd69e=a6_0x3570a4,_0x14dc7a=document[_0x3cd69e(0x20f)](_0x3cd69e(0x1ef)),_0x46ccf8=document['getElementById']('commentOverlayPreview'),_0x54da30=document[_0x3cd69e(0x20f)](_0x3cd69e(0x231)),_0x2eec41=document['getElementById'](_0x3cd69e(0x1c1)),_0x4bc676=document[_0x3cd69e(0x20f)](_0x3cd69e(0x155));if(!_0x14dc7a||!_0x46ccf8||!_0x54da30||!_0x2eec41||!_0x4bc676)return;_0x14dc7a[_0x3cd69e(0x188)][_0x3cd69e(0x1a1)]=_0x159fc1,_0x14dc7a['dataset']['commentUser']=_0x40736a,_0x54da30[_0x3cd69e(0x130)][_0x3cd69e(0x219)]=_0x31376f,_0x54da30[_0x3cd69e(0x117)]='Comment\x20from\x20'+_0x40736a,_0x2eec41['textContent']=_0x159fc1,_0x4bc676[_0x3cd69e(0x202)]=reportComment,_0x14dc7a[_0x3cd69e(0x130)][_0x3cd69e(0x132)]=_0x3cd69e(0x1b8),_0x46ccf8['style'][_0x3cd69e(0x132)]=_0x3cd69e(0x1b8);}function closePreviewCommentPopup(){const _0x2c1558=a6_0x3570a4,_0xb14213=document[_0x2c1558(0x20f)](_0x2c1558(0x1ef)),_0x5097ce=document['getElementById']('commentOverlayPreview');if(_0xb14213)_0xb14213[_0x2c1558(0x130)][_0x2c1558(0x132)]=_0x2c1558(0x1c0);if(_0x5097ce)_0x5097ce[_0x2c1558(0x130)][_0x2c1558(0x132)]=_0x2c1558(0x1c0);}async function reportComment(){const _0x340df1=a6_0x3570a4,_0x3e965b=window[_0x340df1(0x211)][_0x340df1(0x1dd)];if(!_0x3e965b){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x37885a=document[_0x340df1(0x20f)]('commentPopupPreview'),_0x11179c={'commentAuthor':_0x37885a[_0x340df1(0x188)][_0x340df1(0x1e0)]||_0x340df1(0x1f4),'commentText':_0x37885a[_0x340df1(0x188)][_0x340df1(0x1a1)]||'','matchId':previewState[_0x340df1(0x1d7)]||'','reportedBy':_0x3e965b[_0x340df1(0x128)],'reporterUsername':_0x3e965b[_0x340df1(0x196)]||_0x340df1(0x1e2),'reportedAt':serverTimestamp()},_0x5af6cf=collection(window['db'],_0x340df1(0x20e));await addDoc(_0x5af6cf,_0x11179c),alert(_0x340df1(0x11c)),closePreviewCommentPopup();}catch(_0x5b7c4f){console['error'](_0x340df1(0x19a),_0x5b7c4f),alert(_0x340df1(0x1d9)+_0x5b7c4f[_0x340df1(0x1f2)]);}}function showFullCommentLightbox(_0x16f752){const _0x5170eb=a6_0x3570a4;if(isUsernameMuted(_0x16f752[_0x5170eb(0x1d2)]))return;const _0x5db27d=document['getElementById'](_0x5170eb(0x1ef)),_0x3ee73a=document[_0x5170eb(0x20f)](_0x5170eb(0x21b)),_0x116fa4=document['getElementById'](_0x5170eb(0x231)),_0x25c127=document[_0x5170eb(0x20f)](_0x5170eb(0x1c1));if(!_0x5db27d||!_0x3ee73a||!_0x116fa4||!_0x25c127)return;_0x116fa4[_0x5170eb(0x130)][_0x5170eb(0x219)]=_0x5170eb(0x1b6),_0x116fa4['textContent']='Comment\x20from\x20'+_0x16f752[_0x5170eb(0x1d2)];if(_0x16f752[_0x5170eb(0x14a)]){const _0x12eec0=new Date(_0x16f752[_0x5170eb(0x14a)][_0x5170eb(0x1d4)]*0x3e8),_0x2020e4=_0x12eec0['toLocaleString']();_0x25c127['innerHTML']=_0x5170eb(0x230)+_0x16f752['text']+_0x5170eb(0x114)+_0x2020e4+_0x5170eb(0x1d3);}else _0x25c127[_0x5170eb(0x117)]=_0x16f752[_0x5170eb(0x11d)];_0x5db27d[_0x5170eb(0x188)][_0x5170eb(0x17f)]=_0x16f752['id']||'',_0x5db27d[_0x5170eb(0x188)]['commentUser']=_0x16f752[_0x5170eb(0x1d2)]||'',_0x5db27d[_0x5170eb(0x188)][_0x5170eb(0x1a1)]=_0x16f752[_0x5170eb(0x11d)]||'',_0x5db27d[_0x5170eb(0x188)][_0x5170eb(0x157)]=_0x16f752[_0x5170eb(0x157)]||'';const _0x5ceab3=_0x5db27d[_0x5170eb(0x127)](_0x5170eb(0x194))||document[_0x5170eb(0x229)]('div');!_0x5db27d[_0x5170eb(0x127)]('.popup-actions')?(_0x5ceab3[_0x5170eb(0x13c)]=_0x5170eb(0xf2),_0x5ceab3[_0x5170eb(0x130)]['display']=_0x5170eb(0x20d),_0x5ceab3[_0x5170eb(0x130)][_0x5170eb(0x116)]=_0x5170eb(0x12f),_0x5ceab3['style'][_0x5170eb(0x225)]=_0x5170eb(0x1a7),_0x5ceab3['style']['marginTop']='15px',_0x5db27d[_0x5170eb(0x1d6)](_0x5ceab3)):_0x5ceab3[_0x5170eb(0x1df)]='';const _0x5c1e52=document['createElement'](_0x5170eb(0x1de));_0x5c1e52[_0x5170eb(0x117)]=_0x5170eb(0x138),_0x5c1e52[_0x5170eb(0x13c)]='popup-btn\x20close-btn',_0x5c1e52['id']='closeCommentPopupPreview',_0x5c1e52['addEventListener']('click',closePreviewCommentPopup);const _0x32f185=document['createElement'](_0x5170eb(0x1de));_0x32f185[_0x5170eb(0x117)]='Report',_0x32f185[_0x5170eb(0x13c)]=_0x5170eb(0x18e),_0x32f185[_0x5170eb(0x130)][_0x5170eb(0x1a6)]=_0x5170eb(0x228),_0x32f185[_0x5170eb(0x215)](_0x5170eb(0xfd),reportComment),_0x5ceab3[_0x5170eb(0x1d6)](_0x5c1e52),_0x5ceab3['appendChild'](_0x32f185),_0x5db27d[_0x5170eb(0x130)][_0x5170eb(0x132)]=_0x5170eb(0x1b8),_0x3ee73a[_0x5170eb(0x130)][_0x5170eb(0x132)]=_0x5170eb(0x1b8);}export function setupPreviewEventListeners(){const _0x317f7e=a6_0x3570a4,_0x547735=document[_0x317f7e(0x20f)](_0x317f7e(0xf1)),_0x1dc9ba=document[_0x317f7e(0x20f)]('previewNextPage'),_0x166959=document[_0x317f7e(0x20f)](_0x317f7e(0x1aa)),_0x4c7805=document[_0x317f7e(0x20f)](_0x317f7e(0x1b3)),_0x3301cb=document[_0x317f7e(0x20f)](_0x317f7e(0x10d)),_0x9a961f=document['getElementById']('filter-toggle-button'),_0x5e5881=document[_0x317f7e(0x20f)](_0x317f7e(0x1ce));if(!_0x547735||!_0x1dc9ba||!_0x166959||!_0x4c7805||!_0x3301cb||!_0x9a961f||!_0x5e5881){console[_0x317f7e(0x10c)](_0x317f7e(0x14f));return;}_0x547735[_0x317f7e(0x215)](_0x317f7e(0xfd),()=>{const _0x2eba27=_0x317f7e;if(!_0x547735[_0x2eba27(0x1f7)])loadRecentMatchesPreview('prev');}),_0x1dc9ba[_0x317f7e(0x215)](_0x317f7e(0xfd),()=>{const _0x55472f=_0x317f7e;if(!_0x1dc9ba[_0x55472f(0x1f7)])loadRecentMatchesPreview(_0x55472f(0x1af));}),_0x166959[_0x317f7e(0x215)](_0x317f7e(0xfd),()=>{const _0x2715fd=_0x317f7e;previewState['currentMode']!=='D1'&&!previewState[_0x2715fd(0xf8)]&&(previewState[_0x2715fd(0x1b7)]='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x2715fd(0x193)));}),_0x4c7805[_0x317f7e(0x215)]('click',()=>{const _0x55771a=_0x317f7e;previewState[_0x55771a(0x1b7)]!=='D2'&&!previewState[_0x55771a(0xf8)]&&(previewState[_0x55771a(0x1b7)]='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x55771a(0x193)));}),_0x3301cb['addEventListener']('click',()=>{const _0x48774e=_0x317f7e;previewState[_0x48774e(0x1b7)]!=='D3'&&!previewState[_0x48774e(0xf8)]&&(previewState[_0x48774e(0x1b7)]='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x9a961f&&_0x5e5881&&_0x9a961f['addEventListener'](_0x317f7e(0xfd),()=>{const _0x1fc904=_0x317f7e,_0x4bbded=_0x5e5881[_0x1fc904(0x130)][_0x1fc904(0x132)]!==_0x1fc904(0x1c0);_0x5e5881[_0x1fc904(0x130)]['display']=_0x4bbded?_0x1fc904(0x1c0):_0x1fc904(0x1b8),_0x9a961f[_0x1fc904(0x19b)]['toggle'](_0x1fc904(0x1fa),!_0x4bbded);});const _0x2c26a9=document[_0x317f7e(0x20f)](_0x317f7e(0x1f6)),_0x1ea7b3=document[_0x317f7e(0x20f)](_0x317f7e(0x203));_0x2c26a9&&_0x2c26a9[_0x317f7e(0x215)]('click',()=>{const _0x5c57d2=_0x317f7e;previewState[_0x5c57d2(0x22e)][_0x5c57d2(0x1d1)]=document[_0x5c57d2(0x20f)](_0x5c57d2(0x1ae))[_0x5c57d2(0x1db)]['trim'](),previewState[_0x5c57d2(0x22e)][_0x5c57d2(0x103)]=document['getElementById'](_0x5c57d2(0x1c6))['value']['trim']();const _0x5e5ccd=document[_0x5c57d2(0x20f)](_0x5c57d2(0x1f9));previewState[_0x5c57d2(0x22e)][_0x5c57d2(0x1fb)]=Array[_0x5c57d2(0xef)](_0x5e5ccd[_0x5c57d2(0x1ec)])['map'](_0x5bb28e=>_0x5bb28e[_0x5c57d2(0x1db)])[_0x5c57d2(0x16f)](_0x3fc611=>_0x3fc611!==''),loadRecentMatchesPreview(_0x5c57d2(0x193));});_0x1ea7b3&&_0x1ea7b3[_0x317f7e(0x215)]('click',()=>{const _0x3775b1=_0x317f7e;clearEnhancedFilters(),loadRecentMatchesPreview(_0x3775b1(0x193));});document[_0x317f7e(0x1ac)](_0x317f7e(0x158))[_0x317f7e(0x18c)](_0x58c08e=>{const _0x214e5b=_0x317f7e;_0x58c08e[_0x214e5b(0x215)](_0x214e5b(0xfd),()=>{const _0x30adfa=_0x214e5b,_0x1fee37=_0x58c08e[_0x30adfa(0x188)][_0x30adfa(0x1f8)];jumpToPage(_0x1fee37);});});const _0x5cd3cd=document[_0x317f7e(0x20f)]('jump-to-page');_0x5cd3cd&&_0x5cd3cd['addEventListener'](_0x317f7e(0x226),_0x2520b2=>{const _0x208d5d=_0x317f7e;_0x2520b2[_0x208d5d(0x208)]==='Enter'&&jumpToPage(_0x208d5d(0x175));});const _0xa016b0=document['getElementById'](_0x317f7e(0x1ee)),_0x358070=document[_0x317f7e(0x20f)](_0x317f7e(0x21b));if(_0xa016b0)_0xa016b0[_0x317f7e(0x215)](_0x317f7e(0xfd),closePreviewCommentPopup);if(_0x358070)_0x358070[_0x317f7e(0x215)](_0x317f7e(0xfd),closePreviewCommentPopup);const _0x1e5c8f=document[_0x317f7e(0x20f)](_0x317f7e(0x217)),_0x29cfdc=document[_0x317f7e(0x20f)](_0x317f7e(0x201)),_0x17a9ff=document[_0x317f7e(0x20f)](_0x317f7e(0x197));if(_0x1e5c8f)_0x1e5c8f[_0x317f7e(0x215)](_0x317f7e(0xfd),closeAddCommentPopup);if(_0x29cfdc)_0x29cfdc['addEventListener'](_0x317f7e(0xfd),closeAddCommentPopup);if(_0x17a9ff)_0x17a9ff[_0x317f7e(0x215)]('submit',submitComment);const _0x2e1c71=document[_0x317f7e(0x20f)](_0x317f7e(0x1a1)),_0x46ebed=document[_0x317f7e(0x20f)](_0x317f7e(0x18a));_0x2e1c71&&_0x46ebed&&setupWordCounter('commentText',_0x317f7e(0x18a),0xf);}window[a6_0x3570a4(0x1e4)]=showAddCommentPopup,window[a6_0x3570a4(0x217)]=closeAddCommentPopup,window[a6_0x3570a4(0x1ca)]=submitComment;