import a22_0x161509,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;function a22_0x1dfd(_0x4427d5,_0x48c018){const _0x5956a9=a22_0x47ad();return a22_0x1dfd=function(_0x50c791,_0x17ab4d){_0x50c791=_0x50c791-0xa7;let _0x47ad07=_0x5956a9[_0x50c791];return _0x47ad07;},a22_0x1dfd(_0x4427d5,_0x48c018);}let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;function a22_0x47ad(){const _0x4af087=['size','suspendAllListeners','cssText','return\x20(function()\x20','Connection\x20test\x20failed:','from','resource-exhausted','idle-overlay','console','createElement','flex','message','reload','appendChild','getDocs','preventDefault','querySelector','network','toString','touchstart','backgroundColor','style','RDL_SESSION_SUSPENDED','getElementById','button','activeListeners','RDL_NETWORK_ERROR','bind','log','blockedOperations','retry-connection-btn','Session\x20resumed','resumeAllListeners','not-allowed','system','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','mousemove','textContent','div','error','Retrying\x20connection...','suspendSession','click','reload-page-btn','display','onmouseover'];a22_0x47ad=function(){return _0x4af087;};return a22_0x47ad();}const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x6932bb=a22_0x1dfd;if(document['getElementById'](_0x6932bb(0xae)))return;const _0x449f64=document['createElement'](_0x6932bb(0xce));_0x449f64['id']='idle-overlay',_0x449f64['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0xd28f9d=document['createElement'](_0x6932bb(0xce));_0xd28f9d[_0x6932bb(0xbc)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x534ac1=document['createElement']('h2');_0x534ac1[_0x6932bb(0xcd)]='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x534ac1['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0xc4d061=document['createElement']('p');_0xc4d061[_0x6932bb(0xcd)]=_0x6932bb(0xca),_0xc4d061[_0x6932bb(0xbc)][_0x6932bb(0xa9)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x33cd9b=document['createElement'](_0x6932bb(0xbf));_0x33cd9b['id']='resume-session-btn',_0x33cd9b['textContent']='Return\x20to\x20Website',_0x33cd9b['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x33cd9b[_0x6932bb(0xd5)]=function(){const _0x523b53=_0x6932bb;this['style'][_0x523b53(0xbb)]='#3da05f';},_0x33cd9b['onmouseout']=function(){this['style']['backgroundColor']='#50C878';},_0xd28f9d[_0x6932bb(0xb4)](_0x534ac1),_0xd28f9d['appendChild'](_0xc4d061),_0xd28f9d['appendChild'](_0x33cd9b),_0x449f64['appendChild'](_0xd28f9d),document['body']['appendChild'](_0x449f64),_0x33cd9b['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x472930=a22_0x1dfd;if(document['getElementById']('network-error-overlay'))return;const _0x2a53f8=document['createElement']('div');_0x2a53f8['id']='network-error-overlay',_0x2a53f8['style'][_0x472930(0xa9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x5b5ac1=document['createElement']('div');_0x5b5ac1[_0x472930(0xbc)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x22b2d8=document['createElement']('h2');_0x22b2d8[_0x472930(0xcd)]='Connection\x20Error',_0x22b2d8['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x289e2c=document['createElement']('p');_0x289e2c['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x289e2c[_0x472930(0xbc)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x27e959=document[_0x472930(0xb0)]('button');_0x27e959['id']=_0x472930(0xc5),_0x27e959['textContent']='Retry\x20Connection',_0x27e959['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x580794=document['createElement']('button');_0x580794['id']=_0x472930(0xd3),_0x580794['textContent']='Reload\x20Page',_0x580794['style']['cssText']=_0x472930(0xcb);const _0x322d63=document['createElement']('div');_0x322d63[_0x472930(0xbc)]['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x322d63['appendChild'](_0x27e959),_0x322d63['appendChild'](_0x580794),_0x5b5ac1[_0x472930(0xb4)](_0x22b2d8),_0x5b5ac1['appendChild'](_0x289e2c),_0x5b5ac1['appendChild'](_0x322d63),_0x2a53f8[_0x472930(0xb4)](_0x5b5ac1),document['body']['appendChild'](_0x2a53f8),_0x27e959['addEventListener']('click',retryConnection),_0x580794['addEventListener'](_0x472930(0xd2),()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x6173cf=a22_0x1dfd;clearTimeout(idleTimer);const _0x1a9e6f=document[_0x6173cf(0xbe)]('network-error-overlay');_0x1a9e6f&&(_0x1a9e6f['style']['display']=_0x6173cf(0xb1)),window[_0x6173cf(0xc1)]=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x161509[_0x6173cf(0xa8)]();}function retryConnection(){const _0x4354c5=a22_0x1dfd;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x4c36c5=document[_0x4354c5(0xb7)]('#network-error-overlay\x20p');_0x4c36c5&&(_0x4c36c5['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x1f9d27=document['getElementById']('retry-connection-btn');_0x1f9d27&&(_0x1f9d27['disabled']=!![],_0x1f9d27['style']['opacity']='0.5',_0x1f9d27[_0x4354c5(0xbc)]['cursor']=_0x4354c5(0xc8));return;}const _0x2b5e98=document[_0x4354c5(0xbe)]('network-error-overlay');_0x2b5e98&&(_0x2b5e98[_0x4354c5(0xbc)]['display']='none');window[_0x4354c5(0xc1)]=![],resetIdleTimer(),console['log'](_0x4354c5(0xd0));try{const {rdlFirestore:_0x28c389}=window;if(_0x28c389){const _0x3161a1=_0x28c389['collection'](_0x4354c5(0xc9));_0x28c389[_0x4354c5(0xb5)](_0x3161a1)['catch'](_0x59ab1c=>{const _0x3b8e4b=_0x4354c5;console['error'](_0x3b8e4b(0xab),_0x59ab1c),handleNetworkError();});}}catch(_0x23f4e6){console['error']('Failed\x20to\x20test\x20connection:',_0x23f4e6),handleNetworkError();}a22_0x161509['resumeAllListeners']();}function suspendSession(){const _0x1bc345=a22_0x1dfd;isSessionSuspended=!![];const _0x5146da=document[_0x1bc345(0xbe)]('idle-overlay');_0x5146da&&(_0x5146da['style'][_0x1bc345(0xd4)]='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x1bc345(0xbd)]=!![],a22_0x161509['suspendAllListeners']();}function resumeSession(){const _0x2cb735=a22_0x1dfd;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x504c29=document['getElementById']('idle-overlay');_0x504c29&&(_0x504c29['style']['display']='none'),console[_0x2cb735(0xc3)](_0x2cb735(0xc6)),resetIdleTimer(),a22_0x161509[_0x2cb735(0xc7)](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location'][_0x2cb735(0xb3)]());}function initIdleTimeout(){const _0x279608=a22_0x1dfd,_0x5dd00a=(function(){let _0x55d9de=!![];return function(_0x585f17,_0x77b48b){const _0x17a3da=_0x55d9de?function(){if(_0x77b48b){const _0xe16594=_0x77b48b['apply'](_0x585f17,arguments);return _0x77b48b=null,_0xe16594;}}:function(){};return _0x55d9de=![],_0x17a3da;};}()),_0x293767=_0x5dd00a(this,function(){const _0x3dc3f7=a22_0x1dfd;let _0x31098b;try{const _0x4e9a3c=Function(_0x3dc3f7(0xaa)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x31098b=_0x4e9a3c();}catch(_0x573bde){_0x31098b=window;}const _0x173d12=_0x31098b[_0x3dc3f7(0xaf)]=_0x31098b['console']||{},_0x4ea3a3=[_0x3dc3f7(0xc3),'warn','info','error','exception','table','trace'];for(let _0xe9dabe=0x0;_0xe9dabe<_0x4ea3a3['length'];_0xe9dabe++){const _0x459fc2=_0x5dd00a['constructor']['prototype'][_0x3dc3f7(0xc2)](_0x5dd00a),_0x2af569=_0x4ea3a3[_0xe9dabe],_0x4c2372=_0x173d12[_0x2af569]||_0x459fc2;_0x459fc2['__proto__']=_0x5dd00a[_0x3dc3f7(0xc2)](_0x5dd00a),_0x459fc2[_0x3dc3f7(0xb9)]=_0x4c2372['toString']['bind'](_0x4c2372),_0x173d12[_0x2af569]=_0x459fc2;}});_0x293767(),createIdleOverlay();const _0x3cd8b6=['mousedown',_0x279608(0xcc),'keypress','scroll',_0x279608(0xba),'click'];_0x3cd8b6['forEach'](_0x76f832=>{document['addEventListener'](_0x76f832,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x407601){const _0x3105ad=_0x279608;_0x407601['error']&&(_0x407601[_0x3105ad(0xcf)][_0x3105ad(0xb2)]&&_0x407601['error']['message']['includes'](_0x3105ad(0xb8))||_0x407601['error']['code']&&(_0x407601['error']['code']==='unavailable'||_0x407601['error']['code']===_0x3105ad(0xad)||_0x407601['error']['code']['includes'](_0x3105ad(0xb8))))&&(handleNetworkError(),_0x407601[_0x3105ad(0xb6)]());}),resetIdleTimer(),console[_0x279608(0xc3)]('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window[_0x279608(0xd1)]=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x1c7336=_0x279608;return console['log']('Session\x20suspended:',window[_0x1c7336(0xbd)]),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console[_0x1c7336(0xc3)]('Active\x20listeners:',a22_0x161509['activeListeners'][_0x1c7336(0xa7)]),console[_0x1c7336(0xc3)]('Pending\x20operations:',a22_0x161509['pendingOperations']['size']),console['log']('Blocked\x20operations:',a22_0x161509[_0x1c7336(0xc4)]||0x0),{'suspended':window[_0x1c7336(0xbd)],'networkError':window[_0x1c7336(0xc1)],'activeListeners':Array['from'](a22_0x161509[_0x1c7336(0xc0)]['keys']()),'pendingOperations':Array[_0x1c7336(0xac)](a22_0x161509['pendingOperations']['keys']()),'blockedCount':a22_0x161509['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){const _0x5a1e45=_0x279608;console[_0x5a1e45(0xc3)]('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();