const a23_0x2f8ea1=a23_0x18c7,a23_0x4e86e5=(function(){let _0x5565bb=!![];return function(_0x16f078,_0x48bba6){const _0x46e98b=_0x5565bb?function(){if(_0x48bba6){const _0x50e246=_0x48bba6['apply'](_0x16f078,arguments);return _0x48bba6=null,_0x50e246;}}:function(){};return _0x5565bb=![],_0x46e98b;};}()),a23_0x3c1bd2=a23_0x4e86e5(this,function(){const _0x1744a7=a23_0x18c7,_0x3a643c=function(){const _0x57d241=a23_0x18c7;let _0x3dfd21;try{_0x3dfd21=Function(_0x57d241(0x1a3)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x43f1d4){_0x3dfd21=window;}return _0x3dfd21;},_0x3c3dcb=_0x3a643c(),_0x2297d7=_0x3c3dcb['console']=_0x3c3dcb[_0x1744a7(0x195)]||{},_0x2f45ba=['log','warn','info','error','exception',_0x1744a7(0x18b),_0x1744a7(0x19e)];for(let _0x4ae10d=0x0;_0x4ae10d<_0x2f45ba['length'];_0x4ae10d++){const _0x2c8df7=a23_0x4e86e5['constructor'][_0x1744a7(0x193)]['bind'](a23_0x4e86e5),_0x1dd36c=_0x2f45ba[_0x4ae10d],_0x4fee2a=_0x2297d7[_0x1dd36c]||_0x2c8df7;_0x2c8df7['__proto__']=a23_0x4e86e5['bind'](a23_0x4e86e5),_0x2c8df7['toString']=_0x4fee2a[_0x1744a7(0x1a2)]['bind'](_0x4fee2a),_0x2297d7[_0x1dd36c]=_0x2c8df7;}});function a23_0x18c7(_0x3fdaa1,_0x1a931e){const _0x3c1bd2=a23_0x2595();return a23_0x18c7=function(_0x4e86e5,_0x493cf3){_0x4e86e5=_0x4e86e5-0x181;let _0x2595d2=_0x3c1bd2[_0x4e86e5];return _0x2595d2;},a23_0x18c7(_0x3fdaa1,_0x1a931e);}a23_0x3c1bd2();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document[a23_0x2f8ea1(0x199)]('DOMContentLoaded',()=>{const _0x3ea938=a23_0x2f8ea1,_0x315860=document['getElementById'](_0x3ea938(0x1ac)),_0x45731b=document['getElementById']('d2-switch');console['log'](_0x3ea938(0x1a1),!!_0x315860),console[_0x3ea938(0x181)]('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x45731b);function _0x35a848(){const _0x4cccbf=_0x3ea938;document[_0x4cccbf(0x190)]('input[name=\x22ladder\x22]')['forEach'](_0x49d8f7=>{_0x49d8f7['addEventListener']('change',_0x5a0ace=>{const _0x1fc25b=a23_0x18c7;_0x5a0ace['target']['checked']&&(currentLadder=_0x5a0ace[_0x1fc25b(0x1ad)]['value'],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x35a848();const _0xa869bc=document['getElementById']('join-ladder-button');_0xa869bc&&_0xa869bc['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x16b558=>{if(_0x16b558)checkUserLadderStatus();else{const _0x4aecc0=document['getElementById']('ladder-join-prompt');_0x4aecc0&&(_0x4aecc0['style']['display']='none');}});});function a23_0x2595(){const _0x4e752a=['log','You\x20are\x20already\x20part\x20of\x20the\x20','ladder-join-status\x20success','style','players','block','ladder-join-status\x20error','reload','playersDuos','value','table','CTF','none','join-username-input','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','querySelectorAll','playersD2','username','prototype','toLowerCase','console','uid','error','Please\x20enter\x20your\x20username\x20to\x20confirm.','addEventListener','Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.','display','textContent','email','trace','className','getElementById','Ladder\x20join:\x20D1\x20radio\x20found:','toString','return\x20(function()\x20','Checking\x20user\x20status\x20for\x20ladder:','Error\x20joining\x20ladder:','ladder-join-status\x20loading','location','DUO','Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22','ladder-join-status','disabled','d1-switch','target','Verifying\x20username...','Successfully\x20joined\x20the\x20','Error\x20joining\x20ladder:\x20'];a23_0x2595=function(){return _0x4e752a;};return a23_0x2595();}function getCollectionName(_0x355b3b){const _0x2dfece=a23_0x2f8ea1;switch(_0x355b3b?.['toUpperCase']()){case'D1':return _0x2dfece(0x185);case'D2':return _0x2dfece(0x191);case'D3':return'playersD3';case'DUOS':case _0x2dfece(0x1a8):return _0x2dfece(0x189);case _0x2dfece(0x18c):return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x355b3b+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x5eaa22=a23_0x2f8ea1;console['log'](_0x5eaa22(0x1a4),currentLadder);const _0x2292c1=auth['currentUser'],_0x221b9c=document[_0x5eaa22(0x1a0)]('ladder-join-prompt'),_0x3083a3=document['getElementById']('join-ladder-type'),_0x130e43=document['getElementById']('tiny-join-button');if(!_0x2292c1||!_0x2292c1['uid']||!_0x221b9c||!_0x3083a3||!_0x130e43){if(_0x221b9c)_0x221b9c[_0x5eaa22(0x184)]['display']=_0x5eaa22(0x18d);if(_0x130e43)_0x130e43['style'][_0x5eaa22(0x19b)]=_0x5eaa22(0x18d);return;}try{try{await _0x2292c1['getIdToken'](![]);}catch(_0x102feb){console['error']('Authentication\x20verification\x20failed:',_0x102feb),_0x221b9c[_0x5eaa22(0x184)][_0x5eaa22(0x19b)]='none',_0x130e43['style']['display']='none';return;}const _0x3ea23d=getCollectionName(currentLadder),_0x42b27e=doc(db,_0x3ea23d,_0x2292c1['uid']),_0x274341=await getDoc(_0x42b27e);if(_0x274341['exists']())_0x221b9c[_0x5eaa22(0x184)]['display']='none',_0x130e43[_0x5eaa22(0x184)]['display']='none';else{_0x221b9c['style']['display']='none',_0x130e43[_0x5eaa22(0x184)]['display']='block',_0x3083a3['textContent']=currentLadder,_0x130e43['onclick']=()=>{const _0x5d2cc9=_0x5eaa22;_0x221b9c[_0x5d2cc9(0x184)]['display']===_0x5d2cc9(0x186)?_0x221b9c['style'][_0x5d2cc9(0x19b)]=_0x5d2cc9(0x18d):_0x221b9c['style']['display']=_0x5d2cc9(0x186);};const _0x36f97b=document['getElementById']('join-username-input'),_0x332b9d=document['getElementById']('ladder-join-status');if(_0x36f97b)_0x36f97b['value']='';_0x332b9d&&(_0x332b9d[_0x5eaa22(0x19c)]='',_0x332b9d['className']='ladder-join-status');}}catch(_0x5026cf){console['error']('Error\x20checking\x20ladder\x20status:',_0x5026cf),_0x221b9c[_0x5eaa22(0x184)]['display']=_0x5eaa22(0x18d),_0x130e43['style']['display']=_0x5eaa22(0x18d);}}async function handleJoinLadder(){const _0x5af7e5=a23_0x2f8ea1,_0x2c01c1=auth['currentUser'],_0x30e75f=document[_0x5af7e5(0x1a0)]('join-ladder-button'),_0x38792b=document[_0x5af7e5(0x1a0)](_0x5af7e5(0x1aa)),_0x3c2815=document['getElementById'](_0x5af7e5(0x18e));if(!_0x2c01c1||!_0x2c01c1['uid']){_0x38792b['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x38792b['className']='ladder-join-status\x20error';return;}try{await _0x2c01c1['getIdToken'](!![]);}catch(_0x4679b8){console['error']('Authentication\x20error:',_0x4679b8),_0x38792b[_0x5af7e5(0x19c)]=_0x5af7e5(0x18f),_0x38792b['className']='ladder-join-status\x20error';return;}if(!_0x3c2815||!_0x3c2815['value']['trim']()){_0x38792b['textContent']=_0x5af7e5(0x198),_0x38792b['className']='ladder-join-status\x20error';return;}try{_0x30e75f[_0x5af7e5(0x1ab)]=!![],_0x38792b[_0x5af7e5(0x19c)]=_0x5af7e5(0x1ae),_0x38792b['className']=_0x5af7e5(0x1a6);let _0x5640c2='',_0x15d7a6=null;const _0xde7c0f=['players',_0x5af7e5(0x191),'playersD3','playersDuos','playersCTF','nonParticipants'];for(const _0x23b1ca of _0xde7c0f){try{const _0xb15e6d=doc(db,_0x23b1ca,_0x2c01c1['uid']),_0x4fa0a6=await getDoc(_0xb15e6d);if(_0x4fa0a6['exists']()){_0x15d7a6=_0x4fa0a6['data']();if(_0x15d7a6['username']){_0x5640c2=_0x15d7a6[_0x5af7e5(0x192)];break;}}}catch(_0x53b94c){console['error']('Error\x20checking\x20'+_0x23b1ca+':',_0x53b94c);}}!_0x5640c2&&_0x2c01c1[_0x5af7e5(0x19d)]&&(_0x5640c2=_0x2c01c1['email']['split']('@')[0x0]);if(!_0x5640c2){_0x38792b['textContent']=_0x5af7e5(0x19a),_0x38792b['className']='ladder-join-status\x20error',_0x30e75f['disabled']=![];return;}const _0x4d9857=_0x3c2815[_0x5af7e5(0x18a)]['trim']();if(_0x5640c2&&_0x4d9857['toLowerCase']()!==_0x5640c2[_0x5af7e5(0x194)]()){_0x38792b['textContent']=_0x5af7e5(0x1a9)+_0x5640c2+'\x22\x20to\x20confirm.',_0x38792b['className']='ladder-join-status\x20error',_0x30e75f['disabled']=![];return;}_0x38792b['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x276da1=getCollectionName(currentLadder),_0x5955ba=doc(db,_0x276da1,_0x2c01c1[_0x5af7e5(0x196)]),_0x405e61=await getDoc(_0x5955ba);if(_0x405e61['exists']()){_0x38792b[_0x5af7e5(0x19c)]=_0x5af7e5(0x182)+currentLadder+'\x20ladder.',_0x38792b['className']='ladder-join-status\x20error',_0x30e75f[_0x5af7e5(0x1ab)]=![];return;}try{await _0x2c01c1['getIdToken'](!![]);}catch(_0x2bfc93){_0x38792b[_0x5af7e5(0x19c)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x38792b['className']=_0x5af7e5(0x187),_0x30e75f['disabled']=![];return;}const _0x5708b4=_0x5640c2,_0x22cc7a=collection(db,_0x276da1),_0x41aa00=query(_0x22cc7a,orderBy('position','desc'),limit(0x1)),_0xf4a1d5=await getDocs(_0x41aa00);let _0x21863a=0x1;if(!_0xf4a1d5['empty']){const _0x43aabd=_0xf4a1d5['docs'][0x0]['data']();_0x21863a=(_0x43aabd['position']||0x0)+0x1;}const _0xf289f1={'username':_0x5708b4,'email':_0x2c01c1['email'],'eloRating':0x4b0,'position':_0x21863a,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x5955ba,_0xf289f1),currentLadder==='DUOS'?_0x38792b['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x38792b['textContent']=_0x5af7e5(0x1af)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x38792b[_0x5af7e5(0x19f)]=_0x5af7e5(0x183),setTimeout(()=>{const _0x2ee6ec=_0x5af7e5;window[_0x2ee6ec(0x1a7)][_0x2ee6ec(0x188)]();},0x7d0);}catch(_0x4954f9){console[_0x5af7e5(0x197)](_0x5af7e5(0x1a5),_0x4954f9),_0x38792b['textContent']=_0x5af7e5(0x1b0)+_0x4954f9['message'],_0x38792b[_0x5af7e5(0x19f)]=_0x5af7e5(0x187),_0x30e75f[_0x5af7e5(0x1ab)]=![];}}