const a48_0x1afe81=a48_0x2913,a48_0x1ca351=(function(){let _0x157bc9=!![];return function(_0x5bcf80,_0x4d9b4e){const _0x4f0b90=_0x157bc9?function(){if(_0x4d9b4e){const _0x4c0c22=_0x4d9b4e['apply'](_0x5bcf80,arguments);return _0x4d9b4e=null,_0x4c0c22;}}:function(){};return _0x157bc9=![],_0x4f0b90;};}()),a48_0x9fb9ac=a48_0x1ca351(this,function(){const _0x5e0311=a48_0x2913;let _0x15f0c3;try{const _0x2ebcd5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x15f0c3=_0x2ebcd5();}catch(_0x25384e){_0x15f0c3=window;}const _0x1a3c0e=_0x15f0c3[_0x5e0311(0xd4)]=_0x15f0c3[_0x5e0311(0xd4)]||{},_0x3aa3cf=['log','warn','info',_0x5e0311(0xc9),'exception',_0x5e0311(0xd0),_0x5e0311(0xd9)];for(let _0x476d94=0x0;_0x476d94<_0x3aa3cf['length'];_0x476d94++){const _0x27879a=a48_0x1ca351[_0x5e0311(0xba)]['prototype']['bind'](a48_0x1ca351),_0x312500=_0x3aa3cf[_0x476d94],_0x15b1ee=_0x1a3c0e[_0x312500]||_0x27879a;_0x27879a[_0x5e0311(0xcb)]=a48_0x1ca351['bind'](a48_0x1ca351),_0x27879a['toString']=_0x15b1ee['toString'][_0x5e0311(0xe8)](_0x15b1ee),_0x1a3c0e[_0x312500]=_0x27879a;}});function a48_0x1a89(){const _0x1dcdd7=['default','can-afford','innerHTML','includes','‚úÖ\x20Purchased\x20','name','inventory','constructor','FREE','0.5','dataset','length','points','sign-in-paid','getElementById','isAdmin','addEventListener','price','createElement','getCurrentTheme','Yellow\x20Orange','info','error','\x20theme\x20purchased!','__proto__','email','purchase','style','theme_','table','cursor','apply-theme','switchTheme','console','ThemeSystem','\x20theme','classList','.theme-select-btn','trace','textContent','Only\x20the\x20best\x20get\x20this\x20one','\x20points?','\x20Points','display','parentNode','Sign\x20in\x20to\x20Purchase','displayName','Theme\x20clicked:\x20','disabled','querySelector','\x20items','store-item','New\x20user\x20profile\x20created','bind','You\x20must\x20purchase\x20this\x20theme\x20first','forEach','currentUser','confirm'];a48_0x1a89=function(){return _0x1dcdd7;};return a48_0x1a89();}a48_0x9fb9ac();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a48_0x2913(_0x25ef0b,_0xc15947){const _0x9fb9ac=a48_0x1a89();return a48_0x2913=function(_0x1ca351,_0x299aff){_0x1ca351=_0x1ca351-0xb3;let _0x1a8951=_0x9fb9ac[_0x1ca351];return _0x1a8951;},a48_0x2913(_0x25ef0b,_0xc15947);}const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':a48_0x1afe81(0xc7),'description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':a48_0x1afe81(0xdb)},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a48_0x1afe81(0xc3)]('DOMContentLoaded',()=>{const _0x2dbb6b=a48_0x1afe81;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById']('store-content'),pointsDisplay=document[_0x2dbb6b(0xc1)]('user-points'),authWarning=document[_0x2dbb6b(0xc1)]('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x13f790=>{const _0x51d4aa=a48_0x2913;if(_0x13f790){console['log']('‚úÖ\x20User\x20authenticated:',_0x13f790['displayName']||_0x13f790['email']);if(authWarning)authWarning['style'][_0x51d4aa(0xde)]='none';if(storeContainer)storeContainer[_0x51d4aa(0xce)]['display']='block';await loadUserData(_0x13f790),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning[_0x51d4aa(0xce)]['display']='block';if(storeContainer)storeContainer[_0x51d4aa(0xce)]['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x5b8ffa){const _0x19b889=a48_0x1afe81;try{const _0x351941=doc(db,'userProfiles',_0x5b8ffa['uid']),_0x2412f5=await getDoc(_0x351941);if(_0x2412f5['exists']()){const _0x5af7bf=_0x2412f5['data']();userData={'points':_0x5af7bf['points']||0x0,'inventory':_0x5af7bf[_0x19b889(0xb9)]||[],'isAdmin':_0x5af7bf[_0x19b889(0xc2)]||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window['isUserAdmin']=userData[_0x19b889(0xc2)],userData[_0x19b889(0xc2)]&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData[_0x19b889(0xb9)][_0x19b889(0xbe)]+_0x19b889(0xe5));}else await setDoc(_0x351941,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x5b8ffa[_0x19b889(0xe1)]||_0x5b8ffa[_0x19b889(0xcc)]?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console['log'](_0x19b889(0xe7));}catch(_0x3d6a3b){console['error']('Error\x20loading\x20user\x20data:',_0x3d6a3b);}}function userOwnsTheme(_0x399836){const _0x2a24c6=a48_0x1afe81;if(THEMES[_0x399836]?.[_0x2a24c6(0xc4)]===0x0)return!![];return userData[_0x2a24c6(0xb9)]['includes']('theme_'+_0x399836);}async function purchaseTheme(_0xe1bc6e){const _0x2dee48=a48_0x1afe81,_0x1b99fe=auth[_0x2dee48(0xeb)];if(!_0x1b99fe)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x49b8c4=THEMES[_0xe1bc6e];if(!_0x49b8c4)return console['error']('Theme\x20'+_0xe1bc6e+'\x20not\x20found'),![];if(userData['points']<_0x49b8c4[_0x2dee48(0xc4)])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x49b8c4['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0xe1bc6e))return showMessage('You\x20already\x20own\x20the\x20'+_0x49b8c4['name']+_0x2dee48(0xd6),'info'),![];try{const _0x1e22f9=doc(db,'userProfiles',_0x1b99fe['uid']),_0x42ce98=await getDoc(_0x1e22f9);if(!_0x42ce98['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x3e5f85=_0x42ce98['data'](),_0x1e07bf=_0x3e5f85['points']||0x0,_0x13746c=_0x3e5f85[_0x2dee48(0xb9)]||[];if(_0x1e07bf<_0x49b8c4['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x13746c[_0x2dee48(0xb6)]('theme_'+_0xe1bc6e))return showMessage('You\x20already\x20own\x20this\x20theme',_0x2dee48(0xc8)),![];const _0x2596e3=_0x1e07bf-_0x49b8c4['price'],_0x5eaa56=[..._0x13746c,_0x2dee48(0xcf)+_0xe1bc6e];return await updateDoc(_0x1e22f9,{'points':_0x2596e3,'inventory':_0x5eaa56,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x1b99fe['uid'],'userEmail':_0x1b99fe['email'],'itemId':_0x2dee48(0xcf)+_0xe1bc6e,'itemTitle':_0x49b8c4[_0x2dee48(0xb8)]+'\x20Theme','price':_0x49b8c4[_0x2dee48(0xc4)],'type':_0x2dee48(0xcd),'category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x2596e3,userData[_0x2dee48(0xb9)]=_0x5eaa56,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),console['log'](_0x2dee48(0xb7)+_0x49b8c4['name']+'\x20theme\x20for\x20'+_0x49b8c4[_0x2dee48(0xc4)]+'\x20points'),!![];}catch(_0x4e165d){return console['error']('Purchase\x20failed:',_0x4e165d),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x2dee48(0xc9)),![];}}function applyTheme(_0xf0487c){const _0x25a27f=a48_0x1afe81;if(!userOwnsTheme(_0xf0487c))return showMessage(_0x25a27f(0xe9),'error'),![];return window['ThemeSystem']?(window['ThemeSystem'][_0x25a27f(0xd3)](_0xf0487c),showMessage((THEMES[_0xf0487c]?.[_0x25a27f(0xb8)]||_0xf0487c)+'\x20theme\x20applied!','success'),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x27b45d=a48_0x1afe81,_0xe4ca3a=document[_0x27b45d(0xe4)]('.themes-grid');if(!_0xe4ca3a){console['error']('Themes\x20container\x20not\x20found');return;}_0xe4ca3a[_0x27b45d(0xb5)]='',Object['entries'](THEMES)['forEach'](([_0x2eeef9,_0x11ece6])=>{const _0x43d61e=_0x27b45d,_0x2c2a41=document['createElement']('div');_0x2c2a41['className']=_0x43d61e(0xe6),_0x2c2a41['dataset']['theme']=_0x2eeef9,_0x2c2a41['dataset']['itemId']='theme_'+_0x2eeef9,_0x2c2a41['dataset']['price']=_0x11ece6['price'],_0x2c2a41['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x2eeef9+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x11ece6['price']===0x0?_0x43d61e(0xbb):_0x11ece6['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x11ece6['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x11ece6['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xe4ca3a['appendChild'](_0x2c2a41);}),setupThemeButtons();}function setupThemeButtons(){const _0xab7963=a48_0x1afe81,_0xf4a20=document['querySelectorAll']('.theme-select-btn');_0xf4a20[_0xab7963(0xea)](_0x2aa52f=>{_0x2aa52f['addEventListener']('click',async _0x43a154=>{const _0x1e773c=a48_0x2913;_0x43a154['preventDefault']();const _0x5ef7a6=auth['currentUser'];if(!_0x5ef7a6){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x278361=_0x2aa52f['closest']('[data-theme]'),_0x59ddf3=_0x278361['dataset']['theme'],_0x2795e7=THEMES[_0x59ddf3];if(!_0x2795e7){console['error']('Theme\x20'+_0x59ddf3+'\x20not\x20found');return;}console['log'](_0x1e773c(0xe2)+_0x2795e7['name']+'\x20('+_0x59ddf3+')');if(_0x2aa52f['disabled']){_0x2795e7['price']>0x0&&showMessage('You\x20need\x20'+_0x2795e7['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x2aa52f['textContent']==='Current\x20Theme'){showMessage(_0x2795e7[_0x1e773c(0xb8)]+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x2aa52f['textContent']==='Apply\x20Theme'){applyTheme(_0x59ddf3),updateThemeButtons();return;}if(_0x2aa52f['textContent']['includes']('Buy')){const _0x2ee97b=window[_0x1e773c(0xec)]('Purchase\x20'+_0x2795e7['name']+'\x20theme\x20for\x20'+_0x2795e7[_0x1e773c(0xc4)]+_0x1e773c(0xdc));if(!_0x2ee97b)return;const _0x2dee5b=await purchaseTheme(_0x59ddf3);_0x2dee5b&&(showMessage(_0x2795e7['name']+_0x1e773c(0xca),'success'),applyTheme(_0x59ddf3),updateThemeButtons());return;}userOwnsTheme(_0x59ddf3)?applyTheme(_0x59ddf3):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x42713d=a48_0x1afe81,_0x477e63=window['ThemeSystem']?window[_0x42713d(0xd5)][_0x42713d(0xc6)]():_0x42713d(0xb3),_0x1760b5=auth[_0x42713d(0xeb)];document['querySelectorAll'](_0x42713d(0xd8))['forEach'](_0x4369ac=>{const _0x199ce8=_0x42713d,_0x5a56b7=_0x4369ac['closest']('[data-theme]'),_0x125899=_0x5a56b7[_0x199ce8(0xbd)]['theme'],_0x503593=THEMES[_0x125899];if(!_0x503593)return;_0x4369ac[_0x199ce8(0xe3)]=![],_0x4369ac['style']['opacity']='',_0x4369ac['style'][_0x199ce8(0xd1)]='pointer',_0x4369ac['classList']['remove']('current-theme',_0x199ce8(0xd2),_0x199ce8(0xb4),'cannot-afford','sign-in-free',_0x199ce8(0xc0));if(!_0x1760b5){_0x503593['price']===0x0?(_0x4369ac['textContent']='Sign\x20in\x20to\x20Apply',_0x4369ac['classList']['add']('sign-in-free')):(_0x4369ac[_0x199ce8(0xda)]=_0x199ce8(0xe0),_0x4369ac['disabled']=!![],_0x4369ac['style']['opacity']='0.7',_0x4369ac['classList']['add'](_0x199ce8(0xc0)));return;}if(_0x125899===_0x477e63){_0x4369ac['textContent']='Current\x20Theme',_0x4369ac[_0x199ce8(0xd7)]['add']('current-theme'),_0x4369ac[_0x199ce8(0xe3)]=!![],_0x4369ac['style']['cursor']='default';return;}if(userOwnsTheme(_0x125899)){_0x4369ac['textContent']='Apply\x20Theme',_0x4369ac[_0x199ce8(0xd7)]['add'](_0x199ce8(0xd2));return;}if(userData[_0x199ce8(0xbf)]>=_0x503593['price']){_0x4369ac['textContent']='Buy\x20for\x20'+_0x503593['price']+_0x199ce8(0xdd),_0x4369ac[_0x199ce8(0xd7)]['add']('can-afford');return;}_0x4369ac['textContent']='Need\x20'+_0x503593['price']+'\x20Points',_0x4369ac[_0x199ce8(0xd7)]['add']('cannot-afford'),_0x4369ac[_0x199ce8(0xce)]['opacity']=_0x199ce8(0xbc),_0x4369ac['disabled']=!![],_0x4369ac[_0x199ce8(0xce)]['cursor']='not-allowed';});}function showMessage(_0x2578e5,_0x2ba500=a48_0x1afe81(0xc8)){const _0x5e496f=a48_0x1afe81,_0x265b28=document['getElementById']('store-message');_0x265b28&&_0x265b28['remove']();const _0x45a269=document[_0x5e496f(0xc5)]('div');_0x45a269['id']='store-message',_0x45a269['className']='store-message\x20store-message-'+_0x2ba500,_0x45a269['textContent']=_0x2578e5,document['body']['appendChild'](_0x45a269),requestAnimationFrame(()=>{_0x45a269['classList']['add']('visible');}),setTimeout(()=>{_0x45a269['classList']['remove']('visible'),setTimeout(()=>{const _0x4705f4=a48_0x2913;_0x45a269[_0x4705f4(0xdf)]&&_0x45a269['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');