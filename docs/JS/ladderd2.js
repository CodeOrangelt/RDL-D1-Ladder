function a0_0x17e9(){const _0x1e7b5e=['totalDeaths','#F44336','190088INFINa','push','gameMode','#ladder-d2\x20tbody','innerHTML','data','1429386VEDCFi','bind','apply','visibility','username','Error\x20updating\x20D2\x20player\x20positions:','toLowerCase','country','timestamp','7480235EDBrbF','forEach','position','D2\x20Ladder\x20table\x20body\x20not\x20found','tokenName','totalMatches','warn','playersD2','\x0a<tr>\x0a\x20\x20\x20\x20<td>','size','7135sYILrU','display','eloRating','&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','style','change','newElo','2331968sLmwCl','includes','player','</td>\x0a\x20\x20\x20\x20<td>','#ladder-d2\x20thead\x20tr','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','Emerald','console','error','0.85em','3922684XJivRo','td:nth-child(3)','map','1773WGRwxd','571769KYzRPM','<img\x20src=\x22','desc','bold','toString','userProfiles','Bronze','length','toFixed','points','winnerScore','previousElo','getDocuments','approvedMatchesD2','losses','set','#C0C0C0','has','<img\x20src=\x22../images/flags/','constructor','sort','eloHistory','get','totalKills','4500YVLhZN','#50C878','fontSize','winRate','number'];a0_0x17e9=function(){return _0x1e7b5e;};return a0_0x17e9();}(function(_0x57f19c,_0x42a84f){const _0x57625e=a0_0x599f,_0x5c3862=_0x57f19c();while(!![]){try{const _0x49e0c9=parseInt(_0x57625e(0x1bf))/0x1+parseInt(_0x57625e(0x1b1))/0x2+parseInt(_0x57625e(0x1e4))/0x3+parseInt(_0x57625e(0x1bb))/0x4+parseInt(_0x57625e(0x1aa))/0x5*(parseInt(_0x57625e(0x1d7))/0x6)+parseInt(_0x57625e(0x1ed))/0x7+-parseInt(_0x57625e(0x1de))/0x8*(parseInt(_0x57625e(0x1be))/0x9);if(_0x49e0c9===_0x42a84f)break;else _0x5c3862['push'](_0x5c3862['shift']());}catch(_0x518ec2){_0x5c3862['push'](_0x5c3862['shift']());}}}(a0_0x17e9,0x9f618));const a0_0x584c67=(function(){let _0xa54916=!![];return function(_0x132cd3,_0xb9afbc){const _0x5e4ec2=_0xa54916?function(){const _0x2b2b9a=a0_0x599f;if(_0xb9afbc){const _0x4b3857=_0xb9afbc[_0x2b2b9a(0x1e6)](_0x132cd3,arguments);return _0xb9afbc=null,_0x4b3857;}}:function(){};return _0xa54916=![],_0x5e4ec2;};}()),a0_0x5ca741=a0_0x584c67(this,function(){const _0x16c84f=a0_0x599f,_0x12b048=function(){let _0x18712a;try{_0x18712a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x18dd47){_0x18712a=window;}return _0x18712a;},_0x2f2b56=_0x12b048(),_0x5f0c41=_0x2f2b56[_0x16c84f(0x1b8)]=_0x2f2b56['console']||{},_0x5c603c=['log',_0x16c84f(0x1f3),'info',_0x16c84f(0x1b9),'exception','table','trace'];for(let _0x47e2c0=0x0;_0x47e2c0<_0x5c603c[_0x16c84f(0x1c6)];_0x47e2c0++){const _0x2cb132=a0_0x584c67[_0x16c84f(0x1d2)]['prototype'][_0x16c84f(0x1e5)](a0_0x584c67),_0x51574a=_0x5c603c[_0x47e2c0],_0x3243a5=_0x5f0c41[_0x51574a]||_0x2cb132;_0x2cb132['__proto__']=a0_0x584c67['bind'](a0_0x584c67),_0x2cb132[_0x16c84f(0x1c3)]=_0x3243a5['toString']['bind'](_0x3243a5),_0x5f0c41[_0x51574a]=_0x2cb132;}});a0_0x5ca741();function a0_0x599f(_0x266109,_0x4de306){const _0x1311c9=a0_0x17e9();return a0_0x599f=function(_0x5ca741,_0x584c67){_0x5ca741=_0x5ca741-0x1a7;let _0x4202de=_0x1311c9[_0x5ca741];return _0x4202de;},a0_0x599f(_0x266109,_0x4de306);}import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a0_0xd31daf from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x41ab85=![]){const _0x4c49ac=a0_0x599f,_0x27f03b=document['querySelector'](_0x4c49ac(0x1e1));if(!_0x27f03b){console['error'](_0x4c49ac(0x1f0));return;}_0x27f03b['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x358ccc=Date['now']();if(!_0x41ab85&&playerCacheD2['data']&&_0x358ccc-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x3e38b6=collection(db,_0x4c49ac(0x1a7)),_0x42cca6=await a0_0xd31daf[_0x4c49ac(0x1cb)](_0x3e38b6),_0x1e8dd8=[];_0x42cca6[_0x4c49ac(0x1ee)](_0x3fc6fe=>{const _0x2428d6=_0x4c49ac,_0x435a04=_0x3fc6fe['data']();_0x435a04['username']&&_0x1e8dd8['push']({..._0x435a04,'id':_0x3fc6fe['id'],'elo':_0x435a04[_0x2428d6(0x1ac)]||0x0,'position':_0x435a04['position']||Number['MAX_SAFE_INTEGER']});});const _0x27166b=collection(db,_0x4c49ac(0x1c4)),_0x3ea31b=await getDocs(_0x27166b),_0x4dab1a=new Map();_0x3ea31b['forEach'](_0x3040dd=>{const _0x4036f7=_0x4c49ac,_0x44ff1b=_0x3040dd[_0x4036f7(0x1e3)]();_0x44ff1b['username']&&_0x4dab1a['set'](_0x44ff1b[_0x4036f7(0x1e8)][_0x4036f7(0x1ea)](),_0x44ff1b);});for(const _0x54f90f of _0x1e8dd8){const _0x4a295e=_0x54f90f['username']['toLowerCase']();if(_0x4dab1a['has'](_0x4a295e)){const _0x584e62=_0x4dab1a['get'](_0x4a295e);_0x584e62['country']&&(_0x54f90f['country']=_0x584e62['country']['toLowerCase']()),_0x54f90f[_0x4c49ac(0x1c8)]=_0x584e62[_0x4c49ac(0x1c8)]||0x0;}else _0x54f90f['points']=0x0;}const _0x578819=_0x1e8dd8['map'](_0x556880=>_0x556880['username']),_0x2a2dd8=await fetchBatchMatchStatsD2(_0x578819);_0x1e8dd8[_0x4c49ac(0x1d3)]((_0x5eb9b7,_0x3ca095)=>{const _0xac7a80=_0x4c49ac,_0x1e0524=_0x2a2dd8[_0xac7a80(0x1d5)](_0x5eb9b7['username'])?.['totalMatches']||0x0,_0x3757d6=_0x2a2dd8['get'](_0x3ca095['username'])?.['totalMatches']||0x0;if(_0x1e0524===0x0!==(_0x3757d6===0x0))return _0x1e0524===0x0?0x1:-0x1;return(_0x5eb9b7['position']||0x3e7)-(_0x3ca095['position']||0x3e7);}),_0x1e8dd8['forEach']((_0x2297d0,_0x529b05)=>{_0x2297d0['position']=_0x529b05+0x1;}),playerCacheD2['data']=_0x1e8dd8,playerCacheD2['timestamp']=_0x358ccc,updateLadderDisplayD2(_0x1e8dd8);}catch(_0x1fe9dd){console['error']('Error\x20loading\x20D2\x20ladder:',_0x1fe9dd),_0x27f03b[_0x4c49ac(0x1e2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x1fe9dd['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0xca05dd){if(_0xca05dd['length']===0x0)return 0x1;let _0x25bfe0=0x0;return _0xca05dd['forEach'](_0x12536f=>{const _0x1ad296=a0_0x599f;_0x12536f['position']&&typeof _0x12536f['position']===_0x1ad296(0x1db)&&_0x12536f['position']>_0x25bfe0&&(_0x25bfe0=_0x12536f['position']);}),_0x25bfe0+0x1;}async function updatePlayerPositions(_0x476d1c,_0x5e1cbb){const _0x5edc2b=a0_0x599f;try{const _0x271510=collection(db,'playersD2'),_0x36590f=await getDocs(_0x271510),_0x85c9a7=[];_0x36590f['forEach'](_0x266e65=>{_0x85c9a7['push']({'id':_0x266e65['id'],..._0x266e65['data']()});});const _0xb20f2=_0x85c9a7['find'](_0x59090d=>_0x59090d['username']===_0x476d1c),_0x3876c1=_0x85c9a7['find'](_0x5a63f8=>_0x5a63f8['username']===_0x5e1cbb);if(!_0xb20f2||!_0x3876c1){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0xb20f2['position']>_0x3876c1[_0x5edc2b(0x1ef)]){const _0x121236=_0x3876c1['position'];for(const _0x357691 of _0x85c9a7){_0x357691['position']>=_0x3876c1['position']&&_0x357691['position']<_0xb20f2['position']&&_0x357691['username']!==_0x476d1c&&await updateDoc(doc(db,'playersD2',_0x357691['id']),{'position':_0x357691[_0x5edc2b(0x1ef)]+0x1});}await updateDoc(doc(db,'playersD2',_0xb20f2['id']),{'position':_0x121236});if(_0x121236===0x1){const _0x37d1d2=doc(db,'playersD2',_0xb20f2['id']),_0x2ffcd5=await getDoc(_0x37d1d2);!_0x2ffcd5[_0x5edc2b(0x1e3)]()['firstPlaceDate']&&await updateDoc(_0x37d1d2,{'firstPlaceDate':Timestamp['now']()});}if(_0x3876c1['position']===0x1){const _0x11a80b=doc(db,'playersD2',_0x3876c1['id']);await updateDoc(_0x11a80b,{'firstPlaceDate':null});}playerCacheD2[_0x5edc2b(0x1ec)]=0x0;}}catch(_0x286887){console['error'](_0x5edc2b(0x1e9),_0x286887);}}function getPlayerRankNameD2(_0x3c553f,_0x53e8ef=0x0,_0x3428b2=0x0){const _0x1faac2=a0_0x599f;if(_0x53e8ef===0x0)return'Unranked';if(_0x3c553f>=0x3e8&&_0x3428b2>=0x50&&_0x53e8ef>=0x14)return _0x1faac2(0x1b7);if(_0x3c553f>=0x2bc)return'Gold';if(_0x3c553f>=0x1f4)return'Silver';if(_0x3c553f>=0xc8)return _0x1faac2(0x1c5);return'Unranked';}window['refreshLadderDisplayD2']=function(_0x384e97=!![]){const _0x50b4da=a0_0x599f;typeof displayLadderD2==='function'?displayLadderD2(_0x384e97):console[_0x50b4da(0x1f3)]('displayLadderD2\x20function\x20not\x20available');};async function updateLadderDisplayD2(_0x2b3e0a){const _0x55c923=a0_0x599f;_0x2b3e0a['sort']((_0x9f8e11,_0x22f48d)=>_0x9f8e11[_0x55c923(0x1ef)]-_0x22f48d['position']);const _0x5a4247=document['querySelector']('#ladder-d2\x20tbody');if(!_0x5a4247)return;_0x5a4247['innerHTML']='';const _0x479f77=_0x2b3e0a['map'](_0x3782b5=>_0x3782b5['username']),_0x463e3a=await fetchBatchMatchStatsD2(_0x479f77);let _0x55f071=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x55f071=await getTokensByUsernames(_0x479f77);}catch(_0x1726af){console['error']('D2:\x20Error\x20fetching\x20tokens:',_0x1726af);}const _0x59999a=document['querySelector'](_0x55c923(0x1b5));_0x59999a&&(_0x59999a[_0x55c923(0x1e2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x1d40f1=_0x2b3e0a[_0x55c923(0x1bd)](_0x3ceb51=>{const _0x5256f0=_0x463e3a['get'](_0x3ceb51['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x1e466c=_0x55f071['get'](_0x3ceb51['username'])||[],_0x1b9b7c=getPrimaryDisplayToken(_0x1e466c);return createPlayerRowWithTokenD2(_0x3ceb51,_0x5256f0,_0x1b9b7c);})['join']('');_0x5a4247['innerHTML']=_0x1d40f1,getPlayersLastEloChangesD2(_0x479f77)['then'](_0x21096b=>{const _0x36db37=new Map();_0x5a4247['querySelectorAll']('tr')['forEach']((_0x1c1504,_0x5d0a4e)=>{_0x5d0a4e<_0x479f77['length']&&_0x36db37['set'](_0x479f77[_0x5d0a4e],_0x1c1504);}),_0x21096b['forEach']((_0x46e01b,_0x4a0670)=>{const _0x3a34b8=a0_0x599f,_0x578d49=_0x36db37[_0x3a34b8(0x1d5)](_0x4a0670);if(_0x578d49&&_0x46e01b!==0x0){const _0x54dca4=_0x578d49['querySelector'](_0x3a34b8(0x1bc));if(_0x54dca4){const _0x4863be=_0x46e01b>0x0?'+'+_0x46e01b:''+_0x46e01b,_0x51c588=_0x54dca4['querySelector']('.trend-indicator');_0x51c588&&(_0x51c588['textContent']=_0x4863be,_0x51c588[_0x3a34b8(0x1ae)]['color']=_0x46e01b>0x0?'#4CAF50':_0x3a34b8(0x1dd),_0x51c588[_0x3a34b8(0x1ae)]['fontWeight']=_0x3a34b8(0x1c2),_0x51c588['style'][_0x3a34b8(0x1d9)]=_0x3a34b8(0x1ba),_0x51c588['style'][_0x3a34b8(0x1ab)]='inline',_0x51c588['style'][_0x3a34b8(0x1e7)]='visible',_0x51c588[_0x3a34b8(0x1ae)]['opacity']='1');}}});})['catch'](_0x4bb45e=>console[_0x55c923(0x1b9)](_0x55c923(0x1b6),_0x4bb45e));}function createPlayerRowWithTokenD2(_0x49b7d5,_0x114079,_0x2cf0d1){const _0x29161c=a0_0x599f,_0x14e311=parseFloat(_0x49b7d5['elo'])||0x0;let _0xc1a77a='#DC143C';if(_0x114079[_0x29161c(0x1f2)]===0x0)_0xc1a77a='#DC143C';else{if(_0x14e311>=0x3e8&&_0x114079['winRate']>=0x50&&_0x114079['totalMatches']>=0x14)_0xc1a77a=_0x29161c(0x1d8);else{if(_0x14e311>=0x2bc)_0xc1a77a='#FFD700';else{if(_0x14e311>=0x1f4)_0xc1a77a=_0x29161c(0x1cf);else _0x14e311>=0xc8&&(_0xc1a77a='#CD7F32');}}}let _0x3b6efd='';_0x49b7d5[_0x29161c(0x1eb)]&&(_0x3b6efd=_0x29161c(0x1d1)+_0x49b7d5['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x49b7d5['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x4342a3='';return _0x2cf0d1&&(_0x4342a3=_0x29161c(0x1c0)+_0x2cf0d1['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2cf0d1['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x2cf0d1[_0x29161c(0x1f1)]+'\x20'+(_0x2cf0d1['equipped']?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x29161c(0x1a8)+_0x49b7d5['position']+'</td>\x0a\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x49b7d5['username'])+_0x29161c(0x1ad)+_0xc1a77a+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x49b7d5['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3b6efd+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4342a3+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0xc1a77a+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x14e311+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td>'+_0x114079['totalMatches']+_0x29161c(0x1b4)+_0x114079['wins']+_0x29161c(0x1b4)+_0x114079['losses']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x114079['kda']+_0x29161c(0x1b4)+_0x114079[_0x29161c(0x1da)]+'%</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0x49b7d5['points']||0x0)+'</td>\x0a</tr>';}async function getPlayersLastEloChangesD2(_0x44dee1){const _0x3c63f8=a0_0x599f,_0x4d9550=new Map();_0x44dee1['forEach'](_0x398905=>_0x4d9550[_0x3c63f8(0x1ce)](_0x398905,0x0));try{const _0x313812=collection(db,'eloHistoryD2'),_0x296010=query(_0x313812,orderBy(_0x3c63f8(0x1ec),'desc'),limit(0x64)),_0x402871=await getDocs(_0x296010),_0xd44926=new Map(),_0x4491fd=await getDocs(collection(db,'playersD2'));_0x4491fd['forEach'](_0x2e4606=>{const _0x1f472b=_0x3c63f8,_0x21e533=_0x2e4606[_0x1f472b(0x1e3)]();_0x21e533['username']&&_0xd44926['set'](_0x2e4606['id'],_0x21e533[_0x1f472b(0x1e8)]);});const _0x852645=new Map();_0x402871['forEach'](_0x365312=>{const _0x4cec84=_0x3c63f8,_0xc1a3e0=_0x365312['data']();let _0x429c5c=_0xc1a3e0['username']||_0xc1a3e0['playerUsername'];!_0x429c5c&&_0xc1a3e0[_0x4cec84(0x1b3)]&&_0xd44926['has'](_0xc1a3e0['player'])&&(_0x429c5c=_0xd44926[_0x4cec84(0x1d5)](_0xc1a3e0[_0x4cec84(0x1b3)])),_0x429c5c&&_0x44dee1[_0x4cec84(0x1b2)](_0x429c5c)&&(!_0x852645[_0x4cec84(0x1d0)](_0x429c5c)&&_0x852645['set'](_0x429c5c,[]),_0x852645['get'](_0x429c5c)[_0x4cec84(0x1df)]({..._0xc1a3e0,'timestamp':_0xc1a3e0[_0x4cec84(0x1ec)]?.['seconds']||0x0,'username':_0x429c5c}));}),_0x852645['forEach']((_0x1274b2,_0x46d8af)=>{const _0x1bb077=_0x3c63f8;if(_0x1274b2['length']>0x0){_0x1274b2['sort']((_0x2436c8,_0xb6acfc)=>_0xb6acfc['timestamp']-_0x2436c8['timestamp']);const _0x3fc9fc=_0x1274b2['find'](_0x389427=>_0x389427['change']!==undefined||_0x389427[_0x1bb077(0x1b0)]!==undefined&&_0x389427['previousElo']!==undefined);if(_0x3fc9fc){let _0x501824;if(_0x3fc9fc['change']!==undefined)_0x501824=_0x3fc9fc['change'];else _0x3fc9fc['newElo']!==undefined&&_0x3fc9fc['previousElo']!==undefined&&(_0x501824=_0x3fc9fc['newElo']-_0x3fc9fc[_0x1bb077(0x1ca)]);_0x501824!==undefined&&_0x4d9550['set'](_0x46d8af,_0x501824);}}});if(_0x852645[_0x3c63f8(0x1a9)]===0x0){const _0x2e2a40=collection(db,_0x3c63f8(0x1d4)),_0x43aed2=query(_0x2e2a40,where(_0x3c63f8(0x1e0),'==','D2'),orderBy(_0x3c63f8(0x1ec),_0x3c63f8(0x1c1)),limit(0x32));try{const _0x5d831a=await getDocs(_0x43aed2);_0x5d831a[_0x3c63f8(0x1ee)](_0x46cbf0=>{const _0x490460=_0x3c63f8,_0x36cf06=_0x46cbf0['data'](),_0x360396=_0x36cf06['username']||_0x36cf06['playerUsername'];if(_0x360396&&_0x44dee1[_0x490460(0x1b2)](_0x360396)){const _0x13fccb=_0x36cf06[_0x490460(0x1af)]||(_0x36cf06['newElo']!==undefined&&_0x36cf06['previousElo']!==undefined?_0x36cf06[_0x490460(0x1b0)]-_0x36cf06['previousElo']:0x0);_0x13fccb!==0x0&&_0x4d9550['set'](_0x360396,_0x13fccb);}});}catch(_0x511465){}}}catch(_0x4bdb0a){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x4bdb0a);}return _0x4d9550;}async function fetchBatchMatchStatsD2(_0x1ae795){const _0x1da3eb=a0_0x599f,_0x567fe6=new Map();try{_0x1ae795['forEach'](_0x27aef9=>{_0x567fe6['set'](_0x27aef9,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x3116b2=collection(db,_0x1da3eb(0x1cc)),_0x5e01c7=await getDocs(_0x3116b2);_0x5e01c7['forEach'](_0x5036aa=>{const _0x3f36cb=_0x1da3eb,_0x3a7b7e=_0x5036aa['data'](),_0xf4c5b6=_0x3a7b7e['winnerUsername'],_0x303626=_0x3a7b7e['loserUsername'];if(_0x1ae795['includes'](_0xf4c5b6)){const _0x384134=_0x567fe6['get'](_0xf4c5b6);_0x384134['wins']++,_0x384134['totalMatches']++,_0x384134['totalKills']+=parseInt(_0x3a7b7e[_0x3f36cb(0x1c9)])||0x0,_0x384134[_0x3f36cb(0x1dc)]+=parseInt(_0x3a7b7e['loserScore'])||0x0;}if(_0x1ae795['includes'](_0x303626)){const _0x4a8c0c=_0x567fe6[_0x3f36cb(0x1d5)](_0x303626);_0x4a8c0c[_0x3f36cb(0x1cd)]++,_0x4a8c0c['totalMatches']++,_0x4a8c0c['totalKills']+=parseInt(_0x3a7b7e['loserScore'])||0x0,_0x4a8c0c['totalDeaths']+=parseInt(_0x3a7b7e['winnerScore'])||0x0;}}),_0x1ae795[_0x1da3eb(0x1ee)](_0x3c4efc=>{const _0x232b90=_0x1da3eb,_0x577df2=_0x567fe6[_0x232b90(0x1d5)](_0x3c4efc);_0x577df2['kda']=_0x577df2['totalDeaths']>0x0?(_0x577df2[_0x232b90(0x1d6)]/_0x577df2['totalDeaths'])[_0x232b90(0x1c7)](0x2):_0x577df2['totalKills']['toFixed'](0x2),_0x577df2['winRate']=_0x577df2[_0x232b90(0x1f2)]>0x0?(_0x577df2['wins']/_0x577df2['totalMatches']*0x64)[_0x232b90(0x1c7)](0x1):0x0;});}catch(_0x45934b){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x45934b);}return _0x567fe6;}export{displayLadderD2,updatePlayerPositions};