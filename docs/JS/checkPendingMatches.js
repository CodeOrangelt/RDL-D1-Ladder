const a0_0x4b343d=a0_0x5926;function a0_0x5926(_0x41acc3,_0x221860){const _0x4982d3=a0_0x5a3b();return a0_0x5926=function(_0x35d805,_0xfa3eb3){_0x35d805=_0x35d805-0x18b;let _0x281e50=_0x4982d3[_0x35d805];return _0x281e50;},a0_0x5926(_0x41acc3,_0x221860);}(function(_0x419440,_0xe8746){const _0x5bb492=a0_0x5926,_0x1e98b7=_0x419440();while(!![]){try{const _0x351e06=-parseInt(_0x5bb492(0x19e))/0x1+parseInt(_0x5bb492(0x19c))/0x2*(-parseInt(_0x5bb492(0x1ae))/0x3)+-parseInt(_0x5bb492(0x196))/0x4+-parseInt(_0x5bb492(0x19a))/0x5*(parseInt(_0x5bb492(0x1ac))/0x6)+-parseInt(_0x5bb492(0x1b6))/0x7*(parseInt(_0x5bb492(0x1a8))/0x8)+-parseInt(_0x5bb492(0x1a7))/0x9*(-parseInt(_0x5bb492(0x199))/0xa)+-parseInt(_0x5bb492(0x1a1))/0xb*(-parseInt(_0x5bb492(0x1a3))/0xc);if(_0x351e06===_0xe8746)break;else _0x1e98b7['push'](_0x1e98b7['shift']());}catch(_0x4f877f){_0x1e98b7['push'](_0x1e98b7['shift']());}}}(a0_0x5a3b,0xd5a76));const a0_0xfa3eb3=(function(){let _0x15b177=!![];return function(_0x4216dc,_0x46ef60){const _0x5c1bff=_0x15b177?function(){const _0x2fd470=a0_0x5926;if(_0x46ef60){const _0x43b681=_0x46ef60[_0x2fd470(0x18d)](_0x4216dc,arguments);return _0x46ef60=null,_0x43b681;}}:function(){};return _0x15b177=![],_0x5c1bff;};}()),a0_0x35d805=a0_0xfa3eb3(this,function(){const _0x45d379=a0_0x5926;let _0x344541;try{const _0x1a4fa7=Function('return\x20(function()\x20'+_0x45d379(0x1b0)+');');_0x344541=_0x1a4fa7();}catch(_0x500486){_0x344541=window;}const _0x17b869=_0x344541[_0x45d379(0x1bd)]=_0x344541['console']||{},_0x434023=['log',_0x45d379(0x1a6),'info','error','exception','table',_0x45d379(0x19b)];for(let _0x3645fd=0x0;_0x3645fd<_0x434023['length'];_0x3645fd++){const _0x324fbd=a0_0xfa3eb3[_0x45d379(0x1a5)]['prototype'][_0x45d379(0x192)](a0_0xfa3eb3),_0x811fbb=_0x434023[_0x3645fd],_0x5a5ee8=_0x17b869[_0x811fbb]||_0x324fbd;_0x324fbd['__proto__']=a0_0xfa3eb3['bind'](a0_0xfa3eb3),_0x324fbd['toString']=_0x5a5ee8['toString']['bind'](_0x5a5ee8),_0x17b869[_0x811fbb]=_0x324fbd;}});a0_0x35d805();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a0_0x4b343d(0x1bc),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x4c7e64=![]){const _0x9570bb=a0_0x4b343d,_0x42ee2d=Date['now'](),_0x5a5df4=checkNotificationCache();if(_0x5a5df4!==null&&!_0x4c7e64){updateNotificationDot(_0x5a5df4);if(_0x42ee2d-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x42ee2d;const _0x229697=auth['currentUser'];if(!_0x229697){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x4f78c3,_0x9552f4,_0x45d33f]=await Promise['all']([checkForPendingMatchesInCollection(_0x229697,_0x9570bb(0x1af)),checkForPendingMatchesInCollection(_0x229697,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x229697,'pendingMatchesD3')]),_0x99c3c9=_0x4f78c3||_0x9552f4||_0x45d33f;updateNotificationDot(_0x99c3c9),updateNotificationCache(_0x99c3c9);}catch(_0x2de1d4){console['error'](_0x9570bb(0x193),_0x2de1d4);}}async function checkForPendingMatchesInCollection(_0x58dcd0,_0x504fd5){const _0x1febfe=a0_0x4b343d,_0xc5ca61=_0x58dcd0[_0x1febfe(0x1a2)],_0xabb63f=_0x58dcd0['email'],_0x2cbf8a=query(collection(db,_0x504fd5),where('winnerId','==',_0xc5ca61),where('approved','==',![])),_0x2e8870=await getDocs(_0x2cbf8a);if(!_0x2e8870['empty'])return!![];if(_0xabb63f){const _0x395e29=query(collection(db,_0x504fd5),where(_0x1febfe(0x1b1),'==',_0xabb63f),where('approved','==',![])),_0x3be3a4=await getDocs(_0x395e29);if(!_0x3be3a4['empty'])return!![];}let _0x24c7bf=await getUsernameFromAllSources(_0x58dcd0);if(_0x24c7bf){const _0x203bc2=query(collection(db,_0x504fd5),where('winnerUsername','==',_0x24c7bf),where('approved','==',![])),_0xa8f7bd=await getDocs(_0x203bc2);if(!_0xa8f7bd['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x5d7c3e){const _0x4bc87d=a0_0x4b343d,_0x3425be=localStorage['getItem']('currentUsername');if(_0x3425be)return _0x3425be;try{const [_0x51e7ab,_0x1dfea4,_0x46f24e]=await Promise[_0x4bc87d(0x1b9)]([getDocs(query(collection(db,_0x4bc87d(0x198)),where('userId','==',_0x5d7c3e['uid']))),getDocs(query(collection(db,'playersD2'),where(_0x4bc87d(0x1b2),'==',_0x5d7c3e['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x5d7c3e['uid'])))]);if(!_0x51e7ab[_0x4bc87d(0x190)]){const _0x498bfb=_0x51e7ab['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x498bfb),_0x498bfb;}if(!_0x1dfea4['empty']){const _0x34d91c=_0x1dfea4['docs'][0x0]['data']()['username'];return localStorage[_0x4bc87d(0x18f)]('currentUsername',_0x34d91c),_0x34d91c;}if(!_0x46f24e['empty']){const _0x29f83a=_0x46f24e['docs'][0x0][_0x4bc87d(0x1b3)]()[_0x4bc87d(0x1b5)];return localStorage[_0x4bc87d(0x18f)](_0x4bc87d(0x1ba),_0x29f83a),_0x29f83a;}const _0x1683fb=await getDoc(doc(db,'users',_0x5d7c3e[_0x4bc87d(0x1a2)]));if(_0x1683fb['exists']()&&_0x1683fb['data']()['username']){const _0x582f63=_0x1683fb[_0x4bc87d(0x1b3)]()['username'];return localStorage[_0x4bc87d(0x18f)](_0x4bc87d(0x1ba),_0x582f63),_0x582f63;}}catch(_0x4b075c){console[_0x4bc87d(0x19f)]('Error\x20fetching\x20username:',_0x4b075c);}if(_0x5d7c3e['email'])return _0x5d7c3e['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x33b8ec){const _0x4eced5=a0_0x4b343d,_0x409721={'status':_0x33b8ec,'timestamp':Date[_0x4eced5(0x191)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x4eced5(0x1b7)](_0x409721));}function checkNotificationCache(){const _0x3082d0=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x3082d0)return null;try{const {status:_0x4f9322,timestamp:_0x454e39}=JSON['parse'](_0x3082d0),_0xba30e4=Date['now']();if(_0xba30e4-_0x454e39<CACHE_EXPIRY)return _0x4f9322;}catch(_0x1ffed7){}return null;}export function updateNotificationDot(_0x324dbc){const _0x173ff1=a0_0x4b343d,_0x134cb0=new MutationObserver((_0x409c3a,_0x3184ed)=>{const _0x56173c=a0_0x5926,_0x455a47=document['getElementById'](_0x56173c(0x1ab));_0x455a47&&(updateDotStyle(_0x455a47,_0x324dbc),_0x3184ed['disconnect']());});_0x134cb0['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x3c7895=document['getElementById']('report-match-notification');_0x3c7895&&(updateDotStyle(_0x3c7895,_0x324dbc),_0x134cb0['disconnect']()),setTimeout(()=>_0x134cb0[_0x173ff1(0x19d)](),0x1388);}function a0_0x5a3b(){const _0x39c812=['disconnect','1690848FUianw','error','top','913PqgVNT','uid','418728SzdhIA','display','constructor','warn','7661079XcCwjv','64quKZdg','999','height','report-match-notification','18Ukidil','addEventListener','3KNGsXj','pendingMatches','{}.constructor(\x22return\x20this\x22)(\x20)','winnerEmail','userId','data','removeItem','username','96838iFKAbM','stringify','backgroundColor','all','currentUsername','50%','pendingMatchesCache','console','10px','DOMContentLoaded','apply','borderRadius','setItem','empty','now','bind','Error\x20checking\x20pending\x20matches:','none','style','850652PeHMPF','-5px','players','10RMMfqq','1258995lkJyBM','trace','205454KWeflK'];a0_0x5a3b=function(){return _0x39c812;};return a0_0x5a3b();}function updateDotStyle(_0x55de74,_0x83371e){const _0x399c7f=a0_0x4b343d;_0x83371e?(_0x55de74[_0x399c7f(0x195)][_0x399c7f(0x1a4)]='block',_0x55de74[_0x399c7f(0x195)][_0x399c7f(0x1b8)]='#ff3b30',_0x55de74['style']['width']=_0x399c7f(0x18b),_0x55de74['style'][_0x399c7f(0x1aa)]='10px',_0x55de74['style']['position']='absolute',_0x55de74[_0x399c7f(0x195)][_0x399c7f(0x1a0)]=_0x399c7f(0x197),_0x55de74['style']['right']='-8px',_0x55de74[_0x399c7f(0x195)][_0x399c7f(0x18e)]=_0x399c7f(0x1bb),_0x55de74['style']['border']='2px\x20solid\x20white',_0x55de74['style']['zIndex']=_0x399c7f(0x1a9)):_0x55de74[_0x399c7f(0x195)][_0x399c7f(0x1a4)]=_0x399c7f(0x194);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a0_0x4b343d(0x1ad)](a0_0x4b343d(0x18c),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x386ea8=a0_0x5926;localStorage[_0x386ea8(0x1b4)](_0x386ea8(0x1ba)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});