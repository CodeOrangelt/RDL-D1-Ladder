const a46_0x5e5afd=a46_0x4b83,a46_0x13d9aa=(function(){let _0x49cba0=!![];return function(_0x255f9e,_0x3800d1){const _0x5c2139=_0x49cba0?function(){if(_0x3800d1){const _0x349bda=_0x3800d1['apply'](_0x255f9e,arguments);return _0x3800d1=null,_0x349bda;}}:function(){};return _0x49cba0=![],_0x5c2139;};}()),a46_0x446bc1=a46_0x13d9aa(this,function(){const _0xfd4fe2=a46_0x4b83;let _0x36ae97;try{const _0x457065=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x36ae97=_0x457065();}catch(_0x99aff8){_0x36ae97=window;}const _0x1762b8=_0x36ae97['console']=_0x36ae97[_0xfd4fe2(0x101)]||{},_0x1f8635=['log','warn','info',_0xfd4fe2(0x12a),'exception','table','trace'];for(let _0x300769=0x0;_0x300769<_0x1f8635['length'];_0x300769++){const _0x5735db=a46_0x13d9aa['constructor']['prototype']['bind'](a46_0x13d9aa),_0x3598a4=_0x1f8635[_0x300769],_0x47084d=_0x1762b8[_0x3598a4]||_0x5735db;_0x5735db['__proto__']=a46_0x13d9aa['bind'](a46_0x13d9aa),_0x5735db['toString']=_0x47084d['toString']['bind'](_0x47084d),_0x1762b8[_0x3598a4]=_0x5735db;}});a46_0x446bc1();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':a46_0x5e5afd(0x14b)},'contrast':{'price':0x0,'name':a46_0x5e5afd(0x145),'description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':a46_0x5e5afd(0x14d),'description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':a46_0x5e5afd(0x15e),'description':'Only\x20the\x20best\x20get\x20this\x20one'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'cockpit':{'price':0x4b0,'name':'Cockpit','description':a46_0x5e5afd(0x15b)}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':'powerup'},'fan':{'price':0x96,'name':'Fan','description':a46_0x5e5afd(0x132),'image':'../images/tokens/Fan.gif','category':'fun'},'marker':{'price':0xfa,'name':'Marker','description':'Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','image':'../images/tokens/Marker.gif','category':'fun'},'laser':{'price':0x12c,'name':a46_0x5e5afd(0x172),'description':'Classic\x20laser\x20weapon\x20token.','image':'../images/tokens/Laser.gif','category':'weapon'},'pbomb':{'price':0x15e,'name':'Proximity\x20Bomb','description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':'Devastating\x20fusion\x20weapon\x20technology','image':'../images/tokens/subgame/fusion.gif','category':'weapon'},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':a46_0x5e5afd(0x15a),'description':a46_0x5e5afd(0x17a),'image':a46_0x5e5afd(0x178),'category':'blob'},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':'weapon'},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':'Become\x20one\x20with\x20the\x20shadows','image':a46_0x5e5afd(0x171),'category':'special'},'pwr02':{'price':0x258,'name':a46_0x5e5afd(0x148),'description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':'powerup'},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':a46_0x5e5afd(0x14c),'image':a46_0x5e5afd(0x15c),'category':'weapon'},'plasmablobl':{'price':0x258,'name':a46_0x5e5afd(0x136),'description':'A\x20mysterious\x20plasma\x20blob.','image':a46_0x5e5afd(0x16a),'category':a46_0x5e5afd(0x106)},'smissile':{'price':0x28a,'name':a46_0x5e5afd(0x17c),'description':'Intelligent\x20targeting\x20system','image':'../images/tokens/subgame/smissile.gif','category':a46_0x5e5afd(0x12b)},'smartmine':{'price':0x2ee,'name':a46_0x5e5afd(0x16f),'description':a46_0x5e5afd(0x10b),'image':'../images/tokens/Smartmine.gif','category':'weapon'},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':a46_0x5e5afd(0xfd),'image':'../images/tokens/subgame/mmissile.gif','category':a46_0x5e5afd(0x12b)},'gauge18':{'price':0x320,'name':a46_0x5e5afd(0x107),'description':a46_0x5e5afd(0xf5),'image':a46_0x5e5afd(0x124),'category':'equipment'},'extralife':{'price':0x320,'name':a46_0x5e5afd(0x102),'description':'A\x20rare\x20extra\x20life\x20token.','image':'../images/tokens/Extralife.gif','category':'special'},'hostage':{'price':0x3b6,'name':'Hostage','description':a46_0x5e5afd(0x187),'image':'../images/tokens/Hostage.gif','category':'special'},'phoenix':{'price':0x3b6,'name':'Phoenix\x20Cannon','description':'Fiery\x20phoenix\x20cannon\x20token.','image':'../images/tokens/Phoenix.gif','category':'weapon'},'blob02':{'price':0x3e8,'name':a46_0x5e5afd(0x14f),'description':a46_0x5e5afd(0xfe),'image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':'Invulnerability','description':a46_0x5e5afd(0xf8),'image':'../images/tokens/Invuln.gif','category':'powerup'},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':a46_0x5e5afd(0x11f),'image':'../images/tokens/blob03.gif','category':'blob'},'reactor':{'price':0x7d0,'name':'Reactor','description':'The\x20heart\x20of\x20every\x20mine.','image':'../images/tokens/Reactor.gif','category':'special'},'pyro':{'price':0xbb8,'name':'Pyro','description':a46_0x5e5afd(0x117),'image':a46_0x5e5afd(0x104),'category':'ship'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener'](a46_0x5e5afd(0x174),()=>{const _0x2f37f8=a46_0x5e5afd;console['log']('🏪\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x2f37f8(0x10a)]('store-content'),pointsDisplay=document['getElementById']('user-points'),authWarning=document[_0x2f37f8(0x10a)](_0x2f37f8(0x137)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x32fafa=>{const _0x100975=a46_0x4b83;if(_0x32fafa){console['log'](_0x100975(0x13b),_0x32fafa[_0x100975(0x142)]||_0x32fafa['email']);if(authWarning)authWarning['style']['display']='none';if(storeContainer)storeContainer[_0x100975(0x167)]['display']='block';await loadUserData(_0x32fafa),updateThemeButtons(),updateTokenButtons();}else{console['log'](_0x100975(0x12d));if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x100975(0x114)]=![];}});}async function loadUserData(_0x5693ba){const _0x390a57=a46_0x5e5afd;try{const _0x54c256=doc(db,_0x390a57(0x183),_0x5693ba[_0x390a57(0x134)]),_0x133093=await getDoc(_0x54c256);if(_0x133093['exists']()){const _0x5699d3=_0x133093[_0x390a57(0x160)]();userData={'points':_0x5699d3[_0x390a57(0x11d)]||0x0,'inventory':_0x5699d3['inventory']||[],'isAdmin':_0x5699d3['isAdmin']||![],'equippedToken':_0x5699d3['equippedToken']||null},pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x390a57(0x143)]()),window['isUserAdmin']=userData['isAdmin'],userData[_0x390a57(0x127)]&&(console['log'](_0x390a57(0x115)),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||'none'));}else await setDoc(_0x54c256,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x5693ba[_0x390a57(0x142)]||_0x5693ba[_0x390a57(0x105)]?.[_0x390a57(0x180)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay[_0x390a57(0x10e)]='0'),window['isUserAdmin']=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x5cb407){console[_0x390a57(0x12a)]('Error\x20loading\x20user\x20data:',_0x5cb407);}}function userOwnsTheme(_0x24e842){const _0x1c231b=a46_0x5e5afd;if(THEMES[_0x24e842]?.['price']===0x0)return!![];return userData['inventory']['includes'](_0x1c231b(0x125)+_0x24e842);}function userOwnsToken(_0x54d1d4){return userData['inventory']['includes']('token_'+_0x54d1d4);}function userHasTokenEquipped(_0x3048a2){return userData['equippedToken']===_0x3048a2;}function getEquippedToken(){return userData['equippedToken']||null;}async function purchaseTheme(_0x4f7ca8){const _0x30c176=a46_0x5e5afd,_0x337fc1=auth[_0x30c176(0x131)];if(!_0x337fc1)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x57d5a9=THEMES[_0x4f7ca8];if(!_0x57d5a9)return console['error']('Theme\x20'+_0x4f7ca8+'\x20not\x20found'),![];if(userData[_0x30c176(0x11d)]<_0x57d5a9['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x57d5a9[_0x30c176(0x116)]-userData['points'])+_0x30c176(0x157),'error'),![];if(userOwnsTheme(_0x4f7ca8))return showMessage('You\x20already\x20own\x20the\x20'+_0x57d5a9['name']+_0x30c176(0x154),'info'),![];try{return await processPurchase(_0x4f7ca8,_0x57d5a9,'theme');}catch(_0x450980){return console['error'](_0x30c176(0x13a),_0x450980),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x30c176(0x12a)),![];}}async function purchaseToken(_0x17b59a){const _0x260d48=a46_0x5e5afd,_0x52a5e0=auth['currentUser'];if(!_0x52a5e0)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error'),![];const _0x6ad6f8=TOKENS[_0x17b59a];if(!_0x6ad6f8)return console['error'](_0x260d48(0x184)+_0x17b59a+_0x260d48(0x15f)),![];if(userData['points']<_0x6ad6f8['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x6ad6f8['price']-userData['points'])+_0x260d48(0x157),'error'),![];if(userOwnsToken(_0x17b59a))return showMessage('You\x20already\x20own\x20the\x20'+_0x6ad6f8['name']+'\x20token',_0x260d48(0x16c)),![];try{return await processPurchase(_0x17b59a,_0x6ad6f8,'token');}catch(_0x3d33a7){return console[_0x260d48(0x12a)](_0x260d48(0x185),_0x3d33a7),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x260d48(0x12a)),![];}}async function processPurchase(_0x41606e,_0x50a762,_0x49059f){const _0x39bbd9=a46_0x5e5afd,_0x58d847=auth['currentUser'];try{const _0x58cb2a=doc(db,'userProfiles',_0x58d847[_0x39bbd9(0x134)]),_0x2b6544=await getDoc(_0x58cb2a);if(!_0x2b6544['exists']())return showMessage('User\x20profile\x20not\x20found',_0x39bbd9(0x12a)),![];const _0x23c92d=_0x2b6544['data'](),_0x49fd06=_0x23c92d['points']||0x0,_0x1dc925=_0x23c92d[_0x39bbd9(0x129)]||[];if(_0x49fd06<_0x50a762[_0x39bbd9(0x116)])return showMessage('Insufficient\x20points',_0x39bbd9(0x12a)),![];if(_0x1dc925['includes'](_0x49059f+'_'+_0x41606e))return showMessage('You\x20already\x20own\x20this\x20'+_0x49059f,'info'),![];const _0x4d5664=_0x49fd06-_0x50a762['price'],_0x4528fb=[..._0x1dc925,_0x49059f+'_'+_0x41606e];await updateDoc(_0x58cb2a,{'points':_0x4d5664,'inventory':_0x4528fb,'lastPurchase':serverTimestamp()});if(_0x49059f==='token')try{const _0x509209=doc(db,_0x39bbd9(0x122),_0x58d847['uid']),_0x7cb9aa=await getDoc(_0x509209);let _0x45fbe9=[];_0x7cb9aa['exists']()&&(_0x45fbe9=_0x7cb9aa['data']()['tokens']||[]);const _0x2b9fd2=new Date();_0x45fbe9['push']({'tokenId':_0x41606e,'tokenName':_0x50a762['name'],'tokenImage':_0x50a762[_0x39bbd9(0x152)],'category':_0x50a762['category'],'purchasedAt':_0x2b9fd2,'price':_0x50a762['price'],'equipped':![]}),await setDoc(_0x509209,{'userId':_0x58d847['uid'],'username':_0x23c92d['username']||_0x58d847['displayName']||'Unknown','tokens':_0x45fbe9,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache===_0x39bbd9(0x186)&&clearTokenCache(_0x58d847['uid']),console[_0x39bbd9(0x155)]('✅\x20Token\x20'+_0x41606e+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x2f3b07){console['warn'](_0x39bbd9(0x14a),_0x2f3b07),_0x2f3b07['code']==='permission-denied'?console['log']('🔧\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console[_0x39bbd9(0x12a)](_0x39bbd9(0x11e),_0x2f3b07);}try{await addDoc(collection(db,'transactions'),{'userId':_0x58d847['uid'],'userEmail':_0x58d847[_0x39bbd9(0x105)],'itemId':_0x49059f+'_'+_0x41606e,'itemTitle':_0x50a762[_0x39bbd9(0x16b)],'price':_0x50a762[_0x39bbd9(0x116)],'type':'purchase','category':_0x49059f,'timestamp':serverTimestamp()});}catch(_0x102678){console[_0x39bbd9(0x14e)]('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x102678);}return userData['points']=_0x4d5664,userData[_0x39bbd9(0x129)]=_0x4528fb,pointsDisplay&&(pointsDisplay[_0x39bbd9(0x10e)]=userData['points']['toLocaleString']()),updateTokenButtons(),_0x49059f==='theme'&&updateThemeButtons(),console[_0x39bbd9(0x155)]('✅\x20Purchased\x20'+_0x50a762['name']+'\x20for\x20'+_0x50a762['price']+'\x20points'),showMessage('Successfully\x20purchased\x20'+_0x50a762['name']+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0x2d4848){console['error']('Purchase\x20processing\x20error:',_0x2d4848);if(_0x2d4848['code']===_0x39bbd9(0x144))showMessage('Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.',_0x39bbd9(0x12a));else{if(_0x2d4848['code']===_0x39bbd9(0x175))showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.','error');else _0x2d4848['code']===_0x39bbd9(0x182)?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.',_0x39bbd9(0x12a)):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error');}return![];}}async function equipToken(_0x4c779f){const _0x594253=a46_0x5e5afd,_0x359484=auth['currentUser'];if(!_0x359484)return showMessage(_0x594253(0x161),'error'),![];const _0x4fb2df=TOKENS[_0x4c779f];if(!_0x4fb2df)return console['error']('Token\x20'+_0x4c779f+'\x20not\x20found'),![];if(!userOwnsToken(_0x4c779f))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','error'),![];try{const _0x22e589=doc(db,'userProfiles',_0x359484['uid']);await updateDoc(_0x22e589,{'equippedToken':_0x4c779f,'lastTokenEquip':serverTimestamp()});try{const _0x5a3eb7=doc(db,'userTokens',_0x359484['uid']),_0x459a9b=await getDoc(_0x5a3eb7);if(_0x459a9b['exists']()){const _0xc0f0f0=_0x459a9b['data'](),_0xdf17a8=_0xc0f0f0['tokens']||[],_0x96c9a1=_0xdf17a8['map'](_0x36b75d=>({..._0x36b75d,'equipped':_0x36b75d['tokenId']===_0x4c779f}));await updateDoc(_0x5a3eb7,{'tokens':_0x96c9a1,'equippedToken':_0x4c779f,'lastUpdated':serverTimestamp()});}}catch(_0x1d5e15){console[_0x594253(0x14e)]('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x1d5e15);}return userData['equippedToken']=_0x4c779f,typeof clearTokenCache==='function'&&(clearTokenCache(_0x359484['uid']),clearTokenCache()),setTimeout(()=>{const _0x1d5f22=_0x594253;window['displayLadder']&&typeof window[_0x1d5f22(0x138)]==='function'&&(console['log']('🔄\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x1d5f22(0x12e)][_0x1d5f22(0x135)]===_0x1d5f22(0x186)&&window['RedeemStore']['refreshUI']();},0x1f4),console[_0x594253(0x155)]('✅\x20Equipped\x20token:\x20'+_0x4fb2df['name']),showMessage(_0x4fb2df['name']+_0x594253(0x12c),_0x594253(0x168)),!![];}catch(_0x213dc2){return console[_0x594253(0x12a)]('Token\x20equip\x20failed:',_0x213dc2),_0x213dc2['code']===_0x594253(0x144)?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','warning'):showMessage(_0x594253(0x169)+_0x213dc2['message'],'error'),![];}}async function unequipToken(){const _0x4ef465=a46_0x5e5afd,_0x2d3e07=auth['currentUser'];if(!_0x2d3e07)return showMessage(_0x4ef465(0x118),'error'),![];if(!userData['equippedToken'])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x325ba0=doc(db,'userProfiles',_0x2d3e07[_0x4ef465(0x134)]);await updateDoc(_0x325ba0,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x5ceb17=doc(db,'userTokens',_0x2d3e07['uid']),_0x5b568f=await getDoc(_0x5ceb17);if(_0x5b568f[_0x4ef465(0xf6)]()){const _0x3becea=_0x5b568f[_0x4ef465(0x160)](),_0x13ebca=_0x3becea[_0x4ef465(0x163)]||[],_0x2d384c=_0x13ebca[_0x4ef465(0xfc)](_0x56c9c=>({..._0x56c9c,'equipped':![]}));await updateDoc(_0x5ceb17,{'tokens':_0x2d384c,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache==='function'&&(clearTokenCache(_0x2d3e07['uid']),clearTokenCache()),setTimeout(()=>{const _0x3b3e7e=_0x4ef465;window['displayLadder']&&typeof window[_0x3b3e7e(0x138)]===_0x3b3e7e(0x186)&&(console[_0x3b3e7e(0x155)]('🔄\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window['RedeemStore']['refreshUI']===_0x3b3e7e(0x186)&&window['RedeemStore']['refreshUI']();},0x1f4),console['log'](_0x4ef465(0x150)),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.',_0x4ef465(0x168)),!![];}catch(_0x3ca042){return console['error']('Token\x20unequip\x20failed:',_0x3ca042),showMessage('Failed\x20to\x20unequip\x20token:\x20'+_0x3ca042[_0x4ef465(0x10f)],_0x4ef465(0x12a)),![];}}async function sellToken(_0x43d270){const _0x5c0a58=a46_0x5e5afd,_0x1821b6=auth['currentUser'];if(!_0x1821b6)return showMessage('Please\x20sign\x20in\x20to\x20sell\x20tokens','error'),![];if(!userData[_0x5c0a58(0x127)])return showMessage(_0x5c0a58(0x10c),'error'),![];const _0xb0069=TOKENS[_0x43d270];if(!_0xb0069)return console['error'](_0x5c0a58(0x184)+_0x43d270+_0x5c0a58(0x15f)),![];if(!userOwnsToken(_0x43d270))return showMessage('You\x20don\x27t\x20own\x20this\x20token','error'),![];try{const _0x455158=doc(db,_0x5c0a58(0x183),_0x1821b6[_0x5c0a58(0x134)]),_0x56505e=await getDoc(_0x455158),_0x2e3e82=_0x56505e['data'](),_0x38829b=Math['floor'](_0xb0069[_0x5c0a58(0x116)]*0.5),_0x59f191=(_0x2e3e82['points']||0x0)+_0x38829b,_0x571821=(_0x2e3e82['inventory']||[])['filter'](_0xcc0582=>_0xcc0582!==_0x5c0a58(0x188)+_0x43d270),_0x4c0611=_0x2e3e82['equippedToken']===_0x43d270?null:_0x2e3e82['equippedToken'];await updateDoc(_0x455158,{'points':_0x59f191,'inventory':_0x571821,'equippedToken':_0x4c0611,'lastSale':serverTimestamp()});const _0x2aa232=doc(db,'userTokens',_0x1821b6['uid']),_0x41b38b=await getDoc(_0x2aa232);if(_0x41b38b['exists']()){const _0x38560a=_0x41b38b['data'](),_0x46ae40=_0x38560a['tokens']||[],_0x3f546c=_0x46ae40['filter'](_0x5629b6=>_0x5629b6['tokenId']!==_0x43d270);await updateDoc(_0x2aa232,{'tokens':_0x3f546c,'equippedToken':_0x4c0611,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0x1821b6['uid'],'userEmail':_0x1821b6['email'],'itemId':_0x5c0a58(0x188)+_0x43d270,'itemTitle':_0xb0069[_0x5c0a58(0x16b)],'refund':_0x38829b,'originalPrice':_0xb0069['price'],'type':'sale','category':'token','timestamp':serverTimestamp()}),userData['points']=_0x59f191,userData['inventory']=_0x571821,userData['equippedToken']=_0x4c0611,pointsDisplay&&(pointsDisplay[_0x5c0a58(0x10e)]=userData['points'][_0x5c0a58(0x143)]()),typeof clearTokenCache===_0x5c0a58(0x186)&&clearTokenCache(_0x1821b6[_0x5c0a58(0x134)]),console['log']('✅\x20Sold\x20token\x20'+_0xb0069[_0x5c0a58(0x16b)]+_0x5c0a58(0xf9)+_0x38829b+'\x20points'),showMessage(_0x5c0a58(0x177)+_0xb0069['name']+_0x5c0a58(0xf9)+_0x38829b+_0x5c0a58(0x121),'success'),!![];}catch(_0x2f834f){return console['error']('Token\x20sale\x20failed:',_0x2f834f),showMessage('Failed\x20to\x20sell\x20token:\x20'+_0x2f834f['message'],'error'),![];}}function applyTheme(_0xbb7922){const _0x25e0f0=a46_0x5e5afd;if(!userOwnsTheme(_0xbb7922))return showMessage(_0x25e0f0(0x12f),'error'),![];return window['ThemeSystem']?(window['ThemeSystem'][_0x25e0f0(0x123)](_0xbb7922),showMessage((THEMES[_0xbb7922]?.['name']||_0xbb7922)+'\x20theme\x20applied!',_0x25e0f0(0x168)),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x5de593=a46_0x5e5afd,_0x541c8c=document['querySelector']('.themes-grid');if(!_0x541c8c){console['error']('Themes\x20container\x20not\x20found');return;}_0x541c8c['innerHTML']='',Object[_0x5de593(0x13d)](THEMES)[_0x5de593(0x165)](([_0x33aa4e,_0x2d756f])=>{const _0x2785e0=_0x5de593,_0x4653ce=document['createElement']('div');_0x4653ce['className']='store-item',_0x4653ce[_0x2785e0(0xff)]['theme']=_0x33aa4e,_0x4653ce['dataset'][_0x2785e0(0x112)]=_0x2785e0(0x125)+_0x33aa4e,_0x4653ce['dataset']['price']=_0x2d756f['price'],_0x4653ce[_0x2785e0(0x18a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x33aa4e+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x2d756f['price']===0x0?_0x2785e0(0x128):_0x2d756f[_0x2785e0(0x116)]+_0x2785e0(0x176))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x2d756f[_0x2785e0(0x16b)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x2d756f['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x541c8c['appendChild'](_0x4653ce);}),setupThemeButtons();}function a46_0x3afd(){const _0x150ee6=['Monitor\x20your\x20ship\x27s\x20energy\x20levels','exists','closest','Become\x20invincible\x20for\x20a\x20short\x20time.','\x20for\x20','visible','Equip\x20','map','Heavy\x20ordinance\x20for\x20tough\x20situations','Another\x20enigmatic\x20blob\x20creature','dataset','appendChild','console','Extra\x20Life','classList','../images/tokens/Pyro.gif','email','blob','R/Y/B\x20Keys','block','Sign\x20in\x20to\x20Purchase','getElementById','A\x20cunning\x20explosive\x20device.','Only\x20admins\x20can\x20sell\x20tokens','equipped','textContent','message','\x20points?','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','itemId','background','isUserAdmin','👑\x20Admin\x20controls\x20enabled','price','The\x20iconic\x20Pyro-GX\x20ship.','Please\x20sign\x20in\x20to\x20unequip\x20tokens','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20(','confirm','store-message','cannot-afford','points','Unexpected\x20token\x20error:','The\x20final\x20blob\x20in\x20the\x20collection','.theme-select-btn','\x20points\x20(50%\x20refund)','userTokens','switchTheme','../images/tokens/gauge18.gif','theme_','\x20theme\x20for\x20','isAdmin','FREE','inventory','error','weapon','\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','❌\x20User\x20not\x20authenticated','RedeemStore','You\x20must\x20purchase\x20this\x20theme\x20first','pointer','currentUser','Show\x20your\x20support\x20with\x20this\x20fan\x20token.','var(--success-color,\x20#4CAF50)','uid','refreshUI','Plasma\x20Blob','auth-warning','displayLadder','default','Theme\x20purchase\x20failed:','✅\x20User\x20authenticated:','token','entries','[data-theme]','Buy','.token-equip-btn','current-theme','displayName','toLocaleString','permission-denied','Nightlight','You\x20need\x20','\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>','Shield\x20Orb','cursor','Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','Fast\x20and\x20furious\x20missile\x20token.','Yellow\x20Orange','warn','Blob\x20Token\x202','✅\x20Token\x20unequipped','Theme\x20','image','add','\x20theme','log','click','\x20more\x20points.','querySelectorAll','disabled','Blob\x20Token\x201','is\x20that...\x20Pfunk?','../images/tokens/Mercury.gif','You\x20already\x20own\x20the\x20','Gold','\x20not\x20found','data','Please\x20sign\x20in\x20to\x20equip\x20tokens','ThemeSystem','tokens','Need\x20','forEach','sign-in-free','style','success','Failed\x20to\x20equip\x20token:\x20','../images/tokens/Plasmablobl.gif','name','info','none','owned','Smart\x20Mine','includes','../images/tokens/cloak.gif','Laser','addEventListener','DOMContentLoaded','unavailable','\x20Points','Sold\x20','../images/tokens/blob01.gif','can-afford','A\x20mysterious\x20purple\x20blob\x20token','opacity','Smart\x20Missile','Purchase\x20','var(--muted-color,\x20#757575)','remove','split','\x20theme\x20purchased!','unauthenticated','userProfiles','Token\x20','Token\x20purchase\x20failed:','function','Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','token_','Apply\x20Theme','innerHTML'];a46_0x3afd=function(){return _0x150ee6;};return a46_0x3afd();}function buildTokenItems(){const _0x208b71=document['querySelector']('.tokens-grid');if(!_0x208b71){console['error']('Tokens\x20container\x20not\x20found');return;}_0x208b71['innerHTML']='',Object['entries'](TOKENS)['forEach'](([_0x4a4b8a,_0x35c27e])=>{const _0x1db39a=a46_0x4b83,_0x831c3a=document['createElement']('div');_0x831c3a['className']='store-item\x20token-item',_0x831c3a['dataset']['token']=_0x4a4b8a,_0x831c3a['dataset'][_0x1db39a(0x112)]='token_'+_0x4a4b8a,_0x831c3a['dataset'][_0x1db39a(0x116)]=_0x35c27e['price'];const _0x583220=userData['isAdmin']&&userOwnsToken(_0x4a4b8a)?_0x1db39a(0x119)+Math['floor'](_0x35c27e[_0x1db39a(0x116)]*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x831c3a['innerHTML']=_0x1db39a(0x111)+_0x35c27e['image']+'\x22\x20alt=\x22'+_0x35c27e[_0x1db39a(0x16b)]+_0x1db39a(0x147)+_0x35c27e['price']+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x583220+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x208b71['appendChild'](_0x831c3a);}),setupTokenButtons();}function setupThemeButtons(){const _0x189415=document['querySelectorAll']('.theme-select-btn');_0x189415['forEach'](_0x2962a4=>{const _0x374d02=a46_0x4b83;_0x2962a4[_0x374d02(0x173)]('click',async _0x30af53=>{const _0x48056c=_0x374d02;_0x30af53['preventDefault']();const _0x199e73=auth['currentUser'];if(!_0x199e73){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes',_0x48056c(0x12a));return;}const _0x9ccfa6=_0x2962a4[_0x48056c(0xf7)]('[data-theme]'),_0x461719=_0x9ccfa6[_0x48056c(0xff)]['theme'],_0x4b6592=THEMES[_0x461719];if(!_0x4b6592){console['error'](_0x48056c(0x151)+_0x461719+'\x20not\x20found');return;}console['log']('Theme\x20clicked:\x20'+_0x4b6592['name']+'\x20('+_0x461719+')');if(_0x2962a4['disabled']){_0x4b6592['price']>0x0&&showMessage(_0x48056c(0x146)+_0x4b6592[_0x48056c(0x116)]+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x2962a4[_0x48056c(0x10e)]==='Current\x20Theme'){showMessage(_0x4b6592['name']+'\x20is\x20already\x20your\x20current\x20theme',_0x48056c(0x16c));return;}if(_0x2962a4['textContent']===_0x48056c(0x189)){applyTheme(_0x461719),updateThemeButtons();return;}if(_0x2962a4['textContent'][_0x48056c(0x170)]('Buy')){const _0x1d8972=window[_0x48056c(0x11a)](_0x48056c(0x17d)+_0x4b6592[_0x48056c(0x16b)]+_0x48056c(0x126)+_0x4b6592['price']+_0x48056c(0x110));if(!_0x1d8972)return;const _0x3e19a9=await purchaseTheme(_0x461719);_0x3e19a9&&(showMessage(_0x4b6592['name']+_0x48056c(0x181),'success'),applyTheme(_0x461719),updateThemeButtons());return;}userOwnsTheme(_0x461719)?applyTheme(_0x461719):showMessage(_0x48056c(0x12f),'error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x40dfff=a46_0x5e5afd,_0x27f123=document[_0x40dfff(0x158)]('.token-select-btn'),_0x400ff9=document[_0x40dfff(0x158)](_0x40dfff(0x140)),_0xfa6102=document['querySelectorAll']('.token-sell-btn');_0x27f123['forEach'](_0x260016=>{const _0x330fb8=_0x40dfff;_0x260016[_0x330fb8(0x173)](_0x330fb8(0x156),async _0x2833be=>{const _0x316c69=_0x330fb8;_0x2833be['preventDefault']();const _0x42a925=auth['currentUser'];if(!_0x42a925){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0x30a254=_0x260016['closest']('[data-token]'),_0x4a2b71=_0x30a254['dataset']['token'],_0x283eb0=TOKENS[_0x4a2b71];if(!_0x283eb0){console['error']('Token\x20'+_0x4a2b71+'\x20not\x20found');return;}console['log']('Token\x20clicked:\x20'+_0x283eb0['name']+'\x20('+_0x4a2b71+')');if(_0x260016['disabled']){showMessage('You\x20need\x20'+_0x283eb0['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x260016['textContent']==='Owned'){showMessage(_0x316c69(0x15d)+_0x283eb0['name']+'\x20token',_0x316c69(0x16c));return;}if(_0x260016['textContent']['includes']('Purchase')||_0x260016['textContent']['includes'](_0x316c69(0x13f))){const _0x34df86=window['confirm'](_0x316c69(0x17d)+_0x283eb0['name']+'\x20token\x20for\x20'+_0x283eb0['price']+_0x316c69(0x110));if(!_0x34df86)return;const _0x28a591=await purchaseToken(_0x4a2b71);_0x28a591&&updateTokenButtons();return;}});}),_0x400ff9['forEach'](_0x123541=>{_0x123541['addEventListener']('click',async _0x1bdc79=>{const _0x56570d=a46_0x4b83;_0x1bdc79['preventDefault']();const _0x59149b=_0x123541['closest']('[data-token]'),_0x2f4e4c=_0x59149b['dataset']['token'],_0x68e80a=TOKENS[_0x2f4e4c];if(_0x123541[_0x56570d(0x10e)]==='Equipped'){const _0x461584=window['confirm']('Unequip\x20'+_0x68e80a['name']+'?');if(!_0x461584)return;const _0x196899=await unequipToken();_0x196899&&updateTokenButtons();}else{const _0x39727e=window['confirm'](_0x56570d(0xfb)+_0x68e80a[_0x56570d(0x16b)]+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x39727e)return;const _0x1b6dcc=await equipToken(_0x2f4e4c);_0x1b6dcc&&updateTokenButtons();}});}),_0xfa6102['forEach'](_0x57eb17=>{_0x57eb17['addEventListener']('click',async _0x5b60aa=>{const _0x355741=a46_0x4b83;_0x5b60aa['preventDefault']();const _0xf3120=_0x57eb17['closest']('[data-token]'),_0x292945=_0xf3120[_0x355741(0xff)]['token'],_0x348a82=TOKENS[_0x292945],_0x594cbc=Math['floor'](_0x348a82['price']*0.5),_0x2cdc7d=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x348a82['name']+'\x20for\x20'+_0x594cbc+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x2cdc7d)return;const _0x4ff224=await sellToken(_0x292945);_0x4ff224&&updateTokenButtons();});}),updateTokenButtons();}function a46_0x4b83(_0x483f92,_0x3c912a){const _0x446bc1=a46_0x3afd();return a46_0x4b83=function(_0x13d9aa,_0x1b70c5){_0x13d9aa=_0x13d9aa-0xf5;let _0x3afd56=_0x446bc1[_0x13d9aa];return _0x3afd56;},a46_0x4b83(_0x483f92,_0x3c912a);}function updateThemeButtons(){const _0x282cd8=a46_0x5e5afd,_0x175988=window['ThemeSystem']?window[_0x282cd8(0x162)]['getCurrentTheme']():'default',_0x45286b=auth[_0x282cd8(0x131)];document['querySelectorAll'](_0x282cd8(0x120))['forEach'](_0x1be1c1=>{const _0x4ef1c8=_0x282cd8,_0x349f28=_0x1be1c1['closest'](_0x4ef1c8(0x13e)),_0xcded5f=_0x349f28['dataset']['theme'],_0x1658b8=THEMES[_0xcded5f];if(!_0x1658b8)return;_0x1be1c1['disabled']=![],_0x1be1c1[_0x4ef1c8(0x167)][_0x4ef1c8(0x17b)]='',_0x1be1c1[_0x4ef1c8(0x167)]['cursor']='pointer',_0x1be1c1[_0x4ef1c8(0x103)][_0x4ef1c8(0x17f)](_0x4ef1c8(0x141),'apply-theme','can-afford','cannot-afford','sign-in-free','sign-in-paid');if(!_0x45286b){_0x1658b8[_0x4ef1c8(0x116)]===0x0?(_0x1be1c1['textContent']='Sign\x20in\x20to\x20Apply',_0x1be1c1[_0x4ef1c8(0x103)]['add'](_0x4ef1c8(0x166))):(_0x1be1c1['textContent']=_0x4ef1c8(0x109),_0x1be1c1['disabled']=!![],_0x1be1c1[_0x4ef1c8(0x167)][_0x4ef1c8(0x17b)]='0.7',_0x1be1c1['classList']['add']('sign-in-paid'));return;}if(_0xcded5f===_0x175988){_0x1be1c1['textContent']='Current\x20Theme',_0x1be1c1[_0x4ef1c8(0x103)]['add']('current-theme'),_0x1be1c1[_0x4ef1c8(0x159)]=!![],_0x1be1c1['style'][_0x4ef1c8(0x149)]=_0x4ef1c8(0x139);return;}if(userOwnsTheme(_0xcded5f)){_0x1be1c1['textContent']='Apply\x20Theme',_0x1be1c1['classList']['add']('apply-theme');return;}if(userData['points']>=_0x1658b8['price']){_0x1be1c1[_0x4ef1c8(0x10e)]='Buy\x20for\x20'+_0x1658b8['price']+'\x20Points',_0x1be1c1['classList']['add'](_0x4ef1c8(0x179));return;}_0x1be1c1['textContent']='Need\x20'+_0x1658b8['price']+'\x20Points',_0x1be1c1['classList'][_0x4ef1c8(0x153)]('cannot-afford'),_0x1be1c1['style']['opacity']='0.5',_0x1be1c1['disabled']=!![],_0x1be1c1['style'][_0x4ef1c8(0x149)]='not-allowed';});}function updateTokenButtons(){const _0x26eb49=a46_0x5e5afd,_0x16f823=auth['currentUser'];document[_0x26eb49(0x158)]('.token-select-btn')['forEach'](_0x3dd0ee=>{const _0x3eb8e4=_0x26eb49,_0x50d144=_0x3dd0ee['closest']('[data-token]'),_0x3022ce=_0x50d144[_0x3eb8e4(0xff)][_0x3eb8e4(0x13c)],_0x396950=TOKENS[_0x3022ce],_0x3707e3=_0x50d144['querySelector']('.token-equip-btn'),_0x46586d=_0x50d144['querySelector']('.token-sell-btn');if(!_0x396950)return;_0x3dd0ee[_0x3eb8e4(0x159)]=![],_0x3dd0ee['style']['opacity']='',_0x3dd0ee['style']['cursor']=_0x3eb8e4(0x130);_0x3707e3&&(_0x3707e3['style']['display']=_0x3eb8e4(0x16d),_0x3707e3[_0x3eb8e4(0x159)]=![],_0x3707e3['style']['opacity']='',_0x3707e3[_0x3eb8e4(0x103)]['remove'](_0x3eb8e4(0x10d),'can-equip'));_0x46586d&&(_0x46586d['style']['display']='none');_0x3dd0ee['classList'][_0x3eb8e4(0x17f)]('owned','can-afford',_0x3eb8e4(0x11c),'sign-in');if(!_0x16f823){_0x3dd0ee[_0x3eb8e4(0x10e)]='Sign\x20in\x20to\x20Purchase',_0x3dd0ee['disabled']=!![],_0x3dd0ee[_0x3eb8e4(0x167)]['opacity']='0.7',_0x3dd0ee[_0x3eb8e4(0x103)]['add']('sign-in');return;}if(userOwnsToken(_0x3022ce)){_0x3dd0ee['textContent']='Owned',_0x3dd0ee[_0x3eb8e4(0x103)]['add'](_0x3eb8e4(0x16e)),_0x3dd0ee[_0x3eb8e4(0x159)]=!![],_0x3dd0ee['style']['cursor']='default',_0x3dd0ee[_0x3eb8e4(0x167)]['background']=_0x3eb8e4(0x133);_0x3707e3&&(_0x3707e3['style']['display']='block',userHasTokenEquipped(_0x3022ce)?(_0x3707e3['textContent']='Equipped',_0x3707e3['classList'][_0x3eb8e4(0x153)]('equipped'),_0x3707e3['style'][_0x3eb8e4(0x113)]='var(--accent-color,\x20#2196F3)',_0x3707e3['style']['cursor']='pointer'):(_0x3707e3['textContent']='Equip',_0x3707e3['classList']['add']('can-equip'),_0x3707e3['style'][_0x3eb8e4(0x113)]='var(--info-color,\x20#17a2b8)',_0x3707e3[_0x3eb8e4(0x167)]['cursor']=_0x3eb8e4(0x130)));_0x46586d&&userData[_0x3eb8e4(0x127)]&&(_0x46586d[_0x3eb8e4(0x167)]['display']=_0x3eb8e4(0x108));return;}if(userData['points']>=_0x396950[_0x3eb8e4(0x116)]){_0x3dd0ee[_0x3eb8e4(0x10e)]='Buy\x20for\x20'+_0x396950[_0x3eb8e4(0x116)]+_0x3eb8e4(0x176),_0x3dd0ee['classList']['add']('can-afford'),_0x3dd0ee['style']['background']='';return;}_0x3dd0ee[_0x3eb8e4(0x10e)]=_0x3eb8e4(0x164)+_0x396950['price']+'\x20Points',_0x3dd0ee['classList'][_0x3eb8e4(0x153)](_0x3eb8e4(0x11c)),_0x3dd0ee['style']['opacity']='0.5',_0x3dd0ee['disabled']=!![],_0x3dd0ee['style']['cursor']='not-allowed',_0x3dd0ee['style']['background']=_0x3eb8e4(0x17e);});}function showMessage(_0x1d4696,_0x570951='info'){const _0x3c7974=a46_0x5e5afd,_0x1542fc=document[_0x3c7974(0x10a)]('store-message');_0x1542fc&&_0x1542fc['remove']();const _0x5db760=document['createElement']('div');_0x5db760['id']=_0x3c7974(0x11b),_0x5db760['className']='store-message\x20store-message-'+_0x570951,_0x5db760[_0x3c7974(0x10e)]=_0x1d4696,document['body'][_0x3c7974(0x100)](_0x5db760),requestAnimationFrame(()=>{_0x5db760['classList']['add']('visible');}),setTimeout(()=>{const _0x5d3c4d=_0x3c7974;_0x5db760['classList']['remove'](_0x5d3c4d(0xfa)),setTimeout(()=>{const _0x289568=_0x5d3c4d;_0x5db760['parentNode']&&_0x5db760[_0x289568(0x17f)]();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log']('🏪\x20Redeem\x20store\x20loaded');