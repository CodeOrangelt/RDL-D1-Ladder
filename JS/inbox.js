const a24_0x29c119=a24_0x14f0,a24_0x492a11=(function(){let _0x4fe5cb=!![];return function(_0x5d926d,_0x3d3de4){const _0x351832=_0x4fe5cb?function(){const _0xe3252e=a24_0x14f0;if(_0x3d3de4){const _0x1d31c7=_0x3d3de4[_0xe3252e(0x166)](_0x5d926d,arguments);return _0x3d3de4=null,_0x1d31c7;}}:function(){};return _0x4fe5cb=![],_0x351832;};}()),a24_0x270f9b=a24_0x492a11(this,function(){const _0x7978f5=a24_0x14f0,_0x26424c=function(){const _0x580a42=a24_0x14f0;let _0x38721e;try{_0x38721e=Function(_0x580a42(0x161)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x45f566){_0x38721e=window;}return _0x38721e;},_0x2aeae3=_0x26424c(),_0x40b3ea=_0x2aeae3['console']=_0x2aeae3['console']||{},_0x543833=[_0x7978f5(0x173),'warn','info',_0x7978f5(0x13c),'exception','table','trace'];for(let _0x30c9e6=0x0;_0x30c9e6<_0x543833[_0x7978f5(0x145)];_0x30c9e6++){const _0x35ef07=a24_0x492a11['constructor']['prototype']['bind'](a24_0x492a11),_0x4a09a5=_0x543833[_0x30c9e6],_0x5a76c5=_0x40b3ea[_0x4a09a5]||_0x35ef07;_0x35ef07[_0x7978f5(0x13b)]=a24_0x492a11['bind'](a24_0x492a11),_0x35ef07[_0x7978f5(0x159)]=_0x5a76c5['toString'][_0x7978f5(0x140)](_0x5a76c5),_0x40b3ea[_0x4a09a5]=_0x35ef07;}});a24_0x270f9b();function a24_0x14f0(_0x8ae817,_0x5797c4){const _0x270f9b=a24_0x19a4();return a24_0x14f0=function(_0x492a11,_0x59220b){_0x492a11=_0x492a11-0x139;let _0x19a40b=_0x270f9b[_0x492a11];return _0x19a40b;},a24_0x14f0(_0x8ae817,_0x5797c4);}function a24_0x19a4(){const _0x5c5521=['createElement','currentFilter','__proto__','error','h\x20ago','toUserId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','bind','addEventListener','innerHTML','createInvitationCard','none','length','unsubscribe','decline','invitationId','toDate','Error\x20performing\x20','find','message','renderInvitations','cancelled','forEach','toUsername','respond','declined','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22','teamColor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20','fromUsername','desc','When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.','toString','floor','sentUnsubscribe','Team\x20\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','trim','active','dataset','return\x20(function()\x20','click','updateNotificationCount','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','.action-btn','apply','status','\x20invitation.\x20Please\x20try\x20again.','teamData','pageSize','createdAt','loadInvitations','remove','getTimeAgo','createTeamFromInvitation','.filter-btn','pending','body','log','appendChild','display','type','querySelector','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','team_invite'];a24_0x19a4=function(){return _0x5c5521;};return a24_0x19a4();}import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x31841f=a24_0x14f0;this['currentFilter']='pending',this['invitations']=[],this['sentInvitations']=[],this[_0x31841f(0x146)]=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this['lastDoc']=null,this['hasMore']=!![],this['init']();}async['init'](){auth['onAuthStateChanged'](_0x270eb3=>{const _0x539cde=a24_0x14f0;_0x270eb3?(this[_0x539cde(0x16c)](_0x270eb3['uid']),this['setupEventListeners']()):window['location']['href']='./login.html';});}['setupEventListeners'](){const _0x5b5913=a24_0x14f0;document['querySelectorAll'](_0x5b5913(0x170))['forEach'](_0x49a6d8=>{const _0x1998d7=_0x5b5913;_0x49a6d8[_0x1998d7(0x141)]('click',()=>{const _0xe2b91a=_0x1998d7;document['querySelectorAll']('.filter-btn')[_0xe2b91a(0x14f)](_0x12b323=>_0x12b323['classList'][_0xe2b91a(0x16d)](_0xe2b91a(0x15f))),_0x49a6d8['classList']['add']('active'),this['currentFilter']=_0x49a6d8[_0xe2b91a(0x160)]['filter'],this['renderInvitations']();});});}['loadInvitations'](_0x184701){const _0x378250=a24_0x14f0,_0x42cbdc=collection(db,'gameInvitations');let _0x3b4045=query(_0x42cbdc,where(_0x378250(0x13e),'==',_0x184701),orderBy('createdAt',_0x378250(0x157)),limit(this[_0x378250(0x16a)]));this[_0x378250(0x146)]=onSnapshot(_0x3b4045,_0x329953=>{const _0x352706=_0x378250;this['invitations']=_0x329953['docs']['map'](_0x5a203a=>({'id':_0x5a203a['id'],..._0x5a203a['data']()})),this[_0x352706(0x14d)](),this['updateNotificationCount']();});let _0x54272b=query(_0x42cbdc,where('fromUserId','==',_0x184701),orderBy('createdAt','desc'),limit(this['pageSize']));this['sentUnsubscribe']=onSnapshot(_0x54272b,_0x4cb98c=>{const _0x217261=_0x378250;this['sentInvitations']=_0x4cb98c['docs']['map'](_0x546636=>({'id':_0x546636['id'],..._0x546636['data'](),'isSent':!![]})),this[_0x217261(0x14d)]();});}[a24_0x29c119(0x14d)](){const _0x4e89f3=a24_0x29c119,_0x1c9fd2=document['getElementById']('inbox-content');if(!_0x1c9fd2)return;let _0x7e952=[];if(this['currentFilter']==='outbox')_0x7e952=this['sentInvitations'];else this[_0x4e89f3(0x13a)]==='all'?_0x7e952=[...this['invitations'],...this['sentInvitations']]['sort']((_0x1af06b,_0x423c23)=>{const _0x55668d=_0x4e89f3,_0x311bb1=_0x1af06b[_0x55668d(0x16b)]?.['toDate']?_0x1af06b[_0x55668d(0x16b)][_0x55668d(0x149)]():new Date(_0x1af06b[_0x55668d(0x16b)]),_0x842dfe=_0x423c23['createdAt']?.[_0x55668d(0x149)]?_0x423c23[_0x55668d(0x16b)]['toDate']():new Date(_0x423c23['createdAt']);return _0x842dfe-_0x311bb1;}):_0x7e952=this['invitations']['filter'](_0x27220f=>_0x27220f['status']===this[_0x4e89f3(0x13a)]);if(_0x7e952[_0x4e89f3(0x145)]===0x0){const _0x419490=this['currentFilter']==='outbox'?'sent':this['currentFilter']==='all'?'':this[_0x4e89f3(0x13a)];_0x1c9fd2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x419490+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x4e89f3(0x13a)]==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':_0x4e89f3(0x158))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x1c9fd2[_0x4e89f3(0x142)]=_0x7e952['map'](_0x2fa32e=>this[_0x4e89f3(0x143)](_0x2fa32e))['join'](''),this['setupActionListeners']();}['createInvitationCard'](_0x391ace){const _0x1c0a1=a24_0x29c119,_0x34b6c2=_0x391ace[_0x1c0a1(0x16b)]?.['toDate']?_0x391ace['createdAt']['toDate']():new Date(_0x391ace[_0x1c0a1(0x16b)]),_0x117012=this['getTimeAgo'](_0x34b6c2),_0x2a9ba4=_0x391ace['isSent']||![];let _0x4d00e7='';return _0x391ace['type']===_0x1c0a1(0x179)?_0x4d00e7='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x391ace['message']+_0x1c0a1(0x164)+_0x391ace[_0x1c0a1(0x169)][_0x1c0a1(0x154)]+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x391ace['teamData']['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20•\x20Color:\x20'+_0x391ace[_0x1c0a1(0x169)]['teamColor']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x4d00e7='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x391ace[_0x1c0a1(0x14c)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1c0a1(0x155)+_0x391ace[_0x1c0a1(0x167)]+'\x20'+(_0x2a9ba4?'sent-invitation':'')+'\x22\x20data-invitation-id=\x22'+_0x391ace['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2a9ba4?'To:\x20'+_0x391ace[_0x1c0a1(0x150)]:_0x391ace['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2a9ba4?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x117012+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x391ace[_0x1c0a1(0x167)]+'\x22>'+_0x391ace['status']+_0x1c0a1(0x178)+_0x4d00e7+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x2a9ba4&&_0x391ace['status']===_0x1c0a1(0x171)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x391ace['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x391ace['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x391ace[_0x1c0a1(0x176)]!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x391ace['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2a9ba4&&_0x391ace['status']===_0x1c0a1(0x171)?_0x1c0a1(0x153)+_0x391ace['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x1c0a1(0x15d);}['setupActionListeners'](){const _0x3807e5=a24_0x29c119;document['querySelectorAll'](_0x3807e5(0x165))['forEach'](_0x58268f=>{_0x58268f['addEventListener']('click',async _0x36918e=>{const _0x2ebb40=a24_0x14f0,_0x5f3e34=_0x58268f['dataset']['action'],_0x2f1c44=_0x58268f[_0x2ebb40(0x160)][_0x2ebb40(0x148)];_0x58268f['disabled']=!![];const _0x2c90b9=_0x58268f[_0x2ebb40(0x142)];_0x58268f[_0x2ebb40(0x142)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x5f3e34){case'accept':await this['updateInvitationStatus'](_0x2f1c44,'accepted');break;case _0x2ebb40(0x147):await this['updateInvitationStatus'](_0x2f1c44,_0x2ebb40(0x152));break;case'cancel':await this['updateInvitationStatus'](_0x2f1c44,_0x2ebb40(0x14e));break;case _0x2ebb40(0x151):this['openResponseModal'](_0x2f1c44);break;}}catch(_0x2318ea){console['error'](_0x2ebb40(0x14a)+_0x5f3e34+':',_0x2318ea),alert('Failed\x20to\x20'+_0x5f3e34+_0x2ebb40(0x168));}finally{_0x58268f['disabled']=![],_0x58268f['innerHTML']=_0x2c90b9;}});});}async['updateInvitationStatus'](_0x1f2528,_0x589e7c){const _0x104df7=a24_0x29c119;try{const _0x21b1f4=this['invitations'][_0x104df7(0x14b)](_0x5f32e2=>_0x5f32e2['id']===_0x1f2528);_0x21b1f4&&_0x21b1f4['type']===_0x104df7(0x179)&&_0x589e7c==='accepted'&&await this['createTeamFromInvitation'](_0x21b1f4);const _0x2f7a8e=doc(db,'gameInvitations',_0x1f2528);await updateDoc(_0x2f7a8e,{'status':_0x589e7c,'respondedAt':new Date()}),_0x21b1f4&&(_0x21b1f4['status']=_0x589e7c,_0x21b1f4['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x27b499){console['error']('Error\x20updating\x20invitation\x20status:',_0x27b499);throw _0x27b499;}}['openResponseModal'](_0x46d5fa){const _0x202106=a24_0x29c119,_0x36686a=this['invitations']['find'](_0x17c008=>_0x17c008['id']===_0x46d5fa);if(!_0x36686a)return;const _0x15a85b=document[_0x202106(0x139)]('div');_0x15a85b['className']='modal-overlay',_0x15a85b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x36686a[_0x202106(0x156)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x36686a['value']+'</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(!document['getElementById']('modal-styles')){const _0x4dad8a=document['createElement']('style');_0x4dad8a['id']='modal-styles',_0x4dad8a['textContent']=_0x202106(0x13f),document['head']['appendChild'](_0x4dad8a);}document[_0x202106(0x172)][_0x202106(0x174)](_0x15a85b),_0x15a85b[_0x202106(0x177)]('.modal-close')['addEventListener']('click',()=>_0x15a85b[_0x202106(0x16d)]()),_0x15a85b['querySelector']('#cancel-response')[_0x202106(0x141)](_0x202106(0x162),()=>_0x15a85b['remove']()),_0x15a85b['addEventListener'](_0x202106(0x162),_0x23a8d2=>{if(_0x23a8d2['target']===_0x15a85b)_0x15a85b['remove']();}),_0x15a85b['querySelector']('#send-response')['addEventListener']('click',()=>{const _0x40802e=_0x202106,_0x4b5ca8=document['getElementById']('response-message')['value'][_0x40802e(0x15e)]();_0x4b5ca8&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x15a85b[_0x40802e(0x16d)]());});}async[a24_0x29c119(0x16f)](_0x25ae61){const _0x5ed9c7=a24_0x29c119;try{const {createTeam:_0x28dd75}=await import('./ladderduos.js'),_0x311208=await _0x28dd75(_0x25ae61['fromUsername'],_0x25ae61['toUsername'],_0x25ae61['teamData']['proposedTeamName'],_0x25ae61[_0x5ed9c7(0x169)]['teamColor']);if(!_0x311208['success'])throw new Error(_0x311208[_0x5ed9c7(0x13c)]);alert(_0x5ed9c7(0x15c)+_0x25ae61['teamData']['proposedTeamName']+'\x22\x20created\x20successfully!');}catch(_0xefe814){console['error']('Error\x20creating\x20team:',_0xefe814);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0xefe814[_0x5ed9c7(0x14c)]);}}[a24_0x29c119(0x163)](){const _0x2b9d55=a24_0x29c119,_0x533637=this['invitations']['filter'](_0x2410e3=>_0x2410e3['status']===_0x2b9d55(0x171))[_0x2b9d55(0x145)],_0x4b624e=document['getElementById']('inbox-notification');_0x4b624e&&(_0x533637>0x0?(_0x4b624e['style'][_0x2b9d55(0x175)]='inline-block',_0x4b624e['textContent']=_0x533637>0x9?'9+':_0x533637):_0x4b624e['style']['display']=_0x2b9d55(0x144));}[a24_0x29c119(0x16e)](_0x456575){const _0x167fbc=a24_0x29c119,_0x135d69=new Date(),_0x2faebf=_0x135d69-_0x456575,_0x4917d4=Math[_0x167fbc(0x15a)](_0x2faebf/(0x3e8*0x3c)),_0x3c6d19=Math['floor'](_0x2faebf/(0x3e8*0x3c*0x3c)),_0x4dd1a9=Math[_0x167fbc(0x15a)](_0x2faebf/(0x3e8*0x3c*0x3c*0x18));if(_0x4917d4<0x1)return'Just\x20now';if(_0x4917d4<0x3c)return _0x4917d4+'m\x20ago';if(_0x3c6d19<0x18)return _0x3c6d19+_0x167fbc(0x13d);if(_0x4dd1a9<0x7)return _0x4dd1a9+'d\x20ago';return _0x456575['toLocaleDateString']();}['destroy'](){const _0x303cd3=a24_0x29c119;this['unsubscribe']&&this[_0x303cd3(0x146)](),this[_0x303cd3(0x15b)]&&this['sentUnsubscribe']();}}document['addEventListener']('DOMContentLoaded',()=>{new InboxManager();});