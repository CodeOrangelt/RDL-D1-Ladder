const a27an=a27d;(function(a,b){const P=a27d,c=a();while(!![]){try{const d=parseInt(P(0x1f7))/0x1*(-parseInt(P(0x1a8))/0x2)+-parseInt(P(0x23d))/0x3*(-parseInt(P(0x20d))/0x4)+parseInt(P(0x1a0))/0x5*(-parseInt(P(0x227))/0x6)+-parseInt(P(0x1e3))/0x7+-parseInt(P(0x19f))/0x8*(parseInt(P(0x1c9))/0x9)+parseInt(P(0x236))/0xa*(-parseInt(P(0x1c0))/0xb)+parseInt(P(0x199))/0xc;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a27c,0x22634));const a27b=(function(){let a=!![];return function(b,c){const d=a?function(){const Q=a27d;if(c){const e=c[Q(0x1bc)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a27a=a27b(this,function(){const S=a27d,a=function(){const R=a27d;let f;try{f=Function(R(0x1ad)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(g){f=window;}return f;},b=a(),c=b['console']=b[S(0x1fe)]||{},d=['log',S(0x1a5),S(0x1de),'error',S(0x1f6),'table',S(0x1f3)];for(let e=0x0;e<d['length'];e++){const f=a27b[S(0x231)][S(0x229)][S(0x20a)](a27b),g=d[e],h=c[g]||f;f['__proto__']=a27b['bind'](a27b),f['toString']=h[S(0x1c8)][S(0x20a)](h),c[g]=f;}});a27a();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(a=0x1){const T=a27d;try{document[T(0x21c)]('loading-indicator')['style'][T(0x1c7)]=T(0x198);const b=await getLadderData(a);b['sort']((f,g)=>g[T(0x1e9)]-f[T(0x1e9)]);const c=b[T(0x1f0)](f=>f['id']),d=await getEloHistoryBatch(c,a),e=b[T(0x1f0)]((f,g)=>{const U=T,h=d[f['id']]||[],i=h['sort']((j,k)=>new Date(k['date'])-new Date(j['date']))[U(0x220)](0x0,0x5);return{...f,'rank':g+0x1,'lastMatches':i,'recentActivity':i['length']>0x0};});renderLadder(e),setupRealTimeUpdates(a);}catch(f){console[T(0x19d)](T(0x1a3),f),document['getElementById']('error-message')[T(0x204)]='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById'](T(0x21d))['style']['display']='none';}}function setupRealTimeUpdates(a=0x1){const V=a27d;activeListeners[V(0x216)](f=>f()),activeListeners=[];const b=a===0x1?'players':'playersD'+a,c=a===0x1?V(0x1e7):V(0x212)+a,d=new Date();d['setDate'](d['getDate']()-0x1);const e=setupEfficientListener(c,[where('date','>=',d['toISOString']()),limit(0xa),orderBy(V(0x1b4),V(0x240))],async f=>{f['length']>0x0&&await loadLadderData(a);});activeListeners['push'](e);}export function cleanupListeners(){activeListeners['forEach'](a=>a()),activeListeners=[];}function renderLadder(a){const W=a27d,b=document[W(0x21c)](W(0x201));b[W(0x217)]='',a['forEach'](c=>{const X=W,d=document[X(0x1c5)]('div');d['className']='ladder-player',d['innerHTML']=X(0x203)+c['rank']+X(0x1e8)+(c[X(0x226)]||c['id'])+X(0x1e4)+c['elo']+X(0x23c)+(c[X(0x1cb)]?'active':X(0x232))+X(0x239)+(c[X(0x1cb)]?X(0x206):X(0x1ff))+X(0x1a4),b[X(0x22d)](d);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(a=![]){const Y=a27d,b=document[Y(0x1d1)](Y(0x241));if(!b){console['error'](Y(0x1af));return;}b['innerHTML']=Y(0x1fd);try{const c=Date['now']();if(!a&&playerCache['data']&&c-playerCache[Y(0x1dd)]<CACHE_DURATION){console['log'](Y(0x197)),updateLadderDisplay(playerCache['data']);return;}const d=collection(db,'players'),e=await getDocs(d),f=[];e['forEach'](l=>{const Z=Y,m=l['data']();f['push']({...m,'id':l['id'],'elo':m[Z(0x233)]||0x0,'position':m[Z(0x1c2)]||Number['MAX_SAFE_INTEGER']});});const g=collection(db,'userProfiles'),h=await getDocs(g),i=new Map();h[Y(0x216)](l=>{const m=l['data']();m['username']&&i['set'](m['username']['toLowerCase'](),m);}),f[Y(0x216)](l=>{const a0=Y,m=l[a0(0x226)]?.[a0(0x21a)]();if(m&&i['has'](m)){const n=i[a0(0x1ae)](m);n['country']&&(l[a0(0x1e6)]=n[a0(0x1e6)]['toLowerCase']());}});const j=f[Y(0x1f0)](l=>l[Y(0x226)]),k=await fetchBatchMatchStats(j);f['sort']((l,m)=>{const a1=Y,n=k[a1(0x1ae)](l[a1(0x226)])?.[a1(0x1f1)]||0x0,o=k['get'](m['username'])?.['totalMatches']||0x0;if(n===0x0!==(o===0x0))return n===0x0?0x1:-0x1;return(l['position']||0x3e7)-(m[a1(0x1c2)]||0x3e7);}),f['forEach']((l,m)=>{l['position']=m+0x1;}),playerCache['data']=f,playerCache['timestamp']=c,updateLadderDisplay(f,k);}catch(l){console['error'](Y(0x23b),l),b['innerHTML']=Y(0x1d0)+l['message']+Y(0x1ca);}}async function fetchBatchMatchStats(a){const a3=a27d,b=new Map();try{a['forEach'](e=>{const a2=a27d;b[a2(0x228)](e,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const c=collection(db,'approvedMatches'),d=await getDocs(c);d[a3(0x216)](e=>{const a4=a3,f=e[a4(0x242)](),g=f['winnerUsername'],h=f['loserUsername'];if(a[a4(0x22a)](g)){const i=b[a4(0x1ae)](g);i['wins']++,i[a4(0x1f1)]++,i['totalKills']+=parseInt(f['winnerScore'])||0x0,i['totalDeaths']+=parseInt(f[a4(0x1b7)])||0x0;}if(a[a4(0x22a)](h)){const j=b['get'](h);j['losses']++,j[a4(0x1f1)]++,j['totalKills']+=parseInt(f['loserScore'])||0x0,j['totalDeaths']+=parseInt(f[a4(0x23a)])||0x0;}}),a[a3(0x216)](e=>{const a5=a3,f=b['get'](e);f['kda']=f['totalDeaths']>0x0?(f[a5(0x19c)]/f[a5(0x1fc)])['toFixed'](0x2):f[a5(0x19c)]['toFixed'](0x2),f['winRate']=f[a5(0x1f1)]>0x0?(f[a5(0x1cd)]/f[a5(0x1f1)]*0x64)[a5(0x1dc)](0x1):0x0;});}catch(e){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',e);}return b;}function a27c(){const az=['re9nq29UDgvUDeXVywrLza','BwfW','Dg90ywXnyxrJAgvZ','rxjYB3iGzMv0y2HPBMCGruXpigHPC3rVCNK6','DhjHy2u','i0nen0yZmG','uMvJB21Tzw5KyxrPB24GzwXLBwvUDcbMB3iG','zxHJzxb0Aw9U','mJu0ntD2tNrozuS','pc9ZCgfUpI4Gq2HHBgXLBMDLig90AgvYihrLyw1Ziq','iZuWqZG3oa','Dgv4DenVBNrLBNq','tM8GAwrLywWGB3bWB25LBNqGzM91BMqGzM9YihLVDxiGy3vYCMvUDcbfte8Gka','Dg90ywXezwf0Ahm','phrYpJX0zcbJB2XZCgfUpsi4iIbJBgfZCZ0IBg9HzgLUzY1JzwXSiJ5mB2fKAw5NigXHzgrLCIbKyxrHlI4Upc90zd48l3rYpG','y29UC29Szq','sw5Hy3rPDMu','Bg9ZC2vZ','BgfKzgvYlwnVBNrHAw5LCG','q29TCgXLDguGEw91CIbWCM9MAwXLihrVihnLzsbYzwnVBw1LBMrLzcbVChbVBMvUDhm','cIaGicaGidXKAxyGy2XHC3m9iNjHBMSIpIm','Aw5UzxjuzxH0','zwXVsgLZDg9YEq','qwn0AxzL','ywrKrxzLBNrmAxn0zw5LCG','zhvVCY1ZD2L0y2G','D2LUuMf0zq','yMLUza','AgfZvgvHBq','ruXpigHPC3rVCNKGy29SBgvJDgLVBIbPCYbLBxb0Eq','mtm4ntGWyNnQvxfh','zg9JCW','B3DUzxi','y291BMnPBa','C29YDa','Bwf0y2HLC0q','ywn0AxzL','yM9KEq','cIaGicaGicaGicaGidX0Ad5syw5Rpc90Ad4kicaGicaGicaGicaGphrOpLvZzxjUyw1Lpc90Ad4kicaGicaGicaGicaGphrOpKvmtZWVDgG+cIaGicaGicaGicaGidX0Ad5nyxrJAgvZpc90Ad4kicaGicaGicaGicaGphrOpLDPBNm8l3rOpGOGicaGicaGicaGica8DgG+tg9ZC2vZpc90Ad4kicaGicaGicaGicaGphrOpKSVrdWVDgG+cIaGicaGicaGicaGidX0Ad5xAw4GuMf0ztWVDgG+cIaGicaGicaG','zM9YrwfJAa','Aw5Uzxjive1m','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzhvVCW','rdiGDg9Nz2XLignSAwnRzwq','Dg9mB3DLCKnHC2u','zdmTBgfKzgvYlwnVBNrHAw5LCG','z2v0rwXLBwvUDej5swq','Bg9HzgLUzY1PBMrPy2f0B3i','B3bHy2L0Eq','iIakicaGicaGicaGicaGicaGicaGicaGicaGy2XHC3m9iNbSyxLLCI1MBgfNiIakicaGicaGicaGicaGicaGicaGicaGicaGC3r5Bgu9iM1HCMDPBI1Szwz0oIa1ChG7ihzLCNrPy2fSlwfSAwDUoIbTAwrKBgu7iGOGicaGicaGicaGicaGicaGicaGicaGicbVBMvYCM9Ypsj0AgLZlNn0EwXLlMrPC3bSyxK9j25VBMuNiJ4','C2XPy2u','y3vYCMvUDfvZzxi','BMv3rwXVuMf0Aw5N','BM9Uzq','Dgq6BNrOlwnOAwXKkdmP','zhvVCY1SywrKzxiTy29UDgfPBMvY','DxnLCM5HBwu','mJu2nZr4zhzzD2K','C2v0','ChjVDg90ExbL','Aw5JBhvKzxm','pgLTzYbZCMm9iI4Ul2LTywDLCY9MBgfNCY8','A2rH','yxbWzw5Kq2HPBgq','rxjYB3iGzMLUzgLUzYbIzxn0ig9WCg9Uzw50oG','qNjVBNPL','ywrTAw4TB25SEs1TzxnZywDL','y29UC3rYDwn0B3i','Aw5Hy3rPDMu','zwXVuMf0Aw5N','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzdi','BMv3rwXV','oda3meXnu2HSCq','CgXHEwvY','i0y0ndmZnG','iJ4kicaGicaGica','D2LUBMvYu2nVCMu','rxjYB3iGBg9HzgLUzYbSywrKzxi6','pc9KAxy+cIaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1Hy3rPDML0Esa','nMTPDMTRua','CgfYzw50tM9Kzq','AgfZ','zgvZyW','i2XHzgrLCIb0yM9KEq','zgf0yq','zdeTBgfKzgvYlwnVBNrHAw5LCG','vxnPBMCGy2fJAgvKieqXigXHzgrLCIbKyxrH','yMXVy2S','odC1mZa4ohHtuhfhCa','u2v0ihLVDxiGDxnLCM5HBwuGDg8GC2vLihjLy29TBwvUzgvKig9WCg9Uzw50CW','CgXHEwvYvxnLCM5HBwu','Dg90ywXlAwXSCW','zxjYB3i','tg9VA2LUzYbMB3iGysb0zwfTBwf0zt8Gq29UC2LKzxiGphnWyw4Gy2XHC3m9iNjLy29TBwvUzgf0Aw9UlwHPz2HSAwDODciGC3r5Bgu9iMnVBg9YoIa','ndmYohrKDg1OzW','nwvqB0PszG','y2HHBMDL','mc44nwvT','rxjYB3iGBg9HzgLUzYbSywrKzxiGzgf0ytO','cIaGicaGidWVzgL2pGOGicaG','D2fYBG','CM91BMq','DgHLBG','nLvKCLf0BW','Bwf4','rhvVCYbSywrKzxiGAxmGy3vYCMvUDgX5igfKBwLUlw9UBhK','ww91j3jLig5VDcbYzwDPC3rLCMvKig9UihrOzsbevu9tigXHzgrLCG','rxjYB3iGzMLUzgLUzYbYzwnVBw1LBMrLzcbVChbVBMvUDa','CMv0DxjUicHMDw5JDgLVBIGPia','z2v0','tgfKzgvYihrHyMXLigjVzhKGBM90igzVDw5K','zw1WDhK','i0zgrdCWma','y2XPy2S','oYbWB3nPDgLVBJOGCMvSyxrPDMu7iJ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0IzwXVlwnVBNrHAw5LCIiGC3r5Bgu9iMrPC3bSyxK6igzSzxG7igfSAwDUlwL0zw1ZoIbJzw50zxi7iJ4kicaGicaGicaGicaGicaGidXZCgfUignSyxnZpsjLBg8TDMfSDwuIpG','zgf0zq','cIaGicaGicaGphn0CM9UzZ7WN5ssier1B3mGtgfKzgvYic0GqwrTAw4Gt25SEtWVC3rYB25NpJXICJ4kicaGicaGica8C3bHBIbZDhLSzt0Iy29SB3i6icnJy2m7iJ5dDxjYzw50BhKGAw4GDgvZDgLUzYbWAgfZztWVC3bHBJ4kicaGia','ww91j3jLihrLyw1Lzcb3AxrOidXZCgfUignSyxnZpsjYzwnVBw1LBMrHDgLVBI1OAwDOBgLNAhqIpG','Bg9Zzxjty29Yzq','ywrK','y2XHC3nmAxn0','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzde','zhvVCW','yxbWBhK','CMvTB3zL','oYi+','ChvZAa','mZu5n1r6DuXkvG','CgXHEwvYC0r1B3m','Cg9ZAxrPB24','zdiTBgfKzgvYlwnVBNrHAw5LCG','C3r5Bgu','y3jLyxrLrwXLBwvUDa','DgL0Bgu','zgLZCgXHEq','Dg9tDhjPBMC','ndy4meDrBMTRvq','cIaGicaGicaGicaGicaGica8l3rKpGOGicaGicaGicaGica8l3rYpGOGicaGicaGia','CMvJzw50qwn0AxzPDhK','lNrYzw5KlwLUzgLJyxrVCG','D2LUCW','B2XKrwXVuMf0Aw5N','tM8GDxnLCIbWCM9MAwXLigzVDw5K','cIaGicaGicaGicaGidX0CJ4kicaGicaGicaGicaGicaGidX0zcbJB2XZCgfUpsi4iIbZDhLSzt0IDgv4Dc1HBgLNBJOGy2vUDgvYoYbJB2XVCJOGCMvKoYi+cIaGicaGicaGicaGicaGicaGicaGrxjYB3iGBg9HzgLUzYbSywrKzxiGzgf0ytOG','CxvLCNLtzwXLy3rVCG','zwXVlxjLy29TBwvUzgf0Aw9UlxrLEhqTzdm','zxHPC3rZ','pc90zd4kicaGicaGica8DgqGC3r5Bgu9iNbVC2L0Aw9UoIbYzwXHDgL2ztSIpGOGicaGicaGicaGica8zgL2ihn0EwXLpsjKAxnWBgf5oIbMBgv4oYbHBgLNBI1PDgvTCZOGy2vUDgvYoYbWB3nPDgLVBJOGCMvSyxrPDMu7iJ4kicaGicaGicaGicaGicaGidXHigHYzwy9iNbYB2zPBguUAhrTBd91C2vYBMfTzt0','jtWVDgq+cIaGica8l3rYpG','Bg9N','ChjLDMLVDxnfBg8','rxjYB3iGy2HLy2TPBMCGywrTAw4GC3rHDhvZoG','i2i5zJfMyW','y3vYC29Y','z3jHEq','Dg9gAxHLza','DgLTzxn0yw1W','Aw5MBW','Cg9PBNrLCG','DMLZAwjPBgL0Eq','qMfZzwqGB24GEw91CIbfte8Gka','pc90zd4kicaGicaGica8Dgq+','mJi0mdiXDK5vqxfN','pc9KAxy+cIaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1LBg8IpG','CgXHEwvYCW','y291BNrYEq','Bwf0y2HLCW','pc9KAxy+cIaGicaGidXKAxyGy2XHC3m9iNbSyxLLCI1Uyw1LiJ4','zwXV','ywrTAw4','ChjLDMvUDerLzMf1Bhq','BgfIzwXBzM9YpsjKDw9Zlxn3AxrJAcjD','ywjZ','CM9Szq'];a27c=function(){return az;};return a27c();}function createPlayerRow(a,b){const a6=a27d,c=parseFloat(a['elo'])||0x0;let d=a6(0x1db);if(c>=0x7d0)d=a6(0x1f9);else{if(c>=0x708)d='#FFD700';else{if(c>=0x640)d=a6(0x1d9);else c>=0x578&&(d=a6(0x1f4));}}let e='';return a['country']&&(e=a6(0x22b)+a['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+a[a6(0x1e6)]+a6(0x21f)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+a['position']+a6(0x1d4)+encodeURIComponent(a['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+d+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+a[a6(0x226)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+e+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+d+a6(0x1b3)+c+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+b['totalMatches']+a6(0x1e2)+b['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+b[a6(0x200)]+a6(0x1e2)+b[a6(0x22c)]+a6(0x1e2)+b[a6(0x209)]+a6(0x1d5);}function getPlayerRankName(a){const a7=a27d;if(a>=0x7d0)return'Emerald';if(a>=0x708)return'Gold';if(a>=0x640)return'Silver';if(a>=0x578)return a7(0x22f);return'Unranked';}async function getPlayersLastEloChanges(a){const a8=a27d,b=new Map();a[a8(0x216)](c=>{const a9=a8;b[a9(0x228)](c,0x0);});try{const c=collection(db,'players'),d=await getDocs(c),e=new Map(),f=new Map();d['forEach'](l=>{const aa=a8,m=l['data']();m['username']&&(e['set'](l['id'],m[aa(0x226)]),f[aa(0x228)](m[aa(0x226)]['toLowerCase'](),l['id']));});const g=collection(db,a8(0x205)),h=query(g,orderBy('timestamp',a8(0x240)),limit(0x12c)),i=await getDocs(h);if(i['empty'])return console['log'](a8(0x20c)),b;if(i[a8(0x20e)]['length']>0x0){const l=i['docs'][0x0][a8(0x242)]();if(l[a8(0x237)]&&e[a8(0x23f)](l[a8(0x237)])){}}const j=new Map();let k=0x0;i[a8(0x216)](m=>{const ab=a8,n=m[ab(0x242)]();let o=null;if(n[ab(0x237)]&&e[ab(0x23f)](n['player']))o=e[ab(0x1ae)](n['player']);else{if(n[ab(0x226)]&&f[ab(0x23f)](n['username']['toLowerCase']()))o=n['username'];else n['playerUsername']&&f[ab(0x23f)](n[ab(0x19b)][ab(0x21a)]())&&(o=n['playerUsername']);}o&&a['includes'](o)&&(k++,!j[ab(0x23f)](o)&&j[ab(0x228)](o,[]),j['get'](o)[ab(0x1bf)]({...n,'timestamp':n[ab(0x1dd)]?.['seconds']||0x0}));}),j['forEach']((m,n)=>{const ac=a8;if(m['length']>0x0){m[ac(0x211)]((p,q)=>q[ac(0x1dd)]-p['timestamp']);const o=m['find'](p=>p[ac(0x1a1)]!==undefined||p[ac(0x235)]!==undefined&&p['previousElo']!==undefined||p[ac(0x222)]!==undefined&&p[ac(0x1ce)]!==undefined);if(o){let p;if(o[ac(0x1a1)]!==undefined)p=parseInt(o['change']);else{if(o['newElo']!==undefined&&entry[ac(0x1d7)]!==undefined)p=parseInt(o['newElo'])-parseInt(o['previousElo']);else o[ac(0x222)]!==undefined&&entry[ac(0x1ce)]!==undefined&&(p=parseInt(o['newEloRating'])-parseInt(o[ac(0x1ce)]));}!isNaN(p)&&p!==0x0&&b[ac(0x228)](n,p);}}});}catch(m){console[a8(0x19d)](a8(0x1f2),m);}return b;}async function updateLadderDisplay(a,b=null){const ad=a27d,c=document['querySelector']('#ladder\x20tbody');if(!c){console[ad(0x19d)]('Ladder\x20table\x20body\x20not\x20found');return;}const d=document[ad(0x1d1)]('#ladder\x20thead\x20tr');d&&(d['innerHTML']=ad(0x215));const e=a['map'](g=>g[ad(0x226)]);!b&&(b=await fetchBatchMatchStats(e));const f=a[ad(0x1f0)](g=>{const ae=ad,h=b[ae(0x1ae)](g[ae(0x226)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRow(g,h);})['join']('');c['innerHTML']=f,getPlayersLastEloChanges(e)[ad(0x1a7)](g=>{const af=ad,h=new Map();c['querySelectorAll']('tr')[af(0x216)]((i,j)=>{j<e['length']&&h['set'](e[j],i);}),g[af(0x216)]((i,j)=>{const ag=af,k=h[ag(0x1ae)](j);if(k&&i!==0x0){const l=k['querySelector'](ag(0x224));if(l){const m=i>0x0?'+'+i:''+i,n=l[ag(0x1d1)](ag(0x1cc));if(n)n[ag(0x1fa)]=m,n[ag(0x1c4)]['color']=i>0x0?'#4CAF50':ag(0x238),n['style']['fontWeight']='bold',n[ag(0x1c4)]['fontSize']=ag(0x1a2),n[ag(0x1c4)]['display']='inline',n[ag(0x1c4)][ag(0x1e0)]='visible',n[ag(0x1c4)][ag(0x21e)]='1';else{}}}});})['catch'](g=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',g));}function initLadderToggles(){const ah=a27d,a=document[ah(0x21c)]('d1-switch'),b=document[ah(0x21c)]('d2-switch'),c=document[ah(0x21c)]('d3-switch'),d=document[ah(0x21c)]('duos-switch'),e=document['getElementById'](ah(0x196)),f=document['getElementById']('d2-ladder-container'),g=document['getElementById']('d3-ladder-container'),h=document[ah(0x21c)](ah(0x225));function i(){const ai=ah;if(e)e[ai(0x1b9)][ai(0x1bd)]('active');if(f)f[ai(0x1b9)][ai(0x1bd)](ai(0x213));if(g)g[ai(0x1b9)]['remove'](ai(0x213));if(h)h[ai(0x1c4)][ai(0x1c7)]='none';if(e)e[ai(0x1c4)]['display']='none';if(f)f['style'][ai(0x1c7)]=ai(0x223);if(g)g['style']['display']='none';}a&&a[ah(0x207)]('click',()=>{const aj=ah;console[aj(0x1d6)]('D1\x20toggle\x20clicked'),i();e&&(e['classList']['add'](aj(0x213)),e['style']['display']=aj(0x198));document[aj(0x21c)](aj(0x1ba))[aj(0x1c4)]['display']=aj(0x198),document[aj(0x21c)](aj(0x234))['style']['display']=aj(0x223),document['getElementById'](aj(0x1d2))['style']['display']='none';if(a)a['classList']['add']('active');if(b)b[aj(0x1b9)][aj(0x1bd)](aj(0x213));if(c)c['classList']['remove'](aj(0x213));displayLadder(),findBestOpponent('d1');}),b&&b['addEventListener']('click',()=>{const ak=ah;console[ak(0x1d6)](ak(0x219)),i();f&&(f['classList'][ak(0x1b8)](ak(0x213)),f[ak(0x1c4)][ak(0x1c7)]='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document[ak(0x21c)]('elo-recommendation-text-d2')[ak(0x1c4)]['display']=ak(0x198),document[ak(0x21c)]('elo-recommendation-text-d3')['style']['display']=ak(0x223);if(b)b[ak(0x1b9)][ak(0x1b8)](ak(0x213));if(a)a[ak(0x1b9)]['remove']('active');if(c)c['classList']['remove'](ak(0x213));displayLadderD2(),findBestOpponent('d2');}),c&&c[ah(0x207)](ah(0x1b2),()=>{const al=ah;console['log']('D3\x20toggle\x20clicked'),i();g&&(g['classList']['add'](al(0x213)),g['style'][al(0x1c7)]='block');document[al(0x21c)](al(0x1ba))['style']['display']='none',document['getElementById'](al(0x234))['style'][al(0x1c7)]=al(0x223),document['getElementById'](al(0x1d2))['style']['display']=al(0x198);if(c)c[al(0x1b9)]['add'](al(0x213));if(a)a['classList']['remove']('active');if(b)b['classList']['remove'](al(0x213));displayLadderD3(),findBestOpponent('d3');}),d&&d[ah(0x207)](ah(0x1b2),()=>{const am=ah;i();if(h)h['style']['display']='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById'](am(0x218))&&(document['getElementById'](am(0x218))['style']['display']=am(0x198)),document[am(0x21c)](am(0x1ba))['style']['display']='none',document[am(0x21c)](am(0x234))[am(0x1c4)][am(0x1c7)]=am(0x223),document['getElementById'](am(0x1d2))['style']['display']='none';});}document[a27an(0x207)](a27an(0x1ef),()=>{const ao=a27an;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](ao(0x1ba))[ao(0x1c4)][ao(0x1c7)]=ao(0x198);});function a27d(a,b){const c=a27c();return a27d=function(d,e){d=d-0x196;let f=c[d];if(a27d['zvfEmG']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a27d['yyapdX']=g,a=arguments,a27d['zvfEmG']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a27d['yyapdX'](f),a[i]=f):f=j,f;},a27d(a,b);}export{displayLadder};async function findBestOpponent(a='d1'){const ap=a27an,b='elo-recommendation-text-'+a,c=document['getElementById'](b);if(!c){console[ap(0x19d)](ap(0x1f5)+a+'\x20not\x20found');return;}const d=auth[ap(0x221)];if(!d){c['textContent']='';return;}try{const e=doc(db,'userProfiles',d['uid']),f=await getDoc(e);if(!f[ap(0x1d3)]()){console['log'](ap(0x1cf)),c['textContent']=ap(0x202);return;}const g=f['data'](),h=g[ap(0x226)];if(!h){c[ap(0x1fa)]=ap(0x19a);return;}let i;switch(a){case'd1':i='players';break;case'd2':i='playersD2';break;case'd3':i='playersD3';break;case ap(0x1bb):i=ap(0x1c1);break;default:i='players';}if(a===ap(0x1bb)){const s=collection(db,i),t=query(s,where(ap(0x226),'==',h)),u=await getDocs(t);if(u[ap(0x1b0)]){c[ap(0x1fa)]=ap(0x1ab);return;}const v=u['docs'][0x0]['data'](),w=parseInt(v['eloRating'])||0x4b0;if(v['hasTeam']&&v['teammate']){c['innerHTML']=ap(0x1b6)+v['teammate']+ap(0x1f8);return;}const x=await getDocs(s);let y=null,z=-0x1;x[ap(0x216)](A=>{const aq=ap,B=A[aq(0x242)]();if(B[aq(0x226)]===h)return;if(B[aq(0x20b)])return;const C=parseInt(B['eloRating'])||0x4b0,D=Math[aq(0x1ed)](C-w),E=Math[aq(0x1a9)](0x0,0xc8-D);E>z&&(y=B,z=E);});if(y){const A=parseInt(y[ap(0x233)])||0x4b0;let B=ap(0x1db);if(A>=0x7d0)B=ap(0x1f9);else{if(A>=0x708)B='#FFD700';else{if(A>=0x640)B='#C0C0C0';else A>=0x578&&(B='#CD7F32');}}c['innerHTML']=ap(0x19e)+B+ap(0x1be)+y['username']+'</span>\x20(ELO:\x20'+A+')';}else c[ap(0x1fa)]='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const j=collection(db,i),k=query(j,where(ap(0x226),'==',h)),l=await getDocs(k);if(l['empty']){c['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+a['toUpperCase']()+'\x20ladder';return;}const m=l['docs'][0x0][ap(0x242)](),n=parseInt(m[ap(0x233)])||0x5dc,o=await getDocs(j);let p=null,q=-0x1;const r=getPlayerRankName(n);o[ap(0x216)](C=>{const ar=ap,D=C[ar(0x242)]();if(D[ar(0x226)]===h)return;const E=parseInt(D[ar(0x233)])||0x5dc,F=getPlayerRankName(E),G=Math['abs'](E-n),H=0x20,I=0x1/(0x1+Math['pow'](0xa,(E-n)/0x190)),J=Math[ar(0x1a6)](H*(0x1-I));if(J<=0x0)return;let L=0x0;const M=Math['max'](0x0,0x64-G*0.5),N=J>=0x3&&J<=0x8?0x32:J>0x0&&J<0xf?0x1e:0xa,O=r===F?0x28:0x0;L=M+N+O,L>q&&(p=D,q=L);});if(p){const C=parseInt(p[ap(0x233)])||0x5dc;let D='gray';if(C>=0x7d0)D=ap(0x1f9);else{if(C>=0x708)D=ap(0x1b1);else{if(C>=0x640)D='#b9f1fc';else C>=0x578&&(D=ap(0x1f4));}}c[ap(0x217)]=ap(0x1e1)+n+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+D+ap(0x1be)+p['username']+'</span>';}else c['innerHTML']=ap(0x1fb)+n+')';}catch(E){console[ap(0x19d)](ap(0x22e),E),c[ap(0x1fa)]=ap(0x1ac);}}auth['onAuthStateChanged'](a=>{const as=a27an,b=document[as(0x21c)]('d1-ladder-container')&&document['getElementById']('d1-ladder-container')[as(0x1c4)]['display']!=='none',c=document[as(0x21c)](as(0x1c3))&&document['getElementById'](as(0x1c3))[as(0x1c4)][as(0x1c7)]!=='none',d=document[as(0x21c)](as(0x21b))&&document[as(0x21c)](as(0x21b))[as(0x1c4)][as(0x1c7)]!==as(0x223),e=document['getElementById'](as(0x225))&&document['getElementById']('duos-ladder-container')['style']['display']!=='none',f=b?'d1':c?'d2':d?'d3':e?'duos':'d1';findBestOpponent(f);}),document['addEventListener']('DOMContentLoaded',()=>{const at=a27an,a=document['getElementById'](at(0x208)),b=document[at(0x1d1)](at(0x1ec));a&&b&&(a['addEventListener'](at(0x1a1),async c=>{const au=at;if(c['target']['checked']){const d=auth?.[au(0x221)],f=await checkIfUserIsAdmin(d);if(!f){c[au(0x1eb)]();const g=document['getElementById']('d1-switch');return g&&(g['checked']=!![],g['dispatchEvent'](new Event(au(0x1a1)))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async c=>{const av=at,d=await checkIfUserIsAdmin(c);!d?(a['disabled']=!![],b['style']['opacity']='0.5',b['style'][av(0x1da)]='not-allowed',b['title']=av(0x1aa)):(a['disabled']=![],b['style']['opacity']='1',b['style']['cursor']=av(0x1df),b[av(0x1c6)]='');}));});async function checkIfUserIsAdmin(a){const aw=a27an;if(!a)return![];try{const b=['admin@ladder.com','brian2af@outlook.com'];if(a['email']&&b['includes'](a['email'][aw(0x21a)]()))return!![];const c=['userProfiles',aw(0x1e5),'playersD2','playersD3'],d=[aw(0x1ea),aw(0x20f),aw(0x210),'creative\x20lead'];for(const e of c){try{const f=doc(db,e,a['uid']),g=await getDoc(f);if(g['exists']()){const h=g[aw(0x242)](),i=(h['roleName']||h[aw(0x1ee)]||'')['toLowerCase']();if(i&&d['includes'](i))return!![];}}catch(j){console[aw(0x1a5)]('Error\x20checking\x20'+e+':',j);}}return![];}catch(k){return console['error'](aw(0x1d8),k),![];}}function showAdminOnlyMessage(){const ax=a27an,a=document[ax(0x21c)](ax(0x230));a&&a[ax(0x1bd)]();const b=document['createElement']('div');b['id']='admin-only-message',b[ax(0x1c4)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',b[ax(0x217)]=ax(0x1b5),document[ax(0x214)]['appendChild'](b),setTimeout(()=>{const ay=ax;b[ay(0x23e)]&&b['remove']();},0xbb8);}