const a30_0xb742bf=(function(){let _0x1a8732=!![];return function(_0x3cb5f7,_0x44bdcc){const _0x453193=_0x1a8732?function(){if(_0x44bdcc){const _0x2a5692=_0x44bdcc['apply'](_0x3cb5f7,arguments);return _0x44bdcc=null,_0x2a5692;}}:function(){};return _0x1a8732=![],_0x453193;};}()),a30_0x2c75c3=a30_0xb742bf(this,function(){const _0x46d69a=a30_0x4139,_0x1bf30a=function(){let _0x52fc5e;try{_0x52fc5e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x826cac){_0x52fc5e=window;}return _0x52fc5e;},_0x169b4f=_0x1bf30a(),_0x1bb63b=_0x169b4f['console']=_0x169b4f['console']||{},_0x2001c6=[_0x46d69a(0x183),'warn','info',_0x46d69a(0x17a),_0x46d69a(0x1a0),_0x46d69a(0x186),_0x46d69a(0x171)];for(let _0x2d47ab=0x0;_0x2d47ab<_0x2001c6['length'];_0x2d47ab++){const _0x11eefc=a30_0xb742bf['constructor'][_0x46d69a(0x17f)]['bind'](a30_0xb742bf),_0x290f41=_0x2001c6[_0x2d47ab],_0x17f38f=_0x1bb63b[_0x290f41]||_0x11eefc;_0x11eefc['__proto__']=a30_0xb742bf[_0x46d69a(0x179)](a30_0xb742bf),_0x11eefc['toString']=_0x17f38f[_0x46d69a(0x181)][_0x46d69a(0x179)](_0x17f38f),_0x1bb63b[_0x290f41]=_0x11eefc;}});a30_0x2c75c3();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a30_0xda2035 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x266477=![]){const _0x4aed1e=a30_0x4139,_0x1d6b8d=document['querySelector'](_0x4aed1e(0x1a1));if(!_0x1d6b8d){console['error'](_0x4aed1e(0x1a7));return;}_0x1d6b8d['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x704d3f=Date[_0x4aed1e(0x16f)]();if(!_0x266477&&playerCacheD2[_0x4aed1e(0x196)]&&_0x704d3f-playerCacheD2[_0x4aed1e(0x17b)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0x4aed1e(0x196)]);return;}const _0xf59b75=collection(db,'playersD2'),_0x5242b8=await a30_0xda2035['getDocuments'](_0xf59b75),_0x32dae4=[];_0x5242b8[_0x4aed1e(0x198)](_0x855888=>{const _0x5a5e7a=_0x4aed1e,_0xda328b=_0x855888[_0x5a5e7a(0x196)]();_0xda328b[_0x5a5e7a(0x19b)]&&_0x32dae4['push']({..._0xda328b,'id':_0x855888['id'],'elo':_0xda328b[_0x5a5e7a(0x197)]||0x0,'position':_0xda328b[_0x5a5e7a(0x176)]||Number[_0x5a5e7a(0x19e)]});});const _0x5504a7=collection(db,_0x4aed1e(0x194)),_0x32259=await getDocs(_0x5504a7),_0x3c4758=new Map();_0x32259['forEach'](_0x16c1b3=>{const _0x341125=_0x4aed1e,_0x40e17a=_0x16c1b3[_0x341125(0x196)]();_0x40e17a[_0x341125(0x19b)]&&_0x3c4758['set'](_0x40e17a['username']['toLowerCase'](),_0x40e17a);});for(const _0x18b753 of _0x32dae4){const _0x2ebd1e=_0x18b753['username']['toLowerCase']();if(_0x3c4758['has'](_0x2ebd1e)){const _0x5df315=_0x3c4758['get'](_0x2ebd1e);_0x5df315['country']&&(_0x18b753['country']=_0x5df315['country']['toLowerCase']()),_0x18b753[_0x4aed1e(0x174)]=_0x5df315['points']||0x0;}else _0x18b753['points']=0x0;}const _0x3b7358=_0x32dae4['map'](_0x9c0175=>_0x9c0175[_0x4aed1e(0x19b)]),_0x220b39=await fetchBatchMatchStatsD2(_0x3b7358);_0x32dae4[_0x4aed1e(0x19a)]((_0x190dd1,_0x3cf358)=>{const _0x620674=_0x4aed1e,_0x5ab9a8=_0x220b39['get'](_0x190dd1[_0x620674(0x19b)])?.['totalMatches']||0x0,_0x10809a=_0x220b39['get'](_0x3cf358['username'])?.['totalMatches']||0x0;if(_0x5ab9a8===0x0!==(_0x10809a===0x0))return _0x5ab9a8===0x0?0x1:-0x1;return(_0x190dd1['position']||0x3e7)-(_0x3cf358[_0x620674(0x176)]||0x3e7);}),_0x32dae4['forEach']((_0x27c8f2,_0x5bced8)=>{_0x27c8f2['position']=_0x5bced8+0x1;}),playerCacheD2['data']=_0x32dae4,playerCacheD2['timestamp']=_0x704d3f,updateLadderDisplayD2(_0x32dae4);}catch(_0x45e378){console['error']('Error\x20loading\x20D2\x20ladder:',_0x45e378),_0x1d6b8d['innerHTML']=_0x4aed1e(0x18d)+_0x45e378['message']+_0x4aed1e(0x17c);}}function getNextAvailablePositionD2(_0x3a87c1){const _0x28e3f6=a30_0x4139;if(_0x3a87c1[_0x28e3f6(0x172)]===0x0)return 0x1;let _0x541d99=0x0;return _0x3a87c1['forEach'](_0x34fd6d=>{const _0x26027d=_0x28e3f6;_0x34fd6d['position']&&typeof _0x34fd6d['position']===_0x26027d(0x1a6)&&_0x34fd6d['position']>_0x541d99&&(_0x541d99=_0x34fd6d['position']);}),_0x541d99+0x1;}async function updatePlayerPositions(_0x342c51,_0x455cf2){const _0x573396=a30_0x4139;try{const _0x14f708=collection(db,_0x573396(0x16e)),_0x41a872=await getDocs(_0x14f708),_0x7fad6d=[];_0x41a872[_0x573396(0x198)](_0x2213eb=>{_0x7fad6d['push']({'id':_0x2213eb['id'],..._0x2213eb['data']()});});const _0x4fc94a=_0x7fad6d[_0x573396(0x17d)](_0x498a23=>_0x498a23[_0x573396(0x19b)]===_0x342c51),_0x3f9b0c=_0x7fad6d['find'](_0x174f24=>_0x174f24['username']===_0x455cf2);if(!_0x4fc94a||!_0x3f9b0c){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x4fc94a['position']>_0x3f9b0c['position']){const _0x44cf0a=_0x3f9b0c['position'];for(const _0x1b7e40 of _0x7fad6d){_0x1b7e40['position']>=_0x3f9b0c['position']&&_0x1b7e40['position']<_0x4fc94a['position']&&_0x1b7e40[_0x573396(0x19b)]!==_0x342c51&&await updateDoc(doc(db,'playersD2',_0x1b7e40['id']),{'position':_0x1b7e40['position']+0x1});}await updateDoc(doc(db,_0x573396(0x16e),_0x4fc94a['id']),{'position':_0x44cf0a});if(_0x44cf0a===0x1){const _0x1a12fb=doc(db,'playersD2',_0x4fc94a['id']),_0x1cdaa0=await getDoc(_0x1a12fb);!_0x1cdaa0['data']()['firstPlaceDate']&&await updateDoc(_0x1a12fb,{'firstPlaceDate':Timestamp['now']()});}if(_0x3f9b0c['position']===0x1){const _0x30d787=doc(db,'playersD2',_0x3f9b0c['id']);await updateDoc(_0x30d787,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x3053df){console[_0x573396(0x17a)]('Error\x20updating\x20D2\x20player\x20positions:',_0x3053df);}}function getPlayerRankNameD2(_0x429fbd,_0x2ff56b=0x0,_0x22dde3=0x0){const _0x4ee43d=a30_0x4139;if(_0x2ff56b===0x0)return'Unranked';if(_0x429fbd>=0x3e8&&_0x22dde3>=0x50&&_0x2ff56b>=0x14)return _0x4ee43d(0x182);if(_0x429fbd>=0x2bc)return'Gold';if(_0x429fbd>=0x1f4)return'Silver';if(_0x429fbd>=0xc8)return'Bronze';return'Unranked';}function a30_0x4139(_0x469efa,_0x3f0e16){const _0x2c75c3=a30_0x486d();return a30_0x4139=function(_0xb742bf,_0x4386c2){_0xb742bf=_0xb742bf-0x16e;let _0x486d5b=_0x2c75c3[_0xb742bf];return _0x486d5b;},a30_0x4139(_0x469efa,_0x3f0e16);}window['refreshLadderDisplayD2']=function(_0x4cd5cd=!![]){typeof displayLadderD2==='function'?displayLadderD2(_0x4cd5cd):console['warn']('displayLadderD2\x20function\x20not\x20available');};async function updateLadderDisplayD2(_0x62c583){const _0x1b1edc=a30_0x4139;_0x62c583[_0x1b1edc(0x19a)]((_0x26d26c,_0x35ef75)=>_0x26d26c['position']-_0x35ef75['position']);const _0x5c8778=document[_0x1b1edc(0x18f)]('#ladder-d2\x20tbody');if(!_0x5c8778)return;_0x5c8778[_0x1b1edc(0x184)]='';const _0x4c1a07=_0x62c583['map'](_0x59e431=>_0x59e431[_0x1b1edc(0x19b)]),_0x28d384=await fetchBatchMatchStatsD2(_0x4c1a07);let _0x54451e=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x54451e=await getTokensByUsernames(_0x4c1a07);}catch(_0x7e4eb7){console[_0x1b1edc(0x17a)]('D2:\x20Error\x20fetching\x20tokens:',_0x7e4eb7);}const _0x586bdb=document['querySelector'](_0x1b1edc(0x190));_0x586bdb&&(_0x586bdb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x432e1b=_0x62c583[_0x1b1edc(0x1a3)](_0x249423=>{const _0x9837ba=_0x28d384['get'](_0x249423['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x16e550=_0x54451e['get'](_0x249423['username'])||[],_0x1d6b7a=getPrimaryDisplayToken(_0x16e550);return createPlayerRowWithTokenD2(_0x249423,_0x9837ba,_0x1d6b7a);})['join']('');_0x5c8778['innerHTML']=_0x432e1b,getPlayersLastEloChangesD2(_0x4c1a07)['then'](_0x5cb6df=>{const _0xed431=_0x1b1edc,_0x4a138f=new Map();_0x5c8778['querySelectorAll']('tr')[_0xed431(0x198)]((_0x1d783f,_0x374bab)=>{_0x374bab<_0x4c1a07['length']&&_0x4a138f['set'](_0x4c1a07[_0x374bab],_0x1d783f);}),_0x5cb6df['forEach']((_0x24490a,_0xc021dc)=>{const _0x49fecc=_0xed431,_0x10c483=_0x4a138f['get'](_0xc021dc);if(_0x10c483&&_0x24490a!==0x0){const _0x1f2115=_0x10c483[_0x49fecc(0x18f)](_0x49fecc(0x1a5));if(_0x1f2115){const _0x3120a6=_0x24490a>0x0?'+'+_0x24490a:''+_0x24490a,_0x207f8a=_0x1f2115['querySelector'](_0x49fecc(0x18a));_0x207f8a&&(_0x207f8a['textContent']=_0x3120a6,_0x207f8a['style'][_0x49fecc(0x19d)]=_0x24490a>0x0?'#4CAF50':'#F44336',_0x207f8a['style'][_0x49fecc(0x19c)]='bold',_0x207f8a['style']['fontSize']=_0x49fecc(0x1a4),_0x207f8a['style']['display']='inline',_0x207f8a['style']['visibility']='visible',_0x207f8a['style'][_0x49fecc(0x1a9)]='1');}}});})['catch'](_0x4dcd98=>console['error']('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0x4dcd98));}function createPlayerRowWithTokenD2(_0x405f9d,_0x17f795,_0x4c238d){const _0x47af75=a30_0x4139,_0x54cdd3=parseFloat(_0x405f9d['elo'])||0x0;let _0x2e29f1=_0x47af75(0x193);if(_0x17f795[_0x47af75(0x185)]===0x0)_0x2e29f1='#DC143C';else{if(_0x54cdd3>=0x3e8&&_0x17f795['winRate']>=0x50&&_0x17f795['totalMatches']>=0x14)_0x2e29f1=_0x47af75(0x187);else{if(_0x54cdd3>=0x2bc)_0x2e29f1='#FFD700';else{if(_0x54cdd3>=0x1f4)_0x2e29f1=_0x47af75(0x1a2);else _0x54cdd3>=0xc8&&(_0x2e29f1=_0x47af75(0x180));}}}let _0x52eb73='';_0x405f9d['country']&&(_0x52eb73=_0x47af75(0x18e)+_0x405f9d['country'][_0x47af75(0x18c)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x405f9d[_0x47af75(0x189)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x45b76f='';return _0x4c238d&&(_0x45b76f='<img\x20src=\x22'+_0x4c238d[_0x47af75(0x1a8)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4c238d[_0x47af75(0x199)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x4c238d['tokenName']+'\x20'+(_0x4c238d['equipped']?'(Equipped)':'')+_0x47af75(0x17e)),'\x0a<tr>\x0a\x20\x20\x20\x20<td>'+_0x405f9d['position']+'</td>\x0a\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x405f9d['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x2e29f1+_0x47af75(0x191)+_0x405f9d['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x52eb73+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x45b76f+_0x47af75(0x170)+_0x2e29f1+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x54cdd3+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td>'+_0x17f795[_0x47af75(0x185)]+_0x47af75(0x178)+_0x17f795['wins']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x17f795['losses']+_0x47af75(0x178)+_0x17f795['kda']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x17f795['winRate']+'%</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0x405f9d['points']||0x0)+'</td>\x0a</tr>';}async function getPlayersLastEloChangesD2(_0xe80a74){const _0x5c5497=a30_0x4139,_0x4714e8=new Map();_0xe80a74[_0x5c5497(0x198)](_0x5abe02=>_0x4714e8['set'](_0x5abe02,0x0));try{const _0x3140ad=collection(db,'eloHistoryD2'),_0x4197e5=query(_0x3140ad,orderBy(_0x5c5497(0x17b),_0x5c5497(0x177)),limit(0x64)),_0x24a20b=await getDocs(_0x4197e5),_0x2bc9ef=new Map(),_0x3d86f1=await getDocs(collection(db,'playersD2'));_0x3d86f1['forEach'](_0x457821=>{const _0xe0dc5=_0x457821['data']();_0xe0dc5['username']&&_0x2bc9ef['set'](_0x457821['id'],_0xe0dc5['username']);});const _0xe4ad2d=new Map();_0x24a20b['forEach'](_0x5dbb2a=>{const _0x18ff14=_0x5c5497,_0x15bb3c=_0x5dbb2a['data']();let _0x2667ca=_0x15bb3c[_0x18ff14(0x19b)]||_0x15bb3c['playerUsername'];!_0x2667ca&&_0x15bb3c['player']&&_0x2bc9ef['has'](_0x15bb3c['player'])&&(_0x2667ca=_0x2bc9ef['get'](_0x15bb3c['player'])),_0x2667ca&&_0xe80a74[_0x18ff14(0x18b)](_0x2667ca)&&(!_0xe4ad2d['has'](_0x2667ca)&&_0xe4ad2d['set'](_0x2667ca,[]),_0xe4ad2d['get'](_0x2667ca)[_0x18ff14(0x19f)]({..._0x15bb3c,'timestamp':_0x15bb3c[_0x18ff14(0x17b)]?.[_0x18ff14(0x192)]||0x0,'username':_0x2667ca}));}),_0xe4ad2d['forEach']((_0x112c8e,_0x5b4876)=>{const _0xfa9c6d=_0x5c5497;if(_0x112c8e['length']>0x0){_0x112c8e['sort']((_0x5a819d,_0x5c8cf0)=>_0x5c8cf0['timestamp']-_0x5a819d['timestamp']);const _0x4cec7c=_0x112c8e[_0xfa9c6d(0x17d)](_0x33cd0f=>_0x33cd0f['change']!==undefined||_0x33cd0f['newElo']!==undefined&&_0x33cd0f['previousElo']!==undefined);if(_0x4cec7c){let _0x4aee62;if(_0x4cec7c['change']!==undefined)_0x4aee62=_0x4cec7c['change'];else _0x4cec7c['newElo']!==undefined&&_0x4cec7c['previousElo']!==undefined&&(_0x4aee62=_0x4cec7c[_0xfa9c6d(0x188)]-_0x4cec7c['previousElo']);_0x4aee62!==undefined&&_0x4714e8['set'](_0x5b4876,_0x4aee62);}}});if(_0xe4ad2d[_0x5c5497(0x173)]===0x0){const _0x3d1df5=collection(db,'eloHistory'),_0x323f55=query(_0x3d1df5,where('gameMode','==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x5a34e7=await getDocs(_0x323f55);_0x5a34e7['forEach'](_0x33d0b0=>{const _0x3805e3=_0x5c5497,_0x48fc4b=_0x33d0b0[_0x3805e3(0x196)](),_0xb29ec1=_0x48fc4b['username']||_0x48fc4b['playerUsername'];if(_0xb29ec1&&_0xe80a74[_0x3805e3(0x18b)](_0xb29ec1)){const _0x3d944a=_0x48fc4b[_0x3805e3(0x1ac)]||(_0x48fc4b['newElo']!==undefined&&_0x48fc4b['previousElo']!==undefined?_0x48fc4b['newElo']-_0x48fc4b['previousElo']:0x0);_0x3d944a!==0x0&&_0x4714e8['set'](_0xb29ec1,_0x3d944a);}});}catch(_0x19b4db){}}}catch(_0x337580){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x337580);}return _0x4714e8;}function a30_0x486d(){const _0x4e7f39=['playersD2','now','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20','trace','length','size','points','loserScore','position','desc','</td>\x0a\x20\x20\x20\x20<td>','bind','error','timestamp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','find','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','prototype','#CD7F32','toString','Emerald','log','innerHTML','totalMatches','table','#50C878','newElo','country','.trend-indicator','includes','toLowerCase','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','<img\x20src=\x22../images/flags/','querySelector','#ladder-d2\x20thead\x20tr',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','seconds','#DC143C','userProfiles','totalDeaths','data','eloRating','forEach','tokenName','sort','username','fontWeight','color','MAX_SAFE_INTEGER','push','exception','#ladder-d2\x20tbody','#C0C0C0','map','0.85em','td:nth-child(3)','number','D2\x20Ladder\x20table\x20body\x20not\x20found','tokenImage','opacity','winnerScore','get','change'];a30_0x486d=function(){return _0x4e7f39;};return a30_0x486d();}async function fetchBatchMatchStatsD2(_0x53d995){const _0x42c8fc=new Map();try{_0x53d995['forEach'](_0x20a46d=>{_0x42c8fc['set'](_0x20a46d,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x3d9e7d=collection(db,'approvedMatchesD2'),_0x3f8173=await getDocs(_0x3d9e7d);_0x3f8173['forEach'](_0x5e9869=>{const _0x2e0d4d=a30_0x4139,_0x5abbbf=_0x5e9869['data'](),_0xc25e39=_0x5abbbf['winnerUsername'],_0x4a12f9=_0x5abbbf['loserUsername'];if(_0x53d995['includes'](_0xc25e39)){const _0x3685cd=_0x42c8fc['get'](_0xc25e39);_0x3685cd['wins']++,_0x3685cd[_0x2e0d4d(0x185)]++,_0x3685cd['totalKills']+=parseInt(_0x5abbbf[_0x2e0d4d(0x1aa)])||0x0,_0x3685cd['totalDeaths']+=parseInt(_0x5abbbf['loserScore'])||0x0;}if(_0x53d995['includes'](_0x4a12f9)){const _0x256669=_0x42c8fc[_0x2e0d4d(0x1ab)](_0x4a12f9);_0x256669['losses']++,_0x256669['totalMatches']++,_0x256669['totalKills']+=parseInt(_0x5abbbf[_0x2e0d4d(0x175)])||0x0,_0x256669['totalDeaths']+=parseInt(_0x5abbbf['winnerScore'])||0x0;}}),_0x53d995['forEach'](_0x4ef848=>{const _0x1871f4=a30_0x4139,_0x2c5fa9=_0x42c8fc['get'](_0x4ef848);_0x2c5fa9['kda']=_0x2c5fa9[_0x1871f4(0x195)]>0x0?(_0x2c5fa9['totalKills']/_0x2c5fa9['totalDeaths'])['toFixed'](0x2):_0x2c5fa9['totalKills']['toFixed'](0x2),_0x2c5fa9['winRate']=_0x2c5fa9[_0x1871f4(0x185)]>0x0?(_0x2c5fa9['wins']/_0x2c5fa9['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x42db85){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x42db85);}return _0x42c8fc;}export{displayLadderD2,updatePlayerPositions};