const a0_0x285f2f=a0_0x4c1d;function a0_0x2361(){const _0x5ed7c5=['41034318dCZVZi','activeListeners','[FirebaseIdle]\x20Suspension\x20test\x20complete','pendingTimeout','then','substr','Executing\x20delayed\x20','1266145HVKpDZ','delete','exception','prototype','[FirebaseIdle]\x20Successfully\x20suspended\x20listener:','set','toString','body','add','message','all','unsubscribe','resumeSession','checkSessionActive','operationType','random','clear','1503056wxUFtU','2CGdFFa','3316970vGeIsX','7qLuZwF','safeOperation','error','\x20operations\x20during\x20idle\x20state','firebase-suspend-indicator','warn','RDL_NETWORK_ERROR','[FirebaseIdle]\x20Successfully\x20resumed\x20listener:','pendingOperations','11ERDsiA','log','code','[FirebaseIdle]\x20Debug\x20mode\x20','getDocument','bind','finally','699856ihgzyD','12318036szoAkf','1015067jThhpG','\x20operation','27KkUUAT','[FirebaseIdle]\x20Listener\x20removed:\x20','info','size','12poVADI','args','RDL_SESSION_SUSPENDED','debug','[FirebaseIdle]\x20Error\x20suspending\x20listener:','resource-exhausted','[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20','18ZqNyHQ'];a0_0x2361=function(){return _0x5ed7c5;};return a0_0x2361();}(function(_0x5f518c,_0x5d48ca){const _0x80f903=a0_0x4c1d,_0x25aad3=_0x5f518c();while(!![]){try{const _0x2940aa=-parseInt(_0x80f903(0x144))/0x1*(-parseInt(_0x80f903(0x130))/0x2)+-parseInt(_0x80f903(0x151))/0x3*(parseInt(_0x80f903(0x142))/0x4)+parseInt(_0x80f903(0x159))/0x5*(-parseInt(_0x80f903(0x14a))/0x6)+parseInt(_0x80f903(0x132))/0x7*(parseInt(_0x80f903(0x12f))/0x8)+parseInt(_0x80f903(0x146))/0x9*(-parseInt(_0x80f903(0x131))/0xa)+parseInt(_0x80f903(0x13b))/0xb*(-parseInt(_0x80f903(0x143))/0xc)+parseInt(_0x80f903(0x152))/0xd;if(_0x2940aa===_0x5d48ca)break;else _0x25aad3['push'](_0x25aad3['shift']());}catch(_0x29d59a){_0x25aad3['push'](_0x25aad3['shift']());}}}(a0_0x2361,0xbed1f));const a0_0x11500a=(function(){let _0x4e88a7=!![];return function(_0x25c75e,_0x5d586e){const _0x3421ca=_0x4e88a7?function(){if(_0x5d586e){const _0x51a387=_0x5d586e['apply'](_0x25c75e,arguments);return _0x5d586e=null,_0x51a387;}}:function(){};return _0x4e88a7=![],_0x3421ca;};}()),a0_0x40741b=a0_0x11500a(this,function(){const _0x38541b=a0_0x4c1d,_0x54ec64=function(){let _0x264d04;try{_0x264d04=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5cf1b7){_0x264d04=window;}return _0x264d04;},_0x2595cd=_0x54ec64(),_0x349458=_0x2595cd['console']=_0x2595cd['console']||{},_0x3e5d39=['log',_0x38541b(0x137),_0x38541b(0x148),'error',_0x38541b(0x15b),'table','trace'];for(let _0x2e69b8=0x0;_0x2e69b8<_0x3e5d39['length'];_0x2e69b8++){const _0x23685e=a0_0x11500a['constructor'][_0x38541b(0x15c)]['bind'](a0_0x11500a),_0x566f55=_0x3e5d39[_0x2e69b8],_0x2ec36b=_0x349458[_0x566f55]||_0x23685e;_0x23685e['__proto__']=a0_0x11500a['bind'](a0_0x11500a),_0x23685e['toString']=_0x2ec36b['toString'][_0x38541b(0x140)](_0x2ec36b),_0x349458[_0x566f55]=_0x23685e;}});a0_0x40741b();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x35085a=a0_0x4c1d;this[_0x35085a(0x153)]=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this[_0x35085a(0x14d)]=![];}['checkSessionActive'](){const _0xb62351=a0_0x4c1d;if(window[_0xb62351(0x14c)]===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0xb62351(0x137)]('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+_0xb62351(0x135)),![];if(window[_0xb62351(0x138)]===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x5b5102,_0x46fc28,..._0xd2c5ab){const _0x5eb137=a0_0x4c1d;if(!this['checkSessionActive']()){const _0x32f79f=_0x46fc28+'-'+Date['now']()+'-'+Math[_0x5eb137(0x12d)]()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x32f79f,{'operation':_0x5b5102,'operationType':_0x46fc28,'args':_0xd2c5ab}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{const _0x285176=_0x5eb137;this['pendingOperations']['clear'](),this[_0x285176(0x155)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x5b5102(..._0xd2c5ab);}catch(_0x32d8f1){if(_0x32d8f1[_0x5eb137(0x13d)]==='unavailable'||_0x32d8f1[_0x5eb137(0x13d)]===_0x5eb137(0x14f)||_0x32d8f1['message']&&_0x32d8f1[_0x5eb137(0x127)]['includes']('network'))return handleNetworkError(),null;throw _0x32d8f1;}}async[a0_0x285f2f(0x13f)](_0x28f5b0){return this['safeOperation'](getDoc,'get',_0x28f5b0);}async['getDocuments'](_0xa7a732){return this['safeOperation'](getDocs,'query',_0xa7a732);}async['addDocument'](_0x59cd02,_0x3b7431){const _0x51a601=a0_0x285f2f;return this['safeOperation'](addDoc,_0x51a601(0x126),_0x59cd02,_0x3b7431);}async['setDocument'](_0x181a54,_0x4c158c,_0x4c8a0f={}){const _0x2110e8=a0_0x285f2f;return this[_0x2110e8(0x133)](setDoc,'set',_0x181a54,_0x4c158c,_0x4c8a0f);}async['updateDocument'](_0x5c3e3e,_0x5b10c4){const _0x510788=a0_0x285f2f;return this[_0x510788(0x133)](updateDoc,'update',_0x5c3e3e,_0x5b10c4);}async['deleteDocument'](_0x36afd9){const _0x44de73=a0_0x285f2f;return this['safeOperation'](deleteDoc,_0x44de73(0x15a),_0x36afd9);}['suspendAllListeners'](){const _0x531199=a0_0x285f2f;console[_0x531199(0x13c)]('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this[_0x531199(0x153)]['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x1b65b,_0x30ab0b)=>{const _0x47576e=_0x531199;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x30ab0b);if(typeof _0x1b65b==='function')try{_0x1b65b(),console['log'](_0x47576e(0x122),_0x30ab0b);}catch(_0xaeb814){console[_0x47576e(0x134)](_0x47576e(0x14e),_0x30ab0b,_0xaeb814);}else{if(_0x1b65b&&typeof _0x1b65b['unsubscribe']==='function')try{_0x1b65b[_0x47576e(0x129)](),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x30ab0b);}catch(_0x1a1a8d){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x30ab0b,_0x1a1a8d);}}}),this['activeListeners'][_0x531199(0x12e)]();if(this[_0x531199(0x14d)]){const _0x295420=document['createElement']('div');_0x295420['id']='firebase-suspend-indicator',_0x295420['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x295420['textContent']='Firebase:\x20Suspended',document[_0x531199(0x125)]['appendChild'](_0x295420);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x26330c=a0_0x285f2f;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this['_suspendedListeners']['forEach']((_0x22a95b,_0x8477ca)=>{const _0x5952bf=a0_0x4c1d;console[_0x5952bf(0x13c)]('[FirebaseIdle]\x20Resuming\x20listener:',_0x8477ca);try{if(typeof _0x22a95b==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x8477ca);return;}const {query:_0x12f727,callback:_0x1182f5,options:_0x2db4e9}=_0x22a95b;if(_0x12f727&&_0x1182f5){const _0x232e54=onSnapshot(_0x12f727,_0x1182f5,_0x2db4e9||{});this['activeListeners'][_0x5952bf(0x123)](_0x8477ca,_0x232e54),console['log'](_0x5952bf(0x139),_0x8477ca);}}catch(_0x3d3754){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x8477ca,_0x3d3754);}}),this['_suspendedListeners'][_0x26330c(0x12e)]();const _0x564625=document['getElementById'](_0x26330c(0x136));_0x564625&&_0x564625['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x549fc3,_0x156d14,_0x506a1a={},_0x453cea=null){const _0x136280=a0_0x285f2f,_0x126e60=_0x453cea||'listener_'+Date['now']()+'_'+Math['random']()[_0x136280(0x124)](0x24)[_0x136280(0x157)](0x2,0x9);this[_0x136280(0x14d)]&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x126e60);if(!this[_0x136280(0x12b)]())return console[_0x136280(0x13c)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x126e60),()=>{};try{const _0x7b63a6=onSnapshot(_0x549fc3,_0x156d14,_0x506a1a);return this['activeListeners'][_0x136280(0x123)](_0x126e60,{'unsubscribe':_0x7b63a6,'query':_0x549fc3,'callback':_0x156d14,'options':_0x506a1a}),this['debug']&&(console[_0x136280(0x13c)]('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x126e60),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0x136280(0x149)])),()=>{const _0x4a2e19=_0x136280;this[_0x4a2e19(0x14d)]&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x126e60);try{_0x7b63a6(),this[_0x4a2e19(0x153)]['delete'](_0x126e60),this[_0x4a2e19(0x14d)]&&(console['log'](_0x4a2e19(0x147)+_0x126e60),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0x4a2e19(0x149)]));}catch(_0x5de786){console['error'](_0x4a2e19(0x150)+_0x126e60+':',_0x5de786);}};}catch(_0x15ec38){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x126e60+':',_0x15ec38),()=>{};}}['executePendingOperations'](_0x28d2bc=a0_0x285f2f(0x128)){const _0x3258b5=a0_0x285f2f;console['log']('Executing\x20pending\x20'+_0x28d2bc+'\x20operations:\x20'+this[_0x3258b5(0x13a)][_0x3258b5(0x149)]+'\x20total\x20operations');const _0x504753=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0x504753['forEach']((_0x1992f3,_0x306460)=>{const _0x32ecd5=_0x3258b5;_0x28d2bc==='all'||_0x1992f3[_0x32ecd5(0x12c)]===_0x28d2bc?(console['log'](_0x32ecd5(0x158)+_0x1992f3['operationType']+_0x32ecd5(0x145)),this['safeOperation'](_0x1992f3['operation'],_0x1992f3[_0x32ecd5(0x12c)],..._0x1992f3[_0x32ecd5(0x14b)])['catch'](_0x12ba82=>console[_0x32ecd5(0x134)]('Error\x20executing\x20pending\x20operation:',_0x12ba82))):this[_0x32ecd5(0x13a)]['set'](_0x306460,_0x1992f3);});}['enableDebug'](_0x370681=!![]){const _0x41b030=a0_0x285f2f;this['debug']=_0x370681,console['log'](_0x41b030(0x13e)+(_0x370681?'enabled':'disabled'));if(_0x370681){const _0x543f8b=window[_0x41b030(0x14c)];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system','test'))[_0x41b030(0x156)](_0x21a76b=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x21a76b);})['catch'](_0x4deee7=>{const _0x5bf244=_0x41b030;console[_0x5bf244(0x13c)]('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x4deee7);})[_0x41b030(0x141)](()=>{const _0x4ef787=_0x41b030;console[_0x4ef787(0x13c)](_0x4ef787(0x154)),window['RDL_SESSION_SUSPENDED']=_0x543f8b;});}}}const firebaseIdle=new FirebaseIdleWrapper();function a0_0x4c1d(_0x16937d,_0x3c1fdc){const _0xd18b63=a0_0x2361();return a0_0x4c1d=function(_0x40741b,_0x11500a){_0x40741b=_0x40741b-0x122;let _0x3a3b05=_0xd18b63[_0x40741b];return _0x3a3b05;},a0_0x4c1d(_0x16937d,_0x3c1fdc);}export function enhanceIdleTimeout(){const _0x7dd7ce=a0_0x285f2f,_0x1751de=window['suspendSession']||function(){},_0x4181c2=window[_0x7dd7ce(0x12a)]||function(){};window['suspendSession']=function(){_0x1751de(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x4181c2(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;