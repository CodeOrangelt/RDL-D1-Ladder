const a48J=a48b;(function(a,b){const I=a48b,c=a();while(!![]){try{const d=-parseInt(I(0x1ef))/0x1*(parseInt(I(0x29b))/0x2)+parseInt(I(0x22c))/0x3*(parseInt(I(0x26e))/0x4)+parseInt(I(0x228))/0x5*(-parseInt(I(0x234))/0x6)+-parseInt(I(0x270))/0x7*(parseInt(I(0x1f8))/0x8)+-parseInt(I(0x281))/0x9*(parseInt(I(0x23b))/0xa)+-parseInt(I(0x28f))/0xb+parseInt(I(0x256))/0xc*(parseInt(I(0x266))/0xd);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a48a,0x2e69d));import{approveReport}from'./ladderalgorithm.js';import{approveReportD2}from'./ladderalgorithm-d2.js';import{approveReportD3}from'./ladderalgorithm-d3.js';import{checkPendingMatches,updatePendingMatchNotification,updateNotificationDot}from'./checkPendingMatches.js';import{collection,getDocs,query,where,orderBy,serverTimestamp,doc,setDoc,getDoc,addDoc,updateDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentUserEmail=null,confirmationNotification=null,outstandingReportData=null,currentGameMode='D1',outstandingMatches=[];document[a48J(0x21e)]('DOMContentLoaded',async()=>{const K=a48J,a={'authWarning':document[K(0x240)]('auth-warning'),'reportForm':document[K(0x240)]('report-form'),'winnerUsername':document['getElementById']('winner-username'),'loserUsername':document[K(0x240)](K(0x232)),'loserScore':document[K(0x240)]('loser-score'),'suicides':document[K(0x240)]('suicides'),'mapPlayed':document[K(0x240)]('map-played'),'loserComment':document[K(0x240)](K(0x237)),'reportError':document['getElementById'](K(0x2c8)),'reportLightbox':document[K(0x240)]('report-lightbox')};Object[K(0x2a7)](a)['forEach'](([f,g])=>{const L=K;!g&&console[L(0x259)](L(0x2ab)+f+L(0x26a));});const b=document['getElementById']('d1-mode'),c=document[K(0x240)]('d2-mode'),d=document['getElementById'](K(0x285));b[K(0x21e)](K(0x249),()=>{const M=K;e('D1'),b[M(0x29d)][M(0x2a1)](M(0x1ec)),c[M(0x29d)]['remove'](M(0x1ec)),d[M(0x29d)][M(0x1ff)]('active');}),c[K(0x21e)](K(0x249),()=>{const N=K;e('D2'),c[N(0x29d)][N(0x2a1)]('active'),b['classList'][N(0x1ff)](N(0x1ec)),d[N(0x29d)][N(0x1ff)](N(0x1ec));}),d[K(0x21e)](K(0x249),()=>{const O=K;e('D3'),d['classList']['add']('active'),b[O(0x29d)]['remove'](O(0x1ec)),c[O(0x29d)]['remove'](O(0x1ec));});function e(f){const P=K;currentGameMode=f,console[P(0x248)](P(0x22d)+currentGameMode),auth[P(0x253)]&&checkUserInLadderAndLoadOpponents(auth[P(0x253)][P(0x214)]);}setupAuthStateListener(a),setupReportForm(a),auth['currentUser']?(console['log'](K(0x20e)),checkUserInLadderAndLoadOpponents(auth['currentUser'][K(0x214)])):console[K(0x248)](K(0x24d));});function setupAuthStateListener(a){onAuthStateChanged(auth,async b=>{b?handleUserSignedIn(b,a):handleUserSignedOut(a);});}async function handleUserSignedIn(a,b){const Q=a48J;if(!b){console['error']('Elements\x20object\x20is\x20null\x20or\x20undefined');return;}currentUserEmail=a['email']||null;const c=a[Q(0x214)];try{const d=doc(db,Q(0x26d),c);try{const i=await getDoc(d);console['log']('Non-participant\x20check:',{'exists':i['exists'](),'data':i[Q(0x290)]()?i[Q(0x255)]():null});if(i[Q(0x290)]()&&i['data']()['isNonParticipant']===!![]){b[Q(0x269)]&&(b[Q(0x269)]['style'][Q(0x203)]='block',b['authWarning']['textContent']=Q(0x2cb));b[Q(0x289)]&&(b[Q(0x289)][Q(0x294)]['display']=Q(0x1f5));return;}}catch(j){console[Q(0x259)]('Error\x20checking\x20non-participant\x20status:',j);}const e=['players','playersD2',Q(0x1fd),Q(0x205),'playersCTF'];let f=![],g='';for(const k of e){try{const l=doc(db,k,c),m=await getDoc(l);if(m[Q(0x290)]()){f=!![],g=m[Q(0x255)]()['username'],console[Q(0x248)]('User\x20found\x20in\x20collection\x20'+k+Q(0x222)+g);if(k==='players'&&currentGameMode!=='D1'){currentGameMode='D1';const n=document['getElementById']('d1-mode'),o=document['getElementById'](Q(0x27d)),p=document[Q(0x240)](Q(0x285));n['classList'][Q(0x2a1)]('active'),o[Q(0x29d)]['remove']('active'),p['classList'][Q(0x1ff)]('active');}else{if(k==='playersD2'&&currentGameMode!=='D2'){currentGameMode='D2';const q=document['getElementById']('d1-mode'),r=document[Q(0x240)]('d2-mode'),s=document['getElementById'](Q(0x285));r[Q(0x29d)]['add']('active'),q['classList'][Q(0x1ff)](Q(0x1ec)),s['classList'][Q(0x1ff)]('active');}}break;}}catch(t){console['warn'](Q(0x27c)+k+'\x20collection:',t);}}if(!f){b['authWarning']&&(b[Q(0x269)][Q(0x294)]['display']=Q(0x20f),b['authWarning'][Q(0x1f9)]=Q(0x28b));b['reportForm']&&(b[Q(0x289)][Q(0x294)]['display']=Q(0x1f5));return;}const h=await checkUserInLadderAndLoadOpponents(c);if(!h){console[Q(0x259)]('User\x20is\x20not\x20in\x20the\x20'+currentGameMode+'\x20ladder.\x20Checking\x20other\x20ladders.');for(const u of['players',Q(0x2ae),Q(0x1fd)]){if(u===(currentGameMode==='D1'?Q(0x2bd):currentGameMode==='D2'?'playersD2':'playersD3'))continue;const v=doc(db,u,c);try{const w=await getDoc(v);if(w['exists']()){const x=u===Q(0x2bd)?'D1':u===Q(0x2ae)?'D2':'D3';console['log'](Q(0x229)+u+Q(0x252)+x+Q(0x276));const y=document['getElementById'](Q(0x1fc)),z=document['getElementById']('d2-mode'),A=document['getElementById'](Q(0x285));if(x==='D1')y[Q(0x29d)][Q(0x2a1)]('active'),z[Q(0x29d)][Q(0x1ff)](Q(0x1ec)),A[Q(0x29d)]['remove'](Q(0x1ec));else x==='D2'?(z[Q(0x29d)]['add'](Q(0x1ec)),y[Q(0x29d)]['remove'](Q(0x1ec)),A[Q(0x29d)]['remove']('active')):(A[Q(0x29d)]['add']('active'),y[Q(0x29d)][Q(0x1ff)]('active'),z[Q(0x29d)]['remove'](Q(0x1ec)));currentGameMode=x,await checkUserInLadderAndLoadOpponents(c);break;}}catch(B){console['warn'](Q(0x27c)+u+':',B);}}}}catch(C){console['error']('Error\x20during\x20sign-in\x20handling:',C);}}function handleUserSignedOut(a){const R=a48J;a[R(0x269)][R(0x294)]['display']='block',a['reportForm']['style'][R(0x203)]='none',currentUserEmail=null;}async function updateUserDisplay(a,b){const S=a48J,c=collection(db,'players'),d=query(c,where('email','==',a)),e=await getDocs(d);if(!e['empty']){const f=e['docs'][0x0][S(0x255)]()['username'];b['loserUsername'][S(0x1f9)]=f;}}async function populateWinnerDropdown(a){const T=a48J;try{const b=collection(db,'players'),c=await getDocs(b);a[T(0x215)]='<option\x20value=\x22\x22>Select\x20Winner</option>',!c[T(0x21b)]&&c[T(0x271)](d=>{const U=T,e=d[U(0x255)]();if(e[U(0x297)]!==currentUserEmail){const f=document[U(0x244)](U(0x1f4));f[U(0x272)]=e['email'],f['textContent']=e['username'],a['appendChild'](f);}});}catch(d){console[T(0x202)]('Error\x20populating\x20winner\x20dropdown:',d);throw d;}}function a48a(){const aA=['BgLNAhrIB3GTC3vPy2LKzxm','CMvWB3j0rxjYB3i','D2LUBMvYrw1HAwW','vxnLCIbUB3qGyxv0AgvUDgLJyxrLza','z2v0rwXLBwvUDej5swq','CgvUzgLUz01HDgnOzxnemG','D2LUBMvYlwnVBw1LBNq','CMvK','y3jLyxrLrwXLBwvUDa','uMvWB3j0igHHCYbIzwvUihn1y2nLC3nMDwXSEsb1CgrHDgvKlG','B25ZDwjTAxq','CMvWB3j0lwzVCM0','Bg9N','y2XPy2S','Cg9ZAxrPB24','zMv0y2HpDxrZDgfUzgLUz01HDgnOzxm','vw5RBM93BIbKyxrL','tM8GDxnLCIbSB2DNzwqGAw4GEwv0lcb3ywL0Aw5NigzVCIbHDxrOihn0yxrLignOyw5Nzq','u2HVD2LUzYbSAwDODgjVEa','zwrPDfjLCg9YDa','rxjYB3iGzMv0y2HPBMCGB3v0C3rHBMrPBMCGBwf0y2HLCZO','z2v0qxr0CMLIDxrL','lcbZD2L0y2HPBMCGDg8G','y3vYCMvUDfvZzxi','tM90ihjLz2LZDgvYzwqGAw4GDgHPCYbSywrKzxi','zgf0yq','mtyZmZuWmtjOC3zUz2m','uMvWB3j0ierHDgeGAw4Gyxv0B0zPBgXszxbVCNrgB3jToG','twf0y2GGCMvWB3j0ihjLAMvJDgvKihn1y2nLC3nMDwXSEq','D2fYBG','Bg9Zzxjjza','ig1HDgnOzxmGzM91BMq','tM8GD2LUBMvYigzVDw5KigzVCIb0AgLZig1HDgnO','pha+tM8GB3v0C3rHBMrPBMCGBwf0y2HLCYbMB3vUzcbPBIb0AguGy3vYCMvUDcbNyw1Lig1VzguUpc9WpG','BgLNAhrIB3GTBg9ZzxiTC2nVCMu','Bg9ZzxjZt2XKrwXV','B3b0Aw9UCW','C2nYB2XSsw50B1zPzxC','zgvMyxvSDcbJB2XSzwn0Aw9U','uMvWB3j0ieDHBwu','rxjYB3i6ieXVC2vYigrHDgeGBM90igzVDw5KlG','r2fTzsbYzxbVCNrLzcbZDwnJzxnZzNvSBhKU','mtniz3zJuuy','CMvSB2fK','y2XVBMvoB2rL','yxv0AfDHCM5PBMC','jYbUB3qGzM91BMqGAw4GDgHLierptq','D2LUBMvYlxnJB3jL','vw5RBM93BG','BM9UugfYDgLJAxbHBNrZ','odG1mJbMzg9QBgm','Dg9mB2nHBgveyxrLu3rYAw5N','otq3otrlyMnNvNu','zM9YrwfJAa','DMfSDwu','CMvWBgfJzunOAwXK','yM9YzgvYuMfKAxvZ','z2fTzu1Vzgu','ig1Vzgu','rxjYB3iGC3vIBwL0DgLUzYbYzxbVCNq6','i2qZmMyYzG','pg9WDgLVBIb2ywX1zt0IiJ5tzwXLy3qGt3bWB25LBNq8l29WDgLVBJ4','zwXVuMf0Aw5N','lMXPz2H0yM94lwj1DhrVBNm','rxjYB3iGy2HLy2TPBMCG','zdiTBw9Kzq','Bg9ZzxjvC2vYBMfTzq','CgvUzgLUz01HDgnOzxm','uMvQzwn0Aw5Nig1HDgnOia','mtaYnMHXtwjSva','D2LUBMvYt2XKrwXV','tgLNAhrIB3GGzwXLBwvUDcbUB3qGzM91BMq','BgLNAhrIB3GTBg9Zzxi','zdmTBw9Kzq','rxjYB3iGCMvQzwn0Aw5Nig1HDgnOoG','cIaGicaGicaGicaGidWVzgL2pGOGicaGicaGidWVzgL2pGOGicaGicaGia','q2fUy2vSievKAxq','CMvWB3j0rM9YBq','rxjYB3iGzMv0y2HPBMCGCgXHEwvYigrHDgeUifbSzwfZzsb0CNKGywDHAw4U','ww91igfYzsbUB3qGCMvNAxn0zxjLzcbPBIbHBNKGBgfKzgvYlG','C3vIz2fTzs10ExbL','yxbWCM92zwq','pc9OmZ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0IBwf0y2GTzgv0ywLSCYi+cIaGicaGicaGicaGicaGica8C3bHBIbJBgfZCZ0IBwf0y2GTzgv0ywLSlwL0zw0IpK1HCdOG','mtG2mJK3mvHcA2neqW','zxHPC3rZ','tg9HzgLUzYbVChbVBMvUDhmGzNjVBsbJB2XSzwn0Aw9UoIa','D2LUBMvYvxnLCM5HBwu','BgvUz3rO','C3r5Bgu','yxbWCM92zs1IDxr0B24','Bg9ZzxjtDwLJAwrLCW','zw1HAwW','rxjYB3i6ia','ww91igfYzsbUB3qGCMvNAxn0zxjLzcbPBIb0AguG','rxjYB3iGy2HLy2TPBMCGB3v0C3rHBMrPBMCGCMvWB3j0CZO','nZKWu05zsNnM','C2vSzwn0zwq','y2XHC3nmAxn0','D2LUBMvYlxvZzxjUyw1L','ihrVia','zNjVBq','ywrK','u2vSzwn0zwqGB3bWB25LBNqGBM90igzVDw5K','v2LUBMvY','zg9JCW','CMDIysGYntuSidi1nsWGmJu1lcaWlJa1kq','ugXLyxnLihnLBgvJDcbHBIbVChbVBMvUDa','zw50CMLLCW','re9nq29UDgvUDeXVywrLza','yxbWzw5Kq2HPBgq','CMvZy2LUzfjLCg9YDa','rwXLBwvUDcaN','z3jLzw4','zgf0ys1LzgL0lwLK','CgXHEwvYC0qY','CgfYzw50tM9Kzq','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gy29SBgvJDgLVBJOG','lNjLC2nPBMqTCMvWB3j0lwj0BG','zgf0yxnLDa','rM91BMqGyNv0Dg9UCYbJB250ywLUzxi6','Bg9ZzxjfBwfPBa','tM8GBwf0y2HLCYbMB3vUzcbIEsbLBwfPBcbLAxrOzxiSihrYEwLUzYb3Aw5UzxjvC2vYBMfTzq','tM8GBg9ZzxiGzM91BMqGzM9YihrOAxmGBwf0y2G','lNzPzxCTzgv0ywLSlwj0BG','rxjYB3i6ifDPBM5LCIbKyxrHig5VDcbMB3vUzc4','nhb4','rxjYB3iGyxbWCM92Aw5NihjLCg9YDdO','DgfYz2v0','y3jLyxrLzef0','CgXHEwvYCW','igXHzgrLCI4UlG','yNv0Dg9Uw3r5Cgu9iNn1yM1PDcjD','y2fUy2vSlwj1DhrVBG','tM8GCgvUzgLUzYbTyxrJAgvZigzVDw5KigzVCIb0AgLZihvZzxi','iZzHmwi5yq','ugXLyxnLihbYB3zPzguGysbYzwfZB24GzM9YihjLAMvJDgLUzYb0AgLZig1HDgnOihjLCg9YDdO','zgf0ys1Pza','BgLNAhrIB3GTBwfW','rxjYB3iGy2HLy2TPBMCGBgfKzgvYig1LBwjLCNnOAxaUifbSzwfZzsb0CNKGywDHAw4GBgf0zxiU','C3vIBwL0','CMvWB3j0lwvYCM9Y','igXHzgrLCI4','DxnLCM5HBwu','tM9UlxbHCNrPy2LWyw50CYbJyw5UB3qGCMvWB3j0igDHBwvZlG','yMfJA2DYB3vUzenVBg9Y','CMvUzgvYt3v0C3rHBMrPBMDnyxrJAgvZ','Bg9ZzxjdB21Tzw50','ywn0AxzL','DgHLBG','BwfWlxbSyxLLza','nJiZte1zBNPT','y29SB3i','iJ4kicaGicaGicaGicaGpgGZpG','ChjLDMvUDerLzMf1Bhq','CxvLCNLtzwXLy3rVCKfSBa','B3b0Aw9U','BM9Uzq','yNrU','zgLZywjSzwq','mtm2Be1wzLL4','Dgv4DenVBNrLBNq','iJ5szxnJAw5KifjLCg9YDdWVyNv0Dg9UpGOGicaGicaGicaGicaGicaG','Dw5KzwzPBMvK','zdeTBw9Kzq','CgXHEwvYC0qZ','y2f0y2G','CMvTB3zL','igLUia','v2LUBMvYoIa','zxjYB3i','zgLZCgXHEq','CMvWB3j0lwXPz2H0yM94','CgXHEwvYC0r1B3m','Aw5Zzxj0qMvMB3jL','BgLNAhrIB3GTC3vIz2fTzq','y3vYC29Y','rxjYB3iGCMvWB3j0Aw5NigDHBwuUifbSzwfZzsb0CNKGywDHAw4U','CxvLCNLtzwXLy3rVCG','rxjYB3iGCMvZy2LUzgLUzYbYzxbVCNq6','CMvQzwn0lwj1DhrVBG','CgvUzgLUz01HDgnOzxnemW','vxnLCIbHBhjLywr5igXVz2DLzcbPBIWGy2HLy2TPBMCGrdeGBgfKzgvYihn0yxr1CW','yMXVy2S','pc9ZCgfUpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iM1HDgnOlwrLDgfPBc1PDgvTiJ5eyxrLoIa','C2L6zq','C2HVDW','B25bDxrOu3rHDgvdAgfUz2vK','DwLK','Aw5Uzxjive1m','rxjYB3iGCMvQzwn0Aw5Nig1HDgnOoIa','yNjPyw4YywzaB3v0Bg9VAY5JB20','zM9UDfDLAwDODa','BwfWugXHEwvK','CMvZzxq','zw1WDhK','C3vPy2LKzxm','D2LUBMvYswq','ywrKrxzLBNrmAxn0zw5LCG','C3vIz2fTzvr5Cgu','CMvHze9UBhK','Bg9ZzxiTC2nVCMu','ihDPDgGGDxnLCM5HBwu6ia','C2v0qxr0CMLIDxrL','ihDPDgGGsuq6ia','uxvLCNKGyNKGD2LUBMvYvxnLCM5HBwuGCMvZDwX0CZOG','u3rHBMrHCMqGtwf0y2G','BwfYz2LUuMLNAhq','mtyZnZu1tMfsAvDV','vxnLCIbMB3vUzcbPBIa','Bg9Zzxjty29Yzq','twf0y2GGCMvWB3j0zwqGAw4G','nLPoqNP4Aq','r2fTzsbTB2rLihnLDcb0BZOG','pc9ZCgfUpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iM1HDgnOlwrLDgfPBc1PDgvTiJ5ty29YztOGpYaTia','y2XHC3noyw1L','rMfPBgvKihrVihjLC2nPBMqGCMvWB3j0lIbqBgvHC2uGDhj5igfNywLUlG','BwvZC2fNzq','Bg9ZzxiTDxnLCM5HBwu','cIaGicaGicaGpgrPDIbJBgfZCZ0IBwf0y2GTAxrLBsiGzgf0ys1Pzd0I','mZz4vu9mrxe','tM8Gy29TBwvUDa','C29Tzq','Bg9ZzxiTy29TBwvUDa','uMvQzwn0ie1HDgnO','Dg9eyxrL','CgfKzgLUzW','mZi3ndbhEw9qte8'];a48a=function(){return aA;};return a48a();}function setupReportForm(a){const V=a48J;if(!a['reportForm'])return;a['reportForm'][V(0x21e)](V(0x2c7),async b=>{const W=V;b['preventDefault']();try{await submitReport(a),a['reportForm']['reset'](),alert(W(0x265));}catch(c){console['error']('Error\x20submitting\x20report:',c),a[W(0x23d)][W(0x1f9)]=W(0x209);}});}async function submitReport(a){const X=a48J,b=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':X(0x20d),c=collection(db,b),d=doc(c);try{const e=auth['currentUser'];if(!e)throw new Error(X(0x23f));const f=e['uid'],g=currentGameMode==='D1'?X(0x2bd):currentGameMode==='D2'?'playersD2':'playersD3',h=await getDoc(doc(db,g,f));if(!h['exists']())throw new Error('Your\x20player\x20profile\x20not\x20found');const i=document[X(0x240)](X(0x28c)),j=a[X(0x292)]['value'];if(!j)throw new Error(X(0x2a6));const k=query(collection(db,g),where(X(0x2ca),'==',j)),l=await getDocs(k);if(l[X(0x21b)])throw new Error(X(0x2a2));const m=l['docs'][0x0]['data'](),n=l[X(0x2a4)][0x0]['id'],o={'matchId':d['id'],'loserUsername':h[X(0x255)]()['username'],'loserId':f,'winnerUsername':m[X(0x2ca)],'winnerId':n,'loserScore':a[X(0x22a)]['value'],'loserSuicides':a['suicides']['value'],'mapPlayed':a['mapPlayed']['value'],'loserComment':a[X(0x1eb)][X(0x272)],'subgameType':i?i[X(0x272)]:'','gameMode':currentGameMode,'approved':![],'createdAt':serverTimestamp(),'winnerOldElo':m[X(0x27a)]||null,'losersOldElo':h[X(0x255)]()[X(0x27a)]||null};await setDoc(d,o),console[X(0x248)](X(0x22b)+b+X(0x224)+d['id']),a[X(0x23d)]['textContent']='Game\x20reported\x20successfully!',a[X(0x23d)][X(0x294)]['color']=X(0x2ac),updatePendingMatchNotification();}catch(p){console['error'](X(0x277),p),a['reportError']['textContent']=X(0x298)+p['message'],a['reportError']['style'][X(0x1f0)]=X(0x243);throw p;}}function a48b(a,b){const c=a48a();return a48b=function(d,e){d=d-0x1e9;let f=c[d];if(a48b['FQKRcR']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a48b['mKxQOs']=g,a=arguments,a48b['FQKRcR']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a48b['mKxQOs'](f),a[i]=f):f=j,f;},a48b(a,b);}async function checkForOutstandingReports(a,b,c=null){const Y=a48J;console['log']('Checking\x20reports\x20for\x20user:\x20'+a+Y(0x200)+(c||Y(0x262)));const d=c||(currentGameMode==='D1'?Y(0x27f):currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3');console['log']('Using\x20collection:\x20'+d);try{const e=auth['currentUser'];if(!e){console[Y(0x248)]('No\x20authenticated\x20user\x20found');return;}const f=e['uid'],g=collection(db,d),h=query(g,where('winnerId','==',f),where('approved','==',![]));let i=await getDocs(h);console[Y(0x248)]('Query\x20by\x20winnerId\x20results:\x20'+i[Y(0x211)]+Y(0x25b));if(i['empty']&&e[Y(0x297)]){console['log']('No\x20matches\x20found\x20by\x20winnerId,\x20trying\x20winnerEmail');const j=query(g,where(Y(0x23e),'==',e['email']),where('approved','==',![]));i=await getDocs(j),console[Y(0x248)]('Query\x20by\x20winnerEmail\x20results:\x20'+i[Y(0x211)]+'\x20matches\x20found');}if(i[Y(0x21b)]){console['log'](Y(0x2b5));const k=currentGameMode==='D1'?'players':'playersD2',l=await getDoc(doc(db,k,f));if(l[Y(0x290)]()&&l[Y(0x255)]()[Y(0x2ca)]){const m=l[Y(0x255)]()[Y(0x2ca)],n=query(g,where('winnerUsername','==',m),where('approved','==',![]));i=await getDocs(n),console[Y(0x248)](Y(0x225)+i['size']+Y(0x25b));}}if(!i['empty']){const o=i[Y(0x2a4)][0x0]['data']();return console['log']('Found\x20pending\x20match:',o),o['id']=i['docs'][0x0]['id'],autoFillReportForm(o),updateNotificationDot(!![]),!![];}else return console['log'](Y(0x2c1)),updateNotificationDot(![]),![];}catch(p){console['error'](Y(0x29a),p);}}function autoFillReportForm(a){const Z=a48J;console[Z(0x248)](Z(0x257),a);if(a){const b=parseInt(a[Z(0x22a)]||'0'),c=b<0x12?0x14:b+0x2,d=a['gameMode']||currentGameMode,e=d==='D1'?'players':d==='D2'?'playersD2':Z(0x1fd);console['log']('Using\x20players\x20collection:\x20'+e+'\x20for\x20game\x20mode:\x20'+d);let f;a[Z(0x21d)]?f=getDoc(doc(db,e,a['winnerId']))['then'](h=>h['exists']()?{'id':h['id'],'data':h['data']()}:null):f=getDocs(query(collection(db,e),where(Z(0x2ca),'==',a['winnerUsername'])))['then'](h=>!h['empty']?{'id':h[Z(0x2a4)][0x0]['id'],'data':h['docs'][0x0][Z(0x255)]()}:null);let g;a[Z(0x25a)]?g=getDoc(doc(db,e,a[Z(0x25a)]))['then'](h=>h[Z(0x290)]()?{'id':h['id'],'data':h['data']()}:null):g=getDocs(query(collection(db,e),where('username','==',a['loserUsername'])))[Z(0x1ed)](h=>!h[Z(0x21b)]?{'id':h['docs'][0x0]['id'],'data':h['docs'][0x0][Z(0x255)]()}:null),Promise['all']([f,g])[Z(0x1ed)](([h,i])=>{const a0=Z;if(!h){console['error'](a0(0x25c)),alert(a0(0x2b8));return;}if(!i){console['error'](a0(0x2b6)),alert(a0(0x264));return;}const j=a[a0(0x282)]!=null?a[a0(0x282)]:h['data'][a0(0x27a)],k=a[a0(0x25f)]!=null?a[a0(0x25f)]:i[a0(0x255)][a0(0x27a)],l=h['data'][a0(0x2ca)],m=i['data']['username'];console[a0(0x248)](a0(0x201)+l+'\x20(ELO:\x20'+j+'),\x20Loser:\x20'+m+'\x20(ELO:\x20'+k+')');const n=document['getElementById']('report-lightbox');if(!n){console[a0(0x202)]('Lightbox\x20element\x20not\x20found');return;}document['getElementById']('lightbox-winner')['textContent']=l,document[a0(0x240)]('lightbox-loser')['textContent']=m,document[a0(0x240)]('lightbox-loser-score')['textContent']=a[a0(0x22a)]||'0',document[a0(0x240)]('lightbox-suicides')['textContent']=a[a0(0x296)]||'0',document['getElementById'](a0(0x2c5))[a0(0x1f9)]=a[a0(0x219)]||'Not\x20specified',document[a0(0x240)]('lightbox-comment')[a0(0x1f9)]=a[a0(0x1eb)]||'No\x20comment',document[a0(0x240)](a0(0x207))['textContent']=a[a0(0x21f)]||a0(0x226);const o=document[a0(0x240)](a0(0x26b));o&&(o['value']=c,o[a0(0x220)]=!![],o['style']['backgroundColor']=a0(0x2a5));showLightbox();const p=document['querySelector'](a0(0x27b));if(p){console[a0(0x248)](a0(0x2b3),p);const t=document[a0(0x240)](a0(0x20c));t&&t['remove']();const u=document['createElement']('button');u['id']=a0(0x20c),u[a0(0x22f)]='button\x20danger-button',u['textContent']=a0(0x238),u[a0(0x294)][a0(0x1e9)]=a0(0x278),u['style'][a0(0x1f0)]='white',u['style'][a0(0x227)]='10px',u[a0(0x294)][a0(0x23a)]='8px\x2016px',u['style']['border']=a0(0x1f5),u['style'][a0(0x274)]=a0(0x2b9),u[a0(0x294)][a0(0x208)]='pointer',u['style'][a0(0x218)]='bold',p['prepend'](u),console['log']('Reject\x20button\x20added:',u);}const q=document['getElementById'](a0(0x295)),r=document[a0(0x240)]('reject-button'),s=document['getElementById']('cancel-button');if(q){const v=q['cloneNode'](!![]);q[a0(0x2af)][a0(0x273)](v,q),v[a0(0x21e)](a0(0x249),async function(){const a1=a0;try{const w=document[a1(0x240)](a1(0x26b))[a1(0x272)],x=document['getElementById']('winner-suicides')['value']||'0',y=document['getElementById'](a1(0x242))['value']||'';console['log']('Current\x20user\x20info:',{'uid':auth[a1(0x253)]?.[a1(0x214)],'email':auth[a1(0x253)]?.[a1(0x297)],'isAdmin':auth[a1(0x253)]?.['email']==='admin@ladder.com'||auth[a1(0x253)]?.['email']===a1(0x217)});const z=a[a1(0x275)]||currentGameMode;if(z==='D3')await approveReportD3(a['id'],w,x,y);else z==='D2'?await approveReportD2(a['id'],w,x,y):await approveReport(a['id'],w,x,y);document['getElementById'](a1(0x204))[a1(0x294)]['display']='none',alert('Match\x20approved\x20successfully'),updatePendingMatchNotification(),location['reload']();const A=z==='D1'?a1(0x2bd):'playersD2',B=doc(db,A,h['id']),C=doc(db,A,i['id']),[D,E]=await Promise['all']([getDoc(B),getDoc(C)]);if(D['exists']()&&E['exists']()){const F=D[a1(0x255)](),G=E['data']();F[a1(0x24a)]>G[a1(0x24a)]?(await updateDoc(B,{'position':G[a1(0x24a)]}),console[a1(0x248)]('Winner\x20'+F['username']+'\x20moved\x20to\x20position\x20'+G['position'])):console[a1(0x248)]('No\x20position\x20change\x20needed;\x20winner\x20is\x20already\x20above\x20the\x20loser.');}}catch(H){console[a1(0x202)](a1(0x2ba),H),alert('Error\x20approving\x20match:\x20'+H[a1(0x231)]);}});}if(r){const w=r[a0(0x268)](!![]);r[a0(0x2af)][a0(0x273)](w,r),w['addEventListener'](a0(0x249),async function(){const a2=a0;try{const x=prompt(a2(0x2c3),'');if(x===null)return;await rejectReport(a['id'],x),hideLightbox(),alert(a2(0x258)),updatePendingMatchNotification(),location[a2(0x267)]();}catch(y){console[a2(0x202)]('Error\x20rejecting\x20report:',y),alert(a2(0x216)+y[a2(0x231)]);}});}if(s){const x=s[a0(0x268)](!![]);s['parentNode']['replaceChild'](x,s),x[a0(0x21e)]('click',hideLightbox);}})[Z(0x1fe)](h=>{const a3=Z;console['error']('Error\x20processing\x20player\x20data:',h),alert(a3(0x28a));});}}function showLightbox(){const a4=a48J;console['log'](a4(0x24e));const a=document[a4(0x240)]('report-lightbox');if(!a){console[a4(0x202)](a4(0x283));return;}a['classList']['add'](a4(0x212));}function hideLightbox(){const a5=a48J,a=document['getElementById'](a5(0x204));a[a5(0x29d)][a5(0x1ff)]('show');}async function rejectReport(a,b){const a6=a48J;try{const c=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?a6(0x241):a6(0x20d),d=currentGameMode==='D1'?'RejectedD1':currentGameMode==='D2'?'RejectedD2':'RejectedD3';console['log'](a6(0x280)+a+'\x20from\x20'+c+a6(0x29f)+d);const e=auth[a6(0x253)];if(!e)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20reject\x20a\x20match');const f=doc(db,c,a),g=await getDoc(f);if(!g['exists']())throw new Error('Match\x20report\x20not\x20found');const h=g['data'](),i=h['winnerId']&&h['winnerId']===e[a6(0x214)]||h['winnerEmail']&&h[a6(0x23e)]===e['email']||h[a6(0x292)]&&h[a6(0x292)]===await getUsernameFromId(e[a6(0x214)]);if(!i)throw new Error('Only\x20the\x20winner\x20of\x20the\x20match\x20can\x20reject\x20it');const j={...h,'rejectedAt':serverTimestamp(),'rejectedBy':e[a6(0x214)],'rejectionReason':b||'No\x20reason\x20provided','originalDocumentId':a},k=doc(collection(db,d));return await setDoc(k,j),await deleteDoc(f),console['log']('Match\x20'+a+'\x20rejected\x20successfully'),updatePendingMatchNotification(),!![];}catch(l){console['error'](a6(0x286),l);throw l;}}async function getUsernameFromId(a){const a7=a48J,b=await getDoc(doc(db,a7(0x2bd),a));if(b[a7(0x290)]())return b['data']()['username'];const c=await getDoc(doc(db,'playersD2',a));if(c[a7(0x290)]())return c[a7(0x255)]()['username'];return null;}async function loadOpponentsList(a){const a8=a48J;try{const b=document['getElementById']('report-error'),c=document[a8(0x240)]('loser-username'),d=document['getElementById'](a8(0x29e));if(!b||!c||!d){console['error']('Required\x20elements\x20not\x20found\x20for\x20loadOpponentsList');return;}const e=currentGameMode==='D1'?a8(0x2bd):currentGameMode==='D2'?'playersD2':'playersD3';console[a8(0x248)](a8(0x291)+e);const f=await getDoc(doc(db,e,a));if(!f['exists']()){b[a8(0x1f9)]=a8(0x299)+currentGameMode+'\x20ladder.',b[a8(0x294)]['color']=a8(0x243),c['textContent']=a8(0x254),d['disabled']=!![];return;}const g=f['data'](),h=g['username'];c[a8(0x1f9)]='You\x20('+h+')',b['textContent']='',d[a8(0x1f7)]=![];const i=collection(db,e),j=await getDocs(i);if(j['empty']){console[a8(0x248)]('No\x20opponents\x20available');return;}d['innerHTML']=a8(0x279),j[a8(0x271)](k=>{const a9=a8,l=k['data']();if(k['id']!==a){const m=document[a9(0x244)](a9(0x1f4));m[a9(0x272)]=l['username'],m['textContent']=l['username'],m[a9(0x2b2)][a9(0x214)]=k['id'],d[a9(0x2a9)](m);}});}catch(k){console['error']('Error\x20loading\x20opponents\x20list:',k),document['getElementById'](a8(0x2c8))['textContent']='Error\x20loading\x20opponents.\x20Please\x20try\x20again\x20later.',document[a8(0x240)](a8(0x2c8))['style'][a8(0x1f0)]=a8(0x243);}}async function checkUserInLadderAndLoadOpponents(a){const aa=a48J;try{const b=document[aa(0x240)](aa(0x2c8)),c=document[aa(0x240)]('loser-username'),d=document[aa(0x240)]('winner-username'),e=document['getElementById'](aa(0x247)),f=document[aa(0x240)]('auth-warning');b['textContent']='Checking\x20if\x20you\x20are\x20registered\x20in\x20'+currentGameMode+aa(0x2be),b[aa(0x294)]['color']='white';const g=currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':aa(0x1fd);console[aa(0x248)](aa(0x2b0)+g);const h=await getDoc(doc(db,g,a));if(!h[aa(0x290)]())return b[aa(0x1f9)]='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+aa(0x2c9),b[aa(0x294)][aa(0x1f0)]='red',c[aa(0x1f9)]='Not\x20registered\x20in\x20this\x20ladder',d[aa(0x1f7)]=!![],d[aa(0x215)]=aa(0x279),f[aa(0x294)][aa(0x203)]='block',f[aa(0x1f9)]='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+'\x20ladder.',![];b['textContent']='',f['style']['display']='none';const i=h[aa(0x255)](),j=i['username'];c['textContent']='You\x20('+j+')',d[aa(0x1f7)]=![],e['style']['display']=aa(0x20f),await loadOpponentsList(a);const k=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?aa(0x241):aa(0x20d);return await checkForOutstandingReports(i['email'],null,k),!![];}catch(l){return console['error']('Error\x20checking\x20if\x20user\x20is\x20in\x20ladder:',l),document[aa(0x240)](aa(0x2c8))['textContent']=aa(0x2c6),document[aa(0x240)](aa(0x2c8))[aa(0x294)]['color']='red',![];}}export async function fetchOutstandingMatches(){const ab=a48J,a=auth[ab(0x253)];if(!a)return[];try{const b=[],c=currentGameMode==='D1'?ab(0x27f):currentGameMode==='D2'?'pendingMatchesD2':ab(0x20d),d=collection(db,c),e=[query(d,where(ab(0x25a),'==',a['uid']),where(ab(0x28d),'==',![])),query(d,where('loserEmail','==',a[ab(0x297)]),where(ab(0x28d),'==',![])),query(d,where('winnerId','==',a['uid']),where(ab(0x28d),'==',![])),query(d,where('winnerEmail','==',a[ab(0x297)]),where(ab(0x28d),'==',![]))],f=currentGameMode==='D1'?'players':currentGameMode==='D2'?ab(0x2ae):ab(0x1fd),g=await getDocs(query(collection(db,f),where('email','==',a['email'])));let h=null;!g[ab(0x21b)]&&(h=g['docs'][0x0]['data']()['username'],h&&e['push'](query(d,where(ab(0x27e),'==',h),where(ab(0x28d),'==',![])),query(d,where('winnerUsername','==',h),where(ab(0x28d),'==',![]))));for(const i of e){const j=await getDocs(i);!j[ab(0x21b)]&&j['forEach'](k=>{const ac=ab;!b[ac(0x236)](l=>l['id']===k['id'])&&b['push']({'id':k['id'],...k[ac(0x255)]()});});}return b['sort']((k,l)=>{const ad=ab,m=k['createdAt']?.['toDate']()||new Date(0x0),n=l[ad(0x2bc)]?.[ad(0x239)]()||new Date(0x0);return n-m;}),outstandingMatches=b,b;}catch(k){return console[ab(0x202)](ab(0x250),k),[];}}export function renderOutstandingMatches(){const ae=a48J,a=document['getElementById']('outstanding-matches-list');if(outstandingMatches[ae(0x293)]===0x0){a[ae(0x215)]=ae(0x25d);return;}let b='';const c=auth[ae(0x253)];if(!c)return;outstandingMatches['forEach'](d=>{const af=ae,e=d[af(0x2bc)]?.['toDate']()?d['createdAt']['toDate']()[af(0x26f)]():af(0x24c),f=d[af(0x2b4)]===c['email']||d[af(0x25a)]===c[af(0x214)];b+=af(0x233)+d['id']+af(0x1f1)+(d[af(0x292)]||af(0x2a3))+'\x20vs\x20'+(d[af(0x27e)]||'Loser')+af(0x28e)+(d[af(0x219)]||af(0x26c))+af(0x210)+e+af(0x22e)+(d[af(0x22a)]||'0')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20view-detail-btn\x22\x20data-id=\x22'+d['id']+'\x22>View\x20Details</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(f?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20edit-report-btn\x22\x20data-id=\x22'+d['id']+'\x22>Edit\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20danger-button\x20rescind-report-btn\x22\x20data-id=\x22'+d['id']+af(0x1fa):'')+af(0x287);}),a['innerHTML']=b,document[ae(0x1f3)](ae(0x2b7))['forEach'](d=>{d['addEventListener']('click',function(){const ag=a48b,e=this[ag(0x251)](ag(0x2c4)),f=outstandingMatches['find'](g=>g['id']===e);document[ag(0x240)]('outstanding-modal')[ag(0x29d)]['remove']('show'),showMatchLightbox(f);});}),document[ae(0x1f3)]('.edit-report-btn')['forEach'](d=>{const ah=ae;d['addEventListener'](ah(0x249),function(){const ai=ah,e=this['getAttribute']('data-id'),f=outstandingMatches['find'](g=>g['id']===e);document[ai(0x240)]('outstanding-modal')['classList'][ai(0x1ff)]('show'),editReport(f);});}),document['querySelectorAll'](ae(0x2b1))[ae(0x271)](d=>{const aj=ae;d[aj(0x21e)]('click',function(){const ak=aj,e=this['getAttribute'](ak(0x2c4)),f=outstandingMatches['find'](g=>g['id']===e);confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20rescind\x20this\x20match\x20report\x20against\x20'+(f['winnerUsername']||'opponent')+'?')&&rescindReport(f);});});}export async function rescindReport(a){const al=a48J;try{const b=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?al(0x241):al(0x20d),c=doc(db,b,a['id']);await deleteDoc(c),alert('Report\x20has\x20been\x20successfully\x20rescinded.'),await fetchOutstandingMatches(),renderOutstandingMatches();}catch(d){console[al(0x202)](al(0x20b),d),alert(al(0x230));}}export function editReport(a){const am=a48J,b=document[am(0x240)]('report-form'),c=document[am(0x240)](am(0x221)),d=document['getElementById'](am(0x21c)),e=document['getElementById'](am(0x1ee)),f=document[am(0x240)]('loser-comment');b[am(0x294)][am(0x203)]='block',document[am(0x240)]('auth-warning')['style']['display']=am(0x1f5);if(a[am(0x22a)])c['value']=a['loserScore'];if(a[am(0x296)])d[am(0x272)]=a[am(0x296)];if(a[am(0x219)])e['value']=a[am(0x219)];if(a[am(0x1eb)])f['value']=a['loserComment'];const g=document[am(0x240)](am(0x29e));g&&a['winnerUsername']&&Array[am(0x2a0)](g[am(0x260)])[am(0x271)](j=>{const an=am;j['text']===a[an(0x292)]&&(j[an(0x29c)]=!![]);});const h=document['getElementById'](am(0x28c));h&&a[am(0x21f)]&&(h[am(0x272)]=a[am(0x21f)]);b[am(0x223)](am(0x2ad),a['id']);const i=b['querySelector'](am(0x2bf));i[am(0x1f9)]='Update\x20Report';if(!document['getElementById']('cancel-edit-btn')){const j=document['createElement']('button');j['id']='cancel-edit-btn',j[am(0x22f)]=am(0x1f6),j[am(0x294)]['backgroundColor']=am(0x2c2),j[am(0x294)]['marginRight']='10px',j[am(0x1f9)]=am(0x288),j['type']='button',i['parentNode'][am(0x206)](j,i),j['addEventListener'](am(0x249),function(k){const ao=am;k[ao(0x1f2)](),b['reset'](),b['removeAttribute']('data-edit-id'),i[ao(0x1f9)]='Report\x20Game',this[ao(0x1ff)](),initReportForm();});}b[am(0x261)]({'behavior':'smooth'});}function initReportForm(){const ap=a48J;console[ap(0x248)]('Report\x20form\x20reset');}export function showMatchLightbox(a){const aq=a48J,b=document['getElementById']('report-lightbox');document[aq(0x240)]('lightbox-game-mode')[aq(0x1f9)]=currentGameMode,document['getElementById']('lightbox-winner')[aq(0x1f9)]=a['winnerUsername']||aq(0x26c),document['getElementById'](aq(0x284))[aq(0x1f9)]=a[aq(0x27e)]||'Unknown',document['getElementById'](aq(0x25e))['textContent']=a[aq(0x22a)]||'0',document[aq(0x240)](aq(0x23c))[aq(0x1f9)]=a[aq(0x296)]||'0',document[aq(0x240)](aq(0x2c5))['textContent']=a['mapPlayed']||aq(0x26c),document[aq(0x240)]('lightbox-comment')[aq(0x1f9)]=a['loserComment']||aq(0x235),document[aq(0x240)]('lightbox-subgame')[aq(0x1f9)]=a['subgameType']||aq(0x226),b[aq(0x29d)]['add']('show');}export function setCurrentGameMode(a){currentGameMode=a;}export function initOutstandingMatches(){const ar=a48J;document['addEventListener'](ar(0x2a8),()=>{const as=ar,a=document['getElementById']('view-outstanding-btn'),b=document['getElementById']('view-outstanding-container'),c=document[as(0x240)]('outstanding-modal'),d=document[as(0x240)]('close-outstanding-btn'),e=document['getElementById'](as(0x2c0)),f=document['getElementById']('d1-mode'),g=document['getElementById'](as(0x27d)),h=document[as(0x240)]('d3-mode');if(f)f['addEventListener'](as(0x249),()=>{setCurrentGameMode('D1');});if(g)g['addEventListener']('click',()=>{setCurrentGameMode('D2');});if(h)h['addEventListener'](as(0x249),()=>{setCurrentGameMode('D3');});auth[as(0x213)](k=>{const at=as;k?b['style'][at(0x203)]=at(0x20f):b['style']['display']='none';});a&&a[as(0x21e)](as(0x249),async()=>{const au=as;c['classList'][au(0x2a1)](au(0x212)),document['getElementById']('outstanding-matches-list')[au(0x215)]='<div\x20class=\x22loading\x22>Loading\x20your\x20matches...</div>',await fetchOutstandingMatches(),renderOutstandingMatches();});d&&d[as(0x21e)]('click',()=>{const av=as;c[av(0x29d)]['remove'](av(0x212));});e&&e['addEventListener']('click',()=>{const aw=as;document[aw(0x240)]('report-lightbox')['classList']['remove']('show');});c&&c[as(0x21e)](as(0x249),k=>{const ax=as;k[ax(0x2bb)]===c&&c[ax(0x29d)]['remove'](ax(0x212));});const i=document['getElementById']('report-lightbox');i&&i['addEventListener']('click',k=>{const ay=as;k[ay(0x2bb)]===i&&i[ay(0x29d)][ay(0x1ff)]('show');});const j=document['getElementById']('report-form');if(j){const k=j[as(0x246)];j['onsubmit']=async function(l){const az=as;l['preventDefault']();const m=this[az(0x251)]('data-edit-id');if(m)try{const n=document[az(0x240)](az(0x221))['value'],o=document['getElementById'](az(0x21c))[az(0x272)],p=document['getElementById']('map-played')['value'],q=document['getElementById'](az(0x237))['value'],r=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?az(0x241):az(0x20d),s=doc(db,r,m);await updateDoc(s,{'loserScore':Number(n),'loserSuicides':Number(o),'mapPlayed':p,'loserComment':q,'subgameType':document[az(0x240)](az(0x28c))[az(0x272)],'updatedAt':new Date()}),alert(az(0x245)),this[az(0x21a)](),this['removeAttribute']('data-edit-id');const t=this[az(0x20a)]('button[type=\x22submit\x22]');t['textContent']=az(0x263);const u=document['getElementById']('cancel-edit-btn');if(u)u[az(0x1ff)]();}catch(v){console['error']('Error\x20updating\x20report:',v),document[az(0x240)]('report-error')[az(0x1f9)]='Failed\x20to\x20update\x20report.\x20Please\x20try\x20again.';}else typeof k==='function'&&k['call'](this,l);};}});}typeof window!==a48J(0x1fb)&&(window['showMatchLightbox']=showMatchLightbox,window[a48J(0x24f)]=editReport,window[a48J(0x2aa)]=rescindReport,window[a48J(0x24b)]=fetchOutstandingMatches,window[a48J(0x1ea)]=renderOutstandingMatches);initOutstandingMatches();