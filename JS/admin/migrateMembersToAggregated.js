function a1_0x4ce1(_0x3d4de7,_0x51a563){const _0x2dd3fa=a1_0x1a88();return a1_0x4ce1=function(_0x3e8372,_0x311b71){_0x3e8372=_0x3e8372-0xf5;let _0x3d4eb3=_0x2dd3fa[_0x3e8372];return _0x3d4eb3;},a1_0x4ce1(_0x3d4de7,_0x51a563);}(function(_0x11c1a3,_0x478dfa){const _0x5d2b2c=a1_0x4ce1,_0x3518c9=_0x11c1a3();while(!![]){try{const _0x27c0fd=parseInt(_0x5d2b2c(0x133))/0x1*(-parseInt(_0x5d2b2c(0x12f))/0x2)+parseInt(_0x5d2b2c(0x11c))/0x3*(-parseInt(_0x5d2b2c(0x11e))/0x4)+parseInt(_0x5d2b2c(0x12b))/0x5+parseInt(_0x5d2b2c(0x118))/0x6*(parseInt(_0x5d2b2c(0x108))/0x7)+parseInt(_0x5d2b2c(0x13c))/0x8*(-parseInt(_0x5d2b2c(0x124))/0x9)+parseInt(_0x5d2b2c(0x113))/0xa+parseInt(_0x5d2b2c(0x132))/0xb*(parseInt(_0x5d2b2c(0x116))/0xc);if(_0x27c0fd===_0x478dfa)break;else _0x3518c9['push'](_0x3518c9['shift']());}catch(_0x2b1029){_0x3518c9['push'](_0x3518c9['shift']());}}}(a1_0x1a88,0xbade3));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';function a1_0x1a88(){const _0xbf79b5=['unranked','üíæ\x20Writing\x20aggregated\x20data...','\x20members\x20processed)','userProfiles','return\x20(function()\x20','‚ùå\x20Migration\x20failed:','1510943JDKEWG','console','active','warn','country','favoriteWeapon','search','forEach','üîí\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.','permission-denied','data','854050jnGPlN','Unknown','\x20unique\x20members','27108tMaYUQ','log','6zdLAsy','\x20non-participants','isNonParticipant','\x20batches...','609fEqjuM','üí°\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!','15540FokTxu','ladder','toISOString','\x20profiles,\x20','\x20D2,\x20','length','8838lEqbJm','üöÄ\x20Executing\x20','players','toString','üéâ\x20Successfully\x20migrated\x20','ladders','motto','6614040WedHqR','\x20members\x20to\x20aggregated\x20collection!','prototype','(((.+)+)+)+$','4VGpZxe','üì•\x20Fetching\x20all\x20collections...','name','8338RkzwCv','276427CTKlWB','constructor','elo','push','code','error','has','silver','\x20D1,\x20','10016RAVRJB','username','get','playersD3','nonParticipants','favoriteMap','__proto__','trace','{}.constructor(\x22return\x20this\x22)(\x20)','set','aggregatedMembers','exception','üîÑ\x20Starting\x20migration\x20to\x20aggregated\x20members...','bind','size','commit','bronze','all'];a1_0x1a88=function(){return _0xbf79b5;};return a1_0x1a88();}import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const _0x456c6e=a1_0x4ce1,_0x3d9be0=(function(){let _0x273f2d=!![];return function(_0x1b1f7b,_0x37b684){const _0x1194fe=_0x273f2d?function(){if(_0x37b684){const _0x22a97f=_0x37b684['apply'](_0x1b1f7b,arguments);return _0x37b684=null,_0x22a97f;}}:function(){};return _0x273f2d=![],_0x1194fe;};}()),_0x1b3e78=_0x3d9be0(this,function(){const _0x4e4f10=a1_0x4ce1;return _0x1b3e78[_0x4e4f10(0x127)]()['search'](_0x4e4f10(0x12e))[_0x4e4f10(0x127)]()[_0x4e4f10(0x134)](_0x1b3e78)[_0x4e4f10(0x10e)]('(((.+)+)+)+$');});_0x1b3e78();const _0x35f8d1=(function(){let _0x40503f=!![];return function(_0x21aca9,_0x42baee){const _0x567b55=_0x40503f?function(){if(_0x42baee){const _0x1d1540=_0x42baee['apply'](_0x21aca9,arguments);return _0x42baee=null,_0x1d1540;}}:function(){};return _0x40503f=![],_0x567b55;};}()),_0x34681c=_0x35f8d1(this,function(){const _0x42a6a7=a1_0x4ce1,_0x292bd0=function(){const _0x704328=a1_0x4ce1;let _0x263df4;try{_0x263df4=Function(_0x704328(0x106)+_0x704328(0xf8)+');')();}catch(_0x422524){_0x263df4=window;}return _0x263df4;},_0x178494=_0x292bd0(),_0x79bf95=_0x178494[_0x42a6a7(0x109)]=_0x178494[_0x42a6a7(0x109)]||{},_0x36e32f=[_0x42a6a7(0x117),_0x42a6a7(0x10b),'info',_0x42a6a7(0x138),_0x42a6a7(0xfb),'table',_0x42a6a7(0xf7)];for(let _0x366cef=0x0;_0x366cef<_0x36e32f[_0x42a6a7(0x123)];_0x366cef++){const _0x53af0a=_0x35f8d1['constructor'][_0x42a6a7(0x12d)][_0x42a6a7(0xfd)](_0x35f8d1),_0x20a4e5=_0x36e32f[_0x366cef],_0x3f8030=_0x79bf95[_0x20a4e5]||_0x53af0a;_0x53af0a[_0x42a6a7(0xf6)]=_0x35f8d1[_0x42a6a7(0xfd)](_0x35f8d1),_0x53af0a[_0x42a6a7(0x127)]=_0x3f8030[_0x42a6a7(0x127)]['bind'](_0x3f8030),_0x79bf95[_0x20a4e5]=_0x53af0a;}});_0x34681c(),console['log'](_0x456c6e(0xfc));try{console[_0x456c6e(0x117)](_0x456c6e(0x130));const [_0x25b4e1,_0x4738e8,_0x3af9f5,_0x57750e,_0x464eef]=await Promise['all']([getDocs(collection(db,_0x456c6e(0x105))),getDocs(collection(db,_0x456c6e(0x126))),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x456c6e(0x13f))),getDocs(collection(db,_0x456c6e(0x140)))]);console[_0x456c6e(0x117)]('‚úÖ\x20Data\x20fetched:\x20'+_0x25b4e1['size']+_0x456c6e(0x121)+_0x4738e8[_0x456c6e(0xfe)]+_0x456c6e(0x13b)+_0x3af9f5[_0x456c6e(0xfe)]+_0x456c6e(0x122)+_0x57750e[_0x456c6e(0xfe)]+'\x20D3,\x20'+_0x464eef[_0x456c6e(0xfe)]+_0x456c6e(0x119));const _0x26f331=new Map();_0x25b4e1[_0x456c6e(0x10f)](_0x4fde8b=>{const _0x38c680=_0x456c6e;_0x26f331[_0x38c680(0xf9)](_0x4fde8b['id'],_0x4fde8b['data']());});const _0x23370b=new Map(),_0x5ece71=(_0x1c2e62,_0x27be71)=>{const _0x2abcd2=_0x456c6e;_0x1c2e62[_0x2abcd2(0x10f)](_0xdf814a=>{const _0x1334ee=_0x2abcd2,_0x12ddc6=_0xdf814a['data'](),_0x40a74c=_0xdf814a['id'];!_0x23370b[_0x1334ee(0x139)](_0x40a74c)&&_0x23370b[_0x1334ee(0xf9)](_0x40a74c,{'userId':_0x40a74c,'username':_0x12ddc6[_0x1334ee(0x13d)]||_0x12ddc6[_0x1334ee(0x131)]||_0x1334ee(0x114),'ladders':[],'isNonParticipant':![]});const _0x2d81be=_0x23370b[_0x1334ee(0x13e)](_0x40a74c);_0x2d81be['ladders'][_0x1334ee(0x136)]({'ladder':_0x27be71,'elo':_0x12ddc6['eloRating']||_0x12ddc6[_0x1334ee(0x135)]||0x4b0,'active':_0x12ddc6[_0x1334ee(0x10a)]!==![]});});};_0x5ece71(_0x4738e8,'D1'),_0x5ece71(_0x3af9f5,'D2'),_0x5ece71(_0x57750e,'D3'),_0x464eef['forEach'](_0x4b6fac=>{const _0x5440da=_0x456c6e,_0x3fd199=_0x4b6fac[_0x5440da(0x112)](),_0x251ebf=_0x4b6fac['id'];!_0x23370b['has'](_0x251ebf)&&(_0x3fd199['username']||_0x3fd199['name'])&&_0x23370b[_0x5440da(0xf9)](_0x251ebf,{'userId':_0x251ebf,'username':_0x3fd199[_0x5440da(0x13d)]||_0x3fd199[_0x5440da(0x131)],'ladders':[],'isNonParticipant':!![]});}),console[_0x456c6e(0x117)]('‚öôÔ∏è\x20Processed\x20'+_0x23370b['size']+_0x456c6e(0x115)),console[_0x456c6e(0x117)](_0x456c6e(0x103));const _0x31ed94=[];let _0x360e49=writeBatch(db),_0x310a24=0x0,_0x232ced=0x0;_0x23370b[_0x456c6e(0x10f)]((_0x4ff793,_0x2854ec)=>{const _0x226c1c=_0x456c6e,_0x370c9f=_0x26f331[_0x226c1c(0x13e)](_0x2854ec)||{};let _0x36bbeb=0x0,_0x33c332=null;if(_0x4ff793['ladders'][_0x226c1c(0x123)]>0x0){const _0x3d1c7a=_0x4ff793[_0x226c1c(0x129)]['sort']((_0x3f4033,_0x1a7080)=>_0x1a7080[_0x226c1c(0x135)]-_0x3f4033[_0x226c1c(0x135)]);_0x36bbeb=_0x3d1c7a[0x0]['elo'],_0x33c332=_0x3d1c7a[0x0][_0x226c1c(0x11f)];}const _0x1f1221={'userId':_0x2854ec,'username':_0x4ff793[_0x226c1c(0x13d)],'profileImageUrl':_0x370c9f['profileImageUrl']||null,'country':_0x370c9f[_0x226c1c(0x10c)]||null,'motto':_0x370c9f[_0x226c1c(0x12a)]||null,'favoriteMap':_0x370c9f[_0x226c1c(0xf5)]||null,'favoriteWeapon':_0x370c9f[_0x226c1c(0x10d)]||null,'isNonParticipant':_0x4ff793[_0x226c1c(0x11a)],'ladders':_0x4ff793[_0x226c1c(0x129)],'primaryLadder':_0x33c332,'highestElo':_0x36bbeb,'rank':getPlayerRank(_0x36bbeb),'lastUpdated':new Date(),'migrationTimestamp':new Date()[_0x226c1c(0x120)]()},_0x3f1698=doc(collection(db,_0x226c1c(0xfa)),_0x2854ec);_0x360e49[_0x226c1c(0xf9)](_0x3f1698,_0x1f1221),_0x310a24++,_0x232ced++,_0x310a24>=0x1c2&&(_0x31ed94[_0x226c1c(0x136)](_0x360e49[_0x226c1c(0xff)]()),_0x360e49=writeBatch(db),_0x310a24=0x0,console[_0x226c1c(0x117)]('üì¶\x20Prepared\x20batch\x20'+_0x31ed94[_0x226c1c(0x123)]+'\x20('+_0x232ced+_0x226c1c(0x104)));}),_0x310a24>0x0&&_0x31ed94['push'](_0x360e49[_0x456c6e(0xff)]()),console[_0x456c6e(0x117)](_0x456c6e(0x125)+_0x31ed94['length']+_0x456c6e(0x11b)),await Promise[_0x456c6e(0x101)](_0x31ed94),console['log'](_0x456c6e(0x128)+_0x23370b[_0x456c6e(0xfe)]+_0x456c6e(0x12c)),console[_0x456c6e(0x117)](_0x456c6e(0x11d));}catch(_0x342907){console[_0x456c6e(0x138)](_0x456c6e(0x107),_0x342907),_0x342907[_0x456c6e(0x137)]===_0x456c6e(0x111)&&console[_0x456c6e(0x138)](_0x456c6e(0x110));}}function getPlayerRank(_0x4da385){const _0x41f235=a1_0x4ce1;if(_0x4da385>=0x7d0)return'emerald';if(_0x4da385>=0x708)return'gold';if(_0x4da385>=0x640)return _0x41f235(0x13a);if(_0x4da385>=0x578)return _0x41f235(0x100);return _0x41f235(0x102);}migrateToAggregatedMembers();