const a42_0x61fed=a42_0x450b,a42_0x84ef5=(function(){let _0x54fffe=!![];return function(_0x58cc8c,_0xfce3f0){const _0x1ee812=_0x54fffe?function(){const _0x3d33b0=a42_0x450b;if(_0xfce3f0){const _0x53a317=_0xfce3f0[_0x3d33b0(0xf7)](_0x58cc8c,arguments);return _0xfce3f0=null,_0x53a317;}}:function(){};return _0x54fffe=![],_0x1ee812;};}()),a42_0x4e46ec=a42_0x84ef5(this,function(){const _0x322ed7=a42_0x450b,_0x3472ec=function(){let _0x2d0c47;try{_0x2d0c47=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xdea615){_0x2d0c47=window;}return _0x2d0c47;},_0x193d44=_0x3472ec(),_0x19fbad=_0x193d44['console']=_0x193d44[_0x322ed7(0xee)]||{},_0x351931=[_0x322ed7(0xf2),'warn','info','error','exception','table','trace'];for(let _0x4c4fd7=0x0;_0x4c4fd7<_0x351931[_0x322ed7(0xfc)];_0x4c4fd7++){const _0x13f4d2=a42_0x84ef5['constructor']['prototype'][_0x322ed7(0xf6)](a42_0x84ef5),_0xcc6ead=_0x351931[_0x4c4fd7],_0x27cdd4=_0x19fbad[_0xcc6ead]||_0x13f4d2;_0x13f4d2['__proto__']=a42_0x84ef5['bind'](a42_0x84ef5),_0x13f4d2['toString']=_0x27cdd4['toString']['bind'](_0x27cdd4),_0x19fbad[_0xcc6ead]=_0x13f4d2;}});a42_0x4e46ec();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';function a42_0x450b(_0x31e9e5,_0x4f57e7){const _0x4e46ec=a42_0x5262();return a42_0x450b=function(_0x84ef5,_0x485c1d){_0x84ef5=_0x84ef5-0xed;let _0x52622d=_0x4e46ec[_0x84ef5];return _0x52622d;},a42_0x450b(_0x31e9e5,_0x4f57e7);}import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x189e90=a42_0x450b;this['form']=document[_0x189e90(0xfb)]('profile-form'),this['pfpInput']=document['getElementById']('pfp-upload'),this['pfpPreview']=document[_0x189e90(0xfb)](_0x189e90(0xfa)),this[_0x189e90(0x107)]=document['getElementById']('player-stats'),this['setupEventListeners'](),this['loadProfile']();}['setupEventListeners'](){const _0x174b19=a42_0x450b;this[_0x174b19(0x101)]['addEventListener']('change',_0x5e4e20=>this['handleImageUpload'](_0x5e4e20)),this['form']['addEventListener']('submit',_0x4ff104=>this['handleSubmit'](_0x4ff104));}async[a42_0x61fed(0xf8)](_0x441acb){const _0x556755=_0x441acb['target']['files'][0x0];if(_0x556755){const _0x32f3fd=new FileReader();_0x32f3fd['onload']=_0x340f80=>{const _0x30cb3d=a42_0x450b;this['pfpPreview']['src']=_0x340f80['target'][_0x30cb3d(0x109)];},_0x32f3fd['readAsDataURL'](_0x556755);}}async[a42_0x61fed(0x104)](_0x2904a1){const _0x236722=a42_0x61fed;_0x2904a1['preventDefault']();const _0x2dc6c7=auth['currentUser'];if(!_0x2dc6c7){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x30fcab=new FormData(this['form']),_0x14a998={'nickname':_0x30fcab['get']('nickname'),'motto':_0x30fcab['get']('motto'),'favoriteMap':_0x30fcab[_0x236722(0xfd)]('favorite-map'),'favoriteWeapon':_0x30fcab[_0x236722(0xfd)]('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0x20ec94=this[_0x236722(0x101)]['files'][0x0];if(_0x20ec94){const _0x40bd78=ref(storage,_0x236722(0x102)+_0x2dc6c7[_0x236722(0x106)]);await uploadBytes(_0x40bd78,_0x20ec94),_0x14a998['pfpUrl']=await getDownloadURL(_0x40bd78);}await setDoc(doc(db,'profiles',_0x2dc6c7['uid']),_0x14a998),alert('Profile\x20saved\x20successfully!');}catch(_0xc55caf){console['error']('Error\x20saving\x20profile:',_0xc55caf),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x15ef4d=>{const _0x184262=a42_0x450b;if(_0x15ef4d)try{const _0x49927b=await getDoc(doc(db,'profiles',_0x15ef4d['uid']));if(_0x49927b[_0x184262(0xfe)]()){const _0x3c9c6c=_0x49927b[_0x184262(0xf5)]();document[_0x184262(0xfb)]('nickname')['value']=_0x3c9c6c['nickname']||'',document[_0x184262(0xfb)]('motto')['value']=_0x3c9c6c['motto']||'',document['getElementById']('favorite-map')['value']=_0x3c9c6c['favoriteMap']||'',document['getElementById']('favorite-weapon')['value']=_0x3c9c6c['favoriteWeapon']||'',_0x3c9c6c['pfpUrl']&&(this['pfpPreview'][_0x184262(0xf0)]=_0x3c9c6c['pfpUrl']),await this[_0x184262(0xed)](_0x3c9c6c['nickname']);}}catch(_0x422cb0){console[_0x184262(0xf9)]('Error\x20loading\x20profile:',_0x422cb0);}});}async[a42_0x61fed(0xed)](_0x533af9){const _0x1737f2=a42_0x61fed;if(!_0x533af9)return;try{const _0x3c837f=collection(db,_0x1737f2(0xff)),[_0x281725,_0x44e812]=await Promise['all']([getDocs(query(_0x3c837f,where('winnerUsername','==',_0x533af9))),getDocs(query(_0x3c837f,where('loserUsername','==',_0x533af9)))]),_0xf1276b=_0x281725['size'],_0x34fc55=_0x44e812['size'],_0x401a8a=_0xf1276b+_0x34fc55;let _0x4de718=0x0,_0x1d8e8b=0x0;_0x281725[_0x1737f2(0x105)](_0x99bf88=>{const _0x34d3cd=_0x1737f2,_0x181ce5=_0x99bf88['data']();if(_0x181ce5['winnerScore'])_0x4de718+=parseInt(_0x181ce5['winnerScore']);if(_0x181ce5[_0x34d3cd(0xf3)])_0x1d8e8b+=parseInt(_0x181ce5[_0x34d3cd(0xf3)]);}),_0x44e812[_0x1737f2(0x105)](_0x16c663=>{const _0x5023c8=_0x1737f2,_0x3a883b=_0x16c663[_0x5023c8(0xf5)]();if(_0x3a883b[_0x5023c8(0xf3)])_0x4de718+=parseInt(_0x3a883b[_0x5023c8(0xf3)]);if(_0x3a883b['winnerScore'])_0x1d8e8b+=parseInt(_0x3a883b['winnerScore']);});const _0x386cd7=_0x1d8e8b===0x0?_0x4de718[_0x1737f2(0x108)](0x2):(_0x4de718/_0x1d8e8b)['toFixed'](0x2),_0x4c9b2b=_0x401a8a===0x0?'0':(_0xf1276b/_0x401a8a*0x64)[_0x1737f2(0x108)](0x1);console['log'](_0x1737f2(0x100),{'totalMatches':_0x401a8a,'wins':_0xf1276b,'losses':_0x34fc55,'totalKills':_0x4de718,'totalDeaths':_0x1d8e8b,'kdRatio':_0x386cd7,'winRate':_0x4c9b2b}),document['getElementById']('stats-matches')['textContent']=_0x401a8a,document[_0x1737f2(0xfb)](_0x1737f2(0xf4))['textContent']=_0xf1276b,document['getElementById']('stats-losses')[_0x1737f2(0xf1)]=_0x34fc55,document['getElementById']('stats-kd')[_0x1737f2(0xf1)]=_0x386cd7,document['getElementById'](_0x1737f2(0x103))['textContent']=_0x4c9b2b+'%';}catch(_0x44a8a2){console[_0x1737f2(0xf9)]('Error\x20loading\x20player\x20stats:',_0x44a8a2),['matches',_0x1737f2(0xef),'losses','kd','winrate']['forEach'](_0x5cf067=>{const _0x2856e=_0x1737f2;document[_0x2856e(0xfb)]('stats-'+_0x5cf067)['textContent']='-';});}}}document['addEventListener']('DOMContentLoaded',()=>{new ProfileManager();});function a42_0x5262(){const _0x152efb=['loadPlayerStats','console','wins','src','textContent','log','loserScore','stats-wins','data','bind','apply','handleImageUpload','error','profile-preview','getElementById','length','get','exists','approvedMatches','Stats\x20calculated:','pfpInput','profile-pictures/','stats-winrate','handleSubmit','forEach','uid','statsContainer','toFixed','result'];a42_0x5262=function(){return _0x152efb;};return a42_0x5262();}