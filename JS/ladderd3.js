function a33_0x5662(_0x2afee0,_0x4ff5a1){const _0x45e65d=a33_0x178f();return a33_0x5662=function(_0x2e097a,_0x5057e1){_0x2e097a=_0x2e097a-0xa7;let _0x178f45=_0x45e65d[_0x2e097a];return _0x178f45;},a33_0x5662(_0x2afee0,_0x4ff5a1);}const a33_0x2e097a=(function(){let _0x3dae9e=!![];return function(_0x3d1ad1,_0x2f39e9){const _0x499c48=_0x3dae9e?function(){if(_0x2f39e9){const _0x286710=_0x2f39e9['apply'](_0x3d1ad1,arguments);return _0x2f39e9=null,_0x286710;}}:function(){};return _0x3dae9e=![],_0x499c48;};}()),a33_0x45e65d=a33_0x2e097a(this,function(){const _0x1e9046=a33_0x5662,_0x28e987=function(){const _0x1fb667=a33_0x5662;let _0x4372a2;try{_0x4372a2=Function(_0x1fb667(0xd0)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x18fb3a){_0x4372a2=window;}return _0x4372a2;},_0x3f4cd0=_0x28e987(),_0x1480fa=_0x3f4cd0['console']=_0x3f4cd0['console']||{},_0x30b7bb=[_0x1e9046(0xc0),_0x1e9046(0xe0),'info','error','exception','table','trace'];for(let _0x132631=0x0;_0x132631<_0x30b7bb['length'];_0x132631++){const _0x5bca95=a33_0x2e097a['constructor']['prototype']['bind'](a33_0x2e097a),_0x316917=_0x30b7bb[_0x132631],_0x45da14=_0x1480fa[_0x316917]||_0x5bca95;_0x5bca95[_0x1e9046(0xd2)]=a33_0x2e097a['bind'](a33_0x2e097a),_0x5bca95['toString']=_0x45da14[_0x1e9046(0xac)]['bind'](_0x45da14),_0x1480fa[_0x316917]=_0x5bca95;}});a33_0x45e65d();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';function a33_0x178f(){const _0x4e6620=['.trend-indicator','#ladder-d3\x20tbody','color','playerId','D3:\x20Player\x20ID\x20mappings:','toString','#F44336','losses','td:nth-child(3)','push','totalDeaths','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','toLowerCase','get','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20','\x20players','winnerUsername','newElo','querySelector','forEach','filter','querySelectorAll','Error\x20loading\x20D3\x20ladder:','toDate','log','find','pilot','D3:\x20Fallback\x20query\x20failed:','loserScore','#C0C0C0','eloHistory','country','username','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x20entries\x20in\x20eloHistoryD3','winRate','message','timestamp','player','style','return\x20(function()\x20','wins','__proto__','totalMatches','length','position','D3:\x20Final\x20ELO\x20changes:','D3:\x20Found\x20entries\x20for\x20','error','has','playersD3','includes','join','size','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','warn','playerUsername','set','0.85em','display','D3:\x20','toFixed','bold','D3:\x20Found\x20','data'];a33_0x178f=function(){return _0x4e6620;};return a33_0x178f();}import a33_0x5b0f0d from'./firebase-idle-wrapper.js';const styleEl=document['createElement']('style');styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x15077c=![]){const _0x3b54c5=a33_0x5662,_0x3c2cdd=document['querySelector'](_0x3b54c5(0xa8));if(!_0x3c2cdd){console[_0x3b54c5(0xd8)]('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x3c2cdd['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x5bffed=Date['now']();if(!_0x15077c&&playerCacheD3['data']&&_0x5bffed-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x54e518=collection(db,'playersD3'),_0x3df605=await getDocs(_0x54e518),_0x2f3833=[];_0x3df605['forEach'](_0x409c65=>{const _0x2afe97=_0x409c65['data']();_0x2afe97['username']&&_0x2f3833['push']({..._0x2afe97,'id':_0x409c65['id'],'elo':_0x2afe97['eloRating']||0x0,'position':_0x2afe97['position']||Number['MAX_SAFE_INTEGER']});});const _0x1d2775=collection(db,'userProfiles'),_0x2d1d48=await getDocs(_0x1d2775),_0x6997e3=new Map();_0x2d1d48['forEach'](_0x5e675d=>{const _0x5c0c72=_0x3b54c5,_0x545ded=_0x5e675d['data']();_0x545ded[_0x5c0c72(0xc8)]&&_0x6997e3['set'](_0x545ded[_0x5c0c72(0xc8)]['toLowerCase'](),_0x545ded);});for(const _0x40e3bc of _0x2f3833){const _0x49d8a4=_0x40e3bc['username'][_0x3b54c5(0xb3)]();if(_0x6997e3['has'](_0x49d8a4)){const _0x9b9530=_0x6997e3['get'](_0x49d8a4);_0x9b9530['country']&&(_0x40e3bc['country']=_0x9b9530['country'][_0x3b54c5(0xb3)]());}}const _0x5bf0dd=_0x2f3833['map'](_0x18da52=>_0x18da52[_0x3b54c5(0xc8)]),_0x394a87=await fetchBatchMatchStatsD3(_0x5bf0dd);_0x2f3833['sort']((_0x26b6ba,_0x5194ae)=>{const _0x3de3fa=_0x3b54c5,_0x3efa0f=_0x394a87['get'](_0x26b6ba['username'])?.['totalMatches']||0x0,_0x5e6acf=_0x394a87['get'](_0x5194ae[_0x3de3fa(0xc8)])?.[_0x3de3fa(0xd3)]||0x0;if(_0x3efa0f===0x0!==(_0x5e6acf===0x0))return _0x3efa0f===0x0?0x1:-0x1;return(_0x26b6ba['position']||0x3e7)-(_0x5194ae['position']||0x3e7);}),_0x2f3833['forEach']((_0xa4879c,_0x55b548)=>{_0xa4879c['position']=_0x55b548+0x1;}),playerCacheD3[_0x3b54c5(0xe9)]=_0x2f3833,playerCacheD3[_0x3b54c5(0xcd)]=_0x5bffed,updateLadderDisplayD3(_0x2f3833);}catch(_0x5218b6){console[_0x3b54c5(0xd8)](_0x3b54c5(0xbe),_0x5218b6),_0x3c2cdd['innerHTML']=_0x3b54c5(0xb6)+_0x5218b6[_0x3b54c5(0xcc)]+_0x3b54c5(0xde);}}function calculateStreakDays(_0x555f14){const _0x292580=a33_0x5662;if(!_0x555f14)return 0x0;const _0x2ca581=_0x555f14[_0x292580(0xbf)](),_0x7364b2=new Date(),_0x4a7fc0=Math['abs'](_0x7364b2-_0x2ca581);return Math['ceil'](_0x4a7fc0/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x34e97a,_0x26a8f4){const _0x37a0fe=a33_0x5662;try{const _0x17e9f8=collection(db,_0x37a0fe(0xda)),_0x5c03e9=await getDocs(_0x17e9f8),_0x3e1444=[];_0x5c03e9['forEach'](_0xc78ff4=>{const _0x3cf83e=_0x37a0fe;_0x3e1444[_0x3cf83e(0xb0)]({'id':_0xc78ff4['id'],..._0xc78ff4[_0x3cf83e(0xe9)]()});});const _0x408f22=_0x3e1444[_0x37a0fe(0xc1)](_0x2f6426=>_0x2f6426[_0x37a0fe(0xc8)]===_0x34e97a),_0x28f65a=_0x3e1444[_0x37a0fe(0xc1)](_0x4a27b9=>_0x4a27b9[_0x37a0fe(0xc8)]===_0x26a8f4);if(!_0x408f22||!_0x28f65a){console[_0x37a0fe(0xd8)]('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x408f22['position']>_0x28f65a['position']){const _0x27c8c9=_0x28f65a[_0x37a0fe(0xd5)];for(const _0x1ae3df of _0x3e1444){_0x1ae3df['position']>=_0x28f65a[_0x37a0fe(0xd5)]&&_0x1ae3df[_0x37a0fe(0xd5)]<_0x408f22['position']&&_0x1ae3df['username']!==_0x34e97a&&await updateDoc(doc(db,'playersD3',_0x1ae3df['id']),{'position':_0x1ae3df['position']+0x1});}await updateDoc(doc(db,_0x37a0fe(0xda),_0x408f22['id']),{'position':_0x27c8c9});if(_0x27c8c9===0x1){const _0x3ddf89=doc(db,'playersD3',_0x408f22['id']),_0x4ab90c=await getDoc(_0x3ddf89);!_0x4ab90c['data']()['firstPlaceDate']&&await updateDoc(_0x3ddf89,{'firstPlaceDate':Timestamp['now']()});}if(_0x28f65a[_0x37a0fe(0xd5)]===0x1){const _0x546c02=doc(db,'playersD3',_0x28f65a['id']);await updateDoc(_0x546c02,{'firstPlaceDate':null});}}}catch(_0x430608){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x430608);}}async function updateLadderDisplayD3(_0x262511){const _0x547efc=a33_0x5662;_0x262511['sort']((_0x5e46ca,_0x2c4f7b)=>_0x5e46ca['position']-_0x2c4f7b['position']);const _0x435dcb=document[_0x547efc(0xba)](_0x547efc(0xa8));if(!_0x435dcb)return;_0x435dcb['innerHTML']='';const _0x2ac92d=_0x262511['map'](_0x16e04a=>_0x16e04a[_0x547efc(0xc8)]),_0x581c02=await fetchBatchMatchStatsD3(_0x2ac92d),_0x5f2b4d=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x5f2b4d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x38f982=_0x262511['map'](_0x4b7d19=>{const _0x4c3928=_0x547efc,_0x37a513=_0x581c02[_0x4c3928(0xb4)](_0x4b7d19['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x4b7d19,_0x37a513);})[_0x547efc(0xdc)]('');_0x435dcb['innerHTML']=_0x38f982,getPlayersLastEloChangesD3(_0x2ac92d)['then'](_0x15c3a3=>{const _0xfb2960=_0x547efc,_0x4ada22=new Map();_0x435dcb[_0xfb2960(0xbd)]('tr')['forEach']((_0x309e30,_0x15883e)=>{const _0x44a4c7=_0xfb2960;_0x15883e<_0x2ac92d[_0x44a4c7(0xd4)]&&_0x4ada22['set'](_0x2ac92d[_0x15883e],_0x309e30);}),_0x15c3a3['forEach']((_0x29a94d,_0x474b30)=>{const _0xbaf136=_0xfb2960,_0x1809c9=_0x4ada22[_0xbaf136(0xb4)](_0x474b30);if(_0x1809c9&&_0x29a94d!==0x0){const _0x5c49fa=_0x1809c9[_0xbaf136(0xba)](_0xbaf136(0xaf));if(_0x5c49fa){const _0x25d71b=_0x29a94d>0x0?'+'+_0x29a94d:''+_0x29a94d,_0x210881=_0x5c49fa[_0xbaf136(0xba)](_0xbaf136(0xa7));_0x210881&&(_0x210881['textContent']=_0x25d71b,_0x210881['style'][_0xbaf136(0xa9)]=_0x29a94d>0x0?'#4CAF50':_0xbaf136(0xad),_0x210881[_0xbaf136(0xcf)]['fontWeight']=_0xbaf136(0xe7),_0x210881[_0xbaf136(0xcf)]['fontSize']=_0xbaf136(0xe3),_0x210881['style'][_0xbaf136(0xe4)]='inline',_0x210881[_0xbaf136(0xcf)]['visibility']='visible',_0x210881['style']['opacity']='1');}}});})['catch'](_0x3e8097=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x3e8097));}async function fetchBatchMatchStatsD3(_0x24c8f0){const _0x278bbe=a33_0x5662,_0x4a7e93=new Map();try{const _0x2e8d17=collection(db,'approvedMatchesD3'),_0x45c1a6=await getDocs(_0x2e8d17);_0x45c1a6['forEach'](_0x19aa7c=>{const _0x5223fe=a33_0x5662,_0x23b76d=_0x19aa7c[_0x5223fe(0xe9)]();if(_0x24c8f0['includes'](_0x23b76d[_0x5223fe(0xb8)])){const _0x2d7ccb=_0x23b76d['winnerUsername'];!_0x4a7e93[_0x5223fe(0xd9)](_0x2d7ccb)&&_0x4a7e93[_0x5223fe(0xe2)](_0x2d7ccb,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x2e935b=_0x4a7e93[_0x5223fe(0xb4)](_0x2d7ccb);_0x2e935b[_0x5223fe(0xd1)]++,_0x2e935b['totalMatches']++,_0x2e935b['totalKills']+=parseInt(_0x23b76d['winnerScore'])||0x0,_0x2e935b['totalDeaths']+=parseInt(_0x23b76d[_0x5223fe(0xc4)])||0x0;}if(_0x24c8f0['includes'](_0x23b76d['loserUsername'])){const _0x30748b=_0x23b76d['loserUsername'];!_0x4a7e93[_0x5223fe(0xd9)](_0x30748b)&&_0x4a7e93['set'](_0x30748b,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x21ecb4=_0x4a7e93[_0x5223fe(0xb4)](_0x30748b);_0x21ecb4['losses']++,_0x21ecb4['totalMatches']++,_0x21ecb4['totalKills']+=parseInt(_0x23b76d['loserScore'])||0x0,_0x21ecb4['totalDeaths']+=parseInt(_0x23b76d['winnerScore'])||0x0;}}),_0x4a7e93[_0x278bbe(0xbb)](_0x3f9338=>{const _0x47bbae=_0x278bbe;_0x3f9338['kda']=_0x3f9338[_0x47bbae(0xb1)]>0x0?(_0x3f9338['totalKills']/_0x3f9338['totalDeaths'])[_0x47bbae(0xe6)](0x2):_0x3f9338['totalKills'],_0x3f9338['winRate']=_0x3f9338['totalMatches']>0x0?(_0x3f9338[_0x47bbae(0xd1)]/_0x3f9338['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x51f5f6){console[_0x278bbe(0xd8)]('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x51f5f6);}return _0x4a7e93;}function createPlayerRowD3(_0x3ad643,_0xb20032){const _0x4d7355=a33_0x5662,_0x1af5b4=parseFloat(_0x3ad643['elo'])||0x0;let _0x545377='gray';if(_0x1af5b4>=0x7d0)_0x545377='#50C878';else{if(_0x1af5b4>=0x708)_0x545377='#FFD700';else{if(_0x1af5b4>=0x640)_0x545377=_0x4d7355(0xc5);else _0x1af5b4>=0x578&&(_0x545377='#CD7F32');}}let _0x4d4ef0='';return _0x3ad643['country']&&(_0x4d4ef0='<img\x20src=\x22../images/flags/'+_0x3ad643[_0x4d7355(0xc7)][_0x4d7355(0xb3)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3ad643[_0x4d7355(0xc7)]+_0x4d7355(0xdf)),_0x4d7355(0xc9)+_0x3ad643['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x3ad643['username'])+_0x4d7355(0xb5)+_0x545377+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3ad643['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4d4ef0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x545377+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x1af5b4+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xb20032['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xb20032['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xb20032[_0x4d7355(0xae)]+_0x4d7355(0xb2)+_0xb20032['kda']+_0x4d7355(0xb2)+_0xb20032[_0x4d7355(0xcb)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0x63dda2){const _0x5d766c=a33_0x5662,_0x168426=new Map();_0x63dda2['forEach'](_0x31d818=>_0x168426[_0x5d766c(0xe2)](_0x31d818,0x0));try{console['log']('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x63dda2);const _0x2c62f2=new Map(),_0x33dd88=await getDocs(collection(db,'playersD3'));_0x33dd88['forEach'](_0x5305ea=>{const _0x5edd0f=_0x5305ea['data']();_0x5edd0f['username']&&_0x2c62f2['set'](_0x5305ea['id'],_0x5edd0f['username']);}),console[_0x5d766c(0xc0)](_0x5d766c(0xab),Array['from'](_0x2c62f2['entries']()));const _0x217442=collection(db,'eloHistoryD3'),_0x58549c=query(_0x217442,orderBy(_0x5d766c(0xcd),'desc'),limit(0x64)),_0x1f5a11=await getDocs(_0x58549c);_0x1f5a11['empty']?console[_0x5d766c(0xc0)]('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console['log']('D3:\x20Found\x20'+_0x1f5a11['size']+_0x5d766c(0xca));const _0x3bade8=new Map();_0x1f5a11['forEach'](_0x2c8d6b=>{const _0x141301=_0x5d766c,_0x3b2875=_0x2c8d6b['data']();let _0x2d392e=null;if(_0x3b2875['username'])_0x2d392e=_0x3b2875['username'];else{if(_0x3b2875['playerUsername'])_0x2d392e=_0x3b2875[_0x141301(0xe1)];else{if(_0x3b2875['player']&&typeof _0x3b2875['player']==='string')_0x2d392e=_0x3b2875['player'];else{if(_0x3b2875['player']&&_0x2c62f2['has'](_0x3b2875['player']))_0x2d392e=_0x2c62f2['get'](_0x3b2875[_0x141301(0xce)]);else _0x3b2875['playerId']&&_0x2c62f2['has'](_0x3b2875[_0x141301(0xaa)])&&(_0x2d392e=_0x2c62f2['get'](_0x3b2875['playerId']));}}}(_0x3b2875['username']==='pilot'||_0x3b2875['playerUsername']==='pilot'||_0x3b2875[_0x141301(0xce)]&&_0x2c62f2['get'](_0x3b2875['player'])===_0x141301(0xc2))&&console[_0x141301(0xc0)]('D3:\x20Found\x20pilot\x20entry:',_0x3b2875),_0x2d392e&&_0x63dda2[_0x141301(0xdb)](_0x2d392e)&&(!_0x3bade8['has'](_0x2d392e)&&_0x3bade8['set'](_0x2d392e,[]),_0x3bade8['get'](_0x2d392e)['push']({..._0x3b2875,'timestamp':_0x3b2875[_0x141301(0xcd)]?.['seconds']||0x0}));}),console['log'](_0x5d766c(0xd7)+_0x3bade8[_0x5d766c(0xdd)]+_0x5d766c(0xb7)),_0x3bade8['forEach']((_0x4de538,_0x297441)=>{const _0x8dcd6d=_0x5d766c;if(_0x4de538['length']>0x0){_0x4de538['sort']((_0x470ad6,_0xfc333d)=>_0xfc333d['timestamp']-_0x470ad6['timestamp']);const _0x1ae022=_0x4de538['find'](_0x4f2d4d=>_0x4f2d4d['change']!==undefined||_0x4f2d4d['newElo']!==undefined&&_0x4f2d4d['previousElo']!==undefined);if(_0x1ae022){let _0x36ed05;if(_0x1ae022['change']!==undefined)_0x36ed05=_0x1ae022['change'];else _0x1ae022[_0x8dcd6d(0xb9)]!==undefined&&_0x1ae022['previousElo']!==undefined&&(_0x36ed05=_0x1ae022[_0x8dcd6d(0xb9)]-_0x1ae022['previousElo']);_0x36ed05!==undefined&&(_0x168426['set'](_0x297441,_0x36ed05),console[_0x8dcd6d(0xc0)](_0x8dcd6d(0xe5)+_0x297441+'\x20ELO\x20change:\x20'+_0x36ed05));}}});if(_0x3bade8['size']===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x3794c8=collection(db,_0x5d766c(0xc6)),_0x2d4e34=query(_0x3794c8,where('gameMode','==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x24585b=await getDocs(_0x2d4e34);console['log'](_0x5d766c(0xe8)+_0x24585b[_0x5d766c(0xdd)]+'\x20fallback\x20entries'),_0x24585b['forEach'](_0x1c9966=>{const _0x4450a9=_0x5d766c,_0x22f79d=_0x1c9966['data']();let _0x12dca1=_0x22f79d['username']||_0x22f79d['playerUsername'];!_0x12dca1&&_0x22f79d[_0x4450a9(0xce)]&&_0x2c62f2['has'](_0x22f79d[_0x4450a9(0xce)])&&(_0x12dca1=_0x2c62f2[_0x4450a9(0xb4)](_0x22f79d['player']));if(_0x12dca1&&_0x63dda2['includes'](_0x12dca1)){const _0x3780ce=_0x22f79d['change']||(_0x22f79d['newElo']!==undefined&&_0x22f79d['previousElo']!==undefined?_0x22f79d['newElo']-_0x22f79d['previousElo']:0x0);_0x3780ce!==0x0&&(_0x168426[_0x4450a9(0xe2)](_0x12dca1,_0x3780ce),console[_0x4450a9(0xc0)]('D3:\x20'+_0x12dca1+'\x20fallback\x20ELO\x20change:\x20'+_0x3780ce));}});}catch(_0x392101){console['log'](_0x5d766c(0xc3),_0x392101);}}const _0x4a7974=Array['from'](_0x168426['entries']())[_0x5d766c(0xbc)](([_0x334fe5,_0x52980b])=>_0x52980b!==0x0);console['log'](_0x5d766c(0xd6),_0x4a7974);}catch(_0x50fb51){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x50fb51);}return _0x168426;}export{displayLadderD3,updatePlayerPositions};