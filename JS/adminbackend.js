const a4_0xfdad8c=a4_0x3da5;(function(_0x57a08f,_0x560a1e){const _0x6295df=a4_0x3da5,_0x4df3e0=_0x57a08f();while(!![]){try{const _0x512d04=-parseInt(_0x6295df(0xf3))/0x1+parseInt(_0x6295df(0x4e3))/0x2*(parseInt(_0x6295df(0x39a))/0x3)+parseInt(_0x6295df(0x4dd))/0x4+-parseInt(_0x6295df(0x34a))/0x5*(parseInt(_0x6295df(0x1b3))/0x6)+-parseInt(_0x6295df(0x3fb))/0x7+parseInt(_0x6295df(0x21c))/0x8*(-parseInt(_0x6295df(0x4e8))/0x9)+parseInt(_0x6295df(0x335))/0xa;if(_0x512d04===_0x560a1e)break;else _0x4df3e0['push'](_0x4df3e0['shift']());}catch(_0x3ee717){_0x4df3e0['push'](_0x4df3e0['shift']());}}}(a4_0x11d4,0xe4c20));const a4_0x4f95e3=(function(){let _0x567f37=!![];return function(_0x1184a2,_0x318503){const _0x1fd91d=_0x567f37?function(){const _0x3a4b9d=a4_0x3da5;if(_0x318503){const _0x13f022=_0x318503[_0x3a4b9d(0x170)](_0x1184a2,arguments);return _0x318503=null,_0x13f022;}}:function(){};return _0x567f37=![],_0x1fd91d;};}()),a4_0x78746a=a4_0x4f95e3(this,function(){const _0x357b3b=a4_0x3da5;return a4_0x78746a[_0x357b3b(0x4bb)]()[_0x357b3b(0x2a2)](_0x357b3b(0x378))[_0x357b3b(0x4bb)]()['constructor'](a4_0x78746a)[_0x357b3b(0x2a2)](_0x357b3b(0x378));});a4_0x78746a();function a4_0x11d4(){const _0x4ab144=['UserProfile','trophy-form','\x20Rank\x20Distribution','currentUser','article-modal','quick-points-reason','Updated\x20ELO\x20ratings:\x20Winner\x20','bind','Manage\x20Ribbons\x20section\x20initialized','ribbon-target-ladder','\x20allowed\x20tabs:','edit-highlight-description-input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20deleting\x20trophy\x20definition:','Invalid\x20action','manage-ranks','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','manage-levels-ribbons','playerRibbons','Demoting\x20player\x20to\x20','highlight-achievement-type','role-color','#highlight-modal\x20.close-btn','losses','docs','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','Failed\x20to\x20modify\x20points:\x20','position','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','destroy','playerProfileUrl','(((.+)+)+)+$','data-ladder','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','matchId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','article-id','delete-match-confirm-modal','Create\x20test\x20match\x20modal\x20not\x20found','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','values','Quick\x20edit\x20form\x20not\x20found!','stopPropagation','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','NonParticipant','fa-check-circle','Load\x20inactive\x20players\x20data\x20clicked','localeCompare','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','catch','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','cancel-promote-btn','Non-Participants','Error\x20loading\x20ELO\x20history:','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','loserSuicides','Auth:','backgroundColor','subtract','0.6','highlight-winner-name','Trophy\x20created\x20successfully','Won','16179NecnYg','.empty-state','assign-trophy-modal','Featured\x20Creator','name-desc','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','Error\x20updating\x20points:','Remove\x20','\x20→\x20','Test\x20match','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','seconds','Match\x20not\x20found\x20in\x20approved\x20matches',';\x22>','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','highlight-player-profile-container','getAttribute','ribbons','rgba(25,\x20118,\x20210,\x200.7)','demote-form','loss','create-new-article-btn','Attempting\x20to\x20promote\x20','__proto__','.close','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','#cancel-create-test-match-btn','forEach','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','set-elo-btn','highlight-match-date','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','required','Error\x20saving\x20trophy:','.delete-article-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','Match\x20resimulated\x20successfully!\x20','userId','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','data-match-id','\x20Level\x20','points-overview-table-body','replaceChild','highlight-title-container','sources','daysSinceMatch','\x20vs\x20','user-roles-section','textContent','Error\x20loading\x20dashboard\x20data:','match-count','rgba(255,\x20255,\x20255,\x200.1)','Points\x20modified\x20successfully','cancel-article-btn','test-match-winner-username','edit-username','Attaching\x20cancel\x20button\x20listener.','getComputedStyle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','img','searchTerm','find','Create\x20New\x20','points-reason','contains','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Trophy\x20ID\x20and\x20username\x20are\x20required','playerId','achievementType','common','eloHistoryD3','color','highlight-creator-image','startDate','highlight-achievement-details-container','filter','highlight-video-preview-container','No\x20matches\x20found','remove','highlights-table-body','toISOString','article-author','.remove-role-btn','highlight-description','playersD3','Displaying\x20','alt','highlight-type','creatorImageUrl','loserName','Load\x20ribbons\x20data\x20clicked','article-image-url','\x22\x20set','Loading\x20points\x20data...','reduce','Error\x20loading\x20dashboard:','8651538jFJFnT','pendingResimulateData','level','load-dashboard-data','set-elo-value','trophy-modal-title','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','Match\x20highlight\x20button\x20clicked','promote-player-btn','rankDistribution','Store\x20item\x20awarded\x20successfully','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','View\x20history\x20clicked\x20for\x20user:','\x20not\x20found.','non-participants','users-table-body','edit-match-map','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','create-match-highlight-btn','\x20for\x20user\x20\x22','❌\x20Missing','Edit\x20','Bronze','closest','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','highlight-creator-image-container','./promotions.js','Unranked','Successfully\x20promoted\x20','Error\x20loading\x20points\x20history:','asc','Failed\x20to\x20load\x20points\x20data:\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','pendingMatchesD2','Setting\x20up\x20Manage\x20Points\x20section','.quick-edit-btn','Points\x20data\x20loaded\x20successfully','No\x20user\x20ID\x20found\x20on\x20button','apply-matches-filters','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','highlight-map','Sunday','matches-prev-page','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','button[type=\x22submit\x22]','Error\x20creating\x20activity\x20chart:','Error\x20setting\x20user\x20role:','highlight-loser-name','previousElementSibling','click','Title\x20and\x20content\x20are\x20required','eloHistoryD2','player-search','Modal\x20computed\x20styles:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','assign-trophy-image','pendingMatchesD3',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Setting\x20permissions\x20based\x20on\x20role:\x20','.remove-ribbon-btn','d1-prev-page','Create\x20test\x20match\x20modal\x20setup\x20complete','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','edit-highlight-playerProfileUrl-input','date','highlight-submitted-by','No\x20match\x20data\x20found\x20for\x20resimulation','history-end-date','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','highlight-map-version','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','title','load-highlights-data','\x20(based\x20on\x20data-role:\x20','Error\x20loading\x20highlights:','info','Error\x20initializing\x20points:\x20','player','Create\x20New\x20Trophy','highlight-match-info','create-test-match-form','bar',',\x20Loser\x20','promote-modal','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','edit-highlight-achievementDetails-input','Simple\x20test\x20match\x20created\x20successfully','articles','Loading...','Error\x20loading\x20highlight:\x20','\x20points','highlight-player-profile','#users-table-body\x20tr','visibility','Subtracted\x20','src','Modal\x20opened\x20successfully','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','classList','points-user-search','TestWinner','fa-exclamation-circle','approvedAt','Player\x20Achievement','approvedMatches','highlight-match-link-container','change','dataset','article-form','Submit\x20button\x20clicked\x20directly','highlight-submitted-by-container','\x20ladder','.nav-item','No\x20position\x20changes\x20needed.','user-ribbon-management','\x20points\x20history\x20entries','dashboard','trace','Never','data','\x20from\x20','highlight-loser-score','Error\x20initializing\x20dashboard:','edit-match-title','Error\x20resolving\x20username\x20for\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','\x20-\x20Feature\x20coming\x20soon','mapCreator','.delete-match-btn','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','winnerSuicides','Role\x20\x22','highlight-achievement-type-container','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','no-results','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','Match','add','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','-next-page','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','matchDate','trophy-modal','.edit-highlight-btn','Error\x20loading\x20match\x20data:','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','1200','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','\x20not\x20found\x20in\x20any\x20ladder','load-articles-data','Could\x20not\x20find\x20player\x20documents','d3-next-page','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','\x22\x20not\x20found\x20in\x20any\x20collection','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','add-new-role-btn','join','highlight-achievement-player',',\x20giving\x20default\x20access','Match\x20Result','pointsHistory','Defaulted\x20to\x20D1\x20ladder','YouTube\x20Video\x20ID*','resimulateMatch','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Create\x20Article','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','ribbon-type-select','\x20before\x20match:\x20','previousElo','role','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','Error\x20loading\x20trophy\x20definitions:','.close-btn','#808080','RejectedD1','activity','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','\x20total\x20players\x20in\x20the\x20','negative-change','quick-points-amount','demoLink','high-points','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','Non-Participant','then','Failed\x20to\x20save\x20trophy:\x20','set-elo-username','toString','Article\x20updated\x20successfully','#28a745','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','resimulate-modal','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','ribbon-item','string','\x20by\x20UID:','manage-articles','Emerald','assign-player-username','desc','DB:','size','log','loserUsername','rarity','matches-end-date','#elo-history-table-body\x20tr','edit-player-modal','article-content','ribbon-target-user','\x20<span\x20class=\x22user-source\x22>(','\x20inactive\x20players','Setting\x20up\x20Manage\x20Highlights\x20section','inactive-players','Username\x20input\x20set\x20to:\x20','Updating\x20role\x20for\x20','Cancel\x20button\x20not\x20found','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','rgba(255,\x20193,\x207,\x200.1)','newElo','\x20users...','6822076uGXBRm','<div\x20class=\x22loading\x22>Searching...</div>','quick-edit-current-points','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','\x20users','Title\x20is\x20required','460cvsjye','substring','Error\x20updating\x20player:','edit-highlight-id','quick-edit-display-name','288eMTBMA','sort','assign-trophy-name','Thursday','border','Error\x20deleting\x20match:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','.edit-ribbons-btn','.delete-btn','userAllowedTabs',').\x20','cancel-role-btn','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','highlight-map-creator-container','#inactive-players-table-body\x20tr','inactive-days-filter','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','includes','lastPointsModified','highlight-achievement-details','Failed\x20to\x20find\x20match:\x20','submit','Starting\x20complete\x20match\x20resimulation...','edit-match-loser','map','Demotion','win','assign-trophy-form','\x22\x20already\x20has\x20this\x20trophy','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','\x20matches\x20for\x20','trim','Player\x20\x22','approvedMatchesD2','YouTube\x20Video\x20ID\x20(Optional)','Highlight\x20added\x20successfully!','edit-highlight-videoId-input','className','roleName','ribbon','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','load-inactive-players-data','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','submittedBy','commit','username','Error\x20setting\x20custom\x20ELO:','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','Creator','input','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM','awardedAt','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','assign-trophy-description','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','No\x20ELO\x20history\x20found\x20for\x20player\x20','Highlight','highlight-video-preview','All\x20fields\x20are\x20required','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','players-table-body','nonexistent','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','\x20ELO\x20history\x20entries.\x20','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','currentTarget','author','Error\x20loading\x20highlight:','block','Trophy\x20updated\x20successfully','RejectedD3','Error\x20loading\x20user\x20points\x20history:','quick-edit-points-modal','trophy-description','push','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','Create\x20test\x20match\x20form\x20submitted','Error\x20loading\x20points\x20overview:','Error\x20loading\x20matches:','Error\x20in\x20demotion:','\x20users.\x20','displayName','Untitled\x20Trophy','trophy-id','Page\x201','User\x20','cancel-quick-edit','toLocaleString','Trophy\x20Preview','Error\x20resimulating\x20match:','matchInfo','demotion','quick-edit-points-form','Role\x20\x27','user-search-results','getDate','Please\x20fill\x20all\x20fields','Unknown\x20User','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','Error\x20promoting\x20player:\x20','Setting\x20up\x20Manage\x20Matches\x20section','manage-matches','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','createdAt','RejectedD2','value','Article\x20created\x20successfully','System','Quick\x20edit\x20clicked\x20for\x20user:','Please\x20enter\x20valid\x20username\x20and\x20ELO','Page\x20','Successfully\x20demoted\x20','validation-results-container','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20ribbons\x20data','Player\x20Name\x20is\x20required','edit-match-winner-score','players-ladder-selector','promotedBy','visible','d2-prev-page','Match\x20ID\x20or\x20ladder\x20missing','achievement','Role\x20removed','selected-user-points','1807928AcAXGX','Failed\x20to\x20load\x20user\x20data:\x20','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','Modal\x20should\x20now\x20be\x20visible','Creator\x20highlight\x20button\x20clicked','roleColor','userProfiles','Error\x20deleting\x20highlight:','highlight-match-link','.form-group','Points\x20field\x20initialized\x20for\x20','Error\x20in\x20promotion:','toDate','Error\x20searching\x20for\x20user','name','cancel-highlight-btn','cancel-set-elo-btn','removeAttribute','./ladderalgorithm.js','winnerDemoLink','highlight-map-creator','playerRibbonsD2','.view-player-btn','type','ref','load-trophies-data','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>',';\x20color:\x20','approvedMatchesD3','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','action','Error\x20saving\x20match:','lastVisible','Failed\x20to\x20update\x20points:\x20','Creating\x20test\x20match\x20without\x20player\x20validation...','No\x20email','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','Deleting\x20match...','highlight-video-container','.admin-section','testFirebaseConnection','Modal\x20cancel\x20button\x20clicked','confirmResimulateMatch','edit-highlight-loserName-input','insertAdjacentElement','Looking\x20for\x20user\x20role\x20information\x20for\x20','-page-indicator','demotedBy','Query\x20executed.\x20Empty:','selected-user-info','trophy-preview-img','Error\x20loading\x20inactive\x20players:','Loser\x20','setAttribute','\x22\x20data-ladder=\x22','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','set-elo-ladder','demote-ladder','opponent','Setting\x20up\x20matches\x20action\x20buttons...','load-matches-data','User\x20not\x20found','#create-test-match-form','edit-match-id','No\x20description','reset-history-filters','parentNode','appendChild','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','target','selected-user-id','cancel-trophy-btn','trophyDefinitions','closeResimulateModal','Found\x20ELO\x20history\x20for\x20player\x20','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','edit-match-winner-demo','input[name=\x22test-match-ladder\x22]','.delete-highlight-btn','add-player-form','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','.no-results','.section-header','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Created\x20','amount','console','Simple\x20test\x20match\x20created\x20by\x20admin\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','set-elo-form','Load\x20history\x20data\x20clicked','create-test-match-btn','Error\x20loading\x20points\x20data:','Edit\x20Trophy','removeEventListener','\x20already\x20has\x20points:\x20','achievementImageUrl','Article\x20deleted\x20successfully','createElement','rank-distribution-chart','getElementById','winnerName','\x20(from\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','quick-add','input[name=\x22demote-ladder\x22]:checked','hidden','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','Error\x20awarding\x20item:','edit-highlight-matchInfo-input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','updatedAt','creator','promote-username','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','matches-start-date','trophies-table-body','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','Achievement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','Loading\x20user\x20data...','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','apply','Load\x20matches\x20data\x20clicked','set-role-modal','Deleting\x20match\x20','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Failed\x20to\x20send\x20Discord\x20notification:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','\x20history\x20entries\x20for\x20user\x20','\x20in\x20','mapPlayed','add-ribbon-form','medium-points','Collection\x20reference\x20created:','newPoints','no-results-message','edit-elo','setDate','No\x20reason\x20provided','Friday','Please\x20select\x20a\x20user\x20and\x20store\x20item','name-asc','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','non-participant','\x20quick\x20edit\x20buttons','Current\x20user:','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-highlight-creatorImageUrl-input','preventDefault','#players-table-body\x20tr','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','playerRibbonsD3','Match\x20Highlight','role-username','firstVisible','Error\x20saving\x20highlight:\x20','edit-highlight-loserScore-input','MAX_SAFE_INTEGER','low-points','edit-highlight-title-input','eloHistory','input[name=\x22set-elo-ladder\x22]:checked','elo-history','Player\x20deleted\x20successfully','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','d2-next-page','Inactive\x20players\x20section\x20initialized','highlight-winner-score','Tuesday','D2\x20Players','#article-modal\x20.close-btn','lastUpdated','Admin\x20Adjustment','prototype','search-ribbon-user-btn','Found\x20specific\x20role:\x20','setHours','Attempting\x20to\x20demote\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','#e0e0e0','Sidebar\x20navigation\x20initialized\x20with\x20permissions','matches-next-page','test','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Unknown\x20Player','endDate','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','Silver','10211826uPnkfO','delete-match-summary','Firebase\x20connection\x20test\x20failed:','disabled','Error\x20setting\x20up\x20admin\x20dashboard','Unknown','Matches\x20Played','✅\x20Exists','Switched\x20to\x20','elo','warn','doughnut','mapName','create-achievement-highlight-btn','input[name=\x22assign-ladder\x22]:checked','highlight-achievement-image','modify-points-form','lastMatch','Attaching\x20background\x20click\x20listener.','edit-highlight-achievementPlayer-input','promotion','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','result','highlight-title','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','Error\x20fetching\x20matches\x20for\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','current-ribbons-list','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','reason','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Player\x20not\x20found','trophy-image-url','Error\x20removing\x20ribbon','You\x20must\x20be\x20logged\x20in','points-action','max','#000000','.ladder-switch\x20input[value=\x22D2\x22]','uid','Positions\x20updated:\x20Winner\x20','Achievement\x20highlight\x20button\x20clicked','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','winnerUsername','store-item-select','edit-highlight-matchLink-input','match','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','activity-chart','20px','Error\x20searching\x20user:','pending-count','promote-ladder','cells','.view-history-btn','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','update','settings','-prev-page','resimulate-match-id','.loading-cell','mapVersion','Modal\x20closed','winnerScore','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','edit-highlight-winnerName-input','Load\x20trophies\x20data\x20clicked','Matches\x20action\x20buttons\x20setup\x20complete','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','achievementPlayer','points-overview-search','Error\x20deleting\x20player:','#ffffff','\x20users\x20to\x20check...','paste','Load\x20articles\x20data\x20clicked','padding','.ladder-switch\x20input[value=\x22D1\x22]','edit-match-loser-comment','current-ladder-display','Searching\x20for\x20player\x20in\x20','Error\x20adding\x20ribbon','),\x20','email','Error\x20demoting\x20player:\x20','set','#users-table-body\x20tr[data-username=\x22','Loading\x20players\x20from\x20','Table\x20row\x20for\x20user\x20','players','Removed\x20','cancel-assign-btn','active','trophy-rarity\x20','data-section','Error','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','roleAssignedBy','Trophy\x20not\x20found','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','.ladder-switch\x20input','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','User\x20has\x20','unknown','Error\x20adding\x20ribbon:','263272hWcuVI','edit-match-winner-suicides','history-type-filter','User\x20\x22','Match\x20not\x20found','exception','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','playersD2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','highlight-map-container','manage-highlights','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','Trophy\x20definition\x20deleted\x20successfully','style','highlight-modal','demote-modal','highlight-modal-title','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','Error\x20loading\x20articles:','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','Failed\x20to\x20load\x20user\x20history','Error\x20promoting\x20player:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','Username\x20','addEventListener','manage-players','reset-matches-filters','description','quick-edit-email','assign-trophy-id','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','Found\x20player\x20with\x20current\x20ELO:\x20','resimulate-match-btn','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','toLocaleDateString','edit-highlight-map-input','error','player-count','Player\x20updated\x20successfully','getRankName','edit-match-loser-demo','Failed\x20to\x20delete\x20article:\x20','Please\x20enter\x20a\x20username','search-result-item','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','loserScore','allUsersPoints','Error\x20opening\x20edit\x20modal:','new-player-elo','admin_modification','\x20section','input[name=\x22promote-ladder\x22]:checked','warning','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','data-id','#matches-table-body\x20tr','role-name','reset','admin','Adding\x20simple\x20test\x20match...','Please\x20enter\x20valid\x20data','highlight-id','Error\x20saving\x20highlight:','Manage\x20Points\x20section\x20initialized','Setting\x20up\x20highlight\x20buttons','edit-highlight-winnerScore-input','DOMContentLoaded','error-state','Unknown\x20Admin','display','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','Article\x20not\x20found','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','initial_placement','Modal\x20element\x20not\x20found!','checked','matches-table-body','Trophy\x20\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','.sidebar-nav\x20.nav-item[data-section=\x22','Error\x20loading\x20users:','history-start-date','cancel-edit-btn','Found\x20radio\x20with\x20value:','create-test-match-modal','positive-change','manage-ribbons','Error\x20loading\x20ribbons:','keys','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','resimulation','Edit\x20match\x20clicked:','Error\x20loading\x20trophies:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','trophy-name','demote-username','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','cloneNode','highlight-description-container','</td></tr>','highlight-achievement-image-container','Dashboard\x20data\x20loaded\x20successfully','videoId','assign-trophy-rarity','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x20ladder,\x20page\x20','nonParticipants','points-management-forms','edit-highlight-achievementType-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','edit-match-ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','.edit-match-btn','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','Monday','✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','timestamp','<span\x20class=\x22no-role\x22>None</span>','Committing\x20batch\x20update\x20for\x20','Error\x20searching\x20users:','ribbon-user-search','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','matches-search','elo-history-table-body','Winner\x20and\x20loser\x20usernames\x20are\x20required','confirm-resimulate-btn','\x20(+','Error\x20loading\x20players:','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','highlight-match-date-container','search','Gold','empty-state','\x27\x20has\x20permissions:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','message','manage-points','Enter','Failed\x20to\x20update\x20player:\x20','edit-match-winner-comment','edit-match-loser-score','\x20(winner)\x20vs\x20','Match\x20updated\x20successfully','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','rejected-count','createdBy','https://www.youtube.com/embed/','borderRadius','Modal\x20background\x20clicked','focus','\x27</td>','onerror','Found\x20user\x20in\x20','Using\x20collection:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','from','wins','match-details-container','role-filter','Initial\x20Placement','N/A','current-ribbon-user','exists','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','Closing\x20create\x20test\x20match\x20modal','Error\x20creating\x20simple\x20test\x20match:','eloRating','highlight-players-container','\x20to\x20','Player\x20not\x20found\x20in\x20','page','div','set-role-form','loading','create-new-trophy-btn','innerHTML','querySelectorAll','sendPromotionNotification','refresh-points-overview','Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...','user-role','Modal\x20close\x20button\x20clicked','load-players-data','Error\x20loading\x20article\x20data:','Error\x20deleting\x20highlight:\x20','Highlight\x20not\x20found','userTrophies','\x20added\x20successfully\x20to\x20','highlight-match-info-container','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','promote-form','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','Please\x20enter\x20a\x20valid\x20username','edit-losses','Set\x20to\x20','Promoting\x20player\x20to\x20','migrate-points-btn','Never\x20played','.assign-trophy-btn','Found\x20','Added\x20','points','d1-next-page','assign-trophy-title','trophy-image-preview','Edit\x20Match:\x20','Quick\x20edit\x20form\x20submitted','.edit-trophy-btn','manage-trophies','Error\x20creating\x20rank\x20distribution\x20chart:','\x20-\x20','split','elo-history-search','user-search','imageUrl','has','Promotion','Error:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-achievement-player-container','Modal\x20element\x20found:','edit-match-loser-suicides','trophy-preview-container','.error-state','roleAssignedAt','edit-highlight-mapVersion-input','#50C878','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','highlights','load-ribbons-data','all','Set\x20default\x20ladder\x20to:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','#CD7F32','querySelector','Failed\x20to\x20delete\x20trophy:\x20','entries','Unauthorized:\x20Admin\x20access\x20required','Highlight\x20updated\x20successfully!','input[name=\x22quick-action\x22]:checked','Match\x20deleted\x20successfully','Points\x20action\x20buttons\x20setup\x20complete','length','ladder','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','No\x20users\x20needed\x20points\x20field\x20initialization','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','award-item-form','Failed\x20to\x20load\x20article\x20data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.form-group,\x20.form-row','Failed\x20to\x20load\x20trophy\x20data','5px','No\x20specific\x20permissions\x20for\x20user\x20','\x20ladder!','create-creator-highlight-btn','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','rgba(211,\x2047,\x2047,\x200.7)','opacity','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20','edit-match-winner','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','flex','matchLink','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','Untitled','.username','highly-inactive','content','empty','fromDate','image','37900040DYKnEz','fa-info-circle','none','toLowerCase','onAuthStateChanged','achievementDetails','body','points-asc','highlight-video-id','Failed\x20to\x20assign\x20trophy:\x20','.admin-action','Error\x20opening\x20quick\x20edit\x20modal:','Loaded\x20','Wednesday','articles-table-body','save-player-btn','Queued\x20','selected-user-name','Query\x20created:','.edit-btn','Failed\x20to\x20delete\x20match:\x20','5kNgBuW','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','loading-cell','set-elo-modal','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','No\x20player\x20selected','success','article-title','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','Create\x20test\x20match\x20form\x20not\x20found','source','Error\x20loading\x20match\x20for\x20deletion:','highlight-form','get'];a4_0x11d4=function(){return _0x4ab144;};return a4_0x11d4();}const a4_0x32ccbb=(function(){let _0x27d765=!![];return function(_0x3cb90c,_0x2ebf7d){const _0x25b92d=_0x27d765?function(){const _0x4f0cb8=a4_0x3da5;if(_0x2ebf7d){const _0x236ad5=_0x2ebf7d[_0x4f0cb8(0x170)](_0x3cb90c,arguments);return _0x2ebf7d=null,_0x236ad5;}}:function(){};return _0x27d765=![],_0x25b92d;};}()),a4_0x55a661=a4_0x32ccbb(this,function(){const _0x5d9d38=a4_0x3da5,_0x3eff3e=function(){let _0x5f1dfb;try{_0x5f1dfb=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x54b2e3){_0x5f1dfb=window;}return _0x5f1dfb;},_0xb70204=_0x3eff3e(),_0x4e6281=_0xb70204['console']=_0xb70204[_0x5d9d38(0x14a)]||{},_0x35e2cc=[_0x5d9d38(0x4ca),_0x5d9d38(0x1bd),_0x5d9d38(0x447),_0x5d9d38(0x240),_0x5d9d38(0x221),'table',_0x5d9d38(0x472)];for(let _0x5d46a3=0x0;_0x5d46a3<_0x35e2cc['length'];_0x5d46a3++){const _0xfb0635=a4_0x32ccbb['constructor'][_0x5d9d38(0x1a4)][_0x5d9d38(0x35f)](a4_0x32ccbb),_0x4065ff=_0x35e2cc[_0x5d46a3],_0x432eba=_0x4e6281[_0x4065ff]||_0xfb0635;_0xfb0635[_0x5d9d38(0x3b1)]=a4_0x32ccbb[_0x5d9d38(0x35f)](a4_0x32ccbb),_0xfb0635[_0x5d9d38(0x4bb)]=_0x432eba[_0x5d9d38(0x4bb)][_0x5d9d38(0x35f)](_0x432eba),_0x4e6281[_0x4065ff]=_0xfb0635;}});a4_0x55a661();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x297068){const _0x4b5cb1=a4_0x3da5;if(!_0x297068)return _0x4b5cb1(0x1fb);_0x297068=_0x297068['replace']('#','');_0x297068[_0x4b5cb1(0x317)]===0x3&&(_0x297068=_0x297068['split']('')['map'](_0x545025=>_0x545025+_0x545025)['join'](''));if(_0x297068['length']!==0x6)return _0x4b5cb1(0x1fb);const _0x2e1ec9=parseInt(_0x297068[_0x4b5cb1(0x4e4)](0x0,0x2),0x10),_0x473bf9=parseInt(_0x297068[_0x4b5cb1(0x4e4)](0x2,0x4),0x10),_0x47b571=parseInt(_0x297068[_0x4b5cb1(0x4e4)](0x4,0x6),0x10),_0x28d82d=(_0x2e1ec9*0x12b+_0x473bf9*0x24b+_0x47b571*0x72)/0x3e8;return _0x28d82d>=0x80?_0x4b5cb1(0x1d8):_0x4b5cb1(0x1fb);}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a4_0xfdad8c(0x234)](a4_0xfdad8c(0x25e),()=>{const _0xa2d7d4=a4_0xfdad8c;auth[_0xa2d7d4(0x339)](async _0x19d8b4=>{const _0x411a87=_0xa2d7d4;if(!_0x19d8b4){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x52d051){console[_0x411a87(0x240)](_0x411a87(0x477),_0x52d051),showNotification(_0x411a87(0x1b7),_0x411a87(0x240));}});});async function getUserTabPermissions(_0x2141e2){const _0x1235e9=a4_0xfdad8c;if(!_0x2141e2)return[_0x1235e9(0x471)];console[_0x1235e9(0x4ca)](_0x1235e9(0x120)+_0x2141e2+'\x20in\x20all\x20collections...');const _0x5ea6c1=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':_0x1235e9(0x20c),'displayName':'D1\x20Players'},{'name':_0x1235e9(0x223),'displayName':_0x1235e9(0x1a0)},{'name':_0x1235e9(0x3ef),'displayName':'D3\x20Players'},{'name':_0x1235e9(0x287),'displayName':_0x1235e9(0x38f)}],_0x5433e6=auth['currentUser'];let _0x733cd7=null,_0x56fde7=null;for(const _0x494524 of _0x5ea6c1){try{if(_0x5433e6){const _0x4f1d19=doc(db,_0x494524['name'],_0x5433e6[_0x1235e9(0x1da)]),_0x29009c=await getDoc(_0x4f1d19);if(_0x29009c[_0x1235e9(0x2c3)]()){const _0x36eeac=_0x29009c[_0x1235e9(0x474)]();console[_0x1235e9(0x4ca)](_0x1235e9(0x2b9)+_0x494524[_0x1235e9(0xc6)]+_0x1235e9(0x4c3),_0x36eeac);const _0x1539ac=(_0x36eeac['roleName']||_0x36eeac['role']||'')[_0x1235e9(0x338)]();if(_0x1539ac&&_0x1539ac!==_0x1235e9(0x337)){_0x733cd7=_0x1539ac,_0x56fde7=_0x494524[_0x1235e9(0xc6)],console['log']('Found\x20specific\x20role:\x20'+_0x733cd7+_0x1235e9(0x178)+_0x56fde7);break;}}}if(!_0x733cd7){const _0x533975=collection(db,_0x494524['name']),_0x50e6e8=query(_0x533975,where(_0x1235e9(0x206),'==',_0x2141e2)),_0x2ed402=await getDocs(_0x50e6e8);if(!_0x2ed402[_0x1235e9(0x332)]){const _0x4d4526=_0x2ed402['docs'][0x0]['data']();console[_0x1235e9(0x4ca)](_0x1235e9(0x2b9)+_0x494524[_0x1235e9(0xc6)]+'\x20with\x20email\x20'+_0x2141e2+':',_0x4d4526);const _0x42d06d=(_0x4d4526['roleName']||_0x4d4526[_0x1235e9(0x4a9)]||'')[_0x1235e9(0x338)]();if(_0x42d06d&&_0x42d06d!==_0x1235e9(0x337)){_0x733cd7=_0x42d06d,_0x56fde7=_0x494524[_0x1235e9(0xc6)],console[_0x1235e9(0x4ca)](_0x1235e9(0x1a6)+_0x733cd7+_0x1235e9(0x178)+_0x56fde7);break;}}}}catch(_0x3cd800){console[_0x1235e9(0x240)]('Error\x20checking\x20'+_0x494524[_0x1235e9(0xc6)]+':',_0x3cd800);}}if(_0x733cd7){console['log'](_0x1235e9(0x436)+_0x733cd7+_0x1235e9(0x15a)+_0x56fde7+')');const _0x1612c2={'admin':[_0x1235e9(0x471),'manage-players',_0x1235e9(0xdb),_0x1235e9(0x4c4),_0x1235e9(0x2f4),_0x1235e9(0x368),_0x1235e9(0x4d5),_0x1235e9(0x1ec),_0x1235e9(0x2f4),'elo-history',_0x1235e9(0x226),_0x1235e9(0x3ca),_0x1235e9(0xdb),'manage-points','manage-levels-ribbons',_0x1235e9(0x272)],'owner':[_0x1235e9(0x471),_0x1235e9(0x235),_0x1235e9(0xdb),_0x1235e9(0x4c4),_0x1235e9(0x2f4),_0x1235e9(0x368),'inactive-players','settings',_0x1235e9(0x2f4),_0x1235e9(0x199),'manage-highlights','user-roles-section',_0x1235e9(0xdb),'manage-points',_0x1235e9(0x36a),_0x1235e9(0x272)],'council':[_0x1235e9(0x471),'manage-players',_0x1235e9(0xdb)],'creative\x20lead':[_0x1235e9(0x471),_0x1235e9(0x4c4),_0x1235e9(0x2f4),_0x1235e9(0x199),_0x1235e9(0x226)]};if(_0x1612c2[_0x733cd7])return console[_0x1235e9(0x4ca)](_0x1235e9(0xd2)+_0x733cd7+_0x1235e9(0x2a5),_0x1612c2[_0x733cd7]),_0x1612c2[_0x733cd7];}return console[_0x1235e9(0x4ca)](_0x1235e9(0x322)+_0x2141e2+_0x1235e9(0x49d)),['dashboard'];}function setupSidebarNavigation(_0x42fbb1=[]){const _0xd3aab5=a4_0xfdad8c,_0x4777d9=document[_0xd3aab5(0x2d4)]('.sidebar-nav\x20.nav-item'),_0x5b8d27=document[_0xd3aab5(0x2d4)](_0xd3aab5(0x11a));(!_0x42fbb1||_0x42fbb1[_0xd3aab5(0x317)]===0x0)&&(_0x42fbb1=['dashboard']);_0x4777d9[_0xd3aab5(0x3b5)](_0x47c215=>{const _0x45abff=_0xd3aab5,_0xd4a8a7=_0x47c215[_0x45abff(0x3aa)]('data-section');_0x42fbb1['includes'](_0xd4a8a7)?_0x47c215[_0x45abff(0x229)]['display']=_0x45abff(0x32b):_0x47c215[_0x45abff(0x229)][_0x45abff(0x261)]=_0x45abff(0x337),_0x47c215[_0x45abff(0x234)](_0x45abff(0x42d),()=>{const _0x202ace=_0x45abff,_0x52ed4c=_0x47c215[_0x202ace(0x3aa)]('data-section');if(!_0x42fbb1[_0x202ace(0x4fb)](_0x52ed4c)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x4777d9[_0x202ace(0x3b5)](_0x402ea0=>_0x402ea0[_0x202ace(0x45f)][_0x202ace(0x3e9)]('active')),_0x47c215[_0x202ace(0x45f)][_0x202ace(0x486)](_0x202ace(0x20f)),_0x5b8d27[_0x202ace(0x3b5)](_0x3c7d22=>{const _0xefda5d=_0x202ace;_0x3c7d22[_0xefda5d(0x229)][_0xefda5d(0x261)]=_0xefda5d(0x337);});const _0x48f437=document[_0x202ace(0x158)](_0x52ed4c);_0x48f437&&(_0x48f437[_0x202ace(0x229)][_0x202ace(0x261)]='block',console[_0x202ace(0x4ca)](_0x202ace(0x1bb)+_0x52ed4c+_0x202ace(0x24e)));});});const _0x58964b=document[_0xd3aab5(0x30f)](_0xd3aab5(0x26b)+_0x42fbb1[0x0]+'\x22]');_0x58964b&&_0x58964b[_0xd3aab5(0x42d)](),console[_0xd3aab5(0x4ca)](_0xd3aab5(0x1ab));}function setupTabNavigation(){const _0x3fc8bb=a4_0xfdad8c,_0x10804a=document['querySelectorAll'](_0x3fc8bb(0x46d));let _0xdc029b=null,_0x1a6022=new Set();_0x10804a['forEach'](_0x1c56a1=>{_0x1c56a1['addEventListener']('click',function(){const _0x3bfa4c=a4_0x3da5,_0x119715=this['getAttribute'](_0x3bfa4c(0x211));if(_0x119715===_0xdc029b)return;_0xdc029b&&(document[_0x3bfa4c(0x158)](_0xdc029b)[_0x3bfa4c(0x229)][_0x3bfa4c(0x261)]='none',_0x10804a[_0x3bfa4c(0x3b5)](_0x525103=>_0x525103[_0x3bfa4c(0x45f)]['remove']('active'))),document[_0x3bfa4c(0x158)](_0x119715)[_0x3bfa4c(0x229)][_0x3bfa4c(0x261)]=_0x3bfa4c(0xb8),this[_0x3bfa4c(0x45f)][_0x3bfa4c(0x486)](_0x3bfa4c(0x20f)),_0xdc029b=_0x119715;});});}function loadSectionData(_0x48c038){return;}async function initializeAdminDashboard(){const _0x258414=a4_0xfdad8c;try{const _0x5ef2ef=auth[_0x258414(0x35b)],_0x5222b8=await getUserTabPermissions(_0x5ef2ef[_0x258414(0x206)]);console[_0x258414(0x4ca)](_0x258414(0xca)+_0x5ef2ef['email']+_0x258414(0x362),_0x5222b8),window[_0x258414(0x4f1)]=_0x5222b8,setupSidebarNavigation(_0x5222b8),setupLadderSelector(),setupDashboardSection(),_0x5222b8[_0x258414(0x4fb)](_0x258414(0x235))&&setupManagePlayersSection(),_0x5222b8['includes'](_0x258414(0x199))&&setupEloHistorySection(),_0x5222b8[_0x258414(0x4fb)](_0x258414(0x368))&&setupRankControls(),_0x5222b8[_0x258414(0x4fb)](_0x258414(0x4c4))&&setupManageArticlesSection(),_0x5222b8[_0x258414(0x4fb)](_0x258414(0x3ca))&&setupUserRolesSection(),_0x5222b8[_0x258414(0x4fb)]('manage-trophies')&&setupTrophyManagementSection(),_0x5222b8[_0x258414(0x4fb)](_0x258414(0x226))&&setupManageHighlightsSection(),_0x5222b8[_0x258414(0x4fb)](_0x258414(0x4d5))&&setupInactivePlayersSection(),_0x5222b8[_0x258414(0x4fb)](_0x258414(0xdb))&&setupManageMatchesSection(),_0x5222b8[_0x258414(0x4fb)](_0x258414(0x2a9))&&setupManagePointsSection(),_0x5222b8[_0x258414(0x4fb)]('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x5222b8);}catch(_0x1b682a){console[_0x258414(0x240)]('Error\x20initializing\x20admin\x20dashboard:',_0x1b682a);}}function setupDataLoadButtons(_0x55065e=[]){const _0x5d198f=a4_0xfdad8c;(!_0x55065e||_0x55065e[_0x5d198f(0x317)]===0x0)&&(_0x55065e=['dashboard']);const _0x27d52b=document[_0x5d198f(0x158)](_0x5d198f(0x3fe));_0x27d52b&&_0x27d52b[_0x5d198f(0x234)](_0x5d198f(0x42d),function(){const _0x29ac67=_0x5d198f;this[_0x29ac67(0x45f)][_0x29ac67(0x486)]('loading'),this[_0x29ac67(0x2d3)]=_0x29ac67(0x497),loadDashboardOverview()[_0x29ac67(0x4b8)](()=>{const _0x1d0d4f=_0x29ac67;this['classList'][_0x1d0d4f(0x3e9)](_0x1d0d4f(0x2d1)),this[_0x1d0d4f(0x2d3)]=_0x1d0d4f(0x1cd);})['catch'](_0x399c2a=>{const _0x2f5187=_0x29ac67;console['error'](_0x2f5187(0x3fa),_0x399c2a),this['classList'][_0x2f5187(0x3e9)](_0x2f5187(0x2d1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2f1e57=_0x2f5187;this['innerHTML']=_0x2f1e57(0x1cd);},0xbb8);});});if(_0x55065e['includes'](_0x5d198f(0x2f4))){const _0x4aa5a6=document[_0x5d198f(0x158)](_0x5d198f(0x10c));_0x4aa5a6&&_0x4aa5a6[_0x5d198f(0x234)]('click',function(){const _0x52883b=_0x5d198f;console[_0x52883b(0x4ca)](_0x52883b(0x1f5)),this[_0x52883b(0x45f)][_0x52883b(0x486)](_0x52883b(0x2d1)),this[_0x52883b(0x2d3)]=_0x52883b(0x497),loadTrophyDefinitions()['then'](()=>{const _0x13b14c=_0x52883b;this[_0x13b14c(0x45f)][_0x13b14c(0x3e9)](_0x13b14c(0x2d1)),this[_0x13b14c(0x2d3)]=_0x13b14c(0x232);})[_0x52883b(0x38c)](_0x198e60=>{const _0x4a1e6a=_0x52883b;console[_0x4a1e6a(0x240)](_0x4a1e6a(0x278),_0x198e60),this['classList'][_0x4a1e6a(0x3e9)]('loading'),this[_0x4a1e6a(0x2d3)]=_0x4a1e6a(0x2c5),setTimeout(()=>{const _0x28d70d=_0x4a1e6a;this[_0x28d70d(0x2d3)]=_0x28d70d(0x232);},0xbb8);});});}if(_0x55065e[_0x5d198f(0x4fb)](_0x5d198f(0x235))){const _0x438a87=document['getElementById'](_0x5d198f(0x2da));_0x438a87&&_0x438a87[_0x5d198f(0x234)](_0x5d198f(0x42d),function(){const _0x23eeb7=_0x5d198f;console['log']('Load\x20players\x20data\x20clicked'),this[_0x23eeb7(0x45f)][_0x23eeb7(0x486)](_0x23eeb7(0x2d1)),this[_0x23eeb7(0x2d3)]=_0x23eeb7(0x497),loadPlayersData()[_0x23eeb7(0x4b8)](()=>{const _0x20f00b=_0x23eeb7;this['classList'][_0x20f00b(0x3e9)]('loading'),this[_0x20f00b(0x2d3)]=_0x20f00b(0x12a);})[_0x23eeb7(0x38c)](_0x1b3acd=>{const _0x436a44=_0x23eeb7;console[_0x436a44(0x240)]('Error\x20loading\x20players:',_0x1b3acd),this[_0x436a44(0x45f)][_0x436a44(0x3e9)]('loading'),this[_0x436a44(0x2d3)]=_0x436a44(0x2c5),setTimeout(()=>{const _0x51c8ed=_0x436a44;this[_0x51c8ed(0x2d3)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x55065e[_0x5d198f(0x4fb)](_0x5d198f(0x199))){const _0x3ad733=document['getElementById']('load-elo-history-data');_0x3ad733&&_0x3ad733[_0x5d198f(0x234)]('click',function(){const _0x326799=_0x5d198f;console[_0x326799(0x4ca)](_0x326799(0x14e)),this[_0x326799(0x45f)][_0x326799(0x486)]('loading'),this[_0x326799(0x2d3)]=_0x326799(0x497),loadEloHistory(0x1)['then'](()=>{const _0x1c9653=_0x326799;this[_0x1c9653(0x45f)][_0x1c9653(0x3e9)](_0x1c9653(0x2d1)),this[_0x1c9653(0x2d3)]=_0x1c9653(0x406);})[_0x326799(0x38c)](_0x14ecab=>{const _0x418458=_0x326799;console[_0x418458(0x240)]('Error\x20loading\x20history:',_0x14ecab),this[_0x418458(0x45f)]['remove'](_0x418458(0x2d1)),this['innerHTML']=_0x418458(0x2c5),setTimeout(()=>{const _0x369e5a=_0x418458;this['innerHTML']=_0x369e5a(0x406);},0xbb8);});});}if(_0x55065e[_0x5d198f(0x4fb)](_0x5d198f(0x4c4))){const _0x262dcd=document[_0x5d198f(0x158)]('load-articles-data');_0x262dcd&&_0x262dcd['addEventListener']('click',function(){const _0x1493b1=_0x5d198f;console[_0x1493b1(0x4ca)](_0x1493b1(0x1fe)),this[_0x1493b1(0x45f)]['add'](_0x1493b1(0x2d1)),this[_0x1493b1(0x2d3)]=_0x1493b1(0x497),loadArticles()[_0x1493b1(0x4b8)](()=>{const _0x5066dc=_0x1493b1;this['classList']['remove'](_0x5066dc(0x2d1)),this[_0x5066dc(0x2d3)]=_0x5066dc(0x2fe);})['catch'](_0x338243=>{const _0x122d9f=_0x1493b1;console[_0x122d9f(0x240)](_0x122d9f(0x22e),_0x338243),this[_0x122d9f(0x45f)][_0x122d9f(0x3e9)](_0x122d9f(0x2d1)),this[_0x122d9f(0x2d3)]=_0x122d9f(0x2c5),setTimeout(()=>{const _0x540889=_0x122d9f;this[_0x540889(0x2d3)]=_0x540889(0x2fe);},0xbb8);});});}if(_0x55065e[_0x5d198f(0x4fb)](_0x5d198f(0x3ca))){const _0x115977=document[_0x5d198f(0x158)]('load-users-data');_0x115977&&_0x115977[_0x5d198f(0x234)](_0x5d198f(0x42d),function(){const _0x1879bf=_0x5d198f;console[_0x1879bf(0x4ca)]('Load\x20users\x20data\x20clicked'),this[_0x1879bf(0x45f)][_0x1879bf(0x486)](_0x1879bf(0x2d1)),this[_0x1879bf(0x2d3)]=_0x1879bf(0x497),loadUsersWithRoles()[_0x1879bf(0x4b8)](()=>{const _0x5e6a9f=_0x1879bf;this['classList'][_0x5e6a9f(0x3e9)](_0x5e6a9f(0x2d1)),this[_0x5e6a9f(0x2d3)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x1879bf(0x38c)](_0x5ef813=>{const _0x30f94a=_0x1879bf;console['error'](_0x30f94a(0x26c),_0x5ef813),this['classList'][_0x30f94a(0x3e9)](_0x30f94a(0x2d1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xe35db2=_0x30f94a;this['innerHTML']=_0xe35db2(0x19b);},0xbb8);});});}if(_0x55065e[_0x5d198f(0x4fb)](_0x5d198f(0x4d5))){const _0x3342d0=document[_0x5d198f(0x158)](_0x5d198f(0x513));_0x3342d0&&_0x3342d0[_0x5d198f(0x234)](_0x5d198f(0x42d),function(){const _0x51dcfc=_0x5d198f;console[_0x51dcfc(0x4ca)](_0x51dcfc(0x389)),this['classList'][_0x51dcfc(0x486)](_0x51dcfc(0x2d1)),this[_0x51dcfc(0x2d3)]=_0x51dcfc(0x497),loadInactivePlayersData()['then'](()=>{const _0x506b80=_0x51dcfc;this['classList'][_0x506b80(0x3e9)](_0x506b80(0x2d1)),this['innerHTML']=_0x506b80(0x45e);})[_0x51dcfc(0x38c)](_0x25cec3=>{const _0xc75fd=_0x51dcfc;console[_0xc75fd(0x240)](_0xc75fd(0x126),_0x25cec3),this[_0xc75fd(0x45f)]['remove'](_0xc75fd(0x2d1)),this[_0xc75fd(0x2d3)]=_0xc75fd(0x2c5),setTimeout(()=>{const _0x1b6013=_0xc75fd;this[_0x1b6013(0x2d3)]=_0x1b6013(0x45e);},0xbb8);});});}if(_0x55065e[_0x5d198f(0x4fb)](_0x5d198f(0x226))){const _0x154e80=document[_0x5d198f(0x158)](_0x5d198f(0x444));_0x154e80&&_0x154e80[_0x5d198f(0x234)](_0x5d198f(0x42d),function(){const _0x1f3587=_0x5d198f;console[_0x1f3587(0x4ca)]('Load\x20highlights\x20data\x20clicked'),this[_0x1f3587(0x45f)][_0x1f3587(0x486)](_0x1f3587(0x2d1)),this[_0x1f3587(0x2d3)]=_0x1f3587(0x497),loadHighlightsAdmin()[_0x1f3587(0x4b8)](()=>{const _0x40cfa2=_0x1f3587;this[_0x40cfa2(0x45f)]['remove'](_0x40cfa2(0x2d1)),this[_0x40cfa2(0x2d3)]=_0x40cfa2(0x16b);})[_0x1f3587(0x38c)](_0xb370ec=>{const _0x29311d=_0x1f3587;console[_0x29311d(0x240)]('Error\x20loading\x20highlights:',_0xb370ec),this[_0x29311d(0x45f)]['remove'](_0x29311d(0x2d1)),this[_0x29311d(0x2d3)]=_0x29311d(0x2c5),setTimeout(()=>{const _0x28bff4=_0x29311d;this[_0x28bff4(0x2d3)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x55065e[_0x5d198f(0x4fb)](_0x5d198f(0xdb))){const _0x371561=document[_0x5d198f(0x158)](_0x5d198f(0x12f));_0x371561&&_0x371561[_0x5d198f(0x234)](_0x5d198f(0x42d),function(){const _0x57288a=_0x5d198f;console[_0x57288a(0x4ca)](_0x57288a(0x171)),this[_0x57288a(0x45f)]['add']('loading'),this[_0x57288a(0x2d3)]=_0x57288a(0x497),loadMatchesData(0x1)[_0x57288a(0x4b8)](()=>{const _0x13541e=_0x57288a;this[_0x13541e(0x45f)]['remove'](_0x13541e(0x2d1)),this[_0x13541e(0x2d3)]=_0x13541e(0x1e2);})[_0x57288a(0x38c)](_0x1b0e53=>{const _0xffc2ab=_0x57288a;console['error'](_0xffc2ab(0xc3),_0x1b0e53),this[_0xffc2ab(0x45f)]['remove'](_0xffc2ab(0x2d1)),this[_0xffc2ab(0x2d3)]=_0xffc2ab(0x2c5),setTimeout(()=>{const _0x9ec383=_0xffc2ab;this[_0x9ec383(0x2d3)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x55065e['includes']('manage-ribbons')){const _0x376d3c=document[_0x5d198f(0x158)](_0x5d198f(0x30a));_0x376d3c&&_0x376d3c['addEventListener'](_0x5d198f(0x42d),function(){const _0xca0564=_0x5d198f;console[_0xca0564(0x4ca)](_0xca0564(0x3f5)),this[_0xca0564(0x45f)][_0xca0564(0x486)](_0xca0564(0x2d1)),this[_0xca0564(0x2d3)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0xca0564(0x4b8)](()=>{const _0x2009ed=_0xca0564;this['classList'][_0x2009ed(0x3e9)]('loading'),this[_0x2009ed(0x2d3)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})[_0xca0564(0x38c)](_0x4d6187=>{const _0x55b3a5=_0xca0564;console[_0x55b3a5(0x240)](_0x55b3a5(0x273),_0x4d6187),this['classList'][_0x55b3a5(0x3e9)]('loading'),this[_0x55b3a5(0x2d3)]=_0x55b3a5(0x2c5),setTimeout(()=>{const _0x40c91f=_0x55b3a5;this[_0x40c91f(0x2d3)]=_0x40c91f(0x3b3);},0xbb8);});});}console[_0x5d198f(0x4ca)]('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x1b1c7d=a4_0xfdad8c;document[_0x1b1c7d(0x158)](_0x1b1c7d(0x241))[_0x1b1c7d(0x3cb)]='-',document[_0x1b1c7d(0x158)]('match-count')[_0x1b1c7d(0x3cb)]='-',document[_0x1b1c7d(0x158)](_0x1b1c7d(0x1e6))[_0x1b1c7d(0x3cb)]='-',document['getElementById'](_0x1b1c7d(0x2b1))[_0x1b1c7d(0x3cb)]='-';}function setupLadderSelector(){const _0x3c2b1d=a4_0xfdad8c,_0x22cf17=document['querySelectorAll'](_0x3c2b1d(0x217));_0x22cf17[_0x3c2b1d(0x3b5)](_0x561ad1=>{const _0x212be5=_0x3c2b1d;_0x561ad1[_0x212be5(0x234)](_0x212be5(0x467),()=>{const _0x31c1fa=_0x212be5;currentLadder=_0x561ad1[_0x31c1fa(0xdf)],document[_0x31c1fa(0x33b)][_0x31c1fa(0x128)]('data-ladder',currentLadder);const _0x4ae1af=document[_0x31c1fa(0x158)](_0x31c1fa(0x202));_0x4ae1af&&(_0x4ae1af[_0x31c1fa(0x3cb)]=currentLadder),document['getElementById'](_0x31c1fa(0x241))[_0x31c1fa(0x3cb)]='-',document['getElementById'](_0x31c1fa(0x3cd))[_0x31c1fa(0x3cb)]='-',document[_0x31c1fa(0x158)](_0x31c1fa(0x1e6))[_0x31c1fa(0x3cb)]='-',document[_0x31c1fa(0x158)]('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution'][_0x31c1fa(0x376)](),charts['rankDistribution']=null),charts[_0x31c1fa(0x4af)]&&(charts[_0x31c1fa(0x4af)][_0x31c1fa(0x376)](),charts[_0x31c1fa(0x4af)]=null),showNotification(_0x31c1fa(0x1bb)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x31c1fa(0x447));});});const _0x2a0a48=document[_0x3c2b1d(0x158)](_0x3c2b1d(0x202));_0x2a0a48&&(_0x2a0a48[_0x3c2b1d(0x3cb)]=currentLadder);}async function loadDashboardOverview(){const _0x556376=a4_0xfdad8c;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x556376(0x158)](_0x556376(0x241))['textContent']='-',document[_0x556376(0x158)]('match-count')[_0x556376(0x3cb)]='-',document[_0x556376(0x158)](_0x556376(0x1e6))['textContent']='-',document[_0x556376(0x158)]('rejected-count')[_0x556376(0x3cb)]='-';const _0x524dfb=currentLadder==='D1'?_0x556376(0x20c):currentLadder==='D2'?_0x556376(0x223):_0x556376(0x3ef),_0x3f3dab=currentLadder==='D1'?_0x556376(0x465):currentLadder==='D2'?_0x556376(0x50b):'approvedMatchesD3',_0x36c7a6=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?_0x556376(0x41d):_0x556376(0x434),_0x1d1bb3=currentLadder==='D1'?_0x556376(0x4ae):currentLadder==='D2'?_0x556376(0xde):_0x556376(0xba);console[_0x556376(0x4ca)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x524dfb+',\x20'+_0x3f3dab);const _0x5cca4b=await getDocs(collection(db,_0x524dfb)),_0x2b17d9=_0x5cca4b[_0x556376(0x4c9)],_0x280d8e=await getDocs(collection(db,_0x3f3dab)),_0x1fb8b1=_0x280d8e[_0x556376(0x4c9)],_0x59e072=await getDocs(collection(db,_0x36c7a6)),_0x1b5ff3=_0x59e072[_0x556376(0x4c9)],_0x194c03=await getDocs(collection(db,_0x1d1bb3)),_0x6f5d16=_0x194c03['size'];return document['getElementById'](_0x556376(0x241))[_0x556376(0x3cb)]=_0x2b17d9,document[_0x556376(0x158)](_0x556376(0x3cd))['textContent']=_0x1fb8b1,document['getElementById']('pending-count')[_0x556376(0x3cb)]=_0x1b5ff3,document[_0x556376(0x158)]('rejected-count')[_0x556376(0x3cb)]=_0x6f5d16,await createRankDistributionChart(),await createActivityChart(),console[_0x556376(0x4ca)](_0x556376(0x281)),!![];}catch(_0x37a414){console['error'](_0x556376(0x3cc),_0x37a414);throw _0x37a414;}}async function createRankDistributionChart(){const _0x4313b5=a4_0xfdad8c;try{const _0x13999b=collection(db,currentLadder==='D1'?_0x4313b5(0x20c):_0x4313b5(0x223)),_0x956657=await getDocs(_0x13999b),_0x308dc1={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x956657['forEach'](_0x195e83=>{const _0x5bcf31=_0x4313b5,_0x47a4e2=_0x195e83[_0x5bcf31(0x474)](),_0x23c3bb=_0x47a4e2['eloRating']||0x4b0;if(_0x23c3bb>=0x7d0)_0x308dc1[_0x5bcf31(0x4c5)]++;else{if(_0x23c3bb>=0x708)_0x308dc1[_0x5bcf31(0x2a3)]++;else{if(_0x23c3bb>=0x640)_0x308dc1[_0x5bcf31(0x1b2)]++;else{if(_0x23c3bb>=0x578)_0x308dc1[_0x5bcf31(0x412)]++;else _0x308dc1[_0x5bcf31(0x417)]++;}}}});const _0x696188=document['getElementById'](_0x4313b5(0x157));charts[_0x4313b5(0x404)]&&charts['rankDistribution'][_0x4313b5(0x376)](),charts[_0x4313b5(0x404)]=new Chart(_0x696188,{'type':_0x4313b5(0x1be),'data':{'labels':Object[_0x4313b5(0x274)](_0x308dc1),'datasets':[{'data':Object['values'](_0x308dc1),'backgroundColor':[_0x4313b5(0x4ad),_0x4313b5(0x30e),'#C0C0C0','#FFD700',_0x4313b5(0x307)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x4313b5(0x35a),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x355b6c){console[_0x4313b5(0x240)](_0x4313b5(0x2f5),_0x355b6c),document[_0x4313b5(0x158)](_0x4313b5(0x157))[_0x4313b5(0x2d3)]=_0x4313b5(0x10d);}}async function createActivityChart(){const _0x1bcaf1=a4_0xfdad8c;try{const _0x2207c4=currentLadder==='D1'?_0x1bcaf1(0x465):'approvedMatchesD2',_0x577ff8=collection(db,_0x2207c4),_0x8fcf39=new Date();_0x8fcf39[_0x1bcaf1(0x180)](_0x8fcf39[_0x1bcaf1(0xd4)]()-0x7);const _0xc02933=query(_0x577ff8,where(_0x1bcaf1(0x463),'>=',_0x8fcf39),orderBy(_0x1bcaf1(0x463),_0x1bcaf1(0x41a))),_0x100ae7=await getDocs(_0xc02933),_0x5772fe=[_0x1bcaf1(0x425),_0x1bcaf1(0x290),_0x1bcaf1(0x19f),_0x1bcaf1(0x342),_0x1bcaf1(0x4eb),_0x1bcaf1(0x182),'Saturday'],_0x4f981b=_0x5772fe[_0x1bcaf1(0x3f9)]((_0x42ad5c,_0x394eef)=>({..._0x42ad5c,[_0x394eef]:0x0}),{});_0x100ae7[_0x1bcaf1(0x3b5)](_0x85498f=>{const _0x543981=_0x1bcaf1,_0x2ea7ad=_0x85498f[_0x543981(0x474)]();if(_0x2ea7ad[_0x543981(0x463)]){const _0x108c8e=_0x5772fe[new Date(_0x2ea7ad['approvedAt'][_0x543981(0x3a5)]*0x3e8)['getDay']()];_0x4f981b[_0x108c8e]++;}});const _0x1bd4c3=document[_0x1bcaf1(0x158)](_0x1bcaf1(0x1e3));charts[_0x1bcaf1(0x4af)]&&charts[_0x1bcaf1(0x4af)][_0x1bcaf1(0x376)](),charts[_0x1bcaf1(0x4af)]=new Chart(_0x1bd4c3,{'type':_0x1bcaf1(0x44d),'data':{'labels':_0x5772fe,'datasets':[{'label':_0x1bcaf1(0x1b9),'data':_0x5772fe['map'](_0x9b0587=>_0x4f981b[_0x9b0587]),'backgroundColor':currentLadder==='D1'?_0x1bcaf1(0x326):_0x1bcaf1(0x3ac),'borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x1bcaf1(0x1aa)},'grid':{'color':_0x1bcaf1(0x3ce)}},'x':{'ticks':{'color':_0x1bcaf1(0x1aa)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':_0x1bcaf1(0x1aa)}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0x1bcaf1(0x1aa),'font':{'size':0x10}}}}});}catch(_0x343e1f){console[_0x1bcaf1(0x240)](_0x1bcaf1(0x429),_0x343e1f),document[_0x1bcaf1(0x158)](_0x1bcaf1(0x1e3))[_0x1bcaf1(0x2d3)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x2057bf=a4_0xfdad8c,_0x962ff3=document[_0x2057bf(0x158)](_0x2057bf(0xaf));if(!_0x962ff3)return;_0x962ff3[_0x2057bf(0x2d3)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x574fc9='players';if(currentLadder==='D2')_0x574fc9=_0x2057bf(0x223);else currentLadder==='D3'&&(_0x574fc9='playersD3');console[_0x2057bf(0x4ca)](_0x2057bf(0x20a)+_0x574fc9+'\x20collection...');const _0x2bd58d=collection(db,_0x574fc9),_0x47b1ed=query(_0x2bd58d,orderBy(_0x2057bf(0x2ca),'desc')),_0x1b9320=await getDocs(_0x47b1ed);if(_0x1b9320[_0x2057bf(0x332)]){_0x962ff3[_0x2057bf(0x2d3)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x962ff3[_0x2057bf(0x2d3)]='';let _0x3aac8b=0x1;_0x1b9320[_0x2057bf(0x3b5)](_0x333cb5=>{const _0x1de443=_0x2057bf,_0x5a73fa=_0x333cb5[_0x1de443(0x474)](),_0x13095a=getRankFromElo(_0x5a73fa[_0x1de443(0x2ca)]||0x4b0),_0x18d482=getRankStyle(_0x5a73fa[_0x1de443(0x2ca)]||0x4b0),_0x86778=document[_0x1de443(0x156)]('tr');_0x86778[_0x1de443(0x2d3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x3aac8b+_0x1de443(0x292)+_0x18d482[_0x1de443(0x3e2)]+_0x1de443(0x432)+(_0x5a73fa[_0x1de443(0x517)]||_0x1de443(0x1b8))+_0x1de443(0x2b0)+(_0x5a73fa[_0x1de443(0x2ca)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x18d482[_0x1de443(0x3e2)]+_0x1de443(0x4a3)+_0x13095a+_0x1de443(0x37c)+(_0x5a73fa[_0x1de443(0x2bd)]||0x0)+'W\x20/\x20'+(_0x5a73fa['losses']||0x0)+_0x1de443(0x144)+_0x333cb5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x333cb5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x962ff3[_0x1de443(0x136)](_0x86778),_0x3aac8b++;}),setupPlayerActionButtons();}catch(_0x125c31){console['error'](_0x2057bf(0x29f),_0x125c31),_0x962ff3[_0x2057bf(0x2d3)]=_0x2057bf(0x1c8)+_0x125c31['message']+_0x2057bf(0x45d);}}function getRankFromElo(_0x293276){const _0x37fb86=a4_0xfdad8c;if(_0x293276>=0x7d0)return _0x37fb86(0x4c5);if(_0x293276>=0x708)return _0x37fb86(0x2a3);if(_0x293276>=0x640)return'Silver';if(_0x293276>=0x578)return _0x37fb86(0x412);return _0x37fb86(0x417);}function setupPlayerActionButtons(){const _0x172b15=a4_0xfdad8c;document['querySelectorAll'](_0x172b15(0x348))['forEach'](_0x5a481d=>{const _0x292a59=_0x172b15;_0x5a481d['addEventListener'](_0x292a59(0x42d),async _0x167b07=>{const _0x3287aa=_0x292a59,_0x2a7ccd=_0x167b07['currentTarget'][_0x3287aa(0x468)]['id'];openEditPlayerModal(_0x2a7ccd);});}),document[_0x172b15(0x2d4)](_0x172b15(0x4f0))[_0x172b15(0x3b5)](_0x1cf671=>{const _0x37a03a=_0x172b15;_0x1cf671['addEventListener'](_0x37a03a(0x42d),async _0x251b7c=>{const _0x375009=_0x37a03a,_0x42e9f7=_0x251b7c['currentTarget'][_0x375009(0x468)]['id'];confirmDeletePlayer(_0x42e9f7);});});}async function openEditPlayerModal(_0x456f9e){const _0x5e6bce=a4_0xfdad8c;try{const _0x4c8863=currentLadder==='D1'?_0x5e6bce(0x20c):_0x5e6bce(0x223),_0x333827=doc(db,_0x4c8863,_0x456f9e),_0x539d22=await getDoc(_0x333827);if(!_0x539d22[_0x5e6bce(0x2c3)]()){showNotification(_0x5e6bce(0x1d2),_0x5e6bce(0x240));return;}const _0xd4349d=_0x539d22[_0x5e6bce(0x474)](),_0x757d35=document['getElementById']('edit-player-modal'),_0x2fe7b8=document[_0x5e6bce(0x158)](_0x5e6bce(0x3d2)),_0x1514d4=document['getElementById']('edit-elo'),_0x301065=document['getElementById']('edit-wins'),_0x4c8167=document[_0x5e6bce(0x158)](_0x5e6bce(0x2e5));_0x2fe7b8['value']=_0xd4349d[_0x5e6bce(0x517)]||'',_0x1514d4[_0x5e6bce(0xdf)]=_0xd4349d[_0x5e6bce(0x2ca)]||0x4b0,_0x301065['value']=_0xd4349d[_0x5e6bce(0x2bd)]||0x0,_0x4c8167[_0x5e6bce(0xdf)]=_0xd4349d[_0x5e6bce(0x370)]||0x0,_0x757d35[_0x5e6bce(0x468)]['playerId']=_0x456f9e,_0x757d35[_0x5e6bce(0x45f)][_0x5e6bce(0x486)](_0x5e6bce(0x20f));}catch(_0x581d0e){console[_0x5e6bce(0x240)](_0x5e6bce(0x24b),_0x581d0e),showNotification('Failed\x20to\x20load\x20player\x20data',_0x5e6bce(0x240));}}async function saveEditedPlayer(){const _0x1bfaea=a4_0xfdad8c;try{const _0x376584=document[_0x1bfaea(0x158)](_0x1bfaea(0x4cf)),_0x2e1e03=_0x376584[_0x1bfaea(0x468)][_0x1bfaea(0x3de)];if(!_0x2e1e03){showNotification(_0x1bfaea(0x34f),_0x1bfaea(0x240));return;}const _0x3ee614=document['getElementById']('edit-username'),_0x320c8d=document[_0x1bfaea(0x158)](_0x1bfaea(0x17f)),_0x274d60=document[_0x1bfaea(0x158)]('edit-wins'),_0x176611=document[_0x1bfaea(0x158)]('edit-losses'),_0x516d06=_0x3ee614[_0x1bfaea(0xdf)]['trim'](),_0x1593bd=parseInt(_0x320c8d[_0x1bfaea(0xdf)]),_0x1c42bd=parseInt(_0x274d60[_0x1bfaea(0xdf)]),_0x52a917=parseInt(_0x176611[_0x1bfaea(0xdf)]);if(!_0x516d06||isNaN(_0x1593bd)){showNotification(_0x1bfaea(0xe3),'error');return;}const _0x208ca7=currentLadder==='D1'?_0x1bfaea(0x20c):_0x1bfaea(0x223),_0x3be84a=doc(db,_0x208ca7,_0x2e1e03),_0x10845e=await getDoc(_0x3be84a),_0x1cbe59=_0x10845e[_0x1bfaea(0x2c3)]()?_0x10845e['data']():{},_0x3eeb80=_0x1cbe59[_0x1bfaea(0x2ca)]||0x4b0;await updateDoc(_0x3be84a,{'username':_0x516d06,'eloRating':_0x1593bd,'wins':_0x1c42bd||0x0,'losses':_0x52a917||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x1bfaea(0x35b)]['email']});if(_0x1593bd!==_0x3eeb80){const _0x5cbbf7=currentLadder==='D1'?_0x1bfaea(0x197):_0x1bfaea(0x42f);await addDoc(collection(db,_0x5cbbf7),{'player':_0x516d06,'previousElo':_0x3eeb80,'newElo':_0x1593bd,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x1bfaea(0x35b)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x1bfaea(0x242),_0x1bfaea(0x350));}catch(_0x4c97ce){console[_0x1bfaea(0x240)](_0x1bfaea(0x4e5),_0x4c97ce),showNotification(_0x1bfaea(0x2ab)+_0x4c97ce[_0x1bfaea(0x2a8)],_0x1bfaea(0x240));}}function closeEditPlayerModal(){const _0x17eef2=a4_0xfdad8c,_0x56d9f6=document[_0x17eef2(0x158)](_0x17eef2(0x4cf));_0x56d9f6['classList']['remove'](_0x17eef2(0x20f)),_0x56d9f6['dataset'][_0x17eef2(0x3de)]='';}async function confirmDeletePlayer(_0x3d425a){const _0x1f28fd=a4_0xfdad8c;if(confirm(_0x1f28fd(0x3c1)))try{const _0x337115=currentLadder==='D1'?_0x1f28fd(0x20c):_0x1f28fd(0x223);await deleteDoc(doc(db,_0x337115,_0x3d425a)),loadPlayersData(),showNotification(_0x1f28fd(0x19a),_0x1f28fd(0x350));}catch(_0x1838b0){console['error'](_0x1f28fd(0x1fa),_0x1838b0),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x1838b0[_0x1f28fd(0x2a8)],'error');}}async function setupManagePlayersSection(){const _0x24dc6c=a4_0xfdad8c,_0x11aefa=document[_0x24dc6c(0x158)](_0x24dc6c(0x142));_0x11aefa&&_0x11aefa[_0x24dc6c(0x234)](_0x24dc6c(0x4ff),async _0x3cffd7=>{const _0x5e0fa5=_0x24dc6c;_0x3cffd7[_0x5e0fa5(0x18b)](),await addNewPlayer();});const _0x107b46=document[_0x24dc6c(0x158)](_0x24dc6c(0x430));_0x107b46&&_0x107b46[_0x24dc6c(0x234)](_0x24dc6c(0xa2),debounce(filterPlayerTable,0x12c));const _0x177a37=document['getElementById'](_0x24dc6c(0x344));_0x177a37&&_0x177a37['addEventListener'](_0x24dc6c(0x42d),saveEditedPlayer);const _0x159caf=document[_0x24dc6c(0x158)](_0x24dc6c(0x26e));_0x159caf&&_0x159caf['addEventListener'](_0x24dc6c(0x42d),closeEditPlayerModal);const _0x48d3bd=document['getElementById'](_0x24dc6c(0x4cf));_0x48d3bd&&_0x48d3bd[_0x24dc6c(0x234)]('click',_0x48bea7=>{const _0x5b9002=_0x24dc6c;_0x48bea7[_0x5b9002(0x138)]===_0x48d3bd&&closeEditPlayerModal();});const _0x424eff=document[_0x24dc6c(0x158)](_0x24dc6c(0xeb));_0x424eff&&_0x424eff[_0x24dc6c(0x234)](_0x24dc6c(0x467),()=>{const _0x264d24=_0x24dc6c;currentLadder=_0x424eff[_0x264d24(0xdf)],loadPlayersData();});}async function addNewPlayer(){const _0x3712c5=a4_0xfdad8c;try{const _0x38cc6b=document['getElementById']('new-player-username'),_0xbee6f9=document[_0x3712c5(0x158)](_0x3712c5(0x24c)),_0x31a688=_0x38cc6b[_0x3712c5(0xdf)][_0x3712c5(0x509)](),_0x3a7e8a=parseInt(_0xbee6f9[_0x3712c5(0xdf)])||0x4b0;if(!_0x31a688){alert(_0x3712c5(0x2e4));return;}console[_0x3712c5(0x4ca)]('Adding\x20player\x20'+_0x31a688+'\x20with\x20ELO\x20'+_0x3a7e8a+_0x3712c5(0x2cc)+currentLadder+_0x3712c5(0x46c));let _0x3c06fc=_0x3712c5(0x20c),_0x59ca38=_0x3712c5(0x197);if(currentLadder==='D2')_0x3c06fc='playersD2',_0x59ca38=_0x3712c5(0x42f);else currentLadder==='D3'&&(_0x3c06fc=_0x3712c5(0x3ef),_0x59ca38=_0x3712c5(0x3e1));const _0x2e83c4=query(collection(db,_0x3c06fc),where(_0x3712c5(0x517),'==',_0x31a688)),_0x130eac=await getDocs(_0x2e83c4);if(!_0x130eac[_0x3712c5(0x332)]){alert(_0x3712c5(0x233)+_0x31a688+'\x20already\x20exists\x20in\x20'+currentLadder+_0x3712c5(0x46c));return;}const _0x5843fb=auth[_0x3712c5(0x35b)],_0x6f4a8c={'username':_0x31a688,'eloRating':_0x3a7e8a,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x5843fb?_0x5843fb[_0x3712c5(0x206)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x3c06fc),_0x6f4a8c),await addDoc(collection(db,_0x59ca38),{'player':_0x31a688,'previousElo':0x4b0,'newElo':_0x3a7e8a,'timestamp':serverTimestamp(),'type':_0x3712c5(0x265),'placedBy':_0x5843fb?_0x5843fb[_0x3712c5(0x206)]:'admin','gameMode':currentLadder}),_0x38cc6b['value']='',_0xbee6f9[_0x3712c5(0xdf)]=_0x3712c5(0x490),alert('Player\x20'+_0x31a688+_0x3712c5(0x2df)+currentLadder+_0x3712c5(0x323)),loadPlayersData();}catch(_0x31ecfd){console[_0x3712c5(0x240)]('Error\x20adding\x20player:',_0x31ecfd),alert('Error\x20adding\x20player:\x20'+_0x31ecfd['message']);}}document[a4_0xfdad8c(0x234)](a4_0xfdad8c(0x25e),()=>{const _0x1ed99c=a4_0xfdad8c,_0x1d83e8=document['getElementById']('add-player-form');_0x1d83e8&&_0x1d83e8[_0x1ed99c(0x234)](_0x1ed99c(0x4ff),_0x5cadd7=>{const _0x3e89c4=_0x1ed99c;_0x5cadd7[_0x3e89c4(0x18b)](),addNewPlayer();});});function filterPlayerTable(){const _0xe4b19d=a4_0xfdad8c,_0x56aa6b=document['getElementById'](_0xe4b19d(0x430))[_0xe4b19d(0xdf)][_0xe4b19d(0x338)](),_0xa156b5=document[_0xe4b19d(0x2d4)](_0xe4b19d(0x18c));let _0x5e9b70=0x0;_0xa156b5[_0xe4b19d(0x3b5)](_0x35dd59=>{const _0x5280bc=_0xe4b19d,_0x4e3ef6=_0x35dd59[_0x5280bc(0x30f)](_0x5280bc(0x32f))?.[_0x5280bc(0x3cb)][_0x5280bc(0x338)]()||'';_0x4e3ef6[_0x5280bc(0x4fb)](_0x56aa6b)?(_0x35dd59['style'][_0x5280bc(0x261)]='',_0x5e9b70++):_0x35dd59[_0x5280bc(0x229)]['display']=_0x5280bc(0x337);});const _0x38b37d=document['getElementById'](_0xe4b19d(0x17e));_0x38b37d&&(_0x5e9b70===0x0&&_0x56aa6b!==''?_0x38b37d['style']['display']=_0xe4b19d(0xb8):_0x38b37d[_0xe4b19d(0x229)]['display']=_0xe4b19d(0x337));}function debounce(_0x490535,_0x3cf458){let _0x52faf2;return function(..._0x32b7ea){clearTimeout(_0x52faf2),_0x52faf2=setTimeout(()=>_0x490535['apply'](this,_0x32b7ea),_0x3cf458);};}async function loadEloHistory(_0x17b08f=0x1){const _0x3de1da=a4_0xfdad8c,_0x6a0f7e=document[_0x3de1da(0x158)](_0x3de1da(0x29b)),_0xc5907a=currentLadder['toLowerCase']();if(!_0x6a0f7e)return;_0x6a0f7e[_0x3de1da(0x2d3)]=_0x3de1da(0x4be);try{const _0x284852=currentLadder==='D1'?_0x3de1da(0x197):currentLadder==='D2'?_0x3de1da(0x42f):_0x3de1da(0x3e1),_0x1ec3e5=collection(db,_0x284852);let _0x83a179;if(_0x17b08f>eloHistoryPagination[_0xc5907a][_0x3de1da(0x2ce)]&&eloHistoryPagination[_0xc5907a][_0x3de1da(0x113)])_0x83a179=query(_0x1ec3e5,orderBy(_0x3de1da(0x294),'desc'),startAfter(eloHistoryPagination[_0xc5907a][_0x3de1da(0x113)]),limit(PAGE_SIZE));else _0x17b08f<eloHistoryPagination[_0xc5907a][_0x3de1da(0x2ce)]&&eloHistoryPagination[_0xc5907a][_0x3de1da(0x191)]?_0x83a179=query(_0x1ec3e5,orderBy(_0x3de1da(0x294),_0x3de1da(0x4c7)),endBefore(eloHistoryPagination[_0xc5907a]['firstVisible']),limitToLast(PAGE_SIZE)):_0x83a179=query(_0x1ec3e5,orderBy(_0x3de1da(0x294),_0x3de1da(0x4c7)),limit(PAGE_SIZE));const _0x268ba7=await getDocs(_0x83a179);if(_0x268ba7[_0x3de1da(0x332)]){_0x6a0f7e[_0x3de1da(0x2d3)]=_0x3de1da(0x14c),document['getElementById'](_0xc5907a+_0x3de1da(0x121))[_0x3de1da(0x3cb)]='Page\x201';return;}eloHistoryPagination[_0xc5907a][_0x3de1da(0x2ce)]=_0x17b08f,eloHistoryPagination[_0xc5907a]['firstVisible']=_0x268ba7[_0x3de1da(0x371)][0x0],eloHistoryPagination[_0xc5907a]['lastVisible']=_0x268ba7[_0x3de1da(0x371)][_0x268ba7['docs']['length']-0x1];const _0x36bcf8=new Map();_0x6a0f7e[_0x3de1da(0x2d3)]='';const _0x277376=async _0x15bfd8=>{const _0x492a7d=_0x3de1da;if(typeof _0x15bfd8!==_0x492a7d(0x4c2)||_0x15bfd8[_0x492a7d(0x317)]<0x14||/[^a-zA-Z0-9-_]/[_0x492a7d(0x1ad)](_0x15bfd8))return _0x15bfd8;if(_0x36bcf8[_0x492a7d(0x2fb)](_0x15bfd8))return _0x36bcf8[_0x492a7d(0x357)](_0x15bfd8);try{for(const _0x38ae85 of[_0x492a7d(0x20c),_0x492a7d(0x223),_0x492a7d(0x3ef),'nonParticipants']){const _0x4a7df7=await getDoc(doc(db,_0x38ae85,_0x15bfd8));if(_0x4a7df7['exists']()&&_0x4a7df7[_0x492a7d(0x474)]()[_0x492a7d(0x517)]){const _0x4218e7=_0x4a7df7['data']()[_0x492a7d(0x517)];return _0x36bcf8[_0x492a7d(0x208)](_0x15bfd8,_0x4218e7),_0x4218e7;}}return _0x15bfd8;}catch(_0x3c9a8a){return console['warn'](_0x492a7d(0x479)+_0x15bfd8+':',_0x3c9a8a),_0x15bfd8;}};for(const _0x3be8f7 of _0x268ba7[_0x3de1da(0x371)]){const _0x38d278=_0x3be8f7[_0x3de1da(0x474)](),_0x4ddccb=document['createElement']('tr'),_0x5eb168=_0x38d278[_0x3de1da(0x294)]?new Date(_0x38d278[_0x3de1da(0x294)]['seconds']*0x3e8)[_0x3de1da(0xcc)]():_0x3de1da(0x2c1),_0x2df9fc=_0x38d278[_0x3de1da(0x4db)]-_0x38d278[_0x3de1da(0x4a8)],_0x279795=_0x2df9fc>0x0?_0x3de1da(0x271):_0x2df9fc<0x0?_0x3de1da(0x4b2):'',_0xd7d7fe=_0x2df9fc>0x0?'+':'',_0x186a96=_0x38d278[_0x3de1da(0x449)]||_0x38d278[_0x3de1da(0x517)]||_0x38d278['userId']||'N/A',_0x5e03eb=await _0x277376(_0x186a96);_0x4ddccb[_0x3de1da(0x2d3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x5eb168+_0x3de1da(0x3be)+_0x5e03eb+_0x3de1da(0x143)+(_0x38d278[_0x3de1da(0x4a8)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x38d278[_0x3de1da(0x4db)]||_0x3de1da(0x2c1))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x279795+'\x22>'+_0xd7d7fe+_0x2df9fc+_0x3de1da(0x4fa)+formatHistoryType(_0x38d278[_0x3de1da(0x10a)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x38d278['modifiedBy']||_0x38d278[_0x3de1da(0xec)]||_0x38d278['demotedBy']||_0x3de1da(0xe1))+_0x3de1da(0x2c6),_0x6a0f7e['appendChild'](_0x4ddccb);}document[_0x3de1da(0x158)](_0xc5907a+'-page-indicator')[_0x3de1da(0x3cb)]=_0x3de1da(0xe4)+_0x17b08f;const _0x216adf=document[_0x3de1da(0x158)](_0xc5907a+_0x3de1da(0x1ed)),_0x5bba0d=document['getElementById'](_0xc5907a+_0x3de1da(0x488));if(_0x216adf)_0x216adf[_0x3de1da(0x1b6)]=_0x17b08f<=0x1;const _0x181918=query(_0x1ec3e5,orderBy(_0x3de1da(0x294),_0x3de1da(0x4c7)),startAfter(eloHistoryPagination[_0xc5907a][_0x3de1da(0x113)]),limit(0x1)),_0x250aad=await getDocs(_0x181918);if(_0x5bba0d)_0x5bba0d[_0x3de1da(0x1b6)]=_0x250aad['empty'];}catch(_0x1fe6a9){console[_0x3de1da(0x240)](_0x3de1da(0x390),_0x1fe6a9),_0x6a0f7e['innerHTML']=_0x3de1da(0x34b)+_0x1fe6a9[_0x3de1da(0x2a8)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x1ad49f){const _0x557826=a4_0xfdad8c;switch(_0x1ad49f){case'match_result':return _0x557826(0x49e);case _0x557826(0x1c7):return _0x557826(0x2fc);case'demotion':return _0x557826(0x503);case _0x557826(0x24d):return _0x557826(0x1a3);case'initial_placement':return _0x557826(0x2c0);default:return _0x1ad49f||'Unknown';}}function setupEloHistorySection(){const _0x49d486=a4_0xfdad8c;document[_0x49d486(0x158)](_0x49d486(0x438))['addEventListener'](_0x49d486(0x42d),()=>{const _0x4d0974=_0x49d486;loadEloHistory(eloHistoryPagination['d1'][_0x4d0974(0x2ce)]-0x1);}),document[_0x49d486(0x158)](_0x49d486(0x2ee))[_0x49d486(0x234)](_0x49d486(0x42d),()=>{const _0x389b5f=_0x49d486;loadEloHistory(eloHistoryPagination['d1'][_0x389b5f(0x2ce)]+0x1);}),document['getElementById'](_0x49d486(0xee))[_0x49d486(0x234)](_0x49d486(0x42d),()=>{const _0x2d440c=_0x49d486;loadEloHistory(eloHistoryPagination['d2'][_0x2d440c(0x2ce)]-0x1);}),document[_0x49d486(0x158)](_0x49d486(0x19c))[_0x49d486(0x234)]('click',()=>{const _0x57a0dd=_0x49d486;loadEloHistory(eloHistoryPagination['d2'][_0x57a0dd(0x2ce)]+0x1);});const _0x26cfc0=document[_0x49d486(0x158)]('d3-prev-page'),_0x1e033f=document[_0x49d486(0x158)](_0x49d486(0x496));_0x26cfc0&&_0x26cfc0[_0x49d486(0x234)](_0x49d486(0x42d),()=>{const _0x2bc9a5=_0x49d486;loadEloHistory(eloHistoryPagination['d3'][_0x2bc9a5(0x2ce)]-0x1);});_0x1e033f&&_0x1e033f['addEventListener'](_0x49d486(0x42d),()=>{const _0x35ebc0=_0x49d486;loadEloHistory(eloHistoryPagination['d3'][_0x35ebc0(0x2ce)]+0x1);});const _0x1b29ec=document['getElementById'](_0x49d486(0x2f8));_0x1b29ec&&_0x1b29ec['addEventListener'](_0x49d486(0xa2),debounce(filterEloHistoryTable,0x12c));const _0x4e85f6=document['getElementById'](_0x49d486(0x21e));_0x4e85f6&&_0x4e85f6[_0x49d486(0x234)](_0x49d486(0x467),applyEloHistoryFilters);const _0x3484c1=document[_0x49d486(0x158)](_0x49d486(0x134));_0x3484c1&&_0x3484c1[_0x49d486(0x234)](_0x49d486(0x42d),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x1ed87f=a4_0xfdad8c,_0x2c032d=document[_0x1ed87f(0x158)]('elo-history-search')[_0x1ed87f(0xdf)][_0x1ed87f(0x338)](),_0x4c1ccb=document[_0x1ed87f(0x2d4)](_0x1ed87f(0x4ce));let _0x209d16=0x0;_0x4c1ccb['forEach'](_0x5bffc3=>{const _0x3f8f97=_0x1ed87f;if(_0x5bffc3[_0x3f8f97(0x45f)][_0x3f8f97(0x3db)](_0x3f8f97(0x34c))||_0x5bffc3[_0x3f8f97(0x45f)][_0x3f8f97(0x3db)](_0x3f8f97(0x2a4))||_0x5bffc3[_0x3f8f97(0x45f)]['contains'](_0x3f8f97(0x25f)))return;const _0x405e51=_0x5bffc3['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0x2fe872=_0x5bffc3[_0x3f8f97(0x30f)]('.type')?.[_0x3f8f97(0x3cb)][_0x3f8f97(0x338)]()||'',_0x59416c=_0x5bffc3[_0x3f8f97(0x30f)](_0x3f8f97(0x33f))?.[_0x3f8f97(0x3cb)][_0x3f8f97(0x338)]()||'';_0x405e51[_0x3f8f97(0x4fb)](_0x2c032d)||_0x2fe872['includes'](_0x2c032d)||_0x59416c[_0x3f8f97(0x4fb)](_0x2c032d)?(_0x5bffc3[_0x3f8f97(0x229)][_0x3f8f97(0x261)]='',_0x209d16++):_0x5bffc3['style'][_0x3f8f97(0x261)]=_0x3f8f97(0x337);});}async function applyEloHistoryFilters(){const _0x2db476=a4_0xfdad8c,_0x634189=document[_0x2db476(0x158)]('history-start-date')[_0x2db476(0xdf)],_0x450a35=document[_0x2db476(0x158)](_0x2db476(0x43f))[_0x2db476(0xdf)],_0x1385a0=document['getElementById']('history-type-filter')['value'],_0x42cc45=currentLadder['toLowerCase']();eloHistoryPagination[_0x42cc45]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x39ab30=document[_0x2db476(0x158)]('elo-history-table-body');_0x39ab30['innerHTML']=_0x2db476(0x32d);try{const _0x572244=currentLadder==='D1'?'eloHistory':_0x2db476(0x42f),_0x56af89=collection(db,_0x572244);let _0x122673=[orderBy(_0x2db476(0x294),_0x2db476(0x4c7))];if(_0x634189){const _0xb29d9d=new Date(_0x634189);_0xb29d9d[_0x2db476(0x1a7)](0x0,0x0,0x0,0x0),_0x122673[_0x2db476(0xbe)](where(_0x2db476(0x294),'>=',_0xb29d9d));}if(_0x450a35){const _0x2d9511=new Date(_0x450a35);_0x2d9511[_0x2db476(0x1a7)](0x17,0x3b,0x3b,0x3e7),_0x122673[_0x2db476(0xbe)](where(_0x2db476(0x294),'<=',_0x2d9511));}_0x1385a0&&_0x1385a0!==_0x2db476(0x30b)&&_0x122673['push'](where(_0x2db476(0x10a),'==',_0x1385a0));_0x122673['push'](limit(PAGE_SIZE));const _0xede4e8=query(_0x56af89,..._0x122673),_0x22f26a=await getDocs(_0xede4e8);!_0x22f26a[_0x2db476(0x332)]&&(eloHistoryPagination[_0x42cc45]['firstVisible']=_0x22f26a[_0x2db476(0x371)][0x0],eloHistoryPagination[_0x42cc45][_0x2db476(0x113)]=_0x22f26a['docs'][_0x22f26a[_0x2db476(0x371)]['length']-0x1]);_0x39ab30[_0x2db476(0x2d3)]='';if(_0x22f26a['empty']){_0x39ab30[_0x2db476(0x2d3)]=_0x2db476(0x167);return;}_0x22f26a[_0x2db476(0x3b5)](_0x4ca4b1=>{const _0xcdea19=_0x2db476,_0x5befa7=_0x4ca4b1[_0xcdea19(0x474)](),_0x5cdfff=document[_0xcdea19(0x156)]('tr'),_0x31eca1=_0x5befa7[_0xcdea19(0x294)]?new Date(_0x5befa7[_0xcdea19(0x294)][_0xcdea19(0x3a5)]*0x3e8)[_0xcdea19(0xcc)]():_0xcdea19(0x2c1),_0x12ddcb=_0x5befa7[_0xcdea19(0x4db)]-_0x5befa7[_0xcdea19(0x4a8)],_0x2ef63a=_0x12ddcb>0x0?'positive-change':_0x12ddcb<0x0?'negative-change':'',_0x5c540d=_0x12ddcb>0x0?'+':'',_0x3d1457=_0x5befa7[_0xcdea19(0x449)]||_0x5befa7[_0xcdea19(0x517)]||_0x5befa7['userId']||_0xcdea19(0x2c1);_0x5cdfff[_0xcdea19(0x2d3)]=_0xcdea19(0xa9)+_0x31eca1+_0xcdea19(0x3be)+_0x3d1457+_0xcdea19(0x143)+(_0x5befa7[_0xcdea19(0x4a8)]||_0xcdea19(0x2c1))+_0xcdea19(0x26a)+(_0x5befa7['newElo']||_0xcdea19(0x2c1))+_0xcdea19(0x487)+_0x2ef63a+'\x22>'+_0x5c540d+_0x12ddcb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x5befa7[_0xcdea19(0x10a)])+_0xcdea19(0x2a7)+(_0x5befa7['modifiedBy']||_0x5befa7[_0xcdea19(0xec)]||_0x5befa7[_0xcdea19(0x122)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x39ab30[_0xcdea19(0x136)](_0x5cdfff);}),document[_0x2db476(0x158)](_0x42cc45+_0x2db476(0x121))[_0x2db476(0x3cb)]=_0x2db476(0xc9);}catch(_0x52e685){console[_0x2db476(0x240)]('Error\x20applying\x20filters:',_0x52e685),_0x39ab30[_0x2db476(0x2d3)]=_0x2db476(0x4a5)+_0x52e685[_0x2db476(0x2a8)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x10eb84=a4_0xfdad8c;document[_0x10eb84(0x158)](_0x10eb84(0x26d))[_0x10eb84(0xdf)]='',document[_0x10eb84(0x158)](_0x10eb84(0x43f))[_0x10eb84(0xdf)]='',document[_0x10eb84(0x158)]('history-type-filter')[_0x10eb84(0xdf)]=_0x10eb84(0x30b),document[_0x10eb84(0x158)](_0x10eb84(0x2f8))['value']='';const _0x3833e2=currentLadder[_0x10eb84(0x338)]();eloHistoryPagination[_0x3833e2]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x2fdb11=a4_0xfdad8c,_0x7efcc=document[_0x2fdb11(0x158)](_0x2fdb11(0x403)),_0x56705f=document[_0x2fdb11(0x158)](_0x2fdb11(0x44f)),_0x562d93=document[_0x2fdb11(0x158)](_0x2fdb11(0x2e2));_0x7efcc&&_0x56705f&&_0x562d93&&(_0x7efcc[_0x2fdb11(0x234)](_0x2fdb11(0x42d),()=>{const _0xfb0278=_0x2fdb11;_0x56705f['classList'][_0xfb0278(0x486)](_0xfb0278(0x20f));}),_0x56705f['addEventListener']('click',_0x3765de=>{const _0x82fb46=_0x2fdb11;_0x3765de[_0x82fb46(0x138)]===_0x56705f&&_0x56705f[_0x82fb46(0x45f)][_0x82fb46(0x3e9)]('active');}),_0x562d93[_0x2fdb11(0x234)](_0x2fdb11(0x4ff),async _0x49a74f=>{const _0x1d15f4=_0x2fdb11;_0x49a74f['preventDefault']();const _0x231ab6=document[_0x1d15f4(0x158)](_0x1d15f4(0x166)),_0x3d05a7=document[_0x1d15f4(0x158)](_0x1d15f4(0x1e7)),_0x243dd6=_0x231ab6[_0x1d15f4(0xdf)][_0x1d15f4(0x509)](),_0x54e97e=_0x3d05a7['value'];if(!_0x243dd6){showNotification(_0x1d15f4(0x246),_0x1d15f4(0x240));return;}try{await promotePlayer(_0x243dd6,_0x54e97e),_0x56705f['classList'][_0x1d15f4(0x3e9)](_0x1d15f4(0x20f)),_0x231ab6[_0x1d15f4(0xdf)]='';}catch(_0x14d8cc){showNotification(_0x14d8cc['message'],_0x1d15f4(0x240));}}),document[_0x2fdb11(0x158)](_0x2fdb11(0x38e))[_0x2fdb11(0x234)](_0x2fdb11(0x42d),()=>{const _0x547314=_0x2fdb11;_0x56705f[_0x547314(0x45f)][_0x547314(0x3e9)]('active');}));const _0x174e06=document['getElementById']('demote-player-btn'),_0x1cb201=document[_0x2fdb11(0x158)](_0x2fdb11(0x22b)),_0x261f4a=document['getElementById']('demote-form');_0x174e06&&_0x1cb201&&_0x261f4a&&(_0x174e06[_0x2fdb11(0x234)](_0x2fdb11(0x42d),()=>{const _0x30e4de=_0x2fdb11;_0x1cb201[_0x30e4de(0x45f)][_0x30e4de(0x486)](_0x30e4de(0x20f));}),_0x1cb201['addEventListener']('click',_0x1fccb0=>{const _0xdf3dd4=_0x2fdb11;_0x1fccb0[_0xdf3dd4(0x138)]===_0x1cb201&&_0x1cb201[_0xdf3dd4(0x45f)][_0xdf3dd4(0x3e9)](_0xdf3dd4(0x20f));}),_0x261f4a[_0x2fdb11(0x234)](_0x2fdb11(0x4ff),async _0x41d9d2=>{const _0x317fef=_0x2fdb11;_0x41d9d2[_0x317fef(0x18b)]();const _0x21414f=document[_0x317fef(0x158)]('demote-username'),_0xfb6404=document[_0x317fef(0x158)](_0x317fef(0x12c)),_0x3393c9=_0x21414f[_0x317fef(0xdf)][_0x317fef(0x509)](),_0xa7c7a4=_0xfb6404['value'];if(!_0x3393c9){alert(_0x317fef(0x246));return;}try{await demotePlayer(_0x3393c9,_0xa7c7a4),document['getElementById'](_0x317fef(0x22b))[_0x317fef(0x45f)][_0x317fef(0x3e9)]('active'),document['getElementById'](_0x317fef(0x27b))[_0x317fef(0xdf)]='';}catch(_0x219cab){console['error'](_0x317fef(0xc4),_0x219cab);}}));const _0x527f01=document['getElementById'](_0x2fdb11(0x3b7)),_0x5179cf=document[_0x2fdb11(0x158)](_0x2fdb11(0x34d)),_0x4ab879=document[_0x2fdb11(0x158)](_0x2fdb11(0x14d));_0x527f01&&_0x5179cf&&_0x4ab879&&(_0x527f01[_0x2fdb11(0x234)](_0x2fdb11(0x42d),()=>{const _0x29dede=_0x2fdb11;_0x5179cf[_0x29dede(0x45f)][_0x29dede(0x486)](_0x29dede(0x20f));}),_0x5179cf[_0x2fdb11(0x234)](_0x2fdb11(0x42d),_0x5ba600=>{const _0x4d4199=_0x2fdb11;_0x5ba600['target']===_0x5179cf&&_0x5179cf['classList'][_0x4d4199(0x3e9)](_0x4d4199(0x20f));}),_0x4ab879[_0x2fdb11(0x234)](_0x2fdb11(0x4ff),async _0x2f857f=>{const _0x7010a6=_0x2fdb11;_0x2f857f[_0x7010a6(0x18b)]();const _0x161fb8=document[_0x7010a6(0x158)](_0x7010a6(0x4ba)),_0x458945=document[_0x7010a6(0x158)](_0x7010a6(0x3ff));let _0x5d4e8a;const _0x35d2dc=document[_0x7010a6(0x158)](_0x7010a6(0x12b)),_0x343769=document['querySelector'](_0x7010a6(0x198));if(_0x35d2dc)_0x5d4e8a=_0x35d2dc[_0x7010a6(0xdf)];else _0x343769?_0x5d4e8a=_0x343769['value']:_0x5d4e8a='D1';if(!_0x161fb8||!_0x458945){showNotification('Form\x20elements\x20are\x20missing',_0x7010a6(0x240));return;}const _0x4196aa=_0x161fb8[_0x7010a6(0xdf)][_0x7010a6(0x509)](),_0x4ab255=parseInt(_0x458945[_0x7010a6(0xdf)]);if(!_0x4196aa||isNaN(_0x4ab255)){showNotification(_0x7010a6(0xe3),'error');return;}try{await setCustomElo(_0x4196aa,_0x4ab255,_0x5d4e8a),_0x5179cf[_0x7010a6(0x45f)][_0x7010a6(0x3e9)](_0x7010a6(0x20f)),_0x161fb8['value']='',_0x458945[_0x7010a6(0xdf)]='';}catch(_0x1743c4){showNotification(_0x1743c4['message'],_0x7010a6(0x240));}}),document[_0x2fdb11(0x158)](_0x2fdb11(0x103))[_0x2fdb11(0x234)](_0x2fdb11(0x42d),()=>{const _0xe6de82=_0x2fdb11;_0x5179cf['classList'][_0xe6de82(0x3e9)](_0xe6de82(0x20f));}));const _0x1256db=document[_0x2fdb11(0x158)](_0x2fdb11(0x172)),_0x4e9617=document[_0x2fdb11(0x158)](_0x2fdb11(0x2d0));if(_0x1256db&&_0x4e9617){_0x1256db['addEventListener'](_0x2fdb11(0x42d),_0x8d8ae9=>{_0x8d8ae9['target']===_0x1256db&&closeModalHandler();}),_0x4e9617[_0x2fdb11(0x234)]('submit',async _0x52a2d7=>{const _0x37aa4f=_0x2fdb11;_0x52a2d7[_0x37aa4f(0x18b)]();const _0x1e29db=document['getElementById']('role-username'),_0x3b352d=document[_0x37aa4f(0x158)](_0x37aa4f(0x254)),_0x6b1913=document[_0x37aa4f(0x158)](_0x37aa4f(0x36e)),_0x6392d7=_0x1e29db[_0x37aa4f(0xdf)][_0x37aa4f(0x509)](),_0x1397bd=_0x3b352d['value']['trim'](),_0x245484=_0x6b1913['value'];if(!_0x6392d7){showNotification('Username\x20is\x20missing',_0x37aa4f(0x240));return;}try{await setUserRole(_0x6392d7,_0x1397bd,_0x245484),closeModalHandler(),loadUsersWithRoles();}catch(_0x3ed5da){}});const _0x39f361=document[_0x2fdb11(0x158)](_0x2fdb11(0x4f3));_0x39f361&&(_0x39f361[_0x2fdb11(0x152)]('click',closeModalHandler),_0x39f361[_0x2fdb11(0x234)](_0x2fdb11(0x42d),closeModalHandler));}}async function promotePlayer(_0xe6330f,_0xaeb294){const _0x5709a3=a4_0xfdad8c;try{console['log'](_0x5709a3(0x3b0)+_0xe6330f+'\x20in\x20'+_0xaeb294+'\x20ladder');const _0x1f044b=auth[_0x5709a3(0x35b)];if(!_0x1f044b)throw new Error(_0x5709a3(0x15f));const _0x1772cc=_0xaeb294==='D2'?_0x5709a3(0x223):_0x5709a3(0x20c),_0x4d0018=_0xaeb294==='D2'?_0x5709a3(0x42f):'eloHistory';console[_0x5709a3(0x4ca)](_0x5709a3(0x203)+_0x1772cc);const _0x2ec563=collection(db,_0x1772cc),_0x1644bb=query(_0x2ec563,where('username','==',_0xe6330f)),_0x331344=await getDocs(_0x1644bb);if(_0x331344['empty']){alert(_0x5709a3(0x2cd)+_0xaeb294+_0x5709a3(0x46c));throw new Error(_0x5709a3(0x2cd)+_0xaeb294+_0x5709a3(0x46c));}const _0x18de26=_0x331344[_0x5709a3(0x371)][0x0],_0x5d5f7d=_0x18de26['data'](),_0x368816=_0x5d5f7d[_0x5709a3(0x2ca)]||0x4b0,_0x3332ec=_0x18de26['id'];console[_0x5709a3(0x4ca)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x368816);const _0x5b5a5b=[{'name':'Bronze','elo':0x578},{'name':_0x5709a3(0x1b2),'elo':0x640},{'name':_0x5709a3(0x2a3),'elo':0x708},{'name':_0x5709a3(0x4c5),'elo':0x7d0}];let _0xf0f4c5=_0x5b5a5b['find'](_0x115e70=>_0x115e70['elo']>_0x368816);if(!_0xf0f4c5){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0xaeb294+'\x20ladder');throw new Error(_0x5709a3(0x299)+_0xaeb294+'\x20ladder');}console[_0x5709a3(0x4ca)](_0x5709a3(0x2e7)+_0xf0f4c5['name']+'\x20('+_0xf0f4c5[_0x5709a3(0x1bc)]+')'),await updateDoc(doc(db,_0x1772cc,_0x18de26['id']),{'eloRating':_0xf0f4c5[_0x5709a3(0x1bc)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x1f044b[_0x5709a3(0x206)]||_0x5709a3(0x256)}),await addDoc(collection(db,_0x4d0018),{'player':_0xe6330f,'previousElo':_0x368816,'newElo':_0xf0f4c5[_0x5709a3(0x1bc)],'timestamp':serverTimestamp(),'type':_0x5709a3(0x1c7),'rankAchieved':_0xf0f4c5[_0x5709a3(0x101)],'promotedBy':_0x1f044b['email']||_0x5709a3(0x256),'gameMode':_0xaeb294});try{const {promotionManager:_0x5ce4df}=await import('./promotions.js'),_0x599499=_0x5ce4df['getRankName'](_0x368816),_0x482698=_0xf0f4c5[_0x5709a3(0x101)];await _0x5ce4df[_0x5709a3(0x2d5)](_0x3332ec,_0xe6330f,_0x368816,_0xf0f4c5[_0x5709a3(0x1bc)],_0x599499,_0x482698,_0x5709a3(0x1c7),{'displayName':_0xe6330f,'source':'admin','adminUser':_0x1f044b[_0x5709a3(0x206)],'ladder':_0xaeb294}),console[_0x5709a3(0x4ca)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x13fab0){console['error'](_0x5709a3(0x175),_0x13fab0);}return alert(_0x5709a3(0x418)+_0xe6330f+_0x5709a3(0x2cc)+_0xf0f4c5[_0x5709a3(0x101)]+'\x20('+_0xf0f4c5[_0x5709a3(0x1bc)]+')'),currentLadder===_0xaeb294&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x54f8a7){console[_0x5709a3(0x240)](_0x5709a3(0x231),_0x54f8a7),alert(_0x5709a3(0xd9)+_0x54f8a7[_0x5709a3(0x2a8)]);throw _0x54f8a7;}}document[a4_0xfdad8c(0x234)](a4_0xfdad8c(0x25e),()=>{const _0x33cad7=a4_0xfdad8c,_0x182357=document[_0x33cad7(0x158)]('promote-form');_0x182357&&_0x182357['addEventListener']('submit',async _0x1451bb=>{const _0x29a739=_0x33cad7;_0x1451bb[_0x29a739(0x18b)]();const _0x3231a5=document[_0x29a739(0x158)]('promote-username')[_0x29a739(0xdf)][_0x29a739(0x509)](),_0x5176e6=document[_0x29a739(0x30f)](_0x29a739(0x24f))[_0x29a739(0xdf)];if(!_0x3231a5){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x3231a5,_0x5176e6),document[_0x29a739(0x158)](_0x29a739(0x44f))[_0x29a739(0x45f)]['remove'](_0x29a739(0x20f)),document[_0x29a739(0x158)]('promote-username')[_0x29a739(0xdf)]='';}catch(_0x4fe3a4){console[_0x29a739(0x240)](_0x29a739(0xfe),_0x4fe3a4);}});});async function demotePlayer(_0x205803,_0x16c792){const _0x21c08a=a4_0xfdad8c;try{console[_0x21c08a(0x4ca)](_0x21c08a(0x1a8)+_0x205803+'\x20in\x20'+_0x16c792+_0x21c08a(0x46c));const _0x2e2904=auth[_0x21c08a(0x35b)];if(!_0x2e2904)throw new Error(_0x21c08a(0x15f));const _0x7abea7=_0x16c792==='D2'?_0x21c08a(0x223):_0x21c08a(0x20c),_0x5ba713=_0x16c792==='D2'?'eloHistoryD2':'eloHistory';console[_0x21c08a(0x4ca)](_0x21c08a(0x203)+_0x7abea7);const _0x5d8180=collection(db,_0x7abea7),_0x3fa0eb=query(_0x5d8180,where(_0x21c08a(0x517),'==',_0x205803)),_0x5194c6=await getDocs(_0x3fa0eb);if(_0x5194c6[_0x21c08a(0x332)]){alert(_0x21c08a(0x2cd)+_0x16c792+_0x21c08a(0x46c));throw new Error(_0x21c08a(0x2cd)+_0x16c792+_0x21c08a(0x46c));}const _0x39001b=_0x5194c6[_0x21c08a(0x371)][0x0],_0x14f3fa=_0x39001b[_0x21c08a(0x474)](),_0x459b9c=_0x14f3fa[_0x21c08a(0x2ca)]||0x4b0;console[_0x21c08a(0x4ca)](_0x21c08a(0x23b)+_0x459b9c);const _0x28dcf1=[{'name':_0x21c08a(0x2a3),'elo':0x708},{'name':_0x21c08a(0x1b2),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':_0x21c08a(0x417),'elo':0x4b0}];let _0xeb9de1=_0x28dcf1[_0x21c08a(0x3d8)](_0x28440f=>_0x28440f[_0x21c08a(0x1bc)]<_0x459b9c);if(!_0xeb9de1){alert(_0x21c08a(0x160)+_0x16c792+_0x21c08a(0x46c));throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x16c792+'\x20ladder');}console[_0x21c08a(0x4ca)](_0x21c08a(0x36c)+_0xeb9de1[_0x21c08a(0x101)]+'\x20('+_0xeb9de1[_0x21c08a(0x1bc)]+')'),await updateDoc(doc(db,_0x7abea7,_0x39001b['id']),{'eloRating':_0xeb9de1[_0x21c08a(0x1bc)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x2e2904[_0x21c08a(0x206)]||_0x21c08a(0x256)}),await addDoc(collection(db,_0x5ba713),{'player':_0x205803,'previousElo':_0x459b9c,'newElo':_0xeb9de1[_0x21c08a(0x1bc)],'timestamp':serverTimestamp(),'type':_0x21c08a(0xd0),'rankAchieved':_0xeb9de1[_0x21c08a(0x101)],'demotedBy':_0x2e2904[_0x21c08a(0x206)]||_0x21c08a(0x256),'gameMode':_0x16c792});try{const {promotionManager:_0x8430a}=await import(_0x21c08a(0x416)),_0x16ca46=_0x8430a[_0x21c08a(0x243)](_0x459b9c),_0x141114=_0xeb9de1[_0x21c08a(0x101)];await _0x8430a[_0x21c08a(0x2d5)](_0x39001b['id'],_0x205803,_0x459b9c,_0xeb9de1[_0x21c08a(0x1bc)],_0x16ca46,_0x141114,_0x21c08a(0xd0),{'displayName':_0x205803,'source':_0x21c08a(0x256),'adminUser':_0x2e2904[_0x21c08a(0x206)],'ladder':_0x16c792}),console['log'](_0x21c08a(0x13e));}catch(_0x5f1e73){console[_0x21c08a(0x240)](_0x21c08a(0x175),_0x5f1e73);}return alert(_0x21c08a(0xe5)+_0x205803+'\x20to\x20'+_0xeb9de1[_0x21c08a(0x101)]+'\x20('+_0xeb9de1[_0x21c08a(0x1bc)]+')'),currentLadder===_0x16c792&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5e2fb4){console[_0x21c08a(0x240)]('Error\x20demoting\x20player:',_0x5e2fb4),alert(_0x21c08a(0x207)+_0x5e2fb4[_0x21c08a(0x2a8)]);throw _0x5e2fb4;}}document[a4_0xfdad8c(0x234)](a4_0xfdad8c(0x25e),()=>{const _0x54f349=a4_0xfdad8c,_0xacb5d1=document[_0x54f349(0x158)](_0x54f349(0x3ad));_0xacb5d1&&_0xacb5d1['addEventListener']('submit',async _0x44e3d7=>{const _0x30a302=_0x54f349;_0x44e3d7[_0x30a302(0x18b)]();const _0x13994b=document[_0x30a302(0x158)](_0x30a302(0x27b))[_0x30a302(0xdf)]['trim'](),_0x40b852=document['querySelector'](_0x30a302(0x15d))[_0x30a302(0xdf)];if(!_0x13994b){alert(_0x30a302(0x246));return;}try{await demotePlayer(_0x13994b,_0x40b852),document[_0x30a302(0x158)](_0x30a302(0x22b))['classList'][_0x30a302(0x3e9)]('active'),document[_0x30a302(0x158)](_0x30a302(0x27b))[_0x30a302(0xdf)]='';}catch(_0x5de5c5){console[_0x30a302(0x240)]('Error\x20in\x20demotion:',_0x5de5c5);}});});async function setCustomElo(_0x190cad,_0x157f30,_0x2a9f41){const _0x41f7fb=a4_0xfdad8c;try{const _0x541478=auth[_0x41f7fb(0x35b)];if(!_0x541478||!isAdmin(_0x541478[_0x41f7fb(0x206)]))throw new Error(_0x41f7fb(0x312));const _0x36b789=_0x2a9f41==='D2'?'playersD2':_0x41f7fb(0x20c),_0x3af3a3=_0x2a9f41==='D2'?_0x41f7fb(0x42f):_0x41f7fb(0x197),_0x112425=collection(db,_0x36b789),_0x38f914=query(_0x112425,where(_0x41f7fb(0x517),'==',_0x190cad)),_0x44f40f=await getDocs(_0x38f914);if(_0x44f40f[_0x41f7fb(0x332)])throw new Error(_0x41f7fb(0x2cd)+_0x2a9f41+_0x41f7fb(0x46c));const _0x1b2e24=_0x44f40f[_0x41f7fb(0x371)][0x0],_0x112edd=_0x1b2e24[_0x41f7fb(0x474)](),_0x418e1e=_0x112edd[_0x41f7fb(0x2ca)]||0x4b0,_0x535ce6=writeBatch(db);_0x535ce6[_0x41f7fb(0x1eb)](doc(db,_0x36b789,_0x1b2e24['id']),{'eloRating':_0x157f30,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x541478[_0x41f7fb(0x206)]});const _0x37695e=doc(collection(db,_0x3af3a3));return _0x535ce6[_0x41f7fb(0x208)](_0x37695e,{'player':_0x190cad,'previousElo':_0x418e1e,'newElo':_0x157f30,'timestamp':serverTimestamp(),'type':_0x41f7fb(0x24d),'modifiedBy':_0x541478['email'],'gameMode':_0x2a9f41}),await _0x535ce6[_0x41f7fb(0x516)](),showNotification('ELO\x20rating\x20for\x20'+_0x190cad+'\x20was\x20updated\x20from\x20'+_0x418e1e+_0x41f7fb(0x2cc)+_0x157f30,_0x41f7fb(0x350)),currentLadder===_0x2a9f41&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2cae77){console['error'](_0x41f7fb(0x9f),_0x2cae77);throw _0x2cae77;}}async function setUserRole(_0x516340,_0x24e2f2,_0x33451f){const _0x268bb7=a4_0xfdad8c;try{const _0x70eb6a=auth[_0x268bb7(0x35b)];if(!_0x70eb6a||!isAdmin(_0x70eb6a[_0x268bb7(0x206)]))throw new Error(_0x268bb7(0x312));const _0x4340a1=_0x24e2f2?_0x24e2f2[_0x268bb7(0x509)]():null,_0x443e9e=_0x4340a1?_0x33451f||'#808080':null,[_0x39838d,_0x48a274]=await Promise[_0x268bb7(0x30b)]([getDocs(query(collection(db,_0x268bb7(0x20c)),where(_0x268bb7(0x517),'==',_0x516340))),getDocs(query(collection(db,_0x268bb7(0x223)),where(_0x268bb7(0x517),'==',_0x516340)))]),_0x316920=[];if(!_0x39838d[_0x268bb7(0x332)])_0x316920[_0x268bb7(0xbe)]({'ref':_0x39838d['docs'][0x0][_0x268bb7(0x10b)],'source':'D1'});if(!_0x48a274[_0x268bb7(0x332)])_0x316920[_0x268bb7(0xbe)]({'ref':_0x48a274[_0x268bb7(0x371)][0x0]['ref'],'source':'D2'});if(_0x316920[_0x268bb7(0x317)]===0x0){const [_0x2cfb73,_0x35e3ca]=await Promise[_0x268bb7(0x30b)]([getDocs(query(collection(db,_0x268bb7(0x287)),where(_0x268bb7(0x517),'==',_0x516340))),getDocs(query(collection(db,_0x268bb7(0xf9)),where('username','==',_0x516340)))]);if(!_0x2cfb73[_0x268bb7(0x332)])_0x316920[_0x268bb7(0xbe)]({'ref':_0x2cfb73[_0x268bb7(0x371)][0x0][_0x268bb7(0x10b)],'source':_0x268bb7(0x387)});if(!_0x35e3ca[_0x268bb7(0x332)])_0x316920[_0x268bb7(0xbe)]({'ref':_0x35e3ca[_0x268bb7(0x371)][0x0][_0x268bb7(0x10b)],'source':_0x268bb7(0x358)});}if(_0x316920[_0x268bb7(0x317)]===0x0)throw new Error(_0x268bb7(0x21f)+_0x516340+_0x268bb7(0x498));const _0x519c4f=writeBatch(db);_0x316920[_0x268bb7(0x3b5)](_0x2ee98d=>{const _0x4ba48f=_0x268bb7;console[_0x4ba48f(0x4ca)](_0x4ba48f(0x4d7)+_0x516340+_0x4ba48f(0x178)+_0x2ee98d[_0x4ba48f(0x354)]),!_0x4340a1?_0x519c4f['update'](_0x2ee98d[_0x4ba48f(0x10b)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x519c4f['update'](_0x2ee98d[_0x4ba48f(0x10b)],{'roleName':_0x4340a1,'roleColor':_0x443e9e,'roleAssignedBy':_0x70eb6a[_0x4ba48f(0x206)],'roleAssignedAt':serverTimestamp()});}),await _0x519c4f[_0x268bb7(0x516)]();const _0x583c77=_0x4340a1?_0x268bb7(0x480)+_0x4340a1+_0x268bb7(0x3f7):_0x268bb7(0xf1);return showNotification(_0x583c77+_0x268bb7(0x40f)+_0x516340+'\x22','success'),!![];}catch(_0x1c8b2b){console[_0x268bb7(0x240)](_0x268bb7(0x42a),_0x1c8b2b),showNotification(_0x268bb7(0x2fd)+_0x1c8b2b[_0x268bb7(0x2a8)],'error');throw _0x1c8b2b;}}function showNotification(_0x2e4fa3,_0x84c850=a4_0xfdad8c(0x447)){const _0x1ab5ed=a4_0xfdad8c,_0x3d0fea=document[_0x1ab5ed(0x156)](_0x1ab5ed(0x2cf));_0x3d0fea[_0x1ab5ed(0x50f)]='notification\x20'+_0x84c850,_0x3d0fea['innerHTML']=_0x1ab5ed(0x248)+getNotificationIcon(_0x84c850)+_0x1ab5ed(0x407)+_0x2e4fa3+_0x1ab5ed(0x328),document[_0x1ab5ed(0x33b)]['appendChild'](_0x3d0fea),setTimeout(()=>{const _0x28c3df=_0x1ab5ed;_0x3d0fea['classList'][_0x28c3df(0x486)](_0x28c3df(0x20f));},0xa);const _0x20977b=setTimeout(()=>{closeNotification(_0x3d0fea);},0x1388);_0x3d0fea['querySelector']('.close-notification')[_0x1ab5ed(0x234)](_0x1ab5ed(0x42d),()=>{clearTimeout(_0x20977b),closeNotification(_0x3d0fea);});}function getNotificationIcon(_0x2b364a){const _0x327a00=a4_0xfdad8c;switch(_0x2b364a){case _0x327a00(0x350):return _0x327a00(0x388);case'error':return _0x327a00(0x462);case'warning':return'fa-exclamation-triangle';case _0x327a00(0x447):default:return _0x327a00(0x336);}}function closeNotification(_0x50b003){const _0x2b8620=a4_0xfdad8c;_0x50b003[_0x2b8620(0x45f)]['remove']('active'),setTimeout(()=>{const _0x10618e=_0x2b8620;_0x50b003[_0x10618e(0x3e9)]();},0x12c);}function setupUserRolesSection(){const _0x568ca6=a4_0xfdad8c,_0x3060fe=document['getElementById']('load-users-data');_0x3060fe&&_0x3060fe[_0x568ca6(0x234)](_0x568ca6(0x42d),function(){const _0x3be174=_0x568ca6;this[_0x3be174(0x45f)][_0x3be174(0x486)]('loading'),this[_0x3be174(0x2d3)]=_0x3be174(0x497),loadUsersWithRoles()['then'](()=>{const _0x294a16=_0x3be174;this[_0x294a16(0x45f)][_0x294a16(0x3e9)](_0x294a16(0x2d1)),this[_0x294a16(0x2d3)]=_0x294a16(0x19b);})[_0x3be174(0x38c)](_0x579c1e=>{const _0x27eba5=_0x3be174;console[_0x27eba5(0x240)]('Error\x20loading\x20users:',_0x579c1e),this[_0x27eba5(0x45f)]['remove'](_0x27eba5(0x2d1)),this[_0x27eba5(0x2d3)]=_0x27eba5(0x2c5),setTimeout(()=>{const _0x398c66=_0x27eba5;this[_0x398c66(0x2d3)]=_0x398c66(0x19b);},0xbb8);});});const _0x3a0824=document[_0x568ca6(0x158)](_0x568ca6(0x49a));_0x3a0824&&_0x3a0824[_0x568ca6(0x234)](_0x568ca6(0x42d),()=>{const _0x56be96=_0x568ca6,_0x3614f5=document[_0x56be96(0x158)](_0x56be96(0x172));_0x3614f5&&_0x3614f5['classList'][_0x56be96(0x486)](_0x56be96(0x20f));});const _0x2ba6be=document['getElementById']('user-search');_0x2ba6be&&_0x2ba6be['addEventListener'](_0x568ca6(0xa2),debounce(filterUsersTable,0x12c));const _0x370d0a=document[_0x568ca6(0x158)](_0x568ca6(0x2bf));_0x370d0a&&_0x370d0a[_0x568ca6(0x234)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x208847=a4_0xfdad8c,_0x361ec7=document['getElementById']('users-table-body');if(!_0x361ec7)return;_0x361ec7['innerHTML']=_0x208847(0x39f);try{const [_0x2a89d7,_0x5b9c73,_0x26c141,_0x34bce7]=await Promise['all']([getDocs(collection(db,_0x208847(0x20c))),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x208847(0x287))),getDocs(collection(db,_0x208847(0xf9)))]),_0x267daa=new Map();function _0x1b4660(_0x212b8c,_0x517b10){_0x212b8c['forEach'](_0x5ed65d=>{const _0x1ec15c=a4_0x3da5,_0x40d0db=_0x5ed65d['data']();if(!_0x40d0db[_0x1ec15c(0x517)])return;if(!_0x267daa[_0x1ec15c(0x2fb)](_0x40d0db['username']))_0x267daa[_0x1ec15c(0x208)](_0x40d0db[_0x1ec15c(0x517)],{'username':_0x40d0db[_0x1ec15c(0x517)],'roleName':_0x40d0db[_0x1ec15c(0x510)]||null,'roleColor':_0x40d0db[_0x1ec15c(0xf8)]||null,'roleAssignedBy':_0x40d0db[_0x1ec15c(0x214)]||null,'roleAssignedAt':_0x40d0db[_0x1ec15c(0x305)]||null,'sources':[_0x517b10]});else{const _0x2604c7=_0x267daa[_0x1ec15c(0x357)](_0x40d0db['username']);_0x40d0db['roleName']&&(!_0x2604c7[_0x1ec15c(0x510)]||_0x517b10==='D1'||_0x517b10==='D2')&&(_0x2604c7[_0x1ec15c(0x510)]=_0x40d0db[_0x1ec15c(0x510)],_0x2604c7[_0x1ec15c(0xf8)]=_0x40d0db[_0x1ec15c(0xf8)],_0x2604c7[_0x1ec15c(0x214)]=_0x40d0db[_0x1ec15c(0x214)],_0x2604c7[_0x1ec15c(0x305)]=_0x40d0db[_0x1ec15c(0x305)]),!_0x2604c7['sources'][_0x1ec15c(0x4fb)](_0x517b10)&&_0x2604c7[_0x1ec15c(0x3c7)][_0x1ec15c(0xbe)](_0x517b10);}});}_0x1b4660(_0x2a89d7,'D1'),_0x1b4660(_0x5b9c73,'D2'),_0x1b4660(_0x26c141,_0x208847(0x4b7)),_0x1b4660(_0x34bce7,'Profile');const _0x320d98=Array[_0x208847(0x2bc)](_0x267daa[_0x208847(0x381)]())[_0x208847(0x4e9)]((_0x2ea6ab,_0x5a177d)=>_0x2ea6ab[_0x208847(0x517)][_0x208847(0x38a)](_0x5a177d[_0x208847(0x517)]));if(_0x320d98[_0x208847(0x317)]===0x0){_0x361ec7[_0x208847(0x2d3)]=_0x208847(0x2bb);return;}_0x361ec7['innerHTML']='',_0x320d98['forEach'](_0x5aacc4=>{const _0x65a074=_0x208847,_0xc9497f=document['createElement']('tr');_0xc9497f[_0x65a074(0x468)][_0x65a074(0x517)]=_0x5aacc4['username'],_0xc9497f[_0x65a074(0x468)][_0x65a074(0x510)]=_0x5aacc4['roleName']||'',_0xc9497f[_0x65a074(0x468)][_0x65a074(0xf8)]=_0x5aacc4[_0x65a074(0xf8)]||_0x65a074(0x4ad);const _0x17c91f=_0x5aacc4[_0x65a074(0x305)]?new Date(_0x5aacc4[_0x65a074(0x305)]['seconds']*0x3e8)[_0x65a074(0x23e)]():_0x65a074(0x2c1),_0x1a6146=_0x5aacc4[_0x65a074(0x510)]?_0x65a074(0xb4)+_0x5aacc4['roleColor']+_0x65a074(0x10e)+getContrastColor(_0x5aacc4['roleColor'])+_0x65a074(0x3a7)+_0x5aacc4[_0x65a074(0x510)]+'</span>':_0x65a074(0x295);_0xc9497f['innerHTML']=_0x65a074(0x3a4)+_0x5aacc4['username']+_0x65a074(0x4d2)+_0x5aacc4[_0x65a074(0x3c7)][_0x65a074(0x49b)](',\x20')+_0x65a074(0x435)+_0x1a6146+_0x65a074(0x285)+(_0x5aacc4[_0x65a074(0x214)]||_0x65a074(0x2c1))+_0x65a074(0x285)+_0x17c91f+_0x65a074(0x2a6)+_0x5aacc4[_0x65a074(0x517)]+_0x65a074(0x3dc)+(_0x5aacc4[_0x65a074(0x510)]?_0x65a074(0x3d5)+_0x5aacc4[_0x65a074(0x517)]+_0x65a074(0x499):'')+_0x65a074(0x2c6),_0x361ec7[_0x65a074(0x136)](_0xc9497f);}),document[_0x208847(0x2d4)]('.edit-role-btn')[_0x208847(0x3b5)](_0x5eb6d1=>{const _0x9121af=_0x208847;_0x5eb6d1[_0x9121af(0x234)](_0x9121af(0x42d),()=>{const _0x53bd6c=_0x9121af,_0x121b00=_0x5eb6d1[_0x53bd6c(0x468)][_0x53bd6c(0x517)];openRoleEditModal(_0x121b00);});}),document[_0x208847(0x2d4)](_0x208847(0x3ed))[_0x208847(0x3b5)](_0x4b1af0=>{const _0x6b0d59=_0x208847;_0x4b1af0[_0x6b0d59(0x234)](_0x6b0d59(0x42d),()=>{const _0x10a485=_0x6b0d59,_0x401195=_0x4b1af0[_0x10a485(0x468)][_0x10a485(0x517)];confirm(_0x10a485(0x2c7)+_0x401195+'?')&&setUserRole(_0x401195,null,null)[_0x10a485(0x4b8)](()=>loadUsersWithRoles())[_0x10a485(0x38c)](_0x1e728f=>console['error']('Error\x20removing\x20role:',_0x1e728f));});});}catch(_0x24860c){console['error'](_0x208847(0x26c),_0x24860c),_0x361ec7[_0x208847(0x2d3)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x101ec9){const _0x54eac1=a4_0xfdad8c;console[_0x54eac1(0x4ca)](_0x54eac1(0xb1),_0x101ec9);const _0x220c10=document[_0x54eac1(0x158)]('set-role-modal'),_0x248e5f=document[_0x54eac1(0x158)](_0x54eac1(0x190)),_0x10863c=document[_0x54eac1(0x158)](_0x54eac1(0x2d8));if(!_0x220c10){console['error'](_0x54eac1(0xc0)),alert(_0x54eac1(0x352));return;}console['log'](_0x54eac1(0x301),_0x220c10);_0x248e5f?(_0x248e5f[_0x54eac1(0xdf)]=_0x101ec9,console['log'](_0x54eac1(0x4d6)+_0x101ec9)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x42190b=document['querySelector'](_0x54eac1(0x209)+_0x101ec9+'\x22]');if(_0x42190b&&_0x10863c){const _0x14b30e=_0x42190b['dataset'][_0x54eac1(0x4a9)];_0x10863c[_0x54eac1(0xdf)]=_0x14b30e===_0x54eac1(0x337)?'':_0x14b30e,console[_0x54eac1(0x4ca)]('Role\x20select\x20set\x20to:\x20'+_0x10863c[_0x54eac1(0xdf)]+_0x54eac1(0x445)+_0x14b30e+')');}else{if(!_0x42190b)console[_0x54eac1(0x1bd)](_0x54eac1(0x20b)+_0x101ec9+_0x54eac1(0x409));if(!_0x10863c)console[_0x54eac1(0x1bd)](_0x54eac1(0x1b1));if(_0x10863c)_0x10863c[_0x54eac1(0xdf)]='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x220c10['classList'][_0x54eac1(0x486)]('active');const _0x126ce9=document[_0x54eac1(0x158)](_0x54eac1(0x4f3));_0x126ce9?(console[_0x54eac1(0x4ca)](_0x54eac1(0x3d3)),_0x126ce9[_0x54eac1(0x152)](_0x54eac1(0x42d),closeModalHandler),_0x126ce9[_0x54eac1(0x234)](_0x54eac1(0x42d),closeModalHandler)):console[_0x54eac1(0x1bd)](_0x54eac1(0x507)),console[_0x54eac1(0x4ca)](_0x54eac1(0x1c5)),_0x220c10['removeEventListener'](_0x54eac1(0x42d),closeModalBackgroundHandler),_0x220c10['addEventListener'](_0x54eac1(0x42d),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x18da80){const _0x4cc1e9=a4_0xfdad8c;_0x18da80[_0x4cc1e9(0x138)]===this&&closeModalHandler();}function closeModalHandler(){const _0x9a63e4=a4_0xfdad8c,_0x3063d1=document['getElementById']('set-role-modal');_0x3063d1&&(_0x3063d1['classList'][_0x9a63e4(0x3e9)](_0x9a63e4(0x20f)),_0x3063d1[_0x9a63e4(0x152)](_0x9a63e4(0x42d),closeModalBackgroundHandler));}function filterUsersTable(){const _0x9dd382=a4_0xfdad8c,_0x1a8c26=document[_0x9dd382(0x158)](_0x9dd382(0x2f9))?.[_0x9dd382(0xdf)]['toLowerCase']()||'',_0x12737c=document[_0x9dd382(0x158)]('role-filter')?.['value']||'all',_0x310909=document[_0x9dd382(0x2d4)](_0x9dd382(0x458));let _0x44fe92=0x0;_0x310909['forEach'](_0x8a759c=>{const _0x53eec3=_0x9dd382;if(_0x8a759c[_0x53eec3(0x30f)](_0x53eec3(0x1ef))||_0x8a759c[_0x53eec3(0x30f)](_0x53eec3(0x39b))||_0x8a759c[_0x53eec3(0x30f)]('.error-state'))return;const _0x4ecc43=_0x8a759c[_0x53eec3(0x468)]['username']?.[_0x53eec3(0x338)]()||'',_0x4244a5=_0x8a759c['dataset'][_0x53eec3(0x4a9)]||_0x53eec3(0x337),_0x2d3bb6=_0x4ecc43['includes'](_0x1a8c26),_0x681b80=_0x12737c==='all'||_0x4244a5===_0x12737c;_0x2d3bb6&&_0x681b80?(_0x8a759c[_0x53eec3(0x229)][_0x53eec3(0x261)]='',_0x44fe92++):_0x8a759c[_0x53eec3(0x229)][_0x53eec3(0x261)]='none';});if(_0x44fe92===0x0&&_0x310909['length']>0x0){const _0x343be0=document[_0x9dd382(0x158)](_0x9dd382(0x40b));if(_0x343be0){if(!_0x343be0[_0x9dd382(0x30f)]('.no-results')){const _0x3c36d8=document[_0x9dd382(0x156)]('tr');_0x3c36d8[_0x9dd382(0x45f)][_0x9dd382(0x486)](_0x9dd382(0x483)),_0x3c36d8[_0x9dd382(0x2d3)]='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x343be0[_0x9dd382(0x136)](_0x3c36d8);}}}else{const _0x526477=document[_0x9dd382(0x30f)]('.no-results');_0x526477&&_0x526477[_0x9dd382(0x3e9)]();}}function setupManageArticlesSection(){const _0x363c3d=a4_0xfdad8c,_0x572a9a=document[_0x363c3d(0x158)](_0x363c3d(0x494));_0x572a9a&&_0x572a9a[_0x363c3d(0x234)](_0x363c3d(0x42d),function(){const _0x4ee762=_0x363c3d;this['classList'][_0x4ee762(0x486)](_0x4ee762(0x2d1)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x442dd2=_0x4ee762;this['classList']['remove']('loading'),this[_0x442dd2(0x2d3)]=_0x442dd2(0x4e0);})[_0x4ee762(0x38c)](_0x341d73=>{const _0x1ad15a=_0x4ee762;console[_0x1ad15a(0x240)](_0x1ad15a(0x22e),_0x341d73),this[_0x1ad15a(0x45f)][_0x1ad15a(0x3e9)](_0x1ad15a(0x2d1)),this[_0x1ad15a(0x2d3)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1ad79a=_0x1ad15a;this[_0x1ad79a(0x2d3)]=_0x1ad79a(0x4e0);},0xbb8);});});const _0x252ff5=document['getElementById'](_0x363c3d(0x3af));_0x252ff5?(console[_0x363c3d(0x4ca)]('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x252ff5[_0x363c3d(0x229)][_0x363c3d(0x261)]=_0x363c3d(0xb8),_0x252ff5['addEventListener'](_0x363c3d(0x42d),()=>{openArticleModal();})):console[_0x363c3d(0x240)](_0x363c3d(0xd8));const _0x4df662=document[_0x363c3d(0x158)](_0x363c3d(0x469));_0x4df662&&_0x4df662[_0x363c3d(0x234)](_0x363c3d(0x4ff),_0x5cc9ab=>{const _0x1cef29=_0x363c3d;_0x5cc9ab[_0x1cef29(0x18b)](),saveArticle();});const _0x295e67=document[_0x363c3d(0x158)](_0x363c3d(0x3d0));_0x295e67&&_0x295e67[_0x363c3d(0x234)](_0x363c3d(0x42d),()=>{closeArticleModal();});const _0x5e045a=document[_0x363c3d(0x30f)](_0x363c3d(0x1a1));_0x5e045a&&_0x5e045a[_0x363c3d(0x234)](_0x363c3d(0x42d),()=>{closeArticleModal();});const _0x21126e=document[_0x363c3d(0x158)](_0x363c3d(0x35c));_0x21126e&&_0x21126e['addEventListener'](_0x363c3d(0x42d),_0x3539e2=>{_0x3539e2['target']===_0x21126e&&closeArticleModal();});}async function loadArticles(){const _0x980163=a4_0xfdad8c,_0x322d40=document[_0x980163(0x158)](_0x980163(0x343));if(!_0x322d40)return;_0x322d40[_0x980163(0x2d3)]=_0x980163(0x2e1);try{const _0x3bfd18=collection(db,_0x980163(0x453)),_0x28e8bf=query(_0x3bfd18,orderBy('createdAt','desc')),_0x2b176a=await getDocs(_0x28e8bf);if(_0x2b176a[_0x980163(0x332)]){_0x322d40[_0x980163(0x2d3)]=_0x980163(0x4f4);return;}_0x322d40[_0x980163(0x2d3)]='',_0x2b176a[_0x980163(0x3b5)](_0x40a1e1=>{const _0x1801f5=_0x980163,_0x209671=_0x40a1e1[_0x1801f5(0x474)](),_0x18d3ca=document[_0x1801f5(0x156)]('tr'),_0x456343=_0x209671[_0x1801f5(0xdd)]?new Date(_0x209671['createdAt'][_0x1801f5(0x3a5)]*0x3e8)['toLocaleString']():_0x1801f5(0x2c1);_0x18d3ca[_0x1801f5(0x2d3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x209671['title']||_0x1801f5(0x32e))+_0x1801f5(0x285)+(_0x209671[_0x1801f5(0xb6)]||_0x1801f5(0x1b8))+_0x1801f5(0x285)+_0x456343+_0x1801f5(0x1f7)+_0x40a1e1['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x40a1e1['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x322d40['appendChild'](_0x18d3ca);}),setupArticleActionButtons();}catch(_0x43cdfe){console[_0x980163(0x240)]('Error\x20loading\x20articles:',_0x43cdfe),_0x322d40[_0x980163(0x2d3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x43cdfe['message']+_0x980163(0x45d);}}function setupArticleActionButtons(){const _0x30d4aa=a4_0xfdad8c;document[_0x30d4aa(0x2d4)]('.edit-article-btn')['forEach'](_0xa6b6af=>{const _0x47ba96=_0x30d4aa;_0xa6b6af[_0x47ba96(0x234)]('click',async _0x11aa5e=>{const _0x55d5d1=_0x47ba96,_0xd49cb0=_0x11aa5e['currentTarget'][_0x55d5d1(0x468)]['id'];openArticleModal(_0xd49cb0);});}),document[_0x30d4aa(0x2d4)](_0x30d4aa(0x3bd))[_0x30d4aa(0x3b5)](_0x188393=>{const _0x24fbbf=_0x30d4aa;_0x188393[_0x24fbbf(0x234)](_0x24fbbf(0x42d),async _0x4bc388=>{const _0x3a6505=_0x4bc388['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x3a6505);});});}function openArticleModal(_0x53f67d=null){const _0x1ba521=a4_0xfdad8c,_0x3b5901=document[_0x1ba521(0x158)]('article-modal'),_0x50ea84=document[_0x1ba521(0x158)]('article-modal-title'),_0x556d19=document[_0x1ba521(0x158)]('article-form'),_0x1b9cca=document['getElementById'](_0x1ba521(0x37d));_0x556d19[_0x1ba521(0x255)](),_0x1b9cca[_0x1ba521(0xdf)]='';if(_0x53f67d)_0x50ea84['textContent']='Edit\x20Article',_0x1b9cca['value']=_0x53f67d,loadArticleData(_0x53f67d);else{_0x50ea84['textContent']=_0x1ba521(0x4a4);const _0x1e7d2a=auth['currentUser'];if(_0x1e7d2a){const _0x4f0b62=document['getElementById'](_0x1ba521(0x3ec));if(_0x4f0b62&&_0x1e7d2a[_0x1ba521(0xc6)])_0x4f0b62['value']=_0x1e7d2a['displayName'];else _0x4f0b62&&(_0x4f0b62[_0x1ba521(0xdf)]=_0x1e7d2a[_0x1ba521(0x206)]);}}_0x3b5901['classList']['add'](_0x1ba521(0x20f));}async function loadArticleData(_0x19130c){const _0x49db04=a4_0xfdad8c;try{const _0x21c593=doc(db,_0x49db04(0x453),_0x19130c),_0x5ca6f1=await getDoc(_0x21c593);if(!_0x5ca6f1[_0x49db04(0x2c3)]()){showNotification(_0x49db04(0x263),'error');return;}const _0x367c08=_0x5ca6f1[_0x49db04(0x474)]();document[_0x49db04(0x158)](_0x49db04(0x351))[_0x49db04(0xdf)]=_0x367c08[_0x49db04(0x443)]||'',document[_0x49db04(0x158)](_0x49db04(0x3ec))[_0x49db04(0xdf)]=_0x367c08[_0x49db04(0xb6)]||'',document['getElementById'](_0x49db04(0x3f6))[_0x49db04(0xdf)]=_0x367c08[_0x49db04(0x2fa)]||'',document[_0x49db04(0x158)]('article-content')[_0x49db04(0xdf)]=_0x367c08[_0x49db04(0x331)]||'';}catch(_0x2c7b3c){console[_0x49db04(0x240)](_0x49db04(0x2db),_0x2c7b3c),showNotification(_0x49db04(0x31d),_0x49db04(0x240));}}async function saveArticle(){const _0x321e17=a4_0xfdad8c;try{const _0x33251b=document['getElementById']('article-id')[_0x321e17(0xdf)],_0xa94094=document[_0x321e17(0x158)]('article-title')['value'][_0x321e17(0x509)](),_0x1e5c31=document[_0x321e17(0x158)](_0x321e17(0x3ec))[_0x321e17(0xdf)]['trim'](),_0x92f98e=document[_0x321e17(0x158)](_0x321e17(0x3f6))[_0x321e17(0xdf)]['trim'](),_0x50e1b8=document[_0x321e17(0x158)](_0x321e17(0x4d0))[_0x321e17(0xdf)][_0x321e17(0x509)]();if(!_0xa94094||!_0x50e1b8){showNotification(_0x321e17(0x42e),_0x321e17(0x240));return;}const _0xb05cf9=auth[_0x321e17(0x35b)];if(!_0xb05cf9){showNotification(_0x321e17(0x325),_0x321e17(0x240));return;}const _0x4f90af={'title':_0xa94094,'author':_0x1e5c31,'imageUrl':_0x92f98e||null,'content':_0x50e1b8,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xb05cf9[_0x321e17(0x206)]};!_0x33251b?(_0x4f90af[_0x321e17(0xdd)]=serverTimestamp(),_0x4f90af[_0x321e17(0x2b2)]=_0xb05cf9[_0x321e17(0x206)],await addDoc(collection(db,_0x321e17(0x453)),_0x4f90af),showNotification(_0x321e17(0xe0),_0x321e17(0x350))):(await updateDoc(doc(db,_0x321e17(0x453),_0x33251b),_0x4f90af),showNotification(_0x321e17(0x4bc),'success')),closeArticleModal(),loadArticles();}catch(_0x526144){console[_0x321e17(0x240)]('Error\x20saving\x20article:',_0x526144),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x526144[_0x321e17(0x2a8)],_0x321e17(0x240));}}function closeArticleModal(){const _0x58d288=a4_0xfdad8c,_0xff636b=document[_0x58d288(0x158)](_0x58d288(0x35c));_0xff636b&&_0xff636b[_0x58d288(0x45f)][_0x58d288(0x3e9)]('active');}async function confirmDeleteArticle(_0x280e94){const _0x7c64a3=a4_0xfdad8c;if(confirm(_0x7c64a3(0x34e)))try{await deleteDoc(doc(db,_0x7c64a3(0x453),_0x280e94)),loadArticles(),showNotification(_0x7c64a3(0x155),_0x7c64a3(0x350));}catch(_0x3f7b83){console[_0x7c64a3(0x240)]('Error\x20deleting\x20article:',_0x3f7b83),showNotification(_0x7c64a3(0x245)+_0x3f7b83['message'],'error');}}function setupTrophyManagementSection(){const _0x1a88d8=a4_0xfdad8c,_0x368d8c=document[_0x1a88d8(0x158)](_0x1a88d8(0x10c));_0x368d8c&&_0x368d8c[_0x1a88d8(0x234)](_0x1a88d8(0x42d),function(){const _0x234ea2=_0x1a88d8;this['classList'][_0x234ea2(0x486)]('loading'),this[_0x234ea2(0x2d3)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x3791ce=document[_0x234ea2(0x158)]('assign-trophy-image');_0x3791ce&&(_0x3791ce[_0x234ea2(0x2b8)]=function(){const _0x308953=_0x234ea2;this[_0x308953(0x45b)]=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x266ec8=_0x234ea2;this['classList']['remove']('loading'),this[_0x266ec8(0x2d3)]=_0x266ec8(0x30d);})[_0x234ea2(0x38c)](_0x4f81f7=>{const _0x260899=_0x234ea2;console['error'](_0x260899(0x278),_0x4f81f7),this[_0x260899(0x45f)]['remove'](_0x260899(0x2d1)),this[_0x260899(0x2d3)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5337ea=_0x260899;this[_0x5337ea(0x2d3)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x416f53=document[_0x1a88d8(0x158)](_0x1a88d8(0x2d2));_0x416f53&&_0x416f53['addEventListener'](_0x1a88d8(0x42d),()=>{openTrophyModal();});const _0x414339=document[_0x1a88d8(0x158)](_0x1a88d8(0x359));_0x414339&&_0x414339[_0x1a88d8(0x234)]('submit',_0x2bec44=>{const _0x3f248a=_0x1a88d8;_0x2bec44[_0x3f248a(0x18b)](),saveTrophyDefinition();});const _0x49f706=document[_0x1a88d8(0x158)](_0x1a88d8(0x13a));_0x49f706&&_0x49f706['addEventListener'](_0x1a88d8(0x42d),()=>{closeTrophyModal();});document[_0x1a88d8(0x2d4)](_0x1a88d8(0x391))['forEach'](_0x591793=>{const _0xed25f7=_0x1a88d8;_0x591793[_0xed25f7(0x234)](_0xed25f7(0x42d),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x35684e=document['getElementById'](_0x1a88d8(0x48b));_0x35684e&&_0x35684e[_0x1a88d8(0x234)](_0x1a88d8(0x42d),_0x226250=>{const _0x34d06b=_0x1a88d8;_0x226250[_0x34d06b(0x138)]===_0x35684e&&closeTrophyModal();});const _0x966206=document[_0x1a88d8(0x158)](_0x1a88d8(0x39c));_0x966206&&_0x966206[_0x1a88d8(0x234)]('click',_0x157b3d=>{const _0x46059d=_0x1a88d8;_0x157b3d[_0x46059d(0x138)]===_0x966206&&closeAssignTrophyModal();});const _0x999f28=document[_0x1a88d8(0x158)](_0x1a88d8(0x505));_0x999f28&&_0x999f28[_0x1a88d8(0x234)]('submit',_0x25f514=>{_0x25f514['preventDefault'](),assignTrophyToPlayer();});const _0x56d3a3=document[_0x1a88d8(0x158)](_0x1a88d8(0x20e));_0x56d3a3&&_0x56d3a3['addEventListener'](_0x1a88d8(0x42d),()=>{closeAssignTrophyModal();});const _0x837099=document[_0x1a88d8(0x158)](_0x1a88d8(0x1d3));_0x837099&&(_0x837099[_0x1a88d8(0x234)](_0x1a88d8(0xa2),updateTrophyImagePreview),_0x837099[_0x1a88d8(0x234)](_0x1a88d8(0x1fd),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x3e2745=a4_0xfdad8c,_0x5eb0ee=document[_0x3e2745(0x158)]('trophy-image-url')[_0x3e2745(0xdf)][_0x3e2745(0x509)](),_0x26d7fc=document['getElementById'](_0x3e2745(0x2f0));if(!_0x26d7fc){const _0x261a51=document[_0x3e2745(0x158)](_0x3e2745(0x1d3))[_0x3e2745(0x413)](_0x3e2745(0xfc)),_0x4b41c7=document[_0x3e2745(0x156)](_0x3e2745(0x2cf));_0x4b41c7['id']=_0x3e2745(0x2f0),_0x4b41c7[_0x3e2745(0x50f)]=_0x3e2745(0x303),_0x261a51[_0x3e2745(0x136)](_0x4b41c7);const _0x25fb79=document[_0x3e2745(0x156)](_0x3e2745(0x3d6));_0x25fb79['id']='trophy-preview-img',_0x25fb79[_0x3e2745(0x3f1)]=_0x3e2745(0xcd),_0x25fb79[_0x3e2745(0x2b8)]=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x4b41c7[_0x3e2745(0x136)](_0x25fb79);}const _0x5650fc=document[_0x3e2745(0x158)](_0x3e2745(0x125));_0x5eb0ee?(_0x5650fc['src']=_0x5eb0ee,_0x5650fc[_0x3e2745(0x229)][_0x3e2745(0x261)]='block',_0x5650fc[_0x3e2745(0x45f)][_0x3e2745(0x3e9)]('error')):(_0x5650fc['src']=DEFAULT_TROPHY_IMAGE,_0x5650fc[_0x3e2745(0x229)][_0x3e2745(0x261)]='block');}async function loadTrophyDefinitions(){const _0x3f672f=a4_0xfdad8c,_0x26e6e3=document[_0x3f672f(0x158)](_0x3f672f(0x16a));if(!_0x26e6e3)return;_0x26e6e3['innerHTML']=_0x3f672f(0x32a);try{const _0x81e43f=collection(db,'trophyDefinitions'),_0xed99cd=query(_0x81e43f,orderBy(_0x3f672f(0xdd),_0x3f672f(0x4c7))),_0x5b459d=await getDocs(_0xed99cd);if(_0x5b459d[_0x3f672f(0x332)]){_0x26e6e3[_0x3f672f(0x2d3)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x26e6e3[_0x3f672f(0x2d3)]='',_0x5b459d[_0x3f672f(0x3b5)](_0x20a146=>{const _0x147d7a=_0x3f672f,_0x12440c=_0x20a146[_0x147d7a(0x474)](),_0x49c91d=document[_0x147d7a(0x156)]('tr'),_0x5040ad=_0x12440c['createdAt']?new Date(_0x12440c[_0x147d7a(0xdd)][_0x147d7a(0x3a5)]*0x3e8)[_0x147d7a(0xcc)]():_0x147d7a(0x2c1);_0x49c91d[_0x147d7a(0x2d3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x12440c['image']||DEFAULT_TROPHY_IMAGE)+_0x147d7a(0x450)+_0x12440c['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+_0x147d7a(0x489)+(_0x12440c[_0x147d7a(0x101)]||_0x147d7a(0xc7))+_0x147d7a(0x1a9)+(_0x12440c[_0x147d7a(0x4cc)]||_0x147d7a(0x3e0))+'\x22>'+(_0x12440c[_0x147d7a(0x4cc)]||_0x147d7a(0x3e0))+_0x147d7a(0x1ae)+_0x5040ad+_0x147d7a(0x110)+_0x20a146['id']+_0x147d7a(0x482)+_0x20a146['id']+_0x147d7a(0x372)+_0x20a146['id']+_0x147d7a(0xe7),_0x26e6e3[_0x147d7a(0x136)](_0x49c91d);}),setupTrophyActionButtons();}catch(_0x3fe43f){console['error'](_0x3f672f(0x4ab),_0x3fe43f),_0x26e6e3[_0x3f672f(0x2d3)]=_0x3f672f(0x28c)+_0x3fe43f[_0x3f672f(0x2a8)]+_0x3f672f(0x45d);}}function setupTrophyActionButtons(){const _0x20306d=a4_0xfdad8c;document[_0x20306d(0x2d4)](_0x20306d(0x2f3))[_0x20306d(0x3b5)](_0x4268c4=>{const _0x483f64=_0x20306d;_0x4268c4['addEventListener'](_0x483f64(0x42d),_0x3ef2ef=>{const _0x2bea5e=_0x483f64,_0x48117c=_0x3ef2ef[_0x2bea5e(0xb5)][_0x2bea5e(0x468)]['id'];openTrophyModal(_0x48117c);});}),document[_0x20306d(0x2d4)](_0x20306d(0x2ea))['forEach'](_0x142ffd=>{const _0x1bc864=_0x20306d;_0x142ffd['addEventListener'](_0x1bc864(0x42d),_0x482ed5=>{const _0x1988c9=_0x1bc864,_0x3eff67=_0x482ed5[_0x1988c9(0xb5)][_0x1988c9(0x468)]['id'];openAssignTrophyModal(_0x3eff67);});}),document[_0x20306d(0x2d4)]('.delete-trophy-btn')['forEach'](_0x4a75aa=>{_0x4a75aa['addEventListener']('click',_0x412ecf=>{const _0x1b0882=_0x412ecf['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x1b0882);});});}function openTrophyModal(_0x2c6700=null){const _0x4b3f58=a4_0xfdad8c,_0x25b1ad=document[_0x4b3f58(0x158)](_0x4b3f58(0x48b)),_0x21bcde=document[_0x4b3f58(0x158)](_0x4b3f58(0x400)),_0x39e0c9=document[_0x4b3f58(0x158)](_0x4b3f58(0x359)),_0x14975e=document[_0x4b3f58(0x158)](_0x4b3f58(0xc8));_0x39e0c9[_0x4b3f58(0x255)](),_0x14975e[_0x4b3f58(0xdf)]='';const _0x4e18de=document[_0x4b3f58(0x158)](_0x4b3f58(0x125));_0x4e18de&&(_0x4e18de[_0x4b3f58(0x45b)]=DEFAULT_TROPHY_IMAGE,_0x4e18de[_0x4b3f58(0x45f)][_0x4b3f58(0x3e9)](_0x4b3f58(0x240))),_0x2c6700?(_0x21bcde[_0x4b3f58(0x3cb)]=_0x4b3f58(0x151),_0x14975e[_0x4b3f58(0xdf)]=_0x2c6700,loadTrophyData(_0x2c6700)):_0x21bcde['textContent']=_0x4b3f58(0x44a),_0x25b1ad[_0x4b3f58(0x45f)]['add'](_0x4b3f58(0x20f));}async function loadTrophyData(_0x3480b1){const _0x47bbfc=a4_0xfdad8c;try{const _0x2a807e=doc(db,'trophyDefinitions',_0x3480b1),_0x3804eb=await getDoc(_0x2a807e);if(!_0x3804eb['exists']()){showNotification('Trophy\x20not\x20found',_0x47bbfc(0x240));return;}const _0x29abd6=_0x3804eb[_0x47bbfc(0x474)]();document[_0x47bbfc(0x158)](_0x47bbfc(0x27a))['value']=_0x29abd6[_0x47bbfc(0x101)]||'',document[_0x47bbfc(0x158)](_0x47bbfc(0xbd))['value']=_0x29abd6[_0x47bbfc(0x237)]||'',document['getElementById'](_0x47bbfc(0x1d3))['value']=_0x29abd6[_0x47bbfc(0x334)]||'',document['getElementById']('trophy-rarity')[_0x47bbfc(0xdf)]=_0x29abd6[_0x47bbfc(0x4cc)]||'common',updateTrophyImagePreview();}catch(_0x3c7f9d){console['error']('Error\x20loading\x20trophy\x20data:',_0x3c7f9d),showNotification(_0x47bbfc(0x320),'error');}}async function saveTrophyDefinition(){const _0x432016=a4_0xfdad8c;try{const _0x3ba2cc=document[_0x432016(0x158)](_0x432016(0xc8))['value'],_0x38f24e=document['getElementById']('trophy-name')[_0x432016(0xdf)][_0x432016(0x509)](),_0x46eb5f=document[_0x432016(0x158)](_0x432016(0xbd))[_0x432016(0xdf)][_0x432016(0x509)](),_0xc14c14=document[_0x432016(0x158)](_0x432016(0x1d3))[_0x432016(0xdf)][_0x432016(0x509)](),_0x4e3269=document[_0x432016(0x158)]('trophy-rarity')[_0x432016(0xdf)];if(!_0x38f24e||!_0x46eb5f||!_0xc14c14){showNotification(_0x432016(0xad),_0x432016(0x240));return;}const _0x6eebb6=auth[_0x432016(0x35b)];if(!_0x6eebb6){showNotification(_0x432016(0xa3),_0x432016(0x240));return;}const _0x350a5e={'name':_0x38f24e,'description':_0x46eb5f,'image':_0xc14c14,'rarity':_0x4e3269,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x6eebb6['email']};!_0x3ba2cc?(_0x350a5e[_0x432016(0xdd)]=serverTimestamp(),_0x350a5e[_0x432016(0x2b2)]=_0x6eebb6['email'],await addDoc(collection(db,_0x432016(0x13b)),_0x350a5e),showNotification(_0x432016(0x398),'success')):(await updateDoc(doc(db,_0x432016(0x13b),_0x3ba2cc),_0x350a5e),showNotification(_0x432016(0xb9),_0x432016(0x350))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x1f2db3){console[_0x432016(0x240)](_0x432016(0x3bc),_0x1f2db3),showNotification(_0x432016(0x4b9)+_0x1f2db3[_0x432016(0x2a8)],_0x432016(0x240));}}function closeTrophyModal(){const _0x36497d=a4_0xfdad8c,_0x36f038=document[_0x36497d(0x158)](_0x36497d(0x48b));_0x36f038&&_0x36f038['classList'][_0x36497d(0x3e9)]('active');}async function confirmDeleteTrophy(_0x548b81){const _0x422267=a4_0xfdad8c;if(!_0x548b81){console[_0x422267(0x240)]('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm(_0x422267(0x40d)))try{const _0x393b97=auth['currentUser'];if(!_0x393b97){showNotification(_0x422267(0x3ba),_0x422267(0x240));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x548b81),await deleteDoc(doc(db,'trophyDefinitions',_0x548b81)),showNotification(_0x422267(0x228),_0x422267(0x350)),loadTrophyDefinitions();}catch(_0x2f221f){console['error'](_0x422267(0x366),_0x2f221f),showNotification(_0x422267(0x310)+_0x2f221f[_0x422267(0x2a8)],_0x422267(0x240));}}async function openAssignTrophyModal(_0x582d49){const _0x401ffb=a4_0xfdad8c;try{const _0x37517b=doc(db,_0x401ffb(0x13b),_0x582d49),_0x182993=await getDoc(_0x37517b);if(!_0x182993[_0x401ffb(0x2c3)]()){showNotification(_0x401ffb(0x215),_0x401ffb(0x240));return;}const _0x2e7c39=_0x182993[_0x401ffb(0x474)]();document[_0x401ffb(0x158)]('assign-trophy-id')[_0x401ffb(0xdf)]=_0x582d49,document['getElementById'](_0x401ffb(0x4ea))[_0x401ffb(0xdf)]=_0x2e7c39[_0x401ffb(0x101)],document[_0x401ffb(0x158)](_0x401ffb(0x433))[_0x401ffb(0x45b)]=_0x2e7c39['image']||DEFAULT_TROPHY_IMAGE,document[_0x401ffb(0x158)](_0x401ffb(0x2ef))[_0x401ffb(0x3cb)]=_0x2e7c39[_0x401ffb(0x101)]||'Unnamed\x20Trophy',document[_0x401ffb(0x158)](_0x401ffb(0xa8))[_0x401ffb(0x3cb)]=_0x2e7c39[_0x401ffb(0x237)]||_0x401ffb(0x133);const _0x380b38=document[_0x401ffb(0x158)](_0x401ffb(0x283));_0x380b38['textContent']=_0x2e7c39[_0x401ffb(0x4cc)]||_0x401ffb(0x3e0),_0x380b38[_0x401ffb(0x50f)]=_0x401ffb(0x210)+(_0x2e7c39[_0x401ffb(0x4cc)]||'common');const _0x52cc5d=document[_0x401ffb(0x158)](_0x401ffb(0x39c));_0x52cc5d[_0x401ffb(0x45f)][_0x401ffb(0x486)](_0x401ffb(0x20f));}catch(_0x50623e){console[_0x401ffb(0x240)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x50623e),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x3c7079=a4_0xfdad8c,_0x48fa01=document[_0x3c7079(0x158)](_0x3c7079(0x39c));_0x48fa01&&_0x48fa01[_0x3c7079(0x45f)][_0x3c7079(0x3e9)](_0x3c7079(0x20f));}async function assignTrophyToPlayer(){const _0x47ddd2=a4_0xfdad8c;try{const _0x35aa68=document['getElementById'](_0x47ddd2(0x239))[_0x47ddd2(0xdf)],_0x9c3c42=document['getElementById'](_0x47ddd2(0x4ea))['value'],_0x571319=document['getElementById'](_0x47ddd2(0x4c6))[_0x47ddd2(0xdf)][_0x47ddd2(0x509)](),_0x1e1db3=document['querySelector'](_0x47ddd2(0x1c1))[_0x47ddd2(0xdf)];if(!_0x35aa68||!_0x571319){showNotification(_0x47ddd2(0x3dd),_0x47ddd2(0x240));return;}const _0xfad3dc=auth['currentUser'];if(!_0xfad3dc){showNotification(_0x47ddd2(0x484),_0x47ddd2(0x240));return;}let _0x32c4d5=null,_0x42eb00=null,_0x58fe3d=null;if(_0x1e1db3===_0x47ddd2(0x186)){const _0x3c7327=collection(db,'nonParticipants'),_0x8f00e0=query(_0x3c7327,where('username','==',_0x571319)),_0x1e0227=await getDocs(_0x8f00e0);!_0x1e0227[_0x47ddd2(0x332)]&&(_0x32c4d5=_0x1e0227[_0x47ddd2(0x371)][0x0],_0x42eb00=_0x32c4d5['id'],_0x58fe3d=_0x32c4d5['data']());}else{const _0x2dcb5a=_0x1e1db3==='D1'?_0x47ddd2(0x20c):_0x1e1db3==='D2'?_0x47ddd2(0x223):_0x47ddd2(0x3ef),_0x1e05b7=collection(db,_0x2dcb5a),_0x345dca=query(_0x1e05b7,where(_0x47ddd2(0x517),'==',_0x571319)),_0xd23978=await getDocs(_0x345dca);!_0xd23978[_0x47ddd2(0x332)]&&(_0x32c4d5=_0xd23978['docs'][0x0],_0x42eb00=_0x32c4d5['id'],_0x58fe3d=_0x32c4d5[_0x47ddd2(0x474)]());}if(!_0x32c4d5){showNotification(_0x47ddd2(0x50a)+_0x571319+'\x22\x20not\x20found\x20in\x20'+(_0x1e1db3===_0x47ddd2(0x186)?_0x47ddd2(0x40a):_0x1e1db3+_0x47ddd2(0x46c)),'error');return;}const _0x47c09c=collection(db,_0x47ddd2(0x2de)),_0x3eb1ae=query(_0x47c09c,where(_0x47ddd2(0x3c0),'==',_0x42eb00),where('trophyId','==',_0x35aa68)),_0x1e6606=await getDocs(_0x3eb1ae);if(!_0x1e6606[_0x47ddd2(0x332)]){showNotification('Player\x20\x22'+_0x571319+_0x47ddd2(0x506),_0x47ddd2(0x250));return;}await addDoc(collection(db,_0x47ddd2(0x2de)),{'userId':_0x42eb00,'playerUsername':_0x571319,'trophyId':_0x35aa68,'awardedAt':serverTimestamp(),'awardedBy':_0xfad3dc['email'],'ladder':_0x1e1db3}),showNotification(_0x47ddd2(0x269)+_0x9c3c42+'\x22\x20awarded\x20to\x20'+_0x571319,_0x47ddd2(0x350)),closeAssignTrophyModal();}catch(_0x20df31){console[_0x47ddd2(0x240)]('Error\x20assigning\x20trophy:',_0x20df31),showNotification(_0x47ddd2(0x33e)+_0x20df31['message'],'error');}}function setupInactivePlayersSection(){const _0x2fd387=a4_0xfdad8c,_0xb58725=document[_0x2fd387(0x158)](_0x2fd387(0x4f7));_0xb58725&&_0xb58725[_0x2fd387(0x234)]('change',function(){const _0x28fd31=_0x2fd387,_0x1aab3b=document[_0x28fd31(0x158)](_0x28fd31(0x513));if(_0x1aab3b)_0x1aab3b[_0x28fd31(0x42d)]();});const _0x26cb64=document['querySelector'](_0x2fd387(0x200)),_0x42f8dc=document[_0x2fd387(0x30f)](_0x2fd387(0x1d9));_0x26cb64&&_0x42f8dc&&(_0x26cb64[_0x2fd387(0x234)](_0x2fd387(0x467),function(){const _0x7ff116=_0x2fd387;if(this['checked']){currentLadder='D1';if(document[_0x7ff116(0x158)](_0x7ff116(0x4d5))[_0x7ff116(0x229)][_0x7ff116(0x261)]!==_0x7ff116(0x337)){const _0x2b95d8=document[_0x7ff116(0x158)](_0x7ff116(0x513));if(_0x2b95d8)_0x2b95d8[_0x7ff116(0x42d)]();}}}),_0x42f8dc['addEventListener'](_0x2fd387(0x467),function(){const _0xec44d7=_0x2fd387;if(this[_0xec44d7(0x267)]){currentLadder='D2';if(document[_0xec44d7(0x158)](_0xec44d7(0x4d5))['style'][_0xec44d7(0x261)]!==_0xec44d7(0x337)){const _0x111d9c=document[_0xec44d7(0x158)]('load-inactive-players-data');if(_0x111d9c)_0x111d9c[_0xec44d7(0x42d)]();}}}));const _0x2e0907=document['getElementById']('inactive-players-search');_0x2e0907&&_0x2e0907['addEventListener'](_0x2fd387(0xa2),debounce(function(){const _0xac12f5=_0x2fd387,_0x11ee25=_0x2e0907[_0xac12f5(0xdf)][_0xac12f5(0x338)](),_0x163985=document['querySelectorAll'](_0xac12f5(0x4f6));_0x163985[_0xac12f5(0x3b5)](_0x5e6260=>{const _0x2737b2=_0xac12f5;if(_0x5e6260[_0x2737b2(0x30f)](_0x2737b2(0x1ef))||_0x5e6260[_0x2737b2(0x30f)](_0x2737b2(0x39b))||_0x5e6260[_0x2737b2(0x30f)](_0x2737b2(0x304)))return;const _0xad4ac4=_0x5e6260['cells'][0x0]?.[_0x2737b2(0x3cb)][_0x2737b2(0x338)]()||'',_0x46da8c=_0x5e6260[_0x2737b2(0x1e8)][0x5]?.[_0x2737b2(0x3cb)][_0x2737b2(0x338)]()||'';_0xad4ac4[_0x2737b2(0x4fb)](_0x11ee25)||_0x46da8c['includes'](_0x11ee25)?_0x5e6260['style'][_0x2737b2(0x261)]='':_0x5e6260['style'][_0x2737b2(0x261)]='none';});},0x12c)),document[_0x2fd387(0x234)]('click',function(_0x190bd8){const _0x238ae7=_0x2fd387;if(_0x190bd8[_0x238ae7(0x138)][_0x238ae7(0x413)](_0x238ae7(0x109))){const _0x5abc3c=_0x190bd8[_0x238ae7(0x138)]['closest'](_0x238ae7(0x109)),_0xc9ed=_0x5abc3c[_0x238ae7(0x468)][_0x238ae7(0x517)];_0xc9ed&&alert('View\x20player\x20details\x20for\x20'+_0xc9ed+_0x238ae7(0x47b));}}),console[_0x2fd387(0x4ca)](_0x2fd387(0x19d));}async function loadInactivePlayersData(){const _0x5c0d6a=a4_0xfdad8c,_0x313ab7=document['getElementById']('inactive-players-table-body');if(!_0x313ab7)return;_0x313ab7[_0x5c0d6a(0x2d3)]=_0x5c0d6a(0x4f8);try{const _0x108be9=document[_0x5c0d6a(0x158)]('inactive-days-filter'),_0x5a4e8f=_0x108be9?parseInt(_0x108be9[_0x5c0d6a(0xdf)])||0x0:0x0,_0x394f1a=collection(db,currentLadder==='D1'?_0x5c0d6a(0x20c):'playersD2'),_0x176239=await getDocs(_0x394f1a);if(_0x176239[_0x5c0d6a(0x332)]){_0x313ab7['innerHTML']=_0x5c0d6a(0x22f);return;}const _0x535bff=[];_0x176239[_0x5c0d6a(0x3b5)](_0x550980=>{const _0x4e6230=_0x5c0d6a,_0x1e2f53=_0x550980[_0x4e6230(0x474)]();_0x535bff['push']({..._0x1e2f53,'id':_0x550980['id'],'username':_0x1e2f53[_0x4e6230(0x517)]||_0x4e6230(0x1af)});}),console[_0x5c0d6a(0x4ca)](_0x5c0d6a(0x2eb)+_0x535bff[_0x5c0d6a(0x317)]+_0x5c0d6a(0x4b1)+currentLadder+_0x5c0d6a(0x46c));const _0x4d3f35=currentLadder==='D1'?_0x5c0d6a(0x465):_0x5c0d6a(0x50b),_0x13a594=_0x535bff[_0x5c0d6a(0x502)](async _0x5df5c6=>{const _0x1cb153=_0x5c0d6a;try{const _0x507c72=collection(db,_0x4d3f35),_0x4a480f=query(_0x507c72,or(where(_0x1cb153(0x1de),'==',_0x5df5c6['username']),where(_0x1cb153(0x4cb),'==',_0x5df5c6[_0x1cb153(0x517)])),orderBy(_0x1cb153(0x463),'desc'),limit(0x1)),_0x44e2c2=await getDocs(_0x4a480f);if(!_0x44e2c2[_0x1cb153(0x332)]){const _0x21f32c=_0x44e2c2[_0x1cb153(0x371)][0x0][_0x1cb153(0x474)](),_0x601542=_0x21f32c['approvedAt']?new Date(_0x21f32c[_0x1cb153(0x463)][_0x1cb153(0x3a5)]*0x3e8):null,_0x15f38a=new Date(),_0x4f8351=_0x601542?Math['floor']((_0x15f38a-_0x601542)/(0x3e8*0x3c*0x3c*0x18)):null,_0x3cc277=_0x21f32c[_0x1cb153(0x1de)]===_0x5df5c6[_0x1cb153(0x517)]?_0x21f32c['loserUsername']:_0x21f32c[_0x1cb153(0x1de)],_0x5af5e1=_0x21f32c[_0x1cb153(0x1de)]===_0x5df5c6['username']?_0x1cb153(0x399):'Lost';return{..._0x5df5c6,'lastMatch':{'date':_0x601542?_0x601542[_0x1cb153(0x23e)]():_0x1cb153(0x2c1),'opponent':_0x3cc277||_0x1cb153(0x1b8),'result':_0x5af5e1,'timestamp':_0x601542||new Date(0x0),'daysSinceMatch':_0x4f8351||Number[_0x1cb153(0x194)]}};}else return{..._0x5df5c6,'lastMatch':{'date':_0x1cb153(0x2e9),'opponent':_0x1cb153(0x2c1),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x1cb153(0x194)]}};}catch(_0x2df1ca){return console[_0x1cb153(0x240)](_0x1cb153(0x1cc)+_0x5df5c6[_0x1cb153(0x517)]+':',_0x2df1ca),{..._0x5df5c6,'lastMatch':{'date':_0x1cb153(0x212),'opponent':_0x1cb153(0x212),'result':_0x1cb153(0x212),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x1c595=await Promise[_0x5c0d6a(0x30b)](_0x13a594);_0x1c595['sort']((_0xe0e0ca,_0x59bd15)=>_0x59bd15[_0x5c0d6a(0x1c4)][_0x5c0d6a(0x3c8)]-_0xe0e0ca[_0x5c0d6a(0x1c4)][_0x5c0d6a(0x3c8)]);_0x5a4e8f>0x0&&(_0x1c595=_0x1c595['filter'](_0x4e0f4e=>_0x4e0f4e[_0x5c0d6a(0x1c4)]['daysSinceMatch']>=_0x5a4e8f));_0x313ab7[_0x5c0d6a(0x2d3)]='';if(_0x1c595[_0x5c0d6a(0x317)]===0x0){_0x313ab7['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x1c595[_0x5c0d6a(0x3b5)](_0x1ff344=>{const _0xa4d1fb=_0x5c0d6a,_0x1b9c24=document[_0xa4d1fb(0x156)]('tr'),_0x18f175=_0x1ff344[_0xa4d1fb(0x1c4)]['daysSinceMatch']>0x1e?_0xa4d1fb(0x330):_0x1ff344[_0xa4d1fb(0x1c4)]['daysSinceMatch']>0xe?'moderately-inactive':'';_0x1b9c24[_0xa4d1fb(0x50f)]=_0x18f175,_0x1b9c24[_0xa4d1fb(0x2d3)]=_0xa4d1fb(0x3a4)+_0x1ff344[_0xa4d1fb(0x517)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1ff344['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1ff344[_0xa4d1fb(0x1c4)][_0xa4d1fb(0x43c)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1ff344[_0xa4d1fb(0x1c4)][_0xa4d1fb(0x3c8)]===Number[_0xa4d1fb(0x194)]?'N/A':_0x1ff344['lastMatch'][_0xa4d1fb(0x3c8)])+_0xa4d1fb(0x285)+currentLadder+_0xa4d1fb(0x285)+(_0x1ff344['lastMatch']['date']===_0xa4d1fb(0x2e9)?_0xa4d1fb(0x3e8):_0x1ff344[_0xa4d1fb(0x1c4)][_0xa4d1fb(0x1c9)]+_0xa4d1fb(0x3c9)+_0x1ff344[_0xa4d1fb(0x1c4)][_0xa4d1fb(0x12d)])+_0xa4d1fb(0x364)+_0x1ff344[_0xa4d1fb(0x517)]+_0xa4d1fb(0x147),_0x313ab7['appendChild'](_0x1b9c24);}),console['log'](_0x5c0d6a(0x3f0)+_0x1c595[_0x5c0d6a(0x317)]+_0x5c0d6a(0x4d3));}catch(_0x3130f9){console['error']('Error\x20loading\x20inactive\x20players:',_0x3130f9),_0x313ab7[_0x5c0d6a(0x2d3)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x3130f9[_0x5c0d6a(0x2a8)]+_0x5c0d6a(0x27f);}}function setupHighlightButtons(){const _0x36c43c=a4_0xfdad8c;console[_0x36c43c(0x4ca)](_0x36c43c(0x25c));const _0x30e1ad=document[_0x36c43c(0x158)](_0x36c43c(0x40e));_0x30e1ad&&_0x30e1ad[_0x36c43c(0x234)](_0x36c43c(0x42d),function(){const _0x258e31=_0x36c43c;console[_0x258e31(0x4ca)](_0x258e31(0x402)),openHighlightModal('match');});const _0x4a11e9=document[_0x36c43c(0x158)](_0x36c43c(0x324));_0x4a11e9&&_0x4a11e9['addEventListener'](_0x36c43c(0x42d),function(){const _0x362fd2=_0x36c43c;console[_0x362fd2(0x4ca)](_0x362fd2(0xf7)),openHighlightModal(_0x362fd2(0x165));});const _0x5a15ac=document['getElementById'](_0x36c43c(0x1c0));_0x5a15ac&&_0x5a15ac['addEventListener'](_0x36c43c(0x42d),function(){const _0x79ab80=_0x36c43c;console[_0x79ab80(0x4ca)](_0x79ab80(0x1dc)),openHighlightModal(_0x79ab80(0xf0));});}function openHighlightModal(_0x137c2f=a4_0xfdad8c(0x1e1)){const _0x31eb27=a4_0xfdad8c;console[_0x31eb27(0x4ca)](_0x31eb27(0x47e)+_0x137c2f);const _0xcb4e44=document['getElementById'](_0x31eb27(0x22a)),_0x9b0d10=document[_0x31eb27(0x158)]('highlight-form'),_0x335416=document[_0x31eb27(0x158)](_0x31eb27(0x22c)),_0x263729=document[_0x31eb27(0x158)](_0x31eb27(0x259));if(!_0xcb4e44||!_0x9b0d10||!_0x335416){console['error'](_0x31eb27(0x3b6));return;}_0x9b0d10[_0x31eb27(0x255)](),_0x263729['value']='';const _0x577adf=[_0x31eb27(0x1e1),'creator',_0x31eb27(0xf0)],_0x7df5bb=!_0x577adf[_0x31eb27(0x4fb)](_0x137c2f);if(_0x7df5bb){const _0x3b36a8=_0x137c2f;_0x263729[_0x31eb27(0xdf)]=_0x3b36a8,_0x335416[_0x31eb27(0x3cb)]=_0x31eb27(0x454),loadHighlightDataAdmin(_0x3b36a8);}else{const _0x2e4e97=_0x137c2f;document[_0x31eb27(0x158)](_0x31eb27(0x3f2))[_0x31eb27(0xdf)]=_0x2e4e97,_0x335416['textContent']=_0x31eb27(0x3d9)+getHighlightTypeName(_0x2e4e97),toggleHighlightFields(_0x2e4e97);const _0x2e1a7f=auth[_0x31eb27(0x35b)];_0x2e1a7f&&document['getElementById'](_0x31eb27(0x43d))&&(document[_0x31eb27(0x158)](_0x31eb27(0x43d))[_0x31eb27(0xdf)]=_0x2e1a7f[_0x31eb27(0xc6)]||_0x2e1a7f[_0x31eb27(0x206)]);}_0xcb4e44[_0x31eb27(0x45f)][_0x31eb27(0x486)](_0x31eb27(0x20f));}function toggleHighlightFields(_0x557910){const _0x4494b1=a4_0xfdad8c;console[_0x4494b1(0x4ca)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x557910);const _0x3a7215=document[_0x4494b1(0x158)](_0x4494b1(0x356));if(!_0x3a7215)return;const _0x429793=_0x3a7215[_0x4494b1(0x2d4)](_0x4494b1(0x31f));_0x429793[_0x4494b1(0x3b5)](_0x40bf0a=>_0x40bf0a[_0x4494b1(0x229)][_0x4494b1(0x261)]='none');const _0x403cc2=document[_0x4494b1(0x158)](_0x4494b1(0x3e7));if(_0x403cc2)_0x403cc2[_0x4494b1(0x229)][_0x4494b1(0x261)]=_0x4494b1(0x337);const _0x28a06f=[_0x4494b1(0x3c6),_0x4494b1(0x27e),_0x4494b1(0x46b)];_0x28a06f[_0x4494b1(0x3b5)](_0x474c88=>{const _0x54c2ef=_0x4494b1,_0x1ef314=document['getElementById'](_0x474c88);if(_0x1ef314)_0x1ef314[_0x54c2ef(0x229)][_0x54c2ef(0x261)]=_0x54c2ef(0xb8);});if(_0x557910===_0x4494b1(0x1e1)){const _0x5a9190=[_0x4494b1(0x119),_0x4494b1(0x2e0),_0x4494b1(0x225),_0x4494b1(0x2a1),_0x4494b1(0x2cb),_0x4494b1(0x466)];_0x5a9190[_0x4494b1(0x3b5)](_0x35ede6=>{const _0xcc8b1a=_0x4494b1,_0x218b7c=document[_0xcc8b1a(0x158)](_0x35ede6);_0x218b7c&&(_0x35ede6==='highlight-players-container'?_0x218b7c[_0xcc8b1a(0x229)]['display']=_0xcc8b1a(0x32b):_0x218b7c[_0xcc8b1a(0x229)][_0xcc8b1a(0x261)]=_0xcc8b1a(0xb8));});const _0x205d19=document[_0x4494b1(0x158)]('highlight-video-id');if(_0x205d19){_0x205d19[_0x4494b1(0x3bb)]=!![];const _0xe12e62=_0x205d19['previousElementSibling'];if(_0xe12e62)_0xe12e62['innerHTML']=_0x4494b1(0x4a1);}if(_0x403cc2)_0x403cc2['style'][_0x4494b1(0x261)]=_0x4494b1(0xb8);updateHighlightVideoPreview();}else{if(_0x557910===_0x4494b1(0x165)){const _0x3f46aa=[_0x4494b1(0x225),_0x4494b1(0x4f5),'highlight-map-version-container',_0x4494b1(0x415),'highlight-video-container'];_0x3f46aa[_0x4494b1(0x3b5)](_0x309ff5=>{const _0x2bfdd1=_0x4494b1,_0x37175d=document[_0x2bfdd1(0x158)](_0x309ff5);if(_0x37175d)_0x37175d[_0x2bfdd1(0x229)][_0x2bfdd1(0x261)]=_0x2bfdd1(0xb8);});const _0x6bf8b6=document['getElementById'](_0x4494b1(0x33d));if(_0x6bf8b6){_0x6bf8b6['required']=![];const _0x3d35a5=_0x6bf8b6[_0x4494b1(0x42c)];if(_0x3d35a5)_0x3d35a5['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x557910===_0x4494b1(0xf0)){const _0x55030f=[_0x4494b1(0x300),_0x4494b1(0x481),_0x4494b1(0x3e5),_0x4494b1(0x3a9),_0x4494b1(0x280),'highlight-video-container'];_0x55030f[_0x4494b1(0x3b5)](_0x5b1c60=>{const _0xa67f87=_0x4494b1,_0x151166=document['getElementById'](_0x5b1c60);if(_0x151166)_0x151166['style']['display']=_0xa67f87(0xb8);});const _0x502aa3=document[_0x4494b1(0x158)](_0x4494b1(0x33d));if(_0x502aa3){_0x502aa3['required']=![];const _0x45f14e=_0x502aa3[_0x4494b1(0x42c)];if(_0x45f14e)_0x45f14e[_0x4494b1(0x2d3)]=_0x4494b1(0x50c);}}}}}function a4_0x3da5(_0x355b97,_0x2b20fb){const _0x3c9327=a4_0x11d4();return a4_0x3da5=function(_0x55a661,_0x32ccbb){_0x55a661=_0x55a661-0x9f;let _0x500655=_0x3c9327[_0x55a661];return _0x500655;},a4_0x3da5(_0x355b97,_0x2b20fb);}async function loadHighlightDataAdmin(_0x28a6f0){const _0x21cac2=a4_0xfdad8c;try{const _0x5ad302=doc(db,'highlights',_0x28a6f0),_0x57c427=await getDoc(_0x5ad302);if(!_0x57c427['exists']()){showNotification(_0x21cac2(0x2dd),_0x21cac2(0x240));return;}const _0x22bd64=_0x57c427['data'](),_0x1ca807=_0x22bd64[_0x21cac2(0x10a)]||_0x21cac2(0x1e1);document['getElementById'](_0x21cac2(0x22c))[_0x21cac2(0x3cb)]=_0x21cac2(0x411)+getHighlightTypeName(_0x1ca807),document[_0x21cac2(0x158)](_0x21cac2(0x3f2))[_0x21cac2(0xdf)]=_0x1ca807,toggleHighlightFields(_0x1ca807),document[_0x21cac2(0x158)](_0x21cac2(0x1ca))[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0x443)]||'',document[_0x21cac2(0x158)](_0x21cac2(0x3ee))[_0x21cac2(0xdf)]=_0x22bd64['description']||'',document['getElementById'](_0x21cac2(0x43d))[_0x21cac2(0xdf)]=_0x22bd64['submittedBy']||'';_0x22bd64['videoId']&&(document[_0x21cac2(0x158)](_0x21cac2(0x33d))[_0x21cac2(0xdf)]=_0x22bd64['videoId'],updateHighlightVideoPreview());if(_0x1ca807===_0x21cac2(0x1e1)){document[_0x21cac2(0x158)](_0x21cac2(0x44b))[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0xcf)]||'',document[_0x21cac2(0x158)](_0x21cac2(0x424))['value']=_0x22bd64[_0x21cac2(0x502)]||'';if(_0x22bd64['matchDate']){const _0x3785b9=new Date(_0x22bd64['matchDate'][_0x21cac2(0x3a5)]*0x3e8);document[_0x21cac2(0x158)](_0x21cac2(0x3b8))['value']=_0x3785b9[_0x21cac2(0x3eb)]()[_0x21cac2(0x2f7)]('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x22bd64['winnerName']||'',document[_0x21cac2(0x158)](_0x21cac2(0x19e))[_0x21cac2(0xdf)]=_0x22bd64['winnerScore']||'',document[_0x21cac2(0x158)](_0x21cac2(0x42b))[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0x3f4)]||'',document[_0x21cac2(0x158)](_0x21cac2(0x476))[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0x249)]||'',document['getElementById']('highlight-match-link')[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0x32c)]||'';}else{if(_0x1ca807===_0x21cac2(0x165))document[_0x21cac2(0x158)](_0x21cac2(0x424))['value']=_0x22bd64[_0x21cac2(0x502)]||'',document[_0x21cac2(0x158)]('highlight-map-creator')[_0x21cac2(0xdf)]=_0x22bd64['mapCreator']||'',document[_0x21cac2(0x158)](_0x21cac2(0x441))[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0x1f0)]||'',document[_0x21cac2(0x158)](_0x21cac2(0x3e3))[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0x3f3)]||'';else _0x1ca807===_0x21cac2(0xf0)&&(document[_0x21cac2(0x158)](_0x21cac2(0x49c))[_0x21cac2(0xdf)]=_0x22bd64['achievementPlayer']||'',document[_0x21cac2(0x158)](_0x21cac2(0x36d))[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0x3df)]||'',document[_0x21cac2(0x158)](_0x21cac2(0x4fd))[_0x21cac2(0xdf)]=_0x22bd64['achievementDetails']||'',document[_0x21cac2(0x158)](_0x21cac2(0x457))['value']=_0x22bd64[_0x21cac2(0x377)]||'',document[_0x21cac2(0x158)](_0x21cac2(0x1c2))[_0x21cac2(0xdf)]=_0x22bd64[_0x21cac2(0x154)]||'');}}catch(_0x5eaa26){console[_0x21cac2(0x240)](_0x21cac2(0xb7),_0x5eaa26),showNotification(_0x21cac2(0x455)+_0x5eaa26['message'],_0x21cac2(0x240));}}async function saveHighlight(){const _0x33c7a8=a4_0xfdad8c;try{const _0x4bd956=document[_0x33c7a8(0x158)](_0x33c7a8(0x259))?.[_0x33c7a8(0xdf)]||'',_0x359afe=document[_0x33c7a8(0x158)]('highlight-type')?.['value']||_0x33c7a8(0x1e1),_0x5121a9={'title':document[_0x33c7a8(0x158)]('highlight-title')?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||'','description':document[_0x33c7a8(0x158)]('highlight-description')?.[_0x33c7a8(0xdf)]?.['trim']()||'','submittedBy':document[_0x33c7a8(0x158)](_0x33c7a8(0x43d))?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||'','videoId':document['getElementById'](_0x33c7a8(0x33d))?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||null,'type':_0x359afe};if(!_0x5121a9['title']){showNotification(_0x33c7a8(0x4e2),_0x33c7a8(0x240));return;}if(_0x359afe===_0x33c7a8(0x1e1)){_0x5121a9['matchInfo']=document[_0x33c7a8(0x158)](_0x33c7a8(0x44b))?.[_0x33c7a8(0xdf)]?.['trim']()||'',_0x5121a9[_0x33c7a8(0x502)]=document[_0x33c7a8(0x158)](_0x33c7a8(0x424))?.['value']?.[_0x33c7a8(0x509)]()||'';const _0x20d1d4=document['getElementById'](_0x33c7a8(0x3b8)),_0x443fc1=_0x20d1d4?.[_0x33c7a8(0xdf)]||'';_0x5121a9[_0x33c7a8(0x48a)]=_0x443fc1?Timestamp[_0x33c7a8(0x333)](new Date(_0x443fc1)):null,_0x5121a9[_0x33c7a8(0x159)]=document[_0x33c7a8(0x158)](_0x33c7a8(0x397))?.[_0x33c7a8(0xdf)]?.['trim']()||'',_0x5121a9['winnerScore']=document[_0x33c7a8(0x158)]('highlight-winner-score')?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||'',_0x5121a9[_0x33c7a8(0x3f4)]=document['getElementById'](_0x33c7a8(0x42b))?.['value']?.[_0x33c7a8(0x509)]()||'',_0x5121a9[_0x33c7a8(0x249)]=document[_0x33c7a8(0x158)](_0x33c7a8(0x476))?.['value']?.[_0x33c7a8(0x509)]()||'',_0x5121a9[_0x33c7a8(0x32c)]=document['getElementById'](_0x33c7a8(0xfb))?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||'';if(!_0x5121a9[_0x33c7a8(0x282)]){showNotification(_0x33c7a8(0x414),_0x33c7a8(0x240));return;}}else{if(_0x359afe==='creator'){_0x5121a9[_0x33c7a8(0x502)]=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x5121a9[_0x33c7a8(0x47c)]=document['getElementById'](_0x33c7a8(0x107))?.['value']?.[_0x33c7a8(0x509)]()||'',_0x5121a9[_0x33c7a8(0x1f0)]=document[_0x33c7a8(0x158)](_0x33c7a8(0x441))?.['value']?.[_0x33c7a8(0x509)]()||'',_0x5121a9[_0x33c7a8(0x3f3)]=document[_0x33c7a8(0x158)](_0x33c7a8(0x3e3))?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||'';if(!_0x5121a9['mapCreator']){showNotification('Map\x20Creator\x20is\x20required',_0x33c7a8(0x240));return;}}else{if(_0x359afe==='achievement'){_0x5121a9[_0x33c7a8(0x1f8)]=document[_0x33c7a8(0x158)](_0x33c7a8(0x49c))?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||'',_0x5121a9[_0x33c7a8(0x3df)]=document[_0x33c7a8(0x158)]('highlight-achievement-type')?.[_0x33c7a8(0xdf)]?.['trim']()||'',_0x5121a9[_0x33c7a8(0x33a)]=document['getElementById']('highlight-achievement-details')?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||'',_0x5121a9[_0x33c7a8(0x377)]=document[_0x33c7a8(0x158)]('highlight-player-profile')?.[_0x33c7a8(0xdf)]?.[_0x33c7a8(0x509)]()||'',_0x5121a9[_0x33c7a8(0x154)]=document['getElementById'](_0x33c7a8(0x1c2))?.['value']?.[_0x33c7a8(0x509)]()||'';if(!_0x5121a9[_0x33c7a8(0x1f8)]){showNotification(_0x33c7a8(0xe9),_0x33c7a8(0x240));return;}}}}_0x4bd956?(_0x5121a9[_0x33c7a8(0x164)]=serverTimestamp(),await updateDoc(doc(db,_0x33c7a8(0x309),_0x4bd956),_0x5121a9),showNotification(_0x33c7a8(0x313),_0x33c7a8(0x350))):(_0x5121a9[_0x33c7a8(0xdd)]=serverTimestamp(),await addDoc(collection(db,_0x33c7a8(0x309)),_0x5121a9),showNotification('Highlight\x20created\x20successfully!',_0x33c7a8(0x350))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x2f90d2){console[_0x33c7a8(0x240)](_0x33c7a8(0x25a),_0x2f90d2),showNotification('Error\x20saving\x20highlight:\x20'+_0x2f90d2[_0x33c7a8(0x2a8)],_0x33c7a8(0x240));}}function closeHighlightModal(){const _0x4fa2e1=a4_0xfdad8c,_0x191a88=document[_0x4fa2e1(0x158)]('highlight-modal');if(_0x191a88)_0x191a88[_0x4fa2e1(0x45f)][_0x4fa2e1(0x3e9)](_0x4fa2e1(0x20f));}function getHighlightTypeName(_0x56f5d7){const _0x168cbe=a4_0xfdad8c;switch(_0x56f5d7){case'match':return _0x168cbe(0x18f);case _0x168cbe(0x165):return _0x168cbe(0x39d);case'achievement':return _0x168cbe(0x464);default:return _0x168cbe(0xab);}}function updateHighlightVideoPreview(){const _0x471300=a4_0xfdad8c,_0x28a3f0=document['getElementById'](_0x471300(0x33d)),_0x4c11c3=document['getElementById'](_0x471300(0x3e7)),_0xa0156c=document[_0x471300(0x158)](_0x471300(0xac));if(!_0x28a3f0||!_0xa0156c||!_0x4c11c3)return;const _0x42b2df=_0x28a3f0[_0x471300(0xdf)][_0x471300(0x509)]();_0x42b2df&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x42b2df)?(_0xa0156c[_0x471300(0x45b)]=_0x471300(0x2b3)+_0x42b2df,_0x4c11c3[_0x471300(0x229)][_0x471300(0x261)]=_0x471300(0xb8)):(_0xa0156c['src']='',_0x4c11c3[_0x471300(0x229)][_0x471300(0x261)]='none');}async function loadHighlightsAdmin(){const _0x50dd06=a4_0xfdad8c,_0x24765a=document[_0x50dd06(0x158)](_0x50dd06(0x3ea));if(!_0x24765a)return;_0x24765a[_0x50dd06(0x2d3)]=_0x50dd06(0x22d);try{const _0x5ab412=query(collection(db,'highlights'),orderBy(_0x50dd06(0xdd),_0x50dd06(0x4c7))),_0xcff3f1=await getDocs(_0x5ab412);if(_0xcff3f1[_0x50dd06(0x332)]){_0x24765a['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x24765a[_0x50dd06(0x2d3)]='',_0xcff3f1[_0x50dd06(0x3b5)](_0x112028=>{const _0x5c1cc4=_0x50dd06,_0x284370=_0x112028['data'](),_0x3b3b6a=document[_0x5c1cc4(0x156)]('tr'),_0x44c7b8=_0x284370[_0x5c1cc4(0xdd)]?new Date(_0x284370[_0x5c1cc4(0xdd)]['seconds']*0x3e8)[_0x5c1cc4(0x23e)]():_0x5c1cc4(0x2c1);let _0x35e51b=_0x5c1cc4(0x1b8),_0x5d260b='';switch(_0x284370[_0x5c1cc4(0x10a)]){case _0x5c1cc4(0x1e1):_0x35e51b=_0x5c1cc4(0x485),_0x5d260b='match-type';break;case'creator':_0x35e51b=_0x5c1cc4(0xa1),_0x5d260b='creator-type';break;case _0x5c1cc4(0xf0):_0x35e51b=_0x5c1cc4(0x16c),_0x5d260b='achievement-type';break;}_0x3b3b6a[_0x5c1cc4(0x2d3)]=_0x5c1cc4(0x3a4)+(_0x284370[_0x5c1cc4(0x443)]||_0x5c1cc4(0x32e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x5d260b+'\x22>'+_0x35e51b+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44c7b8+_0x5c1cc4(0x285)+(_0x284370[_0x5c1cc4(0x515)]||_0x5c1cc4(0x1b8))+_0x5c1cc4(0x285)+(_0x284370[_0x5c1cc4(0x282)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x5c1cc4(0x227))+_0x5c1cc4(0x4ee)+_0x112028['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x112028['id']+_0x5c1cc4(0x427),_0x24765a[_0x5c1cc4(0x136)](_0x3b3b6a);}),document[_0x50dd06(0x2d4)](_0x50dd06(0x48c))[_0x50dd06(0x3b5)](_0x3bbd61=>{const _0x1939df=_0x50dd06;_0x3bbd61[_0x1939df(0x234)]('click',_0x151208=>{const _0x32ea08=_0x1939df;openHighlightModal(_0x151208[_0x32ea08(0xb5)]['dataset']['id']);});}),document['querySelectorAll'](_0x50dd06(0x141))[_0x50dd06(0x3b5)](_0xc4b072=>{const _0xcee62f=_0x50dd06;_0xc4b072[_0xcee62f(0x234)]('click',_0xf48142=>{const _0x22d7a7=_0xcee62f;confirmDeleteHighlight(_0xf48142[_0x22d7a7(0xb5)][_0x22d7a7(0x468)]['id']);});});}catch(_0x28c74a){console[_0x50dd06(0x240)](_0x50dd06(0x446),_0x28c74a),_0x24765a['innerHTML']=_0x50dd06(0x308)+_0x28c74a[_0x50dd06(0x2a8)]+_0x50dd06(0x45d);}}async function confirmDeleteHighlight(_0x38adc4){const _0x32c856=a4_0xfdad8c;if(confirm(_0x32c856(0x31b)))try{await deleteDoc(doc(db,_0x32c856(0x309),_0x38adc4)),showNotification('Highlight\x20deleted\x20successfully',_0x32c856(0x350)),loadHighlightsAdmin();}catch(_0x180b63){console[_0x32c856(0x240)](_0x32c856(0xfa),_0x180b63),showNotification(_0x32c856(0x2dc)+_0x180b63[_0x32c856(0x2a8)],_0x32c856(0x240));}}function setupCreateTestMatchModal(){const _0x3431be=a4_0xfdad8c;console[_0x3431be(0x4ca)](_0x3431be(0x4b0));const _0x522799=document[_0x3431be(0x158)](_0x3431be(0x270)),_0xbf9252=document[_0x3431be(0x158)](_0x3431be(0x44c));if(!_0x522799){console[_0x3431be(0x240)](_0x3431be(0xa5));return;}if(!_0xbf9252){console[_0x3431be(0x240)](_0x3431be(0x48e));return;}const _0x3d66d6=_0x522799[_0x3431be(0x27d)](!![]);_0x522799[_0x3431be(0x135)]['replaceChild'](_0x3d66d6,_0x522799);const _0x1c1990=_0x3d66d6[_0x3431be(0x30f)](_0x3431be(0x131));_0x3d66d6['addEventListener'](_0x3431be(0x42d),function(_0x270f3b){const _0x317192=_0x3431be;_0x270f3b['target']===_0x3d66d6&&(console[_0x317192(0x4ca)](_0x317192(0x2b5)),closeCreateTestMatchModal());});const _0x260828=_0x3d66d6[_0x3431be(0x30f)](_0x3431be(0x4ac));_0x260828&&_0x260828[_0x3431be(0x234)]('click',function(_0x62639c){const _0x30e511=_0x3431be;_0x62639c[_0x30e511(0x18b)](),_0x62639c[_0x30e511(0x383)](),console[_0x30e511(0x4ca)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x56b4fc=_0x3d66d6[_0x3431be(0x30f)](_0x3431be(0x3b4));_0x56b4fc&&_0x56b4fc[_0x3431be(0x234)]('click',function(_0x43168e){const _0x13de18=_0x3431be;_0x43168e['preventDefault'](),_0x43168e['stopPropagation'](),console[_0x13de18(0x4ca)](_0x13de18(0x11c)),closeCreateTestMatchModal();});if(_0x1c1990){_0x1c1990[_0x3431be(0x234)](_0x3431be(0x4ff),function(_0x1dfbc5){const _0x3bbf53=_0x3431be;_0x1dfbc5['preventDefault'](),_0x1dfbc5[_0x3bbf53(0x383)](),console[_0x3bbf53(0x4ca)](_0x3bbf53(0xc1)),createTestMatch();});const _0x2c4102=_0x1c1990[_0x3431be(0x30f)](_0x3431be(0x428));_0x2c4102&&_0x2c4102['addEventListener'](_0x3431be(0x42d),function(_0x508ade){const _0x132cbf=_0x3431be;_0x508ade['preventDefault'](),_0x508ade['stopPropagation'](),console['log'](_0x132cbf(0x46a)),createTestMatch();});}console['log'](_0x3431be(0x439));}function setupManageHighlightsSection(){const _0x281a49=a4_0xfdad8c;console[_0x281a49(0x4ca)](_0x281a49(0x4d4)),setupHighlightButtons();const _0x5022dd=document['getElementById'](_0x281a49(0x356));_0x5022dd&&_0x5022dd[_0x281a49(0x234)](_0x281a49(0x4ff),_0x1b3123=>{const _0x25aec1=_0x281a49;_0x1b3123[_0x25aec1(0x18b)](),saveHighlight();});const _0x465974=document[_0x281a49(0x158)](_0x281a49(0x102));_0x465974&&_0x465974[_0x281a49(0x234)](_0x281a49(0x42d),closeHighlightModal);const _0x45386b=document[_0x281a49(0x30f)](_0x281a49(0x36f));_0x45386b&&_0x45386b[_0x281a49(0x234)](_0x281a49(0x42d),closeHighlightModal);const _0x168750=document[_0x281a49(0x158)](_0x281a49(0x22a));_0x168750&&_0x168750[_0x281a49(0x234)](_0x281a49(0x42d),_0x43f966=>{const _0x40aee0=_0x281a49;_0x43f966[_0x40aee0(0x138)]===_0x168750&&closeHighlightModal();});const _0x10c78e=document['getElementById'](_0x281a49(0x33d));_0x10c78e&&_0x10c78e[_0x281a49(0x234)]('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x1c78d3=a4_0xfdad8c;console[_0x1c78d3(0x4ca)](_0x1c78d3(0xda));const _0x46c826=document[_0x1c78d3(0x158)]('matches-prev-page'),_0x37b5b6=document[_0x1c78d3(0x158)](_0x1c78d3(0x1ac));_0x46c826&&_0x46c826[_0x1c78d3(0x234)](_0x1c78d3(0x42d),()=>{const _0x1ce63a=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x1ce63a]['page']-0x1);});_0x37b5b6&&_0x37b5b6[_0x1c78d3(0x234)]('click',()=>{const _0x2f0833=_0x1c78d3,_0x11bac1=currentLadder[_0x2f0833(0x338)]();loadMatchesData(matchesPagination[_0x11bac1][_0x2f0833(0x2ce)]+0x1);});const _0x26703=document[_0x1c78d3(0x158)](_0x1c78d3(0x422)),_0x185bae=document[_0x1c78d3(0x158)](_0x1c78d3(0x236));_0x26703&&_0x26703['addEventListener'](_0x1c78d3(0x42d),applyMatchesFilters);_0x185bae&&_0x185bae['addEventListener'](_0x1c78d3(0x42d),resetMatchesFilters);const _0xe0d8d4=document['getElementById']('matches-search');_0xe0d8d4&&_0xe0d8d4['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x352056=document[_0x1c78d3(0x158)](_0x1c78d3(0x23c));_0x352056&&_0x352056[_0x1c78d3(0x234)](_0x1c78d3(0x42d),openResimulateModal);const _0x50f51f=document[_0x1c78d3(0x158)](_0x1c78d3(0x4bf));if(_0x50f51f){const _0x3114b0=_0x50f51f[_0x1c78d3(0x30f)](_0x1c78d3(0x3b2));_0x3114b0&&_0x3114b0[_0x1c78d3(0x234)](_0x1c78d3(0x42d),closeResimulateModal),_0x50f51f['addEventListener'](_0x1c78d3(0x42d),_0x4155d2=>{_0x4155d2['target']===_0x50f51f&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console[_0x1c78d3(0x4ca)](_0x1c78d3(0x293));}function openCreateTestMatchModal(){const _0x47b4d2=a4_0xfdad8c;console[_0x47b4d2(0x4ca)]('Opening\x20create\x20test\x20match\x20modal');const _0x247436=document[_0x47b4d2(0x158)]('create-test-match-modal'),_0x29741a=document['getElementById']('create-test-match-form');if(!_0x247436){console['error'](_0x47b4d2(0x37f)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x29741a){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x47b4d2(0x353),_0x47b4d2(0x240));return;}_0x29741a[_0x47b4d2(0x255)]();const _0x5582a2=document[_0x47b4d2(0x2d4)](_0x47b4d2(0x140));let _0x26581f=![];_0x5582a2['forEach'](_0x1a240c=>{const _0x61cf8a=_0x47b4d2;console[_0x61cf8a(0x4ca)](_0x61cf8a(0x26f),_0x1a240c[_0x61cf8a(0xdf)]),_0x1a240c['value']===currentLadder&&(_0x1a240c[_0x61cf8a(0x267)]=!![],_0x26581f=!![],console['log'](_0x61cf8a(0x30c),currentLadder));});if(!_0x26581f){console['warn'](_0x47b4d2(0x4f9),currentLadder);const _0x5b313a=document['querySelector'](_0x47b4d2(0x4d9));_0x5b313a&&(_0x5b313a[_0x47b4d2(0x267)]=!![],console[_0x47b4d2(0x4ca)](_0x47b4d2(0x4a0)));}const _0x556080=document[_0x47b4d2(0x158)]('test-match-date');if(_0x556080){const _0x3161ee=new Date()[_0x47b4d2(0x3eb)]()['split']('T')[0x0];_0x556080[_0x47b4d2(0xdf)]=_0x3161ee;}_0x247436[_0x47b4d2(0x229)][_0x47b4d2(0x261)]=_0x47b4d2(0x32b),_0x247436[_0x47b4d2(0x229)][_0x47b4d2(0x459)]=_0x47b4d2(0xed),_0x247436['style'][_0x47b4d2(0x327)]='1',_0x247436[_0x47b4d2(0x45f)]['add']('active'),console['log'](_0x47b4d2(0xf6));const _0x3eaea2=document[_0x47b4d2(0x158)](_0x47b4d2(0x3d1));_0x3eaea2&&setTimeout(()=>{const _0x4b6ccd=_0x47b4d2;_0x3eaea2[_0x4b6ccd(0x2b6)]();},0x64);}function closeCreateTestMatchModal(){const _0x316d60=a4_0xfdad8c;console['log'](_0x316d60(0x2c8));const _0x15abf6=document[_0x316d60(0x158)]('create-test-match-modal');if(!_0x15abf6){console[_0x316d60(0x240)](_0x316d60(0xb2));return;}_0x15abf6['classList']['remove']('active'),_0x15abf6[_0x316d60(0x229)]['opacity']='0',_0x15abf6[_0x316d60(0x229)][_0x316d60(0x459)]=_0x316d60(0x15e),setTimeout(()=>{const _0x483c2c=_0x316d60;!_0x15abf6[_0x483c2c(0x45f)][_0x483c2c(0x3db)](_0x483c2c(0x20f))&&(_0x15abf6['style'][_0x483c2c(0x261)]=_0x483c2c(0x337));},0x12c),console[_0x316d60(0x4ca)](_0x316d60(0x1f1));}async function createTestMatch(){const _0x463670=a4_0xfdad8c;console['log'](_0x463670(0x115));try{const _0x18e042=auth[_0x463670(0x35b)];if(!_0x18e042){showNotification(_0x463670(0x1d5),_0x463670(0x240));return;}const _0x1f02ec='D1',_0x12fd1c=_0x463670(0x465),_0x203bed={'winnerUsername':_0x463670(0x461),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x463670(0x3a3),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x463670(0x3a3),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x463670(0x333)](new Date()),'approvedBy':_0x18e042[_0x463670(0x206)],'createdAt':serverTimestamp(),'createdBy':_0x18e042[_0x463670(0x206)],'isTestMatch':!![],'ladder':_0x1f02ec,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x463670(0x14b)+_0x18e042[_0x463670(0x206)]};console[_0x463670(0x4ca)](_0x463670(0x257)),await addDoc(collection(db,_0x12fd1c),_0x203bed),showNotification(_0x463670(0x452),'success'),closeCreateTestMatchModal();}catch(_0x36cbcf){console[_0x463670(0x240)](_0x463670(0x2c9),_0x36cbcf),showNotification(_0x463670(0x27c)+_0x36cbcf[_0x463670(0x2a8)],_0x463670(0x240));}}window[a4_0xfdad8c(0x11b)]=async function(){const _0x2f2d91=a4_0xfdad8c;try{console[_0x2f2d91(0x4ca)]('Testing\x20Firebase\x20connection...'),console[_0x2f2d91(0x4ca)](_0x2f2d91(0x393),auth),console['log'](_0x2f2d91(0x4c8),db),console[_0x2f2d91(0x4ca)](_0x2f2d91(0x188),auth['currentUser']);const _0x4a0be4=collection(db,_0x2f2d91(0x20c));console[_0x2f2d91(0x4ca)](_0x2f2d91(0x17c),_0x4a0be4);const _0x4efb0f=query(_0x4a0be4,where(_0x2f2d91(0x517),'==',_0x2f2d91(0xb0)));console[_0x2f2d91(0x4ca)](_0x2f2d91(0x347),_0x4efb0f);const _0x6e4841=await getDocs(_0x4efb0f);console['log'](_0x2f2d91(0x123),_0x6e4841[_0x2f2d91(0x332)]),console[_0x2f2d91(0x4ca)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x254f4d){console[_0x2f2d91(0x240)](_0x2f2d91(0x1b5),_0x254f4d);}};function setupCreateTestMatchButton(){const _0x404abf=a4_0xfdad8c,_0x20cc74=document['getElementById'](_0x404abf(0x14f));if(!_0x20cc74){console[_0x404abf(0x240)](_0x404abf(0x284));return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x483a21=_0x20cc74['cloneNode'](!![]);_0x20cc74[_0x404abf(0x135)][_0x404abf(0x3c5)](_0x483a21,_0x20cc74),_0x483a21[_0x404abf(0x234)](_0x404abf(0x42d),function(_0x5f0198){const _0x31d39a=_0x404abf;_0x5f0198[_0x31d39a(0x18b)](),_0x5f0198[_0x31d39a(0x383)](),console[_0x31d39a(0x4ca)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0xe91fc6=0x1){const _0x27863f=a4_0xfdad8c,_0x58dead=document[_0x27863f(0x158)]('matches-table-body');if(!_0x58dead)return;_0x58dead[_0x27863f(0x2d3)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0xebd156=currentLadder[_0x27863f(0x338)](),_0x1aad1e=matchesPagination[_0xebd156],_0x2b32aa=currentLadder==='D1'?_0x27863f(0x465):currentLadder==='D2'?'approvedMatchesD2':_0x27863f(0x10f),_0xa84ce7=collection(db,_0x2b32aa);_0xe91fc6<=0x1?(_0x1aad1e[_0x27863f(0x2ce)]=0x1,_0x1aad1e[_0x27863f(0x191)]=null,_0x1aad1e[_0x27863f(0x113)]=null):_0x1aad1e[_0x27863f(0x2ce)]=_0xe91fc6;const _0x2b1c99=getMatchesFilters();let _0x50e247=_0xa84ce7;if(_0x2b1c99[_0x27863f(0x3e4)]||_0x2b1c99[_0x27863f(0x1b0)]||_0x2b1c99[_0x27863f(0x3d7)]){let _0x49c80a=[];_0x2b1c99['startDate']&&_0x2b1c99[_0x27863f(0x1b0)]?(_0x49c80a['push'](where('approvedAt','>=',_0x2b1c99[_0x27863f(0x3e4)]),where('approvedAt','<=',_0x2b1c99[_0x27863f(0x1b0)])),_0x50e247=query(_0xa84ce7,..._0x49c80a)):_0x50e247=query(_0xa84ce7,orderBy('approvedAt',_0x27863f(0x4c7)));}else _0x50e247=query(_0xa84ce7,orderBy(_0x27863f(0x463),_0x27863f(0x4c7)));_0xe91fc6>0x1&&_0x1aad1e[_0x27863f(0x113)]?_0x50e247=query(_0x50e247,startAfter(_0x1aad1e[_0x27863f(0x113)]),limit(PAGE_SIZE)):_0x50e247=query(_0x50e247,limit(PAGE_SIZE));const _0x12242b=await getDocs(_0x50e247);!_0x12242b[_0x27863f(0x332)]&&(_0x1aad1e['firstVisible']=_0x12242b[_0x27863f(0x371)][0x0],_0x1aad1e[_0x27863f(0x113)]=_0x12242b['docs'][_0x12242b[_0x27863f(0x371)][_0x27863f(0x317)]-0x1]);let _0x40da93=![];if(!_0x12242b[_0x27863f(0x332)]){const _0x426916=query(_0x50e247,startAfter(_0x1aad1e[_0x27863f(0x113)]),limit(0x1)),_0x3b177b=await getDocs(_0x426916);_0x40da93=!_0x3b177b['empty'];}const _0x3c0b36=document[_0x27863f(0x158)](_0x27863f(0x426)),_0x41a030=document['getElementById'](_0x27863f(0x1ac)),_0x2d3111=document[_0x27863f(0x158)]('matches-page-indicator');if(_0x3c0b36)_0x3c0b36[_0x27863f(0x1b6)]=_0x1aad1e[_0x27863f(0x2ce)]<=0x1;if(_0x41a030)_0x41a030[_0x27863f(0x1b6)]=!_0x40da93;if(_0x2d3111)_0x2d3111[_0x27863f(0x3cb)]=_0x27863f(0xe4)+_0x1aad1e[_0x27863f(0x2ce)];if(_0x12242b[_0x27863f(0x332)]){_0x58dead['innerHTML']=_0x27863f(0x4aa);return;}_0x58dead[_0x27863f(0x2d3)]='',_0x12242b[_0x27863f(0x3b5)](_0x1f4ab8=>{const _0x1e9ff4=_0x27863f,_0x4d6cd7=_0x1f4ab8['data'](),_0x1c3033=document[_0x1e9ff4(0x156)]('tr'),_0x2dee4f=_0x4d6cd7[_0x1e9ff4(0x463)]?new Date(_0x4d6cd7[_0x1e9ff4(0x463)]['seconds']*0x3e8)[_0x1e9ff4(0x23e)]():_0x1e9ff4(0x2c1);_0x1c3033[_0x1e9ff4(0x128)](_0x1e9ff4(0x252),_0x1f4ab8['id']),_0x1c3033['setAttribute'](_0x1e9ff4(0x379),currentLadder),_0x1c3033['classList']['add']('match-row'),_0x1c3033[_0x1e9ff4(0x2d3)]=_0x1e9ff4(0x3a4)+_0x2dee4f+_0x1e9ff4(0x319)+(_0x4d6cd7['winnerUsername']||_0x1e9ff4(0x1b8))+_0x1e9ff4(0x43a)+(_0x4d6cd7[_0x1e9ff4(0x4cb)]||_0x1e9ff4(0x1b8))+_0x1e9ff4(0x137)+(_0x4d6cd7[_0x1e9ff4(0x1f2)]||0x0)+_0x1e9ff4(0x2f6)+(_0x4d6cd7[_0x1e9ff4(0x249)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x4d6cd7[_0x1e9ff4(0x179)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x1e9ff4(0x4b6)+_0x1f4ab8['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x1f4ab8['id']+_0x1e9ff4(0x2a0),_0x58dead[_0x1e9ff4(0x136)](_0x1c3033);}),setupMatchesActionButtons(),_0x2b1c99[_0x27863f(0x3d7)]&&filterMatchesTable(),console[_0x27863f(0x4ca)](_0x27863f(0x341)+_0x12242b['size']+_0x27863f(0x508)+currentLadder+_0x27863f(0x286)+_0x1aad1e['page']);}catch(_0x2221ed){console[_0x27863f(0x240)]('Error\x20loading\x20matches:',_0x2221ed),_0x58dead[_0x27863f(0x2d3)]=_0x27863f(0x440)+_0x2221ed[_0x27863f(0x2a8)]+_0x27863f(0x45d);}}async function deleteMatch(_0x18bf29,_0x52b6b9){const _0x471156=a4_0xfdad8c;try{console[_0x471156(0x4ca)](_0x471156(0x173)+_0x18bf29+_0x471156(0x475)+_0x52b6b9+'\x20ladder');const _0x4612bd=auth[_0x471156(0x35b)];if(!_0x4612bd){showNotification(_0x471156(0x37a),_0x471156(0x240));return;}const _0x59cdef=_0x52b6b9==='D1'?'approvedMatches':_0x52b6b9==='D2'?_0x471156(0x50b):_0x471156(0x10f);console['log'](_0x471156(0x2ba)+_0x59cdef),showNotification(_0x471156(0x118),'info'),await deleteDoc(doc(db,_0x59cdef,_0x18bf29)),console[_0x471156(0x4ca)](_0x471156(0x315)),showNotification(_0x471156(0x315),'success');const _0x139f73=_0x52b6b9[_0x471156(0x338)]();loadMatchesData(matchesPagination[_0x139f73][_0x471156(0x2ce)]);}catch(_0x46d03f){console[_0x471156(0x240)]('Error\x20deleting\x20match:',_0x46d03f),showNotification(_0x471156(0x349)+_0x46d03f[_0x471156(0x2a8)],'error');}}function setupMatchesActionButtons(){const _0x1d06b1=a4_0xfdad8c;console['log'](_0x1d06b1(0x12e)),document['querySelectorAll'](_0x1d06b1(0x28e))['forEach'](_0x569a04=>{const _0x2a2b92=_0x1d06b1;_0x569a04[_0x2a2b92(0x234)](_0x2a2b92(0x42d),_0x3e5ed9=>{const _0xcbe47c=_0x2a2b92;_0x3e5ed9['preventDefault'](),_0x3e5ed9[_0xcbe47c(0x383)]();const _0x415082=_0x3e5ed9[_0xcbe47c(0xb5)]['dataset']['id'],_0x110575=_0x3e5ed9['currentTarget'][_0xcbe47c(0x413)]('tr'),_0x193c1e=_0x110575['dataset']['ladder'];console[_0xcbe47c(0x4ca)](_0xcbe47c(0x277),_0x415082,_0x193c1e),openEditMatchModal(_0x415082,_0x193c1e);});}),document['querySelectorAll'](_0x1d06b1(0x47d))[_0x1d06b1(0x3b5)](_0xd6f09=>{const _0x5766cc=_0x1d06b1;_0xd6f09[_0x5766cc(0x234)](_0x5766cc(0x42d),_0x4f21dd=>{const _0x3cbb03=_0x5766cc;_0x4f21dd['preventDefault'](),_0x4f21dd['stopPropagation']();const _0x1a2942=_0x4f21dd['currentTarget'][_0x3cbb03(0x468)]['id'],_0x280425=_0x4f21dd[_0x3cbb03(0xb5)][_0x3cbb03(0x413)]('tr'),_0x4e9825=_0x280425[_0x3cbb03(0x468)][_0x3cbb03(0x318)]||currentLadder;console[_0x3cbb03(0x4ca)]('Delete\x20match\x20clicked:',_0x1a2942,_0x4e9825),confirm(_0x3cbb03(0x512))&&deleteMatch(_0x1a2942,_0x4e9825);});}),console[_0x1d06b1(0x4ca)](_0x1d06b1(0x1f6));}function filterMatchesTable(){const _0x405d36=a4_0xfdad8c,_0x3f8f85=document[_0x405d36(0x158)](_0x405d36(0x29a))['value'][_0x405d36(0x338)](),_0x3aeec7=document[_0x405d36(0x2d4)](_0x405d36(0x253));let _0x3dbd59=0x0;_0x3aeec7['forEach'](_0x5741fc=>{const _0x5da968=_0x405d36;if(_0x5741fc[_0x5da968(0x45f)][_0x5da968(0x3db)]('loading-cell')||_0x5741fc[_0x5da968(0x45f)]['contains'](_0x5da968(0x2a4))||_0x5741fc['classList'][_0x5da968(0x3db)](_0x5da968(0x25f)))return;const _0x5d32e0=_0x5741fc['cells'][0x1][_0x5da968(0x3cb)]['toLowerCase'](),_0x3ba7b2=_0x5741fc['cells'][0x2][_0x5da968(0x3cb)][_0x5da968(0x338)](),_0x5b368a=_0x5741fc[_0x5da968(0x1e8)][0x4][_0x5da968(0x3cb)][_0x5da968(0x338)]();_0x5d32e0[_0x5da968(0x4fb)](_0x3f8f85)||_0x3ba7b2['includes'](_0x3f8f85)||_0x5b368a['includes'](_0x3f8f85)?(_0x5741fc[_0x5da968(0x229)][_0x5da968(0x261)]='',_0x3dbd59++):_0x5741fc['style'][_0x5da968(0x261)]=_0x5da968(0x337);});if(_0x3dbd59===0x0&&_0x3aeec7[_0x405d36(0x317)]>0x0){const _0x2d7b47=document[_0x405d36(0x158)](_0x405d36(0x268)),_0x523fec=_0x2d7b47[_0x405d36(0x30f)]('.no-results');if(!_0x523fec){const _0x48a981=document[_0x405d36(0x156)]('tr');_0x48a981['className']=_0x405d36(0x483),_0x48a981[_0x405d36(0x2d3)]=_0x405d36(0x117)+_0x3f8f85+_0x405d36(0x2b7),_0x2d7b47[_0x405d36(0x136)](_0x48a981);}}else{const _0x37dfb0=document['querySelector'](_0x405d36(0x145));_0x37dfb0&&_0x37dfb0['remove']();}}function getMatchesFilters(){const _0x2b92a6=a4_0xfdad8c,_0x283a19=document['getElementById']('matches-search')[_0x2b92a6(0xdf)][_0x2b92a6(0x338)](),_0x6f9010=document[_0x2b92a6(0x158)](_0x2b92a6(0x169))['value'],_0x2b2594=document[_0x2b92a6(0x158)](_0x2b92a6(0x4cd))[_0x2b92a6(0xdf)];let _0x29a1b6=null,_0x55549a=null;return _0x6f9010&&(_0x29a1b6=new Date(_0x6f9010),_0x29a1b6['setHours'](0x0,0x0,0x0,0x0),_0x29a1b6=Timestamp[_0x2b92a6(0x333)](_0x29a1b6)),_0x2b2594&&(_0x55549a=new Date(_0x2b2594),_0x55549a[_0x2b92a6(0x1a7)](0x17,0x3b,0x3b,0x3e7),_0x55549a=Timestamp['fromDate'](_0x55549a)),{'searchTerm':_0x283a19,'startDate':_0x29a1b6,'endDate':_0x55549a};}async function applyMatchesFilters(){const _0x4146bc=currentLadder['toLowerCase']();matchesPagination[_0x4146bc]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x3ef681=a4_0xfdad8c;document[_0x3ef681(0x158)]('matches-start-date')[_0x3ef681(0xdf)]='',document[_0x3ef681(0x158)]('matches-end-date')['value']='',document[_0x3ef681(0x158)](_0x3ef681(0x29a))['value']='';const _0x236f5c=currentLadder[_0x3ef681(0x338)]();matchesPagination[_0x236f5c]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x2f329b,_0x51ec81){const _0x1b0511=a4_0xfdad8c,_0x55e24e=document['getElementById']('edit-match-modal');if(!_0x55e24e)return;try{const _0x5d957b=_0x51ec81==='D1'?_0x1b0511(0x465):_0x51ec81==='D2'?_0x1b0511(0x50b):_0x1b0511(0x10f),_0x4debfe=doc(db,_0x5d957b,_0x2f329b),_0x40ceef=await getDoc(_0x4debfe);if(!_0x40ceef[_0x1b0511(0x2c3)]()){showNotification('Match\x20not\x20found','error');return;}const _0x1e9535=_0x40ceef[_0x1b0511(0x474)]();document[_0x1b0511(0x158)](_0x1b0511(0x132))[_0x1b0511(0xdf)]=_0x2f329b,document['getElementById'](_0x1b0511(0x28b))[_0x1b0511(0xdf)]=_0x51ec81,document[_0x1b0511(0x158)](_0x1b0511(0x329))[_0x1b0511(0xdf)]=_0x1e9535[_0x1b0511(0x1de)]||'',document[_0x1b0511(0x158)](_0x1b0511(0xea))['value']=_0x1e9535[_0x1b0511(0x1f2)]||0x0,document[_0x1b0511(0x158)]('edit-match-winner-suicides')[_0x1b0511(0xdf)]=_0x1e9535[_0x1b0511(0x47f)]||0x0,document[_0x1b0511(0x158)](_0x1b0511(0x2ac))['value']=_0x1e9535['winnerComment']||'',document[_0x1b0511(0x158)]('edit-match-loser')[_0x1b0511(0xdf)]=_0x1e9535[_0x1b0511(0x4cb)]||'',document[_0x1b0511(0x158)](_0x1b0511(0x2ad))[_0x1b0511(0xdf)]=_0x1e9535['loserScore']||0x0,document[_0x1b0511(0x158)]('edit-match-loser-suicides')[_0x1b0511(0xdf)]=_0x1e9535[_0x1b0511(0x392)]||0x0,document['getElementById'](_0x1b0511(0x201))[_0x1b0511(0xdf)]=_0x1e9535['loserComment']||'',document['getElementById'](_0x1b0511(0x40c))[_0x1b0511(0xdf)]=_0x1e9535[_0x1b0511(0x179)]||'',document[_0x1b0511(0x158)](_0x1b0511(0x13f))[_0x1b0511(0xdf)]=_0x1e9535[_0x1b0511(0x106)]||'',document['getElementById'](_0x1b0511(0x244))[_0x1b0511(0xdf)]=_0x1e9535['loserDemoLink']||_0x1e9535[_0x1b0511(0x4b4)]||'',document['getElementById'](_0x1b0511(0x478))['textContent']=_0x1b0511(0x2f1)+_0x1e9535[_0x1b0511(0x1de)]+_0x1b0511(0x3c9)+_0x1e9535['loserUsername'],_0x55e24e[_0x1b0511(0x45f)][_0x1b0511(0x486)](_0x1b0511(0x20f));}catch(_0xc7a2d){console['error'](_0x1b0511(0x48d),_0xc7a2d),showNotification('Failed\x20to\x20load\x20match\x20data',_0x1b0511(0x240));}}function closeEditMatchModal(){const _0x16fd1f=a4_0xfdad8c,_0x18a1db=document[_0x16fd1f(0x158)]('edit-match-modal');_0x18a1db&&_0x18a1db[_0x16fd1f(0x45f)][_0x16fd1f(0x3e9)](_0x16fd1f(0x20f));}async function saveEditedMatch(){const _0x5eb503=a4_0xfdad8c;try{const _0x382e14=document[_0x5eb503(0x158)](_0x5eb503(0x132))['value'],_0x4be660=document[_0x5eb503(0x158)]('edit-match-ladder')[_0x5eb503(0xdf)];if(!_0x382e14||!_0x4be660){showNotification(_0x5eb503(0xef),_0x5eb503(0x240));return;}const _0x404103=_0x4be660==='D1'?_0x5eb503(0x465):_0x4be660==='D2'?_0x5eb503(0x50b):_0x5eb503(0x10f),_0xcb460f=document[_0x5eb503(0x158)](_0x5eb503(0x329))[_0x5eb503(0xdf)][_0x5eb503(0x509)](),_0x1b02bf=parseInt(document[_0x5eb503(0x158)](_0x5eb503(0xea))[_0x5eb503(0xdf)]),_0x30db55=parseInt(document[_0x5eb503(0x158)](_0x5eb503(0x21d))[_0x5eb503(0xdf)]),_0x3540b9=document[_0x5eb503(0x158)]('edit-match-winner-comment')['value'][_0x5eb503(0x509)](),_0x49cb7d=document[_0x5eb503(0x158)](_0x5eb503(0x501))['value'][_0x5eb503(0x509)](),_0x969955=parseInt(document[_0x5eb503(0x158)]('edit-match-loser-score')[_0x5eb503(0xdf)]),_0x421a58=parseInt(document[_0x5eb503(0x158)](_0x5eb503(0x302))['value']),_0x50fae1=document['getElementById'](_0x5eb503(0x201))[_0x5eb503(0xdf)][_0x5eb503(0x509)](),_0x35eec5=document[_0x5eb503(0x158)](_0x5eb503(0x40c))[_0x5eb503(0xdf)][_0x5eb503(0x509)](),_0x9a7797=document['getElementById'](_0x5eb503(0x13f))[_0x5eb503(0xdf)][_0x5eb503(0x509)](),_0x285cb8=document['getElementById'](_0x5eb503(0x244))[_0x5eb503(0xdf)][_0x5eb503(0x509)]();if(!_0xcb460f||!_0x49cb7d){showNotification(_0x5eb503(0x29c),'error');return;}await updateDoc(doc(db,_0x404103,_0x382e14),{'winnerUsername':_0xcb460f,'winnerScore':_0x1b02bf,'winnerSuicides':_0x30db55,'winnerComment':_0x3540b9,'loserUsername':_0x49cb7d,'loserScore':_0x969955,'loserSuicides':_0x421a58,'loserComment':_0x50fae1,'mapPlayed':_0x35eec5,'winnerDemoLink':_0x9a7797||null,'loserDemoLink':_0x285cb8||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x5eb503(0x35b)][_0x5eb503(0x206)],'isEdited':!![]}),showNotification(_0x5eb503(0x2af),_0x5eb503(0x350)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x4be660['toLowerCase']()][_0x5eb503(0x2ce)]);}catch(_0x27b06b){console['error'](_0x5eb503(0x112),_0x27b06b),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x27b06b['message'],_0x5eb503(0x240));}}async function openDeleteMatchModal(_0x2aaa81,_0x415c4d){const _0x5b383f=a4_0xfdad8c;try{const _0x2e5ef1=_0x415c4d==='D1'?_0x5b383f(0x465):_0x415c4d==='D2'?_0x5b383f(0x50b):'approvedMatchesD3',_0x5c27a7=doc(db,_0x2e5ef1,_0x2aaa81),_0x20e53f=await getDoc(_0x5c27a7);if(!_0x20e53f[_0x5b383f(0x2c3)]()){showNotification(_0x5b383f(0x220),_0x5b383f(0x240));return;}const _0x34580e=_0x20e53f[_0x5b383f(0x474)](),_0x4c09f7=document['getElementById'](_0x5b383f(0x37e));_0x4c09f7[_0x5b383f(0x468)]['matchId']=_0x2aaa81,_0x4c09f7['dataset'][_0x5b383f(0x318)]=_0x415c4d;const _0x2a1eb9=_0x34580e['approvedAt']?new Date(_0x34580e[_0x5b383f(0x463)][_0x5b383f(0x3a5)]*0x3e8)[_0x5b383f(0x23e)]():_0x5b383f(0x2c1),_0x3d1c3b=document[_0x5b383f(0x158)](_0x5b383f(0x1b4));_0x3d1c3b[_0x5b383f(0x2d3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x2a1eb9+_0x5b383f(0x492)+_0x34580e[_0x5b383f(0x1de)]+_0x5b383f(0x2ae)+_0x34580e[_0x5b383f(0x4cb)]+_0x5b383f(0x3a8)+(_0x34580e[_0x5b383f(0x1f2)]||0x0)+_0x5b383f(0x2f6)+(_0x34580e[_0x5b383f(0x249)]||0x0)+_0x5b383f(0xa7)+(_0x34580e[_0x5b383f(0x179)]||_0x5b383f(0x2c1))+_0x5b383f(0x47a)+_0x415c4d+_0x5b383f(0x218),_0x4c09f7[_0x5b383f(0x45f)][_0x5b383f(0x486)]('active');}catch(_0x2405ea){console[_0x5b383f(0x240)](_0x5b383f(0x355),_0x2405ea),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x213858=a4_0xfdad8c,_0xe87b3a=document['getElementById'](_0x213858(0x37e));_0xe87b3a&&(_0xe87b3a['classList'][_0x213858(0x3e9)]('active'),_0xe87b3a['removeAttribute'](_0x213858(0x3c2)),_0xe87b3a[_0x213858(0x104)](_0x213858(0x379)));}async function confirmDeleteMatch(){const _0x340c2c=a4_0xfdad8c,_0x258e8a=document[_0x340c2c(0x158)](_0x340c2c(0x37e)),_0x5c3a60=_0x258e8a[_0x340c2c(0x468)][_0x340c2c(0x37b)],_0xfc148e=_0x258e8a[_0x340c2c(0x468)][_0x340c2c(0x318)];if(!_0x5c3a60||!_0xfc148e){showNotification(_0x340c2c(0xef),_0x340c2c(0x240)),closeDeleteMatchModal();return;}try{const _0x157835=_0xfc148e==='D1'?'approvedMatches':_0xfc148e==='D2'?_0x340c2c(0x50b):'approvedMatchesD3';await deleteDoc(doc(db,_0x157835,_0x5c3a60)),showNotification(_0x340c2c(0x315),_0x340c2c(0x350)),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0xfc148e[_0x340c2c(0x338)]()][_0x340c2c(0x2ce)]);}catch(_0x1d307f){console[_0x340c2c(0x240)](_0x340c2c(0x4ed),_0x1d307f),showNotification(_0x340c2c(0x349)+_0x1d307f[_0x340c2c(0x2a8)],_0x340c2c(0x240));}}async function saveHighlightChanges(){const _0x6df51f=a4_0xfdad8c,_0x3cd26b=document[_0x6df51f(0x158)](_0x6df51f(0x4e6))[_0x6df51f(0xdf)],_0x13b8ff=document[_0x6df51f(0x158)]('edit-highlight-type-select')[_0x6df51f(0xdf)];let _0x4e7b29={'title':document['getElementById'](_0x6df51f(0x196))['value'][_0x6df51f(0x509)](),'type':_0x13b8ff,'description':document['getElementById'](_0x6df51f(0x363))[_0x6df51f(0xdf)]['trim'](),'videoId':document[_0x6df51f(0x158)](_0x6df51f(0x50e))[_0x6df51f(0xdf)][_0x6df51f(0x509)](),'submittedBy':auth[_0x6df51f(0x35b)][_0x6df51f(0x206)]};if(_0x13b8ff===_0x6df51f(0x1e1)){_0x4e7b29[_0x6df51f(0xcf)]=document['getElementById'](_0x6df51f(0x162))[_0x6df51f(0xdf)]['trim'](),_0x4e7b29[_0x6df51f(0x502)]=document[_0x6df51f(0x158)](_0x6df51f(0x23f))[_0x6df51f(0xdf)]['trim']();const _0x3ab1a4=document[_0x6df51f(0x158)]('edit-highlight-matchDate-input')[_0x6df51f(0xdf)];_0x4e7b29['matchDate']=_0x3ab1a4?Timestamp[_0x6df51f(0x333)](new Date(_0x3ab1a4)):null,_0x4e7b29[_0x6df51f(0x159)]=document['getElementById'](_0x6df51f(0x1f4))[_0x6df51f(0xdf)][_0x6df51f(0x509)](),_0x4e7b29[_0x6df51f(0x1f2)]=document[_0x6df51f(0x158)](_0x6df51f(0x25d))[_0x6df51f(0xdf)]['trim'](),_0x4e7b29[_0x6df51f(0x3f4)]=document['getElementById'](_0x6df51f(0x11e))['value'][_0x6df51f(0x509)](),_0x4e7b29[_0x6df51f(0x249)]=document['getElementById'](_0x6df51f(0x193))[_0x6df51f(0xdf)][_0x6df51f(0x509)](),_0x4e7b29[_0x6df51f(0x32c)]=document[_0x6df51f(0x158)](_0x6df51f(0x1e0))[_0x6df51f(0xdf)]['trim'](),_0x4e7b29[_0x6df51f(0x47c)]=null,_0x4e7b29[_0x6df51f(0x1f0)]=null,_0x4e7b29[_0x6df51f(0x3f3)]=null,_0x4e7b29['achievementPlayer']=null,_0x4e7b29[_0x6df51f(0x3df)]=null,_0x4e7b29[_0x6df51f(0x33a)]=null,_0x4e7b29[_0x6df51f(0x377)]=null;}else{if(_0x13b8ff===_0x6df51f(0x165))_0x4e7b29[_0x6df51f(0x502)]=document[_0x6df51f(0x158)](_0x6df51f(0x23f))[_0x6df51f(0xdf)]['trim'](),_0x4e7b29['mapCreator']=document[_0x6df51f(0x158)]('edit-highlight-mapCreator-input')[_0x6df51f(0xdf)]['trim'](),_0x4e7b29[_0x6df51f(0x1f0)]=document[_0x6df51f(0x158)](_0x6df51f(0x306))[_0x6df51f(0xdf)]['trim'](),_0x4e7b29[_0x6df51f(0x3f3)]=document[_0x6df51f(0x158)](_0x6df51f(0x18a))[_0x6df51f(0xdf)][_0x6df51f(0x509)](),_0x4e7b29[_0x6df51f(0xcf)]=null,_0x4e7b29[_0x6df51f(0x48a)]=null,_0x4e7b29[_0x6df51f(0x159)]=null,_0x4e7b29['winnerScore']=null,_0x4e7b29[_0x6df51f(0x3f4)]=null,_0x4e7b29[_0x6df51f(0x249)]=null,_0x4e7b29['matchLink']=null,_0x4e7b29['achievementPlayer']=null,_0x4e7b29[_0x6df51f(0x3df)]=null,_0x4e7b29[_0x6df51f(0x33a)]=null,_0x4e7b29[_0x6df51f(0x377)]=null;else _0x13b8ff===_0x6df51f(0xf0)&&(_0x4e7b29[_0x6df51f(0x1f8)]=document['getElementById'](_0x6df51f(0x1c6))[_0x6df51f(0xdf)][_0x6df51f(0x509)](),_0x4e7b29['achievementType']=document[_0x6df51f(0x158)](_0x6df51f(0x289))[_0x6df51f(0xdf)][_0x6df51f(0x509)](),_0x4e7b29['achievementDetails']=document[_0x6df51f(0x158)](_0x6df51f(0x451))[_0x6df51f(0xdf)][_0x6df51f(0x509)](),_0x4e7b29[_0x6df51f(0x377)]=document[_0x6df51f(0x158)](_0x6df51f(0x43b))[_0x6df51f(0xdf)]['trim'](),_0x4e7b29[_0x6df51f(0xcf)]=null,_0x4e7b29['map']=null,_0x4e7b29[_0x6df51f(0x48a)]=null,_0x4e7b29[_0x6df51f(0x159)]=null,_0x4e7b29[_0x6df51f(0x1f2)]=null,_0x4e7b29['loserName']=null,_0x4e7b29[_0x6df51f(0x249)]=null,_0x4e7b29[_0x6df51f(0x32c)]=null,_0x4e7b29[_0x6df51f(0x47c)]=null,_0x4e7b29['mapVersion']=null,_0x4e7b29['creatorImageUrl']=null);}try{if(_0x3cd26b){_0x4e7b29[_0x6df51f(0x164)]=serverTimestamp();const _0x5633ae=doc(db,'highlights',_0x3cd26b);await updateDoc(_0x5633ae,_0x4e7b29),showNotification('Highlight\x20updated\x20successfully!',_0x6df51f(0x350));}else _0x4e7b29['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x4e7b29),showNotification(_0x6df51f(0x50d),_0x6df51f(0x350));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x32ab5c){console[_0x6df51f(0x240)]('Error\x20saving\x20highlight:',_0x32ab5c),showNotification(_0x6df51f(0x192)+_0x32ab5c[_0x6df51f(0x2a8)],_0x6df51f(0x240));}}async function resimulateMatch(){const _0x2baea8=a4_0xfdad8c;try{const _0x2008b2=document[_0x2baea8(0x158)](_0x2baea8(0x1ee))['value'];if(!_0x2008b2){showNotification('Match\x20ID\x20is\x20required',_0x2baea8(0x240));return;}const _0x27e99c=auth[_0x2baea8(0x35b)];if(!_0x27e99c){showNotification(_0x2baea8(0x1ea),_0x2baea8(0x240));return;}const _0x300e60=currentLadder==='D1'?_0x2baea8(0x465):currentLadder==='D2'?_0x2baea8(0x50b):_0x2baea8(0x10f),_0x3f45aa=doc(db,_0x300e60,_0x2008b2),_0x1d68f6=await getDoc(_0x3f45aa);if(!_0x1d68f6['exists']()){showNotification(_0x2baea8(0x3a6),'error');return;}const _0x2f8536=_0x1d68f6[_0x2baea8(0x474)](),_0x32e560=_0x2f8536[_0x2baea8(0x463)]?_0x2f8536[_0x2baea8(0x463)][_0x2baea8(0xff)]()['toLocaleString']():_0x2f8536[_0x2baea8(0x48a)]?_0x2f8536['matchDate']['toDate']?_0x2f8536['matchDate'][_0x2baea8(0xff)]()[_0x2baea8(0xcc)]():new Date(_0x2f8536[_0x2baea8(0x48a)])['toLocaleString']():_0x2baea8(0x1b8),_0x2bf01e=_0x2baea8(0x28a)+_0x2f8536[_0x2baea8(0x1de)]+_0x2baea8(0xd7)+_0x2f8536[_0x2baea8(0x4cb)]+_0x2baea8(0x15b)+_0x2f8536['winnerScore']+'-'+_0x2f8536[_0x2baea8(0x249)]+_0x2baea8(0x222)+(_0x2f8536[_0x2baea8(0x179)]||_0x2f8536[_0x2baea8(0x1bf)]||_0x2baea8(0x1b8))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x32e560+_0x2baea8(0x38d)+_0x2008b2+_0x2baea8(0x1cf)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x2baea8(0x158)](_0x2baea8(0x2be))[_0x2baea8(0x2d3)]=_0x2bf01e,document[_0x2baea8(0x158)]('match-details-container')[_0x2baea8(0x229)][_0x2baea8(0x261)]=_0x2baea8(0xb8),document[_0x2baea8(0x158)](_0x2baea8(0x29d))[_0x2baea8(0x229)]['display']=_0x2baea8(0xb8),window[_0x2baea8(0x3fc)]={'matchId':_0x2008b2,'matchData':_0x2f8536,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0x2baea8(0x447));}catch(_0x13d654){console['error']('Error\x20finding\x20match:',_0x13d654),showNotification(_0x2baea8(0x4fe)+_0x13d654[_0x2baea8(0x2a8)],_0x2baea8(0x240));}}async function confirmResimulateMatch(){const _0x2b9fbb=a4_0xfdad8c;try{const {matchId:_0x297b81,matchData:_0xae6647,ladder:_0x32ce62}=window[_0x2b9fbb(0x3fc)];if(!_0x297b81||!_0xae6647){showNotification(_0x2b9fbb(0x43e),'error');return;}const _0x5269d3=_0x32ce62==='D1'?'players':_0x32ce62==='D2'?_0x2b9fbb(0x223):_0x2b9fbb(0x3ef),_0x218a2a=_0x32ce62==='D1'?_0x2b9fbb(0x197):_0x32ce62==='D2'?'eloHistoryD2':_0x2b9fbb(0x3e1),[_0x450602,_0x358d57]=await Promise[_0x2b9fbb(0x30b)]([getDocs(query(collection(db,_0x5269d3),where(_0x2b9fbb(0x517),'==',_0xae6647[_0x2b9fbb(0x1de)]))),getDocs(query(collection(db,_0x5269d3),where(_0x2b9fbb(0x517),'==',_0xae6647['loserUsername'])))]);if(_0x450602['empty']||_0x358d57[_0x2b9fbb(0x332)]){showNotification(_0x2b9fbb(0x495),_0x2b9fbb(0x240));return;}const _0x2e3a09=_0x450602[_0x2b9fbb(0x371)][0x0]['id'],_0x3c8666=_0x358d57[_0x2b9fbb(0x371)][0x0]['id'],_0x44b918=_0x450602[_0x2b9fbb(0x371)][0x0][_0x2b9fbb(0x474)](),_0x33e897=_0x358d57['docs'][0x0][_0x2b9fbb(0x474)](),[_0x2ec415,_0x4d133d]=await Promise[_0x2b9fbb(0x30b)]([getDocs(query(collection(db,_0x218a2a),where(_0x2b9fbb(0x3de),'==',_0x2e3a09),where('matchId','==',_0x297b81))),getDocs(query(collection(db,_0x218a2a),where(_0x2b9fbb(0x3de),'==',_0x3c8666),where(_0x2b9fbb(0x37b),'==',_0x297b81)))]),_0x3b1e64=!_0x2ec415[_0x2b9fbb(0x332)],_0x5766f8=!_0x4d133d[_0x2b9fbb(0x332)],_0x10dd34=_0x2b9fbb(0x16d)+(_0x3b1e64?'✅\x20Exists':_0x2b9fbb(0x410))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x5766f8?_0x2b9fbb(0x1ba):'❌\x20Missing')+_0x2b9fbb(0x23d)+(_0x44b918[_0x2b9fbb(0x2ca)]||_0x2b9fbb(0x1b8))+_0x2b9fbb(0x380)+(_0x33e897[_0x2b9fbb(0x2ca)]||_0x2b9fbb(0x1b8))+_0x2b9fbb(0x386)+(_0x44b918[_0x2b9fbb(0x374)]||_0x2b9fbb(0x1b8))+_0x2b9fbb(0x442)+(_0x33e897[_0x2b9fbb(0x374)]||_0x2b9fbb(0x1b8))+_0x2b9fbb(0x3b9);document[_0x2b9fbb(0x158)](_0x2b9fbb(0xe6))[_0x2b9fbb(0x2d3)]=_0x10dd34,document[_0x2b9fbb(0x158)]('validation-results-container')[_0x2b9fbb(0x229)][_0x2b9fbb(0x261)]=_0x2b9fbb(0xb8);if(_0x3b1e64&&_0x5766f8){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.',_0x2b9fbb(0x250));return;}showNotification(_0x2b9fbb(0x500),_0x2b9fbb(0x447));const _0x21ed85=_0xae6647['approvedAt']||_0xae6647[_0x2b9fbb(0x48a)]||serverTimestamp(),[_0x344c51,_0x16dfe9]=await Promise[_0x2b9fbb(0x30b)]([getPlayerEloAtTime(_0x2e3a09,_0x21ed85,_0x218a2a),getPlayerEloAtTime(_0x3c8666,_0x21ed85,_0x218a2a)]),{calculateElo:_0xbc98e6}=await import(_0x2b9fbb(0x105)),{newWinnerRating:_0xd28bb8,newLoserRating:_0x194f34}=_0xbc98e6(_0x344c51,_0x16dfe9),_0x2a77ac=_0x44b918[_0x2b9fbb(0x374)]||Number['MAX_SAFE_INTEGER'],_0x5b5fac=_0x33e897['position']||Number[_0x2b9fbb(0x194)];let _0x13969f=_0x2a77ac,_0x4e6916=_0x5b5fac;_0x2a77ac>_0x5b5fac&&(_0x13969f=_0x5b5fac,_0x4e6916=_0x5b5fac+0x1);const _0x15c425=writeBatch(db),_0x5de0a5=doc(db,_0x5269d3,_0x2e3a09);_0x15c425[_0x2b9fbb(0x1eb)](_0x5de0a5,{'eloRating':_0xd28bb8,'position':_0x13969f,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x2b9fbb(0x35b)][_0x2b9fbb(0x1da)]});const _0x43e519=doc(db,_0x5269d3,_0x3c8666);_0x15c425['update'](_0x43e519,{'eloRating':_0x194f34,'position':_0x4e6916,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x2b9fbb(0x1da)]});if(_0x2a77ac>_0x5b5fac){const _0x3edaeb=await getDocs(query(collection(db,_0x5269d3),where(_0x2b9fbb(0x374),'>',_0x5b5fac),where('position','<',_0x2a77ac)));_0x3edaeb[_0x2b9fbb(0x3b5)](_0x312c25=>{const _0x18d502=_0x2b9fbb,_0x5da58b=doc(db,_0x5269d3,_0x312c25['id']),_0x132ff4=_0x312c25[_0x18d502(0x474)]()[_0x18d502(0x374)];_0x15c425['update'](_0x5da58b,{'position':_0x132ff4+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x18d502(0x276),'positionAdjustedAt':serverTimestamp()});});}if(!_0x3b1e64){const _0x4055b5=doc(collection(db,_0x218a2a));_0x15c425[_0x2b9fbb(0x208)](_0x4055b5,{'playerId':_0x2e3a09,'player':_0xae6647[_0x2b9fbb(0x1de)],'previousElo':_0x344c51,'newElo':_0xd28bb8,'eloChange':_0xd28bb8-_0x344c51,'opponentId':_0x3c8666,'opponent':_0xae6647[_0x2b9fbb(0x4cb)],'matchResult':_0x2b9fbb(0x504),'previousPosition':_0x2a77ac,'newPosition':_0x13969f,'positionChange':_0x13969f-_0x2a77ac,'matchId':_0x297b81,'timestamp':_0x21ed85,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x32ce62,'matchScore':_0xae6647[_0x2b9fbb(0x1f2)]+'-'+_0xae6647['loserScore'],'mapPlayed':_0xae6647[_0x2b9fbb(0x179)]||_0xae6647['mapName']||_0x2b9fbb(0x1b8),'note':_0x2b9fbb(0x2e3)});}if(!_0x5766f8){const _0x4b3eee=doc(collection(db,_0x218a2a));_0x15c425[_0x2b9fbb(0x208)](_0x4b3eee,{'playerId':_0x3c8666,'player':_0xae6647['loserUsername'],'previousElo':_0x16dfe9,'newElo':_0x194f34,'eloChange':_0x194f34-_0x16dfe9,'opponentId':_0x2e3a09,'opponent':_0xae6647[_0x2b9fbb(0x1de)],'matchResult':_0x2b9fbb(0x3ae),'previousPosition':_0x5b5fac,'newPosition':_0x4e6916,'positionChange':_0x4e6916-_0x5b5fac,'matchId':_0x297b81,'timestamp':_0x21ed85,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x2b9fbb(0x35b)]['uid'],'gameMode':_0x32ce62,'matchScore':_0xae6647[_0x2b9fbb(0x1f2)]+'-'+_0xae6647[_0x2b9fbb(0x249)],'mapPlayed':_0xae6647['mapPlayed']||_0xae6647[_0x2b9fbb(0x1bf)]||_0x2b9fbb(0x1b8),'note':_0x2b9fbb(0x2e3)});}const _0x4d5978=_0x32ce62==='D1'?_0x2b9fbb(0x465):_0x32ce62==='D2'?_0x2b9fbb(0x50b):_0x2b9fbb(0x10f),_0xad47ba=doc(db,_0x4d5978,_0x297b81);_0x15c425['update'](_0xad47ba,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x2b9fbb(0x35b)]['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x44b918['eloRating'],'originalLoserElo':_0x33e897[_0x2b9fbb(0x2ca)],'originalWinnerPosition':_0x2a77ac,'originalLoserPosition':_0x5b5fac,'resimulatedWinnerElo':_0xd28bb8,'resimulatedLoserElo':_0x194f34,'resimulatedWinnerPosition':_0x13969f,'resimulatedLoserPosition':_0x4e6916}),await _0x15c425[_0x2b9fbb(0x516)]();const _0x5dfe15=(!_0x3b1e64?0x1:0x0)+(!_0x5766f8?0x1:0x0),_0x42a3ff=_0x2a77ac!==_0x13969f||_0x5b5fac!==_0x4e6916;showNotification(_0x2b9fbb(0x3bf)+(_0x2b9fbb(0x148)+_0x5dfe15+_0x2b9fbb(0xb3))+(_0x2b9fbb(0x35e)+_0x344c51+'→'+_0xd28bb8+_0x2b9fbb(0x29e)+(_0xd28bb8-_0x344c51)+_0x2b9fbb(0x205))+(_0x2b9fbb(0x127)+_0x16dfe9+'→'+_0x194f34+'\x20('+(_0x194f34-_0x16dfe9)+_0x2b9fbb(0x4f2))+(''+(_0x42a3ff?_0x2b9fbb(0x1db)+_0x2a77ac+'→'+_0x13969f+_0x2b9fbb(0x44e)+_0x5b5fac+'→'+_0x4e6916:_0x2b9fbb(0x46e))),'success'),closeResimulateModal(),document[_0x2b9fbb(0x30f)]('#players.content-section.active')&&loadPlayersData();}catch(_0x24368a){console[_0x2b9fbb(0x240)](_0x2b9fbb(0xce),_0x24368a),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x24368a[_0x2b9fbb(0x2a8)],_0x2b9fbb(0x240));}}async function getPlayerEloAtTime(_0x18d21d,_0x231b01,_0x6d7a84){const _0x19ad96=a4_0xfdad8c;try{const _0x1c4b31=_0x231b01[_0x19ad96(0xff)]?_0x231b01[_0x19ad96(0xff)]():new Date(_0x231b01),_0x98ac7e=query(collection(db,_0x6d7a84),where(_0x19ad96(0x3de),'==',_0x18d21d),where(_0x19ad96(0x294),'<',_0x231b01),orderBy('timestamp',_0x19ad96(0x4c7)),limit(0x1)),_0x5f02c3=await getDocs(_0x98ac7e);if(!_0x5f02c3[_0x19ad96(0x332)]){const _0x1a07d4=_0x5f02c3['docs'][0x0][_0x19ad96(0x474)]();return console['log'](_0x19ad96(0x13d)+_0x18d21d+_0x19ad96(0x4a7)+_0x1a07d4[_0x19ad96(0x4db)]),_0x1a07d4[_0x19ad96(0x4db)];}else return console[_0x19ad96(0x4ca)](_0x19ad96(0xaa)+_0x18d21d+_0x19ad96(0x375)),0x4b0;}catch(_0x10a1dc){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x18d21d+':',_0x10a1dc),0x4b0;}}function openResimulateModal(){const _0x4db9ed=a4_0xfdad8c;console[_0x4db9ed(0x4ca)]('openResimulateModal\x20called!');const _0x43993e=document['getElementById'](_0x4db9ed(0x4bf));console['log'](_0x4db9ed(0x301),_0x43993e);if(!_0x43993e){console[_0x4db9ed(0x240)](_0x4db9ed(0x266));return;}_0x43993e[_0x4db9ed(0x229)][_0x4db9ed(0x261)]=_0x4db9ed(0xb8),_0x43993e[_0x4db9ed(0x229)][_0x4db9ed(0x459)]=_0x4db9ed(0xed),_0x43993e[_0x4db9ed(0x229)][_0x4db9ed(0x327)]='1',_0x43993e['classList']['add'](_0x4db9ed(0x20f)),console['log'](_0x4db9ed(0xf6)),console[_0x4db9ed(0x4ca)](_0x4db9ed(0x431),window[_0x4db9ed(0x3d4)](_0x43993e)[_0x4db9ed(0x261)]);const _0x5124da=document['getElementById'](_0x4db9ed(0x2be)),_0x5da371=document[_0x4db9ed(0x158)](_0x4db9ed(0xe6)),_0x3631e8=document[_0x4db9ed(0x158)](_0x4db9ed(0x29d)),_0x4998f8=document[_0x4db9ed(0x158)](_0x4db9ed(0x1ee));if(_0x5124da)_0x5124da['innerHTML']='';if(_0x5da371)_0x5da371['innerHTML']='';if(_0x3631e8)_0x3631e8[_0x4db9ed(0x229)][_0x4db9ed(0x261)]=_0x4db9ed(0x337);if(_0x4998f8)_0x4998f8['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x5b43a7=a4_0xfdad8c;document[_0x5b43a7(0x158)]('resimulate-modal')[_0x5b43a7(0x229)]['display']=_0x5b43a7(0x337),window[_0x5b43a7(0x3fc)]=null;}window[a4_0xfdad8c(0x4a2)]=resimulateMatch,window[a4_0xfdad8c(0x11d)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0xfdad8c(0x13c)]=closeResimulateModal;async function loadPointsData(){const _0x546ca7=a4_0xfdad8c;console[_0x546ca7(0x4ca)](_0x546ca7(0x3f8));try{await Promise[_0x546ca7(0x30b)]([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x546ca7(0x420),'success');}catch(_0x28e26c){console[_0x546ca7(0x240)](_0x546ca7(0x150),_0x28e26c),showNotification(_0x546ca7(0x41b)+_0x28e26c[_0x546ca7(0x2a8)],_0x546ca7(0x240));}}function renderPointsOverview(_0x2c954b){const _0x45c94a=a4_0xfdad8c,_0x1e811b=document['getElementById'](_0x45c94a(0x3c4));if(!_0x1e811b)return;if(_0x2c954b[_0x45c94a(0x317)]===0x0){_0x1e811b[_0x45c94a(0x2d3)]=_0x45c94a(0x2bb);return;}_0x1e811b[_0x45c94a(0x2d3)]='',_0x2c954b[_0x45c94a(0x3b5)](_0x10d8c2=>{const _0x6a9796=_0x45c94a,_0x35df29=document[_0x6a9796(0x156)]('tr'),_0x13bab2=_0x10d8c2[_0x6a9796(0xc6)]||_0x10d8c2[_0x6a9796(0x517)]||_0x6a9796(0xd6),_0x73d088=_0x10d8c2[_0x6a9796(0x206)]||_0x6a9796(0x116),_0x53fd36=_0x10d8c2['points']||0x0,_0x1db7fc=_0x10d8c2[_0x6a9796(0x4fc)]?new Date(_0x10d8c2['lastPointsModified']['seconds']*0x3e8)[_0x6a9796(0x23e)]():_0x6a9796(0x473);_0x35df29[_0x6a9796(0x2d3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x13bab2+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x73d088+_0x6a9796(0x423)+(_0x53fd36>0x3e8?_0x6a9796(0x4b5):_0x53fd36>0x1f4?_0x6a9796(0x17b):_0x6a9796(0x195))+_0x6a9796(0x401)+_0x53fd36['toLocaleString']()+_0x6a9796(0x251)+_0x1db7fc+_0x6a9796(0x163)+_0x10d8c2['id']+_0x6a9796(0x28f)+_0x10d8c2['id']+_0x6a9796(0x365),_0x1e811b[_0x6a9796(0x136)](_0x35df29);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x17e996=a4_0xfdad8c;console[_0x17e996(0x4ca)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x5eedc0=document['querySelectorAll'](_0x17e996(0x41f));console[_0x17e996(0x4ca)](_0x17e996(0x2eb)+_0x5eedc0[_0x17e996(0x317)]+_0x17e996(0x187)),_0x5eedc0['forEach'](_0x2e509b=>{const _0x6a67c6=_0x17e996,_0x3187f7=_0x2e509b[_0x6a67c6(0x27d)](!![]);_0x2e509b[_0x6a67c6(0x135)]['replaceChild'](_0x3187f7,_0x2e509b);});const _0x27fab9=document[_0x17e996(0x2d4)](_0x17e996(0x1e9));console[_0x17e996(0x4ca)](_0x17e996(0x2eb)+_0x27fab9['length']+'\x20view\x20history\x20buttons'),_0x27fab9['forEach'](_0x2b5115=>{const _0x5080d1=_0x17e996,_0x59816c=_0x2b5115[_0x5080d1(0x27d)](!![]);_0x2b5115[_0x5080d1(0x135)][_0x5080d1(0x3c5)](_0x59816c,_0x2b5115);}),document[_0x17e996(0x2d4)]('.quick-edit-btn')['forEach'](_0x973c4e=>{const _0x2f1c8a=_0x17e996;_0x973c4e[_0x2f1c8a(0x234)](_0x2f1c8a(0x42d),function(_0x2b0af3){const _0x2ed9b3=_0x2f1c8a;_0x2b0af3[_0x2ed9b3(0x18b)](),_0x2b0af3[_0x2ed9b3(0x383)]();const _0x226446=this['dataset']['userId'];console[_0x2ed9b3(0x4ca)](_0x2ed9b3(0xe2),_0x226446);if(!_0x226446){console[_0x2ed9b3(0x240)](_0x2ed9b3(0x421));return;}this[_0x2ed9b3(0x229)][_0x2ed9b3(0x327)]=_0x2ed9b3(0x396),setTimeout(()=>{const _0x597bcf=_0x2ed9b3;this[_0x597bcf(0x229)]['opacity']='1';},0xc8),openQuickEditModal(_0x226446);});}),document['querySelectorAll'](_0x17e996(0x1e9))[_0x17e996(0x3b5)](_0x2c9e67=>{const _0x2e99e2=_0x17e996;_0x2c9e67[_0x2e99e2(0x234)](_0x2e99e2(0x42d),function(_0x445198){const _0x33160a=_0x2e99e2;_0x445198[_0x33160a(0x18b)](),_0x445198['stopPropagation']();const _0xfbdb21=this['dataset'][_0x33160a(0x3c0)];console[_0x33160a(0x4ca)](_0x33160a(0x408),_0xfbdb21);if(!_0xfbdb21){console[_0x33160a(0x240)](_0x33160a(0x421));return;}this[_0x33160a(0x229)][_0x33160a(0x327)]='0.6',setTimeout(()=>{const _0x4382cf=_0x33160a;this['style'][_0x4382cf(0x327)]='1';},0xc8),loadUserPointsHistory(_0xfbdb21);});}),console[_0x17e996(0x4ca)](_0x17e996(0x316));}async function openQuickEditModal(_0xf69c99){const _0x3c8e60=a4_0xfdad8c;console[_0x3c8e60(0x4ca)](_0x3c8e60(0x1dd),_0xf69c99);const _0x3927e2=document[_0x3c8e60(0x158)]('quick-edit-points-modal');if(!_0x3927e2){console[_0x3c8e60(0x240)](_0x3c8e60(0x16f)),showNotification(_0x3c8e60(0x38b),_0x3c8e60(0x240));return;}try{showNotification(_0x3c8e60(0x16e),_0x3c8e60(0x447));const _0xaf3bb1=doc(db,_0x3c8e60(0xf9),_0xf69c99),_0x34812c=await getDoc(_0xaf3bb1);if(!_0x34812c[_0x3c8e60(0x2c3)]()){showNotification(_0x3c8e60(0x130),_0x3c8e60(0x240));return;}const _0x2e7e94=_0x34812c['data']();console[_0x3c8e60(0x4ca)]('User\x20data\x20loaded:',_0x2e7e94);const _0xeaedc=document[_0x3c8e60(0x158)]('quick-edit-user-id'),_0x27fc42=document[_0x3c8e60(0x158)](_0x3c8e60(0x4e7)),_0x11f378=document['getElementById'](_0x3c8e60(0x238)),_0x145b6c=document['getElementById'](_0x3c8e60(0x4df)),_0x1a17d0=document['getElementById'](_0x3c8e60(0xd1));if(!_0xeaedc||!_0x27fc42||!_0x11f378||!_0x145b6c||!_0x1a17d0){console[_0x3c8e60(0x240)]('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x3c8e60(0x385),_0x3c8e60(0x240));return;}_0xeaedc[_0x3c8e60(0xdf)]=_0xf69c99,_0x27fc42[_0x3c8e60(0x3cb)]=_0x2e7e94[_0x3c8e60(0xc6)]||_0x2e7e94[_0x3c8e60(0x517)]||_0x3c8e60(0xd6),_0x11f378[_0x3c8e60(0x3cb)]=_0x2e7e94[_0x3c8e60(0x206)]||_0x3c8e60(0x116),_0x145b6c[_0x3c8e60(0x3cb)]=(_0x2e7e94[_0x3c8e60(0x2ed)]||0x0)[_0x3c8e60(0xcc)](),_0x1a17d0[_0x3c8e60(0x255)]();const _0x513daa=document['getElementById'](_0x3c8e60(0x15c));_0x513daa&&(_0x513daa[_0x3c8e60(0x267)]=!![]);_0x3927e2[_0x3c8e60(0x45f)][_0x3c8e60(0x486)]('active'),console['log'](_0x3c8e60(0x45c));const _0x12ba2e=document[_0x3c8e60(0x158)](_0x3c8e60(0x4b3));_0x12ba2e&&setTimeout(()=>_0x12ba2e[_0x3c8e60(0x2b6)](),0x64);}catch(_0x5a582b){console[_0x3c8e60(0x240)](_0x3c8e60(0x340),_0x5a582b),showNotification(_0x3c8e60(0xf4)+_0x5a582b[_0x3c8e60(0x2a8)],_0x3c8e60(0x240));}}function closeQuickEditModal(){const _0x9285ae=a4_0xfdad8c,_0x5b5b46=document[_0x9285ae(0x158)](_0x9285ae(0xbc));_0x5b5b46&&_0x5b5b46[_0x9285ae(0x45f)]['remove']('active');}async function handleQuickEditPoints(_0x4d1c38){const _0x4c1459=a4_0xfdad8c;_0x4d1c38[_0x4c1459(0x18b)]();const _0x3f4998=document[_0x4c1459(0x158)]('quick-edit-user-id')['value'],_0x3cb598=document[_0x4c1459(0x30f)](_0x4c1459(0x314))['value'],_0x1964a7=parseInt(document[_0x4c1459(0x158)](_0x4c1459(0x4b3))[_0x4c1459(0xdf)]),_0x2121b3=document['getElementById'](_0x4c1459(0x35d))[_0x4c1459(0xdf)][_0x4c1459(0x509)]();console[_0x4c1459(0x4ca)]('Processing\x20points\x20edit:',{'userId':_0x3f4998,'action':_0x3cb598,'amount':_0x1964a7,'reason':_0x2121b3});if(!_0x3f4998||!_0x1964a7||_0x1964a7<0x0){showNotification(_0x4c1459(0x258),'error');return;}try{await modifyUserPoints(_0x3f4998,_0x3cb598,_0x1964a7,_0x2121b3),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x3f4998);}catch(_0x2b803b){console[_0x4c1459(0x240)](_0x4c1459(0x3a0),_0x2b803b),showNotification(_0x4c1459(0x114)+_0x2b803b[_0x4c1459(0x2a8)],_0x4c1459(0x240));}}async function searchUsersForPoints(){const _0x7e2184=a4_0xfdad8c,_0x22bafb=document['getElementById'](_0x7e2184(0x460))[_0x7e2184(0xdf)][_0x7e2184(0x509)]()[_0x7e2184(0x338)](),_0x324d0b=document[_0x7e2184(0x158)](_0x7e2184(0xd3));if(!_0x22bafb||_0x22bafb[_0x7e2184(0x317)]<0x2){_0x324d0b[_0x7e2184(0x2d3)]='';return;}_0x324d0b['innerHTML']=_0x7e2184(0x4de);try{const _0x2d668f=collection(db,_0x7e2184(0xf9)),_0x9fd064=await getDocs(_0x2d668f),_0x11b7e4=[];_0x9fd064[_0x7e2184(0x3b5)](_0x1b1572=>{const _0x3aaf10=_0x7e2184,_0x58553f=_0x1b1572['data'](),_0x5ef889=(_0x58553f[_0x3aaf10(0xc6)]||_0x58553f[_0x3aaf10(0x517)]||'')[_0x3aaf10(0x338)](),_0x96fc63=(_0x58553f[_0x3aaf10(0x206)]||'')[_0x3aaf10(0x338)]();(_0x5ef889[_0x3aaf10(0x4fb)](_0x22bafb)||_0x96fc63[_0x3aaf10(0x4fb)](_0x22bafb))&&_0x11b7e4[_0x3aaf10(0xbe)]({'id':_0x1b1572['id'],..._0x58553f});});if(_0x11b7e4[_0x7e2184(0x317)]===0x0){_0x324d0b[_0x7e2184(0x2d3)]=_0x7e2184(0x213);return;}_0x324d0b['innerHTML']='',_0x11b7e4[_0x7e2184(0x3b5)](_0x3a6230=>{const _0xb4498=_0x7e2184,_0x1589ce=document[_0xb4498(0x156)]('div');_0x1589ce[_0xb4498(0x50f)]=_0xb4498(0x247),_0x1589ce[_0xb4498(0x2d3)]=_0xb4498(0x279)+(_0x3a6230[_0xb4498(0xc6)]||_0x3a6230[_0xb4498(0x517)]||_0xb4498(0x1b8))+_0xb4498(0x384)+(_0x3a6230[_0xb4498(0x206)]||_0xb4498(0x116))+_0xb4498(0x176)+(_0x3a6230[_0xb4498(0x2ed)]||0x0)[_0xb4498(0xcc)]()+_0xb4498(0x264),_0x1589ce['addEventListener'](_0xb4498(0x42d),()=>selectUserForPoints(_0x3a6230)),_0x324d0b[_0xb4498(0x136)](_0x1589ce);});}catch(_0x2ab3af){console[_0x7e2184(0x240)](_0x7e2184(0x297),_0x2ab3af),_0x324d0b['innerHTML']=_0x7e2184(0x4c0);}}function selectUserForPoints(_0x33ac81){const _0x5b06f4=a4_0xfdad8c;document[_0x5b06f4(0x158)](_0x5b06f4(0x346))['textContent']=_0x33ac81[_0x5b06f4(0xc6)]||_0x33ac81[_0x5b06f4(0x517)]||'Unknown\x20User',document[_0x5b06f4(0x158)](_0x5b06f4(0xf2))['textContent']=(_0x33ac81[_0x5b06f4(0x2ed)]||0x0)[_0x5b06f4(0xcc)](),document[_0x5b06f4(0x158)]('selected-user-id')[_0x5b06f4(0xdf)]=_0x33ac81['id'],document[_0x5b06f4(0x158)](_0x5b06f4(0x124))[_0x5b06f4(0x229)]['display']=_0x5b06f4(0xb8),document[_0x5b06f4(0x158)](_0x5b06f4(0x288))[_0x5b06f4(0x229)][_0x5b06f4(0x261)]=_0x5b06f4(0xb8),document[_0x5b06f4(0x158)](_0x5b06f4(0xd3))[_0x5b06f4(0x2d3)]='',document[_0x5b06f4(0x158)](_0x5b06f4(0x460))['value']='';}async function handleModifyPoints(_0x56d984){const _0x24abcd=a4_0xfdad8c;_0x56d984['preventDefault']();const _0x41285b=document[_0x24abcd(0x158)]('selected-user-id')['value'],_0x421ab9=document[_0x24abcd(0x158)](_0x24abcd(0x1d6))[_0x24abcd(0xdf)],_0x2aee0f=parseInt(document[_0x24abcd(0x158)]('points-amount')[_0x24abcd(0xdf)]),_0x4d8258=document[_0x24abcd(0x158)](_0x24abcd(0x3da))[_0x24abcd(0xdf)][_0x24abcd(0x509)]();if(!_0x41285b||!_0x2aee0f||_0x2aee0f<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x41285b,_0x421ab9,_0x2aee0f,_0x4d8258),document[_0x24abcd(0x158)](_0x24abcd(0x1c3))['reset']();const _0x1b041b=doc(db,_0x24abcd(0xf9),_0x41285b),_0x308c9a=await getDoc(_0x1b041b);if(_0x308c9a[_0x24abcd(0x2c3)]()){const _0x17edab=_0x308c9a['data']();document['getElementById'](_0x24abcd(0xf2))[_0x24abcd(0x3cb)]=(_0x17edab[_0x24abcd(0x2ed)]||0x0)['toLocaleString']();}showNotification(_0x24abcd(0x3cf),'success'),loadPointsHistory();}catch(_0x273739){console['error']('Error\x20modifying\x20points:',_0x273739),showNotification(_0x24abcd(0x373)+_0x273739[_0x24abcd(0x2a8)],_0x24abcd(0x240));}}async function loadPointsHistory(){const _0x5cb0db=a4_0xfdad8c,_0x3cce36=document[_0x5cb0db(0x158)]('points-history-table-body');if(!_0x3cce36)return;_0x3cce36['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x3a9301=collection(db,_0x5cb0db(0x49f)),_0x36497a=query(_0x3a9301,orderBy(_0x5cb0db(0x294),_0x5cb0db(0x4c7)),limit(0x32)),_0xe361cf=await getDocs(_0x36497a);if(_0xe361cf[_0x5cb0db(0x332)]){_0x3cce36[_0x5cb0db(0x2d3)]=_0x5cb0db(0x1cb);return;}_0x3cce36[_0x5cb0db(0x2d3)]='',_0xe361cf['forEach'](_0xeea027=>{const _0x1105a6=_0x5cb0db,_0x25b095=_0xeea027[_0x1105a6(0x474)](),_0x48ad10=document[_0x1105a6(0x156)]('tr'),_0xa8ee3f=_0x25b095[_0x1105a6(0x294)]?new Date(_0x25b095[_0x1105a6(0x294)][_0x1105a6(0x3a5)]*0x3e8)[_0x1105a6(0xcc)]():_0x1105a6(0x1b8);let _0x5a20ba='';switch(_0x25b095[_0x1105a6(0x111)]){case _0x1105a6(0x486):_0x5a20ba=_0x1105a6(0x2ec)+_0x25b095[_0x1105a6(0x149)]+'\x20points';break;case _0x1105a6(0x395):_0x5a20ba=_0x1105a6(0x45a)+_0x25b095['amount']+'\x20points';break;case _0x1105a6(0x208):_0x5a20ba=_0x1105a6(0x2e6)+_0x25b095[_0x1105a6(0x149)]+'\x20points';break;default:_0x5a20ba=_0x25b095[_0x1105a6(0x111)]+'\x20'+_0x25b095[_0x1105a6(0x149)]+_0x1105a6(0x456);}_0x48ad10['innerHTML']=_0x1105a6(0x3a4)+_0xa8ee3f+_0x1105a6(0x285)+(_0x25b095['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5a20ba+_0x1105a6(0x185)+_0x25b095[_0x1105a6(0x111)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x25b095['previousPoints']||0x0)+_0x1105a6(0x3a2)+(_0x25b095[_0x1105a6(0x17d)]||0x0)+_0x1105a6(0x2ff)+(_0x25b095[_0x1105a6(0x1d0)]||_0x1105a6(0x181))+_0x1105a6(0x285)+(_0x25b095['adminEmail']||_0x1105a6(0x260))+_0x1105a6(0x31e),_0x3cce36[_0x1105a6(0x136)](_0x48ad10);});}catch(_0x4f1355){console[_0x5cb0db(0x240)](_0x5cb0db(0x419),_0x4f1355),_0x3cce36[_0x5cb0db(0x2d3)]=_0x5cb0db(0x41c)+_0x4f1355[_0x5cb0db(0x2a8)]+_0x5cb0db(0x27f);}}function filterPointsOverview(){const _0x57cc62=a4_0xfdad8c,_0x471a07=document[_0x57cc62(0x158)]('points-overview-search')[_0x57cc62(0xdf)]['toLowerCase']();if(!window[_0x57cc62(0x24a)])return;const _0x3b35fb=window['allUsersPoints'][_0x57cc62(0x3e6)](_0x1c1233=>{const _0x342405=_0x57cc62,_0x24bc06=(_0x1c1233['displayName']||_0x1c1233[_0x342405(0x517)]||'')[_0x342405(0x338)](),_0x418376=(_0x1c1233['email']||'')[_0x342405(0x338)]();return _0x24bc06['includes'](_0x471a07)||_0x418376['includes'](_0x471a07);});renderPointsOverview(_0x3b35fb);}function sortPointsOverview(){const _0x261643=a4_0xfdad8c,_0x17dcdc=document[_0x261643(0x158)]('points-sort-order')[_0x261643(0xdf)];if(!window[_0x261643(0x24a)])return;const _0x3342f4=[...window[_0x261643(0x24a)]];switch(_0x17dcdc){case'points-desc':_0x3342f4[_0x261643(0x4e9)]((_0x276e7a,_0x424436)=>(_0x424436[_0x261643(0x2ed)]||0x0)-(_0x276e7a[_0x261643(0x2ed)]||0x0));break;case _0x261643(0x33c):_0x3342f4[_0x261643(0x4e9)]((_0x2764f0,_0x3fe241)=>(_0x2764f0[_0x261643(0x2ed)]||0x0)-(_0x3fe241[_0x261643(0x2ed)]||0x0));break;case _0x261643(0x184):_0x3342f4[_0x261643(0x4e9)]((_0x113cfb,_0x156061)=>{const _0x477373=_0x261643,_0x5ef597=(_0x113cfb[_0x477373(0xc6)]||_0x113cfb[_0x477373(0x517)]||'')[_0x477373(0x338)](),_0xf14fe2=(_0x156061[_0x477373(0xc6)]||_0x156061['username']||'')[_0x477373(0x338)]();return _0x5ef597[_0x477373(0x38a)](_0xf14fe2);});break;case _0x261643(0x39e):_0x3342f4[_0x261643(0x4e9)]((_0x4f1a6f,_0x408cd3)=>{const _0x433621=_0x261643,_0x2a438d=(_0x4f1a6f['displayName']||_0x4f1a6f[_0x433621(0x517)]||'')[_0x433621(0x338)](),_0x4667b4=(_0x408cd3[_0x433621(0xc6)]||_0x408cd3[_0x433621(0x517)]||'')[_0x433621(0x338)]();return _0x4667b4['localeCompare'](_0x2a438d);});break;}renderPointsOverview(_0x3342f4);}async function handleAwardItem(_0x122449){const _0x8854de=a4_0xfdad8c;_0x122449[_0x8854de(0x18b)]();const _0x353b44=document['getElementById'](_0x8854de(0x139))['value'],_0x26f54a=document[_0x8854de(0x158)](_0x8854de(0x1df))[_0x8854de(0xdf)],_0xd4eee4=document['getElementById']('award-reason')[_0x8854de(0xdf)][_0x8854de(0x509)]();if(!_0x353b44||!_0x26f54a){showNotification(_0x8854de(0x183),_0x8854de(0x240));return;}try{showNotification(_0x8854de(0x405),'success'),document[_0x8854de(0x158)]('award-item-form')[_0x8854de(0x255)]();}catch(_0x4797ab){console[_0x8854de(0x240)](_0x8854de(0x161),_0x4797ab),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x4797ab['message'],'error');}}async function loadUserPointsHistory(_0x2d9e69){const _0x471fed=a4_0xfdad8c;try{const _0x3f847c=collection(db,_0x471fed(0x49f)),_0x32179f=query(_0x3f847c,where('userId','==',_0x2d9e69),orderBy('timestamp',_0x471fed(0x4c7))),_0x98afc4=await getDocs(_0x32179f);console['log'](_0x471fed(0x2eb)+_0x98afc4[_0x471fed(0x4c9)]+_0x471fed(0x177)+_0x2d9e69),showNotification(_0x471fed(0x219)+_0x98afc4[_0x471fed(0x4c9)]+_0x471fed(0x470),_0x471fed(0x447));}catch(_0x377bf5){console['error'](_0x471fed(0xbb),_0x377bf5),showNotification(_0x471fed(0x230),_0x471fed(0x240));}}async function initializeUserPointsField(){const _0x55d49c=a4_0xfdad8c;try{console['log'](_0x55d49c(0x2d7));const _0x3b8fdf=collection(db,'userProfiles'),_0x30bbfb=await getDocs(_0x3b8fdf);if(_0x30bbfb[_0x55d49c(0x332)]){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x122f4c=0x0,_0x32aaa3=0x0;const _0x963f08=writeBatch(db);let _0x53263c=0x0;return console[_0x55d49c(0x4ca)]('Found\x20'+_0x30bbfb[_0x55d49c(0x4c9)]+_0x55d49c(0x1fc)),_0x30bbfb[_0x55d49c(0x3b5)](_0xa02c26=>{const _0x926adb=_0x55d49c,_0x1e9b09=_0xa02c26[_0x926adb(0x474)]();_0x1e9b09[_0x926adb(0x2ed)]===undefined||_0x1e9b09['points']===null?(_0x963f08[_0x926adb(0x1eb)](_0xa02c26['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x122f4c++,_0x53263c++,console[_0x926adb(0x4ca)](_0x926adb(0x345)+(_0x1e9b09[_0x926adb(0xc6)]||_0x1e9b09[_0x926adb(0x517)]||_0x1e9b09[_0x926adb(0x206)]||_0x926adb(0x1b8))+'\x20for\x20points\x20initialization')):(_0x32aaa3++,console[_0x926adb(0x4ca)]((_0x1e9b09[_0x926adb(0xc6)]||_0x1e9b09['username']||_0x1e9b09['email']||_0x926adb(0x1b8))+_0x926adb(0x153)+_0x1e9b09[_0x926adb(0x2ed)])),_0x53263c>=0x1f4&&console[_0x926adb(0x1bd)](_0x926adb(0xf5));}),_0x122f4c>0x0?(console[_0x55d49c(0x4ca)](_0x55d49c(0x296)+_0x122f4c+_0x55d49c(0x4dc)),await _0x963f08[_0x55d49c(0x516)](),console[_0x55d49c(0x4ca)](_0x55d49c(0x291)+_0x122f4c+_0x55d49c(0x4e1))):console[_0x55d49c(0x4ca)](_0x55d49c(0x31a)),console[_0x55d49c(0x4ca)](_0x55d49c(0x262)+_0x30bbfb['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x122f4c+_0x55d49c(0x224)+_0x32aaa3),showNotification(_0x55d49c(0xfd)+_0x122f4c+_0x55d49c(0xc5)+_0x32aaa3+'\x20users\x20already\x20had\x20points.',_0x55d49c(0x350)),window[_0x55d49c(0x24a)]&&loadPointsOverview(),{'totalUsers':_0x30bbfb[_0x55d49c(0x4c9)],'usersUpdated':_0x122f4c,'usersAlreadyHadPoints':_0x32aaa3};}catch(_0x5f36fe){console[_0x55d49c(0x240)]('Error\x20initializing\x20points\x20field:',_0x5f36fe),showNotification(_0x55d49c(0x448)+_0x5f36fe[_0x55d49c(0x2a8)],_0x55d49c(0x240));throw _0x5f36fe;}}function addPointsMigrationButton(){const _0x46df29=a4_0xfdad8c,_0x3db180=document[_0x46df29(0x158)](_0x46df29(0x2a9));if(!_0x3db180)return;if(document[_0x46df29(0x158)](_0x46df29(0x2e8)))return;const _0x2effeb=document['createElement'](_0x46df29(0x2cf));_0x2effeb[_0x46df29(0x50f)]='migration-section',_0x2effeb[_0x46df29(0x229)]['marginBottom']=_0x46df29(0x1e4),_0x2effeb[_0x46df29(0x229)][_0x46df29(0x1ff)]='15px',_0x2effeb[_0x46df29(0x229)][_0x46df29(0x394)]=_0x46df29(0x4da),_0x2effeb[_0x46df29(0x229)][_0x46df29(0x4ec)]=_0x46df29(0x48f),_0x2effeb[_0x46df29(0x229)][_0x46df29(0x2b4)]=_0x46df29(0x321),_0x2effeb[_0x46df29(0x2d3)]=_0x46df29(0x168);const _0x56be8a=_0x3db180[_0x46df29(0x30f)](_0x46df29(0x146));_0x56be8a&&_0x56be8a[_0x46df29(0x11f)]('afterend',_0x2effeb),document[_0x46df29(0x158)](_0x46df29(0x2e8))[_0x46df29(0x234)](_0x46df29(0x42d),async function(){const _0xa7e3be=_0x46df29;if(confirm(_0xa7e3be(0x2c4))){this[_0xa7e3be(0x1b6)]=!![],this[_0xa7e3be(0x2d3)]=_0xa7e3be(0xa0);try{await initializeUserPointsField(),this[_0xa7e3be(0x2d3)]=_0xa7e3be(0x174),this[_0xa7e3be(0x229)]['backgroundColor']=_0xa7e3be(0x4bd),setTimeout(()=>{const _0x3edb5d=_0xa7e3be;_0x2effeb[_0x3edb5d(0x229)][_0x3edb5d(0x261)]=_0x3edb5d(0x337);},0xbb8);}catch(_0x206436){this[_0xa7e3be(0x2d3)]=_0xa7e3be(0x1f3),this[_0xa7e3be(0x1b6)]=![];}}});}function setupManagePointsSection(){const _0x3bdfaa=a4_0xfdad8c;console[_0x3bdfaa(0x4ca)](_0x3bdfaa(0x41e)),addPointsMigrationButton();const _0x2c6ef7=document[_0x3bdfaa(0x158)](_0x3bdfaa(0x460));_0x2c6ef7&&_0x2c6ef7[_0x3bdfaa(0x234)](_0x3bdfaa(0xa2),debounce(searchUsersForPoints,0x12c));const _0x569ca4=document[_0x3bdfaa(0x158)]('modify-points-form');_0x569ca4&&_0x569ca4[_0x3bdfaa(0x234)](_0x3bdfaa(0x4ff),handleModifyPoints);const _0x2fa5c7=document[_0x3bdfaa(0x158)](_0x3bdfaa(0x31c));_0x2fa5c7&&_0x2fa5c7[_0x3bdfaa(0x234)](_0x3bdfaa(0x4ff),handleAwardItem);const _0x4af043=document['getElementById'](_0x3bdfaa(0x1f9));_0x4af043&&_0x4af043['addEventListener'](_0x3bdfaa(0xa2),debounce(filterPointsOverview,0x12c));const _0x5aa09b=document[_0x3bdfaa(0x158)]('points-sort-order');_0x5aa09b&&_0x5aa09b[_0x3bdfaa(0x234)](_0x3bdfaa(0x467),sortPointsOverview);const _0x29cf30=document[_0x3bdfaa(0x158)](_0x3bdfaa(0x2d6));_0x29cf30&&_0x29cf30[_0x3bdfaa(0x234)](_0x3bdfaa(0x42d),loadPointsOverview);const _0x4ca519=document['getElementById'](_0x3bdfaa(0xbc));if(_0x4ca519){console[_0x3bdfaa(0x4ca)](_0x3bdfaa(0x514));const _0x452cf2=_0x4ca519[_0x3bdfaa(0x30f)]('.close-btn');_0x452cf2?_0x452cf2[_0x3bdfaa(0x234)](_0x3bdfaa(0x42d),function(){const _0x4ae0a4=_0x3bdfaa;console[_0x4ae0a4(0x4ca)](_0x4ae0a4(0x2d9)),closeQuickEditModal();}):console[_0x3bdfaa(0x1bd)](_0x3bdfaa(0x369));const _0x14997e=document[_0x3bdfaa(0x158)](_0x3bdfaa(0xcb));_0x14997e?_0x14997e[_0x3bdfaa(0x234)]('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console[_0x3bdfaa(0x1bd)](_0x3bdfaa(0x4d8));const _0x304361=document['getElementById']('quick-edit-points-form');_0x304361?_0x304361[_0x3bdfaa(0x234)](_0x3bdfaa(0x4ff),function(_0x5923fc){const _0x3bc5b3=_0x3bdfaa;console['log'](_0x3bc5b3(0x2f2)),handleQuickEditPoints(_0x5923fc);}):console[_0x3bdfaa(0x240)](_0x3bdfaa(0x382)),_0x4ca519[_0x3bdfaa(0x234)](_0x3bdfaa(0x42d),function(_0x3551b1){const _0x5e9417=_0x3bdfaa;_0x3551b1[_0x5e9417(0x138)]===_0x4ca519&&(console[_0x5e9417(0x4ca)](_0x5e9417(0x2b5)),closeQuickEditModal());});}else console[_0x3bdfaa(0x240)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console[_0x3bdfaa(0x4ca)](_0x3bdfaa(0x25b));}function setupManageRibbonsSection(){const _0x17f955=a4_0xfdad8c;console[_0x17f955(0x4ca)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x3957de=document[_0x17f955(0x158)]('ribbon-user-search');_0x3957de&&_0x3957de[_0x17f955(0x234)](_0x17f955(0xa2),debounce(searchRibbonUser,0x12c));const _0x2641be=document[_0x17f955(0x158)](_0x17f955(0x1a5));_0x2641be&&_0x2641be[_0x17f955(0x234)]('click',searchRibbonUser);const _0x3b52ca=document[_0x17f955(0x158)](_0x17f955(0x17a));_0x3b52ca&&_0x3b52ca[_0x17f955(0x234)](_0x17f955(0x4ff),addRibbon),_0x3957de&&_0x3957de[_0x17f955(0x234)]('keypress',function(_0x4e999c){const _0x57b4ab=_0x17f955;_0x4e999c['key']===_0x57b4ab(0x2aa)&&(_0x4e999c['preventDefault'](),searchRibbonUser());}),console[_0x17f955(0x4ca)](_0x17f955(0x360));}async function modifyUserPoints(_0x5a1ea3,_0x314743,_0x309606,_0x590cd2=''){const _0x157867=a4_0xfdad8c,_0x4bed20=doc(db,'userProfiles',_0x5a1ea3),_0x55f42e=await getDoc(_0x4bed20);if(!_0x55f42e[_0x157867(0x2c3)]())throw new Error(_0x157867(0x130));const _0x213186=_0x55f42e[_0x157867(0x474)](),_0x1c13b0=_0x213186[_0x157867(0x2ed)]!==undefined?_0x213186[_0x157867(0x2ed)]:0x0;_0x213186['points']===undefined&&(console[_0x157867(0x4ca)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x213186['displayName']||_0x213186['email']||_0x157867(0x1b8))),await updateDoc(_0x4bed20,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x5e542f=_0x1c13b0;switch(_0x314743){case _0x157867(0x486):_0x5e542f=_0x1c13b0+_0x309606;break;case _0x157867(0x395):_0x5e542f=Math[_0x157867(0x1d7)](0x0,_0x1c13b0-_0x309606);break;case _0x157867(0x208):_0x5e542f=_0x309606;break;default:throw new Error(_0x157867(0x367));}await updateDoc(_0x4bed20,{'points':_0x5e542f,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x157867(0x49f)),{'userId':_0x5a1ea3,'userEmail':_0x213186[_0x157867(0x206)]||_0x157867(0x21a),'displayName':_0x213186[_0x157867(0xc6)]||_0x213186[_0x157867(0x517)]||_0x157867(0xd6),'action':_0x314743,'amount':_0x309606,'previousPoints':_0x1c13b0,'newPoints':_0x5e542f,'reason':_0x590cd2,'adminEmail':auth[_0x157867(0x35b)]['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x27bd1b=a4_0xfdad8c,_0x2e6c1d=document['getElementById'](_0x27bd1b(0x3c4));if(!_0x2e6c1d)return;_0x2e6c1d['innerHTML']=_0x27bd1b(0xdc);try{const _0x84046c=collection(db,_0x27bd1b(0xf9)),_0x1a6885=await getDocs(_0x84046c);if(_0x1a6885[_0x27bd1b(0x332)]){_0x2e6c1d['innerHTML']=_0x27bd1b(0x2bb);return;}const _0x4c054d=[];let _0x207dfa=0x0;_0x1a6885[_0x27bd1b(0x3b5)](_0x329af5=>{const _0x43e54c=_0x27bd1b,_0x22821e=_0x329af5[_0x43e54c(0x474)](),_0x4afe12=_0x22821e[_0x43e54c(0x2ed)]!==undefined?_0x22821e['points']:0x0;_0x22821e[_0x43e54c(0x2ed)]===undefined&&_0x207dfa++,_0x4c054d[_0x43e54c(0xbe)]({'id':_0x329af5['id'],..._0x22821e,'points':_0x4afe12});}),_0x207dfa>0x0&&(console[_0x27bd1b(0x4ca)]('Found\x20'+_0x207dfa+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x207dfa+_0x27bd1b(0xbf),_0x27bd1b(0x447))),_0x4c054d[_0x27bd1b(0x4e9)]((_0x58b3b2,_0x1d4d56)=>(_0x1d4d56[_0x27bd1b(0x2ed)]||0x0)-(_0x58b3b2[_0x27bd1b(0x2ed)]||0x0)),window['allUsersPoints']=_0x4c054d,renderPointsOverview(_0x4c054d);}catch(_0x3ad944){console[_0x27bd1b(0x240)](_0x27bd1b(0xc2),_0x3ad944),_0x2e6c1d[_0x27bd1b(0x2d3)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x3ad944[_0x27bd1b(0x2a8)]+'</td></tr>';}}async function loadRibbonsData(){const _0x25470a=a4_0xfdad8c,_0x5bd8fd=document[_0x25470a(0x158)]('ribbons-overview-table-body');if(!_0x5bd8fd)return;_0x5bd8fd[_0x25470a(0x2d3)]=_0x25470a(0x28d);try{const [_0x392e11,_0x5b7369,_0x22ce17]=await Promise[_0x25470a(0x30b)]([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x25470a(0x108))),getDocs(collection(db,'playerRibbonsD3'))]);_0x5bd8fd[_0x25470a(0x2d3)]='';const _0x3055b7=(_0x7fa7a3,_0x11cdde)=>{_0x7fa7a3['forEach'](_0x23e7ed=>{const _0x39b43b=a4_0x3da5,_0x1bdba8=_0x23e7ed['data'](),_0x387d2f=_0x1bdba8['ribbons']||{},_0x24fa51=Object[_0x39b43b(0x274)](_0x387d2f)['length'],_0x95fd1b=document[_0x39b43b(0x156)]('tr');_0x95fd1b[_0x39b43b(0x2d3)]=_0x39b43b(0xae)+(_0x1bdba8[_0x39b43b(0x517)]||_0x39b43b(0x1b8))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x11cdde[_0x39b43b(0x338)]()+'\x22>'+_0x11cdde+_0x39b43b(0x189)+_0x24fa51+_0x39b43b(0x216)+(_0x1bdba8[_0x39b43b(0x1a2)]?new Date(_0x1bdba8[_0x39b43b(0x1a2)][_0x39b43b(0x3a5)]*0x3e8)[_0x39b43b(0x23e)]():_0x39b43b(0x1b8))+_0x39b43b(0x18d)+_0x1bdba8[_0x39b43b(0x517)]+_0x39b43b(0x129)+_0x11cdde+_0x39b43b(0xa4),_0x5bd8fd['appendChild'](_0x95fd1b);});};_0x3055b7(_0x392e11,'D1'),_0x3055b7(_0x5b7369,'D2'),_0x3055b7(_0x22ce17,'D3'),document[_0x25470a(0x2d4)](_0x25470a(0x4ef))['forEach'](_0x187df1=>{const _0x4af5a7=_0x25470a;_0x187df1[_0x4af5a7(0x234)](_0x4af5a7(0x42d),function(){const _0x4cccbf=_0x4af5a7,_0x2ee579=this['dataset']['username'],_0x393ba8=this[_0x4cccbf(0x468)][_0x4cccbf(0x318)];editUserRibbons(_0x2ee579,_0x393ba8);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x426eaa){console[_0x25470a(0x240)]('Error\x20loading\x20ribbons:',_0x426eaa),_0x5bd8fd[_0x25470a(0x2d3)]=_0x25470a(0x275),showNotification(_0x25470a(0xe8),_0x25470a(0x240));}}async function searchRibbonUser(){const _0x3234bd=a4_0xfdad8c,_0x102ef4=document[_0x3234bd(0x158)]('ribbon-user-search')[_0x3234bd(0xdf)][_0x3234bd(0x509)]();if(!_0x102ef4){showNotification(_0x3234bd(0x246),'error');return;}try{const [_0x2cdf3b,_0x598e3d,_0x115312]=await Promise[_0x3234bd(0x30b)]([getDoc(doc(db,'playerRibbons',_0x102ef4)),getDoc(doc(db,_0x3234bd(0x108),_0x102ef4)),getDoc(doc(db,_0x3234bd(0x18e),_0x102ef4))]);let _0x1ab135=null,_0x55bf27=null;if(_0x2cdf3b[_0x3234bd(0x2c3)]())_0x1ab135='D1',_0x55bf27=_0x2cdf3b[_0x3234bd(0x474)]();else{if(_0x598e3d[_0x3234bd(0x2c3)]())_0x1ab135='D2',_0x55bf27=_0x598e3d[_0x3234bd(0x474)]();else _0x115312[_0x3234bd(0x2c3)]()&&(_0x1ab135='D3',_0x55bf27=_0x115312['data']());}_0x1ab135?(document[_0x3234bd(0x158)](_0x3234bd(0x2c2))[_0x3234bd(0x3cb)]=_0x102ef4,document['getElementById'](_0x3234bd(0x4d1))['value']=_0x102ef4,document['getElementById'](_0x3234bd(0x361))[_0x3234bd(0xdf)]=_0x1ab135,document[_0x3234bd(0x158)](_0x3234bd(0x46f))[_0x3234bd(0x229)][_0x3234bd(0x261)]='block',displayCurrentRibbons(_0x55bf27[_0x3234bd(0x3ab)]||{}),showNotification('Found\x20'+_0x102ef4+_0x3234bd(0x178)+_0x1ab135+'\x20ladder',_0x3234bd(0x350))):showNotification(_0x3234bd(0xca)+_0x102ef4+_0x3234bd(0x493),_0x3234bd(0x240));}catch(_0x40e881){console[_0x3234bd(0x240)](_0x3234bd(0x1e5),_0x40e881),showNotification(_0x3234bd(0x100),_0x3234bd(0x240));}}function displayCurrentRibbons(_0x56db58){const _0x55e2b4=a4_0xfdad8c,_0x2a1db9=document[_0x55e2b4(0x158)](_0x55e2b4(0x1ce));if(!_0x2a1db9)return;_0x2a1db9[_0x55e2b4(0x2d3)]='';if(Object[_0x55e2b4(0x274)](_0x56db58)[_0x55e2b4(0x317)]===0x0){_0x2a1db9[_0x55e2b4(0x2d3)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x55e2b4(0x311)](_0x56db58)['forEach'](([_0x506659,_0x2b538d])=>{const _0xf06ebc=_0x55e2b4,_0x1f8fac=document[_0xf06ebc(0x156)](_0xf06ebc(0x2cf));_0x1f8fac[_0xf06ebc(0x50f)]=_0xf06ebc(0x4c1),_0x1f8fac[_0xf06ebc(0x2d3)]=_0xf06ebc(0x23a)+_0x506659+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x2b538d[_0xf06ebc(0x3fd)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x2b538d[_0xf06ebc(0xa6)]?new Date(_0x2b538d[_0xf06ebc(0xa6)][_0xf06ebc(0x3a5)]*0x3e8)[_0xf06ebc(0x23e)]():'Unknown')+_0xf06ebc(0x491)+_0x506659+_0xf06ebc(0x1d1),_0x2a1db9[_0xf06ebc(0x136)](_0x1f8fac);}),document[_0x55e2b4(0x2d4)](_0x55e2b4(0x437))[_0x55e2b4(0x3b5)](_0x32bddf=>{const _0x54ded1=_0x55e2b4;_0x32bddf['addEventListener'](_0x54ded1(0x42d),function(){const _0x4a31fd=_0x54ded1,_0x3b23a8=this[_0x4a31fd(0x468)][_0x4a31fd(0x511)];removeRibbon(_0x3b23a8);});});}async function addRibbon(_0x5f1303){const _0x1b27e0=a4_0xfdad8c;_0x5f1303[_0x1b27e0(0x18b)]();const _0x38cf3e=document[_0x1b27e0(0x158)](_0x1b27e0(0x4d1))[_0x1b27e0(0xdf)],_0x2914b5=document[_0x1b27e0(0x158)](_0x1b27e0(0x361))[_0x1b27e0(0xdf)],_0x8bdfbd=document[_0x1b27e0(0x158)](_0x1b27e0(0x4a6))['value'],_0x3c6930=parseInt(document['getElementById']('ribbon-level')[_0x1b27e0(0xdf)]);if(!_0x38cf3e||!_0x2914b5||!_0x8bdfbd||!_0x3c6930){showNotification(_0x1b27e0(0xd5),_0x1b27e0(0x240));return;}try{const _0xf60545=_0x1b27e0(0x36b)+(_0x2914b5==='D1'?'':_0x2914b5),_0x39b64a=doc(db,_0xf60545,_0x38cf3e),_0xd5bab7=await getDoc(_0x39b64a),_0x52ddba=_0xd5bab7['exists']()?_0xd5bab7[_0x1b27e0(0x474)]()[_0x1b27e0(0x3ab)]||{}:{};_0x52ddba[_0x8bdfbd]={'level':_0x3c6930,'awardedAt':serverTimestamp()},await setDoc(_0x39b64a,{'username':_0x38cf3e,'ladder':_0x2914b5,'ribbons':_0x52ddba,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x1b27e0(0x2ec)+_0x8bdfbd+_0x1b27e0(0x3c3)+_0x3c6930+_0x1b27e0(0x2cc)+_0x38cf3e,_0x1b27e0(0x350)),displayCurrentRibbons(_0x52ddba),document[_0x1b27e0(0x158)]('ribbon-type-select')['value']='',document[_0x1b27e0(0x158)]('ribbon-level')[_0x1b27e0(0xdf)]='1';}catch(_0x4e53db){console['error'](_0x1b27e0(0x21b),_0x4e53db),showNotification(_0x1b27e0(0x204),_0x1b27e0(0x240));}}async function removeRibbon(_0x504b15){const _0x5e65d6=a4_0xfdad8c,_0x3c2856=document[_0x5e65d6(0x158)](_0x5e65d6(0x4d1))[_0x5e65d6(0xdf)],_0x437efa=document[_0x5e65d6(0x158)](_0x5e65d6(0x361))[_0x5e65d6(0xdf)];if(!confirm(_0x5e65d6(0x3a1)+_0x504b15+_0x5e65d6(0x475)+_0x3c2856+'?'))return;try{const _0x20fb73=_0x5e65d6(0x36b)+(_0x437efa==='D1'?'':_0x437efa),_0x388d34=doc(db,_0x20fb73,_0x3c2856),_0x2a83fc=await getDoc(_0x388d34),_0x3194c5=_0x2a83fc[_0x5e65d6(0x2c3)]()?_0x2a83fc['data']()[_0x5e65d6(0x3ab)]||{}:{};delete _0x3194c5[_0x504b15],await setDoc(_0x388d34,{'username':_0x3c2856,'ladder':_0x437efa,'ribbons':_0x3194c5,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x5e65d6(0x20d)+_0x504b15+'\x20from\x20'+_0x3c2856,_0x5e65d6(0x350)),displayCurrentRibbons(_0x3194c5);}catch(_0x12c602){console[_0x5e65d6(0x240)]('Error\x20removing\x20ribbon:',_0x12c602),showNotification(_0x5e65d6(0x1d4),_0x5e65d6(0x240));}}function editUserRibbons(_0xf67c9e,_0x15bd0e){const _0x3355af=a4_0xfdad8c;document['getElementById'](_0x3355af(0x298))[_0x3355af(0xdf)]=_0xf67c9e,searchRibbonUser();}