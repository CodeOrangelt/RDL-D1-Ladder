const a24_0x584965=a24_0x48e7,a24_0x285333=(function(){let _0x341acf=!![];return function(_0xb30821,_0x56d9ee){const _0x4684ab=_0x341acf?function(){if(_0x56d9ee){const _0x4d8031=_0x56d9ee['apply'](_0xb30821,arguments);return _0x56d9ee=null,_0x4d8031;}}:function(){};return _0x341acf=![],_0x4684ab;};}()),a24_0x51e814=a24_0x285333(this,function(){const _0x11c92b=a24_0x48e7,_0x32dc58=function(){const _0x1cf074=a24_0x48e7;let _0x122ef5;try{_0x122ef5=Function(_0x1cf074(0x161)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x232592){_0x122ef5=window;}return _0x122ef5;},_0x51163d=_0x32dc58(),_0x50fd50=_0x51163d['console']=_0x51163d[_0x11c92b(0x127)]||{},_0x4051ab=['log',_0x11c92b(0x111),'info','error','exception','table','trace'];for(let _0x4a579b=0x0;_0x4a579b<_0x4051ab[_0x11c92b(0x136)];_0x4a579b++){const _0x70bb30=a24_0x285333[_0x11c92b(0x15a)]['prototype'][_0x11c92b(0x11e)](a24_0x285333),_0x4a24d0=_0x4051ab[_0x4a579b],_0x37ce2a=_0x50fd50[_0x4a24d0]||_0x70bb30;_0x70bb30['__proto__']=a24_0x285333[_0x11c92b(0x11e)](a24_0x285333),_0x70bb30['toString']=_0x37ce2a['toString']['bind'](_0x37ce2a),_0x50fd50[_0x4a24d0]=_0x70bb30;}});function a24_0x1c46(){const _0x2d5fcf=['active','addEventListener','warn','Error\x20creating\x20team:','.action-btn','gameInvitations','decline','Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)','createElement','<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>','inbox-content','filter','DOMContentLoaded','join','map','bind','toDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','openResponseModal','h\x20ago','Failed\x20to\x20create\x20team:\x20','disabled','Just\x20now','invitationId','console','updateNotificationCount','\x22\x20data-invitation-id=\x22','head','loadInvitations','trim','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>',';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','all','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22','Error\x20performing\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-','\x22\x20created\x20successfully!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','length','teamData','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>','accept','.filter-btn','none','message','respondedAt','desc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','error','accepted','invitations','isSent','body','sentInvitations','createdAt','currentFilter','Failed\x20to\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22','sent','createTeamFromInvitation','href','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','unsubscribe','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','click','renderInvitations','status','forEach','#cancel-response','setupEventListeners','display','querySelectorAll','constructor','querySelector','type','docs','inline-block','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','success','return\x20(function()\x20'];a24_0x1c46=function(){return _0x2d5fcf;};return a24_0x1c46();}a24_0x51e814();import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x431825=a24_0x48e7;this['currentFilter']='pending',this['invitations']=[],this['sentInvitations']=[],this[_0x431825(0x150)]=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this['lastDoc']=null,this['hasMore']=!![],this['init']();}async['init'](){auth['onAuthStateChanged'](_0x581354=>{const _0x344588=a24_0x48e7;_0x581354?(this['loadInvitations'](_0x581354['uid']),this[_0x344588(0x157)]()):window['location'][_0x344588(0x14c)]='./login.html';});}['setupEventListeners'](){const _0x53be8e=a24_0x48e7;document['querySelectorAll'](_0x53be8e(0x13a))[_0x53be8e(0x155)](_0xf399a4=>{_0xf399a4['addEventListener']('click',()=>{const _0x5bc5f1=a24_0x48e7;document['querySelectorAll']('.filter-btn')['forEach'](_0x134044=>_0x134044['classList']['remove']('active')),_0xf399a4['classList']['add'](_0x5bc5f1(0x10f)),this[_0x5bc5f1(0x147)]=_0xf399a4['dataset'][_0x5bc5f1(0x11a)],this['renderInvitations']();});});}[a24_0x584965(0x12b)](_0x1802c9){const _0x3cc3de=a24_0x584965,_0x3946c4=collection(db,'gameInvitations');let _0x3f9e3=query(_0x3946c4,where('toUserId','==',_0x1802c9),orderBy('createdAt',_0x3cc3de(0x13e)),limit(this['pageSize']));this['unsubscribe']=onSnapshot(_0x3f9e3,_0x3335ab=>{const _0x406094=_0x3cc3de;this[_0x406094(0x142)]=_0x3335ab[_0x406094(0x15d)][_0x406094(0x11d)](_0x2fcc3f=>({'id':_0x2fcc3f['id'],..._0x2fcc3f['data']()})),this['renderInvitations'](),this[_0x406094(0x128)]();});let _0x3267cb=query(_0x3946c4,where('fromUserId','==',_0x1802c9),orderBy(_0x3cc3de(0x146),'desc'),limit(this['pageSize']));this['sentUnsubscribe']=onSnapshot(_0x3267cb,_0x56277a=>{const _0x1ca153=_0x3cc3de;this[_0x1ca153(0x145)]=_0x56277a['docs']['map'](_0x1d4987=>({'id':_0x1d4987['id'],..._0x1d4987['data'](),'isSent':!![]})),this['renderInvitations']();});}[a24_0x584965(0x153)](){const _0x239914=a24_0x584965,_0x2e7e71=document['getElementById'](_0x239914(0x119));if(!_0x2e7e71)return;let _0x42e20a=[];if(this['currentFilter']==='outbox')_0x42e20a=this['sentInvitations'];else this['currentFilter']===_0x239914(0x130)?_0x42e20a=[...this[_0x239914(0x142)],...this['sentInvitations']]['sort']((_0x3de033,_0x436437)=>{const _0x5e5133=_0x239914,_0x517416=_0x3de033['createdAt']?.['toDate']?_0x3de033['createdAt'][_0x5e5133(0x11f)]():new Date(_0x3de033[_0x5e5133(0x146)]),_0xf82c66=_0x436437['createdAt']?.['toDate']?_0x436437['createdAt']['toDate']():new Date(_0x436437['createdAt']);return _0xf82c66-_0x517416;}):_0x42e20a=this['invitations']['filter'](_0x3b2060=>_0x3b2060[_0x239914(0x154)]===this['currentFilter']);if(_0x42e20a[_0x239914(0x136)]===0x0){const _0x3ee193=this['currentFilter']==='outbox'?_0x239914(0x14a):this['currentFilter']==='all'?'':this['currentFilter'];_0x2e7e71[_0x239914(0x12d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x3ee193+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x239914(0x147)]==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+_0x239914(0x151);return;}_0x2e7e71['innerHTML']=_0x42e20a['map'](_0x30c086=>this['createInvitationCard'](_0x30c086))[_0x239914(0x11c)](''),this['setupActionListeners']();}['createInvitationCard'](_0x255ba8){const _0x226941=a24_0x584965,_0x1122e6=_0x255ba8[_0x226941(0x146)]?.['toDate']?_0x255ba8[_0x226941(0x146)]['toDate']():new Date(_0x255ba8['createdAt']),_0x5061d5=this['getTimeAgo'](_0x1122e6),_0x58bb75=_0x255ba8[_0x226941(0x143)]||![];let _0x1f4e63='';return _0x255ba8[_0x226941(0x15c)]==='team_invite'?_0x1f4e63=_0x226941(0x14e)+_0x255ba8[_0x226941(0x13c)]+_0x226941(0x14d)+_0x255ba8[_0x226941(0x137)]['teamColor']+_0x226941(0x12f)+_0x255ba8['teamData']['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20•\x20Color:\x20'+_0x255ba8['teamData']['teamColor']+_0x226941(0x135):_0x1f4e63=_0x226941(0x14e)+_0x255ba8['message']+_0x226941(0x151),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x255ba8['status']+'\x20'+(_0x58bb75?'sent-invitation':'')+_0x226941(0x129)+_0x255ba8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x58bb75?'To:\x20'+_0x255ba8['toUsername']:_0x255ba8['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x58bb75?_0x226941(0x118):'')+_0x226941(0x12e)+_0x5061d5+_0x226941(0x133)+_0x255ba8[_0x226941(0x154)]+'\x22>'+_0x255ba8['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1f4e63+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x58bb75&&_0x255ba8['status']==='pending'?_0x226941(0x131)+_0x255ba8['id']+_0x226941(0x149)+_0x255ba8['id']+_0x226941(0x15f)+(_0x255ba8['type']!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x255ba8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x226941(0x120)+(_0x58bb75&&_0x255ba8[_0x226941(0x154)]==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x255ba8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){const _0x4f85de=a24_0x584965;document[_0x4f85de(0x159)](_0x4f85de(0x113))[_0x4f85de(0x155)](_0xb58cc2=>{const _0x2ec88=_0x4f85de;_0xb58cc2[_0x2ec88(0x110)]('click',async _0x5cda09=>{const _0xf1071=_0x2ec88,_0x276708=_0xb58cc2['dataset']['action'],_0x185d94=_0xb58cc2['dataset'][_0xf1071(0x126)];_0xb58cc2['disabled']=!![];const _0x53df55=_0xb58cc2['innerHTML'];_0xb58cc2['innerHTML']=_0xf1071(0x138);try{switch(_0x276708){case _0xf1071(0x139):await this['updateInvitationStatus'](_0x185d94,_0xf1071(0x141));break;case _0xf1071(0x115):await this['updateInvitationStatus'](_0x185d94,'declined');break;case'cancel':await this['updateInvitationStatus'](_0x185d94,'cancelled');break;case'respond':this[_0xf1071(0x121)](_0x185d94);break;}}catch(_0x4dc506){console[_0xf1071(0x140)](_0xf1071(0x132)+_0x276708+':',_0x4dc506),alert(_0xf1071(0x148)+_0x276708+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0xb58cc2[_0xf1071(0x124)]=![],_0xb58cc2['innerHTML']=_0x53df55;}});});}async['updateInvitationStatus'](_0x4cb967,_0x151b79){const _0xcdc364=a24_0x584965;try{const _0x49b4e2=this[_0xcdc364(0x142)]['find'](_0x4eba79=>_0x4eba79['id']===_0x4cb967);_0x49b4e2&&_0x49b4e2['type']==='team_invite'&&_0x151b79==='accepted'&&await this[_0xcdc364(0x14b)](_0x49b4e2);const _0x47ed50=doc(db,_0xcdc364(0x114),_0x4cb967);await updateDoc(_0x47ed50,{'status':_0x151b79,'respondedAt':new Date()}),_0x49b4e2&&(_0x49b4e2[_0xcdc364(0x154)]=_0x151b79,_0x49b4e2[_0xcdc364(0x13d)]=new Date(),this['renderInvitations']());}catch(_0x4e8aca){console[_0xcdc364(0x140)]('Error\x20updating\x20invitation\x20status:',_0x4e8aca);throw _0x4e8aca;}}['openResponseModal'](_0x4f46ab){const _0x24eaa5=a24_0x584965,_0x44abbd=this[_0x24eaa5(0x142)]['find'](_0x560ee5=>_0x560ee5['id']===_0x4f46ab);if(!_0x44abbd)return;const _0x49fe9c=document[_0x24eaa5(0x117)]('div');_0x49fe9c['className']='modal-overlay',_0x49fe9c[_0x24eaa5(0x12d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x44abbd['fromUsername']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x44abbd['value']+_0x24eaa5(0x14f);if(!document['getElementById']('modal-styles')){const _0x574009=document[_0x24eaa5(0x117)]('style');_0x574009['id']='modal-styles',_0x574009['textContent']=_0x24eaa5(0x13f),document[_0x24eaa5(0x12a)]['appendChild'](_0x574009);}document[_0x24eaa5(0x144)]['appendChild'](_0x49fe9c),_0x49fe9c[_0x24eaa5(0x15b)]('.modal-close')['addEventListener'](_0x24eaa5(0x152),()=>_0x49fe9c['remove']()),_0x49fe9c['querySelector'](_0x24eaa5(0x156))[_0x24eaa5(0x110)](_0x24eaa5(0x152),()=>_0x49fe9c['remove']()),_0x49fe9c['addEventListener'](_0x24eaa5(0x152),_0x3a1dfe=>{if(_0x3a1dfe['target']===_0x49fe9c)_0x49fe9c['remove']();}),_0x49fe9c['querySelector']('#send-response')['addEventListener']('click',()=>{const _0x49c0f8=_0x24eaa5,_0xe8e44a=document['getElementById']('response-message')['value'][_0x49c0f8(0x12c)]();_0xe8e44a&&(alert(_0x49c0f8(0x116)),_0x49fe9c['remove']());});}async['createTeamFromInvitation'](_0x229635){const _0x4b916b=a24_0x584965;try{const {createTeam:_0x44ac9e}=await import('./ladderduos.js'),_0x532d34=await _0x44ac9e(_0x229635['fromUsername'],_0x229635['toUsername'],_0x229635['teamData']['proposedTeamName'],_0x229635['teamData']['teamColor']);if(!_0x532d34[_0x4b916b(0x160)])throw new Error(_0x532d34['error']);alert('Team\x20\x22'+_0x229635['teamData']['proposedTeamName']+_0x4b916b(0x134));}catch(_0x1b4c86){console[_0x4b916b(0x140)](_0x4b916b(0x112),_0x1b4c86);throw new Error(_0x4b916b(0x123)+_0x1b4c86['message']);}}['updateNotificationCount'](){const _0x10b552=a24_0x584965,_0x52a62e=this[_0x10b552(0x142)]['filter'](_0x96b512=>_0x96b512['status']==='pending')['length'],_0x66d1f5=document['getElementById']('inbox-notification');_0x66d1f5&&(_0x52a62e>0x0?(_0x66d1f5['style'][_0x10b552(0x158)]=_0x10b552(0x15e),_0x66d1f5['textContent']=_0x52a62e>0x9?'9+':_0x52a62e):_0x66d1f5['style'][_0x10b552(0x158)]=_0x10b552(0x13b));}['getTimeAgo'](_0x422e97){const _0x5c139a=a24_0x584965,_0x3bbe71=new Date(),_0x3faca1=_0x3bbe71-_0x422e97,_0x4a71d8=Math['floor'](_0x3faca1/(0x3e8*0x3c)),_0x5565f5=Math['floor'](_0x3faca1/(0x3e8*0x3c*0x3c)),_0x222a8d=Math['floor'](_0x3faca1/(0x3e8*0x3c*0x3c*0x18));if(_0x4a71d8<0x1)return _0x5c139a(0x125);if(_0x4a71d8<0x3c)return _0x4a71d8+'m\x20ago';if(_0x5565f5<0x18)return _0x5565f5+_0x5c139a(0x122);if(_0x222a8d<0x7)return _0x222a8d+'d\x20ago';return _0x422e97['toLocaleDateString']();}['destroy'](){this['unsubscribe']&&this['unsubscribe'](),this['sentUnsubscribe']&&this['sentUnsubscribe']();}}function a24_0x48e7(_0x48b28d,_0x584980){const _0x51e814=a24_0x1c46();return a24_0x48e7=function(_0x285333,_0x43ad60){_0x285333=_0x285333-0x10f;let _0x1c464a=_0x51e814[_0x285333];return _0x1c464a;},a24_0x48e7(_0x48b28d,_0x584980);}document[a24_0x584965(0x110)](a24_0x584965(0x11b),()=>{new InboxManager();});