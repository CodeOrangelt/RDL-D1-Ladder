const a23_0x209611=(function(){let _0x31ce9f=!![];return function(_0x5dfa88,_0x26b165){const _0x583075=_0x31ce9f?function(){const _0x510630=a23_0x26ba;if(_0x26b165){const _0x4e5d9a=_0x26b165[_0x510630(0x12b)](_0x5dfa88,arguments);return _0x26b165=null,_0x4e5d9a;}}:function(){};return _0x31ce9f=![],_0x583075;};}()),a23_0x3e94ad=a23_0x209611(this,function(){const _0x1efd52=a23_0x26ba;let _0x4f273e;try{const _0x2522cb=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4f273e=_0x2522cb();}catch(_0x245ed9){_0x4f273e=window;}const _0xca24b9=_0x4f273e['console']=_0x4f273e['console']||{},_0x905156=[_0x1efd52(0x140),'warn','info','error',_0x1efd52(0x146),'table','trace'];for(let _0x4612ca=0x0;_0x4612ca<_0x905156['length'];_0x4612ca++){const _0x32824e=a23_0x209611['constructor'][_0x1efd52(0x124)][_0x1efd52(0x13e)](a23_0x209611),_0x29b15c=_0x905156[_0x4612ca],_0xc79b92=_0xca24b9[_0x29b15c]||_0x32824e;_0x32824e['__proto__']=a23_0x209611['bind'](a23_0x209611),_0x32824e[_0x1efd52(0x13c)]=_0xc79b92['toString']['bind'](_0xc79b92),_0xca24b9[_0x29b15c]=_0x32824e;}});a23_0x3e94ad();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x57cac2=a23_0x26ba,_0x529d16=document['getElementById']('d1-switch'),_0x268427=document['getElementById'](_0x57cac2(0x135));console[_0x57cac2(0x140)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x529d16),console['log'](_0x57cac2(0x141),!!_0x268427);function _0x4863a5(){const _0x1e504f=_0x57cac2;document[_0x1e504f(0x131)]('input[name=\x22ladder\x22]')['forEach'](_0x25ba9a=>{_0x25ba9a['addEventListener']('change',_0x246213=>{const _0x54df8a=a23_0x26ba;_0x246213['target']['checked']&&(currentLadder=_0x246213[_0x54df8a(0x12d)]['value'],console['log'](_0x54df8a(0x138)+currentLadder),checkUserLadderStatus());});});}_0x4863a5();const _0x315d7f=document['getElementById']('join-ladder-button');_0x315d7f&&_0x315d7f['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x5345d5=>{if(_0x5345d5)checkUserLadderStatus();else{const _0x5f2a03=document['getElementById']('ladder-join-prompt');_0x5f2a03&&(_0x5f2a03['style']['display']='none');}});});function getCollectionName(_0x17f8ea){const _0x5be147=a23_0x26ba;switch(_0x17f8ea?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case _0x5be147(0x11d):return'playersDuos';case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x17f8ea+',\x20defaulting\x20to\x20D1');return _0x5be147(0x13d);}}async function checkUserLadderStatus(){const _0x503735=a23_0x26ba;console['log'](_0x503735(0x137),currentLadder);const _0x5096dc=auth['currentUser'],_0x27996f=document['getElementById'](_0x503735(0x13a)),_0x386054=document[_0x503735(0x136)]('join-ladder-type'),_0x3373b2=document['getElementById'](_0x503735(0x128));if(!_0x5096dc||!_0x5096dc['uid']||!_0x27996f||!_0x386054||!_0x3373b2){if(_0x27996f)_0x27996f['style']['display']='none';if(_0x3373b2)_0x3373b2['style']['display']=_0x503735(0x13b);return;}try{try{await _0x5096dc['getIdToken'](![]);}catch(_0x32b421){console['error'](_0x503735(0x143),_0x32b421),_0x27996f['style']['display']='none',_0x3373b2['style']['display']=_0x503735(0x13b);return;}const _0x1c229a=getCollectionName(currentLadder),_0x2454c9=doc(db,_0x1c229a,_0x5096dc[_0x503735(0x12a)]),_0x220656=await getDoc(_0x2454c9);if(_0x220656['exists']())_0x27996f['style'][_0x503735(0x11e)]=_0x503735(0x13b),_0x3373b2[_0x503735(0x12e)][_0x503735(0x11e)]='none';else{_0x27996f['style']['display']='none',_0x3373b2['style'][_0x503735(0x11e)]='block',_0x386054['textContent']=currentLadder,_0x3373b2['onclick']=()=>{const _0x416d22=_0x503735;_0x27996f[_0x416d22(0x12e)]['display']===_0x416d22(0x12c)?_0x27996f['style'][_0x416d22(0x11e)]='none':_0x27996f[_0x416d22(0x12e)]['display']='block';};const _0x55b1c9=document['getElementById']('join-username-input'),_0x315698=document['getElementById']('ladder-join-status');if(_0x55b1c9)_0x55b1c9[_0x503735(0x121)]='';_0x315698&&(_0x315698['textContent']='',_0x315698['className']=_0x503735(0x125));}}catch(_0x538a02){console['error']('Error\x20checking\x20ladder\x20status:',_0x538a02),_0x27996f['style']['display']='none',_0x3373b2['style']['display']='none';}}function a23_0x26ba(_0x357683,_0x402ceb){const _0x3e94ad=a23_0x5650();return a23_0x26ba=function(_0x209611,_0xaaacfb){_0x209611=_0x209611-0x11d;let _0x56500b=_0x3e94ad[_0x209611];return _0x56500b;},a23_0x26ba(_0x357683,_0x402ceb);}function a23_0x5650(){const _0x17ecc3=['DUO','display','data','Error\x20joining\x20ladder:','value','className','desc','prototype','ladder-join-status','getIdToken','position','tiny-join-button','textContent','uid','apply','block','target','style','Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.','toLowerCase','querySelectorAll','disabled','Error\x20checking\x20','playersCTF','d2-switch','getElementById','Checking\x20user\x20status\x20for\x20ladder:','Ladder\x20changed\x20to:\x20','ladder-join-status\x20error','ladder-join-prompt','none','toString','players','bind','You\x20are\x20already\x20part\x20of\x20the\x20','log','Ladder\x20join:\x20D2\x20radio\x20found:','email','Authentication\x20verification\x20failed:','error','playersD3','exception','DUOS'];a23_0x5650=function(){return _0x17ecc3;};return a23_0x5650();}async function handleJoinLadder(){const _0x4e4cf1=a23_0x26ba,_0x112795=auth['currentUser'],_0x3fa0b6=document['getElementById']('join-ladder-button'),_0x3f82d5=document['getElementById']('ladder-join-status'),_0x292942=document[_0x4e4cf1(0x136)]('join-username-input');if(!_0x112795||!_0x112795['uid']){_0x3f82d5['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x3f82d5['className']='ladder-join-status\x20error';return;}try{await _0x112795['getIdToken'](!![]);}catch(_0x335529){console[_0x4e4cf1(0x144)]('Authentication\x20error:',_0x335529),_0x3f82d5[_0x4e4cf1(0x129)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x3f82d5['className']='ladder-join-status\x20error';return;}if(!_0x292942||!_0x292942[_0x4e4cf1(0x121)]['trim']()){_0x3f82d5[_0x4e4cf1(0x129)]='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x3f82d5[_0x4e4cf1(0x122)]='ladder-join-status\x20error';return;}try{_0x3fa0b6['disabled']=!![],_0x3f82d5['textContent']='Verifying\x20username...',_0x3f82d5['className']='ladder-join-status\x20loading';let _0x261d11='',_0x940cd5=null;const _0x4476d3=['players','playersD2',_0x4e4cf1(0x145),'playersDuos',_0x4e4cf1(0x134),'nonParticipants'];for(const _0x300df6 of _0x4476d3){try{const _0x3c9654=doc(db,_0x300df6,_0x112795['uid']),_0x22b77b=await getDoc(_0x3c9654);if(_0x22b77b['exists']()){_0x940cd5=_0x22b77b[_0x4e4cf1(0x11f)]();if(_0x940cd5['username']){_0x261d11=_0x940cd5['username'];break;}}}catch(_0x5a3b40){console['error'](_0x4e4cf1(0x133)+_0x300df6+':',_0x5a3b40);}}!_0x261d11&&_0x112795[_0x4e4cf1(0x142)]&&(_0x261d11=_0x112795['email']['split']('@')[0x0]);if(!_0x261d11){_0x3f82d5[_0x4e4cf1(0x129)]=_0x4e4cf1(0x12f),_0x3f82d5['className']=_0x4e4cf1(0x139),_0x3fa0b6['disabled']=![];return;}const _0x45886b=_0x292942['value']['trim']();if(_0x261d11&&_0x45886b['toLowerCase']()!==_0x261d11[_0x4e4cf1(0x130)]()){_0x3f82d5['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x261d11+'\x22\x20to\x20confirm.',_0x3f82d5['className']='ladder-join-status\x20error',_0x3fa0b6[_0x4e4cf1(0x132)]=![];return;}_0x3f82d5[_0x4e4cf1(0x129)]='Joining\x20'+currentLadder+'\x20ladder...';const _0x6a1a70=getCollectionName(currentLadder),_0x34a5cc=doc(db,_0x6a1a70,_0x112795['uid']),_0x3512fc=await getDoc(_0x34a5cc);if(_0x3512fc['exists']()){_0x3f82d5['textContent']=_0x4e4cf1(0x13f)+currentLadder+'\x20ladder.',_0x3f82d5['className']=_0x4e4cf1(0x139),_0x3fa0b6[_0x4e4cf1(0x132)]=![];return;}try{await _0x112795[_0x4e4cf1(0x126)](!![]);}catch(_0x4e8db4){_0x3f82d5[_0x4e4cf1(0x129)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x3f82d5['className']='ladder-join-status\x20error',_0x3fa0b6['disabled']=![];return;}const _0x113a0e=_0x261d11,_0x229f2f=collection(db,_0x6a1a70),_0x47b74b=query(_0x229f2f,orderBy(_0x4e4cf1(0x127),_0x4e4cf1(0x123)),limit(0x1)),_0x588d8d=await getDocs(_0x47b74b);let _0x460ba1=0x1;if(!_0x588d8d['empty']){const _0x3e19fd=_0x588d8d['docs'][0x0]['data']();_0x460ba1=(_0x3e19fd['position']||0x0)+0x1;}const _0x331c28={'username':_0x113a0e,'email':_0x112795['email'],'eloRating':0x4b0,'position':_0x460ba1,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x34a5cc,_0x331c28),currentLadder===_0x4e4cf1(0x147)?_0x3f82d5['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x3f82d5['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x3f82d5['className']='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x5ed653){console['error'](_0x4e4cf1(0x120),_0x5ed653),_0x3f82d5[_0x4e4cf1(0x129)]='Error\x20joining\x20ladder:\x20'+_0x5ed653['message'],_0x3f82d5['className']='ladder-join-status\x20error',_0x3fa0b6['disabled']=![];}}