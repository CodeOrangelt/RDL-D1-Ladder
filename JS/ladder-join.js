const a25_0x47bfc5=(function(){let _0x3a4164=!![];return function(_0x358898,_0x2de481){const _0x492550=_0x3a4164?function(){const _0x379bb8=a25_0x172b;if(_0x2de481){const _0x399698=_0x2de481[_0x379bb8(0x10d)](_0x358898,arguments);return _0x2de481=null,_0x399698;}}:function(){};return _0x3a4164=![],_0x492550;};}()),a25_0x1a5fcc=a25_0x47bfc5(this,function(){const _0x589965=a25_0x172b,_0xfc3f18=function(){const _0x5f2a18=a25_0x172b;let _0x34bc9f;try{_0x34bc9f=Function(_0x5f2a18(0x108)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x36a56a){_0x34bc9f=window;}return _0x34bc9f;},_0x3bfa92=_0xfc3f18(),_0x4f2f40=_0x3bfa92['console']=_0x3bfa92[_0x589965(0x115)]||{},_0x13af6f=['log',_0x589965(0xf6),_0x589965(0x109),'error','exception','table','trace'];for(let _0x292573=0x0;_0x292573<_0x13af6f[_0x589965(0xf3)];_0x292573++){const _0x4b72c0=a25_0x47bfc5[_0x589965(0x100)][_0x589965(0x122)][_0x589965(0x10b)](a25_0x47bfc5),_0x34d88e=_0x13af6f[_0x292573],_0x458346=_0x4f2f40[_0x34d88e]||_0x4b72c0;_0x4b72c0['__proto__']=a25_0x47bfc5['bind'](a25_0x47bfc5),_0x4b72c0['toString']=_0x458346[_0x589965(0xfc)]['bind'](_0x458346),_0x4f2f40[_0x34d88e]=_0x4b72c0;}});a25_0x1a5fcc();function a25_0x40d7(){const _0x2a748b=['style','toLowerCase','error','disabled','length','Error\x20checking\x20','className','warn','join-ladder-button','d1-switch','players','\x20ladder.','currentUser','toString','uid','Ladder\x20changed\x20to:\x20','exists','constructor','playersDuos','value','playersD2','Error\x20checking\x20ladder\x20status:','log','Error\x20joining\x20ladder:\x20','Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22','return\x20(function()\x20','info','reload','bind','display','apply','addEventListener','none','block','trim','textContent','playersD3','getIdToken','console','docs','location','DUOS','forEach','ladder-join-status','change','\x20ladder!\x20The\x20page\x20will\x20refresh...','onclick','d2-switch','data','ladder-join-status\x20error','getElementById','prototype','\x22\x20to\x20confirm.'];a25_0x40d7=function(){return _0x2a748b;};return a25_0x40d7();}function a25_0x172b(_0x4c42f7,_0x5c86f4){const _0x1a5fcc=a25_0x40d7();return a25_0x172b=function(_0x47bfc5,_0x35b2e2){_0x47bfc5=_0x47bfc5-0xef;let _0x40d745=_0x1a5fcc[_0x47bfc5];return _0x40d745;},a25_0x172b(_0x4c42f7,_0x5c86f4);}import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x1f7692=a25_0x172b,_0x44971d=document[_0x1f7692(0x121)](_0x1f7692(0xf8)),_0x671962=document[_0x1f7692(0x121)](_0x1f7692(0x11e));console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x44971d),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x671962);function _0x5dbc02(){const _0x7e01fd=_0x1f7692;document['querySelectorAll']('input[name=\x22ladder\x22]')[_0x7e01fd(0x119)](_0x6ceb7e=>{const _0x13f9ec=_0x7e01fd;_0x6ceb7e[_0x13f9ec(0x10e)](_0x13f9ec(0x11b),_0x466368=>{const _0x325e32=_0x13f9ec;_0x466368['target']['checked']&&(currentLadder=_0x466368['target'][_0x325e32(0x102)],console[_0x325e32(0x105)](_0x325e32(0xfe)+currentLadder),checkUserLadderStatus());});});}_0x5dbc02();const _0x3a31d3=document['getElementById'](_0x1f7692(0xf7));_0x3a31d3&&_0x3a31d3['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x1225c7=>{const _0x3e4da1=_0x1f7692;if(_0x1225c7)checkUserLadderStatus();else{const _0x59b5ec=document['getElementById']('ladder-join-prompt');_0x59b5ec&&(_0x59b5ec['style']['display']=_0x3e4da1(0x10f));}});});function getCollectionName(_0x34a04a){const _0x2404a7=a25_0x172b;switch(_0x34a04a?.['toUpperCase']()){case'D1':return _0x2404a7(0xf9);case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case'DUO':return'playersDuos';case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x34a04a+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x20a0e7=a25_0x172b;console[_0x20a0e7(0x105)]('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x11a32c=auth['currentUser'],_0x1d8944=document['getElementById']('ladder-join-prompt'),_0x2a8555=document['getElementById']('join-ladder-type'),_0x335f6a=document['getElementById']('tiny-join-button');if(!_0x11a32c||!_0x11a32c['uid']||!_0x1d8944||!_0x2a8555||!_0x335f6a){if(_0x1d8944)_0x1d8944['style']['display']=_0x20a0e7(0x10f);if(_0x335f6a)_0x335f6a['style'][_0x20a0e7(0x10c)]=_0x20a0e7(0x10f);return;}try{try{await _0x11a32c['getIdToken'](![]);}catch(_0x685716){console['error']('Authentication\x20verification\x20failed:',_0x685716),_0x1d8944['style']['display']=_0x20a0e7(0x10f),_0x335f6a['style'][_0x20a0e7(0x10c)]='none';return;}const _0x1823eb=getCollectionName(currentLadder),_0x23ea51=doc(db,_0x1823eb,_0x11a32c['uid']),_0x55e2eb=await getDoc(_0x23ea51);if(_0x55e2eb['exists']())_0x1d8944[_0x20a0e7(0xef)][_0x20a0e7(0x10c)]=_0x20a0e7(0x10f),_0x335f6a['style'][_0x20a0e7(0x10c)]='none';else{_0x1d8944['style']['display']=_0x20a0e7(0x10f),_0x335f6a['style']['display']=_0x20a0e7(0x110),_0x2a8555['textContent']=currentLadder,_0x335f6a[_0x20a0e7(0x11d)]=()=>{const _0x1c9e84=_0x20a0e7;_0x1d8944['style'][_0x1c9e84(0x10c)]==='block'?_0x1d8944[_0x1c9e84(0xef)]['display']='none':_0x1d8944[_0x1c9e84(0xef)]['display']='block';};const _0x19cb2d=document['getElementById']('join-username-input'),_0x300069=document[_0x20a0e7(0x121)]('ladder-join-status');if(_0x19cb2d)_0x19cb2d['value']='';_0x300069&&(_0x300069['textContent']='',_0x300069['className']=_0x20a0e7(0x11a));}}catch(_0x42f096){console['error'](_0x20a0e7(0x104),_0x42f096),_0x1d8944[_0x20a0e7(0xef)]['display']=_0x20a0e7(0x10f),_0x335f6a['style']['display']='none';}}async function handleJoinLadder(){const _0x364535=a25_0x172b,_0x1a34ad=auth[_0x364535(0xfb)],_0x564d37=document[_0x364535(0x121)]('join-ladder-button'),_0x2902db=document[_0x364535(0x121)]('ladder-join-status'),_0x41076b=document['getElementById']('join-username-input');if(!_0x1a34ad||!_0x1a34ad['uid']){_0x2902db['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x2902db['className']='ladder-join-status\x20error';return;}try{await _0x1a34ad[_0x364535(0x114)](!![]);}catch(_0x4f676f){console['error']('Authentication\x20error:',_0x4f676f),_0x2902db['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x2902db['className']=_0x364535(0x120);return;}if(!_0x41076b||!_0x41076b['value']['trim']()){_0x2902db['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x2902db['className']='ladder-join-status\x20error';return;}try{_0x564d37['disabled']=!![],_0x2902db['textContent']='Verifying\x20username...',_0x2902db['className']='ladder-join-status\x20loading';let _0x445969='',_0x4e1235=null;const _0x73cb47=['players',_0x364535(0x103),_0x364535(0x113),_0x364535(0x101),'playersCTF','nonParticipants'];for(const _0x4baead of _0x73cb47){try{const _0x454e67=doc(db,_0x4baead,_0x1a34ad[_0x364535(0xfd)]),_0xe9f184=await getDoc(_0x454e67);if(_0xe9f184['exists']()){_0x4e1235=_0xe9f184['data']();if(_0x4e1235['username']){_0x445969=_0x4e1235['username'];break;}}}catch(_0x2d77fc){console[_0x364535(0xf1)](_0x364535(0xf4)+_0x4baead+':',_0x2d77fc);}}!_0x445969&&_0x1a34ad['email']&&(_0x445969=_0x1a34ad['email']['split']('@')[0x0]);if(!_0x445969){_0x2902db[_0x364535(0x112)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x2902db['className']=_0x364535(0x120),_0x564d37['disabled']=![];return;}const _0x189e0d=_0x41076b['value'][_0x364535(0x111)]();if(_0x445969&&_0x189e0d['toLowerCase']()!==_0x445969[_0x364535(0xf0)]()){_0x2902db['textContent']=_0x364535(0x107)+_0x445969+_0x364535(0x123),_0x2902db[_0x364535(0xf5)]='ladder-join-status\x20error',_0x564d37['disabled']=![];return;}_0x2902db['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x32f28a=getCollectionName(currentLadder),_0x414156=doc(db,_0x32f28a,_0x1a34ad['uid']),_0x53f929=await getDoc(_0x414156);if(_0x53f929[_0x364535(0xff)]()){_0x2902db['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+_0x364535(0xfa),_0x2902db['className']='ladder-join-status\x20error',_0x564d37['disabled']=![];return;}try{await _0x1a34ad[_0x364535(0x114)](!![]);}catch(_0x24f882){_0x2902db['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x2902db['className']=_0x364535(0x120),_0x564d37[_0x364535(0xf2)]=![];return;}const _0x18f9ec=_0x445969,_0x3a0af0=collection(db,_0x32f28a),_0x8cd802=query(_0x3a0af0,orderBy('position','desc'),limit(0x1)),_0x55a3fc=await getDocs(_0x8cd802);let _0x53cb1d=0x1;if(!_0x55a3fc['empty']){const _0x5ff7ee=_0x55a3fc[_0x364535(0x116)][0x0][_0x364535(0x11f)]();_0x53cb1d=(_0x5ff7ee['position']||0x0)+0x1;}const _0x263bd4={'username':_0x18f9ec,'email':_0x1a34ad['email'],'eloRating':0x4b0,'position':_0x53cb1d,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x414156,_0x263bd4),currentLadder===_0x364535(0x118)?_0x2902db['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x2902db[_0x364535(0x112)]='Successfully\x20joined\x20the\x20'+currentLadder+_0x364535(0x11c),_0x2902db[_0x364535(0xf5)]='ladder-join-status\x20success',setTimeout(()=>{const _0x3e0ac5=_0x364535;window[_0x3e0ac5(0x117)][_0x3e0ac5(0x10a)]();},0x7d0);}catch(_0x743a89){console['error']('Error\x20joining\x20ladder:',_0x743a89),_0x2902db['textContent']=_0x364535(0x106)+_0x743a89['message'],_0x2902db['className']=_0x364535(0x120),_0x564d37['disabled']=![];}}