(function(_0x605069,_0x2099b2){const _0x4c5fb1=a32_0x71ee,_0x23fb63=_0x605069();while(!![]){try{const _0x478c32=-parseInt(_0x4c5fb1(0x154))/0x1*(-parseInt(_0x4c5fb1(0x106))/0x2)+parseInt(_0x4c5fb1(0x167))/0x3+parseInt(_0x4c5fb1(0x10c))/0x4*(-parseInt(_0x4c5fb1(0x10e))/0x5)+-parseInt(_0x4c5fb1(0xfa))/0x6+-parseInt(_0x4c5fb1(0xf8))/0x7+-parseInt(_0x4c5fb1(0x103))/0x8+parseInt(_0x4c5fb1(0x136))/0x9;if(_0x478c32===_0x2099b2)break;else _0x23fb63['push'](_0x23fb63['shift']());}catch(_0x9e7dbb){_0x23fb63['push'](_0x23fb63['shift']());}}}(a32_0x1db5,0x2ff78));function a32_0x71ee(_0x27bf45,_0x39f7b2){const _0x3685c4=a32_0x1db5();return a32_0x71ee=function(_0x532c1c,_0xe428ae){_0x532c1c=_0x532c1c-0xf0;let _0x5dc521=_0x3685c4[_0x532c1c];return _0x5dc521;},a32_0x71ee(_0x27bf45,_0x39f7b2);}const a32_0x20362a=(function(){let _0x3689c9=!![];return function(_0x7448a0,_0x3b83e9){const _0x2ca6a4=_0x3689c9?function(){const _0x1197f5=a32_0x71ee;if(_0x3b83e9){const _0x5e07b9=_0x3b83e9[_0x1197f5(0x16c)](_0x7448a0,arguments);return _0x3b83e9=null,_0x5e07b9;}}:function(){};return _0x3689c9=![],_0x2ca6a4;};}()),a32_0xcf0063=a32_0x20362a(this,function(){const _0x2a6eec=a32_0x71ee;return a32_0xcf0063[_0x2a6eec(0x119)]()[_0x2a6eec(0x15c)](_0x2a6eec(0x158))[_0x2a6eec(0x119)]()[_0x2a6eec(0x14c)](a32_0xcf0063)[_0x2a6eec(0x15c)](_0x2a6eec(0x158));});a32_0xcf0063();const a32_0xe428ae=(function(){let _0x266c84=!![];return function(_0x5bfe3d,_0x21a6b9){const _0x5b3aff=_0x266c84?function(){const _0x8e8def=a32_0x71ee;if(_0x21a6b9){const _0x149857=_0x21a6b9[_0x8e8def(0x16c)](_0x5bfe3d,arguments);return _0x21a6b9=null,_0x149857;}}:function(){};return _0x266c84=![],_0x5b3aff;};}()),a32_0x532c1c=a32_0xe428ae(this,function(){const _0x2fb996=a32_0x71ee,_0x42d3ef=function(){const _0x13f007=a32_0x71ee;let _0x4525e4;try{_0x4525e4=Function(_0x13f007(0x148)+_0x13f007(0x12f)+');')();}catch(_0x3577d0){_0x4525e4=window;}return _0x4525e4;},_0x23bf13=_0x42d3ef(),_0x2d70a4=_0x23bf13['console']=_0x23bf13[_0x2fb996(0xfc)]||{},_0x1f72be=[_0x2fb996(0x15d),_0x2fb996(0x153),_0x2fb996(0x110),_0x2fb996(0xf4),_0x2fb996(0xf0),_0x2fb996(0x13a),_0x2fb996(0x10a)];for(let _0x21c8a0=0x0;_0x21c8a0<_0x1f72be[_0x2fb996(0x12a)];_0x21c8a0++){const _0x32ff88=a32_0xe428ae['constructor']['prototype'][_0x2fb996(0xf9)](a32_0xe428ae),_0x22d17a=_0x1f72be[_0x21c8a0],_0x5bb8fc=_0x2d70a4[_0x22d17a]||_0x32ff88;_0x32ff88[_0x2fb996(0x149)]=a32_0xe428ae[_0x2fb996(0xf9)](a32_0xe428ae),_0x32ff88[_0x2fb996(0x119)]=_0x5bb8fc[_0x2fb996(0x119)][_0x2fb996(0xf9)](_0x5bb8fc),_0x2d70a4[_0x22d17a]=_0x32ff88;}});a32_0x532c1c();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x582275 from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x2fb5f3=![]){const _0x3febbd=a32_0x71ee,_0x3d2691=document[_0x3febbd(0x10d)](_0x3febbd(0x13f));if(!_0x3d2691){console[_0x3febbd(0xf4)](_0x3febbd(0x160));return;}_0x3d2691[_0x3febbd(0x166)]=_0x3febbd(0xfd);try{const _0x1ed80c=Date[_0x3febbd(0x134)]();if(!_0x2fb5f3&&playerCacheD2['data']&&_0x1ed80c-playerCacheD2[_0x3febbd(0x11c)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0x3febbd(0x159)]);return;}const _0x2ddfe6=collection(db,_0x3febbd(0x109)),_0xe45799=query(_0x2ddfe6,orderBy(_0x3febbd(0x164),_0x3febbd(0x165))),_0x13d54f=await a32_0x582275[_0x3febbd(0x13b)](_0x2ddfe6),_0x38fe92=[];_0x13d54f[_0x3febbd(0x14a)](_0x118931=>{const _0x10c053=_0x3febbd,_0x1c0c2f=_0x118931['data']();_0x1c0c2f['username']&&_0x38fe92[_0x10c053(0x13d)]({..._0x1c0c2f,'id':_0x118931['id'],'elo':_0x1c0c2f['eloRating']||0x0,'position':_0x1c0c2f[_0x10c053(0x164)]||Number['MAX_SAFE_INTEGER']});});const _0x2b79a5=collection(db,_0x3febbd(0x11d)),_0x34f24e=await getDocs(_0x2b79a5),_0xd227ee=new Map();_0x34f24e['forEach'](_0x3e2bc1=>{const _0x85cedb=_0x3febbd,_0x5465df=_0x3e2bc1['data']();_0x5465df[_0x85cedb(0x13c)]&&_0xd227ee[_0x85cedb(0x16b)](_0x5465df['username'][_0x85cedb(0x111)](),_0x5465df);});for(const _0x573a0b of _0x38fe92){const _0x47b97d=_0x573a0b[_0x3febbd(0x13c)][_0x3febbd(0x111)]();if(_0xd227ee[_0x3febbd(0x140)](_0x47b97d)){const _0x29d041=_0xd227ee[_0x3febbd(0x128)](_0x47b97d);_0x29d041[_0x3febbd(0x15a)]&&(_0x573a0b['country']=_0x29d041['country'][_0x3febbd(0x111)]());}}const _0x480fc0=_0x38fe92[_0x3febbd(0x118)](_0x196656=>_0x196656[_0x3febbd(0x13c)]),_0x1ca38c=await fetchBatchMatchStatsD2(_0x480fc0);_0x38fe92[_0x3febbd(0x144)]((_0x269ed1,_0x36f577)=>{const _0x167774=_0x3febbd,_0x316577=_0x1ca38c[_0x167774(0x128)](_0x269ed1[_0x167774(0x13c)])?.[_0x167774(0x105)]||0x0,_0x3bebac=_0x1ca38c[_0x167774(0x128)](_0x36f577[_0x167774(0x13c)])?.[_0x167774(0x105)]||0x0;if(_0x316577===0x0!==(_0x3bebac===0x0))return _0x316577===0x0?0x1:-0x1;return(_0x269ed1[_0x167774(0x164)]||0x3e7)-(_0x36f577[_0x167774(0x164)]||0x3e7);}),_0x38fe92[_0x3febbd(0x14a)]((_0x8dcea1,_0x8773d5)=>{const _0x556121=_0x3febbd;_0x8dcea1[_0x556121(0x164)]=_0x8773d5+0x1;}),playerCacheD2['data']=_0x38fe92,playerCacheD2['timestamp']=_0x1ed80c,updateLadderDisplayD2(_0x38fe92);}catch(_0x59b3a0){console['error'](_0x3febbd(0x129),_0x59b3a0),_0x3d2691[_0x3febbd(0x166)]=_0x3febbd(0x12b)+_0x59b3a0[_0x3febbd(0x137)]+_0x3febbd(0xf5);}}function getNextAvailablePositionD2(_0x5c0053){const _0x5592e4=a32_0x71ee;if(_0x5c0053['length']===0x0)return 0x1;let _0x58bfba=0x0;return _0x5c0053[_0x5592e4(0x14a)](_0x541fe8=>{const _0x1a7aa0=_0x5592e4;_0x541fe8[_0x1a7aa0(0x164)]&&typeof _0x541fe8['position']===_0x1a7aa0(0x147)&&_0x541fe8[_0x1a7aa0(0x164)]>_0x58bfba&&(_0x58bfba=_0x541fe8[_0x1a7aa0(0x164)]);}),_0x58bfba+0x1;}function a32_0x1db5(){const _0x214b40=['#ladder-d2\x20tbody','has','winnerScore','Silver','eloHistory','sort','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','style','number','return\x20(function()\x20','__proto__','forEach','#50C878','constructor','eloHistoryD2','find','display','td:nth-child(3)','#ladder-d2\x20thead\x20tr','kda','warn','47UVOeHI','winnerUsername','<img\x20src=\x22../images/flags/','totalKills','(((.+)+)+)+$','data','country','Emerald','search','log','0.85em','querySelectorAll','D2\x20Ladder\x20table\x20body\x20not\x20found','Unranked','toDate','includes','position','asc','innerHTML','115272RABVWw','#F44336','%</td>\x0a\x20\x20\x20\x20</tr>',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','set','apply','exception','toFixed','fontSize','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','catch','loserScore','454671fKvwmf','bind','1470090HWoZfG','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','console','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','visible','\x20fallback\x20ELO\x20change:\x20','#C0C0C0','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','newElo','2373472iVqjQp','losses','totalMatches','16252hXfFul','visibility','elo','playersD2','trace','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','248368XfFwnW','querySelector','25lDBNBH','totalDeaths','info','toLowerCase','#FFD700','#CD7F32','#4CAF50','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','bold','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','map','toString','loserUsername','size','timestamp','userProfiles','Bronze','abs','wins','gray','player','matchId','previousElo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','winRate','get','Error\x20loading\x20D2\x20ladder:','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','change','.trend-indicator','D2:\x20','{}.constructor(\x22return\x20this\x22)(\x20)','then','desc','playerUsername','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','now','firstPlaceDate','6239142RNxqTj','message','color',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','table','getDocuments','username','push','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'];a32_0x1db5=function(){return _0x214b40;};return a32_0x1db5();}async function updatePlayerPositions(_0x1018de,_0x29a0b4){const _0xc11cf5=a32_0x71ee;try{const _0x1b4006=collection(db,_0xc11cf5(0x109)),_0x2f6cc6=await getDocs(_0x1b4006),_0x3696de=[];_0x2f6cc6['forEach'](_0x1ca2cd=>{const _0x4b1275=_0xc11cf5;_0x3696de[_0x4b1275(0x13d)]({'id':_0x1ca2cd['id'],..._0x1ca2cd['data']()});});const _0x1b83b1=_0x3696de['find'](_0x13cf00=>_0x13cf00[_0xc11cf5(0x13c)]===_0x1018de),_0x43d6bf=_0x3696de['find'](_0x9b3869=>_0x9b3869[_0xc11cf5(0x13c)]===_0x29a0b4);if(!_0x1b83b1||!_0x43d6bf){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x1b83b1[_0xc11cf5(0x164)]>_0x43d6bf[_0xc11cf5(0x164)]){const _0x1944c0=_0x43d6bf['position'];for(const _0x5b57ba of _0x3696de){_0x5b57ba[_0xc11cf5(0x164)]>=_0x43d6bf[_0xc11cf5(0x164)]&&_0x5b57ba[_0xc11cf5(0x164)]<_0x1b83b1[_0xc11cf5(0x164)]&&_0x5b57ba[_0xc11cf5(0x13c)]!==_0x1018de&&await updateDoc(doc(db,'playersD2',_0x5b57ba['id']),{'position':_0x5b57ba[_0xc11cf5(0x164)]+0x1});}await updateDoc(doc(db,'playersD2',_0x1b83b1['id']),{'position':_0x1944c0});if(_0x1944c0===0x1){const _0x577ea6=doc(db,'playersD2',_0x1b83b1['id']),_0x14bb87=await getDoc(_0x577ea6);!_0x14bb87[_0xc11cf5(0x159)]()[_0xc11cf5(0x135)]&&await updateDoc(_0x577ea6,{'firstPlaceDate':Timestamp['now']()});}if(_0x43d6bf['position']===0x1){const _0x4a9d9c=doc(db,_0xc11cf5(0x109),_0x43d6bf['id']);await updateDoc(_0x4a9d9c,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x5ae262){console[_0xc11cf5(0xf4)]('Error\x20updating\x20D2\x20player\x20positions:',_0x5ae262);}}function calculateStreakDays(_0x1e3d34){const _0x454c40=a32_0x71ee;if(!_0x1e3d34)return 0x0;const _0xfd1317=_0x1e3d34[_0x454c40(0x162)](),_0x322da6=new Date(),_0x110963=Math[_0x454c40(0x11f)](_0x322da6-_0xfd1317);return Math['ceil'](_0x110963/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x9718d){const _0x4e62e0=a32_0x71ee;if(_0x9718d>=0x834)return _0x4e62e0(0x15b);if(_0x9718d>=0x708)return'Gold';if(_0x9718d>=0x640)return _0x4e62e0(0x142);if(_0x9718d>=0x578)return _0x4e62e0(0x11e);return _0x4e62e0(0x161);}async function updateLadderDisplayD2(_0x227b00){const _0x4a3937=a32_0x71ee;_0x227b00[_0x4a3937(0x144)]((_0x45cdd1,_0x536b51)=>_0x45cdd1[_0x4a3937(0x164)]-_0x536b51[_0x4a3937(0x164)]);const _0x23e226=document['querySelector']('#ladder-d2\x20tbody');if(!_0x23e226)return;_0x23e226[_0x4a3937(0x166)]='';const _0x5d1b8a=_0x227b00[_0x4a3937(0x118)](_0x5d0676=>_0x5d0676[_0x4a3937(0x13c)]),_0x11ca89=await fetchBatchMatchStatsD2(_0x5d1b8a),_0x12fa6b=document[_0x4a3937(0x10d)](_0x4a3937(0x151));_0x12fa6b&&(_0x12fa6b[_0x4a3937(0x166)]=_0x4a3937(0x117));const _0x1c02d7=_0x227b00['map'](_0x11e01f=>{const _0x576a7d=_0x4a3937,_0x2b8b42=_0x11ca89[_0x576a7d(0x128)](_0x11e01f['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x11e01f,_0x2b8b42);})['join']('');_0x23e226[_0x4a3937(0x166)]=_0x1c02d7,getPlayersLastEloChangesD2(_0x5d1b8a)[_0x4a3937(0x130)](_0x16a698=>{const _0x26504e=_0x4a3937,_0x4d19ef=new Map();_0x23e226[_0x26504e(0x15f)]('tr')[_0x26504e(0x14a)]((_0x50aa7a,_0x518296)=>{const _0x5f187e=_0x26504e;_0x518296<_0x5d1b8a[_0x5f187e(0x12a)]&&_0x4d19ef['set'](_0x5d1b8a[_0x518296],_0x50aa7a);}),_0x16a698[_0x26504e(0x14a)]((_0x13d7f5,_0x34335b)=>{const _0x457d30=_0x26504e,_0xd7f1c5=_0x4d19ef[_0x457d30(0x128)](_0x34335b);if(_0xd7f1c5&&_0x13d7f5!==0x0){const _0xa25d38=_0xd7f1c5[_0x457d30(0x10d)](_0x457d30(0x150));if(_0xa25d38){const _0x4cc2d7=_0x13d7f5>0x0?'+'+_0x13d7f5:''+_0x13d7f5,_0x3e6f05=_0xa25d38['querySelector'](_0x457d30(0x12d));_0x3e6f05&&(_0x3e6f05['textContent']=_0x4cc2d7,_0x3e6f05['style'][_0x457d30(0x138)]=_0x13d7f5>0x0?_0x457d30(0x114):_0x457d30(0x168),_0x3e6f05['style']['fontWeight']=_0x457d30(0x116),_0x3e6f05[_0x457d30(0x146)][_0x457d30(0xf2)]=_0x457d30(0x15e),_0x3e6f05[_0x457d30(0x146)][_0x457d30(0x14f)]='inline',_0x3e6f05['style'][_0x457d30(0x107)]=_0x457d30(0xfe),_0x3e6f05[_0x457d30(0x146)]['opacity']='1');}}});})[_0x4a3937(0xf6)](_0x3eb605=>console[_0x4a3937(0xf4)](_0x4a3937(0x115),_0x3eb605));}function createPlayerRowD2(_0x2ed812,_0x13881a){const _0xdcfc05=a32_0x71ee,_0x52633b=parseFloat(_0x2ed812[_0xdcfc05(0x108)])||0x0;let _0x1857d8=_0xdcfc05(0x121);if(_0x52633b>=0x7d0)_0x1857d8=_0xdcfc05(0x14b);else{if(_0x52633b>=0x708)_0x1857d8=_0xdcfc05(0x112);else{if(_0x52633b>=0x640)_0x1857d8=_0xdcfc05(0x100);else _0x52633b>=0x578&&(_0x1857d8=_0xdcfc05(0x113));}}let _0x48151d='';return _0x2ed812['country']&&(_0x48151d=_0xdcfc05(0x156)+_0x2ed812[_0xdcfc05(0x15a)][_0xdcfc05(0x111)]()+_0xdcfc05(0x145)+_0x2ed812['country']+_0xdcfc05(0x10b)),_0xdcfc05(0x101)+_0x2ed812[_0xdcfc05(0x164)]+_0xdcfc05(0x126)+encodeURIComponent(_0x2ed812['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x1857d8+_0xdcfc05(0x16a)+_0x2ed812[_0xdcfc05(0x13c)]+_0xdcfc05(0x125)+_0x48151d+_0xdcfc05(0xfb)+_0x1857d8+_0xdcfc05(0x139)+_0x52633b+_0xdcfc05(0x13e)+_0x13881a[_0xdcfc05(0x105)]+_0xdcfc05(0x133)+_0x13881a[_0xdcfc05(0x120)]+_0xdcfc05(0x133)+_0x13881a[_0xdcfc05(0x104)]+_0xdcfc05(0x133)+_0x13881a[_0xdcfc05(0x152)]+_0xdcfc05(0x133)+_0x13881a['winRate']+_0xdcfc05(0x169);}async function getPlayersLastEloChangesD2(_0x121f43){const _0x5e32b5=a32_0x71ee,_0x5a0339=new Map();_0x121f43[_0x5e32b5(0x14a)](_0x2f36eb=>_0x5a0339[_0x5e32b5(0x16b)](_0x2f36eb,0x0));try{const _0x5f4304=collection(db,_0x5e32b5(0x14d)),_0x4aa4e9=query(_0x5f4304,orderBy(_0x5e32b5(0x11c),_0x5e32b5(0x131)),limit(0x64)),_0x56f31e=await getDocs(_0x4aa4e9),_0xca3932=new Map(),_0x3a17f0=await getDocs(collection(db,_0x5e32b5(0x109)));_0x3a17f0[_0x5e32b5(0x14a)](_0x56e16d=>{const _0x185586=_0x5e32b5,_0x1aaad0=_0x56e16d[_0x185586(0x159)]();_0x1aaad0['username']&&_0xca3932[_0x185586(0x16b)](_0x56e16d['id'],_0x1aaad0[_0x185586(0x13c)]);});const _0x441b06=new Map();_0x56f31e[_0x5e32b5(0x14a)](_0x5abc28=>{const _0x124f3f=_0x5e32b5,_0x1ff48e=_0x5abc28['data']();let _0x120a2b=_0x1ff48e[_0x124f3f(0x13c)]||_0x1ff48e[_0x124f3f(0x132)];!_0x120a2b&&_0x1ff48e[_0x124f3f(0x122)]&&_0xca3932['has'](_0x1ff48e[_0x124f3f(0x122)])&&(_0x120a2b=_0xca3932[_0x124f3f(0x128)](_0x1ff48e[_0x124f3f(0x122)]));if(!_0x120a2b&&_0x1ff48e[_0x124f3f(0x123)]){}_0x120a2b&&_0x121f43['includes'](_0x120a2b)&&(!_0x441b06['has'](_0x120a2b)&&_0x441b06[_0x124f3f(0x16b)](_0x120a2b,[]),_0x441b06[_0x124f3f(0x128)](_0x120a2b)[_0x124f3f(0x13d)]({..._0x1ff48e,'timestamp':_0x1ff48e[_0x124f3f(0x11c)]?.['seconds']||0x0,'username':_0x120a2b}));}),_0x441b06[_0x5e32b5(0x14a)]((_0x135088,_0x51e832)=>{const _0x218640=_0x5e32b5;if(_0x135088[_0x218640(0x12a)]>0x0){_0x135088['sort']((_0x58cabd,_0x226d2a)=>_0x226d2a[_0x218640(0x11c)]-_0x58cabd[_0x218640(0x11c)]);const _0x2ff5d9=_0x135088[_0x218640(0x14e)](_0x4503eb=>_0x4503eb[_0x218640(0x12c)]!==undefined||_0x4503eb[_0x218640(0x102)]!==undefined&&_0x4503eb[_0x218640(0x124)]!==undefined);if(_0x2ff5d9){let _0x24b970;if(_0x2ff5d9[_0x218640(0x12c)]!==undefined)_0x24b970=_0x2ff5d9[_0x218640(0x12c)];else _0x2ff5d9[_0x218640(0x102)]!==undefined&&_0x2ff5d9[_0x218640(0x124)]!==undefined&&(_0x24b970=_0x2ff5d9['newElo']-_0x2ff5d9[_0x218640(0x124)]);_0x24b970!==undefined&&_0x5a0339[_0x218640(0x16b)](_0x51e832,_0x24b970);}}});if(_0x441b06[_0x5e32b5(0x11b)]===0x0){const _0x4c82e8=collection(db,_0x5e32b5(0x143)),_0x4b073c=query(_0x4c82e8,where('gameMode','==','D2'),orderBy(_0x5e32b5(0x11c),'desc'),limit(0x32));try{const _0x3617a3=await getDocs(_0x4b073c);console[_0x5e32b5(0x15d)]('D2:\x20Found',_0x3617a3[_0x5e32b5(0x11b)],'fallback\x20entries'),_0x3617a3[_0x5e32b5(0x14a)](_0x4871dd=>{const _0x4cecf8=_0x5e32b5,_0x5267b2=_0x4871dd[_0x4cecf8(0x159)](),_0x2881df=_0x5267b2['username']||_0x5267b2['playerUsername'];if(_0x2881df&&_0x121f43[_0x4cecf8(0x163)](_0x2881df)){const _0x45b60e=_0x5267b2[_0x4cecf8(0x12c)]||(_0x5267b2[_0x4cecf8(0x102)]!==undefined&&_0x5267b2[_0x4cecf8(0x124)]!==undefined?_0x5267b2[_0x4cecf8(0x102)]-_0x5267b2['previousElo']:0x0);_0x45b60e!==0x0&&(_0x5a0339['set'](_0x2881df,_0x45b60e),console['log'](_0x4cecf8(0x12e)+_0x2881df+_0x4cecf8(0xff)+_0x45b60e));}});}catch(_0x33a342){}}}catch(_0x4032c8){console[_0x5e32b5(0xf4)]('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x4032c8);}return _0x5a0339;}async function fetchBatchMatchStatsD2(_0x643852){const _0x444b0f=a32_0x71ee,_0x141157=new Map();try{_0x643852[_0x444b0f(0x14a)](_0x545653=>{const _0x54da1e=_0x444b0f;_0x141157[_0x54da1e(0x16b)](_0x545653,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x511919=collection(db,'approvedMatchesD2'),_0x4a1b65=await getDocs(_0x511919);_0x4a1b65[_0x444b0f(0x14a)](_0x19cdd3=>{const _0x5843fa=_0x444b0f,_0x17e9c0=_0x19cdd3['data'](),_0x44b1ae=_0x17e9c0[_0x5843fa(0x155)],_0x46f3e5=_0x17e9c0[_0x5843fa(0x11a)];if(_0x643852[_0x5843fa(0x163)](_0x44b1ae)){const _0x1234ff=_0x141157[_0x5843fa(0x128)](_0x44b1ae);_0x1234ff[_0x5843fa(0x120)]++,_0x1234ff[_0x5843fa(0x105)]++,_0x1234ff['totalKills']+=parseInt(_0x17e9c0[_0x5843fa(0x141)])||0x0,_0x1234ff[_0x5843fa(0x10f)]+=parseInt(_0x17e9c0[_0x5843fa(0xf7)])||0x0;}if(_0x643852[_0x5843fa(0x163)](_0x46f3e5)){const _0x1ad149=_0x141157[_0x5843fa(0x128)](_0x46f3e5);_0x1ad149['losses']++,_0x1ad149[_0x5843fa(0x105)]++,_0x1ad149['totalKills']+=parseInt(_0x17e9c0[_0x5843fa(0xf7)])||0x0,_0x1ad149[_0x5843fa(0x10f)]+=parseInt(_0x17e9c0[_0x5843fa(0x141)])||0x0;}}),_0x643852[_0x444b0f(0x14a)](_0x44149d=>{const _0xd133c9=_0x444b0f,_0x52c7d3=_0x141157[_0xd133c9(0x128)](_0x44149d);_0x52c7d3['kda']=_0x52c7d3['totalDeaths']>0x0?(_0x52c7d3[_0xd133c9(0x157)]/_0x52c7d3[_0xd133c9(0x10f)])[_0xd133c9(0xf1)](0x2):_0x52c7d3['totalKills'][_0xd133c9(0xf1)](0x2),_0x52c7d3[_0xd133c9(0x127)]=_0x52c7d3[_0xd133c9(0x105)]>0x0?(_0x52c7d3[_0xd133c9(0x120)]/_0x52c7d3[_0xd133c9(0x105)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x5b1ec8){console['error'](_0x444b0f(0xf3),_0x5b1ec8);}return _0x141157;}export{displayLadderD2,updatePlayerPositions};