const a0_0x1faf68=a0_0x2c87;(function(_0x4a666b,_0x3605ce){const _0x29e37a=a0_0x2c87,_0xc04d58=_0x4a666b();while(!![]){try{const _0x21248c=-parseInt(_0x29e37a(0xeb))/0x1+-parseInt(_0x29e37a(0x12b))/0x2+parseInt(_0x29e37a(0xdf))/0x3+parseInt(_0x29e37a(0x138))/0x4*(parseInt(_0x29e37a(0x125))/0x5)+parseInt(_0x29e37a(0x12d))/0x6+-parseInt(_0x29e37a(0x13f))/0x7*(-parseInt(_0x29e37a(0xef))/0x8)+parseInt(_0x29e37a(0x11b))/0x9;if(_0x21248c===_0x3605ce)break;else _0xc04d58['push'](_0xc04d58['shift']());}catch(_0x54f874){_0xc04d58['push'](_0xc04d58['shift']());}}}(a0_0x1ea6,0x7cad4));const a0_0x2f0b05=(function(){let _0x482619=!![];return function(_0x331f23,_0x14d6c3){const _0x20bae0=_0x482619?function(){if(_0x14d6c3){const _0x4f6c38=_0x14d6c3['apply'](_0x331f23,arguments);return _0x14d6c3=null,_0x4f6c38;}}:function(){};return _0x482619=![],_0x20bae0;};}()),a0_0x1f1837=a0_0x2f0b05(this,function(){const _0x498ff4=a0_0x2c87,_0x2c3f2d=function(){const _0x2d3b99=a0_0x2c87;let _0x2ddd08;try{_0x2ddd08=Function(_0x2d3b99(0xfe)+_0x2d3b99(0xcc)+');')();}catch(_0x357b03){_0x2ddd08=window;}return _0x2ddd08;},_0x36ff35=_0x2c3f2d(),_0x49a186=_0x36ff35[_0x498ff4(0xe4)]=_0x36ff35['console']||{},_0x33512f=[_0x498ff4(0x105),_0x498ff4(0xa7),'info','error','exception','table','trace'];for(let _0x3973d8=0x0;_0x3973d8<_0x33512f['length'];_0x3973d8++){const _0x17e39c=a0_0x2f0b05['constructor'][_0x498ff4(0x134)]['bind'](a0_0x2f0b05),_0x4ffb6c=_0x33512f[_0x3973d8],_0x3f15fb=_0x49a186[_0x4ffb6c]||_0x17e39c;_0x17e39c['__proto__']=a0_0x2f0b05['bind'](a0_0x2f0b05),_0x17e39c['toString']=_0x3f15fb['toString']['bind'](_0x3f15fb),_0x49a186[_0x4ffb6c]=_0x17e39c;}});a0_0x1f1837();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0x1ea6(){const _0x3b6acb=['code','Theme\x20system\x20not\x20found','Apply\x20Theme','Failed\x20to\x20equip\x20token:\x20','../images/tokens/Fan.gif','\x20Points','isAdmin','switchTheme','push','✅\x20Equipped\x20token:\x20','theme_','querySelectorAll','Classic\x20RDL','confirm','Please\x20sign\x20in\x20to\x20purchase\x20themes','inventory','../images/tokens/Extralife.gif','name','message','Insufficient\x20points','\x20token','getCurrentTheme','Token\x20equip\x20failed:','No\x20token\x20is\x20currently\x20equipped','not-allowed','preventDefault','User\x20profile\x20not\x20found','getElementById','forEach','can-afford','❌\x20User\x20not\x20authenticated','Strategic\x20explosive\x20device','Purchase\x20','Please\x20sign\x20in\x20to\x20sell\x20tokens','{}.constructor(\x22return\x20this\x22)(\x20)','FREE','special','Laser','itemId','opacity','\x20token\x20for\x20','\x22\x20alt=\x22','Please\x20sign\x20in\x20to\x20purchase\x20tokens','👑\x20Admin\x20controls\x20enabled','Purchase\x20failed.\x20Please\x20try\x20again.','style','textContent','exists','\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','../images/tokens/Pyro.gif','token_','store-content','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','70179CPOqcx','\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)','../images/tokens/Phoenix.gif','0.7','token','console','current-theme','store-message','visible','tokens','equipment','classList','554500yCsLEu','.token-sell-btn','Token\x20','\x20more\x20points.','3600912aRwbBn','points','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','Themes\x20container\x20not\x20found','Token\x20purchase\x20failed:','Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','Sold\x20','add','\x20points','You\x20already\x20own\x20this\x20','is\x20that...\x20Pfunk?','price','email','Fast\x20and\x20furious\x20missile\x20token.','Token\x20clicked:\x20','return\x20(function()\x20','div','equippedToken','permission-denied','none','dataset','userProfiles','log','background','Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:','includes','innerHTML','appendChild','var(--muted-color,\x20#757575)','addEventListener','High-powered\x20plasma\x20cannon\x20token.','Extra\x20Life','\x20points?','username','Marker','Mega\x20Missile','transactions','currentUser','weapon','createElement','default','Plasma\x20Cannon','Classic\x20laser\x20weapon\x20token.','../images/tokens/subgame/smissile.gif','4673511iMUKPp','\x20points?\x20This\x20cannot\x20be\x20undone.','../images/tokens/Invuln.gif','theme','error','display','displayLadder','RedeemStore','You\x20already\x20own\x20the\x20','Equip','5nRXSPW','🔧\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful','Lock\x20in\x20your\x20victory.','store-item','data','image','1902914CNykpa','Tokens\x20container\x20not\x20found','3092124GGaDoB','disabled','remove','\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','🔄\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token','Another\x20enigmatic\x20blob\x20creature','success','prototype','A\x20cunning\x20explosive\x20device.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-','click','233516OStYVo','uid','Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','../images/tokens/Reactor.gif','function','parentNode','isUserAdmin','14BcgEzI','[data-theme]','powerup','../images/tokens/blob03.gif','userTokens','cursor','[data-token]','Advanced\x20energy\x20storage\x20system','.theme-select-btn','info','../images/tokens/Plasmablobl.gif','\x20not\x20found','warn','Become\x20invincible\x20for\x20a\x20short\x20time.','querySelector'];a0_0x1ea6=function(){return _0x3b6acb;};return a0_0x1ea6();}import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a0_0x1faf68(0xb6),'description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'cockpit':{'price':0x4b0,'name':'Cockpit','description':a0_0x1faf68(0xf9)}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':'powerup'},'fan':{'price':0x96,'name':'Fan','description':'Show\x20your\x20support\x20with\x20this\x20fan\x20token.','image':a0_0x1faf68(0xae),'category':'fun'},'marker':{'price':0xfa,'name':a0_0x1faf68(0x111),'description':'Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','image':'../images/tokens/Marker.gif','category':'fun'},'laser':{'price':0x12c,'name':a0_0x1faf68(0xcf),'description':a0_0x1faf68(0x119),'image':'../images/tokens/Laser.gif','category':'weapon'},'pbomb':{'price':0x15e,'name':'Proximity\x20Bomb','description':a0_0x1faf68(0xc9),'image':'../images/tokens/subgame/pbomb.gif','category':a0_0x1faf68(0x115)},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':'Devastating\x20fusion\x20weapon\x20technology','image':'../images/tokens/subgame/fusion.gif','category':'weapon'},'lock':{'price':0x1c2,'name':'Lock','description':a0_0x1faf68(0x127),'image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':'Blob\x20Token\x201','description':'A\x20mysterious\x20purple\x20blob\x20token','image':'../images/tokens/blob01.gif','category':'blob'},'plasma':{'price':0x1f4,'name':a0_0x1faf68(0x118),'description':a0_0x1faf68(0x10d),'image':'../images/tokens/Plasma.gif','category':'weapon'},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':'Become\x20one\x20with\x20the\x20shadows','image':'../images/tokens/cloak.gif','category':'special'},'pwr02':{'price':0x258,'name':'Shield\x20Orb','description':a0_0x1faf68(0xa2),'image':'../images/tokens/subgame/pwr02.gif','category':'powerup'},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':a0_0x1faf68(0xfc),'image':'../images/tokens/Mercury.gif','category':a0_0x1faf68(0x115)},'plasmablobl':{'price':0x258,'name':'Plasma\x20Blob','description':'A\x20mysterious\x20plasma\x20blob.','image':a0_0x1faf68(0xa5),'category':'blob'},'smissile':{'price':0x28a,'name':'Smart\x20Missile','description':'Intelligent\x20targeting\x20system','image':a0_0x1faf68(0x11a),'category':a0_0x1faf68(0x115)},'smartmine':{'price':0x2ee,'name':'Smart\x20Mine','description':a0_0x1faf68(0x135),'image':'../images/tokens/Smartmine.gif','category':a0_0x1faf68(0x115)},'mmissile':{'price':0x320,'name':a0_0x1faf68(0x112),'description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':'../images/tokens/subgame/mmissile.gif','category':'weapon'},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':'Monitor\x20your\x20ship\x27s\x20energy\x20levels','image':'../images/tokens/gauge18.gif','category':a0_0x1faf68(0xe9)},'extralife':{'price':0x320,'name':a0_0x1faf68(0x10e),'description':'A\x20rare\x20extra\x20life\x20token.','image':a0_0x1faf68(0xba),'category':'special'},'hostage':{'price':0x3b6,'name':'Hostage','description':a0_0x1faf68(0xf4),'image':'../images/tokens/Hostage.gif','category':a0_0x1faf68(0xce)},'phoenix':{'price':0x3b6,'name':'Phoenix\x20Cannon','description':'Fiery\x20phoenix\x20cannon\x20token.','image':a0_0x1faf68(0xe1),'category':'weapon'},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':a0_0x1faf68(0x132),'image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':'Invulnerability','description':a0_0x1faf68(0xa8),'image':a0_0x1faf68(0x11d),'category':a0_0x1faf68(0x9d)},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':'The\x20final\x20blob\x20in\x20the\x20collection','image':a0_0x1faf68(0x9e),'category':'blob'},'reactor':{'price':0x7d0,'name':'Reactor','description':'The\x20heart\x20of\x20every\x20mine.','image':a0_0x1faf68(0x13b),'category':'special'},'pyro':{'price':0xbb8,'name':'Pyro','description':'The\x20iconic\x20Pyro-GX\x20ship.','image':a0_0x1faf68(0xdb),'category':'ship'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x3da4e9=a0_0x1faf68;console['log']('🏪\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x3da4e9(0xc5)](_0x3da4e9(0xdd)),pointsDisplay=document['getElementById']('user-points'),authWarning=document[_0x3da4e9(0xc5)]('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x4c44f8=>{const _0x2da7af=a0_0x2c87;if(_0x4c44f8){console[_0x2da7af(0x105)]('✅\x20User\x20authenticated:',_0x4c44f8['displayName']||_0x4c44f8[_0x2da7af(0xfb)]);if(authWarning)authWarning[_0x2da7af(0xd7)]['display']='none';if(storeContainer)storeContainer[_0x2da7af(0xd7)]['display']='block';await loadUserData(_0x4c44f8),updateThemeButtons(),updateTokenButtons();}else{console[_0x2da7af(0x105)](_0x2da7af(0xc8));if(authWarning)authWarning['style'][_0x2da7af(0x120)]='block';if(storeContainer)storeContainer['style'][_0x2da7af(0x120)]='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x2da7af(0x13e)]=![];}});}async function loadUserData(_0x5cb60a){const _0x40e2b5=a0_0x1faf68;try{const _0x15ef8b=doc(db,_0x40e2b5(0x104),_0x5cb60a['uid']),_0x2e5ab6=await getDoc(_0x15ef8b);if(_0x2e5ab6[_0x40e2b5(0xd9)]()){const _0x2205e2=_0x2e5ab6['data']();userData={'points':_0x2205e2['points']||0x0,'inventory':_0x2205e2['inventory']||[],'isAdmin':_0x2205e2['isAdmin']||![],'equippedToken':_0x2205e2['equippedToken']||null},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData[_0x40e2b5(0xb0)]&&(console['log'](_0x40e2b5(0xd5)),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData[_0x40e2b5(0xf0)]+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||'none'));}else await setDoc(_0x15ef8b,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x5cb60a['displayName']||_0x5cb60a[_0x40e2b5(0xfb)]?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay[_0x40e2b5(0xd8)]='0'),window['isUserAdmin']=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x5168f2){console[_0x40e2b5(0x11f)]('Error\x20loading\x20user\x20data:',_0x5168f2);}}function userOwnsTheme(_0x1d4a53){if(THEMES[_0x1d4a53]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x1d4a53);}function a0_0x2c87(_0x29a7dc,_0x2cf515){const _0x41916b=a0_0x1ea6();return a0_0x2c87=function(_0x1f1837,_0x2f0b05){_0x1f1837=_0x1f1837-0x9d;let _0x311905=_0x41916b[_0x1f1837];return _0x311905;},a0_0x2c87(_0x29a7dc,_0x2cf515);}function userOwnsToken(_0x5a5a4c){const _0x2d9911=a0_0x1faf68;return userData[_0x2d9911(0xb9)]['includes']('token_'+_0x5a5a4c);}function userHasTokenEquipped(_0x66d434){return userData['equippedToken']===_0x66d434;}function getEquippedToken(){const _0x19f275=a0_0x1faf68;return userData[_0x19f275(0x100)]||null;}async function purchaseTheme(_0x2f1590){const _0x4263f3=a0_0x1faf68,_0x35e0cd=auth['currentUser'];if(!_0x35e0cd)return showMessage(_0x4263f3(0xb8),'error'),![];const _0x1436a3=THEMES[_0x2f1590];if(!_0x1436a3)return console['error']('Theme\x20'+_0x2f1590+'\x20not\x20found'),![];if(userData[_0x4263f3(0xf0)]<_0x1436a3['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x1436a3[_0x4263f3(0xfa)]-userData['points'])+'\x20more\x20points.',_0x4263f3(0x11f)),![];if(userOwnsTheme(_0x2f1590))return showMessage('You\x20already\x20own\x20the\x20'+_0x1436a3[_0x4263f3(0xbb)]+'\x20theme',_0x4263f3(0xa4)),![];try{return await processPurchase(_0x2f1590,_0x1436a3,'theme');}catch(_0x23f02b){return console['error']('Theme\x20purchase\x20failed:',_0x23f02b),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x4263f3(0x11f)),![];}}async function purchaseToken(_0x2ca384){const _0x23139a=a0_0x1faf68,_0x2d842a=auth['currentUser'];if(!_0x2d842a)return showMessage(_0x23139a(0xd4),'error'),![];const _0x12bd19=TOKENS[_0x2ca384];if(!_0x12bd19)return console['error'](_0x23139a(0xed)+_0x2ca384+'\x20not\x20found'),![];if(userData[_0x23139a(0xf0)]<_0x12bd19[_0x23139a(0xfa)])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x12bd19['price']-userData['points'])+_0x23139a(0xee),'error'),![];if(userOwnsToken(_0x2ca384))return showMessage(_0x23139a(0x123)+_0x12bd19['name']+'\x20token','info'),![];try{return await processPurchase(_0x2ca384,_0x12bd19,'token');}catch(_0x56084f){return console['error'](_0x23139a(0xf3),_0x56084f),showMessage(_0x23139a(0xd6),'error'),![];}}async function processPurchase(_0x4cdbb7,_0x3e3491,_0x236b82){const _0x4cf5db=a0_0x1faf68,_0xf81696=auth['currentUser'];try{const _0x2beea9=doc(db,'userProfiles',_0xf81696[_0x4cf5db(0x139)]),_0xa648bc=await getDoc(_0x2beea9);if(!_0xa648bc['exists']())return showMessage(_0x4cf5db(0xc4),_0x4cf5db(0x11f)),![];const _0x3d404f=_0xa648bc[_0x4cf5db(0x129)](),_0x5bc39a=_0x3d404f['points']||0x0,_0x326a3b=_0x3d404f['inventory']||[];if(_0x5bc39a<_0x3e3491[_0x4cf5db(0xfa)])return showMessage(_0x4cf5db(0xbd),_0x4cf5db(0x11f)),![];if(_0x326a3b[_0x4cf5db(0x108)](_0x236b82+'_'+_0x4cdbb7))return showMessage(_0x4cf5db(0xf8)+_0x236b82,_0x4cf5db(0xa4)),![];const _0x5c345b=_0x5bc39a-_0x3e3491[_0x4cf5db(0xfa)],_0x4fc3c1=[..._0x326a3b,_0x236b82+'_'+_0x4cdbb7];await updateDoc(_0x2beea9,{'points':_0x5c345b,'inventory':_0x4fc3c1,'lastPurchase':serverTimestamp()});if(_0x236b82===_0x4cf5db(0xe3))try{const _0x1d0ebf=doc(db,'userTokens',_0xf81696['uid']),_0x442bad=await getDoc(_0x1d0ebf);let _0x5961b9=[];_0x442bad[_0x4cf5db(0xd9)]()&&(_0x5961b9=_0x442bad['data']()[_0x4cf5db(0xe8)]||[]);const _0x20c785=new Date();_0x5961b9[_0x4cf5db(0xb2)]({'tokenId':_0x4cdbb7,'tokenName':_0x3e3491['name'],'tokenImage':_0x3e3491[_0x4cf5db(0x12a)],'category':_0x3e3491['category'],'purchasedAt':_0x20c785,'price':_0x3e3491['price'],'equipped':![]}),await setDoc(_0x1d0ebf,{'userId':_0xf81696['uid'],'username':_0x3d404f[_0x4cf5db(0x110)]||_0xf81696['displayName']||'Unknown','tokens':_0x5961b9,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache==='function'&&clearTokenCache(_0xf81696['uid']),console['log']('✅\x20Token\x20'+_0x4cdbb7+_0x4cf5db(0xe0));}catch(_0x215084){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:',_0x215084),_0x215084[_0x4cf5db(0xaa)]==='permission-denied'?console['log'](_0x4cf5db(0x126)):console[_0x4cf5db(0x11f)]('Unexpected\x20token\x20error:',_0x215084);}try{await addDoc(collection(db,_0x4cf5db(0x113)),{'userId':_0xf81696['uid'],'userEmail':_0xf81696[_0x4cf5db(0xfb)],'itemId':_0x236b82+'_'+_0x4cdbb7,'itemTitle':_0x3e3491['name'],'price':_0x3e3491[_0x4cf5db(0xfa)],'type':'purchase','category':_0x236b82,'timestamp':serverTimestamp()});}catch(_0x1d8f7f){console[_0x4cf5db(0xa7)]('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x1d8f7f);}return userData['points']=_0x5c345b,userData[_0x4cf5db(0xb9)]=_0x4fc3c1,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),updateTokenButtons(),_0x236b82==='theme'&&updateThemeButtons(),console[_0x4cf5db(0x105)]('✅\x20Purchased\x20'+_0x3e3491['name']+'\x20for\x20'+_0x3e3491['price']+_0x4cf5db(0xf7)),showMessage('Successfully\x20purchased\x20'+_0x3e3491['name']+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0x5bb2fb){console['error']('Purchase\x20processing\x20error:',_0x5bb2fb);if(_0x5bb2fb['code']===_0x4cf5db(0x101))showMessage(_0x4cf5db(0x13a),'error');else{if(_0x5bb2fb['code']==='unavailable')showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.',_0x4cf5db(0x11f));else _0x5bb2fb['code']==='unauthenticated'?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.','error'):showMessage(_0x4cf5db(0xd6),_0x4cf5db(0x11f));}return![];}}async function equipToken(_0x46fe8e){const _0x713f2=a0_0x1faf68,_0x461a60=auth[_0x713f2(0x114)];if(!_0x461a60)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens','error'),![];const _0x5cf6c0=TOKENS[_0x46fe8e];if(!_0x5cf6c0)return console['error']('Token\x20'+_0x46fe8e+'\x20not\x20found'),![];if(!userOwnsToken(_0x46fe8e))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','error'),![];try{const _0x3b9516=doc(db,'userProfiles',_0x461a60[_0x713f2(0x139)]);await updateDoc(_0x3b9516,{'equippedToken':_0x46fe8e,'lastTokenEquip':serverTimestamp()});try{const _0x5c2936=doc(db,'userTokens',_0x461a60['uid']),_0x4d1db7=await getDoc(_0x5c2936);if(_0x4d1db7['exists']()){const _0x11804e=_0x4d1db7['data'](),_0x586e2f=_0x11804e['tokens']||[],_0x3a68e1=_0x586e2f['map'](_0x3e685d=>({..._0x3e685d,'equipped':_0x3e685d['tokenId']===_0x46fe8e}));await updateDoc(_0x5c2936,{'tokens':_0x3a68e1,'equippedToken':_0x46fe8e,'lastUpdated':serverTimestamp()});}}catch(_0x3b98c0){console['warn'](_0x713f2(0x107),_0x3b98c0);}return userData['equippedToken']=_0x46fe8e,typeof clearTokenCache==='function'&&(clearTokenCache(_0x461a60['uid']),clearTokenCache()),setTimeout(()=>{const _0x434045=_0x713f2;window['displayLadder']&&typeof window[_0x434045(0x121)]===_0x434045(0x13c)&&(console['log']('🔄\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token'),window['displayLadder'](!![])),window[_0x434045(0x122)]&&typeof window['RedeemStore']['refreshUI']==='function'&&window[_0x434045(0x122)]['refreshUI']();},0x1f4),console['log'](_0x713f2(0xb3)+_0x5cf6c0[_0x713f2(0xbb)]),showMessage(_0x5cf6c0['name']+_0x713f2(0xda),'success'),!![];}catch(_0x50c44d){return console['error'](_0x713f2(0xc0),_0x50c44d),_0x50c44d['code']==='permission-denied'?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','warning'):showMessage(_0x713f2(0xad)+_0x50c44d[_0x713f2(0xbc)],'error'),![];}}async function unequipToken(){const _0x536389=a0_0x1faf68,_0xef5768=auth['currentUser'];if(!_0xef5768)return showMessage('Please\x20sign\x20in\x20to\x20unequip\x20tokens','error'),![];if(!userData['equippedToken'])return showMessage(_0x536389(0xc1),'info'),![];try{const _0x4871cb=doc(db,_0x536389(0x104),_0xef5768[_0x536389(0x139)]);await updateDoc(_0x4871cb,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x4426fa=doc(db,_0x536389(0x9f),_0xef5768['uid']),_0x42fc83=await getDoc(_0x4426fa);if(_0x42fc83[_0x536389(0xd9)]()){const _0x49efb6=_0x42fc83['data'](),_0x48c389=_0x49efb6['tokens']||[],_0x5b5169=_0x48c389['map'](_0x5ba158=>({..._0x5ba158,'equipped':![]}));await updateDoc(_0x4426fa,{'tokens':_0x5b5169,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache===_0x536389(0x13c)&&(clearTokenCache(_0xef5768[_0x536389(0x139)]),clearTokenCache()),setTimeout(()=>{const _0x3b10cd=_0x536389;window['displayLadder']&&typeof window['displayLadder']==='function'&&(console['log'](_0x3b10cd(0x131)),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x3b10cd(0x122)]['refreshUI']===_0x3b10cd(0x13c)&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('✅\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.',_0x536389(0x133)),!![];}catch(_0x28ec3c){return console['error']('Token\x20unequip\x20failed:',_0x28ec3c),showMessage('Failed\x20to\x20unequip\x20token:\x20'+_0x28ec3c['message'],_0x536389(0x11f)),![];}}async function sellToken(_0x5f2d69){const _0x1c5ffe=a0_0x1faf68,_0x3a143a=auth[_0x1c5ffe(0x114)];if(!_0x3a143a)return showMessage(_0x1c5ffe(0xcb),_0x1c5ffe(0x11f)),![];if(!userData['isAdmin'])return showMessage('Only\x20admins\x20can\x20sell\x20tokens','error'),![];const _0xf0ab38=TOKENS[_0x5f2d69];if(!_0xf0ab38)return console['error']('Token\x20'+_0x5f2d69+'\x20not\x20found'),![];if(!userOwnsToken(_0x5f2d69))return showMessage('You\x20don\x27t\x20own\x20this\x20token','error'),![];try{const _0x9062d6=doc(db,'userProfiles',_0x3a143a['uid']),_0x2bb7c5=await getDoc(_0x9062d6),_0x42ef8f=_0x2bb7c5[_0x1c5ffe(0x129)](),_0x5e276a=Math['floor'](_0xf0ab38['price']*0.5),_0x1ec4f5=(_0x42ef8f[_0x1c5ffe(0xf0)]||0x0)+_0x5e276a,_0x3d9934=(_0x42ef8f[_0x1c5ffe(0xb9)]||[])['filter'](_0xf1b61e=>_0xf1b61e!==_0x1c5ffe(0xdc)+_0x5f2d69),_0x43ec5a=_0x42ef8f['equippedToken']===_0x5f2d69?null:_0x42ef8f[_0x1c5ffe(0x100)];await updateDoc(_0x9062d6,{'points':_0x1ec4f5,'inventory':_0x3d9934,'equippedToken':_0x43ec5a,'lastSale':serverTimestamp()});const _0x2f30a5=doc(db,'userTokens',_0x3a143a['uid']),_0x5d2610=await getDoc(_0x2f30a5);if(_0x5d2610[_0x1c5ffe(0xd9)]()){const _0xfdf673=_0x5d2610['data'](),_0x33b9b4=_0xfdf673['tokens']||[],_0x5a90ba=_0x33b9b4['filter'](_0x475650=>_0x475650['tokenId']!==_0x5f2d69);await updateDoc(_0x2f30a5,{'tokens':_0x5a90ba,'equippedToken':_0x43ec5a,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0x3a143a['uid'],'userEmail':_0x3a143a['email'],'itemId':_0x1c5ffe(0xdc)+_0x5f2d69,'itemTitle':_0xf0ab38['name'],'refund':_0x5e276a,'originalPrice':_0xf0ab38['price'],'type':'sale','category':'token','timestamp':serverTimestamp()}),userData['points']=_0x1ec4f5,userData['inventory']=_0x3d9934,userData['equippedToken']=_0x43ec5a,pointsDisplay&&(pointsDisplay[_0x1c5ffe(0xd8)]=userData['points']['toLocaleString']()),typeof clearTokenCache==='function'&&clearTokenCache(_0x3a143a['uid']),console['log']('✅\x20Sold\x20token\x20'+_0xf0ab38['name']+'\x20for\x20'+_0x5e276a+_0x1c5ffe(0xf7)),showMessage(_0x1c5ffe(0xf5)+_0xf0ab38['name']+'\x20for\x20'+_0x5e276a+'\x20points\x20(50%\x20refund)',_0x1c5ffe(0x133)),!![];}catch(_0x4d08ad){return console[_0x1c5ffe(0x11f)]('Token\x20sale\x20failed:',_0x4d08ad),showMessage('Failed\x20to\x20sell\x20token:\x20'+_0x4d08ad['message'],'error'),![];}}function applyTheme(_0x3eadcd){const _0x5a3666=a0_0x1faf68;if(!userOwnsTheme(_0x3eadcd))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x5a3666(0x11f)),![];return window['ThemeSystem']?(window['ThemeSystem'][_0x5a3666(0xb1)](_0x3eadcd),showMessage((THEMES[_0x3eadcd]?.['name']||_0x3eadcd)+'\x20theme\x20applied!','success'),!![]):(console['error'](_0x5a3666(0xab)),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x151d58=a0_0x1faf68,_0x325d39=document['querySelector']('.themes-grid');if(!_0x325d39){console['error'](_0x151d58(0xf2));return;}_0x325d39[_0x151d58(0x109)]='',Object['entries'](THEMES)['forEach'](([_0x43eacf,_0x218593])=>{const _0x3572c3=_0x151d58,_0x264014=document[_0x3572c3(0x116)]('div');_0x264014['className']=_0x3572c3(0x128),_0x264014['dataset']['theme']=_0x43eacf,_0x264014['dataset'][_0x3572c3(0xd0)]=_0x3572c3(0xb4)+_0x43eacf,_0x264014['dataset'][_0x3572c3(0xfa)]=_0x218593['price'],_0x264014[_0x3572c3(0x109)]=_0x3572c3(0x136)+_0x43eacf+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x218593['price']===0x0?_0x3572c3(0xcd):_0x218593['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x218593['name']+_0x3572c3(0xf1)+_0x218593['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x325d39[_0x3572c3(0x10a)](_0x264014);}),setupThemeButtons();}function buildTokenItems(){const _0x4e4bd5=a0_0x1faf68,_0x5239b9=document[_0x4e4bd5(0xa9)]('.tokens-grid');if(!_0x5239b9){console[_0x4e4bd5(0x11f)](_0x4e4bd5(0x12c));return;}_0x5239b9['innerHTML']='',Object['entries'](TOKENS)['forEach'](([_0x4726af,_0x40eef1])=>{const _0x1101a6=_0x4e4bd5,_0xb52edd=document['createElement']('div');_0xb52edd['className']='store-item\x20token-item',_0xb52edd[_0x1101a6(0x103)]['token']=_0x4726af,_0xb52edd[_0x1101a6(0x103)]['itemId']='token_'+_0x4726af,_0xb52edd['dataset']['price']=_0x40eef1['price'];const _0x2b66f2=userData[_0x1101a6(0xb0)]&&userOwnsToken(_0x4726af)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math['floor'](_0x40eef1[_0x1101a6(0xfa)]*0.5)+_0x1101a6(0x130):'';_0xb52edd[_0x1101a6(0x109)]=_0x1101a6(0xde)+_0x40eef1['image']+_0x1101a6(0xd3)+_0x40eef1['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x40eef1['price']+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2b66f2+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5239b9['appendChild'](_0xb52edd);}),setupTokenButtons();}function setupThemeButtons(){const _0x56407e=a0_0x1faf68,_0x52cccf=document['querySelectorAll'](_0x56407e(0xa3));_0x52cccf['forEach'](_0x4df8a1=>{const _0xc86f50=_0x56407e;_0x4df8a1[_0xc86f50(0x10c)](_0xc86f50(0x137),async _0x60aee3=>{const _0x5cca49=_0xc86f50;_0x60aee3['preventDefault']();const _0x28b4d7=auth['currentUser'];if(!_0x28b4d7){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x288d7f=_0x4df8a1['closest']('[data-theme]'),_0x357d41=_0x288d7f['dataset'][_0x5cca49(0x11e)],_0x4ddb81=THEMES[_0x357d41];if(!_0x4ddb81){console[_0x5cca49(0x11f)]('Theme\x20'+_0x357d41+_0x5cca49(0xa6));return;}console[_0x5cca49(0x105)]('Theme\x20clicked:\x20'+_0x4ddb81['name']+'\x20('+_0x357d41+')');if(_0x4df8a1['disabled']){_0x4ddb81['price']>0x0&&showMessage('You\x20need\x20'+_0x4ddb81[_0x5cca49(0xfa)]+'\x20points\x20to\x20purchase\x20this\x20theme',_0x5cca49(0x11f));return;}if(_0x4df8a1['textContent']==='Current\x20Theme'){showMessage(_0x4ddb81['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x4df8a1[_0x5cca49(0xd8)]===_0x5cca49(0xac)){applyTheme(_0x357d41),updateThemeButtons();return;}if(_0x4df8a1['textContent'][_0x5cca49(0x108)]('Buy')){const _0x44f228=window['confirm'](_0x5cca49(0xca)+_0x4ddb81[_0x5cca49(0xbb)]+'\x20theme\x20for\x20'+_0x4ddb81[_0x5cca49(0xfa)]+_0x5cca49(0x10f));if(!_0x44f228)return;const _0x13787a=await purchaseTheme(_0x357d41);_0x13787a&&(showMessage(_0x4ddb81[_0x5cca49(0xbb)]+'\x20theme\x20purchased!',_0x5cca49(0x133)),applyTheme(_0x357d41),updateThemeButtons());return;}userOwnsTheme(_0x357d41)?applyTheme(_0x357d41):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x5cca49(0x11f));});}),updateThemeButtons();}function setupTokenButtons(){const _0x184fa1=a0_0x1faf68,_0x16bbd7=document['querySelectorAll']('.token-select-btn'),_0x38ff97=document[_0x184fa1(0xb5)]('.token-equip-btn'),_0x1e5ef8=document['querySelectorAll'](_0x184fa1(0xec));_0x16bbd7['forEach'](_0x1aa52c=>{_0x1aa52c['addEventListener']('click',async _0x2959e8=>{const _0x3a0bd8=a0_0x2c87;_0x2959e8['preventDefault']();const _0x25fed8=auth[_0x3a0bd8(0x114)];if(!_0x25fed8){showMessage(_0x3a0bd8(0xd4),'error');return;}const _0x1dd7b6=_0x1aa52c['closest'](_0x3a0bd8(0xa1)),_0x414c86=_0x1dd7b6['dataset'][_0x3a0bd8(0xe3)],_0x573737=TOKENS[_0x414c86];if(!_0x573737){console['error']('Token\x20'+_0x414c86+'\x20not\x20found');return;}console['log'](_0x3a0bd8(0xfd)+_0x573737['name']+'\x20('+_0x414c86+')');if(_0x1aa52c[_0x3a0bd8(0x12e)]){showMessage('You\x20need\x20'+_0x573737['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x1aa52c['textContent']==='Owned'){showMessage('You\x20already\x20own\x20the\x20'+_0x573737['name']+_0x3a0bd8(0xbe),'info');return;}if(_0x1aa52c['textContent']['includes']('Purchase')||_0x1aa52c[_0x3a0bd8(0xd8)]['includes']('Buy')){const _0x4c7e50=window[_0x3a0bd8(0xb7)]('Purchase\x20'+_0x573737['name']+_0x3a0bd8(0xd2)+_0x573737['price']+'\x20points?');if(!_0x4c7e50)return;const _0x2f4f1=await purchaseToken(_0x414c86);_0x2f4f1&&updateTokenButtons();return;}});}),_0x38ff97['forEach'](_0xf42df6=>{_0xf42df6['addEventListener']('click',async _0x30ce0f=>{const _0x4229b5=a0_0x2c87;_0x30ce0f['preventDefault']();const _0x379419=_0xf42df6['closest']('[data-token]'),_0x1efd29=_0x379419['dataset']['token'],_0x2d9b98=TOKENS[_0x1efd29];if(_0xf42df6['textContent']==='Equipped'){const _0x4243f7=window[_0x4229b5(0xb7)]('Unequip\x20'+_0x2d9b98['name']+'?');if(!_0x4243f7)return;const _0x278575=await unequipToken();_0x278575&&updateTokenButtons();}else{const _0x1305f3=window['confirm']('Equip\x20'+_0x2d9b98['name']+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x1305f3)return;const _0x4cdb29=await equipToken(_0x1efd29);_0x4cdb29&&updateTokenButtons();}});}),_0x1e5ef8['forEach'](_0x28b029=>{const _0x26e738=_0x184fa1;_0x28b029['addEventListener'](_0x26e738(0x137),async _0x4a0933=>{const _0x21790e=_0x26e738;_0x4a0933[_0x21790e(0xc3)]();const _0x120995=_0x28b029['closest']('[data-token]'),_0x4c89a8=_0x120995['dataset']['token'],_0x1e9811=TOKENS[_0x4c89a8],_0x5773e5=Math['floor'](_0x1e9811['price']*0.5),_0x2b61b9=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x1e9811[_0x21790e(0xbb)]+'\x20for\x20'+_0x5773e5+_0x21790e(0x11c));if(!_0x2b61b9)return;const _0x5407f4=await sellToken(_0x4c89a8);_0x5407f4&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x39f4c5=a0_0x1faf68,_0x291f6e=window['ThemeSystem']?window['ThemeSystem'][_0x39f4c5(0xbf)]():'default',_0x599529=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')[_0x39f4c5(0xc6)](_0x2a6108=>{const _0xd0de2=_0x39f4c5,_0x447add=_0x2a6108['closest'](_0xd0de2(0x140)),_0x54d069=_0x447add['dataset'][_0xd0de2(0x11e)],_0x208016=THEMES[_0x54d069];if(!_0x208016)return;_0x2a6108['disabled']=![],_0x2a6108[_0xd0de2(0xd7)][_0xd0de2(0xd1)]='',_0x2a6108['style']['cursor']='pointer',_0x2a6108[_0xd0de2(0xea)]['remove'](_0xd0de2(0xe5),'apply-theme','can-afford','cannot-afford','sign-in-free','sign-in-paid');if(!_0x599529){_0x208016['price']===0x0?(_0x2a6108['textContent']='Sign\x20in\x20to\x20Apply',_0x2a6108['classList']['add']('sign-in-free')):(_0x2a6108['textContent']='Sign\x20in\x20to\x20Purchase',_0x2a6108['disabled']=!![],_0x2a6108['style'][_0xd0de2(0xd1)]='0.7',_0x2a6108['classList'][_0xd0de2(0xf6)]('sign-in-paid'));return;}if(_0x54d069===_0x291f6e){_0x2a6108['textContent']='Current\x20Theme',_0x2a6108['classList']['add']('current-theme'),_0x2a6108['disabled']=!![],_0x2a6108[_0xd0de2(0xd7)][_0xd0de2(0xa0)]=_0xd0de2(0x117);return;}if(userOwnsTheme(_0x54d069)){_0x2a6108['textContent']='Apply\x20Theme',_0x2a6108['classList']['add']('apply-theme');return;}if(userData['points']>=_0x208016['price']){_0x2a6108['textContent']='Buy\x20for\x20'+_0x208016['price']+'\x20Points',_0x2a6108['classList'][_0xd0de2(0xf6)]('can-afford');return;}_0x2a6108['textContent']='Need\x20'+_0x208016[_0xd0de2(0xfa)]+_0xd0de2(0xaf),_0x2a6108['classList']['add']('cannot-afford'),_0x2a6108['style']['opacity']='0.5',_0x2a6108['disabled']=!![],_0x2a6108['style']['cursor']='not-allowed';});}function updateTokenButtons(){const _0x54a6be=auth['currentUser'];document['querySelectorAll']('.token-select-btn')['forEach'](_0x340ddf=>{const _0x30e982=a0_0x2c87,_0x206d07=_0x340ddf['closest']('[data-token]'),_0x11ea20=_0x206d07['dataset']['token'],_0x35fce9=TOKENS[_0x11ea20],_0x4a1760=_0x206d07['querySelector']('.token-equip-btn'),_0x22b172=_0x206d07['querySelector']('.token-sell-btn');if(!_0x35fce9)return;_0x340ddf[_0x30e982(0x12e)]=![],_0x340ddf[_0x30e982(0xd7)][_0x30e982(0xd1)]='',_0x340ddf['style']['cursor']='pointer';_0x4a1760&&(_0x4a1760[_0x30e982(0xd7)][_0x30e982(0x120)]=_0x30e982(0x102),_0x4a1760['disabled']=![],_0x4a1760['style']['opacity']='',_0x4a1760['classList']['remove']('equipped','can-equip'));_0x22b172&&(_0x22b172['style']['display']='none');_0x340ddf['classList'][_0x30e982(0x12f)]('owned',_0x30e982(0xc7),'cannot-afford','sign-in');if(!_0x54a6be){_0x340ddf[_0x30e982(0xd8)]='Sign\x20in\x20to\x20Purchase',_0x340ddf['disabled']=!![],_0x340ddf['style']['opacity']=_0x30e982(0xe2),_0x340ddf['classList'][_0x30e982(0xf6)]('sign-in');return;}if(userOwnsToken(_0x11ea20)){_0x340ddf['textContent']='Owned',_0x340ddf['classList']['add']('owned'),_0x340ddf[_0x30e982(0x12e)]=!![],_0x340ddf[_0x30e982(0xd7)]['cursor']='default',_0x340ddf['style'][_0x30e982(0x106)]='var(--success-color,\x20#4CAF50)';_0x4a1760&&(_0x4a1760['style']['display']='block',userHasTokenEquipped(_0x11ea20)?(_0x4a1760['textContent']='Equipped',_0x4a1760[_0x30e982(0xea)]['add']('equipped'),_0x4a1760[_0x30e982(0xd7)][_0x30e982(0x106)]='var(--accent-color,\x20#2196F3)',_0x4a1760[_0x30e982(0xd7)][_0x30e982(0xa0)]='pointer'):(_0x4a1760[_0x30e982(0xd8)]=_0x30e982(0x124),_0x4a1760[_0x30e982(0xea)]['add']('can-equip'),_0x4a1760['style']['background']='var(--info-color,\x20#17a2b8)',_0x4a1760[_0x30e982(0xd7)]['cursor']='pointer'));_0x22b172&&userData[_0x30e982(0xb0)]&&(_0x22b172['style'][_0x30e982(0x120)]='block');return;}if(userData['points']>=_0x35fce9[_0x30e982(0xfa)]){_0x340ddf[_0x30e982(0xd8)]='Buy\x20for\x20'+_0x35fce9['price']+_0x30e982(0xaf),_0x340ddf['classList']['add']('can-afford'),_0x340ddf[_0x30e982(0xd7)]['background']='';return;}_0x340ddf['textContent']='Need\x20'+_0x35fce9['price']+'\x20Points',_0x340ddf['classList']['add']('cannot-afford'),_0x340ddf['style']['opacity']='0.5',_0x340ddf['disabled']=!![],_0x340ddf['style'][_0x30e982(0xa0)]=_0x30e982(0xc2),_0x340ddf['style']['background']=_0x30e982(0x10b);});}function showMessage(_0x1dc7a5,_0x3b7bd6='info'){const _0x24e5e8=a0_0x1faf68,_0x29ee23=document['getElementById'](_0x24e5e8(0xe6));_0x29ee23&&_0x29ee23['remove']();const _0x2a600b=document[_0x24e5e8(0x116)](_0x24e5e8(0xff));_0x2a600b['id']=_0x24e5e8(0xe6),_0x2a600b['className']='store-message\x20store-message-'+_0x3b7bd6,_0x2a600b[_0x24e5e8(0xd8)]=_0x1dc7a5,document['body']['appendChild'](_0x2a600b),requestAnimationFrame(()=>{const _0x2472ba=_0x24e5e8;_0x2a600b['classList']['add'](_0x2472ba(0xe7));}),setTimeout(()=>{_0x2a600b['classList']['remove']('visible'),setTimeout(()=>{const _0x69b784=a0_0x2c87;_0x2a600b[_0x69b784(0x13d)]&&_0x2a600b['remove']();},0x12c);},0xfa0);}window[a0_0x1faf68(0x122)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log']('🏪\x20Redeem\x20store\x20loaded');