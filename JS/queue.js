const a47_0x411c49=(function(){let _0x3436fc=!![];return function(_0x4b4502,_0x24db54){const _0x3a9ec8=_0x3436fc?function(){const _0x3dac2a=a47_0x482f;if(_0x24db54){const _0x3f95fb=_0x24db54[_0x3dac2a(0xca)](_0x4b4502,arguments);return _0x24db54=null,_0x3f95fb;}}:function(){};return _0x3436fc=![],_0x3a9ec8;};}()),a47_0x2668bd=a47_0x411c49(this,function(){const _0x4510f5=a47_0x482f,_0x206301=function(){const _0x4f47a9=a47_0x482f;let _0x5dc6ed;try{_0x5dc6ed=Function('return\x20(function()\x20'+_0x4f47a9(0xd5)+');')();}catch(_0x3b6c45){_0x5dc6ed=window;}return _0x5dc6ed;},_0x30569c=_0x206301(),_0x3ab246=_0x30569c['console']=_0x30569c['console']||{},_0x34e497=[_0x4510f5(0xc6),_0x4510f5(0xd1),'info',_0x4510f5(0xc5),_0x4510f5(0xce),'table','trace'];for(let _0x18b03e=0x0;_0x18b03e<_0x34e497['length'];_0x18b03e++){const _0x14c491=a47_0x411c49[_0x4510f5(0xd0)]['prototype'][_0x4510f5(0xd6)](a47_0x411c49),_0x7110c0=_0x34e497[_0x18b03e],_0x2cc1ca=_0x3ab246[_0x7110c0]||_0x14c491;_0x14c491['__proto__']=a47_0x411c49['bind'](a47_0x411c49),_0x14c491[_0x4510f5(0xd8)]=_0x2cc1ca[_0x4510f5(0xd8)]['bind'](_0x2cc1ca),_0x3ab246[_0x7110c0]=_0x14c491;}});a47_0x2668bd();function a47_0x482f(_0x307204,_0x2b3f73){const _0x2668bd=a47_0x51e3();return a47_0x482f=function(_0x411c49,_0x57d823){_0x411c49=_0x411c49-0xc5;let _0x51e3fa=_0x2668bd[_0x411c49];return _0x51e3fa;},a47_0x482f(_0x307204,_0x2b3f73);}import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function a47_0x51e3(){const _0x35c321=['error','log','Error\x20in\x20queue\x20listener:','display','readyPlayers','apply','data','forEach','none','exception','toDate','constructor','warn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','lastUpdated','{}.constructor(\x22return\x20this\x22)(\x20)','bind','style','toString'];a47_0x51e3=function(){return _0x35c321;};return a47_0x51e3();}function updateQueueDisplay(_0x3d14e7){const _0x2ae043=a47_0x482f,_0x4fd523=document['getElementById']('queue-container');if(!_0x4fd523)return;if(_0x3d14e7['length']===0x0){_0x4fd523[_0x2ae043(0xd7)][_0x2ae043(0xc8)]=_0x2ae043(0xcd);return;}_0x4fd523['style']['display']='block';let _0x5f2098=_0x2ae043(0xd3);_0x3d14e7[_0x2ae043(0xcc)](_0x47eb8f=>{const _0x41424e=_0x2ae043;_0x5f2098+=_0x41424e(0xd2)+(_0x47eb8f['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x47eb8f[_0x41424e(0xd4)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x5f2098+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x4fd523['innerHTML']=_0x5f2098;}function formatQueueTime(_0x1498c2){if(!_0x1498c2)return'Just\x20now';const _0x1de2d7=_0x1498c2['toDate']?_0x1498c2['toDate']():new Date(_0x1498c2),_0x47cfbb=new Date(),_0x50adbe=Math['floor']((_0x47cfbb-_0x1de2d7)/0xea60);if(_0x50adbe<0x1)return'Just\x20now';return _0x50adbe+'m\x20in\x20queue';}async function checkQueueTimeout(_0x38900e){const _0x49caa2=a47_0x482f;if(!_0x38900e['lastUpdated'])return;const _0x5b5978=_0x38900e['lastUpdated']['toDate']?_0x38900e['lastUpdated'][_0x49caa2(0xcf)]():new Date(_0x38900e['lastUpdated']),_0x2da0dc=new Date(),_0x4cde02=Math['floor']((_0x2da0dc-_0x5b5978)/0xea60);if(_0x4cde02>=0x1e)try{const _0x18bd20=doc(db,_0x49caa2(0xc9),_0x38900e['id']);await updateDoc(_0x18bd20,{'isReady':![]});}catch(_0x15666b){console[_0x49caa2(0xc5)]('Error\x20removing\x20player\x20from\x20queue:',_0x15666b);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x235401=>{const _0x5cf452=[];_0x235401['forEach'](_0x33fd75=>{const _0xeba96d=a47_0x482f,_0x1cd757=_0x33fd75[_0xeba96d(0xcb)]();if(_0x1cd757['isReady']===!![]){const _0x5b3b8d={'id':_0x33fd75['id'],'username':_0x1cd757['username'],'lastUpdated':_0x1cd757['lastUpdated']||new Date()};_0x5cf452['push'](_0x5b3b8d),checkQueueTimeout(_0x5b3b8d);}}),updateQueueDisplay(_0x5cf452);},_0x2c3dcf=>{const _0x562e1f=a47_0x482f;console['error'](_0x562e1f(0xc7),_0x2c3dcf);});window['addEventListener']('unload',()=>{unsubscribe();});