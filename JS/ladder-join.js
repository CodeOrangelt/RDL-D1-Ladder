const a25_0x12437b=a25_0x2181,a25_0x11560e=(function(){let _0x3a1323=!![];return function(_0x5b6f37,_0x779323){const _0x19aa95=_0x3a1323?function(){if(_0x779323){const _0x4d5d34=_0x779323['apply'](_0x5b6f37,arguments);return _0x779323=null,_0x4d5d34;}}:function(){};return _0x3a1323=![],_0x19aa95;};}()),a25_0x103da2=a25_0x11560e(this,function(){const _0x25bf76=a25_0x2181;let _0x234349;try{const _0x2da3e5=Function(_0x25bf76(0xc9)+_0x25bf76(0xde)+');');_0x234349=_0x2da3e5();}catch(_0x1510ef){_0x234349=window;}const _0x4d70f4=_0x234349['console']=_0x234349[_0x25bf76(0xdd)]||{},_0x5a6ae1=['log','warn','info','error',_0x25bf76(0xc7),'table','trace'];for(let _0xe7e09f=0x0;_0xe7e09f<_0x5a6ae1['length'];_0xe7e09f++){const _0x8b76a2=a25_0x11560e['constructor']['prototype'][_0x25bf76(0xf4)](a25_0x11560e),_0x41b36c=_0x5a6ae1[_0xe7e09f],_0x160533=_0x4d70f4[_0x41b36c]||_0x8b76a2;_0x8b76a2[_0x25bf76(0xd6)]=a25_0x11560e['bind'](a25_0x11560e),_0x8b76a2['toString']=_0x160533['toString']['bind'](_0x160533),_0x4d70f4[_0x41b36c]=_0x8b76a2;}});function a25_0x2181(_0x488de2,_0x1c1e09){const _0x103da2=a25_0x55cd();return a25_0x2181=function(_0x11560e,_0x20d590){_0x11560e=_0x11560e-0xc3;let _0x55cd19=_0x103da2[_0x11560e];return _0x55cd19;},a25_0x2181(_0x488de2,_0x1c1e09);}a25_0x103da2();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';function a25_0x55cd(){const _0x2b5a7e=['Ladder\x20join:\x20D2\x20radio\x20found:','Joining\x20','playersD3','You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.','exception','tiny-join-button','return\x20(function()\x20','Ladder\x20join:\x20D1\x20radio\x20found:','addEventListener','join-ladder-button','error','CTF','Ladder\x20changed\x20to:\x20','onclick','\x20ladder!\x20The\x20page\x20will\x20refresh...','Unknown\x20ladder\x20type:\x20','players','uid','getElementById','__proto__','toLowerCase','data','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','DUO','exists','value','console','{}.constructor(\x22return\x20this\x22)(\x20)','getIdToken','DOMContentLoaded','playersDuos','target','message','playersCTF','log','docs','none','Error\x20joining\x20ladder:\x20','display','style','DUOS','username','className','disabled','Error\x20checking\x20','Please\x20enter\x20your\x20username\x20to\x20confirm.','block','textContent','\x22\x20to\x20confirm.','bind'];a25_0x55cd=function(){return _0x2b5a7e;};return a25_0x55cd();}document['addEventListener'](a25_0x12437b(0xe0),()=>{const _0x2b545b=a25_0x12437b,_0x5a96f2=document[_0x2b545b(0xd5)]('d1-switch'),_0x147a00=document['getElementById']('d2-switch');console['log'](_0x2b545b(0xca),!!_0x5a96f2),console[_0x2b545b(0xe5)](_0x2b545b(0xc3),!!_0x147a00);function _0x2cbe2a(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0x5c1865=>{const _0x2d3104=a25_0x2181;_0x5c1865[_0x2d3104(0xcb)]('change',_0x3838de=>{const _0x1df94f=_0x2d3104;_0x3838de[_0x1df94f(0xe2)]['checked']&&(currentLadder=_0x3838de['target'][_0x1df94f(0xdc)],console[_0x1df94f(0xe5)](_0x1df94f(0xcf)+currentLadder),checkUserLadderStatus());});});}_0x2cbe2a();const _0x44ef8e=document[_0x2b545b(0xd5)](_0x2b545b(0xcc));_0x44ef8e&&_0x44ef8e[_0x2b545b(0xcb)]('click',handleJoinLadder),onAuthStateChanged(auth,_0x3a1342=>{const _0x3fcddf=_0x2b545b;if(_0x3a1342)checkUserLadderStatus();else{const _0x5f5dc1=document['getElementById']('ladder-join-prompt');_0x5f5dc1&&(_0x5f5dc1[_0x3fcddf(0xea)][_0x3fcddf(0xe9)]='none');}});});function getCollectionName(_0x5666f1){const _0x5eabbf=a25_0x12437b;switch(_0x5666f1?.['toUpperCase']()){case'D1':return _0x5eabbf(0xd3);case'D2':return'playersD2';case'D3':return _0x5eabbf(0xc5);case _0x5eabbf(0xeb):case _0x5eabbf(0xda):return'playersDuos';case _0x5eabbf(0xce):return _0x5eabbf(0xe4);default:console['warn'](_0x5eabbf(0xd2)+_0x5666f1+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x12491c=a25_0x12437b;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x4394e6=auth['currentUser'],_0x3161ac=document['getElementById']('ladder-join-prompt'),_0x6794ae=document[_0x12491c(0xd5)]('join-ladder-type'),_0x1eda78=document['getElementById'](_0x12491c(0xc8));if(!_0x4394e6||!_0x4394e6['uid']||!_0x3161ac||!_0x6794ae||!_0x1eda78){if(_0x3161ac)_0x3161ac['style']['display']='none';if(_0x1eda78)_0x1eda78['style']['display']=_0x12491c(0xe7);return;}try{try{await _0x4394e6['getIdToken'](![]);}catch(_0x3a3366){console['error']('Authentication\x20verification\x20failed:',_0x3a3366),_0x3161ac['style']['display']=_0x12491c(0xe7),_0x1eda78['style'][_0x12491c(0xe9)]='none';return;}const _0x27fec3=getCollectionName(currentLadder),_0x378902=doc(db,_0x27fec3,_0x4394e6[_0x12491c(0xd4)]),_0x3840f8=await getDoc(_0x378902);if(_0x3840f8['exists']())_0x3161ac[_0x12491c(0xea)]['display']='none',_0x1eda78['style'][_0x12491c(0xe9)]=_0x12491c(0xe7);else{_0x3161ac['style']['display']='none',_0x1eda78['style']['display']=_0x12491c(0xf1),_0x6794ae[_0x12491c(0xf2)]=currentLadder,_0x1eda78[_0x12491c(0xd0)]=()=>{const _0x1a3fbc=_0x12491c;_0x3161ac['style'][_0x1a3fbc(0xe9)]==='block'?_0x3161ac[_0x1a3fbc(0xea)]['display']='none':_0x3161ac[_0x1a3fbc(0xea)]['display']='block';};const _0x7d2246=document[_0x12491c(0xd5)]('join-username-input'),_0x326349=document[_0x12491c(0xd5)]('ladder-join-status');if(_0x7d2246)_0x7d2246[_0x12491c(0xdc)]='';_0x326349&&(_0x326349['textContent']='',_0x326349['className']='ladder-join-status');}}catch(_0xbc9539){console['error']('Error\x20checking\x20ladder\x20status:',_0xbc9539),_0x3161ac[_0x12491c(0xea)]['display']='none',_0x1eda78[_0x12491c(0xea)][_0x12491c(0xe9)]=_0x12491c(0xe7);}}async function handleJoinLadder(){const _0x4d5677=a25_0x12437b,_0x34fcaf=auth['currentUser'],_0x542203=document[_0x4d5677(0xd5)](_0x4d5677(0xcc)),_0x1bfca3=document[_0x4d5677(0xd5)]('ladder-join-status'),_0x588e0d=document['getElementById']('join-username-input');if(!_0x34fcaf||!_0x34fcaf[_0x4d5677(0xd4)]){_0x1bfca3['textContent']=_0x4d5677(0xc6),_0x1bfca3[_0x4d5677(0xed)]='ladder-join-status\x20error';return;}try{await _0x34fcaf['getIdToken'](!![]);}catch(_0x584501){console['error']('Authentication\x20error:',_0x584501),_0x1bfca3[_0x4d5677(0xf2)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x1bfca3['className']='ladder-join-status\x20error';return;}if(!_0x588e0d||!_0x588e0d[_0x4d5677(0xdc)]['trim']()){_0x1bfca3['textContent']=_0x4d5677(0xf0),_0x1bfca3[_0x4d5677(0xed)]='ladder-join-status\x20error';return;}try{_0x542203[_0x4d5677(0xee)]=!![],_0x1bfca3['textContent']='Verifying\x20username...',_0x1bfca3[_0x4d5677(0xed)]='ladder-join-status\x20loading';let _0xaf67de='',_0x15d34b=null;const _0x37f14c=['players','playersD2','playersD3',_0x4d5677(0xe1),'playersCTF','nonParticipants'];for(const _0x41fa4f of _0x37f14c){try{const _0x4ddde3=doc(db,_0x41fa4f,_0x34fcaf['uid']),_0x4eae9c=await getDoc(_0x4ddde3);if(_0x4eae9c[_0x4d5677(0xdb)]()){_0x15d34b=_0x4eae9c[_0x4d5677(0xd8)]();if(_0x15d34b[_0x4d5677(0xec)]){_0xaf67de=_0x15d34b['username'];break;}}}catch(_0x3a890b){console[_0x4d5677(0xcd)](_0x4d5677(0xef)+_0x41fa4f+':',_0x3a890b);}}!_0xaf67de&&_0x34fcaf['email']&&(_0xaf67de=_0x34fcaf['email']['split']('@')[0x0]);if(!_0xaf67de){_0x1bfca3['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x1bfca3['className']='ladder-join-status\x20error',_0x542203['disabled']=![];return;}const _0x5a193f=_0x588e0d['value']['trim']();if(_0xaf67de&&_0x5a193f['toLowerCase']()!==_0xaf67de[_0x4d5677(0xd7)]()){_0x1bfca3[_0x4d5677(0xf2)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0xaf67de+_0x4d5677(0xf3),_0x1bfca3[_0x4d5677(0xed)]='ladder-join-status\x20error',_0x542203[_0x4d5677(0xee)]=![];return;}_0x1bfca3['textContent']=_0x4d5677(0xc4)+currentLadder+'\x20ladder...';const _0x566af1=getCollectionName(currentLadder),_0x2b6bb6=doc(db,_0x566af1,_0x34fcaf['uid']),_0x526a6f=await getDoc(_0x2b6bb6);if(_0x526a6f['exists']()){_0x1bfca3[_0x4d5677(0xf2)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x1bfca3['className']='ladder-join-status\x20error',_0x542203['disabled']=![];return;}try{await _0x34fcaf[_0x4d5677(0xdf)](!![]);}catch(_0x53bc16){_0x1bfca3['textContent']=_0x4d5677(0xd9),_0x1bfca3[_0x4d5677(0xed)]='ladder-join-status\x20error',_0x542203[_0x4d5677(0xee)]=![];return;}const _0x8dc033=_0xaf67de,_0x20a7e6=collection(db,_0x566af1),_0x40a9a4=query(_0x20a7e6,orderBy('position','desc'),limit(0x1)),_0x312467=await getDocs(_0x40a9a4);let _0x1d1be7=0x1;if(!_0x312467['empty']){const _0x666fbb=_0x312467[_0x4d5677(0xe6)][0x0]['data']();_0x1d1be7=(_0x666fbb['position']||0x0)+0x1;}const _0x589d62={'username':_0x8dc033,'email':_0x34fcaf['email'],'eloRating':0x4b0,'position':_0x1d1be7,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===_0x4d5677(0xeb)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x2b6bb6,_0x589d62),currentLadder===_0x4d5677(0xeb)?_0x1bfca3['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x1bfca3['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+_0x4d5677(0xd1),_0x1bfca3[_0x4d5677(0xed)]='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x1fc923){console[_0x4d5677(0xcd)]('Error\x20joining\x20ladder:',_0x1fc923),_0x1bfca3['textContent']=_0x4d5677(0xe8)+_0x1fc923[_0x4d5677(0xe3)],_0x1bfca3['className']='ladder-join-status\x20error',_0x542203['disabled']=![];}}