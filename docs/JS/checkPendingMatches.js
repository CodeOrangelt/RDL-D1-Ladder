const a0_0x240d0d=a0_0x3863;(function(_0x4347db,_0x4e597c){const _0x2fdbb4=a0_0x3863,_0x36516d=_0x4347db();while(!![]){try{const _0x3b7b89=-parseInt(_0x2fdbb4(0x1cf))/0x1*(-parseInt(_0x2fdbb4(0x1dd))/0x2)+-parseInt(_0x2fdbb4(0x1ce))/0x3+-parseInt(_0x2fdbb4(0x1c8))/0x4+-parseInt(_0x2fdbb4(0x1cd))/0x5+-parseInt(_0x2fdbb4(0x1e2))/0x6+-parseInt(_0x2fdbb4(0x1cb))/0x7*(parseInt(_0x2fdbb4(0x1c5))/0x8)+parseInt(_0x2fdbb4(0x1d8))/0x9;if(_0x3b7b89===_0x4e597c)break;else _0x36516d['push'](_0x36516d['shift']());}catch(_0x500eac){_0x36516d['push'](_0x36516d['shift']());}}}(a0_0x26a4,0x6f101));const a0_0x67d009=(function(){let _0x7d8da5=!![];return function(_0x27eee8,_0x291332){const _0x2bdb1e=_0x7d8da5?function(){if(_0x291332){const _0x45f794=_0x291332['apply'](_0x27eee8,arguments);return _0x291332=null,_0x45f794;}}:function(){};return _0x7d8da5=![],_0x2bdb1e;};}()),a0_0x31bf40=a0_0x67d009(this,function(){const _0x59f031=a0_0x3863,_0x9a2f9c=function(){let _0x25c428;try{_0x25c428=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2b8df1){_0x25c428=window;}return _0x25c428;},_0x587eab=_0x9a2f9c(),_0x3b299b=_0x587eab['console']=_0x587eab['console']||{},_0x4870e8=['log',_0x59f031(0x1c3),'info',_0x59f031(0x1c9),'exception',_0x59f031(0x1be),'trace'];for(let _0x582454=0x0;_0x582454<_0x4870e8['length'];_0x582454++){const _0x267924=a0_0x67d009['constructor']['prototype'][_0x59f031(0x1da)](a0_0x67d009),_0x3091c7=_0x4870e8[_0x582454],_0x386b52=_0x3b299b[_0x3091c7]||_0x267924;_0x267924['__proto__']=a0_0x67d009['bind'](a0_0x67d009),_0x267924['toString']=_0x386b52['toString']['bind'](_0x386b52),_0x3b299b[_0x3091c7]=_0x267924;}});a0_0x31bf40();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';function a0_0x26a4(){const _0x4cd0e2=['341640hkGQDf','getItem','now','Error\x20fetching\x20username:','table','body','empty','uid','username','warn','backgroundColor','404000VqOWyK','style','docs','2636044hHtiTD','error','DOMContentLoaded','35vzVUNB','10px','3151465KnFfDq','1478865TaOGrb','1bZAYVN','report-match-notification','50%','pendingMatchesCache','getElementById','playersD2','data','block','width','16278219nEPsfR','pendingMatchesD2','bind','currentUsername','observe','1475842anlBIb','exists','right','approved','2px\x20solid\x20white'];a0_0x26a4=function(){return _0x4cd0e2;};return a0_0x26a4();}let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a0_0x240d0d(0x1d2),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x187a56=![]){const _0x37156b=a0_0x240d0d,_0x86477c=Date[_0x37156b(0x1bc)](),_0x64c1e1=checkNotificationCache();if(_0x64c1e1!==null&&!_0x187a56){updateNotificationDot(_0x64c1e1);if(_0x86477c-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x86477c;const _0x4197f7=auth['currentUser'];if(!_0x4197f7){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x30cd5c,_0x3ca7b6,_0x1ec3c3]=await Promise['all']([checkForPendingMatchesInCollection(_0x4197f7,'pendingMatches'),checkForPendingMatchesInCollection(_0x4197f7,_0x37156b(0x1d9)),checkForPendingMatchesInCollection(_0x4197f7,'pendingMatchesD3')]),_0x3c0616=_0x30cd5c||_0x3ca7b6||_0x1ec3c3;updateNotificationDot(_0x3c0616),updateNotificationCache(_0x3c0616);}catch(_0x228f40){console[_0x37156b(0x1c9)]('Error\x20checking\x20pending\x20matches:',_0x228f40);}}async function checkForPendingMatchesInCollection(_0xa12580,_0x4d8bcd){const _0x4b0297=a0_0x240d0d,_0x33ae34=_0xa12580['uid'],_0x24a6e8=_0xa12580['email'],_0x4b83fc=query(collection(db,_0x4d8bcd),where('winnerId','==',_0x33ae34),where('approved','==',![])),_0x386c66=await getDocs(_0x4b83fc);if(!_0x386c66[_0x4b0297(0x1c0)])return!![];if(_0x24a6e8){const _0x18e99f=query(collection(db,_0x4d8bcd),where('winnerEmail','==',_0x24a6e8),where(_0x4b0297(0x1e0),'==',![])),_0x4234ca=await getDocs(_0x18e99f);if(!_0x4234ca[_0x4b0297(0x1c0)])return!![];}let _0x403ef8=await getUsernameFromAllSources(_0xa12580);if(_0x403ef8){const _0x2f2b59=query(collection(db,_0x4d8bcd),where('winnerUsername','==',_0x403ef8),where('approved','==',![])),_0x5612cd=await getDocs(_0x2f2b59);if(!_0x5612cd[_0x4b0297(0x1c0)])return!![];}return![];}async function getUsernameFromAllSources(_0x3be1d5){const _0x4a9c48=a0_0x240d0d,_0x4e9980=localStorage[_0x4a9c48(0x1e3)](_0x4a9c48(0x1db));if(_0x4e9980)return _0x4e9980;try{const [_0x25a7f9,_0xf89a2e,_0x2b1254]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x3be1d5['uid']))),getDocs(query(collection(db,_0x4a9c48(0x1d4)),where('userId','==',_0x3be1d5['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x3be1d5['uid'])))]);if(!_0x25a7f9['empty']){const _0xd19290=_0x25a7f9[_0x4a9c48(0x1c7)][0x0]['data']()[_0x4a9c48(0x1c2)];return localStorage['setItem'](_0x4a9c48(0x1db),_0xd19290),_0xd19290;}if(!_0xf89a2e['empty']){const _0x2a6cff=_0xf89a2e['docs'][0x0]['data']()[_0x4a9c48(0x1c2)];return localStorage['setItem']('currentUsername',_0x2a6cff),_0x2a6cff;}if(!_0x2b1254['empty']){const _0x34a1d3=_0x2b1254['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x34a1d3),_0x34a1d3;}const _0x5741c9=await getDoc(doc(db,'users',_0x3be1d5[_0x4a9c48(0x1c1)]));if(_0x5741c9[_0x4a9c48(0x1de)]()&&_0x5741c9[_0x4a9c48(0x1d5)]()[_0x4a9c48(0x1c2)]){const _0x2064e2=_0x5741c9['data']()['username'];return localStorage['setItem']('currentUsername',_0x2064e2),_0x2064e2;}}catch(_0x46ffad){console['error'](_0x4a9c48(0x1bd),_0x46ffad);}if(_0x3be1d5['email'])return _0x3be1d5['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x3b436a){const _0x5db77c={'status':_0x3b436a,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x5db77c));}function checkNotificationCache(){const _0x1f698e=a0_0x240d0d,_0x377b55=localStorage[_0x1f698e(0x1e3)](NOTIFICATION_CACHE_KEY);if(!_0x377b55)return null;try{const {status:_0x5267a9,timestamp:_0x1f8ff1}=JSON['parse'](_0x377b55),_0x32e5b6=Date[_0x1f698e(0x1bc)]();if(_0x32e5b6-_0x1f8ff1<CACHE_EXPIRY)return _0x5267a9;}catch(_0x596739){}return null;}export function updateNotificationDot(_0x2ed2d1){const _0x375e76=a0_0x240d0d,_0x1b7ae8=new MutationObserver((_0x5a0427,_0xb41399)=>{const _0x2d3264=a0_0x3863,_0xd085b1=document[_0x2d3264(0x1d3)]('report-match-notification');_0xd085b1&&(updateDotStyle(_0xd085b1,_0x2ed2d1),_0xb41399['disconnect']());});_0x1b7ae8[_0x375e76(0x1dc)](document[_0x375e76(0x1bf)],{'childList':!![],'subtree':!![]});const _0x572128=document['getElementById'](_0x375e76(0x1d0));_0x572128&&(updateDotStyle(_0x572128,_0x2ed2d1),_0x1b7ae8['disconnect']()),setTimeout(()=>_0x1b7ae8['disconnect'](),0x1388);}function updateDotStyle(_0x58d3ff,_0x3be034){const _0x592e2c=a0_0x240d0d;_0x3be034?(_0x58d3ff[_0x592e2c(0x1c6)]['display']=_0x592e2c(0x1d6),_0x58d3ff[_0x592e2c(0x1c6)][_0x592e2c(0x1c4)]='#ff3b30',_0x58d3ff[_0x592e2c(0x1c6)][_0x592e2c(0x1d7)]='10px',_0x58d3ff['style']['height']=_0x592e2c(0x1cc),_0x58d3ff[_0x592e2c(0x1c6)]['position']='absolute',_0x58d3ff['style']['top']='-5px',_0x58d3ff[_0x592e2c(0x1c6)][_0x592e2c(0x1df)]='-8px',_0x58d3ff['style']['borderRadius']=_0x592e2c(0x1d1),_0x58d3ff['style']['border']=_0x592e2c(0x1e1),_0x58d3ff['style']['zIndex']='999'):_0x58d3ff['style']['display']='none';}function a0_0x3863(_0x1a0971,_0x39266e){const _0x48448c=a0_0x26a4();return a0_0x3863=function(_0x31bf40,_0x67d009){_0x31bf40=_0x31bf40-0x1bc;let _0x485020=_0x48448c[_0x31bf40];return _0x485020;},a0_0x3863(_0x1a0971,_0x39266e);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener'](a0_0x240d0d(0x1ca),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x420e6a=a0_0x3863;localStorage['removeItem'](_0x420e6a(0x1db)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});