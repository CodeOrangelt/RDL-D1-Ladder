const a24_0x2d3cb0=a24_0x3e8f,a24_0x3266c0=(function(){let _0x3f4b9d=!![];return function(_0x588305,_0x86b6f4){const _0x37b9a4=_0x3f4b9d?function(){const _0x355f37=a24_0x3e8f;if(_0x86b6f4){const _0x21c606=_0x86b6f4[_0x355f37(0x212)](_0x588305,arguments);return _0x86b6f4=null,_0x21c606;}}:function(){};return _0x3f4b9d=![],_0x37b9a4;};}()),a24_0xacd765=a24_0x3266c0(this,function(){const _0x2e0a34=a24_0x3e8f,_0x84585a=function(){let _0x54e9e5;try{_0x54e9e5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1eae1b){_0x54e9e5=window;}return _0x54e9e5;},_0xc2030=_0x84585a(),_0x1f0e18=_0xc2030[_0x2e0a34(0x20b)]=_0xc2030['console']||{},_0xe50659=[_0x2e0a34(0x21a),'warn','info','error','exception',_0x2e0a34(0x1de),_0x2e0a34(0x1fd)];for(let _0x155ec0=0x0;_0x155ec0<_0xe50659['length'];_0x155ec0++){const _0x2bd4fd=a24_0x3266c0['constructor']['prototype']['bind'](a24_0x3266c0),_0xcc5ee9=_0xe50659[_0x155ec0],_0x496092=_0x1f0e18[_0xcc5ee9]||_0x2bd4fd;_0x2bd4fd['__proto__']=a24_0x3266c0[_0x2e0a34(0x220)](a24_0x3266c0),_0x2bd4fd[_0x2e0a34(0x216)]=_0x496092[_0x2e0a34(0x216)]['bind'](_0x496092),_0x1f0e18[_0xcc5ee9]=_0x2bd4fd;}});a24_0xacd765();function a24_0x3e3c(){const _0x17bcd7=['\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','respond','trim','table','createdAt','updateInvitationStatus','modal-overlay','classList','m\x20ago','getTimeAgo','status','filter','forEach','.filter-btn','cancelled','./ladderduos.js','dataset','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','createElement','floor','querySelector','toUsername','active','error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setupActionListeners','hasMore','message','style','addEventListener','none','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loadInvitations','trace','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>','currentFilter','sentUnsubscribe','getElementById','To:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','innerHTML','find','pageSize','DOMContentLoaded','unsubscribe','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20','renderInvitations','console','sentInvitations','lastDoc','h\x20ago','fromUsername','pending','teamColor','apply','remove','invitationId','Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.','toString','gameInvitations','head','toDate','log','click','\x22\x20data-invitation-id=\x22','desc','openResponseModal','teamData','bind'];a24_0x3e3c=function(){return _0x17bcd7;};return a24_0x3e3c();}import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a24_0x3e8f(_0x2d84b4,_0x461612){const _0xacd765=a24_0x3e3c();return a24_0x3e8f=function(_0x3266c0,_0x493f31){_0x3266c0=_0x3266c0-0x1db;let _0x3e3cc4=_0xacd765[_0x3266c0];return _0x3e3cc4;},a24_0x3e8f(_0x2d84b4,_0x461612);}class InboxManager{constructor(){const _0x58467f=a24_0x3e8f;this['currentFilter']='pending',this['invitations']=[],this[_0x58467f(0x20c)]=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this[_0x58467f(0x206)]=0x14,this[_0x58467f(0x20d)]=null,this[_0x58467f(0x1f6)]=!![],this['init']();}async['init'](){auth['onAuthStateChanged'](_0x3e7506=>{const _0x4e02a6=a24_0x3e8f;_0x3e7506?(this[_0x4e02a6(0x1fc)](_0x3e7506['uid']),this['setupEventListeners']()):window['location']['href']='./login.html';});}['setupEventListeners'](){const _0x1c3f80=a24_0x3e8f;document['querySelectorAll'](_0x1c3f80(0x1e8))['forEach'](_0x1d327c=>{const _0xe1243c=_0x1c3f80;_0x1d327c['addEventListener'](_0xe1243c(0x21b),()=>{const _0x2124c0=_0xe1243c;document['querySelectorAll']('.filter-btn')['forEach'](_0x359f81=>_0x359f81[_0x2124c0(0x1e2)][_0x2124c0(0x213)](_0x2124c0(0x1f2))),_0x1d327c['classList']['add']('active'),this['currentFilter']=_0x1d327c['dataset'][_0x2124c0(0x1e6)],this['renderInvitations']();});});}['loadInvitations'](_0x223f6e){const _0x28e746=a24_0x3e8f,_0x52b995=collection(db,_0x28e746(0x217));let _0x581e2f=query(_0x52b995,where('toUserId','==',_0x223f6e),orderBy('createdAt',_0x28e746(0x21d)),limit(this[_0x28e746(0x206)]));this[_0x28e746(0x208)]=onSnapshot(_0x581e2f,_0x44d8e4=>{this['invitations']=_0x44d8e4['docs']['map'](_0x201067=>({'id':_0x201067['id'],..._0x201067['data']()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x384875=query(_0x52b995,where('fromUserId','==',_0x223f6e),orderBy('createdAt',_0x28e746(0x21d)),limit(this['pageSize']));this['sentUnsubscribe']=onSnapshot(_0x384875,_0x2fbc85=>{const _0x1ef596=_0x28e746;this['sentInvitations']=_0x2fbc85['docs']['map'](_0x41fb7f=>({'id':_0x41fb7f['id'],..._0x41fb7f['data'](),'isSent':!![]})),this[_0x1ef596(0x20a)]();});}['renderInvitations'](){const _0x35d56e=a24_0x3e8f,_0x5b86cc=document[_0x35d56e(0x201)]('inbox-content');if(!_0x5b86cc)return;let _0x58fd64=[];if(this[_0x35d56e(0x1ff)]==='outbox')_0x58fd64=this['sentInvitations'];else this['currentFilter']==='all'?_0x58fd64=[...this['invitations'],...this['sentInvitations']]['sort']((_0x4a766f,_0x2de099)=>{const _0x535e5b=_0x35d56e,_0x55e5c5=_0x4a766f['createdAt']?.[_0x535e5b(0x219)]?_0x4a766f['createdAt'][_0x535e5b(0x219)]():new Date(_0x4a766f[_0x535e5b(0x1df)]),_0x1d090a=_0x2de099[_0x535e5b(0x1df)]?.['toDate']?_0x2de099[_0x535e5b(0x1df)]['toDate']():new Date(_0x2de099[_0x535e5b(0x1df)]);return _0x1d090a-_0x55e5c5;}):_0x58fd64=this['invitations']['filter'](_0xee0e87=>_0xee0e87[_0x35d56e(0x1e5)]===this[_0x35d56e(0x1ff)]);if(_0x58fd64['length']===0x0){const _0x6851d4=this['currentFilter']==='outbox'?'sent':this['currentFilter']==='all'?'':this['currentFilter'];_0x5b86cc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x6851d4+_0x35d56e(0x1ed)+(this['currentFilter']==='outbox'?_0x35d56e(0x215):'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+_0x35d56e(0x1ec);return;}_0x5b86cc['innerHTML']=_0x58fd64['map'](_0x4b68a4=>this['createInvitationCard'](_0x4b68a4))['join'](''),this[_0x35d56e(0x1f5)]();}['createInvitationCard'](_0x505399){const _0x3f1b08=a24_0x3e8f,_0xbbd666=_0x505399[_0x3f1b08(0x1df)]?.[_0x3f1b08(0x219)]?_0x505399[_0x3f1b08(0x1df)]['toDate']():new Date(_0x505399['createdAt']),_0x1eee0f=this['getTimeAgo'](_0xbbd666),_0x5ed41c=_0x505399['isSent']||![];let _0x5d302c='';return _0x505399['type']==='team_invite'?_0x5d302c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x505399[_0x3f1b08(0x1f7)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20'+_0x505399['teamData']['teamColor']+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x505399['teamData']['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20'+_0x505399['teamData'][_0x3f1b08(0x211)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x5d302c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x505399['message']+_0x3f1b08(0x1ec),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x505399[_0x3f1b08(0x1e5)]+'\x20'+(_0x5ed41c?'sent-invitation':'')+_0x3f1b08(0x21c)+_0x505399['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5ed41c?_0x3f1b08(0x202)+_0x505399['toUsername']:_0x505399['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5ed41c?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+_0x3f1b08(0x1fe)+_0x1eee0f+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x505399[_0x3f1b08(0x1e5)]+'\x22>'+_0x505399['status']+_0x3f1b08(0x1fb)+_0x5d302c+_0x3f1b08(0x203)+(!_0x5ed41c&&_0x505399['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x505399['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x505399['id']+_0x3f1b08(0x1db)+(_0x505399['type']!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x505399['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5ed41c&&_0x505399['status']===_0x3f1b08(0x210)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x505399['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){const _0xbaaaeb=a24_0x3e8f;document['querySelectorAll']('.action-btn')[_0xbaaaeb(0x1e7)](_0x1af60d=>{const _0xe440a=_0xbaaaeb;_0x1af60d[_0xe440a(0x1f9)]('click',async _0x2354f0=>{const _0x2895ae=_0xe440a,_0x9b7ebb=_0x1af60d[_0x2895ae(0x1eb)]['action'],_0x59344f=_0x1af60d['dataset'][_0x2895ae(0x214)];_0x1af60d['disabled']=!![];const _0x424f89=_0x1af60d[_0x2895ae(0x204)];_0x1af60d['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x9b7ebb){case'accept':await this['updateInvitationStatus'](_0x59344f,'accepted');break;case'decline':await this['updateInvitationStatus'](_0x59344f,'declined');break;case'cancel':await this['updateInvitationStatus'](_0x59344f,_0x2895ae(0x1e9));break;case _0x2895ae(0x1dc):this[_0x2895ae(0x21e)](_0x59344f);break;}}catch(_0x5b9e85){console['error']('Error\x20performing\x20'+_0x9b7ebb+':',_0x5b9e85),alert('Failed\x20to\x20'+_0x9b7ebb+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x1af60d['disabled']=![],_0x1af60d['innerHTML']=_0x424f89;}});});}async[a24_0x2d3cb0(0x1e0)](_0x12158f,_0x209555){const _0x49cc2b=a24_0x2d3cb0;try{const _0x4eda1d=this['invitations']['find'](_0x5aeb9d=>_0x5aeb9d['id']===_0x12158f);_0x4eda1d&&_0x4eda1d['type']==='team_invite'&&_0x209555==='accepted'&&await this['createTeamFromInvitation'](_0x4eda1d);const _0x1116de=doc(db,'gameInvitations',_0x12158f);await updateDoc(_0x1116de,{'status':_0x209555,'respondedAt':new Date()}),_0x4eda1d&&(_0x4eda1d['status']=_0x209555,_0x4eda1d['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x32304c){console[_0x49cc2b(0x1f3)]('Error\x20updating\x20invitation\x20status:',_0x32304c);throw _0x32304c;}}['openResponseModal'](_0x2a39be){const _0x2b4837=a24_0x2d3cb0,_0x362243=this['invitations'][_0x2b4837(0x205)](_0x429f7d=>_0x429f7d['id']===_0x2a39be);if(!_0x362243)return;const _0x445578=document[_0x2b4837(0x1ee)]('div');_0x445578['className']=_0x2b4837(0x1e1),_0x445578['innerHTML']=_0x2b4837(0x209)+_0x362243['fromUsername']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x362243['value']+'</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(!document[_0x2b4837(0x201)]('modal-styles')){const _0x51382d=document[_0x2b4837(0x1ee)]('style');_0x51382d['id']='modal-styles',_0x51382d['textContent']=_0x2b4837(0x1f4),document[_0x2b4837(0x218)]['appendChild'](_0x51382d);}document['body']['appendChild'](_0x445578),_0x445578['querySelector']('.modal-close')['addEventListener'](_0x2b4837(0x21b),()=>_0x445578['remove']()),_0x445578[_0x2b4837(0x1f0)]('#cancel-response')['addEventListener']('click',()=>_0x445578['remove']()),_0x445578['addEventListener']('click',_0x1f0509=>{const _0x493d1c=_0x2b4837;if(_0x1f0509['target']===_0x445578)_0x445578[_0x493d1c(0x213)]();}),_0x445578['querySelector']('#send-response')['addEventListener']('click',()=>{const _0x4d0337=_0x2b4837,_0x4e5e61=document['getElementById']('response-message')['value'][_0x4d0337(0x1dd)]();_0x4e5e61&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x445578['remove']());});}async['createTeamFromInvitation'](_0x4ad92d){const _0x2ee993=a24_0x2d3cb0;try{const {createTeam:_0x3975e1}=await import(_0x2ee993(0x1ea)),_0x38993a=await _0x3975e1(_0x4ad92d[_0x2ee993(0x20f)],_0x4ad92d[_0x2ee993(0x1f1)],_0x4ad92d[_0x2ee993(0x21f)]['proposedTeamName'],_0x4ad92d[_0x2ee993(0x21f)]['teamColor']);if(!_0x38993a['success'])throw new Error(_0x38993a[_0x2ee993(0x1f3)]);alert('Team\x20\x22'+_0x4ad92d[_0x2ee993(0x21f)]['proposedTeamName']+'\x22\x20created\x20successfully!');}catch(_0x40141f){console[_0x2ee993(0x1f3)]('Error\x20creating\x20team:',_0x40141f);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x40141f['message']);}}['updateNotificationCount'](){const _0x401803=a24_0x2d3cb0,_0x61872f=this['invitations']['filter'](_0x297660=>_0x297660['status']==='pending')['length'],_0x3a740d=document[_0x401803(0x201)]('inbox-notification');_0x3a740d&&(_0x61872f>0x0?(_0x3a740d[_0x401803(0x1f8)]['display']='inline-block',_0x3a740d['textContent']=_0x61872f>0x9?'9+':_0x61872f):_0x3a740d['style']['display']=_0x401803(0x1fa));}[a24_0x2d3cb0(0x1e4)](_0x5d6369){const _0x1db0ed=a24_0x2d3cb0,_0x3feeb7=new Date(),_0xe404f5=_0x3feeb7-_0x5d6369,_0x4e7575=Math['floor'](_0xe404f5/(0x3e8*0x3c)),_0x424d91=Math[_0x1db0ed(0x1ef)](_0xe404f5/(0x3e8*0x3c*0x3c)),_0x549928=Math['floor'](_0xe404f5/(0x3e8*0x3c*0x3c*0x18));if(_0x4e7575<0x1)return'Just\x20now';if(_0x4e7575<0x3c)return _0x4e7575+_0x1db0ed(0x1e3);if(_0x424d91<0x18)return _0x424d91+_0x1db0ed(0x20e);if(_0x549928<0x7)return _0x549928+'d\x20ago';return _0x5d6369['toLocaleDateString']();}['destroy'](){const _0x1afa1b=a24_0x2d3cb0;this[_0x1afa1b(0x208)]&&this['unsubscribe'](),this[_0x1afa1b(0x200)]&&this['sentUnsubscribe']();}}document['addEventListener'](a24_0x2d3cb0(0x207),()=>{new InboxManager();});