const a20_0x28b9de=a20_0x32c3;import a20_0x202ed6,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x263c59=a20_0x32c3;if(document[_0x263c59(0x128)](_0x263c59(0x137)))return;const _0x3ff26b=document['createElement'](_0x263c59(0x129));_0x3ff26b['id']='idle-overlay',_0x3ff26b[_0x263c59(0x124)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x1f8621=document['createElement']('div');_0x1f8621['style'][_0x263c59(0x120)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x5f1122=document['createElement']('h2');_0x5f1122['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x5f1122['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x3a7128=document['createElement']('p');_0x3a7128['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x3a7128['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x51a1f1=document[_0x263c59(0x12c)](_0x263c59(0x10f));_0x51a1f1['id']='resume-session-btn',_0x51a1f1[_0x263c59(0x105)]='Return\x20to\x20Website',_0x51a1f1['style']['cssText']=_0x263c59(0x10b),_0x51a1f1[_0x263c59(0x121)]=function(){const _0xd24dd9=_0x263c59;this[_0xd24dd9(0x124)][_0xd24dd9(0x111)]='#3da05f';},_0x51a1f1['onmouseout']=function(){const _0x2e4572=_0x263c59;this['style'][_0x2e4572(0x111)]='#50C878';},_0x1f8621[_0x263c59(0x138)](_0x5f1122),_0x1f8621['appendChild'](_0x3a7128),_0x1f8621[_0x263c59(0x138)](_0x51a1f1),_0x3ff26b['appendChild'](_0x1f8621),document['body']['appendChild'](_0x3ff26b),_0x51a1f1['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x54234c=a20_0x32c3;if(document['getElementById'](_0x54234c(0x136)))return;const _0x7df460=document['createElement']('div');_0x7df460['id']='network-error-overlay',_0x7df460['style']['cssText']=_0x54234c(0x10a);const _0x4f54ba=document['createElement']('div');_0x4f54ba['style']['cssText']=_0x54234c(0x11c);const _0x153ea3=document[_0x54234c(0x12c)]('h2');_0x153ea3[_0x54234c(0x105)]='Connection\x20Error',_0x153ea3['style']['cssText']=_0x54234c(0x104);const _0x8e20f8=document['createElement']('p');_0x8e20f8[_0x54234c(0x105)]=_0x54234c(0x12e),_0x8e20f8['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x14ec1b=document['createElement']('button');_0x14ec1b['id']='retry-connection-btn',_0x14ec1b[_0x54234c(0x105)]='Retry\x20Connection',_0x14ec1b['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x3a45c1=document['createElement']('button');_0x3a45c1['id']='reload-page-btn',_0x3a45c1['textContent']='Reload\x20Page',_0x3a45c1['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x81ceba=document['createElement']('div');_0x81ceba['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x81ceba['appendChild'](_0x14ec1b),_0x81ceba[_0x54234c(0x138)](_0x3a45c1),_0x4f54ba['appendChild'](_0x153ea3),_0x4f54ba['appendChild'](_0x8e20f8),_0x4f54ba['appendChild'](_0x81ceba),_0x7df460[_0x54234c(0x138)](_0x4f54ba),document['body']['appendChild'](_0x7df460),_0x14ec1b['addEventListener']('click',retryConnection),_0x3a45c1['addEventListener']('click',()=>window['location'][_0x54234c(0x10d)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x42db2f=a20_0x32c3;clearTimeout(idleTimer);const _0x378f1a=document['getElementById']('network-error-overlay');_0x378f1a&&(_0x378f1a['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console[_0x42db2f(0x118)](_0x42db2f(0x110)),a20_0x202ed6['suspendAllListeners']();}function retryConnection(){const _0x16de28=a20_0x32c3;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x36c514=document[_0x16de28(0x103)]('#network-error-overlay\x20p');_0x36c514&&(_0x36c514['textContent']=_0x16de28(0x113));const _0x2e2807=document['getElementById'](_0x16de28(0x109));_0x2e2807&&(_0x2e2807['disabled']=!![],_0x2e2807['style']['opacity']=_0x16de28(0x106),_0x2e2807['style']['cursor']=_0x16de28(0x11a));return;}const _0x524ecf=document['getElementById']('network-error-overlay');_0x524ecf&&(_0x524ecf['style'][_0x16de28(0x11d)]='none');window[_0x16de28(0x134)]=![],resetIdleTimer(),console[_0x16de28(0x118)]('Retrying\x20connection...');try{const {rdlFirestore:_0x1d6ed7}=window;if(_0x1d6ed7){const _0x2e5386=_0x1d6ed7['collection'](_0x16de28(0x122));_0x1d6ed7['getDocs'](_0x2e5386)['catch'](_0x2253ff=>{const _0x5bd70b=_0x16de28;console[_0x5bd70b(0x107)]('Connection\x20test\x20failed:',_0x2253ff),handleNetworkError();});}}catch(_0x578d37){console['error']('Failed\x20to\x20test\x20connection:',_0x578d37),handleNetworkError();}a20_0x202ed6['resumeAllListeners']();}function a20_0x32c3(_0x55f3f8,_0x16a202){const _0xc80850=a20_0x2bb2();return a20_0x32c3=function(_0x8d4264,_0x36ec3d){_0x8d4264=_0x8d4264-0x103;let _0x2bb2f6=_0xc80850[_0x8d4264];return _0x2bb2f6;},a20_0x32c3(_0x55f3f8,_0x16a202);}function suspendSession(){const _0x2b773f=a20_0x32c3;isSessionSuspended=!![];const _0x46e9e4=document['getElementById'](_0x2b773f(0x137));_0x46e9e4&&(_0x46e9e4[_0x2b773f(0x124)][_0x2b773f(0x11d)]='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x2b773f(0x125)]=!![],a20_0x202ed6['suspendAllListeners']();}function resumeSession(){const _0x3bf116=a20_0x32c3;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x48c87e=document['getElementById']('idle-overlay');_0x48c87e&&(_0x48c87e['style'][_0x3bf116(0x11d)]='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a20_0x202ed6[_0x3bf116(0x10e)](),idleTimer&&Date[_0x3bf116(0x112)]()-(window[_0x3bf116(0x116)]||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x3bf116(0x117)),window['location']['reload']());}function initIdleTimeout(){const _0x165d2c=a20_0x32c3,_0x4fd330=(function(){let _0x1fc09e=!![];return function(_0x5834e0,_0x1c21b5){const _0x53cc88=_0x1fc09e?function(){if(_0x1c21b5){const _0x4a49c4=_0x1c21b5['apply'](_0x5834e0,arguments);return _0x1c21b5=null,_0x4a49c4;}}:function(){};return _0x1fc09e=![],_0x53cc88;};}()),_0x4ba8c7=_0x4fd330(this,function(){const _0x1160cc=a20_0x32c3,_0x401075=function(){const _0x276f75=a20_0x32c3;let _0x4936d0;try{_0x4936d0=Function(_0x276f75(0x12d)+_0x276f75(0x139)+');')();}catch(_0x25edb3){_0x4936d0=window;}return _0x4936d0;},_0x5a1db2=_0x401075(),_0x2159dd=_0x5a1db2[_0x1160cc(0x108)]=_0x5a1db2['console']||{},_0x193aff=[_0x1160cc(0x118),'warn',_0x1160cc(0x130),'error','exception','table','trace'];for(let _0x3c4215=0x0;_0x3c4215<_0x193aff['length'];_0x3c4215++){const _0x22cc30=_0x4fd330['constructor'][_0x1160cc(0x11b)]['bind'](_0x4fd330),_0x4561b0=_0x193aff[_0x3c4215],_0x201e15=_0x2159dd[_0x4561b0]||_0x22cc30;_0x22cc30['__proto__']=_0x4fd330[_0x1160cc(0x133)](_0x4fd330),_0x22cc30['toString']=_0x201e15[_0x1160cc(0x12b)]['bind'](_0x201e15),_0x2159dd[_0x4561b0]=_0x22cc30;}});_0x4ba8c7(),createIdleOverlay();const _0x57deca=['mousedown','mousemove','keypress','scroll','touchstart','click'];_0x57deca[_0x165d2c(0x11f)](_0x17ae84=>{document['addEventListener'](_0x17ae84,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x19fadb){const _0x310952=_0x165d2c;_0x19fadb['error']&&(_0x19fadb[_0x310952(0x107)]['message']&&_0x19fadb['error'][_0x310952(0x132)]['includes']('network')||_0x19fadb['error']['code']&&(_0x19fadb[_0x310952(0x107)][_0x310952(0x12a)]==='unavailable'||_0x19fadb['error'][_0x310952(0x12a)]==='resource-exhausted'||_0x19fadb['error']['code'][_0x310952(0x135)]('network')))&&(handleNetworkError(),_0x19fadb['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x43c43a=_0x165d2c;return console[_0x43c43a(0x118)](_0x43c43a(0x115),window[_0x43c43a(0x125)]),console[_0x43c43a(0x118)](_0x43c43a(0x131),window['RDL_NETWORK_ERROR']),console['log'](_0x43c43a(0x12f),a20_0x202ed6[_0x43c43a(0x123)]['size']),console['log'](_0x43c43a(0x11e),a20_0x202ed6['pendingOperations']['size']),console['log']('Blocked\x20operations:',a20_0x202ed6['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a20_0x202ed6['activeListeners'][_0x43c43a(0x119)]()),'pendingOperations':Array['from'](a20_0x202ed6[_0x43c43a(0x127)][_0x43c43a(0x119)]()),'blockedCount':a20_0x202ed6['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){const _0x362b8f=_0x165d2c;console['log'](_0x362b8f(0x114)),suspendSession();};}function a20_0x2bb2(){const _0x1d7506=['querySelector','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','textContent','0.5','error','console','retry-connection-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','readyState','reload','resumeAllListeners','button','Network\x20error\x20detected,\x20showing\x20error\x20overlay','backgroundColor','now','Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.','Forcing\x20idle\x20timeout...','Session\x20suspended:','RDL_LAST_ACTIVITY','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','log','keys','not-allowed','prototype','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','display','Pending\x20operations:','forEach','cssText','onmouseover','system','activeListeners','style','RDL_SESSION_SUSPENDED','loading','pendingOperations','getElementById','div','code','toString','createElement','return\x20(function()\x20','We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.','Active\x20listeners:','info','Network\x20error:','message','bind','RDL_NETWORK_ERROR','includes','network-error-overlay','idle-overlay','appendChild','{}.constructor(\x22return\x20this\x22)(\x20)'];a20_0x2bb2=function(){return _0x1d7506;};return a20_0x2bb2();}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document[a20_0x28b9de(0x10c)]===a20_0x28b9de(0x126)?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();