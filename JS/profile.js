const a43_0x3a4346=a43_0x4bef,a43_0xb68764=(function(){let _0x1e83d2=!![];return function(_0x3d1735,_0x2348ab){const _0x3453c7=_0x1e83d2?function(){if(_0x2348ab){const _0x31fb95=_0x2348ab['apply'](_0x3d1735,arguments);return _0x2348ab=null,_0x31fb95;}}:function(){};return _0x1e83d2=![],_0x3453c7;};}()),a43_0x3d3308=a43_0xb68764(this,function(){const _0xd6bf92=a43_0x4bef,_0x166b6c=function(){const _0x1052e6=a43_0x4bef;let _0x479a20;try{_0x479a20=Function(_0x1052e6(0x132)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1c5319){_0x479a20=window;}return _0x479a20;},_0x4631c6=_0x166b6c(),_0x40242d=_0x4631c6['console']=_0x4631c6['console']||{},_0x11559c=[_0xd6bf92(0x12a),'warn','info','error','exception','table',_0xd6bf92(0x12b)];for(let _0x2d9048=0x0;_0x2d9048<_0x11559c['length'];_0x2d9048++){const _0x3e80df=a43_0xb68764[_0xd6bf92(0x11a)]['prototype']['bind'](a43_0xb68764),_0x5653b7=_0x11559c[_0x2d9048],_0x2c243a=_0x40242d[_0x5653b7]||_0x3e80df;_0x3e80df['__proto__']=a43_0xb68764['bind'](a43_0xb68764),_0x3e80df['toString']=_0x2c243a[_0xd6bf92(0x126)][_0xd6bf92(0x128)](_0x2c243a),_0x40242d[_0x5653b7]=_0x3e80df;}});a43_0x3d3308();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x10a355=a43_0x4bef;this['form']=document['getElementById']('profile-form'),this['pfpInput']=document[_0x10a355(0x115)]('pfp-upload'),this['pfpPreview']=document['getElementById'](_0x10a355(0x127)),this[_0x10a355(0x130)]=document['getElementById']('player-stats'),this['setupEventListeners'](),this['loadProfile']();}['setupEventListeners'](){const _0x34761b=a43_0x4bef;this[_0x34761b(0x11e)]['addEventListener']('change',_0x44d8c1=>this['handleImageUpload'](_0x44d8c1)),this['form'][_0x34761b(0x12f)]('submit',_0x149f73=>this[_0x34761b(0x11d)](_0x149f73));}async['handleImageUpload'](_0x5898a5){const _0x435c8f=a43_0x4bef,_0x18224b=_0x5898a5['target']['files'][0x0];if(_0x18224b){const _0x2553ac=new FileReader();_0x2553ac['onload']=_0x5544eb=>{const _0x5d62e9=a43_0x4bef;this['pfpPreview']['src']=_0x5544eb[_0x5d62e9(0x121)]['result'];},_0x2553ac[_0x435c8f(0x12d)](_0x18224b);}}async[a43_0x3a4346(0x11d)](_0x30805d){const _0x10a951=a43_0x3a4346;_0x30805d['preventDefault']();const _0x1e2d3a=auth['currentUser'];if(!_0x1e2d3a){alert(_0x10a951(0x12e));return;}try{const _0x31b5dd=new FormData(this[_0x10a951(0x116)]),_0x5c534d={'nickname':_0x31b5dd['get']('nickname'),'motto':_0x31b5dd['get']('motto'),'favoriteMap':_0x31b5dd['get'](_0x10a951(0x11c)),'favoriteWeapon':_0x31b5dd['get']('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0xf979ea=this['pfpInput']['files'][0x0];if(_0xf979ea){const _0x210789=ref(storage,'profile-pictures/'+_0x1e2d3a['uid']);await uploadBytes(_0x210789,_0xf979ea),_0x5c534d[_0x10a951(0x138)]=await getDownloadURL(_0x210789);}await setDoc(doc(db,'profiles',_0x1e2d3a[_0x10a951(0x13c)]),_0x5c534d),alert(_0x10a951(0x124));}catch(_0xbe6691){console['error']('Error\x20saving\x20profile:',_0xbe6691),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x124848=>{const _0x190e97=a43_0x4bef;if(_0x124848)try{const _0x58edd4=await getDoc(doc(db,'profiles',_0x124848['uid']));if(_0x58edd4[_0x190e97(0x129)]()){const _0x52f971=_0x58edd4['data']();document['getElementById']('nickname')['value']=_0x52f971['nickname']||'',document['getElementById']('motto')[_0x190e97(0x122)]=_0x52f971['motto']||'',document['getElementById']('favorite-map')[_0x190e97(0x122)]=_0x52f971['favoriteMap']||'',document['getElementById']('favorite-weapon')['value']=_0x52f971[_0x190e97(0x11b)]||'',_0x52f971[_0x190e97(0x138)]&&(this[_0x190e97(0x12c)]['src']=_0x52f971['pfpUrl']),await this['loadPlayerStats'](_0x52f971['nickname']);}}catch(_0x33ba25){console['error'](_0x190e97(0x119),_0x33ba25);}});}async[a43_0x3a4346(0x134)](_0x1dd82c){const _0x94e5a4=a43_0x3a4346;if(!_0x1dd82c)return;try{const _0x4b0e10=collection(db,_0x94e5a4(0x131)),[_0x2e5f21,_0x8bb28f]=await Promise['all']([getDocs(query(_0x4b0e10,where(_0x94e5a4(0x125),'==',_0x1dd82c))),getDocs(query(_0x4b0e10,where(_0x94e5a4(0x118),'==',_0x1dd82c)))]),_0xfb2487=_0x2e5f21['size'],_0xfac86f=_0x8bb28f[_0x94e5a4(0x120)],_0x3b21d8=_0xfb2487+_0xfac86f;let _0x293bed=0x0,_0xa724ff=0x0;_0x2e5f21['forEach'](_0x14bf00=>{const _0x323df9=_0x14bf00['data']();if(_0x323df9['winnerScore'])_0x293bed+=parseInt(_0x323df9['winnerScore']);if(_0x323df9['loserScore'])_0xa724ff+=parseInt(_0x323df9['loserScore']);}),_0x8bb28f['forEach'](_0x89d36=>{const _0x1d55b8=_0x94e5a4,_0x464670=_0x89d36['data']();if(_0x464670[_0x1d55b8(0x13a)])_0x293bed+=parseInt(_0x464670['loserScore']);if(_0x464670['winnerScore'])_0xa724ff+=parseInt(_0x464670['winnerScore']);});const _0x815d98=_0xa724ff===0x0?_0x293bed[_0x94e5a4(0x123)](0x2):(_0x293bed/_0xa724ff)[_0x94e5a4(0x123)](0x2),_0xb0a6c4=_0x3b21d8===0x0?'0':(_0xfb2487/_0x3b21d8*0x64)[_0x94e5a4(0x123)](0x1);console['log'](_0x94e5a4(0x139),{'totalMatches':_0x3b21d8,'wins':_0xfb2487,'losses':_0xfac86f,'totalKills':_0x293bed,'totalDeaths':_0xa724ff,'kdRatio':_0x815d98,'winRate':_0xb0a6c4}),document[_0x94e5a4(0x115)](_0x94e5a4(0x136))[_0x94e5a4(0x133)]=_0x3b21d8,document['getElementById']('stats-wins')['textContent']=_0xfb2487,document['getElementById']('stats-losses')['textContent']=_0xfac86f,document[_0x94e5a4(0x115)]('stats-kd')[_0x94e5a4(0x133)]=_0x815d98,document['getElementById'](_0x94e5a4(0x137))['textContent']=_0xb0a6c4+'%';}catch(_0x1fc644){console['error']('Error\x20loading\x20player\x20stats:',_0x1fc644),[_0x94e5a4(0x11f),_0x94e5a4(0x135),'losses','kd','winrate']['forEach'](_0x27d417=>{const _0x2cab77=_0x94e5a4;document[_0x2cab77(0x115)](_0x2cab77(0x117)+_0x27d417)['textContent']='-';});}}}function a43_0x4bef(_0x54bd50,_0x41d330){const _0x3d3308=a43_0x5aa1();return a43_0x4bef=function(_0xb68764,_0x584efe){_0xb68764=_0xb68764-0x115;let _0x5aa1a7=_0x3d3308[_0xb68764];return _0x5aa1a7;},a43_0x4bef(_0x54bd50,_0x41d330);}document['addEventListener'](a43_0x3a4346(0x13b),()=>{new ProfileManager();});function a43_0x5aa1(){const _0x3f8759=['getElementById','form','stats-','loserUsername','Error\x20loading\x20profile:','constructor','favoriteWeapon','favorite-map','handleSubmit','pfpInput','matches','size','target','value','toFixed','Profile\x20saved\x20successfully!','winnerUsername','toString','profile-preview','bind','exists','log','trace','pfpPreview','readAsDataURL','Please\x20sign\x20in\x20to\x20save\x20your\x20profile','addEventListener','statsContainer','approvedMatches','return\x20(function()\x20','textContent','loadPlayerStats','wins','stats-matches','stats-winrate','pfpUrl','Stats\x20calculated:','loserScore','DOMContentLoaded','uid'];a43_0x5aa1=function(){return _0x3f8759;};return a43_0x5aa1();}