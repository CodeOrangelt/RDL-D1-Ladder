const a32_0x222480=(function(){let _0x3b1abf=!![];return function(_0x970981,_0x386d32){const _0x37c624=_0x3b1abf?function(){const _0x277dac=a32_0xe69f;if(_0x386d32){const _0x302a10=_0x386d32[_0x277dac(0x133)](_0x970981,arguments);return _0x386d32=null,_0x302a10;}}:function(){};return _0x3b1abf=![],_0x37c624;};}()),a32_0x1de524=a32_0x222480(this,function(){const _0x539607=a32_0xe69f,_0x407d38=function(){const _0x927b1c=a32_0xe69f;let _0x260164;try{_0x260164=Function('return\x20(function()\x20'+_0x927b1c(0x14e)+');')();}catch(_0x3dbee4){_0x260164=window;}return _0x260164;},_0x2e6faa=_0x407d38(),_0x241f6a=_0x2e6faa['console']=_0x2e6faa[_0x539607(0x11d)]||{},_0x3f01ea=[_0x539607(0x155),_0x539607(0x152),_0x539607(0x134),'error','exception','table',_0x539607(0x129)];for(let _0x1817d7=0x0;_0x1817d7<_0x3f01ea['length'];_0x1817d7++){const _0x413103=a32_0x222480[_0x539607(0x142)][_0x539607(0x13f)][_0x539607(0x12d)](a32_0x222480),_0x130416=_0x3f01ea[_0x1817d7],_0x250a6a=_0x241f6a[_0x130416]||_0x413103;_0x413103['__proto__']=a32_0x222480[_0x539607(0x12d)](a32_0x222480),_0x413103['toString']=_0x250a6a['toString']['bind'](_0x250a6a),_0x241f6a[_0x130416]=_0x413103;}});a32_0x1de524();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x19e696 from'./firebase-idle-wrapper.js';function a32_0x265d(){const _0x3be80a=['includes','#CD7F32','console','winnerUsername','map','elo','error','get','forEach','td:nth-child(3)','winnerScore','Gold','visible','querySelectorAll','trace','newElo','data','loserUsername','bind','fallback\x20entries','\x20fallback\x20ELO\x20change:\x20','#ladder-d2\x20tbody','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','number','apply','info','#FFD700','Unranked','querySelector','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','desc','seconds','Error\x20loading\x20D2\x20ladder:','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','message','bold','prototype','timestamp','eloHistory','constructor','loserScore','set','display','innerHTML','style','.trend-indicator','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getDocuments','toFixed','length','now','{}.constructor(\x22return\x20this\x22)(\x20)','totalMatches','join','D2\x20Ladder\x20table\x20body\x20not\x20found','warn','push','position','log','playersD2','username','totalKills','userProfiles','change','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','#4CAF50','has','#50C878'];a32_0x265d=function(){return _0x3be80a;};return a32_0x265d();}const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x595084=![]){const _0x287b7a=a32_0xe69f,_0x47aa62=document['querySelector']('#ladder-d2\x20tbody');if(!_0x47aa62){console[_0x287b7a(0x121)](_0x287b7a(0x151));return;}_0x47aa62['innerHTML']=_0x287b7a(0x13c);try{const _0x56f766=Date['now']();if(!_0x595084&&playerCacheD2[_0x287b7a(0x12b)]&&_0x56f766-playerCacheD2[_0x287b7a(0x140)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0x287b7a(0x12b)]);return;}const _0x51f0e8=collection(db,'playersD2'),_0x3e9c59=query(_0x51f0e8,orderBy(_0x287b7a(0x154),'asc')),_0x2eb5cd=await a32_0x19e696[_0x287b7a(0x14a)](_0x51f0e8),_0x4cc39b=[];_0x2eb5cd['forEach'](_0x511730=>{const _0x11787a=_0x287b7a,_0x20839e=_0x511730['data']();_0x20839e[_0x11787a(0x157)]&&_0x4cc39b[_0x11787a(0x153)]({..._0x20839e,'id':_0x511730['id'],'elo':_0x20839e['eloRating']||0x0,'position':_0x20839e['position']||Number['MAX_SAFE_INTEGER']});});const _0x7d3d9b=collection(db,_0x287b7a(0x159)),_0x9c54e0=await getDocs(_0x7d3d9b),_0x5d4425=new Map();_0x9c54e0['forEach'](_0x297ebd=>{const _0x43c377=_0x287b7a,_0x599424=_0x297ebd['data']();_0x599424['username']&&_0x5d4425['set'](_0x599424[_0x43c377(0x157)]['toLowerCase'](),_0x599424);});for(const _0x1dd82e of _0x4cc39b){const _0x15b9f4=_0x1dd82e['username']['toLowerCase']();if(_0x5d4425['has'](_0x15b9f4)){const _0x4a2f79=_0x5d4425[_0x287b7a(0x122)](_0x15b9f4);_0x4a2f79['country']&&(_0x1dd82e['country']=_0x4a2f79['country']['toLowerCase']());}}const _0x146e2c=_0x4cc39b[_0x287b7a(0x11f)](_0x6af61e=>_0x6af61e[_0x287b7a(0x157)]),_0x1a24b4=await fetchBatchMatchStatsD2(_0x146e2c);_0x4cc39b['sort']((_0x55eded,_0x1f7bba)=>{const _0xbf3852=_0x287b7a,_0x12d1a3=_0x1a24b4[_0xbf3852(0x122)](_0x55eded['username'])?.['totalMatches']||0x0,_0x3560d7=_0x1a24b4[_0xbf3852(0x122)](_0x1f7bba['username'])?.[_0xbf3852(0x14f)]||0x0;if(_0x12d1a3===0x0!==(_0x3560d7===0x0))return _0x12d1a3===0x0?0x1:-0x1;return(_0x55eded[_0xbf3852(0x154)]||0x3e7)-(_0x1f7bba[_0xbf3852(0x154)]||0x3e7);}),_0x4cc39b[_0x287b7a(0x123)]((_0x43df59,_0x2882e9)=>{_0x43df59['position']=_0x2882e9+0x1;}),playerCacheD2['data']=_0x4cc39b,playerCacheD2[_0x287b7a(0x140)]=_0x56f766,updateLadderDisplayD2(_0x4cc39b);}catch(_0x126a35){console['error'](_0x287b7a(0x13b),_0x126a35),_0x47aa62[_0x287b7a(0x146)]=_0x287b7a(0x138)+_0x126a35[_0x287b7a(0x13d)]+_0x287b7a(0x131);}}function getNextAvailablePositionD2(_0x904a43){const _0x3d278d=a32_0xe69f;if(_0x904a43[_0x3d278d(0x14c)]===0x0)return 0x1;let _0x2a9637=0x0;return _0x904a43['forEach'](_0x3fb9cd=>{const _0x1f07e7=_0x3d278d;_0x3fb9cd['position']&&typeof _0x3fb9cd['position']===_0x1f07e7(0x132)&&_0x3fb9cd['position']>_0x2a9637&&(_0x2a9637=_0x3fb9cd['position']);}),_0x2a9637+0x1;}async function updatePlayerPositions(_0x2fc357,_0x1201ce){const _0x4d37f1=a32_0xe69f;try{const _0x7d2995=collection(db,'playersD2'),_0x58ddbd=await getDocs(_0x7d2995),_0x22cf78=[];_0x58ddbd['forEach'](_0x1deea8=>{const _0x3ae4af=a32_0xe69f;_0x22cf78[_0x3ae4af(0x153)]({'id':_0x1deea8['id'],..._0x1deea8['data']()});});const _0x4e5f9b=_0x22cf78['find'](_0x57378b=>_0x57378b['username']===_0x2fc357),_0x30d1a3=_0x22cf78['find'](_0x6ae00f=>_0x6ae00f['username']===_0x1201ce);if(!_0x4e5f9b||!_0x30d1a3){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x4e5f9b['position']>_0x30d1a3[_0x4d37f1(0x154)]){const _0x281685=_0x30d1a3['position'];for(const _0x2ce478 of _0x22cf78){_0x2ce478[_0x4d37f1(0x154)]>=_0x30d1a3['position']&&_0x2ce478['position']<_0x4e5f9b['position']&&_0x2ce478['username']!==_0x2fc357&&await updateDoc(doc(db,_0x4d37f1(0x156),_0x2ce478['id']),{'position':_0x2ce478['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x4e5f9b['id']),{'position':_0x281685});if(_0x281685===0x1){const _0x41cb38=doc(db,_0x4d37f1(0x156),_0x4e5f9b['id']),_0x4afee6=await getDoc(_0x41cb38);!_0x4afee6['data']()['firstPlaceDate']&&await updateDoc(_0x41cb38,{'firstPlaceDate':Timestamp[_0x4d37f1(0x14d)]()});}if(_0x30d1a3['position']===0x1){const _0x2afb7d=doc(db,'playersD2',_0x30d1a3['id']);await updateDoc(_0x2afb7d,{'firstPlaceDate':null});}playerCacheD2[_0x4d37f1(0x140)]=0x0;}}catch(_0x16e037){console[_0x4d37f1(0x121)]('Error\x20updating\x20D2\x20player\x20positions:',_0x16e037);}}function a32_0xe69f(_0x43a166,_0x478a5a){const _0x1de524=a32_0x265d();return a32_0xe69f=function(_0x222480,_0x5335c0){_0x222480=_0x222480-0x11b;let _0x265dc3=_0x1de524[_0x222480];return _0x265dc3;},a32_0xe69f(_0x43a166,_0x478a5a);}function calculateStreakDays(_0x2ce0ec){if(!_0x2ce0ec)return 0x0;const _0x5b2a65=_0x2ce0ec['toDate'](),_0x37dad7=new Date(),_0x505770=Math['abs'](_0x37dad7-_0x5b2a65);return Math['ceil'](_0x505770/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x5ace1f){const _0x36129b=a32_0xe69f;if(_0x5ace1f>=0x834)return'Emerald';if(_0x5ace1f>=0x708)return _0x36129b(0x126);if(_0x5ace1f>=0x640)return'Silver';if(_0x5ace1f>=0x578)return'Bronze';return _0x36129b(0x136);}async function updateLadderDisplayD2(_0x2db9ce){const _0x3734a3=a32_0xe69f;_0x2db9ce['sort']((_0x52bf84,_0x27ad09)=>_0x52bf84['position']-_0x27ad09['position']);const _0x3889c9=document['querySelector'](_0x3734a3(0x130));if(!_0x3889c9)return;_0x3889c9[_0x3734a3(0x146)]='';const _0x494119=_0x2db9ce['map'](_0x2e813b=>_0x2e813b['username']),_0x4b3e9f=await fetchBatchMatchStatsD2(_0x494119),_0x1f48b7=document[_0x3734a3(0x137)]('#ladder-d2\x20thead\x20tr');_0x1f48b7&&(_0x1f48b7[_0x3734a3(0x146)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x55ff2c=_0x2db9ce['map'](_0x44be05=>{const _0x516df9=_0x4b3e9f['get'](_0x44be05['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x44be05,_0x516df9);})[_0x3734a3(0x150)]('');_0x3889c9['innerHTML']=_0x55ff2c,getPlayersLastEloChangesD2(_0x494119)['then'](_0x2a7e1c=>{const _0x39ec77=_0x3734a3,_0x2eb9e3=new Map();_0x3889c9[_0x39ec77(0x128)]('tr')['forEach']((_0x2654c7,_0x296c8d)=>{_0x296c8d<_0x494119['length']&&_0x2eb9e3['set'](_0x494119[_0x296c8d],_0x2654c7);}),_0x2a7e1c['forEach']((_0x1e3f06,_0x19b4f2)=>{const _0x3f2e11=_0x39ec77,_0x482b90=_0x2eb9e3['get'](_0x19b4f2);if(_0x482b90&&_0x1e3f06!==0x0){const _0x1170c7=_0x482b90[_0x3f2e11(0x137)](_0x3f2e11(0x124));if(_0x1170c7){const _0x1b36f5=_0x1e3f06>0x0?'+'+_0x1e3f06:''+_0x1e3f06,_0x40a5b2=_0x1170c7[_0x3f2e11(0x137)](_0x3f2e11(0x148));_0x40a5b2&&(_0x40a5b2['textContent']=_0x1b36f5,_0x40a5b2['style']['color']=_0x1e3f06>0x0?_0x3f2e11(0x15c):'#F44336',_0x40a5b2['style']['fontWeight']=_0x3f2e11(0x13e),_0x40a5b2[_0x3f2e11(0x147)]['fontSize']='0.85em',_0x40a5b2['style'][_0x3f2e11(0x145)]='inline',_0x40a5b2['style']['visibility']=_0x3f2e11(0x127),_0x40a5b2['style']['opacity']='1');}}});})['catch'](_0x41079f=>console['error']('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0x41079f));}function createPlayerRowD2(_0x5a38a6,_0x319b36){const _0x1486ef=a32_0xe69f,_0x2d0f26=parseFloat(_0x5a38a6[_0x1486ef(0x120)])||0x0;let _0x36ef20='gray';if(_0x2d0f26>=0x7d0)_0x36ef20=_0x1486ef(0x15e);else{if(_0x2d0f26>=0x708)_0x36ef20=_0x1486ef(0x135);else{if(_0x2d0f26>=0x640)_0x36ef20='#C0C0C0';else _0x2d0f26>=0x578&&(_0x36ef20=_0x1486ef(0x11c));}}let _0x50b43d='';return _0x5a38a6['country']&&(_0x50b43d='<img\x20src=\x22../images/flags/'+_0x5a38a6['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5a38a6['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5a38a6['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x5a38a6['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x36ef20+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5a38a6['username']+_0x1486ef(0x149)+_0x50b43d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x36ef20+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x2d0f26+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x319b36['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x319b36['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x319b36['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x319b36['kda']+_0x1486ef(0x15b)+_0x319b36['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD2(_0x5c6ca2){const _0x375f4f=a32_0xe69f,_0x1b049e=new Map();_0x5c6ca2['forEach'](_0x58c977=>_0x1b049e['set'](_0x58c977,0x0));try{const _0x4c65c9=collection(db,'eloHistoryD2'),_0x5dcb26=query(_0x4c65c9,orderBy('timestamp',_0x375f4f(0x139)),limit(0x64)),_0x1544ee=await getDocs(_0x5dcb26),_0x5d8034=new Map(),_0x44a0e3=await getDocs(collection(db,_0x375f4f(0x156)));_0x44a0e3['forEach'](_0x1dca94=>{const _0x32079c=_0x375f4f,_0x49c95a=_0x1dca94['data']();_0x49c95a['username']&&_0x5d8034['set'](_0x1dca94['id'],_0x49c95a[_0x32079c(0x157)]);});const _0x2576b7=new Map();_0x1544ee['forEach'](_0x379235=>{const _0x4ed6c7=_0x375f4f,_0x2f7d16=_0x379235[_0x4ed6c7(0x12b)]();let _0xd6fb04=_0x2f7d16[_0x4ed6c7(0x157)]||_0x2f7d16['playerUsername'];!_0xd6fb04&&_0x2f7d16['player']&&_0x5d8034['has'](_0x2f7d16['player'])&&(_0xd6fb04=_0x5d8034['get'](_0x2f7d16['player']));if(!_0xd6fb04&&_0x2f7d16['matchId']){}_0xd6fb04&&_0x5c6ca2['includes'](_0xd6fb04)&&(!_0x2576b7[_0x4ed6c7(0x15d)](_0xd6fb04)&&_0x2576b7['set'](_0xd6fb04,[]),_0x2576b7['get'](_0xd6fb04)['push']({..._0x2f7d16,'timestamp':_0x2f7d16['timestamp']?.[_0x4ed6c7(0x13a)]||0x0,'username':_0xd6fb04}));}),_0x2576b7['forEach']((_0x10e3ec,_0x42f7d0)=>{const _0x558113=_0x375f4f;if(_0x10e3ec['length']>0x0){_0x10e3ec['sort']((_0x120ba4,_0x2b7b90)=>_0x2b7b90['timestamp']-_0x120ba4[_0x558113(0x140)]);const _0x1c7d3f=_0x10e3ec['find'](_0x28567a=>_0x28567a['change']!==undefined||_0x28567a['newElo']!==undefined&&_0x28567a['previousElo']!==undefined);if(_0x1c7d3f){let _0x2a3019;if(_0x1c7d3f[_0x558113(0x15a)]!==undefined)_0x2a3019=_0x1c7d3f['change'];else _0x1c7d3f['newElo']!==undefined&&_0x1c7d3f['previousElo']!==undefined&&(_0x2a3019=_0x1c7d3f[_0x558113(0x12a)]-_0x1c7d3f['previousElo']);_0x2a3019!==undefined&&_0x1b049e['set'](_0x42f7d0,_0x2a3019);}}});if(_0x2576b7['size']===0x0){const _0x39b989=collection(db,_0x375f4f(0x141)),_0x210cd6=query(_0x39b989,where('gameMode','==','D2'),orderBy(_0x375f4f(0x140),'desc'),limit(0x32));try{const _0x132888=await getDocs(_0x210cd6);console['log']('D2:\x20Found',_0x132888['size'],_0x375f4f(0x12e)),_0x132888['forEach'](_0x557f9a=>{const _0xff4485=_0x375f4f,_0x1adb6f=_0x557f9a['data'](),_0x4f65f1=_0x1adb6f[_0xff4485(0x157)]||_0x1adb6f['playerUsername'];if(_0x4f65f1&&_0x5c6ca2['includes'](_0x4f65f1)){const _0x4c1eb5=_0x1adb6f['change']||(_0x1adb6f['newElo']!==undefined&&_0x1adb6f['previousElo']!==undefined?_0x1adb6f['newElo']-_0x1adb6f['previousElo']:0x0);_0x4c1eb5!==0x0&&(_0x1b049e[_0xff4485(0x144)](_0x4f65f1,_0x4c1eb5),console['log']('D2:\x20'+_0x4f65f1+_0xff4485(0x12f)+_0x4c1eb5));}});}catch(_0x4f35c3){}}}catch(_0x307d9a){console[_0x375f4f(0x121)]('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x307d9a);}return _0x1b049e;}async function fetchBatchMatchStatsD2(_0x5be0d5){const _0x1d3c01=a32_0xe69f,_0x5851cb=new Map();try{_0x5be0d5[_0x1d3c01(0x123)](_0x266505=>{const _0x30c677=_0x1d3c01;_0x5851cb[_0x30c677(0x144)](_0x266505,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x380e73=collection(db,'approvedMatchesD2'),_0x2a8a4c=await getDocs(_0x380e73);_0x2a8a4c['forEach'](_0x597ffe=>{const _0x4b03f1=_0x1d3c01,_0xc76e0e=_0x597ffe['data'](),_0x3a8280=_0xc76e0e[_0x4b03f1(0x11e)],_0x4d5055=_0xc76e0e[_0x4b03f1(0x12c)];if(_0x5be0d5['includes'](_0x3a8280)){const _0x1f29ec=_0x5851cb[_0x4b03f1(0x122)](_0x3a8280);_0x1f29ec['wins']++,_0x1f29ec['totalMatches']++,_0x1f29ec['totalKills']+=parseInt(_0xc76e0e[_0x4b03f1(0x125)])||0x0,_0x1f29ec['totalDeaths']+=parseInt(_0xc76e0e[_0x4b03f1(0x143)])||0x0;}if(_0x5be0d5[_0x4b03f1(0x11b)](_0x4d5055)){const _0x569467=_0x5851cb['get'](_0x4d5055);_0x569467['losses']++,_0x569467[_0x4b03f1(0x14f)]++,_0x569467['totalKills']+=parseInt(_0xc76e0e['loserScore'])||0x0,_0x569467['totalDeaths']+=parseInt(_0xc76e0e['winnerScore'])||0x0;}}),_0x5be0d5['forEach'](_0x46750c=>{const _0x1cc0b9=_0x1d3c01,_0x3fe5a8=_0x5851cb[_0x1cc0b9(0x122)](_0x46750c);_0x3fe5a8['kda']=_0x3fe5a8['totalDeaths']>0x0?(_0x3fe5a8['totalKills']/_0x3fe5a8['totalDeaths'])['toFixed'](0x2):_0x3fe5a8[_0x1cc0b9(0x158)]['toFixed'](0x2),_0x3fe5a8['winRate']=_0x3fe5a8['totalMatches']>0x0?(_0x3fe5a8['wins']/_0x3fe5a8['totalMatches']*0x64)[_0x1cc0b9(0x14b)](0x1):0x0;});}catch(_0x2204a6){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x2204a6);}return _0x5851cb;}export{displayLadderD2,updatePlayerPositions};