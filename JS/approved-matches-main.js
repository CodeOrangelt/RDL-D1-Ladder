const a6_0x8fc610=a6_0x2f67,a6_0x165e56=(function(){let _0x413554=!![];return function(_0x70852b,_0xb112bf){const _0x4666b6=_0x413554?function(){if(_0xb112bf){const _0x159687=_0xb112bf['apply'](_0x70852b,arguments);return _0xb112bf=null,_0x159687;}}:function(){};return _0x413554=![],_0x4666b6;};}()),a6_0x35c9a4=a6_0x165e56(this,function(){const _0x4ea0e2=a6_0x2f67,_0xb0c0a=function(){const _0x2d02e6=a6_0x2f67;let _0x3c9263;try{_0x3c9263=Function(_0x2d02e6(0x137)+_0x2d02e6(0x14d)+');')();}catch(_0xe0025e){_0x3c9263=window;}return _0x3c9263;},_0x32f723=_0xb0c0a(),_0x9cb301=_0x32f723[_0x4ea0e2(0x14a)]=_0x32f723['console']||{},_0x42836a=['log','warn','info',_0x4ea0e2(0x10f),_0x4ea0e2(0x158),'table','trace'];for(let _0x221045=0x0;_0x221045<_0x42836a[_0x4ea0e2(0x15a)];_0x221045++){const _0x2bca41=a6_0x165e56['constructor'][_0x4ea0e2(0xc3)]['bind'](a6_0x165e56),_0x35faaf=_0x42836a[_0x221045],_0x4c5284=_0x9cb301[_0x35faaf]||_0x2bca41;_0x2bca41['__proto__']=a6_0x165e56[_0x4ea0e2(0x111)](a6_0x165e56),_0x2bca41[_0x4ea0e2(0x12a)]=_0x4c5284['toString'][_0x4ea0e2(0x111)](_0x4c5284),_0x9cb301[_0x35faaf]=_0x2bca41;}});function a6_0x90ca(){const _0x1e0f60=['option','.option-content','preview-d2-button','input','commentMatchId','unranked','recent-matches-preview','abs','previewPrevPage','demoDescription','Clearing\x20cache\x20for\x20refresh/reset','firstChild','content','removeAttribute','getItem','push','winnerOldElo','No\x20results\x20found\x20for\x20this\x20page','approvedAt','default','\x20days\x20ago','prototype','Failed\x20to\x20submit:\x20','Unknown','commentOverlayPreview','comment-overlay','max','none','getElementById','userProfiles','loserSuicides','createElement','Page\x20','Error\x20reporting\x20comment:','closest','loserDemoLink','toLocaleDateString','.matches-loading','seconds','removeItem','pilots','.winner-demo-link','demoLink','badComments','Comment\x20deleted\x20successfully','remove','filterUsername','Comments\x20section\x20not\x20found\x20in\x20template','opacity','username','winnerComment','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','end','data','firstVisible','appendChild','includes','Unknown\x20Map','required','.jump-btn','closeAddCommentPopup','docs','filter-levels','<p>','warn','prev','Close','rematch','querySelector','onclick','hasNextPage','commentAddPopup','docsData','matchId','div','.delete-comment-btn','options','commentPopupContentPreview','matchComments','next','displayName','weapon-imbalance','preventDefault','Daz','value','getTime','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','0.6','start','style','You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment','levels','ratting','totalPages','winnerScore','createdAt','textContent','error','winnerUsername','bind','currentUser','setAttribute','loserUsername','.submit-comment-btn','type','toLowerCase','loserScore','Failed\x20to\x20fetch\x20username:','add','className','.comments-container','userId','Error\x20submitting:','demoWordCount','.match-map','isLoading','winnerDemoLink','missiles-6plus','addEventListener','Comment\x20from\x20','split',',\x20fetching\x20from\x20Firestore','disabled','clear-enhanced-filters','toString','display','clearFilterBtn','querySelectorAll','10px','click','filter-pilots','<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>','auth','flex','Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.','commentText','forEach','return\x20(function()\x20','active','toggle','body','block','matchesPerPage',':</strong>\x20\x22','log','trim','#fff','toLocaleString','map','color','You\x20can\x20only\x20delete\x20your\x20own\x20comments','innerHTML','currentPage','dataset','aria-label','previewNextPage','console','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22','lastVisible','{}.constructor(\x22return\x20this\x22)(\x20)','button','message','current','closeCommentPopupPreview','.comment-item','#d32f2f','timestamp','Loser','Anonymous','No\x20description\x20provided','exception','currentMode','length','uid','enhancedFilters','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'];a6_0x90ca=function(){return _0x1e0f60;};return a6_0x90ca();}a6_0x35c9a4();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6_0x8fc610(0x101),'muteFromDate':new Date('2025-07-02')[a6_0x8fc610(0x103)]()}];function isUsernameMuted(_0x4d9c22,_0x203390){if(!_0x4d9c22)return![];const _0x4d7121=mutedUsers['find'](_0x2ce158=>_0x2ce158['username']===_0x4d9c22);if(!_0x4d7121)return![];if(!_0x203390)return!![];const _0x2bf231=_0x203390 instanceof Date?_0x203390['getTime']():_0x203390['seconds']?_0x203390['seconds']*0x3e8:Date['now']();return _0x2bf231>=_0x4d7121['muteFromDate'];}function filterComment(_0x25acbc,_0x562976,_0x3f0977){if(!_0x25acbc)return'-';if(isUsernameMuted(_0x562976,_0x3f0977))return'Muted.';return _0x25acbc;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x4827fd,_0x18c5b8,_0x58d000){const _0x3544b7='u:'+(_0x58d000['filterUsername']||'');return'previewCache_'+_0x4827fd+'_p'+_0x18c5b8+'_'+_0x3544b7;}function getCachedPage(_0x5c25e8){const _0xf2cd1d=a6_0x8fc610,_0xe9e8d8=sessionStorage[_0xf2cd1d(0xbc)](_0x5c25e8);if(_0xe9e8d8)try{return JSON['parse'](_0xe9e8d8);}catch(_0x1790fe){return console['error']('Failed\x20to\x20parse\x20cache:',_0x1790fe),sessionStorage[_0xf2cd1d(0xd5)](_0x5c25e8),null;}return null;}function cachePage(_0x2d794e,_0x2402d1){try{sessionStorage['setItem'](_0x2d794e,JSON['stringify'](_0x2402d1));}catch(_0x330052){console['error']('Failed\x20to\x20cache\x20data:',_0x330052);}}function getEloColor(_0x54d06c){const _0x11e997=Number(_0x54d06c);if(_0x11e997>=0x7d0)return'#50C878';else{if(_0x11e997>=0x708)return'#FFD700';else{if(_0x11e997>=0x640)return'#b9f1fc';else{if(_0x11e997>=0x578)return'#CD7F32';else return'#808080';}}}}function formatDate(_0x445291,_0x1648d7=![]){const _0x39b932=a6_0x8fc610;if(!_0x445291||!_0x445291[_0x39b932(0xd4)])return'N/A';const _0x3178e8=new Date(_0x445291['seconds']*0x3e8);return _0x1648d7?_0x3178e8['toLocaleString']():_0x3178e8[_0x39b932(0xd2)]();}function truncateComment(_0x4d1625,_0x2abe8b=0x1e){if(!_0x4d1625)return'-';if(_0x4d1625['length']<=_0x2abe8b)return _0x4d1625;return _0x4d1625['substring'](0x0,_0x2abe8b)+'...';}function formatCommentDate(_0x59937c){const _0x356785=a6_0x8fc610;if(!_0x59937c||!_0x59937c['seconds'])return'';const _0x62dad5=new Date(_0x59937c[_0x356785(0xd4)]*0x3e8),_0x2f8a5e=new Date(),_0x3cb0bf=Math[_0x356785(0xb5)](_0x2f8a5e-_0x62dad5),_0x3cd301=Math['floor'](_0x3cb0bf/(0x3e8*0x3c*0x3c*0x18));if(_0x3cd301===0x0)return'Today';else{if(_0x3cd301===0x1)return'Yesterday';else return _0x3cd301<0x7?_0x3cd301+_0x356785(0xc2):_0x62dad5[_0x356785(0xd2)]();}}function setLoadingIndicator(_0x4bc587){const _0x419822=a6_0x8fc610,_0x132200=document['getElementById']('loading-indicator');if(_0x132200)_0x132200['style'][_0x419822(0x12b)]=_0x4bc587?'block':_0x419822(0xc9);}export function updatePreviewLadderModeUI(){const _0x4b7403=a6_0x8fc610,_0x14ec4e=document['getElementById']('preview-ladder-mode'),_0x58c197=document['getElementById']('preview-d1-button'),_0xd6e7e1=document['getElementById']('preview-d2-button'),_0x1529b1=document[_0x4b7403(0xca)]('preview-d3-button');if(_0x14ec4e)_0x14ec4e[_0x4b7403(0x10e)]=previewState['currentMode'];if(_0x58c197)_0x58c197['classList']['toggle'](_0x4b7403(0x138),previewState[_0x4b7403(0x159)]==='D1');if(_0xd6e7e1)_0xd6e7e1['classList'][_0x4b7403(0x139)]('active',previewState['currentMode']==='D2');if(_0x1529b1)_0x1529b1['classList']['toggle']('active',previewState[_0x4b7403(0x159)]==='D3');}function updatePreviewPaginationControls(_0x2ed6de){const _0x21be0f=a6_0x8fc610,_0x5397fe=document['getElementById']('previewPrevPage'),_0x32227e=document['getElementById']('previewNextPage'),_0x277c5b=document[_0x21be0f(0xca)]('previewPageInfo');if(!_0x5397fe||!_0x32227e||!_0x277c5b)return;_0x277c5b['textContent']=_0x21be0f(0xce)+previewState['currentPage'],_0x5397fe['disabled']=previewState[_0x21be0f(0x146)]<=0x1,_0x32227e['disabled']=!_0x2ed6de;}function setPreviewLoadingState(_0x3a2964){const _0x5d7629=a6_0x8fc610;previewState['isLoading']=_0x3a2964,setLoadingIndicator(_0x3a2964);const _0x5da194=document['getElementById'](_0x5d7629(0xb4)),_0x1dd8cd=_0x5da194?_0x5da194[_0x5d7629(0xf2)](_0x5d7629(0xd3)):null,_0x1d7a67=document['getElementById'](_0x5d7629(0xb6)),_0x33847b=document['getElementById']('previewNextPage'),_0x52d62a=document['getElementById']('preview-d1-button'),_0x25cd89=document[_0x5d7629(0xca)](_0x5d7629(0xb0)),_0x574226=document['getElementById']('applyFilterBtn'),_0x568612=document['getElementById'](_0x5d7629(0x12c));if(_0x1dd8cd&&!_0x3a2964)_0x1dd8cd[_0x5d7629(0x107)]['display']='none';else _0x1dd8cd&&_0x3a2964&&(_0x1dd8cd['style']['display']='block');!_0x3a2964&&_0x5da194&&!_0x5da194['querySelector']('.match-card')&&!_0x5da194[_0x5d7629(0xf2)]('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x5da194['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState[_0x5d7629(0xdc)]?'\x20matching\x20filters':'')+'.</div>');if(_0x1d7a67)_0x1d7a67['disabled']=_0x3a2964||previewState[_0x5d7629(0x146)]<=0x1;if(_0x33847b)_0x33847b[_0x5d7629(0x128)]=_0x3a2964;if(_0x52d62a)_0x52d62a['disabled']=_0x3a2964;if(_0x25cd89)_0x25cd89['disabled']=_0x3a2964;if(_0x574226)_0x574226['disabled']=_0x3a2964;if(_0x568612)_0x568612['disabled']=_0x3a2964;}function applyClientFilters(_0x38258e){if(!previewState['filterUsername'])return _0x38258e;const _0xc2ab39=previewState['filterUsername']['toLowerCase']();return _0x38258e['filter'](_0x477b6b=>{const _0x524420=a6_0x2f67,_0x1d9af2=(_0x477b6b[_0x524420(0x110)]||'')[_0x524420(0x117)](),_0x3066f4=(_0x477b6b['loserUsername']||'')[_0x524420(0x117)]();return _0x1d9af2['includes'](_0xc2ab39)||_0x3066f4['includes'](_0xc2ab39);});}function applyEnhancedClientFilters(_0x136d30){if(!hasEnhancedFilters())return _0x136d30;return _0x136d30['filter'](_0x24e7a8=>{const _0x3b498a=a6_0x2f67;if(previewState['enhancedFilters'][_0x3b498a(0xd6)]){const _0x5e7d11=previewState['enhancedFilters'][_0x3b498a(0xd6)]['toLowerCase'](),_0x3a008e=(_0x24e7a8[_0x3b498a(0x110)]||'')['toLowerCase'](),_0x722820=(_0x24e7a8['loserUsername']||'')['toLowerCase']();if(!_0x3a008e['includes'](_0x5e7d11)&&!_0x722820[_0x3b498a(0xe6)](_0x5e7d11))return![];}if(previewState['enhancedFilters']['levels']){const _0x40a336=previewState['enhancedFilters']['levels'][_0x3b498a(0x117)](),_0x2f9554=(_0x24e7a8['mapPlayed']||'')[_0x3b498a(0x117)]();if(!_0x2f9554['includes'](_0x40a336))return![];}if(previewState[_0x3b498a(0x15c)]['subgames'][_0x3b498a(0x15a)]>0x0){const _0x1babe3=_0x24e7a8['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames']['includes'](_0x1babe3))return![];}return!![];});}function hasEnhancedFilters(){const _0x152276=a6_0x8fc610;return previewState['enhancedFilters']['pilots']||previewState['enhancedFilters'][_0x152276(0x109)]||previewState['enhancedFilters']['subgames'][_0x152276(0x15a)]>0x0;}function clearEnhancedFilters(){const _0x313e79=a6_0x8fc610;previewState['enhancedFilters']={'pilots':'','levels':'','subgames':[]},document['getElementById'](_0x313e79(0x130))[_0x313e79(0x102)]='',document['getElementById']('filter-levels')['value']='';const _0x134d23=document['getElementById']('filter-subgames');for(let _0x42dcd8 of _0x134d23[_0x313e79(0xfa)]){_0x42dcd8['selected']=![];}}function jumpToPage(_0x28fdac){const _0x3b9e4f=a6_0x8fc610,_0x37af4e=document['getElementById']('jump-to-page'),_0x3ac093=previewState[_0x3b9e4f(0x146)];let _0x9f4f52=_0x3ac093;switch(_0x28fdac){case _0x3b9e4f(0x106):_0x9f4f52=0x1;break;case _0x3b9e4f(0xe2):_0x9f4f52=Math['max'](_0x3ac093+0xa,previewState[_0x3b9e4f(0x10b)]||_0x3ac093+0xa);break;case'+1':_0x9f4f52=_0x3ac093+0x1;break;case'+5':_0x9f4f52=_0x3ac093+0x5;break;case'+10':_0x9f4f52=_0x3ac093+0xa;break;case'-1':_0x9f4f52=Math['max'](0x1,_0x3ac093-0x1);break;case'-5':_0x9f4f52=Math[_0x3b9e4f(0xc8)](0x1,_0x3ac093-0x5);break;case'-10':_0x9f4f52=Math[_0x3b9e4f(0xc8)](0x1,_0x3ac093-0xa);break;case'input':const _0x498458=parseInt(_0x37af4e['value']);_0x498458&&_0x498458>0x0&&(_0x9f4f52=_0x498458,_0x37af4e['value']='');break;}_0x9f4f52!==_0x3ac093&&_0x9f4f52>0x0&&(previewState['currentPage']=_0x9f4f52,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x16165d='current'){const _0x98e969=a6_0x8fc610,_0x3510be=document['getElementById']('recent-matches-preview'),_0x4944b5=document['getElementById']('match-card-template');if(previewState[_0x98e969(0x121)]||!_0x3510be||!_0x4944b5)return;_0x16165d==='current'&&(console[_0x98e969(0x13e)](_0x98e969(0xb8)),Object['keys'](sessionStorage)['forEach'](_0x1f56f3=>{const _0xd48cd5=_0x98e969;_0x1f56f3[_0xd48cd5(0xe6)]('previewCache_'+previewState['currentMode'])&&sessionStorage['removeItem'](_0x1f56f3);}));let _0x282a71=previewState['currentPage'];if(_0x16165d===_0x98e969(0xfd))_0x282a71++;else{if(_0x16165d===_0x98e969(0xef))_0x282a71--;else _0x16165d===_0x98e969(0x150)&&(_0x282a71=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x282a71<0x1)_0x282a71=0x1;const _0x1aba45=previewState['currentPage'];previewState['currentPage']=_0x282a71,updatePreviewPaginationControls(!![]);const _0x3ee052={'filterUsername':previewState['filterUsername']},_0x3ccd42=getCacheKey(previewState[_0x98e969(0x159)],_0x282a71,_0x3ee052),_0x362f2d=_0x16165d!==_0x98e969(0x150)?getCachedPage(_0x3ccd42):null;if(_0x362f2d){console['log']('Rendering\x20page\x20'+_0x282a71+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x362f2d[_0x98e969(0xf6)]),updatePreviewPaginationControls(_0x362f2d[_0x98e969(0xf4)]),setPreviewLoadingState(![]);return;}console[_0x98e969(0x13e)]('Cache\x20miss\x20for\x20page\x20'+_0x282a71+_0x98e969(0x127)),setPreviewLoadingState(!![]),_0x3510be['innerHTML']=_0x98e969(0x131);const _0x327ff5=previewState[_0x98e969(0x159)]==='D1'?'approvedMatches':previewState['currentMode']==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4c385c=previewState['currentMode']==='D1'?_0x98e969(0x10d):_0x98e969(0xc0);try{const _0x5b67ef=collection(window['db'],_0x327ff5);let _0x27f589=[orderBy(_0x4c385c,'desc')];if(_0x282a71===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x27f589[_0x98e969(0xbd)](limit(previewState['matchesPerPage']));else{if(_0x16165d==='next'&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x27f589['push'](startAfter(previewState[_0x98e969(0x14c)])),_0x27f589['push'](limit(previewState['matchesPerPage']));else{console['log']('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x25ef2a=_0x282a71*previewState['matchesPerPage'];_0x27f589['push'](limit(_0x25ef2a));}}const _0x31c9fa=query(_0x5b67ef,..._0x27f589),_0x3d1edc=await getDocs(_0x31c9fa);let _0x1a4f9d=_0x3d1edc[_0x98e969(0xeb)];if(_0x282a71>0x1&&_0x16165d!==_0x98e969(0xfd)){const _0x58a5d6=(_0x282a71-0x1)*previewState['matchesPerPage'];_0x1a4f9d=_0x1a4f9d['slice'](_0x58a5d6,_0x58a5d6+previewState['matchesPerPage']);}if(_0x1a4f9d['length']===0x0){console['log'](_0x98e969(0xbf));_0x16165d==='next'&&(previewState[_0x98e969(0x146)]=_0x1aba45,updatePreviewPaginationControls(![]));_0x3510be['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState[_0x98e969(0xdc)]?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState[_0x98e969(0xe4)]=_0x1a4f9d[0x0],previewState['lastVisible']=_0x1a4f9d[_0x1a4f9d[_0x98e969(0x15a)]-0x1];const _0x57492a=_0x1a4f9d[_0x98e969(0x142)](_0x59f000=>({'id':_0x59f000['id'],..._0x59f000[_0x98e969(0xe3)]()}));let _0x4c6249=![];if(_0x1a4f9d[_0x98e969(0x15a)]===previewState[_0x98e969(0x13c)]){const _0x22f2b0=query(_0x5b67ef,orderBy(_0x4c385c,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x1f1fb8=await getDocs(_0x22f2b0);_0x4c6249=!_0x1f1fb8['empty'];}const _0x1eb715=applyClientFilters(_0x57492a),_0x44d3ac={'docsData':_0x57492a,'hasNextPage':_0x4c6249};cachePage(getCacheKey(previewState['currentMode'],previewState[_0x98e969(0x146)],_0x3ee052),_0x44d3ac);if(_0x282a71>0x1&&_0x16165d!=='next')for(let _0x4ff387=0x1;_0x4ff387<_0x282a71;_0x4ff387++){const _0x1124a2=(_0x4ff387-0x1)*previewState['matchesPerPage'],_0x516233=_0x1124a2+previewState['matchesPerPage'],_0x3ce0e7=_0x3d1edc[_0x98e969(0xeb)]['slice'](_0x1124a2,_0x516233);if(_0x3ce0e7['length']>0x0){const _0x2b29f2=_0x3ce0e7['map'](_0x1d44b2=>({'id':_0x1d44b2['id'],..._0x1d44b2['data']()})),_0x30f549=!![];cachePage(getCacheKey(previewState['currentMode'],_0x4ff387,_0x3ee052),{'docsData':_0x2b29f2,'hasNextPage':_0x30f549}),console['log']('Cached\x20intermediary\x20page\x20'+_0x4ff387);}}_0x1eb715[_0x98e969(0x15a)]===0x0&&previewState[_0x98e969(0xdc)]?_0x3510be['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x1eb715),updatePreviewPaginationControls(_0x4c6249);}catch(_0x11d840){console['error']('Error\x20fetching\x20'+previewState['currentMode']+'\x20matches:',_0x11d840),_0x3510be['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x11d840['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x1aba45;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x225dd9){const _0x53a82c=a6_0x8fc610,_0x2a77b2=document[_0x53a82c(0xca)]('recent-matches-preview'),_0x577f84=document['getElementById']('match-card-template');if(!_0x2a77b2||!_0x577f84)return;!_0x2a77b2['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x2a77b2[_0x53a82c(0x145)]='');if(!_0x225dd9||_0x225dd9['length']===0x0){if(!_0x2a77b2[_0x53a82c(0xf2)]('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x3aff4b=hasEnhancedFilters()?'\x20matching\x20filters':previewState[_0x53a82c(0xdc)]?'\x20matching\x20filters':'';_0x2a77b2['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x3aff4b+'.</div>';}return;}const _0x5bb6e5=applyEnhancedClientFilters(_0x225dd9);if(_0x5bb6e5['length']===0x0){_0x2a77b2[_0x53a82c(0x145)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x3a7fd7=_0x5bb6e5[_0x53a82c(0x142)](_0x3c6f5f=>getAllCommentsForMatch(_0x3c6f5f['id']));let _0x2cdd79=[];try{_0x2cdd79=await Promise['all'](_0x3a7fd7);}catch(_0x55b949){console['error']('Error\x20fetching\x20comments\x20batch:',_0x55b949),_0x2cdd79=_0x5bb6e5['map'](()=>[]);}const _0x4e6110={};_0x2cdd79['forEach']((_0x5eafb6,_0x53b8b8)=>{_0x4e6110[_0x5bb6e5[_0x53b8b8]['id']]=_0x5eafb6||[];}),_0x5bb6e5[_0x53a82c(0x136)](_0x4814f9=>{const _0x423f16=_0x53a82c,_0x435a3d=_0x577f84[_0x423f16(0xba)]['cloneNode'](!![]),_0x3be498=_0x435a3d['querySelector']('.match-display-wrapper'),_0xb3766c=_0x435a3d['querySelector']('.match-card'),_0x5bb1e4=getEloRankClass(_0x4814f9['winnerOldElo']);_0xb3766c['classList']['add']('winner-'+_0x5bb1e4),_0xb3766c['querySelector'](_0x423f16(0x120))['textContent']=_0x4814f9['mapPlayed']||_0x423f16(0xe7),_0xb3766c['querySelector']('.match-date')['textContent']=formatDate(_0x4814f9[_0x423f16(0xc0)]||_0x4814f9['createdAt']);const _0x558212=_0xb3766c[_0x423f16(0xf2)]('.player.winner\x20.player-name');_0x558212['textContent']=_0x4814f9['winnerUsername']||'Unknown',_0x558212['style']['color']=getEloColor(_0x4814f9[_0x423f16(0xbe)]),_0xb3766c['querySelector']('.player.winner\x20.player-score')['textContent']=_0x4814f9[_0x423f16(0x10c)]??0x0;const _0x3eaa1b=_0xb3766c['querySelector']('.player.winner\x20.player-suicides'),_0x1a7a30=_0x4814f9['winnerSuicides']||0x0;_0x3eaa1b['textContent']='S:\x20'+_0x1a7a30;const _0x145c80=_0xb3766c['querySelector']('.player.loser\x20.player-name');_0x145c80[_0x423f16(0x10e)]=_0x4814f9[_0x423f16(0x114)]||_0x423f16(0xc5),_0x145c80['style']['color']=getEloColor(_0x4814f9['loserOldElo']),_0xb3766c['querySelector']('.player.loser\x20.player-score')[_0x423f16(0x10e)]=_0x4814f9[_0x423f16(0x118)]??0x0;const _0xfa5c28=_0xb3766c['querySelector']('.player.loser\x20.player-suicides'),_0x281c4e=_0x4814f9[_0x423f16(0xcc)]||0x0;_0xfa5c28[_0x423f16(0x10e)]='S:\x20'+_0x281c4e;const _0x3a1bcf=_0xb3766c['querySelector']('.match-subgame');if(_0x3a1bcf){if(_0x4814f9['subgameType']&&_0x4814f9['subgameType'][_0x423f16(0x13f)]()!==''){_0x3a1bcf['textContent']=_0x4814f9['subgameType'],_0x3a1bcf[_0x423f16(0x107)][_0x423f16(0x12b)]='block';const _0x4f9a10=getSubgameClass(_0x4814f9['subgameType']);_0x4f9a10&&_0x3a1bcf['classList'][_0x423f16(0x11a)](_0x4f9a10);}else _0x3a1bcf['textContent']='Standard\x20Match',_0x3a1bcf[_0x423f16(0x107)]['display']='block',_0x3a1bcf['style'][_0x423f16(0xde)]=_0x423f16(0x105);}const _0x51e4ae=_0xb3766c['querySelector']('.comment.winner-comment'),_0x3f4a92=_0xb3766c[_0x423f16(0xf2)]('.comment.loser-comment'),_0x535516=_0x4814f9[_0x423f16(0xe0)]||'',_0x2cf32b=_0x4814f9['loserComment']||'',_0xd0c68=_0x4814f9[_0x423f16(0xc0)]||_0x4814f9[_0x423f16(0x10d)],_0x13f2a6=filterComment(_0x535516,_0x4814f9['winnerUsername'],_0xd0c68),_0x117eee=filterComment(_0x2cf32b,_0x4814f9['loserUsername'],_0xd0c68);_0x51e4ae['textContent']='\x22'+truncateComment(_0x535516)+'\x22',_0x3f4a92[_0x423f16(0x10e)]='\x22'+truncateComment(_0x2cf32b)+'\x22';_0x535516&&!isUsernameMuted(_0x4814f9[_0x423f16(0x110)],_0xd0c68)?_0x51e4ae[_0x423f16(0xf3)]=()=>showPreviewCommentPopup(_0x13f2a6,_0x4814f9[_0x423f16(0x110)]||'Winner',getEloColor(_0x4814f9['winnerOldElo'])):(_0x51e4ae[_0x423f16(0x10e)]=_0x13f2a6==='Muted.'?'Muted.':'-',_0x51e4ae['style']['cursor']=_0x423f16(0xc1),_0x51e4ae['onclick']=null);_0x2cf32b&&!isUsernameMuted(_0x4814f9['loserUsername'])?_0x3f4a92[_0x423f16(0xf3)]=()=>showPreviewCommentPopup(_0x117eee,_0x4814f9['loserUsername']||_0x423f16(0x155),getEloColor(_0x4814f9['loserOldElo'])):(_0x3f4a92['textContent']=_0x117eee==='Muted.'?'Muted.':'-',_0x3f4a92['style']['cursor']='default',_0x3f4a92['onclick']=null);const _0x997a6c=_0x3be498?.['querySelector']('.community-comments-section');if(!_0x997a6c)console[_0x423f16(0xee)](_0x423f16(0xdd));else{const _0x3f1871=_0x997a6c[_0x423f16(0xf2)]('.comments-container'),_0x35f72a=_0x3f1871?.['querySelector']('.no-comments-message'),_0x2e3310=_0x997a6c['querySelector']('.add-comment-btn');if(_0x3f1871){while(_0x3f1871['firstChild']&&_0x3f1871[_0x423f16(0xb9)]!==_0x35f72a){_0x3f1871['removeChild'](_0x3f1871['firstChild']);}_0x2e3310&&_0x2e3310['addEventListener']('click',()=>{showAddCommentPopup(_0x4814f9['id']);});const _0x588bbc=_0x4e6110[_0x4814f9['id']]||[];if(_0x588bbc['length']>0x0){if(_0x35f72a)_0x35f72a['style']['display']='none';const _0x9bc365=(_0x4c4557,_0x243223)=>{const _0xce5fcd=_0x4c4557['split']('\x20');if(_0xce5fcd['length']<=_0x243223)return _0x4c4557;return _0xce5fcd['slice'](0x0,_0x243223)['join']('\x20')+'...';};_0x588bbc['forEach'](_0x526e0f=>{const _0x3a374b=_0x423f16,_0x1c105b=document['createElement']('div');if(_0x526e0f[_0x3a374b(0x116)]==='demo'){_0x1c105b['className']='demo-link',_0x1c105b['innerHTML']=_0x3a374b(0x104)+_0x526e0f['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x526e0f['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x526e0f['description']||_0x3a374b(0x157))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x4632e1=window['auth'][_0x3a374b(0x112)],_0x46b702=_0x4632e1&&_0x526e0f['userId']===_0x4632e1['uid'];if(_0x46b702){const _0x2ce556=document['createElement'](_0x3a374b(0x14e));_0x2ce556['className']='delete-comment-btn',_0x2ce556['innerHTML']='×',_0x2ce556[_0x3a374b(0x113)](_0x3a374b(0x148),'Delete\x20demo'),_0x2ce556['addEventListener']('click',_0x1d11c7=>{_0x1d11c7['preventDefault'](),_0x1d11c7['stopPropagation'](),deleteComment(_0x526e0f['id'],_0x1c105b);}),_0x1c105b['appendChild'](_0x2ce556);}}else{_0x1c105b['className']='comment-item';const _0x9c0d5b=isUsernameMuted(_0x526e0f['username'],_0x526e0f['timestamp']),_0x4a6a3c=_0x9c0d5b?'Muted.':_0x9bc365(_0x526e0f['text']||'',0xf),_0x226446=_0x526e0f['username']||_0x3a374b(0x156),_0x2cb3d5=window['auth']['currentUser'],_0x4cf69c=_0x2cb3d5&&_0x526e0f[_0x3a374b(0x11d)]===_0x2cb3d5['uid'];let _0xb0918a='';_0x4cf69c&&(_0xb0918a='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x1c105b[_0x3a374b(0x145)]=_0xb0918a+'<strong>'+_0x226446+_0x3a374b(0x13d)+_0x4a6a3c+'\x22';if(_0x4cf69c){const _0x19fef3=_0x1c105b['querySelector'](_0x3a374b(0xf9));_0x19fef3&&_0x19fef3['addEventListener']('click',_0x59133a=>{_0x59133a['stopPropagation'](),deleteComment(_0x526e0f['id'],_0x1c105b);});}!_0x9c0d5b?_0x1c105b['addEventListener']('click',()=>{showFullCommentLightbox(_0x526e0f);}):_0x1c105b['style']['cursor']='default';}_0x3f1871['insertBefore'](_0x1c105b,_0x3f1871['firstChild']);});}else{if(_0x35f72a)_0x35f72a['style']['display']='block';}}}const _0x3da427=_0xb3766c['querySelector']('.match-demo-links');if(_0x3da427){const _0x2f3fa5=_0xb3766c['querySelector'](_0x423f16(0xd7)),_0x491f52=_0xb3766c['querySelector']('.loser-demo-link'),_0x178963=_0x4814f9[_0x423f16(0x122)]||null,_0x57c2d4=_0x4814f9[_0x423f16(0xd1)]||_0x4814f9[_0x423f16(0xd8)]||null;console[_0x423f16(0x13e)]('Match\x20'+_0x4814f9['id']+'\x20demo\x20links:',{'winner':_0x178963,'loser':_0x57c2d4}),_0x2f3fa5&&(_0x178963?(_0x2f3fa5['href']=_0x178963,_0x2f3fa5['style'][_0x423f16(0x12b)]='flex',_0x2f3fa5['title']=_0x4814f9[_0x423f16(0x110)]+'\x27s\x20Demo'):_0x2f3fa5['style']['display']=_0x423f16(0xc9)),_0x491f52&&(_0x57c2d4?(_0x491f52['href']=_0x57c2d4,_0x491f52['style']['display']='flex',_0x491f52['title']=_0x4814f9[_0x423f16(0x114)]+'\x27s\x20Demo'):_0x491f52['style']['display']='none'),_0x178963&&_0x2f3fa5||_0x57c2d4&&_0x491f52?_0x3da427['style']['display']=_0x423f16(0x133):_0x3da427['style']['display']=_0x423f16(0xc9);}_0x2a77b2['appendChild'](_0x435a3d);});}function getSubgameClass(_0x32de3c){const _0x1ac288=a6_0x8fc610,_0x45fe63={'Fusion\x20Match':'fusion-match','≥6\x20Missiles':_0x1ac288(0x123),'≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':_0x1ac288(0xff),'Blind\x20Match':'blind-match','Rematch':_0x1ac288(0xf1),'Disorientation':'disorientation','Ratting':_0x1ac288(0x10a),'Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x45fe63[_0x32de3c]||'';}async function deleteComment(_0x3db056,_0x1b200c){const _0x463c6a=a6_0x8fc610,_0x8ebc66=window['auth']['currentUser'];if(!_0x8ebc66){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x3ae221=doc(window['db'],'matchComments',_0x3db056),_0x22d823=await getDoc(_0x3ae221);if(!_0x22d823['exists']()){alert(_0x463c6a(0x134));return;}const _0x5a4e9e=_0x22d823['data']();if(_0x5a4e9e['userId']!==_0x8ebc66['uid']){alert(_0x463c6a(0x144));return;}await deleteDoc(_0x3ae221);if(_0x1b200c&&_0x1b200c['parentNode']){_0x1b200c['parentNode']['removeChild'](_0x1b200c);const _0x28fc30=_0x1b200c[_0x463c6a(0xd0)](_0x463c6a(0x11c));if(_0x28fc30&&!_0x28fc30['querySelector'](_0x463c6a(0x152))){const _0x108dc=_0x28fc30['querySelector']('.no-comments-message');if(_0x108dc)_0x108dc[_0x463c6a(0x107)]['display']=_0x463c6a(0x13b);}}console['log'](_0x463c6a(0xda));}catch(_0x663975){console['error']('Error\x20deleting\x20comment:',_0x663975),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x663975[_0x463c6a(0x14f)]);}}async function getAllCommentsForMatch(_0x5c9f05){const _0xe12d70=a6_0x8fc610;if(!_0x5c9f05)return[];try{const _0x4efb43=collection(window['db'],'matchComments'),_0x2e8153=query(_0x4efb43,where('matchId','==',_0x5c9f05),orderBy(_0xe12d70(0x154),'desc')),_0x33aab6=await getDocs(_0x2e8153);if(_0x33aab6['empty'])return[];return _0x33aab6['docs']['map'](_0x48bfed=>({'id':_0x48bfed['id'],..._0x48bfed['data']()}));}catch(_0x3b70ed){return console['error']('Error\x20fetching\x20comments:',_0x3b70ed),[];}}async function submitComment(_0xc1643f){const _0x35cb56=a6_0x8fc610;_0xc1643f[_0x35cb56(0x100)]();if(!window[_0x35cb56(0x132)]||!window['db']){console[_0x35cb56(0x10f)]('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const _0x37f633=window['auth'][_0x35cb56(0x112)];if(!_0x37f633){alert(_0x35cb56(0x108));return;}const _0x3d0972=document[_0x35cb56(0xca)]('commentMatchId')?.['value'],_0x3592fc=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x3d0972||!_0x3592fc){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x44e48d=_0x3592fc[_0x35cb56(0x126)](/\s+/)['filter'](_0x194e77=>_0x194e77['length']>0x0)['length'];if(_0x44e48d>0xf){alert(_0x35cb56(0xe1));return;}const _0x5c0519=document[_0x35cb56(0xf2)](_0x35cb56(0x115));_0x5c0519&&(_0x5c0519['disabled']=!![],_0x5c0519[_0x35cb56(0x10e)]='Submitting...');try{let _0x215219='Anonymous';try{const _0x54cc49=doc(window['db'],'userProfiles',_0x37f633[_0x35cb56(0x15b)]),_0x2c7447=await getDoc(_0x54cc49);if(_0x2c7447['exists']()){const _0x18d53b=_0x2c7447[_0x35cb56(0xe3)]();_0x18d53b['username']&&(_0x215219=_0x18d53b[_0x35cb56(0xdf)]);}_0x215219==='Anonymous'&&_0x37f633[_0x35cb56(0xfe)]&&(_0x215219=_0x37f633['displayName']);}catch(_0x469fbd){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x469fbd),_0x37f633['displayName']&&(_0x215219=_0x37f633['displayName']);}const _0x425d61={'matchId':_0x3d0972,'userId':_0x37f633['uid'],'username':_0x215219,'text':_0x3592fc,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',_0x215219);const _0xae696a=collection(window['db'],'matchComments');await addDoc(_0xae696a,_0x425d61),console[_0x35cb56(0x13e)]('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview(_0x35cb56(0x150));}catch(_0x4a63d9){console['error']('Error\x20submitting\x20comment:',_0x4a63d9),alert('Failed\x20to\x20add\x20comment:\x20'+_0x4a63d9['message']),_0x5c0519&&(_0x5c0519[_0x35cb56(0x128)]=![],_0x5c0519['textContent']='Submit');}}function a6_0x2f67(_0xc720bb,_0x1a7d14){const _0x35c9a4=a6_0x90ca();return a6_0x2f67=function(_0x165e56,_0x5195dd){_0x165e56=_0x165e56-0xae;let _0x90ca53=_0x35c9a4[_0x165e56];return _0x90ca53;},a6_0x2f67(_0xc720bb,_0x1a7d14);}function closeAddCommentPopup(){const _0xd345dd=a6_0x8fc610,_0x36b874=document[_0xd345dd(0xca)](_0xd345dd(0xf5)),_0x174b04=document['getElementById']('commentAddOverlay');if(_0x36b874)_0x36b874['style']['display']='none';if(_0x174b04)_0x174b04['style'][_0xd345dd(0x12b)]='none';}function showAddCommentPopup(_0x46a869){const _0xeefc67=a6_0x8fc610,_0x2e86ee=window['auth']['currentUser'];if(!_0x2e86ee){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x56e0af=document['getElementById']('commentAddPopup'),_0x5be7a3=document['getElementById']('commentAddOverlay');!_0x56e0af&&(_0x56e0af=document['createElement'](_0xeefc67(0xf8)),_0x56e0af['id']='commentAddPopup',_0x56e0af[_0xeefc67(0x11b)]='comment-popup',document[_0xeefc67(0x13a)]['appendChild'](_0x56e0af));!_0x5be7a3&&(_0x5be7a3=document[_0xeefc67(0xcd)]('div'),_0x5be7a3['id']='commentAddOverlay',_0x5be7a3[_0xeefc67(0x11b)]=_0xeefc67(0xc7),document['body']['appendChild'](_0x5be7a3));_0x56e0af['innerHTML']=_0xeefc67(0x14b)+_0x46a869+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x56e0af['style'][_0xeefc67(0x12b)]='block',_0x5be7a3[_0xeefc67(0x107)]['display']=_0xeefc67(0x13b),document[_0xeefc67(0xca)]('closeAddCommentPopup')['addEventListener'](_0xeefc67(0x12f),closeAddCommentPopup),_0x5be7a3['addEventListener'](_0xeefc67(0x12f),closeAddCommentPopup);const _0x5e0631=_0x56e0af[_0xeefc67(0x12d)]('.option-tab');_0x5e0631['forEach'](_0x4bded4=>{_0x4bded4['addEventListener']('click',function(){const _0x32fc51=a6_0x2f67;_0x5e0631[_0x32fc51(0x136)](_0x57b1bc=>_0x57b1bc['classList'][_0x32fc51(0xdb)]('active')),document['querySelectorAll'](_0x32fc51(0xaf))['forEach'](_0x1ea5f3=>_0x1ea5f3['style'][_0x32fc51(0x12b)]=_0x32fc51(0xc9)),this['classList']['add']('active');const _0x55b6f0=this['dataset']['option'];document['getElementById'](_0x55b6f0+'Option')['style']['display']='block',_0x55b6f0==='demo'?(document['getElementById']('demoLink')['setAttribute']('required',''),document['getElementById']('commentText')['removeAttribute']('required')):(document['getElementById']('demoLink')[_0x32fc51(0xbb)]('required'),document[_0x32fc51(0xca)]('commentText')['setAttribute']('required',''));});}),document[_0xeefc67(0xca)](_0xeefc67(0x135))['setAttribute'](_0xeefc67(0xe8),''),document['getElementById'](_0xeefc67(0xd8))[_0xeefc67(0xbb)](_0xeefc67(0xe8)),setupWordCounter(_0xeefc67(0x135),'wordCount',0xf),setupWordCounter(_0xeefc67(0xb7),_0xeefc67(0x11f),0x14),document['getElementById']('addCommentForm')['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x2f89a6,_0x20bb5a,_0x3ad298){const _0x1d5d18=document['getElementById'](_0x2f89a6),_0x1bef3d=document['getElementById'](_0x20bb5a);if(!_0x1d5d18||!_0x1bef3d)return;_0x5a9d72(),_0x1d5d18['addEventListener']('input',_0x5a9d72);function _0x5a9d72(){const _0x32dc2c=a6_0x2f67,_0x95378e=_0x1d5d18[_0x32dc2c(0x102)]['trim'](),_0x4e07c4=_0x95378e?_0x95378e[_0x32dc2c(0x126)](/\s+/)['filter'](_0x1bea51=>_0x1bea51[_0x32dc2c(0x15a)]>0x0)[_0x32dc2c(0x15a)]:0x0;_0x1bef3d['textContent']=_0x4e07c4,_0x4e07c4>_0x3ad298?_0x1bef3d['style']['color']='#ff4444':_0x1bef3d['style'][_0x32dc2c(0x143)]='#aaa';}}async function submitCommentOrDemo(_0x2b3972){const _0x552af7=a6_0x8fc610;_0x2b3972[_0x552af7(0x100)]();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x44d591=window['auth']['currentUser'];if(!_0x44d591){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x17a29d=document['getElementById'](_0x552af7(0xb2))['value'],_0x3a7681=document['querySelector']('.option-tab.active')[_0x552af7(0x147)][_0x552af7(0xae)];let _0x305945=_0x552af7(0x156);try{const _0x4c2e5b=doc(window['db'],_0x552af7(0xcb),_0x44d591[_0x552af7(0x15b)]),_0x1b5dd3=await getDoc(_0x4c2e5b);if(_0x1b5dd3['exists']()){const _0x2fdaee=_0x1b5dd3['data']();_0x2fdaee[_0x552af7(0xdf)]&&(_0x305945=_0x2fdaee[_0x552af7(0xdf)]);}_0x305945==='Anonymous'&&_0x44d591['displayName']&&(_0x305945=_0x44d591[_0x552af7(0xfe)]);}catch(_0x2256d1){console['warn'](_0x552af7(0x119),_0x2256d1),_0x44d591[_0x552af7(0xfe)]&&(_0x305945=_0x44d591['displayName']);}const _0x185b21=document['querySelector'](_0x552af7(0x115));_0x185b21&&(_0x185b21[_0x552af7(0x128)]=!![],_0x185b21['textContent']='Submitting...');try{if(_0x3a7681==='comment'){const _0x3b6536=document[_0x552af7(0xca)]('commentText')[_0x552af7(0x102)][_0x552af7(0x13f)]();if(!_0x3b6536){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x185b21['disabled']=![],_0x185b21['textContent']='Submit';return;}const _0x28dc1d=_0x3b6536['split'](/\s+/)['filter'](_0x2729ec=>_0x2729ec[_0x552af7(0x15a)]>0x0)[_0x552af7(0x15a)];if(_0x28dc1d>0xf){alert(_0x552af7(0xe1)),_0x185b21['disabled']=![],_0x185b21[_0x552af7(0x10e)]='Submit';return;}const _0x4d0163={'matchId':_0x17a29d,'userId':_0x44d591[_0x552af7(0x15b)],'username':_0x305945,'text':_0x3b6536,'type':'comment','timestamp':serverTimestamp()},_0x141e9b=collection(window['db'],_0x552af7(0xfc));await addDoc(_0x141e9b,_0x4d0163);}else{const _0x50ef77=document['getElementById'](_0x552af7(0xd8))['value']['trim'](),_0x53957d=document['getElementById']('demoDescription')['value']['trim']()||'Demo\x20link';if(!_0x50ef77){alert('Please\x20enter\x20a\x20demo\x20link'),_0x185b21[_0x552af7(0x128)]=![],_0x185b21['textContent']='Submit';return;}try{new URL(_0x50ef77);}catch(_0x2f0a05){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x185b21['disabled']=![],_0x185b21['textContent']='Submit';return;}const _0x5defed=_0x53957d[_0x552af7(0x126)](/\s+/)['filter'](_0x2a0afd=>_0x2a0afd['length']>0x0)[_0x552af7(0x15a)];if(_0x5defed>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x185b21['disabled']=![],_0x185b21['textContent']='Submit';return;}const _0x4ebaa0={'matchId':_0x17a29d,'userId':_0x44d591['uid'],'username':_0x305945,'demoLink':_0x50ef77,'description':_0x53957d,'type':'demo','text':'Demo:\x20'+_0x53957d,'timestamp':serverTimestamp()},_0xb00779=collection(window['db'],'matchComments');await addDoc(_0xb00779,_0x4ebaa0);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x552af7(0x150));}catch(_0x3d3553){console['error'](_0x552af7(0x11e),_0x3d3553),alert(_0x552af7(0xc4)+_0x3d3553['message']),_0x185b21&&(_0x185b21[_0x552af7(0x128)]=![],_0x185b21['textContent']='Submit');}}function getEloRankClass(_0x181c5e){const _0x232a2f=a6_0x8fc610,_0x638255=Number(_0x181c5e);if(_0x638255>=0x7d0)return'emerald';else{if(_0x638255>=0x708)return'gold';else{if(_0x638255>=0x640)return'silver';else{if(_0x638255>=0x578)return'bronze';else return _0x232a2f(0xb3);}}}}function showPreviewCommentPopup(_0xb3f01e,_0x2cb039,_0x38eb01=a6_0x8fc610(0x140)){const _0xe017e6=a6_0x8fc610,_0x8d33e8=document['getElementById']('commentPopupPreview'),_0x786812=document['getElementById']('commentOverlayPreview'),_0x122206=document[_0xe017e6(0xca)]('commentPopupTitlePreview'),_0x304f5f=document['getElementById'](_0xe017e6(0xfb)),_0x53c74a=document[_0xe017e6(0xca)]('reportCommentButton');if(!_0x8d33e8||!_0x786812||!_0x122206||!_0x304f5f||!_0x53c74a)return;_0x8d33e8['dataset'][_0xe017e6(0x135)]=_0xb3f01e,_0x8d33e8['dataset']['commentUser']=_0x2cb039,_0x122206['style'][_0xe017e6(0x143)]=_0x38eb01,_0x122206['textContent']='Comment\x20from\x20'+_0x2cb039,_0x304f5f['textContent']=_0xb3f01e,_0x53c74a[_0xe017e6(0xf3)]=reportComment,_0x8d33e8['style']['display']='block',_0x786812['style']['display']=_0xe017e6(0x13b);}function closePreviewCommentPopup(){const _0x3e85fd=a6_0x8fc610,_0x31a6f7=document['getElementById']('commentPopupPreview'),_0x41e83c=document['getElementById']('commentOverlayPreview');if(_0x31a6f7)_0x31a6f7[_0x3e85fd(0x107)]['display']=_0x3e85fd(0xc9);if(_0x41e83c)_0x41e83c['style']['display']='none';}async function reportComment(){const _0x43d7a5=a6_0x8fc610,_0xf43447=window['auth']['currentUser'];if(!_0xf43447){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm(_0x43d7a5(0x15d)))return;try{const _0x30db84=document['getElementById']('commentPopupPreview'),_0x1b265c={'commentAuthor':_0x30db84['dataset']['commentUser']||'Unknown\x20User','commentText':_0x30db84['dataset'][_0x43d7a5(0x135)]||'','matchId':previewState['currentMatchId']||'','reportedBy':_0xf43447['uid'],'reporterUsername':_0xf43447[_0x43d7a5(0xfe)]||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x52481b=collection(window['db'],_0x43d7a5(0xd9));await addDoc(_0x52481b,_0x1b265c),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x40d75e){console['error'](_0x43d7a5(0xcf),_0x40d75e),alert('Failed\x20to\x20report\x20comment:\x20'+_0x40d75e['message']);}}function showFullCommentLightbox(_0x10321a){const _0x2c5971=a6_0x8fc610;if(isUsernameMuted(_0x10321a['username']))return;const _0x2a4093=document['getElementById']('commentPopupPreview'),_0x1accbe=document['getElementById']('commentOverlayPreview'),_0x31ddbf=document[_0x2c5971(0xca)]('commentPopupTitlePreview'),_0x5c9792=document[_0x2c5971(0xca)]('commentPopupContentPreview');if(!_0x2a4093||!_0x1accbe||!_0x31ddbf||!_0x5c9792)return;_0x31ddbf['style']['color']=_0x2c5971(0x140),_0x31ddbf['textContent']=_0x2c5971(0x125)+_0x10321a['username'];if(_0x10321a[_0x2c5971(0x154)]){const _0x30e9ef=new Date(_0x10321a['timestamp']['seconds']*0x3e8),_0x25d98e=_0x30e9ef[_0x2c5971(0x141)]();_0x5c9792[_0x2c5971(0x145)]=_0x2c5971(0xed)+_0x10321a['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x25d98e+'</small>';}else _0x5c9792['textContent']=_0x10321a['text'];_0x2a4093['dataset']['commentId']=_0x10321a['id']||'',_0x2a4093['dataset']['commentUser']=_0x10321a['username']||'',_0x2a4093['dataset']['commentText']=_0x10321a['text']||'',_0x2a4093[_0x2c5971(0x147)][_0x2c5971(0xf7)]=_0x10321a['matchId']||'';const _0x17d4bb=_0x2a4093[_0x2c5971(0xf2)]('.popup-actions')||document['createElement'](_0x2c5971(0xf8));!_0x2a4093['querySelector']('.popup-actions')?(_0x17d4bb['className']='popup-actions',_0x17d4bb['style'][_0x2c5971(0x12b)]=_0x2c5971(0x133),_0x17d4bb['style']['justifyContent']='center',_0x17d4bb['style']['gap']=_0x2c5971(0x12e),_0x17d4bb['style']['marginTop']='15px',_0x2a4093[_0x2c5971(0xe5)](_0x17d4bb)):_0x17d4bb[_0x2c5971(0x145)]='';const _0x31b017=document['createElement'](_0x2c5971(0x14e));_0x31b017['textContent']=_0x2c5971(0xf0),_0x31b017['className']='popup-btn\x20close-btn',_0x31b017['id']='closeCommentPopupPreview',_0x31b017['addEventListener']('click',closePreviewCommentPopup);const _0x2b33bb=document['createElement'](_0x2c5971(0x14e));_0x2b33bb[_0x2c5971(0x10e)]='Report',_0x2b33bb['className']='popup-btn\x20report-btn',_0x2b33bb[_0x2c5971(0x107)]['backgroundColor']=_0x2c5971(0x153),_0x2b33bb['addEventListener']('click',reportComment),_0x17d4bb['appendChild'](_0x31b017),_0x17d4bb['appendChild'](_0x2b33bb),_0x2a4093[_0x2c5971(0x107)]['display']='block',_0x1accbe['style']['display']='block';}export function setupPreviewEventListeners(){const _0x4132cd=a6_0x8fc610,_0x428a97=document['getElementById']('previewPrevPage'),_0x261da7=document[_0x4132cd(0xca)](_0x4132cd(0x149)),_0x1a89d2=document['getElementById']('preview-d1-button'),_0x1ebb66=document[_0x4132cd(0xca)]('preview-d2-button'),_0x447320=document['getElementById']('preview-d3-button'),_0x57c7a7=document[_0x4132cd(0xca)]('filter-toggle-button'),_0x28b91c=document['getElementById']('enhanced-filter-section');if(!_0x428a97||!_0x261da7||!_0x1a89d2||!_0x1ebb66||!_0x447320||!_0x57c7a7||!_0x28b91c){console[_0x4132cd(0xee)]('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x428a97[_0x4132cd(0x124)](_0x4132cd(0x12f),()=>{const _0x39741b=_0x4132cd;if(!_0x428a97[_0x39741b(0x128)])loadRecentMatchesPreview('prev');}),_0x261da7['addEventListener'](_0x4132cd(0x12f),()=>{if(!_0x261da7['disabled'])loadRecentMatchesPreview('next');}),_0x1a89d2[_0x4132cd(0x124)]('click',()=>{const _0x2a69da=_0x4132cd;previewState['currentMode']!=='D1'&&!previewState['isLoading']&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x2a69da(0x150)));}),_0x1ebb66[_0x4132cd(0x124)]('click',()=>{previewState['currentMode']!=='D2'&&!previewState['isLoading']&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x447320['addEventListener']('click',()=>{previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x57c7a7&&_0x28b91c&&_0x57c7a7['addEventListener'](_0x4132cd(0x12f),()=>{const _0x18880f=_0x4132cd,_0x280aab=_0x28b91c['style'][_0x18880f(0x12b)]!=='none';_0x28b91c[_0x18880f(0x107)]['display']=_0x280aab?'none':'block',_0x57c7a7['classList']['toggle'](_0x18880f(0x138),!_0x280aab);});const _0xf9545e=document['getElementById']('apply-enhanced-filters'),_0x33c92f=document['getElementById'](_0x4132cd(0x129));_0xf9545e&&_0xf9545e['addEventListener'](_0x4132cd(0x12f),()=>{const _0x53c9b0=_0x4132cd;previewState[_0x53c9b0(0x15c)]['pilots']=document['getElementById']('filter-pilots')['value']['trim'](),previewState['enhancedFilters'][_0x53c9b0(0x109)]=document['getElementById'](_0x53c9b0(0xec))['value']['trim']();const _0x11c8c2=document['getElementById']('filter-subgames');previewState['enhancedFilters']['subgames']=Array['from'](_0x11c8c2['selectedOptions'])['map'](_0xd17c6f=>_0xd17c6f['value'])['filter'](_0x135a4c=>_0x135a4c!==''),loadRecentMatchesPreview('current');});_0x33c92f&&_0x33c92f['addEventListener']('click',()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document[_0x4132cd(0x12d)](_0x4132cd(0xe9))['forEach'](_0x32ddf0=>{_0x32ddf0['addEventListener']('click',()=>{const _0x275122=_0x32ddf0['dataset']['jump'];jumpToPage(_0x275122);});});const _0x34b1d0=document['getElementById']('jump-to-page');_0x34b1d0&&_0x34b1d0['addEventListener']('keypress',_0x19cfc7=>{const _0x2f6241=_0x4132cd;_0x19cfc7['key']==='Enter'&&jumpToPage(_0x2f6241(0xb1));});const _0xfa4fc3=document[_0x4132cd(0xca)](_0x4132cd(0x151)),_0x445e3e=document['getElementById'](_0x4132cd(0xc6));if(_0xfa4fc3)_0xfa4fc3['addEventListener']('click',closePreviewCommentPopup);if(_0x445e3e)_0x445e3e[_0x4132cd(0x124)]('click',closePreviewCommentPopup);const _0x4f9a1c=document['getElementById'](_0x4132cd(0xea)),_0x48a53e=document[_0x4132cd(0xca)]('commentAddOverlay'),_0x1599e9=document[_0x4132cd(0xca)]('addCommentForm');if(_0x4f9a1c)_0x4f9a1c['addEventListener']('click',closeAddCommentPopup);if(_0x48a53e)_0x48a53e['addEventListener']('click',closeAddCommentPopup);if(_0x1599e9)_0x1599e9['addEventListener']('submit',submitComment);const _0x217af4=document['getElementById'](_0x4132cd(0x135)),_0x1128dd=document['getElementById']('wordCount');_0x217af4&&_0x1128dd&&setupWordCounter(_0x4132cd(0x135),'wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;