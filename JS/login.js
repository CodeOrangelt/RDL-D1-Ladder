function a33_0x3c39(_0x243d98,_0x4dc7df){const _0x46d8c8=a33_0x46ee();return a33_0x3c39=function(_0x6737b5,_0x52d623){_0x6737b5=_0x6737b5-0x106;let _0x46ee42=_0x46d8c8[_0x6737b5];return _0x46ee42;},a33_0x3c39(_0x243d98,_0x4dc7df);}const a33_0x160537=a33_0x3c39,a33_0x6737b5=(function(){let _0x484658=!![];return function(_0x5c5350,_0x5329c6){const _0x329388=_0x484658?function(){const _0x5551b0=a33_0x3c39;if(_0x5329c6){const _0x474101=_0x5329c6[_0x5551b0(0x115)](_0x5c5350,arguments);return _0x5329c6=null,_0x474101;}}:function(){};return _0x484658=![],_0x329388;};}()),a33_0x46d8c8=a33_0x6737b5(this,function(){const _0x564942=a33_0x3c39,_0x95c8b7=function(){let _0xe58e6c;try{_0xe58e6c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1b42c9){_0xe58e6c=window;}return _0xe58e6c;},_0x140099=_0x95c8b7(),_0x1731dc=_0x140099['console']=_0x140099['console']||{},_0x4e8c58=[_0x564942(0x120),'warn',_0x564942(0x128),'error','exception','table','trace'];for(let _0x14b4f6=0x0;_0x14b4f6<_0x4e8c58['length'];_0x14b4f6++){const _0x509e3b=a33_0x6737b5['constructor']['prototype']['bind'](a33_0x6737b5),_0x2d9497=_0x4e8c58[_0x14b4f6],_0x181319=_0x1731dc[_0x2d9497]||_0x509e3b;_0x509e3b['__proto__']=a33_0x6737b5[_0x564942(0x11a)](a33_0x6737b5),_0x509e3b['toString']=_0x181319['toString']['bind'](_0x181319),_0x1731dc[_0x2d9497]=_0x509e3b;}});a33_0x46d8c8();import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function setupVerificationListener(_0x235953,_0x380788){const _0xa4bf5d=a33_0x3c39;console[_0xa4bf5d(0x120)]('Setting\x20up\x20email\x20verification\x20listener\x20for:',_0x235953);const _0x35381d=setInterval(async()=>{const _0xa1495a=_0xa4bf5d;try{console['log']('Checking\x20if\x20email\x20has\x20been\x20verified...');const _0x2fbf72=await signInWithEmailAndPassword(auth,_0x235953,_0x380788),_0x19e7a0=_0x2fbf72[_0xa1495a(0x13f)];await _0x19e7a0['getIdToken'](!![]),_0x19e7a0['emailVerified']?(console['log']('Email\x20has\x20been\x20verified!\x20Redirecting\x20to\x20login\x20page...'),clearInterval(_0x35381d),document[_0xa1495a(0x107)]('register-error')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Email\x20verified\x20successfully!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setTimeout(()=>{const _0x495750=_0xa1495a;document['getElementById']('register-container')['style'][_0x495750(0x119)]='none',document['getElementById']('login-container')[_0x495750(0x112)]['display']=_0x495750(0x11e),document[_0x495750(0x107)](_0x495750(0x110))['value']=_0x235953,document[_0x495750(0x107)]('login-error')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Your\x20account\x20has\x20been\x20verified!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';},0x7d0)):(console[_0xa1495a(0x120)]('Email\x20not\x20yet\x20verified,\x20waiting...'),await signOut(auth));}catch(_0x2f116d){console['error']('Error\x20checking\x20verification\x20status:',_0x2f116d),clearInterval(_0x35381d);}},0x1388);window['verificationCheckInterval']=_0x35381d,setTimeout(()=>{const _0x4a4af9=_0xa4bf5d;window[_0x4a4af9(0x13e)]&&(clearInterval(window['verificationCheckInterval']),window[_0x4a4af9(0x13e)]=null,console['log'](_0x4a4af9(0x135)));},0x5*0x3c*0x3e8);}async function isUsernameAvailable(_0x547294){const _0x36fce9=a33_0x3c39;if(!_0x547294||typeof _0x547294!==_0x36fce9(0x127)||_0x547294[_0x36fce9(0x11d)]()['length']<0x3)return document['getElementById']('register-error')[_0x36fce9(0x106)]='Username\x20must\x20be\x20at\x20least\x203\x20characters\x20long',![];const _0x20e665=_0x547294['trim']();try{const _0x577e33=/^[a-zA-Z0-9_-]{3,20}$/;if(!_0x577e33[_0x36fce9(0x13a)](_0x20e665))return document['getElementById']('register-error')[_0x36fce9(0x106)]='Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscores\x20and\x20hyphens',![];const [_0x32a0ad,_0x245045,_0xd309f3]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x36fce9(0x10b),'==',_0x20e665))),getDocs(query(collection(db,_0x36fce9(0x109)),where('username','==',_0x20e665))),getDocs(query(collection(db,_0x36fce9(0x111)),where('username','==',_0x20e665)))]);if(!_0x32a0ad['empty']||!_0x245045['empty']||!_0xd309f3['empty'])return document['getElementById']('register-error')['textContent']='Username\x20is\x20already\x20taken',![];return!![];}catch(_0x5ac224){return console['error'](_0x36fce9(0x12c),_0x5ac224),document['getElementById'](_0x36fce9(0x122))[_0x36fce9(0x106)]='Unable\x20to\x20verify\x20username\x20availability.\x20Please\x20try\x20again\x20later.',![];}}async function handleRegister(_0x1d8c29){const _0x301dcd=a33_0x3c39;_0x1d8c29[_0x301dcd(0x12d)]();const _0x223f9a=document[_0x301dcd(0x107)]('register-error');_0x223f9a[_0x301dcd(0x106)]='';const _0x2a2f2f=document[_0x301dcd(0x107)](_0x301dcd(0x10d))[_0x301dcd(0x13b)],_0x2881fb=document['getElementById']('register-password')['value'],_0x508c42=document['getElementById']('register-username')['value'],_0x422bfc=document[_0x301dcd(0x107)]('verification-answer')['value'][_0x301dcd(0x118)](),_0xc9d4e9=document[_0x301dcd(0x107)]('register-mode')['value'],_0x9c5375=document['getElementById'](_0x301dcd(0x129))?.['checked']||![];if(_0x9c5375&&_0xc9d4e9!==''){_0x223f9a['textContent']='Please\x20unselect\x20a\x20game\x20mode\x20if\x20you\x20choose\x20Non-Participant.';return;}if(!_0x9c5375&&_0xc9d4e9===''){_0x223f9a['textContent']=_0x301dcd(0x136);return;}try{const _0x1d35bc=[_0x301dcd(0x130),'magenta'];if(!_0x1d35bc['includes'](_0x422bfc)){_0x223f9a['textContent']=_0x301dcd(0x11f);return;}const _0x13e585=await isUsernameAvailable(_0x508c42);if(!_0x13e585)return;const _0x39e1be=await createUserWithEmailAndPassword(auth,_0x2a2f2f,_0x2881fb),_0x5089b1=_0x39e1be['user'];await sendEmailVerification(_0x5089b1),await setDoc(doc(db,_0x301dcd(0x109),_0x5089b1['uid']),{'username':_0x508c42[_0x301dcd(0x11d)](),'email':_0x2a2f2f,'gameMode':_0xc9d4e9,'nonParticipant':_0x9c5375,'createdAt':new Date(),'verified':![]}),_0x223f9a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Registration\x20pending!\x20Please\x20check\x20your\x20email\x20to\x20verify\x20your\x20account.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resendVerificationEmail(\x27'+_0x2a2f2f+'\x27)\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setupVerificationListener(_0x2a2f2f,_0x2881fb);}catch(_0x2835ac){console['error']('Registration\x20error:',_0x2835ac),_0x223f9a[_0x301dcd(0x106)]=_0x2835ac['code']==='auth/email-already-in-use'?'Email\x20address\x20is\x20already\x20registered':'Registration\x20failed.\x20Please\x20try\x20again\x20later.';}}async function handleLogin(_0x1036f4){const _0x57fa0d=a33_0x3c39;_0x1036f4['preventDefault']();const _0x3a3c26=document['getElementById'](_0x57fa0d(0x110))['value'],_0x4c339c=document['getElementById'](_0x57fa0d(0x13c))[_0x57fa0d(0x13b)],_0xb6dada=document['getElementById']('login-error');console['log']('Login\x20attempt\x20started\x20for:',_0x3a3c26),_0xb6dada['textContent']='';try{console['log']('Attempting\x20Firebase\x20signInWithEmailAndPassword...');const _0x315d6f=await signInWithEmailAndPassword(auth,_0x3a3c26,_0x4c339c),_0x40966a=_0x315d6f['user'];console[_0x57fa0d(0x120)]('User\x20signed\x20in:',_0x40966a[_0x57fa0d(0x113)]);const _0x463979=['players','playersD2','playersD3','playersDuos','playersCTF',_0x57fa0d(0x111)];console['log']('Checking\x20if\x20user\x20exists\x20in\x20any\x20collection...');let _0x51cedb=![],_0x224813=await Promise['all'](_0x463979['map'](_0x2c6bd9=>getDoc(doc(db,_0x2c6bd9,_0x40966a['uid']))));for(let _0x1f0bf1=0x0;_0x1f0bf1<_0x224813['length'];_0x1f0bf1++){if(_0x224813[_0x1f0bf1]['exists']()){_0x51cedb=!![],console[_0x57fa0d(0x120)](_0x57fa0d(0x133)+_0x463979[_0x1f0bf1]+_0x57fa0d(0x131));break;}}if(!_0x51cedb){console['log']('User\x20not\x20found\x20in\x20any\x20collection,\x20checking\x20pending\x20registration');const _0x27ef41=doc(db,'pendingRegistrations',_0x40966a['uid']),_0x13c3e2=await getDoc(_0x27ef41);if(_0x13c3e2['exists']()){const _0xce7453=_0x13c3e2['data']();console['log']('Found\x20pending\x20registration:',_0xce7453);if(_0x40966a[_0x57fa0d(0x10f)]){console['log']('Email\x20is\x20verified,\x20processing\x20registration'),_0xb6dada['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Setting\x20up\x20your\x20account...\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';if(_0xce7453[_0x57fa0d(0x114)])console[_0x57fa0d(0x120)]('Processing\x20non-participant\x20registration'),await setDoc(doc(db,_0x57fa0d(0x111),_0x40966a['uid']),{'username':_0xce7453['username'],'email':_0x40966a[_0x57fa0d(0x138)],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console['log'](_0x57fa0d(0x12f)+_0xce7453['username']+'\x20added\x20to\x20nonParticipants\x20collection');else{let _0x1a42ec;switch(_0xce7453['gameMode']){case'D1':_0x1a42ec=_0x57fa0d(0x123);break;case'D2':_0x1a42ec=_0x57fa0d(0x125);break;case'D3':_0x1a42ec='playersD3';break;case'Duos':_0x1a42ec='playersDuos';break;case'CTF':_0x1a42ec='playersCTF';break;default:_0x1a42ec=_0x57fa0d(0x123);}console[_0x57fa0d(0x120)]('Processing\x20'+_0xce7453['gameMode']+_0x57fa0d(0x124)+_0x1a42ec);const _0xc2ef90=collection(db,_0x1a42ec),_0x57ac66=query(_0xc2ef90,orderBy('position',_0x57fa0d(0x117)),limit(0x1)),_0x5d22f4=await getDocs(_0x57ac66),_0x181fff=_0x5d22f4['empty']?0x1:_0x5d22f4['docs'][0x0]['data']()['position']+0x1;await setDoc(doc(db,_0x1a42ec,_0x40966a['uid']),{'username':_0xce7453['username'],'email':_0x40966a['email'],'eloRating':0x4b0,'position':_0x181fff,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':_0xce7453[_0x57fa0d(0x10e)]}),console[_0x57fa0d(0x120)](_0x57fa0d(0x134)+_0xce7453[_0x57fa0d(0x10b)]+'\x20added\x20to\x20'+_0x1a42ec+'\x20at\x20position\x20'+_0x181fff);}await deleteDoc(_0x27ef41),setTimeout(()=>{window['location']['href']='../index.html';},0x7d0);return;}else{_0xb6dada['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22warning-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20verify\x20your\x20email\x20to\x20complete\x20your\x20registration.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22resend-button\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',document['getElementById']('resend-button')['addEventListener']('click',()=>{resendVerificationEmail(_0x3a3c26);}),await signOut(auth);return;}}}window[_0x57fa0d(0x12e)]['href']='../index.html';}catch(_0x2adce8){console['error']('Login\x20error:',_0x2adce8),_0xb6dada['textContent']='Login\x20failed:\x20'+_0x2adce8['message'];}}function a33_0x46ee(){const _0xb02fb=['textContent','getElementById','disabled','pendingRegistrations','resendVerificationEmail','username','login-error','register-email','gameMode','emailVerified','login-email','nonParticipants','style','uid','nonParticipant','apply','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Verification\x20email\x20has\x20been\x20resent\x20to\x20','desc','toLowerCase','display','bind','message','submit','trim','block','Incorrect\x20answer\x20to\x20verification\x20question','log','none','register-error','players','\x20player\x20registration\x20to\x20','playersD2','Login\x20error:','string','info','non-participant','error','User\x20signed\x20in:','Error\x20checking\x20username:','preventDefault','location','User\x20','purple','\x20collection','Attempting\x20to\x20resend\x20verification\x20email\x20to:','User\x20found\x20in\x20','New\x20player\x20','Stopped\x20checking\x20for\x20email\x20verification\x20(timeout\x20reached)','Please\x20select\x20a\x20game\x20mode\x20or\x20check\x20Non-Participant.','Window.resendVerificationEmail\x20called\x20with:','email','Error\x20resending\x20verification\x20email:','test','value','login-password','then','verificationCheckInterval','user'];a33_0x46ee=function(){return _0xb02fb;};return a33_0x46ee();}function loginFormHandler(_0x92704f){const _0x2f5473=a33_0x3c39;_0x92704f[_0x2f5473(0x12d)]();const _0x55c0ff=document['getElementById']('login-email')['value']['trim'](),_0x3e7f5b=document['getElementById']('login-password')['value'],_0x510a8d=document['getElementById']('login-error');signInWithEmailAndPassword(auth,_0x55c0ff,_0x3e7f5b)[_0x2f5473(0x13d)](_0xd502b6=>{const _0xee3895=_0x2f5473;console['log'](_0xee3895(0x12b),_0xd502b6['user']),window[_0xee3895(0x12e)]['href']='../index.html';})['catch'](_0x434e24=>{const _0xd0f68=_0x2f5473;console[_0xd0f68(0x12a)](_0xd0f68(0x126),_0x434e24),_0x510a8d[_0xd0f68(0x106)]='Login\x20error:\x20'+_0x434e24['message'],_0x510a8d['style']['display']='block';});}async function resendVerificationEmail(_0x4eab5c){const _0x458a76=a33_0x3c39;console['log'](_0x458a76(0x132),_0x4eab5c);try{const _0x13ec2b=document['getElementById']('login-password')?.['value'];if(!_0x13ec2b){console[_0x458a76(0x12a)]('Password\x20not\x20available\x20for\x20resending\x20verification'),document['getElementById'](_0x458a76(0x10c))['textContent']='Please\x20enter\x20your\x20password\x20to\x20resend\x20verification\x20email';return;}const _0x53301c=await signInWithEmailAndPassword(auth,_0x4eab5c,_0x13ec2b),_0x6059bd=_0x53301c[_0x458a76(0x13f)];console['log']('User\x20signed\x20in\x20for\x20verification\x20email:',_0x6059bd['uid']),await sendEmailVerification(_0x6059bd),console[_0x458a76(0x120)]('Verification\x20email\x20sent'),document['getElementById'](_0x458a76(0x10c))['innerHTML']=_0x458a76(0x116)+_0x4eab5c+'.\x20Please\x20check\x20your\x20inbox.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth);}catch(_0x500545){console['error'](_0x458a76(0x139),_0x500545),document['getElementById']('login-error')['textContent']='Error\x20sending\x20verification\x20email:\x20'+_0x500545[_0x458a76(0x11b)];}}window[a33_0x160537(0x10a)]=function(_0x20c180){const _0x832f23=a33_0x160537;console['log'](_0x832f23(0x137),_0x20c180),resendVerificationEmail(_0x20c180);},document['addEventListener']('DOMContentLoaded',()=>{const _0x16ce20=a33_0x160537,_0x33a2b8=document[_0x16ce20(0x107)]('non-participant'),_0x1dfa57=document['getElementById']('register-mode');_0x33a2b8&&_0x1dfa57&&_0x33a2b8['addEventListener']('change',function(){const _0xda5352=_0x16ce20;this['checked']?(_0x1dfa57[_0xda5352(0x13b)]='',_0x1dfa57[_0xda5352(0x108)]=!![]):_0x1dfa57['disabled']=![];});const _0x37dfaa=document[_0x16ce20(0x107)]('register-form'),_0x7c1bf4=document[_0x16ce20(0x107)]('login-form');_0x37dfaa&&_0x37dfaa['addEventListener'](_0x16ce20(0x11c),handleRegister);_0x7c1bf4&&_0x7c1bf4['addEventListener']('submit',handleLogin);const _0x49da2d=document['getElementById']('show-register'),_0x7f36c5=document['getElementById']('show-login');_0x49da2d&&_0x49da2d['addEventListener']('click',_0x2951d6=>{const _0x51eaaf=_0x16ce20;_0x2951d6['preventDefault'](),document['getElementById']('login-container')['style'][_0x51eaaf(0x119)]='none',document['getElementById']('register-container')['style'][_0x51eaaf(0x119)]='block';}),_0x7f36c5&&_0x7f36c5['addEventListener']('click',_0x200447=>{const _0x5be49d=_0x16ce20;_0x200447['preventDefault'](),document[_0x5be49d(0x107)]('register-container')[_0x5be49d(0x112)][_0x5be49d(0x119)]=_0x5be49d(0x121),document[_0x5be49d(0x107)]('login-container')['style']['display']=_0x5be49d(0x11e);});});