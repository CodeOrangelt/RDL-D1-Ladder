const a10_0xf4b7d5=a10_0x2d41,a10_0x5054f5=(function(){let _0x85e09a=!![];return function(_0x12a56d,_0x4759b6){const _0x1aa474=_0x85e09a?function(){const _0x5b8fc2=a10_0x2d41;if(_0x4759b6){const _0x3a3150=_0x4759b6[_0x5b8fc2(0xfa)](_0x12a56d,arguments);return _0x4759b6=null,_0x3a3150;}}:function(){};return _0x85e09a=![],_0x1aa474;};}()),a10_0x5c1250=a10_0x5054f5(this,function(){const _0x2e2747=a10_0x2d41;let _0x5a179a;try{const _0x30af72=Function(_0x2e2747(0xef)+_0x2e2747(0xf7)+');');_0x5a179a=_0x30af72();}catch(_0x10cafc){_0x5a179a=window;}const _0x1288df=_0x5a179a[_0x2e2747(0xe0)]=_0x5a179a[_0x2e2747(0xe0)]||{},_0x34c1e0=['log','warn','info','error',_0x2e2747(0xf2),'table','trace'];for(let _0x209353=0x0;_0x209353<_0x34c1e0[_0x2e2747(0xec)];_0x209353++){const _0x4b0146=a10_0x5054f5['constructor']['prototype']['bind'](a10_0x5054f5),_0x364d16=_0x34c1e0[_0x209353],_0x4eaaad=_0x1288df[_0x364d16]||_0x4b0146;_0x4b0146[_0x2e2747(0xf6)]=a10_0x5054f5['bind'](a10_0x5054f5),_0x4b0146[_0x2e2747(0xdd)]=_0x4eaaad['toString']['bind'](_0x4eaaad),_0x1288df[_0x364d16]=_0x4b0146;}});function a10_0x2d41(_0x2c2478,_0x4bba47){const _0x5c1250=a10_0x3491();return a10_0x2d41=function(_0x5054f5,_0x2ea320){_0x5054f5=_0x5054f5-0xdc;let _0x34919d=_0x5c1250[_0x5054f5];return _0x34919d;},a10_0x2d41(_0x2c2478,_0x4bba47);}a10_0x5c1250();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x4ba858=![]){const _0x32c241=a10_0x2d41,_0x32d54c=Date[_0x32c241(0xe9)](),_0x57ae29=checkNotificationCache();if(_0x57ae29!==null&&!_0x4ba858){updateNotificationDot(_0x57ae29);if(_0x32d54c-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x32d54c;const _0x371f96=auth[_0x32c241(0xe6)];if(!_0x371f96){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x4de105,_0x25b81b,_0x3dbc34]=await Promise['all']([checkForPendingMatchesInCollection(_0x371f96,'pendingMatches'),checkForPendingMatchesInCollection(_0x371f96,_0x32c241(0xe7)),checkForPendingMatchesInCollection(_0x371f96,_0x32c241(0xe5))]),_0x28afd3=_0x4de105||_0x25b81b||_0x3dbc34;updateNotificationDot(_0x28afd3),updateNotificationCache(_0x28afd3);}catch(_0x443f6d){console[_0x32c241(0xe3)]('Error\x20checking\x20pending\x20matches:',_0x443f6d);}}async function checkForPendingMatchesInCollection(_0x814c09,_0x1f63e3){const _0xcd9f5d=a10_0x2d41,_0x481479=_0x814c09['uid'],_0x200de8=_0x814c09[_0xcd9f5d(0xdf)],_0x18c11c=query(collection(db,_0x1f63e3),where(_0xcd9f5d(0xea),'==',_0x481479),where('approved','==',![])),_0x22f3fa=await getDocs(_0x18c11c);if(!_0x22f3fa['empty'])return!![];if(_0x200de8){const _0x35020e=query(collection(db,_0x1f63e3),where('winnerEmail','==',_0x200de8),where('approved','==',![])),_0x2a89b0=await getDocs(_0x35020e);if(!_0x2a89b0[_0xcd9f5d(0xf3)])return!![];}let _0x285e7a=await getUsernameFromAllSources(_0x814c09);if(_0x285e7a){const _0x4d3eb8=query(collection(db,_0x1f63e3),where('winnerUsername','==',_0x285e7a),where('approved','==',![])),_0x5585c6=await getDocs(_0x4d3eb8);if(!_0x5585c6['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x1596b3){const _0x3c60a3=a10_0x2d41,_0x2ee1b8=localStorage['getItem']('currentUsername');if(_0x2ee1b8)return _0x2ee1b8;try{const [_0x34ae0d,_0x360f36,_0xebcd08]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x1596b3['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x1596b3['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x1596b3['uid'])))]);if(!_0x34ae0d[_0x3c60a3(0xf3)]){const _0x11e41c=_0x34ae0d['docs'][0x0]['data']()[_0x3c60a3(0xe2)];return localStorage['setItem']('currentUsername',_0x11e41c),_0x11e41c;}if(!_0x360f36[_0x3c60a3(0xf3)]){const _0x24904c=_0x360f36[_0x3c60a3(0xf5)][0x0]['data']()[_0x3c60a3(0xe2)];return localStorage['setItem'](_0x3c60a3(0xdc),_0x24904c),_0x24904c;}if(!_0xebcd08[_0x3c60a3(0xf3)]){const _0xa10346=_0xebcd08['docs'][0x0]['data']()[_0x3c60a3(0xe2)];return localStorage['setItem'](_0x3c60a3(0xdc),_0xa10346),_0xa10346;}const _0x5d5f16=await getDoc(doc(db,'users',_0x1596b3[_0x3c60a3(0xf8)]));if(_0x5d5f16['exists']()&&_0x5d5f16['data']()[_0x3c60a3(0xe2)]){const _0x2647b7=_0x5d5f16['data']()['username'];return localStorage['setItem']('currentUsername',_0x2647b7),_0x2647b7;}}catch(_0x189afc){console['error'](_0x3c60a3(0xde),_0x189afc);}if(_0x1596b3['email'])return _0x1596b3['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x271794){const _0x39647c=a10_0x2d41,_0x17b0dd={'status':_0x271794,'timestamp':Date[_0x39647c(0xe9)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x39647c(0xed)](_0x17b0dd));}function checkNotificationCache(){const _0x2b1da7=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x2b1da7)return null;try{const {status:_0x29b159,timestamp:_0x2430b6}=JSON['parse'](_0x2b1da7),_0x2bb945=Date['now']();if(_0x2bb945-_0x2430b6<CACHE_EXPIRY)return _0x29b159;}catch(_0x4014e4){}return null;}function a10_0x3491(){const _0x460984=['currentUsername','toString','Error\x20fetching\x20username:','email','console','width','username','error','display','pendingMatchesD3','currentUser','pendingMatchesD2','report-match-notification','now','winnerId','right','length','stringify','style','return\x20(function()\x20','disconnect','zIndex','exception','empty','#ff3b30','docs','__proto__','{}.constructor(\x22return\x20this\x22)(\x20)','uid','DOMContentLoaded','apply'];a10_0x3491=function(){return _0x460984;};return a10_0x3491();}export function updateNotificationDot(_0x25f20d){const _0xdce747=a10_0x2d41,_0x1c9ccd=new MutationObserver((_0x4e2245,_0x285168)=>{const _0x2f3826=a10_0x2d41,_0xcce597=document['getElementById']('report-match-notification');_0xcce597&&(updateDotStyle(_0xcce597,_0x25f20d),_0x285168[_0x2f3826(0xf0)]());});_0x1c9ccd['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x5564cb=document['getElementById'](_0xdce747(0xe8));_0x5564cb&&(updateDotStyle(_0x5564cb,_0x25f20d),_0x1c9ccd['disconnect']()),setTimeout(()=>_0x1c9ccd['disconnect'](),0x1388);}function updateDotStyle(_0x27ba14,_0x1cffac){const _0x5d7778=a10_0x2d41;_0x1cffac?(_0x27ba14['style']['display']='block',_0x27ba14['style']['backgroundColor']=_0x5d7778(0xf4),_0x27ba14[_0x5d7778(0xee)][_0x5d7778(0xe1)]='10px',_0x27ba14[_0x5d7778(0xee)]['height']='10px',_0x27ba14['style']['position']='absolute',_0x27ba14[_0x5d7778(0xee)]['top']='-5px',_0x27ba14['style'][_0x5d7778(0xeb)]='-8px',_0x27ba14['style']['borderRadius']='50%',_0x27ba14['style']['border']='2px\x20solid\x20white',_0x27ba14['style'][_0x5d7778(0xf1)]='999'):_0x27ba14['style'][_0x5d7778(0xe4)]='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener'](a10_0xf4b7d5(0xf9),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});