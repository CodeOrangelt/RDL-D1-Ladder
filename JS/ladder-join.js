const a25_0x54a48b=(function(){let _0x219d30=!![];return function(_0x5109cd,_0x40ffd7){const _0x5cbd94=_0x219d30?function(){if(_0x40ffd7){const _0x472025=_0x40ffd7['apply'](_0x5109cd,arguments);return _0x40ffd7=null,_0x472025;}}:function(){};return _0x219d30=![],_0x5cbd94;};}()),a25_0x263715=a25_0x54a48b(this,function(){const _0x3aad41=a25_0x6403;let _0x8fd896;try{const _0x2b2ca0=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x8fd896=_0x2b2ca0();}catch(_0x4ffadd){_0x8fd896=window;}const _0x3a8d76=_0x8fd896['console']=_0x8fd896[_0x3aad41(0x1d9)]||{},_0x85abde=[_0x3aad41(0x1de),'warn','info',_0x3aad41(0x1ca),'exception','table','trace'];for(let _0x2e8ed3=0x0;_0x2e8ed3<_0x85abde['length'];_0x2e8ed3++){const _0x16b4d1=a25_0x54a48b['constructor']['prototype'][_0x3aad41(0x1d0)](a25_0x54a48b),_0x1f124c=_0x85abde[_0x2e8ed3],_0x509d71=_0x3a8d76[_0x1f124c]||_0x16b4d1;_0x16b4d1['__proto__']=a25_0x54a48b['bind'](a25_0x54a48b),_0x16b4d1['toString']=_0x509d71['toString']['bind'](_0x509d71),_0x3a8d76[_0x1f124c]=_0x16b4d1;}});a25_0x263715();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x2fe991=a25_0x6403,_0x2c4e77=document['getElementById']('d1-switch'),_0x46aca4=document['getElementById'](_0x2fe991(0x1d3));console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x2c4e77),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x46aca4);function _0x221707(){const _0x1beb7a=_0x2fe991;document['querySelectorAll']('input[name=\x22ladder\x22]')[_0x1beb7a(0x1d2)](_0x1e5811=>{_0x1e5811['addEventListener']('change',_0x24ea55=>{const _0xe406f3=a25_0x6403;_0x24ea55[_0xe406f3(0x1d5)]['checked']&&(currentLadder=_0x24ea55['target'][_0xe406f3(0x1d1)],console['log'](_0xe406f3(0x1d7)+currentLadder),checkUserLadderStatus());});});}_0x221707();const _0x4c37ff=document[_0x2fe991(0x1cc)]('join-ladder-button');_0x4c37ff&&_0x4c37ff['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0xb20efd=>{const _0x15e458=_0x2fe991;if(_0xb20efd)checkUserLadderStatus();else{const _0x6aa842=document['getElementById'](_0x15e458(0x1d4));_0x6aa842&&(_0x6aa842['style'][_0x15e458(0x1e9)]=_0x15e458(0x1e7));}});});function getCollectionName(_0x5503a9){const _0x39318c=a25_0x6403;switch(_0x5503a9?.['toUpperCase']()){case'D1':return _0x39318c(0x1e3);case'D2':return'playersD2';case'D3':return _0x39318c(0x1e4);case'DUOS':case'DUO':return'playersDuos';case'CTF':return'playersCTF';default:console['warn'](_0x39318c(0x1cb)+_0x5503a9+',\x20defaulting\x20to\x20D1');return'players';}}function a25_0x1906(){const _0x3967af=['error','Unknown\x20ladder\x20type:\x20','getElementById','uid','DUOS','exists','bind','value','forEach','d2-switch','ladder-join-prompt','target','position','Ladder\x20changed\x20to:\x20','textContent','console','trim','data','ladder-join-status\x20loading','className','log','playersCTF','split','Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...','ladder-join-status\x20error','players','playersD3','style','disabled','none','username','display'];a25_0x1906=function(){return _0x3967af;};return a25_0x1906();}async function checkUserLadderStatus(){const _0x3bffd7=a25_0x6403;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x2b56a0=auth['currentUser'],_0x5612f8=document['getElementById']('ladder-join-prompt'),_0x500205=document['getElementById']('join-ladder-type'),_0x27f56c=document['getElementById']('tiny-join-button');if(!_0x2b56a0||!_0x2b56a0['uid']||!_0x5612f8||!_0x500205||!_0x27f56c){if(_0x5612f8)_0x5612f8['style']['display']=_0x3bffd7(0x1e7);if(_0x27f56c)_0x27f56c[_0x3bffd7(0x1e5)][_0x3bffd7(0x1e9)]=_0x3bffd7(0x1e7);return;}try{try{await _0x2b56a0['getIdToken'](![]);}catch(_0x54dac5){console[_0x3bffd7(0x1ca)]('Authentication\x20verification\x20failed:',_0x54dac5),_0x5612f8['style'][_0x3bffd7(0x1e9)]='none',_0x27f56c['style']['display']=_0x3bffd7(0x1e7);return;}const _0x5560b2=getCollectionName(currentLadder),_0x18106f=doc(db,_0x5560b2,_0x2b56a0['uid']),_0x59c658=await getDoc(_0x18106f);if(_0x59c658['exists']())_0x5612f8['style']['display']='none',_0x27f56c['style']['display']=_0x3bffd7(0x1e7);else{_0x5612f8[_0x3bffd7(0x1e5)][_0x3bffd7(0x1e9)]='none',_0x27f56c['style']['display']='block',_0x500205[_0x3bffd7(0x1d8)]=currentLadder,_0x27f56c['onclick']=()=>{const _0x1446c2=_0x3bffd7;_0x5612f8['style'][_0x1446c2(0x1e9)]==='block'?_0x5612f8[_0x1446c2(0x1e5)]['display']='none':_0x5612f8[_0x1446c2(0x1e5)]['display']='block';};const _0x347a5e=document[_0x3bffd7(0x1cc)]('join-username-input'),_0x6fddbe=document[_0x3bffd7(0x1cc)]('ladder-join-status');if(_0x347a5e)_0x347a5e[_0x3bffd7(0x1d1)]='';_0x6fddbe&&(_0x6fddbe['textContent']='',_0x6fddbe['className']='ladder-join-status');}}catch(_0x37ca09){console[_0x3bffd7(0x1ca)]('Error\x20checking\x20ladder\x20status:',_0x37ca09),_0x5612f8['style']['display']=_0x3bffd7(0x1e7),_0x27f56c[_0x3bffd7(0x1e5)]['display']='none';}}function a25_0x6403(_0x46d5cc,_0x1a2b20){const _0x263715=a25_0x1906();return a25_0x6403=function(_0x54a48b,_0x1b5ed0){_0x54a48b=_0x54a48b-0x1ca;let _0x1906ca=_0x263715[_0x54a48b];return _0x1906ca;},a25_0x6403(_0x46d5cc,_0x1a2b20);}async function handleJoinLadder(){const _0xddb192=a25_0x6403,_0x10a7b5=auth['currentUser'],_0x2dab19=document['getElementById']('join-ladder-button'),_0x19de64=document[_0xddb192(0x1cc)]('ladder-join-status'),_0x2ad137=document['getElementById']('join-username-input');if(!_0x10a7b5||!_0x10a7b5['uid']){_0x19de64['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x19de64['className']=_0xddb192(0x1e2);return;}try{await _0x10a7b5['getIdToken'](!![]);}catch(_0x36b4f4){console['error']('Authentication\x20error:',_0x36b4f4),_0x19de64[_0xddb192(0x1d8)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x19de64['className']='ladder-join-status\x20error';return;}if(!_0x2ad137||!_0x2ad137['value'][_0xddb192(0x1da)]()){_0x19de64['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x19de64['className']='ladder-join-status\x20error';return;}try{_0x2dab19['disabled']=!![],_0x19de64[_0xddb192(0x1d8)]='Verifying\x20username...',_0x19de64[_0xddb192(0x1dd)]=_0xddb192(0x1dc);let _0x44ae15='',_0x25fd79=null;const _0x5b3c02=['players','playersD2','playersD3','playersDuos',_0xddb192(0x1df),'nonParticipants'];for(const _0x58d942 of _0x5b3c02){try{const _0x504bfb=doc(db,_0x58d942,_0x10a7b5['uid']),_0x220abb=await getDoc(_0x504bfb);if(_0x220abb[_0xddb192(0x1cf)]()){_0x25fd79=_0x220abb['data']();if(_0x25fd79[_0xddb192(0x1e8)]){_0x44ae15=_0x25fd79['username'];break;}}}catch(_0x177302){console[_0xddb192(0x1ca)]('Error\x20checking\x20'+_0x58d942+':',_0x177302);}}!_0x44ae15&&_0x10a7b5['email']&&(_0x44ae15=_0x10a7b5['email'][_0xddb192(0x1e0)]('@')[0x0]);if(!_0x44ae15){_0x19de64['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x19de64['className']=_0xddb192(0x1e2),_0x2dab19['disabled']=![];return;}const _0x1a7aa7=_0x2ad137['value'][_0xddb192(0x1da)]();if(_0x44ae15&&_0x1a7aa7['toLowerCase']()!==_0x44ae15['toLowerCase']()){_0x19de64[_0xddb192(0x1d8)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x44ae15+'\x22\x20to\x20confirm.',_0x19de64['className']=_0xddb192(0x1e2),_0x2dab19['disabled']=![];return;}_0x19de64['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x4ebcd9=getCollectionName(currentLadder),_0x2ea655=doc(db,_0x4ebcd9,_0x10a7b5[_0xddb192(0x1cd)]),_0x45c24e=await getDoc(_0x2ea655);if(_0x45c24e['exists']()){_0x19de64[_0xddb192(0x1d8)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x19de64['className']=_0xddb192(0x1e2),_0x2dab19['disabled']=![];return;}try{await _0x10a7b5['getIdToken'](!![]);}catch(_0x36f150){_0x19de64['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x19de64['className']=_0xddb192(0x1e2),_0x2dab19['disabled']=![];return;}const _0x2bfb34=_0x44ae15,_0x5800d7=collection(db,_0x4ebcd9),_0x1c6501=query(_0x5800d7,orderBy('position','desc'),limit(0x1)),_0x2f560f=await getDocs(_0x1c6501);let _0x49d969=0x1;if(!_0x2f560f['empty']){const _0x1a8c1e=_0x2f560f['docs'][0x0][_0xddb192(0x1db)]();_0x49d969=(_0x1a8c1e[_0xddb192(0x1d6)]||0x0)+0x1;}const _0x370179={'username':_0x2bfb34,'email':_0x10a7b5['email'],'eloRating':0x4b0,'position':_0x49d969,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x2ea655,_0x370179),currentLadder===_0xddb192(0x1ce)?_0x19de64['textContent']=_0xddb192(0x1e1):_0x19de64['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x19de64[_0xddb192(0x1dd)]='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x59a986){console['error']('Error\x20joining\x20ladder:',_0x59a986),_0x19de64[_0xddb192(0x1d8)]='Error\x20joining\x20ladder:\x20'+_0x59a986['message'],_0x19de64[_0xddb192(0x1dd)]='ladder-join-status\x20error',_0x2dab19[_0xddb192(0x1e6)]=![];}}