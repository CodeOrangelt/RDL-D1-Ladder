const a27_0x17f417=a27_0xcca4,a27_0xbc08d2=(function(){let _0x4ca7bd=!![];return function(_0x476859,_0x1107ac){const _0xcf50f=_0x4ca7bd?function(){const _0x3d0a09=a27_0xcca4;if(_0x1107ac){const _0x8c887e=_0x1107ac[_0x3d0a09(0x1bf)](_0x476859,arguments);return _0x1107ac=null,_0x8c887e;}}:function(){};return _0x4ca7bd=![],_0xcf50f;};}()),a27_0x280623=a27_0xbc08d2(this,function(){const _0x1fbd78=a27_0xcca4;let _0x49a6c8;try{const _0x34b1d9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x49a6c8=_0x34b1d9();}catch(_0x30932c){_0x49a6c8=window;}const _0x51d4ec=_0x49a6c8[_0x1fbd78(0x180)]=_0x49a6c8['console']||{},_0x553877=['log','warn',_0x1fbd78(0x1ea),'error',_0x1fbd78(0x1dd),'table','trace'];for(let _0x2569b8=0x0;_0x2569b8<_0x553877['length'];_0x2569b8++){const _0x5c90ab=a27_0xbc08d2['constructor']['prototype']['bind'](a27_0xbc08d2),_0x5ac574=_0x553877[_0x2569b8],_0x3bf3fa=_0x51d4ec[_0x5ac574]||_0x5c90ab;_0x5c90ab['__proto__']=a27_0xbc08d2['bind'](a27_0xbc08d2),_0x5c90ab[_0x1fbd78(0x199)]=_0x3bf3fa[_0x1fbd78(0x199)][_0x1fbd78(0x1d7)](_0x3bf3fa),_0x51d4ec[_0x5ac574]=_0x5c90ab;}});a27_0x280623();function a27_0xcca4(_0x1ee98c,_0x130f28){const _0x280623=a27_0x5764();return a27_0xcca4=function(_0xbc08d2,_0x13f790){_0xbc08d2=_0xbc08d2-0x17b;let _0x57647f=_0x280623[_0xbc08d2];return _0x57647f;},a27_0xcca4(_0x1ee98c,_0x130f28);}import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x11259c=0x1){const _0x12eb72=a27_0xcca4;try{document['getElementById'](_0x12eb72(0x17b))[_0x12eb72(0x196)][_0x12eb72(0x197)]='block';const _0x390062=await getLadderData(_0x11259c);_0x390062['sort']((_0x49f581,_0x113199)=>_0x113199['elo']-_0x49f581['elo']);const _0x4782ce=_0x390062[_0x12eb72(0x1d9)](_0x32a31c=>_0x32a31c['id']),_0x305dd6=await getEloHistoryBatch(_0x4782ce,_0x11259c),_0x7181db=_0x390062['map']((_0x3d6520,_0x2f96bf)=>{const _0x194600=_0x12eb72,_0x393d89=_0x305dd6[_0x3d6520['id']]||[],_0x16865c=_0x393d89['sort']((_0x570a5a,_0x3b34ca)=>new Date(_0x3b34ca['date'])-new Date(_0x570a5a['date']))['slice'](0x0,0x5);return{..._0x3d6520,'rank':_0x2f96bf+0x1,'lastMatches':_0x16865c,'recentActivity':_0x16865c[_0x194600(0x1d1)]>0x0};});renderLadder(_0x7181db),setupRealTimeUpdates(_0x11259c);}catch(_0xe2cb33){console['error'](_0x12eb72(0x1f0),_0xe2cb33),document['getElementById']('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')['style']['display']='none';}}function a27_0x5764(){const _0x1b0584=['loading-indicator','position','D2\x20toggle\x20clicked','#F44336','now','console','error','</span>.\x20Challenge\x20other\x20teams!','Error\x20finding\x20best\x20opponent:','addEventListener','set','elo-recommendation-text-duos','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20','totalMatches','d1-switch','max','appendChild','toLowerCase','loserUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','none','toISOString',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','div','Active','Error\x20loading\x20ladder:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','style','display','eloHistory','toString','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>',';\x22>','change','sort','Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','winnerScore','playersD','oldEloRating','cursor','#CD7F32','date','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','eloRating','kda','#b9f1fc','<img\x20src=\x22../images/flags/','d3-ladder-container','player','totalDeaths','Duos\x20ladder\x20is\x20currently\x20admin-only','textContent','Gold','querySelector','add','D1\x20toggle\x20clicked','username','disabled','log','Inactive','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','players','hasTeam','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','inline','active','d3-switch','playersD2','apply','block','elo-recommendation-text-d2','tokenImage','Error\x20updating\x20ELO\x20trend\x20indicators:','Error\x20finding\x20recommended\x20opponent','newEloRating','playerUsername','loserScore','#50C878','innerHTML','.trend-indicator','empty','owner','get','Using\x20cached\x20D1\x20ladder\x20data','data','elo-recommendation-text-d3','length','click','wins','\x20not\x20found','duos-ladder-container','seconds','bind','elo-recommendation-text-d1','map','winRate','#C0C0C0','timestamp','exception','includes','parentNode','country','classList','gray','playersD3','equipped','forEach','%</td>\x0a\x20\x20\x20\x20</tr>','abs','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','newElo','info','remove','title','has','onAuthStateChanged','opacity','Error\x20loading\x20ladder\x20data:','You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder','\x20(equipped:\x20','Error\x20fetching\x20ELO\x20history:','color','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','getElementById'];a27_0x5764=function(){return _0x1b0584;};return a27_0x5764();}function setupRealTimeUpdates(_0x501d41=0x1){const _0x2271dd=a27_0xcca4;activeListeners['forEach'](_0x4f83d6=>_0x4f83d6()),activeListeners=[];const _0x25b28d=_0x501d41===0x1?'players':_0x2271dd(0x1a0)+_0x501d41,_0x155cd2=_0x501d41===0x1?'matches':'matchesD'+_0x501d41,_0x517823=new Date();_0x517823['setDate'](_0x517823['getDate']()-0x1);const _0x44718b=setupEfficientListener(_0x155cd2,[where('date','>=',_0x517823[_0x2271dd(0x190)]()),limit(0xa),orderBy(_0x2271dd(0x1a4),'desc')],async _0x2d34cb=>{_0x2d34cb['length']>0x0&&await loadLadderData(_0x501d41);});activeListeners['push'](_0x44718b);}export function cleanupListeners(){activeListeners['forEach'](_0x513b9a=>_0x513b9a()),activeListeners=[];}function renderLadder(_0x39c702){const _0xa81b64=document['getElementById']('ladder-container');_0xa81b64['innerHTML']='',_0x39c702['forEach'](_0x1f5e72=>{const _0x3c6533=a27_0xcca4,_0x5d5e9f=document['createElement'](_0x3c6533(0x192));_0x5d5e9f['className']='ladder-player',_0x5d5e9f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x1f5e72['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x1f5e72['username']||_0x1f5e72['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x1f5e72['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x1f5e72['recentActivity']?_0x3c6533(0x1bc):'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1f5e72['recentActivity']?_0x3c6533(0x193):_0x3c6533(0x1b6))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0xa81b64[_0x3c6533(0x18b)](_0x5d5e9f);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x3cf0a1=![]){const _0x16c9d4=a27_0xcca4,_0x2166ca=document['querySelector']('#ladder\x20tbody');if(!_0x2166ca){console[_0x16c9d4(0x181)]('Ladder\x20table\x20body\x20not\x20found');return;}_0x2166ca['innerHTML']=_0x16c9d4(0x1a5);try{const _0x1828b9=Date[_0x16c9d4(0x17f)]();if(!_0x3cf0a1&&playerCache['data']&&_0x1828b9-playerCache['timestamp']<CACHE_DURATION){console['log'](_0x16c9d4(0x1ce)),updateLadderDisplay(playerCache['data']);return;}const _0x4f8035=collection(db,'players'),_0x3b84c7=await getDocs(_0x4f8035),_0x46aa2a=[];_0x3b84c7['forEach'](_0x3acf25=>{const _0x1679b6=_0x3acf25['data']();_0x46aa2a['push']({..._0x1679b6,'id':_0x3acf25['id'],'elo':_0x1679b6['eloRating']||0x0,'position':_0x1679b6['position']||Number['MAX_SAFE_INTEGER']});});const _0x4a23fe=collection(db,'userProfiles'),_0x3fe5b9=await getDocs(_0x4a23fe),_0x4510bf=new Map();_0x3fe5b9[_0x16c9d4(0x1e5)](_0x2e2f02=>{const _0x3aa689=_0x16c9d4,_0x2f9523=_0x2e2f02['data']();_0x2f9523['username']&&_0x4510bf[_0x3aa689(0x185)](_0x2f9523['username'][_0x3aa689(0x18c)](),_0x2f9523);}),_0x46aa2a['forEach'](_0x527ae3=>{const _0x2fe7ae=_0x16c9d4,_0x237d67=_0x527ae3['username']?.['toLowerCase']();if(_0x237d67&&_0x4510bf['has'](_0x237d67)){const _0xd28c0e=_0x4510bf['get'](_0x237d67);_0xd28c0e['country']&&(_0x527ae3[_0x2fe7ae(0x1e0)]=_0xd28c0e[_0x2fe7ae(0x1e0)]['toLowerCase']());}});const _0x3cf0fc=_0x46aa2a['map'](_0x105807=>_0x105807[_0x16c9d4(0x1b3)]),_0x10c4ac=await fetchBatchMatchStats(_0x3cf0fc);_0x46aa2a[_0x16c9d4(0x19d)]((_0x500397,_0x14f474)=>{const _0x32e0c5=_0x16c9d4,_0x4f509c=_0x10c4ac[_0x32e0c5(0x1cd)](_0x500397['username'])?.['totalMatches']||0x0,_0x4017bb=_0x10c4ac['get'](_0x14f474['username'])?.['totalMatches']||0x0;if(_0x4f509c===0x0!==(_0x4017bb===0x0))return _0x4f509c===0x0?0x1:-0x1;return(_0x500397[_0x32e0c5(0x17c)]||0x3e7)-(_0x14f474['position']||0x3e7);}),_0x46aa2a[_0x16c9d4(0x1e5)]((_0x1e4f26,_0xa5722d)=>{_0x1e4f26['position']=_0xa5722d+0x1;}),playerCache['data']=_0x46aa2a,playerCache['timestamp']=_0x1828b9,updateLadderDisplay(_0x46aa2a,_0x10c4ac);}catch(_0xcb1ef4){console[_0x16c9d4(0x181)](_0x16c9d4(0x194),_0xcb1ef4),_0x2166ca[_0x16c9d4(0x1c9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0xcb1ef4['message']+_0x16c9d4(0x1b7);}}async function fetchBatchMatchStats(_0x4a6878){const _0x1037a1=a27_0xcca4,_0x55a676=new Map();try{_0x4a6878[_0x1037a1(0x1e5)](_0xbf1731=>{_0x55a676['set'](_0xbf1731,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x2d278b=collection(db,'approvedMatches'),_0x39740b=await getDocs(_0x2d278b);_0x39740b[_0x1037a1(0x1e5)](_0x2a7d48=>{const _0x413562=_0x1037a1,_0x118e38=_0x2a7d48['data'](),_0x1e0648=_0x118e38['winnerUsername'],_0x501a4e=_0x118e38[_0x413562(0x18d)];if(_0x4a6878['includes'](_0x1e0648)){const _0x35c11d=_0x55a676['get'](_0x1e0648);_0x35c11d['wins']++,_0x35c11d['totalMatches']++,_0x35c11d['totalKills']+=parseInt(_0x118e38[_0x413562(0x19f)])||0x0,_0x35c11d['totalDeaths']+=parseInt(_0x118e38[_0x413562(0x1c7)])||0x0;}if(_0x4a6878[_0x413562(0x1de)](_0x501a4e)){const _0x1e7a71=_0x55a676['get'](_0x501a4e);_0x1e7a71['losses']++,_0x1e7a71['totalMatches']++,_0x1e7a71['totalKills']+=parseInt(_0x118e38['loserScore'])||0x0,_0x1e7a71[_0x413562(0x1ac)]+=parseInt(_0x118e38['winnerScore'])||0x0;}}),_0x4a6878[_0x1037a1(0x1e5)](_0xca39e3=>{const _0x461cb6=_0x1037a1,_0x217a2c=_0x55a676['get'](_0xca39e3);_0x217a2c['kda']=_0x217a2c['totalDeaths']>0x0?(_0x217a2c['totalKills']/_0x217a2c['totalDeaths'])['toFixed'](0x2):_0x217a2c['totalKills']['toFixed'](0x2),_0x217a2c[_0x461cb6(0x1da)]=_0x217a2c[_0x461cb6(0x188)]>0x0?(_0x217a2c['wins']/_0x217a2c[_0x461cb6(0x188)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x83ecd4){console[_0x1037a1(0x181)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x83ecd4);}return _0x55a676;}function createPlayerRow(_0x4f0119,_0x1d4aee){const _0x17cb16=a27_0xcca4,_0x3c8693=parseFloat(_0x4f0119['elo'])||0x0;let _0x7ad845='gray';if(_0x3c8693>=0x7d0)_0x7ad845='#50C878';else{if(_0x3c8693>=0x708)_0x7ad845='#FFD700';else{if(_0x3c8693>=0x640)_0x7ad845=_0x17cb16(0x1a8);else _0x3c8693>=0x578&&(_0x7ad845='#CD7F32');}}let _0xca87f6='';return _0x4f0119[_0x17cb16(0x1e0)]&&(_0xca87f6=_0x17cb16(0x1a9)+_0x4f0119['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4f0119['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x17cb16(0x1ba)+_0x4f0119['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x4f0119['username'])+_0x17cb16(0x1e8)+_0x7ad845+_0x17cb16(0x191)+_0x4f0119['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xca87f6+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x7ad845+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3c8693+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d4aee[_0x17cb16(0x188)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d4aee[_0x17cb16(0x1d3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d4aee['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d4aee[_0x17cb16(0x1a7)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d4aee['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x4e005e){const _0x5ece42=a27_0xcca4;if(_0x4e005e>=0x7d0)return'Emerald';if(_0x4e005e>=0x708)return _0x5ece42(0x1af);if(_0x4e005e>=0x640)return'Silver';if(_0x4e005e>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x2cc8bf){const _0x4966e0=a27_0xcca4,_0x568361=new Map();_0x2cc8bf['forEach'](_0x383c5f=>{const _0x3bc0d7=a27_0xcca4;_0x568361[_0x3bc0d7(0x185)](_0x383c5f,0x0);});try{const _0x2251dc=collection(db,'players'),_0x3f0ba1=await getDocs(_0x2251dc),_0x3d8fa4=new Map(),_0x117320=new Map();_0x3f0ba1['forEach'](_0xce7fdc=>{const _0x4d28bb=a27_0xcca4,_0x1473b5=_0xce7fdc[_0x4d28bb(0x1cf)]();_0x1473b5['username']&&(_0x3d8fa4['set'](_0xce7fdc['id'],_0x1473b5['username']),_0x117320['set'](_0x1473b5['username'][_0x4d28bb(0x18c)](),_0xce7fdc['id']));});const _0x3338c4=collection(db,_0x4966e0(0x198)),_0x1c5b63=query(_0x3338c4,orderBy(_0x4966e0(0x1dc),'desc'),limit(0x12c)),_0x29879a=await getDocs(_0x1c5b63);if(_0x29879a['empty'])return console[_0x4966e0(0x1b5)]('ELO\x20history\x20collection\x20is\x20empty'),_0x568361;if(_0x29879a['docs']['length']>0x0){const _0x318ccc=_0x29879a['docs'][0x0]['data']();if(_0x318ccc['player']&&_0x3d8fa4[_0x4966e0(0x1ed)](_0x318ccc[_0x4966e0(0x1ab)])){}}const _0x3c1857=new Map();let _0x569300=0x0;_0x29879a[_0x4966e0(0x1e5)](_0x2a31a6=>{const _0x3fd379=_0x4966e0,_0x169817=_0x2a31a6['data']();let _0x5acd80=null;if(_0x169817[_0x3fd379(0x1ab)]&&_0x3d8fa4['has'](_0x169817['player']))_0x5acd80=_0x3d8fa4[_0x3fd379(0x1cd)](_0x169817['player']);else{if(_0x169817[_0x3fd379(0x1b3)]&&_0x117320[_0x3fd379(0x1ed)](_0x169817['username'][_0x3fd379(0x18c)]()))_0x5acd80=_0x169817['username'];else _0x169817[_0x3fd379(0x1c6)]&&_0x117320[_0x3fd379(0x1ed)](_0x169817['playerUsername'][_0x3fd379(0x18c)]())&&(_0x5acd80=_0x169817[_0x3fd379(0x1c6)]);}_0x5acd80&&_0x2cc8bf['includes'](_0x5acd80)&&(_0x569300++,!_0x3c1857['has'](_0x5acd80)&&_0x3c1857[_0x3fd379(0x185)](_0x5acd80,[]),_0x3c1857[_0x3fd379(0x1cd)](_0x5acd80)['push']({..._0x169817,'timestamp':_0x169817[_0x3fd379(0x1dc)]?.[_0x3fd379(0x1d6)]||0x0}));}),_0x3c1857[_0x4966e0(0x1e5)]((_0x3b7815,_0x56459f)=>{const _0x1a4ff8=_0x4966e0;if(_0x3b7815['length']>0x0){_0x3b7815[_0x1a4ff8(0x19d)]((_0x18788c,_0x5d30c6)=>_0x5d30c6['timestamp']-_0x18788c['timestamp']);const _0x1a777d=_0x3b7815['find'](_0x51e732=>_0x51e732['change']!==undefined||_0x51e732[_0x1a4ff8(0x1e9)]!==undefined&&_0x51e732['previousElo']!==undefined||_0x51e732['newEloRating']!==undefined&&_0x51e732['oldEloRating']!==undefined);if(_0x1a777d){let _0xc9b605;if(_0x1a777d[_0x1a4ff8(0x19c)]!==undefined)_0xc9b605=parseInt(_0x1a777d['change']);else{if(_0x1a777d['newElo']!==undefined&&entry['previousElo']!==undefined)_0xc9b605=parseInt(_0x1a777d[_0x1a4ff8(0x1e9)])-parseInt(_0x1a777d['previousElo']);else _0x1a777d[_0x1a4ff8(0x1c5)]!==undefined&&entry['oldEloRating']!==undefined&&(_0xc9b605=parseInt(_0x1a777d[_0x1a4ff8(0x1c5)])-parseInt(_0x1a777d[_0x1a4ff8(0x1a1)]));}!isNaN(_0xc9b605)&&_0xc9b605!==0x0&&_0x568361['set'](_0x56459f,_0xc9b605);}}});}catch(_0x1720e7){console[_0x4966e0(0x181)](_0x4966e0(0x1f3),_0x1720e7);}return _0x568361;}function createPlayerRowWithToken(_0x1fa023,_0x43af5f,_0x152c61){const _0x15d9ba=a27_0xcca4,_0x5a89c7=parseFloat(_0x1fa023['elo'])||0x0;let _0x3081bc='gray';if(_0x5a89c7>=0x7d0)_0x3081bc=_0x15d9ba(0x1c8);else{if(_0x5a89c7>=0x708)_0x3081bc='#FFD700';else{if(_0x5a89c7>=0x640)_0x3081bc='#b9f1fc';else _0x5a89c7>=0x578&&(_0x3081bc='#CD7F32');}}let _0x1e34f3='';_0x1fa023['country']&&(_0x1e34f3='<img\x20src=\x22../images/flags/'+_0x1fa023[_0x15d9ba(0x1e0)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1fa023[_0x15d9ba(0x1e0)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x12fc21='';return _0x152c61&&(_0x12fc21='<img\x20src=\x22'+_0x152c61[_0x15d9ba(0x1c2)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x152c61['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x152c61['tokenName']+'\x20'+(_0x152c61[_0x15d9ba(0x1e4)]?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1fa023[_0x15d9ba(0x17c)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x1fa023['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x3081bc+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1fa023[_0x15d9ba(0x1b3)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1e34f3+_0x15d9ba(0x18e)+_0x12fc21+_0x15d9ba(0x195)+_0x3081bc+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x5a89c7+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x43af5f[_0x15d9ba(0x188)]+_0x15d9ba(0x19a)+_0x43af5f['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x43af5f['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x43af5f[_0x15d9ba(0x1a7)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x43af5f[_0x15d9ba(0x1da)]+_0x15d9ba(0x1e6);}async function updateLadderDisplay(_0x23c826,_0x4369ec=null){const _0x260ad5=a27_0xcca4,_0x287d75=document[_0x260ad5(0x1b0)]('#ladder\x20tbody');if(!_0x287d75){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x1c2e38=document[_0x260ad5(0x1b0)]('#ladder\x20thead\x20tr');_0x1c2e38&&(_0x1c2e38[_0x260ad5(0x1c9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x842c6f=_0x23c826['map'](_0x44e2e8=>_0x44e2e8['username']);!_0x4369ec&&(_0x4369ec=await fetchBatchMatchStats(_0x842c6f));let _0x23682f=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x23682f=await getTokensByUsernames(_0x842c6f),console[_0x260ad5(0x1b5)]('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x23682f['size'],'players'),_0x23682f['forEach']((_0x289d79,_0x499ceb)=>{const _0x13d022=_0x260ad5,_0x3e98f1=_0x289d79['find'](_0x12cac0=>_0x12cac0['equipped']);_0x3e98f1&&console[_0x13d022(0x1b5)]('ðŸŽ¯\x20'+_0x499ceb+'\x20has\x20equipped:\x20'+_0x3e98f1['tokenName']);});}catch(_0x2f9d3f){console[_0x260ad5(0x181)]('Error\x20fetching\x20tokens:',_0x2f9d3f);}const _0x3f1008=_0x23c826['map'](_0x487106=>{const _0x2c4418=_0x260ad5,_0x4f67a3=_0x4369ec['get'](_0x487106['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x285fd5=_0x23682f[_0x2c4418(0x1cd)](_0x487106['username'])||[],_0x57ebe7=getPrimaryDisplayToken(_0x285fd5);return _0x57ebe7&&console['log']('ðŸŽ¨\x20'+_0x487106['username']+'\x20displaying\x20token:\x20'+_0x57ebe7['tokenName']+_0x2c4418(0x1f2)+_0x57ebe7['equipped']+')'),createPlayerRowWithToken(_0x487106,_0x4f67a3,_0x57ebe7);})['join']('');_0x287d75['innerHTML']=_0x3f1008,getPlayersLastEloChanges(_0x842c6f)['then'](_0x1bb5d8=>{const _0x125ead=new Map();_0x287d75['querySelectorAll']('tr')['forEach']((_0x253936,_0x401ff3)=>{_0x401ff3<_0x842c6f['length']&&_0x125ead['set'](_0x842c6f[_0x401ff3],_0x253936);}),_0x1bb5d8['forEach']((_0xaa297e,_0x4b0622)=>{const _0x5df2a8=a27_0xcca4,_0x53bc2b=_0x125ead[_0x5df2a8(0x1cd)](_0x4b0622);if(_0x53bc2b&&_0xaa297e!==0x0){const _0x5ceb9b=_0x53bc2b[_0x5df2a8(0x1b0)]('td:nth-child(3)');if(_0x5ceb9b){const _0x1fa0a5=_0xaa297e>0x0?'+'+_0xaa297e:''+_0xaa297e,_0x5ca220=_0x5ceb9b['querySelector'](_0x5df2a8(0x1ca));_0x5ca220&&(_0x5ca220['textContent']=_0x1fa0a5,_0x5ca220[_0x5df2a8(0x196)][_0x5df2a8(0x1f4)]=_0xaa297e>0x0?'#4CAF50':_0x5df2a8(0x17e),_0x5ca220['style']['fontWeight']='bold',_0x5ca220['style']['fontSize']='0.85em',_0x5ca220[_0x5df2a8(0x196)][_0x5df2a8(0x197)]=_0x5df2a8(0x1bb),_0x5ca220['style']['visibility']='visible',_0x5ca220[_0x5df2a8(0x196)]['opacity']='1');}}});})['catch'](_0x1f9709=>console['error'](_0x260ad5(0x1c3),_0x1f9709));}function initLadderToggles(){const _0x1c0ecb=a27_0xcca4,_0x29716c=document['getElementById']('d1-switch'),_0xf413a8=document[_0x1c0ecb(0x1f6)]('d2-switch'),_0x577424=document[_0x1c0ecb(0x1f6)](_0x1c0ecb(0x1bd)),_0xf60d5d=document['getElementById']('duos-switch'),_0x14aa52=document['getElementById']('d1-ladder-container'),_0x36deb3=document['getElementById']('d2-ladder-container'),_0x3dca22=document['getElementById']('d3-ladder-container'),_0x440ef7=document['getElementById']('duos-ladder-container');function _0x3b78b6(){const _0x17054b=_0x1c0ecb;if(_0x14aa52)_0x14aa52['classList']['remove']('active');if(_0x36deb3)_0x36deb3['classList']['remove']('active');if(_0x3dca22)_0x3dca22[_0x17054b(0x1e1)]['remove']('active');if(_0x440ef7)_0x440ef7['style']['display']='none';if(_0x14aa52)_0x14aa52['style']['display']=_0x17054b(0x18f);if(_0x36deb3)_0x36deb3['style']['display']='none';if(_0x3dca22)_0x3dca22['style']['display']='none';}_0x29716c&&_0x29716c[_0x1c0ecb(0x184)]('click',()=>{const _0x183b27=_0x1c0ecb;console[_0x183b27(0x1b5)](_0x183b27(0x1b2)),_0x3b78b6();_0x14aa52&&(_0x14aa52['classList']['add']('active'),_0x14aa52[_0x183b27(0x196)]['display']='block');document['getElementById'](_0x183b27(0x1d8))['style'][_0x183b27(0x197)]=_0x183b27(0x1c0),document['getElementById'](_0x183b27(0x1c1))['style']['display']='none',document[_0x183b27(0x1f6)](_0x183b27(0x1d0))['style']['display']=_0x183b27(0x18f);if(_0x29716c)_0x29716c['classList']['add']('active');if(_0xf413a8)_0xf413a8[_0x183b27(0x1e1)][_0x183b27(0x1eb)](_0x183b27(0x1bc));if(_0x577424)_0x577424['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0xf413a8&&_0xf413a8[_0x1c0ecb(0x184)]('click',()=>{const _0x3dbe9c=_0x1c0ecb;console[_0x3dbe9c(0x1b5)](_0x3dbe9c(0x17d)),_0x3b78b6();_0x36deb3&&(_0x36deb3['classList']['add']('active'),_0x36deb3['style']['display']=_0x3dbe9c(0x1c0));document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']='block',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0xf413a8)_0xf413a8[_0x3dbe9c(0x1e1)][_0x3dbe9c(0x1b1)](_0x3dbe9c(0x1bc));if(_0x29716c)_0x29716c['classList']['remove']('active');if(_0x577424)_0x577424['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x577424&&_0x577424['addEventListener']('click',()=>{const _0x361a4c=_0x1c0ecb;console['log']('D3\x20toggle\x20clicked'),_0x3b78b6();_0x3dca22&&(_0x3dca22['classList'][_0x361a4c(0x1b1)]('active'),_0x3dca22['style']['display']='block');document[_0x361a4c(0x1f6)]('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style'][_0x361a4c(0x197)]=_0x361a4c(0x18f),document['getElementById']('elo-recommendation-text-d3')['style'][_0x361a4c(0x197)]=_0x361a4c(0x1c0);if(_0x577424)_0x577424['classList']['add']('active');if(_0x29716c)_0x29716c['classList'][_0x361a4c(0x1eb)](_0x361a4c(0x1bc));if(_0xf413a8)_0xf413a8['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0xf60d5d&&_0xf60d5d['addEventListener'](_0x1c0ecb(0x1d2),()=>{const _0x267a5a=_0x1c0ecb;_0x3b78b6();if(_0x440ef7)_0x440ef7['style']['display']='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById'](_0x267a5a(0x186))['style']['display']='block'),document[_0x267a5a(0x1f6)]('elo-recommendation-text-d1')[_0x267a5a(0x196)]['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x267a5a(0x18f),document['getElementById'](_0x267a5a(0x1d0))['style']['display']='none';});}document['addEventListener']('DOMContentLoaded',()=>{const _0x15f513=a27_0xcca4;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x15f513(0x1d8))['style']['display']=_0x15f513(0x1c0);});export{displayLadder};async function findBestOpponent(_0xbd59c1='d1'){const _0x54ff24=a27_0xcca4,_0x56691c='elo-recommendation-text-'+_0xbd59c1,_0x1ef6b3=document['getElementById'](_0x56691c);if(!_0x1ef6b3){console['error']('Recommendation\x20element\x20for\x20'+_0xbd59c1+_0x54ff24(0x1d4));return;}const _0x305cfd=auth['currentUser'];if(!_0x305cfd){_0x1ef6b3[_0x54ff24(0x1ae)]='';return;}try{const _0x3efd26=doc(db,'userProfiles',_0x305cfd['uid']),_0x4cd2c4=await getDoc(_0x3efd26);if(!_0x4cd2c4['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x1ef6b3[_0x54ff24(0x1ae)]='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x1eb48a=_0x4cd2c4[_0x54ff24(0x1cf)](),_0x1397de=_0x1eb48a['username'];if(!_0x1397de){_0x1ef6b3['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x386428;switch(_0xbd59c1){case'd1':_0x386428=_0x54ff24(0x1b8);break;case'd2':_0x386428=_0x54ff24(0x1be);break;case'd3':_0x386428='playersD3';break;case'duos':_0x386428='playersDuos';break;default:_0x386428='players';}if(_0xbd59c1==='duos'){const _0x367179=collection(db,_0x386428),_0x144761=query(_0x367179,where('username','==',_0x1397de)),_0xc75662=await getDocs(_0x144761);if(_0xc75662[_0x54ff24(0x1cb)]){_0x1ef6b3['textContent']=_0x54ff24(0x1f1);return;}const _0xdfbc42=_0xc75662['docs'][0x0]['data'](),_0x3ee4d7=parseInt(_0xdfbc42['eloRating'])||0x4b0;if(_0xdfbc42['hasTeam']&&_0xdfbc42['teammate']){_0x1ef6b3['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0xdfbc42['teammate']+_0x54ff24(0x182);return;}const _0x32303b=await getDocs(_0x367179);let _0x3fcca5=null,_0x488a3e=-0x1;_0x32303b['forEach'](_0x1f602d=>{const _0x327f21=_0x54ff24,_0xb805e7=_0x1f602d[_0x327f21(0x1cf)]();if(_0xb805e7['username']===_0x1397de)return;if(_0xb805e7[_0x327f21(0x1b9)])return;const _0x3a0618=parseInt(_0xb805e7['eloRating'])||0x4b0,_0x5ef602=Math['abs'](_0x3a0618-_0x3ee4d7),_0x14ea36=Math[_0x327f21(0x18a)](0x0,0xc8-_0x5ef602);_0x14ea36>_0x488a3e&&(_0x3fcca5=_0xb805e7,_0x488a3e=_0x14ea36);});if(_0x3fcca5){const _0xd3ae5f=parseInt(_0x3fcca5[_0x54ff24(0x1a6)])||0x4b0;let _0x5cbdff='gray';if(_0xd3ae5f>=0x7d0)_0x5cbdff=_0x54ff24(0x1c8);else{if(_0xd3ae5f>=0x708)_0x5cbdff='#FFD700';else{if(_0xd3ae5f>=0x640)_0x5cbdff=_0x54ff24(0x1db);else _0xd3ae5f>=0x578&&(_0x5cbdff='#CD7F32');}}_0x1ef6b3['innerHTML']=_0x54ff24(0x19e)+_0x5cbdff+_0x54ff24(0x19b)+_0x3fcca5['username']+'</span>\x20(ELO:\x20'+_0xd3ae5f+')';}else _0x1ef6b3['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x4373a2=collection(db,_0x386428),_0x5b583b=query(_0x4373a2,where(_0x54ff24(0x1b3),'==',_0x1397de)),_0x5b1bcf=await getDocs(_0x5b583b);if(_0x5b1bcf[_0x54ff24(0x1cb)]){_0x1ef6b3['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0xbd59c1['toUpperCase']()+'\x20ladder';return;}const _0x3b5390=_0x5b1bcf['docs'][0x0][_0x54ff24(0x1cf)](),_0x156f57=parseInt(_0x3b5390[_0x54ff24(0x1a6)])||0x5dc,_0x25025e=await getDocs(_0x4373a2);let _0x27851e=null,_0x28d550=-0x1;const _0xc7ab4c=getPlayerRankName(_0x156f57);_0x25025e[_0x54ff24(0x1e5)](_0x3d609a=>{const _0x377e62=_0x54ff24,_0x4cea0f=_0x3d609a['data']();if(_0x4cea0f['username']===_0x1397de)return;const _0x4c1cb1=parseInt(_0x4cea0f['eloRating'])||0x5dc,_0x213eff=getPlayerRankName(_0x4c1cb1),_0x57cc4d=Math[_0x377e62(0x1e7)](_0x4c1cb1-_0x156f57),_0x302472=0x20,_0xd740ee=0x1/(0x1+Math['pow'](0xa,(_0x4c1cb1-_0x156f57)/0x190)),_0x46b353=Math['round'](_0x302472*(0x1-_0xd740ee));if(_0x46b353<=0x0)return;let _0xe700fe=0x0;const _0x100f79=Math['max'](0x0,0x64-_0x57cc4d*0.5),_0x263ae2=_0x46b353>=0x3&&_0x46b353<=0x8?0x32:_0x46b353>0x0&&_0x46b353<0xf?0x1e:0xa,_0x596e82=_0xc7ab4c===_0x213eff?0x28:0x0;_0xe700fe=_0x100f79+_0x263ae2+_0x596e82,_0xe700fe>_0x28d550&&(_0x27851e=_0x4cea0f,_0x28d550=_0xe700fe);});if(_0x27851e){const _0x1e82c0=parseInt(_0x27851e['eloRating'])||0x5dc;let _0x53050b=_0x54ff24(0x1e2);if(_0x1e82c0>=0x7d0)_0x53050b='#50C878';else{if(_0x1e82c0>=0x708)_0x53050b='#FFD700';else{if(_0x1e82c0>=0x640)_0x53050b='#b9f1fc';else _0x1e82c0>=0x578&&(_0x53050b=_0x54ff24(0x1a3));}}_0x1ef6b3['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x156f57+_0x54ff24(0x1f5)+_0x53050b+';\x22>'+_0x27851e['username']+'</span>';}else _0x1ef6b3[_0x54ff24(0x1c9)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x156f57+')';}catch(_0x505b51){console['error'](_0x54ff24(0x183),_0x505b51),_0x1ef6b3['textContent']=_0x54ff24(0x1c4);}}auth[a27_0x17f417(0x1ee)](_0x29a13a=>{const _0x2a9ea0=a27_0x17f417,_0x295b2f=document['getElementById']('d1-ladder-container')&&document[_0x2a9ea0(0x1f6)]('d1-ladder-container')['style'][_0x2a9ea0(0x197)]!=='none',_0x30b84c=document['getElementById']('d2-ladder-container')&&document['getElementById']('d2-ladder-container')[_0x2a9ea0(0x196)]['display']!=='none',_0x23ddd1=document['getElementById']('d3-ladder-container')&&document['getElementById'](_0x2a9ea0(0x1aa))['style']['display']!==_0x2a9ea0(0x18f),_0x115016=document[_0x2a9ea0(0x1f6)](_0x2a9ea0(0x1d5))&&document['getElementById']('duos-ladder-container')[_0x2a9ea0(0x196)]['display']!=='none',_0x3db225=_0x295b2f?'d1':_0x30b84c?'d2':_0x23ddd1?'d3':_0x115016?'duos':'d1';findBestOpponent(_0x3db225);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x55c68f=document['getElementById']('duos-switch'),_0xb846b7=document['querySelector']('label[for=\x22duos-switch\x22]');_0x55c68f&&_0xb846b7&&(_0x55c68f['addEventListener']('change',async _0x3dbfa1=>{const _0x30a0a4=a27_0xcca4;if(_0x3dbfa1['target']['checked']){const _0xb15b9c=auth?.['currentUser'],_0x621db0=await checkIfUserIsAdmin(_0xb15b9c);if(!_0x621db0){_0x3dbfa1['preventDefault']();const _0x3f3d3b=document[_0x30a0a4(0x1f6)](_0x30a0a4(0x189));return _0x3f3d3b&&(_0x3f3d3b['checked']=!![],_0x3f3d3b['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x58cf0f=>{const _0x2f00c4=a27_0xcca4,_0x39240c=await checkIfUserIsAdmin(_0x58cf0f);!_0x39240c?(_0x55c68f['disabled']=!![],_0xb846b7['style']['opacity']='0.5',_0xb846b7['style']['cursor']='not-allowed',_0xb846b7[_0x2f00c4(0x1ec)]=_0x2f00c4(0x1ad)):(_0x55c68f[_0x2f00c4(0x1b4)]=![],_0xb846b7['style'][_0x2f00c4(0x1ef)]='1',_0xb846b7[_0x2f00c4(0x196)][_0x2f00c4(0x1a2)]='pointer',_0xb846b7[_0x2f00c4(0x1ec)]='');}));});async function checkIfUserIsAdmin(_0x4fe6ca){const _0x1bb0df=a27_0x17f417;if(!_0x4fe6ca)return![];try{const _0x3cde98=['admin@ladder.com','brian2af@outlook.com'];if(_0x4fe6ca['email']&&_0x3cde98[_0x1bb0df(0x1de)](_0x4fe6ca['email'][_0x1bb0df(0x18c)]()))return!![];const _0x4bb265=['userProfiles',_0x1bb0df(0x1b8),_0x1bb0df(0x1be),_0x1bb0df(0x1e3)],_0x4106c6=['admin',_0x1bb0df(0x1cc),'council','creative\x20lead'];for(const _0x17e5b8 of _0x4bb265){try{const _0x1cb6c8=doc(db,_0x17e5b8,_0x4fe6ca['uid']),_0x38e1d4=await getDoc(_0x1cb6c8);if(_0x38e1d4['exists']()){const _0x51c4e1=_0x38e1d4['data'](),_0x441dcc=(_0x51c4e1['roleName']||_0x51c4e1['role']||'')[_0x1bb0df(0x18c)]();if(_0x441dcc&&_0x4106c6['includes'](_0x441dcc))return!![];}}catch(_0x31e5bf){console['warn']('Error\x20checking\x20'+_0x17e5b8+':',_0x31e5bf);}}return![];}catch(_0xead98c){return console[_0x1bb0df(0x181)]('Error\x20checking\x20admin\x20status:',_0xead98c),![];}}function showAdminOnlyMessage(){const _0x1a0af0=a27_0x17f417,_0x324414=document[_0x1a0af0(0x1f6)]('admin-only-message');_0x324414&&_0x324414['remove']();const _0x4c8080=document['createElement']('div');_0x4c8080['id']='admin-only-message',_0x4c8080[_0x1a0af0(0x196)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x4c8080[_0x1a0af0(0x1c9)]=_0x1a0af0(0x187),document['body']['appendChild'](_0x4c8080),setTimeout(()=>{const _0x2c19b3=_0x1a0af0;_0x4c8080[_0x2c19b3(0x1df)]&&_0x4c8080['remove']();},0xbb8);}