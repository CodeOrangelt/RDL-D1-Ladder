const a4_0xd679e2=a4_0x4408;(function(_0x508572,_0x1167a0){const _0x3ce23f=a4_0x4408,_0x389870=_0x508572();while(!![]){try{const _0x9767d4=-parseInt(_0x3ce23f(0x46a))/0x1+parseInt(_0x3ce23f(0x1cd))/0x2*(parseInt(_0x3ce23f(0x1de))/0x3)+-parseInt(_0x3ce23f(0x283))/0x4*(-parseInt(_0x3ce23f(0x4c6))/0x5)+-parseInt(_0x3ce23f(0x317))/0x6*(-parseInt(_0x3ce23f(0x13d))/0x7)+parseInt(_0x3ce23f(0x3dc))/0x8+-parseInt(_0x3ce23f(0x2a9))/0x9+-parseInt(_0x3ce23f(0x26c))/0xa*(parseInt(_0x3ce23f(0x553))/0xb);if(_0x9767d4===_0x1167a0)break;else _0x389870['push'](_0x389870['shift']());}catch(_0x40fe3b){_0x389870['push'](_0x389870['shift']());}}}(a4_0x3ce1,0x97e3b));const a4_0x26e68c=(function(){let _0x1e797d=!![];return function(_0x5ea611,_0xfb6994){const _0x165fc8=_0x1e797d?function(){const _0x25a1ff=a4_0x4408;if(_0xfb6994){const _0x2c146b=_0xfb6994[_0x25a1ff(0x1a3)](_0x5ea611,arguments);return _0xfb6994=null,_0x2c146b;}}:function(){};return _0x1e797d=![],_0x165fc8;};}()),a4_0x41cbb9=a4_0x26e68c(this,function(){const _0x3d4449=a4_0x4408;return a4_0x41cbb9[_0x3d4449(0x354)]()[_0x3d4449(0x32e)](_0x3d4449(0x32b))[_0x3d4449(0x354)]()[_0x3d4449(0x3d6)](a4_0x41cbb9)[_0x3d4449(0x32e)]('(((.+)+)+)+$');});a4_0x41cbb9();const a4_0x3a6dcc=(function(){let _0x4d96b7=!![];return function(_0x21e5a8,_0x100e93){const _0xe84541=_0x4d96b7?function(){const _0x5a2dee=a4_0x4408;if(_0x100e93){const _0x117b9f=_0x100e93[_0x5a2dee(0x1a3)](_0x21e5a8,arguments);return _0x100e93=null,_0x117b9f;}}:function(){};return _0x4d96b7=![],_0xe84541;};}()),a4_0xb78a4f=a4_0x3a6dcc(this,function(){const _0x1a0ee4=a4_0x4408,_0x5fb15d=function(){let _0x5c53ba;try{_0x5c53ba=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x13fa5a){_0x5c53ba=window;}return _0x5c53ba;},_0x57add0=_0x5fb15d(),_0x17e14f=_0x57add0[_0x1a0ee4(0x2e0)]=_0x57add0['console']||{},_0x48b245=[_0x1a0ee4(0x514),_0x1a0ee4(0x1c8),'info',_0x1a0ee4(0x182),'exception',_0x1a0ee4(0x250),_0x1a0ee4(0x17a)];for(let _0x4e256c=0x0;_0x4e256c<_0x48b245[_0x1a0ee4(0x190)];_0x4e256c++){const _0x461be5=a4_0x3a6dcc[_0x1a0ee4(0x3d6)]['prototype']['bind'](a4_0x3a6dcc),_0x5b8463=_0x48b245[_0x4e256c],_0x3b2162=_0x17e14f[_0x5b8463]||_0x461be5;_0x461be5['__proto__']=a4_0x3a6dcc[_0x1a0ee4(0x19e)](a4_0x3a6dcc),_0x461be5[_0x1a0ee4(0x354)]=_0x3b2162['toString'][_0x1a0ee4(0x19e)](_0x3b2162),_0x17e14f[_0x5b8463]=_0x461be5;}});a4_0xb78a4f();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x78c324){const _0x3614a4=a4_0x4408;if(!_0x78c324)return _0x3614a4(0x493);_0x78c324=_0x78c324[_0x3614a4(0x28b)]('#','');_0x78c324[_0x3614a4(0x190)]===0x3&&(_0x78c324=_0x78c324['split']('')[_0x3614a4(0x541)](_0x2b401d=>_0x2b401d+_0x2b401d)['join'](''));if(_0x78c324[_0x3614a4(0x190)]!==0x6)return'#ffffff';const _0x438b50=parseInt(_0x78c324[_0x3614a4(0x1fc)](0x0,0x2),0x10),_0x133788=parseInt(_0x78c324[_0x3614a4(0x1fc)](0x2,0x4),0x10),_0xc6781=parseInt(_0x78c324[_0x3614a4(0x1fc)](0x4,0x6),0x10),_0x6a25a4=(_0x438b50*0x12b+_0x133788*0x24b+_0xc6781*0x72)/0x3e8;return _0x6a25a4>=0x80?_0x3614a4(0x35b):_0x3614a4(0x493);}const DEFAULT_TROPHY_IMAGE=a4_0xd679e2(0x24a),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a4_0xd679e2(0x1bc)](a4_0xd679e2(0x4ac),()=>{const _0x19e0ba=a4_0xd679e2;auth[_0x19e0ba(0x33a)](async _0x28e259=>{const _0x4dd76b=_0x19e0ba;if(!_0x28e259){window['location'][_0x4dd76b(0x2cb)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x1875ee){console['error'](_0x4dd76b(0x2b7),_0x1875ee),showNotification(_0x4dd76b(0x52a),'error');}});});async function getUserTabPermissions(_0x2b8581){const _0xfdf3=a4_0xd679e2;if(!_0x2b8581)return[_0xfdf3(0x50b)];console[_0xfdf3(0x514)](_0xfdf3(0x1d6)+_0x2b8581+_0xfdf3(0x36e));const _0xe4b175=[{'name':_0xfdf3(0x3c2),'displayName':'User\x20Profiles'},{'name':_0xfdf3(0x2ea),'displayName':'D1\x20Players'},{'name':_0xfdf3(0x4e9),'displayName':_0xfdf3(0x468)},{'name':_0xfdf3(0x392),'displayName':'D3\x20Players'},{'name':_0xfdf3(0x3f4),'displayName':_0xfdf3(0x245)}],_0x2a6ccf=auth[_0xfdf3(0x171)];let _0x5f450e=null,_0x6d615f=null;for(const _0x37b3f8 of _0xe4b175){try{if(_0x2a6ccf){const _0x596685=doc(db,_0x37b3f8[_0xfdf3(0x257)],_0x2a6ccf[_0xfdf3(0x353)]),_0xa93120=await getDoc(_0x596685);if(_0xa93120['exists']()){const _0x294bc2=_0xa93120[_0xfdf3(0x17d)]();console[_0xfdf3(0x514)]('Found\x20user\x20in\x20'+_0x37b3f8[_0xfdf3(0x33d)]+_0xfdf3(0x41f),_0x294bc2);const _0x2fced2=(_0x294bc2['roleName']||_0x294bc2[_0xfdf3(0x4f8)]||'')['toLowerCase']();if(_0x2fced2&&_0x2fced2!==_0xfdf3(0x229)){_0x5f450e=_0x2fced2,_0x6d615f=_0x37b3f8['displayName'],console[_0xfdf3(0x514)](_0xfdf3(0x1f4)+_0x5f450e+_0xfdf3(0x361)+_0x6d615f);break;}}}if(!_0x5f450e){const _0x46f051=collection(db,_0x37b3f8['name']),_0x36d8d4=query(_0x46f051,where(_0xfdf3(0x420),'==',_0x2b8581)),_0x1f4e1c=await getDocs(_0x36d8d4);if(!_0x1f4e1c[_0xfdf3(0x294)]){const _0x10d9f2=_0x1f4e1c[_0xfdf3(0x4e3)][0x0][_0xfdf3(0x17d)]();console[_0xfdf3(0x514)](_0xfdf3(0x363)+_0x37b3f8[_0xfdf3(0x33d)]+_0xfdf3(0x423)+_0x2b8581+':',_0x10d9f2);const _0x5c97a3=(_0x10d9f2[_0xfdf3(0x372)]||_0x10d9f2[_0xfdf3(0x4f8)]||'')[_0xfdf3(0x16e)]();if(_0x5c97a3&&_0x5c97a3!==_0xfdf3(0x229)){_0x5f450e=_0x5c97a3,_0x6d615f=_0x37b3f8['displayName'],console['log'](_0xfdf3(0x1f4)+_0x5f450e+_0xfdf3(0x361)+_0x6d615f);break;}}}}catch(_0x3fb740){console[_0xfdf3(0x182)](_0xfdf3(0x2e5)+_0x37b3f8[_0xfdf3(0x33d)]+':',_0x3fb740);}}if(_0x5f450e){console[_0xfdf3(0x514)](_0xfdf3(0x342)+_0x5f450e+_0xfdf3(0x15b)+_0x6d615f+')');const _0x364d7a={'admin':[_0xfdf3(0x50b),_0xfdf3(0x4a8),_0xfdf3(0x205),'manage-articles',_0xfdf3(0x4b9),_0xfdf3(0x3ff),'inactive-players',_0xfdf3(0x32c),_0xfdf3(0x4b9),_0xfdf3(0x261),'manage-highlights',_0xfdf3(0x313),_0xfdf3(0x205),_0xfdf3(0x385),_0xfdf3(0x503),'manage-ribbons'],'owner':[_0xfdf3(0x50b),'manage-players',_0xfdf3(0x205),_0xfdf3(0x12b),'manage-trophies',_0xfdf3(0x3ff),'inactive-players',_0xfdf3(0x32c),_0xfdf3(0x4b9),_0xfdf3(0x261),_0xfdf3(0x37b),'user-roles-section','manage-matches',_0xfdf3(0x385),_0xfdf3(0x503),_0xfdf3(0x16f)],'council':[_0xfdf3(0x50b),_0xfdf3(0x4a8),_0xfdf3(0x205)],'creative\x20lead':['dashboard',_0xfdf3(0x12b),_0xfdf3(0x4b9),'elo-history',_0xfdf3(0x37b)]};if(_0x364d7a[_0x5f450e])return console[_0xfdf3(0x514)](_0xfdf3(0x2d7)+_0x5f450e+'\x27\x20has\x20permissions:',_0x364d7a[_0x5f450e]),_0x364d7a[_0x5f450e];}return console[_0xfdf3(0x514)](_0xfdf3(0x3af)+_0x2b8581+_0xfdf3(0x153)),['dashboard'];}function setupSidebarNavigation(_0x4dac42=[]){const _0x3b02b4=a4_0xd679e2,_0x58667b=document[_0x3b02b4(0x4b2)](_0x3b02b4(0x134)),_0x2f1d4c=document[_0x3b02b4(0x4b2)](_0x3b02b4(0x44c));(!_0x4dac42||_0x4dac42[_0x3b02b4(0x190)]===0x0)&&(_0x4dac42=[_0x3b02b4(0x50b)]);_0x58667b[_0x3b02b4(0x4eb)](_0xa804da=>{const _0x1fd7ea=_0x3b02b4,_0x319f90=_0xa804da['getAttribute'](_0x1fd7ea(0x40f));_0x4dac42[_0x1fd7ea(0x3ae)](_0x319f90)?_0xa804da[_0x1fd7ea(0x273)][_0x1fd7ea(0x563)]=_0x1fd7ea(0x4cc):_0xa804da[_0x1fd7ea(0x273)]['display']='none',_0xa804da[_0x1fd7ea(0x1bc)](_0x1fd7ea(0x130),()=>{const _0x3b7388=_0x1fd7ea,_0x4e24d2=_0xa804da[_0x3b7388(0x216)]('data-section');if(!_0x4dac42[_0x3b7388(0x3ae)](_0x4e24d2)){showNotification(_0x3b7388(0x44e),'error');return;}_0x58667b[_0x3b7388(0x4eb)](_0x5ea540=>_0x5ea540[_0x3b7388(0x14a)][_0x3b7388(0x3de)](_0x3b7388(0x39f))),_0xa804da['classList']['add'](_0x3b7388(0x39f)),_0x2f1d4c[_0x3b7388(0x4eb)](_0x514ba4=>{const _0x402dfd=_0x3b7388;_0x514ba4[_0x402dfd(0x273)]['display']=_0x402dfd(0x229);});const _0x33e0a3=document[_0x3b7388(0x185)](_0x4e24d2);_0x33e0a3&&(_0x33e0a3['style'][_0x3b7388(0x563)]=_0x3b7388(0x1ed),console[_0x3b7388(0x514)](_0x3b7388(0x27c)+_0x4e24d2+_0x3b7388(0x4b4)));});});const _0x4890f3=document[_0x3b02b4(0x388)](_0x3b02b4(0x4d1)+_0x4dac42[0x0]+'\x22]');_0x4890f3&&_0x4890f3[_0x3b02b4(0x130)](),console['log'](_0x3b02b4(0x451));}function setupTabNavigation(){const _0x403d75=a4_0xd679e2,_0x3b0a05=document['querySelectorAll'](_0x403d75(0x222));let _0x5331bb=null,_0x2fff76=new Set();_0x3b0a05[_0x403d75(0x4eb)](_0x528a83=>{const _0x2d7a04=_0x403d75;_0x528a83[_0x2d7a04(0x1bc)]('click',function(){const _0x22ee89=_0x2d7a04,_0x163447=this[_0x22ee89(0x216)]('data-section');if(_0x163447===_0x5331bb)return;_0x5331bb&&(document['getElementById'](_0x5331bb)[_0x22ee89(0x273)][_0x22ee89(0x563)]=_0x22ee89(0x229),_0x3b0a05[_0x22ee89(0x4eb)](_0x5e46a5=>_0x5e46a5[_0x22ee89(0x14a)][_0x22ee89(0x3de)]('active'))),document['getElementById'](_0x163447)[_0x22ee89(0x273)][_0x22ee89(0x563)]=_0x22ee89(0x1ed),this['classList'][_0x22ee89(0x486)](_0x22ee89(0x39f)),_0x5331bb=_0x163447;});});}function loadSectionData(_0x42dc51){return;}async function initializeAdminDashboard(){const _0x158f20=a4_0xd679e2;try{const _0x227ba0=auth[_0x158f20(0x171)],_0x21a286=await getUserTabPermissions(_0x227ba0[_0x158f20(0x420)]);console[_0x158f20(0x514)](_0x158f20(0x482)+_0x227ba0['email']+'\x20allowed\x20tabs:',_0x21a286),window[_0x158f20(0x145)]=_0x21a286,setupSidebarNavigation(_0x21a286),setupLadderSelector(),setupDashboardSection(),_0x21a286[_0x158f20(0x3ae)](_0x158f20(0x4a8))&&setupManagePlayersSection(),_0x21a286['includes'](_0x158f20(0x261))&&setupEloHistorySection(),_0x21a286[_0x158f20(0x3ae)](_0x158f20(0x3ff))&&setupRankControls(),_0x21a286[_0x158f20(0x3ae)](_0x158f20(0x12b))&&setupManageArticlesSection(),_0x21a286[_0x158f20(0x3ae)](_0x158f20(0x313))&&setupUserRolesSection(),_0x21a286['includes'](_0x158f20(0x4b9))&&setupTrophyManagementSection(),_0x21a286['includes'](_0x158f20(0x37b))&&setupManageHighlightsSection(),_0x21a286[_0x158f20(0x3ae)](_0x158f20(0x4b7))&&setupInactivePlayersSection(),_0x21a286[_0x158f20(0x3ae)](_0x158f20(0x205))&&setupManageMatchesSection(),_0x21a286[_0x158f20(0x3ae)](_0x158f20(0x385))&&setupManagePointsSection(),_0x21a286[_0x158f20(0x3ae)](_0x158f20(0x16f))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x21a286);}catch(_0x280211){console[_0x158f20(0x182)](_0x158f20(0x1f2),_0x280211);}}function setupDataLoadButtons(_0x1ce756=[]){const _0x407afc=a4_0xd679e2;(!_0x1ce756||_0x1ce756[_0x407afc(0x190)]===0x0)&&(_0x1ce756=[_0x407afc(0x50b)]);const _0x2ed92d=document[_0x407afc(0x185)]('load-dashboard-data');_0x2ed92d&&_0x2ed92d[_0x407afc(0x1bc)]('click',function(){const _0x4c7595=_0x407afc;this[_0x4c7595(0x14a)][_0x4c7595(0x486)](_0x4c7595(0x489)),this[_0x4c7595(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()[_0x4c7595(0x484)](()=>{const _0x451853=_0x4c7595;this['classList']['remove']('loading'),this[_0x451853(0x319)]=_0x451853(0x1c9);})[_0x4c7595(0x474)](_0x20a811=>{const _0x7a1cec=_0x4c7595;console[_0x7a1cec(0x182)](_0x7a1cec(0x46c),_0x20a811),this[_0x7a1cec(0x14a)]['remove'](_0x7a1cec(0x489)),this[_0x7a1cec(0x319)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x17eece=_0x7a1cec;this[_0x17eece(0x319)]=_0x17eece(0x1c9);},0xbb8);});});if(_0x1ce756[_0x407afc(0x3ae)](_0x407afc(0x4b9))){const _0x2820a3=document[_0x407afc(0x185)]('load-trophies-data');_0x2820a3&&_0x2820a3['addEventListener']('click',function(){const _0x10a05c=_0x407afc;console[_0x10a05c(0x514)](_0x10a05c(0x263)),this[_0x10a05c(0x14a)][_0x10a05c(0x486)]('loading'),this[_0x10a05c(0x319)]=_0x10a05c(0x452),loadTrophyDefinitions()[_0x10a05c(0x484)](()=>{const _0x44f278=_0x10a05c;this[_0x44f278(0x14a)][_0x44f278(0x3de)](_0x44f278(0x489)),this['innerHTML']=_0x44f278(0x4ad);})[_0x10a05c(0x474)](_0x173cbe=>{const _0x4d8f58=_0x10a05c;console[_0x4d8f58(0x182)](_0x4d8f58(0x34d),_0x173cbe),this['classList'][_0x4d8f58(0x3de)](_0x4d8f58(0x489)),this[_0x4d8f58(0x319)]=_0x4d8f58(0x51e),setTimeout(()=>{const _0x21724e=_0x4d8f58;this[_0x21724e(0x319)]=_0x21724e(0x4ad);},0xbb8);});});}if(_0x1ce756[_0x407afc(0x3ae)]('manage-players')){const _0x4eda0c=document['getElementById'](_0x407afc(0x13b));_0x4eda0c&&_0x4eda0c[_0x407afc(0x1bc)](_0x407afc(0x130),function(){const _0x2cd119=_0x407afc;console['log'](_0x2cd119(0x539)),this['classList'][_0x2cd119(0x486)](_0x2cd119(0x489)),this[_0x2cd119(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x2cd119(0x484)](()=>{const _0x29491a=_0x2cd119;this[_0x29491a(0x14a)][_0x29491a(0x3de)](_0x29491a(0x489)),this[_0x29491a(0x319)]=_0x29491a(0x3ee);})[_0x2cd119(0x474)](_0x43f112=>{const _0x824a88=_0x2cd119;console['error'](_0x824a88(0x20e),_0x43f112),this[_0x824a88(0x14a)][_0x824a88(0x3de)](_0x824a88(0x489)),this[_0x824a88(0x319)]=_0x824a88(0x51e),setTimeout(()=>{const _0x4cf07c=_0x824a88;this[_0x4cf07c(0x319)]=_0x4cf07c(0x3ee);},0xbb8);});});}if(_0x1ce756[_0x407afc(0x3ae)]('elo-history')){const _0xe79871=document[_0x407afc(0x185)](_0x407afc(0x3b5));_0xe79871&&_0xe79871[_0x407afc(0x1bc)](_0x407afc(0x130),function(){const _0x383f5e=_0x407afc;console[_0x383f5e(0x514)](_0x383f5e(0x13a)),this[_0x383f5e(0x14a)][_0x383f5e(0x486)](_0x383f5e(0x489)),this[_0x383f5e(0x319)]=_0x383f5e(0x452),loadEloHistory(0x1)[_0x383f5e(0x484)](()=>{const _0x2e0fae=_0x383f5e;this[_0x2e0fae(0x14a)][_0x2e0fae(0x3de)](_0x2e0fae(0x489)),this['innerHTML']=_0x2e0fae(0x1cf);})[_0x383f5e(0x474)](_0x14164c=>{const _0xba1948=_0x383f5e;console['error']('Error\x20loading\x20history:',_0x14164c),this[_0xba1948(0x14a)][_0xba1948(0x3de)]('loading'),this[_0xba1948(0x319)]=_0xba1948(0x51e),setTimeout(()=>{const _0x24a1be=_0xba1948;this[_0x24a1be(0x319)]=_0x24a1be(0x1cf);},0xbb8);});});}if(_0x1ce756[_0x407afc(0x3ae)](_0x407afc(0x12b))){const _0x18249c=document[_0x407afc(0x185)](_0x407afc(0x346));_0x18249c&&_0x18249c[_0x407afc(0x1bc)](_0x407afc(0x130),function(){const _0x4f4a48=_0x407afc;console[_0x4f4a48(0x514)]('Load\x20articles\x20data\x20clicked'),this[_0x4f4a48(0x14a)][_0x4f4a48(0x486)](_0x4f4a48(0x489)),this[_0x4f4a48(0x319)]=_0x4f4a48(0x452),loadArticles()[_0x4f4a48(0x484)](()=>{const _0x3529c8=_0x4f4a48;this[_0x3529c8(0x14a)][_0x3529c8(0x3de)](_0x3529c8(0x489)),this[_0x3529c8(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})[_0x4f4a48(0x474)](_0x4a7552=>{const _0xba3d02=_0x4f4a48;console[_0xba3d02(0x182)](_0xba3d02(0x48f),_0x4a7552),this[_0xba3d02(0x14a)][_0xba3d02(0x3de)](_0xba3d02(0x489)),this[_0xba3d02(0x319)]=_0xba3d02(0x51e),setTimeout(()=>{const _0xf3b81d=_0xba3d02;this[_0xf3b81d(0x319)]=_0xf3b81d(0x2bb);},0xbb8);});});}if(_0x1ce756[_0x407afc(0x3ae)](_0x407afc(0x313))){const _0x2f961b=document['getElementById'](_0x407afc(0x2a6));_0x2f961b&&_0x2f961b[_0x407afc(0x1bc)](_0x407afc(0x130),function(){const _0x5eb2aa=_0x407afc;console[_0x5eb2aa(0x514)]('Load\x20users\x20data\x20clicked'),this['classList'][_0x5eb2aa(0x486)](_0x5eb2aa(0x489)),this[_0x5eb2aa(0x319)]=_0x5eb2aa(0x452),loadUsersWithRoles()[_0x5eb2aa(0x484)](()=>{const _0x4ec3dc=_0x5eb2aa;this[_0x4ec3dc(0x14a)][_0x4ec3dc(0x3de)]('loading'),this[_0x4ec3dc(0x319)]=_0x4ec3dc(0x4ab);})[_0x5eb2aa(0x474)](_0x3e5361=>{const _0x4a41fd=_0x5eb2aa;console[_0x4a41fd(0x182)](_0x4a41fd(0x3c8),_0x3e5361),this['classList'][_0x4a41fd(0x3de)](_0x4a41fd(0x489)),this['innerHTML']=_0x4a41fd(0x51e),setTimeout(()=>{const _0x4cc207=_0x4a41fd;this['innerHTML']=_0x4cc207(0x4ab);},0xbb8);});});}if(_0x1ce756[_0x407afc(0x3ae)](_0x407afc(0x4b7))){const _0xccca05=document[_0x407afc(0x185)](_0x407afc(0x554));_0xccca05&&_0xccca05[_0x407afc(0x1bc)](_0x407afc(0x130),function(){const _0x503f90=_0x407afc;console[_0x503f90(0x514)](_0x503f90(0x1db)),this[_0x503f90(0x14a)][_0x503f90(0x486)]('loading'),this[_0x503f90(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()[_0x503f90(0x484)](()=>{const _0x305e14=_0x503f90;this[_0x305e14(0x14a)][_0x305e14(0x3de)](_0x305e14(0x489)),this[_0x305e14(0x319)]=_0x305e14(0x54b);})[_0x503f90(0x474)](_0x3cd8f6=>{const _0xccba9c=_0x503f90;console[_0xccba9c(0x182)](_0xccba9c(0x475),_0x3cd8f6),this[_0xccba9c(0x14a)][_0xccba9c(0x3de)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x53b3cc=_0xccba9c;this[_0x53b3cc(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x1ce756[_0x407afc(0x3ae)](_0x407afc(0x37b))){const _0x46ab92=document['getElementById'](_0x407afc(0x50f));_0x46ab92&&_0x46ab92[_0x407afc(0x1bc)](_0x407afc(0x130),function(){const _0x406dc0=_0x407afc;console[_0x406dc0(0x514)](_0x406dc0(0x437)),this['classList'][_0x406dc0(0x486)](_0x406dc0(0x489)),this[_0x406dc0(0x319)]=_0x406dc0(0x452),loadHighlightsAdmin()[_0x406dc0(0x484)](()=>{const _0x2cacc2=_0x406dc0;this[_0x2cacc2(0x14a)]['remove'](_0x2cacc2(0x489)),this[_0x2cacc2(0x319)]=_0x2cacc2(0x3f6);})['catch'](_0x3c2617=>{const _0x361849=_0x406dc0;console[_0x361849(0x182)](_0x361849(0x2db),_0x3c2617),this[_0x361849(0x14a)][_0x361849(0x3de)](_0x361849(0x489)),this[_0x361849(0x319)]=_0x361849(0x51e),setTimeout(()=>{const _0x21c4e2=_0x361849;this['innerHTML']=_0x21c4e2(0x3f6);},0xbb8);});});}if(_0x1ce756[_0x407afc(0x3ae)](_0x407afc(0x205))){const _0x2f9f1c=document['getElementById'](_0x407afc(0x409));_0x2f9f1c&&_0x2f9f1c['addEventListener'](_0x407afc(0x130),function(){const _0x2c2d80=_0x407afc;console[_0x2c2d80(0x514)](_0x2c2d80(0x200)),this[_0x2c2d80(0x14a)][_0x2c2d80(0x486)](_0x2c2d80(0x489)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x2c2d80(0x484)](()=>{const _0x39f1dc=_0x2c2d80;this['classList']['remove'](_0x39f1dc(0x489)),this[_0x39f1dc(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})[_0x2c2d80(0x474)](_0xaff33=>{const _0x78632b=_0x2c2d80;console[_0x78632b(0x182)](_0x78632b(0x34e),_0xaff33),this[_0x78632b(0x14a)]['remove'](_0x78632b(0x489)),this['innerHTML']=_0x78632b(0x51e),setTimeout(()=>{const _0x3143f9=_0x78632b;this[_0x3143f9(0x319)]=_0x3143f9(0x40c);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x1ce756[_0x407afc(0x3ae)](_0x407afc(0x16f))){const _0x5ad9d6=document[_0x407afc(0x185)](_0x407afc(0x17f));_0x5ad9d6&&_0x5ad9d6[_0x407afc(0x1bc)]('click',function(){const _0x2cd28c=_0x407afc;console[_0x2cd28c(0x514)](_0x2cd28c(0x197)),this[_0x2cd28c(0x14a)]['add'](_0x2cd28c(0x489)),this[_0x2cd28c(0x319)]=_0x2cd28c(0x452),loadRibbonsData()[_0x2cd28c(0x484)](()=>{const _0x597562=_0x2cd28c;this[_0x597562(0x14a)][_0x597562(0x3de)](_0x597562(0x489)),this[_0x597562(0x319)]=_0x597562(0x4dd);})[_0x2cd28c(0x474)](_0x5d4698=>{const _0x41c137=_0x2cd28c;console[_0x41c137(0x182)](_0x41c137(0x2a7),_0x5d4698),this[_0x41c137(0x14a)][_0x41c137(0x3de)](_0x41c137(0x489)),this[_0x41c137(0x319)]=_0x41c137(0x51e),setTimeout(()=>{const _0x56fe41=_0x41c137;this[_0x56fe41(0x319)]=_0x56fe41(0x4dd);},0xbb8);});});}console[_0x407afc(0x514)](_0x407afc(0x376));}function setupDashboardSection(){const _0x358fe0=a4_0xd679e2;document[_0x358fe0(0x185)](_0x358fe0(0x50d))['textContent']='-',document[_0x358fe0(0x185)](_0x358fe0(0x355))['textContent']='-',document[_0x358fe0(0x185)](_0x358fe0(0x2cd))[_0x358fe0(0x31d)]='-',document['getElementById'](_0x358fe0(0x328))['textContent']='-';}function setupLadderSelector(){const _0x357456=a4_0xd679e2,_0x315d27=document[_0x357456(0x4b2)](_0x357456(0x13f));_0x315d27[_0x357456(0x4eb)](_0x1dfece=>{const _0x34d3c3=_0x357456;_0x1dfece[_0x34d3c3(0x1bc)](_0x34d3c3(0x370),()=>{const _0x14c3fa=_0x34d3c3;currentLadder=_0x1dfece[_0x14c3fa(0x227)],document[_0x14c3fa(0x394)][_0x14c3fa(0x147)](_0x14c3fa(0x1df),currentLadder);const _0x182c4b=document[_0x14c3fa(0x185)]('current-ladder-display');_0x182c4b&&(_0x182c4b[_0x14c3fa(0x31d)]=currentLadder),document[_0x14c3fa(0x185)](_0x14c3fa(0x50d))[_0x14c3fa(0x31d)]='-',document[_0x14c3fa(0x185)](_0x14c3fa(0x355))[_0x14c3fa(0x31d)]='-',document[_0x14c3fa(0x185)](_0x14c3fa(0x2cd))[_0x14c3fa(0x31d)]='-',document[_0x14c3fa(0x185)](_0x14c3fa(0x328))[_0x14c3fa(0x31d)]='-',charts[_0x14c3fa(0x4c9)]&&(charts[_0x14c3fa(0x4c9)]['destroy'](),charts[_0x14c3fa(0x4c9)]=null),charts[_0x14c3fa(0x415)]&&(charts[_0x14c3fa(0x415)][_0x14c3fa(0x3bf)](),charts[_0x14c3fa(0x415)]=null),showNotification('Switched\x20to\x20'+currentLadder+_0x14c3fa(0x122),_0x14c3fa(0x28f));});});const _0x263236=document[_0x357456(0x185)](_0x357456(0x404));_0x263236&&(_0x263236[_0x357456(0x31d)]=currentLadder);}async function loadDashboardOverview(){const _0x43acd8=a4_0xd679e2;try{console[_0x43acd8(0x514)](_0x43acd8(0x217)),document['getElementById'](_0x43acd8(0x50d))[_0x43acd8(0x31d)]='-',document[_0x43acd8(0x185)]('match-count')[_0x43acd8(0x31d)]='-',document['getElementById'](_0x43acd8(0x2cd))['textContent']='-',document[_0x43acd8(0x185)]('rejected-count')['textContent']='-';const _0x108e7d=currentLadder==='D1'?_0x43acd8(0x2ea):currentLadder==='D2'?_0x43acd8(0x4e9):_0x43acd8(0x392),_0x40a3e6=currentLadder==='D1'?_0x43acd8(0x252):currentLadder==='D2'?_0x43acd8(0x4bd):_0x43acd8(0x2da),_0x1d6d66=currentLadder==='D1'?_0x43acd8(0x1a6):currentLadder==='D2'?_0x43acd8(0x369):_0x43acd8(0x46b),_0x483a72=currentLadder==='D1'?_0x43acd8(0x37d):currentLadder==='D2'?_0x43acd8(0x49b):_0x43acd8(0x38d);console[_0x43acd8(0x514)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x108e7d+',\x20'+_0x40a3e6);const _0x4f1902=await getDocs(collection(db,_0x108e7d)),_0x27b406=_0x4f1902[_0x43acd8(0x529)],_0x585b6b=await getDocs(collection(db,_0x40a3e6)),_0x2b59f3=_0x585b6b[_0x43acd8(0x529)],_0x5a874b=await getDocs(collection(db,_0x1d6d66)),_0x394684=_0x5a874b['size'],_0x445543=await getDocs(collection(db,_0x483a72)),_0x3a8dcb=_0x445543[_0x43acd8(0x529)];return document[_0x43acd8(0x185)](_0x43acd8(0x50d))[_0x43acd8(0x31d)]=_0x27b406,document[_0x43acd8(0x185)](_0x43acd8(0x355))['textContent']=_0x2b59f3,document[_0x43acd8(0x185)]('pending-count')[_0x43acd8(0x31d)]=_0x394684,document[_0x43acd8(0x185)](_0x43acd8(0x328))['textContent']=_0x3a8dcb,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x400439){console[_0x43acd8(0x182)](_0x43acd8(0x191),_0x400439);throw _0x400439;}}async function createRankDistributionChart(){const _0x3cad07=a4_0xd679e2;try{const _0x525f6f=collection(db,currentLadder==='D1'?_0x3cad07(0x2ea):_0x3cad07(0x4e9)),_0x2ab0f6=await getDocs(_0x525f6f),_0x177f3d={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x2ab0f6['forEach'](_0x34e80d=>{const _0x334b6b=_0x3cad07,_0x44de38=_0x34e80d[_0x334b6b(0x17d)](),_0x3e4633=_0x44de38[_0x334b6b(0x17c)]||0x4b0;if(_0x3e4633>=0x7d0)_0x177f3d[_0x334b6b(0x22b)]++;else{if(_0x3e4633>=0x708)_0x177f3d['Gold']++;else{if(_0x3e4633>=0x640)_0x177f3d['Silver']++;else{if(_0x3e4633>=0x578)_0x177f3d[_0x334b6b(0x1ca)]++;else _0x177f3d['Unranked']++;}}}});const _0x26a031=document[_0x3cad07(0x185)](_0x3cad07(0x18d));charts[_0x3cad07(0x4c9)]&&charts[_0x3cad07(0x4c9)]['destroy'](),charts['rankDistribution']=new Chart(_0x26a031,{'type':'doughnut','data':{'labels':Object['keys'](_0x177f3d),'datasets':[{'data':Object[_0x3cad07(0x277)](_0x177f3d),'backgroundColor':['#808080','#CD7F32',_0x3cad07(0x3c3),_0x3cad07(0x167),_0x3cad07(0x307)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x3cad07(0x31e),'labels':{'color':_0x3cad07(0x3c4)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x3cad07(0x3c4),'font':{'size':0x10}}}}});}catch(_0x24225e){console['error'](_0x3cad07(0x30e),_0x24225e),document[_0x3cad07(0x185)](_0x3cad07(0x18d))[_0x3cad07(0x319)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x357199=a4_0xd679e2;try{const _0x859b1f=currentLadder==='D1'?_0x357199(0x252):'approvedMatchesD2',_0x5b0990=collection(db,_0x859b1f),_0x4987db=new Date();_0x4987db[_0x357199(0x1ce)](_0x4987db[_0x357199(0x19a)]()-0x7);const _0x12305e=query(_0x5b0990,where(_0x357199(0x142),'>=',_0x4987db),orderBy(_0x357199(0x142),_0x357199(0x564))),_0x62b31=await getDocs(_0x12305e),_0x57e926=['Sunday',_0x357199(0x469),_0x357199(0x42d),_0x357199(0x3fa),_0x357199(0x308),'Friday',_0x357199(0x30c)],_0x1aa7b2=_0x57e926[_0x357199(0x38f)]((_0x3e2044,_0x5b8107)=>({..._0x3e2044,[_0x5b8107]:0x0}),{});_0x62b31[_0x357199(0x4eb)](_0x217a4c=>{const _0x5ab4fb=_0x357199,_0x14ffab=_0x217a4c[_0x5ab4fb(0x17d)]();if(_0x14ffab[_0x5ab4fb(0x142)]){const _0x3a0ba8=_0x57e926[new Date(_0x14ffab[_0x5ab4fb(0x142)]['seconds']*0x3e8)[_0x5ab4fb(0x1c1)]()];_0x1aa7b2[_0x3a0ba8]++;}});const _0x241457=document[_0x357199(0x185)](_0x357199(0x46d));charts['activity']&&charts[_0x357199(0x415)][_0x357199(0x3bf)](),charts[_0x357199(0x415)]=new Chart(_0x241457,{'type':_0x357199(0x249),'data':{'labels':_0x57e926,'datasets':[{'label':'Matches\x20Played','data':_0x57e926[_0x357199(0x541)](_0x1bc864=>_0x1aa7b2[_0x1bc864]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x357199(0x2d0),'borderColor':currentLadder==='D1'?_0x357199(0x413):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x357199(0x3c4)},'grid':{'color':_0x357199(0x3d7)}}},'plugins':{'legend':{'labels':{'color':_0x357199(0x3c4)}},'title':{'display':!![],'text':currentLadder+_0x357199(0x1e0),'color':_0x357199(0x3c4),'font':{'size':0x10}}}}});}catch(_0xe2d04e){console[_0x357199(0x182)](_0x357199(0x4d8),_0xe2d04e),document[_0x357199(0x185)](_0x357199(0x46d))[_0x357199(0x319)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x2fd937=a4_0xd679e2,_0x9a03f2=document['getElementById'](_0x2fd937(0x37a));if(!_0x9a03f2)return;_0x9a03f2[_0x2fd937(0x319)]=_0x2fd937(0x14d);try{let _0x5a01f7='players';if(currentLadder==='D2')_0x5a01f7='playersD2';else currentLadder==='D3'&&(_0x5a01f7=_0x2fd937(0x392));console[_0x2fd937(0x514)](_0x2fd937(0x56a)+_0x5a01f7+'\x20collection...');const _0x486023=collection(db,_0x5a01f7),_0x274e8d=query(_0x486023,orderBy(_0x2fd937(0x17c),_0x2fd937(0x332))),_0x20e7b4=await getDocs(_0x274e8d);if(_0x20e7b4[_0x2fd937(0x294)]){_0x9a03f2['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x9a03f2[_0x2fd937(0x319)]='';let _0x3e21d0=0x1;_0x20e7b4[_0x2fd937(0x4eb)](_0x25e4c3=>{const _0x367e1a=_0x2fd937,_0x18d129=_0x25e4c3[_0x367e1a(0x17d)](),_0x1afdb9=getRankFromElo(_0x18d129[_0x367e1a(0x17c)]||0x4b0),_0x1b296b=getRankStyle(_0x18d129['eloRating']||0x4b0),_0x26b7f1=document['createElement']('tr');_0x26b7f1[_0x367e1a(0x319)]=_0x367e1a(0x368)+_0x3e21d0+_0x367e1a(0x16d)+_0x1b296b[_0x367e1a(0x4b6)]+_0x367e1a(0x46f)+(_0x18d129[_0x367e1a(0x177)]||_0x367e1a(0x398))+_0x367e1a(0x531)+(_0x18d129['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x1b296b[_0x367e1a(0x4b6)]+_0x367e1a(0x487)+_0x1afdb9+_0x367e1a(0x387)+(_0x18d129[_0x367e1a(0x4f4)]||0x0)+'W\x20/\x20'+(_0x18d129[_0x367e1a(0x3d1)]||0x0)+_0x367e1a(0x40b)+_0x25e4c3['id']+_0x367e1a(0x2d5)+_0x25e4c3['id']+_0x367e1a(0x4bf),_0x9a03f2[_0x367e1a(0x180)](_0x26b7f1),_0x3e21d0++;}),setupPlayerActionButtons();}catch(_0x1d109e){console[_0x2fd937(0x182)]('Error\x20loading\x20players:',_0x1d109e),_0x9a03f2[_0x2fd937(0x319)]=_0x2fd937(0x132)+_0x1d109e['message']+_0x2fd937(0x4cf);}}function getRankFromElo(_0x572a2){const _0xa68eed=a4_0xd679e2;if(_0x572a2>=0x7d0)return'Emerald';if(_0x572a2>=0x708)return _0xa68eed(0x574);if(_0x572a2>=0x640)return _0xa68eed(0x1b9);if(_0x572a2>=0x578)return _0xa68eed(0x1ca);return _0xa68eed(0x1ac);}function setupPlayerActionButtons(){const _0x53bf56=a4_0xd679e2;document[_0x53bf56(0x4b2)]('.edit-btn')[_0x53bf56(0x4eb)](_0x2f40cc=>{const _0x2964cb=_0x53bf56;_0x2f40cc['addEventListener'](_0x2964cb(0x130),async _0x1d581a=>{const _0x2818eb=_0x1d581a['currentTarget']['dataset']['id'];openEditPlayerModal(_0x2818eb);});}),document[_0x53bf56(0x4b2)](_0x53bf56(0x573))['forEach'](_0x1bb9bd=>{const _0x16c74f=_0x53bf56;_0x1bb9bd['addEventListener'](_0x16c74f(0x130),async _0x3058de=>{const _0x4deaf5=_0x16c74f,_0x584c8e=_0x3058de[_0x4deaf5(0x2b5)]['dataset']['id'];confirmDeletePlayer(_0x584c8e);});});}function a4_0x4408(_0x188098,_0xd9af94){const _0x446ea2=a4_0x3ce1();return a4_0x4408=function(_0xb78a4f,_0x3a6dcc){_0xb78a4f=_0xb78a4f-0x121;let _0x56bfb2=_0x446ea2[_0xb78a4f];return _0x56bfb2;},a4_0x4408(_0x188098,_0xd9af94);}async function openEditPlayerModal(_0x42586e){const _0x32a6c1=a4_0xd679e2;try{const _0x3f9ebe=currentLadder==='D1'?'players':'playersD2',_0x1dbda8=doc(db,_0x3f9ebe,_0x42586e),_0xdb0194=await getDoc(_0x1dbda8);if(!_0xdb0194[_0x32a6c1(0x2c2)]()){showNotification('Player\x20not\x20found','error');return;}const _0x3a0e8d=_0xdb0194['data'](),_0x5c97a8=document['getElementById'](_0x32a6c1(0x30a)),_0x378803=document[_0x32a6c1(0x185)]('edit-username'),_0x2dea19=document[_0x32a6c1(0x185)](_0x32a6c1(0x2b4)),_0x2d330e=document[_0x32a6c1(0x185)](_0x32a6c1(0x2c5)),_0xab6dc4=document[_0x32a6c1(0x185)](_0x32a6c1(0x569));_0x378803[_0x32a6c1(0x227)]=_0x3a0e8d[_0x32a6c1(0x177)]||'',_0x2dea19[_0x32a6c1(0x227)]=_0x3a0e8d['eloRating']||0x4b0,_0x2d330e[_0x32a6c1(0x227)]=_0x3a0e8d['wins']||0x0,_0xab6dc4['value']=_0x3a0e8d['losses']||0x0,_0x5c97a8[_0x32a6c1(0x55c)][_0x32a6c1(0x238)]=_0x42586e,_0x5c97a8['classList'][_0x32a6c1(0x486)](_0x32a6c1(0x39f));}catch(_0xb47d3f){console[_0x32a6c1(0x182)]('Error\x20opening\x20edit\x20modal:',_0xb47d3f),showNotification(_0x32a6c1(0x410),'error');}}async function saveEditedPlayer(){const _0x243067=a4_0xd679e2;try{const _0x552e58=document[_0x243067(0x185)]('edit-player-modal'),_0x569761=_0x552e58[_0x243067(0x55c)][_0x243067(0x238)];if(!_0x569761){showNotification('No\x20player\x20selected','error');return;}const _0xa14581=document[_0x243067(0x185)](_0x243067(0x2d9)),_0x559a10=document[_0x243067(0x185)](_0x243067(0x2b4)),_0x1162ba=document[_0x243067(0x185)]('edit-wins'),_0x575273=document[_0x243067(0x185)]('edit-losses'),_0x429a64=_0xa14581['value']['trim'](),_0x460609=parseInt(_0x559a10[_0x243067(0x227)]),_0x47bc61=parseInt(_0x1162ba[_0x243067(0x227)]),_0x5b0ff8=parseInt(_0x575273[_0x243067(0x227)]);if(!_0x429a64||isNaN(_0x460609)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x243067(0x182));return;}const _0x23a242=currentLadder==='D1'?_0x243067(0x2ea):'playersD2',_0x40a132=doc(db,_0x23a242,_0x569761),_0x133188=await getDoc(_0x40a132),_0x42f86c=_0x133188[_0x243067(0x2c2)]()?_0x133188[_0x243067(0x17d)]():{},_0x274d6d=_0x42f86c[_0x243067(0x17c)]||0x4b0;await updateDoc(_0x40a132,{'username':_0x429a64,'eloRating':_0x460609,'wins':_0x47bc61||0x0,'losses':_0x5b0ff8||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x243067(0x420)]});if(_0x460609!==_0x274d6d){const _0x308e88=currentLadder==='D1'?_0x243067(0x4c8):_0x243067(0x27b);await addDoc(collection(db,_0x308e88),{'player':_0x429a64,'previousElo':_0x274d6d,'newElo':_0x460609,'timestamp':serverTimestamp(),'type':_0x243067(0x1cc),'modifiedBy':auth['currentUser'][_0x243067(0x420)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x243067(0x309),_0x243067(0x16c));}catch(_0x5a6409){console['error']('Error\x20updating\x20player:',_0x5a6409),showNotification(_0x243067(0x1d5)+_0x5a6409['message'],_0x243067(0x182));}}function closeEditPlayerModal(){const _0x384356=a4_0xd679e2,_0x16a303=document['getElementById']('edit-player-modal');_0x16a303[_0x384356(0x14a)][_0x384356(0x3de)](_0x384356(0x39f)),_0x16a303[_0x384356(0x55c)][_0x384356(0x238)]='';}async function confirmDeletePlayer(_0x1c3c47){const _0x383ea9=a4_0xd679e2;if(confirm(_0x383ea9(0x121)))try{const _0x317905=currentLadder==='D1'?_0x383ea9(0x2ea):'playersD2';await deleteDoc(doc(db,_0x317905,_0x1c3c47)),loadPlayersData(),showNotification(_0x383ea9(0x2ec),_0x383ea9(0x16c));}catch(_0x56dcef){console[_0x383ea9(0x182)]('Error\x20deleting\x20player:',_0x56dcef),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x56dcef[_0x383ea9(0x426)],_0x383ea9(0x182));}}async function setupManagePlayersSection(){const _0x48eead=a4_0xd679e2,_0x53df11=document['getElementById']('add-player-form');_0x53df11&&_0x53df11[_0x48eead(0x1bc)]('submit',async _0x5e6858=>{_0x5e6858['preventDefault'](),await addNewPlayer();});const _0x1b5f1e=document['getElementById'](_0x48eead(0x2bc));_0x1b5f1e&&_0x1b5f1e[_0x48eead(0x1bc)](_0x48eead(0x2e7),debounce(filterPlayerTable,0x12c));const _0x21bf5d=document[_0x48eead(0x185)](_0x48eead(0x47a));_0x21bf5d&&_0x21bf5d[_0x48eead(0x1bc)](_0x48eead(0x130),saveEditedPlayer);const _0x2bcfb8=document['getElementById']('cancel-edit-btn');_0x2bcfb8&&_0x2bcfb8[_0x48eead(0x1bc)](_0x48eead(0x130),closeEditPlayerModal);const _0x2121a2=document[_0x48eead(0x185)](_0x48eead(0x30a));_0x2121a2&&_0x2121a2[_0x48eead(0x1bc)](_0x48eead(0x130),_0x2cbedf=>{const _0x32af2a=_0x48eead;_0x2cbedf[_0x32af2a(0x2a8)]===_0x2121a2&&closeEditPlayerModal();});const _0x50e71a=document[_0x48eead(0x185)](_0x48eead(0x2e2));_0x50e71a&&_0x50e71a['addEventListener']('change',()=>{const _0x5e095a=_0x48eead;currentLadder=_0x50e71a[_0x5e095a(0x227)],loadPlayersData();});}async function addNewPlayer(){const _0x2cb7d0=a4_0xd679e2;try{const _0x2ee701=document[_0x2cb7d0(0x185)](_0x2cb7d0(0x3e0)),_0x1dd545=document['getElementById'](_0x2cb7d0(0x1e6)),_0x190765=_0x2ee701[_0x2cb7d0(0x227)][_0x2cb7d0(0x3c6)](),_0x4c3751=parseInt(_0x1dd545[_0x2cb7d0(0x227)])||0x4b0;if(!_0x190765){alert(_0x2cb7d0(0x3a7));return;}console[_0x2cb7d0(0x514)](_0x2cb7d0(0x4ed)+_0x190765+'\x20with\x20ELO\x20'+_0x4c3751+_0x2cb7d0(0x3b7)+currentLadder+_0x2cb7d0(0x2f0));let _0x1b418c=_0x2cb7d0(0x2ea),_0x43378c=_0x2cb7d0(0x4c8);if(currentLadder==='D2')_0x1b418c='playersD2',_0x43378c=_0x2cb7d0(0x27b);else currentLadder==='D3'&&(_0x1b418c=_0x2cb7d0(0x392),_0x43378c='eloHistoryD3');const _0x23181e=query(collection(db,_0x1b418c),where(_0x2cb7d0(0x177),'==',_0x190765)),_0x13dab3=await getDocs(_0x23181e);if(!_0x13dab3[_0x2cb7d0(0x294)]){alert(_0x2cb7d0(0x4c5)+_0x190765+_0x2cb7d0(0x525)+currentLadder+'\x20ladder');return;}const _0x3203e2=auth[_0x2cb7d0(0x171)],_0xa038e8={'username':_0x190765,'eloRating':_0x4c3751,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x3203e2?_0x3203e2[_0x2cb7d0(0x420)]:_0x2cb7d0(0x3a3),'gameMode':currentLadder};await addDoc(collection(db,_0x1b418c),_0xa038e8),await addDoc(collection(db,_0x43378c),{'player':_0x190765,'previousElo':0x4b0,'newElo':_0x4c3751,'timestamp':serverTimestamp(),'type':_0x2cb7d0(0x316),'placedBy':_0x3203e2?_0x3203e2['email']:_0x2cb7d0(0x3a3),'gameMode':currentLadder}),_0x2ee701[_0x2cb7d0(0x227)]='',_0x1dd545[_0x2cb7d0(0x227)]='1200',alert(_0x2cb7d0(0x56c)+_0x190765+_0x2cb7d0(0x549)+currentLadder+_0x2cb7d0(0x158)),loadPlayersData();}catch(_0xf155dc){console['error']('Error\x20adding\x20player:',_0xf155dc),alert(_0x2cb7d0(0x3fb)+_0xf155dc['message']);}}document['addEventListener'](a4_0xd679e2(0x4ac),()=>{const _0x120e84=a4_0xd679e2,_0x6385eb=document[_0x120e84(0x185)](_0x120e84(0x322));_0x6385eb&&_0x6385eb[_0x120e84(0x1bc)](_0x120e84(0x44d),_0x25285a=>{const _0x527ec2=_0x120e84;_0x25285a[_0x527ec2(0x2c3)](),addNewPlayer();});});function filterPlayerTable(){const _0x47fa1c=a4_0xd679e2,_0x28623d=document[_0x47fa1c(0x185)](_0x47fa1c(0x2bc))[_0x47fa1c(0x227)][_0x47fa1c(0x16e)](),_0x387fa9=document[_0x47fa1c(0x4b2)](_0x47fa1c(0x256));let _0x541dec=0x0;_0x387fa9[_0x47fa1c(0x4eb)](_0x3e6c33=>{const _0x409209=_0x47fa1c,_0x3bfa00=_0x3e6c33[_0x409209(0x388)](_0x409209(0x49a))?.['textContent'][_0x409209(0x16e)]()||'';_0x3bfa00[_0x409209(0x3ae)](_0x28623d)?(_0x3e6c33[_0x409209(0x273)]['display']='',_0x541dec++):_0x3e6c33[_0x409209(0x273)][_0x409209(0x563)]=_0x409209(0x229);});const _0x397533=document[_0x47fa1c(0x185)](_0x47fa1c(0x264));_0x397533&&(_0x541dec===0x0&&_0x28623d!==''?_0x397533['style']['display']=_0x47fa1c(0x1ed):_0x397533[_0x47fa1c(0x273)][_0x47fa1c(0x563)]=_0x47fa1c(0x229));}function debounce(_0x17f888,_0x10893b){let _0x13bf39;return function(..._0x2eafd2){const _0x2ceaa5=a4_0x4408;clearTimeout(_0x13bf39),_0x13bf39=setTimeout(()=>_0x17f888[_0x2ceaa5(0x1a3)](this,_0x2eafd2),_0x10893b);};}async function loadEloHistory(_0x1b1af8=0x1){const _0x36f569=a4_0xd679e2,_0x111edd=document[_0x36f569(0x185)]('elo-history-table-body'),_0x4806ae=currentLadder[_0x36f569(0x16e)]();if(!_0x111edd)return;_0x111edd[_0x36f569(0x319)]=_0x36f569(0x47f);try{const _0x55126c=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x36f569(0x27b):_0x36f569(0x561),_0x3770f1=collection(db,_0x55126c);let _0x46bf19;if(_0x1b1af8>eloHistoryPagination[_0x4806ae]['page']&&eloHistoryPagination[_0x4806ae][_0x36f569(0x338)])_0x46bf19=query(_0x3770f1,orderBy(_0x36f569(0x418),_0x36f569(0x332)),startAfter(eloHistoryPagination[_0x4806ae][_0x36f569(0x338)]),limit(PAGE_SIZE));else _0x1b1af8<eloHistoryPagination[_0x4806ae][_0x36f569(0x218)]&&eloHistoryPagination[_0x4806ae][_0x36f569(0x18b)]?_0x46bf19=query(_0x3770f1,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x4806ae]['firstVisible']),limitToLast(PAGE_SIZE)):_0x46bf19=query(_0x3770f1,orderBy(_0x36f569(0x418),_0x36f569(0x332)),limit(PAGE_SIZE));const _0x309349=await getDocs(_0x46bf19);if(_0x309349[_0x36f569(0x294)]){_0x111edd[_0x36f569(0x319)]=_0x36f569(0x477),document[_0x36f569(0x185)](_0x4806ae+_0x36f569(0x265))[_0x36f569(0x31d)]=_0x36f569(0x187);return;}eloHistoryPagination[_0x4806ae][_0x36f569(0x218)]=_0x1b1af8,eloHistoryPagination[_0x4806ae][_0x36f569(0x18b)]=_0x309349[_0x36f569(0x4e3)][0x0],eloHistoryPagination[_0x4806ae][_0x36f569(0x338)]=_0x309349[_0x36f569(0x4e3)][_0x309349[_0x36f569(0x4e3)][_0x36f569(0x190)]-0x1];const _0x16a8da=new Map();_0x111edd['innerHTML']='';const _0x402353=async _0x3c594b=>{const _0x208284=_0x36f569;if(typeof _0x3c594b!==_0x208284(0x4b1)||_0x3c594b[_0x208284(0x190)]<0x14||/[^a-zA-Z0-9-_]/['test'](_0x3c594b))return _0x3c594b;if(_0x16a8da[_0x208284(0x175)](_0x3c594b))return _0x16a8da[_0x208284(0x211)](_0x3c594b);try{for(const _0x4eafeb of[_0x208284(0x2ea),_0x208284(0x4e9),_0x208284(0x392),'nonParticipants']){const _0x151688=await getDoc(doc(db,_0x4eafeb,_0x3c594b));if(_0x151688[_0x208284(0x2c2)]()&&_0x151688[_0x208284(0x17d)]()[_0x208284(0x177)]){const _0x1d09d7=_0x151688[_0x208284(0x17d)]()[_0x208284(0x177)];return _0x16a8da[_0x208284(0x3ea)](_0x3c594b,_0x1d09d7),_0x1d09d7;}}return _0x3c594b;}catch(_0x3ba2c9){return console['warn'](_0x208284(0x527)+_0x3c594b+':',_0x3ba2c9),_0x3c594b;}};for(const _0x24a8c1 of _0x309349[_0x36f569(0x4e3)]){const _0x378170=_0x24a8c1['data'](),_0xd3dada=document[_0x36f569(0x54a)]('tr'),_0x47e6ad=_0x378170[_0x36f569(0x418)]?new Date(_0x378170['timestamp'][_0x36f569(0x23a)]*0x3e8)[_0x36f569(0x433)]():'N/A',_0x174012=_0x378170[_0x36f569(0x297)]-_0x378170[_0x36f569(0x2d6)],_0x1b8cf9=_0x174012>0x0?'positive-change':_0x174012<0x0?_0x36f569(0x488):'',_0x350ffe=_0x174012>0x0?'+':'',_0x52959f=_0x378170[_0x36f569(0x243)]||_0x378170[_0x36f569(0x177)]||_0x378170['userId']||'N/A',_0x48ad25=await _0x402353(_0x52959f);_0xd3dada[_0x36f569(0x319)]=_0x36f569(0x4c2)+_0x47e6ad+_0x36f569(0x1f8)+_0x48ad25+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x378170[_0x36f569(0x2d6)]||_0x36f569(0x1a4))+_0x36f569(0x47c)+(_0x378170[_0x36f569(0x297)]||_0x36f569(0x1a4))+_0x36f569(0x339)+_0x1b8cf9+'\x22>'+_0x350ffe+_0x174012+_0x36f569(0x4c0)+formatHistoryType(_0x378170[_0x36f569(0x41c)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x378170[_0x36f569(0x26f)]||_0x378170[_0x36f569(0x496)]||_0x378170[_0x36f569(0x232)]||_0x36f569(0x419))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x111edd[_0x36f569(0x180)](_0xd3dada);}document[_0x36f569(0x185)](_0x4806ae+_0x36f569(0x265))[_0x36f569(0x31d)]=_0x36f569(0x4af)+_0x1b1af8;const _0x458ea0=document[_0x36f569(0x185)](_0x4806ae+_0x36f569(0x3f5)),_0x4b59d7=document[_0x36f569(0x185)](_0x4806ae+_0x36f569(0x2fa));if(_0x458ea0)_0x458ea0['disabled']=_0x1b1af8<=0x1;const _0x41fef1=query(_0x3770f1,orderBy(_0x36f569(0x418),_0x36f569(0x332)),startAfter(eloHistoryPagination[_0x4806ae]['lastVisible']),limit(0x1)),_0x249376=await getDocs(_0x41fef1);if(_0x4b59d7)_0x4b59d7['disabled']=_0x249376[_0x36f569(0x294)];}catch(_0x5bf213){console[_0x36f569(0x182)](_0x36f569(0x43c),_0x5bf213),_0x111edd[_0x36f569(0x319)]=_0x36f569(0x4e0)+_0x5bf213[_0x36f569(0x426)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x5db260){const _0xe38627=a4_0xd679e2;switch(_0x5db260){case _0xe38627(0x35a):return _0xe38627(0x1ee);case _0xe38627(0x4f5):return'Promotion';case _0xe38627(0x148):return'Demotion';case _0xe38627(0x1cc):return _0xe38627(0x325);case _0xe38627(0x316):return _0xe38627(0x3e4);default:return _0x5db260||_0xe38627(0x398);}}function setupEloHistorySection(){const _0x5d327f=a4_0xd679e2;document[_0x5d327f(0x185)]('d1-prev-page')[_0x5d327f(0x1bc)](_0x5d327f(0x130),()=>{const _0x23112d=_0x5d327f;loadEloHistory(eloHistoryPagination['d1'][_0x23112d(0x218)]-0x1);}),document[_0x5d327f(0x185)]('d1-next-page')[_0x5d327f(0x1bc)](_0x5d327f(0x130),()=>{const _0x28a21c=_0x5d327f;loadEloHistory(eloHistoryPagination['d1'][_0x28a21c(0x218)]+0x1);}),document[_0x5d327f(0x185)](_0x5d327f(0x462))['addEventListener']('click',()=>{const _0x55b8ae=_0x5d327f;loadEloHistory(eloHistoryPagination['d2'][_0x55b8ae(0x218)]-0x1);}),document[_0x5d327f(0x185)](_0x5d327f(0x53d))[_0x5d327f(0x1bc)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x3a894e=document[_0x5d327f(0x185)](_0x5d327f(0x26a)),_0x30bb02=document['getElementById'](_0x5d327f(0x289));_0x3a894e&&_0x3a894e[_0x5d327f(0x1bc)]('click',()=>{const _0x4d7538=_0x5d327f;loadEloHistory(eloHistoryPagination['d3'][_0x4d7538(0x218)]-0x1);});_0x30bb02&&_0x30bb02[_0x5d327f(0x1bc)]('click',()=>{const _0x4e5ebb=_0x5d327f;loadEloHistory(eloHistoryPagination['d3'][_0x4e5ebb(0x218)]+0x1);});const _0x5949ee=document[_0x5d327f(0x185)](_0x5d327f(0x41d));_0x5949ee&&_0x5949ee['addEventListener'](_0x5d327f(0x2e7),debounce(filterEloHistoryTable,0x12c));const _0x53b96a=document[_0x5d327f(0x185)](_0x5d327f(0x1b6));_0x53b96a&&_0x53b96a[_0x5d327f(0x1bc)](_0x5d327f(0x370),applyEloHistoryFilters);const _0x2782f9=document['getElementById']('reset-history-filters');_0x2782f9&&_0x2782f9[_0x5d327f(0x1bc)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x54f688=a4_0xd679e2,_0x10fe1d=document['getElementById'](_0x54f688(0x41d))[_0x54f688(0x227)]['toLowerCase'](),_0x47c4b9=document['querySelectorAll'](_0x54f688(0x23b));let _0x3febd9=0x0;_0x47c4b9[_0x54f688(0x4eb)](_0x5b8bd3=>{const _0x5acf83=_0x54f688;if(_0x5b8bd3[_0x5acf83(0x14a)][_0x5acf83(0x4d3)]('loading-cell')||_0x5b8bd3[_0x5acf83(0x14a)][_0x5acf83(0x4d3)](_0x5acf83(0x1f1))||_0x5b8bd3['classList'][_0x5acf83(0x4d3)]('error-state'))return;const _0x1d6f8b=_0x5b8bd3[_0x5acf83(0x388)]('.player')?.[_0x5acf83(0x31d)][_0x5acf83(0x16e)]()||'',_0x39da98=_0x5b8bd3[_0x5acf83(0x388)](_0x5acf83(0x535))?.[_0x5acf83(0x31d)][_0x5acf83(0x16e)]()||'',_0x4916e1=_0x5b8bd3['querySelector'](_0x5acf83(0x291))?.['textContent']['toLowerCase']()||'';_0x1d6f8b['includes'](_0x10fe1d)||_0x39da98[_0x5acf83(0x3ae)](_0x10fe1d)||_0x4916e1[_0x5acf83(0x3ae)](_0x10fe1d)?(_0x5b8bd3[_0x5acf83(0x273)]['display']='',_0x3febd9++):_0x5b8bd3[_0x5acf83(0x273)][_0x5acf83(0x563)]=_0x5acf83(0x229);});}async function applyEloHistoryFilters(){const _0x14cb98=a4_0xd679e2,_0x4525f2=document[_0x14cb98(0x185)](_0x14cb98(0x292))['value'],_0x77c748=document['getElementById']('history-end-date')['value'],_0xa3d754=document[_0x14cb98(0x185)](_0x14cb98(0x1b6))[_0x14cb98(0x227)],_0x483038=currentLadder[_0x14cb98(0x16e)]();eloHistoryPagination[_0x483038]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x35fd8a=document[_0x14cb98(0x185)](_0x14cb98(0x448));_0x35fd8a[_0x14cb98(0x319)]=_0x14cb98(0x390);try{const _0x42a501=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x5d1955=collection(db,_0x42a501);let _0x5d63e8=[orderBy(_0x14cb98(0x418),_0x14cb98(0x332))];if(_0x4525f2){const _0x1600f8=new Date(_0x4525f2);_0x1600f8[_0x14cb98(0x44a)](0x0,0x0,0x0,0x0),_0x5d63e8[_0x14cb98(0x3a6)](where(_0x14cb98(0x418),'>=',_0x1600f8));}if(_0x77c748){const _0x5b7a78=new Date(_0x77c748);_0x5b7a78[_0x14cb98(0x44a)](0x17,0x3b,0x3b,0x3e7),_0x5d63e8[_0x14cb98(0x3a6)](where('timestamp','<=',_0x5b7a78));}_0xa3d754&&_0xa3d754!=='all'&&_0x5d63e8['push'](where(_0x14cb98(0x41c),'==',_0xa3d754));_0x5d63e8[_0x14cb98(0x3a6)](limit(PAGE_SIZE));const _0x249287=query(_0x5d1955,..._0x5d63e8),_0xd75c43=await getDocs(_0x249287);!_0xd75c43[_0x14cb98(0x294)]&&(eloHistoryPagination[_0x483038][_0x14cb98(0x18b)]=_0xd75c43['docs'][0x0],eloHistoryPagination[_0x483038]['lastVisible']=_0xd75c43[_0x14cb98(0x4e3)][_0xd75c43[_0x14cb98(0x4e3)][_0x14cb98(0x190)]-0x1]);_0x35fd8a['innerHTML']='';if(_0xd75c43[_0x14cb98(0x294)]){_0x35fd8a[_0x14cb98(0x319)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0xd75c43['forEach'](_0x23d338=>{const _0x5dee7f=_0x14cb98,_0x52e4b8=_0x23d338[_0x5dee7f(0x17d)](),_0x57d5cc=document['createElement']('tr'),_0x52bb45=_0x52e4b8[_0x5dee7f(0x418)]?new Date(_0x52e4b8[_0x5dee7f(0x418)][_0x5dee7f(0x23a)]*0x3e8)[_0x5dee7f(0x433)]():_0x5dee7f(0x1a4),_0x3c2d3a=_0x52e4b8[_0x5dee7f(0x297)]-_0x52e4b8['previousElo'],_0x3a4cc3=_0x3c2d3a>0x0?_0x5dee7f(0x2d1):_0x3c2d3a<0x0?_0x5dee7f(0x488):'',_0x2cd3cf=_0x3c2d3a>0x0?'+':'',_0x2b1c7e=_0x52e4b8[_0x5dee7f(0x243)]||_0x52e4b8[_0x5dee7f(0x177)]||_0x52e4b8[_0x5dee7f(0x54e)]||'N/A';_0x57d5cc[_0x5dee7f(0x319)]=_0x5dee7f(0x4c2)+_0x52bb45+_0x5dee7f(0x1f8)+_0x2b1c7e+_0x5dee7f(0x43b)+(_0x52e4b8[_0x5dee7f(0x2d6)]||_0x5dee7f(0x1a4))+_0x5dee7f(0x47c)+(_0x52e4b8[_0x5dee7f(0x297)]||_0x5dee7f(0x1a4))+_0x5dee7f(0x339)+_0x3a4cc3+'\x22>'+_0x2cd3cf+_0x3c2d3a+_0x5dee7f(0x4c0)+formatHistoryType(_0x52e4b8[_0x5dee7f(0x41c)])+_0x5dee7f(0x28e)+(_0x52e4b8[_0x5dee7f(0x26f)]||_0x52e4b8['promotedBy']||_0x52e4b8['demotedBy']||_0x5dee7f(0x419))+_0x5dee7f(0x233),_0x35fd8a['appendChild'](_0x57d5cc);}),document[_0x14cb98(0x185)](_0x483038+'-page-indicator')[_0x14cb98(0x31d)]='Page\x201';}catch(_0x1e9e6a){console[_0x14cb98(0x182)](_0x14cb98(0x1c4),_0x1e9e6a),_0x35fd8a[_0x14cb98(0x319)]=_0x14cb98(0x358)+_0x1e9e6a[_0x14cb98(0x426)]+_0x14cb98(0x4cf);}}function resetEloHistoryFilters(){const _0x4e7bb9=a4_0xd679e2;document[_0x4e7bb9(0x185)](_0x4e7bb9(0x292))[_0x4e7bb9(0x227)]='',document['getElementById'](_0x4e7bb9(0x300))[_0x4e7bb9(0x227)]='',document[_0x4e7bb9(0x185)](_0x4e7bb9(0x1b6))['value']=_0x4e7bb9(0x33e),document[_0x4e7bb9(0x185)](_0x4e7bb9(0x41d))[_0x4e7bb9(0x227)]='';const _0x266d44=currentLadder[_0x4e7bb9(0x16e)]();eloHistoryPagination[_0x266d44]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x13f1f1=a4_0xd679e2,_0x4ab0e1=document[_0x13f1f1(0x185)]('promote-player-btn'),_0x4b1e26=document['getElementById']('promote-modal'),_0x14f3ac=document['getElementById']('promote-form');_0x4ab0e1&&_0x4b1e26&&_0x14f3ac&&(_0x4ab0e1[_0x13f1f1(0x1bc)](_0x13f1f1(0x130),()=>{const _0x27f563=_0x13f1f1;_0x4b1e26['classList'][_0x27f563(0x486)](_0x27f563(0x39f));}),_0x4b1e26[_0x13f1f1(0x1bc)](_0x13f1f1(0x130),_0x162d45=>{const _0x2308a0=_0x13f1f1;_0x162d45[_0x2308a0(0x2a8)]===_0x4b1e26&&_0x4b1e26[_0x2308a0(0x14a)][_0x2308a0(0x3de)](_0x2308a0(0x39f));}),_0x14f3ac[_0x13f1f1(0x1bc)](_0x13f1f1(0x44d),async _0x3717cd=>{const _0x90a9a0=_0x13f1f1;_0x3717cd[_0x90a9a0(0x2c3)]();const _0x1c3df9=document['getElementById'](_0x90a9a0(0x3cb)),_0x46e067=document['getElementById'](_0x90a9a0(0x524)),_0x511a6f=_0x1c3df9['value'][_0x90a9a0(0x3c6)](),_0xa24542=_0x46e067[_0x90a9a0(0x227)];if(!_0x511a6f){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x511a6f,_0xa24542),_0x4b1e26['classList'][_0x90a9a0(0x3de)](_0x90a9a0(0x39f)),_0x1c3df9[_0x90a9a0(0x227)]='';}catch(_0x1d11e3){showNotification(_0x1d11e3[_0x90a9a0(0x426)],_0x90a9a0(0x182));}}),document[_0x13f1f1(0x185)]('cancel-promote-btn')[_0x13f1f1(0x1bc)]('click',()=>{const _0x9b453=_0x13f1f1;_0x4b1e26['classList'][_0x9b453(0x3de)](_0x9b453(0x39f));}));const _0x2c532e=document[_0x13f1f1(0x185)](_0x13f1f1(0x336)),_0x2bf53b=document[_0x13f1f1(0x185)](_0x13f1f1(0x4e4)),_0x3ceb2b=document[_0x13f1f1(0x185)](_0x13f1f1(0x562));_0x2c532e&&_0x2bf53b&&_0x3ceb2b&&(_0x2c532e[_0x13f1f1(0x1bc)]('click',()=>{const _0x552337=_0x13f1f1;_0x2bf53b[_0x552337(0x14a)]['add'](_0x552337(0x39f));}),_0x2bf53b[_0x13f1f1(0x1bc)](_0x13f1f1(0x130),_0x342b6c=>{const _0x525e30=_0x13f1f1;_0x342b6c[_0x525e30(0x2a8)]===_0x2bf53b&&_0x2bf53b[_0x525e30(0x14a)][_0x525e30(0x3de)](_0x525e30(0x39f));}),_0x3ceb2b['addEventListener'](_0x13f1f1(0x44d),async _0x284647=>{const _0x5be68e=_0x13f1f1;_0x284647[_0x5be68e(0x2c3)]();const _0x3a2c34=document[_0x5be68e(0x185)](_0x5be68e(0x456)),_0x2c2996=document['getElementById'](_0x5be68e(0x41a)),_0xa2c961=_0x3a2c34['value'][_0x5be68e(0x3c6)](),_0x54c58f=_0x2c2996['value'];if(!_0xa2c961){alert(_0x5be68e(0x2f5));return;}try{await demotePlayer(_0xa2c961,_0x54c58f),document[_0x5be68e(0x185)]('demote-modal')[_0x5be68e(0x14a)][_0x5be68e(0x3de)](_0x5be68e(0x39f)),document[_0x5be68e(0x185)](_0x5be68e(0x456))[_0x5be68e(0x227)]='';}catch(_0xd45ad2){console[_0x5be68e(0x182)](_0x5be68e(0x13e),_0xd45ad2);}}));const _0x2cf715=document[_0x13f1f1(0x185)]('set-elo-btn'),_0x2a6dfb=document[_0x13f1f1(0x185)](_0x13f1f1(0x27a)),_0x5a97a6=document[_0x13f1f1(0x185)](_0x13f1f1(0x1cb));_0x2cf715&&_0x2a6dfb&&_0x5a97a6&&(_0x2cf715['addEventListener'](_0x13f1f1(0x130),()=>{const _0x167c33=_0x13f1f1;_0x2a6dfb[_0x167c33(0x14a)][_0x167c33(0x486)]('active');}),_0x2a6dfb[_0x13f1f1(0x1bc)]('click',_0x486788=>{const _0x4fcefb=_0x13f1f1;_0x486788[_0x4fcefb(0x2a8)]===_0x2a6dfb&&_0x2a6dfb[_0x4fcefb(0x14a)][_0x4fcefb(0x3de)](_0x4fcefb(0x39f));}),_0x5a97a6[_0x13f1f1(0x1bc)]('submit',async _0x3367bb=>{const _0x5804c6=_0x13f1f1;_0x3367bb[_0x5804c6(0x2c3)]();const _0x71891b=document[_0x5804c6(0x185)](_0x5804c6(0x45c)),_0x5f4338=document[_0x5804c6(0x185)](_0x5804c6(0x2ac));let _0x4a62ba;const _0x4b295a=document[_0x5804c6(0x185)](_0x5804c6(0x3e8)),_0x2cdb37=document[_0x5804c6(0x388)](_0x5804c6(0x335));if(_0x4b295a)_0x4a62ba=_0x4b295a[_0x5804c6(0x227)];else _0x2cdb37?_0x4a62ba=_0x2cdb37[_0x5804c6(0x227)]:_0x4a62ba='D1';if(!_0x71891b||!_0x5f4338){showNotification(_0x5804c6(0x3b4),'error');return;}const _0x23abde=_0x71891b[_0x5804c6(0x227)][_0x5804c6(0x3c6)](),_0x3f8f63=parseInt(_0x5f4338['value']);if(!_0x23abde||isNaN(_0x3f8f63)){showNotification(_0x5804c6(0x14b),_0x5804c6(0x182));return;}try{await setCustomElo(_0x23abde,_0x3f8f63,_0x4a62ba),_0x2a6dfb[_0x5804c6(0x14a)][_0x5804c6(0x3de)]('active'),_0x71891b['value']='',_0x5f4338[_0x5804c6(0x227)]='';}catch(_0x2bea79){showNotification(_0x2bea79['message'],_0x5804c6(0x182));}}),document[_0x13f1f1(0x185)]('cancel-set-elo-btn')[_0x13f1f1(0x1bc)](_0x13f1f1(0x130),()=>{const _0x3999dc=_0x13f1f1;_0x2a6dfb[_0x3999dc(0x14a)][_0x3999dc(0x3de)](_0x3999dc(0x39f));}));const _0x11d6bd=document['getElementById'](_0x13f1f1(0x1bd)),_0x5e2c8d=document[_0x13f1f1(0x185)](_0x13f1f1(0x53f));if(_0x11d6bd&&_0x5e2c8d){_0x11d6bd[_0x13f1f1(0x1bc)](_0x13f1f1(0x130),_0x5bed96=>{const _0x311b2b=_0x13f1f1;_0x5bed96[_0x311b2b(0x2a8)]===_0x11d6bd&&closeModalHandler();}),_0x5e2c8d[_0x13f1f1(0x1bc)](_0x13f1f1(0x44d),async _0x1ad5e2=>{const _0x565ca8=_0x13f1f1;_0x1ad5e2[_0x565ca8(0x2c3)]();const _0x24d527=document[_0x565ca8(0x185)](_0x565ca8(0x286)),_0x1c71c9=document[_0x565ca8(0x185)](_0x565ca8(0x40e)),_0x4b3d00=document['getElementById'](_0x565ca8(0x272)),_0xb885a6=_0x24d527[_0x565ca8(0x227)][_0x565ca8(0x3c6)](),_0x36459b=_0x1c71c9[_0x565ca8(0x227)][_0x565ca8(0x3c6)](),_0xb22715=_0x4b3d00[_0x565ca8(0x227)];if(!_0xb885a6){showNotification(_0x565ca8(0x51f),_0x565ca8(0x182));return;}try{await setUserRole(_0xb885a6,_0x36459b,_0xb22715),closeModalHandler(),loadUsersWithRoles();}catch(_0x18469f){}});const _0x1f0648=document['getElementById'](_0x13f1f1(0x1af));_0x1f0648&&(_0x1f0648[_0x13f1f1(0x3bb)](_0x13f1f1(0x130),closeModalHandler),_0x1f0648[_0x13f1f1(0x1bc)]('click',closeModalHandler));}}async function promotePlayer(_0x34f1e9,_0x1e0642){const _0x55d602=a4_0xd679e2;try{console['log'](_0x55d602(0x3a4)+_0x34f1e9+_0x55d602(0x361)+_0x1e0642+_0x55d602(0x2f0));const _0x9c10f8=auth[_0x55d602(0x171)];if(!_0x9c10f8)throw new Error(_0x55d602(0x4e6));const _0x4a96c7=_0x1e0642==='D2'?'playersD2':_0x55d602(0x2ea),_0x5c090c=_0x1e0642==='D2'?'eloHistoryD2':_0x55d602(0x4c8);console[_0x55d602(0x514)]('Searching\x20for\x20player\x20in\x20'+_0x4a96c7);const _0x284c32=collection(db,_0x4a96c7),_0x19fffa=query(_0x284c32,where(_0x55d602(0x177),'==',_0x34f1e9)),_0x446aec=await getDocs(_0x19fffa);if(_0x446aec[_0x55d602(0x294)]){alert('Player\x20not\x20found\x20in\x20'+_0x1e0642+_0x55d602(0x2f0));throw new Error(_0x55d602(0x21d)+_0x1e0642+_0x55d602(0x2f0));}const _0x164bf0=_0x446aec['docs'][0x0],_0x44f12a=_0x164bf0[_0x55d602(0x17d)](),_0x3176ca=_0x44f12a[_0x55d602(0x17c)]||0x4b0,_0x4db724=_0x164bf0['id'];console[_0x55d602(0x514)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x3176ca);const _0x2001b3=[{'name':_0x55d602(0x1ca),'elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x55d602(0x574),'elo':0x708},{'name':_0x55d602(0x22b),'elo':0x7d0}];let _0x38c22f=_0x2001b3['find'](_0x25bd2e=>_0x25bd2e['elo']>_0x3176ca);if(!_0x38c22f){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1e0642+_0x55d602(0x2f0));throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1e0642+'\x20ladder');}console[_0x55d602(0x514)]('Promoting\x20player\x20to\x20'+_0x38c22f[_0x55d602(0x257)]+'\x20('+_0x38c22f[_0x55d602(0x373)]+')'),await updateDoc(doc(db,_0x4a96c7,_0x164bf0['id']),{'eloRating':_0x38c22f[_0x55d602(0x373)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x9c10f8[_0x55d602(0x420)]||'admin'}),await addDoc(collection(db,_0x5c090c),{'player':_0x34f1e9,'previousElo':_0x3176ca,'newElo':_0x38c22f[_0x55d602(0x373)],'timestamp':serverTimestamp(),'type':_0x55d602(0x4f5),'rankAchieved':_0x38c22f[_0x55d602(0x257)],'promotedBy':_0x9c10f8[_0x55d602(0x420)]||_0x55d602(0x3a3),'gameMode':_0x1e0642});try{const {promotionManager:_0x1bd9e8}=await import(_0x55d602(0x26b)),_0x4fdd91=_0x1bd9e8[_0x55d602(0x2b0)](_0x3176ca),_0x2e37a7=_0x38c22f['name'];await _0x1bd9e8[_0x55d602(0x479)](_0x4db724,_0x34f1e9,_0x3176ca,_0x38c22f[_0x55d602(0x373)],_0x4fdd91,_0x2e37a7,_0x55d602(0x4f5),{'displayName':_0x34f1e9,'source':_0x55d602(0x3a3),'adminUser':_0x9c10f8[_0x55d602(0x420)],'ladder':_0x1e0642}),console[_0x55d602(0x514)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x3508b7){console['error'](_0x55d602(0x24b),_0x3508b7);}return alert(_0x55d602(0x318)+_0x34f1e9+_0x55d602(0x3b7)+_0x38c22f[_0x55d602(0x257)]+'\x20('+_0x38c22f[_0x55d602(0x373)]+')'),currentLadder===_0x1e0642&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x36d725){console[_0x55d602(0x182)]('Error\x20promoting\x20player:',_0x36d725),alert('Error\x20promoting\x20player:\x20'+_0x36d725[_0x55d602(0x426)]);throw _0x36d725;}}document[a4_0xd679e2(0x1bc)](a4_0xd679e2(0x4ac),()=>{const _0x20bc70=a4_0xd679e2,_0x47be9a=document['getElementById'](_0x20bc70(0x1b4));_0x47be9a&&_0x47be9a['addEventListener']('submit',async _0x13ca49=>{const _0x574462=_0x20bc70;_0x13ca49[_0x574462(0x2c3)]();const _0x14bcb4=document['getElementById'](_0x574462(0x3cb))[_0x574462(0x227)][_0x574462(0x3c6)](),_0x424ba1=document[_0x574462(0x388)](_0x574462(0x15f))['value'];if(!_0x14bcb4){alert(_0x574462(0x2f5));return;}try{await promotePlayer(_0x14bcb4,_0x424ba1),document[_0x574462(0x185)](_0x574462(0x513))[_0x574462(0x14a)][_0x574462(0x3de)](_0x574462(0x39f)),document[_0x574462(0x185)](_0x574462(0x3cb))['value']='';}catch(_0x399089){console['error']('Error\x20in\x20promotion:',_0x399089);}});});async function demotePlayer(_0x1852a3,_0x5c3df8){const _0x41b3e0=a4_0xd679e2;try{console[_0x41b3e0(0x514)]('Attempting\x20to\x20demote\x20'+_0x1852a3+'\x20in\x20'+_0x5c3df8+_0x41b3e0(0x2f0));const _0x367264=auth['currentUser'];if(!_0x367264)throw new Error(_0x41b3e0(0x4e6));const _0x19d4fc=_0x5c3df8==='D2'?_0x41b3e0(0x4e9):_0x41b3e0(0x2ea),_0x391872=_0x5c3df8==='D2'?_0x41b3e0(0x27b):'eloHistory';console[_0x41b3e0(0x514)](_0x41b3e0(0x1b7)+_0x19d4fc);const _0xe52eba=collection(db,_0x19d4fc),_0x7aaa0c=query(_0xe52eba,where(_0x41b3e0(0x177),'==',_0x1852a3)),_0x177405=await getDocs(_0x7aaa0c);if(_0x177405[_0x41b3e0(0x294)]){alert('Player\x20not\x20found\x20in\x20'+_0x5c3df8+_0x41b3e0(0x2f0));throw new Error(_0x41b3e0(0x21d)+_0x5c3df8+_0x41b3e0(0x2f0));}const _0x24df76=_0x177405[_0x41b3e0(0x4e3)][0x0],_0x140299=_0x24df76[_0x41b3e0(0x17d)](),_0x2350f2=_0x140299['eloRating']||0x4b0;console[_0x41b3e0(0x514)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x2350f2);const _0x3a220a=[{'name':'Gold','elo':0x708},{'name':_0x41b3e0(0x1b9),'elo':0x640},{'name':_0x41b3e0(0x1ca),'elo':0x578},{'name':_0x41b3e0(0x1ac),'elo':0x4b0}];let _0x36e548=_0x3a220a[_0x41b3e0(0x395)](_0x51bac4=>_0x51bac4['elo']<_0x2350f2);if(!_0x36e548){alert(_0x41b3e0(0x412)+_0x5c3df8+_0x41b3e0(0x2f0));throw new Error(_0x41b3e0(0x412)+_0x5c3df8+_0x41b3e0(0x2f0));}console[_0x41b3e0(0x514)](_0x41b3e0(0x274)+_0x36e548[_0x41b3e0(0x257)]+'\x20('+_0x36e548[_0x41b3e0(0x373)]+')'),await updateDoc(doc(db,_0x19d4fc,_0x24df76['id']),{'eloRating':_0x36e548['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x367264[_0x41b3e0(0x420)]||_0x41b3e0(0x3a3)}),await addDoc(collection(db,_0x391872),{'player':_0x1852a3,'previousElo':_0x2350f2,'newElo':_0x36e548['elo'],'timestamp':serverTimestamp(),'type':_0x41b3e0(0x148),'rankAchieved':_0x36e548['name'],'demotedBy':_0x367264[_0x41b3e0(0x420)]||'admin','gameMode':_0x5c3df8});try{const {promotionManager:_0x1c1e7e}=await import(_0x41b3e0(0x26b)),_0x52c56b=_0x1c1e7e[_0x41b3e0(0x2b0)](_0x2350f2),_0x56a58=_0x36e548[_0x41b3e0(0x257)];await _0x1c1e7e[_0x41b3e0(0x479)](_0x24df76['id'],_0x1852a3,_0x2350f2,_0x36e548[_0x41b3e0(0x373)],_0x52c56b,_0x56a58,_0x41b3e0(0x148),{'displayName':_0x1852a3,'source':_0x41b3e0(0x3a3),'adminUser':_0x367264[_0x41b3e0(0x420)],'ladder':_0x5c3df8}),console[_0x41b3e0(0x514)](_0x41b3e0(0x432));}catch(_0x17c1fc){console[_0x41b3e0(0x182)](_0x41b3e0(0x24b),_0x17c1fc);}return alert(_0x41b3e0(0x17b)+_0x1852a3+_0x41b3e0(0x3b7)+_0x36e548[_0x41b3e0(0x257)]+'\x20('+_0x36e548['elo']+')'),currentLadder===_0x5c3df8&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x4c4d2b){console[_0x41b3e0(0x182)]('Error\x20demoting\x20player:',_0x4c4d2b),alert(_0x41b3e0(0x22e)+_0x4c4d2b[_0x41b3e0(0x426)]);throw _0x4c4d2b;}}document[a4_0xd679e2(0x1bc)](a4_0xd679e2(0x4ac),()=>{const _0x5df380=a4_0xd679e2,_0x4a2b5d=document[_0x5df380(0x185)]('demote-form');_0x4a2b5d&&_0x4a2b5d['addEventListener'](_0x5df380(0x44d),async _0x42defa=>{const _0x433339=_0x5df380;_0x42defa[_0x433339(0x2c3)]();const _0x5135c6=document[_0x433339(0x185)](_0x433339(0x456))[_0x433339(0x227)][_0x433339(0x3c6)](),_0x40c3b9=document['querySelector'](_0x433339(0x2c4))[_0x433339(0x227)];if(!_0x5135c6){alert(_0x433339(0x2f5));return;}try{await demotePlayer(_0x5135c6,_0x40c3b9),document[_0x433339(0x185)](_0x433339(0x4e4))['classList']['remove']('active'),document['getElementById']('demote-username')[_0x433339(0x227)]='';}catch(_0x18f1ce){console['error'](_0x433339(0x13e),_0x18f1ce);}});});async function setCustomElo(_0x575f65,_0x5c9774,_0x239507){const _0x3717f7=a4_0xd679e2;try{const _0x5a0b00=auth[_0x3717f7(0x171)];if(!_0x5a0b00||!isAdmin(_0x5a0b00[_0x3717f7(0x420)]))throw new Error(_0x3717f7(0x2d2));const _0x204ada=_0x239507==='D2'?_0x3717f7(0x4e9):'players',_0x55c77b=_0x239507==='D2'?_0x3717f7(0x27b):_0x3717f7(0x4c8),_0x12d9d0=collection(db,_0x204ada),_0x22f58d=query(_0x12d9d0,where(_0x3717f7(0x177),'==',_0x575f65)),_0x430cbb=await getDocs(_0x22f58d);if(_0x430cbb[_0x3717f7(0x294)])throw new Error(_0x3717f7(0x21d)+_0x239507+_0x3717f7(0x2f0));const _0x43dbab=_0x430cbb['docs'][0x0],_0x9633f=_0x43dbab[_0x3717f7(0x17d)](),_0x3a75d8=_0x9633f[_0x3717f7(0x17c)]||0x4b0,_0x449835=writeBatch(db);_0x449835[_0x3717f7(0x314)](doc(db,_0x204ada,_0x43dbab['id']),{'eloRating':_0x5c9774,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5a0b00[_0x3717f7(0x420)]});const _0x249ccc=doc(collection(db,_0x55c77b));return _0x449835[_0x3717f7(0x3ea)](_0x249ccc,{'player':_0x575f65,'previousElo':_0x3a75d8,'newElo':_0x5c9774,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x5a0b00[_0x3717f7(0x420)],'gameMode':_0x239507}),await _0x449835[_0x3717f7(0x241)](),showNotification(_0x3717f7(0x1aa)+_0x575f65+_0x3717f7(0x2ad)+_0x3a75d8+_0x3717f7(0x3b7)+_0x5c9774,_0x3717f7(0x16c)),currentLadder===_0x239507&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5ddd96){console[_0x3717f7(0x182)](_0x3717f7(0x537),_0x5ddd96);throw _0x5ddd96;}}async function setUserRole(_0x115224,_0x16674f,_0x507eb4){const _0x1691ba=a4_0xd679e2;try{const _0x371fb8=auth[_0x1691ba(0x171)];if(!_0x371fb8||!isAdmin(_0x371fb8['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0xb9e4e7=_0x16674f?_0x16674f[_0x1691ba(0x3c6)]():null,_0x4e7550=_0xb9e4e7?_0x507eb4||'#808080':null,[_0x50c9ad,_0x405664]=await Promise[_0x1691ba(0x33e)]([getDocs(query(collection(db,_0x1691ba(0x2ea)),where(_0x1691ba(0x177),'==',_0x115224))),getDocs(query(collection(db,_0x1691ba(0x4e9)),where(_0x1691ba(0x177),'==',_0x115224)))]),_0x45caa9=[];if(!_0x50c9ad[_0x1691ba(0x294)])_0x45caa9[_0x1691ba(0x3a6)]({'ref':_0x50c9ad['docs'][0x0][_0x1691ba(0x44f)],'source':'D1'});if(!_0x405664[_0x1691ba(0x294)])_0x45caa9[_0x1691ba(0x3a6)]({'ref':_0x405664[_0x1691ba(0x4e3)][0x0]['ref'],'source':'D2'});if(_0x45caa9[_0x1691ba(0x190)]===0x0){const [_0x2bce3c,_0x5df366]=await Promise[_0x1691ba(0x33e)]([getDocs(query(collection(db,_0x1691ba(0x3f4)),where(_0x1691ba(0x177),'==',_0x115224))),getDocs(query(collection(db,'userProfiles'),where(_0x1691ba(0x177),'==',_0x115224)))]);if(!_0x2bce3c[_0x1691ba(0x294)])_0x45caa9['push']({'ref':_0x2bce3c[_0x1691ba(0x4e3)][0x0]['ref'],'source':_0x1691ba(0x42b)});if(!_0x5df366[_0x1691ba(0x294)])_0x45caa9[_0x1691ba(0x3a6)]({'ref':_0x5df366[_0x1691ba(0x4e3)][0x0][_0x1691ba(0x44f)],'source':_0x1691ba(0x2c7)});}if(_0x45caa9[_0x1691ba(0x190)]===0x0)throw new Error('User\x20\x22'+_0x115224+_0x1691ba(0x46e));const _0x3542dd=writeBatch(db);_0x45caa9['forEach'](_0x1ce031=>{const _0x240ea5=_0x1691ba;console['log']('Updating\x20role\x20for\x20'+_0x115224+_0x240ea5(0x361)+_0x1ce031[_0x240ea5(0x511)]),!_0xb9e4e7?_0x3542dd[_0x240ea5(0x314)](_0x1ce031[_0x240ea5(0x44f)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x3542dd['update'](_0x1ce031[_0x240ea5(0x44f)],{'roleName':_0xb9e4e7,'roleColor':_0x4e7550,'roleAssignedBy':_0x371fb8[_0x240ea5(0x420)],'roleAssignedAt':serverTimestamp()});}),await _0x3542dd['commit']();const _0x5e13a4=_0xb9e4e7?_0x1691ba(0x472)+_0xb9e4e7+'\x22\x20set':'Role\x20removed';return showNotification(_0x5e13a4+_0x1691ba(0x23e)+_0x115224+'\x22',_0x1691ba(0x16c)),!![];}catch(_0x5cb068){console[_0x1691ba(0x182)]('Error\x20setting\x20user\x20role:',_0x5cb068),showNotification(_0x1691ba(0x271)+_0x5cb068[_0x1691ba(0x426)],_0x1691ba(0x182));throw _0x5cb068;}}function showNotification(_0x58d8ee,_0x200df5='info'){const _0x172a99=a4_0xd679e2,_0x32f385=document[_0x172a99(0x54a)](_0x172a99(0x1b1));_0x32f385[_0x172a99(0x4cd)]=_0x172a99(0x304)+_0x200df5,_0x32f385[_0x172a99(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x200df5)+_0x172a99(0x533)+_0x58d8ee+_0x172a99(0x454),document[_0x172a99(0x394)][_0x172a99(0x180)](_0x32f385),setTimeout(()=>{const _0xe91160=_0x172a99;_0x32f385[_0xe91160(0x14a)][_0xe91160(0x486)](_0xe91160(0x39f));},0xa);const _0x3e1291=setTimeout(()=>{closeNotification(_0x32f385);},0x1388);_0x32f385[_0x172a99(0x388)](_0x172a99(0x4ae))[_0x172a99(0x1bc)]('click',()=>{clearTimeout(_0x3e1291),closeNotification(_0x32f385);});}function getNotificationIcon(_0x8619f){const _0x353833=a4_0xd679e2;switch(_0x8619f){case _0x353833(0x16c):return'fa-check-circle';case _0x353833(0x182):return _0x353833(0x1f7);case _0x353833(0x2df):return'fa-exclamation-triangle';case _0x353833(0x28f):default:return _0x353833(0x31f);}}function closeNotification(_0x29a5e0){const _0x54a7c7=a4_0xd679e2;_0x29a5e0[_0x54a7c7(0x14a)][_0x54a7c7(0x3de)]('active'),setTimeout(()=>{const _0x2d9c1d=_0x54a7c7;_0x29a5e0[_0x2d9c1d(0x3de)]();},0x12c);}function setupUserRolesSection(){const _0x154b03=a4_0xd679e2,_0x5c5ce9=document[_0x154b03(0x185)]('load-users-data');_0x5c5ce9&&_0x5c5ce9[_0x154b03(0x1bc)](_0x154b03(0x130),function(){const _0x5ebb51=_0x154b03;this[_0x5ebb51(0x14a)][_0x5ebb51(0x486)](_0x5ebb51(0x489)),this[_0x5ebb51(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x85f23d=_0x5ebb51;this['classList'][_0x85f23d(0x3de)](_0x85f23d(0x489)),this[_0x85f23d(0x319)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x5b7c09=>{const _0x19de4b=_0x5ebb51;console[_0x19de4b(0x182)]('Error\x20loading\x20users:',_0x5b7c09),this[_0x19de4b(0x14a)]['remove'](_0x19de4b(0x489)),this[_0x19de4b(0x319)]=_0x19de4b(0x51e),setTimeout(()=>{const _0x1b5390=_0x19de4b;this[_0x1b5390(0x319)]=_0x1b5390(0x4ab);},0xbb8);});});const _0x389a05=document[_0x154b03(0x185)](_0x154b03(0x42c));_0x389a05&&_0x389a05['addEventListener'](_0x154b03(0x130),()=>{const _0x30e62b=_0x154b03,_0x576d51=document[_0x30e62b(0x185)](_0x30e62b(0x1bd));_0x576d51&&_0x576d51['classList'][_0x30e62b(0x486)](_0x30e62b(0x39f));});const _0x3c30f5=document['getElementById'](_0x154b03(0x374));_0x3c30f5&&_0x3c30f5[_0x154b03(0x1bc)](_0x154b03(0x2e7),debounce(filterUsersTable,0x12c));const _0x5d376e=document[_0x154b03(0x185)](_0x154b03(0x37e));_0x5d376e&&_0x5d376e[_0x154b03(0x1bc)](_0x154b03(0x370),filterUsersTable);}async function loadUsersWithRoles(){const _0x51a022=a4_0xd679e2,_0x4288d4=document[_0x51a022(0x185)](_0x51a022(0x4db));if(!_0x4288d4)return;_0x4288d4['innerHTML']=_0x51a022(0x359);try{const [_0x96a671,_0x3428d6,_0x5988f1,_0x39cbfa]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x51a022(0x3f4))),getDocs(collection(db,_0x51a022(0x3c2)))]),_0x1b8b29=new Map();function _0x501bda(_0x8cc390,_0xe251b3){const _0x1c3a3c=_0x51a022;_0x8cc390[_0x1c3a3c(0x4eb)](_0x2a3c62=>{const _0x511a64=_0x1c3a3c,_0x421380=_0x2a3c62[_0x511a64(0x17d)]();if(!_0x421380[_0x511a64(0x177)])return;if(!_0x1b8b29[_0x511a64(0x175)](_0x421380[_0x511a64(0x177)]))_0x1b8b29[_0x511a64(0x3ea)](_0x421380['username'],{'username':_0x421380[_0x511a64(0x177)],'roleName':_0x421380[_0x511a64(0x372)]||null,'roleColor':_0x421380[_0x511a64(0x53c)]||null,'roleAssignedBy':_0x421380[_0x511a64(0x35c)]||null,'roleAssignedAt':_0x421380['roleAssignedAt']||null,'sources':[_0xe251b3]});else{const _0x31cc97=_0x1b8b29['get'](_0x421380[_0x511a64(0x177)]);_0x421380['roleName']&&(!_0x31cc97[_0x511a64(0x372)]||_0xe251b3==='D1'||_0xe251b3==='D2')&&(_0x31cc97[_0x511a64(0x372)]=_0x421380[_0x511a64(0x372)],_0x31cc97[_0x511a64(0x53c)]=_0x421380[_0x511a64(0x53c)],_0x31cc97[_0x511a64(0x35c)]=_0x421380['roleAssignedBy'],_0x31cc97[_0x511a64(0x2f6)]=_0x421380[_0x511a64(0x2f6)]),!_0x31cc97[_0x511a64(0x240)][_0x511a64(0x3ae)](_0xe251b3)&&_0x31cc97[_0x511a64(0x240)][_0x511a64(0x3a6)](_0xe251b3);}});}_0x501bda(_0x96a671,'D1'),_0x501bda(_0x3428d6,'D2'),_0x501bda(_0x5988f1,'Non-Participant'),_0x501bda(_0x39cbfa,_0x51a022(0x1f0));const _0x577336=Array['from'](_0x1b8b29[_0x51a022(0x277)]())[_0x51a022(0x508)]((_0x5051ca,_0x5b37c9)=>_0x5051ca['username'][_0x51a022(0x33f)](_0x5b37c9['username']));if(_0x577336['length']===0x0){_0x4288d4[_0x51a022(0x319)]=_0x51a022(0x50a);return;}_0x4288d4['innerHTML']='',_0x577336[_0x51a022(0x4eb)](_0x11779c=>{const _0x126103=_0x51a022,_0x33592b=document[_0x126103(0x54a)]('tr');_0x33592b['dataset'][_0x126103(0x177)]=_0x11779c[_0x126103(0x177)],_0x33592b[_0x126103(0x55c)]['roleName']=_0x11779c['roleName']||'',_0x33592b[_0x126103(0x55c)][_0x126103(0x53c)]=_0x11779c[_0x126103(0x53c)]||_0x126103(0x36c);const _0x613398=_0x11779c[_0x126103(0x2f6)]?new Date(_0x11779c[_0x126103(0x2f6)][_0x126103(0x23a)]*0x3e8)[_0x126103(0x3c7)]():_0x126103(0x1a4),_0xdb44a0=_0x11779c[_0x126103(0x372)]?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x11779c[_0x126103(0x53c)]+_0x126103(0x343)+getContrastColor(_0x11779c['roleColor'])+_0x126103(0x467)+_0x11779c[_0x126103(0x372)]+_0x126103(0x208):_0x126103(0x48e);_0x33592b[_0x126103(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x11779c['username']+_0x126103(0x552)+_0x11779c[_0x126103(0x240)][_0x126103(0x471)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xdb44a0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x11779c[_0x126103(0x35c)]||_0x126103(0x1a4))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x613398+_0x126103(0x56b)+_0x11779c[_0x126103(0x177)]+_0x126103(0x4aa)+(_0x11779c[_0x126103(0x372)]?_0x126103(0x4df)+_0x11779c[_0x126103(0x177)]+_0x126103(0x548):'')+_0x126103(0x233),_0x4288d4[_0x126103(0x180)](_0x33592b);}),document[_0x51a022(0x4b2)](_0x51a022(0x48c))[_0x51a022(0x4eb)](_0x1dfa5f=>{const _0x23812e=_0x51a022;_0x1dfa5f[_0x23812e(0x1bc)](_0x23812e(0x130),()=>{const _0x2005ef=_0x23812e,_0x3ca34c=_0x1dfa5f['dataset'][_0x2005ef(0x177)];openRoleEditModal(_0x3ca34c);});}),document[_0x51a022(0x4b2)](_0x51a022(0x51d))[_0x51a022(0x4eb)](_0x50fda8=>{const _0x315c08=_0x51a022;_0x50fda8[_0x315c08(0x1bc)]('click',()=>{const _0x23f5ed=_0x315c08,_0x3c322a=_0x50fda8[_0x23f5ed(0x55c)][_0x23f5ed(0x177)];confirm(_0x23f5ed(0x203)+_0x3c322a+'?')&&setUserRole(_0x3c322a,null,null)[_0x23f5ed(0x484)](()=>loadUsersWithRoles())[_0x23f5ed(0x474)](_0x246b7b=>console[_0x23f5ed(0x182)](_0x23f5ed(0x162),_0x246b7b));});});}catch(_0x3efcf0){console[_0x51a022(0x182)](_0x51a022(0x3c8),_0x3efcf0),_0x4288d4[_0x51a022(0x319)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x1b72f0){const _0x3503ed=a4_0xd679e2;console[_0x3503ed(0x514)](_0x3503ed(0x4a3),_0x1b72f0);const _0x5cc1d3=document[_0x3503ed(0x185)](_0x3503ed(0x1bd)),_0x5c1d38=document[_0x3503ed(0x185)](_0x3503ed(0x286)),_0x293efc=document[_0x3503ed(0x185)](_0x3503ed(0x27e));if(!_0x5cc1d3){console[_0x3503ed(0x182)](_0x3503ed(0x260)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console[_0x3503ed(0x514)](_0x3503ed(0x414),_0x5cc1d3);_0x5c1d38?(_0x5c1d38[_0x3503ed(0x227)]=_0x1b72f0,console['log'](_0x3503ed(0x3e1)+_0x1b72f0)):console[_0x3503ed(0x1c8)](_0x3503ed(0x1bf));const _0xd059c3=document[_0x3503ed(0x388)](_0x3503ed(0x47e)+_0x1b72f0+'\x22]');if(_0xd059c3&&_0x293efc){const _0x30653b=_0xd059c3[_0x3503ed(0x55c)][_0x3503ed(0x4f8)];_0x293efc[_0x3503ed(0x227)]=_0x30653b==='none'?'':_0x30653b,console[_0x3503ed(0x514)](_0x3503ed(0x224)+_0x293efc[_0x3503ed(0x227)]+_0x3503ed(0x3ba)+_0x30653b+')');}else{if(!_0xd059c3)console[_0x3503ed(0x1c8)]('Table\x20row\x20for\x20user\x20'+_0x1b72f0+_0x3503ed(0x1d8));if(!_0x293efc)console[_0x3503ed(0x1c8)](_0x3503ed(0x383));if(_0x293efc)_0x293efc[_0x3503ed(0x227)]='';}console['log'](_0x3503ed(0x3d3)),_0x5cc1d3[_0x3503ed(0x14a)]['add'](_0x3503ed(0x39f));const _0xf1ade0=document[_0x3503ed(0x185)](_0x3503ed(0x1af));_0xf1ade0?(console[_0x3503ed(0x514)]('Attaching\x20cancel\x20button\x20listener.'),_0xf1ade0[_0x3503ed(0x3bb)](_0x3503ed(0x130),closeModalHandler),_0xf1ade0['addEventListener'](_0x3503ed(0x130),closeModalHandler)):console[_0x3503ed(0x1c8)]('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console[_0x3503ed(0x514)](_0x3503ed(0x49c)),_0x5cc1d3['removeEventListener']('click',closeModalBackgroundHandler),_0x5cc1d3[_0x3503ed(0x1bc)](_0x3503ed(0x130),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x2c52ae){const _0x543d16=a4_0xd679e2;_0x2c52ae[_0x543d16(0x2a8)]===this&&closeModalHandler();}function closeModalHandler(){const _0x45a4fb=a4_0xd679e2,_0x3c2874=document[_0x45a4fb(0x185)]('set-role-modal');_0x3c2874&&(_0x3c2874[_0x45a4fb(0x14a)][_0x45a4fb(0x3de)](_0x45a4fb(0x39f)),_0x3c2874[_0x45a4fb(0x3bb)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x1eca85=a4_0xd679e2,_0x5d32e7=document[_0x1eca85(0x185)](_0x1eca85(0x374))?.[_0x1eca85(0x227)][_0x1eca85(0x16e)]()||'',_0x2ad309=document[_0x1eca85(0x185)](_0x1eca85(0x37e))?.[_0x1eca85(0x227)]||_0x1eca85(0x33e),_0x310a33=document['querySelectorAll']('#users-table-body\x20tr');let _0x370b7d=0x0;_0x310a33[_0x1eca85(0x4eb)](_0x1b8ef4=>{const _0x153d7e=_0x1eca85;if(_0x1b8ef4['querySelector']('.loading-cell')||_0x1b8ef4['querySelector'](_0x153d7e(0x184))||_0x1b8ef4[_0x153d7e(0x388)](_0x153d7e(0x52b)))return;const _0x5167f0=_0x1b8ef4[_0x153d7e(0x55c)]['username']?.[_0x153d7e(0x16e)]()||'',_0x27afa9=_0x1b8ef4[_0x153d7e(0x55c)][_0x153d7e(0x4f8)]||_0x153d7e(0x229),_0x59f21f=_0x5167f0[_0x153d7e(0x3ae)](_0x5d32e7),_0x364216=_0x2ad309===_0x153d7e(0x33e)||_0x27afa9===_0x2ad309;_0x59f21f&&_0x364216?(_0x1b8ef4[_0x153d7e(0x273)][_0x153d7e(0x563)]='',_0x370b7d++):_0x1b8ef4[_0x153d7e(0x273)][_0x153d7e(0x563)]=_0x153d7e(0x229);});if(_0x370b7d===0x0&&_0x310a33['length']>0x0){const _0x463755=document['getElementById'](_0x1eca85(0x4db));if(_0x463755){if(!_0x463755['querySelector']('.no-results')){const _0x3c39c9=document[_0x1eca85(0x54a)]('tr');_0x3c39c9[_0x1eca85(0x14a)][_0x1eca85(0x486)](_0x1eca85(0x35d)),_0x3c39c9[_0x1eca85(0x319)]=_0x1eca85(0x50e),_0x463755[_0x1eca85(0x180)](_0x3c39c9);}}}else{const _0x155e49=document[_0x1eca85(0x388)](_0x1eca85(0x1f5));_0x155e49&&_0x155e49[_0x1eca85(0x3de)]();}}function setupManageArticlesSection(){const _0x3ac299=a4_0xd679e2,_0x298ad7=document[_0x3ac299(0x185)]('load-articles-data');_0x298ad7&&_0x298ad7[_0x3ac299(0x1bc)](_0x3ac299(0x130),function(){const _0x17a520=_0x3ac299;this[_0x17a520(0x14a)][_0x17a520(0x486)]('loading'),this[_0x17a520(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x1ad3b1=_0x17a520;this['classList']['remove'](_0x1ad3b1(0x489)),this['innerHTML']=_0x1ad3b1(0x35f);})[_0x17a520(0x474)](_0xb986c1=>{const _0xa8e531=_0x17a520;console[_0xa8e531(0x182)](_0xa8e531(0x48f),_0xb986c1),this[_0xa8e531(0x14a)][_0xa8e531(0x3de)](_0xa8e531(0x489)),this['innerHTML']=_0xa8e531(0x51e),setTimeout(()=>{const _0x3a0e0c=_0xa8e531;this[_0x3a0e0c(0x319)]=_0x3a0e0c(0x35f);},0xbb8);});});const _0x177928=document['getElementById'](_0x3ac299(0x173));_0x177928?(console[_0x3ac299(0x514)](_0x3ac299(0x4a0)),_0x177928[_0x3ac299(0x273)][_0x3ac299(0x563)]=_0x3ac299(0x1ed),_0x177928[_0x3ac299(0x1bc)](_0x3ac299(0x130),()=>{openArticleModal();})):console[_0x3ac299(0x182)](_0x3ac299(0x126));const _0x3e40d8=document[_0x3ac299(0x185)](_0x3ac299(0x546));_0x3e40d8&&_0x3e40d8[_0x3ac299(0x1bc)]('submit',_0x25c4df=>{_0x25c4df['preventDefault'](),saveArticle();});const _0x48e031=document['getElementById'](_0x3ac299(0x43e));_0x48e031&&_0x48e031['addEventListener'](_0x3ac299(0x130),()=>{closeArticleModal();});const _0x475356=document[_0x3ac299(0x388)](_0x3ac299(0x2be));_0x475356&&_0x475356['addEventListener'](_0x3ac299(0x130),()=>{closeArticleModal();});const _0x5d8c5c=document[_0x3ac299(0x185)]('article-modal');_0x5d8c5c&&_0x5d8c5c[_0x3ac299(0x1bc)](_0x3ac299(0x130),_0x10c3c5=>{const _0x58e681=_0x3ac299;_0x10c3c5[_0x58e681(0x2a8)]===_0x5d8c5c&&closeArticleModal();});}async function loadArticles(){const _0x5a0156=a4_0xd679e2,_0x367107=document[_0x5a0156(0x185)]('articles-table-body');if(!_0x367107)return;_0x367107[_0x5a0156(0x319)]='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x4ae9d7=collection(db,_0x5a0156(0x371)),_0x3b955c=query(_0x4ae9d7,orderBy(_0x5a0156(0x4e8),_0x5a0156(0x332))),_0xcde70b=await getDocs(_0x3b955c);if(_0xcde70b[_0x5a0156(0x294)]){_0x367107[_0x5a0156(0x319)]=_0x5a0156(0x396);return;}_0x367107['innerHTML']='',_0xcde70b['forEach'](_0x3f40a0=>{const _0x3f6f0c=_0x5a0156,_0x82862c=_0x3f40a0[_0x3f6f0c(0x17d)](),_0x33e6d8=document[_0x3f6f0c(0x54a)]('tr'),_0x3e46b4=_0x82862c[_0x3f6f0c(0x4e8)]?new Date(_0x82862c['createdAt'][_0x3f6f0c(0x23a)]*0x3e8)['toLocaleString']():_0x3f6f0c(0x1a4);_0x33e6d8[_0x3f6f0c(0x319)]=_0x3f6f0c(0x20c)+(_0x82862c[_0x3f6f0c(0x19c)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x82862c['author']||'Unknown')+_0x3f6f0c(0x25a)+_0x3e46b4+_0x3f6f0c(0x1f3)+_0x3f40a0['id']+_0x3f6f0c(0x244)+_0x3f40a0['id']+_0x3f6f0c(0x4bf),_0x367107['appendChild'](_0x33e6d8);}),setupArticleActionButtons();}catch(_0x14c983){console[_0x5a0156(0x182)](_0x5a0156(0x48f),_0x14c983),_0x367107[_0x5a0156(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x14c983[_0x5a0156(0x426)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x3decb9=a4_0xd679e2;document[_0x3decb9(0x4b2)](_0x3decb9(0x1a1))[_0x3decb9(0x4eb)](_0x5fb91e=>{_0x5fb91e['addEventListener']('click',async _0x4652ce=>{const _0x2ab25e=a4_0x4408,_0x45daa8=_0x4652ce[_0x2ab25e(0x2b5)][_0x2ab25e(0x55c)]['id'];openArticleModal(_0x45daa8);});}),document['querySelectorAll']('.delete-article-btn')[_0x3decb9(0x4eb)](_0x43d5a3=>{const _0x2003f7=_0x3decb9;_0x43d5a3[_0x2003f7(0x1bc)](_0x2003f7(0x130),async _0x645891=>{const _0x4222c7=_0x2003f7,_0x3c2579=_0x645891[_0x4222c7(0x2b5)][_0x4222c7(0x55c)]['id'];confirmDeleteArticle(_0x3c2579);});});}function openArticleModal(_0x375b66=null){const _0x8a23a6=a4_0xd679e2,_0x1eaa43=document[_0x8a23a6(0x185)](_0x8a23a6(0x159)),_0x3311d5=document['getElementById'](_0x8a23a6(0x20d)),_0x404cf4=document[_0x8a23a6(0x185)](_0x8a23a6(0x546)),_0x1e73e1=document[_0x8a23a6(0x185)](_0x8a23a6(0x2ef));_0x404cf4['reset'](),_0x1e73e1[_0x8a23a6(0x227)]='';if(_0x375b66)_0x3311d5['textContent']=_0x8a23a6(0x3e2),_0x1e73e1['value']=_0x375b66,loadArticleData(_0x375b66);else{_0x3311d5[_0x8a23a6(0x31d)]='Create\x20Article';const _0x4f91f3=auth[_0x8a23a6(0x171)];if(_0x4f91f3){const _0x48030d=document[_0x8a23a6(0x185)]('article-author');if(_0x48030d&&_0x4f91f3[_0x8a23a6(0x33d)])_0x48030d['value']=_0x4f91f3[_0x8a23a6(0x33d)];else _0x48030d&&(_0x48030d[_0x8a23a6(0x227)]=_0x4f91f3['email']);}}_0x1eaa43['classList'][_0x8a23a6(0x486)](_0x8a23a6(0x39f));}async function loadArticleData(_0x3df06e){const _0x475c28=a4_0xd679e2;try{const _0x5d40fd=doc(db,_0x475c28(0x371),_0x3df06e),_0x666f9b=await getDoc(_0x5d40fd);if(!_0x666f9b[_0x475c28(0x2c2)]()){showNotification(_0x475c28(0x44b),_0x475c28(0x182));return;}const _0x53b2e4=_0x666f9b[_0x475c28(0x17d)]();document['getElementById'](_0x475c28(0x255))[_0x475c28(0x227)]=_0x53b2e4[_0x475c28(0x19c)]||'',document[_0x475c28(0x185)](_0x475c28(0x290))[_0x475c28(0x227)]=_0x53b2e4[_0x475c28(0x2dc)]||'',document['getElementById'](_0x475c28(0x12d))['value']=_0x53b2e4[_0x475c28(0x391)]||'',document[_0x475c28(0x185)](_0x475c28(0x1d0))['value']=_0x53b2e4[_0x475c28(0x329)]||'';}catch(_0x216019){console[_0x475c28(0x182)](_0x475c28(0x337),_0x216019),showNotification(_0x475c28(0x186),_0x475c28(0x182));}}async function saveArticle(){const _0x5c42f4=a4_0xd679e2;try{const _0x25f456=document[_0x5c42f4(0x185)](_0x5c42f4(0x2ef))[_0x5c42f4(0x227)],_0x544b66=document[_0x5c42f4(0x185)](_0x5c42f4(0x255))['value'][_0x5c42f4(0x3c6)](),_0x5e5d04=document[_0x5c42f4(0x185)](_0x5c42f4(0x290))[_0x5c42f4(0x227)]['trim'](),_0x5ced00=document[_0x5c42f4(0x185)]('article-image-url')['value'][_0x5c42f4(0x3c6)](),_0xce0147=document[_0x5c42f4(0x185)](_0x5c42f4(0x1d0))[_0x5c42f4(0x227)][_0x5c42f4(0x3c6)]();if(!_0x544b66||!_0xce0147){showNotification(_0x5c42f4(0x3db),_0x5c42f4(0x182));return;}const _0x113cf9=auth[_0x5c42f4(0x171)];if(!_0x113cf9){showNotification(_0x5c42f4(0x19d),_0x5c42f4(0x182));return;}const _0x272404={'title':_0x544b66,'author':_0x5e5d04,'imageUrl':_0x5ced00||null,'content':_0xce0147,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x113cf9[_0x5c42f4(0x420)]};!_0x25f456?(_0x272404[_0x5c42f4(0x4e8)]=serverTimestamp(),_0x272404[_0x5c42f4(0x389)]=_0x113cf9[_0x5c42f4(0x420)],await addDoc(collection(db,'articles'),_0x272404),showNotification('Article\x20created\x20successfully',_0x5c42f4(0x16c))):(await updateDoc(doc(db,_0x5c42f4(0x371),_0x25f456),_0x272404),showNotification(_0x5c42f4(0x239),'success')),closeArticleModal(),loadArticles();}catch(_0x3b0742){console['error']('Error\x20saving\x20article:',_0x3b0742),showNotification(_0x5c42f4(0x123)+_0x3b0742[_0x5c42f4(0x426)],_0x5c42f4(0x182));}}function closeArticleModal(){const _0x47c23d=a4_0xd679e2,_0x398451=document[_0x47c23d(0x185)](_0x47c23d(0x159));_0x398451&&_0x398451['classList'][_0x47c23d(0x3de)](_0x47c23d(0x39f));}async function confirmDeleteArticle(_0xb83d48){const _0x124499=a4_0xd679e2;if(confirm(_0x124499(0x1b8)))try{await deleteDoc(doc(db,_0x124499(0x371),_0xb83d48)),loadArticles(),showNotification(_0x124499(0x544),'success');}catch(_0x377b74){console[_0x124499(0x182)](_0x124499(0x212),_0x377b74),showNotification(_0x124499(0x321)+_0x377b74[_0x124499(0x426)],'error');}}function setupTrophyManagementSection(){const _0x3eb131=a4_0xd679e2,_0x2421b7=document[_0x3eb131(0x185)]('load-trophies-data');_0x2421b7&&_0x2421b7[_0x3eb131(0x1bc)](_0x3eb131(0x130),function(){const _0x35ac78=_0x3eb131;this[_0x35ac78(0x14a)][_0x35ac78(0x486)](_0x35ac78(0x489)),this[_0x35ac78(0x319)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x2275c7=document[_0x35ac78(0x185)](_0x35ac78(0x3f0));_0x2275c7&&(_0x2275c7[_0x35ac78(0x348)]=function(){const _0x59152e=_0x35ac78;this[_0x59152e(0x466)]=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x35ac78(0x484)](()=>{const _0x308e67=_0x35ac78;this[_0x308e67(0x14a)][_0x308e67(0x3de)](_0x308e67(0x489)),this['innerHTML']=_0x308e67(0x400);})[_0x35ac78(0x474)](_0x421874=>{const _0x38c3e3=_0x35ac78;console[_0x38c3e3(0x182)]('Error\x20loading\x20trophies:',_0x421874),this[_0x38c3e3(0x14a)][_0x38c3e3(0x3de)](_0x38c3e3(0x489)),this[_0x38c3e3(0x319)]=_0x38c3e3(0x51e),setTimeout(()=>{const _0x15a2f9=_0x38c3e3;this['innerHTML']=_0x15a2f9(0x400);},0xbb8);});});const _0x51e448=document[_0x3eb131(0x185)](_0x3eb131(0x1a8));_0x51e448&&_0x51e448['addEventListener'](_0x3eb131(0x130),()=>{openTrophyModal();});const _0x31e038=document[_0x3eb131(0x185)](_0x3eb131(0x22a));_0x31e038&&_0x31e038[_0x3eb131(0x1bc)]('submit',_0x16a119=>{const _0x30608d=_0x3eb131;_0x16a119[_0x30608d(0x2c3)](),saveTrophyDefinition();});const _0x571160=document[_0x3eb131(0x185)](_0x3eb131(0x402));_0x571160&&_0x571160[_0x3eb131(0x1bc)]('click',()=>{closeTrophyModal();});document['querySelectorAll'](_0x3eb131(0x55a))['forEach'](_0x189f63=>{const _0x2351c9=_0x3eb131;_0x189f63[_0x2351c9(0x1bc)](_0x2351c9(0x130),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x4f7aa0=document[_0x3eb131(0x185)](_0x3eb131(0x226));_0x4f7aa0&&_0x4f7aa0[_0x3eb131(0x1bc)](_0x3eb131(0x130),_0x4a469b=>{const _0x36986e=_0x3eb131;_0x4a469b[_0x36986e(0x2a8)]===_0x4f7aa0&&closeTrophyModal();});const _0x5a454c=document[_0x3eb131(0x185)](_0x3eb131(0x2bd));_0x5a454c&&_0x5a454c[_0x3eb131(0x1bc)](_0x3eb131(0x130),_0x5b74da=>{const _0x1ea2f7=_0x3eb131;_0x5b74da[_0x1ea2f7(0x2a8)]===_0x5a454c&&closeAssignTrophyModal();});const _0x198549=document[_0x3eb131(0x185)]('assign-trophy-form');_0x198549&&_0x198549[_0x3eb131(0x1bc)](_0x3eb131(0x44d),_0x42a2f4=>{_0x42a2f4['preventDefault'](),assignTrophyToPlayer();});const _0x284142=document['getElementById']('cancel-assign-btn');_0x284142&&_0x284142[_0x3eb131(0x1bc)]('click',()=>{closeAssignTrophyModal();});const _0x527975=document[_0x3eb131(0x185)](_0x3eb131(0x4d6));_0x527975&&(_0x527975['addEventListener'](_0x3eb131(0x2e7),updateTrophyImagePreview),_0x527975['addEventListener'](_0x3eb131(0x196),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0xe71d21=a4_0xd679e2,_0x46ce5b=document[_0xe71d21(0x185)](_0xe71d21(0x4d6))[_0xe71d21(0x227)][_0xe71d21(0x3c6)](),_0x1faee4=document['getElementById'](_0xe71d21(0x2c6));if(!_0x1faee4){const _0x346b4c=document['getElementById']('trophy-image-url')[_0xe71d21(0x242)]('.form-group'),_0x20d89a=document[_0xe71d21(0x54a)](_0xe71d21(0x1b1));_0x20d89a['id']=_0xe71d21(0x2c6),_0x20d89a['className']=_0xe71d21(0x2a3),_0x346b4c[_0xe71d21(0x180)](_0x20d89a);const _0x3bd540=document[_0xe71d21(0x54a)](_0xe71d21(0x178));_0x3bd540['id']=_0xe71d21(0x27d),_0x3bd540['alt']=_0xe71d21(0x43d),_0x3bd540[_0xe71d21(0x348)]=function(){const _0x2e62fb=_0xe71d21;this['src']=DEFAULT_TROPHY_IMAGE,this['classList'][_0x2e62fb(0x486)](_0x2e62fb(0x182));},_0x20d89a[_0xe71d21(0x180)](_0x3bd540);}const _0x273374=document[_0xe71d21(0x185)](_0xe71d21(0x27d));_0x46ce5b?(_0x273374['src']=_0x46ce5b,_0x273374['style'][_0xe71d21(0x563)]=_0xe71d21(0x1ed),_0x273374['classList'][_0xe71d21(0x3de)](_0xe71d21(0x182))):(_0x273374[_0xe71d21(0x466)]=DEFAULT_TROPHY_IMAGE,_0x273374[_0xe71d21(0x273)]['display']=_0xe71d21(0x1ed));}async function loadTrophyDefinitions(){const _0x57503a=a4_0xd679e2,_0x2f7615=document['getElementById'](_0x57503a(0x47d));if(!_0x2f7615)return;_0x2f7615[_0x57503a(0x319)]=_0x57503a(0x565);try{const _0x14632c=collection(db,_0x57503a(0x4ee)),_0x3263f4=query(_0x14632c,orderBy('createdAt',_0x57503a(0x332))),_0x14eb97=await getDocs(_0x3263f4);if(_0x14eb97[_0x57503a(0x294)]){_0x2f7615[_0x57503a(0x319)]=_0x57503a(0x344);return;}_0x2f7615[_0x57503a(0x319)]='',_0x14eb97[_0x57503a(0x4eb)](_0x4bbd23=>{const _0x20a012=_0x57503a,_0x5352e1=_0x4bbd23[_0x20a012(0x17d)](),_0x3813bf=document['createElement']('tr'),_0xaf3ebd=_0x5352e1[_0x20a012(0x4e8)]?new Date(_0x5352e1['createdAt']['seconds']*0x3e8)[_0x20a012(0x433)]():_0x20a012(0x1a4);_0x3813bf[_0x20a012(0x319)]=_0x20a012(0x1ec)+(_0x5352e1[_0x20a012(0x445)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5352e1['name']+_0x20a012(0x2e9)+DEFAULT_TROPHY_IMAGE+_0x20a012(0x24f)+(_0x5352e1[_0x20a012(0x257)]||'Untitled\x20Trophy')+_0x20a012(0x4e1)+(_0x5352e1[_0x20a012(0x34b)]||_0x20a012(0x31c))+'\x22>'+(_0x5352e1[_0x20a012(0x34b)]||'common')+_0x20a012(0x4c1)+_0xaf3ebd+_0x20a012(0x1d7)+_0x4bbd23['id']+_0x20a012(0x2bf)+_0x4bbd23['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x4bbd23['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2f7615[_0x20a012(0x180)](_0x3813bf);}),setupTrophyActionButtons();}catch(_0x38b95f){console[_0x57503a(0x182)](_0x57503a(0x22c),_0x38b95f),_0x2f7615[_0x57503a(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x38b95f['message']+_0x57503a(0x4cf);}}function setupTrophyActionButtons(){const _0x93588c=a4_0xd679e2;document['querySelectorAll']('.edit-trophy-btn')[_0x93588c(0x4eb)](_0x7e0dc5=>{const _0x4fe446=_0x93588c;_0x7e0dc5[_0x4fe446(0x1bc)](_0x4fe446(0x130),_0x153e57=>{const _0x3e4a30=_0x4fe446,_0x4b92b1=_0x153e57[_0x3e4a30(0x2b5)][_0x3e4a30(0x55c)]['id'];openTrophyModal(_0x4b92b1);});}),document[_0x93588c(0x4b2)](_0x93588c(0x2b2))['forEach'](_0x47ece4=>{_0x47ece4['addEventListener']('click',_0x3c0261=>{const _0x421660=a4_0x4408,_0x1765b2=_0x3c0261['currentTarget'][_0x421660(0x55c)]['id'];openAssignTrophyModal(_0x1765b2);});}),document[_0x93588c(0x4b2)]('.delete-trophy-btn')[_0x93588c(0x4eb)](_0x358a00=>{const _0x5f43d1=_0x93588c;_0x358a00[_0x5f43d1(0x1bc)](_0x5f43d1(0x130),_0xfbfcb3=>{const _0x54483b=_0x5f43d1,_0x359190=_0xfbfcb3[_0x54483b(0x2b5)][_0x54483b(0x55c)]['id'];confirmDeleteTrophy(_0x359190);});});}function openTrophyModal(_0x7e5a35=null){const _0x30375f=a4_0xd679e2,_0x58d2f8=document[_0x30375f(0x185)]('trophy-modal'),_0x199144=document[_0x30375f(0x185)]('trophy-modal-title'),_0xacb7a1=document['getElementById'](_0x30375f(0x22a)),_0x123448=document[_0x30375f(0x185)]('trophy-id');_0xacb7a1[_0x30375f(0x522)](),_0x123448[_0x30375f(0x227)]='';const _0x4b8aba=document[_0x30375f(0x185)](_0x30375f(0x27d));_0x4b8aba&&(_0x4b8aba['src']=DEFAULT_TROPHY_IMAGE,_0x4b8aba[_0x30375f(0x14a)][_0x30375f(0x3de)](_0x30375f(0x182))),_0x7e5a35?(_0x199144[_0x30375f(0x31d)]=_0x30375f(0x4b0),_0x123448[_0x30375f(0x227)]=_0x7e5a35,loadTrophyData(_0x7e5a35)):_0x199144[_0x30375f(0x31d)]=_0x30375f(0x570),_0x58d2f8['classList'][_0x30375f(0x486)](_0x30375f(0x39f));}async function loadTrophyData(_0x2ddbbd){const _0x2ce387=a4_0xd679e2;try{const _0x10eb33=doc(db,_0x2ce387(0x4ee),_0x2ddbbd),_0x2e7739=await getDoc(_0x10eb33);if(!_0x2e7739[_0x2ce387(0x2c2)]()){showNotification(_0x2ce387(0x45d),_0x2ce387(0x182));return;}const _0x132135=_0x2e7739[_0x2ce387(0x17d)]();document[_0x2ce387(0x185)](_0x2ce387(0x4ba))['value']=_0x132135[_0x2ce387(0x257)]||'',document[_0x2ce387(0x185)](_0x2ce387(0x21c))['value']=_0x132135[_0x2ce387(0x54c)]||'',document[_0x2ce387(0x185)](_0x2ce387(0x4d6))[_0x2ce387(0x227)]=_0x132135[_0x2ce387(0x445)]||'',document[_0x2ce387(0x185)]('trophy-rarity')['value']=_0x132135[_0x2ce387(0x34b)]||_0x2ce387(0x31c),updateTrophyImagePreview();}catch(_0x424cd9){console[_0x2ce387(0x182)](_0x2ce387(0x351),_0x424cd9),showNotification(_0x2ce387(0x2a1),_0x2ce387(0x182));}}async function saveTrophyDefinition(){const _0x1a9c25=a4_0xd679e2;try{const _0x4e036e=document['getElementById'](_0x1a9c25(0x3a1))[_0x1a9c25(0x227)],_0x3b007f=document[_0x1a9c25(0x185)](_0x1a9c25(0x4ba))[_0x1a9c25(0x227)][_0x1a9c25(0x3c6)](),_0x5ed758=document[_0x1a9c25(0x185)](_0x1a9c25(0x21c))['value'][_0x1a9c25(0x3c6)](),_0x5deb0b=document[_0x1a9c25(0x185)]('trophy-image-url')[_0x1a9c25(0x227)][_0x1a9c25(0x3c6)](),_0xd638a4=document[_0x1a9c25(0x185)](_0x1a9c25(0x45b))[_0x1a9c25(0x227)];if(!_0x3b007f||!_0x5ed758||!_0x5deb0b){showNotification('All\x20fields\x20are\x20required',_0x1a9c25(0x182));return;}const _0x58d153=auth['currentUser'];if(!_0x58d153){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x1a9c25(0x182));return;}const _0x5052f4={'name':_0x3b007f,'description':_0x5ed758,'image':_0x5deb0b,'rarity':_0xd638a4,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x58d153['email']};!_0x4e036e?(_0x5052f4[_0x1a9c25(0x4e8)]=serverTimestamp(),_0x5052f4[_0x1a9c25(0x389)]=_0x58d153[_0x1a9c25(0x420)],await addDoc(collection(db,_0x1a9c25(0x4ee)),_0x5052f4),showNotification(_0x1a9c25(0x507),'success')):(await updateDoc(doc(db,_0x1a9c25(0x4ee),_0x4e036e),_0x5052f4),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x119de1){console[_0x1a9c25(0x182)](_0x1a9c25(0x510),_0x119de1),showNotification(_0x1a9c25(0x3b2)+_0x119de1['message'],'error');}}function closeTrophyModal(){const _0xa50281=a4_0xd679e2,_0x4d48bd=document[_0xa50281(0x185)](_0xa50281(0x226));_0x4d48bd&&_0x4d48bd['classList']['remove'](_0xa50281(0x39f));}async function confirmDeleteTrophy(_0x3c5d58){const _0x1af7fb=a4_0xd679e2;if(!_0x3c5d58){console[_0x1af7fb(0x182)](_0x1af7fb(0x1d3));return;}if(confirm(_0x1af7fb(0x23f)))try{const _0x5136b6=auth[_0x1af7fb(0x171)];if(!_0x5136b6){showNotification(_0x1af7fb(0x408),_0x1af7fb(0x182));return;}console[_0x1af7fb(0x514)](_0x1af7fb(0x2e6)+_0x3c5d58),await deleteDoc(doc(db,_0x1af7fb(0x4ee),_0x3c5d58)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x1af7fb(0x16c)),loadTrophyDefinitions();}catch(_0x192de5){console[_0x1af7fb(0x182)]('Error\x20deleting\x20trophy\x20definition:',_0x192de5),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x192de5[_0x1af7fb(0x426)],_0x1af7fb(0x182));}}async function openAssignTrophyModal(_0x2214ea){const _0x396ec9=a4_0xd679e2;try{const _0x56023d=doc(db,_0x396ec9(0x4ee),_0x2214ea),_0x5172f0=await getDoc(_0x56023d);if(!_0x5172f0[_0x396ec9(0x2c2)]()){showNotification(_0x396ec9(0x45d),_0x396ec9(0x182));return;}const _0x2f36cb=_0x5172f0[_0x396ec9(0x17d)]();document[_0x396ec9(0x185)](_0x396ec9(0x15c))[_0x396ec9(0x227)]=_0x2214ea,document[_0x396ec9(0x185)](_0x396ec9(0x38c))[_0x396ec9(0x227)]=_0x2f36cb[_0x396ec9(0x257)],document[_0x396ec9(0x185)](_0x396ec9(0x3f0))[_0x396ec9(0x466)]=_0x2f36cb[_0x396ec9(0x445)]||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')[_0x396ec9(0x31d)]=_0x2f36cb[_0x396ec9(0x257)]||_0x396ec9(0x2c9),document[_0x396ec9(0x185)](_0x396ec9(0x254))[_0x396ec9(0x31d)]=_0x2f36cb['description']||_0x396ec9(0x3d9);const _0x4fc393=document[_0x396ec9(0x185)](_0x396ec9(0x262));_0x4fc393[_0x396ec9(0x31d)]=_0x2f36cb[_0x396ec9(0x34b)]||'common',_0x4fc393[_0x396ec9(0x4cd)]='trophy-rarity\x20'+(_0x2f36cb['rarity']||_0x396ec9(0x31c));const _0x222c97=document[_0x396ec9(0x185)](_0x396ec9(0x2bd));_0x222c97['classList'][_0x396ec9(0x486)](_0x396ec9(0x39f));}catch(_0x263b2f){console['error'](_0x396ec9(0x25d),_0x263b2f),showNotification(_0x396ec9(0x2a1),'error');}}function closeAssignTrophyModal(){const _0x888556=a4_0xd679e2,_0x40607d=document[_0x888556(0x185)](_0x888556(0x2bd));_0x40607d&&_0x40607d[_0x888556(0x14a)][_0x888556(0x3de)](_0x888556(0x39f));}async function assignTrophyToPlayer(){const _0xcdde69=a4_0xd679e2;try{const _0x3d10c8=document[_0xcdde69(0x185)](_0xcdde69(0x15c))['value'],_0x5a3ea2=document[_0xcdde69(0x185)](_0xcdde69(0x38c))[_0xcdde69(0x227)],_0x4d386d=document[_0xcdde69(0x185)](_0xcdde69(0x3f9))[_0xcdde69(0x227)][_0xcdde69(0x3c6)](),_0x39b250=document[_0xcdde69(0x388)](_0xcdde69(0x492))[_0xcdde69(0x227)];if(!_0x3d10c8||!_0x4d386d){showNotification(_0xcdde69(0x54d),_0xcdde69(0x182));return;}const _0x4e2898=auth[_0xcdde69(0x171)];if(!_0x4e2898){showNotification(_0xcdde69(0x497),_0xcdde69(0x182));return;}let _0x488038=null,_0x245179=null,_0x40887b=null;if(_0x39b250==='non-participant'){const _0x376574=collection(db,_0xcdde69(0x3f4)),_0x42c700=query(_0x376574,where(_0xcdde69(0x177),'==',_0x4d386d)),_0x5a39dd=await getDocs(_0x42c700);!_0x5a39dd[_0xcdde69(0x294)]&&(_0x488038=_0x5a39dd[_0xcdde69(0x4e3)][0x0],_0x245179=_0x488038['id'],_0x40887b=_0x488038['data']());}else{const _0x397320=_0x39b250==='D1'?_0xcdde69(0x2ea):_0x39b250==='D2'?_0xcdde69(0x4e9):_0xcdde69(0x392),_0x434c9b=collection(db,_0x397320),_0x402428=query(_0x434c9b,where(_0xcdde69(0x177),'==',_0x4d386d)),_0x1b6798=await getDocs(_0x402428);!_0x1b6798['empty']&&(_0x488038=_0x1b6798[_0xcdde69(0x4e3)][0x0],_0x245179=_0x488038['id'],_0x40887b=_0x488038[_0xcdde69(0x17d)]());}if(!_0x488038){showNotification('Player\x20\x22'+_0x4d386d+'\x22\x20not\x20found\x20in\x20'+(_0x39b250===_0xcdde69(0x3c5)?_0xcdde69(0x429):_0x39b250+'\x20ladder'),_0xcdde69(0x182));return;}const _0x4a890a=collection(db,'userTrophies'),_0x3093a3=query(_0x4a890a,where(_0xcdde69(0x54e),'==',_0x245179),where('trophyId','==',_0x3d10c8)),_0x4bfc0a=await getDocs(_0x3093a3);if(!_0x4bfc0a[_0xcdde69(0x294)]){showNotification('Player\x20\x22'+_0x4d386d+_0xcdde69(0x349),_0xcdde69(0x2df));return;}await addDoc(collection(db,_0xcdde69(0x470)),{'userId':_0x245179,'playerUsername':_0x4d386d,'trophyId':_0x3d10c8,'awardedAt':serverTimestamp(),'awardedBy':_0x4e2898['email'],'ladder':_0x39b250}),showNotification(_0xcdde69(0x40d)+_0x5a3ea2+_0xcdde69(0x280)+_0x4d386d,'success'),closeAssignTrophyModal();}catch(_0x3e7307){console['error'](_0xcdde69(0x1c5),_0x3e7307),showNotification(_0xcdde69(0x431)+_0x3e7307[_0xcdde69(0x426)],_0xcdde69(0x182));}}function setupInactivePlayersSection(){const _0x40d375=a4_0xd679e2,_0xecf72a=document[_0x40d375(0x185)](_0x40d375(0x407));_0xecf72a&&_0xecf72a[_0x40d375(0x1bc)](_0x40d375(0x370),function(){const _0x3a4465=_0x40d375,_0x2cae12=document[_0x3a4465(0x185)]('load-inactive-players-data');if(_0x2cae12)_0x2cae12[_0x3a4465(0x130)]();});const _0x2dc147=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x4e58bd=document[_0x40d375(0x388)](_0x40d375(0x2af));_0x2dc147&&_0x4e58bd&&(_0x2dc147[_0x40d375(0x1bc)](_0x40d375(0x370),function(){const _0x24a6e2=_0x40d375;if(this[_0x24a6e2(0x51b)]){currentLadder='D1';if(document['getElementById'](_0x24a6e2(0x4b7))[_0x24a6e2(0x273)][_0x24a6e2(0x563)]!==_0x24a6e2(0x229)){const _0x3a5e4d=document[_0x24a6e2(0x185)](_0x24a6e2(0x554));if(_0x3a5e4d)_0x3a5e4d[_0x24a6e2(0x130)]();}}}),_0x4e58bd[_0x40d375(0x1bc)](_0x40d375(0x370),function(){const _0x3093be=_0x40d375;if(this[_0x3093be(0x51b)]){currentLadder='D2';if(document['getElementById'](_0x3093be(0x4b7))[_0x3093be(0x273)][_0x3093be(0x563)]!==_0x3093be(0x229)){const _0x5998b5=document[_0x3093be(0x185)](_0x3093be(0x554));if(_0x5998b5)_0x5998b5[_0x3093be(0x130)]();}}}));const _0x4053ea=document[_0x40d375(0x185)](_0x40d375(0x32f));_0x4053ea&&_0x4053ea[_0x40d375(0x1bc)](_0x40d375(0x2e7),debounce(function(){const _0x2c1cad=_0x40d375,_0x3fb68a=_0x4053ea[_0x2c1cad(0x227)][_0x2c1cad(0x16e)](),_0x53daa1=document[_0x2c1cad(0x4b2)](_0x2c1cad(0x340));_0x53daa1[_0x2c1cad(0x4eb)](_0x581b59=>{const _0x65622f=_0x2c1cad;if(_0x581b59[_0x65622f(0x388)](_0x65622f(0x258))||_0x581b59[_0x65622f(0x388)](_0x65622f(0x184))||_0x581b59[_0x65622f(0x388)](_0x65622f(0x52b)))return;const _0x5eccf3=_0x581b59[_0x65622f(0x2fb)][0x0]?.['textContent'][_0x65622f(0x16e)]()||'',_0x1f2995=_0x581b59[_0x65622f(0x2fb)][0x5]?.['textContent'][_0x65622f(0x16e)]()||'';_0x5eccf3[_0x65622f(0x3ae)](_0x3fb68a)||_0x1f2995['includes'](_0x3fb68a)?_0x581b59[_0x65622f(0x273)][_0x65622f(0x563)]='':_0x581b59[_0x65622f(0x273)]['display']=_0x65622f(0x229);});},0x12c)),document[_0x40d375(0x1bc)](_0x40d375(0x130),function(_0xf85879){const _0x4cdcbf=_0x40d375;if(_0xf85879[_0x4cdcbf(0x2a8)][_0x4cdcbf(0x242)](_0x4cdcbf(0x181))){const _0x1c0041=_0xf85879[_0x4cdcbf(0x2a8)]['closest'](_0x4cdcbf(0x181)),_0x108587=_0x1c0041[_0x4cdcbf(0x55c)][_0x4cdcbf(0x177)];_0x108587&&alert(_0x4cdcbf(0x2cf)+_0x108587+_0x4cdcbf(0x311));}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x2b620b=a4_0xd679e2,_0x7d7da=document[_0x2b620b(0x185)]('inactive-players-table-body');if(!_0x7d7da)return;_0x7d7da['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x1cf0c8=document[_0x2b620b(0x185)]('inactive-days-filter'),_0x5ba60c=_0x1cf0c8?parseInt(_0x1cf0c8[_0x2b620b(0x227)])||0x0:0x0,_0x3a0d6f=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x63d567=await getDocs(_0x3a0d6f);if(_0x63d567[_0x2b620b(0x294)]){_0x7d7da['innerHTML']=_0x2b620b(0x164);return;}const _0x53ecec=[];_0x63d567[_0x2b620b(0x4eb)](_0x325611=>{const _0x2b5119=_0x2b620b,_0x4fbabf=_0x325611[_0x2b5119(0x17d)]();_0x53ecec[_0x2b5119(0x3a6)]({..._0x4fbabf,'id':_0x325611['id'],'username':_0x4fbabf['username']||_0x2b5119(0x352)});}),console[_0x2b620b(0x514)]('Found\x20'+_0x53ecec[_0x2b620b(0x190)]+'\x20total\x20players\x20in\x20the\x20'+currentLadder+_0x2b620b(0x2f0));const _0x5808b6=currentLadder==='D1'?_0x2b620b(0x252):_0x2b620b(0x4bd),_0x3c5aba=_0x53ecec[_0x2b620b(0x541)](async _0x8d2ec1=>{const _0x200bae=_0x2b620b;try{const _0x2db695=collection(db,_0x5808b6),_0x69950a=query(_0x2db695,or(where(_0x200bae(0x55e),'==',_0x8d2ec1[_0x200bae(0x177)]),where(_0x200bae(0x2a2),'==',_0x8d2ec1[_0x200bae(0x177)])),orderBy(_0x200bae(0x142),'desc'),limit(0x1)),_0x4ad071=await getDocs(_0x69950a);if(!_0x4ad071['empty']){const _0x360308=_0x4ad071['docs'][0x0][_0x200bae(0x17d)](),_0x2e4233=_0x360308[_0x200bae(0x142)]?new Date(_0x360308[_0x200bae(0x142)][_0x200bae(0x23a)]*0x3e8):null,_0x24b4cd=new Date(),_0x1606ff=_0x2e4233?Math[_0x200bae(0x53a)]((_0x24b4cd-_0x2e4233)/(0x3e8*0x3c*0x3c*0x18)):null,_0x5714a1=_0x360308['winnerUsername']===_0x8d2ec1[_0x200bae(0x177)]?_0x360308[_0x200bae(0x2a2)]:_0x360308[_0x200bae(0x55e)],_0x349e2e=_0x360308[_0x200bae(0x55e)]===_0x8d2ec1['username']?_0x200bae(0x457):'Lost';return{..._0x8d2ec1,'lastMatch':{'date':_0x2e4233?_0x2e4233[_0x200bae(0x3c7)]():'N/A','opponent':_0x5714a1||_0x200bae(0x398),'result':_0x349e2e,'timestamp':_0x2e4233||new Date(0x0),'daysSinceMatch':_0x1606ff||Number[_0x200bae(0x15d)]}};}else return{..._0x8d2ec1,'lastMatch':{'date':'Never\x20played','opponent':_0x200bae(0x1a4),'result':_0x200bae(0x1a4),'timestamp':new Date(0x0),'daysSinceMatch':Number[_0x200bae(0x15d)]}};}catch(_0x35f1b3){return console['error'](_0x200bae(0x288)+_0x8d2ec1[_0x200bae(0x177)]+':',_0x35f1b3),{..._0x8d2ec1,'lastMatch':{'date':'Error','opponent':_0x200bae(0x56f),'result':_0x200bae(0x56f),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x58e8c4=await Promise[_0x2b620b(0x33e)](_0x3c5aba);_0x58e8c4[_0x2b620b(0x508)]((_0x3e3390,_0x1b39f8)=>_0x1b39f8[_0x2b620b(0x356)][_0x2b620b(0x138)]-_0x3e3390['lastMatch'][_0x2b620b(0x138)]);_0x5ba60c>0x0&&(_0x58e8c4=_0x58e8c4['filter'](_0x2c9f39=>_0x2c9f39[_0x2b620b(0x356)][_0x2b620b(0x138)]>=_0x5ba60c));_0x7d7da['innerHTML']='';if(_0x58e8c4[_0x2b620b(0x190)]===0x0){_0x7d7da[_0x2b620b(0x319)]=_0x2b620b(0x235);return;}_0x58e8c4[_0x2b620b(0x4eb)](_0x34ffdb=>{const _0x51f575=_0x2b620b,_0x5eda06=document[_0x51f575(0x54a)]('tr'),_0x1f45e8=_0x34ffdb[_0x51f575(0x356)][_0x51f575(0x138)]>0x1e?_0x51f575(0x266):_0x34ffdb['lastMatch']['daysSinceMatch']>0xe?_0x51f575(0x34f):'';_0x5eda06[_0x51f575(0x4cd)]=_0x1f45e8,_0x5eda06['innerHTML']=_0x51f575(0x20c)+_0x34ffdb[_0x51f575(0x177)]+_0x51f575(0x25a)+(_0x34ffdb[_0x51f575(0x17c)]||0x4b0)+_0x51f575(0x25a)+_0x34ffdb['lastMatch'][_0x51f575(0x305)]+_0x51f575(0x25a)+(_0x34ffdb[_0x51f575(0x356)]['daysSinceMatch']===Number[_0x51f575(0x15d)]?_0x51f575(0x1a4):_0x34ffdb['lastMatch'][_0x51f575(0x138)])+_0x51f575(0x25a)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x34ffdb['lastMatch'][_0x51f575(0x305)]===_0x51f575(0x2fd)?'No\x20matches\x20found':_0x34ffdb['lastMatch'][_0x51f575(0x3ac)]+_0x51f575(0x495)+_0x34ffdb[_0x51f575(0x356)][_0x51f575(0x34c)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x34ffdb[_0x51f575(0x177)]+_0x51f575(0x481),_0x7d7da[_0x51f575(0x180)](_0x5eda06);}),console[_0x2b620b(0x514)](_0x2b620b(0x1f6)+_0x58e8c4[_0x2b620b(0x190)]+_0x2b620b(0x160));}catch(_0x1e34e1){console[_0x2b620b(0x182)]('Error\x20loading\x20inactive\x20players:',_0x1e34e1),_0x7d7da[_0x2b620b(0x319)]=_0x2b620b(0x3c1)+_0x1e34e1[_0x2b620b(0x426)]+_0x2b620b(0x465);}}function setupHighlightButtons(){const _0xa640af=a4_0xd679e2;console[_0xa640af(0x514)](_0xa640af(0x2b3));const _0x295dfb=document[_0xa640af(0x185)](_0xa640af(0x21f));_0x295dfb&&_0x295dfb['addEventListener'](_0xa640af(0x130),function(){const _0x232940=_0xa640af;console['log'](_0x232940(0x38a)),openHighlightModal(_0x232940(0x231));});const _0x12b53f=document[_0xa640af(0x185)](_0xa640af(0x4d7));_0x12b53f&&_0x12b53f[_0xa640af(0x1bc)]('click',function(){const _0x4160c3=_0xa640af;console[_0x4160c3(0x514)](_0x4160c3(0x4fd)),openHighlightModal(_0x4160c3(0x2f1));});const _0x66af81=document[_0xa640af(0x185)](_0xa640af(0x506));_0x66af81&&_0x66af81[_0xa640af(0x1bc)](_0xa640af(0x130),function(){const _0x10a187=_0xa640af;console[_0x10a187(0x514)](_0x10a187(0x1e5)),openHighlightModal(_0x10a187(0x45e));});}function openHighlightModal(_0x638ac5='match'){const _0xd4bcfe=a4_0xd679e2;console['log'](_0xd4bcfe(0x55d)+_0x638ac5);const _0x1914cf=document['getElementById']('highlight-modal'),_0x24a210=document[_0xd4bcfe(0x185)](_0xd4bcfe(0x1ad)),_0xa23cd9=document['getElementById'](_0xd4bcfe(0x3b0)),_0x45ce31=document[_0xd4bcfe(0x185)](_0xd4bcfe(0x3e9));if(!_0x1914cf||!_0x24a210||!_0xa23cd9){console[_0xd4bcfe(0x182)]('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x24a210['reset'](),_0x45ce31['value']='';const _0x7ab6fb=['match','creator',_0xd4bcfe(0x45e)],_0x310801=!_0x7ab6fb[_0xd4bcfe(0x3ae)](_0x638ac5);if(_0x310801){const _0x6081ad=_0x638ac5;_0x45ce31[_0xd4bcfe(0x227)]=_0x6081ad,_0xa23cd9[_0xd4bcfe(0x31d)]=_0xd4bcfe(0x550),loadHighlightDataAdmin(_0x6081ad);}else{const _0x4f87b5=_0x638ac5;document[_0xd4bcfe(0x185)](_0xd4bcfe(0x195))[_0xd4bcfe(0x227)]=_0x4f87b5,_0xa23cd9[_0xd4bcfe(0x31d)]=_0xd4bcfe(0x154)+getHighlightTypeName(_0x4f87b5),toggleHighlightFields(_0x4f87b5);const _0x4f0e4a=auth['currentUser'];_0x4f0e4a&&document[_0xd4bcfe(0x185)](_0xd4bcfe(0x1fe))&&(document['getElementById'](_0xd4bcfe(0x1fe))['value']=_0x4f0e4a[_0xd4bcfe(0x33d)]||_0x4f0e4a['email']);}_0x1914cf['classList'][_0xd4bcfe(0x486)](_0xd4bcfe(0x39f));}function toggleHighlightFields(_0x55c1c2){const _0x4f4d46=a4_0xd679e2;console['log'](_0x4f4d46(0x3e7)+_0x55c1c2);const _0x2efd2a=document[_0x4f4d46(0x185)](_0x4f4d46(0x1ad));if(!_0x2efd2a)return;const _0x103328=_0x2efd2a[_0x4f4d46(0x4b2)](_0x4f4d46(0x4ea));_0x103328['forEach'](_0x3ae374=>_0x3ae374[_0x4f4d46(0x273)][_0x4f4d46(0x563)]=_0x4f4d46(0x229));const _0x2ddb0c=document[_0x4f4d46(0x185)](_0x4f4d46(0x334));if(_0x2ddb0c)_0x2ddb0c[_0x4f4d46(0x273)][_0x4f4d46(0x563)]=_0x4f4d46(0x229);const _0x4a0615=[_0x4f4d46(0x459),_0x4f4d46(0x306),_0x4f4d46(0x2fc)];_0x4a0615['forEach'](_0x5f4867=>{const _0x392cce=_0x4f4d46,_0x57d6e0=document['getElementById'](_0x5f4867);if(_0x57d6e0)_0x57d6e0['style'][_0x392cce(0x563)]=_0x392cce(0x1ed);});if(_0x55c1c2==='match'){const _0x1793e1=[_0x4f4d46(0x32d),_0x4f4d46(0x483),_0x4f4d46(0x530),_0x4f4d46(0x133),_0x4f4d46(0x169),_0x4f4d46(0x2a4)];_0x1793e1[_0x4f4d46(0x4eb)](_0x1ab063=>{const _0x396058=_0x4f4d46,_0x3f9141=document[_0x396058(0x185)](_0x1ab063);_0x3f9141&&(_0x1ab063===_0x396058(0x169)?_0x3f9141[_0x396058(0x273)][_0x396058(0x563)]=_0x396058(0x4cc):_0x3f9141[_0x396058(0x273)][_0x396058(0x563)]=_0x396058(0x1ed));});const _0x57b653=document[_0x4f4d46(0x185)](_0x4f4d46(0x3dd));if(_0x57b653){_0x57b653['required']=!![];const _0x42c9c1=_0x57b653[_0x4f4d46(0x2cc)];if(_0x42c9c1)_0x42c9c1['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x2ddb0c)_0x2ddb0c[_0x4f4d46(0x273)][_0x4f4d46(0x563)]=_0x4f4d46(0x1ed);updateHighlightVideoPreview();}else{if(_0x55c1c2==='creator'){const _0x5ec563=['highlight-map-container','highlight-map-creator-container',_0x4f4d46(0x4f9),'highlight-creator-image-container',_0x4f4d46(0x32d)];_0x5ec563[_0x4f4d46(0x4eb)](_0x1c0c82=>{const _0x490eb5=_0x4f4d46,_0x15e0cf=document[_0x490eb5(0x185)](_0x1c0c82);if(_0x15e0cf)_0x15e0cf[_0x490eb5(0x273)][_0x490eb5(0x563)]=_0x490eb5(0x1ed);});const _0x4feb8c=document[_0x4f4d46(0x185)](_0x4f4d46(0x3dd));if(_0x4feb8c){_0x4feb8c[_0x4f4d46(0x150)]=![];const _0x9c40c0=_0x4feb8c[_0x4f4d46(0x2cc)];if(_0x9c40c0)_0x9c40c0[_0x4f4d46(0x319)]=_0x4f4d46(0x4f3);}}else{if(_0x55c1c2===_0x4f4d46(0x45e)){const _0x4ec60=[_0x4f4d46(0x18e),_0x4f4d46(0x3a2),_0x4f4d46(0x51c),'highlight-player-profile-container',_0x4f4d46(0x540),_0x4f4d46(0x32d)];_0x4ec60[_0x4f4d46(0x4eb)](_0x155032=>{const _0x3e946c=_0x4f4d46,_0x49ee6b=document['getElementById'](_0x155032);if(_0x49ee6b)_0x49ee6b[_0x3e946c(0x273)][_0x3e946c(0x563)]=_0x3e946c(0x1ed);});const _0x35869b=document[_0x4f4d46(0x185)](_0x4f4d46(0x3dd));if(_0x35869b){_0x35869b[_0x4f4d46(0x150)]=![];const _0x59eb86=_0x35869b['previousElementSibling'];if(_0x59eb86)_0x59eb86['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x3ef248){const _0x21f3ba=a4_0xd679e2;try{const _0x33675a=doc(db,_0x21f3ba(0x3f7),_0x3ef248),_0x2e9e94=await getDoc(_0x33675a);if(!_0x2e9e94[_0x21f3ba(0x2c2)]()){showNotification(_0x21f3ba(0x29f),_0x21f3ba(0x182));return;}const _0x55ef1d=_0x2e9e94[_0x21f3ba(0x17d)](),_0x4bd685=_0x55ef1d[_0x21f3ba(0x41c)]||_0x21f3ba(0x231);document[_0x21f3ba(0x185)]('highlight-modal-title')['textContent']=_0x21f3ba(0x3e3)+getHighlightTypeName(_0x4bd685),document[_0x21f3ba(0x185)](_0x21f3ba(0x195))[_0x21f3ba(0x227)]=_0x4bd685,toggleHighlightFields(_0x4bd685),document[_0x21f3ba(0x185)](_0x21f3ba(0x189))[_0x21f3ba(0x227)]=_0x55ef1d[_0x21f3ba(0x19c)]||'',document['getElementById'](_0x21f3ba(0x214))['value']=_0x55ef1d[_0x21f3ba(0x54c)]||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x1fe))[_0x21f3ba(0x227)]=_0x55ef1d['submittedBy']||'';_0x55ef1d['videoId']&&(document[_0x21f3ba(0x185)](_0x21f3ba(0x3dd))['value']=_0x55ef1d['videoId'],updateHighlightVideoPreview());if(_0x4bd685===_0x21f3ba(0x231)){document[_0x21f3ba(0x185)](_0x21f3ba(0x1be))['value']=_0x55ef1d[_0x21f3ba(0x3a9)]||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x18c))['value']=_0x55ef1d[_0x21f3ba(0x541)]||'';if(_0x55ef1d[_0x21f3ba(0x23c)]){const _0x3e7db7=new Date(_0x55ef1d['matchDate'][_0x21f3ba(0x23a)]*0x3e8);document[_0x21f3ba(0x185)]('highlight-match-date')[_0x21f3ba(0x227)]=_0x3e7db7[_0x21f3ba(0x22d)]()[_0x21f3ba(0x4dc)]('T')[0x0];}document[_0x21f3ba(0x185)](_0x21f3ba(0x323))[_0x21f3ba(0x227)]=_0x55ef1d['winnerName']||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x36a))[_0x21f3ba(0x227)]=_0x55ef1d[_0x21f3ba(0x526)]||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x2a5))[_0x21f3ba(0x227)]=_0x55ef1d[_0x21f3ba(0x20f)]||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x330))['value']=_0x55ef1d[_0x21f3ba(0x3b3)]||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x125))[_0x21f3ba(0x227)]=_0x55ef1d[_0x21f3ba(0x42f)]||'';}else{if(_0x4bd685===_0x21f3ba(0x2f1))document[_0x21f3ba(0x185)](_0x21f3ba(0x18c))['value']=_0x55ef1d['map']||'',document['getElementById'](_0x21f3ba(0x2ee))['value']=_0x55ef1d['mapCreator']||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x441))[_0x21f3ba(0x227)]=_0x55ef1d[_0x21f3ba(0x2e8)]||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x298))[_0x21f3ba(0x227)]=_0x55ef1d[_0x21f3ba(0x1b2)]||'';else _0x4bd685===_0x21f3ba(0x45e)&&(document[_0x21f3ba(0x185)](_0x21f3ba(0x577))[_0x21f3ba(0x227)]=_0x55ef1d[_0x21f3ba(0x55b)]||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x3ca))['value']=_0x55ef1d[_0x21f3ba(0x491)]||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x151))[_0x21f3ba(0x227)]=_0x55ef1d['achievementDetails']||'',document['getElementById'](_0x21f3ba(0x545))['value']=_0x55ef1d['playerProfileUrl']||'',document[_0x21f3ba(0x185)](_0x21f3ba(0x31b))[_0x21f3ba(0x227)]=_0x55ef1d[_0x21f3ba(0x51a)]||'');}}catch(_0x15a378){console[_0x21f3ba(0x182)]('Error\x20loading\x20highlight:',_0x15a378),showNotification(_0x21f3ba(0x560)+_0x15a378[_0x21f3ba(0x426)],_0x21f3ba(0x182));}}async function saveHighlight(){const _0xaae5ca=a4_0xd679e2;try{const _0x106b23=document[_0xaae5ca(0x185)]('highlight-id')?.['value']||'',_0x268210=document[_0xaae5ca(0x185)]('highlight-type')?.[_0xaae5ca(0x227)]||_0xaae5ca(0x231),_0x3249e3={'title':document[_0xaae5ca(0x185)]('highlight-title')?.[_0xaae5ca(0x227)]?.[_0xaae5ca(0x3c6)]()||'','description':document[_0xaae5ca(0x185)]('highlight-description')?.[_0xaae5ca(0x227)]?.[_0xaae5ca(0x3c6)]()||'','submittedBy':document[_0xaae5ca(0x185)](_0xaae5ca(0x1fe))?.[_0xaae5ca(0x227)]?.['trim']()||'','videoId':document['getElementById'](_0xaae5ca(0x3dd))?.[_0xaae5ca(0x227)]?.['trim']()||null,'type':_0x268210};if(!_0x3249e3[_0xaae5ca(0x19c)]){showNotification(_0xaae5ca(0x157),_0xaae5ca(0x182));return;}if(_0x268210===_0xaae5ca(0x231)){_0x3249e3[_0xaae5ca(0x3a9)]=document[_0xaae5ca(0x185)](_0xaae5ca(0x1be))?.[_0xaae5ca(0x227)]?.[_0xaae5ca(0x3c6)]()||'',_0x3249e3[_0xaae5ca(0x541)]=document[_0xaae5ca(0x185)](_0xaae5ca(0x18c))?.[_0xaae5ca(0x227)]?.[_0xaae5ca(0x3c6)]()||'';const _0x9e3cdc=document[_0xaae5ca(0x185)](_0xaae5ca(0x528)),_0x5844c8=_0x9e3cdc?.['value']||'';_0x3249e3[_0xaae5ca(0x23c)]=_0x5844c8?Timestamp[_0xaae5ca(0x4a4)](new Date(_0x5844c8)):null,_0x3249e3[_0xaae5ca(0x455)]=document[_0xaae5ca(0x185)]('highlight-winner-name')?.[_0xaae5ca(0x227)]?.['trim']()||'',_0x3249e3[_0xaae5ca(0x526)]=document[_0xaae5ca(0x185)]('highlight-winner-score')?.['value']?.[_0xaae5ca(0x3c6)]()||'',_0x3249e3[_0xaae5ca(0x20f)]=document[_0xaae5ca(0x185)](_0xaae5ca(0x2a5))?.['value']?.[_0xaae5ca(0x3c6)]()||'',_0x3249e3[_0xaae5ca(0x3b3)]=document[_0xaae5ca(0x185)]('highlight-loser-score')?.[_0xaae5ca(0x227)]?.['trim']()||'',_0x3249e3['matchLink']=document[_0xaae5ca(0x185)](_0xaae5ca(0x125))?.[_0xaae5ca(0x227)]?.[_0xaae5ca(0x3c6)]()||'';if(!_0x3249e3[_0xaae5ca(0x40a)]){showNotification(_0xaae5ca(0x3ef),'error');return;}}else{if(_0x268210===_0xaae5ca(0x2f1)){_0x3249e3[_0xaae5ca(0x541)]=document[_0xaae5ca(0x185)](_0xaae5ca(0x18c))?.[_0xaae5ca(0x227)]?.[_0xaae5ca(0x3c6)]()||'',_0x3249e3[_0xaae5ca(0x375)]=document['getElementById']('highlight-map-creator')?.['value']?.[_0xaae5ca(0x3c6)]()||'',_0x3249e3[_0xaae5ca(0x2e8)]=document[_0xaae5ca(0x185)](_0xaae5ca(0x441))?.['value']?.['trim']()||'',_0x3249e3[_0xaae5ca(0x1b2)]=document[_0xaae5ca(0x185)](_0xaae5ca(0x298))?.[_0xaae5ca(0x227)]?.['trim']()||'';if(!_0x3249e3['mapCreator']){showNotification(_0xaae5ca(0x512),_0xaae5ca(0x182));return;}}else{if(_0x268210==='achievement'){_0x3249e3['achievementPlayer']=document[_0xaae5ca(0x185)](_0xaae5ca(0x577))?.[_0xaae5ca(0x227)]?.['trim']()||'',_0x3249e3[_0xaae5ca(0x491)]=document[_0xaae5ca(0x185)](_0xaae5ca(0x3ca))?.['value']?.[_0xaae5ca(0x3c6)]()||'',_0x3249e3[_0xaae5ca(0x296)]=document[_0xaae5ca(0x185)]('highlight-achievement-details')?.[_0xaae5ca(0x227)]?.[_0xaae5ca(0x3c6)]()||'',_0x3249e3[_0xaae5ca(0x4a7)]=document['getElementById'](_0xaae5ca(0x545))?.['value']?.['trim']()||'',_0x3249e3[_0xaae5ca(0x51a)]=document['getElementById'](_0xaae5ca(0x31b))?.['value']?.[_0xaae5ca(0x3c6)]()||'';if(!_0x3249e3[_0xaae5ca(0x55b)]){showNotification(_0xaae5ca(0x14c),_0xaae5ca(0x182));return;}}}}_0x106b23?(_0x3249e3[_0xaae5ca(0x575)]=serverTimestamp(),await updateDoc(doc(db,_0xaae5ca(0x3f7),_0x106b23),_0x3249e3),showNotification(_0xaae5ca(0x406),_0xaae5ca(0x16c))):(_0x3249e3[_0xaae5ca(0x4e8)]=serverTimestamp(),await addDoc(collection(db,_0xaae5ca(0x3f7)),_0x3249e3),showNotification(_0xaae5ca(0x571),_0xaae5ca(0x16c))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x409813){console[_0xaae5ca(0x182)](_0xaae5ca(0x14f),_0x409813),showNotification(_0xaae5ca(0x28a)+_0x409813['message'],_0xaae5ca(0x182));}}function closeHighlightModal(){const _0x218b02=a4_0xd679e2,_0x505895=document[_0x218b02(0x185)]('highlight-modal');if(_0x505895)_0x505895['classList'][_0x218b02(0x3de)]('active');}function getHighlightTypeName(_0x22617f){const _0xf1f1d5=a4_0xd679e2;switch(_0x22617f){case _0xf1f1d5(0x231):return _0xf1f1d5(0x384);case _0xf1f1d5(0x2f1):return _0xf1f1d5(0x4d2);case _0xf1f1d5(0x45e):return'Player\x20Achievement';default:return _0xf1f1d5(0x331);}}function updateHighlightVideoPreview(){const _0x5174ef=a4_0xd679e2,_0x24a489=document[_0x5174ef(0x185)](_0x5174ef(0x3dd)),_0x2c0bed=document[_0x5174ef(0x185)](_0x5174ef(0x334)),_0x3f0c80=document['getElementById'](_0x5174ef(0x453));if(!_0x24a489||!_0x3f0c80||!_0x2c0bed)return;const _0x182169=_0x24a489['value'][_0x5174ef(0x3c6)]();_0x182169&&/^[a-zA-Z0-9_-]{11}$/[_0x5174ef(0x19f)](_0x182169)?(_0x3f0c80[_0x5174ef(0x466)]=_0x5174ef(0x287)+_0x182169,_0x2c0bed[_0x5174ef(0x273)][_0x5174ef(0x563)]=_0x5174ef(0x1ed)):(_0x3f0c80[_0x5174ef(0x466)]='',_0x2c0bed['style'][_0x5174ef(0x563)]='none');}async function loadHighlightsAdmin(){const _0x2b0b50=a4_0xd679e2,_0xe491db=document[_0x2b0b50(0x185)](_0x2b0b50(0x12a));if(!_0xe491db)return;_0xe491db[_0x2b0b50(0x319)]=_0x2b0b50(0x2fe);try{const _0x204154=query(collection(db,_0x2b0b50(0x3f7)),orderBy(_0x2b0b50(0x4e8),_0x2b0b50(0x332))),_0x1b5f7b=await getDocs(_0x204154);if(_0x1b5f7b['empty']){_0xe491db[_0x2b0b50(0x319)]=_0x2b0b50(0x3cf);return;}_0xe491db['innerHTML']='',_0x1b5f7b['forEach'](_0x4c9f92=>{const _0x23b786=_0x2b0b50,_0x29fa96=_0x4c9f92[_0x23b786(0x17d)](),_0x35b082=document[_0x23b786(0x54a)]('tr'),_0x22225c=_0x29fa96[_0x23b786(0x4e8)]?new Date(_0x29fa96['createdAt'][_0x23b786(0x23a)]*0x3e8)[_0x23b786(0x3c7)]():'N/A';let _0x55666c=_0x23b786(0x398),_0x440d74='';switch(_0x29fa96[_0x23b786(0x41c)]){case _0x23b786(0x231):_0x55666c='Match',_0x440d74=_0x23b786(0x2ce);break;case _0x23b786(0x2f1):_0x55666c='Creator',_0x440d74=_0x23b786(0x4d5);break;case _0x23b786(0x45e):_0x55666c=_0x23b786(0x4f0),_0x440d74=_0x23b786(0x220);break;}_0x35b082[_0x23b786(0x319)]=_0x23b786(0x20c)+(_0x29fa96[_0x23b786(0x19c)]||_0x23b786(0x378))+_0x23b786(0x1ef)+_0x440d74+'\x22>'+_0x55666c+_0x23b786(0x458)+_0x22225c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x29fa96['submittedBy']||_0x23b786(0x398))+_0x23b786(0x25a)+(_0x29fa96[_0x23b786(0x40a)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x23b786(0x3b9))+_0x23b786(0x1da)+_0x4c9f92['id']+_0x23b786(0x460)+_0x4c9f92['id']+_0x23b786(0x502),_0xe491db[_0x23b786(0x180)](_0x35b082);}),document[_0x2b0b50(0x4b2)]('.edit-highlight-btn')[_0x2b0b50(0x4eb)](_0x37e469=>{const _0x1c2568=_0x2b0b50;_0x37e469[_0x1c2568(0x1bc)](_0x1c2568(0x130),_0x142bf5=>{const _0x53ad53=_0x1c2568;openHighlightModal(_0x142bf5[_0x53ad53(0x2b5)][_0x53ad53(0x55c)]['id']);});}),document[_0x2b0b50(0x4b2)]('.delete-highlight-btn')[_0x2b0b50(0x4eb)](_0x5c346b=>{const _0x1ce2f9=_0x2b0b50;_0x5c346b[_0x1ce2f9(0x1bc)](_0x1ce2f9(0x130),_0x4535c6=>{const _0x4de2b2=_0x1ce2f9;confirmDeleteHighlight(_0x4535c6[_0x4de2b2(0x2b5)][_0x4de2b2(0x55c)]['id']);});});}catch(_0x42d9d1){console['error'](_0x2b0b50(0x2db),_0x42d9d1),_0xe491db[_0x2b0b50(0x319)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x42d9d1[_0x2b0b50(0x426)]+_0x2b0b50(0x4cf);}}async function confirmDeleteHighlight(_0x378c55){const _0x2c9f6c=a4_0xd679e2;if(confirm(_0x2c9f6c(0x425)))try{await deleteDoc(doc(db,_0x2c9f6c(0x3f7),_0x378c55)),showNotification(_0x2c9f6c(0x2b8),_0x2c9f6c(0x16c)),loadHighlightsAdmin();}catch(_0x5cab65){console[_0x2c9f6c(0x182)](_0x2c9f6c(0x172),_0x5cab65),showNotification('Error\x20deleting\x20highlight:\x20'+_0x5cab65[_0x2c9f6c(0x426)],_0x2c9f6c(0x182));}}function setupCreateTestMatchModal(){const _0x2dcb90=a4_0xd679e2;console[_0x2dcb90(0x514)](_0x2dcb90(0x3b6));const _0x4b0ae5=document[_0x2dcb90(0x185)](_0x2dcb90(0x421)),_0x16bfb6=document[_0x2dcb90(0x185)]('create-test-match-form');if(!_0x4b0ae5){console['error'](_0x2dcb90(0x4be));return;}if(!_0x16bfb6){console[_0x2dcb90(0x182)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x5a5bb2=_0x4b0ae5[_0x2dcb90(0x2f2)](!![]);_0x4b0ae5[_0x2dcb90(0x3c0)][_0x2dcb90(0x478)](_0x5a5bb2,_0x4b0ae5);const _0x14efc4=_0x5a5bb2[_0x2dcb90(0x388)]('#create-test-match-form');_0x5a5bb2[_0x2dcb90(0x1bc)](_0x2dcb90(0x130),function(_0x267cd3){const _0x35b327=_0x2dcb90;_0x267cd3[_0x35b327(0x2a8)]===_0x5a5bb2&&(console['log'](_0x35b327(0x270)),closeCreateTestMatchModal());});const _0xda942e=_0x5a5bb2[_0x2dcb90(0x388)](_0x2dcb90(0x551));_0xda942e&&_0xda942e[_0x2dcb90(0x1bc)](_0x2dcb90(0x130),function(_0x3324bb){const _0x2ac917=_0x2dcb90;_0x3324bb[_0x2ac917(0x2c3)](),_0x3324bb['stopPropagation'](),console[_0x2ac917(0x514)](_0x2ac917(0x1d1)),closeCreateTestMatchModal();});const _0x1bf41d=_0x5a5bb2[_0x2dcb90(0x388)](_0x2dcb90(0x397));_0x1bf41d&&_0x1bf41d[_0x2dcb90(0x1bc)](_0x2dcb90(0x130),function(_0xf242bf){const _0x19e2b4=_0x2dcb90;_0xf242bf['preventDefault'](),_0xf242bf[_0x19e2b4(0x2b9)](),console[_0x19e2b4(0x514)](_0x19e2b4(0x1b5)),closeCreateTestMatchModal();});if(_0x14efc4){_0x14efc4[_0x2dcb90(0x1bc)](_0x2dcb90(0x44d),function(_0x2bc1f2){const _0x4d68d6=_0x2dcb90;_0x2bc1f2[_0x4d68d6(0x2c3)](),_0x2bc1f2['stopPropagation'](),console[_0x4d68d6(0x514)](_0x4d68d6(0x3d0)),createTestMatch();});const _0x281c2e=_0x14efc4[_0x2dcb90(0x388)](_0x2dcb90(0x523));_0x281c2e&&_0x281c2e[_0x2dcb90(0x1bc)](_0x2dcb90(0x130),function(_0x20ef03){const _0x51ad0e=_0x2dcb90;_0x20ef03[_0x51ad0e(0x2c3)](),_0x20ef03['stopPropagation'](),console[_0x51ad0e(0x514)](_0x51ad0e(0x436)),createTestMatch();});}console[_0x2dcb90(0x514)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x4a94fc=a4_0xd679e2;console['log'](_0x4a94fc(0x1c6)),setupHighlightButtons();const _0x5990eb=document['getElementById'](_0x4a94fc(0x1ad));_0x5990eb&&_0x5990eb[_0x4a94fc(0x1bc)]('submit',_0x5dee7b=>{const _0x540e92=_0x4a94fc;_0x5dee7b[_0x540e92(0x2c3)](),saveHighlight();});const _0x4695a2=document[_0x4a94fc(0x185)](_0x4a94fc(0x140));_0x4695a2&&_0x4695a2[_0x4a94fc(0x1bc)]('click',closeHighlightModal);const _0x472d43=document[_0x4a94fc(0x388)](_0x4a94fc(0x430));_0x472d43&&_0x472d43[_0x4a94fc(0x1bc)](_0x4a94fc(0x130),closeHighlightModal);const _0x3aac12=document[_0x4a94fc(0x185)](_0x4a94fc(0x417));_0x3aac12&&_0x3aac12[_0x4a94fc(0x1bc)](_0x4a94fc(0x130),_0x566071=>{const _0x66e6e0=_0x4a94fc;_0x566071[_0x66e6e0(0x2a8)]===_0x3aac12&&closeHighlightModal();});const _0x17a043=document[_0x4a94fc(0x185)](_0x4a94fc(0x3dd));_0x17a043&&_0x17a043[_0x4a94fc(0x1bc)](_0x4a94fc(0x2e7),()=>{updateHighlightVideoPreview();}),console[_0x4a94fc(0x514)](_0x4a94fc(0x284));}function setupManageMatchesSection(){const _0x6d8cb0=a4_0xd679e2;console[_0x6d8cb0(0x514)](_0x6d8cb0(0x362));const _0x5462d8=document['getElementById'](_0x6d8cb0(0x2ff)),_0x15081f=document[_0x6d8cb0(0x185)](_0x6d8cb0(0x278));_0x5462d8&&_0x5462d8[_0x6d8cb0(0x1bc)](_0x6d8cb0(0x130),()=>{const _0x35a210=_0x6d8cb0,_0x1c86cb=currentLadder[_0x35a210(0x16e)]();loadMatchesData(matchesPagination[_0x1c86cb]['page']-0x1);});_0x15081f&&_0x15081f['addEventListener'](_0x6d8cb0(0x130),()=>{const _0x49dc34=_0x6d8cb0,_0x276986=currentLadder[_0x49dc34(0x16e)]();loadMatchesData(matchesPagination[_0x276986]['page']+0x1);});const _0x467204=document[_0x6d8cb0(0x185)](_0x6d8cb0(0x25b)),_0x5376cf=document['getElementById'](_0x6d8cb0(0x20a));_0x467204&&_0x467204['addEventListener'](_0x6d8cb0(0x130),applyMatchesFilters);_0x5376cf&&_0x5376cf[_0x6d8cb0(0x1bc)](_0x6d8cb0(0x130),resetMatchesFilters);const _0x346168=document[_0x6d8cb0(0x185)](_0x6d8cb0(0x381));_0x346168&&_0x346168[_0x6d8cb0(0x1bc)](_0x6d8cb0(0x2e7),debounce(filterMatchesTable,0x12c));const _0x30e28d=document[_0x6d8cb0(0x185)](_0x6d8cb0(0x450));_0x30e28d&&_0x30e28d[_0x6d8cb0(0x1bc)](_0x6d8cb0(0x130),openResimulateModal);const _0xfb489b=document[_0x6d8cb0(0x185)](_0x6d8cb0(0x43a));if(_0xfb489b){const _0x40df51=_0xfb489b['querySelector'](_0x6d8cb0(0x4fa));_0x40df51&&_0x40df51[_0x6d8cb0(0x1bc)](_0x6d8cb0(0x130),closeResimulateModal),_0xfb489b['addEventListener'](_0x6d8cb0(0x130),_0x405bb5=>{const _0x5eac0e=_0x6d8cb0;_0x405bb5[_0x5eac0e(0x2a8)]===_0xfb489b&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console[_0x6d8cb0(0x514)](_0x6d8cb0(0x1ab));}function openCreateTestMatchModal(){const _0x1333c7=a4_0xd679e2;console[_0x1333c7(0x514)](_0x1333c7(0x490));const _0x403895=document[_0x1333c7(0x185)]('create-test-match-modal'),_0x31b377=document[_0x1333c7(0x185)](_0x1333c7(0x1b0));if(!_0x403895){console[_0x1333c7(0x182)](_0x1333c7(0x1dd)),showNotification(_0x1333c7(0x1dd),'error');return;}if(!_0x31b377){console[_0x1333c7(0x182)](_0x1333c7(0x179)),showNotification(_0x1333c7(0x179),_0x1333c7(0x182));return;}_0x31b377[_0x1333c7(0x522)]();const _0x5904fc=document[_0x1333c7(0x4b2)]('input[name=\x22test-match-ladder\x22]');let _0x13980e=![];_0x5904fc[_0x1333c7(0x4eb)](_0x3544ac=>{const _0x232d08=_0x1333c7;console[_0x232d08(0x514)]('Found\x20radio\x20with\x20value:',_0x3544ac[_0x232d08(0x227)]),_0x3544ac[_0x232d08(0x227)]===currentLadder&&(_0x3544ac['checked']=!![],_0x13980e=!![],console[_0x232d08(0x514)](_0x232d08(0x1ae),currentLadder));});if(!_0x13980e){console[_0x1333c7(0x1c8)](_0x1333c7(0x198),currentLadder);const _0x59ac20=document['querySelector'](_0x1333c7(0x27f));_0x59ac20&&(_0x59ac20['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x5ee77f=document[_0x1333c7(0x185)](_0x1333c7(0x4d4));if(_0x5ee77f){const _0x571f1b=new Date()['toISOString']()[_0x1333c7(0x4dc)]('T')[0x0];_0x5ee77f['value']=_0x571f1b;}_0x403895[_0x1333c7(0x273)][_0x1333c7(0x563)]=_0x1333c7(0x4cc),_0x403895[_0x1333c7(0x273)]['visibility']=_0x1333c7(0x267),_0x403895[_0x1333c7(0x273)][_0x1333c7(0x347)]='1',_0x403895[_0x1333c7(0x14a)][_0x1333c7(0x486)](_0x1333c7(0x39f)),console[_0x1333c7(0x514)]('Modal\x20should\x20now\x20be\x20visible');const _0x488f70=document[_0x1333c7(0x185)](_0x1333c7(0x3fe));_0x488f70&&setTimeout(()=>{const _0x1d56e3=_0x1333c7;_0x488f70[_0x1d56e3(0x4c4)]();},0x64);}function closeCreateTestMatchModal(){const _0x27c9f8=a4_0xd679e2;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x54a0c6=document['getElementById'](_0x27c9f8(0x421));if(!_0x54a0c6){console[_0x27c9f8(0x182)](_0x27c9f8(0x542));return;}_0x54a0c6[_0x27c9f8(0x14a)][_0x27c9f8(0x3de)]('active'),_0x54a0c6[_0x27c9f8(0x273)][_0x27c9f8(0x347)]='0',_0x54a0c6[_0x27c9f8(0x273)][_0x27c9f8(0x54f)]=_0x27c9f8(0x4ca),setTimeout(()=>{const _0x1c01d9=_0x27c9f8;!_0x54a0c6[_0x1c01d9(0x14a)][_0x1c01d9(0x4d3)]('active')&&(_0x54a0c6[_0x1c01d9(0x273)][_0x1c01d9(0x563)]=_0x1c01d9(0x229));},0x12c),console[_0x27c9f8(0x514)](_0x27c9f8(0x39a));}async function createTestMatch(){const _0x40bb1c=a4_0xd679e2;console[_0x40bb1c(0x514)](_0x40bb1c(0x28d));try{const _0x4a00ac=auth[_0x40bb1c(0x171)];if(!_0x4a00ac){showNotification(_0x40bb1c(0x135),'error');return;}const _0x5c947c='D1',_0x358b27=_0x40bb1c(0x252),_0x24c879={'winnerUsername':_0x40bb1c(0x401),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x40bb1c(0x2ab),'winnerDemoLink':null,'loserUsername':_0x40bb1c(0x515),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x40bb1c(0x37f),'approvedAt':Timestamp[_0x40bb1c(0x4a4)](new Date()),'approvedBy':_0x4a00ac[_0x40bb1c(0x420)],'createdAt':serverTimestamp(),'createdBy':_0x4a00ac[_0x40bb1c(0x420)],'isTestMatch':!![],'ladder':_0x5c947c,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x4a00ac[_0x40bb1c(0x420)]};console[_0x40bb1c(0x514)](_0x40bb1c(0x382)),await addDoc(collection(db,_0x358b27),_0x24c879),showNotification(_0x40bb1c(0x3b8),_0x40bb1c(0x16c)),closeCreateTestMatchModal();}catch(_0x4237a7){console[_0x40bb1c(0x182)](_0x40bb1c(0x312),_0x4237a7),showNotification(_0x40bb1c(0x4d0)+_0x4237a7[_0x40bb1c(0x426)],'error');}}window[a4_0xd679e2(0x48a)]=async function(){const _0x513d18=a4_0xd679e2;try{console[_0x513d18(0x514)](_0x513d18(0x538)),console[_0x513d18(0x514)](_0x513d18(0x52c),auth),console[_0x513d18(0x514)]('DB:',db),console[_0x513d18(0x514)]('Current\x20user:',auth[_0x513d18(0x171)]);const _0x15640e=collection(db,_0x513d18(0x2ea));console['log']('Collection\x20reference\x20created:',_0x15640e);const _0x19b2bd=query(_0x15640e,where('username','==',_0x513d18(0x443)));console[_0x513d18(0x514)](_0x513d18(0x464),_0x19b2bd);const _0x4ea913=await getDocs(_0x19b2bd);console[_0x513d18(0x514)]('Query\x20executed.\x20Empty:',_0x4ea913[_0x513d18(0x294)]),console[_0x513d18(0x514)](_0x513d18(0x12e));}catch(_0x4ef5fb){console[_0x513d18(0x182)](_0x513d18(0x146),_0x4ef5fb);}};function setupCreateTestMatchButton(){const _0x20d767=a4_0xd679e2,_0x41a33e=document[_0x20d767(0x185)](_0x20d767(0x326));if(!_0x41a33e){console[_0x20d767(0x182)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console[_0x20d767(0x514)]('Setting\x20up\x20create\x20test\x20match\x20button');const _0x2f347d=_0x41a33e[_0x20d767(0x2f2)](!![]);_0x41a33e[_0x20d767(0x3c0)][_0x20d767(0x478)](_0x2f347d,_0x41a33e),_0x2f347d[_0x20d767(0x1bc)]('click',function(_0x4386ec){const _0x18db75=_0x20d767;_0x4386ec[_0x18db75(0x2c3)](),_0x4386ec['stopPropagation'](),console[_0x18db75(0x514)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x20d767(0x514)](_0x20d767(0x199));}async function loadMatchesData(_0x1f14f1=0x1){const _0x479e2a=a4_0xd679e2,_0x56338c=document['getElementById']('matches-table-body');if(!_0x56338c)return;_0x56338c['innerHTML']=_0x479e2a(0x393);try{const _0x411d48=currentLadder[_0x479e2a(0x16e)](),_0x5bba75=matchesPagination[_0x411d48],_0x3ff3e9=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x479e2a(0x2da),_0x571e72=collection(db,_0x3ff3e9);_0x1f14f1<=0x1?(_0x5bba75['page']=0x1,_0x5bba75[_0x479e2a(0x18b)]=null,_0x5bba75[_0x479e2a(0x338)]=null):_0x5bba75[_0x479e2a(0x218)]=_0x1f14f1;const _0x163978=getMatchesFilters();let _0x1a4ce9=_0x571e72;if(_0x163978[_0x479e2a(0x2ba)]||_0x163978[_0x479e2a(0x39d)]||_0x163978[_0x479e2a(0x12f)]){let _0x9a2eca=[];_0x163978[_0x479e2a(0x2ba)]&&_0x163978[_0x479e2a(0x39d)]?(_0x9a2eca['push'](where(_0x479e2a(0x142),'>=',_0x163978[_0x479e2a(0x2ba)]),where(_0x479e2a(0x142),'<=',_0x163978[_0x479e2a(0x39d)])),_0x1a4ce9=query(_0x571e72,..._0x9a2eca)):_0x1a4ce9=query(_0x571e72,orderBy(_0x479e2a(0x142),'desc'));}else _0x1a4ce9=query(_0x571e72,orderBy(_0x479e2a(0x142),_0x479e2a(0x332)));_0x1f14f1>0x1&&_0x5bba75[_0x479e2a(0x338)]?_0x1a4ce9=query(_0x1a4ce9,startAfter(_0x5bba75[_0x479e2a(0x338)]),limit(PAGE_SIZE)):_0x1a4ce9=query(_0x1a4ce9,limit(PAGE_SIZE));const _0x183c38=await getDocs(_0x1a4ce9);!_0x183c38['empty']&&(_0x5bba75[_0x479e2a(0x18b)]=_0x183c38[_0x479e2a(0x4e3)][0x0],_0x5bba75[_0x479e2a(0x338)]=_0x183c38[_0x479e2a(0x4e3)][_0x183c38['docs'][_0x479e2a(0x190)]-0x1]);let _0x53e0f2=![];if(!_0x183c38[_0x479e2a(0x294)]){const _0x29564b=query(_0x1a4ce9,startAfter(_0x5bba75[_0x479e2a(0x338)]),limit(0x1)),_0x582e97=await getDocs(_0x29564b);_0x53e0f2=!_0x582e97['empty'];}const _0x2a82eb=document[_0x479e2a(0x185)](_0x479e2a(0x2ff)),_0x5514c9=document[_0x479e2a(0x185)](_0x479e2a(0x278)),_0x33e93c=document[_0x479e2a(0x185)]('matches-page-indicator');if(_0x2a82eb)_0x2a82eb[_0x479e2a(0x3ab)]=_0x5bba75[_0x479e2a(0x218)]<=0x1;if(_0x5514c9)_0x5514c9[_0x479e2a(0x3ab)]=!_0x53e0f2;if(_0x33e93c)_0x33e93c[_0x479e2a(0x31d)]=_0x479e2a(0x4af)+_0x5bba75['page'];if(_0x183c38[_0x479e2a(0x294)]){_0x56338c['innerHTML']=_0x479e2a(0x2d4);return;}_0x56338c[_0x479e2a(0x319)]='',_0x183c38['forEach'](_0x9a20bf=>{const _0xc9e1b5=_0x479e2a,_0x4ea054=_0x9a20bf[_0xc9e1b5(0x17d)](),_0x5e7d86=document['createElement']('tr'),_0x34356a=_0x4ea054['approvedAt']?new Date(_0x4ea054['approvedAt'][_0xc9e1b5(0x23a)]*0x3e8)[_0xc9e1b5(0x3c7)]():_0xc9e1b5(0x1a4);_0x5e7d86[_0xc9e1b5(0x147)](_0xc9e1b5(0x4f1),_0x9a20bf['id']),_0x5e7d86[_0xc9e1b5(0x147)](_0xc9e1b5(0x1df),currentLadder),_0x5e7d86[_0xc9e1b5(0x14a)][_0xc9e1b5(0x486)](_0xc9e1b5(0x1d2)),_0x5e7d86[_0xc9e1b5(0x319)]=_0xc9e1b5(0x20c)+_0x34356a+_0xc9e1b5(0x3eb)+(_0x4ea054[_0xc9e1b5(0x55e)]||'Unknown')+_0xc9e1b5(0x49f)+(_0x4ea054[_0xc9e1b5(0x2a2)]||_0xc9e1b5(0x398))+_0xc9e1b5(0x1b3)+(_0x4ea054[_0xc9e1b5(0x526)]||0x0)+_0xc9e1b5(0x520)+(_0x4ea054[_0xc9e1b5(0x3b3)]||0x0)+_0xc9e1b5(0x29d)+(_0x4ea054[_0xc9e1b5(0x366)]||_0xc9e1b5(0x1a4))+_0xc9e1b5(0x2c0)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x9a20bf['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x9a20bf['id']+_0xc9e1b5(0x3ad),_0x56338c['appendChild'](_0x5e7d86);}),setupMatchesActionButtons(),_0x163978[_0x479e2a(0x12f)]&&filterMatchesTable(),console[_0x479e2a(0x514)](_0x479e2a(0x1e3)+_0x183c38[_0x479e2a(0x529)]+_0x479e2a(0x26d)+currentLadder+_0x479e2a(0x567)+_0x5bba75[_0x479e2a(0x218)]);}catch(_0x49386e){console[_0x479e2a(0x182)](_0x479e2a(0x34e),_0x49386e),_0x56338c['innerHTML']=_0x479e2a(0x193)+_0x49386e[_0x479e2a(0x426)]+_0x479e2a(0x4cf);}}async function deleteMatch(_0x28e830,_0xc2d8d0){const _0x4370ab=a4_0xd679e2;try{console[_0x4370ab(0x514)](_0x4370ab(0x56e)+_0x28e830+_0x4370ab(0x449)+_0xc2d8d0+_0x4370ab(0x2f0));const _0x4ad6fa=auth[_0x4370ab(0x171)];if(!_0x4ad6fa){showNotification(_0x4370ab(0x434),_0x4370ab(0x182));return;}const _0x35ac6a=_0xc2d8d0==='D1'?_0x4370ab(0x252):_0xc2d8d0==='D2'?_0x4370ab(0x4bd):_0x4370ab(0x2da);console[_0x4370ab(0x514)]('Using\x20collection:\x20'+_0x35ac6a),showNotification(_0x4370ab(0x519),_0x4370ab(0x28f)),await deleteDoc(doc(db,_0x35ac6a,_0x28e830)),console[_0x4370ab(0x514)](_0x4370ab(0x176)),showNotification(_0x4370ab(0x176),_0x4370ab(0x16c));const _0x22ec9a=_0xc2d8d0[_0x4370ab(0x16e)]();loadMatchesData(matchesPagination[_0x22ec9a][_0x4370ab(0x218)]);}catch(_0x52fcc2){console[_0x4370ab(0x182)](_0x4370ab(0x2dd),_0x52fcc2),showNotification(_0x4370ab(0x2f8)+_0x52fcc2[_0x4370ab(0x426)],_0x4370ab(0x182));}}function setupMatchesActionButtons(){const _0x4b94bd=a4_0xd679e2;console['log'](_0x4b94bd(0x2f4)),document[_0x4b94bd(0x4b2)](_0x4b94bd(0x4bb))[_0x4b94bd(0x4eb)](_0x395e54=>{const _0x7c8711=_0x4b94bd;_0x395e54[_0x7c8711(0x1bc)]('click',_0x34b47d=>{const _0x10d093=_0x7c8711;_0x34b47d[_0x10d093(0x2c3)](),_0x34b47d['stopPropagation']();const _0x367767=_0x34b47d[_0x10d093(0x2b5)][_0x10d093(0x55c)]['id'],_0x462a3a=_0x34b47d[_0x10d093(0x2b5)][_0x10d093(0x242)]('tr'),_0x4c15f9=_0x462a3a['dataset'][_0x10d093(0x2aa)];console[_0x10d093(0x514)](_0x10d093(0x228),_0x367767,_0x4c15f9),openEditMatchModal(_0x367767,_0x4c15f9);});}),document[_0x4b94bd(0x4b2)]('.delete-match-btn')['forEach'](_0x526b02=>{const _0x537621=_0x4b94bd;_0x526b02[_0x537621(0x1bc)](_0x537621(0x130),_0x310012=>{const _0x27dddc=_0x537621;_0x310012[_0x27dddc(0x2c3)](),_0x310012['stopPropagation']();const _0x40c3b5=_0x310012['currentTarget'][_0x27dddc(0x55c)]['id'],_0x8c00d8=_0x310012['currentTarget'][_0x27dddc(0x242)]('tr'),_0xcec0b0=_0x8c00d8['dataset']['ladder']||currentLadder;console[_0x27dddc(0x514)](_0x27dddc(0x183),_0x40c3b5,_0xcec0b0),confirm(_0x27dddc(0x500))&&deleteMatch(_0x40c3b5,_0xcec0b0);});}),console[_0x4b94bd(0x514)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x33c533=a4_0xd679e2,_0x24e2c9=document[_0x33c533(0x185)](_0x33c533(0x381))[_0x33c533(0x227)][_0x33c533(0x16e)](),_0x20ca98=document['querySelectorAll'](_0x33c533(0x52e));let _0x12e893=0x0;_0x20ca98[_0x33c533(0x4eb)](_0x5b1e32=>{const _0x48d365=_0x33c533;if(_0x5b1e32['classList']['contains']('loading-cell')||_0x5b1e32[_0x48d365(0x14a)][_0x48d365(0x4d3)](_0x48d365(0x1f1))||_0x5b1e32[_0x48d365(0x14a)][_0x48d365(0x4d3)](_0x48d365(0x237)))return;const _0x5c6fb6=_0x5b1e32[_0x48d365(0x2fb)][0x1][_0x48d365(0x31d)][_0x48d365(0x16e)](),_0x4c6d89=_0x5b1e32[_0x48d365(0x2fb)][0x2]['textContent']['toLowerCase'](),_0x551bdc=_0x5b1e32['cells'][0x4][_0x48d365(0x31d)]['toLowerCase']();_0x5c6fb6[_0x48d365(0x3ae)](_0x24e2c9)||_0x4c6d89['includes'](_0x24e2c9)||_0x551bdc[_0x48d365(0x3ae)](_0x24e2c9)?(_0x5b1e32[_0x48d365(0x273)][_0x48d365(0x563)]='',_0x12e893++):_0x5b1e32[_0x48d365(0x273)]['display']=_0x48d365(0x229);});if(_0x12e893===0x0&&_0x20ca98[_0x33c533(0x190)]>0x0){const _0x5d08f2=document[_0x33c533(0x185)](_0x33c533(0x161)),_0x5eaa01=_0x5d08f2[_0x33c533(0x388)](_0x33c533(0x1f5));if(!_0x5eaa01){const _0x41d869=document['createElement']('tr');_0x41d869[_0x33c533(0x4cd)]=_0x33c533(0x35d),_0x41d869[_0x33c533(0x319)]=_0x33c533(0x3e5)+_0x24e2c9+'\x27</td>',_0x5d08f2['appendChild'](_0x41d869);}}else{const _0xd33bdf=document['querySelector'](_0x33c533(0x1f5));_0xd33bdf&&_0xd33bdf[_0x33c533(0x3de)]();}}function getMatchesFilters(){const _0xf510a4=a4_0xd679e2,_0x55414a=document[_0xf510a4(0x185)](_0xf510a4(0x381))[_0xf510a4(0x227)][_0xf510a4(0x16e)](),_0x27578d=document[_0xf510a4(0x185)](_0xf510a4(0x4c3))[_0xf510a4(0x227)],_0x4564b0=document[_0xf510a4(0x185)](_0xf510a4(0x480))['value'];let _0x1c5b6c=null,_0xe27229=null;return _0x27578d&&(_0x1c5b6c=new Date(_0x27578d),_0x1c5b6c['setHours'](0x0,0x0,0x0,0x0),_0x1c5b6c=Timestamp['fromDate'](_0x1c5b6c)),_0x4564b0&&(_0xe27229=new Date(_0x4564b0),_0xe27229[_0xf510a4(0x44a)](0x17,0x3b,0x3b,0x3e7),_0xe27229=Timestamp[_0xf510a4(0x4a4)](_0xe27229)),{'searchTerm':_0x55414a,'startDate':_0x1c5b6c,'endDate':_0xe27229};}async function applyMatchesFilters(){const _0x335fc9=a4_0xd679e2,_0x39b564=currentLadder[_0x335fc9(0x16e)]();matchesPagination[_0x39b564]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0xc591b0=a4_0xd679e2;document[_0xc591b0(0x185)](_0xc591b0(0x4c3))[_0xc591b0(0x227)]='',document[_0xc591b0(0x185)](_0xc591b0(0x480))['value']='',document[_0xc591b0(0x185)](_0xc591b0(0x381))[_0xc591b0(0x227)]='';const _0x2cccf0=currentLadder['toLowerCase']();matchesPagination[_0x2cccf0]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x363b0f,_0x58626a){const _0xf75652=a4_0xd679e2,_0x23ce28=document[_0xf75652(0x185)]('edit-match-modal');if(!_0x23ce28)return;try{const _0x323676=_0x58626a==='D1'?_0xf75652(0x252):_0x58626a==='D2'?'approvedMatchesD2':_0xf75652(0x2da),_0x5ae631=doc(db,_0x323676,_0x363b0f),_0x463da7=await getDoc(_0x5ae631);if(!_0x463da7[_0xf75652(0x2c2)]()){showNotification(_0xf75652(0x380),_0xf75652(0x182));return;}const _0x52e80c=_0x463da7['data']();document[_0xf75652(0x185)](_0xf75652(0x3cc))[_0xf75652(0x227)]=_0x363b0f,document[_0xf75652(0x185)](_0xf75652(0x16b))[_0xf75652(0x227)]=_0x58626a,document[_0xf75652(0x185)](_0xf75652(0x411))[_0xf75652(0x227)]=_0x52e80c[_0xf75652(0x55e)]||'',document[_0xf75652(0x185)]('edit-match-winner-score')[_0xf75652(0x227)]=_0x52e80c['winnerScore']||0x0,document['getElementById'](_0xf75652(0x3ce))['value']=_0x52e80c[_0xf75652(0x315)]||0x0,document[_0xf75652(0x185)]('edit-match-winner-comment')[_0xf75652(0x227)]=_0x52e80c[_0xf75652(0x1fd)]||'',document[_0xf75652(0x185)]('edit-match-loser')['value']=_0x52e80c[_0xf75652(0x2a2)]||'',document[_0xf75652(0x185)](_0xf75652(0x505))[_0xf75652(0x227)]=_0x52e80c[_0xf75652(0x3b3)]||0x0,document[_0xf75652(0x185)](_0xf75652(0x442))[_0xf75652(0x227)]=_0x52e80c[_0xf75652(0x435)]||0x0,document['getElementById']('edit-match-loser-comment')['value']=_0x52e80c[_0xf75652(0x2ed)]||'',document[_0xf75652(0x185)](_0xf75652(0x1bb))[_0xf75652(0x227)]=_0x52e80c[_0xf75652(0x366)]||'',document[_0xf75652(0x185)]('edit-match-winner-demo')[_0xf75652(0x227)]=_0x52e80c['winnerDemoLink']||'',document[_0xf75652(0x185)]('edit-match-loser-demo')[_0xf75652(0x227)]=_0x52e80c[_0xf75652(0x136)]||_0x52e80c[_0xf75652(0x303)]||'',document[_0xf75652(0x185)](_0xf75652(0x3d2))[_0xf75652(0x31d)]='Edit\x20Match:\x20'+_0x52e80c[_0xf75652(0x55e)]+_0xf75652(0x495)+_0x52e80c[_0xf75652(0x2a2)],_0x23ce28[_0xf75652(0x14a)][_0xf75652(0x486)]('active');}catch(_0x42c428){console[_0xf75652(0x182)](_0xf75652(0x2f3),_0x42c428),showNotification(_0xf75652(0x281),_0xf75652(0x182));}}function closeEditMatchModal(){const _0x2f11bd=a4_0xd679e2,_0x457cd3=document[_0x2f11bd(0x185)](_0x2f11bd(0x3be));_0x457cd3&&_0x457cd3[_0x2f11bd(0x14a)]['remove'](_0x2f11bd(0x39f));}async function saveEditedMatch(){const _0x529b16=a4_0xd679e2;try{const _0x299c14=document[_0x529b16(0x185)](_0x529b16(0x3cc))[_0x529b16(0x227)],_0x32187e=document[_0x529b16(0x185)](_0x529b16(0x16b))[_0x529b16(0x227)];if(!_0x299c14||!_0x32187e){showNotification(_0x529b16(0x3f2),_0x529b16(0x182));return;}const _0x57d805=_0x32187e==='D1'?_0x529b16(0x252):_0x32187e==='D2'?'approvedMatchesD2':_0x529b16(0x2da),_0x10b07d=document['getElementById'](_0x529b16(0x411))[_0x529b16(0x227)]['trim'](),_0x5370da=parseInt(document[_0x529b16(0x185)]('edit-match-winner-score')[_0x529b16(0x227)]),_0x393913=parseInt(document[_0x529b16(0x185)](_0x529b16(0x3ce))[_0x529b16(0x227)]),_0x23a0b0=document[_0x529b16(0x185)](_0x529b16(0x247))[_0x529b16(0x227)][_0x529b16(0x3c6)](),_0x2a7208=document['getElementById'](_0x529b16(0x170))[_0x529b16(0x227)][_0x529b16(0x3c6)](),_0x19e97f=parseInt(document[_0x529b16(0x185)](_0x529b16(0x505))[_0x529b16(0x227)]),_0x266cb5=parseInt(document[_0x529b16(0x185)](_0x529b16(0x442))[_0x529b16(0x227)]),_0x29f09a=document[_0x529b16(0x185)](_0x529b16(0x234))['value'][_0x529b16(0x3c6)](),_0x397df7=document[_0x529b16(0x185)]('edit-match-map')[_0x529b16(0x227)][_0x529b16(0x3c6)](),_0x619ae6=document[_0x529b16(0x185)](_0x529b16(0x2c1))[_0x529b16(0x227)]['trim'](),_0x47ad9d=document[_0x529b16(0x185)](_0x529b16(0x4cb))[_0x529b16(0x227)][_0x529b16(0x3c6)]();if(!_0x10b07d||!_0x2a7208){showNotification(_0x529b16(0x3a0),_0x529b16(0x182));return;}await updateDoc(doc(db,_0x57d805,_0x299c14),{'winnerUsername':_0x10b07d,'winnerScore':_0x5370da,'winnerSuicides':_0x393913,'winnerComment':_0x23a0b0,'loserUsername':_0x2a7208,'loserScore':_0x19e97f,'loserSuicides':_0x266cb5,'loserComment':_0x29f09a,'mapPlayed':_0x397df7,'winnerDemoLink':_0x619ae6||null,'loserDemoLink':_0x47ad9d||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x529b16(0x171)]['email'],'isEdited':!![]}),showNotification(_0x529b16(0x405),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x32187e[_0x529b16(0x16e)]()][_0x529b16(0x218)]);}catch(_0x4cd61a){console['error'](_0x529b16(0x4a1),_0x4cd61a),showNotification(_0x529b16(0x24c)+_0x4cd61a[_0x529b16(0x426)],_0x529b16(0x182));}}async function openDeleteMatchModal(_0x57dfef,_0x108ba6){const _0x1c38cb=a4_0xd679e2;try{const _0x313b52=_0x108ba6==='D1'?'approvedMatches':_0x108ba6==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x440e52=doc(db,_0x313b52,_0x57dfef),_0x1609ed=await getDoc(_0x440e52);if(!_0x1609ed['exists']()){showNotification('Match\x20not\x20found',_0x1c38cb(0x182));return;}const _0x233e0f=_0x1609ed[_0x1c38cb(0x17d)](),_0x54c426=document[_0x1c38cb(0x185)](_0x1c38cb(0x55f));_0x54c426[_0x1c38cb(0x55c)][_0x1c38cb(0x1e7)]=_0x57dfef,_0x54c426[_0x1c38cb(0x55c)][_0x1c38cb(0x2aa)]=_0x108ba6;const _0x126333=_0x233e0f[_0x1c38cb(0x142)]?new Date(_0x233e0f[_0x1c38cb(0x142)]['seconds']*0x3e8)[_0x1c38cb(0x3c7)]():'N/A',_0x5b768c=document['getElementById'](_0x1c38cb(0x509));_0x5b768c[_0x1c38cb(0x319)]=_0x1c38cb(0x4b8)+_0x126333+_0x1c38cb(0x379)+_0x233e0f['winnerUsername']+_0x1c38cb(0x536)+_0x233e0f[_0x1c38cb(0x2a2)]+_0x1c38cb(0x3fc)+(_0x233e0f[_0x1c38cb(0x526)]||0x0)+_0x1c38cb(0x520)+(_0x233e0f[_0x1c38cb(0x3b3)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x233e0f[_0x1c38cb(0x366)]||_0x1c38cb(0x1a4))+_0x1c38cb(0x3d8)+_0x108ba6+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x54c426[_0x1c38cb(0x14a)][_0x1c38cb(0x486)](_0x1c38cb(0x39f));}catch(_0x481389){console['error'](_0x1c38cb(0x29a),_0x481389),showNotification(_0x1c38cb(0x281),_0x1c38cb(0x182));}}function closeDeleteMatchModal(){const _0x35ffd2=a4_0xd679e2,_0x599315=document[_0x35ffd2(0x185)](_0x35ffd2(0x55f));_0x599315&&(_0x599315[_0x35ffd2(0x14a)]['remove']('active'),_0x599315[_0x35ffd2(0x131)]('data-match-id'),_0x599315[_0x35ffd2(0x131)](_0x35ffd2(0x1df)));}async function confirmDeleteMatch(){const _0x27d1e6=a4_0xd679e2,_0xdb0d2d=document[_0x27d1e6(0x185)]('delete-match-confirm-modal'),_0x502bd4=_0xdb0d2d[_0x27d1e6(0x55c)][_0x27d1e6(0x1e7)],_0x54a2ee=_0xdb0d2d['dataset'][_0x27d1e6(0x2aa)];if(!_0x502bd4||!_0x54a2ee){showNotification(_0x27d1e6(0x3f2),_0x27d1e6(0x182)),closeDeleteMatchModal();return;}try{const _0x490196=_0x54a2ee==='D1'?_0x27d1e6(0x252):_0x54a2ee==='D2'?_0x27d1e6(0x4bd):_0x27d1e6(0x2da);await deleteDoc(doc(db,_0x490196,_0x502bd4)),showNotification(_0x27d1e6(0x176),_0x27d1e6(0x16c)),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x54a2ee[_0x27d1e6(0x16e)]()][_0x27d1e6(0x218)]);}catch(_0x48f9ad){console[_0x27d1e6(0x182)](_0x27d1e6(0x2dd),_0x48f9ad),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x48f9ad[_0x27d1e6(0x426)],_0x27d1e6(0x182));}}async function saveHighlightChanges(){const _0x3c234f=a4_0xd679e2,_0x52b851=document[_0x3c234f(0x185)](_0x3c234f(0x463))[_0x3c234f(0x227)],_0x50a835=document['getElementById']('edit-highlight-type-select')['value'];let _0x2a8193={'title':document[_0x3c234f(0x185)](_0x3c234f(0x1d9))[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),'type':_0x50a835,'description':document[_0x3c234f(0x185)](_0x3c234f(0x163))[_0x3c234f(0x227)]['trim'](),'videoId':document['getElementById'](_0x3c234f(0x293))[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),'submittedBy':auth[_0x3c234f(0x171)][_0x3c234f(0x420)]};if(_0x50a835===_0x3c234f(0x231)){_0x2a8193[_0x3c234f(0x3a9)]=document[_0x3c234f(0x185)]('edit-highlight-matchInfo-input')[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x541)]=document[_0x3c234f(0x185)]('edit-highlight-map-input')[_0x3c234f(0x227)]['trim']();const _0x5acda7=document[_0x3c234f(0x185)](_0x3c234f(0x4e7))['value'];_0x2a8193[_0x3c234f(0x23c)]=_0x5acda7?Timestamp['fromDate'](new Date(_0x5acda7)):null,_0x2a8193[_0x3c234f(0x455)]=document['getElementById']('edit-highlight-winnerName-input')[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x526)]=document[_0x3c234f(0x185)](_0x3c234f(0x504))[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x20f)]=document['getElementById']('edit-highlight-loserName-input')[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193['loserScore']=document['getElementById'](_0x3c234f(0x201))[_0x3c234f(0x227)]['trim'](),_0x2a8193[_0x3c234f(0x42f)]=document['getElementById'](_0x3c234f(0x38b))[_0x3c234f(0x227)]['trim'](),_0x2a8193['mapCreator']=null,_0x2a8193[_0x3c234f(0x2e8)]=null,_0x2a8193[_0x3c234f(0x1b2)]=null,_0x2a8193['achievementPlayer']=null,_0x2a8193[_0x3c234f(0x491)]=null,_0x2a8193[_0x3c234f(0x296)]=null,_0x2a8193['playerProfileUrl']=null;}else{if(_0x50a835===_0x3c234f(0x2f1))_0x2a8193[_0x3c234f(0x541)]=document[_0x3c234f(0x185)]('edit-highlight-map-input')[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193['mapCreator']=document['getElementById'](_0x3c234f(0x566))['value'][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x2e8)]=document[_0x3c234f(0x185)](_0x3c234f(0x4f2))[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x1b2)]=document['getElementById'](_0x3c234f(0x219))[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x3a9)]=null,_0x2a8193[_0x3c234f(0x23c)]=null,_0x2a8193['winnerName']=null,_0x2a8193[_0x3c234f(0x526)]=null,_0x2a8193['loserName']=null,_0x2a8193[_0x3c234f(0x3b3)]=null,_0x2a8193[_0x3c234f(0x42f)]=null,_0x2a8193[_0x3c234f(0x55b)]=null,_0x2a8193[_0x3c234f(0x491)]=null,_0x2a8193[_0x3c234f(0x296)]=null,_0x2a8193[_0x3c234f(0x4a7)]=null;else _0x50a835==='achievement'&&(_0x2a8193['achievementPlayer']=document[_0x3c234f(0x185)](_0x3c234f(0x3df))[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x491)]=document['getElementById']('edit-highlight-achievementType-input')['value'][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x296)]=document['getElementById'](_0x3c234f(0x41b))[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193[_0x3c234f(0x4a7)]=document[_0x3c234f(0x185)](_0x3c234f(0x2d3))[_0x3c234f(0x227)][_0x3c234f(0x3c6)](),_0x2a8193['matchInfo']=null,_0x2a8193['map']=null,_0x2a8193['matchDate']=null,_0x2a8193['winnerName']=null,_0x2a8193[_0x3c234f(0x526)]=null,_0x2a8193['loserName']=null,_0x2a8193['loserScore']=null,_0x2a8193[_0x3c234f(0x42f)]=null,_0x2a8193[_0x3c234f(0x375)]=null,_0x2a8193['mapVersion']=null,_0x2a8193[_0x3c234f(0x1b2)]=null);}try{if(_0x52b851){_0x2a8193[_0x3c234f(0x575)]=serverTimestamp();const _0x6ebda=doc(db,_0x3c234f(0x3f7),_0x52b851);await updateDoc(_0x6ebda,_0x2a8193),showNotification(_0x3c234f(0x406),_0x3c234f(0x16c));}else _0x2a8193['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x3c234f(0x3f7)),_0x2a8193),showNotification(_0x3c234f(0x21b),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x467f10){console[_0x3c234f(0x182)]('Error\x20saving\x20highlight:',_0x467f10),showNotification(_0x3c234f(0x28a)+_0x467f10[_0x3c234f(0x426)],_0x3c234f(0x182));}}async function resimulateMatch(){const _0x38cb82=a4_0xd679e2;try{const _0x58cb51=document[_0x38cb82(0x185)](_0x38cb82(0x1ff))[_0x38cb82(0x227)];if(!_0x58cb51){showNotification(_0x38cb82(0x28c),_0x38cb82(0x182));return;}const _0xa20ea7=auth['currentUser'];if(!_0xa20ea7){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',_0x38cb82(0x182));return;}const _0x39e3b4=currentLadder==='D1'?_0x38cb82(0x252):currentLadder==='D2'?_0x38cb82(0x4bd):_0x38cb82(0x2da),_0x3bfa5e=doc(db,_0x39e3b4,_0x58cb51),_0x457f2f=await getDoc(_0x3bfa5e);if(!_0x457f2f[_0x38cb82(0x2c2)]()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x38cb82(0x182));return;}const _0x86bf24=_0x457f2f[_0x38cb82(0x17d)](),_0xb6e4e5=_0x86bf24[_0x38cb82(0x142)]?_0x86bf24[_0x38cb82(0x142)][_0x38cb82(0x56d)]()[_0x38cb82(0x433)]():_0x86bf24[_0x38cb82(0x23c)]?_0x86bf24[_0x38cb82(0x23c)][_0x38cb82(0x56d)]?_0x86bf24[_0x38cb82(0x23c)][_0x38cb82(0x56d)]()['toLocaleString']():new Date(_0x86bf24['matchDate'])[_0x38cb82(0x433)]():_0x38cb82(0x398),_0x421041='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x86bf24[_0x38cb82(0x55e)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x86bf24[_0x38cb82(0x2a2)]+_0x38cb82(0x559)+_0x86bf24['winnerScore']+'-'+_0x86bf24[_0x38cb82(0x3b3)]+_0x38cb82(0x259)+(_0x86bf24[_0x38cb82(0x366)]||_0x86bf24['mapName']||_0x38cb82(0x398))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0xb6e4e5+_0x38cb82(0x440)+_0x58cb51+_0x38cb82(0x576)+currentLadder+_0x38cb82(0x4c7);document[_0x38cb82(0x185)](_0x38cb82(0x36f))[_0x38cb82(0x319)]=_0x421041,document[_0x38cb82(0x185)](_0x38cb82(0x36f))[_0x38cb82(0x273)]['display']=_0x38cb82(0x1ed),document['getElementById']('confirm-resimulate-btn')[_0x38cb82(0x273)][_0x38cb82(0x563)]='block',window[_0x38cb82(0x4b3)]={'matchId':_0x58cb51,'matchData':_0x86bf24,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0x38cb82(0x28f));}catch(_0x30941f){console[_0x38cb82(0x182)](_0x38cb82(0x4fe),_0x30941f),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x30941f[_0x38cb82(0x426)],_0x38cb82(0x182));}}async function confirmResimulateMatch(){const _0x27ba45=a4_0xd679e2;try{const {matchId:_0x36e861,matchData:_0x1a540d,ladder:_0x820cec}=window['pendingResimulateData'];if(!_0x36e861||!_0x1a540d){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x4a9c94=_0x820cec==='D1'?_0x27ba45(0x2ea):_0x820cec==='D2'?_0x27ba45(0x4e9):_0x27ba45(0x392),_0x93e7e5=_0x820cec==='D1'?_0x27ba45(0x4c8):_0x820cec==='D2'?_0x27ba45(0x27b):_0x27ba45(0x561),[_0x28d0e7,_0x243cde]=await Promise[_0x27ba45(0x33e)]([getDocs(query(collection(db,_0x4a9c94),where('username','==',_0x1a540d[_0x27ba45(0x55e)]))),getDocs(query(collection(db,_0x4a9c94),where(_0x27ba45(0x177),'==',_0x1a540d[_0x27ba45(0x2a2)])))]);if(_0x28d0e7[_0x27ba45(0x294)]||_0x243cde[_0x27ba45(0x294)]){showNotification(_0x27ba45(0x320),'error');return;}const _0x4536cf=_0x28d0e7[_0x27ba45(0x4e3)][0x0]['id'],_0x225672=_0x243cde[_0x27ba45(0x4e3)][0x0]['id'],_0x5791f0=_0x28d0e7['docs'][0x0][_0x27ba45(0x17d)](),_0xe1c21b=_0x243cde[_0x27ba45(0x4e3)][0x0][_0x27ba45(0x17d)](),[_0x4b6387,_0x24c175]=await Promise[_0x27ba45(0x33e)]([getDocs(query(collection(db,_0x93e7e5),where(_0x27ba45(0x238),'==',_0x4536cf),where('matchId','==',_0x36e861))),getDocs(query(collection(db,_0x93e7e5),where(_0x27ba45(0x238),'==',_0x225672),where(_0x27ba45(0x1e7),'==',_0x36e861)))]),_0x5c9385=!_0x4b6387[_0x27ba45(0x294)],_0x56b02f=!_0x24c175['empty'],_0x7c75f8=_0x27ba45(0x202)+(_0x5c9385?'✅\x20Exists':_0x27ba45(0x1c7))+_0x27ba45(0x1d4)+(_0x56b02f?_0x27ba45(0x1e9):'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x5791f0[_0x27ba45(0x17c)]||_0x27ba45(0x398))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0xe1c21b[_0x27ba45(0x17c)]||_0x27ba45(0x398))+_0x27ba45(0x532)+(_0x5791f0[_0x27ba45(0x16a)]||_0x27ba45(0x398))+_0x27ba45(0x36b)+(_0xe1c21b[_0x27ba45(0x16a)]||_0x27ba45(0x398))+_0x27ba45(0x127);document[_0x27ba45(0x185)]('validation-results-container')[_0x27ba45(0x319)]=_0x7c75f8,document[_0x27ba45(0x185)](_0x27ba45(0x165))[_0x27ba45(0x273)][_0x27ba45(0x563)]=_0x27ba45(0x1ed);if(_0x5c9385&&_0x56b02f){showNotification(_0x27ba45(0x213),_0x27ba45(0x2df));return;}showNotification(_0x27ba45(0x476),_0x27ba45(0x28f));const _0x9fa01b=_0x1a540d['approvedAt']||_0x1a540d[_0x27ba45(0x23c)]||serverTimestamp(),[_0x43816b,_0x12bde0]=await Promise[_0x27ba45(0x33e)]([getPlayerEloAtTime(_0x4536cf,_0x9fa01b,_0x93e7e5),getPlayerEloAtTime(_0x225672,_0x9fa01b,_0x93e7e5)]),{calculateElo:_0xd90227}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x196811,newLoserRating:_0x1f5163}=_0xd90227(_0x43816b,_0x12bde0),_0x941d3a=_0x5791f0[_0x27ba45(0x16a)]||Number[_0x27ba45(0x15d)],_0x474280=_0xe1c21b[_0x27ba45(0x16a)]||Number[_0x27ba45(0x15d)];let _0x154b55=_0x941d3a,_0x425e72=_0x474280;_0x941d3a>_0x474280&&(_0x154b55=_0x474280,_0x425e72=_0x474280+0x1);const _0x3b9438=writeBatch(db),_0x278631=doc(db,_0x4a9c94,_0x4536cf);_0x3b9438[_0x27ba45(0x314)](_0x278631,{'eloRating':_0x196811,'position':_0x154b55,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x27ba45(0x171)][_0x27ba45(0x353)]});const _0x55e1a2=doc(db,_0x4a9c94,_0x225672);_0x3b9438[_0x27ba45(0x314)](_0x55e1a2,{'eloRating':_0x1f5163,'position':_0x425e72,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x27ba45(0x171)][_0x27ba45(0x353)]});if(_0x941d3a>_0x474280){const _0x2bc915=await getDocs(query(collection(db,_0x4a9c94),where(_0x27ba45(0x16a),'>',_0x474280),where(_0x27ba45(0x16a),'<',_0x941d3a)));_0x2bc915[_0x27ba45(0x4eb)](_0x8b681a=>{const _0x3b0e3b=_0x27ba45,_0xb676bb=doc(db,_0x4a9c94,_0x8b681a['id']),_0x5ec9bb=_0x8b681a[_0x3b0e3b(0x17d)]()[_0x3b0e3b(0x16a)];_0x3b9438[_0x3b0e3b(0x314)](_0xb676bb,{'position':_0x5ec9bb+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x3b0e3b(0x225),'positionAdjustedAt':serverTimestamp()});});}if(!_0x5c9385){const _0x4a2f1b=doc(collection(db,_0x93e7e5));_0x3b9438['set'](_0x4a2f1b,{'playerId':_0x4536cf,'player':_0x1a540d[_0x27ba45(0x55e)],'previousElo':_0x43816b,'newElo':_0x196811,'eloChange':_0x196811-_0x43816b,'opponentId':_0x225672,'opponent':_0x1a540d[_0x27ba45(0x2a2)],'matchResult':_0x27ba45(0x22f),'previousPosition':_0x941d3a,'newPosition':_0x154b55,'positionChange':_0x154b55-_0x941d3a,'matchId':_0x36e861,'timestamp':_0x9fa01b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x27ba45(0x171)][_0x27ba45(0x353)],'gameMode':_0x820cec,'matchScore':_0x1a540d['winnerScore']+'-'+_0x1a540d['loserScore'],'mapPlayed':_0x1a540d[_0x27ba45(0x366)]||_0x1a540d[_0x27ba45(0x295)]||_0x27ba45(0x398),'note':_0x27ba45(0x30f)});}if(!_0x56b02f){const _0x43b523=doc(collection(db,_0x93e7e5));_0x3b9438[_0x27ba45(0x3ea)](_0x43b523,{'playerId':_0x225672,'player':_0x1a540d['loserUsername'],'previousElo':_0x12bde0,'newElo':_0x1f5163,'eloChange':_0x1f5163-_0x12bde0,'opponentId':_0x4536cf,'opponent':_0x1a540d[_0x27ba45(0x55e)],'matchResult':_0x27ba45(0x253),'previousPosition':_0x474280,'newPosition':_0x425e72,'positionChange':_0x425e72-_0x474280,'matchId':_0x36e861,'timestamp':_0x9fa01b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x27ba45(0x171)]['uid'],'gameMode':_0x820cec,'matchScore':_0x1a540d[_0x27ba45(0x526)]+'-'+_0x1a540d['loserScore'],'mapPlayed':_0x1a540d[_0x27ba45(0x366)]||_0x1a540d[_0x27ba45(0x295)]||_0x27ba45(0x398),'note':_0x27ba45(0x30f)});}const _0x33f414=_0x820cec==='D1'?_0x27ba45(0x252):_0x820cec==='D2'?_0x27ba45(0x4bd):_0x27ba45(0x2da),_0x489e94=doc(db,_0x33f414,_0x36e861);_0x3b9438['update'](_0x489e94,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x27ba45(0x171)][_0x27ba45(0x353)],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x5791f0[_0x27ba45(0x17c)],'originalLoserElo':_0xe1c21b[_0x27ba45(0x17c)],'originalWinnerPosition':_0x941d3a,'originalLoserPosition':_0x474280,'resimulatedWinnerElo':_0x196811,'resimulatedLoserElo':_0x1f5163,'resimulatedWinnerPosition':_0x154b55,'resimulatedLoserPosition':_0x425e72}),await _0x3b9438['commit']();const _0x33a966=(!_0x5c9385?0x1:0x0)+(!_0x56b02f?0x1:0x0),_0x3ffd5b=_0x941d3a!==_0x154b55||_0x474280!==_0x425e72;showNotification(_0x27ba45(0x4e2)+(_0x27ba45(0x2f7)+_0x33a966+'\x20ELO\x20history\x20entries.\x20')+(_0x27ba45(0x30b)+_0x43816b+'→'+_0x196811+_0x27ba45(0x141)+(_0x196811-_0x43816b)+_0x27ba45(0x1e1))+(_0x27ba45(0x48b)+_0x12bde0+'→'+_0x1f5163+'\x20('+(_0x1f5163-_0x12bde0)+_0x27ba45(0x42a))+(''+(_0x3ffd5b?_0x27ba45(0x20b)+_0x941d3a+'→'+_0x154b55+',\x20Loser\x20'+_0x474280+'→'+_0x425e72:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x27ba45(0x388)](_0x27ba45(0x365))&&loadPlayersData();}catch(_0x30d293){console[_0x27ba45(0x182)](_0x27ba45(0x268),_0x30d293),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x30d293[_0x27ba45(0x426)],_0x27ba45(0x182));}}async function getPlayerEloAtTime(_0x4b0230,_0x49dbb6,_0x174d7e){const _0x461a4b=a4_0xd679e2;try{const _0x495dde=_0x49dbb6[_0x461a4b(0x56d)]?_0x49dbb6[_0x461a4b(0x56d)]():new Date(_0x49dbb6),_0x4b0b99=query(collection(db,_0x174d7e),where(_0x461a4b(0x238),'==',_0x4b0230),where(_0x461a4b(0x418),'<',_0x49dbb6),orderBy(_0x461a4b(0x418),_0x461a4b(0x332)),limit(0x1)),_0x50259f=await getDocs(_0x4b0b99);if(!_0x50259f[_0x461a4b(0x294)]){const _0x132ec8=_0x50259f['docs'][0x0][_0x461a4b(0x17d)]();return console['log'](_0x461a4b(0x137)+_0x4b0230+_0x461a4b(0x4de)+_0x132ec8['newElo']),_0x132ec8[_0x461a4b(0x297)];}else return console['log'](_0x461a4b(0x276)+_0x4b0230+_0x461a4b(0x17e)),0x4b0;}catch(_0x172870){return console[_0x461a4b(0x182)](_0x461a4b(0x428)+_0x4b0230+':',_0x172870),0x4b0;}}function openResimulateModal(){const _0x18bb54=a4_0xd679e2;console['log'](_0x18bb54(0x194));const _0x1e84fd=document[_0x18bb54(0x185)](_0x18bb54(0x43a));console[_0x18bb54(0x514)](_0x18bb54(0x414),_0x1e84fd);if(!_0x1e84fd){console[_0x18bb54(0x182)](_0x18bb54(0x139));return;}_0x1e84fd[_0x18bb54(0x273)][_0x18bb54(0x563)]='block',_0x1e84fd[_0x18bb54(0x273)][_0x18bb54(0x54f)]=_0x18bb54(0x267),_0x1e84fd[_0x18bb54(0x273)]['opacity']='1',_0x1e84fd[_0x18bb54(0x14a)][_0x18bb54(0x486)](_0x18bb54(0x39f)),console['log'](_0x18bb54(0x53b)),console[_0x18bb54(0x514)](_0x18bb54(0x4a9),window[_0x18bb54(0x129)](_0x1e84fd)[_0x18bb54(0x563)]);const _0xfbada4=document[_0x18bb54(0x185)](_0x18bb54(0x36f)),_0x47d166=document[_0x18bb54(0x185)](_0x18bb54(0x165)),_0x2cc4f1=document[_0x18bb54(0x185)](_0x18bb54(0x29c)),_0x588dcf=document[_0x18bb54(0x185)](_0x18bb54(0x1ff));if(_0xfbada4)_0xfbada4['innerHTML']='';if(_0x47d166)_0x47d166[_0x18bb54(0x319)]='';if(_0x2cc4f1)_0x2cc4f1['style'][_0x18bb54(0x563)]=_0x18bb54(0x229);if(_0x588dcf)_0x588dcf[_0x18bb54(0x227)]='';console[_0x18bb54(0x514)](_0x18bb54(0x386));}function closeResimulateModal(){const _0xde3fe7=a4_0xd679e2;document[_0xde3fe7(0x185)](_0xde3fe7(0x43a))[_0xde3fe7(0x273)]['display']='none',window['pendingResimulateData']=null;}window[a4_0xd679e2(0x39e)]=resimulateMatch,window[a4_0xd679e2(0x1dc)]=confirmResimulateMatch,window[a4_0xd679e2(0x37c)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x12d386=a4_0xd679e2;console['log'](_0x12d386(0x1eb));try{await Promise[_0x12d386(0x33e)]([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully',_0x12d386(0x16c));}catch(_0x4f2a9f){console['error']('Error\x20loading\x20points\x20data:',_0x4f2a9f),showNotification(_0x12d386(0x1c3)+_0x4f2a9f[_0x12d386(0x426)],'error');}}function renderPointsOverview(_0x59c81f){const _0x254a5d=a4_0xd679e2,_0x3de83b=document[_0x254a5d(0x185)](_0x254a5d(0x3bd));if(!_0x3de83b)return;if(_0x59c81f['length']===0x0){_0x3de83b[_0x254a5d(0x319)]=_0x254a5d(0x50a);return;}_0x3de83b[_0x254a5d(0x319)]='',_0x59c81f[_0x254a5d(0x4eb)](_0x1b7e45=>{const _0x245972=_0x254a5d,_0x58c68f=document[_0x245972(0x54a)]('tr'),_0x11de90=_0x1b7e45[_0x245972(0x33d)]||_0x1b7e45[_0x245972(0x177)]||_0x245972(0x215),_0x196bd9=_0x1b7e45['email']||'No\x20email',_0x375c36=_0x1b7e45[_0x245972(0x547)]||0x0,_0x3acf4d=_0x1b7e45['lastPointsModified']?new Date(_0x1b7e45[_0x245972(0x4a5)]['seconds']*0x3e8)[_0x245972(0x3c7)]():_0x245972(0x33c);_0x58c68f[_0x245972(0x319)]=_0x245972(0x2b1)+_0x11de90+_0x245972(0x444)+_0x196bd9+_0x245972(0x568)+(_0x375c36>0x3e8?'high-points':_0x375c36>0x1f4?'medium-points':_0x245972(0x50c))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x375c36[_0x245972(0x433)]()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3acf4d+_0x245972(0x446)+_0x1b7e45['id']+_0x245972(0x3cd)+_0x1b7e45['id']+_0x245972(0x3e6),_0x3de83b[_0x245972(0x180)](_0x58c68f);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x5873f5=a4_0xd679e2;console[_0x5873f5(0x514)](_0x5873f5(0x53e));const _0x24d03b=document[_0x5873f5(0x4b2)](_0x5873f5(0x246));console[_0x5873f5(0x514)](_0x5873f5(0x4ec)+_0x24d03b['length']+_0x5873f5(0x3b1)),_0x24d03b[_0x5873f5(0x4eb)](_0x2e2a88=>{const _0x38a39c=_0x5873f5,_0x290e32=_0x2e2a88['cloneNode'](!![]);_0x2e2a88[_0x38a39c(0x3c0)]['replaceChild'](_0x290e32,_0x2e2a88);});const _0x250b59=document[_0x5873f5(0x4b2)](_0x5873f5(0x517));console['log'](_0x5873f5(0x4ec)+_0x250b59[_0x5873f5(0x190)]+_0x5873f5(0x439)),_0x250b59[_0x5873f5(0x4eb)](_0x4378af=>{const _0x4ef827=_0x5873f5,_0x30f2b1=_0x4378af[_0x4ef827(0x2f2)](!![]);_0x4378af['parentNode'][_0x4ef827(0x478)](_0x30f2b1,_0x4378af);}),document[_0x5873f5(0x4b2)]('.quick-edit-btn')[_0x5873f5(0x4eb)](_0x51889d=>{const _0x1b48a2=_0x5873f5;_0x51889d[_0x1b48a2(0x1bc)]('click',function(_0x35d663){const _0x4fc9ea=_0x1b48a2;_0x35d663[_0x4fc9ea(0x2c3)](),_0x35d663['stopPropagation']();const _0x3b172=this[_0x4fc9ea(0x55c)]['userId'];console[_0x4fc9ea(0x514)](_0x4fc9ea(0x501),_0x3b172);if(!_0x3b172){console[_0x4fc9ea(0x182)](_0x4fc9ea(0x399));return;}this['style']['opacity']=_0x4fc9ea(0x367),setTimeout(()=>{const _0xbf69d=_0x4fc9ea;this[_0xbf69d(0x273)][_0xbf69d(0x347)]='1';},0xc8),openQuickEditModal(_0x3b172);});}),document['querySelectorAll'](_0x5873f5(0x517))['forEach'](_0x53dbf5=>{const _0x332c59=_0x5873f5;_0x53dbf5[_0x332c59(0x1bc)](_0x332c59(0x130),function(_0x1aa8e4){const _0xb2e16f=_0x332c59;_0x1aa8e4[_0xb2e16f(0x2c3)](),_0x1aa8e4[_0xb2e16f(0x2b9)]();const _0x506812=this[_0xb2e16f(0x55c)]['userId'];console[_0xb2e16f(0x514)]('View\x20history\x20clicked\x20for\x20user:',_0x506812);if(!_0x506812){console['error'](_0xb2e16f(0x399));return;}this[_0xb2e16f(0x273)][_0xb2e16f(0x347)]=_0xb2e16f(0x367),setTimeout(()=>{const _0x246217=_0xb2e16f;this['style'][_0x246217(0x347)]='1';},0xc8),loadUserPointsHistory(_0x506812);});}),console['log'](_0x5873f5(0x144));}async function openQuickEditModal(_0x105d42){const _0x6ab003=a4_0xd679e2;console[_0x6ab003(0x514)](_0x6ab003(0x516),_0x105d42);const _0x24ca99=document[_0x6ab003(0x185)]('quick-edit-points-modal');if(!_0x24ca99){console[_0x6ab003(0x182)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification(_0x6ab003(0x4fc),'error');return;}try{showNotification(_0x6ab003(0x1fb),_0x6ab003(0x28f));const _0x3c8889=doc(db,'userProfiles',_0x105d42),_0x5f7e2d=await getDoc(_0x3c8889);if(!_0x5f7e2d[_0x6ab003(0x2c2)]()){showNotification(_0x6ab003(0x2d8),_0x6ab003(0x182));return;}const _0x1e1fee=_0x5f7e2d[_0x6ab003(0x17d)]();console[_0x6ab003(0x514)]('User\x20data\x20loaded:',_0x1e1fee);const _0x5d036e=document[_0x6ab003(0x185)](_0x6ab003(0x230)),_0x9d61a6=document[_0x6ab003(0x185)](_0x6ab003(0x2eb)),_0x309dd3=document[_0x6ab003(0x185)](_0x6ab003(0x473)),_0x333bf4=document[_0x6ab003(0x185)](_0x6ab003(0x128)),_0x4d376e=document[_0x6ab003(0x185)]('quick-edit-points-form');if(!_0x5d036e||!_0x9d61a6||!_0x309dd3||!_0x333bf4||!_0x4d376e){console[_0x6ab003(0x182)](_0x6ab003(0x25f)),showNotification(_0x6ab003(0x360),'error');return;}_0x5d036e[_0x6ab003(0x227)]=_0x105d42,_0x9d61a6[_0x6ab003(0x31d)]=_0x1e1fee['displayName']||_0x1e1fee[_0x6ab003(0x177)]||'Unknown\x20User',_0x309dd3[_0x6ab003(0x31d)]=_0x1e1fee[_0x6ab003(0x420)]||_0x6ab003(0x324),_0x333bf4[_0x6ab003(0x31d)]=(_0x1e1fee[_0x6ab003(0x547)]||0x0)['toLocaleString'](),_0x4d376e[_0x6ab003(0x522)]();const _0xf2b444=document[_0x6ab003(0x185)](_0x6ab003(0x558));_0xf2b444&&(_0xf2b444['checked']=!![]);_0x24ca99['classList'][_0x6ab003(0x486)]('active'),console[_0x6ab003(0x514)]('Modal\x20opened\x20successfully');const _0x3eccd8=document[_0x6ab003(0x185)](_0x6ab003(0x207));_0x3eccd8&&setTimeout(()=>_0x3eccd8[_0x6ab003(0x4c4)](),0x64);}catch(_0x3529b2){console['error'](_0x6ab003(0x3d5),_0x3529b2),showNotification(_0x6ab003(0x3da)+_0x3529b2[_0x6ab003(0x426)],'error');}}function closeQuickEditModal(){const _0x1abdbf=a4_0xd679e2,_0x496486=document[_0x1abdbf(0x185)](_0x1abdbf(0x1e8));_0x496486&&_0x496486['classList'][_0x1abdbf(0x3de)]('active');}async function handleQuickEditPoints(_0x58c800){const _0x1ccd18=a4_0xd679e2;_0x58c800['preventDefault']();const _0xb19ebb=document[_0x1ccd18(0x185)](_0x1ccd18(0x230))['value'],_0x3f5c80=document[_0x1ccd18(0x388)]('input[name=\x22quick-action\x22]:checked')[_0x1ccd18(0x227)],_0x24bffe=parseInt(document[_0x1ccd18(0x185)](_0x1ccd18(0x207))['value']),_0x30971c=document[_0x1ccd18(0x185)](_0x1ccd18(0x543))['value'][_0x1ccd18(0x3c6)]();console[_0x1ccd18(0x514)](_0x1ccd18(0x494),{'userId':_0xb19ebb,'action':_0x3f5c80,'amount':_0x24bffe,'reason':_0x30971c});if(!_0xb19ebb||!_0x24bffe||_0x24bffe<0x0){showNotification(_0x1ccd18(0x4fb),_0x1ccd18(0x182));return;}try{await modifyUserPoints(_0xb19ebb,_0x3f5c80,_0x24bffe,_0x30971c),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x1ccd18(0x4a2),_0x1ccd18(0x16c)),console['log'](_0x1ccd18(0x143),_0xb19ebb);}catch(_0x154938){console['error']('Error\x20updating\x20points:',_0x154938),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x154938['message'],'error');}}async function searchUsersForPoints(){const _0x10fd09=a4_0xd679e2,_0x104cb4=document['getElementById']('points-user-search')[_0x10fd09(0x227)][_0x10fd09(0x3c6)]()[_0x10fd09(0x16e)](),_0x3489f8=document[_0x10fd09(0x185)]('user-search-results');if(!_0x104cb4||_0x104cb4[_0x10fd09(0x190)]<0x2){_0x3489f8[_0x10fd09(0x319)]='';return;}_0x3489f8[_0x10fd09(0x319)]=_0x10fd09(0x4ef);try{const _0xf5006e=collection(db,_0x10fd09(0x3c2)),_0x3af092=await getDocs(_0xf5006e),_0x3ade5e=[];_0x3af092[_0x10fd09(0x4eb)](_0x2a88a2=>{const _0x44b417=_0x10fd09,_0x4d7fcf=_0x2a88a2[_0x44b417(0x17d)](),_0x1d2260=(_0x4d7fcf[_0x44b417(0x33d)]||_0x4d7fcf['username']||'')[_0x44b417(0x16e)](),_0x3a640d=(_0x4d7fcf[_0x44b417(0x420)]||'')[_0x44b417(0x16e)]();(_0x1d2260[_0x44b417(0x3ae)](_0x104cb4)||_0x3a640d[_0x44b417(0x3ae)](_0x104cb4))&&_0x3ade5e[_0x44b417(0x3a6)]({'id':_0x2a88a2['id'],..._0x4d7fcf});});if(_0x3ade5e[_0x10fd09(0x190)]===0x0){_0x3489f8['innerHTML']=_0x10fd09(0x556);return;}_0x3489f8[_0x10fd09(0x319)]='',_0x3ade5e['forEach'](_0x19e1e8=>{const _0xc2c3a2=_0x10fd09,_0x212805=document[_0xc2c3a2(0x54a)](_0xc2c3a2(0x1b1));_0x212805['className']=_0xc2c3a2(0x25c),_0x212805[_0xc2c3a2(0x319)]=_0xc2c3a2(0x34a)+(_0x19e1e8[_0xc2c3a2(0x33d)]||_0x19e1e8['username']||_0xc2c3a2(0x398))+_0xc2c3a2(0x2c8)+(_0x19e1e8[_0xc2c3a2(0x420)]||_0xc2c3a2(0x324))+_0xc2c3a2(0x447)+(_0x19e1e8['points']||0x0)[_0xc2c3a2(0x433)]()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x212805[_0xc2c3a2(0x1bc)](_0xc2c3a2(0x130),()=>selectUserForPoints(_0x19e1e8)),_0x3489f8[_0xc2c3a2(0x180)](_0x212805);});}catch(_0x13aeae){console[_0x10fd09(0x182)](_0x10fd09(0x341),_0x13aeae),_0x3489f8[_0x10fd09(0x319)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x453f7d){const _0x3b7b8b=a4_0xd679e2;document['getElementById'](_0x3b7b8b(0x149))[_0x3b7b8b(0x31d)]=_0x453f7d[_0x3b7b8b(0x33d)]||_0x453f7d[_0x3b7b8b(0x177)]||_0x3b7b8b(0x215),document['getElementById'](_0x3b7b8b(0x31a))['textContent']=(_0x453f7d['points']||0x0)['toLocaleString'](),document[_0x3b7b8b(0x185)](_0x3b7b8b(0x2b6))['value']=_0x453f7d['id'],document[_0x3b7b8b(0x185)]('selected-user-info')[_0x3b7b8b(0x273)][_0x3b7b8b(0x563)]=_0x3b7b8b(0x1ed),document[_0x3b7b8b(0x185)](_0x3b7b8b(0x416))[_0x3b7b8b(0x273)][_0x3b7b8b(0x563)]=_0x3b7b8b(0x1ed),document['getElementById'](_0x3b7b8b(0x1a7))[_0x3b7b8b(0x319)]='',document['getElementById'](_0x3b7b8b(0x377))[_0x3b7b8b(0x227)]='';}async function handleModifyPoints(_0x1f7f7f){const _0xf95647=a4_0xd679e2;_0x1f7f7f[_0xf95647(0x2c3)]();const _0x3020e4=document['getElementById'](_0xf95647(0x2b6))[_0xf95647(0x227)],_0x128da7=document[_0xf95647(0x185)](_0xf95647(0x206))[_0xf95647(0x227)],_0xd27b51=parseInt(document[_0xf95647(0x185)]('points-amount')[_0xf95647(0x227)]),_0x2d76a=document['getElementById'](_0xf95647(0x357))[_0xf95647(0x227)][_0xf95647(0x3c6)]();if(!_0x3020e4||!_0xd27b51||_0xd27b51<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0xf95647(0x182));return;}try{await modifyUserPoints(_0x3020e4,_0x128da7,_0xd27b51,_0x2d76a),document[_0xf95647(0x185)](_0xf95647(0x3a8))[_0xf95647(0x522)]();const _0x82a506=doc(db,'userProfiles',_0x3020e4),_0x51de0b=await getDoc(_0x82a506);if(_0x51de0b['exists']()){const _0x3bd115=_0x51de0b[_0xf95647(0x17d)]();document[_0xf95647(0x185)](_0xf95647(0x31a))['textContent']=(_0x3bd115['points']||0x0)[_0xf95647(0x433)]();}showNotification(_0xf95647(0x4bc),_0xf95647(0x16c)),loadPointsHistory();}catch(_0x232b7f){console[_0xf95647(0x182)]('Error\x20modifying\x20points:',_0x232b7f),showNotification(_0xf95647(0x3f3)+_0x232b7f[_0xf95647(0x426)],_0xf95647(0x182));}}async function loadPointsHistory(){const _0x55e97f=a4_0xd679e2,_0x497fcb=document[_0x55e97f(0x185)]('points-history-table-body');if(!_0x497fcb)return;_0x497fcb[_0x55e97f(0x319)]=_0x55e97f(0x364);try{const _0x339869=collection(db,_0x55e97f(0x345)),_0x276d60=query(_0x339869,orderBy(_0x55e97f(0x418),'desc'),limit(0x32)),_0x406db5=await getDocs(_0x276d60);if(_0x406db5['empty']){_0x497fcb[_0x55e97f(0x319)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x497fcb[_0x55e97f(0x319)]='',_0x406db5[_0x55e97f(0x4eb)](_0x462903=>{const _0x29a31e=_0x55e97f,_0x2524d7=_0x462903[_0x29a31e(0x17d)](),_0x35e1a1=document[_0x29a31e(0x54a)]('tr'),_0x5d2bcb=_0x2524d7[_0x29a31e(0x418)]?new Date(_0x2524d7[_0x29a31e(0x418)][_0x29a31e(0x23a)]*0x3e8)[_0x29a31e(0x433)]():'Unknown';let _0x211b9c='';switch(_0x2524d7[_0x29a31e(0x4d9)]){case _0x29a31e(0x486):_0x211b9c=_0x29a31e(0x1a9)+_0x2524d7[_0x29a31e(0x223)]+_0x29a31e(0x26e);break;case _0x29a31e(0x310):_0x211b9c=_0x29a31e(0x4ce)+_0x2524d7[_0x29a31e(0x223)]+_0x29a31e(0x26e);break;case _0x29a31e(0x3ea):_0x211b9c=_0x29a31e(0x13c)+_0x2524d7[_0x29a31e(0x223)]+'\x20points';break;default:_0x211b9c=_0x2524d7[_0x29a31e(0x4d9)]+'\x20'+_0x2524d7[_0x29a31e(0x223)]+_0x29a31e(0x26e);}_0x35e1a1[_0x29a31e(0x319)]=_0x29a31e(0x20c)+_0x5d2bcb+_0x29a31e(0x25a)+(_0x2524d7['displayName']||_0x29a31e(0x215))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x211b9c+_0x29a31e(0x47b)+_0x2524d7[_0x29a31e(0x4d9)]+_0x29a31e(0x487)+(_0x2524d7[_0x29a31e(0x3aa)]||0x0)+_0x29a31e(0x301)+(_0x2524d7['newPoints']||0x0)+_0x29a31e(0x4b5)+(_0x2524d7[_0x29a31e(0x19b)]||_0x29a31e(0x2e4))+_0x29a31e(0x25a)+(_0x2524d7[_0x29a31e(0x29e)]||'Unknown\x20Admin')+_0x29a31e(0x333),_0x497fcb['appendChild'](_0x35e1a1);});}catch(_0x13b77d){console[_0x55e97f(0x182)]('Error\x20loading\x20points\x20history:',_0x13b77d),_0x497fcb[_0x55e97f(0x319)]=_0x55e97f(0x2a0)+_0x13b77d[_0x55e97f(0x426)]+_0x55e97f(0x465);}}function filterPointsOverview(){const _0x1db62e=a4_0xd679e2,_0x167581=document[_0x1db62e(0x185)](_0x1db62e(0x403))[_0x1db62e(0x227)][_0x1db62e(0x16e)]();if(!window['allUsersPoints'])return;const _0x45d278=window[_0x1db62e(0x1a0)]['filter'](_0x2b4c26=>{const _0x42a6f6=_0x1db62e,_0x57f00c=(_0x2b4c26[_0x42a6f6(0x33d)]||_0x2b4c26['username']||'')['toLowerCase'](),_0xf0f22c=(_0x2b4c26['email']||'')[_0x42a6f6(0x16e)]();return _0x57f00c[_0x42a6f6(0x3ae)](_0x167581)||_0xf0f22c[_0x42a6f6(0x3ae)](_0x167581);});renderPointsOverview(_0x45d278);}function sortPointsOverview(){const _0x6ab50e=a4_0xd679e2,_0x445ca2=document['getElementById'](_0x6ab50e(0x49e))[_0x6ab50e(0x227)];if(!window[_0x6ab50e(0x1a0)])return;const _0x54fe49=[...window[_0x6ab50e(0x1a0)]];switch(_0x445ca2){case'points-desc':_0x54fe49[_0x6ab50e(0x508)]((_0x4f09f6,_0x25565c)=>(_0x25565c[_0x6ab50e(0x547)]||0x0)-(_0x4f09f6[_0x6ab50e(0x547)]||0x0));break;case _0x6ab50e(0x534):_0x54fe49[_0x6ab50e(0x508)]((_0x46b548,_0x30f587)=>(_0x46b548[_0x6ab50e(0x547)]||0x0)-(_0x30f587[_0x6ab50e(0x547)]||0x0));break;case _0x6ab50e(0x18f):_0x54fe49[_0x6ab50e(0x508)]((_0x382dab,_0x51d9dc)=>{const _0x41c8fa=_0x6ab50e,_0x3e570b=(_0x382dab[_0x41c8fa(0x33d)]||_0x382dab[_0x41c8fa(0x177)]||'')[_0x41c8fa(0x16e)](),_0xa7176f=(_0x51d9dc[_0x41c8fa(0x33d)]||_0x51d9dc[_0x41c8fa(0x177)]||'')[_0x41c8fa(0x16e)]();return _0x3e570b[_0x41c8fa(0x33f)](_0xa7176f);});break;case _0x6ab50e(0x49d):_0x54fe49[_0x6ab50e(0x508)]((_0x50a165,_0x46f312)=>{const _0x215871=_0x6ab50e,_0x4b6100=(_0x50a165[_0x215871(0x33d)]||_0x50a165[_0x215871(0x177)]||'')[_0x215871(0x16e)](),_0x59c37a=(_0x46f312[_0x215871(0x33d)]||_0x46f312[_0x215871(0x177)]||'')[_0x215871(0x16e)]();return _0x59c37a[_0x215871(0x33f)](_0x4b6100);});break;}renderPointsOverview(_0x54fe49);}async function handleAwardItem(_0x23ff7f){const _0xb71ce1=a4_0xd679e2;_0x23ff7f[_0xb71ce1(0x2c3)]();const _0x75a499=document[_0xb71ce1(0x185)](_0xb71ce1(0x2b6))['value'],_0x43d539=document[_0xb71ce1(0x185)](_0xb71ce1(0x518))[_0xb71ce1(0x227)],_0x209311=document[_0xb71ce1(0x185)]('award-reason')['value'][_0xb71ce1(0x3c6)]();if(!_0x75a499||!_0x43d539){showNotification(_0xb71ce1(0x174),_0xb71ce1(0x182));return;}try{showNotification(_0xb71ce1(0x499),_0xb71ce1(0x16c)),document[_0xb71ce1(0x185)](_0xb71ce1(0x45a))[_0xb71ce1(0x522)]();}catch(_0x3061e1){console['error'](_0xb71ce1(0x192),_0x3061e1),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x3061e1[_0xb71ce1(0x426)],_0xb71ce1(0x182));}}async function loadUserPointsHistory(_0x13b108){const _0x27b39f=a4_0xd679e2;try{const _0x177e39=collection(db,'pointsHistory'),_0x5b1f54=query(_0x177e39,where(_0x27b39f(0x54e),'==',_0x13b108),orderBy(_0x27b39f(0x418),_0x27b39f(0x332))),_0x5c89b8=await getDocs(_0x5b1f54);console[_0x27b39f(0x514)]('Found\x20'+_0x5c89b8[_0x27b39f(0x529)]+_0x27b39f(0x3f8)+_0x13b108),showNotification(_0x27b39f(0x521)+_0x5c89b8[_0x27b39f(0x529)]+_0x27b39f(0x279),_0x27b39f(0x28f));}catch(_0x578eea){console['error'](_0x27b39f(0x2ae),_0x578eea),showNotification(_0x27b39f(0x15a),'error');}}async function initializeUserPointsField(){const _0x24ceb0=a4_0xd679e2;try{console[_0x24ceb0(0x514)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x2faec6=collection(db,'userProfiles'),_0x33999e=await getDocs(_0x2faec6);if(_0x33999e['empty']){console[_0x24ceb0(0x514)](_0x24ceb0(0x21a));return;}let _0x38404c=0x0,_0x3f3746=0x0;const _0x1a1b88=writeBatch(db);let _0xdb8253=0x0;return console['log']('Found\x20'+_0x33999e['size']+'\x20users\x20to\x20check...'),_0x33999e[_0x24ceb0(0x4eb)](_0x114e1b=>{const _0x1093d1=_0x24ceb0,_0x4d1197=_0x114e1b[_0x1093d1(0x17d)]();_0x4d1197['points']===undefined||_0x4d1197[_0x1093d1(0x547)]===null?(_0x1a1b88[_0x1093d1(0x314)](_0x114e1b[_0x1093d1(0x44f)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x38404c++,_0xdb8253++,console[_0x1093d1(0x514)](_0x1093d1(0x422)+(_0x4d1197['displayName']||_0x4d1197[_0x1093d1(0x177)]||_0x4d1197[_0x1093d1(0x420)]||_0x1093d1(0x398))+_0x1093d1(0x498))):(_0x3f3746++,console['log']((_0x4d1197[_0x1093d1(0x33d)]||_0x4d1197['username']||_0x4d1197[_0x1093d1(0x420)]||_0x1093d1(0x398))+_0x1093d1(0x299)+_0x4d1197[_0x1093d1(0x547)])),_0xdb8253>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x38404c>0x0?(console[_0x24ceb0(0x514)]('Committing\x20batch\x20update\x20for\x20'+_0x38404c+_0x24ceb0(0x3f1)),await _0x1a1b88[_0x24ceb0(0x241)](),console[_0x24ceb0(0x514)](_0x24ceb0(0x4da)+_0x38404c+'\x20users')):console[_0x24ceb0(0x514)](_0x24ceb0(0x1e4)),console['log'](_0x24ceb0(0x461)+_0x33999e[_0x24ceb0(0x529)]+_0x24ceb0(0x2de)+_0x38404c+_0x24ceb0(0x52f)+_0x3f3746),showNotification(_0x24ceb0(0x3bc)+_0x38404c+_0x24ceb0(0x45f)+_0x3f3746+_0x24ceb0(0x1a5),'success'),window[_0x24ceb0(0x1a0)]&&loadPointsOverview(),{'totalUsers':_0x33999e['size'],'usersUpdated':_0x38404c,'usersAlreadyHadPoints':_0x3f3746};}catch(_0x5e4ce5){console['error'](_0x24ceb0(0x23d),_0x5e4ce5),showNotification(_0x24ceb0(0x438)+_0x5e4ce5[_0x24ceb0(0x426)],_0x24ceb0(0x182));throw _0x5e4ce5;}}function addPointsMigrationButton(){const _0x5d371d=a4_0xd679e2,_0x296741=document[_0x5d371d(0x185)]('manage-points');if(!_0x296741)return;if(document[_0x5d371d(0x185)](_0x5d371d(0x4e5)))return;const _0x5dc2ff=document[_0x5d371d(0x54a)](_0x5d371d(0x1b1));_0x5dc2ff[_0x5d371d(0x4cd)]='migration-section',_0x5dc2ff[_0x5d371d(0x273)][_0x5d371d(0x269)]=_0x5d371d(0x3a5),_0x5dc2ff[_0x5d371d(0x273)]['padding']=_0x5d371d(0x33b),_0x5dc2ff['style'][_0x5d371d(0x555)]=_0x5d371d(0x3ed),_0x5dc2ff[_0x5d371d(0x273)][_0x5d371d(0x41e)]=_0x5d371d(0x12c),_0x5dc2ff['style'][_0x5d371d(0x327)]=_0x5d371d(0x43f),_0x5dc2ff['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0xb3f9e0=_0x296741[_0x5d371d(0x388)]('.section-header');_0xb3f9e0&&_0xb3f9e0[_0x5d371d(0x1c2)]('afterend',_0x5dc2ff),document['getElementById'](_0x5d371d(0x4e5))[_0x5d371d(0x1bc)]('click',async function(){const _0x4c2533=_0x5d371d;if(confirm(_0x4c2533(0x52d))){this['disabled']=!![],this[_0x4c2533(0x319)]=_0x4c2533(0x251);try{await initializeUserPointsField(),this[_0x4c2533(0x319)]=_0x4c2533(0x1e2),this[_0x4c2533(0x273)]['backgroundColor']='#28a745',setTimeout(()=>{const _0x224c91=_0x4c2533;_0x5dc2ff[_0x224c91(0x273)]['display']=_0x224c91(0x229);},0xbb8);}catch(_0x34fab3){this[_0x4c2533(0x319)]=_0x4c2533(0x427),this[_0x4c2533(0x3ab)]=![];}}});}function setupManagePointsSection(){const _0x47bc02=a4_0xd679e2;console[_0x47bc02(0x514)](_0x47bc02(0x236)),addPointsMigrationButton();const _0x3855cb=document['getElementById']('points-user-search');_0x3855cb&&_0x3855cb[_0x47bc02(0x1bc)]('input',debounce(searchUsersForPoints,0x12c));const _0x2c6ae2=document[_0x47bc02(0x185)](_0x47bc02(0x3a8));_0x2c6ae2&&_0x2c6ae2[_0x47bc02(0x1bc)]('submit',handleModifyPoints);const _0x3cdc20=document[_0x47bc02(0x185)](_0x47bc02(0x45a));_0x3cdc20&&_0x3cdc20[_0x47bc02(0x1bc)]('submit',handleAwardItem);const _0x330db6=document[_0x47bc02(0x185)](_0x47bc02(0x403));_0x330db6&&_0x330db6[_0x47bc02(0x1bc)](_0x47bc02(0x2e7),debounce(filterPointsOverview,0x12c));const _0x973d3c=document[_0x47bc02(0x185)]('points-sort-order');_0x973d3c&&_0x973d3c['addEventListener'](_0x47bc02(0x370),sortPointsOverview);const _0x2e5b4e=document[_0x47bc02(0x185)](_0x47bc02(0x1c0));_0x2e5b4e&&_0x2e5b4e[_0x47bc02(0x1bc)](_0x47bc02(0x130),loadPointsOverview);const _0x24c9be=document[_0x47bc02(0x185)]('quick-edit-points-modal');if(_0x24c9be){console[_0x47bc02(0x514)](_0x47bc02(0x30d));const _0x5f26b2=_0x24c9be[_0x47bc02(0x388)]('.close-btn');_0x5f26b2?_0x5f26b2[_0x47bc02(0x1bc)](_0x47bc02(0x130),function(){const _0x3cd9df=_0x47bc02;console[_0x3cd9df(0x514)](_0x3cd9df(0x1d1)),closeQuickEditModal();}):console['warn'](_0x47bc02(0x1ba));const _0x16fd26=document[_0x47bc02(0x185)](_0x47bc02(0x2f9));_0x16fd26?_0x16fd26['addEventListener'](_0x47bc02(0x130),function(){const _0x472d69=_0x47bc02;console['log'](_0x472d69(0x1b5)),closeQuickEditModal();}):console[_0x47bc02(0x1c8)](_0x47bc02(0x4f7));const _0x569468=document[_0x47bc02(0x185)](_0x47bc02(0x15e));_0x569468?_0x569468[_0x47bc02(0x1bc)](_0x47bc02(0x44d),function(_0x49a916){const _0x3856b7=_0x47bc02;console[_0x3856b7(0x514)](_0x3856b7(0x124)),handleQuickEditPoints(_0x49a916);}):console[_0x47bc02(0x182)]('Quick\x20edit\x20form\x20not\x20found!'),_0x24c9be[_0x47bc02(0x1bc)](_0x47bc02(0x130),function(_0x218ff2){const _0x454f0a=_0x47bc02;_0x218ff2[_0x454f0a(0x2a8)]===_0x24c9be&&(console[_0x454f0a(0x514)](_0x454f0a(0x270)),closeQuickEditModal());});}else console[_0x47bc02(0x182)](_0x47bc02(0x221));console[_0x47bc02(0x514)]('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0xd37ecc=a4_0xd679e2;console[_0xd37ecc(0x514)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x2e3d02=document[_0xd37ecc(0x185)](_0xd37ecc(0x1f9));_0x2e3d02&&_0x2e3d02['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x438228=document[_0xd37ecc(0x185)]('search-ribbon-user-btn');_0x438228&&_0x438228['addEventListener'](_0xd37ecc(0x130),searchRibbonUser);const _0x31b191=document[_0xd37ecc(0x185)](_0xd37ecc(0x1ea));_0x31b191&&_0x31b191[_0xd37ecc(0x1bc)](_0xd37ecc(0x44d),addRibbon),_0x2e3d02&&_0x2e3d02[_0xd37ecc(0x1bc)](_0xd37ecc(0x48d),function(_0x7c367){const _0x51fb6f=_0xd37ecc;_0x7c367['key']===_0x51fb6f(0x4a6)&&(_0x7c367[_0x51fb6f(0x2c3)](),searchRibbonUser());}),console[_0xd37ecc(0x514)](_0xd37ecc(0x2ca));}async function modifyUserPoints(_0x985c61,_0x229e04,_0x3dfa60,_0x5f582b=''){const _0x27fc85=a4_0xd679e2,_0x22c1fd=doc(db,_0x27fc85(0x3c2),_0x985c61),_0x593c1c=await getDoc(_0x22c1fd);if(!_0x593c1c[_0x27fc85(0x2c2)]())throw new Error(_0x27fc85(0x2d8));const _0x440db5=_0x593c1c['data'](),_0x1567e4=_0x440db5[_0x27fc85(0x547)]!==undefined?_0x440db5[_0x27fc85(0x547)]:0x0;_0x440db5[_0x27fc85(0x547)]===undefined&&(console[_0x27fc85(0x514)](_0x27fc85(0x557)+(_0x440db5[_0x27fc85(0x33d)]||_0x440db5[_0x27fc85(0x420)]||_0x27fc85(0x398))),await updateDoc(_0x22c1fd,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x48d956=_0x1567e4;switch(_0x229e04){case'add':_0x48d956=_0x1567e4+_0x3dfa60;break;case _0x27fc85(0x310):_0x48d956=Math[_0x27fc85(0x39b)](0x0,_0x1567e4-_0x3dfa60);break;case _0x27fc85(0x3ea):_0x48d956=_0x3dfa60;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x22c1fd,{'points':_0x48d956,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x27fc85(0x345)),{'userId':_0x985c61,'userEmail':_0x440db5[_0x27fc85(0x420)]||_0x27fc85(0x204),'displayName':_0x440db5[_0x27fc85(0x33d)]||_0x440db5['username']||_0x27fc85(0x215),'action':_0x229e04,'amount':_0x3dfa60,'previousPoints':_0x1567e4,'newPoints':_0x48d956,'reason':_0x5f582b,'adminEmail':auth[_0x27fc85(0x171)][_0x27fc85(0x420)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x440eec=a4_0xd679e2,_0x3d7e38=document[_0x440eec(0x185)](_0x440eec(0x3bd));if(!_0x3d7e38)return;_0x3d7e38['innerHTML']=_0x440eec(0x302);try{const _0x287e84=collection(db,_0x440eec(0x3c2)),_0x427c48=await getDocs(_0x287e84);if(_0x427c48[_0x440eec(0x294)]){_0x3d7e38[_0x440eec(0x319)]=_0x440eec(0x50a);return;}const _0x16f6f3=[];let _0x1c7f94=0x0;_0x427c48['forEach'](_0x5c17ff=>{const _0x348d7c=_0x440eec,_0x1ae42d=_0x5c17ff[_0x348d7c(0x17d)](),_0x1c955c=_0x1ae42d[_0x348d7c(0x547)]!==undefined?_0x1ae42d[_0x348d7c(0x547)]:0x0;_0x1ae42d[_0x348d7c(0x547)]===undefined&&_0x1c7f94++,_0x16f6f3[_0x348d7c(0x3a6)]({'id':_0x5c17ff['id'],..._0x1ae42d,'points':_0x1c955c});}),_0x1c7f94>0x0&&(console['log'](_0x440eec(0x4ec)+_0x1c7f94+_0x440eec(0x285)),showNotification(_0x1c7f94+_0x440eec(0x152),_0x440eec(0x28f))),_0x16f6f3[_0x440eec(0x508)]((_0x5320e7,_0x120555)=>(_0x120555[_0x440eec(0x547)]||0x0)-(_0x5320e7[_0x440eec(0x547)]||0x0)),window[_0x440eec(0x1a0)]=_0x16f6f3,renderPointsOverview(_0x16f6f3);}catch(_0x3593cd){console[_0x440eec(0x182)](_0x440eec(0x32a),_0x3593cd),_0x3d7e38[_0x440eec(0x319)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x3593cd['message']+_0x440eec(0x465);}}async function loadRibbonsData(){const _0x9f8592=a4_0xd679e2,_0x2ef416=document[_0x9f8592(0x185)](_0x9f8592(0x3fd));if(!_0x2ef416)return;_0x2ef416[_0x9f8592(0x319)]=_0x9f8592(0x3c9);try{const [_0x3966c8,_0x4a116d,_0x1b44a4]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x9f8592(0x155))),getDocs(collection(db,_0x9f8592(0x350)))]);_0x2ef416[_0x9f8592(0x319)]='';const _0x26e488=(_0x8ba0b2,_0xdbe917)=>{const _0x3ff8f7=_0x9f8592;_0x8ba0b2[_0x3ff8f7(0x4eb)](_0x3693b9=>{const _0x503a20=_0x3ff8f7,_0x3f57de=_0x3693b9[_0x503a20(0x17d)](),_0x4b2ca6=_0x3f57de[_0x503a20(0x248)]||{},_0x20e999=Object['keys'](_0x4b2ca6)[_0x503a20(0x190)],_0x4b21fb=document['createElement']('tr');_0x4b21fb['innerHTML']=_0x503a20(0x18a)+(_0x3f57de['username']||_0x503a20(0x398))+_0x503a20(0x166)+_0xdbe917[_0x503a20(0x16e)]()+'\x22>'+_0xdbe917+_0x503a20(0x2e1)+_0x20e999+_0x503a20(0x21e)+(_0x3f57de['lastUpdated']?new Date(_0x3f57de['lastUpdated'][_0x503a20(0x23a)]*0x3e8)[_0x503a20(0x3c7)]():_0x503a20(0x398))+_0x503a20(0x4f6)+_0x3f57de[_0x503a20(0x177)]+'\x22\x20data-ladder=\x22'+_0xdbe917+_0x503a20(0x572),_0x2ef416[_0x503a20(0x180)](_0x4b21fb);});};_0x26e488(_0x3966c8,'D1'),_0x26e488(_0x4a116d,'D2'),_0x26e488(_0x1b44a4,'D3'),document['querySelectorAll'](_0x9f8592(0x3ec))[_0x9f8592(0x4eb)](_0x4bb714=>{const _0x39cfaf=_0x9f8592;_0x4bb714['addEventListener'](_0x39cfaf(0x130),function(){const _0x30df5f=_0x39cfaf,_0x2ab44b=this['dataset']['username'],_0x1f846a=this['dataset'][_0x30df5f(0x2aa)];editUserRibbons(_0x2ab44b,_0x1f846a);});}),showNotification(_0x9f8592(0x14e),_0x9f8592(0x16c));}catch(_0x1be0bb){console[_0x9f8592(0x182)]('Error\x20loading\x20ribbons:',_0x1be0bb),_0x2ef416[_0x9f8592(0x319)]=_0x9f8592(0x188),showNotification('Error\x20loading\x20ribbons\x20data',_0x9f8592(0x182));}}async function searchRibbonUser(){const _0x24429d=a4_0xd679e2,_0xeea319=document[_0x24429d(0x185)](_0x24429d(0x1f9))[_0x24429d(0x227)][_0x24429d(0x3c6)]();if(!_0xeea319){showNotification(_0x24429d(0x2f5),_0x24429d(0x182));return;}try{const [_0x3afc4e,_0x2a978a,_0x5c28e3]=await Promise[_0x24429d(0x33e)]([getDoc(doc(db,_0x24429d(0x424),_0xeea319)),getDoc(doc(db,_0x24429d(0x155),_0xeea319)),getDoc(doc(db,_0x24429d(0x350),_0xeea319))]);let _0x4a85cd=null,_0x307038=null;if(_0x3afc4e['exists']())_0x4a85cd='D1',_0x307038=_0x3afc4e[_0x24429d(0x17d)]();else{if(_0x2a978a[_0x24429d(0x2c2)]())_0x4a85cd='D2',_0x307038=_0x2a978a[_0x24429d(0x17d)]();else _0x5c28e3['exists']()&&(_0x4a85cd='D3',_0x307038=_0x5c28e3[_0x24429d(0x17d)]());}_0x4a85cd?(document[_0x24429d(0x185)](_0x24429d(0x36d))[_0x24429d(0x31d)]=_0xeea319,document[_0x24429d(0x185)]('ribbon-target-user')[_0x24429d(0x227)]=_0xeea319,document[_0x24429d(0x185)](_0x24429d(0x25e))['value']=_0x4a85cd,document[_0x24429d(0x185)](_0x24429d(0x39c))['style'][_0x24429d(0x563)]=_0x24429d(0x1ed),displayCurrentRibbons(_0x307038[_0x24429d(0x248)]||{}),showNotification(_0x24429d(0x4ec)+_0xeea319+_0x24429d(0x361)+_0x4a85cd+_0x24429d(0x2f0),_0x24429d(0x16c))):showNotification(_0x24429d(0x482)+_0xeea319+'\x20not\x20found\x20in\x20any\x20ladder',_0x24429d(0x182));}catch(_0x57d3a3){console[_0x24429d(0x182)](_0x24429d(0x29b),_0x57d3a3),showNotification('Error\x20searching\x20for\x20user',_0x24429d(0x182));}}function displayCurrentRibbons(_0x213a22){const _0x351c8e=a4_0xd679e2,_0x131993=document[_0x351c8e(0x185)](_0x351c8e(0x35e));if(!_0x131993)return;_0x131993[_0x351c8e(0x319)]='';if(Object[_0x351c8e(0x485)](_0x213a22)[_0x351c8e(0x190)]===0x0){_0x131993[_0x351c8e(0x319)]=_0x351c8e(0x24d);return;}Object['entries'](_0x213a22)['forEach'](([_0x587887,_0x4be50a])=>{const _0x32ad85=_0x351c8e,_0x1b9d85=document[_0x32ad85(0x54a)]('div');_0x1b9d85['className']='ribbon-item',_0x1b9d85[_0x32ad85(0x319)]=_0x32ad85(0x2e3)+_0x587887+_0x32ad85(0x42e)+(_0x4be50a[_0x32ad85(0x209)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x4be50a['awardedAt']?new Date(_0x4be50a[_0x32ad85(0x282)]['seconds']*0x3e8)[_0x32ad85(0x3c7)]():_0x32ad85(0x398))+_0x32ad85(0x4ff)+_0x587887+_0x32ad85(0x210),_0x131993[_0x32ad85(0x180)](_0x1b9d85);}),document[_0x351c8e(0x4b2)]('.remove-ribbon-btn')[_0x351c8e(0x4eb)](_0x22ae4f=>{const _0x524175=_0x351c8e;_0x22ae4f[_0x524175(0x1bc)](_0x524175(0x130),function(){const _0x5431d6=_0x524175,_0x427afb=this[_0x5431d6(0x55c)][_0x5431d6(0x38e)];removeRibbon(_0x427afb);});});}async function addRibbon(_0x1c5fc8){const _0x371f05=a4_0xd679e2;_0x1c5fc8[_0x371f05(0x2c3)]();const _0x4458df=document[_0x371f05(0x185)]('ribbon-target-user')[_0x371f05(0x227)],_0x5d0764=document['getElementById']('ribbon-target-ladder')[_0x371f05(0x227)],_0x28e26e=document[_0x371f05(0x185)](_0x371f05(0x275))[_0x371f05(0x227)],_0x1b56ce=parseInt(document[_0x371f05(0x185)]('ribbon-level')[_0x371f05(0x227)]);if(!_0x4458df||!_0x5d0764||!_0x28e26e||!_0x1b56ce){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x40d51b='playerRibbons'+(_0x5d0764==='D1'?'':_0x5d0764),_0x22a7be=doc(db,_0x40d51b,_0x4458df),_0x360f37=await getDoc(_0x22a7be),_0x1c0ba6=_0x360f37[_0x371f05(0x2c2)]()?_0x360f37['data']()['ribbons']||{}:{};_0x1c0ba6[_0x28e26e]={'level':_0x1b56ce,'awardedAt':serverTimestamp()},await setDoc(_0x22a7be,{'username':_0x4458df,'ladder':_0x5d0764,'ribbons':_0x1c0ba6,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x371f05(0x1a9)+_0x28e26e+_0x371f05(0x24e)+_0x1b56ce+_0x371f05(0x3b7)+_0x4458df,_0x371f05(0x16c)),displayCurrentRibbons(_0x1c0ba6),document[_0x371f05(0x185)](_0x371f05(0x275))['value']='',document[_0x371f05(0x185)]('ribbon-level')[_0x371f05(0x227)]='1';}catch(_0x808477){console[_0x371f05(0x182)](_0x371f05(0x156),_0x808477),showNotification('Error\x20adding\x20ribbon',_0x371f05(0x182));}}function a4_0x3ce1(){const _0x36fa16=['create-creator-highlight-btn','Error\x20creating\x20activity\x20chart:','action','✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20','users-table-body','split','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','\x20before\x20match:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','Match\x20resimulated\x20successfully!\x20','docs','demote-modal','migrate-points-btn','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','edit-highlight-matchDate-input','createdAt','playersD2','.form-group,\x20.form-row','forEach','Found\x20','Adding\x20player\x20','trophyDefinitions','<div\x20class=\x22loading\x22>Searching...</div>','Achievement','data-id','edit-highlight-mapVersion-input','YouTube\x20Video\x20ID\x20(Optional)','wins','promotion','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','Cancel\x20button\x20not\x20found','role','highlight-map-version-container','.close','Please\x20enter\x20valid\x20data','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','Creator\x20highlight\x20button\x20clicked','Error\x20finding\x20match:','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','Quick\x20edit\x20clicked\x20for\x20user:','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','manage-levels-ribbons','edit-highlight-winnerScore-input','edit-match-loser-score','create-achievement-highlight-btn','Trophy\x20created\x20successfully','sort','delete-match-summary','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','dashboard','low-points','player-count','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','load-highlights-data','Error\x20saving\x20trophy:','source','Map\x20Creator\x20is\x20required','promote-modal','log','TestLoser','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','.view-history-btn','store-item-select','Deleting\x20match...','achievementImageUrl','checked','highlight-achievement-details-container','.remove-role-btn','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','Username\x20is\x20missing','\x20-\x20','User\x20has\x20','reset','button[type=\x22submit\x22]','promote-ladder','\x20already\x20exists\x20in\x20','winnerScore','Error\x20resolving\x20username\x20for\x20','highlight-match-date','size','Error\x20setting\x20up\x20admin\x20dashboard','.error-state','Auth:','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','#matches-table-body\x20tr','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','highlight-map-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','points-asc','.type','\x20(winner)\x20vs\x20','Error\x20setting\x20custom\x20ELO:','Testing\x20Firebase\x20connection...','Load\x20players\x20data\x20clicked','floor','Modal\x20should\x20now\x20be\x20visible','roleColor','d2-next-page','Setting\x20up\x20points\x20action\x20buttons...','set-role-form','highlight-achievement-image-container','map','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','quick-points-reason','Article\x20deleted\x20successfully','highlight-player-profile','article-form','points','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20added\x20successfully\x20to\x20','createElement','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','description','Trophy\x20ID\x20and\x20username\x20are\x20required','userId','visibility','Loading...','.close-btn','\x20<span\x20class=\x22user-source\x22>(','150920ZiWsHs','load-inactive-players-data','backgroundColor','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','Initializing\x20points\x20field\x20for\x20user\x20','quick-add','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','achievementPlayer','dataset','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','winnerUsername','delete-match-confirm-modal','Error\x20loading\x20highlight:\x20','eloHistoryD3','demote-form','display','asc','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','edit-highlight-mapCreator-input','\x20ladder,\x20page\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','edit-losses','Loading\x20players\x20from\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','Player\x20','toDate','Deleting\x20match\x20','Error','Create\x20New\x20Trophy','Highlight\x20created\x20successfully!','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.delete-btn','Gold','updatedAt','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','highlight-achievement-player','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','Failed\x20to\x20save\x20article:\x20','Quick\x20edit\x20form\x20submitted','highlight-match-link','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','quick-edit-current-points','getComputedStyle','highlights-table-body','manage-articles','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','article-image-url','Firebase\x20connection\x20test\x20successful!','searchTerm','click','removeAttribute','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','highlight-match-date-container','.sidebar-nav\x20.nav-item','You\x20must\x20be\x20logged\x20in','loserDemoLink','Found\x20ELO\x20history\x20for\x20player\x20','daysSinceMatch','Modal\x20element\x20not\x20found!','Load\x20history\x20data\x20clicked','load-players-data','Set\x20to\x20','28JljueE','Error\x20in\x20demotion:','.ladder-switch\x20input','cancel-highlight-btn','\x20(+','approvedAt','Points\x20updated\x20successfully\x20for\x20user:','Points\x20action\x20buttons\x20setup\x20complete','userAllowedTabs','Firebase\x20connection\x20test\x20failed:','setAttribute','demotion','selected-user-name','classList','Please\x20enter\x20valid\x20username\x20and\x20ELO','Player\x20Name\x20is\x20required','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','Ribbons\x20data\x20loaded\x20successfully','Error\x20saving\x20highlight:','required','highlight-achievement-details','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',',\x20giving\x20default\x20access','Create\x20New\x20','playerRibbonsD2','Error\x20adding\x20ribbon:','Title\x20is\x20required','\x20ladder!','article-modal','Failed\x20to\x20load\x20user\x20history','\x20(from\x20','assign-trophy-id','MAX_SAFE_INTEGER','quick-edit-points-form','input[name=\x22promote-ladder\x22]:checked','\x20inactive\x20players','matches-table-body','Error\x20removing\x20role:','edit-highlight-description-input','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','validation-results-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','#FFD700','Error\x20removing\x20ribbon:','highlight-players-container','position','edit-match-ladder','success','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','toLowerCase','manage-ribbons','edit-match-loser','currentUser','Error\x20deleting\x20highlight:','create-new-article-btn','Please\x20select\x20a\x20user\x20and\x20store\x20item','has','Match\x20deleted\x20successfully','username','img','Create\x20test\x20match\x20form\x20not\x20found','trace','Successfully\x20demoted\x20','eloRating','data','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','load-ribbons-data','appendChild','.view-player-btn','error','Delete\x20match\x20clicked:','.empty-state','getElementById','Failed\x20to\x20load\x20article\x20data','Page\x201','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','highlight-title','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','firstVisible','highlight-map','rank-distribution-chart','highlight-achievement-player-container','name-asc','length','Error\x20loading\x20dashboard\x20data:','Error\x20awarding\x20item:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','openResimulateModal\x20called!','highlight-type','paste','Load\x20ribbons\x20data\x20clicked','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','Create\x20test\x20match\x20button\x20setup\x20complete','getDate','reason','title','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','bind','test','allUsersPoints','.edit-article-btn','Error\x20removing\x20ribbon','apply','N/A','\x20users\x20already\x20had\x20points.','pendingMatches','user-search-results','create-new-trophy-btn','Added\x20','ELO\x20rating\x20for\x20','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','Unranked','highlight-form','Set\x20default\x20ladder\x20to:','cancel-role-btn','create-test-match-form','div','creatorImageUrl','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','promote-form','Modal\x20cancel\x20button\x20clicked','history-type-filter','Searching\x20for\x20player\x20in\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','Silver','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','edit-match-map','addEventListener','set-role-modal','highlight-match-info','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','refresh-points-overview','getDay','insertAdjacentElement','Failed\x20to\x20load\x20points\x20data:\x20','Error\x20applying\x20filters:','Error\x20assigning\x20trophy:','Setting\x20up\x20Manage\x20Highlights\x20section','❌\x20Missing','warn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','Bronze','set-elo-form','admin_modification','69894PKYfkB','setDate','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','article-content','Modal\x20close\x20button\x20clicked','match-row','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','Failed\x20to\x20update\x20player:\x20','Looking\x20for\x20user\x20role\x20information\x20for\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','\x20not\x20found.','edit-highlight-title-input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','Load\x20inactive\x20players\x20data\x20clicked','confirmResimulateMatch','Create\x20test\x20match\x20modal\x20not\x20found','51XfNKVs','data-ladder','\x20Weekly\x20Activity','),\x20','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Loaded\x20','No\x20users\x20needed\x20points\x20field\x20initialization','Achievement\x20highlight\x20button\x20clicked','new-player-elo','matchId','quick-edit-points-modal','✅\x20Exists','add-ribbon-form','Loading\x20points\x20data...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','block','Match\x20Result','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','Profile','empty-state','Error\x20initializing\x20admin\x20dashboard:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','Found\x20specific\x20role:\x20','.no-results','Displaying\x20','fa-exclamation-circle','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','ribbon-user-search','Remove\x20','Loading\x20user\x20data...','substring','winnerComment','highlight-submitted-by','resimulate-match-id','Load\x20matches\x20data\x20clicked','edit-highlight-loserScore-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','unknown','manage-matches','points-action','quick-points-amount','</span>','level','reset-matches-filters','Positions\x20updated:\x20Winner\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','article-modal-title','Error\x20loading\x20players:','loserName','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','get','Error\x20deleting\x20article:','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','highlight-description','Unknown\x20User','getAttribute','Loading\x20dashboard\x20overview\x20data...','page','edit-highlight-creatorImageUrl-input','No\x20users\x20found\x20in\x20userProfiles\x20collection','Highlight\x20added\x20successfully!','trophy-description','Player\x20not\x20found\x20in\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','create-match-highlight-btn','achievement-type','Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!','.nav-item','amount','Role\x20select\x20set\x20to:\x20','resimulation','trophy-modal','value','Edit\x20match\x20clicked:','none','trophy-form','Emerald','Error\x20loading\x20trophy\x20definitions:','toISOString','Error\x20demoting\x20player:\x20','win','quick-edit-user-id','match','demotedBy','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-match-loser-comment','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','Setting\x20up\x20Manage\x20Points\x20section','error-state','playerId','Article\x20updated\x20successfully','seconds','#elo-history-table-body\x20tr','matchDate','Error\x20initializing\x20points\x20field:','\x20for\x20user\x20\x22','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','sources','commit','closest','player','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','Non-Participants','.quick-edit-btn','edit-match-winner-comment','ribbons','bar','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','Failed\x20to\x20send\x20Discord\x20notification:','Failed\x20to\x20save\x20match:\x20','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','\x20Level\x20','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','table','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','approvedMatches','loss','assign-trophy-description','article-title','#players-table-body\x20tr','name','.loading-cell','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','apply-matches-filters','search-result-item','Error\x20opening\x20assign\x20trophy\x20modal:','ribbon-target-ladder','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','elo-history','assign-trophy-rarity','Load\x20trophies\x20data\x20clicked','no-results-message','-page-indicator','highly-inactive','visible','Error\x20resimulating\x20match:','marginBottom','d3-prev-page','./promotions.js','290RvzVzz','\x20matches\x20for\x20','\x20points','modifiedBy','Modal\x20background\x20clicked','Error:\x20','role-color','style','Demoting\x20player\x20to\x20','ribbon-type-select','No\x20ELO\x20history\x20found\x20for\x20player\x20','values','matches-next-page','\x20points\x20history\x20entries','set-elo-modal','eloHistoryD2','Switched\x20to\x20','trophy-preview-img','user-role','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','\x22\x20awarded\x20to\x20','Failed\x20to\x20load\x20match\x20data','awardedAt','4htKsuA','Manage\x20Highlights\x20section\x20initialized','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','role-username','https://www.youtube.com/embed/','Error\x20fetching\x20matches\x20for\x20','d3-next-page','Error\x20saving\x20highlight:\x20','replace','Match\x20ID\x20is\x20required','Creating\x20test\x20match\x20without\x20player\x20validation...','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','info','article-author','.admin-action','history-start-date','edit-highlight-videoId-input','empty','mapName','achievementDetails','newElo','highlight-creator-image','\x20already\x20has\x20points:\x20','Error\x20loading\x20match\x20for\x20deletion:','Error\x20searching\x20user:','confirm-resimulate-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','adminEmail','Highlight\x20not\x20found','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','Failed\x20to\x20load\x20trophy\x20data','loserUsername','trophy-preview-container','highlight-match-link-container','highlight-loser-name','load-users-data','Error\x20loading\x20ribbons:','target','7863363VnJlMa','ladder','Test\x20match','set-elo-value','\x20was\x20updated\x20from\x20','Error\x20loading\x20user\x20points\x20history:','.ladder-switch\x20input[value=\x22D2\x22]','getRankName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','.assign-trophy-btn','Setting\x20up\x20highlight\x20buttons','edit-elo','currentTarget','selected-user-id','Error\x20initializing\x20dashboard:','Highlight\x20deleted\x20successfully','stopPropagation','startDate','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','player-search','assign-trophy-modal','#article-modal\x20.close-btn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','edit-match-winner-demo','exists','preventDefault','input[name=\x22demote-ladder\x22]:checked','edit-wins','trophy-image-preview','UserProfile','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','Unnamed\x20Trophy','Manage\x20Ribbons\x20section\x20initialized','href','previousElementSibling','pending-count','match-type','View\x20player\x20details\x20for\x20','rgba(25,\x20118,\x20210,\x200.7)','positive-change','Unauthorized:\x20Admin\x20access\x20required','edit-highlight-playerProfileUrl-input','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','previousElo','Role\x20\x27','User\x20not\x20found','edit-username','approvedMatchesD3','Error\x20loading\x20highlights:','author','Error\x20deleting\x20match:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','warning','console','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','players-ladder-selector','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','No\x20reason\x20provided','Error\x20checking\x20','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','input','mapVersion','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','players','quick-edit-display-name','Player\x20deleted\x20successfully','loserComment','highlight-map-creator','article-id','\x20ladder','creator','cloneNode','Error\x20loading\x20match\x20data:','Setting\x20up\x20matches\x20action\x20buttons...','Please\x20enter\x20a\x20username','roleAssignedAt','Created\x20','Failed\x20to\x20delete\x20match:\x20','cancel-quick-edit','-next-page','cells','highlight-submitted-by-container','Never\x20played','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','matches-prev-page','history-end-date','\x20→\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','demoLink','notification\x20','date','highlight-description-container','#50C878','Thursday','Player\x20updated\x20successfully','edit-player-modal','Updated\x20ELO\x20ratings:\x20Winner\x20','Saturday','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','Error\x20creating\x20rank\x20distribution\x20chart:','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','subtract','\x20-\x20Feature\x20coming\x20soon','Error\x20creating\x20simple\x20test\x20match:','user-roles-section','update','winnerSuicides','initial_placement','18096HpApHJ','Successfully\x20promoted\x20','innerHTML','selected-user-points','highlight-achievement-image','common','textContent','right','fa-info-circle','Could\x20not\x20find\x20player\x20documents','Failed\x20to\x20delete\x20article:\x20','add-player-form','highlight-winner-name','No\x20email','Admin\x20Adjustment','create-test-match-btn','borderRadius','rejected-count','content','Error\x20loading\x20points\x20overview:','(((.+)+)+)+$','settings','highlight-video-container','search','inactive-players-search','highlight-loser-score','Highlight','desc','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','highlight-video-preview-container','input[name=\x22set-elo-ladder\x22]:checked','demote-player-btn','Error\x20loading\x20article\x20data:','lastVisible','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','onAuthStateChanged','15px','Never','displayName','all','localeCompare','#inactive-players-table-body\x20tr','Error\x20searching\x20users:','Setting\x20permissions\x20based\x20on\x20role:\x20',';\x20color:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','pointsHistory','load-articles-data','opacity','onerror','\x22\x20already\x20has\x20this\x20trophy','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','rarity','opponent','Error\x20loading\x20trophies:','Error\x20loading\x20matches:','moderately-inactive','playerRibbonsD3','Error\x20loading\x20trophy\x20data:','Unknown\x20Player','uid','toString','match-count','lastMatch','points-reason','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','match_result','#000000','roleAssignedBy','no-results','current-ribbons-list','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','\x20in\x20','Setting\x20up\x20Manage\x20Matches\x20section','Found\x20user\x20in\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','#players.content-section.active','mapPlayed','0.6','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','pendingMatchesD2','highlight-winner-score','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','#808080','current-ribbon-user','\x20in\x20all\x20collections...','match-details-container','change','articles','roleName','elo','user-search','mapCreator','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','points-user-search','Untitled','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','players-table-body','manage-highlights','openResimulateModal','RejectedD1','role-filter','TestMap','Match\x20not\x20found','matches-search','Adding\x20simple\x20test\x20match...','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','Match\x20Highlight','manage-points','Modal\x20setup\x20complete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelector','createdBy','Match\x20highlight\x20button\x20clicked','edit-highlight-matchLink-input','assign-trophy-name','RejectedD3','ribbon','reduce','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','imageUrl','playersD3','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','body','find','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','#cancel-create-test-match-btn','Unknown','No\x20user\x20ID\x20found\x20on\x20button','Modal\x20closed','max','user-ribbon-management','endDate','resimulateMatch','active','Winner\x20and\x20loser\x20usernames\x20are\x20required','trophy-id','highlight-achievement-type-container','admin','Attempting\x20to\x20promote\x20','20px','push','Please\x20enter\x20a\x20valid\x20username','modify-points-form','matchInfo','previousPoints','disabled','result','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','includes','No\x20specific\x20permissions\x20for\x20user\x20','highlight-modal-title','\x20quick\x20edit\x20buttons','Failed\x20to\x20save\x20trophy:\x20','loserScore','Form\x20elements\x20are\x20missing','load-elo-history-data','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','\x20to\x20','Simple\x20test\x20match\x20created\x20successfully','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','\x20(based\x20on\x20data-role:\x20','removeEventListener','Points\x20field\x20initialized\x20for\x20','points-overview-table-body','edit-match-modal','destroy','parentNode','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','userProfiles','#C0C0C0','#e0e0e0','non-participant','trim','toLocaleDateString','Error\x20loading\x20users:','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>','highlight-achievement-type','promote-username','edit-match-id','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','edit-match-winner-suicides','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','Create\x20test\x20match\x20form\x20submitted','losses','edit-match-title','Adding\x20\x22active\x22\x20class\x20to\x20modal.','ribbon-target-user','Error\x20opening\x20quick\x20edit\x20modal:','constructor','rgba(255,\x20255,\x20255,\x200.1)','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','No\x20description','Failed\x20to\x20load\x20user\x20data:\x20','Title\x20and\x20content\x20are\x20required','9307480rBBdND','highlight-video-id','remove','edit-highlight-achievementPlayer-input','new-player-username','Username\x20input\x20set\x20to:\x20','Edit\x20Article','Edit\x20','Initial\x20Placement','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Toggling\x20fields\x20for\x20highlight\x20type:\x20','set-elo-ladder','highlight-id','set','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','.edit-ribbons-btn','rgba(255,\x20193,\x207,\x200.1)','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','assign-trophy-image','\x20users...','Match\x20ID\x20or\x20ladder\x20missing','Failed\x20to\x20modify\x20points:\x20','nonParticipants','-prev-page','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','highlights','\x20history\x20entries\x20for\x20user\x20','assign-player-username','Wednesday','Error\x20adding\x20player:\x20','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','ribbons-overview-table-body','test-match-winner-username','manage-ranks','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','TestWinner','cancel-trophy-btn','points-overview-search','current-ladder-display','Match\x20updated\x20successfully','Highlight\x20updated\x20successfully!','inactive-days-filter','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','load-matches-data','videoId','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Trophy\x20\x22','role-name','data-section','Failed\x20to\x20load\x20player\x20data','edit-match-winner','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','#d32f2f','Modal\x20element\x20found:','activity','points-management-forms','highlight-modal','timestamp','System','demote-ladder','edit-highlight-achievementDetails-input','type','elo-history-search','border','\x20by\x20UID:','email','create-test-match-modal','Queued\x20','\x20with\x20email\x20','playerRibbons','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','message','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','non-participants',').\x20','NonParticipant','add-new-role-btn','Tuesday','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20','matchLink','#highlight-modal\x20.close-btn','Failed\x20to\x20assign\x20trophy:\x20','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','toLocaleString','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','loserSuicides','Submit\x20button\x20clicked\x20directly','Load\x20highlights\x20data\x20clicked','Error\x20initializing\x20points:\x20','\x20view\x20history\x20buttons','resimulate-modal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','Error\x20loading\x20ELO\x20history:','Trophy\x20Preview','cancel-article-btn','5px','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','highlight-map-version','edit-match-loser-suicides','nonexistent','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','image','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','elo-history-table-body','\x20from\x20','setHours','Article\x20not\x20found','.admin-section','submit','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','ref','resimulate-match-btn','Sidebar\x20navigation\x20initialized\x20with\x20permissions','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','highlight-video-preview','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20','winnerName','demote-username','Won','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-title-container','award-item-form','trophy-rarity','set-elo-username','Trophy\x20not\x20found','achievement','\x20users.\x20','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','d2-prev-page','edit-highlight-id','Query\x20created:','</td></tr>','src',';\x22>','D2\x20Players','Monday','535341gQbKBd','pendingMatchesD3','Error\x20loading\x20dashboard:','activity-chart','\x22\x20not\x20found\x20in\x20any\x20collection','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','userTrophies','join','Role\x20\x22','quick-edit-email','catch','Error\x20loading\x20inactive\x20players:','Starting\x20complete\x20match\x20resimulation...','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','replaceChild','sendPromotionNotification','save-player-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','trophies-table-body','#users-table-body\x20tr[data-username=\x22','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','matches-end-date','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','User\x20','highlight-match-info-container','then','keys','add','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','negative-change','loading','testFirebaseConnection','Loser\x20','.edit-role-btn','keypress','<span\x20class=\x22no-role\x22>None</span>','Error\x20loading\x20articles:','Opening\x20create\x20test\x20match\x20modal','achievementType','input[name=\x22assign-ladder\x22]:checked','#ffffff','Processing\x20points\x20edit:','\x20vs\x20','promotedBy','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','\x20for\x20points\x20initialization','Store\x20item\x20awarded\x20successfully','.username','RejectedD2','Attaching\x20background\x20click\x20listener.','name-desc','points-sort-order','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','Error\x20saving\x20match:','Points\x20updated\x20successfully','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','fromDate','lastPointsModified','Enter','playerProfileUrl','manage-players','Modal\x20computed\x20styles:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','DOMContentLoaded','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','.close-notification','Page\x20','Edit\x20Trophy','string','querySelectorAll','pendingResimulateData','\x20section','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','color','inactive-players','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','manage-trophies','trophy-name','.edit-match-btn','Points\x20modified\x20successfully','approvedMatchesD2','Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','matches-start-date','focus','Username\x20','3297345TkjCEe','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','eloHistory','rankDistribution','hidden','edit-match-loser-demo','flex','className','Subtracted\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','.sidebar-nav\x20.nav-item[data-section=\x22','Featured\x20Creator','contains','test-match-date','creator-type','trophy-image-url'];a4_0x3ce1=function(){return _0x36fa16;};return a4_0x3ce1();}async function removeRibbon(_0x45efd1){const _0xbf767=a4_0xd679e2,_0x467896=document[_0xbf767(0x185)](_0xbf767(0x3d4))[_0xbf767(0x227)],_0xa6a6e3=document[_0xbf767(0x185)](_0xbf767(0x25e))[_0xbf767(0x227)];if(!confirm(_0xbf767(0x1fa)+_0x45efd1+'\x20from\x20'+_0x467896+'?'))return;try{const _0x44691d=_0xbf767(0x424)+(_0xa6a6e3==='D1'?'':_0xa6a6e3),_0x4f9b0f=doc(db,_0x44691d,_0x467896),_0xe346a5=await getDoc(_0x4f9b0f),_0x5e8688=_0xe346a5[_0xbf767(0x2c2)]()?_0xe346a5[_0xbf767(0x17d)]()[_0xbf767(0x248)]||{}:{};delete _0x5e8688[_0x45efd1],await setDoc(_0x4f9b0f,{'username':_0x467896,'ladder':_0xa6a6e3,'ribbons':_0x5e8688,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x45efd1+_0xbf767(0x449)+_0x467896,'success'),displayCurrentRibbons(_0x5e8688);}catch(_0x1e93d2){console[_0xbf767(0x182)](_0xbf767(0x168),_0x1e93d2),showNotification(_0xbf767(0x1a2),_0xbf767(0x182));}}function editUserRibbons(_0x2a8038,_0x410145){const _0x383f6e=a4_0xd679e2;document[_0x383f6e(0x185)]('ribbon-user-search')[_0x383f6e(0x227)]=_0x2a8038,searchRibbonUser();}