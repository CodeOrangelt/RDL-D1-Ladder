const a42_0x37fb3e=a42_0x4b3d,a42_0x3a3d19=(function(){let _0x27f5bd=!![];return function(_0x337440,_0x283ed9){const _0x5c22aa=_0x27f5bd?function(){if(_0x283ed9){const _0x1d8d09=_0x283ed9['apply'](_0x337440,arguments);return _0x283ed9=null,_0x1d8d09;}}:function(){};return _0x27f5bd=![],_0x5c22aa;};}()),a42_0x5b4ff7=a42_0x3a3d19(this,function(){const _0x606b80=a42_0x4b3d,_0x4796b4=function(){let _0x155de8;try{_0x155de8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x51cdbc){_0x155de8=window;}return _0x155de8;},_0x1b3822=_0x4796b4(),_0x1f1364=_0x1b3822['console']=_0x1b3822[_0x606b80(0x90)]||{},_0x38abd7=[_0x606b80(0x7d),'warn',_0x606b80(0xa3),'error','exception','table',_0x606b80(0x7f)];for(let _0x80b1a9=0x0;_0x80b1a9<_0x38abd7['length'];_0x80b1a9++){const _0xa89594=a42_0x3a3d19[_0x606b80(0x9b)][_0x606b80(0x82)]['bind'](a42_0x3a3d19),_0x5c98d0=_0x38abd7[_0x80b1a9],_0x491311=_0x1f1364[_0x5c98d0]||_0xa89594;_0xa89594[_0x606b80(0xa7)]=a42_0x3a3d19[_0x606b80(0x8a)](a42_0x3a3d19),_0xa89594['toString']=_0x491311['toString']['bind'](_0x491311),_0x1f1364[_0x5c98d0]=_0xa89594;}});a42_0x5b4ff7();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';function a42_0x4b3d(_0x1d5118,_0x12197b){const _0x5b4ff7=a42_0x5ba0();return a42_0x4b3d=function(_0x3a3d19,_0x4bfc6f){_0x3a3d19=_0x3a3d19-0x7c;let _0x5ba0af=_0x5b4ff7[_0x3a3d19];return _0x5ba0af;},a42_0x4b3d(_0x1d5118,_0x12197b);}function a42_0x5ba0(){const _0x2a0d94=['nickname','log','Error\x20loading\x20profile:','trace','currentUser','get','prototype','data','error','stats-winrate','onload','value','forEach','pfpUrl','bind','stats-','winrate','winnerScore','getElementById','approvedMatches','console','readAsDataURL','profile-preview','uid','favorite-weapon','pfpInput','Please\x20sign\x20in\x20to\x20save\x20your\x20profile','favoriteWeapon','profile-pictures/','addEventListener','pfpPreview','constructor','motto','loadProfile','setupEventListeners','favorite-map','loserScore','profile-form','textContent','info','pfp-upload','submit','stats-wins','__proto__'];a42_0x5ba0=function(){return _0x2a0d94;};return a42_0x5ba0();}const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x28933b=a42_0x4b3d;this['form']=document['getElementById'](_0x28933b(0xa1)),this['pfpInput']=document['getElementById'](_0x28933b(0xa4)),this['pfpPreview']=document['getElementById'](_0x28933b(0x92)),this['statsContainer']=document['getElementById']('player-stats'),this['setupEventListeners'](),this[_0x28933b(0x9d)]();}[a42_0x37fb3e(0x9e)](){const _0x15c2eb=a42_0x37fb3e;this[_0x15c2eb(0x95)]['addEventListener']('change',_0x586e4c=>this['handleImageUpload'](_0x586e4c)),this['form']['addEventListener'](_0x15c2eb(0xa5),_0x5d1488=>this['handleSubmit'](_0x5d1488));}async['handleImageUpload'](_0x3380bf){const _0x22bf9b=a42_0x37fb3e,_0x549e16=_0x3380bf['target']['files'][0x0];if(_0x549e16){const _0xf1eada=new FileReader();_0xf1eada[_0x22bf9b(0x86)]=_0x1b8fc8=>{this['pfpPreview']['src']=_0x1b8fc8['target']['result'];},_0xf1eada[_0x22bf9b(0x91)](_0x549e16);}}async['handleSubmit'](_0x39de18){const _0x3c73df=a42_0x37fb3e;_0x39de18['preventDefault']();const _0x311ed6=auth[_0x3c73df(0x80)];if(!_0x311ed6){alert(_0x3c73df(0x96));return;}try{const _0x1da9d5=new FormData(this['form']),_0x4bb06c={'nickname':_0x1da9d5['get']('nickname'),'motto':_0x1da9d5['get']('motto'),'favoriteMap':_0x1da9d5['get'](_0x3c73df(0x9f)),'favoriteWeapon':_0x1da9d5[_0x3c73df(0x81)]('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0x570402=this[_0x3c73df(0x95)]['files'][0x0];if(_0x570402){const _0x9b9567=ref(storage,_0x3c73df(0x98)+_0x311ed6['uid']);await uploadBytes(_0x9b9567,_0x570402),_0x4bb06c['pfpUrl']=await getDownloadURL(_0x9b9567);}await setDoc(doc(db,'profiles',_0x311ed6['uid']),_0x4bb06c),alert('Profile\x20saved\x20successfully!');}catch(_0x3187b3){console['error']('Error\x20saving\x20profile:',_0x3187b3),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x44aa12=>{const _0x3eb4fb=a42_0x4b3d;if(_0x44aa12)try{const _0x153f7f=await getDoc(doc(db,'profiles',_0x44aa12[_0x3eb4fb(0x93)]));if(_0x153f7f['exists']()){const _0x29e482=_0x153f7f[_0x3eb4fb(0x83)]();document['getElementById']('nickname')[_0x3eb4fb(0x87)]=_0x29e482[_0x3eb4fb(0x7c)]||'',document['getElementById'](_0x3eb4fb(0x9c))['value']=_0x29e482['motto']||'',document['getElementById']('favorite-map')['value']=_0x29e482['favoriteMap']||'',document['getElementById'](_0x3eb4fb(0x94))['value']=_0x29e482[_0x3eb4fb(0x97)]||'',_0x29e482[_0x3eb4fb(0x89)]&&(this[_0x3eb4fb(0x9a)]['src']=_0x29e482['pfpUrl']),await this['loadPlayerStats'](_0x29e482['nickname']);}}catch(_0x3f6f48){console['error'](_0x3eb4fb(0x7e),_0x3f6f48);}});}async['loadPlayerStats'](_0x53c2c4){const _0x84970d=a42_0x37fb3e;if(!_0x53c2c4)return;try{const _0x44998f=collection(db,_0x84970d(0x8f)),[_0x2a6fdb,_0x51a40d]=await Promise['all']([getDocs(query(_0x44998f,where('winnerUsername','==',_0x53c2c4))),getDocs(query(_0x44998f,where('loserUsername','==',_0x53c2c4)))]),_0x294203=_0x2a6fdb['size'],_0x57ffe9=_0x51a40d['size'],_0x1058aa=_0x294203+_0x57ffe9;let _0x1afc32=0x0,_0x5e9702=0x0;_0x2a6fdb[_0x84970d(0x88)](_0x5f5216=>{const _0x496f14=_0x84970d,_0x941d8e=_0x5f5216['data']();if(_0x941d8e[_0x496f14(0x8d)])_0x1afc32+=parseInt(_0x941d8e['winnerScore']);if(_0x941d8e[_0x496f14(0xa0)])_0x5e9702+=parseInt(_0x941d8e['loserScore']);}),_0x51a40d[_0x84970d(0x88)](_0x21511a=>{const _0x154184=_0x84970d,_0x14560a=_0x21511a['data']();if(_0x14560a['loserScore'])_0x1afc32+=parseInt(_0x14560a['loserScore']);if(_0x14560a['winnerScore'])_0x5e9702+=parseInt(_0x14560a[_0x154184(0x8d)]);});const _0x21e0a3=_0x5e9702===0x0?_0x1afc32['toFixed'](0x2):(_0x1afc32/_0x5e9702)['toFixed'](0x2),_0x1dfcb1=_0x1058aa===0x0?'0':(_0x294203/_0x1058aa*0x64)['toFixed'](0x1);console[_0x84970d(0x7d)]('Stats\x20calculated:',{'totalMatches':_0x1058aa,'wins':_0x294203,'losses':_0x57ffe9,'totalKills':_0x1afc32,'totalDeaths':_0x5e9702,'kdRatio':_0x21e0a3,'winRate':_0x1dfcb1}),document['getElementById']('stats-matches')['textContent']=_0x1058aa,document[_0x84970d(0x8e)](_0x84970d(0xa6))[_0x84970d(0xa2)]=_0x294203,document['getElementById']('stats-losses')['textContent']=_0x57ffe9,document['getElementById']('stats-kd')[_0x84970d(0xa2)]=_0x21e0a3,document['getElementById'](_0x84970d(0x85))['textContent']=_0x1dfcb1+'%';}catch(_0x44c5a6){console[_0x84970d(0x84)]('Error\x20loading\x20player\x20stats:',_0x44c5a6),['matches','wins','losses','kd',_0x84970d(0x8c)]['forEach'](_0xda9095=>{const _0x42b15c=_0x84970d;document['getElementById'](_0x42b15c(0x8b)+_0xda9095)['textContent']='-';});}}}document[a42_0x37fb3e(0x99)]('DOMContentLoaded',()=>{new ProfileManager();});