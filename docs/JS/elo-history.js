const a0_0x682e82=a0_0x287e;(function(_0x56631b,_0x26c891){const _0x109dd1=a0_0x287e,_0x3c2a4c=_0x56631b();while(!![]){try{const _0x19eff3=-parseInt(_0x109dd1(0x84))/0x1+parseInt(_0x109dd1(0x82))/0x2+parseInt(_0x109dd1(0x7c))/0x3+-parseInt(_0x109dd1(0x7a))/0x4+parseInt(_0x109dd1(0x79))/0x5+-parseInt(_0x109dd1(0x74))/0x6*(-parseInt(_0x109dd1(0x72))/0x7)+-parseInt(_0x109dd1(0x7e))/0x8;if(_0x19eff3===_0x26c891)break;else _0x3c2a4c['push'](_0x3c2a4c['shift']());}catch(_0x401297){_0x3c2a4c['push'](_0x3c2a4c['shift']());}}}(a0_0x3306,0x62c67));const a0_0x521675=(function(){let _0x3d7b0c=!![];return function(_0x1a926f,_0x274640){const _0x367b22=_0x3d7b0c?function(){if(_0x274640){const _0x25a815=_0x274640['apply'](_0x1a926f,arguments);return _0x274640=null,_0x25a815;}}:function(){};return _0x3d7b0c=![],_0x367b22;};}()),a0_0x58c3d6=a0_0x521675(this,function(){const _0x54dc45=a0_0x287e,_0x318794=function(){let _0x3627ea;try{_0x3627ea=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x13bda2){_0x3627ea=window;}return _0x3627ea;},_0x348ded=_0x318794(),_0x1b38f8=_0x348ded['console']=_0x348ded['console']||{},_0x1ecbd0=[_0x54dc45(0x7d),'warn',_0x54dc45(0x87),'error','exception','table','trace'];for(let _0x1d7eaa=0x0;_0x1d7eaa<_0x1ecbd0['length'];_0x1d7eaa++){const _0x240eec=a0_0x521675[_0x54dc45(0x85)]['prototype']['bind'](a0_0x521675),_0x48d92b=_0x1ecbd0[_0x1d7eaa],_0x53fd6f=_0x1b38f8[_0x48d92b]||_0x240eec;_0x240eec['__proto__']=a0_0x521675['bind'](a0_0x521675),_0x240eec['toString']=_0x53fd6f['toString'][_0x54dc45(0x78)](_0x53fd6f),_0x1b38f8[_0x48d92b]=_0x240eec;}});a0_0x58c3d6();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0x287e(_0x1fab3a,_0x3efe79){const _0x505b49=a0_0x3306();return a0_0x287e=function(_0x58c3d6,_0x521675){_0x58c3d6=_0x58c3d6-0x72;let _0x5f5d73=_0x505b49[_0x58c3d6];return _0x5f5d73;},a0_0x287e(_0x1fab3a,_0x3efe79);}function a0_0x3306(){const _0x42fa=['username','1187834KaRlSt','Gold','669478qtLYNk','constructor','desc','info','91zCheGe','demotion','327234KEZwHj','Error\x20fetching\x20username:','timestamp','Silver','bind','2000010rhsPgf','2690544wRGuMS','error','915336MPcAvi','log','2090728SjKDcv','Bronze','Error\x20recording\x20ELO\x20history:'];a0_0x3306=function(){return _0x42fa;};return a0_0x3306();}import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':a0_0x682e82(0x83),'elo':0x708},{'name':'Silver','elo':0x640},{'name':a0_0x682e82(0x7f),'elo':0x578},{'name':'Unranked','elo':0x4b0}];async function getUsernameById(_0x48b8ed){const _0x357a7b=a0_0x682e82;try{if(!_0x48b8ed)return'Unknown\x20Player';const _0x127595=await getDoc(doc(db,'players',_0x48b8ed));return _0x127595['exists']()?_0x127595['data']()[_0x357a7b(0x81)]:'Unknown\x20Player';}catch(_0x3bb428){return console['error'](_0x357a7b(0x75),_0x3bb428),'Unknown\x20Player';}}export async function recordEloChange({playerId:_0x42336f,previousElo:_0xf628d6,newElo:_0x4ac261,opponentId:_0x3f2c2f,matchResult:_0x311946,previousPosition:_0xd3bb3e,newPosition:_0x28aa90,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x2e7abc}){const _0x17b849=a0_0x682e82;try{const _0x24e371=doc(collection(db,'eloHistory'));let _0x153773='match';if(isPromotion)_0x153773='promotion';if(isDemotion)_0x153773=_0x17b849(0x73);let _0x3b72d6='Unranked';if(_0x4ac261>=0x834)_0x3b72d6='Emerald';else{if(_0x4ac261>=0x708)_0x3b72d6=_0x17b849(0x83);else{if(_0x4ac261>=0x640)_0x3b72d6=_0x17b849(0x77);else{if(_0x4ac261>=0x578)_0x3b72d6='Bronze';}}}return await setDoc(_0x24e371,{'type':_0x153773,'player':_0x42336f,'opponent':_0x3f2c2f,'previousElo':_0xf628d6,'newElo':_0x4ac261,'change':_0x4ac261-_0xf628d6,'matchResult':_0x311946,'previousPosition':_0xd3bb3e,'newPosition':_0x28aa90,'rankAchieved':_0x3b72d6,'timestamp':_0x2e7abc}),console[_0x17b849(0x7d)]('ELO\x20history\x20recorded\x20for\x20'+_0x42336f),!![];}catch(_0x310555){console[_0x17b849(0x7b)](_0x17b849(0x80),_0x310555);throw _0x310555;}}export async function getEloHistory(){const _0x19b2ca=a0_0x682e82;try{const _0x5ae5aa=collection(db,'eloHistory'),_0xb7ee1d=query(_0x5ae5aa,orderBy('timestamp',_0x19b2ca(0x86))),_0x4d5468=await getDocs(_0xb7ee1d),_0x4d6c2b=_0x4d5468['docs']['map'](async _0x31f80d=>{const _0x1b4872=_0x19b2ca,_0x1a21ec=_0x31f80d['data'](),[_0x44cd2a,_0x39e03f]=await Promise['all']([getUsernameById(_0x1a21ec['player']),getUsernameById(_0x1a21ec['opponent'])]);return{..._0x1a21ec,'playerUsername':_0x44cd2a,'opponentUsername':_0x39e03f,'change':_0x1a21ec['newElo']-_0x1a21ec['previousElo'],'timestamp':_0x1a21ec[_0x1b4872(0x76)]};}),_0x119d20=await Promise['all'](_0x4d6c2b);return{'entries':_0x119d20};}catch(_0x8944fa){console['error']('Error\x20fetching\x20ELO\x20history:',_0x8944fa);throw _0x8944fa;}}export function resetPagination(){lastVisible=null;}