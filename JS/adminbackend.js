const a4_0x274793=a4_0x5931,a4_0x4b2b7b=(function(){let _0x461978=!![];return function(_0x16f6fa,_0x3976cd){const _0x4ff189=_0x461978?function(){if(_0x3976cd){const _0x3eec94=_0x3976cd['apply'](_0x16f6fa,arguments);return _0x3976cd=null,_0x3eec94;}}:function(){};return _0x461978=![],_0x4ff189;};}()),a4_0x42d5cd=a4_0x4b2b7b(this,function(){const _0x59639e=a4_0x5931,_0x1f65b4=function(){let _0x1ceec1;try{_0x1ceec1=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2beadd){_0x1ceec1=window;}return _0x1ceec1;},_0x14166f=_0x1f65b4(),_0x10f121=_0x14166f['console']=_0x14166f[_0x59639e(0x223)]||{},_0x23d261=['log','warn','info',_0x59639e(0x1f7),'exception','table','trace'];for(let _0x481aa3=0x0;_0x481aa3<_0x23d261['length'];_0x481aa3++){const _0x36bf8e=a4_0x4b2b7b['constructor']['prototype']['bind'](a4_0x4b2b7b),_0x5f400f=_0x23d261[_0x481aa3],_0xceee8f=_0x10f121[_0x5f400f]||_0x36bf8e;_0x36bf8e['__proto__']=a4_0x4b2b7b['bind'](a4_0x4b2b7b),_0x36bf8e[_0x59639e(0x26c)]=_0xceee8f['toString']['bind'](_0xceee8f),_0x10f121[_0x5f400f]=_0x36bf8e;}});a4_0x42d5cd();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x22f165){const _0x10eb3e=a4_0x5931;if(!_0x22f165)return'#ffffff';_0x22f165=_0x22f165['replace']('#','');_0x22f165['length']===0x3&&(_0x22f165=_0x22f165[_0x10eb3e(0x1b2)]('')['map'](_0xc225c6=>_0xc225c6+_0xc225c6)[_0x10eb3e(0x25f)](''));if(_0x22f165[_0x10eb3e(0x27d)]!==0x6)return _0x10eb3e(0x2aa);const _0x419ba8=parseInt(_0x22f165['substring'](0x0,0x2),0x10),_0x3d91ef=parseInt(_0x22f165[_0x10eb3e(0x2fe)](0x2,0x4),0x10),_0x3c1631=parseInt(_0x22f165['substring'](0x4,0x6),0x10),_0x2e9048=(_0x419ba8*0x12b+_0x3d91ef*0x24b+_0x3c1631*0x72)/0x3e8;return _0x2e9048>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE=a4_0x274793(0x30b),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener'](a4_0x274793(0x2ed),()=>{const _0x251fca=a4_0x274793;auth[_0x251fca(0x331)](async _0x45f076=>{const _0x158b53=_0x251fca;if(!_0x45f076){window['location'][_0x158b53(0x362)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x3dc0a4){console['error']('Error\x20initializing\x20dashboard:',_0x3dc0a4),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x2d3b95){const _0x3bab37=a4_0x274793;if(!_0x2d3b95)return['dashboard'];console[_0x3bab37(0x314)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x2d3b95+'\x20in\x20all\x20collections...');const _0x3bb391=[{'name':_0x3bab37(0x2fa),'displayName':'User\x20Profiles'},{'name':_0x3bab37(0x150),'displayName':_0x3bab37(0x14c)},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x39d2fe=auth['currentUser'];let _0x444572=null,_0x29ed4a=null;for(const _0x1f3571 of _0x3bb391){try{if(_0x39d2fe){const _0x3fd2a7=doc(db,_0x1f3571['name'],_0x39d2fe['uid']),_0x5b1d28=await getDoc(_0x3fd2a7);if(_0x5b1d28[_0x3bab37(0x2f0)]()){const _0x23f5bc=_0x5b1d28['data']();console['log'](_0x3bab37(0x184)+_0x1f3571[_0x3bab37(0x1f0)]+_0x3bab37(0x2e3),_0x23f5bc);const _0x4f730d=(_0x23f5bc['roleName']||_0x23f5bc[_0x3bab37(0x2c5)]||'')[_0x3bab37(0x34b)]();if(_0x4f730d&&_0x4f730d!==_0x3bab37(0x1d6)){_0x444572=_0x4f730d,_0x29ed4a=_0x1f3571['displayName'],console[_0x3bab37(0x314)]('Found\x20specific\x20role:\x20'+_0x444572+_0x3bab37(0x162)+_0x29ed4a);break;}}}if(!_0x444572){const _0x360084=collection(db,_0x1f3571['name']),_0x86ae60=query(_0x360084,where('email','==',_0x2d3b95)),_0x4fe64c=await getDocs(_0x86ae60);if(!_0x4fe64c['empty']){const _0x1effc9=_0x4fe64c['docs'][0x0]['data']();console['log'](_0x3bab37(0x184)+_0x1f3571['displayName']+'\x20with\x20email\x20'+_0x2d3b95+':',_0x1effc9);const _0x2dae52=(_0x1effc9['roleName']||_0x1effc9['role']||'')['toLowerCase']();if(_0x2dae52&&_0x2dae52!=='none'){_0x444572=_0x2dae52,_0x29ed4a=_0x1f3571[_0x3bab37(0x1f0)],console[_0x3bab37(0x314)]('Found\x20specific\x20role:\x20'+_0x444572+'\x20in\x20'+_0x29ed4a);break;}}}}catch(_0x4f9a3b){console['error'](_0x3bab37(0x250)+_0x1f3571['displayName']+':',_0x4f9a3b);}}if(_0x444572){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x444572+'\x20(from\x20'+_0x29ed4a+')');const _0x2b0bee={'admin':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies',_0x3bab37(0x1b5),'inactive-players','settings','manage-trophies','elo-history','manage-highlights',_0x3bab37(0x265),'manage-matches','manage-points','manage-levels-ribbons',_0x3bab37(0x1d9)],'owner':['dashboard','manage-players',_0x3bab37(0x256),'manage-articles','manage-trophies',_0x3bab37(0x1b5),_0x3bab37(0x344),'settings','manage-trophies',_0x3bab37(0x26d),'manage-highlights','user-roles-section',_0x3bab37(0x256),'manage-points',_0x3bab37(0x352),'manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles',_0x3bab37(0x24f),'elo-history',_0x3bab37(0x14a)]};if(_0x2b0bee[_0x444572])return console['log']('Role\x20\x27'+_0x444572+'\x27\x20has\x20permissions:',_0x2b0bee[_0x444572]),_0x2b0bee[_0x444572];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x2d3b95+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x415e57=[]){const _0x2cfb46=a4_0x274793,_0x3c8bb1=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x567620=document['querySelectorAll'](_0x2cfb46(0x1df));(!_0x415e57||_0x415e57[_0x2cfb46(0x27d)]===0x0)&&(_0x415e57=['dashboard']);_0x3c8bb1['forEach'](_0x13a6fc=>{const _0x4ea22c=_0x2cfb46,_0x107171=_0x13a6fc['getAttribute']('data-section');_0x415e57[_0x4ea22c(0x12b)](_0x107171)?_0x13a6fc['style']['display']='flex':_0x13a6fc['style']['display']=_0x4ea22c(0x1d6),_0x13a6fc['addEventListener'](_0x4ea22c(0x252),()=>{const _0x42b6b9=_0x4ea22c,_0x18c368=_0x13a6fc['getAttribute']('data-section');if(!_0x415e57['includes'](_0x18c368)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x42b6b9(0x1f7));return;}_0x3c8bb1['forEach'](_0x5d6d46=>_0x5d6d46['classList']['remove']('active')),_0x13a6fc[_0x42b6b9(0x15b)]['add']('active'),_0x567620['forEach'](_0x2d83bb=>{const _0x34509c=_0x42b6b9;_0x2d83bb[_0x34509c(0x180)]['display']='none';});const _0x114d42=document[_0x42b6b9(0x119)](_0x18c368);_0x114d42&&(_0x114d42['style']['display']='block',console[_0x42b6b9(0x314)](_0x42b6b9(0x33e)+_0x18c368+'\x20section'));});});const _0x436299=document[_0x2cfb46(0x11b)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x415e57[0x0]+'\x22]');_0x436299&&_0x436299['click'](),console['log'](_0x2cfb46(0x2db));}function setupTabNavigation(){const _0x1abb67=a4_0x274793,_0x589a17=document['querySelectorAll']('.nav-item');let _0x56a12c=null,_0x2b2a40=new Set();_0x589a17[_0x1abb67(0x258)](_0x3a029c=>{_0x3a029c['addEventListener']('click',function(){const _0x176bef=a4_0x5931,_0x2661f9=this[_0x176bef(0x1e5)](_0x176bef(0x238));if(_0x2661f9===_0x56a12c)return;_0x56a12c&&(document[_0x176bef(0x119)](_0x56a12c)[_0x176bef(0x180)]['display']='none',_0x589a17['forEach'](_0x4dc0c1=>_0x4dc0c1[_0x176bef(0x15b)]['remove']('active'))),document[_0x176bef(0x119)](_0x2661f9)['style'][_0x176bef(0x357)]='block',this['classList']['add'](_0x176bef(0x267)),_0x56a12c=_0x2661f9;});});}function loadSectionData(_0x2109f1){return;}async function initializeAdminDashboard(){const _0x31d6ad=a4_0x274793;try{const _0x44ba3e=auth[_0x31d6ad(0x286)],_0x3a5f02=await getUserTabPermissions(_0x44ba3e['email']);console['log']('User\x20'+_0x44ba3e['email']+_0x31d6ad(0x1de),_0x3a5f02),window['userAllowedTabs']=_0x3a5f02,setupSidebarNavigation(_0x3a5f02),setupLadderSelector(),setupDashboardSection(),_0x3a5f02['includes'](_0x31d6ad(0x21a))&&setupManagePlayersSection(),_0x3a5f02['includes']('elo-history')&&setupEloHistorySection(),_0x3a5f02['includes']('manage-ranks')&&setupRankControls(),_0x3a5f02[_0x31d6ad(0x12b)]('manage-articles')&&setupManageArticlesSection(),_0x3a5f02['includes']('user-roles-section')&&setupUserRolesSection(),_0x3a5f02[_0x31d6ad(0x12b)]('manage-trophies')&&setupTrophyManagementSection(),_0x3a5f02['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x3a5f02[_0x31d6ad(0x12b)]('inactive-players')&&setupInactivePlayersSection(),_0x3a5f02[_0x31d6ad(0x12b)]('manage-matches')&&setupManageMatchesSection(),_0x3a5f02['includes']('manage-points')&&setupManagePointsSection(),_0x3a5f02['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3a5f02);}catch(_0x2cb9c1){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x2cb9c1);}}function setupDataLoadButtons(_0x4e8a2d=[]){const _0x37ebd1=a4_0x274793;(!_0x4e8a2d||_0x4e8a2d[_0x37ebd1(0x27d)]===0x0)&&(_0x4e8a2d=['dashboard']);const _0x42ad19=document['getElementById']('load-dashboard-data');_0x42ad19&&_0x42ad19[_0x37ebd1(0x33c)]('click',function(){const _0x5b339d=_0x37ebd1;this['classList'][_0x5b339d(0x365)](_0x5b339d(0x131)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x41a22d=_0x5b339d;this['classList']['remove'](_0x41a22d(0x131)),this['innerHTML']=_0x41a22d(0x2dd);})[_0x5b339d(0x16b)](_0x11d584=>{const _0x338e5e=_0x5b339d;console[_0x338e5e(0x1f7)]('Error\x20loading\x20dashboard:',_0x11d584),this[_0x338e5e(0x15b)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xf297ec=_0x338e5e;this[_0xf297ec(0x18b)]=_0xf297ec(0x2dd);},0xbb8);});});if(_0x4e8a2d['includes']('manage-trophies')){const _0x183b4c=document['getElementById']('load-trophies-data');_0x183b4c&&_0x183b4c[_0x37ebd1(0x33c)]('click',function(){const _0x231a2e=_0x37ebd1;console['log']('Load\x20trophies\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x231a2e(0x13e)](()=>{const _0xdfbe45=_0x231a2e;this[_0xdfbe45(0x15b)]['remove']('loading'),this[_0xdfbe45(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x3b7e1a=>{const _0x255a85=_0x231a2e;console['error'](_0x255a85(0x2a9),_0x3b7e1a),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x4e8a2d['includes'](_0x37ebd1(0x21a))){const _0x1e6f1d=document['getElementById']('load-players-data');_0x1e6f1d&&_0x1e6f1d['addEventListener']('click',function(){const _0xd4598c=_0x37ebd1;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add'](_0xd4598c(0x131)),this[_0xd4598c(0x18b)]=_0xd4598c(0x343),loadPlayersData()['then'](()=>{const _0x40deac=_0xd4598c;this['classList'][_0x40deac(0x135)]('loading'),this[_0x40deac(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x4488ec=>{const _0x130408=_0xd4598c;console['error'](_0x130408(0x26f),_0x4488ec),this['classList'][_0x130408(0x135)]('loading'),this[_0x130408(0x18b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2523c0=_0x130408;this['innerHTML']=_0x2523c0(0x340);},0xbb8);});});}if(_0x4e8a2d['includes']('elo-history')){const _0x34f8f2=document['getElementById'](_0x37ebd1(0x167));_0x34f8f2&&_0x34f8f2['addEventListener']('click',function(){const _0x582496=_0x37ebd1;console[_0x582496(0x314)](_0x582496(0x23c)),this['classList'][_0x582496(0x365)]('loading'),this[_0x582496(0x18b)]=_0x582496(0x343),loadEloHistory(0x1)[_0x582496(0x13e)](()=>{const _0x42ac1f=_0x582496;this['classList'][_0x42ac1f(0x135)]('loading'),this[_0x42ac1f(0x18b)]=_0x42ac1f(0x302);})['catch'](_0x428826=>{const _0x396f4b=_0x582496;console['error']('Error\x20loading\x20history:',_0x428826),this['classList']['remove']('loading'),this[_0x396f4b(0x18b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x43d868=_0x396f4b;this['innerHTML']=_0x43d868(0x302);},0xbb8);});});}if(_0x4e8a2d[_0x37ebd1(0x12b)]('manage-articles')){const _0x2567fa=document['getElementById'](_0x37ebd1(0x289));_0x2567fa&&_0x2567fa[_0x37ebd1(0x33c)]('click',function(){const _0x4a7681=_0x37ebd1;console['log']('Load\x20articles\x20data\x20clicked'),this['classList']['add'](_0x4a7681(0x131)),this['innerHTML']=_0x4a7681(0x343),loadArticles()[_0x4a7681(0x13e)](()=>{const _0x37a120=_0x4a7681;this['classList'][_0x37a120(0x135)]('loading'),this[_0x37a120(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x4ad02f=>{const _0x3fc0d1=_0x4a7681;console[_0x3fc0d1(0x1f7)]('Error\x20loading\x20articles:',_0x4ad02f),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x4e8a2d[_0x37ebd1(0x12b)](_0x37ebd1(0x265))){const _0x495f9d=document['getElementById']('load-users-data');_0x495f9d&&_0x495f9d[_0x37ebd1(0x33c)](_0x37ebd1(0x252),function(){const _0x274a2a=_0x37ebd1;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x274a2a(0x343),loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x30f9cb=>{const _0x1674b8=_0x274a2a;console['error']('Error\x20loading\x20users:',_0x30f9cb),this['classList']['remove'](_0x1674b8(0x131)),this['innerHTML']=_0x1674b8(0x15d),setTimeout(()=>{const _0x36d140=_0x1674b8;this[_0x36d140(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x4e8a2d['includes']('inactive-players')){const _0x5a09d7=document['getElementById'](_0x37ebd1(0x2d3));_0x5a09d7&&_0x5a09d7[_0x37ebd1(0x33c)](_0x37ebd1(0x252),function(){const _0x4bfb80=_0x37ebd1;console[_0x4bfb80(0x314)](_0x4bfb80(0x127)),this[_0x4bfb80(0x15b)]['add']('loading'),this[_0x4bfb80(0x18b)]=_0x4bfb80(0x343),loadInactivePlayersData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0xbdf5bc=>{const _0x4cfe6a=_0x4bfb80;console['error'](_0x4cfe6a(0x31d),_0xbdf5bc),this['classList'][_0x4cfe6a(0x135)](_0x4cfe6a(0x131)),this['innerHTML']=_0x4cfe6a(0x15d),setTimeout(()=>{const _0x4e6283=_0x4cfe6a;this[_0x4e6283(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x4e8a2d['includes'](_0x37ebd1(0x14a))){const _0x567457=document['getElementById']('load-highlights-data');_0x567457&&_0x567457['addEventListener'](_0x37ebd1(0x252),function(){const _0x3d5beb=_0x37ebd1;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add'](_0x3d5beb(0x131)),this[_0x3d5beb(0x18b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x53c461=_0x3d5beb;this[_0x53c461(0x15b)]['remove']('loading'),this[_0x53c461(0x18b)]=_0x53c461(0x2d7);})['catch'](_0x2759af=>{const _0x15e75e=_0x3d5beb;console['error'](_0x15e75e(0x23b),_0x2759af),this['classList'][_0x15e75e(0x135)](_0x15e75e(0x131)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x26e526=_0x15e75e;this[_0x26e526(0x18b)]=_0x26e526(0x2d7);},0xbb8);});});}if(_0x4e8a2d['includes']('manage-matches')){const _0x1e06c8=document['getElementById'](_0x37ebd1(0x1ff));_0x1e06c8&&_0x1e06c8[_0x37ebd1(0x33c)]('click',function(){const _0x152ec1=_0x37ebd1;console['log']('Load\x20matches\x20data\x20clicked'),this['classList'][_0x152ec1(0x365)]('loading'),this['innerHTML']=_0x152ec1(0x343),loadMatchesData(0x1)[_0x152ec1(0x13e)](()=>{const _0x4bcc03=_0x152ec1;this['classList']['remove']('loading'),this[_0x4bcc03(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x1ba4ae=>{const _0x47a3b5=_0x152ec1;console['error'](_0x47a3b5(0x159),_0x1ba4ae),this['classList'][_0x47a3b5(0x135)]('loading'),this[_0x47a3b5(0x18b)]=_0x47a3b5(0x15d),setTimeout(()=>{const _0x77cf1c=_0x47a3b5;this[_0x77cf1c(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x4e8a2d['includes']('manage-ribbons')){const _0x506235=document['getElementById']('load-ribbons-data');_0x506235&&_0x506235['addEventListener'](_0x37ebd1(0x252),function(){const _0x4d2dc9=_0x37ebd1;console['log']('Load\x20ribbons\x20data\x20clicked'),this[_0x4d2dc9(0x15b)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x3fe773=_0x4d2dc9;this[_0x3fe773(0x15b)]['remove'](_0x3fe773(0x131)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x4edcef=>{const _0x301e67=_0x4d2dc9;console['error']('Error\x20loading\x20ribbons:',_0x4edcef),this['classList']['remove'](_0x301e67(0x131)),this[_0x301e67(0x18b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x339195=a4_0x274793;document['getElementById']('player-count')['textContent']='-',document[_0x339195(0x119)]('match-count')['textContent']='-',document['getElementById'](_0x339195(0x30d))['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x2c8220=a4_0x274793,_0x33edde=document[_0x2c8220(0x216)](_0x2c8220(0x26b));_0x33edde[_0x2c8220(0x258)](_0x26964f=>{const _0x436510=_0x2c8220;_0x26964f[_0x436510(0x33c)]('change',()=>{const _0x2213d4=_0x436510;currentLadder=_0x26964f[_0x2213d4(0x323)],document['body'][_0x2213d4(0x210)]('data-ladder',currentLadder);const _0x49d247=document['getElementById'](_0x2213d4(0x1e0));_0x49d247&&(_0x49d247[_0x2213d4(0x1c7)]=currentLadder),document[_0x2213d4(0x119)](_0x2213d4(0x359))['textContent']='-',document['getElementById']('match-count')[_0x2213d4(0x1c7)]='-',document['getElementById'](_0x2213d4(0x30d))['textContent']='-',document['getElementById']('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts[_0x2213d4(0x308)]['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x37c489=document['getElementById']('current-ladder-display');_0x37c489&&(_0x37c489['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x518393=a4_0x274793;try{console[_0x518393(0x314)]('Loading\x20dashboard\x20overview\x20data...'),document[_0x518393(0x119)]('player-count')[_0x518393(0x1c7)]='-',document[_0x518393(0x119)]('match-count')['textContent']='-',document['getElementById'](_0x518393(0x30d))['textContent']='-',document[_0x518393(0x119)]('rejected-count')['textContent']='-';const _0x563915=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x116a2f=currentLadder==='D1'?_0x518393(0x245):currentLadder==='D2'?'approvedMatchesD2':_0x518393(0x1f8),_0x41df70=currentLadder==='D1'?_0x518393(0x2a2):currentLadder==='D2'?_0x518393(0x1ce):'pendingMatchesD3',_0x29576d=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':_0x518393(0x241);console[_0x518393(0x314)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x563915+',\x20'+_0x116a2f);const _0x4065d3=await getDocs(collection(db,_0x563915)),_0x1e548a=_0x4065d3['size'],_0x10f867=await getDocs(collection(db,_0x116a2f)),_0x132d27=_0x10f867['size'],_0x1a352c=await getDocs(collection(db,_0x41df70)),_0x2b2b23=_0x1a352c[_0x518393(0x176)],_0x185925=await getDocs(collection(db,_0x29576d)),_0x5c9675=_0x185925[_0x518393(0x176)];return document['getElementById']('player-count')[_0x518393(0x1c7)]=_0x1e548a,document[_0x518393(0x119)](_0x518393(0x179))[_0x518393(0x1c7)]=_0x132d27,document['getElementById']('pending-count')['textContent']=_0x2b2b23,document['getElementById']('rejected-count')['textContent']=_0x5c9675,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x425ba6){console[_0x518393(0x1f7)](_0x518393(0x2a3),_0x425ba6);throw _0x425ba6;}}async function createRankDistributionChart(){const _0x4f1896=a4_0x274793;try{const _0x245189=collection(db,currentLadder==='D1'?'players':'playersD2'),_0xe42443=await getDocs(_0x245189),_0x378cd3={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0xe42443['forEach'](_0x341cf8=>{const _0x21713e=a4_0x5931,_0x315d36=_0x341cf8['data'](),_0x57f95b=_0x315d36['eloRating']||0x4b0;if(_0x57f95b>=0x7d0)_0x378cd3[_0x21713e(0x212)]++;else{if(_0x57f95b>=0x708)_0x378cd3[_0x21713e(0x293)]++;else{if(_0x57f95b>=0x640)_0x378cd3[_0x21713e(0x11d)]++;else{if(_0x57f95b>=0x578)_0x378cd3['Bronze']++;else _0x378cd3['Unranked']++;}}}});const _0x1aaaf4=document[_0x4f1896(0x119)]('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution'][_0x4f1896(0x118)](),charts['rankDistribution']=new Chart(_0x1aaaf4,{'type':'doughnut','data':{'labels':Object[_0x4f1896(0x2d1)](_0x378cd3),'datasets':[{'data':Object[_0x4f1896(0x31f)](_0x378cd3),'backgroundColor':[_0x4f1896(0x1ca),'#CD7F32','#C0C0C0','#FFD700',_0x4f1896(0x22a)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x4f1896(0x18a),'color':_0x4f1896(0x207),'font':{'size':0x10}}}}});}catch(_0x4960a4){console[_0x4f1896(0x1f7)]('Error\x20creating\x20rank\x20distribution\x20chart:',_0x4960a4),document['getElementById'](_0x4f1896(0x255))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0xc9f572=a4_0x274793;try{const _0x1d40db=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x1c54c6=collection(db,_0x1d40db),_0x488e35=new Date();_0x488e35['setDate'](_0x488e35['getDate']()-0x7);const _0x54f521=query(_0x1c54c6,where(_0xc9f572(0x22c),'>=',_0x488e35),orderBy(_0xc9f572(0x22c),'asc')),_0x4cdb87=await getDocs(_0x54f521),_0x5a62b3=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x30c848=_0x5a62b3[_0xc9f572(0x322)]((_0xe9602e,_0x4fcb77)=>({..._0xe9602e,[_0x4fcb77]:0x0}),{});_0x4cdb87['forEach'](_0x70cf49=>{const _0x577e91=_0xc9f572,_0x1040f6=_0x70cf49['data']();if(_0x1040f6['approvedAt']){const _0xb26431=_0x5a62b3[new Date(_0x1040f6[_0x577e91(0x22c)]['seconds']*0x3e8)['getDay']()];_0x30c848[_0xb26431]++;}});const _0x4ebd4c=document[_0xc9f572(0x119)]('activity-chart');charts['activity']&&charts['activity']['destroy'](),charts[_0xc9f572(0x308)]=new Chart(_0x4ebd4c,{'type':_0xc9f572(0x2cc),'data':{'labels':_0x5a62b3,'datasets':[{'label':'Matches\x20Played','data':_0x5a62b3[_0xc9f572(0x2c4)](_0x910558=>_0x30c848[_0x910558]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0xc9f572(0x285):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0xc9f572(0x224)}}},'plugins':{'legend':{'labels':{'color':_0xc9f572(0x207)}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0xc9f572(0x207),'font':{'size':0x10}}}}});}catch(_0x572e8b){console['error']('Error\x20creating\x20activity\x20chart:',_0x572e8b),document[_0xc9f572(0x119)]('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x2fba47=a4_0x274793,_0x115f8f=document['getElementById']('players-table-body');if(!_0x115f8f)return;_0x115f8f['innerHTML']=_0x2fba47(0x173);try{let _0x170aac=_0x2fba47(0x150);if(currentLadder==='D2')_0x170aac='playersD2';else currentLadder==='D3'&&(_0x170aac='playersD3');console[_0x2fba47(0x314)]('Loading\x20players\x20from\x20'+_0x170aac+'\x20collection...');const _0x161648=collection(db,_0x170aac),_0x51e5a0=query(_0x161648,orderBy(_0x2fba47(0x29c),'desc')),_0x13a5b5=await getDocs(_0x51e5a0);if(_0x13a5b5['empty']){_0x115f8f['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x115f8f[_0x2fba47(0x18b)]='';let _0x482788=0x1;_0x13a5b5['forEach'](_0x139c8c=>{const _0xe98c1e=_0x2fba47,_0x45f265=_0x139c8c['data'](),_0x43b25f=getRankFromElo(_0x45f265[_0xe98c1e(0x29c)]||0x4b0),_0x441315=getRankStyle(_0x45f265['eloRating']||0x4b0),_0x86e28=document['createElement']('tr');_0x86e28['innerHTML']=_0xe98c1e(0x351)+_0x482788+_0xe98c1e(0x2ce)+_0x441315['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x45f265['username']||_0xe98c1e(0x136))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x45f265[_0xe98c1e(0x29c)]||0x4b0)+_0xe98c1e(0x282)+_0x441315['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x43b25f+_0xe98c1e(0x204)+(_0x45f265['wins']||0x0)+'W\x20/\x20'+(_0x45f265['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x139c8c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x139c8c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x115f8f[_0xe98c1e(0x1dc)](_0x86e28),_0x482788++;}),setupPlayerActionButtons();}catch(_0x19e366){console['error']('Error\x20loading\x20players:',_0x19e366),_0x115f8f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x19e366['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x85c94){if(_0x85c94>=0x7d0)return'Emerald';if(_0x85c94>=0x708)return'Gold';if(_0x85c94>=0x640)return'Silver';if(_0x85c94>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x2f2bd9=a4_0x274793;document[_0x2f2bd9(0x216)](_0x2f2bd9(0x1c8))[_0x2f2bd9(0x258)](_0x56432a=>{const _0x1f45c3=_0x2f2bd9;_0x56432a['addEventListener'](_0x1f45c3(0x252),async _0x39b1ff=>{const _0x5df00e=_0x39b1ff['currentTarget']['dataset']['id'];openEditPlayerModal(_0x5df00e);});}),document['querySelectorAll']('.delete-btn')[_0x2f2bd9(0x258)](_0x34e2b5=>{_0x34e2b5['addEventListener']('click',async _0x37901a=>{const _0x466bb5=_0x37901a['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x466bb5);});});}async function openEditPlayerModal(_0x8ce0d6){const _0x4a2bac=a4_0x274793;try{const _0x2f22ca=currentLadder==='D1'?'players':'playersD2',_0x5b1d9f=doc(db,_0x2f22ca,_0x8ce0d6),_0x352a0e=await getDoc(_0x5b1d9f);if(!_0x352a0e['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x3fb4c3=_0x352a0e[_0x4a2bac(0x2cf)](),_0x1b34a1=document['getElementById']('edit-player-modal'),_0x17c5c2=document['getElementById'](_0x4a2bac(0x14f)),_0x10bd4a=document['getElementById']('edit-elo'),_0x15cf14=document[_0x4a2bac(0x119)](_0x4a2bac(0x32a)),_0x3869f2=document['getElementById'](_0x4a2bac(0x301));_0x17c5c2['value']=_0x3fb4c3['username']||'',_0x10bd4a[_0x4a2bac(0x323)]=_0x3fb4c3['eloRating']||0x4b0,_0x15cf14['value']=_0x3fb4c3[_0x4a2bac(0x140)]||0x0,_0x3869f2['value']=_0x3fb4c3[_0x4a2bac(0x16c)]||0x0,_0x1b34a1['dataset']['playerId']=_0x8ce0d6,_0x1b34a1['classList']['add']('active');}catch(_0x11e145){console['error']('Error\x20opening\x20edit\x20modal:',_0x11e145),showNotification('Failed\x20to\x20load\x20player\x20data',_0x4a2bac(0x1f7));}}function a4_0x5931(_0x375ae7,_0x266304){const _0x42d5cd=a4_0x3524();return a4_0x5931=function(_0x4b2b7b,_0x347335){_0x4b2b7b=_0x4b2b7b-0x116;let _0x3524a5=_0x42d5cd[_0x4b2b7b];return _0x3524a5;},a4_0x5931(_0x375ae7,_0x266304);}async function saveEditedPlayer(){const _0x2b7ec6=a4_0x274793;try{const _0x18f323=document['getElementById']('edit-player-modal'),_0x4535bc=_0x18f323[_0x2b7ec6(0x25b)]['playerId'];if(!_0x4535bc){showNotification('No\x20player\x20selected','error');return;}const _0x1f8c5c=document[_0x2b7ec6(0x119)](_0x2b7ec6(0x14f)),_0x1b8884=document['getElementById'](_0x2b7ec6(0x34c)),_0x23dd29=document['getElementById']('edit-wins'),_0x5a0c13=document[_0x2b7ec6(0x119)]('edit-losses'),_0xab491f=_0x1f8c5c['value']['trim'](),_0x3a81b4=parseInt(_0x1b8884[_0x2b7ec6(0x323)]),_0x18401b=parseInt(_0x23dd29['value']),_0x1a65ea=parseInt(_0x5a0c13['value']);if(!_0xab491f||isNaN(_0x3a81b4)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x1f8b50=currentLadder==='D1'?'players':'playersD2',_0x2a61f2=doc(db,_0x1f8b50,_0x4535bc),_0x20fa6d=await getDoc(_0x2a61f2),_0x79ab74=_0x20fa6d['exists']()?_0x20fa6d['data']():{},_0x4fd310=_0x79ab74['eloRating']||0x4b0;await updateDoc(_0x2a61f2,{'username':_0xab491f,'eloRating':_0x3a81b4,'wins':_0x18401b||0x0,'losses':_0x1a65ea||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x2b7ec6(0x32c)]});if(_0x3a81b4!==_0x4fd310){const _0xc8c5e4=currentLadder==='D1'?_0x2b7ec6(0x2da):'eloHistoryD2';await addDoc(collection(db,_0xc8c5e4),{'player':_0xab491f,'previousElo':_0x4fd310,'newElo':_0x3a81b4,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x2b7ec6(0x286)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x496c13){console['error'](_0x2b7ec6(0x232),_0x496c13),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x496c13['message'],'error');}}function closeEditPlayerModal(){const _0x2a1ce1=a4_0x274793,_0xd3ed5f=document['getElementById']('edit-player-modal');_0xd3ed5f['classList']['remove'](_0x2a1ce1(0x267)),_0xd3ed5f[_0x2a1ce1(0x25b)]['playerId']='';}async function confirmDeletePlayer(_0x3ea9a1){const _0x4e79aa=a4_0x274793;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x599949=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x599949,_0x3ea9a1)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x108c2f){console[_0x4e79aa(0x1f7)]('Error\x20deleting\x20player:',_0x108c2f),showNotification(_0x4e79aa(0x230)+_0x108c2f['message'],'error');}}async function setupManagePlayersSection(){const _0x418262=a4_0x274793,_0x526c32=document[_0x418262(0x119)]('add-player-form');_0x526c32&&_0x526c32[_0x418262(0x33c)](_0x418262(0x305),async _0x1571f0=>{const _0x535143=_0x418262;_0x1571f0[_0x535143(0x1a9)](),await addNewPlayer();});const _0x58c637=document['getElementById']('player-search');_0x58c637&&_0x58c637[_0x418262(0x33c)]('input',debounce(filterPlayerTable,0x12c));const _0x2ee8c7=document['getElementById'](_0x418262(0x11c));_0x2ee8c7&&_0x2ee8c7[_0x418262(0x33c)]('click',saveEditedPlayer);const _0x3047ce=document['getElementById'](_0x418262(0x2f5));_0x3047ce&&_0x3047ce[_0x418262(0x33c)]('click',closeEditPlayerModal);const _0x365508=document[_0x418262(0x119)]('edit-player-modal');_0x365508&&_0x365508['addEventListener']('click',_0x2f9d17=>{const _0x4c4331=_0x418262;_0x2f9d17[_0x4c4331(0x335)]===_0x365508&&closeEditPlayerModal();});const _0x4376f9=document[_0x418262(0x119)](_0x418262(0x35c));_0x4376f9&&_0x4376f9['addEventListener']('change',()=>{currentLadder=_0x4376f9['value'],loadPlayersData();});}async function addNewPlayer(){const _0x3bd5ac=a4_0x274793;try{const _0x2b3666=document['getElementById']('new-player-username'),_0xdac265=document['getElementById'](_0x3bd5ac(0x2f1)),_0x56138e=_0x2b3666['value']['trim'](),_0x258761=parseInt(_0xdac265[_0x3bd5ac(0x323)])||0x4b0;if(!_0x56138e){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0x3bd5ac(0x314)]('Adding\x20player\x20'+_0x56138e+_0x3bd5ac(0x2f7)+_0x258761+'\x20to\x20'+currentLadder+'\x20ladder');let _0x466ea8=_0x3bd5ac(0x150),_0x3a85ad='eloHistory';if(currentLadder==='D2')_0x466ea8='playersD2',_0x3a85ad='eloHistoryD2';else currentLadder==='D3'&&(_0x466ea8=_0x3bd5ac(0x2a8),_0x3a85ad='eloHistoryD3');const _0xb4138a=query(collection(db,_0x466ea8),where('username','==',_0x56138e)),_0x372c64=await getDocs(_0xb4138a);if(!_0x372c64['empty']){alert('Username\x20'+_0x56138e+'\x20already\x20exists\x20in\x20'+currentLadder+_0x3bd5ac(0x2fd));return;}const _0x42680c=auth['currentUser'],_0x30a66a={'username':_0x56138e,'eloRating':_0x258761,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x42680c?_0x42680c['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x466ea8),_0x30a66a),await addDoc(collection(db,_0x3a85ad),{'player':_0x56138e,'previousElo':0x4b0,'newElo':_0x258761,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x42680c?_0x42680c[_0x3bd5ac(0x32c)]:'admin','gameMode':currentLadder}),_0x2b3666[_0x3bd5ac(0x323)]='',_0xdac265['value']='1200',alert('Player\x20'+_0x56138e+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0xb37c12){console['error']('Error\x20adding\x20player:',_0xb37c12),alert(_0x3bd5ac(0x35a)+_0xb37c12['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0xf204ed=document['getElementById']('add-player-form');_0xf204ed&&_0xf204ed['addEventListener']('submit',_0x2df1c0=>{_0x2df1c0['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x1f28bb=a4_0x274793,_0x1b7938=document['getElementById']('player-search')['value']['toLowerCase'](),_0x4c9c52=document['querySelectorAll']('#players-table-body\x20tr');let _0x4fd7c3=0x0;_0x4c9c52[_0x1f28bb(0x258)](_0x5b686d=>{const _0x323a45=_0x1f28bb,_0x53a8d8=_0x5b686d[_0x323a45(0x11b)]('.username')?.['textContent']['toLowerCase']()||'';_0x53a8d8[_0x323a45(0x12b)](_0x1b7938)?(_0x5b686d['style']['display']='',_0x4fd7c3++):_0x5b686d[_0x323a45(0x180)]['display']='none';});const _0x522ebb=document['getElementById'](_0x1f28bb(0x186));_0x522ebb&&(_0x4fd7c3===0x0&&_0x1b7938!==''?_0x522ebb['style'][_0x1f28bb(0x357)]='block':_0x522ebb['style'][_0x1f28bb(0x357)]=_0x1f28bb(0x1d6));}function debounce(_0x30af93,_0x579b25){let _0x2ad80d;return function(..._0x507064){clearTimeout(_0x2ad80d),_0x2ad80d=setTimeout(()=>_0x30af93['apply'](this,_0x507064),_0x579b25);};}async function loadEloHistory(_0x207082=0x1){const _0x5b0401=a4_0x274793,_0x45657a=document[_0x5b0401(0x119)](_0x5b0401(0x1eb)),_0x20b993=currentLadder['toLowerCase']();if(!_0x45657a)return;_0x45657a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x295c46=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x398b91=collection(db,_0x295c46);let _0x31c21b;if(_0x207082>eloHistoryPagination[_0x20b993]['page']&&eloHistoryPagination[_0x20b993][_0x5b0401(0x133)])_0x31c21b=query(_0x398b91,orderBy(_0x5b0401(0x1a5),_0x5b0401(0x34d)),startAfter(eloHistoryPagination[_0x20b993]['lastVisible']),limit(PAGE_SIZE));else _0x207082<eloHistoryPagination[_0x20b993]['page']&&eloHistoryPagination[_0x20b993][_0x5b0401(0x2b8)]?_0x31c21b=query(_0x398b91,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x20b993]['firstVisible']),limitToLast(PAGE_SIZE)):_0x31c21b=query(_0x398b91,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x13ef2e=await getDocs(_0x31c21b);if(_0x13ef2e['empty']){_0x45657a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x20b993+_0x5b0401(0x2c8))[_0x5b0401(0x1c7)]='Page\x201';return;}eloHistoryPagination[_0x20b993]['page']=_0x207082,eloHistoryPagination[_0x20b993][_0x5b0401(0x2b8)]=_0x13ef2e['docs'][0x0],eloHistoryPagination[_0x20b993]['lastVisible']=_0x13ef2e['docs'][_0x13ef2e[_0x5b0401(0x226)][_0x5b0401(0x27d)]-0x1];const _0x5466c9=new Map();_0x45657a[_0x5b0401(0x18b)]='';const _0x2d8633=async _0x3e7024=>{const _0x5181a7=_0x5b0401;if(typeof _0x3e7024!=='string'||_0x3e7024['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x3e7024))return _0x3e7024;if(_0x5466c9['has'](_0x3e7024))return _0x5466c9['get'](_0x3e7024);try{for(const _0x518f59 of['players','playersD2',_0x5181a7(0x2a8),'nonParticipants']){const _0x4d2999=await getDoc(doc(db,_0x518f59,_0x3e7024));if(_0x4d2999[_0x5181a7(0x2f0)]()&&_0x4d2999['data']()['username']){const _0x4fad20=_0x4d2999[_0x5181a7(0x2cf)]()[_0x5181a7(0x303)];return _0x5466c9['set'](_0x3e7024,_0x4fad20),_0x4fad20;}}return _0x3e7024;}catch(_0x2d85f3){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x3e7024+':',_0x2d85f3),_0x3e7024;}};for(const _0x27b6b2 of _0x13ef2e[_0x5b0401(0x226)]){const _0x23b0f0=_0x27b6b2[_0x5b0401(0x2cf)](),_0x3fc530=document['createElement']('tr'),_0x2e421e=_0x23b0f0['timestamp']?new Date(_0x23b0f0['timestamp'][_0x5b0401(0x291)]*0x3e8)['toLocaleString']():_0x5b0401(0x192),_0x59c3c8=_0x23b0f0['newElo']-_0x23b0f0['previousElo'],_0x585440=_0x59c3c8>0x0?_0x5b0401(0x251):_0x59c3c8<0x0?_0x5b0401(0x35d):'',_0x2a8672=_0x59c3c8>0x0?'+':'',_0x676729=_0x23b0f0[_0x5b0401(0x1bf)]||_0x23b0f0['username']||_0x23b0f0['userId']||'N/A',_0x138171=await _0x2d8633(_0x676729);_0x3fc530['innerHTML']=_0x5b0401(0x156)+_0x2e421e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x138171+_0x5b0401(0x350)+(_0x23b0f0['previousElo']||_0x5b0401(0x192))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x23b0f0['newElo']||_0x5b0401(0x192))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x585440+'\x22>'+_0x2a8672+_0x59c3c8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x23b0f0['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x23b0f0['modifiedBy']||_0x23b0f0['promotedBy']||_0x23b0f0[_0x5b0401(0x339)]||'System')+_0x5b0401(0x1fc),_0x45657a['appendChild'](_0x3fc530);}document['getElementById'](_0x20b993+'-page-indicator')['textContent']=_0x5b0401(0x24e)+_0x207082;const _0x8c4262=document['getElementById'](_0x20b993+_0x5b0401(0x354)),_0x3d6516=document['getElementById'](_0x20b993+'-next-page');if(_0x8c4262)_0x8c4262['disabled']=_0x207082<=0x1;const _0x377777=query(_0x398b91,orderBy('timestamp',_0x5b0401(0x34d)),startAfter(eloHistoryPagination[_0x20b993][_0x5b0401(0x133)]),limit(0x1)),_0x1a9a42=await getDocs(_0x377777);if(_0x3d6516)_0x3d6516['disabled']=_0x1a9a42['empty'];}catch(_0x539a55){console['error']('Error\x20loading\x20ELO\x20history:',_0x539a55),_0x45657a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x539a55['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x20031b){const _0x541d9f=a4_0x274793;switch(_0x20031b){case'match_result':return'Match\x20Result';case'promotion':return _0x541d9f(0x2c2);case'demotion':return'Demotion';case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return _0x541d9f(0x189);default:return _0x20031b||_0x541d9f(0x136);}}function setupEloHistorySection(){const _0x499e59=a4_0x274793;document[_0x499e59(0x119)]('d1-prev-page')[_0x499e59(0x33c)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0x499e59(0x20d))[_0x499e59(0x33c)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById'](_0x499e59(0x36c))['addEventListener'](_0x499e59(0x252),()=>{const _0x3bf267=_0x499e59;loadEloHistory(eloHistoryPagination['d2'][_0x3bf267(0x1db)]-0x1);}),document['getElementById']('d2-next-page')['addEventListener'](_0x499e59(0x252),()=>{const _0x29974c=_0x499e59;loadEloHistory(eloHistoryPagination['d2'][_0x29974c(0x1db)]+0x1);});const _0x22e731=document['getElementById']('d3-prev-page'),_0x3f0030=document[_0x499e59(0x119)]('d3-next-page');_0x22e731&&_0x22e731['addEventListener'](_0x499e59(0x252),()=>{const _0x7113d8=_0x499e59;loadEloHistory(eloHistoryPagination['d3'][_0x7113d8(0x1db)]-0x1);});_0x3f0030&&_0x3f0030['addEventListener'](_0x499e59(0x252),()=>{const _0x6e74b5=_0x499e59;loadEloHistory(eloHistoryPagination['d3'][_0x6e74b5(0x1db)]+0x1);});const _0x5cd791=document['getElementById']('elo-history-search');_0x5cd791&&_0x5cd791['addEventListener'](_0x499e59(0x2ec),debounce(filterEloHistoryTable,0x12c));const _0x3cd4b0=document['getElementById'](_0x499e59(0x16a));_0x3cd4b0&&_0x3cd4b0[_0x499e59(0x33c)]('change',applyEloHistoryFilters);const _0x2aa751=document[_0x499e59(0x119)]('reset-history-filters');_0x2aa751&&_0x2aa751['addEventListener'](_0x499e59(0x252),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0xb34d3f=a4_0x274793,_0x2c8a1c=document[_0xb34d3f(0x119)]('elo-history-search')['value'][_0xb34d3f(0x34b)](),_0x3265c3=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x207b29=0x0;_0x3265c3['forEach'](_0x3ac939=>{const _0x921da2=_0xb34d3f;if(_0x3ac939['classList'][_0x921da2(0x166)]('loading-cell')||_0x3ac939['classList'][_0x921da2(0x166)](_0x921da2(0x209))||_0x3ac939['classList']['contains']('error-state'))return;const _0x2da9dd=_0x3ac939[_0x921da2(0x11b)]('.player')?.['textContent']['toLowerCase']()||'',_0xbbc6ad=_0x3ac939[_0x921da2(0x11b)](_0x921da2(0x360))?.['textContent']['toLowerCase']()||'',_0x1ee1dd=_0x3ac939['querySelector'](_0x921da2(0x28e))?.['textContent']['toLowerCase']()||'';_0x2da9dd['includes'](_0x2c8a1c)||_0xbbc6ad[_0x921da2(0x12b)](_0x2c8a1c)||_0x1ee1dd['includes'](_0x2c8a1c)?(_0x3ac939['style'][_0x921da2(0x357)]='',_0x207b29++):_0x3ac939[_0x921da2(0x180)]['display']='none';});}async function applyEloHistoryFilters(){const _0x29c054=a4_0x274793,_0x27e695=document[_0x29c054(0x119)](_0x29c054(0x126))['value'],_0x13536b=document['getElementById']('history-end-date')[_0x29c054(0x323)],_0x1de453=document['getElementById']('history-type-filter')[_0x29c054(0x323)],_0x441200=currentLadder['toLowerCase']();eloHistoryPagination[_0x441200]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x16802d=document['getElementById']('elo-history-table-body');_0x16802d['innerHTML']=_0x29c054(0x171);try{const _0x4a83d9=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x15d35e=collection(db,_0x4a83d9);let _0x5bc3cb=[orderBy(_0x29c054(0x1a5),'desc')];if(_0x27e695){const _0x3904f1=new Date(_0x27e695);_0x3904f1['setHours'](0x0,0x0,0x0,0x0),_0x5bc3cb['push'](where('timestamp','>=',_0x3904f1));}if(_0x13536b){const _0x1be692=new Date(_0x13536b);_0x1be692['setHours'](0x17,0x3b,0x3b,0x3e7),_0x5bc3cb['push'](where(_0x29c054(0x1a5),'<=',_0x1be692));}_0x1de453&&_0x1de453!==_0x29c054(0x169)&&_0x5bc3cb[_0x29c054(0x203)](where(_0x29c054(0x146),'==',_0x1de453));_0x5bc3cb['push'](limit(PAGE_SIZE));const _0x29d13a=query(_0x15d35e,..._0x5bc3cb),_0x3ab1f6=await getDocs(_0x29d13a);!_0x3ab1f6['empty']&&(eloHistoryPagination[_0x441200][_0x29c054(0x2b8)]=_0x3ab1f6['docs'][0x0],eloHistoryPagination[_0x441200]['lastVisible']=_0x3ab1f6['docs'][_0x3ab1f6['docs']['length']-0x1]);_0x16802d[_0x29c054(0x18b)]='';if(_0x3ab1f6['empty']){_0x16802d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x3ab1f6[_0x29c054(0x258)](_0x1d3a43=>{const _0xca2013=_0x29c054,_0x110b7f=_0x1d3a43['data'](),_0x34a984=document[_0xca2013(0x1e8)]('tr'),_0x22fc54=_0x110b7f[_0xca2013(0x1a5)]?new Date(_0x110b7f['timestamp']['seconds']*0x3e8)[_0xca2013(0x2bd)]():_0xca2013(0x192),_0x593586=_0x110b7f['newElo']-_0x110b7f['previousElo'],_0x2aec6c=_0x593586>0x0?_0xca2013(0x251):_0x593586<0x0?'negative-change':'',_0x4c0611=_0x593586>0x0?'+':'',_0x2c8941=_0x110b7f['player']||_0x110b7f[_0xca2013(0x303)]||_0x110b7f['userId']||'N/A';_0x34a984[_0xca2013(0x18b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x22fc54+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x2c8941+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x110b7f['previousElo']||_0xca2013(0x192))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x110b7f['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x2aec6c+'\x22>'+_0x4c0611+_0x593586+_0xca2013(0x277)+formatHistoryType(_0x110b7f['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x110b7f['modifiedBy']||_0x110b7f['promotedBy']||_0x110b7f['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x16802d['appendChild'](_0x34a984);}),document[_0x29c054(0x119)](_0x441200+_0x29c054(0x2c8))[_0x29c054(0x1c7)]='Page\x201';}catch(_0x17a8b4){console[_0x29c054(0x1f7)](_0x29c054(0x2b2),_0x17a8b4),_0x16802d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x17a8b4[_0x29c054(0x2ac)]+_0x29c054(0x243);}}function resetEloHistoryFilters(){const _0x29762e=a4_0x274793;document['getElementById'](_0x29762e(0x126))['value']='',document['getElementById']('history-end-date')[_0x29762e(0x323)]='',document['getElementById'](_0x29762e(0x16a))['value']=_0x29762e(0x169),document['getElementById']('elo-history-search')['value']='';const _0x42afb8=currentLadder['toLowerCase']();eloHistoryPagination[_0x42afb8]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x4bf1cb=a4_0x274793,_0xcdbb99=document['getElementById']('promote-player-btn'),_0xa8813f=document['getElementById'](_0x4bf1cb(0x2bf)),_0x7310c2=document[_0x4bf1cb(0x119)](_0x4bf1cb(0x27e));_0xcdbb99&&_0xa8813f&&_0x7310c2&&(_0xcdbb99['addEventListener']('click',()=>{const _0x4f2950=_0x4bf1cb;_0xa8813f[_0x4f2950(0x15b)][_0x4f2950(0x365)]('active');}),_0xa8813f[_0x4bf1cb(0x33c)]('click',_0x320e45=>{const _0x19990a=_0x4bf1cb;_0x320e45[_0x19990a(0x335)]===_0xa8813f&&_0xa8813f['classList']['remove']('active');}),_0x7310c2[_0x4bf1cb(0x33c)]('submit',async _0x43c1a9=>{const _0x40d986=_0x4bf1cb;_0x43c1a9['preventDefault']();const _0x396b48=document['getElementById']('promote-username'),_0x3f1704=document[_0x40d986(0x119)]('promote-ladder'),_0x125c42=_0x396b48['value']['trim'](),_0x25c53c=_0x3f1704[_0x40d986(0x323)];if(!_0x125c42){showNotification(_0x40d986(0x2f2),'error');return;}try{await promotePlayer(_0x125c42,_0x25c53c),_0xa8813f['classList']['remove']('active'),_0x396b48[_0x40d986(0x323)]='';}catch(_0x4e062e){showNotification(_0x4e062e['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{_0xa8813f['classList']['remove']('active');}));const _0x6e4d10=document['getElementById']('demote-player-btn'),_0x16aac8=document['getElementById'](_0x4bf1cb(0x29b)),_0x4bae60=document['getElementById']('demote-form');_0x6e4d10&&_0x16aac8&&_0x4bae60&&(_0x6e4d10[_0x4bf1cb(0x33c)](_0x4bf1cb(0x252),()=>{_0x16aac8['classList']['add']('active');}),_0x16aac8['addEventListener'](_0x4bf1cb(0x252),_0x31161f=>{const _0x2cded1=_0x4bf1cb;_0x31161f['target']===_0x16aac8&&_0x16aac8[_0x2cded1(0x15b)][_0x2cded1(0x135)]('active');}),_0x4bae60['addEventListener']('submit',async _0x4ebc7b=>{const _0x38f593=_0x4bf1cb;_0x4ebc7b[_0x38f593(0x1a9)]();const _0x2fc7d5=document['getElementById'](_0x38f593(0x2c9)),_0x5a8f1b=document['getElementById']('demote-ladder'),_0x2d2519=_0x2fc7d5['value']['trim'](),_0x210910=_0x5a8f1b['value'];if(!_0x2d2519){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x2d2519,_0x210910),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x4aabca){console['error']('Error\x20in\x20demotion:',_0x4aabca);}}));const _0xf46324=document['getElementById'](_0x4bf1cb(0x270)),_0x1ad664=document['getElementById'](_0x4bf1cb(0x2f9)),_0x19a365=document['getElementById']('set-elo-form');_0xf46324&&_0x1ad664&&_0x19a365&&(_0xf46324[_0x4bf1cb(0x33c)]('click',()=>{const _0x2c259b=_0x4bf1cb;_0x1ad664[_0x2c259b(0x15b)]['add'](_0x2c259b(0x267));}),_0x1ad664['addEventListener'](_0x4bf1cb(0x252),_0x5bf9d1=>{const _0x4666c4=_0x4bf1cb;_0x5bf9d1[_0x4666c4(0x335)]===_0x1ad664&&_0x1ad664['classList'][_0x4666c4(0x135)](_0x4666c4(0x267));}),_0x19a365['addEventListener']('submit',async _0x42daa5=>{const _0xf94c69=_0x4bf1cb;_0x42daa5[_0xf94c69(0x1a9)]();const _0x4f179b=document['getElementById'](_0xf94c69(0x1c6)),_0x591a3e=document['getElementById'](_0xf94c69(0x316));let _0x52bb2e;const _0x54eb1a=document['getElementById'](_0xf94c69(0x20b)),_0x3f5052=document['querySelector'](_0xf94c69(0x16e));if(_0x54eb1a)_0x52bb2e=_0x54eb1a['value'];else _0x3f5052?_0x52bb2e=_0x3f5052['value']:_0x52bb2e='D1';if(!_0x4f179b||!_0x591a3e){showNotification(_0xf94c69(0x200),'error');return;}const _0x3b223c=_0x4f179b[_0xf94c69(0x323)]['trim'](),_0x24c00a=parseInt(_0x591a3e['value']);if(!_0x3b223c||isNaN(_0x24c00a)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0xf94c69(0x1f7));return;}try{await setCustomElo(_0x3b223c,_0x24c00a,_0x52bb2e),_0x1ad664[_0xf94c69(0x15b)]['remove']('active'),_0x4f179b['value']='',_0x591a3e[_0xf94c69(0x323)]='';}catch(_0x1ac222){showNotification(_0x1ac222['message'],_0xf94c69(0x1f7));}}),document['getElementById'](_0x4bf1cb(0x205))['addEventListener'](_0x4bf1cb(0x252),()=>{const _0x3d912c=_0x4bf1cb;_0x1ad664['classList']['remove'](_0x3d912c(0x267));}));const _0xa7859c=document['getElementById'](_0x4bf1cb(0x139)),_0x2da201=document[_0x4bf1cb(0x119)]('set-role-form');if(_0xa7859c&&_0x2da201){_0xa7859c['addEventListener'](_0x4bf1cb(0x252),_0x5e8373=>{const _0x413bcc=_0x4bf1cb;_0x5e8373[_0x413bcc(0x335)]===_0xa7859c&&closeModalHandler();}),_0x2da201['addEventListener'](_0x4bf1cb(0x305),async _0x1e5827=>{const _0x56f3a4=_0x4bf1cb;_0x1e5827[_0x56f3a4(0x1a9)]();const _0x2dde11=document['getElementById']('role-username'),_0x17495d=document[_0x56f3a4(0x119)](_0x56f3a4(0x1c5)),_0x228ac8=document[_0x56f3a4(0x119)](_0x56f3a4(0x2cd)),_0x430afb=_0x2dde11['value']['trim'](),_0x13d8c0=_0x17495d[_0x56f3a4(0x323)][_0x56f3a4(0x1d5)](),_0x55266b=_0x228ac8[_0x56f3a4(0x323)];if(!_0x430afb){showNotification('Username\x20is\x20missing',_0x56f3a4(0x1f7));return;}try{await setUserRole(_0x430afb,_0x13d8c0,_0x55266b),closeModalHandler(),loadUsersWithRoles();}catch(_0x5e6e04){}});const _0x293eec=document['getElementById'](_0x4bf1cb(0x253));_0x293eec&&(_0x293eec['removeEventListener'](_0x4bf1cb(0x252),closeModalHandler),_0x293eec['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x48f184,_0xc814a4){const _0x15c05f=a4_0x274793;try{console['log']('Attempting\x20to\x20promote\x20'+_0x48f184+'\x20in\x20'+_0xc814a4+'\x20ladder');const _0x8affe0=auth['currentUser'];if(!_0x8affe0)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x56dcaa=_0xc814a4==='D2'?'playersD2':_0x15c05f(0x150),_0x5c1e4c=_0xc814a4==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x15c05f(0x14b)+_0x56dcaa);const _0x2051da=collection(db,_0x56dcaa),_0x6ae61e=query(_0x2051da,where('username','==',_0x48f184)),_0xe55f90=await getDocs(_0x6ae61e);if(_0xe55f90[_0x15c05f(0x33b)]){alert(_0x15c05f(0x21e)+_0xc814a4+_0x15c05f(0x2fd));throw new Error('Player\x20not\x20found\x20in\x20'+_0xc814a4+'\x20ladder');}const _0x422aaf=_0xe55f90['docs'][0x0],_0x38e2c4=_0x422aaf['data'](),_0x30d5d8=_0x38e2c4['eloRating']||0x4b0,_0x4e564f=_0x422aaf['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x30d5d8);const _0x2328fd=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x15c05f(0x293),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x1e1e43=_0x2328fd['find'](_0x5d09af=>_0x5d09af[_0x15c05f(0x2d2)]>_0x30d5d8);if(!_0x1e1e43){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0xc814a4+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0xc814a4+'\x20ladder');}console['log'](_0x15c05f(0x13d)+_0x1e1e43['name']+'\x20('+_0x1e1e43['elo']+')'),await updateDoc(doc(db,_0x56dcaa,_0x422aaf['id']),{'eloRating':_0x1e1e43['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x8affe0['email']||'admin'}),await addDoc(collection(db,_0x5c1e4c),{'player':_0x48f184,'previousElo':_0x30d5d8,'newElo':_0x1e1e43[_0x15c05f(0x2d2)],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x1e1e43['name'],'promotedBy':_0x8affe0[_0x15c05f(0x32c)]||_0x15c05f(0x30f),'gameMode':_0xc814a4});try{const {promotionManager:_0xa9f37c}=await import('./promotions.js'),_0x1e023a=_0xa9f37c['getRankName'](_0x30d5d8),_0x576d23=_0x1e1e43['name'];await _0xa9f37c['sendPromotionNotification'](_0x4e564f,_0x48f184,_0x30d5d8,_0x1e1e43['elo'],_0x1e023a,_0x576d23,'promotion',{'displayName':_0x48f184,'source':_0x15c05f(0x30f),'adminUser':_0x8affe0[_0x15c05f(0x32c)],'ladder':_0xc814a4}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x3dfc0e){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x3dfc0e);}return alert('Successfully\x20promoted\x20'+_0x48f184+_0x15c05f(0x311)+_0x1e1e43['name']+'\x20('+_0x1e1e43['elo']+')'),currentLadder===_0xc814a4&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x3eff5e){console['error'](_0x15c05f(0x294),_0x3eff5e),alert(_0x15c05f(0x247)+_0x3eff5e['message']);throw _0x3eff5e;}}document[a4_0x274793(0x33c)]('DOMContentLoaded',()=>{const _0x3d6b5f=document['getElementById']('promote-form');_0x3d6b5f&&_0x3d6b5f['addEventListener']('submit',async _0x18da63=>{const _0x2e1aab=a4_0x5931;_0x18da63['preventDefault']();const _0x37a4f8=document['getElementById']('promote-username')['value']['trim'](),_0x1359de=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x37a4f8){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x37a4f8,_0x1359de),document['getElementById'](_0x2e1aab(0x2bf))['classList']['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x550bf2){console['error'](_0x2e1aab(0x2d0),_0x550bf2);}});});async function demotePlayer(_0x464a45,_0x2860df){const _0x4216d2=a4_0x274793;try{console[_0x4216d2(0x314)](_0x4216d2(0x307)+_0x464a45+_0x4216d2(0x162)+_0x2860df+'\x20ladder');const _0x5402a8=auth['currentUser'];if(!_0x5402a8)throw new Error(_0x4216d2(0x1aa));const _0x4c9725=_0x2860df==='D2'?'playersD2':'players',_0x524ae8=_0x2860df==='D2'?_0x4216d2(0x1b6):_0x4216d2(0x2da);console['log'](_0x4216d2(0x14b)+_0x4c9725);const _0x52a983=collection(db,_0x4c9725),_0x3a4ece=query(_0x52a983,where(_0x4216d2(0x303),'==',_0x464a45)),_0x4aa440=await getDocs(_0x3a4ece);if(_0x4aa440['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x2860df+_0x4216d2(0x2fd));throw new Error(_0x4216d2(0x21e)+_0x2860df+'\x20ladder');}const _0x25ca45=_0x4aa440['docs'][0x0],_0x172e66=_0x25ca45['data'](),_0x4c1937=_0x172e66[_0x4216d2(0x29c)]||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x4c1937);const _0x29ff2f=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x32a383=_0x29ff2f['find'](_0x3584ef=>_0x3584ef['elo']<_0x4c1937);if(!_0x32a383){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x2860df+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x2860df+_0x4216d2(0x2fd));}console['log']('Demoting\x20player\x20to\x20'+_0x32a383[_0x4216d2(0x328)]+'\x20('+_0x32a383['elo']+')'),await updateDoc(doc(db,_0x4c9725,_0x25ca45['id']),{'eloRating':_0x32a383['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x5402a8['email']||_0x4216d2(0x30f)}),await addDoc(collection(db,_0x524ae8),{'player':_0x464a45,'previousElo':_0x4c1937,'newElo':_0x32a383['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x32a383['name'],'demotedBy':_0x5402a8['email']||_0x4216d2(0x30f),'gameMode':_0x2860df});try{const {promotionManager:_0x271e9b}=await import('./promotions.js'),_0x353643=_0x271e9b['getRankName'](_0x4c1937),_0x10df3b=_0x32a383['name'];await _0x271e9b[_0x4216d2(0x244)](_0x25ca45['id'],_0x464a45,_0x4c1937,_0x32a383['elo'],_0x353643,_0x10df3b,'demotion',{'displayName':_0x464a45,'source':'admin','adminUser':_0x5402a8[_0x4216d2(0x32c)],'ladder':_0x2860df}),console[_0x4216d2(0x314)](_0x4216d2(0x262));}catch(_0x32b8be){console[_0x4216d2(0x1f7)](_0x4216d2(0x269),_0x32b8be);}return alert('Successfully\x20demoted\x20'+_0x464a45+'\x20to\x20'+_0x32a383[_0x4216d2(0x328)]+'\x20('+_0x32a383['elo']+')'),currentLadder===_0x2860df&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x4325ec){console['error']('Error\x20demoting\x20player:',_0x4325ec),alert('Error\x20demoting\x20player:\x20'+_0x4325ec['message']);throw _0x4325ec;}}document['addEventListener'](a4_0x274793(0x2ed),()=>{const _0x4b6a1d=document['getElementById']('demote-form');_0x4b6a1d&&_0x4b6a1d['addEventListener']('submit',async _0x19117a=>{const _0x192f1f=a4_0x5931;_0x19117a[_0x192f1f(0x1a9)]();const _0x561699=document[_0x192f1f(0x119)]('demote-username')[_0x192f1f(0x323)]['trim'](),_0x1a41e6=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x561699){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x561699,_0x1a41e6),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById'](_0x192f1f(0x2c9))[_0x192f1f(0x323)]='';}catch(_0x38df30){console[_0x192f1f(0x1f7)]('Error\x20in\x20demotion:',_0x38df30);}});});async function setCustomElo(_0x3ab9d6,_0x5cb2eb,_0x4e6eb6){const _0x19ef99=a4_0x274793;try{const _0x12923c=auth['currentUser'];if(!_0x12923c||!isAdmin(_0x12923c['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x103a88=_0x4e6eb6==='D2'?_0x19ef99(0x28f):'players',_0x23c6f1=_0x4e6eb6==='D2'?_0x19ef99(0x1b6):_0x19ef99(0x2da),_0x593bb2=collection(db,_0x103a88),_0x5583f4=query(_0x593bb2,where(_0x19ef99(0x303),'==',_0x3ab9d6)),_0x4d114a=await getDocs(_0x5583f4);if(_0x4d114a['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x4e6eb6+'\x20ladder');const _0x4a0526=_0x4d114a['docs'][0x0],_0x59fbdc=_0x4a0526['data'](),_0x3fa771=_0x59fbdc['eloRating']||0x4b0,_0x423be7=writeBatch(db);_0x423be7[_0x19ef99(0x2a7)](doc(db,_0x103a88,_0x4a0526['id']),{'eloRating':_0x5cb2eb,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x12923c[_0x19ef99(0x32c)]});const _0xbb3b4e=doc(collection(db,_0x23c6f1));return _0x423be7[_0x19ef99(0x1ee)](_0xbb3b4e,{'player':_0x3ab9d6,'previousElo':_0x3fa771,'newElo':_0x5cb2eb,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x12923c['email'],'gameMode':_0x4e6eb6}),await _0x423be7[_0x19ef99(0x20c)](),showNotification('ELO\x20rating\x20for\x20'+_0x3ab9d6+_0x19ef99(0x2c7)+_0x3fa771+'\x20to\x20'+_0x5cb2eb,_0x19ef99(0x21f)),currentLadder===_0x4e6eb6&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x316ca4){console['error']('Error\x20setting\x20custom\x20ELO:',_0x316ca4);throw _0x316ca4;}}async function setUserRole(_0x5c6b45,_0x27574d,_0x1943a3){const _0x32b098=a4_0x274793;try{const _0x34cf3e=auth['currentUser'];if(!_0x34cf3e||!isAdmin(_0x34cf3e[_0x32b098(0x32c)]))throw new Error(_0x32b098(0x34f));const _0x32fe97=_0x27574d?_0x27574d['trim']():null,_0x4cce05=_0x32fe97?_0x1943a3||'#808080':null,[_0x22fad0,_0x3b93f6]=await Promise[_0x32b098(0x169)]([getDocs(query(collection(db,_0x32b098(0x150)),where('username','==',_0x5c6b45))),getDocs(query(collection(db,_0x32b098(0x28f)),where('username','==',_0x5c6b45)))]),_0x5a8d10=[];if(!_0x22fad0['empty'])_0x5a8d10[_0x32b098(0x203)]({'ref':_0x22fad0['docs'][0x0][_0x32b098(0x219)],'source':'D1'});if(!_0x3b93f6[_0x32b098(0x33b)])_0x5a8d10[_0x32b098(0x203)]({'ref':_0x3b93f6['docs'][0x0][_0x32b098(0x219)],'source':'D2'});if(_0x5a8d10[_0x32b098(0x27d)]===0x0){const [_0x342861,_0x51063b]=await Promise[_0x32b098(0x169)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x5c6b45))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x5c6b45)))]);if(!_0x342861['empty'])_0x5a8d10[_0x32b098(0x203)]({'ref':_0x342861['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0x51063b[_0x32b098(0x33b)])_0x5a8d10[_0x32b098(0x203)]({'ref':_0x51063b['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x5a8d10['length']===0x0)throw new Error('User\x20\x22'+_0x5c6b45+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x174e33=writeBatch(db);_0x5a8d10['forEach'](_0x55fd31=>{const _0x4849ed=_0x32b098;console['log']('Updating\x20role\x20for\x20'+_0x5c6b45+_0x4849ed(0x162)+_0x55fd31['source']),!_0x32fe97?_0x174e33[_0x4849ed(0x2a7)](_0x55fd31['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x174e33['update'](_0x55fd31['ref'],{'roleName':_0x32fe97,'roleColor':_0x4cce05,'roleAssignedBy':_0x34cf3e['email'],'roleAssignedAt':serverTimestamp()});}),await _0x174e33['commit']();const _0x11f004=_0x32fe97?'Role\x20\x22'+_0x32fe97+'\x22\x20set':'Role\x20removed';return showNotification(_0x11f004+'\x20for\x20user\x20\x22'+_0x5c6b45+'\x22','success'),!![];}catch(_0x33f23b){console['error'](_0x32b098(0x19c),_0x33f23b),showNotification('Error:\x20'+_0x33f23b[_0x32b098(0x2ac)],'error');throw _0x33f23b;}}function showNotification(_0x15a762,_0xfe35f2='info'){const _0x13d027=a4_0x274793,_0x1b8129=document['createElement'](_0x13d027(0x160));_0x1b8129['className']='notification\x20'+_0xfe35f2,_0x1b8129['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0xfe35f2)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x15a762+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document[_0x13d027(0x1f3)]['appendChild'](_0x1b8129),setTimeout(()=>{const _0x10ac94=_0x13d027;_0x1b8129[_0x10ac94(0x15b)]['add'](_0x10ac94(0x267));},0xa);const _0x19bc8d=setTimeout(()=>{closeNotification(_0x1b8129);},0x1388);_0x1b8129[_0x13d027(0x11b)](_0x13d027(0x228))['addEventListener']('click',()=>{clearTimeout(_0x19bc8d),closeNotification(_0x1b8129);});}function getNotificationIcon(_0x59a1b2){const _0x223995=a4_0x274793;switch(_0x59a1b2){case'success':return _0x223995(0x231);case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function a4_0x3524(){const _0x4b7c9a=['Modal\x20element\x20found:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','destroy','getElementById','toDate','querySelector','save-player-btn','Silver','ribbon-user-search','roleColor','Testing\x20Firebase\x20connection...','edit-highlight-achievementPlayer-input','Create\x20Article','Error\x20removing\x20role:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','input[name=\x22assign-ladder\x22]:checked','history-start-date','Load\x20inactive\x20players\x20data\x20clicked','sort','creator','edit-highlight-playerProfileUrl-input','includes','non-participants','.ladder-switch\x20input[value=\x22D1\x22]','.edit-ribbons-btn','highlight-achievement-image-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','loading','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','lastVisible','description','remove','Unknown','image','trophy-name','set-role-modal','Modal\x20computed\x20styles:','reset','Trophy\x20\x22','Promoting\x20player\x20to\x20','then','mapPlayed','wins','parentNode','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','You\x20must\x20be\x20logged\x20in','article-author','confirmResimulateMatch','type',';\x20color:\x20','\x22\x20already\x20has\x20this\x20trophy','role-username','manage-highlights','Searching\x20for\x20player\x20in\x20','D1\x20Players','points-user-search','highlight-map','edit-username','players','Deleting\x20match...','onerror','highlight-modal','.close','highlight-match-info','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','Setting\x20up\x20Manage\x20Ribbons\x20section','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','Error\x20loading\x20matches:','Submit\x20button\x20clicked\x20directly','classList','ribbon-level','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','Error\x20saving\x20trophy:','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','div','focus','\x20in\x20','.delete-trophy-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','assign-trophy-id','contains','load-elo-history-data','endDate','all','history-type-filter','catch','losses','\x20Missing','input[name=\x22set-elo-ladder\x22]:checked','backgroundColor','approvedMatchesD2','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','award-item-form','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','</td></tr>','size','matches-table-body','change','match-count','from','loserUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20loading\x20highlight:','Match\x20ID\x20or\x20ladder\x20missing','key','style','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','trophy-rarity','Found\x20user\x20in\x20','uid','no-results-message','matchInfo','.form-group,\x20.form-row','Initial\x20Placement','\x20Rank\x20Distribution','innerHTML','data-id','edit-match-loser-comment','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','edit-highlight-matchInfo-input','trophy-preview-container','required','N/A','Matches\x20action\x20buttons\x20setup\x20complete','Highlight\x20created\x20successfully!','winnerUsername','Points\x20modified\x20successfully','fromDate','Player\x20\x22','searchTerm','trophy-preview-img','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20setting\x20user\x20role:','Attaching\x20background\x20click\x20listener.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','#inactive-players-table-body\x20tr','trophy-id','src','entries','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','.form-group','timestamp','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','article-content','warn','preventDefault','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','\x20points','localeCompare','Error\x20saving\x20article:','points-action','replaceChild','lastPointsModified','name-asc','split','createdAt','closest','manage-ranks','eloHistoryD2','\x20Exists','highlight-winner-score','Role\x20select\x20set\x20to:\x20','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','Loading\x20user\x20data...','./ladderalgorithm.js','Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...','highlight-map-creator-container','player','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','matches-end-date','Error\x20resimulating\x20match:','role-name','set-elo-username','textContent','.edit-btn','roleAssignedBy','#808080','highlight-match-info-container','edit-match-id','achievementPlayer','pendingMatchesD2','loserScore','Please\x20enter\x20valid\x20data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','5px','ribbon-target-user','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','trim','none','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','button[type=\x22submit\x22]','manage-ribbons','\x20already\x20has\x20points:\x20','page','appendChild','test-match-winner-username','\x20allowed\x20tabs:','.admin-section','current-ladder-display','Failed\x20to\x20load\x20points\x20data:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20','Modal\x20close\x20button\x20clicked','getAttribute','match-details-container','highlight-submitted-by-container','createElement','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','Failed\x20to\x20save\x20article:\x20','elo-history-table-body','previousElementSibling','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','set','mapCreator','displayName','Table\x20row\x20for\x20user\x20','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','body','edit-highlight-matchDate-input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','achievementDetails','error','approvedMatchesD3','checked','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','trophies-table-body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','\x20(winner)\x20vs\x20','load-matches-data','Form\x20elements\x20are\x20missing','edit-highlight-description-input','borderRadius','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel-set-elo-btn','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','#e0e0e0','ribbon-target-ladder','empty-state','assign-trophy-form','set-elo-ladder','commit','d1-next-page','Error\x20loading\x20trophy\x20data:','opacity','setAttribute','Positions\x20updated:\x20Winner\x20','Emerald','loserDemoLink','Query\x20executed.\x20Empty:','edit-highlight-achievementType-input','querySelectorAll','amount','assign-trophy-name','ref','manage-players','15px','assign-trophy-rarity','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','Player\x20not\x20found\x20in\x20','success','startDate','no-results','highlight-achievement-details-container','console','rgba(255,\x20255,\x20255,\x200.1)','ribbon','docs','Creating\x20test\x20match\x20without\x20player\x20validation...','.close-notification','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','#50C878','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','approvedAt','resimulate-modal','article-id','search-ribbon-user-btn','Failed\x20to\x20delete\x20player:\x20','fa-check-circle','Error\x20updating\x20player:','removeAttribute','position','Player\x20Achievement','highlight-map-version','edit-match-ladder','data-section','highlight-form','\x27</td>','Error\x20loading\x20highlights:','Load\x20history\x20data\x20clicked','YouTube\x20Video\x20ID\x20(Optional)','delete-match-confirm-modal','highlight-map-creator','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','RejectedD3','\x22\x20not\x20found\x20in\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','sendPromotionNotification','approvedMatches','highlight-achievement-player','Error\x20promoting\x20player:\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','userId','Failed\x20to\x20load\x20user\x20history','\x20-\x20','block','confirm-resimulate-btn','Page\x20','manage-trophies','Error\x20checking\x20','positive-change','click','cancel-role-btn','No\x20user\x20ID\x20found\x20on\x20button','rank-distribution-chart','manage-matches','User\x20','forEach','Failed\x20to\x20save\x20trophy:\x20','<span\x20class=\x22no-role\x22>None</span>','dataset','.quick-edit-btn','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','quick-edit-points-form','join','highlight-achievement-player-container','Please\x20fill\x20all\x20fields','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','Error\x20initializing\x20points:\x20','matchLink','user-roles-section','Setting\x20up\x20matches\x20action\x20buttons...','active','edit-match-winner-score','Failed\x20to\x20send\x20Discord\x20notification:','\x20from\x20','.ladder-switch\x20input','toString','elo-history','edit-highlight-achievementDetails-input','Error\x20loading\x20players:','set-elo-btn','YouTube\x20Video\x20ID*','matchId','rarity','highlight-submitted-by','Error\x20updating\x20points:','achievementType','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','articles','article-modal','playerRibbons','.error-state','add-new-role-btn','length','promote-form','non-participant','.delete-match-btn','playerProfileUrl','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','\x20vs\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','#d32f2f','currentUser','migrate-points-btn','disabled','load-articles-data','toLocaleDateString','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','.admin-action','playersD2','points-overview-table-body','seconds','lastMatch','Gold','Error\x20promoting\x20player:','Create\x20test\x20match\x20button\x20clicked','Toggling\x20fields\x20for\x20highlight\x20type:\x20','matches-start-date','currentTarget','highlight-video-preview-container','Error\x20loading\x20ribbons\x20data','demote-modal','eloRating','matches-prev-page','user-search-results','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','Match\x20deleted\x20successfully','#cancel-create-test-match-btn','pendingMatches','Error\x20loading\x20dashboard\x20data:','openResimulateModal','highlight-loser-score','Ribbons\x20data\x20loaded\x20successfully','update','playersD3','Error\x20loading\x20trophies:','#ffffff','ribbons','message','matches-search','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','Modal\x20opened\x20successfully','role-filter','alt','Error\x20applying\x20filters:','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','Error\x20saving\x20highlight:\x20','points-overview-search','test-match-date','.edit-role-btn','firstVisible','edit-highlight-creatorImageUrl-input','playerId','Failed\x20to\x20load\x20trophy\x20data','trophy-form','toLocaleString','insertAdjacentElement','promote-modal','Create\x20New\x20Trophy','.close-btn','Promotion','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','map','role','match','\x20was\x20updated\x20from\x20','-page-indicator','demote-username','winnerName','highlight-type','bar','role-color','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','data','Error\x20in\x20promotion:','keys','elo','load-inactive-players-data','match-row','common','points','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','Test\x20match','achievement','eloHistory','Sidebar\x20navigation\x20initialized\x20with\x20permissions','MAX_SAFE_INTEGER','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','submittedBy','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','Set\x20to\x20','edit-match-winner-demo','highlights','\x20by\x20UID:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','edit-match-winner','Error\x20loading\x20points\x20data:','Simple\x20test\x20match\x20created\x20successfully','selected-user-points','cells','mapName','Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!','input','DOMContentLoaded','\x20not\x20found\x20in\x20any\x20ladder','Create\x20New\x20','exists','new-player-elo','Please\x20enter\x20a\x20username','getComputedStyle','matchDate','cancel-edit-btn','subtract','\x20with\x20ELO\x20','user-search','set-elo-modal','userProfiles','\x20users','Winner\x20and\x20loser\x20usernames\x20are\x20required','\x20ladder','substring','Trophy\x20definition\x20deleted\x20successfully','stopPropagation','edit-losses','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','username','playerRibbonsD3','submit','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','Attempting\x20to\x20demote\x20','activity','No\x20email','newElo','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','Added\x20','pending-count','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','admin','daysSinceMatch','\x20to\x20','user-role','highlight-match-link-container','log','highlight-video-container','set-elo-value','Error\x20loading\x20articles:','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','quick-edit-points-modal','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','Delete\x20match\x20clicked:','edit-highlight-winnerName-input','Error\x20loading\x20inactive\x20players:','selected-user-id','values','Firebase\x20connection\x20test\x20failed:','Found\x20','reduce','value','Invalid\x20action','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','Trophy\x20updated\x20successfully','name','\x20users\x20already\x20had\x20points.','edit-wins','sources','email','0.6','Error\x20loading\x20users:','loserSuicides','assign-trophy-modal','onAuthStateChanged','Highlight\x20not\x20found','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','className','target','\x20total\x20players\x20in\x20the\x20','mapVersion','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','demotedBy','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','empty','addEventListener','visible','Switched\x20to\x20','User\x20has\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','Error\x20searching\x20users:','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','inactive-players','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Edit\x20Trophy','trophyDefinitions','trophy-description','roleName','.no-results','toLowerCase','edit-elo','desc','article-title','Unauthorized:\x20Admin\x20access\x20required','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','manage-levels-ribbons','edit-match-loser','-prev-page','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Points\x20updated\x20successfully','display','toISOString','player-count','Error\x20adding\x20player:\x20','highlight-achievement-details','players-ladder-selector','negative-change','Error\x20saving\x20match:','Loaded\x20','.type','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','href','edit-highlight-type-select','Setting\x20up\x20create\x20test\x20match\x20button','add','highlight-creator-image','\x20view\x20history\x20buttons','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','loserName','videoId','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','d2-prev-page'];a4_0x3524=function(){return _0x4b7c9a;};return a4_0x3524();}function closeNotification(_0x148227){const _0x3785e4=a4_0x274793;_0x148227[_0x3785e4(0x15b)]['remove']('active'),setTimeout(()=>{_0x148227['remove']();},0x12c);}function setupUserRolesSection(){const _0xd71093=a4_0x274793,_0x356422=document[_0xd71093(0x119)]('load-users-data');_0x356422&&_0x356422['addEventListener']('click',function(){const _0x23678c=_0xd71093;this['classList']['add'](_0x23678c(0x131)),this['innerHTML']=_0x23678c(0x343),loadUsersWithRoles()['then'](()=>{const _0xa17094=_0x23678c;this['classList']['remove'](_0xa17094(0x131)),this[_0xa17094(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x2c5208=>{const _0x4f63d8=_0x23678c;console['error'](_0x4f63d8(0x32e),_0x2c5208),this['classList']['remove']('loading'),this['innerHTML']=_0x4f63d8(0x15d),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x79e52f=document['getElementById'](_0xd71093(0x27c));_0x79e52f&&_0x79e52f[_0xd71093(0x33c)](_0xd71093(0x252),()=>{const _0x114811=_0xd71093,_0x152486=document['getElementById'](_0x114811(0x139));_0x152486&&_0x152486['classList']['add']('active');});const _0x29c0c3=document['getElementById'](_0xd71093(0x2f8));_0x29c0c3&&_0x29c0c3['addEventListener'](_0xd71093(0x2ec),debounce(filterUsersTable,0x12c));const _0x150d08=document[_0xd71093(0x119)](_0xd71093(0x2b0));_0x150d08&&_0x150d08['addEventListener'](_0xd71093(0x178),filterUsersTable);}async function loadUsersWithRoles(){const _0x486c17=a4_0x274793,_0x33cd34=document[_0x486c17(0x119)]('users-table-body');if(!_0x33cd34)return;_0x33cd34[_0x486c17(0x18b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x224d3c,_0x4d72e2,_0x1cbbb0,_0x5d1538]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,_0x486c17(0x28f))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x149caf=new Map();function _0x25c5ac(_0x5b0aa7,_0x4004aa){_0x5b0aa7['forEach'](_0x1fef60=>{const _0x44fd63=a4_0x5931,_0x33e840=_0x1fef60['data']();if(!_0x33e840[_0x44fd63(0x303)])return;if(!_0x149caf['has'](_0x33e840[_0x44fd63(0x303)]))_0x149caf['set'](_0x33e840['username'],{'username':_0x33e840['username'],'roleName':_0x33e840[_0x44fd63(0x349)]||null,'roleColor':_0x33e840[_0x44fd63(0x11f)]||null,'roleAssignedBy':_0x33e840['roleAssignedBy']||null,'roleAssignedAt':_0x33e840['roleAssignedAt']||null,'sources':[_0x4004aa]});else{const _0x1a1bd0=_0x149caf['get'](_0x33e840[_0x44fd63(0x303)]);_0x33e840[_0x44fd63(0x349)]&&(!_0x1a1bd0['roleName']||_0x4004aa==='D1'||_0x4004aa==='D2')&&(_0x1a1bd0['roleName']=_0x33e840['roleName'],_0x1a1bd0['roleColor']=_0x33e840['roleColor'],_0x1a1bd0['roleAssignedBy']=_0x33e840[_0x44fd63(0x1c9)],_0x1a1bd0['roleAssignedAt']=_0x33e840['roleAssignedAt']),!_0x1a1bd0['sources']['includes'](_0x4004aa)&&_0x1a1bd0['sources'][_0x44fd63(0x203)](_0x4004aa);}});}_0x25c5ac(_0x224d3c,'D1'),_0x25c5ac(_0x4d72e2,'D2'),_0x25c5ac(_0x1cbbb0,'Non-Participant'),_0x25c5ac(_0x5d1538,'Profile');const _0x5eb48=Array[_0x486c17(0x17a)](_0x149caf[_0x486c17(0x31f)]())[_0x486c17(0x128)]((_0x43d457,_0x16d440)=>_0x43d457[_0x486c17(0x303)]['localeCompare'](_0x16d440['username']));if(_0x5eb48['length']===0x0){_0x33cd34[_0x486c17(0x18b)]=_0x486c17(0x181);return;}_0x33cd34[_0x486c17(0x18b)]='',_0x5eb48['forEach'](_0x1ca9df=>{const _0x1b41cf=_0x486c17,_0x57fc7e=document[_0x1b41cf(0x1e8)]('tr');_0x57fc7e['dataset']['username']=_0x1ca9df['username'],_0x57fc7e[_0x1b41cf(0x25b)]['roleName']=_0x1ca9df['roleName']||'',_0x57fc7e['dataset'][_0x1b41cf(0x11f)]=_0x1ca9df[_0x1b41cf(0x11f)]||_0x1b41cf(0x1ca);const _0x2d1028=_0x1ca9df['roleAssignedAt']?new Date(_0x1ca9df['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x123a5b=_0x1ca9df['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x1ca9df[_0x1b41cf(0x11f)]+_0x1b41cf(0x147)+getContrastColor(_0x1ca9df['roleColor'])+';\x22>'+_0x1ca9df['roleName']+'</span>':_0x1b41cf(0x25a);_0x57fc7e[_0x1b41cf(0x18b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1ca9df['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x1ca9df[_0x1b41cf(0x32b)]['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x123a5b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1ca9df['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2d1028+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x1ca9df['username']+_0x1b41cf(0x19b)+(_0x1ca9df['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x1ca9df['username']+_0x1b41cf(0x318):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x33cd34[_0x1b41cf(0x1dc)](_0x57fc7e);}),document['querySelectorAll'](_0x486c17(0x2b7))['forEach'](_0x1abd60=>{const _0x38becc=_0x486c17;_0x1abd60[_0x38becc(0x33c)]('click',()=>{const _0x14c44d=_0x38becc,_0x47f033=_0x1abd60[_0x14c44d(0x25b)]['username'];openRoleEditModal(_0x47f033);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x2a2296=>{_0x2a2296['addEventListener']('click',()=>{const _0x44bbf5=a4_0x5931,_0x266dc7=_0x2a2296['dataset'][_0x44bbf5(0x303)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x266dc7+'?')&&setUserRole(_0x266dc7,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x2035cf=>console[_0x44bbf5(0x1f7)](_0x44bbf5(0x123),_0x2035cf));});});}catch(_0x45bada){console['error']('Error\x20loading\x20users:',_0x45bada),_0x33cd34['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x545af7){const _0x264f06=a4_0x274793;console[_0x264f06(0x314)](_0x264f06(0x326),_0x545af7);const _0xf7ee6d=document['getElementById']('set-role-modal'),_0x4c2eef=document['getElementById'](_0x264f06(0x149)),_0x4845df=document[_0x264f06(0x119)](_0x264f06(0x312));if(!_0xf7ee6d){console[_0x264f06(0x1f7)](_0x264f06(0x341)),alert(_0x264f06(0x206));return;}console['log'](_0x264f06(0x116),_0xf7ee6d);_0x4c2eef?(_0x4c2eef['value']=_0x545af7,console['log']('Username\x20input\x20set\x20to:\x20'+_0x545af7)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0xcabf22=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x545af7+'\x22]');if(_0xcabf22&&_0x4845df){const _0x4ca8ef=_0xcabf22[_0x264f06(0x25b)]['role'];_0x4845df[_0x264f06(0x323)]=_0x4ca8ef===_0x264f06(0x1d6)?'':_0x4ca8ef,console['log'](_0x264f06(0x1b9)+_0x4845df['value']+'\x20(based\x20on\x20data-role:\x20'+_0x4ca8ef+')');}else{if(!_0xcabf22)console['warn'](_0x264f06(0x1f1)+_0x545af7+'\x20not\x20found.');if(!_0x4845df)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x4845df)_0x4845df[_0x264f06(0x323)]='';}console[_0x264f06(0x314)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0xf7ee6d['classList']['add']('active');const _0x4aa3f1=document['getElementById']('cancel-role-btn');_0x4aa3f1?(console[_0x264f06(0x314)]('Attaching\x20cancel\x20button\x20listener.'),_0x4aa3f1['removeEventListener']('click',closeModalHandler),_0x4aa3f1['addEventListener']('click',closeModalHandler)):console[_0x264f06(0x1a8)]('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console[_0x264f06(0x314)](_0x264f06(0x19d)),_0xf7ee6d['removeEventListener']('click',closeModalBackgroundHandler),_0xf7ee6d['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x2fdf5b){_0x2fdf5b['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x617b92=a4_0x274793,_0x250c16=document['getElementById'](_0x617b92(0x139));_0x250c16&&(_0x250c16['classList'][_0x617b92(0x135)]('active'),_0x250c16['removeEventListener'](_0x617b92(0x252),closeModalBackgroundHandler));}function filterUsersTable(){const _0x5e03a7=a4_0x274793,_0x472a1b=document['getElementById'](_0x5e03a7(0x2f8))?.['value']['toLowerCase']()||'',_0x5d18b2=document[_0x5e03a7(0x119)]('role-filter')?.['value']||'all',_0x3f141b=document['querySelectorAll']('#users-table-body\x20tr');let _0x7d1225=0x0;_0x3f141b['forEach'](_0x3e16cb=>{const _0x4f950a=_0x5e03a7;if(_0x3e16cb['querySelector']('.loading-cell')||_0x3e16cb['querySelector']('.empty-state')||_0x3e16cb[_0x4f950a(0x11b)](_0x4f950a(0x27b)))return;const _0x126e7d=_0x3e16cb['dataset']['username']?.['toLowerCase']()||'',_0x8a38d3=_0x3e16cb['dataset'][_0x4f950a(0x2c5)]||'none',_0x429d0e=_0x126e7d[_0x4f950a(0x12b)](_0x472a1b),_0xabfb7e=_0x5d18b2==='all'||_0x8a38d3===_0x5d18b2;_0x429d0e&&_0xabfb7e?(_0x3e16cb['style']['display']='',_0x7d1225++):_0x3e16cb['style']['display']=_0x4f950a(0x1d6);});if(_0x7d1225===0x0&&_0x3f141b[_0x5e03a7(0x27d)]>0x0){const _0x1079c8=document['getElementById']('users-table-body');if(_0x1079c8){if(!_0x1079c8['querySelector']('.no-results')){const _0x1bdd18=document['createElement']('tr');_0x1bdd18[_0x5e03a7(0x15b)]['add'](_0x5e03a7(0x221)),_0x1bdd18['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x1079c8['appendChild'](_0x1bdd18);}}}else{const _0x42a76f=document[_0x5e03a7(0x11b)]('.no-results');_0x42a76f&&_0x42a76f[_0x5e03a7(0x135)]();}}function setupManageArticlesSection(){const _0x3df22d=a4_0x274793,_0x41b014=document['getElementById']('load-articles-data');_0x41b014&&_0x41b014['addEventListener']('click',function(){const _0x372870=a4_0x5931;this['classList']['add']('loading'),this['innerHTML']=_0x372870(0x343),loadArticles()['then'](()=>{const _0x112249=_0x372870;this['classList']['remove'](_0x112249(0x131)),this[_0x112249(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x27b679=>{const _0x1f5388=_0x372870;console['error']('Error\x20loading\x20articles:',_0x27b679),this[_0x1f5388(0x15b)]['remove'](_0x1f5388(0x131)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x42a2d1=_0x1f5388;this[_0x42a2d1(0x18b)]=_0x42a2d1(0x229);},0xbb8);});});const _0xceb657=document['getElementById']('create-new-article-btn');_0xceb657?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0xceb657['style']['display']='block',_0xceb657[_0x3df22d(0x33c)]('click',()=>{openArticleModal();})):console['error'](_0x3df22d(0x28b));const _0x3072df=document[_0x3df22d(0x119)]('article-form');_0x3072df&&_0x3072df[_0x3df22d(0x33c)]('submit',_0x37f68a=>{_0x37f68a['preventDefault'](),saveArticle();});const _0x1b8089=document['getElementById']('cancel-article-btn');_0x1b8089&&_0x1b8089['addEventListener']('click',()=>{closeArticleModal();});const _0x2100c1=document['querySelector']('#article-modal\x20.close-btn');_0x2100c1&&_0x2100c1[_0x3df22d(0x33c)]('click',()=>{closeArticleModal();});const _0x132bae=document['getElementById'](_0x3df22d(0x279));_0x132bae&&_0x132bae['addEventListener']('click',_0x3016fe=>{_0x3016fe['target']===_0x132bae&&closeArticleModal();});}async function loadArticles(){const _0x21fca7=a4_0x274793,_0x59c16c=document['getElementById']('articles-table-body');if(!_0x59c16c)return;_0x59c16c['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x47f688=collection(db,_0x21fca7(0x278)),_0x584613=query(_0x47f688,orderBy(_0x21fca7(0x1b3),'desc')),_0x5b28c7=await getDocs(_0x584613);if(_0x5b28c7['empty']){_0x59c16c['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x59c16c['innerHTML']='',_0x5b28c7['forEach'](_0x4bd200=>{const _0x201ec3=_0x21fca7,_0x5dca7b=_0x4bd200['data'](),_0x225273=document['createElement']('tr'),_0x9a441=_0x5dca7b['createdAt']?new Date(_0x5dca7b['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x225273['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5dca7b['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5dca7b['author']||'Unknown')+_0x201ec3(0x345)+_0x9a441+_0x201ec3(0x1a6)+_0x4bd200['id']+_0x201ec3(0x158)+_0x4bd200['id']+_0x201ec3(0x22b),_0x59c16c[_0x201ec3(0x1dc)](_0x225273);}),setupArticleActionButtons();}catch(_0xad3192){console['error'](_0x21fca7(0x317),_0xad3192),_0x59c16c[_0x21fca7(0x18b)]=_0x21fca7(0x1e3)+_0xad3192['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x58243f=a4_0x274793;document[_0x58243f(0x216)]('.edit-article-btn')['forEach'](_0x276d96=>{const _0x520a33=_0x58243f;_0x276d96[_0x520a33(0x33c)]('click',async _0x33e103=>{const _0x56a65c=_0x33e103['currentTarget']['dataset']['id'];openArticleModal(_0x56a65c);});}),document[_0x58243f(0x216)]('.delete-article-btn')['forEach'](_0x56ba0a=>{_0x56ba0a['addEventListener']('click',async _0x4d4f62=>{const _0x4ab348=a4_0x5931,_0x273496=_0x4d4f62['currentTarget'][_0x4ab348(0x25b)]['id'];confirmDeleteArticle(_0x273496);});});}function openArticleModal(_0x8f0b84=null){const _0x3f2bad=a4_0x274793,_0x355993=document['getElementById'](_0x3f2bad(0x279)),_0x84b401=document['getElementById']('article-modal-title'),_0xbebc58=document[_0x3f2bad(0x119)]('article-form'),_0x5ac486=document['getElementById']('article-id');_0xbebc58['reset'](),_0x5ac486['value']='';if(_0x8f0b84)_0x84b401[_0x3f2bad(0x1c7)]='Edit\x20Article',_0x5ac486['value']=_0x8f0b84,loadArticleData(_0x8f0b84);else{_0x84b401['textContent']=_0x3f2bad(0x122);const _0xd71818=auth['currentUser'];if(_0xd71818){const _0x498e1a=document['getElementById'](_0x3f2bad(0x144));if(_0x498e1a&&_0xd71818[_0x3f2bad(0x1f0)])_0x498e1a['value']=_0xd71818['displayName'];else _0x498e1a&&(_0x498e1a['value']=_0xd71818['email']);}}_0x355993['classList'][_0x3f2bad(0x365)]('active');}async function loadArticleData(_0x141c4b){const _0x182359=a4_0x274793;try{const _0x5f430b=doc(db,_0x182359(0x278),_0x141c4b),_0x5f13bb=await getDoc(_0x5f430b);if(!_0x5f13bb['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x429f23=_0x5f13bb['data']();document['getElementById'](_0x182359(0x34e))[_0x182359(0x323)]=_0x429f23['title']||'',document['getElementById'](_0x182359(0x144))['value']=_0x429f23['author']||'',document[_0x182359(0x119)]('article-image-url')['value']=_0x429f23['imageUrl']||'',document[_0x182359(0x119)](_0x182359(0x1a7))[_0x182359(0x323)]=_0x429f23['content']||'';}catch(_0x21911b){console[_0x182359(0x1f7)]('Error\x20loading\x20article\x20data:',_0x21911b),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x25c851=a4_0x274793;try{const _0x4e4b8b=document['getElementById'](_0x25c851(0x22e))['value'],_0x2426a8=document['getElementById']('article-title')[_0x25c851(0x323)]['trim'](),_0x4de670=document['getElementById'](_0x25c851(0x144))[_0x25c851(0x323)]['trim'](),_0x293b98=document[_0x25c851(0x119)]('article-image-url')['value']['trim'](),_0x209313=document['getElementById']('article-content')['value']['trim']();if(!_0x2426a8||!_0x209313){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x514ece=auth['currentUser'];if(!_0x514ece){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x461e7f={'title':_0x2426a8,'author':_0x4de670,'imageUrl':_0x293b98||null,'content':_0x209313,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x514ece['email']};!_0x4e4b8b?(_0x461e7f[_0x25c851(0x1b3)]=serverTimestamp(),_0x461e7f['createdBy']=_0x514ece['email'],await addDoc(collection(db,_0x25c851(0x278)),_0x461e7f),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x4e4b8b),_0x461e7f),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0xda587){console['error'](_0x25c851(0x1ad),_0xda587),showNotification(_0x25c851(0x1ea)+_0xda587[_0x25c851(0x2ac)],'error');}}function closeArticleModal(){const _0x3dc5e4=a4_0x274793,_0x28086e=document['getElementById']('article-modal');_0x28086e&&_0x28086e['classList']['remove'](_0x3dc5e4(0x267));}async function confirmDeleteArticle(_0x47d5cc){const _0x4e0b33=a4_0x274793;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x4e0b33(0x278),_0x47d5cc)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x4e0b33(0x21f));}catch(_0x43635a){console['error']('Error\x20deleting\x20article:',_0x43635a),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x43635a['message'],'error');}}function setupTrophyManagementSection(){const _0x3576f5=a4_0x274793,_0x21cf52=document['getElementById']('load-trophies-data');_0x21cf52&&_0x21cf52[_0x3576f5(0x33c)]('click',function(){const _0x3ae4b2=_0x3576f5;this['classList'][_0x3ae4b2(0x365)](_0x3ae4b2(0x131)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x269976=document['getElementById']('assign-trophy-image');_0x269976&&(_0x269976['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x18264e=_0x3ae4b2;this['classList']['remove']('loading'),this[_0x18264e(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x3c5a12=>{const _0xe33a7f=_0x3ae4b2;console['error']('Error\x20loading\x20trophies:',_0x3c5a12),this[_0xe33a7f(0x15b)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x42e583=_0xe33a7f;this[_0x42e583(0x18b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x4ac236=document[_0x3576f5(0x119)]('create-new-trophy-btn');_0x4ac236&&_0x4ac236['addEventListener'](_0x3576f5(0x252),()=>{openTrophyModal();});const _0x3059a4=document['getElementById']('trophy-form');_0x3059a4&&_0x3059a4['addEventListener'](_0x3576f5(0x305),_0x4438b9=>{const _0x217ff7=_0x3576f5;_0x4438b9[_0x217ff7(0x1a9)](),saveTrophyDefinition();});const _0x1ed9fb=document[_0x3576f5(0x119)]('cancel-trophy-btn');_0x1ed9fb&&_0x1ed9fb['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x3ac0e5=>{_0x3ac0e5['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x2c8333=document['getElementById']('trophy-modal');_0x2c8333&&_0x2c8333['addEventListener']('click',_0xa4abca=>{const _0x4db5b8=_0x3576f5;_0xa4abca[_0x4db5b8(0x335)]===_0x2c8333&&closeTrophyModal();});const _0x53b256=document['getElementById'](_0x3576f5(0x330));_0x53b256&&_0x53b256['addEventListener'](_0x3576f5(0x252),_0x5a1c93=>{_0x5a1c93['target']===_0x53b256&&closeAssignTrophyModal();});const _0x2392e0=document['getElementById'](_0x3576f5(0x20a));_0x2392e0&&_0x2392e0['addEventListener']('submit',_0x47876a=>{_0x47876a['preventDefault'](),assignTrophyToPlayer();});const _0x5b86ac=document['getElementById']('cancel-assign-btn');_0x5b86ac&&_0x5b86ac['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x5af06e=document['getElementById']('trophy-image-url');_0x5af06e&&(_0x5af06e[_0x3576f5(0x33c)]('input',updateTrophyImagePreview),_0x5af06e[_0x3576f5(0x33c)]('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0xc88e8d=a4_0x274793,_0x198c69=document['getElementById']('trophy-image-url')['value'][_0xc88e8d(0x1d5)](),_0xb2f84a=document['getElementById']('trophy-image-preview');if(!_0xb2f84a){const _0x5e694e=document[_0xc88e8d(0x119)]('trophy-image-url')[_0xc88e8d(0x1b4)](_0xc88e8d(0x1a4)),_0x330512=document[_0xc88e8d(0x1e8)]('div');_0x330512['id']='trophy-image-preview',_0x330512['className']=_0xc88e8d(0x190),_0x5e694e['appendChild'](_0x330512);const _0x5e1e5d=document['createElement']('img');_0x5e1e5d['id']='trophy-preview-img',_0x5e1e5d[_0xc88e8d(0x2b1)]='Trophy\x20Preview',_0x5e1e5d[_0xc88e8d(0x152)]=function(){const _0x642e39=_0xc88e8d;this[_0x642e39(0x1a1)]=DEFAULT_TROPHY_IMAGE,this['classList'][_0x642e39(0x365)]('error');},_0x330512[_0xc88e8d(0x1dc)](_0x5e1e5d);}const _0x2f18cd=document['getElementById']('trophy-preview-img');_0x198c69?(_0x2f18cd['src']=_0x198c69,_0x2f18cd[_0xc88e8d(0x180)][_0xc88e8d(0x357)]=_0xc88e8d(0x24c),_0x2f18cd['classList'][_0xc88e8d(0x135)]('error')):(_0x2f18cd['src']=DEFAULT_TROPHY_IMAGE,_0x2f18cd[_0xc88e8d(0x180)]['display']='block');}async function loadTrophyDefinitions(){const _0x465921=a4_0x274793,_0x298c9c=document[_0x465921(0x119)](_0x465921(0x1fb));if(!_0x298c9c)return;_0x298c9c['innerHTML']=_0x465921(0x361);try{const _0x1b63d3=collection(db,'trophyDefinitions'),_0xdcc1ee=query(_0x1b63d3,orderBy('createdAt','desc')),_0x17952f=await getDocs(_0xdcc1ee);if(_0x17952f[_0x465921(0x33b)]){_0x298c9c['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x298c9c[_0x465921(0x18b)]='',_0x17952f['forEach'](_0x17032f=>{const _0x593b84=_0x465921,_0x5aa2f2=_0x17032f['data'](),_0x37e029=document['createElement']('tr'),_0x285c68=_0x5aa2f2[_0x593b84(0x1b3)]?new Date(_0x5aa2f2[_0x593b84(0x1b3)]['seconds']*0x3e8)[_0x593b84(0x2bd)]():'N/A';_0x37e029['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x5aa2f2['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5aa2f2[_0x593b84(0x328)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x5aa2f2[_0x593b84(0x328)]||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x5aa2f2[_0x593b84(0x273)]||_0x593b84(0x2d5))+'\x22>'+(_0x5aa2f2[_0x593b84(0x273)]||'common')+_0x593b84(0x1a3)+_0x285c68+_0x593b84(0x338)+_0x17032f['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x17032f['id']+_0x593b84(0x124)+_0x17032f['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x298c9c[_0x593b84(0x1dc)](_0x37e029);}),setupTrophyActionButtons();}catch(_0x5ad54a){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x5ad54a),_0x298c9c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x5ad54a['message']+_0x465921(0x243);}}function setupTrophyActionButtons(){const _0x3a3424=a4_0x274793;document['querySelectorAll']('.edit-trophy-btn')[_0x3a3424(0x258)](_0x4e9c34=>{_0x4e9c34['addEventListener']('click',_0x215c85=>{const _0x45911f=a4_0x5931,_0x3abdc7=_0x215c85['currentTarget'][_0x45911f(0x25b)]['id'];openTrophyModal(_0x3abdc7);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x36266e=>{_0x36266e['addEventListener']('click',_0x735f24=>{const _0x519103=_0x735f24['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x519103);});}),document['querySelectorAll'](_0x3a3424(0x163))['forEach'](_0x4cb324=>{_0x4cb324['addEventListener']('click',_0x5ac194=>{const _0x1d865d=a4_0x5931,_0x585661=_0x5ac194[_0x1d865d(0x298)]['dataset']['id'];confirmDeleteTrophy(_0x585661);});});}function openTrophyModal(_0x271b1d=null){const _0x287973=a4_0x274793,_0xe857fb=document[_0x287973(0x119)]('trophy-modal'),_0x14b993=document[_0x287973(0x119)]('trophy-modal-title'),_0x41b50f=document['getElementById'](_0x287973(0x2bc)),_0x3b2c54=document['getElementById']('trophy-id');_0x41b50f[_0x287973(0x13b)](),_0x3b2c54['value']='';const _0x514da3=document['getElementById'](_0x287973(0x19a));_0x514da3&&(_0x514da3['src']=DEFAULT_TROPHY_IMAGE,_0x514da3[_0x287973(0x15b)][_0x287973(0x135)]('error')),_0x271b1d?(_0x14b993['textContent']=_0x287973(0x346),_0x3b2c54['value']=_0x271b1d,loadTrophyData(_0x271b1d)):_0x14b993['textContent']=_0x287973(0x2c0),_0xe857fb['classList']['add']('active');}async function loadTrophyData(_0x145364){const _0x56a986=a4_0x274793;try{const _0x5a49c7=doc(db,_0x56a986(0x347),_0x145364),_0xa34e02=await getDoc(_0x5a49c7);if(!_0xa34e02[_0x56a986(0x2f0)]()){showNotification('Trophy\x20not\x20found',_0x56a986(0x1f7));return;}const _0x59a5ca=_0xa34e02['data']();document[_0x56a986(0x119)](_0x56a986(0x138))['value']=_0x59a5ca['name']||'',document['getElementById'](_0x56a986(0x348))['value']=_0x59a5ca['description']||'',document['getElementById']('trophy-image-url')['value']=_0x59a5ca['image']||'',document[_0x56a986(0x119)](_0x56a986(0x183))['value']=_0x59a5ca[_0x56a986(0x273)]||'common',updateTrophyImagePreview();}catch(_0x75c1c2){console['error'](_0x56a986(0x20e),_0x75c1c2),showNotification(_0x56a986(0x2bb),'error');}}async function saveTrophyDefinition(){const _0xf849c0=a4_0x274793;try{const _0x25bbfe=document['getElementById'](_0xf849c0(0x1a0))[_0xf849c0(0x323)],_0x2eab86=document['getElementById']('trophy-name')[_0xf849c0(0x323)]['trim'](),_0x52c97b=document['getElementById']('trophy-description')['value']['trim'](),_0x48271d=document[_0xf849c0(0x119)]('trophy-image-url')[_0xf849c0(0x323)][_0xf849c0(0x1d5)](),_0x1cede7=document['getElementById'](_0xf849c0(0x183))['value'];if(!_0x2eab86||!_0x52c97b||!_0x48271d){showNotification('All\x20fields\x20are\x20required','error');return;}const _0xec7b19=auth[_0xf849c0(0x286)];if(!_0xec7b19){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x2a98e4={'name':_0x2eab86,'description':_0x52c97b,'image':_0x48271d,'rarity':_0x1cede7,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xec7b19['email']};!_0x25bbfe?(_0x2a98e4[_0xf849c0(0x1b3)]=serverTimestamp(),_0x2a98e4['createdBy']=_0xec7b19['email'],await addDoc(collection(db,'trophyDefinitions'),_0x2a98e4),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x25bbfe),_0x2a98e4),showNotification(_0xf849c0(0x327),'success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x187eea){console['error'](_0xf849c0(0x15e),_0x187eea),showNotification(_0xf849c0(0x259)+_0x187eea['message'],_0xf849c0(0x1f7));}}function closeTrophyModal(){const _0x20e498=document['getElementById']('trophy-modal');_0x20e498&&_0x20e498['classList']['remove']('active');}async function confirmDeleteTrophy(_0x4aa2b0){const _0x4de781=a4_0x274793;if(!_0x4aa2b0){console['error'](_0x4de781(0x1d7));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x5937f9=auth['currentUser'];if(!_0x5937f9){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies',_0x4de781(0x1f7));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x4aa2b0),await deleteDoc(doc(db,_0x4de781(0x347),_0x4aa2b0)),showNotification(_0x4de781(0x2ff),'success'),loadTrophyDefinitions();}catch(_0x58e3c3){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x58e3c3),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x58e3c3[_0x4de781(0x2ac)],'error');}}async function openAssignTrophyModal(_0x220b54){const _0x4a7661=a4_0x274793;try{const _0x1d84b2=doc(db,'trophyDefinitions',_0x220b54),_0x4e763e=await getDoc(_0x1d84b2);if(!_0x4e763e['exists']()){showNotification('Trophy\x20not\x20found',_0x4a7661(0x1f7));return;}const _0x3c8631=_0x4e763e['data']();document['getElementById'](_0x4a7661(0x165))['value']=_0x220b54,document['getElementById'](_0x4a7661(0x218))['value']=_0x3c8631[_0x4a7661(0x328)],document['getElementById']('assign-trophy-image')[_0x4a7661(0x1a1)]=_0x3c8631[_0x4a7661(0x137)]||DEFAULT_TROPHY_IMAGE,document[_0x4a7661(0x119)]('assign-trophy-title')['textContent']=_0x3c8631[_0x4a7661(0x328)]||'Unnamed\x20Trophy',document[_0x4a7661(0x119)]('assign-trophy-description')[_0x4a7661(0x1c7)]=_0x3c8631['description']||'No\x20description';const _0x1211fa=document['getElementById'](_0x4a7661(0x21c));_0x1211fa['textContent']=_0x3c8631[_0x4a7661(0x273)]||_0x4a7661(0x2d5),_0x1211fa['className']='trophy-rarity\x20'+(_0x3c8631['rarity']||_0x4a7661(0x2d5));const _0x1bfad5=document[_0x4a7661(0x119)]('assign-trophy-modal');_0x1bfad5[_0x4a7661(0x15b)][_0x4a7661(0x365)]('active');}catch(_0x6d7641){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x6d7641),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x519ded=document['getElementById']('assign-trophy-modal');_0x519ded&&_0x519ded['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x3e0b0a=a4_0x274793;try{const _0x7bf6bd=document['getElementById']('assign-trophy-id')['value'],_0x43e950=document['getElementById'](_0x3e0b0a(0x218))[_0x3e0b0a(0x323)],_0x5a9396=document['getElementById']('assign-player-username')[_0x3e0b0a(0x323)]['trim'](),_0x558060=document[_0x3e0b0a(0x11b)](_0x3e0b0a(0x125))[_0x3e0b0a(0x323)];if(!_0x7bf6bd||!_0x5a9396){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x595b9e=auth[_0x3e0b0a(0x286)];if(!_0x595b9e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x31a906=null,_0x3208e9=null,_0x4b221e=null;if(_0x558060==='non-participant'){const _0x54b095=collection(db,'nonParticipants'),_0x24ad55=query(_0x54b095,where('username','==',_0x5a9396)),_0x2e5529=await getDocs(_0x24ad55);!_0x2e5529['empty']&&(_0x31a906=_0x2e5529['docs'][0x0],_0x3208e9=_0x31a906['id'],_0x4b221e=_0x31a906['data']());}else{const _0x204d04=_0x558060==='D1'?_0x3e0b0a(0x150):_0x558060==='D2'?'playersD2':'playersD3',_0x2c5f21=collection(db,_0x204d04),_0x3e1bea=query(_0x2c5f21,where('username','==',_0x5a9396)),_0x421a63=await getDocs(_0x3e1bea);!_0x421a63['empty']&&(_0x31a906=_0x421a63['docs'][0x0],_0x3208e9=_0x31a906['id'],_0x4b221e=_0x31a906['data']());}if(!_0x31a906){showNotification('Player\x20\x22'+_0x5a9396+_0x3e0b0a(0x242)+(_0x558060===_0x3e0b0a(0x27f)?_0x3e0b0a(0x12c):_0x558060+'\x20ladder'),'error');return;}const _0x3f1230=collection(db,'userTrophies'),_0x1c996e=query(_0x3f1230,where('userId','==',_0x3208e9),where('trophyId','==',_0x7bf6bd)),_0x102184=await getDocs(_0x1c996e);if(!_0x102184['empty']){showNotification(_0x3e0b0a(0x198)+_0x5a9396+_0x3e0b0a(0x148),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x3208e9,'playerUsername':_0x5a9396,'trophyId':_0x7bf6bd,'awardedAt':serverTimestamp(),'awardedBy':_0x595b9e['email'],'ladder':_0x558060}),showNotification(_0x3e0b0a(0x13c)+_0x43e950+'\x22\x20awarded\x20to\x20'+_0x5a9396,'success'),closeAssignTrophyModal();}catch(_0x1fbaad){console[_0x3e0b0a(0x1f7)]('Error\x20assigning\x20trophy:',_0x1fbaad),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x1fbaad['message'],'error');}}function setupInactivePlayersSection(){const _0x767309=a4_0x274793,_0x207f00=document['getElementById']('inactive-days-filter');_0x207f00&&_0x207f00[_0x767309(0x33c)]('change',function(){const _0x480c11=document['getElementById']('load-inactive-players-data');if(_0x480c11)_0x480c11['click']();});const _0x2c79d5=document['querySelector'](_0x767309(0x12d)),_0x942923=document[_0x767309(0x11b)]('.ladder-switch\x20input[value=\x22D2\x22]');_0x2c79d5&&_0x942923&&(_0x2c79d5['addEventListener']('change',function(){const _0xabe210=_0x767309;if(this[_0xabe210(0x1f9)]){currentLadder='D1';if(document['getElementById'](_0xabe210(0x344))['style']['display']!=='none'){const _0xca1b97=document['getElementById'](_0xabe210(0x2d3));if(_0xca1b97)_0xca1b97['click']();}}}),_0x942923[_0x767309(0x33c)]('change',function(){const _0x3a0518=_0x767309;if(this[_0x3a0518(0x1f9)]){currentLadder='D2';if(document['getElementById']('inactive-players')['style'][_0x3a0518(0x357)]!=='none'){const _0x24e891=document[_0x3a0518(0x119)]('load-inactive-players-data');if(_0x24e891)_0x24e891[_0x3a0518(0x252)]();}}}));const _0x504353=document['getElementById']('inactive-players-search');_0x504353&&_0x504353['addEventListener']('input',debounce(function(){const _0x1e834c=_0x767309,_0x5d8a05=_0x504353['value']['toLowerCase'](),_0x26508d=document['querySelectorAll'](_0x1e834c(0x19f));_0x26508d['forEach'](_0x502fdf=>{const _0x5487e6=_0x1e834c;if(_0x502fdf['querySelector']('.loading-cell')||_0x502fdf[_0x5487e6(0x11b)]('.empty-state')||_0x502fdf[_0x5487e6(0x11b)]('.error-state'))return;const _0x51b398=_0x502fdf['cells'][0x0]?.[_0x5487e6(0x1c7)]['toLowerCase']()||'',_0x55f183=_0x502fdf[_0x5487e6(0x2e9)][0x5]?.['textContent'][_0x5487e6(0x34b)]()||'';_0x51b398['includes'](_0x5d8a05)||_0x55f183['includes'](_0x5d8a05)?_0x502fdf['style']['display']='':_0x502fdf['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x3a3778){const _0x3e3f6e=_0x767309;if(_0x3a3778[_0x3e3f6e(0x335)]['closest']('.view-player-btn')){const _0x373a32=_0x3a3778['target']['closest']('.view-player-btn'),_0x7dc49a=_0x373a32[_0x3e3f6e(0x25b)]['username'];_0x7dc49a&&alert('View\x20player\x20details\x20for\x20'+_0x7dc49a+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x23bce8=a4_0x274793,_0xe43b5d=document['getElementById']('inactive-players-table-body');if(!_0xe43b5d)return;_0xe43b5d['innerHTML']=_0x23bce8(0x1c1);try{const _0x47c1cb=document['getElementById']('inactive-days-filter'),_0x52189d=_0x47c1cb?parseInt(_0x47c1cb[_0x23bce8(0x323)])||0x0:0x0,_0x323e12=collection(db,currentLadder==='D1'?'players':_0x23bce8(0x28f)),_0xaff574=await getDocs(_0x323e12);if(_0xaff574['empty']){_0xe43b5d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x57ffb7=[];_0xaff574['forEach'](_0x390b51=>{const _0x254ac2=_0x23bce8,_0x54c720=_0x390b51['data']();_0x57ffb7['push']({..._0x54c720,'id':_0x390b51['id'],'username':_0x54c720[_0x254ac2(0x303)]||'Unknown\x20Player'});}),console['log']('Found\x20'+_0x57ffb7['length']+_0x23bce8(0x336)+currentLadder+'\x20ladder');const _0x668a26=currentLadder==='D1'?'approvedMatches':_0x23bce8(0x170),_0x4cbef9=_0x57ffb7['map'](async _0x5ed836=>{const _0x4f10cf=_0x23bce8;try{const _0x37e243=collection(db,_0x668a26),_0x108950=query(_0x37e243,or(where('winnerUsername','==',_0x5ed836['username']),where(_0x4f10cf(0x17b),'==',_0x5ed836[_0x4f10cf(0x303)])),orderBy('approvedAt','desc'),limit(0x1)),_0x44f426=await getDocs(_0x108950);if(!_0x44f426[_0x4f10cf(0x33b)]){const _0x582076=_0x44f426['docs'][0x0]['data'](),_0x2f4d65=_0x582076['approvedAt']?new Date(_0x582076['approvedAt'][_0x4f10cf(0x291)]*0x3e8):null,_0x2ec409=new Date(),_0x18d95c=_0x2f4d65?Math['floor']((_0x2ec409-_0x2f4d65)/(0x3e8*0x3c*0x3c*0x18)):null,_0x1db80a=_0x582076[_0x4f10cf(0x195)]===_0x5ed836[_0x4f10cf(0x303)]?_0x582076['loserUsername']:_0x582076['winnerUsername'],_0x158850=_0x582076[_0x4f10cf(0x195)]===_0x5ed836['username']?'Won':'Lost';return{..._0x5ed836,'lastMatch':{'date':_0x2f4d65?_0x2f4d65['toLocaleDateString']():'N/A','opponent':_0x1db80a||'Unknown','result':_0x158850,'timestamp':_0x2f4d65||new Date(0x0),'daysSinceMatch':_0x18d95c||Number['MAX_SAFE_INTEGER']}};}else return{..._0x5ed836,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x4f10cf(0x2dc)]}};}catch(_0x530540){return console[_0x4f10cf(0x1f7)]('Error\x20fetching\x20matches\x20for\x20'+_0x5ed836['username']+':',_0x530540),{..._0x5ed836,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x485782=await Promise['all'](_0x4cbef9);_0x485782[_0x23bce8(0x128)]((_0x76d040,_0x40a987)=>_0x40a987['lastMatch']['daysSinceMatch']-_0x76d040['lastMatch']['daysSinceMatch']);_0x52189d>0x0&&(_0x485782=_0x485782['filter'](_0x430351=>_0x430351[_0x23bce8(0x292)]['daysSinceMatch']>=_0x52189d));_0xe43b5d[_0x23bce8(0x18b)]='';if(_0x485782['length']===0x0){_0xe43b5d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x485782[_0x23bce8(0x258)](_0x3dabbf=>{const _0x187fef=_0x23bce8,_0x544fd8=document['createElement']('tr'),_0x50b526=_0x3dabbf['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x3dabbf['lastMatch'][_0x187fef(0x310)]>0xe?'moderately-inactive':'';_0x544fd8[_0x187fef(0x334)]=_0x50b526,_0x544fd8[_0x187fef(0x18b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3dabbf['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3dabbf['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3dabbf['lastMatch']['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3dabbf['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x3dabbf['lastMatch'][_0x187fef(0x310)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+_0x187fef(0x345)+(_0x3dabbf[_0x187fef(0x292)]['date']==='Never\x20played'?'No\x20matches\x20found':_0x3dabbf['lastMatch']['result']+'\x20vs\x20'+_0x3dabbf['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x3dabbf['username']+_0x187fef(0x15f),_0xe43b5d['appendChild'](_0x544fd8);}),console['log']('Displaying\x20'+_0x485782['length']+'\x20inactive\x20players');}catch(_0xf6f1f9){console['error']('Error\x20loading\x20inactive\x20players:',_0xf6f1f9),_0xe43b5d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0xf6f1f9['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x5aac70=a4_0x274793;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x96e2b4=document[_0x5aac70(0x119)]('create-match-highlight-btn');_0x96e2b4&&_0x96e2b4[_0x5aac70(0x33c)]('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x251b28=document[_0x5aac70(0x119)]('create-creator-highlight-btn');_0x251b28&&_0x251b28['addEventListener'](_0x5aac70(0x252),function(){const _0xa90e83=_0x5aac70;console[_0xa90e83(0x314)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x116b57=document[_0x5aac70(0x119)]('create-achievement-highlight-btn');_0x116b57&&_0x116b57['addEventListener'](_0x5aac70(0x252),function(){const _0x3616bf=_0x5aac70;console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x3616bf(0x2d9));});}function openHighlightModal(_0x5e378e='match'){const _0x3c20a3=a4_0x274793;console['log'](_0x3c20a3(0x28c)+_0x5e378e);const _0xd92495=document[_0x3c20a3(0x119)]('highlight-modal'),_0x301daa=document[_0x3c20a3(0x119)]('highlight-form'),_0x1be439=document[_0x3c20a3(0x119)]('highlight-modal-title'),_0x40b431=document['getElementById']('highlight-id');if(!_0xd92495||!_0x301daa||!_0x1be439){console['error'](_0x3c20a3(0x2ae));return;}_0x301daa['reset'](),_0x40b431['value']='';const _0x575088=['match','creator',_0x3c20a3(0x2d9)],_0x3bc7de=!_0x575088['includes'](_0x5e378e);if(_0x3bc7de){const _0x4d8665=_0x5e378e;_0x40b431['value']=_0x4d8665,_0x1be439['textContent']='Loading...',loadHighlightDataAdmin(_0x4d8665);}else{const _0x5ee27c=_0x5e378e;document[_0x3c20a3(0x119)]('highlight-type')['value']=_0x5ee27c,_0x1be439['textContent']=_0x3c20a3(0x2ef)+getHighlightTypeName(_0x5ee27c),toggleHighlightFields(_0x5ee27c);const _0x4b35cb=auth['currentUser'];_0x4b35cb&&document['getElementById']('highlight-submitted-by')&&(document['getElementById'](_0x3c20a3(0x274))['value']=_0x4b35cb['displayName']||_0x4b35cb['email']);}_0xd92495['classList']['add'](_0x3c20a3(0x267));}function toggleHighlightFields(_0x54d962){const _0xfcbe3d=a4_0x274793;console[_0xfcbe3d(0x314)](_0xfcbe3d(0x296)+_0x54d962);const _0x751af0=document['getElementById'](_0xfcbe3d(0x239));if(!_0x751af0)return;const _0x365765=_0x751af0[_0xfcbe3d(0x216)](_0xfcbe3d(0x188));_0x365765[_0xfcbe3d(0x258)](_0x3348ed=>_0x3348ed['style']['display']='none');const _0x25fc86=document[_0xfcbe3d(0x119)](_0xfcbe3d(0x299));if(_0x25fc86)_0x25fc86['style']['display']=_0xfcbe3d(0x1d6);const _0x500aa1=['highlight-title-container','highlight-description-container',_0xfcbe3d(0x1e7)];_0x500aa1['forEach'](_0x5d13a6=>{const _0x475878=_0xfcbe3d,_0x5e0dc2=document[_0x475878(0x119)](_0x5d13a6);if(_0x5e0dc2)_0x5e0dc2[_0x475878(0x180)]['display']=_0x475878(0x24c);});if(_0x54d962===_0xfcbe3d(0x2c6)){const _0x6bac74=[_0xfcbe3d(0x315),_0xfcbe3d(0x1cb),'highlight-map-container','highlight-match-date-container','highlight-players-container',_0xfcbe3d(0x313)];_0x6bac74[_0xfcbe3d(0x258)](_0x541f9d=>{const _0x43d301=_0xfcbe3d,_0x2046b5=document['getElementById'](_0x541f9d);_0x2046b5&&(_0x541f9d==='highlight-players-container'?_0x2046b5['style'][_0x43d301(0x357)]='flex':_0x2046b5[_0x43d301(0x180)]['display']='block');});const _0x54435e=document['getElementById']('highlight-video-id');if(_0x54435e){_0x54435e[_0xfcbe3d(0x191)]=!![];const _0x45153c=_0x54435e['previousElementSibling'];if(_0x45153c)_0x45153c['innerHTML']=_0xfcbe3d(0x271);}if(_0x25fc86)_0x25fc86['style']['display']=_0xfcbe3d(0x24c);updateHighlightVideoPreview();}else{if(_0x54d962===_0xfcbe3d(0x129)){const _0x5b7642=['highlight-map-container',_0xfcbe3d(0x1be),'highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x5b7642['forEach'](_0x36fa97=>{const _0x26b395=document['getElementById'](_0x36fa97);if(_0x26b395)_0x26b395['style']['display']='block';});const _0x2da496=document['getElementById']('highlight-video-id');if(_0x2da496){_0x2da496[_0xfcbe3d(0x191)]=![];const _0x56d4b4=_0x2da496[_0xfcbe3d(0x1ec)];if(_0x56d4b4)_0x56d4b4[_0xfcbe3d(0x18b)]='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x54d962==='achievement'){const _0x2c39b9=[_0xfcbe3d(0x260),'highlight-achievement-type-container',_0xfcbe3d(0x222),'highlight-player-profile-container',_0xfcbe3d(0x12f),_0xfcbe3d(0x315)];_0x2c39b9['forEach'](_0x410da4=>{const _0x2005f7=_0xfcbe3d,_0x39735f=document[_0x2005f7(0x119)](_0x410da4);if(_0x39735f)_0x39735f['style']['display']=_0x2005f7(0x24c);});const _0x1f6f90=document[_0xfcbe3d(0x119)]('highlight-video-id');if(_0x1f6f90){_0x1f6f90[_0xfcbe3d(0x191)]=![];const _0xd7bfec=_0x1f6f90['previousElementSibling'];if(_0xd7bfec)_0xd7bfec['innerHTML']=_0xfcbe3d(0x23d);}}}}}async function loadHighlightDataAdmin(_0x121070){const _0x1c339a=a4_0x274793;try{const _0x3a5140=doc(db,_0x1c339a(0x2e2),_0x121070),_0x1e6455=await getDoc(_0x3a5140);if(!_0x1e6455['exists']()){showNotification(_0x1c339a(0x332),_0x1c339a(0x1f7));return;}const _0xe6ad23=_0x1e6455['data'](),_0x51513f=_0xe6ad23['type']||'match';document[_0x1c339a(0x119)]('highlight-modal-title')[_0x1c339a(0x1c7)]='Edit\x20'+getHighlightTypeName(_0x51513f),document[_0x1c339a(0x119)](_0x1c339a(0x2cb))['value']=_0x51513f,toggleHighlightFields(_0x51513f),document[_0x1c339a(0x119)]('highlight-title')['value']=_0xe6ad23['title']||'',document['getElementById']('highlight-description')['value']=_0xe6ad23[_0x1c339a(0x134)]||'',document['getElementById'](_0x1c339a(0x274))['value']=_0xe6ad23[_0x1c339a(0x2de)]||'';_0xe6ad23[_0x1c339a(0x36a)]&&(document[_0x1c339a(0x119)]('highlight-video-id')['value']=_0xe6ad23['videoId'],updateHighlightVideoPreview());if(_0x51513f==='match'){document['getElementById']('highlight-match-info')['value']=_0xe6ad23['matchInfo']||'',document[_0x1c339a(0x119)]('highlight-map')[_0x1c339a(0x323)]=_0xe6ad23['map']||'';if(_0xe6ad23['matchDate']){const _0x9be3b7=new Date(_0xe6ad23[_0x1c339a(0x2f4)][_0x1c339a(0x291)]*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x9be3b7[_0x1c339a(0x358)]()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')[_0x1c339a(0x323)]=_0xe6ad23['winnerName']||'',document[_0x1c339a(0x119)]('highlight-winner-score')['value']=_0xe6ad23['winnerScore']||'',document[_0x1c339a(0x119)]('highlight-loser-name')[_0x1c339a(0x323)]=_0xe6ad23['loserName']||'',document['getElementById']('highlight-loser-score')['value']=_0xe6ad23['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0xe6ad23['matchLink']||'';}else{if(_0x51513f==='creator')document['getElementById']('highlight-map')['value']=_0xe6ad23['map']||'',document['getElementById'](_0x1c339a(0x23f))['value']=_0xe6ad23['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0xe6ad23['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0xe6ad23['creatorImageUrl']||'';else _0x51513f==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0xe6ad23['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0xe6ad23['achievementType']||'',document[_0x1c339a(0x119)]('highlight-achievement-details')[_0x1c339a(0x323)]=_0xe6ad23['achievementDetails']||'',document[_0x1c339a(0x119)]('highlight-player-profile')['value']=_0xe6ad23['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0xe6ad23['achievementImageUrl']||'');}}catch(_0x57c036){console['error'](_0x1c339a(0x17d),_0x57c036),showNotification('Error\x20loading\x20highlight:\x20'+_0x57c036[_0x1c339a(0x2ac)],'error');}}async function saveHighlight(){const _0x41c71e=a4_0x274793;try{const _0x1196e8=document['getElementById']('highlight-id')?.['value']||'',_0x3a8204=document['getElementById'](_0x41c71e(0x2cb))?.['value']||'match',_0x432f74={'title':document['getElementById']('highlight-title')?.[_0x41c71e(0x323)]?.['trim']()||'','description':document[_0x41c71e(0x119)]('highlight-description')?.['value']?.['trim']()||'','submittedBy':document[_0x41c71e(0x119)](_0x41c71e(0x274))?.['value']?.[_0x41c71e(0x1d5)]()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.[_0x41c71e(0x1d5)]()||null,'type':_0x3a8204};if(!_0x432f74['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x3a8204==='match'){_0x432f74['matchInfo']=document['getElementById'](_0x41c71e(0x155))?.[_0x41c71e(0x323)]?.['trim']()||'',_0x432f74[_0x41c71e(0x2c4)]=document['getElementById'](_0x41c71e(0x14e))?.[_0x41c71e(0x323)]?.[_0x41c71e(0x1d5)]()||'';const _0x3a91ac=document['getElementById']('highlight-match-date'),_0x578237=_0x3a91ac?.['value']||'';_0x432f74['matchDate']=_0x578237?Timestamp[_0x41c71e(0x197)](new Date(_0x578237)):null,_0x432f74['winnerName']=document[_0x41c71e(0x119)]('highlight-winner-name')?.[_0x41c71e(0x323)]?.['trim']()||'',_0x432f74['winnerScore']=document['getElementById'](_0x41c71e(0x1b8))?.['value']?.[_0x41c71e(0x1d5)]()||'',_0x432f74['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x432f74['loserScore']=document['getElementById'](_0x41c71e(0x2a5))?.['value']?.['trim']()||'',_0x432f74['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.[_0x41c71e(0x1d5)]()||'';if(!_0x432f74['videoId']){showNotification(_0x41c71e(0x31a),'error');return;}}else{if(_0x3a8204==='creator'){_0x432f74['map']=document['getElementById'](_0x41c71e(0x14e))?.['value']?.['trim']()||'',_0x432f74['mapCreator']=document[_0x41c71e(0x119)](_0x41c71e(0x23f))?.['value']?.['trim']()||'',_0x432f74[_0x41c71e(0x337)]=document[_0x41c71e(0x119)](_0x41c71e(0x236))?.[_0x41c71e(0x323)]?.['trim']()||'',_0x432f74['creatorImageUrl']=document[_0x41c71e(0x119)](_0x41c71e(0x366))?.[_0x41c71e(0x323)]?.['trim']()||'';if(!_0x432f74[_0x41c71e(0x1ef)]){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x3a8204==='achievement'){_0x432f74['achievementPlayer']=document['getElementById'](_0x41c71e(0x246))?.['value']?.['trim']()||'',_0x432f74[_0x41c71e(0x276)]=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x432f74[_0x41c71e(0x1f6)]=document['getElementById'](_0x41c71e(0x35b))?.[_0x41c71e(0x323)]?.['trim']()||'',_0x432f74[_0x41c71e(0x281)]=document['getElementById']('highlight-player-profile')?.['value']?.[_0x41c71e(0x1d5)]()||'',_0x432f74['achievementImageUrl']=document[_0x41c71e(0x119)]('highlight-achievement-image')?.[_0x41c71e(0x323)]?.['trim']()||'';if(!_0x432f74['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x1196e8?(_0x432f74['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x1196e8),_0x432f74),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x432f74[_0x41c71e(0x1b3)]=serverTimestamp(),await addDoc(collection(db,_0x41c71e(0x2e2)),_0x432f74),showNotification(_0x41c71e(0x194),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x3279d6){console['error']('Error\x20saving\x20highlight:',_0x3279d6),showNotification('Error\x20saving\x20highlight:\x20'+_0x3279d6[_0x41c71e(0x2ac)],_0x41c71e(0x1f7));}}function closeHighlightModal(){const _0x5ed1d2=a4_0x274793,_0x567701=document['getElementById']('highlight-modal');if(_0x567701)_0x567701['classList'][_0x5ed1d2(0x135)]('active');}function getHighlightTypeName(_0x452f01){const _0x202da7=a4_0x274793;switch(_0x452f01){case _0x202da7(0x2c6):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return _0x202da7(0x235);default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x290b48=a4_0x274793,_0x5ca88b=document[_0x290b48(0x119)]('highlight-video-id'),_0x10d350=document['getElementById']('highlight-video-preview-container'),_0x5d06c2=document[_0x290b48(0x119)]('highlight-video-preview');if(!_0x5ca88b||!_0x5d06c2||!_0x10d350)return;const _0x3e4da0=_0x5ca88b['value']['trim']();_0x3e4da0&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x3e4da0)?(_0x5d06c2['src']='https://www.youtube.com/embed/'+_0x3e4da0,_0x10d350[_0x290b48(0x180)][_0x290b48(0x357)]='block'):(_0x5d06c2[_0x290b48(0x1a1)]='',_0x10d350['style'][_0x290b48(0x357)]='none');}async function loadHighlightsAdmin(){const _0x4ec721=a4_0x274793,_0x1540f0=document['getElementById']('highlights-table-body');if(!_0x1540f0)return;_0x1540f0['innerHTML']=_0x4ec721(0x33a);try{const _0x57cb3b=query(collection(db,'highlights'),orderBy(_0x4ec721(0x1b3),'desc')),_0x3d727e=await getDocs(_0x57cb3b);if(_0x3d727e['empty']){_0x1540f0[_0x4ec721(0x18b)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x1540f0[_0x4ec721(0x18b)]='',_0x3d727e[_0x4ec721(0x258)](_0x314038=>{const _0x38998c=_0x4ec721,_0x5800ef=_0x314038['data'](),_0x5c04b1=document['createElement']('tr'),_0xb82c0c=_0x5800ef[_0x38998c(0x1b3)]?new Date(_0x5800ef['createdAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';let _0x3819a6=_0x38998c(0x136),_0x5e2051='';switch(_0x5800ef['type']){case'match':_0x3819a6='Match',_0x5e2051='match-type';break;case'creator':_0x3819a6='Creator',_0x5e2051='creator-type';break;case'achievement':_0x3819a6='Achievement',_0x5e2051='achievement-type';break;}_0x5c04b1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5800ef['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x5e2051+'\x22>'+_0x3819a6+_0x38998c(0x355)+_0xb82c0c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5800ef['submittedBy']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5800ef[_0x38998c(0x36a)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x38998c(0x132))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x314038['id']+_0x38998c(0x306)+_0x314038['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1540f0['appendChild'](_0x5c04b1);}),document['querySelectorAll']('.edit-highlight-btn')[_0x4ec721(0x258)](_0x4b754f=>{_0x4b754f['addEventListener']('click',_0x3de2ea=>{openHighlightModal(_0x3de2ea['currentTarget']['dataset']['id']);});}),document[_0x4ec721(0x216)]('.delete-highlight-btn')['forEach'](_0xf3ace0=>{_0xf3ace0['addEventListener']('click',_0x128dbc=>{const _0x5adf56=a4_0x5931;confirmDeleteHighlight(_0x128dbc[_0x5adf56(0x298)][_0x5adf56(0x25b)]['id']);});});}catch(_0x473b25){console['error']('Error\x20loading\x20highlights:',_0x473b25),_0x1540f0[_0x4ec721(0x18b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x473b25[_0x4ec721(0x2ac)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x50ff11){const _0x16d000=a4_0x274793;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x50ff11)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x160c73){console[_0x16d000(0x1f7)]('Error\x20deleting\x20highlight:',_0x160c73),showNotification('Error\x20deleting\x20highlight:\x20'+_0x160c73[_0x16d000(0x2ac)],_0x16d000(0x1f7));}}function setupCreateTestMatchModal(){const _0x10b86d=a4_0x274793;console[_0x10b86d(0x314)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x1b0a74=document[_0x10b86d(0x119)]('create-test-match-modal'),_0x1ffddf=document['getElementById']('create-test-match-form');if(!_0x1b0a74){console[_0x10b86d(0x1f7)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x1ffddf){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x327a25=_0x1b0a74['cloneNode'](!![]);_0x1b0a74['parentNode']['replaceChild'](_0x327a25,_0x1b0a74);const _0x2a44cd=_0x327a25['querySelector']('#create-test-match-form');_0x327a25['addEventListener']('click',function(_0x5f2fe4){const _0x298872=_0x10b86d;_0x5f2fe4[_0x298872(0x335)]===_0x327a25&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x46109f=_0x327a25[_0x10b86d(0x11b)](_0x10b86d(0x2c1));_0x46109f&&_0x46109f['addEventListener']('click',function(_0xe98f32){const _0x23d595=_0x10b86d;_0xe98f32[_0x23d595(0x1a9)](),_0xe98f32['stopPropagation'](),console[_0x23d595(0x314)](_0x23d595(0x1e4)),closeCreateTestMatchModal();});const _0x4ea77b=_0x327a25[_0x10b86d(0x11b)](_0x10b86d(0x2a1));_0x4ea77b&&_0x4ea77b['addEventListener']('click',function(_0x15d226){const _0x166d23=_0x10b86d;_0x15d226[_0x166d23(0x1a9)](),_0x15d226[_0x166d23(0x300)](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x2a44cd){_0x2a44cd[_0x10b86d(0x33c)]('submit',function(_0x7d4e86){const _0x3e893e=_0x10b86d;_0x7d4e86['preventDefault'](),_0x7d4e86[_0x3e893e(0x300)](),console[_0x3e893e(0x314)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x507e79=_0x2a44cd['querySelector'](_0x10b86d(0x1d8));_0x507e79&&_0x507e79['addEventListener']('click',function(_0x13dae6){const _0x56a6bb=_0x10b86d;_0x13dae6[_0x56a6bb(0x1a9)](),_0x13dae6['stopPropagation'](),console['log'](_0x56a6bb(0x15a)),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x27f588=a4_0x274793;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x55e9c7=document['getElementById']('highlight-form');_0x55e9c7&&_0x55e9c7[_0x27f588(0x33c)](_0x27f588(0x305),_0x57c683=>{const _0x32e1c8=_0x27f588;_0x57c683[_0x32e1c8(0x1a9)](),saveHighlight();});const _0x4d2d7d=document['getElementById']('cancel-highlight-btn');_0x4d2d7d&&_0x4d2d7d[_0x27f588(0x33c)]('click',closeHighlightModal);const _0x5298ee=document['querySelector']('#highlight-modal\x20.close-btn');_0x5298ee&&_0x5298ee['addEventListener']('click',closeHighlightModal);const _0x4e919c=document['getElementById'](_0x27f588(0x153));_0x4e919c&&_0x4e919c['addEventListener']('click',_0x4e6748=>{_0x4e6748['target']===_0x4e919c&&closeHighlightModal();});const _0x296773=document['getElementById']('highlight-video-id');_0x296773&&_0x296773['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x283f61=a4_0x274793;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x57fd93=document[_0x283f61(0x119)](_0x283f61(0x29d)),_0x378085=document['getElementById']('matches-next-page');_0x57fd93&&_0x57fd93['addEventListener']('click',()=>{const _0x4ce5b4=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x4ce5b4]['page']-0x1);});_0x378085&&_0x378085[_0x283f61(0x33c)]('click',()=>{const _0x9c26c8=_0x283f61,_0xaa1809=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0xaa1809][_0x9c26c8(0x1db)]+0x1);});const _0xd3cc1e=document['getElementById']('apply-matches-filters'),_0x41ff9f=document['getElementById']('reset-matches-filters');_0xd3cc1e&&_0xd3cc1e['addEventListener']('click',applyMatchesFilters);_0x41ff9f&&_0x41ff9f['addEventListener'](_0x283f61(0x252),resetMatchesFilters);const _0x4c8422=document['getElementById']('matches-search');_0x4c8422&&_0x4c8422['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x5ad957=document['getElementById']('resimulate-match-btn');_0x5ad957&&_0x5ad957[_0x283f61(0x33c)]('click',openResimulateModal);const _0x43aa45=document['getElementById']('resimulate-modal');if(_0x43aa45){const _0x44abe2=_0x43aa45['querySelector'](_0x283f61(0x154));_0x44abe2&&_0x44abe2['addEventListener']('click',closeResimulateModal),_0x43aa45['addEventListener']('click',_0x599b69=>{_0x599b69['target']===_0x43aa45&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x4682cf=a4_0x274793;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x1dfb96=document[_0x4682cf(0x119)]('create-test-match-modal'),_0x16eef3=document['getElementById']('create-test-match-form');if(!_0x1dfb96){console[_0x4682cf(0x1f7)]('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x16eef3){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x16eef3[_0x4682cf(0x13b)]();const _0x68398f=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x125a7e=![];_0x68398f[_0x4682cf(0x258)](_0x1c4e07=>{const _0x1e31fe=_0x4682cf;console['log']('Found\x20radio\x20with\x20value:',_0x1c4e07[_0x1e31fe(0x323)]),_0x1c4e07[_0x1e31fe(0x323)]===currentLadder&&(_0x1c4e07['checked']=!![],_0x125a7e=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x125a7e){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x2e9f0a=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x2e9f0a&&(_0x2e9f0a['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x192b8a=document[_0x4682cf(0x119)](_0x4682cf(0x2b6));if(_0x192b8a){const _0xd06305=new Date()[_0x4682cf(0x358)]()['split']('T')[0x0];_0x192b8a['value']=_0xd06305;}_0x1dfb96['style']['display']='flex',_0x1dfb96['style']['visibility']='visible',_0x1dfb96['style'][_0x4682cf(0x20f)]='1',_0x1dfb96['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x3b692f=document[_0x4682cf(0x119)](_0x4682cf(0x1dd));_0x3b692f&&setTimeout(()=>{const _0x67ce28=_0x4682cf;_0x3b692f[_0x67ce28(0x161)]();},0x64);}function closeCreateTestMatchModal(){const _0x1f2a7e=a4_0x274793;console[_0x1f2a7e(0x314)]('Closing\x20create\x20test\x20match\x20modal');const _0x3eaf03=document['getElementById']('create-test-match-modal');if(!_0x3eaf03){console['error'](_0x1f2a7e(0x1fd));return;}_0x3eaf03['classList']['remove']('active'),_0x3eaf03['style'][_0x1f2a7e(0x20f)]='0',_0x3eaf03['style']['visibility']='hidden',setTimeout(()=>{const _0x17da98=_0x1f2a7e;!_0x3eaf03[_0x17da98(0x15b)][_0x17da98(0x166)]('active')&&(_0x3eaf03['style']['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0xc57dc5=a4_0x274793;console['log'](_0xc57dc5(0x227));try{const _0x2d503e=auth['currentUser'];if(!_0x2d503e){showNotification(_0xc57dc5(0x143),'error');return;}const _0x1b8094='D1',_0x1790fb='approvedMatches',_0x3e8d00={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0xc57dc5(0x2d8),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x2d503e['email'],'createdAt':serverTimestamp(),'createdBy':_0x2d503e[_0xc57dc5(0x32c)],'isTestMatch':!![],'ladder':_0x1b8094,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x2d503e['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x1790fb),_0x3e8d00),showNotification(_0xc57dc5(0x2e7),'success'),closeCreateTestMatchModal();}catch(_0x559a45){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x559a45),showNotification(_0xc57dc5(0x2df)+_0x559a45['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x5085cf=a4_0x274793;try{console[_0x5085cf(0x314)](_0x5085cf(0x120)),console['log']('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth[_0x5085cf(0x286)]);const _0x1f46be=collection(db,'players');console[_0x5085cf(0x314)]('Collection\x20reference\x20created:',_0x1f46be);const _0x2c4267=query(_0x1f46be,where('username','==','nonexistent'));console[_0x5085cf(0x314)]('Query\x20created:',_0x2c4267);const _0x3db75f=await getDocs(_0x2c4267);console['log'](_0x5085cf(0x214),_0x3db75f['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x3c7d41){console[_0x5085cf(0x1f7)](_0x5085cf(0x320),_0x3c7d41);}};function setupCreateTestMatchButton(){const _0x423014=a4_0x274793,_0x48f2bc=document['getElementById']('create-test-match-btn');if(!_0x48f2bc){console[_0x423014(0x1f7)](_0x423014(0x30e));return;}console['log'](_0x423014(0x364));const _0x39a67e=_0x48f2bc['cloneNode'](!![]);_0x48f2bc['parentNode']['replaceChild'](_0x39a67e,_0x48f2bc),_0x39a67e['addEventListener'](_0x423014(0x252),function(_0x796c4){const _0x33d1b7=_0x423014;_0x796c4[_0x33d1b7(0x1a9)](),_0x796c4['stopPropagation'](),console['log'](_0x33d1b7(0x295)),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x261b80=0x1){const _0x33241c=a4_0x274793,_0x2dc282=document['getElementById'](_0x33241c(0x177));if(!_0x2dc282)return;_0x2dc282[_0x33241c(0x18b)]=_0x33241c(0x248);try{const _0x4c7454=currentLadder['toLowerCase'](),_0x2054d1=matchesPagination[_0x4c7454],_0x1a01a0=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x33241c(0x1f8),_0x3fe90a=collection(db,_0x1a01a0);_0x261b80<=0x1?(_0x2054d1['page']=0x1,_0x2054d1['firstVisible']=null,_0x2054d1['lastVisible']=null):_0x2054d1['page']=_0x261b80;const _0xbc3070=getMatchesFilters();let _0x1394d0=_0x3fe90a;if(_0xbc3070['startDate']||_0xbc3070[_0x33241c(0x168)]||_0xbc3070['searchTerm']){let _0x40d16e=[];_0xbc3070['startDate']&&_0xbc3070['endDate']?(_0x40d16e['push'](where('approvedAt','>=',_0xbc3070[_0x33241c(0x220)]),where('approvedAt','<=',_0xbc3070['endDate'])),_0x1394d0=query(_0x3fe90a,..._0x40d16e)):_0x1394d0=query(_0x3fe90a,orderBy('approvedAt','desc'));}else _0x1394d0=query(_0x3fe90a,orderBy('approvedAt','desc'));_0x261b80>0x1&&_0x2054d1['lastVisible']?_0x1394d0=query(_0x1394d0,startAfter(_0x2054d1['lastVisible']),limit(PAGE_SIZE)):_0x1394d0=query(_0x1394d0,limit(PAGE_SIZE));const _0x33855f=await getDocs(_0x1394d0);!_0x33855f['empty']&&(_0x2054d1['firstVisible']=_0x33855f['docs'][0x0],_0x2054d1['lastVisible']=_0x33855f['docs'][_0x33855f[_0x33241c(0x226)]['length']-0x1]);let _0x5a52ac=![];if(!_0x33855f['empty']){const _0xdd22ea=query(_0x1394d0,startAfter(_0x2054d1['lastVisible']),limit(0x1)),_0xa56050=await getDocs(_0xdd22ea);_0x5a52ac=!_0xa56050[_0x33241c(0x33b)];}const _0x4f5797=document['getElementById']('matches-prev-page'),_0x515a73=document['getElementById']('matches-next-page'),_0x404120=document['getElementById']('matches-page-indicator');if(_0x4f5797)_0x4f5797[_0x33241c(0x288)]=_0x2054d1['page']<=0x1;if(_0x515a73)_0x515a73[_0x33241c(0x288)]=!_0x5a52ac;if(_0x404120)_0x404120['textContent']=_0x33241c(0x24e)+_0x2054d1[_0x33241c(0x1db)];if(_0x33855f['empty']){_0x2dc282['innerHTML']=_0x33241c(0x174);return;}_0x2dc282['innerHTML']='',_0x33855f[_0x33241c(0x258)](_0x3db637=>{const _0x4bc3ac=_0x33241c,_0x5c6e46=_0x3db637[_0x4bc3ac(0x2cf)](),_0x38373c=document[_0x4bc3ac(0x1e8)]('tr'),_0x1b9c8c=_0x5c6e46['approvedAt']?new Date(_0x5c6e46[_0x4bc3ac(0x22c)]['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x38373c['setAttribute'](_0x4bc3ac(0x18c),_0x3db637['id']),_0x38373c[_0x4bc3ac(0x210)]('data-ladder',currentLadder),_0x38373c[_0x4bc3ac(0x15b)][_0x4bc3ac(0x365)](_0x4bc3ac(0x2d4)),_0x38373c['innerHTML']=_0x4bc3ac(0x1c0)+_0x1b9c8c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x5c6e46['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x5c6e46['loserUsername']||'Unknown')+_0x4bc3ac(0x1f5)+(_0x5c6e46['winnerScore']||0x0)+_0x4bc3ac(0x24b)+(_0x5c6e46['loserScore']||0x0)+_0x4bc3ac(0x117)+(_0x5c6e46['mapPlayed']||'N/A')+_0x4bc3ac(0x19e)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x3db637['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x3db637['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2dc282['appendChild'](_0x38373c);}),setupMatchesActionButtons(),_0xbc3070[_0x33241c(0x199)]&&filterMatchesTable(),console[_0x33241c(0x314)](_0x33241c(0x35f)+_0x33855f[_0x33241c(0x176)]+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x2054d1['page']);}catch(_0x5c9f2f){console['error']('Error\x20loading\x20matches:',_0x5c9f2f),_0x2dc282[_0x33241c(0x18b)]=_0x33241c(0x284)+_0x5c9f2f[_0x33241c(0x2ac)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x3cf3ea,_0x19aae7){const _0xeaf2f=a4_0x274793;try{console['log']('Deleting\x20match\x20'+_0x3cf3ea+_0xeaf2f(0x26a)+_0x19aae7+'\x20ladder');const _0x3f41b6=auth['currentUser'];if(!_0x3f41b6){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0xae7200=_0x19aae7==='D1'?_0xeaf2f(0x245):_0x19aae7==='D2'?_0xeaf2f(0x170):'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0xae7200),showNotification(_0xeaf2f(0x151),'info'),await deleteDoc(doc(db,_0xae7200,_0x3cf3ea)),console['log']('Match\x20deleted\x20successfully'),showNotification(_0xeaf2f(0x2a0),_0xeaf2f(0x21f));const _0x5ee5c3=_0x19aae7['toLowerCase']();loadMatchesData(matchesPagination[_0x5ee5c3]['page']);}catch(_0x4a0878){console[_0xeaf2f(0x1f7)]('Error\x20deleting\x20match:',_0x4a0878),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x4a0878['message'],'error');}}function setupMatchesActionButtons(){const _0x35ae9d=a4_0x274793;console['log'](_0x35ae9d(0x266)),document[_0x35ae9d(0x216)]('.edit-match-btn')['forEach'](_0x37e88a=>{const _0x3c1218=_0x35ae9d;_0x37e88a['addEventListener'](_0x3c1218(0x252),_0x1a3ff5=>{const _0x57bbbe=_0x3c1218;_0x1a3ff5['preventDefault'](),_0x1a3ff5['stopPropagation']();const _0x134172=_0x1a3ff5[_0x57bbbe(0x298)][_0x57bbbe(0x25b)]['id'],_0x46bc12=_0x1a3ff5[_0x57bbbe(0x298)][_0x57bbbe(0x1b4)]('tr'),_0x32ccc6=_0x46bc12['dataset']['ladder'];console[_0x57bbbe(0x314)]('Edit\x20match\x20clicked:',_0x134172,_0x32ccc6),openEditMatchModal(_0x134172,_0x32ccc6);});}),document['querySelectorAll'](_0x35ae9d(0x280))[_0x35ae9d(0x258)](_0x20778d=>{const _0xe81e3f=_0x35ae9d;_0x20778d['addEventListener'](_0xe81e3f(0x252),_0x5e13c5=>{const _0x34819e=_0xe81e3f;_0x5e13c5['preventDefault'](),_0x5e13c5['stopPropagation']();const _0x125228=_0x5e13c5['currentTarget']['dataset']['id'],_0x2e0464=_0x5e13c5['currentTarget'][_0x34819e(0x1b4)]('tr'),_0xfd5579=_0x2e0464[_0x34819e(0x25b)]['ladder']||currentLadder;console[_0x34819e(0x314)](_0x34819e(0x31b),_0x125228,_0xfd5579),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x125228,_0xfd5579);});}),console['log'](_0x35ae9d(0x193));}function filterMatchesTable(){const _0xe94bb=a4_0x274793,_0x44a625=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x38f76c=document['querySelectorAll']('#matches-table-body\x20tr');let _0x246b6d=0x0;_0x38f76c['forEach'](_0x12dfdc=>{const _0x294800=a4_0x5931;if(_0x12dfdc['classList']['contains']('loading-cell')||_0x12dfdc[_0x294800(0x15b)]['contains']('empty-state')||_0x12dfdc[_0x294800(0x15b)]['contains']('error-state'))return;const _0x571a5a=_0x12dfdc['cells'][0x1]['textContent']['toLowerCase'](),_0x17214d=_0x12dfdc['cells'][0x2]['textContent'][_0x294800(0x34b)](),_0x1bcdd8=_0x12dfdc['cells'][0x4][_0x294800(0x1c7)]['toLowerCase']();_0x571a5a[_0x294800(0x12b)](_0x44a625)||_0x17214d['includes'](_0x44a625)||_0x1bcdd8[_0x294800(0x12b)](_0x44a625)?(_0x12dfdc['style']['display']='',_0x246b6d++):_0x12dfdc['style']['display']=_0x294800(0x1d6);});if(_0x246b6d===0x0&&_0x38f76c['length']>0x0){const _0x5b5ab6=document[_0xe94bb(0x119)]('matches-table-body'),_0x150401=_0x5b5ab6[_0xe94bb(0x11b)](_0xe94bb(0x34a));if(!_0x150401){const _0x328c1c=document['createElement']('tr');_0x328c1c[_0xe94bb(0x334)]='no-results',_0x328c1c['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x44a625+_0xe94bb(0x23a),_0x5b5ab6['appendChild'](_0x328c1c);}}else{const _0x3a14b3=document['querySelector'](_0xe94bb(0x34a));_0x3a14b3&&_0x3a14b3[_0xe94bb(0x135)]();}}function getMatchesFilters(){const _0xcb1708=a4_0x274793,_0x14f1cf=document[_0xcb1708(0x119)](_0xcb1708(0x2ad))['value']['toLowerCase'](),_0x364c12=document['getElementById']('matches-start-date')[_0xcb1708(0x323)],_0x32a6a5=document[_0xcb1708(0x119)](_0xcb1708(0x1c3))['value'];let _0x5bbde2=null,_0x129295=null;return _0x364c12&&(_0x5bbde2=new Date(_0x364c12),_0x5bbde2['setHours'](0x0,0x0,0x0,0x0),_0x5bbde2=Timestamp['fromDate'](_0x5bbde2)),_0x32a6a5&&(_0x129295=new Date(_0x32a6a5),_0x129295['setHours'](0x17,0x3b,0x3b,0x3e7),_0x129295=Timestamp['fromDate'](_0x129295)),{'searchTerm':_0x14f1cf,'startDate':_0x5bbde2,'endDate':_0x129295};}async function applyMatchesFilters(){const _0x457510=a4_0x274793,_0xd7e12f=currentLadder[_0x457510(0x34b)]();matchesPagination[_0xd7e12f]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x57b886=a4_0x274793;document['getElementById'](_0x57b886(0x297))['value']='',document['getElementById'](_0x57b886(0x1c3))['value']='',document[_0x57b886(0x119)]('matches-search')[_0x57b886(0x323)]='';const _0x276c92=currentLadder['toLowerCase']();matchesPagination[_0x276c92]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x17e02d,_0x333de5){const _0x47d8f9=a4_0x274793,_0x4b355b=document[_0x47d8f9(0x119)]('edit-match-modal');if(!_0x4b355b)return;try{const _0x29b6d6=_0x333de5==='D1'?'approvedMatches':_0x333de5==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3e0285=doc(db,_0x29b6d6,_0x17e02d),_0x3137fa=await getDoc(_0x3e0285);if(!_0x3137fa['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x5cce1c=_0x3137fa['data']();document['getElementById']('edit-match-id')['value']=_0x17e02d,document[_0x47d8f9(0x119)](_0x47d8f9(0x237))['value']=_0x333de5,document[_0x47d8f9(0x119)]('edit-match-winner')['value']=_0x5cce1c['winnerUsername']||'',document[_0x47d8f9(0x119)]('edit-match-winner-score')['value']=_0x5cce1c['winnerScore']||0x0,document[_0x47d8f9(0x119)]('edit-match-winner-suicides')['value']=_0x5cce1c['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x5cce1c['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x5cce1c['loserUsername']||'',document['getElementById']('edit-match-loser-score')['value']=_0x5cce1c[_0x47d8f9(0x1cf)]||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x5cce1c[_0x47d8f9(0x32f)]||0x0,document[_0x47d8f9(0x119)](_0x47d8f9(0x18d))['value']=_0x5cce1c['loserComment']||'',document[_0x47d8f9(0x119)]('edit-match-map')['value']=_0x5cce1c[_0x47d8f9(0x13f)]||'',document['getElementById'](_0x47d8f9(0x2e1))['value']=_0x5cce1c['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x5cce1c[_0x47d8f9(0x213)]||_0x5cce1c['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x5cce1c['winnerUsername']+_0x47d8f9(0x283)+_0x5cce1c['loserUsername'],_0x4b355b['classList']['add']('active');}catch(_0x2fd684){console[_0x47d8f9(0x1f7)]('Error\x20loading\x20match\x20data:',_0x2fd684),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0xed42c1=a4_0x274793,_0x3701c4=document['getElementById']('edit-match-modal');_0x3701c4&&_0x3701c4[_0xed42c1(0x15b)][_0xed42c1(0x135)]('active');}async function saveEditedMatch(){const _0x51a599=a4_0x274793;try{const _0x67ae09=document[_0x51a599(0x119)](_0x51a599(0x1cc))['value'],_0x653028=document['getElementById'](_0x51a599(0x237))['value'];if(!_0x67ae09||!_0x653028){showNotification(_0x51a599(0x17e),_0x51a599(0x1f7));return;}const _0x381091=_0x653028==='D1'?'approvedMatches':_0x653028==='D2'?_0x51a599(0x170):'approvedMatchesD3',_0x3dd933=document[_0x51a599(0x119)](_0x51a599(0x2e5))['value']['trim'](),_0x785ca7=parseInt(document['getElementById'](_0x51a599(0x268))[_0x51a599(0x323)]),_0xca9bff=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x4c0112=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x5a6f57=document['getElementById'](_0x51a599(0x353))[_0x51a599(0x323)]['trim'](),_0x26e273=parseInt(document[_0x51a599(0x119)]('edit-match-loser-score')['value']),_0x2a89de=parseInt(document['getElementById']('edit-match-loser-suicides')[_0x51a599(0x323)]),_0x4cf70f=document['getElementById']('edit-match-loser-comment')[_0x51a599(0x323)][_0x51a599(0x1d5)](),_0x29cd1d=document['getElementById']('edit-match-map')[_0x51a599(0x323)]['trim'](),_0xb0017e=document['getElementById']('edit-match-winner-demo')[_0x51a599(0x323)]['trim'](),_0x3cfa31=document['getElementById']('edit-match-loser-demo')[_0x51a599(0x323)]['trim']();if(!_0x3dd933||!_0x5a6f57){showNotification(_0x51a599(0x2fc),'error');return;}await updateDoc(doc(db,_0x381091,_0x67ae09),{'winnerUsername':_0x3dd933,'winnerScore':_0x785ca7,'winnerSuicides':_0xca9bff,'winnerComment':_0x4c0112,'loserUsername':_0x5a6f57,'loserScore':_0x26e273,'loserSuicides':_0x2a89de,'loserComment':_0x4cf70f,'mapPlayed':_0x29cd1d,'winnerDemoLink':_0xb0017e||null,'loserDemoLink':_0x3cfa31||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x51a599(0x286)]['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x653028['toLowerCase']()]['page']);}catch(_0x422764){console['error'](_0x51a599(0x35e),_0x422764),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x422764['message'],_0x51a599(0x1f7));}}async function openDeleteMatchModal(_0x6b0336,_0x36c63b){const _0x191700=a4_0x274793;try{const _0x1403d6=_0x36c63b==='D1'?'approvedMatches':_0x36c63b==='D2'?_0x191700(0x170):'approvedMatchesD3',_0x2dbcac=doc(db,_0x1403d6,_0x6b0336),_0x4a3149=await getDoc(_0x2dbcac);if(!_0x4a3149['exists']()){showNotification('Match\x20not\x20found',_0x191700(0x1f7));return;}const _0x13a4ce=_0x4a3149['data'](),_0x5539e1=document[_0x191700(0x119)](_0x191700(0x23e));_0x5539e1['dataset']['matchId']=_0x6b0336,_0x5539e1['dataset']['ladder']=_0x36c63b;const _0x4e2c0a=_0x13a4ce['approvedAt']?new Date(_0x13a4ce['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x191700(0x192),_0x5b88b5=document[_0x191700(0x119)]('delete-match-summary');_0x5b88b5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x4e2c0a+_0x191700(0x1fa)+_0x13a4ce[_0x191700(0x195)]+_0x191700(0x1fe)+_0x13a4ce['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x13a4ce['winnerScore']||0x0)+'\x20-\x20'+(_0x13a4ce['loserScore']||0x0)+_0x191700(0x2e4)+(_0x13a4ce[_0x191700(0x13f)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x36c63b+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5539e1['classList']['add']('active');}catch(_0x2f3d43){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x2f3d43),showNotification('Failed\x20to\x20load\x20match\x20data',_0x191700(0x1f7));}}function closeDeleteMatchModal(){const _0x4e7fa2=a4_0x274793,_0xb82f7c=document['getElementById']('delete-match-confirm-modal');_0xb82f7c&&(_0xb82f7c['classList']['remove']('active'),_0xb82f7c['removeAttribute']('data-match-id'),_0xb82f7c[_0x4e7fa2(0x233)]('data-ladder'));}async function confirmDeleteMatch(){const _0x15da8a=a4_0x274793,_0x2d2bba=document['getElementById'](_0x15da8a(0x23e)),_0x47f8e4=_0x2d2bba['dataset']['matchId'],_0x564ff6=_0x2d2bba['dataset']['ladder'];if(!_0x47f8e4||!_0x564ff6){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x24cb0f=_0x564ff6==='D1'?'approvedMatches':_0x564ff6==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x24cb0f,_0x47f8e4)),showNotification(_0x15da8a(0x2a0),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x564ff6['toLowerCase']()]['page']);}catch(_0x9e62d){console['error']('Error\x20deleting\x20match:',_0x9e62d),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x9e62d[_0x15da8a(0x2ac)],'error');}}async function saveHighlightChanges(){const _0x1e5aa6=a4_0x274793,_0x3496bf=document[_0x1e5aa6(0x119)]('edit-highlight-id')['value'],_0x4186dd=document['getElementById'](_0x1e5aa6(0x363))['value'];let _0x44fafe={'title':document[_0x1e5aa6(0x119)]('edit-highlight-title-input')[_0x1e5aa6(0x323)][_0x1e5aa6(0x1d5)](),'type':_0x4186dd,'description':document['getElementById'](_0x1e5aa6(0x201))['value']['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value']['trim'](),'submittedBy':auth['currentUser'][_0x1e5aa6(0x32c)]};if(_0x4186dd===_0x1e5aa6(0x2c6)){_0x44fafe[_0x1e5aa6(0x187)]=document['getElementById'](_0x1e5aa6(0x18f))[_0x1e5aa6(0x323)]['trim'](),_0x44fafe[_0x1e5aa6(0x2c4)]=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0x5d0d13=document[_0x1e5aa6(0x119)](_0x1e5aa6(0x1f4))['value'];_0x44fafe[_0x1e5aa6(0x2f4)]=_0x5d0d13?Timestamp['fromDate'](new Date(_0x5d0d13)):null,_0x44fafe['winnerName']=document[_0x1e5aa6(0x119)](_0x1e5aa6(0x31c))[_0x1e5aa6(0x323)]['trim'](),_0x44fafe['winnerScore']=document[_0x1e5aa6(0x119)]('edit-highlight-winnerScore-input')[_0x1e5aa6(0x323)]['trim'](),_0x44fafe[_0x1e5aa6(0x369)]=document['getElementById']('edit-highlight-loserName-input')['value'][_0x1e5aa6(0x1d5)](),_0x44fafe[_0x1e5aa6(0x1cf)]=document['getElementById']('edit-highlight-loserScore-input')['value']['trim'](),_0x44fafe['matchLink']=document['getElementById']('edit-highlight-matchLink-input')[_0x1e5aa6(0x323)]['trim'](),_0x44fafe['mapCreator']=null,_0x44fafe['mapVersion']=null,_0x44fafe['creatorImageUrl']=null,_0x44fafe['achievementPlayer']=null,_0x44fafe['achievementType']=null,_0x44fafe['achievementDetails']=null,_0x44fafe['playerProfileUrl']=null;}else{if(_0x4186dd==='creator')_0x44fafe['map']=document['getElementById']('edit-highlight-map-input')['value'][_0x1e5aa6(0x1d5)](),_0x44fafe[_0x1e5aa6(0x1ef)]=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x44fafe['mapVersion']=document[_0x1e5aa6(0x119)]('edit-highlight-mapVersion-input')['value']['trim'](),_0x44fafe['creatorImageUrl']=document['getElementById'](_0x1e5aa6(0x2b9))['value']['trim'](),_0x44fafe['matchInfo']=null,_0x44fafe['matchDate']=null,_0x44fafe[_0x1e5aa6(0x2ca)]=null,_0x44fafe['winnerScore']=null,_0x44fafe['loserName']=null,_0x44fafe['loserScore']=null,_0x44fafe[_0x1e5aa6(0x264)]=null,_0x44fafe['achievementPlayer']=null,_0x44fafe[_0x1e5aa6(0x276)]=null,_0x44fafe['achievementDetails']=null,_0x44fafe['playerProfileUrl']=null;else _0x4186dd==='achievement'&&(_0x44fafe[_0x1e5aa6(0x1cd)]=document['getElementById'](_0x1e5aa6(0x121))['value']['trim'](),_0x44fafe['achievementType']=document['getElementById'](_0x1e5aa6(0x215))['value']['trim'](),_0x44fafe['achievementDetails']=document['getElementById'](_0x1e5aa6(0x26e))['value'][_0x1e5aa6(0x1d5)](),_0x44fafe['playerProfileUrl']=document['getElementById'](_0x1e5aa6(0x12a))['value']['trim'](),_0x44fafe[_0x1e5aa6(0x187)]=null,_0x44fafe['map']=null,_0x44fafe['matchDate']=null,_0x44fafe[_0x1e5aa6(0x2ca)]=null,_0x44fafe['winnerScore']=null,_0x44fafe['loserName']=null,_0x44fafe[_0x1e5aa6(0x1cf)]=null,_0x44fafe[_0x1e5aa6(0x264)]=null,_0x44fafe['mapCreator']=null,_0x44fafe['mapVersion']=null,_0x44fafe['creatorImageUrl']=null);}try{if(_0x3496bf){_0x44fafe['updatedAt']=serverTimestamp();const _0x27f0d0=doc(db,'highlights',_0x3496bf);await updateDoc(_0x27f0d0,_0x44fafe),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x44fafe['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x1e5aa6(0x2e2)),_0x44fafe),showNotification('Highlight\x20added\x20successfully!',_0x1e5aa6(0x21f));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x8524d7){console['error']('Error\x20saving\x20highlight:',_0x8524d7),showNotification(_0x1e5aa6(0x2b4)+_0x8524d7['message'],'error');}}async function resimulateMatch(){const _0x2f41a9=a4_0x274793;try{const _0x5cc5a8=document['getElementById']('resimulate-match-id')['value'];if(!_0x5cc5a8){showNotification('Match\x20ID\x20is\x20required',_0x2f41a9(0x1f7));return;}const _0x4a151c=auth['currentUser'];if(!_0x4a151c){showNotification(_0x2f41a9(0x18e),'error');return;}const _0x29f2ee=currentLadder==='D1'?_0x2f41a9(0x245):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x41d0d1=doc(db,_0x29f2ee,_0x5cc5a8),_0x3a2eba=await getDoc(_0x41d0d1);if(!_0x3a2eba['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x4402b7=_0x3a2eba['data'](),_0x5510c2=_0x4402b7['approvedAt']?_0x4402b7[_0x2f41a9(0x22c)][_0x2f41a9(0x11a)]()['toLocaleString']():_0x4402b7['matchDate']?_0x4402b7['matchDate']['toDate']?_0x4402b7[_0x2f41a9(0x2f4)]['toDate']()['toLocaleString']():new Date(_0x4402b7['matchDate'])[_0x2f41a9(0x2bd)]():'Unknown',_0x121c12='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x4402b7['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x4402b7[_0x2f41a9(0x17b)]+_0x2f41a9(0x36b)+_0x4402b7['winnerScore']+'-'+_0x4402b7['loserScore']+_0x2f41a9(0x1d4)+(_0x4402b7[_0x2f41a9(0x13f)]||_0x4402b7[_0x2f41a9(0x2ea)]||'Unknown')+_0x2f41a9(0x142)+_0x5510c2+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x5cc5a8+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x2f41a9(0x1e6))['innerHTML']=_0x121c12,document['getElementById']('match-details-container')['style']['display']='block',document['getElementById'](_0x2f41a9(0x24d))['style']['display']='block',window['pendingResimulateData']={'matchId':_0x5cc5a8,'matchData':_0x4402b7,'ladder':currentLadder},showNotification(_0x2f41a9(0x1e9),'info');}catch(_0x480021){console['error']('Error\x20finding\x20match:',_0x480021),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x480021['message'],'error');}}async function confirmResimulateMatch(){const _0x2d4437=a4_0x274793;try{const {matchId:_0x3853d5,matchData:_0x260438,ladder:_0x5d27ce}=window['pendingResimulateData'];if(!_0x3853d5||!_0x260438){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0x2d4437(0x1f7));return;}const _0x1a9bc2=_0x5d27ce==='D1'?'players':_0x5d27ce==='D2'?'playersD2':_0x2d4437(0x2a8),_0x3d7390=_0x5d27ce==='D1'?_0x2d4437(0x2da):_0x5d27ce==='D2'?'eloHistoryD2':'eloHistoryD3',[_0xadac84,_0x4b4c8c]=await Promise['all']([getDocs(query(collection(db,_0x1a9bc2),where(_0x2d4437(0x303),'==',_0x260438['winnerUsername']))),getDocs(query(collection(db,_0x1a9bc2),where('username','==',_0x260438[_0x2d4437(0x17b)])))]);if(_0xadac84[_0x2d4437(0x33b)]||_0x4b4c8c['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x3f1f73=_0xadac84['docs'][0x0]['id'],_0x3e49d9=_0x4b4c8c['docs'][0x0]['id'],_0x1d750f=_0xadac84['docs'][0x0]['data'](),_0x1695ff=_0x4b4c8c[_0x2d4437(0x226)][0x0][_0x2d4437(0x2cf)](),[_0x31a541,_0x2d3827]=await Promise['all']([getDocs(query(collection(db,_0x3d7390),where('playerId','==',_0x3f1f73),where(_0x2d4437(0x272),'==',_0x3853d5))),getDocs(query(collection(db,_0x3d7390),where(_0x2d4437(0x2ba),'==',_0x3e49d9),where(_0x2d4437(0x272),'==',_0x3853d5)))]),_0x47f7c6=!_0x31a541[_0x2d4437(0x33b)],_0x1708c6=!_0x2d3827['empty'],_0x20eb56=_0x2d4437(0x1c2)+(_0x47f7c6?_0x2d4437(0x1b7):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x1708c6?'\x20Exists':_0x2d4437(0x16d))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x1d750f['eloRating']||'Unknown')+_0x2d4437(0x1e2)+(_0x1695ff['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x1d750f['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x1695ff['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x20eb56,document['getElementById']('validation-results-container')['style'][_0x2d4437(0x357)]=_0x2d4437(0x24c);if(_0x47f7c6&&_0x1708c6){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x26052b=_0x260438['approvedAt']||_0x260438['matchDate']||serverTimestamp(),[_0x557323,_0x419c0f]=await Promise['all']([getPlayerEloAtTime(_0x3f1f73,_0x26052b,_0x3d7390),getPlayerEloAtTime(_0x3e49d9,_0x26052b,_0x3d7390)]),{calculateElo:_0x450fa6}=await import(_0x2d4437(0x1bc)),{newWinnerRating:_0x52b1db,newLoserRating:_0x4ae9ed}=_0x450fa6(_0x557323,_0x419c0f),_0x4278be=_0x1d750f['position']||Number['MAX_SAFE_INTEGER'],_0x37d70c=_0x1695ff['position']||Number['MAX_SAFE_INTEGER'];let _0x4ab43d=_0x4278be,_0x4bb965=_0x37d70c;_0x4278be>_0x37d70c&&(_0x4ab43d=_0x37d70c,_0x4bb965=_0x37d70c+0x1);const _0x27c397=writeBatch(db),_0x2c7d30=doc(db,_0x1a9bc2,_0x3f1f73);_0x27c397['update'](_0x2c7d30,{'eloRating':_0x52b1db,'position':_0x4ab43d,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x10c3a6=doc(db,_0x1a9bc2,_0x3e49d9);_0x27c397['update'](_0x10c3a6,{'eloRating':_0x4ae9ed,'position':_0x4bb965,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x4278be>_0x37d70c){const _0x514d18=await getDocs(query(collection(db,_0x1a9bc2),where('position','>',_0x37d70c),where(_0x2d4437(0x234),'<',_0x4278be)));_0x514d18['forEach'](_0x587c00=>{const _0x28cad3=_0x2d4437,_0x3534fd=doc(db,_0x1a9bc2,_0x587c00['id']),_0x6bf1a9=_0x587c00['data']()['position'];_0x27c397[_0x28cad3(0x2a7)](_0x3534fd,{'position':_0x6bf1a9+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x47f7c6){const _0x1cb3fe=doc(collection(db,_0x3d7390));_0x27c397[_0x2d4437(0x1ee)](_0x1cb3fe,{'playerId':_0x3f1f73,'player':_0x260438['winnerUsername'],'previousElo':_0x557323,'newElo':_0x52b1db,'eloChange':_0x52b1db-_0x557323,'opponentId':_0x3e49d9,'opponent':_0x260438['loserUsername'],'matchResult':'win','previousPosition':_0x4278be,'newPosition':_0x4ab43d,'positionChange':_0x4ab43d-_0x4278be,'matchId':_0x3853d5,'timestamp':_0x26052b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5d27ce,'matchScore':_0x260438['winnerScore']+'-'+_0x260438['loserScore'],'mapPlayed':_0x260438['mapPlayed']||_0x260438[_0x2d4437(0x2ea)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x1708c6){const _0x4a8c1c=doc(collection(db,_0x3d7390));_0x27c397['set'](_0x4a8c1c,{'playerId':_0x3e49d9,'player':_0x260438['loserUsername'],'previousElo':_0x419c0f,'newElo':_0x4ae9ed,'eloChange':_0x4ae9ed-_0x419c0f,'opponentId':_0x3f1f73,'opponent':_0x260438['winnerUsername'],'matchResult':'loss','previousPosition':_0x37d70c,'newPosition':_0x4bb965,'positionChange':_0x4bb965-_0x37d70c,'matchId':_0x3853d5,'timestamp':_0x26052b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x2d4437(0x286)][_0x2d4437(0x185)],'gameMode':_0x5d27ce,'matchScore':_0x260438['winnerScore']+'-'+_0x260438['loserScore'],'mapPlayed':_0x260438[_0x2d4437(0x13f)]||_0x260438['mapName']||'Unknown','note':_0x2d4437(0x1f2)});}const _0xb87cb8=_0x5d27ce==='D1'?'approvedMatches':_0x5d27ce==='D2'?_0x2d4437(0x170):_0x2d4437(0x1f8),_0x110173=doc(db,_0xb87cb8,_0x3853d5);_0x27c397['update'](_0x110173,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x1d750f['eloRating'],'originalLoserElo':_0x1695ff[_0x2d4437(0x29c)],'originalWinnerPosition':_0x4278be,'originalLoserPosition':_0x37d70c,'resimulatedWinnerElo':_0x52b1db,'resimulatedLoserElo':_0x4ae9ed,'resimulatedWinnerPosition':_0x4ab43d,'resimulatedLoserPosition':_0x4bb965}),await _0x27c397[_0x2d4437(0x20c)]();const _0x14a065=(!_0x47f7c6?0x1:0x0)+(!_0x1708c6?0x1:0x0),_0x1920e2=_0x4278be!==_0x4ab43d||_0x37d70c!==_0x4bb965;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x14a065+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x557323+''+_0x52b1db+'\x20(+'+(_0x52b1db-_0x557323)+'),\x20')+('Loser\x20'+_0x419c0f+''+_0x4ae9ed+'\x20('+(_0x4ae9ed-_0x419c0f)+').\x20')+(''+(_0x1920e2?_0x2d4437(0x211)+_0x4278be+''+_0x4ab43d+',\x20Loser\x20'+_0x37d70c+''+_0x4bb965:'No\x20position\x20changes\x20needed.')),_0x2d4437(0x21f)),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0xd908a4){console['error'](_0x2d4437(0x1c4),_0xd908a4),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0xd908a4['message'],'error');}}async function getPlayerEloAtTime(_0x25ff88,_0x429ed4,_0x381b65){const _0x339f7f=a4_0x274793;try{const _0x3d20fb=_0x429ed4['toDate']?_0x429ed4['toDate']():new Date(_0x429ed4),_0x399bcb=query(collection(db,_0x381b65),where(_0x339f7f(0x2ba),'==',_0x25ff88),where('timestamp','<',_0x429ed4),orderBy('timestamp','desc'),limit(0x1)),_0x5f0406=await getDocs(_0x399bcb);if(!_0x5f0406['empty']){const _0x2da0f7=_0x5f0406[_0x339f7f(0x226)][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x25ff88+'\x20before\x20match:\x20'+_0x2da0f7[_0x339f7f(0x30a)]),_0x2da0f7['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x25ff88+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x956d5a){return console['error'](_0x339f7f(0x368)+_0x25ff88+':',_0x956d5a),0x4b0;}}function openResimulateModal(){const _0xc48eec=a4_0x274793;console['log']('openResimulateModal\x20called!');const _0x3226b0=document['getElementById'](_0xc48eec(0x22d));console['log']('Modal\x20element\x20found:',_0x3226b0);if(!_0x3226b0){console['error']('Modal\x20element\x20not\x20found!');return;}_0x3226b0['style']['display']='block',_0x3226b0[_0xc48eec(0x180)]['visibility']=_0xc48eec(0x33d),_0x3226b0['style'][_0xc48eec(0x20f)]='1',_0x3226b0['classList'][_0xc48eec(0x365)](_0xc48eec(0x267)),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log'](_0xc48eec(0x13a),window[_0xc48eec(0x2f3)](_0x3226b0)[_0xc48eec(0x357)]);const _0x26cb27=document['getElementById']('match-details-container'),_0x5bfe58=document[_0xc48eec(0x119)]('validation-results-container'),_0x34a516=document['getElementById']('confirm-resimulate-btn'),_0x188d75=document[_0xc48eec(0x119)]('resimulate-match-id');if(_0x26cb27)_0x26cb27['innerHTML']='';if(_0x5bfe58)_0x5bfe58['innerHTML']='';if(_0x34a516)_0x34a516['style'][_0xc48eec(0x357)]=_0xc48eec(0x1d6);if(_0x188d75)_0x188d75['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x1045bf=a4_0x274793;document['getElementById']('resimulate-modal')['style'][_0x1045bf(0x357)]='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a4_0x274793(0x145)]=confirmResimulateMatch,window[a4_0x274793(0x2a4)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x5514d6=a4_0x274793;console['log']('Loading\x20points\x20data...');try{await Promise[_0x5514d6(0x169)]([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully',_0x5514d6(0x21f));}catch(_0x1b168d){console['error'](_0x5514d6(0x2e6),_0x1b168d),showNotification(_0x5514d6(0x1e1)+_0x1b168d['message'],'error');}}function renderPointsOverview(_0x3d50c9){const _0x547b11=a4_0x274793,_0x3260cf=document['getElementById']('points-overview-table-body');if(!_0x3260cf)return;if(_0x3d50c9['length']===0x0){_0x3260cf[_0x547b11(0x18b)]=_0x547b11(0x181);return;}_0x3260cf['innerHTML']='',_0x3d50c9[_0x547b11(0x258)](_0x1411be=>{const _0x218048=_0x547b11,_0x3e6971=document[_0x218048(0x1e8)]('tr'),_0x5d853e=_0x1411be['displayName']||_0x1411be['username']||'Unknown\x20User',_0x4da95c=_0x1411be['email']||_0x218048(0x309),_0x4fa9ba=_0x1411be['points']||0x0,_0x2ad31c=_0x1411be['lastPointsModified']?new Date(_0x1411be[_0x218048(0x1b0)]['seconds']*0x3e8)[_0x218048(0x28a)]():'Never';_0x3e6971['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x5d853e+_0x218048(0x182)+_0x4da95c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x4fa9ba>0x3e8?'high-points':_0x4fa9ba>0x1f4?'medium-points':'low-points')+_0x218048(0x240)+_0x4fa9ba['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2ad31c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x1411be['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x1411be['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3260cf['appendChild'](_0x3e6971);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x475a2d=a4_0x274793;console[_0x475a2d(0x314)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x4c4b2e=document[_0x475a2d(0x216)](_0x475a2d(0x25c));console['log']('Found\x20'+_0x4c4b2e['length']+'\x20quick\x20edit\x20buttons'),_0x4c4b2e['forEach'](_0x1a0000=>{const _0x2d3745=_0x475a2d,_0x42e0b7=_0x1a0000['cloneNode'](!![]);_0x1a0000['parentNode'][_0x2d3745(0x1af)](_0x42e0b7,_0x1a0000);});const _0x622a7f=document['querySelectorAll']('.view-history-btn');console['log'](_0x475a2d(0x321)+_0x622a7f[_0x475a2d(0x27d)]+_0x475a2d(0x367)),_0x622a7f['forEach'](_0x4d7b55=>{const _0x396934=_0x475a2d,_0x581ff8=_0x4d7b55['cloneNode'](!![]);_0x4d7b55[_0x396934(0x141)]['replaceChild'](_0x581ff8,_0x4d7b55);}),document['querySelectorAll']('.quick-edit-btn')[_0x475a2d(0x258)](_0x51b115=>{const _0x252767=_0x475a2d;_0x51b115[_0x252767(0x33c)]('click',function(_0xbf107){const _0x47d852=_0x252767;_0xbf107[_0x47d852(0x1a9)](),_0xbf107['stopPropagation']();const _0x405aa0=this['dataset'][_0x47d852(0x249)];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x405aa0);if(!_0x405aa0){console[_0x47d852(0x1f7)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x405aa0);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x450271=>{_0x450271['addEventListener']('click',function(_0x56d80b){const _0x46284a=a4_0x5931;_0x56d80b['preventDefault'](),_0x56d80b['stopPropagation']();const _0x375e27=this[_0x46284a(0x25b)][_0x46284a(0x249)];console[_0x46284a(0x314)]('View\x20history\x20clicked\x20for\x20user:',_0x375e27);if(!_0x375e27){console['error'](_0x46284a(0x254));return;}this['style']['opacity']=_0x46284a(0x32d),setTimeout(()=>{const _0x2678b5=_0x46284a;this[_0x2678b5(0x180)]['opacity']='1';},0xc8),loadUserPointsHistory(_0x375e27);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x3aa434){const _0xa21714=a4_0x274793;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x3aa434);const _0x274ce0=document[_0xa21714(0x119)]('quick-edit-points-modal');if(!_0x274ce0){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification(_0xa21714(0x1bb),'info');const _0x2d4495=doc(db,'userProfiles',_0x3aa434),_0x1cca08=await getDoc(_0x2d4495);if(!_0x1cca08[_0xa21714(0x2f0)]()){showNotification('User\x20not\x20found','error');return;}const _0x3b094c=_0x1cca08['data']();console['log']('User\x20data\x20loaded:',_0x3b094c);const _0x2e6b1b=document[_0xa21714(0x119)]('quick-edit-user-id'),_0x10f15a=document[_0xa21714(0x119)]('quick-edit-display-name'),_0x1aea88=document['getElementById']('quick-edit-email'),_0x4297f3=document['getElementById']('quick-edit-current-points'),_0x10bc72=document['getElementById'](_0xa21714(0x25e));if(!_0x2e6b1b||!_0x10f15a||!_0x1aea88||!_0x4297f3||!_0x10bc72){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x2e6b1b['value']=_0x3aa434,_0x10f15a[_0xa21714(0x1c7)]=_0x3b094c['displayName']||_0x3b094c[_0xa21714(0x303)]||'Unknown\x20User',_0x1aea88[_0xa21714(0x1c7)]=_0x3b094c['email']||_0xa21714(0x309),_0x4297f3['textContent']=(_0x3b094c[_0xa21714(0x2d6)]||0x0)['toLocaleString'](),_0x10bc72['reset']();const _0x546f98=document['getElementById']('quick-add');_0x546f98&&(_0x546f98[_0xa21714(0x1f9)]=!![]);_0x274ce0['classList']['add']('active'),console[_0xa21714(0x314)](_0xa21714(0x2af));const _0x44dd03=document[_0xa21714(0x119)]('quick-points-amount');_0x44dd03&&setTimeout(()=>_0x44dd03['focus'](),0x64);}catch(_0x1e8048){console[_0xa21714(0x1f7)]('Error\x20opening\x20quick\x20edit\x20modal:',_0x1e8048),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x1e8048['message'],'error');}}function closeQuickEditModal(){const _0x2228a6=a4_0x274793,_0x3c8017=document['getElementById'](_0x2228a6(0x319));_0x3c8017&&_0x3c8017['classList']['remove']('active');}async function handleQuickEditPoints(_0x375067){const _0x92d236=a4_0x274793;_0x375067['preventDefault']();const _0x2abd80=document['getElementById']('quick-edit-user-id')['value'],_0x3f51ca=document[_0x92d236(0x11b)]('input[name=\x22quick-action\x22]:checked')['value'],_0x566a0f=parseInt(document['getElementById']('quick-points-amount')['value']),_0x446fe3=document['getElementById']('quick-points-reason')[_0x92d236(0x323)][_0x92d236(0x1d5)]();console['log']('Processing\x20points\x20edit:',{'userId':_0x2abd80,'action':_0x3f51ca,'amount':_0x566a0f,'reason':_0x446fe3});if(!_0x2abd80||!_0x566a0f||_0x566a0f<0x0){showNotification(_0x92d236(0x1d0),'error');return;}try{await modifyUserPoints(_0x2abd80,_0x3f51ca,_0x566a0f,_0x446fe3),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x92d236(0x356),'success'),console[_0x92d236(0x314)]('Points\x20updated\x20successfully\x20for\x20user:',_0x2abd80);}catch(_0x579485){console['error'](_0x92d236(0x275),_0x579485),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x579485[_0x92d236(0x2ac)],'error');}}async function searchUsersForPoints(){const _0x4628be=a4_0x274793,_0x1cb524=document['getElementById']('points-user-search')[_0x4628be(0x323)]['trim']()['toLowerCase'](),_0x1a47ba=document['getElementById'](_0x4628be(0x29e));if(!_0x1cb524||_0x1cb524[_0x4628be(0x27d)]<0x2){_0x1a47ba['innerHTML']='';return;}_0x1a47ba['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0xe67224=collection(db,'userProfiles'),_0xb678c2=await getDocs(_0xe67224),_0x38839c=[];_0xb678c2[_0x4628be(0x258)](_0x505aab=>{const _0x1522a3=_0x4628be,_0x4b38ef=_0x505aab[_0x1522a3(0x2cf)](),_0x5d87ba=(_0x4b38ef[_0x1522a3(0x1f0)]||_0x4b38ef['username']||'')[_0x1522a3(0x34b)](),_0x325295=(_0x4b38ef['email']||'')['toLowerCase']();(_0x5d87ba['includes'](_0x1cb524)||_0x325295[_0x1522a3(0x12b)](_0x1cb524))&&_0x38839c['push']({'id':_0x505aab['id'],..._0x4b38ef});});if(_0x38839c[_0x4628be(0x27d)]===0x0){_0x1a47ba['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x1a47ba[_0x4628be(0x18b)]='',_0x38839c[_0x4628be(0x258)](_0x4e6916=>{const _0x478946=_0x4628be,_0xb84a4e=document['createElement']('div');_0xb84a4e['className']='search-result-item',_0xb84a4e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x4e6916[_0x478946(0x1f0)]||_0x4e6916['username']||'Unknown')+_0x478946(0x325)+(_0x4e6916['email']||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x4e6916['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xb84a4e['addEventListener']('click',()=>selectUserForPoints(_0x4e6916)),_0x1a47ba['appendChild'](_0xb84a4e);});}catch(_0x3149a5){console['error'](_0x4628be(0x342),_0x3149a5),_0x1a47ba[_0x4628be(0x18b)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x106b05){const _0x575922=a4_0x274793;document[_0x575922(0x119)]('selected-user-name')['textContent']=_0x106b05['displayName']||_0x106b05['username']||'Unknown\x20User',document['getElementById'](_0x575922(0x2e8))[_0x575922(0x1c7)]=(_0x106b05['points']||0x0)['toLocaleString'](),document[_0x575922(0x119)]('selected-user-id')['value']=_0x106b05['id'],document[_0x575922(0x119)]('selected-user-info')['style']['display']='block',document['getElementById']('points-management-forms')[_0x575922(0x180)][_0x575922(0x357)]='block',document[_0x575922(0x119)]('user-search-results')[_0x575922(0x18b)]='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x766885){const _0x5c5742=a4_0x274793;_0x766885['preventDefault']();const _0x307adb=document[_0x5c5742(0x119)](_0x5c5742(0x31e))['value'],_0x5b5e9a=document[_0x5c5742(0x119)](_0x5c5742(0x1ae))[_0x5c5742(0x323)],_0x243ef2=parseInt(document[_0x5c5742(0x119)]('points-amount')['value']),_0x57c8fa=document['getElementById']('points-reason')['value']['trim']();if(!_0x307adb||!_0x243ef2||_0x243ef2<0x0){showNotification(_0x5c5742(0x333),_0x5c5742(0x1f7));return;}try{await modifyUserPoints(_0x307adb,_0x5b5e9a,_0x243ef2,_0x57c8fa),document['getElementById']('modify-points-form')['reset']();const _0x7c8dbb=doc(db,'userProfiles',_0x307adb),_0x453683=await getDoc(_0x7c8dbb);if(_0x453683['exists']()){const _0x1d8958=_0x453683[_0x5c5742(0x2cf)]();document['getElementById']('selected-user-points')['textContent']=(_0x1d8958['points']||0x0)[_0x5c5742(0x2bd)]();}showNotification(_0x5c5742(0x196),'success'),loadPointsHistory();}catch(_0x4b20f1){console['error']('Error\x20modifying\x20points:',_0x4b20f1),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x4b20f1['message'],'error');}}async function loadPointsHistory(){const _0x8cd88b=a4_0x274793,_0x412c77=document['getElementById']('points-history-table-body');if(!_0x412c77)return;_0x412c77[_0x8cd88b(0x18b)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x45ab35=collection(db,'pointsHistory'),_0x3ae264=query(_0x45ab35,orderBy('timestamp','desc'),limit(0x32)),_0x58a4ed=await getDocs(_0x3ae264);if(_0x58a4ed['empty']){_0x412c77['innerHTML']=_0x8cd88b(0x2b3);return;}_0x412c77[_0x8cd88b(0x18b)]='',_0x58a4ed[_0x8cd88b(0x258)](_0x2dbbed=>{const _0x448dbf=_0x8cd88b,_0x515323=_0x2dbbed['data'](),_0x338ddd=document[_0x448dbf(0x1e8)]('tr'),_0x58c991=_0x515323['timestamp']?new Date(_0x515323['timestamp']['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x5d7143='';switch(_0x515323['action']){case'add':_0x5d7143='Added\x20'+_0x515323['amount']+'\x20points';break;case'subtract':_0x5d7143='Subtracted\x20'+_0x515323['amount']+'\x20points';break;case'set':_0x5d7143=_0x448dbf(0x2e0)+_0x515323[_0x448dbf(0x217)]+_0x448dbf(0x1ab);break;default:_0x5d7143=_0x515323['action']+'\x20'+_0x515323['amount']+'\x20points';}_0x338ddd['innerHTML']=_0x448dbf(0x1c0)+_0x58c991+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x515323[_0x448dbf(0x1f0)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5d7143+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x515323['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x515323['previousPoints']||0x0)+'\x20\x20'+(_0x515323['newPoints']||0x0)+_0x448dbf(0x1d1)+(_0x515323['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x515323['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x412c77['appendChild'](_0x338ddd);});}catch(_0x415f17){console['error']('Error\x20loading\x20points\x20history:',_0x415f17),_0x412c77['innerHTML']=_0x8cd88b(0x21d)+_0x415f17['message']+_0x8cd88b(0x175);}}function filterPointsOverview(){const _0x42404d=a4_0x274793,_0x77be42=document['getElementById'](_0x42404d(0x2b5))['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0xda44e2=window['allUsersPoints']['filter'](_0x429e16=>{const _0x287261=_0x42404d,_0x3db881=(_0x429e16['displayName']||_0x429e16[_0x287261(0x303)]||'')['toLowerCase'](),_0x7c83d6=(_0x429e16['email']||'')['toLowerCase']();return _0x3db881[_0x287261(0x12b)](_0x77be42)||_0x7c83d6[_0x287261(0x12b)](_0x77be42);});renderPointsOverview(_0xda44e2);}function sortPointsOverview(){const _0x14f5a1=a4_0x274793,_0x3e9179=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x10955e=[...window['allUsersPoints']];switch(_0x3e9179){case'points-desc':_0x10955e['sort']((_0x4dc0f2,_0x52c45e)=>(_0x52c45e[_0x14f5a1(0x2d6)]||0x0)-(_0x4dc0f2['points']||0x0));break;case'points-asc':_0x10955e['sort']((_0x370ace,_0x5e6efd)=>(_0x370ace['points']||0x0)-(_0x5e6efd['points']||0x0));break;case _0x14f5a1(0x1b1):_0x10955e[_0x14f5a1(0x128)]((_0x4a2c61,_0x5ba102)=>{const _0x188772=_0x14f5a1,_0x1a0464=(_0x4a2c61['displayName']||_0x4a2c61['username']||'')['toLowerCase'](),_0x48f4a9=(_0x5ba102[_0x188772(0x1f0)]||_0x5ba102[_0x188772(0x303)]||'')[_0x188772(0x34b)]();return _0x1a0464['localeCompare'](_0x48f4a9);});break;case'name-desc':_0x10955e['sort']((_0x8aac50,_0x3b40bb)=>{const _0x2e35a6=_0x14f5a1,_0x5b943a=(_0x8aac50['displayName']||_0x8aac50['username']||'')['toLowerCase'](),_0x512abb=(_0x3b40bb['displayName']||_0x3b40bb['username']||'')[_0x2e35a6(0x34b)]();return _0x512abb[_0x2e35a6(0x1ac)](_0x5b943a);});break;}renderPointsOverview(_0x10955e);}async function handleAwardItem(_0x16e61a){const _0x50e44d=a4_0x274793;_0x16e61a['preventDefault']();const _0x4bc45b=document['getElementById']('selected-user-id')[_0x50e44d(0x323)],_0x47bc26=document['getElementById']('store-item-select')[_0x50e44d(0x323)],_0x3a3c3c=document['getElementById']('award-reason')['value']['trim']();if(!_0x4bc45b||!_0x47bc26){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x50e44d(0x1f7));return;}try{showNotification('Store\x20item\x20awarded\x20successfully',_0x50e44d(0x21f)),document['getElementById'](_0x50e44d(0x172))['reset']();}catch(_0x3c45d0){console['error']('Error\x20awarding\x20item:',_0x3c45d0),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x3c45d0['message'],'error');}}async function loadUserPointsHistory(_0x131795){const _0xa70086=a4_0x274793;try{const _0x384076=collection(db,'pointsHistory'),_0x10919a=query(_0x384076,where('userId','==',_0x131795),orderBy(_0xa70086(0x1a5),'desc')),_0x489597=await getDocs(_0x10919a);console['log'](_0xa70086(0x321)+_0x489597['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x131795),showNotification(_0xa70086(0x33f)+_0x489597['size']+'\x20points\x20history\x20entries','info');}catch(_0x9a0f59){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x9a0f59),showNotification(_0xa70086(0x24a),'error');}}async function initializeUserPointsField(){const _0x538982=a4_0x274793;try{console['log'](_0x538982(0x1bd));const _0x4e52df=collection(db,'userProfiles'),_0x47fe5e=await getDocs(_0x4e52df);if(_0x47fe5e['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x5be3aa=0x0,_0x40d5c7=0x0;const _0x173da0=writeBatch(db);let _0x440767=0x0;return console['log']('Found\x20'+_0x47fe5e['size']+'\x20users\x20to\x20check...'),_0x47fe5e[_0x538982(0x258)](_0xb6ab19=>{const _0x4a24db=_0x538982,_0x46109e=_0xb6ab19['data']();_0x46109e['points']===undefined||_0x46109e['points']===null?(_0x173da0['update'](_0xb6ab19[_0x4a24db(0x219)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x5be3aa++,_0x440767++,console[_0x4a24db(0x314)]('Queued\x20'+(_0x46109e['displayName']||_0x46109e['username']||_0x46109e[_0x4a24db(0x32c)]||'Unknown')+'\x20for\x20points\x20initialization')):(_0x40d5c7++,console['log']((_0x46109e['displayName']||_0x46109e[_0x4a24db(0x303)]||_0x46109e['email']||'Unknown')+_0x4a24db(0x1da)+_0x46109e['points'])),_0x440767>=0x1f4&&console['warn'](_0x4a24db(0x2c3));}),_0x5be3aa>0x0?(console[_0x538982(0x314)]('Committing\x20batch\x20update\x20for\x20'+_0x5be3aa+'\x20users...'),await _0x173da0['commit'](),console[_0x538982(0x314)]('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x5be3aa+_0x538982(0x2fb))):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console[_0x538982(0x314)](_0x538982(0x1ba)+_0x47fe5e['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x5be3aa+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x40d5c7),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x5be3aa+'\x20users.\x20'+_0x40d5c7+_0x538982(0x329),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x47fe5e[_0x538982(0x176)],'usersUpdated':_0x5be3aa,'usersAlreadyHadPoints':_0x40d5c7};}catch(_0x2dabe6){console[_0x538982(0x1f7)]('Error\x20initializing\x20points\x20field:',_0x2dabe6),showNotification(_0x538982(0x263)+_0x2dabe6['message'],_0x538982(0x1f7));throw _0x2dabe6;}}function addPointsMigrationButton(){const _0x5c82b6=a4_0x274793,_0x27c23d=document[_0x5c82b6(0x119)]('manage-points');if(!_0x27c23d)return;if(document[_0x5c82b6(0x119)](_0x5c82b6(0x287)))return;const _0x7b7a6f=document[_0x5c82b6(0x1e8)](_0x5c82b6(0x160));_0x7b7a6f[_0x5c82b6(0x334)]='migration-section',_0x7b7a6f[_0x5c82b6(0x180)]['marginBottom']='20px',_0x7b7a6f['style']['padding']=_0x5c82b6(0x21b),_0x7b7a6f['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x7b7a6f[_0x5c82b6(0x180)]['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x7b7a6f[_0x5c82b6(0x180)][_0x5c82b6(0x202)]=_0x5c82b6(0x1d2),_0x7b7a6f[_0x5c82b6(0x18b)]=_0x5c82b6(0x1ed);const _0x2bb78f=_0x27c23d['querySelector']('.section-header');_0x2bb78f&&_0x2bb78f[_0x5c82b6(0x2be)]('afterend',_0x7b7a6f),document['getElementById']('migrate-points-btn')[_0x5c82b6(0x33c)]('click',async function(){const _0x28f5a1=_0x5c82b6;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this[_0x28f5a1(0x288)]=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0x28f5a1(0x25d),this['style'][_0x28f5a1(0x16f)]='#28a745',setTimeout(()=>{const _0x119971=_0x28f5a1;_0x7b7a6f['style']['display']=_0x119971(0x1d6);},0xbb8);}catch(_0x3d5b3e){this[_0x28f5a1(0x18b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x1f9598=a4_0x274793;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0xa9dd4=document[_0x1f9598(0x119)](_0x1f9598(0x14d));_0xa9dd4&&_0xa9dd4['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x4128ce=document['getElementById']('modify-points-form');_0x4128ce&&_0x4128ce['addEventListener']('submit',handleModifyPoints);const _0x56e167=document['getElementById']('award-item-form');_0x56e167&&_0x56e167[_0x1f9598(0x33c)](_0x1f9598(0x305),handleAwardItem);const _0x3f147d=document[_0x1f9598(0x119)]('points-overview-search');_0x3f147d&&_0x3f147d['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0xc1703c=document[_0x1f9598(0x119)]('points-sort-order');_0xc1703c&&_0xc1703c['addEventListener']('change',sortPointsOverview);const _0x3da94e=document['getElementById']('refresh-points-overview');_0x3da94e&&_0x3da94e['addEventListener']('click',loadPointsOverview);const _0x1b92b1=document['getElementById']('quick-edit-points-modal');if(_0x1b92b1){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x37f80a=_0x1b92b1[_0x1f9598(0x11b)]('.close-btn');_0x37f80a?_0x37f80a['addEventListener'](_0x1f9598(0x252),function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x32b9c0=document[_0x1f9598(0x119)]('cancel-quick-edit');_0x32b9c0?_0x32b9c0[_0x1f9598(0x33c)](_0x1f9598(0x252),function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x2f69a9=document[_0x1f9598(0x119)]('quick-edit-points-form');_0x2f69a9?_0x2f69a9['addEventListener'](_0x1f9598(0x305),function(_0x420d8e){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x420d8e);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x1b92b1['addEventListener']('click',function(_0x2b589d){_0x2b589d['target']===_0x1b92b1&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error'](_0x1f9598(0x2eb));console['log']('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0xa1f15a=a4_0x274793;console['log'](_0xa1f15a(0x157));const _0x10e083=document['getElementById'](_0xa1f15a(0x11e));_0x10e083&&_0x10e083[_0xa1f15a(0x33c)]('input',debounce(searchRibbonUser,0x12c));const _0x38c765=document['getElementById'](_0xa1f15a(0x22f));_0x38c765&&_0x38c765['addEventListener']('click',searchRibbonUser);const _0x41b82c=document['getElementById']('add-ribbon-form');_0x41b82c&&_0x41b82c[_0xa1f15a(0x33c)]('submit',addRibbon),_0x10e083&&_0x10e083[_0xa1f15a(0x33c)]('keypress',function(_0x42e8e4){const _0x48c237=_0xa1f15a;_0x42e8e4[_0x48c237(0x17f)]==='Enter'&&(_0x42e8e4['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x5963ca,_0xb0a5a4,_0x4a9cfb,_0x2bf2a6=''){const _0x3e0e51=a4_0x274793,_0x5ab532=doc(db,'userProfiles',_0x5963ca),_0x3645cc=await getDoc(_0x5ab532);if(!_0x3645cc['exists']())throw new Error('User\x20not\x20found');const _0x521ebf=_0x3645cc['data'](),_0x3bd4f7=_0x521ebf['points']!==undefined?_0x521ebf['points']:0x0;_0x521ebf[_0x3e0e51(0x2d6)]===undefined&&(console[_0x3e0e51(0x314)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x521ebf[_0x3e0e51(0x1f0)]||_0x521ebf['email']||'Unknown')),await updateDoc(_0x5ab532,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x1b5a92=_0x3bd4f7;switch(_0xb0a5a4){case'add':_0x1b5a92=_0x3bd4f7+_0x4a9cfb;break;case _0x3e0e51(0x2f6):_0x1b5a92=Math['max'](0x0,_0x3bd4f7-_0x4a9cfb);break;case _0x3e0e51(0x1ee):_0x1b5a92=_0x4a9cfb;break;default:throw new Error(_0x3e0e51(0x324));}await updateDoc(_0x5ab532,{'points':_0x1b5a92,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x5963ca,'userEmail':_0x521ebf[_0x3e0e51(0x32c)]||'unknown','displayName':_0x521ebf[_0x3e0e51(0x1f0)]||_0x521ebf[_0x3e0e51(0x303)]||'Unknown\x20User','action':_0xb0a5a4,'amount':_0x4a9cfb,'previousPoints':_0x3bd4f7,'newPoints':_0x1b5a92,'reason':_0x2bf2a6,'adminEmail':auth['currentUser'][_0x3e0e51(0x32c)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x6bcd9c=a4_0x274793,_0x42f4d6=document['getElementById'](_0x6bcd9c(0x290));if(!_0x42f4d6)return;_0x42f4d6['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x7ac841=collection(db,'userProfiles'),_0x1101e6=await getDocs(_0x7ac841);if(_0x1101e6['empty']){_0x42f4d6[_0x6bcd9c(0x18b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x591e7f=[];let _0x26c74d=0x0;_0x1101e6['forEach'](_0x4b10c5=>{const _0x1dbba4=_0x6bcd9c,_0x14b1c7=_0x4b10c5['data'](),_0x25659d=_0x14b1c7['points']!==undefined?_0x14b1c7[_0x1dbba4(0x2d6)]:0x0;_0x14b1c7['points']===undefined&&_0x26c74d++,_0x591e7f[_0x1dbba4(0x203)]({'id':_0x4b10c5['id'],..._0x14b1c7,'points':_0x25659d});}),_0x26c74d>0x0&&(console['log']('Found\x20'+_0x26c74d+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x26c74d+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x591e7f[_0x6bcd9c(0x128)]((_0x44c720,_0x231a84)=>(_0x231a84['points']||0x0)-(_0x44c720['points']||0x0)),window['allUsersPoints']=_0x591e7f,renderPointsOverview(_0x591e7f);}catch(_0x42f065){console[_0x6bcd9c(0x1f7)]('Error\x20loading\x20points\x20overview:',_0x42f065),_0x42f4d6['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x42f065['message']+_0x6bcd9c(0x175);}}async function loadRibbonsData(){const _0x42a4b7=a4_0x274793,_0x861c40=document['getElementById']('ribbons-overview-table-body');if(!_0x861c40)return;_0x861c40['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x589f44,_0x1dd691,_0x2fdafb]=await Promise[_0x42a4b7(0x169)]([getDocs(collection(db,_0x42a4b7(0x27a))),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x42a4b7(0x304)))]);_0x861c40['innerHTML']='';const _0x506eda=(_0x548017,_0x48d1c5)=>{_0x548017['forEach'](_0xdc29a0=>{const _0x80d293=a4_0x5931,_0x4a69ef=_0xdc29a0['data'](),_0x19cb12=_0x4a69ef[_0x80d293(0x2ab)]||{},_0x2e87e4=Object[_0x80d293(0x2d1)](_0x19cb12)['length'],_0x25d02d=document['createElement']('tr');_0x25d02d[_0x80d293(0x18b)]=_0x80d293(0x17c)+(_0x4a69ef[_0x80d293(0x303)]||_0x80d293(0x136))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x48d1c5['toLowerCase']()+'\x22>'+_0x48d1c5+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2e87e4+_0x80d293(0x130)+(_0x4a69ef['lastUpdated']?new Date(_0x4a69ef['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():_0x80d293(0x136))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x4a69ef['username']+'\x22\x20data-ladder=\x22'+_0x48d1c5+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x861c40['appendChild'](_0x25d02d);});};_0x506eda(_0x589f44,'D1'),_0x506eda(_0x1dd691,'D2'),_0x506eda(_0x2fdafb,'D3'),document[_0x42a4b7(0x216)](_0x42a4b7(0x12e))['forEach'](_0x3dcea7=>{const _0x20a167=_0x42a4b7;_0x3dcea7['addEventListener'](_0x20a167(0x252),function(){const _0x2da0d5=_0x20a167,_0x313a16=this[_0x2da0d5(0x25b)][_0x2da0d5(0x303)],_0x39600d=this['dataset']['ladder'];editUserRibbons(_0x313a16,_0x39600d);});}),showNotification(_0x42a4b7(0x2a6),'success');}catch(_0x50d7cf){console['error']('Error\x20loading\x20ribbons:',_0x50d7cf),_0x861c40['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x42a4b7(0x29a),'error');}}async function searchRibbonUser(){const _0x1ee668=a4_0x274793,_0x5aca5b=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x5aca5b){showNotification(_0x1ee668(0x2f2),'error');return;}try{const [_0x4ebc12,_0x4ccdda,_0x1d0188]=await Promise['all']([getDoc(doc(db,_0x1ee668(0x27a),_0x5aca5b)),getDoc(doc(db,'playerRibbonsD2',_0x5aca5b)),getDoc(doc(db,'playerRibbonsD3',_0x5aca5b))]);let _0x14cb1a=null,_0x57b827=null;if(_0x4ebc12['exists']())_0x14cb1a='D1',_0x57b827=_0x4ebc12['data']();else{if(_0x4ccdda['exists']())_0x14cb1a='D2',_0x57b827=_0x4ccdda['data']();else _0x1d0188['exists']()&&(_0x14cb1a='D3',_0x57b827=_0x1d0188['data']());}_0x14cb1a?(document[_0x1ee668(0x119)]('current-ribbon-user')[_0x1ee668(0x1c7)]=_0x5aca5b,document['getElementById']('ribbon-target-user')['value']=_0x5aca5b,document['getElementById'](_0x1ee668(0x208))['value']=_0x14cb1a,document['getElementById']('user-ribbon-management')['style']['display']='block',displayCurrentRibbons(_0x57b827['ribbons']||{}),showNotification(_0x1ee668(0x321)+_0x5aca5b+'\x20in\x20'+_0x14cb1a+'\x20ladder','success')):showNotification(_0x1ee668(0x257)+_0x5aca5b+_0x1ee668(0x2ee),_0x1ee668(0x1f7));}catch(_0x6b8bf1){console['error']('Error\x20searching\x20user:',_0x6b8bf1),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x37444b){const _0x6865c0=a4_0x274793,_0x3db935=document['getElementById']('current-ribbons-list');if(!_0x3db935)return;_0x3db935[_0x6865c0(0x18b)]='';if(Object['keys'](_0x37444b)['length']===0x0){_0x3db935['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x6865c0(0x1a2)](_0x37444b)[_0x6865c0(0x258)](([_0x43c52b,_0x48b9b7])=>{const _0x59c500=_0x6865c0,_0x16dcfb=document[_0x59c500(0x1e8)]('div');_0x16dcfb['className']='ribbon-item',_0x16dcfb[_0x59c500(0x18b)]=_0x59c500(0x164)+_0x43c52b+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x48b9b7['level']||0x1)+_0x59c500(0x29f)+(_0x48b9b7['awardedAt']?new Date(_0x48b9b7['awardedAt'][_0x59c500(0x291)]*0x3e8)[_0x59c500(0x28a)]():'Unknown')+_0x59c500(0x28d)+_0x43c52b+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3db935['appendChild'](_0x16dcfb);}),document[_0x6865c0(0x216)]('.remove-ribbon-btn')[_0x6865c0(0x258)](_0x872818=>{const _0x4ce459=_0x6865c0;_0x872818['addEventListener'](_0x4ce459(0x252),function(){const _0x506e62=_0x4ce459,_0x359792=this[_0x506e62(0x25b)][_0x506e62(0x225)];removeRibbon(_0x359792);});});}async function addRibbon(_0x257988){const _0x4dd4f8=a4_0x274793;_0x257988['preventDefault']();const _0x1aee2f=document[_0x4dd4f8(0x119)](_0x4dd4f8(0x1d3))['value'],_0x84e2aa=document['getElementById']('ribbon-target-ladder')[_0x4dd4f8(0x323)],_0x2227f3=document['getElementById']('ribbon-type-select')[_0x4dd4f8(0x323)],_0x326eed=parseInt(document[_0x4dd4f8(0x119)](_0x4dd4f8(0x15c))[_0x4dd4f8(0x323)]);if(!_0x1aee2f||!_0x84e2aa||!_0x2227f3||!_0x326eed){showNotification(_0x4dd4f8(0x261),'error');return;}try{const _0x11194c='playerRibbons'+(_0x84e2aa==='D1'?'':_0x84e2aa),_0x501d0a=doc(db,_0x11194c,_0x1aee2f),_0x3be326=await getDoc(_0x501d0a),_0x5d4a3a=_0x3be326['exists']()?_0x3be326[_0x4dd4f8(0x2cf)]()['ribbons']||{}:{};_0x5d4a3a[_0x2227f3]={'level':_0x326eed,'awardedAt':serverTimestamp()},await setDoc(_0x501d0a,{'username':_0x1aee2f,'ladder':_0x84e2aa,'ribbons':_0x5d4a3a,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x4dd4f8(0x30c)+_0x2227f3+'\x20Level\x20'+_0x326eed+'\x20to\x20'+_0x1aee2f,'success'),displayCurrentRibbons(_0x5d4a3a),document[_0x4dd4f8(0x119)]('ribbon-type-select')[_0x4dd4f8(0x323)]='',document['getElementById'](_0x4dd4f8(0x15c))['value']='1';}catch(_0x63f2bd){console['error']('Error\x20adding\x20ribbon:',_0x63f2bd),showNotification('Error\x20adding\x20ribbon',_0x4dd4f8(0x1f7));}}async function removeRibbon(_0xa2e9ce){const _0x151634=a4_0x274793,_0x24d96e=document['getElementById'](_0x151634(0x1d3))['value'],_0x34cdb8=document[_0x151634(0x119)]('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0xa2e9ce+'\x20from\x20'+_0x24d96e+'?'))return;try{const _0x4e8e6a='playerRibbons'+(_0x34cdb8==='D1'?'':_0x34cdb8),_0x42c037=doc(db,_0x4e8e6a,_0x24d96e),_0x3f013b=await getDoc(_0x42c037),_0x426464=_0x3f013b['exists']()?_0x3f013b['data']()[_0x151634(0x2ab)]||{}:{};delete _0x426464[_0xa2e9ce],await setDoc(_0x42c037,{'username':_0x24d96e,'ladder':_0x34cdb8,'ribbons':_0x426464,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0xa2e9ce+_0x151634(0x26a)+_0x24d96e,'success'),displayCurrentRibbons(_0x426464);}catch(_0xe19f0f){console['error']('Error\x20removing\x20ribbon:',_0xe19f0f),showNotification('Error\x20removing\x20ribbon',_0x151634(0x1f7));}}function editUserRibbons(_0x385033,_0xf01f68){document['getElementById']('ribbon-user-search')['value']=_0x385033,searchRibbonUser();}