function a0_0x6510(_0x3368ce,_0x2b1af9){const _0x6c506d=a0_0x5812();return a0_0x6510=function(_0xd9a2d3,_0x50f46c){_0xd9a2d3=_0xd9a2d3-0x148;let _0xf48578=_0x6c506d[_0xd9a2d3];return _0xf48578;},a0_0x6510(_0x3368ce,_0x2b1af9);}const a0_0x5a888e=a0_0x6510;(function(_0x3bd13f,_0x409f5a){const _0x144344=a0_0x6510,_0x402bb2=_0x3bd13f();while(!![]){try{const _0x17163a=-parseInt(_0x144344(0x15f))/0x1*(-parseInt(_0x144344(0x14c))/0x2)+-parseInt(_0x144344(0x162))/0x3+-parseInt(_0x144344(0x160))/0x4+parseInt(_0x144344(0x161))/0x5*(-parseInt(_0x144344(0x165))/0x6)+parseInt(_0x144344(0x157))/0x7*(-parseInt(_0x144344(0x155))/0x8)+-parseInt(_0x144344(0x15e))/0x9+parseInt(_0x144344(0x15d))/0xa*(parseInt(_0x144344(0x152))/0xb);if(_0x17163a===_0x409f5a)break;else _0x402bb2['push'](_0x402bb2['shift']());}catch(_0x4b65a9){_0x402bb2['push'](_0x402bb2['shift']());}}}(a0_0x5812,0x7d2a3));const a0_0x50f46c=(function(){let _0x329d83=!![];return function(_0x3dccc3,_0x5b39c5){const _0x31e465=_0x329d83?function(){const _0x3f49c4=a0_0x6510;if(_0x5b39c5){const _0x5b6f24=_0x5b39c5[_0x3f49c4(0x14e)](_0x3dccc3,arguments);return _0x5b39c5=null,_0x5b6f24;}}:function(){};return _0x329d83=![],_0x31e465;};}()),a0_0xd9a2d3=a0_0x50f46c(this,function(){const _0x300d3c=a0_0x6510;let _0x132204;try{const _0x2038bc=Function('return\x20(function()\x20'+_0x300d3c(0x14b)+');');_0x132204=_0x2038bc();}catch(_0x5a09f6){_0x132204=window;}const _0x8df32a=_0x132204[_0x300d3c(0x14f)]=_0x132204[_0x300d3c(0x14f)]||{},_0x1248a6=['log','warn','info','error',_0x300d3c(0x159),'table','trace'];for(let _0x51c17b=0x0;_0x51c17b<_0x1248a6['length'];_0x51c17b++){const _0xe79d67=a0_0x50f46c['constructor']['prototype']['bind'](a0_0x50f46c),_0x47f0dd=_0x1248a6[_0x51c17b],_0x55c8b3=_0x8df32a[_0x47f0dd]||_0xe79d67;_0xe79d67['__proto__']=a0_0x50f46c['bind'](a0_0x50f46c),_0xe79d67[_0x300d3c(0x167)]=_0x55c8b3[_0x300d3c(0x167)]['bind'](_0x55c8b3),_0x8df32a[_0x47f0dd]=_0xe79d67;}});a0_0xd9a2d3();import{db}from'./firebase-config.js';function a0_0x5812(){const _0x149a29=['2227944QxqJGL','./adminbackend.js','7alTkyT','\x20match\x20(Participant)','exception','log','userProfiles','Match\x20points:\x20','389260VmKpDB','8033004xUeDQO','2boHmEv','26768IPKBrr','535fGmkNV','1232925DnAFvr','system-match-award','\x20points\x20to\x20both\x20players\x20for\x20','39342nnghoc','modifyUserPoints','toString','all','add','\x20match','{}.constructor(\x22return\x20this\x22)(\x20)','973468qBPPaQ','Awarded\x20','apply','console','Standard','pointsHistory','517OfGjqF','.\x20New\x20total:\x20','Error\x20awarding\x20match\x20points:'];a0_0x5812=function(){return _0x149a29;};return a0_0x5812();}import{doc,getDoc,updateDoc,addDoc,collection,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const POINTS_CHART={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'â‰¥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let adminModifyUserPoints=null;try{const adminModule=await import(a0_0x5a888e(0x156));adminModule[a0_0x5a888e(0x166)]&&(adminModifyUserPoints=adminModule['modifyUserPoints'],console['log']('Admin\x20points\x20service\x20connected'));}catch(a0_0x11f71d){console['log']('Admin\x20backend\x20not\x20available,\x20using\x20fallback\x20points\x20service');}export async function awardMatchPoints(_0x3529e5,_0x17cb8e,_0x187f89){const _0x234114=a0_0x5a888e;try{const _0x2b6aef=POINTS_CHART[_0x187f89]||0xa;return adminModifyUserPoints?await Promise[_0x234114(0x148)]([adminModifyUserPoints(_0x3529e5,_0x234114(0x149),_0x2b6aef,'Match\x20points:\x20'+(_0x187f89||_0x234114(0x150))+'\x20match\x20(Winner)'),adminModifyUserPoints(_0x17cb8e,'add',_0x2b6aef,_0x234114(0x15c)+(_0x187f89||'Standard')+_0x234114(0x158))]):await Promise['all']([addPointsFallback(_0x3529e5,_0x2b6aef,_0x234114(0x15c)+(_0x187f89||_0x234114(0x150))+'\x20match\x20(Winner)'),addPointsFallback(_0x17cb8e,_0x2b6aef,'Match\x20points:\x20'+(_0x187f89||_0x234114(0x150))+'\x20match\x20(Participant)')]),console['log'](_0x234114(0x14d)+_0x2b6aef+_0x234114(0x164)+(_0x187f89||'Standard')+_0x234114(0x14a)),!![];}catch(_0x27ea90){return console['error'](_0x234114(0x154),_0x27ea90),![];}}async function addPointsFallback(_0x3dd049,_0xe80b7e,_0x3022d7=''){const _0x5922f9=a0_0x5a888e;try{const _0x4d3529=doc(db,_0x5922f9(0x15b),_0x3dd049),_0x18570c=await getDoc(_0x4d3529);if(!_0x18570c['exists']()){console['log']('User\x20profile\x20not\x20found\x20for\x20'+_0x3dd049+',\x20skipping\x20points\x20award');return;}const _0x135e0c=_0x18570c['data'](),_0x262e89=_0x135e0c['points']||0x0,_0x1c677f=_0x262e89+_0xe80b7e;await updateDoc(_0x4d3529,{'points':_0x1c677f,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x5922f9(0x151)),{'userId':_0x3dd049,'userEmail':_0x135e0c['email']||'unknown','displayName':_0x135e0c['displayName']||_0x135e0c['username']||'Unknown\x20User','action':'add','amount':_0xe80b7e,'previousPoints':_0x262e89,'newPoints':_0x1c677f,'reason':_0x3022d7,'adminEmail':_0x5922f9(0x163),'timestamp':serverTimestamp()}),console[_0x5922f9(0x15a)]('Added\x20'+_0xe80b7e+'\x20points\x20to\x20user\x20'+_0x3dd049+_0x5922f9(0x153)+_0x1c677f);}catch(_0x4cb5dd){console['error']('Error\x20adding\x20points\x20to\x20user:',_0x4cb5dd);throw _0x4cb5dd;}}