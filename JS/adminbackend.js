const a4_0xe70f19=a4_0x426c,a4_0xc38162=(function(){let _0x374681=!![];return function(_0x4ea69c,_0x54c377){const _0x3c7b0f=_0x374681?function(){if(_0x54c377){const _0x1641fa=_0x54c377['apply'](_0x4ea69c,arguments);return _0x54c377=null,_0x1641fa;}}:function(){};return _0x374681=![],_0x3c7b0f;};}()),a4_0x359c92=a4_0xc38162(this,function(){const _0x3b4169=a4_0x426c;let _0x20ff48;try{const _0x399066=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x20ff48=_0x399066();}catch(_0x30e6f7){_0x20ff48=window;}const _0x1608cc=_0x20ff48[_0x3b4169(0x276)]=_0x20ff48['console']||{},_0x5ad84c=['log','warn','info','error','exception','table','trace'];for(let _0x5c81e9=0x0;_0x5c81e9<_0x5ad84c[_0x3b4169(0x1a0)];_0x5c81e9++){const _0x2f96d0=a4_0xc38162['constructor'][_0x3b4169(0x2f0)]['bind'](a4_0xc38162),_0x3b8cd4=_0x5ad84c[_0x5c81e9],_0x151160=_0x1608cc[_0x3b8cd4]||_0x2f96d0;_0x2f96d0['__proto__']=a4_0xc38162['bind'](a4_0xc38162),_0x2f96d0['toString']=_0x151160[_0x3b4169(0x244)]['bind'](_0x151160),_0x1608cc[_0x3b8cd4]=_0x2f96d0;}});a4_0x359c92();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x3ae289){const _0x48c66a=a4_0x426c;if(!_0x3ae289)return'#ffffff';_0x3ae289=_0x3ae289['replace']('#','');_0x3ae289['length']===0x3&&(_0x3ae289=_0x3ae289[_0x48c66a(0xf3)]('')['map'](_0x518efd=>_0x518efd+_0x518efd)['join'](''));if(_0x3ae289['length']!==0x6)return'#ffffff';const _0x2c92f9=parseInt(_0x3ae289['substring'](0x0,0x2),0x10),_0x39d1a2=parseInt(_0x3ae289['substring'](0x2,0x4),0x10),_0x1f1b2d=parseInt(_0x3ae289['substring'](0x4,0x6),0x10),_0xcf31c6=(_0x2c92f9*0x12b+_0x39d1a2*0x24b+_0x1f1b2d*0x72)/0x3e8;return _0xcf31c6>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x33da01=>{const _0x3bd063=a4_0x426c;if(!_0x33da01){window[_0x3bd063(0x2d4)][_0x3bd063(0x311)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0xfdfd28){console['error']('Error\x20initializing\x20dashboard:',_0xfdfd28),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x2cadb1){const _0x21464d=a4_0x426c;if(!_0x2cadb1)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x2cadb1+'\x20in\x20all\x20collections...');const _0x59ae8e=[{'name':'userProfiles','displayName':_0x21464d(0x259)},{'name':_0x21464d(0x266),'displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x4b241d=auth['currentUser'];let _0x181809=null,_0x429e20=null;for(const _0xf4aee6 of _0x59ae8e){try{if(_0x4b241d){const _0xfcc9d8=doc(db,_0xf4aee6['name'],_0x4b241d[_0x21464d(0x199)]),_0x4c0665=await getDoc(_0xfcc9d8);if(_0x4c0665['exists']()){const _0x183eab=_0x4c0665['data']();console[_0x21464d(0x19f)]('Found\x20user\x20in\x20'+_0xf4aee6['displayName']+_0x21464d(0x1aa),_0x183eab);const _0x28cfbb=(_0x183eab['roleName']||_0x183eab[_0x21464d(0x269)]||'')['toLowerCase']();if(_0x28cfbb&&_0x28cfbb!=='none'){_0x181809=_0x28cfbb,_0x429e20=_0xf4aee6['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x181809+_0x21464d(0x1d5)+_0x429e20);break;}}}if(!_0x181809){const _0x114ca3=collection(db,_0xf4aee6['name']),_0x443a89=query(_0x114ca3,where('email','==',_0x2cadb1)),_0x4762d1=await getDocs(_0x443a89);if(!_0x4762d1['empty']){const _0x49b46f=_0x4762d1[_0x21464d(0x155)][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0xf4aee6['displayName']+'\x20with\x20email\x20'+_0x2cadb1+':',_0x49b46f);const _0x1a179f=(_0x49b46f[_0x21464d(0x286)]||_0x49b46f['role']||'')[_0x21464d(0x21d)]();if(_0x1a179f&&_0x1a179f!=='none'){_0x181809=_0x1a179f,_0x429e20=_0xf4aee6[_0x21464d(0x27b)],console[_0x21464d(0x19f)](_0x21464d(0x2a1)+_0x181809+'\x20in\x20'+_0x429e20);break;}}}}catch(_0x3bd407){console['error']('Error\x20checking\x20'+_0xf4aee6['displayName']+':',_0x3bd407);}}if(_0x181809){console['log'](_0x21464d(0x1b9)+_0x181809+'\x20(from\x20'+_0x429e20+')');const _0x3d1043={'admin':[_0x21464d(0x1f6),'manage-players',_0x21464d(0x327),_0x21464d(0x320),'manage-trophies','manage-ranks','inactive-players','settings','manage-trophies',_0x21464d(0x2bd),'manage-highlights','user-roles-section',_0x21464d(0x327),'manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players',_0x21464d(0x327),'manage-articles',_0x21464d(0x22e),'manage-ranks','inactive-players',_0x21464d(0x1ca),'manage-trophies','elo-history','manage-highlights',_0x21464d(0x1af),'manage-matches',_0x21464d(0x2be),'manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles',_0x21464d(0x22e),'elo-history',_0x21464d(0x2e6)]};if(_0x3d1043[_0x181809])return console['log']('Role\x20\x27'+_0x181809+'\x27\x20has\x20permissions:',_0x3d1043[_0x181809]),_0x3d1043[_0x181809];}return console['log'](_0x21464d(0x339)+_0x2cadb1+_0x21464d(0x2f7)),[_0x21464d(0x1f6)];}function setupSidebarNavigation(_0x439afe=[]){const _0x141c52=a4_0x426c,_0x1f28a8=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x338ada=document['querySelectorAll']('.admin-section');(!_0x439afe||_0x439afe[_0x141c52(0x1a0)]===0x0)&&(_0x439afe=['dashboard']);_0x1f28a8['forEach'](_0x4ab3c9=>{const _0xbbfa93=_0x141c52,_0x4e965e=_0x4ab3c9['getAttribute']('data-section');_0x439afe['includes'](_0x4e965e)?_0x4ab3c9[_0xbbfa93(0x2b6)]['display']='flex':_0x4ab3c9['style']['display']=_0xbbfa93(0x284),_0x4ab3c9['addEventListener']('click',()=>{const _0x59aca7=_0xbbfa93,_0x4705a4=_0x4ab3c9[_0x59aca7(0x1bb)]('data-section');if(!_0x439afe[_0x59aca7(0x20d)](_0x4705a4)){showNotification(_0x59aca7(0x2fa),'error');return;}_0x1f28a8['forEach'](_0x180bef=>_0x180bef['classList']['remove']('active')),_0x4ab3c9['classList']['add'](_0x59aca7(0x231)),_0x338ada['forEach'](_0x169cc7=>{const _0x53eec4=_0x59aca7;_0x169cc7['style'][_0x53eec4(0x1ef)]=_0x53eec4(0x284);});const _0x5d68e6=document['getElementById'](_0x4705a4);_0x5d68e6&&(_0x5d68e6['style']['display']='block',console['log']('Switched\x20to\x20'+_0x4705a4+_0x59aca7(0x234)));});});const _0x5e703f=document[_0x141c52(0x158)](_0x141c52(0x2a7)+_0x439afe[0x0]+'\x22]');_0x5e703f&&_0x5e703f[_0x141c52(0x10d)](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x5d49e1=a4_0x426c,_0x520345=document['querySelectorAll']('.nav-item');let _0x345283=null,_0x19d1a5=new Set();_0x520345[_0x5d49e1(0x1eb)](_0xd3d8df=>{_0xd3d8df['addEventListener']('click',function(){const _0x3bcfbe=a4_0x426c,_0x50c7f8=this['getAttribute']('data-section');if(_0x50c7f8===_0x345283)return;_0x345283&&(document['getElementById'](_0x345283)['style'][_0x3bcfbe(0x1ef)]='none',_0x520345[_0x3bcfbe(0x1eb)](_0x4afd44=>_0x4afd44[_0x3bcfbe(0x128)]['remove']('active'))),document['getElementById'](_0x50c7f8)['style'][_0x3bcfbe(0x1ef)]='block',this['classList']['add']('active'),_0x345283=_0x50c7f8;});});}function loadSectionData(_0x1be32e){return;}async function initializeAdminDashboard(){const _0x3dfec6=a4_0x426c;try{const _0x2272dd=auth[_0x3dfec6(0x14e)],_0x3b9c3d=await getUserTabPermissions(_0x2272dd['email']);console['log']('User\x20'+_0x2272dd[_0x3dfec6(0x10e)]+_0x3dfec6(0x291),_0x3b9c3d),window['userAllowedTabs']=_0x3b9c3d,setupSidebarNavigation(_0x3b9c3d),setupLadderSelector(),setupDashboardSection(),_0x3b9c3d['includes'](_0x3dfec6(0x16e))&&setupManagePlayersSection(),_0x3b9c3d['includes']('elo-history')&&setupEloHistorySection(),_0x3b9c3d[_0x3dfec6(0x20d)]('manage-ranks')&&setupRankControls(),_0x3b9c3d['includes']('manage-articles')&&setupManageArticlesSection(),_0x3b9c3d['includes'](_0x3dfec6(0x1af))&&setupUserRolesSection(),_0x3b9c3d['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x3b9c3d['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x3b9c3d['includes'](_0x3dfec6(0x30b))&&setupInactivePlayersSection(),_0x3b9c3d['includes']('manage-matches')&&setupManageMatchesSection(),_0x3b9c3d['includes'](_0x3dfec6(0x2be))&&setupManagePointsSection(),_0x3b9c3d[_0x3dfec6(0x20d)]('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x3b9c3d);}catch(_0x21596b){console[_0x3dfec6(0x2e4)]('Error\x20initializing\x20admin\x20dashboard:',_0x21596b);}}function setupDataLoadButtons(_0x750898=[]){const _0x284532=a4_0x426c;(!_0x750898||_0x750898['length']===0x0)&&(_0x750898=[_0x284532(0x1f6)]);const _0xb49661=document[_0x284532(0x17d)](_0x284532(0x10f));_0xb49661&&_0xb49661['addEventListener']('click',function(){const _0x4ffb81=_0x284532;this[_0x4ffb81(0x128)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x1e5a4b=_0x4ffb81;this['classList']['remove'](_0x1e5a4b(0x1e0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x4cde99=>{const _0x4a6495=_0x4ffb81;console['error'](_0x4a6495(0x170),_0x4cde99),this[_0x4a6495(0x128)]['remove']('loading'),this['innerHTML']=_0x4a6495(0x144),setTimeout(()=>{const _0x39b41e=_0x4a6495;this['innerHTML']=_0x39b41e(0xf4);},0xbb8);});});if(_0x750898['includes']('manage-trophies')){const _0x3e7026=document['getElementById']('load-trophies-data');_0x3e7026&&_0x3e7026[_0x284532(0x15d)]('click',function(){const _0x126de0=_0x284532;console['log'](_0x126de0(0x301)),this['classList'][_0x126de0(0x32f)](_0x126de0(0x1e0)),this['innerHTML']=_0x126de0(0x2a6),loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x88fd32=>{console['error']('Error\x20loading\x20trophies:',_0x88fd32),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2a5d5b=a4_0x426c;this[_0x2a5d5b(0x293)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x750898['includes']('manage-players')){const _0x3dd4b7=document[_0x284532(0x17d)]('load-players-data');_0x3dd4b7&&_0x3dd4b7[_0x284532(0x15d)]('click',function(){const _0x4ca5e2=_0x284532;console['log'](_0x4ca5e2(0x304)),this[_0x4ca5e2(0x128)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x4ca5e2(0x300)](()=>{const _0x100116=_0x4ca5e2;this['classList']['remove'](_0x100116(0x1e0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x586452=>{const _0x538793=_0x4ca5e2;console['error']('Error\x20loading\x20players:',_0x586452),this[_0x538793(0x128)]['remove'](_0x538793(0x1e0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4ff007=_0x538793;this['innerHTML']=_0x4ff007(0x11c);},0xbb8);});});}if(_0x750898['includes'](_0x284532(0x2bd))){const _0xab93ee=document['getElementById']('load-elo-history-data');_0xab93ee&&_0xab93ee['addEventListener']('click',function(){const _0x2157ed=_0x284532;console[_0x2157ed(0x19f)](_0x2157ed(0x182)),this[_0x2157ed(0x128)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)[_0x2157ed(0x300)](()=>{const _0x1f4f96=_0x2157ed;this['classList']['remove']('loading'),this[_0x1f4f96(0x293)]=_0x1f4f96(0x2f6);})['catch'](_0x4afcb2=>{const _0x16013b=_0x2157ed;console['error']('Error\x20loading\x20history:',_0x4afcb2),this['classList']['remove'](_0x16013b(0x1e0)),this[_0x16013b(0x293)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x367d41=_0x16013b;this[_0x367d41(0x293)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x750898[_0x284532(0x20d)](_0x284532(0x320))){const _0x2edaa9=document[_0x284532(0x17d)]('load-articles-data');_0x2edaa9&&_0x2edaa9['addEventListener']('click',function(){const _0xbeed62=_0x284532;console['log'](_0xbeed62(0x2e8)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})[_0xbeed62(0x309)](_0x17bea9=>{const _0x178fe2=_0xbeed62;console['error']('Error\x20loading\x20articles:',_0x17bea9),this['classList']['remove']('loading'),this[_0x178fe2(0x293)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4b237e=_0x178fe2;this['innerHTML']=_0x4b237e(0x227);},0xbb8);});});}if(_0x750898['includes']('user-roles-section')){const _0x117ba2=document['getElementById']('load-users-data');_0x117ba2&&_0x117ba2['addEventListener'](_0x284532(0x10d),function(){console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x5bb6be=>{const _0x365eb6=a4_0x426c;console[_0x365eb6(0x2e4)]('Error\x20loading\x20users:',_0x5bb6be),this[_0x365eb6(0x128)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x750898['includes']('inactive-players')){const _0x4fe0f8=document['getElementById'](_0x284532(0x151));_0x4fe0f8&&_0x4fe0f8['addEventListener']('click',function(){const _0x963a3=_0x284532;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this[_0x963a3(0x128)][_0x963a3(0x32f)]('loading'),this[_0x963a3(0x293)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x2ab271=_0x963a3;this[_0x2ab271(0x128)]['remove']('loading'),this['innerHTML']=_0x2ab271(0x2e7);})['catch'](_0x578327=>{const _0x52df4f=_0x963a3;console[_0x52df4f(0x2e4)]('Error\x20loading\x20inactive\x20players:',_0x578327),this[_0x52df4f(0x128)][_0x52df4f(0x30a)]('loading'),this[_0x52df4f(0x293)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1cc74a=_0x52df4f;this[_0x1cc74a(0x293)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x750898['includes']('manage-highlights')){const _0xa2de8b=document[_0x284532(0x17d)]('load-highlights-data');_0xa2de8b&&_0xa2de8b['addEventListener']('click',function(){const _0x328482=_0x284532;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList'][_0x328482(0x32f)](_0x328482(0x1e0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x52a58b=_0x328482;this['classList']['remove']('loading'),this[_0x52a58b(0x293)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0x328482(0x309)](_0x385709=>{const _0x521167=_0x328482;console['error']('Error\x20loading\x20highlights:',_0x385709),this[_0x521167(0x128)]['remove']('loading'),this[_0x521167(0x293)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x750898[_0x284532(0x20d)]('manage-matches')){const _0x3c848c=document['getElementById']('load-matches-data');_0x3c848c&&_0x3c848c['addEventListener']('click',function(){const _0x2c4bff=_0x284532;console['log']('Load\x20matches\x20data\x20clicked'),this['classList'][_0x2c4bff(0x32f)](_0x2c4bff(0x1e0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x2c4bff(0x300)](()=>{const _0x5cec65=_0x2c4bff;this['classList'][_0x5cec65(0x30a)](_0x5cec65(0x1e0)),this[_0x5cec65(0x293)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x24e50d=>{const _0x85c029=_0x2c4bff;console['error']('Error\x20loading\x20matches:',_0x24e50d),this['classList']['remove']('loading'),this['innerHTML']=_0x85c029(0x144),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x750898['includes']('manage-ribbons')){const _0x5c1891=document[_0x284532(0x17d)](_0x284532(0x18c));_0x5c1891&&_0x5c1891['addEventListener']('click',function(){const _0x2cffb7=_0x284532;console['log']('Load\x20ribbons\x20data\x20clicked'),this[_0x2cffb7(0x128)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()[_0x2cffb7(0x300)](()=>{const _0x569fe1=_0x2cffb7;this['classList']['remove']('loading'),this[_0x569fe1(0x293)]=_0x569fe1(0x252);})['catch'](_0xc953ae=>{const _0xd3a59d=_0x2cffb7;console['error']('Error\x20loading\x20ribbons:',_0xc953ae),this[_0xd3a59d(0x128)]['remove']('loading'),this['innerHTML']=_0xd3a59d(0x144),setTimeout(()=>{const _0x1e7846=_0xd3a59d;this[_0x1e7846(0x293)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x33c0e1=a4_0x426c;document[_0x33c0e1(0x17d)]('player-count')['textContent']='-',document['getElementById']('match-count')[_0x33c0e1(0x1c5)]='-',document['getElementById'](_0x33c0e1(0x25e))['textContent']='-',document[_0x33c0e1(0x17d)]('rejected-count')[_0x33c0e1(0x1c5)]='-';}function setupLadderSelector(){const _0x139119=a4_0x426c,_0x49b249=document[_0x139119(0x1f4)]('.ladder-switch\x20input');_0x49b249[_0x139119(0x1eb)](_0x425e6e=>{_0x425e6e['addEventListener']('change',()=>{const _0x17dbf7=a4_0x426c;currentLadder=_0x425e6e['value'],document['body']['setAttribute']('data-ladder',currentLadder);const _0x39049c=document['getElementById']('current-ladder-display');_0x39049c&&(_0x39049c['textContent']=currentLadder),document['getElementById'](_0x17dbf7(0x1cc))[_0x17dbf7(0x1c5)]='-',document['getElementById'](_0x17dbf7(0x18f))[_0x17dbf7(0x1c5)]='-',document['getElementById'](_0x17dbf7(0x25e))['textContent']='-',document[_0x17dbf7(0x17d)]('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts[_0x17dbf7(0x338)][_0x17dbf7(0x233)](),charts['rankDistribution']=null),charts['activity']&&(charts[_0x17dbf7(0x267)]['destroy'](),charts[_0x17dbf7(0x267)]=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x23f267=document['getElementById']('current-ladder-display');_0x23f267&&(_0x23f267['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x4e6e03=a4_0x426c;try{console[_0x4e6e03(0x19f)](_0x4e6e03(0x13e)),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x4e6e03(0x18f))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x4e6e03(0x17d)](_0x4e6e03(0x23a))['textContent']='-';const _0x79b6ed=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x2d9279=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x4e6e03(0x176),_0x2773ef=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x12e094=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x79b6ed+',\x20'+_0x2d9279);const _0x171926=await getDocs(collection(db,_0x79b6ed)),_0x4f30ae=_0x171926['size'],_0x399575=await getDocs(collection(db,_0x2d9279)),_0x40c1c8=_0x399575[_0x4e6e03(0x1e5)],_0x15f37d=await getDocs(collection(db,_0x2773ef)),_0x3f96ca=_0x15f37d['size'],_0x203077=await getDocs(collection(db,_0x12e094)),_0x2da509=_0x203077[_0x4e6e03(0x1e5)];return document[_0x4e6e03(0x17d)]('player-count')['textContent']=_0x4f30ae,document['getElementById']('match-count')[_0x4e6e03(0x1c5)]=_0x40c1c8,document['getElementById']('pending-count')['textContent']=_0x3f96ca,document[_0x4e6e03(0x17d)]('rejected-count')['textContent']=_0x2da509,await createRankDistributionChart(),await createActivityChart(),console[_0x4e6e03(0x19f)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x4cd2ec){console[_0x4e6e03(0x2e4)]('Error\x20loading\x20dashboard\x20data:',_0x4cd2ec);throw _0x4cd2ec;}}async function createRankDistributionChart(){const _0x585315=a4_0x426c;try{const _0x41101f=collection(db,currentLadder==='D1'?_0x585315(0x266):'playersD2'),_0x25ac9d=await getDocs(_0x41101f),_0x3adace={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x25ac9d['forEach'](_0x5aed4d=>{const _0x20240c=_0x585315,_0x468489=_0x5aed4d['data'](),_0x4e3adf=_0x468489[_0x20240c(0xfa)]||0x4b0;if(_0x4e3adf>=0x7d0)_0x3adace['Emerald']++;else{if(_0x4e3adf>=0x708)_0x3adace[_0x20240c(0x32b)]++;else{if(_0x4e3adf>=0x640)_0x3adace['Silver']++;else{if(_0x4e3adf>=0x578)_0x3adace['Bronze']++;else _0x3adace[_0x20240c(0x33a)]++;}}}});const _0x1ce7f4=document['getElementById'](_0x585315(0x24d));charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x1ce7f4,{'type':'doughnut','data':{'labels':Object[_0x585315(0x1e8)](_0x3adace),'datasets':[{'data':Object['values'](_0x3adace),'backgroundColor':[_0x585315(0x282),_0x585315(0x2eb),'#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x585315(0x14a),'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0xd4cb79){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0xd4cb79),document[_0x585315(0x17d)]('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x2482e2=a4_0x426c;try{const _0x28961b=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x34ba3f=collection(db,_0x28961b),_0x13903f=new Date();_0x13903f['setDate'](_0x13903f['getDate']()-0x7);const _0x4945df=query(_0x34ba3f,where('approvedAt','>=',_0x13903f),orderBy(_0x2482e2(0x12b),'asc')),_0x1463f9=await getDocs(_0x4945df),_0x46b140=['Sunday','Monday',_0x2482e2(0x32d),'Wednesday','Thursday',_0x2482e2(0x1d6),'Saturday'],_0x1aa7de=_0x46b140[_0x2482e2(0x1f5)]((_0x34559c,_0x11ca2e)=>({..._0x34559c,[_0x11ca2e]:0x0}),{});_0x1463f9[_0x2482e2(0x1eb)](_0xf71402=>{const _0x1e6831=_0x2482e2,_0x1f9029=_0xf71402['data']();if(_0x1f9029[_0x1e6831(0x12b)]){const _0x48ea39=_0x46b140[new Date(_0x1f9029['approvedAt']['seconds']*0x3e8)[_0x1e6831(0x22c)]()];_0x1aa7de[_0x48ea39]++;}});const _0x14cb1a=document[_0x2482e2(0x17d)]('activity-chart');charts[_0x2482e2(0x267)]&&charts['activity']['destroy'](),charts[_0x2482e2(0x267)]=new Chart(_0x14cb1a,{'type':'bar','data':{'labels':_0x46b140,'datasets':[{'label':'Matches\x20Played','data':_0x46b140['map'](_0x428eda=>_0x1aa7de[_0x428eda]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x2482e2(0x306),'borderColor':currentLadder==='D1'?_0x2482e2(0x24a):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x2482e2(0x223)}}},'plugins':{'legend':{'labels':{'color':_0x2482e2(0x201)}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x2c77fc){console['error']('Error\x20creating\x20activity\x20chart:',_0x2c77fc),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x53fd11=a4_0x426c,_0x4fb5dc=document['getElementById']('players-table-body');if(!_0x4fb5dc)return;_0x4fb5dc['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x51bce0=_0x53fd11(0x266);if(currentLadder==='D2')_0x51bce0='playersD2';else currentLadder==='D3'&&(_0x51bce0='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x51bce0+'\x20collection...');const _0x512c2e=collection(db,_0x51bce0),_0x15d20b=query(_0x512c2e,orderBy('eloRating',_0x53fd11(0x14f))),_0x26361c=await getDocs(_0x15d20b);if(_0x26361c['empty']){_0x4fb5dc['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x4fb5dc['innerHTML']='';let _0x40e73d=0x1;_0x26361c['forEach'](_0xa13cde=>{const _0x521ed1=_0x53fd11,_0x31f4ea=_0xa13cde['data'](),_0xb8b10e=getRankFromElo(_0x31f4ea['eloRating']||0x4b0),_0x35ba53=getRankStyle(_0x31f4ea[_0x521ed1(0xfa)]||0x4b0),_0x75217f=document[_0x521ed1(0x2b5)]('tr');_0x75217f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x40e73d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x35ba53[_0x521ed1(0x2cb)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x31f4ea['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x31f4ea['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x35ba53['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xb8b10e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x31f4ea['wins']||0x0)+_0x521ed1(0x243)+(_0x31f4ea['losses']||0x0)+_0x521ed1(0x2da)+_0xa13cde['id']+_0x521ed1(0x105)+_0xa13cde['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4fb5dc['appendChild'](_0x75217f),_0x40e73d++;}),setupPlayerActionButtons();}catch(_0x440105){console['error']('Error\x20loading\x20players:',_0x440105),_0x4fb5dc[_0x53fd11(0x293)]=_0x53fd11(0x1c7)+_0x440105['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x27db9d){const _0x4a5e61=a4_0x426c;if(_0x27db9d>=0x7d0)return _0x4a5e61(0x156);if(_0x27db9d>=0x708)return'Gold';if(_0x27db9d>=0x640)return'Silver';if(_0x27db9d>=0x578)return'Bronze';return _0x4a5e61(0x33a);}function setupPlayerActionButtons(){const _0x3fca96=a4_0x426c;document['querySelectorAll'](_0x3fca96(0x10c))['forEach'](_0x49e045=>{_0x49e045['addEventListener']('click',async _0x48cdcc=>{const _0x1a4293=a4_0x426c,_0xca8b6d=_0x48cdcc['currentTarget'][_0x1a4293(0x2b8)]['id'];openEditPlayerModal(_0xca8b6d);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x5b146c=>{_0x5b146c['addEventListener']('click',async _0x25ea57=>{const _0x4907ae=_0x25ea57['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x4907ae);});});}async function openEditPlayerModal(_0x5c009a){const _0x28c7e8=a4_0x426c;try{const _0x20a54e=currentLadder==='D1'?'players':_0x28c7e8(0x1be),_0x3a7d13=doc(db,_0x20a54e,_0x5c009a),_0x1f2007=await getDoc(_0x3a7d13);if(!_0x1f2007[_0x28c7e8(0x104)]()){showNotification('Player\x20not\x20found',_0x28c7e8(0x2e4));return;}const _0x37c54a=_0x1f2007[_0x28c7e8(0x275)](),_0x4bf0e6=document['getElementById']('edit-player-modal'),_0x12a344=document['getElementById']('edit-username'),_0x14b6ab=document['getElementById']('edit-elo'),_0x4bb9c4=document['getElementById']('edit-wins'),_0x54760b=document[_0x28c7e8(0x17d)](_0x28c7e8(0x248));_0x12a344['value']=_0x37c54a['username']||'',_0x14b6ab[_0x28c7e8(0x122)]=_0x37c54a[_0x28c7e8(0xfa)]||0x4b0,_0x4bb9c4[_0x28c7e8(0x122)]=_0x37c54a[_0x28c7e8(0x11b)]||0x0,_0x54760b['value']=_0x37c54a['losses']||0x0,_0x4bf0e6['dataset'][_0x28c7e8(0x1c1)]=_0x5c009a,_0x4bf0e6['classList']['add']('active');}catch(_0xc6d462){console[_0x28c7e8(0x2e4)]('Error\x20opening\x20edit\x20modal:',_0xc6d462),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x5d6a08=a4_0x426c;try{const _0x1ce9e1=document['getElementById'](_0x5d6a08(0x31f)),_0x49ebac=_0x1ce9e1['dataset'][_0x5d6a08(0x1c1)];if(!_0x49ebac){showNotification('No\x20player\x20selected','error');return;}const _0x3884d1=document['getElementById'](_0x5d6a08(0x325)),_0x2cfd54=document[_0x5d6a08(0x17d)]('edit-elo'),_0x2abed3=document['getElementById']('edit-wins'),_0x2d6f52=document['getElementById'](_0x5d6a08(0x248)),_0x18cf8c=_0x3884d1[_0x5d6a08(0x122)]['trim'](),_0x47866a=parseInt(_0x2cfd54['value']),_0x4efd13=parseInt(_0x2abed3[_0x5d6a08(0x122)]),_0xc4aee3=parseInt(_0x2d6f52[_0x5d6a08(0x122)]);if(!_0x18cf8c||isNaN(_0x47866a)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x18a9c0=currentLadder==='D1'?_0x5d6a08(0x266):_0x5d6a08(0x1be),_0x2d5a28=doc(db,_0x18a9c0,_0x49ebac),_0x4a2474=await getDoc(_0x2d5a28),_0x3b3b96=_0x4a2474['exists']()?_0x4a2474['data']():{},_0x12f465=_0x3b3b96['eloRating']||0x4b0;await updateDoc(_0x2d5a28,{'username':_0x18cf8c,'eloRating':_0x47866a,'wins':_0x4efd13||0x0,'losses':_0xc4aee3||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x47866a!==_0x12f465){const _0x55c7fb=currentLadder==='D1'?_0x5d6a08(0x1fa):_0x5d6a08(0x177);await addDoc(collection(db,_0x55c7fb),{'player':_0x18cf8c,'previousElo':_0x12f465,'newElo':_0x47866a,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x5d6a08(0x1b6),'success');}catch(_0x1b1d87){console['error']('Error\x20updating\x20player:',_0x1b1d87),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x1b1d87[_0x5d6a08(0x295)],'error');}}function closeEditPlayerModal(){const _0x29d885=a4_0x426c,_0x4aff5e=document[_0x29d885(0x17d)]('edit-player-modal');_0x4aff5e[_0x29d885(0x128)][_0x29d885(0x30a)](_0x29d885(0x231)),_0x4aff5e['dataset']['playerId']='';}async function confirmDeletePlayer(_0x162403){const _0x43821f=a4_0x426c;if(confirm(_0x43821f(0x292)))try{const _0x294f56=currentLadder==='D1'?_0x43821f(0x266):'playersD2';await deleteDoc(doc(db,_0x294f56,_0x162403)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x34b624){console['error']('Error\x20deleting\x20player:',_0x34b624),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x34b624['message'],'error');}}async function setupManagePlayersSection(){const _0x2fc995=a4_0x426c,_0x45f7ac=document['getElementById']('add-player-form');_0x45f7ac&&_0x45f7ac['addEventListener']('submit',async _0x2ad434=>{_0x2ad434['preventDefault'](),await addNewPlayer();});const _0xf973c6=document['getElementById'](_0x2fc995(0x1cd));_0xf973c6&&_0xf973c6['addEventListener'](_0x2fc995(0x2c9),debounce(filterPlayerTable,0x12c));const _0x25f936=document[_0x2fc995(0x17d)]('save-player-btn');_0x25f936&&_0x25f936['addEventListener'](_0x2fc995(0x10d),saveEditedPlayer);const _0x24bf84=document['getElementById'](_0x2fc995(0x1a7));_0x24bf84&&_0x24bf84['addEventListener']('click',closeEditPlayerModal);const _0x267017=document['getElementById'](_0x2fc995(0x31f));_0x267017&&_0x267017['addEventListener'](_0x2fc995(0x10d),_0x3d1007=>{_0x3d1007['target']===_0x267017&&closeEditPlayerModal();});const _0x216bb8=document['getElementById'](_0x2fc995(0x23e));_0x216bb8&&_0x216bb8['addEventListener']('change',()=>{currentLadder=_0x216bb8['value'],loadPlayersData();});}async function addNewPlayer(){const _0x445fd6=a4_0x426c;try{const _0x274629=document['getElementById']('new-player-username'),_0x3352e4=document[_0x445fd6(0x17d)]('new-player-elo'),_0x369326=_0x274629['value']['trim'](),_0x492b61=parseInt(_0x3352e4[_0x445fd6(0x122)])||0x4b0;if(!_0x369326){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log'](_0x445fd6(0x249)+_0x369326+_0x445fd6(0x133)+_0x492b61+_0x445fd6(0x1f9)+currentLadder+'\x20ladder');let _0x59ed18=_0x445fd6(0x266),_0x563c73='eloHistory';if(currentLadder==='D2')_0x59ed18=_0x445fd6(0x1be),_0x563c73=_0x445fd6(0x177);else currentLadder==='D3'&&(_0x59ed18=_0x445fd6(0x285),_0x563c73='eloHistoryD3');const _0x458e7e=query(collection(db,_0x59ed18),where(_0x445fd6(0x310),'==',_0x369326)),_0x4cab0d=await getDocs(_0x458e7e);if(!_0x4cab0d['empty']){alert(_0x445fd6(0x2aa)+_0x369326+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x1f34ed=auth[_0x445fd6(0x14e)],_0x4c2e9d={'username':_0x369326,'eloRating':_0x492b61,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x1f34ed?_0x1f34ed[_0x445fd6(0x10e)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x59ed18),_0x4c2e9d),await addDoc(collection(db,_0x563c73),{'player':_0x369326,'previousElo':0x4b0,'newElo':_0x492b61,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x1f34ed?_0x1f34ed['email']:'admin','gameMode':currentLadder}),_0x274629['value']='',_0x3352e4[_0x445fd6(0x122)]='1200',alert('Player\x20'+_0x369326+'\x20added\x20successfully\x20to\x20'+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0xa5ebdc){console[_0x445fd6(0x2e4)](_0x445fd6(0x126),_0xa5ebdc),alert('Error\x20adding\x20player:\x20'+_0xa5ebdc['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0xabab13=a4_0x426c,_0x49a918=document['getElementById'](_0xabab13(0x112));_0x49a918&&_0x49a918['addEventListener']('submit',_0x2a3d84=>{const _0x521d22=_0xabab13;_0x2a3d84[_0x521d22(0x1f8)](),addNewPlayer();});});function filterPlayerTable(){const _0x3d7189=a4_0x426c,_0x41b030=document['getElementById']('player-search')[_0x3d7189(0x122)]['toLowerCase'](),_0x34d4d7=document['querySelectorAll'](_0x3d7189(0x172));let _0x484fe7=0x0;_0x34d4d7['forEach'](_0x497c69=>{const _0x4a1dd7=_0x3d7189,_0x5428e7=_0x497c69[_0x4a1dd7(0x158)]('.username')?.['textContent']['toLowerCase']()||'';_0x5428e7['includes'](_0x41b030)?(_0x497c69['style'][_0x4a1dd7(0x1ef)]='',_0x484fe7++):_0x497c69[_0x4a1dd7(0x2b6)]['display']='none';});const _0x180a66=document['getElementById']('no-results-message');_0x180a66&&(_0x484fe7===0x0&&_0x41b030!==''?_0x180a66['style']['display']='block':_0x180a66['style']['display']='none');}function debounce(_0x2505e2,_0x1bdf9a){let _0x34cf34;return function(..._0x521ae1){clearTimeout(_0x34cf34),_0x34cf34=setTimeout(()=>_0x2505e2['apply'](this,_0x521ae1),_0x1bdf9a);};}async function loadEloHistory(_0xb802ee=0x1){const _0x3506dc=a4_0x426c,_0x1e0c2c=document['getElementById']('elo-history-table-body'),_0xfe85b4=currentLadder['toLowerCase']();if(!_0x1e0c2c)return;_0x1e0c2c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x22102f=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x3506dc(0x177):'eloHistoryD3',_0x2fb9a0=collection(db,_0x22102f);let _0x1434d1;if(_0xb802ee>eloHistoryPagination[_0xfe85b4]['page']&&eloHistoryPagination[_0xfe85b4]['lastVisible'])_0x1434d1=query(_0x2fb9a0,orderBy(_0x3506dc(0x14c),_0x3506dc(0x14f)),startAfter(eloHistoryPagination[_0xfe85b4]['lastVisible']),limit(PAGE_SIZE));else _0xb802ee<eloHistoryPagination[_0xfe85b4]['page']&&eloHistoryPagination[_0xfe85b4][_0x3506dc(0x10b)]?_0x1434d1=query(_0x2fb9a0,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0xfe85b4]['firstVisible']),limitToLast(PAGE_SIZE)):_0x1434d1=query(_0x2fb9a0,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x3f5a39=await getDocs(_0x1434d1);if(_0x3f5a39[_0x3506dc(0x24e)]){_0x1e0c2c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0xfe85b4+'-page-indicator')['textContent']=_0x3506dc(0x24c);return;}eloHistoryPagination[_0xfe85b4][_0x3506dc(0x279)]=_0xb802ee,eloHistoryPagination[_0xfe85b4][_0x3506dc(0x10b)]=_0x3f5a39['docs'][0x0],eloHistoryPagination[_0xfe85b4][_0x3506dc(0x125)]=_0x3f5a39['docs'][_0x3f5a39['docs']['length']-0x1];const _0x9053aa=new Map();_0x1e0c2c['innerHTML']='';const _0x210ae2=async _0x21d224=>{const _0x105abf=_0x3506dc;if(typeof _0x21d224!==_0x105abf(0x162)||_0x21d224[_0x105abf(0x1a0)]<0x14||/[^a-zA-Z0-9-_]/['test'](_0x21d224))return _0x21d224;if(_0x9053aa['has'](_0x21d224))return _0x9053aa['get'](_0x21d224);try{for(const _0x1696f1 of['players',_0x105abf(0x1be),_0x105abf(0x285),'nonParticipants']){const _0x57a185=await getDoc(doc(db,_0x1696f1,_0x21d224));if(_0x57a185['exists']()&&_0x57a185['data']()[_0x105abf(0x310)]){const _0x1214c1=_0x57a185[_0x105abf(0x275)]()['username'];return _0x9053aa['set'](_0x21d224,_0x1214c1),_0x1214c1;}}return _0x21d224;}catch(_0xce9f98){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x21d224+':',_0xce9f98),_0x21d224;}};for(const _0x2c280f of _0x3f5a39['docs']){const _0xa320f1=_0x2c280f['data'](),_0x357729=document['createElement']('tr'),_0x83730f=_0xa320f1[_0x3506dc(0x14c)]?new Date(_0xa320f1[_0x3506dc(0x14c)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x382606=_0xa320f1['newElo']-_0xa320f1[_0x3506dc(0x1a6)],_0x255a15=_0x382606>0x0?_0x3506dc(0x129):_0x382606<0x0?'negative-change':'',_0x51a5fe=_0x382606>0x0?'+':'',_0x25de63=_0xa320f1[_0x3506dc(0x1c2)]||_0xa320f1['username']||_0xa320f1[_0x3506dc(0x2c7)]||'N/A',_0x405524=await _0x210ae2(_0x25de63);_0x357729[_0x3506dc(0x293)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x83730f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x405524+_0x3506dc(0x189)+(_0xa320f1['previousElo']||'N/A')+_0x3506dc(0x1d7)+(_0xa320f1[_0x3506dc(0x215)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x255a15+'\x22>'+_0x51a5fe+_0x382606+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0xa320f1['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xa320f1['modifiedBy']||_0xa320f1[_0x3506dc(0x2de)]||_0xa320f1['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1e0c2c[_0x3506dc(0x106)](_0x357729);}document[_0x3506dc(0x17d)](_0xfe85b4+_0x3506dc(0x2fc))[_0x3506dc(0x1c5)]='Page\x20'+_0xb802ee;const _0x15b86d=document['getElementById'](_0xfe85b4+'-prev-page'),_0x52014a=document['getElementById'](_0xfe85b4+'-next-page');if(_0x15b86d)_0x15b86d['disabled']=_0xb802ee<=0x1;const _0x3607ed=query(_0x2fb9a0,orderBy('timestamp',_0x3506dc(0x14f)),startAfter(eloHistoryPagination[_0xfe85b4]['lastVisible']),limit(0x1)),_0x56a8ee=await getDocs(_0x3607ed);if(_0x52014a)_0x52014a['disabled']=_0x56a8ee['empty'];}catch(_0x341ad4){console['error']('Error\x20loading\x20ELO\x20history:',_0x341ad4),_0x1e0c2c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x341ad4[_0x3506dc(0x295)]+_0x3506dc(0x23c);}}function formatHistoryType(_0x40d7ce){const _0xb8e556=a4_0x426c;switch(_0x40d7ce){case'match_result':return'Match\x20Result';case'promotion':return'Promotion';case'demotion':return'Demotion';case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return _0xb8e556(0x2ef);default:return _0x40d7ce||'Unknown';}}function setupEloHistorySection(){const _0x3594d8=a4_0x426c;document['getElementById']('d1-prev-page')[_0x3594d8(0x15d)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document[_0x3594d8(0x17d)](_0x3594d8(0x18a))['addEventListener']('click',()=>{const _0x2e4ee0=_0x3594d8;loadEloHistory(eloHistoryPagination['d1'][_0x2e4ee0(0x279)]+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x454a81=document['getElementById'](_0x3594d8(0x1b4)),_0x1ada49=document[_0x3594d8(0x17d)](_0x3594d8(0x15f));_0x454a81&&_0x454a81['addEventListener']('click',()=>{const _0x425db7=_0x3594d8;loadEloHistory(eloHistoryPagination['d3'][_0x425db7(0x279)]-0x1);});_0x1ada49&&_0x1ada49[_0x3594d8(0x15d)]('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x4d3838=document['getElementById']('elo-history-search');_0x4d3838&&_0x4d3838['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x32cc1f=document['getElementById']('history-type-filter');_0x32cc1f&&_0x32cc1f['addEventListener'](_0x3594d8(0x136),applyEloHistoryFilters);const _0x33a11a=document['getElementById'](_0x3594d8(0x202));_0x33a11a&&_0x33a11a[_0x3594d8(0x15d)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x1bb583=a4_0x426c,_0x27b2df=document['getElementById']('elo-history-search')[_0x1bb583(0x122)]['toLowerCase'](),_0x4cfca9=document[_0x1bb583(0x1f4)]('#elo-history-table-body\x20tr');let _0x1ce8fe=0x0;_0x4cfca9['forEach'](_0x297d4a=>{const _0x5b8e71=_0x1bb583;if(_0x297d4a[_0x5b8e71(0x128)]['contains']('loading-cell')||_0x297d4a['classList'][_0x5b8e71(0x31c)]('empty-state')||_0x297d4a['classList']['contains']('error-state'))return;const _0x4188f8=_0x297d4a['querySelector']('.player')?.[_0x5b8e71(0x1c5)][_0x5b8e71(0x21d)]()||'',_0x200157=_0x297d4a['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x5b279d=_0x297d4a['querySelector']('.admin-action')?.[_0x5b8e71(0x1c5)]['toLowerCase']()||'';_0x4188f8['includes'](_0x27b2df)||_0x200157[_0x5b8e71(0x20d)](_0x27b2df)||_0x5b279d[_0x5b8e71(0x20d)](_0x27b2df)?(_0x297d4a['style'][_0x5b8e71(0x1ef)]='',_0x1ce8fe++):_0x297d4a[_0x5b8e71(0x2b6)][_0x5b8e71(0x1ef)]=_0x5b8e71(0x284);});}async function applyEloHistoryFilters(){const _0x3f4170=a4_0x426c,_0x4c6d22=document['getElementById']('history-start-date')['value'],_0xae9003=document['getElementById']('history-end-date')[_0x3f4170(0x122)],_0x4b51de=document['getElementById']('history-type-filter')[_0x3f4170(0x122)],_0x3c3fe6=currentLadder['toLowerCase']();eloHistoryPagination[_0x3c3fe6]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x3891a1=document['getElementById'](_0x3f4170(0x1f2));_0x3891a1['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x33ae43=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x2cf3ec=collection(db,_0x33ae43);let _0x54b304=[orderBy('timestamp',_0x3f4170(0x14f))];if(_0x4c6d22){const _0x19fe92=new Date(_0x4c6d22);_0x19fe92[_0x3f4170(0x2ec)](0x0,0x0,0x0,0x0),_0x54b304[_0x3f4170(0x1a3)](where('timestamp','>=',_0x19fe92));}if(_0xae9003){const _0x8ab536=new Date(_0xae9003);_0x8ab536['setHours'](0x17,0x3b,0x3b,0x3e7),_0x54b304[_0x3f4170(0x1a3)](where('timestamp','<=',_0x8ab536));}_0x4b51de&&_0x4b51de!==_0x3f4170(0x220)&&_0x54b304[_0x3f4170(0x1a3)](where('type','==',_0x4b51de));_0x54b304[_0x3f4170(0x1a3)](limit(PAGE_SIZE));const _0x3a0ecd=query(_0x2cf3ec,..._0x54b304),_0x19513d=await getDocs(_0x3a0ecd);!_0x19513d[_0x3f4170(0x24e)]&&(eloHistoryPagination[_0x3c3fe6]['firstVisible']=_0x19513d['docs'][0x0],eloHistoryPagination[_0x3c3fe6]['lastVisible']=_0x19513d['docs'][_0x19513d[_0x3f4170(0x155)]['length']-0x1]);_0x3891a1['innerHTML']='';if(_0x19513d['empty']){_0x3891a1['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x19513d['forEach'](_0x16444f=>{const _0x3d31fe=_0x3f4170,_0x1ab078=_0x16444f['data'](),_0x22446f=document['createElement']('tr'),_0x288adc=_0x1ab078['timestamp']?new Date(_0x1ab078[_0x3d31fe(0x14c)][_0x3d31fe(0x26c)]*0x3e8)[_0x3d31fe(0x26b)]():'N/A',_0x200e0b=_0x1ab078['newElo']-_0x1ab078['previousElo'],_0xd92564=_0x200e0b>0x0?'positive-change':_0x200e0b<0x0?_0x3d31fe(0x22f):'',_0x3e31ab=_0x200e0b>0x0?'+':'',_0x569fed=_0x1ab078[_0x3d31fe(0x1c2)]||_0x1ab078[_0x3d31fe(0x310)]||_0x1ab078[_0x3d31fe(0x2c7)]||_0x3d31fe(0x2c4);_0x22446f[_0x3d31fe(0x293)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x288adc+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x569fed+_0x3d31fe(0x189)+(_0x1ab078['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x1ab078['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0xd92564+'\x22>'+_0x3e31ab+_0x200e0b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x1ab078['type'])+_0x3d31fe(0x29d)+(_0x1ab078['modifiedBy']||_0x1ab078[_0x3d31fe(0x2de)]||_0x1ab078['demotedBy']||'System')+_0x3d31fe(0x288),_0x3891a1['appendChild'](_0x22446f);}),document['getElementById'](_0x3c3fe6+'-page-indicator')['textContent']='Page\x201';}catch(_0x93ce5e){console['error']('Error\x20applying\x20filters:',_0x93ce5e),_0x3891a1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x93ce5e['message']+_0x3f4170(0x23c);}}function resetEloHistoryFilters(){const _0x11c3c1=a4_0x426c;document[_0x11c3c1(0x17d)](_0x11c3c1(0x180))[_0x11c3c1(0x122)]='',document['getElementById']('history-end-date')[_0x11c3c1(0x122)]='',document['getElementById'](_0x11c3c1(0x27c))[_0x11c3c1(0x122)]='all',document[_0x11c3c1(0x17d)](_0x11c3c1(0x2bb))[_0x11c3c1(0x122)]='';const _0x2b63a9=currentLadder[_0x11c3c1(0x21d)]();eloHistoryPagination[_0x2b63a9]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x123a22=a4_0x426c,_0x3d9629=document[_0x123a22(0x17d)]('promote-player-btn'),_0x4bfaf9=document['getElementById']('promote-modal'),_0x1f687e=document['getElementById']('promote-form');_0x3d9629&&_0x4bfaf9&&_0x1f687e&&(_0x3d9629['addEventListener']('click',()=>{_0x4bfaf9['classList']['add']('active');}),_0x4bfaf9['addEventListener']('click',_0x5618f1=>{_0x5618f1['target']===_0x4bfaf9&&_0x4bfaf9['classList']['remove']('active');}),_0x1f687e['addEventListener'](_0x123a22(0x1f3),async _0xb057c7=>{const _0x1c4e60=_0x123a22;_0xb057c7['preventDefault']();const _0x3801b5=document['getElementById']('promote-username'),_0x33c5ab=document['getElementById'](_0x1c4e60(0x334)),_0x328145=_0x3801b5[_0x1c4e60(0x122)]['trim'](),_0x5a3a65=_0x33c5ab['value'];if(!_0x328145){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x328145,_0x5a3a65),_0x4bfaf9[_0x1c4e60(0x128)]['remove']('active'),_0x3801b5['value']='';}catch(_0x5cebe0){showNotification(_0x5cebe0['message'],'error');}}),document['getElementById'](_0x123a22(0x2c8))['addEventListener']('click',()=>{_0x4bfaf9['classList']['remove']('active');}));const _0x50d9f6=document['getElementById']('demote-player-btn'),_0x30e0ae=document[_0x123a22(0x17d)](_0x123a22(0x134)),_0x11ac4d=document['getElementById']('demote-form');_0x50d9f6&&_0x30e0ae&&_0x11ac4d&&(_0x50d9f6['addEventListener'](_0x123a22(0x10d),()=>{const _0x281ae4=_0x123a22;_0x30e0ae[_0x281ae4(0x128)][_0x281ae4(0x32f)]('active');}),_0x30e0ae['addEventListener'](_0x123a22(0x10d),_0x285185=>{const _0x48a65e=_0x123a22;_0x285185[_0x48a65e(0x196)]===_0x30e0ae&&_0x30e0ae[_0x48a65e(0x128)][_0x48a65e(0x30a)](_0x48a65e(0x231));}),_0x11ac4d[_0x123a22(0x15d)]('submit',async _0x4e0c95=>{const _0x39efa=_0x123a22;_0x4e0c95['preventDefault']();const _0x5c77a9=document['getElementById'](_0x39efa(0x13b)),_0x4344b1=document['getElementById']('demote-ladder'),_0x3d4f04=_0x5c77a9['value']['trim'](),_0x463d8b=_0x4344b1[_0x39efa(0x122)];if(!_0x3d4f04){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x3d4f04,_0x463d8b),document['getElementById']('demote-modal')['classList'][_0x39efa(0x30a)]('active'),document['getElementById']('demote-username')[_0x39efa(0x122)]='';}catch(_0x3863b3){console['error'](_0x39efa(0x1d9),_0x3863b3);}}));const _0xd7eb85=document['getElementById']('set-elo-btn'),_0x166ae6=document['getElementById'](_0x123a22(0x1de)),_0x342886=document[_0x123a22(0x17d)]('set-elo-form');_0xd7eb85&&_0x166ae6&&_0x342886&&(_0xd7eb85[_0x123a22(0x15d)]('click',()=>{const _0x52f09a=_0x123a22;_0x166ae6['classList'][_0x52f09a(0x32f)]('active');}),_0x166ae6['addEventListener']('click',_0x50ad42=>{const _0x3eb912=_0x123a22;_0x50ad42[_0x3eb912(0x196)]===_0x166ae6&&_0x166ae6['classList'][_0x3eb912(0x30a)]('active');}),_0x342886['addEventListener'](_0x123a22(0x1f3),async _0x12fe48=>{const _0x1b4486=_0x123a22;_0x12fe48['preventDefault']();const _0x2c995d=document[_0x1b4486(0x17d)]('set-elo-username'),_0x444aeb=document[_0x1b4486(0x17d)]('set-elo-value');let _0x240a63;const _0x4fc31f=document['getElementById']('set-elo-ladder'),_0x1e88d9=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x4fc31f)_0x240a63=_0x4fc31f['value'];else _0x1e88d9?_0x240a63=_0x1e88d9[_0x1b4486(0x122)]:_0x240a63='D1';if(!_0x2c995d||!_0x444aeb){showNotification('Form\x20elements\x20are\x20missing',_0x1b4486(0x2e4));return;}const _0x33d3d8=_0x2c995d['value']['trim'](),_0x26b261=parseInt(_0x444aeb['value']);if(!_0x33d3d8||isNaN(_0x26b261)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x33d3d8,_0x26b261,_0x240a63),_0x166ae6['classList']['remove']('active'),_0x2c995d['value']='',_0x444aeb['value']='';}catch(_0x1e9e49){showNotification(_0x1e9e49[_0x1b4486(0x295)],_0x1b4486(0x2e4));}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x403210=_0x123a22;_0x166ae6['classList']['remove'](_0x403210(0x231));}));const _0x27b00e=document['getElementById']('set-role-modal'),_0x3f78fb=document['getElementById']('set-role-form');if(_0x27b00e&&_0x3f78fb){_0x27b00e[_0x123a22(0x15d)]('click',_0x389007=>{_0x389007['target']===_0x27b00e&&closeModalHandler();}),_0x3f78fb['addEventListener']('submit',async _0x18c4d2=>{const _0x144afd=_0x123a22;_0x18c4d2[_0x144afd(0x1f8)]();const _0xd51d0=document[_0x144afd(0x17d)](_0x144afd(0x17c)),_0x5ac7c2=document['getElementById']('role-name'),_0x58061b=document['getElementById']('role-color'),_0x4dad9e=_0xd51d0['value']['trim'](),_0x5adb91=_0x5ac7c2['value']['trim'](),_0x4c8dfe=_0x58061b['value'];if(!_0x4dad9e){showNotification(_0x144afd(0x25a),'error');return;}try{await setUserRole(_0x4dad9e,_0x5adb91,_0x4c8dfe),closeModalHandler(),loadUsersWithRoles();}catch(_0x1d84da){}});const _0x5f5081=document['getElementById']('cancel-role-btn');_0x5f5081&&(_0x5f5081[_0x123a22(0x1fb)](_0x123a22(0x10d),closeModalHandler),_0x5f5081[_0x123a22(0x15d)]('click',closeModalHandler));}}async function promotePlayer(_0x4ba478,_0x407b8d){const _0x21eb41=a4_0x426c;try{console['log']('Attempting\x20to\x20promote\x20'+_0x4ba478+'\x20in\x20'+_0x407b8d+'\x20ladder');const _0x3ba23e=auth['currentUser'];if(!_0x3ba23e)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x39c18a=_0x407b8d==='D2'?'playersD2':_0x21eb41(0x266),_0x26d01c=_0x407b8d==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x39c18a);const _0x5aa88b=collection(db,_0x39c18a),_0x1eadca=query(_0x5aa88b,where(_0x21eb41(0x310),'==',_0x4ba478)),_0xdbd6bb=await getDocs(_0x1eadca);if(_0xdbd6bb['empty']){alert(_0x21eb41(0x2fb)+_0x407b8d+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x407b8d+'\x20ladder');}const _0x2973aa=_0xdbd6bb['docs'][0x0],_0x417971=_0x2973aa['data'](),_0x5b1eab=_0x417971[_0x21eb41(0xfa)]||0x4b0,_0x5b4a07=_0x2973aa['id'];console['log'](_0x21eb41(0x257)+_0x5b1eab);const _0x25383d=[{'name':_0x21eb41(0x2db),'elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x21eb41(0x156),'elo':0x7d0}];let _0x406e84=_0x25383d['find'](_0x17ecd3=>_0x17ecd3[_0x21eb41(0xfc)]>_0x5b1eab);if(!_0x406e84){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x407b8d+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x407b8d+_0x21eb41(0x287));}console['log']('Promoting\x20player\x20to\x20'+_0x406e84['name']+'\x20('+_0x406e84[_0x21eb41(0xfc)]+')'),await updateDoc(doc(db,_0x39c18a,_0x2973aa['id']),{'eloRating':_0x406e84[_0x21eb41(0xfc)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x3ba23e['email']||_0x21eb41(0x101)}),await addDoc(collection(db,_0x26d01c),{'player':_0x4ba478,'previousElo':_0x5b1eab,'newElo':_0x406e84['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x406e84['name'],'promotedBy':_0x3ba23e['email']||_0x21eb41(0x101),'gameMode':_0x407b8d});try{const {promotionManager:_0x188e29}=await import(_0x21eb41(0x13c)),_0x49a9d9=_0x188e29['getRankName'](_0x5b1eab),_0xe7daaf=_0x406e84['name'];await _0x188e29['sendPromotionNotification'](_0x5b4a07,_0x4ba478,_0x5b1eab,_0x406e84['elo'],_0x49a9d9,_0xe7daaf,'promotion',{'displayName':_0x4ba478,'source':_0x21eb41(0x101),'adminUser':_0x3ba23e['email'],'ladder':_0x407b8d}),console['log'](_0x21eb41(0x1b2));}catch(_0x1d339b){console[_0x21eb41(0x2e4)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x1d339b);}return alert('Successfully\x20promoted\x20'+_0x4ba478+'\x20to\x20'+_0x406e84[_0x21eb41(0x28b)]+'\x20('+_0x406e84[_0x21eb41(0xfc)]+')'),currentLadder===_0x407b8d&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x4a4da6){console['error']('Error\x20promoting\x20player:',_0x4a4da6),alert('Error\x20promoting\x20player:\x20'+_0x4a4da6['message']);throw _0x4a4da6;}}document['addEventListener'](a4_0xe70f19(0x1a5),()=>{const _0x52c64b=a4_0xe70f19,_0x115535=document[_0x52c64b(0x17d)]('promote-form');_0x115535&&_0x115535['addEventListener']('submit',async _0x2370cf=>{const _0x4c204e=_0x52c64b;_0x2370cf[_0x4c204e(0x1f8)]();const _0x540f33=document['getElementById']('promote-username')['value']['trim'](),_0x5e23e3=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x540f33){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x540f33,_0x5e23e3),document['getElementById']('promote-modal')['classList']['remove'](_0x4c204e(0x231)),document['getElementById'](_0x4c204e(0x147))[_0x4c204e(0x122)]='';}catch(_0xaf1ddd){console['error'](_0x4c204e(0x175),_0xaf1ddd);}});});async function demotePlayer(_0x116964,_0x1e7b2c){const _0x2f9f2a=a4_0xe70f19;try{console['log']('Attempting\x20to\x20demote\x20'+_0x116964+'\x20in\x20'+_0x1e7b2c+'\x20ladder');const _0x5c3125=auth['currentUser'];if(!_0x5c3125)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x2264c1=_0x1e7b2c==='D2'?'playersD2':'players',_0x491b07=_0x1e7b2c==='D2'?'eloHistoryD2':'eloHistory';console[_0x2f9f2a(0x19f)](_0x2f9f2a(0xfb)+_0x2264c1);const _0xe6bdd1=collection(db,_0x2264c1),_0x5754be=query(_0xe6bdd1,where('username','==',_0x116964)),_0x5c6ea0=await getDocs(_0x5754be);if(_0x5c6ea0['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x1e7b2c+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x1e7b2c+'\x20ladder');}const _0x5273b0=_0x5c6ea0['docs'][0x0],_0x844a19=_0x5273b0['data'](),_0x1b01bb=_0x844a19[_0x2f9f2a(0xfa)]||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x1b01bb);const _0x5cbb19=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x2f9f2a(0x2db),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x5a2271=_0x5cbb19['find'](_0x48d70e=>_0x48d70e['elo']<_0x1b01bb);if(!_0x5a2271){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1e7b2c+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1e7b2c+'\x20ladder');}console['log'](_0x2f9f2a(0x217)+_0x5a2271['name']+'\x20('+_0x5a2271['elo']+')'),await updateDoc(doc(db,_0x2264c1,_0x5273b0['id']),{'eloRating':_0x5a2271['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x5c3125[_0x2f9f2a(0x10e)]||_0x2f9f2a(0x101)}),await addDoc(collection(db,_0x491b07),{'player':_0x116964,'previousElo':_0x1b01bb,'newElo':_0x5a2271['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x5a2271['name'],'demotedBy':_0x5c3125[_0x2f9f2a(0x10e)]||_0x2f9f2a(0x101),'gameMode':_0x1e7b2c});try{const {promotionManager:_0x3603f3}=await import(_0x2f9f2a(0x13c)),_0x52bab1=_0x3603f3['getRankName'](_0x1b01bb),_0x372b8a=_0x5a2271[_0x2f9f2a(0x28b)];await _0x3603f3[_0x2f9f2a(0x250)](_0x5273b0['id'],_0x116964,_0x1b01bb,_0x5a2271['elo'],_0x52bab1,_0x372b8a,'demotion',{'displayName':_0x116964,'source':'admin','adminUser':_0x5c3125['email'],'ladder':_0x1e7b2c}),console['log'](_0x2f9f2a(0x2dd));}catch(_0x478729){console['error'](_0x2f9f2a(0x204),_0x478729);}return alert('Successfully\x20demoted\x20'+_0x116964+'\x20to\x20'+_0x5a2271['name']+'\x20('+_0x5a2271[_0x2f9f2a(0xfc)]+')'),currentLadder===_0x1e7b2c&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x1789f9){console['error']('Error\x20demoting\x20player:',_0x1789f9),alert('Error\x20demoting\x20player:\x20'+_0x1789f9[_0x2f9f2a(0x295)]);throw _0x1789f9;}}document[a4_0xe70f19(0x15d)]('DOMContentLoaded',()=>{const _0x50cbe3=document['getElementById']('demote-form');_0x50cbe3&&_0x50cbe3['addEventListener']('submit',async _0x100fe5=>{const _0x2a03e9=a4_0x426c;_0x100fe5['preventDefault']();const _0x457512=document[_0x2a03e9(0x17d)]('demote-username')['value']['trim'](),_0x32edcc=document['querySelector'](_0x2a03e9(0x1a8))['value'];if(!_0x457512){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x457512,_0x32edcc),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')[_0x2a03e9(0x122)]='';}catch(_0x407710){console['error']('Error\x20in\x20demotion:',_0x407710);}});});async function setCustomElo(_0x24bff0,_0x5eb39b,_0x351a4e){const _0x31c3d4=a4_0xe70f19;try{const _0xebd267=auth['currentUser'];if(!_0xebd267||!isAdmin(_0xebd267['email']))throw new Error(_0x31c3d4(0x193));const _0x29863a=_0x351a4e==='D2'?'playersD2':'players',_0x472e96=_0x351a4e==='D2'?'eloHistoryD2':_0x31c3d4(0x1fa),_0x2e501f=collection(db,_0x29863a),_0x46a91f=query(_0x2e501f,where('username','==',_0x24bff0)),_0x40a36e=await getDocs(_0x46a91f);if(_0x40a36e[_0x31c3d4(0x24e)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x351a4e+_0x31c3d4(0x287));const _0x4b5a50=_0x40a36e[_0x31c3d4(0x155)][0x0],_0x4a37c6=_0x4b5a50['data'](),_0x2b3586=_0x4a37c6['eloRating']||0x4b0,_0x198084=writeBatch(db);_0x198084[_0x31c3d4(0x16c)](doc(db,_0x29863a,_0x4b5a50['id']),{'eloRating':_0x5eb39b,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xebd267['email']});const _0x59351b=doc(collection(db,_0x472e96));return _0x198084[_0x31c3d4(0x2cd)](_0x59351b,{'player':_0x24bff0,'previousElo':_0x2b3586,'newElo':_0x5eb39b,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0xebd267['email'],'gameMode':_0x351a4e}),await _0x198084['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x24bff0+'\x20was\x20updated\x20from\x20'+_0x2b3586+_0x31c3d4(0x1f9)+_0x5eb39b,'success'),currentLadder===_0x351a4e&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x12cbfe){console['error']('Error\x20setting\x20custom\x20ELO:',_0x12cbfe);throw _0x12cbfe;}}async function setUserRole(_0x3cf2d5,_0x2ca588,_0x246507){const _0x178898=a4_0xe70f19;try{const _0xabfe7f=auth['currentUser'];if(!_0xabfe7f||!isAdmin(_0xabfe7f['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x2b0c12=_0x2ca588?_0x2ca588['trim']():null,_0x447252=_0x2b0c12?_0x246507||'#808080':null,[_0x15604c,_0x47ce20]=await Promise['all']([getDocs(query(collection(db,_0x178898(0x266)),where('username','==',_0x3cf2d5))),getDocs(query(collection(db,_0x178898(0x1be)),where('username','==',_0x3cf2d5)))]),_0x193bc0=[];if(!_0x15604c['empty'])_0x193bc0['push']({'ref':_0x15604c['docs'][0x0][_0x178898(0x19e)],'source':'D1'});if(!_0x47ce20[_0x178898(0x24e)])_0x193bc0['push']({'ref':_0x47ce20['docs'][0x0][_0x178898(0x19e)],'source':'D2'});if(_0x193bc0['length']===0x0){const [_0x1e3a87,_0x2407d2]=await Promise[_0x178898(0x220)]([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x3cf2d5))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x3cf2d5)))]);if(!_0x1e3a87['empty'])_0x193bc0['push']({'ref':_0x1e3a87['docs'][0x0][_0x178898(0x19e)],'source':_0x178898(0x25c)});if(!_0x2407d2['empty'])_0x193bc0['push']({'ref':_0x2407d2['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x193bc0['length']===0x0)throw new Error(_0x178898(0x225)+_0x3cf2d5+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x5a4b48=writeBatch(db);_0x193bc0[_0x178898(0x1eb)](_0x1df926=>{console['log']('Updating\x20role\x20for\x20'+_0x3cf2d5+'\x20in\x20'+_0x1df926['source']),!_0x2b0c12?_0x5a4b48['update'](_0x1df926['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x5a4b48['update'](_0x1df926['ref'],{'roleName':_0x2b0c12,'roleColor':_0x447252,'roleAssignedBy':_0xabfe7f['email'],'roleAssignedAt':serverTimestamp()});}),await _0x5a4b48['commit']();const _0x1ffbdf=_0x2b0c12?'Role\x20\x22'+_0x2b0c12+'\x22\x20set':'Role\x20removed';return showNotification(_0x1ffbdf+'\x20for\x20user\x20\x22'+_0x3cf2d5+'\x22','success'),!![];}catch(_0x24af77){console['error'](_0x178898(0x1fd),_0x24af77),showNotification('Error:\x20'+_0x24af77['message'],'error');throw _0x24af77;}}function showNotification(_0x4a5a4f,_0x5c67a4=a4_0xe70f19(0x135)){const _0x418bd1=a4_0xe70f19,_0x535198=document['createElement']('div');_0x535198['className']=_0x418bd1(0x19b)+_0x5c67a4,_0x535198['innerHTML']=_0x418bd1(0x296)+getNotificationIcon(_0x5c67a4)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x4a5a4f+_0x418bd1(0x329),document['body'][_0x418bd1(0x106)](_0x535198),setTimeout(()=>{_0x535198['classList']['add']('active');},0xa);const _0x4ed235=setTimeout(()=>{closeNotification(_0x535198);},0x1388);_0x535198['querySelector'](_0x418bd1(0x2e3))[_0x418bd1(0x15d)]('click',()=>{clearTimeout(_0x4ed235),closeNotification(_0x535198);});}function getNotificationIcon(_0x5f6a2d){const _0x4644bc=a4_0xe70f19;switch(_0x5f6a2d){case'success':return'fa-check-circle';case _0x4644bc(0x2e4):return'fa-exclamation-circle';case _0x4644bc(0xfe):return _0x4644bc(0x2f3);case _0x4644bc(0x135):default:return _0x4644bc(0x22b);}}function closeNotification(_0x595bf2){_0x595bf2['classList']['remove']('active'),setTimeout(()=>{_0x595bf2['remove']();},0x12c);}function setupUserRolesSection(){const _0x4dc9de=a4_0xe70f19,_0x514633=document[_0x4dc9de(0x17d)](_0x4dc9de(0x280));_0x514633&&_0x514633[_0x4dc9de(0x15d)]('click',function(){const _0x58db3b=_0x4dc9de;this['classList']['add'](_0x58db3b(0x1e0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x1b216f=_0x58db3b;this[_0x1b216f(0x128)]['remove'](_0x1b216f(0x1e0)),this[_0x1b216f(0x293)]=_0x1b216f(0x322);})[_0x58db3b(0x309)](_0x8e6a61=>{const _0x1e16f5=_0x58db3b;console['error']('Error\x20loading\x20users:',_0x8e6a61),this['classList'][_0x1e16f5(0x30a)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2e350e=_0x1e16f5;this[_0x2e350e(0x293)]=_0x2e350e(0x322);},0xbb8);});});const _0x414387=document[_0x4dc9de(0x17d)]('add-new-role-btn');_0x414387&&_0x414387[_0x4dc9de(0x15d)](_0x4dc9de(0x10d),()=>{const _0x2f79b9=_0x4dc9de,_0x27aaba=document[_0x2f79b9(0x17d)]('set-role-modal');_0x27aaba&&_0x27aaba['classList']['add']('active');});const _0x1d5f60=document[_0x4dc9de(0x17d)]('user-search');_0x1d5f60&&_0x1d5f60[_0x4dc9de(0x15d)]('input',debounce(filterUsersTable,0x12c));const _0x47f344=document['getElementById']('role-filter');_0x47f344&&_0x47f344[_0x4dc9de(0x15d)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x9e1fae=a4_0xe70f19,_0x53d7f8=document['getElementById'](_0x9e1fae(0x2f9));if(!_0x53d7f8)return;_0x53d7f8['innerHTML']=_0x9e1fae(0x137);try{const [_0x17837f,_0x3efb8e,_0x34a05c,_0x4d29b0]=await Promise[_0x9e1fae(0x220)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x2b4936=new Map();function _0x5a8197(_0x1779ad,_0x4d69e1){_0x1779ad['forEach'](_0x1270b5=>{const _0x46ace4=a4_0x426c,_0x3b471b=_0x1270b5['data']();if(!_0x3b471b['username'])return;if(!_0x2b4936[_0x46ace4(0x2ca)](_0x3b471b['username']))_0x2b4936['set'](_0x3b471b['username'],{'username':_0x3b471b[_0x46ace4(0x310)],'roleName':_0x3b471b['roleName']||null,'roleColor':_0x3b471b['roleColor']||null,'roleAssignedBy':_0x3b471b['roleAssignedBy']||null,'roleAssignedAt':_0x3b471b['roleAssignedAt']||null,'sources':[_0x4d69e1]});else{const _0xe832fd=_0x2b4936['get'](_0x3b471b['username']);_0x3b471b['roleName']&&(!_0xe832fd['roleName']||_0x4d69e1==='D1'||_0x4d69e1==='D2')&&(_0xe832fd['roleName']=_0x3b471b['roleName'],_0xe832fd['roleColor']=_0x3b471b['roleColor'],_0xe832fd[_0x46ace4(0x1ea)]=_0x3b471b[_0x46ace4(0x1ea)],_0xe832fd['roleAssignedAt']=_0x3b471b[_0x46ace4(0x1e6)]),!_0xe832fd[_0x46ace4(0x2ce)]['includes'](_0x4d69e1)&&_0xe832fd['sources']['push'](_0x4d69e1);}});}_0x5a8197(_0x17837f,'D1'),_0x5a8197(_0x3efb8e,'D2'),_0x5a8197(_0x34a05c,_0x9e1fae(0x2a0)),_0x5a8197(_0x4d29b0,'Profile');const _0xc5fbb8=Array[_0x9e1fae(0x164)](_0x2b4936['values']())['sort']((_0x2ff828,_0x1f39af)=>_0x2ff828[_0x9e1fae(0x310)]['localeCompare'](_0x1f39af['username']));if(_0xc5fbb8['length']===0x0){_0x53d7f8['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x53d7f8['innerHTML']='',_0xc5fbb8['forEach'](_0x25c956=>{const _0x991290=_0x9e1fae,_0xaed1db=document[_0x991290(0x2b5)]('tr');_0xaed1db[_0x991290(0x2b8)]['username']=_0x25c956[_0x991290(0x310)],_0xaed1db['dataset']['roleName']=_0x25c956[_0x991290(0x286)]||'',_0xaed1db['dataset'][_0x991290(0x246)]=_0x25c956[_0x991290(0x246)]||'#808080';const _0x4a2134=_0x25c956['roleAssignedAt']?new Date(_0x25c956[_0x991290(0x1e6)]['seconds']*0x3e8)['toLocaleDateString']():_0x991290(0x2c4),_0x10e714=_0x25c956['roleName']?_0x991290(0x211)+_0x25c956['roleColor']+';\x20color:\x20'+getContrastColor(_0x25c956['roleColor'])+_0x991290(0x140)+_0x25c956['roleName']+_0x991290(0x1e2):'<span\x20class=\x22no-role\x22>None</span>';_0xaed1db['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x25c956['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x25c956['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10e714+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x25c956['roleAssignedBy']||'N/A')+_0x991290(0xf7)+_0x4a2134+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x25c956['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x25c956['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x25c956['username']+_0x991290(0xfd):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x53d7f8[_0x991290(0x106)](_0xaed1db);}),document[_0x9e1fae(0x1f4)]('.edit-role-btn')['forEach'](_0x496512=>{_0x496512['addEventListener']('click',()=>{const _0x5975fd=_0x496512['dataset']['username'];openRoleEditModal(_0x5975fd);});}),document[_0x9e1fae(0x1f4)](_0x9e1fae(0xf6))[_0x9e1fae(0x1eb)](_0x4fdfc7=>{_0x4fdfc7['addEventListener']('click',()=>{const _0x18049d=a4_0x426c,_0xb9bd30=_0x4fdfc7['dataset'][_0x18049d(0x310)];confirm(_0x18049d(0x315)+_0xb9bd30+'?')&&setUserRole(_0xb9bd30,null,null)['then'](()=>loadUsersWithRoles())[_0x18049d(0x309)](_0x3de6d7=>console['error']('Error\x20removing\x20role:',_0x3de6d7));});});}catch(_0x1e8d0c){console['error']('Error\x20loading\x20users:',_0x1e8d0c),_0x53d7f8['innerHTML']=_0x9e1fae(0x200);}}function openRoleEditModal(_0x15cb69){const _0x4aecad=a4_0xe70f19;console[_0x4aecad(0x19f)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x15cb69);const _0x4b1d86=document['getElementById']('set-role-modal'),_0x2deeb8=document['getElementById'](_0x4aecad(0x17c)),_0x5c60d2=document['getElementById']('user-role');if(!_0x4b1d86){console['error'](_0x4aecad(0x124)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x4b1d86);_0x2deeb8?(_0x2deeb8['value']=_0x15cb69,console['log']('Username\x20input\x20set\x20to:\x20'+_0x15cb69)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x36da96=document[_0x4aecad(0x158)]('#users-table-body\x20tr[data-username=\x22'+_0x15cb69+'\x22]');if(_0x36da96&&_0x5c60d2){const _0x56aac9=_0x36da96['dataset']['role'];_0x5c60d2['value']=_0x56aac9==='none'?'':_0x56aac9,console[_0x4aecad(0x19f)](_0x4aecad(0x1e1)+_0x5c60d2['value']+_0x4aecad(0x13d)+_0x56aac9+')');}else{if(!_0x36da96)console['warn'](_0x4aecad(0x321)+_0x15cb69+'\x20not\x20found.');if(!_0x5c60d2)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x5c60d2)_0x5c60d2['value']='';}console[_0x4aecad(0x19f)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x4b1d86['classList']['add'](_0x4aecad(0x231));const _0x107fd1=document[_0x4aecad(0x17d)](_0x4aecad(0x2cf));_0x107fd1?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x107fd1['removeEventListener'](_0x4aecad(0x10d),closeModalHandler),_0x107fd1[_0x4aecad(0x15d)]('click',closeModalHandler)):console[_0x4aecad(0x2e9)]('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x4b1d86['removeEventListener'](_0x4aecad(0x10d),closeModalBackgroundHandler),_0x4b1d86['addEventListener'](_0x4aecad(0x10d),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x133865){_0x133865['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x1b3fa5=a4_0xe70f19,_0x380215=document['getElementById']('set-role-modal');_0x380215&&(_0x380215['classList'][_0x1b3fa5(0x30a)]('active'),_0x380215['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x3f215f=a4_0xe70f19,_0x40d6c4=document['getElementById'](_0x3f215f(0x29e))?.[_0x3f215f(0x122)]['toLowerCase']()||'',_0x366883=document[_0x3f215f(0x17d)]('role-filter')?.[_0x3f215f(0x122)]||_0x3f215f(0x220),_0x5584f2=document['querySelectorAll']('#users-table-body\x20tr');let _0x22cfad=0x0;_0x5584f2[_0x3f215f(0x1eb)](_0xe9f5f1=>{const _0x3006ff=_0x3f215f;if(_0xe9f5f1['querySelector'](_0x3006ff(0x2d9))||_0xe9f5f1['querySelector']('.empty-state')||_0xe9f5f1['querySelector'](_0x3006ff(0x1a2)))return;const _0x3bc396=_0xe9f5f1['dataset'][_0x3006ff(0x310)]?.['toLowerCase']()||'',_0x4f49da=_0xe9f5f1[_0x3006ff(0x2b8)]['role']||_0x3006ff(0x284),_0x547959=_0x3bc396['includes'](_0x40d6c4),_0x563e29=_0x366883==='all'||_0x4f49da===_0x366883;_0x547959&&_0x563e29?(_0xe9f5f1['style']['display']='',_0x22cfad++):_0xe9f5f1['style']['display']=_0x3006ff(0x284);});if(_0x22cfad===0x0&&_0x5584f2['length']>0x0){const _0x29a1d3=document['getElementById']('users-table-body');if(_0x29a1d3){if(!_0x29a1d3[_0x3f215f(0x158)]('.no-results')){const _0x123934=document['createElement']('tr');_0x123934['classList']['add'](_0x3f215f(0x23b)),_0x123934['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x29a1d3['appendChild'](_0x123934);}}}else{const _0x429980=document[_0x3f215f(0x158)]('.no-results');_0x429980&&_0x429980['remove']();}}function setupManageArticlesSection(){const _0x59e7be=a4_0xe70f19,_0x18396d=document['getElementById']('load-articles-data');_0x18396d&&_0x18396d['addEventListener']('click',function(){this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x41a2a3=a4_0x426c;this['classList'][_0x41a2a3(0x30a)](_0x41a2a3(0x1e0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0xbdd862=>{const _0x12e408=a4_0x426c;console[_0x12e408(0x2e4)]('Error\x20loading\x20articles:',_0xbdd862),this['classList']['remove'](_0x12e408(0x1e0)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x10d35d=document['getElementById']('create-new-article-btn');_0x10d35d?(console[_0x59e7be(0x19f)]('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x10d35d['style'][_0x59e7be(0x1ef)]='block',_0x10d35d['addEventListener'](_0x59e7be(0x10d),()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x244a41=document['getElementById']('article-form');_0x244a41&&_0x244a41['addEventListener'](_0x59e7be(0x1f3),_0x34e572=>{_0x34e572['preventDefault'](),saveArticle();});const _0x8df8f9=document['getElementById']('cancel-article-btn');_0x8df8f9&&_0x8df8f9['addEventListener']('click',()=>{closeArticleModal();});const _0x55e9fa=document['querySelector']('#article-modal\x20.close-btn');_0x55e9fa&&_0x55e9fa['addEventListener']('click',()=>{closeArticleModal();});const _0x160579=document['getElementById']('article-modal');_0x160579&&_0x160579[_0x59e7be(0x15d)]('click',_0x5bf343=>{_0x5bf343['target']===_0x160579&&closeArticleModal();});}async function loadArticles(){const _0xfb78e5=a4_0xe70f19,_0x275d2e=document['getElementById']('articles-table-body');if(!_0x275d2e)return;_0x275d2e['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x2e9339=collection(db,'articles'),_0x1af26a=query(_0x2e9339,orderBy('createdAt',_0xfb78e5(0x14f))),_0x1f7f40=await getDocs(_0x1af26a);if(_0x1f7f40[_0xfb78e5(0x24e)]){_0x275d2e['innerHTML']=_0xfb78e5(0x1b3);return;}_0x275d2e['innerHTML']='',_0x1f7f40['forEach'](_0x1f3e40=>{const _0xbcf2b0=_0xfb78e5,_0x2783de=_0x1f3e40['data'](),_0x36bd92=document[_0xbcf2b0(0x2b5)]('tr'),_0x3e4fe3=_0x2783de['createdAt']?new Date(_0x2783de['createdAt']['seconds']*0x3e8)['toLocaleString']():_0xbcf2b0(0x2c4);_0x36bd92['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2783de['title']||'Untitled')+_0xbcf2b0(0xf7)+(_0x2783de['author']||'Unknown')+_0xbcf2b0(0xf7)+_0x3e4fe3+_0xbcf2b0(0x2b9)+_0x1f3e40['id']+_0xbcf2b0(0x1ac)+_0x1f3e40['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x275d2e[_0xbcf2b0(0x106)](_0x36bd92);}),setupArticleActionButtons();}catch(_0x32465e){console['error'](_0xfb78e5(0x218),_0x32465e),_0x275d2e[_0xfb78e5(0x293)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x32465e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x388048=a4_0xe70f19;document['querySelectorAll']('.edit-article-btn')[_0x388048(0x1eb)](_0xbcdc47=>{_0xbcdc47['addEventListener']('click',async _0x22e568=>{const _0x180203=a4_0x426c,_0x300433=_0x22e568['currentTarget'][_0x180203(0x2b8)]['id'];openArticleModal(_0x300433);});}),document[_0x388048(0x1f4)]('.delete-article-btn')['forEach'](_0x1e3c74=>{_0x1e3c74['addEventListener']('click',async _0x496bbe=>{const _0x293cba=a4_0x426c,_0x2574b1=_0x496bbe['currentTarget'][_0x293cba(0x2b8)]['id'];confirmDeleteArticle(_0x2574b1);});});}function openArticleModal(_0x96efa8=null){const _0x3139d5=a4_0xe70f19,_0x2a91d7=document['getElementById']('article-modal'),_0x2dfa3e=document['getElementById']('article-modal-title'),_0x1899f4=document['getElementById']('article-form'),_0x181378=document[_0x3139d5(0x17d)]('article-id');_0x1899f4['reset'](),_0x181378['value']='';if(_0x96efa8)_0x2dfa3e['textContent']='Edit\x20Article',_0x181378['value']=_0x96efa8,loadArticleData(_0x96efa8);else{_0x2dfa3e['textContent']='Create\x20Article';const _0x345f66=auth['currentUser'];if(_0x345f66){const _0x13c50c=document['getElementById'](_0x3139d5(0x2ee));if(_0x13c50c&&_0x345f66[_0x3139d5(0x27b)])_0x13c50c['value']=_0x345f66['displayName'];else _0x13c50c&&(_0x13c50c['value']=_0x345f66['email']);}}_0x2a91d7['classList'][_0x3139d5(0x32f)]('active');}async function loadArticleData(_0x1153b5){const _0x5ea62d=a4_0xe70f19;try{const _0x4d8c87=doc(db,'articles',_0x1153b5),_0x32bc2d=await getDoc(_0x4d8c87);if(!_0x32bc2d['exists']()){showNotification(_0x5ea62d(0x1da),'error');return;}const _0x405e39=_0x32bc2d['data']();document['getElementById']('article-title')['value']=_0x405e39['title']||'',document['getElementById'](_0x5ea62d(0x2ee))['value']=_0x405e39[_0x5ea62d(0x1ed)]||'',document['getElementById']('article-image-url')['value']=_0x405e39[_0x5ea62d(0x2c3)]||'',document['getElementById']('article-content')['value']=_0x405e39['content']||'';}catch(_0x4ff458){console['error'](_0x5ea62d(0x1e9),_0x4ff458),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x2deedc=a4_0xe70f19;try{const _0x48fb6c=document[_0x2deedc(0x17d)]('article-id')['value'],_0x1dbb1e=document[_0x2deedc(0x17d)]('article-title')['value']['trim'](),_0x5d1756=document['getElementById']('article-author')[_0x2deedc(0x122)][_0x2deedc(0x142)](),_0x266fb3=document['getElementById']('article-image-url')[_0x2deedc(0x122)]['trim'](),_0x4c3e91=document['getElementById']('article-content')['value']['trim']();if(!_0x1dbb1e||!_0x4c3e91){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x17fced=auth['currentUser'];if(!_0x17fced){showNotification(_0x2deedc(0x108),_0x2deedc(0x2e4));return;}const _0x14511a={'title':_0x1dbb1e,'author':_0x5d1756,'imageUrl':_0x266fb3||null,'content':_0x4c3e91,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x17fced['email']};!_0x48fb6c?(_0x14511a['createdAt']=serverTimestamp(),_0x14511a['createdBy']=_0x17fced['email'],await addDoc(collection(db,_0x2deedc(0x253)),_0x14511a),showNotification(_0x2deedc(0x27a),'success')):(await updateDoc(doc(db,'articles',_0x48fb6c),_0x14511a),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x16c728){console[_0x2deedc(0x2e4)]('Error\x20saving\x20article:',_0x16c728),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x16c728[_0x2deedc(0x295)],_0x2deedc(0x2e4));}}function closeArticleModal(){const _0x1e60f1=a4_0xe70f19,_0x3599a1=document[_0x1e60f1(0x17d)]('article-modal');_0x3599a1&&_0x3599a1['classList']['remove']('active');}async function confirmDeleteArticle(_0xb489a0){const _0x53b044=a4_0xe70f19;if(confirm(_0x53b044(0x1ad)))try{await deleteDoc(doc(db,'articles',_0xb489a0)),loadArticles(),showNotification(_0x53b044(0x22a),'success');}catch(_0x29d0a1){console['error']('Error\x20deleting\x20article:',_0x29d0a1),showNotification(_0x53b044(0x25b)+_0x29d0a1['message'],'error');}}function setupTrophyManagementSection(){const _0x45c47f=a4_0xe70f19,_0x2ed98f=document['getElementById']('load-trophies-data');_0x2ed98f&&_0x2ed98f['addEventListener']('click',function(){const _0x29a403=a4_0x426c;this[_0x29a403(0x128)]['add'](_0x29a403(0x1e0)),this['innerHTML']=_0x29a403(0x2a6);const _0x538e3a=document['getElementById']('assign-trophy-image');_0x538e3a&&(_0x538e3a['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x327454=_0x29a403;this['classList']['remove']('loading'),this[_0x327454(0x293)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x1f7ba8=>{const _0x13e6bf=_0x29a403;console[_0x13e6bf(0x2e4)](_0x13e6bf(0x1ba),_0x1f7ba8),this['classList'][_0x13e6bf(0x30a)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x16eaeb=_0x13e6bf;this['innerHTML']=_0x16eaeb(0x160);},0xbb8);});});const _0x11576c=document['getElementById'](_0x45c47f(0x194));_0x11576c&&_0x11576c['addEventListener']('click',()=>{openTrophyModal();});const _0x554bd1=document['getElementById']('trophy-form');_0x554bd1&&_0x554bd1['addEventListener'](_0x45c47f(0x1f3),_0x3d80f9=>{_0x3d80f9['preventDefault'](),saveTrophyDefinition();});const _0x147f0a=document['getElementById']('cancel-trophy-btn');_0x147f0a&&_0x147f0a['addEventListener'](_0x45c47f(0x10d),()=>{closeTrophyModal();});document['querySelectorAll'](_0x45c47f(0x268))['forEach'](_0x2b5a61=>{const _0x559bb9=_0x45c47f;_0x2b5a61['addEventListener'](_0x559bb9(0x10d),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x28df56=document['getElementById'](_0x45c47f(0x1dc));_0x28df56&&_0x28df56['addEventListener']('click',_0x411183=>{_0x411183['target']===_0x28df56&&closeTrophyModal();});const _0x13f031=document['getElementById']('assign-trophy-modal');_0x13f031&&_0x13f031['addEventListener']('click',_0x5d10b7=>{_0x5d10b7['target']===_0x13f031&&closeAssignTrophyModal();});const _0x309ecb=document[_0x45c47f(0x17d)](_0x45c47f(0x205));_0x309ecb&&_0x309ecb['addEventListener']('submit',_0x22d8a1=>{_0x22d8a1['preventDefault'](),assignTrophyToPlayer();});const _0x576228=document[_0x45c47f(0x17d)]('cancel-assign-btn');_0x576228&&_0x576228[_0x45c47f(0x15d)](_0x45c47f(0x10d),()=>{closeAssignTrophyModal();});const _0x11bd96=document['getElementById']('trophy-image-url');_0x11bd96&&(_0x11bd96[_0x45c47f(0x15d)]('input',updateTrophyImagePreview),_0x11bd96['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x2cbb32=a4_0xe70f19,_0x8038b5=document['getElementById'](_0x2cbb32(0x187))['value']['trim'](),_0x331d38=document[_0x2cbb32(0x17d)](_0x2cbb32(0x31a));if(!_0x331d38){const _0x5a89bf=document['getElementById']('trophy-image-url')['closest'](_0x2cbb32(0x262)),_0x2b028b=document[_0x2cbb32(0x2b5)](_0x2cbb32(0x25d));_0x2b028b['id']='trophy-image-preview',_0x2b028b['className']='trophy-preview-container',_0x5a89bf['appendChild'](_0x2b028b);const _0x546468=document['createElement'](_0x2cbb32(0x207));_0x546468['id']='trophy-preview-img',_0x546468[_0x2cbb32(0x1b7)]='Trophy\x20Preview',_0x546468['onerror']=function(){const _0x3ff45f=_0x2cbb32;this[_0x3ff45f(0x30c)]=DEFAULT_TROPHY_IMAGE,this['classList'][_0x3ff45f(0x32f)](_0x3ff45f(0x2e4));},_0x2b028b['appendChild'](_0x546468);}const _0x35286d=document['getElementById']('trophy-preview-img');_0x8038b5?(_0x35286d[_0x2cbb32(0x30c)]=_0x8038b5,_0x35286d['style']['display']='block',_0x35286d['classList']['remove'](_0x2cbb32(0x2e4))):(_0x35286d['src']=DEFAULT_TROPHY_IMAGE,_0x35286d[_0x2cbb32(0x2b6)]['display']='block');}async function loadTrophyDefinitions(){const _0x185e62=a4_0xe70f19,_0xab26f7=document['getElementById'](_0x185e62(0x1ab));if(!_0xab26f7)return;_0xab26f7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0xf50ebe=collection(db,_0x185e62(0x17e)),_0x3f86ff=query(_0xf50ebe,orderBy('createdAt',_0x185e62(0x14f))),_0x13eb99=await getDocs(_0x3f86ff);if(_0x13eb99['empty']){_0xab26f7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0xab26f7[_0x185e62(0x293)]='',_0x13eb99['forEach'](_0x3f139a=>{const _0x2e164b=_0x185e62,_0x3fb430=_0x3f139a['data'](),_0x3d396c=document['createElement']('tr'),_0x47bfe3=_0x3fb430['createdAt']?new Date(_0x3fb430['createdAt'][_0x2e164b(0x26c)]*0x3e8)['toLocaleString']():_0x2e164b(0x2c4);_0x3d396c['innerHTML']=_0x2e164b(0x219)+(_0x3fb430['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3fb430['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+_0x2e164b(0x2d7)+(_0x3fb430['name']||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x3fb430['rarity']||'common')+'\x22>'+(_0x3fb430['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x47bfe3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x3f139a['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x3f139a['id']+_0x2e164b(0x2cc)+_0x3f139a['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xab26f7['appendChild'](_0x3d396c);}),setupTrophyActionButtons();}catch(_0x3f5f17){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x3f5f17),_0xab26f7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x3f5f17['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x5421c8=a4_0xe70f19;document[_0x5421c8(0x1f4)]('.edit-trophy-btn')['forEach'](_0x445f9b=>{_0x445f9b['addEventListener']('click',_0x2e2050=>{const _0x3fde0c=_0x2e2050['currentTarget']['dataset']['id'];openTrophyModal(_0x3fde0c);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x715b9b=>{const _0x3e9734=_0x5421c8;_0x715b9b['addEventListener'](_0x3e9734(0x10d),_0x308068=>{const _0xbb2ea3=_0x3e9734,_0x4350f8=_0x308068[_0xbb2ea3(0x235)]['dataset']['id'];openAssignTrophyModal(_0x4350f8);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x3832ab=>{const _0x56d88c=_0x5421c8;_0x3832ab['addEventListener'](_0x56d88c(0x10d),_0x32d1c4=>{const _0x592a45=_0x56d88c,_0xe0fde=_0x32d1c4[_0x592a45(0x235)]['dataset']['id'];confirmDeleteTrophy(_0xe0fde);});});}function openTrophyModal(_0x296289=null){const _0x306389=a4_0xe70f19,_0x5cf5b6=document['getElementById']('trophy-modal'),_0x51979a=document[_0x306389(0x17d)]('trophy-modal-title'),_0x22282f=document[_0x306389(0x17d)]('trophy-form'),_0x1f819d=document['getElementById']('trophy-id');_0x22282f['reset'](),_0x1f819d[_0x306389(0x122)]='';const _0x4e4d52=document['getElementById']('trophy-preview-img');_0x4e4d52&&(_0x4e4d52['src']=DEFAULT_TROPHY_IMAGE,_0x4e4d52['classList'][_0x306389(0x30a)](_0x306389(0x2e4))),_0x296289?(_0x51979a[_0x306389(0x1c5)]='Edit\x20Trophy',_0x1f819d[_0x306389(0x122)]=_0x296289,loadTrophyData(_0x296289)):_0x51979a['textContent']=_0x306389(0x1cf),_0x5cf5b6[_0x306389(0x128)][_0x306389(0x32f)]('active');}async function loadTrophyData(_0x4c18f3){const _0x5a1b69=a4_0xe70f19;try{const _0x2db3aa=doc(db,'trophyDefinitions',_0x4c18f3),_0x545a82=await getDoc(_0x2db3aa);if(!_0x545a82['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x213417=_0x545a82['data']();document['getElementById']('trophy-name')[_0x5a1b69(0x122)]=_0x213417[_0x5a1b69(0x28b)]||'',document['getElementById']('trophy-description')[_0x5a1b69(0x122)]=_0x213417['description']||'',document[_0x5a1b69(0x17d)]('trophy-image-url')[_0x5a1b69(0x122)]=_0x213417['image']||'',document['getElementById']('trophy-rarity')[_0x5a1b69(0x122)]=_0x213417['rarity']||'common',updateTrophyImagePreview();}catch(_0x303629){console['error']('Error\x20loading\x20trophy\x20data:',_0x303629),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x5a1b69(0x2e4));}}async function saveTrophyDefinition(){const _0x467ca5=a4_0xe70f19;try{const _0x3e68bf=document['getElementById']('trophy-id')['value'],_0x5b6869=document[_0x467ca5(0x17d)](_0x467ca5(0x168))['value'][_0x467ca5(0x142)](),_0x1b3c63=document[_0x467ca5(0x17d)](_0x467ca5(0x2fd))['value']['trim'](),_0x111f34=document[_0x467ca5(0x17d)]('trophy-image-url')['value']['trim'](),_0xb5bc5c=document['getElementById'](_0x467ca5(0x272))['value'];if(!_0x5b6869||!_0x1b3c63||!_0x111f34){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x592959=auth[_0x467ca5(0x14e)];if(!_0x592959){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x467ca5(0x2e4));return;}const _0x4cecef={'name':_0x5b6869,'description':_0x1b3c63,'image':_0x111f34,'rarity':_0xb5bc5c,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x592959['email']};!_0x3e68bf?(_0x4cecef['createdAt']=serverTimestamp(),_0x4cecef[_0x467ca5(0x2b2)]=_0x592959['email'],await addDoc(collection(db,'trophyDefinitions'),_0x4cecef),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x3e68bf),_0x4cecef),showNotification('Trophy\x20updated\x20successfully',_0x467ca5(0x12f))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x3410c9){console['error'](_0x467ca5(0x130),_0x3410c9),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x3410c9['message'],'error');}}function closeTrophyModal(){const _0x367174=document['getElementById']('trophy-modal');_0x367174&&_0x367174['classList']['remove']('active');}async function confirmDeleteTrophy(_0x1c3030){const _0x595ada=a4_0xe70f19;if(!_0x1c3030){console[_0x595ada(0x2e4)]('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x2dbfa8=auth['currentUser'];if(!_0x2dbfa8){showNotification(_0x595ada(0x1ec),'error');return;}console[_0x595ada(0x19f)]('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x1c3030),await deleteDoc(doc(db,'trophyDefinitions',_0x1c3030)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x595ada(0x12f)),loadTrophyDefinitions();}catch(_0x487729){console[_0x595ada(0x2e4)]('Error\x20deleting\x20trophy\x20definition:',_0x487729),showNotification(_0x595ada(0x1ce)+_0x487729['message'],'error');}}async function openAssignTrophyModal(_0x207e3c){const _0x13daf6=a4_0xe70f19;try{const _0x39e77f=doc(db,'trophyDefinitions',_0x207e3c),_0x1ec2a2=await getDoc(_0x39e77f);if(!_0x1ec2a2['exists']()){showNotification(_0x13daf6(0x283),'error');return;}const _0x2619c1=_0x1ec2a2['data']();document[_0x13daf6(0x17d)](_0x13daf6(0x238))[_0x13daf6(0x122)]=_0x207e3c,document['getElementById']('assign-trophy-name')['value']=_0x2619c1[_0x13daf6(0x28b)],document['getElementById']('assign-trophy-image')['src']=_0x2619c1[_0x13daf6(0x152)]||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x2619c1[_0x13daf6(0x28b)]||'Unnamed\x20Trophy',document[_0x13daf6(0x17d)]('assign-trophy-description')['textContent']=_0x2619c1['description']||'No\x20description';const _0x25d31f=document['getElementById']('assign-trophy-rarity');_0x25d31f['textContent']=_0x2619c1['rarity']||'common',_0x25d31f['className']='trophy-rarity\x20'+(_0x2619c1['rarity']||_0x13daf6(0x18e));const _0x4ac431=document['getElementById'](_0x13daf6(0x2e0));_0x4ac431['classList']['add'](_0x13daf6(0x231));}catch(_0x28c35a){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x28c35a),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x397a72=a4_0xe70f19,_0x4f6b1c=document[_0x397a72(0x17d)]('assign-trophy-modal');_0x4f6b1c&&_0x4f6b1c[_0x397a72(0x128)]['remove']('active');}async function assignTrophyToPlayer(){const _0x41933b=a4_0xe70f19;try{const _0x2bbfb5=document['getElementById']('assign-trophy-id')['value'],_0x35f6a9=document['getElementById']('assign-trophy-name')['value'],_0x56385f=document['getElementById']('assign-player-username')['value']['trim'](),_0x19f3f3=document[_0x41933b(0x158)](_0x41933b(0x212))['value'];if(!_0x2bbfb5||!_0x56385f){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0x41933b(0x2e4));return;}const _0x5769e2=auth[_0x41933b(0x14e)];if(!_0x5769e2){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x3ccdd6=null,_0x54c4ba=null,_0x1d19be=null;if(_0x19f3f3==='non-participant'){const _0x2301bb=collection(db,'nonParticipants'),_0x22a6a7=query(_0x2301bb,where('username','==',_0x56385f)),_0x1cc46d=await getDocs(_0x22a6a7);!_0x1cc46d['empty']&&(_0x3ccdd6=_0x1cc46d['docs'][0x0],_0x54c4ba=_0x3ccdd6['id'],_0x1d19be=_0x3ccdd6['data']());}else{const _0x442eb5=_0x19f3f3==='D1'?_0x41933b(0x266):_0x19f3f3==='D2'?'playersD2':_0x41933b(0x285),_0x83e198=collection(db,_0x442eb5),_0x1571da=query(_0x83e198,where('username','==',_0x56385f)),_0x4f5c45=await getDocs(_0x1571da);!_0x4f5c45['empty']&&(_0x3ccdd6=_0x4f5c45['docs'][0x0],_0x54c4ba=_0x3ccdd6['id'],_0x1d19be=_0x3ccdd6['data']());}if(!_0x3ccdd6){showNotification('Player\x20\x22'+_0x56385f+'\x22\x20not\x20found\x20in\x20'+(_0x19f3f3==='non-participant'?'non-participants':_0x19f3f3+'\x20ladder'),'error');return;}const _0x1fe375=collection(db,'userTrophies'),_0xba6db2=query(_0x1fe375,where('userId','==',_0x54c4ba),where('trophyId','==',_0x2bbfb5)),_0x118d1e=await getDocs(_0xba6db2);if(!_0x118d1e['empty']){showNotification(_0x41933b(0x169)+_0x56385f+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x54c4ba,'playerUsername':_0x56385f,'trophyId':_0x2bbfb5,'awardedAt':serverTimestamp(),'awardedBy':_0x5769e2['email'],'ladder':_0x19f3f3}),showNotification('Trophy\x20\x22'+_0x35f6a9+_0x41933b(0x167)+_0x56385f,'success'),closeAssignTrophyModal();}catch(_0x45a478){console[_0x41933b(0x2e4)](_0x41933b(0x270),_0x45a478),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x45a478['message'],_0x41933b(0x2e4));}}function setupInactivePlayersSection(){const _0x281379=a4_0xe70f19,_0x3bcdb2=document[_0x281379(0x17d)]('inactive-days-filter');_0x3bcdb2&&_0x3bcdb2['addEventListener']('change',function(){const _0xc8e264=_0x281379,_0x14278f=document[_0xc8e264(0x17d)](_0xc8e264(0x151));if(_0x14278f)_0x14278f['click']();});const _0x4a185a=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x46639f=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x4a185a&&_0x46639f&&(_0x4a185a['addEventListener']('change',function(){const _0x42e738=_0x281379;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x42e738(0x30b))[_0x42e738(0x2b6)]['display']!=='none'){const _0x136973=document[_0x42e738(0x17d)](_0x42e738(0x151));if(_0x136973)_0x136973['click']();}}}),_0x46639f['addEventListener']('change',function(){const _0x2f445b=_0x281379;if(this['checked']){currentLadder='D2';if(document['getElementById'](_0x2f445b(0x30b))['style']['display']!=='none'){const _0x194c15=document['getElementById'](_0x2f445b(0x151));if(_0x194c15)_0x194c15['click']();}}}));const _0x12c7da=document['getElementById'](_0x281379(0x116));_0x12c7da&&_0x12c7da['addEventListener']('input',debounce(function(){const _0x4b4b87=_0x12c7da['value']['toLowerCase'](),_0x5e594d=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x5e594d['forEach'](_0x1fcb3a=>{const _0x4dcb93=a4_0x426c;if(_0x1fcb3a['querySelector'](_0x4dcb93(0x2d9))||_0x1fcb3a['querySelector']('.empty-state')||_0x1fcb3a[_0x4dcb93(0x158)]('.error-state'))return;const _0x2628a4=_0x1fcb3a['cells'][0x0]?.['textContent']['toLowerCase']()||'',_0x56ee2e=_0x1fcb3a[_0x4dcb93(0x16f)][0x5]?.[_0x4dcb93(0x1c5)][_0x4dcb93(0x21d)]()||'';_0x2628a4['includes'](_0x4b4b87)||_0x56ee2e[_0x4dcb93(0x20d)](_0x4b4b87)?_0x1fcb3a[_0x4dcb93(0x2b6)]['display']='':_0x1fcb3a[_0x4dcb93(0x2b6)]['display']='none';});},0x12c)),document['addEventListener'](_0x281379(0x10d),function(_0x3f8de4){if(_0x3f8de4['target']['closest']('.view-player-btn')){const _0x50aafe=_0x3f8de4['target']['closest']('.view-player-btn'),_0x8eb051=_0x50aafe['dataset']['username'];_0x8eb051&&alert('View\x20player\x20details\x20for\x20'+_0x8eb051+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x281379(0x323));}async function loadInactivePlayersData(){const _0x2b0be7=a4_0xe70f19,_0x2ee020=document['getElementById'](_0x2b0be7(0x192));if(!_0x2ee020)return;_0x2ee020[_0x2b0be7(0x293)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x2e8cb7=document[_0x2b0be7(0x17d)](_0x2b0be7(0xf9)),_0x4f394e=_0x2e8cb7?parseInt(_0x2e8cb7['value'])||0x0:0x0,_0x557a67=collection(db,currentLadder==='D1'?'players':_0x2b0be7(0x1be)),_0x545157=await getDocs(_0x557a67);if(_0x545157['empty']){_0x2ee020['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x29d3e4=[];_0x545157[_0x2b0be7(0x1eb)](_0x2d4401=>{const _0x32eebb=_0x2b0be7,_0x410093=_0x2d4401['data']();_0x29d3e4[_0x32eebb(0x1a3)]({..._0x410093,'id':_0x2d4401['id'],'username':_0x410093[_0x32eebb(0x310)]||'Unknown\x20Player'});}),console['log'](_0x2b0be7(0x317)+_0x29d3e4['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x5050ad=currentLadder==='D1'?'approvedMatches':_0x2b0be7(0x1f0),_0x318e79=_0x29d3e4[_0x2b0be7(0x29b)](async _0x27b2fa=>{const _0x346056=_0x2b0be7;try{const _0xfcce39=collection(db,_0x5050ad),_0x50f844=query(_0xfcce39,or(where(_0x346056(0x183),'==',_0x27b2fa[_0x346056(0x310)]),where(_0x346056(0x16d),'==',_0x27b2fa[_0x346056(0x310)])),orderBy(_0x346056(0x12b),_0x346056(0x14f)),limit(0x1)),_0x1e53b2=await getDocs(_0x50f844);if(!_0x1e53b2['empty']){const _0x46ca6f=_0x1e53b2['docs'][0x0][_0x346056(0x275)](),_0x3508dd=_0x46ca6f['approvedAt']?new Date(_0x46ca6f['approvedAt']['seconds']*0x3e8):null,_0x38382e=new Date(),_0xfc774=_0x3508dd?Math['floor']((_0x38382e-_0x3508dd)/(0x3e8*0x3c*0x3c*0x18)):null,_0x28e828=_0x46ca6f[_0x346056(0x183)]===_0x27b2fa['username']?_0x46ca6f['loserUsername']:_0x46ca6f['winnerUsername'],_0x46f62e=_0x46ca6f['winnerUsername']===_0x27b2fa['username']?'Won':'Lost';return{..._0x27b2fa,'lastMatch':{'date':_0x3508dd?_0x3508dd['toLocaleDateString']():'N/A','opponent':_0x28e828||'Unknown','result':_0x46f62e,'timestamp':_0x3508dd||new Date(0x0),'daysSinceMatch':_0xfc774||Number[_0x346056(0x1e4)]}};}else return{..._0x27b2fa,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x42497d){return console['error'](_0x346056(0x2dc)+_0x27b2fa['username']+':',_0x42497d),{..._0x27b2fa,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x2c1b2f=await Promise[_0x2b0be7(0x220)](_0x318e79);_0x2c1b2f[_0x2b0be7(0x27f)]((_0x4c3f77,_0x2720fe)=>_0x2720fe[_0x2b0be7(0x314)][_0x2b0be7(0x2d6)]-_0x4c3f77['lastMatch']['daysSinceMatch']);_0x4f394e>0x0&&(_0x2c1b2f=_0x2c1b2f[_0x2b0be7(0x2a3)](_0x3aa997=>_0x3aa997['lastMatch']['daysSinceMatch']>=_0x4f394e));_0x2ee020['innerHTML']='';if(_0x2c1b2f['length']===0x0){_0x2ee020['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x2c1b2f[_0x2b0be7(0x1eb)](_0x42da6b=>{const _0x4d2eef=_0x2b0be7,_0xc4335f=document['createElement']('tr'),_0xc9b738=_0x42da6b['lastMatch'][_0x4d2eef(0x2d6)]>0x1e?_0x4d2eef(0x188):_0x42da6b['lastMatch']['daysSinceMatch']>0xe?_0x4d2eef(0x241):'';_0xc4335f['className']=_0xc9b738,_0xc4335f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x42da6b['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x42da6b[_0x4d2eef(0xfa)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x42da6b[_0x4d2eef(0x314)]['date']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x42da6b['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x42da6b['lastMatch']['daysSinceMatch'])+_0x4d2eef(0xf7)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x42da6b['lastMatch'][_0x4d2eef(0x20a)]==='Never\x20played'?'No\x20matches\x20found':_0x42da6b['lastMatch']['result']+'\x20vs\x20'+_0x42da6b['lastMatch'][_0x4d2eef(0x173)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x42da6b['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2ee020[_0x4d2eef(0x106)](_0xc4335f);}),console['log'](_0x2b0be7(0x294)+_0x2c1b2f[_0x2b0be7(0x1a0)]+'\x20inactive\x20players');}catch(_0xebf3dc){console['error']('Error\x20loading\x20inactive\x20players:',_0xebf3dc),_0x2ee020[_0x2b0be7(0x293)]=_0x2b0be7(0x178)+_0xebf3dc['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x1a3d86=a4_0xe70f19;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x5bdf51=document['getElementById']('create-match-highlight-btn');_0x5bdf51&&_0x5bdf51[_0x1a3d86(0x15d)]('click',function(){const _0x273975=_0x1a3d86;console[_0x273975(0x19f)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x19843e=document['getElementById'](_0x1a3d86(0x2f4));_0x19843e&&_0x19843e['addEventListener'](_0x1a3d86(0x10d),function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x4412e7=document['getElementById']('create-achievement-highlight-btn');_0x4412e7&&_0x4412e7['addEventListener']('click',function(){const _0x1e89d4=_0x1a3d86;console[_0x1e89d4(0x19f)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal(_0x1e89d4(0x2b1));});}function openHighlightModal(_0x2a01d6='match'){const _0x45b92a=a4_0xe70f19;console['log'](_0x45b92a(0x20c)+_0x2a01d6);const _0x115ec6=document[_0x45b92a(0x17d)]('highlight-modal'),_0x39a138=document['getElementById'](_0x45b92a(0x16a)),_0x5422aa=document['getElementById']('highlight-modal-title'),_0x5865df=document['getElementById']('highlight-id');if(!_0x115ec6||!_0x39a138||!_0x5422aa){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x39a138[_0x45b92a(0x184)](),_0x5865df['value']='';const _0x14998a=['match','creator','achievement'],_0x4dfb95=!_0x14998a['includes'](_0x2a01d6);if(_0x4dfb95){const _0x1ebe17=_0x2a01d6;_0x5865df['value']=_0x1ebe17,_0x5422aa[_0x45b92a(0x1c5)]='Loading...',loadHighlightDataAdmin(_0x1ebe17);}else{const _0x4d1ced=_0x2a01d6;document['getElementById']('highlight-type')['value']=_0x4d1ced,_0x5422aa['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x4d1ced),toggleHighlightFields(_0x4d1ced);const _0x161661=auth[_0x45b92a(0x14e)];_0x161661&&document[_0x45b92a(0x17d)]('highlight-submitted-by')&&(document['getElementById'](_0x45b92a(0x336))['value']=_0x161661['displayName']||_0x161661['email']);}_0x115ec6['classList'][_0x45b92a(0x32f)](_0x45b92a(0x231));}function toggleHighlightFields(_0x149dc8){const _0x56990e=a4_0xe70f19;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x149dc8);const _0x36e443=document[_0x56990e(0x17d)]('highlight-form');if(!_0x36e443)return;const _0x40d1a3=_0x36e443['querySelectorAll']('.form-group,\x20.form-row');_0x40d1a3['forEach'](_0x2b1171=>_0x2b1171[_0x56990e(0x2b6)][_0x56990e(0x1ef)]='none');const _0x4f42f8=document['getElementById']('highlight-video-preview-container');if(_0x4f42f8)_0x4f42f8['style'][_0x56990e(0x1ef)]='none';const _0x5ceec=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x5ceec[_0x56990e(0x1eb)](_0x374ae1=>{const _0x31f934=_0x56990e,_0x1d8292=document['getElementById'](_0x374ae1);if(_0x1d8292)_0x1d8292['style'][_0x31f934(0x1ef)]='block';});if(_0x149dc8===_0x56990e(0x236)){const _0xc543f6=['highlight-video-container','highlight-match-info-container',_0x56990e(0x13f),'highlight-match-date-container','highlight-players-container',_0x56990e(0x26e)];_0xc543f6[_0x56990e(0x1eb)](_0x36769a=>{const _0x2d1b82=_0x56990e,_0x147273=document[_0x2d1b82(0x17d)](_0x36769a);_0x147273&&(_0x36769a==='highlight-players-container'?_0x147273['style']['display']='flex':_0x147273['style']['display']='block');});const _0x3f5a25=document['getElementById'](_0x56990e(0x2b0));if(_0x3f5a25){_0x3f5a25[_0x56990e(0x1cb)]=!![];const _0x51ef4d=_0x3f5a25[_0x56990e(0x12d)];if(_0x51ef4d)_0x51ef4d['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x4f42f8)_0x4f42f8['style']['display']=_0x56990e(0x29f);updateHighlightVideoPreview();}else{if(_0x149dc8==='creator'){const _0x19dd2a=['highlight-map-container','highlight-map-creator-container',_0x56990e(0x148),'highlight-creator-image-container','highlight-video-container'];_0x19dd2a[_0x56990e(0x1eb)](_0x1b17ad=>{const _0x25c048=_0x56990e,_0x3edd8e=document[_0x25c048(0x17d)](_0x1b17ad);if(_0x3edd8e)_0x3edd8e[_0x25c048(0x2b6)][_0x25c048(0x1ef)]='block';});const _0x35244b=document['getElementById'](_0x56990e(0x2b0));if(_0x35244b){_0x35244b[_0x56990e(0x1cb)]=![];const _0x1e9675=_0x35244b['previousElementSibling'];if(_0x1e9675)_0x1e9675['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x149dc8==='achievement'){const _0x2ffb9f=['highlight-achievement-player-container','highlight-achievement-type-container',_0x56990e(0x1db),'highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x2ffb9f['forEach'](_0x52c8f1=>{const _0x59d6fd=_0x56990e,_0x53710e=document['getElementById'](_0x52c8f1);if(_0x53710e)_0x53710e['style'][_0x59d6fd(0x1ef)]=_0x59d6fd(0x29f);});const _0x4b5dd5=document['getElementById']('highlight-video-id');if(_0x4b5dd5){_0x4b5dd5[_0x56990e(0x1cb)]=![];const _0x29fec0=_0x4b5dd5['previousElementSibling'];if(_0x29fec0)_0x29fec0['innerHTML']=_0x56990e(0x2d3);}}}}}async function loadHighlightDataAdmin(_0xf3fcdb){const _0xd7610a=a4_0xe70f19;try{const _0x1ae187=doc(db,'highlights',_0xf3fcdb),_0x3d6ec2=await getDoc(_0x1ae187);if(!_0x3d6ec2['exists']()){showNotification('Highlight\x20not\x20found',_0xd7610a(0x2e4));return;}const _0x5b7eb0=_0x3d6ec2['data'](),_0x43e40b=_0x5b7eb0['type']||'match';document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x43e40b),document['getElementById']('highlight-type')[_0xd7610a(0x122)]=_0x43e40b,toggleHighlightFields(_0x43e40b),document['getElementById']('highlight-title')['value']=_0x5b7eb0['title']||'',document['getElementById'](_0xd7610a(0x12c))[_0xd7610a(0x122)]=_0x5b7eb0['description']||'',document[_0xd7610a(0x17d)](_0xd7610a(0x336))['value']=_0x5b7eb0['submittedBy']||'';_0x5b7eb0['videoId']&&(document[_0xd7610a(0x17d)]('highlight-video-id')['value']=_0x5b7eb0['videoId'],updateHighlightVideoPreview());if(_0x43e40b===_0xd7610a(0x236)){document[_0xd7610a(0x17d)]('highlight-match-info')['value']=_0x5b7eb0['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x5b7eb0['map']||'';if(_0x5b7eb0[_0xd7610a(0x11a)]){const _0x3f346e=new Date(_0x5b7eb0['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x3f346e[_0xd7610a(0x17b)]()['split']('T')[0x0];}document['getElementById'](_0xd7610a(0x2ab))['value']=_0x5b7eb0['winnerName']||'',document[_0xd7610a(0x17d)]('highlight-winner-score')['value']=_0x5b7eb0[_0xd7610a(0x206)]||'',document['getElementById']('highlight-loser-name')['value']=_0x5b7eb0[_0xd7610a(0x19a)]||'',document[_0xd7610a(0x17d)]('highlight-loser-score')['value']=_0x5b7eb0['loserScore']||'',document['getElementById']('highlight-match-link')[_0xd7610a(0x122)]=_0x5b7eb0['matchLink']||'';}else{if(_0x43e40b===_0xd7610a(0x16b))document['getElementById']('highlight-map')['value']=_0x5b7eb0['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x5b7eb0['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x5b7eb0['mapVersion']||'',document[_0xd7610a(0x17d)](_0xd7610a(0x2ac))['value']=_0x5b7eb0['creatorImageUrl']||'';else _0x43e40b===_0xd7610a(0x2b1)&&(document['getElementById']('highlight-achievement-player')['value']=_0x5b7eb0['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x5b7eb0[_0xd7610a(0x1bc)]||'',document['getElementById']('highlight-achievement-details')['value']=_0x5b7eb0['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x5b7eb0[_0xd7610a(0x29c)]||'',document['getElementById'](_0xd7610a(0x26a))[_0xd7610a(0x122)]=_0x5b7eb0['achievementImageUrl']||'');}}catch(_0x4ad6c6){console[_0xd7610a(0x2e4)]('Error\x20loading\x20highlight:',_0x4ad6c6),showNotification('Error\x20loading\x20highlight:\x20'+_0x4ad6c6['message'],'error');}}async function saveHighlight(){const _0x29b011=a4_0xe70f19;try{const _0x278489=document[_0x29b011(0x17d)]('highlight-id')?.['value']||'',_0x5d7936=document['getElementById']('highlight-type')?.['value']||'match',_0x3cad5a={'title':document['getElementById'](_0x29b011(0x228))?.[_0x29b011(0x122)]?.['trim']()||'','description':document['getElementById']('highlight-description')?.['value']?.[_0x29b011(0x142)]()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.[_0x29b011(0x122)]?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x5d7936};if(!_0x3cad5a[_0x29b011(0x1fe)]){showNotification('Title\x20is\x20required','error');return;}if(_0x5d7936==='match'){_0x3cad5a[_0x29b011(0x297)]=document['getElementById']('highlight-match-info')?.['value']?.['trim']()||'',_0x3cad5a['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'';const _0x4c2af3=document[_0x29b011(0x17d)]('highlight-match-date'),_0x49f595=_0x4c2af3?.[_0x29b011(0x122)]||'';_0x3cad5a['matchDate']=_0x49f595?Timestamp[_0x29b011(0x17f)](new Date(_0x49f595)):null,_0x3cad5a['winnerName']=document['getElementById']('highlight-winner-name')?.[_0x29b011(0x122)]?.['trim']()||'',_0x3cad5a['winnerScore']=document['getElementById'](_0x29b011(0x307))?.['value']?.[_0x29b011(0x142)]()||'',_0x3cad5a['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x3cad5a['loserScore']=document['getElementById']('highlight-loser-score')?.['value']?.['trim']()||'',_0x3cad5a[_0x29b011(0x127)]=document['getElementById'](_0x29b011(0x324))?.[_0x29b011(0x122)]?.[_0x29b011(0x142)]()||'';if(!_0x3cad5a['videoId']){showNotification(_0x29b011(0x19c),_0x29b011(0x2e4));return;}}else{if(_0x5d7936==='creator'){_0x3cad5a['map']=document['getElementById'](_0x29b011(0x337))?.['value']?.['trim']()||'',_0x3cad5a['mapCreator']=document[_0x29b011(0x17d)](_0x29b011(0x179))?.['value']?.['trim']()||'',_0x3cad5a['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.[_0x29b011(0x142)]()||'',_0x3cad5a['creatorImageUrl']=document[_0x29b011(0x17d)](_0x29b011(0x2ac))?.['value']?.['trim']()||'';if(!_0x3cad5a[_0x29b011(0x247)]){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x5d7936===_0x29b011(0x2b1)){_0x3cad5a['achievementPlayer']=document['getElementById'](_0x29b011(0x2f5))?.['value']?.['trim']()||'',_0x3cad5a['achievementType']=document['getElementById'](_0x29b011(0x229))?.['value']?.['trim']()||'',_0x3cad5a['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.['trim']()||'',_0x3cad5a['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.['trim']()||'',_0x3cad5a['achievementImageUrl']=document['getElementById'](_0x29b011(0x26a))?.['value']?.[_0x29b011(0x142)]()||'';if(!_0x3cad5a[_0x29b011(0x21e)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x278489?(_0x3cad5a['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x278489),_0x3cad5a),showNotification(_0x29b011(0x1bf),'success')):(_0x3cad5a['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x3cad5a),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x267532){console['error']('Error\x20saving\x20highlight:',_0x267532),showNotification('Error\x20saving\x20highlight:\x20'+_0x267532['message'],'error');}}function closeHighlightModal(){const _0x2e3eaa=a4_0xe70f19,_0xcaee4=document['getElementById'](_0x2e3eaa(0x12e));if(_0xcaee4)_0xcaee4['classList']['remove']('active');}function getHighlightTypeName(_0x57c3a0){const _0x43576c=a4_0xe70f19;switch(_0x57c3a0){case'match':return _0x43576c(0x1f7);case _0x43576c(0x16b):return _0x43576c(0x2b4);case'achievement':return _0x43576c(0x263);default:return _0x43576c(0x24f);}}function updateHighlightVideoPreview(){const _0x3ddc66=a4_0xe70f19,_0x3e0b6c=document['getElementById'](_0x3ddc66(0x2b0)),_0x2ea0d8=document['getElementById']('highlight-video-preview-container'),_0x30228f=document[_0x3ddc66(0x17d)](_0x3ddc66(0x1f1));if(!_0x3e0b6c||!_0x30228f||!_0x2ea0d8)return;const _0x1db6da=_0x3e0b6c['value']['trim']();_0x1db6da&&/^[a-zA-Z0-9_-]{11}$/[_0x3ddc66(0x19d)](_0x1db6da)?(_0x30228f[_0x3ddc66(0x30c)]='https://www.youtube.com/embed/'+_0x1db6da,_0x2ea0d8[_0x3ddc66(0x2b6)]['display']=_0x3ddc66(0x29f)):(_0x30228f[_0x3ddc66(0x30c)]='',_0x2ea0d8['style'][_0x3ddc66(0x1ef)]='none');}async function loadHighlightsAdmin(){const _0x1e1b29=a4_0xe70f19,_0x57808e=document['getElementById'](_0x1e1b29(0x208));if(!_0x57808e)return;_0x57808e['innerHTML']=_0x1e1b29(0x302);try{const _0x1f62cd=query(collection(db,'highlights'),orderBy('createdAt',_0x1e1b29(0x14f))),_0x58ad9d=await getDocs(_0x1f62cd);if(_0x58ad9d['empty']){_0x57808e['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x57808e['innerHTML']='',_0x58ad9d[_0x1e1b29(0x1eb)](_0x3a7852=>{const _0x43207b=_0x1e1b29,_0x4db293=_0x3a7852['data'](),_0x53d81f=document[_0x43207b(0x2b5)]('tr'),_0x35ab35=_0x4db293['createdAt']?new Date(_0x4db293['createdAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';let _0x18f3a1='Unknown',_0x3079da='';switch(_0x4db293[_0x43207b(0x2a8)]){case'match':_0x18f3a1='Match',_0x3079da='match-type';break;case _0x43207b(0x16b):_0x18f3a1=_0x43207b(0x255),_0x3079da='creator-type';break;case'achievement':_0x18f3a1='Achievement',_0x3079da='achievement-type';break;}_0x53d81f[_0x43207b(0x293)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4db293[_0x43207b(0x1fe)]||_0x43207b(0x216))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x3079da+'\x22>'+_0x18f3a1+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x35ab35+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4db293['submittedBy']||_0x43207b(0xf8))+_0x43207b(0xf7)+(_0x4db293['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x43207b(0x2af))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x3a7852['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x3a7852['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x57808e['appendChild'](_0x53d81f);}),document[_0x1e1b29(0x1f4)]('.edit-highlight-btn')['forEach'](_0x30ce9d=>{const _0x1580b3=_0x1e1b29;_0x30ce9d[_0x1580b3(0x15d)]('click',_0x118492=>{const _0x1821ac=_0x1580b3;openHighlightModal(_0x118492['currentTarget'][_0x1821ac(0x2b8)]['id']);});}),document['querySelectorAll'](_0x1e1b29(0x11d))['forEach'](_0x1c75d2=>{_0x1c75d2['addEventListener']('click',_0x2abef8=>{confirmDeleteHighlight(_0x2abef8['currentTarget']['dataset']['id']);});});}catch(_0x2c86c8){console['error']('Error\x20loading\x20highlights:',_0x2c86c8),_0x57808e[_0x1e1b29(0x293)]=_0x1e1b29(0x2d8)+_0x2c86c8['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x49f5a7){const _0x385a28=a4_0xe70f19;if(confirm(_0x385a28(0x274)))try{await deleteDoc(doc(db,_0x385a28(0x22d),_0x49f5a7)),showNotification('Highlight\x20deleted\x20successfully',_0x385a28(0x12f)),loadHighlightsAdmin();}catch(_0x582ed8){console[_0x385a28(0x2e4)]('Error\x20deleting\x20highlight:',_0x582ed8),showNotification(_0x385a28(0x1c9)+_0x582ed8['message'],'error');}}function setupCreateTestMatchModal(){const _0x165166=a4_0xe70f19;console['log'](_0x165166(0x312));const _0xca4295=document['getElementById'](_0x165166(0x2c0)),_0x80f104=document['getElementById']('create-test-match-form');if(!_0xca4295){console[_0x165166(0x2e4)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x80f104){console[_0x165166(0x2e4)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x2b2273=_0xca4295['cloneNode'](!![]);_0xca4295['parentNode']['replaceChild'](_0x2b2273,_0xca4295);const _0x48b455=_0x2b2273['querySelector']('#create-test-match-form');_0x2b2273['addEventListener']('click',function(_0x3cff4f){_0x3cff4f['target']===_0x2b2273&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x164dea=_0x2b2273['querySelector']('.close-btn');_0x164dea&&_0x164dea['addEventListener']('click',function(_0xdbf87a){const _0x2f9701=_0x165166;_0xdbf87a['preventDefault'](),_0xdbf87a[_0x2f9701(0x213)](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x45bd3a=_0x2b2273['querySelector']('#cancel-create-test-match-btn');_0x45bd3a&&_0x45bd3a[_0x165166(0x15d)]('click',function(_0x2fb10e){_0x2fb10e['preventDefault'](),_0x2fb10e['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x48b455){_0x48b455[_0x165166(0x15d)]('submit',function(_0x5e3bd2){const _0x46f844=_0x165166;_0x5e3bd2[_0x46f844(0x1f8)](),_0x5e3bd2['stopPropagation'](),console['log'](_0x46f844(0x21b)),createTestMatch();});const _0x2dc840=_0x48b455['querySelector']('button[type=\x22submit\x22]');_0x2dc840&&_0x2dc840['addEventListener'](_0x165166(0x10d),function(_0x54b39a){const _0x5033e9=_0x165166;_0x54b39a['preventDefault'](),_0x54b39a['stopPropagation'](),console[_0x5033e9(0x19f)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x165166(0x19f)](_0x165166(0x14d));}function setupManageHighlightsSection(){const _0x207a6b=a4_0xe70f19;console[_0x207a6b(0x19f)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0xdbd7f7=document['getElementById'](_0x207a6b(0x16a));_0xdbd7f7&&_0xdbd7f7['addEventListener'](_0x207a6b(0x1f3),_0x33e3fa=>{_0x33e3fa['preventDefault'](),saveHighlight();});const _0x46e971=document['getElementById'](_0x207a6b(0x2a5));_0x46e971&&_0x46e971['addEventListener']('click',closeHighlightModal);const _0x427754=document[_0x207a6b(0x158)]('#highlight-modal\x20.close-btn');_0x427754&&_0x427754[_0x207a6b(0x15d)]('click',closeHighlightModal);const _0x5e90f1=document['getElementById']('highlight-modal');_0x5e90f1&&_0x5e90f1[_0x207a6b(0x15d)]('click',_0x181dec=>{_0x181dec['target']===_0x5e90f1&&closeHighlightModal();});const _0x42f410=document['getElementById']('highlight-video-id');_0x42f410&&_0x42f410[_0x207a6b(0x15d)]('input',()=>{updateHighlightVideoPreview();}),console['log'](_0x207a6b(0x25f));}function setupManageMatchesSection(){const _0x15c15b=a4_0xe70f19;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x4e86a8=document['getElementById'](_0x15c15b(0x181)),_0x47ad4b=document['getElementById']('matches-next-page');_0x4e86a8&&_0x4e86a8['addEventListener']('click',()=>{const _0x13c96c=_0x15c15b,_0x28b1ca=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x28b1ca][_0x13c96c(0x279)]-0x1);});_0x47ad4b&&_0x47ad4b[_0x15c15b(0x15d)](_0x15c15b(0x10d),()=>{const _0x48c40e=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x48c40e]['page']+0x1);});const _0x1d23df=document['getElementById']('apply-matches-filters'),_0x18938b=document[_0x15c15b(0x17d)]('reset-matches-filters');_0x1d23df&&_0x1d23df[_0x15c15b(0x15d)]('click',applyMatchesFilters);_0x18938b&&_0x18938b['addEventListener'](_0x15c15b(0x10d),resetMatchesFilters);const _0x582671=document[_0x15c15b(0x17d)]('matches-search');_0x582671&&_0x582671[_0x15c15b(0x15d)](_0x15c15b(0x2c9),debounce(filterMatchesTable,0x12c));const _0xe3a312=document['getElementById'](_0x15c15b(0x159));_0xe3a312&&_0xe3a312[_0x15c15b(0x15d)]('click',openResimulateModal);const _0x3b68c5=document[_0x15c15b(0x17d)](_0x15c15b(0x261));if(_0x3b68c5){const _0x53e493=_0x3b68c5[_0x15c15b(0x158)]('.close');_0x53e493&&_0x53e493['addEventListener']('click',closeResimulateModal),_0x3b68c5[_0x15c15b(0x15d)]('click',_0x489ae9=>{_0x489ae9['target']===_0x3b68c5&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x15c15b(0x14b));}function openCreateTestMatchModal(){const _0x5088af=a4_0xe70f19;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x52b6c2=document['getElementById']('create-test-match-modal'),_0x214753=document[_0x5088af(0x17d)]('create-test-match-form');if(!_0x52b6c2){console['error'](_0x5088af(0x316)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x5088af(0x2e4));return;}if(!_0x214753){console[_0x5088af(0x2e4)](_0x5088af(0x111)),showNotification(_0x5088af(0x111),'error');return;}_0x214753['reset']();const _0x2dfe1e=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0xa98251=![];_0x2dfe1e['forEach'](_0x3b708c=>{const _0x2be2a1=_0x5088af;console['log'](_0x2be2a1(0x15b),_0x3b708c[_0x2be2a1(0x122)]),_0x3b708c['value']===currentLadder&&(_0x3b708c[_0x2be2a1(0x2f2)]=!![],_0xa98251=!![],console['log'](_0x2be2a1(0x2bf),currentLadder));});if(!_0xa98251){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x267a28=document[_0x5088af(0x158)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x267a28&&(_0x267a28['checked']=!![],console['log'](_0x5088af(0x331)));}const _0x353fe6=document['getElementById']('test-match-date');if(_0x353fe6){const _0x35dd49=new Date()['toISOString']()['split']('T')[0x0];_0x353fe6[_0x5088af(0x122)]=_0x35dd49;}_0x52b6c2['style'][_0x5088af(0x1ef)]='flex',_0x52b6c2[_0x5088af(0x2b6)]['visibility']='visible',_0x52b6c2['style']['opacity']='1',_0x52b6c2['classList']['add']('active'),console['log'](_0x5088af(0x115));const _0x49fe4b=document['getElementById']('test-match-winner-username');_0x49fe4b&&setTimeout(()=>{const _0x527efb=_0x5088af;_0x49fe4b[_0x527efb(0x2ae)]();},0x64);}function closeCreateTestMatchModal(){const _0x407d58=a4_0xe70f19;console[_0x407d58(0x19f)]('Closing\x20create\x20test\x20match\x20modal');const _0x2ead11=document[_0x407d58(0x17d)]('create-test-match-modal');if(!_0x2ead11){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x2ead11[_0x407d58(0x128)]['remove']('active'),_0x2ead11['style'][_0x407d58(0x28a)]='0',_0x2ead11['style'][_0x407d58(0x15c)]=_0x407d58(0x117),setTimeout(()=>{const _0x3eec1d=_0x407d58;!_0x2ead11['classList']['contains']('active')&&(_0x2ead11['style'][_0x3eec1d(0x1ef)]='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x42139c=a4_0xe70f19;console[_0x42139c(0x19f)]('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x513dd8=auth['currentUser'];if(!_0x513dd8){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x15d22c='D1',_0x384fff=_0x42139c(0x1d0),_0xe25e94={'winnerUsername':_0x42139c(0x146),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x42139c(0x30e),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x42139c(0x32c),'approvedAt':Timestamp[_0x42139c(0x17f)](new Date()),'approvedBy':_0x513dd8['email'],'createdAt':serverTimestamp(),'createdBy':_0x513dd8['email'],'isTestMatch':!![],'ladder':_0x15d22c,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x513dd8[_0x42139c(0x10e)]};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x384fff),_0xe25e94),showNotification(_0x42139c(0x2c1),'success'),closeCreateTestMatchModal();}catch(_0xa5f4ba){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0xa5f4ba),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0xa5f4ba['message'],'error');}}window[a4_0xe70f19(0x2d0)]=async function(){const _0x582b90=a4_0xe70f19;try{console['log']('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console[_0x582b90(0x19f)]('DB:',db),console[_0x582b90(0x19f)]('Current\x20user:',auth['currentUser']);const _0xf7fd65=collection(db,'players');console[_0x582b90(0x19f)]('Collection\x20reference\x20created:',_0xf7fd65);const _0x383db3=query(_0xf7fd65,where(_0x582b90(0x310),'==','nonexistent'));console['log'](_0x582b90(0x191),_0x383db3);const _0x24712b=await getDocs(_0x383db3);console['log']('Query\x20executed.\x20Empty:',_0x24712b['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x329819){console['error']('Firebase\x20connection\x20test\x20failed:',_0x329819);}};function setupCreateTestMatchButton(){const _0x32185d=a4_0xe70f19,_0x53c8ff=document['getElementById'](_0x32185d(0x305));if(!_0x53c8ff){console['error'](_0x32185d(0x13a));return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x2032d8=_0x53c8ff['cloneNode'](!![]);_0x53c8ff['parentNode']['replaceChild'](_0x2032d8,_0x53c8ff),_0x2032d8[_0x32185d(0x15d)]('click',function(_0x26250e){const _0x5e902b=_0x32185d;_0x26250e[_0x5e902b(0x1f8)](),_0x26250e[_0x5e902b(0x213)](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x4f6ac3=0x1){const _0x35432a=a4_0xe70f19,_0x52a71e=document['getElementById'](_0x35432a(0x308));if(!_0x52a71e)return;_0x52a71e['innerHTML']=_0x35432a(0x21f);try{const _0x21d60e=currentLadder['toLowerCase'](),_0x4b6526=matchesPagination[_0x21d60e],_0x3a8dfd=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x35432a(0x1f0):'approvedMatchesD3',_0x2f494d=collection(db,_0x3a8dfd);_0x4f6ac3<=0x1?(_0x4b6526[_0x35432a(0x279)]=0x1,_0x4b6526[_0x35432a(0x10b)]=null,_0x4b6526['lastVisible']=null):_0x4b6526['page']=_0x4f6ac3;const _0x5cb345=getMatchesFilters();let _0x153b41=_0x2f494d;if(_0x5cb345['startDate']||_0x5cb345[_0x35432a(0x330)]||_0x5cb345[_0x35432a(0x1b5)]){let _0x59da87=[];_0x5cb345[_0x35432a(0x299)]&&_0x5cb345[_0x35432a(0x330)]?(_0x59da87[_0x35432a(0x1a3)](where('approvedAt','>=',_0x5cb345['startDate']),where('approvedAt','<=',_0x5cb345[_0x35432a(0x330)])),_0x153b41=query(_0x2f494d,..._0x59da87)):_0x153b41=query(_0x2f494d,orderBy('approvedAt','desc'));}else _0x153b41=query(_0x2f494d,orderBy('approvedAt',_0x35432a(0x14f)));_0x4f6ac3>0x1&&_0x4b6526[_0x35432a(0x125)]?_0x153b41=query(_0x153b41,startAfter(_0x4b6526['lastVisible']),limit(PAGE_SIZE)):_0x153b41=query(_0x153b41,limit(PAGE_SIZE));const _0x2ee7cf=await getDocs(_0x153b41);!_0x2ee7cf[_0x35432a(0x24e)]&&(_0x4b6526['firstVisible']=_0x2ee7cf['docs'][0x0],_0x4b6526['lastVisible']=_0x2ee7cf['docs'][_0x2ee7cf['docs']['length']-0x1]);let _0x127187=![];if(!_0x2ee7cf['empty']){const _0x240997=query(_0x153b41,startAfter(_0x4b6526['lastVisible']),limit(0x1)),_0x5dffc3=await getDocs(_0x240997);_0x127187=!_0x5dffc3['empty'];}const _0x9852e=document[_0x35432a(0x17d)](_0x35432a(0x181)),_0x4ebe46=document['getElementById'](_0x35432a(0x28e)),_0x515c22=document['getElementById']('matches-page-indicator');if(_0x9852e)_0x9852e['disabled']=_0x4b6526['page']<=0x1;if(_0x4ebe46)_0x4ebe46['disabled']=!_0x127187;if(_0x515c22)_0x515c22[_0x35432a(0x1c5)]='Page\x20'+_0x4b6526[_0x35432a(0x279)];if(_0x2ee7cf['empty']){_0x52a71e['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x52a71e['innerHTML']='',_0x2ee7cf[_0x35432a(0x1eb)](_0x3ac00c=>{const _0x1a91cd=_0x35432a,_0x2de8a1=_0x3ac00c['data'](),_0x33b358=document['createElement']('tr'),_0x61fd25=_0x2de8a1['approvedAt']?new Date(_0x2de8a1[_0x1a91cd(0x12b)][_0x1a91cd(0x26c)]*0x3e8)['toLocaleDateString']():'N/A';_0x33b358['setAttribute']('data-id',_0x3ac00c['id']),_0x33b358['setAttribute']('data-ladder',currentLadder),_0x33b358['classList']['add']('match-row'),_0x33b358[_0x1a91cd(0x293)]=_0x1a91cd(0x237)+_0x61fd25+_0x1a91cd(0x303)+(_0x2de8a1['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x2de8a1[_0x1a91cd(0x16d)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x2de8a1['winnerScore']||0x0)+'\x20-\x20'+(_0x2de8a1['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x2de8a1[_0x1a91cd(0x240)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x1a91cd(0x319)+_0x3ac00c['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x3ac00c['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x52a71e[_0x1a91cd(0x106)](_0x33b358);}),setupMatchesActionButtons(),_0x5cb345['searchTerm']&&filterMatchesTable(),console[_0x35432a(0x19f)](_0x35432a(0x1a4)+_0x2ee7cf['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x4b6526['page']);}catch(_0x35534e){console['error']('Error\x20loading\x20matches:',_0x35534e),_0x52a71e[_0x35432a(0x293)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x35534e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x2dbb1b,_0x4894d6){const _0x5b2046=a4_0xe70f19;try{console['log'](_0x5b2046(0x20f)+_0x2dbb1b+'\x20from\x20'+_0x4894d6+_0x5b2046(0x287));const _0x9ce6d3=auth['currentUser'];if(!_0x9ce6d3){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x246ab4=_0x4894d6==='D1'?'approvedMatches':_0x4894d6==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x246ab4),showNotification(_0x5b2046(0x100),'info'),await deleteDoc(doc(db,_0x246ab4,_0x2dbb1b)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x366331=_0x4894d6[_0x5b2046(0x21d)]();loadMatchesData(matchesPagination[_0x366331]['page']);}catch(_0x1e7e64){console['error'](_0x5b2046(0x150),_0x1e7e64),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x1e7e64['message'],_0x5b2046(0x2e4));}}function setupMatchesActionButtons(){const _0xa02c58=a4_0xe70f19;console['log'](_0xa02c58(0x24b)),document['querySelectorAll'](_0xa02c58(0x2e1))['forEach'](_0x261f21=>{const _0x4e9593=_0xa02c58;_0x261f21['addEventListener'](_0x4e9593(0x10d),_0x3ece92=>{const _0x4a59e1=_0x4e9593;_0x3ece92['preventDefault'](),_0x3ece92[_0x4a59e1(0x213)]();const _0x265377=_0x3ece92[_0x4a59e1(0x235)]['dataset']['id'],_0x1d8900=_0x3ece92[_0x4a59e1(0x235)][_0x4a59e1(0x1d2)]('tr'),_0x279f0=_0x1d8900[_0x4a59e1(0x2b8)]['ladder'];console['log']('Edit\x20match\x20clicked:',_0x265377,_0x279f0),openEditMatchModal(_0x265377,_0x279f0);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x46c4e3=>{_0x46c4e3['addEventListener']('click',_0x748f67=>{const _0x131dd6=a4_0x426c;_0x748f67[_0x131dd6(0x1f8)](),_0x748f67[_0x131dd6(0x213)]();const _0x40fc09=_0x748f67['currentTarget']['dataset']['id'],_0x47aa02=_0x748f67['currentTarget']['closest']('tr'),_0x35b41e=_0x47aa02[_0x131dd6(0x2b8)]['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x40fc09,_0x35b41e),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x40fc09,_0x35b41e);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x2a6bbd=a4_0xe70f19,_0x36075e=document[_0x2a6bbd(0x17d)](_0x2a6bbd(0x260))[_0x2a6bbd(0x122)]['toLowerCase'](),_0x3edab6=document['querySelectorAll'](_0x2a6bbd(0x32e));let _0x339f0b=0x0;_0x3edab6['forEach'](_0x23cb0b=>{const _0x1165bd=_0x2a6bbd;if(_0x23cb0b[_0x1165bd(0x128)]['contains']('loading-cell')||_0x23cb0b['classList']['contains']('empty-state')||_0x23cb0b[_0x1165bd(0x128)][_0x1165bd(0x31c)](_0x1165bd(0x271)))return;const _0x414790=_0x23cb0b['cells'][0x1][_0x1165bd(0x1c5)]['toLowerCase'](),_0x4ef8d4=_0x23cb0b['cells'][0x2]['textContent']['toLowerCase'](),_0x5c6901=_0x23cb0b['cells'][0x4]['textContent']['toLowerCase']();_0x414790['includes'](_0x36075e)||_0x4ef8d4[_0x1165bd(0x20d)](_0x36075e)||_0x5c6901['includes'](_0x36075e)?(_0x23cb0b[_0x1165bd(0x2b6)]['display']='',_0x339f0b++):_0x23cb0b['style']['display']='none';});if(_0x339f0b===0x0&&_0x3edab6[_0x2a6bbd(0x1a0)]>0x0){const _0x5a07da=document['getElementById']('matches-table-body'),_0x2a7aab=_0x5a07da['querySelector']('.no-results');if(!_0x2a7aab){const _0x25a057=document[_0x2a6bbd(0x2b5)]('tr');_0x25a057['className']='no-results',_0x25a057['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x36075e+_0x2a6bbd(0x102),_0x5a07da[_0x2a6bbd(0x106)](_0x25a057);}}else{const _0x54cc97=document['querySelector']('.no-results');_0x54cc97&&_0x54cc97[_0x2a6bbd(0x30a)]();}}function getMatchesFilters(){const _0x2c2404=a4_0xe70f19,_0x4dc3f7=document['getElementById']('matches-search')['value'][_0x2c2404(0x21d)](),_0x115476=document['getElementById']('matches-start-date')['value'],_0x5a644d=document[_0x2c2404(0x17d)]('matches-end-date')[_0x2c2404(0x122)];let _0x2ef155=null,_0x19b7e9=null;return _0x115476&&(_0x2ef155=new Date(_0x115476),_0x2ef155['setHours'](0x0,0x0,0x0,0x0),_0x2ef155=Timestamp[_0x2c2404(0x17f)](_0x2ef155)),_0x5a644d&&(_0x19b7e9=new Date(_0x5a644d),_0x19b7e9['setHours'](0x17,0x3b,0x3b,0x3e7),_0x19b7e9=Timestamp['fromDate'](_0x19b7e9)),{'searchTerm':_0x4dc3f7,'startDate':_0x2ef155,'endDate':_0x19b7e9};}async function applyMatchesFilters(){const _0x49250f=currentLadder['toLowerCase']();matchesPagination[_0x49250f]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x525535=a4_0xe70f19;document['getElementById']('matches-start-date')['value']='',document[_0x525535(0x17d)](_0x525535(0x143))['value']='',document['getElementById']('matches-search')[_0x525535(0x122)]='';const _0x455288=currentLadder[_0x525535(0x21d)]();matchesPagination[_0x455288]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x5b2f07,_0x51ce11){const _0x586b9d=a4_0xe70f19,_0x1c06b1=document[_0x586b9d(0x17d)]('edit-match-modal');if(!_0x1c06b1)return;try{const _0x1535dc=_0x51ce11==='D1'?_0x586b9d(0x1d0):_0x51ce11==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1b6745=doc(db,_0x1535dc,_0x5b2f07),_0x4e80cb=await getDoc(_0x1b6745);if(!_0x4e80cb['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x2e8092=_0x4e80cb['data']();document['getElementById'](_0x586b9d(0x149))['value']=_0x5b2f07,document[_0x586b9d(0x17d)]('edit-match-ladder')['value']=_0x51ce11,document['getElementById']('edit-match-winner')[_0x586b9d(0x122)]=_0x2e8092['winnerUsername']||'',document['getElementById']('edit-match-winner-score')['value']=_0x2e8092[_0x586b9d(0x206)]||0x0,document[_0x586b9d(0x17d)]('edit-match-winner-suicides')['value']=_0x2e8092['winnerSuicides']||0x0,document['getElementById'](_0x586b9d(0x298))['value']=_0x2e8092['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x2e8092['loserUsername']||'',document[_0x586b9d(0x17d)]('edit-match-loser-score')['value']=_0x2e8092['loserScore']||0x0,document['getElementById'](_0x586b9d(0x2df))['value']=_0x2e8092[_0x586b9d(0x1c6)]||0x0,document[_0x586b9d(0x17d)](_0x586b9d(0x239))['value']=_0x2e8092[_0x586b9d(0x131)]||'',document['getElementById'](_0x586b9d(0x1d4))[_0x586b9d(0x122)]=_0x2e8092['mapPlayed']||'',document[_0x586b9d(0x17d)]('edit-match-winner-demo')[_0x586b9d(0x122)]=_0x2e8092['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x2e8092['loserDemoLink']||_0x2e8092['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x2e8092[_0x586b9d(0x183)]+_0x586b9d(0x1ff)+_0x2e8092[_0x586b9d(0x16d)],_0x1c06b1[_0x586b9d(0x128)][_0x586b9d(0x32f)]('active');}catch(_0x4f3b38){console[_0x586b9d(0x2e4)]('Error\x20loading\x20match\x20data:',_0x4f3b38),showNotification('Failed\x20to\x20load\x20match\x20data',_0x586b9d(0x2e4));}}function closeEditMatchModal(){const _0x409a86=a4_0xe70f19,_0x36316e=document['getElementById']('edit-match-modal');_0x36316e&&_0x36316e['classList']['remove'](_0x409a86(0x231));}async function saveEditedMatch(){const _0x163fa2=a4_0xe70f19;try{const _0x5dbb38=document['getElementById']('edit-match-id')['value'],_0x265ae3=document['getElementById']('edit-match-ladder')['value'];if(!_0x5dbb38||!_0x265ae3){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x163fa2(0x2e4));return;}const _0x3da0cd=_0x265ae3==='D1'?'approvedMatches':_0x265ae3==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x13d3aa=document['getElementById'](_0x163fa2(0x1c8))['value']['trim'](),_0x288992=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0xf89a8b=parseInt(document[_0x163fa2(0x17d)](_0x163fa2(0x26f))[_0x163fa2(0x122)]),_0x2ab4de=document[_0x163fa2(0x17d)]('edit-match-winner-comment')['value']['trim'](),_0x182fc3=document['getElementById']('edit-match-loser')[_0x163fa2(0x122)][_0x163fa2(0x142)](),_0x25cdcc=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x51690e=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x560fad=document[_0x163fa2(0x17d)]('edit-match-loser-comment')['value']['trim'](),_0x2a4f2b=document['getElementById'](_0x163fa2(0x1d4))['value']['trim'](),_0x4b77c0=document['getElementById']('edit-match-winner-demo')[_0x163fa2(0x122)]['trim'](),_0x38e0c9=document['getElementById']('edit-match-loser-demo')['value']['trim']();if(!_0x13d3aa||!_0x182fc3){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x3da0cd,_0x5dbb38),{'winnerUsername':_0x13d3aa,'winnerScore':_0x288992,'winnerSuicides':_0xf89a8b,'winnerComment':_0x2ab4de,'loserUsername':_0x182fc3,'loserScore':_0x25cdcc,'loserSuicides':_0x51690e,'loserComment':_0x560fad,'mapPlayed':_0x2a4f2b,'winnerDemoLink':_0x4b77c0||null,'loserDemoLink':_0x38e0c9||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully',_0x163fa2(0x12f)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x265ae3['toLowerCase']()]['page']);}catch(_0x107570){console['error']('Error\x20saving\x20match:',_0x107570),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x107570[_0x163fa2(0x295)],_0x163fa2(0x2e4));}}async function openDeleteMatchModal(_0x163233,_0xbcb0cd){const _0x3c20ec=a4_0xe70f19;try{const _0x3e9a87=_0xbcb0cd==='D1'?'approvedMatches':_0xbcb0cd==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2e49a6=doc(db,_0x3e9a87,_0x163233),_0x468fe3=await getDoc(_0x2e49a6);if(!_0x468fe3['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x1b1d3f=_0x468fe3['data'](),_0x486b8e=document['getElementById']('delete-match-confirm-modal');_0x486b8e['dataset'][_0x3c20ec(0x23f)]=_0x163233,_0x486b8e['dataset']['ladder']=_0xbcb0cd;const _0x4f425c=_0x1b1d3f['approvedAt']?new Date(_0x1b1d3f['approvedAt'][_0x3c20ec(0x26c)]*0x3e8)[_0x3c20ec(0x278)]():'N/A',_0x905351=document['getElementById'](_0x3c20ec(0x318));_0x905351['innerHTML']=_0x3c20ec(0x1c0)+_0x4f425c+_0x3c20ec(0x186)+_0x1b1d3f[_0x3c20ec(0x183)]+_0x3c20ec(0x31d)+_0x1b1d3f['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x1b1d3f['winnerScore']||0x0)+'\x20-\x20'+(_0x1b1d3f['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x1b1d3f[_0x3c20ec(0x240)]||_0x3c20ec(0x2c4))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0xbcb0cd+_0x3c20ec(0x214),_0x486b8e[_0x3c20ec(0x128)][_0x3c20ec(0x32f)]('active');}catch(_0x94507d){console['error'](_0x3c20ec(0x2e5),_0x94507d),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x8c0024=a4_0xe70f19,_0x258dc4=document[_0x8c0024(0x17d)]('delete-match-confirm-modal');_0x258dc4&&(_0x258dc4['classList']['remove'](_0x8c0024(0x231)),_0x258dc4[_0x8c0024(0x210)](_0x8c0024(0x166)),_0x258dc4[_0x8c0024(0x210)](_0x8c0024(0x132)));}function a4_0x2c8f(){const _0xa3375b=['adminEmail','Modal\x20background\x20clicked','split','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','.remove-role-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Unknown','inactive-days-filter','eloRating','Searching\x20for\x20player\x20in\x20','elo','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','warning','points-overview-table-body','Deleting\x20match...','admin','\x27</td>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','exists','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','appendChild','action','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','Loser\x20','edit-highlight-achievementType-input','firstVisible','.edit-btn','click','email','load-dashboard-data','Error\x20loading\x20ribbons:','Create\x20test\x20match\x20form\x20not\x20found','add-player-form','disabled','),\x20','Modal\x20should\x20now\x20be\x20visible','inactive-players-search','hidden','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','.view-history-btn','matchDate','wins','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','.delete-highlight-btn','points-sort-order','\x20(+','ribbon-item','userProfiles','value','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','lastVisible','Error\x20adding\x20player:','matchLink','classList','positive-change','newPoints','approvedAt','highlight-description','previousElementSibling','highlight-modal','success','Error\x20saving\x20trophy:','loserComment','data-ladder','\x20with\x20ELO\x20','demote-modal','info','change','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','ladder','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','demote-username','./promotions.js','\x20(based\x20on\x20data-role:\x20','Loading\x20dashboard\x20overview\x20data...','highlight-map-container',';\x22>','Error\x20searching\x20users:','trim','matches-end-date','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','TestWinner','promote-username','highlight-map-version-container','edit-match-id','right','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','timestamp','Create\x20test\x20match\x20modal\x20setup\x20complete','currentUser','desc','Error\x20deleting\x20match:','load-inactive-players-data','image','\x20points','edit-highlight-description-input','docs','Emerald','amount','querySelector','resimulate-match-btn','selected-user-points','Found\x20radio\x20with\x20value:','visibility','addEventListener','className','d3-next-page','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','award-reason','string','playerRibbonsD3','from','migration-section','data-match-id','\x22\x20awarded\x20to\x20','trophy-name','Player\x20\x22','highlight-form','creator','update','loserUsername','manage-players','cells','Error\x20loading\x20dashboard:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','#players-table-body\x20tr','opponent','quick-edit-points-modal','Error\x20in\x20promotion:','approvedMatchesD3','eloHistoryD2','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','highlight-map-creator','Error\x20opening\x20quick\x20edit\x20modal:','toISOString','role-username','getElementById','trophyDefinitions','fromDate','history-start-date','matches-prev-page','Load\x20history\x20data\x20clicked','winnerUsername','reset','\x20for\x20points\x20initialization','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','trophy-image-url','highly-inactive','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','d1-next-page','Processing\x20points\x20edit:','load-ribbons-data','User\x20data\x20loaded:','common','match-count','Error\x20resimulating\x20match:','Query\x20created:','inactive-players-table-body','Unauthorized:\x20Admin\x20access\x20required','create-new-trophy-btn','Unknown\x20User','target','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','uid','loserName','notification\x20','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','test','ref','log','length','Created\x20','.error-state','push','Loaded\x20','DOMContentLoaded','previousElo','cancel-edit-btn','input[name=\x22demote-ladder\x22]:checked','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','\x20by\x20UID:','trophies-table-body','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','Error\x20finding\x20match:','user-roles-section','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Manage\x20Ribbons\x20section\x20initialized','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','d3-prev-page','searchTerm','Player\x20updated\x20successfully','alt','selected-user-info','Setting\x20permissions\x20based\x20on\x20role:\x20','Error\x20loading\x20trophies:','getAttribute','achievementType','pointsHistory','playersD2','Highlight\x20updated\x20successfully!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','playerId','player','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','textContent','loserSuicides','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','edit-match-winner','Error\x20deleting\x20highlight:\x20','settings','required','player-count','player-search','Failed\x20to\x20delete\x20trophy:\x20','Create\x20New\x20Trophy','approvedMatches','</td></tr>','closest','Starting\x20complete\x20match\x20resimulation...','edit-match-map','\x20in\x20','Friday','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','allUsersPoints','Error\x20in\x20demotion:','Article\x20not\x20found','highlight-achievement-details-container','trophy-modal','createdAt','set-elo-modal','unknown','loading','Role\x20select\x20set\x20to:\x20','</span>','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','MAX_SAFE_INTEGER','size','roleAssignedAt','\x20users...','keys','Error\x20loading\x20article\x20data:','roleAssignedBy','forEach','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','author','replaceChild','display','approvedMatchesD2','highlight-video-preview','elo-history-table-body','submit','querySelectorAll','reduce','dashboard','Match\x20Highlight','preventDefault','\x20to\x20','eloHistory','removeEventListener','lastPointsModified','Error\x20setting\x20user\x20role:','title','\x20vs\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','#e0e0e0','reset-history-filters','Error\x20adding\x20ribbon:','Failed\x20to\x20send\x20Discord\x20notification:','assign-trophy-form','winnerScore','img','highlights-table-body',').\x20','date','previousPoints','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','includes','backgroundColor','Deleting\x20match\x20','removeAttribute','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','input[name=\x22assign-ladder\x22]:checked','stopPropagation','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','newElo','Untitled','Demoting\x20player\x20to\x20','Error\x20loading\x20articles:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','Create\x20test\x20match\x20form\x20submitted','Error\x20removing\x20ribbon','toLowerCase','achievementPlayer','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','all','playerRibbons','confirm-resimulate-btn','rgba(255,\x20255,\x20255,\x200.1)','#28a745','User\x20\x22','awardedAt','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','highlight-title','highlight-achievement-type','Article\x20deleted\x20successfully','fa-info-circle','getDay','highlights','manage-trophies','negative-change','pendingResimulateData','active','ribbon-type-select','destroy','\x20section','currentTarget','match','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','assign-trophy-id','edit-match-loser-comment','rejected-count','no-results','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','edit-highlight-winnerScore-input','players-ladder-selector','matchId','mapPlayed','moderately-inactive','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','W\x20/\x20','toString','Error\x20searching\x20for\x20user','roleColor','mapCreator','edit-losses','Adding\x20player\x20','#d32f2f','Setting\x20up\x20matches\x20action\x20buttons...','Page\x201','rank-distribution-chart','empty','Highlight','sendPromotionNotification','closeResimulateModal','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','articles','mapVersion','Creator','ribbon-user-search','Found\x20player\x20with\x20current\x20ELO:\x20','Queued\x20','User\x20Profiles','Username\x20is\x20missing','Failed\x20to\x20delete\x20article:\x20','NonParticipant','div','pending-count','Manage\x20Highlights\x20section\x20initialized','matches-search','resimulate-modal','.form-group','Player\x20Achievement','toDate','migrate-points-btn','players','activity','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','role','highlight-achievement-image','toLocaleString','seconds','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','highlight-match-link-container','edit-match-winner-suicides','Error\x20assigning\x20trophy:','error-state','trophy-rarity','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','data','console','Failed\x20to\x20load\x20points\x20data:\x20','toLocaleDateString','page','Article\x20created\x20successfully','displayName','history-type-filter','mapName','creatorImageUrl','sort','load-users-data','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','#808080','Trophy\x20not\x20found','none','playersD3','roleName','\x20ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Modal\x20element\x20not\x20found!','opacity','name','#players.content-section.active','level','matches-next-page','quick-edit-user-id','edit-highlight-id','\x20allowed\x20tabs:','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','innerHTML','Displaying\x20','message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','matchInfo','edit-match-winner-comment','startDate','Error\x20loading\x20points\x20data:','map','playerProfileUrl','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','user-search','block','Non-Participant','Found\x20specific\x20role:\x20','Modal\x20close\x20button\x20clicked','filter','Quick\x20edit\x20form\x20submitted','cancel-highlight-btn','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','.sidebar-nav\x20.nav-item[data-section=\x22','type','quick-add','Username\x20','highlight-winner-name','highlight-creator-image','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','focus','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','highlight-video-id','achievement','createdBy','high-points','Featured\x20Creator','createElement','style','selected-user-name','dataset','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','points-user-search','elo-history-search','win','elo-history','manage-points','Set\x20default\x20ladder\x20to:','create-test-match-modal','Simple\x20test\x20match\x20created\x20successfully','15px','imageUrl','N/A','edit-highlight-winnerName-input','selected-user-id','userId','cancel-promote-btn','input','has','color','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','set','sources','cancel-role-btn','testFirebaseConnection','Error\x20adding\x20ribbon','Points\x20modified\x20successfully','YouTube\x20Video\x20ID\x20(Optional)','location','achievementDetails','daysSinceMatch','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','.loading-cell','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','Bronze','Error\x20fetching\x20matches\x20for\x20','Demotion\x20notification\x20sent\x20to\x20Discord\x20bot','promotedBy','edit-match-loser-suicides','assign-trophy-modal','.edit-match-btn','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','.close-notification','error','Error\x20loading\x20match\x20for\x20deletion:','manage-highlights','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','Load\x20articles\x20data\x20clicked','warn','points','#CD7F32','setHours','edit-highlight-videoId-input','article-author','Initial\x20Placement','prototype','\x20not\x20found\x20in\x20any\x20ladder','checked','fa-exclamation-triangle','create-creator-highlight-btn','highlight-achievement-player','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data',',\x20giving\x20default\x20access','No\x20users\x20needed\x20points\x20field\x20initialization','users-table-body','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Player\x20not\x20found\x20in\x20','-page-indicator','trophy-description','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','subtract','then','Load\x20trophies\x20data\x20clicked','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','Load\x20players\x20data\x20clicked','create-test-match-btn','rgba(25,\x20118,\x20210,\x200.7)','highlight-winner-score','matches-table-body','catch','remove','inactive-players','src','Error\x20initializing\x20points:\x20','Test\x20match','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','username','href','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','max','lastMatch','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','Create\x20test\x20match\x20modal\x20not\x20found','Found\x20','delete-match-summary','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','trophy-image-preview','match-details-container','contains','\x20(winner)\x20vs\x20','\x20Successfully\x20initialized\x20points\x20field\x20for\x20','edit-player-modal','manage-articles','Table\x20row\x20for\x20user\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','Inactive\x20players\x20section\x20initialized','highlight-match-link','edit-username','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20','manage-matches','edit-highlight-matchInfo-input','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20','position','Gold','TestMap','Tuesday','#matches-table-body\x20tr','add','endDate','Defaulted\x20to\x20D1\x20ladder','\x20Exists','\x20history\x20entries\x20for\x20user\x20','promote-ladder','\x20users\x20to\x20check...','highlight-submitted-by','highlight-map','rankDistribution','No\x20specific\x20permissions\x20for\x20user\x20','Unranked'];a4_0x2c8f=function(){return _0xa3375b;};return a4_0x2c8f();}async function confirmDeleteMatch(){const _0x147a43=a4_0xe70f19,_0x273396=document['getElementById']('delete-match-confirm-modal'),_0x462d8e=_0x273396[_0x147a43(0x2b8)]['matchId'],_0x208bf9=_0x273396['dataset'][_0x147a43(0x139)];if(!_0x462d8e||!_0x208bf9){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x147a43(0x2e4)),closeDeleteMatchModal();return;}try{const _0x200d20=_0x208bf9==='D1'?'approvedMatches':_0x208bf9==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x200d20,_0x462d8e)),showNotification('Match\x20deleted\x20successfully',_0x147a43(0x12f)),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x208bf9[_0x147a43(0x21d)]()]['page']);}catch(_0x4204c2){console[_0x147a43(0x2e4)](_0x147a43(0x150),_0x4204c2),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x4204c2['message'],_0x147a43(0x2e4));}}async function saveHighlightChanges(){const _0x535e82=a4_0xe70f19,_0x209b81=document['getElementById'](_0x535e82(0x290))['value'],_0x26c881=document[_0x535e82(0x17d)]('edit-highlight-type-select')['value'];let _0x67862b={'title':document['getElementById']('edit-highlight-title-input')[_0x535e82(0x122)]['trim'](),'type':_0x26c881,'description':document['getElementById'](_0x535e82(0x154))['value']['trim'](),'videoId':document['getElementById'](_0x535e82(0x2ed))['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x26c881===_0x535e82(0x236)){_0x67862b[_0x535e82(0x297)]=document['getElementById'](_0x535e82(0x328))['value']['trim'](),_0x67862b[_0x535e82(0x29b)]=document[_0x535e82(0x17d)]('edit-highlight-map-input')['value']['trim']();const _0x31b83e=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x67862b[_0x535e82(0x11a)]=_0x31b83e?Timestamp[_0x535e82(0x17f)](new Date(_0x31b83e)):null,_0x67862b['winnerName']=document[_0x535e82(0x17d)](_0x535e82(0x2c5))['value']['trim'](),_0x67862b[_0x535e82(0x206)]=document[_0x535e82(0x17d)](_0x535e82(0x23d))[_0x535e82(0x122)]['trim'](),_0x67862b['loserName']=document['getElementById']('edit-highlight-loserName-input')['value'][_0x535e82(0x142)](),_0x67862b['loserScore']=document['getElementById']('edit-highlight-loserScore-input')['value'][_0x535e82(0x142)](),_0x67862b['matchLink']=document[_0x535e82(0x17d)]('edit-highlight-matchLink-input')['value']['trim'](),_0x67862b['mapCreator']=null,_0x67862b['mapVersion']=null,_0x67862b['creatorImageUrl']=null,_0x67862b['achievementPlayer']=null,_0x67862b['achievementType']=null,_0x67862b['achievementDetails']=null,_0x67862b[_0x535e82(0x29c)]=null;}else{if(_0x26c881===_0x535e82(0x16b))_0x67862b['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x67862b['mapCreator']=document[_0x535e82(0x17d)]('edit-highlight-mapCreator-input')['value']['trim'](),_0x67862b[_0x535e82(0x254)]=document['getElementById']('edit-highlight-mapVersion-input')[_0x535e82(0x122)][_0x535e82(0x142)](),_0x67862b['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')[_0x535e82(0x122)][_0x535e82(0x142)](),_0x67862b['matchInfo']=null,_0x67862b[_0x535e82(0x11a)]=null,_0x67862b['winnerName']=null,_0x67862b['winnerScore']=null,_0x67862b[_0x535e82(0x19a)]=null,_0x67862b['loserScore']=null,_0x67862b['matchLink']=null,_0x67862b['achievementPlayer']=null,_0x67862b[_0x535e82(0x1bc)]=null,_0x67862b[_0x535e82(0x2d5)]=null,_0x67862b[_0x535e82(0x29c)]=null;else _0x26c881==='achievement'&&(_0x67862b['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')[_0x535e82(0x122)][_0x535e82(0x142)](),_0x67862b['achievementType']=document['getElementById'](_0x535e82(0x10a))['value']['trim'](),_0x67862b['achievementDetails']=document['getElementById']('edit-highlight-achievementDetails-input')['value']['trim'](),_0x67862b['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x67862b[_0x535e82(0x297)]=null,_0x67862b[_0x535e82(0x29b)]=null,_0x67862b[_0x535e82(0x11a)]=null,_0x67862b['winnerName']=null,_0x67862b[_0x535e82(0x206)]=null,_0x67862b['loserName']=null,_0x67862b['loserScore']=null,_0x67862b['matchLink']=null,_0x67862b['mapCreator']=null,_0x67862b['mapVersion']=null,_0x67862b[_0x535e82(0x27e)]=null);}try{if(_0x209b81){_0x67862b['updatedAt']=serverTimestamp();const _0x2202cf=doc(db,'highlights',_0x209b81);await updateDoc(_0x2202cf,_0x67862b),showNotification(_0x535e82(0x1bf),'success');}else _0x67862b[_0x535e82(0x1dd)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x67862b),showNotification('Highlight\x20added\x20successfully!',_0x535e82(0x12f));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x313142){console['error']('Error\x20saving\x20highlight:',_0x313142),showNotification('Error\x20saving\x20highlight:\x20'+_0x313142['message'],_0x535e82(0x2e4));}}async function resimulateMatch(){const _0x284160=a4_0xe70f19;try{const _0x2b64df=document[_0x284160(0x17d)]('resimulate-match-id')['value'];if(!_0x2b64df){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x5ccaa0=auth['currentUser'];if(!_0x5ccaa0){showNotification(_0x284160(0x281),_0x284160(0x2e4));return;}const _0x42c941=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x284160(0x176),_0x2fe099=doc(db,_0x42c941,_0x2b64df),_0x31d017=await getDoc(_0x2fe099);if(!_0x31d017['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x24aa82=_0x31d017[_0x284160(0x275)](),_0x37a7d6=_0x24aa82[_0x284160(0x12b)]?_0x24aa82[_0x284160(0x12b)]['toDate']()['toLocaleString']():_0x24aa82['matchDate']?_0x24aa82[_0x284160(0x11a)][_0x284160(0x264)]?_0x24aa82['matchDate']['toDate']()['toLocaleString']():new Date(_0x24aa82['matchDate'])[_0x284160(0x26b)]():_0x284160(0xf8),_0x5c71b1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x24aa82['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x24aa82['loserUsername']+_0x284160(0x2fe)+_0x24aa82[_0x284160(0x206)]+'-'+_0x24aa82['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x24aa82['mapPlayed']||_0x24aa82['mapName']||_0x284160(0xf8))+_0x284160(0x103)+_0x37a7d6+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x2b64df+_0x284160(0xf5)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')[_0x284160(0x293)]=_0x5c71b1,document['getElementById'](_0x284160(0x31b))['style']['display']='block',document['getElementById'](_0x284160(0x222))[_0x284160(0x2b6)]['display']=_0x284160(0x29f),window['pendingResimulateData']={'matchId':_0x2b64df,'matchData':_0x24aa82,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x3304a0){console[_0x284160(0x2e4)](_0x284160(0x1ae),_0x3304a0),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x3304a0['message'],'error');}}async function confirmResimulateMatch(){const _0x1d9262=a4_0xe70f19;try{const {matchId:_0x4710fd,matchData:_0x56ed6c,ladder:_0x1dbedc}=window[_0x1d9262(0x230)];if(!_0x4710fd||!_0x56ed6c){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x31804e=_0x1dbedc==='D1'?'players':_0x1dbedc==='D2'?_0x1d9262(0x1be):'playersD3',_0x3b5eb4=_0x1dbedc==='D1'?_0x1d9262(0x1fa):_0x1dbedc==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x47b53e,_0x455848]=await Promise['all']([getDocs(query(collection(db,_0x31804e),where('username','==',_0x56ed6c[_0x1d9262(0x183)]))),getDocs(query(collection(db,_0x31804e),where('username','==',_0x56ed6c['loserUsername'])))]);if(_0x47b53e['empty']||_0x455848['empty']){showNotification('Could\x20not\x20find\x20player\x20documents',_0x1d9262(0x2e4));return;}const _0x327261=_0x47b53e['docs'][0x0]['id'],_0xd7d83e=_0x455848[_0x1d9262(0x155)][0x0]['id'],_0x52e35f=_0x47b53e['docs'][0x0][_0x1d9262(0x275)](),_0x43e483=_0x455848['docs'][0x0][_0x1d9262(0x275)](),[_0x93b395,_0x215ad6]=await Promise['all']([getDocs(query(collection(db,_0x3b5eb4),where('playerId','==',_0x327261),where('matchId','==',_0x4710fd))),getDocs(query(collection(db,_0x3b5eb4),where(_0x1d9262(0x1c1),'==',_0xd7d83e),where('matchId','==',_0x4710fd)))]),_0x24394a=!_0x93b395['empty'],_0x1e5d4a=!_0x215ad6['empty'],_0x1f6d3b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x24394a?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x1e5d4a?_0x1d9262(0x332):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x52e35f[_0x1d9262(0xfa)]||_0x1d9262(0xf8))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x43e483[_0x1d9262(0xfa)]||'Unknown')+_0x1d9262(0x123)+(_0x52e35f['position']||'Unknown')+_0x1d9262(0x242)+(_0x43e483['position']||'Unknown')+_0x1d9262(0x273);document[_0x1d9262(0x17d)]('validation-results-container')['innerHTML']=_0x1f6d3b,document['getElementById']('validation-results-container')[_0x1d9262(0x2b6)][_0x1d9262(0x1ef)]=_0x1d9262(0x29f);if(_0x24394a&&_0x1e5d4a){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x1d9262(0x1d3),_0x1d9262(0x135));const _0x4553bf=_0x56ed6c['approvedAt']||_0x56ed6c['matchDate']||serverTimestamp(),[_0x2ad86b,_0x2af932]=await Promise['all']([getPlayerEloAtTime(_0x327261,_0x4553bf,_0x3b5eb4),getPlayerEloAtTime(_0xd7d83e,_0x4553bf,_0x3b5eb4)]),{calculateElo:_0x2dea3f}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x4dcbfe,newLoserRating:_0x474ca4}=_0x2dea3f(_0x2ad86b,_0x2af932),_0x2d9f2a=_0x52e35f['position']||Number[_0x1d9262(0x1e4)],_0x276696=_0x43e483['position']||Number['MAX_SAFE_INTEGER'];let _0x30b601=_0x2d9f2a,_0x4bcc31=_0x276696;_0x2d9f2a>_0x276696&&(_0x30b601=_0x276696,_0x4bcc31=_0x276696+0x1);const _0x3e9a91=writeBatch(db),_0x5b5a64=doc(db,_0x31804e,_0x327261);_0x3e9a91[_0x1d9262(0x16c)](_0x5b5a64,{'eloRating':_0x4dcbfe,'position':_0x30b601,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x1d9262(0x14e)][_0x1d9262(0x199)]});const _0x7af067=doc(db,_0x31804e,_0xd7d83e);_0x3e9a91['update'](_0x7af067,{'eloRating':_0x474ca4,'position':_0x4bcc31,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x1d9262(0x14e)]['uid']});if(_0x2d9f2a>_0x276696){const _0x38ab5e=await getDocs(query(collection(db,_0x31804e),where('position','>',_0x276696),where('position','<',_0x2d9f2a)));_0x38ab5e['forEach'](_0x311bb4=>{const _0x4210fb=_0x1d9262,_0x4638ea=doc(db,_0x31804e,_0x311bb4['id']),_0x2d3f74=_0x311bb4['data']()[_0x4210fb(0x32a)];_0x3e9a91['update'](_0x4638ea,{'position':_0x2d3f74+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x24394a){const _0x4cbf89=doc(collection(db,_0x3b5eb4));_0x3e9a91['set'](_0x4cbf89,{'playerId':_0x327261,'player':_0x56ed6c['winnerUsername'],'previousElo':_0x2ad86b,'newElo':_0x4dcbfe,'eloChange':_0x4dcbfe-_0x2ad86b,'opponentId':_0xd7d83e,'opponent':_0x56ed6c[_0x1d9262(0x16d)],'matchResult':_0x1d9262(0x2bc),'previousPosition':_0x2d9f2a,'newPosition':_0x30b601,'positionChange':_0x30b601-_0x2d9f2a,'matchId':_0x4710fd,'timestamp':_0x4553bf,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x1dbedc,'matchScore':_0x56ed6c['winnerScore']+'-'+_0x56ed6c['loserScore'],'mapPlayed':_0x56ed6c[_0x1d9262(0x240)]||_0x56ed6c['mapName']||'Unknown','note':_0x1d9262(0x2e2)});}if(!_0x1e5d4a){const _0x1da587=doc(collection(db,_0x3b5eb4));_0x3e9a91['set'](_0x1da587,{'playerId':_0xd7d83e,'player':_0x56ed6c['loserUsername'],'previousElo':_0x2af932,'newElo':_0x474ca4,'eloChange':_0x474ca4-_0x2af932,'opponentId':_0x327261,'opponent':_0x56ed6c['winnerUsername'],'matchResult':'loss','previousPosition':_0x276696,'newPosition':_0x4bcc31,'positionChange':_0x4bcc31-_0x276696,'matchId':_0x4710fd,'timestamp':_0x4553bf,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x1dbedc,'matchScore':_0x56ed6c['winnerScore']+'-'+_0x56ed6c['loserScore'],'mapPlayed':_0x56ed6c['mapPlayed']||_0x56ed6c[_0x1d9262(0x27d)]||'Unknown','note':_0x1d9262(0x2e2)});}const _0x54e49f=_0x1dbedc==='D1'?_0x1d9262(0x1d0):_0x1dbedc==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x32fbbd=doc(db,_0x54e49f,_0x4710fd);_0x3e9a91['update'](_0x32fbbd,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x1d9262(0x14e)][_0x1d9262(0x199)],'resimulatedReason':_0x1d9262(0x197),'originalWinnerElo':_0x52e35f[_0x1d9262(0xfa)],'originalLoserElo':_0x43e483['eloRating'],'originalWinnerPosition':_0x2d9f2a,'originalLoserPosition':_0x276696,'resimulatedWinnerElo':_0x4dcbfe,'resimulatedLoserElo':_0x474ca4,'resimulatedWinnerPosition':_0x30b601,'resimulatedLoserPosition':_0x4bcc31}),await _0x3e9a91['commit']();const _0x40e1df=(!_0x24394a?0x1:0x0)+(!_0x1e5d4a?0x1:0x0),_0x53b91c=_0x2d9f2a!==_0x30b601||_0x276696!==_0x4bcc31;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x1d9262(0x1a1)+_0x40e1df+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x2ad86b+''+_0x4dcbfe+_0x1d9262(0x11f)+(_0x4dcbfe-_0x2ad86b)+_0x1d9262(0x114))+(_0x1d9262(0x109)+_0x2af932+''+_0x474ca4+'\x20('+(_0x474ca4-_0x2af932)+_0x1d9262(0x209))+(''+(_0x53b91c?'Positions\x20updated:\x20Winner\x20'+_0x2d9f2a+''+_0x30b601+',\x20Loser\x20'+_0x276696+''+_0x4bcc31:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector'](_0x1d9262(0x28c))&&loadPlayersData();}catch(_0x4f121e){console['error'](_0x1d9262(0x190),_0x4f121e),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x4f121e['message'],_0x1d9262(0x2e4));}}async function getPlayerEloAtTime(_0x3d4b2c,_0x3000b9,_0x3638cd){const _0xc2188=a4_0xe70f19;try{const _0x154823=_0x3000b9['toDate']?_0x3000b9['toDate']():new Date(_0x3000b9),_0x13cd7c=query(collection(db,_0x3638cd),where(_0xc2188(0x1c1),'==',_0x3d4b2c),where('timestamp','<',_0x3000b9),orderBy('timestamp','desc'),limit(0x1)),_0x149dcc=await getDocs(_0x13cd7c);if(!_0x149dcc['empty']){const _0x290fa6=_0x149dcc['docs'][0x0]['data']();return console[_0xc2188(0x19f)]('Found\x20ELO\x20history\x20for\x20player\x20'+_0x3d4b2c+'\x20before\x20match:\x20'+_0x290fa6[_0xc2188(0x215)]),_0x290fa6['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x3d4b2c+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x1735e3){return console[_0xc2188(0x2e4)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x3d4b2c+':',_0x1735e3),0x4b0;}}function openResimulateModal(){const _0x2b5cf5=a4_0xe70f19;console[_0x2b5cf5(0x19f)]('openResimulateModal\x20called!');const _0x278125=document[_0x2b5cf5(0x17d)](_0x2b5cf5(0x261));console['log']('Modal\x20element\x20found:',_0x278125);if(!_0x278125){console[_0x2b5cf5(0x2e4)](_0x2b5cf5(0x289));return;}_0x278125['style'][_0x2b5cf5(0x1ef)]='block',_0x278125[_0x2b5cf5(0x2b6)][_0x2b5cf5(0x15c)]='visible',_0x278125['style']['opacity']='1',_0x278125['classList'][_0x2b5cf5(0x32f)]('active'),console[_0x2b5cf5(0x19f)]('Modal\x20should\x20now\x20be\x20visible'),console[_0x2b5cf5(0x19f)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x278125)[_0x2b5cf5(0x1ef)]);const _0x2bcce9=document['getElementById'](_0x2b5cf5(0x31b)),_0x240bf2=document['getElementById']('validation-results-container'),_0x3c0f5c=document[_0x2b5cf5(0x17d)]('confirm-resimulate-btn'),_0x4b2e68=document[_0x2b5cf5(0x17d)]('resimulate-match-id');if(_0x2bcce9)_0x2bcce9[_0x2b5cf5(0x293)]='';if(_0x240bf2)_0x240bf2['innerHTML']='';if(_0x3c0f5c)_0x3c0f5c[_0x2b5cf5(0x2b6)][_0x2b5cf5(0x1ef)]='none';if(_0x4b2e68)_0x4b2e68[_0x2b5cf5(0x122)]='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x18514d=a4_0xe70f19;document[_0x18514d(0x17d)]('resimulate-modal')['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0xe70f19(0x251)]=closeResimulateModal;async function loadPointsData(){const _0x389377=a4_0xe70f19;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully',_0x389377(0x12f));}catch(_0x5997c0){console[_0x389377(0x2e4)](_0x389377(0x29a),_0x5997c0),showNotification(_0x389377(0x277)+_0x5997c0[_0x389377(0x295)],_0x389377(0x2e4));}}function renderPointsOverview(_0x5b91b2){const _0x34266d=a4_0xe70f19,_0x1e9b66=document['getElementById']('points-overview-table-body');if(!_0x1e9b66)return;if(_0x5b91b2['length']===0x0){_0x1e9b66['innerHTML']=_0x34266d(0x26d);return;}_0x1e9b66['innerHTML']='',_0x5b91b2[_0x34266d(0x1eb)](_0x4c7c36=>{const _0x197641=_0x34266d,_0x314067=document['createElement']('tr'),_0x3344bc=_0x4c7c36['displayName']||_0x4c7c36[_0x197641(0x310)]||_0x197641(0x195),_0x23917f=_0x4c7c36['email']||'No\x20email',_0x187836=_0x4c7c36[_0x197641(0x2ea)]||0x0,_0x233812=_0x4c7c36[_0x197641(0x1fc)]?new Date(_0x4c7c36['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x314067[_0x197641(0x293)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x3344bc+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x23917f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x187836>0x3e8?_0x197641(0x2b3):_0x187836>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x187836['toLocaleString']()+_0x197641(0x1b0)+_0x233812+_0x197641(0x171)+_0x4c7c36['id']+_0x197641(0x1c4)+_0x4c7c36['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1e9b66[_0x197641(0x106)](_0x314067);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x5edfb4=a4_0xe70f19;console[_0x5edfb4(0x19f)]('Setting\x20up\x20points\x20action\x20buttons...');const _0xe92ade=document['querySelectorAll']('.quick-edit-btn');console['log']('Found\x20'+_0xe92ade[_0x5edfb4(0x1a0)]+'\x20quick\x20edit\x20buttons'),_0xe92ade['forEach'](_0xff24ba=>{const _0x160aad=_0x5edfb4,_0x59331c=_0xff24ba['cloneNode'](!![]);_0xff24ba['parentNode'][_0x160aad(0x1ee)](_0x59331c,_0xff24ba);});const _0x35ad02=document['querySelectorAll']('.view-history-btn');console['log'](_0x5edfb4(0x317)+_0x35ad02['length']+'\x20view\x20history\x20buttons'),_0x35ad02['forEach'](_0x3dce47=>{const _0x2073a1=_0x3dce47['cloneNode'](!![]);_0x3dce47['parentNode']['replaceChild'](_0x2073a1,_0x3dce47);}),document['querySelectorAll']('.quick-edit-btn')['forEach'](_0xf53d43=>{const _0x3b19cb=_0x5edfb4;_0xf53d43['addEventListener'](_0x3b19cb(0x10d),function(_0x35950e){_0x35950e['preventDefault'](),_0x35950e['stopPropagation']();const _0xf0766b=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0xf0766b);if(!_0xf0766b){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0xf0766b);});}),document['querySelectorAll'](_0x5edfb4(0x119))['forEach'](_0x474b6a=>{const _0x1014b8=_0x5edfb4;_0x474b6a[_0x1014b8(0x15d)]('click',function(_0x38d789){const _0x23f248=_0x1014b8;_0x38d789['preventDefault'](),_0x38d789[_0x23f248(0x213)]();const _0x5efa95=this['dataset']['userId'];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x5efa95);if(!_0x5efa95){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x23f248(0x2b6)][_0x23f248(0x28a)]='0.6',setTimeout(()=>{const _0x292f1e=_0x23f248;this[_0x292f1e(0x2b6)][_0x292f1e(0x28a)]='1';},0xc8),loadUserPointsHistory(_0x5efa95);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x51f81f){const _0x4f0f96=a4_0xe70f19;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x51f81f);const _0x1f4d80=document['getElementById'](_0x4f0f96(0x174));if(!_0x1f4d80){console['error'](_0x4f0f96(0x21a)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...',_0x4f0f96(0x135));const _0x4c33fc=doc(db,'userProfiles',_0x51f81f),_0x2578a4=await getDoc(_0x4c33fc);if(!_0x2578a4['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x48cc1c=_0x2578a4['data']();console['log'](_0x4f0f96(0x18d),_0x48cc1c);const _0x11a57a=document['getElementById'](_0x4f0f96(0x28f)),_0x1fd138=document[_0x4f0f96(0x17d)]('quick-edit-display-name'),_0x39da30=document['getElementById']('quick-edit-email'),_0x3c0bb0=document['getElementById']('quick-edit-current-points'),_0xbc92a4=document[_0x4f0f96(0x17d)]('quick-edit-points-form');if(!_0x11a57a||!_0x1fd138||!_0x39da30||!_0x3c0bb0||!_0xbc92a4){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x11a57a[_0x4f0f96(0x122)]=_0x51f81f,_0x1fd138['textContent']=_0x48cc1c['displayName']||_0x48cc1c[_0x4f0f96(0x310)]||'Unknown\x20User',_0x39da30['textContent']=_0x48cc1c['email']||'No\x20email',_0x3c0bb0['textContent']=(_0x48cc1c['points']||0x0)[_0x4f0f96(0x26b)](),_0xbc92a4['reset']();const _0x7aab97=document['getElementById'](_0x4f0f96(0x2a9));_0x7aab97&&(_0x7aab97[_0x4f0f96(0x2f2)]=!![]);_0x1f4d80['classList']['add']('active'),console[_0x4f0f96(0x19f)]('Modal\x20opened\x20successfully');const _0x493a8e=document[_0x4f0f96(0x17d)]('quick-points-amount');_0x493a8e&&setTimeout(()=>_0x493a8e[_0x4f0f96(0x2ae)](),0x64);}catch(_0x462dfc){console['error'](_0x4f0f96(0x17a),_0x462dfc),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x462dfc['message'],'error');}}function closeQuickEditModal(){const _0x6039a3=a4_0xe70f19,_0x2d4e06=document['getElementById'](_0x6039a3(0x174));_0x2d4e06&&_0x2d4e06['classList']['remove']('active');}async function handleQuickEditPoints(_0x3f6f9f){const _0x5c78d5=a4_0xe70f19;_0x3f6f9f['preventDefault']();const _0x1ce745=document['getElementById'](_0x5c78d5(0x28f))[_0x5c78d5(0x122)],_0x2aa2d3=document['querySelector']('input[name=\x22quick-action\x22]:checked')[_0x5c78d5(0x122)],_0x352dd6=parseInt(document[_0x5c78d5(0x17d)]('quick-points-amount')[_0x5c78d5(0x122)]),_0x50c877=document['getElementById']('quick-points-reason')['value'][_0x5c78d5(0x142)]();console['log'](_0x5c78d5(0x18b),{'userId':_0x1ce745,'action':_0x2aa2d3,'amount':_0x352dd6,'reason':_0x50c877});if(!_0x1ce745||!_0x352dd6||_0x352dd6<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x1ce745,_0x2aa2d3,_0x352dd6,_0x50c877),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console[_0x5c78d5(0x19f)]('Points\x20updated\x20successfully\x20for\x20user:',_0x1ce745);}catch(_0xe4f4f3){console[_0x5c78d5(0x2e4)]('Error\x20updating\x20points:',_0xe4f4f3),showNotification('Failed\x20to\x20update\x20points:\x20'+_0xe4f4f3[_0x5c78d5(0x295)],'error');}}async function searchUsersForPoints(){const _0x1d22f7=a4_0xe70f19,_0x39bbd0=document['getElementById']('points-user-search')['value']['trim']()['toLowerCase'](),_0x5dea47=document['getElementById']('user-search-results');if(!_0x39bbd0||_0x39bbd0[_0x1d22f7(0x1a0)]<0x2){_0x5dea47['innerHTML']='';return;}_0x5dea47['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x37be41=collection(db,_0x1d22f7(0x121)),_0x2c099e=await getDocs(_0x37be41),_0x4463c2=[];_0x2c099e['forEach'](_0x2f5455=>{const _0x1b733e=_0x1d22f7,_0x5c916c=_0x2f5455['data'](),_0x2309ed=(_0x5c916c['displayName']||_0x5c916c['username']||'')[_0x1b733e(0x21d)](),_0x568921=(_0x5c916c['email']||'')['toLowerCase']();(_0x2309ed[_0x1b733e(0x20d)](_0x39bbd0)||_0x568921[_0x1b733e(0x20d)](_0x39bbd0))&&_0x4463c2['push']({'id':_0x2f5455['id'],..._0x5c916c});});if(_0x4463c2['length']===0x0){_0x5dea47['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x5dea47['innerHTML']='',_0x4463c2[_0x1d22f7(0x1eb)](_0x5ff2f2=>{const _0x5a35bd=_0x1d22f7,_0xe69716=document[_0x5a35bd(0x2b5)]('div');_0xe69716[_0x5a35bd(0x15e)]='search-result-item',_0xe69716['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x5ff2f2[_0x5a35bd(0x27b)]||_0x5ff2f2['username']||_0x5a35bd(0xf8))+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x5ff2f2[_0x5a35bd(0x10e)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x5ff2f2['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xe69716['addEventListener']('click',()=>selectUserForPoints(_0x5ff2f2)),_0x5dea47['appendChild'](_0xe69716);});}catch(_0x42bc38){console['error'](_0x1d22f7(0x141),_0x42bc38),_0x5dea47['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x50bb9c){const _0x4fecb5=a4_0xe70f19;document[_0x4fecb5(0x17d)](_0x4fecb5(0x2b7))['textContent']=_0x50bb9c['displayName']||_0x50bb9c[_0x4fecb5(0x310)]||'Unknown\x20User',document[_0x4fecb5(0x17d)](_0x4fecb5(0x15a))[_0x4fecb5(0x1c5)]=(_0x50bb9c[_0x4fecb5(0x2ea)]||0x0)[_0x4fecb5(0x26b)](),document[_0x4fecb5(0x17d)]('selected-user-id')['value']=_0x50bb9c['id'],document['getElementById'](_0x4fecb5(0x1b8))['style'][_0x4fecb5(0x1ef)]=_0x4fecb5(0x29f),document['getElementById']('points-management-forms')['style']['display']='block',document['getElementById']('user-search-results')[_0x4fecb5(0x293)]='',document[_0x4fecb5(0x17d)](_0x4fecb5(0x2ba))[_0x4fecb5(0x122)]='';}async function handleModifyPoints(_0x3221e3){const _0x143a8b=a4_0xe70f19;_0x3221e3['preventDefault']();const _0x3c76db=document['getElementById'](_0x143a8b(0x2c6))['value'],_0x4ad82e=document[_0x143a8b(0x17d)]('points-action')['value'],_0x3613f8=parseInt(document['getElementById']('points-amount')['value']),_0x14ca9d=document['getElementById']('points-reason')['value']['trim']();if(!_0x3c76db||!_0x3613f8||_0x3613f8<0x0){showNotification(_0x143a8b(0x198),'error');return;}try{await modifyUserPoints(_0x3c76db,_0x4ad82e,_0x3613f8,_0x14ca9d),document['getElementById']('modify-points-form')['reset']();const _0x557b7a=doc(db,'userProfiles',_0x3c76db),_0x313fce=await getDoc(_0x557b7a);if(_0x313fce['exists']()){const _0x2f15c1=_0x313fce[_0x143a8b(0x275)]();document['getElementById'](_0x143a8b(0x15a))['textContent']=(_0x2f15c1[_0x143a8b(0x2ea)]||0x0)['toLocaleString']();}showNotification(_0x143a8b(0x2d2),'success'),loadPointsHistory();}catch(_0x19c456){console['error']('Error\x20modifying\x20points:',_0x19c456),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x19c456[_0x143a8b(0x295)],'error');}}async function loadPointsHistory(){const _0x547166=a4_0xe70f19,_0x218585=document[_0x547166(0x17d)]('points-history-table-body');if(!_0x218585)return;_0x218585['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x565b76=collection(db,_0x547166(0x1bd)),_0x17d100=query(_0x565b76,orderBy('timestamp','desc'),limit(0x32)),_0x507572=await getDocs(_0x17d100);if(_0x507572[_0x547166(0x24e)]){_0x218585['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x218585['innerHTML']='',_0x507572['forEach'](_0x4ccbd1=>{const _0x2c33d5=_0x547166,_0x3e7cdb=_0x4ccbd1['data'](),_0x4f31dc=document['createElement']('tr'),_0x314b5e=_0x3e7cdb['timestamp']?new Date(_0x3e7cdb['timestamp']['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0xc6685a='';switch(_0x3e7cdb[_0x2c33d5(0x107)]){case'add':_0xc6685a='Added\x20'+_0x3e7cdb['amount']+_0x2c33d5(0x153);break;case _0x2c33d5(0x2ff):_0xc6685a='Subtracted\x20'+_0x3e7cdb['amount']+'\x20points';break;case'set':_0xc6685a='Set\x20to\x20'+_0x3e7cdb['amount']+'\x20points';break;default:_0xc6685a=_0x3e7cdb['action']+'\x20'+_0x3e7cdb[_0x2c33d5(0x157)]+'\x20points';}_0x4f31dc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x314b5e+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3e7cdb[_0x2c33d5(0x27b)]||_0x2c33d5(0x195))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc6685a+_0x2c33d5(0x138)+_0x3e7cdb['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3e7cdb[_0x2c33d5(0x20b)]||0x0)+'\x20\x20'+(_0x3e7cdb[_0x2c33d5(0x12a)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3e7cdb['reason']||'No\x20reason\x20provided')+_0x2c33d5(0xf7)+(_0x3e7cdb[_0x2c33d5(0xf1)]||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x218585[_0x2c33d5(0x106)](_0x4f31dc);});}catch(_0x1c2672){console['error']('Error\x20loading\x20points\x20history:',_0x1c2672),_0x218585['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x1c2672[_0x547166(0x295)]+'</td></tr>';}}function filterPointsOverview(){const _0x4e1ac7=a4_0xe70f19,_0x329be6=document['getElementById']('points-overview-search')[_0x4e1ac7(0x122)]['toLowerCase']();if(!window['allUsersPoints'])return;const _0x234286=window['allUsersPoints'][_0x4e1ac7(0x2a3)](_0x20bcc6=>{const _0x5983ab=_0x4e1ac7,_0x4af9f9=(_0x20bcc6[_0x5983ab(0x27b)]||_0x20bcc6['username']||'')['toLowerCase'](),_0x1aad96=(_0x20bcc6['email']||'')['toLowerCase']();return _0x4af9f9['includes'](_0x329be6)||_0x1aad96['includes'](_0x329be6);});renderPointsOverview(_0x234286);}function sortPointsOverview(){const _0x460720=a4_0xe70f19,_0x15d75d=document['getElementById']('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x18a2de=[...window['allUsersPoints']];switch(_0x15d75d){case'points-desc':_0x18a2de['sort']((_0x2f6eb0,_0x354ebd)=>(_0x354ebd['points']||0x0)-(_0x2f6eb0['points']||0x0));break;case'points-asc':_0x18a2de['sort']((_0x20a759,_0x3b2a61)=>(_0x20a759['points']||0x0)-(_0x3b2a61['points']||0x0));break;case'name-asc':_0x18a2de[_0x460720(0x27f)]((_0x43dda8,_0x231cd6)=>{const _0x364fc2=_0x460720,_0x12359c=(_0x43dda8['displayName']||_0x43dda8[_0x364fc2(0x310)]||'')['toLowerCase'](),_0x1e0642=(_0x231cd6[_0x364fc2(0x27b)]||_0x231cd6[_0x364fc2(0x310)]||'')['toLowerCase']();return _0x12359c['localeCompare'](_0x1e0642);});break;case'name-desc':_0x18a2de['sort']((_0x38067e,_0x169511)=>{const _0x57523d=_0x460720,_0x418962=(_0x38067e[_0x57523d(0x27b)]||_0x38067e[_0x57523d(0x310)]||'')['toLowerCase'](),_0x447207=(_0x169511[_0x57523d(0x27b)]||_0x169511['username']||'')[_0x57523d(0x21d)]();return _0x447207['localeCompare'](_0x418962);});break;}renderPointsOverview(_0x18a2de);}async function handleAwardItem(_0x8b2c28){const _0x36185b=a4_0xe70f19;_0x8b2c28['preventDefault']();const _0x4639f2=document['getElementById'](_0x36185b(0x2c6))['value'],_0x4797e8=document[_0x36185b(0x17d)]('store-item-select')['value'],_0x4b4edf=document['getElementById'](_0x36185b(0x161))['value']['trim']();if(!_0x4639f2||!_0x4797e8){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0x30cd1b){console['error']('Error\x20awarding\x20item:',_0x30cd1b),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x30cd1b['message'],_0x36185b(0x2e4));}}async function loadUserPointsHistory(_0x51da2e){const _0x377ca7=a4_0xe70f19;try{const _0x38fbd2=collection(db,_0x377ca7(0x1bd)),_0x118858=query(_0x38fbd2,where('userId','==',_0x51da2e),orderBy('timestamp','desc')),_0x18cf16=await getDocs(_0x118858);console[_0x377ca7(0x19f)]('Found\x20'+_0x18cf16['size']+_0x377ca7(0x333)+_0x51da2e),showNotification('User\x20has\x20'+_0x18cf16['size']+'\x20points\x20history\x20entries','info');}catch(_0x2ea80e){console[_0x377ca7(0x2e4)]('Error\x20loading\x20user\x20points\x20history:',_0x2ea80e),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x2bee45=a4_0xe70f19;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x2b6869=collection(db,_0x2bee45(0x121)),_0x562243=await getDocs(_0x2b6869);if(_0x562243['empty']){console[_0x2bee45(0x19f)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x17a47e=0x0,_0xa607d7=0x0;const _0xbcb5ae=writeBatch(db);let _0x34bcd1=0x0;return console[_0x2bee45(0x19f)]('Found\x20'+_0x562243['size']+_0x2bee45(0x335)),_0x562243[_0x2bee45(0x1eb)](_0x44a76a=>{const _0x3df1ed=_0x2bee45,_0x1cebf6=_0x44a76a[_0x3df1ed(0x275)]();_0x1cebf6['points']===undefined||_0x1cebf6['points']===null?(_0xbcb5ae['update'](_0x44a76a['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x17a47e++,_0x34bcd1++,console[_0x3df1ed(0x19f)](_0x3df1ed(0x258)+(_0x1cebf6['displayName']||_0x1cebf6[_0x3df1ed(0x310)]||_0x1cebf6['email']||_0x3df1ed(0xf8))+_0x3df1ed(0x185))):(_0xa607d7++,console['log']((_0x1cebf6['displayName']||_0x1cebf6['username']||_0x1cebf6[_0x3df1ed(0x10e)]||_0x3df1ed(0xf8))+'\x20already\x20has\x20points:\x20'+_0x1cebf6['points'])),_0x34bcd1>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x17a47e>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x17a47e+_0x2bee45(0x1e7)),await _0xbcb5ae['commit'](),console[_0x2bee45(0x19f)](_0x2bee45(0x31e)+_0x17a47e+'\x20users')):console['log'](_0x2bee45(0x2f8)),console[_0x2bee45(0x19f)](_0x2bee45(0x1e3)+_0x562243[_0x2bee45(0x1e5)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x17a47e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0xa607d7),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x17a47e+'\x20users.\x20'+_0xa607d7+'\x20users\x20already\x20had\x20points.',_0x2bee45(0x12f)),window[_0x2bee45(0x1d8)]&&loadPointsOverview(),{'totalUsers':_0x562243[_0x2bee45(0x1e5)],'usersUpdated':_0x17a47e,'usersAlreadyHadPoints':_0xa607d7};}catch(_0x156b42){console['error']('Error\x20initializing\x20points\x20field:',_0x156b42),showNotification(_0x2bee45(0x30d)+_0x156b42[_0x2bee45(0x295)],'error');throw _0x156b42;}}function addPointsMigrationButton(){const _0x1c5731=a4_0xe70f19,_0x1a8794=document[_0x1c5731(0x17d)](_0x1c5731(0x2be));if(!_0x1a8794)return;if(document['getElementById']('migrate-points-btn'))return;const _0x3c5657=document['createElement'](_0x1c5731(0x25d));_0x3c5657['className']=_0x1c5731(0x165),_0x3c5657[_0x1c5731(0x2b6)]['marginBottom']='20px',_0x3c5657['style']['padding']=_0x1c5731(0x2c2),_0x3c5657['style'][_0x1c5731(0x20e)]='rgba(255,\x20193,\x207,\x200.1)',_0x3c5657['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x3c5657['style']['borderRadius']='5px',_0x3c5657[_0x1c5731(0x293)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x27c9c1=_0x1a8794['querySelector']('.section-header');_0x27c9c1&&_0x27c9c1['insertAdjacentElement']('afterend',_0x3c5657),document['getElementById'](_0x1c5731(0x265))[_0x1c5731(0x15d)](_0x1c5731(0x10d),async function(){const _0x178822=_0x1c5731;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x178822(0x293)]=_0x178822(0x1c3),this['style']['backgroundColor']=_0x178822(0x224),setTimeout(()=>{_0x3c5657['style']['display']='none';},0xbb8);}catch(_0x41f05d){this[_0x178822(0x293)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x178822(0x113)]=![];}}});}function setupManagePointsSection(){const _0x1dff22=a4_0xe70f19;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x2aa924=document[_0x1dff22(0x17d)]('points-user-search');_0x2aa924&&_0x2aa924['addEventListener'](_0x1dff22(0x2c9),debounce(searchUsersForPoints,0x12c));const _0x11c6b2=document['getElementById']('modify-points-form');_0x11c6b2&&_0x11c6b2['addEventListener'](_0x1dff22(0x1f3),handleModifyPoints);const _0x486e34=document['getElementById']('award-item-form');_0x486e34&&_0x486e34['addEventListener'](_0x1dff22(0x1f3),handleAwardItem);const _0x7212bf=document[_0x1dff22(0x17d)]('points-overview-search');_0x7212bf&&_0x7212bf['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x366cd3=document['getElementById'](_0x1dff22(0x11e));_0x366cd3&&_0x366cd3['addEventListener'](_0x1dff22(0x136),sortPointsOverview);const _0x3f1c3a=document['getElementById']('refresh-points-overview');_0x3f1c3a&&_0x3f1c3a['addEventListener']('click',loadPointsOverview);const _0xb3bdcc=document['getElementById']('quick-edit-points-modal');if(_0xb3bdcc){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x584191=_0xb3bdcc['querySelector']('.close-btn');_0x584191?_0x584191['addEventListener'](_0x1dff22(0x10d),function(){const _0xcfc20=_0x1dff22;console['log'](_0xcfc20(0x2a2)),closeQuickEditModal();}):console[_0x1dff22(0x2e9)]('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x4cf2da=document['getElementById']('cancel-quick-edit');_0x4cf2da?_0x4cf2da['addEventListener']('click',function(){const _0x2984a9=_0x1dff22;console[_0x2984a9(0x19f)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x31b13c=document[_0x1dff22(0x17d)]('quick-edit-points-form');_0x31b13c?_0x31b13c[_0x1dff22(0x15d)](_0x1dff22(0x1f3),function(_0x18d996){const _0x106240=_0x1dff22;console['log'](_0x106240(0x2a4)),handleQuickEditPoints(_0x18d996);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0xb3bdcc['addEventListener'](_0x1dff22(0x10d),function(_0x106d74){const _0x1d22b6=_0x1dff22;_0x106d74['target']===_0xb3bdcc&&(console['log'](_0x1d22b6(0xf2)),closeQuickEditModal());});}else console[_0x1dff22(0x2e4)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}function a4_0x426c(_0x595997,_0x2e4ee1){const _0x359c92=a4_0x2c8f();return a4_0x426c=function(_0xc38162,_0xd372d0){_0xc38162=_0xc38162-0xf1;let _0x2c8f10=_0x359c92[_0xc38162];return _0x2c8f10;},a4_0x426c(_0x595997,_0x2e4ee1);}function setupManageRibbonsSection(){const _0x519727=a4_0xe70f19;console[_0x519727(0x19f)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x24de58=document['getElementById']('ribbon-user-search');_0x24de58&&_0x24de58['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x2eec35=document[_0x519727(0x17d)]('search-ribbon-user-btn');_0x2eec35&&_0x2eec35['addEventListener']('click',searchRibbonUser);const _0x4a41bf=document['getElementById']('add-ribbon-form');_0x4a41bf&&_0x4a41bf[_0x519727(0x15d)]('submit',addRibbon),_0x24de58&&_0x24de58['addEventListener']('keypress',function(_0x3ad6a7){const _0x11f7d2=_0x519727;_0x3ad6a7['key']==='Enter'&&(_0x3ad6a7[_0x11f7d2(0x1f8)](),searchRibbonUser());}),console['log'](_0x519727(0x1b1));}async function modifyUserPoints(_0x46bb86,_0x489c3d,_0x12643a,_0x2b9e5f=''){const _0x3e049c=a4_0xe70f19,_0x218b0e=doc(db,'userProfiles',_0x46bb86),_0x538002=await getDoc(_0x218b0e);if(!_0x538002['exists']())throw new Error('User\x20not\x20found');const _0x55cd9a=_0x538002[_0x3e049c(0x275)](),_0x4b3b1b=_0x55cd9a['points']!==undefined?_0x55cd9a[_0x3e049c(0x2ea)]:0x0;_0x55cd9a['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x55cd9a['displayName']||_0x55cd9a[_0x3e049c(0x10e)]||_0x3e049c(0xf8))),await updateDoc(_0x218b0e,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x4ff253=_0x4b3b1b;switch(_0x489c3d){case'add':_0x4ff253=_0x4b3b1b+_0x12643a;break;case _0x3e049c(0x2ff):_0x4ff253=Math[_0x3e049c(0x313)](0x0,_0x4b3b1b-_0x12643a);break;case'set':_0x4ff253=_0x12643a;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x218b0e,{'points':_0x4ff253,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x3e049c(0x1bd)),{'userId':_0x46bb86,'userEmail':_0x55cd9a[_0x3e049c(0x10e)]||_0x3e049c(0x1df),'displayName':_0x55cd9a['displayName']||_0x55cd9a['username']||_0x3e049c(0x195),'action':_0x489c3d,'amount':_0x12643a,'previousPoints':_0x4b3b1b,'newPoints':_0x4ff253,'reason':_0x2b9e5f,'adminEmail':auth[_0x3e049c(0x14e)]['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x18b480=a4_0xe70f19,_0x26bbc6=document['getElementById'](_0x18b480(0xff));if(!_0x26bbc6)return;_0x26bbc6['innerHTML']=_0x18b480(0x118);try{const _0x499046=collection(db,'userProfiles'),_0x362eb0=await getDocs(_0x499046);if(_0x362eb0['empty']){_0x26bbc6['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0xe4247e=[];let _0x58f531=0x0;_0x362eb0[_0x18b480(0x1eb)](_0x6cdb77=>{const _0x2e0bd1=_0x18b480,_0x8fe0f5=_0x6cdb77['data'](),_0x664e26=_0x8fe0f5['points']!==undefined?_0x8fe0f5[_0x2e0bd1(0x2ea)]:0x0;_0x8fe0f5[_0x2e0bd1(0x2ea)]===undefined&&_0x58f531++,_0xe4247e['push']({'id':_0x6cdb77['id'],..._0x8fe0f5,'points':_0x664e26});}),_0x58f531>0x0&&(console[_0x18b480(0x19f)]('Found\x20'+_0x58f531+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x58f531+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0xe4247e[_0x18b480(0x27f)]((_0x26fe54,_0x264f77)=>(_0x264f77['points']||0x0)-(_0x26fe54['points']||0x0)),window['allUsersPoints']=_0xe4247e,renderPointsOverview(_0xe4247e);}catch(_0xf38bac){console['error']('Error\x20loading\x20points\x20overview:',_0xf38bac),_0x26bbc6['innerHTML']=_0x18b480(0x1a9)+_0xf38bac['message']+_0x18b480(0x1d1);}}async function loadRibbonsData(){const _0x57dd14=a4_0xe70f19,_0x36583e=document['getElementById']('ribbons-overview-table-body');if(!_0x36583e)return;_0x36583e['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0xcc90ee,_0x53f1aa,_0x29555a]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x57dd14(0x163)))]);_0x36583e['innerHTML']='';const _0x37fe22=(_0x505ff6,_0x378d38)=>{_0x505ff6['forEach'](_0x233fe5=>{const _0x508de3=a4_0x426c,_0x38a60f=_0x233fe5['data'](),_0x229b5a=_0x38a60f['ribbons']||{},_0x60d5b2=Object[_0x508de3(0x1e8)](_0x229b5a)[_0x508de3(0x1a0)],_0xef2288=document['createElement']('tr');_0xef2288[_0x508de3(0x293)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38a60f['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x378d38['toLowerCase']()+'\x22>'+_0x378d38+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x60d5b2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38a60f['lastUpdated']?new Date(_0x38a60f['lastUpdated']['seconds']*0x3e8)[_0x508de3(0x278)]():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x38a60f['username']+'\x22\x20data-ladder=\x22'+_0x378d38+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x36583e['appendChild'](_0xef2288);});};_0x37fe22(_0xcc90ee,'D1'),_0x37fe22(_0x53f1aa,'D2'),_0x37fe22(_0x29555a,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x58d131=>{const _0x3a64db=_0x57dd14;_0x58d131['addEventListener'](_0x3a64db(0x10d),function(){const _0x28726b=_0x3a64db,_0x169973=this[_0x28726b(0x2b8)]['username'],_0x44e6b4=this[_0x28726b(0x2b8)]['ladder'];editUserRibbons(_0x169973,_0x44e6b4);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully',_0x57dd14(0x12f));}catch(_0x316a91){console[_0x57dd14(0x2e4)](_0x57dd14(0x110),_0x316a91),_0x36583e['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data',_0x57dd14(0x2e4));}}async function searchRibbonUser(){const _0x5d81aa=a4_0xe70f19,_0x46c3fc=document[_0x5d81aa(0x17d)](_0x5d81aa(0x256))[_0x5d81aa(0x122)][_0x5d81aa(0x142)]();if(!_0x46c3fc){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x772165,_0x2ec7f0,_0x2d8485]=await Promise['all']([getDoc(doc(db,_0x5d81aa(0x221),_0x46c3fc)),getDoc(doc(db,'playerRibbonsD2',_0x46c3fc)),getDoc(doc(db,'playerRibbonsD3',_0x46c3fc))]);let _0x56d33f=null,_0x11a3ea=null;if(_0x772165['exists']())_0x56d33f='D1',_0x11a3ea=_0x772165['data']();else{if(_0x2ec7f0['exists']())_0x56d33f='D2',_0x11a3ea=_0x2ec7f0['data']();else _0x2d8485['exists']()&&(_0x56d33f='D3',_0x11a3ea=_0x2d8485['data']());}_0x56d33f?(document[_0x5d81aa(0x17d)]('current-ribbon-user')['textContent']=_0x46c3fc,document['getElementById']('ribbon-target-user')[_0x5d81aa(0x122)]=_0x46c3fc,document['getElementById']('ribbon-target-ladder')[_0x5d81aa(0x122)]=_0x56d33f,document[_0x5d81aa(0x17d)]('user-ribbon-management')[_0x5d81aa(0x2b6)]['display']='block',displayCurrentRibbons(_0x11a3ea['ribbons']||{}),showNotification('Found\x20'+_0x46c3fc+_0x5d81aa(0x1d5)+_0x56d33f+'\x20ladder',_0x5d81aa(0x12f))):showNotification('User\x20'+_0x46c3fc+_0x5d81aa(0x2f1),'error');}catch(_0x7efced){console['error']('Error\x20searching\x20user:',_0x7efced),showNotification(_0x5d81aa(0x245),_0x5d81aa(0x2e4));}}function displayCurrentRibbons(_0x350bee){const _0xeebbd2=a4_0xe70f19,_0x17c6af=document['getElementById']('current-ribbons-list');if(!_0x17c6af)return;_0x17c6af[_0xeebbd2(0x293)]='';if(Object['keys'](_0x350bee)['length']===0x0){_0x17c6af['innerHTML']=_0xeebbd2(0x145);return;}Object['entries'](_0x350bee)[_0xeebbd2(0x1eb)](([_0x1b265a,_0x3f2aaf])=>{const _0x5e46a2=_0xeebbd2,_0x5cfbb5=document['createElement']('div');_0x5cfbb5['className']=_0x5e46a2(0x120),_0x5cfbb5['innerHTML']=_0x5e46a2(0x30f)+_0x1b265a+_0x5e46a2(0x326)+(_0x3f2aaf[_0x5e46a2(0x28d)]||0x1)+_0x5e46a2(0x2ad)+(_0x3f2aaf[_0x5e46a2(0x226)]?new Date(_0x3f2aaf['awardedAt']['seconds']*0x3e8)[_0x5e46a2(0x278)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x1b265a+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x17c6af['appendChild'](_0x5cfbb5);}),document['querySelectorAll']('.remove-ribbon-btn')[_0xeebbd2(0x1eb)](_0x4848d6=>{_0x4848d6['addEventListener']('click',function(){const _0x1e329a=this['dataset']['ribbon'];removeRibbon(_0x1e329a);});});}async function addRibbon(_0x62a906){const _0x10596c=a4_0xe70f19;_0x62a906['preventDefault']();const _0x20ea35=document[_0x10596c(0x17d)]('ribbon-target-user')['value'],_0x44b6b9=document['getElementById']('ribbon-target-ladder')[_0x10596c(0x122)],_0x4d35fe=document['getElementById'](_0x10596c(0x232))['value'],_0x36f0e2=parseInt(document[_0x10596c(0x17d)]('ribbon-level')['value']);if(!_0x20ea35||!_0x44b6b9||!_0x4d35fe||!_0x36f0e2){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x57fa5a='playerRibbons'+(_0x44b6b9==='D1'?'':_0x44b6b9),_0x57be29=doc(db,_0x57fa5a,_0x20ea35),_0x2d8cd6=await getDoc(_0x57be29),_0x5dfcb8=_0x2d8cd6[_0x10596c(0x104)]()?_0x2d8cd6['data']()['ribbons']||{}:{};_0x5dfcb8[_0x4d35fe]={'level':_0x36f0e2,'awardedAt':serverTimestamp()},await setDoc(_0x57be29,{'username':_0x20ea35,'ladder':_0x44b6b9,'ribbons':_0x5dfcb8,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x4d35fe+'\x20Level\x20'+_0x36f0e2+_0x10596c(0x1f9)+_0x20ea35,_0x10596c(0x12f)),displayCurrentRibbons(_0x5dfcb8),document['getElementById'](_0x10596c(0x232))['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x30cf5e){console[_0x10596c(0x2e4)](_0x10596c(0x203),_0x30cf5e),showNotification(_0x10596c(0x2d1),'error');}}async function removeRibbon(_0x10bd4c){const _0x49e28e=a4_0xe70f19,_0x7fd974=document['getElementById']('ribbon-target-user')['value'],_0x2d0988=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x10bd4c+'\x20from\x20'+_0x7fd974+'?'))return;try{const _0x72a770='playerRibbons'+(_0x2d0988==='D1'?'':_0x2d0988),_0x327afe=doc(db,_0x72a770,_0x7fd974),_0x45a63d=await getDoc(_0x327afe),_0x5a3102=_0x45a63d['exists']()?_0x45a63d['data']()['ribbons']||{}:{};delete _0x5a3102[_0x10bd4c],await setDoc(_0x327afe,{'username':_0x7fd974,'ladder':_0x2d0988,'ribbons':_0x5a3102,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x10bd4c+'\x20from\x20'+_0x7fd974,'success'),displayCurrentRibbons(_0x5a3102);}catch(_0x2d08c1){console['error']('Error\x20removing\x20ribbon:',_0x2d08c1),showNotification(_0x49e28e(0x21c),_0x49e28e(0x2e4));}}function editUserRibbons(_0x5d5c24,_0x1c71e9){const _0x2a7338=a4_0xe70f19;document[_0x2a7338(0x17d)]('ribbon-user-search')['value']=_0x5d5c24,searchRibbonUser();}