const a19_0x42f065=a19_0x4ea8,a19_0x58e7d9=(function(){let _0x41c25b=!![];return function(_0x6239b5,_0x5c2cf2){const _0x4e6817=_0x41c25b?function(){if(_0x5c2cf2){const _0x2bdde1=_0x5c2cf2['apply'](_0x6239b5,arguments);return _0x5c2cf2=null,_0x2bdde1;}}:function(){};return _0x41c25b=![],_0x4e6817;};}()),a19_0x180c34=a19_0x58e7d9(this,function(){const _0x1aaf27=a19_0x4ea8;let _0x6f9c66;try{const _0x518ae3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x6f9c66=_0x518ae3();}catch(_0x2bc8fd){_0x6f9c66=window;}const _0x34a793=_0x6f9c66[_0x1aaf27(0x1ce)]=_0x6f9c66[_0x1aaf27(0x1ce)]||{},_0x5a5900=[_0x1aaf27(0x1e7),_0x1aaf27(0x1c9),_0x1aaf27(0x1c8),'error',_0x1aaf27(0x1e3),'table','trace'];for(let _0x1eaf5d=0x0;_0x1eaf5d<_0x5a5900['length'];_0x1eaf5d++){const _0x3394d6=a19_0x58e7d9['constructor'][_0x1aaf27(0x1db)]['bind'](a19_0x58e7d9),_0x4810bf=_0x5a5900[_0x1eaf5d],_0xf35b24=_0x34a793[_0x4810bf]||_0x3394d6;_0x3394d6[_0x1aaf27(0x1cb)]=a19_0x58e7d9['bind'](a19_0x58e7d9),_0x3394d6['toString']=_0xf35b24['toString']['bind'](_0xf35b24),_0x34a793[_0x4810bf]=_0x3394d6;}});a19_0x180c34();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x48bfca=a19_0x4ea8;this[_0x48bfca(0x1cc)]=new Map(),this['pendingOperations']=new Map(),this[_0x48bfca(0x1de)]=null,this['blockedOperations']=0x0,this['debug']=![];}['checkSessionActive'](){const _0xce8794=a19_0x4ea8;if(window[_0xce8794(0x1d0)]===!![])return console[_0xce8794(0x1e7)](_0xce8794(0x1c6)),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn']('[FirebaseIdle]\x20Blocked\x20'+this[_0xce8794(0x1d5)]+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console[_0xce8794(0x1e7)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async[a19_0x42f065(0x1dc)](_0x3a073d,_0x198309,..._0xf29c9a){const _0x1a7f25=a19_0x42f065;if(!this['checkSessionActive']()){const _0x1c5e0b=_0x198309+'-'+Date['now']()+'-'+Math[_0x1a7f25(0x1d9)]()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x1c5e0b,{'operation':_0x3a073d,'operationType':_0x198309,'args':_0xf29c9a}),!this['pendingTimeout']&&(this[_0x1a7f25(0x1de)]=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x3a073d(..._0xf29c9a);}catch(_0x209c1d){if(_0x209c1d['code']==='unavailable'||_0x209c1d['code']==='resource-exhausted'||_0x209c1d[_0x1a7f25(0x1e1)]&&_0x209c1d['message']['includes']('network'))return handleNetworkError(),null;throw _0x209c1d;}}async[a19_0x42f065(0x1c3)](_0x3f65be){const _0x429b60=a19_0x42f065;return this['safeOperation'](getDoc,_0x429b60(0x1c7),_0x3f65be);}async['getDocuments'](_0x4b2dee){return this['safeOperation'](getDocs,'query',_0x4b2dee);}async['addDocument'](_0x396347,_0x55b1cd){return this['safeOperation'](addDoc,'add',_0x396347,_0x55b1cd);}async['setDocument'](_0x429dc7,_0x2ef07d,_0x4a341c={}){return this['safeOperation'](setDoc,'set',_0x429dc7,_0x2ef07d,_0x4a341c);}async[a19_0x42f065(0x1e5)](_0x31bdcd,_0x307494){const _0x4a0325=a19_0x42f065;return this['safeOperation'](updateDoc,_0x4a0325(0x1d2),_0x31bdcd,_0x307494);}async['deleteDocument'](_0x1b41f8){const _0x3e153d=a19_0x42f065;return this['safeOperation'](deleteDoc,_0x3e153d(0x1c5),_0x1b41f8);}['suspendAllListeners'](){const _0x3be439=a19_0x42f065;console[_0x3be439(0x1e7)]('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners']['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this[_0x3be439(0x1cc)]['forEach']((_0x7fdc05,_0x1271cd)=>{const _0x1f8b4f=_0x3be439;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x1271cd);if(typeof _0x7fdc05==='function')try{_0x7fdc05(),console[_0x1f8b4f(0x1e7)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x1271cd);}catch(_0x27cf6d){console['error'](_0x1f8b4f(0x1e2),_0x1271cd,_0x27cf6d);}}),this['activeListeners'][_0x3be439(0x1df)]();if(this['debug']){const _0x5765aa=document['createElement']('div');_0x5765aa['id']='firebase-suspend-indicator',_0x5765aa['style']['cssText']=_0x3be439(0x1d1),_0x5765aa[_0x3be439(0x1d7)]=_0x3be439(0x1c1),document['body'][_0x3be439(0x1da)](_0x5765aa);}console[_0x3be439(0x1e7)]('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x29f698=a19_0x42f065;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console[_0x29f698(0x1e7)]('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this[_0x29f698(0x1cf)][_0x29f698(0x1e9)]),this['_suspendedListeners']['forEach']((_0x57709e,_0x34bb44)=>{const _0xbfa540=_0x29f698;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x34bb44);try{if(typeof _0x57709e==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x34bb44);return;}const {query:_0x53bee1,callback:_0x5e5fde,options:_0x2eee9e}=_0x57709e;if(_0x53bee1&&_0x5e5fde){const _0x4cd73b=onSnapshot(_0x53bee1,_0x5e5fde,_0x2eee9e||{});this['activeListeners']['set'](_0x34bb44,_0x4cd73b),console[_0xbfa540(0x1e7)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x34bb44);}}catch(_0x33f590){console[_0xbfa540(0x1e4)]('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x34bb44,_0x33f590);}}),this['_suspendedListeners']['clear']();const _0x16f826=document['getElementById']('firebase-suspend-indicator');_0x16f826&&_0x16f826['remove'](),console['log'](_0x29f698(0x1d8));}['createListener'](_0x290aad,_0x41f71f,_0x24681b={},_0x14a1a9=null){const _0x4d8845=a19_0x42f065,_0x331f1e=_0x14a1a9||'listener_'+Date['now']()+'_'+Math['random']()[_0x4d8845(0x1e0)](0x24)[_0x4d8845(0x1d3)](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x331f1e);if(!this['checkSessionActive']())return console['log'](_0x4d8845(0x1ea)+_0x331f1e),()=>{};try{const _0xcfb44d=onSnapshot(_0x290aad,_0x41f71f,_0x24681b);return this[_0x4d8845(0x1cc)]['set'](_0x331f1e,{'unsubscribe':_0xcfb44d,'query':_0x290aad,'callback':_0x41f71f,'options':_0x24681b}),this[_0x4d8845(0x1c2)]&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x331f1e),console[_0x4d8845(0x1e7)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x4d8845(0x1cc)]['size'])),()=>{const _0x593ea4=_0x4d8845;this[_0x593ea4(0x1c2)]&&console[_0x593ea4(0x1e7)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x331f1e);try{_0xcfb44d(),this['activeListeners']['delete'](_0x331f1e),this[_0x593ea4(0x1c2)]&&(console[_0x593ea4(0x1e7)]('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x331f1e),console['log'](_0x593ea4(0x1dd)+this['activeListeners']['size']));}catch(_0x36d91c){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x331f1e+':',_0x36d91c);}};}catch(_0x59a13c){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x331f1e+':',_0x59a13c),()=>{};}}['executePendingOperations'](_0x4191ee='all'){const _0x1bba76=a19_0x42f065;console[_0x1bba76(0x1e7)]('Executing\x20pending\x20'+_0x4191ee+'\x20operations:\x20'+this[_0x1bba76(0x1cd)]['size']+'\x20total\x20operations');const _0x5a910f=new Map(this['pendingOperations']);this[_0x1bba76(0x1cd)]['clear'](),_0x5a910f['forEach']((_0x44bc44,_0x5e7c41)=>{const _0x366f60=_0x1bba76;_0x4191ee==='all'||_0x44bc44[_0x366f60(0x1ca)]===_0x4191ee?(console['log'](_0x366f60(0x1e8)+_0x44bc44['operationType']+'\x20operation'),this[_0x366f60(0x1dc)](_0x44bc44['operation'],_0x44bc44['operationType'],..._0x44bc44[_0x366f60(0x1c4)])['catch'](_0x4fdf49=>console['error']('Error\x20executing\x20pending\x20operation:',_0x4fdf49))):this['pendingOperations']['set'](_0x5e7c41,_0x44bc44);});}['enableDebug'](_0x136e37=!![]){const _0x59b071=a19_0x42f065;this['debug']=_0x136e37,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x136e37?'enabled':_0x59b071(0x1e6)));if(_0x136e37){const _0x1a3060=window['RDL_SESSION_SUSPENDED'];window[_0x59b071(0x1d0)]=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x59b071(0x1d6),'test'))['then'](_0x83b5be=>{const _0x1a8d34=_0x59b071;console[_0x1a8d34(0x1e7)]('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x83b5be);})['catch'](_0xece27b=>{const _0x3b7626=_0x59b071;console[_0x3b7626(0x1e7)]('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0xece27b);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x1a3060;});}}}function a19_0x4ea8(_0x4dae17,_0x30ab86){const _0x180c34=a19_0x1cf3();return a19_0x4ea8=function(_0x58e7d9,_0x2a694f){_0x58e7d9=_0x58e7d9-0x1c1;let _0x1cf389=_0x180c34[_0x58e7d9];return _0x1cf389;},a19_0x4ea8(_0x4dae17,_0x30ab86);}const firebaseIdle=new FirebaseIdleWrapper();function a19_0x1cf3(){const _0x1d7248=['Firebase:\x20Suspended','debug','getDocument','args','delete','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle','get','info','warn','operationType','__proto__','activeListeners','pendingOperations','console','_suspendedListeners','RDL_SESSION_SUSPENDED','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','update','substr','suspendSession','blockedOperations','system','textContent','[FirebaseIdle]\x20Listeners\x20resumed','random','appendChild','prototype','safeOperation','[FirebaseIdle]\x20Active\x20listeners:\x20','pendingTimeout','clear','toString','message','[FirebaseIdle]\x20Error\x20suspending\x20listener:','exception','error','updateDocument','disabled','log','Executing\x20delayed\x20','size','[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'];a19_0x1cf3=function(){return _0x1d7248;};return a19_0x1cf3();}export function enhanceIdleTimeout(){const _0xd80baf=a19_0x42f065,_0x29233f=window['suspendSession']||function(){},_0x4e1637=window['resumeSession']||function(){};window[_0xd80baf(0x1d4)]=function(){_0x29233f(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x4e1637(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;