const a19_0x3d2b93=a19_0x4069,a19_0x3733f5=(function(){let _0x4bfd59=!![];return function(_0x431d3f,_0xe78174){const _0xa52967=_0x4bfd59?function(){const _0x4a21b0=a19_0x4069;if(_0xe78174){const _0x136b42=_0xe78174[_0x4a21b0(0xe6)](_0x431d3f,arguments);return _0xe78174=null,_0x136b42;}}:function(){};return _0x4bfd59=![],_0xa52967;};}()),a19_0x192d77=a19_0x3733f5(this,function(){const _0x55fb60=a19_0x4069,_0x56c0ba=function(){let _0x10326b;try{_0x10326b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x53164f){_0x10326b=window;}return _0x10326b;},_0x1b0f2d=_0x56c0ba(),_0x3e056f=_0x1b0f2d[_0x55fb60(0xd1)]=_0x1b0f2d['console']||{},_0x5cba8f=[_0x55fb60(0xc3),'warn','info','error','exception',_0x55fb60(0xd3),'trace'];for(let _0x4e3691=0x0;_0x4e3691<_0x5cba8f['length'];_0x4e3691++){const _0x2a22bf=a19_0x3733f5['constructor'][_0x55fb60(0xee)][_0x55fb60(0xe2)](a19_0x3733f5),_0x1c7480=_0x5cba8f[_0x4e3691],_0x28d114=_0x3e056f[_0x1c7480]||_0x2a22bf;_0x2a22bf['__proto__']=a19_0x3733f5['bind'](a19_0x3733f5),_0x2a22bf['toString']=_0x28d114['toString'][_0x55fb60(0xe2)](_0x28d114),_0x3e056f[_0x1c7480]=_0x2a22bf;}});function a19_0x4069(_0x2e8419,_0x4ed98d){const _0x192d77=a19_0x5c60();return a19_0x4069=function(_0x3733f5,_0x597382){_0x3733f5=_0x3733f5-0xc3;let _0x5c60ed=_0x192d77[_0x3733f5];return _0x5c60ed;},a19_0x4069(_0x2e8419,_0x4ed98d);}a19_0x192d77();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}[a19_0x3d2b93(0xc6)](){const _0x1b9391=a19_0x3d2b93;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log'](_0x1b9391(0xd0)),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x1b9391(0xdd)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console[_0x1b9391(0xc3)](_0x1b9391(0xe8)),![];return!![];}async['safeOperation'](_0x17504c,_0x51ffd2,..._0x408e9c){const _0xc332ca=a19_0x3d2b93;if(!this['checkSessionActive']()){const _0x1e29dd=_0x51ffd2+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x1e29dd,{'operation':_0x17504c,'operationType':_0x51ffd2,'args':_0x408e9c}),!this['pendingTimeout']&&(this[_0xc332ca(0xce)]=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x17504c(..._0x408e9c);}catch(_0xc80d68){if(_0xc80d68['code']==='unavailable'||_0xc80d68['code']===_0xc332ca(0xcd)||_0xc80d68[_0xc332ca(0xcf)]&&_0xc80d68['message']['includes']('network'))return handleNetworkError(),null;throw _0xc80d68;}}async[a19_0x3d2b93(0xf4)](_0x5cd1ed){const _0x1fafcf=a19_0x3d2b93;return this[_0x1fafcf(0xc4)](getDoc,'get',_0x5cd1ed);}async[a19_0x3d2b93(0xc9)](_0x3524b1){const _0x1b4d1b=a19_0x3d2b93;return this[_0x1b4d1b(0xc4)](getDocs,'query',_0x3524b1);}async[a19_0x3d2b93(0xd9)](_0x9fa77a,_0x17b59c){return this['safeOperation'](addDoc,'add',_0x9fa77a,_0x17b59c);}async['setDocument'](_0x1e9f35,_0x4821e2,_0x7e2907={}){const _0x4e07b1=a19_0x3d2b93;return this[_0x4e07b1(0xc4)](setDoc,'set',_0x1e9f35,_0x4821e2,_0x7e2907);}async['updateDocument'](_0x4052be,_0x20384e){return this['safeOperation'](updateDoc,'update',_0x4052be,_0x20384e);}async[a19_0x3d2b93(0xde)](_0x33692a){const _0x4ff952=a19_0x3d2b93;return this[_0x4ff952(0xc4)](deleteDoc,'delete',_0x33692a);}['suspendAllListeners'](){const _0x52222a=a19_0x3d2b93;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners']['size']),this['_suspendedListeners']=new Map(this[_0x52222a(0xf5)]),this[_0x52222a(0xf5)]['forEach']((_0x5eb005,_0xfabd00)=>{const _0x1ba46a=_0x52222a;console[_0x1ba46a(0xc3)]('[FirebaseIdle]\x20Suspending\x20listener:',_0xfabd00);if(typeof _0x5eb005==='function')try{_0x5eb005(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0xfabd00);}catch(_0x1880a9){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0xfabd00,_0x1880a9);}}),this['activeListeners']['clear']();if(this['debug']){const _0x147c5e=document['createElement']('div');_0x147c5e['id']=_0x52222a(0xe4),_0x147c5e['style']['cssText']=_0x52222a(0xeb),_0x147c5e[_0x52222a(0xec)]=_0x52222a(0xf3),document['body']['appendChild'](_0x147c5e);}console['log'](_0x52222a(0xe3));}[a19_0x3d2b93(0xe1)](){const _0xbf57da=a19_0x3d2b93;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console['log'](_0xbf57da(0xf1));return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this[_0xbf57da(0xea)][_0xbf57da(0xdf)]),this['_suspendedListeners']['forEach']((_0x18068,_0x38e954)=>{const _0x928b43=_0xbf57da;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x38e954);try{if(typeof _0x18068==='function'){console['warn'](_0x928b43(0xed),_0x38e954);return;}const {query:_0x38cc53,callback:_0x161062,options:_0x34cb84}=_0x18068;if(_0x38cc53&&_0x161062){const _0x38c223=onSnapshot(_0x38cc53,_0x161062,_0x34cb84||{});this['activeListeners']['set'](_0x38e954,_0x38c223),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x38e954);}}catch(_0x27bbfd){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x38e954,_0x27bbfd);}}),this['_suspendedListeners']['clear']();const _0xb4cf5d=document['getElementById']('firebase-suspend-indicator');_0xb4cf5d&&_0xb4cf5d['remove'](),console[_0xbf57da(0xc3)]('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x228ba1,_0x205d4f,_0x487532={},_0x30a271=null){const _0x3ce76c=a19_0x3d2b93,_0x547b4d=_0x30a271||'listener_'+Date[_0x3ce76c(0xd7)]()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this[_0x3ce76c(0xcb)]&&console['log'](_0x3ce76c(0xf2)+_0x547b4d);if(!this[_0x3ce76c(0xc6)]())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x547b4d),()=>{};try{const _0x439c77=onSnapshot(_0x228ba1,_0x205d4f,_0x487532);return this['activeListeners'][_0x3ce76c(0xd4)](_0x547b4d,{'unsubscribe':_0x439c77,'query':_0x228ba1,'callback':_0x205d4f,'options':_0x487532}),this[_0x3ce76c(0xcb)]&&(console[_0x3ce76c(0xc3)](_0x3ce76c(0xef)+_0x547b4d),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x597c70=_0x3ce76c;this['debug']&&console[_0x597c70(0xc3)](_0x597c70(0xf6)+_0x547b4d);try{_0x439c77(),this['activeListeners']['delete'](_0x547b4d),this['debug']&&(console['log'](_0x597c70(0xc8)+_0x547b4d),console[_0x597c70(0xc3)](_0x597c70(0xcc)+this[_0x597c70(0xf5)]['size']));}catch(_0x1a18c2){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x547b4d+':',_0x1a18c2);}};}catch(_0x29fb5c){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x547b4d+':',_0x29fb5c),()=>{};}}['executePendingOperations'](_0x19fcf2=a19_0x3d2b93(0xd5)){const _0x21438=a19_0x3d2b93;console[_0x21438(0xc3)](_0x21438(0xf0)+_0x19fcf2+'\x20operations:\x20'+this[_0x21438(0xca)]['size']+_0x21438(0xc7));const _0x3425d6=new Map(this[_0x21438(0xca)]);this['pendingOperations'][_0x21438(0xe9)](),_0x3425d6['forEach']((_0x5eb17e,_0x14b27e)=>{const _0x598f7a=_0x21438;_0x19fcf2===_0x598f7a(0xd5)||_0x5eb17e['operationType']===_0x19fcf2?(console['log'](_0x598f7a(0xe0)+_0x5eb17e[_0x598f7a(0xda)]+'\x20operation'),this[_0x598f7a(0xc4)](_0x5eb17e[_0x598f7a(0xc5)],_0x5eb17e['operationType'],..._0x5eb17e[_0x598f7a(0xdb)])['catch'](_0x4e0f87=>console['error']('Error\x20executing\x20pending\x20operation:',_0x4e0f87))):this['pendingOperations'][_0x598f7a(0xd4)](_0x14b27e,_0x5eb17e);});}[a19_0x3d2b93(0xe7)](_0x20c4cb=!![]){const _0x1b32f9=a19_0x3d2b93;this[_0x1b32f9(0xcb)]=_0x20c4cb,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x20c4cb?'enabled':_0x1b32f9(0xd8)));if(_0x20c4cb){const _0x215bcf=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x1b32f9(0xd2),'test'))[_0x1b32f9(0xd6)](_0x56836f=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x56836f);})['catch'](_0xfe61e=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0xfe61e);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x215bcf;});}}}function a19_0x5c60(){const _0x4ba962=['log','safeOperation','operation','checkSessionActive','\x20total\x20operations','[FirebaseIdle]\x20Listener\x20removed:\x20','getDocuments','pendingOperations','debug','[FirebaseIdle]\x20Active\x20listeners:\x20','resource-exhausted','pendingTimeout','message','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle','console','system','table','set','all','then','now','disabled','addDocument','operationType','args','suspendSession','[FirebaseIdle]\x20Blocked\x20','deleteDocument','size','Executing\x20delayed\x20','resumeAllListeners','bind','[FirebaseIdle]\x20All\x20listeners\x20suspended','firebase-suspend-indicator','resumeSession','apply','enableDebug','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','clear','_suspendedListeners','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','textContent','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','prototype','[FirebaseIdle]\x20Listener\x20created:\x20','Executing\x20pending\x20','[FirebaseIdle]\x20No\x20listeners\x20to\x20resume','[FirebaseIdle]\x20Creating\x20listener:\x20','Firebase:\x20Suspended','getDocument','activeListeners','[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'];a19_0x5c60=function(){return _0x4ba962;};return a19_0x5c60();}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x2c0467=a19_0x3d2b93,_0x35b3d6=window['suspendSession']||function(){},_0x13a909=window[_0x2c0467(0xe5)]||function(){};window[_0x2c0467(0xdc)]=function(){_0x35b3d6(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){const _0x5695ff=_0x2c0467;_0x13a909(),firebaseIdle[_0x5695ff(0xe1)]();};}export default firebaseIdle;