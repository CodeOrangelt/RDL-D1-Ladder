const a2_0x221182=a2_0x52ec,a2_0x1f48b5=(function(){let _0x3ea97b=!![];return function(_0x462aa8,_0x38ba0a){const _0x8956=_0x3ea97b?function(){const _0x3b1f24=a2_0x52ec;if(_0x38ba0a){const _0x6491f7=_0x38ba0a[_0x3b1f24(0x27f)](_0x462aa8,arguments);return _0x38ba0a=null,_0x6491f7;}}:function(){};return _0x3ea97b=![],_0x8956;};}()),a2_0x303907=a2_0x1f48b5(this,function(){const _0x3b3baa=a2_0x52ec;let _0x5c7043;try{const _0x1a7a8a=Function(_0x3b3baa(0x2e7)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5c7043=_0x1a7a8a();}catch(_0x174c3e){_0x5c7043=window;}const _0x1cba1c=_0x5c7043['console']=_0x5c7043['console']||{},_0x580ce6=[_0x3b3baa(0x302),'warn',_0x3b3baa(0x242),'error','exception','table','trace'];for(let _0x26dff2=0x0;_0x26dff2<_0x580ce6[_0x3b3baa(0x208)];_0x26dff2++){const _0x11fa52=a2_0x1f48b5['constructor']['prototype']['bind'](a2_0x1f48b5),_0xe75143=_0x580ce6[_0x26dff2],_0x2e66ac=_0x1cba1c[_0xe75143]||_0x11fa52;_0x11fa52['__proto__']=a2_0x1f48b5['bind'](a2_0x1f48b5),_0x11fa52['toString']=_0x2e66ac['toString']['bind'](_0x2e66ac),_0x1cba1c[_0xe75143]=_0x11fa52;}});a2_0x303907();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x267011){const _0x35e3cc=a2_0x52ec;if(!_0x267011)return'#ffffff';_0x267011=_0x267011['replace']('#','');_0x267011[_0x35e3cc(0x208)]===0x3&&(_0x267011=_0x267011['split']('')['map'](_0x352c76=>_0x352c76+_0x352c76)['join'](''));if(_0x267011[_0x35e3cc(0x208)]!==0x6)return'#ffffff';const _0x464345=parseInt(_0x267011[_0x35e3cc(0x296)](0x0,0x2),0x10),_0x2d8b0f=parseInt(_0x267011[_0x35e3cc(0x296)](0x2,0x4),0x10),_0x469ee1=parseInt(_0x267011['substring'](0x4,0x6),0x10),_0x17e785=(_0x464345*0x12b+_0x2d8b0f*0x24b+_0x469ee1*0x72)/0x3e8;return _0x17e785>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a2_0x221182(0x237)]('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x492100=>{const _0x35dc19=a2_0x52ec;if(!_0x492100){window['location'][_0x35dc19(0x395)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x53f2ac){console['error'](_0x35dc19(0x1fa),_0x53f2ac),showNotification('Error\x20setting\x20up\x20admin\x20dashboard',_0x35dc19(0x2cc));}});});async function getUserTabPermissions(_0xf45e02){const _0x25254d=a2_0x221182;if(!_0xf45e02)return[_0x25254d(0x283)];console['log'](_0x25254d(0x1f2)+_0xf45e02+'\x20in\x20all\x20collections...');const _0xb55d41=[{'name':_0x25254d(0x1f9),'displayName':'User\x20Profiles'},{'name':_0x25254d(0x2a3),'displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':_0x25254d(0x2df),'displayName':_0x25254d(0x3b9)},{'name':_0x25254d(0x308),'displayName':'Non-Participants'}],_0x3e13e0=auth['currentUser'];let _0x1ea3a1=null,_0x141dbd=null;for(const _0x1be06e of _0xb55d41){try{if(_0x3e13e0){const _0x40ca18=doc(db,_0x1be06e[_0x25254d(0x3d9)],_0x3e13e0['uid']),_0x4e5a2a=await getDoc(_0x40ca18);if(_0x4e5a2a[_0x25254d(0x3d0)]()){const _0x2fbca0=_0x4e5a2a['data']();console['log']('Found\x20user\x20in\x20'+_0x1be06e['displayName']+'\x20by\x20UID:',_0x2fbca0);const _0x3f1bb0=(_0x2fbca0['roleName']||_0x2fbca0['role']||'')['toLowerCase']();if(_0x3f1bb0&&_0x3f1bb0!=='none'){_0x1ea3a1=_0x3f1bb0,_0x141dbd=_0x1be06e['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x1ea3a1+_0x25254d(0x277)+_0x141dbd);break;}}}if(!_0x1ea3a1){const _0x291884=collection(db,_0x1be06e[_0x25254d(0x3d9)]),_0x5923ff=query(_0x291884,where(_0x25254d(0x305),'==',_0xf45e02)),_0x7b74f6=await getDocs(_0x5923ff);if(!_0x7b74f6['empty']){const _0x363b2a=_0x7b74f6['docs'][0x0]['data']();console[_0x25254d(0x302)](_0x25254d(0x29b)+_0x1be06e['displayName']+'\x20with\x20email\x20'+_0xf45e02+':',_0x363b2a);const _0x53c9d6=(_0x363b2a['roleName']||_0x363b2a['role']||'')['toLowerCase']();if(_0x53c9d6&&_0x53c9d6!=='none'){_0x1ea3a1=_0x53c9d6,_0x141dbd=_0x1be06e['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x1ea3a1+'\x20in\x20'+_0x141dbd);break;}}}}catch(_0x4b1972){console['error'](_0x25254d(0x3dd)+_0x1be06e['displayName']+':',_0x4b1972);}}if(_0x1ea3a1){console[_0x25254d(0x302)](_0x25254d(0x24a)+_0x1ea3a1+'\x20(from\x20'+_0x141dbd+')');const _0x6adb60={'admin':['dashboard','manage-players','manage-matches','manage-articles',_0x25254d(0x362),_0x25254d(0x286),'inactive-players',_0x25254d(0x3e8),'manage-trophies','elo-history','manage-highlights','user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players',_0x25254d(0x3e8),'manage-trophies',_0x25254d(0x32c),'manage-highlights','user-roles-section',_0x25254d(0x2c4),'manage-points',_0x25254d(0x3a4),_0x25254d(0x1e1)],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':[_0x25254d(0x283),_0x25254d(0x255),_0x25254d(0x362),'elo-history','manage-highlights']};if(_0x6adb60[_0x1ea3a1])return console['log']('Role\x20\x27'+_0x1ea3a1+'\x27\x20has\x20permissions:',_0x6adb60[_0x1ea3a1]),_0x6adb60[_0x1ea3a1];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0xf45e02+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0xc3fb3a=[]){const _0x4462cb=a2_0x221182,_0x5ee8dd=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x18b2c7=document['querySelectorAll'](_0x4462cb(0x2c0));(!_0xc3fb3a||_0xc3fb3a[_0x4462cb(0x208)]===0x0)&&(_0xc3fb3a=['dashboard']);_0x5ee8dd['forEach'](_0x3186f0=>{const _0x236a22=_0x4462cb,_0x41cf88=_0x3186f0['getAttribute']('data-section');_0xc3fb3a[_0x236a22(0x2d3)](_0x41cf88)?_0x3186f0[_0x236a22(0x318)][_0x236a22(0x3c0)]='flex':_0x3186f0['style']['display']='none',_0x3186f0[_0x236a22(0x237)]('click',()=>{const _0x52d2f2=_0x236a22,_0x5bdc19=_0x3186f0[_0x52d2f2(0x324)](_0x52d2f2(0x3e4));if(!_0xc3fb3a['includes'](_0x5bdc19)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x52d2f2(0x2cc));return;}_0x5ee8dd['forEach'](_0x4434c8=>_0x4434c8[_0x52d2f2(0x357)]['remove'](_0x52d2f2(0x3d6))),_0x3186f0['classList'][_0x52d2f2(0x1f7)]('active'),_0x18b2c7[_0x52d2f2(0x2f7)](_0x3330f4=>{_0x3330f4['style']['display']='none';});const _0xf06f69=document[_0x52d2f2(0x40f)](_0x5bdc19);_0xf06f69&&(_0xf06f69['style']['display']='block',console['log']('Switched\x20to\x20'+_0x5bdc19+_0x52d2f2(0x1fc)));});});const _0xc49c7b=document['querySelector'](_0x4462cb(0x1eb)+_0xc3fb3a[0x0]+'\x22]');_0xc49c7b&&_0xc49c7b[_0x4462cb(0x40d)](),console['log'](_0x4462cb(0x2da));}function setupTabNavigation(){const _0x19cf25=document['querySelectorAll']('.nav-item');let _0x1c067e=null,_0x5db81f=new Set();_0x19cf25['forEach'](_0x1c1403=>{_0x1c1403['addEventListener']('click',function(){const _0x594f2c=a2_0x52ec,_0x329ae0=this[_0x594f2c(0x324)]('data-section');if(_0x329ae0===_0x1c067e)return;_0x1c067e&&(document['getElementById'](_0x1c067e)[_0x594f2c(0x318)][_0x594f2c(0x3c0)]='none',_0x19cf25['forEach'](_0x880780=>_0x880780['classList']['remove']('active'))),document['getElementById'](_0x329ae0)['style'][_0x594f2c(0x3c0)]=_0x594f2c(0x3db),this['classList']['add']('active'),_0x1c067e=_0x329ae0;});});}function loadSectionData(_0x8696dd){return;}async function initializeAdminDashboard(){const _0x33b6fa=a2_0x221182;try{const _0x46b567=auth[_0x33b6fa(0x37e)],_0x1f22c9=await getUserTabPermissions(_0x46b567['email']);console['log']('User\x20'+_0x46b567['email']+_0x33b6fa(0x1d7),_0x1f22c9),window[_0x33b6fa(0x34b)]=_0x1f22c9,setupSidebarNavigation(_0x1f22c9),setupLadderSelector(),setupDashboardSection(),_0x1f22c9['includes']('manage-players')&&setupManagePlayersSection(),_0x1f22c9[_0x33b6fa(0x2d3)](_0x33b6fa(0x32c))&&setupEloHistorySection(),_0x1f22c9[_0x33b6fa(0x2d3)](_0x33b6fa(0x286))&&setupRankControls(),_0x1f22c9['includes'](_0x33b6fa(0x255))&&setupManageArticlesSection(),_0x1f22c9[_0x33b6fa(0x2d3)]('user-roles-section')&&setupUserRolesSection(),_0x1f22c9['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x1f22c9['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x1f22c9['includes']('inactive-players')&&setupInactivePlayersSection(),_0x1f22c9['includes'](_0x33b6fa(0x2c4))&&setupManageMatchesSection(),_0x1f22c9['includes'](_0x33b6fa(0x1e2))&&setupManagePointsSection(),_0x1f22c9[_0x33b6fa(0x2d3)](_0x33b6fa(0x1e1))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x1f22c9);}catch(_0x94db6f){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x94db6f);}}function setupDataLoadButtons(_0x52aeed=[]){const _0xcbb885=a2_0x221182;(!_0x52aeed||_0x52aeed['length']===0x0)&&(_0x52aeed=['dashboard']);const _0x32bbda=document['getElementById'](_0xcbb885(0x359));_0x32bbda&&_0x32bbda['addEventListener'](_0xcbb885(0x40d),function(){const _0x4f1d6f=_0xcbb885;this['classList']['add']('loading'),this['innerHTML']=_0x4f1d6f(0x294),loadDashboardOverview()['then'](()=>{const _0x503393=_0x4f1d6f;this[_0x503393(0x357)][_0x503393(0x21f)](_0x503393(0x394)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x17cc75=>{const _0x4cc253=_0x4f1d6f;console['error']('Error\x20loading\x20dashboard:',_0x17cc75),this[_0x4cc253(0x357)]['remove'](_0x4cc253(0x394)),this[_0x4cc253(0x346)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x52aeed['includes'](_0xcbb885(0x362))){const _0xcd23=document[_0xcbb885(0x40f)]('load-trophies-data');_0xcd23&&_0xcd23[_0xcbb885(0x237)](_0xcbb885(0x40d),function(){const _0x2239dc=_0xcbb885;console['log']('Load\x20trophies\x20data\x20clicked'),this[_0x2239dc(0x357)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x30ffc5=_0x2239dc;this['classList']['remove']('loading'),this[_0x30ffc5(0x346)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x3bbe20=>{const _0x5198cc=_0x2239dc;console['error']('Error\x20loading\x20trophies:',_0x3bbe20),this['classList']['remove']('loading'),this['innerHTML']=_0x5198cc(0x207),setTimeout(()=>{const _0x4a35ef=_0x5198cc;this['innerHTML']=_0x4a35ef(0x3b5);},0xbb8);});});}if(_0x52aeed[_0xcbb885(0x2d3)]('manage-players')){const _0x59e920=document[_0xcbb885(0x40f)]('load-players-data');_0x59e920&&_0x59e920['addEventListener']('click',function(){const _0x16b9d6=_0xcbb885;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add'](_0x16b9d6(0x394)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x16b9d6(0x271)](()=>{const _0x1d01cc=_0x16b9d6;this[_0x1d01cc(0x357)]['remove'](_0x1d01cc(0x394)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x16b9d6(0x260)](_0x236e7b=>{const _0xad76ec=_0x16b9d6;console['error']('Error\x20loading\x20players:',_0x236e7b),this[_0xad76ec(0x357)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5c32f4=_0xad76ec;this['innerHTML']=_0x5c32f4(0x1f3);},0xbb8);});});}if(_0x52aeed[_0xcbb885(0x2d3)]('elo-history')){const _0x62931e=document['getElementById']('load-elo-history-data');_0x62931e&&_0x62931e['addEventListener']('click',function(){const _0x533e9a=_0xcbb885;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add'](_0x533e9a(0x394)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)[_0x533e9a(0x271)](()=>{const _0x4eb6bb=_0x533e9a;this['classList'][_0x4eb6bb(0x21f)]('loading'),this[_0x4eb6bb(0x346)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x533e9a(0x260)](_0x1e858d=>{const _0x3f1578=_0x533e9a;console['error'](_0x3f1578(0x37b),_0x1e858d),this['classList']['remove']('loading'),this[_0x3f1578(0x346)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4e5dd0=_0x3f1578;this[_0x4e5dd0(0x346)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x52aeed[_0xcbb885(0x2d3)]('manage-articles')){const _0x30605f=document['getElementById']('load-articles-data');_0x30605f&&_0x30605f['addEventListener']('click',function(){const _0x45ce1e=_0xcbb885;console['log'](_0x45ce1e(0x22d)),this[_0x45ce1e(0x357)]['add']('loading'),this[_0x45ce1e(0x346)]=_0x45ce1e(0x294),loadArticles()[_0x45ce1e(0x271)](()=>{const _0x2b91db=_0x45ce1e;this['classList']['remove'](_0x2b91db(0x394)),this['innerHTML']=_0x2b91db(0x3d4);})['catch'](_0x46b9ee=>{const _0x2c5099=_0x45ce1e;console['error']('Error\x20loading\x20articles:',_0x46b9ee),this[_0x2c5099(0x357)][_0x2c5099(0x21f)](_0x2c5099(0x394)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x52aeed['includes'](_0xcbb885(0x30a))){const _0x27c83e=document[_0xcbb885(0x40f)](_0xcbb885(0x270));_0x27c83e&&_0x27c83e['addEventListener']('click',function(){const _0x54ad11=_0xcbb885;console[_0x54ad11(0x302)]('Load\x20users\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x54ad11(0x346)]=_0x54ad11(0x294),loadUsersWithRoles()['then'](()=>{const _0x4f6edc=_0x54ad11;this[_0x4f6edc(0x357)]['remove']('loading'),this['innerHTML']=_0x4f6edc(0x3a7);})['catch'](_0x2e51c2=>{const _0x37a062=_0x54ad11;console['error']('Error\x20loading\x20users:',_0x2e51c2),this['classList'][_0x37a062(0x21f)]('loading'),this[_0x37a062(0x346)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x52aeed['includes']('inactive-players')){const _0x168201=document['getElementById']('load-inactive-players-data');_0x168201&&_0x168201[_0xcbb885(0x237)]('click',function(){const _0x5e367d=_0xcbb885;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']=_0x5e367d(0x294),loadInactivePlayersData()['then'](()=>{const _0x49a40a=_0x5e367d;this['classList']['remove']('loading'),this['innerHTML']=_0x49a40a(0x1c6);})['catch'](_0x1cbf97=>{const _0x53410b=_0x5e367d;console['error']('Error\x20loading\x20inactive\x20players:',_0x1cbf97),this[_0x53410b(0x357)]['remove'](_0x53410b(0x394)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x52aeed['includes']('manage-highlights')){const _0x3cac31=document['getElementById'](_0xcbb885(0x352));_0x3cac31&&_0x3cac31['addEventListener']('click',function(){const _0x59d33b=_0xcbb885;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList'][_0x59d33b(0x1f7)]('loading'),this[_0x59d33b(0x346)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x59d33b(0x271)](()=>{const _0x2b5768=_0x59d33b;this[_0x2b5768(0x357)]['remove'](_0x2b5768(0x394)),this[_0x2b5768(0x346)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x276e23=>{const _0x4a9566=_0x59d33b;console['error'](_0x4a9566(0x26c),_0x276e23),this[_0x4a9566(0x357)][_0x4a9566(0x21f)]('loading'),this[_0x4a9566(0x346)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x52aeed[_0xcbb885(0x2d3)](_0xcbb885(0x2c4))){const _0x15cf9d=document['getElementById']('load-matches-data');_0x15cf9d&&_0x15cf9d['addEventListener'](_0xcbb885(0x40d),function(){const _0x3a3be7=_0xcbb885;console[_0x3a3be7(0x302)]('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)[_0x3a3be7(0x271)](()=>{const _0x3deebc=_0x3a3be7;this['classList'][_0x3deebc(0x21f)]('loading'),this['innerHTML']=_0x3deebc(0x2a7);})['catch'](_0x2926c9=>{const _0x39e138=_0x3a3be7;console['error']('Error\x20loading\x20matches:',_0x2926c9),this[_0x39e138(0x357)][_0x39e138(0x21f)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x26bc30=_0x39e138;this[_0x26bc30(0x346)]=_0x26bc30(0x2a7);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x52aeed[_0xcbb885(0x2d3)]('manage-ribbons')){const _0x25ae90=document['getElementById'](_0xcbb885(0x281));_0x25ae90&&_0x25ae90[_0xcbb885(0x237)](_0xcbb885(0x40d),function(){const _0xdaba25=_0xcbb885;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList'][_0xdaba25(0x1f7)](_0xdaba25(0x394)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0xeefeae=_0xdaba25;this['classList']['remove'](_0xeefeae(0x394)),this[_0xeefeae(0x346)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})[_0xdaba25(0x260)](_0x41fb88=>{const _0x1cdf0b=_0xdaba25;console['error']('Error\x20loading\x20ribbons:',_0x41fb88),this['classList'][_0x1cdf0b(0x21f)](_0x1cdf0b(0x394)),this['innerHTML']=_0x1cdf0b(0x207),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x5ed610=a2_0x221182;document[_0x5ed610(0x40f)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x5ed610(0x2bc))['textContent']='-',document['getElementById'](_0x5ed610(0x39b))['textContent']='-';}function setupLadderSelector(){const _0x17f3d7=a2_0x221182,_0x1ce07c=document['querySelectorAll'](_0x17f3d7(0x401));_0x1ce07c['forEach'](_0x3d27c9=>{_0x3d27c9['addEventListener']('change',()=>{const _0x4a291e=a2_0x52ec;currentLadder=_0x3d27c9[_0x4a291e(0x2ec)],document[_0x4a291e(0x256)][_0x4a291e(0x3ea)]('data-ladder',currentLadder);const _0x454aa2=document[_0x4a291e(0x40f)]('current-ladder-display');_0x454aa2&&(_0x454aa2['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x4a291e(0x37a))[_0x4a291e(0x2bb)]='-',document['getElementById'](_0x4a291e(0x2bc))[_0x4a291e(0x2bb)]='-',document['getElementById']('rejected-count')['textContent']='-',charts[_0x4a291e(0x228)]&&(charts[_0x4a291e(0x228)]['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification(_0x4a291e(0x25b)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x4a291e(0x242));});});const _0x5ce99d=document['getElementById']('current-ladder-display');_0x5ce99d&&(_0x5ce99d['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x2ff451=a2_0x221182;try{console['log'](_0x2ff451(0x325)),document['getElementById'](_0x2ff451(0x385))[_0x2ff451(0x2bb)]='-',document[_0x2ff451(0x40f)](_0x2ff451(0x37a))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x2ff451(0x40f)]('rejected-count')['textContent']='-';const _0x28169b=currentLadder==='D1'?'players':currentLadder==='D2'?_0x2ff451(0x1ef):'playersD3',_0x35577f=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x2ff451(0x375):'approvedMatchesD3',_0x3ee0f6=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x44fa5a=currentLadder==='D1'?_0x2ff451(0x239):currentLadder==='D2'?_0x2ff451(0x3c7):'RejectedD3';console[_0x2ff451(0x302)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x28169b+',\x20'+_0x35577f);const _0x5d475e=await getDocs(collection(db,_0x28169b)),_0x76eb8b=_0x5d475e['size'],_0x281e4d=await getDocs(collection(db,_0x35577f)),_0x202aa1=_0x281e4d[_0x2ff451(0x25a)],_0x253647=await getDocs(collection(db,_0x3ee0f6)),_0x1c2412=_0x253647[_0x2ff451(0x25a)],_0x4da3ab=await getDocs(collection(db,_0x44fa5a)),_0x2b8148=_0x4da3ab['size'];return document[_0x2ff451(0x40f)]('player-count')[_0x2ff451(0x2bb)]=_0x76eb8b,document['getElementById']('match-count')[_0x2ff451(0x2bb)]=_0x202aa1,document['getElementById']('pending-count')['textContent']=_0x1c2412,document['getElementById']('rejected-count')['textContent']=_0x2b8148,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x2ff451(0x38b)),!![];}catch(_0x332eba){console['error'](_0x2ff451(0x292),_0x332eba);throw _0x332eba;}}async function createRankDistributionChart(){const _0x3dfbf9=a2_0x221182;try{const _0x2101f4=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x1c1432=await getDocs(_0x2101f4),_0x44aebc={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x1c1432['forEach'](_0x4fb35f=>{const _0x172d07=a2_0x52ec,_0x373c0e=_0x4fb35f['data'](),_0x186e47=_0x373c0e['eloRating']||0x4b0;if(_0x186e47>=0x7d0)_0x44aebc['Emerald']++;else{if(_0x186e47>=0x708)_0x44aebc['Gold']++;else{if(_0x186e47>=0x640)_0x44aebc[_0x172d07(0x3fe)]++;else{if(_0x186e47>=0x578)_0x44aebc['Bronze']++;else _0x44aebc[_0x172d07(0x1fd)]++;}}}});const _0x43c4d4=document['getElementById']('rank-distribution-chart');charts[_0x3dfbf9(0x228)]&&charts['rankDistribution'][_0x3dfbf9(0x386)](),charts[_0x3dfbf9(0x228)]=new Chart(_0x43c4d4,{'type':'doughnut','data':{'labels':Object['keys'](_0x44aebc),'datasets':[{'data':Object['values'](_0x44aebc),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x3dfbf9(0x396),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x2ae122){console['error'](_0x3dfbf9(0x29c),_0x2ae122),document[_0x3dfbf9(0x40f)](_0x3dfbf9(0x20f))[_0x3dfbf9(0x346)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x222bdf=a2_0x221182;try{const _0xc5e5b0=currentLadder==='D1'?'approvedMatches':_0x222bdf(0x375),_0x4b62f=collection(db,_0xc5e5b0),_0x3239c7=new Date();_0x3239c7[_0x222bdf(0x2e3)](_0x3239c7[_0x222bdf(0x37f)]()-0x7);const _0x308fa4=query(_0x4b62f,where('approvedAt','>=',_0x3239c7),orderBy(_0x222bdf(0x1ed),'asc')),_0x8a3dce=await getDocs(_0x308fa4),_0x19c604=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday',_0x222bdf(0x33c)],_0x1e83a5=_0x19c604['reduce']((_0x59c788,_0x18c396)=>({..._0x59c788,[_0x18c396]:0x0}),{});_0x8a3dce['forEach'](_0x6dfe65=>{const _0x22d75d=_0x222bdf,_0xc571cc=_0x6dfe65[_0x22d75d(0x3f2)]();if(_0xc571cc['approvedAt']){const _0x50a837=_0x19c604[new Date(_0xc571cc['approvedAt']['seconds']*0x3e8)['getDay']()];_0x1e83a5[_0x50a837]++;}});const _0x273195=document['getElementById']('activity-chart');charts[_0x222bdf(0x205)]&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x273195,{'type':'bar','data':{'labels':_0x19c604,'datasets':[{'label':_0x222bdf(0x1e5),'data':_0x19c604[_0x222bdf(0x2b5)](_0x3f58de=>_0x1e83a5[_0x3f58de]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x222bdf(0x2ab):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0x222bdf(0x31e),'font':{'size':0x10}}}}});}catch(_0x4c268c){console[_0x222bdf(0x2cc)]('Error\x20creating\x20activity\x20chart:',_0x4c268c),document['getElementById']('activity-chart')[_0x222bdf(0x346)]=_0x222bdf(0x304);}}function a2_0x52ec(_0x4907f7,_0xf432c5){const _0x303907=a2_0x519a();return a2_0x52ec=function(_0x1f48b5,_0x2f34ac){_0x1f48b5=_0x1f48b5-0x1c4;let _0x519aeb=_0x303907[_0x1f48b5];return _0x519aeb;},a2_0x52ec(_0x4907f7,_0xf432c5);}async function loadPlayersData(){const _0x15616f=a2_0x221182,_0x227c18=document['getElementById']('players-table-body');if(!_0x227c18)return;_0x227c18[_0x15616f(0x346)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x31bc7d='players';if(currentLadder==='D2')_0x31bc7d='playersD2';else currentLadder==='D3'&&(_0x31bc7d='playersD3');console[_0x15616f(0x302)](_0x15616f(0x21e)+_0x31bc7d+'\x20collection...');const _0x66dbc3=collection(db,_0x31bc7d),_0x2db94c=query(_0x66dbc3,orderBy('eloRating','desc')),_0x52b8c4=await getDocs(_0x2db94c);if(_0x52b8c4[_0x15616f(0x2d0)]){_0x227c18['innerHTML']=_0x15616f(0x303);return;}_0x227c18['innerHTML']='';let _0x4a09b4=0x1;_0x52b8c4[_0x15616f(0x2f7)](_0x5837b3=>{const _0x9f158=_0x15616f,_0x23f2c2=_0x5837b3[_0x9f158(0x3f2)](),_0x2269b5=getRankFromElo(_0x23f2c2['eloRating']||0x4b0),_0x900787=getRankStyle(_0x23f2c2[_0x9f158(0x367)]||0x4b0),_0x3d8c89=document[_0x9f158(0x3e6)]('tr');_0x3d8c89['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x4a09b4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x900787[_0x9f158(0x23e)]+_0x9f158(0x25d)+(_0x23f2c2['username']||_0x9f158(0x2fe))+_0x9f158(0x1c9)+(_0x23f2c2['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x900787['color']+_0x9f158(0x36b)+_0x2269b5+_0x9f158(0x3c2)+(_0x23f2c2[_0x9f158(0x2ba)]||0x0)+'W\x20/\x20'+(_0x23f2c2['losses']||0x0)+_0x9f158(0x3f7)+_0x5837b3['id']+_0x9f158(0x22a)+_0x5837b3['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x227c18[_0x9f158(0x224)](_0x3d8c89),_0x4a09b4++;}),setupPlayerActionButtons();}catch(_0x26fcf4){console['error']('Error\x20loading\x20players:',_0x26fcf4),_0x227c18['innerHTML']=_0x15616f(0x2de)+_0x26fcf4['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x41e46c){const _0x21c3fe=a2_0x221182;if(_0x41e46c>=0x7d0)return _0x21c3fe(0x2d4);if(_0x41e46c>=0x708)return _0x21c3fe(0x363);if(_0x41e46c>=0x640)return _0x21c3fe(0x3fe);if(_0x41e46c>=0x578)return _0x21c3fe(0x233);return'Unranked';}function setupPlayerActionButtons(){const _0x7dc2df=a2_0x221182;document[_0x7dc2df(0x30e)]('.edit-btn')[_0x7dc2df(0x2f7)](_0x12ca21=>{_0x12ca21['addEventListener']('click',async _0x5db7f5=>{const _0x12e542=a2_0x52ec,_0xa562ac=_0x5db7f5[_0x12e542(0x3a0)][_0x12e542(0x1c7)]['id'];openEditPlayerModal(_0xa562ac);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x59726a=>{_0x59726a['addEventListener']('click',async _0x1778c2=>{const _0x25da14=_0x1778c2['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x25da14);});});}async function openEditPlayerModal(_0x2e02aa){const _0x2d1edc=a2_0x221182;try{const _0x2f887d=currentLadder==='D1'?_0x2d1edc(0x2a3):'playersD2',_0x2b14b5=doc(db,_0x2f887d,_0x2e02aa),_0x503622=await getDoc(_0x2b14b5);if(!_0x503622[_0x2d1edc(0x3d0)]()){showNotification('Player\x20not\x20found','error');return;}const _0x227912=_0x503622['data'](),_0x10f9f9=document['getElementById'](_0x2d1edc(0x2a8)),_0x1ec4bb=document[_0x2d1edc(0x40f)](_0x2d1edc(0x3ac)),_0x28b858=document['getElementById'](_0x2d1edc(0x390)),_0x554fd3=document['getElementById']('edit-wins'),_0x18a877=document['getElementById']('edit-losses');_0x1ec4bb['value']=_0x227912['username']||'',_0x28b858['value']=_0x227912['eloRating']||0x4b0,_0x554fd3[_0x2d1edc(0x2ec)]=_0x227912['wins']||0x0,_0x18a877['value']=_0x227912['losses']||0x0,_0x10f9f9['dataset'][_0x2d1edc(0x1d9)]=_0x2e02aa,_0x10f9f9[_0x2d1edc(0x357)]['add'](_0x2d1edc(0x3d6));}catch(_0x3e5d94){console['error'](_0x2d1edc(0x399),_0x3e5d94),showNotification(_0x2d1edc(0x372),_0x2d1edc(0x2cc));}}async function saveEditedPlayer(){const _0x211f7d=a2_0x221182;try{const _0x198a24=document[_0x211f7d(0x40f)](_0x211f7d(0x2a8)),_0x5b804e=_0x198a24['dataset'][_0x211f7d(0x1d9)];if(!_0x5b804e){showNotification(_0x211f7d(0x2f6),_0x211f7d(0x2cc));return;}const _0x119a8d=document[_0x211f7d(0x40f)]('edit-username'),_0x2d311d=document['getElementById'](_0x211f7d(0x390)),_0xa89d39=document['getElementById']('edit-wins'),_0x2105a6=document[_0x211f7d(0x40f)]('edit-losses'),_0x426987=_0x119a8d['value']['trim'](),_0x137220=parseInt(_0x2d311d[_0x211f7d(0x2ec)]),_0x459f9e=parseInt(_0xa89d39['value']),_0x4e9086=parseInt(_0x2105a6['value']);if(!_0x426987||isNaN(_0x137220)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x211f7d(0x2cc));return;}const _0x89d4dc=currentLadder==='D1'?'players':'playersD2',_0x2ad7e2=doc(db,_0x89d4dc,_0x5b804e),_0x1c85a4=await getDoc(_0x2ad7e2),_0x3ce2d9=_0x1c85a4['exists']()?_0x1c85a4['data']():{},_0x1fa613=_0x3ce2d9[_0x211f7d(0x367)]||0x4b0;await updateDoc(_0x2ad7e2,{'username':_0x426987,'eloRating':_0x137220,'wins':_0x459f9e||0x0,'losses':_0x4e9086||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x211f7d(0x37e)][_0x211f7d(0x305)]});if(_0x137220!==_0x1fa613){const _0x463f78=currentLadder==='D1'?_0x211f7d(0x309):'eloHistoryD2';await addDoc(collection(db,_0x463f78),{'player':_0x426987,'previousElo':_0x1fa613,'newElo':_0x137220,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x211f7d(0x3c1),'success');}catch(_0x3fbd3a){console[_0x211f7d(0x2cc)]('Error\x20updating\x20player:',_0x3fbd3a),showNotification(_0x211f7d(0x300)+_0x3fbd3a['message'],'error');}}function closeEditPlayerModal(){const _0x14f88e=a2_0x221182,_0x5872ed=document['getElementById'](_0x14f88e(0x2a8));_0x5872ed[_0x14f88e(0x357)]['remove']('active'),_0x5872ed['dataset'][_0x14f88e(0x1d9)]='';}function a2_0x519a(){const _0x55cdef=['\x20-\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','dataset','docs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','startDate','Error\x20deleting\x20highlight:','pointsHistory','points','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','Non-Participant','input[name=\x22promote-ladder\x22]:checked','Error\x20demoting\x20player:\x20','1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)','.remove-ribbon-btn','edit-match-id','Never\x20played','error-state','\x20allowed\x20tabs:','highlight-map','playerId','.player','creator','Could\x20not\x20find\x20player\x20documents','Error\x20loading\x20matches:','\x20already\x20has\x20points:\x20','Error\x20loading\x20match\x20data:','loserName','manage-ribbons','manage-points','\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20','history-end-date','Matches\x20Played','Promotion','promote-form','edit-match-loser-score','disabled','User\x20','.sidebar-nav\x20.nav-item[data-section=\x22','Found\x20radio\x20with\x20value:','approvedAt','edit-highlight-description-input','playersD2','edit-highlight-title-input','matchInfo','Looking\x20for\x20user\x20role\x20information\x20for\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','confirm-resimulate-btn','assign-trophy-description','preventDefault','add','highlight-form','userProfiles','Error\x20initializing\x20dashboard:','playerProfileUrl','\x20section','Unranked','Modal\x20should\x20now\x20be\x20visible','Create\x20test\x20match\x20modal\x20setup\x20complete','src','Match\x20not\x20found','Loser\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','cells','activity','resimulate-modal','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','length','Error\x20in\x20bulk\x20award\x20process:\x20','</td></tr>','edit-match-winner-demo','Please\x20enter\x20valid\x20data','Modal\x20cancel\x20button\x20clicked','.close','rank-distribution-chart','Points\x20modified\x20successfully','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','success','key','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','searchTerm','\x20ladder','page','admin','highlight-match-link','Map\x20Creator\x20is\x20required','quick-add','Untitled\x20Trophy','Loading\x20players\x20from\x20','remove','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Highlight\x20updated\x20successfully!','trophy-image-preview','onerror','appendChild','Error\x20modifying\x20points:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','article-author','rankDistribution','demote-form','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','highlight-id','\x20D1\x20pilots,\x20','Load\x20articles\x20data\x20clicked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','cancel-quick-edit','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','#create-test-match-form','matches-search','Bronze','\x20added\x20successfully\x20to\x20','highlight-submitted-by','pendingResimulateData','addEventListener','trophy-preview-img','RejectedD1','highlight-modal-title','quick-edit-points-form','highlight-title-container','cancel-edit-btn','color','Matches\x20action\x20buttons\x20setup\x20complete','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','roleName','info','resimulation','playerRibbons','#users-table-body\x20tr[data-username=\x22','Modal\x20background\x20clicked','points-overview-table-body','roleAssignedBy','highlight-submitted-by-container','Setting\x20permissions\x20based\x20on\x20role:\x20','Creating\x20test\x20match\x20without\x20player\x20validation...','mapVersion','daysSinceMatch','load-inactive-players-data','Player\x20','highlight-achievement-type-container','points-desc','Page\x20','highlight-winner-name','playerRibbonsD2','manage-articles','body','Error\x20loading\x20users:','uid','image','size','Switched\x20to\x20','points-sort-order','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','commit','Error\x20loading\x20points\x20data:','catch','rarity','loserUsername','desc','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','Please\x20fill\x20all\x20fields','highlights-table-body','Starting\x20complete\x20match\x20resimulation...','.view-player-btn','\x20already\x20exists\x20in\x20','selected-user-id','getRankName','Error\x20loading\x20highlights:','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20ribbons:','Error\x20loading\x20trophy\x20data:','load-users-data','then',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Delete\x20match\x20clicked:','ribbon-target-user','removeEventListener','\x20in\x20','Quick\x20edit\x20clicked\x20for\x20user:','approvedMatchesD3','TestLoser','parentNode','\x20already\x20processed\x20matches.\x20Errors:\x20','role','Failed\x20to\x20load\x20match\x20data','apply','reset-matches-filters','load-ribbons-data','none','dashboard','trophy-modal','edit-match-loser-comment','manage-ranks','edit-highlight-videoId-input','highlight-player-profile','winnerDemoLink','className','highlights','Trophy\x20definition\x20deleted\x20successfully','points-history-table-body','Bulk\x20award\x20to\x20all\x20pilots\x20(','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','sendPromotionNotification','trophyDefinitions','Error\x20loading\x20dashboard\x20data:','required','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','substring','Error\x20loading\x20highlight:','quick-edit-email','user-ribbon-management','winnerScore','Found\x20user\x20in\x20','Error\x20creating\x20rank\x20distribution\x20chart:','refresh-points-overview','.delete-highlight-btn','lastMatch','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','Found\x20player\x20with\x20current\x20ELO:\x20','Failed\x20to\x20update\x20points:\x20','players','flex','Error','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','edit-player-modal','\x20with\x20ELO\x20','lastVisible','#d32f2f','highlight-achievement-player','Create\x20New\x20','Failed\x20to\x20delete\x20article:\x20','This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?','warn','promote-username','Failed\x20to\x20save\x20trophy:\x20','validation-results-container','opacity','map','title','add-player-form','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','lastUpdated','wins','textContent','pending-count','trophy-rarity\x20','award-item-form','promote-ladder','.admin-section','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','Username\x20input\x20set\x20to:\x20','manage-matches','keypress','.quick-edit-btn','empty-state','-page-indicator','Error\x20in\x20demotion:','unknown','button[type=\x22submit\x22]','error','Please\x20enter\x20a\x20username','Match\x20not\x20found\x20in\x20approved\x20matches','approvedMatches','empty','Create\x20test\x20match\x20modal\x20not\x20found','creator-type','includes','Emerald','cancel-article-btn','\x20pilots...','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','demote-username','article-content','Sidebar\x20navigation\x20initialized\x20with\x20permissions','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','Promoting\x20player\x20to\x20','toLocaleDateString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','playersD3','submit','\x20view\x20history\x20buttons','Testing\x20Firebase\x20connection...','setDate','edit-highlight-loserScore-input','Trophy\x20ID\x20and\x20username\x20are\x20required','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','return\x20(function()\x20','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','achievementType','displayName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','value','Manage\x20Points\x20section\x20initialized','User\x20not\x20found','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','newElo','Processing\x20points\x20edit:','subtract','highlight-video-container','toDate','stopPropagation','No\x20player\x20selected','forEach','search-ribbon-user-btn','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','5px','Please\x20enter\x20a\x20valid\x20username','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','assign-trophy-modal','Unknown','\x20vs\x20','Failed\x20to\x20update\x20player:\x20','elo','log','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','email','from','\x20<span\x20class=\x22user-source\x22>(','nonParticipants','eloHistory','user-roles-section','roleAssignedAt','contains','username','querySelectorAll','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','createdBy','promotion','highlight-video-id','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','name-asc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','article-modal-title','all','style','loserId','achievementPlayer','Setting\x20up\x20highlight\x20buttons','mapPlayed','previousElo','#e0e0e0','cancel-assign-btn','description','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-highlight-winnerScore-input','push','getAttribute','Loading\x20dashboard\x20overview\x20data...','closest','Unnamed\x20Trophy','Failed\x20to\x20delete\x20match:\x20','Setting\x20up\x20Manage\x20Matches\x20section','createdAt','\x20matches\x20for\x20','elo-history','trophy-id','Failed\x20to\x20save\x20article:\x20','afterend','lastPointsModified','timestamp','resimulate-match-btn','highlight-match-date','backgroundColor','DOMContentLoaded','#players.content-section.active','Edit\x20Article','Create\x20test\x20match\x20form\x20not\x20found','Match','highlight-title','trim','Saturday','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','.close-btn','Match\x20deleted\x20successfully','roleColor','set','highlight-video-preview-container','highlight-achievement-player-container','position','edit-highlight-mapVersion-input','innerHTML','ribbon','cloneNode','matchLink','articles-table-body','userAllowedTabs','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','0.6','\x22\x20not\x20found\x20in\x20any\x20collection','</span>','article-id','store-item-select','load-highlights-data','demote-modal','match-row','create-test-match-modal','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','classList','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','load-dashboard-data','highlight-winner-score','Create\x20test\x20match\x20button\x20setup\x20complete','winnerName','Searching\x20for\x20player\x20in\x20','message','toLocaleString','replaceChild','matchDate','manage-trophies','Gold','removeAttribute','highlight-achievement-type','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','eloRating','migration-section','player','No\x20ELO\x20history\x20found\x20for\x20player\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Match\x20ID\x20or\x20ladder\x20missing','winnerUsername','trophy-image-url','warning','Error\x20removing\x20ribbon:','Demotion','Failed\x20to\x20load\x20player\x20data','Modal\x20setup\x20complete','querySelector','approvedMatchesD2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','userTrophies','award-all-pilots-btn','find','match-count','Error\x20loading\x20history:','d3-prev-page','data-ladder','currentUser','getDate','getComputedStyle','checked','openResimulateModal','Unknown\x20User','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','player-count','destroy','MAX_SAFE_INTEGER','\x20-\x20Feature\x20coming\x20soon','positive-change','Trophy\x20created\x20successfully','Dashboard\x20data\x20loaded\x20successfully','Bulk\x20award:\x20','closeResimulateModal','Collection\x20reference\x20created:','user-role','edit-elo','Store\x20item\x20awarded\x20successfully','selected-user-name','div','loading','href','\x20Rank\x20Distribution','\x20quick\x20edit\x20buttons','mapName','Error\x20opening\x20edit\x20modal:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','rejected-count','ribbon-user-search','UserProfile','quick-points-reason','match-details-container','currentTarget','players-ladder-selector','ribbon-target-ladder','Error:\x20','manage-levels-ribbons','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Points\x20data\x20loaded\x20successfully','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','Page\x201','edit-highlight-id','input[name=\x22set-elo-ladder\x22]:checked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','edit-username','Failed\x20to\x20resimulate\x20match:\x20','target','highlight-map-version','achievement','highlight-type','quick-edit-points-modal','Error\x20searching\x20for\x20user','\x20users\x20already\x20had\x20points.','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','Setting\x20up\x20points\x20action\x20buttons...','winnerId','selected-user-info','D3\x20Players','Error\x20loading\x20match\x20for\x20deletion:','matches-next-page','allUsersPoints','Positions\x20updated:\x20Winner\x20','No\x20user\x20ID\x20found\x20on\x20button','add-new-role-btn','display','Player\x20updated\x20successfully','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Initial\x20Placement','Loading\x20user\x20data...','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','Committing\x20batch\x20update\x20for\x20','RejectedD2','article-title','firstVisible','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','\x20for\x20points\x20initialization','toLowerCase','achievementDetails','match','loading-cell','exists','fa-info-circle','userId','Error\x20deleting\x20match:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','Test\x20match','active','delete-match-summary','Match\x20resimulated\x20successfully!\x20','name','Role\x20\x22','block','articles','Error\x20checking\x20','trophy-name','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','change','Manage\x20Ribbons\x20section\x20initialized','new-player-elo','\x20to\x20','data-section','Added\x20','createElement','toISOString','settings','loserScore','setAttribute','edit-highlight-mapCreator-input','Edit\x20Trophy','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20articles:','Invalid\x20action','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','data','reason','seconds','input','confirmResimulateMatch','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','reset','Loaded\x20','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','#808080','amount','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','Silver','\x20D3\x20matches.\x20','Set\x20to\x20','.ladder-switch\x20input','save-player-btn','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','N/A','./promotions.js','highlight-map-container','creatorImageUrl','Failed\x20to\x20delete\x20player:\x20','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','setHours','\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20','quick-edit-user-id','click','Found\x20','getElementById','eloHistoryD2','fromDate','Starting\x20points\x20award\x20process...','YouTube\x20Video\x20ID\x20(Optional)','set-elo-modal','Quick\x20edit\x20form\x20submitted','Please\x20enter\x20valid\x20username\x20and\x20ELO','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','update'];a2_0x519a=function(){return _0x55cdef;};return a2_0x519a();}async function confirmDeletePlayer(_0x5d87c4){const _0x1cef8b=a2_0x221182;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x1831be=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x1831be,_0x5d87c4)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully','success');}catch(_0x20cf3b){console[_0x1cef8b(0x2cc)]('Error\x20deleting\x20player:',_0x20cf3b),showNotification(_0x1cef8b(0x408)+_0x20cf3b['message'],'error');}}async function setupManagePlayersSection(){const _0x7d4474=a2_0x221182,_0x47f9ec=document['getElementById'](_0x7d4474(0x2b7));_0x47f9ec&&_0x47f9ec[_0x7d4474(0x237)]('submit',async _0x285996=>{_0x285996['preventDefault'](),await addNewPlayer();});const _0x3cb567=document['getElementById']('player-search');_0x3cb567&&_0x3cb567['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x3442fb=document[_0x7d4474(0x40f)](_0x7d4474(0x402));_0x3442fb&&_0x3442fb['addEventListener']('click',saveEditedPlayer);const _0xaa58d4=document[_0x7d4474(0x40f)](_0x7d4474(0x23d));_0xaa58d4&&_0xaa58d4['addEventListener']('click',closeEditPlayerModal);const _0x39279d=document['getElementById']('edit-player-modal');_0x39279d&&_0x39279d['addEventListener']('click',_0x1f2906=>{_0x1f2906['target']===_0x39279d&&closeEditPlayerModal();});const _0x15db34=document[_0x7d4474(0x40f)](_0x7d4474(0x3a1));_0x15db34&&_0x15db34['addEventListener'](_0x7d4474(0x3e0),()=>{const _0x32f7f5=_0x7d4474;currentLadder=_0x15db34[_0x32f7f5(0x2ec)],loadPlayersData();});}async function addNewPlayer(){const _0x3c2430=a2_0x221182;try{const _0x29f66c=document[_0x3c2430(0x40f)]('new-player-username'),_0x132de2=document['getElementById'](_0x3c2430(0x3e2)),_0x17c585=_0x29f66c['value']['trim'](),_0xfa56d3=parseInt(_0x132de2['value'])||0x4b0;if(!_0x17c585){alert(_0x3c2430(0x2fb));return;}console[_0x3c2430(0x302)]('Adding\x20player\x20'+_0x17c585+_0x3c2430(0x2a9)+_0xfa56d3+_0x3c2430(0x3e3)+currentLadder+_0x3c2430(0x217));let _0x1736ec='players',_0x95aed4='eloHistory';if(currentLadder==='D2')_0x1736ec='playersD2',_0x95aed4='eloHistoryD2';else currentLadder==='D3'&&(_0x1736ec=_0x3c2430(0x2df),_0x95aed4='eloHistoryD3');const _0x1ba30e=query(collection(db,_0x1736ec),where('username','==',_0x17c585)),_0x2835db=await getDocs(_0x1ba30e);if(!_0x2835db['empty']){alert('Username\x20'+_0x17c585+_0x3c2430(0x269)+currentLadder+'\x20ladder');return;}const _0x52b9d9=auth[_0x3c2430(0x37e)],_0x54abe1={'username':_0x17c585,'eloRating':_0xfa56d3,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x52b9d9?_0x52b9d9['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x1736ec),_0x54abe1),await addDoc(collection(db,_0x95aed4),{'player':_0x17c585,'previousElo':0x4b0,'newElo':_0xfa56d3,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x52b9d9?_0x52b9d9['email']:'admin','gameMode':currentLadder}),_0x29f66c[_0x3c2430(0x2ec)]='',_0x132de2[_0x3c2430(0x2ec)]='1200',alert(_0x3c2430(0x24f)+_0x17c585+_0x3c2430(0x234)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x15ae73){console['error']('Error\x20adding\x20player:',_0x15ae73),alert('Error\x20adding\x20player:\x20'+_0x15ae73['message']);}}document[a2_0x221182(0x237)]('DOMContentLoaded',()=>{const _0x1c185c=a2_0x221182,_0xf33cdd=document['getElementById']('add-player-form');_0xf33cdd&&_0xf33cdd[_0x1c185c(0x237)]('submit',_0x517d62=>{_0x517d62['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0xe8bae=a2_0x221182,_0x3ec00d=document['getElementById']('player-search')['value'][_0xe8bae(0x3cc)](),_0x1bee7b=document['querySelectorAll']('#players-table-body\x20tr');let _0x3390ff=0x0;_0x1bee7b['forEach'](_0x1f623d=>{const _0x20eed1=_0xe8bae,_0x511bd7=_0x1f623d['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x511bd7['includes'](_0x3ec00d)?(_0x1f623d['style'][_0x20eed1(0x3c0)]='',_0x3390ff++):_0x1f623d['style']['display']='none';});const _0x425582=document[_0xe8bae(0x40f)]('no-results-message');_0x425582&&(_0x3390ff===0x0&&_0x3ec00d!==''?_0x425582['style']['display']='block':_0x425582['style']['display']=_0xe8bae(0x282));}function debounce(_0x4a45,_0x4351f9){let _0x467e8b;return function(..._0x58bdcc){clearTimeout(_0x467e8b),_0x467e8b=setTimeout(()=>_0x4a45['apply'](this,_0x58bdcc),_0x4351f9);};}async function loadEloHistory(_0x1e92e8=0x1){const _0x2242fb=a2_0x221182,_0x49510b=document[_0x2242fb(0x40f)]('elo-history-table-body'),_0x27020c=currentLadder['toLowerCase']();if(!_0x49510b)return;_0x49510b[_0x2242fb(0x346)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x47b5a3=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x1fc78f=collection(db,_0x47b5a3);let _0x2717f3;if(_0x1e92e8>eloHistoryPagination[_0x27020c][_0x2242fb(0x218)]&&eloHistoryPagination[_0x27020c]['lastVisible'])_0x2717f3=query(_0x1fc78f,orderBy('timestamp',_0x2242fb(0x263)),startAfter(eloHistoryPagination[_0x27020c]['lastVisible']),limit(PAGE_SIZE));else _0x1e92e8<eloHistoryPagination[_0x27020c][_0x2242fb(0x218)]&&eloHistoryPagination[_0x27020c]['firstVisible']?_0x2717f3=query(_0x1fc78f,orderBy(_0x2242fb(0x331),_0x2242fb(0x263)),endBefore(eloHistoryPagination[_0x27020c][_0x2242fb(0x3c9)]),limitToLast(PAGE_SIZE)):_0x2717f3=query(_0x1fc78f,orderBy('timestamp',_0x2242fb(0x263)),limit(PAGE_SIZE));const _0x3556b6=await getDocs(_0x2717f3);if(_0x3556b6['empty']){_0x49510b[_0x2242fb(0x346)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document[_0x2242fb(0x40f)](_0x27020c+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x27020c]['page']=_0x1e92e8,eloHistoryPagination[_0x27020c]['firstVisible']=_0x3556b6['docs'][0x0],eloHistoryPagination[_0x27020c]['lastVisible']=_0x3556b6['docs'][_0x3556b6['docs'][_0x2242fb(0x208)]-0x1];const _0x5b686e=new Map();_0x49510b['innerHTML']='';const _0x583c27=async _0x2184b4=>{const _0x20304a=_0x2242fb;if(typeof _0x2184b4!=='string'||_0x2184b4['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x2184b4))return _0x2184b4;if(_0x5b686e['has'](_0x2184b4))return _0x5b686e['get'](_0x2184b4);try{for(const _0x43fe13 of[_0x20304a(0x2a3),'playersD2','playersD3',_0x20304a(0x308)]){const _0x946630=await getDoc(doc(db,_0x43fe13,_0x2184b4));if(_0x946630[_0x20304a(0x3d0)]()&&_0x946630['data']()['username']){const _0x5950c9=_0x946630['data']()['username'];return _0x5b686e[_0x20304a(0x341)](_0x2184b4,_0x5950c9),_0x5950c9;}}return _0x2184b4;}catch(_0x43675b){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x2184b4+':',_0x43675b),_0x2184b4;}};for(const _0x3fda74 of _0x3556b6['docs']){const _0x1f7390=_0x3fda74[_0x2242fb(0x3f2)](),_0x2f43ed=document['createElement']('tr'),_0x41f84c=_0x1f7390['timestamp']?new Date(_0x1f7390['timestamp'][_0x2242fb(0x3f4)]*0x3e8)['toLocaleString']():_0x2242fb(0x404),_0x52349a=_0x1f7390[_0x2242fb(0x2f0)]-_0x1f7390['previousElo'],_0x4f75ac=_0x52349a>0x0?_0x2242fb(0x389):_0x52349a<0x0?'negative-change':'',_0x142788=_0x52349a>0x0?'+':'',_0x24a399=_0x1f7390['player']||_0x1f7390['username']||_0x1f7390[_0x2242fb(0x3d2)]||_0x2242fb(0x404),_0x17901a=await _0x583c27(_0x24a399);_0x2f43ed['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x41f84c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x17901a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x1f7390['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x1f7390['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4f75ac+'\x22>'+_0x142788+_0x52349a+_0x2242fb(0x3f0)+formatHistoryType(_0x1f7390['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1f7390['modifiedBy']||_0x1f7390['promotedBy']||_0x1f7390['demotedBy']||'System')+_0x2242fb(0x212),_0x49510b['appendChild'](_0x2f43ed);}document[_0x2242fb(0x40f)](_0x27020c+'-page-indicator')['textContent']='Page\x20'+_0x1e92e8;const _0x234288=document['getElementById'](_0x27020c+'-prev-page'),_0x1d03d8=document[_0x2242fb(0x40f)](_0x27020c+'-next-page');if(_0x234288)_0x234288['disabled']=_0x1e92e8<=0x1;const _0x11d673=query(_0x1fc78f,orderBy(_0x2242fb(0x331),'desc'),startAfter(eloHistoryPagination[_0x27020c]['lastVisible']),limit(0x1)),_0x557725=await getDocs(_0x11d673);if(_0x1d03d8)_0x1d03d8['disabled']=_0x557725['empty'];}catch(_0x27f41e){console[_0x2242fb(0x2cc)]('Error\x20loading\x20ELO\x20history:',_0x27f41e),_0x49510b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x27f41e['message']+_0x2242fb(0x226);}}function formatHistoryType(_0x4c658b){const _0x4c39b7=a2_0x221182;switch(_0x4c658b){case'match_result':return'Match\x20Result';case _0x4c39b7(0x311):return _0x4c39b7(0x1e6);case'demotion':return _0x4c39b7(0x371);case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return _0x4c39b7(0x3c3);default:return _0x4c658b||_0x4c39b7(0x2fe);}}function setupEloHistorySection(){const _0x39c93e=a2_0x221182;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')['addEventListener']('click',()=>{const _0x38f0b8=a2_0x52ec;loadEloHistory(eloHistoryPagination['d1'][_0x38f0b8(0x218)]+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')['addEventListener'](_0x39c93e(0x40d),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x5d0562=document[_0x39c93e(0x40f)](_0x39c93e(0x37c)),_0x3b873d=document['getElementById']('d3-next-page');_0x5d0562&&_0x5d0562[_0x39c93e(0x237)](_0x39c93e(0x40d),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x3b873d&&_0x3b873d['addEventListener']('click',()=>{const _0x56b7bc=_0x39c93e;loadEloHistory(eloHistoryPagination['d3'][_0x56b7bc(0x218)]+0x1);});const _0x2c4df2=document['getElementById']('elo-history-search');_0x2c4df2&&_0x2c4df2[_0x39c93e(0x237)]('input',debounce(filterEloHistoryTable,0x12c));const _0x4524d4=document['getElementById']('history-type-filter');_0x4524d4&&_0x4524d4['addEventListener']('change',applyEloHistoryFilters);const _0x5f46ae=document['getElementById']('reset-history-filters');_0x5f46ae&&_0x5f46ae['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x508bfb=a2_0x221182,_0x58914c=document['getElementById']('elo-history-search')[_0x508bfb(0x2ec)][_0x508bfb(0x3cc)](),_0x1819f5=document[_0x508bfb(0x30e)]('#elo-history-table-body\x20tr');let _0x28ed5f=0x0;_0x1819f5['forEach'](_0x48d4c9=>{const _0x2b8d50=_0x508bfb;if(_0x48d4c9['classList'][_0x2b8d50(0x30c)]('loading-cell')||_0x48d4c9[_0x2b8d50(0x357)]['contains'](_0x2b8d50(0x2c7))||_0x48d4c9['classList'][_0x2b8d50(0x30c)]('error-state'))return;const _0x5f52c3=_0x48d4c9[_0x2b8d50(0x374)](_0x2b8d50(0x1da))?.['textContent']['toLowerCase']()||'',_0x26519e=_0x48d4c9['querySelector']('.type')?.[_0x2b8d50(0x2bb)]['toLowerCase']()||'',_0x2e294c=_0x48d4c9[_0x2b8d50(0x374)]('.admin-action')?.['textContent'][_0x2b8d50(0x3cc)]()||'';_0x5f52c3[_0x2b8d50(0x2d3)](_0x58914c)||_0x26519e['includes'](_0x58914c)||_0x2e294c['includes'](_0x58914c)?(_0x48d4c9[_0x2b8d50(0x318)][_0x2b8d50(0x3c0)]='',_0x28ed5f++):_0x48d4c9['style'][_0x2b8d50(0x3c0)]=_0x2b8d50(0x282);});}async function applyEloHistoryFilters(){const _0x3c5828=a2_0x221182,_0x59fbb8=document['getElementById']('history-start-date')[_0x3c5828(0x2ec)],_0x996503=document['getElementById']('history-end-date')['value'],_0x42b49b=document[_0x3c5828(0x40f)]('history-type-filter')[_0x3c5828(0x2ec)],_0x421542=currentLadder[_0x3c5828(0x3cc)]();eloHistoryPagination[_0x421542]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x323824=document['getElementById']('elo-history-table-body');_0x323824['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x4da46a=currentLadder==='D1'?'eloHistory':_0x3c5828(0x410),_0x1cd9e6=collection(db,_0x4da46a);let _0x18346c=[orderBy(_0x3c5828(0x331),_0x3c5828(0x263))];if(_0x59fbb8){const _0xf2b429=new Date(_0x59fbb8);_0xf2b429['setHours'](0x0,0x0,0x0,0x0),_0x18346c[_0x3c5828(0x323)](where('timestamp','>=',_0xf2b429));}if(_0x996503){const _0x216792=new Date(_0x996503);_0x216792['setHours'](0x17,0x3b,0x3b,0x3e7),_0x18346c['push'](where(_0x3c5828(0x331),'<=',_0x216792));}_0x42b49b&&_0x42b49b!==_0x3c5828(0x317)&&_0x18346c[_0x3c5828(0x323)](where('type','==',_0x42b49b));_0x18346c['push'](limit(PAGE_SIZE));const _0x2fff43=query(_0x1cd9e6,..._0x18346c),_0xa1e359=await getDocs(_0x2fff43);!_0xa1e359['empty']&&(eloHistoryPagination[_0x421542]['firstVisible']=_0xa1e359['docs'][0x0],eloHistoryPagination[_0x421542]['lastVisible']=_0xa1e359['docs'][_0xa1e359['docs'][_0x3c5828(0x208)]-0x1]);_0x323824['innerHTML']='';if(_0xa1e359[_0x3c5828(0x2d0)]){_0x323824[_0x3c5828(0x346)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0xa1e359[_0x3c5828(0x2f7)](_0x397330=>{const _0x5c9fb1=_0x3c5828,_0x4d228a=_0x397330[_0x5c9fb1(0x3f2)](),_0x5f46c6=document['createElement']('tr'),_0x42d257=_0x4d228a[_0x5c9fb1(0x331)]?new Date(_0x4d228a[_0x5c9fb1(0x331)]['seconds']*0x3e8)['toLocaleString']():_0x5c9fb1(0x404),_0x4275ff=_0x4d228a[_0x5c9fb1(0x2f0)]-_0x4d228a[_0x5c9fb1(0x31d)],_0x4419b1=_0x4275ff>0x0?'positive-change':_0x4275ff<0x0?'negative-change':'',_0x4383e3=_0x4275ff>0x0?'+':'',_0x53ca5d=_0x4d228a[_0x5c9fb1(0x369)]||_0x4d228a[_0x5c9fb1(0x30d)]||_0x4d228a[_0x5c9fb1(0x3d2)]||'N/A';_0x5f46c6[_0x5c9fb1(0x346)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x42d257+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x53ca5d+_0x5c9fb1(0x39a)+(_0x4d228a[_0x5c9fb1(0x31d)]||'N/A')+_0x5c9fb1(0x230)+(_0x4d228a['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4419b1+'\x22>'+_0x4383e3+_0x4275ff+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x4d228a['type'])+_0x5c9fb1(0x273)+(_0x4d228a['modifiedBy']||_0x4d228a['promotedBy']||_0x4d228a['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x323824['appendChild'](_0x5f46c6);}),document['getElementById'](_0x421542+_0x3c5828(0x2c8))['textContent']=_0x3c5828(0x3a8);}catch(_0x5e1706){console['error']('Error\x20applying\x20filters:',_0x5e1706),_0x323824[_0x3c5828(0x346)]=_0x3c5828(0x2eb)+_0x5e1706['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x40a9c4=a2_0x221182;document['getElementById']('history-start-date')['value']='',document['getElementById'](_0x40a9c4(0x1e4))['value']='',document[_0x40a9c4(0x40f)]('history-type-filter')['value']=_0x40a9c4(0x317),document[_0x40a9c4(0x40f)]('elo-history-search')['value']='';const _0x1c33ad=currentLadder['toLowerCase']();eloHistoryPagination[_0x1c33ad]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x29a64d=a2_0x221182,_0x36a78c=document['getElementById']('promote-player-btn'),_0x54e679=document[_0x29a64d(0x40f)]('promote-modal'),_0x1ed36c=document[_0x29a64d(0x40f)](_0x29a64d(0x1e7));_0x36a78c&&_0x54e679&&_0x1ed36c&&(_0x36a78c[_0x29a64d(0x237)](_0x29a64d(0x40d),()=>{const _0x27b6f7=_0x29a64d;_0x54e679['classList']['add'](_0x27b6f7(0x3d6));}),_0x54e679[_0x29a64d(0x237)](_0x29a64d(0x40d),_0xf7477e=>{_0xf7477e['target']===_0x54e679&&_0x54e679['classList']['remove']('active');}),_0x1ed36c['addEventListener']('submit',async _0x3f50c1=>{const _0x2a07e3=_0x29a64d;_0x3f50c1['preventDefault']();const _0x4afc39=document['getElementById']('promote-username'),_0x26727a=document['getElementById'](_0x2a07e3(0x2bf)),_0x519c40=_0x4afc39['value'][_0x2a07e3(0x33b)](),_0x579106=_0x26727a[_0x2a07e3(0x2ec)];if(!_0x519c40){showNotification('Please\x20enter\x20a\x20username',_0x2a07e3(0x2cc));return;}try{await promotePlayer(_0x519c40,_0x579106),_0x54e679['classList']['remove']('active'),_0x4afc39[_0x2a07e3(0x2ec)]='';}catch(_0x272acc){showNotification(_0x272acc['message'],'error');}}),document[_0x29a64d(0x40f)]('cancel-promote-btn')[_0x29a64d(0x237)](_0x29a64d(0x40d),()=>{const _0x1e4b4=_0x29a64d;_0x54e679['classList']['remove'](_0x1e4b4(0x3d6));}));const _0x59c100=document[_0x29a64d(0x40f)]('demote-player-btn'),_0x1aac99=document['getElementById']('demote-modal'),_0x42d180=document['getElementById'](_0x29a64d(0x229));_0x59c100&&_0x1aac99&&_0x42d180&&(_0x59c100[_0x29a64d(0x237)]('click',()=>{_0x1aac99['classList']['add']('active');}),_0x1aac99['addEventListener'](_0x29a64d(0x40d),_0x55cefe=>{const _0x32d45a=_0x29a64d;_0x55cefe['target']===_0x1aac99&&_0x1aac99['classList']['remove'](_0x32d45a(0x3d6));}),_0x42d180['addEventListener']('submit',async _0x3560ef=>{const _0x10cd97=_0x29a64d;_0x3560ef[_0x10cd97(0x1f6)]();const _0x1f6292=document[_0x10cd97(0x40f)](_0x10cd97(0x2d8)),_0x17b3a1=document['getElementById']('demote-ladder'),_0x13fe6a=_0x1f6292['value']['trim'](),_0x51cc34=_0x17b3a1[_0x10cd97(0x2ec)];if(!_0x13fe6a){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x13fe6a,_0x51cc34),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById']('demote-username')[_0x10cd97(0x2ec)]='';}catch(_0x2856c0){console['error'](_0x10cd97(0x2c9),_0x2856c0);}}));const _0x336507=document['getElementById']('set-elo-btn'),_0x22a449=document['getElementById'](_0x29a64d(0x414)),_0xc40e0f=document['getElementById']('set-elo-form');_0x336507&&_0x22a449&&_0xc40e0f&&(_0x336507['addEventListener']('click',()=>{const _0x5c4b23=_0x29a64d;_0x22a449[_0x5c4b23(0x357)]['add'](_0x5c4b23(0x3d6));}),_0x22a449['addEventListener']('click',_0x1a1a2f=>{const _0xec818e=_0x29a64d;_0x1a1a2f[_0xec818e(0x3ae)]===_0x22a449&&_0x22a449['classList']['remove'](_0xec818e(0x3d6));}),_0xc40e0f[_0x29a64d(0x237)]('submit',async _0x4402de=>{const _0x58abdf=_0x29a64d;_0x4402de['preventDefault']();const _0x2499a8=document[_0x58abdf(0x40f)]('set-elo-username'),_0x48e7ec=document['getElementById']('set-elo-value');let _0x19fdd9;const _0x9f50f1=document['getElementById']('set-elo-ladder'),_0x41753f=document['querySelector'](_0x58abdf(0x3aa));if(_0x9f50f1)_0x19fdd9=_0x9f50f1['value'];else _0x41753f?_0x19fdd9=_0x41753f[_0x58abdf(0x2ec)]:_0x19fdd9='D1';if(!_0x2499a8||!_0x48e7ec){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x4c0c4e=_0x2499a8['value']['trim'](),_0xa45e9e=parseInt(_0x48e7ec['value']);if(!_0x4c0c4e||isNaN(_0xa45e9e)){showNotification(_0x58abdf(0x416),_0x58abdf(0x2cc));return;}try{await setCustomElo(_0x4c0c4e,_0xa45e9e,_0x19fdd9),_0x22a449['classList']['remove']('active'),_0x2499a8['value']='',_0x48e7ec['value']='';}catch(_0x52e07b){showNotification(_0x52e07b['message'],'error');}}),document['getElementById']('cancel-set-elo-btn')[_0x29a64d(0x237)]('click',()=>{const _0x228add=_0x29a64d;_0x22a449[_0x228add(0x357)][_0x228add(0x21f)](_0x228add(0x3d6));}));const _0xc162eb=document['getElementById']('set-role-modal'),_0x5d4e3a=document['getElementById']('set-role-form');if(_0xc162eb&&_0x5d4e3a){_0xc162eb['addEventListener']('click',_0x28dab4=>{const _0x40b9de=_0x29a64d;_0x28dab4[_0x40b9de(0x3ae)]===_0xc162eb&&closeModalHandler();}),_0x5d4e3a[_0x29a64d(0x237)]('submit',async _0x2665ed=>{const _0x5d41dd=_0x29a64d;_0x2665ed['preventDefault']();const _0x4d3b3f=document['getElementById']('role-username'),_0x1f1345=document[_0x5d41dd(0x40f)]('role-name'),_0x230162=document['getElementById']('role-color'),_0x1c34b8=_0x4d3b3f['value']['trim'](),_0x5cb08f=_0x1f1345['value'][_0x5d41dd(0x33b)](),_0x227763=_0x230162['value'];if(!_0x1c34b8){showNotification('Username\x20is\x20missing',_0x5d41dd(0x2cc));return;}try{await setUserRole(_0x1c34b8,_0x5cb08f,_0x227763),closeModalHandler(),loadUsersWithRoles();}catch(_0xd35a1){}});const _0x3ee349=document['getElementById']('cancel-role-btn');_0x3ee349&&(_0x3ee349['removeEventListener']('click',closeModalHandler),_0x3ee349['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x3c3dba,_0x5d609e){const _0x50b5f0=a2_0x221182;try{console[_0x50b5f0(0x302)]('Attempting\x20to\x20promote\x20'+_0x3c3dba+'\x20in\x20'+_0x5d609e+_0x50b5f0(0x217));const _0x26aa0d=auth['currentUser'];if(!_0x26aa0d)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x2391dc=_0x5d609e==='D2'?_0x50b5f0(0x1ef):_0x50b5f0(0x2a3),_0x15ba5a=_0x5d609e==='D2'?'eloHistoryD2':'eloHistory';console[_0x50b5f0(0x302)](_0x50b5f0(0x35d)+_0x2391dc);const _0x573dbe=collection(db,_0x2391dc),_0x426dce=query(_0x573dbe,where('username','==',_0x3c3dba)),_0xc8674d=await getDocs(_0x426dce);if(_0xc8674d['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x5d609e+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x5d609e+'\x20ladder');}const _0x38cbcf=_0xc8674d['docs'][0x0],_0x4ec1a2=_0x38cbcf['data'](),_0x577d67=_0x4ec1a2['eloRating']||0x4b0,_0x10353e=_0x38cbcf['id'];console['log'](_0x50b5f0(0x2a1)+_0x577d67);const _0x28cd5a=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x50b5f0(0x2d4),'elo':0x7d0}];let _0x2fe39a=_0x28cd5a['find'](_0x2b2849=>_0x2b2849['elo']>_0x577d67);if(!_0x2fe39a){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x5d609e+'\x20ladder');throw new Error(_0x50b5f0(0x33d)+_0x5d609e+_0x50b5f0(0x217));}console['log'](_0x50b5f0(0x2dc)+_0x2fe39a[_0x50b5f0(0x3d9)]+'\x20('+_0x2fe39a['elo']+')'),await updateDoc(doc(db,_0x2391dc,_0x38cbcf['id']),{'eloRating':_0x2fe39a['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x26aa0d['email']||'admin'}),await addDoc(collection(db,_0x15ba5a),{'player':_0x3c3dba,'previousElo':_0x577d67,'newElo':_0x2fe39a['elo'],'timestamp':serverTimestamp(),'type':_0x50b5f0(0x311),'rankAchieved':_0x2fe39a[_0x50b5f0(0x3d9)],'promotedBy':_0x26aa0d['email']||'admin','gameMode':_0x5d609e});try{const {promotionManager:_0x1af3bf}=await import('./promotions.js'),_0x4b097d=_0x1af3bf[_0x50b5f0(0x26b)](_0x577d67),_0x1b425a=_0x2fe39a['name'];await _0x1af3bf['sendPromotionNotification'](_0x10353e,_0x3c3dba,_0x577d67,_0x2fe39a['elo'],_0x4b097d,_0x1b425a,_0x50b5f0(0x311),{'displayName':_0x3c3dba,'source':_0x50b5f0(0x219),'adminUser':_0x26aa0d['email'],'ladder':_0x5d609e}),console[_0x50b5f0(0x302)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x1a95ed){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x1a95ed);}return alert('Successfully\x20promoted\x20'+_0x3c3dba+_0x50b5f0(0x3e3)+_0x2fe39a[_0x50b5f0(0x3d9)]+'\x20('+_0x2fe39a['elo']+')'),currentLadder===_0x5d609e&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x350a0f){console['error']('Error\x20promoting\x20player:',_0x350a0f),alert('Error\x20promoting\x20player:\x20'+_0x350a0f[_0x50b5f0(0x35e)]);throw _0x350a0f;}}document['addEventListener'](a2_0x221182(0x335),()=>{const _0x350c86=a2_0x221182,_0x2b495c=document[_0x350c86(0x40f)](_0x350c86(0x1e7));_0x2b495c&&_0x2b495c[_0x350c86(0x237)](_0x350c86(0x2e0),async _0x42be28=>{const _0x4db5e9=_0x350c86;_0x42be28['preventDefault']();const _0x299f1b=document['getElementById'](_0x4db5e9(0x2b1))['value'][_0x4db5e9(0x33b)](),_0x29b5ba=document[_0x4db5e9(0x374)](_0x4db5e9(0x1d0))[_0x4db5e9(0x2ec)];if(!_0x299f1b){alert(_0x4db5e9(0x2cd));return;}try{await promotePlayer(_0x299f1b,_0x29b5ba),document[_0x4db5e9(0x40f)]('promote-modal')['classList'][_0x4db5e9(0x21f)](_0x4db5e9(0x3d6)),document['getElementById']('promote-username')['value']='';}catch(_0x89b1f2){console['error']('Error\x20in\x20promotion:',_0x89b1f2);}});});async function demotePlayer(_0xaa0c62,_0x3b1b00){const _0x238fa8=a2_0x221182;try{console[_0x238fa8(0x302)]('Attempting\x20to\x20demote\x20'+_0xaa0c62+'\x20in\x20'+_0x3b1b00+_0x238fa8(0x217));const _0x1c0dd9=auth['currentUser'];if(!_0x1c0dd9)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1daa56=_0x3b1b00==='D2'?_0x238fa8(0x1ef):'players',_0x534efd=_0x3b1b00==='D2'?_0x238fa8(0x410):'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x1daa56);const _0x24ca9b=collection(db,_0x1daa56),_0x33d76a=query(_0x24ca9b,where(_0x238fa8(0x30d),'==',_0xaa0c62)),_0x5601ae=await getDocs(_0x33d76a);if(_0x5601ae[_0x238fa8(0x2d0)]){alert('Player\x20not\x20found\x20in\x20'+_0x3b1b00+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x3b1b00+'\x20ladder');}const _0x1eef07=_0x5601ae['docs'][0x0],_0x1510c7=_0x1eef07[_0x238fa8(0x3f2)](),_0x4766c6=_0x1510c7[_0x238fa8(0x367)]||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x4766c6);const _0x8518ec=[{'name':'Gold','elo':0x708},{'name':_0x238fa8(0x3fe),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':_0x238fa8(0x1fd),'elo':0x4b0}];let _0x4e589a=_0x8518ec[_0x238fa8(0x379)](_0x1a80f3=>_0x1a80f3[_0x238fa8(0x301)]<_0x4766c6);if(!_0x4e589a){alert(_0x238fa8(0x2e8)+_0x3b1b00+'\x20ladder');throw new Error(_0x238fa8(0x2e8)+_0x3b1b00+'\x20ladder');}console['log']('Demoting\x20player\x20to\x20'+_0x4e589a[_0x238fa8(0x3d9)]+'\x20('+_0x4e589a['elo']+')'),await updateDoc(doc(db,_0x1daa56,_0x1eef07['id']),{'eloRating':_0x4e589a['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x1c0dd9[_0x238fa8(0x305)]||_0x238fa8(0x219)}),await addDoc(collection(db,_0x534efd),{'player':_0xaa0c62,'previousElo':_0x4766c6,'newElo':_0x4e589a[_0x238fa8(0x301)],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x4e589a[_0x238fa8(0x3d9)],'demotedBy':_0x1c0dd9['email']||_0x238fa8(0x219),'gameMode':_0x3b1b00});try{const {promotionManager:_0x40309c}=await import(_0x238fa8(0x405)),_0x4fcf64=_0x40309c['getRankName'](_0x4766c6),_0xcc0fbb=_0x4e589a[_0x238fa8(0x3d9)];await _0x40309c[_0x238fa8(0x290)](_0x1eef07['id'],_0xaa0c62,_0x4766c6,_0x4e589a[_0x238fa8(0x301)],_0x4fcf64,_0xcc0fbb,'demotion',{'displayName':_0xaa0c62,'source':_0x238fa8(0x219),'adminUser':_0x1c0dd9[_0x238fa8(0x305)],'ladder':_0x3b1b00}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x25b7bb){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x25b7bb);}return alert('Successfully\x20demoted\x20'+_0xaa0c62+'\x20to\x20'+_0x4e589a['name']+'\x20('+_0x4e589a['elo']+')'),currentLadder===_0x3b1b00&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x58dad1){console['error']('Error\x20demoting\x20player:',_0x58dad1),alert(_0x238fa8(0x1d1)+_0x58dad1['message']);throw _0x58dad1;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x4778b4=document['getElementById']('demote-form');_0x4778b4&&_0x4778b4['addEventListener']('submit',async _0x23f622=>{const _0x258435=a2_0x52ec;_0x23f622['preventDefault']();const _0x3ac55c=document[_0x258435(0x40f)]('demote-username')['value'][_0x258435(0x33b)](),_0x436a85=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x3ac55c){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x3ac55c,_0x436a85),document[_0x258435(0x40f)](_0x258435(0x353))[_0x258435(0x357)]['remove'](_0x258435(0x3d6)),document['getElementById']('demote-username')['value']='';}catch(_0x53a0a4){console['error']('Error\x20in\x20demotion:',_0x53a0a4);}});});async function setCustomElo(_0x162342,_0x280946,_0x20045e){const _0x403619=a2_0x221182;try{const _0x1d0e9a=auth['currentUser'];if(!_0x1d0e9a||!isAdmin(_0x1d0e9a[_0x403619(0x305)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x4cf1aa=_0x20045e==='D2'?_0x403619(0x1ef):'players',_0x1729c4=_0x20045e==='D2'?'eloHistoryD2':_0x403619(0x309),_0x1a96fc=collection(db,_0x4cf1aa),_0xc1ca07=query(_0x1a96fc,where('username','==',_0x162342)),_0x3609de=await getDocs(_0xc1ca07);if(_0x3609de['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x20045e+'\x20ladder');const _0x164157=_0x3609de['docs'][0x0],_0x55b68d=_0x164157['data'](),_0x5d5ae5=_0x55b68d['eloRating']||0x4b0,_0x43f268=writeBatch(db);_0x43f268['update'](doc(db,_0x4cf1aa,_0x164157['id']),{'eloRating':_0x280946,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1d0e9a[_0x403619(0x305)]});const _0x192103=doc(collection(db,_0x1729c4));return _0x43f268[_0x403619(0x341)](_0x192103,{'player':_0x162342,'previousElo':_0x5d5ae5,'newElo':_0x280946,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x1d0e9a['email'],'gameMode':_0x20045e}),await _0x43f268['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x162342+'\x20was\x20updated\x20from\x20'+_0x5d5ae5+'\x20to\x20'+_0x280946,'success'),currentLadder===_0x20045e&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xf24287){console['error']('Error\x20setting\x20custom\x20ELO:',_0xf24287);throw _0xf24287;}}async function setUserRole(_0x1bc8fb,_0x2f0449,_0x51215f){const _0x457c2e=a2_0x221182;try{const _0x48fd10=auth['currentUser'];if(!_0x48fd10||!isAdmin(_0x48fd10['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x3fd578=_0x2f0449?_0x2f0449['trim']():null,_0x478093=_0x3fd578?_0x51215f||_0x457c2e(0x3fb):null,[_0x299119,_0x2179d8]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x1bc8fb))),getDocs(query(collection(db,'playersD2'),where(_0x457c2e(0x30d),'==',_0x1bc8fb)))]),_0x2567d0=[];if(!_0x299119[_0x457c2e(0x2d0)])_0x2567d0[_0x457c2e(0x323)]({'ref':_0x299119[_0x457c2e(0x1c8)][0x0]['ref'],'source':'D1'});if(!_0x2179d8[_0x457c2e(0x2d0)])_0x2567d0['push']({'ref':_0x2179d8[_0x457c2e(0x1c8)][0x0]['ref'],'source':'D2'});if(_0x2567d0['length']===0x0){const [_0x13cc27,_0x1314da]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x1bc8fb))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x1bc8fb)))]);if(!_0x13cc27['empty'])_0x2567d0['push']({'ref':_0x13cc27['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0x1314da['empty'])_0x2567d0['push']({'ref':_0x1314da[_0x457c2e(0x1c8)][0x0]['ref'],'source':_0x457c2e(0x39d)});}if(_0x2567d0['length']===0x0)throw new Error('User\x20\x22'+_0x1bc8fb+_0x457c2e(0x34e));const _0x47005d=writeBatch(db);_0x2567d0[_0x457c2e(0x2f7)](_0x5eeee2=>{const _0x24a82e=_0x457c2e;console['log']('Updating\x20role\x20for\x20'+_0x1bc8fb+'\x20in\x20'+_0x5eeee2['source']),!_0x3fd578?_0x47005d['update'](_0x5eeee2['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x47005d['update'](_0x5eeee2['ref'],{'roleName':_0x3fd578,'roleColor':_0x478093,'roleAssignedBy':_0x48fd10[_0x24a82e(0x305)],'roleAssignedAt':serverTimestamp()});}),await _0x47005d['commit']();const _0x286dc1=_0x3fd578?_0x457c2e(0x3da)+_0x3fd578+'\x22\x20set':'Role\x20removed';return showNotification(_0x286dc1+'\x20for\x20user\x20\x22'+_0x1bc8fb+'\x22','success'),!![];}catch(_0x32e73f){console['error']('Error\x20setting\x20user\x20role:',_0x32e73f),showNotification('Error:\x20'+_0x32e73f[_0x457c2e(0x35e)],'error');throw _0x32e73f;}}function showNotification(_0x476736,_0x10c289='info'){const _0x380efe=a2_0x221182,_0x42fde0=document['createElement']('div');_0x42fde0['className']='notification\x20'+_0x10c289,_0x42fde0[_0x380efe(0x346)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x10c289)+_0x380efe(0x240)+_0x476736+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document['body'][_0x380efe(0x224)](_0x42fde0),setTimeout(()=>{_0x42fde0['classList']['add']('active');},0xa);const _0x64a3af=setTimeout(()=>{closeNotification(_0x42fde0);},0x1388);_0x42fde0['querySelector']('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x64a3af),closeNotification(_0x42fde0);});}function getNotificationIcon(_0x595647){const _0x372497=a2_0x221182;switch(_0x595647){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case _0x372497(0x36f):return'fa-exclamation-triangle';case'info':default:return _0x372497(0x3d1);}}function closeNotification(_0xe359ca){const _0xe7f577=a2_0x221182;_0xe359ca[_0xe7f577(0x357)]['remove'](_0xe7f577(0x3d6)),setTimeout(()=>{_0xe359ca['remove']();},0x12c);}function setupUserRolesSection(){const _0x3fd96f=a2_0x221182,_0x5ab658=document['getElementById']('load-users-data');_0x5ab658&&_0x5ab658['addEventListener']('click',function(){const _0x28afcc=a2_0x52ec;this['classList'][_0x28afcc(0x1f7)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x28afcc(0x271)](()=>{const _0x1916cf=_0x28afcc;this['classList']['remove']('loading'),this[_0x1916cf(0x346)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x42edcb=>{const _0x48beba=_0x28afcc;console[_0x48beba(0x2cc)](_0x48beba(0x257),_0x42edcb),this['classList']['remove']('loading'),this[_0x48beba(0x346)]=_0x48beba(0x207),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x29a23c=document[_0x3fd96f(0x40f)](_0x3fd96f(0x3bf));_0x29a23c&&_0x29a23c['addEventListener']('click',()=>{const _0x3564a8=document['getElementById']('set-role-modal');_0x3564a8&&_0x3564a8['classList']['add']('active');});const _0x5b2e=document['getElementById']('user-search');_0x5b2e&&_0x5b2e['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x1370d2=document['getElementById']('role-filter');_0x1370d2&&_0x1370d2['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x18b6f3=a2_0x221182,_0x462706=document['getElementById']('users-table-body');if(!_0x462706)return;_0x462706[_0x18b6f3(0x346)]=_0x18b6f3(0x1c5);try{const [_0x51b435,_0x5b99eb,_0xbcb962,_0x450278]=await Promise[_0x18b6f3(0x317)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,_0x18b6f3(0x1f9)))]),_0x5a5c7e=new Map();function _0x238950(_0x378085,_0x56d7bc){const _0x594308=_0x18b6f3;_0x378085[_0x594308(0x2f7)](_0x51b7ac=>{const _0x30530b=_0x594308,_0x2f9ca2=_0x51b7ac['data']();if(!_0x2f9ca2['username'])return;if(!_0x5a5c7e['has'](_0x2f9ca2['username']))_0x5a5c7e['set'](_0x2f9ca2['username'],{'username':_0x2f9ca2['username'],'roleName':_0x2f9ca2['roleName']||null,'roleColor':_0x2f9ca2[_0x30530b(0x340)]||null,'roleAssignedBy':_0x2f9ca2['roleAssignedBy']||null,'roleAssignedAt':_0x2f9ca2[_0x30530b(0x30b)]||null,'sources':[_0x56d7bc]});else{const _0x341bcf=_0x5a5c7e['get'](_0x2f9ca2['username']);_0x2f9ca2['roleName']&&(!_0x341bcf['roleName']||_0x56d7bc==='D1'||_0x56d7bc==='D2')&&(_0x341bcf[_0x30530b(0x241)]=_0x2f9ca2['roleName'],_0x341bcf['roleColor']=_0x2f9ca2['roleColor'],_0x341bcf[_0x30530b(0x248)]=_0x2f9ca2['roleAssignedBy'],_0x341bcf['roleAssignedAt']=_0x2f9ca2['roleAssignedAt']),!_0x341bcf['sources'][_0x30530b(0x2d3)](_0x56d7bc)&&_0x341bcf['sources']['push'](_0x56d7bc);}});}_0x238950(_0x51b435,'D1'),_0x238950(_0x5b99eb,'D2'),_0x238950(_0xbcb962,_0x18b6f3(0x1cf)),_0x238950(_0x450278,'Profile');const _0x3d4047=Array['from'](_0x5a5c7e['values']())['sort']((_0xef25ee,_0x4d4669)=>_0xef25ee[_0x18b6f3(0x30d)]['localeCompare'](_0x4d4669[_0x18b6f3(0x30d)]));if(_0x3d4047[_0x18b6f3(0x208)]===0x0){_0x462706['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x462706['innerHTML']='',_0x3d4047['forEach'](_0x25a301=>{const _0x16e9b9=_0x18b6f3,_0x356764=document['createElement']('tr');_0x356764['dataset']['username']=_0x25a301['username'],_0x356764['dataset']['roleName']=_0x25a301[_0x16e9b9(0x241)]||'',_0x356764[_0x16e9b9(0x1c7)][_0x16e9b9(0x340)]=_0x25a301[_0x16e9b9(0x340)]||_0x16e9b9(0x3fb);const _0x260b4d=_0x25a301['roleAssignedAt']?new Date(_0x25a301[_0x16e9b9(0x30b)]['seconds']*0x3e8)[_0x16e9b9(0x2dd)]():_0x16e9b9(0x404),_0x3d76c3=_0x25a301[_0x16e9b9(0x241)]?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x25a301['roleColor']+';\x20color:\x20'+getContrastColor(_0x25a301['roleColor'])+';\x22>'+_0x25a301['roleName']+_0x16e9b9(0x34f):'<span\x20class=\x22no-role\x22>None</span>';_0x356764['innerHTML']=_0x16e9b9(0x3a5)+_0x25a301['username']+_0x16e9b9(0x307)+_0x25a301['sources']['join'](',\x20')+_0x16e9b9(0x272)+_0x3d76c3+_0x16e9b9(0x34c)+(_0x25a301['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x260b4d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x25a301[_0x16e9b9(0x30d)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x25a301['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x25a301[_0x16e9b9(0x30d)]+_0x16e9b9(0x321):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x462706['appendChild'](_0x356764);}),document['querySelectorAll']('.edit-role-btn')[_0x18b6f3(0x2f7)](_0x36bbb9=>{const _0x553acc=_0x18b6f3;_0x36bbb9['addEventListener'](_0x553acc(0x40d),()=>{const _0x3bc081=_0x36bbb9['dataset']['username'];openRoleEditModal(_0x3bc081);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x5c8d7b=>{const _0xd622de=_0x18b6f3;_0x5c8d7b['addEventListener'](_0xd622de(0x40d),()=>{const _0x1e8343=_0x5c8d7b['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x1e8343+'?')&&setUserRole(_0x1e8343,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x129d33=>console['error']('Error\x20removing\x20role:',_0x129d33));});});}catch(_0x462c02){console['error']('Error\x20loading\x20users:',_0x462c02),_0x462706['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x35b7e8){const _0x364354=a2_0x221182;console['log'](_0x364354(0x409),_0x35b7e8);const _0x31a94b=document['getElementById']('set-role-modal'),_0x566f78=document['getElementById']('role-username'),_0x49569b=document['getElementById'](_0x364354(0x38f));if(!_0x31a94b){console[_0x364354(0x2cc)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x31a94b);_0x566f78?(_0x566f78['value']=_0x35b7e8,console[_0x364354(0x302)](_0x364354(0x2c3)+_0x35b7e8)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x1925a8=document[_0x364354(0x374)](_0x364354(0x245)+_0x35b7e8+'\x22]');if(_0x1925a8&&_0x49569b){const _0x4878b9=_0x1925a8['dataset']['role'];_0x49569b['value']=_0x4878b9===_0x364354(0x282)?'':_0x4878b9,console[_0x364354(0x302)]('Role\x20select\x20set\x20to:\x20'+_0x49569b['value']+'\x20(based\x20on\x20data-role:\x20'+_0x4878b9+')');}else{if(!_0x1925a8)console[_0x364354(0x2b0)]('Table\x20row\x20for\x20user\x20'+_0x35b7e8+'\x20not\x20found.');if(!_0x49569b)console['warn'](_0x364354(0x2db));if(_0x49569b)_0x49569b['value']='';}console[_0x364354(0x302)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x31a94b['classList']['add'](_0x364354(0x3d6));const _0x1de08f=document['getElementById']('cancel-role-btn');_0x1de08f?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x1de08f['removeEventListener']('click',closeModalHandler),_0x1de08f['addEventListener']('click',closeModalHandler)):console[_0x364354(0x2b0)](_0x364354(0x358)),console['log']('Attaching\x20background\x20click\x20listener.'),_0x31a94b['removeEventListener'](_0x364354(0x40d),closeModalBackgroundHandler),_0x31a94b['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0xb86759){const _0xc83aad=a2_0x221182;_0xb86759[_0xc83aad(0x3ae)]===this&&closeModalHandler();}function closeModalHandler(){const _0x276893=a2_0x221182,_0x54dffb=document['getElementById']('set-role-modal');_0x54dffb&&(_0x54dffb['classList']['remove']('active'),_0x54dffb[_0x276893(0x276)](_0x276893(0x40d),closeModalBackgroundHandler));}function filterUsersTable(){const _0x9b547f=a2_0x221182,_0x141b47=document['getElementById']('user-search')?.['value']['toLowerCase']()||'',_0x38c91d=document['getElementById']('role-filter')?.[_0x9b547f(0x2ec)]||'all',_0x48ae98=document['querySelectorAll']('#users-table-body\x20tr');let _0x27eb59=0x0;_0x48ae98[_0x9b547f(0x2f7)](_0xc07987=>{const _0xb1194b=_0x9b547f;if(_0xc07987['querySelector']('.loading-cell')||_0xc07987['querySelector']('.empty-state')||_0xc07987['querySelector']('.error-state'))return;const _0x4e3ac6=_0xc07987['dataset']['username']?.['toLowerCase']()||'',_0x3e85c6=_0xc07987[_0xb1194b(0x1c7)][_0xb1194b(0x27d)]||_0xb1194b(0x282),_0xa94c40=_0x4e3ac6['includes'](_0x141b47),_0xc73cb2=_0x38c91d===_0xb1194b(0x317)||_0x3e85c6===_0x38c91d;_0xa94c40&&_0xc73cb2?(_0xc07987['style'][_0xb1194b(0x3c0)]='',_0x27eb59++):_0xc07987['style']['display']='none';});if(_0x27eb59===0x0&&_0x48ae98['length']>0x0){const _0x51db44=document['getElementById']('users-table-body');if(_0x51db44){if(!_0x51db44[_0x9b547f(0x374)]('.no-results')){const _0x3c360f=document['createElement']('tr');_0x3c360f['classList']['add']('no-results'),_0x3c360f['innerHTML']=_0x9b547f(0x2a0),_0x51db44[_0x9b547f(0x224)](_0x3c360f);}}}else{const _0x96b163=document[_0x9b547f(0x374)]('.no-results');_0x96b163&&_0x96b163[_0x9b547f(0x21f)]();}}function setupManageArticlesSection(){const _0x1fe488=a2_0x221182,_0x23b144=document['getElementById']('load-articles-data');_0x23b144&&_0x23b144['addEventListener']('click',function(){const _0x40d87b=a2_0x52ec;this['classList']['add'](_0x40d87b(0x394)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x40d87b(0x271)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x40d87b(0x260)](_0x1d7ffc=>{const _0x3479f7=_0x40d87b;console['error'](_0x3479f7(0x3ee),_0x1d7ffc),this[_0x3479f7(0x357)]['remove'](_0x3479f7(0x394)),this[_0x3479f7(0x346)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2c29c9=_0x3479f7;this[_0x2c29c9(0x346)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x1b3468=document[_0x1fe488(0x40f)]('create-new-article-btn');_0x1b3468?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x1b3468['style']['display']=_0x1fe488(0x3db),_0x1b3468[_0x1fe488(0x237)]('click',()=>{openArticleModal();})):console[_0x1fe488(0x2cc)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x4f70f4=document['getElementById']('article-form');_0x4f70f4&&_0x4f70f4['addEventListener']('submit',_0x25da13=>{const _0x472b8b=_0x1fe488;_0x25da13[_0x472b8b(0x1f6)](),saveArticle();});const _0x44a3d7=document[_0x1fe488(0x40f)](_0x1fe488(0x2d5));_0x44a3d7&&_0x44a3d7[_0x1fe488(0x237)]('click',()=>{closeArticleModal();});const _0x5d5be9=document['querySelector']('#article-modal\x20.close-btn');_0x5d5be9&&_0x5d5be9['addEventListener']('click',()=>{closeArticleModal();});const _0x4b0e7f=document[_0x1fe488(0x40f)]('article-modal');_0x4b0e7f&&_0x4b0e7f['addEventListener']('click',_0x2d7b60=>{_0x2d7b60['target']===_0x4b0e7f&&closeArticleModal();});}async function loadArticles(){const _0x3a6409=a2_0x221182,_0x1dd538=document['getElementById'](_0x3a6409(0x34a));if(!_0x1dd538)return;_0x1dd538['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x4dee00=collection(db,'articles'),_0x4e8d64=query(_0x4dee00,orderBy('createdAt',_0x3a6409(0x263))),_0x4d64a3=await getDocs(_0x4e8d64);if(_0x4d64a3['empty']){_0x1dd538['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x1dd538['innerHTML']='',_0x4d64a3['forEach'](_0x198331=>{const _0x57a569=_0x3a6409,_0x4a6853=_0x198331['data'](),_0xee873e=document['createElement']('tr'),_0x294fd0=_0x4a6853['createdAt']?new Date(_0x4a6853[_0x57a569(0x32a)]['seconds']*0x3e8)['toLocaleString']():_0x57a569(0x404);_0xee873e[_0x57a569(0x346)]=_0x57a569(0x3a5)+(_0x4a6853[_0x57a569(0x2b6)]||'Untitled')+_0x57a569(0x34c)+(_0x4a6853['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x294fd0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x198331['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x198331['id']+_0x57a569(0x3ed),_0x1dd538['appendChild'](_0xee873e);}),setupArticleActionButtons();}catch(_0x655dd4){console['error']('Error\x20loading\x20articles:',_0x655dd4),_0x1dd538['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x655dd4['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0xb735c9=a2_0x221182;document[_0xb735c9(0x30e)]('.edit-article-btn')['forEach'](_0x388194=>{_0x388194['addEventListener']('click',async _0x55064b=>{const _0xe1a7a6=_0x55064b['currentTarget']['dataset']['id'];openArticleModal(_0xe1a7a6);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0xf064ab=>{_0xf064ab['addEventListener']('click',async _0x35fb8b=>{const _0xbcdc9=a2_0x52ec,_0x20616=_0x35fb8b['currentTarget'][_0xbcdc9(0x1c7)]['id'];confirmDeleteArticle(_0x20616);});});}function openArticleModal(_0x360bc9=null){const _0x244abc=a2_0x221182,_0x556997=document['getElementById']('article-modal'),_0x446d5=document[_0x244abc(0x40f)](_0x244abc(0x316)),_0x493585=document['getElementById']('article-form'),_0x58634a=document['getElementById'](_0x244abc(0x350));_0x493585[_0x244abc(0x3f8)](),_0x58634a['value']='';if(_0x360bc9)_0x446d5['textContent']=_0x244abc(0x337),_0x58634a['value']=_0x360bc9,loadArticleData(_0x360bc9);else{_0x446d5['textContent']='Create\x20Article';const _0xd8ab57=auth['currentUser'];if(_0xd8ab57){const _0x4f5c00=document['getElementById']('article-author');if(_0x4f5c00&&_0xd8ab57[_0x244abc(0x2ea)])_0x4f5c00[_0x244abc(0x2ec)]=_0xd8ab57['displayName'];else _0x4f5c00&&(_0x4f5c00[_0x244abc(0x2ec)]=_0xd8ab57[_0x244abc(0x305)]);}}_0x556997['classList']['add']('active');}async function loadArticleData(_0x15ef2d){const _0x7141f0=a2_0x221182;try{const _0x3c4ee7=doc(db,_0x7141f0(0x3dc),_0x15ef2d),_0x462786=await getDoc(_0x3c4ee7);if(!_0x462786[_0x7141f0(0x3d0)]()){showNotification('Article\x20not\x20found',_0x7141f0(0x2cc));return;}const _0x5758d7=_0x462786[_0x7141f0(0x3f2)]();document['getElementById']('article-title')['value']=_0x5758d7[_0x7141f0(0x2b6)]||'',document[_0x7141f0(0x40f)](_0x7141f0(0x227))[_0x7141f0(0x2ec)]=_0x5758d7['author']||'',document[_0x7141f0(0x40f)]('article-image-url')['value']=_0x5758d7['imageUrl']||'',document[_0x7141f0(0x40f)]('article-content')['value']=_0x5758d7['content']||'';}catch(_0x508217){console['error']('Error\x20loading\x20article\x20data:',_0x508217),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x59da71=a2_0x221182;try{const _0x237907=document['getElementById'](_0x59da71(0x350))['value'],_0x2327bf=document[_0x59da71(0x40f)](_0x59da71(0x3c8))['value']['trim'](),_0x4eedde=document['getElementById']('article-author')['value']['trim'](),_0x39189e=document['getElementById']('article-image-url')[_0x59da71(0x2ec)]['trim'](),_0x341527=document['getElementById'](_0x59da71(0x2d9))[_0x59da71(0x2ec)]['trim']();if(!_0x2327bf||!_0x341527){showNotification('Title\x20and\x20content\x20are\x20required',_0x59da71(0x2cc));return;}const _0xafd888=auth['currentUser'];if(!_0xafd888){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x567f3f={'title':_0x2327bf,'author':_0x4eedde,'imageUrl':_0x39189e||null,'content':_0x341527,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xafd888['email']};!_0x237907?(_0x567f3f['createdAt']=serverTimestamp(),_0x567f3f[_0x59da71(0x310)]=_0xafd888[_0x59da71(0x305)],await addDoc(collection(db,'articles'),_0x567f3f),showNotification('Article\x20created\x20successfully',_0x59da71(0x213))):(await updateDoc(doc(db,_0x59da71(0x3dc),_0x237907),_0x567f3f),showNotification('Article\x20updated\x20successfully',_0x59da71(0x213))),closeArticleModal(),loadArticles();}catch(_0x44c4ab){console['error']('Error\x20saving\x20article:',_0x44c4ab),showNotification(_0x59da71(0x32e)+_0x44c4ab['message'],'error');}}function closeArticleModal(){const _0xc9acdf=a2_0x221182,_0x50ee67=document[_0xc9acdf(0x40f)]('article-modal');_0x50ee67&&_0x50ee67['classList']['remove'](_0xc9acdf(0x3d6));}async function confirmDeleteArticle(_0x4cb089){const _0x488073=a2_0x221182;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x4cb089)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x2630ff){console['error']('Error\x20deleting\x20article:',_0x2630ff),showNotification(_0x488073(0x2ae)+_0x2630ff['message'],'error');}}function setupTrophyManagementSection(){const _0x3490b=a2_0x221182,_0x40384e=document['getElementById']('load-trophies-data');_0x40384e&&_0x40384e['addEventListener'](_0x3490b(0x40d),function(){const _0x13e349=_0x3490b;this[_0x13e349(0x357)]['add']('loading'),this[_0x13e349(0x346)]=_0x13e349(0x294);const _0x323edb=document[_0x13e349(0x40f)]('assign-trophy-image');_0x323edb&&(_0x323edb['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x2fe0e8=>{const _0x29fbeb=_0x13e349;console['error']('Error\x20loading\x20trophies:',_0x2fe0e8),this['classList']['remove'](_0x29fbeb(0x394)),this[_0x29fbeb(0x346)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x26179b=_0x29fbeb;this[_0x26179b(0x346)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x55c123=document['getElementById']('create-new-trophy-btn');_0x55c123&&_0x55c123['addEventListener']('click',()=>{openTrophyModal();});const _0x1c0bfd=document[_0x3490b(0x40f)]('trophy-form');_0x1c0bfd&&_0x1c0bfd['addEventListener'](_0x3490b(0x2e0),_0x36470b=>{_0x36470b['preventDefault'](),saveTrophyDefinition();});const _0x292827=document[_0x3490b(0x40f)]('cancel-trophy-btn');_0x292827&&_0x292827[_0x3490b(0x237)]('click',()=>{closeTrophyModal();});document[_0x3490b(0x30e)](_0x3490b(0x3fa))[_0x3490b(0x2f7)](_0x4eb2f4=>{const _0x10bd53=_0x3490b;_0x4eb2f4[_0x10bd53(0x237)]('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0xeaf13e=document[_0x3490b(0x40f)]('trophy-modal');_0xeaf13e&&_0xeaf13e['addEventListener']('click',_0x2b9444=>{_0x2b9444['target']===_0xeaf13e&&closeTrophyModal();});const _0x1c7332=document[_0x3490b(0x40f)](_0x3490b(0x2fd));_0x1c7332&&_0x1c7332[_0x3490b(0x237)]('click',_0x1837b9=>{const _0x43e3da=_0x3490b;_0x1837b9[_0x43e3da(0x3ae)]===_0x1c7332&&closeAssignTrophyModal();});const _0x402c57=document['getElementById']('assign-trophy-form');_0x402c57&&_0x402c57[_0x3490b(0x237)]('submit',_0x404453=>{const _0x43fca5=_0x3490b;_0x404453[_0x43fca5(0x1f6)](),assignTrophyToPlayer();});const _0x4b2814=document['getElementById'](_0x3490b(0x31f));_0x4b2814&&_0x4b2814['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x4edd99=document['getElementById']('trophy-image-url');_0x4edd99&&(_0x4edd99['addEventListener']('input',updateTrophyImagePreview),_0x4edd99['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x46f73c=a2_0x221182,_0x4cabf2=document['getElementById'](_0x46f73c(0x36e))['value'][_0x46f73c(0x33b)](),_0x5c64e8=document['getElementById'](_0x46f73c(0x222));if(!_0x5c64e8){const _0x5df6c0=document['getElementById']('trophy-image-url')[_0x46f73c(0x326)]('.form-group'),_0x483c4b=document['createElement']('div');_0x483c4b['id']=_0x46f73c(0x222),_0x483c4b['className']='trophy-preview-container',_0x5df6c0[_0x46f73c(0x224)](_0x483c4b);const _0x3646ce=document['createElement']('img');_0x3646ce['id']=_0x46f73c(0x238),_0x3646ce['alt']='Trophy\x20Preview',_0x3646ce[_0x46f73c(0x223)]=function(){const _0x2308d2=_0x46f73c;this[_0x2308d2(0x200)]=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x483c4b['appendChild'](_0x3646ce);}const _0x215dd3=document['getElementById']('trophy-preview-img');_0x4cabf2?(_0x215dd3['src']=_0x4cabf2,_0x215dd3['style']['display']='block',_0x215dd3[_0x46f73c(0x357)]['remove']('error')):(_0x215dd3['src']=DEFAULT_TROPHY_IMAGE,_0x215dd3[_0x46f73c(0x318)]['display']=_0x46f73c(0x3db));}async function loadTrophyDefinitions(){const _0x40c521=a2_0x221182,_0x1f98b0=document['getElementById']('trophies-table-body');if(!_0x1f98b0)return;_0x1f98b0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x5d72b1=collection(db,'trophyDefinitions'),_0x108988=query(_0x5d72b1,orderBy('createdAt','desc')),_0x1fb659=await getDocs(_0x108988);if(_0x1fb659['empty']){_0x1f98b0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x1f98b0['innerHTML']='',_0x1fb659[_0x40c521(0x2f7)](_0x2f9993=>{const _0x138b86=_0x40c521,_0x249c68=_0x2f9993[_0x138b86(0x3f2)](),_0x3fc7fd=document['createElement']('tr'),_0xc9d639=_0x249c68[_0x138b86(0x32a)]?new Date(_0x249c68[_0x138b86(0x32a)][_0x138b86(0x3f4)]*0x3e8)['toLocaleString']():'N/A';_0x3fc7fd['innerHTML']=_0x138b86(0x22e)+(_0x249c68['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x249c68['name']+_0x138b86(0x2e6)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x249c68[_0x138b86(0x3d9)]||_0x138b86(0x21d))+_0x138b86(0x3f1)+(_0x249c68['rarity']||'common')+'\x22>'+(_0x249c68[_0x138b86(0x261)]||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc9d639+_0x138b86(0x3c5)+_0x2f9993['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x2f9993['id']+_0x138b86(0x3fd)+_0x2f9993['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1f98b0[_0x138b86(0x224)](_0x3fc7fd);}),setupTrophyActionButtons();}catch(_0x891f32){console[_0x40c521(0x2cc)]('Error\x20loading\x20trophy\x20definitions:',_0x891f32),_0x1f98b0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x891f32[_0x40c521(0x35e)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x56e779=>{const _0x5b4be6=a2_0x52ec;_0x56e779[_0x5b4be6(0x237)](_0x5b4be6(0x40d),_0x774867=>{const _0x5dd040=_0x5b4be6,_0x298e60=_0x774867[_0x5dd040(0x3a0)][_0x5dd040(0x1c7)]['id'];openTrophyModal(_0x298e60);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x376801=>{const _0x476423=a2_0x52ec;_0x376801[_0x476423(0x237)]('click',_0x2dcbec=>{const _0x487bb3=_0x476423,_0x101426=_0x2dcbec[_0x487bb3(0x3a0)]['dataset']['id'];openAssignTrophyModal(_0x101426);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x2df3cc=>{_0x2df3cc['addEventListener']('click',_0x3ccd55=>{const _0x4efca2=_0x3ccd55['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x4efca2);});});}function openTrophyModal(_0x100570=null){const _0x45f76f=a2_0x221182,_0x40c563=document['getElementById']('trophy-modal'),_0xed281f=document['getElementById']('trophy-modal-title'),_0x157c61=document[_0x45f76f(0x40f)]('trophy-form'),_0x510ec5=document[_0x45f76f(0x40f)](_0x45f76f(0x32d));_0x157c61['reset'](),_0x510ec5['value']='';const _0x479bcc=document['getElementById']('trophy-preview-img');_0x479bcc&&(_0x479bcc['src']=DEFAULT_TROPHY_IMAGE,_0x479bcc['classList']['remove']('error')),_0x100570?(_0xed281f['textContent']=_0x45f76f(0x3ec),_0x510ec5[_0x45f76f(0x2ec)]=_0x100570,loadTrophyData(_0x100570)):_0xed281f['textContent']='Create\x20New\x20Trophy',_0x40c563['classList']['add'](_0x45f76f(0x3d6));}async function loadTrophyData(_0x55a62d){const _0x351477=a2_0x221182;try{const _0x937f74=doc(db,'trophyDefinitions',_0x55a62d),_0x23ccb6=await getDoc(_0x937f74);if(!_0x23ccb6['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x1a14a9=_0x23ccb6[_0x351477(0x3f2)]();document[_0x351477(0x40f)](_0x351477(0x3de))[_0x351477(0x2ec)]=_0x1a14a9['name']||'',document['getElementById']('trophy-description')['value']=_0x1a14a9['description']||'',document['getElementById']('trophy-image-url')['value']=_0x1a14a9['image']||'',document['getElementById']('trophy-rarity')[_0x351477(0x2ec)]=_0x1a14a9['rarity']||'common',updateTrophyImagePreview();}catch(_0x2a0390){console['error'](_0x351477(0x26f),_0x2a0390),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x47e0dc=a2_0x221182;try{const _0xbb9e9e=document[_0x47e0dc(0x40f)](_0x47e0dc(0x32d))['value'],_0x5a23ba=document[_0x47e0dc(0x40f)](_0x47e0dc(0x3de))[_0x47e0dc(0x2ec)]['trim'](),_0x2531a2=document['getElementById']('trophy-description')['value']['trim'](),_0x2e351c=document[_0x47e0dc(0x40f)]('trophy-image-url')[_0x47e0dc(0x2ec)]['trim'](),_0x30cdfd=document['getElementById']('trophy-rarity')['value'];if(!_0x5a23ba||!_0x2531a2||!_0x2e351c){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x349acb=auth['currentUser'];if(!_0x349acb){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x36f8a6={'name':_0x5a23ba,'description':_0x2531a2,'image':_0x2e351c,'rarity':_0x30cdfd,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x349acb['email']};!_0xbb9e9e?(_0x36f8a6['createdAt']=serverTimestamp(),_0x36f8a6['createdBy']=_0x349acb[_0x47e0dc(0x305)],await addDoc(collection(db,_0x47e0dc(0x291)),_0x36f8a6),showNotification(_0x47e0dc(0x38a),'success')):(await updateDoc(doc(db,_0x47e0dc(0x291),_0xbb9e9e),_0x36f8a6),showNotification('Trophy\x20updated\x20successfully',_0x47e0dc(0x213))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x4f0e52){console['error']('Error\x20saving\x20trophy:',_0x4f0e52),showNotification(_0x47e0dc(0x2b2)+_0x4f0e52['message'],'error');}}function closeTrophyModal(){const _0x3da5d4=a2_0x221182,_0x3343e8=document['getElementById'](_0x3da5d4(0x284));_0x3343e8&&_0x3343e8['classList']['remove']('active');}async function confirmDeleteTrophy(_0x214c8d){const _0x63b4ae=a2_0x221182;if(!_0x214c8d){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x32d7e7=auth['currentUser'];if(!_0x32d7e7){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x214c8d),await deleteDoc(doc(db,'trophyDefinitions',_0x214c8d)),showNotification(_0x63b4ae(0x28c),'success'),loadTrophyDefinitions();}catch(_0xa1713b){console[_0x63b4ae(0x2cc)]('Error\x20deleting\x20trophy\x20definition:',_0xa1713b),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0xa1713b['message'],'error');}}async function openAssignTrophyModal(_0x45b2f3){const _0x1491cf=a2_0x221182;try{const _0x4d4b7c=doc(db,_0x1491cf(0x291),_0x45b2f3),_0x261c89=await getDoc(_0x4d4b7c);if(!_0x261c89['exists']()){showNotification('Trophy\x20not\x20found',_0x1491cf(0x2cc));return;}const _0x585af4=_0x261c89['data']();document[_0x1491cf(0x40f)]('assign-trophy-id')['value']=_0x45b2f3,document['getElementById']('assign-trophy-name')['value']=_0x585af4['name'],document['getElementById']('assign-trophy-image')['src']=_0x585af4[_0x1491cf(0x259)]||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0x585af4['name']||_0x1491cf(0x327),document['getElementById'](_0x1491cf(0x1f5))[_0x1491cf(0x2bb)]=_0x585af4[_0x1491cf(0x320)]||'No\x20description';const _0x151354=document['getElementById']('assign-trophy-rarity');_0x151354[_0x1491cf(0x2bb)]=_0x585af4[_0x1491cf(0x261)]||'common',_0x151354['className']=_0x1491cf(0x2bd)+(_0x585af4['rarity']||'common');const _0x4fedf2=document['getElementById']('assign-trophy-modal');_0x4fedf2['classList']['add']('active');}catch(_0x2c9353){console[_0x1491cf(0x2cc)]('Error\x20opening\x20assign\x20trophy\x20modal:',_0x2c9353),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x1491cf(0x2cc));}}function closeAssignTrophyModal(){const _0x38f1f3=document['getElementById']('assign-trophy-modal');_0x38f1f3&&_0x38f1f3['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0xe9c771=a2_0x221182;try{const _0x5aa55e=document['getElementById']('assign-trophy-id')[_0xe9c771(0x2ec)],_0x3e3388=document['getElementById']('assign-trophy-name')['value'],_0x1f8522=document['getElementById']('assign-player-username')['value'][_0xe9c771(0x33b)](),_0xef05eb=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')[_0xe9c771(0x2ec)];if(!_0x5aa55e||!_0x1f8522){showNotification(_0xe9c771(0x2e5),'error');return;}const _0x51b97f=auth['currentUser'];if(!_0x51b97f){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x1a8d84=null,_0x4b3403=null,_0x31aa3b=null;if(_0xef05eb==='non-participant'){const _0x49108a=collection(db,'nonParticipants'),_0x553c9c=query(_0x49108a,where(_0xe9c771(0x30d),'==',_0x1f8522)),_0x4173c7=await getDocs(_0x553c9c);!_0x4173c7[_0xe9c771(0x2d0)]&&(_0x1a8d84=_0x4173c7['docs'][0x0],_0x4b3403=_0x1a8d84['id'],_0x31aa3b=_0x1a8d84[_0xe9c771(0x3f2)]());}else{const _0x505252=_0xef05eb==='D1'?'players':_0xef05eb==='D2'?_0xe9c771(0x1ef):'playersD3',_0x1640f5=collection(db,_0x505252),_0x488f71=query(_0x1640f5,where('username','==',_0x1f8522)),_0xf3a9e1=await getDocs(_0x488f71);!_0xf3a9e1['empty']&&(_0x1a8d84=_0xf3a9e1['docs'][0x0],_0x4b3403=_0x1a8d84['id'],_0x31aa3b=_0x1a8d84['data']());}if(!_0x1a8d84){showNotification('Player\x20\x22'+_0x1f8522+'\x22\x20not\x20found\x20in\x20'+(_0xef05eb==='non-participant'?'non-participants':_0xef05eb+'\x20ladder'),_0xe9c771(0x2cc));return;}const _0x930497=collection(db,_0xe9c771(0x377)),_0x1e5a47=query(_0x930497,where('userId','==',_0x4b3403),where('trophyId','==',_0x5aa55e)),_0x4bda10=await getDocs(_0x1e5a47);if(!_0x4bda10['empty']){showNotification('Player\x20\x22'+_0x1f8522+'\x22\x20already\x20has\x20this\x20trophy',_0xe9c771(0x36f));return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x4b3403,'playerUsername':_0x1f8522,'trophyId':_0x5aa55e,'awardedAt':serverTimestamp(),'awardedBy':_0x51b97f['email'],'ladder':_0xef05eb}),showNotification('Trophy\x20\x22'+_0x3e3388+'\x22\x20awarded\x20to\x20'+_0x1f8522,'success'),closeAssignTrophyModal();}catch(_0x2225ca){console['error']('Error\x20assigning\x20trophy:',_0x2225ca),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x2225ca[_0xe9c771(0x35e)],_0xe9c771(0x2cc));}}function setupInactivePlayersSection(){const _0x966591=a2_0x221182,_0x34959a=document['getElementById']('inactive-days-filter');_0x34959a&&_0x34959a['addEventListener'](_0x966591(0x3e0),function(){const _0x475352=_0x966591,_0x48f644=document['getElementById'](_0x475352(0x24e));if(_0x48f644)_0x48f644[_0x475352(0x40d)]();});const _0x1ea300=document[_0x966591(0x374)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x3878ca=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x1ea300&&_0x3878ca&&(_0x1ea300['addEventListener']('change',function(){const _0x1878d0=_0x966591;if(this['checked']){currentLadder='D1';if(document[_0x1878d0(0x40f)]('inactive-players')[_0x1878d0(0x318)][_0x1878d0(0x3c0)]!=='none'){const _0x3bb079=document[_0x1878d0(0x40f)](_0x1878d0(0x24e));if(_0x3bb079)_0x3bb079['click']();}}}),_0x3878ca['addEventListener']('change',function(){const _0x28b4a9=_0x966591;if(this['checked']){currentLadder='D2';if(document[_0x28b4a9(0x40f)]('inactive-players')['style']['display']!=='none'){const _0x14e5b5=document[_0x28b4a9(0x40f)](_0x28b4a9(0x24e));if(_0x14e5b5)_0x14e5b5['click']();}}}));const _0x301238=document['getElementById']('inactive-players-search');_0x301238&&_0x301238['addEventListener'](_0x966591(0x3f5),debounce(function(){const _0x4b8c75=_0x966591,_0x246433=_0x301238['value']['toLowerCase'](),_0x37bee8=document[_0x4b8c75(0x30e)]('#inactive-players-table-body\x20tr');_0x37bee8['forEach'](_0x43ec9d=>{const _0x78bc04=_0x4b8c75;if(_0x43ec9d['querySelector']('.loading-cell')||_0x43ec9d['querySelector']('.empty-state')||_0x43ec9d[_0x78bc04(0x374)]('.error-state'))return;const _0x4def47=_0x43ec9d[_0x78bc04(0x204)][0x0]?.['textContent']['toLowerCase']()||'',_0xf444ce=_0x43ec9d[_0x78bc04(0x204)][0x5]?.[_0x78bc04(0x2bb)]['toLowerCase']()||'';_0x4def47['includes'](_0x246433)||_0xf444ce['includes'](_0x246433)?_0x43ec9d['style']['display']='':_0x43ec9d['style'][_0x78bc04(0x3c0)]='none';});},0x12c)),document['addEventListener']('click',function(_0x472b2f){const _0x271147=_0x966591;if(_0x472b2f[_0x271147(0x3ae)]['closest']('.view-player-btn')){const _0x1019e1=_0x472b2f['target'][_0x271147(0x326)](_0x271147(0x268)),_0x3ba7eb=_0x1019e1['dataset']['username'];_0x3ba7eb&&alert('View\x20player\x20details\x20for\x20'+_0x3ba7eb+_0x271147(0x388));}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x11e965=a2_0x221182,_0x50ce66=document['getElementById']('inactive-players-table-body');if(!_0x50ce66)return;_0x50ce66['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x1f5a71=document[_0x11e965(0x40f)]('inactive-days-filter'),_0x30f8c4=_0x1f5a71?parseInt(_0x1f5a71['value'])||0x0:0x0,_0x54c575=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x4f4fc1=await getDocs(_0x54c575);if(_0x4f4fc1[_0x11e965(0x2d0)]){_0x50ce66['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x5cee47=[];_0x4f4fc1['forEach'](_0x528048=>{const _0x57375d=_0x528048['data']();_0x5cee47['push']({..._0x57375d,'id':_0x528048['id'],'username':_0x57375d['username']||'Unknown\x20Player'});}),console[_0x11e965(0x302)](_0x11e965(0x40e)+_0x5cee47['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x56a060=currentLadder==='D1'?'approvedMatches':_0x11e965(0x375),_0x6d2ede=_0x5cee47['map'](async _0x3a927d=>{const _0x4570b9=_0x11e965;try{const _0x1f11de=collection(db,_0x56a060),_0x3a060f=query(_0x1f11de,or(where('winnerUsername','==',_0x3a927d[_0x4570b9(0x30d)]),where('loserUsername','==',_0x3a927d[_0x4570b9(0x30d)])),orderBy(_0x4570b9(0x1ed),_0x4570b9(0x263)),limit(0x1)),_0x48e276=await getDocs(_0x3a060f);if(!_0x48e276[_0x4570b9(0x2d0)]){const _0x5f16b6=_0x48e276['docs'][0x0][_0x4570b9(0x3f2)](),_0x5dcaa7=_0x5f16b6['approvedAt']?new Date(_0x5f16b6['approvedAt']['seconds']*0x3e8):null,_0x38c7dd=new Date(),_0x46dc75=_0x5dcaa7?Math['floor']((_0x38c7dd-_0x5dcaa7)/(0x3e8*0x3c*0x3c*0x18)):null,_0x23b736=_0x5f16b6[_0x4570b9(0x36d)]===_0x3a927d['username']?_0x5f16b6[_0x4570b9(0x262)]:_0x5f16b6['winnerUsername'],_0x32bffc=_0x5f16b6['winnerUsername']===_0x3a927d['username']?'Won':'Lost';return{..._0x3a927d,'lastMatch':{'date':_0x5dcaa7?_0x5dcaa7['toLocaleDateString']():'N/A','opponent':_0x23b736||'Unknown','result':_0x32bffc,'timestamp':_0x5dcaa7||new Date(0x0),'daysSinceMatch':_0x46dc75||Number['MAX_SAFE_INTEGER']}};}else return{..._0x3a927d,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x5bb19e){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x3a927d['username']+':',_0x5bb19e),{..._0x3a927d,'lastMatch':{'date':'Error','opponent':'Error','result':_0x4570b9(0x2a5),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x2ad423=await Promise['all'](_0x6d2ede);_0x2ad423['sort']((_0x50b2d7,_0x4e7b51)=>_0x4e7b51['lastMatch'][_0x11e965(0x24d)]-_0x50b2d7['lastMatch'][_0x11e965(0x24d)]);_0x30f8c4>0x0&&(_0x2ad423=_0x2ad423['filter'](_0x2d9eda=>_0x2d9eda[_0x11e965(0x29f)]['daysSinceMatch']>=_0x30f8c4));_0x50ce66[_0x11e965(0x346)]='';if(_0x2ad423['length']===0x0){_0x50ce66[_0x11e965(0x346)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x2ad423['forEach'](_0x50a642=>{const _0x5caddb=_0x11e965,_0x35f659=document[_0x5caddb(0x3e6)]('tr'),_0x5e06d7=_0x50a642['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x50a642['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x35f659[_0x5caddb(0x28a)]=_0x5e06d7,_0x35f659['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x50a642['username']+_0x5caddb(0x34c)+(_0x50a642['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x50a642['lastMatch']['date']+_0x5caddb(0x34c)+(_0x50a642[_0x5caddb(0x29f)]['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x50a642['lastMatch']['daysSinceMatch'])+_0x5caddb(0x34c)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x50a642['lastMatch']['date']===_0x5caddb(0x1d5)?'No\x20matches\x20found':_0x50a642['lastMatch']['result']+'\x20vs\x20'+_0x50a642['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x50a642['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x50ce66['appendChild'](_0x35f659);}),console['log']('Displaying\x20'+_0x2ad423['length']+'\x20inactive\x20players');}catch(_0x2ae20a){console['error']('Error\x20loading\x20inactive\x20players:',_0x2ae20a),_0x50ce66['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x2ae20a['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x11a1b3=a2_0x221182;console['log'](_0x11a1b3(0x31b));const _0x2e270c=document['getElementById']('create-match-highlight-btn');_0x2e270c&&_0x2e270c['addEventListener']('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x18c5b6=document['getElementById']('create-creator-highlight-btn');_0x18c5b6&&_0x18c5b6[_0x11a1b3(0x237)](_0x11a1b3(0x40d),function(){const _0x316cb7=_0x11a1b3;console[_0x316cb7(0x302)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x42dad9=document['getElementById']('create-achievement-highlight-btn');_0x42dad9&&_0x42dad9['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x1eb0bc='match'){const _0x2f061d=a2_0x221182;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x1eb0bc);const _0x3784df=document['getElementById']('highlight-modal'),_0x58e4d1=document['getElementById']('highlight-form'),_0x282e30=document['getElementById'](_0x2f061d(0x23a)),_0x397e71=document[_0x2f061d(0x40f)](_0x2f061d(0x22b));if(!_0x3784df||!_0x58e4d1||!_0x282e30){console['error'](_0x2f061d(0x2a6));return;}_0x58e4d1[_0x2f061d(0x3f8)](),_0x397e71[_0x2f061d(0x2ec)]='';const _0x5e1fea=[_0x2f061d(0x3ce),'creator','achievement'],_0x2f1971=!_0x5e1fea['includes'](_0x1eb0bc);if(_0x2f1971){const _0x5cf76c=_0x1eb0bc;_0x397e71['value']=_0x5cf76c,_0x282e30['textContent']='Loading...',loadHighlightDataAdmin(_0x5cf76c);}else{const _0x5209af=_0x1eb0bc;document['getElementById']('highlight-type')['value']=_0x5209af,_0x282e30[_0x2f061d(0x2bb)]=_0x2f061d(0x2ad)+getHighlightTypeName(_0x5209af),toggleHighlightFields(_0x5209af);const _0x23517d=auth[_0x2f061d(0x37e)];_0x23517d&&document['getElementById'](_0x2f061d(0x235))&&(document['getElementById']('highlight-submitted-by')['value']=_0x23517d[_0x2f061d(0x2ea)]||_0x23517d['email']);}_0x3784df['classList']['add']('active');}function toggleHighlightFields(_0x3c6d7e){const _0xe064d3=a2_0x221182;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x3c6d7e);const _0x22a5cd=document['getElementById']('highlight-form');if(!_0x22a5cd)return;const _0x17d138=_0x22a5cd['querySelectorAll']('.form-group,\x20.form-row');_0x17d138['forEach'](_0x5cb94e=>_0x5cb94e['style']['display']='none');const _0x103ddc=document[_0xe064d3(0x40f)](_0xe064d3(0x342));if(_0x103ddc)_0x103ddc['style']['display']=_0xe064d3(0x282);const _0x518c14=[_0xe064d3(0x23c),'highlight-description-container',_0xe064d3(0x249)];_0x518c14[_0xe064d3(0x2f7)](_0x3d9286=>{const _0x200b65=_0xe064d3,_0x2d729b=document[_0x200b65(0x40f)](_0x3d9286);if(_0x2d729b)_0x2d729b['style']['display']='block';});if(_0x3c6d7e==='match'){const _0x2aec42=[_0xe064d3(0x2f3),'highlight-match-info-container',_0xe064d3(0x406),'highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x2aec42['forEach'](_0x6ae872=>{const _0x5714f9=_0xe064d3,_0x5edaad=document[_0x5714f9(0x40f)](_0x6ae872);_0x5edaad&&(_0x6ae872==='highlight-players-container'?_0x5edaad['style']['display']=_0x5714f9(0x2a4):_0x5edaad['style'][_0x5714f9(0x3c0)]=_0x5714f9(0x3db));});const _0xf3bada=document['getElementById']('highlight-video-id');if(_0xf3bada){_0xf3bada['required']=!![];const _0x28821c=_0xf3bada['previousElementSibling'];if(_0x28821c)_0x28821c['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x103ddc)_0x103ddc['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x3c6d7e==='creator'){const _0x5f5653=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x5f5653['forEach'](_0x3d57ad=>{const _0x22df81=_0xe064d3,_0xb048da=document[_0x22df81(0x40f)](_0x3d57ad);if(_0xb048da)_0xb048da[_0x22df81(0x318)][_0x22df81(0x3c0)]='block';});const _0x3c2088=document['getElementById'](_0xe064d3(0x312));if(_0x3c2088){_0x3c2088[_0xe064d3(0x293)]=![];const _0x535bbb=_0x3c2088['previousElementSibling'];if(_0x535bbb)_0x535bbb['innerHTML']=_0xe064d3(0x413);}}else{if(_0x3c6d7e==='achievement'){const _0x5a7e9c=[_0xe064d3(0x343),_0xe064d3(0x250),'highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x5a7e9c[_0xe064d3(0x2f7)](_0x2d5e9d=>{const _0x476413=_0xe064d3,_0x20f00d=document[_0x476413(0x40f)](_0x2d5e9d);if(_0x20f00d)_0x20f00d[_0x476413(0x318)]['display']='block';});const _0x11f561=document[_0xe064d3(0x40f)]('highlight-video-id');if(_0x11f561){_0x11f561['required']=![];const _0x3d1a78=_0x11f561['previousElementSibling'];if(_0x3d1a78)_0x3d1a78['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x326ecf){const _0x58d6f0=a2_0x221182;try{const _0xde3027=doc(db,'highlights',_0x326ecf),_0xf68b7b=await getDoc(_0xde3027);if(!_0xf68b7b['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x19fa02=_0xf68b7b['data'](),_0x177c6c=_0x19fa02['type']||'match';document['getElementById'](_0x58d6f0(0x23a))['textContent']='Edit\x20'+getHighlightTypeName(_0x177c6c),document['getElementById']('highlight-type')['value']=_0x177c6c,toggleHighlightFields(_0x177c6c),document['getElementById'](_0x58d6f0(0x33a))['value']=_0x19fa02['title']||'',document['getElementById']('highlight-description')[_0x58d6f0(0x2ec)]=_0x19fa02['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x19fa02['submittedBy']||'';_0x19fa02['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x19fa02['videoId'],updateHighlightVideoPreview());if(_0x177c6c===_0x58d6f0(0x3ce)){document[_0x58d6f0(0x40f)]('highlight-match-info')['value']=_0x19fa02['matchInfo']||'',document['getElementById'](_0x58d6f0(0x1d8))[_0x58d6f0(0x2ec)]=_0x19fa02['map']||'';if(_0x19fa02['matchDate']){const _0x769c97=new Date(_0x19fa02['matchDate'][_0x58d6f0(0x3f4)]*0x3e8);document['getElementById'](_0x58d6f0(0x333))['value']=_0x769c97[_0x58d6f0(0x3e7)]()['split']('T')[0x0];}document['getElementById'](_0x58d6f0(0x253))['value']=_0x19fa02['winnerName']||'',document['getElementById']('highlight-winner-score')['value']=_0x19fa02['winnerScore']||'',document['getElementById']('highlight-loser-name')[_0x58d6f0(0x2ec)]=_0x19fa02['loserName']||'',document['getElementById']('highlight-loser-score')[_0x58d6f0(0x2ec)]=_0x19fa02['loserScore']||'',document[_0x58d6f0(0x40f)]('highlight-match-link')['value']=_0x19fa02['matchLink']||'';}else{if(_0x177c6c===_0x58d6f0(0x1db))document['getElementById']('highlight-map')['value']=_0x19fa02['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x19fa02['mapCreator']||'',document['getElementById'](_0x58d6f0(0x3af))[_0x58d6f0(0x2ec)]=_0x19fa02[_0x58d6f0(0x24c)]||'',document['getElementById']('highlight-creator-image')[_0x58d6f0(0x2ec)]=_0x19fa02['creatorImageUrl']||'';else _0x177c6c==='achievement'&&(document['getElementById'](_0x58d6f0(0x2ac))['value']=_0x19fa02['achievementPlayer']||'',document[_0x58d6f0(0x40f)]('highlight-achievement-type')['value']=_0x19fa02[_0x58d6f0(0x2e9)]||'',document[_0x58d6f0(0x40f)]('highlight-achievement-details')[_0x58d6f0(0x2ec)]=_0x19fa02['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x19fa02['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0x19fa02['achievementImageUrl']||'');}}catch(_0x430693){console[_0x58d6f0(0x2cc)](_0x58d6f0(0x297),_0x430693),showNotification('Error\x20loading\x20highlight:\x20'+_0x430693['message'],'error');}}async function saveHighlight(){const _0x259c55=a2_0x221182;try{const _0x4463eb=document['getElementById']('highlight-id')?.['value']||'',_0x113552=document[_0x259c55(0x40f)](_0x259c55(0x3b1))?.[_0x259c55(0x2ec)]||'match',_0x5435e5={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document[_0x259c55(0x40f)]('highlight-description')?.[_0x259c55(0x2ec)]?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.[_0x259c55(0x33b)]()||'','videoId':document['getElementById']('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x113552};if(!_0x5435e5['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x113552==='match'){_0x5435e5['matchInfo']=document['getElementById']('highlight-match-info')?.[_0x259c55(0x2ec)]?.['trim']()||'',_0x5435e5['map']=document['getElementById'](_0x259c55(0x1d8))?.[_0x259c55(0x2ec)]?.[_0x259c55(0x33b)]()||'';const _0x1ce608=document['getElementById']('highlight-match-date'),_0x27e794=_0x1ce608?.['value']||'';_0x5435e5[_0x259c55(0x361)]=_0x27e794?Timestamp['fromDate'](new Date(_0x27e794)):null,_0x5435e5[_0x259c55(0x35c)]=document['getElementById'](_0x259c55(0x253))?.['value']?.['trim']()||'',_0x5435e5['winnerScore']=document[_0x259c55(0x40f)](_0x259c55(0x35a))?.[_0x259c55(0x2ec)]?.['trim']()||'',_0x5435e5[_0x259c55(0x1e0)]=document['getElementById']('highlight-loser-name')?.[_0x259c55(0x2ec)]?.['trim']()||'',_0x5435e5[_0x259c55(0x3e9)]=document[_0x259c55(0x40f)]('highlight-loser-score')?.[_0x259c55(0x2ec)]?.['trim']()||'',_0x5435e5[_0x259c55(0x349)]=document['getElementById'](_0x259c55(0x21a))?.[_0x259c55(0x2ec)]?.[_0x259c55(0x33b)]()||'';if(!_0x5435e5['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights',_0x259c55(0x2cc));return;}}else{if(_0x113552==='creator'){_0x5435e5['map']=document['getElementById']('highlight-map')?.['value']?.[_0x259c55(0x33b)]()||'',_0x5435e5['mapCreator']=document['getElementById']('highlight-map-creator')?.[_0x259c55(0x2ec)]?.['trim']()||'',_0x5435e5['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x5435e5[_0x259c55(0x407)]=document[_0x259c55(0x40f)]('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x5435e5['mapCreator']){showNotification(_0x259c55(0x21b),_0x259c55(0x2cc));return;}}else{if(_0x113552===_0x259c55(0x3b0)){_0x5435e5['achievementPlayer']=document['getElementById']('highlight-achievement-player')?.['value']?.[_0x259c55(0x33b)]()||'',_0x5435e5['achievementType']=document['getElementById'](_0x259c55(0x365))?.['value']?.[_0x259c55(0x33b)]()||'',_0x5435e5['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.['trim']()||'',_0x5435e5['playerProfileUrl']=document['getElementById'](_0x259c55(0x288))?.[_0x259c55(0x2ec)]?.[_0x259c55(0x33b)]()||'',_0x5435e5['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x5435e5[_0x259c55(0x31a)]){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x4463eb?(_0x5435e5['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x259c55(0x28b),_0x4463eb),_0x5435e5),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x5435e5[_0x259c55(0x32a)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x5435e5),showNotification('Highlight\x20created\x20successfully!',_0x259c55(0x213))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x6f1a06){console['error']('Error\x20saving\x20highlight:',_0x6f1a06),showNotification('Error\x20saving\x20highlight:\x20'+_0x6f1a06['message'],_0x259c55(0x2cc));}}function closeHighlightModal(){const _0x5b3348=document['getElementById']('highlight-modal');if(_0x5b3348)_0x5b3348['classList']['remove']('active');}function getHighlightTypeName(_0x7695e1){const _0x196d6b=a2_0x221182;switch(_0x7695e1){case _0x196d6b(0x3ce):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x50615a=a2_0x221182,_0xaea2cc=document['getElementById'](_0x50615a(0x312)),_0x2506db=document['getElementById']('highlight-video-preview-container'),_0x1fafc3=document['getElementById']('highlight-video-preview');if(!_0xaea2cc||!_0x1fafc3||!_0x2506db)return;const _0x2f765c=_0xaea2cc['value'][_0x50615a(0x33b)]();_0x2f765c&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x2f765c)?(_0x1fafc3['src']='https://www.youtube.com/embed/'+_0x2f765c,_0x2506db['style']['display']='block'):(_0x1fafc3['src']='',_0x2506db['style']['display']=_0x50615a(0x282));}async function loadHighlightsAdmin(){const _0x44d9d9=a2_0x221182,_0x96ddc8=document[_0x44d9d9(0x40f)](_0x44d9d9(0x266));if(!_0x96ddc8)return;_0x96ddc8['innerHTML']=_0x44d9d9(0x417);try{const _0x46ad04=query(collection(db,'highlights'),orderBy(_0x44d9d9(0x32a),'desc')),_0x351f81=await getDocs(_0x46ad04);if(_0x351f81[_0x44d9d9(0x2d0)]){_0x96ddc8[_0x44d9d9(0x346)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x96ddc8['innerHTML']='',_0x351f81['forEach'](_0x55a9ca=>{const _0x15aa2c=_0x44d9d9,_0x21466e=_0x55a9ca[_0x15aa2c(0x3f2)](),_0x461385=document['createElement']('tr'),_0x49ffab=_0x21466e['createdAt']?new Date(_0x21466e['createdAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';let _0x61af15='Unknown',_0x5dcec4='';switch(_0x21466e['type']){case'match':_0x61af15=_0x15aa2c(0x339),_0x5dcec4='match-type';break;case'creator':_0x61af15='Creator',_0x5dcec4=_0x15aa2c(0x2d2);break;case'achievement':_0x61af15='Achievement',_0x5dcec4='achievement-type';break;}_0x461385[_0x15aa2c(0x346)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x21466e['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x5dcec4+'\x22>'+_0x61af15+_0x15aa2c(0x220)+_0x49ffab+_0x15aa2c(0x34c)+(_0x21466e['submittedBy']||'Unknown')+_0x15aa2c(0x34c)+(_0x21466e['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x55a9ca['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x55a9ca['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x96ddc8['appendChild'](_0x461385);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x3afb0d=>{const _0xca59f=_0x44d9d9;_0x3afb0d[_0xca59f(0x237)]('click',_0x66bb4a=>{const _0x58a73b=_0xca59f;openHighlightModal(_0x66bb4a['currentTarget'][_0x58a73b(0x1c7)]['id']);});}),document[_0x44d9d9(0x30e)](_0x44d9d9(0x29e))[_0x44d9d9(0x2f7)](_0x4cab2d=>{const _0x452c86=_0x44d9d9;_0x4cab2d[_0x452c86(0x237)]('click',_0x46cc26=>{confirmDeleteHighlight(_0x46cc26['currentTarget']['dataset']['id']);});});}catch(_0xc98347){console['error']('Error\x20loading\x20highlights:',_0xc98347),_0x96ddc8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0xc98347['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x189878){const _0x43d0cb=a2_0x221182;if(confirm(_0x43d0cb(0x403)))try{await deleteDoc(doc(db,'highlights',_0x189878)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x59493b){console[_0x43d0cb(0x2cc)](_0x43d0cb(0x1cb),_0x59493b),showNotification('Error\x20deleting\x20highlight:\x20'+_0x59493b['message'],'error');}}function setupCreateTestMatchModal(){const _0x6a9ec5=a2_0x221182;console[_0x6a9ec5(0x302)](_0x6a9ec5(0x215));const _0x1f53ab=document[_0x6a9ec5(0x40f)]('create-test-match-modal'),_0x2debeb=document[_0x6a9ec5(0x40f)]('create-test-match-form');if(!_0x1f53ab){console[_0x6a9ec5(0x2cc)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x2debeb){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x62e531=_0x1f53ab[_0x6a9ec5(0x348)](!![]);_0x1f53ab['parentNode']['replaceChild'](_0x62e531,_0x1f53ab);const _0x40572e=_0x62e531['querySelector'](_0x6a9ec5(0x231));_0x62e531['addEventListener']('click',function(_0x585849){const _0x4c1b51=_0x6a9ec5;_0x585849[_0x4c1b51(0x3ae)]===_0x62e531&&(console['log'](_0x4c1b51(0x246)),closeCreateTestMatchModal());});const _0x37e8bc=_0x62e531['querySelector'](_0x6a9ec5(0x33e));_0x37e8bc&&_0x37e8bc['addEventListener']('click',function(_0x18671b){_0x18671b['preventDefault'](),_0x18671b['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0xec038b=_0x62e531[_0x6a9ec5(0x374)]('#cancel-create-test-match-btn');_0xec038b&&_0xec038b['addEventListener']('click',function(_0x4b629c){const _0x4a4ad8=_0x6a9ec5;_0x4b629c['preventDefault'](),_0x4b629c['stopPropagation'](),console[_0x4a4ad8(0x302)](_0x4a4ad8(0x20d)),closeCreateTestMatchModal();});if(_0x40572e){_0x40572e['addEventListener'](_0x6a9ec5(0x2e0),function(_0xf4db0b){_0xf4db0b['preventDefault'](),_0xf4db0b['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x54a0c2=_0x40572e['querySelector'](_0x6a9ec5(0x2cb));_0x54a0c2&&_0x54a0c2[_0x6a9ec5(0x237)]('click',function(_0x3b8536){const _0x3680ec=_0x6a9ec5;_0x3b8536[_0x3680ec(0x1f6)](),_0x3b8536['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log'](_0x6a9ec5(0x1ff));}function setupManageHighlightsSection(){const _0x3e9c60=a2_0x221182;console[_0x3e9c60(0x302)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x5c47e7=document['getElementById'](_0x3e9c60(0x1f8));_0x5c47e7&&_0x5c47e7['addEventListener']('submit',_0x1924ca=>{_0x1924ca['preventDefault'](),saveHighlight();});const _0x34c6d2=document['getElementById']('cancel-highlight-btn');_0x34c6d2&&_0x34c6d2['addEventListener']('click',closeHighlightModal);const _0x33c3b2=document[_0x3e9c60(0x374)]('#highlight-modal\x20.close-btn');_0x33c3b2&&_0x33c3b2['addEventListener']('click',closeHighlightModal);const _0x489b6a=document['getElementById']('highlight-modal');_0x489b6a&&_0x489b6a[_0x3e9c60(0x237)](_0x3e9c60(0x40d),_0x40da5e=>{const _0x2ae43d=_0x3e9c60;_0x40da5e[_0x2ae43d(0x3ae)]===_0x489b6a&&closeHighlightModal();});const _0x2fc3a1=document['getElementById']('highlight-video-id');_0x2fc3a1&&_0x2fc3a1[_0x3e9c60(0x237)](_0x3e9c60(0x3f5),()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x3086f1=a2_0x221182;console['log'](_0x3086f1(0x329));const _0x50003e=document[_0x3086f1(0x40f)]('matches-prev-page'),_0x596b37=document['getElementById'](_0x3086f1(0x3bb));_0x50003e&&_0x50003e[_0x3086f1(0x237)]('click',()=>{const _0x349c1f=_0x3086f1,_0x120a95=currentLadder[_0x349c1f(0x3cc)]();loadMatchesData(matchesPagination[_0x120a95][_0x349c1f(0x218)]-0x1);});_0x596b37&&_0x596b37['addEventListener']('click',()=>{const _0x548605=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x548605]['page']+0x1);});const _0x15a7c8=document['getElementById']('apply-matches-filters'),_0x5858a8=document[_0x3086f1(0x40f)](_0x3086f1(0x280));_0x15a7c8&&_0x15a7c8[_0x3086f1(0x237)](_0x3086f1(0x40d),applyMatchesFilters);_0x5858a8&&_0x5858a8['addEventListener']('click',resetMatchesFilters);const _0x36699e=document['getElementById']('matches-search');_0x36699e&&_0x36699e[_0x3086f1(0x237)](_0x3086f1(0x3f5),debounce(filterMatchesTable,0x12c));const _0x4414cd=document[_0x3086f1(0x40f)](_0x3086f1(0x332));_0x4414cd&&_0x4414cd[_0x3086f1(0x237)](_0x3086f1(0x40d),openResimulateModal);const _0x1eabb0=document[_0x3086f1(0x40f)](_0x3086f1(0x206));if(_0x1eabb0){const _0xbd1d29=_0x1eabb0['querySelector'](_0x3086f1(0x20e));_0xbd1d29&&_0xbd1d29[_0x3086f1(0x237)]('click',closeResimulateModal),_0x1eabb0['addEventListener'](_0x3086f1(0x40d),_0x83e774=>{const _0x1148ed=_0x3086f1;_0x83e774[_0x1148ed(0x3ae)]===_0x1eabb0&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x3086f1(0x366));}function openCreateTestMatchModal(){const _0x25e316=a2_0x221182;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x170d8d=document[_0x25e316(0x40f)](_0x25e316(0x355)),_0x4cec93=document['getElementById']('create-test-match-form');if(!_0x170d8d){console[_0x25e316(0x2cc)](_0x25e316(0x2d1)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x4cec93){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x25e316(0x338),'error');return;}_0x4cec93['reset']();const _0x552f9c=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x283764=![];_0x552f9c['forEach'](_0x14a3d0=>{const _0x557b8c=_0x25e316;console['log'](_0x557b8c(0x1ec),_0x14a3d0[_0x557b8c(0x2ec)]),_0x14a3d0['value']===currentLadder&&(_0x14a3d0['checked']=!![],_0x283764=!![],console[_0x557b8c(0x302)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x283764){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x5cef57=document[_0x25e316(0x374)](_0x25e316(0x384));_0x5cef57&&(_0x5cef57[_0x25e316(0x381)]=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x4eedf2=document[_0x25e316(0x40f)]('test-match-date');if(_0x4eedf2){const _0x11cd02=new Date()['toISOString']()['split']('T')[0x0];_0x4eedf2[_0x25e316(0x2ec)]=_0x11cd02;}_0x170d8d[_0x25e316(0x318)]['display']='flex',_0x170d8d['style']['visibility']='visible',_0x170d8d['style'][_0x25e316(0x2b4)]='1',_0x170d8d['classList'][_0x25e316(0x1f7)]('active'),console['log'](_0x25e316(0x1fe));const _0x3e99e2=document[_0x25e316(0x40f)]('test-match-winner-username');_0x3e99e2&&setTimeout(()=>{_0x3e99e2['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x18680c=a2_0x221182;console[_0x18680c(0x302)]('Closing\x20create\x20test\x20match\x20modal');const _0x4f29ce=document['getElementById']('create-test-match-modal');if(!_0x4f29ce){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x4f29ce[_0x18680c(0x357)]['remove']('active'),_0x4f29ce['style']['opacity']='0',_0x4f29ce['style']['visibility']='hidden',setTimeout(()=>{const _0x4c7e5e=_0x18680c;!_0x4f29ce['classList'][_0x4c7e5e(0x30c)](_0x4c7e5e(0x3d6))&&(_0x4f29ce[_0x4c7e5e(0x318)]['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x141068=a2_0x221182;console['log'](_0x141068(0x24b));try{const _0x132fcf=auth['currentUser'];if(!_0x132fcf){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x3e4c4c='D1',_0x1eb84f='approvedMatches',_0x575084={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x141068(0x27a),'loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x141068(0x3d5),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x141068(0x411)](new Date()),'approvedBy':_0x132fcf['email'],'createdAt':serverTimestamp(),'createdBy':_0x132fcf['email'],'isTestMatch':!![],'ladder':_0x3e4c4c,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x132fcf[_0x141068(0x305)]};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x1eb84f),_0x575084),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x165919){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x165919),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x165919[_0x141068(0x35e)],'error');}}window['testFirebaseConnection']=async function(){const _0x4f9193=a2_0x221182;try{console['log'](_0x4f9193(0x2e2)),console['log']('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x2e6aa3=collection(db,'players');console[_0x4f9193(0x302)](_0x4f9193(0x38e),_0x2e6aa3);const _0x3f4933=query(_0x2e6aa3,where('username','==','nonexistent'));console[_0x4f9193(0x302)]('Query\x20created:',_0x3f4933);const _0x353bf8=await getDocs(_0x3f4933);console['log']('Query\x20executed.\x20Empty:',_0x353bf8['empty']),console[_0x4f9193(0x302)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x4cc3c2){console[_0x4f9193(0x2cc)]('Firebase\x20connection\x20test\x20failed:',_0x4cc3c2);}};function setupCreateTestMatchButton(){const _0x26b161=a2_0x221182,_0x5ca6d3=document['getElementById']('create-test-match-btn');if(!_0x5ca6d3){console[_0x26b161(0x2cc)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console[_0x26b161(0x302)]('Setting\x20up\x20create\x20test\x20match\x20button');const _0x41422e=_0x5ca6d3['cloneNode'](!![]);_0x5ca6d3['parentNode'][_0x26b161(0x360)](_0x41422e,_0x5ca6d3),_0x41422e[_0x26b161(0x237)]('click',function(_0x9a4097){const _0x20f06a=_0x26b161;_0x9a4097['preventDefault'](),_0x9a4097[_0x20f06a(0x2f5)](),console[_0x20f06a(0x302)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x26b161(0x302)](_0x26b161(0x35b));}async function loadMatchesData(_0x21dc23=0x1){const _0x542c26=a2_0x221182,_0x2bc148=document['getElementById']('matches-table-body');if(!_0x2bc148)return;_0x2bc148['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x58c14f=currentLadder['toLowerCase'](),_0x4f3d03=matchesPagination[_0x58c14f],_0x4c8aef=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x542c26(0x279),_0x28494a=collection(db,_0x4c8aef);_0x21dc23<=0x1?(_0x4f3d03['page']=0x1,_0x4f3d03[_0x542c26(0x3c9)]=null,_0x4f3d03['lastVisible']=null):_0x4f3d03['page']=_0x21dc23;const _0x4bbb2a=getMatchesFilters();let _0x43aa56=_0x28494a;if(_0x4bbb2a[_0x542c26(0x1ca)]||_0x4bbb2a['endDate']||_0x4bbb2a[_0x542c26(0x216)]){let _0x2de020=[];_0x4bbb2a[_0x542c26(0x1ca)]&&_0x4bbb2a['endDate']?(_0x2de020[_0x542c26(0x323)](where('approvedAt','>=',_0x4bbb2a['startDate']),where('approvedAt','<=',_0x4bbb2a['endDate'])),_0x43aa56=query(_0x28494a,..._0x2de020)):_0x43aa56=query(_0x28494a,orderBy('approvedAt',_0x542c26(0x263)));}else _0x43aa56=query(_0x28494a,orderBy('approvedAt',_0x542c26(0x263)));_0x21dc23>0x1&&_0x4f3d03[_0x542c26(0x2aa)]?_0x43aa56=query(_0x43aa56,startAfter(_0x4f3d03['lastVisible']),limit(PAGE_SIZE)):_0x43aa56=query(_0x43aa56,limit(PAGE_SIZE));const _0x2342c6=await getDocs(_0x43aa56);!_0x2342c6['empty']&&(_0x4f3d03['firstVisible']=_0x2342c6['docs'][0x0],_0x4f3d03['lastVisible']=_0x2342c6['docs'][_0x2342c6['docs'][_0x542c26(0x208)]-0x1]);let _0x498e90=![];if(!_0x2342c6['empty']){const _0x58c2a0=query(_0x43aa56,startAfter(_0x4f3d03['lastVisible']),limit(0x1)),_0x70cd53=await getDocs(_0x58c2a0);_0x498e90=!_0x70cd53[_0x542c26(0x2d0)];}const _0x100e6f=document['getElementById']('matches-prev-page'),_0x83c73c=document['getElementById']('matches-next-page'),_0x152b45=document['getElementById']('matches-page-indicator');if(_0x100e6f)_0x100e6f['disabled']=_0x4f3d03['page']<=0x1;if(_0x83c73c)_0x83c73c['disabled']=!_0x498e90;if(_0x152b45)_0x152b45[_0x542c26(0x2bb)]=_0x542c26(0x252)+_0x4f3d03['page'];if(_0x2342c6['empty']){_0x2bc148[_0x542c26(0x346)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x2bc148['innerHTML']='',_0x2342c6['forEach'](_0x51c5f5=>{const _0x2dd6cd=_0x542c26,_0x1cdfc9=_0x51c5f5['data'](),_0x563e01=document['createElement']('tr'),_0x188c54=_0x1cdfc9['approvedAt']?new Date(_0x1cdfc9[_0x2dd6cd(0x1ed)][_0x2dd6cd(0x3f4)]*0x3e8)['toLocaleDateString']():'N/A';_0x563e01['setAttribute']('data-id',_0x51c5f5['id']),_0x563e01['setAttribute'](_0x2dd6cd(0x37d),currentLadder),_0x563e01['classList']['add'](_0x2dd6cd(0x354)),_0x563e01[_0x2dd6cd(0x346)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x188c54+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x1cdfc9['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x1cdfc9['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x1cdfc9['winnerScore']||0x0)+'\x20-\x20'+(_0x1cdfc9['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x1cdfc9['mapPlayed']||_0x2dd6cd(0x404))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x2dd6cd(0x203)+_0x51c5f5['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x51c5f5['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2bc148['appendChild'](_0x563e01);}),setupMatchesActionButtons(),_0x4bbb2a['searchTerm']&&filterMatchesTable(),console['log'](_0x542c26(0x3f9)+_0x2342c6[_0x542c26(0x25a)]+_0x542c26(0x32b)+currentLadder+'\x20ladder,\x20page\x20'+_0x4f3d03['page']);}catch(_0x1b98b4){console['error'](_0x542c26(0x1dd),_0x1b98b4),_0x2bc148['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x1b98b4['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x28a8fc,_0x333157){const _0xe44dea=a2_0x221182;try{console[_0xe44dea(0x302)]('Deleting\x20match\x20'+_0x28a8fc+'\x20from\x20'+_0x333157+'\x20ladder');const _0x2c222a=auth['currentUser'];if(!_0x2c222a){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x3b4ecf=_0x333157==='D1'?'approvedMatches':_0x333157==='D2'?_0xe44dea(0x375):_0xe44dea(0x279);console[_0xe44dea(0x302)]('Using\x20collection:\x20'+_0x3b4ecf),showNotification('Deleting\x20match...',_0xe44dea(0x242)),await deleteDoc(doc(db,_0x3b4ecf,_0x28a8fc)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully',_0xe44dea(0x213));const _0x23420e=_0x333157['toLowerCase']();loadMatchesData(matchesPagination[_0x23420e]['page']);}catch(_0x1a9939){console[_0xe44dea(0x2cc)](_0xe44dea(0x3d3),_0x1a9939),showNotification(_0xe44dea(0x328)+_0x1a9939['message'],'error');}}function setupMatchesActionButtons(){const _0x49da28=a2_0x221182;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document[_0x49da28(0x30e)]('.edit-match-btn')[_0x49da28(0x2f7)](_0xe3c2a2=>{const _0x5df36e=_0x49da28;_0xe3c2a2['addEventListener'](_0x5df36e(0x40d),_0x52860c=>{const _0x414460=_0x5df36e;_0x52860c['preventDefault'](),_0x52860c['stopPropagation']();const _0x36e96e=_0x52860c[_0x414460(0x3a0)][_0x414460(0x1c7)]['id'],_0x5f3d66=_0x52860c[_0x414460(0x3a0)]['closest']('tr'),_0x260b7b=_0x5f3d66[_0x414460(0x1c7)]['ladder'];console['log']('Edit\x20match\x20clicked:',_0x36e96e,_0x260b7b),openEditMatchModal(_0x36e96e,_0x260b7b);});}),document[_0x49da28(0x30e)]('.delete-match-btn')[_0x49da28(0x2f7)](_0x516523=>{const _0x390d13=_0x49da28;_0x516523['addEventListener'](_0x390d13(0x40d),_0xb93979=>{const _0xcf77cb=_0x390d13;_0xb93979['preventDefault'](),_0xb93979['stopPropagation']();const _0x143cd5=_0xb93979['currentTarget']['dataset']['id'],_0x540f51=_0xb93979['currentTarget'][_0xcf77cb(0x326)]('tr'),_0x5651fb=_0x540f51[_0xcf77cb(0x1c7)]['ladder']||currentLadder;console[_0xcf77cb(0x302)](_0xcf77cb(0x274),_0x143cd5,_0x5651fb),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x143cd5,_0x5651fb);});}),console['log'](_0x49da28(0x23f));}function filterMatchesTable(){const _0x2758fc=a2_0x221182,_0x399740=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x108e26=document[_0x2758fc(0x30e)]('#matches-table-body\x20tr');let _0x5aa215=0x0;_0x108e26['forEach'](_0x5ce30d=>{const _0x33fae7=_0x2758fc;if(_0x5ce30d['classList']['contains'](_0x33fae7(0x3cf))||_0x5ce30d['classList'][_0x33fae7(0x30c)](_0x33fae7(0x2c7))||_0x5ce30d['classList'][_0x33fae7(0x30c)](_0x33fae7(0x1d6)))return;const _0xe2bdc0=_0x5ce30d['cells'][0x1][_0x33fae7(0x2bb)][_0x33fae7(0x3cc)](),_0x5ef385=_0x5ce30d['cells'][0x2]['textContent']['toLowerCase'](),_0x4f41cf=_0x5ce30d[_0x33fae7(0x204)][0x4]['textContent']['toLowerCase']();_0xe2bdc0[_0x33fae7(0x2d3)](_0x399740)||_0x5ef385[_0x33fae7(0x2d3)](_0x399740)||_0x4f41cf[_0x33fae7(0x2d3)](_0x399740)?(_0x5ce30d['style']['display']='',_0x5aa215++):_0x5ce30d['style']['display']='none';});if(_0x5aa215===0x0&&_0x108e26[_0x2758fc(0x208)]>0x0){const _0x459b0a=document[_0x2758fc(0x40f)]('matches-table-body'),_0x37b54f=_0x459b0a['querySelector']('.no-results');if(!_0x37b54f){const _0x3aa2d7=document['createElement']('tr');_0x3aa2d7['className']='no-results',_0x3aa2d7['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x399740+'\x27</td>',_0x459b0a['appendChild'](_0x3aa2d7);}}else{const _0x277855=document[_0x2758fc(0x374)]('.no-results');_0x277855&&_0x277855['remove']();}}function getMatchesFilters(){const _0x54b11a=a2_0x221182,_0x326155=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x370364=document['getElementById']('matches-start-date')['value'],_0xe4afe0=document['getElementById']('matches-end-date')['value'];let _0x39ec0a=null,_0x1eb092=null;return _0x370364&&(_0x39ec0a=new Date(_0x370364),_0x39ec0a[_0x54b11a(0x40a)](0x0,0x0,0x0,0x0),_0x39ec0a=Timestamp['fromDate'](_0x39ec0a)),_0xe4afe0&&(_0x1eb092=new Date(_0xe4afe0),_0x1eb092['setHours'](0x17,0x3b,0x3b,0x3e7),_0x1eb092=Timestamp['fromDate'](_0x1eb092)),{'searchTerm':_0x326155,'startDate':_0x39ec0a,'endDate':_0x1eb092};}async function applyMatchesFilters(){const _0x3d1440=currentLadder['toLowerCase']();matchesPagination[_0x3d1440]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x31166a=a2_0x221182;document[_0x31166a(0x40f)]('matches-start-date')['value']='',document['getElementById']('matches-end-date')['value']='',document['getElementById'](_0x31166a(0x232))['value']='';const _0x38768c=currentLadder[_0x31166a(0x3cc)]();matchesPagination[_0x38768c]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x4ab52e,_0x3b3ab1){const _0x5d3d22=a2_0x221182,_0x470f0f=document['getElementById']('edit-match-modal');if(!_0x470f0f)return;try{const _0x7fcab9=_0x3b3ab1==='D1'?_0x5d3d22(0x2cf):_0x3b3ab1==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1c7d76=doc(db,_0x7fcab9,_0x4ab52e),_0x210ad3=await getDoc(_0x1c7d76);if(!_0x210ad3['exists']()){showNotification(_0x5d3d22(0x201),'error');return;}const _0x2531ab=_0x210ad3['data']();document[_0x5d3d22(0x40f)]('edit-match-id')[_0x5d3d22(0x2ec)]=_0x4ab52e,document['getElementById']('edit-match-ladder')[_0x5d3d22(0x2ec)]=_0x3b3ab1,document['getElementById']('edit-match-winner')[_0x5d3d22(0x2ec)]=_0x2531ab[_0x5d3d22(0x36d)]||'',document['getElementById']('edit-match-winner-score')['value']=_0x2531ab['winnerScore']||0x0,document[_0x5d3d22(0x40f)]('edit-match-winner-suicides')['value']=_0x2531ab['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x2531ab['winnerComment']||'',document[_0x5d3d22(0x40f)]('edit-match-loser')[_0x5d3d22(0x2ec)]=_0x2531ab['loserUsername']||'',document['getElementById'](_0x5d3d22(0x1e8))[_0x5d3d22(0x2ec)]=_0x2531ab['loserScore']||0x0,document[_0x5d3d22(0x40f)]('edit-match-loser-suicides')[_0x5d3d22(0x2ec)]=_0x2531ab['loserSuicides']||0x0,document[_0x5d3d22(0x40f)](_0x5d3d22(0x285))['value']=_0x2531ab['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x2531ab[_0x5d3d22(0x31c)]||'',document[_0x5d3d22(0x40f)]('edit-match-winner-demo')[_0x5d3d22(0x2ec)]=_0x2531ab[_0x5d3d22(0x289)]||'',document['getElementById']('edit-match-loser-demo')['value']=_0x2531ab['loserDemoLink']||_0x2531ab['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x2531ab['winnerUsername']+_0x5d3d22(0x2ff)+_0x2531ab[_0x5d3d22(0x262)],_0x470f0f['classList']['add']('active');}catch(_0x74f891){console['error'](_0x5d3d22(0x1df),_0x74f891),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x163d2f=a2_0x221182,_0x3bd77a=document['getElementById']('edit-match-modal');_0x3bd77a&&_0x3bd77a[_0x163d2f(0x357)][_0x163d2f(0x21f)](_0x163d2f(0x3d6));}async function saveEditedMatch(){const _0x5cc93e=a2_0x221182;try{const _0x1c2e35=document['getElementById'](_0x5cc93e(0x1d4))['value'],_0x5e3ec8=document[_0x5cc93e(0x40f)]('edit-match-ladder')['value'];if(!_0x1c2e35||!_0x5e3ec8){showNotification(_0x5cc93e(0x36c),'error');return;}const _0x50bdce=_0x5e3ec8==='D1'?'approvedMatches':_0x5e3ec8==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0xac56ee=document['getElementById']('edit-match-winner')[_0x5cc93e(0x2ec)]['trim'](),_0x2c1733=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x6fbcfb=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x195dd9=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x115bfc=document['getElementById']('edit-match-loser')[_0x5cc93e(0x2ec)]['trim'](),_0x74537d=parseInt(document[_0x5cc93e(0x40f)](_0x5cc93e(0x1e8))['value']),_0x4855c1=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x5cd84=document['getElementById']('edit-match-loser-comment')['value'][_0x5cc93e(0x33b)](),_0x548893=document['getElementById']('edit-match-map')[_0x5cc93e(0x2ec)]['trim'](),_0x97d6af=document[_0x5cc93e(0x40f)](_0x5cc93e(0x20b))['value']['trim'](),_0x303b86=document[_0x5cc93e(0x40f)]('edit-match-loser-demo')['value']['trim']();if(!_0xac56ee||!_0x115bfc){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0x5cc93e(0x2cc));return;}await updateDoc(doc(db,_0x50bdce,_0x1c2e35),{'winnerUsername':_0xac56ee,'winnerScore':_0x2c1733,'winnerSuicides':_0x6fbcfb,'winnerComment':_0x195dd9,'loserUsername':_0x115bfc,'loserScore':_0x74537d,'loserSuicides':_0x4855c1,'loserComment':_0x5cd84,'mapPlayed':_0x548893,'winnerDemoLink':_0x97d6af||null,'loserDemoLink':_0x303b86||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully',_0x5cc93e(0x213)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x5e3ec8['toLowerCase']()]['page']);}catch(_0xa3adab){console['error']('Error\x20saving\x20match:',_0xa3adab),showNotification('Failed\x20to\x20save\x20match:\x20'+_0xa3adab['message'],'error');}}async function openDeleteMatchModal(_0x271e3b,_0x548a83){const _0x369645=a2_0x221182;try{const _0x254c4e=_0x548a83==='D1'?'approvedMatches':_0x548a83==='D2'?'approvedMatchesD2':_0x369645(0x279),_0x257a49=doc(db,_0x254c4e,_0x271e3b),_0x430cf5=await getDoc(_0x257a49);if(!_0x430cf5['exists']()){showNotification('Match\x20not\x20found',_0x369645(0x2cc));return;}const _0x28e803=_0x430cf5['data'](),_0x2d70e6=document['getElementById']('delete-match-confirm-modal');_0x2d70e6['dataset']['matchId']=_0x271e3b,_0x2d70e6['dataset']['ladder']=_0x548a83;const _0x8c80d3=_0x28e803['approvedAt']?new Date(_0x28e803['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x106ea3=document['getElementById'](_0x369645(0x3d7));_0x106ea3['innerHTML']=_0x369645(0x315)+_0x8c80d3+_0x369645(0x2c2)+_0x28e803['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x28e803[_0x369645(0x262)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x28e803[_0x369645(0x29a)]||0x0)+'\x20-\x20'+(_0x28e803['loserScore']||0x0)+_0x369645(0x2c1)+(_0x28e803[_0x369645(0x31c)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x548a83+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2d70e6['classList']['add']('active');}catch(_0x261074){console[_0x369645(0x2cc)](_0x369645(0x3ba),_0x261074),showNotification(_0x369645(0x27e),'error');}}function closeDeleteMatchModal(){const _0x145c91=a2_0x221182,_0x1ccee7=document['getElementById']('delete-match-confirm-modal');_0x1ccee7&&(_0x1ccee7[_0x145c91(0x357)][_0x145c91(0x21f)]('active'),_0x1ccee7[_0x145c91(0x364)]('data-match-id'),_0x1ccee7['removeAttribute'](_0x145c91(0x37d)));}async function confirmDeleteMatch(){const _0x1b2a98=a2_0x221182,_0x6d436c=document[_0x1b2a98(0x40f)]('delete-match-confirm-modal'),_0x25abc0=_0x6d436c['dataset']['matchId'],_0x332231=_0x6d436c['dataset']['ladder'];if(!_0x25abc0||!_0x332231){showNotification(_0x1b2a98(0x36c),'error'),closeDeleteMatchModal();return;}try{const _0x2aecf4=_0x332231==='D1'?'approvedMatches':_0x332231==='D2'?'approvedMatchesD2':'approvedMatchesD3';await deleteDoc(doc(db,_0x2aecf4,_0x25abc0)),showNotification(_0x1b2a98(0x33f),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x332231[_0x1b2a98(0x3cc)]()]['page']);}catch(_0x527129){console['error']('Error\x20deleting\x20match:',_0x527129),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x527129['message'],'error');}}async function saveHighlightChanges(){const _0x42961d=a2_0x221182,_0x234872=document['getElementById'](_0x42961d(0x3a9))['value'],_0x1fd472=document[_0x42961d(0x40f)]('edit-highlight-type-select')['value'];let _0x10d154={'title':document['getElementById'](_0x42961d(0x1f0))['value'][_0x42961d(0x33b)](),'type':_0x1fd472,'description':document['getElementById'](_0x42961d(0x1ee))['value']['trim'](),'videoId':document['getElementById'](_0x42961d(0x287))['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x1fd472==='match'){_0x10d154[_0x42961d(0x1f1)]=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x10d154[_0x42961d(0x2b5)]=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0x2f08e7=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x10d154['matchDate']=_0x2f08e7?Timestamp['fromDate'](new Date(_0x2f08e7)):null,_0x10d154[_0x42961d(0x35c)]=document['getElementById']('edit-highlight-winnerName-input')[_0x42961d(0x2ec)]['trim'](),_0x10d154['winnerScore']=document['getElementById'](_0x42961d(0x322))['value']['trim'](),_0x10d154['loserName']=document[_0x42961d(0x40f)]('edit-highlight-loserName-input')['value']['trim'](),_0x10d154['loserScore']=document['getElementById'](_0x42961d(0x2e4))[_0x42961d(0x2ec)]['trim'](),_0x10d154['matchLink']=document[_0x42961d(0x40f)]('edit-highlight-matchLink-input')['value'][_0x42961d(0x33b)](),_0x10d154['mapCreator']=null,_0x10d154['mapVersion']=null,_0x10d154['creatorImageUrl']=null,_0x10d154['achievementPlayer']=null,_0x10d154['achievementType']=null,_0x10d154[_0x42961d(0x3cd)]=null,_0x10d154[_0x42961d(0x1fb)]=null;}else{if(_0x1fd472===_0x42961d(0x1db))_0x10d154['map']=document[_0x42961d(0x40f)]('edit-highlight-map-input')[_0x42961d(0x2ec)][_0x42961d(0x33b)](),_0x10d154['mapCreator']=document['getElementById'](_0x42961d(0x3eb))[_0x42961d(0x2ec)]['trim'](),_0x10d154['mapVersion']=document[_0x42961d(0x40f)](_0x42961d(0x345))['value'][_0x42961d(0x33b)](),_0x10d154['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x10d154['matchInfo']=null,_0x10d154[_0x42961d(0x361)]=null,_0x10d154['winnerName']=null,_0x10d154['winnerScore']=null,_0x10d154[_0x42961d(0x1e0)]=null,_0x10d154[_0x42961d(0x3e9)]=null,_0x10d154['matchLink']=null,_0x10d154['achievementPlayer']=null,_0x10d154['achievementType']=null,_0x10d154['achievementDetails']=null,_0x10d154['playerProfileUrl']=null;else _0x1fd472==='achievement'&&(_0x10d154['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x10d154['achievementType']=document[_0x42961d(0x40f)]('edit-highlight-achievementType-input')['value'][_0x42961d(0x33b)](),_0x10d154[_0x42961d(0x3cd)]=document['getElementById']('edit-highlight-achievementDetails-input')[_0x42961d(0x2ec)]['trim'](),_0x10d154['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value'][_0x42961d(0x33b)](),_0x10d154['matchInfo']=null,_0x10d154['map']=null,_0x10d154['matchDate']=null,_0x10d154[_0x42961d(0x35c)]=null,_0x10d154['winnerScore']=null,_0x10d154['loserName']=null,_0x10d154['loserScore']=null,_0x10d154[_0x42961d(0x349)]=null,_0x10d154['mapCreator']=null,_0x10d154[_0x42961d(0x24c)]=null,_0x10d154[_0x42961d(0x407)]=null);}try{if(_0x234872){_0x10d154['updatedAt']=serverTimestamp();const _0x22490d=doc(db,'highlights',_0x234872);await updateDoc(_0x22490d,_0x10d154),showNotification(_0x42961d(0x221),_0x42961d(0x213));}else _0x10d154[_0x42961d(0x32a)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x10d154),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x1438ae){console[_0x42961d(0x2cc)]('Error\x20saving\x20highlight:',_0x1438ae),showNotification('Error\x20saving\x20highlight:\x20'+_0x1438ae['message'],'error');}}async function resimulateMatch(){const _0x5e4e27=a2_0x221182;try{const _0x4e4523=document[_0x5e4e27(0x40f)]('resimulate-match-id')['value'];if(!_0x4e4523){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x49c43e=auth[_0x5e4e27(0x37e)];if(!_0x49c43e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x43d011=currentLadder==='D1'?_0x5e4e27(0x2cf):currentLadder==='D2'?'approvedMatchesD2':_0x5e4e27(0x279),_0x3b682e=doc(db,_0x43d011,_0x4e4523),_0xc8ea5a=await getDoc(_0x3b682e);if(!_0xc8ea5a['exists']()){showNotification(_0x5e4e27(0x2ce),_0x5e4e27(0x2cc));return;}const _0x27052e=_0xc8ea5a['data'](),_0xd0f335=_0x27052e['approvedAt']?_0x27052e['approvedAt']['toDate']()['toLocaleString']():_0x27052e['matchDate']?_0x27052e['matchDate'][_0x5e4e27(0x2f4)]?_0x27052e['matchDate']['toDate']()[_0x5e4e27(0x35f)]():new Date(_0x27052e['matchDate'])[_0x5e4e27(0x35f)]():_0x5e4e27(0x2fe),_0x456803='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x27052e[_0x5e4e27(0x36d)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x27052e[_0x5e4e27(0x262)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x27052e[_0x5e4e27(0x29a)]+'-'+_0x27052e['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x27052e[_0x5e4e27(0x31c)]||_0x27052e['mapName']||_0x5e4e27(0x2fe))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0xd0f335+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x4e4523+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x5e4e27(0x39f))[_0x5e4e27(0x346)]=_0x456803,document['getElementById']('match-details-container')['style']['display']=_0x5e4e27(0x3db),document['getElementById'](_0x5e4e27(0x1f4))[_0x5e4e27(0x318)]['display']=_0x5e4e27(0x3db),window[_0x5e4e27(0x236)]={'matchId':_0x4e4523,'matchData':_0x27052e,'ladder':currentLadder},showNotification(_0x5e4e27(0x2ef),_0x5e4e27(0x242));}catch(_0x17b2ae){console['error']('Error\x20finding\x20match:',_0x17b2ae),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x17b2ae[_0x5e4e27(0x35e)],'error');}}async function confirmResimulateMatch(){const _0x195f85=a2_0x221182;try{const {matchId:_0x4c8368,matchData:_0x23526e,ladder:_0x35eee0}=window['pendingResimulateData'];if(!_0x4c8368||!_0x23526e){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x2fb077=_0x35eee0==='D1'?'players':_0x35eee0==='D2'?'playersD2':_0x195f85(0x2df),_0x1c5b23=_0x35eee0==='D1'?'eloHistory':_0x35eee0==='D2'?_0x195f85(0x410):'eloHistoryD3',[_0x1d6e41,_0x5bada8]=await Promise['all']([getDocs(query(collection(db,_0x2fb077),where(_0x195f85(0x30d),'==',_0x23526e['winnerUsername']))),getDocs(query(collection(db,_0x2fb077),where('username','==',_0x23526e['loserUsername'])))]);if(_0x1d6e41[_0x195f85(0x2d0)]||_0x5bada8['empty']){showNotification(_0x195f85(0x1dc),'error');return;}const _0x3c5f6b=_0x1d6e41['docs'][0x0]['id'],_0x3472f3=_0x5bada8['docs'][0x0]['id'],_0x5ea0ac=_0x1d6e41['docs'][0x0][_0x195f85(0x3f2)](),_0x55a943=_0x5bada8['docs'][0x0]['data'](),[_0x54e68f,_0x4e703f]=await Promise['all']([getDocs(query(collection(db,_0x1c5b23),where(_0x195f85(0x1d9),'==',_0x3c5f6b),where('matchId','==',_0x4c8368))),getDocs(query(collection(db,_0x1c5b23),where('playerId','==',_0x3472f3),where('matchId','==',_0x4c8368)))]),_0x3f5a1f=!_0x54e68f['empty'],_0x270ebb=!_0x4e703f['empty'],_0x16fa0e='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x3f5a1f?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x270ebb?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x5ea0ac['eloRating']||'Unknown')+_0x195f85(0x2f9)+(_0x55a943['eloRating']||_0x195f85(0x2fe))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x5ea0ac[_0x195f85(0x344)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x55a943[_0x195f85(0x344)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x195f85(0x2b3))[_0x195f85(0x346)]=_0x16fa0e,document[_0x195f85(0x40f)](_0x195f85(0x2b3))['style']['display']=_0x195f85(0x3db);if(_0x3f5a1f&&_0x270ebb){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x195f85(0x267),_0x195f85(0x242));const _0x25aef4=_0x23526e['approvedAt']||_0x23526e['matchDate']||serverTimestamp(),[_0x4b9e94,_0x12922e]=await Promise['all']([getPlayerEloAtTime(_0x3c5f6b,_0x25aef4,_0x1c5b23),getPlayerEloAtTime(_0x3472f3,_0x25aef4,_0x1c5b23)]),{calculateElo:_0x1a66d7}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x15c6dc,newLoserRating:_0x55d6c7}=_0x1a66d7(_0x4b9e94,_0x12922e),_0x5af5e1=_0x5ea0ac['position']||Number['MAX_SAFE_INTEGER'],_0x5d020c=_0x55a943['position']||Number[_0x195f85(0x387)];let _0x4954ea=_0x5af5e1,_0x384adc=_0x5d020c;_0x5af5e1>_0x5d020c&&(_0x4954ea=_0x5d020c,_0x384adc=_0x5d020c+0x1);const _0x120111=writeBatch(db),_0xa0d786=doc(db,_0x2fb077,_0x3c5f6b);_0x120111['update'](_0xa0d786,{'eloRating':_0x15c6dc,'position':_0x4954ea,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x7f4c4=doc(db,_0x2fb077,_0x3472f3);_0x120111[_0x195f85(0x418)](_0x7f4c4,{'eloRating':_0x55d6c7,'position':_0x384adc,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x5af5e1>_0x5d020c){const _0x39cc0b=await getDocs(query(collection(db,_0x2fb077),where(_0x195f85(0x344),'>',_0x5d020c),where(_0x195f85(0x344),'<',_0x5af5e1)));_0x39cc0b[_0x195f85(0x2f7)](_0x6be00=>{const _0x322cfd=_0x195f85,_0x33efa2=doc(db,_0x2fb077,_0x6be00['id']),_0x3a2c18=_0x6be00['data']()['position'];_0x120111['update'](_0x33efa2,{'position':_0x3a2c18+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x322cfd(0x243),'positionAdjustedAt':serverTimestamp()});});}if(!_0x3f5a1f){const _0x51c21f=doc(collection(db,_0x1c5b23));_0x120111['set'](_0x51c21f,{'playerId':_0x3c5f6b,'player':_0x23526e['winnerUsername'],'previousElo':_0x4b9e94,'newElo':_0x15c6dc,'eloChange':_0x15c6dc-_0x4b9e94,'opponentId':_0x3472f3,'opponent':_0x23526e[_0x195f85(0x262)],'matchResult':'win','previousPosition':_0x5af5e1,'newPosition':_0x4954ea,'positionChange':_0x4954ea-_0x5af5e1,'matchId':_0x4c8368,'timestamp':_0x25aef4,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x195f85(0x258)],'gameMode':_0x35eee0,'matchScore':_0x23526e[_0x195f85(0x29a)]+'-'+_0x23526e['loserScore'],'mapPlayed':_0x23526e['mapPlayed']||_0x23526e[_0x195f85(0x398)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x270ebb){const _0x35dcd9=doc(collection(db,_0x1c5b23));_0x120111['set'](_0x35dcd9,{'playerId':_0x3472f3,'player':_0x23526e['loserUsername'],'previousElo':_0x12922e,'newElo':_0x55d6c7,'eloChange':_0x55d6c7-_0x12922e,'opponentId':_0x3c5f6b,'opponent':_0x23526e['winnerUsername'],'matchResult':'loss','previousPosition':_0x5d020c,'newPosition':_0x384adc,'positionChange':_0x384adc-_0x5d020c,'matchId':_0x4c8368,'timestamp':_0x25aef4,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x195f85(0x258)],'gameMode':_0x35eee0,'matchScore':_0x23526e['winnerScore']+'-'+_0x23526e['loserScore'],'mapPlayed':_0x23526e['mapPlayed']||_0x23526e[_0x195f85(0x398)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x108b86=_0x35eee0==='D1'?'approvedMatches':_0x35eee0==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2ac83b=doc(db,_0x108b86,_0x4c8368);_0x120111['update'](_0x2ac83b,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x5ea0ac['eloRating'],'originalLoserElo':_0x55a943[_0x195f85(0x367)],'originalWinnerPosition':_0x5af5e1,'originalLoserPosition':_0x5d020c,'resimulatedWinnerElo':_0x15c6dc,'resimulatedLoserElo':_0x55d6c7,'resimulatedWinnerPosition':_0x4954ea,'resimulatedLoserPosition':_0x384adc}),await _0x120111['commit']();const _0x52218d=(!_0x3f5a1f?0x1:0x0)+(!_0x270ebb?0x1:0x0),_0x3ef7d2=_0x5af5e1!==_0x4954ea||_0x5d020c!==_0x384adc;showNotification(_0x195f85(0x3d8)+('Created\x20'+_0x52218d+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x4b9e94+'→'+_0x15c6dc+'\x20(+'+(_0x15c6dc-_0x4b9e94)+'),\x20')+(_0x195f85(0x202)+_0x12922e+'→'+_0x55d6c7+'\x20('+(_0x55d6c7-_0x12922e)+').\x20')+(''+(_0x3ef7d2?_0x195f85(0x3bd)+_0x5af5e1+'→'+_0x4954ea+',\x20Loser\x20'+_0x5d020c+'→'+_0x384adc:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x195f85(0x374)](_0x195f85(0x336))&&loadPlayersData();}catch(_0x32d351){console['error']('Error\x20resimulating\x20match:',_0x32d351),showNotification(_0x195f85(0x3ad)+_0x32d351['message'],'error');}}async function getPlayerEloAtTime(_0x27e49d,_0x1f403f,_0x3cba33){const _0x43e6a0=a2_0x221182;try{const _0x3e12fe=_0x1f403f['toDate']?_0x1f403f['toDate']():new Date(_0x1f403f),_0x521bf0=query(collection(db,_0x3cba33),where(_0x43e6a0(0x1d9),'==',_0x27e49d),where(_0x43e6a0(0x331),'<',_0x1f403f),orderBy(_0x43e6a0(0x331),'desc'),limit(0x1)),_0x1146cd=await getDocs(_0x521bf0);if(!_0x1146cd['empty']){const _0x346d87=_0x1146cd['docs'][0x0][_0x43e6a0(0x3f2)]();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x27e49d+'\x20before\x20match:\x20'+_0x346d87[_0x43e6a0(0x2f0)]),_0x346d87[_0x43e6a0(0x2f0)];}else return console['log'](_0x43e6a0(0x36a)+_0x27e49d+_0x43e6a0(0x2fc)),0x4b0;}catch(_0x12b22a){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x27e49d+':',_0x12b22a),0x4b0;}}function openResimulateModal(){const _0x4aae5a=a2_0x221182;console['log']('openResimulateModal\x20called!');const _0x398510=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x398510);if(!_0x398510){console['error']('Modal\x20element\x20not\x20found!');return;}_0x398510['style']['display']='block',_0x398510['style']['visibility']='visible',_0x398510['style'][_0x4aae5a(0x2b4)]='1',_0x398510[_0x4aae5a(0x357)]['add']('active'),console[_0x4aae5a(0x302)]('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window[_0x4aae5a(0x380)](_0x398510)['display']);const _0x34c2e1=document[_0x4aae5a(0x40f)]('match-details-container'),_0x4de406=document['getElementById'](_0x4aae5a(0x2b3)),_0x202f7b=document['getElementById']('confirm-resimulate-btn'),_0x3be48d=document['getElementById']('resimulate-match-id');if(_0x34c2e1)_0x34c2e1[_0x4aae5a(0x346)]='';if(_0x4de406)_0x4de406['innerHTML']='';if(_0x202f7b)_0x202f7b['style']['display']='none';if(_0x3be48d)_0x3be48d[_0x4aae5a(0x2ec)]='';console['log'](_0x4aae5a(0x373));}function closeResimulateModal(){document['getElementById']('resimulate-modal')['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a2_0x221182(0x3f6)]=confirmResimulateMatch,window[a2_0x221182(0x382)]=openResimulateModal,window[a2_0x221182(0x38d)]=closeResimulateModal;async function loadPointsData(){const _0x337d3d=a2_0x221182;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x337d3d(0x3a6),'success');}catch(_0x2e1611){console[_0x337d3d(0x2cc)](_0x337d3d(0x25f),_0x2e1611),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x2e1611[_0x337d3d(0x35e)],'error');}}function renderPointsOverview(_0x463b77){const _0x1188b8=a2_0x221182,_0x3e8e42=document['getElementById']('points-overview-table-body');if(!_0x3e8e42)return;if(_0x463b77['length']===0x0){_0x3e8e42['innerHTML']=_0x1188b8(0x211);return;}_0x3e8e42['innerHTML']='',_0x463b77['forEach'](_0x581df6=>{const _0xa14a83=_0x1188b8,_0x31c257=document['createElement']('tr'),_0x3ff098=_0x581df6[_0xa14a83(0x2ea)]||_0x581df6[_0xa14a83(0x30d)]||_0xa14a83(0x383),_0x5deec2=_0x581df6[_0xa14a83(0x305)]||'No\x20email',_0x2bc552=_0x581df6[_0xa14a83(0x1cd)]||0x0,_0x88e178=_0x581df6[_0xa14a83(0x330)]?new Date(_0x581df6[_0xa14a83(0x330)]['seconds']*0x3e8)[_0xa14a83(0x2dd)]():'Never';_0x31c257[_0xa14a83(0x346)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x3ff098+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5deec2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x2bc552>0x3e8?'high-points':_0x2bc552>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x2bc552[_0xa14a83(0x35f)]()+_0xa14a83(0x376)+_0x88e178+_0xa14a83(0x3ab)+_0x581df6['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x581df6['id']+_0xa14a83(0x26d),_0x3e8e42['appendChild'](_0x31c257);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x3ba17d=a2_0x221182;console['log'](_0x3ba17d(0x3b6));const _0x484207=document[_0x3ba17d(0x30e)]('.quick-edit-btn');console[_0x3ba17d(0x302)]('Found\x20'+_0x484207['length']+_0x3ba17d(0x397)),_0x484207['forEach'](_0x4b0a19=>{const _0x2f805f=_0x3ba17d,_0x444929=_0x4b0a19[_0x2f805f(0x348)](!![]);_0x4b0a19[_0x2f805f(0x27b)]['replaceChild'](_0x444929,_0x4b0a19);});const _0x5c0e2c=document['querySelectorAll']('.view-history-btn');console['log']('Found\x20'+_0x5c0e2c[_0x3ba17d(0x208)]+_0x3ba17d(0x2e1)),_0x5c0e2c['forEach'](_0x277f11=>{const _0xe96911=_0x277f11['cloneNode'](!![]);_0x277f11['parentNode']['replaceChild'](_0xe96911,_0x277f11);}),document[_0x3ba17d(0x30e)](_0x3ba17d(0x2c6))[_0x3ba17d(0x2f7)](_0x592e77=>{_0x592e77['addEventListener']('click',function(_0x110366){const _0x442373=a2_0x52ec;_0x110366[_0x442373(0x1f6)](),_0x110366['stopPropagation']();const _0x5ca52c=this['dataset']['userId'];console['log'](_0x442373(0x278),_0x5ca52c);if(!_0x5ca52c){console[_0x442373(0x2cc)](_0x442373(0x3be));return;}this['style']['opacity']=_0x442373(0x34d),setTimeout(()=>{const _0x4d702e=_0x442373;this['style'][_0x4d702e(0x2b4)]='1';},0xc8),openQuickEditModal(_0x5ca52c);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x2f5cbd=>{const _0x5dadcf=_0x3ba17d;_0x2f5cbd[_0x5dadcf(0x237)]('click',function(_0x465ce0){const _0x3b20fb=_0x5dadcf;_0x465ce0[_0x3b20fb(0x1f6)](),_0x465ce0['stopPropagation']();const _0x22187d=this['dataset'][_0x3b20fb(0x3d2)];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x22187d);if(!_0x22187d){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style'][_0x3b20fb(0x2b4)]='0.6',setTimeout(()=>{const _0x234cb1=_0x3b20fb;this[_0x234cb1(0x318)]['opacity']='1';},0xc8),loadUserPointsHistory(_0x22187d);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x2eab5f){const _0x1da777=a2_0x221182;console[_0x1da777(0x302)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x2eab5f);const _0x5ece50=document['getElementById'](_0x1da777(0x3b2));if(!_0x5ece50){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification(_0x1da777(0x3c4),_0x1da777(0x242));const _0x1547d3=doc(db,_0x1da777(0x1f9),_0x2eab5f),_0x4c888b=await getDoc(_0x1547d3);if(!_0x4c888b[_0x1da777(0x3d0)]()){showNotification('User\x20not\x20found','error');return;}const _0x95d14=_0x4c888b['data']();console['log']('User\x20data\x20loaded:',_0x95d14);const _0x1a3d2a=document[_0x1da777(0x40f)](_0x1da777(0x40c)),_0x2a4d3b=document['getElementById']('quick-edit-display-name'),_0x1e2583=document['getElementById'](_0x1da777(0x298)),_0x6f5bc9=document['getElementById']('quick-edit-current-points'),_0x32d831=document['getElementById'](_0x1da777(0x23b));if(!_0x1a3d2a||!_0x2a4d3b||!_0x1e2583||!_0x6f5bc9||!_0x32d831){console[_0x1da777(0x2cc)]('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x1da777(0x1ce),'error');return;}_0x1a3d2a['value']=_0x2eab5f,_0x2a4d3b[_0x1da777(0x2bb)]=_0x95d14['displayName']||_0x95d14[_0x1da777(0x30d)]||'Unknown\x20User',_0x1e2583['textContent']=_0x95d14['email']||'No\x20email',_0x6f5bc9['textContent']=(_0x95d14[_0x1da777(0x1cd)]||0x0)['toLocaleString'](),_0x32d831[_0x1da777(0x3f8)]();const _0x2bd3e8=document[_0x1da777(0x40f)](_0x1da777(0x21c));_0x2bd3e8&&(_0x2bd3e8[_0x1da777(0x381)]=!![]);_0x5ece50['classList']['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x18ca9f=document['getElementById']('quick-points-amount');_0x18ca9f&&setTimeout(()=>_0x18ca9f['focus'](),0x64);}catch(_0x4857d6){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x4857d6),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x4857d6['message'],'error');}}function closeQuickEditModal(){const _0x207c05=document['getElementById']('quick-edit-points-modal');_0x207c05&&_0x207c05['classList']['remove']('active');}async function handleQuickEditPoints(_0x56543f){const _0x3eb2fa=a2_0x221182;_0x56543f['preventDefault']();const _0x4a7634=document['getElementById'](_0x3eb2fa(0x40c))['value'],_0x528811=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x109d24=parseInt(document['getElementById']('quick-points-amount')[_0x3eb2fa(0x2ec)]),_0x3adafa=document[_0x3eb2fa(0x40f)](_0x3eb2fa(0x39e))[_0x3eb2fa(0x2ec)][_0x3eb2fa(0x33b)]();console[_0x3eb2fa(0x302)](_0x3eb2fa(0x2f1),{'userId':_0x4a7634,'action':_0x528811,'amount':_0x109d24,'reason':_0x3adafa});if(!_0x4a7634||!_0x109d24||_0x109d24<0x0){showNotification(_0x3eb2fa(0x20c),_0x3eb2fa(0x2cc));return;}try{await modifyUserPoints(_0x4a7634,_0x528811,_0x109d24,_0x3adafa),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console[_0x3eb2fa(0x302)]('Points\x20updated\x20successfully\x20for\x20user:',_0x4a7634);}catch(_0x26a9dc){console[_0x3eb2fa(0x2cc)]('Error\x20updating\x20points:',_0x26a9dc),showNotification(_0x3eb2fa(0x2a2)+_0x26a9dc[_0x3eb2fa(0x35e)],_0x3eb2fa(0x2cc));}}async function searchUsersForPoints(){const _0x310c4e=a2_0x221182,_0xe753df=document[_0x310c4e(0x40f)]('points-user-search')['value']['trim']()['toLowerCase'](),_0x2d7b14=document['getElementById']('user-search-results');if(!_0xe753df||_0xe753df['length']<0x2){_0x2d7b14[_0x310c4e(0x346)]='';return;}_0x2d7b14[_0x310c4e(0x346)]='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x476cfb=collection(db,'userProfiles'),_0x229d0b=await getDocs(_0x476cfb),_0x46f142=[];_0x229d0b['forEach'](_0x4c9bcc=>{const _0xf6f3d4=_0x310c4e,_0x4f841a=_0x4c9bcc[_0xf6f3d4(0x3f2)](),_0x16499f=(_0x4f841a[_0xf6f3d4(0x2ea)]||_0x4f841a['username']||'')['toLowerCase'](),_0x4f24bd=(_0x4f841a['email']||'')[_0xf6f3d4(0x3cc)]();(_0x16499f[_0xf6f3d4(0x2d3)](_0xe753df)||_0x4f24bd['includes'](_0xe753df))&&_0x46f142['push']({'id':_0x4c9bcc['id'],..._0x4f841a});});if(_0x46f142['length']===0x0){_0x2d7b14['innerHTML']=_0x310c4e(0x3ca);return;}_0x2d7b14[_0x310c4e(0x346)]='',_0x46f142['forEach'](_0x26f56c=>{const _0x305521=_0x310c4e,_0x1b5b57=document['createElement']('div');_0x1b5b57[_0x305521(0x28a)]='search-result-item',_0x1b5b57[_0x305521(0x346)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x26f56c['displayName']||_0x26f56c['username']||'Unknown')+_0x305521(0x264)+(_0x26f56c['email']||'No\x20email')+_0x305521(0x2d7)+(_0x26f56c['points']||0x0)['toLocaleString']()+_0x305521(0x356),_0x1b5b57['addEventListener'](_0x305521(0x40d),()=>selectUserForPoints(_0x26f56c)),_0x2d7b14['appendChild'](_0x1b5b57);});}catch(_0x20e68f){console['error']('Error\x20searching\x20users:',_0x20e68f),_0x2d7b14[_0x310c4e(0x346)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x3881b5){const _0x12cd5b=a2_0x221182;document[_0x12cd5b(0x40f)](_0x12cd5b(0x392))['textContent']=_0x3881b5['displayName']||_0x3881b5[_0x12cd5b(0x30d)]||'Unknown\x20User',document['getElementById']('selected-user-points')['textContent']=(_0x3881b5['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x3881b5['id'],document['getElementById'](_0x12cd5b(0x3b8))['style']['display']=_0x12cd5b(0x3db),document[_0x12cd5b(0x40f)]('points-management-forms')['style']['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')[_0x12cd5b(0x2ec)]='';}async function handleModifyPoints(_0x156514){const _0x5b9ca0=a2_0x221182;_0x156514['preventDefault']();const _0x4a9130=document[_0x5b9ca0(0x40f)](_0x5b9ca0(0x26a))['value'],_0x2568bd=document['getElementById']('points-action')['value'],_0x122804=parseInt(document[_0x5b9ca0(0x40f)]('points-amount')[_0x5b9ca0(0x2ec)]),_0x1df9f3=document['getElementById']('points-reason')[_0x5b9ca0(0x2ec)][_0x5b9ca0(0x33b)]();if(!_0x4a9130||!_0x122804||_0x122804<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x5b9ca0(0x2cc));return;}try{await modifyUserPoints(_0x4a9130,_0x2568bd,_0x122804,_0x1df9f3),document['getElementById']('modify-points-form')['reset']();const _0x4f0df9=doc(db,'userProfiles',_0x4a9130),_0x1758e0=await getDoc(_0x4f0df9);if(_0x1758e0['exists']()){const _0x513714=_0x1758e0['data']();document['getElementById']('selected-user-points')['textContent']=(_0x513714['points']||0x0)['toLocaleString']();}showNotification(_0x5b9ca0(0x210),'success'),loadPointsHistory();}catch(_0x2a51b0){console[_0x5b9ca0(0x2cc)](_0x5b9ca0(0x225),_0x2a51b0),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x2a51b0['message'],'error');}}async function loadPointsHistory(){const _0x1d7af9=a2_0x221182,_0x3b77a3=document['getElementById'](_0x1d7af9(0x28d));if(!_0x3b77a3)return;_0x3b77a3['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x36a242=collection(db,'pointsHistory'),_0x4b6ab9=query(_0x36a242,orderBy(_0x1d7af9(0x331),'desc'),limit(0x32)),_0x119392=await getDocs(_0x4b6ab9);if(_0x119392[_0x1d7af9(0x2d0)]){_0x3b77a3['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x3b77a3['innerHTML']='',_0x119392['forEach'](_0x5a597b=>{const _0x49aec8=_0x1d7af9,_0x13be59=_0x5a597b['data'](),_0x8b143f=document[_0x49aec8(0x3e6)]('tr'),_0x22f8b4=_0x13be59['timestamp']?new Date(_0x13be59['timestamp']['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x45c8d1='';switch(_0x13be59['action']){case'add':_0x45c8d1='Added\x20'+_0x13be59['amount']+'\x20points';break;case'subtract':_0x45c8d1='Subtracted\x20'+_0x13be59[_0x49aec8(0x3fc)]+'\x20points';break;case _0x49aec8(0x341):_0x45c8d1=_0x49aec8(0x400)+_0x13be59['amount']+'\x20points';break;default:_0x45c8d1=_0x13be59['action']+'\x20'+_0x13be59['amount']+'\x20points';}_0x8b143f[_0x49aec8(0x346)]=_0x49aec8(0x3a5)+_0x22f8b4+_0x49aec8(0x34c)+(_0x13be59['displayName']||'Unknown\x20User')+_0x49aec8(0x34c)+_0x45c8d1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x13be59['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x13be59['previousPoints']||0x0)+'\x20→\x20'+(_0x13be59['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x13be59['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x13be59['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3b77a3['appendChild'](_0x8b143f);});}catch(_0x2813e8){console['error']('Error\x20loading\x20points\x20history:',_0x2813e8),_0x3b77a3['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x2813e8['message']+_0x1d7af9(0x20a);}}function filterPointsOverview(){const _0x5eab4f=a2_0x221182,_0x165bdb=document[_0x5eab4f(0x40f)]('points-overview-search')['value'][_0x5eab4f(0x3cc)]();if(!window['allUsersPoints'])return;const _0x3b1ad6=window[_0x5eab4f(0x3bc)]['filter'](_0x340045=>{const _0x188378=_0x5eab4f,_0xf17b73=(_0x340045['displayName']||_0x340045['username']||'')['toLowerCase'](),_0x14a80b=(_0x340045['email']||'')['toLowerCase']();return _0xf17b73[_0x188378(0x2d3)](_0x165bdb)||_0x14a80b['includes'](_0x165bdb);});renderPointsOverview(_0x3b1ad6);}function sortPointsOverview(){const _0x1ee515=a2_0x221182,_0x2c5f0e=document[_0x1ee515(0x40f)](_0x1ee515(0x25c))['value'];if(!window['allUsersPoints'])return;const _0x1d2fb6=[...window[_0x1ee515(0x3bc)]];switch(_0x2c5f0e){case _0x1ee515(0x251):_0x1d2fb6['sort']((_0x11a164,_0x4679fe)=>(_0x4679fe[_0x1ee515(0x1cd)]||0x0)-(_0x11a164['points']||0x0));break;case'points-asc':_0x1d2fb6['sort']((_0x28bcdc,_0x3915c1)=>(_0x28bcdc['points']||0x0)-(_0x3915c1['points']||0x0));break;case _0x1ee515(0x314):_0x1d2fb6['sort']((_0x1baa32,_0x1f7e7e)=>{const _0x338cb7=_0x1ee515,_0x4b6a0e=(_0x1baa32[_0x338cb7(0x2ea)]||_0x1baa32[_0x338cb7(0x30d)]||'')['toLowerCase'](),_0x27ff10=(_0x1f7e7e['displayName']||_0x1f7e7e['username']||'')['toLowerCase']();return _0x4b6a0e['localeCompare'](_0x27ff10);});break;case'name-desc':_0x1d2fb6['sort']((_0x4d8eff,_0x49a781)=>{const _0x4facfb=_0x1ee515,_0x4b50e5=(_0x4d8eff[_0x4facfb(0x2ea)]||_0x4d8eff[_0x4facfb(0x30d)]||'')['toLowerCase'](),_0x4bbe39=(_0x49a781['displayName']||_0x49a781[_0x4facfb(0x30d)]||'')[_0x4facfb(0x3cc)]();return _0x4bbe39['localeCompare'](_0x4b50e5);});break;}renderPointsOverview(_0x1d2fb6);}async function handleAwardItem(_0x2af155){const _0x5a138d=a2_0x221182;_0x2af155['preventDefault']();const _0x3780b2=document['getElementById']('selected-user-id')['value'],_0x2670b9=document['getElementById'](_0x5a138d(0x351))[_0x5a138d(0x2ec)],_0xbe0244=document['getElementById']('award-reason')[_0x5a138d(0x2ec)]['trim']();if(!_0x3780b2||!_0x2670b9){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification(_0x5a138d(0x391),_0x5a138d(0x213)),document[_0x5a138d(0x40f)](_0x5a138d(0x2be))['reset']();}catch(_0x2666df){console[_0x5a138d(0x2cc)]('Error\x20awarding\x20item:',_0x2666df),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x2666df[_0x5a138d(0x35e)],'error');}}async function loadUserPointsHistory(_0x334c9e){const _0xf9da18=a2_0x221182;try{const _0x2d9efa=collection(db,'pointsHistory'),_0x5c2541=query(_0x2d9efa,where('userId','==',_0x334c9e),orderBy('timestamp','desc')),_0x2ba8a6=await getDocs(_0x5c2541);console[_0xf9da18(0x302)](_0xf9da18(0x40e)+_0x2ba8a6[_0xf9da18(0x25a)]+'\x20history\x20entries\x20for\x20user\x20'+_0x334c9e),showNotification('User\x20has\x20'+_0x2ba8a6['size']+'\x20points\x20history\x20entries','info');}catch(_0x1986ad){console[_0xf9da18(0x2cc)]('Error\x20loading\x20user\x20points\x20history:',_0x1986ad),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x3a4bdc=a2_0x221182;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x3e0aa2=collection(db,_0x3a4bdc(0x1f9)),_0x1e1311=await getDocs(_0x3e0aa2);if(_0x1e1311['empty']){console[_0x3a4bdc(0x302)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x25a586=0x0,_0x16616f=0x0;const _0x53d16b=writeBatch(db);let _0x50e537=0x0;return console['log']('Found\x20'+_0x1e1311['size']+'\x20users\x20to\x20check...'),_0x1e1311['forEach'](_0x103706=>{const _0x262217=_0x3a4bdc,_0x3fb03e=_0x103706['data']();_0x3fb03e[_0x262217(0x1cd)]===undefined||_0x3fb03e[_0x262217(0x1cd)]===null?(_0x53d16b['update'](_0x103706['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x25a586++,_0x50e537++,console['log']('Queued\x20'+(_0x3fb03e[_0x262217(0x2ea)]||_0x3fb03e['username']||_0x3fb03e[_0x262217(0x305)]||'Unknown')+_0x262217(0x3cb))):(_0x16616f++,console[_0x262217(0x302)]((_0x3fb03e['displayName']||_0x3fb03e['username']||_0x3fb03e['email']||'Unknown')+_0x262217(0x1de)+_0x3fb03e[_0x262217(0x1cd)])),_0x50e537>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x25a586>0x0?(console['log'](_0x3a4bdc(0x3c6)+_0x25a586+'\x20users...'),await _0x53d16b['commit'](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x25a586+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console[_0x3a4bdc(0x302)]('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x1e1311['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x25a586+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x16616f),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x25a586+'\x20users.\x20'+_0x16616f+_0x3a4bdc(0x3b4),'success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x1e1311[_0x3a4bdc(0x25a)],'usersUpdated':_0x25a586,'usersAlreadyHadPoints':_0x16616f};}catch(_0x323840){console['error']('Error\x20initializing\x20points\x20field:',_0x323840),showNotification('Error\x20initializing\x20points:\x20'+_0x323840['message'],'error');throw _0x323840;}}function addPointsMigrationButton(){const _0xdb93b3=a2_0x221182,_0x484cf6=document['getElementById']('manage-points');if(!_0x484cf6)return;if(document['getElementById']('migrate-points-btn'))return;const _0x2d30b7=document['createElement'](_0xdb93b3(0x393));_0x2d30b7['className']=_0xdb93b3(0x368),_0x2d30b7['style']['marginBottom']='20px',_0x2d30b7['style']['padding']='15px',_0x2d30b7['style'][_0xdb93b3(0x334)]='rgba(255,\x20193,\x207,\x200.1)',_0x2d30b7['style']['border']=_0xdb93b3(0x1d2),_0x2d30b7['style']['borderRadius']=_0xdb93b3(0x2fa),_0x2d30b7['innerHTML']=_0xdb93b3(0x295);const _0x4d6803=_0x484cf6['querySelector']('.section-header');_0x4d6803&&_0x4d6803['insertAdjacentElement'](_0xdb93b3(0x32f),_0x2d30b7),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x61710d=_0xdb93b3;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this[_0x61710d(0x1e9)]=!![],this[_0x61710d(0x346)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0x61710d(0x30f),this[_0x61710d(0x318)]['backgroundColor']='#28a745',setTimeout(()=>{const _0x5e0d7c=_0x61710d;_0x2d30b7['style'][_0x5e0d7c(0x3c0)]='none';},0xbb8);}catch(_0x9cabdb){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x276098=a2_0x221182;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x1eed43=document['getElementById']('points-user-search');_0x1eed43&&_0x1eed43[_0x276098(0x237)](_0x276098(0x3f5),debounce(searchUsersForPoints,0x12c));const _0x4c971b=document[_0x276098(0x40f)]('modify-points-form');_0x4c971b&&_0x4c971b[_0x276098(0x237)](_0x276098(0x2e0),handleModifyPoints);const _0x4660b0=document['getElementById']('award-item-form');_0x4660b0&&_0x4660b0['addEventListener'](_0x276098(0x2e0),handleAwardItem);const _0x334e87=document[_0x276098(0x40f)]('points-overview-search');_0x334e87&&_0x334e87['addEventListener'](_0x276098(0x3f5),debounce(filterPointsOverview,0x12c));const _0x2905d1=document['getElementById']('points-sort-order');_0x2905d1&&_0x2905d1[_0x276098(0x237)]('change',sortPointsOverview);const _0x337c22=document['getElementById'](_0x276098(0x29d));_0x337c22&&_0x337c22['addEventListener']('click',loadPointsOverview);const _0x37c0b1=document['getElementById']('bulk-award-points-btn');_0x37c0b1&&_0x37c0b1[_0x276098(0x237)]('click',async()=>{const _0x1535a9=_0x276098;confirm(_0x1535a9(0x2af))&&(_0x37c0b1['disabled']=!![],_0x37c0b1[_0x1535a9(0x346)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x1021b0(),_0x37c0b1['disabled']=![],_0x37c0b1['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x16c468=document[_0x276098(0x40f)](_0x276098(0x378));_0x16c468&&_0x16c468[_0x276098(0x237)](_0x276098(0x40d),awardPointsToAllPilots);async function _0x1021b0(){const _0x4ad55c=_0x276098;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x4171c6={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0xffd16=0x0,_0x54d605=0x0,_0xcdadc8=0x0,_0x4ac71a=0x0,_0x40e1a2=0x0,_0x59578e=0x0;const _0x119cc6=new Set(),_0x2aaa24=collection(db,'pointsHistory'),_0x3234cc=query(_0x2aaa24,where('reason','>=','Bulk\x20award:'),where('reason','<=','Bulk\x20award:')),_0x5dfa7a=await getDocs(_0x3234cc);_0x5dfa7a['forEach'](_0x66cad7=>{const _0x13a8b9=a2_0x52ec,_0x2f17e6=_0x66cad7['data'](),_0x1d49f5=_0x2f17e6[_0x13a8b9(0x3f3)]||'',_0x1a3ef8=_0x1d49f5['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x1a3ef8&&_0x1a3ef8[0x1]&&_0x119cc6['add'](_0x1a3ef8[0x1]);}),console[_0x4ad55c(0x302)]('Found\x20'+_0x119cc6[_0x4ad55c(0x25a)]+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x20fd75,_0x489948,_0x203fab]=await Promise[_0x4ad55c(0x317)]([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,'approvedMatchesD3'))]),_0x4879ea=_0x20fd75['size']+_0x489948['size']+_0x203fab[_0x4ad55c(0x25a)];showNotification('Found\x20'+_0x4879ea+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x2e74b8=async(_0x1cce89,_0x484e62)=>{const _0x1c1940=_0x4ad55c;let _0x46d992=writeBatch(db);const _0x4b21d1=[];let _0x1d1bbe=0x0;for(const _0x5cc4d3 of _0x1cce89['docs']){try{if(_0x119cc6['has'](_0x5cc4d3['id'])){if(_0x484e62==='D1')_0x59578e++;if(_0x484e62==='D2')_0x59578e++;if(_0x484e62==='D3')_0x59578e++;continue;}const _0x5b003d=_0x5cc4d3['data'](),_0x335cc4=_0x5b003d['subgameType']||'Standard',_0x2c7577=_0x4171c6[_0x335cc4]||0xa;let _0x17b8ad=_0x5b003d[_0x1c1940(0x3b7)];if(!_0x17b8ad&&_0x5b003d['winnerUsername']){const [_0x172e7e,_0x5a4354,_0x2a5409]=await Promise[_0x1c1940(0x317)]([getDocs(query(collection(db,_0x1c1940(0x2a3)),where(_0x1c1940(0x30d),'==',_0x5b003d['winnerUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x5b003d[_0x1c1940(0x36d)]))),getDocs(query(collection(db,_0x1c1940(0x2df)),where(_0x1c1940(0x30d),'==',_0x5b003d['winnerUsername'])))]);if(!_0x172e7e[_0x1c1940(0x2d0)])_0x17b8ad=_0x172e7e['docs'][0x0]['id'];else{if(!_0x5a4354[_0x1c1940(0x2d0)])_0x17b8ad=_0x5a4354['docs'][0x0]['id'];else{if(!_0x2a5409[_0x1c1940(0x2d0)])_0x17b8ad=_0x2a5409[_0x1c1940(0x1c8)][0x0]['id'];}}}let _0xdfd401=_0x5b003d[_0x1c1940(0x319)];if(!_0xdfd401&&_0x5b003d['loserUsername']){const [_0x4c21ae,_0x16c2f8,_0x18648a]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x1c1940(0x30d),'==',_0x5b003d['loserUsername']))),getDocs(query(collection(db,'playersD2'),where(_0x1c1940(0x30d),'==',_0x5b003d['loserUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x5b003d['loserUsername'])))]);if(!_0x4c21ae[_0x1c1940(0x2d0)])_0xdfd401=_0x4c21ae['docs'][0x0]['id'];else{if(!_0x16c2f8[_0x1c1940(0x2d0)])_0xdfd401=_0x16c2f8['docs'][0x0]['id'];else{if(!_0x18648a[_0x1c1940(0x2d0)])_0xdfd401=_0x18648a['docs'][0x0]['id'];}}}if(_0x17b8ad&&_0xdfd401){const _0x42b74e=doc(db,'userProfiles',_0x17b8ad),_0x16dc9c=doc(db,'userProfiles',_0xdfd401),[_0x2e6101,_0x572a21]=await Promise[_0x1c1940(0x317)]([getDoc(_0x42b74e),getDoc(_0x16dc9c)]);if(_0x2e6101['exists']()){const _0x57bd00=_0x2e6101['data'](),_0x3ead8f=_0x57bd00['points']||0x0;_0x46d992['update'](_0x42b74e,{'points':_0x3ead8f+_0x2c7577,'lastPointsModified':serverTimestamp()}),_0x4b21d1['push']({'userId':_0x17b8ad,'userEmail':_0x57bd00['email']||'unknown','displayName':_0x57bd00['displayName']||_0x5b003d['winnerUsername']||'Unknown\x20User','action':_0x1c1940(0x1f7),'amount':_0x2c7577,'previousPoints':_0x3ead8f,'newPoints':_0x3ead8f+_0x2c7577,'reason':_0x1c1940(0x38c)+_0x335cc4+_0x1c1940(0x40b)+_0x5cc4d3['id']+_0x1c1940(0x1c4)+_0x484e62,'adminEmail':auth[_0x1c1940(0x37e)]['email'],'timestamp':serverTimestamp()});}if(_0x572a21['exists']()){const _0x2be5be=_0x572a21[_0x1c1940(0x3f2)](),_0x4a3738=_0x2be5be['points']||0x0;_0x46d992['update'](_0x16dc9c,{'points':_0x4a3738+_0x2c7577,'lastPointsModified':serverTimestamp()}),_0x4b21d1['push']({'userId':_0xdfd401,'userEmail':_0x2be5be['email']||'unknown','displayName':_0x2be5be['displayName']||_0x5b003d['loserUsername']||_0x1c1940(0x383),'action':_0x1c1940(0x1f7),'amount':_0x2c7577,'previousPoints':_0x4a3738,'newPoints':_0x4a3738+_0x2c7577,'reason':_0x1c1940(0x38c)+_0x335cc4+_0x1c1940(0x1e3)+_0x5cc4d3['id']+_0x1c1940(0x1c4)+_0x484e62,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x4ac71a+=_0x2c7577*0x2,_0x1d1bbe+=0x2,_0x119cc6['add'](_0x5cc4d3['id']);if(_0x1d1bbe>=0x190){await _0x46d992['commit']();for(const _0x262c0f of _0x4b21d1){await addDoc(collection(db,'pointsHistory'),_0x262c0f);}_0x46d992=writeBatch(db),_0x1d1bbe=0x0,_0x4b21d1['length']=0x0;}}}catch(_0x5ac594){console[_0x1c1940(0x2cc)]('Error\x20processing\x20'+_0x484e62+'\x20match\x20'+_0x5cc4d3['id']+':',_0x5ac594),_0x40e1a2++;}}if(_0x1d1bbe>0x0){await _0x46d992[_0x1c1940(0x25e)]();for(const _0x1c877b of _0x4b21d1){await addDoc(collection(db,_0x1c1940(0x1cc)),_0x1c877b);}}return{'processed':_0x484e62==='D1'?_0xffd16:_0x484e62==='D2'?_0x54d605:_0xcdadc8};};await _0x2e74b8(_0x20fd75,'D1'),await _0x2e74b8(_0x489948,'D2'),await _0x2e74b8(_0x203fab,'D3'),showNotification('Completed!\x20Processed\x20'+_0xffd16+'\x20D1\x20matches,\x20'+_0x54d605+'\x20D2\x20matches,\x20'+_0xcdadc8+_0x4ad55c(0x3ff)+('Awarded\x20'+_0x4ac71a+'\x20points.\x20Skipped\x20'+_0x59578e+_0x4ad55c(0x27c)+_0x40e1a2),'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x363811){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x363811),showNotification(_0x4ad55c(0x209)+_0x363811['message'],_0x4ad55c(0x2cc));}}const _0x528afe=document['getElementById'](_0x276098(0x3b2));if(_0x528afe){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x1bfdb3=_0x528afe['querySelector']('.close-btn');_0x1bfdb3?_0x1bfdb3['addEventListener'](_0x276098(0x40d),function(){const _0x409127=_0x276098;console[_0x409127(0x302)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x370b30=document['getElementById'](_0x276098(0x22f));_0x370b30?_0x370b30[_0x276098(0x237)](_0x276098(0x40d),function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console[_0x276098(0x2b0)]('Cancel\x20button\x20not\x20found');const _0x33fcd4=document[_0x276098(0x40f)]('quick-edit-points-form');_0x33fcd4?_0x33fcd4['addEventListener'](_0x276098(0x2e0),function(_0x603dad){const _0x652039=_0x276098;console[_0x652039(0x302)](_0x652039(0x415)),handleQuickEditPoints(_0x603dad);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x528afe['addEventListener']('click',function(_0x48709a){_0x48709a['target']===_0x528afe&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console[_0x276098(0x302)](_0x276098(0x2ed));}async function awardPointsToAllPilots(){const _0x35581a=a2_0x221182;try{const _0x4556d9=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x4556d9||isNaN(_0x4556d9)){showNotification('Invalid\x20points\x20amount',_0x35581a(0x2cc));return;}if(!confirm('This\x20will\x20award\x20'+_0x4556d9+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification(_0x35581a(0x412),_0x35581a(0x242));const [_0x17ba26,_0x355f5e,_0x2a6118]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'playersD3'))]);console['log']('Found\x20'+_0x17ba26[_0x35581a(0x25a)]+_0x35581a(0x22c)+_0x355f5e['size']+'\x20D2\x20pilots,\x20'+_0x2a6118[_0x35581a(0x25a)]+'\x20D3\x20pilots');const _0x2d0dd8=_0x17ba26['size']+_0x355f5e['size']+_0x2a6118['size'],_0x14a16f=new Map();_0x17ba26['forEach'](_0x213394=>{const _0x2dd744=_0x213394['data']();_0x14a16f['set'](_0x213394['id'],{'username':_0x2dd744['username'],'ladder':'D1'});}),_0x355f5e['forEach'](_0x41c42a=>{const _0x179253=_0x41c42a['data']();_0x14a16f['set'](_0x41c42a['id'],{'username':_0x179253['username'],'ladder':'D2'});}),_0x2a6118['forEach'](_0x1ba510=>{const _0x34dcd2=_0x35581a,_0x430810=_0x1ba510['data']();_0x14a16f['set'](_0x1ba510['id'],{'username':_0x430810[_0x34dcd2(0x30d)],'ladder':'D3'});}),console['log']('Found\x20'+_0x14a16f[_0x35581a(0x25a)]+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x3d1f20=0x0,_0x184cb3=0x0,_0x533031=0x0;const _0x1c833d=Array[_0x35581a(0x306)](_0x14a16f['keys']()),_0x16c7a2=0x190;for(let _0x561386=0x0;_0x561386<_0x1c833d['length'];_0x561386+=_0x16c7a2){const _0x7272a1=writeBatch(db),_0x26a6fd=[],_0x4fe857=_0x1c833d['slice'](_0x561386,_0x561386+_0x16c7a2),_0x3e2d0a=await Promise['all'](_0x4fe857['map'](_0x4f2c39=>getDoc(doc(db,'userProfiles',_0x4f2c39))));for(let _0x253b97=0x0;_0x253b97<_0x4fe857['length'];_0x253b97++){try{const _0x38a09c=_0x4fe857[_0x253b97],_0x1f3b45=_0x14a16f['get'](_0x38a09c),_0x78eab7=_0x3e2d0a[_0x253b97];if(_0x78eab7['exists']()){const _0x5294b5=_0x78eab7['data'](),_0x43838c=_0x5294b5[_0x35581a(0x1cd)]||0x0,_0x3761b9=_0x43838c+_0x4556d9;_0x7272a1[_0x35581a(0x418)](doc(db,_0x35581a(0x1f9),_0x38a09c),{'points':_0x3761b9,'lastPointsModified':serverTimestamp()}),_0x26a6fd['push']({'userId':_0x38a09c,'userEmail':_0x5294b5['email']||_0x35581a(0x2ca),'displayName':_0x5294b5['displayName']||_0x1f3b45['username']||'Unknown\x20User','action':'add','amount':_0x4556d9,'previousPoints':_0x43838c,'newPoints':_0x3761b9,'reason':_0x35581a(0x28e)+_0x1f3b45['ladder']+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0x184cb3+=_0x4556d9,_0x3d1f20++;}else _0x533031++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x1f3b45['username']+'\x20('+_0x38a09c+')');}catch(_0x51b083){_0x533031++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x51b083);}}await _0x7272a1['commit']();for(const _0x4409b3 of _0x26a6fd){await addDoc(collection(db,_0x35581a(0x1cc)),_0x4409b3);}showNotification('Processed\x20'+_0x3d1f20+'/'+_0x2d0dd8+_0x35581a(0x2d6),'info');}showNotification('Complete!\x20Awarded\x20'+_0x184cb3+'\x20points\x20to\x20'+_0x3d1f20+'\x20pilots.\x20Errors:\x20'+_0x533031,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x516b7c){console['error'](_0x35581a(0x28f),_0x516b7c),showNotification(_0x35581a(0x3a3)+_0x516b7c['message'],'error');}}function setupManageRibbonsSection(){const _0x140310=a2_0x221182;console[_0x140310(0x302)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x6abff6=document['getElementById'](_0x140310(0x39c));_0x6abff6&&_0x6abff6['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x50019f=document[_0x140310(0x40f)](_0x140310(0x2f8));_0x50019f&&_0x50019f['addEventListener']('click',searchRibbonUser);const _0x301219=document[_0x140310(0x40f)]('add-ribbon-form');_0x301219&&_0x301219['addEventListener']('submit',addRibbon),_0x6abff6&&_0x6abff6['addEventListener'](_0x140310(0x2c5),function(_0x52ffe0){const _0x5d7a39=_0x140310;_0x52ffe0[_0x5d7a39(0x214)]==='Enter'&&(_0x52ffe0['preventDefault'](),searchRibbonUser());}),console['log'](_0x140310(0x3e1));}async function modifyUserPoints(_0x47e76b,_0x2ca5c5,_0x3d955f,_0x1a320c=''){const _0x3a53e0=a2_0x221182,_0x336fa7=doc(db,'userProfiles',_0x47e76b),_0x19a1a5=await getDoc(_0x336fa7);if(!_0x19a1a5['exists']())throw new Error(_0x3a53e0(0x2ee));const _0x5be739=_0x19a1a5['data'](),_0x161227=_0x5be739[_0x3a53e0(0x1cd)]!==undefined?_0x5be739['points']:0x0;_0x5be739[_0x3a53e0(0x1cd)]===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x5be739['displayName']||_0x5be739[_0x3a53e0(0x305)]||_0x3a53e0(0x2fe))),await updateDoc(_0x336fa7,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x161e43=_0x161227;switch(_0x2ca5c5){case'add':_0x161e43=_0x161227+_0x3d955f;break;case _0x3a53e0(0x2f2):_0x161e43=Math['max'](0x0,_0x161227-_0x3d955f);break;case _0x3a53e0(0x341):_0x161e43=_0x3d955f;break;default:throw new Error(_0x3a53e0(0x3ef));}await updateDoc(_0x336fa7,{'points':_0x161e43,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x47e76b,'userEmail':_0x5be739['email']||'unknown','displayName':_0x5be739['displayName']||_0x5be739['username']||'Unknown\x20User','action':_0x2ca5c5,'amount':_0x3d955f,'previousPoints':_0x161227,'newPoints':_0x161e43,'reason':_0x1a320c,'adminEmail':auth['currentUser'][_0x3a53e0(0x305)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x3c50b2=a2_0x221182,_0x25b79c=document['getElementById'](_0x3c50b2(0x247));if(!_0x25b79c)return;_0x25b79c['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x259b27=collection(db,'userProfiles'),_0x5cc55a=await getDocs(_0x259b27);if(_0x5cc55a['empty']){_0x25b79c[_0x3c50b2(0x346)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x210e27=[];let _0x4e1f51=0x0;_0x5cc55a['forEach'](_0x577e59=>{const _0x5b57cd=_0x577e59['data'](),_0x3040d8=_0x5b57cd['points']!==undefined?_0x5b57cd['points']:0x0;_0x5b57cd['points']===undefined&&_0x4e1f51++,_0x210e27['push']({'id':_0x577e59['id'],..._0x5b57cd,'points':_0x3040d8});}),_0x4e1f51>0x0&&(console[_0x3c50b2(0x302)]('Found\x20'+_0x4e1f51+_0x3c50b2(0x313)),showNotification(_0x4e1f51+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x210e27['sort']((_0x1faa38,_0x5d945c)=>(_0x5d945c[_0x3c50b2(0x1cd)]||0x0)-(_0x1faa38['points']||0x0)),window['allUsersPoints']=_0x210e27,renderPointsOverview(_0x210e27);}catch(_0x4ed03c){console[_0x3c50b2(0x2cc)]('Error\x20loading\x20points\x20overview:',_0x4ed03c),_0x25b79c[_0x3c50b2(0x346)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x4ed03c[_0x3c50b2(0x35e)]+'</td></tr>';}}async function loadRibbonsData(){const _0x39841d=a2_0x221182,_0x3041e0=document[_0x39841d(0x40f)]('ribbons-overview-table-body');if(!_0x3041e0)return;_0x3041e0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x4aad8d,_0x5e44d9,_0x5e0be5]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x39841d(0x254))),getDocs(collection(db,'playerRibbonsD3'))]);_0x3041e0[_0x39841d(0x346)]='';const _0x355bb2=(_0xe44cd0,_0x39d1f9)=>{const _0x4908c7=_0x39841d;_0xe44cd0[_0x4908c7(0x2f7)](_0x1c0f4a=>{const _0x461da6=_0x4908c7,_0x2924cf=_0x1c0f4a[_0x461da6(0x3f2)](),_0x193464=_0x2924cf['ribbons']||{},_0x422f5d=Object['keys'](_0x193464)['length'],_0x5c9029=document['createElement']('tr');_0x5c9029['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2924cf['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x39d1f9['toLowerCase']()+'\x22>'+_0x39d1f9+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x422f5d+_0x461da6(0x2b8)+(_0x2924cf[_0x461da6(0x2b9)]?new Date(_0x2924cf['lastUpdated'][_0x461da6(0x3f4)]*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x2924cf['username']+'\x22\x20data-ladder=\x22'+_0x39d1f9+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3041e0['appendChild'](_0x5c9029);});};_0x355bb2(_0x4aad8d,'D1'),_0x355bb2(_0x5e44d9,'D2'),_0x355bb2(_0x5e0be5,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x10f464=>{const _0x32e403=_0x39841d;_0x10f464[_0x32e403(0x237)](_0x32e403(0x40d),function(){const _0x42a966=this['dataset']['username'],_0xb23e3b=this['dataset']['ladder'];editUserRibbons(_0x42a966,_0xb23e3b);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x223892){console['error'](_0x39841d(0x26e),_0x223892),_0x3041e0['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data',_0x39841d(0x2cc));}}async function searchRibbonUser(){const _0x41d946=a2_0x221182,_0x11a29c=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x11a29c){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x361551,_0x1cf306,_0x129227]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x11a29c)),getDoc(doc(db,'playerRibbonsD2',_0x11a29c)),getDoc(doc(db,'playerRibbonsD3',_0x11a29c))]);let _0xb4fe7=null,_0x45c506=null;if(_0x361551[_0x41d946(0x3d0)]())_0xb4fe7='D1',_0x45c506=_0x361551[_0x41d946(0x3f2)]();else{if(_0x1cf306[_0x41d946(0x3d0)]())_0xb4fe7='D2',_0x45c506=_0x1cf306['data']();else _0x129227[_0x41d946(0x3d0)]()&&(_0xb4fe7='D3',_0x45c506=_0x129227['data']());}_0xb4fe7?(document['getElementById']('current-ribbon-user')['textContent']=_0x11a29c,document[_0x41d946(0x40f)]('ribbon-target-user')['value']=_0x11a29c,document['getElementById'](_0x41d946(0x3a2))['value']=_0xb4fe7,document['getElementById'](_0x41d946(0x299))[_0x41d946(0x318)]['display']='block',displayCurrentRibbons(_0x45c506['ribbons']||{}),showNotification(_0x41d946(0x40e)+_0x11a29c+'\x20in\x20'+_0xb4fe7+'\x20ladder',_0x41d946(0x213))):showNotification(_0x41d946(0x1ea)+_0x11a29c+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x1c7239){console[_0x41d946(0x2cc)]('Error\x20searching\x20user:',_0x1c7239),showNotification(_0x41d946(0x3b3),'error');}}function displayCurrentRibbons(_0xdb0db6){const _0x120a7a=a2_0x221182,_0x3a47fe=document['getElementById']('current-ribbons-list');if(!_0x3a47fe)return;_0x3a47fe['innerHTML']='';if(Object['keys'](_0xdb0db6)['length']===0x0){_0x3a47fe[_0x120a7a(0x346)]=_0x120a7a(0x3df);return;}Object['entries'](_0xdb0db6)['forEach'](([_0x255718,_0x421b9b])=>{const _0x528c53=_0x120a7a,_0x292b89=document['createElement']('div');_0x292b89['className']='ribbon-item',_0x292b89['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x255718+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x421b9b['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x421b9b['awardedAt']?new Date(_0x421b9b['awardedAt'][_0x528c53(0x3f4)]*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x255718+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3a47fe['appendChild'](_0x292b89);}),document['querySelectorAll'](_0x120a7a(0x1d3))[_0x120a7a(0x2f7)](_0x5cfb97=>{const _0x4625a1=_0x120a7a;_0x5cfb97[_0x4625a1(0x237)]('click',function(){const _0x26b058=_0x4625a1,_0x4d4937=this['dataset'][_0x26b058(0x347)];removeRibbon(_0x4d4937);});});}async function addRibbon(_0x1636ed){const _0x114ebe=a2_0x221182;_0x1636ed['preventDefault']();const _0x2003e4=document[_0x114ebe(0x40f)](_0x114ebe(0x275))['value'],_0x5d1bcd=document['getElementById']('ribbon-target-ladder')['value'],_0x570b2c=document['getElementById']('ribbon-type-select')['value'],_0x80470e=parseInt(document[_0x114ebe(0x40f)]('ribbon-level')['value']);if(!_0x2003e4||!_0x5d1bcd||!_0x570b2c||!_0x80470e){showNotification(_0x114ebe(0x265),'error');return;}try{const _0x5e2623=_0x114ebe(0x244)+(_0x5d1bcd==='D1'?'':_0x5d1bcd),_0x24ce0c=doc(db,_0x5e2623,_0x2003e4),_0x4b68fa=await getDoc(_0x24ce0c),_0x3a94ec=_0x4b68fa[_0x114ebe(0x3d0)]()?_0x4b68fa[_0x114ebe(0x3f2)]()['ribbons']||{}:{};_0x3a94ec[_0x570b2c]={'level':_0x80470e,'awardedAt':serverTimestamp()},await setDoc(_0x24ce0c,{'username':_0x2003e4,'ladder':_0x5d1bcd,'ribbons':_0x3a94ec,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x114ebe(0x3e5)+_0x570b2c+'\x20Level\x20'+_0x80470e+_0x114ebe(0x3e3)+_0x2003e4,'success'),displayCurrentRibbons(_0x3a94ec),document[_0x114ebe(0x40f)]('ribbon-type-select')['value']='',document[_0x114ebe(0x40f)]('ribbon-level')['value']='1';}catch(_0x4c59fd){console[_0x114ebe(0x2cc)]('Error\x20adding\x20ribbon:',_0x4c59fd),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x565c1e){const _0x3609ad=a2_0x221182,_0x10f48c=document['getElementById'](_0x3609ad(0x275))['value'],_0x563cf8=document['getElementById']('ribbon-target-ladder')[_0x3609ad(0x2ec)];if(!confirm('Remove\x20'+_0x565c1e+'\x20from\x20'+_0x10f48c+'?'))return;try{const _0x19b2e9='playerRibbons'+(_0x563cf8==='D1'?'':_0x563cf8),_0x58815b=doc(db,_0x19b2e9,_0x10f48c),_0x5f107e=await getDoc(_0x58815b),_0x3f67b4=_0x5f107e['exists']()?_0x5f107e['data']()['ribbons']||{}:{};delete _0x3f67b4[_0x565c1e],await setDoc(_0x58815b,{'username':_0x10f48c,'ladder':_0x563cf8,'ribbons':_0x3f67b4,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x565c1e+'\x20from\x20'+_0x10f48c,'success'),displayCurrentRibbons(_0x3f67b4);}catch(_0x3b2bbb){console['error'](_0x3609ad(0x370),_0x3b2bbb),showNotification('Error\x20removing\x20ribbon',_0x3609ad(0x2cc));}}function editUserRibbons(_0x12d6bc,_0x2fb483){const _0x43e27e=a2_0x221182;document[_0x43e27e(0x40f)]('ribbon-user-search')[_0x43e27e(0x2ec)]=_0x12d6bc,searchRibbonUser();}