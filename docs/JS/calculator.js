const a0_0x306f35=a0_0x36db;(function(_0x3cff0d,_0xe1f9ea){const _0x3da734=a0_0x36db,_0x3ee0e1=_0x3cff0d();while(!![]){try{const _0x49bbf3=parseInt(_0x3da734(0x1d4))/0x1+-parseInt(_0x3da734(0x1ae))/0x2*(-parseInt(_0x3da734(0x1de))/0x3)+-parseInt(_0x3da734(0x1ba))/0x4+parseInt(_0x3da734(0x1b1))/0x5+-parseInt(_0x3da734(0x1c3))/0x6+-parseInt(_0x3da734(0x1d1))/0x7*(parseInt(_0x3da734(0x1c5))/0x8)+-parseInt(_0x3da734(0x1af))/0x9*(parseInt(_0x3da734(0x1c2))/0xa);if(_0x49bbf3===_0xe1f9ea)break;else _0x3ee0e1['push'](_0x3ee0e1['shift']());}catch(_0x19b6a6){_0x3ee0e1['push'](_0x3ee0e1['shift']());}}}(a0_0x5da4,0x64721));const a0_0x36de18=(function(){let _0x52c816=!![];return function(_0x245599,_0x43b085){const _0x2fa30f=_0x52c816?function(){if(_0x43b085){const _0xc0da15=_0x43b085['apply'](_0x245599,arguments);return _0x43b085=null,_0xc0da15;}}:function(){};return _0x52c816=![],_0x2fa30f;};}()),a0_0x294dfd=a0_0x36de18(this,function(){const _0x2f8295=a0_0x36db,_0x2419ec=function(){let _0x1191a0;try{_0x1191a0=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2db55c){_0x1191a0=window;}return _0x1191a0;},_0x33e604=_0x2419ec(),_0x143e5b=_0x33e604[_0x2f8295(0x1cf)]=_0x33e604[_0x2f8295(0x1cf)]||{},_0x4e0177=[_0x2f8295(0x1aa),'warn','info',_0x2f8295(0x1b4),'exception',_0x2f8295(0x1ac),'trace'];for(let _0x4d5d13=0x0;_0x4d5d13<_0x4e0177[_0x2f8295(0x1c9)];_0x4d5d13++){const _0x15220d=a0_0x36de18['constructor']['prototype'][_0x2f8295(0x1b6)](a0_0x36de18),_0x4c1925=_0x4e0177[_0x4d5d13],_0x50923e=_0x143e5b[_0x4c1925]||_0x15220d;_0x15220d['__proto__']=a0_0x36de18['bind'](a0_0x36de18),_0x15220d['toString']=_0x50923e['toString'][_0x2f8295(0x1b6)](_0x50923e),_0x143e5b[_0x4c1925]=_0x15220d;}});a0_0x294dfd();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0x5da4(){const _0x27c295=['table','calculation-text','6CQHjhm','3670209KRukWJ','#808080','3469725eVhIdE','New\x20ELO:\x20','players','error','block','bind','value','loser-elo-change','loserChange','1043900vHqeAK','loser-name','winner-name','%\x20chance\x20to\x20win)\x0a\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','eloRating','winnerChange','10TDoumm','1380738vhBjuX','\x20=\x20','91096Muppaq','calculateMatch','refresh-players','style','length','textContent','calculation-details','grid','remove','#FFD700','console','addEventListener','105TIKbyU','getElementById','newLoserRating','506264iguJTv','unranked','<option\x20value=\x22','username','winner-select','elo','display','round','expectedScoreLoser','color','280920DlWvcI','forEach','emerald','desc','getELORankClass','silver','updateDropdowns','innerHTML','log','loser-select'];a0_0x5da4=function(){return _0x27c295;};return a0_0x5da4();}function a0_0x36db(_0x51cd45,_0xfd5ab1){const _0x1a7181=a0_0x5da4();return a0_0x36db=function(_0x294dfd,_0x36de18){_0x294dfd=_0x294dfd-0x1aa;let _0x4ddf9f=_0x1a7181[_0x294dfd];return _0x4ddf9f;},a0_0x36db(_0x51cd45,_0xfd5ab1);}import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x253d71=a0_0x36db;this['currentLadder']='D1',this[_0x253d71(0x1b3)]=new Map(),this['init']();}['init'](){this['setupEventListeners'](),this['loadPlayers']();}['setupEventListeners'](){const _0x4a42f6=a0_0x36db;document['querySelectorAll']('.ladder-btn')[_0x4a42f6(0x1df)](_0x11ab6c=>{const _0x5d1dc6=_0x4a42f6;_0x11ab6c[_0x5d1dc6(0x1d0)]('click',_0x1bc9ce=>{const _0x56eed3=_0x5d1dc6;document['querySelectorAll']('.ladder-btn')['forEach'](_0x582b31=>_0x582b31['classList'][_0x56eed3(0x1cd)]('active')),_0x1bc9ce['target']['classList']['add']('active'),this['currentLadder']=_0x1bc9ce['target']['dataset']['ladder'],this['loadPlayers']();});}),document['getElementById'](_0x4a42f6(0x1c7))['addEventListener']('click',()=>{this['loadPlayers']();}),document['getElementById']('winner-select')[_0x4a42f6(0x1d0)]('change',()=>this[_0x4a42f6(0x1c6)]()),document['getElementById']('loser-select')['addEventListener']('change',()=>this['calculateMatch']());}async['loadPlayers'](){const _0x341c1d=a0_0x36db;try{this[_0x341c1d(0x1e4)]('<option\x20value=\x22\x22>Loading\x20players...</option>');const _0x6ea5b4=this['currentLadder']==='D1'?'players':this['currentLadder']==='D2'?'playersD2':'playersD3',_0x509554=collection(db,_0x6ea5b4),_0x114e31=query(_0x509554,orderBy(_0x341c1d(0x1c0),_0x341c1d(0x1e1))),_0x5aafd2=await getDocs(_0x114e31);this['players']['clear'](),_0x5aafd2['forEach'](_0x5b3987=>{const _0x195a2a=_0x341c1d,_0x4c7683=_0x5b3987['data']();_0x4c7683[_0x195a2a(0x1d7)]&&this[_0x195a2a(0x1b3)]['set'](_0x4c7683[_0x195a2a(0x1d7)],{'id':_0x5b3987['id'],'username':_0x4c7683['username'],'elo':parseInt(_0x4c7683['eloRating'])||0x4b0,'position':_0x4c7683['position']||0x3e7});}),this['updateDropdowns'](),console['log']('Loaded\x20'+this['players']['size']+'\x20players\x20from\x20'+this['currentLadder']+'\x20ladder');}catch(_0x4043ad){console['error']('Error\x20loading\x20players:',_0x4043ad),this['updateDropdowns']('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](_0x5a5ffa=null){const _0x246810=a0_0x36db,_0x554362=document[_0x246810(0x1d2)]('winner-select'),_0x4bcf51=document['getElementById'](_0x246810(0x1ab));if(_0x5a5ffa){_0x554362[_0x246810(0x1e5)]=_0x5a5ffa,_0x4bcf51[_0x246810(0x1e5)]=_0x5a5ffa;return;}let _0x3a2804='<option\x20value=\x22\x22>Select\x20a\x20player...</option>';const _0x4e5f0c=Array['from'](this['players']['values']())['sort']((_0x25e46c,_0x15ebec)=>_0x15ebec['elo']-_0x25e46c[_0x246810(0x1d9)]);_0x4e5f0c['forEach'](_0x40ccbf=>{const _0x269eb1=_0x246810,_0x5e3a61=this[_0x269eb1(0x1e2)](_0x40ccbf[_0x269eb1(0x1d9)]);_0x3a2804+=_0x269eb1(0x1d6)+_0x40ccbf['username']+'\x22\x20data-elo=\x22'+_0x40ccbf['elo']+'\x22\x20class=\x22'+_0x5e3a61+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x40ccbf['username']+'\x20('+_0x40ccbf[_0x269eb1(0x1d9)]+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),_0x554362['innerHTML']=_0x3a2804,_0x4bcf51['innerHTML']=_0x3a2804;}[a0_0x306f35(0x1c6)](){const _0x13caed=a0_0x306f35,_0x27d51f=document['getElementById'](_0x13caed(0x1d8)),_0x46706a=document['getElementById'](_0x13caed(0x1ab)),_0x3a48f0=_0x27d51f[_0x13caed(0x1b7)],_0x4102b1=_0x46706a['value'];if(!_0x3a48f0||!_0x4102b1){document['getElementById']('match-result')['style']['display']='none',document['getElementById']('calculation-details')[_0x13caed(0x1c8)][_0x13caed(0x1da)]='none';return;}if(_0x3a48f0===_0x4102b1){alert(_0x13caed(0x1bf));return;}const _0xc8d987=this['players']['get'](_0x3a48f0),_0x41cc3c=this['players']['get'](_0x4102b1);if(!_0xc8d987||!_0x41cc3c){console['error']('Player\x20not\x20found');return;}const _0xa86ff7=this['calculateELO'](_0xc8d987[_0x13caed(0x1d9)],_0x41cc3c['elo']);this['displayMatchResult'](_0xc8d987,_0x41cc3c,_0xa86ff7),this['displayCalculationDetails'](_0xc8d987,_0x41cc3c,_0xa86ff7);}['calculateELO'](_0x4f1e92,_0xf92bb,_0x4e8788=0x20){const _0x5edfc7=a0_0x306f35,_0x3037c7=0x1/(0x1+Math['pow'](0xa,(_0xf92bb-_0x4f1e92)/0x190)),_0x539a2a=0x1/(0x1+Math['pow'](0xa,(_0x4f1e92-_0xf92bb)/0x190)),_0x1dfb58=_0x4f1e92+_0x4e8788*(0x1-_0x3037c7),_0x56daa8=_0xf92bb+_0x4e8788*(0x0-_0x539a2a);return{'winnerChange':Math['round'](_0x1dfb58-_0x4f1e92),'loserChange':Math[_0x5edfc7(0x1db)](_0x56daa8-_0xf92bb),'newWinnerRating':Math[_0x5edfc7(0x1db)](_0x1dfb58),'newLoserRating':Math['round'](_0x56daa8),'expectedScoreWinner':_0x3037c7,'expectedScoreLoser':_0x539a2a};}['displayMatchResult'](_0x5979cf,_0x132cb6,_0x251185){const _0x5b13f2=a0_0x306f35;document['getElementById']('winner-name')['textContent']=_0x5979cf[_0x5b13f2(0x1d7)],document[_0x5b13f2(0x1d2)]('winner-current-elo')[_0x5b13f2(0x1ca)]='Current\x20ELO:\x20'+_0x5979cf['elo'],document[_0x5b13f2(0x1d2)]('winner-elo-change')[_0x5b13f2(0x1ca)]='+'+_0x251185['winnerChange'],document[_0x5b13f2(0x1d2)]('winner-new-elo')['textContent']=_0x5b13f2(0x1b2)+_0x251185['newWinnerRating'],document[_0x5b13f2(0x1d2)]('loser-name')['textContent']=_0x132cb6[_0x5b13f2(0x1d7)],document['getElementById']('loser-current-elo')['textContent']='Current\x20ELO:\x20'+_0x132cb6[_0x5b13f2(0x1d9)],document['getElementById'](_0x5b13f2(0x1b8))['textContent']=''+_0x251185['loserChange'],document['getElementById']('loser-new-elo')[_0x5b13f2(0x1ca)]=_0x5b13f2(0x1b2)+_0x251185[_0x5b13f2(0x1d3)];const _0x552495=this['getELOColor'](_0x5979cf['elo']),_0x9ae2eb=this['getELOColor'](_0x132cb6['elo']);document['getElementById'](_0x5b13f2(0x1bc))['style'][_0x5b13f2(0x1dd)]=_0x552495,document[_0x5b13f2(0x1d2)](_0x5b13f2(0x1bb))[_0x5b13f2(0x1c8)]['color']=_0x9ae2eb,document['getElementById']('match-result')[_0x5b13f2(0x1c8)]['display']=_0x5b13f2(0x1cc);}['displayCalculationDetails'](_0x1198fe,_0x49aac6,_0x3b241f){const _0x4a2eb0=a0_0x306f35,_0x3f35da='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+_0x1198fe['username']+':\x20'+_0x1198fe['elo']+'\x0a\x20\x20'+_0x49aac6['username']+':\x20'+_0x49aac6[_0x4a2eb0(0x1d9)]+'\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20'+_0x1198fe['username']+':\x20'+_0x3b241f['expectedScoreWinner']['toFixed'](0x3)+'\x20('+(_0x3b241f['expectedScoreWinner']*0x64)['toFixed'](0x1)+_0x4a2eb0(0x1bd)+_0x49aac6['username']+':\x20'+_0x3b241f['expectedScoreLoser']['toFixed'](0x3)+'\x20('+(_0x3b241f[_0x4a2eb0(0x1dc)]*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+_0x1198fe[_0x4a2eb0(0x1d7)]+':\x20'+_0x1198fe['elo']+'\x20+\x20'+_0x3b241f['winnerChange']+'\x20=\x20'+_0x3b241f['newWinnerRating']+'\x0a\x20\x20'+_0x49aac6[_0x4a2eb0(0x1d7)]+':\x20'+_0x49aac6['elo']+'\x20+\x20'+_0x3b241f[_0x4a2eb0(0x1b9)]+_0x4a2eb0(0x1c4)+_0x3b241f['newLoserRating']+'\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a'+(_0x3b241f['winnerChange']>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(_0x3b241f[_0x4a2eb0(0x1c1)]<0x5?'Low\x20ELO\x20gain.':'')+_0x4a2eb0(0x1be);document['getElementById'](_0x4a2eb0(0x1ad))['textContent']=_0x3f35da,document['getElementById'](_0x4a2eb0(0x1cb))[_0x4a2eb0(0x1c8)][_0x4a2eb0(0x1da)]=_0x4a2eb0(0x1b5);}['getELOColor'](_0x28d8e5){const _0x10c5ad=a0_0x306f35;if(_0x28d8e5>=0x7d0)return'#50C878';else{if(_0x28d8e5>=0x708)return _0x10c5ad(0x1ce);else{if(_0x28d8e5>=0x640)return'#C0C0C0';else{if(_0x28d8e5>=0x578)return'#CD7F32';else return _0x10c5ad(0x1b0);}}}}[a0_0x306f35(0x1e2)](_0x12f18f){const _0x1a5c08=a0_0x306f35;if(_0x12f18f>=0x7d0)return _0x1a5c08(0x1e0);else{if(_0x12f18f>=0x708)return'gold';else{if(_0x12f18f>=0x640)return _0x1a5c08(0x1e3);else{if(_0x12f18f>=0x578)return'bronze';else return _0x1a5c08(0x1d5);}}}}}document[a0_0x306f35(0x1d0)]('DOMContentLoaded',()=>{const _0x53bc95=a0_0x306f35;document[_0x53bc95(0x1d2)]('sandbox')&&new ELOCalculator();});