const a25B=a25d;function a25d(a,b){const c=a25c();return a25d=function(d,e){d=d-0xfc;let f=c[d];if(a25d['cRpdJq']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a25d['YaqyBc']=g,a=arguments,a25d['cRpdJq']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a25d['YaqyBc'](f),a[i]=f):f=j,f;},a25d(a,b);}(function(a,b){const z=a25d,c=a();while(!![]){try{const d=parseInt(z(0x13b))/0x1*(-parseInt(z(0x13c))/0x2)+parseInt(z(0x137))/0x3+-parseInt(z(0x10d))/0x4+parseInt(z(0x104))/0x5+parseInt(z(0xff))/0x6+-parseInt(z(0x12e))/0x7*(-parseInt(z(0x138))/0x8)+-parseInt(z(0x114))/0x9;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a25c,0x4001f));const a25b=(function(){let a=!![];return function(b,c){const d=a?function(){if(c){const e=c['apply'](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a25a=a25b(this,function(){const A=a25d;let a;try{const d=Function(A(0x111)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');a=d();}catch(f){a=window;}const b=a[A(0x119)]=a[A(0x119)]||{},c=['log',A(0x134),'info',A(0xfd),A(0x121),A(0x12a),'trace'];for(let g=0x0;g<c[A(0x11f)];g++){const h=a25b['constructor']['prototype'][A(0x130)](a25b),i=c[g],j=b[i]||h;h[A(0x12f)]=a25b[A(0x130)](a25b),h['toString']=j['toString'][A(0x130)](j),b[i]=h;}});a25a();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document[a25B(0x11a)]('DOMContentLoaded',()=>{const C=a25B,a=document[C(0x118)]('d1-switch'),b=document['getElementById']('d2-switch');console[C(0x112)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!a),console[C(0x112)]('Ladder\x20join:\x20D2\x20radio\x20found:',!!b);function c(){const D=C;document['querySelectorAll'](D(0x10f))['forEach'](e=>{const E=D;e['addEventListener'](E(0x102),f=>{const F=E;f['target'][F(0x140)]&&(currentLadder=f[F(0x109)][F(0x101)],console[F(0x112)](F(0x12c)+currentLadder),checkUserLadderStatus());});});}c();const d=document['getElementById']('join-ladder-button');d&&d[C(0x11a)](C(0x100),handleJoinLadder),onAuthStateChanged(auth,e=>{const G=C;if(e)checkUserLadderStatus();else{const f=document[G(0x118)]('ladder-join-prompt');f&&(f['style'][G(0x13e)]='none');}});});function a25c(){const M=['z2v0rwXLBwvUDej5swq','y29UC29Szq','ywrKrxzLBNrmAxn0zw5LCG','q291BgqGBM90ihzLCMLMEsb5B3vYigfJy291BNqUifbSzwfZzsbJB250ywn0igfUigfKBwLUAxn0CMf0B3iU','BgfKzgvYlwPVAw4TC3rHDhvZigvYCM9Y','zw1WDhK','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguG','BgvUz3rO','ugXLyxnLigvUDgvYihLVDxiGDxnLCM5HBwuGDg8Gy29UzMLYBs4','zxHJzxb0Aw9U','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguGrhvVCYbSywrKzxiHifLVDsbJyw4GBM93igzVCM0GDgvHBxmGD2L0AcbVDgHLCIbWBgf5zxjZlIbuAguGCgfNzsb3AwXSihjLzNjLC2GUlI4','B25JBgLJAW','q1rg','rxjYB3iGy2HLy2TPBMCGBgfKzgvYihn0yxr1CZO','Bg9JyxrPB24','yMXVy2S','C3bSAxq','vxnLCM5HBwuGzg9LC24NDcbTyxrJAc4GugXLyxnLigvUDgvYici','DgfIBgu','sM9PBMLUzYa','tgfKzgvYignOyw5NzwqGDg86ia','z2v0swruB2TLBG','ndjjqvDkwgu','x19WCM90B19F','yMLUza','BgfKzgvYlwPVAw4TC3rHDhvZ','zxHPC3rZ','y2XHC3noyw1L','D2fYBG','rfvp','Dgv4DenVBNrLBNq','odiYmtiZEuvjyxnP','nJa0nJy0yxv2zgPP','CgXHEwvYC0qY','y3vYCMvUDfvZzxi','m05jz1Lysq','mJiXodC4CMTXChHH','CgXHEwvYC0r1B3m','zgLZCgXHEq','igXHzgrLCIeGvgHLihbHz2uGD2LSBcbYzwzYzxnOlI4U','y2HLy2TLza','AM9PBI11C2vYBMfTzs1PBNb1Da','CgXHEwvYC0nurG','ww91ig11C3qGyMuGC2LNBMvKigLUihrVigPVAw4GysbSywrKzxiU','zxjYB3i','Dg9mB3DLCKnHC2u','mtyXndiWnevdtgPbzq','y2XPy2S','DMfSDwu','y2HHBMDL','BM9UugfYDgLJAxbHBNrZ','mtG1nJu0mhzMt2PLDq','CgXHEwvYCW','zgLZywjSzwq','Cg9ZAxrPB24','vMvYAwz5Aw5NihvZzxjUyw1LlI4U','DgfYz2v0','rxjYB3iGy2HLy2TPBMCG','ww91igfYzsbHBhjLywr5ihbHCNqGB2yGDgHLia','igXHzgrLCI4','mZy2mtC2rvfhqKrA','qxv0AgvUDgLJyxrPB24GzMfPBgvKlIbqBgvHC2uGC2LNBIbPBIbHz2fPBI4','Aw5WDxrBBMfTzt0IBgfKzgvYiL0','BM9Uzq','CMv0DxjUicHMDw5JDgLVBIGPia','Bg9N','zw1HAwW','nJeZmJeWnxDJuM9etG','C3r5Bgu','CgXHEwvYC0qZ','DwLK'];a25c=function(){return M;};return a25c();}function getCollectionName(a){const H=a25B;switch(a?.['toUpperCase']()){case'D1':return H(0x105);case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case H(0x135):return H(0x13d);case H(0x124):return H(0x142);default:console['warn']('Unknown\x20ladder\x20type:\x20'+a+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const I=a25B;console[I(0x112)]('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const a=auth['currentUser'],b=document[I(0x118)]('ladder-join-prompt'),c=document[I(0x118)]('join-ladder-type'),d=document[I(0x118)]('tiny-join-button');if(!a||!a[I(0x117)]||!b||!c||!d){if(b)b[I(0x115)][I(0x13e)]=I(0x110);if(d)d['style']['display']='none';return;}try{try{await a[I(0x12d)](![]);}catch(h){console['error']('Authentication\x20verification\x20failed:',h),b['style'][I(0x13e)]=I(0x110),d[I(0x115)]['display']=I(0x110);return;}const e=getCollectionName(currentLadder),f=doc(db,e,a['uid']),g=await getDoc(f);if(g[I(0x132)]())b[I(0x115)][I(0x13e)]='none',d['style']['display']=I(0x110);else{b['style']['display']=I(0x110),d['style'][I(0x13e)]=I(0x127),c[I(0x136)]=currentLadder,d[I(0x123)]=()=>{const J=I;b['style'][J(0x13e)]===J(0x127)?b['style']['display']='none':b['style'][J(0x13e)]=J(0x127);};const i=document[I(0x118)](I(0x141)),j=document[I(0x118)](I(0x131));if(i)i[I(0x101)]='';j&&(j['textContent']='',j['className']=I(0x131));}}catch(k){console[I(0xfd)](I(0x125),k),b[I(0x115)][I(0x13e)]='none',d[I(0x115)][I(0x13e)]=I(0x110);}}async function handleJoinLadder(){const K=a25B,a=auth[K(0x13a)],b=document['getElementById']('join-ladder-button'),c=document['getElementById'](K(0x131)),d=document[K(0x118)](K(0x141));if(!a||!a['uid']){c['textContent']=K(0xfc),c[K(0x133)]=K(0x11c);return;}try{await a['getIdToken'](!![]);}catch(e){console['error']('Authentication\x20error:',e),c[K(0x136)]=K(0x10e),c[K(0x133)]='ladder-join-status\x20error';return;}if(!d||!d['value']['trim']()){c[K(0x136)]=K(0x120),c['className']='ladder-join-status\x20error';return;}try{b[K(0x106)]=!![],c['textContent']=K(0x108),c['className']='ladder-join-status\x20loading';let f='',g=null;const h=['players',K(0x139),K(0x116),'playersDuos',K(0x142),K(0x103)];for(const s of h){try{const t=doc(db,s,a['uid']),u=await getDoc(t);if(u[K(0x132)]()){g=u['data']();if(g['username']){f=g['username'];break;}}}catch(v){console['error'](K(0x10a)+s+':',v);}}!f&&a['email']&&(f=a[K(0x113)][K(0x128)]('@')[0x0]);if(!f){c['textContent']=K(0x11b),c['className']=K(0x11c),b[K(0x106)]=![];return;}const i=d[K(0x101)]['trim']();if(f&&i['toLowerCase']()!==f[K(0xfe)]()){c['textContent']=K(0x129)+f+'\x22\x20to\x20confirm.',c['className']=K(0x11c),b['disabled']=![];return;}c[K(0x136)]=K(0x12b)+currentLadder+'\x20ladder...';const j=getCollectionName(currentLadder),k=doc(db,j,a['uid']),l=await getDoc(k);if(l[K(0x132)]()){c['textContent']=K(0x10b)+currentLadder+K(0x10c),c['className']='ladder-join-status\x20error',b['disabled']=![];return;}try{await a[K(0x12d)](!![]);}catch(w){c[K(0x136)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',c['className']='ladder-join-status\x20error',b[K(0x106)]=![];return;}const m=f,n=collection(db,j),o=query(n,orderBy(K(0x107),'desc'),limit(0x1)),p=await getDocs(o);let q=0x1;if(!p[K(0x11d)]){const x=p['docs'][0x0]['data']();q=(x[K(0x107)]||0x0)+0x1;}const r={'username':m,'email':a[K(0x113)],'eloRating':0x4b0,'position':q,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(k,r),currentLadder==='DUOS'?c['textContent']=K(0x122):c[K(0x136)]=K(0x11e)+currentLadder+K(0x13f),c['className']='ladder-join-status\x20success',setTimeout(()=>{const L=K;window[L(0x126)]['reload']();},0x7d0);}catch(y){console[K(0xfd)]('Error\x20joining\x20ladder:',y),c[K(0x136)]='Error\x20joining\x20ladder:\x20'+y['message'],c[K(0x133)]='ladder-join-status\x20error',b['disabled']=![];}}