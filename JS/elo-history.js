const a16p=a16d;(function(a,b){const m=a16d,c=a();while(!![]){try{const d=parseInt(m(0x105))/0x1*(parseInt(m(0xe7))/0x2)+parseInt(m(0x103))/0x3*(-parseInt(m(0xe8))/0x4)+parseInt(m(0xfe))/0x5*(parseInt(m(0xe5))/0x6)+-parseInt(m(0xf7))/0x7*(parseInt(m(0x104))/0x8)+parseInt(m(0xef))/0x9+parseInt(m(0xee))/0xa*(-parseInt(m(0xff))/0xb)+-parseInt(m(0x102))/0xc;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a16c,0x6b932));const a16b=(function(){let a=!![];return function(b,c){const d=a?function(){const n=a16d;if(c){const e=c[n(0xf1)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a16a=a16b(this,function(){const o=a16d;let a;try{const d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');a=d();}catch(f){a=window;}const b=a[o(0xf8)]=a['console']||{},c=['log',o(0xe9),'info','error',o(0xfd),'table',o(0x107)];for(let g=0x0;g<c['length'];g++){const h=a16b[o(0xec)]['prototype'][o(0xe6)](a16b),i=c[g],j=b[i]||h;h[o(0xf2)]=a16b['bind'](a16b),h[o(0xf5)]=j[o(0xf5)]['bind'](j),b[i]=h;}});a16a();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a16d(a,b){const c=a16c();return a16d=function(d,e){d=d-0xe5;let f=c[d];if(a16d['MvOxWi']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a16d['dlbitm']=g,a=arguments,a16d['MvOxWi']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a16d['dlbitm'](f),a[i]=f):f=j,f;},a16d(a,b);}const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':a16p(0xf9),'elo':0x4b0}];async function getUsernameById(a){const q=a16p;try{if(!a)return'Unknown\x20Player';const b=await getDoc(doc(db,'players',a));return b[q(0xfa)]()?b['data']()[q(0x101)]:'Unknown\x20Player';}catch(c){return console[q(0xfc)]('Error\x20fetching\x20username:',c),q(0xeb);}}export async function recordEloChange({playerId:a,previousElo:b,newElo:c,opponentId:d,matchResult:e,previousPosition:f,newPosition:g,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:h}){const r=a16p;try{const i=doc(collection(db,'eloHistory'));let j='match';if(isPromotion)j=r(0xfb);if(isDemotion)j='demotion';let k=r(0xf9);if(c>=0x834)k=r(0xea);else{if(c>=0x708)k=r(0x106);else{if(c>=0x640)k=r(0xf3);else{if(c>=0x578)k='Bronze';}}}return await setDoc(i,{'type':j,'player':a,'opponent':d,'previousElo':b,'newElo':c,'change':c-b,'matchResult':e,'previousPosition':f,'newPosition':g,'rankAchieved':k,'timestamp':h}),console['log']('ELO\x20history\x20recorded\x20for\x20'+a),!![];}catch(l){console['error']('Error\x20recording\x20ELO\x20history:',l);throw l;}}function a16c(){const u=['mZbMvuTqq1m','ntu4nZC0mhzHtNzTua','zgvZyW','yxbWBhK','x19WCM90B19F','u2LSDMvY','DgLTzxn0yw1W','Dg9tDhjPBMC','BwfW','otHqv3HSwNO','y29UC29Szq','vw5Yyw5Rzwq','zxHPC3rZ','ChjVBw90Aw9U','zxjYB3i','zxHJzxb0Aw9U','mZqWmtG1twPusfnR','mZa1otm5n3HJzLbZua','CgXHEwvY','DxnLCM5HBwu','mJeYmdG4Bxn0zM9x','nJe4uxfku01Q','mZe1nZzSwLzdvKy','mtmXntu1uK9Uv01k','r29Sza','DhjHy2u','nJzUtw1dwvK','yMLUza','ohnKu05cuG','mta2mZjbzM1KqMu','D2fYBG','rw1LCMfSza','vw5RBM93BIbqBgf5zxi','y29UC3rYDwn0B3i','rxjYB3iGzMv0y2HPBMCGruXpigHPC3rVCNK6'];a16c=function(){return u;};return a16c();}export async function getEloHistory(){const s=a16p;try{const a=collection(db,'eloHistory'),b=query(a,orderBy(s(0xf4),s(0xf0))),c=await getDocs(b),d=c['docs'][s(0xf6)](async f=>{const t=s,g=f['data'](),[h,i]=await Promise['all']([getUsernameById(g[t(0x100)]),getUsernameById(g['opponent'])]);return{...g,'playerUsername':h,'opponentUsername':i,'change':g['newElo']-g['previousElo'],'timestamp':g['timestamp']};}),e=await Promise['all'](d);return{'entries':e};}catch(f){console['error'](s(0xed),f);throw f;}}export function resetPagination(){lastVisible=null;}