const a17_0x4074f1=a17_0x22e9,a17_0x397df5=(function(){let _0x548c3b=!![];return function(_0x55c608,_0x765ec4){const _0xaecffc=_0x548c3b?function(){if(_0x765ec4){const _0x5bcb49=_0x765ec4['apply'](_0x55c608,arguments);return _0x765ec4=null,_0x5bcb49;}}:function(){};return _0x548c3b=![],_0xaecffc;};}()),a17_0x43f671=a17_0x397df5(this,function(){const _0x57a481=a17_0x22e9;let _0x1b392c;try{const _0x160429=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1b392c=_0x160429();}catch(_0x2eaba4){_0x1b392c=window;}const _0x48c534=_0x1b392c[_0x57a481(0xf2)]=_0x1b392c[_0x57a481(0xf2)]||{},_0x3f98e2=[_0x57a481(0xe7),_0x57a481(0x109),'info','error','exception',_0x57a481(0x100),'trace'];for(let _0x32d3ac=0x0;_0x32d3ac<_0x3f98e2['length'];_0x32d3ac++){const _0x4c2ee2=a17_0x397df5['constructor']['prototype'][_0x57a481(0xe0)](a17_0x397df5),_0x1071ab=_0x3f98e2[_0x32d3ac],_0x1421c5=_0x48c534[_0x1071ab]||_0x4c2ee2;_0x4c2ee2['__proto__']=a17_0x397df5['bind'](a17_0x397df5),_0x4c2ee2[_0x57a481(0x10b)]=_0x1421c5[_0x57a481(0x10b)]['bind'](_0x1421c5),_0x48c534[_0x1071ab]=_0x4c2ee2;}});function a17_0x22e9(_0xd010e3,_0x53bcc2){const _0x43f671=a17_0x2dfc();return a17_0x22e9=function(_0x397df5,_0xb7e40d){_0x397df5=_0x397df5-0xdf;let _0x2dfc16=_0x43f671[_0x397df5];return _0x2dfc16;},a17_0x22e9(_0xd010e3,_0x53bcc2);}a17_0x43f671();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';function a17_0x2dfc(){const _0x98f9b9=['createListener','bind','\x20operation','firebase-suspend-indicator','\x20operations\x20during\x20idle\x20state','function','safeOperation','[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20','log','system','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','code','query','args','pendingTimeout','debug','[FirebaseIdle]\x20Resuming\x20listeners:','test','delete','console','enabled','suspendSession','error','size','catch','clear','activeListeners','update','[FirebaseIdle]\x20Resuming\x20listener:','getDocuments','remove','Executing\x20delayed\x20','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','table','[FirebaseIdle]\x20Error\x20resuming\x20listener:','_suspendedListeners','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...','getElementById','network','set','pendingOperations','warn','[FirebaseIdle]\x20Successfully\x20suspended\x20listener:','toString'];a17_0x2dfc=function(){return _0x98f9b9;};return a17_0x2dfc();}import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x9a99f9=a17_0x22e9;this[_0x9a99f9(0xf9)]=new Map(),this['pendingOperations']=new Map(),this[_0x9a99f9(0xed)]=null,this['blockedOperations']=0x0,this['debug']=![];}['checkSessionActive'](){const _0x421342=a17_0x22e9;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn']('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+_0x421342(0xe3)),![];if(window['RDL_NETWORK_ERROR']===!![])return console[_0x421342(0xe7)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async[a17_0x4074f1(0xe5)](_0xf829ee,_0x251881,..._0x449345){const _0x248a49=a17_0x4074f1;if(!this['checkSessionActive']()){const _0x4ddcc2=_0x251881+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x4ddcc2,{'operation':_0xf829ee,'operationType':_0x251881,'args':_0x449345}),!this['pendingTimeout']&&(this[_0x248a49(0xed)]=setTimeout(()=>{const _0x436a1f=_0x248a49;this['pendingOperations'][_0x436a1f(0xf8)](),this[_0x436a1f(0xed)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0xf829ee(..._0x449345);}catch(_0x3ecac8){if(_0x3ecac8[_0x248a49(0xea)]==='unavailable'||_0x3ecac8['code']==='resource-exhausted'||_0x3ecac8['message']&&_0x3ecac8['message']['includes'](_0x248a49(0x106)))return handleNetworkError(),null;throw _0x3ecac8;}}async['getDocument'](_0xfe7130){return this['safeOperation'](getDoc,'get',_0xfe7130);}async[a17_0x4074f1(0xfc)](_0x572ddd){const _0x1895c2=a17_0x4074f1;return this['safeOperation'](getDocs,_0x1895c2(0xeb),_0x572ddd);}async['addDocument'](_0x3fc598,_0x5ad3a2){return this['safeOperation'](addDoc,'add',_0x3fc598,_0x5ad3a2);}async['setDocument'](_0x5118b3,_0xba645e,_0x3f76a9={}){const _0x5d2a94=a17_0x4074f1;return this['safeOperation'](setDoc,_0x5d2a94(0x107),_0x5118b3,_0xba645e,_0x3f76a9);}async['updateDocument'](_0xc94824,_0x157554){const _0x1e714c=a17_0x4074f1;return this['safeOperation'](updateDoc,_0x1e714c(0xfa),_0xc94824,_0x157554);}async['deleteDocument'](_0x39a4af){const _0x3a3b7d=a17_0x4074f1;return this['safeOperation'](deleteDoc,_0x3a3b7d(0xf1),_0x39a4af);}['suspendAllListeners'](){const _0x16e3dc=a17_0x4074f1;console['log'](_0x16e3dc(0x103),this['activeListeners'][_0x16e3dc(0xf6)]),this[_0x16e3dc(0x102)]=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x34137e,_0x5295d0)=>{const _0x5a1089=_0x16e3dc;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x5295d0);if(typeof _0x34137e==='function')try{_0x34137e(),console['log'](_0x5a1089(0x10a),_0x5295d0);}catch(_0x3e4fba){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x5295d0,_0x3e4fba);}else{if(_0x34137e&&typeof _0x34137e['unsubscribe']==='function')try{_0x34137e['unsubscribe'](),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x5295d0);}catch(_0x2409b5){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x5295d0,_0x2409b5);}}}),this['activeListeners']['clear']();if(this['debug']){const _0xdc07ea=document['createElement']('div');_0xdc07ea['id']=_0x16e3dc(0xe2),_0xdc07ea['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xdc07ea['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0xdc07ea);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x3ac479=a17_0x4074f1;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log'](_0x3ac479(0xef),this[_0x3ac479(0x102)]['size']),this[_0x3ac479(0x102)]['forEach']((_0x345a83,_0x50b80f)=>{const _0x1ed0bb=_0x3ac479;console['log'](_0x1ed0bb(0xfb),_0x50b80f);try{if(typeof _0x345a83===_0x1ed0bb(0xe4)){console[_0x1ed0bb(0x109)](_0x1ed0bb(0xe9),_0x50b80f);return;}const {query:_0x47d902,callback:_0x3fa20e,options:_0x2ac818}=_0x345a83;if(_0x47d902&&_0x3fa20e){const _0xd1a79=onSnapshot(_0x47d902,_0x3fa20e,_0x2ac818||{});this[_0x1ed0bb(0xf9)][_0x1ed0bb(0x107)](_0x50b80f,_0xd1a79),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x50b80f);}}catch(_0x26d88e){console[_0x1ed0bb(0xf5)](_0x1ed0bb(0x101),_0x50b80f,_0x26d88e);}}),this[_0x3ac479(0x102)][_0x3ac479(0xf8)]();const _0x13128f=document[_0x3ac479(0x105)]('firebase-suspend-indicator');_0x13128f&&_0x13128f[_0x3ac479(0xfd)](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}[a17_0x4074f1(0xdf)](_0x4a1dda,_0x1eda4d,_0x51a902={},_0x353333=null){const _0x3c2b49=a17_0x4074f1,_0x3d046f=_0x353333||'listener_'+Date['now']()+'_'+Math['random']()[_0x3c2b49(0x10b)](0x24)['substr'](0x2,0x9);this[_0x3c2b49(0xee)]&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x3d046f);if(!this['checkSessionActive']())return console[_0x3c2b49(0xe7)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x3d046f),()=>{};try{const _0x967d7=onSnapshot(_0x4a1dda,_0x1eda4d,_0x51a902);return this['activeListeners'][_0x3c2b49(0x107)](_0x3d046f,{'unsubscribe':_0x967d7,'query':_0x4a1dda,'callback':_0x1eda4d,'options':_0x51a902}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x3d046f),console[_0x3c2b49(0xe7)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x477d32=_0x3c2b49;this['debug']&&console['log'](_0x477d32(0xe6)+_0x3d046f);try{_0x967d7(),this[_0x477d32(0xf9)]['delete'](_0x3d046f),this[_0x477d32(0xee)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x3d046f),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x1ac489){console[_0x477d32(0xf5)]('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x3d046f+':',_0x1ac489);}};}catch(_0x3f9749){return console['error'](_0x3c2b49(0xff)+_0x3d046f+':',_0x3f9749),()=>{};}}['executePendingOperations'](_0x1b2a62='all'){const _0x33930a=a17_0x4074f1;console['log']('Executing\x20pending\x20'+_0x1b2a62+'\x20operations:\x20'+this[_0x33930a(0x108)]['size']+'\x20total\x20operations');const _0x2c78b3=new Map(this[_0x33930a(0x108)]);this['pendingOperations']['clear'](),_0x2c78b3['forEach']((_0x1946f1,_0x37d139)=>{const _0x383905=_0x33930a;_0x1b2a62==='all'||_0x1946f1['operationType']===_0x1b2a62?(console[_0x383905(0xe7)](_0x383905(0xfe)+_0x1946f1['operationType']+_0x383905(0xe1)),this['safeOperation'](_0x1946f1['operation'],_0x1946f1['operationType'],..._0x1946f1[_0x383905(0xec)])['catch'](_0x1e3e16=>console[_0x383905(0xf5)]('Error\x20executing\x20pending\x20operation:',_0x1e3e16))):this['pendingOperations']['set'](_0x37d139,_0x1946f1);});}['enableDebug'](_0x2a117e=!![]){const _0x1d53f1=a17_0x4074f1;this['debug']=_0x2a117e,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x2a117e?_0x1d53f1(0xf3):'disabled'));if(_0x2a117e){const _0x47eec2=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log'](_0x1d53f1(0x104)),this['getDocument'](doc(db,_0x1d53f1(0xe8),_0x1d53f1(0xf0)))['then'](_0x384419=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x384419);})[_0x1d53f1(0xf7)](_0x18a0c5=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x18a0c5);})['finally'](()=>{const _0xe4c284=_0x1d53f1;console[_0xe4c284(0xe7)]('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x47eec2;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x12d856=a17_0x4074f1,_0x2fa70d=window[_0x12d856(0xf4)]||function(){},_0x5be732=window['resumeSession']||function(){};window['suspendSession']=function(){_0x2fa70d(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x5be732(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;