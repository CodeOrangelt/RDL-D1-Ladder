const a6Y=a6b;(function(a,b){const X=a6b,c=a();while(!![]){try{const d=-parseInt(X(0xb4))/0x1+-parseInt(X(0x13f))/0x2+-parseInt(X(0xcf))/0x3+parseInt(X(0x1a3))/0x4*(parseInt(X(0xd1))/0x5)+-parseInt(X(0xc5))/0x6+parseInt(X(0x12c))/0x7*(parseInt(X(0x18d))/0x8)+parseInt(X(0x118))/0x9;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a6a,0x54227));import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6Y(0x121),'muteFromDate':new Date('2025-07-02')[a6Y(0x140)]()}];function a6b(a,b){const c=a6a();return a6b=function(d,e){d=d-0xa5;let f=c[d];if(a6b['yaOFxc']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a6b['Icnnrb']=g,a=arguments,a6b['yaOFxc']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a6b['Icnnrb'](f),a[i]=f):f=j,f;},a6b(a,b);}function isUsernameMuted(a,b){const Z=a6Y;if(!a)return![];const c=mutedUsers['find'](e=>e[Z(0x12b)]===a);if(!c)return![];if(!b)return!![];const d=b instanceof Date?b['getTime']():b[Z(0xce)]?b['seconds']*0x3e8:Date['now']();return d>=c[Z(0x198)];}function filterComment(a,b,c){if(!a)return'-';if(isUsernameMuted(b,c))return'Muted.';return a;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(a,b,c){const d='u:'+(c['filterUsername']||'');return'previewCache_'+a+'_p'+b+'_'+d;}function getCachedPage(a){const a0=a6Y,b=sessionStorage[a0(0xe6)](a);if(b)try{return JSON['parse'](b);}catch(c){return console[a0(0x126)]('Failed\x20to\x20parse\x20cache:',c),sessionStorage['removeItem'](a),null;}return null;}function cachePage(a,b){const a1=a6Y;try{sessionStorage[a1(0xe3)](a,JSON[a1(0x103)](b));}catch(c){console['error'](a1(0x193),c);}}function getEloColor(a){const a2=a6Y,b=Number(a);if(b>=0x7d0)return'#50C878';else{if(b>=0x708)return'#FFD700';else{if(b>=0x640)return'#b9f1fc';else{if(b>=0x578)return a2(0xea);else return a2(0xd0);}}}}function formatDate(a,b=![]){const a3=a6Y;if(!a||!a[a3(0xce)])return'N/A';const c=new Date(a['seconds']*0x3e8);return b?c[a3(0x139)]():c[a3(0x14c)]();}function truncateComment(a,b=0x1e){const a4=a6Y;if(!a)return'-';if(a[a4(0x117)]<=b)return a;return a[a4(0x129)](0x0,b)+a4(0x185);}function formatCommentDate(a){const a5=a6Y;if(!a||!a['seconds'])return'';const b=new Date(a[a5(0xce)]*0x3e8),c=new Date(),d=Math['abs'](c-b),e=Math['floor'](d/(0x3e8*0x3c*0x3c*0x18));if(e===0x0)return a5(0xa7);else{if(e===0x1)return'Yesterday';else return e<0x7?e+'\x20days\x20ago':b[a5(0x14c)]();}}function setLoadingIndicator(a){const a6=a6Y,b=document[a6(0xd4)](a6(0x11e));if(b)b[a6(0x11a)][a6(0x151)]=a?a6(0x16a):a6(0x18f);}export function updatePreviewLadderModeUI(){const a7=a6Y,a=document[a7(0xd4)](a7(0xaf)),b=document[a7(0xd4)](a7(0x187)),c=document['getElementById']('preview-d2-button'),d=document['getElementById']('preview-d3-button');if(a)a['textContent']=previewState['currentMode'];if(b)b['classList'][a7(0xcc)](a7(0x104),previewState['currentMode']==='D1');if(c)c[a7(0x11c)]['toggle'](a7(0x104),previewState['currentMode']==='D2');if(d)d['classList']['toggle']('active',previewState[a7(0x17d)]==='D3');}function updatePreviewPaginationControls(a){const a8=a6Y,b=document['getElementById'](a8(0xc8)),c=document[a8(0xd4)]('previewNextPage'),d=document['getElementById'](a8(0x171));if(!b||!c||!d)return;d['textContent']='Page\x20'+previewState['currentPage'],b[a8(0x152)]=previewState['currentPage']<=0x1,c[a8(0x152)]=!a;}function setPreviewLoadingState(a){const a9=a6Y;previewState[a9(0x160)]=a,setLoadingIndicator(a);const b=document['getElementById']('recent-matches-preview'),c=b?b[a9(0x17b)](a9(0xad)):null,d=document['getElementById']('previewPrevPage'),e=document[a9(0xd4)](a9(0x12e)),f=document['getElementById'](a9(0x187)),g=document[a9(0xd4)]('preview-d2-button'),h=document[a9(0xd4)]('applyFilterBtn'),i=document[a9(0xd4)]('clearFilterBtn');if(c&&!a)c[a9(0x11a)]['display']=a9(0x18f);else c&&a&&(c['style']['display']='block');!a&&b&&!b[a9(0x17b)](a9(0x1a6))&&!b['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(b['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?'\x20matching\x20filters':'')+a9(0x11f));if(d)d[a9(0x152)]=a||previewState[a9(0x1a2)]<=0x1;if(e)e['disabled']=a;if(f)f['disabled']=a;if(g)g['disabled']=a;if(h)h[a9(0x152)]=a;if(i)i['disabled']=a;}function applyClientFilters(a){const aa=a6Y;if(!previewState['filterUsername'])return a;const b=previewState['filterUsername'][aa(0xd2)]();return a['filter'](c=>{const ab=aa,d=(c['winnerUsername']||'')[ab(0xd2)](),e=(c['loserUsername']||'')['toLowerCase']();return d[ab(0xe5)](b)||e[ab(0xe5)](b);});}function applyEnhancedClientFilters(a){const ac=a6Y;if(!hasEnhancedFilters())return a;return a[ac(0xb1)](b=>{const ad=ac;if(previewState[ad(0xfd)][ad(0xed)]){const c=previewState[ad(0xfd)]['pilots'][ad(0xd2)](),d=(b['winnerUsername']||'')[ad(0xd2)](),e=(b[ad(0x116)]||'')['toLowerCase']();if(!d['includes'](c)&&!e[ad(0xe5)](c))return![];}if(previewState['enhancedFilters'][ad(0x1a5)]){const f=previewState['enhancedFilters']['levels']['toLowerCase'](),g=(b['mapPlayed']||'')[ad(0xd2)]();if(!g['includes'](f))return![];}if(previewState['enhancedFilters']['subgames'][ad(0x117)]>0x0){const h=b['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames'][ad(0xe5)](h))return![];}return!![];});}function hasEnhancedFilters(){const ae=a6Y;return previewState[ae(0xfd)][ae(0xed)]||previewState[ae(0xfd)]['levels']||previewState[ae(0xfd)][ae(0x191)][ae(0x117)]>0x0;}function clearEnhancedFilters(){const af=a6Y;previewState[af(0xfd)]={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')[af(0x15a)]='',document[af(0xd4)](af(0xb0))[af(0x15a)]='';const a=document[af(0xd4)](af(0xba));for(let b of a['options']){b[af(0x179)]=![];}}function jumpToPage(a){const ag=a6Y,b=document['getElementById'](ag(0xbc)),c=previewState['currentPage'];let d=c;switch(a){case'start':d=0x1;break;case'end':d=Math['max'](c+0xa,previewState['totalPages']||c+0xa);break;case'+1':d=c+0x1;break;case'+5':d=c+0x5;break;case ag(0x112):d=c+0xa;break;case'-1':d=Math[ag(0x174)](0x1,c-0x1);break;case'-5':d=Math['max'](0x1,c-0x5);break;case ag(0x133):d=Math['max'](0x1,c-0xa);break;case ag(0x17f):const e=parseInt(b[ag(0x15a)]);e&&e>0x0&&(d=e,b['value']='');break;}d!==c&&d>0x0&&(previewState['currentPage']=d,loadRecentMatchesPreview(ag(0xbd)));}export async function loadRecentMatchesPreview(a=a6Y(0xdf)){const ah=a6Y,b=document['getElementById']('recent-matches-preview'),c=document[ah(0xd4)]('match-card-template');if(previewState[ah(0x160)]||!b||!c)return;a===ah(0xdf)&&(console['log'](ah(0xfb)),Object[ah(0xc3)](sessionStorage)['forEach'](k=>{const ai=ah;k['includes'](ai(0xeb)+previewState['currentMode'])&&sessionStorage[ai(0x157)](k);}));let d=previewState['currentPage'];if(a==='next')d++;else{if(a===ah(0xca))d--;else a===ah(0xdf)&&(d=0x1,previewState[ah(0x1a0)]=null,previewState[ah(0x15e)]=null);}if(d<0x1)d=0x1;const e=previewState['currentPage'];previewState['currentPage']=d,updatePreviewPaginationControls(!![]);const f={'filterUsername':previewState[ah(0xb2)]},g=getCacheKey(previewState['currentMode'],d,f),h=a!=='current'?getCachedPage(g):null;if(h){console['log']('Rendering\x20page\x20'+d+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(h[ah(0xef)]),updatePreviewPaginationControls(h['hasNextPage']),setPreviewLoadingState(![]);return;}console[ah(0x169)]('Cache\x20miss\x20for\x20page\x20'+d+ah(0x142)),setPreviewLoadingState(!![]),b[ah(0xf8)]=ah(0x128);const i=previewState['currentMode']==='D1'?'approvedMatches':previewState[ah(0x17d)]==='D2'?ah(0x127):'approvedMatchesD3',j=previewState[ah(0x17d)]==='D1'?'createdAt':'approvedAt';try{const k=collection(window['db'],i);let l=[orderBy(j,ah(0x18b))];if(d===0x1)console[ah(0x169)]('Loading\x20first\x20page\x20from\x20Firestore'),l[ah(0x14d)](limit(previewState[ah(0x10d)]));else{if(a===ah(0x148)&&previewState[ah(0x15e)])console['log']('Loading\x20next\x20page\x20using\x20cursor'),l[ah(0x14d)](startAfter(previewState['lastVisible'])),l['push'](limit(previewState[ah(0x10d)]));else{console['log']('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const v=d*previewState['matchesPerPage'];l['push'](limit(v));}}const m=query(k,...l),n=await getDocs(m);let o=n['docs'];if(d>0x1&&a!=='next'){const w=(d-0x1)*previewState[ah(0x10d)];o=o[ah(0x16d)](w,w+previewState[ah(0x10d)]);}if(o[ah(0x117)]===0x0){console[ah(0x169)]('No\x20results\x20found\x20for\x20this\x20page');a===ah(0x148)&&(previewState[ah(0x1a2)]=e,updatePreviewPaginationControls(![]));b['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState[ah(0xb2)]?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=o[0x0],previewState[ah(0x15e)]=o[o[ah(0x117)]-0x1];const r=o[ah(0xd8)](x=>({'id':x['id'],...x[ah(0xb6)]()}));let s=![];if(o[ah(0x117)]===previewState[ah(0x10d)]){const x=query(k,orderBy(j,ah(0x18b)),startAfter(previewState['lastVisible']),limit(0x1)),y=await getDocs(x);s=!y['empty'];}const t=applyClientFilters(r),u={'docsData':r,'hasNextPage':s};cachePage(getCacheKey(previewState['currentMode'],previewState[ah(0x1a2)],f),u);if(d>0x1&&a!=='next')for(let z=0x1;z<d;z++){const A=(z-0x1)*previewState['matchesPerPage'],B=A+previewState['matchesPerPage'],C=n[ah(0x17a)]['slice'](A,B);if(C['length']>0x0){const D=C['map'](F=>({'id':F['id'],...F['data']()})),E=!![];cachePage(getCacheKey(previewState[ah(0x17d)],z,f),{'docsData':D,'hasNextPage':E}),console[ah(0x169)]('Cached\x20intermediary\x20page\x20'+z);}}t[ah(0x117)]===0x0&&previewState['filterUsername']?b['innerHTML']=ah(0x196)+previewState['filterUsername']+ah(0x1aa):renderMatchCards(t),updatePreviewPaginationControls(s);}catch(F){console[ah(0x126)](ah(0x161)+previewState[ah(0x17d)]+ah(0xa6),F),b['innerHTML']=ah(0xc1)+F['message']+ah(0xd6),updatePreviewPaginationControls(![]),previewState['currentPage']=e;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(a){const aj=a6Y,b=document[aj(0xd4)]('recent-matches-preview'),c=document[aj(0xd4)](aj(0xf4));if(!b||!c)return;!b[aj(0x17b)](aj(0x1a7))&&(b['innerHTML']='');if(!a||a[aj(0x117)]===0x0){if(!b[aj(0x17b)]('.matches-loading[style*=\x22color:\x20red\x22]')){const h=hasEnhancedFilters()?aj(0x12f):previewState[aj(0xb2)]?'\x20matching\x20filters':'';b[aj(0xf8)]=aj(0xc4)+h+'.</div>';}return;}const d=applyEnhancedClientFilters(a);if(d['length']===0x0){b[aj(0xf8)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const e=d['map'](i=>getAllCommentsForMatch(i['id']));let f=[];try{f=await Promise[aj(0x183)](e);}catch(i){console[aj(0x126)]('Error\x20fetching\x20comments\x20batch:',i),f=d[aj(0xd8)](()=>[]);}const g={};f[aj(0x188)]((j,k)=>{g[d[k]['id']]=j||[];}),d['forEach'](j=>{const ak=aj,k=c['content'][ak(0x13e)](!![]),l=k[ak(0x17b)]('.match-display-wrapper'),m=k['querySelector']('.match-card'),n=getEloRankClass(j[ak(0x1a4)]);m[ak(0x11c)][ak(0xc7)](ak(0x16c)+n),m['querySelector'](ak(0x138))['textContent']=j[ak(0x11b)]||'Unknown\x20Map',m['querySelector']('.match-date')['textContent']=formatDate(j[ak(0x181)]||j[ak(0x119)]);const o=m[ak(0x17b)]('.player.winner\x20.player-name');o[ak(0x122)]=j[ak(0x12d)]||'Unknown',o[ak(0x11a)]['color']=getEloColor(j['winnerOldElo']),m['querySelector'](ak(0xe4))['textContent']=j[ak(0x18a)]??0x0;const p=m['querySelector']('.player.winner\x20.player-suicides'),q=j[ak(0x186)]||0x0;p['textContent']='S:\x20'+q;const r=m['querySelector'](ak(0x162));r[ak(0x122)]=j[ak(0x116)]||'Unknown',r[ak(0x11a)][ak(0x1a8)]=getEloColor(j[ak(0xb8)]),m[ak(0x17b)](ak(0xf7))['textContent']=j[ak(0x145)]??0x0;const s=m[ak(0x17b)]('.player.loser\x20.player-suicides'),t=j['loserSuicides']||0x0;s[ak(0x122)]='S:\x20'+t;const u=m['querySelector'](ak(0xbf));if(u){if(j[ak(0xdb)]&&j['subgameType']['trim']()!==''){u[ak(0x122)]=j[ak(0xdb)],u['style']['display']='block';const E=getSubgameClass(j[ak(0xdb)]);E&&u[ak(0x11c)][ak(0xc7)](E);}else u[ak(0x122)]=ak(0x13c),u[ak(0x11a)][ak(0x151)]=ak(0x16a),u[ak(0x11a)]['opacity']=ak(0x177);}const v=m[ak(0x17b)](ak(0x19e)),w=m[ak(0x17b)](ak(0xda)),x=j[ak(0x114)]||'',y=j['loserComment']||'',z=j[ak(0x181)]||j[ak(0x119)],A=filterComment(x,j['winnerUsername'],z),B=filterComment(y,j[ak(0x116)],z);v[ak(0x122)]='\x22'+truncateComment(x)+'\x22',w[ak(0x122)]='\x22'+truncateComment(y)+'\x22';x&&!isUsernameMuted(j['winnerUsername'],z)?v[ak(0x199)]=()=>showPreviewCommentPopup(A,j['winnerUsername']||ak(0x195),getEloColor(j[ak(0x1a4)])):(v['textContent']=A===ak(0xfc)?ak(0xfc):'-',v['style'][ak(0x14e)]='default',v['onclick']=null);y&&!isUsernameMuted(j[ak(0x116)])?w['onclick']=()=>showPreviewCommentPopup(B,j[ak(0x116)]||ak(0x190),getEloColor(j['loserOldElo'])):(w['textContent']=B===ak(0xfc)?ak(0xfc):'-',w[ak(0x11a)][ak(0x14e)]=ak(0x111),w[ak(0x199)]=null);const C=l?.['querySelector']('.community-comments-section');if(!C)console[ak(0x1ab)](ak(0xe8));else{const F=C[ak(0x17b)](ak(0x115)),G=F?.[ak(0x17b)](ak(0x14b)),H=C[ak(0x17b)]('.add-comment-btn');if(F){while(F[ak(0x124)]&&F['firstChild']!==G){F[ak(0x13b)](F['firstChild']);}H&&H[ak(0x168)]('click',()=>{showAddCommentPopup(j['id']);});const I=g[j['id']]||[];if(I['length']>0x0){if(G)G['style'][ak(0x151)]=ak(0x18f);const J=(K,L)=>{const al=ak,M=K['split']('\x20');if(M['length']<=L)return K;return M['slice'](0x0,L)[al(0x178)]('\x20')+'...';};I['forEach'](K=>{const am=ak,L=document['createElement']('div');if(K['type']==='demo'){L['className']=am(0x144),L['innerHTML']=am(0xd7)+K[am(0x175)]+am(0xa5)+K['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(K[am(0xff)]||am(0xe1))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const M=window['auth']['currentUser'],N=M&&K[am(0x141)]===M['uid'];if(N){const O=document[am(0x182)](am(0xee));O['className']='delete-comment-btn',O['innerHTML']='×',O['setAttribute'](am(0xcb),'Delete\x20demo'),O[am(0x168)](am(0x154),P=>{const an=am;P[an(0x176)](),P[an(0xbb)](),deleteComment(K['id'],L);}),L[am(0xb9)](O);}}else{L[am(0xe2)]='comment-item';const P=isUsernameMuted(K[am(0x12b)],K['timestamp']),Q=P?am(0xfc):J(K[am(0xdc)]||'',0xf),R=K['username']||am(0x159),S=window['auth'][am(0xf6)],T=S&&K[am(0x141)]===S[am(0xdd)];let U='';T&&(U='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');L['innerHTML']=U+'<strong>'+R+':</strong>\x20\x22'+Q+'\x22';if(T){const V=L['querySelector'](am(0x197));V&&V['addEventListener']('click',W=>{const ao=am;W[ao(0xbb)](),deleteComment(K['id'],L);});}!P?L[am(0x168)](am(0x154),()=>{showFullCommentLightbox(K);}):L[am(0x11a)]['cursor']='default';}F[am(0x113)](L,F['firstChild']);});}else{if(G)G[ak(0x11a)]['display']='block';}}}const D=m['querySelector']('.match-demo-links');if(D){const K=m['querySelector'](ak(0xb5)),L=m[ak(0x17b)](ak(0x16f)),M=j[ak(0x136)]||null,N=j['loserDemoLink']||j['demoLink']||null;console[ak(0x169)](ak(0x130)+j['id']+ak(0x14f),{'winner':M,'loser':N}),K&&(M?(K['href']=M,K[ak(0x11a)][ak(0x151)]=ak(0x189),K[ak(0x165)]=j['winnerUsername']+ak(0xac)):K['style']['display']='none'),L&&(N?(L[ak(0x143)]=N,L['style']['display']=ak(0x189),L[ak(0x165)]=j['loserUsername']+ak(0xac)):L['style'][ak(0x151)]=ak(0x18f)),M&&K||N&&L?D[ak(0x11a)][ak(0x151)]='flex':D['style']['display']=ak(0x18f);}b[ak(0xb9)](k);});}function getSubgameClass(a){const ap=a6Y,b={'Fusion\x20Match':ap(0xcd),'≥6\x20Missiles':ap(0x164),'≥6\x20missiles':ap(0x164),'Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':ap(0x135),'Disorientation':'disorientation','Ratting':ap(0x1a9),'Altered\x20Powerups':'altered-powerups','Mega\x20Match':ap(0x167),'Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return b[a]||'';}async function deleteComment(a,b){const aq=a6Y,c=window[aq(0x134)][aq(0xf6)];if(!c){alert(aq(0x146));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const d=doc(window['db'],'matchComments',a),e=await getDoc(d);if(!e[aq(0x101)]()){alert(aq(0x15d));return;}const f=e[aq(0xb6)]();if(f[aq(0x141)]!==c['uid']){alert(aq(0x10b));return;}await deleteDoc(d);if(b&&b['parentNode']){b['parentNode'][aq(0x13b)](b);const g=b['closest']('.comments-container');if(g&&!g['querySelector']('.comment-item')){const h=g[aq(0x17b)]('.no-comments-message');if(h)h['style'][aq(0x151)]=aq(0x16a);}}console['log'](aq(0x108));}catch(i){console[aq(0x126)](aq(0xbe),i),alert('Failed\x20to\x20delete\x20comment:\x20'+i['message']);}}async function getAllCommentsForMatch(a){const ar=a6Y;if(!a)return[];try{const b=collection(window['db'],'matchComments'),c=query(b,where('matchId','==',a),orderBy('timestamp','desc')),d=await getDocs(c);if(d[ar(0x132)])return[];return d['docs'][ar(0xd8)](e=>({'id':e['id'],...e['data']()}));}catch(e){return console['error'](ar(0x166),e),[];}}async function submitComment(a){const as=a6Y;a['preventDefault']();if(!window[as(0x134)]||!window['db']){console[as(0x126)](as(0xd9)),alert(as(0x180));return;}const b=window['auth']['currentUser'];if(!b){alert(as(0x17e));return;}const c=document['getElementById']('commentMatchId')?.['value'],d=document[as(0xd4)](as(0xfe))?.[as(0x15a)]?.[as(0x102)]();if(!c||!d){alert(as(0x11d));return;}const e=d[as(0x10e)](/\s+/)[as(0xb1)](g=>g['length']>0x0)['length'];if(e>0xf){alert(as(0x1a1));return;}const f=document['querySelector']('.submit-comment-btn');f&&(f['disabled']=!![],f[as(0x122)]='Submitting...');try{let g='Anonymous';try{const j=doc(window['db'],as(0xde),b['uid']),k=await getDoc(j);if(k[as(0x101)]()){const l=k['data']();l['username']&&(g=l['username']);}g==='Anonymous'&&b[as(0x149)]&&(g=b['displayName']);}catch(m){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',m),b[as(0x149)]&&(g=b[as(0x149)]);}const h={'matchId':c,'userId':b['uid'],'username':g,'text':d,'timestamp':serverTimestamp()};console['log'](as(0x107),g);const i=collection(window['db'],'matchComments');await addDoc(i,h),console[as(0x169)](as(0xec)),closeAddCommentPopup(),loadRecentMatchesPreview(as(0xdf));}catch(n){console[as(0x126)](as(0xf1),n),alert(as(0xc0)+n['message']),f&&(f['disabled']=![],f['textContent']='Submit');}}function closeAddCommentPopup(){const at=a6Y,a=document['getElementById'](at(0x13d)),b=document['getElementById']('commentAddOverlay');if(a)a[at(0x11a)][at(0x151)]='none';if(b)b['style']['display']='none';}function showAddCommentPopup(a){const au=a6Y,b=window[au(0x134)]['currentUser'];if(!b){alert(au(0x125));return;}let c=document[au(0xd4)](au(0x13d)),d=document['getElementById'](au(0x19a));!c&&(c=document['createElement']('div'),c['id']=au(0x13d),c[au(0xe2)]='comment-popup',document['body']['appendChild'](c));!d&&(d=document['createElement'](au(0x110)),d['id']='commentAddOverlay',d['className']=au(0xa9),document[au(0x120)][au(0xb9)](d));c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+a+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',c[au(0x11a)][au(0x151)]=au(0x16a),d['style']['display']='block',document[au(0xd4)](au(0xab))['addEventListener']('click',closeAddCommentPopup),d['addEventListener'](au(0x154),closeAddCommentPopup);const e=c['querySelectorAll'](au(0x10a));e['forEach'](f=>{const av=au;f['addEventListener'](av(0x154),function(){const aw=av;e['forEach'](h=>h[aw(0x11c)][aw(0x163)](aw(0x104))),document['querySelectorAll']('.option-content')[aw(0x188)](h=>h[aw(0x11a)][aw(0x151)]=aw(0x18f)),this[aw(0x11c)]['add'](aw(0x104));const g=this[aw(0x137)]['option'];document[aw(0xd4)](g+aw(0x150))[aw(0x11a)]['display']='block',g==='demo'?(document[aw(0xd4)](aw(0x175))['setAttribute']('required',''),document['getElementById'](aw(0xfe))[aw(0x106)]('required')):(document[aw(0xd4)]('demoLink')[aw(0x106)](aw(0x15f)),document['getElementById']('commentText')[aw(0x172)](aw(0x15f),''));});}),document[au(0xd4)]('commentText')[au(0x172)]('required',''),document[au(0xd4)]('demoLink')['removeAttribute']('required'),setupWordCounter('commentText',au(0xfa),0xf),setupWordCounter(au(0xf9),au(0x147),0x14),document[au(0xd4)](au(0xf5))[au(0x168)]('submit',submitCommentOrDemo);}function setupWordCounter(a,b,c){const ax=a6Y,d=document['getElementById'](a),e=document[ax(0xd4)](b);if(!d||!e)return;f(),d[ax(0x168)]('input',f);function f(){const ay=ax,g=d['value'][ay(0x102)](),h=g?g['split'](/\s+/)[ay(0xb1)](i=>i[ay(0x117)]>0x0)[ay(0x117)]:0x0;e[ay(0x122)]=h,h>c?e[ay(0x11a)][ay(0x1a8)]='#ff4444':e['style']['color']=ay(0x1ac);}}function a6a(){const aO=['rgvTBYbKzxnJCMLWDgLVBNmGyxjLigXPBwL0zwqGDg8GmJaGD29YzhmGBwf4Aw11Bs4GugXLyxnLihnOB3j0zw4GEw91CIbKzxnJCMLWDgLVBI4','lM5VlwnVBw1LBNrZlw1LC3nHz2u','Dg9mB2nHBgveyxrLu3rYAw5N','ChvZAa','y3vYC29Y','igrLBw8GBgLUA3m6','t3b0Aw9U','zgLZCgXHEq','zgLZywjSzwq','y29TBwvUDa','y2XPy2S','y29TBwvUDe1HDgnOswq','uhjLDMLLDYbvssbVCIbgAwX0zxiGzwXLBwvUDhmGBM90igzVDw5KlcbJyw5UB3qGyxr0ywnOigXPC3rLBMvYCY4','CMvTB3zLsxrLBq','DgLTzxn0yw1W','qw5VBNLTB3vZ','DMfSDwu','rgvTBYbSAw5R','C2HVD0fKzenVBw1LBNrqB3b1Ca','q29TBwvUDcbUB3qGzM91BMqUieL0ig1HEsbOyxzLigfSCMvHzhKGyMvLBIbKzwXLDgvKlG','BgfZDfzPC2LIBgu','CMvXDwLYzwq','AxnmB2fKAw5N','rxjYB3iGzMv0y2HPBMCG','lNbSyxLLCI5SB3nLCIaUCgXHEwvYlw5HBwu','CMvTB3zL','BwLZC2LSzxmTnNbSDxm','DgL0Bgu','rxjYB3iGzMv0y2HPBMCGy29TBwvUDhm6','BwvNys1TyxrJAa','ywrKrxzLBNrmAxn0zw5LCG','Bg9N','yMXVy2S','y29TBwvUDe92zxjSyxLqCMv2Awv3','D2LUBMvYlq','C2XPy2u','i2qZmMyYzG','lMXVC2vYlwrLBw8TBgLUAW','zNjVBq','ChjLDMLLD1bHz2vjBMzV','C2v0qxr0CMLIDxrL','pc9WpJXZBwfSBcbZDhLSzt0Iy29SB3i6i2fHytSGzgLZCgXHEtPIBg9JAZSGDgv4Dc1HBgLNBJPYAwDODdSGBwfYz2LUlxrVCdOXmhb4oYi+ug9ZDgvKig9Uia','Bwf4','zgvTB0XPBMS','ChjLDMvUDerLzMf1Bhq','mc42','AM9PBG','C2vSzwn0zwq','zg9JCW','CxvLCNLtzwXLy3rVCG','u3vIBwL0','y3vYCMvUDe1Vzgu','ww91ig11C3qGyMuGC2LNBMvKigLUihrVigXLyxzLigeGy29TBwvUDa','Aw5WDxq','vw5HyMXLihrVihn1yM1PDcbJB21Tzw50ic0GC3LZDgvTig5VDcbYzwfKEq','yxbWCM92zwrbDa','y3jLyxrLrwXLBwvUDa','ywXS','mtbWEa','lI4U','D2LUBMvYu3vPy2LKzxm','ChjLDMLLDY1Kms1IDxr0B24','zM9YrwfJAa','zMXLEa','D2LUBMvYu2nVCMu','zgvZyW','vw5RBM93BIbvC2vY','mZGWodCYyw9JEe5e','lNbVChvWlwfJDgLVBNm','BM9Uzq','tg9Zzxi','C3vIz2fTzxm','BwfYz2LUvg9W','rMfPBgvKihrVignHy2HLigrHDge6','ANvZDgLMEunVBNrLBNq','v2LUBMvY','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5oBYbTyxrJAgvZigzVDw5Kig1HDgnOAw5NigzPBhrLCJOGiG','lMrLBgv0zs1JB21Tzw50lwj0BG','Bxv0zuzYB21eyxrL','B25JBgLJAW','y29TBwvUDefKze92zxjSyxK','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVihjLCg9YDcbJB21Tzw50CW','y3vYCMvUDe1HDgnOswq','Bwf0y2HdB21Tzw50CW','lMnVBw1LBNqUD2LUBMvYlwnVBw1LBNq','zw1LCMfSza','zMLYC3rwAxnPyMXL','q29TBwvUDhmGyxjLigXPBwL0zwqGDg8GmtuGD29YzhmGBwf4Aw11Bs4GugXLyxnLihnOB3j0zw4GEw91CIbJB21Tzw50lG','y3vYCMvUDfbHz2u','mtjevMHoExG','D2LUBMvYt2XKrwXV','Bgv2zwXZ','lM1HDgnOlwnHCMq','lM1HDgnOzxmTBg9HzgLUz1TZDhLSzsO9iMnVBg9YoIbYzwqIxq','y29SB3i','CMf0DgLUzW','iJWVzgL2pG','D2fYBG','i2fHyq','iIb0yxjNzxq9iL9IBgfUAYiGy2XHC3m9iNbSyxKTAwnVBIi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXZDMCGDMLLD0jVEd0ImcaWidi0idi0iJ4kicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXWyxrOigq9iK04lduUmtrwmtKUmtrmmtKSmtiUmtrmocW1lJe0wIiGlZ4kicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9ZDMC+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9HpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iMrLBw8TAw5MBYi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iMrLBw8Tyxv0Ag9YiJ5ezw1VigzYB20G','ig1HDgnOzxm6','vg9KyxK','z29Sza','y29TBwvUDc1VDMvYBgf5','CxvLCNLtzwXLy3rVCKfSBa','y2XVC2vbzgrdB21Tzw50ug9WDxa','j3mGrgvTBW','lM1HDgnOzxmTBg9HzgLUzW','y2XVC2vdB21Tzw50ug9WDxbqCMv2Awv3','ChjLDMLLDY1SywrKzxiTBw9Kzq','zMLSDgvYlwXLDMvSCW','zMLSDgvY','zMLSDgvYvxnLCM5HBwu','y29TBwvUDfbVChvWuhjLDMLLDW','mZuWmti5Ew5myK9z','lNDPBM5LCI1Kzw1VlwXPBMS','zgf0yq','q2XVC2u','Bg9ZzxjpBgrfBg8','yxbWzw5Kq2HPBgq','zMLSDgvYlxn1yMDHBwvZ','C3rVCfbYB3bHz2f0Aw9U','ANvTCc10BY1WywDL','ANvTCa','rxjYB3iGzgvSzxrPBMCGy29TBwvUDdO','lM1HDgnOlxn1yMDHBwu','rMfPBgvKihrVigfKzcbJB21Tzw50oIa','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiIbZDhLSzt0Iy29SB3i6ihjLzdSIpKvYCM9YigXVywrPBMCGBwf0y2HLCZOG','y2XLyxiTzw5Oyw5JzwqTzMLSDgvYCW','A2v5CW','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5oBYbYzwnLBNqGBwf0y2HLCYbMB3vUza','mJi2mdGWmeXvyMXYyW','yxbWBhKTzw5Oyw5JzwqTzMLSDgvYCW','ywrK','ChjLDMLLD1bYzxzqywDL','rMfPBgvKihrVigzLDgnOihvZzxjUyw1LoG','ChjLDG','yxjPys1SywjLBa','Dg9Nz2XL','zNvZAw9Ulw1HDgnO','C2vJB25KCW','mtGYodG2wvz4D0j3','iZGWoda4ma','mZKYmZa1tMDTsKnV','Dg9mB3DLCKnHC2u','rxjYB3iGCMvWB3j0Aw5NignVBw1LBNq6','z2v0rwXLBwvUDej5swq','lNn1yM1PDc1JB21Tzw50lwj0BG','pc9KAxy+','cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgeGAhjLzJ0I','BwfW','rMLYzwjHC2uGBM90igLUAxrPywXPEMvK','lMnVBw1LBNqUBg9ZzxiTy29TBwvUDa','C3vIz2fTzvr5Cgu','Dgv4Da','DwLK','DxnLCLbYB2zPBgvZ','y3vYCMvUDa','yMfJA2DYB3vUzenVBg9Y','tM8GzgvZy3jPChrPB24GChjVDMLKzwq','y2XHC3noyw1L','C2v0sxrLBq','lNbSyxLLCI53Aw5UzxiGlNbSyxLLCI1Zy29Yzq','Aw5JBhvKzxm','z2v0sxrLBq','Bwf0y2Hjza','q29TBwvUDhmGC2vJDgLVBIbUB3qGzM91BMqGAw4GDgvTCgXHDgu','B3b0Aw9U','i0nen0yZmG','ChjLDMLLD0nHy2HLxW','q29TBwvUDcbHzgrLzcbZDwnJzxnZzNvSBhK','CgLSB3rZ','yNv0Dg9U','zg9JC0rHDge','y29TBwvUDfbVChvWvgL0BgvqCMv2Awv3','rxjYB3iGC3vIBwL0DgLUzYbJB21Tzw50oG','rgvTBZOG','qw5VBNLTB3vZifvZzxi','Bwf0y2GTy2fYzc10zw1WBgf0zq','ywrKq29TBwvUDezVCM0','y3vYCMvUDfvZzxi','lNbSyxLLCI5SB3nLCIaUCgXHEwvYlxnJB3jL','Aw5Uzxjive1m','zgvTB0rLC2nYAxb0Aw9U','D29YzenVDw50','q2XLyxjPBMCGy2fJAguGzM9YihjLzNjLC2GVCMvZzxq','txv0zwqU','zw5Oyw5JzwrgAwX0zxjZ','y29TBwvUDfrLEhq','zgvZy3jPChrPB24','y29TBwvUDfvZzxi','zxHPC3rZ','DhjPBq','C3rYAw5NAwz5','ywn0AxzL','Cg9WDxaTyNrUignSB3nLlwj0BG','CMvTB3zLqxr0CMLIDxrL','u3vIBwL0DgLUzYbJB21Tzw50igfZoG','q29TBwvUDcbKzwXLDgvKihn1y2nLC3nMDwXSEq','q29TBwvUDcbMCM9Tia','lM9WDgLVBI10ywi','ww91ignHBIbVBMX5igrLBgv0zsb5B3vYig93BIbJB21Tzw50CW','rMfPBgvKihrVihjLCg9YDcbJB21Tzw50oIa','Bwf0y2HLC1bLCLbHz2u','C3bSAxq','C2LSDMvY','zgL2','zgvMyxvSDa','kZeW','Aw5Zzxj0qMvMB3jL','D2LUBMvYq29TBwvUDa','lMnVBw1LBNrZlwnVBNrHAw5LCG','Bg9ZzxjvC2vYBMfTzq','BgvUz3rO','odeWmtGZnMr5z3bMAG','y3jLyxrLzef0','C3r5Bgu','BwfWugXHEwvK','y2XHC3nmAxn0','ugXLyxnLigvUDgvYigeGy29TBwvUDcbIzwzVCMuGC3vIBwL0DgLUzW','Bg9HzgLUzY1PBMrPy2f0B3i','lJWVzgL2pG','yM9KEq','rgf6','Dgv4DenVBNrLBNq','lMP1BxaTyNrU','zMLYC3rdAgLSza','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVigXLyxzLigeGy29TBwvUDcbVCIbHzgqGysbKzw1V','zxjYB3i','yxbWCM92zwrnyxrJAgvZrdi','pgrPDIbJBgfZCZ0IBwf0y2HLCY1SB2fKAw5NiJ5mB2fKAw5NihjLy2vUDcbTyxrJAgvZlI4Upc9KAxy+','C3vIC3rYAw5N','C3vIBwL0','DxnLCM5HBwu','mZvfr09TyKW','D2LUBMvYvxnLCM5HBwu','ChjLDMLLD05LEhrqywDL','ig1HDgnOAw5NigzPBhrLCNm','twf0y2GG','y2vUDgvY','zw1WDhK','lteW','yxv0Aa','CMvTyxrJAa','D2LUBMvYrgvTB0XPBMS','zgf0yxnLDa','lM1HDgnOlw1HCa','Dg9mB2nHBgvtDhjPBMC','y29TBwvUDfbVChvWq29UDgvUDfbYzxzPzxC','CMvTB3zLq2HPBgq','u3rHBMrHCMqGtwf0y2G','y29TBwvUDefKzfbVChvW','y2XVBMvoB2rL','ndGYmJuYywvVAKPW','z2v0vgLTzq','DxnLCKLK','lcbMzxrJAgLUzYbMCM9TiezPCMvZDg9Yzq','AhjLzG','zgvTBY1SAw5R','Bg9Zzxjty29Yzq','ww91ig5LzwqGDg8GyMuGC2LNBMvKigLUihrVigrLBgv0zsbJB21Tzw50CW','zgvTB1DVCMrdB3vUDa','BMv4Da','zgLZCgXHEu5HBwu'];a6a=function(){return aO;};return a6a();}async function submitCommentOrDemo(a){const az=a6Y;a['preventDefault']();if(!window[az(0x134)]||!window['db']){console[az(0x126)]('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const b=window[az(0x134)]['currentUser'];if(!b){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const c=document[az(0xd4)](az(0x155))['value'],d=document['querySelector']('.option-tab.active')[az(0x137)][az(0xe9)];let f=az(0x159);try{const h=doc(window['db'],'userProfiles',b['uid']),i=await getDoc(h);if(i['exists']()){const j=i[az(0xb6)]();j['username']&&(f=j['username']);}f==='Anonymous'&&b[az(0x149)]&&(f=b['displayName']);}catch(k){console['warn'](az(0xc9),k),b['displayName']&&(f=b[az(0x149)]);}const g=document['querySelector'](az(0xd5));g&&(g['disabled']=!![],g['textContent']='Submitting...');try{if(d===az(0x153)){const l=document['getElementById'](az(0xfe))[az(0x15a)][az(0x102)]();if(!l){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),g[az(0x152)]=![],g['textContent']=az(0x17c);return;}const m=l['split'](/\s+/)[az(0xb1)](p=>p['length']>0x0)[az(0x117)];if(m>0xf){alert(az(0x1a1)),g['disabled']=![],g[az(0x122)]=az(0x17c);return;}const n={'matchId':c,'userId':b[az(0xdd)],'username':f,'text':l,'type':az(0x153),'timestamp':serverTimestamp()},o=collection(window['db'],az(0x19d));await addDoc(o,n);}else{const p=document['getElementById'](az(0x175))['value']['trim'](),q=document['getElementById'](az(0xf9))[az(0x15a)]['trim']()||az(0x15b);if(!p){alert('Please\x20enter\x20a\x20demo\x20link'),g[az(0x152)]=![],g[az(0x122)]=az(0x17c);return;}try{new URL(p);}catch(u){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),g['disabled']=![],g['textContent']='Submit';return;}const r=q['split'](/\s+/)[az(0xb1)](v=>v[az(0x117)]>0x0)['length'];if(r>0x14){alert(az(0x14a)),g['disabled']=![],g[az(0x122)]='Submit';return;}const s={'matchId':c,'userId':b[az(0xdd)],'username':f,'demoLink':p,'description':q,'type':'demo','text':az(0xf2)+q,'timestamp':serverTimestamp()},t=collection(window['db'],az(0x19d));await addDoc(t,s);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(v){console['error']('Error\x20submitting:',v),alert('Failed\x20to\x20submit:\x20'+v['message']),g&&(g['disabled']=![],g['textContent']='Submit');}}function getEloRankClass(a){const aA=a6Y,b=Number(a);if(b>=0x7d0)return aA(0x19f);else{if(b>=0x708)return aA(0xa8);else{if(b>=0x640)return aA(0x10f);else{if(b>=0x578)return'bronze';else return'unranked';}}}}function showPreviewCommentPopup(a,b,c='#fff'){const aB=a6Y,d=document[aB(0xd4)]('commentPopupPreview'),e=document['getElementById'](aB(0x16b)),f=document['getElementById'](aB(0xf0)),g=document['getElementById'](aB(0x13a)),h=document['getElementById']('reportCommentButton');if(!d||!e||!f||!g||!h)return;d[aB(0x137)][aB(0xfe)]=a,d[aB(0x137)][aB(0x100)]=b,f[aB(0x11a)][aB(0x1a8)]=c,f[aB(0x122)]=aB(0x109)+b,g['textContent']=a,h['onclick']=reportComment,d['style'][aB(0x151)]=aB(0x16a),e[aB(0x11a)]['display']=aB(0x16a);}function closePreviewCommentPopup(){const aC=a6Y,a=document['getElementById'](aC(0xb3)),b=document['getElementById']('commentOverlayPreview');if(a)a[aC(0x11a)][aC(0x151)]=aC(0x18f);if(b)b['style']['display']='none';}async function reportComment(){const aD=a6Y,a=window['auth'][aD(0xf6)];if(!a){alert(aD(0x19b));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const b=document[aD(0xd4)](aD(0xb3)),c={'commentAuthor':b['dataset'][aD(0x100)]||aD(0x18c),'commentText':b[aD(0x137)][aD(0xfe)]||'','matchId':previewState[aD(0x19c)]||'','reportedBy':a['uid'],'reporterUsername':a['displayName']||aD(0xf3),'reportedAt':serverTimestamp()},d=collection(window['db'],'badComments');await addDoc(d,c),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(e){console['error'](aD(0xd3),e),alert(aD(0x10c)+e['message']);}}function showFullCommentLightbox(a){const aE=a6Y;if(isUsernameMuted(a['username']))return;const b=document[aE(0xd4)]('commentPopupPreview'),c=document[aE(0xd4)](aE(0x16b)),d=document[aE(0xd4)](aE(0xf0)),e=document[aE(0xd4)]('commentPopupContentPreview');if(!b||!c||!d||!e)return;d['style'][aE(0x1a8)]='#fff',d['textContent']='Comment\x20from\x20'+a['username'];if(a[aE(0x158)]){const i=new Date(a[aE(0x158)]['seconds']*0x3e8),j=i[aE(0x139)]();e['innerHTML']='<p>'+a[aE(0xdc)]+aE(0x173)+j+'</small>';}else e['textContent']=a['text'];b[aE(0x137)]['commentId']=a['id']||'',b[aE(0x137)][aE(0x100)]=a[aE(0x12b)]||'',b['dataset'][aE(0xfe)]=a['text']||'',b['dataset'][aE(0xe7)]=a['matchId']||'';const f=b['querySelector'](aE(0x18e))||document['createElement']('div');!b['querySelector'](aE(0x18e))?(f['className']='popup-actions',f[aE(0x11a)][aE(0x151)]='flex',f[aE(0x11a)][aE(0x194)]=aE(0x131),f[aE(0x11a)]['gap']=aE(0x184),f['style'][aE(0x192)]='15px',b[aE(0xb9)](f)):f[aE(0xf8)]='';const g=document['createElement'](aE(0xee));g['textContent']=aE(0xb7),g['className']=aE(0x105),g['id']=aE(0xae),g['addEventListener'](aE(0x154),closePreviewCommentPopup);const h=document[aE(0x182)]('button');h['textContent']='Report',h[aE(0xe2)]='popup-btn\x20report-btn',h['style'][aE(0xe0)]=aE(0x16e),h['addEventListener'](aE(0x154),reportComment),f['appendChild'](g),f['appendChild'](h),b[aE(0x11a)]['display']=aE(0x16a),c[aE(0x11a)]['display']=aE(0x16a);}export function setupPreviewEventListeners(){const aF=a6Y,a=document['getElementById']('previewPrevPage'),b=document[aF(0xd4)]('previewNextPage'),c=document[aF(0xd4)](aF(0x187)),d=document[aF(0xd4)]('preview-d2-button'),e=document['getElementById']('preview-d3-button'),f=document['getElementById']('filter-toggle-button'),g=document[aF(0xd4)]('enhanced-filter-section');if(!a||!b||!c||!d||!e||!f||!g){console['warn'](aF(0x156));return;}a[aF(0x168)](aF(0x154),()=>{const aG=aF;if(!a[aG(0x152)])loadRecentMatchesPreview(aG(0xca));}),b[aF(0x168)](aF(0x154),()=>{const aH=aF;if(!b['disabled'])loadRecentMatchesPreview(aH(0x148));}),c['addEventListener']('click',()=>{const aI=aF;previewState[aI(0x17d)]!=='D1'&&!previewState[aI(0x160)]&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aI(0xdf)));}),d[aF(0x168)](aF(0x154),()=>{const aJ=aF;previewState['currentMode']!=='D2'&&!previewState[aJ(0x160)]&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aJ(0xdf)));}),e['addEventListener']('click',()=>{const aK=aF;previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState[aK(0x17d)]='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview(aK(0xdf)));});f&&g&&f[aF(0x168)]('click',()=>{const r=g['style']['display']!=='none';g['style']['display']=r?'none':'block',f['classList']['toggle']('active',!r);});const h=document['getElementById'](aF(0xc6)),i=document[aF(0xd4)](aF(0xc2));h&&h['addEventListener']('click',()=>{const aL=aF;previewState[aL(0xfd)]['pilots']=document[aL(0xd4)]('filter-pilots')['value'][aL(0x102)](),previewState[aL(0xfd)][aL(0x1a5)]=document['getElementById'](aL(0xb0))['value'][aL(0x102)]();const r=document[aL(0xd4)]('filter-subgames');previewState[aL(0xfd)][aL(0x191)]=Array[aL(0x170)](r['selectedOptions'])[aL(0xd8)](s=>s['value'])['filter'](s=>s!==''),loadRecentMatchesPreview(aL(0xdf));});i&&i[aF(0x168)](aF(0x154),()=>{const aM=aF;clearEnhancedFilters(),loadRecentMatchesPreview(aM(0xdf));});document[aF(0xaa)](aF(0x123))[aF(0x188)](r=>{r['addEventListener']('click',()=>{const aN=a6b,s=r[aN(0x137)][aN(0xbd)];jumpToPage(s);});});const j=document[aF(0xd4)](aF(0xbc));j&&j[aF(0x168)]('keypress',r=>{r['key']==='Enter'&&jumpToPage('input');});const k=document[aF(0xd4)](aF(0xae)),l=document[aF(0xd4)]('commentOverlayPreview');if(k)k['addEventListener']('click',closePreviewCommentPopup);if(l)l[aF(0x168)](aF(0x154),closePreviewCommentPopup);const m=document['getElementById'](aF(0xab)),n=document[aF(0xd4)]('commentAddOverlay'),o=document['getElementById'](aF(0xf5));if(m)m[aF(0x168)]('click',closeAddCommentPopup);if(n)n['addEventListener']('click',closeAddCommentPopup);if(o)o[aF(0x168)](aF(0x12a),submitComment);const p=document['getElementById']('commentText'),q=document[aF(0xd4)](aF(0xfa));p&&q&&setupWordCounter(aF(0xfe),'wordCount',0xf);}window[a6Y(0x15c)]=showAddCommentPopup,window[a6Y(0xab)]=closeAddCommentPopup,window['submitComment']=submitComment;