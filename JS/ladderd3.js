const a33_0xc6db6f=a33_0x4616,a33_0x399231=(function(){let _0x34afed=!![];return function(_0x3d8a48,_0x225a7a){const _0x3cfa4b=_0x34afed?function(){if(_0x225a7a){const _0x50474d=_0x225a7a['apply'](_0x3d8a48,arguments);return _0x225a7a=null,_0x50474d;}}:function(){};return _0x34afed=![],_0x3cfa4b;};}()),a33_0x553f75=a33_0x399231(this,function(){const _0x1b0daf=a33_0x4616;let _0x43d757;try{const _0x59dbdd=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x43d757=_0x59dbdd();}catch(_0x33b341){_0x43d757=window;}const _0x367085=_0x43d757['console']=_0x43d757['console']||{},_0xdb3cc7=['log',_0x1b0daf(0x19a),'info','error','exception',_0x1b0daf(0x184),_0x1b0daf(0x15e)];for(let _0x57fa3d=0x0;_0x57fa3d<_0xdb3cc7['length'];_0x57fa3d++){const _0x2b7561=a33_0x399231['constructor']['prototype']['bind'](a33_0x399231),_0x4d652a=_0xdb3cc7[_0x57fa3d],_0x4ca551=_0x367085[_0x4d652a]||_0x2b7561;_0x2b7561[_0x1b0daf(0x15f)]=a33_0x399231['bind'](a33_0x399231),_0x2b7561['toString']=_0x4ca551['toString'][_0x1b0daf(0x176)](_0x4ca551),_0x367085[_0x4d652a]=_0x2b7561;}});a33_0x553f75();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x35bc80 from'./firebase-idle-wrapper.js';const styleEl=document['createElement']('style');styleEl[a33_0xc6db6f(0x168)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head'][a33_0xc6db6f(0x19f)](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x1c05c3=![]){const _0x113f78=a33_0xc6db6f,_0x38c6c8=document[_0x113f78(0x17a)]('#ladder-d3\x20tbody');if(!_0x38c6c8){console['error'](_0x113f78(0x171));return;}_0x38c6c8['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x18ddd3=Date['now']();if(!_0x1c05c3&&playerCacheD3['data']&&_0x18ddd3-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x6194a3=collection(db,'playersD3'),_0x5f56b5=await getDocs(_0x6194a3),_0x186d3e=[];_0x5f56b5['forEach'](_0x1e42b1=>{const _0x178483=_0x1e42b1['data']();_0x178483['username']&&_0x186d3e['push']({..._0x178483,'id':_0x1e42b1['id'],'elo':_0x178483['eloRating']||0x0,'position':_0x178483['position']||Number['MAX_SAFE_INTEGER']});});const _0x5764dd=collection(db,'userProfiles'),_0x381de4=await getDocs(_0x5764dd),_0x6e2823=new Map();_0x381de4['forEach'](_0x1fcb7b=>{const _0x1643b1=_0x113f78,_0x3252f5=_0x1fcb7b['data']();_0x3252f5[_0x1643b1(0x199)]&&_0x6e2823['set'](_0x3252f5['username'][_0x1643b1(0x174)](),_0x3252f5);});for(const _0x5ec422 of _0x186d3e){const _0x442458=_0x5ec422['username'][_0x113f78(0x174)]();if(_0x6e2823['has'](_0x442458)){const _0x151bb7=_0x6e2823['get'](_0x442458);_0x151bb7[_0x113f78(0x18a)]&&(_0x5ec422['country']=_0x151bb7[_0x113f78(0x18a)]['toLowerCase']());}}const _0x3cb98f=_0x186d3e[_0x113f78(0x17d)](_0x9b3e9a=>_0x9b3e9a['username']),_0x543ea7=await fetchBatchMatchStatsD3(_0x3cb98f);_0x186d3e[_0x113f78(0x191)]((_0x3a8332,_0x511387)=>{const _0xff28f8=_0x113f78,_0x305018=_0x543ea7['get'](_0x3a8332[_0xff28f8(0x199)])?.['totalMatches']||0x0,_0x565627=_0x543ea7['get'](_0x511387['username'])?.['totalMatches']||0x0;if(_0x305018===0x0!==(_0x565627===0x0))return _0x305018===0x0?0x1:-0x1;return(_0x3a8332['position']||0x3e7)-(_0x511387['position']||0x3e7);}),_0x186d3e[_0x113f78(0x17e)]((_0x202f59,_0x23d200)=>{_0x202f59['position']=_0x23d200+0x1;}),playerCacheD3['data']=_0x186d3e,playerCacheD3[_0x113f78(0x161)]=_0x18ddd3,updateLadderDisplayD3(_0x186d3e);}catch(_0x14aab4){console['error'](_0x113f78(0x18e),_0x14aab4),_0x38c6c8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x14aab4['message']+_0x113f78(0x16d);}}function calculateStreakDays(_0x237de7){const _0x20129a=a33_0xc6db6f;if(!_0x237de7)return 0x0;const _0x2c08b5=_0x237de7['toDate'](),_0x5c2633=new Date(),_0x197ef2=Math[_0x20129a(0x187)](_0x5c2633-_0x2c08b5);return Math[_0x20129a(0x170)](_0x197ef2/(0x3e8*0x3c*0x3c*0x18));}function a33_0x1b1e(){const _0xbb3b8a=['td:nth-child(3)','player','trace','__proto__','has','timestamp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','get','pilot','visibility','D3:\x20Final\x20ELO\x20changes:','position','textContent','innerHTML','totalKills','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','winRate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','seconds','winnerUsername','ceil','D3\x20Ladder\x20table\x20body\x20not\x20found','from','entries','toLowerCase','querySelectorAll','bind','loserScore','data','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','querySelector','inline','previousElo','map','forEach','push','D3:\x20Found\x20','eloHistoryD3','totalDeaths','display','table','winnerScore','change','abs','visible','wins','country','loserUsername','style','D3:\x20Found\x20pilot\x20entry:','Error\x20loading\x20D3\x20ladder:','totalMatches','log','sort','playerId','set','empty','playersD3','size','gameMode','losses','username','warn','\x20fallback\x20ELO\x20change:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','newElo','includes','appendChild'];a33_0x1b1e=function(){return _0xbb3b8a;};return a33_0x1b1e();}async function updatePlayerPositions(_0x463b62,_0x22b07d){const _0x53ce6c=a33_0xc6db6f;try{const _0x16e66b=collection(db,'playersD3'),_0x35dd50=await getDocs(_0x16e66b),_0x3cb7ab=[];_0x35dd50['forEach'](_0x118723=>{const _0x23ce2b=a33_0x4616;_0x3cb7ab[_0x23ce2b(0x17f)]({'id':_0x118723['id'],..._0x118723['data']()});});const _0x3b0e1c=_0x3cb7ab['find'](_0x3e15a2=>_0x3e15a2[_0x53ce6c(0x199)]===_0x463b62),_0x4eb345=_0x3cb7ab['find'](_0xbe326a=>_0xbe326a[_0x53ce6c(0x199)]===_0x22b07d);if(!_0x3b0e1c||!_0x4eb345){console['error'](_0x53ce6c(0x16b));return;}if(_0x3b0e1c['position']>_0x4eb345['position']){const _0x3b95d2=_0x4eb345['position'];for(const _0x46e6b5 of _0x3cb7ab){_0x46e6b5['position']>=_0x4eb345['position']&&_0x46e6b5['position']<_0x3b0e1c[_0x53ce6c(0x167)]&&_0x46e6b5[_0x53ce6c(0x199)]!==_0x463b62&&await updateDoc(doc(db,'playersD3',_0x46e6b5['id']),{'position':_0x46e6b5['position']+0x1});}await updateDoc(doc(db,'playersD3',_0x3b0e1c['id']),{'position':_0x3b95d2});if(_0x3b95d2===0x1){const _0x49010d=doc(db,_0x53ce6c(0x195),_0x3b0e1c['id']),_0x2e1054=await getDoc(_0x49010d);!_0x2e1054['data']()['firstPlaceDate']&&await updateDoc(_0x49010d,{'firstPlaceDate':Timestamp['now']()});}if(_0x4eb345['position']===0x1){const _0x250261=doc(db,'playersD3',_0x4eb345['id']);await updateDoc(_0x250261,{'firstPlaceDate':null});}}}catch(_0x112380){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x112380);}}function a33_0x4616(_0x341885,_0x21bbf8){const _0x553f75=a33_0x1b1e();return a33_0x4616=function(_0x399231,_0x259d28){_0x399231=_0x399231-0x15c;let _0x1b1e43=_0x553f75[_0x399231];return _0x1b1e43;},a33_0x4616(_0x341885,_0x21bbf8);}async function updateLadderDisplayD3(_0x243db3){const _0x2159f1=a33_0xc6db6f;_0x243db3['sort']((_0x5e58ea,_0x4c3b5c)=>_0x5e58ea[_0x2159f1(0x167)]-_0x4c3b5c[_0x2159f1(0x167)]);const _0x192043=document['querySelector']('#ladder-d3\x20tbody');if(!_0x192043)return;_0x192043[_0x2159f1(0x169)]='';const _0x47cbed=_0x243db3[_0x2159f1(0x17d)](_0x45d68b=>_0x45d68b['username']),_0x476e0d=await fetchBatchMatchStatsD3(_0x47cbed),_0x125e28=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x125e28[_0x2159f1(0x169)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x36030d=_0x243db3[_0x2159f1(0x17d)](_0x30a123=>{const _0x117144=_0x476e0d['get'](_0x30a123['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x30a123,_0x117144);})['join']('');_0x192043['innerHTML']=_0x36030d,getPlayersLastEloChangesD3(_0x47cbed)['then'](_0x2a002c=>{const _0x3b2579=_0x2159f1,_0x4a06b9=new Map();_0x192043[_0x3b2579(0x175)]('tr')[_0x3b2579(0x17e)]((_0x36b6ce,_0x44c524)=>{const _0x5f0711=_0x3b2579;_0x44c524<_0x47cbed['length']&&_0x4a06b9[_0x5f0711(0x193)](_0x47cbed[_0x44c524],_0x36b6ce);}),_0x2a002c['forEach']((_0xa5d295,_0x463002)=>{const _0x2554b3=_0x3b2579,_0x543abf=_0x4a06b9[_0x2554b3(0x163)](_0x463002);if(_0x543abf&&_0xa5d295!==0x0){const _0x52d72e=_0x543abf['querySelector'](_0x2554b3(0x15c));if(_0x52d72e){const _0x2f5c04=_0xa5d295>0x0?'+'+_0xa5d295:''+_0xa5d295,_0x32012e=_0x52d72e['querySelector']('.trend-indicator');_0x32012e&&(_0x32012e['textContent']=_0x2f5c04,_0x32012e[_0x2554b3(0x18c)]['color']=_0xa5d295>0x0?'#4CAF50':'#F44336',_0x32012e['style']['fontWeight']='bold',_0x32012e[_0x2554b3(0x18c)]['fontSize']='0.85em',_0x32012e['style'][_0x2554b3(0x183)]=_0x2554b3(0x17b),_0x32012e['style'][_0x2554b3(0x165)]=_0x2554b3(0x188),_0x32012e['style']['opacity']='1');}}});})['catch'](_0x481d9b=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x481d9b));}async function fetchBatchMatchStatsD3(_0x57ee18){const _0x379cd4=a33_0xc6db6f,_0xe3f234=new Map();try{const _0x39c5f5=collection(db,'approvedMatchesD3'),_0x3cb247=await getDocs(_0x39c5f5);_0x3cb247['forEach'](_0x12018a=>{const _0x3b8c7e=a33_0x4616,_0xbc0133=_0x12018a['data']();if(_0x57ee18['includes'](_0xbc0133[_0x3b8c7e(0x16f)])){const _0x3d32fb=_0xbc0133['winnerUsername'];!_0xe3f234['has'](_0x3d32fb)&&_0xe3f234['set'](_0x3d32fb,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x29154b=_0xe3f234['get'](_0x3d32fb);_0x29154b[_0x3b8c7e(0x189)]++,_0x29154b['totalMatches']++,_0x29154b['totalKills']+=parseInt(_0xbc0133['winnerScore'])||0x0,_0x29154b[_0x3b8c7e(0x182)]+=parseInt(_0xbc0133['loserScore'])||0x0;}if(_0x57ee18[_0x3b8c7e(0x19e)](_0xbc0133['loserUsername'])){const _0x3a38ee=_0xbc0133[_0x3b8c7e(0x18b)];!_0xe3f234['has'](_0x3a38ee)&&_0xe3f234[_0x3b8c7e(0x193)](_0x3a38ee,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x3cf19e=_0xe3f234['get'](_0x3a38ee);_0x3cf19e[_0x3b8c7e(0x198)]++,_0x3cf19e[_0x3b8c7e(0x18f)]++,_0x3cf19e[_0x3b8c7e(0x16a)]+=parseInt(_0xbc0133[_0x3b8c7e(0x177)])||0x0,_0x3cf19e['totalDeaths']+=parseInt(_0xbc0133[_0x3b8c7e(0x185)])||0x0;}}),_0xe3f234['forEach'](_0x3fcca8=>{const _0x4f83be=a33_0x4616;_0x3fcca8['kda']=_0x3fcca8[_0x4f83be(0x182)]>0x0?(_0x3fcca8['totalKills']/_0x3fcca8[_0x4f83be(0x182)])['toFixed'](0x2):_0x3fcca8['totalKills'],_0x3fcca8['winRate']=_0x3fcca8['totalMatches']>0x0?(_0x3fcca8[_0x4f83be(0x189)]/_0x3fcca8[_0x4f83be(0x18f)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x2051d9){console['error'](_0x379cd4(0x179),_0x2051d9);}return _0xe3f234;}function createPlayerRowD3(_0x6e28c0,_0x1e71df){const _0x568a06=a33_0xc6db6f,_0x2ae9f7=parseFloat(_0x6e28c0['elo'])||0x0;let _0x7b604d='gray';if(_0x2ae9f7>=0x7d0)_0x7b604d='#50C878';else{if(_0x2ae9f7>=0x708)_0x7b604d='#FFD700';else{if(_0x2ae9f7>=0x640)_0x7b604d='#C0C0C0';else _0x2ae9f7>=0x578&&(_0x7b604d='#CD7F32');}}let _0xe04d8='';return _0x6e28c0['country']&&(_0xe04d8='<img\x20src=\x22../images/flags/'+_0x6e28c0['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x6e28c0['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x6e28c0[_0x568a06(0x167)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x6e28c0['username'])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x7b604d+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x6e28c0['username']+_0x568a06(0x162)+_0xe04d8+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x7b604d+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x2ae9f7+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1e71df['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1e71df['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1e71df[_0x568a06(0x198)]+_0x568a06(0x19c)+_0x1e71df['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1e71df[_0x568a06(0x16c)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0x3c907f){const _0x689697=a33_0xc6db6f,_0x291f96=new Map();_0x3c907f['forEach'](_0x2a8b2c=>_0x291f96['set'](_0x2a8b2c,0x0));try{console[_0x689697(0x190)]('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x3c907f);const _0x438e03=new Map(),_0x2ecfd6=await getDocs(collection(db,_0x689697(0x195)));_0x2ecfd6['forEach'](_0x42f6c7=>{const _0x6d502e=_0x689697,_0x5ce6df=_0x42f6c7[_0x6d502e(0x178)]();_0x5ce6df[_0x6d502e(0x199)]&&_0x438e03[_0x6d502e(0x193)](_0x42f6c7['id'],_0x5ce6df['username']);}),console['log']('D3:\x20Player\x20ID\x20mappings:',Array[_0x689697(0x172)](_0x438e03['entries']()));const _0x352e63=collection(db,_0x689697(0x181)),_0x32cbb0=query(_0x352e63,orderBy('timestamp','desc'),limit(0x64)),_0xb7e843=await getDocs(_0x32cbb0);_0xb7e843[_0x689697(0x194)]?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console['log'](_0x689697(0x180)+_0xb7e843[_0x689697(0x196)]+'\x20entries\x20in\x20eloHistoryD3');const _0x2349d6=new Map();_0xb7e843['forEach'](_0x211bfa=>{const _0x358264=_0x689697,_0x4a36f2=_0x211bfa['data']();let _0x1d3157=null;if(_0x4a36f2[_0x358264(0x199)])_0x1d3157=_0x4a36f2['username'];else{if(_0x4a36f2['playerUsername'])_0x1d3157=_0x4a36f2['playerUsername'];else{if(_0x4a36f2['player']&&typeof _0x4a36f2[_0x358264(0x15d)]==='string')_0x1d3157=_0x4a36f2['player'];else{if(_0x4a36f2[_0x358264(0x15d)]&&_0x438e03[_0x358264(0x160)](_0x4a36f2['player']))_0x1d3157=_0x438e03['get'](_0x4a36f2['player']);else _0x4a36f2['playerId']&&_0x438e03[_0x358264(0x160)](_0x4a36f2[_0x358264(0x192)])&&(_0x1d3157=_0x438e03['get'](_0x4a36f2['playerId']));}}}(_0x4a36f2[_0x358264(0x199)]==='pilot'||_0x4a36f2['playerUsername']===_0x358264(0x164)||_0x4a36f2['player']&&_0x438e03['get'](_0x4a36f2['player'])===_0x358264(0x164))&&console['log'](_0x358264(0x18d),_0x4a36f2),_0x1d3157&&_0x3c907f['includes'](_0x1d3157)&&(!_0x2349d6[_0x358264(0x160)](_0x1d3157)&&_0x2349d6['set'](_0x1d3157,[]),_0x2349d6[_0x358264(0x163)](_0x1d3157)['push']({..._0x4a36f2,'timestamp':_0x4a36f2[_0x358264(0x161)]?.[_0x358264(0x16e)]||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x2349d6['size']+'\x20players'),_0x2349d6['forEach']((_0x1b1cdd,_0x2ca860)=>{const _0x11b6a1=_0x689697;if(_0x1b1cdd['length']>0x0){_0x1b1cdd['sort']((_0x196972,_0x3b5b17)=>_0x3b5b17['timestamp']-_0x196972[_0x11b6a1(0x161)]);const _0xd153b8=_0x1b1cdd['find'](_0x20e7d3=>_0x20e7d3['change']!==undefined||_0x20e7d3['newElo']!==undefined&&_0x20e7d3[_0x11b6a1(0x17c)]!==undefined);if(_0xd153b8){let _0x323b4f;if(_0xd153b8[_0x11b6a1(0x186)]!==undefined)_0x323b4f=_0xd153b8['change'];else _0xd153b8[_0x11b6a1(0x19d)]!==undefined&&_0xd153b8['previousElo']!==undefined&&(_0x323b4f=_0xd153b8[_0x11b6a1(0x19d)]-_0xd153b8[_0x11b6a1(0x17c)]);_0x323b4f!==undefined&&(_0x291f96['set'](_0x2ca860,_0x323b4f),console['log']('D3:\x20'+_0x2ca860+'\x20ELO\x20change:\x20'+_0x323b4f));}}});if(_0x2349d6[_0x689697(0x196)]===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x5b1186=collection(db,'eloHistory'),_0x2dada5=query(_0x5b1186,where(_0x689697(0x197),'==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x44707d=await getDocs(_0x2dada5);console['log'](_0x689697(0x180)+_0x44707d[_0x689697(0x196)]+'\x20fallback\x20entries'),_0x44707d[_0x689697(0x17e)](_0x2d9393=>{const _0xa33303=_0x689697,_0x13b730=_0x2d9393['data']();let _0x5dd388=_0x13b730['username']||_0x13b730['playerUsername'];!_0x5dd388&&_0x13b730['player']&&_0x438e03['has'](_0x13b730['player'])&&(_0x5dd388=_0x438e03['get'](_0x13b730['player']));if(_0x5dd388&&_0x3c907f['includes'](_0x5dd388)){const _0x43da26=_0x13b730['change']||(_0x13b730[_0xa33303(0x19d)]!==undefined&&_0x13b730['previousElo']!==undefined?_0x13b730['newElo']-_0x13b730[_0xa33303(0x17c)]:0x0);_0x43da26!==0x0&&(_0x291f96[_0xa33303(0x193)](_0x5dd388,_0x43da26),console['log']('D3:\x20'+_0x5dd388+_0xa33303(0x19b)+_0x43da26));}});}catch(_0x1493ed){console['log']('D3:\x20Fallback\x20query\x20failed:',_0x1493ed);}}const _0x28b05d=Array['from'](_0x291f96[_0x689697(0x173)]())['filter'](([_0x1dd4c5,_0xe0272a])=>_0xe0272a!==0x0);console[_0x689697(0x190)](_0x689697(0x166),_0x28b05d);}catch(_0x54d6bc){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x54d6bc);}return _0x291f96;}export{displayLadderD3,updatePlayerPositions};