const a45_0x4484db=a45_0x4690,a45_0x3174c9=(function(){let _0x2df53a=!![];return function(_0x46bb6b,_0x5a5cb8){const _0x4cd2e8=_0x2df53a?function(){if(_0x5a5cb8){const _0x5669ac=_0x5a5cb8['apply'](_0x46bb6b,arguments);return _0x5a5cb8=null,_0x5669ac;}}:function(){};return _0x2df53a=![],_0x4cd2e8;};}()),a45_0x7e616d=a45_0x3174c9(this,function(){const _0x4ff42e=a45_0x4690;let _0x5b318b;try{const _0x3c70e8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5b318b=_0x3c70e8();}catch(_0x86b81c){_0x5b318b=window;}const _0x2e9c96=_0x5b318b[_0x4ff42e(0x11e)]=_0x5b318b['console']||{},_0x1f6604=['log','warn','info','error','exception','table',_0x4ff42e(0x124)];for(let _0x1db894=0x0;_0x1db894<_0x1f6604['length'];_0x1db894++){const _0x2cf97c=a45_0x3174c9['constructor']['prototype']['bind'](a45_0x3174c9),_0x5c4b66=_0x1f6604[_0x1db894],_0x2627a2=_0x2e9c96[_0x5c4b66]||_0x2cf97c;_0x2cf97c[_0x4ff42e(0x121)]=a45_0x3174c9['bind'](a45_0x3174c9),_0x2cf97c[_0x4ff42e(0x11f)]=_0x2627a2['toString']['bind'](_0x2627a2),_0x2e9c96[_0x5c4b66]=_0x2cf97c;}});a45_0x7e616d();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a45_0x4484db(0x11b)),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x2fb8d0){const _0x5c9c0a=a45_0x4484db,_0x4c2d9b=document['getElementById']('queue-container');if(!_0x4c2d9b)return;if(_0x2fb8d0[_0x5c9c0a(0x128)]===0x0){_0x4c2d9b['style'][_0x5c9c0a(0x129)]=_0x5c9c0a(0x12c);return;}_0x4c2d9b[_0x5c9c0a(0x127)]['display']='block';let _0x3464d5=_0x5c9c0a(0x12b);_0x2fb8d0['forEach'](_0x4eb228=>{const _0x23aa71=_0x5c9c0a;_0x3464d5+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x4eb228['username']||'Unknown\x20Player')+_0x23aa71(0x11c)+formatQueueTime(_0x4eb228['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x3464d5+=_0x5c9c0a(0x11d),_0x4c2d9b['innerHTML']=_0x3464d5;}function formatQueueTime(_0x3dda71){const _0x506364=a45_0x4484db;if(!_0x3dda71)return'Just\x20now';const _0x5d6e78=_0x3dda71['toDate']?_0x3dda71[_0x506364(0x123)]():new Date(_0x3dda71),_0x2d4e55=new Date(),_0x5d6187=Math['floor']((_0x2d4e55-_0x5d6e78)/0xea60);if(_0x5d6187<0x1)return _0x506364(0x120);return _0x5d6187+_0x506364(0x12a);}async function checkQueueTimeout(_0x5223e3){const _0x45e203=a45_0x4484db;if(!_0x5223e3['lastUpdated'])return;const _0x250576=_0x5223e3['lastUpdated']['toDate']?_0x5223e3['lastUpdated']['toDate']():new Date(_0x5223e3['lastUpdated']),_0x14d617=new Date(),_0x2346e7=Math['floor']((_0x14d617-_0x250576)/0xea60);if(_0x2346e7>=0x1e)try{const _0x68c13a=doc(db,_0x45e203(0x11b),_0x5223e3['id']);await updateDoc(_0x68c13a,{'isReady':![]});}catch(_0x542389){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x542389);}}function a45_0x2f86(){const _0xb6f91a=['readyPlayers','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','console','toString','Just\x20now','__proto__','unload','toDate','trace','data','lastUpdated','style','length','display','m\x20in\x20queue','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','none'];a45_0x2f86=function(){return _0xb6f91a;};return a45_0x2f86();}const unsubscribe=onSnapshot(readyPlayersRef,_0x148221=>{const _0x3035fc=[];_0x148221['forEach'](_0x537ec0=>{const _0x4eb53a=a45_0x4690,_0x592415=_0x537ec0[_0x4eb53a(0x125)]();if(_0x592415['isReady']===!![]){const _0x1e520f={'id':_0x537ec0['id'],'username':_0x592415['username'],'lastUpdated':_0x592415[_0x4eb53a(0x126)]||new Date()};_0x3035fc['push'](_0x1e520f),checkQueueTimeout(_0x1e520f);}}),updateQueueDisplay(_0x3035fc);},_0xb73f10=>{console['error']('Error\x20in\x20queue\x20listener:',_0xb73f10);});function a45_0x4690(_0x56275a,_0x16a5a2){const _0x7e616d=a45_0x2f86();return a45_0x4690=function(_0x3174c9,_0x1ed430){_0x3174c9=_0x3174c9-0x11b;let _0x2f863c=_0x7e616d[_0x3174c9];return _0x2f863c;},a45_0x4690(_0x56275a,_0x16a5a2);}window['addEventListener'](a45_0x4484db(0x122),()=>{unsubscribe();});