const a22_0x3453f4=a22_0x1cb9;import a22_0x4b5b28,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';function a22_0x5eb9(){const _0x1c12b9=['display','resource-exhausted','apply','system','bind','code','reload-page-btn','console','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','style','#3da05f','DOMContentLoaded','idle-overlay','now','suspendSession','pendingOperations','constructor','color:\x20#fff;\x20margin-bottom:\x2030px;','blockedOperations','table','Network\x20error:','error','{}.constructor(\x22return\x20this\x22)(\x20)','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','Session\x20Suspended\x20Due\x20to\x20Inactivity','forEach','network-error-overlay','cssText','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','size','#50C878','addEventListener','createElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20','loading','Retrying\x20connection...','Retry\x20Connection','div','Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.','unavailable','Connection\x20test\x20failed:','log','message','click','includes','Session\x20resumed','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','disabled','textContent','appendChild','keys'];a22_0x5eb9=function(){return _0x1c12b9;};return a22_0x5eb9();}const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x4be237=a22_0x1cb9;if(document['getElementById']('idle-overlay'))return;const _0x46b09f=document[_0x4be237(0x163)](_0x4be237(0x168));_0x46b09f['id']='idle-overlay',_0x46b09f['style'][_0x4be237(0x15e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x3931fd=document['createElement']('div');_0x3931fd[_0x4be237(0x14b)]['cssText']=_0x4be237(0x14a);const _0x20c147=document['createElement']('h2');_0x20c147['textContent']=_0x4be237(0x15b),_0x20c147['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x7fbf2=document['createElement']('p');_0x7fbf2['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x7fbf2[_0x4be237(0x14b)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x77a470=document['createElement']('button');_0x77a470['id']='resume-session-btn',_0x77a470[_0x4be237(0x173)]='Return\x20to\x20Website',_0x77a470['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x77a470['onmouseover']=function(){const _0x13453c=_0x4be237;this['style']['backgroundColor']=_0x13453c(0x14c);},_0x77a470['onmouseout']=function(){const _0x2b041b=_0x4be237;this[_0x2b041b(0x14b)]['backgroundColor']=_0x2b041b(0x161);},_0x3931fd['appendChild'](_0x20c147),_0x3931fd['appendChild'](_0x7fbf2),_0x3931fd['appendChild'](_0x77a470),_0x46b09f[_0x4be237(0x174)](_0x3931fd),document['body'][_0x4be237(0x174)](_0x46b09f),_0x77a470['addEventListener'](_0x4be237(0x16e),resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x2fb13c=a22_0x1cb9;if(document['getElementById'](_0x2fb13c(0x15d)))return;const _0x33e99d=document['createElement']('div');_0x33e99d['id']='network-error-overlay',_0x33e99d['style']['cssText']=_0x2fb13c(0x15a);const _0x32f769=document['createElement'](_0x2fb13c(0x168));_0x32f769[_0x2fb13c(0x14b)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x43bca2=document['createElement']('h2');_0x43bca2[_0x2fb13c(0x173)]='Connection\x20Error',_0x43bca2[_0x2fb13c(0x14b)]['cssText']=_0x2fb13c(0x171);const _0x3ba26e=document[_0x2fb13c(0x163)]('p');_0x3ba26e['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x3ba26e[_0x2fb13c(0x14b)][_0x2fb13c(0x15e)]=_0x2fb13c(0x153);const _0x1e7453=document[_0x2fb13c(0x163)]('button');_0x1e7453['id']='retry-connection-btn',_0x1e7453['textContent']=_0x2fb13c(0x167),_0x1e7453['style']['cssText']=_0x2fb13c(0x164);const _0x549084=document['createElement']('button');_0x549084['id']=_0x2fb13c(0x148),_0x549084['textContent']='Reload\x20Page',_0x549084['style'][_0x2fb13c(0x15e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x4a8669=document['createElement']('div');_0x4a8669[_0x2fb13c(0x14b)]['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x4a8669['appendChild'](_0x1e7453),_0x4a8669['appendChild'](_0x549084),_0x32f769['appendChild'](_0x43bca2),_0x32f769['appendChild'](_0x3ba26e),_0x32f769['appendChild'](_0x4a8669),_0x33e99d[_0x2fb13c(0x174)](_0x32f769),document['body']['appendChild'](_0x33e99d),_0x1e7453['addEventListener'](_0x2fb13c(0x16e),retryConnection),_0x549084[_0x2fb13c(0x162)]('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function a22_0x1cb9(_0xb556f1,_0x3c4b57){const _0x30c785=a22_0x5eb9();return a22_0x1cb9=function(_0x2bbfb8,_0x16c52c){_0x2bbfb8=_0x2bbfb8-0x142;let _0x5eb958=_0x30c785[_0x2bbfb8];return _0x5eb958;},a22_0x1cb9(_0xb556f1,_0x3c4b57);}function handleNetworkError(){clearTimeout(idleTimer);const _0x400914=document['getElementById']('network-error-overlay');_0x400914&&(_0x400914['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x4b5b28['suspendAllListeners']();}function retryConnection(){const _0x538e0d=a22_0x1cb9;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x2d5c65=document['querySelector']('#network-error-overlay\x20p');_0x2d5c65&&(_0x2d5c65['textContent']=_0x538e0d(0x169));const _0x154537=document['getElementById']('retry-connection-btn');_0x154537&&(_0x154537[_0x538e0d(0x172)]=!![],_0x154537['style']['opacity']='0.5',_0x154537['style']['cursor']='not-allowed');return;}const _0x4fab88=document['getElementById']('network-error-overlay');_0x4fab88&&(_0x4fab88[_0x538e0d(0x14b)]['display']='none');window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log'](_0x538e0d(0x166));try{const {rdlFirestore:_0x316486}=window;if(_0x316486){const _0x21e4f7=_0x316486['collection'](_0x538e0d(0x145));_0x316486['getDocs'](_0x21e4f7)['catch'](_0x200089=>{const _0x4f9e6f=_0x538e0d;console[_0x4f9e6f(0x157)](_0x4f9e6f(0x16b),_0x200089),handleNetworkError();});}}catch(_0x22a16d){console['error']('Failed\x20to\x20test\x20connection:',_0x22a16d),handleNetworkError();}a22_0x4b5b28['resumeAllListeners']();}function suspendSession(){isSessionSuspended=!![];const _0x1ff009=document['getElementById']('idle-overlay');_0x1ff009&&(_0x1ff009['style']['display']='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a22_0x4b5b28['suspendAllListeners']();}function resumeSession(){const _0x30a472=a22_0x1cb9;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x26de9e=document['getElementById'](_0x30a472(0x14e));_0x26de9e&&(_0x26de9e['style'][_0x30a472(0x142)]='none'),console['log'](_0x30a472(0x170)),resetIdleTimer(),a22_0x4b5b28['resumeAllListeners'](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x30a472(0x15f)),window['location']['reload']());}function initIdleTimeout(){const _0x3dcf7c=a22_0x1cb9,_0x1eca8e=(function(){let _0x52b697=!![];return function(_0x4cb284,_0x290066){const _0x434164=_0x52b697?function(){const _0x2d8991=a22_0x1cb9;if(_0x290066){const _0x3d058e=_0x290066[_0x2d8991(0x144)](_0x4cb284,arguments);return _0x290066=null,_0x3d058e;}}:function(){};return _0x52b697=![],_0x434164;};}()),_0x3da6cd=_0x1eca8e(this,function(){const _0x6d1f24=a22_0x1cb9;let _0x2a1fea;try{const _0x40832a=Function('return\x20(function()\x20'+_0x6d1f24(0x158)+');');_0x2a1fea=_0x40832a();}catch(_0x42253a){_0x2a1fea=window;}const _0xa45086=_0x2a1fea[_0x6d1f24(0x149)]=_0x2a1fea[_0x6d1f24(0x149)]||{},_0xdc5dfd=['log','warn','info',_0x6d1f24(0x157),'exception',_0x6d1f24(0x155),'trace'];for(let _0x31b3e5=0x0;_0x31b3e5<_0xdc5dfd['length'];_0x31b3e5++){const _0x31fff9=_0x1eca8e[_0x6d1f24(0x152)]['prototype']['bind'](_0x1eca8e),_0x19c1e0=_0xdc5dfd[_0x31b3e5],_0x5a9d05=_0xa45086[_0x19c1e0]||_0x31fff9;_0x31fff9['__proto__']=_0x1eca8e['bind'](_0x1eca8e),_0x31fff9[_0x6d1f24(0x159)]=_0x5a9d05['toString'][_0x6d1f24(0x146)](_0x5a9d05),_0xa45086[_0x19c1e0]=_0x31fff9;}});_0x3da6cd(),createIdleOverlay();const _0x35de84=['mousedown','mousemove','keypress','scroll','touchstart','click'];_0x35de84[_0x3dcf7c(0x15c)](_0x5e145a=>{document['addEventListener'](_0x5e145a,()=>{const _0x1cf0f8=a22_0x1cb9;window['RDL_LAST_ACTIVITY']=Date[_0x1cf0f8(0x14f)](),resetIdleTimer();},!![]);}),window[_0x3dcf7c(0x162)](_0x3dcf7c(0x157),function(_0xf9df6d){const _0x2a5dd3=_0x3dcf7c;_0xf9df6d[_0x2a5dd3(0x157)]&&(_0xf9df6d['error'][_0x2a5dd3(0x16d)]&&_0xf9df6d['error']['message'][_0x2a5dd3(0x16f)]('network')||_0xf9df6d[_0x2a5dd3(0x157)]['code']&&(_0xf9df6d[_0x2a5dd3(0x157)]['code']===_0x2a5dd3(0x16a)||_0xf9df6d['error']['code']===_0x2a5dd3(0x143)||_0xf9df6d[_0x2a5dd3(0x157)][_0x2a5dd3(0x147)]['includes']('network')))&&(handleNetworkError(),_0xf9df6d['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window[_0x3dcf7c(0x150)]=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x2842f1=_0x3dcf7c;return console[_0x2842f1(0x16c)]('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log'](_0x2842f1(0x156),window['RDL_NETWORK_ERROR']),console['log']('Active\x20listeners:',a22_0x4b5b28['activeListeners']['size']),console['log']('Pending\x20operations:',a22_0x4b5b28['pendingOperations'][_0x2842f1(0x160)]),console[_0x2842f1(0x16c)]('Blocked\x20operations:',a22_0x4b5b28['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x4b5b28['activeListeners'][_0x2842f1(0x175)]()),'pendingOperations':Array['from'](a22_0x4b5b28[_0x2842f1(0x151)][_0x2842f1(0x175)]()),'blockedCount':a22_0x4b5b28[_0x2842f1(0x154)]||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']===a22_0x3453f4(0x165)?document['addEventListener'](a22_0x3453f4(0x14d),initIdleTimeout):initIdleTimeout();