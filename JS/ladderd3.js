const a31_0x184a55=a31_0x2d2d,a31_0x38a735=(function(){let _0xa1562f=!![];return function(_0x38551c,_0x2dba25){const _0x2f551d=_0xa1562f?function(){if(_0x2dba25){const _0x17fd53=_0x2dba25['apply'](_0x38551c,arguments);return _0x2dba25=null,_0x17fd53;}}:function(){};return _0xa1562f=![],_0x2f551d;};}()),a31_0x2d9308=a31_0x38a735(this,function(){const _0x291584=a31_0x2d2d,_0x474712=function(){const _0x39aa19=a31_0x2d2d;let _0x68a20a;try{_0x68a20a=Function('return\x20(function()\x20'+_0x39aa19(0x1d8)+');')();}catch(_0x5cdf0a){_0x68a20a=window;}return _0x68a20a;},_0x2f5d9c=_0x474712(),_0xf025de=_0x2f5d9c['console']=_0x2f5d9c['console']||{},_0x57f560=['log','warn','info','error',_0x291584(0x212),'table','trace'];for(let _0x482e80=0x0;_0x482e80<_0x57f560['length'];_0x482e80++){const _0x3a3095=a31_0x38a735['constructor'][_0x291584(0x20f)]['bind'](a31_0x38a735),_0xdbca6e=_0x57f560[_0x482e80],_0x1043ce=_0xf025de[_0xdbca6e]||_0x3a3095;_0x3a3095['__proto__']=a31_0x38a735['bind'](a31_0x38a735),_0x3a3095['toString']=_0x1043ce[_0x291584(0x1e8)]['bind'](_0x1043ce),_0xf025de[_0xdbca6e]=_0x3a3095;}});a31_0x2d9308();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a31_0x54696b from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const styleEl=document[a31_0x184a55(0x20b)]('style');styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x4d488b=![]){const _0x49f8eb=a31_0x184a55,_0x1ca791=document[_0x49f8eb(0x1f6)]('#ladder-d3\x20tbody');if(!_0x1ca791){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x1ca791['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0x329b8a=Date[_0x49f8eb(0x1f9)]();if(!_0x4d488b&&playerCacheD3[_0x49f8eb(0x1fe)]&&_0x329b8a-playerCacheD3[_0x49f8eb(0x1e0)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x52e2fe=collection(db,_0x49f8eb(0x1ee)),_0x4cffe5=await getDocs(_0x52e2fe),_0x40782c=[];_0x4cffe5['forEach'](_0x31869e=>{const _0x5c6762=_0x49f8eb,_0x1aa8c6=_0x31869e['data']();_0x1aa8c6['username']&&_0x40782c[_0x5c6762(0x1e4)]({..._0x1aa8c6,'id':_0x31869e['id'],'elo':_0x1aa8c6['eloRating']||0x0,'position':_0x1aa8c6['position']||Number['MAX_SAFE_INTEGER']});});const _0x4a65fe=collection(db,_0x49f8eb(0x202)),_0x2e722c=await getDocs(_0x4a65fe),_0xe226fb=new Map();_0x2e722c[_0x49f8eb(0x1f2)](_0x31bc9d=>{const _0x5ec5be=_0x49f8eb,_0x14d887=_0x31bc9d[_0x5ec5be(0x1fe)]();_0x14d887['username']&&_0xe226fb['set'](_0x14d887['username']['toLowerCase'](),_0x14d887);});for(const _0x2c1766 of _0x40782c){const _0x1ae4ce=_0x2c1766[_0x49f8eb(0x205)][_0x49f8eb(0x1e1)]();if(_0xe226fb['has'](_0x1ae4ce)){const _0x3b3358=_0xe226fb['get'](_0x1ae4ce);_0x3b3358[_0x49f8eb(0x1de)]&&(_0x2c1766['country']=_0x3b3358['country']['toLowerCase']()),_0x2c1766['points']=_0x3b3358['points']||0x0;}else _0x2c1766['points']=0x0;}const _0x135224=_0x40782c['map'](_0x2ab99b=>_0x2ab99b['username']),_0x290ba3=await fetchBatchMatchStatsD3(_0x135224);_0x40782c['sort']((_0x33e391,_0x5e7052)=>{const _0x2420c7=_0x49f8eb,_0x4947b7=_0x290ba3[_0x2420c7(0x1ed)](_0x33e391['username'])?.[_0x2420c7(0x201)]||0x0,_0x30b9a8=_0x290ba3['get'](_0x5e7052['username'])?.['totalMatches']||0x0;if(_0x4947b7===0x0!==(_0x30b9a8===0x0))return _0x4947b7===0x0?0x1:-0x1;return(_0x33e391['position']||0x3e7)-(_0x5e7052['position']||0x3e7);}),_0x40782c['forEach']((_0x2709ba,_0x4e7cbb)=>{const _0x1a553b=_0x49f8eb;_0x2709ba[_0x1a553b(0x20e)]=_0x4e7cbb+0x1;}),playerCacheD3[_0x49f8eb(0x1fe)]=_0x40782c,playerCacheD3[_0x49f8eb(0x1e0)]=_0x329b8a,updateLadderDisplayD3(_0x40782c);}catch(_0x336d59){console['error']('Error\x20loading\x20D3\x20ladder:',_0x336d59),_0x1ca791[_0x49f8eb(0x1dc)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x336d59[_0x49f8eb(0x20d)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x287774){const _0x2dbff8=a31_0x184a55;if(!_0x287774)return 0x0;const _0x50d72e=_0x287774[_0x2dbff8(0x1db)](),_0x59fc9a=new Date(),_0x10940d=Math[_0x2dbff8(0x204)](_0x59fc9a-_0x50d72e);return Math['ceil'](_0x10940d/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x2f58a7,_0x191274){const _0x4331cb=a31_0x184a55;try{const _0x42c843=collection(db,'playersD3'),_0x4f1ecf=await getDocs(_0x42c843),_0x3b6f11=[];_0x4f1ecf['forEach'](_0x41263e=>{_0x3b6f11['push']({'id':_0x41263e['id'],..._0x41263e['data']()});});const _0x23b42a=_0x3b6f11['find'](_0x58675a=>_0x58675a['username']===_0x2f58a7),_0x577461=_0x3b6f11['find'](_0x4078e7=>_0x4078e7['username']===_0x191274);if(!_0x23b42a||!_0x577461){console['error'](_0x4331cb(0x1ff));return;}if(_0x23b42a['position']>_0x577461[_0x4331cb(0x20e)]){const _0x5a1786=_0x577461['position'];for(const _0x4e4f46 of _0x3b6f11){_0x4e4f46['position']>=_0x577461['position']&&_0x4e4f46['position']<_0x23b42a['position']&&_0x4e4f46['username']!==_0x2f58a7&&await updateDoc(doc(db,'playersD3',_0x4e4f46['id']),{'position':_0x4e4f46['position']+0x1});}await updateDoc(doc(db,'playersD3',_0x23b42a['id']),{'position':_0x5a1786});if(_0x5a1786===0x1){const _0x5cc79a=doc(db,'playersD3',_0x23b42a['id']),_0x43ece7=await getDoc(_0x5cc79a);!_0x43ece7[_0x4331cb(0x1fe)]()['firstPlaceDate']&&await updateDoc(_0x5cc79a,{'firstPlaceDate':Timestamp['now']()});}if(_0x577461[_0x4331cb(0x20e)]===0x1){const _0x1fc83c=doc(db,_0x4331cb(0x1ee),_0x577461['id']);await updateDoc(_0x1fc83c,{'firstPlaceDate':null});}playerCacheD3['timestamp']=0x0;}}catch(_0x3e0252){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x3e0252);}}async function updateLadderDisplayD3(_0x15ed82){const _0x5deb69=a31_0x184a55;_0x15ed82['sort']((_0x4c8a74,_0x3c2362)=>_0x4c8a74['position']-_0x3c2362['position']);const _0x15b036=document[_0x5deb69(0x1f6)]('#ladder-d3\x20tbody');if(!_0x15b036)return;_0x15b036[_0x5deb69(0x1dc)]='';const _0x4b3ac7=_0x15ed82[_0x5deb69(0x1e2)](_0x2b19ca=>_0x2b19ca['username']),_0xfb12f2=await fetchBatchMatchStatsD3(_0x4b3ac7);let _0x4da387=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x4da387=await getTokensByUsernames(_0x4b3ac7);}catch(_0x364b58){console[_0x5deb69(0x1d9)]('D3:\x20Error\x20fetching\x20tokens:',_0x364b58);}const _0x5cb2be=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x5cb2be&&(_0x5cb2be['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x1ea659=_0x15ed82[_0x5deb69(0x1e2)](_0x54be0e=>{const _0x3f9d06=_0xfb12f2['get'](_0x54be0e['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x1a1f02=_0x4da387['get'](_0x54be0e['username'])||[],_0x24716f=getPrimaryDisplayToken(_0x1a1f02);return createPlayerRowD3(_0x54be0e,_0x3f9d06,_0x24716f);})['join']('');_0x15b036['innerHTML']=_0x1ea659,getPlayersLastEloChangesD3(_0x4b3ac7)[_0x5deb69(0x1ec)](_0x4c2d9b=>{const _0x2d84e1=new Map();_0x15b036['querySelectorAll']('tr')['forEach']((_0x657c6,_0x357a33)=>{const _0x5cb233=a31_0x2d2d;_0x357a33<_0x4b3ac7[_0x5cb233(0x206)]&&_0x2d84e1['set'](_0x4b3ac7[_0x357a33],_0x657c6);}),_0x4c2d9b['forEach']((_0x5da1e2,_0x59c5e6)=>{const _0x592d03=a31_0x2d2d,_0x4c9984=_0x2d84e1['get'](_0x59c5e6);if(_0x4c9984&&_0x5da1e2!==0x0){const _0x1a86df=_0x4c9984[_0x592d03(0x1f6)]('td:nth-child(3)');if(_0x1a86df){const _0x583c7f=_0x5da1e2>0x0?'+'+_0x5da1e2:''+_0x5da1e2,_0x574e52=_0x1a86df['querySelector']('.trend-indicator');_0x574e52&&(_0x574e52['textContent']=_0x583c7f,_0x574e52['style']['color']=_0x5da1e2>0x0?'#4CAF50':'#F44336',_0x574e52['style']['fontWeight']='bold',_0x574e52[_0x592d03(0x1fb)][_0x592d03(0x1f4)]=_0x592d03(0x1f0),_0x574e52['style']['display']='inline',_0x574e52['style']['visibility']='visible',_0x574e52['style']['opacity']='1');}}});})['catch'](_0x3bcd48=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x3bcd48));}async function fetchBatchMatchStatsD3(_0x4f0a9d){const _0x1e03f3=new Map();try{_0x4f0a9d['forEach'](_0x4993ae=>{_0x1e03f3['set'](_0x4993ae,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x513db4=collection(db,'approvedMatchesD3'),_0x4678d1=await getDocs(_0x513db4);_0x4678d1['forEach'](_0x527d18=>{const _0x219d3e=a31_0x2d2d,_0xfa9e2a=_0x527d18[_0x219d3e(0x1fe)](),_0x20808c=_0xfa9e2a['winnerUsername'],_0xc288ff=_0xfa9e2a['loserUsername'];if(_0x4f0a9d['includes'](_0x20808c)){const _0x5a08b6=_0x1e03f3[_0x219d3e(0x1ed)](_0x20808c);_0x5a08b6[_0x219d3e(0x1f8)]++,_0x5a08b6['totalMatches']++,_0x5a08b6['totalKills']+=parseInt(_0xfa9e2a[_0x219d3e(0x1dd)])||0x0,_0x5a08b6[_0x219d3e(0x203)]+=parseInt(_0xfa9e2a['loserScore'])||0x0;}if(_0x4f0a9d['includes'](_0xc288ff)){const _0x51d210=_0x1e03f3['get'](_0xc288ff);_0x51d210['losses']++,_0x51d210['totalMatches']++,_0x51d210[_0x219d3e(0x1fd)]+=parseInt(_0xfa9e2a['loserScore'])||0x0,_0x51d210['totalDeaths']+=parseInt(_0xfa9e2a['winnerScore'])||0x0;}}),_0x4f0a9d['forEach'](_0x565e8b=>{const _0x343c1a=a31_0x2d2d,_0x4edcde=_0x1e03f3['get'](_0x565e8b);_0x4edcde[_0x343c1a(0x1e5)]=_0x4edcde[_0x343c1a(0x203)]>0x0?(_0x4edcde['totalKills']/_0x4edcde['totalDeaths'])['toFixed'](0x2):_0x4edcde['totalKills'],_0x4edcde[_0x343c1a(0x1ea)]=_0x4edcde[_0x343c1a(0x201)]>0x0?(_0x4edcde[_0x343c1a(0x1f8)]/_0x4edcde[_0x343c1a(0x201)]*0x64)[_0x343c1a(0x20a)](0x1):0x0;});}catch(_0x4ec071){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x4ec071);}return _0x1e03f3;}function a31_0x2d2d(_0x3cce67,_0x58677e){const _0x2d9308=a31_0x5c37();return a31_0x2d2d=function(_0x38a735,_0x5ef16a){_0x38a735=_0x38a735-0x1d5;let _0x5c374e=_0x2d9308[_0x38a735];return _0x5c374e;},a31_0x2d2d(_0x3cce67,_0x58677e);}function createPlayerRowD3(_0x1f5d37,_0x892505,_0x402b6a){const _0x34efbd=a31_0x184a55,_0x3c8e66=parseFloat(_0x1f5d37['elo'])||0x0;let _0x3faf51='#DC143C';if(_0x892505[_0x34efbd(0x201)]===0x0)_0x3faf51=_0x34efbd(0x210);else{if(_0x3c8e66>=0x3e8&&_0x892505[_0x34efbd(0x1ea)]>=0x50&&_0x892505['totalMatches']>=0x14)_0x3faf51='#50C878';else{if(_0x3c8e66>=0x2bc)_0x3faf51=_0x34efbd(0x1e3);else{if(_0x3c8e66>=0x1f4)_0x3faf51=_0x34efbd(0x1e7);else _0x3c8e66>=0xc8&&(_0x3faf51=_0x34efbd(0x1df));}}}let _0x1e9d63='';_0x1f5d37[_0x34efbd(0x1de)]&&(_0x1e9d63=_0x34efbd(0x1e6)+_0x1f5d37[_0x34efbd(0x1de)]['toLowerCase']()+_0x34efbd(0x1f7)+_0x1f5d37['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x273167='';return _0x402b6a&&(_0x273167='<img\x20src=\x22'+_0x402b6a[_0x34efbd(0x1e9)]+_0x34efbd(0x1d6)+_0x402b6a['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x402b6a['tokenName']+'\x20'+(_0x402b6a['equipped']?'(Equipped)':'')+_0x34efbd(0x1f3)),_0x34efbd(0x209)+_0x1f5d37['position']+_0x34efbd(0x1d5)+encodeURIComponent(_0x1f5d37['username'])+_0x34efbd(0x200)+_0x3faf51+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1f5d37['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1e9d63+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x273167+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x3faf51+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3c8e66+_0x34efbd(0x207)+_0x892505[_0x34efbd(0x201)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x892505['wins']+_0x34efbd(0x20c)+_0x892505['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x892505['kda']+_0x34efbd(0x20c)+_0x892505['winRate']+_0x34efbd(0x1fc)+(_0x1f5d37['points']||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0xe1134b){const _0x344928=a31_0x184a55,_0x7126ea=new Map();_0xe1134b[_0x344928(0x1f2)](_0x2d61dd=>_0x7126ea['set'](_0x2d61dd,0x0));try{const _0x124e10=new Map(),_0x4c4074=await getDocs(collection(db,'playersD3'));_0x4c4074[_0x344928(0x1f2)](_0x4dbf8c=>{const _0x4d4466=_0x4dbf8c['data']();_0x4d4466['username']&&_0x124e10['set'](_0x4dbf8c['id'],_0x4d4466['username']);});const _0x250e96=collection(db,'eloHistoryD3'),_0x19e555=query(_0x250e96,orderBy('timestamp','desc'),limit(0x64)),_0x2149a7=await getDocs(_0x19e555),_0xc43b25=new Map();_0x2149a7['forEach'](_0xf49db6=>{const _0x4a94bc=_0x344928,_0x25bb20=_0xf49db6['data']();let _0x28eec1=null;if(_0x25bb20[_0x4a94bc(0x205)])_0x28eec1=_0x25bb20[_0x4a94bc(0x205)];else{if(_0x25bb20[_0x4a94bc(0x1f1)])_0x28eec1=_0x25bb20['playerUsername'];else{if(_0x25bb20['player']&&typeof _0x25bb20[_0x4a94bc(0x1da)]==='string')_0x28eec1=_0x25bb20[_0x4a94bc(0x1da)];else{if(_0x25bb20['player']&&_0x124e10['has'](_0x25bb20['player']))_0x28eec1=_0x124e10['get'](_0x25bb20[_0x4a94bc(0x1da)]);else _0x25bb20['playerId']&&_0x124e10[_0x4a94bc(0x1eb)](_0x25bb20['playerId'])&&(_0x28eec1=_0x124e10['get'](_0x25bb20['playerId']));}}}_0x28eec1&&_0xe1134b['includes'](_0x28eec1)&&(!_0xc43b25[_0x4a94bc(0x1eb)](_0x28eec1)&&_0xc43b25['set'](_0x28eec1,[]),_0xc43b25['get'](_0x28eec1)['push']({..._0x25bb20,'timestamp':_0x25bb20['timestamp']?.['seconds']||0x0}));}),_0xc43b25['forEach']((_0x5ecbdf,_0x1abd6d)=>{const _0x4179cd=_0x344928;if(_0x5ecbdf['length']>0x0){_0x5ecbdf['sort']((_0x25cd9d,_0x31c901)=>_0x31c901['timestamp']-_0x25cd9d['timestamp']);const _0x3b98da=_0x5ecbdf['find'](_0x1fdf5a=>_0x1fdf5a['change']!==undefined||_0x1fdf5a['newElo']!==undefined&&_0x1fdf5a['previousElo']!==undefined);if(_0x3b98da){let _0x422b83;if(_0x3b98da['change']!==undefined)_0x422b83=_0x3b98da['change'];else _0x3b98da['newElo']!==undefined&&_0x3b98da['previousElo']!==undefined&&(_0x422b83=_0x3b98da[_0x4179cd(0x1fa)]-_0x3b98da['previousElo']);_0x422b83!==undefined&&_0x7126ea['set'](_0x1abd6d,_0x422b83);}}});if(_0xc43b25['size']===0x0){const _0x366325=collection(db,'eloHistory'),_0x123713=query(_0x366325,where('gameMode','==','D3'),orderBy('timestamp',_0x344928(0x1d7)),limit(0x32));try{const _0x4bfee2=await getDocs(_0x123713);_0x4bfee2['forEach'](_0x426f85=>{const _0x3dcf9e=_0x344928,_0x4a5b06=_0x426f85['data']();let _0x1e379b=_0x4a5b06['username']||_0x4a5b06['playerUsername'];!_0x1e379b&&_0x4a5b06['player']&&_0x124e10['has'](_0x4a5b06['player'])&&(_0x1e379b=_0x124e10['get'](_0x4a5b06['player']));if(_0x1e379b&&_0xe1134b['includes'](_0x1e379b)){const _0x54725b=_0x4a5b06['change']||(_0x4a5b06['newElo']!==undefined&&_0x4a5b06[_0x3dcf9e(0x208)]!==undefined?_0x4a5b06['newElo']-_0x4a5b06['previousElo']:0x0);_0x54725b!==0x0&&_0x7126ea['set'](_0x1e379b,_0x54725b);}});}catch(_0x134449){console['error'](_0x344928(0x1ef),_0x134449);}}}catch(_0x4283b7){console[_0x344928(0x1d9)](_0x344928(0x1f5),_0x4283b7);}return _0x7126ea;}window['refreshLadderDisplayD3']=function(_0x4d1c08=!![]){const _0x4455d2=a31_0x184a55;typeof displayLadderD3===_0x4455d2(0x211)?displayLadderD3(_0x4d1c08):console['warn']('displayLadderD3\x20function\x20not\x20available');};function a31_0x5c37(){const _0x537319=['</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','desc','{}.constructor(\x22return\x20this\x22)(\x20)','error','player','toDate','innerHTML','winnerScore','country','#CD7F32','timestamp','toLowerCase','map','#FFD700','push','kda','<img\x20src=\x22../images/flags/','#C0C0C0','toString','tokenImage','winRate','has','then','get','playersD3','D3:\x20Fallback\x20query\x20failed:','0.85em','playerUsername','forEach','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','fontSize','D3:\x20Error\x20fetching\x20ELO\x20history:','querySelector','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','wins','now','newElo','style','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','totalKills','data','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','totalMatches','userProfiles','totalDeaths','abs','username','length','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','previousElo','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','toFixed','createElement','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','message','position','prototype','#DC143C','function','exception'];a31_0x5c37=function(){return _0x537319;};return a31_0x5c37();}export{displayLadderD3,updatePlayerPositions};