const a48L=a48d;(function(a,b){const I=a48d,c=a();while(!![]){try{const d=parseInt(I(0x128))/0x1*(parseInt(I(0x12c))/0x2)+parseInt(I(0x122))/0x3+parseInt(I(0x190))/0x4*(-parseInt(I(0x1eb))/0x5)+-parseInt(I(0x119))/0x6*(-parseInt(I(0x1c6))/0x7)+parseInt(I(0x1b8))/0x8+-parseInt(I(0x11a))/0x9*(parseInt(I(0x140))/0xa)+parseInt(I(0x157))/0xb*(parseInt(I(0x1d2))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a48c,0xcea93));const a48b=(function(){let a=!![];return function(b,c){const d=a?function(){const J=a48d;if(c){const e=c[J(0x1ce)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a48a=a48b(this,function(){const K=a48d,a=function(){let f;try{f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(g){f=window;}return f;},b=a(),c=b[K(0x1d0)]=b['console']||{},d=['log','warn','info','error',K(0x1cb),'table','trace'];for(let e=0x0;e<d[K(0x146)];e++){const f=a48b[K(0x1e3)][K(0x15a)][K(0x19e)](a48b),g=d[e],h=c[g]||f;f['__proto__']=a48b[K(0x19e)](a48b),f['toString']=h[K(0x1f6)][K(0x19e)](h),c[g]=f;}});a48a();import{approveReport}from'./ladderalgorithm.js';import{approveReportD2}from'./ladderalgorithm-d2.js';import{approveReportD3}from'./ladderalgorithm-d3.js';import{checkPendingMatches,updatePendingMatchNotification,updateNotificationDot}from'./checkPendingMatches.js';import{collection,getDocs,query,where,orderBy,serverTimestamp,doc,setDoc,getDoc,addDoc,updateDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentUserEmail=null,confirmationNotification=null,outstandingReportData=null,currentGameMode='D1',outstandingMatches=[];document[a48L(0x1c1)](a48L(0x1c7),async()=>{const M=a48L,a={'authWarning':document[M(0x1a7)]('auth-warning'),'reportForm':document['getElementById'](M(0x137)),'winnerUsername':document[M(0x1a7)](M(0x14b)),'loserUsername':document['getElementById']('loser-username'),'loserScore':document['getElementById']('loser-score'),'suicides':document['getElementById']('suicides'),'mapPlayed':document[M(0x1a7)]('map-played'),'loserComment':document['getElementById']('loser-comment'),'reportError':document[M(0x1a7)](M(0x12e)),'reportLightbox':document[M(0x1a7)]('report-lightbox')};Object['entries'](a)[M(0x133)](([f,g])=>{const N=M;!g&&console[N(0x1ba)](N(0x11b)+f+N(0x13c));});const b=document['getElementById']('d1-mode'),c=document[M(0x1a7)]('d2-mode'),d=document['getElementById'](M(0x1e1));b['addEventListener'](M(0x197),()=>{const O=M;e('D1'),b[O(0x166)][O(0x185)]('active'),c['classList'][O(0x175)]('active'),d[O(0x166)]['remove'](O(0x1d9));}),c['addEventListener']('click',()=>{const P=M;e('D2'),c['classList']['add']('active'),b['classList'][P(0x175)](P(0x1d9)),d['classList'][P(0x175)](P(0x1d9));}),d['addEventListener'](M(0x197),()=>{const Q=M;e('D3'),d['classList'][Q(0x185)]('active'),b['classList'][Q(0x175)]('active'),c['classList'][Q(0x175)](Q(0x1d9));});function e(f){const R=M;currentGameMode=f,console['log']('Game\x20mode\x20set\x20to:\x20'+currentGameMode),auth['currentUser']&&checkUserInLadderAndLoadOpponents(auth[R(0x129)][R(0x143)]);}setupAuthStateListener(a),setupReportForm(a),auth['currentUser']?(console[M(0x194)]('User\x20already\x20logged\x20in,\x20checking\x20D1\x20ladder\x20status'),checkUserInLadderAndLoadOpponents(auth['currentUser'][M(0x143)])):console['log'](M(0x141));});function setupAuthStateListener(a){onAuthStateChanged(auth,async b=>{b?handleUserSignedIn(b,a):handleUserSignedOut(a);});}async function handleUserSignedIn(a,b){const S=a48L;if(!b){console[S(0x12a)]('Elements\x20object\x20is\x20null\x20or\x20undefined');return;}currentUserEmail=a['email']||null;const c=a['uid'];try{const d=doc(db,'nonParticipants',c);try{const i=await getDoc(d);console[S(0x194)]('Non-participant\x20check:',{'exists':i['exists'](),'data':i[S(0x1e5)]()?i[S(0x1e8)]():null});if(i[S(0x1e5)]()&&i[S(0x1e8)]()[S(0x180)]===!![]){b[S(0x18d)]&&(b[S(0x18d)]['style']['display']='block',b['authWarning'][S(0x17c)]=S(0x1dd));b['reportForm']&&(b['reportForm']['style'][S(0x1c3)]=S(0x13a));return;}}catch(j){console['warn'](S(0x17e),j);}const e=[S(0x1d6),S(0x15e),'playersD3',S(0x1b6),'playersCTF'];let f=![],g='';for(const k of e){try{const l=doc(db,k,c),m=await getDoc(l);if(m['exists']()){f=!![],g=m['data']()['username'],console[S(0x194)]('User\x20found\x20in\x20collection\x20'+k+'\x20with\x20username:\x20'+g);if(k===S(0x1d6)&&currentGameMode!=='D1'){currentGameMode='D1';const n=document['getElementById']('d1-mode'),o=document['getElementById']('d2-mode'),p=document[S(0x1a7)](S(0x1e1));n['classList'][S(0x185)](S(0x1d9)),o[S(0x166)][S(0x175)]('active'),p['classList']['remove'](S(0x1d9));}else{if(k==='playersD2'&&currentGameMode!=='D2'){currentGameMode='D2';const q=document['getElementById']('d1-mode'),r=document['getElementById'](S(0x145)),s=document[S(0x1a7)]('d3-mode');r['classList']['add'](S(0x1d9)),q[S(0x166)][S(0x175)]('active'),s[S(0x166)][S(0x175)]('active');}}break;}}catch(t){console['warn'](S(0x1ee)+k+S(0x14c),t);}}if(!f){b['authWarning']&&(b[S(0x18d)][S(0x139)][S(0x1c3)]=S(0x1cc),b['authWarning']['textContent']='You\x20are\x20not\x20registered\x20in\x20any\x20ladder.');b[S(0x1cd)]&&(b[S(0x1cd)][S(0x139)]['display']='none');return;}const h=await checkUserInLadderAndLoadOpponents(c);if(!h){console['warn']('User\x20is\x20not\x20in\x20the\x20'+currentGameMode+S(0x187));for(const u of['players','playersD2',S(0x1c4)]){if(u===(currentGameMode==='D1'?'players':currentGameMode==='D2'?S(0x15e):'playersD3'))continue;const v=doc(db,u,c);try{const w=await getDoc(v);if(w[S(0x1e5)]()){const x=u===S(0x1d6)?'D1':u==='playersD2'?'D2':'D3';console['log']('User\x20found\x20in\x20'+u+',\x20switching\x20to\x20'+x+S(0x19b));const y=document['getElementById'](S(0x1e4)),z=document['getElementById']('d2-mode'),A=document['getElementById'](S(0x1e1));if(x==='D1')y['classList'][S(0x185)](S(0x1d9)),z['classList']['remove']('active'),A[S(0x166)][S(0x175)]('active');else x==='D2'?(z['classList'][S(0x185)]('active'),y['classList']['remove'](S(0x1d9)),A['classList'][S(0x175)]('active')):(A[S(0x166)]['add'](S(0x1d9)),y[S(0x166)][S(0x175)]('active'),z[S(0x166)][S(0x175)]('active'));currentGameMode=x,await checkUserInLadderAndLoadOpponents(c);break;}}catch(B){console['warn'](S(0x1ee)+u+':',B);}}}}catch(C){console['error'](S(0x1a1),C);}}function handleUserSignedOut(a){const T=a48L;a['authWarning'][T(0x139)][T(0x1c3)]='block',a['reportForm'][T(0x139)][T(0x1c3)]='none',currentUserEmail=null;}async function updateUserDisplay(a,b){const U=a48L,c=collection(db,U(0x1d6)),d=query(c,where('email','==',a)),e=await getDocs(d);if(!e[U(0x1c5)]){const f=e[U(0x130)][0x0]['data']()[U(0x16e)];b[U(0x16a)][U(0x17c)]=f;}}async function populateWinnerDropdown(a){const V=a48L;try{const b=collection(db,V(0x1d6)),c=await getDocs(b);a[V(0x16d)]='<option\x20value=\x22\x22>Select\x20Winner</option>',!c['empty']&&c[V(0x133)](d=>{const W=V,e=d[W(0x1e8)]();if(e[W(0x18c)]!==currentUserEmail){const f=document[W(0x13e)]('option');f['value']=e['email'],f[W(0x17c)]=e[W(0x16e)],a[W(0x11f)](f);}});}catch(d){console['error']('Error\x20populating\x20winner\x20dropdown:',d);throw d;}}function setupReportForm(a){const X=a48L;if(!a['reportForm'])return;a[X(0x1cd)]['addEventListener'](X(0x164),async b=>{const Y=X;b['preventDefault']();try{await submitReport(a),a[Y(0x1cd)]['reset'](),alert(Y(0x1d3));}catch(c){console[Y(0x12a)]('Error\x20submitting\x20report:',c),a[Y(0x184)]['textContent']='Error\x20reporting\x20game.\x20Please\x20try\x20again.';}});}async function submitReport(a){const Z=a48L,b=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',c=collection(db,b),d=doc(c);try{const e=auth['currentUser'];if(!e)throw new Error(Z(0x1d8));const f=e[Z(0x143)],g=currentGameMode==='D1'?'players':currentGameMode==='D2'?Z(0x15e):Z(0x1c4),h=await getDoc(doc(db,g,f));if(!h['exists']())throw new Error('Your\x20player\x20profile\x20not\x20found');const i=document['getElementById'](Z(0x1a5)),j=a[Z(0x18e)]['value'];if(!j)throw new Error(Z(0x1ec));const k=query(collection(db,g),where(Z(0x16e),'==',j)),l=await getDocs(k);if(l[Z(0x1c5)])throw new Error(Z(0x124));const m=l['docs'][0x0]['data'](),n=l['docs'][0x0]['id'],o={'matchId':d['id'],'loserUsername':h['data']()['username'],'loserId':f,'winnerUsername':m['username'],'winnerId':n,'loserScore':a[Z(0x19f)]['value'],'loserSuicides':a[Z(0x186)]['value'],'mapPlayed':a[Z(0x169)]['value'],'loserComment':a[Z(0x1af)][Z(0x125)],'subgameType':i?i['value']:'','gameMode':currentGameMode,'approved':![],'createdAt':serverTimestamp(),'winnerOldElo':m['eloRating']||null,'losersOldElo':h[Z(0x1e8)]()['eloRating']||null};await setDoc(d,o),console[Z(0x194)](Z(0x17d)+b+Z(0x192)+d['id']),a[Z(0x184)][Z(0x17c)]='Game\x20reported\x20successfully!',a['reportError'][Z(0x139)]['color']='green',updatePendingMatchNotification();}catch(p){console[Z(0x12a)](Z(0x162),p),a[Z(0x184)][Z(0x17c)]='Error:\x20'+p['message'],a[Z(0x184)]['style'][Z(0x155)]=Z(0x195);throw p;}}async function checkForOutstandingReports(a,b,c=null){const a0=a48L;console['log']('Checking\x20reports\x20for\x20user:\x20'+a+'\x20in\x20'+(c||'default\x20collection'));const d=c||(currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?a0(0x134):'pendingMatchesD3');console['log']('Using\x20collection:\x20'+d);try{const e=auth[a0(0x129)];if(!e){console['log'](a0(0x1bf));return;}const f=e[a0(0x143)],g=collection(db,d),h=query(g,where(a0(0x178),'==',f),where('approved','==',![]));let i=await getDocs(h);console[a0(0x194)]('Query\x20by\x20winnerId\x20results:\x20'+i['size']+a0(0x1d4));if(i[a0(0x1c5)]&&e[a0(0x18c)]){console[a0(0x194)](a0(0x167));const j=query(g,where(a0(0x150),'==',e[a0(0x18c)]),where(a0(0x193),'==',![]));i=await getDocs(j),console['log'](a0(0x198)+i[a0(0x189)]+a0(0x1d4));}if(i['empty']){console['log'](a0(0x1f3));const k=currentGameMode==='D1'?'players':'playersD2',l=await getDoc(doc(db,k,f));if(l[a0(0x1e5)]()&&l['data']()['username']){const m=l[a0(0x1e8)]()[a0(0x16e)],n=query(g,where(a0(0x18e),'==',m),where('approved','==',![]));i=await getDocs(n),console['log'](a0(0x12b)+i['size']+'\x20matches\x20found');}}if(!i[a0(0x1c5)]){const o=i[a0(0x130)][0x0][a0(0x1e8)]();return console[a0(0x194)](a0(0x123),o),o['id']=i['docs'][0x0]['id'],autoFillReportForm(o),updateNotificationDot(!![]),!![];}else return console['log'](a0(0x11c)),updateNotificationDot(![]),![];}catch(p){console[a0(0x12a)]('Error\x20checking\x20outstanding\x20reports:',p);}}function a48d(a,b){const c=a48c();return a48d=function(d,e){d=d-0x119;let f=c[d];if(a48d['oxSdqo']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a48d['MEYvQn']=g,a=arguments,a48d['oxSdqo']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a48d['MEYvQn'](f),a[i]=f):f=j,f;},a48d(a,b);}function autoFillReportForm(a){const a1=a48L;console['log']('Report\x20Data\x20in\x20autoFillReportForm:',a);if(a){const b=parseInt(a[a1(0x19f)]||'0'),c=b<0x12?0x14:b+0x2,d=a[a1(0x183)]||currentGameMode,e=d==='D1'?a1(0x1d6):d==='D2'?a1(0x15e):'playersD3';console['log'](a1(0x132)+e+a1(0x154)+d);let f;a['winnerId']?f=getDoc(doc(db,e,a[a1(0x178)]))[a1(0x1e2)](h=>h[a1(0x1e5)]()?{'id':h['id'],'data':h[a1(0x1e8)]()}:null):f=getDocs(query(collection(db,e),where('username','==',a['winnerUsername'])))['then'](h=>!h['empty']?{'id':h['docs'][0x0]['id'],'data':h[a1(0x130)][0x0][a1(0x1e8)]()}:null);let g;a['loserId']?g=getDoc(doc(db,e,a['loserId']))[a1(0x1e2)](h=>h['exists']()?{'id':h['id'],'data':h['data']()}:null):g=getDocs(query(collection(db,e),where('username','==',a[a1(0x16a)])))['then'](h=>!h['empty']?{'id':h[a1(0x130)][0x0]['id'],'data':h[a1(0x130)][0x0][a1(0x1e8)]()}:null),Promise[a1(0x1db)]([f,g])['then'](([h,i])=>{const a2=a1;if(!h){console['error'](a2(0x17f)),alert('Error:\x20Winner\x20data\x20not\x20found.');return;}if(!i){console['error']('No\x20loser\x20found\x20for\x20this\x20match'),alert('Error:\x20Loser\x20data\x20not\x20found.');return;}const j=a['winnerOldElo']!=null?a[a2(0x181)]:h[a2(0x1e8)]['eloRating'],k=a['losersOldElo']!=null?a['losersOldElo']:i['data']['eloRating'],l=h[a2(0x1e8)]['username'],m=i[a2(0x1e8)][a2(0x16e)];console[a2(0x194)]('Winner:\x20'+l+a2(0x149)+j+a2(0x1ac)+m+a2(0x149)+k+')');const n=document[a2(0x1a7)](a2(0x165));if(!n){console['error'](a2(0x13f));return;}document[a2(0x1a7)](a2(0x1ab))[a2(0x17c)]=l,document['getElementById'](a2(0x19c))['textContent']=m,document[a2(0x1a7)]('lightbox-loser-score')[a2(0x17c)]=a['loserScore']||'0',document[a2(0x1a7)]('lightbox-suicides')[a2(0x17c)]=a['loserSuicides']||'0',document[a2(0x1a7)](a2(0x1c9))[a2(0x17c)]=a[a2(0x169)]||'Not\x20specified',document['getElementById'](a2(0x1c8))[a2(0x17c)]=a['loserComment']||'No\x20comment',document['getElementById'](a2(0x188))[a2(0x17c)]=a[a2(0x17b)]||'Standard\x20Match';const o=document[a2(0x1a7)]('winner-score');o&&(o[a2(0x125)]=c,o['readOnly']=!![],o[a2(0x139)]['backgroundColor']=a2(0x1a2));showLightbox();const p=document['querySelector'](a2(0x1a9));if(p){console['log']('Found\x20buttons\x20container:',p);const t=document[a2(0x1a7)]('reject-button');t&&t['remove']();const u=document[a2(0x13e)]('button');u['id']='reject-button',u['className']='button\x20danger-button',u[a2(0x17c)]=a2(0x1e6),u[a2(0x139)][a2(0x14d)]='#d32f2f',u[a2(0x139)][a2(0x155)]=a2(0x168),u[a2(0x139)][a2(0x1bd)]='10px',u[a2(0x139)][a2(0x1df)]=a2(0x1f4),u['style']['border']='none',u[a2(0x139)][a2(0x160)]='4px',u['style']['cursor']='pointer',u[a2(0x139)][a2(0x12f)]='bold',p['prepend'](u),console['log'](a2(0x1ea),u);}const q=document[a2(0x1a7)]('approve-button'),r=document[a2(0x1a7)](a2(0x1d7)),s=document['getElementById'](a2(0x120));if(q){const v=q['cloneNode'](!![]);q[a2(0x1a4)]['replaceChild'](v,q),v[a2(0x1c1)]('click',async function(){const a3=a2;try{const w=document['getElementById'](a3(0x16c))['value'],x=document['getElementById'](a3(0x1ef))['value']||'0',y=document['getElementById']('winner-comment')['value']||'';console[a3(0x194)](a3(0x173),{'uid':auth[a3(0x129)]?.['uid'],'email':auth['currentUser']?.[a3(0x18c)],'isAdmin':auth['currentUser']?.[a3(0x18c)]===a3(0x1c0)||auth[a3(0x129)]?.[a3(0x18c)]==='brian2af@outlook.com'});const z=a[a3(0x183)]||currentGameMode;if(z==='D3')await approveReportD3(a['id'],w,x,y);else z==='D2'?await approveReportD2(a['id'],w,x,y):await approveReport(a['id'],w,x,y);document['getElementById'](a3(0x165))['style'][a3(0x1c3)]='none',alert('Match\x20approved\x20successfully'),updatePendingMatchNotification(),location['reload']();const A=z==='D1'?'players':'playersD2',B=doc(db,A,h['id']),C=doc(db,A,i['id']),[D,E]=await Promise[a3(0x1db)]([getDoc(B),getDoc(C)]);if(D[a3(0x1e5)]()&&E[a3(0x1e5)]()){const F=D[a3(0x1e8)](),G=E['data']();F['position']>G['position']?(await updateDoc(B,{'position':G['position']}),console[a3(0x194)]('Winner\x20'+F['username']+'\x20moved\x20to\x20position\x20'+G['position'])):console['log'](a3(0x135));}}catch(H){console[a3(0x12a)]('Error\x20approving\x20report:',H),alert(a3(0x18b)+H['message']);}});}if(r){const w=r[a2(0x1b5)](!![]);r[a2(0x1a4)]['replaceChild'](w,r),w[a2(0x1c1)]('click',async function(){const a4=a2;try{const x=prompt(a4(0x16b),'');if(x===null)return;await rejectReport(a['id'],x),hideLightbox(),alert('Match\x20report\x20rejected\x20successfully'),updatePendingMatchNotification(),location[a4(0x19a)]();}catch(y){console[a4(0x12a)]('Error\x20rejecting\x20report:',y),alert('Error\x20rejecting\x20match:\x20'+y[a4(0x1a6)]);}});}if(s){const x=s[a2(0x1b5)](!![]);s['parentNode'][a2(0x174)](x,s),x['addEventListener']('click',hideLightbox);}})[a1(0x161)](h=>{const a5=a1;console[a5(0x12a)]('Error\x20processing\x20player\x20data:',h),alert('Error\x20fetching\x20player\x20data.\x20Please\x20try\x20again.');});}}function showLightbox(){const a6=a48L;console[a6(0x194)](a6(0x138));const a=document['getElementById'](a6(0x165));if(!a){console[a6(0x12a)](a6(0x13f));return;}a['classList']['add'](a6(0x163));}function hideLightbox(){const a7=a48L,a=document[a7(0x1a7)](a7(0x165));a[a7(0x166)]['remove'](a7(0x163));}async function rejectReport(a,b){const a8=a48L;try{const c=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?a8(0x134):a8(0x196),d=currentGameMode==='D1'?a8(0x1b1):currentGameMode==='D2'?'RejectedD2':a8(0x18f);console[a8(0x194)](a8(0x1f1)+a+a8(0x126)+c+'\x20to\x20'+d);const e=auth['currentUser'];if(!e)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20reject\x20a\x20match');const f=doc(db,c,a),g=await getDoc(f);if(!g[a8(0x1e5)]())throw new Error(a8(0x1e0));const h=g['data'](),i=h[a8(0x178)]&&h[a8(0x178)]===e[a8(0x143)]||h['winnerEmail']&&h['winnerEmail']===e['email']||h[a8(0x18e)]&&h[a8(0x18e)]===await getUsernameFromId(e[a8(0x143)]);if(!i)throw new Error(a8(0x170));const j={...h,'rejectedAt':serverTimestamp(),'rejectedBy':e['uid'],'rejectionReason':b||a8(0x1b2),'originalDocumentId':a},k=doc(collection(db,d));return await setDoc(k,j),await deleteDoc(f),console[a8(0x194)](a8(0x19d)+a+a8(0x1c2)),updatePendingMatchNotification(),!![];}catch(l){console[a8(0x12a)]('Error\x20rejecting\x20match:',l);throw l;}}async function getUsernameFromId(a){const a9=a48L,b=await getDoc(doc(db,a9(0x1d6),a));if(b['exists']())return b['data']()['username'];const c=await getDoc(doc(db,a9(0x15e),a));if(c['exists']())return c['data']()['username'];return null;}async function loadOpponentsList(a){const aa=a48L;try{const b=document[aa(0x1a7)]('report-error'),c=document[aa(0x1a7)](aa(0x177)),d=document[aa(0x1a7)](aa(0x14b));if(!b||!c||!d){console[aa(0x12a)]('Required\x20elements\x20not\x20found\x20for\x20loadOpponentsList');return;}const e=currentGameMode==='D1'?'players':currentGameMode==='D2'?aa(0x15e):'playersD3';console['log']('Loading\x20opponents\x20from\x20collection:\x20'+e);const f=await getDoc(doc(db,e,a));if(!f['exists']()){b['textContent']='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+aa(0x1be),b[aa(0x139)]['color']=aa(0x195),c[aa(0x17c)]='Not\x20registered\x20in\x20this\x20ladder',d[aa(0x1da)]=!![];return;}const g=f[aa(0x1e8)](),h=g[aa(0x16e)];c['textContent']='You\x20('+h+')',b['textContent']='',d['disabled']=![];const i=collection(db,e),j=await getDocs(i);if(j['empty']){console[aa(0x194)](aa(0x15d));return;}d['innerHTML']='<option\x20value=\x22\x22>Select\x20Opponent</option>',j['forEach'](k=>{const ab=aa,l=k['data']();if(k['id']!==a){const m=document['createElement']('option');m[ab(0x125)]=l['username'],m['textContent']=l['username'],m[ab(0x1ae)]['uid']=k['id'],d['appendChild'](m);}});}catch(k){console['error'](aa(0x1f2),k),document['getElementById']('report-error')[aa(0x17c)]='Error\x20loading\x20opponents.\x20Please\x20try\x20again\x20later.',document['getElementById'](aa(0x12e))['style']['color']=aa(0x195);}}async function checkUserInLadderAndLoadOpponents(a){const ac=a48L;try{const b=document[ac(0x1a7)]('report-error'),c=document[ac(0x1a7)]('loser-username'),d=document['getElementById']('winner-username'),e=document[ac(0x1a7)]('report-form'),f=document[ac(0x1a7)]('auth-warning');b['textContent']=ac(0x1e9)+currentGameMode+ac(0x12d),b['style'][ac(0x155)]=ac(0x168);const g=currentGameMode==='D1'?'players':currentGameMode==='D2'?ac(0x15e):ac(0x1c4);console['log'](ac(0x15f)+g);const h=await getDoc(doc(db,g,a));if(!h['exists']())return b[ac(0x17c)]='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+'\x20ladder.',b[ac(0x139)]['color']='red',c[ac(0x17c)]='Not\x20registered\x20in\x20this\x20ladder',d[ac(0x1da)]=!![],d['innerHTML']='<option\x20value=\x22\x22>Select\x20Opponent</option>',f[ac(0x139)][ac(0x1c3)]=ac(0x1cc),f['textContent']='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+ac(0x1be),![];b[ac(0x17c)]='',f[ac(0x139)][ac(0x1c3)]='none';const i=h['data'](),j=i[ac(0x16e)];c['textContent']='You\x20('+j+')',d[ac(0x1da)]=![],e['style']['display']='block',await loadOpponentsList(a);const k=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':ac(0x196);return await checkForOutstandingReports(i['email'],null,k),!![];}catch(l){return console[ac(0x12a)](ac(0x1d5),l),document['getElementById'](ac(0x12e))['textContent']=ac(0x191),document['getElementById'](ac(0x12e))[ac(0x139)][ac(0x155)]=ac(0x195),![];}}export async function fetchOutstandingMatches(){const ad=a48L,a=auth['currentUser'];if(!a)return[];try{const b=[],c=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?ad(0x134):ad(0x196),d=collection(db,c),e=[query(d,where('loserId','==',a['uid']),where(ad(0x193),'==',![])),query(d,where('loserEmail','==',a[ad(0x18c)]),where('approved','==',![])),query(d,where('winnerId','==',a[ad(0x143)]),where('approved','==',![])),query(d,where(ad(0x150),'==',a[ad(0x18c)]),where(ad(0x193),'==',![]))],f=currentGameMode==='D1'?'players':currentGameMode==='D2'?ad(0x15e):ad(0x1c4),g=await getDocs(query(collection(db,f),where('email','==',a[ad(0x18c)])));let h=null;!g['empty']&&(h=g['docs'][0x0]['data']()['username'],h&&e[ad(0x171)](query(d,where(ad(0x16a),'==',h),where('approved','==',![])),query(d,where('winnerUsername','==',h),where(ad(0x193),'==',![]))));for(const i of e){const j=await getDocs(i);!j['empty']&&j[ad(0x133)](k=>{const ae=ad;!b['some'](l=>l['id']===k['id'])&&b[ae(0x171)]({'id':k['id'],...k['data']()});});}return b['sort']((k,l)=>{const af=ad,m=k['createdAt']?.['toDate']()||new Date(0x0),n=l[af(0x1aa)]?.[af(0x176)]()||new Date(0x0);return n-m;}),outstandingMatches=b,b;}catch(k){return console[ad(0x12a)]('Error\x20fetching\x20outstanding\x20matches:',k),[];}}function a48c(){const aB=['vxnPBMCGCgXHEwvYCYbJB2XSzwn0Aw9UoIa','zM9YrwfJAa','CgvUzgLUz01HDgnOzxnemG','tM8GCg9ZAxrPB24Gy2HHBMDLig5LzwrLzdSGD2LUBMvYigLZigfSCMvHzhKGywjVDMuGDgHLigXVC2vYlG','BgLNAhrIB3GTz2fTzs1TB2rL','CMvWB3j0lwzVCM0','u2HVD2LUzYbSAwDODgjVEa','C3r5Bgu','BM9Uzq','Dw5KzwzPBMvK','jYbUB3qGzM91BMqGAw4GDgHLierptq','C2v0qxr0CMLIDxrL','y3jLyxrLrwXLBwvUDa','tgLNAhrIB3GGzwXLBwvUDcbUB3qGzM91BMq','mtiZmJCWAKDUuffX','tM8GDxnLCIbSB2DNzwqGAw4GEwv0lcb3ywL0Aw5NigzVCIbHDxrOihn0yxrLignOyw5Nzq','Bg9ZzxjtDwLJAwrLCW','DwLK','zNvUy3rPB24','zdiTBw9Kzq','BgvUz3rO','zMv0y2HpDxrZDgfUzgLUz01HDgnOzxm','zgf0ys1Pza','icHfte86ia','pc9ZCgfUpGOGicaGicaGicaGica8l2rPDJ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0IBwf0y2GTywn0Aw9UCYi+cIaGicaGicaGicaGicaGica8yNv0Dg9UignSyxnZpsjIDg4GDMLLDY1KzxrHAwWTyNrUiIbKyxrHlwLKpsi','D2LUBMvYlxvZzxjUyw1L','ignVBgXLy3rPB246','yMfJA2DYB3vUzenVBg9Y','y2fUy2vSlwvKAxqTyNrU','uMvWB3j0igHHCYbIzwvUihn1y2nLC3nMDwXSEsb1CgrHDgvKlG','D2LUBMvYrw1HAwW','cIaGicaGicaGicaGidWVzgL2pGOGicaGicaGidWVzgL2pGOGicaGicaGia','v2LUBMvY','Aw5Zzxj0qMvMB3jL','igzVCIbNyw1Lig1Vzgu6ia','y29SB3i','qxjLihLVDsbZDxjLihLVDsb3yw50ihrVihjLC2nPBMqGDgHPCYbTyxrJAcbYzxbVCNqGywDHAw5ZDca','mtu0nZDtCMTvzwi','C2vSzwn0zwq','DMLLDY1VDxrZDgfUzgLUzY1JB250ywLUzxi','ChjVDg90ExbL','BgLNAhrIB3GTC3vPy2LKzxm','zgf0ys1LzgL0lwLK','tM8GB3bWB25LBNrZigf2ywLSywjSzq','CgXHEwvYC0qY','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gy29SBgvJDgLVBJOG','yM9YzgvYuMfKAxvZ','y2f0y2G','rxjYB3iGC3vIBwL0DgLUzYbYzxbVCNq6','C2HVDW','C3vIBwL0','CMvWB3j0lwXPz2H0yM94','y2XHC3nmAxn0','tM8GBwf0y2HLCYbMB3vUzcbIEsb3Aw5UzxjjzcWGDhj5Aw5NihDPBM5LCKvTywLS','D2HPDgu','BwfWugXHEwvK','Bg9ZzxjvC2vYBMfTzq','ugXLyxnLihbYB3zPzguGysbYzwfZB24GzM9YihjLAMvJDgLUzYb0AgLZig1HDgnOihjLCg9YDdO','D2LUBMvYlxnJB3jL','Aw5Uzxjive1m','DxnLCM5HBwu','iJ5wAwv3ierLDgfPBhm8l2j1DhrVBJ4kicaGicaGicaGicaGicaGia','t25SEsb0AguGD2LUBMvYig9MihrOzsbTyxrJAcbJyw4GCMvQzwn0igL0','ChvZAa','pc9ZCgfUpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iM1HDgnOlwrLDgfPBc1PDgvTiJ5eyxrLoIa','q3vYCMvUDcb1C2vYigLUzM86','CMvWBgfJzunOAwXK','CMvTB3zL','Dg9eyxrL','Bg9ZzxiTDxnLCM5HBwu','D2LUBMvYswq','zMLUza','uMvWB3j0ieDHBwu','C3vIz2fTzvr5Cgu','Dgv4DenVBNrLBNq','twf0y2GGCMvWB3j0zwqGAw4G','rxjYB3iGy2HLy2TPBMCGBM9UlxbHCNrPy2LWyw50ihn0yxr1CZO','tM8GD2LUBMvYigzVDw5KigzVCIb0AgLZig1HDgnO','AxnoB25qyxj0AwnPCgfUDa','D2LUBMvYt2XKrwXV','ihzZia','z2fTzu1Vzgu','CMvWB3j0rxjYB3i','ywrK','C3vPy2LKzxm','igXHzgrLCI4Gq2HLy2TPBMCGB3rOzxiGBgfKzgvYCY4','BgLNAhrIB3GTC3vIz2fTzq','C2L6zq','iJ5szxnJAw5KifjLCg9YDdWVyNv0Dg9UpGOGicaGicaGicaGicaGicaG','rxjYB3iGyxbWCM92Aw5Nig1HDgnOoIa','zw1HAwW','yxv0AfDHCM5PBMC','D2LUBMvYvxnLCM5HBwu','uMvQzwn0zwremW','mtq1ndbXv214uwi','rxjYB3iGy2HLy2TPBMCGBgfKzgvYig1LBwjLCNnOAxaUifbSzwfZzsb0CNKGywDHAw4GBgf0zxiU','ihDPDgGGsuq6ia','yxbWCM92zwq','Bg9N','CMvK','CgvUzgLUz01HDgnOzxnemW','y2XPy2S','uxvLCNKGyNKGD2LUBMvYrw1HAwWGCMvZDwX0CZOG','B3bWB25LBNq','CMvSB2fK','ig1Vzgu','BgLNAhrIB3GTBg9Zzxi','twf0y2GG','yMLUza','Bg9Zzxjty29Yzq','B25bDxrOu3rHDgvdAgfUz2vK','rxjYB3iGzhvYAw5NihnPz24TAw4GAgfUzgXPBMC6','CMDIysGYntuSidi1nsWGmJu1lcaWlJa1kq','vw5RBM93BG','CgfYzw50tM9Kzq','C3vIz2fTzs10ExbL','BwvZC2fNzq','z2v0rwXLBwvUDej5swq','rMfPBgvKihrVihjLC2nPBMqGCMvWB3j0lIbqBgvHC2uGDhj5igfNywLUlG','lMXPz2H0yM94lwj1DhrVBNm','y3jLyxrLzef0','BgLNAhrIB3GTD2LUBMvY','ksWGtg9Zzxi6ia','BwfWlxbSyxLLza','zgf0yxnLDa','Bg9ZzxjdB21Tzw50','zNjVBq','uMvQzwn0zwremq','tM8GCMvHC29UihbYB3zPzgvK','CMvTB3zLqxr0CMLIDxrL','yNv0Dg9Uw3r5Cgu9iNn1yM1PDcjD','y2XVBMvoB2rL','CgXHEwvYC0r1B3m','C2HVD01HDgnOtgLNAhrIB3G','mtKWoduZnLvyAujMta','uMvWB3j0igHHCYbIzwvUihn1y2nLC3nMDwXSEsbYzxnJAw5KzwqU','D2fYBG','CxvLCNLtzwXLy3rVCKfSBa','B3v0C3rHBMrPBMCTBwf0y2HLCY1SAxn0','BwfYz2LUuMLNAhq','igXHzgrLCI4','tM8Gyxv0AgvUDgLJyxrLzcb1C2vYigzVDw5K','ywrTAw5aBgfKzgvYlMnVBq','ywrKrxzLBNrmAxn0zw5LCG','ihjLAMvJDgvKihn1y2nLC3nMDwXSEq','zgLZCgXHEq','CgXHEwvYC0qZ','zw1WDhK','mtiZmLzQEw5VAq','re9nq29UDgvUDeXVywrLza','BgLNAhrIB3GTy29TBwvUDa','BgLNAhrIB3GTBwfW','yNv0Dg9U','zxHJzxb0Aw9U','yMXVy2S','CMvWB3j0rM9YBq','yxbWBhK','iZzHmwi5yq','y29UC29Szq','pha+tM8GB3v0C3rHBMrPBMCGBwf0y2HLCYbMB3vUzcbPBIb0AguGy3vYCMvUDcbNyw1Lig1VzguUpc9WpG','mZG3nNDVqNDXtW','r2fTzsbYzxbVCNrLzcbZDwnJzxnZzNvSBhKU','ig1HDgnOzxmGzM91BMq','rxjYB3iGy2HLy2TPBMCGAwyGDxnLCIbPCYbPBIbSywrKzxi6','CgXHEwvYCW','CMvQzwn0lwj1DhrVBG','vxnLCIbUB3qGyxv0AgvUDgLJyxrLza','ywn0AxzL','zgLZywjSzwq','ywXS','CgvUzgLUz01HDgnOzxm','tM9UlxbHCNrPy2LWyw50CYbJyw5UB3qGCMvWB3j0igDHBwvZlG','rxjYB3iGCMvZy2LUzgLUzYbYzxbVCNq6','CgfKzgLUzW','twf0y2GGCMvWB3j0ig5VDcbMB3vUza','zdmTBw9Kzq','DgHLBG','y29UC3rYDwn0B3i','zdeTBw9Kzq','zxHPC3rZ','uMvQzwn0ie1HDgnO','CMvZzxq','zgf0yq','q2HLy2TPBMCGAwyGEw91igfYzsbYzwDPC3rLCMvKigLUia','uMvQzwn0igj1DhrVBIbHzgrLzdO','mJiYnxjTBwzLsa','ugXLyxnLihnLBgvJDcbHBIbVChbVBMvUDa','C21VB3rO','rxjYB3iGy2HLy2TPBMCG','D2LUBMvYlxn1AwnPzgvZ','y2XVC2uTB3v0C3rHBMrPBMCTyNrU','uMvQzwn0Aw5Nig1HDgnOia','rxjYB3iGBg9HzgLUzYbVChbVBMvUDhmGBgLZDdO','tM8GBwf0y2HLCYbMB3vUzcbIEsbLBwfPBcbLAxrOzxiSihrYEwLUzYb3Aw5UzxjvC2vYBMfTzq','ohb4ide2ChG','DgfYz2v0','Dg9tDhjPBMC','vw5RBM93BIbKyxrL','mJG4nZHKAeftq2W','ntmXtLHhsxfg','rwXLBwvUDcaN','tM8GCgvUzgLUzYbTyxrJAgvZigzVDw5KigzVCIb0AgLZihvZzxi','tg9Zzxi','pc9OmZ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0IBwf0y2GTzgv0ywLSCYi+cIaGicaGicaGicaGicaGica8C3bHBIbJBgfZCZ0IBwf0y2GTzgv0ywLSlwL0zw0IpK1HCdOG','yxbWzw5Kq2HPBgq','y2fUy2vSlwj1DhrVBG','yNrU','ndy2mZiWtgnXruDl','rM91BMqGCgvUzgLUzYbTyxrJAdO','u2vSzwn0zwqGB3bWB25LBNqGBM90igzVDw5K','DMfSDwu','igzYB20G','B3v0C3rHBMrPBMCTBw9KywW','mJeZnJG1DxD0EMHt','y3vYCMvUDfvZzxi','zxjYB3i','uxvLCNKGyNKGD2LUBMvYvxnLCM5HBwuGCMvZDwX0CZOG','mtrRqvL0EMS','igXHzgrLCI4UlG','CMvWB3j0lwvYCM9Y','zM9UDfDLAwDODa','zg9JCW','Bg9ZzxjfBwfPBa'];a48c=function(){return aB;};return a48c();}export function renderOutstandingMatches(){const ag=a48L,a=document[ag(0x1a7)]('outstanding-matches-list');if(outstandingMatches[ag(0x146)]===0x0){a[ag(0x16d)]=ag(0x1d1);return;}let b='';const c=auth[ag(0x129)];if(!c)return;outstandingMatches['forEach'](d=>{const ah=ag,e=d[ah(0x1aa)]?.['toDate']()?d[ah(0x1aa)]['toDate']()['toLocaleDateString']():ah(0x1f7),f=d[ah(0x131)]===c[ah(0x18c)]||d['loserId']===c[ah(0x143)];b+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-item\x22\x20data-id=\x22'+d['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>'+(d['winnerUsername']||ah(0x152))+ah(0x182)+(d[ah(0x16a)]||ah(0x11d))+ah(0x11e)+(d[ah(0x169)]||ah(0x1a3))+ah(0x172)+e+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Score:\x20?\x20-\x20'+(d['loserScore']||'0')+ah(0x14a)+d['id']+ah(0x16f)+(f?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20edit-report-btn\x22\x20data-id=\x22'+d['id']+'\x22>Edit\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20danger-button\x20rescind-report-btn\x22\x20data-id=\x22'+d['id']+ah(0x18a):'')+ah(0x151);}),a['innerHTML']=b,document[ag(0x1bb)]('.view-detail-btn')[ag(0x133)](d=>{const ai=ag;d['addEventListener'](ai(0x197),function(){const aj=ai,e=this['getAttribute']('data-id'),f=outstandingMatches['find'](g=>g['id']===e);document[aj(0x1a7)](aj(0x127))[aj(0x166)][aj(0x175)](aj(0x163)),showMatchLightbox(f);});}),document['querySelectorAll']('.edit-report-btn')[ag(0x133)](d=>{const ak=ag;d['addEventListener'](ak(0x197),function(){const al=ak,e=this['getAttribute']('data-id'),f=outstandingMatches['find'](g=>g['id']===e);document[al(0x1a7)]('outstanding-modal')['classList'][al(0x175)](al(0x163)),editReport(f);});}),document['querySelectorAll']('.rescind-report-btn')[ag(0x133)](d=>{const am=ag;d['addEventListener'](am(0x197),function(){const an=am,e=this['getAttribute'](an(0x148)),f=outstandingMatches[an(0x179)](g=>g['id']===e);confirm(an(0x156)+(f[an(0x18e)]||an(0x199))+'?')&&rescindReport(f);});});}export async function rescindReport(a){const ao=a48L;try{const b=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':ao(0x196),c=doc(db,b,a['id']);await deleteDoc(c),alert(ao(0x1b9)),await fetchOutstandingMatches(),renderOutstandingMatches();}catch(d){console['error'](ao(0x1de),d),alert(ao(0x1a8));}}export function editReport(a){const ap=a48L,b=document['getElementById'](ap(0x137)),c=document[ap(0x1a7)]('loser-score'),d=document['getElementById']('suicides'),e=document['getElementById'](ap(0x1ad)),f=document[ap(0x1a7)]('loser-comment');b['style']['display']=ap(0x1cc),document[ap(0x1a7)]('auth-warning')[ap(0x139)]['display']=ap(0x13a);if(a['loserScore'])c[ap(0x125)]=a['loserScore'];if(a[ap(0x142)])d['value']=a[ap(0x142)];if(a[ap(0x169)])e[ap(0x125)]=a[ap(0x169)];if(a['loserComment'])f[ap(0x125)]=a['loserComment'];const g=document[ap(0x1a7)](ap(0x14b));g&&a['winnerUsername']&&Array[ap(0x1b0)](g['options'])[ap(0x133)](j=>{const aq=ap;j['text']===a['winnerUsername']&&(j[aq(0x158)]=!![]);});const h=document[ap(0x1a7)]('subgame-type');h&&a[ap(0x17b)]&&(h[ap(0x125)]=a['subgameType']);b[ap(0x13d)]('data-edit-id',a['id']);const i=b['querySelector']('button[type=\x22submit\x22]');i[ap(0x17c)]='Update\x20Report';if(!document['getElementById'](ap(0x14e))){const j=document[ap(0x13e)](ap(0x1ca));j['id']=ap(0x14e),j['className']=ap(0x121),j['style'][ap(0x14d)]=ap(0x1cf),j[ap(0x139)]['marginRight']='10px',j['textContent']='Cancel\x20Edit',j['type']='button',i['parentNode'][ap(0x153)](j,i),j['addEventListener']('click',function(k){const ar=ap;k['preventDefault'](),b[ar(0x1e7)](),b['removeAttribute']('data-edit-id'),i[ar(0x17c)]=ar(0x17a),this['remove'](),initReportForm();});}b['scrollIntoView']({'behavior':ap(0x1ed)});}function initReportForm(){console['log']('Report\x20form\x20reset');}export function showMatchLightbox(a){const as=a48L,b=document['getElementById']('report-lightbox');document['getElementById'](as(0x136))[as(0x17c)]=currentGameMode,document[as(0x1a7)]('lightbox-winner')['textContent']=a['winnerUsername']||as(0x1a3),document[as(0x1a7)](as(0x19c))[as(0x17c)]=a['loserUsername']||as(0x1a3),document['getElementById']('lightbox-loser-score')['textContent']=a['loserScore']||'0',document[as(0x1a7)](as(0x15b))['textContent']=a['loserSuicides']||'0',document['getElementById']('lightbox-map')['textContent']=a[as(0x169)]||as(0x1a3),document['getElementById']('lightbox-comment')['textContent']=a['loserComment']||'No\x20comment',document[as(0x1a7)](as(0x188))[as(0x17c)]=a['subgameType']||'Standard\x20Match',b['classList'][as(0x185)](as(0x163));}export function setCurrentGameMode(a){currentGameMode=a;}export function initOutstandingMatches(){document['addEventListener']('DOMContentLoaded',()=>{const at=a48d,a=document[at(0x1a7)]('view-outstanding-btn'),b=document['getElementById'](at(0x159)),c=document[at(0x1a7)]('outstanding-modal'),d=document[at(0x1a7)](at(0x1f0)),e=document['getElementById'](at(0x120)),f=document[at(0x1a7)]('d1-mode'),g=document['getElementById'](at(0x145)),h=document['getElementById'](at(0x1e1));if(f)f[at(0x1c1)](at(0x197),()=>{setCurrentGameMode('D1');});if(g)g['addEventListener'](at(0x197),()=>{setCurrentGameMode('D2');});if(h)h['addEventListener']('click',()=>{setCurrentGameMode('D3');});auth[at(0x1a0)](k=>{const au=at;k?b['style']['display']=au(0x1cc):b[au(0x139)]['display']='none';});a&&a[at(0x1c1)](at(0x197),async()=>{const av=at;c['classList']['add']('show'),document[av(0x1a7)](av(0x1bc))['innerHTML']='<div\x20class=\x22loading\x22>Loading\x20your\x20matches...</div>',await fetchOutstandingMatches(),renderOutstandingMatches();});d&&d[at(0x1c1)]('click',()=>{const aw=at;c[aw(0x166)][aw(0x175)](aw(0x163));});e&&e[at(0x1c1)]('click',()=>{const ax=at;document[ax(0x1a7)]('report-lightbox')[ax(0x166)]['remove']('show');});c&&c['addEventListener'](at(0x197),k=>{const ay=at;k[ay(0x1f5)]===c&&c['classList']['remove'](ay(0x163));});const i=document[at(0x1a7)](at(0x165));i&&i['addEventListener']('click',k=>{const az=at;k[az(0x1f5)]===i&&i[az(0x166)]['remove']('show');});const j=document['getElementById'](at(0x137));if(j){const k=j['onsubmit'];j['onsubmit']=async function(l){const aA=at;l['preventDefault']();const m=this['getAttribute'](aA(0x15c));if(m)try{const n=document[aA(0x1a7)]('loser-score')[aA(0x125)],o=document[aA(0x1a7)](aA(0x186))[aA(0x125)],p=document['getElementById']('map-played')[aA(0x125)],q=document['getElementById']('loser-comment')['value'],r=currentGameMode==='D1'?aA(0x1dc):currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',s=doc(db,r,m);await updateDoc(s,{'loserScore':Number(n),'loserSuicides':Number(o),'mapPlayed':p,'loserComment':q,'subgameType':document['getElementById']('subgame-type')[aA(0x125)],'updatedAt':new Date()}),alert(aA(0x14f)),this[aA(0x1e7)](),this[aA(0x1b3)]('data-edit-id');const t=this['querySelector'](aA(0x1b4));t['textContent']=aA(0x17a);const u=document['getElementById']('cancel-edit-btn');if(u)u[aA(0x175)]();}catch(v){console[aA(0x12a)]('Error\x20updating\x20report:',v),document['getElementById']('report-error')[aA(0x17c)]='Failed\x20to\x20update\x20report.\x20Please\x20try\x20again.';}else typeof k===aA(0x144)&&k['call'](this,l);};}});}typeof window!==a48L(0x13b)&&(window[a48L(0x1b7)]=showMatchLightbox,window['editReport']=editReport,window['rescindReport']=rescindReport,window[a48L(0x147)]=fetchOutstandingMatches,window['renderOutstandingMatches']=renderOutstandingMatches);initOutstandingMatches();