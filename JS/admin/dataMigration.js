const a0_0x1eabe1=(function(){let _0x11bc37=!![];return function(_0x247b07,_0x474aa1){const _0x24df45=_0x11bc37?function(){const _0x312147=a0_0x42f2;if(_0x474aa1){const _0x4f9b68=_0x474aa1[_0x312147(0x10a)](_0x247b07,arguments);return _0x474aa1=null,_0x4f9b68;}}:function(){};return _0x11bc37=![],_0x24df45;};}()),a0_0x298dcd=a0_0x1eabe1(this,function(){const _0x50795b=a0_0x42f2;let _0x2a8b72;try{const _0x2ad1f8=Function(_0x50795b(0x107)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2a8b72=_0x2ad1f8();}catch(_0x2a5a32){_0x2a8b72=window;}const _0x46646d=_0x2a8b72[_0x50795b(0xfa)]=_0x2a8b72['console']||{},_0x5843d8=[_0x50795b(0xfc),'warn',_0x50795b(0x104),'error','exception',_0x50795b(0x108),_0x50795b(0xfb)];for(let _0x906944=0x0;_0x906944<_0x5843d8['length'];_0x906944++){const _0x2b15ae=a0_0x1eabe1['constructor']['prototype']['bind'](a0_0x1eabe1),_0x49a00b=_0x5843d8[_0x906944],_0xfee986=_0x46646d[_0x49a00b]||_0x2b15ae;_0x2b15ae[_0x50795b(0x103)]=a0_0x1eabe1[_0x50795b(0x101)](a0_0x1eabe1),_0x2b15ae[_0x50795b(0x102)]=_0xfee986[_0x50795b(0x102)][_0x50795b(0x101)](_0xfee986),_0x46646d[_0x49a00b]=_0x2b15ae;}});a0_0x298dcd();import{db}from'../firebase-config.js';function a0_0xae2b(){const _0x5ab4d2=['console','trace','log','commit','set','name','email','bind','toString','__proto__','info','has','playersD3','return\x20(function()\x20','table','createdAt','apply','push','elo','divisions'];a0_0xae2b=function(){return _0x5ab4d2;};return a0_0xae2b();}import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';function a0_0x42f2(_0x391763,_0x219d14){const _0x298dcd=a0_0xae2b();return a0_0x42f2=function(_0x1eabe1,_0x13592e){_0x1eabe1=_0x1eabe1-0xfa;let _0xae2bc=_0x298dcd[_0x1eabe1];return _0xae2bc;},a0_0x42f2(_0x391763,_0x219d14);}export async function migrateUserData(){const _0x270d77=a0_0x42f2,_0xd36016=['players','playersD2',_0x270d77(0x106),'nonParticipants','userProfiles'],_0x2f3521=[];let _0x443a9=writeBatch(db),_0x3cd682=0x0;const _0x45fb2e=collection(db,'userProfiles'),_0x563ed2=new Map(),_0x8cb3f8=(_0x156d11,_0xc1642c)=>{_0x3cd682>=0x1f4&&(_0x2f3521['push'](_0x443a9),_0x443a9=writeBatch(db),_0x3cd682=0x0);const _0x4a8540=doc(_0x45fb2e,_0x156d11);_0x443a9['set'](_0x4a8540,_0xc1642c),_0x3cd682++;};for(const _0x1ce950 of _0xd36016){const _0x3fb368=collection(db,_0x1ce950),_0x1c012a=await getDocs(_0x3fb368);_0x1c012a['docs']['forEach'](_0x8e87f2=>{const _0x262609=_0x270d77,_0xf5de1b=_0x8e87f2['id'],_0x1847f3=_0x8e87f2['data']();!_0x563ed2[_0x262609(0x105)](_0xf5de1b)&&_0x563ed2[_0x262609(0xfe)](_0xf5de1b,{'username':_0x1847f3['username']||_0x1847f3[_0x262609(0xff)]||_0xf5de1b,'email':_0x1847f3[_0x262609(0x100)]||null,'discord':_0x1847f3['discord']||null,'createdAt':_0x1847f3[_0x262609(0x109)]||new Date()['toISOString'](),'divisions':[]});const _0x1fb560=_0x563ed2['get'](_0xf5de1b);if(_0x1ce950==='players')_0x1fb560['divisions'][_0x262609(0x10b)]({'id':0x1,'elo':_0x1847f3[_0x262609(0x10c)]||0x5dc,'isActive':_0x1847f3['active']!==![]});else{if(_0x1ce950==='playersD2')_0x1fb560[_0x262609(0x10d)][_0x262609(0x10b)]({'id':0x2,'elo':_0x1847f3['elo']||0x5dc,'isActive':_0x1847f3['active']!==![]});else _0x1ce950==='playersD3'&&_0x1fb560[_0x262609(0x10d)][_0x262609(0x10b)]({'id':0x3,'elo':_0x1847f3['elo']||0x5dc,'isActive':_0x1847f3['active']!==![]});}});}for(const [_0x50d8e1,_0x15f8cd]of _0x563ed2['entries']()){_0x8cb3f8(_0x50d8e1,_0x15f8cd);}_0x3cd682>0x0&&_0x2f3521[_0x270d77(0x10b)](_0x443a9);const _0x354807=[];for(const _0x52b550 of _0x2f3521){try{await _0x52b550['commit'](),_0x354807[_0x270d77(0x10b)]({'success':!![]});}catch(_0xf01f0d){_0x354807['push']({'success':![],'error':_0xf01f0d});}}return{'usersProcessed':_0x563ed2['size'],'batchesExecuted':_0x354807['length'],'success':_0x354807['every'](_0x5caec=>_0x5caec['success'])};}export async function updateMatchReferences(){const _0x2a9021=a0_0x42f2,_0x29d3d1=['matches','matchesD2','matchesD3'];let _0x4ac9bf=0x0;for(const _0x5393b of _0x29d3d1){const _0x3e8daa=collection(db,_0x5393b),_0x2a223d=await getDocs(_0x3e8daa),_0x3d0b36=0x1f4;let _0xf61c15=writeBatch(db),_0x12c252=0x0;for(const _0x54c2e9 of _0x2a223d['docs']){const _0x238b2d=_0x54c2e9['data'](),_0x532098=doc(db,_0x5393b,_0x54c2e9['id']);_0xf61c15['update'](_0x532098,{'isMigrated':!![],'lastModified':new Date()['toISOString']()}),_0x12c252++,_0x4ac9bf++,_0x12c252>=_0x3d0b36&&(await _0xf61c15[_0x2a9021(0xfd)](),_0xf61c15=writeBatch(db),_0x12c252=0x0);}_0x12c252>0x0&&await _0xf61c15[_0x2a9021(0xfd)]();}return{'updatedCount':_0x4ac9bf};}