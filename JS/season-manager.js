const a52_0x22eea7=a52_0x2d02;(function(_0x107390,_0xbb4cb5){const _0x346fa1=a52_0x2d02,_0x219323=_0x107390();while(!![]){try{const _0x2f51f6=parseInt(_0x346fa1(0xc6))/0x1*(parseInt(_0x346fa1(0xd6))/0x2)+-parseInt(_0x346fa1(0xbc))/0x3*(parseInt(_0x346fa1(0xeb))/0x4)+-parseInt(_0x346fa1(0xca))/0x5*(parseInt(_0x346fa1(0xd3))/0x6)+parseInt(_0x346fa1(0xdb))/0x7+parseInt(_0x346fa1(0xea))/0x8*(-parseInt(_0x346fa1(0xc5))/0x9)+parseInt(_0x346fa1(0xc1))/0xa*(-parseInt(_0x346fa1(0xe6))/0xb)+-parseInt(_0x346fa1(0xcd))/0xc*(-parseInt(_0x346fa1(0xee))/0xd);if(_0x2f51f6===_0xbb4cb5)break;else _0x219323['push'](_0x219323['shift']());}catch(_0x2fde1d){_0x219323['push'](_0x219323['shift']());}}}(a52_0xc9c4,0xa12c5));const a52_0x48d77f=(function(){let _0x5411d3=!![];return function(_0x59c70b,_0x46590d){const _0x3b4619=_0x5411d3?function(){const _0x3c7c8d=a52_0x2d02;if(_0x46590d){const _0x1b257f=_0x46590d[_0x3c7c8d(0xe1)](_0x59c70b,arguments);return _0x46590d=null,_0x1b257f;}}:function(){};return _0x5411d3=![],_0x3b4619;};}()),a52_0x1dfba9=a52_0x48d77f(this,function(){const _0x40cba0=a52_0x2d02;return a52_0x1dfba9[_0x40cba0(0xbd)]()[_0x40cba0(0xec)](_0x40cba0(0xc4))[_0x40cba0(0xbd)]()[_0x40cba0(0xd7)](a52_0x1dfba9)[_0x40cba0(0xec)]('(((.+)+)+)+$');});a52_0x1dfba9();const a52_0x5e58e0=(function(){let _0x3661f7=!![];return function(_0x1661d5,_0x6ad526){const _0x432e9a=_0x3661f7?function(){const _0xea601=a52_0x2d02;if(_0x6ad526){const _0x3f0f2e=_0x6ad526[_0xea601(0xe1)](_0x1661d5,arguments);return _0x6ad526=null,_0x3f0f2e;}}:function(){};return _0x3661f7=![],_0x432e9a;};}()),a52_0x33bd73=a52_0x5e58e0(this,function(){const _0x46e6d7=a52_0x2d02,_0x2d5534=function(){const _0x335bf9=a52_0x2d02;let _0x4a9f01;try{_0x4a9f01=Function(_0x335bf9(0xe2)+_0x335bf9(0xe7)+');')();}catch(_0xaff49){_0x4a9f01=window;}return _0x4a9f01;},_0x1cbcd9=_0x2d5534(),_0x132d5c=_0x1cbcd9[_0x46e6d7(0xb7)]=_0x1cbcd9['console']||{},_0x477e4a=[_0x46e6d7(0xd4),_0x46e6d7(0xed),_0x46e6d7(0xb9),_0x46e6d7(0xcb),_0x46e6d7(0xef),_0x46e6d7(0xdf),_0x46e6d7(0xc3)];for(let _0x457394=0x0;_0x457394<_0x477e4a['length'];_0x457394++){const _0x26c69f=a52_0x5e58e0['constructor'][_0x46e6d7(0xc7)][_0x46e6d7(0xe4)](a52_0x5e58e0),_0x29ee5c=_0x477e4a[_0x457394],_0x1e1761=_0x132d5c[_0x29ee5c]||_0x26c69f;_0x26c69f['__proto__']=a52_0x5e58e0[_0x46e6d7(0xe4)](a52_0x5e58e0),_0x26c69f[_0x46e6d7(0xbd)]=_0x1e1761[_0x46e6d7(0xbd)][_0x46e6d7(0xe4)](_0x1e1761),_0x132d5c[_0x29ee5c]=_0x26c69f;}});a52_0x33bd73();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a52_0xc9c4(){const _0x51d9a9=['display','eloRating','156888sfvIZF','4MlTSSB','search','warn','4303kerRiS','exception','seasonCount','docs','metadata','console','data','info','reload','addEventListener','39108fdxqnt','toString','value','getElementById','reset-password','14930QNuDsb','confirm-reset','trace','(((.+)+)+)+$','207jIpEPf','216743ZBSywS','prototype','reset-confirmation','count','5psDoLw','error','Error\x20resetting\x20season:','15012PRgIkO','setupEventListeners','style','Please\x20enter\x20your\x20password','players','none','1784814fhDvRC','log','seasons','10ulheuv','constructor','click','reset-season','resetSeason','512589bQJLMC','username','block','currentUser','table','Invalid\x20password\x20or\x20authentication\x20failed','apply','return\x20(function()\x20','position','bind','Authentication\x20error:','1100gAJtKZ','{}.constructor(\x22return\x20this\x22)(\x20)'];a52_0xc9c4=function(){return _0x51d9a9;};return a52_0xc9c4();}class SeasonManager{constructor(){const _0x45070d=a52_0x2d02;this[_0x45070d(0xce)]();}[a52_0x22eea7(0xce)](){const _0x419848=a52_0x22eea7,_0x1ded0f=document['getElementById'](_0x419848(0xd9)),_0x369c05=document['getElementById'](_0x419848(0xc2)),_0xb577ba=document[_0x419848(0xbf)]('cancel-reset');_0x1ded0f?.[_0x419848(0xbb)]('click',()=>{const _0x56aef6=_0x419848;document[_0x56aef6(0xbf)](_0x56aef6(0xc8))[_0x56aef6(0xcf)][_0x56aef6(0xe8)]=_0x56aef6(0xdd);}),_0x369c05?.['addEventListener'](_0x419848(0xd8),async()=>{const _0x1f1d0a=_0x419848,_0x2abf9b=document[_0x1f1d0a(0xbf)](_0x1f1d0a(0xc0)),_0x532d3c=auth[_0x1f1d0a(0xde)];if(!_0x532d3c||!_0x2abf9b[_0x1f1d0a(0xbe)]){alert(_0x1f1d0a(0xd0));return;}try{const _0x3ebf66=EmailAuthProvider['credential'](_0x532d3c['email'],_0x2abf9b['value']);await reauthenticateWithCredential(_0x532d3c,_0x3ebf66),await this['resetSeason'](),_0x2abf9b[_0x1f1d0a(0xbe)]='',document[_0x1f1d0a(0xbf)](_0x1f1d0a(0xc8))['style'][_0x1f1d0a(0xe8)]='none';}catch(_0x53a0a0){alert(_0x1f1d0a(0xe0)),console[_0x1f1d0a(0xcb)](_0x1f1d0a(0xe5),_0x53a0a0);}}),_0xb577ba?.[_0x419848(0xbb)](_0x419848(0xd8),()=>{const _0x13aff8=_0x419848,_0x151650=document[_0x13aff8(0xbf)](_0x13aff8(0xc0));_0x151650[_0x13aff8(0xbe)]='',document[_0x13aff8(0xbf)](_0x13aff8(0xc8))[_0x13aff8(0xcf)][_0x13aff8(0xe8)]=_0x13aff8(0xd2);});}async[a52_0x22eea7(0xda)](){const _0x115794=a52_0x22eea7;try{const _0xde0044=await getDoc(doc(db,'metadata',_0x115794(0xf0)));let _0x3e846c=0x1;_0xde0044['exists']()&&(_0x3e846c=_0xde0044[_0x115794(0xb8)]()[_0x115794(0xc9)]+0x1);const _0x1fe01f=await getDocs(collection(db,_0x115794(0xd1))),_0x8696da={'players':[],'date':new Date(),'seasonNumber':_0x3e846c};for(const _0xc1d58 of _0x1fe01f[_0x115794(0xb5)]){const _0xf6ac0a=_0xc1d58[_0x115794(0xb8)]();_0x8696da['players']['push']({'username':_0xf6ac0a[_0x115794(0xdc)],'position':_0xf6ac0a[_0x115794(0xe3)],'eloRating':_0xf6ac0a[_0x115794(0xe9)]||0x4b0}),await setDoc(doc(db,_0x115794(0xd1),_0xc1d58['id']),{..._0xf6ac0a,'eloRating':0x4b0,'position':_0xf6ac0a['position']});}await setDoc(doc(db,_0x115794(0xd5),'season'+_0x3e846c),_0x8696da),await setDoc(doc(db,_0x115794(0xb6),_0x115794(0xf0)),{'count':_0x3e846c}),alert('Season\x20'+_0x3e846c+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location[_0x115794(0xba)]();}catch(_0x226c0e){console[_0x115794(0xcb)](_0x115794(0xcc),_0x226c0e),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}function a52_0x2d02(_0xdc5472,_0x12905a){const _0x3b44a3=a52_0xc9c4();return a52_0x2d02=function(_0x33bd73,_0x5e58e0){_0x33bd73=_0x33bd73-0xb5;let _0x3366e0=_0x3b44a3[_0x33bd73];return _0x3366e0;},a52_0x2d02(_0xdc5472,_0x12905a);}export const seasonManager=new SeasonManager();