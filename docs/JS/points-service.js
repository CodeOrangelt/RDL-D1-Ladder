const a0_0x278e4d=a0_0x5df7;(function(_0x5303ce,_0x5cfa0c){const _0x57bbaf=a0_0x5df7,_0x1af773=_0x5303ce();while(!![]){try{const _0x41df35=-parseInt(_0x57bbaf(0x114))/0x1+-parseInt(_0x57bbaf(0x11f))/0x2*(-parseInt(_0x57bbaf(0x10c))/0x3)+-parseInt(_0x57bbaf(0x11a))/0x4*(parseInt(_0x57bbaf(0x10e))/0x5)+parseInt(_0x57bbaf(0x11b))/0x6*(parseInt(_0x57bbaf(0x123))/0x7)+parseInt(_0x57bbaf(0x111))/0x8*(-parseInt(_0x57bbaf(0x119))/0x9)+-parseInt(_0x57bbaf(0x11e))/0xa*(parseInt(_0x57bbaf(0x10d))/0xb)+parseInt(_0x57bbaf(0x10b))/0xc;if(_0x41df35===_0x5cfa0c)break;else _0x1af773['push'](_0x1af773['shift']());}catch(_0x11dabe){_0x1af773['push'](_0x1af773['shift']());}}}(a0_0x140c,0x65af5));const a0_0x35fcd6=(function(){let _0xf33e82=!![];return function(_0x2bb40e,_0xd92606){const _0x578cf3=_0xf33e82?function(){if(_0xd92606){const _0x2d677c=_0xd92606['apply'](_0x2bb40e,arguments);return _0xd92606=null,_0x2d677c;}}:function(){};return _0xf33e82=![],_0x578cf3;};}()),a0_0x484a15=a0_0x35fcd6(this,function(){const _0x1a0f96=a0_0x5df7;let _0x4dc209;try{const _0x3201af=Function(_0x1a0f96(0x118)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4dc209=_0x3201af();}catch(_0x459401){_0x4dc209=window;}const _0x31f613=_0x4dc209['console']=_0x4dc209['console']||{},_0x482a0a=[_0x1a0f96(0x115),'warn','info','error','exception','table','trace'];for(let _0x1cf3d5=0x0;_0x1cf3d5<_0x482a0a['length'];_0x1cf3d5++){const _0x387f4e=a0_0x35fcd6['constructor']['prototype']['bind'](a0_0x35fcd6),_0x2e3862=_0x482a0a[_0x1cf3d5],_0x5505ab=_0x31f613[_0x2e3862]||_0x387f4e;_0x387f4e['__proto__']=a0_0x35fcd6['bind'](a0_0x35fcd6),_0x387f4e['toString']=_0x5505ab['toString'][_0x1a0f96(0x116)](_0x5505ab),_0x31f613[_0x2e3862]=_0x387f4e;}});a0_0x484a15();function a0_0x5df7(_0xc3e7f6,_0x2dd257){const _0x5496be=a0_0x140c();return a0_0x5df7=function(_0x484a15,_0x35fcd6){_0x484a15=_0x484a15-0x10b;let _0x28486c=_0x5496be[_0x484a15];return _0x28486c;},a0_0x5df7(_0xc3e7f6,_0x2dd257);}import{db}from'./firebase-config.js';import{doc,getDoc,updateDoc,addDoc,collection,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0x140c(){const _0x5e69f6=['156801MEcHYq','1199NECWsf','5yrMgMd','Standard','Awarded\x20','168AszSdQ',',\x20skipping\x20points\x20award','add','117383stEfub','log','bind','\x20match\x20(Winner)','return\x20(function()\x20','151182jhAIbR','1947252LPTFJs','6bIzNbA','Unknown\x20User','Added\x20','6790xlCqEP','6gHNgSt','Match\x20points:\x20','error','./adminbackend.js','3484922icOUrN','9513828rRUNbm'];a0_0x140c=function(){return _0x5e69f6;};return a0_0x140c();}const POINTS_CHART={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'â‰¥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let adminModifyUserPoints=null;try{const adminModule=await import(a0_0x278e4d(0x122));adminModule['modifyUserPoints']&&(adminModifyUserPoints=adminModule['modifyUserPoints'],console['log']('Admin\x20points\x20service\x20connected'));}catch(a0_0x50009f){console[a0_0x278e4d(0x115)]('Admin\x20backend\x20not\x20available,\x20using\x20fallback\x20points\x20service');}export async function awardMatchPoints(_0x294f5f,_0x90a49b,_0x31d09a){const _0x27a169=a0_0x278e4d;try{const _0x21431f=POINTS_CHART[_0x31d09a]||0xa;return adminModifyUserPoints?await Promise['all']([adminModifyUserPoints(_0x294f5f,'add',_0x21431f,_0x27a169(0x120)+(_0x31d09a||_0x27a169(0x10f))+'\x20match\x20(Winner)'),adminModifyUserPoints(_0x90a49b,_0x27a169(0x113),_0x21431f,'Match\x20points:\x20'+(_0x31d09a||'Standard')+'\x20match\x20(Participant)')]):await Promise['all']([addPointsFallback(_0x294f5f,_0x21431f,'Match\x20points:\x20'+(_0x31d09a||'Standard')+_0x27a169(0x117)),addPointsFallback(_0x90a49b,_0x21431f,'Match\x20points:\x20'+(_0x31d09a||'Standard')+'\x20match\x20(Participant)')]),console[_0x27a169(0x115)](_0x27a169(0x110)+_0x21431f+'\x20points\x20to\x20both\x20players\x20for\x20'+(_0x31d09a||'Standard')+'\x20match'),!![];}catch(_0x44556b){return console[_0x27a169(0x121)]('Error\x20awarding\x20match\x20points:',_0x44556b),![];}}async function addPointsFallback(_0x14628d,_0x1d1281,_0x16d0f8=''){const _0x261e03=a0_0x278e4d;try{const _0x416dbc=doc(db,'userProfiles',_0x14628d),_0x38566b=await getDoc(_0x416dbc);if(!_0x38566b['exists']()){console['log']('User\x20profile\x20not\x20found\x20for\x20'+_0x14628d+_0x261e03(0x112));return;}const _0x2e4255=_0x38566b['data'](),_0x19b73e=_0x2e4255['points']||0x0,_0x565279=_0x19b73e+_0x1d1281;await updateDoc(_0x416dbc,{'points':_0x565279,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x14628d,'userEmail':_0x2e4255['email']||'unknown','displayName':_0x2e4255['displayName']||_0x2e4255['username']||_0x261e03(0x11c),'action':'add','amount':_0x1d1281,'previousPoints':_0x19b73e,'newPoints':_0x565279,'reason':_0x16d0f8,'adminEmail':'system-match-award','timestamp':serverTimestamp()}),console['log'](_0x261e03(0x11d)+_0x1d1281+'\x20points\x20to\x20user\x20'+_0x14628d+'.\x20New\x20total:\x20'+_0x565279);}catch(_0x280962){console['error']('Error\x20adding\x20points\x20to\x20user:',_0x280962);throw _0x280962;}}