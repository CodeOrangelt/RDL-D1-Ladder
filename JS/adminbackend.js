const a4_0x4df989=a4_0x3018,a4_0x442793=(function(){let _0x331545=!![];return function(_0x5ab866,_0x32bb17){const _0x1c0952=_0x331545?function(){const _0x1ebe69=a4_0x3018;if(_0x32bb17){const _0x3e81ae=_0x32bb17[_0x1ebe69(0x363)](_0x5ab866,arguments);return _0x32bb17=null,_0x3e81ae;}}:function(){};return _0x331545=![],_0x1c0952;};}()),a4_0x5c70d2=a4_0x442793(this,function(){const _0x43bc2d=a4_0x3018,_0x5d183c=function(){const _0x587c32=a4_0x3018;let _0x2efff8;try{_0x2efff8=Function(_0x587c32(0x2ef)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xb2a5e9){_0x2efff8=window;}return _0x2efff8;},_0x5686f8=_0x5d183c(),_0x24633a=_0x5686f8[_0x43bc2d(0x265)]=_0x5686f8['console']||{},_0x1ea63b=['log','warn','info',_0x43bc2d(0x2e5),'exception','table','trace'];for(let _0x1ff6d6=0x0;_0x1ff6d6<_0x1ea63b['length'];_0x1ff6d6++){const _0x1b999a=a4_0x442793[_0x43bc2d(0x392)][_0x43bc2d(0x32d)]['bind'](a4_0x442793),_0x2a1cb4=_0x1ea63b[_0x1ff6d6],_0x50c201=_0x24633a[_0x2a1cb4]||_0x1b999a;_0x1b999a['__proto__']=a4_0x442793['bind'](a4_0x442793),_0x1b999a[_0x43bc2d(0x288)]=_0x50c201['toString']['bind'](_0x50c201),_0x24633a[_0x2a1cb4]=_0x1b999a;}});a4_0x5c70d2();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x4035d1){const _0x2c6a9b=a4_0x3018;if(!_0x4035d1)return'#ffffff';_0x4035d1=_0x4035d1['replace']('#','');_0x4035d1['length']===0x3&&(_0x4035d1=_0x4035d1[_0x2c6a9b(0x205)]('')['map'](_0x471278=>_0x471278+_0x471278)[_0x2c6a9b(0x226)](''));if(_0x4035d1['length']!==0x6)return'#ffffff';const _0x2a3da8=parseInt(_0x4035d1['substring'](0x0,0x2),0x10),_0xd376d3=parseInt(_0x4035d1[_0x2c6a9b(0x390)](0x2,0x4),0x10),_0xf65a23=parseInt(_0x4035d1['substring'](0x4,0x6),0x10),_0xf71983=(_0x2a3da8*0x12b+_0xd376d3*0x24b+_0xf65a23*0x72)/0x3e8;return _0xf71983>=0x80?_0x2c6a9b(0x347):_0x2c6a9b(0x2a9);}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a4_0x4df989(0x2fd)]('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x4f057b=>{const _0x252c7c=a4_0x3018;if(!_0x4f057b){window[_0x252c7c(0x1fa)]['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0xfc20eb){console[_0x252c7c(0x2e5)](_0x252c7c(0x201),_0xfc20eb),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x135226){const _0x36a352=a4_0x4df989;if(!_0x135226)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x135226+'\x20in\x20all\x20collections...');const _0x2c0122=[{'name':'userProfiles','displayName':_0x36a352(0x287)},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':_0x36a352(0x368),'displayName':_0x36a352(0x2d6)},{'name':_0x36a352(0x3e6),'displayName':'Non-Participants'}],_0x1b2836=auth['currentUser'];let _0x4237d2=null,_0x2bc5a0=null;for(const _0xeed7b2 of _0x2c0122){try{if(_0x1b2836){const _0x4e58d3=doc(db,_0xeed7b2[_0x36a352(0x1b2)],_0x1b2836['uid']),_0x3cf1b2=await getDoc(_0x4e58d3);if(_0x3cf1b2['exists']()){const _0x58ac47=_0x3cf1b2[_0x36a352(0x376)]();console[_0x36a352(0x263)](_0x36a352(0x28d)+_0xeed7b2[_0x36a352(0x3a9)]+'\x20by\x20UID:',_0x58ac47);const _0x436292=(_0x58ac47['roleName']||_0x58ac47['role']||'')['toLowerCase']();if(_0x436292&&_0x436292!==_0x36a352(0x270)){_0x4237d2=_0x436292,_0x2bc5a0=_0xeed7b2['displayName'],console['log'](_0x36a352(0x2a0)+_0x4237d2+'\x20in\x20'+_0x2bc5a0);break;}}}if(!_0x4237d2){const _0x40ac19=collection(db,_0xeed7b2[_0x36a352(0x1b2)]),_0x7ccd2a=query(_0x40ac19,where(_0x36a352(0x36a),'==',_0x135226)),_0x2f371e=await getDocs(_0x7ccd2a);if(!_0x2f371e['empty']){const _0x3ab9a5=_0x2f371e['docs'][0x0][_0x36a352(0x376)]();console['log']('Found\x20user\x20in\x20'+_0xeed7b2['displayName']+'\x20with\x20email\x20'+_0x135226+':',_0x3ab9a5);const _0x226bde=(_0x3ab9a5[_0x36a352(0x38c)]||_0x3ab9a5['role']||'')['toLowerCase']();if(_0x226bde&&_0x226bde!=='none'){_0x4237d2=_0x226bde,_0x2bc5a0=_0xeed7b2[_0x36a352(0x3a9)],console['log']('Found\x20specific\x20role:\x20'+_0x4237d2+'\x20in\x20'+_0x2bc5a0);break;}}}}catch(_0x2048ac){console['error']('Error\x20checking\x20'+_0xeed7b2[_0x36a352(0x3a9)]+':',_0x2048ac);}}if(_0x4237d2){console[_0x36a352(0x263)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x4237d2+_0x36a352(0x345)+_0x2bc5a0+')');const _0x7157d0={'admin':[_0x36a352(0x21f),_0x36a352(0x3db),'manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history',_0x36a352(0x3bb),'user-roles-section',_0x36a352(0x383),'manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard',_0x36a352(0x3db),'manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history',_0x36a352(0x3bb),_0x36a352(0x283),'manage-matches',_0x36a352(0x268),'manage-levels-ribbons','manage-ribbons'],'council':['dashboard',_0x36a352(0x3db),_0x36a352(0x383)],'creative\x20lead':[_0x36a352(0x21f),_0x36a352(0x2c6),'manage-trophies','elo-history','manage-highlights']};if(_0x7157d0[_0x4237d2])return console['log']('Role\x20\x27'+_0x4237d2+'\x27\x20has\x20permissions:',_0x7157d0[_0x4237d2]),_0x7157d0[_0x4237d2];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x135226+_0x36a352(0x3c2)),['dashboard'];}function setupSidebarNavigation(_0x5b7fa8=[]){const _0x387969=a4_0x4df989,_0x47a617=document[_0x387969(0x1af)]('.sidebar-nav\x20.nav-item'),_0x22137a=document['querySelectorAll'](_0x387969(0x335));(!_0x5b7fa8||_0x5b7fa8['length']===0x0)&&(_0x5b7fa8=['dashboard']);_0x47a617['forEach'](_0x2d3541=>{const _0x169147=_0x387969,_0x5c63a7=_0x2d3541['getAttribute'](_0x169147(0x2a7));_0x5b7fa8['includes'](_0x5c63a7)?_0x2d3541['style']['display']='flex':_0x2d3541['style']['display']='none',_0x2d3541['addEventListener'](_0x169147(0x1d1),()=>{const _0x4d54b9=_0x169147,_0x1f4ff5=_0x2d3541['getAttribute']('data-section');if(!_0x5b7fa8['includes'](_0x1f4ff5)){showNotification(_0x4d54b9(0x2a3),'error');return;}_0x47a617[_0x4d54b9(0x2e0)](_0x1bb5a8=>_0x1bb5a8['classList']['remove']('active')),_0x2d3541['classList']['add']('active'),_0x22137a['forEach'](_0x45b90d=>{const _0x58b573=_0x4d54b9;_0x45b90d['style']['display']=_0x58b573(0x270);});const _0x5ba696=document['getElementById'](_0x1f4ff5);_0x5ba696&&(_0x5ba696['style']['display']=_0x4d54b9(0x2cb),console['log']('Switched\x20to\x20'+_0x1f4ff5+'\x20section'));});});const _0x52f899=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x5b7fa8[0x0]+'\x22]');_0x52f899&&_0x52f899[_0x387969(0x1d1)](),console['log'](_0x387969(0x276));}function setupTabNavigation(){const _0x3350e0=a4_0x4df989,_0x136361=document['querySelectorAll'](_0x3350e0(0x37c));let _0x548265=null,_0x41e9e7=new Set();_0x136361['forEach'](_0x207686=>{const _0x375a33=_0x3350e0;_0x207686[_0x375a33(0x2fd)]('click',function(){const _0x3e18a5=_0x375a33,_0x4ab8dc=this['getAttribute'](_0x3e18a5(0x2a7));if(_0x4ab8dc===_0x548265)return;_0x548265&&(document['getElementById'](_0x548265)['style']['display']=_0x3e18a5(0x270),_0x136361['forEach'](_0x44b418=>_0x44b418['classList']['remove']('active'))),document['getElementById'](_0x4ab8dc)['style']['display']='block',this[_0x3e18a5(0x1cf)]['add'](_0x3e18a5(0x3b6)),_0x548265=_0x4ab8dc;});});}function loadSectionData(_0x4f31a7){return;}async function initializeAdminDashboard(){const _0x1baafd=a4_0x4df989;try{const _0x3b4f59=auth[_0x1baafd(0x290)],_0x7a6493=await getUserTabPermissions(_0x3b4f59['email']);console[_0x1baafd(0x263)]('User\x20'+_0x3b4f59['email']+'\x20allowed\x20tabs:',_0x7a6493),window['userAllowedTabs']=_0x7a6493,setupSidebarNavigation(_0x7a6493),setupLadderSelector(),setupDashboardSection(),_0x7a6493['includes']('manage-players')&&setupManagePlayersSection(),_0x7a6493['includes']('elo-history')&&setupEloHistorySection(),_0x7a6493[_0x1baafd(0x1b0)](_0x1baafd(0x393))&&setupRankControls(),_0x7a6493['includes']('manage-articles')&&setupManageArticlesSection(),_0x7a6493['includes']('user-roles-section')&&setupUserRolesSection(),_0x7a6493[_0x1baafd(0x1b0)](_0x1baafd(0x1f8))&&setupTrophyManagementSection(),_0x7a6493[_0x1baafd(0x1b0)]('manage-highlights')&&setupManageHighlightsSection(),_0x7a6493['includes']('inactive-players')&&setupInactivePlayersSection(),_0x7a6493['includes']('manage-matches')&&setupManageMatchesSection(),_0x7a6493['includes'](_0x1baafd(0x268))&&setupManagePointsSection(),_0x7a6493['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x7a6493);}catch(_0x61b35a){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x61b35a);}}function setupDataLoadButtons(_0x4c8ca2=[]){const _0x891244=a4_0x4df989;(!_0x4c8ca2||_0x4c8ca2['length']===0x0)&&(_0x4c8ca2=['dashboard']);const _0x481b36=document[_0x891244(0x338)]('load-dashboard-data');_0x481b36&&_0x481b36[_0x891244(0x2fd)]('click',function(){const _0x6fc71f=_0x891244;this[_0x6fc71f(0x1cf)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x24f559=_0x6fc71f;this[_0x24f559(0x1cf)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x2fc326=>{const _0x3bd8b5=_0x6fc71f;console['error']('Error\x20loading\x20dashboard:',_0x2fc326),this['classList']['remove']('loading'),this[_0x3bd8b5(0x3c0)]=_0x3bd8b5(0x3bf),setTimeout(()=>{const _0x4a7d82=_0x3bd8b5;this[_0x4a7d82(0x3c0)]=_0x4a7d82(0x29f);},0xbb8);});});if(_0x4c8ca2['includes']('manage-trophies')){const _0x274ea0=document['getElementById']('load-trophies-data');_0x274ea0&&_0x274ea0['addEventListener'](_0x891244(0x1d1),function(){const _0x2275b3=_0x891244;console['log']('Load\x20trophies\x20data\x20clicked'),this[_0x2275b3(0x1cf)]['add'](_0x2275b3(0x3be)),this[_0x2275b3(0x3c0)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x299689=_0x2275b3;this['classList'][_0x299689(0x321)](_0x299689(0x3be)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x270660=>{const _0x50fd53=_0x2275b3;console[_0x50fd53(0x2e5)]('Error\x20loading\x20trophies:',_0x270660),this['classList']['remove']('loading'),this[_0x50fd53(0x3c0)]=_0x50fd53(0x3bf),setTimeout(()=>{const _0x13f950=_0x50fd53;this[_0x13f950(0x3c0)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x4c8ca2['includes']('manage-players')){const _0x5b0679=document[_0x891244(0x338)](_0x891244(0x207));_0x5b0679&&_0x5b0679[_0x891244(0x2fd)](_0x891244(0x1d1),function(){const _0x31eab7=_0x891244;console[_0x31eab7(0x263)](_0x31eab7(0x3da)),this['classList'][_0x31eab7(0x245)]('loading'),this[_0x31eab7(0x3c0)]=_0x31eab7(0x222),loadPlayersData()['then'](()=>{const _0x3159db=_0x31eab7;this[_0x3159db(0x1cf)][_0x3159db(0x321)]('loading'),this[_0x3159db(0x3c0)]=_0x3159db(0x264);})['catch'](_0x229449=>{const _0x2a2413=_0x31eab7;console['error']('Error\x20loading\x20players:',_0x229449),this['classList']['remove']('loading'),this['innerHTML']=_0x2a2413(0x3bf),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x4c8ca2['includes']('elo-history')){const _0x33a012=document['getElementById'](_0x891244(0x373));_0x33a012&&_0x33a012[_0x891244(0x2fd)](_0x891244(0x1d1),function(){const _0xaa7ed4=_0x891244;console['log']('Load\x20history\x20data\x20clicked'),this[_0xaa7ed4(0x1cf)]['add'](_0xaa7ed4(0x3be)),this[_0xaa7ed4(0x3c0)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x26645c=>{const _0x281acf=_0xaa7ed4;console['error']('Error\x20loading\x20history:',_0x26645c),this[_0x281acf(0x1cf)]['remove'](_0x281acf(0x3be)),this['innerHTML']=_0x281acf(0x3bf),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x4c8ca2['includes']('manage-articles')){const _0x3a1e8b=document['getElementById'](_0x891244(0x3a1));_0x3a1e8b&&_0x3a1e8b['addEventListener']('click',function(){const _0x45182f=_0x891244;console['log'](_0x45182f(0x1db)),this['classList']['add'](_0x45182f(0x3be)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})[_0x45182f(0x31d)](_0x16027d=>{const _0x551a5d=_0x45182f;console['error']('Error\x20loading\x20articles:',_0x16027d),this['classList'][_0x551a5d(0x321)](_0x551a5d(0x3be)),this[_0x551a5d(0x3c0)]=_0x551a5d(0x3bf),setTimeout(()=>{const _0x3b4abe=_0x551a5d;this[_0x3b4abe(0x3c0)]=_0x3b4abe(0x314);},0xbb8);});});}if(_0x4c8ca2[_0x891244(0x1b0)]('user-roles-section')){const _0x7b0220=document['getElementById']('load-users-data');_0x7b0220&&_0x7b0220[_0x891244(0x2fd)]('click',function(){const _0x3e1a20=_0x891244;console['log'](_0x3e1a20(0x2b3)),this['classList']['add'](_0x3e1a20(0x3be)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x5784bc=_0x3e1a20;this['classList']['remove']('loading'),this['innerHTML']=_0x5784bc(0x351);})['catch'](_0x2d2aa9=>{const _0x4d1b4e=_0x3e1a20;console['error']('Error\x20loading\x20users:',_0x2d2aa9),this[_0x4d1b4e(0x1cf)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x51c767=_0x4d1b4e;this[_0x51c767(0x3c0)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x4c8ca2[_0x891244(0x1b0)]('inactive-players')){const _0x1d659f=document['getElementById']('load-inactive-players-data');_0x1d659f&&_0x1d659f['addEventListener']('click',function(){const _0x175f15=_0x891244;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList'][_0x175f15(0x245)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x18e426=_0x175f15;this[_0x18e426(0x1cf)]['remove']('loading'),this['innerHTML']=_0x18e426(0x21c);})[_0x175f15(0x31d)](_0x310d05=>{const _0x492abe=_0x175f15;console[_0x492abe(0x2e5)](_0x492abe(0x336),_0x310d05),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x4c8ca2['includes']('manage-highlights')){const _0x107625=document['getElementById']('load-highlights-data');_0x107625&&_0x107625['addEventListener']('click',function(){const _0x372d0d=_0x891244;console['log']('Load\x20highlights\x20data\x20clicked'),this[_0x372d0d(0x1cf)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()[_0x372d0d(0x1bd)](()=>{const _0x21ed8d=_0x372d0d;this['classList']['remove']('loading'),this['innerHTML']=_0x21ed8d(0x3c7);})['catch'](_0x1f2e80=>{const _0x4f19ea=_0x372d0d;console['error']('Error\x20loading\x20highlights:',_0x1f2e80),this['classList'][_0x4f19ea(0x321)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x44de7f=_0x4f19ea;this[_0x44de7f(0x3c0)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x4c8ca2['includes'](_0x891244(0x383))){const _0x3d2e4d=document['getElementById']('load-matches-data');_0x3d2e4d&&_0x3d2e4d['addEventListener'](_0x891244(0x1d1),function(){const _0x1eb3a7=_0x891244;console['log']('Load\x20matches\x20data\x20clicked'),this[_0x1eb3a7(0x1cf)]['add'](_0x1eb3a7(0x3be)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x2bb945=>{const _0x8cea4=_0x1eb3a7;console['error']('Error\x20loading\x20matches:',_0x2bb945),this[_0x8cea4(0x1cf)][_0x8cea4(0x321)]('loading'),this['innerHTML']=_0x8cea4(0x3bf),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x4c8ca2[_0x891244(0x1b0)]('manage-ribbons')){const _0x3d62dc=document['getElementById'](_0x891244(0x305));_0x3d62dc&&_0x3d62dc['addEventListener'](_0x891244(0x1d1),function(){const _0xb9ea86=_0x891244;console[_0xb9ea86(0x263)]('Load\x20ribbons\x20data\x20clicked'),this['classList'][_0xb9ea86(0x245)]('loading'),this[_0xb9ea86(0x3c0)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})[_0xb9ea86(0x31d)](_0x2ddbd5=>{const _0x57be18=_0xb9ea86;console[_0x57be18(0x2e5)]('Error\x20loading\x20ribbons:',_0x2ddbd5),this['classList'][_0x57be18(0x321)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x891244(0x2b8));}function setupDashboardSection(){const _0x45cc65=a4_0x4df989;document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x45cc65(0x3af))[_0x45cc65(0x2a2)]='-',document['getElementById']('pending-count')[_0x45cc65(0x2a2)]='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x53c30c=a4_0x4df989,_0x1f55eb=document['querySelectorAll']('.ladder-switch\x20input');_0x1f55eb['forEach'](_0x3c70a4=>{const _0x54cb96=a4_0x3018;_0x3c70a4['addEventListener'](_0x54cb96(0x266),()=>{const _0x36daab=_0x54cb96;currentLadder=_0x3c70a4[_0x36daab(0x223)],document[_0x36daab(0x1bc)]['setAttribute']('data-ladder',currentLadder);const _0x517698=document['getElementById']('current-ladder-display');_0x517698&&(_0x517698['textContent']=currentLadder),document[_0x36daab(0x338)](_0x36daab(0x298))[_0x36daab(0x2a2)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts[_0x36daab(0x302)]=null),charts['activity']&&(charts[_0x36daab(0x2ec)]['destroy'](),charts['activity']=null),showNotification(_0x36daab(0x29d)+currentLadder+_0x36daab(0x25d),'info');});});const _0x54a7f0=document['getElementById'](_0x53c30c(0x26e));_0x54a7f0&&(_0x54a7f0['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x55d213=a4_0x4df989;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x55d213(0x338)]('player-count')['textContent']='-',document['getElementById'](_0x55d213(0x3af))[_0x55d213(0x2a2)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0xefdee3=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':_0x55d213(0x368),_0x468677=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x59caea=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?_0x55d213(0x2a8):_0x55d213(0x377),_0x3da615=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x55d213(0x3d5):'RejectedD3';console[_0x55d213(0x263)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0xefdee3+',\x20'+_0x468677);const _0xdb76f6=await getDocs(collection(db,_0xefdee3)),_0xc6d0c0=_0xdb76f6['size'],_0x4db70a=await getDocs(collection(db,_0x468677)),_0x164fcd=_0x4db70a['size'],_0x2ca081=await getDocs(collection(db,_0x59caea)),_0x3c7528=_0x2ca081['size'],_0x4f1fe1=await getDocs(collection(db,_0x3da615)),_0x45c1bc=_0x4f1fe1['size'];return document['getElementById'](_0x55d213(0x298))[_0x55d213(0x2a2)]=_0xc6d0c0,document['getElementById']('match-count')[_0x55d213(0x2a2)]=_0x164fcd,document['getElementById']('pending-count')[_0x55d213(0x2a2)]=_0x3c7528,document['getElementById']('rejected-count')['textContent']=_0x45c1bc,await createRankDistributionChart(),await createActivityChart(),console[_0x55d213(0x263)](_0x55d213(0x24b)),!![];}catch(_0x2c2870){console['error']('Error\x20loading\x20dashboard\x20data:',_0x2c2870);throw _0x2c2870;}}async function createRankDistributionChart(){const _0x255315=a4_0x4df989;try{const _0x4a753c=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x556134=await getDocs(_0x4a753c),_0x158a2d={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x556134[_0x255315(0x2e0)](_0x44c8e3=>{const _0x29a650=_0x255315,_0xefa854=_0x44c8e3['data'](),_0x1133f0=_0xefa854['eloRating']||0x4b0;if(_0x1133f0>=0x7d0)_0x158a2d['Emerald']++;else{if(_0x1133f0>=0x708)_0x158a2d['Gold']++;else{if(_0x1133f0>=0x640)_0x158a2d[_0x29a650(0x394)]++;else{if(_0x1133f0>=0x578)_0x158a2d['Bronze']++;else _0x158a2d['Unranked']++;}}}});const _0x76c7c0=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x76c7c0,{'type':_0x255315(0x26c),'data':{'labels':Object[_0x255315(0x2ce)](_0x158a2d),'datasets':[{'data':Object[_0x255315(0x3a0)](_0x158a2d),'backgroundColor':['#808080',_0x255315(0x211),_0x255315(0x349),'#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x255315(0x309),'labels':{'color':_0x255315(0x233)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x255315(0x233),'font':{'size':0x10}}}}});}catch(_0x5eb7af){console[_0x255315(0x2e5)]('Error\x20creating\x20rank\x20distribution\x20chart:',_0x5eb7af),document['getElementById']('rank-distribution-chart')['innerHTML']=_0x255315(0x27f);}}async function createActivityChart(){const _0x16058a=a4_0x4df989;try{const _0x1d453d=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x4c014f=collection(db,_0x1d453d),_0x387da0=new Date();_0x387da0['setDate'](_0x387da0['getDate']()-0x7);const _0x1db13a=query(_0x4c014f,where('approvedAt','>=',_0x387da0),orderBy(_0x16058a(0x3b9),_0x16058a(0x36d))),_0x465e0a=await getDocs(_0x1db13a),_0x4503c2=['Sunday',_0x16058a(0x1b5),'Tuesday',_0x16058a(0x355),'Thursday',_0x16058a(0x2ab),'Saturday'],_0x8ac24b=_0x4503c2['reduce']((_0x3937ff,_0x5595e8)=>({..._0x3937ff,[_0x5595e8]:0x0}),{});_0x465e0a[_0x16058a(0x2e0)](_0x5ade68=>{const _0x2b7866=_0x16058a,_0x1d48dc=_0x5ade68['data']();if(_0x1d48dc[_0x2b7866(0x3b9)]){const _0x278443=_0x4503c2[new Date(_0x1d48dc[_0x2b7866(0x3b9)]['seconds']*0x3e8)['getDay']()];_0x8ac24b[_0x278443]++;}});const _0x843d91=document[_0x16058a(0x338)]('activity-chart');charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x843d91,{'type':_0x16058a(0x1cc),'data':{'labels':_0x4503c2,'datasets':[{'label':'Matches\x20Played','data':_0x4503c2['map'](_0x19d1de=>_0x8ac24b[_0x19d1de]),'backgroundColor':currentLadder==='D1'?_0x16058a(0x3a4):'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':_0x16058a(0x39c),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x16058a(0x1ad)}},'x':{'ticks':{'color':_0x16058a(0x233)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x16058a(0x372),'color':_0x16058a(0x233),'font':{'size':0x10}}}}});}catch(_0x13d6c2){console['error']('Error\x20creating\x20activity\x20chart:',_0x13d6c2),document['getElementById'](_0x16058a(0x2d1))[_0x16058a(0x3c0)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x4c546b=a4_0x4df989,_0x371615=document[_0x4c546b(0x338)]('players-table-body');if(!_0x371615)return;_0x371615['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x16a000='players';if(currentLadder==='D2')_0x16a000=_0x4c546b(0x3f6);else currentLadder==='D3'&&(_0x16a000='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x16a000+'\x20collection...');const _0x3af295=collection(db,_0x16a000),_0x5159ca=query(_0x3af295,orderBy('eloRating','desc')),_0x96de80=await getDocs(_0x5159ca);if(_0x96de80[_0x4c546b(0x241)]){_0x371615['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x371615['innerHTML']='';let _0x5325ef=0x1;_0x96de80['forEach'](_0x269f88=>{const _0x17adc8=_0x4c546b,_0x23c037=_0x269f88[_0x17adc8(0x376)](),_0x238126=getRankFromElo(_0x23c037[_0x17adc8(0x2d5)]||0x4b0),_0x33e69d=getRankStyle(_0x23c037['eloRating']||0x4b0),_0x42839c=document['createElement']('tr');_0x42839c[_0x17adc8(0x3c0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x5325ef+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x33e69d['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x23c037[_0x17adc8(0x32a)]||'Unknown')+_0x17adc8(0x3f1)+(_0x23c037[_0x17adc8(0x2d5)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x33e69d['color']+_0x17adc8(0x329)+_0x238126+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x23c037['wins']||0x0)+'W\x20/\x20'+(_0x23c037['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x269f88['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x269f88['id']+_0x17adc8(0x1d9),_0x371615['appendChild'](_0x42839c),_0x5325ef++;}),setupPlayerActionButtons();}catch(_0x36cc79){console['error']('Error\x20loading\x20players:',_0x36cc79),_0x371615['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x36cc79['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x2704ff){const _0x35bd25=a4_0x4df989;if(_0x2704ff>=0x7d0)return'Emerald';if(_0x2704ff>=0x708)return _0x35bd25(0x3e5);if(_0x2704ff>=0x640)return'Silver';if(_0x2704ff>=0x578)return'Bronze';return _0x35bd25(0x2cc);}function setupPlayerActionButtons(){const _0x37f12f=a4_0x4df989;document['querySelectorAll'](_0x37f12f(0x303))['forEach'](_0x6bbd6=>{_0x6bbd6['addEventListener']('click',async _0x492d03=>{const _0x321e10=a4_0x3018,_0x5e69de=_0x492d03[_0x321e10(0x246)]['dataset']['id'];openEditPlayerModal(_0x5e69de);});}),document['querySelectorAll']('.delete-btn')[_0x37f12f(0x2e0)](_0x40cedb=>{_0x40cedb['addEventListener']('click',async _0x269d23=>{const _0x3625f2=a4_0x3018,_0x1e47fe=_0x269d23[_0x3625f2(0x246)][_0x3625f2(0x2c1)]['id'];confirmDeletePlayer(_0x1e47fe);});});}async function openEditPlayerModal(_0x21a4d2){const _0x709d3e=a4_0x4df989;try{const _0x5358cf=currentLadder==='D1'?'players':'playersD2',_0x4f16d6=doc(db,_0x5358cf,_0x21a4d2),_0x12f326=await getDoc(_0x4f16d6);if(!_0x12f326['exists']()){showNotification('Player\x20not\x20found',_0x709d3e(0x2e5));return;}const _0x27c7fb=_0x12f326['data'](),_0x234864=document[_0x709d3e(0x338)]('edit-player-modal'),_0x3ff680=document['getElementById']('edit-username'),_0x3f8c26=document['getElementById']('edit-elo'),_0x48a1b7=document[_0x709d3e(0x338)](_0x709d3e(0x1cb)),_0x11a0b1=document[_0x709d3e(0x338)](_0x709d3e(0x3e8));_0x3ff680['value']=_0x27c7fb['username']||'',_0x3f8c26['value']=_0x27c7fb[_0x709d3e(0x2d5)]||0x4b0,_0x48a1b7[_0x709d3e(0x223)]=_0x27c7fb[_0x709d3e(0x2c8)]||0x0,_0x11a0b1['value']=_0x27c7fb['losses']||0x0,_0x234864[_0x709d3e(0x2c1)][_0x709d3e(0x1c6)]=_0x21a4d2,_0x234864['classList']['add']('active');}catch(_0x10da98){console['error'](_0x709d3e(0x2c5),_0x10da98),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x50782f=a4_0x4df989;try{const _0x2b4b79=document['getElementById']('edit-player-modal'),_0x1a98a7=_0x2b4b79['dataset']['playerId'];if(!_0x1a98a7){showNotification('No\x20player\x20selected',_0x50782f(0x2e5));return;}const _0x322493=document['getElementById'](_0x50782f(0x39a)),_0x327754=document['getElementById'](_0x50782f(0x280)),_0x2ab924=document['getElementById']('edit-wins'),_0x33309c=document['getElementById'](_0x50782f(0x3e8)),_0x226fdc=_0x322493['value']['trim'](),_0x473e67=parseInt(_0x327754['value']),_0x17a83d=parseInt(_0x2ab924['value']),_0x3c36f0=parseInt(_0x33309c['value']);if(!_0x226fdc||isNaN(_0x473e67)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x5d2f3b=currentLadder==='D1'?'players':'playersD2',_0x4014bb=doc(db,_0x5d2f3b,_0x1a98a7),_0x385a6e=await getDoc(_0x4014bb),_0x3cd9d0=_0x385a6e['exists']()?_0x385a6e[_0x50782f(0x376)]():{},_0x537755=_0x3cd9d0['eloRating']||0x4b0;await updateDoc(_0x4014bb,{'username':_0x226fdc,'eloRating':_0x473e67,'wins':_0x17a83d||0x0,'losses':_0x3c36f0||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x473e67!==_0x537755){const _0x251d9e=currentLadder==='D1'?_0x50782f(0x3f2):'eloHistoryD2';await addDoc(collection(db,_0x251d9e),{'player':_0x226fdc,'previousElo':_0x537755,'newElo':_0x473e67,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x50782f(0x290)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x332115){console['error'](_0x50782f(0x340),_0x332115),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x332115[_0x50782f(0x1e7)],_0x50782f(0x2e5));}}function closeEditPlayerModal(){const _0x3d4541=a4_0x4df989,_0x48a26b=document[_0x3d4541(0x338)]('edit-player-modal');_0x48a26b['classList']['remove']('active'),_0x48a26b['dataset'][_0x3d4541(0x1c6)]='';}async function confirmDeletePlayer(_0x9dddeb){const _0x4f8ef5=a4_0x4df989;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x40560b=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x40560b,_0x9dddeb)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully',_0x4f8ef5(0x3c8));}catch(_0x51ebec){console['error']('Error\x20deleting\x20player:',_0x51ebec),showNotification(_0x4f8ef5(0x28f)+_0x51ebec[_0x4f8ef5(0x1e7)],'error');}}async function setupManagePlayersSection(){const _0x1ccae9=a4_0x4df989,_0xe48a4e=document['getElementById']('add-player-form');_0xe48a4e&&_0xe48a4e['addEventListener']('submit',async _0x3a9a7f=>{const _0x38e4ac=a4_0x3018;_0x3a9a7f[_0x38e4ac(0x21a)](),await addNewPlayer();});const _0x44bb78=document[_0x1ccae9(0x338)]('player-search');_0x44bb78&&_0x44bb78['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x59e8a9=document['getElementById']('save-player-btn');_0x59e8a9&&_0x59e8a9['addEventListener']('click',saveEditedPlayer);const _0x47b26c=document['getElementById'](_0x1ccae9(0x255));_0x47b26c&&_0x47b26c['addEventListener'](_0x1ccae9(0x1d1),closeEditPlayerModal);const _0x50433d=document['getElementById'](_0x1ccae9(0x2b6));_0x50433d&&_0x50433d['addEventListener'](_0x1ccae9(0x1d1),_0x14c480=>{_0x14c480['target']===_0x50433d&&closeEditPlayerModal();});const _0x26b91c=document['getElementById']('players-ladder-selector');_0x26b91c&&_0x26b91c['addEventListener']('change',()=>{currentLadder=_0x26b91c['value'],loadPlayersData();});}async function addNewPlayer(){const _0x365cf0=a4_0x4df989;try{const _0x3c17fb=document['getElementById']('new-player-username'),_0x36de0d=document['getElementById']('new-player-elo'),_0x9f892e=_0x3c17fb['value'][_0x365cf0(0x2f2)](),_0x589054=parseInt(_0x36de0d[_0x365cf0(0x223)])||0x4b0;if(!_0x9f892e){alert('Please\x20enter\x20a\x20valid\x20username');return;}console[_0x365cf0(0x263)]('Adding\x20player\x20'+_0x9f892e+'\x20with\x20ELO\x20'+_0x589054+_0x365cf0(0x3b4)+currentLadder+_0x365cf0(0x29b));let _0x44009a='players',_0x2dc337=_0x365cf0(0x3f2);if(currentLadder==='D2')_0x44009a=_0x365cf0(0x3f6),_0x2dc337='eloHistoryD2';else currentLadder==='D3'&&(_0x44009a='playersD3',_0x2dc337='eloHistoryD3');const _0x460388=query(collection(db,_0x44009a),where('username','==',_0x9f892e)),_0x561708=await getDocs(_0x460388);if(!_0x561708['empty']){alert('Username\x20'+_0x9f892e+_0x365cf0(0x22b)+currentLadder+_0x365cf0(0x29b));return;}const _0x443e3e=auth['currentUser'],_0x29c82e={'username':_0x9f892e,'eloRating':_0x589054,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x443e3e?_0x443e3e['email']:_0x365cf0(0x3d6),'gameMode':currentLadder};await addDoc(collection(db,_0x44009a),_0x29c82e),await addDoc(collection(db,_0x2dc337),{'player':_0x9f892e,'previousElo':0x4b0,'newElo':_0x589054,'timestamp':serverTimestamp(),'type':_0x365cf0(0x24c),'placedBy':_0x443e3e?_0x443e3e['email']:'admin','gameMode':currentLadder}),_0x3c17fb['value']='',_0x36de0d['value']=_0x365cf0(0x2b4),alert('Player\x20'+_0x9f892e+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x365cf0(0x38b)),loadPlayersData();}catch(_0x38d189){console['error']('Error\x20adding\x20player:',_0x38d189),alert(_0x365cf0(0x2b1)+_0x38d189['message']);}}document['addEventListener'](a4_0x4df989(0x2aa),()=>{const _0x42b6e1=a4_0x4df989,_0x3ed5c1=document['getElementById'](_0x42b6e1(0x244));_0x3ed5c1&&_0x3ed5c1['addEventListener']('submit',_0x273396=>{_0x273396['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x14a93c=a4_0x4df989,_0x453e1d=document['getElementById']('player-search')['value'][_0x14a93c(0x1fc)](),_0x993694=document[_0x14a93c(0x1af)]('#players-table-body\x20tr');let _0xa3ac23=0x0;_0x993694['forEach'](_0x3f444a=>{const _0x47e0b5=_0x14a93c,_0x53f618=_0x3f444a['querySelector']('.username')?.[_0x47e0b5(0x2a2)]['toLowerCase']()||'';_0x53f618['includes'](_0x453e1d)?(_0x3f444a['style']['display']='',_0xa3ac23++):_0x3f444a['style']['display']='none';});const _0x26614e=document['getElementById']('no-results-message');_0x26614e&&(_0xa3ac23===0x0&&_0x453e1d!==''?_0x26614e['style']['display']='block':_0x26614e[_0x14a93c(0x23b)]['display']='none');}function debounce(_0xd31267,_0x21efa1){let _0x465597;return function(..._0x1502e4){clearTimeout(_0x465597),_0x465597=setTimeout(()=>_0xd31267['apply'](this,_0x1502e4),_0x21efa1);};}async function loadEloHistory(_0xdafb11=0x1){const _0x41d676=a4_0x4df989,_0x5837a0=document['getElementById'](_0x41d676(0x3d7)),_0x10709c=currentLadder['toLowerCase']();if(!_0x5837a0)return;_0x5837a0[_0x41d676(0x3c0)]=_0x41d676(0x3b7);try{const _0x584866=currentLadder==='D1'?_0x41d676(0x3f2):currentLadder==='D2'?'eloHistoryD2':_0x41d676(0x365),_0x582a8c=collection(db,_0x584866);let _0x45df02;if(_0xdafb11>eloHistoryPagination[_0x10709c][_0x41d676(0x3d9)]&&eloHistoryPagination[_0x10709c][_0x41d676(0x1f2)])_0x45df02=query(_0x582a8c,orderBy(_0x41d676(0x2c0),'desc'),startAfter(eloHistoryPagination[_0x10709c]['lastVisible']),limit(PAGE_SIZE));else _0xdafb11<eloHistoryPagination[_0x10709c]['page']&&eloHistoryPagination[_0x10709c]['firstVisible']?_0x45df02=query(_0x582a8c,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x10709c][_0x41d676(0x1c7)]),limitToLast(PAGE_SIZE)):_0x45df02=query(_0x582a8c,orderBy(_0x41d676(0x2c0),'desc'),limit(PAGE_SIZE));const _0x263875=await getDocs(_0x45df02);if(_0x263875['empty']){_0x5837a0[_0x41d676(0x3c0)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x10709c+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x10709c]['page']=_0xdafb11,eloHistoryPagination[_0x10709c][_0x41d676(0x1c7)]=_0x263875['docs'][0x0],eloHistoryPagination[_0x10709c][_0x41d676(0x1f2)]=_0x263875[_0x41d676(0x2ed)][_0x263875['docs'][_0x41d676(0x206)]-0x1];const _0x3ba4d9=new Map();_0x5837a0[_0x41d676(0x3c0)]='';const _0x734fa0=async _0x1cd59a=>{const _0x2a1889=_0x41d676;if(typeof _0x1cd59a!=='string'||_0x1cd59a['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x1cd59a))return _0x1cd59a;if(_0x3ba4d9[_0x2a1889(0x348)](_0x1cd59a))return _0x3ba4d9['get'](_0x1cd59a);try{for(const _0x24dcb8 of[_0x2a1889(0x38d),_0x2a1889(0x3f6),'playersD3','nonParticipants']){const _0xf15224=await getDoc(doc(db,_0x24dcb8,_0x1cd59a));if(_0xf15224[_0x2a1889(0x39b)]()&&_0xf15224['data']()[_0x2a1889(0x32a)]){const _0x3bea02=_0xf15224[_0x2a1889(0x376)]()[_0x2a1889(0x32a)];return _0x3ba4d9['set'](_0x1cd59a,_0x3bea02),_0x3bea02;}}return _0x1cd59a;}catch(_0x17ed8d){return console['warn'](_0x2a1889(0x2b0)+_0x1cd59a+':',_0x17ed8d),_0x1cd59a;}};for(const _0x50d7c2 of _0x263875['docs']){const _0xb69544=_0x50d7c2['data'](),_0x4a8e1c=document['createElement']('tr'),_0x1590e4=_0xb69544['timestamp']?new Date(_0xb69544[_0x41d676(0x2c0)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x58fc67=_0xb69544[_0x41d676(0x358)]-_0xb69544['previousElo'],_0x4cb239=_0x58fc67>0x0?'positive-change':_0x58fc67<0x0?'negative-change':'',_0x555c38=_0x58fc67>0x0?'+':'',_0x385a11=_0xb69544['player']||_0xb69544['username']||_0xb69544['userId']||'N/A',_0x11e5ac=await _0x734fa0(_0x385a11);_0x4a8e1c[_0x41d676(0x3c0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x1590e4+_0x41d676(0x286)+_0x11e5ac+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0xb69544['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0xb69544['newElo']||_0x41d676(0x1d8))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4cb239+'\x22>'+_0x555c38+_0x58fc67+_0x41d676(0x327)+formatHistoryType(_0xb69544[_0x41d676(0x360)])+_0x41d676(0x371)+(_0xb69544[_0x41d676(0x293)]||_0xb69544['promotedBy']||_0xb69544['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5837a0['appendChild'](_0x4a8e1c);}document['getElementById'](_0x10709c+'-page-indicator')['textContent']=_0x41d676(0x3c9)+_0xdafb11;const _0x114d9f=document['getElementById'](_0x10709c+'-prev-page'),_0x31055b=document['getElementById'](_0x10709c+'-next-page');if(_0x114d9f)_0x114d9f['disabled']=_0xdafb11<=0x1;const _0x485d9e=query(_0x582a8c,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x10709c]['lastVisible']),limit(0x1)),_0x411ff0=await getDocs(_0x485d9e);if(_0x31055b)_0x31055b['disabled']=_0x411ff0['empty'];}catch(_0x4471a5){console[_0x41d676(0x2e5)](_0x41d676(0x253),_0x4471a5),_0x5837a0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x4471a5[_0x41d676(0x1e7)]+_0x41d676(0x1f9);}}function formatHistoryType(_0x51f1cc){const _0x38b1a9=a4_0x4df989;switch(_0x51f1cc){case'match_result':return'Match\x20Result';case'promotion':return _0x38b1a9(0x277);case'demotion':return'Demotion';case _0x38b1a9(0x331):return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x51f1cc||'Unknown';}}function setupEloHistorySection(){const _0x3eb798=a4_0x4df989;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')[_0x3eb798(0x2fd)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document[_0x3eb798(0x338)](_0x3eb798(0x306))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x3eb798(0x338)]('d2-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x594b53=document['getElementById']('d3-prev-page'),_0x1056e4=document['getElementById']('d3-next-page');_0x594b53&&_0x594b53['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x1056e4&&_0x1056e4['addEventListener'](_0x3eb798(0x1d1),()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x2cde47=document[_0x3eb798(0x338)](_0x3eb798(0x1e9));_0x2cde47&&_0x2cde47['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x13bda4=document['getElementById']('history-type-filter');_0x13bda4&&_0x13bda4[_0x3eb798(0x2fd)]('change',applyEloHistoryFilters);const _0x32802c=document['getElementById']('reset-history-filters');_0x32802c&&_0x32802c['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x85356b=a4_0x4df989,_0x22dc5e=document['getElementById']('elo-history-search')['value']['toLowerCase'](),_0x5c952e=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x3ada58=0x0;_0x5c952e[_0x85356b(0x2e0)](_0xd96fb8=>{const _0xb3d272=_0x85356b;if(_0xd96fb8[_0xb3d272(0x1cf)]['contains'](_0xb3d272(0x23a))||_0xd96fb8[_0xb3d272(0x1cf)]['contains']('empty-state')||_0xd96fb8['classList']['contains'](_0xb3d272(0x366)))return;const _0x3e9943=_0xd96fb8['querySelector']('.player')?.[_0xb3d272(0x2a2)][_0xb3d272(0x1fc)]()||'',_0x2a5b66=_0xd96fb8['querySelector']('.type')?.[_0xb3d272(0x2a2)]['toLowerCase']()||'',_0x35ae7a=_0xd96fb8['querySelector']('.admin-action')?.['textContent']['toLowerCase']()||'';_0x3e9943['includes'](_0x22dc5e)||_0x2a5b66[_0xb3d272(0x1b0)](_0x22dc5e)||_0x35ae7a[_0xb3d272(0x1b0)](_0x22dc5e)?(_0xd96fb8[_0xb3d272(0x23b)]['display']='',_0x3ada58++):_0xd96fb8[_0xb3d272(0x23b)]['display']='none';});}async function applyEloHistoryFilters(){const _0x4afb64=a4_0x4df989,_0x3b657e=document['getElementById']('history-start-date')['value'],_0x4d0315=document[_0x4afb64(0x338)]('history-end-date')[_0x4afb64(0x223)],_0x4086c1=document['getElementById'](_0x4afb64(0x2f0))['value'],_0x56239f=currentLadder['toLowerCase']();eloHistoryPagination[_0x56239f]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x1aca34=document['getElementById']('elo-history-table-body');_0x1aca34[_0x4afb64(0x3c0)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x1bc29f=currentLadder==='D1'?'eloHistory':_0x4afb64(0x1d6),_0xf6bf09=collection(db,_0x1bc29f);let _0x35e4b3=[orderBy('timestamp','desc')];if(_0x3b657e){const _0x22b64c=new Date(_0x3b657e);_0x22b64c['setHours'](0x0,0x0,0x0,0x0),_0x35e4b3[_0x4afb64(0x1de)](where('timestamp','>=',_0x22b64c));}if(_0x4d0315){const _0xffe5a1=new Date(_0x4d0315);_0xffe5a1['setHours'](0x17,0x3b,0x3b,0x3e7),_0x35e4b3['push'](where(_0x4afb64(0x2c0),'<=',_0xffe5a1));}_0x4086c1&&_0x4086c1!==_0x4afb64(0x3f0)&&_0x35e4b3['push'](where('type','==',_0x4086c1));_0x35e4b3['push'](limit(PAGE_SIZE));const _0x22c94b=query(_0xf6bf09,..._0x35e4b3),_0x4db590=await getDocs(_0x22c94b);!_0x4db590['empty']&&(eloHistoryPagination[_0x56239f]['firstVisible']=_0x4db590[_0x4afb64(0x2ed)][0x0],eloHistoryPagination[_0x56239f]['lastVisible']=_0x4db590[_0x4afb64(0x2ed)][_0x4db590[_0x4afb64(0x2ed)]['length']-0x1]);_0x1aca34['innerHTML']='';if(_0x4db590['empty']){_0x1aca34['innerHTML']=_0x4afb64(0x3aa);return;}_0x4db590['forEach'](_0x25c273=>{const _0x244168=_0x4afb64,_0xe0966f=_0x25c273['data'](),_0x19ae6b=document[_0x244168(0x274)]('tr'),_0x5beb57=_0xe0966f['timestamp']?new Date(_0xe0966f[_0x244168(0x2c0)][_0x244168(0x3a6)]*0x3e8)['toLocaleString']():'N/A',_0x131fef=_0xe0966f['newElo']-_0xe0966f['previousElo'],_0x48594d=_0x131fef>0x0?'positive-change':_0x131fef<0x0?'negative-change':'',_0x43caed=_0x131fef>0x0?'+':'',_0x52d252=_0xe0966f['player']||_0xe0966f['username']||_0xe0966f['userId']||'N/A';_0x19ae6b[_0x244168(0x3c0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x5beb57+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x52d252+_0x244168(0x3dc)+(_0xe0966f[_0x244168(0x308)]||_0x244168(0x1d8))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0xe0966f['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x48594d+'\x22>'+_0x43caed+_0x131fef+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0xe0966f['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xe0966f['modifiedBy']||_0xe0966f['promotedBy']||_0xe0966f[_0x244168(0x2af)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1aca34['appendChild'](_0x19ae6b);}),document['getElementById'](_0x56239f+_0x4afb64(0x20b))[_0x4afb64(0x2a2)]=_0x4afb64(0x3e2);}catch(_0x364c9e){console['error'](_0x4afb64(0x30a),_0x364c9e),_0x1aca34['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x364c9e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x3bde6d=a4_0x4df989;document['getElementById']('history-start-date')['value']='',document['getElementById']('history-end-date')['value']='',document['getElementById']('history-type-filter')[_0x3bde6d(0x223)]='all',document['getElementById']('elo-history-search')['value']='';const _0x1446e5=currentLadder[_0x3bde6d(0x1fc)]();eloHistoryPagination[_0x1446e5]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x269bc1=a4_0x4df989,_0x49fa83=document['getElementById']('promote-player-btn'),_0x4ad43e=document['getElementById']('promote-modal'),_0x2c590d=document['getElementById']('promote-form');_0x49fa83&&_0x4ad43e&&_0x2c590d&&(_0x49fa83['addEventListener'](_0x269bc1(0x1d1),()=>{_0x4ad43e['classList']['add']('active');}),_0x4ad43e[_0x269bc1(0x2fd)](_0x269bc1(0x1d1),_0x14190a=>{const _0x4f9955=_0x269bc1;_0x14190a['target']===_0x4ad43e&&_0x4ad43e[_0x4f9955(0x1cf)]['remove'](_0x4f9955(0x3b6));}),_0x2c590d[_0x269bc1(0x2fd)]('submit',async _0x124efb=>{const _0x5d25f1=_0x269bc1;_0x124efb['preventDefault']();const _0x35f115=document['getElementById'](_0x5d25f1(0x2dd)),_0xbbf0ae=document[_0x5d25f1(0x338)](_0x5d25f1(0x1e1)),_0xf25998=_0x35f115['value']['trim'](),_0x41221e=_0xbbf0ae['value'];if(!_0xf25998){showNotification(_0x5d25f1(0x225),'error');return;}try{await promotePlayer(_0xf25998,_0x41221e),_0x4ad43e['classList'][_0x5d25f1(0x321)](_0x5d25f1(0x3b6)),_0x35f115['value']='';}catch(_0x52bc43){showNotification(_0x52bc43[_0x5d25f1(0x1e7)],_0x5d25f1(0x2e5));}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{_0x4ad43e['classList']['remove']('active');}));const _0x142841=document['getElementById']('demote-player-btn'),_0x2f5303=document[_0x269bc1(0x338)]('demote-modal'),_0x519a72=document['getElementById']('demote-form');_0x142841&&_0x2f5303&&_0x519a72&&(_0x142841['addEventListener'](_0x269bc1(0x1d1),()=>{_0x2f5303['classList']['add']('active');}),_0x2f5303['addEventListener']('click',_0x56c23c=>{const _0xcdccfb=_0x269bc1;_0x56c23c['target']===_0x2f5303&&_0x2f5303['classList'][_0xcdccfb(0x321)](_0xcdccfb(0x3b6));}),_0x519a72['addEventListener']('submit',async _0x46cb57=>{const _0x4e9c86=_0x269bc1;_0x46cb57['preventDefault']();const _0x1aecd6=document[_0x4e9c86(0x338)]('demote-username'),_0x4178c9=document[_0x4e9c86(0x338)]('demote-ladder'),_0x416814=_0x1aecd6[_0x4e9c86(0x223)]['trim'](),_0x23fa93=_0x4178c9['value'];if(!_0x416814){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x416814,_0x23fa93),document['getElementById']('demote-modal')['classList']['remove'](_0x4e9c86(0x3b6)),document[_0x4e9c86(0x338)]('demote-username')['value']='';}catch(_0xbba3c9){console['error']('Error\x20in\x20demotion:',_0xbba3c9);}}));const _0xf0fae0=document['getElementById']('set-elo-btn'),_0x4ff404=document['getElementById'](_0x269bc1(0x294)),_0x138ec9=document['getElementById']('set-elo-form');_0xf0fae0&&_0x4ff404&&_0x138ec9&&(_0xf0fae0['addEventListener']('click',()=>{const _0x4acabe=_0x269bc1;_0x4ff404[_0x4acabe(0x1cf)]['add']('active');}),_0x4ff404['addEventListener']('click',_0x472c50=>{const _0xeaf407=_0x269bc1;_0x472c50['target']===_0x4ff404&&_0x4ff404['classList']['remove'](_0xeaf407(0x3b6));}),_0x138ec9['addEventListener']('submit',async _0x5220cf=>{const _0x146dd0=_0x269bc1;_0x5220cf[_0x146dd0(0x21a)]();const _0x3e7a2a=document[_0x146dd0(0x338)]('set-elo-username'),_0x1f9c96=document[_0x146dd0(0x338)]('set-elo-value');let _0x499e91;const _0x532b4b=document['getElementById'](_0x146dd0(0x39d)),_0x3ad50f=document[_0x146dd0(0x396)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x532b4b)_0x499e91=_0x532b4b['value'];else _0x3ad50f?_0x499e91=_0x3ad50f[_0x146dd0(0x223)]:_0x499e91='D1';if(!_0x3e7a2a||!_0x1f9c96){showNotification('Form\x20elements\x20are\x20missing',_0x146dd0(0x2e5));return;}const _0x29bd17=_0x3e7a2a['value']['trim'](),_0x584f59=parseInt(_0x1f9c96['value']);if(!_0x29bd17||isNaN(_0x584f59)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x146dd0(0x2e5));return;}try{await setCustomElo(_0x29bd17,_0x584f59,_0x499e91),_0x4ff404['classList']['remove']('active'),_0x3e7a2a['value']='',_0x1f9c96['value']='';}catch(_0x3312aa){showNotification(_0x3312aa['message'],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x55a6bb=_0x269bc1;_0x4ff404['classList']['remove'](_0x55a6bb(0x3b6));}));const _0x290588=document[_0x269bc1(0x338)](_0x269bc1(0x27d)),_0x48f199=document['getElementById']('set-role-form');if(_0x290588&&_0x48f199){_0x290588['addEventListener']('click',_0x1e9875=>{_0x1e9875['target']===_0x290588&&closeModalHandler();}),_0x48f199['addEventListener'](_0x269bc1(0x1d5),async _0x2ea019=>{const _0x4d19c2=_0x269bc1;_0x2ea019['preventDefault']();const _0x47a33d=document['getElementById']('role-username'),_0x3af6c9=document['getElementById']('role-name'),_0x134b96=document[_0x4d19c2(0x338)](_0x4d19c2(0x258)),_0xc34f55=_0x47a33d[_0x4d19c2(0x223)][_0x4d19c2(0x2f2)](),_0x408746=_0x3af6c9['value'][_0x4d19c2(0x2f2)](),_0x675acf=_0x134b96[_0x4d19c2(0x223)];if(!_0xc34f55){showNotification(_0x4d19c2(0x315),'error');return;}try{await setUserRole(_0xc34f55,_0x408746,_0x675acf),closeModalHandler(),loadUsersWithRoles();}catch(_0x3bad15){}});const _0x474950=document['getElementById']('cancel-role-btn');_0x474950&&(_0x474950[_0x269bc1(0x357)]('click',closeModalHandler),_0x474950[_0x269bc1(0x2fd)]('click',closeModalHandler));}}async function promotePlayer(_0x6c7eb6,_0x11b83b){const _0x2edb34=a4_0x4df989;try{console['log'](_0x2edb34(0x23e)+_0x6c7eb6+'\x20in\x20'+_0x11b83b+'\x20ladder');const _0xe19c82=auth['currentUser'];if(!_0xe19c82)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x5151fe=_0x11b83b==='D2'?'playersD2':'players',_0x1b6d61=_0x11b83b==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x2edb34(0x34e)+_0x5151fe);const _0x13a9b8=collection(db,_0x5151fe),_0x470555=query(_0x13a9b8,where(_0x2edb34(0x32a),'==',_0x6c7eb6)),_0x502578=await getDocs(_0x470555);if(_0x502578['empty']){alert(_0x2edb34(0x278)+_0x11b83b+'\x20ladder');throw new Error(_0x2edb34(0x278)+_0x11b83b+'\x20ladder');}const _0x452ba6=_0x502578['docs'][0x0],_0x60433a=_0x452ba6['data'](),_0x20bd43=_0x60433a[_0x2edb34(0x2d5)]||0x4b0,_0x43d218=_0x452ba6['id'];console['log'](_0x2edb34(0x3e0)+_0x20bd43);const _0x22b36a=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x2edb34(0x2eb),'elo':0x7d0}];let _0x25e318=_0x22b36a['find'](_0x3fef48=>_0x3fef48['elo']>_0x20bd43);if(!_0x25e318){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x11b83b+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x11b83b+_0x2edb34(0x29b));}console['log']('Promoting\x20player\x20to\x20'+_0x25e318['name']+'\x20('+_0x25e318['elo']+')'),await updateDoc(doc(db,_0x5151fe,_0x452ba6['id']),{'eloRating':_0x25e318[_0x2edb34(0x2c9)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0xe19c82['email']||_0x2edb34(0x3d6)}),await addDoc(collection(db,_0x1b6d61),{'player':_0x6c7eb6,'previousElo':_0x20bd43,'newElo':_0x25e318[_0x2edb34(0x2c9)],'timestamp':serverTimestamp(),'type':_0x2edb34(0x3e4),'rankAchieved':_0x25e318['name'],'promotedBy':_0xe19c82['email']||_0x2edb34(0x3d6),'gameMode':_0x11b83b});try{const {promotionManager:_0x209c23}=await import('./promotions.js'),_0x5e5bad=_0x209c23[_0x2edb34(0x1c9)](_0x20bd43),_0x152188=_0x25e318['name'];await _0x209c23['sendPromotionNotification'](_0x43d218,_0x6c7eb6,_0x20bd43,_0x25e318['elo'],_0x5e5bad,_0x152188,_0x2edb34(0x3e4),{'displayName':_0x6c7eb6,'source':_0x2edb34(0x3d6),'adminUser':_0xe19c82[_0x2edb34(0x36a)],'ladder':_0x11b83b}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x619dd7){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x619dd7);}return alert('Successfully\x20promoted\x20'+_0x6c7eb6+'\x20to\x20'+_0x25e318['name']+'\x20('+_0x25e318['elo']+')'),currentLadder===_0x11b83b&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x795a8d){console[_0x2edb34(0x2e5)](_0x2edb34(0x2b2),_0x795a8d),alert('Error\x20promoting\x20player:\x20'+_0x795a8d[_0x2edb34(0x1e7)]);throw _0x795a8d;}}document[a4_0x4df989(0x2fd)]('DOMContentLoaded',()=>{const _0x389e56=a4_0x4df989,_0x537b55=document['getElementById']('promote-form');_0x537b55&&_0x537b55['addEventListener'](_0x389e56(0x1d5),async _0x18d77f=>{const _0x3f970f=_0x389e56;_0x18d77f['preventDefault']();const _0x405dc9=document['getElementById']('promote-username')['value'][_0x3f970f(0x2f2)](),_0x302d28=document[_0x3f970f(0x396)]('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x405dc9){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x405dc9,_0x302d28),document['getElementById'](_0x3f970f(0x2fc))['classList'][_0x3f970f(0x321)]('active'),document['getElementById'](_0x3f970f(0x2dd))['value']='';}catch(_0x499e49){console['error']('Error\x20in\x20promotion:',_0x499e49);}});});async function demotePlayer(_0xe45986,_0x2afd08){const _0x5c3e6f=a4_0x4df989;try{console['log']('Attempting\x20to\x20demote\x20'+_0xe45986+'\x20in\x20'+_0x2afd08+'\x20ladder');const _0x2a472e=auth[_0x5c3e6f(0x290)];if(!_0x2a472e)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1b06c2=_0x2afd08==='D2'?'playersD2':'players',_0x3758d4=_0x2afd08==='D2'?'eloHistoryD2':_0x5c3e6f(0x3f2);console['log'](_0x5c3e6f(0x34e)+_0x1b06c2);const _0x1790cc=collection(db,_0x1b06c2),_0x287012=query(_0x1790cc,where(_0x5c3e6f(0x32a),'==',_0xe45986)),_0x50e78e=await getDocs(_0x287012);if(_0x50e78e['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x2afd08+_0x5c3e6f(0x29b));throw new Error('Player\x20not\x20found\x20in\x20'+_0x2afd08+_0x5c3e6f(0x29b));}const _0x5a689e=_0x50e78e[_0x5c3e6f(0x2ed)][0x0],_0x426fa1=_0x5a689e['data'](),_0x530353=_0x426fa1[_0x5c3e6f(0x2d5)]||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x530353);const _0x218236=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':_0x5c3e6f(0x2cc),'elo':0x4b0}];let _0x15a97=_0x218236['find'](_0x26ee18=>_0x26ee18['elo']<_0x530353);if(!_0x15a97){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x2afd08+_0x5c3e6f(0x29b));throw new Error(_0x5c3e6f(0x2c4)+_0x2afd08+_0x5c3e6f(0x29b));}console[_0x5c3e6f(0x263)](_0x5c3e6f(0x219)+_0x15a97['name']+'\x20('+_0x15a97['elo']+')'),await updateDoc(doc(db,_0x1b06c2,_0x5a689e['id']),{'eloRating':_0x15a97[_0x5c3e6f(0x2c9)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x2a472e['email']||'admin'}),await addDoc(collection(db,_0x3758d4),{'player':_0xe45986,'previousElo':_0x530353,'newElo':_0x15a97['elo'],'timestamp':serverTimestamp(),'type':_0x5c3e6f(0x30f),'rankAchieved':_0x15a97['name'],'demotedBy':_0x2a472e['email']||_0x5c3e6f(0x3d6),'gameMode':_0x2afd08});try{const {promotionManager:_0x128a2c}=await import('./promotions.js'),_0x2fead0=_0x128a2c['getRankName'](_0x530353),_0x242651=_0x15a97['name'];await _0x128a2c['sendPromotionNotification'](_0x5a689e['id'],_0xe45986,_0x530353,_0x15a97[_0x5c3e6f(0x2c9)],_0x2fead0,_0x242651,'demotion',{'displayName':_0xe45986,'source':'admin','adminUser':_0x2a472e['email'],'ladder':_0x2afd08}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x52f8cb){console[_0x5c3e6f(0x2e5)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x52f8cb);}return alert(_0x5c3e6f(0x1c5)+_0xe45986+'\x20to\x20'+_0x15a97[_0x5c3e6f(0x1b2)]+'\x20('+_0x15a97[_0x5c3e6f(0x2c9)]+')'),currentLadder===_0x2afd08&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x8902a8){console[_0x5c3e6f(0x2e5)]('Error\x20demoting\x20player:',_0x8902a8),alert('Error\x20demoting\x20player:\x20'+_0x8902a8['message']);throw _0x8902a8;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x5a04e5=a4_0x4df989,_0x4b634d=document['getElementById']('demote-form');_0x4b634d&&_0x4b634d[_0x5a04e5(0x2fd)](_0x5a04e5(0x1d5),async _0x2d2146=>{const _0x1639d7=_0x5a04e5;_0x2d2146['preventDefault']();const _0x2a9727=document['getElementById']('demote-username')['value'][_0x1639d7(0x2f2)](),_0xce5db4=document[_0x1639d7(0x396)]('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x2a9727){alert(_0x1639d7(0x225));return;}try{await demotePlayer(_0x2a9727,_0xce5db4),document['getElementById']('demote-modal')['classList']['remove'](_0x1639d7(0x3b6)),document[_0x1639d7(0x338)](_0x1639d7(0x3d4))[_0x1639d7(0x223)]='';}catch(_0xcc6fa5){console['error']('Error\x20in\x20demotion:',_0xcc6fa5);}});});async function setCustomElo(_0x50a72b,_0x59b27f,_0x42b654){const _0x4bb1ea=a4_0x4df989;try{const _0x40cee7=auth['currentUser'];if(!_0x40cee7||!isAdmin(_0x40cee7['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x37b84f=_0x42b654==='D2'?'playersD2':_0x4bb1ea(0x38d),_0x2fd5ee=_0x42b654==='D2'?'eloHistoryD2':'eloHistory',_0x117a4f=collection(db,_0x37b84f),_0x3eb658=query(_0x117a4f,where('username','==',_0x50a72b)),_0x5204ed=await getDocs(_0x3eb658);if(_0x5204ed['empty'])throw new Error(_0x4bb1ea(0x278)+_0x42b654+_0x4bb1ea(0x29b));const _0x143231=_0x5204ed[_0x4bb1ea(0x2ed)][0x0],_0x1e8752=_0x143231['data'](),_0x457257=_0x1e8752['eloRating']||0x4b0,_0x266e6e=writeBatch(db);_0x266e6e['update'](doc(db,_0x37b84f,_0x143231['id']),{'eloRating':_0x59b27f,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x40cee7['email']});const _0x15b4e7=doc(collection(db,_0x2fd5ee));return _0x266e6e['set'](_0x15b4e7,{'player':_0x50a72b,'previousElo':_0x457257,'newElo':_0x59b27f,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x40cee7[_0x4bb1ea(0x36a)],'gameMode':_0x42b654}),await _0x266e6e['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x50a72b+_0x4bb1ea(0x1fb)+_0x457257+_0x4bb1ea(0x3b4)+_0x59b27f,_0x4bb1ea(0x3c8)),currentLadder===_0x42b654&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x459588){console['error'](_0x4bb1ea(0x26a),_0x459588);throw _0x459588;}}async function setUserRole(_0x4e82c,_0x3d2f00,_0x1dd07c){const _0xf595f8=a4_0x4df989;try{const _0x321318=auth[_0xf595f8(0x290)];if(!_0x321318||!isAdmin(_0x321318['email']))throw new Error(_0xf595f8(0x2ff));const _0x5f3af4=_0x3d2f00?_0x3d2f00['trim']():null,_0xbe3ba7=_0x5f3af4?_0x1dd07c||'#808080':null,[_0x404a7e,_0x3d19a2]=await Promise['all']([getDocs(query(collection(db,_0xf595f8(0x38d)),where(_0xf595f8(0x32a),'==',_0x4e82c))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x4e82c)))]),_0x55fddf=[];if(!_0x404a7e['empty'])_0x55fddf[_0xf595f8(0x1de)]({'ref':_0x404a7e['docs'][0x0][_0xf595f8(0x285)],'source':'D1'});if(!_0x3d19a2['empty'])_0x55fddf['push']({'ref':_0x3d19a2[_0xf595f8(0x2ed)][0x0]['ref'],'source':'D2'});if(_0x55fddf['length']===0x0){const [_0x537196,_0x80481f]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where(_0xf595f8(0x32a),'==',_0x4e82c))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x4e82c)))]);if(!_0x537196['empty'])_0x55fddf['push']({'ref':_0x537196['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0x80481f[_0xf595f8(0x241)])_0x55fddf['push']({'ref':_0x80481f['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x55fddf[_0xf595f8(0x206)]===0x0)throw new Error('User\x20\x22'+_0x4e82c+_0xf595f8(0x24f));const _0x129dac=writeBatch(db);_0x55fddf[_0xf595f8(0x2e0)](_0x4c57ec=>{const _0x684016=_0xf595f8;console['log'](_0x684016(0x3d1)+_0x4e82c+'\x20in\x20'+_0x4c57ec['source']),!_0x5f3af4?_0x129dac['update'](_0x4c57ec['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x129dac['update'](_0x4c57ec[_0x684016(0x285)],{'roleName':_0x5f3af4,'roleColor':_0xbe3ba7,'roleAssignedBy':_0x321318[_0x684016(0x36a)],'roleAssignedAt':serverTimestamp()});}),await _0x129dac['commit']();const _0x50fd05=_0x5f3af4?_0xf595f8(0x324)+_0x5f3af4+'\x22\x20set':_0xf595f8(0x24e);return showNotification(_0x50fd05+'\x20for\x20user\x20\x22'+_0x4e82c+'\x22','success'),!![];}catch(_0xe45e0e){console['error']('Error\x20setting\x20user\x20role:',_0xe45e0e),showNotification('Error:\x20'+_0xe45e0e[_0xf595f8(0x1e7)],'error');throw _0xe45e0e;}}function showNotification(_0x3ab25d,_0x2d9498='info'){const _0x4a088f=a4_0x4df989,_0x15b431=document[_0x4a088f(0x274)]('div');_0x15b431['className']='notification\x20'+_0x2d9498,_0x15b431[_0x4a088f(0x3c0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x2d9498)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x3ab25d+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x15b431),setTimeout(()=>{const _0x41327b=_0x4a088f;_0x15b431[_0x41327b(0x1cf)]['add']('active');},0xa);const _0x4b98b0=setTimeout(()=>{closeNotification(_0x15b431);},0x1388);_0x15b431[_0x4a088f(0x396)]('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x4b98b0),closeNotification(_0x15b431);});}function getNotificationIcon(_0x36a5c6){const _0x13cc75=a4_0x4df989;switch(_0x36a5c6){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case'info':default:return _0x13cc75(0x228);}}function closeNotification(_0x45caba){_0x45caba['classList']['remove']('active'),setTimeout(()=>{const _0x5f0bd9=a4_0x3018;_0x45caba[_0x5f0bd9(0x321)]();},0x12c);}function setupUserRolesSection(){const _0x208cfe=a4_0x4df989,_0x21c390=document['getElementById'](_0x208cfe(0x311));_0x21c390&&_0x21c390[_0x208cfe(0x2fd)]('click',function(){const _0x154824=_0x208cfe;this[_0x154824(0x1cf)][_0x154824(0x245)](_0x154824(0x3be)),this['innerHTML']=_0x154824(0x222),loadUsersWithRoles()[_0x154824(0x1bd)](()=>{const _0x3e11d9=_0x154824;this['classList']['remove'](_0x3e11d9(0x3be)),this[_0x3e11d9(0x3c0)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x1dcae9=>{const _0x1c11b1=_0x154824;console[_0x1c11b1(0x2e5)](_0x1c11b1(0x254),_0x1dcae9),this['classList']['remove']('loading'),this['innerHTML']=_0x1c11b1(0x3bf),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0xc1ded6=document[_0x208cfe(0x338)]('add-new-role-btn');_0xc1ded6&&_0xc1ded6[_0x208cfe(0x2fd)]('click',()=>{const _0x4aa4c6=_0x208cfe,_0x467824=document[_0x4aa4c6(0x338)]('set-role-modal');_0x467824&&_0x467824['classList']['add']('active');});const _0x4c0a03=document['getElementById'](_0x208cfe(0x1dc));_0x4c0a03&&_0x4c0a03['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x1e92fd=document[_0x208cfe(0x338)]('role-filter');_0x1e92fd&&_0x1e92fd['addEventListener'](_0x208cfe(0x266),filterUsersTable);}async function loadUsersWithRoles(){const _0x5bff02=a4_0x4df989,_0x29237b=document[_0x5bff02(0x338)]('users-table-body');if(!_0x29237b)return;_0x29237b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x24180e,_0x340243,_0x1c8e3e,_0x1fb735]=await Promise['all']([getDocs(collection(db,_0x5bff02(0x38d))),getDocs(collection(db,_0x5bff02(0x3f6))),getDocs(collection(db,_0x5bff02(0x3e6))),getDocs(collection(db,_0x5bff02(0x20d)))]),_0x51d973=new Map();function _0x59f87a(_0x477ef4,_0x157ad6){_0x477ef4['forEach'](_0x988a57=>{const _0xdeef8d=a4_0x3018,_0x5bd8a6=_0x988a57['data']();if(!_0x5bd8a6[_0xdeef8d(0x32a)])return;if(!_0x51d973['has'](_0x5bd8a6[_0xdeef8d(0x32a)]))_0x51d973['set'](_0x5bd8a6[_0xdeef8d(0x32a)],{'username':_0x5bd8a6['username'],'roleName':_0x5bd8a6['roleName']||null,'roleColor':_0x5bd8a6['roleColor']||null,'roleAssignedBy':_0x5bd8a6[_0xdeef8d(0x29c)]||null,'roleAssignedAt':_0x5bd8a6['roleAssignedAt']||null,'sources':[_0x157ad6]});else{const _0x4f236d=_0x51d973['get'](_0x5bd8a6['username']);_0x5bd8a6['roleName']&&(!_0x4f236d[_0xdeef8d(0x38c)]||_0x157ad6==='D1'||_0x157ad6==='D2')&&(_0x4f236d['roleName']=_0x5bd8a6['roleName'],_0x4f236d[_0xdeef8d(0x242)]=_0x5bd8a6['roleColor'],_0x4f236d[_0xdeef8d(0x29c)]=_0x5bd8a6['roleAssignedBy'],_0x4f236d['roleAssignedAt']=_0x5bd8a6['roleAssignedAt']),!_0x4f236d[_0xdeef8d(0x1e8)][_0xdeef8d(0x1b0)](_0x157ad6)&&_0x4f236d['sources'][_0xdeef8d(0x1de)](_0x157ad6);}});}_0x59f87a(_0x24180e,'D1'),_0x59f87a(_0x340243,'D2'),_0x59f87a(_0x1c8e3e,'Non-Participant'),_0x59f87a(_0x1fb735,'Profile');const _0x4c9d30=Array['from'](_0x51d973[_0x5bff02(0x3a0)]())['sort']((_0x3bfb83,_0x417ad0)=>_0x3bfb83['username']['localeCompare'](_0x417ad0['username']));if(_0x4c9d30['length']===0x0){_0x29237b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x29237b['innerHTML']='',_0x4c9d30['forEach'](_0x1ec1e5=>{const _0x59bebd=_0x5bff02,_0x3921f6=document['createElement']('tr');_0x3921f6['dataset']['username']=_0x1ec1e5['username'],_0x3921f6['dataset']['roleName']=_0x1ec1e5[_0x59bebd(0x38c)]||'',_0x3921f6['dataset']['roleColor']=_0x1ec1e5['roleColor']||'#808080';const _0x2b9dd0=_0x1ec1e5['roleAssignedAt']?new Date(_0x1ec1e5['roleAssignedAt'][_0x59bebd(0x3a6)]*0x3e8)[_0x59bebd(0x2f9)]():_0x59bebd(0x1d8),_0x38a706=_0x1ec1e5['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x1ec1e5[_0x59bebd(0x242)]+_0x59bebd(0x28e)+getContrastColor(_0x1ec1e5['roleColor'])+_0x59bebd(0x224)+_0x1ec1e5['roleName']+_0x59bebd(0x213):_0x59bebd(0x260);_0x3921f6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1ec1e5['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x1ec1e5[_0x59bebd(0x1e8)]['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x38a706+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1ec1e5[_0x59bebd(0x29c)]||'N/A')+_0x59bebd(0x261)+_0x2b9dd0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x1ec1e5['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1ec1e5[_0x59bebd(0x38c)]?_0x59bebd(0x386)+_0x1ec1e5[_0x59bebd(0x32a)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x29237b['appendChild'](_0x3921f6);}),document[_0x5bff02(0x1af)](_0x5bff02(0x273))['forEach'](_0x34cf24=>{_0x34cf24['addEventListener']('click',()=>{const _0xbd003f=_0x34cf24['dataset']['username'];openRoleEditModal(_0xbd003f);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x565cec=>{const _0x38ea21=_0x5bff02;_0x565cec[_0x38ea21(0x2fd)]('click',()=>{const _0x5b6237=_0x38ea21,_0x401d15=_0x565cec['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x401d15+'?')&&setUserRole(_0x401d15,null,null)['then'](()=>loadUsersWithRoles())[_0x5b6237(0x31d)](_0x5bd717=>console['error']('Error\x20removing\x20role:',_0x5bd717));});});}catch(_0x42d593){console[_0x5bff02(0x2e5)]('Error\x20loading\x20users:',_0x42d593),_0x29237b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x13b7ba){const _0x584b0e=a4_0x4df989;console['log'](_0x584b0e(0x32f),_0x13b7ba);const _0x4d1680=document['getElementById']('set-role-modal'),_0x3bdaad=document['getElementById'](_0x584b0e(0x1b9)),_0x19493c=document['getElementById'](_0x584b0e(0x2ca));if(!_0x4d1680){console[_0x584b0e(0x2e5)](_0x584b0e(0x238)),alert(_0x584b0e(0x2a4));return;}console['log']('Modal\x20element\x20found:',_0x4d1680);_0x3bdaad?(_0x3bdaad['value']=_0x13b7ba,console['log']('Username\x20input\x20set\x20to:\x20'+_0x13b7ba)):console[_0x584b0e(0x2c2)]('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x2d961a=document[_0x584b0e(0x396)]('#users-table-body\x20tr[data-username=\x22'+_0x13b7ba+'\x22]');if(_0x2d961a&&_0x19493c){const _0x2485c0=_0x2d961a['dataset']['role'];_0x19493c['value']=_0x2485c0==='none'?'':_0x2485c0,console['log'](_0x584b0e(0x1f0)+_0x19493c['value']+_0x584b0e(0x3f3)+_0x2485c0+')');}else{if(!_0x2d961a)console['warn']('Table\x20row\x20for\x20user\x20'+_0x13b7ba+'\x20not\x20found.');if(!_0x19493c)console[_0x584b0e(0x2c2)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x19493c)_0x19493c[_0x584b0e(0x223)]='';}console[_0x584b0e(0x263)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x4d1680['classList']['add'](_0x584b0e(0x3b6));const _0x3e8575=document['getElementById']('cancel-role-btn');_0x3e8575?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x3e8575['removeEventListener'](_0x584b0e(0x1d1),closeModalHandler),_0x3e8575[_0x584b0e(0x2fd)]('click',closeModalHandler)):console['warn'](_0x584b0e(0x3e1)),console['log']('Attaching\x20background\x20click\x20listener.'),_0x4d1680['removeEventListener']('click',closeModalBackgroundHandler),_0x4d1680['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x33a4a1){_0x33a4a1['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x55cd7c=a4_0x4df989,_0x25ddd5=document[_0x55cd7c(0x338)]('set-role-modal');_0x25ddd5&&(_0x25ddd5['classList']['remove']('active'),_0x25ddd5['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x261698=a4_0x4df989,_0x10324a=document['getElementById'](_0x261698(0x1dc))?.['value']['toLowerCase']()||'',_0x3b6525=document['getElementById']('role-filter')?.['value']||'all',_0x205602=document['querySelectorAll']('#users-table-body\x20tr');let _0xcc90ea=0x0;_0x205602['forEach'](_0x16693b=>{const _0x3b679f=_0x261698;if(_0x16693b['querySelector'](_0x3b679f(0x1f7))||_0x16693b['querySelector'](_0x3b679f(0x322))||_0x16693b['querySelector']('.error-state'))return;const _0x3a7958=_0x16693b['dataset']['username']?.[_0x3b679f(0x1fc)]()||'',_0x8bfd48=_0x16693b['dataset']['role']||'none',_0x522431=_0x3a7958[_0x3b679f(0x1b0)](_0x10324a),_0x4b3cb=_0x3b6525==='all'||_0x8bfd48===_0x3b6525;_0x522431&&_0x4b3cb?(_0x16693b['style']['display']='',_0xcc90ea++):_0x16693b['style']['display']=_0x3b679f(0x270);});if(_0xcc90ea===0x0&&_0x205602['length']>0x0){const _0x58f840=document['getElementById']('users-table-body');if(_0x58f840){if(!_0x58f840[_0x261698(0x396)](_0x261698(0x361))){const _0x5a3a53=document[_0x261698(0x274)]('tr');_0x5a3a53[_0x261698(0x1cf)]['add']('no-results'),_0x5a3a53['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x58f840['appendChild'](_0x5a3a53);}}}else{const _0x1a73aa=document[_0x261698(0x396)](_0x261698(0x361));_0x1a73aa&&_0x1a73aa['remove']();}}function setupManageArticlesSection(){const _0x5814d7=a4_0x4df989,_0x3dbd9c=document['getElementById']('load-articles-data');_0x3dbd9c&&_0x3dbd9c['addEventListener']('click',function(){const _0x28cbe8=a4_0x3018;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x28cbe8(0x1bd)](()=>{const _0x36606e=_0x28cbe8;this[_0x36606e(0x1cf)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x445f70=>{const _0x48b7a2=_0x28cbe8;console['error']('Error\x20loading\x20articles:',_0x445f70),this['classList'][_0x48b7a2(0x321)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5cbc9b=_0x48b7a2;this['innerHTML']=_0x5cbc9b(0x22a);},0xbb8);});});const _0xa7d930=document['getElementById']('create-new-article-btn');_0xa7d930?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0xa7d930['style']['display']='block',_0xa7d930['addEventListener'](_0x5814d7(0x1d1),()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x2076c6=document['getElementById']('article-form');_0x2076c6&&_0x2076c6['addEventListener'](_0x5814d7(0x1d5),_0xcbe603=>{_0xcbe603['preventDefault'](),saveArticle();});const _0x3c4ff8=document['getElementById'](_0x5814d7(0x272));_0x3c4ff8&&_0x3c4ff8[_0x5814d7(0x2fd)]('click',()=>{closeArticleModal();});const _0x294d14=document[_0x5814d7(0x396)](_0x5814d7(0x3d8));_0x294d14&&_0x294d14['addEventListener']('click',()=>{closeArticleModal();});const _0x53bbdd=document['getElementById'](_0x5814d7(0x28c));_0x53bbdd&&_0x53bbdd[_0x5814d7(0x2fd)]('click',_0x2ccd1f=>{_0x2ccd1f['target']===_0x53bbdd&&closeArticleModal();});}async function loadArticles(){const _0x301f78=a4_0x4df989,_0x6e14d6=document['getElementById'](_0x301f78(0x296));if(!_0x6e14d6)return;_0x6e14d6['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x2518df=collection(db,'articles'),_0x4e5d76=query(_0x2518df,orderBy('createdAt',_0x301f78(0x1bf))),_0x2feb1c=await getDocs(_0x4e5d76);if(_0x2feb1c['empty']){_0x6e14d6[_0x301f78(0x3c0)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x6e14d6['innerHTML']='',_0x2feb1c['forEach'](_0x2f7665=>{const _0xa5384c=_0x301f78,_0x1d2c7b=_0x2f7665[_0xa5384c(0x376)](),_0x101d57=document[_0xa5384c(0x274)]('tr'),_0x58bd9c=_0x1d2c7b['createdAt']?new Date(_0x1d2c7b['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x101d57['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1d2c7b['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1d2c7b['author']||'Unknown')+_0xa5384c(0x261)+_0x58bd9c+_0xa5384c(0x3ce)+_0x2f7665['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x2f7665['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x6e14d6['appendChild'](_0x101d57);}),setupArticleActionButtons();}catch(_0x1d5407){console['error']('Error\x20loading\x20articles:',_0x1d5407),_0x6e14d6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x1d5407[_0x301f78(0x1e7)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x4e5c27=a4_0x4df989;document['querySelectorAll'](_0x4e5c27(0x31a))['forEach'](_0x38c507=>{_0x38c507['addEventListener']('click',async _0x567bb1=>{const _0x1772fa=_0x567bb1['currentTarget']['dataset']['id'];openArticleModal(_0x1772fa);});}),document['querySelectorAll']('.delete-article-btn')[_0x4e5c27(0x2e0)](_0x3215f0=>{_0x3215f0['addEventListener']('click',async _0x42e81c=>{const _0x54c581=_0x42e81c['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x54c581);});});}function openArticleModal(_0x28628b=null){const _0x44c304=a4_0x4df989,_0x539f64=document['getElementById']('article-modal'),_0x1df334=document[_0x44c304(0x338)](_0x44c304(0x291)),_0x1e42c3=document['getElementById']('article-form'),_0x62347d=document['getElementById'](_0x44c304(0x279));_0x1e42c3['reset'](),_0x62347d[_0x44c304(0x223)]='';if(_0x28628b)_0x1df334[_0x44c304(0x2a2)]='Edit\x20Article',_0x62347d['value']=_0x28628b,loadArticleData(_0x28628b);else{_0x1df334[_0x44c304(0x2a2)]=_0x44c304(0x1d4);const _0x454fb2=auth[_0x44c304(0x290)];if(_0x454fb2){const _0x386b44=document['getElementById']('article-author');if(_0x386b44&&_0x454fb2[_0x44c304(0x3a9)])_0x386b44['value']=_0x454fb2[_0x44c304(0x3a9)];else _0x386b44&&(_0x386b44['value']=_0x454fb2['email']);}}_0x539f64['classList']['add'](_0x44c304(0x3b6));}async function loadArticleData(_0x310cbd){const _0x161d20=a4_0x4df989;try{const _0x2e519a=doc(db,'articles',_0x310cbd),_0x148e95=await getDoc(_0x2e519a);if(!_0x148e95[_0x161d20(0x39b)]()){showNotification('Article\x20not\x20found','error');return;}const _0x23c535=_0x148e95[_0x161d20(0x376)]();document[_0x161d20(0x338)]('article-title')['value']=_0x23c535['title']||'',document['getElementById']('article-author')['value']=_0x23c535['author']||'',document[_0x161d20(0x338)]('article-image-url')['value']=_0x23c535[_0x161d20(0x3ba)]||'',document['getElementById']('article-content')['value']=_0x23c535['content']||'';}catch(_0x4d706e){console['error']('Error\x20loading\x20article\x20data:',_0x4d706e),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x4aa55f=a4_0x4df989;try{const _0x319222=document[_0x4aa55f(0x338)]('article-id')['value'],_0x4f7e56=document['getElementById']('article-title')[_0x4aa55f(0x223)][_0x4aa55f(0x2f2)](),_0x3832f9=document['getElementById'](_0x4aa55f(0x33c))[_0x4aa55f(0x223)]['trim'](),_0xbbe2d4=document['getElementById'](_0x4aa55f(0x2f7))['value']['trim'](),_0x140b9d=document['getElementById'](_0x4aa55f(0x1d3))['value'][_0x4aa55f(0x2f2)]();if(!_0x4f7e56||!_0x140b9d){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x1e5c1a=auth[_0x4aa55f(0x290)];if(!_0x1e5c1a){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x2b0b4e={'title':_0x4f7e56,'author':_0x3832f9,'imageUrl':_0xbbe2d4||null,'content':_0x140b9d,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1e5c1a['email']};!_0x319222?(_0x2b0b4e['createdAt']=serverTimestamp(),_0x2b0b4e[_0x4aa55f(0x203)]=_0x1e5c1a['email'],await addDoc(collection(db,'articles'),_0x2b0b4e),showNotification('Article\x20created\x20successfully',_0x4aa55f(0x3c8))):(await updateDoc(doc(db,'articles',_0x319222),_0x2b0b4e),showNotification('Article\x20updated\x20successfully',_0x4aa55f(0x3c8))),closeArticleModal(),loadArticles();}catch(_0x23d80e){console['error']('Error\x20saving\x20article:',_0x23d80e),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x23d80e[_0x4aa55f(0x1e7)],_0x4aa55f(0x2e5));}}function closeArticleModal(){const _0x2c5c92=a4_0x4df989,_0x2709d7=document['getElementById']('article-modal');_0x2709d7&&_0x2709d7[_0x2c5c92(0x1cf)]['remove']('active');}async function confirmDeleteArticle(_0x54c484){const _0x57d7a2=a4_0x4df989;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x57d7a2(0x3ee),_0x54c484)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x57d7a2(0x3c8));}catch(_0x1ccf45){console['error']('Error\x20deleting\x20article:',_0x1ccf45),showNotification(_0x57d7a2(0x3bc)+_0x1ccf45['message'],_0x57d7a2(0x2e5));}}function setupTrophyManagementSection(){const _0x2e246c=a4_0x4df989,_0x40d330=document['getElementById']('load-trophies-data');_0x40d330&&_0x40d330[_0x2e246c(0x2fd)](_0x2e246c(0x1d1),function(){const _0x33761a=_0x2e246c;this['classList'][_0x33761a(0x245)]('loading'),this[_0x33761a(0x3c0)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x304669=document[_0x33761a(0x338)]('assign-trophy-image');_0x304669&&(_0x304669['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x515cb1=_0x33761a;this[_0x515cb1(0x1cf)]['remove'](_0x515cb1(0x3be)),this['innerHTML']=_0x515cb1(0x1ce);})[_0x33761a(0x31d)](_0xb66832=>{const _0x2987d9=_0x33761a;console['error']('Error\x20loading\x20trophies:',_0xb66832),this[_0x2987d9(0x1cf)]['remove']('loading'),this['innerHTML']=_0x2987d9(0x3bf),setTimeout(()=>{const _0x1e8f88=_0x2987d9;this[_0x1e8f88(0x3c0)]=_0x1e8f88(0x1ce);},0xbb8);});});const _0x21efdb=document['getElementById']('create-new-trophy-btn');_0x21efdb&&_0x21efdb['addEventListener'](_0x2e246c(0x1d1),()=>{openTrophyModal();});const _0x3a8e23=document['getElementById']('trophy-form');_0x3a8e23&&_0x3a8e23['addEventListener']('submit',_0x31f6e4=>{_0x31f6e4['preventDefault'](),saveTrophyDefinition();});const _0x501068=document[_0x2e246c(0x338)]('cancel-trophy-btn');_0x501068&&_0x501068['addEventListener']('click',()=>{closeTrophyModal();});document[_0x2e246c(0x1af)](_0x2e246c(0x28b))[_0x2e246c(0x2e0)](_0x50e8de=>{_0x50e8de['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x68a842=document[_0x2e246c(0x338)]('trophy-modal');_0x68a842&&_0x68a842[_0x2e246c(0x2fd)](_0x2e246c(0x1d1),_0x3f71bf=>{_0x3f71bf['target']===_0x68a842&&closeTrophyModal();});const _0x4a739b=document['getElementById']('assign-trophy-modal');_0x4a739b&&_0x4a739b[_0x2e246c(0x2fd)](_0x2e246c(0x1d1),_0x3eb0fb=>{_0x3eb0fb['target']===_0x4a739b&&closeAssignTrophyModal();});const _0x1c1588=document['getElementById'](_0x2e246c(0x2cd));_0x1c1588&&_0x1c1588[_0x2e246c(0x2fd)](_0x2e246c(0x1d5),_0x136538=>{const _0x154200=_0x2e246c;_0x136538[_0x154200(0x21a)](),assignTrophyToPlayer();});const _0x3773d9=document['getElementById']('cancel-assign-btn');_0x3773d9&&_0x3773d9['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x42ea8f=document['getElementById'](_0x2e246c(0x310));_0x42ea8f&&(_0x42ea8f[_0x2e246c(0x2fd)](_0x2e246c(0x281),updateTrophyImagePreview),_0x42ea8f['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function a4_0x3599(){const _0x1c09cc=['Could\x20not\x20find\x20player\x20documents','rgba(255,\x20255,\x20255,\x200.1)','Player\x20\x22','querySelectorAll','includes','Error\x20updating\x20points:','name','Starting\x20complete\x20match\x20resimulation...','size','Monday','Unknown','assign-trophy-title','adminEmail','role-username','edit-highlight-loserScore-input','Creator\x20highlight\x20button\x20clicked','body','then','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','desc','input[name=\x22test-match-ladder\x22]','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','\x20ladder,\x20page\x20','edit-highlight-mapVersion-input','Setting\x20up\x20Manage\x20Ribbons\x20section','Successfully\x20demoted\x20','playerId','firstVisible','playerRibbonsD3','getRankName','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','edit-wins','bar','User\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','classList','data-id','click','visibility','article-content','Create\x20Article','submit','eloHistoryD2','ribbon-level','N/A','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','mapCreator','Load\x20articles\x20data\x20clicked','user-search','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','push','Points\x20data\x20loaded\x20successfully','highlight-submitted-by','promote-ladder','getComputedStyle','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','edit-match-winner-comment','highlight-video-id','resimulate-modal','message','sources','elo-history-search','quick-edit-user-id','common','mapName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','appendChild','Role\x20select\x20set\x20to:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','lastVisible','points-user-search','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','highlight-modal-title','description','.loading-cell','manage-trophies','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','location','\x20was\x20updated\x20from\x20','toLowerCase','Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','edit-match-winner-suicides','inactive-players-table-body','Error\x20searching\x20for\x20user','Error\x20initializing\x20dashboard:','Initializing\x20points\x20field\x20for\x20user\x20','createdBy','Achievement\x20highlight\x20button\x20clicked','split','length','load-players-data','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','Error\x20finding\x20match:','points-asc','-page-indicator','Create\x20test\x20match\x20form\x20not\x20found','userProfiles','Error\x20loading\x20points\x20data:','highlight-match-link-container','selected-user-points','#CD7F32','createdAt','</span>','highlight-match-date-container','Modal\x20computed\x20styles:','matches-start-date','fromDate','submittedBy','Demoting\x20player\x20to\x20','preventDefault','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','migrate-points-btn','highlight-modal','dashboard','Remove\x20','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','value',';\x22>','Please\x20enter\x20a\x20username','join','.edit-ribbons-btn','fa-info-circle','.close-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','\x20already\x20exists\x20in\x20','Modal\x20setup\x20complete','edit-match-loser-comment','</td></tr>','trophy-preview-img','edit-match-winner-demo','.form-group','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','#e0e0e0','edit-match-loser-demo','achievement','mapVersion','ladder','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','loading-cell','style','.edit-trophy-btn','#matches-table-body\x20tr','Attempting\x20to\x20promote\x20','daysSinceMatch','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','empty','roleColor','Found\x20','add-player-form','add','currentTarget','\x22\x20already\x20has\x20this\x20trophy','loserScore','lastMatch','cloneNode','Dashboard\x20data\x20loaded\x20successfully','initial_placement','YouTube\x20Video\x20ID*','Role\x20removed','\x22\x20not\x20found\x20in\x20any\x20collection','trophies-table-body','src','highlight-map-version','Error\x20loading\x20ELO\x20history:','Error\x20loading\x20users:','cancel-edit-btn','Match\x20ID\x20is\x20required','approvedMatchesD2','role-color','winnerUsername','Setting\x20up\x20highlight\x20buttons','setHours','\x20already\x20has\x20points:\x20','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','Error\x20saving\x20trophy:','winnerName','<span\x20class=\x22no-role\x22>None</span>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-title','log','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','console','change','highlight-map-creator-container','manage-points','rarity','Error\x20setting\x20custom\x20ELO:','Failed\x20to\x20save\x20match:\x20','doughnut','Highlight\x20deleted\x20successfully','current-ladder-display','updatedAt','none','awardedAt','cancel-article-btn','.edit-role-btn','createElement','Error\x20deleting\x20highlight:\x20','Sidebar\x20navigation\x20initialized\x20with\x20permissions','Promotion','Player\x20not\x20found\x20in\x20','article-id','demoLink','Never','stopPropagation','set-role-modal','match-details-container','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','edit-elo','input','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','user-roles-section','highlight-map-creator','ref','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','User\x20Profiles','toString','loss','update','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','article-modal','Found\x20user\x20in\x20',';\x20color:\x20','Failed\x20to\x20delete\x20player:\x20','currentUser','article-modal-title','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','modifiedBy','set-elo-modal','Error\x20resimulating\x20match:','articles-table-body','set','player-count','className','Invalid\x20action','\x20ladder','roleAssignedBy','Switched\x20to\x20','Inactive\x20players\x20section\x20initialized','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','Found\x20specific\x20role:\x20','Set\x20to\x20','textContent','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','quick-edit-points-modal','data-section','pendingMatchesD2','#ffffff','DOMContentLoaded','Friday','Modal\x20cancel\x20button\x20clicked','Create\x20New\x20','testFirebaseConnection','demotedBy','Error\x20resolving\x20username\x20for\x20','Error\x20adding\x20player:\x20','Error\x20promoting\x20player:','Load\x20users\x20data\x20clicked','1200','moderately-inactive','edit-player-modal','Creating\x20test\x20match\x20without\x20player\x20validation...','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','loserUsername','Toggling\x20fields\x20for\x20highlight\x20type:\x20','data-match-id','Error\x20saving\x20match:','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','matchInfo','allUsersPoints','timestamp','dataset','warn','selected-user-id','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','Error\x20opening\x20edit\x20modal:','manage-articles','trophy-rarity\x20','wins','elo','user-role','block','Unranked','assign-trophy-form','keys','trophy-description','approvedMatchesD3','activity-chart','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','achievementDetails','create-test-match-form','eloRating','D3\x20Players','Error','warning','endDate','Failed\x20to\x20find\x20match:\x20','opponent','\x20users...','promote-username','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','forEach','Modal\x20background\x20clicked','approvedMatches','validation-results-container','achievementType','error','display','confirmResimulateMatch','achievementPlayer','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','MAX_SAFE_INTEGER','Emerald','activity','docs','cells','return\x20(function()\x20','history-type-filter','current-ribbons-list','trim','creatorImageUrl','Firebase\x20connection\x20test\x20successful!','Match\x20deleted\x20successfully','highlight-creator-image','article-image-url','Quick\x20edit\x20form\x20not\x20found!','toLocaleDateString','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','promote-modal','addEventListener','5px','Unauthorized:\x20Admin\x20access\x20required','Create\x20New\x20Trophy','Error\x20loading\x20trophy\x20data:','rankDistribution','.edit-btn','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','load-ribbons-data','d2-prev-page','\x20quick\x20edit\x20buttons','previousElo','right','Error\x20applying\x20filters:','startDate','winnerSuicides','edit-highlight-matchDate-input','Failed\x20to\x20load\x20trophy\x20data','demotion','trophy-image-url','load-users-data','Quick\x20edit\x20form\x20submitted','Loser\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','Username\x20is\x20missing','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','info','points','ribbon-type-select','.edit-article-btn','openResimulateModal','apply-matches-filters','catch','highlight-match-info-container','title','\x20inactive\x20players','remove','.empty-state','target','Role\x20\x22','required','\x20vs\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','Match\x20not\x20found','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','username','highlight-winner-score','backgroundColor','prototype','trophy-form','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','playerProfileUrl','admin_modification','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','.view-history-btn','highlight-description','.admin-section','Error\x20loading\x20inactive\x20players:','points-sort-order','getElementById','matches-search','Highlight\x20updated\x20successfully!','.form-group,\x20.form-row','article-author','modify-points-form','match','toLocaleString','Error\x20updating\x20player:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','Match\x20ID\x20or\x20ladder\x20missing','Setting\x20up\x20Manage\x20Highlights\x20section','input[name=\x22assign-ladder\x22]:checked','\x20(from\x20','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#000000','has','#C0C0C0','winnerScore','opacity','highlight-achievement-type','Subtracted\x20','Searching\x20for\x20player\x20in\x20','highlight-achievement-details','high-points','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','\x20view\x20history\x20buttons','subtract','.error-state','Wednesday','ribbon-target-user','removeEventListener','newElo','pointsHistory','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','Error\x20creating\x20simple\x20test\x20match:','position','edit-highlight-playerProfileUrl-input','matches-next-page','type','.no-results','edit-highlight-type-select','apply','quick-edit-points-form','eloHistoryD3','error-state','mapPlayed','playersD3','\x20before\x20match:\x20','email','User\x20not\x20found','.delete-trophy-btn','asc','uid','matchDate','#28a745','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20Weekly\x20Activity','load-elo-history-data','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','Error\x20loading\x20ribbons:','data','pendingMatchesD3','Highlight\x20created\x20successfully!','filter','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','.nav-item','sort','Error\x20deleting\x20match:','flex','No\x20email','edit-highlight-achievementPlayer-input','trophy-rarity','manage-matches','\x20\x20','reset','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','visible','highlight-match-info','No\x20users\x20needed\x20points\x20field\x20initialization','highlight-achievement-image-container','\x20ladder!','roleName','players','trophy-image-preview','Edit\x20match\x20clicked:','substring','Modal\x20should\x20now\x20be\x20visible','constructor','manage-ranks','Silver','highlights-table-body','querySelector','Auth:','edit-match-loser-suicides','creator','edit-username','exists','#1976d2','set-elo-ladder','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','replaceChild','values','load-articles-data','https://www.youtube.com/embed/','userId','rgba(211,\x2047,\x2047,\x200.7)','Create\x20test\x20match\x20button\x20clicked','seconds','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','highlight-achievement-image','displayName','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','\x20not\x20found\x20in\x20any\x20ladder','Failed\x20to\x20load\x20user\x20data:\x20','resimulate-match-id','match-count','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','No\x20user\x20ID\x20found\x20on\x20button','\x20-\x20','\x20Exists','\x20to\x20','localeCompare','active','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','confirm-resimulate-btn','approvedAt','imageUrl','manage-highlights','Failed\x20to\x20delete\x20article:\x20','Found\x20radio\x20with\x20value:','loading','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','innerHTML','div',',\x20giving\x20default\x20access','./ladderalgorithm.js','Error\x20adding\x20ribbon:','Queued\x20','assign-trophy-name','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','success','Page\x20','matchLink','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-winner-name','edit-highlight-videoId-input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','Modal\x20element\x20not\x20found!','Trophy\x20updated\x20successfully','Updating\x20role\x20for\x20','.close','Unknown\x20User','demote-username','RejectedD2','admin','elo-history-table-body','#article-modal\x20.close-btn','page','Load\x20players\x20data\x20clicked','manage-players','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','\x20history\x20entries\x20for\x20user\x20','date','highlights','Found\x20player\x20with\x20current\x20ELO:\x20','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','Page\x201','create-test-match-modal','promotion','Gold','nonParticipants','Failed\x20to\x20delete\x20trophy:\x20','edit-losses','disabled','hidden','Matches\x20action\x20buttons\x20setup\x20complete','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','Defaulted\x20to\x20D1\x20ladder','articles','ribbons','all','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','eloHistory','\x20(based\x20on\x20data-role:\x20','assign-trophy-modal','cancel-highlight-btn','playersD2'];a4_0x3599=function(){return _0x1c09cc;};return a4_0x3599();}function updateTrophyImagePreview(){const _0x432d07=a4_0x4df989,_0x3d5cbc=document['getElementById'](_0x432d07(0x310))['value'][_0x432d07(0x2f2)](),_0x58eb79=document[_0x432d07(0x338)](_0x432d07(0x38e));if(!_0x58eb79){const _0x554a93=document['getElementById']('trophy-image-url')['closest'](_0x432d07(0x231)),_0x5ac638=document['createElement']('div');_0x5ac638['id']='trophy-image-preview',_0x5ac638['className']='trophy-preview-container',_0x554a93['appendChild'](_0x5ac638);const _0x5270b1=document['createElement']('img');_0x5270b1['id']='trophy-preview-img',_0x5270b1['alt']='Trophy\x20Preview',_0x5270b1['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x5ac638[_0x432d07(0x1ef)](_0x5270b1);}const _0x43b7aa=document[_0x432d07(0x338)]('trophy-preview-img');_0x3d5cbc?(_0x43b7aa['src']=_0x3d5cbc,_0x43b7aa['style']['display']='block',_0x43b7aa[_0x432d07(0x1cf)][_0x432d07(0x321)](_0x432d07(0x2e5))):(_0x43b7aa['src']=DEFAULT_TROPHY_IMAGE,_0x43b7aa['style']['display']='block');}async function loadTrophyDefinitions(){const _0x12ed20=a4_0x4df989,_0x271f7d=document['getElementById'](_0x12ed20(0x250));if(!_0x271f7d)return;_0x271f7d['innerHTML']=_0x12ed20(0x292);try{const _0x1ea706=collection(db,'trophyDefinitions'),_0x4df1c7=query(_0x1ea706,orderBy('createdAt','desc')),_0x11a359=await getDocs(_0x4df1c7);if(_0x11a359['empty']){_0x271f7d['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x271f7d['innerHTML']='',_0x11a359[_0x12ed20(0x2e0)](_0x441cef=>{const _0x330fd2=_0x12ed20,_0x527d8e=_0x441cef['data'](),_0x2795ab=document['createElement']('tr'),_0x21f3de=_0x527d8e['createdAt']?new Date(_0x527d8e[_0x330fd2(0x212)]['seconds']*0x3e8)[_0x330fd2(0x33f)]():'N/A';_0x2795ab['innerHTML']=_0x330fd2(0x1ed)+(_0x527d8e['image']||DEFAULT_TROPHY_IMAGE)+_0x330fd2(0x240)+_0x527d8e[_0x330fd2(0x1b2)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+_0x330fd2(0x332)+(_0x527d8e['name']||'Untitled\x20Trophy')+_0x330fd2(0x37a)+(_0x527d8e['rarity']||'common')+'\x22>'+(_0x527d8e['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21f3de+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x441cef['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x441cef['id']+_0x330fd2(0x1be)+_0x441cef['id']+_0x330fd2(0x1d9),_0x271f7d['appendChild'](_0x2795ab);}),setupTrophyActionButtons();}catch(_0x27a3aa){console[_0x12ed20(0x2e5)]('Error\x20loading\x20trophy\x20definitions:',_0x27a3aa),_0x271f7d[_0x12ed20(0x3c0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x27a3aa['message']+_0x12ed20(0x1f9);}}function setupTrophyActionButtons(){const _0x1384cb=a4_0x4df989;document['querySelectorAll'](_0x1384cb(0x23c))['forEach'](_0x1a3c37=>{const _0x550658=_0x1384cb;_0x1a3c37[_0x550658(0x2fd)]('click',_0x3290eb=>{const _0x3c9aa6=_0x3290eb['currentTarget']['dataset']['id'];openTrophyModal(_0x3c9aa6);});}),document[_0x1384cb(0x1af)]('.assign-trophy-btn')['forEach'](_0x576048=>{_0x576048['addEventListener']('click',_0x42b8be=>{const _0x44a5c6=_0x42b8be['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x44a5c6);});}),document['querySelectorAll'](_0x1384cb(0x36c))['forEach'](_0x3309b8=>{_0x3309b8['addEventListener']('click',_0xd3732e=>{const _0x5e215=_0xd3732e['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x5e215);});});}function openTrophyModal(_0x442a80=null){const _0x561326=a4_0x4df989,_0x45603e=document['getElementById']('trophy-modal'),_0x22564e=document['getElementById']('trophy-modal-title'),_0x172ad1=document['getElementById'](_0x561326(0x32e)),_0x46bee6=document['getElementById']('trophy-id');_0x172ad1[_0x561326(0x385)](),_0x46bee6['value']='';const _0x472d27=document['getElementById'](_0x561326(0x22f));_0x472d27&&(_0x472d27[_0x561326(0x251)]=DEFAULT_TROPHY_IMAGE,_0x472d27[_0x561326(0x1cf)]['remove']('error')),_0x442a80?(_0x22564e['textContent']='Edit\x20Trophy',_0x46bee6['value']=_0x442a80,loadTrophyData(_0x442a80)):_0x22564e['textContent']=_0x561326(0x300),_0x45603e[_0x561326(0x1cf)][_0x561326(0x245)]('active');}async function loadTrophyData(_0x545ad6){const _0x3dc39a=a4_0x4df989;try{const _0x379903=doc(db,'trophyDefinitions',_0x545ad6),_0x15556b=await getDoc(_0x379903);if(!_0x15556b['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0xde0b=_0x15556b['data']();document['getElementById']('trophy-name')[_0x3dc39a(0x223)]=_0xde0b['name']||'',document['getElementById']('trophy-description')['value']=_0xde0b[_0x3dc39a(0x1f6)]||'',document['getElementById']('trophy-image-url')['value']=_0xde0b['image']||'',document['getElementById'](_0x3dc39a(0x382))[_0x3dc39a(0x223)]=_0xde0b[_0x3dc39a(0x269)]||'common',updateTrophyImagePreview();}catch(_0x5c52fe){console['error'](_0x3dc39a(0x301),_0x5c52fe),showNotification(_0x3dc39a(0x30e),_0x3dc39a(0x2e5));}}async function saveTrophyDefinition(){const _0x138d69=a4_0x4df989;try{const _0x1ec979=document['getElementById']('trophy-id')['value'],_0x2265aa=document['getElementById']('trophy-name')['value']['trim'](),_0x46420a=document[_0x138d69(0x338)](_0x138d69(0x2cf))['value']['trim'](),_0x52c862=document['getElementById']('trophy-image-url')['value']['trim'](),_0x194c45=document[_0x138d69(0x338)]('trophy-rarity')['value'];if(!_0x2265aa||!_0x46420a||!_0x52c862){showNotification('All\x20fields\x20are\x20required',_0x138d69(0x2e5));return;}const _0x136092=auth[_0x138d69(0x290)];if(!_0x136092){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x7d73e2={'name':_0x2265aa,'description':_0x46420a,'image':_0x52c862,'rarity':_0x194c45,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x136092['email']};!_0x1ec979?(_0x7d73e2['createdAt']=serverTimestamp(),_0x7d73e2['createdBy']=_0x136092['email'],await addDoc(collection(db,'trophyDefinitions'),_0x7d73e2),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x1ec979),_0x7d73e2),showNotification(_0x138d69(0x3d0),'success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x179ee2){console[_0x138d69(0x2e5)](_0x138d69(0x25e),_0x179ee2),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x179ee2['message'],'error');}}function closeTrophyModal(){const _0x140cb8=a4_0x4df989,_0x5df20f=document['getElementById']('trophy-modal');_0x5df20f&&_0x5df20f[_0x140cb8(0x1cf)]['remove']('active');}async function confirmDeleteTrophy(_0x8fbe9c){const _0x4e0265=a4_0x4df989;if(!_0x8fbe9c){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x5173a1=auth[_0x4e0265(0x290)];if(!_0x5173a1){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x8fbe9c),await deleteDoc(doc(db,'trophyDefinitions',_0x8fbe9c)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x4e0265(0x3c8)),loadTrophyDefinitions();}catch(_0x1a7f76){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x1a7f76),showNotification(_0x4e0265(0x3e7)+_0x1a7f76[_0x4e0265(0x1e7)],'error');}}async function openAssignTrophyModal(_0x5c5395){const _0x4676db=a4_0x4df989;try{const _0x885a07=doc(db,'trophyDefinitions',_0x5c5395),_0x12e21d=await getDoc(_0x885a07);if(!_0x12e21d['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x28afbb=_0x12e21d['data']();document['getElementById']('assign-trophy-id')[_0x4676db(0x223)]=_0x5c5395,document['getElementById']('assign-trophy-name')['value']=_0x28afbb['name'],document[_0x4676db(0x338)]('assign-trophy-image')['src']=_0x28afbb['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0x4676db(0x1b7))[_0x4676db(0x2a2)]=_0x28afbb['name']||'Unnamed\x20Trophy',document[_0x4676db(0x338)]('assign-trophy-description')['textContent']=_0x28afbb['description']||'No\x20description';const _0x535662=document['getElementById']('assign-trophy-rarity');_0x535662['textContent']=_0x28afbb['rarity']||'common',_0x535662['className']=_0x4676db(0x2c7)+(_0x28afbb[_0x4676db(0x269)]||_0x4676db(0x1eb));const _0x343789=document['getElementById'](_0x4676db(0x3f4));_0x343789['classList']['add']('active');}catch(_0x1501db){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x1501db),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x4676db(0x2e5));}}function closeAssignTrophyModal(){const _0x318c79=a4_0x4df989,_0x18fa34=document['getElementById'](_0x318c79(0x3f4));_0x18fa34&&_0x18fa34['classList']['remove'](_0x318c79(0x3b6));}async function assignTrophyToPlayer(){const _0x3a18fa=a4_0x4df989;try{const _0x38b2b0=document['getElementById']('assign-trophy-id')['value'],_0x3abfa9=document['getElementById'](_0x3a18fa(0x3c6))['value'],_0x3bf057=document[_0x3a18fa(0x338)]('assign-player-username')['value']['trim'](),_0x2d5de6=document[_0x3a18fa(0x396)](_0x3a18fa(0x344))['value'];if(!_0x38b2b0||!_0x3bf057){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0x3a18fa(0x2e5));return;}const _0x28889d=auth['currentUser'];if(!_0x28889d){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies',_0x3a18fa(0x2e5));return;}let _0x422e48=null,_0x2850d8=null,_0x10f12e=null;if(_0x2d5de6==='non-participant'){const _0x53b208=collection(db,'nonParticipants'),_0x2b7115=query(_0x53b208,where('username','==',_0x3bf057)),_0x1cd417=await getDocs(_0x2b7115);!_0x1cd417['empty']&&(_0x422e48=_0x1cd417['docs'][0x0],_0x2850d8=_0x422e48['id'],_0x10f12e=_0x422e48['data']());}else{const _0x1a85a4=_0x2d5de6==='D1'?'players':_0x2d5de6==='D2'?'playersD2':_0x3a18fa(0x368),_0x184eaf=collection(db,_0x1a85a4),_0xc562f=query(_0x184eaf,where('username','==',_0x3bf057)),_0x4035bc=await getDocs(_0xc562f);!_0x4035bc[_0x3a18fa(0x241)]&&(_0x422e48=_0x4035bc[_0x3a18fa(0x2ed)][0x0],_0x2850d8=_0x422e48['id'],_0x10f12e=_0x422e48['data']());}if(!_0x422e48){showNotification('Player\x20\x22'+_0x3bf057+'\x22\x20not\x20found\x20in\x20'+(_0x2d5de6==='non-participant'?'non-participants':_0x2d5de6+'\x20ladder'),_0x3a18fa(0x2e5));return;}const _0x481e7a=collection(db,'userTrophies'),_0x2c0e43=query(_0x481e7a,where('userId','==',_0x2850d8),where('trophyId','==',_0x38b2b0)),_0x1e64cf=await getDocs(_0x2c0e43);if(!_0x1e64cf['empty']){showNotification(_0x3a18fa(0x1ae)+_0x3bf057+_0x3a18fa(0x247),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x2850d8,'playerUsername':_0x3bf057,'trophyId':_0x38b2b0,'awardedAt':serverTimestamp(),'awardedBy':_0x28889d['email'],'ladder':_0x2d5de6}),showNotification('Trophy\x20\x22'+_0x3abfa9+'\x22\x20awarded\x20to\x20'+_0x3bf057,'success'),closeAssignTrophyModal();}catch(_0x504cbf){console['error']('Error\x20assigning\x20trophy:',_0x504cbf),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x504cbf[_0x3a18fa(0x1e7)],'error');}}function setupInactivePlayersSection(){const _0x1c8522=a4_0x4df989,_0x3c64c6=document[_0x1c8522(0x338)]('inactive-days-filter');_0x3c64c6&&_0x3c64c6[_0x1c8522(0x2fd)]('change',function(){const _0x158f3d=_0x1c8522,_0x27a9b0=document['getElementById']('load-inactive-players-data');if(_0x27a9b0)_0x27a9b0[_0x158f3d(0x1d1)]();});const _0x28fe73=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x363002=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x28fe73&&_0x363002&&(_0x28fe73['addEventListener'](_0x1c8522(0x266),function(){if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')['style']['display']!=='none'){const _0x3fe01b=document['getElementById']('load-inactive-players-data');if(_0x3fe01b)_0x3fe01b['click']();}}}),_0x363002[_0x1c8522(0x2fd)]('change',function(){const _0x98d462=_0x1c8522;if(this['checked']){currentLadder='D2';if(document['getElementById']('inactive-players')[_0x98d462(0x23b)][_0x98d462(0x2e6)]!=='none'){const _0x31ab78=document[_0x98d462(0x338)]('load-inactive-players-data');if(_0x31ab78)_0x31ab78['click']();}}}));const _0x2fe0ef=document['getElementById']('inactive-players-search');_0x2fe0ef&&_0x2fe0ef['addEventListener']('input',debounce(function(){const _0x1b6169=_0x1c8522,_0x17eb2e=_0x2fe0ef['value']['toLowerCase'](),_0x55f1f7=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x55f1f7[_0x1b6169(0x2e0)](_0x231f58=>{const _0x1c53d3=_0x1b6169;if(_0x231f58['querySelector']('.loading-cell')||_0x231f58['querySelector']('.empty-state')||_0x231f58['querySelector'](_0x1c53d3(0x354)))return;const _0x1be265=_0x231f58[_0x1c53d3(0x2ee)][0x0]?.['textContent']['toLowerCase']()||'',_0x7b32fe=_0x231f58['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x1be265[_0x1c53d3(0x1b0)](_0x17eb2e)||_0x7b32fe['includes'](_0x17eb2e)?_0x231f58['style']['display']='':_0x231f58[_0x1c53d3(0x23b)][_0x1c53d3(0x2e6)]=_0x1c53d3(0x270);});},0x12c)),document['addEventListener']('click',function(_0x316190){const _0x50b151=_0x1c8522;if(_0x316190[_0x50b151(0x323)]['closest']('.view-player-btn')){const _0x2b7850=_0x316190['target']['closest']('.view-player-btn'),_0x210f55=_0x2b7850['dataset']['username'];_0x210f55&&alert('View\x20player\x20details\x20for\x20'+_0x210f55+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x1c8522(0x29e));}async function loadInactivePlayersData(){const _0x14cb8d=a4_0x4df989,_0x51be7b=document['getElementById'](_0x14cb8d(0x1ff));if(!_0x51be7b)return;_0x51be7b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x32f685=document['getElementById']('inactive-days-filter'),_0x1fd5e3=_0x32f685?parseInt(_0x32f685['value'])||0x0:0x0,_0x5289aa=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x18b3d5=await getDocs(_0x5289aa);if(_0x18b3d5[_0x14cb8d(0x241)]){_0x51be7b[_0x14cb8d(0x3c0)]=_0x14cb8d(0x3a7);return;}const _0x289cec=[];_0x18b3d5['forEach'](_0x12d6fb=>{const _0x5c15a1=_0x12d6fb['data']();_0x289cec['push']({..._0x5c15a1,'id':_0x12d6fb['id'],'username':_0x5c15a1['username']||'Unknown\x20Player'});}),console[_0x14cb8d(0x263)](_0x14cb8d(0x243)+_0x289cec['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x1dacba=currentLadder==='D1'?_0x14cb8d(0x2e2):_0x14cb8d(0x257),_0x140b08=_0x289cec['map'](async _0x1c4396=>{const _0x15f2a4=_0x14cb8d;try{const _0x51a21a=collection(db,_0x1dacba),_0x2baa95=query(_0x51a21a,or(where('winnerUsername','==',_0x1c4396[_0x15f2a4(0x32a)]),where('loserUsername','==',_0x1c4396['username'])),orderBy('approvedAt',_0x15f2a4(0x1bf)),limit(0x1)),_0x17ff58=await getDocs(_0x2baa95);if(!_0x17ff58['empty']){const _0x11f888=_0x17ff58['docs'][0x0]['data'](),_0x3052eb=_0x11f888['approvedAt']?new Date(_0x11f888['approvedAt']['seconds']*0x3e8):null,_0x2533a3=new Date(),_0x1c5912=_0x3052eb?Math['floor']((_0x2533a3-_0x3052eb)/(0x3e8*0x3c*0x3c*0x18)):null,_0x34f0e8=_0x11f888['winnerUsername']===_0x1c4396['username']?_0x11f888[_0x15f2a4(0x2b9)]:_0x11f888['winnerUsername'],_0x5e8155=_0x11f888[_0x15f2a4(0x259)]===_0x1c4396[_0x15f2a4(0x32a)]?'Won':'Lost';return{..._0x1c4396,'lastMatch':{'date':_0x3052eb?_0x3052eb['toLocaleDateString']():'N/A','opponent':_0x34f0e8||'Unknown','result':_0x5e8155,'timestamp':_0x3052eb||new Date(0x0),'daysSinceMatch':_0x1c5912||Number['MAX_SAFE_INTEGER']}};}else return{..._0x1c4396,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x15f2a4(0x2ea)]}};}catch(_0x5b8497){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x1c4396['username']+':',_0x5b8497),{..._0x1c4396,'lastMatch':{'date':'Error','opponent':_0x15f2a4(0x2d7),'result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x481d01=await Promise['all'](_0x140b08);_0x481d01['sort']((_0x38543b,_0x3684d6)=>_0x3684d6['lastMatch'][_0x14cb8d(0x23f)]-_0x38543b['lastMatch']['daysSinceMatch']);_0x1fd5e3>0x0&&(_0x481d01=_0x481d01['filter'](_0x3fd33a=>_0x3fd33a['lastMatch']['daysSinceMatch']>=_0x1fd5e3));_0x51be7b['innerHTML']='';if(_0x481d01['length']===0x0){_0x51be7b[_0x14cb8d(0x3c0)]=_0x14cb8d(0x2fb);return;}_0x481d01['forEach'](_0x18afc5=>{const _0x3d7540=_0x14cb8d,_0x3a927c=document['createElement']('tr'),_0x14886d=_0x18afc5['lastMatch'][_0x3d7540(0x23f)]>0x1e?'highly-inactive':_0x18afc5['lastMatch'][_0x3d7540(0x23f)]>0xe?_0x3d7540(0x2b5):'';_0x3a927c['className']=_0x14886d,_0x3a927c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x18afc5[_0x3d7540(0x32a)]+_0x3d7540(0x261)+(_0x18afc5['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x18afc5[_0x3d7540(0x249)][_0x3d7540(0x3de)]+_0x3d7540(0x261)+(_0x18afc5['lastMatch']['daysSinceMatch']===Number[_0x3d7540(0x2ea)]?_0x3d7540(0x1d8):_0x18afc5[_0x3d7540(0x249)]['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x18afc5['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x18afc5['lastMatch']['result']+'\x20vs\x20'+_0x18afc5['lastMatch'][_0x3d7540(0x2db)])+_0x3d7540(0x3ec)+_0x18afc5[_0x3d7540(0x32a)]+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x51be7b['appendChild'](_0x3a927c);}),console['log']('Displaying\x20'+_0x481d01['length']+_0x14cb8d(0x320));}catch(_0x5a834a){console['error']('Error\x20loading\x20inactive\x20players:',_0x5a834a),_0x51be7b['innerHTML']=_0x14cb8d(0x39e)+_0x5a834a['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x5a15ca=a4_0x4df989;console['log'](_0x5a15ca(0x25a));const _0xf9915a=document['getElementById']('create-match-highlight-btn');_0xf9915a&&_0xf9915a['addEventListener']('click',function(){const _0x57ef5f=_0x5a15ca;console[_0x57ef5f(0x263)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x494121=document[_0x5a15ca(0x338)]('create-creator-highlight-btn');_0x494121&&_0x494121['addEventListener']('click',function(){const _0xc0dc9=_0x5a15ca;console['log'](_0xc0dc9(0x1bb)),openHighlightModal(_0xc0dc9(0x399));});const _0x10aaa3=document['getElementById']('create-achievement-highlight-btn');_0x10aaa3&&_0x10aaa3['addEventListener']('click',function(){const _0x17fd30=_0x5a15ca;console['log'](_0x17fd30(0x204)),openHighlightModal('achievement');});}function openHighlightModal(_0x3f9bda='match'){const _0x2c083c=a4_0x4df989;console['log'](_0x2c083c(0x1ca)+_0x3f9bda);const _0x196e2b=document[_0x2c083c(0x338)]('highlight-modal'),_0x5e1c6c=document['getElementById']('highlight-form'),_0xcebac6=document[_0x2c083c(0x338)](_0x2c083c(0x1f5)),_0x25274c=document['getElementById']('highlight-id');if(!_0x196e2b||!_0x5e1c6c||!_0xcebac6){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x5e1c6c['reset'](),_0x25274c['value']='';const _0x24bb95=['match','creator','achievement'],_0x351887=!_0x24bb95['includes'](_0x3f9bda);if(_0x351887){const _0x1c57e6=_0x3f9bda;_0x25274c['value']=_0x1c57e6,_0xcebac6['textContent']='Loading...',loadHighlightDataAdmin(_0x1c57e6);}else{const _0x252f32=_0x3f9bda;document['getElementById']('highlight-type')['value']=_0x252f32,_0xcebac6['textContent']=_0x2c083c(0x2ad)+getHighlightTypeName(_0x252f32),toggleHighlightFields(_0x252f32);const _0x2bb852=auth['currentUser'];_0x2bb852&&document['getElementById']('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')['value']=_0x2bb852['displayName']||_0x2bb852[_0x2c083c(0x36a)]);}_0x196e2b[_0x2c083c(0x1cf)]['add'](_0x2c083c(0x3b6));}function toggleHighlightFields(_0x1dfe49){const _0x22eb93=a4_0x4df989;console[_0x22eb93(0x263)](_0x22eb93(0x2ba)+_0x1dfe49);const _0x3fb125=document['getElementById']('highlight-form');if(!_0x3fb125)return;const _0x1e4006=_0x3fb125['querySelectorAll'](_0x22eb93(0x33b));_0x1e4006['forEach'](_0x1f7386=>_0x1f7386['style'][_0x22eb93(0x2e6)]='none');const _0x14331e=document['getElementById']('highlight-video-preview-container');if(_0x14331e)_0x14331e[_0x22eb93(0x23b)][_0x22eb93(0x2e6)]='none';const _0x164a0d=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x164a0d['forEach'](_0x1f6dcf=>{const _0xea56e3=_0x22eb93,_0x4b2a37=document[_0xea56e3(0x338)](_0x1f6dcf);if(_0x4b2a37)_0x4b2a37['style']['display']=_0xea56e3(0x2cb);});if(_0x1dfe49==='match'){const _0x6e3103=['highlight-video-container',_0x22eb93(0x31e),'highlight-map-container',_0x22eb93(0x214),'highlight-players-container',_0x22eb93(0x20f)];_0x6e3103[_0x22eb93(0x2e0)](_0x2915ca=>{const _0x2c6c6e=_0x22eb93,_0x46702b=document['getElementById'](_0x2915ca);_0x46702b&&(_0x2915ca==='highlight-players-container'?_0x46702b['style']['display']=_0x2c6c6e(0x37f):_0x46702b[_0x2c6c6e(0x23b)]['display']='block');});const _0x522b83=document[_0x22eb93(0x338)]('highlight-video-id');if(_0x522b83){_0x522b83[_0x22eb93(0x325)]=!![];const _0xc7a739=_0x522b83['previousElementSibling'];if(_0xc7a739)_0xc7a739[_0x22eb93(0x3c0)]=_0x22eb93(0x24d);}if(_0x14331e)_0x14331e['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x1dfe49==='creator'){const _0x4d76e3=['highlight-map-container',_0x22eb93(0x267),'highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x4d76e3[_0x22eb93(0x2e0)](_0x4906ac=>{const _0x42b633=document['getElementById'](_0x4906ac);if(_0x42b633)_0x42b633['style']['display']='block';});const _0x43eaa4=document['getElementById']('highlight-video-id');if(_0x43eaa4){_0x43eaa4['required']=![];const _0x13eb25=_0x43eaa4['previousElementSibling'];if(_0x13eb25)_0x13eb25[_0x22eb93(0x3c0)]='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x1dfe49===_0x22eb93(0x235)){const _0x6e8e49=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container',_0x22eb93(0x38a),'highlight-video-container'];_0x6e8e49['forEach'](_0x53ae5c=>{const _0x53713c=_0x22eb93,_0x4ccfe1=document[_0x53713c(0x338)](_0x53ae5c);if(_0x4ccfe1)_0x4ccfe1[_0x53713c(0x23b)]['display']=_0x53713c(0x2cb);});const _0x1fafae=document['getElementById']('highlight-video-id');if(_0x1fafae){_0x1fafae['required']=![];const _0x943fc=_0x1fafae['previousElementSibling'];if(_0x943fc)_0x943fc[_0x22eb93(0x3c0)]='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x3b268a){const _0x5c5b62=a4_0x4df989;try{const _0x34122f=doc(db,'highlights',_0x3b268a),_0x153f08=await getDoc(_0x34122f);if(!_0x153f08['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x2c6d49=_0x153f08['data'](),_0xaaf526=_0x2c6d49[_0x5c5b62(0x360)]||'match';document[_0x5c5b62(0x338)](_0x5c5b62(0x1f5))['textContent']='Edit\x20'+getHighlightTypeName(_0xaaf526),document[_0x5c5b62(0x338)]('highlight-type')['value']=_0xaaf526,toggleHighlightFields(_0xaaf526),document['getElementById'](_0x5c5b62(0x262))['value']=_0x2c6d49[_0x5c5b62(0x31f)]||'',document[_0x5c5b62(0x338)](_0x5c5b62(0x334))['value']=_0x2c6d49['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x2c6d49['submittedBy']||'';_0x2c6d49['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x2c6d49['videoId'],updateHighlightVideoPreview());if(_0xaaf526==='match'){document[_0x5c5b62(0x338)]('highlight-match-info')[_0x5c5b62(0x223)]=_0x2c6d49[_0x5c5b62(0x2be)]||'',document['getElementById']('highlight-map')['value']=_0x2c6d49['map']||'';if(_0x2c6d49['matchDate']){const _0x358724=new Date(_0x2c6d49['matchDate']['seconds']*0x3e8);document[_0x5c5b62(0x338)]('highlight-match-date')['value']=_0x358724['toISOString']()[_0x5c5b62(0x205)]('T')[0x0];}document['getElementById'](_0x5c5b62(0x3cc))['value']=_0x2c6d49['winnerName']||'',document[_0x5c5b62(0x338)](_0x5c5b62(0x32b))[_0x5c5b62(0x223)]=_0x2c6d49['winnerScore']||'',document[_0x5c5b62(0x338)]('highlight-loser-name')['value']=_0x2c6d49['loserName']||'',document['getElementById']('highlight-loser-score')['value']=_0x2c6d49[_0x5c5b62(0x248)]||'',document['getElementById']('highlight-match-link')['value']=_0x2c6d49['matchLink']||'';}else{if(_0xaaf526==='creator')document[_0x5c5b62(0x338)]('highlight-map')['value']=_0x2c6d49['map']||'',document['getElementById'](_0x5c5b62(0x284))[_0x5c5b62(0x223)]=_0x2c6d49['mapCreator']||'',document[_0x5c5b62(0x338)](_0x5c5b62(0x252))['value']=_0x2c6d49[_0x5c5b62(0x236)]||'',document['getElementById'](_0x5c5b62(0x2f6))[_0x5c5b62(0x223)]=_0x2c6d49[_0x5c5b62(0x2f3)]||'';else _0xaaf526==='achievement'&&(document['getElementById']('highlight-achievement-player')['value']=_0x2c6d49['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x2c6d49['achievementType']||'',document['getElementById'](_0x5c5b62(0x34f))['value']=_0x2c6d49['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x2c6d49[_0x5c5b62(0x330)]||'',document[_0x5c5b62(0x338)]('highlight-achievement-image')[_0x5c5b62(0x223)]=_0x2c6d49['achievementImageUrl']||'');}}catch(_0x38dee4){console['error']('Error\x20loading\x20highlight:',_0x38dee4),showNotification('Error\x20loading\x20highlight:\x20'+_0x38dee4[_0x5c5b62(0x1e7)],'error');}}async function saveHighlight(){const _0x584972=a4_0x4df989;try{const _0x5647b0=document['getElementById']('highlight-id')?.[_0x584972(0x223)]||'',_0x2c5161=document['getElementById']('highlight-type')?.['value']||_0x584972(0x33e),_0x133b0f={'title':document[_0x584972(0x338)]('highlight-title')?.['value']?.['trim']()||'','description':document[_0x584972(0x338)](_0x584972(0x334))?.['value']?.[_0x584972(0x2f2)]()||'','submittedBy':document['getElementById'](_0x584972(0x1e0))?.['value']?.[_0x584972(0x2f2)]()||'','videoId':document[_0x584972(0x338)]('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x2c5161};if(!_0x133b0f['title']){showNotification('Title\x20is\x20required',_0x584972(0x2e5));return;}if(_0x2c5161==='match'){_0x133b0f['matchInfo']=document['getElementById'](_0x584972(0x388))?.['value']?.['trim']()||'',_0x133b0f['map']=document[_0x584972(0x338)]('highlight-map')?.['value']?.['trim']()||'';const _0x48a813=document['getElementById']('highlight-match-date'),_0x530e27=_0x48a813?.[_0x584972(0x223)]||'';_0x133b0f['matchDate']=_0x530e27?Timestamp['fromDate'](new Date(_0x530e27)):null,_0x133b0f['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.['trim']()||'',_0x133b0f[_0x584972(0x34a)]=document['getElementById']('highlight-winner-score')?.[_0x584972(0x223)]?.['trim']()||'',_0x133b0f['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x133b0f[_0x584972(0x248)]=document['getElementById']('highlight-loser-score')?.[_0x584972(0x223)]?.['trim']()||'',_0x133b0f[_0x584972(0x3ca)]=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x133b0f['videoId']){showNotification(_0x584972(0x3b0),_0x584972(0x2e5));return;}}else{if(_0x2c5161==='creator'){_0x133b0f['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x133b0f[_0x584972(0x1da)]=document['getElementById'](_0x584972(0x284))?.['value']?.['trim']()||'',_0x133b0f[_0x584972(0x236)]=document['getElementById']('highlight-map-version')?.[_0x584972(0x223)]?.['trim']()||'',_0x133b0f['creatorImageUrl']=document['getElementById'](_0x584972(0x2f6))?.[_0x584972(0x223)]?.['trim']()||'';if(!_0x133b0f[_0x584972(0x1da)]){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x2c5161==='achievement'){_0x133b0f[_0x584972(0x2e8)]=document[_0x584972(0x338)]('highlight-achievement-player')?.['value']?.[_0x584972(0x2f2)]()||'',_0x133b0f['achievementType']=document['getElementById'](_0x584972(0x34c))?.[_0x584972(0x223)]?.['trim']()||'',_0x133b0f[_0x584972(0x2d3)]=document['getElementById']('highlight-achievement-details')?.['value']?.[_0x584972(0x2f2)]()||'',_0x133b0f['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.[_0x584972(0x223)]?.[_0x584972(0x2f2)]()||'',_0x133b0f['achievementImageUrl']=document[_0x584972(0x338)](_0x584972(0x3a8))?.[_0x584972(0x223)]?.[_0x584972(0x2f2)]()||'';if(!_0x133b0f['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required',_0x584972(0x2e5));return;}}}}_0x5647b0?(_0x133b0f['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x5647b0),_0x133b0f),showNotification(_0x584972(0x33a),'success')):(_0x133b0f['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x584972(0x3df)),_0x133b0f),showNotification(_0x584972(0x378),_0x584972(0x3c8))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x3eac06){console['error']('Error\x20saving\x20highlight:',_0x3eac06),showNotification('Error\x20saving\x20highlight:\x20'+_0x3eac06['message'],_0x584972(0x2e5));}}function closeHighlightModal(){const _0x5eb2ce=a4_0x4df989,_0x526bf7=document['getElementById'](_0x5eb2ce(0x21e));if(_0x526bf7)_0x526bf7['classList'][_0x5eb2ce(0x321)]('active');}function getHighlightTypeName(_0x2fc099){const _0x2649fd=a4_0x4df989;switch(_0x2fc099){case _0x2649fd(0x33e):return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case _0x2649fd(0x235):return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x36945b=a4_0x4df989,_0x36ab3e=document['getElementById']('highlight-video-id'),_0x44d758=document['getElementById']('highlight-video-preview-container'),_0x23b62f=document['getElementById']('highlight-video-preview');if(!_0x36ab3e||!_0x23b62f||!_0x44d758)return;const _0x48407d=_0x36ab3e[_0x36945b(0x223)][_0x36945b(0x2f2)]();_0x48407d&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x48407d)?(_0x23b62f['src']=_0x36945b(0x3a2)+_0x48407d,_0x44d758[_0x36945b(0x23b)][_0x36945b(0x2e6)]='block'):(_0x23b62f['src']='',_0x44d758[_0x36945b(0x23b)]['display']=_0x36945b(0x270));}async function loadHighlightsAdmin(){const _0x3df530=a4_0x4df989,_0x2f807d=document[_0x3df530(0x338)](_0x3df530(0x395));if(!_0x2f807d)return;_0x2f807d['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x17efa6=query(collection(db,'highlights'),orderBy(_0x3df530(0x212),_0x3df530(0x1bf))),_0x433789=await getDocs(_0x17efa6);if(_0x433789['empty']){_0x2f807d['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x2f807d['innerHTML']='',_0x433789['forEach'](_0x158675=>{const _0x2648cd=_0x3df530,_0x49a0c7=_0x158675['data'](),_0x52e0c6=document[_0x2648cd(0x274)]('tr'),_0x4fc7e4=_0x49a0c7[_0x2648cd(0x212)]?new Date(_0x49a0c7['createdAt']['seconds']*0x3e8)['toLocaleDateString']():_0x2648cd(0x1d8);let _0x39d53e='Unknown',_0x3daaac='';switch(_0x49a0c7[_0x2648cd(0x360)]){case'match':_0x39d53e='Match',_0x3daaac='match-type';break;case _0x2648cd(0x399):_0x39d53e='Creator',_0x3daaac='creator-type';break;case'achievement':_0x39d53e='Achievement',_0x3daaac='achievement-type';break;}_0x52e0c6[_0x2648cd(0x3c0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x49a0c7['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x3daaac+'\x22>'+_0x39d53e+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4fc7e4+_0x2648cd(0x261)+(_0x49a0c7[_0x2648cd(0x218)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x49a0c7['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x158675['id']+_0x2648cd(0x239)+_0x158675['id']+_0x2648cd(0x316),_0x2f807d['appendChild'](_0x52e0c6);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x2c9af7=>{_0x2c9af7['addEventListener']('click',_0x522818=>{openHighlightModal(_0x522818['currentTarget']['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')[_0x3df530(0x2e0)](_0x4205e5=>{_0x4205e5['addEventListener']('click',_0x427017=>{confirmDeleteHighlight(_0x427017['currentTarget']['dataset']['id']);});});}catch(_0x380ccf){console['error']('Error\x20loading\x20highlights:',_0x380ccf),_0x2f807d[_0x3df530(0x3c0)]=_0x3df530(0x341)+_0x380ccf[_0x3df530(0x1e7)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x2651ca){const _0x3e77e5=a4_0x4df989;if(confirm(_0x3e77e5(0x2fa)))try{await deleteDoc(doc(db,'highlights',_0x2651ca)),showNotification(_0x3e77e5(0x26d),'success'),loadHighlightsAdmin();}catch(_0x4a24eb){console['error']('Error\x20deleting\x20highlight:',_0x4a24eb),showNotification(_0x3e77e5(0x275)+_0x4a24eb['message'],'error');}}function setupCreateTestMatchModal(){const _0x2b4c83=a4_0x4df989;console[_0x2b4c83(0x263)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x45dbd7=document['getElementById']('create-test-match-modal'),_0x4af863=document['getElementById']('create-test-match-form');if(!_0x45dbd7){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x4af863){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x321647=_0x45dbd7[_0x2b4c83(0x24a)](!![]);_0x45dbd7['parentNode']['replaceChild'](_0x321647,_0x45dbd7);const _0x1808a7=_0x321647['querySelector']('#create-test-match-form');_0x321647[_0x2b4c83(0x2fd)](_0x2b4c83(0x1d1),function(_0xaff35){const _0x5d027f=_0x2b4c83;_0xaff35['target']===_0x321647&&(console['log'](_0x5d027f(0x2e1)),closeCreateTestMatchModal());});const _0x3231e7=_0x321647['querySelector'](_0x2b4c83(0x229));_0x3231e7&&_0x3231e7[_0x2b4c83(0x2fd)](_0x2b4c83(0x1d1),function(_0x44666b){const _0x392f9e=_0x2b4c83;_0x44666b['preventDefault'](),_0x44666b[_0x392f9e(0x27c)](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x54bd51=_0x321647['querySelector']('#cancel-create-test-match-btn');_0x54bd51&&_0x54bd51['addEventListener']('click',function(_0x16a225){const _0x4f4cda=_0x2b4c83;_0x16a225['preventDefault'](),_0x16a225['stopPropagation'](),console[_0x4f4cda(0x263)]('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x1808a7){_0x1808a7['addEventListener'](_0x2b4c83(0x1d5),function(_0x61f77d){_0x61f77d['preventDefault'](),_0x61f77d['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x35213b=_0x1808a7['querySelector']('button[type=\x22submit\x22]');_0x35213b&&_0x35213b[_0x2b4c83(0x2fd)]('click',function(_0x2b49d4){const _0x2dabd1=_0x2b4c83;_0x2b49d4[_0x2dabd1(0x21a)](),_0x2b49d4['stopPropagation'](),console[_0x2dabd1(0x263)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x2b4c83(0x263)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x2e3d39=a4_0x4df989;console['log'](_0x2e3d39(0x343)),setupHighlightButtons();const _0x1cb83d=document[_0x2e3d39(0x338)]('highlight-form');_0x1cb83d&&_0x1cb83d['addEventListener']('submit',_0x78c2bf=>{const _0x5101ca=_0x2e3d39;_0x78c2bf[_0x5101ca(0x21a)](),saveHighlight();});const _0x3045ab=document['getElementById'](_0x2e3d39(0x3f5));_0x3045ab&&_0x3045ab['addEventListener']('click',closeHighlightModal);const _0x3449e9=document['querySelector']('#highlight-modal\x20.close-btn');_0x3449e9&&_0x3449e9['addEventListener'](_0x2e3d39(0x1d1),closeHighlightModal);const _0xaa2ce4=document['getElementById']('highlight-modal');_0xaa2ce4&&_0xaa2ce4['addEventListener'](_0x2e3d39(0x1d1),_0xefb973=>{_0xefb973['target']===_0xaa2ce4&&closeHighlightModal();});const _0xa11eaf=document[_0x2e3d39(0x338)](_0x2e3d39(0x1e5));_0xa11eaf&&_0xa11eaf[_0x2e3d39(0x2fd)](_0x2e3d39(0x281),()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x216d5f=a4_0x4df989;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x467859=document[_0x216d5f(0x338)]('matches-prev-page'),_0x26f284=document['getElementById']('matches-next-page');_0x467859&&_0x467859[_0x216d5f(0x2fd)]('click',()=>{const _0x1342db=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x1342db]['page']-0x1);});_0x26f284&&_0x26f284['addEventListener']('click',()=>{const _0x667946=_0x216d5f,_0xe778e5=currentLadder[_0x667946(0x1fc)]();loadMatchesData(matchesPagination[_0xe778e5]['page']+0x1);});const _0x35ba31=document['getElementById'](_0x216d5f(0x31c)),_0x2248b6=document['getElementById']('reset-matches-filters');_0x35ba31&&_0x35ba31['addEventListener']('click',applyMatchesFilters);_0x2248b6&&_0x2248b6[_0x216d5f(0x2fd)](_0x216d5f(0x1d1),resetMatchesFilters);const _0x41092c=document['getElementById'](_0x216d5f(0x339));_0x41092c&&_0x41092c[_0x216d5f(0x2fd)](_0x216d5f(0x281),debounce(filterMatchesTable,0x12c));const _0x256704=document['getElementById']('resimulate-match-btn');_0x256704&&_0x256704['addEventListener']('click',openResimulateModal);const _0x40d99f=document[_0x216d5f(0x338)](_0x216d5f(0x1e6));if(_0x40d99f){const _0x582bf3=_0x40d99f['querySelector'](_0x216d5f(0x3d2));_0x582bf3&&_0x582bf3['addEventListener']('click',closeResimulateModal),_0x40d99f[_0x216d5f(0x2fd)](_0x216d5f(0x1d1),_0x54f536=>{const _0x29c2f1=_0x216d5f;_0x54f536[_0x29c2f1(0x323)]===_0x40d99f&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x216d5f(0x2bd));}function openCreateTestMatchModal(){const _0x1b2214=a4_0x4df989;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x5c9d20=document['getElementById']('create-test-match-modal'),_0x5d1f1b=document[_0x1b2214(0x338)](_0x1b2214(0x2d4));if(!_0x5c9d20){console[_0x1b2214(0x2e5)]('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x1b2214(0x2e5));return;}if(!_0x5d1f1b){console['error'](_0x1b2214(0x20c)),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x5d1f1b[_0x1b2214(0x385)]();const _0x561839=document['querySelectorAll'](_0x1b2214(0x1c0));let _0x2145b2=![];_0x561839['forEach'](_0x481f70=>{const _0x10b398=_0x1b2214;console['log'](_0x10b398(0x3bd),_0x481f70[_0x10b398(0x223)]),_0x481f70[_0x10b398(0x223)]===currentLadder&&(_0x481f70['checked']=!![],_0x2145b2=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x2145b2){console['warn'](_0x1b2214(0x2de),currentLadder);const _0x2f0265=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x2f0265&&(_0x2f0265['checked']=!![],console['log'](_0x1b2214(0x3ed)));}const _0x146008=document['getElementById']('test-match-date');if(_0x146008){const _0x1367c7=new Date()['toISOString']()['split']('T')[0x0];_0x146008['value']=_0x1367c7;}_0x5c9d20['style']['display']=_0x1b2214(0x37f),_0x5c9d20[_0x1b2214(0x23b)]['visibility']=_0x1b2214(0x387),_0x5c9d20['style']['opacity']='1',_0x5c9d20['classList']['add']('active'),console[_0x1b2214(0x263)](_0x1b2214(0x391));const _0x4a8a5a=document[_0x1b2214(0x338)]('test-match-winner-username');_0x4a8a5a&&setTimeout(()=>{_0x4a8a5a['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x57a508=a4_0x4df989;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x1f1adf=document[_0x57a508(0x338)](_0x57a508(0x3e3));if(!_0x1f1adf){console[_0x57a508(0x2e5)](_0x57a508(0x2e9));return;}_0x1f1adf[_0x57a508(0x1cf)][_0x57a508(0x321)](_0x57a508(0x3b6)),_0x1f1adf['style']['opacity']='0',_0x1f1adf['style']['visibility']=_0x57a508(0x3ea),setTimeout(()=>{const _0x34c44b=_0x57a508;!_0x1f1adf['classList']['contains']('active')&&(_0x1f1adf['style'][_0x34c44b(0x2e6)]=_0x34c44b(0x270));},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x24b299=a4_0x4df989;console['log'](_0x24b299(0x2b7));try{const _0x116729=auth['currentUser'];if(!_0x116729){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x5923fb='D1',_0x299c70='approvedMatches',_0xac6b85={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x116729['email'],'createdAt':serverTimestamp(),'createdBy':_0x116729['email'],'isTestMatch':!![],'ladder':_0x5923fb,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x116729[_0x24b299(0x36a)]};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x299c70),_0xac6b85),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x177301){console['error'](_0x24b299(0x35c),_0x177301),showNotification(_0x24b299(0x304)+_0x177301['message'],'error');}}window[a4_0x4df989(0x2ae)]=async function(){const _0x1f665f=a4_0x4df989;try{console['log']('Testing\x20Firebase\x20connection...'),console['log'](_0x1f665f(0x397),auth),console[_0x1f665f(0x263)]('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x4e54a8=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x4e54a8);const _0x1b8bb0=query(_0x4e54a8,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x1b8bb0);const _0x1da389=await getDocs(_0x1b8bb0);console[_0x1f665f(0x263)]('Query\x20executed.\x20Empty:',_0x1da389['empty']),console['log'](_0x1f665f(0x2f4));}catch(_0x59ba8f){console['error']('Firebase\x20connection\x20test\x20failed:',_0x59ba8f);}};function setupCreateTestMatchButton(){const _0x24bf1d=a4_0x4df989,_0x4836f1=document['getElementById']('create-test-match-btn');if(!_0x4836f1){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0x1620ba=_0x4836f1[_0x24bf1d(0x24a)](!![]);_0x4836f1['parentNode']['replaceChild'](_0x1620ba,_0x4836f1),_0x1620ba['addEventListener']('click',function(_0x254ddc){const _0x520ecf=_0x24bf1d;_0x254ddc[_0x520ecf(0x21a)](),_0x254ddc['stopPropagation'](),console[_0x520ecf(0x263)](_0x520ecf(0x3a5)),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x4945fe=0x1){const _0x25529b=a4_0x4df989,_0x3f6841=document[_0x25529b(0x338)]('matches-table-body');if(!_0x3f6841)return;_0x3f6841['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x19c0c5=currentLadder['toLowerCase'](),_0x4807a5=matchesPagination[_0x19c0c5],_0x122305=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x25529b(0x2d0),_0x2b085d=collection(db,_0x122305);_0x4945fe<=0x1?(_0x4807a5[_0x25529b(0x3d9)]=0x1,_0x4807a5['firstVisible']=null,_0x4807a5['lastVisible']=null):_0x4807a5['page']=_0x4945fe;const _0x5b553f=getMatchesFilters();let _0xac4b58=_0x2b085d;if(_0x5b553f['startDate']||_0x5b553f[_0x25529b(0x2d9)]||_0x5b553f['searchTerm']){let _0xfd5c22=[];_0x5b553f['startDate']&&_0x5b553f['endDate']?(_0xfd5c22[_0x25529b(0x1de)](where('approvedAt','>=',_0x5b553f[_0x25529b(0x30b)]),where(_0x25529b(0x3b9),'<=',_0x5b553f['endDate'])),_0xac4b58=query(_0x2b085d,..._0xfd5c22)):_0xac4b58=query(_0x2b085d,orderBy('approvedAt','desc'));}else _0xac4b58=query(_0x2b085d,orderBy(_0x25529b(0x3b9),'desc'));_0x4945fe>0x1&&_0x4807a5['lastVisible']?_0xac4b58=query(_0xac4b58,startAfter(_0x4807a5['lastVisible']),limit(PAGE_SIZE)):_0xac4b58=query(_0xac4b58,limit(PAGE_SIZE));const _0x28b70d=await getDocs(_0xac4b58);!_0x28b70d['empty']&&(_0x4807a5['firstVisible']=_0x28b70d['docs'][0x0],_0x4807a5['lastVisible']=_0x28b70d['docs'][_0x28b70d[_0x25529b(0x2ed)][_0x25529b(0x206)]-0x1]);let _0x342def=![];if(!_0x28b70d[_0x25529b(0x241)]){const _0x4bf999=query(_0xac4b58,startAfter(_0x4807a5['lastVisible']),limit(0x1)),_0x1873a4=await getDocs(_0x4bf999);_0x342def=!_0x1873a4['empty'];}const _0x31679e=document['getElementById']('matches-prev-page'),_0x4597a4=document['getElementById'](_0x25529b(0x35f)),_0x1eee59=document['getElementById']('matches-page-indicator');if(_0x31679e)_0x31679e['disabled']=_0x4807a5['page']<=0x1;if(_0x4597a4)_0x4597a4[_0x25529b(0x3e9)]=!_0x342def;if(_0x1eee59)_0x1eee59[_0x25529b(0x2a2)]='Page\x20'+_0x4807a5[_0x25529b(0x3d9)];if(_0x28b70d[_0x25529b(0x241)]){_0x3f6841[_0x25529b(0x3c0)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x3f6841[_0x25529b(0x3c0)]='',_0x28b70d[_0x25529b(0x2e0)](_0x14cf41=>{const _0x1b4c73=_0x25529b,_0x23b21e=_0x14cf41[_0x1b4c73(0x376)](),_0x521016=document[_0x1b4c73(0x274)]('tr'),_0x51117a=_0x23b21e[_0x1b4c73(0x3b9)]?new Date(_0x23b21e['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x1b4c73(0x1d8);_0x521016['setAttribute'](_0x1b4c73(0x1d0),_0x14cf41['id']),_0x521016['setAttribute']('data-ladder',currentLadder),_0x521016['classList']['add']('match-row'),_0x521016['innerHTML']=_0x1b4c73(0x2df)+_0x51117a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x23b21e['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x23b21e['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x23b21e['winnerScore']||0x0)+_0x1b4c73(0x3b2)+(_0x23b21e['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x23b21e['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+_0x1b4c73(0x35b)+_0x14cf41['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x14cf41['id']+_0x1b4c73(0x346),_0x3f6841['appendChild'](_0x521016);}),setupMatchesActionButtons(),_0x5b553f['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x28b70d['size']+'\x20matches\x20for\x20'+currentLadder+_0x25529b(0x1c2)+_0x4807a5['page']);}catch(_0x37fed3){console['error']('Error\x20loading\x20matches:',_0x37fed3),_0x3f6841['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x37fed3['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x2d8244,_0x44a5ce){const _0x4c613a=a4_0x4df989;try{console[_0x4c613a(0x263)]('Deleting\x20match\x20'+_0x2d8244+'\x20from\x20'+_0x44a5ce+'\x20ladder');const _0x5a8b6c=auth['currentUser'];if(!_0x5a8b6c){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0xc5a865=_0x44a5ce==='D1'?_0x4c613a(0x2e2):_0x44a5ce==='D2'?_0x4c613a(0x257):'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0xc5a865),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0xc5a865,_0x2d8244)),console['log'](_0x4c613a(0x2f5)),showNotification('Match\x20deleted\x20successfully','success');const _0x4b68cf=_0x44a5ce['toLowerCase']();loadMatchesData(matchesPagination[_0x4b68cf][_0x4c613a(0x3d9)]);}catch(_0x29cc1d){console['error'](_0x4c613a(0x37e),_0x29cc1d),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x29cc1d['message'],'error');}}function setupMatchesActionButtons(){const _0x4f7ec9=a4_0x4df989;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x37c071=>{const _0x16a75b=a4_0x3018;_0x37c071[_0x16a75b(0x2fd)](_0x16a75b(0x1d1),_0x8793b=>{const _0x193d37=_0x16a75b;_0x8793b['preventDefault'](),_0x8793b[_0x193d37(0x27c)]();const _0x58d1e3=_0x8793b[_0x193d37(0x246)][_0x193d37(0x2c1)]['id'],_0x533673=_0x8793b['currentTarget']['closest']('tr'),_0x4266f5=_0x533673[_0x193d37(0x2c1)]['ladder'];console['log'](_0x193d37(0x38f),_0x58d1e3,_0x4266f5),openEditMatchModal(_0x58d1e3,_0x4266f5);});}),document[_0x4f7ec9(0x1af)]('.delete-match-btn')['forEach'](_0x5c8be3=>{const _0x2533de=_0x4f7ec9;_0x5c8be3[_0x2533de(0x2fd)](_0x2533de(0x1d1),_0x445e0f=>{const _0x9cb758=_0x2533de;_0x445e0f['preventDefault'](),_0x445e0f['stopPropagation']();const _0x43f2d2=_0x445e0f['currentTarget'][_0x9cb758(0x2c1)]['id'],_0x12edaa=_0x445e0f['currentTarget']['closest']('tr'),_0x5bab2e=_0x12edaa[_0x9cb758(0x2c1)]['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x43f2d2,_0x5bab2e),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x43f2d2,_0x5bab2e);});}),console[_0x4f7ec9(0x263)](_0x4f7ec9(0x3eb));}function a4_0x3018(_0x30e808,_0x4f7685){const _0x5c70d2=a4_0x3599();return a4_0x3018=function(_0x442793,_0x36b131){_0x442793=_0x442793-0x1ac;let _0x359951=_0x5c70d2[_0x442793];return _0x359951;},a4_0x3018(_0x30e808,_0x4f7685);}function filterMatchesTable(){const _0x240731=a4_0x4df989,_0x665906=document[_0x240731(0x338)]('matches-search')['value']['toLowerCase'](),_0x1af18d=document['querySelectorAll'](_0x240731(0x23d));let _0x4f8354=0x0;_0x1af18d['forEach'](_0xe4bcb9=>{const _0x25878f=_0x240731;if(_0xe4bcb9['classList']['contains']('loading-cell')||_0xe4bcb9[_0x25878f(0x1cf)]['contains']('empty-state')||_0xe4bcb9[_0x25878f(0x1cf)]['contains']('error-state'))return;const _0x19bfcb=_0xe4bcb9[_0x25878f(0x2ee)][0x1]['textContent']['toLowerCase'](),_0x23dbb2=_0xe4bcb9['cells'][0x2]['textContent']['toLowerCase'](),_0x26a6e6=_0xe4bcb9['cells'][0x4]['textContent']['toLowerCase']();_0x19bfcb['includes'](_0x665906)||_0x23dbb2['includes'](_0x665906)||_0x26a6e6['includes'](_0x665906)?(_0xe4bcb9['style']['display']='',_0x4f8354++):_0xe4bcb9[_0x25878f(0x23b)][_0x25878f(0x2e6)]='none';});if(_0x4f8354===0x0&&_0x1af18d[_0x240731(0x206)]>0x0){const _0x5a0f15=document['getElementById']('matches-table-body'),_0x38546b=_0x5a0f15['querySelector']('.no-results');if(!_0x38546b){const _0x8aac3=document['createElement']('tr');_0x8aac3['className']='no-results',_0x8aac3['innerHTML']=_0x240731(0x221)+_0x665906+'\x27</td>',_0x5a0f15['appendChild'](_0x8aac3);}}else{const _0x53def8=document[_0x240731(0x396)](_0x240731(0x361));_0x53def8&&_0x53def8['remove']();}}function getMatchesFilters(){const _0x54a426=a4_0x4df989,_0x4704c2=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x1c493c=document['getElementById'](_0x54a426(0x216))['value'],_0x1e18a0=document['getElementById']('matches-end-date')[_0x54a426(0x223)];let _0x59c4b5=null,_0x495291=null;return _0x1c493c&&(_0x59c4b5=new Date(_0x1c493c),_0x59c4b5['setHours'](0x0,0x0,0x0,0x0),_0x59c4b5=Timestamp['fromDate'](_0x59c4b5)),_0x1e18a0&&(_0x495291=new Date(_0x1e18a0),_0x495291[_0x54a426(0x25b)](0x17,0x3b,0x3b,0x3e7),_0x495291=Timestamp['fromDate'](_0x495291)),{'searchTerm':_0x4704c2,'startDate':_0x59c4b5,'endDate':_0x495291};}async function applyMatchesFilters(){const _0xefcbc2=a4_0x4df989,_0x3178c5=currentLadder[_0xefcbc2(0x1fc)]();matchesPagination[_0x3178c5]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x1d19d3=a4_0x4df989;document[_0x1d19d3(0x338)]('matches-start-date')['value']='',document['getElementById']('matches-end-date')['value']='',document['getElementById']('matches-search')[_0x1d19d3(0x223)]='';const _0x1230e0=currentLadder['toLowerCase']();matchesPagination[_0x1230e0]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x1f28aa,_0x6b8282){const _0x3250af=a4_0x4df989,_0x3ec8f2=document['getElementById']('edit-match-modal');if(!_0x3ec8f2)return;try{const _0x36ab6d=_0x6b8282==='D1'?'approvedMatches':_0x6b8282==='D2'?_0x3250af(0x257):_0x3250af(0x2d0),_0x1d3064=doc(db,_0x36ab6d,_0x1f28aa),_0x275d5b=await getDoc(_0x1d3064);if(!_0x275d5b['exists']()){showNotification(_0x3250af(0x328),'error');return;}const _0x42089a=_0x275d5b['data']();document['getElementById']('edit-match-id')['value']=_0x1f28aa,document['getElementById']('edit-match-ladder')[_0x3250af(0x223)]=_0x6b8282,document['getElementById']('edit-match-winner')['value']=_0x42089a[_0x3250af(0x259)]||'',document['getElementById']('edit-match-winner-score')['value']=_0x42089a[_0x3250af(0x34a)]||0x0,document[_0x3250af(0x338)](_0x3250af(0x1fe))['value']=_0x42089a[_0x3250af(0x30c)]||0x0,document[_0x3250af(0x338)]('edit-match-winner-comment')['value']=_0x42089a['winnerComment']||'',document['getElementById']('edit-match-loser')[_0x3250af(0x223)]=_0x42089a[_0x3250af(0x2b9)]||'',document[_0x3250af(0x338)]('edit-match-loser-score')['value']=_0x42089a['loserScore']||0x0,document['getElementById'](_0x3250af(0x398))['value']=_0x42089a['loserSuicides']||0x0,document['getElementById']('edit-match-loser-comment')['value']=_0x42089a['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x42089a[_0x3250af(0x367)]||'',document['getElementById'](_0x3250af(0x230))['value']=_0x42089a['winnerDemoLink']||'',document[_0x3250af(0x338)](_0x3250af(0x234))['value']=_0x42089a['loserDemoLink']||_0x42089a[_0x3250af(0x27a)]||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x42089a['winnerUsername']+_0x3250af(0x326)+_0x42089a[_0x3250af(0x2b9)],_0x3ec8f2['classList']['add'](_0x3250af(0x3b6));}catch(_0x2f2cff){console['error']('Error\x20loading\x20match\x20data:',_0x2f2cff),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x497a81=a4_0x4df989,_0x29ec7e=document['getElementById']('edit-match-modal');_0x29ec7e&&_0x29ec7e['classList']['remove'](_0x497a81(0x3b6));}async function saveEditedMatch(){const _0x4aa6a6=a4_0x4df989;try{const _0x2547ee=document['getElementById']('edit-match-id')['value'],_0x24e120=document['getElementById']('edit-match-ladder')['value'];if(!_0x2547ee||!_0x24e120){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x4aa6a6(0x2e5));return;}const _0x1bf1c3=_0x24e120==='D1'?_0x4aa6a6(0x2e2):_0x24e120==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x467124=document[_0x4aa6a6(0x338)]('edit-match-winner')[_0x4aa6a6(0x223)]['trim'](),_0x4c79e5=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x5d4020=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x15084d=document['getElementById'](_0x4aa6a6(0x1e4))['value']['trim'](),_0x17d82a=document['getElementById']('edit-match-loser')[_0x4aa6a6(0x223)][_0x4aa6a6(0x2f2)](),_0x586b09=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x307c59=parseInt(document['getElementById'](_0x4aa6a6(0x398))[_0x4aa6a6(0x223)]),_0xe0a28e=document[_0x4aa6a6(0x338)](_0x4aa6a6(0x22d))['value'][_0x4aa6a6(0x2f2)](),_0x5b24d9=document['getElementById']('edit-match-map')['value'][_0x4aa6a6(0x2f2)](),_0x428e82=document[_0x4aa6a6(0x338)]('edit-match-winner-demo')['value']['trim'](),_0x46f96a=document['getElementById']('edit-match-loser-demo')[_0x4aa6a6(0x223)]['trim']();if(!_0x467124||!_0x17d82a){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x1bf1c3,_0x2547ee),{'winnerUsername':_0x467124,'winnerScore':_0x4c79e5,'winnerSuicides':_0x5d4020,'winnerComment':_0x15084d,'loserUsername':_0x17d82a,'loserScore':_0x586b09,'loserSuicides':_0x307c59,'loserComment':_0xe0a28e,'mapPlayed':_0x5b24d9,'winnerDemoLink':_0x428e82||null,'loserDemoLink':_0x46f96a||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x24e120['toLowerCase']()]['page']);}catch(_0x55b449){console[_0x4aa6a6(0x2e5)](_0x4aa6a6(0x2bc),_0x55b449),showNotification(_0x4aa6a6(0x26b)+_0x55b449[_0x4aa6a6(0x1e7)],'error');}}async function openDeleteMatchModal(_0x2a9bd7,_0x2db6ca){const _0x30979e=a4_0x4df989;try{const _0x533a60=_0x2db6ca==='D1'?'approvedMatches':_0x2db6ca==='D2'?'approvedMatchesD2':_0x30979e(0x2d0),_0x274e28=doc(db,_0x533a60,_0x2a9bd7),_0x39efbb=await getDoc(_0x274e28);if(!_0x39efbb['exists']()){showNotification(_0x30979e(0x328),_0x30979e(0x2e5));return;}const _0x2ac09f=_0x39efbb['data'](),_0x3986dd=document['getElementById']('delete-match-confirm-modal');_0x3986dd[_0x30979e(0x2c1)]['matchId']=_0x2a9bd7,_0x3986dd[_0x30979e(0x2c1)]['ladder']=_0x2db6ca;const _0x136fd2=_0x2ac09f[_0x30979e(0x3b9)]?new Date(_0x2ac09f[_0x30979e(0x3b9)][_0x30979e(0x3a6)]*0x3e8)[_0x30979e(0x2f9)]():_0x30979e(0x1d8),_0x357ee1=document[_0x30979e(0x338)]('delete-match-summary');_0x357ee1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x136fd2+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x2ac09f['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x2ac09f[_0x30979e(0x2b9)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x2ac09f['winnerScore']||0x0)+'\x20-\x20'+(_0x2ac09f['loserScore']||0x0)+_0x30979e(0x1e3)+(_0x2ac09f['mapPlayed']||'N/A')+_0x30979e(0x208)+_0x2db6ca+_0x30979e(0x232),_0x3986dd[_0x30979e(0x1cf)]['add']('active');}catch(_0x38f8ca){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x38f8ca),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x233d37=a4_0x4df989,_0x5c8479=document['getElementById']('delete-match-confirm-modal');_0x5c8479&&(_0x5c8479[_0x233d37(0x1cf)]['remove'](_0x233d37(0x3b6)),_0x5c8479['removeAttribute'](_0x233d37(0x2bb)),_0x5c8479['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x210eef=a4_0x4df989,_0x112fea=document['getElementById']('delete-match-confirm-modal'),_0x3c26de=_0x112fea['dataset']['matchId'],_0x4b8055=_0x112fea[_0x210eef(0x2c1)]['ladder'];if(!_0x3c26de||!_0x4b8055){showNotification(_0x210eef(0x342),_0x210eef(0x2e5)),closeDeleteMatchModal();return;}try{const _0x58e59b=_0x4b8055==='D1'?'approvedMatches':_0x4b8055==='D2'?_0x210eef(0x257):_0x210eef(0x2d0);await deleteDoc(doc(db,_0x58e59b,_0x3c26de)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x4b8055['toLowerCase']()][_0x210eef(0x3d9)]);}catch(_0x71fcf7){console[_0x210eef(0x2e5)]('Error\x20deleting\x20match:',_0x71fcf7),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x71fcf7['message'],_0x210eef(0x2e5));}}async function saveHighlightChanges(){const _0x42f857=a4_0x4df989,_0x2b8ab7=document['getElementById']('edit-highlight-id')['value'],_0x45460c=document['getElementById'](_0x42f857(0x362))[_0x42f857(0x223)];let _0x347c74={'title':document['getElementById']('edit-highlight-title-input')['value'][_0x42f857(0x2f2)](),'type':_0x45460c,'description':document['getElementById']('edit-highlight-description-input')['value'][_0x42f857(0x2f2)](),'videoId':document[_0x42f857(0x338)](_0x42f857(0x3cd))[_0x42f857(0x223)][_0x42f857(0x2f2)](),'submittedBy':auth['currentUser']['email']};if(_0x45460c==='match'){_0x347c74['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')[_0x42f857(0x223)]['trim'](),_0x347c74['map']=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0x4af46c=document[_0x42f857(0x338)](_0x42f857(0x30d))['value'];_0x347c74['matchDate']=_0x4af46c?Timestamp[_0x42f857(0x217)](new Date(_0x4af46c)):null,_0x347c74['winnerName']=document[_0x42f857(0x338)]('edit-highlight-winnerName-input')[_0x42f857(0x223)]['trim'](),_0x347c74['winnerScore']=document[_0x42f857(0x338)]('edit-highlight-winnerScore-input')['value']['trim'](),_0x347c74['loserName']=document['getElementById']('edit-highlight-loserName-input')['value'][_0x42f857(0x2f2)](),_0x347c74['loserScore']=document['getElementById'](_0x42f857(0x1ba))['value']['trim'](),_0x347c74['matchLink']=document['getElementById']('edit-highlight-matchLink-input')[_0x42f857(0x223)]['trim'](),_0x347c74[_0x42f857(0x1da)]=null,_0x347c74['mapVersion']=null,_0x347c74['creatorImageUrl']=null,_0x347c74['achievementPlayer']=null,_0x347c74[_0x42f857(0x2e4)]=null,_0x347c74['achievementDetails']=null,_0x347c74[_0x42f857(0x330)]=null;}else{if(_0x45460c===_0x42f857(0x399))_0x347c74['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x347c74['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x42f857(0x2f2)](),_0x347c74[_0x42f857(0x236)]=document['getElementById'](_0x42f857(0x1c3))['value'][_0x42f857(0x2f2)](),_0x347c74[_0x42f857(0x2f3)]=document['getElementById']('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x347c74['matchInfo']=null,_0x347c74['matchDate']=null,_0x347c74['winnerName']=null,_0x347c74['winnerScore']=null,_0x347c74['loserName']=null,_0x347c74['loserScore']=null,_0x347c74['matchLink']=null,_0x347c74['achievementPlayer']=null,_0x347c74['achievementType']=null,_0x347c74['achievementDetails']=null,_0x347c74['playerProfileUrl']=null;else _0x45460c==='achievement'&&(_0x347c74['achievementPlayer']=document['getElementById'](_0x42f857(0x381))['value']['trim'](),_0x347c74['achievementType']=document['getElementById']('edit-highlight-achievementType-input')['value']['trim'](),_0x347c74['achievementDetails']=document[_0x42f857(0x338)]('edit-highlight-achievementDetails-input')[_0x42f857(0x223)][_0x42f857(0x2f2)](),_0x347c74['playerProfileUrl']=document['getElementById'](_0x42f857(0x35e))['value'][_0x42f857(0x2f2)](),_0x347c74[_0x42f857(0x2be)]=null,_0x347c74['map']=null,_0x347c74['matchDate']=null,_0x347c74[_0x42f857(0x25f)]=null,_0x347c74['winnerScore']=null,_0x347c74['loserName']=null,_0x347c74['loserScore']=null,_0x347c74['matchLink']=null,_0x347c74[_0x42f857(0x1da)]=null,_0x347c74['mapVersion']=null,_0x347c74['creatorImageUrl']=null);}try{if(_0x2b8ab7){_0x347c74[_0x42f857(0x26f)]=serverTimestamp();const _0x157cb7=doc(db,'highlights',_0x2b8ab7);await updateDoc(_0x157cb7,_0x347c74),showNotification('Highlight\x20updated\x20successfully!',_0x42f857(0x3c8));}else _0x347c74['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x42f857(0x3df)),_0x347c74),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0xc5b685){console[_0x42f857(0x2e5)]('Error\x20saving\x20highlight:',_0xc5b685),showNotification('Error\x20saving\x20highlight:\x20'+_0xc5b685['message'],'error');}}async function resimulateMatch(){const _0x481208=a4_0x4df989;try{const _0xf59ae8=document['getElementById'](_0x481208(0x3ae))['value'];if(!_0xf59ae8){showNotification(_0x481208(0x256),_0x481208(0x2e5));return;}const _0x4cec9b=auth['currentUser'];if(!_0x4cec9b){showNotification(_0x481208(0x2d2),_0x481208(0x2e5));return;}const _0x474f17=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':_0x481208(0x2d0),_0x81cd6=doc(db,_0x474f17,_0xf59ae8),_0x180238=await getDoc(_0x81cd6);if(!_0x180238['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x481208(0x2e5));return;}const _0xd6f1b6=_0x180238[_0x481208(0x376)](),_0x4a9cf1=_0xd6f1b6['approvedAt']?_0xd6f1b6[_0x481208(0x3b9)]['toDate']()['toLocaleString']():_0xd6f1b6['matchDate']?_0xd6f1b6['matchDate']['toDate']?_0xd6f1b6['matchDate']['toDate']()[_0x481208(0x33f)]():new Date(_0xd6f1b6[_0x481208(0x36f)])['toLocaleString']():'Unknown',_0x4923e6='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0xd6f1b6['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0xd6f1b6['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0xd6f1b6['winnerScore']+'-'+_0xd6f1b6['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0xd6f1b6['mapPlayed']||_0xd6f1b6[_0x481208(0x1ec)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x4a9cf1+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0xf59ae8+_0x481208(0x2a5)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x481208(0x27e))[_0x481208(0x3c0)]=_0x4923e6,document['getElementById']('match-details-container')['style']['display']='block',document[_0x481208(0x338)](_0x481208(0x3b8))[_0x481208(0x23b)]['display']='block',window['pendingResimulateData']={'matchId':_0xf59ae8,'matchData':_0xd6f1b6,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x2f2da5){console['error'](_0x481208(0x209),_0x2f2da5),showNotification(_0x481208(0x2da)+_0x2f2da5[_0x481208(0x1e7)],'error');}}async function confirmResimulateMatch(){const _0x5d784b=a4_0x4df989;try{const {matchId:_0x538608,matchData:_0x5a7cc3,ladder:_0x329d44}=window['pendingResimulateData'];if(!_0x538608||!_0x5a7cc3){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0x5d784b(0x2e5));return;}const _0x2fccf5=_0x329d44==='D1'?'players':_0x329d44==='D2'?_0x5d784b(0x3f6):'playersD3',_0x518c5d=_0x329d44==='D1'?'eloHistory':_0x329d44==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x4ece3f,_0x43d0b6]=await Promise['all']([getDocs(query(collection(db,_0x2fccf5),where('username','==',_0x5a7cc3['winnerUsername']))),getDocs(query(collection(db,_0x2fccf5),where('username','==',_0x5a7cc3[_0x5d784b(0x2b9)])))]);if(_0x4ece3f[_0x5d784b(0x241)]||_0x43d0b6[_0x5d784b(0x241)]){showNotification(_0x5d784b(0x1ac),_0x5d784b(0x2e5));return;}const _0x1836cd=_0x4ece3f['docs'][0x0]['id'],_0x4448be=_0x43d0b6['docs'][0x0]['id'],_0x4f51e4=_0x4ece3f[_0x5d784b(0x2ed)][0x0]['data'](),_0x22098c=_0x43d0b6['docs'][0x0]['data'](),[_0x248358,_0x51f872]=await Promise['all']([getDocs(query(collection(db,_0x518c5d),where('playerId','==',_0x1836cd),where('matchId','==',_0x538608))),getDocs(query(collection(db,_0x518c5d),where('playerId','==',_0x4448be),where('matchId','==',_0x538608)))]),_0x39e3bc=!_0x248358[_0x5d784b(0x241)],_0x1f91b7=!_0x51f872[_0x5d784b(0x241)],_0x33efc5='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x39e3bc?_0x5d784b(0x3b3):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x1f91b7?_0x5d784b(0x3b3):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x4f51e4[_0x5d784b(0x2d5)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x22098c['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x4f51e4['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x22098c[_0x5d784b(0x35d)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x5d784b(0x2e3))['innerHTML']=_0x33efc5,document['getElementById']('validation-results-container')[_0x5d784b(0x23b)]['display']=_0x5d784b(0x2cb);if(_0x39e3bc&&_0x1f91b7){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.',_0x5d784b(0x2d8));return;}showNotification(_0x5d784b(0x1b3),'info');const _0x249ad8=_0x5a7cc3[_0x5d784b(0x3b9)]||_0x5a7cc3['matchDate']||serverTimestamp(),[_0x59f25a,_0x74a8db]=await Promise['all']([getPlayerEloAtTime(_0x1836cd,_0x249ad8,_0x518c5d),getPlayerEloAtTime(_0x4448be,_0x249ad8,_0x518c5d)]),{calculateElo:_0x1dc02b}=await import(_0x5d784b(0x3c3)),{newWinnerRating:_0x18789a,newLoserRating:_0x330ace}=_0x1dc02b(_0x59f25a,_0x74a8db),_0x4e709d=_0x4f51e4[_0x5d784b(0x35d)]||Number[_0x5d784b(0x2ea)],_0x21871e=_0x22098c['position']||Number['MAX_SAFE_INTEGER'];let _0x5c035b=_0x4e709d,_0x1d3eb8=_0x21871e;_0x4e709d>_0x21871e&&(_0x5c035b=_0x21871e,_0x1d3eb8=_0x21871e+0x1);const _0xbf23a0=writeBatch(db),_0x48277a=doc(db,_0x2fccf5,_0x1836cd);_0xbf23a0['update'](_0x48277a,{'eloRating':_0x18789a,'position':_0x5c035b,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x46f9c7=doc(db,_0x2fccf5,_0x4448be);_0xbf23a0['update'](_0x46f9c7,{'eloRating':_0x330ace,'position':_0x1d3eb8,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x4e709d>_0x21871e){const _0x28a236=await getDocs(query(collection(db,_0x2fccf5),where('position','>',_0x21871e),where(_0x5d784b(0x35d),'<',_0x4e709d)));_0x28a236['forEach'](_0x26cd5e=>{const _0x58fcb0=_0x5d784b,_0x85e870=doc(db,_0x2fccf5,_0x26cd5e['id']),_0x3ea84a=_0x26cd5e['data']()['position'];_0xbf23a0[_0x58fcb0(0x28a)](_0x85e870,{'position':_0x3ea84a+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x39e3bc){const _0x58e648=doc(collection(db,_0x518c5d));_0xbf23a0['set'](_0x58e648,{'playerId':_0x1836cd,'player':_0x5a7cc3[_0x5d784b(0x259)],'previousElo':_0x59f25a,'newElo':_0x18789a,'eloChange':_0x18789a-_0x59f25a,'opponentId':_0x4448be,'opponent':_0x5a7cc3['loserUsername'],'matchResult':'win','previousPosition':_0x4e709d,'newPosition':_0x5c035b,'positionChange':_0x5c035b-_0x4e709d,'matchId':_0x538608,'timestamp':_0x249ad8,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x5d784b(0x36e)],'gameMode':_0x329d44,'matchScore':_0x5a7cc3[_0x5d784b(0x34a)]+'-'+_0x5a7cc3['loserScore'],'mapPlayed':_0x5a7cc3['mapPlayed']||_0x5a7cc3['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x1f91b7){const _0x472c6f=doc(collection(db,_0x518c5d));_0xbf23a0['set'](_0x472c6f,{'playerId':_0x4448be,'player':_0x5a7cc3[_0x5d784b(0x2b9)],'previousElo':_0x74a8db,'newElo':_0x330ace,'eloChange':_0x330ace-_0x74a8db,'opponentId':_0x1836cd,'opponent':_0x5a7cc3['winnerUsername'],'matchResult':_0x5d784b(0x289),'previousPosition':_0x21871e,'newPosition':_0x1d3eb8,'positionChange':_0x1d3eb8-_0x21871e,'matchId':_0x538608,'timestamp':_0x249ad8,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x329d44,'matchScore':_0x5a7cc3['winnerScore']+'-'+_0x5a7cc3[_0x5d784b(0x248)],'mapPlayed':_0x5a7cc3[_0x5d784b(0x367)]||_0x5a7cc3[_0x5d784b(0x1ec)]||_0x5d784b(0x1b6),'note':_0x5d784b(0x3ab)});}const _0x4d076a=_0x329d44==='D1'?'approvedMatches':_0x329d44==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3f1671=doc(db,_0x4d076a,_0x538608);_0xbf23a0['update'](_0x3f1671,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x4f51e4['eloRating'],'originalLoserElo':_0x22098c['eloRating'],'originalWinnerPosition':_0x4e709d,'originalLoserPosition':_0x21871e,'resimulatedWinnerElo':_0x18789a,'resimulatedLoserElo':_0x330ace,'resimulatedWinnerPosition':_0x5c035b,'resimulatedLoserPosition':_0x1d3eb8}),await _0xbf23a0['commit']();const _0x409544=(!_0x39e3bc?0x1:0x0)+(!_0x1f91b7?0x1:0x0),_0x1aaa2f=_0x4e709d!==_0x5c035b||_0x21871e!==_0x1d3eb8;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x409544+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x59f25a+''+_0x18789a+'\x20(+'+(_0x18789a-_0x59f25a)+'),\x20')+(_0x5d784b(0x313)+_0x74a8db+''+_0x330ace+'\x20('+(_0x330ace-_0x74a8db)+').\x20')+(''+(_0x1aaa2f?'Positions\x20updated:\x20Winner\x20'+_0x4e709d+''+_0x5c035b+',\x20Loser\x20'+_0x21871e+''+_0x1d3eb8:'No\x20position\x20changes\x20needed.')),_0x5d784b(0x3c8)),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x293f27){console['error'](_0x5d784b(0x295),_0x293f27),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x293f27[_0x5d784b(0x1e7)],'error');}}async function getPlayerEloAtTime(_0xe6338a,_0x2b8d48,_0x1aecb4){const _0xe72c8c=a4_0x4df989;try{const _0x1014b2=_0x2b8d48['toDate']?_0x2b8d48['toDate']():new Date(_0x2b8d48),_0x51fa0d=query(collection(db,_0x1aecb4),where('playerId','==',_0xe6338a),where('timestamp','<',_0x2b8d48),orderBy(_0xe72c8c(0x2c0),'desc'),limit(0x1)),_0x5eef20=await getDocs(_0x51fa0d);if(!_0x5eef20['empty']){const _0x5e2e8d=_0x5eef20['docs'][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0xe6338a+_0xe72c8c(0x369)+_0x5e2e8d['newElo']),_0x5e2e8d['newElo'];}else return console[_0xe72c8c(0x263)]('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0xe6338a+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x419876){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0xe6338a+':',_0x419876),0x4b0;}}function openResimulateModal(){const _0x38f260=a4_0x4df989;console['log']('openResimulateModal\x20called!');const _0x523fab=document[_0x38f260(0x338)](_0x38f260(0x1e6));console[_0x38f260(0x263)]('Modal\x20element\x20found:',_0x523fab);if(!_0x523fab){console['error'](_0x38f260(0x3cf));return;}_0x523fab['style'][_0x38f260(0x2e6)]=_0x38f260(0x2cb),_0x523fab['style'][_0x38f260(0x1d2)]=_0x38f260(0x387),_0x523fab['style'][_0x38f260(0x34b)]='1',_0x523fab['classList'][_0x38f260(0x245)]('active'),console[_0x38f260(0x263)]('Modal\x20should\x20now\x20be\x20visible'),console[_0x38f260(0x263)](_0x38f260(0x215),window[_0x38f260(0x1e2)](_0x523fab)[_0x38f260(0x2e6)]);const _0x344508=document['getElementById']('match-details-container'),_0x3034b0=document['getElementById']('validation-results-container'),_0x479215=document['getElementById']('confirm-resimulate-btn'),_0x3208ec=document['getElementById']('resimulate-match-id');if(_0x344508)_0x344508[_0x38f260(0x3c0)]='';if(_0x3034b0)_0x3034b0['innerHTML']='';if(_0x479215)_0x479215[_0x38f260(0x23b)]['display']='none';if(_0x3208ec)_0x3208ec['value']='';console['log'](_0x38f260(0x22c));}function closeResimulateModal(){const _0x47ff7f=a4_0x4df989;document['getElementById'](_0x47ff7f(0x1e6))['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a4_0x4df989(0x2e7)]=confirmResimulateMatch,window[a4_0x4df989(0x31b)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x32b495=a4_0x4df989;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x32b495(0x1df),'success');}catch(_0x457b0a){console['error'](_0x32b495(0x20e),_0x457b0a),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x457b0a['message'],_0x32b495(0x2e5));}}function renderPointsOverview(_0x21f604){const _0x3f3e54=a4_0x4df989,_0x520020=document[_0x3f3e54(0x338)]('points-overview-table-body');if(!_0x520020)return;if(_0x21f604['length']===0x0){_0x520020['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x520020['innerHTML']='',_0x21f604['forEach'](_0x425f04=>{const _0x38053d=_0x3f3e54,_0x493526=document['createElement']('tr'),_0x5aaad5=_0x425f04['displayName']||_0x425f04['username']||'Unknown\x20User',_0x3a3abb=_0x425f04['email']||_0x38053d(0x380),_0x32d1d6=_0x425f04['points']||0x0,_0x435c57=_0x425f04['lastPointsModified']?new Date(_0x425f04['lastPointsModified'][_0x38053d(0x3a6)]*0x3e8)[_0x38053d(0x2f9)]():_0x38053d(0x27b);_0x493526['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x5aaad5+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3a3abb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x32d1d6>0x3e8?_0x38053d(0x350):_0x32d1d6>0x1f4?'medium-points':'low-points')+_0x38053d(0x21b)+_0x32d1d6[_0x38053d(0x33f)]()+_0x38053d(0x1ee)+_0x435c57+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x425f04['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x425f04['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x520020['appendChild'](_0x493526);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x3ea489=a4_0x4df989;console[_0x3ea489(0x263)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x5654ec=document[_0x3ea489(0x1af)]('.quick-edit-btn');console[_0x3ea489(0x263)](_0x3ea489(0x243)+_0x5654ec['length']+_0x3ea489(0x307)),_0x5654ec['forEach'](_0x43e62c=>{const _0x3116b5=_0x3ea489,_0x1c8fc1=_0x43e62c[_0x3116b5(0x24a)](!![]);_0x43e62c['parentNode']['replaceChild'](_0x1c8fc1,_0x43e62c);});const _0x25fd42=document['querySelectorAll'](_0x3ea489(0x333));console['log'](_0x3ea489(0x243)+_0x25fd42['length']+_0x3ea489(0x352)),_0x25fd42['forEach'](_0x2156e9=>{const _0x1a6615=_0x3ea489,_0x7f1d19=_0x2156e9['cloneNode'](!![]);_0x2156e9['parentNode'][_0x1a6615(0x39f)](_0x7f1d19,_0x2156e9);}),document[_0x3ea489(0x1af)]('.quick-edit-btn')[_0x3ea489(0x2e0)](_0x4582dd=>{const _0x5e9893=_0x3ea489;_0x4582dd['addEventListener'](_0x5e9893(0x1d1),function(_0x396a0c){const _0x4f122e=_0x5e9893;_0x396a0c[_0x4f122e(0x21a)](),_0x396a0c['stopPropagation']();const _0x42dc4b=this[_0x4f122e(0x2c1)]['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x42dc4b);if(!_0x42dc4b){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x4f122e(0x23b)][_0x4f122e(0x34b)]='0.6',setTimeout(()=>{const _0xcf859d=_0x4f122e;this['style'][_0xcf859d(0x34b)]='1';},0xc8),openQuickEditModal(_0x42dc4b);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x278628=>{const _0x4aea45=_0x3ea489;_0x278628['addEventListener'](_0x4aea45(0x1d1),function(_0x56afa3){const _0x315dc2=_0x4aea45;_0x56afa3['preventDefault'](),_0x56afa3[_0x315dc2(0x27c)]();const _0x211fb0=this['dataset']['userId'];console['log']('View\x20history\x20clicked\x20for\x20user:',_0x211fb0);if(!_0x211fb0){console['error'](_0x315dc2(0x3b1));return;}this[_0x315dc2(0x23b)]['opacity']='0.6',setTimeout(()=>{const _0x23ce84=_0x315dc2;this['style'][_0x23ce84(0x34b)]='1';},0xc8),loadUserPointsHistory(_0x211fb0);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x3dd79a){const _0x13f0e2=a4_0x4df989;console[_0x13f0e2(0x263)](_0x13f0e2(0x374),_0x3dd79a);const _0x1c500f=document['getElementById']('quick-edit-points-modal');if(!_0x1c500f){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page',_0x13f0e2(0x2e5));return;}try{showNotification('Loading\x20user\x20data...',_0x13f0e2(0x317));const _0x5e2d3f=doc(db,'userProfiles',_0x3dd79a),_0x4eaf41=await getDoc(_0x5e2d3f);if(!_0x4eaf41[_0x13f0e2(0x39b)]()){showNotification('User\x20not\x20found',_0x13f0e2(0x2e5));return;}const _0x363c2f=_0x4eaf41['data']();console[_0x13f0e2(0x263)]('User\x20data\x20loaded:',_0x363c2f);const _0xf8d449=document['getElementById']('quick-edit-user-id'),_0x11d196=document[_0x13f0e2(0x338)]('quick-edit-display-name'),_0x1fbdcf=document[_0x13f0e2(0x338)]('quick-edit-email'),_0x25c666=document['getElementById']('quick-edit-current-points'),_0x25f68e=document['getElementById']('quick-edit-points-form');if(!_0xf8d449||!_0x11d196||!_0x1fbdcf||!_0x25c666||!_0x25f68e){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.',_0x13f0e2(0x2e5));return;}_0xf8d449[_0x13f0e2(0x223)]=_0x3dd79a,_0x11d196['textContent']=_0x363c2f[_0x13f0e2(0x3a9)]||_0x363c2f['username']||'Unknown\x20User',_0x1fbdcf['textContent']=_0x363c2f['email']||'No\x20email',_0x25c666[_0x13f0e2(0x2a2)]=(_0x363c2f['points']||0x0)['toLocaleString'](),_0x25f68e['reset']();const _0x1b7908=document[_0x13f0e2(0x338)]('quick-add');_0x1b7908&&(_0x1b7908['checked']=!![]);_0x1c500f['classList']['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x2934d1=document[_0x13f0e2(0x338)]('quick-points-amount');_0x2934d1&&setTimeout(()=>_0x2934d1['focus'](),0x64);}catch(_0x3fe497){console[_0x13f0e2(0x2e5)]('Error\x20opening\x20quick\x20edit\x20modal:',_0x3fe497),showNotification(_0x13f0e2(0x3ad)+_0x3fe497['message'],'error');}}function closeQuickEditModal(){const _0x49c8ed=a4_0x4df989,_0x4f0fe6=document['getElementById']('quick-edit-points-modal');_0x4f0fe6&&_0x4f0fe6['classList'][_0x49c8ed(0x321)](_0x49c8ed(0x3b6));}async function handleQuickEditPoints(_0x331bd7){const _0x214cb3=a4_0x4df989;_0x331bd7['preventDefault']();const _0x7c7b4=document['getElementById'](_0x214cb3(0x1ea))['value'],_0x1bb42c=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x5afaf4=parseInt(document['getElementById']('quick-points-amount')['value']),_0x3fa8df=document['getElementById']('quick-points-reason')[_0x214cb3(0x223)]['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0x7c7b4,'action':_0x1bb42c,'amount':_0x5afaf4,'reason':_0x3fa8df});if(!_0x7c7b4||!_0x5afaf4||_0x5afaf4<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x7c7b4,_0x1bb42c,_0x5afaf4,_0x3fa8df),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x7c7b4);}catch(_0x332878){console[_0x214cb3(0x2e5)](_0x214cb3(0x1b1),_0x332878),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x332878['message'],_0x214cb3(0x2e5));}}async function searchUsersForPoints(){const _0x41ce10=a4_0x4df989,_0x52fd2c=document['getElementById']('points-user-search')[_0x41ce10(0x223)]['trim']()['toLowerCase'](),_0x11d4ce=document['getElementById']('user-search-results');if(!_0x52fd2c||_0x52fd2c['length']<0x2){_0x11d4ce['innerHTML']='';return;}_0x11d4ce['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x58385e=collection(db,_0x41ce10(0x20d)),_0x4ebcb7=await getDocs(_0x58385e),_0x1962c5=[];_0x4ebcb7['forEach'](_0x445235=>{const _0xb41ec7=_0x41ce10,_0x2f8838=_0x445235['data'](),_0x5a0d98=(_0x2f8838[_0xb41ec7(0x3a9)]||_0x2f8838[_0xb41ec7(0x32a)]||'')[_0xb41ec7(0x1fc)](),_0xcaab28=(_0x2f8838['email']||'')['toLowerCase']();(_0x5a0d98['includes'](_0x52fd2c)||_0xcaab28['includes'](_0x52fd2c))&&_0x1962c5['push']({'id':_0x445235['id'],..._0x2f8838});});if(_0x1962c5['length']===0x0){_0x11d4ce['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x11d4ce['innerHTML']='',_0x1962c5[_0x41ce10(0x2e0)](_0x1875f0=>{const _0x276e4c=_0x41ce10,_0x9b1a30=document['createElement']('div');_0x9b1a30['className']='search-result-item',_0x9b1a30[_0x276e4c(0x3c0)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x1875f0['displayName']||_0x1875f0['username']||_0x276e4c(0x1b6))+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x1875f0[_0x276e4c(0x36a)]||_0x276e4c(0x380))+_0x276e4c(0x1f4)+(_0x1875f0['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x9b1a30['addEventListener'](_0x276e4c(0x1d1),()=>selectUserForPoints(_0x1875f0)),_0x11d4ce['appendChild'](_0x9b1a30);});}catch(_0x26e6aa){console['error']('Error\x20searching\x20users:',_0x26e6aa),_0x11d4ce[_0x41ce10(0x3c0)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x3e73a5){const _0x40dbb4=a4_0x4df989;document[_0x40dbb4(0x338)]('selected-user-name')['textContent']=_0x3e73a5['displayName']||_0x3e73a5['username']||'Unknown\x20User',document['getElementById'](_0x40dbb4(0x210))[_0x40dbb4(0x2a2)]=(_0x3e73a5['points']||0x0)['toLocaleString'](),document[_0x40dbb4(0x338)](_0x40dbb4(0x2c3))['value']=_0x3e73a5['id'],document['getElementById']('selected-user-info')['style'][_0x40dbb4(0x2e6)]='block',document['getElementById']('points-management-forms')[_0x40dbb4(0x23b)]['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document[_0x40dbb4(0x338)]('points-user-search')['value']='';}async function handleModifyPoints(_0x437c27){const _0x567013=a4_0x4df989;_0x437c27['preventDefault']();const _0x3132f9=document['getElementById']('selected-user-id')['value'],_0x2a70ad=document['getElementById']('points-action')['value'],_0x3836fc=parseInt(document['getElementById']('points-amount')['value']),_0x3e23f0=document['getElementById']('points-reason')['value'][_0x567013(0x2f2)]();if(!_0x3132f9||!_0x3836fc||_0x3836fc<0x0){showNotification(_0x567013(0x1fd),'error');return;}try{await modifyUserPoints(_0x3132f9,_0x2a70ad,_0x3836fc,_0x3e23f0),document['getElementById']('modify-points-form')['reset']();const _0xe735fb=doc(db,_0x567013(0x20d),_0x3132f9),_0x172a5b=await getDoc(_0xe735fb);if(_0x172a5b['exists']()){const _0x32d19b=_0x172a5b[_0x567013(0x376)]();document['getElementById']('selected-user-points')['textContent']=(_0x32d19b['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x40094b){console['error']('Error\x20modifying\x20points:',_0x40094b),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x40094b[_0x567013(0x1e7)],_0x567013(0x2e5));}}async function loadPointsHistory(){const _0x4c8afc=a4_0x4df989,_0x368dd4=document[_0x4c8afc(0x338)]('points-history-table-body');if(!_0x368dd4)return;_0x368dd4['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x30433e=collection(db,'pointsHistory'),_0x4435c6=query(_0x30433e,orderBy('timestamp','desc'),limit(0x32)),_0x30cb47=await getDocs(_0x4435c6);if(_0x30cb47['empty']){_0x368dd4['innerHTML']=_0x4c8afc(0x1dd);return;}_0x368dd4[_0x4c8afc(0x3c0)]='',_0x30cb47[_0x4c8afc(0x2e0)](_0x2c4830=>{const _0x26b6d0=_0x4c8afc,_0x3f2f75=_0x2c4830['data'](),_0x3e5431=document['createElement']('tr'),_0x406a66=_0x3f2f75[_0x26b6d0(0x2c0)]?new Date(_0x3f2f75['timestamp']['seconds']*0x3e8)[_0x26b6d0(0x33f)]():'Unknown';let _0x391c18='';switch(_0x3f2f75['action']){case'add':_0x391c18='Added\x20'+_0x3f2f75['amount']+'\x20points';break;case _0x26b6d0(0x353):_0x391c18=_0x26b6d0(0x34d)+_0x3f2f75['amount']+'\x20points';break;case'set':_0x391c18=_0x26b6d0(0x2a1)+_0x3f2f75['amount']+'\x20points';break;default:_0x391c18=_0x3f2f75['action']+'\x20'+_0x3f2f75['amount']+'\x20points';}_0x3e5431[_0x26b6d0(0x3c0)]=_0x26b6d0(0x2df)+_0x406a66+_0x26b6d0(0x261)+(_0x3f2f75['displayName']||_0x26b6d0(0x3d3))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x391c18+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x3f2f75['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3f2f75['previousPoints']||0x0)+_0x26b6d0(0x384)+(_0x3f2f75['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3f2f75['reason']||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3f2f75[_0x26b6d0(0x1b8)]||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x368dd4['appendChild'](_0x3e5431);});}catch(_0x349dd8){console[_0x4c8afc(0x2e5)]('Error\x20loading\x20points\x20history:',_0x349dd8),_0x368dd4[_0x4c8afc(0x3c0)]='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x349dd8['message']+_0x4c8afc(0x22e);}}function filterPointsOverview(){const _0x4ab347=a4_0x4df989,_0x19ac94=document[_0x4ab347(0x338)]('points-overview-search')['value'][_0x4ab347(0x1fc)]();if(!window[_0x4ab347(0x2bf)])return;const _0x1f2c2c=window['allUsersPoints'][_0x4ab347(0x379)](_0x22da9a=>{const _0x416d98=_0x4ab347,_0xb345d0=(_0x22da9a['displayName']||_0x22da9a['username']||'')['toLowerCase'](),_0x567d75=(_0x22da9a[_0x416d98(0x36a)]||'')['toLowerCase']();return _0xb345d0['includes'](_0x19ac94)||_0x567d75['includes'](_0x19ac94);});renderPointsOverview(_0x1f2c2c);}function sortPointsOverview(){const _0x2ced34=a4_0x4df989,_0x71e0c8=document['getElementById']('points-sort-order')[_0x2ced34(0x223)];if(!window['allUsersPoints'])return;const _0x4a2b27=[...window['allUsersPoints']];switch(_0x71e0c8){case'points-desc':_0x4a2b27['sort']((_0x52806d,_0x37c258)=>(_0x37c258['points']||0x0)-(_0x52806d['points']||0x0));break;case _0x2ced34(0x20a):_0x4a2b27['sort']((_0x52e3c4,_0x122c3d)=>(_0x52e3c4['points']||0x0)-(_0x122c3d['points']||0x0));break;case'name-asc':_0x4a2b27['sort']((_0x5cf665,_0x11b77f)=>{const _0x4136da=_0x2ced34,_0x44dfa0=(_0x5cf665['displayName']||_0x5cf665['username']||'')['toLowerCase'](),_0x704f4d=(_0x11b77f[_0x4136da(0x3a9)]||_0x11b77f[_0x4136da(0x32a)]||'')['toLowerCase']();return _0x44dfa0['localeCompare'](_0x704f4d);});break;case'name-desc':_0x4a2b27[_0x2ced34(0x37d)]((_0x31fc74,_0x23333d)=>{const _0x448f1d=_0x2ced34,_0x4f6645=(_0x31fc74['displayName']||_0x31fc74[_0x448f1d(0x32a)]||'')['toLowerCase'](),_0x15ea36=(_0x23333d[_0x448f1d(0x3a9)]||_0x23333d['username']||'')['toLowerCase']();return _0x15ea36[_0x448f1d(0x3b5)](_0x4f6645);});break;}renderPointsOverview(_0x4a2b27);}async function handleAwardItem(_0x565f5f){_0x565f5f['preventDefault']();const _0x341d5e=document['getElementById']('selected-user-id')['value'],_0x2af154=document['getElementById']('store-item-select')['value'],_0x4b76cb=document['getElementById']('award-reason')['value']['trim']();if(!_0x341d5e||!_0x2af154){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0x3606c4){console['error']('Error\x20awarding\x20item:',_0x3606c4),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x3606c4['message'],'error');}}async function loadUserPointsHistory(_0x2cdb37){const _0x30a8ca=a4_0x4df989;try{const _0x4ea7f1=collection(db,_0x30a8ca(0x359)),_0x5d4c5a=query(_0x4ea7f1,where(_0x30a8ca(0x3a3),'==',_0x2cdb37),orderBy('timestamp','desc')),_0x56f1c7=await getDocs(_0x5d4c5a);console['log'](_0x30a8ca(0x243)+_0x56f1c7['size']+_0x30a8ca(0x3dd)+_0x2cdb37),showNotification('User\x20has\x20'+_0x56f1c7[_0x30a8ca(0x1b4)]+'\x20points\x20history\x20entries',_0x30a8ca(0x317));}catch(_0x19c146){console[_0x30a8ca(0x2e5)]('Error\x20loading\x20user\x20points\x20history:',_0x19c146),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x562c3f=a4_0x4df989;try{console[_0x562c3f(0x263)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x116a1d=collection(db,_0x562c3f(0x20d)),_0x5c622d=await getDocs(_0x116a1d);if(_0x5c622d['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x296ba7=0x0,_0x483202=0x0;const _0x34f1d3=writeBatch(db);let _0x3fce9a=0x0;return console['log']('Found\x20'+_0x5c622d['size']+'\x20users\x20to\x20check...'),_0x5c622d['forEach'](_0x2d4a19=>{const _0x76385e=_0x562c3f,_0xe65773=_0x2d4a19['data']();_0xe65773['points']===undefined||_0xe65773['points']===null?(_0x34f1d3['update'](_0x2d4a19[_0x76385e(0x285)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x296ba7++,_0x3fce9a++,console['log'](_0x76385e(0x3c5)+(_0xe65773['displayName']||_0xe65773['username']||_0xe65773[_0x76385e(0x36a)]||'Unknown')+'\x20for\x20points\x20initialization')):(_0x483202++,console[_0x76385e(0x263)]((_0xe65773[_0x76385e(0x3a9)]||_0xe65773[_0x76385e(0x32a)]||_0xe65773['email']||'Unknown')+_0x76385e(0x25c)+_0xe65773['points'])),_0x3fce9a>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x296ba7>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x296ba7+_0x562c3f(0x2dc)),await _0x34f1d3['commit'](),console[_0x562c3f(0x263)]('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x296ba7+'\x20users')):console['log'](_0x562c3f(0x389)),console[_0x562c3f(0x263)]('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x5c622d['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x296ba7+_0x562c3f(0x35a)+_0x483202),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x296ba7+'\x20users.\x20'+_0x483202+'\x20users\x20already\x20had\x20points.','success'),window[_0x562c3f(0x2bf)]&&loadPointsOverview(),{'totalUsers':_0x5c622d['size'],'usersUpdated':_0x296ba7,'usersAlreadyHadPoints':_0x483202};}catch(_0x47520b){console['error']('Error\x20initializing\x20points\x20field:',_0x47520b),showNotification('Error\x20initializing\x20points:\x20'+_0x47520b['message'],'error');throw _0x47520b;}}function addPointsMigrationButton(){const _0x31ae25=a4_0x4df989,_0x5431a0=document['getElementById']('manage-points');if(!_0x5431a0)return;if(document['getElementById']('migrate-points-btn'))return;const _0x211804=document['createElement'](_0x31ae25(0x3c1));_0x211804[_0x31ae25(0x299)]='migration-section',_0x211804['style']['marginBottom']='20px',_0x211804['style']['padding']='15px',_0x211804[_0x31ae25(0x23b)][_0x31ae25(0x32c)]='rgba(255,\x20193,\x207,\x200.1)',_0x211804['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x211804[_0x31ae25(0x23b)]['borderRadius']=_0x31ae25(0x2fe),_0x211804['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x2c23d3=_0x5431a0[_0x31ae25(0x396)]('.section-header');_0x2c23d3&&_0x2c23d3['insertAdjacentElement']('afterend',_0x211804),document['getElementById'](_0x31ae25(0x21d))['addEventListener'](_0x31ae25(0x1d1),async function(){const _0x1f093d=_0x31ae25;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this[_0x1f093d(0x23b)][_0x1f093d(0x32c)]=_0x1f093d(0x370),setTimeout(()=>{_0x211804['style']['display']='none';},0xbb8);}catch(_0x2a2209){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x1f093d(0x3e9)]=![];}}});}function setupManagePointsSection(){const _0x5f07a5=a4_0x4df989;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x2260b9=document['getElementById'](_0x5f07a5(0x1f3));_0x2260b9&&_0x2260b9['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x5c1ace=document['getElementById'](_0x5f07a5(0x33d));_0x5c1ace&&_0x5c1ace[_0x5f07a5(0x2fd)]('submit',handleModifyPoints);const _0x4d765a=document[_0x5f07a5(0x338)]('award-item-form');_0x4d765a&&_0x4d765a['addEventListener'](_0x5f07a5(0x1d5),handleAwardItem);const _0x1e2052=document['getElementById']('points-overview-search');_0x1e2052&&_0x1e2052['addEventListener'](_0x5f07a5(0x281),debounce(filterPointsOverview,0x12c));const _0x9b73c5=document['getElementById'](_0x5f07a5(0x337));_0x9b73c5&&_0x9b73c5[_0x5f07a5(0x2fd)]('change',sortPointsOverview);const _0x4af761=document['getElementById']('refresh-points-overview');_0x4af761&&_0x4af761[_0x5f07a5(0x2fd)]('click',loadPointsOverview);const _0x406a71=document['getElementById'](_0x5f07a5(0x2a6));if(_0x406a71){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x35ae04=_0x406a71['querySelector']('.close-btn');_0x35ae04?_0x35ae04[_0x5f07a5(0x2fd)]('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console[_0x5f07a5(0x2c2)]('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x4a9c29=document['getElementById']('cancel-quick-edit');_0x4a9c29?_0x4a9c29['addEventListener'](_0x5f07a5(0x1d1),function(){const _0x13f5d5=_0x5f07a5;console['log'](_0x13f5d5(0x2ac)),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x26daa9=document['getElementById'](_0x5f07a5(0x364));_0x26daa9?_0x26daa9['addEventListener']('submit',function(_0x408417){const _0x52e444=_0x5f07a5;console[_0x52e444(0x263)](_0x52e444(0x312)),handleQuickEditPoints(_0x408417);}):console['error'](_0x5f07a5(0x2f8)),_0x406a71['addEventListener'](_0x5f07a5(0x1d1),function(_0x4c50cc){const _0x3d798b=_0x5f07a5;_0x4c50cc['target']===_0x406a71&&(console['log'](_0x3d798b(0x2e1)),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console[_0x5f07a5(0x263)]('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0x29a30a=a4_0x4df989;console['log'](_0x29a30a(0x1c4));const _0x135ad0=document[_0x29a30a(0x338)]('ribbon-user-search');_0x135ad0&&_0x135ad0[_0x29a30a(0x2fd)](_0x29a30a(0x281),debounce(searchRibbonUser,0x12c));const _0x2bb9ad=document[_0x29a30a(0x338)]('search-ribbon-user-btn');_0x2bb9ad&&_0x2bb9ad['addEventListener'](_0x29a30a(0x1d1),searchRibbonUser);const _0x568340=document['getElementById']('add-ribbon-form');_0x568340&&_0x568340[_0x29a30a(0x2fd)]('submit',addRibbon),_0x135ad0&&_0x135ad0[_0x29a30a(0x2fd)]('keypress',function(_0xb005d5){_0xb005d5['key']==='Enter'&&(_0xb005d5['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x2db7ca,_0x1ff4ed,_0x188325,_0x3493e9=''){const _0x4eddf1=a4_0x4df989,_0x4f153a=doc(db,'userProfiles',_0x2db7ca),_0x3eddf3=await getDoc(_0x4f153a);if(!_0x3eddf3[_0x4eddf1(0x39b)]())throw new Error(_0x4eddf1(0x36b));const _0x528221=_0x3eddf3[_0x4eddf1(0x376)](),_0x50d401=_0x528221[_0x4eddf1(0x318)]!==undefined?_0x528221['points']:0x0;_0x528221[_0x4eddf1(0x318)]===undefined&&(console['log'](_0x4eddf1(0x202)+(_0x528221['displayName']||_0x528221['email']||'Unknown')),await updateDoc(_0x4f153a,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x3b694b=_0x50d401;switch(_0x1ff4ed){case _0x4eddf1(0x245):_0x3b694b=_0x50d401+_0x188325;break;case'subtract':_0x3b694b=Math['max'](0x0,_0x50d401-_0x188325);break;case _0x4eddf1(0x297):_0x3b694b=_0x188325;break;default:throw new Error(_0x4eddf1(0x29a));}await updateDoc(_0x4f153a,{'points':_0x3b694b,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x4eddf1(0x359)),{'userId':_0x2db7ca,'userEmail':_0x528221['email']||'unknown','displayName':_0x528221['displayName']||_0x528221['username']||_0x4eddf1(0x3d3),'action':_0x1ff4ed,'amount':_0x188325,'previousPoints':_0x50d401,'newPoints':_0x3b694b,'reason':_0x3493e9,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x4a9e5a=a4_0x4df989,_0x865c56=document[_0x4a9e5a(0x338)]('points-overview-table-body');if(!_0x865c56)return;_0x865c56['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x5e529f=collection(db,'userProfiles'),_0x36f412=await getDocs(_0x5e529f);if(_0x36f412['empty']){_0x865c56['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x5cd46c=[];let _0x5b982c=0x0;_0x36f412[_0x4a9e5a(0x2e0)](_0x40ced1=>{const _0x33c8e5=_0x4a9e5a,_0x6ad541=_0x40ced1['data'](),_0x1f99ff=_0x6ad541['points']!==undefined?_0x6ad541['points']:0x0;_0x6ad541['points']===undefined&&_0x5b982c++,_0x5cd46c[_0x33c8e5(0x1de)]({'id':_0x40ced1['id'],..._0x6ad541,'points':_0x1f99ff});}),_0x5b982c>0x0&&(console['log']('Found\x20'+_0x5b982c+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x5b982c+_0x4a9e5a(0x282),'info')),_0x5cd46c['sort']((_0x5b5661,_0x4994c5)=>(_0x4994c5[_0x4a9e5a(0x318)]||0x0)-(_0x5b5661['points']||0x0)),window[_0x4a9e5a(0x2bf)]=_0x5cd46c,renderPointsOverview(_0x5cd46c);}catch(_0xcc2f34){console['error']('Error\x20loading\x20points\x20overview:',_0xcc2f34),_0x865c56[_0x4a9e5a(0x3c0)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0xcc2f34['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x264f97=a4_0x4df989,_0x173104=document[_0x264f97(0x338)]('ribbons-overview-table-body');if(!_0x173104)return;_0x173104[_0x264f97(0x3c0)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x29710f,_0x48d540,_0x835698]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x264f97(0x1c8)))]);_0x173104['innerHTML']='';const _0x5233ed=(_0x16de4e,_0x51f025)=>{const _0x47eba7=_0x264f97;_0x16de4e[_0x47eba7(0x2e0)](_0xe9e669=>{const _0x121923=_0x47eba7,_0x58be3b=_0xe9e669['data'](),_0x173b17=_0x58be3b['ribbons']||{},_0x1cbbcc=Object[_0x121923(0x2ce)](_0x173b17)['length'],_0x47088f=document[_0x121923(0x274)]('tr');_0x47088f[_0x121923(0x3c0)]=_0x121923(0x3cb)+(_0x58be3b['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x51f025['toLowerCase']()+'\x22>'+_0x51f025+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cbbcc+_0x121923(0x1f1)+(_0x58be3b['lastUpdated']?new Date(_0x58be3b['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x58be3b['username']+'\x22\x20data-ladder=\x22'+_0x51f025+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x173104[_0x121923(0x1ef)](_0x47088f);});};_0x5233ed(_0x29710f,'D1'),_0x5233ed(_0x48d540,'D2'),_0x5233ed(_0x835698,'D3'),document['querySelectorAll'](_0x264f97(0x227))[_0x264f97(0x2e0)](_0x5c50d3=>{_0x5c50d3['addEventListener']('click',function(){const _0x7782eb=a4_0x3018,_0x605b68=this['dataset'][_0x7782eb(0x32a)],_0x3a77c1=this[_0x7782eb(0x2c1)][_0x7782eb(0x237)];editUserRibbons(_0x605b68,_0x3a77c1);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x5b62bb){console['error'](_0x264f97(0x375),_0x5b62bb),_0x173104[_0x264f97(0x3c0)]=_0x264f97(0x1c1),showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x21ac7b=a4_0x4df989,_0x899d8f=document['getElementById']('ribbon-user-search')[_0x21ac7b(0x223)]['trim']();if(!_0x899d8f){showNotification('Please\x20enter\x20a\x20username',_0x21ac7b(0x2e5));return;}try{const [_0x59410e,_0xe66b59,_0x3d1428]=await Promise[_0x21ac7b(0x3f0)]([getDoc(doc(db,'playerRibbons',_0x899d8f)),getDoc(doc(db,'playerRibbonsD2',_0x899d8f)),getDoc(doc(db,'playerRibbonsD3',_0x899d8f))]);let _0x3a7df0=null,_0x328944=null;if(_0x59410e[_0x21ac7b(0x39b)]())_0x3a7df0='D1',_0x328944=_0x59410e[_0x21ac7b(0x376)]();else{if(_0xe66b59['exists']())_0x3a7df0='D2',_0x328944=_0xe66b59['data']();else _0x3d1428['exists']()&&(_0x3a7df0='D3',_0x328944=_0x3d1428[_0x21ac7b(0x376)]());}_0x3a7df0?(document['getElementById']('current-ribbon-user')['textContent']=_0x899d8f,document['getElementById']('ribbon-target-user')['value']=_0x899d8f,document['getElementById']('ribbon-target-ladder')['value']=_0x3a7df0,document['getElementById']('user-ribbon-management')['style']['display']='block',displayCurrentRibbons(_0x328944['ribbons']||{}),showNotification('Found\x20'+_0x899d8f+'\x20in\x20'+_0x3a7df0+'\x20ladder','success')):showNotification(_0x21ac7b(0x1cd)+_0x899d8f+_0x21ac7b(0x3ac),_0x21ac7b(0x2e5));}catch(_0x359d9e){console['error']('Error\x20searching\x20user:',_0x359d9e),showNotification(_0x21ac7b(0x200),_0x21ac7b(0x2e5));}}function displayCurrentRibbons(_0x42aa57){const _0x349230=a4_0x4df989,_0x2a1676=document['getElementById'](_0x349230(0x2f1));if(!_0x2a1676)return;_0x2a1676[_0x349230(0x3c0)]='';if(Object['keys'](_0x42aa57)[_0x349230(0x206)]===0x0){_0x2a1676[_0x349230(0x3c0)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x42aa57)['forEach'](([_0x40b6d9,_0x3d5919])=>{const _0x191ff0=_0x349230,_0x36b3d1=document['createElement']('div');_0x36b3d1['className']='ribbon-item',_0x36b3d1['innerHTML']=_0x191ff0(0x37b)+_0x40b6d9+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x3d5919['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x3d5919[_0x191ff0(0x271)]?new Date(_0x3d5919['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x40b6d9+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2a1676['appendChild'](_0x36b3d1);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x2d2785=>{const _0x564444=_0x349230;_0x2d2785['addEventListener'](_0x564444(0x1d1),function(){const _0x143603=_0x564444,_0x14d632=this[_0x143603(0x2c1)]['ribbon'];removeRibbon(_0x14d632);});});}async function addRibbon(_0x9864f){const _0x426aa3=a4_0x4df989;_0x9864f['preventDefault']();const _0x366758=document[_0x426aa3(0x338)]('ribbon-target-user')['value'],_0x325794=document[_0x426aa3(0x338)]('ribbon-target-ladder')['value'],_0x40d8fb=document[_0x426aa3(0x338)](_0x426aa3(0x319))['value'],_0x33839d=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x366758||!_0x325794||!_0x40d8fb||!_0x33839d){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x37490d='playerRibbons'+(_0x325794==='D1'?'':_0x325794),_0x88b5c3=doc(db,_0x37490d,_0x366758),_0x5bba59=await getDoc(_0x88b5c3),_0x3b4874=_0x5bba59['exists']()?_0x5bba59['data']()[_0x426aa3(0x3ef)]||{}:{};_0x3b4874[_0x40d8fb]={'level':_0x33839d,'awardedAt':serverTimestamp()},await setDoc(_0x88b5c3,{'username':_0x366758,'ladder':_0x325794,'ribbons':_0x3b4874,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x40d8fb+'\x20Level\x20'+_0x33839d+'\x20to\x20'+_0x366758,_0x426aa3(0x3c8)),displayCurrentRibbons(_0x3b4874),document['getElementById']('ribbon-type-select')['value']='',document['getElementById'](_0x426aa3(0x1d7))[_0x426aa3(0x223)]='1';}catch(_0x184275){console['error'](_0x426aa3(0x3c4),_0x184275),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x2c67ba){const _0x40bf8e=a4_0x4df989,_0x278801=document['getElementById'](_0x40bf8e(0x356))['value'],_0x48e710=document[_0x40bf8e(0x338)]('ribbon-target-ladder')['value'];if(!confirm(_0x40bf8e(0x220)+_0x2c67ba+'\x20from\x20'+_0x278801+'?'))return;try{const _0x21a020='playerRibbons'+(_0x48e710==='D1'?'':_0x48e710),_0x2d5df6=doc(db,_0x21a020,_0x278801),_0x48a187=await getDoc(_0x2d5df6),_0x4dad37=_0x48a187[_0x40bf8e(0x39b)]()?_0x48a187[_0x40bf8e(0x376)]()['ribbons']||{}:{};delete _0x4dad37[_0x2c67ba],await setDoc(_0x2d5df6,{'username':_0x278801,'ladder':_0x48e710,'ribbons':_0x4dad37,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x2c67ba+'\x20from\x20'+_0x278801,_0x40bf8e(0x3c8)),displayCurrentRibbons(_0x4dad37);}catch(_0x40a869){console['error']('Error\x20removing\x20ribbon:',_0x40a869),showNotification('Error\x20removing\x20ribbon',_0x40bf8e(0x2e5));}}function editUserRibbons(_0x4fc853,_0x44d989){const _0x16b0b7=a4_0x4df989;document[_0x16b0b7(0x338)]('ribbon-user-search')[_0x16b0b7(0x223)]=_0x4fc853,searchRibbonUser();}