const a17_0x3a0901=a17_0x4291,a17_0xfa484a=(function(){let _0x3fa105=!![];return function(_0x38e529,_0x4da0e3){const _0x3d6e8e=_0x3fa105?function(){const _0x1a1617=a17_0x4291;if(_0x4da0e3){const _0x3e5287=_0x4da0e3[_0x1a1617(0x1b7)](_0x38e529,arguments);return _0x4da0e3=null,_0x3e5287;}}:function(){};return _0x3fa105=![],_0x3d6e8e;};}()),a17_0x2683c5=a17_0xfa484a(this,function(){const _0x5ea4ee=a17_0x4291;let _0x1506de;try{const _0x2fc61d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1506de=_0x2fc61d();}catch(_0x4dfecf){_0x1506de=window;}const _0x1f2ecc=_0x1506de[_0x5ea4ee(0x1bc)]=_0x1506de['console']||{},_0x2a91d2=['log','warn','info','error','exception','table',_0x5ea4ee(0x1ba)];for(let _0x150173=0x0;_0x150173<_0x2a91d2['length'];_0x150173++){const _0x52ef38=a17_0xfa484a[_0x5ea4ee(0x1af)][_0x5ea4ee(0x19b)]['bind'](a17_0xfa484a),_0x3a2f0f=_0x2a91d2[_0x150173],_0x4050ad=_0x1f2ecc[_0x3a2f0f]||_0x52ef38;_0x52ef38['__proto__']=a17_0xfa484a[_0x5ea4ee(0x1a3)](a17_0xfa484a),_0x52ef38[_0x5ea4ee(0x1b4)]=_0x4050ad[_0x5ea4ee(0x1b4)]['bind'](_0x4050ad),_0x1f2ecc[_0x3a2f0f]=_0x52ef38;}});function a17_0x2c09(){const _0x9e3a96=['RDL_SESSION_SUSPENDED','getDocument','debug','firebase-suspend-indicator','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','blockedOperations','substr','delete','get','size','[FirebaseIdle]\x20No\x20listeners\x20to\x20resume','prototype','resumeSession','[FirebaseIdle]\x20Listener\x20created:\x20','operation','safeOperation','warn','args','set','bind','[FirebaseIdle]\x20Debug\x20mode\x20','[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20','_suspendedListeners','resumeAllListeners','[FirebaseIdle]\x20Suspending\x20listener:','Error\x20executing\x20pending\x20operation:','enableDebug','updateDocument','[FirebaseIdle]\x20Blocked\x20','forEach','query','constructor','all','suspendAllListeners','[FirebaseIdle]\x20Error\x20resuming\x20listener:','createListener','toString','log','div','apply','add','\x20total\x20operations','trace','activeListeners','console','\x20operations:\x20','test','operationType','[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20','listener_'];a17_0x2c09=function(){return _0x9e3a96;};return a17_0x2c09();}a17_0x2683c5();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x3a64c6=a17_0x4291;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this[_0x3a64c6(0x195)]=0x0,this['debug']=![];}['checkSessionActive'](){const _0x1c50b4=a17_0x4291;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this[_0x1c50b4(0x195)]=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0x1c50b4(0x1a0)](_0x1c50b4(0x1ac)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console[_0x1c50b4(0x1b5)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x2b2beb,_0x4ed17b,..._0xd87bfa){const _0x554912=a17_0x4291;if(!this['checkSessionActive']()){const _0x5b5791=_0x4ed17b+'-'+Date['now']()+'-'+Math['random']()[_0x554912(0x1b4)](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x5b5791,{'operation':_0x2b2beb,'operationType':_0x4ed17b,'args':_0xd87bfa}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x2b2beb(..._0xd87bfa);}catch(_0x5969b1){if(_0x5969b1['code']==='unavailable'||_0x5969b1['code']==='resource-exhausted'||_0x5969b1['message']&&_0x5969b1['message']['includes']('network'))return handleNetworkError(),null;throw _0x5969b1;}}async[a17_0x3a0901(0x191)](_0x48ac04){const _0x5128c3=a17_0x3a0901;return this[_0x5128c3(0x19f)](getDoc,_0x5128c3(0x198),_0x48ac04);}async['getDocuments'](_0x3a2528){const _0x2ce24a=a17_0x3a0901;return this['safeOperation'](getDocs,_0x2ce24a(0x1ae),_0x3a2528);}async['addDocument'](_0x434726,_0x28b561){const _0x1aceb4=a17_0x3a0901;return this[_0x1aceb4(0x19f)](addDoc,_0x1aceb4(0x1b8),_0x434726,_0x28b561);}async['setDocument'](_0xd1fb6b,_0x2e14a1,_0x1a842f={}){return this['safeOperation'](setDoc,'set',_0xd1fb6b,_0x2e14a1,_0x1a842f);}async[a17_0x3a0901(0x1ab)](_0x2afa61,_0x1c668d){return this['safeOperation'](updateDoc,'update',_0x2afa61,_0x1c668d);}async['deleteDocument'](_0x3a73f0){const _0x517cc6=a17_0x3a0901;return this['safeOperation'](deleteDoc,_0x517cc6(0x197),_0x3a73f0);}['suspendAllListeners'](){const _0x2c36d4=a17_0x3a0901;console[_0x2c36d4(0x1b5)]('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this[_0x2c36d4(0x1bb)]['size']),this[_0x2c36d4(0x1a6)]=new Map(this[_0x2c36d4(0x1bb)]),this['activeListeners']['forEach']((_0x7739ae,_0x171493)=>{const _0x3282b9=_0x2c36d4;console['log'](_0x3282b9(0x1a8),_0x171493);if(typeof _0x7739ae==='function')try{_0x7739ae(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x171493);}catch(_0x2916ea){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x171493,_0x2916ea);}else{if(_0x7739ae&&typeof _0x7739ae['unsubscribe']==='function')try{_0x7739ae['unsubscribe'](),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x171493);}catch(_0x21cd08){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x171493,_0x21cd08);}}}),this['activeListeners']['clear']();if(this['debug']){const _0x375e9e=document['createElement'](_0x2c36d4(0x1b6));_0x375e9e['id']=_0x2c36d4(0x193),_0x375e9e['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x375e9e['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0x375e9e);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}[a17_0x3a0901(0x1a7)](){const _0x590e94=a17_0x3a0901;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console['log'](_0x590e94(0x19a));return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners'][_0x590e94(0x199)]),this[_0x590e94(0x1a6)]['forEach']((_0x3db31b,_0x248b79)=>{const _0x5c7f05=_0x590e94;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x248b79);try{if(typeof _0x3db31b==='function'){console['warn'](_0x5c7f05(0x194),_0x248b79);return;}const {query:_0x228d71,callback:_0x49d7b4,options:_0x4ae325}=_0x3db31b;if(_0x228d71&&_0x49d7b4){const _0x57330e=onSnapshot(_0x228d71,_0x49d7b4,_0x4ae325||{});this[_0x5c7f05(0x1bb)][_0x5c7f05(0x1a2)](_0x248b79,_0x57330e),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x248b79);}}catch(_0x5b0662){console['error'](_0x5c7f05(0x1b2),_0x248b79,_0x5b0662);}}),this['_suspendedListeners']['clear']();const _0x3f703b=document['getElementById'](_0x590e94(0x193));_0x3f703b&&_0x3f703b['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}[a17_0x3a0901(0x1b3)](_0x55ea98,_0x207bae,_0x287bed={},_0x4cc162=null){const _0x52becd=a17_0x3a0901,_0x27b899=_0x4cc162||_0x52becd(0x1c1)+Date['now']()+'_'+Math['random']()['toString'](0x24)[_0x52becd(0x196)](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x27b899);if(!this['checkSessionActive']())return console[_0x52becd(0x1b5)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x27b899),()=>{};try{const _0x120ff4=onSnapshot(_0x55ea98,_0x207bae,_0x287bed);return this['activeListeners']['set'](_0x27b899,{'unsubscribe':_0x120ff4,'query':_0x55ea98,'callback':_0x207bae,'options':_0x287bed}),this['debug']&&(console[_0x52becd(0x1b5)](_0x52becd(0x19d)+_0x27b899),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0x52becd(0x199)])),()=>{const _0x4c7af7=_0x52becd;this['debug']&&console[_0x4c7af7(0x1b5)](_0x4c7af7(0x1a5)+_0x27b899);try{_0x120ff4(),this['activeListeners']['delete'](_0x27b899),this[_0x4c7af7(0x192)]&&(console[_0x4c7af7(0x1b5)]('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x27b899),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x4c7af7(0x1bb)]['size']));}catch(_0x912ada){console['error'](_0x4c7af7(0x1c0)+_0x27b899+':',_0x912ada);}};}catch(_0x1f5b52){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x27b899+':',_0x1f5b52),()=>{};}}['executePendingOperations'](_0x54c73b=a17_0x3a0901(0x1b0)){const _0x15d071=a17_0x3a0901;console[_0x15d071(0x1b5)]('Executing\x20pending\x20'+_0x54c73b+_0x15d071(0x1bd)+this['pendingOperations']['size']+_0x15d071(0x1b9));const _0x1bf011=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0x1bf011[_0x15d071(0x1ad)]((_0x1bd1c6,_0xc4e8e4)=>{const _0x213c8a=_0x15d071;_0x54c73b==='all'||_0x1bd1c6[_0x213c8a(0x1bf)]===_0x54c73b?(console['log']('Executing\x20delayed\x20'+_0x1bd1c6[_0x213c8a(0x1bf)]+'\x20operation'),this['safeOperation'](_0x1bd1c6[_0x213c8a(0x19e)],_0x1bd1c6[_0x213c8a(0x1bf)],..._0x1bd1c6[_0x213c8a(0x1a1)])['catch'](_0xcfc27=>console['error'](_0x213c8a(0x1a9),_0xcfc27))):this['pendingOperations']['set'](_0xc4e8e4,_0x1bd1c6);});}[a17_0x3a0901(0x1aa)](_0xd716c4=!![]){const _0x531a4e=a17_0x3a0901;this[_0x531a4e(0x192)]=_0xd716c4,console['log'](_0x531a4e(0x1a4)+(_0xd716c4?'enabled':'disabled'));if(_0xd716c4){const _0x740780=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system',_0x531a4e(0x1be)))['then'](_0x4a4a33=>{const _0x3d8fb6=_0x531a4e;console[_0x3d8fb6(0x1b5)]('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x4a4a33);})['catch'](_0x5ad4d2=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x5ad4d2);})['finally'](()=>{const _0x280254=_0x531a4e;console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window[_0x280254(0x190)]=_0x740780;});}}}const firebaseIdle=new FirebaseIdleWrapper();function a17_0x4291(_0x1772a1,_0x1d452){const _0x2683c5=a17_0x2c09();return a17_0x4291=function(_0xfa484a,_0x1e2aa0){_0xfa484a=_0xfa484a-0x190;let _0x2c09a4=_0x2683c5[_0xfa484a];return _0x2c09a4;},a17_0x4291(_0x1772a1,_0x1d452);}export function enhanceIdleTimeout(){const _0x57464d=a17_0x3a0901,_0x3c2614=window['suspendSession']||function(){},_0x154452=window['resumeSession']||function(){};window['suspendSession']=function(){const _0x2055be=a17_0x4291;_0x3c2614(),firebaseIdle[_0x2055be(0x1b1)]();},window[_0x57464d(0x19c)]=function(){_0x154452(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;