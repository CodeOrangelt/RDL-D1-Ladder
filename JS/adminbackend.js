const a4_0x7e1e1f=a4_0x113d,a4_0x496f83=(function(){let _0x2b67af=!![];return function(_0x418975,_0x243ffe){const _0x3d01e8=_0x2b67af?function(){if(_0x243ffe){const _0x28453d=_0x243ffe['apply'](_0x418975,arguments);return _0x243ffe=null,_0x28453d;}}:function(){};return _0x2b67af=![],_0x3d01e8;};}()),a4_0x253150=a4_0x496f83(this,function(){const _0x4a3b86=a4_0x113d;let _0x2c97c5;try{const _0x5395de=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2c97c5=_0x5395de();}catch(_0x5e179a){_0x2c97c5=window;}const _0x5ac75d=_0x2c97c5['console']=_0x2c97c5['console']||{},_0x282611=[_0x4a3b86(0x1af),'warn','info',_0x4a3b86(0x2a0),'exception',_0x4a3b86(0x16b),'trace'];for(let _0x429eb3=0x0;_0x429eb3<_0x282611[_0x4a3b86(0x19f)];_0x429eb3++){const _0x192b3a=a4_0x496f83['constructor'][_0x4a3b86(0x1e3)][_0x4a3b86(0xdc)](a4_0x496f83),_0x119738=_0x282611[_0x429eb3],_0x3816ae=_0x5ac75d[_0x119738]||_0x192b3a;_0x192b3a['__proto__']=a4_0x496f83[_0x4a3b86(0xdc)](a4_0x496f83),_0x192b3a['toString']=_0x3816ae[_0x4a3b86(0xd0)]['bind'](_0x3816ae),_0x5ac75d[_0x119738]=_0x192b3a;}});a4_0x253150();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0xe50c5b){const _0x37285c=a4_0x113d;if(!_0xe50c5b)return'#ffffff';_0xe50c5b=_0xe50c5b['replace']('#','');_0xe50c5b['length']===0x3&&(_0xe50c5b=_0xe50c5b['split']('')['map'](_0x500e62=>_0x500e62+_0x500e62)['join'](''));if(_0xe50c5b[_0x37285c(0x19f)]!==0x6)return'#ffffff';const _0x4919f9=parseInt(_0xe50c5b['substring'](0x0,0x2),0x10),_0x5a71ab=parseInt(_0xe50c5b['substring'](0x2,0x4),0x10),_0x17a377=parseInt(_0xe50c5b['substring'](0x4,0x6),0x10),_0x5c2a41=(_0x4919f9*0x12b+_0x5a71ab*0x24b+_0x17a377*0x72)/0x3e8;return _0x5c2a41>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a4_0x7e1e1f(0x213)](a4_0x7e1e1f(0x216),()=>{auth['onAuthStateChanged'](async _0x41d7b6=>{const _0x236e22=a4_0x113d;if(!_0x41d7b6){window['location']['href']=_0x236e22(0x1bd);return;}try{await initializeAdminDashboard();}catch(_0x4e145b){console['error'](_0x236e22(0x24e),_0x4e145b),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x33c684){const _0x9bddaf=a4_0x7e1e1f;if(!_0x33c684)return['dashboard'];console[_0x9bddaf(0x1af)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x33c684+_0x9bddaf(0x27f));const _0x20d30c=[{'name':'userProfiles','displayName':_0x9bddaf(0x2c3)},{'name':_0x9bddaf(0x2c2),'displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':_0x9bddaf(0x259),'displayName':_0x9bddaf(0x230)},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x11dd23=auth[_0x9bddaf(0x19c)];let _0x11ab8c=null,_0x11e84b=null;for(const _0x475e52 of _0x20d30c){try{if(_0x11dd23){const _0x3b7cc9=doc(db,_0x475e52[_0x9bddaf(0x270)],_0x11dd23[_0x9bddaf(0x122)]),_0x51173b=await getDoc(_0x3b7cc9);if(_0x51173b['exists']()){const _0x1c5eba=_0x51173b['data']();console['log']('Found\x20user\x20in\x20'+_0x475e52['displayName']+'\x20by\x20UID:',_0x1c5eba);const _0x3e1bac=(_0x1c5eba[_0x9bddaf(0x2da)]||_0x1c5eba['role']||'')['toLowerCase']();if(_0x3e1bac&&_0x3e1bac!=='none'){_0x11ab8c=_0x3e1bac,_0x11e84b=_0x475e52[_0x9bddaf(0x20a)],console[_0x9bddaf(0x1af)]('Found\x20specific\x20role:\x20'+_0x11ab8c+'\x20in\x20'+_0x11e84b);break;}}}if(!_0x11ab8c){const _0x275090=collection(db,_0x475e52[_0x9bddaf(0x270)]),_0x3dc43a=query(_0x275090,where('email','==',_0x33c684)),_0x3232b0=await getDocs(_0x3dc43a);if(!_0x3232b0[_0x9bddaf(0x26a)]){const _0x164b15=_0x3232b0['docs'][0x0][_0x9bddaf(0x147)]();console['log']('Found\x20user\x20in\x20'+_0x475e52['displayName']+'\x20with\x20email\x20'+_0x33c684+':',_0x164b15);const _0x2ba2ce=(_0x164b15['roleName']||_0x164b15['role']||'')['toLowerCase']();if(_0x2ba2ce&&_0x2ba2ce!=='none'){_0x11ab8c=_0x2ba2ce,_0x11e84b=_0x475e52['displayName'],console['log'](_0x9bddaf(0x298)+_0x11ab8c+'\x20in\x20'+_0x11e84b);break;}}}}catch(_0x21b3f6){console['error'](_0x9bddaf(0x1fe)+_0x475e52['displayName']+':',_0x21b3f6);}}if(_0x11ab8c){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x11ab8c+'\x20(from\x20'+_0x11e84b+')');const _0x17532a={'admin':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history','manage-highlights','user-roles-section','manage-matches',_0x9bddaf(0x2a2),'manage-levels-ribbons',_0x9bddaf(0x2ee)],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies',_0x9bddaf(0x1f7),'manage-highlights','user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players',_0x9bddaf(0x217)],'creative\x20lead':[_0x9bddaf(0xc6),'manage-articles',_0x9bddaf(0x223),'elo-history',_0x9bddaf(0x256)]};if(_0x17532a[_0x11ab8c])return console[_0x9bddaf(0x1af)](_0x9bddaf(0x227)+_0x11ab8c+'\x27\x20has\x20permissions:',_0x17532a[_0x11ab8c]),_0x17532a[_0x11ab8c];}return console[_0x9bddaf(0x1af)]('No\x20specific\x20permissions\x20for\x20user\x20'+_0x33c684+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x104a4d=[]){const _0x209cd3=a4_0x7e1e1f,_0x5aeba8=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x554f14=document['querySelectorAll']('.admin-section');(!_0x104a4d||_0x104a4d['length']===0x0)&&(_0x104a4d=['dashboard']);_0x5aeba8['forEach'](_0x2235be=>{const _0x2b92bb=a4_0x113d,_0x290893=_0x2235be[_0x2b92bb(0x202)]('data-section');_0x104a4d['includes'](_0x290893)?_0x2235be['style'][_0x2b92bb(0x224)]=_0x2b92bb(0x182):_0x2235be['style']['display']=_0x2b92bb(0x234),_0x2235be['addEventListener']('click',()=>{const _0x450e1d=_0x2b92bb,_0x37c82c=_0x2235be['getAttribute']('data-section');if(!_0x104a4d[_0x450e1d(0x19d)](_0x37c82c)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x5aeba8['forEach'](_0x3fb3e5=>_0x3fb3e5['classList'][_0x450e1d(0xb9)]('active')),_0x2235be['classList']['add']('active'),_0x554f14['forEach'](_0x4045be=>{_0x4045be['style']['display']='none';});const _0x40c51c=document[_0x450e1d(0x108)](_0x37c82c);_0x40c51c&&(_0x40c51c['style']['display']='block',console['log']('Switched\x20to\x20'+_0x37c82c+_0x450e1d(0x112)));});});const _0x1c6841=document['querySelector'](_0x209cd3(0x287)+_0x104a4d[0x0]+'\x22]');_0x1c6841&&_0x1c6841['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0xe7e44b=a4_0x7e1e1f,_0x1ccc34=document['querySelectorAll'](_0xe7e44b(0x1c6));let _0x2fa553=null,_0x297db0=new Set();_0x1ccc34['forEach'](_0x1ecf4e=>{_0x1ecf4e['addEventListener']('click',function(){const _0x289381=a4_0x113d,_0x4b0a73=this['getAttribute'](_0x289381(0x133));if(_0x4b0a73===_0x2fa553)return;_0x2fa553&&(document[_0x289381(0x108)](_0x2fa553)['style']['display']='none',_0x1ccc34['forEach'](_0xd6e641=>_0xd6e641[_0x289381(0x231)]['remove']('active'))),document[_0x289381(0x108)](_0x4b0a73)['style']['display']='block',this['classList']['add']('active'),_0x2fa553=_0x4b0a73;});});}function loadSectionData(_0x5ac267){return;}async function initializeAdminDashboard(){const _0x590d07=a4_0x7e1e1f;try{const _0x354a96=auth['currentUser'],_0x355beb=await getUserTabPermissions(_0x354a96[_0x590d07(0x170)]);console['log']('User\x20'+_0x354a96['email']+'\x20allowed\x20tabs:',_0x355beb),window['userAllowedTabs']=_0x355beb,setupSidebarNavigation(_0x355beb),setupLadderSelector(),setupDashboardSection(),_0x355beb['includes'](_0x590d07(0x131))&&setupManagePlayersSection(),_0x355beb[_0x590d07(0x19d)]('elo-history')&&setupEloHistorySection(),_0x355beb['includes']('manage-ranks')&&setupRankControls(),_0x355beb[_0x590d07(0x19d)]('manage-articles')&&setupManageArticlesSection(),_0x355beb[_0x590d07(0x19d)]('user-roles-section')&&setupUserRolesSection(),_0x355beb[_0x590d07(0x19d)]('manage-trophies')&&setupTrophyManagementSection(),_0x355beb['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x355beb['includes']('inactive-players')&&setupInactivePlayersSection(),_0x355beb['includes']('manage-matches')&&setupManageMatchesSection(),_0x355beb['includes']('manage-points')&&setupManagePointsSection(),_0x355beb['includes'](_0x590d07(0x2ee))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x355beb);}catch(_0x3f91f7){console[_0x590d07(0x2a0)]('Error\x20initializing\x20admin\x20dashboard:',_0x3f91f7);}}function setupDataLoadButtons(_0x117d4f=[]){const _0x11c17b=a4_0x7e1e1f;(!_0x117d4f||_0x117d4f[_0x11c17b(0x19f)]===0x0)&&(_0x117d4f=['dashboard']);const _0x57c606=document['getElementById']('load-dashboard-data');_0x57c606&&_0x57c606[_0x11c17b(0x213)](_0x11c17b(0x279),function(){const _0x57f7ae=_0x11c17b;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()[_0x57f7ae(0x149)](()=>{const _0x321a61=_0x57f7ae;this['classList']['remove']('loading'),this[_0x321a61(0x14b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})['catch'](_0x3ff7b7=>{const _0x5794b2=_0x57f7ae;console['error'](_0x5794b2(0x1b7),_0x3ff7b7),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x117d4f['includes']('manage-trophies')){const _0x1cb08b=document['getElementById']('load-trophies-data');_0x1cb08b&&_0x1cb08b['addEventListener']('click',function(){const _0x594a62=_0x11c17b;console['log']('Load\x20trophies\x20data\x20clicked'),this[_0x594a62(0x231)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x3c2331=_0x594a62;this['classList']['remove'](_0x3c2331(0x1df)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x4d7e7d=>{const _0x3affd5=_0x594a62;console['error']('Error\x20loading\x20trophies:',_0x4d7e7d),this['classList']['remove']('loading'),this[_0x3affd5(0x14b)]=_0x3affd5(0x28a),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x117d4f['includes'](_0x11c17b(0x131))){const _0x6d9928=document['getElementById']('load-players-data');_0x6d9928&&_0x6d9928['addEventListener'](_0x11c17b(0x279),function(){const _0x2c08f3=_0x11c17b;console['log']('Load\x20players\x20data\x20clicked'),this[_0x2c08f3(0x231)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x3cf7a8=_0x2c08f3;this['classList'][_0x3cf7a8(0xb9)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0xc88164=>{const _0x205319=_0x2c08f3;console[_0x205319(0x2a0)]('Error\x20loading\x20players:',_0xc88164),this['classList'][_0x205319(0xb9)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x34a750=_0x205319;this[_0x34a750(0x14b)]=_0x34a750(0x2e9);},0xbb8);});});}if(_0x117d4f[_0x11c17b(0x19d)]('elo-history')){const _0x5cd308=document['getElementById']('load-elo-history-data');_0x5cd308&&_0x5cd308[_0x11c17b(0x213)]('click',function(){const _0x5633b8=_0x11c17b;console['log'](_0x5633b8(0x232)),this['classList']['add'](_0x5633b8(0x1df)),this['innerHTML']=_0x5633b8(0x2bc),loadEloHistory(0x1)['then'](()=>{const _0x37f36b=_0x5633b8;this[_0x37f36b(0x231)]['remove'](_0x37f36b(0x1df)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x306aeb=>{const _0x15d298=_0x5633b8;console[_0x15d298(0x2a0)]('Error\x20loading\x20history:',_0x306aeb),this[_0x15d298(0x231)][_0x15d298(0xb9)]('loading'),this['innerHTML']=_0x15d298(0x28a),setTimeout(()=>{const _0x2dbfc5=_0x15d298;this[_0x2dbfc5(0x14b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x117d4f['includes']('manage-articles')){const _0xf1b666=document[_0x11c17b(0x108)]('load-articles-data');_0xf1b666&&_0xf1b666['addEventListener'](_0x11c17b(0x279),function(){const _0x4cca4a=_0x11c17b;console[_0x4cca4a(0x1af)]('Load\x20articles\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x38e403=_0x4cca4a;this['classList'][_0x38e403(0xb9)](_0x38e403(0x1df)),this['innerHTML']=_0x38e403(0x14c);})[_0x4cca4a(0x25a)](_0x5ce41b=>{const _0x2e356c=_0x4cca4a;console[_0x2e356c(0x2a0)]('Error\x20loading\x20articles:',_0x5ce41b),this['classList']['remove']('loading'),this[_0x2e356c(0x14b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xdebf9d=_0x2e356c;this[_0xdebf9d(0x14b)]=_0xdebf9d(0x14c);},0xbb8);});});}if(_0x117d4f['includes']('user-roles-section')){const _0x29136c=document[_0x11c17b(0x108)]('load-users-data');_0x29136c&&_0x29136c[_0x11c17b(0x213)]('click',function(){const _0x19c33d=_0x11c17b;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add'](_0x19c33d(0x1df)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0xa77f93=>{console['error']('Error\x20loading\x20users:',_0xa77f93),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x117d4f['includes']('inactive-players')){const _0x30f13c=document['getElementById']('load-inactive-players-data');_0x30f13c&&_0x30f13c['addEventListener']('click',function(){const _0x26e40e=_0x11c17b;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add'](_0x26e40e(0x1df)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()[_0x26e40e(0x149)](()=>{const _0x493ea7=_0x26e40e;this[_0x493ea7(0x231)][_0x493ea7(0xb9)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})[_0x26e40e(0x25a)](_0x39ffc4=>{console['error']('Error\x20loading\x20inactive\x20players:',_0x39ffc4),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4f8910=a4_0x113d;this[_0x4f8910(0x14b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x117d4f['includes']('manage-highlights')){const _0x16c8df=document[_0x11c17b(0x108)]('load-highlights-data');_0x16c8df&&_0x16c8df['addEventListener']('click',function(){const _0x32c72e=_0x11c17b;console[_0x32c72e(0x1af)]('Load\x20highlights\x20data\x20clicked'),this['classList'][_0x32c72e(0x11c)]('loading'),this[_0x32c72e(0x14b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x1f39ca=_0x32c72e;this['classList'][_0x1f39ca(0xb9)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x1e9a9a=>{const _0x371040=_0x32c72e;console['error']('Error\x20loading\x20highlights:',_0x1e9a9a),this['classList']['remove']('loading'),this['innerHTML']=_0x371040(0x28a),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x117d4f['includes']('manage-matches')){const _0x3e4df0=document['getElementById']('load-matches-data');_0x3e4df0&&_0x3e4df0['addEventListener'](_0x11c17b(0x279),function(){const _0x54494c=_0x11c17b;console['log'](_0x54494c(0x2e5)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x4adcd0=_0x54494c;this[_0x4adcd0(0x231)]['remove']('loading'),this['innerHTML']=_0x4adcd0(0x168);})['catch'](_0x635d63=>{const _0xa6c201=_0x54494c;console[_0xa6c201(0x2a0)]('Error\x20loading\x20matches:',_0x635d63),this['classList']['remove'](_0xa6c201(0x1df)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x117d4f['includes']('manage-ribbons')){const _0x1a127e=document[_0x11c17b(0x108)]('load-ribbons-data');_0x1a127e&&_0x1a127e['addEventListener']('click',function(){const _0x36317d=_0x11c17b;console['log'](_0x36317d(0x29e)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x55f755=_0x36317d;this['classList'][_0x55f755(0xb9)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x502d15=>{const _0x48a355=_0x36317d;console[_0x48a355(0x2a0)]('Error\x20loading\x20ribbons:',_0x502d15),this[_0x48a355(0x231)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x2cb870=_0x48a355;this[_0x2cb870(0x14b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x1c8604=a4_0x7e1e1f;document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x1c8604(0xef))['textContent']='-',document['getElementById'](_0x1c8604(0x1ed))[_0x1c8604(0x10a)]='-',document['getElementById']('rejected-count')[_0x1c8604(0x10a)]='-';}function setupLadderSelector(){const _0x39c9b0=a4_0x7e1e1f,_0x57c2bd=document['querySelectorAll']('.ladder-switch\x20input');_0x57c2bd['forEach'](_0x44704a=>{_0x44704a['addEventListener']('change',()=>{const _0x48e64b=a4_0x113d;currentLadder=_0x44704a['value'],document[_0x48e64b(0x162)][_0x48e64b(0x180)]('data-ladder',currentLadder);const _0xd823d0=document['getElementById']('current-ladder-display');_0xd823d0&&(_0xd823d0['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document[_0x48e64b(0x108)]('match-count')[_0x48e64b(0x10a)]='-',document[_0x48e64b(0x108)]('pending-count')['textContent']='-',document['getElementById']('rejected-count')[_0x48e64b(0x10a)]='-',charts[_0x48e64b(0x209)]&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+_0x48e64b(0x2dc),'info');});});const _0x3ec976=document['getElementById'](_0x39c9b0(0x2c8));_0x3ec976&&(_0x3ec976['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x28837c=a4_0x7e1e1f;try{console['log'](_0x28837c(0xfc)),document['getElementById']('player-count')[_0x28837c(0x10a)]='-',document[_0x28837c(0x108)](_0x28837c(0xef))[_0x28837c(0x10a)]='-',document[_0x28837c(0x108)](_0x28837c(0x1ed))['textContent']='-',document['getElementById'](_0x28837c(0xff))['textContent']='-';const _0x6cc687=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':_0x28837c(0x259),_0x527ccf=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x28837c(0x118):'approvedMatchesD3',_0x2b0b4b=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?_0x28837c(0x294):_0x28837c(0x151),_0x386a7f=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':_0x28837c(0x257);console['log'](_0x28837c(0x2b4)+currentLadder+':\x20'+_0x6cc687+',\x20'+_0x527ccf);const _0x1009bd=await getDocs(collection(db,_0x6cc687)),_0x41c72b=_0x1009bd['size'],_0x58a95a=await getDocs(collection(db,_0x527ccf)),_0x39a5ef=_0x58a95a[_0x28837c(0xfe)],_0x29dd3e=await getDocs(collection(db,_0x2b0b4b)),_0x25a926=_0x29dd3e[_0x28837c(0xfe)],_0x1d88f9=await getDocs(collection(db,_0x386a7f)),_0x1f82ae=_0x1d88f9['size'];return document['getElementById'](_0x28837c(0x20f))[_0x28837c(0x10a)]=_0x41c72b,document[_0x28837c(0x108)](_0x28837c(0xef))[_0x28837c(0x10a)]=_0x39a5ef,document['getElementById'](_0x28837c(0x1ed))['textContent']=_0x25a926,document[_0x28837c(0x108)](_0x28837c(0xff))['textContent']=_0x1f82ae,await createRankDistributionChart(),await createActivityChart(),console[_0x28837c(0x1af)](_0x28837c(0x1b1)),!![];}catch(_0x199f1b){console['error'](_0x28837c(0x24a),_0x199f1b);throw _0x199f1b;}}async function createRankDistributionChart(){const _0x4caadf=a4_0x7e1e1f;try{const _0x3082bf=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x4711af=await getDocs(_0x3082bf),_0x4e9dbf={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x4711af[_0x4caadf(0x28b)](_0x32c934=>{const _0x7ddb27=_0x4caadf,_0x3271e7=_0x32c934[_0x7ddb27(0x147)](),_0x3fb05c=_0x3271e7['eloRating']||0x4b0;if(_0x3fb05c>=0x7d0)_0x4e9dbf[_0x7ddb27(0x1f4)]++;else{if(_0x3fb05c>=0x708)_0x4e9dbf['Gold']++;else{if(_0x3fb05c>=0x640)_0x4e9dbf['Silver']++;else{if(_0x3fb05c>=0x578)_0x4e9dbf['Bronze']++;else _0x4e9dbf[_0x7ddb27(0x158)]++;}}}});const _0x3f32d7=document[_0x4caadf(0x108)](_0x4caadf(0xa4));charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x3f32d7,{'type':'doughnut','data':{'labels':Object['keys'](_0x4e9dbf),'datasets':[{'data':Object['values'](_0x4e9dbf),'backgroundColor':['#808080',_0x4caadf(0x115),'#C0C0C0','#FFD700','#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x2bca27){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x2bca27),document['getElementById']('rank-distribution-chart')[_0x4caadf(0x14b)]=_0x4caadf(0x16c);}}async function createActivityChart(){const _0x1157d8=a4_0x7e1e1f;try{const _0x5b4104=currentLadder==='D1'?_0x1157d8(0x2b0):_0x1157d8(0x118),_0x4517f5=collection(db,_0x5b4104),_0x4e8892=new Date();_0x4e8892['setDate'](_0x4e8892['getDate']()-0x7);const _0x3ce501=query(_0x4517f5,where(_0x1157d8(0x274),'>=',_0x4e8892),orderBy('approvedAt',_0x1157d8(0x1f9))),_0x590361=await getDocs(_0x3ce501),_0x4f9818=['Sunday',_0x1157d8(0x2c4),'Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x45f6dd=_0x4f9818[_0x1157d8(0x18b)]((_0x3fa636,_0x15bcd2)=>({..._0x3fa636,[_0x15bcd2]:0x0}),{});_0x590361['forEach'](_0x194ea7=>{const _0x555f4c=_0x1157d8,_0x5caaca=_0x194ea7[_0x555f4c(0x147)]();if(_0x5caaca['approvedAt']){const _0x515ddb=_0x4f9818[new Date(_0x5caaca[_0x555f4c(0x274)]['seconds']*0x3e8)[_0x555f4c(0x289)]()];_0x45f6dd[_0x515ddb]++;}});const _0x229b3d=document['getElementById']('activity-chart');charts[_0x1157d8(0x2a6)]&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x229b3d,{'type':'bar','data':{'labels':_0x4f9818,'datasets':[{'label':'Matches\x20Played','data':_0x4f9818['map'](_0x1788db=>_0x45f6dd[_0x1788db]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x1157d8(0x171):_0x1157d8(0x25b),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x1157d8(0x2b6)}}},'plugins':{'legend':{'labels':{'color':_0x1157d8(0x1a9)}},'title':{'display':!![],'text':currentLadder+_0x1157d8(0x1d3),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x8bd529){console['error'](_0x1157d8(0x106),_0x8bd529),document[_0x1157d8(0x108)](_0x1157d8(0x2a9))['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x3486bb=a4_0x7e1e1f,_0x40f721=document['getElementById']('players-table-body');if(!_0x40f721)return;_0x40f721['innerHTML']=_0x3486bb(0x2b7);try{let _0x22812a='players';if(currentLadder==='D2')_0x22812a='playersD2';else currentLadder==='D3'&&(_0x22812a='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x22812a+'\x20collection...');const _0xc0a399=collection(db,_0x22812a),_0x140ecc=query(_0xc0a399,orderBy('eloRating','desc')),_0x4a55fc=await getDocs(_0x140ecc);if(_0x4a55fc[_0x3486bb(0x26a)]){_0x40f721['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x40f721['innerHTML']='';let _0x37aa05=0x1;_0x4a55fc['forEach'](_0x1fb7c3=>{const _0x484551=_0x3486bb,_0x293523=_0x1fb7c3['data'](),_0x2c5d6e=getRankFromElo(_0x293523['eloRating']||0x4b0),_0x4b8dc8=getRankStyle(_0x293523['eloRating']||0x4b0),_0x3a5b33=document['createElement']('tr');_0x3a5b33['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x37aa05+_0x484551(0x24f)+_0x4b8dc8['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x293523[_0x484551(0x26f)]||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x293523['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x4b8dc8['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2c5d6e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x293523['wins']||0x0)+_0x484551(0x242)+(_0x293523['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x1fb7c3['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x1fb7c3['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x40f721['appendChild'](_0x3a5b33),_0x37aa05++;}),setupPlayerActionButtons();}catch(_0x3cc61b){console['error']('Error\x20loading\x20players:',_0x3cc61b),_0x40f721[_0x3486bb(0x14b)]=_0x3486bb(0x174)+_0x3cc61b['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x225d43){const _0x605f8=a4_0x7e1e1f;if(_0x225d43>=0x7d0)return'Emerald';if(_0x225d43>=0x708)return'Gold';if(_0x225d43>=0x640)return'Silver';if(_0x225d43>=0x578)return _0x605f8(0x269);return _0x605f8(0x158);}function setupPlayerActionButtons(){const _0x470aa9=a4_0x7e1e1f;document[_0x470aa9(0x1b4)]('.edit-btn')[_0x470aa9(0x28b)](_0xb2019e=>{const _0x44c1ec=_0x470aa9;_0xb2019e['addEventListener'](_0x44c1ec(0x279),async _0x126eab=>{const _0x5d0f32=_0x126eab['currentTarget']['dataset']['id'];openEditPlayerModal(_0x5d0f32);});}),document[_0x470aa9(0x1b4)]('.delete-btn')['forEach'](_0x32fca8=>{_0x32fca8['addEventListener']('click',async _0x32fbbe=>{const _0xae362d=_0x32fbbe['currentTarget']['dataset']['id'];confirmDeletePlayer(_0xae362d);});});}async function openEditPlayerModal(_0x5de6a4){const _0x2716ba=a4_0x7e1e1f;try{const _0x52851a=currentLadder==='D1'?_0x2716ba(0x2c2):_0x2716ba(0x255),_0x5980e4=doc(db,_0x52851a,_0x5de6a4),_0x4f1305=await getDoc(_0x5980e4);if(!_0x4f1305[_0x2716ba(0x1bc)]()){showNotification('Player\x20not\x20found',_0x2716ba(0x2a0));return;}const _0x28929e=_0x4f1305['data'](),_0x412320=document['getElementById']('edit-player-modal'),_0x5b43f7=document[_0x2716ba(0x108)]('edit-username'),_0x210f54=document[_0x2716ba(0x108)](_0x2716ba(0xf2)),_0xdc24e8=document['getElementById'](_0x2716ba(0x14e)),_0x40672f=document['getElementById']('edit-losses');_0x5b43f7[_0x2716ba(0x1eb)]=_0x28929e[_0x2716ba(0x26f)]||'',_0x210f54['value']=_0x28929e['eloRating']||0x4b0,_0xdc24e8['value']=_0x28929e['wins']||0x0,_0x40672f['value']=_0x28929e[_0x2716ba(0x185)]||0x0,_0x412320['dataset']['playerId']=_0x5de6a4,_0x412320['classList'][_0x2716ba(0x11c)]('active');}catch(_0x4d1444){console['error']('Error\x20opening\x20edit\x20modal:',_0x4d1444),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x2616f4=a4_0x7e1e1f;try{const _0x125171=document[_0x2616f4(0x108)]('edit-player-modal'),_0x2867cc=_0x125171['dataset'][_0x2616f4(0x2f4)];if(!_0x2867cc){showNotification('No\x20player\x20selected','error');return;}const _0x5576c0=document[_0x2616f4(0x108)]('edit-username'),_0x3834b1=document[_0x2616f4(0x108)]('edit-elo'),_0x2f6735=document[_0x2616f4(0x108)]('edit-wins'),_0x2189e5=document['getElementById']('edit-losses'),_0x4a9583=_0x5576c0['value']['trim'](),_0x1ce4e=parseInt(_0x3834b1['value']),_0x5430f1=parseInt(_0x2f6735['value']),_0x421fa1=parseInt(_0x2189e5['value']);if(!_0x4a9583||isNaN(_0x1ce4e)){showNotification(_0x2616f4(0x12e),'error');return;}const _0x3e13d9=currentLadder==='D1'?'players':_0x2616f4(0x255),_0x22b147=doc(db,_0x3e13d9,_0x2867cc),_0x152ee2=await getDoc(_0x22b147),_0x5d7639=_0x152ee2[_0x2616f4(0x1bc)]()?_0x152ee2['data']():{},_0x3399ef=_0x5d7639['eloRating']||0x4b0;await updateDoc(_0x22b147,{'username':_0x4a9583,'eloRating':_0x1ce4e,'wins':_0x5430f1||0x0,'losses':_0x421fa1||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x2616f4(0x170)]});if(_0x1ce4e!==_0x3399ef){const _0x1524ab=currentLadder==='D1'?'eloHistory':_0x2616f4(0xea);await addDoc(collection(db,_0x1524ab),{'player':_0x4a9583,'previousElo':_0x3399ef,'newElo':_0x1ce4e,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth[_0x2616f4(0x19c)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x35a2be){console['error'](_0x2616f4(0xd5),_0x35a2be),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x35a2be[_0x2616f4(0x2aa)],'error');}}function closeEditPlayerModal(){const _0x3c208f=a4_0x7e1e1f,_0x3501cc=document['getElementById'](_0x3c208f(0x2ca));_0x3501cc['classList'][_0x3c208f(0xb9)]('active'),_0x3501cc[_0x3c208f(0x21a)]['playerId']='';}async function confirmDeletePlayer(_0x53c319){const _0x1fff6b=a4_0x7e1e1f;if(confirm(_0x1fff6b(0xfa)))try{const _0x3d509b=currentLadder==='D1'?_0x1fff6b(0x2c2):'playersD2';await deleteDoc(doc(db,_0x3d509b,_0x53c319)),loadPlayersData(),showNotification(_0x1fff6b(0x210),_0x1fff6b(0x1e7));}catch(_0x30653a){console['error']('Error\x20deleting\x20player:',_0x30653a),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x30653a['message'],_0x1fff6b(0x2a0));}}async function setupManagePlayersSection(){const _0x23abb4=a4_0x7e1e1f,_0x917302=document[_0x23abb4(0x108)]('add-player-form');_0x917302&&_0x917302['addEventListener']('submit',async _0x1ada09=>{_0x1ada09['preventDefault'](),await addNewPlayer();});const _0x55c7d6=document[_0x23abb4(0x108)](_0x23abb4(0x1fa));_0x55c7d6&&_0x55c7d6['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x52d657=document['getElementById'](_0x23abb4(0x239));_0x52d657&&_0x52d657['addEventListener'](_0x23abb4(0x279),saveEditedPlayer);const _0x1b5ddf=document[_0x23abb4(0x108)](_0x23abb4(0x2e3));_0x1b5ddf&&_0x1b5ddf['addEventListener']('click',closeEditPlayerModal);const _0x3c9be7=document['getElementById'](_0x23abb4(0x2ca));_0x3c9be7&&_0x3c9be7[_0x23abb4(0x213)]('click',_0x36a197=>{_0x36a197['target']===_0x3c9be7&&closeEditPlayerModal();});const _0x5b33d6=document['getElementById'](_0x23abb4(0x13a));_0x5b33d6&&_0x5b33d6['addEventListener']('change',()=>{currentLadder=_0x5b33d6['value'],loadPlayersData();});}async function addNewPlayer(){const _0x54c336=a4_0x7e1e1f;try{const _0x196a77=document['getElementById'](_0x54c336(0xc9)),_0x34a0ea=document[_0x54c336(0x108)](_0x54c336(0x2cd)),_0x407341=_0x196a77['value'][_0x54c336(0x238)](),_0x1711c6=parseInt(_0x34a0ea['value'])||0x4b0;if(!_0x407341){alert(_0x54c336(0x159));return;}console[_0x54c336(0x1af)](_0x54c336(0xd6)+_0x407341+_0x54c336(0x1d1)+_0x1711c6+'\x20to\x20'+currentLadder+'\x20ladder');let _0x3d7bf4='players',_0x3cfbd1='eloHistory';if(currentLadder==='D2')_0x3d7bf4='playersD2',_0x3cfbd1='eloHistoryD2';else currentLadder==='D3'&&(_0x3d7bf4=_0x54c336(0x259),_0x3cfbd1='eloHistoryD3');const _0x1d83b=query(collection(db,_0x3d7bf4),where(_0x54c336(0x26f),'==',_0x407341)),_0x181c65=await getDocs(_0x1d83b);if(!_0x181c65['empty']){alert('Username\x20'+_0x407341+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x537fd0=auth[_0x54c336(0x19c)],_0x289f41={'username':_0x407341,'eloRating':_0x1711c6,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x537fd0?_0x537fd0['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x3d7bf4),_0x289f41),await addDoc(collection(db,_0x3cfbd1),{'player':_0x407341,'previousElo':0x4b0,'newElo':_0x1711c6,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x537fd0?_0x537fd0['email']:'admin','gameMode':currentLadder}),_0x196a77[_0x54c336(0x1eb)]='',_0x34a0ea['value']='1200',alert('Player\x20'+_0x407341+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x54c336(0x1a3)),loadPlayersData();}catch(_0x467ca2){console['error'](_0x54c336(0x25e),_0x467ca2),alert('Error\x20adding\x20player:\x20'+_0x467ca2['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x30373e=a4_0x7e1e1f,_0x449506=document['getElementById']('add-player-form');_0x449506&&_0x449506['addEventListener'](_0x30373e(0x194),_0x558c6e=>{_0x558c6e['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x2f98d4=a4_0x7e1e1f,_0xa69de6=document[_0x2f98d4(0x108)]('player-search')[_0x2f98d4(0x1eb)][_0x2f98d4(0x25f)](),_0xb2c60a=document['querySelectorAll']('#players-table-body\x20tr');let _0x468505=0x0;_0xb2c60a['forEach'](_0x3da588=>{const _0x46276c=_0x2f98d4,_0x501157=_0x3da588[_0x46276c(0x104)]('.username')?.['textContent']['toLowerCase']()||'';_0x501157[_0x46276c(0x19d)](_0xa69de6)?(_0x3da588['style'][_0x46276c(0x224)]='',_0x468505++):_0x3da588[_0x46276c(0x120)]['display']='none';});const _0x3fb88c=document['getElementById']('no-results-message');_0x3fb88c&&(_0x468505===0x0&&_0xa69de6!==''?_0x3fb88c['style'][_0x2f98d4(0x224)]=_0x2f98d4(0x12a):_0x3fb88c[_0x2f98d4(0x120)]['display']='none');}function debounce(_0x238569,_0x2a8843){let _0x1485b5;return function(..._0xecaa81){clearTimeout(_0x1485b5),_0x1485b5=setTimeout(()=>_0x238569['apply'](this,_0xecaa81),_0x2a8843);};}async function loadEloHistory(_0x294bc7=0x1){const _0x508bde=a4_0x7e1e1f,_0x1bdf23=document['getElementById'](_0x508bde(0x2cc)),_0x3d3d92=currentLadder[_0x508bde(0x25f)]();if(!_0x1bdf23)return;_0x1bdf23['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x6d678e=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x508bde(0xea):'eloHistoryD3',_0x5028cd=collection(db,_0x6d678e);let _0x23aad2;if(_0x294bc7>eloHistoryPagination[_0x3d3d92]['page']&&eloHistoryPagination[_0x3d3d92]['lastVisible'])_0x23aad2=query(_0x5028cd,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x3d3d92]['lastVisible']),limit(PAGE_SIZE));else _0x294bc7<eloHistoryPagination[_0x3d3d92]['page']&&eloHistoryPagination[_0x3d3d92]['firstVisible']?_0x23aad2=query(_0x5028cd,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x3d3d92]['firstVisible']),limitToLast(PAGE_SIZE)):_0x23aad2=query(_0x5028cd,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x2f52b3=await getDocs(_0x23aad2);if(_0x2f52b3[_0x508bde(0x26a)]){_0x1bdf23['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document[_0x508bde(0x108)](_0x3d3d92+_0x508bde(0xf0))[_0x508bde(0x10a)]='Page\x201';return;}eloHistoryPagination[_0x3d3d92]['page']=_0x294bc7,eloHistoryPagination[_0x3d3d92]['firstVisible']=_0x2f52b3['docs'][0x0],eloHistoryPagination[_0x3d3d92]['lastVisible']=_0x2f52b3[_0x508bde(0x15c)][_0x2f52b3['docs']['length']-0x1];const _0x54f590=new Map();_0x1bdf23['innerHTML']='';const _0x51f290=async _0x2f8a72=>{const _0x453ed8=_0x508bde;if(typeof _0x2f8a72!=='string'||_0x2f8a72[_0x453ed8(0x19f)]<0x14||/[^a-zA-Z0-9-_]/['test'](_0x2f8a72))return _0x2f8a72;if(_0x54f590['has'](_0x2f8a72))return _0x54f590[_0x453ed8(0x281)](_0x2f8a72);try{for(const _0x463171 of['players',_0x453ed8(0x255),'playersD3','nonParticipants']){const _0x130495=await getDoc(doc(db,_0x463171,_0x2f8a72));if(_0x130495['exists']()&&_0x130495['data']()[_0x453ed8(0x26f)]){const _0xe76f4=_0x130495['data']()['username'];return _0x54f590['set'](_0x2f8a72,_0xe76f4),_0xe76f4;}}return _0x2f8a72;}catch(_0x17dadd){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x2f8a72+':',_0x17dadd),_0x2f8a72;}};for(const _0x390846 of _0x2f52b3['docs']){const _0x52eae5=_0x390846['data'](),_0x5066b3=document['createElement']('tr'),_0x47974f=_0x52eae5[_0x508bde(0x113)]?new Date(_0x52eae5[_0x508bde(0x113)][_0x508bde(0x1ab)]*0x3e8)[_0x508bde(0x288)]():_0x508bde(0x2ce),_0x5c3c1=_0x52eae5['newElo']-_0x52eae5['previousElo'],_0x402cef=_0x5c3c1>0x0?_0x508bde(0x299):_0x5c3c1<0x0?'negative-change':'',_0x3165a3=_0x5c3c1>0x0?'+':'',_0x29352c=_0x52eae5[_0x508bde(0x23c)]||_0x52eae5['username']||_0x52eae5[_0x508bde(0x2bb)]||'N/A',_0x25258d=await _0x51f290(_0x29352c);_0x5066b3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x47974f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x25258d+_0x508bde(0x126)+(_0x52eae5['previousElo']||_0x508bde(0x2ce))+_0x508bde(0x24d)+(_0x52eae5['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x402cef+'\x22>'+_0x3165a3+_0x5c3c1+_0x508bde(0x13d)+formatHistoryType(_0x52eae5['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x52eae5[_0x508bde(0x1be)]||_0x52eae5[_0x508bde(0xc5)]||_0x52eae5['demotedBy']||_0x508bde(0x26e))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1bdf23['appendChild'](_0x5066b3);}document['getElementById'](_0x3d3d92+_0x508bde(0xf0))[_0x508bde(0x10a)]=_0x508bde(0x195)+_0x294bc7;const _0x4590d3=document['getElementById'](_0x3d3d92+_0x508bde(0x1de)),_0x16474e=document['getElementById'](_0x3d3d92+_0x508bde(0xc7));if(_0x4590d3)_0x4590d3['disabled']=_0x294bc7<=0x1;const _0x1fb830=query(_0x5028cd,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x3d3d92]['lastVisible']),limit(0x1)),_0x5c230f=await getDocs(_0x1fb830);if(_0x16474e)_0x16474e['disabled']=_0x5c230f['empty'];}catch(_0x42075d){console['error'](_0x508bde(0x21d),_0x42075d),_0x1bdf23[_0x508bde(0x14b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x42075d['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x21f29b){const _0x46b5b2=a4_0x7e1e1f;switch(_0x21f29b){case _0x46b5b2(0x201):return'Match\x20Result';case'promotion':return _0x46b5b2(0xf4);case'demotion':return'Demotion';case'admin_modification':return _0x46b5b2(0x138);case'initial_placement':return'Initial\x20Placement';default:return _0x21f29b||'Unknown';}}function setupEloHistorySection(){const _0x421f05=a4_0x7e1e1f;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0x421f05(0x27c))['addEventListener']('click',()=>{const _0x2186a3=_0x421f05;loadEloHistory(eloHistoryPagination['d1'][_0x2186a3(0x12b)]+0x1);}),document[_0x421f05(0x108)](_0x421f05(0x1c7))[_0x421f05(0x213)]('click',()=>{const _0x5c24b1=_0x421f05;loadEloHistory(eloHistoryPagination['d2'][_0x5c24b1(0x12b)]-0x1);}),document['getElementById'](_0x421f05(0x189))['addEventListener']('click',()=>{const _0xc9dfaf=_0x421f05;loadEloHistory(eloHistoryPagination['d2'][_0xc9dfaf(0x12b)]+0x1);});const _0x42a07a=document['getElementById'](_0x421f05(0xd4)),_0x4b6f5a=document['getElementById']('d3-next-page');_0x42a07a&&_0x42a07a[_0x421f05(0x213)](_0x421f05(0x279),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4b6f5a&&_0x4b6f5a['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x4c478d=document[_0x421f05(0x108)]('elo-history-search');_0x4c478d&&_0x4c478d['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x5b9610=document['getElementById']('history-type-filter');_0x5b9610&&_0x5b9610['addEventListener']('change',applyEloHistoryFilters);const _0x14e3cf=document['getElementById'](_0x421f05(0x1aa));_0x14e3cf&&_0x14e3cf['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x129b52=a4_0x7e1e1f,_0x353b2d=document[_0x129b52(0x108)](_0x129b52(0x2f1))['value']['toLowerCase'](),_0x4e1589=document[_0x129b52(0x1b4)]('#elo-history-table-body\x20tr');let _0x1d0436=0x0;_0x4e1589[_0x129b52(0x28b)](_0x12fd14=>{const _0x1bab93=_0x129b52;if(_0x12fd14['classList'][_0x1bab93(0x130)]('loading-cell')||_0x12fd14['classList']['contains']('empty-state')||_0x12fd14['classList'][_0x1bab93(0x130)]('error-state'))return;const _0x51c7d9=_0x12fd14['querySelector']('.player')?.[_0x1bab93(0x10a)]['toLowerCase']()||'',_0x5ac163=_0x12fd14['querySelector']('.type')?.['textContent'][_0x1bab93(0x25f)]()||'',_0x3cee7e=_0x12fd14['querySelector']('.admin-action')?.[_0x1bab93(0x10a)][_0x1bab93(0x25f)]()||'';_0x51c7d9['includes'](_0x353b2d)||_0x5ac163['includes'](_0x353b2d)||_0x3cee7e['includes'](_0x353b2d)?(_0x12fd14[_0x1bab93(0x120)]['display']='',_0x1d0436++):_0x12fd14['style'][_0x1bab93(0x224)]='none';});}async function applyEloHistoryFilters(){const _0x48e793=a4_0x7e1e1f,_0x3ea625=document['getElementById'](_0x48e793(0x1a7))['value'],_0x539bc1=document['getElementById'](_0x48e793(0x1d6))['value'],_0xdff343=document[_0x48e793(0x108)](_0x48e793(0xd9))['value'],_0x5d8ca7=currentLadder[_0x48e793(0x25f)]();eloHistoryPagination[_0x5d8ca7]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x25549c=document[_0x48e793(0x108)]('elo-history-table-body');_0x25549c['innerHTML']=_0x48e793(0x1b8);try{const _0x534c03=currentLadder==='D1'?_0x48e793(0x1cb):_0x48e793(0xea),_0x2e4790=collection(db,_0x534c03);let _0xcaaa95=[orderBy('timestamp','desc')];if(_0x3ea625){const _0xd190fb=new Date(_0x3ea625);_0xd190fb['setHours'](0x0,0x0,0x0,0x0),_0xcaaa95['push'](where('timestamp','>=',_0xd190fb));}if(_0x539bc1){const _0x441b96=new Date(_0x539bc1);_0x441b96['setHours'](0x17,0x3b,0x3b,0x3e7),_0xcaaa95['push'](where('timestamp','<=',_0x441b96));}_0xdff343&&_0xdff343!==_0x48e793(0xac)&&_0xcaaa95['push'](where('type','==',_0xdff343));_0xcaaa95[_0x48e793(0x1da)](limit(PAGE_SIZE));const _0x91866f=query(_0x2e4790,..._0xcaaa95),_0x3a0630=await getDocs(_0x91866f);!_0x3a0630['empty']&&(eloHistoryPagination[_0x5d8ca7][_0x48e793(0x2d0)]=_0x3a0630['docs'][0x0],eloHistoryPagination[_0x5d8ca7]['lastVisible']=_0x3a0630['docs'][_0x3a0630['docs']['length']-0x1]);_0x25549c[_0x48e793(0x14b)]='';if(_0x3a0630[_0x48e793(0x26a)]){_0x25549c['innerHTML']=_0x48e793(0x23f);return;}_0x3a0630['forEach'](_0x54f359=>{const _0x49da40=_0x48e793,_0x1e8b55=_0x54f359['data'](),_0x5e0a9b=document['createElement']('tr'),_0x2c6f17=_0x1e8b55[_0x49da40(0x113)]?new Date(_0x1e8b55['timestamp'][_0x49da40(0x1ab)]*0x3e8)[_0x49da40(0x288)]():_0x49da40(0x2ce),_0xdb24d3=_0x1e8b55['newElo']-_0x1e8b55['previousElo'],_0x5742f9=_0xdb24d3>0x0?'positive-change':_0xdb24d3<0x0?_0x49da40(0x283):'',_0x15284c=_0xdb24d3>0x0?'+':'',_0x1b0d59=_0x1e8b55['player']||_0x1e8b55['username']||_0x1e8b55[_0x49da40(0x2bb)]||'N/A';_0x5e0a9b[_0x49da40(0x14b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x2c6f17+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x1b0d59+_0x49da40(0x126)+(_0x1e8b55['previousElo']||_0x49da40(0x2ce))+_0x49da40(0x24d)+(_0x1e8b55['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x5742f9+'\x22>'+_0x15284c+_0xdb24d3+_0x49da40(0x13d)+formatHistoryType(_0x1e8b55['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1e8b55['modifiedBy']||_0x1e8b55['promotedBy']||_0x1e8b55['demotedBy']||_0x49da40(0x26e))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x25549c['appendChild'](_0x5e0a9b);}),document[_0x48e793(0x108)](_0x5d8ca7+_0x48e793(0xf0))['textContent']='Page\x201';}catch(_0x3444ce){console['error'](_0x48e793(0xf8),_0x3444ce),_0x25549c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x3444ce['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x3d508a=a4_0x7e1e1f;document['getElementById']('history-start-date')[_0x3d508a(0x1eb)]='',document['getElementById']('history-end-date')['value']='',document['getElementById']('history-type-filter')['value']='all',document['getElementById'](_0x3d508a(0x2f1))['value']='';const _0xe4b1dc=currentLadder['toLowerCase']();eloHistoryPagination[_0xe4b1dc]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x575131=a4_0x7e1e1f,_0x5f0f2d=document['getElementById']('promote-player-btn'),_0x139f0e=document['getElementById']('promote-modal'),_0x419c4a=document[_0x575131(0x108)]('promote-form');_0x5f0f2d&&_0x139f0e&&_0x419c4a&&(_0x5f0f2d[_0x575131(0x213)](_0x575131(0x279),()=>{const _0x3f60e1=_0x575131;_0x139f0e[_0x3f60e1(0x231)]['add'](_0x3f60e1(0x13e));}),_0x139f0e['addEventListener']('click',_0x5efa8d=>{const _0x3bf274=_0x575131;_0x5efa8d['target']===_0x139f0e&&_0x139f0e[_0x3bf274(0x231)][_0x3bf274(0xb9)]('active');}),_0x419c4a['addEventListener'](_0x575131(0x194),async _0x2b444d=>{const _0x2b32fc=_0x575131;_0x2b444d[_0x2b32fc(0x1b6)]();const _0x3c9aa5=document['getElementById'](_0x2b32fc(0x1c9)),_0x601376=document['getElementById']('promote-ladder'),_0x19264b=_0x3c9aa5['value']['trim'](),_0x2c87f3=_0x601376['value'];if(!_0x19264b){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x19264b,_0x2c87f3),_0x139f0e['classList'][_0x2b32fc(0xb9)]('active'),_0x3c9aa5['value']='';}catch(_0x4ff8d8){showNotification(_0x4ff8d8[_0x2b32fc(0x2aa)],_0x2b32fc(0x2a0));}}),document['getElementById']('cancel-promote-btn')['addEventListener'](_0x575131(0x279),()=>{_0x139f0e['classList']['remove']('active');}));const _0x24e147=document[_0x575131(0x108)]('demote-player-btn'),_0x2eda53=document[_0x575131(0x108)]('demote-modal'),_0x128fea=document[_0x575131(0x108)]('demote-form');_0x24e147&&_0x2eda53&&_0x128fea&&(_0x24e147['addEventListener']('click',()=>{_0x2eda53['classList']['add']('active');}),_0x2eda53['addEventListener']('click',_0xc8142e=>{const _0x54be0c=_0x575131;_0xc8142e['target']===_0x2eda53&&_0x2eda53['classList']['remove'](_0x54be0c(0x13e));}),_0x128fea[_0x575131(0x213)]('submit',async _0x28710a=>{const _0x47e236=_0x575131;_0x28710a['preventDefault']();const _0x879ad4=document[_0x47e236(0x108)]('demote-username'),_0x1aa4f7=document['getElementById'](_0x47e236(0x1d9)),_0x49eb6b=_0x879ad4['value']['trim'](),_0x166311=_0x1aa4f7[_0x47e236(0x1eb)];if(!_0x49eb6b){alert(_0x47e236(0xcf));return;}try{await demotePlayer(_0x49eb6b,_0x166311),document['getElementById']('demote-modal')[_0x47e236(0x231)]['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x1bdf9f){console['error'](_0x47e236(0xbe),_0x1bdf9f);}}));const _0x21ee59=document['getElementById']('set-elo-btn'),_0x9c749c=document[_0x575131(0x108)](_0x575131(0x176)),_0x3d5e7b=document['getElementById']('set-elo-form');_0x21ee59&&_0x9c749c&&_0x3d5e7b&&(_0x21ee59[_0x575131(0x213)]('click',()=>{const _0x2f96=_0x575131;_0x9c749c[_0x2f96(0x231)][_0x2f96(0x11c)]('active');}),_0x9c749c['addEventListener']('click',_0x3aa9cb=>{_0x3aa9cb['target']===_0x9c749c&&_0x9c749c['classList']['remove']('active');}),_0x3d5e7b['addEventListener']('submit',async _0x305e89=>{const _0x12c97f=_0x575131;_0x305e89['preventDefault']();const _0x245ed5=document['getElementById'](_0x12c97f(0x119)),_0x28532e=document['getElementById']('set-elo-value');let _0x51b3b8;const _0xb1e00e=document['getElementById']('set-elo-ladder'),_0x271172=document[_0x12c97f(0x104)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0xb1e00e)_0x51b3b8=_0xb1e00e['value'];else _0x271172?_0x51b3b8=_0x271172['value']:_0x51b3b8='D1';if(!_0x245ed5||!_0x28532e){showNotification('Form\x20elements\x20are\x20missing',_0x12c97f(0x2a0));return;}const _0x46e9ad=_0x245ed5['value']['trim'](),_0x4afa92=parseInt(_0x28532e[_0x12c97f(0x1eb)]);if(!_0x46e9ad||isNaN(_0x4afa92)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x46e9ad,_0x4afa92,_0x51b3b8),_0x9c749c['classList']['remove']('active'),_0x245ed5[_0x12c97f(0x1eb)]='',_0x28532e[_0x12c97f(0x1eb)]='';}catch(_0xb0f06b){showNotification(_0xb0f06b[_0x12c97f(0x2aa)],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener'](_0x575131(0x279),()=>{_0x9c749c['classList']['remove']('active');}));const _0x3bef5a=document['getElementById'](_0x575131(0x192)),_0x281817=document['getElementById']('set-role-form');if(_0x3bef5a&&_0x281817){_0x3bef5a[_0x575131(0x213)](_0x575131(0x279),_0x102aef=>{_0x102aef['target']===_0x3bef5a&&closeModalHandler();}),_0x281817['addEventListener']('submit',async _0x23c39b=>{const _0x4f791b=_0x575131;_0x23c39b[_0x4f791b(0x1b6)]();const _0x50da86=document['getElementById']('role-username'),_0x4ff56c=document['getElementById'](_0x4f791b(0x1fd)),_0x295a5c=document['getElementById'](_0x4f791b(0x1cc)),_0x5339a5=_0x50da86['value']['trim'](),_0x3877d8=_0x4ff56c['value'][_0x4f791b(0x238)](),_0x1c04cb=_0x295a5c['value'];if(!_0x5339a5){showNotification('Username\x20is\x20missing',_0x4f791b(0x2a0));return;}try{await setUserRole(_0x5339a5,_0x3877d8,_0x1c04cb),closeModalHandler(),loadUsersWithRoles();}catch(_0x165a40){}});const _0x7d958a=document[_0x575131(0x108)](_0x575131(0x218));_0x7d958a&&(_0x7d958a['removeEventListener']('click',closeModalHandler),_0x7d958a[_0x575131(0x213)]('click',closeModalHandler));}}async function promotePlayer(_0x114bfc,_0x2ac3e5){const _0x2c6c1e=a4_0x7e1e1f;try{console['log'](_0x2c6c1e(0x229)+_0x114bfc+'\x20in\x20'+_0x2ac3e5+'\x20ladder');const _0x15b9f5=auth[_0x2c6c1e(0x19c)];if(!_0x15b9f5)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x58767b=_0x2ac3e5==='D2'?'playersD2':_0x2c6c1e(0x2c2),_0x289a01=_0x2ac3e5==='D2'?'eloHistoryD2':_0x2c6c1e(0x1cb);console['log']('Searching\x20for\x20player\x20in\x20'+_0x58767b);const _0x5618f5=collection(db,_0x58767b),_0xab77e3=query(_0x5618f5,where('username','==',_0x114bfc)),_0x20087e=await getDocs(_0xab77e3);if(_0x20087e['empty']){alert(_0x2c6c1e(0xaa)+_0x2ac3e5+'\x20ladder');throw new Error(_0x2c6c1e(0xaa)+_0x2ac3e5+'\x20ladder');}const _0x5802b3=_0x20087e['docs'][0x0],_0x2109ca=_0x5802b3['data'](),_0x2470b4=_0x2109ca['eloRating']||0x4b0,_0x41b840=_0x5802b3['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x2470b4);const _0x1f27bb=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x3901f3=_0x1f27bb[_0x2c6c1e(0x2a4)](_0x2c6995=>_0x2c6995['elo']>_0x2470b4);if(!_0x3901f3){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x2ac3e5+'\x20ladder');throw new Error(_0x2c6c1e(0x26c)+_0x2ac3e5+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x3901f3['name']+'\x20('+_0x3901f3[_0x2c6c1e(0x15a)]+')'),await updateDoc(doc(db,_0x58767b,_0x5802b3['id']),{'eloRating':_0x3901f3['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x15b9f5['email']||'admin'}),await addDoc(collection(db,_0x289a01),{'player':_0x114bfc,'previousElo':_0x2470b4,'newElo':_0x3901f3['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x3901f3[_0x2c6c1e(0x270)],'promotedBy':_0x15b9f5['email']||'admin','gameMode':_0x2ac3e5});try{const {promotionManager:_0x4e9e7f}=await import(_0x2c6c1e(0x12d)),_0x382c2d=_0x4e9e7f['getRankName'](_0x2470b4),_0x4d3b80=_0x3901f3['name'];await _0x4e9e7f['sendPromotionNotification'](_0x41b840,_0x114bfc,_0x2470b4,_0x3901f3['elo'],_0x382c2d,_0x4d3b80,'promotion',{'displayName':_0x114bfc,'source':'admin','adminUser':_0x15b9f5[_0x2c6c1e(0x170)],'ladder':_0x2ac3e5}),console['log'](_0x2c6c1e(0x2b9));}catch(_0x308c33){console['error'](_0x2c6c1e(0x150),_0x308c33);}return alert('Successfully\x20promoted\x20'+_0x114bfc+_0x2c6c1e(0x22b)+_0x3901f3['name']+'\x20('+_0x3901f3['elo']+')'),currentLadder===_0x2ac3e5&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x107f1b){console['error']('Error\x20promoting\x20player:',_0x107f1b),alert(_0x2c6c1e(0xa5)+_0x107f1b['message']);throw _0x107f1b;}}document[a4_0x7e1e1f(0x213)]('DOMContentLoaded',()=>{const _0x331d2b=document['getElementById']('promote-form');_0x331d2b&&_0x331d2b['addEventListener']('submit',async _0x3b46ab=>{const _0x2619cb=a4_0x113d;_0x3b46ab[_0x2619cb(0x1b6)]();const _0xd5f5c0=document['getElementById']('promote-username')['value'][_0x2619cb(0x238)](),_0xb5431=document[_0x2619cb(0x104)](_0x2619cb(0xde))['value'];if(!_0xd5f5c0){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0xd5f5c0,_0xb5431),document['getElementById'](_0x2619cb(0x225))['classList']['remove']('active'),document['getElementById']('promote-username')[_0x2619cb(0x1eb)]='';}catch(_0x3a1934){console[_0x2619cb(0x2a0)](_0x2619cb(0x1a0),_0x3a1934);}});});async function demotePlayer(_0x46ec4d,_0x2287c8){const _0x3f0ca7=a4_0x7e1e1f;try{console[_0x3f0ca7(0x1af)]('Attempting\x20to\x20demote\x20'+_0x46ec4d+'\x20in\x20'+_0x2287c8+'\x20ladder');const _0x518e25=auth['currentUser'];if(!_0x518e25)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x5ebcb1=_0x2287c8==='D2'?_0x3f0ca7(0x255):'players',_0x15e697=_0x2287c8==='D2'?_0x3f0ca7(0xea):'eloHistory';console['log'](_0x3f0ca7(0x27b)+_0x5ebcb1);const _0x6baf8e=collection(db,_0x5ebcb1),_0x80ad1=query(_0x6baf8e,where(_0x3f0ca7(0x26f),'==',_0x46ec4d)),_0x56b1d8=await getDocs(_0x80ad1);if(_0x56b1d8['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x2287c8+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x2287c8+'\x20ladder');}const _0x2f3811=_0x56b1d8['docs'][0x0],_0x1aa229=_0x2f3811['data'](),_0x20d690=_0x1aa229['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x20d690);const _0x599a11=[{'name':'Gold','elo':0x708},{'name':_0x3f0ca7(0x2df),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x2f9c10=_0x599a11['find'](_0x325059=>_0x325059['elo']<_0x20d690);if(!_0x2f9c10){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x2287c8+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x2287c8+_0x3f0ca7(0xcd));}console['log']('Demoting\x20player\x20to\x20'+_0x2f9c10['name']+'\x20('+_0x2f9c10['elo']+')'),await updateDoc(doc(db,_0x5ebcb1,_0x2f3811['id']),{'eloRating':_0x2f9c10['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x518e25['email']||'admin'}),await addDoc(collection(db,_0x15e697),{'player':_0x46ec4d,'previousElo':_0x20d690,'newElo':_0x2f9c10['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x2f9c10['name'],'demotedBy':_0x518e25['email']||_0x3f0ca7(0x198),'gameMode':_0x2287c8});try{const {promotionManager:_0x4a8ceb}=await import('./promotions.js'),_0x2047e1=_0x4a8ceb[_0x3f0ca7(0xa8)](_0x20d690),_0xcd9809=_0x2f9c10[_0x3f0ca7(0x270)];await _0x4a8ceb['sendPromotionNotification'](_0x2f3811['id'],_0x46ec4d,_0x20d690,_0x2f9c10['elo'],_0x2047e1,_0xcd9809,'demotion',{'displayName':_0x46ec4d,'source':'admin','adminUser':_0x518e25['email'],'ladder':_0x2287c8}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0xd70f44){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0xd70f44);}return alert('Successfully\x20demoted\x20'+_0x46ec4d+_0x3f0ca7(0x22b)+_0x2f9c10['name']+'\x20('+_0x2f9c10['elo']+')'),currentLadder===_0x2287c8&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x39d968){console[_0x3f0ca7(0x2a0)](_0x3f0ca7(0x10b),_0x39d968),alert('Error\x20demoting\x20player:\x20'+_0x39d968['message']);throw _0x39d968;}}document['addEventListener'](a4_0x7e1e1f(0x216),()=>{const _0x56bc92=a4_0x7e1e1f,_0x43db0e=document['getElementById']('demote-form');_0x43db0e&&_0x43db0e[_0x56bc92(0x213)](_0x56bc92(0x194),async _0x1a8705=>{const _0x56009a=_0x56bc92;_0x1a8705['preventDefault']();const _0x51ea73=document['getElementById']('demote-username')['value']['trim'](),_0x20480e=document['querySelector'](_0x56009a(0x21b))['value'];if(!_0x51ea73){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x51ea73,_0x20480e),document['getElementById'](_0x56009a(0x2b2))[_0x56009a(0x231)][_0x56009a(0xb9)]('active'),document[_0x56009a(0x108)]('demote-username')['value']='';}catch(_0x1b0503){console['error'](_0x56009a(0xbe),_0x1b0503);}});});async function setCustomElo(_0x21ebe8,_0x19e1b4,_0x1394c6){const _0xe0f212=a4_0x7e1e1f;try{const _0x36e7ec=auth['currentUser'];if(!_0x36e7ec||!isAdmin(_0x36e7ec[_0xe0f212(0x170)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x5d0286=_0x1394c6==='D2'?'playersD2':'players',_0x17fdef=_0x1394c6==='D2'?'eloHistoryD2':_0xe0f212(0x1cb),_0x385c85=collection(db,_0x5d0286),_0x437dd7=query(_0x385c85,where('username','==',_0x21ebe8)),_0x5edc59=await getDocs(_0x437dd7);if(_0x5edc59[_0xe0f212(0x26a)])throw new Error(_0xe0f212(0xaa)+_0x1394c6+'\x20ladder');const _0x4e0d60=_0x5edc59['docs'][0x0],_0x532fba=_0x4e0d60[_0xe0f212(0x147)](),_0xcebaad=_0x532fba['eloRating']||0x4b0,_0x2a24f9=writeBatch(db);_0x2a24f9[_0xe0f212(0x2a7)](doc(db,_0x5d0286,_0x4e0d60['id']),{'eloRating':_0x19e1b4,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x36e7ec['email']});const _0x388fc7=doc(collection(db,_0x17fdef));return _0x2a24f9['set'](_0x388fc7,{'player':_0x21ebe8,'previousElo':_0xcebaad,'newElo':_0x19e1b4,'timestamp':serverTimestamp(),'type':_0xe0f212(0x110),'modifiedBy':_0x36e7ec['email'],'gameMode':_0x1394c6}),await _0x2a24f9['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0x21ebe8+'\x20was\x20updated\x20from\x20'+_0xcebaad+'\x20to\x20'+_0x19e1b4,'success'),currentLadder===_0x1394c6&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x17b9ea){console['error']('Error\x20setting\x20custom\x20ELO:',_0x17b9ea);throw _0x17b9ea;}}async function setUserRole(_0x508023,_0x29791a,_0x139be5){const _0x364bba=a4_0x7e1e1f;try{const _0x2eedea=auth['currentUser'];if(!_0x2eedea||!isAdmin(_0x2eedea['email']))throw new Error(_0x364bba(0x169));const _0x40e078=_0x29791a?_0x29791a[_0x364bba(0x238)]():null,_0x5b74dc=_0x40e078?_0x139be5||'#808080':null,[_0x29ed8f,_0x39f963]=await Promise['all']([getDocs(query(collection(db,_0x364bba(0x2c2)),where('username','==',_0x508023))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x508023)))]),_0x5dd1af=[];if(!_0x29ed8f['empty'])_0x5dd1af['push']({'ref':_0x29ed8f[_0x364bba(0x15c)][0x0]['ref'],'source':'D1'});if(!_0x39f963['empty'])_0x5dd1af['push']({'ref':_0x39f963['docs'][0x0]['ref'],'source':'D2'});if(_0x5dd1af[_0x364bba(0x19f)]===0x0){const [_0x89c33c,_0x5534c2]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where(_0x364bba(0x26f),'==',_0x508023))),getDocs(query(collection(db,_0x364bba(0xcb)),where('username','==',_0x508023)))]);if(!_0x89c33c['empty'])_0x5dd1af['push']({'ref':_0x89c33c['docs'][0x0]['ref'],'source':'NonParticipant'});if(!_0x5534c2[_0x364bba(0x26a)])_0x5dd1af['push']({'ref':_0x5534c2['docs'][0x0]['ref'],'source':'UserProfile'});}if(_0x5dd1af['length']===0x0)throw new Error('User\x20\x22'+_0x508023+_0x364bba(0xc4));const _0x1d6989=writeBatch(db);_0x5dd1af['forEach'](_0x17b55f=>{const _0x372b9b=_0x364bba;console[_0x372b9b(0x1af)]('Updating\x20role\x20for\x20'+_0x508023+'\x20in\x20'+_0x17b55f[_0x372b9b(0xe3)]),!_0x40e078?_0x1d6989['update'](_0x17b55f['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x1d6989['update'](_0x17b55f['ref'],{'roleName':_0x40e078,'roleColor':_0x5b74dc,'roleAssignedBy':_0x2eedea['email'],'roleAssignedAt':serverTimestamp()});}),await _0x1d6989[_0x364bba(0x14a)]();const _0x42945b=_0x40e078?'Role\x20\x22'+_0x40e078+_0x364bba(0x245):'Role\x20removed';return showNotification(_0x42945b+_0x364bba(0x1d5)+_0x508023+'\x22',_0x364bba(0x1e7)),!![];}catch(_0x5b473b){console['error'](_0x364bba(0x184),_0x5b473b),showNotification('Error:\x20'+_0x5b473b['message'],_0x364bba(0x2a0));throw _0x5b473b;}}function showNotification(_0x3cfa75,_0x4fff70='info'){const _0x52bc78=a4_0x7e1e1f,_0x2eaa98=document['createElement']('div');_0x2eaa98[_0x52bc78(0x160)]=_0x52bc78(0xe8)+_0x4fff70,_0x2eaa98['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x4fff70)+_0x52bc78(0x1e1)+_0x3cfa75+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body'][_0x52bc78(0x2e8)](_0x2eaa98),setTimeout(()=>{const _0x5a1148=_0x52bc78;_0x2eaa98['classList'][_0x5a1148(0x11c)]('active');},0xa);const _0x36a78d=setTimeout(()=>{closeNotification(_0x2eaa98);},0x1388);_0x2eaa98['querySelector']('.close-notification')['addEventListener'](_0x52bc78(0x279),()=>{clearTimeout(_0x36a78d),closeNotification(_0x2eaa98);});}function getNotificationIcon(_0x5f58dd){const _0x58a862=a4_0x7e1e1f;switch(_0x5f58dd){case'success':return'fa-check-circle';case'error':return'fa-exclamation-circle';case _0x58a862(0x1a5):return _0x58a862(0xaf);case _0x58a862(0x263):default:return _0x58a862(0x179);}}function closeNotification(_0x43da28){const _0x267d0d=a4_0x7e1e1f;_0x43da28['classList']['remove'](_0x267d0d(0x13e)),setTimeout(()=>{const _0x34ed15=_0x267d0d;_0x43da28[_0x34ed15(0xb9)]();},0x12c);}function setupUserRolesSection(){const _0x4145ef=a4_0x7e1e1f,_0x32b942=document['getElementById'](_0x4145ef(0x181));_0x32b942&&_0x32b942['addEventListener'](_0x4145ef(0x279),function(){const _0x3f39a6=_0x4145ef;this[_0x3f39a6(0x231)][_0x3f39a6(0x11c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x3f39a6(0x149)](()=>{const _0x5b8204=_0x3f39a6;this['classList'][_0x5b8204(0xb9)](_0x5b8204(0x1df)),this[_0x5b8204(0x14b)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x1a95ff=>{const _0x4f581f=_0x3f39a6;console['error'](_0x4f581f(0x1e4),_0x1a95ff),this['classList'][_0x4f581f(0xb9)](_0x4f581f(0x1df)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3274df=_0x4f581f;this['innerHTML']=_0x3274df(0x188);},0xbb8);});});const _0x2174a0=document['getElementById']('add-new-role-btn');_0x2174a0&&_0x2174a0['addEventListener'](_0x4145ef(0x279),()=>{const _0x1c92e3=_0x4145ef,_0x4c9a83=document['getElementById']('set-role-modal');_0x4c9a83&&_0x4c9a83['classList']['add'](_0x1c92e3(0x13e));});const _0xafb5ba=document[_0x4145ef(0x108)](_0x4145ef(0x2d8));_0xafb5ba&&_0xafb5ba['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x137198=document['getElementById']('role-filter');_0x137198&&_0x137198[_0x4145ef(0x213)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x53ad99=a4_0x7e1e1f,_0x52835d=document[_0x53ad99(0x108)]('users-table-body');if(!_0x52835d)return;_0x52835d[_0x53ad99(0x14b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x2958c6,_0x1bfa47,_0x5ece4a,_0x27d8f5]=await Promise['all']([getDocs(collection(db,_0x53ad99(0x2c2))),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x53ad99(0x153))),getDocs(collection(db,'userProfiles'))]),_0x490e0b=new Map();function _0x1e6428(_0x4aca27,_0x190d52){_0x4aca27['forEach'](_0x5aaec7=>{const _0x25960c=a4_0x113d,_0x266686=_0x5aaec7['data']();if(!_0x266686['username'])return;if(!_0x490e0b['has'](_0x266686['username']))_0x490e0b[_0x25960c(0x2de)](_0x266686['username'],{'username':_0x266686[_0x25960c(0x26f)],'roleName':_0x266686['roleName']||null,'roleColor':_0x266686['roleColor']||null,'roleAssignedBy':_0x266686[_0x25960c(0x123)]||null,'roleAssignedAt':_0x266686['roleAssignedAt']||null,'sources':[_0x190d52]});else{const _0x4d6ecd=_0x490e0b['get'](_0x266686[_0x25960c(0x26f)]);_0x266686[_0x25960c(0x2da)]&&(!_0x4d6ecd[_0x25960c(0x2da)]||_0x190d52==='D1'||_0x190d52==='D2')&&(_0x4d6ecd['roleName']=_0x266686['roleName'],_0x4d6ecd['roleColor']=_0x266686['roleColor'],_0x4d6ecd['roleAssignedBy']=_0x266686[_0x25960c(0x123)],_0x4d6ecd['roleAssignedAt']=_0x266686['roleAssignedAt']),!_0x4d6ecd['sources']['includes'](_0x190d52)&&_0x4d6ecd[_0x25960c(0x267)]['push'](_0x190d52);}});}_0x1e6428(_0x2958c6,'D1'),_0x1e6428(_0x1bfa47,'D2'),_0x1e6428(_0x5ece4a,'Non-Participant'),_0x1e6428(_0x27d8f5,_0x53ad99(0xfb));const _0x4f23dd=Array['from'](_0x490e0b['values']())[_0x53ad99(0xb3)]((_0x5ece85,_0xfe3274)=>_0x5ece85['username'][_0x53ad99(0x128)](_0xfe3274['username']));if(_0x4f23dd['length']===0x0){_0x52835d['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x52835d['innerHTML']='',_0x4f23dd[_0x53ad99(0x28b)](_0x572e77=>{const _0x133608=_0x53ad99,_0x3f246b=document['createElement']('tr');_0x3f246b[_0x133608(0x21a)][_0x133608(0x26f)]=_0x572e77['username'],_0x3f246b[_0x133608(0x21a)][_0x133608(0x2da)]=_0x572e77[_0x133608(0x2da)]||'',_0x3f246b[_0x133608(0x21a)]['roleColor']=_0x572e77['roleColor']||'#808080';const _0x5da207=_0x572e77['roleAssignedAt']?new Date(_0x572e77['roleAssignedAt'][_0x133608(0x1ab)]*0x3e8)['toLocaleDateString']():'N/A',_0x1d7c2f=_0x572e77['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x572e77['roleColor']+';\x20color:\x20'+getContrastColor(_0x572e77['roleColor'])+';\x22>'+_0x572e77['roleName']+'</span>':_0x133608(0x11f);_0x3f246b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x572e77['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x572e77[_0x133608(0x267)][_0x133608(0x2e7)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d7c2f+_0x133608(0x129)+(_0x572e77[_0x133608(0x123)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5da207+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x572e77[_0x133608(0x26f)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x572e77['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x572e77[_0x133608(0x26f)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x52835d[_0x133608(0x2e8)](_0x3f246b);}),document[_0x53ad99(0x1b4)]('.edit-role-btn')[_0x53ad99(0x28b)](_0x209080=>{const _0xaad04=_0x53ad99;_0x209080[_0xaad04(0x213)]('click',()=>{const _0x386d8a=_0x209080['dataset']['username'];openRoleEditModal(_0x386d8a);});}),document[_0x53ad99(0x1b4)]('.remove-role-btn')['forEach'](_0x159812=>{_0x159812['addEventListener']('click',()=>{const _0x38fcdf=a4_0x113d,_0x4784b8=_0x159812['dataset'][_0x38fcdf(0x26f)];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x4784b8+'?')&&setUserRole(_0x4784b8,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x2d4d14=>console[_0x38fcdf(0x2a0)]('Error\x20removing\x20role:',_0x2d4d14));});});}catch(_0x1d5997){console['error'](_0x53ad99(0x1e4),_0x1d5997),_0x52835d[_0x53ad99(0x14b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x4d6e80){const _0x534923=a4_0x7e1e1f;console['log'](_0x534923(0x272),_0x4d6e80);const _0x54c631=document['getElementById']('set-role-modal'),_0x3157c4=document['getElementById']('role-username'),_0x20c4e5=document['getElementById']('user-role');if(!_0x54c631){console['error']('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert(_0x534923(0x2eb));return;}console['log']('Modal\x20element\x20found:',_0x54c631);_0x3157c4?(_0x3157c4['value']=_0x4d6e80,console['log']('Username\x20input\x20set\x20to:\x20'+_0x4d6e80)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x33adf6=document[_0x534923(0x104)]('#users-table-body\x20tr[data-username=\x22'+_0x4d6e80+'\x22]');if(_0x33adf6&&_0x20c4e5){const _0x1473ab=_0x33adf6['dataset']['role'];_0x20c4e5['value']=_0x1473ab===_0x534923(0x234)?'':_0x1473ab,console['log'](_0x534923(0x2af)+_0x20c4e5['value']+_0x534923(0x1d4)+_0x1473ab+')');}else{if(!_0x33adf6)console['warn']('Table\x20row\x20for\x20user\x20'+_0x4d6e80+'\x20not\x20found.');if(!_0x20c4e5)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x20c4e5)_0x20c4e5['value']='';}console[_0x534923(0x1af)]('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x54c631['classList']['add']('active');const _0x1a8fd6=document[_0x534923(0x108)](_0x534923(0x218));_0x1a8fd6?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x1a8fd6['removeEventListener']('click',closeModalHandler),_0x1a8fd6['addEventListener']('click',closeModalHandler)):console[_0x534923(0x1b3)]('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console[_0x534923(0x1af)](_0x534923(0xda)),_0x54c631['removeEventListener']('click',closeModalBackgroundHandler),_0x54c631['addEventListener'](_0x534923(0x279),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x3d9552){_0x3d9552['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x140526=document['getElementById']('set-role-modal');_0x140526&&(_0x140526['classList']['remove']('active'),_0x140526['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x22be55=a4_0x7e1e1f,_0x1c7ded=document['getElementById'](_0x22be55(0x2d8))?.[_0x22be55(0x1eb)][_0x22be55(0x25f)]()||'',_0x55bb71=document[_0x22be55(0x108)](_0x22be55(0x17d))?.['value']||_0x22be55(0xac),_0x229cb9=document['querySelectorAll'](_0x22be55(0x220));let _0xe7de3a=0x0;_0x229cb9['forEach'](_0x252e70=>{const _0x76b7f7=_0x22be55;if(_0x252e70[_0x76b7f7(0x104)]('.loading-cell')||_0x252e70[_0x76b7f7(0x104)]('.empty-state')||_0x252e70['querySelector']('.error-state'))return;const _0x21be8e=_0x252e70['dataset']['username']?.[_0x76b7f7(0x25f)]()||'',_0x5d93ac=_0x252e70['dataset']['role']||_0x76b7f7(0x234),_0xba2407=_0x21be8e['includes'](_0x1c7ded),_0x5e45f2=_0x55bb71==='all'||_0x5d93ac===_0x55bb71;_0xba2407&&_0x5e45f2?(_0x252e70[_0x76b7f7(0x120)]['display']='',_0xe7de3a++):_0x252e70['style']['display']=_0x76b7f7(0x234);});if(_0xe7de3a===0x0&&_0x229cb9['length']>0x0){const _0x34ff39=document['getElementById']('users-table-body');if(_0x34ff39){if(!_0x34ff39['querySelector']('.no-results')){const _0x484e16=document[_0x22be55(0x1d8)]('tr');_0x484e16['classList']['add']('no-results'),_0x484e16['innerHTML']=_0x22be55(0x205),_0x34ff39['appendChild'](_0x484e16);}}}else{const _0x52a8f3=document['querySelector']('.no-results');_0x52a8f3&&_0x52a8f3['remove']();}}function setupManageArticlesSection(){const _0x12b9a3=a4_0x7e1e1f,_0xc30739=document[_0x12b9a3(0x108)]('load-articles-data');_0xc30739&&_0xc30739['addEventListener']('click',function(){const _0x22a0ba=_0x12b9a3;this['classList']['add']('loading'),this[_0x22a0ba(0x14b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x3b0256=_0x22a0ba;this[_0x3b0256(0x231)]['remove']('loading'),this['innerHTML']=_0x3b0256(0x1ad);})['catch'](_0x59cf69=>{const _0x53696f=_0x22a0ba;console['error']('Error\x20loading\x20articles:',_0x59cf69),this['classList'][_0x53696f(0xb9)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x4de831=document['getElementById'](_0x12b9a3(0x276));_0x4de831?(console['log'](_0x12b9a3(0x28e)),_0x4de831[_0x12b9a3(0x120)][_0x12b9a3(0x224)]='block',_0x4de831[_0x12b9a3(0x213)](_0x12b9a3(0x279),()=>{openArticleModal();})):console[_0x12b9a3(0x2a0)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0xc775e8=document[_0x12b9a3(0x108)]('article-form');_0xc775e8&&_0xc775e8['addEventListener']('submit',_0x554ef4=>{const _0xcd417a=_0x12b9a3;_0x554ef4[_0xcd417a(0x1b6)](),saveArticle();});const _0x2d2014=document[_0x12b9a3(0x108)]('cancel-article-btn');_0x2d2014&&_0x2d2014['addEventListener']('click',()=>{closeArticleModal();});const _0xdb5ce8=document['querySelector']('#article-modal\x20.close-btn');_0xdb5ce8&&_0xdb5ce8['addEventListener']('click',()=>{closeArticleModal();});const _0x5c9c03=document['getElementById'](_0x12b9a3(0x27d));_0x5c9c03&&_0x5c9c03['addEventListener']('click',_0x23fa6e=>{_0x23fa6e['target']===_0x5c9c03&&closeArticleModal();});}async function loadArticles(){const _0x4235c2=a4_0x7e1e1f,_0x30c938=document['getElementById'](_0x4235c2(0x11a));if(!_0x30c938)return;_0x30c938['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x2d2781=collection(db,'articles'),_0x1a9d34=query(_0x2d2781,orderBy('createdAt','desc')),_0xbabfdd=await getDocs(_0x1a9d34);if(_0xbabfdd['empty']){_0x30c938['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x30c938['innerHTML']='',_0xbabfdd['forEach'](_0x5c92de=>{const _0x5528a5=_0x4235c2,_0x1c69bc=_0x5c92de['data'](),_0x57bcfd=document['createElement']('tr'),_0x10f675=_0x1c69bc[_0x5528a5(0x164)]?new Date(_0x1c69bc['createdAt']['seconds']*0x3e8)['toLocaleString']():_0x5528a5(0x2ce);_0x57bcfd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1c69bc['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1c69bc['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10f675+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x5c92de['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x5c92de['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x30c938['appendChild'](_0x57bcfd);}),setupArticleActionButtons();}catch(_0x2d42d0){console[_0x4235c2(0x2a0)]('Error\x20loading\x20articles:',_0x2d42d0),_0x30c938['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x2d42d0['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x5f393f=a4_0x7e1e1f;document[_0x5f393f(0x1b4)](_0x5f393f(0x244))[_0x5f393f(0x28b)](_0x50eb52=>{_0x50eb52['addEventListener']('click',async _0x2964ae=>{const _0x28ab7e=a4_0x113d,_0x1f34cd=_0x2964ae['currentTarget'][_0x28ab7e(0x21a)]['id'];openArticleModal(_0x1f34cd);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x2ff144=>{const _0x14a3ac=_0x5f393f;_0x2ff144[_0x14a3ac(0x213)]('click',async _0x471fca=>{const _0x3a3d02=_0x14a3ac,_0x33d605=_0x471fca[_0x3a3d02(0xee)]['dataset']['id'];confirmDeleteArticle(_0x33d605);});});}function openArticleModal(_0x370a5a=null){const _0x18340a=a4_0x7e1e1f,_0x880164=document['getElementById']('article-modal'),_0x150458=document[_0x18340a(0x108)]('article-modal-title'),_0x5220a2=document[_0x18340a(0x108)](_0x18340a(0x161)),_0x593a6b=document['getElementById']('article-id');_0x5220a2['reset'](),_0x593a6b['value']='';if(_0x370a5a)_0x150458['textContent']=_0x18340a(0x277),_0x593a6b['value']=_0x370a5a,loadArticleData(_0x370a5a);else{_0x150458['textContent']='Create\x20Article';const _0x136514=auth['currentUser'];if(_0x136514){const _0x5922ff=document['getElementById']('article-author');if(_0x5922ff&&_0x136514['displayName'])_0x5922ff[_0x18340a(0x1eb)]=_0x136514['displayName'];else _0x5922ff&&(_0x5922ff['value']=_0x136514['email']);}}_0x880164['classList']['add']('active');}async function loadArticleData(_0x56d812){const _0xde4928=a4_0x7e1e1f;try{const _0x3683d7=doc(db,'articles',_0x56d812),_0x1cf025=await getDoc(_0x3683d7);if(!_0x1cf025['exists']()){showNotification(_0xde4928(0x10c),'error');return;}const _0x5b113f=_0x1cf025['data']();document['getElementById']('article-title')['value']=_0x5b113f[_0xde4928(0x1f3)]||'',document['getElementById']('article-author')[_0xde4928(0x1eb)]=_0x5b113f[_0xde4928(0x1c4)]||'',document[_0xde4928(0x108)](_0xde4928(0x12c))['value']=_0x5b113f['imageUrl']||'',document[_0xde4928(0x108)](_0xde4928(0x11b))[_0xde4928(0x1eb)]=_0x5b113f['content']||'';}catch(_0x6dcbcb){console['error']('Error\x20loading\x20article\x20data:',_0x6dcbcb),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x17524a=a4_0x7e1e1f;try{const _0xdf81c4=document[_0x17524a(0x108)](_0x17524a(0x2f3))[_0x17524a(0x1eb)],_0x39f4c6=document['getElementById']('article-title')['value']['trim'](),_0x1e5997=document['getElementById']('article-author')[_0x17524a(0x1eb)]['trim'](),_0x495e6a=document['getElementById'](_0x17524a(0x12c))['value']['trim'](),_0x21b52f=document['getElementById']('article-content')[_0x17524a(0x1eb)]['trim']();if(!_0x39f4c6||!_0x21b52f){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x365982=auth['currentUser'];if(!_0x365982){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x1ae350={'title':_0x39f4c6,'author':_0x1e5997,'imageUrl':_0x495e6a||null,'content':_0x21b52f,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x365982['email']};!_0xdf81c4?(_0x1ae350['createdAt']=serverTimestamp(),_0x1ae350['createdBy']=_0x365982['email'],await addDoc(collection(db,_0x17524a(0x28f)),_0x1ae350),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0xdf81c4),_0x1ae350),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x2d7d59){console['error'](_0x17524a(0x249),_0x2d7d59),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x2d7d59['message'],'error');}}function closeArticleModal(){const _0x1b18b9=a4_0x7e1e1f,_0x4589cf=document['getElementById']('article-modal');_0x4589cf&&_0x4589cf['classList']['remove'](_0x1b18b9(0x13e));}async function confirmDeleteArticle(_0x4d3161){const _0x5b8185=a4_0x7e1e1f;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x5b8185(0x28f),_0x4d3161)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x5b8185(0x1e7));}catch(_0x2d6079){console[_0x5b8185(0x2a0)]('Error\x20deleting\x20article:',_0x2d6079),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x2d6079['message'],'error');}}function setupTrophyManagementSection(){const _0x280cad=a4_0x7e1e1f,_0x5bd131=document['getElementById'](_0x280cad(0x17a));_0x5bd131&&_0x5bd131['addEventListener'](_0x280cad(0x279),function(){const _0x2c9c31=_0x280cad;this['classList'][_0x2c9c31(0x11c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x148400=document['getElementById']('assign-trophy-image');_0x148400&&(_0x148400['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x238206=_0x2c9c31;this['classList'][_0x238206(0xb9)](_0x238206(0x1df)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x4ea662=>{const _0x3b5ed8=_0x2c9c31;console['error'](_0x3b5ed8(0x157),_0x4ea662),this['classList']['remove']('loading'),this['innerHTML']=_0x3b5ed8(0x28a),setTimeout(()=>{const _0x1afef0=_0x3b5ed8;this['innerHTML']=_0x1afef0(0x2c1);},0xbb8);});});const _0x5ccb29=document['getElementById'](_0x280cad(0x237));_0x5ccb29&&_0x5ccb29['addEventListener']('click',()=>{openTrophyModal();});const _0x360434=document['getElementById']('trophy-form');_0x360434&&_0x360434['addEventListener']('submit',_0x263bdb=>{_0x263bdb['preventDefault'](),saveTrophyDefinition();});const _0x2002cc=document[_0x280cad(0x108)]('cancel-trophy-btn');_0x2002cc&&_0x2002cc['addEventListener'](_0x280cad(0x279),()=>{closeTrophyModal();});document[_0x280cad(0x1b4)](_0x280cad(0x2cb))['forEach'](_0x230cd3=>{_0x230cd3['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x277f18=document['getElementById']('trophy-modal');_0x277f18&&_0x277f18[_0x280cad(0x213)]('click',_0x538b9b=>{const _0x3f4450=_0x280cad;_0x538b9b[_0x3f4450(0x2b3)]===_0x277f18&&closeTrophyModal();});const _0x2ff1c7=document['getElementById']('assign-trophy-modal');_0x2ff1c7&&_0x2ff1c7[_0x280cad(0x213)]('click',_0x88d8a4=>{_0x88d8a4['target']===_0x2ff1c7&&closeAssignTrophyModal();});const _0x3f8f8c=document['getElementById']('assign-trophy-form');_0x3f8f8c&&_0x3f8f8c['addEventListener']('submit',_0x5beedc=>{_0x5beedc['preventDefault'](),assignTrophyToPlayer();});const _0x3b62b2=document['getElementById'](_0x280cad(0x18a));_0x3b62b2&&_0x3b62b2[_0x280cad(0x213)]('click',()=>{closeAssignTrophyModal();});const _0x36364c=document['getElementById'](_0x280cad(0x2a3));_0x36364c&&(_0x36364c[_0x280cad(0x213)]('input',updateTrophyImagePreview),_0x36364c['addEventListener'](_0x280cad(0x1f1),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x607aeb=a4_0x7e1e1f,_0x517557=document['getElementById'](_0x607aeb(0x2a3))['value']['trim'](),_0xec0a6a=document[_0x607aeb(0x108)]('trophy-image-preview');if(!_0xec0a6a){const _0x5e79e5=document[_0x607aeb(0x108)]('trophy-image-url')['closest']('.form-group'),_0x2b1886=document[_0x607aeb(0x1d8)](_0x607aeb(0x24b));_0x2b1886['id']=_0x607aeb(0x27e),_0x2b1886[_0x607aeb(0x160)]='trophy-preview-container',_0x5e79e5['appendChild'](_0x2b1886);const _0x48cd43=document['createElement']('img');_0x48cd43['id']='trophy-preview-img',_0x48cd43['alt']='Trophy\x20Preview',_0x48cd43['onerror']=function(){const _0x33102a=_0x607aeb;this['src']=DEFAULT_TROPHY_IMAGE,this['classList'][_0x33102a(0x11c)](_0x33102a(0x2a0));},_0x2b1886['appendChild'](_0x48cd43);}const _0x1f75f2=document['getElementById'](_0x607aeb(0x2d6));_0x517557?(_0x1f75f2['src']=_0x517557,_0x1f75f2['style'][_0x607aeb(0x224)]='block',_0x1f75f2['classList'][_0x607aeb(0xb9)](_0x607aeb(0x2a0))):(_0x1f75f2['src']=DEFAULT_TROPHY_IMAGE,_0x1f75f2[_0x607aeb(0x120)]['display']=_0x607aeb(0x12a));}async function loadTrophyDefinitions(){const _0x2a3bb0=a4_0x7e1e1f,_0x11ce97=document['getElementById']('trophies-table-body');if(!_0x11ce97)return;_0x11ce97[_0x2a3bb0(0x14b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x8736fa=collection(db,'trophyDefinitions'),_0x1ee89e=query(_0x8736fa,orderBy('createdAt',_0x2a3bb0(0xc8))),_0x2da153=await getDocs(_0x1ee89e);if(_0x2da153['empty']){_0x11ce97['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x11ce97[_0x2a3bb0(0x14b)]='',_0x2da153[_0x2a3bb0(0x28b)](_0x249025=>{const _0x573d76=_0x2a3bb0,_0x4b214e=_0x249025['data'](),_0x4997bd=document[_0x573d76(0x1d8)]('tr'),_0x403d22=_0x4b214e['createdAt']?new Date(_0x4b214e[_0x573d76(0x164)]['seconds']*0x3e8)['toLocaleString']():'N/A';_0x4997bd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x4b214e[_0x573d76(0x1ef)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4b214e['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x4b214e['name']||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x4b214e[_0x573d76(0x2d1)]||'common')+'\x22>'+(_0x4b214e[_0x573d76(0x2d1)]||'common')+_0x573d76(0xbd)+_0x403d22+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x249025['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x249025['id']+_0x573d76(0x2ae)+_0x249025['id']+_0x573d76(0x132),_0x11ce97['appendChild'](_0x4997bd);}),setupTrophyActionButtons();}catch(_0x170924){console[_0x2a3bb0(0x2a0)]('Error\x20loading\x20trophy\x20definitions:',_0x170924),_0x11ce97['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x170924['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x5482b9=a4_0x7e1e1f;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x385f4e=>{_0x385f4e['addEventListener']('click',_0x1109eb=>{const _0x2e15d0=a4_0x113d,_0x44cdd9=_0x1109eb['currentTarget'][_0x2e15d0(0x21a)]['id'];openTrophyModal(_0x44cdd9);});}),document['querySelectorAll'](_0x5482b9(0x2ef))[_0x5482b9(0x28b)](_0x46cc27=>{_0x46cc27['addEventListener']('click',_0x5d2b9b=>{const _0x3000a1=a4_0x113d,_0xcc2792=_0x5d2b9b[_0x3000a1(0xee)]['dataset']['id'];openAssignTrophyModal(_0xcc2792);});}),document[_0x5482b9(0x1b4)](_0x5482b9(0x1f6))[_0x5482b9(0x28b)](_0x860aec=>{const _0x34257f=_0x5482b9;_0x860aec[_0x34257f(0x213)]('click',_0x355d7=>{const _0x432a04=_0x355d7['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x432a04);});});}function openTrophyModal(_0x1cd558=null){const _0x4c80ad=a4_0x7e1e1f,_0x1b0088=document['getElementById']('trophy-modal'),_0x2d7393=document['getElementById']('trophy-modal-title'),_0x5dac95=document['getElementById']('trophy-form'),_0x2e24b0=document['getElementById']('trophy-id');_0x5dac95['reset'](),_0x2e24b0[_0x4c80ad(0x1eb)]='';const _0x47e67e=document['getElementById']('trophy-preview-img');_0x47e67e&&(_0x47e67e[_0x4c80ad(0x19b)]=DEFAULT_TROPHY_IMAGE,_0x47e67e['classList'][_0x4c80ad(0xb9)]('error')),_0x1cd558?(_0x2d7393['textContent']='Edit\x20Trophy',_0x2e24b0['value']=_0x1cd558,loadTrophyData(_0x1cd558)):_0x2d7393['textContent']=_0x4c80ad(0x1bb),_0x1b0088[_0x4c80ad(0x231)][_0x4c80ad(0x11c)]('active');}async function loadTrophyData(_0xd3b002){const _0x4cabf6=a4_0x7e1e1f;try{const _0x1c2ba8=doc(db,'trophyDefinitions',_0xd3b002),_0x1b2562=await getDoc(_0x1c2ba8);if(!_0x1b2562['exists']()){showNotification(_0x4cabf6(0x191),'error');return;}const _0x401e6e=_0x1b2562['data']();document[_0x4cabf6(0x108)](_0x4cabf6(0x1b0))['value']=_0x401e6e['name']||'',document['getElementById'](_0x4cabf6(0x2a1))['value']=_0x401e6e['description']||'',document[_0x4cabf6(0x108)]('trophy-image-url')[_0x4cabf6(0x1eb)]=_0x401e6e['image']||'',document['getElementById']('trophy-rarity')['value']=_0x401e6e[_0x4cabf6(0x2d1)]||_0x4cabf6(0x1c3),updateTrophyImagePreview();}catch(_0x2c5326){console[_0x4cabf6(0x2a0)]('Error\x20loading\x20trophy\x20data:',_0x2c5326),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x4cabf6(0x2a0));}}async function saveTrophyDefinition(){const _0x181d10=a4_0x7e1e1f;try{const _0x417e22=document[_0x181d10(0x108)]('trophy-id')['value'],_0x1ed141=document['getElementById']('trophy-name')[_0x181d10(0x1eb)][_0x181d10(0x238)](),_0x30b2b3=document['getElementById']('trophy-description')['value'][_0x181d10(0x238)](),_0x106d01=document['getElementById']('trophy-image-url')[_0x181d10(0x1eb)]['trim'](),_0x3d4a6c=document['getElementById']('trophy-rarity')['value'];if(!_0x1ed141||!_0x30b2b3||!_0x106d01){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x31ed1e=auth['currentUser'];if(!_0x31ed1e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0x181d10(0x2a0));return;}const _0x54a596={'name':_0x1ed141,'description':_0x30b2b3,'image':_0x106d01,'rarity':_0x3d4a6c,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x31ed1e[_0x181d10(0x170)]};!_0x417e22?(_0x54a596['createdAt']=serverTimestamp(),_0x54a596['createdBy']=_0x31ed1e['email'],await addDoc(collection(db,_0x181d10(0x197)),_0x54a596),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x417e22),_0x54a596),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x116370){console[_0x181d10(0x2a0)]('Error\x20saving\x20trophy:',_0x116370),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x116370['message'],'error');}}function closeTrophyModal(){const _0x4006b0=a4_0x7e1e1f,_0x40ef51=document[_0x4006b0(0x108)](_0x4006b0(0x2bd));_0x40ef51&&_0x40ef51['classList']['remove']('active');}async function confirmDeleteTrophy(_0x344302){const _0x597b86=a4_0x7e1e1f;if(!_0x344302){console[_0x597b86(0x2a0)](_0x597b86(0x295));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x556640=auth['currentUser'];if(!_0x556640){showNotification(_0x597b86(0x1c5),'error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x344302),await deleteDoc(doc(db,'trophyDefinitions',_0x344302)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x2fb190){console[_0x597b86(0x2a0)]('Error\x20deleting\x20trophy\x20definition:',_0x2fb190),showNotification(_0x597b86(0xc0)+_0x2fb190[_0x597b86(0x2aa)],'error');}}async function openAssignTrophyModal(_0x2c64b4){const _0x17d403=a4_0x7e1e1f;try{const _0x13fa74=doc(db,'trophyDefinitions',_0x2c64b4),_0x59e126=await getDoc(_0x13fa74);if(!_0x59e126['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x2d53c7=_0x59e126['data']();document['getElementById']('assign-trophy-id')['value']=_0x2c64b4,document['getElementById'](_0x17d403(0x19e))['value']=_0x2d53c7['name'],document['getElementById']('assign-trophy-image')[_0x17d403(0x19b)]=_0x2d53c7[_0x17d403(0x1ef)]||DEFAULT_TROPHY_IMAGE,document[_0x17d403(0x108)](_0x17d403(0x152))['textContent']=_0x2d53c7[_0x17d403(0x270)]||'Unnamed\x20Trophy',document[_0x17d403(0x108)](_0x17d403(0xf5))['textContent']=_0x2d53c7['description']||'No\x20description';const _0x842828=document['getElementById']('assign-trophy-rarity');_0x842828[_0x17d403(0x10a)]=_0x2d53c7['rarity']||_0x17d403(0x1c3),_0x842828['className']='trophy-rarity\x20'+(_0x2d53c7['rarity']||'common');const _0x3a8411=document['getElementById']('assign-trophy-modal');_0x3a8411['classList'][_0x17d403(0x11c)](_0x17d403(0x13e));}catch(_0x1a1b18){console['error'](_0x17d403(0x215),_0x1a1b18),showNotification(_0x17d403(0xec),'error');}}function closeAssignTrophyModal(){const _0x39498b=document['getElementById']('assign-trophy-modal');_0x39498b&&_0x39498b['classList']['remove']('active');}async function assignTrophyToPlayer(){const _0x27d222=a4_0x7e1e1f;try{const _0x24d763=document['getElementById']('assign-trophy-id')['value'],_0x148fc3=document['getElementById']('assign-trophy-name')['value'],_0x250c67=document[_0x27d222(0x108)]('assign-player-username')['value']['trim'](),_0x275e91=document['querySelector'](_0x27d222(0x22f))['value'];if(!_0x24d763||!_0x250c67){showNotification(_0x27d222(0x254),'error');return;}const _0x262723=auth['currentUser'];if(!_0x262723){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x48166d=null,_0x457a83=null,_0x13d4dd=null;if(_0x275e91===_0x27d222(0x137)){const _0x40dfca=collection(db,'nonParticipants'),_0x36f29a=query(_0x40dfca,where(_0x27d222(0x26f),'==',_0x250c67)),_0x4ef0d9=await getDocs(_0x36f29a);!_0x4ef0d9[_0x27d222(0x26a)]&&(_0x48166d=_0x4ef0d9['docs'][0x0],_0x457a83=_0x48166d['id'],_0x13d4dd=_0x48166d['data']());}else{const _0x344202=_0x275e91==='D1'?'players':_0x275e91==='D2'?_0x27d222(0x255):'playersD3',_0x31cb1e=collection(db,_0x344202),_0x5d2ceb=query(_0x31cb1e,where('username','==',_0x250c67)),_0x5e5ed7=await getDocs(_0x5d2ceb);!_0x5e5ed7['empty']&&(_0x48166d=_0x5e5ed7[_0x27d222(0x15c)][0x0],_0x457a83=_0x48166d['id'],_0x13d4dd=_0x48166d['data']());}if(!_0x48166d){showNotification(_0x27d222(0x15d)+_0x250c67+'\x22\x20not\x20found\x20in\x20'+(_0x275e91==='non-participant'?'non-participants':_0x275e91+_0x27d222(0xcd)),_0x27d222(0x2a0));return;}const _0x2627d5=collection(db,_0x27d222(0x103)),_0x462e42=query(_0x2627d5,where('userId','==',_0x457a83),where(_0x27d222(0x107),'==',_0x24d763)),_0x401108=await getDocs(_0x462e42);if(!_0x401108['empty']){showNotification('Player\x20\x22'+_0x250c67+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x457a83,'playerUsername':_0x250c67,'trophyId':_0x24d763,'awardedAt':serverTimestamp(),'awardedBy':_0x262723[_0x27d222(0x170)],'ladder':_0x275e91}),showNotification('Trophy\x20\x22'+_0x148fc3+'\x22\x20awarded\x20to\x20'+_0x250c67,'success'),closeAssignTrophyModal();}catch(_0x34e4e9){console['error']('Error\x20assigning\x20trophy:',_0x34e4e9),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x34e4e9['message'],_0x27d222(0x2a0));}}function setupInactivePlayersSection(){const _0x285182=a4_0x7e1e1f,_0x1290c1=document['getElementById']('inactive-days-filter');_0x1290c1&&_0x1290c1['addEventListener']('change',function(){const _0x1bbbd7=document['getElementById']('load-inactive-players-data');if(_0x1bbbd7)_0x1bbbd7['click']();});const _0x1b47cd=document['querySelector'](_0x285182(0x29f)),_0x1893ad=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x1b47cd&&_0x1893ad&&(_0x1b47cd[_0x285182(0x213)]('change',function(){const _0x47c27c=_0x285182;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x47c27c(0x207))['style'][_0x47c27c(0x224)]!==_0x47c27c(0x234)){const _0x408676=document['getElementById'](_0x47c27c(0xf3));if(_0x408676)_0x408676['click']();}}}),_0x1893ad['addEventListener'](_0x285182(0x240),function(){const _0x468d21=_0x285182;if(this[_0x468d21(0x243)]){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!=='none'){const _0x3db9a5=document[_0x468d21(0x108)]('load-inactive-players-data');if(_0x3db9a5)_0x3db9a5['click']();}}}));const _0x41e5c9=document[_0x285182(0x108)]('inactive-players-search');_0x41e5c9&&_0x41e5c9['addEventListener']('input',debounce(function(){const _0x5a0e75=_0x285182,_0x4ed0b6=_0x41e5c9['value'][_0x5a0e75(0x25f)](),_0x2065eb=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x2065eb[_0x5a0e75(0x28b)](_0x76a530=>{const _0x1698b2=_0x5a0e75;if(_0x76a530['querySelector']('.loading-cell')||_0x76a530[_0x1698b2(0x104)]('.empty-state')||_0x76a530['querySelector']('.error-state'))return;const _0xf2fa7c=_0x76a530[_0x1698b2(0x1ac)][0x0]?.['textContent']['toLowerCase']()||'',_0x5f61b2=_0x76a530[_0x1698b2(0x1ac)][0x5]?.['textContent']['toLowerCase']()||'';_0xf2fa7c['includes'](_0x4ed0b6)||_0x5f61b2['includes'](_0x4ed0b6)?_0x76a530['style']['display']='':_0x76a530[_0x1698b2(0x120)][_0x1698b2(0x224)]='none';});},0x12c)),document[_0x285182(0x213)](_0x285182(0x279),function(_0x1b2ab9){const _0x7935eb=_0x285182;if(_0x1b2ab9['target']['closest']('.view-player-btn')){const _0x32e17e=_0x1b2ab9['target']['closest']('.view-player-btn'),_0x39629f=_0x32e17e['dataset'][_0x7935eb(0x26f)];_0x39629f&&alert('View\x20player\x20details\x20for\x20'+_0x39629f+'\x20-\x20Feature\x20coming\x20soon');}}),console['log'](_0x285182(0x15f));}async function loadInactivePlayersData(){const _0xce798c=a4_0x7e1e1f,_0x116b69=document['getElementById']('inactive-players-table-body');if(!_0x116b69)return;_0x116b69[_0xce798c(0x14b)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x38294b=document['getElementById'](_0xce798c(0xb2)),_0x56997d=_0x38294b?parseInt(_0x38294b['value'])||0x0:0x0,_0xa0bd4e=collection(db,currentLadder==='D1'?'players':_0xce798c(0x255)),_0x523bb0=await getDocs(_0xa0bd4e);if(_0x523bb0['empty']){_0x116b69[_0xce798c(0x14b)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x1e2e24=[];_0x523bb0['forEach'](_0x251653=>{const _0x10b2c5=_0xce798c,_0x28fea4=_0x251653['data']();_0x1e2e24['push']({..._0x28fea4,'id':_0x251653['id'],'username':_0x28fea4['username']||_0x10b2c5(0xf1)});}),console['log'](_0xce798c(0x26d)+_0x1e2e24['length']+_0xce798c(0x2c6)+currentLadder+'\x20ladder');const _0x5a24ab=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x5dd6a2=_0x1e2e24['map'](async _0x52f80e=>{const _0x4b476d=_0xce798c;try{const _0x403015=collection(db,_0x5a24ab),_0x4d0fe5=query(_0x403015,or(where('winnerUsername','==',_0x52f80e[_0x4b476d(0x26f)]),where(_0x4b476d(0xe5),'==',_0x52f80e[_0x4b476d(0x26f)])),orderBy('approvedAt','desc'),limit(0x1)),_0x196f7e=await getDocs(_0x4d0fe5);if(!_0x196f7e['empty']){const _0x314c37=_0x196f7e['docs'][0x0][_0x4b476d(0x147)](),_0x15bd21=_0x314c37['approvedAt']?new Date(_0x314c37['approvedAt']['seconds']*0x3e8):null,_0x4552a4=new Date(),_0xdf11a3=_0x15bd21?Math['floor']((_0x4552a4-_0x15bd21)/(0x3e8*0x3c*0x3c*0x18)):null,_0x2ba5b0=_0x314c37['winnerUsername']===_0x52f80e['username']?_0x314c37['loserUsername']:_0x314c37['winnerUsername'],_0x5178c3=_0x314c37[_0x4b476d(0x253)]===_0x52f80e['username']?'Won':'Lost';return{..._0x52f80e,'lastMatch':{'date':_0x15bd21?_0x15bd21[_0x4b476d(0x187)]():_0x4b476d(0x2ce),'opponent':_0x2ba5b0||'Unknown','result':_0x5178c3,'timestamp':_0x15bd21||new Date(0x0),'daysSinceMatch':_0xdf11a3||Number['MAX_SAFE_INTEGER']}};}else return{..._0x52f80e,'lastMatch':{'date':_0x4b476d(0x248),'opponent':'N/A','result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x52cbf7){return console[_0x4b476d(0x2a0)]('Error\x20fetching\x20matches\x20for\x20'+_0x52f80e['username']+':',_0x52cbf7),{..._0x52f80e,'lastMatch':{'date':'Error','opponent':_0x4b476d(0x1e8),'result':_0x4b476d(0x1e8),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x424107=await Promise['all'](_0x5dd6a2);_0x424107['sort']((_0xc1b92a,_0x2bae3b)=>_0x2bae3b['lastMatch']['daysSinceMatch']-_0xc1b92a['lastMatch']['daysSinceMatch']);_0x56997d>0x0&&(_0x424107=_0x424107['filter'](_0x208cd6=>_0x208cd6[_0xce798c(0x144)]['daysSinceMatch']>=_0x56997d));_0x116b69['innerHTML']='';if(_0x424107['length']===0x0){_0x116b69['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x424107[_0xce798c(0x28b)](_0x49c149=>{const _0x25ad1b=_0xce798c,_0x8002ce=document['createElement']('tr'),_0x54a4cb=_0x49c149['lastMatch']['daysSinceMatch']>0x1e?_0x25ad1b(0x23a):_0x49c149['lastMatch'][_0x25ad1b(0x134)]>0xe?_0x25ad1b(0x2be):'';_0x8002ce['className']=_0x54a4cb,_0x8002ce['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x49c149['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x49c149[_0x25ad1b(0x271)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x49c149['lastMatch']['date']+_0x25ad1b(0x129)+(_0x49c149['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x49c149['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x49c149['lastMatch']['date']===_0x25ad1b(0x248)?_0x25ad1b(0x15e):_0x49c149['lastMatch']['result']+'\x20vs\x20'+_0x49c149['lastMatch']['opponent'])+_0x25ad1b(0x167)+_0x49c149['username']+_0x25ad1b(0x15b),_0x116b69['appendChild'](_0x8002ce);}),console['log']('Displaying\x20'+_0x424107[_0xce798c(0x19f)]+'\x20inactive\x20players');}catch(_0x449be8){console['error'](_0xce798c(0xf6),_0x449be8),_0x116b69['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x449be8['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x846227=a4_0x7e1e1f;console[_0x846227(0x1af)]('Setting\x20up\x20highlight\x20buttons');const _0x262d4f=document['getElementById'](_0x846227(0x264));_0x262d4f&&_0x262d4f['addEventListener']('click',function(){const _0x4de169=_0x846227;console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x4de169(0x284));});const _0x114101=document[_0x846227(0x108)]('create-creator-highlight-btn');_0x114101&&_0x114101['addEventListener'](_0x846227(0x279),function(){const _0xce1a71=_0x846227;console['log'](_0xce1a71(0x13f)),openHighlightModal('creator');});const _0x4c8720=document['getElementById'](_0x846227(0x116));_0x4c8720&&_0x4c8720['addEventListener'](_0x846227(0x279),function(){const _0x5554d7=_0x846227;console[_0x5554d7(0x1af)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x530bf4=a4_0x7e1e1f(0x284)){const _0x4ae71b=a4_0x7e1e1f;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x530bf4);const _0x431ace=document['getElementById']('highlight-modal'),_0x310f24=document['getElementById']('highlight-form'),_0x17508a=document['getElementById'](_0x4ae71b(0x175)),_0x3d68ef=document['getElementById']('highlight-id');if(!_0x431ace||!_0x310f24||!_0x17508a){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x310f24[_0x4ae71b(0x18e)](),_0x3d68ef['value']='';const _0xdf0a89=[_0x4ae71b(0x284),'creator','achievement'],_0x3bcd0c=!_0xdf0a89['includes'](_0x530bf4);if(_0x3bcd0c){const _0x3c703b=_0x530bf4;_0x3d68ef[_0x4ae71b(0x1eb)]=_0x3c703b,_0x17508a['textContent']=_0x4ae71b(0x21c),loadHighlightDataAdmin(_0x3c703b);}else{const _0x330ece=_0x530bf4;document['getElementById']('highlight-type')['value']=_0x330ece,_0x17508a['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x330ece),toggleHighlightFields(_0x330ece);const _0x276ba9=auth[_0x4ae71b(0x19c)];_0x276ba9&&document[_0x4ae71b(0x108)]('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')['value']=_0x276ba9[_0x4ae71b(0x20a)]||_0x276ba9['email']);}_0x431ace[_0x4ae71b(0x231)][_0x4ae71b(0x11c)]('active');}function toggleHighlightFields(_0xaced8){const _0x337414=a4_0x7e1e1f;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0xaced8);const _0x363901=document['getElementById']('highlight-form');if(!_0x363901)return;const _0x23793d=_0x363901['querySelectorAll']('.form-group,\x20.form-row');_0x23793d['forEach'](_0x18937c=>_0x18937c['style'][_0x337414(0x224)]='none');const _0x35a18e=document[_0x337414(0x108)]('highlight-video-preview-container');if(_0x35a18e)_0x35a18e[_0x337414(0x120)]['display']='none';const _0xa14029=['highlight-title-container',_0x337414(0x1c1),'highlight-submitted-by-container'];_0xa14029[_0x337414(0x28b)](_0x5cacbe=>{const _0x413f6a=_0x337414,_0x11d552=document['getElementById'](_0x5cacbe);if(_0x11d552)_0x11d552['style']['display']=_0x413f6a(0x12a);});if(_0xaced8===_0x337414(0x284)){const _0x2a6010=['highlight-video-container','highlight-match-info-container','highlight-map-container','highlight-match-date-container','highlight-players-container',_0x337414(0x139)];_0x2a6010[_0x337414(0x28b)](_0x59a7bf=>{const _0x9383a4=_0x337414,_0x4ecaa2=document['getElementById'](_0x59a7bf);_0x4ecaa2&&(_0x59a7bf==='highlight-players-container'?_0x4ecaa2[_0x9383a4(0x120)]['display']='flex':_0x4ecaa2['style'][_0x9383a4(0x224)]='block');});const _0x151f14=document['getElementById'](_0x337414(0xa7));if(_0x151f14){_0x151f14['required']=!![];const _0xdc1259=_0x151f14['previousElementSibling'];if(_0xdc1259)_0xdc1259[_0x337414(0x14b)]='YouTube\x20Video\x20ID*';}if(_0x35a18e)_0x35a18e['style']['display']='block';updateHighlightVideoPreview();}else{if(_0xaced8===_0x337414(0x2c5)){const _0x27b172=[_0x337414(0x14d),_0x337414(0x280),'highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x27b172['forEach'](_0x133d7d=>{const _0x214b17=_0x337414,_0x262d2e=document['getElementById'](_0x133d7d);if(_0x262d2e)_0x262d2e['style']['display']=_0x214b17(0x12a);});const _0x5bc1e0=document['getElementById']('highlight-video-id');if(_0x5bc1e0){_0x5bc1e0['required']=![];const _0x521729=_0x5bc1e0[_0x337414(0x291)];if(_0x521729)_0x521729[_0x337414(0x14b)]='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0xaced8===_0x337414(0xdf)){const _0x156acf=['highlight-achievement-player-container','highlight-achievement-type-container',_0x337414(0x206),'highlight-player-profile-container',_0x337414(0x2f0),'highlight-video-container'];_0x156acf['forEach'](_0x2675a5=>{const _0xe311b1=_0x337414,_0x5a236b=document[_0xe311b1(0x108)](_0x2675a5);if(_0x5a236b)_0x5a236b['style']['display']=_0xe311b1(0x12a);});const _0x4a994a=document[_0x337414(0x108)]('highlight-video-id');if(_0x4a994a){_0x4a994a['required']=![];const _0x1c406d=_0x4a994a[_0x337414(0x291)];if(_0x1c406d)_0x1c406d['innerHTML']=_0x337414(0x2b8);}}}}}async function loadHighlightDataAdmin(_0x2a3b4e){const _0x117f7b=a4_0x7e1e1f;try{const _0x23fb34=doc(db,'highlights',_0x2a3b4e),_0x2e1822=await getDoc(_0x23fb34);if(!_0x2e1822['exists']()){showNotification(_0x117f7b(0x177),_0x117f7b(0x2a0));return;}const _0x1d5afd=_0x2e1822['data'](),_0x41261c=_0x1d5afd[_0x117f7b(0x145)]||_0x117f7b(0x284);document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x41261c),document[_0x117f7b(0x108)]('highlight-type')[_0x117f7b(0x1eb)]=_0x41261c,toggleHighlightFields(_0x41261c),document['getElementById']('highlight-title')['value']=_0x1d5afd[_0x117f7b(0x1f3)]||'',document[_0x117f7b(0x108)]('highlight-description')['value']=_0x1d5afd['description']||'',document[_0x117f7b(0x108)](_0x117f7b(0x1d2))['value']=_0x1d5afd['submittedBy']||'';_0x1d5afd[_0x117f7b(0x2ba)]&&(document['getElementById']('highlight-video-id')['value']=_0x1d5afd[_0x117f7b(0x2ba)],updateHighlightVideoPreview());if(_0x41261c===_0x117f7b(0x284)){document['getElementById']('highlight-match-info')['value']=_0x1d5afd[_0x117f7b(0xe6)]||'',document['getElementById']('highlight-map')[_0x117f7b(0x1eb)]=_0x1d5afd[_0x117f7b(0x13b)]||'';if(_0x1d5afd['matchDate']){const _0x1f3d24=new Date(_0x1d5afd['matchDate'][_0x117f7b(0x1ab)]*0x3e8);document['getElementById']('highlight-match-date')[_0x117f7b(0x1eb)]=_0x1f3d24[_0x117f7b(0x140)]()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x1d5afd['winnerName']||'',document['getElementById'](_0x117f7b(0x2ea))[_0x117f7b(0x1eb)]=_0x1d5afd['winnerScore']||'',document['getElementById']('highlight-loser-name')['value']=_0x1d5afd['loserName']||'',document['getElementById']('highlight-loser-score')[_0x117f7b(0x1eb)]=_0x1d5afd['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0x1d5afd['matchLink']||'';}else{if(_0x41261c==='creator')document['getElementById']('highlight-map')['value']=_0x1d5afd['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x1d5afd['mapCreator']||'',document['getElementById'](_0x117f7b(0x2c0))['value']=_0x1d5afd['mapVersion']||'',document[_0x117f7b(0x108)](_0x117f7b(0x2ac))[_0x117f7b(0x1eb)]=_0x1d5afd[_0x117f7b(0x1e0)]||'';else _0x41261c===_0x117f7b(0xdf)&&(document['getElementById'](_0x117f7b(0x20c))['value']=_0x1d5afd['achievementPlayer']||'',document[_0x117f7b(0x108)](_0x117f7b(0x1b9))['value']=_0x1d5afd['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x1d5afd['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x1d5afd['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0x1d5afd[_0x117f7b(0xb5)]||'');}}catch(_0x31ace0){console['error'](_0x117f7b(0x22d),_0x31ace0),showNotification(_0x117f7b(0x247)+_0x31ace0['message'],_0x117f7b(0x2a0));}}async function saveHighlight(){const _0x176f62=a4_0x7e1e1f;try{const _0x93f6ea=document[_0x176f62(0x108)]('highlight-id')?.['value']||'',_0x36a692=document['getElementById']('highlight-type')?.['value']||'match',_0x5a51cb={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document['getElementById']('highlight-description')?.[_0x176f62(0x1eb)]?.['trim']()||'','submittedBy':document[_0x176f62(0x108)](_0x176f62(0x1d2))?.['value']?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.[_0x176f62(0x1eb)]?.[_0x176f62(0x238)]()||null,'type':_0x36a692};if(!_0x5a51cb[_0x176f62(0x1f3)]){showNotification('Title\x20is\x20required',_0x176f62(0x2a0));return;}if(_0x36a692===_0x176f62(0x284)){_0x5a51cb[_0x176f62(0xe6)]=document['getElementById']('highlight-match-info')?.[_0x176f62(0x1eb)]?.['trim']()||'',_0x5a51cb['map']=document['getElementById'](_0x176f62(0x265))?.['value']?.['trim']()||'';const _0x634aba=document['getElementById']('highlight-match-date'),_0x323409=_0x634aba?.['value']||'';_0x5a51cb[_0x176f62(0x208)]=_0x323409?Timestamp['fromDate'](new Date(_0x323409)):null,_0x5a51cb[_0x176f62(0x1fc)]=document['getElementById'](_0x176f62(0xb4))?.['value']?.['trim']()||'',_0x5a51cb[_0x176f62(0x24c)]=document['getElementById']('highlight-winner-score')?.[_0x176f62(0x1eb)]?.['trim']()||'',_0x5a51cb['loserName']=document[_0x176f62(0x108)]('highlight-loser-name')?.['value']?.['trim']()||'',_0x5a51cb['loserScore']=document[_0x176f62(0x108)]('highlight-loser-score')?.['value']?.['trim']()||'',_0x5a51cb['matchLink']=document['getElementById']('highlight-match-link')?.[_0x176f62(0x1eb)]?.['trim']()||'';if(!_0x5a51cb['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x36a692===_0x176f62(0x2c5)){_0x5a51cb[_0x176f62(0x13b)]=document['getElementById']('highlight-map')?.['value']?.[_0x176f62(0x238)]()||'',_0x5a51cb[_0x176f62(0x17c)]=document['getElementById']('highlight-map-creator')?.[_0x176f62(0x1eb)]?.['trim']()||'',_0x5a51cb[_0x176f62(0x23b)]=document['getElementById'](_0x176f62(0x2c0))?.[_0x176f62(0x1eb)]?.['trim']()||'',_0x5a51cb['creatorImageUrl']=document['getElementById'](_0x176f62(0x2ac))?.['value']?.['trim']()||'';if(!_0x5a51cb['mapCreator']){showNotification(_0x176f62(0x29b),'error');return;}}else{if(_0x36a692==='achievement'){_0x5a51cb['achievementPlayer']=document['getElementById'](_0x176f62(0x20c))?.['value']?.[_0x176f62(0x238)]()||'',_0x5a51cb['achievementType']=document['getElementById'](_0x176f62(0x1b9))?.[_0x176f62(0x1eb)]?.['trim']()||'',_0x5a51cb['achievementDetails']=document[_0x176f62(0x108)]('highlight-achievement-details')?.[_0x176f62(0x1eb)]?.['trim']()||'',_0x5a51cb['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.[_0x176f62(0x238)]()||'',_0x5a51cb['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.[_0x176f62(0x238)]()||'';if(!_0x5a51cb['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required',_0x176f62(0x2a0));return;}}}}_0x93f6ea?(_0x5a51cb['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x176f62(0x262),_0x93f6ea),_0x5a51cb),showNotification('Highlight\x20updated\x20successfully!',_0x176f62(0x1e7))):(_0x5a51cb['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x176f62(0x262)),_0x5a51cb),showNotification('Highlight\x20created\x20successfully!','success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x1fb88b){console[_0x176f62(0x2a0)]('Error\x20saving\x20highlight:',_0x1fb88b),showNotification(_0x176f62(0x266)+_0x1fb88b['message'],_0x176f62(0x2a0));}}function closeHighlightModal(){const _0x58d26f=a4_0x7e1e1f,_0x203103=document[_0x58d26f(0x108)](_0x58d26f(0x2cf));if(_0x203103)_0x203103['classList']['remove']('active');}function getHighlightTypeName(_0x25b5c7){const _0x56c50e=a4_0x7e1e1f;switch(_0x25b5c7){case'match':return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case'achievement':return _0x56c50e(0x235);default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x138fdb=a4_0x7e1e1f,_0x3f8b3b=document['getElementById']('highlight-video-id'),_0x486880=document[_0x138fdb(0x108)](_0x138fdb(0x172)),_0x3b8bcb=document[_0x138fdb(0x108)]('highlight-video-preview');if(!_0x3f8b3b||!_0x3b8bcb||!_0x486880)return;const _0x241012=_0x3f8b3b[_0x138fdb(0x1eb)]['trim']();_0x241012&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x241012)?(_0x3b8bcb['src']='https://www.youtube.com/embed/'+_0x241012,_0x486880['style']['display']='block'):(_0x3b8bcb[_0x138fdb(0x19b)]='',_0x486880[_0x138fdb(0x120)][_0x138fdb(0x224)]='none');}async function loadHighlightsAdmin(){const _0xa908a3=a4_0x7e1e1f,_0x238b28=document['getElementById']('highlights-table-body');if(!_0x238b28)return;_0x238b28['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x69d8b=query(collection(db,_0xa908a3(0x262)),orderBy(_0xa908a3(0x164),'desc')),_0x4692b3=await getDocs(_0x69d8b);if(_0x4692b3['empty']){_0x238b28[_0xa908a3(0x14b)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x238b28['innerHTML']='',_0x4692b3[_0xa908a3(0x28b)](_0x706e7a=>{const _0x2a4aef=_0xa908a3,_0x414e5f=_0x706e7a['data'](),_0x578301=document[_0x2a4aef(0x1d8)]('tr'),_0x5b5107=_0x414e5f[_0x2a4aef(0x164)]?new Date(_0x414e5f[_0x2a4aef(0x164)]['seconds']*0x3e8)['toLocaleDateString']():_0x2a4aef(0x2ce);let _0x8b8134='Unknown',_0x573754='';switch(_0x414e5f['type']){case _0x2a4aef(0x284):_0x8b8134='Match',_0x573754=_0x2a4aef(0x228);break;case'creator':_0x8b8134='Creator',_0x573754='creator-type';break;case'achievement':_0x8b8134='Achievement',_0x573754=_0x2a4aef(0xe2);break;}_0x578301['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x414e5f[_0x2a4aef(0x1f3)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x573754+'\x22>'+_0x8b8134+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5b5107+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x414e5f['submittedBy']||_0x2a4aef(0x18f))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x414e5f[_0x2a4aef(0x2ba)]?_0x2a4aef(0x2db):'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x706e7a['id']+_0x2a4aef(0x1ce)+_0x706e7a['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x238b28['appendChild'](_0x578301);}),document['querySelectorAll']('.edit-highlight-btn')[_0xa908a3(0x28b)](_0x16dc31=>{const _0x490e86=_0xa908a3;_0x16dc31[_0x490e86(0x213)](_0x490e86(0x279),_0x45ff78=>{openHighlightModal(_0x45ff78['currentTarget']['dataset']['id']);});}),document[_0xa908a3(0x1b4)]('.delete-highlight-btn')['forEach'](_0x424145=>{_0x424145['addEventListener']('click',_0x43a2fb=>{confirmDeleteHighlight(_0x43a2fb['currentTarget']['dataset']['id']);});});}catch(_0x113441){console['error']('Error\x20loading\x20highlights:',_0x113441),_0x238b28['innerHTML']=_0xa908a3(0xca)+_0x113441['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x2f1a16){const _0x38ed56=a4_0x7e1e1f;if(confirm(_0x38ed56(0x22e)))try{await deleteDoc(doc(db,_0x38ed56(0x262),_0x2f1a16)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x44e957){console['error']('Error\x20deleting\x20highlight:',_0x44e957),showNotification('Error\x20deleting\x20highlight:\x20'+_0x44e957['message'],_0x38ed56(0x2a0));}}function setupCreateTestMatchModal(){const _0x16ad23=a4_0x7e1e1f;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x1bc008=document['getElementById']('create-test-match-modal'),_0x1f4373=document[_0x16ad23(0x108)]('create-test-match-form');if(!_0x1bc008){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x1f4373){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x5e64a4=_0x1bc008['cloneNode'](!![]);_0x1bc008['parentNode']['replaceChild'](_0x5e64a4,_0x1bc008);const _0x258263=_0x5e64a4['querySelector']('#create-test-match-form');_0x5e64a4['addEventListener']('click',function(_0x2b83ae){const _0x161a67=_0x16ad23;_0x2b83ae[_0x161a67(0x2b3)]===_0x5e64a4&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x4e3fcb=_0x5e64a4[_0x16ad23(0x104)](_0x16ad23(0x2a8));_0x4e3fcb&&_0x4e3fcb['addEventListener']('click',function(_0x17c040){const _0x44aaf5=_0x16ad23;_0x17c040['preventDefault'](),_0x17c040['stopPropagation'](),console[_0x44aaf5(0x1af)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x969c83=_0x5e64a4['querySelector']('#cancel-create-test-match-btn');_0x969c83&&_0x969c83[_0x16ad23(0x213)]('click',function(_0x20f460){_0x20f460['preventDefault'](),_0x20f460['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x258263){_0x258263['addEventListener']('submit',function(_0x2f774f){const _0x39f5b4=_0x16ad23;_0x2f774f['preventDefault'](),_0x2f774f['stopPropagation'](),console['log'](_0x39f5b4(0x121)),createTestMatch();});const _0x1195ed=_0x258263['querySelector']('button[type=\x22submit\x22]');_0x1195ed&&_0x1195ed[_0x16ad23(0x213)]('click',function(_0xa8d0ca){const _0x32655b=_0x16ad23;_0xa8d0ca['preventDefault'](),_0xa8d0ca['stopPropagation'](),console['log'](_0x32655b(0x124)),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x3a4691=a4_0x7e1e1f;console[_0x3a4691(0x1af)](_0x3a4691(0x17b)),setupHighlightButtons();const _0x23d8d4=document[_0x3a4691(0x108)]('highlight-form');_0x23d8d4&&_0x23d8d4['addEventListener']('submit',_0x27e414=>{_0x27e414['preventDefault'](),saveHighlight();});const _0x4bfecc=document['getElementById']('cancel-highlight-btn');_0x4bfecc&&_0x4bfecc['addEventListener']('click',closeHighlightModal);const _0x37b568=document[_0x3a4691(0x104)]('#highlight-modal\x20.close-btn');_0x37b568&&_0x37b568['addEventListener'](_0x3a4691(0x279),closeHighlightModal);const _0x55c9ee=document[_0x3a4691(0x108)]('highlight-modal');_0x55c9ee&&_0x55c9ee['addEventListener']('click',_0x417a4e=>{_0x417a4e['target']===_0x55c9ee&&closeHighlightModal();});const _0x11a033=document[_0x3a4691(0x108)]('highlight-video-id');_0x11a033&&_0x11a033['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x2b76fb=a4_0x7e1e1f;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x399b61=document[_0x2b76fb(0x108)]('matches-prev-page'),_0x3e3eff=document['getElementById'](_0x2b76fb(0x114));_0x399b61&&_0x399b61['addEventListener'](_0x2b76fb(0x279),()=>{const _0x1c60ba=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x1c60ba]['page']-0x1);});_0x3e3eff&&_0x3e3eff['addEventListener']('click',()=>{const _0x2be5d5=_0x2b76fb,_0x3c6374=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x3c6374][_0x2be5d5(0x12b)]+0x1);});const _0x468d66=document[_0x2b76fb(0x108)]('apply-matches-filters'),_0x110b83=document['getElementById']('reset-matches-filters');_0x468d66&&_0x468d66['addEventListener']('click',applyMatchesFilters);_0x110b83&&_0x110b83['addEventListener']('click',resetMatchesFilters);const _0x22de3c=document['getElementById']('matches-search');_0x22de3c&&_0x22de3c[_0x2b76fb(0x213)](_0x2b76fb(0xc2),debounce(filterMatchesTable,0x12c));const _0x2cf5f7=document[_0x2b76fb(0x108)](_0x2b76fb(0x109));_0x2cf5f7&&_0x2cf5f7['addEventListener'](_0x2b76fb(0x279),openResimulateModal);const _0x510dbf=document[_0x2b76fb(0x108)]('resimulate-modal');if(_0x510dbf){const _0x17c2db=_0x510dbf['querySelector']('.close');_0x17c2db&&_0x17c2db[_0x2b76fb(0x213)]('click',closeResimulateModal),_0x510dbf['addEventListener'](_0x2b76fb(0x279),_0x3b839b=>{const _0x3dfd5a=_0x2b76fb;_0x3b839b[_0x3dfd5a(0x2b3)]===_0x510dbf&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0xbb97a7=a4_0x7e1e1f;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x35a638=document['getElementById'](_0xbb97a7(0x2e1)),_0x3daf40=document['getElementById']('create-test-match-form');if(!_0x35a638){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification(_0xbb97a7(0x11d),'error');return;}if(!_0x3daf40){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x3daf40['reset']();const _0x1fcbe7=document[_0xbb97a7(0x1b4)]('input[name=\x22test-match-ladder\x22]');let _0xa387fe=![];_0x1fcbe7['forEach'](_0x2e1806=>{const _0x1a0b50=_0xbb97a7;console['log']('Found\x20radio\x20with\x20value:',_0x2e1806['value']),_0x2e1806[_0x1a0b50(0x1eb)]===currentLadder&&(_0x2e1806['checked']=!![],_0xa387fe=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0xa387fe){console[_0xbb97a7(0x1b3)]('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x21c172=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x21c172&&(_0x21c172['checked']=!![],console[_0xbb97a7(0x1af)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x478159=document['getElementById']('test-match-date');if(_0x478159){const _0x12cff1=new Date()['toISOString']()['split']('T')[0x0];_0x478159[_0xbb97a7(0x1eb)]=_0x12cff1;}_0x35a638['style']['display']=_0xbb97a7(0x182),_0x35a638[_0xbb97a7(0x120)]['visibility']='visible',_0x35a638['style']['opacity']='1',_0x35a638['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0x7b6696=document['getElementById']('test-match-winner-username');_0x7b6696&&setTimeout(()=>{_0x7b6696['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x21afda=a4_0x7e1e1f;console[_0x21afda(0x1af)]('Closing\x20create\x20test\x20match\x20modal');const _0x357c5c=document[_0x21afda(0x108)]('create-test-match-modal');if(!_0x357c5c){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x357c5c[_0x21afda(0x231)][_0x21afda(0xb9)]('active'),_0x357c5c['style']['opacity']='0',_0x357c5c['style']['visibility']='hidden',setTimeout(()=>{const _0x1ebb09=_0x21afda;!_0x357c5c['classList']['contains']('active')&&(_0x357c5c[_0x1ebb09(0x120)]['display']='none');},0x12c),console[_0x21afda(0x1af)]('Modal\x20closed');}async function createTestMatch(){const _0x1cb4ef=a4_0x7e1e1f;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x552126=auth['currentUser'];if(!_0x552126){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x3cfb4b='D1',_0x3a45ff='approvedMatches',_0x47bf68={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x1cb4ef(0x278),'winnerDemoLink':null,'loserUsername':_0x1cb4ef(0xbb),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x552126['email'],'createdAt':serverTimestamp(),'createdBy':_0x552126[_0x1cb4ef(0x170)],'isTestMatch':!![],'ladder':_0x3cfb4b,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x1cb4ef(0x1dc)+_0x552126['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x3a45ff),_0x47bf68),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x1cb4ef(0x1e7)),closeCreateTestMatchModal();}catch(_0x32e71a){console[_0x1cb4ef(0x2a0)]('Error\x20creating\x20simple\x20test\x20match:',_0x32e71a),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x32e71a['message'],_0x1cb4ef(0x2a0));}}window['testFirebaseConnection']=async function(){const _0x29bb95=a4_0x7e1e1f;try{console['log']('Testing\x20Firebase\x20connection...'),console[_0x29bb95(0x1af)]('Auth:',auth),console['log']('DB:',db),console[_0x29bb95(0x1af)]('Current\x20user:',auth['currentUser']);const _0x28a66d=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x28a66d);const _0x13115a=query(_0x28a66d,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x13115a);const _0x37915f=await getDocs(_0x13115a);console['log']('Query\x20executed.\x20Empty:',_0x37915f[_0x29bb95(0x26a)]),console['log'](_0x29bb95(0x2d3));}catch(_0x5807f1){console['error'](_0x29bb95(0x1f2),_0x5807f1);}};function setupCreateTestMatchButton(){const _0x54920f=a4_0x7e1e1f,_0x31f795=document['getElementById']('create-test-match-btn');if(!_0x31f795){console[_0x54920f(0x2a0)]('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log'](_0x54920f(0x1e9));const _0x9e73b1=_0x31f795['cloneNode'](!![]);_0x31f795['parentNode'][_0x54920f(0xa3)](_0x9e73b1,_0x31f795),_0x9e73b1['addEventListener']('click',function(_0x2f257b){const _0x43f9e3=_0x54920f;_0x2f257b[_0x43f9e3(0x1b6)](),_0x2f257b['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x315e07=0x1){const _0x412aa5=a4_0x7e1e1f,_0x53285b=document['getElementById']('matches-table-body');if(!_0x53285b)return;_0x53285b['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x3d6d3d=currentLadder['toLowerCase'](),_0x1261fd=matchesPagination[_0x3d6d3d],_0x494b9b=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x59c599=collection(db,_0x494b9b);_0x315e07<=0x1?(_0x1261fd['page']=0x1,_0x1261fd[_0x412aa5(0x2d0)]=null,_0x1261fd['lastVisible']=null):_0x1261fd['page']=_0x315e07;const _0x1a2e65=getMatchesFilters();let _0x14cc31=_0x59c599;if(_0x1a2e65[_0x412aa5(0x25d)]||_0x1a2e65[_0x412aa5(0x2c7)]||_0x1a2e65['searchTerm']){let _0x460626=[];_0x1a2e65['startDate']&&_0x1a2e65[_0x412aa5(0x2c7)]?(_0x460626['push'](where('approvedAt','>=',_0x1a2e65['startDate']),where(_0x412aa5(0x274),'<=',_0x1a2e65['endDate'])),_0x14cc31=query(_0x59c599,..._0x460626)):_0x14cc31=query(_0x59c599,orderBy('approvedAt','desc'));}else _0x14cc31=query(_0x59c599,orderBy(_0x412aa5(0x274),_0x412aa5(0xc8)));_0x315e07>0x1&&_0x1261fd['lastVisible']?_0x14cc31=query(_0x14cc31,startAfter(_0x1261fd[_0x412aa5(0x2e0)]),limit(PAGE_SIZE)):_0x14cc31=query(_0x14cc31,limit(PAGE_SIZE));const _0x4aba97=await getDocs(_0x14cc31);!_0x4aba97['empty']&&(_0x1261fd['firstVisible']=_0x4aba97['docs'][0x0],_0x1261fd[_0x412aa5(0x2e0)]=_0x4aba97[_0x412aa5(0x15c)][_0x4aba97[_0x412aa5(0x15c)]['length']-0x1]);let _0x474dc7=![];if(!_0x4aba97['empty']){const _0x27644a=query(_0x14cc31,startAfter(_0x1261fd['lastVisible']),limit(0x1)),_0x21ff64=await getDocs(_0x27644a);_0x474dc7=!_0x21ff64[_0x412aa5(0x26a)];}const _0x4f0fd6=document['getElementById'](_0x412aa5(0x16a)),_0xdc1864=document['getElementById']('matches-next-page'),_0x2387db=document[_0x412aa5(0x108)](_0x412aa5(0xb6));if(_0x4f0fd6)_0x4f0fd6['disabled']=_0x1261fd['page']<=0x1;if(_0xdc1864)_0xdc1864[_0x412aa5(0x29c)]=!_0x474dc7;if(_0x2387db)_0x2387db['textContent']='Page\x20'+_0x1261fd[_0x412aa5(0x12b)];if(_0x4aba97['empty']){_0x53285b[_0x412aa5(0x14b)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x53285b['innerHTML']='',_0x4aba97['forEach'](_0xf0fe76=>{const _0x457458=_0x412aa5,_0x147a54=_0xf0fe76['data'](),_0x5bf262=document[_0x457458(0x1d8)]('tr'),_0x410ff1=_0x147a54[_0x457458(0x274)]?new Date(_0x147a54[_0x457458(0x274)]['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x5bf262['setAttribute']('data-id',_0xf0fe76['id']),_0x5bf262['setAttribute'](_0x457458(0x1cf),currentLadder),_0x5bf262[_0x457458(0x231)]['add']('match-row'),_0x5bf262['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x410ff1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x147a54['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x147a54['loserUsername']||_0x457458(0x18f))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x147a54['winnerScore']||0x0)+'\x20-\x20'+(_0x147a54[_0x457458(0xad)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x147a54['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0xf0fe76['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0xf0fe76['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x53285b[_0x457458(0x2e8)](_0x5bf262);}),setupMatchesActionButtons(),_0x1a2e65['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x4aba97['size']+_0x412aa5(0x1f5)+currentLadder+'\x20ladder,\x20page\x20'+_0x1261fd['page']);}catch(_0x1899ce){console['error']('Error\x20loading\x20matches:',_0x1899ce),_0x53285b['innerHTML']=_0x412aa5(0x292)+_0x1899ce[_0x412aa5(0x2aa)]+_0x412aa5(0x17f);}}async function deleteMatch(_0x5ec71c,_0x51e1fb){const _0x5f0f29=a4_0x7e1e1f;try{console['log'](_0x5f0f29(0xeb)+_0x5ec71c+'\x20from\x20'+_0x51e1fb+'\x20ladder');const _0x352eee=auth['currentUser'];if(!_0x352eee){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x5f0f29(0x2a0));return;}const _0x3c45ea=_0x51e1fb==='D1'?'approvedMatches':_0x51e1fb==='D2'?'approvedMatchesD2':_0x5f0f29(0xd3);console['log'](_0x5f0f29(0xdd)+_0x3c45ea),showNotification('Deleting\x20match...',_0x5f0f29(0x263)),await deleteDoc(doc(db,_0x3c45ea,_0x5ec71c)),console['log'](_0x5f0f29(0x29d)),showNotification(_0x5f0f29(0x29d),'success');const _0x156441=_0x51e1fb[_0x5f0f29(0x25f)]();loadMatchesData(matchesPagination[_0x156441]['page']);}catch(_0x2d56ef){console['error']('Error\x20deleting\x20match:',_0x2d56ef),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x2d56ef['message'],'error');}}function setupMatchesActionButtons(){const _0x5d6713=a4_0x7e1e1f;console[_0x5d6713(0x1af)](_0x5d6713(0xd2)),document[_0x5d6713(0x1b4)](_0x5d6713(0x1f0))['forEach'](_0x59a625=>{_0x59a625['addEventListener']('click',_0x57b077=>{const _0x40600d=a4_0x113d;_0x57b077[_0x40600d(0x1b6)](),_0x57b077['stopPropagation']();const _0x1783a0=_0x57b077[_0x40600d(0xee)]['dataset']['id'],_0x47490b=_0x57b077[_0x40600d(0xee)]['closest']('tr'),_0x1e97fd=_0x47490b['dataset']['ladder'];console['log'](_0x40600d(0x260),_0x1783a0,_0x1e97fd),openEditMatchModal(_0x1783a0,_0x1e97fd);});}),document[_0x5d6713(0x1b4)]('.delete-match-btn')[_0x5d6713(0x28b)](_0x310071=>{const _0x5e0834=_0x5d6713;_0x310071['addEventListener'](_0x5e0834(0x279),_0x86a705=>{const _0x47e1ec=_0x5e0834;_0x86a705[_0x47e1ec(0x1b6)](),_0x86a705[_0x47e1ec(0x28d)]();const _0x5b6f4c=_0x86a705[_0x47e1ec(0xee)]['dataset']['id'],_0x15b320=_0x86a705['currentTarget'][_0x47e1ec(0x268)]('tr'),_0x8f5c0e=_0x15b320[_0x47e1ec(0x21a)]['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x5b6f4c,_0x8f5c0e),confirm(_0x47e1ec(0x2bf))&&deleteMatch(_0x5b6f4c,_0x8f5c0e);});}),console['log'](_0x5d6713(0x1c2));}function filterMatchesTable(){const _0x4eb932=a4_0x7e1e1f,_0x30cf30=document['getElementById'](_0x4eb932(0x2ed))['value']['toLowerCase'](),_0x4ac0c4=document['querySelectorAll']('#matches-table-body\x20tr');let _0x3ee0a7=0x0;_0x4ac0c4['forEach'](_0x216758=>{const _0x5c1ff3=_0x4eb932;if(_0x216758['classList'][_0x5c1ff3(0x130)]('loading-cell')||_0x216758['classList']['contains'](_0x5c1ff3(0xe7))||_0x216758[_0x5c1ff3(0x231)][_0x5c1ff3(0x130)]('error-state'))return;const _0x3e6bce=_0x216758['cells'][0x1][_0x5c1ff3(0x10a)]['toLowerCase'](),_0x2f54f2=_0x216758['cells'][0x2][_0x5c1ff3(0x10a)][_0x5c1ff3(0x25f)](),_0x2a5a18=_0x216758['cells'][0x4]['textContent'][_0x5c1ff3(0x25f)]();_0x3e6bce['includes'](_0x30cf30)||_0x2f54f2['includes'](_0x30cf30)||_0x2a5a18['includes'](_0x30cf30)?(_0x216758['style']['display']='',_0x3ee0a7++):_0x216758['style']['display']='none';});if(_0x3ee0a7===0x0&&_0x4ac0c4['length']>0x0){const _0x18e975=document['getElementById']('matches-table-body'),_0x583174=_0x18e975[_0x4eb932(0x104)]('.no-results');if(!_0x583174){const _0x94502=document['createElement']('tr');_0x94502['className']='no-results',_0x94502['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x30cf30+'\x27</td>',_0x18e975[_0x4eb932(0x2e8)](_0x94502);}}else{const _0x21c14f=document['querySelector']('.no-results');_0x21c14f&&_0x21c14f[_0x4eb932(0xb9)]();}}function getMatchesFilters(){const _0x34d092=a4_0x7e1e1f,_0xfad955=document['getElementById']('matches-search')[_0x34d092(0x1eb)]['toLowerCase'](),_0x59a9cd=document['getElementById'](_0x34d092(0x1e2))['value'],_0x183317=document[_0x34d092(0x108)]('matches-end-date')['value'];let _0x2375c6=null,_0x4e709f=null;return _0x59a9cd&&(_0x2375c6=new Date(_0x59a9cd),_0x2375c6['setHours'](0x0,0x0,0x0,0x0),_0x2375c6=Timestamp['fromDate'](_0x2375c6)),_0x183317&&(_0x4e709f=new Date(_0x183317),_0x4e709f['setHours'](0x17,0x3b,0x3b,0x3e7),_0x4e709f=Timestamp[_0x34d092(0x28c)](_0x4e709f)),{'searchTerm':_0xfad955,'startDate':_0x2375c6,'endDate':_0x4e709f};}async function applyMatchesFilters(){const _0xb4d8d7=currentLadder['toLowerCase']();matchesPagination[_0xb4d8d7]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x235a03=a4_0x7e1e1f;document['getElementById']('matches-start-date')[_0x235a03(0x1eb)]='',document[_0x235a03(0x108)]('matches-end-date')['value']='',document[_0x235a03(0x108)]('matches-search')[_0x235a03(0x1eb)]='';const _0x41d081=currentLadder[_0x235a03(0x25f)]();matchesPagination[_0x41d081]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x275539,_0x8b128a){const _0x3e5473=a4_0x7e1e1f,_0x8cb2df=document[_0x3e5473(0x108)]('edit-match-modal');if(!_0x8cb2df)return;try{const _0x2eb30b=_0x8b128a==='D1'?'approvedMatches':_0x8b128a==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x25b147=doc(db,_0x2eb30b,_0x275539),_0x3e9c26=await getDoc(_0x25b147);if(!_0x3e9c26['exists']()){showNotification('Match\x20not\x20found',_0x3e5473(0x2a0));return;}const _0x104cf1=_0x3e9c26['data']();document['getElementById']('edit-match-id')['value']=_0x275539,document['getElementById'](_0x3e5473(0x2c9))[_0x3e5473(0x1eb)]=_0x8b128a,document['getElementById'](_0x3e5473(0x297))[_0x3e5473(0x1eb)]=_0x104cf1['winnerUsername']||'',document['getElementById']('edit-match-winner-score')['value']=_0x104cf1[_0x3e5473(0x24c)]||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x104cf1[_0x3e5473(0x141)]||0x0,document['getElementById'](_0x3e5473(0x2e6))['value']=_0x104cf1[_0x3e5473(0x1c8)]||'',document['getElementById'](_0x3e5473(0x173))[_0x3e5473(0x1eb)]=_0x104cf1['loserUsername']||'',document[_0x3e5473(0x108)]('edit-match-loser-score')[_0x3e5473(0x1eb)]=_0x104cf1[_0x3e5473(0xad)]||0x0,document['getElementById']('edit-match-loser-suicides')[_0x3e5473(0x1eb)]=_0x104cf1[_0x3e5473(0xe0)]||0x0,document['getElementById']('edit-match-loser-comment')[_0x3e5473(0x1eb)]=_0x104cf1['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x104cf1['mapPlayed']||'',document[_0x3e5473(0x108)](_0x3e5473(0xfd))[_0x3e5473(0x1eb)]=_0x104cf1['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')[_0x3e5473(0x1eb)]=_0x104cf1['loserDemoLink']||_0x104cf1['demoLink']||'',document[_0x3e5473(0x108)]('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x104cf1['winnerUsername']+'\x20vs\x20'+_0x104cf1['loserUsername'],_0x8cb2df['classList']['add']('active');}catch(_0x315f43){console['error'](_0x3e5473(0xb1),_0x315f43),showNotification(_0x3e5473(0x166),'error');}}function closeEditMatchModal(){const _0xddfc03=a4_0x7e1e1f,_0x6c3389=document[_0xddfc03(0x108)]('edit-match-modal');_0x6c3389&&_0x6c3389[_0xddfc03(0x231)]['remove']('active');}async function saveEditedMatch(){const _0x4616fe=a4_0x7e1e1f;try{const _0x57e49f=document[_0x4616fe(0x108)]('edit-match-id')['value'],_0x3ae567=document['getElementById'](_0x4616fe(0x2c9))[_0x4616fe(0x1eb)];if(!_0x57e49f||!_0x3ae567){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x4616fe(0x2a0));return;}const _0x4c8860=_0x3ae567==='D1'?'approvedMatches':_0x3ae567==='D2'?'approvedMatchesD2':_0x4616fe(0xd3),_0x542875=document[_0x4616fe(0x108)]('edit-match-winner')[_0x4616fe(0x1eb)]['trim'](),_0x472d23=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x2e949c=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x5addbe=document['getElementById']('edit-match-winner-comment')[_0x4616fe(0x1eb)][_0x4616fe(0x238)](),_0xe67aa9=document['getElementById']('edit-match-loser')[_0x4616fe(0x1eb)][_0x4616fe(0x238)](),_0x15da13=parseInt(document['getElementById']('edit-match-loser-score')[_0x4616fe(0x1eb)]),_0x355226=parseInt(document[_0x4616fe(0x108)]('edit-match-loser-suicides')['value']),_0x1f0297=document['getElementById']('edit-match-loser-comment')['value'][_0x4616fe(0x238)](),_0x280b89=document[_0x4616fe(0x108)]('edit-match-map')['value']['trim'](),_0x547801=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x3497ef=document['getElementById']('edit-match-loser-demo')[_0x4616fe(0x1eb)]['trim']();if(!_0x542875||!_0xe67aa9){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required',_0x4616fe(0x2a0));return;}await updateDoc(doc(db,_0x4c8860,_0x57e49f),{'winnerUsername':_0x542875,'winnerScore':_0x472d23,'winnerSuicides':_0x2e949c,'winnerComment':_0x5addbe,'loserUsername':_0xe67aa9,'loserScore':_0x15da13,'loserSuicides':_0x355226,'loserComment':_0x1f0297,'mapPlayed':_0x280b89,'winnerDemoLink':_0x547801||null,'loserDemoLink':_0x3497ef||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x3ae567['toLowerCase']()]['page']);}catch(_0x5cf170){console['error']('Error\x20saving\x20match:',_0x5cf170),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x5cf170['message'],'error');}}async function openDeleteMatchModal(_0x1d1753,_0x57d896){const _0x40361b=a4_0x7e1e1f;try{const _0x10195a=_0x57d896==='D1'?'approvedMatches':_0x57d896==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x215ac7=doc(db,_0x10195a,_0x1d1753),_0x10fea3=await getDoc(_0x215ac7);if(!_0x10fea3['exists']()){showNotification('Match\x20not\x20found',_0x40361b(0x2a0));return;}const _0x175220=_0x10fea3[_0x40361b(0x147)](),_0x329a08=document['getElementById']('delete-match-confirm-modal');_0x329a08['dataset']['matchId']=_0x1d1753,_0x329a08['dataset']['ladder']=_0x57d896;const _0x351d02=_0x175220['approvedAt']?new Date(_0x175220['approvedAt']['seconds']*0x3e8)[_0x40361b(0x187)]():'N/A',_0xeeee69=document['getElementById']('delete-match-summary');_0xeeee69['innerHTML']=_0x40361b(0x2d5)+_0x351d02+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x175220[_0x40361b(0x253)]+_0x40361b(0x1b5)+_0x175220['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x175220[_0x40361b(0x24c)]||0x0)+'\x20-\x20'+(_0x175220['loserScore']||0x0)+_0x40361b(0xae)+(_0x175220[_0x40361b(0x2e2)]||_0x40361b(0x2ce))+_0x40361b(0x2a5)+_0x57d896+_0x40361b(0xb0),_0x329a08[_0x40361b(0x231)]['add'](_0x40361b(0x13e));}catch(_0x2d2425){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x2d2425),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function a4_0x113d(_0x2d9bc7,_0x1bf91d){const _0x253150=a4_0x1f52();return a4_0x113d=function(_0x496f83,_0x2980df){_0x496f83=_0x496f83-0xa3;let _0x1f52cb=_0x253150[_0x496f83];return _0x1f52cb;},a4_0x113d(_0x2d9bc7,_0x1bf91d);}function closeDeleteMatchModal(){const _0x1a8be9=a4_0x7e1e1f,_0x4faefc=document['getElementById']('delete-match-confirm-modal');_0x4faefc&&(_0x4faefc[_0x1a8be9(0x231)]['remove'](_0x1a8be9(0x13e)),_0x4faefc['removeAttribute'](_0x1a8be9(0x27a)),_0x4faefc['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x34df43=a4_0x7e1e1f,_0x29bb0b=document[_0x34df43(0x108)]('delete-match-confirm-modal'),_0x5d1f17=_0x29bb0b['dataset']['matchId'],_0x49e972=_0x29bb0b['dataset']['ladder'];if(!_0x5d1f17||!_0x49e972){showNotification(_0x34df43(0xed),'error'),closeDeleteMatchModal();return;}try{const _0xfd6d60=_0x49e972==='D1'?_0x34df43(0x2b0):_0x49e972==='D2'?_0x34df43(0x118):'approvedMatchesD3';await deleteDoc(doc(db,_0xfd6d60,_0x5d1f17)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x49e972[_0x34df43(0x25f)]()]['page']);}catch(_0x20ee4c){console['error']('Error\x20deleting\x20match:',_0x20ee4c),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x20ee4c['message'],_0x34df43(0x2a0));}}async function saveHighlightChanges(){const _0x577ba1=a4_0x7e1e1f,_0x23073f=document['getElementById']('edit-highlight-id')['value'],_0x19a5f2=document[_0x577ba1(0x108)](_0x577ba1(0x12f))['value'];let _0x1cfbb1={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x19a5f2,'description':document['getElementById']('edit-highlight-description-input')['value']['trim'](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value'][_0x577ba1(0x238)](),'submittedBy':auth['currentUser']['email']};if(_0x19a5f2===_0x577ba1(0x284)){_0x1cfbb1[_0x577ba1(0xe6)]=document['getElementById']('edit-highlight-matchInfo-input')[_0x577ba1(0x1eb)]['trim'](),_0x1cfbb1[_0x577ba1(0x13b)]=document['getElementById']('edit-highlight-map-input')[_0x577ba1(0x1eb)][_0x577ba1(0x238)]();const _0x4b0d14=document['getElementById']('edit-highlight-matchDate-input')[_0x577ba1(0x1eb)];_0x1cfbb1['matchDate']=_0x4b0d14?Timestamp['fromDate'](new Date(_0x4b0d14)):null,_0x1cfbb1['winnerName']=document[_0x577ba1(0x108)]('edit-highlight-winnerName-input')[_0x577ba1(0x1eb)]['trim'](),_0x1cfbb1['winnerScore']=document['getElementById'](_0x577ba1(0x286))['value']['trim'](),_0x1cfbb1['loserName']=document['getElementById']('edit-highlight-loserName-input')[_0x577ba1(0x1eb)][_0x577ba1(0x238)](),_0x1cfbb1['loserScore']=document['getElementById'](_0x577ba1(0x102))[_0x577ba1(0x1eb)]['trim'](),_0x1cfbb1[_0x577ba1(0x1a8)]=document[_0x577ba1(0x108)]('edit-highlight-matchLink-input')['value']['trim'](),_0x1cfbb1['mapCreator']=null,_0x1cfbb1[_0x577ba1(0x23b)]=null,_0x1cfbb1['creatorImageUrl']=null,_0x1cfbb1['achievementPlayer']=null,_0x1cfbb1['achievementType']=null,_0x1cfbb1['achievementDetails']=null,_0x1cfbb1['playerProfileUrl']=null;}else{if(_0x19a5f2==='creator')_0x1cfbb1['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x1cfbb1['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value']['trim'](),_0x1cfbb1['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')[_0x577ba1(0x1eb)][_0x577ba1(0x238)](),_0x1cfbb1['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value'][_0x577ba1(0x238)](),_0x1cfbb1[_0x577ba1(0xe6)]=null,_0x1cfbb1[_0x577ba1(0x208)]=null,_0x1cfbb1[_0x577ba1(0x1fc)]=null,_0x1cfbb1['winnerScore']=null,_0x1cfbb1['loserName']=null,_0x1cfbb1['loserScore']=null,_0x1cfbb1[_0x577ba1(0x1a8)]=null,_0x1cfbb1['achievementPlayer']=null,_0x1cfbb1['achievementType']=null,_0x1cfbb1['achievementDetails']=null,_0x1cfbb1['playerProfileUrl']=null;else _0x19a5f2==='achievement'&&(_0x1cfbb1['achievementPlayer']=document['getElementById'](_0x577ba1(0x20e))['value']['trim'](),_0x1cfbb1['achievementType']=document[_0x577ba1(0x108)]('edit-highlight-achievementType-input')['value']['trim'](),_0x1cfbb1['achievementDetails']=document['getElementById'](_0x577ba1(0x100))['value'][_0x577ba1(0x238)](),_0x1cfbb1['playerProfileUrl']=document['getElementById'](_0x577ba1(0xb8))[_0x577ba1(0x1eb)]['trim'](),_0x1cfbb1['matchInfo']=null,_0x1cfbb1[_0x577ba1(0x13b)]=null,_0x1cfbb1['matchDate']=null,_0x1cfbb1['winnerName']=null,_0x1cfbb1['winnerScore']=null,_0x1cfbb1['loserName']=null,_0x1cfbb1['loserScore']=null,_0x1cfbb1['matchLink']=null,_0x1cfbb1['mapCreator']=null,_0x1cfbb1[_0x577ba1(0x23b)]=null,_0x1cfbb1['creatorImageUrl']=null);}try{if(_0x23073f){_0x1cfbb1['updatedAt']=serverTimestamp();const _0x19dc33=doc(db,_0x577ba1(0x262),_0x23073f);await updateDoc(_0x19dc33,_0x1cfbb1),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x1cfbb1['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x1cfbb1),showNotification(_0x577ba1(0x25c),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x3baebd){console['error']('Error\x20saving\x20highlight:',_0x3baebd),showNotification('Error\x20saving\x20highlight:\x20'+_0x3baebd['message'],_0x577ba1(0x2a0));}}async function resimulateMatch(){const _0x1a86f1=a4_0x7e1e1f;try{const _0x3332fd=document['getElementById']('resimulate-match-id')[_0x1a86f1(0x1eb)];if(!_0x3332fd){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0xe3a77a=auth['currentUser'];if(!_0xe3a77a){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0xc2f05c=currentLadder==='D1'?_0x1a86f1(0x2b0):currentLadder==='D2'?_0x1a86f1(0x118):'approvedMatchesD3',_0x4bf2d7=doc(db,_0xc2f05c,_0x3332fd),_0x3167cd=await getDoc(_0x4bf2d7);if(!_0x3167cd['exists']()){showNotification(_0x1a86f1(0x154),'error');return;}const _0x1370be=_0x3167cd['data'](),_0x481f9a=_0x1370be['approvedAt']?_0x1370be[_0x1a86f1(0x274)]['toDate']()['toLocaleString']():_0x1370be['matchDate']?_0x1370be['matchDate']['toDate']?_0x1370be['matchDate']['toDate']()[_0x1a86f1(0x288)]():new Date(_0x1370be[_0x1a86f1(0x208)])['toLocaleString']():'Unknown',_0x2011e8='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x1370be['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x1370be[_0x1a86f1(0xe5)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x1370be['winnerScore']+'-'+_0x1370be[_0x1a86f1(0xad)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x1370be['mapPlayed']||_0x1370be['mapName']||_0x1a86f1(0x18f))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x481f9a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x3332fd+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x2011e8,document[_0x1a86f1(0x108)](_0x1a86f1(0xa9))['style']['display']='block',document['getElementById']('confirm-resimulate-btn')[_0x1a86f1(0x120)]['display']='block',window[_0x1a86f1(0x2d7)]={'matchId':_0x3332fd,'matchData':_0x1370be,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0x1a86f1(0x263));}catch(_0x2dc8c6){console[_0x1a86f1(0x2a0)]('Error\x20finding\x20match:',_0x2dc8c6),showNotification(_0x1a86f1(0xba)+_0x2dc8c6['message'],_0x1a86f1(0x2a0));}}async function confirmResimulateMatch(){const _0x558230=a4_0x7e1e1f;try{const {matchId:_0x36cd3e,matchData:_0x1e063c,ladder:_0x2405a5}=window['pendingResimulateData'];if(!_0x36cd3e||!_0x1e063c){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x50d884=_0x2405a5==='D1'?'players':_0x2405a5==='D2'?_0x558230(0x255):_0x558230(0x259),_0x48fdf7=_0x2405a5==='D1'?'eloHistory':_0x2405a5==='D2'?_0x558230(0xea):'eloHistoryD3',[_0xf78463,_0x45b187]=await Promise[_0x558230(0xac)]([getDocs(query(collection(db,_0x50d884),where(_0x558230(0x26f),'==',_0x1e063c[_0x558230(0x253)]))),getDocs(query(collection(db,_0x50d884),where('username','==',_0x1e063c[_0x558230(0xe5)])))]);if(_0xf78463[_0x558230(0x26a)]||_0x45b187['empty']){showNotification(_0x558230(0x1a1),_0x558230(0x2a0));return;}const _0x43b02d=_0xf78463[_0x558230(0x15c)][0x0]['id'],_0x37f3a4=_0x45b187[_0x558230(0x15c)][0x0]['id'],_0x56d487=_0xf78463[_0x558230(0x15c)][0x0]['data'](),_0x5dcb43=_0x45b187['docs'][0x0]['data'](),[_0x17aa7e,_0x46c796]=await Promise[_0x558230(0xac)]([getDocs(query(collection(db,_0x48fdf7),where('playerId','==',_0x43b02d),where('matchId','==',_0x36cd3e))),getDocs(query(collection(db,_0x48fdf7),where('playerId','==',_0x37f3a4),where('matchId','==',_0x36cd3e)))]),_0x2b4021=!_0x17aa7e[_0x558230(0x26a)],_0x435af0=!_0x46c796[_0x558230(0x26a)],_0x578b8b='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x2b4021?_0x558230(0xb7):'\x20Missing')+_0x558230(0x221)+(_0x435af0?'\x20Exists':'\x20Missing')+_0x558230(0xd7)+(_0x56d487[_0x558230(0x271)]||'Unknown')+_0x558230(0x1db)+(_0x5dcb43['eloRating']||_0x558230(0x18f))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x56d487[_0x558230(0x101)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20'+(_0x5dcb43[_0x558230(0x101)]||'Unknown')+_0x558230(0x2ad);document['getElementById'](_0x558230(0x10e))['innerHTML']=_0x578b8b,document['getElementById']('validation-results-container')['style']['display']='block';if(_0x2b4021&&_0x435af0){showNotification(_0x558230(0x1bf),_0x558230(0x1a5));return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x38266b=_0x1e063c['approvedAt']||_0x1e063c['matchDate']||serverTimestamp(),[_0x42bf5a,_0x382fa0]=await Promise[_0x558230(0xac)]([getPlayerEloAtTime(_0x43b02d,_0x38266b,_0x48fdf7),getPlayerEloAtTime(_0x37f3a4,_0x38266b,_0x48fdf7)]),{calculateElo:_0x3fd682}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x1f9092,newLoserRating:_0x6e65b9}=_0x3fd682(_0x42bf5a,_0x382fa0),_0x18fe07=_0x56d487['position']||Number['MAX_SAFE_INTEGER'],_0x43e651=_0x5dcb43['position']||Number['MAX_SAFE_INTEGER'];let _0x1c6df0=_0x18fe07,_0x109cd9=_0x43e651;_0x18fe07>_0x43e651&&(_0x1c6df0=_0x43e651,_0x109cd9=_0x43e651+0x1);const _0x30405f=writeBatch(db),_0x35312f=doc(db,_0x50d884,_0x43b02d);_0x30405f['update'](_0x35312f,{'eloRating':_0x1f9092,'position':_0x1c6df0,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x21974c=doc(db,_0x50d884,_0x37f3a4);_0x30405f[_0x558230(0x2a7)](_0x21974c,{'eloRating':_0x6e65b9,'position':_0x109cd9,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x18fe07>_0x43e651){const _0x281f13=await getDocs(query(collection(db,_0x50d884),where('position','>',_0x43e651),where(_0x558230(0x101),'<',_0x18fe07)));_0x281f13['forEach'](_0x12412b=>{const _0x3d32a7=_0x558230,_0x1f7448=doc(db,_0x50d884,_0x12412b['id']),_0x18ebbe=_0x12412b[_0x3d32a7(0x147)]()[_0x3d32a7(0x101)];_0x30405f[_0x3d32a7(0x2a7)](_0x1f7448,{'position':_0x18ebbe+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x2b4021){const _0x2c5b61=doc(collection(db,_0x48fdf7));_0x30405f['set'](_0x2c5b61,{'playerId':_0x43b02d,'player':_0x1e063c['winnerUsername'],'previousElo':_0x42bf5a,'newElo':_0x1f9092,'eloChange':_0x1f9092-_0x42bf5a,'opponentId':_0x37f3a4,'opponent':_0x1e063c[_0x558230(0xe5)],'matchResult':'win','previousPosition':_0x18fe07,'newPosition':_0x1c6df0,'positionChange':_0x1c6df0-_0x18fe07,'matchId':_0x36cd3e,'timestamp':_0x38266b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x2405a5,'matchScore':_0x1e063c['winnerScore']+'-'+_0x1e063c['loserScore'],'mapPlayed':_0x1e063c['mapPlayed']||_0x1e063c['mapName']||_0x558230(0x18f),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x435af0){const _0x599a79=doc(collection(db,_0x48fdf7));_0x30405f[_0x558230(0x2de)](_0x599a79,{'playerId':_0x37f3a4,'player':_0x1e063c['loserUsername'],'previousElo':_0x382fa0,'newElo':_0x6e65b9,'eloChange':_0x6e65b9-_0x382fa0,'opponentId':_0x43b02d,'opponent':_0x1e063c[_0x558230(0x253)],'matchResult':'loss','previousPosition':_0x43e651,'newPosition':_0x109cd9,'positionChange':_0x109cd9-_0x43e651,'matchId':_0x36cd3e,'timestamp':_0x38266b,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x2405a5,'matchScore':_0x1e063c['winnerScore']+'-'+_0x1e063c['loserScore'],'mapPlayed':_0x1e063c['mapPlayed']||_0x1e063c['mapName']||'Unknown','note':_0x558230(0x111)});}const _0x4b3c11=_0x2405a5==='D1'?'approvedMatches':_0x2405a5==='D2'?_0x558230(0x118):_0x558230(0xd3),_0x29b13c=doc(db,_0x4b3c11,_0x36cd3e);_0x30405f['update'](_0x29b13c,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x558230(0x19c)][_0x558230(0x122)],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x56d487['eloRating'],'originalLoserElo':_0x5dcb43['eloRating'],'originalWinnerPosition':_0x18fe07,'originalLoserPosition':_0x43e651,'resimulatedWinnerElo':_0x1f9092,'resimulatedLoserElo':_0x6e65b9,'resimulatedWinnerPosition':_0x1c6df0,'resimulatedLoserPosition':_0x109cd9}),await _0x30405f[_0x558230(0x14a)]();const _0x3d7eb0=(!_0x2b4021?0x1:0x0)+(!_0x435af0?0x1:0x0),_0x30b8d6=_0x18fe07!==_0x1c6df0||_0x43e651!==_0x109cd9;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0x558230(0x258)+_0x3d7eb0+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x42bf5a+''+_0x1f9092+'\x20(+'+(_0x1f9092-_0x42bf5a)+'),\x20')+('Loser\x20'+_0x382fa0+''+_0x6e65b9+'\x20('+(_0x6e65b9-_0x382fa0)+_0x558230(0x13c))+(''+(_0x30b8d6?'Positions\x20updated:\x20Winner\x20'+_0x18fe07+''+_0x1c6df0+',\x20Loser\x20'+_0x43e651+''+_0x109cd9:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0xde8598){console['error'](_0x558230(0x186),_0xde8598),showNotification(_0x558230(0x16f)+_0xde8598[_0x558230(0x2aa)],'error');}}async function getPlayerEloAtTime(_0x361fb2,_0x195042,_0x16c220){const _0xdf140a=a4_0x7e1e1f;try{const _0x52d520=_0x195042['toDate']?_0x195042[_0xdf140a(0x1d7)]():new Date(_0x195042),_0x1ac345=query(collection(db,_0x16c220),where('playerId','==',_0x361fb2),where(_0xdf140a(0x113),'<',_0x195042),orderBy('timestamp',_0xdf140a(0xc8)),limit(0x1)),_0x2082cb=await getDocs(_0x1ac345);if(!_0x2082cb['empty']){const _0x31677a=_0x2082cb['docs'][0x0]['data']();return console[_0xdf140a(0x1af)](_0xdf140a(0xe9)+_0x361fb2+_0xdf140a(0x204)+_0x31677a['newElo']),_0x31677a['newElo'];}else return console['log'](_0xdf140a(0x233)+_0x361fb2+_0xdf140a(0x1ec)),0x4b0;}catch(_0x10512d){return console[_0xdf140a(0x2a0)](_0xdf140a(0x1a6)+_0x361fb2+':',_0x10512d),0x4b0;}}function openResimulateModal(){const _0xbf9bc8=a4_0x7e1e1f;console[_0xbf9bc8(0x1af)](_0xbf9bc8(0x285));const _0x3521fa=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x3521fa);if(!_0x3521fa){console['error']('Modal\x20element\x20not\x20found!');return;}_0x3521fa['style']['display']='block',_0x3521fa['style']['visibility']='visible',_0x3521fa[_0xbf9bc8(0x120)][_0xbf9bc8(0x2b5)]='1',_0x3521fa['classList']['add'](_0xbf9bc8(0x13e)),console['log'](_0xbf9bc8(0x2d2)),console[_0xbf9bc8(0x1af)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x3521fa)[_0xbf9bc8(0x224)]);const _0x51df7f=document[_0xbf9bc8(0x108)]('match-details-container'),_0x29e016=document['getElementById']('validation-results-container'),_0x1fdca7=document['getElementById']('confirm-resimulate-btn'),_0x565d64=document[_0xbf9bc8(0x108)](_0xbf9bc8(0x155));if(_0x51df7f)_0x51df7f['innerHTML']='';if(_0x29e016)_0x29e016['innerHTML']='';if(_0x1fdca7)_0x1fdca7['style'][_0xbf9bc8(0x224)]=_0xbf9bc8(0x234);if(_0x565d64)_0x565d64['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x28472b=a4_0x7e1e1f;document['getElementById']('resimulate-modal')[_0x28472b(0x120)][_0x28472b(0x224)]=_0x28472b(0x234),window[_0x28472b(0x2d7)]=null;}window['resimulateMatch']=resimulateMatch,window[a4_0x7e1e1f(0x163)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x2a8023=a4_0x7e1e1f;console[_0x2a8023(0x1af)]('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x26620d){console[_0x2a8023(0x2a0)]('Error\x20loading\x20points\x20data:',_0x26620d),showNotification(_0x2a8023(0xab)+_0x26620d['message'],'error');}}function renderPointsOverview(_0x2a8143){const _0x19cb44=a4_0x7e1e1f,_0x205c98=document['getElementById'](_0x19cb44(0x17e));if(!_0x205c98)return;if(_0x2a8143['length']===0x0){_0x205c98['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x205c98[_0x19cb44(0x14b)]='',_0x2a8143['forEach'](_0x5eee06=>{const _0xea47cf=_0x19cb44,_0x33ff59=document[_0xea47cf(0x1d8)]('tr'),_0x2f0507=_0x5eee06[_0xea47cf(0x20a)]||_0x5eee06['username']||_0xea47cf(0x1dd),_0x537193=_0x5eee06['email']||'No\x20email',_0x3ad5df=_0x5eee06['points']||0x0,_0x15627c=_0x5eee06['lastPointsModified']?new Date(_0x5eee06[_0xea47cf(0x125)]['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x33ff59['innerHTML']=_0xea47cf(0x142)+_0x2f0507+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x537193+_0xea47cf(0x1e5)+(_0x3ad5df>0x3e8?'high-points':_0x3ad5df>0x1f4?_0xea47cf(0x290):'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x3ad5df[_0xea47cf(0x288)]()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x15627c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x5eee06['id']+_0xea47cf(0x183)+_0x5eee06['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x205c98['appendChild'](_0x33ff59);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0xe800dd=a4_0x7e1e1f;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x2b8b7d=document['querySelectorAll']('.quick-edit-btn');console[_0xe800dd(0x1af)](_0xe800dd(0x26d)+_0x2b8b7d['length']+'\x20quick\x20edit\x20buttons'),_0x2b8b7d[_0xe800dd(0x28b)](_0x3065f8=>{const _0x56de4a=_0xe800dd,_0x50b606=_0x3065f8['cloneNode'](!![]);_0x3065f8['parentNode'][_0x56de4a(0xa3)](_0x50b606,_0x3065f8);});const _0x553534=document['querySelectorAll']('.view-history-btn');console[_0xe800dd(0x1af)]('Found\x20'+_0x553534['length']+_0xe800dd(0x23d)),_0x553534['forEach'](_0x55d2ec=>{const _0x1f4100=_0x55d2ec['cloneNode'](!![]);_0x55d2ec['parentNode']['replaceChild'](_0x1f4100,_0x55d2ec);}),document[_0xe800dd(0x1b4)]('.quick-edit-btn')['forEach'](_0x2580b9=>{const _0x29665c=_0xe800dd;_0x2580b9['addEventListener'](_0x29665c(0x279),function(_0x47e36e){const _0x264ca7=_0x29665c;_0x47e36e['preventDefault'](),_0x47e36e['stopPropagation']();const _0x2dc45c=this['dataset']['userId'];console[_0x264ca7(0x1af)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x2dc45c);if(!_0x2dc45c){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x2dc45c);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x1e9a37=>{_0x1e9a37['addEventListener']('click',function(_0x164943){const _0x3be18e=a4_0x113d;_0x164943[_0x3be18e(0x1b6)](),_0x164943['stopPropagation']();const _0x5849aa=this['dataset'][_0x3be18e(0x2bb)];console[_0x3be18e(0x1af)]('View\x20history\x20clicked\x20for\x20user:',_0x5849aa);if(!_0x5849aa){console['error'](_0x3be18e(0x273));return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x5849aa);});}),console['log'](_0xe800dd(0xe4));}async function openQuickEditModal(_0x27bd0d){const _0x5a349e=a4_0x7e1e1f;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x27bd0d);const _0x11e0db=document['getElementById'](_0x5a349e(0xf9));if(!_0x11e0db){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...',_0x5a349e(0x263));const _0x4a34a9=doc(db,'userProfiles',_0x27bd0d),_0x11b136=await getDoc(_0x4a34a9);if(!_0x11b136['exists']()){showNotification(_0x5a349e(0x222),'error');return;}const _0x4b97b4=_0x11b136['data']();console[_0x5a349e(0x1af)](_0x5a349e(0x196),_0x4b97b4);const _0x4a9dc2=document['getElementById']('quick-edit-user-id'),_0x4db595=document['getElementById'](_0x5a349e(0x246)),_0x51876a=document[_0x5a349e(0x108)](_0x5a349e(0x211)),_0x166313=document['getElementById'](_0x5a349e(0x2d9)),_0x4be05c=document[_0x5a349e(0x108)]('quick-edit-points-form');if(!_0x4a9dc2||!_0x4db595||!_0x51876a||!_0x166313||!_0x4be05c){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x4a9dc2['value']=_0x27bd0d,_0x4db595['textContent']=_0x4b97b4['displayName']||_0x4b97b4['username']||'Unknown\x20User',_0x51876a['textContent']=_0x4b97b4[_0x5a349e(0x170)]||'No\x20email',_0x166313['textContent']=(_0x4b97b4['points']||0x0)['toLocaleString'](),_0x4be05c[_0x5a349e(0x18e)]();const _0x56fabb=document['getElementById']('quick-add');_0x56fabb&&(_0x56fabb[_0x5a349e(0x243)]=!![]);_0x11e0db['classList']['add']('active'),console[_0x5a349e(0x1af)]('Modal\x20opened\x20successfully');const _0x47a50e=document['getElementById']('quick-points-amount');_0x47a50e&&setTimeout(()=>_0x47a50e[_0x5a349e(0xf7)](),0x64);}catch(_0x6b0b6e){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x6b0b6e),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x6b0b6e['message'],'error');}}function closeQuickEditModal(){const _0x4b2243=a4_0x7e1e1f,_0x2588fa=document[_0x4b2243(0x108)]('quick-edit-points-modal');_0x2588fa&&_0x2588fa[_0x4b2243(0x231)][_0x4b2243(0xb9)]('active');}async function handleQuickEditPoints(_0x3a13d0){const _0x42623f=a4_0x7e1e1f;_0x3a13d0['preventDefault']();const _0x4b2f94=document['getElementById'](_0x42623f(0x22c))['value'],_0x5f046d=document[_0x42623f(0x104)](_0x42623f(0x2ab))['value'],_0x247482=parseInt(document['getElementById']('quick-points-amount')['value']),_0x13d150=document[_0x42623f(0x108)]('quick-points-reason')['value']['trim']();console[_0x42623f(0x1af)]('Processing\x20points\x20edit:',{'userId':_0x4b2f94,'action':_0x5f046d,'amount':_0x247482,'reason':_0x13d150});if(!_0x4b2f94||!_0x247482||_0x247482<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x4b2f94,_0x5f046d,_0x247482,_0x13d150),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log'](_0x42623f(0x20b),_0x4b2f94);}catch(_0x4709c9){console[_0x42623f(0x2a0)]('Error\x20updating\x20points:',_0x4709c9),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x4709c9[_0x42623f(0x2aa)],'error');}}async function searchUsersForPoints(){const _0x239a07=a4_0x7e1e1f,_0x23e023=document['getElementById']('points-user-search')[_0x239a07(0x1eb)]['trim']()[_0x239a07(0x25f)](),_0x113dfa=document['getElementById']('user-search-results');if(!_0x23e023||_0x23e023['length']<0x2){_0x113dfa['innerHTML']='';return;}_0x113dfa['innerHTML']=_0x239a07(0x1ee);try{const _0x7a548=collection(db,'userProfiles'),_0x88f090=await getDocs(_0x7a548),_0x2dff40=[];_0x88f090['forEach'](_0x264c46=>{const _0x279218=_0x239a07,_0x887f7=_0x264c46['data'](),_0x5570f6=(_0x887f7['displayName']||_0x887f7['username']||'')[_0x279218(0x25f)](),_0xcfa601=(_0x887f7[_0x279218(0x170)]||'')['toLowerCase']();(_0x5570f6['includes'](_0x23e023)||_0xcfa601[_0x279218(0x19d)](_0x23e023))&&_0x2dff40[_0x279218(0x1da)]({'id':_0x264c46['id'],..._0x887f7});});if(_0x2dff40['length']===0x0){_0x113dfa[_0x239a07(0x14b)]='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x113dfa[_0x239a07(0x14b)]='',_0x2dff40[_0x239a07(0x28b)](_0x488c3b=>{const _0x31c55b=_0x239a07,_0x411039=document['createElement']('div');_0x411039[_0x31c55b(0x160)]='search-result-item',_0x411039[_0x31c55b(0x14b)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x488c3b[_0x31c55b(0x20a)]||_0x488c3b[_0x31c55b(0x26f)]||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x488c3b['email']||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x488c3b['points']||0x0)[_0x31c55b(0x288)]()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x411039[_0x31c55b(0x213)]('click',()=>selectUserForPoints(_0x488c3b)),_0x113dfa['appendChild'](_0x411039);});}catch(_0x5c06a6){console[_0x239a07(0x2a0)](_0x239a07(0x1f8),_0x5c06a6),_0x113dfa[_0x239a07(0x14b)]=_0x239a07(0x16e);}}function selectUserForPoints(_0x5123b6){const _0x3afbd9=a4_0x7e1e1f;document[_0x3afbd9(0x108)]('selected-user-name')[_0x3afbd9(0x10a)]=_0x5123b6['displayName']||_0x5123b6['username']||_0x3afbd9(0x1dd),document['getElementById'](_0x3afbd9(0x105))['textContent']=(_0x5123b6[_0x3afbd9(0x219)]||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x5123b6['id'],document[_0x3afbd9(0x108)](_0x3afbd9(0x21e))[_0x3afbd9(0x120)][_0x3afbd9(0x224)]='block',document[_0x3afbd9(0x108)]('points-management-forms')['style'][_0x3afbd9(0x224)]='block',document[_0x3afbd9(0x108)](_0x3afbd9(0x275))['innerHTML']='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0xea57aa){const _0x3b8163=a4_0x7e1e1f;_0xea57aa[_0x3b8163(0x1b6)]();const _0x29bf8b=document['getElementById'](_0x3b8163(0x241))['value'],_0x30bf14=document['getElementById'](_0x3b8163(0x1fb))['value'],_0x5947db=parseInt(document['getElementById']('points-amount')[_0x3b8163(0x1eb)]),_0x11de57=document['getElementById']('points-reason')[_0x3b8163(0x1eb)][_0x3b8163(0x238)]();if(!_0x29bf8b||!_0x5947db||_0x5947db<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x3b8163(0x2a0));return;}try{await modifyUserPoints(_0x29bf8b,_0x30bf14,_0x5947db,_0x11de57),document['getElementById']('modify-points-form')['reset']();const _0x1a9f95=doc(db,'userProfiles',_0x29bf8b),_0xb6672e=await getDoc(_0x1a9f95);if(_0xb6672e[_0x3b8163(0x1bc)]()){const _0x5f5150=_0xb6672e[_0x3b8163(0x147)]();document['getElementById']('selected-user-points')['textContent']=(_0x5f5150['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x2ce5f2){console['error']('Error\x20modifying\x20points:',_0x2ce5f2),showNotification(_0x3b8163(0x23e)+_0x2ce5f2['message'],_0x3b8163(0x2a0));}}async function loadPointsHistory(){const _0x20923a=a4_0x7e1e1f,_0x25f0bd=document['getElementById']('points-history-table-body');if(!_0x25f0bd)return;_0x25f0bd['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0xbd874a=collection(db,_0x20923a(0x148)),_0x32d846=query(_0xbd874a,orderBy('timestamp','desc'),limit(0x32)),_0x18f10f=await getDocs(_0x32d846);if(_0x18f10f['empty']){_0x25f0bd[_0x20923a(0x14b)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x25f0bd['innerHTML']='',_0x18f10f['forEach'](_0x33d41f=>{const _0x235d25=_0x20923a,_0x353330=_0x33d41f['data'](),_0x513cd7=document['createElement']('tr'),_0x3dbc9a=_0x353330['timestamp']?new Date(_0x353330['timestamp']['seconds']*0x3e8)[_0x235d25(0x288)]():'Unknown';let _0x1c6a13='';switch(_0x353330['action']){case'add':_0x1c6a13='Added\x20'+_0x353330['amount']+'\x20points';break;case'subtract':_0x1c6a13=_0x235d25(0x146)+_0x353330['amount']+'\x20points';break;case'set':_0x1c6a13='Set\x20to\x20'+_0x353330['amount']+_0x235d25(0x2d4);break;default:_0x1c6a13=_0x353330[_0x235d25(0x22a)]+'\x20'+_0x353330[_0x235d25(0x226)]+_0x235d25(0x2d4);}_0x513cd7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3dbc9a+_0x235d25(0x129)+(_0x353330['displayName']||'Unknown\x20User')+_0x235d25(0x129)+_0x1c6a13+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x353330['action']+_0x235d25(0x156)+(_0x353330['previousPoints']||0x0)+'\x20\x20'+(_0x353330['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x353330['reason']||'No\x20reason\x20provided')+_0x235d25(0x129)+(_0x353330[_0x235d25(0xa6)]||_0x235d25(0xc1))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x25f0bd['appendChild'](_0x513cd7);});}catch(_0x50b8ab){console['error'](_0x20923a(0x251),_0x50b8ab),_0x25f0bd[_0x20923a(0x14b)]=_0x20923a(0x203)+_0x50b8ab['message']+'</td></tr>';}}function a4_0x1f52(){const _0x2bd646=['replaceChild','rank-distribution-chart','Error\x20promoting\x20player:\x20','adminEmail','highlight-video-id','getRankName','match-details-container','Player\x20not\x20found\x20in\x20','Failed\x20to\x20load\x20points\x20data:\x20','all','loserScore','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','fa-exclamation-triangle','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20match\x20data:','inactive-days-filter','sort','highlight-winner-name','achievementImageUrl','matches-page-indicator','\x20Exists','edit-highlight-playerProfileUrl-input','remove','Failed\x20to\x20find\x20match:\x20','TestLoser','entries','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20in\x20demotion:','Removed\x20','Failed\x20to\x20delete\x20trophy:\x20','Unknown\x20Admin','input','Error\x20awarding\x20item:','\x22\x20not\x20found\x20in\x20any\x20collection','promotedBy','dashboard','-next-page','desc','new-player-username','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','userProfiles','points-asc','\x20ladder','ribbon-user-search','Please\x20enter\x20a\x20username','toString','Failed\x20to\x20load\x20user\x20history','Setting\x20up\x20matches\x20action\x20buttons...','approvedMatchesD3','d3-prev-page','Error\x20updating\x20player:','Adding\x20player\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','rgba(255,\x20193,\x207,\x200.1)','history-type-filter','Attaching\x20background\x20click\x20listener.','keys','bind','Using\x20collection:\x20','input[name=\x22promote-ladder\x22]:checked','achievement','loserSuicides','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','achievement-type','source','Points\x20action\x20buttons\x20setup\x20complete','loserUsername','matchInfo','empty-state','notification\x20','Found\x20ELO\x20history\x20for\x20player\x20','eloHistoryD2','Deleting\x20match\x20','Failed\x20to\x20load\x20trophy\x20data','Match\x20ID\x20or\x20ladder\x20missing','currentTarget','match-count','-page-indicator','Unknown\x20Player','edit-elo','load-inactive-players-data','Promotion','assign-trophy-description','Error\x20loading\x20inactive\x20players:','focus','Error\x20applying\x20filters:','quick-edit-points-modal','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','Profile','Loading\x20dashboard\x20overview\x20data...','edit-match-winner-demo','size','rejected-count','edit-highlight-achievementDetails-input','position','edit-highlight-loserScore-input','userTrophies','querySelector','selected-user-points','Error\x20creating\x20activity\x20chart:','trophyId','getElementById','resimulate-match-btn','textContent','Error\x20demoting\x20player:','Article\x20not\x20found','allUsersPoints','validation-results-container','</td></tr>','admin_modification','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','\x20section','timestamp','matches-next-page','#CD7F32','create-achievement-highlight-btn','\x20in\x20','approvedMatchesD2','set-elo-username','articles-table-body','article-content','add','Create\x20test\x20match\x20modal\x20not\x20found','ref','<span\x20class=\x22no-role\x22>None</span>','style','Create\x20test\x20match\x20form\x20submitted','uid','roleAssignedBy','Submit\x20button\x20clicked\x20directly','lastPointsModified','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','current-ribbons-list','localeCompare','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','block','page','article-image-url','./promotions.js','Please\x20enter\x20valid\x20username\x20and\x20ELO','edit-highlight-type-select','contains','manage-players','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','data-section','daysSinceMatch','\x20points\x20history\x20entries','Error\x20initializing\x20points:\x20','non-participant','Admin\x20Adjustment','highlight-match-link-container','players-ladder-selector','map',').\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','active','Creator\x20highlight\x20button\x20clicked','toISOString','winnerSuicides','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','.section-header','lastMatch','type','Subtracted\x20','data','pointsHistory','then','commit','innerHTML','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','highlight-map-container','edit-wins','Setting\x20up\x20Manage\x20Points\x20section','Failed\x20to\x20send\x20Discord\x20notification:','pendingMatchesD3','assign-trophy-title','nonParticipants','Match\x20not\x20found\x20in\x20approved\x20matches','resimulate-match-id','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20trophies:','Unranked','Please\x20enter\x20a\x20valid\x20username','elo','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','docs','Player\x20\x22','No\x20matches\x20found','Inactive\x20players\x20section\x20initialized','className','article-form','body','confirmResimulateMatch','createdAt','refresh-points-overview','Failed\x20to\x20load\x20match\x20data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Unauthorized:\x20Admin\x20access\x20required','matches-prev-page','table','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','\x20users.\x20','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','Failed\x20to\x20resimulate\x20match:\x20','email','#d32f2f','highlight-video-preview-container','edit-match-loser','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','highlight-modal-title','set-elo-modal','Highlight\x20not\x20found','marginBottom','fa-info-circle','load-trophies-data','Setting\x20up\x20Manage\x20Highlights\x20section','mapCreator','role-filter','points-overview-table-body','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','setAttribute','load-users-data','flex','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','Error\x20setting\x20user\x20role:','losses','Error\x20resimulating\x20match:','toLocaleDateString','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','d2-next-page','cancel-assign-btn','reduce','migration-section','\x20Level\x20','reset','Unknown','awardedAt','Trophy\x20not\x20found','set-role-modal','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','submit','Page\x20','User\x20data\x20loaded:','trophyDefinitions','admin','Quick\x20edit\x20form\x20submitted','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','src','currentUser','includes','assign-trophy-name','length','Error\x20in\x20promotion:','Could\x20not\x20find\x20player\x20documents','\x20users...','\x20ladder!','add-ribbon-form','warning','Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20','history-start-date','matchLink','#e0e0e0','reset-history-filters','seconds','cells','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','\x20for\x20points\x20initialization','log','trophy-name','Dashboard\x20data\x20loaded\x20successfully','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','warn','querySelectorAll','\x20(winner)\x20vs\x20','preventDefault','Error\x20loading\x20dashboard:','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','highlight-achievement-type','ribbon-type-select','Create\x20New\x20Trophy','exists','login.html','modifiedBy','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','highlight-description-container','Matches\x20action\x20buttons\x20setup\x20complete','common','author','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','.nav-item','d2-prev-page','winnerComment','promote-username','award-reason','eloHistory','role-color','search-ribbon-user-btn','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','data-ladder','Enter','\x20with\x20ELO\x20','highlight-submitted-by','\x20Weekly\x20Activity','\x20(based\x20on\x20data-role:\x20','\x20for\x20user\x20\x22','history-end-date','toDate','createElement','demote-ladder','push','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','Simple\x20test\x20match\x20created\x20by\x20admin\x20','Unknown\x20User','-prev-page','loading','creatorImageUrl','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','matches-start-date','prototype','Error\x20loading\x20users:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','Error\x20initializing\x20points\x20field:','success','Error','Setting\x20up\x20create\x20test\x20match\x20button','5px','value','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','pending-count','<div\x20class=\x22loading\x22>Searching...</div>','image','.edit-match-btn','paste','Firebase\x20connection\x20test\x20failed:','title','Emerald','\x20matches\x20for\x20','.delete-trophy-btn','elo-history','Error\x20searching\x20users:','asc','player-search','points-action','winnerName','role-name','Error\x20checking\x20','insertAdjacentElement','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','match_result','getAttribute','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','\x20before\x20match:\x20','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','highlight-achievement-details-container','inactive-players','matchDate','rankDistribution','displayName','Points\x20updated\x20successfully\x20for\x20user:','highlight-achievement-player','ribbon-target-ladder','edit-highlight-achievementPlayer-input','player-count','Player\x20deleted\x20successfully','quick-edit-email','ribbon-level','addEventListener','Error\x20removing\x20ribbon:','Error\x20opening\x20assign\x20trophy\x20modal:','DOMContentLoaded','manage-matches','cancel-role-btn','points','dataset','input[name=\x22demote-ladder\x22]:checked','Loading...','Error\x20loading\x20ELO\x20history:','selected-user-info','ribbon-target-user','#users-table-body\x20tr','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','User\x20not\x20found','manage-trophies','display','promote-modal','amount','Role\x20\x27','match-type','Attempting\x20to\x20promote\x20','action','\x20to\x20','quick-edit-user-id','Error\x20loading\x20highlight:','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','input[name=\x22assign-ladder\x22]:checked','D3\x20Players','classList','Load\x20history\x20data\x20clicked','No\x20ELO\x20history\x20found\x20for\x20player\x20','none','Player\x20Achievement','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','create-new-trophy-btn','trim','save-player-btn','highly-inactive','mapVersion','player','\x20view\x20history\x20buttons','Failed\x20to\x20modify\x20points:\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','change','selected-user-id','W\x20/\x20','checked','.edit-article-btn','\x22\x20set','quick-edit-display-name','Error\x20loading\x20highlight:\x20','Never\x20played','Error\x20saving\x20article:','Error\x20loading\x20dashboard\x20data:','div','winnerScore','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','Error\x20initializing\x20dashboard:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','points-sort-order','Error\x20loading\x20points\x20history:','Modal\x20close\x20button\x20clicked','winnerUsername','Trophy\x20ID\x20and\x20username\x20are\x20required','playersD2','manage-highlights','RejectedD3','Created\x20','playersD3','catch','#1976d2','Highlight\x20added\x20successfully!','startDate','Error\x20adding\x20player:','toLowerCase','Edit\x20match\x20clicked:','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','highlights','info','create-match-highlight-btn','highlight-map','Error\x20saving\x20highlight:\x20','sources','closest','Bronze','empty','Store\x20item\x20awarded\x20successfully','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','Found\x20','System','username','name','eloRating','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','No\x20user\x20ID\x20found\x20on\x20button','approvedAt','user-search-results','create-new-article-btn','Edit\x20Article','Test\x20match','click','data-match-id','Searching\x20for\x20player\x20in\x20','d1-next-page','article-modal','trophy-image-preview','\x20in\x20all\x20collections...','highlight-map-creator-container','get','points-desc','negative-change','match','openResimulateModal\x20called!','edit-highlight-winnerScore-input','.sidebar-nav\x20.nav-item[data-section=\x22','toLocaleString','getDay','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','forEach','fromDate','stopPropagation','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','articles','medium-points','previousElementSibling','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','pendingMatchesD2','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','ribbons','edit-match-winner','Found\x20specific\x20role:\x20','positive-change','afterend','Map\x20Creator\x20is\x20required','disabled','Match\x20deleted\x20successfully','Load\x20ribbons\x20data\x20clicked','.ladder-switch\x20input[value=\x22D1\x22]','error','trophy-description','manage-points','trophy-image-url','find','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','activity','update','.close-btn','activity-chart','message','input[name=\x22quick-action\x22]:checked','highlight-creator-image','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','Role\x20select\x20set\x20to:\x20','approvedMatches','playerRibbonsD3','demote-modal','target','Using\x20collections\x20for\x20','opacity','rgba(255,\x20255,\x20255,\x200.1)','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','YouTube\x20Video\x20ID\x20(Optional)','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','videoId','userId','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','trophy-modal','moderately-inactive','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','highlight-map-version','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','players','User\x20Profiles','Monday','creator','\x20total\x20players\x20in\x20the\x20','endDate','current-ladder-display','edit-match-ladder','edit-player-modal','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','elo-history-table-body','new-player-elo','N/A','highlight-modal','firstVisible','rarity','Modal\x20should\x20now\x20be\x20visible','Firebase\x20connection\x20test\x20successful!','\x20points','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','trophy-preview-img','pendingResimulateData','user-search','quick-edit-current-points','roleName','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','cancel-quick-edit','set','Silver','lastVisible','create-test-match-modal','mapPlayed','cancel-edit-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','Load\x20matches\x20data\x20clicked','edit-match-winner-comment','join','appendChild','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','highlight-winner-score','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20','matches-search','manage-ribbons','.assign-trophy-btn','highlight-achievement-image-container','elo-history-search','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','article-id','playerId'];a4_0x1f52=function(){return _0x2bd646;};return a4_0x1f52();}function filterPointsOverview(){const _0x583452=a4_0x7e1e1f,_0x273275=document[_0x583452(0x108)]('points-overview-search')['value'][_0x583452(0x25f)]();if(!window['allUsersPoints'])return;const _0x1ee2b9=window['allUsersPoints']['filter'](_0x5e1bef=>{const _0x31cb9a=_0x583452,_0x284399=(_0x5e1bef['displayName']||_0x5e1bef[_0x31cb9a(0x26f)]||'')[_0x31cb9a(0x25f)](),_0x1ed03a=(_0x5e1bef['email']||'')['toLowerCase']();return _0x284399['includes'](_0x273275)||_0x1ed03a[_0x31cb9a(0x19d)](_0x273275);});renderPointsOverview(_0x1ee2b9);}function sortPointsOverview(){const _0x480397=a4_0x7e1e1f,_0x4b640b=document['getElementById']('points-sort-order')['value'];if(!window[_0x480397(0x10d)])return;const _0x4ed3f1=[...window['allUsersPoints']];switch(_0x4b640b){case _0x480397(0x282):_0x4ed3f1['sort']((_0x9b600a,_0x1a5fba)=>(_0x1a5fba[_0x480397(0x219)]||0x0)-(_0x9b600a['points']||0x0));break;case _0x480397(0xcc):_0x4ed3f1['sort']((_0x2b5a08,_0x526142)=>(_0x2b5a08['points']||0x0)-(_0x526142['points']||0x0));break;case'name-asc':_0x4ed3f1[_0x480397(0xb3)]((_0x1861cb,_0x44cf2a)=>{const _0x4ef719=_0x480397,_0x59fa7c=(_0x1861cb['displayName']||_0x1861cb[_0x4ef719(0x26f)]||'')['toLowerCase'](),_0x2f9e2e=(_0x44cf2a['displayName']||_0x44cf2a[_0x4ef719(0x26f)]||'')['toLowerCase']();return _0x59fa7c['localeCompare'](_0x2f9e2e);});break;case'name-desc':_0x4ed3f1['sort']((_0x15c0db,_0x42369c)=>{const _0x308a0e=_0x480397,_0x240c13=(_0x15c0db['displayName']||_0x15c0db['username']||'')['toLowerCase'](),_0x39cb0c=(_0x42369c['displayName']||_0x42369c['username']||'')[_0x308a0e(0x25f)]();return _0x39cb0c[_0x308a0e(0x128)](_0x240c13);});break;}renderPointsOverview(_0x4ed3f1);}async function handleAwardItem(_0x11492e){const _0x216e38=a4_0x7e1e1f;_0x11492e[_0x216e38(0x1b6)]();const _0x5718f2=document['getElementById']('selected-user-id')[_0x216e38(0x1eb)],_0x1e263a=document[_0x216e38(0x108)]('store-item-select')['value'],_0x9f861e=document['getElementById'](_0x216e38(0x1ca))['value'][_0x216e38(0x238)]();if(!_0x5718f2||!_0x1e263a){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x216e38(0x2a0));return;}try{showNotification(_0x216e38(0x26b),_0x216e38(0x1e7)),document['getElementById']('award-item-form')['reset']();}catch(_0x388797){console['error'](_0x216e38(0xc3),_0x388797),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x388797[_0x216e38(0x2aa)],_0x216e38(0x2a0));}}async function loadUserPointsHistory(_0x22af39){const _0x406e8b=a4_0x7e1e1f;try{const _0x1701aa=collection(db,'pointsHistory'),_0x1f821e=query(_0x1701aa,where('userId','==',_0x22af39),orderBy('timestamp',_0x406e8b(0xc8))),_0xd087aa=await getDocs(_0x1f821e);console['log'](_0x406e8b(0x26d)+_0xd087aa[_0x406e8b(0xfe)]+'\x20history\x20entries\x20for\x20user\x20'+_0x22af39),showNotification('User\x20has\x20'+_0xd087aa['size']+_0x406e8b(0x135),'info');}catch(_0x2de795){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x2de795),showNotification(_0x406e8b(0xd1),'error');}}async function initializeUserPointsField(){const _0x371e49=a4_0x7e1e1f;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x2943dd=collection(db,'userProfiles'),_0x8cc63d=await getDocs(_0x2943dd);if(_0x8cc63d[_0x371e49(0x26a)]){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x1da932=0x0,_0xdb6ac7=0x0;const _0x112409=writeBatch(db);let _0x33b3ab=0x0;return console['log']('Found\x20'+_0x8cc63d['size']+'\x20users\x20to\x20check...'),_0x8cc63d[_0x371e49(0x28b)](_0x2f9946=>{const _0x5bb0f5=_0x371e49,_0x446392=_0x2f9946['data']();_0x446392['points']===undefined||_0x446392['points']===null?(_0x112409['update'](_0x2f9946[_0x5bb0f5(0x11e)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x1da932++,_0x33b3ab++,console['log']('Queued\x20'+(_0x446392['displayName']||_0x446392['username']||_0x446392['email']||'Unknown')+_0x5bb0f5(0x1ae))):(_0xdb6ac7++,console['log']((_0x446392[_0x5bb0f5(0x20a)]||_0x446392['username']||_0x446392['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x446392['points'])),_0x33b3ab>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x1da932>0x0?(console[_0x371e49(0x1af)]('Committing\x20batch\x20update\x20for\x20'+_0x1da932+_0x371e49(0x1a2)),await _0x112409[_0x371e49(0x14a)](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x1da932+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x8cc63d[_0x371e49(0xfe)]+_0x371e49(0xe1)+_0x1da932+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0xdb6ac7),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x1da932+_0x371e49(0x16d)+_0xdb6ac7+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x8cc63d['size'],'usersUpdated':_0x1da932,'usersAlreadyHadPoints':_0xdb6ac7};}catch(_0x5b600f){console['error'](_0x371e49(0x1e6),_0x5b600f),showNotification(_0x371e49(0x136)+_0x5b600f['message'],'error');throw _0x5b600f;}}function addPointsMigrationButton(){const _0x47775b=a4_0x7e1e1f,_0x51a346=document['getElementById']('manage-points');if(!_0x51a346)return;if(document['getElementById']('migrate-points-btn'))return;const _0x5c5134=document[_0x47775b(0x1d8)](_0x47775b(0x24b));_0x5c5134['className']=_0x47775b(0x18c),_0x5c5134['style'][_0x47775b(0x178)]='20px',_0x5c5134['style']['padding']='15px',_0x5c5134['style']['backgroundColor']=_0x47775b(0xd8),_0x5c5134['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x5c5134['style']['borderRadius']=_0x47775b(0x1ea),_0x5c5134['innerHTML']=_0x47775b(0x2e4);const _0x337cc3=_0x51a346['querySelector'](_0x47775b(0x143));_0x337cc3&&_0x337cc3[_0x47775b(0x1ff)](_0x47775b(0x29a),_0x5c5134),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x265713=_0x47775b;if(confirm(_0x265713(0x2f2))){this['disabled']=!![],this[_0x265713(0x14b)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0x5c5134['style']['display']='none';},0xbb8);}catch(_0x59a082){this[_0x265713(0x14b)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x16b34b=a4_0x7e1e1f;console['log'](_0x16b34b(0x14f)),addPointsMigrationButton();const _0x156161=document['getElementById']('points-user-search');_0x156161&&_0x156161[_0x16b34b(0x213)]('input',debounce(searchUsersForPoints,0x12c));const _0x2e0c0=document['getElementById']('modify-points-form');_0x2e0c0&&_0x2e0c0['addEventListener']('submit',handleModifyPoints);const _0x4e19c8=document[_0x16b34b(0x108)]('award-item-form');_0x4e19c8&&_0x4e19c8['addEventListener']('submit',handleAwardItem);const _0x5eabd1=document[_0x16b34b(0x108)]('points-overview-search');_0x5eabd1&&_0x5eabd1[_0x16b34b(0x213)](_0x16b34b(0xc2),debounce(filterPointsOverview,0x12c));const _0x8f68fc=document['getElementById'](_0x16b34b(0x250));_0x8f68fc&&_0x8f68fc['addEventListener'](_0x16b34b(0x240),sortPointsOverview);const _0x2ce48e=document['getElementById'](_0x16b34b(0x165));_0x2ce48e&&_0x2ce48e['addEventListener'](_0x16b34b(0x279),loadPointsOverview);const _0x4d9a58=document[_0x16b34b(0x108)]('quick-edit-points-modal');if(_0x4d9a58){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x3f461b=_0x4d9a58[_0x16b34b(0x104)]('.close-btn');_0x3f461b?_0x3f461b['addEventListener']('click',function(){const _0x3dd119=_0x16b34b;console[_0x3dd119(0x1af)](_0x3dd119(0x252)),closeQuickEditModal();}):console[_0x16b34b(0x1b3)]('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x2b8989=document['getElementById'](_0x16b34b(0x2dd));_0x2b8989?_0x2b8989['addEventListener']('click',function(){const _0x405f9d=_0x16b34b;console[_0x405f9d(0x1af)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x26d412=document['getElementById']('quick-edit-points-form');_0x26d412?_0x26d412['addEventListener']('submit',function(_0x1530be){const _0x59de4b=_0x16b34b;console['log'](_0x59de4b(0x199)),handleQuickEditPoints(_0x1530be);}):console[_0x16b34b(0x2a0)]('Quick\x20edit\x20form\x20not\x20found!'),_0x4d9a58[_0x16b34b(0x213)]('click',function(_0x1ee6c6){const _0x470c29=_0x16b34b;_0x1ee6c6[_0x470c29(0x2b3)]===_0x4d9a58&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console[_0x16b34b(0x1af)]('Manage\x20Points\x20section\x20initialized');}function setupManageRibbonsSection(){const _0xa3e652=a4_0x7e1e1f;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x4bd804=document['getElementById'](_0xa3e652(0xce));_0x4bd804&&_0x4bd804['addEventListener'](_0xa3e652(0xc2),debounce(searchRibbonUser,0x12c));const _0x2ee0ee=document['getElementById'](_0xa3e652(0x1cd));_0x2ee0ee&&_0x2ee0ee['addEventListener']('click',searchRibbonUser);const _0x36d982=document['getElementById'](_0xa3e652(0x1a4));_0x36d982&&_0x36d982['addEventListener']('submit',addRibbon),_0x4bd804&&_0x4bd804[_0xa3e652(0x213)]('keypress',function(_0x2c308a){const _0x38dd40=_0xa3e652;_0x2c308a['key']===_0x38dd40(0x1d0)&&(_0x2c308a[_0x38dd40(0x1b6)](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x5ae9bb,_0x2c0675,_0x16ccef,_0x5ad69c=''){const _0x2e6d4a=a4_0x7e1e1f,_0x2c2b94=doc(db,_0x2e6d4a(0xcb),_0x5ae9bb),_0x9aa8a6=await getDoc(_0x2c2b94);if(!_0x9aa8a6['exists']())throw new Error(_0x2e6d4a(0x222));const _0x401a44=_0x9aa8a6['data'](),_0x371a39=_0x401a44[_0x2e6d4a(0x219)]!==undefined?_0x401a44['points']:0x0;_0x401a44['points']===undefined&&(console[_0x2e6d4a(0x1af)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x401a44[_0x2e6d4a(0x20a)]||_0x401a44['email']||'Unknown')),await updateDoc(_0x2c2b94,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0xa43b80=_0x371a39;switch(_0x2c0675){case _0x2e6d4a(0x11c):_0xa43b80=_0x371a39+_0x16ccef;break;case'subtract':_0xa43b80=Math['max'](0x0,_0x371a39-_0x16ccef);break;case'set':_0xa43b80=_0x16ccef;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x2c2b94,{'points':_0xa43b80,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x2e6d4a(0x148)),{'userId':_0x5ae9bb,'userEmail':_0x401a44['email']||'unknown','displayName':_0x401a44['displayName']||_0x401a44['username']||'Unknown\x20User','action':_0x2c0675,'amount':_0x16ccef,'previousPoints':_0x371a39,'newPoints':_0xa43b80,'reason':_0x5ad69c,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x444aa9=a4_0x7e1e1f,_0x4338e9=document['getElementById']('points-overview-table-body');if(!_0x4338e9)return;_0x4338e9['innerHTML']=_0x444aa9(0x200);try{const _0x5782b4=collection(db,'userProfiles'),_0x11562d=await getDocs(_0x5782b4);if(_0x11562d['empty']){_0x4338e9['innerHTML']=_0x444aa9(0x193);return;}const _0x1b594e=[];let _0x4ba9a1=0x0;_0x11562d['forEach'](_0x1d36bb=>{const _0x2badf5=_0x444aa9,_0x2d6d1c=_0x1d36bb['data'](),_0x4e08a2=_0x2d6d1c['points']!==undefined?_0x2d6d1c['points']:0x0;_0x2d6d1c[_0x2badf5(0x219)]===undefined&&_0x4ba9a1++,_0x1b594e['push']({'id':_0x1d36bb['id'],..._0x2d6d1c,'points':_0x4e08a2});}),_0x4ba9a1>0x0&&(console['log']('Found\x20'+_0x4ba9a1+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x4ba9a1+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',_0x444aa9(0x263))),_0x1b594e['sort']((_0x992e1,_0x5eb1ea)=>(_0x5eb1ea['points']||0x0)-(_0x992e1[_0x444aa9(0x219)]||0x0)),window[_0x444aa9(0x10d)]=_0x1b594e,renderPointsOverview(_0x1b594e);}catch(_0x58089d){console['error']('Error\x20loading\x20points\x20overview:',_0x58089d),_0x4338e9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x58089d['message']+_0x444aa9(0x10f);}}async function loadRibbonsData(){const _0x92c831=a4_0x7e1e1f,_0x1a83ad=document[_0x92c831(0x108)]('ribbons-overview-table-body');if(!_0x1a83ad)return;_0x1a83ad[_0x92c831(0x14b)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x1f49ee,_0x17a220,_0xcb56fc]=await Promise[_0x92c831(0xac)]([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x92c831(0x2b1)))]);_0x1a83ad['innerHTML']='';const _0x3736ae=(_0x2a4866,_0x3db3e4)=>{_0x2a4866['forEach'](_0x50ec2f=>{const _0x1e22ff=a4_0x113d,_0x2bda62=_0x50ec2f['data'](),_0x4cf36f=_0x2bda62['ribbons']||{},_0x51942f=Object['keys'](_0x4cf36f)['length'],_0x4dcb3c=document['createElement']('tr');_0x4dcb3c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2bda62[_0x1e22ff(0x26f)]||'Unknown')+_0x1e22ff(0x1c0)+_0x3db3e4[_0x1e22ff(0x25f)]()+'\x22>'+_0x3db3e4+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x51942f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2bda62['lastUpdated']?new Date(_0x2bda62['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+_0x1e22ff(0x236)+_0x2bda62['username']+'\x22\x20data-ladder=\x22'+_0x3db3e4+_0x1e22ff(0x19a),_0x1a83ad['appendChild'](_0x4dcb3c);});};_0x3736ae(_0x1f49ee,'D1'),_0x3736ae(_0x17a220,'D2'),_0x3736ae(_0xcb56fc,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x306194=>{const _0x2df176=_0x92c831;_0x306194[_0x2df176(0x213)]('click',function(){const _0x27e522=this['dataset']['username'],_0x278ac2=this['dataset']['ladder'];editUserRibbons(_0x27e522,_0x278ac2);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x8117ce){console['error']('Error\x20loading\x20ribbons:',_0x8117ce),_0x1a83ad['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x422b92=a4_0x7e1e1f,_0x4348a4=document['getElementById']('ribbon-user-search')[_0x422b92(0x1eb)][_0x422b92(0x238)]();if(!_0x4348a4){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0xc73bfc,_0x4eb41a,_0x14414b]=await Promise[_0x422b92(0xac)]([getDoc(doc(db,'playerRibbons',_0x4348a4)),getDoc(doc(db,'playerRibbonsD2',_0x4348a4)),getDoc(doc(db,_0x422b92(0x2b1),_0x4348a4))]);let _0x13e407=null,_0x4dd4bb=null;if(_0xc73bfc['exists']())_0x13e407='D1',_0x4dd4bb=_0xc73bfc['data']();else{if(_0x4eb41a['exists']())_0x13e407='D2',_0x4dd4bb=_0x4eb41a['data']();else _0x14414b['exists']()&&(_0x13e407='D3',_0x4dd4bb=_0x14414b[_0x422b92(0x147)]());}_0x13e407?(document['getElementById']('current-ribbon-user')['textContent']=_0x4348a4,document['getElementById']('ribbon-target-user')[_0x422b92(0x1eb)]=_0x4348a4,document['getElementById']('ribbon-target-ladder')[_0x422b92(0x1eb)]=_0x13e407,document[_0x422b92(0x108)]('user-ribbon-management')['style']['display']=_0x422b92(0x12a),displayCurrentRibbons(_0x4dd4bb['ribbons']||{}),showNotification('Found\x20'+_0x4348a4+_0x422b92(0x117)+_0x13e407+'\x20ladder',_0x422b92(0x1e7))):showNotification('User\x20'+_0x4348a4+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x3fda12){console[_0x422b92(0x2a0)]('Error\x20searching\x20user:',_0x3fda12),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x4d3c63){const _0x40970b=a4_0x7e1e1f,_0x5b29ae=document[_0x40970b(0x108)](_0x40970b(0x127));if(!_0x5b29ae)return;_0x5b29ae[_0x40970b(0x14b)]='';if(Object[_0x40970b(0xdb)](_0x4d3c63)['length']===0x0){_0x5b29ae[_0x40970b(0x14b)]=_0x40970b(0x1b2);return;}Object[_0x40970b(0xbc)](_0x4d3c63)['forEach'](([_0x2dc301,_0x3cdf7e])=>{const _0x4d0957=_0x40970b,_0x1be657=document['createElement']('div');_0x1be657['className']='ribbon-item',_0x1be657[_0x4d0957(0x14b)]=_0x4d0957(0x293)+_0x2dc301+_0x4d0957(0x2ec)+(_0x3cdf7e['level']||0x1)+_0x4d0957(0x261)+(_0x3cdf7e['awardedAt']?new Date(_0x3cdf7e[_0x4d0957(0x190)][_0x4d0957(0x1ab)]*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x2dc301+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x5b29ae['appendChild'](_0x1be657);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x2e3fcf=>{_0x2e3fcf['addEventListener']('click',function(){const _0xacf221=this['dataset']['ribbon'];removeRibbon(_0xacf221);});});}async function addRibbon(_0x7cc286){const _0x2f1636=a4_0x7e1e1f;_0x7cc286['preventDefault']();const _0x411633=document['getElementById']('ribbon-target-user')['value'],_0x2f0b16=document['getElementById'](_0x2f1636(0x20d))['value'],_0x57c0d5=document['getElementById']('ribbon-type-select')['value'],_0x300fa6=parseInt(document['getElementById'](_0x2f1636(0x212))[_0x2f1636(0x1eb)]);if(!_0x411633||!_0x2f0b16||!_0x57c0d5||!_0x300fa6){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0xda60dd='playerRibbons'+(_0x2f0b16==='D1'?'':_0x2f0b16),_0x53b915=doc(db,_0xda60dd,_0x411633),_0x2da866=await getDoc(_0x53b915),_0x53d756=_0x2da866[_0x2f1636(0x1bc)]()?_0x2da866['data']()['ribbons']||{}:{};_0x53d756[_0x57c0d5]={'level':_0x300fa6,'awardedAt':serverTimestamp()},await setDoc(_0x53b915,{'username':_0x411633,'ladder':_0x2f0b16,'ribbons':_0x53d756,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x57c0d5+_0x2f1636(0x18d)+_0x300fa6+'\x20to\x20'+_0x411633,'success'),displayCurrentRibbons(_0x53d756),document['getElementById'](_0x2f1636(0x1ba))[_0x2f1636(0x1eb)]='',document['getElementById'](_0x2f1636(0x212))['value']='1';}catch(_0x331d66){console['error']('Error\x20adding\x20ribbon:',_0x331d66),showNotification('Error\x20adding\x20ribbon',_0x2f1636(0x2a0));}}async function removeRibbon(_0x4dfca7){const _0x1881ae=a4_0x7e1e1f,_0xeaca39=document['getElementById'](_0x1881ae(0x21f))[_0x1881ae(0x1eb)],_0x4b85d1=document['getElementById'](_0x1881ae(0x20d))['value'];if(!confirm('Remove\x20'+_0x4dfca7+'\x20from\x20'+_0xeaca39+'?'))return;try{const _0xc5053a='playerRibbons'+(_0x4b85d1==='D1'?'':_0x4b85d1),_0x2c68f3=doc(db,_0xc5053a,_0xeaca39),_0x3127c7=await getDoc(_0x2c68f3),_0x1cf16d=_0x3127c7[_0x1881ae(0x1bc)]()?_0x3127c7['data']()[_0x1881ae(0x296)]||{}:{};delete _0x1cf16d[_0x4dfca7],await setDoc(_0x2c68f3,{'username':_0xeaca39,'ladder':_0x4b85d1,'ribbons':_0x1cf16d,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x1881ae(0xbf)+_0x4dfca7+'\x20from\x20'+_0xeaca39,'success'),displayCurrentRibbons(_0x1cf16d);}catch(_0xf6c105){console[_0x1881ae(0x2a0)](_0x1881ae(0x214),_0xf6c105),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x2b6023,_0x1ed72a){const _0x19043b=a4_0x7e1e1f;document[_0x19043b(0x108)]('ribbon-user-search')[_0x19043b(0x1eb)]=_0x2b6023,searchRibbonUser();}