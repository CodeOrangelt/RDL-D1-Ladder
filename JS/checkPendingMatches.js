const a10_0x3b2508=a10_0x131d;(function(_0x55ed06,_0x4d0e64){const _0x414fcb=a10_0x131d,_0x5dc4bd=_0x55ed06();while(!![]){try{const _0x1860b4=-parseInt(_0x414fcb(0xa4))/0x1*(-parseInt(_0x414fcb(0x7e))/0x2)+-parseInt(_0x414fcb(0xa3))/0x3*(-parseInt(_0x414fcb(0xb4))/0x4)+-parseInt(_0x414fcb(0x74))/0x5+parseInt(_0x414fcb(0x9a))/0x6+-parseInt(_0x414fcb(0x8e))/0x7+-parseInt(_0x414fcb(0x96))/0x8+parseInt(_0x414fcb(0xa6))/0x9;if(_0x1860b4===_0x4d0e64)break;else _0x5dc4bd['push'](_0x5dc4bd['shift']());}catch(_0x431de9){_0x5dc4bd['push'](_0x5dc4bd['shift']());}}}(a10_0x4fd4,0xdb8f7));const a10_0x592a25=(function(){let _0x133421=!![];return function(_0x1a2174,_0x21e133){const _0x3c4cff=_0x133421?function(){const _0x3af375=a10_0x131d;if(_0x21e133){const _0x58c465=_0x21e133[_0x3af375(0xa9)](_0x1a2174,arguments);return _0x21e133=null,_0x58c465;}}:function(){};return _0x133421=![],_0x3c4cff;};}()),a10_0x2b6a24=a10_0x592a25(this,function(){const _0x1607be=a10_0x131d;return a10_0x2b6a24['toString']()[_0x1607be(0x8f)](_0x1607be(0xb0))[_0x1607be(0x7a)]()['constructor'](a10_0x2b6a24)[_0x1607be(0x8f)](_0x1607be(0xb0));});a10_0x2b6a24();const a10_0x976323=(function(){let _0x2661c1=!![];return function(_0x193482,_0x5ad490){const _0x4d1e20=_0x2661c1?function(){const _0x42ce9b=a10_0x131d;if(_0x5ad490){const _0x777931=_0x5ad490[_0x42ce9b(0xa9)](_0x193482,arguments);return _0x5ad490=null,_0x777931;}}:function(){};return _0x2661c1=![],_0x4d1e20;};}()),a10_0x336754=a10_0x976323(this,function(){const _0x3e3067=a10_0x131d;let _0x9725ed;try{const _0x4b0630=Function(_0x3e3067(0x7f)+_0x3e3067(0x83)+');');_0x9725ed=_0x4b0630();}catch(_0xc6b468){_0x9725ed=window;}const _0xc5583c=_0x9725ed[_0x3e3067(0xb3)]=_0x9725ed['console']||{},_0x16d8eb=['log',_0x3e3067(0xaa),_0x3e3067(0xa5),_0x3e3067(0x89),'exception',_0x3e3067(0x70),_0x3e3067(0xa1)];for(let _0x2d9511=0x0;_0x2d9511<_0x16d8eb[_0x3e3067(0x9d)];_0x2d9511++){const _0x1cdb66=a10_0x976323[_0x3e3067(0x99)]['prototype'][_0x3e3067(0xb1)](a10_0x976323),_0x31caf7=_0x16d8eb[_0x2d9511],_0x425443=_0xc5583c[_0x31caf7]||_0x1cdb66;_0x1cdb66[_0x3e3067(0x97)]=a10_0x976323[_0x3e3067(0xb1)](a10_0x976323),_0x1cdb66['toString']=_0x425443[_0x3e3067(0x7a)][_0x3e3067(0xb1)](_0x425443),_0xc5583c[_0x31caf7]=_0x1cdb66;}});a10_0x336754();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10_0x3b2508(0x80),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x31f7ac=![]){const _0x4cb5ab=a10_0x3b2508,_0x49b33e=Date[_0x4cb5ab(0xa7)](),_0x50718a=checkNotificationCache();if(_0x50718a!==null&&!_0x31f7ac){updateNotificationDot(_0x50718a);if(_0x49b33e-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x49b33e;const _0x2fc3d6=auth['currentUser'];if(!_0x2fc3d6){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x3160cd,_0x4f0443,_0x25c16c]=await Promise['all']([checkForPendingMatchesInCollection(_0x2fc3d6,_0x4cb5ab(0x8c)),checkForPendingMatchesInCollection(_0x2fc3d6,_0x4cb5ab(0x93)),checkForPendingMatchesInCollection(_0x2fc3d6,_0x4cb5ab(0x86))]),_0x284a14=_0x3160cd||_0x4f0443||_0x25c16c;updateNotificationDot(_0x284a14),updateNotificationCache(_0x284a14);}catch(_0x5d0226){console[_0x4cb5ab(0x89)]('Error\x20checking\x20pending\x20matches:',_0x5d0226);}}async function checkForPendingMatchesInCollection(_0x35fcac,_0x113ee5){const _0x1a4be0=a10_0x3b2508,_0x35c651=_0x35fcac[_0x1a4be0(0xb6)],_0x146750=_0x35fcac['email'],_0x1f7bbd=query(collection(db,_0x113ee5),where(_0x1a4be0(0xa8),'==',_0x35c651),where('approved','==',![])),_0x171b42=await getDocs(_0x1f7bbd);if(!_0x171b42['empty'])return!![];if(_0x146750){const _0x20bbcd=query(collection(db,_0x113ee5),where(_0x1a4be0(0xb9),'==',_0x146750),where('approved','==',![])),_0x1e4229=await getDocs(_0x20bbcd);if(!_0x1e4229[_0x1a4be0(0x71)])return!![];}let _0xd1093a=await getUsernameFromAllSources(_0x35fcac);if(_0xd1093a){const _0x2fe3be=query(collection(db,_0x113ee5),where(_0x1a4be0(0x9f),'==',_0xd1093a),where(_0x1a4be0(0x87),'==',![])),_0x5a44cf=await getDocs(_0x2fe3be);if(!_0x5a44cf[_0x1a4be0(0x71)])return!![];}return![];}async function getUsernameFromAllSources(_0x5ad7ec){const _0x628259=a10_0x3b2508,_0x394615=localStorage[_0x628259(0xb5)]('currentUsername');if(_0x394615)return _0x394615;try{const [_0x34af7a,_0x43ce47,_0x23595c]=await Promise[_0x628259(0xb7)]([getDocs(query(collection(db,_0x628259(0x76)),where(_0x628259(0x7b),'==',_0x5ad7ec[_0x628259(0xb6)]))),getDocs(query(collection(db,_0x628259(0x9e)),where(_0x628259(0x7b),'==',_0x5ad7ec['uid']))),getDocs(query(collection(db,'playersD3'),where(_0x628259(0x7b),'==',_0x5ad7ec['uid'])))]);if(!_0x34af7a[_0x628259(0x71)]){const _0xea59ae=_0x34af7a['docs'][0x0][_0x628259(0xa2)]()[_0x628259(0x81)];return localStorage['setItem']('currentUsername',_0xea59ae),_0xea59ae;}if(!_0x43ce47[_0x628259(0x71)]){const _0x41abe6=_0x43ce47[_0x628259(0x7c)][0x0][_0x628259(0xa2)]()['username'];return localStorage['setItem'](_0x628259(0xae),_0x41abe6),_0x41abe6;}if(!_0x23595c['empty']){const _0x172534=_0x23595c[_0x628259(0x7c)][0x0][_0x628259(0xa2)]()[_0x628259(0x81)];return localStorage[_0x628259(0xab)](_0x628259(0xae),_0x172534),_0x172534;}const _0x5f114e=await getDoc(doc(db,_0x628259(0x72),_0x5ad7ec[_0x628259(0xb6)]));if(_0x5f114e[_0x628259(0x94)]()&&_0x5f114e[_0x628259(0xa2)]()['username']){const _0x817455=_0x5f114e[_0x628259(0xa2)]()['username'];return localStorage['setItem']('currentUsername',_0x817455),_0x817455;}}catch(_0x129a6c){console[_0x628259(0x89)](_0x628259(0x8a),_0x129a6c);}if(_0x5ad7ec[_0x628259(0x8b)])return _0x5ad7ec[_0x628259(0x8b)]['split']('@')[0x0];return null;}function updateNotificationCache(_0x3cdcba){const _0x5e93a4=a10_0x3b2508,_0x3691bd={'status':_0x3cdcba,'timestamp':Date['now']()};localStorage[_0x5e93a4(0xab)](NOTIFICATION_CACHE_KEY,JSON[_0x5e93a4(0x90)](_0x3691bd));}function a10_0x4fd4(){const _0x389af2=['addEventListener','removeItem','pendingMatchesD2','exists','2px\x20solid\x20white','2557160EAZuJn','__proto__','borderRadius','constructor','1630842EoHYHc','999','getElementById','length','playersD2','winnerUsername','10px','trace','data','3PLeWLD','333841pLBbNi','info','22355973NaMHYM','now','winnerId','apply','warn','setItem','report-match-notification','none','currentUsername','height','(((.+)+)+)+$','bind','50%','console','2794788ckYIUF','getItem','uid','all','display','winnerEmail','backgroundColor','table','empty','users','border','8238225tgfSaG','parse','players','-5px','style','width','toString','userId','docs','right','4HLAeEE','return\x20(function()\x20','pendingMatchesCache','username','zIndex','{}.constructor(\x22return\x20this\x22)(\x20)','disconnect','onAuthStateChanged','pendingMatchesD3','approved','absolute','error','Error\x20fetching\x20username:','email','pendingMatches','#ff3b30','8789018ORKqws','search','stringify'];a10_0x4fd4=function(){return _0x389af2;};return a10_0x4fd4();}function checkNotificationCache(){const _0x891794=a10_0x3b2508,_0x5cdae3=localStorage[_0x891794(0xb5)](NOTIFICATION_CACHE_KEY);if(!_0x5cdae3)return null;try{const {status:_0x5333a8,timestamp:_0x563e06}=JSON[_0x891794(0x75)](_0x5cdae3),_0x523515=Date['now']();if(_0x523515-_0x563e06<CACHE_EXPIRY)return _0x5333a8;}catch(_0x1fa1cb){}return null;}export function updateNotificationDot(_0x1242f6){const _0x45954a=a10_0x3b2508,_0x34c325=new MutationObserver((_0x207e2a,_0x4d2251)=>{const _0x155f7c=a10_0x131d,_0x5afc68=document[_0x155f7c(0x9c)](_0x155f7c(0xac));_0x5afc68&&(updateDotStyle(_0x5afc68,_0x1242f6),_0x4d2251[_0x155f7c(0x84)]());});_0x34c325['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0xec3521=document[_0x45954a(0x9c)](_0x45954a(0xac));_0xec3521&&(updateDotStyle(_0xec3521,_0x1242f6),_0x34c325[_0x45954a(0x84)]()),setTimeout(()=>_0x34c325[_0x45954a(0x84)](),0x1388);}function updateDotStyle(_0x4ff88f,_0x5c00f1){const _0x378c94=a10_0x3b2508;_0x5c00f1?(_0x4ff88f[_0x378c94(0x78)][_0x378c94(0xb8)]='block',_0x4ff88f[_0x378c94(0x78)][_0x378c94(0x6f)]=_0x378c94(0x8d),_0x4ff88f['style'][_0x378c94(0x79)]=_0x378c94(0xa0),_0x4ff88f[_0x378c94(0x78)][_0x378c94(0xaf)]=_0x378c94(0xa0),_0x4ff88f[_0x378c94(0x78)]['position']=_0x378c94(0x88),_0x4ff88f[_0x378c94(0x78)]['top']=_0x378c94(0x77),_0x4ff88f[_0x378c94(0x78)][_0x378c94(0x7d)]='-8px',_0x4ff88f[_0x378c94(0x78)][_0x378c94(0x98)]=_0x378c94(0xb2),_0x4ff88f['style'][_0x378c94(0x73)]=_0x378c94(0x95),_0x4ff88f['style'][_0x378c94(0x82)]=_0x378c94(0x9b)):_0x4ff88f[_0x378c94(0x78)][_0x378c94(0xb8)]=_0x378c94(0xad);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}function a10_0x131d(_0x171562,_0x329009){const _0x5d0de8=a10_0x4fd4();return a10_0x131d=function(_0x336754,_0x976323){_0x336754=_0x336754-0x6f;let _0x24d78d=_0x5d0de8[_0x336754];return _0x24d78d;},a10_0x131d(_0x171562,_0x329009);}document[a10_0x3b2508(0x91)]('DOMContentLoaded',()=>{const _0x2732cf=a10_0x3b2508;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0x2732cf(0x85)](()=>{const _0x442175=_0x2732cf;localStorage[_0x442175(0x92)](_0x442175(0xae)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});