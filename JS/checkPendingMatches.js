const a10_0x12e2b2=a10_0x10ec,a10_0x1446f7=(function(){let _0x2d159f=!![];return function(_0x288e2a,_0x1c981f){const _0x420afa=_0x2d159f?function(){if(_0x1c981f){const _0x4ba35a=_0x1c981f['apply'](_0x288e2a,arguments);return _0x1c981f=null,_0x4ba35a;}}:function(){};return _0x2d159f=![],_0x420afa;};}()),a10_0xc4115f=a10_0x1446f7(this,function(){const _0x5186d9=a10_0x10ec,_0x4cce92=function(){let _0x394a96;try{_0x394a96=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1e2ec8){_0x394a96=window;}return _0x394a96;},_0x2f4ab9=_0x4cce92(),_0x455335=_0x2f4ab9['console']=_0x2f4ab9[_0x5186d9(0x125)]||{},_0x55dfe8=['log','warn',_0x5186d9(0x11c),'error',_0x5186d9(0x127),'table',_0x5186d9(0x10b)];for(let _0x4f70ce=0x0;_0x4f70ce<_0x55dfe8[_0x5186d9(0x11d)];_0x4f70ce++){const _0xf325e1=a10_0x1446f7['constructor']['prototype']['bind'](a10_0x1446f7),_0x11bc1b=_0x55dfe8[_0x4f70ce],_0x7eb97f=_0x455335[_0x11bc1b]||_0xf325e1;_0xf325e1['__proto__']=a10_0x1446f7['bind'](a10_0x1446f7),_0xf325e1['toString']=_0x7eb97f['toString'][_0x5186d9(0x126)](_0x7eb97f),_0x455335[_0x11bc1b]=_0xf325e1;}});a10_0xc4115f();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10_0x12e2b2(0x11b),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x371fd1=![]){const _0xd0972a=a10_0x12e2b2,_0x49e0c8=Date['now'](),_0x2c91a6=checkNotificationCache();if(_0x2c91a6!==null&&!_0x371fd1){updateNotificationDot(_0x2c91a6);if(_0x49e0c8-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x49e0c8;const _0x4e8763=auth[_0xd0972a(0x109)];if(!_0x4e8763){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x335110,_0x1377ce,_0x84c7f4]=await Promise[_0xd0972a(0x108)]([checkForPendingMatchesInCollection(_0x4e8763,'pendingMatches'),checkForPendingMatchesInCollection(_0x4e8763,_0xd0972a(0x110)),checkForPendingMatchesInCollection(_0x4e8763,'pendingMatchesD3')]),_0x2b5082=_0x335110||_0x1377ce||_0x84c7f4;updateNotificationDot(_0x2b5082),updateNotificationCache(_0x2b5082);}catch(_0x5d9995){console[_0xd0972a(0x116)]('Error\x20checking\x20pending\x20matches:',_0x5d9995);}}async function checkForPendingMatchesInCollection(_0x39c682,_0x51b474){const _0x466ee3=a10_0x12e2b2,_0x3a5c03=_0x39c682['uid'],_0x2aead6=_0x39c682['email'],_0x42a010=query(collection(db,_0x51b474),where('winnerId','==',_0x3a5c03),where('approved','==',![])),_0x46fcf1=await getDocs(_0x42a010);if(!_0x46fcf1['empty'])return!![];if(_0x2aead6){const _0x1c32d9=query(collection(db,_0x51b474),where(_0x466ee3(0x113),'==',_0x2aead6),where('approved','==',![])),_0x1047b6=await getDocs(_0x1c32d9);if(!_0x1047b6[_0x466ee3(0x111)])return!![];}let _0x44bd39=await getUsernameFromAllSources(_0x39c682);if(_0x44bd39){const _0x10006b=query(collection(db,_0x51b474),where('winnerUsername','==',_0x44bd39),where('approved','==',![])),_0x58c4e3=await getDocs(_0x10006b);if(!_0x58c4e3['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x14300d){const _0x5f519b=a10_0x12e2b2,_0x199e9e=localStorage['getItem']('currentUsername');if(_0x199e9e)return _0x199e9e;try{const [_0x422974,_0x57185b,_0x29b9a5]=await Promise[_0x5f519b(0x108)]([getDocs(query(collection(db,'players'),where(_0x5f519b(0x10f),'==',_0x14300d['uid']))),getDocs(query(collection(db,_0x5f519b(0x124)),where(_0x5f519b(0x10f),'==',_0x14300d['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x14300d['uid'])))]);if(!_0x422974[_0x5f519b(0x111)]){const _0xe7d0f5=_0x422974[_0x5f519b(0x121)][0x0][_0x5f519b(0x10e)]()['username'];return localStorage['setItem'](_0x5f519b(0x115),_0xe7d0f5),_0xe7d0f5;}if(!_0x57185b['empty']){const _0x45e590=_0x57185b[_0x5f519b(0x121)][0x0][_0x5f519b(0x10e)]()[_0x5f519b(0x107)];return localStorage['setItem']('currentUsername',_0x45e590),_0x45e590;}if(!_0x29b9a5['empty']){const _0x4ae887=_0x29b9a5['docs'][0x0][_0x5f519b(0x10e)]()['username'];return localStorage['setItem']('currentUsername',_0x4ae887),_0x4ae887;}const _0x2cfce3=await getDoc(doc(db,'users',_0x14300d[_0x5f519b(0x119)]));if(_0x2cfce3[_0x5f519b(0x122)]()&&_0x2cfce3['data']()['username']){const _0x3f0795=_0x2cfce3['data']()['username'];return localStorage['setItem']('currentUsername',_0x3f0795),_0x3f0795;}}catch(_0x16038c){console[_0x5f519b(0x116)]('Error\x20fetching\x20username:',_0x16038c);}if(_0x14300d['email'])return _0x14300d['email'][_0x5f519b(0x106)]('@')[0x0];return null;}function updateNotificationCache(_0x2c697d){const _0x4e4742=a10_0x12e2b2,_0x27740d={'status':_0x2c697d,'timestamp':Date['now']()};localStorage[_0x4e4742(0x10d)](NOTIFICATION_CACHE_KEY,JSON[_0x4e4742(0x105)](_0x27740d));}function a10_0x14c9(){const _0x1e2899=['stringify','split','username','all','currentUser','getItem','trace','none','setItem','data','userId','pendingMatchesD2','empty','50%','winnerEmail','block','currentUsername','error','10px','addEventListener','uid','style','pendingMatchesCache','info','length','2px\x20solid\x20white','disconnect','getElementById','docs','exists','display','playersD2','console','bind','exception'];a10_0x14c9=function(){return _0x1e2899;};return a10_0x14c9();}function checkNotificationCache(){const _0x5599b0=a10_0x12e2b2,_0x51d040=localStorage[_0x5599b0(0x10a)](NOTIFICATION_CACHE_KEY);if(!_0x51d040)return null;try{const {status:_0x3640a4,timestamp:_0x1201a1}=JSON['parse'](_0x51d040),_0x2dac53=Date['now']();if(_0x2dac53-_0x1201a1<CACHE_EXPIRY)return _0x3640a4;}catch(_0x25f7e2){}return null;}function a10_0x10ec(_0x2863e9,_0x489a78){const _0xc4115f=a10_0x14c9();return a10_0x10ec=function(_0x1446f7,_0x3b4fef){_0x1446f7=_0x1446f7-0x105;let _0x14c9c9=_0xc4115f[_0x1446f7];return _0x14c9c9;},a10_0x10ec(_0x2863e9,_0x489a78);}export function updateNotificationDot(_0x79af80){const _0x575cd0=a10_0x12e2b2,_0x387d27=new MutationObserver((_0x4d4623,_0x1c08d0)=>{const _0x4becbc=a10_0x10ec,_0x2a5117=document['getElementById']('report-match-notification');_0x2a5117&&(updateDotStyle(_0x2a5117,_0x79af80),_0x1c08d0[_0x4becbc(0x11f)]());});_0x387d27['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0xc65de0=document[_0x575cd0(0x120)]('report-match-notification');_0xc65de0&&(updateDotStyle(_0xc65de0,_0x79af80),_0x387d27['disconnect']()),setTimeout(()=>_0x387d27['disconnect'](),0x1388);}function updateDotStyle(_0x20db13,_0x1a5e51){const _0x153d4b=a10_0x12e2b2;_0x1a5e51?(_0x20db13['style']['display']=_0x153d4b(0x114),_0x20db13[_0x153d4b(0x11a)]['backgroundColor']='#ff3b30',_0x20db13['style']['width']=_0x153d4b(0x117),_0x20db13[_0x153d4b(0x11a)]['height']='10px',_0x20db13['style']['position']='absolute',_0x20db13[_0x153d4b(0x11a)]['top']='-5px',_0x20db13['style']['right']='-8px',_0x20db13['style']['borderRadius']=_0x153d4b(0x112),_0x20db13['style']['border']=_0x153d4b(0x11e),_0x20db13['style']['zIndex']='999'):_0x20db13['style'][_0x153d4b(0x123)]=_0x153d4b(0x10c);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x12e2b2(0x118)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});