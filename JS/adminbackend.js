const a4_0x4f367c=a4_0x51fe;(function(_0x34dbfe,_0x2c30ab){const _0x4463b2=a4_0x51fe,_0x30b42f=_0x34dbfe();while(!![]){try{const _0x2bce34=-parseInt(_0x4463b2(0x240))/0x1+parseInt(_0x4463b2(0x401))/0x2*(-parseInt(_0x4463b2(0x4e6))/0x3)+parseInt(_0x4463b2(0x248))/0x4+parseInt(_0x4463b2(0x2cf))/0x5*(-parseInt(_0x4463b2(0x339))/0x6)+-parseInt(_0x4463b2(0x297))/0x7*(-parseInt(_0x4463b2(0x261))/0x8)+parseInt(_0x4463b2(0x337))/0x9+parseInt(_0x4463b2(0x15d))/0xa;if(_0x2bce34===_0x2c30ab)break;else _0x30b42f['push'](_0x30b42f['shift']());}catch(_0x13f3d4){_0x30b42f['push'](_0x30b42f['shift']());}}}(a4_0x2b57,0xac08d));const a4_0xa70170=(function(){let _0x5b39d6=!![];return function(_0x144c4f,_0x1e6521){const _0x581586=_0x5b39d6?function(){const _0x1bc11e=a4_0x51fe;if(_0x1e6521){const _0x54808f=_0x1e6521[_0x1bc11e(0x404)](_0x144c4f,arguments);return _0x1e6521=null,_0x54808f;}}:function(){};return _0x5b39d6=![],_0x581586;};}()),a4_0x26f4c4=a4_0xa70170(this,function(){const _0x365e84=a4_0x51fe;return a4_0x26f4c4[_0x365e84(0x39a)]()[_0x365e84(0x52a)](_0x365e84(0x325))[_0x365e84(0x39a)]()[_0x365e84(0x477)](a4_0x26f4c4)[_0x365e84(0x52a)]('(((.+)+)+)+$');});a4_0x26f4c4();const a4_0x482809=(function(){let _0x2fed89=!![];return function(_0x5b64b6,_0x5c7bfb){const _0x1e78cd=_0x2fed89?function(){const _0x55f452=a4_0x51fe;if(_0x5c7bfb){const _0x2a1fd5=_0x5c7bfb[_0x55f452(0x404)](_0x5b64b6,arguments);return _0x5c7bfb=null,_0x2a1fd5;}}:function(){};return _0x2fed89=![],_0x1e78cd;};}()),a4_0x2da49d=a4_0x482809(this,function(){const _0x46d5f9=a4_0x51fe,_0x5417e9=function(){const _0x3e4db0=a4_0x51fe;let _0x3442dc;try{_0x3442dc=Function(_0x3e4db0(0x54f)+_0x3e4db0(0x38f)+');')();}catch(_0x10caf5){_0x3442dc=window;}return _0x3442dc;},_0x14fbe3=_0x5417e9(),_0x1f568b=_0x14fbe3[_0x46d5f9(0x26f)]=_0x14fbe3[_0x46d5f9(0x26f)]||{},_0x3669bc=[_0x46d5f9(0x538),_0x46d5f9(0x177),_0x46d5f9(0x300),'error','exception',_0x46d5f9(0x389),'trace'];for(let _0x1dd1fb=0x0;_0x1dd1fb<_0x3669bc[_0x46d5f9(0x283)];_0x1dd1fb++){const _0x37e67=a4_0x482809[_0x46d5f9(0x477)][_0x46d5f9(0x45a)]['bind'](a4_0x482809),_0x417198=_0x3669bc[_0x1dd1fb],_0x544afb=_0x1f568b[_0x417198]||_0x37e67;_0x37e67[_0x46d5f9(0x4af)]=a4_0x482809['bind'](a4_0x482809),_0x37e67[_0x46d5f9(0x39a)]=_0x544afb[_0x46d5f9(0x39a)]['bind'](_0x544afb),_0x1f568b[_0x417198]=_0x37e67;}});a4_0x2da49d();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x4a0bdd){const _0x167ec3=a4_0x51fe;if(!_0x4a0bdd)return _0x167ec3(0x54c);_0x4a0bdd=_0x4a0bdd[_0x167ec3(0x3c3)]('#','');_0x4a0bdd[_0x167ec3(0x283)]===0x3&&(_0x4a0bdd=_0x4a0bdd['split']('')[_0x167ec3(0x3ac)](_0xf31d3f=>_0xf31d3f+_0xf31d3f)[_0x167ec3(0x37c)](''));if(_0x4a0bdd[_0x167ec3(0x283)]!==0x6)return'#ffffff';const _0x4e3571=parseInt(_0x4a0bdd['substring'](0x0,0x2),0x10),_0x3187bd=parseInt(_0x4a0bdd[_0x167ec3(0x4e7)](0x2,0x4),0x10),_0x4c1446=parseInt(_0x4a0bdd[_0x167ec3(0x4e7)](0x4,0x6),0x10),_0x4cdc52=(_0x4e3571*0x12b+_0x3187bd*0x24b+_0x4c1446*0x72)/0x3e8;return _0x4cdc52>=0x80?_0x167ec3(0x3e7):'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a4_0x4f367c(0x4e9)](a4_0x4f367c(0x366),()=>{const _0x2f4d01=a4_0x4f367c;auth[_0x2f4d01(0x153)](async _0x139064=>{const _0x3f625d=_0x2f4d01;if(!_0x139064){window[_0x3f625d(0x151)][_0x3f625d(0x3d1)]='login.html';return;}try{await initializeAdminDashboard();}catch(_0x45293b){console[_0x3f625d(0x3fc)](_0x3f625d(0x500),_0x45293b),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0xea293a){const _0xcbc667=a4_0x4f367c;if(!_0xea293a)return['dashboard'];console['log'](_0xcbc667(0x458)+_0xea293a+_0xcbc667(0x418));const _0x1c8451=[{'name':_0xcbc667(0x43b),'displayName':_0xcbc667(0x2d3)},{'name':_0xcbc667(0x378),'displayName':_0xcbc667(0x296)},{'name':_0xcbc667(0x1b4),'displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0xcbc667(0x4c2)},{'name':_0xcbc667(0x2a2),'displayName':'Non-Participants'}],_0x481a36=auth[_0xcbc667(0x3ee)];let _0x6a3624=null,_0x1672f9=null;for(const _0x30afc0 of _0x1c8451){try{if(_0x481a36){const _0x3c65b5=doc(db,_0x30afc0[_0xcbc667(0x53a)],_0x481a36[_0xcbc667(0x3db)]),_0x4d31c2=await getDoc(_0x3c65b5);if(_0x4d31c2[_0xcbc667(0x584)]()){const _0x2ed14e=_0x4d31c2[_0xcbc667(0x4e3)]();console[_0xcbc667(0x538)](_0xcbc667(0x523)+_0x30afc0['displayName']+'\x20by\x20UID:',_0x2ed14e);const _0x16fe93=(_0x2ed14e['roleName']||_0x2ed14e[_0xcbc667(0x4d4)]||'')[_0xcbc667(0x447)]();if(_0x16fe93&&_0x16fe93!==_0xcbc667(0x46c)){_0x6a3624=_0x16fe93,_0x1672f9=_0x30afc0['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x6a3624+_0xcbc667(0x1b1)+_0x1672f9);break;}}}if(!_0x6a3624){const _0x2605ff=collection(db,_0x30afc0['name']),_0x3719a6=query(_0x2605ff,where(_0xcbc667(0x1cb),'==',_0xea293a)),_0x49640c=await getDocs(_0x3719a6);if(!_0x49640c['empty']){const _0x281c6b=_0x49640c['docs'][0x0]['data']();console[_0xcbc667(0x538)]('Found\x20user\x20in\x20'+_0x30afc0[_0xcbc667(0x583)]+_0xcbc667(0x1b7)+_0xea293a+':',_0x281c6b);const _0x5982ef=(_0x281c6b['roleName']||_0x281c6b['role']||'')[_0xcbc667(0x447)]();if(_0x5982ef&&_0x5982ef!==_0xcbc667(0x46c)){_0x6a3624=_0x5982ef,_0x1672f9=_0x30afc0[_0xcbc667(0x583)],console[_0xcbc667(0x538)]('Found\x20specific\x20role:\x20'+_0x6a3624+'\x20in\x20'+_0x1672f9);break;}}}}catch(_0x280a34){console[_0xcbc667(0x3fc)](_0xcbc667(0x260)+_0x30afc0[_0xcbc667(0x583)]+':',_0x280a34);}}if(_0x6a3624){console[_0xcbc667(0x538)](_0xcbc667(0x189)+_0x6a3624+_0xcbc667(0x54b)+_0x1672f9+')');const _0x1c2a02={'admin':[_0xcbc667(0x41f),_0xcbc667(0x4c3),'manage-matches',_0xcbc667(0x33c),_0xcbc667(0x279),'manage-ranks',_0xcbc667(0x340),'settings','manage-trophies',_0xcbc667(0x4ab),'manage-highlights',_0xcbc667(0x4da),_0xcbc667(0x442),_0xcbc667(0x27b),'manage-levels-ribbons',_0xcbc667(0x3b4)],'owner':[_0xcbc667(0x41f),_0xcbc667(0x4c3),'manage-matches',_0xcbc667(0x33c),_0xcbc667(0x279),'manage-ranks','inactive-players','settings',_0xcbc667(0x279),_0xcbc667(0x4ab),'manage-highlights',_0xcbc667(0x4da),_0xcbc667(0x442),'manage-points','manage-levels-ribbons',_0xcbc667(0x3b4)],'council':[_0xcbc667(0x41f),_0xcbc667(0x4c3),'manage-matches'],'creative\x20lead':[_0xcbc667(0x41f),_0xcbc667(0x33c),_0xcbc667(0x279),_0xcbc667(0x4ab),_0xcbc667(0x164)]};if(_0x1c2a02[_0x6a3624])return console['log'](_0xcbc667(0x4c0)+_0x6a3624+_0xcbc667(0x3e5),_0x1c2a02[_0x6a3624]),_0x1c2a02[_0x6a3624];}return console[_0xcbc667(0x538)](_0xcbc667(0x360)+_0xea293a+_0xcbc667(0x3e3)),[_0xcbc667(0x41f)];}function setupSidebarNavigation(_0xe0bce=[]){const _0x43faca=a4_0x4f367c,_0x37e10c=document[_0x43faca(0x201)](_0x43faca(0x167)),_0x113e51=document['querySelectorAll'](_0x43faca(0x44d));(!_0xe0bce||_0xe0bce[_0x43faca(0x283)]===0x0)&&(_0xe0bce=[_0x43faca(0x41f)]);_0x37e10c[_0x43faca(0x2fa)](_0x3a01ab=>{const _0x32aec7=_0x43faca,_0x3568fa=_0x3a01ab[_0x32aec7(0x582)](_0x32aec7(0x59e));_0xe0bce['includes'](_0x3568fa)?_0x3a01ab[_0x32aec7(0x2b6)][_0x32aec7(0x185)]=_0x32aec7(0x2c7):_0x3a01ab[_0x32aec7(0x2b6)]['display']='none',_0x3a01ab[_0x32aec7(0x4e9)](_0x32aec7(0x37e),()=>{const _0x384851=_0x32aec7,_0x5e5ebe=_0x3a01ab['getAttribute'](_0x384851(0x59e));if(!_0xe0bce['includes'](_0x5e5ebe)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section',_0x384851(0x3fc));return;}_0x37e10c[_0x384851(0x2fa)](_0x3c3638=>_0x3c3638['classList'][_0x384851(0x22a)]('active')),_0x3a01ab[_0x384851(0x328)]['add'](_0x384851(0x560)),_0x113e51[_0x384851(0x2fa)](_0x251463=>{const _0x3390c7=_0x384851;_0x251463[_0x3390c7(0x2b6)][_0x3390c7(0x185)]=_0x3390c7(0x46c);});const _0x3885f7=document[_0x384851(0x293)](_0x5e5ebe);_0x3885f7&&(_0x3885f7['style']['display']='block',console[_0x384851(0x538)]('Switched\x20to\x20'+_0x5e5ebe+_0x384851(0x2b2)));});});const _0x242b81=document[_0x43faca(0x1a3)](_0x43faca(0x349)+_0xe0bce[0x0]+'\x22]');_0x242b81&&_0x242b81[_0x43faca(0x37e)](),console['log'](_0x43faca(0x3cd));}function setupTabNavigation(){const _0xd3e899=a4_0x4f367c,_0x100fdb=document[_0xd3e899(0x201)](_0xd3e899(0x56d));let _0x1ff0b8=null,_0x328944=new Set();_0x100fdb[_0xd3e899(0x2fa)](_0x5b48ac=>{const _0x2a55b9=_0xd3e899;_0x5b48ac[_0x2a55b9(0x4e9)]('click',function(){const _0x2e749d=_0x2a55b9,_0x1fe253=this[_0x2e749d(0x582)](_0x2e749d(0x59e));if(_0x1fe253===_0x1ff0b8)return;_0x1ff0b8&&(document[_0x2e749d(0x293)](_0x1ff0b8)[_0x2e749d(0x2b6)][_0x2e749d(0x185)]='none',_0x100fdb[_0x2e749d(0x2fa)](_0x613e69=>_0x613e69['classList'][_0x2e749d(0x22a)](_0x2e749d(0x560)))),document['getElementById'](_0x1fe253)[_0x2e749d(0x2b6)][_0x2e749d(0x185)]=_0x2e749d(0x2f1),this[_0x2e749d(0x328)][_0x2e749d(0x2ff)](_0x2e749d(0x560)),_0x1ff0b8=_0x1fe253;});});}function loadSectionData(_0x3804cd){return;}async function initializeAdminDashboard(){const _0x453e7d=a4_0x4f367c;try{const _0x4c5e96=auth['currentUser'],_0x201608=await getUserTabPermissions(_0x4c5e96[_0x453e7d(0x1cb)]);console['log'](_0x453e7d(0x1c7)+_0x4c5e96['email']+_0x453e7d(0x386),_0x201608),window[_0x453e7d(0x192)]=_0x201608,setupSidebarNavigation(_0x201608),setupLadderSelector(),setupDashboardSection(),_0x201608[_0x453e7d(0x4c1)](_0x453e7d(0x4c3))&&setupManagePlayersSection(),_0x201608[_0x453e7d(0x4c1)](_0x453e7d(0x4ab))&&setupEloHistorySection(),_0x201608[_0x453e7d(0x4c1)]('manage-ranks')&&setupRankControls(),_0x201608['includes'](_0x453e7d(0x33c))&&setupManageArticlesSection(),_0x201608['includes'](_0x453e7d(0x4da))&&setupUserRolesSection(),_0x201608[_0x453e7d(0x4c1)]('manage-trophies')&&setupTrophyManagementSection(),_0x201608[_0x453e7d(0x4c1)](_0x453e7d(0x164))&&setupManageHighlightsSection(),_0x201608['includes']('inactive-players')&&setupInactivePlayersSection(),_0x201608[_0x453e7d(0x4c1)](_0x453e7d(0x442))&&setupManageMatchesSection(),_0x201608[_0x453e7d(0x4c1)](_0x453e7d(0x27b))&&setupManagePointsSection(),_0x201608[_0x453e7d(0x4c1)](_0x453e7d(0x3b4))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x201608);}catch(_0xb23bca){console[_0x453e7d(0x3fc)](_0x453e7d(0x1d4),_0xb23bca);}}function setupDataLoadButtons(_0x24bace=[]){const _0x259ba1=a4_0x4f367c;(!_0x24bace||_0x24bace[_0x259ba1(0x283)]===0x0)&&(_0x24bace=[_0x259ba1(0x41f)]);const _0x2a3c7a=document[_0x259ba1(0x293)](_0x259ba1(0x284));_0x2a3c7a&&_0x2a3c7a[_0x259ba1(0x4e9)](_0x259ba1(0x37e),function(){const _0xec5d61=_0x259ba1;this[_0xec5d61(0x328)]['add'](_0xec5d61(0x555)),this['innerHTML']=_0xec5d61(0x4fd),loadDashboardOverview()[_0xec5d61(0x496)](()=>{const _0x183bb5=_0xec5d61;this[_0x183bb5(0x328)][_0x183bb5(0x22a)]('loading'),this[_0x183bb5(0x533)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0xec5d61(0x412)](_0x2ddff0=>{const _0x19c25c=_0xec5d61;console[_0x19c25c(0x3fc)]('Error\x20loading\x20dashboard:',_0x2ddff0),this[_0x19c25c(0x328)][_0x19c25c(0x22a)](_0x19c25c(0x555)),this[_0x19c25c(0x533)]=_0x19c25c(0x316),setTimeout(()=>{const _0x226191=_0x19c25c;this[_0x226191(0x533)]=_0x226191(0x14f);},0xbb8);});});if(_0x24bace[_0x259ba1(0x4c1)](_0x259ba1(0x279))){const _0x5a0191=document['getElementById'](_0x259ba1(0x504));_0x5a0191&&_0x5a0191['addEventListener'](_0x259ba1(0x37e),function(){const _0xb3d256=_0x259ba1;console[_0xb3d256(0x538)]('Load\x20trophies\x20data\x20clicked'),this['classList'][_0xb3d256(0x2ff)]('loading'),this['innerHTML']=_0xb3d256(0x4fd),loadTrophyDefinitions()[_0xb3d256(0x496)](()=>{const _0x509f57=_0xb3d256;this[_0x509f57(0x328)][_0x509f57(0x22a)]('loading'),this[_0x509f57(0x533)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})[_0xb3d256(0x412)](_0x443967=>{const _0x208113=_0xb3d256;console[_0x208113(0x3fc)](_0x208113(0x59a),_0x443967),this['classList'][_0x208113(0x22a)](_0x208113(0x555)),this['innerHTML']=_0x208113(0x316),setTimeout(()=>{const _0x260ca9=_0x208113;this['innerHTML']=_0x260ca9(0x2d8);},0xbb8);});});}if(_0x24bace[_0x259ba1(0x4c1)](_0x259ba1(0x4c3))){const _0x22f59f=document['getElementById'](_0x259ba1(0x348));_0x22f59f&&_0x22f59f['addEventListener'](_0x259ba1(0x37e),function(){const _0x220e9c=_0x259ba1;console[_0x220e9c(0x538)](_0x220e9c(0x3e8)),this[_0x220e9c(0x328)][_0x220e9c(0x2ff)](_0x220e9c(0x555)),this[_0x220e9c(0x533)]=_0x220e9c(0x4fd),loadPlayersData()['then'](()=>{const _0x617a71=_0x220e9c;this[_0x617a71(0x328)][_0x617a71(0x22a)]('loading'),this['innerHTML']=_0x617a71(0x22b);})['catch'](_0x52099c=>{const _0x3ee878=_0x220e9c;console[_0x3ee878(0x3fc)](_0x3ee878(0x567),_0x52099c),this[_0x3ee878(0x328)][_0x3ee878(0x22a)]('loading'),this[_0x3ee878(0x533)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3bb8ac=_0x3ee878;this[_0x3bb8ac(0x533)]=_0x3bb8ac(0x22b);},0xbb8);});});}if(_0x24bace[_0x259ba1(0x4c1)](_0x259ba1(0x4ab))){const _0x411d1b=document[_0x259ba1(0x293)](_0x259ba1(0x451));_0x411d1b&&_0x411d1b[_0x259ba1(0x4e9)](_0x259ba1(0x37e),function(){const _0x2f8ba3=_0x259ba1;console[_0x2f8ba3(0x538)](_0x2f8ba3(0x23b)),this[_0x2f8ba3(0x328)]['add'](_0x2f8ba3(0x555)),this[_0x2f8ba3(0x533)]=_0x2f8ba3(0x4fd),loadEloHistory(0x1)[_0x2f8ba3(0x496)](()=>{const _0x4cfea8=_0x2f8ba3;this['classList'][_0x4cfea8(0x22a)]('loading'),this[_0x4cfea8(0x533)]=_0x4cfea8(0x4be);})['catch'](_0x363139=>{const _0x174522=_0x2f8ba3;console[_0x174522(0x3fc)](_0x174522(0x220),_0x363139),this[_0x174522(0x328)]['remove'](_0x174522(0x555)),this[_0x174522(0x533)]=_0x174522(0x316),setTimeout(()=>{const _0x248d68=_0x174522;this['innerHTML']=_0x248d68(0x4be);},0xbb8);});});}if(_0x24bace['includes'](_0x259ba1(0x33c))){const _0x22e8a2=document[_0x259ba1(0x293)](_0x259ba1(0x276));_0x22e8a2&&_0x22e8a2[_0x259ba1(0x4e9)](_0x259ba1(0x37e),function(){const _0x5c6df3=_0x259ba1;console[_0x5c6df3(0x538)](_0x5c6df3(0x178)),this[_0x5c6df3(0x328)][_0x5c6df3(0x2ff)]('loading'),this[_0x5c6df3(0x533)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x272aa7=_0x5c6df3;this[_0x272aa7(0x328)][_0x272aa7(0x22a)](_0x272aa7(0x555)),this[_0x272aa7(0x533)]=_0x272aa7(0x522);})[_0x5c6df3(0x412)](_0x104538=>{const _0x2532a1=_0x5c6df3;console[_0x2532a1(0x3fc)](_0x2532a1(0x51a),_0x104538),this['classList'][_0x2532a1(0x22a)]('loading'),this[_0x2532a1(0x533)]=_0x2532a1(0x316),setTimeout(()=>{const _0x317f80=_0x2532a1;this[_0x317f80(0x533)]=_0x317f80(0x522);},0xbb8);});});}if(_0x24bace[_0x259ba1(0x4c1)](_0x259ba1(0x4da))){const _0x84bffd=document[_0x259ba1(0x293)]('load-users-data');_0x84bffd&&_0x84bffd['addEventListener'](_0x259ba1(0x37e),function(){const _0x14061c=_0x259ba1;console['log'](_0x14061c(0x308)),this[_0x14061c(0x328)]['add']('loading'),this['innerHTML']=_0x14061c(0x4fd),loadUsersWithRoles()[_0x14061c(0x496)](()=>{const _0x1e548d=_0x14061c;this[_0x1e548d(0x328)][_0x1e548d(0x22a)]('loading'),this[_0x1e548d(0x533)]=_0x1e548d(0x353);})[_0x14061c(0x412)](_0x4e992d=>{const _0x49ea23=_0x14061c;console['error']('Error\x20loading\x20users:',_0x4e992d),this[_0x49ea23(0x328)][_0x49ea23(0x22a)](_0x49ea23(0x555)),this[_0x49ea23(0x533)]=_0x49ea23(0x316),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x24bace[_0x259ba1(0x4c1)](_0x259ba1(0x340))){const _0x501299=document[_0x259ba1(0x293)](_0x259ba1(0x1c5));_0x501299&&_0x501299[_0x259ba1(0x4e9)]('click',function(){const _0x581a0f=_0x259ba1;console['log'](_0x581a0f(0x28b)),this[_0x581a0f(0x328)]['add'](_0x581a0f(0x555)),this['innerHTML']=_0x581a0f(0x4fd),loadInactivePlayersData()['then'](()=>{const _0x1f4334=_0x581a0f;this[_0x1f4334(0x328)][_0x1f4334(0x22a)](_0x1f4334(0x555)),this[_0x1f4334(0x533)]=_0x1f4334(0x18f);})[_0x581a0f(0x412)](_0x141482=>{const _0xcf38f2=_0x581a0f;console['error']('Error\x20loading\x20inactive\x20players:',_0x141482),this[_0xcf38f2(0x328)][_0xcf38f2(0x22a)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4c8b23=_0xcf38f2;this['innerHTML']=_0x4c8b23(0x18f);},0xbb8);});});}if(_0x24bace[_0x259ba1(0x4c1)](_0x259ba1(0x164))){const _0x420490=document[_0x259ba1(0x293)](_0x259ba1(0x1eb));_0x420490&&_0x420490[_0x259ba1(0x4e9)]('click',function(){const _0x361426=_0x259ba1;console['log'](_0x361426(0x1ff)),this[_0x361426(0x328)]['add'](_0x361426(0x555)),this[_0x361426(0x533)]=_0x361426(0x4fd),loadHighlightsAdmin()['then'](()=>{const _0xb42b24=_0x361426;this[_0xb42b24(0x328)]['remove'](_0xb42b24(0x555)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0x361426(0x412)](_0x19e6bc=>{const _0x42ef41=_0x361426;console['error'](_0x42ef41(0x273),_0x19e6bc),this[_0x42ef41(0x328)][_0x42ef41(0x22a)](_0x42ef41(0x555)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5c7a24=_0x42ef41;this[_0x5c7a24(0x533)]=_0x5c7a24(0x1f7);},0xbb8);});});}if(_0x24bace[_0x259ba1(0x4c1)](_0x259ba1(0x442))){const _0x4a6d2a=document[_0x259ba1(0x293)](_0x259ba1(0x4fc));_0x4a6d2a&&_0x4a6d2a['addEventListener'](_0x259ba1(0x37e),function(){const _0x50a541=_0x259ba1;console[_0x50a541(0x538)](_0x50a541(0x4aa)),this[_0x50a541(0x328)][_0x50a541(0x2ff)](_0x50a541(0x555)),this[_0x50a541(0x533)]=_0x50a541(0x4fd),loadMatchesData(0x1)['then'](()=>{const _0x1a1adc=_0x50a541;this[_0x1a1adc(0x328)]['remove'](_0x1a1adc(0x555)),this[_0x1a1adc(0x533)]=_0x1a1adc(0x362);})['catch'](_0x5ea1da=>{const _0x38658e=_0x50a541;console[_0x38658e(0x3fc)](_0x38658e(0x452),_0x5ea1da),this[_0x38658e(0x328)][_0x38658e(0x22a)](_0x38658e(0x555)),this[_0x38658e(0x533)]=_0x38658e(0x316),setTimeout(()=>{const _0x3d3e50=_0x38658e;this[_0x3d3e50(0x533)]=_0x3d3e50(0x362);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x24bace[_0x259ba1(0x4c1)](_0x259ba1(0x3b4))){const _0x5a27e5=document[_0x259ba1(0x293)](_0x259ba1(0x199));_0x5a27e5&&_0x5a27e5[_0x259ba1(0x4e9)](_0x259ba1(0x37e),function(){const _0x315a0b=_0x259ba1;console[_0x315a0b(0x538)]('Load\x20ribbons\x20data\x20clicked'),this[_0x315a0b(0x328)][_0x315a0b(0x2ff)](_0x315a0b(0x555)),this[_0x315a0b(0x533)]=_0x315a0b(0x4fd),loadRibbonsData()['then'](()=>{const _0x503b5b=_0x315a0b;this[_0x503b5b(0x328)]['remove']('loading'),this['innerHTML']=_0x503b5b(0x585);})[_0x315a0b(0x412)](_0x412b4c=>{const _0x6f3483=_0x315a0b;console[_0x6f3483(0x3fc)](_0x6f3483(0x223),_0x412b4c),this[_0x6f3483(0x328)][_0x6f3483(0x22a)](_0x6f3483(0x555)),this[_0x6f3483(0x533)]=_0x6f3483(0x316),setTimeout(()=>{const _0x4c9682=_0x6f3483;this[_0x4c9682(0x533)]=_0x4c9682(0x585);},0xbb8);});});}console[_0x259ba1(0x538)](_0x259ba1(0x30c));}function setupDashboardSection(){const _0x394956=a4_0x4f367c;document[_0x394956(0x293)](_0x394956(0x407))['textContent']='-',document['getElementById']('match-count')[_0x394956(0x2f7)]='-',document[_0x394956(0x293)](_0x394956(0x17c))['textContent']='-',document[_0x394956(0x293)]('rejected-count')[_0x394956(0x2f7)]='-';}function setupLadderSelector(){const _0x2edaa0=a4_0x4f367c,_0x2c872e=document[_0x2edaa0(0x201)](_0x2edaa0(0x28c));_0x2c872e[_0x2edaa0(0x2fa)](_0x399af3=>{const _0x103967=_0x2edaa0;_0x399af3[_0x103967(0x4e9)](_0x103967(0x4dd),()=>{const _0x25d3a9=_0x103967;currentLadder=_0x399af3[_0x25d3a9(0x34b)],document['body'][_0x25d3a9(0x4f7)](_0x25d3a9(0x592),currentLadder);const _0x1d334a=document['getElementById']('current-ladder-display');_0x1d334a&&(_0x1d334a[_0x25d3a9(0x2f7)]=currentLadder),document[_0x25d3a9(0x293)](_0x25d3a9(0x407))[_0x25d3a9(0x2f7)]='-',document[_0x25d3a9(0x293)](_0x25d3a9(0x395))[_0x25d3a9(0x2f7)]='-',document['getElementById'](_0x25d3a9(0x17c))[_0x25d3a9(0x2f7)]='-',document[_0x25d3a9(0x293)](_0x25d3a9(0x4d0))[_0x25d3a9(0x2f7)]='-',charts[_0x25d3a9(0x1f9)]&&(charts[_0x25d3a9(0x1f9)][_0x25d3a9(0x40c)](),charts[_0x25d3a9(0x1f9)]=null),charts[_0x25d3a9(0x596)]&&(charts[_0x25d3a9(0x596)][_0x25d3a9(0x40c)](),charts[_0x25d3a9(0x596)]=null),showNotification(_0x25d3a9(0x2f5)+currentLadder+_0x25d3a9(0x3a3),_0x25d3a9(0x300));});});const _0x1a9e86=document['getElementById']('current-ladder-display');_0x1a9e86&&(_0x1a9e86[_0x2edaa0(0x2f7)]=currentLadder);}async function loadDashboardOverview(){const _0x286120=a4_0x4f367c;try{console['log'](_0x286120(0x57f)),document['getElementById']('player-count')[_0x286120(0x2f7)]='-',document['getElementById'](_0x286120(0x395))[_0x286120(0x2f7)]='-',document[_0x286120(0x293)]('pending-count')[_0x286120(0x2f7)]='-',document['getElementById']('rejected-count')[_0x286120(0x2f7)]='-';const _0x160cbe=currentLadder==='D1'?_0x286120(0x378):currentLadder==='D2'?_0x286120(0x1b4):'playersD3',_0x7fdba8=currentLadder==='D1'?_0x286120(0x272):currentLadder==='D2'?_0x286120(0x44a):_0x286120(0x4e2),_0x33c3ae=currentLadder==='D1'?_0x286120(0x49d):currentLadder==='D2'?_0x286120(0x1ba):_0x286120(0x517),_0x27ca7a=currentLadder==='D1'?_0x286120(0x1d3):currentLadder==='D2'?'RejectedD2':_0x286120(0x563);console[_0x286120(0x538)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x160cbe+',\x20'+_0x7fdba8);const _0x1fd17b=await getDocs(collection(db,_0x160cbe)),_0x4cd6f6=_0x1fd17b[_0x286120(0x54e)],_0xb917d7=await getDocs(collection(db,_0x7fdba8)),_0xa16a09=_0xb917d7['size'],_0x2d1e02=await getDocs(collection(db,_0x33c3ae)),_0x3382d9=_0x2d1e02[_0x286120(0x54e)],_0x19e7ac=await getDocs(collection(db,_0x27ca7a)),_0x5dbc31=_0x19e7ac[_0x286120(0x54e)];return document['getElementById'](_0x286120(0x407))[_0x286120(0x2f7)]=_0x4cd6f6,document[_0x286120(0x293)]('match-count')[_0x286120(0x2f7)]=_0xa16a09,document[_0x286120(0x293)](_0x286120(0x17c))['textContent']=_0x3382d9,document['getElementById']('rejected-count')[_0x286120(0x2f7)]=_0x5dbc31,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x286120(0x367)),!![];}catch(_0x2f2592){console[_0x286120(0x3fc)](_0x286120(0x38c),_0x2f2592);throw _0x2f2592;}}async function createRankDistributionChart(){const _0x57a797=a4_0x4f367c;try{const _0x8d51c9=collection(db,currentLadder==='D1'?'players':'playersD2'),_0xac82d0=await getDocs(_0x8d51c9),_0x38ed65={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0xac82d0['forEach'](_0x1c7f4f=>{const _0x6bea76=a4_0x51fe,_0x2a3633=_0x1c7f4f[_0x6bea76(0x4e3)](),_0x37f887=_0x2a3633['eloRating']||0x4b0;if(_0x37f887>=0x7d0)_0x38ed65[_0x6bea76(0x275)]++;else{if(_0x37f887>=0x708)_0x38ed65['Gold']++;else{if(_0x37f887>=0x640)_0x38ed65[_0x6bea76(0x3e1)]++;else{if(_0x37f887>=0x578)_0x38ed65[_0x6bea76(0x359)]++;else _0x38ed65[_0x6bea76(0x403)]++;}}}});const _0x439208=document['getElementById'](_0x57a797(0x4b5));charts[_0x57a797(0x1f9)]&&charts[_0x57a797(0x1f9)][_0x57a797(0x40c)](),charts['rankDistribution']=new Chart(_0x439208,{'type':'doughnut','data':{'labels':Object[_0x57a797(0x1d6)](_0x38ed65),'datasets':[{'data':Object[_0x57a797(0x31f)](_0x38ed65),'backgroundColor':[_0x57a797(0x25f),_0x57a797(0x1c0),'#C0C0C0',_0x57a797(0x541),_0x57a797(0x29c)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x57a797(0x4c7),'labels':{'color':_0x57a797(0x16e)}},'title':{'display':!![],'text':currentLadder+_0x57a797(0x3ce),'color':_0x57a797(0x16e),'font':{'size':0x10}}}}});}catch(_0x42614c){console['error'](_0x57a797(0x474),_0x42614c),document['getElementById']('rank-distribution-chart')[_0x57a797(0x533)]=_0x57a797(0x242);}}async function createActivityChart(){const _0x1278d9=a4_0x4f367c;try{const _0x2ca941=currentLadder==='D1'?'approvedMatches':_0x1278d9(0x44a),_0x3c4843=collection(db,_0x2ca941),_0x1dde8c=new Date();_0x1dde8c[_0x1278d9(0x1b0)](_0x1dde8c[_0x1278d9(0x1b8)]()-0x7);const _0x73c47a=query(_0x3c4843,where('approvedAt','>=',_0x1dde8c),orderBy(_0x1278d9(0x3dc),_0x1278d9(0x53d))),_0x3f66c7=await getDocs(_0x73c47a),_0x2aeab9=['Sunday','Monday',_0x1278d9(0x49b),'Wednesday','Thursday',_0x1278d9(0x39e),_0x1278d9(0x333)],_0x1482bb=_0x2aeab9[_0x1278d9(0x548)]((_0x344b3a,_0x47be23)=>({..._0x344b3a,[_0x47be23]:0x0}),{});_0x3f66c7[_0x1278d9(0x2fa)](_0x865bc5=>{const _0x1100e6=_0x1278d9,_0x22aee5=_0x865bc5[_0x1100e6(0x4e3)]();if(_0x22aee5[_0x1100e6(0x3dc)]){const _0x2d04ba=_0x2aeab9[new Date(_0x22aee5[_0x1100e6(0x3dc)][_0x1100e6(0x1e5)]*0x3e8)['getDay']()];_0x1482bb[_0x2d04ba]++;}});const _0xfa4e2b=document[_0x1278d9(0x293)](_0x1278d9(0x435));charts[_0x1278d9(0x596)]&&charts[_0x1278d9(0x596)][_0x1278d9(0x40c)](),charts[_0x1278d9(0x596)]=new Chart(_0xfa4e2b,{'type':'bar','data':{'labels':_0x2aeab9,'datasets':[{'label':_0x1278d9(0x402),'data':_0x2aeab9[_0x1278d9(0x3ac)](_0x8a3001=>_0x1482bb[_0x8a3001]),'backgroundColor':currentLadder==='D1'?_0x1278d9(0x1e6):_0x1278d9(0x286),'borderColor':currentLadder==='D1'?_0x1278d9(0x461):_0x1278d9(0x46e),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x1278d9(0x16e)},'grid':{'color':_0x1278d9(0x24e)}}},'plugins':{'legend':{'labels':{'color':_0x1278d9(0x16e)}},'title':{'display':!![],'text':currentLadder+_0x1278d9(0x345),'color':_0x1278d9(0x16e),'font':{'size':0x10}}}}});}catch(_0x3064fd){console[_0x1278d9(0x3fc)]('Error\x20creating\x20activity\x20chart:',_0x3064fd),document[_0x1278d9(0x293)]('activity-chart')[_0x1278d9(0x533)]=_0x1278d9(0x242);}}async function loadPlayersData(){const _0x33d7bb=a4_0x4f367c,_0x35e783=document['getElementById']('players-table-body');if(!_0x35e783)return;_0x35e783[_0x33d7bb(0x533)]=_0x33d7bb(0x29f);try{let _0x3dcef9=_0x33d7bb(0x378);if(currentLadder==='D2')_0x3dcef9=_0x33d7bb(0x1b4);else currentLadder==='D3'&&(_0x3dcef9=_0x33d7bb(0x31b));console[_0x33d7bb(0x538)]('Loading\x20players\x20from\x20'+_0x3dcef9+_0x33d7bb(0x1f1));const _0x3d438f=collection(db,_0x3dcef9),_0x184e82=query(_0x3d438f,orderBy(_0x33d7bb(0x535),'desc')),_0x2da04e=await getDocs(_0x184e82);if(_0x2da04e['empty']){_0x35e783['innerHTML']=_0x33d7bb(0x32a);return;}_0x35e783[_0x33d7bb(0x533)]='';let _0x3ce45d=0x1;_0x2da04e[_0x33d7bb(0x2fa)](_0x8c801d=>{const _0x529dfb=_0x33d7bb,_0xbdccfc=_0x8c801d[_0x529dfb(0x4e3)](),_0x5e43ad=getRankFromElo(_0xbdccfc[_0x529dfb(0x535)]||0x4b0),_0x7c000=getRankStyle(_0xbdccfc[_0x529dfb(0x535)]||0x4b0),_0x3de83c=document['createElement']('tr');_0x3de83c[_0x529dfb(0x533)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x3ce45d+_0x529dfb(0x2c9)+_0x7c000[_0x529dfb(0x354)]+_0x529dfb(0x56c)+(_0xbdccfc[_0x529dfb(0x521)]||'Unknown')+_0x529dfb(0x4d8)+(_0xbdccfc[_0x529dfb(0x535)]||0x4b0)+_0x529dfb(0x376)+_0x7c000[_0x529dfb(0x354)]+_0x529dfb(0x2e2)+_0x5e43ad+_0x529dfb(0x3eb)+(_0xbdccfc[_0x529dfb(0x222)]||0x0)+_0x529dfb(0x525)+(_0xbdccfc['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x8c801d['id']+_0x529dfb(0x330)+_0x8c801d['id']+_0x529dfb(0x1a6),_0x35e783[_0x529dfb(0x243)](_0x3de83c),_0x3ce45d++;}),setupPlayerActionButtons();}catch(_0x1e7e13){console[_0x33d7bb(0x3fc)]('Error\x20loading\x20players:',_0x1e7e13),_0x35e783[_0x33d7bb(0x533)]=_0x33d7bb(0x371)+_0x1e7e13[_0x33d7bb(0x1fa)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x40a8ab){const _0x23a0c0=a4_0x4f367c;if(_0x40a8ab>=0x7d0)return'Emerald';if(_0x40a8ab>=0x708)return _0x23a0c0(0x292);if(_0x40a8ab>=0x640)return'Silver';if(_0x40a8ab>=0x578)return _0x23a0c0(0x359);return _0x23a0c0(0x403);}function setupPlayerActionButtons(){const _0x4e4b21=a4_0x4f367c;document[_0x4e4b21(0x201)](_0x4e4b21(0x329))[_0x4e4b21(0x2fa)](_0x2d0410=>{const _0x2561e8=_0x4e4b21;_0x2d0410[_0x2561e8(0x4e9)](_0x2561e8(0x37e),async _0x3124c2=>{const _0x238b4b=_0x2561e8,_0x125774=_0x3124c2[_0x238b4b(0x249)][_0x238b4b(0x2cd)]['id'];openEditPlayerModal(_0x125774);});}),document[_0x4e4b21(0x201)]('.delete-btn')[_0x4e4b21(0x2fa)](_0x368aec=>{const _0x425772=_0x4e4b21;_0x368aec['addEventListener'](_0x425772(0x37e),async _0x91ebd8=>{const _0x55d413=_0x425772,_0x67b2da=_0x91ebd8[_0x55d413(0x249)][_0x55d413(0x2cd)]['id'];confirmDeletePlayer(_0x67b2da);});});}async function openEditPlayerModal(_0x471d92){const _0x2bf83e=a4_0x4f367c;try{const _0x4f2e94=currentLadder==='D1'?_0x2bf83e(0x378):'playersD2',_0x5c8859=doc(db,_0x4f2e94,_0x471d92),_0x161ff3=await getDoc(_0x5c8859);if(!_0x161ff3['exists']()){showNotification('Player\x20not\x20found',_0x2bf83e(0x3fc));return;}const _0x35e2d7=_0x161ff3[_0x2bf83e(0x4e3)](),_0xd6ea2c=document[_0x2bf83e(0x293)]('edit-player-modal'),_0x586854=document[_0x2bf83e(0x293)](_0x2bf83e(0x37f)),_0x4f1a99=document[_0x2bf83e(0x293)](_0x2bf83e(0x46a)),_0x247eb4=document[_0x2bf83e(0x293)](_0x2bf83e(0x4ac)),_0x4cabd2=document[_0x2bf83e(0x293)](_0x2bf83e(0x1f6));_0x586854[_0x2bf83e(0x34b)]=_0x35e2d7[_0x2bf83e(0x521)]||'',_0x4f1a99[_0x2bf83e(0x34b)]=_0x35e2d7[_0x2bf83e(0x535)]||0x4b0,_0x247eb4[_0x2bf83e(0x34b)]=_0x35e2d7[_0x2bf83e(0x222)]||0x0,_0x4cabd2[_0x2bf83e(0x34b)]=_0x35e2d7[_0x2bf83e(0x291)]||0x0,_0xd6ea2c['dataset'][_0x2bf83e(0x471)]=_0x471d92,_0xd6ea2c[_0x2bf83e(0x328)][_0x2bf83e(0x2ff)](_0x2bf83e(0x560));}catch(_0x24cb99){console[_0x2bf83e(0x3fc)](_0x2bf83e(0x3dd),_0x24cb99),showNotification(_0x2bf83e(0x34e),_0x2bf83e(0x3fc));}}function a4_0x2b57(){const _0x3def68=['edit-match-map','edit-match-modal','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','edit-elo','Error','none','backgroundColor','#1976d2','\x20total\x20players\x20in\x20the\x20','#elo-history-table-body\x20tr','playerId','role-username','articles-table-body','Error\x20creating\x20rank\x20distribution\x20chart:','Edit\x20match\x20clicked:','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','constructor','body','Edit\x20Match:\x20','elo','No\x20email','TestMap','Toggling\x20fields\x20for\x20highlight\x20type:\x20','highlight-id','create-test-match-btn','Article\x20updated\x20successfully','edit-highlight-achievementDetails-input','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','Untitled\x20Trophy','Successfully\x20promoted\x20','trophyDefinitions','promote-ladder','Modal\x20cancel\x20button\x20clicked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','toISOString','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loserUsername','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','removeEventListener','userTrophies','result','input[name=\x22test-match-ladder\x22]','loserScore','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','ribbon-level','desc','resimulate-modal','then','Points\x20field\x20initialized\x20for\x20','\x20vs\x20','Attaching\x20background\x20click\x20listener.','highlight-form','Tuesday','Error\x20opening\x20assign\x20trophy\x20modal:','pendingMatches','loading-cell','highlight-match-date-container','subtract','Manage\x20Points\x20section\x20initialized','Firebase\x20connection\x20test\x20failed:','<div\x20class=\x22loading\x22>Searching...</div>','.remove-ribbon-btn','#players.content-section.active','newElo','Trophy\x20updated\x20successfully','Updated\x20ELO\x20ratings:\x20Winner\x20','Store\x20item\x20awarded\x20successfully','Load\x20matches\x20data\x20clicked','elo-history','edit-wins','Error\x20loading\x20inactive\x20players:','<span\x20class=\x22no-role\x22>None</span>','__proto__','article-title','\x20ladder,\x20page\x20','create-new-article-btn','match-details-container','highlight-achievement-type','rank-distribution-chart','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','trophies-table-body','data-id','removeAttribute','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','Player\x20deleted\x20successfully','highlight-winner-name','.empty-state','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','❌\x20Missing','Role\x20\x27','includes','D3\x20Players','manage-players','submit','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','Trophy\x20created\x20successfully','right','non-participant','reason','highlight-match-link-container','-prev-page','trophy-modal','date','d2-prev-page','commit','rejected-count','test','Error\x20resimulating\x20match:','user-search-results','role','Create\x20test\x20match\x20modal\x20not\x20found','\x20for\x20points\x20initialization','user-search','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','role-name','user-roles-section','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Quick\x20edit\x20form\x20not\x20found!','change','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','inactive-players-table-body','Failed\x20to\x20delete\x20article:\x20','string','approvedMatchesD3','data','promote-modal','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','387GCAyts','substring','Highlight','addEventListener','refresh-points-overview','\x20points','Article\x20not\x20found','Simple\x20test\x20match\x20created\x20successfully','quick-edit-user-id','search-ribbon-user-btn','.close-btn','achievementImageUrl','highlight-submitted-by','highlight-map-creator-container','resimulateMatch','key','.delete-trophy-btn','setAttribute','\x20already\x20exists\x20in\x20','data-match-id','Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...','highlight-title-container','load-matches-data','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','Title\x20and\x20content\x20are\x20required','ribbon-target-ladder','Error\x20initializing\x20dashboard:','title','1200','demote-modal','load-trophies-data','-next-page','YouTube\x20Video\x20ID*','edit-match-loser-comment','No\x20users\x20found\x20in\x20userProfiles\x20collection','quick-edit-points-form','winnerComment','Username\x20is\x20missing','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','replaceChild','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','playerProfileUrl','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','Highlight\x20deleted\x20successfully','Username\x20','sources','assign-trophy-description','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','pendingMatchesD3','Error\x20loading\x20match\x20for\x20deletion:','Error\x20loading\x20trophy\x20data:','Error\x20loading\x20articles:','Manage\x20Ribbons\x20section\x20initialized','Error\x20modifying\x20points:','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','add-ribbon-form','player-search','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','username','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','Found\x20user\x20in\x20','Firebase\x20connection\x20test\x20successful!','W\x20/\x20','Player\x20Achievement','Found\x20','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','mapPlayed','search','\x20view\x20history\x20buttons','Auth:','highlight-map-version','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','Error\x20searching\x20for\x20user','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','promote-form','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','innerHTML','highlight-loser-name','eloRating','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','View\x20player\x20details\x20for\x20','log','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','name','Setting\x20up\x20Manage\x20Points\x20section','Loading\x20user\x20data...','asc','eloHistory','trophy-form','name-desc','#FFD700','.username','Failed\x20to\x20load\x20points\x20data:\x20','assign-trophy-id','img','Unknown','selected-user-id','reduce','\x20ELO\x20history\x20entries.\x20','Failed\x20to\x20save\x20article:\x20','\x20(from\x20','#ffffff','closeResimulateModal','size','return\x20(function()\x20','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','edit-highlight-winnerName-input','Create\x20Article','#users-table-body\x20tr','.loading-cell','loading','endDate','create-achievement-highlight-btn','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20','UserProfile','Won','page','edit-match-loser-demo','modify-points-form','.view-player-btn','\x20to\x20','active','loserName','Failed\x20to\x20save\x20match:\x20','RejectedD3','./promotions.js','quick-points-amount','firstVisible','Error\x20loading\x20players:','quick-edit-current-points','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-match-ladder','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.nav-item','Failed\x20to\x20load\x20article\x20data','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','Player\x20updated\x20successfully','demotion','set-role-modal','\x20added\x20successfully\x20to\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','Points\x20action\x20buttons\x20setup\x20complete','fa-info-circle','Adding\x20player\x20','create-test-match-form','Error\x20assigning\x20trophy:','Achievement\x20highlight\x20button\x20clicked','Positions\x20updated:\x20Winner\x20','docs','\x20not\x20found\x20in\x20any\x20ladder','Role\x20\x22','Loading\x20dashboard\x20overview\x20data...','highlight-loser-score','edit-match-title','getAttribute','displayName','exists','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','adminEmail','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','trophy-image-url','matchLink','Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM','non-participants','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','Error\x20in\x20demotion:','Error\x20removing\x20ribbon','edit-match-winner-score','Unknown\x20Player','\x20quick\x20edit\x20buttons','data-ladder','match-type',';\x22>','description','activity','points-overview-table-body','timestamp','playerRibbonsD2','Error\x20loading\x20trophies:','highlight-map-creator','unknown','preventDefault','data-section','negative-change','highlight-achievement-image-container','edit-match-winner-suicides','Error\x20saving\x20highlight:','highlight-map-version-container','Unknown\x20Admin','.edit-ribbons-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','highlight-creator-image','location','edit-highlight-type-select','onAuthStateChanged','src','Creating\x20test\x20match\x20without\x20player\x20validation...','playerRibbonsD3','set-elo-username','demote-player-btn','Failed\x20to\x20update\x20points:\x20','moderately-inactive','assign-trophy-name','</span>','6433500JokxTf','.player','Error\x20initializing\x20points\x20field:','rarity','\x20-\x20','Error\x20setting\x20user\x20role:','match','manage-highlights','error-state','User\x20data\x20loaded:','.sidebar-nav\x20.nav-item','Create\x20test\x20match\x20form\x20not\x20found','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','MAX_SAFE_INTEGER','No\x20position\x20changes\x20needed.','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','Searching\x20for\x20player\x20in\x20','#e0e0e0','empty','edit-highlight-matchLink-input','points-amount','Displaying\x20','padding','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','toLocaleDateString','Closing\x20create\x20test\x20match\x20modal','warn','Load\x20articles\x20data\x20clicked','max','\x20users...','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','pending-count','trophy-preview-img','closest','article-image-url','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','Match\x20deleted\x20successfully','Error\x20adding\x20ribbon:','Loser\x20','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','display','edit-highlight-playerProfileUrl-input','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','Setting\x20permissions\x20based\x20on\x20role:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','Test\x20match','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','cancel-assign-btn','creator','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','points-desc','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','userAllowedTabs','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','Processing\x20points\x20edit:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','highlight-player-profile-container',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','load-ribbons-data','\x20→\x20','Loaded\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','has','Modal\x20close\x20button\x20clicked',';\x20color:\x20','Added\x20','quick-points-reason','add-player-form','querySelector','Failed\x20to\x20delete\x20player:\x20','user-ribbon-management','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20resolving\x20username\x20for\x20','awardedAt','contains','common','ribbons','highlight-map','Remove\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','trophy-preview-container','setDate','\x20in\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','playersD2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','current-ribbon-user','\x20with\x20email\x20','getDate','#28a745','pendingMatchesD2','highlight-achievement-details','Failed\x20to\x20load\x20user\x20data:\x20','Setting\x20up\x20Manage\x20Ribbons\x20section','notification\x20','Found\x20player\x20with\x20current\x20ELO:\x20','#CD7F32','Failed\x20to\x20award\x20item:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','type','assign-trophy-modal','load-inactive-players-data','cells','User\x20','Initializing\x20points\x20field\x20for\x20user\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','highlight-video-preview-container','email','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','Failed\x20to\x20resimulate\x20match:\x20','validation-results-container','Opening\x20create\x20test\x20match\x20modal','fa-exclamation-triangle','Never\x20played','points-user-search','RejectedD1','Error\x20initializing\x20admin\x20dashboard:','YouTube\x20Video\x20ID\x20(Optional)','keys','promote-username','points-sort-order','Failed\x20to\x20find\x20match:\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','winnerUsername','Loading...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22','cancel-set-elo-btn','afterend','Edit\x20','highlight-video-preview','player','Article\x20deleted\x20successfully','Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...','seconds','rgba(211,\x2047,\x2047,\x200.7)','\x20users\x20already\x20had\x20points.','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','lastMatch','highlight-players-container','load-highlights-data','push','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-highlight-id','Unknown\x20User','highlight-type','\x20collection...','0.6','.delete-match-btn','Highlight\x20updated\x20successfully!','.error-state','edit-losses','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','selected-user-points','rankDistribution','message','achievement','roleColor','Error\x20deleting\x20trophy\x20definition:','confirm-resimulate-btn','Load\x20highlights\x20data\x20clicked','Error\x20loading\x20article\x20data:','querySelectorAll','ribbon','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','#inactive-players-table-body\x20tr','\x20before\x20match:\x20','input','roleAssignedAt','players-ladder-selector','.section-header','Edit\x20Article','trophy-image-preview','createdBy','Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.','high-points','Setting\x20up\x20highlight\x20buttons','Page\x20','pendingResimulateData','positive-change','ribbon-target-user','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','-page-indicator','Error\x20loading\x20user\x20points\x20history:','article-content','createElement','warning','toLocaleString','✅\x20Exists','Form\x20elements\x20are\x20missing','no-results','NonParticipant','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','Error\x20loading\x20history:','#players-table-body\x20tr','wins','Error\x20loading\x20ribbons:','updatedAt','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','\x22\x20data-ladder=\x22','new-player-username','Quick\x20edit\x20form\x20submitted','remove','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','Error\x20initializing\x20points:\x20','Please\x20fill\x20all\x20fields','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','entries','split','input[name=\x22demote-ladder\x22]:checked','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','imageUrl','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>','edit-highlight-title-input','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','\x20users','\x20history\x20entries\x20for\x20user\x20','\x22\x20already\x20has\x20this\x20trophy','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','Load\x20history\x20data\x20clicked','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','article-author','award-reason','941109LEpRVY','position','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','appendChild','Collection\x20reference\x20created:','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','Player\x20not\x20found\x20in\x20','get','5525620zifDSu','currentTarget','Non-Participant','highlight-achievement-image','previousElementSibling','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','rgba(255,\x20255,\x20255,\x200.1)','Error\x20demoting\x20player:\x20','Points\x20modified\x20successfully','Updating\x20role\x20for\x20','localeCompare','from','loserComment','edit-match-winner-demo','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','matches-next-page','all','Please\x20enter\x20a\x20valid\x20username','\x22\x20set','highlight-modal-title','matchDate','No\x20matches\x20found','role-filter','#808080','Error\x20checking\x20','12176OYiFVj','\x20users.\x20','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','\x27</td>','name-asc','\x20-\x20Feature\x20coming\x20soon','Error\x20loading\x20users:','winnerScore','matches-start-date','.no-results','fa-check-circle','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','match_result','#article-modal\x20.close-btn','console','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-match-info','approvedMatches','Error\x20loading\x20highlights:','edit-match-loser','Emerald','load-articles-data','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','demote-username','manage-trophies','winnerName','manage-points','5px','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20','cancel-article-btn','reset-history-filters','test-match-winner-username','Failed\x20to\x20delete\x20match:\x20','length','load-dashboard-data','Error\x20deleting\x20article:','rgba(25,\x20118,\x20210,\x200.7)','Error\x20adding\x20ribbon','TestWinner','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','cancel-highlight-btn','Load\x20inactive\x20players\x20data\x20clicked','.ladder-switch\x20input','\x20points\x20history\x20entries','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20ribbons\x20data','losses','Gold','getElementById','Match\x20not\x20found','Player\x20Name\x20is\x20required','D1\x20Players','847ILFBOa','User\x20has\x20','Modal\x20closed','Error\x20updating\x20points:','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','#50C878','loserSuicides','Error\x20applying\x20filters:','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','Current\x20user:','assign-trophy-form','nonParticipants','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Deleting\x20match...','hidden','new-player-elo','\x20inactive\x20players','create-match-highlight-btn','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','Error\x20updating\x20player:','inactive-days-filter','Modal\x20should\x20now\x20be\x20visible','matches-prev-page','className','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','previousPoints','Failed\x20to\x20load\x20match\x20data','\x20section','level','medium-points','trophyId','style','points-management-forms','Article\x20created\x20successfully','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','rgba(255,\x20193,\x207,\x200.1)',').\x20','Committing\x20batch\x20update\x20for\x20','Starting\x20complete\x20match\x20resimulation...','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','ladder','Error\x20saving\x20match:','highlight-achievement-type-container','lastUpdated','Featured\x20Creator','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','eloHistoryD2','flex','\x20(+','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','history-end-date','Error\x20loading\x20points\x20overview:','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','dataset','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','5tFvniO','set-elo-value','matches-page-indicator','parentNode','User\x20Profiles','Map\x20Creator\x20is\x20required','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','.view-history-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','.admin-action','Untitled','Set\x20to\x20','Error\x20loading\x20highlight:','highly-inactive','Cancel\x20button\x20not\x20found','Match\x20ID\x20or\x20ladder\x20missing','loss','highlight-map-container','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#matches-table-body\x20tr','achievementType','trophy-name','demotedBy','\x20from\x20','Failed\x20to\x20load\x20trophy\x20data','empty-state','roleAssignedBy','Please\x20enter\x20a\x20username','set','edit-highlight-map-input','sort','resimulate-match-btn','creatorImageUrl','block','edit-match-winner','cancel-promote-btn','trophy-modal-title','Switched\x20to\x20','users-table-body','textContent','Match\x20updated\x20successfully','Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','forEach','sendPromotionNotification','Setting\x20up\x20create\x20test\x20match\x20button','highlight-video-id','No\x20ELO\x20history\x20found\x20for\x20player\x20','add','info','Modal\x20background\x20clicked','Attempting\x20to\x20promote\x20','quick-edit-points-modal','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','winnerSuicides','setHours','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','Load\x20users\x20data\x20clicked','article-modal-title','matches-end-date','cloneNode','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','getRankName','.ladder-switch\x20input[value=\x22D2\x22]','apply-matches-filters','Trophy\x20\x22','Creator','submittedBy','\x20(winner)\x20vs\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','\x20with\x20ELO\x20','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','set-elo-ladder','playersD3','.close-notification','points-reason','startDate','values','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','reset-matches-filters','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','Failed\x20to\x20load\x20user\x20history','(((.+)+)+)+$','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','20px','classList','.edit-btn','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','You\x20must\x20be\x20logged\x20in','Testing\x20Firebase\x20connection...','</td></tr>','#cancel-create-test-match-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','achievementPlayer','Lost','Saturday','Error\x20opening\x20quick\x20edit\x20modal:','load-users-data','ribbon-type-select','8834409IrfLUP','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','3331182LVDszT','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','manage-articles','Modal\x20element\x20found:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','inactive-players-search','inactive-players','article-id','Failed\x20to\x20modify\x20points:\x20','edit-player-modal','getComputedStyle','\x20Weekly\x20Activity','edit-highlight-mapVersion-input','admin','load-players-data','.sidebar-nav\x20.nav-item[data-section=\x22','visibility','value','creator-type','User\x20not\x20found','Failed\x20to\x20load\x20player\x20data','cancel-trophy-btn','Query\x20created:','Demotion','.delete-article-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','color','highlight-achievement-details-container','assign-trophy-image','\x20(based\x20on\x20data-role:\x20','opacity','Bronze','Profile','ELO\x20rating\x20for\x20','Adding\x20\x22active\x22\x20class\x20to\x20modal.','highlight-match-info-container','Successfully\x20demoted\x20','highlight-achievement-player','No\x20specific\x20permissions\x20for\x20user\x20','previousElo','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','\x22\x20awarded\x20to\x20','amount','Error\x20deleting\x20player:','DOMContentLoaded','Dashboard\x20data\x20loaded\x20successfully','highlight-match-date','Found\x20radio\x20with\x20value:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','Could\x20not\x20find\x20player\x20documents','Deleting\x20match\x20','Unauthorized:\x20Admin\x20access\x20required','Points\x20data\x20loaded\x20successfully','Please\x20enter\x20valid\x20data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20','initial_placement','matches-search','article-modal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','daysSinceMatch','players','quick-edit-email','d2-next-page','confirmResimulateMatch','join','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','click','edit-username','),\x20','assign-player-username','Error\x20adding\x20player:\x20','Attaching\x20cancel\x20button\x20listener.','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','elo-history-search','\x20allowed\x20tabs:','keypress','.edit-highlight-btn','table','articles','lastPointsModified','Error\x20loading\x20dashboard\x20data:','Create\x20test\x20match\x20button\x20setup\x20complete','admin_modification','{}.constructor(\x22return\x20this\x22)(\x20)','Player\x20\x22','cancel-role-btn','searchTerm','Attempting\x20to\x20demote\x20','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','match-count','quick-add','d1-prev-page','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','.edit-trophy-btn','toString','author','Modal\x20opened\x20successfully','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','Friday','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','roleName','\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','save-player-btn','videoId','.quick-edit-btn','highlight-winner-score','resimulate-match-id','View\x20history\x20clicked\x20for\x20user:','success','history-type-filter','map','System','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','delete-match-confirm-modal','Error\x20saving\x20highlight:\x20','TestLoser','N/A','ref','manage-ribbons','edit-highlight-achievementType-input','Setting\x20up\x20Manage\x20Highlights\x20section','Promotion','fa-exclamation-circle','filter','Failed\x20to\x20update\x20player:\x20','highlights','points-overview-search','edit-highlight-loserScore-input','\x20ladder','Edit\x20Trophy','demoLink','pointsHistory','Points\x20updated\x20successfully','replace','Page\x201','Match\x20Highlight','No\x20user\x20ID\x20found\x20on\x20button','points','Error\x20promoting\x20player:\x20','ribbons-overview-table-body','ribbon-user-search','alt','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Sidebar\x20navigation\x20initialized\x20with\x20permissions','\x20Rank\x20Distribution','user-role','No\x20player\x20selected','href','Error\x20loading\x20ELO\x20history:','Error\x20promoting\x20player:','.assign-trophy-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','Ribbons\x20data\x20loaded\x20successfully','Simple\x20test\x20match\x20created\x20by\x20admin\x20','eloHistoryD3','focus','uid','approvedAt','Error\x20opening\x20edit\x20modal:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','mapVersion','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','Silver','Never',',\x20giving\x20default\x20access','matchId','\x27\x20has\x20permissions:','Error\x20awarding\x20item:','#000000','Load\x20players\x20data\x20clicked','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','delete-match-summary','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel-edit-btn','openResimulateModal\x20called!','currentUser','Failed\x20to\x20assign\x20trophy:\x20','d1-next-page','edit-highlight-matchDate-input','.edit-role-btn','Quick\x20edit\x20clicked\x20for\x20user:','points-history-table-body','Error\x20loading\x20points\x20data:','Error\x20demoting\x20player:','trim','Created\x20','Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:','highlight-match-link','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','error','mapCreator','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','action','stopPropagation','15342raspuk','Matches\x20Played','Unranked','apply','Please\x20enter\x20valid\x20username\x20and\x20ELO','Error\x20deleting\x20match:','player-count','reset','paste','update','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>','destroy','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','edit-match-id','User\x20\x22','Found\x20ELO\x20history\x20for\x20player\x20','.delete-highlight-btn','catch','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','Error:\x20','\x20for\x20user\x20\x22','edit-match-loser-score','Winner\x20and\x20loser\x20usernames\x20are\x20required','\x20in\x20all\x20collections...','highlight-player-profile','edit-match-winner-comment','div','assign-trophy-rarity','create-new-trophy-btn','onerror','dashboard','required','mapName','trophy-rarity','elo-history-table-body','achievementDetails','fromDate','create-test-match-modal','Set\x20default\x20ladder\x20to:','Match\x20ID\x20is\x20required','trophy-description','No\x20users\x20needed\x20points\x20field\x20initialization','Error\x20finding\x20match:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','edit-highlight-videoId-input','edit-match-loser-suicides','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20','checked','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again','highlight-video-container','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','activity-chart','image','Error\x20adding\x20player:','userId','highlight-modal','createdAt','userProfiles','edit-highlight-achievementPlayer-input','search-result-item','Error\x20loading\x20highlight:\x20','newPoints','.close','set-elo-btn','manage-matches','store-item-select','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','lastVisible','Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.','toLowerCase','input[name=\x22quick-action\x22]:checked','Error\x20searching\x20users:','approvedMatchesD2','find','cancel-quick-edit','.admin-section','target','modifiedBy','playerRibbons','load-elo-history-data','Error\x20loading\x20matches:','matchInfo','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>','promotion','\x20users\x20to\x20check...','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','Looking\x20for\x20user\x20role\x20information\x20for\x20','toDate','prototype','.edit-match-btn','allUsersPoints','Trophy\x20ID\x20and\x20username\x20are\x20required','disabled','#highlight-modal\x20.close-btn','Create\x20New\x20Trophy','#d32f2f','Setting\x20up\x20matches\x20action\x20buttons...','award-item-form','Trophy\x20not\x20found','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','history-start-date'];a4_0x2b57=function(){return _0x3def68;};return a4_0x2b57();}async function saveEditedPlayer(){const _0x35e2f0=a4_0x4f367c;try{const _0x1333ef=document[_0x35e2f0(0x293)](_0x35e2f0(0x343)),_0x2c180c=_0x1333ef[_0x35e2f0(0x2cd)][_0x35e2f0(0x471)];if(!_0x2c180c){showNotification(_0x35e2f0(0x3d0),'error');return;}const _0x189951=document[_0x35e2f0(0x293)](_0x35e2f0(0x37f)),_0x2ab059=document['getElementById'](_0x35e2f0(0x46a)),_0x21d6da=document[_0x35e2f0(0x293)](_0x35e2f0(0x4ac)),_0x484e6c=document[_0x35e2f0(0x293)]('edit-losses'),_0x3306f6=_0x189951[_0x35e2f0(0x34b)][_0x35e2f0(0x3f7)](),_0xf27618=parseInt(_0x2ab059['value']),_0x3ae2e1=parseInt(_0x21d6da['value']),_0x546913=parseInt(_0x484e6c[_0x35e2f0(0x34b)]);if(!_0x3306f6||isNaN(_0xf27618)){showNotification(_0x35e2f0(0x405),'error');return;}const _0x46bf4b=currentLadder==='D1'?_0x35e2f0(0x378):_0x35e2f0(0x1b4),_0x16d7dd=doc(db,_0x46bf4b,_0x2c180c),_0x1c307c=await getDoc(_0x16d7dd),_0x14cee7=_0x1c307c['exists']()?_0x1c307c[_0x35e2f0(0x4e3)]():{},_0x1f8222=_0x14cee7[_0x35e2f0(0x535)]||0x4b0;await updateDoc(_0x16d7dd,{'username':_0x3306f6,'eloRating':_0xf27618,'wins':_0x3ae2e1||0x0,'losses':_0x546913||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0xf27618!==_0x1f8222){const _0x45f2c8=currentLadder==='D1'?_0x35e2f0(0x53e):_0x35e2f0(0x2c6);await addDoc(collection(db,_0x45f2c8),{'player':_0x3306f6,'previousElo':_0x1f8222,'newElo':_0xf27618,'timestamp':serverTimestamp(),'type':_0x35e2f0(0x38e),'modifiedBy':auth[_0x35e2f0(0x3ee)]['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x35e2f0(0x570),_0x35e2f0(0x3aa));}catch(_0x5a0b33){console[_0x35e2f0(0x3fc)](_0x35e2f0(0x2aa),_0x5a0b33),showNotification(_0x35e2f0(0x3ba)+_0x5a0b33[_0x35e2f0(0x1fa)],_0x35e2f0(0x3fc));}}function closeEditPlayerModal(){const _0x5af565=a4_0x4f367c,_0x4db1a2=document[_0x5af565(0x293)](_0x5af565(0x343));_0x4db1a2['classList'][_0x5af565(0x22a)](_0x5af565(0x560)),_0x4db1a2[_0x5af565(0x2cd)]['playerId']='';}async function confirmDeletePlayer(_0x51f156){const _0x459778=a4_0x4f367c;if(confirm(_0x459778(0x51d)))try{const _0x2ac790=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x2ac790,_0x51f156)),loadPlayersData(),showNotification(_0x459778(0x4bb),_0x459778(0x3aa));}catch(_0x4494bf){console[_0x459778(0x3fc)](_0x459778(0x365),_0x4494bf),showNotification(_0x459778(0x1a4)+_0x4494bf[_0x459778(0x1fa)],_0x459778(0x3fc));}}async function setupManagePlayersSection(){const _0x43fae5=a4_0x4f367c,_0x53c4ec=document[_0x43fae5(0x293)]('add-player-form');_0x53c4ec&&_0x53c4ec['addEventListener']('submit',async _0x1d64e1=>{const _0x3b90ea=_0x43fae5;_0x1d64e1[_0x3b90ea(0x59d)](),await addNewPlayer();});const _0x45e52c=document['getElementById'](_0x43fae5(0x51f));_0x45e52c&&_0x45e52c['addEventListener'](_0x43fae5(0x206),debounce(filterPlayerTable,0x12c));const _0x57be96=document[_0x43fae5(0x293)](_0x43fae5(0x3a4));_0x57be96&&_0x57be96[_0x43fae5(0x4e9)](_0x43fae5(0x37e),saveEditedPlayer);const _0x2579c7=document[_0x43fae5(0x293)](_0x43fae5(0x3ec));_0x2579c7&&_0x2579c7['addEventListener']('click',closeEditPlayerModal);const _0x16dc05=document['getElementById'](_0x43fae5(0x343));_0x16dc05&&_0x16dc05['addEventListener'](_0x43fae5(0x37e),_0x41171a=>{const _0x332c28=_0x43fae5;_0x41171a[_0x332c28(0x44e)]===_0x16dc05&&closeEditPlayerModal();});const _0x4853b6=document[_0x43fae5(0x293)](_0x43fae5(0x208));_0x4853b6&&_0x4853b6[_0x43fae5(0x4e9)](_0x43fae5(0x4dd),()=>{const _0x232989=_0x43fae5;currentLadder=_0x4853b6[_0x232989(0x34b)],loadPlayersData();});}async function addNewPlayer(){const _0x1898bc=a4_0x4f367c;try{const _0x40fd0e=document['getElementById'](_0x1898bc(0x228)),_0x52fbc4=document[_0x1898bc(0x293)](_0x1898bc(0x2a6)),_0x2397d8=_0x40fd0e[_0x1898bc(0x34b)]['trim'](),_0x52220f=parseInt(_0x52fbc4['value'])||0x4b0;if(!_0x2397d8){alert(_0x1898bc(0x259));return;}console['log'](_0x1898bc(0x577)+_0x2397d8+_0x1898bc(0x317)+_0x52220f+_0x1898bc(0x55f)+currentLadder+_0x1898bc(0x3be));let _0x5e5b6c=_0x1898bc(0x378),_0x5070cc=_0x1898bc(0x53e);if(currentLadder==='D2')_0x5e5b6c=_0x1898bc(0x1b4),_0x5070cc=_0x1898bc(0x2c6);else currentLadder==='D3'&&(_0x5e5b6c=_0x1898bc(0x31b),_0x5070cc=_0x1898bc(0x3d9));const _0x3d253f=query(collection(db,_0x5e5b6c),where('username','==',_0x2397d8)),_0x4ffe5b=await getDocs(_0x3d253f);if(!_0x4ffe5b[_0x1898bc(0x16f)]){alert(_0x1898bc(0x513)+_0x2397d8+_0x1898bc(0x4f8)+currentLadder+'\x20ladder');return;}const _0x58127f=auth[_0x1898bc(0x3ee)],_0x266acf={'username':_0x2397d8,'eloRating':_0x52220f,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x58127f?_0x58127f[_0x1898bc(0x1cb)]:_0x1898bc(0x347),'gameMode':currentLadder};await addDoc(collection(db,_0x5e5b6c),_0x266acf),await addDoc(collection(db,_0x5070cc),{'player':_0x2397d8,'previousElo':0x4b0,'newElo':_0x52220f,'timestamp':serverTimestamp(),'type':_0x1898bc(0x372),'placedBy':_0x58127f?_0x58127f[_0x1898bc(0x1cb)]:_0x1898bc(0x347),'gameMode':currentLadder}),_0x40fd0e[_0x1898bc(0x34b)]='',_0x52fbc4[_0x1898bc(0x34b)]=_0x1898bc(0x502),alert('Player\x20'+_0x2397d8+_0x1898bc(0x573)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x2fab62){console[_0x1898bc(0x3fc)](_0x1898bc(0x437),_0x2fab62),alert(_0x1898bc(0x382)+_0x2fab62['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x3c41c6=a4_0x4f367c,_0x149d86=document[_0x3c41c6(0x293)](_0x3c41c6(0x1a2));_0x149d86&&_0x149d86[_0x3c41c6(0x4e9)](_0x3c41c6(0x4c4),_0x1633cf=>{const _0x4a41e4=_0x3c41c6;_0x1633cf[_0x4a41e4(0x59d)](),addNewPlayer();});});function filterPlayerTable(){const _0x5b8a9b=a4_0x4f367c,_0xe2c015=document[_0x5b8a9b(0x293)](_0x5b8a9b(0x51f))['value'][_0x5b8a9b(0x447)](),_0x57d7f1=document['querySelectorAll'](_0x5b8a9b(0x221));let _0x5b8600=0x0;_0x57d7f1['forEach'](_0x37a64c=>{const _0x367d5d=_0x5b8a9b,_0x2ead6a=_0x37a64c[_0x367d5d(0x1a3)](_0x367d5d(0x542))?.[_0x367d5d(0x2f7)][_0x367d5d(0x447)]()||'';_0x2ead6a[_0x367d5d(0x4c1)](_0xe2c015)?(_0x37a64c['style'][_0x367d5d(0x185)]='',_0x5b8600++):_0x37a64c[_0x367d5d(0x2b6)][_0x367d5d(0x185)]=_0x367d5d(0x46c);});const _0x3f0299=document['getElementById']('no-results-message');_0x3f0299&&(_0x5b8600===0x0&&_0xe2c015!==''?_0x3f0299[_0x5b8a9b(0x2b6)][_0x5b8a9b(0x185)]='block':_0x3f0299[_0x5b8a9b(0x2b6)][_0x5b8a9b(0x185)]=_0x5b8a9b(0x46c));}function debounce(_0x5a6a99,_0x2e3cb2){let _0x53f35c;return function(..._0x591285){const _0x43807f=a4_0x51fe;clearTimeout(_0x53f35c),_0x53f35c=setTimeout(()=>_0x5a6a99[_0x43807f(0x404)](this,_0x591285),_0x2e3cb2);};}async function loadEloHistory(_0x2baf14=0x1){const _0x458b9f=a4_0x4f367c,_0x5c04de=document['getElementById'](_0x458b9f(0x423)),_0x11dcbb=currentLadder[_0x458b9f(0x447)]();if(!_0x5c04de)return;_0x5c04de[_0x458b9f(0x533)]=_0x458b9f(0x30d);try{const _0x4cf691=currentLadder==='D1'?_0x458b9f(0x53e):currentLadder==='D2'?_0x458b9f(0x2c6):_0x458b9f(0x3d9),_0x178f1c=collection(db,_0x4cf691);let _0x39b0d3;if(_0x2baf14>eloHistoryPagination[_0x11dcbb][_0x458b9f(0x55b)]&&eloHistoryPagination[_0x11dcbb][_0x458b9f(0x445)])_0x39b0d3=query(_0x178f1c,orderBy(_0x458b9f(0x598),_0x458b9f(0x494)),startAfter(eloHistoryPagination[_0x11dcbb][_0x458b9f(0x445)]),limit(PAGE_SIZE));else _0x2baf14<eloHistoryPagination[_0x11dcbb][_0x458b9f(0x55b)]&&eloHistoryPagination[_0x11dcbb][_0x458b9f(0x566)]?_0x39b0d3=query(_0x178f1c,orderBy('timestamp',_0x458b9f(0x494)),endBefore(eloHistoryPagination[_0x11dcbb][_0x458b9f(0x566)]),limitToLast(PAGE_SIZE)):_0x39b0d3=query(_0x178f1c,orderBy(_0x458b9f(0x598),_0x458b9f(0x494)),limit(PAGE_SIZE));const _0x531afe=await getDocs(_0x39b0d3);if(_0x531afe['empty']){_0x5c04de[_0x458b9f(0x533)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document[_0x458b9f(0x293)](_0x11dcbb+_0x458b9f(0x215))[_0x458b9f(0x2f7)]=_0x458b9f(0x3c4);return;}eloHistoryPagination[_0x11dcbb][_0x458b9f(0x55b)]=_0x2baf14,eloHistoryPagination[_0x11dcbb][_0x458b9f(0x566)]=_0x531afe[_0x458b9f(0x57c)][0x0],eloHistoryPagination[_0x11dcbb][_0x458b9f(0x445)]=_0x531afe['docs'][_0x531afe[_0x458b9f(0x57c)][_0x458b9f(0x283)]-0x1];const _0x523119=new Map();_0x5c04de['innerHTML']='';const _0x12f05a=async _0x1c0d99=>{const _0x39f026=_0x458b9f;if(typeof _0x1c0d99!==_0x39f026(0x4e1)||_0x1c0d99[_0x39f026(0x283)]<0x14||/[^a-zA-Z0-9-_]/['test'](_0x1c0d99))return _0x1c0d99;if(_0x523119[_0x39f026(0x19d)](_0x1c0d99))return _0x523119[_0x39f026(0x247)](_0x1c0d99);try{for(const _0x2fa1c3 of[_0x39f026(0x378),_0x39f026(0x1b4),_0x39f026(0x31b),'nonParticipants']){const _0x323057=await getDoc(doc(db,_0x2fa1c3,_0x1c0d99));if(_0x323057[_0x39f026(0x584)]()&&_0x323057[_0x39f026(0x4e3)]()[_0x39f026(0x521)]){const _0x28b76a=_0x323057[_0x39f026(0x4e3)]()['username'];return _0x523119[_0x39f026(0x2ec)](_0x1c0d99,_0x28b76a),_0x28b76a;}}return _0x1c0d99;}catch(_0x3ef01e){return console[_0x39f026(0x177)](_0x39f026(0x1a7)+_0x1c0d99+':',_0x3ef01e),_0x1c0d99;}};for(const _0x4f3009 of _0x531afe[_0x458b9f(0x57c)]){const _0x41527e=_0x4f3009['data'](),_0x2f63b8=document[_0x458b9f(0x218)]('tr'),_0x363e5a=_0x41527e[_0x458b9f(0x598)]?new Date(_0x41527e[_0x458b9f(0x598)]['seconds']*0x3e8)[_0x458b9f(0x21a)]():_0x458b9f(0x3b2),_0x37015b=_0x41527e[_0x458b9f(0x4a6)]-_0x41527e['previousElo'],_0x318064=_0x37015b>0x0?_0x458b9f(0x212):_0x37015b<0x0?_0x458b9f(0x59f):'',_0x3003e3=_0x37015b>0x0?'+':'',_0x4934e1=_0x41527e['player']||_0x41527e[_0x458b9f(0x521)]||_0x41527e[_0x458b9f(0x438)]||'N/A',_0x999efa=await _0x12f05a(_0x4934e1);_0x2f63b8[_0x458b9f(0x533)]=_0x458b9f(0x2ba)+_0x363e5a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x999efa+_0x458b9f(0x492)+(_0x41527e[_0x458b9f(0x361)]||_0x458b9f(0x3b2))+_0x458b9f(0x1ae)+(_0x41527e[_0x458b9f(0x4a6)]||'N/A')+_0x458b9f(0x289)+_0x318064+'\x22>'+_0x3003e3+_0x37015b+_0x458b9f(0x3fe)+formatHistoryType(_0x41527e['type'])+_0x458b9f(0x48a)+(_0x41527e['modifiedBy']||_0x41527e['promotedBy']||_0x41527e[_0x458b9f(0x2e6)]||_0x458b9f(0x3ad))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5c04de[_0x458b9f(0x243)](_0x2f63b8);}document[_0x458b9f(0x293)](_0x11dcbb+'-page-indicator')[_0x458b9f(0x2f7)]=_0x458b9f(0x210)+_0x2baf14;const _0x3fb28f=document[_0x458b9f(0x293)](_0x11dcbb+_0x458b9f(0x4cb)),_0x1f7c65=document['getElementById'](_0x11dcbb+_0x458b9f(0x505));if(_0x3fb28f)_0x3fb28f['disabled']=_0x2baf14<=0x1;const _0x4917d8=query(_0x178f1c,orderBy(_0x458b9f(0x598),_0x458b9f(0x494)),startAfter(eloHistoryPagination[_0x11dcbb][_0x458b9f(0x445)]),limit(0x1)),_0x17bdf3=await getDocs(_0x4917d8);if(_0x1f7c65)_0x1f7c65[_0x458b9f(0x45e)]=_0x17bdf3[_0x458b9f(0x16f)];}catch(_0x27e330){console['error'](_0x458b9f(0x3d2),_0x27e330),_0x5c04de[_0x458b9f(0x533)]=_0x458b9f(0x180)+_0x27e330[_0x458b9f(0x1fa)]+_0x458b9f(0x33e);}}function formatHistoryType(_0x28939a){const _0xab548e=a4_0x4f367c;switch(_0x28939a){case _0xab548e(0x26d):return'Match\x20Result';case'promotion':return _0xab548e(0x3b7);case _0xab548e(0x571):return _0xab548e(0x351);case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x28939a||_0xab548e(0x546);}}function setupEloHistorySection(){const _0x3df27f=a4_0x4f367c;document[_0x3df27f(0x293)](_0x3df27f(0x397))[_0x3df27f(0x4e9)](_0x3df27f(0x37e),()=>{const _0x10ce65=_0x3df27f;loadEloHistory(eloHistoryPagination['d1'][_0x10ce65(0x55b)]-0x1);}),document[_0x3df27f(0x293)](_0x3df27f(0x3f0))[_0x3df27f(0x4e9)]('click',()=>{const _0xe9455b=_0x3df27f;loadEloHistory(eloHistoryPagination['d1'][_0xe9455b(0x55b)]+0x1);}),document[_0x3df27f(0x293)](_0x3df27f(0x4ce))[_0x3df27f(0x4e9)](_0x3df27f(0x37e),()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x3df27f(0x293)](_0x3df27f(0x37a))[_0x3df27f(0x4e9)](_0x3df27f(0x37e),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x4c7853=document[_0x3df27f(0x293)]('d3-prev-page'),_0x813421=document[_0x3df27f(0x293)]('d3-next-page');_0x4c7853&&_0x4c7853[_0x3df27f(0x4e9)]('click',()=>{const _0x42b54a=_0x3df27f;loadEloHistory(eloHistoryPagination['d3'][_0x42b54a(0x55b)]-0x1);});_0x813421&&_0x813421[_0x3df27f(0x4e9)]('click',()=>{const _0x51e1da=_0x3df27f;loadEloHistory(eloHistoryPagination['d3'][_0x51e1da(0x55b)]+0x1);});const _0x5ba28c=document[_0x3df27f(0x293)](_0x3df27f(0x385));_0x5ba28c&&_0x5ba28c[_0x3df27f(0x4e9)](_0x3df27f(0x206),debounce(filterEloHistoryTable,0x12c));const _0x22f30b=document[_0x3df27f(0x293)](_0x3df27f(0x3ab));_0x22f30b&&_0x22f30b[_0x3df27f(0x4e9)](_0x3df27f(0x4dd),applyEloHistoryFilters);const _0x404284=document[_0x3df27f(0x293)](_0x3df27f(0x280));_0x404284&&_0x404284[_0x3df27f(0x4e9)](_0x3df27f(0x37e),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x23e997=a4_0x4f367c,_0x463f07=document['getElementById'](_0x23e997(0x385))[_0x23e997(0x34b)][_0x23e997(0x447)](),_0x1b2bff=document[_0x23e997(0x201)](_0x23e997(0x470));let _0x4253bd=0x0;_0x1b2bff[_0x23e997(0x2fa)](_0x976ba7=>{const _0x28c69c=_0x23e997;if(_0x976ba7['classList'][_0x28c69c(0x1a9)]('loading-cell')||_0x976ba7['classList'][_0x28c69c(0x1a9)](_0x28c69c(0x2e9))||_0x976ba7[_0x28c69c(0x328)][_0x28c69c(0x1a9)]('error-state'))return;const _0x10b3a1=_0x976ba7[_0x28c69c(0x1a3)](_0x28c69c(0x15e))?.['textContent'][_0x28c69c(0x447)]()||'',_0x5aa39e=_0x976ba7[_0x28c69c(0x1a3)]('.type')?.[_0x28c69c(0x2f7)][_0x28c69c(0x447)]()||'',_0x4e7d7f=_0x976ba7[_0x28c69c(0x1a3)](_0x28c69c(0x2d9))?.[_0x28c69c(0x2f7)][_0x28c69c(0x447)]()||'';_0x10b3a1[_0x28c69c(0x4c1)](_0x463f07)||_0x5aa39e['includes'](_0x463f07)||_0x4e7d7f[_0x28c69c(0x4c1)](_0x463f07)?(_0x976ba7[_0x28c69c(0x2b6)][_0x28c69c(0x185)]='',_0x4253bd++):_0x976ba7[_0x28c69c(0x2b6)][_0x28c69c(0x185)]=_0x28c69c(0x46c);});}async function applyEloHistoryFilters(){const _0x551a9b=a4_0x4f367c,_0x30ab99=document[_0x551a9b(0x293)]('history-start-date')[_0x551a9b(0x34b)],_0x53c2fb=document['getElementById'](_0x551a9b(0x2ca))[_0x551a9b(0x34b)],_0x5bb55e=document[_0x551a9b(0x293)](_0x551a9b(0x3ab))[_0x551a9b(0x34b)],_0x4551d9=currentLadder[_0x551a9b(0x447)]();eloHistoryPagination[_0x4551d9]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x21d431=document[_0x551a9b(0x293)](_0x551a9b(0x423));_0x21d431[_0x551a9b(0x533)]=_0x551a9b(0x234);try{const _0x16f83e=currentLadder==='D1'?_0x551a9b(0x53e):_0x551a9b(0x2c6),_0x3bf0df=collection(db,_0x16f83e);let _0x83e131=[orderBy('timestamp',_0x551a9b(0x494))];if(_0x30ab99){const _0x52dd9a=new Date(_0x30ab99);_0x52dd9a[_0x551a9b(0x306)](0x0,0x0,0x0,0x0),_0x83e131['push'](where(_0x551a9b(0x598),'>=',_0x52dd9a));}if(_0x53c2fb){const _0x496858=new Date(_0x53c2fb);_0x496858[_0x551a9b(0x306)](0x17,0x3b,0x3b,0x3e7),_0x83e131[_0x551a9b(0x1ec)](where('timestamp','<=',_0x496858));}_0x5bb55e&&_0x5bb55e!==_0x551a9b(0x258)&&_0x83e131[_0x551a9b(0x1ec)](where(_0x551a9b(0x1c3),'==',_0x5bb55e));_0x83e131[_0x551a9b(0x1ec)](limit(PAGE_SIZE));const _0x52aa61=query(_0x3bf0df,..._0x83e131),_0x20f370=await getDocs(_0x52aa61);!_0x20f370['empty']&&(eloHistoryPagination[_0x4551d9][_0x551a9b(0x566)]=_0x20f370[_0x551a9b(0x57c)][0x0],eloHistoryPagination[_0x4551d9][_0x551a9b(0x445)]=_0x20f370[_0x551a9b(0x57c)][_0x20f370[_0x551a9b(0x57c)][_0x551a9b(0x283)]-0x1]);_0x21d431[_0x551a9b(0x533)]='';if(_0x20f370[_0x551a9b(0x16f)]){_0x21d431[_0x551a9b(0x533)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x20f370[_0x551a9b(0x2fa)](_0x2d883a=>{const _0x2d6a83=_0x551a9b,_0x554d7d=_0x2d883a[_0x2d6a83(0x4e3)](),_0x422fd8=document[_0x2d6a83(0x218)]('tr'),_0x1593cd=_0x554d7d[_0x2d6a83(0x598)]?new Date(_0x554d7d[_0x2d6a83(0x598)][_0x2d6a83(0x1e5)]*0x3e8)[_0x2d6a83(0x21a)]():'N/A',_0xbcdabe=_0x554d7d[_0x2d6a83(0x4a6)]-_0x554d7d[_0x2d6a83(0x361)],_0x93721=_0xbcdabe>0x0?'positive-change':_0xbcdabe<0x0?'negative-change':'',_0x90d1a4=_0xbcdabe>0x0?'+':'',_0x50c318=_0x554d7d[_0x2d6a83(0x1e2)]||_0x554d7d[_0x2d6a83(0x521)]||_0x554d7d[_0x2d6a83(0x438)]||_0x2d6a83(0x3b2);_0x422fd8[_0x2d6a83(0x533)]=_0x2d6a83(0x2ba)+_0x1593cd+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x50c318+_0x2d6a83(0x492)+(_0x554d7d[_0x2d6a83(0x361)]||_0x2d6a83(0x3b2))+_0x2d6a83(0x1ae)+(_0x554d7d[_0x2d6a83(0x4a6)]||_0x2d6a83(0x3b2))+_0x2d6a83(0x289)+_0x93721+'\x22>'+_0x90d1a4+_0xbcdabe+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x554d7d[_0x2d6a83(0x1c3)])+_0x2d6a83(0x48a)+(_0x554d7d[_0x2d6a83(0x44f)]||_0x554d7d['promotedBy']||_0x554d7d[_0x2d6a83(0x2e6)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x21d431[_0x2d6a83(0x243)](_0x422fd8);}),document['getElementById'](_0x4551d9+_0x551a9b(0x215))[_0x551a9b(0x2f7)]=_0x551a9b(0x3c4);}catch(_0x38b44f){console[_0x551a9b(0x3fc)](_0x551a9b(0x29e),_0x38b44f),_0x21d431[_0x551a9b(0x533)]=_0x551a9b(0x18a)+_0x38b44f[_0x551a9b(0x1fa)]+_0x551a9b(0x33e);}}function resetEloHistoryFilters(){const _0x46754a=a4_0x4f367c;document['getElementById'](_0x46754a(0x466))[_0x46754a(0x34b)]='',document[_0x46754a(0x293)]('history-end-date')[_0x46754a(0x34b)]='',document[_0x46754a(0x293)](_0x46754a(0x3ab))['value']=_0x46754a(0x258),document[_0x46754a(0x293)](_0x46754a(0x385))[_0x46754a(0x34b)]='';const _0x2efb21=currentLadder[_0x46754a(0x447)]();eloHistoryPagination[_0x2efb21]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0xf8a6dd=a4_0x4f367c,_0x51c47e=document[_0xf8a6dd(0x293)]('promote-player-btn'),_0x57dfe7=document['getElementById'](_0xf8a6dd(0x4e4)),_0x1e8365=document[_0xf8a6dd(0x293)]('promote-form');_0x51c47e&&_0x57dfe7&&_0x1e8365&&(_0x51c47e[_0xf8a6dd(0x4e9)]('click',()=>{const _0x28d604=_0xf8a6dd;_0x57dfe7[_0x28d604(0x328)][_0x28d604(0x2ff)](_0x28d604(0x560));}),_0x57dfe7[_0xf8a6dd(0x4e9)](_0xf8a6dd(0x37e),_0x290e4d=>{const _0x1174cf=_0xf8a6dd;_0x290e4d['target']===_0x57dfe7&&_0x57dfe7[_0x1174cf(0x328)][_0x1174cf(0x22a)]('active');}),_0x1e8365[_0xf8a6dd(0x4e9)]('submit',async _0x307570=>{const _0x2ca661=_0xf8a6dd;_0x307570[_0x2ca661(0x59d)]();const _0x1e3ec7=document[_0x2ca661(0x293)]('promote-username'),_0x152fea=document[_0x2ca661(0x293)](_0x2ca661(0x486)),_0x1e074b=_0x1e3ec7[_0x2ca661(0x34b)][_0x2ca661(0x3f7)](),_0x36ba04=_0x152fea[_0x2ca661(0x34b)];if(!_0x1e074b){showNotification('Please\x20enter\x20a\x20username',_0x2ca661(0x3fc));return;}try{await promotePlayer(_0x1e074b,_0x36ba04),_0x57dfe7['classList']['remove'](_0x2ca661(0x560)),_0x1e3ec7[_0x2ca661(0x34b)]='';}catch(_0x1cbdad){showNotification(_0x1cbdad['message'],_0x2ca661(0x3fc));}}),document[_0xf8a6dd(0x293)](_0xf8a6dd(0x2f3))[_0xf8a6dd(0x4e9)](_0xf8a6dd(0x37e),()=>{const _0x217d40=_0xf8a6dd;_0x57dfe7['classList'][_0x217d40(0x22a)]('active');}));const _0x24aadf=document[_0xf8a6dd(0x293)](_0xf8a6dd(0x158)),_0x47df51=document[_0xf8a6dd(0x293)](_0xf8a6dd(0x503)),_0x48eae9=document[_0xf8a6dd(0x293)]('demote-form');_0x24aadf&&_0x47df51&&_0x48eae9&&(_0x24aadf[_0xf8a6dd(0x4e9)](_0xf8a6dd(0x37e),()=>{const _0x392d8c=_0xf8a6dd;_0x47df51[_0x392d8c(0x328)][_0x392d8c(0x2ff)](_0x392d8c(0x560));}),_0x47df51[_0xf8a6dd(0x4e9)](_0xf8a6dd(0x37e),_0x59b333=>{const _0x1f7f23=_0xf8a6dd;_0x59b333[_0x1f7f23(0x44e)]===_0x47df51&&_0x47df51['classList'][_0x1f7f23(0x22a)](_0x1f7f23(0x560));}),_0x48eae9[_0xf8a6dd(0x4e9)]('submit',async _0x1555ef=>{const _0x1c4326=_0xf8a6dd;_0x1555ef[_0x1c4326(0x59d)]();const _0x100afd=document[_0x1c4326(0x293)](_0x1c4326(0x278)),_0x420f2f=document[_0x1c4326(0x293)]('demote-ladder'),_0x148335=_0x100afd[_0x1c4326(0x34b)]['trim'](),_0xb5a259=_0x420f2f['value'];if(!_0x148335){alert(_0x1c4326(0x2eb));return;}try{await demotePlayer(_0x148335,_0xb5a259),document[_0x1c4326(0x293)](_0x1c4326(0x503))[_0x1c4326(0x328)]['remove'](_0x1c4326(0x560)),document[_0x1c4326(0x293)](_0x1c4326(0x278))[_0x1c4326(0x34b)]='';}catch(_0x2f4f59){console[_0x1c4326(0x3fc)]('Error\x20in\x20demotion:',_0x2f4f59);}}));const _0x1a444e=document[_0xf8a6dd(0x293)](_0xf8a6dd(0x441)),_0x4d0163=document['getElementById']('set-elo-modal'),_0x380aa2=document[_0xf8a6dd(0x293)]('set-elo-form');_0x1a444e&&_0x4d0163&&_0x380aa2&&(_0x1a444e['addEventListener'](_0xf8a6dd(0x37e),()=>{const _0x38cd5d=_0xf8a6dd;_0x4d0163[_0x38cd5d(0x328)][_0x38cd5d(0x2ff)](_0x38cd5d(0x560));}),_0x4d0163[_0xf8a6dd(0x4e9)](_0xf8a6dd(0x37e),_0x17fcf4=>{const _0x292466=_0xf8a6dd;_0x17fcf4['target']===_0x4d0163&&_0x4d0163['classList'][_0x292466(0x22a)]('active');}),_0x380aa2['addEventListener'](_0xf8a6dd(0x4c4),async _0x19e56e=>{const _0x2c6e3e=_0xf8a6dd;_0x19e56e[_0x2c6e3e(0x59d)]();const _0x224ac1=document[_0x2c6e3e(0x293)](_0x2c6e3e(0x157)),_0x2c13b6=document[_0x2c6e3e(0x293)](_0x2c6e3e(0x2d0));let _0x530d2c;const _0x484a7b=document[_0x2c6e3e(0x293)](_0x2c6e3e(0x31a)),_0x5ae310=document[_0x2c6e3e(0x1a3)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x484a7b)_0x530d2c=_0x484a7b[_0x2c6e3e(0x34b)];else _0x5ae310?_0x530d2c=_0x5ae310[_0x2c6e3e(0x34b)]:_0x530d2c='D1';if(!_0x224ac1||!_0x2c13b6){showNotification(_0x2c6e3e(0x21c),_0x2c6e3e(0x3fc));return;}const _0x131931=_0x224ac1['value'][_0x2c6e3e(0x3f7)](),_0x488d23=parseInt(_0x2c13b6[_0x2c6e3e(0x34b)]);if(!_0x131931||isNaN(_0x488d23)){showNotification(_0x2c6e3e(0x405),_0x2c6e3e(0x3fc));return;}try{await setCustomElo(_0x131931,_0x488d23,_0x530d2c),_0x4d0163[_0x2c6e3e(0x328)][_0x2c6e3e(0x22a)](_0x2c6e3e(0x560)),_0x224ac1[_0x2c6e3e(0x34b)]='',_0x2c13b6[_0x2c6e3e(0x34b)]='';}catch(_0x178db1){showNotification(_0x178db1[_0x2c6e3e(0x1fa)],_0x2c6e3e(0x3fc));}}),document[_0xf8a6dd(0x293)](_0xf8a6dd(0x1de))[_0xf8a6dd(0x4e9)](_0xf8a6dd(0x37e),()=>{const _0x58dd2e=_0xf8a6dd;_0x4d0163['classList']['remove'](_0x58dd2e(0x560));}));const _0x420cf5=document[_0xf8a6dd(0x293)]('set-role-modal'),_0x1943de=document[_0xf8a6dd(0x293)]('set-role-form');if(_0x420cf5&&_0x1943de){_0x420cf5[_0xf8a6dd(0x4e9)]('click',_0x27c00d=>{const _0x331053=_0xf8a6dd;_0x27c00d[_0x331053(0x44e)]===_0x420cf5&&closeModalHandler();}),_0x1943de['addEventListener'](_0xf8a6dd(0x4c4),async _0x2347ff=>{const _0x5a0b4a=_0xf8a6dd;_0x2347ff[_0x5a0b4a(0x59d)]();const _0x5a1813=document[_0x5a0b4a(0x293)](_0x5a0b4a(0x472)),_0x47aa1f=document['getElementById'](_0x5a0b4a(0x4d9)),_0x96bd52=document[_0x5a0b4a(0x293)]('role-color'),_0x27aa10=_0x5a1813[_0x5a0b4a(0x34b)][_0x5a0b4a(0x3f7)](),_0x35a2e8=_0x47aa1f[_0x5a0b4a(0x34b)][_0x5a0b4a(0x3f7)](),_0x16922a=_0x96bd52[_0x5a0b4a(0x34b)];if(!_0x27aa10){showNotification(_0x5a0b4a(0x50b),_0x5a0b4a(0x3fc));return;}try{await setUserRole(_0x27aa10,_0x35a2e8,_0x16922a),closeModalHandler(),loadUsersWithRoles();}catch(_0x209b81){}});const _0x5456e1=document[_0xf8a6dd(0x293)](_0xf8a6dd(0x391));_0x5456e1&&(_0x5456e1[_0xf8a6dd(0x48d)](_0xf8a6dd(0x37e),closeModalHandler),_0x5456e1['addEventListener'](_0xf8a6dd(0x37e),closeModalHandler));}}async function promotePlayer(_0x53158c,_0x143c40){const _0xfda51e=a4_0x4f367c;try{console[_0xfda51e(0x538)](_0xfda51e(0x302)+_0x53158c+_0xfda51e(0x1b1)+_0x143c40+_0xfda51e(0x3be));const _0x13cb8f=auth['currentUser'];if(!_0x13cb8f)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x1a9e1e=_0x143c40==='D2'?_0xfda51e(0x1b4):_0xfda51e(0x378),_0x11c705=_0x143c40==='D2'?_0xfda51e(0x2c6):_0xfda51e(0x53e);console['log'](_0xfda51e(0x16d)+_0x1a9e1e);const _0x4c3437=collection(db,_0x1a9e1e),_0x2c439d=query(_0x4c3437,where('username','==',_0x53158c)),_0x1f70ba=await getDocs(_0x2c439d);if(_0x1f70ba[_0xfda51e(0x16f)]){alert('Player\x20not\x20found\x20in\x20'+_0x143c40+_0xfda51e(0x3be));throw new Error(_0xfda51e(0x246)+_0x143c40+_0xfda51e(0x3be));}const _0x5bc7ec=_0x1f70ba[_0xfda51e(0x57c)][0x0],_0x44609a=_0x5bc7ec[_0xfda51e(0x4e3)](),_0x29b253=_0x44609a['eloRating']||0x4b0,_0x1da02e=_0x5bc7ec['id'];console[_0xfda51e(0x538)](_0xfda51e(0x1bf)+_0x29b253);const _0x454e17=[{'name':_0xfda51e(0x359),'elo':0x578},{'name':_0xfda51e(0x3e1),'elo':0x640},{'name':_0xfda51e(0x292),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x43749b=_0x454e17[_0xfda51e(0x44b)](_0x50d57e=>_0x50d57e[_0xfda51e(0x47a)]>_0x29b253);if(!_0x43749b){alert(_0xfda51e(0x48c)+_0x143c40+_0xfda51e(0x3be));throw new Error(_0xfda51e(0x48c)+_0x143c40+_0xfda51e(0x3be));}console[_0xfda51e(0x538)]('Promoting\x20player\x20to\x20'+_0x43749b[_0xfda51e(0x53a)]+'\x20('+_0x43749b[_0xfda51e(0x47a)]+')'),await updateDoc(doc(db,_0x1a9e1e,_0x5bc7ec['id']),{'eloRating':_0x43749b[_0xfda51e(0x47a)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x13cb8f[_0xfda51e(0x1cb)]||'admin'}),await addDoc(collection(db,_0x11c705),{'player':_0x53158c,'previousElo':_0x29b253,'newElo':_0x43749b['elo'],'timestamp':serverTimestamp(),'type':_0xfda51e(0x455),'rankAchieved':_0x43749b[_0xfda51e(0x53a)],'promotedBy':_0x13cb8f[_0xfda51e(0x1cb)]||_0xfda51e(0x347),'gameMode':_0x143c40});try{const {promotionManager:_0x179b90}=await import(_0xfda51e(0x564)),_0x405ba5=_0x179b90[_0xfda51e(0x30f)](_0x29b253),_0x106f74=_0x43749b['name'];await _0x179b90['sendPromotionNotification'](_0x1da02e,_0x53158c,_0x29b253,_0x43749b[_0xfda51e(0x47a)],_0x405ba5,_0x106f74,'promotion',{'displayName':_0x53158c,'source':'admin','adminUser':_0x13cb8f[_0xfda51e(0x1cb)],'ladder':_0x143c40}),console[_0xfda51e(0x538)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x29372b){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x29372b);}return alert(_0xfda51e(0x484)+_0x53158c+'\x20to\x20'+_0x43749b[_0xfda51e(0x53a)]+'\x20('+_0x43749b['elo']+')'),currentLadder===_0x143c40&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x437ca5){console['error'](_0xfda51e(0x3d3),_0x437ca5),alert(_0xfda51e(0x3c8)+_0x437ca5['message']);throw _0x437ca5;}}document['addEventListener'](a4_0x4f367c(0x366),()=>{const _0x3a9787=a4_0x4f367c,_0x4ed25c=document[_0x3a9787(0x293)](_0x3a9787(0x531));_0x4ed25c&&_0x4ed25c[_0x3a9787(0x4e9)](_0x3a9787(0x4c4),async _0xfcd333=>{const _0x4301da=_0x3a9787;_0xfcd333[_0x4301da(0x59d)]();const _0x777821=document[_0x4301da(0x293)](_0x4301da(0x1d7))[_0x4301da(0x34b)][_0x4301da(0x3f7)](),_0x5162a2=document[_0x4301da(0x1a3)]('input[name=\x22promote-ladder\x22]:checked')[_0x4301da(0x34b)];if(!_0x777821){alert(_0x4301da(0x2eb));return;}try{await promotePlayer(_0x777821,_0x5162a2),document['getElementById'](_0x4301da(0x4e4))['classList'][_0x4301da(0x22a)](_0x4301da(0x560)),document[_0x4301da(0x293)]('promote-username')[_0x4301da(0x34b)]='';}catch(_0x5480ad){console[_0x4301da(0x3fc)]('Error\x20in\x20promotion:',_0x5480ad);}});});async function demotePlayer(_0x5000d3,_0x100888){const _0x3e8685=a4_0x4f367c;try{console['log'](_0x3e8685(0x393)+_0x5000d3+_0x3e8685(0x1b1)+_0x100888+_0x3e8685(0x3be));const _0x259e94=auth[_0x3e8685(0x3ee)];if(!_0x259e94)throw new Error(_0x3e8685(0x520));const _0x53276b=_0x100888==='D2'?_0x3e8685(0x1b4):'players',_0x1f98ce=_0x100888==='D2'?_0x3e8685(0x2c6):'eloHistory';console[_0x3e8685(0x538)](_0x3e8685(0x16d)+_0x53276b);const _0x2d327f=collection(db,_0x53276b),_0x1c42e7=query(_0x2d327f,where(_0x3e8685(0x521),'==',_0x5000d3)),_0x25ec94=await getDocs(_0x1c42e7);if(_0x25ec94['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x100888+_0x3e8685(0x3be));throw new Error(_0x3e8685(0x246)+_0x100888+_0x3e8685(0x3be));}const _0x42ca99=_0x25ec94['docs'][0x0],_0x1d1db3=_0x42ca99[_0x3e8685(0x4e3)](),_0x214b10=_0x1d1db3[_0x3e8685(0x535)]||0x4b0;console[_0x3e8685(0x538)](_0x3e8685(0x1bf)+_0x214b10);const _0xeec407=[{'name':'Gold','elo':0x708},{'name':_0x3e8685(0x3e1),'elo':0x640},{'name':'Bronze','elo':0x578},{'name':_0x3e8685(0x403),'elo':0x4b0}];let _0x316248=_0xeec407[_0x3e8685(0x44b)](_0x234ebe=>_0x234ebe[_0x3e8685(0x47a)]<_0x214b10);if(!_0x316248){alert(_0x3e8685(0x226)+_0x100888+_0x3e8685(0x3be));throw new Error(_0x3e8685(0x226)+_0x100888+_0x3e8685(0x3be));}console[_0x3e8685(0x538)]('Demoting\x20player\x20to\x20'+_0x316248['name']+'\x20('+_0x316248[_0x3e8685(0x47a)]+')'),await updateDoc(doc(db,_0x53276b,_0x42ca99['id']),{'eloRating':_0x316248[_0x3e8685(0x47a)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x259e94[_0x3e8685(0x1cb)]||_0x3e8685(0x347)}),await addDoc(collection(db,_0x1f98ce),{'player':_0x5000d3,'previousElo':_0x214b10,'newElo':_0x316248[_0x3e8685(0x47a)],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x316248[_0x3e8685(0x53a)],'demotedBy':_0x259e94[_0x3e8685(0x1cb)]||'admin','gameMode':_0x100888});try{const {promotionManager:_0x4b56cf}=await import(_0x3e8685(0x564)),_0x44eb8b=_0x4b56cf[_0x3e8685(0x30f)](_0x214b10),_0x145498=_0x316248[_0x3e8685(0x53a)];await _0x4b56cf[_0x3e8685(0x2fb)](_0x42ca99['id'],_0x5000d3,_0x214b10,_0x316248[_0x3e8685(0x47a)],_0x44eb8b,_0x145498,_0x3e8685(0x571),{'displayName':_0x5000d3,'source':'admin','adminUser':_0x259e94[_0x3e8685(0x1cb)],'ladder':_0x100888}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x526a0c){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x526a0c);}return alert(_0x3e8685(0x35e)+_0x5000d3+_0x3e8685(0x55f)+_0x316248[_0x3e8685(0x53a)]+'\x20('+_0x316248[_0x3e8685(0x47a)]+')'),currentLadder===_0x100888&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2ba0d7){console[_0x3e8685(0x3fc)](_0x3e8685(0x3f6),_0x2ba0d7),alert(_0x3e8685(0x24f)+_0x2ba0d7[_0x3e8685(0x1fa)]);throw _0x2ba0d7;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x47a8d3=a4_0x4f367c,_0x4f5496=document['getElementById']('demote-form');_0x4f5496&&_0x4f5496[_0x47a8d3(0x4e9)](_0x47a8d3(0x4c4),async _0x30ee2a=>{const _0x1d7881=_0x47a8d3;_0x30ee2a['preventDefault']();const _0x274d70=document['getElementById'](_0x1d7881(0x278))['value'][_0x1d7881(0x3f7)](),_0x3aa4ce=document[_0x1d7881(0x1a3)](_0x1d7881(0x231))['value'];if(!_0x274d70){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x274d70,_0x3aa4ce),document['getElementById'](_0x1d7881(0x503))['classList'][_0x1d7881(0x22a)](_0x1d7881(0x560)),document[_0x1d7881(0x293)]('demote-username')[_0x1d7881(0x34b)]='';}catch(_0x169e53){console['error'](_0x1d7881(0x58d),_0x169e53);}});});async function setCustomElo(_0x2d2c66,_0xca975,_0x523127){const _0xb22c9=a4_0x4f367c;try{const _0x31edba=auth[_0xb22c9(0x3ee)];if(!_0x31edba||!isAdmin(_0x31edba[_0xb22c9(0x1cb)]))throw new Error(_0xb22c9(0x36e));const _0x5746db=_0x523127==='D2'?_0xb22c9(0x1b4):_0xb22c9(0x378),_0x33056c=_0x523127==='D2'?_0xb22c9(0x2c6):_0xb22c9(0x53e),_0x5838f5=collection(db,_0x5746db),_0x27e5bf=query(_0x5838f5,where(_0xb22c9(0x521),'==',_0x2d2c66)),_0x5c5353=await getDocs(_0x27e5bf);if(_0x5c5353['empty'])throw new Error(_0xb22c9(0x246)+_0x523127+'\x20ladder');const _0xf09b55=_0x5c5353[_0xb22c9(0x57c)][0x0],_0x1b0aba=_0xf09b55[_0xb22c9(0x4e3)](),_0x4f9caa=_0x1b0aba['eloRating']||0x4b0,_0x4f193f=writeBatch(db);_0x4f193f['update'](doc(db,_0x5746db,_0xf09b55['id']),{'eloRating':_0xca975,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x31edba[_0xb22c9(0x1cb)]});const _0xe9b48e=doc(collection(db,_0x33056c));return _0x4f193f[_0xb22c9(0x2ec)](_0xe9b48e,{'player':_0x2d2c66,'previousElo':_0x4f9caa,'newElo':_0xca975,'timestamp':serverTimestamp(),'type':_0xb22c9(0x38e),'modifiedBy':_0x31edba[_0xb22c9(0x1cb)],'gameMode':_0x523127}),await _0x4f193f[_0xb22c9(0x4cf)](),showNotification(_0xb22c9(0x35b)+_0x2d2c66+'\x20was\x20updated\x20from\x20'+_0x4f9caa+_0xb22c9(0x55f)+_0xca975,_0xb22c9(0x3aa)),currentLadder===_0x523127&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x80bd59){console[_0xb22c9(0x3fc)]('Error\x20setting\x20custom\x20ELO:',_0x80bd59);throw _0x80bd59;}}async function setUserRole(_0x3f9ae3,_0x375c48,_0x20ca3b){const _0x4f0519=a4_0x4f367c;try{const _0x43c5d0=auth['currentUser'];if(!_0x43c5d0||!isAdmin(_0x43c5d0[_0x4f0519(0x1cb)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x386cd9=_0x375c48?_0x375c48[_0x4f0519(0x3f7)]():null,_0x39be8d=_0x386cd9?_0x20ca3b||_0x4f0519(0x25f):null,[_0x3c94bb,_0x4c1423]=await Promise[_0x4f0519(0x258)]([getDocs(query(collection(db,'players'),where('username','==',_0x3f9ae3))),getDocs(query(collection(db,_0x4f0519(0x1b4)),where('username','==',_0x3f9ae3)))]),_0x5a41ae=[];if(!_0x3c94bb[_0x4f0519(0x16f)])_0x5a41ae[_0x4f0519(0x1ec)]({'ref':_0x3c94bb['docs'][0x0][_0x4f0519(0x3b3)],'source':'D1'});if(!_0x4c1423[_0x4f0519(0x16f)])_0x5a41ae['push']({'ref':_0x4c1423[_0x4f0519(0x57c)][0x0][_0x4f0519(0x3b3)],'source':'D2'});if(_0x5a41ae[_0x4f0519(0x283)]===0x0){const [_0x2192b5,_0x197245]=await Promise[_0x4f0519(0x258)]([getDocs(query(collection(db,'nonParticipants'),where(_0x4f0519(0x521),'==',_0x3f9ae3))),getDocs(query(collection(db,_0x4f0519(0x43b)),where(_0x4f0519(0x521),'==',_0x3f9ae3)))]);if(!_0x2192b5[_0x4f0519(0x16f)])_0x5a41ae[_0x4f0519(0x1ec)]({'ref':_0x2192b5[_0x4f0519(0x57c)][0x0]['ref'],'source':_0x4f0519(0x21e)});if(!_0x197245[_0x4f0519(0x16f)])_0x5a41ae[_0x4f0519(0x1ec)]({'ref':_0x197245[_0x4f0519(0x57c)][0x0][_0x4f0519(0x3b3)],'source':_0x4f0519(0x559)});}if(_0x5a41ae['length']===0x0)throw new Error(_0x4f0519(0x40f)+_0x3f9ae3+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x1fb0cc=writeBatch(db);_0x5a41ae['forEach'](_0x56a5fa=>{const _0x2c6688=_0x4f0519;console[_0x2c6688(0x538)](_0x2c6688(0x251)+_0x3f9ae3+_0x2c6688(0x1b1)+_0x56a5fa['source']),!_0x386cd9?_0x1fb0cc[_0x2c6688(0x40a)](_0x56a5fa[_0x2c6688(0x3b3)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x1fb0cc['update'](_0x56a5fa[_0x2c6688(0x3b3)],{'roleName':_0x386cd9,'roleColor':_0x39be8d,'roleAssignedBy':_0x43c5d0['email'],'roleAssignedAt':serverTimestamp()});}),await _0x1fb0cc['commit']();const _0x3b6a7b=_0x386cd9?_0x4f0519(0x57e)+_0x386cd9+_0x4f0519(0x25a):'Role\x20removed';return showNotification(_0x3b6a7b+_0x4f0519(0x415)+_0x3f9ae3+'\x22',_0x4f0519(0x3aa)),!![];}catch(_0x73a78b){console[_0x4f0519(0x3fc)](_0x4f0519(0x162),_0x73a78b),showNotification(_0x4f0519(0x414)+_0x73a78b['message'],_0x4f0519(0x3fc));throw _0x73a78b;}}function showNotification(_0x2eac01,_0x3ef339=a4_0x4f367c(0x300)){const _0x56671f=a4_0x4f367c,_0x50065b=document[_0x56671f(0x218)](_0x56671f(0x41b));_0x50065b[_0x56671f(0x2ae)]=_0x56671f(0x1be)+_0x3ef339,_0x50065b[_0x56671f(0x533)]=_0x56671f(0x169)+getNotificationIcon(_0x3ef339)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x2eac01+_0x56671f(0x558),document[_0x56671f(0x478)]['appendChild'](_0x50065b),setTimeout(()=>{const _0x18bfb9=_0x56671f;_0x50065b[_0x18bfb9(0x328)][_0x18bfb9(0x2ff)]('active');},0xa);const _0x344537=setTimeout(()=>{closeNotification(_0x50065b);},0x1388);_0x50065b[_0x56671f(0x1a3)](_0x56671f(0x31c))[_0x56671f(0x4e9)]('click',()=>{clearTimeout(_0x344537),closeNotification(_0x50065b);});}function getNotificationIcon(_0x2c7662){const _0x424907=a4_0x4f367c;switch(_0x2c7662){case _0x424907(0x3aa):return _0x424907(0x26b);case'error':return _0x424907(0x3b8);case _0x424907(0x219):return _0x424907(0x1d0);case _0x424907(0x300):default:return _0x424907(0x576);}}function closeNotification(_0x2f54cc){const _0x11192a=a4_0x4f367c;_0x2f54cc['classList'][_0x11192a(0x22a)](_0x11192a(0x560)),setTimeout(()=>{_0x2f54cc['remove']();},0x12c);}function setupUserRolesSection(){const _0x30b18c=a4_0x4f367c,_0x44435f=document[_0x30b18c(0x293)](_0x30b18c(0x335));_0x44435f&&_0x44435f[_0x30b18c(0x4e9)](_0x30b18c(0x37e),function(){const _0x3ec3d0=_0x30b18c;this['classList'][_0x3ec3d0(0x2ff)](_0x3ec3d0(0x555)),this[_0x3ec3d0(0x533)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x3ec3d0(0x496)](()=>{const _0x31a064=_0x3ec3d0;this['classList'][_0x31a064(0x22a)](_0x31a064(0x555)),this[_0x31a064(0x533)]=_0x31a064(0x353);})[_0x3ec3d0(0x412)](_0xa085b8=>{const _0x19f2d6=_0x3ec3d0;console[_0x19f2d6(0x3fc)](_0x19f2d6(0x267),_0xa085b8),this[_0x19f2d6(0x328)][_0x19f2d6(0x22a)](_0x19f2d6(0x555)),this[_0x19f2d6(0x533)]=_0x19f2d6(0x316),setTimeout(()=>{const _0x5e9834=_0x19f2d6;this[_0x5e9834(0x533)]=_0x5e9834(0x353);},0xbb8);});});const _0x216474=document[_0x30b18c(0x293)]('add-new-role-btn');_0x216474&&_0x216474[_0x30b18c(0x4e9)]('click',()=>{const _0xa4403c=_0x30b18c,_0x103995=document[_0xa4403c(0x293)](_0xa4403c(0x572));_0x103995&&_0x103995[_0xa4403c(0x328)][_0xa4403c(0x2ff)](_0xa4403c(0x560));});const _0x16c367=document['getElementById'](_0x30b18c(0x4d7));_0x16c367&&_0x16c367['addEventListener'](_0x30b18c(0x206),debounce(filterUsersTable,0x12c));const _0x39df81=document[_0x30b18c(0x293)](_0x30b18c(0x25e));_0x39df81&&_0x39df81[_0x30b18c(0x4e9)](_0x30b18c(0x4dd),filterUsersTable);}async function loadUsersWithRoles(){const _0x2c66ba=a4_0x4f367c,_0x59dd0b=document[_0x2c66ba(0x293)](_0x2c66ba(0x2f6));if(!_0x59dd0b)return;_0x59dd0b['innerHTML']=_0x2c66ba(0x2cc);try{const [_0x5dfc8a,_0x4c6754,_0x5b1e52,_0x4add26]=await Promise[_0x2c66ba(0x258)]([getDocs(collection(db,_0x2c66ba(0x378))),getDocs(collection(db,_0x2c66ba(0x1b4))),getDocs(collection(db,_0x2c66ba(0x2a2))),getDocs(collection(db,_0x2c66ba(0x43b)))]),_0x563909=new Map();function _0x4e9c5d(_0xa8640c,_0x344926){const _0x2c4e2b=_0x2c66ba;_0xa8640c[_0x2c4e2b(0x2fa)](_0x557687=>{const _0x3d4f24=_0x2c4e2b,_0x239bf6=_0x557687[_0x3d4f24(0x4e3)]();if(!_0x239bf6[_0x3d4f24(0x521)])return;if(!_0x563909[_0x3d4f24(0x19d)](_0x239bf6[_0x3d4f24(0x521)]))_0x563909['set'](_0x239bf6['username'],{'username':_0x239bf6[_0x3d4f24(0x521)],'roleName':_0x239bf6['roleName']||null,'roleColor':_0x239bf6[_0x3d4f24(0x1fc)]||null,'roleAssignedBy':_0x239bf6['roleAssignedBy']||null,'roleAssignedAt':_0x239bf6['roleAssignedAt']||null,'sources':[_0x344926]});else{const _0x48d6b5=_0x563909['get'](_0x239bf6[_0x3d4f24(0x521)]);_0x239bf6['roleName']&&(!_0x48d6b5[_0x3d4f24(0x3a2)]||_0x344926==='D1'||_0x344926==='D2')&&(_0x48d6b5[_0x3d4f24(0x3a2)]=_0x239bf6[_0x3d4f24(0x3a2)],_0x48d6b5[_0x3d4f24(0x1fc)]=_0x239bf6[_0x3d4f24(0x1fc)],_0x48d6b5['roleAssignedBy']=_0x239bf6[_0x3d4f24(0x2ea)],_0x48d6b5[_0x3d4f24(0x207)]=_0x239bf6[_0x3d4f24(0x207)]),!_0x48d6b5[_0x3d4f24(0x514)][_0x3d4f24(0x4c1)](_0x344926)&&_0x48d6b5[_0x3d4f24(0x514)][_0x3d4f24(0x1ec)](_0x344926);}});}_0x4e9c5d(_0x5dfc8a,'D1'),_0x4e9c5d(_0x4c6754,'D2'),_0x4e9c5d(_0x5b1e52,_0x2c66ba(0x24a)),_0x4e9c5d(_0x4add26,_0x2c66ba(0x35a));const _0x27c20e=Array[_0x2c66ba(0x253)](_0x563909[_0x2c66ba(0x31f)]())[_0x2c66ba(0x2ee)]((_0x1a7d9d,_0xd3ae0d)=>_0x1a7d9d[_0x2c66ba(0x521)][_0x2c66ba(0x252)](_0xd3ae0d[_0x2c66ba(0x521)]));if(_0x27c20e[_0x2c66ba(0x283)]===0x0){_0x59dd0b[_0x2c66ba(0x533)]=_0x2c66ba(0x1c9);return;}_0x59dd0b[_0x2c66ba(0x533)]='',_0x27c20e[_0x2c66ba(0x2fa)](_0x4fb141=>{const _0x193782=_0x2c66ba,_0x32dfaf=document['createElement']('tr');_0x32dfaf[_0x193782(0x2cd)][_0x193782(0x521)]=_0x4fb141['username'],_0x32dfaf[_0x193782(0x2cd)]['roleName']=_0x4fb141[_0x193782(0x3a2)]||'',_0x32dfaf[_0x193782(0x2cd)][_0x193782(0x1fc)]=_0x4fb141['roleColor']||'#808080';const _0x475fdc=_0x4fb141[_0x193782(0x207)]?new Date(_0x4fb141[_0x193782(0x207)]['seconds']*0x3e8)[_0x193782(0x175)]():_0x193782(0x3b2),_0x1d2ae3=_0x4fb141['roleName']?_0x193782(0x3a1)+_0x4fb141['roleColor']+_0x193782(0x19f)+getContrastColor(_0x4fb141[_0x193782(0x1fc)])+_0x193782(0x594)+_0x4fb141[_0x193782(0x3a2)]+_0x193782(0x15c):_0x193782(0x4ae);_0x32dfaf[_0x193782(0x533)]=_0x193782(0x1c2)+_0x4fb141[_0x193782(0x521)]+'\x20<span\x20class=\x22user-source\x22>('+_0x4fb141[_0x193782(0x514)][_0x193782(0x37c)](',\x20')+_0x193782(0x197)+_0x1d2ae3+_0x193782(0x33a)+(_0x4fb141['roleAssignedBy']||_0x193782(0x3b2))+_0x193782(0x33a)+_0x475fdc+_0x193782(0x50d)+_0x4fb141[_0x193782(0x521)]+_0x193782(0x56a)+(_0x4fb141[_0x193782(0x3a2)]?_0x193782(0x1dd)+_0x4fb141[_0x193782(0x521)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x193782(0x22e),_0x59dd0b['appendChild'](_0x32dfaf);}),document[_0x2c66ba(0x201)](_0x2c66ba(0x3f2))[_0x2c66ba(0x2fa)](_0x44fbc8=>{const _0x121a39=_0x2c66ba;_0x44fbc8[_0x121a39(0x4e9)]('click',()=>{const _0x590f0e=_0x121a39,_0x2c7eb3=_0x44fbc8[_0x590f0e(0x2cd)][_0x590f0e(0x521)];openRoleEditModal(_0x2c7eb3);});}),document[_0x2c66ba(0x201)]('.remove-role-btn')[_0x2c66ba(0x2fa)](_0x1f0b9c=>{const _0x56b571=_0x2c66ba;_0x1f0b9c['addEventListener'](_0x56b571(0x37e),()=>{const _0x338c47=_0x56b571,_0x106293=_0x1f0b9c[_0x338c47(0x2cd)][_0x338c47(0x521)];confirm(_0x338c47(0x50c)+_0x106293+'?')&&setUserRole(_0x106293,null,null)[_0x338c47(0x496)](()=>loadUsersWithRoles())[_0x338c47(0x412)](_0x3ad1ff=>console[_0x338c47(0x3fc)]('Error\x20removing\x20role:',_0x3ad1ff));});});}catch(_0x4fda3e){console[_0x2c66ba(0x3fc)]('Error\x20loading\x20users:',_0x4fda3e),_0x59dd0b[_0x2c66ba(0x533)]=_0x2c66ba(0x1e8);}}function openRoleEditModal(_0x55f44a){const _0x1821e6=a4_0x4f367c;console[_0x1821e6(0x538)](_0x1821e6(0x1cc),_0x55f44a);const _0x59a731=document['getElementById']('set-role-modal'),_0x585e56=document['getElementById'](_0x1821e6(0x472)),_0x462379=document[_0x1821e6(0x293)](_0x1821e6(0x3cf));if(!_0x59a731){console['error'](_0x1821e6(0x188)),alert(_0x1821e6(0x446));return;}console[_0x1821e6(0x538)](_0x1821e6(0x33d),_0x59a731);_0x585e56?(_0x585e56[_0x1821e6(0x34b)]=_0x55f44a,console[_0x1821e6(0x538)]('Username\x20input\x20set\x20to:\x20'+_0x55f44a)):console[_0x1821e6(0x177)](_0x1821e6(0x2bf));const _0x48aeb9=document[_0x1821e6(0x1a3)]('#users-table-body\x20tr[data-username=\x22'+_0x55f44a+'\x22]');if(_0x48aeb9&&_0x462379){const _0x3d4fd9=_0x48aeb9['dataset'][_0x1821e6(0x4d4)];_0x462379[_0x1821e6(0x34b)]=_0x3d4fd9===_0x1821e6(0x46c)?'':_0x3d4fd9,console[_0x1821e6(0x538)]('Role\x20select\x20set\x20to:\x20'+_0x462379[_0x1821e6(0x34b)]+_0x1821e6(0x357)+_0x3d4fd9+')');}else{if(!_0x48aeb9)console[_0x1821e6(0x177)]('Table\x20row\x20for\x20user\x20'+_0x55f44a+'\x20not\x20found.');if(!_0x462379)console['warn'](_0x1821e6(0x27d));if(_0x462379)_0x462379[_0x1821e6(0x34b)]='';}console[_0x1821e6(0x538)](_0x1821e6(0x35c)),_0x59a731['classList'][_0x1821e6(0x2ff)](_0x1821e6(0x560));const _0x3eacac=document[_0x1821e6(0x293)]('cancel-role-btn');_0x3eacac?(console[_0x1821e6(0x538)](_0x1821e6(0x383)),_0x3eacac['removeEventListener'](_0x1821e6(0x37e),closeModalHandler),_0x3eacac['addEventListener'](_0x1821e6(0x37e),closeModalHandler)):console['warn'](_0x1821e6(0x20d)),console[_0x1821e6(0x538)](_0x1821e6(0x499)),_0x59a731[_0x1821e6(0x48d)](_0x1821e6(0x37e),closeModalBackgroundHandler),_0x59a731['addEventListener'](_0x1821e6(0x37e),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0xe45b1f){_0xe45b1f['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x115b01=a4_0x4f367c,_0x3e851b=document[_0x115b01(0x293)](_0x115b01(0x572));_0x3e851b&&(_0x3e851b[_0x115b01(0x328)]['remove']('active'),_0x3e851b[_0x115b01(0x48d)](_0x115b01(0x37e),closeModalBackgroundHandler));}function filterUsersTable(){const _0x122f66=a4_0x4f367c,_0x2a29bd=document[_0x122f66(0x293)](_0x122f66(0x4d7))?.['value']['toLowerCase']()||'',_0x3b3f0c=document[_0x122f66(0x293)](_0x122f66(0x25e))?.[_0x122f66(0x34b)]||_0x122f66(0x258),_0x4f969b=document[_0x122f66(0x201)](_0x122f66(0x553));let _0x3a290c=0x0;_0x4f969b[_0x122f66(0x2fa)](_0x500558=>{const _0x429bb1=_0x122f66;if(_0x500558[_0x429bb1(0x1a3)](_0x429bb1(0x554))||_0x500558['querySelector'](_0x429bb1(0x4bd))||_0x500558[_0x429bb1(0x1a3)](_0x429bb1(0x1f5)))return;const _0x43aa84=_0x500558[_0x429bb1(0x2cd)][_0x429bb1(0x521)]?.[_0x429bb1(0x447)]()||'',_0x1a373b=_0x500558[_0x429bb1(0x2cd)][_0x429bb1(0x4d4)]||_0x429bb1(0x46c),_0x3c1fa3=_0x43aa84[_0x429bb1(0x4c1)](_0x2a29bd),_0x4e893c=_0x3b3f0c==='all'||_0x1a373b===_0x3b3f0c;_0x3c1fa3&&_0x4e893c?(_0x500558[_0x429bb1(0x2b6)][_0x429bb1(0x185)]='',_0x3a290c++):_0x500558[_0x429bb1(0x2b6)][_0x429bb1(0x185)]=_0x429bb1(0x46c);});if(_0x3a290c===0x0&&_0x4f969b['length']>0x0){const _0x332442=document[_0x122f66(0x293)](_0x122f66(0x2f6));if(_0x332442){if(!_0x332442['querySelector'](_0x122f66(0x26a))){const _0x39f6e1=document[_0x122f66(0x218)]('tr');_0x39f6e1[_0x122f66(0x328)][_0x122f66(0x2ff)](_0x122f66(0x21d)),_0x39f6e1[_0x122f66(0x533)]='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x332442[_0x122f66(0x243)](_0x39f6e1);}}}else{const _0x4fd36d=document[_0x122f66(0x1a3)]('.no-results');_0x4fd36d&&_0x4fd36d[_0x122f66(0x22a)]();}}function setupManageArticlesSection(){const _0x4d48b4=a4_0x4f367c,_0x4fe86e=document[_0x4d48b4(0x293)]('load-articles-data');_0x4fe86e&&_0x4fe86e[_0x4d48b4(0x4e9)]('click',function(){const _0x45e770=_0x4d48b4;this[_0x45e770(0x328)]['add'](_0x45e770(0x555)),this[_0x45e770(0x533)]=_0x45e770(0x4fd),loadArticles()[_0x45e770(0x496)](()=>{const _0x585cc8=_0x45e770;this[_0x585cc8(0x328)]['remove']('loading'),this[_0x585cc8(0x533)]=_0x585cc8(0x2c5);})[_0x45e770(0x412)](_0x5b1aeb=>{const _0x36d584=_0x45e770;console[_0x36d584(0x3fc)](_0x36d584(0x51a),_0x5b1aeb),this[_0x36d584(0x328)][_0x36d584(0x22a)](_0x36d584(0x555)),this[_0x36d584(0x533)]=_0x36d584(0x316),setTimeout(()=>{const _0x4f243a=_0x36d584;this[_0x4f243a(0x533)]=_0x4f243a(0x2c5);},0xbb8);});});const _0x57e19d=document[_0x4d48b4(0x293)](_0x4d48b4(0x4b2));_0x57e19d?(console['log'](_0x4d48b4(0x29b)),_0x57e19d[_0x4d48b4(0x2b6)][_0x4d48b4(0x185)]='block',_0x57e19d[_0x4d48b4(0x4e9)]('click',()=>{openArticleModal();})):console[_0x4d48b4(0x3fc)](_0x4d48b4(0x3a0));const _0x5af1ff=document[_0x4d48b4(0x293)]('article-form');_0x5af1ff&&_0x5af1ff[_0x4d48b4(0x4e9)](_0x4d48b4(0x4c4),_0x2ef621=>{const _0x4fedec=_0x4d48b4;_0x2ef621[_0x4fedec(0x59d)](),saveArticle();});const _0xa4349f=document[_0x4d48b4(0x293)](_0x4d48b4(0x27f));_0xa4349f&&_0xa4349f[_0x4d48b4(0x4e9)](_0x4d48b4(0x37e),()=>{closeArticleModal();});const _0x39fa79=document['querySelector'](_0x4d48b4(0x26e));_0x39fa79&&_0x39fa79[_0x4d48b4(0x4e9)](_0x4d48b4(0x37e),()=>{closeArticleModal();});const _0x404a42=document[_0x4d48b4(0x293)](_0x4d48b4(0x374));_0x404a42&&_0x404a42['addEventListener'](_0x4d48b4(0x37e),_0x2a812a=>{_0x2a812a['target']===_0x404a42&&closeArticleModal();});}async function loadArticles(){const _0x138495=a4_0x4f367c,_0x21aa4e=document[_0x138495(0x293)](_0x138495(0x473));if(!_0x21aa4e)return;_0x21aa4e['innerHTML']=_0x138495(0x24d);try{const _0x16e1ce=collection(db,_0x138495(0x38a)),_0x32fb5f=query(_0x16e1ce,orderBy(_0x138495(0x43a),_0x138495(0x494))),_0x301b1b=await getDocs(_0x32fb5f);if(_0x301b1b[_0x138495(0x16f)]){_0x21aa4e[_0x138495(0x533)]=_0x138495(0x23a);return;}_0x21aa4e[_0x138495(0x533)]='',_0x301b1b['forEach'](_0xc5d1af=>{const _0x13299f=_0x138495,_0x387916=_0xc5d1af[_0x13299f(0x4e3)](),_0x2823bf=document[_0x13299f(0x218)]('tr'),_0x4fbf7f=_0x387916['createdAt']?new Date(_0x387916['createdAt'][_0x13299f(0x1e5)]*0x3e8)['toLocaleString']():_0x13299f(0x3b2);_0x2823bf[_0x13299f(0x533)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x387916[_0x13299f(0x501)]||_0x13299f(0x2da))+_0x13299f(0x33a)+(_0x387916[_0x13299f(0x39b)]||_0x13299f(0x546))+_0x13299f(0x33a)+_0x4fbf7f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0xc5d1af['id']+_0x13299f(0x18c)+_0xc5d1af['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x21aa4e[_0x13299f(0x243)](_0x2823bf);}),setupArticleActionButtons();}catch(_0x1f161f){console[_0x138495(0x3fc)](_0x138495(0x51a),_0x1f161f),_0x21aa4e[_0x138495(0x533)]=_0x138495(0x32f)+_0x1f161f[_0x138495(0x1fa)]+_0x138495(0x33e);}}function setupArticleActionButtons(){const _0x1097b4=a4_0x4f367c;document[_0x1097b4(0x201)]('.edit-article-btn')[_0x1097b4(0x2fa)](_0x385d27=>{const _0x32510c=_0x1097b4;_0x385d27[_0x32510c(0x4e9)](_0x32510c(0x37e),async _0x45cd9e=>{const _0x26a901=_0x45cd9e['currentTarget']['dataset']['id'];openArticleModal(_0x26a901);});}),document['querySelectorAll'](_0x1097b4(0x352))[_0x1097b4(0x2fa)](_0x1d10a2=>{const _0x2f5201=_0x1097b4;_0x1d10a2['addEventListener'](_0x2f5201(0x37e),async _0x386310=>{const _0x5c8595=_0x2f5201,_0x590791=_0x386310[_0x5c8595(0x249)][_0x5c8595(0x2cd)]['id'];confirmDeleteArticle(_0x590791);});});}function openArticleModal(_0x399d33=null){const _0x336b18=a4_0x4f367c,_0x2e04f7=document['getElementById']('article-modal'),_0x358578=document[_0x336b18(0x293)](_0x336b18(0x309)),_0x309b0d=document[_0x336b18(0x293)]('article-form'),_0x29ec64=document[_0x336b18(0x293)](_0x336b18(0x341));_0x309b0d[_0x336b18(0x408)](),_0x29ec64['value']='';if(_0x399d33)_0x358578[_0x336b18(0x2f7)]=_0x336b18(0x20a),_0x29ec64[_0x336b18(0x34b)]=_0x399d33,loadArticleData(_0x399d33);else{_0x358578['textContent']=_0x336b18(0x552);const _0x254aab=auth[_0x336b18(0x3ee)];if(_0x254aab){const _0x6c7fb=document['getElementById'](_0x336b18(0x23e));if(_0x6c7fb&&_0x254aab[_0x336b18(0x583)])_0x6c7fb[_0x336b18(0x34b)]=_0x254aab[_0x336b18(0x583)];else _0x6c7fb&&(_0x6c7fb[_0x336b18(0x34b)]=_0x254aab[_0x336b18(0x1cb)]);}}_0x2e04f7[_0x336b18(0x328)][_0x336b18(0x2ff)](_0x336b18(0x560));}async function loadArticleData(_0x498fe9){const _0x63524c=a4_0x4f367c;try{const _0x2a2465=doc(db,_0x63524c(0x38a),_0x498fe9),_0x27e349=await getDoc(_0x2a2465);if(!_0x27e349[_0x63524c(0x584)]()){showNotification(_0x63524c(0x4ec),_0x63524c(0x3fc));return;}const _0x4f9877=_0x27e349[_0x63524c(0x4e3)]();document[_0x63524c(0x293)](_0x63524c(0x4b0))[_0x63524c(0x34b)]=_0x4f9877['title']||'',document[_0x63524c(0x293)]('article-author')[_0x63524c(0x34b)]=_0x4f9877[_0x63524c(0x39b)]||'',document[_0x63524c(0x293)](_0x63524c(0x17f))[_0x63524c(0x34b)]=_0x4f9877[_0x63524c(0x233)]||'',document[_0x63524c(0x293)](_0x63524c(0x217))[_0x63524c(0x34b)]=_0x4f9877['content']||'';}catch(_0x3b1586){console['error'](_0x63524c(0x200),_0x3b1586),showNotification(_0x63524c(0x56e),_0x63524c(0x3fc));}}async function saveArticle(){const _0x239712=a4_0x4f367c;try{const _0x51d8b4=document['getElementById'](_0x239712(0x341))['value'],_0x4016ac=document[_0x239712(0x293)](_0x239712(0x4b0))['value'][_0x239712(0x3f7)](),_0x7b5bab=document['getElementById'](_0x239712(0x23e))[_0x239712(0x34b)][_0x239712(0x3f7)](),_0x5d6e29=document['getElementById']('article-image-url')['value'][_0x239712(0x3f7)](),_0x2dd552=document['getElementById'](_0x239712(0x217))[_0x239712(0x34b)][_0x239712(0x3f7)]();if(!_0x4016ac||!_0x2dd552){showNotification(_0x239712(0x4fe),_0x239712(0x3fc));return;}const _0x3dde71=auth[_0x239712(0x3ee)];if(!_0x3dde71){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles',_0x239712(0x3fc));return;}const _0x41e2cf={'title':_0x4016ac,'author':_0x7b5bab,'imageUrl':_0x5d6e29||null,'content':_0x2dd552,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x3dde71[_0x239712(0x1cb)]};!_0x51d8b4?(_0x41e2cf[_0x239712(0x43a)]=serverTimestamp(),_0x41e2cf[_0x239712(0x20c)]=_0x3dde71[_0x239712(0x1cb)],await addDoc(collection(db,'articles'),_0x41e2cf),showNotification(_0x239712(0x2b8),_0x239712(0x3aa))):(await updateDoc(doc(db,_0x239712(0x38a),_0x51d8b4),_0x41e2cf),showNotification(_0x239712(0x480),_0x239712(0x3aa))),closeArticleModal(),loadArticles();}catch(_0x439432){console[_0x239712(0x3fc)]('Error\x20saving\x20article:',_0x439432),showNotification(_0x239712(0x54a)+_0x439432[_0x239712(0x1fa)],_0x239712(0x3fc));}}function closeArticleModal(){const _0x3599e0=a4_0x4f367c,_0x2e3cbf=document[_0x3599e0(0x293)]('article-modal');_0x2e3cbf&&_0x2e3cbf[_0x3599e0(0x328)][_0x3599e0(0x22a)](_0x3599e0(0x560));}async function confirmDeleteArticle(_0x374d3b){const _0x500b09=a4_0x4f367c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x374d3b)),loadArticles(),showNotification(_0x500b09(0x1e3),'success');}catch(_0x2aa33e){console[_0x500b09(0x3fc)](_0x500b09(0x285),_0x2aa33e),showNotification(_0x500b09(0x4e0)+_0x2aa33e['message'],_0x500b09(0x3fc));}}function setupTrophyManagementSection(){const _0x5da98e=a4_0x4f367c,_0x556e02=document['getElementById']('load-trophies-data');_0x556e02&&_0x556e02[_0x5da98e(0x4e9)](_0x5da98e(0x37e),function(){const _0x961f2b=_0x5da98e;this[_0x961f2b(0x328)]['add'](_0x961f2b(0x555)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x1d5939=document[_0x961f2b(0x293)](_0x961f2b(0x356));_0x1d5939&&(_0x1d5939['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x961f2b(0x496)](()=>{const _0x39aeae=_0x961f2b;this['classList'][_0x39aeae(0x22a)](_0x39aeae(0x555)),this[_0x39aeae(0x533)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x282cae=>{const _0x430f2f=_0x961f2b;console['error'](_0x430f2f(0x59a),_0x282cae),this[_0x430f2f(0x328)][_0x430f2f(0x22a)](_0x430f2f(0x555)),this[_0x430f2f(0x533)]=_0x430f2f(0x316),setTimeout(()=>{const _0x5727c1=_0x430f2f;this[_0x5727c1(0x533)]=_0x5727c1(0x3e0);},0xbb8);});});const _0x4cf949=document[_0x5da98e(0x293)](_0x5da98e(0x41d));_0x4cf949&&_0x4cf949['addEventListener'](_0x5da98e(0x37e),()=>{openTrophyModal();});const _0xa91d8f=document[_0x5da98e(0x293)](_0x5da98e(0x53f));_0xa91d8f&&_0xa91d8f['addEventListener']('submit',_0x212982=>{const _0x249f09=_0x5da98e;_0x212982[_0x249f09(0x59d)](),saveTrophyDefinition();});const _0x206df9=document[_0x5da98e(0x293)](_0x5da98e(0x34f));_0x206df9&&_0x206df9['addEventListener'](_0x5da98e(0x37e),()=>{closeTrophyModal();});document[_0x5da98e(0x201)](_0x5da98e(0x550))[_0x5da98e(0x2fa)](_0x243699=>{const _0xb5a117=_0x5da98e;_0x243699[_0xb5a117(0x4e9)](_0xb5a117(0x37e),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x144c4e=document[_0x5da98e(0x293)](_0x5da98e(0x4cc));_0x144c4e&&_0x144c4e['addEventListener'](_0x5da98e(0x37e),_0x2e782e=>{const _0x4a9896=_0x5da98e;_0x2e782e[_0x4a9896(0x44e)]===_0x144c4e&&closeTrophyModal();});const _0x1ebf9c=document[_0x5da98e(0x293)](_0x5da98e(0x1c4));_0x1ebf9c&&_0x1ebf9c['addEventListener'](_0x5da98e(0x37e),_0x5a2427=>{_0x5a2427['target']===_0x1ebf9c&&closeAssignTrophyModal();});const _0x994526=document[_0x5da98e(0x293)](_0x5da98e(0x2a1));_0x994526&&_0x994526['addEventListener'](_0x5da98e(0x4c4),_0x53dd02=>{const _0x6adbb2=_0x5da98e;_0x53dd02[_0x6adbb2(0x59d)](),assignTrophyToPlayer();});const _0x2992d4=document['getElementById'](_0x5da98e(0x18d));_0x2992d4&&_0x2992d4[_0x5da98e(0x4e9)](_0x5da98e(0x37e),()=>{closeAssignTrophyModal();});const _0x1666a2=document[_0x5da98e(0x293)](_0x5da98e(0x588));_0x1666a2&&(_0x1666a2['addEventListener'](_0x5da98e(0x206),updateTrophyImagePreview),_0x1666a2[_0x5da98e(0x4e9)](_0x5da98e(0x409),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x597e52=a4_0x4f367c,_0x2cb0fe=document[_0x597e52(0x293)](_0x597e52(0x588))['value'][_0x597e52(0x3f7)](),_0x594705=document[_0x597e52(0x293)]('trophy-image-preview');if(!_0x594705){const _0x1e4fea=document['getElementById'](_0x597e52(0x588))[_0x597e52(0x17e)]('.form-group'),_0xc4f142=document[_0x597e52(0x218)](_0x597e52(0x41b));_0xc4f142['id']=_0x597e52(0x20b),_0xc4f142[_0x597e52(0x2ae)]=_0x597e52(0x1af),_0x1e4fea[_0x597e52(0x243)](_0xc4f142);const _0xad3d3b=document['createElement'](_0x597e52(0x545));_0xad3d3b['id']=_0x597e52(0x17d),_0xad3d3b[_0x597e52(0x3cb)]='Trophy\x20Preview',_0xad3d3b[_0x597e52(0x41e)]=function(){const _0x380e34=_0x597e52;this[_0x380e34(0x154)]=DEFAULT_TROPHY_IMAGE,this[_0x380e34(0x328)][_0x380e34(0x2ff)](_0x380e34(0x3fc));},_0xc4f142['appendChild'](_0xad3d3b);}const _0x446bea=document[_0x597e52(0x293)](_0x597e52(0x17d));_0x2cb0fe?(_0x446bea[_0x597e52(0x154)]=_0x2cb0fe,_0x446bea[_0x597e52(0x2b6)][_0x597e52(0x185)]=_0x597e52(0x2f1),_0x446bea[_0x597e52(0x328)][_0x597e52(0x22a)]('error')):(_0x446bea[_0x597e52(0x154)]=DEFAULT_TROPHY_IMAGE,_0x446bea[_0x597e52(0x2b6)][_0x597e52(0x185)]=_0x597e52(0x2f1));}async function loadTrophyDefinitions(){const _0x17110e=a4_0x4f367c,_0x43daf6=document[_0x17110e(0x293)](_0x17110e(0x4b7));if(!_0x43daf6)return;_0x43daf6['innerHTML']=_0x17110e(0x26c);try{const _0x2ed5d5=collection(db,_0x17110e(0x485)),_0xb3ff9f=query(_0x2ed5d5,orderBy(_0x17110e(0x43a),_0x17110e(0x494))),_0x5d58d7=await getDocs(_0xb3ff9f);if(_0x5d58d7[_0x17110e(0x16f)]){_0x43daf6[_0x17110e(0x533)]=_0x17110e(0x2b9);return;}_0x43daf6['innerHTML']='',_0x5d58d7[_0x17110e(0x2fa)](_0x54e3ff=>{const _0x23122f=_0x17110e,_0x307c2a=_0x54e3ff[_0x23122f(0x4e3)](),_0x3a046e=document[_0x23122f(0x218)]('tr'),_0x5dc61e=_0x307c2a[_0x23122f(0x43a)]?new Date(_0x307c2a[_0x23122f(0x43a)][_0x23122f(0x1e5)]*0x3e8)[_0x23122f(0x21a)]():_0x23122f(0x3b2);_0x3a046e[_0x23122f(0x533)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x307c2a[_0x23122f(0x436)]||DEFAULT_TROPHY_IMAGE)+_0x23122f(0x236)+_0x307c2a[_0x23122f(0x53a)]+_0x23122f(0x198)+DEFAULT_TROPHY_IMAGE+_0x23122f(0x263)+(_0x307c2a[_0x23122f(0x53a)]||_0x23122f(0x483))+_0x23122f(0x375)+(_0x307c2a['rarity']||_0x23122f(0x1aa))+'\x22>'+(_0x307c2a[_0x23122f(0x160)]||'common')+_0x23122f(0x1ed)+_0x5dc61e+_0x23122f(0x569)+_0x54e3ff['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x54e3ff['id']+_0x23122f(0x214)+_0x54e3ff['id']+_0x23122f(0x1a6),_0x43daf6[_0x23122f(0x243)](_0x3a046e);}),setupTrophyActionButtons();}catch(_0x23075e){console[_0x17110e(0x3fc)]('Error\x20loading\x20trophy\x20definitions:',_0x23075e),_0x43daf6[_0x17110e(0x533)]=_0x17110e(0x42c)+_0x23075e[_0x17110e(0x1fa)]+_0x17110e(0x33e);}}function setupTrophyActionButtons(){const _0x558c74=a4_0x4f367c;document['querySelectorAll'](_0x558c74(0x399))['forEach'](_0x7db795=>{const _0x3f0e8d=_0x558c74;_0x7db795[_0x3f0e8d(0x4e9)](_0x3f0e8d(0x37e),_0xd2bc59=>{const _0x5d6299=_0x3f0e8d,_0x50c6a9=_0xd2bc59[_0x5d6299(0x249)][_0x5d6299(0x2cd)]['id'];openTrophyModal(_0x50c6a9);});}),document[_0x558c74(0x201)](_0x558c74(0x3d4))['forEach'](_0x3a6021=>{const _0x13f770=_0x558c74;_0x3a6021[_0x13f770(0x4e9)](_0x13f770(0x37e),_0x3acada=>{const _0x2c257c=_0x13f770,_0x38e5c7=_0x3acada[_0x2c257c(0x249)][_0x2c257c(0x2cd)]['id'];openAssignTrophyModal(_0x38e5c7);});}),document[_0x558c74(0x201)](_0x558c74(0x4f6))['forEach'](_0x595141=>{const _0x3ba464=_0x558c74;_0x595141[_0x3ba464(0x4e9)](_0x3ba464(0x37e),_0x2b0989=>{const _0x10d181=_0x3ba464,_0x4c7f5a=_0x2b0989['currentTarget'][_0x10d181(0x2cd)]['id'];confirmDeleteTrophy(_0x4c7f5a);});});}function openTrophyModal(_0x381b9c=null){const _0x220eb1=a4_0x4f367c,_0x28141a=document[_0x220eb1(0x293)](_0x220eb1(0x4cc)),_0x42298c=document[_0x220eb1(0x293)](_0x220eb1(0x2f4)),_0x7502a1=document['getElementById'](_0x220eb1(0x53f)),_0x40b825=document[_0x220eb1(0x293)]('trophy-id');_0x7502a1[_0x220eb1(0x408)](),_0x40b825[_0x220eb1(0x34b)]='';const _0x266b98=document[_0x220eb1(0x293)](_0x220eb1(0x17d));_0x266b98&&(_0x266b98[_0x220eb1(0x154)]=DEFAULT_TROPHY_IMAGE,_0x266b98[_0x220eb1(0x328)][_0x220eb1(0x22a)]('error')),_0x381b9c?(_0x42298c[_0x220eb1(0x2f7)]=_0x220eb1(0x3bf),_0x40b825[_0x220eb1(0x34b)]=_0x381b9c,loadTrophyData(_0x381b9c)):_0x42298c[_0x220eb1(0x2f7)]=_0x220eb1(0x460),_0x28141a[_0x220eb1(0x328)][_0x220eb1(0x2ff)](_0x220eb1(0x560));}async function loadTrophyData(_0x513115){const _0x22afa5=a4_0x4f367c;try{const _0x146a82=doc(db,_0x22afa5(0x485),_0x513115),_0x37aea5=await getDoc(_0x146a82);if(!_0x37aea5['exists']()){showNotification(_0x22afa5(0x464),_0x22afa5(0x3fc));return;}const _0x13c59e=_0x37aea5[_0x22afa5(0x4e3)]();document['getElementById']('trophy-name')[_0x22afa5(0x34b)]=_0x13c59e[_0x22afa5(0x53a)]||'',document[_0x22afa5(0x293)](_0x22afa5(0x429))[_0x22afa5(0x34b)]=_0x13c59e['description']||'',document[_0x22afa5(0x293)](_0x22afa5(0x588))[_0x22afa5(0x34b)]=_0x13c59e[_0x22afa5(0x436)]||'',document['getElementById'](_0x22afa5(0x422))['value']=_0x13c59e[_0x22afa5(0x160)]||_0x22afa5(0x1aa),updateTrophyImagePreview();}catch(_0x1054ca){console[_0x22afa5(0x3fc)](_0x22afa5(0x519),_0x1054ca),showNotification(_0x22afa5(0x2e8),_0x22afa5(0x3fc));}}async function saveTrophyDefinition(){const _0x33153f=a4_0x4f367c;try{const _0x3c24f3=document[_0x33153f(0x293)]('trophy-id')[_0x33153f(0x34b)],_0x4980b7=document['getElementById'](_0x33153f(0x2e5))[_0x33153f(0x34b)][_0x33153f(0x3f7)](),_0x449099=document['getElementById'](_0x33153f(0x429))[_0x33153f(0x34b)]['trim'](),_0x6e2034=document[_0x33153f(0x293)](_0x33153f(0x588))[_0x33153f(0x34b)][_0x33153f(0x3f7)](),_0x186c49=document[_0x33153f(0x293)](_0x33153f(0x422))[_0x33153f(0x34b)];if(!_0x4980b7||!_0x449099||!_0x6e2034){showNotification('All\x20fields\x20are\x20required',_0x33153f(0x3fc));return;}const _0x108f49=auth[_0x33153f(0x3ee)];if(!_0x108f49){showNotification(_0x33153f(0x50f),_0x33153f(0x3fc));return;}const _0x6a937e={'name':_0x4980b7,'description':_0x449099,'image':_0x6e2034,'rarity':_0x186c49,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x108f49[_0x33153f(0x1cb)]};!_0x3c24f3?(_0x6a937e['createdAt']=serverTimestamp(),_0x6a937e[_0x33153f(0x20c)]=_0x108f49[_0x33153f(0x1cb)],await addDoc(collection(db,_0x33153f(0x485)),_0x6a937e),showNotification(_0x33153f(0x4c6),_0x33153f(0x3aa))):(await updateDoc(doc(db,'trophyDefinitions',_0x3c24f3),_0x6a937e),showNotification(_0x33153f(0x4a7),_0x33153f(0x3aa))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x297ae3){console[_0x33153f(0x3fc)]('Error\x20saving\x20trophy:',_0x297ae3),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x297ae3[_0x33153f(0x1fa)],_0x33153f(0x3fc));}}function closeTrophyModal(){const _0x142c51=a4_0x4f367c,_0x5546cc=document['getElementById'](_0x142c51(0x4cc));_0x5546cc&&_0x5546cc[_0x142c51(0x328)]['remove']('active');}async function confirmDeleteTrophy(_0x201ce9){const _0x41bbe3=a4_0x4f367c;if(!_0x201ce9){console[_0x41bbe3(0x3fc)](_0x41bbe3(0x318));return;}if(confirm(_0x41bbe3(0x532)))try{const _0x440d3e=auth['currentUser'];if(!_0x440d3e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies',_0x41bbe3(0x3fc));return;}console[_0x41bbe3(0x538)](_0x41bbe3(0x2d5)+_0x201ce9),await deleteDoc(doc(db,'trophyDefinitions',_0x201ce9)),showNotification('Trophy\x20definition\x20deleted\x20successfully',_0x41bbe3(0x3aa)),loadTrophyDefinitions();}catch(_0x1746ce){console[_0x41bbe3(0x3fc)](_0x41bbe3(0x1fd),_0x1746ce),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x1746ce[_0x41bbe3(0x1fa)],_0x41bbe3(0x3fc));}}async function openAssignTrophyModal(_0x415a0a){const _0x31da24=a4_0x4f367c;try{const _0x29733f=doc(db,_0x31da24(0x485),_0x415a0a),_0x247fe9=await getDoc(_0x29733f);if(!_0x247fe9['exists']()){showNotification(_0x31da24(0x464),_0x31da24(0x3fc));return;}const _0x5d3bcf=_0x247fe9[_0x31da24(0x4e3)]();document[_0x31da24(0x293)](_0x31da24(0x544))[_0x31da24(0x34b)]=_0x415a0a,document['getElementById']('assign-trophy-name')[_0x31da24(0x34b)]=_0x5d3bcf['name'],document['getElementById'](_0x31da24(0x356))['src']=_0x5d3bcf[_0x31da24(0x436)]||DEFAULT_TROPHY_IMAGE,document[_0x31da24(0x293)]('assign-trophy-title')[_0x31da24(0x2f7)]=_0x5d3bcf['name']||'Unnamed\x20Trophy',document[_0x31da24(0x293)](_0x31da24(0x515))[_0x31da24(0x2f7)]=_0x5d3bcf[_0x31da24(0x595)]||'No\x20description';const _0x9f17b8=document[_0x31da24(0x293)](_0x31da24(0x41c));_0x9f17b8[_0x31da24(0x2f7)]=_0x5d3bcf[_0x31da24(0x160)]||_0x31da24(0x1aa),_0x9f17b8[_0x31da24(0x2ae)]='trophy-rarity\x20'+(_0x5d3bcf[_0x31da24(0x160)]||'common');const _0x3f70df=document[_0x31da24(0x293)](_0x31da24(0x1c4));_0x3f70df[_0x31da24(0x328)]['add']('active');}catch(_0x420d34){console[_0x31da24(0x3fc)](_0x31da24(0x49c),_0x420d34),showNotification(_0x31da24(0x2e8),_0x31da24(0x3fc));}}function closeAssignTrophyModal(){const _0x5dc880=a4_0x4f367c,_0x1f80a0=document['getElementById'](_0x5dc880(0x1c4));_0x1f80a0&&_0x1f80a0[_0x5dc880(0x328)][_0x5dc880(0x22a)](_0x5dc880(0x560));}async function assignTrophyToPlayer(){const _0x26f2e2=a4_0x4f367c;try{const _0x58635b=document[_0x26f2e2(0x293)]('assign-trophy-id')['value'],_0x2efcdf=document[_0x26f2e2(0x293)](_0x26f2e2(0x15b))[_0x26f2e2(0x34b)],_0x5513e3=document['getElementById'](_0x26f2e2(0x381))['value']['trim'](),_0x4bbbcf=document[_0x26f2e2(0x1a3)]('input[name=\x22assign-ladder\x22]:checked')[_0x26f2e2(0x34b)];if(!_0x58635b||!_0x5513e3){showNotification(_0x26f2e2(0x45d),_0x26f2e2(0x3fc));return;}const _0x4697f4=auth[_0x26f2e2(0x3ee)];if(!_0x4697f4){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x22e4b5=null,_0x41a6bd=null,_0x560223=null;if(_0x4bbbcf===_0x26f2e2(0x4c8)){const _0x56fb2e=collection(db,_0x26f2e2(0x2a2)),_0x1f0c60=query(_0x56fb2e,where(_0x26f2e2(0x521),'==',_0x5513e3)),_0x28471f=await getDocs(_0x1f0c60);!_0x28471f['empty']&&(_0x22e4b5=_0x28471f[_0x26f2e2(0x57c)][0x0],_0x41a6bd=_0x22e4b5['id'],_0x560223=_0x22e4b5['data']());}else{const _0x15519b=_0x4bbbcf==='D1'?_0x26f2e2(0x378):_0x4bbbcf==='D2'?_0x26f2e2(0x1b4):_0x26f2e2(0x31b),_0x50f52e=collection(db,_0x15519b),_0x5502f6=query(_0x50f52e,where('username','==',_0x5513e3)),_0x161fcd=await getDocs(_0x5502f6);!_0x161fcd[_0x26f2e2(0x16f)]&&(_0x22e4b5=_0x161fcd[_0x26f2e2(0x57c)][0x0],_0x41a6bd=_0x22e4b5['id'],_0x560223=_0x22e4b5[_0x26f2e2(0x4e3)]());}if(!_0x22e4b5){showNotification('Player\x20\x22'+_0x5513e3+'\x22\x20not\x20found\x20in\x20'+(_0x4bbbcf===_0x26f2e2(0x4c8)?_0x26f2e2(0x58b):_0x4bbbcf+_0x26f2e2(0x3be)),_0x26f2e2(0x3fc));return;}const _0x210206=collection(db,_0x26f2e2(0x48e)),_0x2671d8=query(_0x210206,where('userId','==',_0x41a6bd),where(_0x26f2e2(0x2b5),'==',_0x58635b)),_0x2aa92c=await getDocs(_0x2671d8);if(!_0x2aa92c[_0x26f2e2(0x16f)]){showNotification(_0x26f2e2(0x390)+_0x5513e3+_0x26f2e2(0x239),_0x26f2e2(0x219));return;}await addDoc(collection(db,_0x26f2e2(0x48e)),{'userId':_0x41a6bd,'playerUsername':_0x5513e3,'trophyId':_0x58635b,'awardedAt':serverTimestamp(),'awardedBy':_0x4697f4[_0x26f2e2(0x1cb)],'ladder':_0x4bbbcf}),showNotification(_0x26f2e2(0x312)+_0x2efcdf+_0x26f2e2(0x363)+_0x5513e3,_0x26f2e2(0x3aa)),closeAssignTrophyModal();}catch(_0xa70a61){console[_0x26f2e2(0x3fc)](_0x26f2e2(0x579),_0xa70a61),showNotification(_0x26f2e2(0x3ef)+_0xa70a61[_0x26f2e2(0x1fa)],'error');}}function setupInactivePlayersSection(){const _0x20900c=a4_0x4f367c,_0x4ddc76=document['getElementById'](_0x20900c(0x2ab));_0x4ddc76&&_0x4ddc76[_0x20900c(0x4e9)]('change',function(){const _0x4bc155=_0x20900c,_0xe75fca=document[_0x4bc155(0x293)]('load-inactive-players-data');if(_0xe75fca)_0xe75fca['click']();});const _0x2eeabc=document[_0x20900c(0x1a3)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x2179dd=document[_0x20900c(0x1a3)](_0x20900c(0x310));_0x2eeabc&&_0x2179dd&&(_0x2eeabc[_0x20900c(0x4e9)](_0x20900c(0x4dd),function(){const _0x5b527e=_0x20900c;if(this['checked']){currentLadder='D1';if(document[_0x5b527e(0x293)](_0x5b527e(0x340))['style'][_0x5b527e(0x185)]!==_0x5b527e(0x46c)){const _0x18b95f=document[_0x5b527e(0x293)](_0x5b527e(0x1c5));if(_0x18b95f)_0x18b95f['click']();}}}),_0x2179dd[_0x20900c(0x4e9)](_0x20900c(0x4dd),function(){const _0x27397a=_0x20900c;if(this[_0x27397a(0x431)]){currentLadder='D2';if(document['getElementById'](_0x27397a(0x340))[_0x27397a(0x2b6)][_0x27397a(0x185)]!=='none'){const _0x1e3670=document[_0x27397a(0x293)]('load-inactive-players-data');if(_0x1e3670)_0x1e3670['click']();}}}));const _0x438c29=document[_0x20900c(0x293)](_0x20900c(0x33f));_0x438c29&&_0x438c29[_0x20900c(0x4e9)](_0x20900c(0x206),debounce(function(){const _0x137b8c=_0x20900c,_0x3b7f51=_0x438c29[_0x137b8c(0x34b)][_0x137b8c(0x447)](),_0x126573=document[_0x137b8c(0x201)](_0x137b8c(0x204));_0x126573[_0x137b8c(0x2fa)](_0x3bfd37=>{const _0xf33c83=_0x137b8c;if(_0x3bfd37['querySelector'](_0xf33c83(0x554))||_0x3bfd37[_0xf33c83(0x1a3)](_0xf33c83(0x4bd))||_0x3bfd37[_0xf33c83(0x1a3)]('.error-state'))return;const _0x561682=_0x3bfd37[_0xf33c83(0x1c6)][0x0]?.['textContent'][_0xf33c83(0x447)]()||'',_0x2d5ce7=_0x3bfd37[_0xf33c83(0x1c6)][0x5]?.[_0xf33c83(0x2f7)][_0xf33c83(0x447)]()||'';_0x561682['includes'](_0x3b7f51)||_0x2d5ce7[_0xf33c83(0x4c1)](_0x3b7f51)?_0x3bfd37[_0xf33c83(0x2b6)][_0xf33c83(0x185)]='':_0x3bfd37[_0xf33c83(0x2b6)][_0xf33c83(0x185)]=_0xf33c83(0x46c);});},0x12c)),document[_0x20900c(0x4e9)](_0x20900c(0x37e),function(_0x40a50b){const _0x7ca02=_0x20900c;if(_0x40a50b[_0x7ca02(0x44e)][_0x7ca02(0x17e)](_0x7ca02(0x55e))){const _0x4bc5ee=_0x40a50b['target'][_0x7ca02(0x17e)](_0x7ca02(0x55e)),_0x9255e9=_0x4bc5ee['dataset'][_0x7ca02(0x521)];_0x9255e9&&alert(_0x7ca02(0x537)+_0x9255e9+_0x7ca02(0x266));}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x35c2b4=a4_0x4f367c,_0x1bde9b=document['getElementById'](_0x35c2b4(0x4df));if(!_0x1bde9b)return;_0x1bde9b[_0x35c2b4(0x533)]=_0x35c2b4(0x40b);try{const _0x14fccd=document[_0x35c2b4(0x293)](_0x35c2b4(0x2ab)),_0x10eaaa=_0x14fccd?parseInt(_0x14fccd['value'])||0x0:0x0,_0x1068aa=collection(db,currentLadder==='D1'?_0x35c2b4(0x378):_0x35c2b4(0x1b4)),_0x34144d=await getDocs(_0x1068aa);if(_0x34144d['empty']){_0x1bde9b[_0x35c2b4(0x533)]=_0x35c2b4(0x16c);return;}const _0x282916=[];_0x34144d['forEach'](_0x2c9a2a=>{const _0x31145b=_0x35c2b4,_0x1728ed=_0x2c9a2a[_0x31145b(0x4e3)]();_0x282916[_0x31145b(0x1ec)]({..._0x1728ed,'id':_0x2c9a2a['id'],'username':_0x1728ed['username']||_0x31145b(0x590)});}),console[_0x35c2b4(0x538)](_0x35c2b4(0x527)+_0x282916[_0x35c2b4(0x283)]+_0x35c2b4(0x46f)+currentLadder+_0x35c2b4(0x3be));const _0x20671a=currentLadder==='D1'?_0x35c2b4(0x272):_0x35c2b4(0x44a),_0x128104=_0x282916[_0x35c2b4(0x3ac)](async _0x446bb5=>{const _0x19727c=_0x35c2b4;try{const _0x5adc16=collection(db,_0x20671a),_0x3e4211=query(_0x5adc16,or(where('winnerUsername','==',_0x446bb5[_0x19727c(0x521)]),where(_0x19727c(0x48b),'==',_0x446bb5['username'])),orderBy(_0x19727c(0x3dc),_0x19727c(0x494)),limit(0x1)),_0x5d098e=await getDocs(_0x3e4211);if(!_0x5d098e['empty']){const _0x39375e=_0x5d098e['docs'][0x0][_0x19727c(0x4e3)](),_0x371828=_0x39375e[_0x19727c(0x3dc)]?new Date(_0x39375e['approvedAt'][_0x19727c(0x1e5)]*0x3e8):null,_0xd8329a=new Date(),_0x3fb536=_0x371828?Math['floor']((_0xd8329a-_0x371828)/(0x3e8*0x3c*0x3c*0x18)):null,_0x9c982=_0x39375e[_0x19727c(0x1db)]===_0x446bb5[_0x19727c(0x521)]?_0x39375e[_0x19727c(0x48b)]:_0x39375e[_0x19727c(0x1db)],_0x2b202d=_0x39375e[_0x19727c(0x1db)]===_0x446bb5[_0x19727c(0x521)]?_0x19727c(0x55a):_0x19727c(0x332);return{..._0x446bb5,'lastMatch':{'date':_0x371828?_0x371828[_0x19727c(0x175)]():_0x19727c(0x3b2),'opponent':_0x9c982||_0x19727c(0x546),'result':_0x2b202d,'timestamp':_0x371828||new Date(0x0),'daysSinceMatch':_0x3fb536||Number[_0x19727c(0x16a)]}};}else return{..._0x446bb5,'lastMatch':{'date':_0x19727c(0x1d1),'opponent':_0x19727c(0x3b2),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x19727c(0x16a)]}};}catch(_0x4fa721){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x446bb5[_0x19727c(0x521)]+':',_0x4fa721),{..._0x446bb5,'lastMatch':{'date':_0x19727c(0x46b),'opponent':'Error','result':_0x19727c(0x46b),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x4f6771=await Promise['all'](_0x128104);_0x4f6771['sort']((_0x4604cf,_0x46e487)=>_0x46e487[_0x35c2b4(0x1e9)]['daysSinceMatch']-_0x4604cf[_0x35c2b4(0x1e9)][_0x35c2b4(0x377)]);_0x10eaaa>0x0&&(_0x4f6771=_0x4f6771[_0x35c2b4(0x3b9)](_0xc8e48=>_0xc8e48['lastMatch'][_0x35c2b4(0x377)]>=_0x10eaaa));_0x1bde9b['innerHTML']='';if(_0x4f6771[_0x35c2b4(0x283)]===0x0){_0x1bde9b[_0x35c2b4(0x533)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x4f6771[_0x35c2b4(0x2fa)](_0x1f79a2=>{const _0x5339e3=_0x35c2b4,_0x8cb5a9=document[_0x5339e3(0x218)]('tr'),_0xcef717=_0x1f79a2[_0x5339e3(0x1e9)][_0x5339e3(0x377)]>0x1e?_0x5339e3(0x2dd):_0x1f79a2[_0x5339e3(0x1e9)]['daysSinceMatch']>0xe?_0x5339e3(0x15a):'';_0x8cb5a9['className']=_0xcef717,_0x8cb5a9['innerHTML']=_0x5339e3(0x1c2)+_0x1f79a2['username']+_0x5339e3(0x33a)+(_0x1f79a2['eloRating']||0x4b0)+_0x5339e3(0x33a)+_0x1f79a2[_0x5339e3(0x1e9)]['date']+_0x5339e3(0x33a)+(_0x1f79a2[_0x5339e3(0x1e9)][_0x5339e3(0x377)]===Number[_0x5339e3(0x16a)]?_0x5339e3(0x3b2):_0x1f79a2['lastMatch'][_0x5339e3(0x377)])+_0x5339e3(0x33a)+currentLadder+_0x5339e3(0x33a)+(_0x1f79a2['lastMatch'][_0x5339e3(0x4cd)]===_0x5339e3(0x1d1)?_0x5339e3(0x25d):_0x1f79a2[_0x5339e3(0x1e9)][_0x5339e3(0x48f)]+_0x5339e3(0x498)+_0x1f79a2[_0x5339e3(0x1e9)]['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x1f79a2[_0x5339e3(0x521)]+_0x5339e3(0x476),_0x1bde9b['appendChild'](_0x8cb5a9);}),console[_0x35c2b4(0x538)](_0x35c2b4(0x172)+_0x4f6771['length']+_0x35c2b4(0x2a7));}catch(_0x1f7825){console[_0x35c2b4(0x3fc)](_0x35c2b4(0x4ad),_0x1f7825),_0x1bde9b[_0x35c2b4(0x533)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x1f7825[_0x35c2b4(0x1fa)]+_0x35c2b4(0x32d);}}function setupHighlightButtons(){const _0x1aa772=a4_0x4f367c;console[_0x1aa772(0x538)](_0x1aa772(0x20f));const _0x10debf=document['getElementById'](_0x1aa772(0x2a8));_0x10debf&&_0x10debf['addEventListener']('click',function(){const _0x46eb8e=_0x1aa772;console[_0x46eb8e(0x538)]('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x46eb8e(0x163));});const _0x57126c=document['getElementById']('create-creator-highlight-btn');_0x57126c&&_0x57126c[_0x1aa772(0x4e9)](_0x1aa772(0x37e),function(){const _0x41f09b=_0x1aa772;console[_0x41f09b(0x538)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x41f09b(0x18e));});const _0x2514c9=document[_0x1aa772(0x293)](_0x1aa772(0x557));_0x2514c9&&_0x2514c9[_0x1aa772(0x4e9)](_0x1aa772(0x37e),function(){const _0x15897f=_0x1aa772;console[_0x15897f(0x538)](_0x15897f(0x57a)),openHighlightModal('achievement');});}function openHighlightModal(_0x1be7a0=a4_0x4f367c(0x163)){const _0x4b7108=a4_0x4f367c;console['log'](_0x4b7108(0x539)+_0x1be7a0);const _0x249f1a=document[_0x4b7108(0x293)](_0x4b7108(0x439)),_0x4c20bd=document[_0x4b7108(0x293)](_0x4b7108(0x49a)),_0x23bad5=document[_0x4b7108(0x293)](_0x4b7108(0x25b)),_0x2a3e80=document[_0x4b7108(0x293)](_0x4b7108(0x47e));if(!_0x249f1a||!_0x4c20bd||!_0x23bad5){console[_0x4b7108(0x3fc)](_0x4b7108(0x277));return;}_0x4c20bd[_0x4b7108(0x408)](),_0x2a3e80[_0x4b7108(0x34b)]='';const _0xea9c5=[_0x4b7108(0x163),_0x4b7108(0x18e),_0x4b7108(0x1fb)],_0x169ca5=!_0xea9c5[_0x4b7108(0x4c1)](_0x1be7a0);if(_0x169ca5){const _0x5d526e=_0x1be7a0;_0x2a3e80[_0x4b7108(0x34b)]=_0x5d526e,_0x23bad5[_0x4b7108(0x2f7)]=_0x4b7108(0x1dc),loadHighlightDataAdmin(_0x5d526e);}else{const _0x784f58=_0x1be7a0;document['getElementById'](_0x4b7108(0x1f0))[_0x4b7108(0x34b)]=_0x784f58,_0x23bad5[_0x4b7108(0x2f7)]='Create\x20New\x20'+getHighlightTypeName(_0x784f58),toggleHighlightFields(_0x784f58);const _0x36ea93=auth['currentUser'];_0x36ea93&&document['getElementById'](_0x4b7108(0x4f2))&&(document[_0x4b7108(0x293)](_0x4b7108(0x4f2))['value']=_0x36ea93['displayName']||_0x36ea93[_0x4b7108(0x1cb)]);}_0x249f1a['classList'][_0x4b7108(0x2ff)]('active');}function toggleHighlightFields(_0x292354){const _0xf7b744=a4_0x4f367c;console['log'](_0xf7b744(0x47d)+_0x292354);const _0x142e97=document[_0xf7b744(0x293)](_0xf7b744(0x49a));if(!_0x142e97)return;const _0x187b19=_0x142e97['querySelectorAll']('.form-group,\x20.form-row');_0x187b19[_0xf7b744(0x2fa)](_0x573594=>_0x573594[_0xf7b744(0x2b6)][_0xf7b744(0x185)]=_0xf7b744(0x46c));const _0x54180c=document[_0xf7b744(0x293)](_0xf7b744(0x1ca));if(_0x54180c)_0x54180c['style'][_0xf7b744(0x185)]=_0xf7b744(0x46c);const _0x12f4d6=[_0xf7b744(0x4fb),'highlight-description-container','highlight-submitted-by-container'];_0x12f4d6[_0xf7b744(0x2fa)](_0x574902=>{const _0x300f9f=_0xf7b744,_0x182802=document['getElementById'](_0x574902);if(_0x182802)_0x182802['style'][_0x300f9f(0x185)]=_0x300f9f(0x2f1);});if(_0x292354===_0xf7b744(0x163)){const _0x2950b6=[_0xf7b744(0x433),_0xf7b744(0x35d),_0xf7b744(0x2e1),_0xf7b744(0x49f),_0xf7b744(0x1ea),_0xf7b744(0x4ca)];_0x2950b6[_0xf7b744(0x2fa)](_0x223864=>{const _0x4c26e6=_0xf7b744,_0x5f41b3=document[_0x4c26e6(0x293)](_0x223864);_0x5f41b3&&(_0x223864===_0x4c26e6(0x1ea)?_0x5f41b3[_0x4c26e6(0x2b6)][_0x4c26e6(0x185)]=_0x4c26e6(0x2c7):_0x5f41b3[_0x4c26e6(0x2b6)][_0x4c26e6(0x185)]=_0x4c26e6(0x2f1));});const _0x2538c0=document['getElementById'](_0xf7b744(0x2fd));if(_0x2538c0){_0x2538c0[_0xf7b744(0x420)]=!![];const _0x1eade6=_0x2538c0[_0xf7b744(0x24c)];if(_0x1eade6)_0x1eade6[_0xf7b744(0x533)]=_0xf7b744(0x506);}if(_0x54180c)_0x54180c[_0xf7b744(0x2b6)][_0xf7b744(0x185)]=_0xf7b744(0x2f1);updateHighlightVideoPreview();}else{if(_0x292354===_0xf7b744(0x18e)){const _0x5d1028=['highlight-map-container',_0xf7b744(0x4f3),_0xf7b744(0x14c),'highlight-creator-image-container','highlight-video-container'];_0x5d1028[_0xf7b744(0x2fa)](_0x1ff1f=>{const _0x50cd0a=_0xf7b744,_0x1d4de1=document[_0x50cd0a(0x293)](_0x1ff1f);if(_0x1d4de1)_0x1d4de1[_0x50cd0a(0x2b6)]['display']='block';});const _0x1b0b93=document['getElementById'](_0xf7b744(0x2fd));if(_0x1b0b93){_0x1b0b93['required']=![];const _0x47a7b0=_0x1b0b93['previousElementSibling'];if(_0x47a7b0)_0x47a7b0['innerHTML']=_0xf7b744(0x1d5);}}else{if(_0x292354==='achievement'){const _0x256189=['highlight-achievement-player-container',_0xf7b744(0x2c2),_0xf7b744(0x355),_0xf7b744(0x196),_0xf7b744(0x149),_0xf7b744(0x433)];_0x256189[_0xf7b744(0x2fa)](_0x278de4=>{const _0x525101=_0xf7b744,_0x28a6d7=document[_0x525101(0x293)](_0x278de4);if(_0x28a6d7)_0x28a6d7[_0x525101(0x2b6)][_0x525101(0x185)]=_0x525101(0x2f1);});const _0x3e2fe2=document['getElementById'](_0xf7b744(0x2fd));if(_0x3e2fe2){_0x3e2fe2[_0xf7b744(0x420)]=![];const _0x60474=_0x3e2fe2[_0xf7b744(0x24c)];if(_0x60474)_0x60474[_0xf7b744(0x533)]=_0xf7b744(0x1d5);}}}}}async function loadHighlightDataAdmin(_0x4d1ac8){const _0xe186e0=a4_0x4f367c;try{const _0x13a6fb=doc(db,_0xe186e0(0x3bb),_0x4d1ac8),_0x21fc74=await getDoc(_0x13a6fb);if(!_0x21fc74['exists']()){showNotification('Highlight\x20not\x20found',_0xe186e0(0x3fc));return;}const _0x6df4f6=_0x21fc74[_0xe186e0(0x4e3)](),_0x18a30d=_0x6df4f6['type']||_0xe186e0(0x163);document[_0xe186e0(0x293)](_0xe186e0(0x25b))[_0xe186e0(0x2f7)]=_0xe186e0(0x1e0)+getHighlightTypeName(_0x18a30d),document['getElementById'](_0xe186e0(0x1f0))[_0xe186e0(0x34b)]=_0x18a30d,toggleHighlightFields(_0x18a30d),document[_0xe186e0(0x293)]('highlight-title')['value']=_0x6df4f6[_0xe186e0(0x501)]||'',document[_0xe186e0(0x293)]('highlight-description')[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x595)]||'',document[_0xe186e0(0x293)](_0xe186e0(0x4f2))[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x314)]||'';_0x6df4f6['videoId']&&(document[_0xe186e0(0x293)](_0xe186e0(0x2fd))[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x3a5)],updateHighlightVideoPreview());if(_0x18a30d===_0xe186e0(0x163)){document[_0xe186e0(0x293)](_0xe186e0(0x271))[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x453)]||'',document[_0xe186e0(0x293)]('highlight-map')[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x3ac)]||'';if(_0x6df4f6['matchDate']){const _0x3ac3b4=new Date(_0x6df4f6[_0xe186e0(0x25c)][_0xe186e0(0x1e5)]*0x3e8);document['getElementById'](_0xe186e0(0x368))[_0xe186e0(0x34b)]=_0x3ac3b4['toISOString']()[_0xe186e0(0x230)]('T')[0x0];}document[_0xe186e0(0x293)]('highlight-winner-name')[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x27a)]||'',document['getElementById'](_0xe186e0(0x3a7))[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x268)]||'',document[_0xe186e0(0x293)]('highlight-loser-name')['value']=_0x6df4f6['loserName']||'',document['getElementById'](_0xe186e0(0x580))[_0xe186e0(0x34b)]=_0x6df4f6['loserScore']||'',document[_0xe186e0(0x293)]('highlight-match-link')[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x589)]||'';}else{if(_0x18a30d===_0xe186e0(0x18e))document[_0xe186e0(0x293)]('highlight-map')['value']=_0x6df4f6[_0xe186e0(0x3ac)]||'',document['getElementById'](_0xe186e0(0x59b))['value']=_0x6df4f6[_0xe186e0(0x3fd)]||'',document[_0xe186e0(0x293)](_0xe186e0(0x52d))[_0xe186e0(0x34b)]=_0x6df4f6['mapVersion']||'',document['getElementById'](_0xe186e0(0x150))[_0xe186e0(0x34b)]=_0x6df4f6['creatorImageUrl']||'';else _0x18a30d===_0xe186e0(0x1fb)&&(document[_0xe186e0(0x293)](_0xe186e0(0x35f))[_0xe186e0(0x34b)]=_0x6df4f6['achievementPlayer']||'',document[_0xe186e0(0x293)](_0xe186e0(0x4b4))[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x2e4)]||'',document['getElementById'](_0xe186e0(0x1bb))['value']=_0x6df4f6['achievementDetails']||'',document[_0xe186e0(0x293)]('highlight-player-profile')[_0xe186e0(0x34b)]=_0x6df4f6[_0xe186e0(0x510)]||'',document[_0xe186e0(0x293)](_0xe186e0(0x24b))[_0xe186e0(0x34b)]=_0x6df4f6['achievementImageUrl']||'');}}catch(_0x2c606b){console[_0xe186e0(0x3fc)](_0xe186e0(0x2dc),_0x2c606b),showNotification(_0xe186e0(0x43e)+_0x2c606b['message'],'error');}}async function saveHighlight(){const _0x3f2b7c=a4_0x4f367c;try{const _0x3558ee=document[_0x3f2b7c(0x293)]('highlight-id')?.['value']||'',_0x1010a5=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x1f0))?.[_0x3f2b7c(0x34b)]||_0x3f2b7c(0x163),_0x48c5c8={'title':document[_0x3f2b7c(0x293)]('highlight-title')?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'','description':document[_0x3f2b7c(0x293)]('highlight-description')?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'','submittedBy':document[_0x3f2b7c(0x293)]('highlight-submitted-by')?.[_0x3f2b7c(0x34b)]?.['trim']()||'','videoId':document[_0x3f2b7c(0x293)](_0x3f2b7c(0x2fd))?.['value']?.[_0x3f2b7c(0x3f7)]()||null,'type':_0x1010a5};if(!_0x48c5c8[_0x3f2b7c(0x501)]){showNotification('Title\x20is\x20required',_0x3f2b7c(0x3fc));return;}if(_0x1010a5===_0x3f2b7c(0x163)){_0x48c5c8[_0x3f2b7c(0x453)]=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x271))?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'',_0x48c5c8[_0x3f2b7c(0x3ac)]=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x1ac))?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'';const _0x5a5f5d=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x368)),_0x155d55=_0x5a5f5d?.[_0x3f2b7c(0x34b)]||'';_0x48c5c8[_0x3f2b7c(0x25c)]=_0x155d55?Timestamp[_0x3f2b7c(0x425)](new Date(_0x155d55)):null,_0x48c5c8[_0x3f2b7c(0x27a)]=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x4bc))?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'',_0x48c5c8['winnerScore']=document['getElementById']('highlight-winner-score')?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'',_0x48c5c8[_0x3f2b7c(0x561)]=document['getElementById'](_0x3f2b7c(0x534))?.['value']?.['trim']()||'',_0x48c5c8[_0x3f2b7c(0x491)]=document[_0x3f2b7c(0x293)]('highlight-loser-score')?.['value']?.[_0x3f2b7c(0x3f7)]()||'',_0x48c5c8[_0x3f2b7c(0x589)]=document['getElementById'](_0x3f2b7c(0x3fa))?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'';if(!_0x48c5c8[_0x3f2b7c(0x3a5)]){showNotification(_0x3f2b7c(0x23c),_0x3f2b7c(0x3fc));return;}}else{if(_0x1010a5==='creator'){_0x48c5c8[_0x3f2b7c(0x3ac)]=document[_0x3f2b7c(0x293)]('highlight-map')?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'',_0x48c5c8[_0x3f2b7c(0x3fd)]=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x59b))?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'',_0x48c5c8['mapVersion']=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x52d))?.[_0x3f2b7c(0x34b)]?.['trim']()||'',_0x48c5c8['creatorImageUrl']=document[_0x3f2b7c(0x293)]('highlight-creator-image')?.[_0x3f2b7c(0x34b)]?.['trim']()||'';if(!_0x48c5c8[_0x3f2b7c(0x3fd)]){showNotification(_0x3f2b7c(0x2d4),'error');return;}}else{if(_0x1010a5===_0x3f2b7c(0x1fb)){_0x48c5c8[_0x3f2b7c(0x331)]=document['getElementById'](_0x3f2b7c(0x35f))?.[_0x3f2b7c(0x34b)]?.['trim']()||'',_0x48c5c8[_0x3f2b7c(0x2e4)]=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x4b4))?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'',_0x48c5c8[_0x3f2b7c(0x424)]=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x1bb))?.[_0x3f2b7c(0x34b)]?.['trim']()||'',_0x48c5c8[_0x3f2b7c(0x510)]=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x419))?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'',_0x48c5c8[_0x3f2b7c(0x4f1)]=document[_0x3f2b7c(0x293)](_0x3f2b7c(0x24b))?.[_0x3f2b7c(0x34b)]?.[_0x3f2b7c(0x3f7)]()||'';if(!_0x48c5c8[_0x3f2b7c(0x331)]){showNotification(_0x3f2b7c(0x295),'error');return;}}}}_0x3558ee?(_0x48c5c8[_0x3f2b7c(0x224)]=serverTimestamp(),await updateDoc(doc(db,_0x3f2b7c(0x3bb),_0x3558ee),_0x48c5c8),showNotification(_0x3f2b7c(0x1f4),_0x3f2b7c(0x3aa))):(_0x48c5c8['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x48c5c8),showNotification('Highlight\x20created\x20successfully!',_0x3f2b7c(0x3aa))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x31f12e){console[_0x3f2b7c(0x3fc)](_0x3f2b7c(0x14b),_0x31f12e),showNotification('Error\x20saving\x20highlight:\x20'+_0x31f12e[_0x3f2b7c(0x1fa)],_0x3f2b7c(0x3fc));}}function closeHighlightModal(){const _0x191a24=a4_0x4f367c,_0x3e501d=document['getElementById'](_0x191a24(0x439));if(_0x3e501d)_0x3e501d[_0x191a24(0x328)][_0x191a24(0x22a)](_0x191a24(0x560));}function getHighlightTypeName(_0x290205){const _0x132ac8=a4_0x4f367c;switch(_0x290205){case _0x132ac8(0x163):return _0x132ac8(0x3c5);case'creator':return _0x132ac8(0x2c4);case _0x132ac8(0x1fb):return _0x132ac8(0x526);default:return _0x132ac8(0x4e8);}}function updateHighlightVideoPreview(){const _0x5b6f98=a4_0x4f367c,_0x257093=document[_0x5b6f98(0x293)](_0x5b6f98(0x2fd)),_0x21510b=document['getElementById'](_0x5b6f98(0x1ca)),_0x4609e9=document['getElementById'](_0x5b6f98(0x1e1));if(!_0x257093||!_0x4609e9||!_0x21510b)return;const _0x51f60e=_0x257093[_0x5b6f98(0x34b)][_0x5b6f98(0x3f7)]();_0x51f60e&&/^[a-zA-Z0-9_-]{11}$/[_0x5b6f98(0x4d1)](_0x51f60e)?(_0x4609e9[_0x5b6f98(0x154)]='https://www.youtube.com/embed/'+_0x51f60e,_0x21510b[_0x5b6f98(0x2b6)][_0x5b6f98(0x185)]=_0x5b6f98(0x2f1)):(_0x4609e9[_0x5b6f98(0x154)]='',_0x21510b[_0x5b6f98(0x2b6)]['display']=_0x5b6f98(0x46c));}async function loadHighlightsAdmin(){const _0x31d4cb=a4_0x4f367c,_0x553859=document[_0x31d4cb(0x293)]('highlights-table-body');if(!_0x553859)return;_0x553859['innerHTML']=_0x31d4cb(0x338);try{const _0x28ba1b=query(collection(db,'highlights'),orderBy(_0x31d4cb(0x43a),_0x31d4cb(0x494))),_0x27a540=await getDocs(_0x28ba1b);if(_0x27a540['empty']){_0x553859[_0x31d4cb(0x533)]=_0x31d4cb(0x58c);return;}_0x553859[_0x31d4cb(0x533)]='',_0x27a540[_0x31d4cb(0x2fa)](_0x228d23=>{const _0x135f50=_0x31d4cb,_0x7d30c2=_0x228d23[_0x135f50(0x4e3)](),_0x492d4b=document['createElement']('tr'),_0x44f3dd=_0x7d30c2[_0x135f50(0x43a)]?new Date(_0x7d30c2[_0x135f50(0x43a)]['seconds']*0x3e8)[_0x135f50(0x175)]():_0x135f50(0x3b2);let _0x1caaf0=_0x135f50(0x546),_0x32cf24='';switch(_0x7d30c2[_0x135f50(0x1c3)]){case'match':_0x1caaf0='Match',_0x32cf24=_0x135f50(0x593);break;case _0x135f50(0x18e):_0x1caaf0=_0x135f50(0x313),_0x32cf24=_0x135f50(0x34c);break;case'achievement':_0x1caaf0='Achievement',_0x32cf24='achievement-type';break;}_0x492d4b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x7d30c2[_0x135f50(0x501)]||_0x135f50(0x2da))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x32cf24+'\x22>'+_0x1caaf0+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44f3dd+_0x135f50(0x33a)+(_0x7d30c2[_0x135f50(0x314)]||_0x135f50(0x546))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x7d30c2[_0x135f50(0x3a5)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x135f50(0x482))+_0x135f50(0x587)+_0x228d23['id']+_0x135f50(0x2a9)+_0x228d23['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x553859[_0x135f50(0x243)](_0x492d4b);}),document[_0x31d4cb(0x201)](_0x31d4cb(0x388))['forEach'](_0xb3456c=>{const _0x1a374b=_0x31d4cb;_0xb3456c[_0x1a374b(0x4e9)]('click',_0x282856=>{const _0x1a8784=_0x1a374b;openHighlightModal(_0x282856[_0x1a8784(0x249)]['dataset']['id']);});}),document[_0x31d4cb(0x201)](_0x31d4cb(0x411))[_0x31d4cb(0x2fa)](_0x2cdbad=>{const _0x153607=_0x31d4cb;_0x2cdbad[_0x153607(0x4e9)](_0x153607(0x37e),_0x171a4d=>{const _0x35b37b=_0x153607;confirmDeleteHighlight(_0x171a4d[_0x35b37b(0x249)]['dataset']['id']);});});}catch(_0x2bf450){console[_0x31d4cb(0x3fc)]('Error\x20loading\x20highlights:',_0x2bf450),_0x553859['innerHTML']=_0x31d4cb(0x4b6)+_0x2bf450[_0x31d4cb(0x1fa)]+_0x31d4cb(0x33e);}}async function confirmDeleteHighlight(_0x31af98){const _0x23457e=a4_0x4f367c;if(confirm(_0x23457e(0x56f)))try{await deleteDoc(doc(db,_0x23457e(0x3bb),_0x31af98)),showNotification(_0x23457e(0x512),_0x23457e(0x3aa)),loadHighlightsAdmin();}catch(_0xe6af82){console[_0x23457e(0x3fc)]('Error\x20deleting\x20highlight:',_0xe6af82),showNotification('Error\x20deleting\x20highlight:\x20'+_0xe6af82[_0x23457e(0x1fa)],_0x23457e(0x3fc));}}function setupCreateTestMatchModal(){const _0x5a94ae=a4_0x4f367c;console[_0x5a94ae(0x538)]('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x59e73e=document[_0x5a94ae(0x293)](_0x5a94ae(0x426)),_0x5bbee2=document['getElementById'](_0x5a94ae(0x578));if(!_0x59e73e){console[_0x5a94ae(0x3fc)](_0x5a94ae(0x58a));return;}if(!_0x5bbee2){console[_0x5a94ae(0x3fc)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x42e89c=_0x59e73e[_0x5a94ae(0x30b)](!![]);_0x59e73e[_0x5a94ae(0x2d2)][_0x5a94ae(0x50e)](_0x42e89c,_0x59e73e);const _0x14d598=_0x42e89c[_0x5a94ae(0x1a3)]('#create-test-match-form');_0x42e89c[_0x5a94ae(0x4e9)]('click',function(_0x93879){const _0x212aa6=_0x5a94ae;_0x93879[_0x212aa6(0x44e)]===_0x42e89c&&(console[_0x212aa6(0x538)](_0x212aa6(0x301)),closeCreateTestMatchModal());});const _0x42e17f=_0x42e89c[_0x5a94ae(0x1a3)]('.close-btn');_0x42e17f&&_0x42e17f[_0x5a94ae(0x4e9)](_0x5a94ae(0x37e),function(_0x32959c){const _0x5aff97=_0x5a94ae;_0x32959c[_0x5aff97(0x59d)](),_0x32959c[_0x5aff97(0x400)](),console['log'](_0x5aff97(0x19e)),closeCreateTestMatchModal();});const _0x34eafe=_0x42e89c[_0x5a94ae(0x1a3)](_0x5a94ae(0x32e));_0x34eafe&&_0x34eafe['addEventListener'](_0x5a94ae(0x37e),function(_0x3e3556){const _0x66a9e=_0x5a94ae;_0x3e3556[_0x66a9e(0x59d)](),_0x3e3556[_0x66a9e(0x400)](),console['log'](_0x66a9e(0x487)),closeCreateTestMatchModal();});if(_0x14d598){_0x14d598['addEventListener'](_0x5a94ae(0x4c4),function(_0x29f0ed){const _0x1a42c2=_0x5a94ae;_0x29f0ed[_0x1a42c2(0x59d)](),_0x29f0ed[_0x1a42c2(0x400)](),console[_0x1a42c2(0x538)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x2ac640=_0x14d598[_0x5a94ae(0x1a3)]('button[type=\x22submit\x22]');_0x2ac640&&_0x2ac640[_0x5a94ae(0x4e9)]('click',function(_0x268acd){const _0x56c854=_0x5a94ae;_0x268acd[_0x56c854(0x59d)](),_0x268acd[_0x56c854(0x400)](),console[_0x56c854(0x538)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x5a94ae(0x538)]('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x1f1d4f=a4_0x4f367c;console['log'](_0x1f1d4f(0x3b6)),setupHighlightButtons();const _0x402090=document[_0x1f1d4f(0x293)](_0x1f1d4f(0x49a));_0x402090&&_0x402090[_0x1f1d4f(0x4e9)](_0x1f1d4f(0x4c4),_0x310994=>{_0x310994['preventDefault'](),saveHighlight();});const _0x15609c=document['getElementById'](_0x1f1d4f(0x28a));_0x15609c&&_0x15609c[_0x1f1d4f(0x4e9)](_0x1f1d4f(0x37e),closeHighlightModal);const _0x3fd262=document[_0x1f1d4f(0x1a3)](_0x1f1d4f(0x45f));_0x3fd262&&_0x3fd262[_0x1f1d4f(0x4e9)]('click',closeHighlightModal);const _0x14da13=document['getElementById'](_0x1f1d4f(0x439));_0x14da13&&_0x14da13[_0x1f1d4f(0x4e9)]('click',_0x1dd1bc=>{const _0x5b6b79=_0x1f1d4f;_0x1dd1bc[_0x5b6b79(0x44e)]===_0x14da13&&closeHighlightModal();});const _0x2388f5=document[_0x1f1d4f(0x293)](_0x1f1d4f(0x2fd));_0x2388f5&&_0x2388f5[_0x1f1d4f(0x4e9)]('input',()=>{updateHighlightVideoPreview();}),console[_0x1f1d4f(0x538)]('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x518cbd=a4_0x4f367c;console[_0x518cbd(0x538)]('Setting\x20up\x20Manage\x20Matches\x20section');const _0x51cf42=document[_0x518cbd(0x293)]('matches-prev-page'),_0x7d5835=document['getElementById'](_0x518cbd(0x257));_0x51cf42&&_0x51cf42['addEventListener'](_0x518cbd(0x37e),()=>{const _0x1e7175=_0x518cbd,_0x13ef20=currentLadder[_0x1e7175(0x447)]();loadMatchesData(matchesPagination[_0x13ef20][_0x1e7175(0x55b)]-0x1);});_0x7d5835&&_0x7d5835['addEventListener'](_0x518cbd(0x37e),()=>{const _0x48e633=_0x518cbd,_0x3d9b26=currentLadder[_0x48e633(0x447)]();loadMatchesData(matchesPagination[_0x3d9b26][_0x48e633(0x55b)]+0x1);});const _0x2efae8=document[_0x518cbd(0x293)](_0x518cbd(0x311)),_0x1508f8=document['getElementById'](_0x518cbd(0x322));_0x2efae8&&_0x2efae8[_0x518cbd(0x4e9)](_0x518cbd(0x37e),applyMatchesFilters);_0x1508f8&&_0x1508f8['addEventListener'](_0x518cbd(0x37e),resetMatchesFilters);const _0x28a23a=document['getElementById']('matches-search');_0x28a23a&&_0x28a23a[_0x518cbd(0x4e9)](_0x518cbd(0x206),debounce(filterMatchesTable,0x12c));const _0x3a1fd5=document[_0x518cbd(0x293)](_0x518cbd(0x2ef));_0x3a1fd5&&_0x3a1fd5[_0x518cbd(0x4e9)](_0x518cbd(0x37e),openResimulateModal);const _0x5b2b38=document[_0x518cbd(0x293)](_0x518cbd(0x495));if(_0x5b2b38){const _0x4c324d=_0x5b2b38['querySelector'](_0x518cbd(0x440));_0x4c324d&&_0x4c324d[_0x518cbd(0x4e9)](_0x518cbd(0x37e),closeResimulateModal),_0x5b2b38[_0x518cbd(0x4e9)]('click',_0x442b4b=>{const _0x5e1f83=_0x518cbd;_0x442b4b[_0x5e1f83(0x44e)]===_0x5b2b38&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console[_0x518cbd(0x538)](_0x518cbd(0x21f));}function openCreateTestMatchModal(){const _0x122dc9=a4_0x4f367c;console[_0x122dc9(0x538)](_0x122dc9(0x1cf));const _0x38141b=document[_0x122dc9(0x293)](_0x122dc9(0x426)),_0x467798=document[_0x122dc9(0x293)](_0x122dc9(0x578));if(!_0x38141b){console[_0x122dc9(0x3fc)](_0x122dc9(0x4d5)),showNotification(_0x122dc9(0x4d5),'error');return;}if(!_0x467798){console['error'](_0x122dc9(0x168)),showNotification(_0x122dc9(0x168),_0x122dc9(0x3fc));return;}_0x467798[_0x122dc9(0x408)]();const _0x50f0e1=document[_0x122dc9(0x201)](_0x122dc9(0x490));let _0x48b855=![];_0x50f0e1['forEach'](_0x5dc6fb=>{const _0x42d25b=_0x122dc9;console[_0x42d25b(0x538)](_0x42d25b(0x369),_0x5dc6fb[_0x42d25b(0x34b)]),_0x5dc6fb[_0x42d25b(0x34b)]===currentLadder&&(_0x5dc6fb['checked']=!![],_0x48b855=!![],console[_0x42d25b(0x538)](_0x42d25b(0x427),currentLadder));});if(!_0x48b855){console['warn'](_0x122dc9(0x232),currentLadder);const _0x11216d=document[_0x122dc9(0x1a3)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x11216d&&(_0x11216d['checked']=!![],console[_0x122dc9(0x538)]('Defaulted\x20to\x20D1\x20ladder'));}const _0x142679=document[_0x122dc9(0x293)]('test-match-date');if(_0x142679){const _0x77b1ad=new Date()[_0x122dc9(0x489)]()[_0x122dc9(0x230)]('T')[0x0];_0x142679['value']=_0x77b1ad;}_0x38141b['style']['display']=_0x122dc9(0x2c7),_0x38141b['style'][_0x122dc9(0x34a)]='visible',_0x38141b['style'][_0x122dc9(0x358)]='1',_0x38141b[_0x122dc9(0x328)][_0x122dc9(0x2ff)]('active'),console[_0x122dc9(0x538)](_0x122dc9(0x2ac));const _0x55f1fb=document['getElementById'](_0x122dc9(0x281));_0x55f1fb&&setTimeout(()=>{_0x55f1fb['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x3e1fb0=a4_0x4f367c;console[_0x3e1fb0(0x538)](_0x3e1fb0(0x176));const _0x1571d5=document[_0x3e1fb0(0x293)](_0x3e1fb0(0x426));if(!_0x1571d5){console[_0x3e1fb0(0x3fc)](_0x3e1fb0(0x245));return;}_0x1571d5[_0x3e1fb0(0x328)][_0x3e1fb0(0x22a)](_0x3e1fb0(0x560)),_0x1571d5[_0x3e1fb0(0x2b6)][_0x3e1fb0(0x358)]='0',_0x1571d5[_0x3e1fb0(0x2b6)][_0x3e1fb0(0x34a)]=_0x3e1fb0(0x2a5),setTimeout(()=>{const _0x1609e6=_0x3e1fb0;!_0x1571d5[_0x1609e6(0x328)][_0x1609e6(0x1a9)]('active')&&(_0x1571d5[_0x1609e6(0x2b6)][_0x1609e6(0x185)]='none');},0x12c),console[_0x3e1fb0(0x538)](_0x3e1fb0(0x299));}async function createTestMatch(){const _0x55a2af=a4_0x4f367c;console[_0x55a2af(0x538)](_0x55a2af(0x155));try{const _0x4a8726=auth[_0x55a2af(0x3ee)];if(!_0x4a8726){showNotification(_0x55a2af(0x32b),_0x55a2af(0x3fc));return;}const _0x502b55='D1',_0xb11cf9=_0x55a2af(0x272),_0x57cba7={'winnerUsername':_0x55a2af(0x288),'winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x55a2af(0x18b),'winnerDemoLink':null,'loserUsername':_0x55a2af(0x3b1),'loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x55a2af(0x18b),'loserDemoLink':null,'mapPlayed':_0x55a2af(0x47c),'approvedAt':Timestamp[_0x55a2af(0x425)](new Date()),'approvedBy':_0x4a8726[_0x55a2af(0x1cb)],'createdAt':serverTimestamp(),'createdBy':_0x4a8726[_0x55a2af(0x1cb)],'isTestMatch':!![],'ladder':_0x502b55,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x55a2af(0x3d8)+_0x4a8726[_0x55a2af(0x1cb)]};console[_0x55a2af(0x538)]('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0xb11cf9),_0x57cba7),showNotification(_0x55a2af(0x4ed),_0x55a2af(0x3aa)),closeCreateTestMatchModal();}catch(_0x32cff6){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x32cff6),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x32cff6[_0x55a2af(0x1fa)],_0x55a2af(0x3fc));}}window['testFirebaseConnection']=async function(){const _0x134720=a4_0x4f367c;try{console[_0x134720(0x538)](_0x134720(0x32c)),console[_0x134720(0x538)](_0x134720(0x52c),auth),console[_0x134720(0x538)]('DB:',db),console[_0x134720(0x538)](_0x134720(0x2a0),auth['currentUser']);const _0xf96c97=collection(db,'players');console['log'](_0x134720(0x244),_0xf96c97);const _0x33b74=query(_0xf96c97,where(_0x134720(0x521),'==','nonexistent'));console['log'](_0x134720(0x350),_0x33b74);const _0x4708a1=await getDocs(_0x33b74);console[_0x134720(0x538)]('Query\x20executed.\x20Empty:',_0x4708a1['empty']),console[_0x134720(0x538)](_0x134720(0x524));}catch(_0x369e95){console['error'](_0x134720(0x4a2),_0x369e95);}};function setupCreateTestMatchButton(){const _0x3960f=a4_0x4f367c,_0x2f2f92=document[_0x3960f(0x293)](_0x3960f(0x47f));if(!_0x2f2f92){console[_0x3960f(0x3fc)](_0x3960f(0x307));return;}console[_0x3960f(0x538)](_0x3960f(0x2fc));const _0x3a41ef=_0x2f2f92[_0x3960f(0x30b)](!![]);_0x2f2f92[_0x3960f(0x2d2)][_0x3960f(0x50e)](_0x3a41ef,_0x2f2f92),_0x3a41ef['addEventListener']('click',function(_0x1038ad){const _0x416986=_0x3960f;_0x1038ad['preventDefault'](),_0x1038ad[_0x416986(0x400)](),console[_0x416986(0x538)]('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console[_0x3960f(0x538)](_0x3960f(0x38d));}async function loadMatchesData(_0x377723=0x1){const _0x202ce7=a4_0x4f367c,_0x5d5ca8=document[_0x202ce7(0x293)]('matches-table-body');if(!_0x5d5ca8)return;_0x5d5ca8[_0x202ce7(0x533)]=_0x202ce7(0x444);try{const _0x52e1d3=currentLadder[_0x202ce7(0x447)](),_0x331df5=matchesPagination[_0x52e1d3],_0x422910=currentLadder==='D1'?_0x202ce7(0x272):currentLadder==='D2'?_0x202ce7(0x44a):_0x202ce7(0x4e2),_0x99c2e6=collection(db,_0x422910);_0x377723<=0x1?(_0x331df5[_0x202ce7(0x55b)]=0x1,_0x331df5[_0x202ce7(0x566)]=null,_0x331df5[_0x202ce7(0x445)]=null):_0x331df5[_0x202ce7(0x55b)]=_0x377723;const _0x118178=getMatchesFilters();let _0x1baec0=_0x99c2e6;if(_0x118178[_0x202ce7(0x31e)]||_0x118178['endDate']||_0x118178[_0x202ce7(0x392)]){let _0x52bd9b=[];_0x118178[_0x202ce7(0x31e)]&&_0x118178['endDate']?(_0x52bd9b['push'](where(_0x202ce7(0x3dc),'>=',_0x118178[_0x202ce7(0x31e)]),where(_0x202ce7(0x3dc),'<=',_0x118178[_0x202ce7(0x556)])),_0x1baec0=query(_0x99c2e6,..._0x52bd9b)):_0x1baec0=query(_0x99c2e6,orderBy('approvedAt','desc'));}else _0x1baec0=query(_0x99c2e6,orderBy('approvedAt',_0x202ce7(0x494)));_0x377723>0x1&&_0x331df5['lastVisible']?_0x1baec0=query(_0x1baec0,startAfter(_0x331df5[_0x202ce7(0x445)]),limit(PAGE_SIZE)):_0x1baec0=query(_0x1baec0,limit(PAGE_SIZE));const _0x26c187=await getDocs(_0x1baec0);!_0x26c187[_0x202ce7(0x16f)]&&(_0x331df5[_0x202ce7(0x566)]=_0x26c187['docs'][0x0],_0x331df5[_0x202ce7(0x445)]=_0x26c187['docs'][_0x26c187['docs'][_0x202ce7(0x283)]-0x1]);let _0x4879d3=![];if(!_0x26c187[_0x202ce7(0x16f)]){const _0x522cf8=query(_0x1baec0,startAfter(_0x331df5[_0x202ce7(0x445)]),limit(0x1)),_0x4b9e73=await getDocs(_0x522cf8);_0x4879d3=!_0x4b9e73[_0x202ce7(0x16f)];}const _0x409c77=document['getElementById'](_0x202ce7(0x2ad)),_0x55e9de=document['getElementById']('matches-next-page'),_0x45a5f7=document[_0x202ce7(0x293)](_0x202ce7(0x2d1));if(_0x409c77)_0x409c77[_0x202ce7(0x45e)]=_0x331df5[_0x202ce7(0x55b)]<=0x1;if(_0x55e9de)_0x55e9de[_0x202ce7(0x45e)]=!_0x4879d3;if(_0x45a5f7)_0x45a5f7[_0x202ce7(0x2f7)]=_0x202ce7(0x210)+_0x331df5[_0x202ce7(0x55b)];if(_0x26c187[_0x202ce7(0x16f)]){_0x5d5ca8['innerHTML']=_0x202ce7(0x1da);return;}_0x5d5ca8[_0x202ce7(0x533)]='',_0x26c187['forEach'](_0x178efc=>{const _0x3f2f45=_0x202ce7,_0x276ecc=_0x178efc[_0x3f2f45(0x4e3)](),_0x3b9621=document[_0x3f2f45(0x218)]('tr'),_0x4e0ba4=_0x276ecc[_0x3f2f45(0x3dc)]?new Date(_0x276ecc['approvedAt'][_0x3f2f45(0x1e5)]*0x3e8)['toLocaleDateString']():_0x3f2f45(0x3b2);_0x3b9621[_0x3f2f45(0x4f7)](_0x3f2f45(0x4b8),_0x178efc['id']),_0x3b9621[_0x3f2f45(0x4f7)]('data-ladder',currentLadder),_0x3b9621[_0x3f2f45(0x328)][_0x3f2f45(0x2ff)]('match-row'),_0x3b9621['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4e0ba4+_0x3f2f45(0x39d)+(_0x276ecc[_0x3f2f45(0x1db)]||_0x3f2f45(0x546))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x276ecc[_0x3f2f45(0x48b)]||_0x3f2f45(0x546))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x276ecc[_0x3f2f45(0x268)]||0x0)+_0x3f2f45(0x161)+(_0x276ecc[_0x3f2f45(0x491)]||0x0)+_0x3f2f45(0x4c5)+(_0x276ecc[_0x3f2f45(0x529)]||_0x3f2f45(0x3b2))+_0x3f2f45(0x2ce)+currentLadder+_0x3f2f45(0x516)+_0x178efc['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x178efc['id']+_0x3f2f45(0x28f),_0x5d5ca8['appendChild'](_0x3b9621);}),setupMatchesActionButtons(),_0x118178[_0x202ce7(0x392)]&&filterMatchesTable(),console[_0x202ce7(0x538)](_0x202ce7(0x19b)+_0x26c187[_0x202ce7(0x54e)]+'\x20matches\x20for\x20'+currentLadder+_0x202ce7(0x4b1)+_0x331df5[_0x202ce7(0x55b)]);}catch(_0x50c8a7){console[_0x202ce7(0x3fc)](_0x202ce7(0x452),_0x50c8a7),_0x5d5ca8['innerHTML']=_0x202ce7(0x430)+_0x50c8a7[_0x202ce7(0x1fa)]+_0x202ce7(0x33e);}}async function deleteMatch(_0x563c47,_0x200060){const _0x894875=a4_0x4f367c;try{console[_0x894875(0x538)](_0x894875(0x36d)+_0x563c47+_0x894875(0x2e7)+_0x200060+_0x894875(0x3be));const _0x5d04ad=auth[_0x894875(0x3ee)];if(!_0x5d04ad){showNotification(_0x894875(0x256),_0x894875(0x3fc));return;}const _0x2ebed4=_0x200060==='D1'?_0x894875(0x272):_0x200060==='D2'?_0x894875(0x44a):'approvedMatchesD3';console[_0x894875(0x538)]('Using\x20collection:\x20'+_0x2ebed4),showNotification(_0x894875(0x2a4),_0x894875(0x300)),await deleteDoc(doc(db,_0x2ebed4,_0x563c47)),console[_0x894875(0x538)]('Match\x20deleted\x20successfully'),showNotification(_0x894875(0x181),_0x894875(0x3aa));const _0x34d22c=_0x200060[_0x894875(0x447)]();loadMatchesData(matchesPagination[_0x34d22c][_0x894875(0x55b)]);}catch(_0x26e8f3){console['error']('Error\x20deleting\x20match:',_0x26e8f3),showNotification(_0x894875(0x282)+_0x26e8f3['message'],'error');}}function a4_0x51fe(_0x5af83c,_0x518176){const _0x4f8904=a4_0x2b57();return a4_0x51fe=function(_0x2da49d,_0x482809){_0x2da49d=_0x2da49d-0x149;let _0x51410c=_0x4f8904[_0x2da49d];return _0x51410c;},a4_0x51fe(_0x5af83c,_0x518176);}function setupMatchesActionButtons(){const _0x20942e=a4_0x4f367c;console['log'](_0x20942e(0x462)),document[_0x20942e(0x201)](_0x20942e(0x45b))['forEach'](_0x2fbcaa=>{const _0x7ffe1f=_0x20942e;_0x2fbcaa[_0x7ffe1f(0x4e9)](_0x7ffe1f(0x37e),_0x2e26a3=>{const _0x563053=_0x7ffe1f;_0x2e26a3[_0x563053(0x59d)](),_0x2e26a3[_0x563053(0x400)]();const _0x58753b=_0x2e26a3[_0x563053(0x249)]['dataset']['id'],_0x5da46b=_0x2e26a3[_0x563053(0x249)][_0x563053(0x17e)]('tr'),_0x3ad5fd=_0x5da46b['dataset'][_0x563053(0x2c0)];console['log'](_0x563053(0x475),_0x58753b,_0x3ad5fd),openEditMatchModal(_0x58753b,_0x3ad5fd);});}),document['querySelectorAll'](_0x20942e(0x1f3))[_0x20942e(0x2fa)](_0x2ff528=>{const _0x5a3905=_0x20942e;_0x2ff528[_0x5a3905(0x4e9)](_0x5a3905(0x37e),_0x71e658=>{const _0x45ae1d=_0x5a3905;_0x71e658[_0x45ae1d(0x59d)](),_0x71e658['stopPropagation']();const _0x1b9ab5=_0x71e658[_0x45ae1d(0x249)][_0x45ae1d(0x2cd)]['id'],_0x5b4aad=_0x71e658[_0x45ae1d(0x249)]['closest']('tr'),_0x8648ae=_0x5b4aad[_0x45ae1d(0x2cd)][_0x45ae1d(0x2c0)]||currentLadder;console[_0x45ae1d(0x538)]('Delete\x20match\x20clicked:',_0x1b9ab5,_0x8648ae),confirm(_0x45ae1d(0x3e9))&&deleteMatch(_0x1b9ab5,_0x8648ae);});}),console[_0x20942e(0x538)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x398a0b=a4_0x4f367c,_0x2c9ab7=document[_0x398a0b(0x293)]('matches-search')['value'][_0x398a0b(0x447)](),_0x3878d3=document[_0x398a0b(0x201)](_0x398a0b(0x2e3));let _0x443899=0x0;_0x3878d3[_0x398a0b(0x2fa)](_0x1227e1=>{const _0x31669b=_0x398a0b;if(_0x1227e1[_0x31669b(0x328)][_0x31669b(0x1a9)](_0x31669b(0x49e))||_0x1227e1['classList'][_0x31669b(0x1a9)](_0x31669b(0x2e9))||_0x1227e1[_0x31669b(0x328)][_0x31669b(0x1a9)](_0x31669b(0x165)))return;const _0x5a690f=_0x1227e1[_0x31669b(0x1c6)][0x1][_0x31669b(0x2f7)][_0x31669b(0x447)](),_0x34c8e0=_0x1227e1[_0x31669b(0x1c6)][0x2][_0x31669b(0x2f7)]['toLowerCase'](),_0x23b8ab=_0x1227e1[_0x31669b(0x1c6)][0x4][_0x31669b(0x2f7)][_0x31669b(0x447)]();_0x5a690f['includes'](_0x2c9ab7)||_0x34c8e0['includes'](_0x2c9ab7)||_0x23b8ab[_0x31669b(0x4c1)](_0x2c9ab7)?(_0x1227e1[_0x31669b(0x2b6)][_0x31669b(0x185)]='',_0x443899++):_0x1227e1['style'][_0x31669b(0x185)]=_0x31669b(0x46c);});if(_0x443899===0x0&&_0x3878d3[_0x398a0b(0x283)]>0x0){const _0x11f7dd=document[_0x398a0b(0x293)]('matches-table-body'),_0x4c9ea8=_0x11f7dd[_0x398a0b(0x1a3)](_0x398a0b(0x26a));if(!_0x4c9ea8){const _0xa7d869=document[_0x398a0b(0x218)]('tr');_0xa7d869['className']=_0x398a0b(0x21d),_0xa7d869[_0x398a0b(0x533)]=_0x398a0b(0x394)+_0x2c9ab7+_0x398a0b(0x264),_0x11f7dd['appendChild'](_0xa7d869);}}else{const _0x416c51=document['querySelector'](_0x398a0b(0x26a));_0x416c51&&_0x416c51[_0x398a0b(0x22a)]();}}function getMatchesFilters(){const _0x5ddb6f=a4_0x4f367c,_0x5dfcd0=document['getElementById'](_0x5ddb6f(0x373))[_0x5ddb6f(0x34b)][_0x5ddb6f(0x447)](),_0xbf1cb9=document[_0x5ddb6f(0x293)](_0x5ddb6f(0x269))[_0x5ddb6f(0x34b)],_0x2edff0=document['getElementById'](_0x5ddb6f(0x30a))[_0x5ddb6f(0x34b)];let _0x1392b5=null,_0x469519=null;return _0xbf1cb9&&(_0x1392b5=new Date(_0xbf1cb9),_0x1392b5[_0x5ddb6f(0x306)](0x0,0x0,0x0,0x0),_0x1392b5=Timestamp[_0x5ddb6f(0x425)](_0x1392b5)),_0x2edff0&&(_0x469519=new Date(_0x2edff0),_0x469519['setHours'](0x17,0x3b,0x3b,0x3e7),_0x469519=Timestamp[_0x5ddb6f(0x425)](_0x469519)),{'searchTerm':_0x5dfcd0,'startDate':_0x1392b5,'endDate':_0x469519};}async function applyMatchesFilters(){const _0x7b3600=a4_0x4f367c,_0x334711=currentLadder[_0x7b3600(0x447)]();matchesPagination[_0x334711]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x48ae25=a4_0x4f367c;document['getElementById'](_0x48ae25(0x269))['value']='',document['getElementById'](_0x48ae25(0x30a))['value']='',document[_0x48ae25(0x293)]('matches-search')[_0x48ae25(0x34b)]='';const _0x449dc4=currentLadder[_0x48ae25(0x447)]();matchesPagination[_0x449dc4]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x5b29cf,_0x54a80e){const _0x2a9230=a4_0x4f367c,_0xfab0e=document[_0x2a9230(0x293)](_0x2a9230(0x468));if(!_0xfab0e)return;try{const _0x237b71=_0x54a80e==='D1'?'approvedMatches':_0x54a80e==='D2'?_0x2a9230(0x44a):_0x2a9230(0x4e2),_0x12d834=doc(db,_0x237b71,_0x5b29cf),_0x2d577a=await getDoc(_0x12d834);if(!_0x2d577a[_0x2a9230(0x584)]()){showNotification('Match\x20not\x20found',_0x2a9230(0x3fc));return;}const _0x2728ba=_0x2d577a[_0x2a9230(0x4e3)]();document[_0x2a9230(0x293)](_0x2a9230(0x40e))[_0x2a9230(0x34b)]=_0x5b29cf,document[_0x2a9230(0x293)](_0x2a9230(0x56b))[_0x2a9230(0x34b)]=_0x54a80e,document[_0x2a9230(0x293)](_0x2a9230(0x2f2))['value']=_0x2728ba[_0x2a9230(0x1db)]||'',document[_0x2a9230(0x293)](_0x2a9230(0x58f))[_0x2a9230(0x34b)]=_0x2728ba[_0x2a9230(0x268)]||0x0,document[_0x2a9230(0x293)](_0x2a9230(0x14a))[_0x2a9230(0x34b)]=_0x2728ba[_0x2a9230(0x305)]||0x0,document[_0x2a9230(0x293)](_0x2a9230(0x41a))[_0x2a9230(0x34b)]=_0x2728ba[_0x2a9230(0x50a)]||'',document[_0x2a9230(0x293)](_0x2a9230(0x274))[_0x2a9230(0x34b)]=_0x2728ba['loserUsername']||'',document['getElementById']('edit-match-loser-score')[_0x2a9230(0x34b)]=_0x2728ba[_0x2a9230(0x491)]||0x0,document[_0x2a9230(0x293)]('edit-match-loser-suicides')[_0x2a9230(0x34b)]=_0x2728ba[_0x2a9230(0x29d)]||0x0,document[_0x2a9230(0x293)](_0x2a9230(0x507))[_0x2a9230(0x34b)]=_0x2728ba[_0x2a9230(0x254)]||'',document[_0x2a9230(0x293)]('edit-match-map')[_0x2a9230(0x34b)]=_0x2728ba[_0x2a9230(0x529)]||'',document['getElementById'](_0x2a9230(0x255))[_0x2a9230(0x34b)]=_0x2728ba['winnerDemoLink']||'',document[_0x2a9230(0x293)](_0x2a9230(0x55c))['value']=_0x2728ba['loserDemoLink']||_0x2728ba[_0x2a9230(0x3c0)]||'',document['getElementById'](_0x2a9230(0x581))[_0x2a9230(0x2f7)]=_0x2a9230(0x479)+_0x2728ba[_0x2a9230(0x1db)]+_0x2a9230(0x498)+_0x2728ba['loserUsername'],_0xfab0e[_0x2a9230(0x328)][_0x2a9230(0x2ff)](_0x2a9230(0x560));}catch(_0x53fa7c){console[_0x2a9230(0x3fc)]('Error\x20loading\x20match\x20data:',_0x53fa7c),showNotification('Failed\x20to\x20load\x20match\x20data',_0x2a9230(0x3fc));}}function closeEditMatchModal(){const _0x1703eb=a4_0x4f367c,_0x157394=document['getElementById'](_0x1703eb(0x468));_0x157394&&_0x157394[_0x1703eb(0x328)]['remove'](_0x1703eb(0x560));}async function saveEditedMatch(){const _0x37e451=a4_0x4f367c;try{const _0xd57be3=document[_0x37e451(0x293)]('edit-match-id')['value'],_0x726b37=document[_0x37e451(0x293)]('edit-match-ladder')[_0x37e451(0x34b)];if(!_0xd57be3||!_0x726b37){showNotification(_0x37e451(0x2df),_0x37e451(0x3fc));return;}const _0x463aed=_0x726b37==='D1'?_0x37e451(0x272):_0x726b37==='D2'?_0x37e451(0x44a):'approvedMatchesD3',_0x55d049=document['getElementById'](_0x37e451(0x2f2))[_0x37e451(0x34b)][_0x37e451(0x3f7)](),_0x514b1e=parseInt(document['getElementById'](_0x37e451(0x58f))['value']),_0x5e7617=parseInt(document['getElementById'](_0x37e451(0x14a))[_0x37e451(0x34b)]),_0x2ec3a0=document[_0x37e451(0x293)](_0x37e451(0x41a))[_0x37e451(0x34b)][_0x37e451(0x3f7)](),_0x1bbf8a=document['getElementById']('edit-match-loser')[_0x37e451(0x34b)][_0x37e451(0x3f7)](),_0x431d60=parseInt(document[_0x37e451(0x293)](_0x37e451(0x416))[_0x37e451(0x34b)]),_0x475c6c=parseInt(document[_0x37e451(0x293)](_0x37e451(0x42f))[_0x37e451(0x34b)]),_0x30b9b7=document[_0x37e451(0x293)](_0x37e451(0x507))[_0x37e451(0x34b)]['trim'](),_0x2d8caa=document[_0x37e451(0x293)](_0x37e451(0x467))[_0x37e451(0x34b)][_0x37e451(0x3f7)](),_0x59ca50=document[_0x37e451(0x293)](_0x37e451(0x255))[_0x37e451(0x34b)][_0x37e451(0x3f7)](),_0x21415a=document[_0x37e451(0x293)](_0x37e451(0x55c))[_0x37e451(0x34b)]['trim']();if(!_0x55d049||!_0x1bbf8a){showNotification(_0x37e451(0x417),'error');return;}await updateDoc(doc(db,_0x463aed,_0xd57be3),{'winnerUsername':_0x55d049,'winnerScore':_0x514b1e,'winnerSuicides':_0x5e7617,'winnerComment':_0x2ec3a0,'loserUsername':_0x1bbf8a,'loserScore':_0x431d60,'loserSuicides':_0x475c6c,'loserComment':_0x30b9b7,'mapPlayed':_0x2d8caa,'winnerDemoLink':_0x59ca50||null,'loserDemoLink':_0x21415a||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x37e451(0x1cb)],'isEdited':!![]}),showNotification(_0x37e451(0x2f8),_0x37e451(0x3aa)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x726b37[_0x37e451(0x447)]()][_0x37e451(0x55b)]);}catch(_0x4f15ec){console[_0x37e451(0x3fc)](_0x37e451(0x2c1),_0x4f15ec),showNotification(_0x37e451(0x562)+_0x4f15ec[_0x37e451(0x1fa)],'error');}}async function openDeleteMatchModal(_0x4c01eb,_0x5ed430){const _0x1475e8=a4_0x4f367c;try{const _0xf411d=_0x5ed430==='D1'?_0x1475e8(0x272):_0x5ed430==='D2'?_0x1475e8(0x44a):'approvedMatchesD3',_0x208ae8=doc(db,_0xf411d,_0x4c01eb),_0x53a078=await getDoc(_0x208ae8);if(!_0x53a078[_0x1475e8(0x584)]()){showNotification(_0x1475e8(0x294),'error');return;}const _0x441c1a=_0x53a078[_0x1475e8(0x4e3)](),_0x104df4=document[_0x1475e8(0x293)](_0x1475e8(0x3af));_0x104df4[_0x1475e8(0x2cd)][_0x1475e8(0x3e4)]=_0x4c01eb,_0x104df4[_0x1475e8(0x2cd)][_0x1475e8(0x2c0)]=_0x5ed430;const _0x3ec294=_0x441c1a[_0x1475e8(0x3dc)]?new Date(_0x441c1a['approvedAt']['seconds']*0x3e8)[_0x1475e8(0x175)]():_0x1475e8(0x3b2),_0x2bd4e2=document['getElementById'](_0x1475e8(0x3ea));_0x2bd4e2[_0x1475e8(0x533)]=_0x1475e8(0x30e)+_0x3ec294+_0x1475e8(0x398)+_0x441c1a[_0x1475e8(0x1db)]+_0x1475e8(0x315)+_0x441c1a[_0x1475e8(0x48b)]+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x441c1a[_0x1475e8(0x268)]||0x0)+'\x20-\x20'+(_0x441c1a['loserScore']||0x0)+_0x1475e8(0x574)+(_0x441c1a[_0x1475e8(0x529)]||'N/A')+_0x1475e8(0x17b)+_0x5ed430+_0x1475e8(0x2a3),_0x104df4[_0x1475e8(0x328)][_0x1475e8(0x2ff)]('active');}catch(_0x35b793){console['error'](_0x1475e8(0x518),_0x35b793),showNotification(_0x1475e8(0x2b1),_0x1475e8(0x3fc));}}function closeDeleteMatchModal(){const _0x7eb180=a4_0x4f367c,_0x1b6d7a=document['getElementById']('delete-match-confirm-modal');_0x1b6d7a&&(_0x1b6d7a[_0x7eb180(0x328)][_0x7eb180(0x22a)](_0x7eb180(0x560)),_0x1b6d7a[_0x7eb180(0x4b9)](_0x7eb180(0x4f9)),_0x1b6d7a[_0x7eb180(0x4b9)](_0x7eb180(0x592)));}async function confirmDeleteMatch(){const _0x25ff4e=a4_0x4f367c,_0x54e580=document[_0x25ff4e(0x293)]('delete-match-confirm-modal'),_0x167d79=_0x54e580[_0x25ff4e(0x2cd)][_0x25ff4e(0x3e4)],_0x28c06b=_0x54e580['dataset']['ladder'];if(!_0x167d79||!_0x28c06b){showNotification(_0x25ff4e(0x2df),_0x25ff4e(0x3fc)),closeDeleteMatchModal();return;}try{const _0x4d106d=_0x28c06b==='D1'?_0x25ff4e(0x272):_0x28c06b==='D2'?_0x25ff4e(0x44a):_0x25ff4e(0x4e2);await deleteDoc(doc(db,_0x4d106d,_0x167d79)),showNotification(_0x25ff4e(0x181),_0x25ff4e(0x3aa)),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x28c06b['toLowerCase']()][_0x25ff4e(0x55b)]);}catch(_0xe769bc){console[_0x25ff4e(0x3fc)](_0x25ff4e(0x406),_0xe769bc),showNotification(_0x25ff4e(0x282)+_0xe769bc[_0x25ff4e(0x1fa)],_0x25ff4e(0x3fc));}}async function saveHighlightChanges(){const _0x7841bc=a4_0x4f367c,_0x58595a=document[_0x7841bc(0x293)](_0x7841bc(0x1ee))['value'],_0x10abfc=document[_0x7841bc(0x293)](_0x7841bc(0x152))[_0x7841bc(0x34b)];let _0x306c0f={'title':document[_0x7841bc(0x293)](_0x7841bc(0x235))['value'][_0x7841bc(0x3f7)](),'type':_0x10abfc,'description':document[_0x7841bc(0x293)]('edit-highlight-description-input')['value']['trim'](),'videoId':document['getElementById'](_0x7841bc(0x42e))[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),'submittedBy':auth[_0x7841bc(0x3ee)][_0x7841bc(0x1cb)]};if(_0x10abfc===_0x7841bc(0x163)){_0x306c0f[_0x7841bc(0x453)]=document[_0x7841bc(0x293)]('edit-highlight-matchInfo-input')[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),_0x306c0f[_0x7841bc(0x3ac)]=document[_0x7841bc(0x293)]('edit-highlight-map-input')[_0x7841bc(0x34b)][_0x7841bc(0x3f7)]();const _0x5e2f73=document[_0x7841bc(0x293)](_0x7841bc(0x3f1))[_0x7841bc(0x34b)];_0x306c0f['matchDate']=_0x5e2f73?Timestamp['fromDate'](new Date(_0x5e2f73)):null,_0x306c0f[_0x7841bc(0x27a)]=document[_0x7841bc(0x293)](_0x7841bc(0x551))['value'][_0x7841bc(0x3f7)](),_0x306c0f['winnerScore']=document['getElementById']('edit-highlight-winnerScore-input')[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),_0x306c0f['loserName']=document['getElementById']('edit-highlight-loserName-input')[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),_0x306c0f['loserScore']=document[_0x7841bc(0x293)](_0x7841bc(0x3bd))['value'][_0x7841bc(0x3f7)](),_0x306c0f['matchLink']=document[_0x7841bc(0x293)](_0x7841bc(0x170))['value'][_0x7841bc(0x3f7)](),_0x306c0f[_0x7841bc(0x3fd)]=null,_0x306c0f[_0x7841bc(0x3df)]=null,_0x306c0f['creatorImageUrl']=null,_0x306c0f['achievementPlayer']=null,_0x306c0f[_0x7841bc(0x2e4)]=null,_0x306c0f['achievementDetails']=null,_0x306c0f[_0x7841bc(0x510)]=null;}else{if(_0x10abfc===_0x7841bc(0x18e))_0x306c0f[_0x7841bc(0x3ac)]=document[_0x7841bc(0x293)](_0x7841bc(0x2ed))[_0x7841bc(0x34b)]['trim'](),_0x306c0f['mapCreator']=document[_0x7841bc(0x293)]('edit-highlight-mapCreator-input')[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),_0x306c0f[_0x7841bc(0x3df)]=document[_0x7841bc(0x293)](_0x7841bc(0x346))[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),_0x306c0f['creatorImageUrl']=document[_0x7841bc(0x293)]('edit-highlight-creatorImageUrl-input')[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),_0x306c0f[_0x7841bc(0x453)]=null,_0x306c0f['matchDate']=null,_0x306c0f['winnerName']=null,_0x306c0f[_0x7841bc(0x268)]=null,_0x306c0f['loserName']=null,_0x306c0f[_0x7841bc(0x491)]=null,_0x306c0f[_0x7841bc(0x589)]=null,_0x306c0f[_0x7841bc(0x331)]=null,_0x306c0f[_0x7841bc(0x2e4)]=null,_0x306c0f['achievementDetails']=null,_0x306c0f[_0x7841bc(0x510)]=null;else _0x10abfc==='achievement'&&(_0x306c0f[_0x7841bc(0x331)]=document['getElementById'](_0x7841bc(0x43c))[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),_0x306c0f[_0x7841bc(0x2e4)]=document[_0x7841bc(0x293)](_0x7841bc(0x3b5))['value'][_0x7841bc(0x3f7)](),_0x306c0f[_0x7841bc(0x424)]=document[_0x7841bc(0x293)](_0x7841bc(0x481))[_0x7841bc(0x34b)][_0x7841bc(0x3f7)](),_0x306c0f[_0x7841bc(0x510)]=document[_0x7841bc(0x293)](_0x7841bc(0x186))['value'][_0x7841bc(0x3f7)](),_0x306c0f[_0x7841bc(0x453)]=null,_0x306c0f[_0x7841bc(0x3ac)]=null,_0x306c0f[_0x7841bc(0x25c)]=null,_0x306c0f['winnerName']=null,_0x306c0f[_0x7841bc(0x268)]=null,_0x306c0f[_0x7841bc(0x561)]=null,_0x306c0f[_0x7841bc(0x491)]=null,_0x306c0f[_0x7841bc(0x589)]=null,_0x306c0f[_0x7841bc(0x3fd)]=null,_0x306c0f[_0x7841bc(0x3df)]=null,_0x306c0f[_0x7841bc(0x2f0)]=null);}try{if(_0x58595a){_0x306c0f[_0x7841bc(0x224)]=serverTimestamp();const _0x109d33=doc(db,_0x7841bc(0x3bb),_0x58595a);await updateDoc(_0x109d33,_0x306c0f),showNotification('Highlight\x20updated\x20successfully!',_0x7841bc(0x3aa));}else _0x306c0f[_0x7841bc(0x43a)]=serverTimestamp(),await addDoc(collection(db,_0x7841bc(0x3bb)),_0x306c0f),showNotification('Highlight\x20added\x20successfully!',_0x7841bc(0x3aa));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x321474){console[_0x7841bc(0x3fc)]('Error\x20saving\x20highlight:',_0x321474),showNotification(_0x7841bc(0x3b0)+_0x321474['message'],'error');}}async function resimulateMatch(){const _0x12b19e=a4_0x4f367c;try{const _0x283e18=document[_0x12b19e(0x293)](_0x12b19e(0x3a8))[_0x12b19e(0x34b)];if(!_0x283e18){showNotification(_0x12b19e(0x428),_0x12b19e(0x3fc));return;}const _0x5b1e78=auth['currentUser'];if(!_0x5b1e78){showNotification(_0x12b19e(0x304),_0x12b19e(0x3fc));return;}const _0xf04473=currentLadder==='D1'?_0x12b19e(0x272):currentLadder==='D2'?_0x12b19e(0x44a):_0x12b19e(0x4e2),_0x4c893=doc(db,_0xf04473,_0x283e18),_0x186cbe=await getDoc(_0x4c893);if(!_0x186cbe[_0x12b19e(0x584)]()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x12b19e(0x3fc));return;}const _0x39f321=_0x186cbe[_0x12b19e(0x4e3)](),_0xd7c6aa=_0x39f321['approvedAt']?_0x39f321['approvedAt'][_0x12b19e(0x459)]()[_0x12b19e(0x21a)]():_0x39f321['matchDate']?_0x39f321['matchDate'][_0x12b19e(0x459)]?_0x39f321[_0x12b19e(0x25c)][_0x12b19e(0x459)]()[_0x12b19e(0x21a)]():new Date(_0x39f321['matchDate'])[_0x12b19e(0x21a)]():'Unknown',_0x183cf6='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x39f321[_0x12b19e(0x1db)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x39f321[_0x12b19e(0x48b)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x39f321['winnerScore']+'-'+_0x39f321[_0x12b19e(0x491)]+_0x12b19e(0x28e)+(_0x39f321[_0x12b19e(0x529)]||_0x39f321[_0x12b19e(0x421)]||'Unknown')+_0x12b19e(0x3de)+_0xd7c6aa+_0x12b19e(0x4ba)+_0x283e18+_0x12b19e(0x323)+currentLadder+_0x12b19e(0x42d);document[_0x12b19e(0x293)](_0x12b19e(0x4b3))['innerHTML']=_0x183cf6,document[_0x12b19e(0x293)](_0x12b19e(0x4b3))[_0x12b19e(0x2b6)][_0x12b19e(0x185)]=_0x12b19e(0x2f1),document[_0x12b19e(0x293)](_0x12b19e(0x1fe))[_0x12b19e(0x2b6)][_0x12b19e(0x185)]=_0x12b19e(0x2f1),window[_0x12b19e(0x211)]={'matchId':_0x283e18,'matchData':_0x39f321,'ladder':currentLadder},showNotification(_0x12b19e(0x530),_0x12b19e(0x300));}catch(_0x51212b){console[_0x12b19e(0x3fc)](_0x12b19e(0x42b),_0x51212b),showNotification(_0x12b19e(0x1d9)+_0x51212b[_0x12b19e(0x1fa)],'error');}}async function confirmResimulateMatch(){const _0xffca1a=a4_0x4f367c;try{const {matchId:_0x2246ec,matchData:_0x1a20d6,ladder:_0x52773e}=window['pendingResimulateData'];if(!_0x2246ec||!_0x1a20d6){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0xffca1a(0x3fc));return;}const _0x10b088=_0x52773e==='D1'?'players':_0x52773e==='D2'?_0xffca1a(0x1b4):'playersD3',_0x59df1e=_0x52773e==='D1'?_0xffca1a(0x53e):_0x52773e==='D2'?_0xffca1a(0x2c6):_0xffca1a(0x3d9),[_0x2f2f05,_0xaac0a2]=await Promise[_0xffca1a(0x258)]([getDocs(query(collection(db,_0x10b088),where(_0xffca1a(0x521),'==',_0x1a20d6[_0xffca1a(0x1db)]))),getDocs(query(collection(db,_0x10b088),where(_0xffca1a(0x521),'==',_0x1a20d6[_0xffca1a(0x48b)])))]);if(_0x2f2f05['empty']||_0xaac0a2[_0xffca1a(0x16f)]){showNotification(_0xffca1a(0x36c),_0xffca1a(0x3fc));return;}const _0x162042=_0x2f2f05[_0xffca1a(0x57c)][0x0]['id'],_0xf176bc=_0xaac0a2[_0xffca1a(0x57c)][0x0]['id'],_0x2af55d=_0x2f2f05[_0xffca1a(0x57c)][0x0][_0xffca1a(0x4e3)](),_0x1878bb=_0xaac0a2[_0xffca1a(0x57c)][0x0][_0xffca1a(0x4e3)](),[_0x344356,_0x5b88a1]=await Promise[_0xffca1a(0x258)]([getDocs(query(collection(db,_0x59df1e),where(_0xffca1a(0x471),'==',_0x162042),where(_0xffca1a(0x3e4),'==',_0x2246ec))),getDocs(query(collection(db,_0x59df1e),where(_0xffca1a(0x471),'==',_0xf176bc),where(_0xffca1a(0x3e4),'==',_0x2246ec)))]),_0x3b5e5e=!_0x344356[_0xffca1a(0x16f)],_0x435ec4=!_0x5b88a1[_0xffca1a(0x16f)],_0x2f0a9c=_0xffca1a(0x36b)+(_0x3b5e5e?_0xffca1a(0x21b):_0xffca1a(0x4bf))+_0xffca1a(0x37d)+(_0x435ec4?_0xffca1a(0x21b):_0xffca1a(0x4bf))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x2af55d[_0xffca1a(0x535)]||'Unknown')+_0xffca1a(0x2d6)+(_0x1878bb[_0xffca1a(0x535)]||_0xffca1a(0x546))+_0xffca1a(0x52e)+(_0x2af55d[_0xffca1a(0x241)]||'Unknown')+_0xffca1a(0x469)+(_0x1878bb[_0xffca1a(0x241)]||_0xffca1a(0x546))+_0xffca1a(0x4db);document['getElementById'](_0xffca1a(0x1ce))[_0xffca1a(0x533)]=_0x2f0a9c,document[_0xffca1a(0x293)](_0xffca1a(0x1ce))[_0xffca1a(0x2b6)][_0xffca1a(0x185)]=_0xffca1a(0x2f1);if(_0x3b5e5e&&_0x435ec4){showNotification(_0xffca1a(0x528),_0xffca1a(0x219));return;}showNotification(_0xffca1a(0x2be),_0xffca1a(0x300));const _0x13b552=_0x1a20d6[_0xffca1a(0x3dc)]||_0x1a20d6['matchDate']||serverTimestamp(),[_0x22b9a0,_0x4a1ccf]=await Promise[_0xffca1a(0x258)]([getPlayerEloAtTime(_0x162042,_0x13b552,_0x59df1e),getPlayerEloAtTime(_0xf176bc,_0x13b552,_0x59df1e)]),{calculateElo:_0x5723f2}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x24b19c,newLoserRating:_0x438b65}=_0x5723f2(_0x22b9a0,_0x4a1ccf),_0x21d487=_0x2af55d['position']||Number[_0xffca1a(0x16a)],_0x5af866=_0x1878bb[_0xffca1a(0x241)]||Number[_0xffca1a(0x16a)];let _0x387408=_0x21d487,_0x303baa=_0x5af866;_0x21d487>_0x5af866&&(_0x387408=_0x5af866,_0x303baa=_0x5af866+0x1);const _0x3abd2b=writeBatch(db),_0x141576=doc(db,_0x10b088,_0x162042);_0x3abd2b[_0xffca1a(0x40a)](_0x141576,{'eloRating':_0x24b19c,'position':_0x387408,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xffca1a(0x3ee)][_0xffca1a(0x3db)]});const _0x26a067=doc(db,_0x10b088,_0xf176bc);_0x3abd2b[_0xffca1a(0x40a)](_0x26a067,{'eloRating':_0x438b65,'position':_0x303baa,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xffca1a(0x3ee)]['uid']});if(_0x21d487>_0x5af866){const _0x311e9c=await getDocs(query(collection(db,_0x10b088),where(_0xffca1a(0x241),'>',_0x5af866),where(_0xffca1a(0x241),'<',_0x21d487)));_0x311e9c['forEach'](_0x55e5ef=>{const _0xb6d280=_0xffca1a,_0xb2fd65=doc(db,_0x10b088,_0x55e5ef['id']),_0x3ecaee=_0x55e5ef[_0xb6d280(0x4e3)]()[_0xb6d280(0x241)];_0x3abd2b[_0xb6d280(0x40a)](_0xb2fd65,{'position':_0x3ecaee+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x3b5e5e){const _0x5b207b=doc(collection(db,_0x59df1e));_0x3abd2b[_0xffca1a(0x2ec)](_0x5b207b,{'playerId':_0x162042,'player':_0x1a20d6[_0xffca1a(0x1db)],'previousElo':_0x22b9a0,'newElo':_0x24b19c,'eloChange':_0x24b19c-_0x22b9a0,'opponentId':_0xf176bc,'opponent':_0x1a20d6['loserUsername'],'matchResult':'win','previousPosition':_0x21d487,'newPosition':_0x387408,'positionChange':_0x387408-_0x21d487,'matchId':_0x2246ec,'timestamp':_0x13b552,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xffca1a(0x3ee)][_0xffca1a(0x3db)],'gameMode':_0x52773e,'matchScore':_0x1a20d6[_0xffca1a(0x268)]+'-'+_0x1a20d6['loserScore'],'mapPlayed':_0x1a20d6[_0xffca1a(0x529)]||_0x1a20d6[_0xffca1a(0x421)]||_0xffca1a(0x546),'note':_0xffca1a(0x33b)});}if(!_0x435ec4){const _0xe8449d=doc(collection(db,_0x59df1e));_0x3abd2b[_0xffca1a(0x2ec)](_0xe8449d,{'playerId':_0xf176bc,'player':_0x1a20d6[_0xffca1a(0x48b)],'previousElo':_0x4a1ccf,'newElo':_0x438b65,'eloChange':_0x438b65-_0x4a1ccf,'opponentId':_0x162042,'opponent':_0x1a20d6[_0xffca1a(0x1db)],'matchResult':_0xffca1a(0x2e0),'previousPosition':_0x5af866,'newPosition':_0x303baa,'positionChange':_0x303baa-_0x5af866,'matchId':_0x2246ec,'timestamp':_0x13b552,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0xffca1a(0x3db)],'gameMode':_0x52773e,'matchScore':_0x1a20d6[_0xffca1a(0x268)]+'-'+_0x1a20d6[_0xffca1a(0x491)],'mapPlayed':_0x1a20d6['mapPlayed']||_0x1a20d6[_0xffca1a(0x421)]||_0xffca1a(0x546),'note':_0xffca1a(0x33b)});}const _0x471c68=_0x52773e==='D1'?_0xffca1a(0x272):_0x52773e==='D2'?_0xffca1a(0x44a):'approvedMatchesD3',_0x15d304=doc(db,_0x471c68,_0x2246ec);_0x3abd2b[_0xffca1a(0x40a)](_0x15d304,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xffca1a(0x3ee)][_0xffca1a(0x3db)],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x2af55d[_0xffca1a(0x535)],'originalLoserElo':_0x1878bb[_0xffca1a(0x535)],'originalWinnerPosition':_0x21d487,'originalLoserPosition':_0x5af866,'resimulatedWinnerElo':_0x24b19c,'resimulatedLoserElo':_0x438b65,'resimulatedWinnerPosition':_0x387408,'resimulatedLoserPosition':_0x303baa}),await _0x3abd2b['commit']();const _0x1cb29f=(!_0x3b5e5e?0x1:0x0)+(!_0x435ec4?0x1:0x0),_0x394af5=_0x21d487!==_0x387408||_0x5af866!==_0x303baa;showNotification('Match\x20resimulated\x20successfully!\x20'+(_0xffca1a(0x3f8)+_0x1cb29f+_0xffca1a(0x549))+(_0xffca1a(0x4a8)+_0x22b9a0+'→'+_0x24b19c+_0xffca1a(0x2c8)+(_0x24b19c-_0x22b9a0)+_0xffca1a(0x380))+(_0xffca1a(0x183)+_0x4a1ccf+'→'+_0x438b65+'\x20('+(_0x438b65-_0x4a1ccf)+_0xffca1a(0x2bc))+(''+(_0x394af5?_0xffca1a(0x57b)+_0x21d487+'→'+_0x387408+',\x20Loser\x20'+_0x5af866+'→'+_0x303baa:_0xffca1a(0x16b))),'success'),closeResimulateModal(),document[_0xffca1a(0x1a3)](_0xffca1a(0x4a5))&&loadPlayersData();}catch(_0x585cc9){console[_0xffca1a(0x3fc)](_0xffca1a(0x4d2),_0x585cc9),showNotification(_0xffca1a(0x1cd)+_0x585cc9[_0xffca1a(0x1fa)],_0xffca1a(0x3fc));}}async function getPlayerEloAtTime(_0x3f16c9,_0x52fbfa,_0x442856){const _0x4c4087=a4_0x4f367c;try{const _0x2ca3d4=_0x52fbfa[_0x4c4087(0x459)]?_0x52fbfa[_0x4c4087(0x459)]():new Date(_0x52fbfa),_0x12230d=query(collection(db,_0x442856),where(_0x4c4087(0x471),'==',_0x3f16c9),where(_0x4c4087(0x598),'<',_0x52fbfa),orderBy('timestamp','desc'),limit(0x1)),_0xac2453=await getDocs(_0x12230d);if(!_0xac2453[_0x4c4087(0x16f)]){const _0x2873ab=_0xac2453[_0x4c4087(0x57c)][0x0][_0x4c4087(0x4e3)]();return console[_0x4c4087(0x538)](_0x4c4087(0x410)+_0x3f16c9+_0x4c4087(0x205)+_0x2873ab['newElo']),_0x2873ab['newElo'];}else return console[_0x4c4087(0x538)](_0x4c4087(0x2fe)+_0x3f16c9+_0x4c4087(0x3d6)),0x4b0;}catch(_0x9fb947){return console[_0x4c4087(0x3fc)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x3f16c9+':',_0x9fb947),0x4b0;}}function openResimulateModal(){const _0xa93698=a4_0x4f367c;console['log'](_0xa93698(0x3ed));const _0x565129=document[_0xa93698(0x293)](_0xa93698(0x495));console[_0xa93698(0x538)]('Modal\x20element\x20found:',_0x565129);if(!_0x565129){console[_0xa93698(0x3fc)]('Modal\x20element\x20not\x20found!');return;}_0x565129[_0xa93698(0x2b6)][_0xa93698(0x185)]=_0xa93698(0x2f1),_0x565129[_0xa93698(0x2b6)][_0xa93698(0x34a)]='visible',_0x565129[_0xa93698(0x2b6)][_0xa93698(0x358)]='1',_0x565129[_0xa93698(0x328)][_0xa93698(0x2ff)](_0xa93698(0x560)),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window[_0xa93698(0x344)](_0x565129)[_0xa93698(0x185)]);const _0x4ea83b=document['getElementById']('match-details-container'),_0x70b596=document['getElementById'](_0xa93698(0x1ce)),_0x3120e2=document['getElementById'](_0xa93698(0x1fe)),_0x365ed8=document[_0xa93698(0x293)](_0xa93698(0x3a8));if(_0x4ea83b)_0x4ea83b[_0xa93698(0x533)]='';if(_0x70b596)_0x70b596[_0xa93698(0x533)]='';if(_0x3120e2)_0x3120e2[_0xa93698(0x2b6)]['display']='none';if(_0x365ed8)_0x365ed8['value']='';console[_0xa93698(0x538)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x563acd=a4_0x4f367c;document[_0x563acd(0x293)](_0x563acd(0x495))['style'][_0x563acd(0x185)]=_0x563acd(0x46c),window[_0x563acd(0x211)]=null;}window[a4_0x4f367c(0x4f4)]=resimulateMatch,window[a4_0x4f367c(0x37b)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0x4f367c(0x54d)]=closeResimulateModal;async function loadPointsData(){const _0x4048b4=a4_0x4f367c;console[_0x4048b4(0x538)]('Loading\x20points\x20data...');try{await Promise[_0x4048b4(0x258)]([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x4048b4(0x36f),_0x4048b4(0x3aa));}catch(_0x257d53){console[_0x4048b4(0x3fc)](_0x4048b4(0x3f5),_0x257d53),showNotification(_0x4048b4(0x543)+_0x257d53[_0x4048b4(0x1fa)],_0x4048b4(0x3fc));}}function renderPointsOverview(_0x3a01fd){const _0x559be5=a4_0x4f367c,_0x5279bf=document['getElementById']('points-overview-table-body');if(!_0x5279bf)return;if(_0x3a01fd[_0x559be5(0x283)]===0x0){_0x5279bf[_0x559be5(0x533)]=_0x559be5(0x1c9);return;}_0x5279bf[_0x559be5(0x533)]='',_0x3a01fd[_0x559be5(0x2fa)](_0x5b5b3a=>{const _0x45b7fd=_0x559be5,_0x4bc3c5=document[_0x45b7fd(0x218)]('tr'),_0x459791=_0x5b5b3a[_0x45b7fd(0x583)]||_0x5b5b3a[_0x45b7fd(0x521)]||_0x45b7fd(0x1ef),_0x2be286=_0x5b5b3a[_0x45b7fd(0x1cb)]||_0x45b7fd(0x47b),_0x1d11c3=_0x5b5b3a[_0x45b7fd(0x3c7)]||0x0,_0x56a24e=_0x5b5b3a[_0x45b7fd(0x38b)]?new Date(_0x5b5b3a[_0x45b7fd(0x38b)]['seconds']*0x3e8)['toLocaleDateString']():_0x45b7fd(0x3e2);_0x4bc3c5[_0x45b7fd(0x533)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x459791+_0x45b7fd(0x174)+_0x2be286+_0x45b7fd(0x511)+(_0x1d11c3>0x3e8?_0x45b7fd(0x20e):_0x1d11c3>0x1f4?_0x45b7fd(0x2b4):'low-points')+_0x45b7fd(0x187)+_0x1d11c3['toLocaleString']()+_0x45b7fd(0x4de)+_0x56a24e+_0x45b7fd(0x3d5)+_0x5b5b3a['id']+_0x45b7fd(0x184)+_0x5b5b3a['id']+_0x45b7fd(0x536),_0x5279bf[_0x45b7fd(0x243)](_0x4bc3c5);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x155188=a4_0x4f367c;console[_0x155188(0x538)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x4324e2=document[_0x155188(0x201)](_0x155188(0x3a6));console[_0x155188(0x538)](_0x155188(0x527)+_0x4324e2[_0x155188(0x283)]+_0x155188(0x591)),_0x4324e2[_0x155188(0x2fa)](_0xb03a96=>{const _0x488e44=_0x155188,_0x2a5280=_0xb03a96[_0x488e44(0x30b)](!![]);_0xb03a96['parentNode'][_0x488e44(0x50e)](_0x2a5280,_0xb03a96);});const _0x3e73b1=document['querySelectorAll'](_0x155188(0x2d7));console[_0x155188(0x538)]('Found\x20'+_0x3e73b1['length']+_0x155188(0x52b)),_0x3e73b1['forEach'](_0x20b0cf=>{const _0x485bdf=_0x155188,_0x394908=_0x20b0cf[_0x485bdf(0x30b)](!![]);_0x20b0cf[_0x485bdf(0x2d2)][_0x485bdf(0x50e)](_0x394908,_0x20b0cf);}),document[_0x155188(0x201)]('.quick-edit-btn')[_0x155188(0x2fa)](_0x2f3906=>{const _0x3bc668=_0x155188;_0x2f3906[_0x3bc668(0x4e9)]('click',function(_0x7acf5b){const _0x1ad8d1=_0x3bc668;_0x7acf5b[_0x1ad8d1(0x59d)](),_0x7acf5b['stopPropagation']();const _0x168ab2=this[_0x1ad8d1(0x2cd)]['userId'];console[_0x1ad8d1(0x538)](_0x1ad8d1(0x3f3),_0x168ab2);if(!_0x168ab2){console[_0x1ad8d1(0x3fc)](_0x1ad8d1(0x3c6));return;}this[_0x1ad8d1(0x2b6)][_0x1ad8d1(0x358)]=_0x1ad8d1(0x1f2),setTimeout(()=>{const _0x55ba2e=_0x1ad8d1;this[_0x55ba2e(0x2b6)][_0x55ba2e(0x358)]='1';},0xc8),openQuickEditModal(_0x168ab2);});}),document['querySelectorAll'](_0x155188(0x2d7))[_0x155188(0x2fa)](_0x807602=>{const _0x2effcf=_0x155188;_0x807602[_0x2effcf(0x4e9)](_0x2effcf(0x37e),function(_0x1b6a5e){const _0x174d55=_0x2effcf;_0x1b6a5e['preventDefault'](),_0x1b6a5e[_0x174d55(0x400)]();const _0x6e63f7=this[_0x174d55(0x2cd)]['userId'];console[_0x174d55(0x538)](_0x174d55(0x3a9),_0x6e63f7);if(!_0x6e63f7){console[_0x174d55(0x3fc)](_0x174d55(0x3c6));return;}this['style'][_0x174d55(0x358)]=_0x174d55(0x1f2),setTimeout(()=>{const _0x2d4115=_0x174d55;this[_0x2d4115(0x2b6)][_0x2d4115(0x358)]='1';},0xc8),loadUserPointsHistory(_0x6e63f7);});}),console[_0x155188(0x538)](_0x155188(0x575));}async function openQuickEditModal(_0x3d3a74){const _0x209b98=a4_0x4f367c;console[_0x209b98(0x538)](_0x209b98(0x3f9),_0x3d3a74);const _0x53b965=document[_0x209b98(0x293)]('quick-edit-points-modal');if(!_0x53b965){console[_0x209b98(0x3fc)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification(_0x209b98(0x2f9),_0x209b98(0x3fc));return;}try{showNotification(_0x209b98(0x53c),_0x209b98(0x300));const _0x441993=doc(db,'userProfiles',_0x3d3a74),_0x590988=await getDoc(_0x441993);if(!_0x590988['exists']()){showNotification('User\x20not\x20found',_0x209b98(0x3fc));return;}const _0x48fcc9=_0x590988[_0x209b98(0x4e3)]();console['log'](_0x209b98(0x166),_0x48fcc9);const _0x1a138d=document[_0x209b98(0x293)](_0x209b98(0x4ee)),_0x1c064c=document[_0x209b98(0x293)]('quick-edit-display-name'),_0x3d3edc=document[_0x209b98(0x293)](_0x209b98(0x379)),_0x1a3a3e=document[_0x209b98(0x293)](_0x209b98(0x568)),_0x458f00=document[_0x209b98(0x293)](_0x209b98(0x509));if(!_0x1a138d||!_0x1c064c||!_0x3d3edc||!_0x1a3a3e||!_0x458f00){console[_0x209b98(0x3fc)]('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x209b98(0x40d),_0x209b98(0x3fc));return;}_0x1a138d['value']=_0x3d3a74,_0x1c064c[_0x209b98(0x2f7)]=_0x48fcc9[_0x209b98(0x583)]||_0x48fcc9[_0x209b98(0x521)]||_0x209b98(0x1ef),_0x3d3edc[_0x209b98(0x2f7)]=_0x48fcc9[_0x209b98(0x1cb)]||_0x209b98(0x47b),_0x1a3a3e[_0x209b98(0x2f7)]=(_0x48fcc9[_0x209b98(0x3c7)]||0x0)[_0x209b98(0x21a)](),_0x458f00[_0x209b98(0x408)]();const _0x3e9f74=document[_0x209b98(0x293)](_0x209b98(0x396));_0x3e9f74&&(_0x3e9f74[_0x209b98(0x431)]=!![]);_0x53b965[_0x209b98(0x328)][_0x209b98(0x2ff)](_0x209b98(0x560)),console['log'](_0x209b98(0x39c));const _0x222afa=document[_0x209b98(0x293)](_0x209b98(0x565));_0x222afa&&setTimeout(()=>_0x222afa[_0x209b98(0x3da)](),0x64);}catch(_0x177bdb){console[_0x209b98(0x3fc)](_0x209b98(0x334),_0x177bdb),showNotification(_0x209b98(0x1bc)+_0x177bdb[_0x209b98(0x1fa)],_0x209b98(0x3fc));}}function closeQuickEditModal(){const _0x3a063f=a4_0x4f367c,_0x1fb3cc=document[_0x3a063f(0x293)](_0x3a063f(0x303));_0x1fb3cc&&_0x1fb3cc[_0x3a063f(0x328)][_0x3a063f(0x22a)](_0x3a063f(0x560));}async function handleQuickEditPoints(_0x47df2f){const _0x3593ca=a4_0x4f367c;_0x47df2f[_0x3593ca(0x59d)]();const _0x862a6d=document['getElementById'](_0x3593ca(0x4ee))[_0x3593ca(0x34b)],_0x3fb4db=document[_0x3593ca(0x1a3)](_0x3593ca(0x448))[_0x3593ca(0x34b)],_0xb3efaf=parseInt(document['getElementById'](_0x3593ca(0x565))[_0x3593ca(0x34b)]),_0x110307=document[_0x3593ca(0x293)](_0x3593ca(0x1a1))['value'][_0x3593ca(0x3f7)]();console[_0x3593ca(0x538)](_0x3593ca(0x194),{'userId':_0x862a6d,'action':_0x3fb4db,'amount':_0xb3efaf,'reason':_0x110307});if(!_0x862a6d||!_0xb3efaf||_0xb3efaf<0x0){showNotification(_0x3593ca(0x370),_0x3593ca(0x3fc));return;}try{await modifyUserPoints(_0x862a6d,_0x3fb4db,_0xb3efaf,_0x110307),closeQuickEditModal(),loadPointsOverview(),showNotification(_0x3593ca(0x3c2),_0x3593ca(0x3aa)),console[_0x3593ca(0x538)]('Points\x20updated\x20successfully\x20for\x20user:',_0x862a6d);}catch(_0x2f0f9f){console[_0x3593ca(0x3fc)](_0x3593ca(0x29a),_0x2f0f9f),showNotification(_0x3593ca(0x159)+_0x2f0f9f['message'],_0x3593ca(0x3fc));}}async function searchUsersForPoints(){const _0x2b6347=a4_0x4f367c,_0x5151f4=document[_0x2b6347(0x293)](_0x2b6347(0x1d2))[_0x2b6347(0x34b)][_0x2b6347(0x3f7)]()[_0x2b6347(0x447)](),_0x22f13a=document[_0x2b6347(0x293)](_0x2b6347(0x4d3));if(!_0x5151f4||_0x5151f4[_0x2b6347(0x283)]<0x2){_0x22f13a[_0x2b6347(0x533)]='';return;}_0x22f13a[_0x2b6347(0x533)]=_0x2b6347(0x4a3);try{const _0x5039ab=collection(db,'userProfiles'),_0x2c406c=await getDocs(_0x5039ab),_0x47125b=[];_0x2c406c[_0x2b6347(0x2fa)](_0xf35571=>{const _0x59d92e=_0x2b6347,_0x30104e=_0xf35571['data'](),_0x58d4af=(_0x30104e['displayName']||_0x30104e[_0x59d92e(0x521)]||'')[_0x59d92e(0x447)](),_0x26b0d9=(_0x30104e[_0x59d92e(0x1cb)]||'')['toLowerCase']();(_0x58d4af['includes'](_0x5151f4)||_0x26b0d9['includes'](_0x5151f4))&&_0x47125b['push']({'id':_0xf35571['id'],..._0x30104e});});if(_0x47125b['length']===0x0){_0x22f13a[_0x2b6347(0x533)]=_0x2b6347(0x326);return;}_0x22f13a[_0x2b6347(0x533)]='',_0x47125b['forEach'](_0x37455d=>{const _0x378ad5=_0x2b6347,_0x7fa633=document[_0x378ad5(0x218)](_0x378ad5(0x41b));_0x7fa633[_0x378ad5(0x2ae)]=_0x378ad5(0x43d),_0x7fa633['innerHTML']=_0x378ad5(0x465)+(_0x37455d[_0x378ad5(0x583)]||_0x37455d['username']||_0x378ad5(0x546))+_0x378ad5(0x457)+(_0x37455d['email']||_0x378ad5(0x47b))+_0x378ad5(0x319)+(_0x37455d[_0x378ad5(0x3c7)]||0x0)[_0x378ad5(0x21a)]()+_0x378ad5(0x3cc),_0x7fa633[_0x378ad5(0x4e9)]('click',()=>selectUserForPoints(_0x37455d)),_0x22f13a['appendChild'](_0x7fa633);});}catch(_0x596f23){console[_0x2b6347(0x3fc)](_0x2b6347(0x449),_0x596f23),_0x22f13a[_0x2b6347(0x533)]=_0x2b6347(0x193);}}function selectUserForPoints(_0x999488){const _0x2220c0=a4_0x4f367c;document[_0x2220c0(0x293)]('selected-user-name')[_0x2220c0(0x2f7)]=_0x999488[_0x2220c0(0x583)]||_0x999488['username']||_0x2220c0(0x1ef),document[_0x2220c0(0x293)](_0x2220c0(0x1f8))[_0x2220c0(0x2f7)]=(_0x999488['points']||0x0)[_0x2220c0(0x21a)](),document[_0x2220c0(0x293)]('selected-user-id')[_0x2220c0(0x34b)]=_0x999488['id'],document[_0x2220c0(0x293)]('selected-user-info')[_0x2220c0(0x2b6)][_0x2220c0(0x185)]=_0x2220c0(0x2f1),document[_0x2220c0(0x293)](_0x2220c0(0x2b7))[_0x2220c0(0x2b6)][_0x2220c0(0x185)]=_0x2220c0(0x2f1),document['getElementById'](_0x2220c0(0x4d3))[_0x2220c0(0x533)]='',document['getElementById'](_0x2220c0(0x1d2))[_0x2220c0(0x34b)]='';}async function handleModifyPoints(_0x50c956){const _0x41f33f=a4_0x4f367c;_0x50c956['preventDefault']();const _0x35f00d=document['getElementById'](_0x41f33f(0x547))[_0x41f33f(0x34b)],_0x341695=document[_0x41f33f(0x293)]('points-action')['value'],_0x168411=parseInt(document[_0x41f33f(0x293)](_0x41f33f(0x171))[_0x41f33f(0x34b)]),_0x199bf7=document[_0x41f33f(0x293)](_0x41f33f(0x31d))[_0x41f33f(0x34b)]['trim']();if(!_0x35f00d||!_0x168411||_0x168411<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x41f33f(0x3fc));return;}try{await modifyUserPoints(_0x35f00d,_0x341695,_0x168411,_0x199bf7),document['getElementById'](_0x41f33f(0x55d))[_0x41f33f(0x408)]();const _0x5993be=doc(db,_0x41f33f(0x43b),_0x35f00d),_0x10f3e3=await getDoc(_0x5993be);if(_0x10f3e3['exists']()){const _0x4936ce=_0x10f3e3[_0x41f33f(0x4e3)]();document[_0x41f33f(0x293)](_0x41f33f(0x1f8))[_0x41f33f(0x2f7)]=(_0x4936ce['points']||0x0)[_0x41f33f(0x21a)]();}showNotification(_0x41f33f(0x250),'success'),loadPointsHistory();}catch(_0x28a0dc){console[_0x41f33f(0x3fc)](_0x41f33f(0x51c),_0x28a0dc),showNotification(_0x41f33f(0x342)+_0x28a0dc[_0x41f33f(0x1fa)],_0x41f33f(0x3fc));}}async function loadPointsHistory(){const _0xaa5844=a4_0x4f367c,_0xef8a68=document[_0xaa5844(0x293)](_0xaa5844(0x3f4));if(!_0xef8a68)return;_0xef8a68[_0xaa5844(0x533)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x31bbc2=collection(db,'pointsHistory'),_0x1c41c0=query(_0x31bbc2,orderBy(_0xaa5844(0x598),_0xaa5844(0x494)),limit(0x32)),_0x22ff5b=await getDocs(_0x1c41c0);if(_0x22ff5b[_0xaa5844(0x16f)]){_0xef8a68[_0xaa5844(0x533)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0xef8a68['innerHTML']='',_0x22ff5b['forEach'](_0x247227=>{const _0x1a4d0e=_0xaa5844,_0x338d40=_0x247227[_0x1a4d0e(0x4e3)](),_0x3ecebf=document[_0x1a4d0e(0x218)]('tr'),_0x51dd64=_0x338d40['timestamp']?new Date(_0x338d40[_0x1a4d0e(0x598)][_0x1a4d0e(0x1e5)]*0x3e8)['toLocaleString']():'Unknown';let _0x17086d='';switch(_0x338d40[_0x1a4d0e(0x3ff)]){case _0x1a4d0e(0x2ff):_0x17086d=_0x1a4d0e(0x1a0)+_0x338d40[_0x1a4d0e(0x364)]+'\x20points';break;case _0x1a4d0e(0x4a0):_0x17086d='Subtracted\x20'+_0x338d40[_0x1a4d0e(0x364)]+'\x20points';break;case _0x1a4d0e(0x2ec):_0x17086d=_0x1a4d0e(0x2db)+_0x338d40[_0x1a4d0e(0x364)]+_0x1a4d0e(0x4eb);break;default:_0x17086d=_0x338d40[_0x1a4d0e(0x3ff)]+'\x20'+_0x338d40[_0x1a4d0e(0x364)]+_0x1a4d0e(0x4eb);}_0x3ecebf[_0x1a4d0e(0x533)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x51dd64+_0x1a4d0e(0x33a)+(_0x338d40[_0x1a4d0e(0x583)]||_0x1a4d0e(0x1ef))+_0x1a4d0e(0x33a)+_0x17086d+_0x1a4d0e(0x2af)+_0x338d40[_0x1a4d0e(0x3ff)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x338d40[_0x1a4d0e(0x2b0)]||0x0)+_0x1a4d0e(0x19a)+(_0x338d40[_0x1a4d0e(0x43f)]||0x0)+_0x1a4d0e(0x36a)+(_0x338d40[_0x1a4d0e(0x4c9)]||'No\x20reason\x20provided')+_0x1a4d0e(0x33a)+(_0x338d40[_0x1a4d0e(0x586)]||_0x1a4d0e(0x14d))+_0x1a4d0e(0x320),_0xef8a68[_0x1a4d0e(0x243)](_0x3ecebf);});}catch(_0x425808){console['error']('Error\x20loading\x20points\x20history:',_0x425808),_0xef8a68[_0xaa5844(0x533)]=_0xaa5844(0x191)+_0x425808[_0xaa5844(0x1fa)]+'</td></tr>';}}function filterPointsOverview(){const _0x4dd5c8=a4_0x4f367c,_0x1fb2b0=document[_0x4dd5c8(0x293)](_0x4dd5c8(0x3bc))[_0x4dd5c8(0x34b)][_0x4dd5c8(0x447)]();if(!window['allUsersPoints'])return;const _0x2b4074=window[_0x4dd5c8(0x45c)][_0x4dd5c8(0x3b9)](_0x59ef94=>{const _0x40ad17=_0x4dd5c8,_0x4ae48e=(_0x59ef94[_0x40ad17(0x583)]||_0x59ef94[_0x40ad17(0x521)]||'')[_0x40ad17(0x447)](),_0x19de5e=(_0x59ef94[_0x40ad17(0x1cb)]||'')[_0x40ad17(0x447)]();return _0x4ae48e['includes'](_0x1fb2b0)||_0x19de5e[_0x40ad17(0x4c1)](_0x1fb2b0);});renderPointsOverview(_0x2b4074);}function sortPointsOverview(){const _0x14968c=a4_0x4f367c,_0x17b2b9=document[_0x14968c(0x293)](_0x14968c(0x1d8))[_0x14968c(0x34b)];if(!window[_0x14968c(0x45c)])return;const _0x5bb181=[...window[_0x14968c(0x45c)]];switch(_0x17b2b9){case _0x14968c(0x190):_0x5bb181[_0x14968c(0x2ee)]((_0xe79fa4,_0x47b465)=>(_0x47b465[_0x14968c(0x3c7)]||0x0)-(_0xe79fa4['points']||0x0));break;case'points-asc':_0x5bb181['sort']((_0x3a1f53,_0x3a9016)=>(_0x3a1f53['points']||0x0)-(_0x3a9016[_0x14968c(0x3c7)]||0x0));break;case _0x14968c(0x265):_0x5bb181[_0x14968c(0x2ee)]((_0x175889,_0x1078bf)=>{const _0x1fed87=_0x14968c,_0x56e65e=(_0x175889['displayName']||_0x175889[_0x1fed87(0x521)]||'')[_0x1fed87(0x447)](),_0x3bd57b=(_0x1078bf[_0x1fed87(0x583)]||_0x1078bf[_0x1fed87(0x521)]||'')[_0x1fed87(0x447)]();return _0x56e65e[_0x1fed87(0x252)](_0x3bd57b);});break;case _0x14968c(0x540):_0x5bb181[_0x14968c(0x2ee)]((_0x2fe952,_0xd30d62)=>{const _0x46a0b7=_0x14968c,_0x2c3626=(_0x2fe952[_0x46a0b7(0x583)]||_0x2fe952['username']||'')[_0x46a0b7(0x447)](),_0x47e992=(_0xd30d62['displayName']||_0xd30d62[_0x46a0b7(0x521)]||'')[_0x46a0b7(0x447)]();return _0x47e992['localeCompare'](_0x2c3626);});break;}renderPointsOverview(_0x5bb181);}async function handleAwardItem(_0x48843d){const _0x125392=a4_0x4f367c;_0x48843d[_0x125392(0x59d)]();const _0x4a4d1c=document['getElementById']('selected-user-id')[_0x125392(0x34b)],_0x169336=document['getElementById'](_0x125392(0x443))['value'],_0x20027f=document[_0x125392(0x293)](_0x125392(0x23f))['value'][_0x125392(0x3f7)]();if(!_0x4a4d1c||!_0x169336){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item',_0x125392(0x3fc));return;}try{showNotification(_0x125392(0x4a9),_0x125392(0x3aa)),document[_0x125392(0x293)](_0x125392(0x463))['reset']();}catch(_0x41ce09){console[_0x125392(0x3fc)](_0x125392(0x3e6),_0x41ce09),showNotification(_0x125392(0x1c1)+_0x41ce09[_0x125392(0x1fa)],_0x125392(0x3fc));}}async function loadUserPointsHistory(_0x32bb17){const _0x53b10f=a4_0x4f367c;try{const _0x2b8cff=collection(db,_0x53b10f(0x3c1)),_0x29f91c=query(_0x2b8cff,where('userId','==',_0x32bb17),orderBy(_0x53b10f(0x598),'desc')),_0x5cd5cc=await getDocs(_0x29f91c);console[_0x53b10f(0x538)](_0x53b10f(0x527)+_0x5cd5cc[_0x53b10f(0x54e)]+_0x53b10f(0x238)+_0x32bb17),showNotification(_0x53b10f(0x298)+_0x5cd5cc[_0x53b10f(0x54e)]+_0x53b10f(0x28d),'info');}catch(_0x33456c){console['error'](_0x53b10f(0x216),_0x33456c),showNotification(_0x53b10f(0x324),'error');}}async function initializeUserPointsField(){const _0x1c587d=a4_0x4f367c;try{console['log'](_0x1c587d(0x1e4));const _0x1c2dc3=collection(db,_0x1c587d(0x43b)),_0x24950f=await getDocs(_0x1c2dc3);if(_0x24950f[_0x1c587d(0x16f)]){console['log'](_0x1c587d(0x508));return;}let _0x23cfd5=0x0,_0x4251e9=0x0;const _0x53476b=writeBatch(db);let _0x1a260b=0x0;return console[_0x1c587d(0x538)](_0x1c587d(0x527)+_0x24950f[_0x1c587d(0x54e)]+_0x1c587d(0x456)),_0x24950f[_0x1c587d(0x2fa)](_0x7cfa94=>{const _0x14d19e=_0x1c587d,_0x2a13d0=_0x7cfa94[_0x14d19e(0x4e3)]();_0x2a13d0[_0x14d19e(0x3c7)]===undefined||_0x2a13d0[_0x14d19e(0x3c7)]===null?(_0x53476b[_0x14d19e(0x40a)](_0x7cfa94[_0x14d19e(0x3b3)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x23cfd5++,_0x1a260b++,console['log']('Queued\x20'+(_0x2a13d0['displayName']||_0x2a13d0['username']||_0x2a13d0['email']||'Unknown')+_0x14d19e(0x4d6))):(_0x4251e9++,console[_0x14d19e(0x538)]((_0x2a13d0[_0x14d19e(0x583)]||_0x2a13d0[_0x14d19e(0x521)]||_0x2a13d0[_0x14d19e(0x1cb)]||_0x14d19e(0x546))+'\x20already\x20has\x20points:\x20'+_0x2a13d0['points'])),_0x1a260b>=0x1f4&&console[_0x14d19e(0x177)](_0x14d19e(0x434));}),_0x23cfd5>0x0?(console[_0x1c587d(0x538)](_0x1c587d(0x2bd)+_0x23cfd5+_0x1c587d(0x17a)),await _0x53476b[_0x1c587d(0x4cf)](),console[_0x1c587d(0x538)](_0x1c587d(0x27e)+_0x23cfd5+_0x1c587d(0x237))):console[_0x1c587d(0x538)](_0x1c587d(0x42a)),console[_0x1c587d(0x538)](_0x1c587d(0x3fb)+_0x24950f[_0x1c587d(0x54e)]+_0x1c587d(0x1b5)+_0x23cfd5+_0x1c587d(0x195)+_0x4251e9),showNotification(_0x1c587d(0x497)+_0x23cfd5+_0x1c587d(0x262)+_0x4251e9+_0x1c587d(0x1e7),_0x1c587d(0x3aa)),window[_0x1c587d(0x45c)]&&loadPointsOverview(),{'totalUsers':_0x24950f[_0x1c587d(0x54e)],'usersUpdated':_0x23cfd5,'usersAlreadyHadPoints':_0x4251e9};}catch(_0x19845e){console['error'](_0x1c587d(0x15f),_0x19845e),showNotification(_0x1c587d(0x22c)+_0x19845e['message'],_0x1c587d(0x3fc));throw _0x19845e;}}function addPointsMigrationButton(){const _0x3d5091=a4_0x4f367c,_0x15bb86=document[_0x3d5091(0x293)](_0x3d5091(0x27b));if(!_0x15bb86)return;if(document[_0x3d5091(0x293)]('migrate-points-btn'))return;const _0x48ecdd=document[_0x3d5091(0x218)]('div');_0x48ecdd['className']='migration-section',_0x48ecdd[_0x3d5091(0x2b6)]['marginBottom']=_0x3d5091(0x327),_0x48ecdd[_0x3d5091(0x2b6)][_0x3d5091(0x173)]='15px',_0x48ecdd[_0x3d5091(0x2b6)]['backgroundColor']=_0x3d5091(0x2bb),_0x48ecdd[_0x3d5091(0x2b6)]['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x48ecdd[_0x3d5091(0x2b6)]['borderRadius']=_0x3d5091(0x27c),_0x48ecdd[_0x3d5091(0x533)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x380948=_0x15bb86[_0x3d5091(0x1a3)](_0x3d5091(0x209));_0x380948&&_0x380948['insertAdjacentElement'](_0x3d5091(0x1df),_0x48ecdd),document[_0x3d5091(0x293)]('migrate-points-btn')[_0x3d5091(0x4e9)]('click',async function(){const _0x453714=_0x3d5091;if(confirm(_0x453714(0x3ae))){this[_0x453714(0x45e)]=!![],this[_0x453714(0x533)]=_0x453714(0x4e5);try{await initializeUserPointsField(),this[_0x453714(0x533)]=_0x453714(0x39f),this[_0x453714(0x2b6)][_0x453714(0x46d)]=_0x453714(0x1b9),setTimeout(()=>{const _0x5d2667=_0x453714;_0x48ecdd[_0x5d2667(0x2b6)][_0x5d2667(0x185)]=_0x5d2667(0x46c);},0xbb8);}catch(_0x374145){this['innerHTML']=_0x453714(0x432),this['disabled']=![];}}});}function setupManagePointsSection(){const _0x3af69a=a4_0x4f367c;console[_0x3af69a(0x538)](_0x3af69a(0x53b)),addPointsMigrationButton();const _0x2e4b70=document[_0x3af69a(0x293)](_0x3af69a(0x1d2));_0x2e4b70&&_0x2e4b70['addEventListener'](_0x3af69a(0x206),debounce(searchUsersForPoints,0x12c));const _0x4b43a4=document[_0x3af69a(0x293)]('modify-points-form');_0x4b43a4&&_0x4b43a4[_0x3af69a(0x4e9)](_0x3af69a(0x4c4),handleModifyPoints);const _0x1df309=document['getElementById'](_0x3af69a(0x463));_0x1df309&&_0x1df309[_0x3af69a(0x4e9)](_0x3af69a(0x4c4),handleAwardItem);const _0x18e21f=document[_0x3af69a(0x293)]('points-overview-search');_0x18e21f&&_0x18e21f[_0x3af69a(0x4e9)](_0x3af69a(0x206),debounce(filterPointsOverview,0x12c));const _0x50ce10=document[_0x3af69a(0x293)]('points-sort-order');_0x50ce10&&_0x50ce10['addEventListener'](_0x3af69a(0x4dd),sortPointsOverview);const _0xfa92f=document[_0x3af69a(0x293)](_0x3af69a(0x4ea));_0xfa92f&&_0xfa92f[_0x3af69a(0x4e9)](_0x3af69a(0x37e),loadPointsOverview);const _0x2b6e26=document[_0x3af69a(0x293)](_0x3af69a(0x303));if(_0x2b6e26){console[_0x3af69a(0x538)](_0x3af69a(0x4fa));const _0x650275=_0x2b6e26[_0x3af69a(0x1a3)](_0x3af69a(0x4f0));_0x650275?_0x650275[_0x3af69a(0x4e9)](_0x3af69a(0x37e),function(){const _0x552187=_0x3af69a;console[_0x552187(0x538)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x3af69a(0x413));const _0x2cdaab=document[_0x3af69a(0x293)](_0x3af69a(0x44c));_0x2cdaab?_0x2cdaab[_0x3af69a(0x4e9)](_0x3af69a(0x37e),function(){const _0x57c1de=_0x3af69a;console['log'](_0x57c1de(0x487)),closeQuickEditModal();}):console[_0x3af69a(0x177)](_0x3af69a(0x2de));const _0xd0ac5=document[_0x3af69a(0x293)](_0x3af69a(0x509));_0xd0ac5?_0xd0ac5['addEventListener'](_0x3af69a(0x4c4),function(_0x3dbbba){const _0x356c51=_0x3af69a;console[_0x356c51(0x538)](_0x356c51(0x229)),handleQuickEditPoints(_0x3dbbba);}):console[_0x3af69a(0x3fc)](_0x3af69a(0x4dc)),_0x2b6e26[_0x3af69a(0x4e9)](_0x3af69a(0x37e),function(_0x2169f6){const _0x336237=_0x3af69a;_0x2169f6[_0x336237(0x44e)]===_0x2b6e26&&(console['log'](_0x336237(0x301)),closeQuickEditModal());});}else console[_0x3af69a(0x3fc)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console[_0x3af69a(0x538)](_0x3af69a(0x4a1));}function setupManageRibbonsSection(){const _0x26b60f=a4_0x4f367c;console[_0x26b60f(0x538)](_0x26b60f(0x1bd));const _0x2ba433=document[_0x26b60f(0x293)](_0x26b60f(0x3ca));_0x2ba433&&_0x2ba433[_0x26b60f(0x4e9)](_0x26b60f(0x206),debounce(searchRibbonUser,0x12c));const _0x1bb050=document[_0x26b60f(0x293)](_0x26b60f(0x4ef));_0x1bb050&&_0x1bb050[_0x26b60f(0x4e9)](_0x26b60f(0x37e),searchRibbonUser);const _0x259993=document[_0x26b60f(0x293)](_0x26b60f(0x51e));_0x259993&&_0x259993[_0x26b60f(0x4e9)](_0x26b60f(0x4c4),addRibbon),_0x2ba433&&_0x2ba433[_0x26b60f(0x4e9)](_0x26b60f(0x387),function(_0x9449ed){const _0x599c17=_0x26b60f;_0x9449ed[_0x599c17(0x4f5)]==='Enter'&&(_0x9449ed[_0x599c17(0x59d)](),searchRibbonUser());}),console[_0x26b60f(0x538)](_0x26b60f(0x51b));}async function modifyUserPoints(_0xed4767,_0x1021a8,_0x5561ea,_0x3687f3=''){const _0x36c36a=a4_0x4f367c,_0x318eff=doc(db,_0x36c36a(0x43b),_0xed4767),_0x520956=await getDoc(_0x318eff);if(!_0x520956['exists']())throw new Error(_0x36c36a(0x34d));const _0x4ce107=_0x520956[_0x36c36a(0x4e3)](),_0x39f67e=_0x4ce107[_0x36c36a(0x3c7)]!==undefined?_0x4ce107[_0x36c36a(0x3c7)]:0x0;_0x4ce107['points']===undefined&&(console[_0x36c36a(0x538)](_0x36c36a(0x1c8)+(_0x4ce107['displayName']||_0x4ce107[_0x36c36a(0x1cb)]||_0x36c36a(0x546))),await updateDoc(_0x318eff,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x3da0fa=_0x39f67e;switch(_0x1021a8){case _0x36c36a(0x2ff):_0x3da0fa=_0x39f67e+_0x5561ea;break;case'subtract':_0x3da0fa=Math[_0x36c36a(0x179)](0x0,_0x39f67e-_0x5561ea);break;case _0x36c36a(0x2ec):_0x3da0fa=_0x5561ea;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x318eff,{'points':_0x3da0fa,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x36c36a(0x3c1)),{'userId':_0xed4767,'userEmail':_0x4ce107[_0x36c36a(0x1cb)]||_0x36c36a(0x59c),'displayName':_0x4ce107[_0x36c36a(0x583)]||_0x4ce107['username']||'Unknown\x20User','action':_0x1021a8,'amount':_0x5561ea,'previousPoints':_0x39f67e,'newPoints':_0x3da0fa,'reason':_0x3687f3,'adminEmail':auth['currentUser'][_0x36c36a(0x1cb)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x362409=a4_0x4f367c,_0x448335=document[_0x362409(0x293)](_0x362409(0x597));if(!_0x448335)return;_0x448335['innerHTML']=_0x362409(0x454);try{const _0x48787f=collection(db,_0x362409(0x43b)),_0x54bc36=await getDocs(_0x48787f);if(_0x54bc36['empty']){_0x448335[_0x362409(0x533)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x362d63=[];let _0x4c7b22=0x0;_0x54bc36[_0x362409(0x2fa)](_0x111fca=>{const _0x548454=_0x362409,_0x42257f=_0x111fca[_0x548454(0x4e3)](),_0x1b24e6=_0x42257f[_0x548454(0x3c7)]!==undefined?_0x42257f['points']:0x0;_0x42257f[_0x548454(0x3c7)]===undefined&&_0x4c7b22++,_0x362d63[_0x548454(0x1ec)]({'id':_0x111fca['id'],..._0x42257f,'points':_0x1b24e6});}),_0x4c7b22>0x0&&(console[_0x362409(0x538)](_0x362409(0x527)+_0x4c7b22+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x4c7b22+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',_0x362409(0x300))),_0x362d63[_0x362409(0x2ee)]((_0x11672c,_0x127578)=>(_0x127578['points']||0x0)-(_0x11672c[_0x362409(0x3c7)]||0x0)),window['allUsersPoints']=_0x362d63,renderPointsOverview(_0x362d63);}catch(_0x5a505c){console[_0x362409(0x3fc)](_0x362409(0x2cb),_0x5a505c),_0x448335[_0x362409(0x533)]=_0x362409(0x1b3)+_0x5a505c[_0x362409(0x1fa)]+_0x362409(0x32d);}}async function loadRibbonsData(){const _0x5ad69c=a4_0x4f367c,_0x6e2be5=document['getElementById'](_0x5ad69c(0x3c9));if(!_0x6e2be5)return;_0x6e2be5[_0x5ad69c(0x533)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x26b09e,_0x201af9,_0x306e8b]=await Promise[_0x5ad69c(0x258)]([getDocs(collection(db,_0x5ad69c(0x450))),getDocs(collection(db,_0x5ad69c(0x599))),getDocs(collection(db,_0x5ad69c(0x156)))]);_0x6e2be5[_0x5ad69c(0x533)]='';const _0x1d6990=(_0xec9409,_0xdd2dd0)=>{const _0x4481a9=_0x5ad69c;_0xec9409[_0x4481a9(0x2fa)](_0x1c4e9b=>{const _0x29aedd=_0x4481a9,_0x2ab321=_0x1c4e9b[_0x29aedd(0x4e3)](),_0x902da6=_0x2ab321[_0x29aedd(0x1ab)]||{},_0x452661=Object['keys'](_0x902da6)[_0x29aedd(0x283)],_0x39faa1=document[_0x29aedd(0x218)]('tr');_0x39faa1[_0x29aedd(0x533)]=_0x29aedd(0x270)+(_0x2ab321[_0x29aedd(0x521)]||_0x29aedd(0x546))+_0x29aedd(0x23d)+_0xdd2dd0[_0x29aedd(0x447)]()+'\x22>'+_0xdd2dd0+_0x29aedd(0x321)+_0x452661+_0x29aedd(0x203)+(_0x2ab321[_0x29aedd(0x2c3)]?new Date(_0x2ab321[_0x29aedd(0x2c3)]['seconds']*0x3e8)['toLocaleDateString']():_0x29aedd(0x546))+_0x29aedd(0x384)+_0x2ab321[_0x29aedd(0x521)]+_0x29aedd(0x227)+_0xdd2dd0+_0x29aedd(0x19c),_0x6e2be5[_0x29aedd(0x243)](_0x39faa1);});};_0x1d6990(_0x26b09e,'D1'),_0x1d6990(_0x201af9,'D2'),_0x1d6990(_0x306e8b,'D3'),document['querySelectorAll'](_0x5ad69c(0x14e))[_0x5ad69c(0x2fa)](_0x250fab=>{const _0x1ff438=_0x5ad69c;_0x250fab[_0x1ff438(0x4e9)](_0x1ff438(0x37e),function(){const _0x175719=_0x1ff438,_0x454bc2=this['dataset'][_0x175719(0x521)],_0x5d95db=this[_0x175719(0x2cd)][_0x175719(0x2c0)];editUserRibbons(_0x454bc2,_0x5d95db);});}),showNotification(_0x5ad69c(0x3d7),_0x5ad69c(0x3aa));}catch(_0x51a8fc){console[_0x5ad69c(0x3fc)]('Error\x20loading\x20ribbons:',_0x51a8fc),_0x6e2be5[_0x5ad69c(0x533)]=_0x5ad69c(0x225),showNotification(_0x5ad69c(0x290),_0x5ad69c(0x3fc));}}async function searchRibbonUser(){const _0x41f60b=a4_0x4f367c,_0x4c9e8b=document[_0x41f60b(0x293)](_0x41f60b(0x3ca))['value'][_0x41f60b(0x3f7)]();if(!_0x4c9e8b){showNotification(_0x41f60b(0x2eb),_0x41f60b(0x3fc));return;}try{const [_0x2c9795,_0x2b32ff,_0x1caf85]=await Promise[_0x41f60b(0x258)]([getDoc(doc(db,_0x41f60b(0x450),_0x4c9e8b)),getDoc(doc(db,_0x41f60b(0x599),_0x4c9e8b)),getDoc(doc(db,_0x41f60b(0x156),_0x4c9e8b))]);let _0xd162c4=null,_0x5f1733=null;if(_0x2c9795[_0x41f60b(0x584)]())_0xd162c4='D1',_0x5f1733=_0x2c9795[_0x41f60b(0x4e3)]();else{if(_0x2b32ff[_0x41f60b(0x584)]())_0xd162c4='D2',_0x5f1733=_0x2b32ff['data']();else _0x1caf85['exists']()&&(_0xd162c4='D3',_0x5f1733=_0x1caf85['data']());}_0xd162c4?(document[_0x41f60b(0x293)](_0x41f60b(0x1b6))[_0x41f60b(0x2f7)]=_0x4c9e8b,document[_0x41f60b(0x293)]('ribbon-target-user')[_0x41f60b(0x34b)]=_0x4c9e8b,document[_0x41f60b(0x293)](_0x41f60b(0x4ff))[_0x41f60b(0x34b)]=_0xd162c4,document[_0x41f60b(0x293)](_0x41f60b(0x1a5))[_0x41f60b(0x2b6)][_0x41f60b(0x185)]=_0x41f60b(0x2f1),displayCurrentRibbons(_0x5f1733[_0x41f60b(0x1ab)]||{}),showNotification(_0x41f60b(0x527)+_0x4c9e8b+'\x20in\x20'+_0xd162c4+_0x41f60b(0x3be),_0x41f60b(0x3aa))):showNotification(_0x41f60b(0x1c7)+_0x4c9e8b+_0x41f60b(0x57d),_0x41f60b(0x3fc));}catch(_0x599cd9){console[_0x41f60b(0x3fc)]('Error\x20searching\x20user:',_0x599cd9),showNotification(_0x41f60b(0x52f),'error');}}function displayCurrentRibbons(_0x23e307){const _0x4d86d0=a4_0x4f367c,_0x247f53=document[_0x4d86d0(0x293)]('current-ribbons-list');if(!_0x247f53)return;_0x247f53['innerHTML']='';if(Object[_0x4d86d0(0x1d6)](_0x23e307)[_0x4d86d0(0x283)]===0x0){_0x247f53[_0x4d86d0(0x533)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object[_0x4d86d0(0x22f)](_0x23e307)['forEach'](([_0x567284,_0x3ab396])=>{const _0x221e43=_0x4d86d0,_0x32c8c1=document[_0x221e43(0x218)](_0x221e43(0x41b));_0x32c8c1[_0x221e43(0x2ae)]='ribbon-item',_0x32c8c1['innerHTML']=_0x221e43(0x488)+_0x567284+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x3ab396[_0x221e43(0x2b3)]||0x1)+_0x221e43(0x1b2)+(_0x3ab396[_0x221e43(0x1a8)]?new Date(_0x3ab396[_0x221e43(0x1a8)][_0x221e43(0x1e5)]*0x3e8)[_0x221e43(0x175)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x567284+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x247f53[_0x221e43(0x243)](_0x32c8c1);}),document[_0x4d86d0(0x201)](_0x4d86d0(0x4a4))[_0x4d86d0(0x2fa)](_0x4153e1=>{const _0x43cb5a=_0x4d86d0;_0x4153e1['addEventListener'](_0x43cb5a(0x37e),function(){const _0x3b0e72=_0x43cb5a,_0x313d53=this[_0x3b0e72(0x2cd)][_0x3b0e72(0x202)];removeRibbon(_0x313d53);});});}async function addRibbon(_0x1ba4e4){const _0x2f1b4b=a4_0x4f367c;_0x1ba4e4[_0x2f1b4b(0x59d)]();const _0x3f8c0e=document[_0x2f1b4b(0x293)](_0x2f1b4b(0x213))[_0x2f1b4b(0x34b)],_0x1d7e32=document['getElementById'](_0x2f1b4b(0x4ff))[_0x2f1b4b(0x34b)],_0x4af8c5=document[_0x2f1b4b(0x293)](_0x2f1b4b(0x336))[_0x2f1b4b(0x34b)],_0x34d7e6=parseInt(document[_0x2f1b4b(0x293)](_0x2f1b4b(0x493))[_0x2f1b4b(0x34b)]);if(!_0x3f8c0e||!_0x1d7e32||!_0x4af8c5||!_0x34d7e6){showNotification(_0x2f1b4b(0x22d),_0x2f1b4b(0x3fc));return;}try{const _0x3d639b=_0x2f1b4b(0x450)+(_0x1d7e32==='D1'?'':_0x1d7e32),_0x27130f=doc(db,_0x3d639b,_0x3f8c0e),_0x3c537e=await getDoc(_0x27130f),_0x26b472=_0x3c537e[_0x2f1b4b(0x584)]()?_0x3c537e[_0x2f1b4b(0x4e3)]()['ribbons']||{}:{};_0x26b472[_0x4af8c5]={'level':_0x34d7e6,'awardedAt':serverTimestamp()},await setDoc(_0x27130f,{'username':_0x3f8c0e,'ladder':_0x1d7e32,'ribbons':_0x26b472,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x2f1b4b(0x1a0)+_0x4af8c5+'\x20Level\x20'+_0x34d7e6+'\x20to\x20'+_0x3f8c0e,'success'),displayCurrentRibbons(_0x26b472),document['getElementById'](_0x2f1b4b(0x336))[_0x2f1b4b(0x34b)]='',document[_0x2f1b4b(0x293)](_0x2f1b4b(0x493))['value']='1';}catch(_0x3d0f4e){console[_0x2f1b4b(0x3fc)](_0x2f1b4b(0x182),_0x3d0f4e),showNotification(_0x2f1b4b(0x287),_0x2f1b4b(0x3fc));}}async function removeRibbon(_0x579b61){const _0x1d1db0=a4_0x4f367c,_0x4a5e3d=document[_0x1d1db0(0x293)]('ribbon-target-user')[_0x1d1db0(0x34b)],_0x2e7dfe=document[_0x1d1db0(0x293)](_0x1d1db0(0x4ff))[_0x1d1db0(0x34b)];if(!confirm(_0x1d1db0(0x1ad)+_0x579b61+_0x1d1db0(0x2e7)+_0x4a5e3d+'?'))return;try{const _0x14db93=_0x1d1db0(0x450)+(_0x2e7dfe==='D1'?'':_0x2e7dfe),_0x3c4467=doc(db,_0x14db93,_0x4a5e3d),_0x145948=await getDoc(_0x3c4467),_0x22b5d6=_0x145948[_0x1d1db0(0x584)]()?_0x145948[_0x1d1db0(0x4e3)]()[_0x1d1db0(0x1ab)]||{}:{};delete _0x22b5d6[_0x579b61],await setDoc(_0x3c4467,{'username':_0x4a5e3d,'ladder':_0x2e7dfe,'ribbons':_0x22b5d6,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x579b61+_0x1d1db0(0x2e7)+_0x4a5e3d,_0x1d1db0(0x3aa)),displayCurrentRibbons(_0x22b5d6);}catch(_0x15dad6){console[_0x1d1db0(0x3fc)]('Error\x20removing\x20ribbon:',_0x15dad6),showNotification(_0x1d1db0(0x58e),_0x1d1db0(0x3fc));}}function editUserRibbons(_0x4b7c39,_0x169450){const _0x42f6fa=a4_0x4f367c;document[_0x42f6fa(0x293)]('ribbon-user-search')[_0x42f6fa(0x34b)]=_0x4b7c39,searchRibbonUser();}