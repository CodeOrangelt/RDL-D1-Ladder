function a17_0x616e(_0x22e772,_0x4927c7){const _0x20d2e1=a17_0x4c53();return a17_0x616e=function(_0x1ccffa,_0x38abd0){_0x1ccffa=_0x1ccffa-0x1f0;let _0x4c5341=_0x20d2e1[_0x1ccffa];return _0x4c5341;},a17_0x616e(_0x22e772,_0x4927c7);}const a17_0x39a46d=a17_0x616e,a17_0x1ccffa=(function(){let _0x3d8952=!![];return function(_0xbf6b68,_0x3d02b8){const _0x4cfe00=_0x3d8952?function(){if(_0x3d02b8){const _0x1ab760=_0x3d02b8['apply'](_0xbf6b68,arguments);return _0x3d02b8=null,_0x1ab760;}}:function(){};return _0x3d8952=![],_0x4cfe00;};}()),a17_0x20d2e1=a17_0x1ccffa(this,function(){const _0xd46abc=a17_0x616e,_0x4e5564=function(){let _0x190443;try{_0x190443=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3308b1){_0x190443=window;}return _0x190443;},_0x2fc280=_0x4e5564(),_0x3de3cc=_0x2fc280[_0xd46abc(0x1f0)]=_0x2fc280['console']||{},_0x3700fb=['log','warn',_0xd46abc(0x1fd),'error',_0xd46abc(0x20b),'table','trace'];for(let _0x4c8369=0x0;_0x4c8369<_0x3700fb['length'];_0x4c8369++){const _0x5377f0=a17_0x1ccffa['constructor']['prototype']['bind'](a17_0x1ccffa),_0x136a4a=_0x3700fb[_0x4c8369],_0x3cbed1=_0x3de3cc[_0x136a4a]||_0x5377f0;_0x5377f0['__proto__']=a17_0x1ccffa[_0xd46abc(0x220)](a17_0x1ccffa),_0x5377f0['toString']=_0x3cbed1['toString'][_0xd46abc(0x220)](_0x3cbed1),_0x3de3cc[_0x136a4a]=_0x5377f0;}});a17_0x20d2e1();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a17_0x4c53(){const _0x124a55=['console','[FirebaseIdle]\x20Error\x20suspending\x20listener:','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','[FirebaseIdle]\x20Error\x20resuming\x20listener:','log','Executing\x20delayed\x20','system','[FirebaseIdle]\x20Resuming\x20listener:','suspendSession','executePendingOperations','size','Error\x20executing\x20pending\x20operation:','checkSessionActive','info','[FirebaseIdle]\x20Successfully\x20suspended\x20listener:','appendChild','pendingOperations','[FirebaseIdle]\x20No\x20listeners\x20to\x20resume','deleteDocument','[FirebaseIdle]\x20Creating\x20listener:\x20','resumeSession','_suspendedListeners','suspendAllListeners','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','[FirebaseIdle]\x20Suspension\x20test\x20complete','getDocument','now','exception','getDocuments','[FirebaseIdle]\x20Resuming\x20listeners:','addDocument','update','[FirebaseIdle]\x20Debug\x20mode\x20','[FirebaseIdle]\x20Active\x20listeners:\x20','toString','set','unavailable','error','div','blockedOperations','safeOperation','pendingTimeout','activeListeners','[FirebaseIdle]\x20Blocked\x20','getElementById','debug','[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension','code','bind','RDL_SESSION_SUSPENDED','get','add'];a17_0x4c53=function(){return _0x124a55;};return a17_0x4c53();}class FirebaseIdleWrapper{constructor(){const _0x1f5c34=a17_0x616e;this['activeListeners']=new Map(),this[_0x1f5c34(0x200)]=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}[a17_0x39a46d(0x1fc)](){const _0x489907=a17_0x39a46d;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this[_0x489907(0x217)]=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x489907(0x21b)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console[_0x489907(0x1f4)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0xb48c78,_0x9abcd4,..._0x3de1cd){const _0x1c2724=a17_0x39a46d;if(!this['checkSessionActive']()){const _0x15b010=_0x9abcd4+'-'+Date[_0x1c2724(0x20a)]()+'-'+Math['random']()[_0x1c2724(0x212)](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x15b010,{'operation':_0xb48c78,'operationType':_0x9abcd4,'args':_0x3de1cd}),!this['pendingTimeout']&&(this[_0x1c2724(0x219)]=setTimeout(()=>{const _0x527c87=_0x1c2724;this[_0x527c87(0x200)]['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0xb48c78(..._0x3de1cd);}catch(_0x4f9533){if(_0x4f9533[_0x1c2724(0x21f)]===_0x1c2724(0x214)||_0x4f9533[_0x1c2724(0x21f)]==='resource-exhausted'||_0x4f9533['message']&&_0x4f9533['message']['includes']('network'))return handleNetworkError(),null;throw _0x4f9533;}}async['getDocument'](_0x44c474){const _0xe835f7=a17_0x39a46d;return this[_0xe835f7(0x218)](getDoc,_0xe835f7(0x222),_0x44c474);}async[a17_0x39a46d(0x20c)](_0xad053a){const _0x3868d1=a17_0x39a46d;return this[_0x3868d1(0x218)](getDocs,'query',_0xad053a);}async[a17_0x39a46d(0x20e)](_0x325c07,_0x5cbcae){const _0x5b3f4e=a17_0x39a46d;return this['safeOperation'](addDoc,_0x5b3f4e(0x223),_0x325c07,_0x5cbcae);}async['setDocument'](_0x6e1e50,_0x1e2a24,_0x3ed1d5={}){return this['safeOperation'](setDoc,'set',_0x6e1e50,_0x1e2a24,_0x3ed1d5);}async['updateDocument'](_0x5d01f7,_0x30873b){const _0x2994ca=a17_0x39a46d;return this['safeOperation'](updateDoc,_0x2994ca(0x20f),_0x5d01f7,_0x30873b);}async[a17_0x39a46d(0x202)](_0x47c758){return this['safeOperation'](deleteDoc,'delete',_0x47c758);}['suspendAllListeners'](){const _0xc75bf8=a17_0x39a46d;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this[_0xc75bf8(0x21a)]['size']),this['_suspendedListeners']=new Map(this[_0xc75bf8(0x21a)]),this['activeListeners']['forEach']((_0x1a7a86,_0x21c8ab)=>{const _0x26307b=_0xc75bf8;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x21c8ab);if(typeof _0x1a7a86==='function')try{_0x1a7a86(),console[_0x26307b(0x1f4)](_0x26307b(0x1fe),_0x21c8ab);}catch(_0x239b5b){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x21c8ab,_0x239b5b);}else{if(_0x1a7a86&&typeof _0x1a7a86['unsubscribe']==='function')try{_0x1a7a86['unsubscribe'](),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x21c8ab);}catch(_0x24030b){console['error'](_0x26307b(0x1f1),_0x21c8ab,_0x24030b);}}}),this[_0xc75bf8(0x21a)]['clear']();if(this['debug']){const _0xce120e=document['createElement'](_0xc75bf8(0x216));_0xce120e['id']='firebase-suspend-indicator',_0xce120e['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xce120e['textContent']='Firebase:\x20Suspended',document['body'][_0xc75bf8(0x1ff)](_0xce120e);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x2d9005=a17_0x39a46d;if(!this['_suspendedListeners']||this[_0x2d9005(0x205)]['size']===0x0){console['log'](_0x2d9005(0x201));return;}console['log'](_0x2d9005(0x20d),this['_suspendedListeners'][_0x2d9005(0x1fa)]),this['_suspendedListeners']['forEach']((_0x3e142e,_0x4ecf48)=>{const _0x454f64=_0x2d9005;console[_0x454f64(0x1f4)](_0x454f64(0x1f7),_0x4ecf48);try{if(typeof _0x3e142e==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x4ecf48);return;}const {query:_0x44bbff,callback:_0x596b87,options:_0x3bec4c}=_0x3e142e;if(_0x44bbff&&_0x596b87){const _0x2fa13d=onSnapshot(_0x44bbff,_0x596b87,_0x3bec4c||{});this['activeListeners']['set'](_0x4ecf48,_0x2fa13d),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x4ecf48);}}catch(_0x3dc0df){console[_0x454f64(0x215)](_0x454f64(0x1f3),_0x4ecf48,_0x3dc0df);}}),this['_suspendedListeners']['clear']();const _0x13fda8=document[_0x2d9005(0x21c)]('firebase-suspend-indicator');_0x13fda8&&_0x13fda8['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x3a940d,_0x21f84c,_0xe9415c={},_0x15069a=null){const _0x1dc40b=a17_0x39a46d,_0x3cd222=_0x15069a||'listener_'+Date[_0x1dc40b(0x20a)]()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console[_0x1dc40b(0x1f4)](_0x1dc40b(0x203)+_0x3cd222);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x3cd222),()=>{};try{const _0x24c626=onSnapshot(_0x3a940d,_0x21f84c,_0xe9415c);return this[_0x1dc40b(0x21a)]['set'](_0x3cd222,{'unsubscribe':_0x24c626,'query':_0x3a940d,'callback':_0x21f84c,'options':_0xe9415c}),this['debug']&&(console[_0x1dc40b(0x1f4)]('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x3cd222),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x1dc40b(0x21a)]['size'])),()=>{const _0x44e3f5=_0x1dc40b;this['debug']&&console[_0x44e3f5(0x1f4)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x3cd222);try{_0x24c626(),this['activeListeners']['delete'](_0x3cd222),this[_0x44e3f5(0x21d)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x3cd222),console['log'](_0x44e3f5(0x211)+this[_0x44e3f5(0x21a)]['size']));}catch(_0x24d06e){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x3cd222+':',_0x24d06e);}};}catch(_0x1f39e4){return console['error'](_0x1dc40b(0x1f2)+_0x3cd222+':',_0x1f39e4),()=>{};}}[a17_0x39a46d(0x1f9)](_0x3d58ce='all'){const _0x2ed827=a17_0x39a46d;console['log']('Executing\x20pending\x20'+_0x3d58ce+'\x20operations:\x20'+this['pendingOperations'][_0x2ed827(0x1fa)]+'\x20total\x20operations');const _0x5283a3=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0x5283a3['forEach']((_0xecc4b5,_0xb44f7a)=>{const _0x14e7f6=_0x2ed827;_0x3d58ce==='all'||_0xecc4b5['operationType']===_0x3d58ce?(console['log'](_0x14e7f6(0x1f5)+_0xecc4b5['operationType']+'\x20operation'),this[_0x14e7f6(0x218)](_0xecc4b5['operation'],_0xecc4b5['operationType'],..._0xecc4b5['args'])['catch'](_0x4eba62=>console['error'](_0x14e7f6(0x1fb),_0x4eba62))):this['pendingOperations'][_0x14e7f6(0x213)](_0xb44f7a,_0xecc4b5);});}['enableDebug'](_0x29764f=!![]){const _0xc4e9a5=a17_0x39a46d;this['debug']=_0x29764f,console['log'](_0xc4e9a5(0x210)+(_0x29764f?'enabled':'disabled'));if(_0x29764f){const _0x1657cc=window[_0xc4e9a5(0x221)];window[_0xc4e9a5(0x221)]=!![],console[_0xc4e9a5(0x1f4)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this[_0xc4e9a5(0x209)](doc(db,_0xc4e9a5(0x1f6),'test'))['then'](_0x18c342=>{const _0x39aacb=_0xc4e9a5;console[_0x39aacb(0x1f4)](_0x39aacb(0x21e),_0x18c342);})['catch'](_0x15b3b3=>{const _0x359a66=_0xc4e9a5;console['log'](_0x359a66(0x207),_0x15b3b3);})['finally'](()=>{const _0x4a9c76=_0xc4e9a5;console['log'](_0x4a9c76(0x208)),window[_0x4a9c76(0x221)]=_0x1657cc;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x961064=a17_0x39a46d,_0x2b22c7=window[_0x961064(0x1f8)]||function(){},_0x25ca36=window[_0x961064(0x204)]||function(){};window['suspendSession']=function(){const _0x23f59c=_0x961064;_0x2b22c7(),firebaseIdle[_0x23f59c(0x206)]();},window[_0x961064(0x204)]=function(){_0x25ca36(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;