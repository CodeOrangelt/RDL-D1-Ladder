const a30_0x9989f=(function(){let _0x8646b3=!![];return function(_0x42533f,_0x338327){const _0x4ced93=_0x8646b3?function(){if(_0x338327){const _0x33491e=_0x338327['apply'](_0x42533f,arguments);return _0x338327=null,_0x33491e;}}:function(){};return _0x8646b3=![],_0x4ced93;};}()),a30_0x28c7f1=a30_0x9989f(this,function(){const _0x2cb321=a30_0x2fe6,_0x35cedf=function(){let _0x2f5b0e;try{_0x2f5b0e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x17fa05){_0x2f5b0e=window;}return _0x2f5b0e;},_0x44bf3b=_0x35cedf(),_0x52b8ec=_0x44bf3b[_0x2cb321(0x1ee)]=_0x44bf3b['console']||{},_0x2bd04b=[_0x2cb321(0x1c1),'warn',_0x2cb321(0x1d1),_0x2cb321(0x1e1),'exception',_0x2cb321(0x1bd),'trace'];for(let _0x36f2f0=0x0;_0x36f2f0<_0x2bd04b['length'];_0x36f2f0++){const _0x1b66d4=a30_0x9989f['constructor'][_0x2cb321(0x1cf)][_0x2cb321(0x1c7)](a30_0x9989f),_0x6a7002=_0x2bd04b[_0x36f2f0],_0x1e73cd=_0x52b8ec[_0x6a7002]||_0x1b66d4;_0x1b66d4['__proto__']=a30_0x9989f['bind'](a30_0x9989f),_0x1b66d4['toString']=_0x1e73cd[_0x2cb321(0x1e8)][_0x2cb321(0x1c7)](_0x1e73cd),_0x52b8ec[_0x6a7002]=_0x1b66d4;}});a30_0x28c7f1();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a30_0x496a19 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x26178f=![]){const _0xfbbc7a=a30_0x2fe6,_0x576ba7=document['querySelector'](_0xfbbc7a(0x1c2));if(!_0x576ba7){console['error']('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x576ba7['innerHTML']=_0xfbbc7a(0x1bc);try{const _0x348835=Date['now']();if(!_0x26178f&&playerCacheD2['data']&&_0x348835-playerCacheD2[_0xfbbc7a(0x1f1)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0xfbbc7a(0x1db)]);return;}const _0x490278=collection(db,'playersD2'),_0x1b9cf0=await a30_0x496a19['getDocuments'](_0x490278),_0x379b6a=[];_0x1b9cf0[_0xfbbc7a(0x1e6)](_0x1a7285=>{const _0x479585=_0xfbbc7a,_0x16d690=_0x1a7285['data']();_0x16d690['username']&&_0x379b6a['push']({..._0x16d690,'id':_0x1a7285['id'],'elo':_0x16d690['eloRating']||0x0,'position':_0x16d690['position']||Number[_0x479585(0x1ea)]});});const _0x58273c=collection(db,'userProfiles'),_0x27cdbd=await getDocs(_0x58273c),_0x593760=new Map();_0x27cdbd['forEach'](_0x1dc31e=>{const _0x2a3674=_0xfbbc7a,_0x542b62=_0x1dc31e[_0x2a3674(0x1db)]();_0x542b62[_0x2a3674(0x1cd)]&&_0x593760['set'](_0x542b62[_0x2a3674(0x1cd)]['toLowerCase'](),_0x542b62);});for(const _0x1e73e3 of _0x379b6a){const _0x244b13=_0x1e73e3['username']['toLowerCase']();if(_0x593760[_0xfbbc7a(0x1bb)](_0x244b13)){const _0x48341d=_0x593760['get'](_0x244b13);_0x48341d[_0xfbbc7a(0x1e0)]&&(_0x1e73e3['country']=_0x48341d['country'][_0xfbbc7a(0x1d6)]()),_0x1e73e3['points']=_0x48341d['points']||0x0;}else _0x1e73e3[_0xfbbc7a(0x1c4)]=0x0;}const _0x413cb8=_0x379b6a['map'](_0x2a2fa6=>_0x2a2fa6[_0xfbbc7a(0x1cd)]),_0x210cb7=await fetchBatchMatchStatsD2(_0x413cb8);_0x379b6a['sort']((_0x2d7cf3,_0x14bc23)=>{const _0x4138ef=_0xfbbc7a,_0x197062=_0x210cb7['get'](_0x2d7cf3[_0x4138ef(0x1cd)])?.['totalMatches']||0x0,_0x209672=_0x210cb7[_0x4138ef(0x1f5)](_0x14bc23['username'])?.['totalMatches']||0x0;if(_0x197062===0x0!==(_0x209672===0x0))return _0x197062===0x0?0x1:-0x1;return(_0x2d7cf3['position']||0x3e7)-(_0x14bc23[_0x4138ef(0x1f7)]||0x3e7);}),_0x379b6a['forEach']((_0x4ef1b8,_0x2531c9)=>{_0x4ef1b8['position']=_0x2531c9+0x1;}),playerCacheD2['data']=_0x379b6a,playerCacheD2[_0xfbbc7a(0x1f1)]=_0x348835,updateLadderDisplayD2(_0x379b6a);}catch(_0x568263){console['error']('Error\x20loading\x20D2\x20ladder:',_0x568263),_0x576ba7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x568263['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x61ca46){const _0x2b5db1=a30_0x2fe6;if(_0x61ca46['length']===0x0)return 0x1;let _0x4e1548=0x0;return _0x61ca46[_0x2b5db1(0x1e6)](_0x59efd2=>{_0x59efd2['position']&&typeof _0x59efd2['position']==='number'&&_0x59efd2['position']>_0x4e1548&&(_0x4e1548=_0x59efd2['position']);}),_0x4e1548+0x1;}async function updatePlayerPositions(_0x13b681,_0x533bd4){const _0x174a28=a30_0x2fe6;try{const _0x1a5492=collection(db,_0x174a28(0x1c3)),_0x365123=await getDocs(_0x1a5492),_0x3df033=[];_0x365123['forEach'](_0x5df009=>{const _0x3856cc=_0x174a28;_0x3df033[_0x3856cc(0x1e9)]({'id':_0x5df009['id'],..._0x5df009['data']()});});const _0x1b346d=_0x3df033[_0x174a28(0x1ce)](_0x4a5840=>_0x4a5840['username']===_0x13b681),_0x263312=_0x3df033[_0x174a28(0x1ce)](_0x466e79=>_0x466e79[_0x174a28(0x1cd)]===_0x533bd4);if(!_0x1b346d||!_0x263312){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x1b346d[_0x174a28(0x1f7)]>_0x263312['position']){const _0x1e7ba6=_0x263312['position'];for(const _0xa6b22f of _0x3df033){_0xa6b22f['position']>=_0x263312['position']&&_0xa6b22f['position']<_0x1b346d['position']&&_0xa6b22f['username']!==_0x13b681&&await updateDoc(doc(db,_0x174a28(0x1c3),_0xa6b22f['id']),{'position':_0xa6b22f['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x1b346d['id']),{'position':_0x1e7ba6});if(_0x1e7ba6===0x1){const _0x1fddd5=doc(db,'playersD2',_0x1b346d['id']),_0x1f3c21=await getDoc(_0x1fddd5);!_0x1f3c21[_0x174a28(0x1db)]()['firstPlaceDate']&&await updateDoc(_0x1fddd5,{'firstPlaceDate':Timestamp['now']()});}if(_0x263312[_0x174a28(0x1f7)]===0x1){const _0x3c821e=doc(db,'playersD2',_0x263312['id']);await updateDoc(_0x3c821e,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x2ab491){console['error']('Error\x20updating\x20D2\x20player\x20positions:',_0x2ab491);}}function getPlayerRankNameD2(_0x32b445,_0xb4728d=0x0,_0x2c6139=0x0){const _0x198500=a30_0x2fe6;if(_0xb4728d===0x0)return _0x198500(0x1f4);if(_0x32b445>=0x3e8&&_0x2c6139>=0x50&&_0xb4728d>=0x14)return'Emerald';if(_0x32b445>=0x2bc)return'Gold';if(_0x32b445>=0x1f4)return _0x198500(0x1d4);if(_0x32b445>=0xc8)return _0x198500(0x1d3);return'Unranked';}window['refreshLadderDisplayD2']=function(_0x391405=!![]){const _0x27a668=a30_0x2fe6;typeof displayLadderD2==='function'?displayLadderD2(_0x391405):console[_0x27a668(0x1da)]('displayLadderD2\x20function\x20not\x20available');};async function updateLadderDisplayD2(_0x4cb5a8){const _0x5d9a78=a30_0x2fe6;_0x4cb5a8['sort']((_0x260d8a,_0x464712)=>_0x260d8a[_0x5d9a78(0x1f7)]-_0x464712['position']);const _0x57510f=document['querySelector'](_0x5d9a78(0x1c2));if(!_0x57510f)return;_0x57510f['innerHTML']='';const _0x713ae4=_0x4cb5a8['map'](_0x2a11b3=>_0x2a11b3['username']),_0x5dbf80=await fetchBatchMatchStatsD2(_0x713ae4);let _0x49e4f3=new Map();try{typeof clearTokenCache===_0x5d9a78(0x1c5)&&clearTokenCache(),_0x49e4f3=await getTokensByUsernames(_0x713ae4);}catch(_0x358eea){console['error'](_0x5d9a78(0x1c8),_0x358eea);}const _0x281290=document['querySelector'](_0x5d9a78(0x1ec));_0x281290&&(_0x281290[_0x5d9a78(0x1ba)]=_0x5d9a78(0x1be));const _0x14140d=_0x4cb5a8['map'](_0x3705cf=>{const _0x382485=_0x5d9a78,_0x1d05ff=_0x5dbf80['get'](_0x3705cf['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x582245=_0x49e4f3[_0x382485(0x1f5)](_0x3705cf['username'])||[],_0x153cce=getPrimaryDisplayToken(_0x582245);return createPlayerRowWithTokenD2(_0x3705cf,_0x1d05ff,_0x153cce);})['join']('');_0x57510f[_0x5d9a78(0x1ba)]=_0x14140d,getPlayersLastEloChangesD2(_0x713ae4)['then'](_0x17a73b=>{const _0x341f75=_0x5d9a78,_0x559307=new Map();_0x57510f[_0x341f75(0x1d9)]('tr')['forEach']((_0x4b9c2e,_0xc0f320)=>{_0xc0f320<_0x713ae4['length']&&_0x559307['set'](_0x713ae4[_0xc0f320],_0x4b9c2e);}),_0x17a73b[_0x341f75(0x1e6)]((_0x599b72,_0x137128)=>{const _0x59eb79=_0x341f75,_0x3c0e31=_0x559307[_0x59eb79(0x1f5)](_0x137128);if(_0x3c0e31&&_0x599b72!==0x0){const _0x2e20e0=_0x3c0e31[_0x59eb79(0x1ed)]('td:nth-child(3)');if(_0x2e20e0){const _0x5817c2=_0x599b72>0x0?'+'+_0x599b72:''+_0x599b72,_0x12cd41=_0x2e20e0[_0x59eb79(0x1ed)]('.trend-indicator');_0x12cd41&&(_0x12cd41['textContent']=_0x5817c2,_0x12cd41['style'][_0x59eb79(0x1d2)]=_0x599b72>0x0?'#4CAF50':_0x59eb79(0x1d5),_0x12cd41[_0x59eb79(0x1f6)]['fontWeight']=_0x59eb79(0x1f3),_0x12cd41['style']['fontSize']='0.85em',_0x12cd41['style']['display']=_0x59eb79(0x1ef),_0x12cd41['style'][_0x59eb79(0x1f2)]='visible',_0x12cd41['style']['opacity']='1');}}});})['catch'](_0x15bff8=>console['error'](_0x5d9a78(0x1f0),_0x15bff8));}function createPlayerRowWithTokenD2(_0x46d208,_0x25ac20,_0x1d1754){const _0x3a7927=a30_0x2fe6,_0x3e7152=parseFloat(_0x46d208[_0x3a7927(0x1cb)])||0x0;let _0x41213f='#DC143C';if(_0x25ac20['totalMatches']===0x0)_0x41213f='#DC143C';else{if(_0x3e7152>=0x3e8&&_0x25ac20[_0x3a7927(0x1c9)]>=0x50&&_0x25ac20[_0x3a7927(0x1e5)]>=0x14)_0x41213f=_0x3a7927(0x1b9);else{if(_0x3e7152>=0x2bc)_0x41213f=_0x3a7927(0x1df);else{if(_0x3e7152>=0x1f4)_0x41213f='#C0C0C0';else _0x3e7152>=0xc8&&(_0x41213f='#CD7F32');}}}let _0x5d4b50='';_0x46d208[_0x3a7927(0x1e0)]&&(_0x5d4b50='<img\x20src=\x22../images/flags/'+_0x46d208['country'][_0x3a7927(0x1d6)]()+_0x3a7927(0x1b8)+_0x46d208['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x2e417b='';return _0x1d1754&&(_0x2e417b='<img\x20src=\x22'+_0x1d1754[_0x3a7927(0x1dc)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1d1754['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x1d1754['tokenName']+'\x20'+(_0x1d1754['equipped']?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a<tr>\x0a\x20\x20\x20\x20<td>'+_0x46d208[_0x3a7927(0x1f7)]+_0x3a7927(0x1e7)+encodeURIComponent(_0x46d208[_0x3a7927(0x1cd)])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x41213f+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x46d208['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5d4b50+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2e417b+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x41213f+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3e7152+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td>'+_0x25ac20[_0x3a7927(0x1e5)]+'</td>\x0a\x20\x20\x20\x20<td>'+_0x25ac20['wins']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x25ac20['losses']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x25ac20['kda']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x25ac20['winRate']+'%</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0x46d208[_0x3a7927(0x1c4)]||0x0)+'</td>\x0a</tr>';}function a30_0x2fe6(_0x4a2ff6,_0xa4bae1){const _0x28c7f1=a30_0x4709();return a30_0x2fe6=function(_0x9989f,_0x578e33){_0x9989f=_0x9989f-0x1b8;let _0x470950=_0x28c7f1[_0x9989f];return _0x470950;},a30_0x2fe6(_0x4a2ff6,_0xa4bae1);}async function getPlayersLastEloChangesD2(_0x19b2c1){const _0x36e191=a30_0x2fe6,_0x5d545e=new Map();_0x19b2c1[_0x36e191(0x1e6)](_0x505bd9=>_0x5d545e['set'](_0x505bd9,0x0));try{const _0x574d88=collection(db,'eloHistoryD2'),_0xe89258=query(_0x574d88,orderBy('timestamp','desc'),limit(0x64)),_0x5be1b7=await getDocs(_0xe89258),_0x273633=new Map(),_0xafaefc=await getDocs(collection(db,'playersD2'));_0xafaefc[_0x36e191(0x1e6)](_0x32e4da=>{const _0x8b818b=_0x36e191,_0x601225=_0x32e4da[_0x8b818b(0x1db)]();_0x601225['username']&&_0x273633['set'](_0x32e4da['id'],_0x601225['username']);});const _0x38a560=new Map();_0x5be1b7['forEach'](_0x3b8541=>{const _0x422f0a=_0x36e191,_0x55ca7b=_0x3b8541['data']();let _0x38bda1=_0x55ca7b[_0x422f0a(0x1cd)]||_0x55ca7b['playerUsername'];!_0x38bda1&&_0x55ca7b['player']&&_0x273633['has'](_0x55ca7b[_0x422f0a(0x1c6)])&&(_0x38bda1=_0x273633[_0x422f0a(0x1f5)](_0x55ca7b[_0x422f0a(0x1c6)])),_0x38bda1&&_0x19b2c1[_0x422f0a(0x1d7)](_0x38bda1)&&(!_0x38a560[_0x422f0a(0x1bb)](_0x38bda1)&&_0x38a560['set'](_0x38bda1,[]),_0x38a560['get'](_0x38bda1)[_0x422f0a(0x1e9)]({..._0x55ca7b,'timestamp':_0x55ca7b['timestamp']?.['seconds']||0x0,'username':_0x38bda1}));}),_0x38a560['forEach']((_0x51ef72,_0x5a960f)=>{const _0x385ef0=_0x36e191;if(_0x51ef72['length']>0x0){_0x51ef72[_0x385ef0(0x1cc)]((_0xa2c8fc,_0x459a32)=>_0x459a32['timestamp']-_0xa2c8fc['timestamp']);const _0x37518f=_0x51ef72[_0x385ef0(0x1ce)](_0x396c86=>_0x396c86['change']!==undefined||_0x396c86['newElo']!==undefined&&_0x396c86['previousElo']!==undefined);if(_0x37518f){let _0x31837d;if(_0x37518f['change']!==undefined)_0x31837d=_0x37518f[_0x385ef0(0x1e3)];else _0x37518f[_0x385ef0(0x1c0)]!==undefined&&_0x37518f[_0x385ef0(0x1e4)]!==undefined&&(_0x31837d=_0x37518f['newElo']-_0x37518f['previousElo']);_0x31837d!==undefined&&_0x5d545e[_0x385ef0(0x1ca)](_0x5a960f,_0x31837d);}}});if(_0x38a560[_0x36e191(0x1dd)]===0x0){const _0x533eb0=collection(db,'eloHistory'),_0x2c7737=query(_0x533eb0,where('gameMode','==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x2b587b=await getDocs(_0x2c7737);_0x2b587b['forEach'](_0x48e9c5=>{const _0x31ec2b=_0x36e191,_0x101658=_0x48e9c5[_0x31ec2b(0x1db)](),_0x1b29f1=_0x101658[_0x31ec2b(0x1cd)]||_0x101658['playerUsername'];if(_0x1b29f1&&_0x19b2c1['includes'](_0x1b29f1)){const _0x2efb63=_0x101658['change']||(_0x101658['newElo']!==undefined&&_0x101658['previousElo']!==undefined?_0x101658['newElo']-_0x101658[_0x31ec2b(0x1e4)]:0x0);_0x2efb63!==0x0&&_0x5d545e['set'](_0x1b29f1,_0x2efb63);}});}catch(_0x15cba6){}}}catch(_0x314426){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x314426);}return _0x5d545e;}function a30_0x4709(){const _0x3b5f9f=['.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','#50C878','innerHTML','has','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','table','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toFixed','newElo','log','#ladder-d2\x20tbody','playersD2','points','function','player','bind','D2:\x20Error\x20fetching\x20tokens:','winRate','set','elo','sort','username','find','prototype','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','info','color','Bronze','Silver','#F44336','toLowerCase','includes','wins','querySelectorAll','warn','data','tokenImage','size','totalDeaths','#FFD700','country','error','totalKills','change','previousElo','totalMatches','forEach','</td>\x0a\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','toString','push','MAX_SAFE_INTEGER','losses','#ladder-d2\x20thead\x20tr','querySelector','console','inline','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','timestamp','visibility','bold','Unranked','get','style','position'];a30_0x4709=function(){return _0x3b5f9f;};return a30_0x4709();}async function fetchBatchMatchStatsD2(_0x11fb56){const _0x1a6dcf=a30_0x2fe6,_0x53baeb=new Map();try{_0x11fb56['forEach'](_0x2ac11d=>{_0x53baeb['set'](_0x2ac11d,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x5a55e4=collection(db,'approvedMatchesD2'),_0x429d9f=await getDocs(_0x5a55e4);_0x429d9f[_0x1a6dcf(0x1e6)](_0x4fe68b=>{const _0x50bfa0=_0x1a6dcf,_0x2c0b8b=_0x4fe68b['data'](),_0x140669=_0x2c0b8b['winnerUsername'],_0x45ce13=_0x2c0b8b['loserUsername'];if(_0x11fb56['includes'](_0x140669)){const _0x3319f5=_0x53baeb[_0x50bfa0(0x1f5)](_0x140669);_0x3319f5['wins']++,_0x3319f5[_0x50bfa0(0x1e5)]++,_0x3319f5['totalKills']+=parseInt(_0x2c0b8b['winnerScore'])||0x0,_0x3319f5['totalDeaths']+=parseInt(_0x2c0b8b['loserScore'])||0x0;}if(_0x11fb56['includes'](_0x45ce13)){const _0x4f7f71=_0x53baeb['get'](_0x45ce13);_0x4f7f71[_0x50bfa0(0x1eb)]++,_0x4f7f71['totalMatches']++,_0x4f7f71[_0x50bfa0(0x1e2)]+=parseInt(_0x2c0b8b['loserScore'])||0x0,_0x4f7f71['totalDeaths']+=parseInt(_0x2c0b8b['winnerScore'])||0x0;}}),_0x11fb56['forEach'](_0x5a5f33=>{const _0x372294=_0x1a6dcf,_0x3de064=_0x53baeb[_0x372294(0x1f5)](_0x5a5f33);_0x3de064['kda']=_0x3de064['totalDeaths']>0x0?(_0x3de064['totalKills']/_0x3de064[_0x372294(0x1de)])['toFixed'](0x2):_0x3de064['totalKills']['toFixed'](0x2),_0x3de064[_0x372294(0x1c9)]=_0x3de064['totalMatches']>0x0?(_0x3de064[_0x372294(0x1d8)]/_0x3de064['totalMatches']*0x64)[_0x372294(0x1bf)](0x1):0x0;});}catch(_0x1b363f){console['error'](_0x1a6dcf(0x1d0),_0x1b363f);}return _0x53baeb;}export{displayLadderD2,updatePlayerPositions};