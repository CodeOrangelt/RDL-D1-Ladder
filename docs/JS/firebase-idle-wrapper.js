const a0_0x14e958=a0_0x1b15;(function(_0x27621c,_0x2379f4){const _0x52f3ad=a0_0x1b15,_0x50193b=_0x27621c();while(!![]){try{const _0x167eaf=parseInt(_0x52f3ad(0x1a4))/0x1+-parseInt(_0x52f3ad(0x18f))/0x2+parseInt(_0x52f3ad(0x19c))/0x3*(parseInt(_0x52f3ad(0x195))/0x4)+-parseInt(_0x52f3ad(0x174))/0x5+parseInt(_0x52f3ad(0x18c))/0x6+parseInt(_0x52f3ad(0x176))/0x7*(parseInt(_0x52f3ad(0x19a))/0x8)+parseInt(_0x52f3ad(0x17a))/0x9;if(_0x167eaf===_0x2379f4)break;else _0x50193b['push'](_0x50193b['shift']());}catch(_0x5528cd){_0x50193b['push'](_0x50193b['shift']());}}}(a0_0x2a2b,0x377f6));const a0_0x233967=(function(){let _0x547c4f=!![];return function(_0x47b8ae,_0x2ba485){const _0x26cf92=_0x547c4f?function(){const _0x157e38=a0_0x1b15;if(_0x2ba485){const _0x2f7cb9=_0x2ba485[_0x157e38(0x19d)](_0x47b8ae,arguments);return _0x2ba485=null,_0x2f7cb9;}}:function(){};return _0x547c4f=![],_0x26cf92;};}()),a0_0x5da1f6=a0_0x233967(this,function(){const _0x375620=a0_0x1b15,_0x244c9d=function(){const _0x1635e1=a0_0x1b15;let _0x8a9d28;try{_0x8a9d28=Function(_0x1635e1(0x18d)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x42b2c8){_0x8a9d28=window;}return _0x8a9d28;},_0x3d62a6=_0x244c9d(),_0x3944a9=_0x3d62a6[_0x375620(0x19b)]=_0x3d62a6['console']||{},_0x33e59d=['log',_0x375620(0x19f),_0x375620(0x1aa),'error','exception','table','trace'];for(let _0x28ea18=0x0;_0x28ea18<_0x33e59d['length'];_0x28ea18++){const _0xea4c72=a0_0x233967[_0x375620(0x171)][_0x375620(0x1ab)]['bind'](a0_0x233967),_0x4d90d8=_0x33e59d[_0x28ea18],_0xedb169=_0x3944a9[_0x4d90d8]||_0xea4c72;_0xea4c72['__proto__']=a0_0x233967['bind'](a0_0x233967),_0xea4c72['toString']=_0xedb169['toString'][_0x375620(0x197)](_0xedb169),_0x3944a9[_0x4d90d8]=_0xea4c72;}});a0_0x5da1f6();function a0_0x1b15(_0xeec17d,_0x3d3da5){const _0xd35d38=a0_0x2a2b();return a0_0x1b15=function(_0x5da1f6,_0x233967){_0x5da1f6=_0x5da1f6-0x171;let _0x3d6e1a=_0xd35d38[_0x5da1f6];return _0x3d6e1a;},a0_0x1b15(_0xeec17d,_0x3d3da5);}import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x558d02=a0_0x1b15;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this[_0x558d02(0x1a7)]=null,this['blockedOperations']=0x0,this['debug']=![];}['checkSessionActive'](){const _0xae359=a0_0x1b15;if(window['RDL_SESSION_SUSPENDED']===!![])return console[_0xae359(0x1a1)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0xae359(0x175)+this['blockedOperations']+_0xae359(0x173)),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async[a0_0x14e958(0x172)](_0x573a27,_0x8defde,..._0x544eb4){const _0x33a959=a0_0x14e958;if(!this['checkSessionActive']()){const _0x2e7678=_0x8defde+'-'+Date['now']()+'-'+Math[_0x33a959(0x1a3)]()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x2e7678,{'operation':_0x573a27,'operationType':_0x8defde,'args':_0x544eb4}),!this['pendingTimeout']&&(this[_0x33a959(0x1a7)]=setTimeout(()=>{const _0x140f6d=_0x33a959;this[_0x140f6d(0x189)]['clear'](),this[_0x140f6d(0x1a7)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x573a27(..._0x544eb4);}catch(_0x4d7e81){if(_0x4d7e81['code']===_0x33a959(0x19e)||_0x4d7e81[_0x33a959(0x185)]==='resource-exhausted'||_0x4d7e81['message']&&_0x4d7e81[_0x33a959(0x179)]['includes'](_0x33a959(0x17d)))return handleNetworkError(),null;throw _0x4d7e81;}}async['getDocument'](_0x720a37){return this['safeOperation'](getDoc,'get',_0x720a37);}async['getDocuments'](_0x1ba698){return this['safeOperation'](getDocs,'query',_0x1ba698);}async[a0_0x14e958(0x1a9)](_0x5409d1,_0x2188d0){const _0x41b66a=a0_0x14e958;return this['safeOperation'](addDoc,_0x41b66a(0x1a2),_0x5409d1,_0x2188d0);}async[a0_0x14e958(0x18b)](_0x46c3cc,_0x1d6fd6,_0x3a1273={}){const _0xcc680c=a0_0x14e958;return this['safeOperation'](setDoc,_0xcc680c(0x196),_0x46c3cc,_0x1d6fd6,_0x3a1273);}async['updateDocument'](_0x39a91b,_0x33cecf){const _0x190a34=a0_0x14e958;return this[_0x190a34(0x172)](updateDoc,'update',_0x39a91b,_0x33cecf);}async['deleteDocument'](_0x4a029b){return this['safeOperation'](deleteDoc,'delete',_0x4a029b);}[a0_0x14e958(0x1a5)](){const _0x15264b=a0_0x14e958;console[_0x15264b(0x1a1)]('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners']['size']),this[_0x15264b(0x183)]=new Map(this['activeListeners']),this[_0x15264b(0x194)]['forEach']((_0x142faa,_0x5ac44d)=>{const _0x3854d9=_0x15264b;console[_0x3854d9(0x1a1)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x5ac44d);if(typeof _0x142faa===_0x3854d9(0x18e))try{_0x142faa(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x5ac44d);}catch(_0x578ce4){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x5ac44d,_0x578ce4);}else{if(_0x142faa&&typeof _0x142faa['unsubscribe']==='function')try{_0x142faa['unsubscribe'](),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x5ac44d);}catch(_0x29cc27){console['error'](_0x3854d9(0x178),_0x5ac44d,_0x29cc27);}}}),this['activeListeners']['clear']();if(this['debug']){const _0x9a9b63=document[_0x15264b(0x193)](_0x15264b(0x17b));_0x9a9b63['id']='firebase-suspend-indicator',_0x9a9b63['style']['cssText']=_0x15264b(0x1a0),_0x9a9b63['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0x9a9b63);}console[_0x15264b(0x1a1)]('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x2699e5=a0_0x14e958;if(!this[_0x2699e5(0x183)]||this['_suspendedListeners']['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console[_0x2699e5(0x1a1)]('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this[_0x2699e5(0x183)][_0x2699e5(0x187)]((_0x5cdeab,_0x5ed061)=>{const _0x379ab6=_0x2699e5;console[_0x379ab6(0x1a1)]('[FirebaseIdle]\x20Resuming\x20listener:',_0x5ed061);try{if(typeof _0x5cdeab==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x5ed061);return;}const {query:_0x106fc0,callback:_0x14e395,options:_0x186e67}=_0x5cdeab;if(_0x106fc0&&_0x14e395){const _0x38ed69=onSnapshot(_0x106fc0,_0x14e395,_0x186e67||{});this[_0x379ab6(0x194)][_0x379ab6(0x196)](_0x5ed061,_0x38ed69),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x5ed061);}}catch(_0x28de27){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x5ed061,_0x28de27);}}),this[_0x2699e5(0x183)]['clear']();const _0x5894b0=document['getElementById'](_0x2699e5(0x198));_0x5894b0&&_0x5894b0['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}[a0_0x14e958(0x186)](_0xbf439e,_0x4f0435,_0x35026={},_0x2349cb=null){const _0x469128=a0_0x14e958,_0xf0f40f=_0x2349cb||'listener_'+Date['now']()+'_'+Math['random']()['toString'](0x24)[_0x469128(0x18a)](0x2,0x9);this[_0x469128(0x17c)]&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0xf0f40f);if(!this['checkSessionActive']())return console[_0x469128(0x1a1)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0xf0f40f),()=>{};try{const _0x2fc27d=onSnapshot(_0xbf439e,_0x4f0435,_0x35026);return this['activeListeners']['set'](_0xf0f40f,{'unsubscribe':_0x2fc27d,'query':_0xbf439e,'callback':_0x4f0435,'options':_0x35026}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0xf0f40f),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x469128(0x194)]['size'])),()=>{const _0x4b52d3=_0x469128;this['debug']&&console['log'](_0x4b52d3(0x190)+_0xf0f40f);try{_0x2fc27d(),this[_0x4b52d3(0x194)]['delete'](_0xf0f40f),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0xf0f40f),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x4acca1){console['error'](_0x4b52d3(0x184)+_0xf0f40f+':',_0x4acca1);}};}catch(_0x4dc3b7){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0xf0f40f+':',_0x4dc3b7),()=>{};}}['executePendingOperations'](_0x309a08='all'){const _0x656861=a0_0x14e958;console['log']('Executing\x20pending\x20'+_0x309a08+'\x20operations:\x20'+this['pendingOperations'][_0x656861(0x17f)]+'\x20total\x20operations');const _0x230d7d=new Map(this['pendingOperations']);this[_0x656861(0x189)]['clear'](),_0x230d7d['forEach']((_0x114330,_0x61ba0d)=>{const _0x51963e=_0x656861;_0x309a08===_0x51963e(0x180)||_0x114330['operationType']===_0x309a08?(console[_0x51963e(0x1a1)]('Executing\x20delayed\x20'+_0x114330[_0x51963e(0x1a6)]+'\x20operation'),this['safeOperation'](_0x114330[_0x51963e(0x199)],_0x114330['operationType'],..._0x114330['args'])['catch'](_0x1c652a=>console['error'](_0x51963e(0x1a8),_0x1c652a))):this['pendingOperations'][_0x51963e(0x196)](_0x61ba0d,_0x114330);});}['enableDebug'](_0x3e274e=!![]){const _0x2c3fe5=a0_0x14e958;this['debug']=_0x3e274e,console[_0x2c3fe5(0x1a1)]('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x3e274e?'enabled':_0x2c3fe5(0x181)));if(_0x3e274e){const _0xfbb160=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log'](_0x2c3fe5(0x192)),this['getDocument'](doc(db,'system','test'))[_0x2c3fe5(0x177)](_0x2cb5ae=>{const _0x37926c=_0x2c3fe5;console['log'](_0x37926c(0x188),_0x2cb5ae);})['catch'](_0x46d693=>{const _0xd28c6=_0x2c3fe5;console['log'](_0xd28c6(0x191),_0x46d693);})['finally'](()=>{const _0x4c150c=_0x2c3fe5;console[_0x4c150c(0x1a1)]('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0xfbb160;});}}}const firebaseIdle=new FirebaseIdleWrapper();function a0_0x2a2b(){const _0x5ac380=['createElement','activeListeners','388048YLqYBR','set','bind','firebase-suspend-indicator','operation','7496EBofdx','console','3FfRWUa','apply','unavailable','warn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','log','add','random','224873MVdXEL','suspendAllListeners','operationType','pendingTimeout','Error\x20executing\x20pending\x20operation:','addDocument','info','prototype','constructor','safeOperation','\x20operations\x20during\x20idle\x20state','1229615lNxOuC','[FirebaseIdle]\x20Blocked\x20','861gLPrSx','then','[FirebaseIdle]\x20Error\x20suspending\x20listener:','message','1572426fwYmbi','div','debug','network','resumeAllListeners','size','all','disabled','resumeSession','_suspendedListeners','[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20','code','createListener','forEach','[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension','pendingOperations','substr','setDocument','587028NuygfV','return\x20(function()\x20','function','472894BDDVhv','[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'];a0_0x2a2b=function(){return _0x5ac380;};return a0_0x2a2b();}export function enhanceIdleTimeout(){const _0x4c40aa=a0_0x14e958,_0x259828=window['suspendSession']||function(){},_0x717aa3=window['resumeSession']||function(){};window['suspendSession']=function(){_0x259828(),firebaseIdle['suspendAllListeners']();},window[_0x4c40aa(0x182)]=function(){const _0x34e777=_0x4c40aa;_0x717aa3(),firebaseIdle[_0x34e777(0x17e)]();};}export default firebaseIdle;