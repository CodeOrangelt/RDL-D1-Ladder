const a45_0x53b167=a45_0x4dcc,a45_0x5266c1=(function(){let _0x5a8552=!![];return function(_0x3cf5b5,_0x47b60e){const _0x17e7db=_0x5a8552?function(){if(_0x47b60e){const _0x503dba=_0x47b60e['apply'](_0x3cf5b5,arguments);return _0x47b60e=null,_0x503dba;}}:function(){};return _0x5a8552=![],_0x17e7db;};}()),a45_0x52417f=a45_0x5266c1(this,function(){const _0x5e0e44=a45_0x4dcc;let _0x42f305;try{const _0x24c9a7=Function('return\x20(function()\x20'+_0x5e0e44(0x1c5)+');');_0x42f305=_0x24c9a7();}catch(_0x5139a9){_0x42f305=window;}const _0x5ea923=_0x42f305[_0x5e0e44(0x1db)]=_0x42f305['console']||{},_0x551647=['log',_0x5e0e44(0x1d3),'info','error','exception',_0x5e0e44(0x1dd),'trace'];for(let _0x5de2c1=0x0;_0x5de2c1<_0x551647[_0x5e0e44(0x1de)];_0x5de2c1++){const _0x3bd009=a45_0x5266c1[_0x5e0e44(0x1d2)]['prototype']['bind'](a45_0x5266c1),_0x46ae62=_0x551647[_0x5de2c1],_0x4f5c61=_0x5ea923[_0x46ae62]||_0x3bd009;_0x3bd009['__proto__']=a45_0x5266c1['bind'](a45_0x5266c1),_0x3bd009['toString']=_0x4f5c61[_0x5e0e44(0x1d0)][_0x5e0e44(0x1ce)](_0x4f5c61),_0x5ea923[_0x46ae62]=_0x3bd009;}});a45_0x52417f();function a45_0x4dcc(_0x229b9b,_0x2c2c79){const _0x52417f=a45_0x2eb0();return a45_0x4dcc=function(_0x5266c1,_0x177c4d){_0x5266c1=_0x5266c1-0x1bc;let _0x2eb085=_0x52417f[_0x5266c1];return _0x2eb085;},a45_0x4dcc(_0x229b9b,_0x2c2c79);}import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x34b53e=a45_0x4dcc;this['form']=document[_0x34b53e(0x1c6)](_0x34b53e(0x1dc)),this[_0x34b53e(0x1d6)]=document[_0x34b53e(0x1c6)]('pfp-upload'),this['pfpPreview']=document['getElementById']('profile-preview'),this['statsContainer']=document[_0x34b53e(0x1c6)]('player-stats'),this['setupEventListeners'](),this['loadProfile']();}['setupEventListeners'](){this['pfpInput']['addEventListener']('change',_0x4dd9e2=>this['handleImageUpload'](_0x4dd9e2)),this['form']['addEventListener']('submit',_0x4a8d34=>this['handleSubmit'](_0x4a8d34));}async['handleImageUpload'](_0x64245e){const _0x25fb15=a45_0x4dcc,_0x2dbab3=_0x64245e['target'][_0x25fb15(0x1ca)][0x0];if(_0x2dbab3){const _0x2891c4=new FileReader();_0x2891c4['onload']=_0x43d23c=>{const _0x3971b2=_0x25fb15;this['pfpPreview'][_0x3971b2(0x1c4)]=_0x43d23c['target']['result'];},_0x2891c4[_0x25fb15(0x1d9)](_0x2dbab3);}}async[a45_0x53b167(0x1c1)](_0xc1d9e2){const _0x4223f5=a45_0x53b167;_0xc1d9e2['preventDefault']();const _0x11a125=auth['currentUser'];if(!_0x11a125){alert(_0x4223f5(0x1c7));return;}try{const _0x20d982=new FormData(this[_0x4223f5(0x1df)]),_0x186a73={'nickname':_0x20d982['get']('nickname'),'motto':_0x20d982['get']('motto'),'favoriteMap':_0x20d982['get']('favorite-map'),'favoriteWeapon':_0x20d982['get'](_0x4223f5(0x1d4)),'updatedAt':new Date()['toISOString']()},_0x5618a1=this[_0x4223f5(0x1d6)]['files'][0x0];if(_0x5618a1){const _0x37e62f=ref(storage,'profile-pictures/'+_0x11a125[_0x4223f5(0x1c3)]);await uploadBytes(_0x37e62f,_0x5618a1),_0x186a73['pfpUrl']=await getDownloadURL(_0x37e62f);}await setDoc(doc(db,'profiles',_0x11a125[_0x4223f5(0x1c3)]),_0x186a73),alert('Profile\x20saved\x20successfully!');}catch(_0x10c2ef){console['error']('Error\x20saving\x20profile:',_0x10c2ef),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x1a1d09=>{const _0x27dbf3=a45_0x4dcc;if(_0x1a1d09)try{const _0x5da1a9=await getDoc(doc(db,'profiles',_0x1a1d09[_0x27dbf3(0x1c3)]));if(_0x5da1a9[_0x27dbf3(0x1be)]()){const _0xb45f76=_0x5da1a9[_0x27dbf3(0x1cb)]();document['getElementById']('nickname')[_0x27dbf3(0x1bd)]=_0xb45f76['nickname']||'',document['getElementById']('motto')['value']=_0xb45f76['motto']||'',document['getElementById']('favorite-map')['value']=_0xb45f76[_0x27dbf3(0x1cd)]||'',document['getElementById']('favorite-weapon')['value']=_0xb45f76['favoriteWeapon']||'',_0xb45f76['pfpUrl']&&(this['pfpPreview'][_0x27dbf3(0x1c4)]=_0xb45f76['pfpUrl']),await this[_0x27dbf3(0x1c8)](_0xb45f76[_0x27dbf3(0x1da)]);}}catch(_0x50e549){console['error'](_0x27dbf3(0x1d8),_0x50e549);}});}async[a45_0x53b167(0x1c8)](_0x3e4f94){const _0x33997c=a45_0x53b167;if(!_0x3e4f94)return;try{const _0x1812a1=collection(db,'approvedMatches'),[_0x5bb648,_0x3b9cf7]=await Promise['all']([getDocs(query(_0x1812a1,where(_0x33997c(0x1d1),'==',_0x3e4f94))),getDocs(query(_0x1812a1,where('loserUsername','==',_0x3e4f94)))]),_0x968988=_0x5bb648[_0x33997c(0x1bc)],_0x54c69b=_0x3b9cf7['size'],_0x524cd1=_0x968988+_0x54c69b;let _0x2b52ac=0x0,_0x573f43=0x0;_0x5bb648['forEach'](_0x4224a6=>{const _0x4e5bbd=_0x4224a6['data']();if(_0x4e5bbd['winnerScore'])_0x2b52ac+=parseInt(_0x4e5bbd['winnerScore']);if(_0x4e5bbd['loserScore'])_0x573f43+=parseInt(_0x4e5bbd['loserScore']);}),_0x3b9cf7[_0x33997c(0x1cf)](_0x1244e7=>{const _0x1c9055=_0x33997c,_0x333a7f=_0x1244e7[_0x1c9055(0x1cb)]();if(_0x333a7f[_0x1c9055(0x1bf)])_0x2b52ac+=parseInt(_0x333a7f['loserScore']);if(_0x333a7f['winnerScore'])_0x573f43+=parseInt(_0x333a7f[_0x1c9055(0x1c2)]);});const _0x26c637=_0x573f43===0x0?_0x2b52ac[_0x33997c(0x1c0)](0x2):(_0x2b52ac/_0x573f43)[_0x33997c(0x1c0)](0x2),_0x1671be=_0x524cd1===0x0?'0':(_0x968988/_0x524cd1*0x64)['toFixed'](0x1);console['log']('Stats\x20calculated:',{'totalMatches':_0x524cd1,'wins':_0x968988,'losses':_0x54c69b,'totalKills':_0x2b52ac,'totalDeaths':_0x573f43,'kdRatio':_0x26c637,'winRate':_0x1671be}),document['getElementById']('stats-matches')[_0x33997c(0x1d7)]=_0x524cd1,document[_0x33997c(0x1c6)]('stats-wins')['textContent']=_0x968988,document['getElementById']('stats-losses')['textContent']=_0x54c69b,document['getElementById']('stats-kd')['textContent']=_0x26c637,document['getElementById']('stats-winrate')[_0x33997c(0x1d7)]=_0x1671be+'%';}catch(_0x132ffb){console['error']('Error\x20loading\x20player\x20stats:',_0x132ffb),[_0x33997c(0x1cc),'wins','losses','kd',_0x33997c(0x1d5)]['forEach'](_0x1cb987=>{const _0x1c3077=_0x33997c;document[_0x1c3077(0x1c6)](_0x1c3077(0x1c9)+_0x1cb987)['textContent']='-';});}}}document['addEventListener']('DOMContentLoaded',()=>{new ProfileManager();});function a45_0x2eb0(){const _0x334956=['size','value','exists','loserScore','toFixed','handleSubmit','winnerScore','uid','src','{}.constructor(\x22return\x20this\x22)(\x20)','getElementById','Please\x20sign\x20in\x20to\x20save\x20your\x20profile','loadPlayerStats','stats-','files','data','matches','favoriteMap','bind','forEach','toString','winnerUsername','constructor','warn','favorite-weapon','winrate','pfpInput','textContent','Error\x20loading\x20profile:','readAsDataURL','nickname','console','profile-form','table','length','form'];a45_0x2eb0=function(){return _0x334956;};return a45_0x2eb0();}