const a4_0x5688ea=a4_0xeb46,a4_0x2320a7=(function(){let _0x222728=!![];return function(_0x57c84d,_0x3ce479){const _0x1d1406=_0x222728?function(){if(_0x3ce479){const _0x5cd92f=_0x3ce479['apply'](_0x57c84d,arguments);return _0x3ce479=null,_0x5cd92f;}}:function(){};return _0x222728=![],_0x1d1406;};}()),a4_0x59ba3b=a4_0x2320a7(this,function(){const _0xa8df60=a4_0xeb46,_0x51f8f5=function(){const _0x5a154b=a4_0xeb46;let _0x297961;try{_0x297961=Function('return\x20(function()\x20'+_0x5a154b(0x250)+');')();}catch(_0x470955){_0x297961=window;}return _0x297961;},_0x14cc2e=_0x51f8f5(),_0x21187e=_0x14cc2e['console']=_0x14cc2e['console']||{},_0x15b07f=['log','warn','info','error','exception',_0xa8df60(0x1e6),_0xa8df60(0x2bc)];for(let _0x3bd991=0x0;_0x3bd991<_0x15b07f[_0xa8df60(0x20d)];_0x3bd991++){const _0x2b5f4c=a4_0x2320a7['constructor']['prototype'][_0xa8df60(0x13d)](a4_0x2320a7),_0x47d5e0=_0x15b07f[_0x3bd991],_0x1a0be0=_0x21187e[_0x47d5e0]||_0x2b5f4c;_0x2b5f4c['__proto__']=a4_0x2320a7['bind'](a4_0x2320a7),_0x2b5f4c['toString']=_0x1a0be0['toString']['bind'](_0x1a0be0),_0x21187e[_0x47d5e0]=_0x2b5f4c;}});a4_0x59ba3b();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x569430){const _0x1c80d7=a4_0xeb46;if(!_0x569430)return'#ffffff';_0x569430=_0x569430['replace']('#','');_0x569430['length']===0x3&&(_0x569430=_0x569430['split']('')['map'](_0x9b9e43=>_0x9b9e43+_0x9b9e43)['join'](''));if(_0x569430['length']!==0x6)return'#ffffff';const _0x2f2c00=parseInt(_0x569430['substring'](0x0,0x2),0x10),_0x107169=parseInt(_0x569430[_0x1c80d7(0x286)](0x2,0x4),0x10),_0x3ddb9b=parseInt(_0x569430['substring'](0x4,0x6),0x10),_0x1cf079=(_0x2f2c00*0x12b+_0x107169*0x24b+_0x3ddb9b*0x72)/0x3e8;return _0x1cf079>=0x80?_0x1c80d7(0x24e):_0x1c80d7(0x9a);}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x494567=>{const _0x35208d=a4_0xeb46;if(!_0x494567){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x574d0e){console[_0x35208d(0x13b)](_0x35208d(0xb8),_0x574d0e),showNotification('Error\x20setting\x20up\x20admin\x20dashboard',_0x35208d(0x13b));}});});async function getUserTabPermissions(_0x48718a){const _0x4fa420=a4_0xeb46;if(!_0x48718a)return[_0x4fa420(0x261)];console[_0x4fa420(0xd4)](_0x4fa420(0x15b)+_0x48718a+'\x20in\x20all\x20collections...');const _0xe3d21=[{'name':'userProfiles','displayName':_0x4fa420(0x2c6)},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':_0x4fa420(0x149),'displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x2a6430=auth['currentUser'];let _0x1bb480=null,_0x4005e5=null;for(const _0x579ef1 of _0xe3d21){try{if(_0x2a6430){const _0x20a12c=doc(db,_0x579ef1[_0x4fa420(0x147)],_0x2a6430['uid']),_0x8ebff3=await getDoc(_0x20a12c);if(_0x8ebff3[_0x4fa420(0x23d)]()){const _0xb81045=_0x8ebff3[_0x4fa420(0x1bd)]();console[_0x4fa420(0xd4)]('Found\x20user\x20in\x20'+_0x579ef1['displayName']+'\x20by\x20UID:',_0xb81045);const _0x16f196=(_0xb81045['roleName']||_0xb81045[_0x4fa420(0x260)]||'')['toLowerCase']();if(_0x16f196&&_0x16f196!==_0x4fa420(0x10f)){_0x1bb480=_0x16f196,_0x4005e5=_0x579ef1['displayName'],console[_0x4fa420(0xd4)]('Found\x20specific\x20role:\x20'+_0x1bb480+'\x20in\x20'+_0x4005e5);break;}}}if(!_0x1bb480){const _0x1f7440=collection(db,_0x579ef1['name']),_0x2b48a1=query(_0x1f7440,where('email','==',_0x48718a)),_0x52c17e=await getDocs(_0x2b48a1);if(!_0x52c17e['empty']){const _0x2053e0=_0x52c17e['docs'][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x579ef1[_0x4fa420(0x2b4)]+'\x20with\x20email\x20'+_0x48718a+':',_0x2053e0);const _0x23c108=(_0x2053e0[_0x4fa420(0x1c5)]||_0x2053e0['role']||'')[_0x4fa420(0x17b)]();if(_0x23c108&&_0x23c108!=='none'){_0x1bb480=_0x23c108,_0x4005e5=_0x579ef1['displayName'],console['log'](_0x4fa420(0x230)+_0x1bb480+'\x20in\x20'+_0x4005e5);break;}}}}catch(_0x28df9f){console['error']('Error\x20checking\x20'+_0x579ef1[_0x4fa420(0x2b4)]+':',_0x28df9f);}}if(_0x1bb480){console[_0x4fa420(0xd4)]('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x1bb480+'\x20(from\x20'+_0x4005e5+')');const _0x5f17dd={'admin':[_0x4fa420(0x261),_0x4fa420(0x1d8),'manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players',_0x4fa420(0x24a),'manage-trophies','elo-history','manage-highlights','user-roles-section',_0x4fa420(0x11f),'manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players',_0x4fa420(0x11f),'manage-articles','manage-trophies',_0x4fa420(0x19d),'inactive-players','settings','manage-trophies',_0x4fa420(0x14f),'manage-highlights','user-roles-section','manage-matches','manage-points','manage-levels-ribbons',_0x4fa420(0x2ce)],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard',_0x4fa420(0x25f),_0x4fa420(0x190),'elo-history','manage-highlights']};if(_0x5f17dd[_0x1bb480])return console[_0x4fa420(0xd4)]('Role\x20\x27'+_0x1bb480+_0x4fa420(0x2d3),_0x5f17dd[_0x1bb480]),_0x5f17dd[_0x1bb480];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x48718a+',\x20giving\x20default\x20access'),[_0x4fa420(0x261)];}function setupSidebarNavigation(_0x3d5d86=[]){const _0x1ff8e3=a4_0xeb46,_0x3f6045=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x2c96f8=document['querySelectorAll']('.admin-section');(!_0x3d5d86||_0x3d5d86['length']===0x0)&&(_0x3d5d86=[_0x1ff8e3(0x261)]);_0x3f6045['forEach'](_0xaa54b3=>{const _0x249469=_0x1ff8e3,_0x191e6e=_0xaa54b3['getAttribute'](_0x249469(0x247));_0x3d5d86['includes'](_0x191e6e)?_0xaa54b3['style']['display']='flex':_0xaa54b3[_0x249469(0x2b9)][_0x249469(0xa3)]='none',_0xaa54b3['addEventListener']('click',()=>{const _0x535d73=_0x249469,_0x15a5fb=_0xaa54b3['getAttribute']('data-section');if(!_0x3d5d86['includes'](_0x15a5fb)){showNotification(_0x535d73(0x1c9),_0x535d73(0x13b));return;}_0x3f6045['forEach'](_0x137462=>_0x137462['classList']['remove'](_0x535d73(0x25d))),_0xaa54b3['classList']['add']('active'),_0x2c96f8['forEach'](_0xfa5062=>{_0xfa5062['style']['display']='none';});const _0x24d780=document['getElementById'](_0x15a5fb);_0x24d780&&(_0x24d780[_0x535d73(0x2b9)]['display']='block',console['log']('Switched\x20to\x20'+_0x15a5fb+'\x20section'));});});const _0x3edf15=document[_0x1ff8e3(0x187)]('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x3d5d86[0x0]+'\x22]');_0x3edf15&&_0x3edf15[_0x1ff8e3(0x130)](),console['log'](_0x1ff8e3(0x15c));}function setupTabNavigation(){const _0x108c64=a4_0xeb46,_0x724d3f=document['querySelectorAll'](_0x108c64(0x126));let _0x1f19e2=null,_0x45408c=new Set();_0x724d3f['forEach'](_0x35bb03=>{_0x35bb03['addEventListener']('click',function(){const _0x3b67ec=a4_0xeb46,_0x2b2347=this['getAttribute']('data-section');if(_0x2b2347===_0x1f19e2)return;_0x1f19e2&&(document['getElementById'](_0x1f19e2)['style'][_0x3b67ec(0xa3)]='none',_0x724d3f['forEach'](_0x551f66=>_0x551f66[_0x3b67ec(0x16c)]['remove'](_0x3b67ec(0x25d)))),document['getElementById'](_0x2b2347)['style'][_0x3b67ec(0xa3)]='block',this[_0x3b67ec(0x16c)]['add'](_0x3b67ec(0x25d)),_0x1f19e2=_0x2b2347;});});}function loadSectionData(_0x25a688){return;}async function initializeAdminDashboard(){const _0x20d105=a4_0xeb46;try{const _0x4d5bbe=auth[_0x20d105(0xe0)],_0x139add=await getUserTabPermissions(_0x4d5bbe['email']);console[_0x20d105(0xd4)]('User\x20'+_0x4d5bbe['email']+'\x20allowed\x20tabs:',_0x139add),window['userAllowedTabs']=_0x139add,setupSidebarNavigation(_0x139add),setupLadderSelector(),setupDashboardSection(),_0x139add['includes']('manage-players')&&setupManagePlayersSection(),_0x139add['includes']('elo-history')&&setupEloHistorySection(),_0x139add['includes']('manage-ranks')&&setupRankControls(),_0x139add['includes']('manage-articles')&&setupManageArticlesSection(),_0x139add[_0x20d105(0x191)]('user-roles-section')&&setupUserRolesSection(),_0x139add['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x139add['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x139add[_0x20d105(0x191)]('inactive-players')&&setupInactivePlayersSection(),_0x139add['includes']('manage-matches')&&setupManageMatchesSection(),_0x139add['includes']('manage-points')&&setupManagePointsSection(),_0x139add['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x139add);}catch(_0x174dc4){console[_0x20d105(0x13b)]('Error\x20initializing\x20admin\x20dashboard:',_0x174dc4);}}function setupDataLoadButtons(_0x47a91f=[]){const _0x86739e=a4_0xeb46;(!_0x47a91f||_0x47a91f['length']===0x0)&&(_0x47a91f=['dashboard']);const _0x47b37c=document['getElementById']('load-dashboard-data');_0x47b37c&&_0x47b37c['addEventListener'](_0x86739e(0x130),function(){const _0x530bd7=_0x86739e;this['classList'][_0x530bd7(0x1a4)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()[_0x530bd7(0xef)](()=>{const _0x154923=_0x530bd7;this['classList'][_0x154923(0xdb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0x530bd7(0x120)](_0x110e8a=>{const _0x217586=_0x530bd7;console['error'](_0x217586(0x1c2),_0x110e8a),this['classList']['remove']('loading'),this['innerHTML']=_0x217586(0x182),setTimeout(()=>{const _0xad4a01=_0x217586;this['innerHTML']=_0xad4a01(0x1c8);},0xbb8);});});if(_0x47a91f[_0x86739e(0x191)](_0x86739e(0x190))){const _0x444b63=document['getElementById']('load-trophies-data');_0x444b63&&_0x444b63['addEventListener']('click',function(){const _0x3e1f1a=_0x86739e;console['log']('Load\x20trophies\x20data\x20clicked'),this[_0x3e1f1a(0x16c)][_0x3e1f1a(0x1a4)](_0x3e1f1a(0x20f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x3e1f1a(0xef)](()=>{const _0x3a607a=_0x3e1f1a;this['classList']['remove']('loading'),this[_0x3a607a(0x1bf)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0xaf6a2c=>{const _0x13458b=_0x3e1f1a;console[_0x13458b(0x13b)](_0x13458b(0x96),_0xaf6a2c),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x47a91f['includes'](_0x86739e(0x1d8))){const _0x40e7f8=document['getElementById'](_0x86739e(0x291));_0x40e7f8&&_0x40e7f8[_0x86739e(0x11c)](_0x86739e(0x130),function(){const _0x2bf48f=_0x86739e;console['log'](_0x2bf48f(0x18f)),this['classList']['add']('loading'),this['innerHTML']=_0x2bf48f(0x276),loadPlayersData()['then'](()=>{const _0x31c81c=_0x2bf48f;this[_0x31c81c(0x16c)]['remove'](_0x31c81c(0x20f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0xa70571=>{const _0x4471ff=_0x2bf48f;console['error'](_0x4471ff(0x127),_0xa70571),this[_0x4471ff(0x16c)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x11ae5d=_0x4471ff;this[_0x11ae5d(0x1bf)]=_0x11ae5d(0x26b);},0xbb8);});});}if(_0x47a91f['includes'](_0x86739e(0x14f))){const _0x300230=document['getElementById']('load-elo-history-data');_0x300230&&_0x300230['addEventListener'](_0x86739e(0x130),function(){const _0x2b581f=_0x86739e;console[_0x2b581f(0xd4)](_0x2b581f(0x156)),this['classList']['add']('loading'),this[_0x2b581f(0x1bf)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0x2c07b8=>{const _0x48efb6=_0x2b581f;console['error']('Error\x20loading\x20history:',_0x2c07b8),this['classList'][_0x48efb6(0xdb)](_0x48efb6(0x20f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x47a91f['includes']('manage-articles')){const _0x5ca5c0=document['getElementById'](_0x86739e(0x1f0));_0x5ca5c0&&_0x5ca5c0['addEventListener'](_0x86739e(0x130),function(){const _0x2965fa=_0x86739e;console['log']('Load\x20articles\x20data\x20clicked'),this['classList']['add'](_0x2965fa(0x20f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x2965fa(0xef)](()=>{const _0x95638d=_0x2965fa;this[_0x95638d(0x16c)][_0x95638d(0xdb)](_0x95638d(0x20f)),this['innerHTML']=_0x95638d(0x207);})[_0x2965fa(0x120)](_0x12e6f4=>{console['error']('Error\x20loading\x20articles:',_0x12e6f4),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x47a91f['includes']('user-roles-section')){const _0x5471d5=document['getElementById'](_0x86739e(0x167));_0x5471d5&&_0x5471d5[_0x86739e(0x11c)]('click',function(){const _0xc47d3a=_0x86739e;console['log'](_0xc47d3a(0x195)),this[_0xc47d3a(0x16c)][_0xc47d3a(0x1a4)](_0xc47d3a(0x20f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x4762fd=>{const _0x537e72=_0xc47d3a;console['error']('Error\x20loading\x20users:',_0x4762fd),this['classList']['remove']('loading'),this['innerHTML']=_0x537e72(0x182),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x47a91f['includes'](_0x86739e(0x1ad))){const _0x3b7d08=document['getElementById']('load-inactive-players-data');_0x3b7d08&&_0x3b7d08['addEventListener']('click',function(){const _0x25253e=_0x86739e;console[_0x25253e(0xd4)]('Load\x20inactive\x20players\x20data\x20clicked'),this[_0x25253e(0x16c)][_0x25253e(0x1a4)](_0x25253e(0x20f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x269b21=_0x25253e;this['classList'][_0x269b21(0xdb)]('loading'),this[_0x269b21(0x1bf)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x225c88=>{console['error']('Error\x20loading\x20inactive\x20players:',_0x225c88),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3527ac=a4_0xeb46;this['innerHTML']=_0x3527ac(0x288);},0xbb8);});});}if(_0x47a91f['includes']('manage-highlights')){const _0x22d6ac=document['getElementById'](_0x86739e(0x11b));_0x22d6ac&&_0x22d6ac[_0x86739e(0x11c)]('click',function(){const _0x28d0e2=_0x86739e;console[_0x28d0e2(0xd4)](_0x28d0e2(0x1d5)),this['classList'][_0x28d0e2(0x1a4)]('loading'),this['innerHTML']=_0x28d0e2(0x276),loadHighlightsAdmin()['then'](()=>{const _0x1e8e3c=_0x28d0e2;this[_0x1e8e3c(0x16c)]['remove']('loading'),this[_0x1e8e3c(0x1bf)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x5077b5=>{console['error']('Error\x20loading\x20highlights:',_0x5077b5),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x42f266=a4_0xeb46;this[_0x42f266(0x1bf)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x47a91f['includes']('manage-matches')){const _0x4bc7d3=document['getElementById']('load-matches-data');_0x4bc7d3&&_0x4bc7d3['addEventListener']('click',function(){const _0x54fb22=_0x86739e;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x54fb22(0x1bf)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x10f87b=_0x54fb22;this['classList']['remove']('loading'),this[_0x10f87b(0x1bf)]=_0x10f87b(0x237);})['catch'](_0x3749c6=>{const _0xede45e=_0x54fb22;console[_0xede45e(0x13b)](_0xede45e(0x21e),_0x3749c6),this['classList']['remove'](_0xede45e(0x20f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x371add=_0xede45e;this[_0x371add(0x1bf)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x47a91f['includes']('manage-ribbons')){const _0x1e425f=document['getElementById']('load-ribbons-data');_0x1e425f&&_0x1e425f['addEventListener'](_0x86739e(0x130),function(){const _0x2d7434=_0x86739e;console['log'](_0x2d7434(0xc2)),this[_0x2d7434(0x16c)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x2c2908=_0x2d7434;this['classList']['remove']('loading'),this[_0x2c2908(0x1bf)]=_0x2c2908(0x13e);})['catch'](_0x89d75e=>{const _0x1420a9=_0x2d7434;console['error'](_0x1420a9(0x202),_0x89d75e),this[_0x1420a9(0x16c)]['remove']('loading'),this[_0x1420a9(0x1bf)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x214119=_0x1420a9;this[_0x214119(0x1bf)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x406e3b=a4_0xeb46;document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x406e3b(0xe1))['textContent']='-',document['getElementById'](_0x406e3b(0x139))['textContent']='-';}function setupLadderSelector(){const _0x175176=a4_0xeb46,_0x4abb83=document['querySelectorAll']('.ladder-switch\x20input');_0x4abb83[_0x175176(0xe5)](_0x28e9c0=>{const _0x2290f3=_0x175176;_0x28e9c0['addEventListener'](_0x2290f3(0xbd),()=>{const _0x67f29c=_0x2290f3;currentLadder=_0x28e9c0['value'],document['body']['setAttribute']('data-ladder',currentLadder);const _0x1f8543=document['getElementById']('current-ladder-display');_0x1f8543&&(_0x1f8543['textContent']=currentLadder),document['getElementById']('player-count')[_0x67f29c(0xa0)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x67f29c(0xe1))['textContent']='-',document[_0x67f29c(0x2ab)](_0x67f29c(0x139))['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts[_0x67f29c(0x166)]&&(charts[_0x67f29c(0x166)][_0x67f29c(0xfc)](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.','info');});});const _0x11180d=document['getElementById']('current-ladder-display');_0x11180d&&(_0x11180d['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x35af6b=a4_0xeb46;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x35af6b(0x2ab)]('player-count')[_0x35af6b(0xa0)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x825f44=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x46bf62=currentLadder==='D1'?_0x35af6b(0x168):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x3b3724=currentLadder==='D1'?_0x35af6b(0x12b):currentLadder==='D2'?'pendingMatchesD2':_0x35af6b(0x18d),_0x46122f=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x35af6b(0x282):_0x35af6b(0x2b2);console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x825f44+',\x20'+_0x46bf62);const _0x7456e5=await getDocs(collection(db,_0x825f44)),_0x2958a2=_0x7456e5['size'],_0x2b10a5=await getDocs(collection(db,_0x46bf62)),_0x5eb2eb=_0x2b10a5['size'],_0x417a0e=await getDocs(collection(db,_0x3b3724)),_0xbbbc89=_0x417a0e[_0x35af6b(0xc4)],_0x449e18=await getDocs(collection(db,_0x46122f)),_0x339d5f=_0x449e18['size'];return document['getElementById']('player-count')[_0x35af6b(0xa0)]=_0x2958a2,document[_0x35af6b(0x2ab)]('match-count')[_0x35af6b(0xa0)]=_0x5eb2eb,document[_0x35af6b(0x2ab)]('pending-count')['textContent']=_0xbbbc89,document['getElementById']('rejected-count')['textContent']=_0x339d5f,await createRankDistributionChart(),await createActivityChart(),console[_0x35af6b(0xd4)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x1015b9){console[_0x35af6b(0x13b)]('Error\x20loading\x20dashboard\x20data:',_0x1015b9);throw _0x1015b9;}}async function createRankDistributionChart(){const _0xe5f713=a4_0xeb46;try{const _0x215031=collection(db,currentLadder==='D1'?'players':_0xe5f713(0x2a9)),_0x6ffeed=await getDocs(_0x215031),_0x452ad9={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x6ffeed['forEach'](_0x1225bc=>{const _0x261219=_0xe5f713,_0x25fc7d=_0x1225bc[_0x261219(0x1bd)](),_0x1ea15d=_0x25fc7d['eloRating']||0x4b0;if(_0x1ea15d>=0x7d0)_0x452ad9['Emerald']++;else{if(_0x1ea15d>=0x708)_0x452ad9['Gold']++;else{if(_0x1ea15d>=0x640)_0x452ad9[_0x261219(0x29f)]++;else{if(_0x1ea15d>=0x578)_0x452ad9['Bronze']++;else _0x452ad9['Unranked']++;}}}});const _0x2d73a1=document[_0xe5f713(0x2ab)]('rank-distribution-chart');charts['rankDistribution']&&charts['rankDistribution'][_0xe5f713(0xfc)](),charts['rankDistribution']=new Chart(_0x2d73a1,{'type':'doughnut','data':{'labels':Object[_0xe5f713(0xcf)](_0x452ad9),'datasets':[{'data':Object['values'](_0x452ad9),'backgroundColor':['#808080',_0xe5f713(0x1ea),'#C0C0C0','#FFD700',_0xe5f713(0x1cc)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0xe5f713(0x1a1)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x3b83d8){console[_0xe5f713(0x13b)]('Error\x20creating\x20rank\x20distribution\x20chart:',_0x3b83d8),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0xce6e9f=a4_0xeb46;try{const _0x131ba8=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x252fa5=collection(db,_0x131ba8),_0xbb874b=new Date();_0xbb874b[_0xce6e9f(0x1c0)](_0xbb874b['getDate']()-0x7);const _0x118fbc=query(_0x252fa5,where(_0xce6e9f(0x290),'>=',_0xbb874b),orderBy('approvedAt','asc')),_0x8d6e90=await getDocs(_0x118fbc),_0x614a47=['Sunday',_0xce6e9f(0x1b8),'Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x572780=_0x614a47['reduce']((_0x2df977,_0x49b0ec)=>({..._0x2df977,[_0x49b0ec]:0x0}),{});_0x8d6e90[_0xce6e9f(0xe5)](_0x269aac=>{const _0x692b2a=_0xce6e9f,_0x3cd6bf=_0x269aac['data']();if(_0x3cd6bf['approvedAt']){const _0x1e3d0d=_0x614a47[new Date(_0x3cd6bf[_0x692b2a(0x290)]['seconds']*0x3e8)[_0x692b2a(0x9d)]()];_0x572780[_0x1e3d0d]++;}});const _0x178683=document['getElementById']('activity-chart');charts['activity']&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x178683,{'type':'bar','data':{'labels':_0x614a47,'datasets':[{'label':_0xce6e9f(0x238),'data':_0x614a47['map'](_0x1c4b20=>_0x572780[_0x1c4b20]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0xce6e9f(0x1a1)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0xce6e9f(0x284),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x226df0){console[_0xce6e9f(0x13b)]('Error\x20creating\x20activity\x20chart:',_0x226df0),document['getElementById']('activity-chart')[_0xce6e9f(0x1bf)]=_0xce6e9f(0x27e);}}async function loadPlayersData(){const _0x6751f3=a4_0xeb46,_0x3db4c0=document[_0x6751f3(0x2ab)](_0x6751f3(0x1da));if(!_0x3db4c0)return;_0x3db4c0['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x4d9d1b='players';if(currentLadder==='D2')_0x4d9d1b=_0x6751f3(0x2a9);else currentLadder==='D3'&&(_0x4d9d1b='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x4d9d1b+_0x6751f3(0x140));const _0x3a374d=collection(db,_0x4d9d1b),_0x148708=query(_0x3a374d,orderBy('eloRating','desc')),_0x46829c=await getDocs(_0x148708);if(_0x46829c[_0x6751f3(0x23f)]){_0x3db4c0[_0x6751f3(0x1bf)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x3db4c0['innerHTML']='';let _0x45afd9=0x1;_0x46829c[_0x6751f3(0xe5)](_0x13e7e3=>{const _0x32044a=_0x6751f3,_0x398010=_0x13e7e3[_0x32044a(0x1bd)](),_0x14f129=getRankFromElo(_0x398010['eloRating']||0x4b0),_0x38298c=getRankStyle(_0x398010['eloRating']||0x4b0),_0x127b36=document['createElement']('tr');_0x127b36['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x45afd9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x38298c['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x398010[_0x32044a(0x2cf)]||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x398010[_0x32044a(0x12e)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x38298c['color']+_0x32044a(0x18a)+_0x14f129+_0x32044a(0x1b6)+(_0x398010['wins']||0x0)+'W\x20/\x20'+(_0x398010['losses']||0x0)+_0x32044a(0x135)+_0x13e7e3['id']+_0x32044a(0x143)+_0x13e7e3['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3db4c0['appendChild'](_0x127b36),_0x45afd9++;}),setupPlayerActionButtons();}catch(_0x4162b0){console['error']('Error\x20loading\x20players:',_0x4162b0),_0x3db4c0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x4162b0['message']+_0x6751f3(0x2b7);}}function getRankFromElo(_0x3fb029){if(_0x3fb029>=0x7d0)return'Emerald';if(_0x3fb029>=0x708)return'Gold';if(_0x3fb029>=0x640)return'Silver';if(_0x3fb029>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){document['querySelectorAll']('.edit-btn')['forEach'](_0x2b0904=>{_0x2b0904['addEventListener']('click',async _0xd41f61=>{const _0xe66d6c=_0xd41f61['currentTarget']['dataset']['id'];openEditPlayerModal(_0xe66d6c);});}),document['querySelectorAll']('.delete-btn')['forEach'](_0x31c0ab=>{const _0x2fba36=a4_0xeb46;_0x31c0ab[_0x2fba36(0x11c)](_0x2fba36(0x130),async _0x67c6e9=>{const _0x30cd8e=_0x2fba36,_0x51f4d5=_0x67c6e9[_0x30cd8e(0x123)]['dataset']['id'];confirmDeletePlayer(_0x51f4d5);});});}async function openEditPlayerModal(_0x15474f){const _0x2b7436=a4_0xeb46;try{const _0x4bbfa2=currentLadder==='D1'?_0x2b7436(0x281):'playersD2',_0x5065a5=doc(db,_0x4bbfa2,_0x15474f),_0x25dc70=await getDoc(_0x5065a5);if(!_0x25dc70['exists']()){showNotification(_0x2b7436(0xfe),_0x2b7436(0x13b));return;}const _0x50048f=_0x25dc70['data'](),_0x5ca4b4=document[_0x2b7436(0x2ab)]('edit-player-modal'),_0x18fb60=document['getElementById'](_0x2b7436(0x1f8)),_0x1072f4=document[_0x2b7436(0x2ab)]('edit-elo'),_0x36db64=document[_0x2b7436(0x2ab)]('edit-wins'),_0x22c8c0=document['getElementById'](_0x2b7436(0x136));_0x18fb60[_0x2b7436(0x29a)]=_0x50048f['username']||'',_0x1072f4['value']=_0x50048f[_0x2b7436(0x12e)]||0x4b0,_0x36db64[_0x2b7436(0x29a)]=_0x50048f['wins']||0x0,_0x22c8c0['value']=_0x50048f['losses']||0x0,_0x5ca4b4['dataset'][_0x2b7436(0x212)]=_0x15474f,_0x5ca4b4['classList']['add']('active');}catch(_0x4049b5){console['error']('Error\x20opening\x20edit\x20modal:',_0x4049b5),showNotification('Failed\x20to\x20load\x20player\x20data',_0x2b7436(0x13b));}}async function saveEditedPlayer(){const _0x4d3fa3=a4_0xeb46;try{const _0x83a8c2=document['getElementById']('edit-player-modal'),_0x1b2e89=_0x83a8c2['dataset']['playerId'];if(!_0x1b2e89){showNotification('No\x20player\x20selected','error');return;}const _0x4fa125=document['getElementById']('edit-username'),_0x4841f8=document['getElementById']('edit-elo'),_0x2285f0=document['getElementById'](_0x4d3fa3(0x1a2)),_0x96f48e=document['getElementById'](_0x4d3fa3(0x136)),_0x4c609f=_0x4fa125['value'][_0x4d3fa3(0xee)](),_0x42ebb7=parseInt(_0x4841f8['value']),_0x3a56bb=parseInt(_0x2285f0['value']),_0x1cc642=parseInt(_0x96f48e['value']);if(!_0x4c609f||isNaN(_0x42ebb7)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x4d3fa3(0x13b));return;}const _0x322206=currentLadder==='D1'?'players':_0x4d3fa3(0x2a9),_0x4aae8a=doc(db,_0x322206,_0x1b2e89),_0x5ca644=await getDoc(_0x4aae8a),_0x5f3dc5=_0x5ca644['exists']()?_0x5ca644['data']():{},_0x5ae405=_0x5f3dc5[_0x4d3fa3(0x12e)]||0x4b0;await updateDoc(_0x4aae8a,{'username':_0x4c609f,'eloRating':_0x42ebb7,'wins':_0x3a56bb||0x0,'losses':_0x1cc642||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x4d3fa3(0xe0)]['email']});if(_0x42ebb7!==_0x5ae405){const _0xa8fc64=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0xa8fc64),{'player':_0x4c609f,'previousElo':_0x5ae405,'newElo':_0x42ebb7,'timestamp':serverTimestamp(),'type':_0x4d3fa3(0x251),'modifiedBy':auth['currentUser'][_0x4d3fa3(0x2c3)],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x4a7ee2){console[_0x4d3fa3(0x13b)]('Error\x20updating\x20player:',_0x4a7ee2),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x4a7ee2['message'],'error');}}function closeEditPlayerModal(){const _0x24905c=a4_0xeb46,_0x180f56=document[_0x24905c(0x2ab)](_0x24905c(0x228));_0x180f56[_0x24905c(0x16c)]['remove']('active'),_0x180f56['dataset']['playerId']='';}async function confirmDeletePlayer(_0x4c6fcc){const _0x19c39=a4_0xeb46;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x3e21a1=currentLadder==='D1'?_0x19c39(0x281):'playersD2';await deleteDoc(doc(db,_0x3e21a1,_0x4c6fcc)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully',_0x19c39(0x2a4));}catch(_0x58c101){console['error']('Error\x20deleting\x20player:',_0x58c101),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x58c101['message'],'error');}}async function setupManagePlayersSection(){const _0x91dd1b=a4_0xeb46,_0x3a44b8=document['getElementById']('add-player-form');_0x3a44b8&&_0x3a44b8[_0x91dd1b(0x11c)](_0x91dd1b(0x13c),async _0x2b51ec=>{_0x2b51ec['preventDefault'](),await addNewPlayer();});const _0x1eb8ea=document[_0x91dd1b(0x2ab)](_0x91dd1b(0x132));_0x1eb8ea&&_0x1eb8ea['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x4e5564=document['getElementById']('save-player-btn');_0x4e5564&&_0x4e5564[_0x91dd1b(0x11c)](_0x91dd1b(0x130),saveEditedPlayer);const _0x5622ae=document['getElementById']('cancel-edit-btn');_0x5622ae&&_0x5622ae['addEventListener']('click',closeEditPlayerModal);const _0x41d669=document['getElementById']('edit-player-modal');_0x41d669&&_0x41d669['addEventListener']('click',_0xf477c0=>{_0xf477c0['target']===_0x41d669&&closeEditPlayerModal();});const _0x35e342=document['getElementById']('players-ladder-selector');_0x35e342&&_0x35e342['addEventListener']('change',()=>{const _0x1297a7=_0x91dd1b;currentLadder=_0x35e342[_0x1297a7(0x29a)],loadPlayersData();});}async function addNewPlayer(){const _0x556d26=a4_0xeb46;try{const _0x2b8cd9=document['getElementById']('new-player-username'),_0x27de34=document['getElementById']('new-player-elo'),_0x110a41=_0x2b8cd9['value'][_0x556d26(0xee)](),_0x38febf=parseInt(_0x27de34['value'])||0x4b0;if(!_0x110a41){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x110a41+'\x20with\x20ELO\x20'+_0x38febf+'\x20to\x20'+currentLadder+'\x20ladder');let _0x1031db='players',_0x169892='eloHistory';if(currentLadder==='D2')_0x1031db=_0x556d26(0x2a9),_0x169892=_0x556d26(0x108);else currentLadder==='D3'&&(_0x1031db='playersD3',_0x169892='eloHistoryD3');const _0x50cba6=query(collection(db,_0x1031db),where('username','==',_0x110a41)),_0x2bb848=await getDocs(_0x50cba6);if(!_0x2bb848['empty']){alert('Username\x20'+_0x110a41+_0x556d26(0x18b)+currentLadder+'\x20ladder');return;}const _0x1acd14=auth[_0x556d26(0xe0)],_0x352186={'username':_0x110a41,'eloRating':_0x38febf,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x1acd14?_0x1acd14['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x1031db),_0x352186),await addDoc(collection(db,_0x169892),{'player':_0x110a41,'previousElo':0x4b0,'newElo':_0x38febf,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x1acd14?_0x1acd14['email']:'admin','gameMode':currentLadder}),_0x2b8cd9['value']='',_0x27de34['value']='1200',alert('Player\x20'+_0x110a41+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x556d26(0x27a)),loadPlayersData();}catch(_0x1a9843){console['error']('Error\x20adding\x20player:',_0x1a9843),alert(_0x556d26(0x275)+_0x1a9843[_0x556d26(0x160)]);}}document[a4_0x5688ea(0x11c)]('DOMContentLoaded',()=>{const _0x3b18d9=a4_0x5688ea,_0x5d8472=document[_0x3b18d9(0x2ab)]('add-player-form');_0x5d8472&&_0x5d8472[_0x3b18d9(0x11c)](_0x3b18d9(0x13c),_0x479b12=>{_0x479b12['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x3971f0=a4_0x5688ea,_0x48418f=document['getElementById']('player-search')['value']['toLowerCase'](),_0x2d64e8=document['querySelectorAll'](_0x3971f0(0x12f));let _0x2ea64d=0x0;_0x2d64e8['forEach'](_0x247ede=>{const _0x4b1aa7=_0x3971f0,_0x31c4a9=_0x247ede['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x31c4a9[_0x4b1aa7(0x191)](_0x48418f)?(_0x247ede['style']['display']='',_0x2ea64d++):_0x247ede['style']['display']=_0x4b1aa7(0x10f);});const _0x350ae7=document['getElementById']('no-results-message');_0x350ae7&&(_0x2ea64d===0x0&&_0x48418f!==''?_0x350ae7['style'][_0x3971f0(0xa3)]='block':_0x350ae7['style']['display']='none');}function debounce(_0x1fb0f7,_0x25f20c){let _0x52dfca;return function(..._0x58b9b9){clearTimeout(_0x52dfca),_0x52dfca=setTimeout(()=>_0x1fb0f7['apply'](this,_0x58b9b9),_0x25f20c);};}async function loadEloHistory(_0x353be2=0x1){const _0x624e11=a4_0x5688ea,_0x55ae53=document['getElementById']('elo-history-table-body'),_0x202483=currentLadder['toLowerCase']();if(!_0x55ae53)return;_0x55ae53['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x4e9cbe=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x354be8=collection(db,_0x4e9cbe);let _0x2edcc8;if(_0x353be2>eloHistoryPagination[_0x202483][_0x624e11(0xf5)]&&eloHistoryPagination[_0x202483][_0x624e11(0xbe)])_0x2edcc8=query(_0x354be8,orderBy('timestamp',_0x624e11(0x141)),startAfter(eloHistoryPagination[_0x202483]['lastVisible']),limit(PAGE_SIZE));else _0x353be2<eloHistoryPagination[_0x202483]['page']&&eloHistoryPagination[_0x202483]['firstVisible']?_0x2edcc8=query(_0x354be8,orderBy('timestamp','desc'),endBefore(eloHistoryPagination[_0x202483]['firstVisible']),limitToLast(PAGE_SIZE)):_0x2edcc8=query(_0x354be8,orderBy('timestamp','desc'),limit(PAGE_SIZE));const _0x40e5de=await getDocs(_0x2edcc8);if(_0x40e5de['empty']){_0x55ae53['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x202483+_0x624e11(0x20a))['textContent']='Page\x201';return;}eloHistoryPagination[_0x202483]['page']=_0x353be2,eloHistoryPagination[_0x202483]['firstVisible']=_0x40e5de['docs'][0x0],eloHistoryPagination[_0x202483]['lastVisible']=_0x40e5de['docs'][_0x40e5de['docs']['length']-0x1];const _0x520ef4=new Map();_0x55ae53['innerHTML']='';const _0x3bacaf=async _0x4f8533=>{const _0x21b9d7=_0x624e11;if(typeof _0x4f8533!=='string'||_0x4f8533[_0x21b9d7(0x20d)]<0x14||/[^a-zA-Z0-9-_]/[_0x21b9d7(0x2c7)](_0x4f8533))return _0x4f8533;if(_0x520ef4['has'](_0x4f8533))return _0x520ef4['get'](_0x4f8533);try{for(const _0x3462d4 of[_0x21b9d7(0x281),'playersD2','playersD3','nonParticipants']){const _0x2eaedc=await getDoc(doc(db,_0x3462d4,_0x4f8533));if(_0x2eaedc[_0x21b9d7(0x23d)]()&&_0x2eaedc[_0x21b9d7(0x1bd)]()['username']){const _0x235240=_0x2eaedc[_0x21b9d7(0x1bd)]()[_0x21b9d7(0x2cf)];return _0x520ef4['set'](_0x4f8533,_0x235240),_0x235240;}}return _0x4f8533;}catch(_0x15f44a){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x4f8533+':',_0x15f44a),_0x4f8533;}};for(const _0x456aca of _0x40e5de[_0x624e11(0x133)]){const _0x5f55c6=_0x456aca['data'](),_0x16dc8e=document[_0x624e11(0x180)]('tr'),_0x2a0b81=_0x5f55c6['timestamp']?new Date(_0x5f55c6['timestamp']['seconds']*0x3e8)[_0x624e11(0x1aa)]():'N/A',_0x447662=_0x5f55c6['newElo']-_0x5f55c6[_0x624e11(0x2a6)],_0x4237b0=_0x447662>0x0?'positive-change':_0x447662<0x0?'negative-change':'',_0x9a29e4=_0x447662>0x0?'+':'',_0xe0198e=_0x5f55c6['player']||_0x5f55c6['username']||_0x5f55c6[_0x624e11(0x223)]||'N/A',_0x49d1d7=await _0x3bacaf(_0xe0198e);_0x16dc8e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x2a0b81+_0x624e11(0x2af)+_0x49d1d7+_0x624e11(0x9f)+(_0x5f55c6[_0x624e11(0x2a6)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x5f55c6['newElo']||'N/A')+_0x624e11(0x205)+_0x4237b0+'\x22>'+_0x9a29e4+_0x447662+_0x624e11(0xbc)+formatHistoryType(_0x5f55c6['type'])+_0x624e11(0x17e)+(_0x5f55c6['modifiedBy']||_0x5f55c6['promotedBy']||_0x5f55c6['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x55ae53[_0x624e11(0x210)](_0x16dc8e);}document['getElementById'](_0x202483+'-page-indicator')[_0x624e11(0xa0)]=_0x624e11(0x268)+_0x353be2;const _0x1ce2d6=document['getElementById'](_0x202483+'-prev-page'),_0x1a49b1=document[_0x624e11(0x2ab)](_0x202483+_0x624e11(0x2d0));if(_0x1ce2d6)_0x1ce2d6['disabled']=_0x353be2<=0x1;const _0xf133fc=query(_0x354be8,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x202483][_0x624e11(0xbe)]),limit(0x1)),_0x54d0ed=await getDocs(_0xf133fc);if(_0x1a49b1)_0x1a49b1['disabled']=_0x54d0ed[_0x624e11(0x23f)];}catch(_0x3fc73f){console['error']('Error\x20loading\x20ELO\x20history:',_0x3fc73f),_0x55ae53[_0x624e11(0x1bf)]=_0x624e11(0x152)+_0x3fc73f['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x3f9bcd){const _0x3300c2=a4_0x5688ea;switch(_0x3f9bcd){case'match_result':return'Match\x20Result';case _0x3300c2(0x14d):return'Promotion';case'demotion':return _0x3300c2(0x233);case'admin_modification':return'Admin\x20Adjustment';case _0x3300c2(0x15d):return'Initial\x20Placement';default:return _0x3f9bcd||'Unknown';}}function setupEloHistorySection(){const _0x5ea2ba=a4_0x5688ea;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0x5ea2ba(0x154))[_0x5ea2ba(0x11c)](_0x5ea2ba(0x130),()=>{const _0x1f78bb=_0x5ea2ba;loadEloHistory(eloHistoryPagination['d1'][_0x1f78bb(0xf5)]+0x1);}),document[_0x5ea2ba(0x2ab)](_0x5ea2ba(0x145))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x5ea2ba(0x2ab)](_0x5ea2ba(0x103))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x3b353d=document['getElementById']('d3-prev-page'),_0x4e2351=document['getElementById']('d3-next-page');_0x3b353d&&_0x3b353d['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x4e2351&&_0x4e2351['addEventListener']('click',()=>{const _0x273c52=_0x5ea2ba;loadEloHistory(eloHistoryPagination['d3'][_0x273c52(0xf5)]+0x1);});const _0x1a7878=document['getElementById']('elo-history-search');_0x1a7878&&_0x1a7878['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x5198b7=document['getElementById']('history-type-filter');_0x5198b7&&_0x5198b7['addEventListener']('change',applyEloHistoryFilters);const _0x2269ad=document[_0x5ea2ba(0x2ab)]('reset-history-filters');_0x2269ad&&_0x2269ad[_0x5ea2ba(0x11c)](_0x5ea2ba(0x130),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x1fba24=a4_0x5688ea,_0x4bc835=document['getElementById']('elo-history-search')[_0x1fba24(0x29a)][_0x1fba24(0x17b)](),_0x103e26=document[_0x1fba24(0x26c)](_0x1fba24(0x151));let _0x19af57=0x0;_0x103e26[_0x1fba24(0xe5)](_0x496e1f=>{const _0x17196d=_0x1fba24;if(_0x496e1f['classList']['contains'](_0x17196d(0xa2))||_0x496e1f[_0x17196d(0x16c)]['contains']('empty-state')||_0x496e1f['classList']['contains']('error-state'))return;const _0x4f9477=_0x496e1f['querySelector'](_0x17196d(0x1e1))?.['textContent']['toLowerCase']()||'',_0x31cce9=_0x496e1f[_0x17196d(0x187)]('.type')?.[_0x17196d(0xa0)]['toLowerCase']()||'',_0x182c22=_0x496e1f['querySelector']('.admin-action')?.['textContent'][_0x17196d(0x17b)]()||'';_0x4f9477['includes'](_0x4bc835)||_0x31cce9[_0x17196d(0x191)](_0x4bc835)||_0x182c22[_0x17196d(0x191)](_0x4bc835)?(_0x496e1f[_0x17196d(0x2b9)]['display']='',_0x19af57++):_0x496e1f['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x17146=a4_0x5688ea,_0x3fa666=document['getElementById']('history-start-date')['value'],_0x47d81f=document['getElementById'](_0x17146(0x19c))['value'],_0x202f8c=document[_0x17146(0x2ab)]('history-type-filter')['value'],_0x3dc1a0=currentLadder['toLowerCase']();eloHistoryPagination[_0x3dc1a0]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x465304=document['getElementById']('elo-history-table-body');_0x465304['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x3f98eb=currentLadder==='D1'?'eloHistory':'eloHistoryD2',_0x53e93b=collection(db,_0x3f98eb);let _0x4e04f5=[orderBy(_0x17146(0x1ef),'desc')];if(_0x3fa666){const _0xbfb307=new Date(_0x3fa666);_0xbfb307['setHours'](0x0,0x0,0x0,0x0),_0x4e04f5['push'](where('timestamp','>=',_0xbfb307));}if(_0x47d81f){const _0x1b4900=new Date(_0x47d81f);_0x1b4900['setHours'](0x17,0x3b,0x3b,0x3e7),_0x4e04f5['push'](where('timestamp','<=',_0x1b4900));}_0x202f8c&&_0x202f8c!=='all'&&_0x4e04f5['push'](where('type','==',_0x202f8c));_0x4e04f5[_0x17146(0x298)](limit(PAGE_SIZE));const _0x357b73=query(_0x53e93b,..._0x4e04f5),_0x1af9c4=await getDocs(_0x357b73);!_0x1af9c4['empty']&&(eloHistoryPagination[_0x3dc1a0][_0x17146(0x113)]=_0x1af9c4['docs'][0x0],eloHistoryPagination[_0x3dc1a0][_0x17146(0xbe)]=_0x1af9c4['docs'][_0x1af9c4[_0x17146(0x133)]['length']-0x1]);_0x465304[_0x17146(0x1bf)]='';if(_0x1af9c4[_0x17146(0x23f)]){_0x465304['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x1af9c4['forEach'](_0x44561c=>{const _0xc38f29=_0x17146,_0x47c27b=_0x44561c['data'](),_0x1ab287=document['createElement']('tr'),_0x1c2c05=_0x47c27b['timestamp']?new Date(_0x47c27b[_0xc38f29(0x1ef)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0x2461ef=_0x47c27b['newElo']-_0x47c27b[_0xc38f29(0x2a6)],_0x4e20a0=_0x2461ef>0x0?'positive-change':_0x2461ef<0x0?'negative-change':'',_0x43e842=_0x2461ef>0x0?'+':'',_0x11a387=_0x47c27b['player']||_0x47c27b['username']||_0x47c27b[_0xc38f29(0x223)]||'N/A';_0x1ab287['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x1c2c05+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x11a387+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x47c27b['previousElo']||_0xc38f29(0x245))+_0xc38f29(0xbf)+(_0x47c27b['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4e20a0+'\x22>'+_0x43e842+_0x2461ef+_0xc38f29(0xbc)+formatHistoryType(_0x47c27b['type'])+_0xc38f29(0x17e)+(_0x47c27b['modifiedBy']||_0x47c27b['promotedBy']||_0x47c27b['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x465304['appendChild'](_0x1ab287);}),document[_0x17146(0x2ab)](_0x3dc1a0+'-page-indicator')['textContent']='Page\x201';}catch(_0x293b51){console['error']('Error\x20applying\x20filters:',_0x293b51),_0x465304[_0x17146(0x1bf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x293b51['message']+_0x17146(0x2b7);}}function resetEloHistoryFilters(){const _0xd18d52=a4_0x5688ea;document['getElementById']('history-start-date')['value']='',document['getElementById']('history-end-date')['value']='',document['getElementById']('history-type-filter')[_0xd18d52(0x29a)]='all',document[_0xd18d52(0x2ab)](_0xd18d52(0x296))['value']='';const _0x2b17a9=currentLadder[_0xd18d52(0x17b)]();eloHistoryPagination[_0x2b17a9]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x1d089d=a4_0x5688ea,_0x2e1258=document['getElementById']('promote-player-btn'),_0x16088a=document['getElementById']('promote-modal'),_0x20a986=document[_0x1d089d(0x2ab)]('promote-form');_0x2e1258&&_0x16088a&&_0x20a986&&(_0x2e1258['addEventListener']('click',()=>{_0x16088a['classList']['add']('active');}),_0x16088a['addEventListener'](_0x1d089d(0x130),_0x13a2d7=>{const _0x5e1ae9=_0x1d089d;_0x13a2d7['target']===_0x16088a&&_0x16088a[_0x5e1ae9(0x16c)][_0x5e1ae9(0xdb)]('active');}),_0x20a986['addEventListener'](_0x1d089d(0x13c),async _0x27665b=>{const _0x3b89fb=_0x1d089d;_0x27665b['preventDefault']();const _0x5c9a3c=document[_0x3b89fb(0x2ab)](_0x3b89fb(0x2b8)),_0x5c4128=document['getElementById']('promote-ladder'),_0x1e8d2a=_0x5c9a3c[_0x3b89fb(0x29a)][_0x3b89fb(0xee)](),_0x55b2fa=_0x5c4128['value'];if(!_0x1e8d2a){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x1e8d2a,_0x55b2fa),_0x16088a['classList'][_0x3b89fb(0xdb)](_0x3b89fb(0x25d)),_0x5c9a3c['value']='';}catch(_0x5b5eeb){showNotification(_0x5b5eeb['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener'](_0x1d089d(0x130),()=>{const _0x21760d=_0x1d089d;_0x16088a[_0x21760d(0x16c)][_0x21760d(0xdb)]('active');}));const _0x43fe2f=document['getElementById'](_0x1d089d(0x23e)),_0x1da604=document[_0x1d089d(0x2ab)]('demote-modal'),_0x3db84b=document[_0x1d089d(0x2ab)]('demote-form');_0x43fe2f&&_0x1da604&&_0x3db84b&&(_0x43fe2f['addEventListener'](_0x1d089d(0x130),()=>{_0x1da604['classList']['add']('active');}),_0x1da604['addEventListener']('click',_0x559109=>{_0x559109['target']===_0x1da604&&_0x1da604['classList']['remove']('active');}),_0x3db84b['addEventListener']('submit',async _0x2f33e3=>{const _0x4edc14=_0x1d089d;_0x2f33e3['preventDefault']();const _0x35201e=document['getElementById']('demote-username'),_0x50efa9=document['getElementById']('demote-ladder'),_0x478dd8=_0x35201e['value']['trim'](),_0x1a34cf=_0x50efa9['value'];if(!_0x478dd8){alert(_0x4edc14(0x1ca));return;}try{await demotePlayer(_0x478dd8,_0x1a34cf),document['getElementById']('demote-modal')[_0x4edc14(0x16c)]['remove']('active'),document['getElementById']('demote-username')['value']='';}catch(_0x795f47){console['error']('Error\x20in\x20demotion:',_0x795f47);}}));const _0x42df7e=document[_0x1d089d(0x2ab)]('set-elo-btn'),_0x655e21=document['getElementById']('set-elo-modal'),_0x37ac8b=document['getElementById'](_0x1d089d(0x1f3));_0x42df7e&&_0x655e21&&_0x37ac8b&&(_0x42df7e['addEventListener'](_0x1d089d(0x130),()=>{const _0x41b752=_0x1d089d;_0x655e21[_0x41b752(0x16c)]['add'](_0x41b752(0x25d));}),_0x655e21['addEventListener'](_0x1d089d(0x130),_0x4896ec=>{const _0x3e98b9=_0x1d089d;_0x4896ec['target']===_0x655e21&&_0x655e21[_0x3e98b9(0x16c)]['remove']('active');}),_0x37ac8b[_0x1d089d(0x11c)](_0x1d089d(0x13c),async _0x426ce1=>{const _0x40e12e=_0x1d089d;_0x426ce1['preventDefault']();const _0x75c48d=document['getElementById'](_0x40e12e(0x2d1)),_0x47bf54=document[_0x40e12e(0x2ab)](_0x40e12e(0x253));let _0x251ae0;const _0x53790a=document[_0x40e12e(0x2ab)](_0x40e12e(0xf0)),_0x22d235=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x53790a)_0x251ae0=_0x53790a[_0x40e12e(0x29a)];else _0x22d235?_0x251ae0=_0x22d235[_0x40e12e(0x29a)]:_0x251ae0='D1';if(!_0x75c48d||!_0x47bf54){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x586546=_0x75c48d['value']['trim'](),_0x1a7537=parseInt(_0x47bf54['value']);if(!_0x586546||isNaN(_0x1a7537)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x586546,_0x1a7537,_0x251ae0),_0x655e21['classList']['remove']('active'),_0x75c48d['value']='',_0x47bf54['value']='';}catch(_0x5cde76){showNotification(_0x5cde76['message'],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener'](_0x1d089d(0x130),()=>{_0x655e21['classList']['remove']('active');}));const _0x57b665=document['getElementById']('set-role-modal'),_0x572a30=document['getElementById']('set-role-form');if(_0x57b665&&_0x572a30){_0x57b665[_0x1d089d(0x11c)]('click',_0x5591a8=>{const _0x20c013=_0x1d089d;_0x5591a8[_0x20c013(0x155)]===_0x57b665&&closeModalHandler();}),_0x572a30['addEventListener']('submit',async _0x20f799=>{const _0x32490f=_0x1d089d;_0x20f799['preventDefault']();const _0x175c98=document['getElementById']('role-username'),_0x48dcce=document['getElementById']('role-name'),_0x464e5b=document['getElementById'](_0x32490f(0x146)),_0x11914a=_0x175c98['value'][_0x32490f(0xee)](),_0x153b5b=_0x48dcce['value']['trim'](),_0x46a34b=_0x464e5b['value'];if(!_0x11914a){showNotification('Username\x20is\x20missing',_0x32490f(0x13b));return;}try{await setUserRole(_0x11914a,_0x153b5b,_0x46a34b),closeModalHandler(),loadUsersWithRoles();}catch(_0x271fbe){}});const _0x278047=document[_0x1d089d(0x2ab)]('cancel-role-btn');_0x278047&&(_0x278047[_0x1d089d(0x2b0)]('click',closeModalHandler),_0x278047['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x46488f,_0x4216ad){const _0x3e64e4=a4_0x5688ea;try{console['log']('Attempting\x20to\x20promote\x20'+_0x46488f+'\x20in\x20'+_0x4216ad+'\x20ladder');const _0x1af1f1=auth['currentUser'];if(!_0x1af1f1)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x39b318=_0x4216ad==='D2'?'playersD2':'players',_0x2c7a3e=_0x4216ad==='D2'?'eloHistoryD2':'eloHistory';console[_0x3e64e4(0xd4)]('Searching\x20for\x20player\x20in\x20'+_0x39b318);const _0x254ea7=collection(db,_0x39b318),_0x2bf827=query(_0x254ea7,where(_0x3e64e4(0x2cf),'==',_0x46488f)),_0x18484d=await getDocs(_0x2bf827);if(_0x18484d['empty']){alert(_0x3e64e4(0x1dd)+_0x4216ad+_0x3e64e4(0x2c4));throw new Error('Player\x20not\x20found\x20in\x20'+_0x4216ad+'\x20ladder');}const _0x477eeb=_0x18484d[_0x3e64e4(0x133)][0x0],_0x477584=_0x477eeb['data'](),_0x22739f=_0x477584[_0x3e64e4(0x12e)]||0x4b0,_0xd88fbf=_0x477eeb['id'];console[_0x3e64e4(0xd4)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x22739f);const _0x3d0197=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x54553b=_0x3d0197['find'](_0x4e5247=>_0x4e5247['elo']>_0x22739f);if(!_0x54553b){alert(_0x3e64e4(0x1c6)+_0x4216ad+'\x20ladder');throw new Error(_0x3e64e4(0x1c6)+_0x4216ad+_0x3e64e4(0x2c4));}console[_0x3e64e4(0xd4)](_0x3e64e4(0x2c1)+_0x54553b['name']+'\x20('+_0x54553b['elo']+')'),await updateDoc(doc(db,_0x39b318,_0x477eeb['id']),{'eloRating':_0x54553b['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x1af1f1['email']||'admin'}),await addDoc(collection(db,_0x2c7a3e),{'player':_0x46488f,'previousElo':_0x22739f,'newElo':_0x54553b['elo'],'timestamp':serverTimestamp(),'type':_0x3e64e4(0x14d),'rankAchieved':_0x54553b[_0x3e64e4(0x147)],'promotedBy':_0x1af1f1[_0x3e64e4(0x2c3)]||'admin','gameMode':_0x4216ad});try{const {promotionManager:_0x52ace6}=await import('./promotions.js'),_0x147333=_0x52ace6['getRankName'](_0x22739f),_0x31bb41=_0x54553b['name'];await _0x52ace6[_0x3e64e4(0x294)](_0xd88fbf,_0x46488f,_0x22739f,_0x54553b[_0x3e64e4(0x16e)],_0x147333,_0x31bb41,_0x3e64e4(0x14d),{'displayName':_0x46488f,'source':_0x3e64e4(0x14c),'adminUser':_0x1af1f1['email'],'ladder':_0x4216ad}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x3e19b2){console[_0x3e64e4(0x13b)](_0x3e64e4(0x271),_0x3e19b2);}return alert('Successfully\x20promoted\x20'+_0x46488f+'\x20to\x20'+_0x54553b['name']+'\x20('+_0x54553b[_0x3e64e4(0x16e)]+')'),currentLadder===_0x4216ad&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x310077){console['error'](_0x3e64e4(0x2ba),_0x310077),alert('Error\x20promoting\x20player:\x20'+_0x310077['message']);throw _0x310077;}}document['addEventListener'](a4_0x5688ea(0x179),()=>{const _0x5d3abf=document['getElementById']('promote-form');_0x5d3abf&&_0x5d3abf['addEventListener']('submit',async _0x327b95=>{const _0x264567=a4_0xeb46;_0x327b95['preventDefault']();const _0x482f3e=document[_0x264567(0x2ab)]('promote-username')[_0x264567(0x29a)]['trim'](),_0x2f03b9=document[_0x264567(0x187)]('input[name=\x22promote-ladder\x22]:checked')[_0x264567(0x29a)];if(!_0x482f3e){alert(_0x264567(0x1ca));return;}try{await promotePlayer(_0x482f3e,_0x2f03b9),document['getElementById'](_0x264567(0x17a))[_0x264567(0x16c)]['remove'](_0x264567(0x25d)),document['getElementById']('promote-username')['value']='';}catch(_0x1224ff){console[_0x264567(0x13b)]('Error\x20in\x20promotion:',_0x1224ff);}});});function a4_0x289a(){const _0x29fee7=['Error\x20loading\x20trophies:','getComputedStyle','.close-btn','disabled','#ffffff','highlight-submitted-by','Error\x20deleting\x20article:','getDay','Trophy\x20definition\x20deleted\x20successfully','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','textContent','\x20not\x20found.','loading-cell','display','0.6','\x20<span\x20class=\x22user-source\x22>(','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','toDate','reset','View\x20history\x20clicked\x20for\x20user:','Username\x20input\x20set\x20to:\x20','delete-match-confirm-modal','ribbon-item','\x20users...','Collection\x20reference\x20created:','</td></tr>','Edit\x20match\x20clicked:','trophy-id','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','edit-highlight-winnerScore-input','quick-add','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','Unknown\x20Player','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20initializing\x20dashboard:','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','.edit-role-btn','matchDate','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','change','lastVisible','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','highlight-type','assign-trophy-id','Load\x20ribbons\x20data\x20clicked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','size','Highlight\x20not\x20found','matches-table-body','edit-highlight-loserScore-input','newElo','</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22','edit-match-winner-score','highlight-map-creator-container','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','ribbon','keys','Error\x20deleting\x20match:','Article\x20not\x20found','Manage\x20Points\x20section\x20initialized','set','log','loserUsername','roleAssignedBy','article-author','Error\x20deleting\x20highlight:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','15px','remove','cancel-article-btn','demotion','quick-edit-points-modal','\x20vs\x20','currentUser','pending-count','Error\x20loading\x20match\x20data:','action','Found\x20','forEach','sources','matches-end-date','submittedBy','points','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','),\x20','preventDefault','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','trim','then','set-elo-ladder','Edit\x20Trophy','createdAt','Modal\x20cancel\x20button\x20clicked','playerRibbonsD3','page','winnerUsername','winnerName','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','destroy','Deleting\x20match...','Player\x20not\x20found','allUsersPoints','Query\x20executed.\x20Empty:','highlight-map','.view-player-btn','d2-next-page','achievementDetails','ELO\x20rating\x20for\x20','dataset','set-role-modal','eloHistoryD2','highlight-match-date-container','Searching\x20for\x20player\x20in\x20','highlight-map-version','cancel-highlight-btn','trophy-preview-img','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','none','input[name=\x22quick-action\x22]:checked','data-match-id','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','firstVisible','Error\x20loading\x20ribbons\x20data','\x20from\x20','quick-edit-current-points','roleColor','Match\x20deleted\x20successfully','Please\x20enter\x20valid\x20data','assign-trophy-name','load-highlights-data','addEventListener','className','openResimulateModal\x20called!','manage-matches','catch','trophy-form','warning','currentTarget','setAttribute','Untitled','.nav-item','Error\x20loading\x20players:',').\x20','highlight-description','.view-history-btn','pendingMatches','lastMatch','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','eloRating','#players-table-body\x20tr','click','opponent','player-search','docs','cloneNode','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','edit-losses','create-test-match-form','creator','rejected-count','Unknown\x20User','error','submit','bind','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','\x20collection...','desc','matches-next-page','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','Points\x20data\x20loaded\x20successfully','d2-prev-page','role-color','name','matches-start-date','playersD3','highlights','assign-trophy-form','admin','promotion','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...','elo-history','Error\x20loading\x20points\x20overview:','#elo-history-table-body\x20tr','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','d1-next-page','target','Load\x20history\x20data\x20clicked','\x20points','approvedMatchesD2','Attempting\x20to\x20demote\x20','Failed\x20to\x20delete\x20match:\x20','Looking\x20for\x20user\x20role\x20information\x20for\x20','Sidebar\x20navigation\x20initialized\x20with\x20permissions','initial_placement','daysSinceMatch','No\x20matches\x20found','message','Error\x20resimulating\x20match:','description','points-history-table-body','src','Untitled\x20Trophy','activity','load-users-data','approvedMatches','eloHistory','TestMap','Error\x20loading\x20inactive\x20players:','classList','./promotions.js','elo','#article-modal\x20.close-btn','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','trophy-name','title','Highlight\x20updated\x20successfully!','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','Error\x20fetching\x20matches\x20for\x20','edit-highlight-videoId-input','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','lastPointsModified','DOMContentLoaded','promote-modal','toLowerCase','creatorImageUrl','inactive-players-table-body','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Please\x20select\x20a\x20user\x20and\x20store\x20item','createElement','Loading...','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','fromDate','find','filter','Error\x20opening\x20assign\x20trophy\x20modal:','querySelector','edit-match-id','article-id','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20already\x20exists\x20in\x20','quick-edit-user-id','pendingMatchesD3','\x20for\x20user\x20\x22','Load\x20players\x20data\x20clicked','manage-trophies','includes','commit','edit-match-loser-demo','\x22\x20not\x20found\x20in\x20any\x20collection','Load\x20users\x20data\x20clicked','Error\x20searching\x20for\x20user','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20history\x20entries\x20for\x20user\x20','highlight-player-profile','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','source','history-end-date','manage-ranks','alt','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','loserName','#e0e0e0','edit-wins','trophy-modal','add','body','Won','Unknown','Test\x20match','highlight-modal-title','toLocaleString','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','inactive-players','Match\x20ID\x20is\x20required','update','matches-prev-page','Error\x20loading\x20trophy\x20data:','assign-trophy-modal','warn','loserScore','Never\x20played','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20initializing\x20points:\x20','Monday','Manage\x20Ribbons\x20section\x20initialized','Role\x20\x22','inactive-players-search','Error\x20loading\x20points\x20history:','data','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','innerHTML','setDate','userProfiles','Error\x20loading\x20dashboard:','.quick-edit-btn','highlight-achievement-player','roleName','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','User\x20data\x20loaded:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Please\x20enter\x20a\x20username','roleAssignedAt','#50C878','edit-match-loser-suicides','edit-highlight-id','View\x20player\x20details\x20for\x20','points-user-search','Error\x20updating\x20points:','Modal\x20should\x20now\x20be\x20visible','toLocaleDateString','imageUrl','Load\x20highlights\x20data\x20clicked','required','highlight-video-preview','manage-players','ref','players-table-body','highlight-title','playerProfileUrl','Player\x20not\x20found\x20in\x20','Error\x20saving\x20match:','edit-match-winner-comment','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','.player','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','highlight-modal','inactive-days-filter','toISOString','table','highlight-loser-name','div','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','#CD7F32','Match\x20resimulated\x20successfully!\x20','create-test-match-modal','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','Create\x20test\x20match\x20modal\x20setup\x20complete','timestamp','load-articles-data','input','ribbon-user-search','set-elo-form','achievementPlayer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!','cells','edit-username','migration-section','low-points','videoId','updatedAt','mapPlayed','highlight-match-info','date','achievementImageUrl','sort','Error\x20loading\x20ribbons:','highlight-video-container','.no-results','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','notification\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','\x20-\x20','\x20already\x20has\x20points:\x20','-page-indicator','MAX_SAFE_INTEGER','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','length','\x20points\x20history\x20entries','loading','appendChild','edit-highlight-achievementType-input','playerId','.remove-role-btn','.edit-highlight-btn','Loser\x20','\x20ELO\x20history\x20entries.\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','trophies-table-body','image','Error\x20setting\x20user\x20role:','</span>','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','.delete-trophy-btn','Error\x20loading\x20matches:','edit-highlight-matchDate-input','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','loss','trophyDefinitions','userId','edit-highlight-playerProfileUrl-input','edit-match-loser','https://www.youtube.com/embed/','matchLink','edit-player-modal','\x20to\x20','Never','Set\x20to\x20','mapVersion','common','info','Displaying\x20','Found\x20specific\x20role:\x20','previousElementSibling','Modal\x20close\x20button\x20clicked','Demotion','block','.error-state','flex','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Matches\x20Played','seconds','resimulation','Error:\x20','Failed\x20to\x20delete\x20article:\x20','exists','demote-player-btn','empty','Failed\x20to\x20load\x20trophy\x20data','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','highlight-video-id','Error\x20loading\x20highlight:\x20','edit-match-loser-score','N/A','Created\x20','data-section','Error\x20opening\x20quick\x20edit\x20modal:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','settings','cancel-trophy-btn','map','newPoints','#000000','ribbons','{}.constructor(\x22return\x20this\x22)(\x20)','admin_modification','assign-trophy-title','set-elo-value','highlight-match-link-container','max','points-sort-order','Failed\x20to\x20assign\x20trophy:\x20','Using\x20collection:\x20','achievement','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','highlight-submitted-by-container','\x20(based\x20on\x20data-role:\x20','active','highlight-creator-image','manage-articles','role','dashboard','mapName','img','Modal\x20setup\x20complete','match','Modal\x20element\x20found:','position','Page\x20','✅\x20Exists','\x22\x20not\x20found\x20in\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','querySelectorAll','Edit\x20Match:\x20','Defaulted\x20to\x20D1\x20ladder','Unknown\x20Admin','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','Failed\x20to\x20send\x20Discord\x20notification:','Setting\x20up\x20create\x20test\x20match\x20button','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-highlight-achievementDetails-input','Error\x20adding\x20player:\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','Added\x20','Failed\x20to\x20resimulate\x20match:\x20','contains','\x20ladder!','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','closeResimulateModal','articles','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','Table\x20row\x20for\x20user\x20','points-overview-search','players','RejectedD2','Could\x20not\x20find\x20player\x20documents','\x20Weekly\x20Activity','#matches-table-body\x20tr','substring','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','.empty-state','highlight-achievement-type','refresh-points-overview','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','Edit\x20Article','approvedAt','load-players-data','setHours','playerRibbonsD2','sendPromotionNotification','\x20before\x20match:\x20','elo-history-search','match-details-container','push','stopPropagation','value','Closing\x20create\x20test\x20match\x20modal','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','\x22\x20data-ladder=\x22','validation-results-container','Silver','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','checked','.form-group','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','success','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','previousElo','Starting\x20complete\x20match\x20resimulation...','win','playersD2','.edit-ribbons-btn','getElementById','Demoting\x20player\x20to\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','removeEventListener','ladder','RejectedD3','closest','displayName','loserComment','amount','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','promote-username','style','Error\x20promoting\x20player:','opacity','trace','User\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','ribbon-target-user','search-ribbon-user-btn','Promoting\x20player\x20to\x20','Create\x20test\x20match\x20form\x20not\x20found','email','\x20ladder','trophy-image-url','User\x20Profiles','test','Adding\x20\x22active\x22\x20class\x20to\x20modal.','fa-exclamation-circle','points-overview-table-body','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','trophy-rarity\x20','all','manage-ribbons','username','-next-page','set-elo-username','assign-trophy-description','\x27\x20has\x20permissions:','winnerScore','matchInfo','Found\x20radio\x20with\x20value:','Query\x20created:','Error\x20deleting\x20trophy\x20definition:','\x20inactive\x20players','Role\x20removed','input[name=\x22test-match-ladder\x22]'];a4_0x289a=function(){return _0x29fee7;};return a4_0x289a();}async function demotePlayer(_0x5abbc0,_0x1d9838){const _0x1d52ce=a4_0x5688ea;try{console[_0x1d52ce(0xd4)](_0x1d52ce(0x159)+_0x5abbc0+'\x20in\x20'+_0x1d9838+'\x20ladder');const _0x55d52c=auth['currentUser'];if(!_0x55d52c)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x4da3ad=_0x1d9838==='D2'?'playersD2':_0x1d52ce(0x281),_0x4c96a3=_0x1d9838==='D2'?_0x1d52ce(0x108):_0x1d52ce(0x169);console['log'](_0x1d52ce(0x10a)+_0x4da3ad);const _0x190864=collection(db,_0x4da3ad),_0x33c51b=query(_0x190864,where('username','==',_0x5abbc0)),_0x25dedc=await getDocs(_0x33c51b);if(_0x25dedc[_0x1d52ce(0x23f)]){alert('Player\x20not\x20found\x20in\x20'+_0x1d9838+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x1d9838+'\x20ladder');}const _0x11ca61=_0x25dedc['docs'][0x0],_0x28201f=_0x11ca61['data'](),_0x41d68f=_0x28201f['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x41d68f);const _0x2e5601=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x2ac9d2=_0x2e5601[_0x1d52ce(0x184)](_0x5b593e=>_0x5b593e['elo']<_0x41d68f);if(!_0x2ac9d2){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1d9838+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x1d9838+_0x1d52ce(0x2c4));}console['log'](_0x1d52ce(0x2ac)+_0x2ac9d2['name']+'\x20('+_0x2ac9d2['elo']+')'),await updateDoc(doc(db,_0x4da3ad,_0x11ca61['id']),{'eloRating':_0x2ac9d2['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x55d52c[_0x1d52ce(0x2c3)]||_0x1d52ce(0x14c)}),await addDoc(collection(db,_0x4c96a3),{'player':_0x5abbc0,'previousElo':_0x41d68f,'newElo':_0x2ac9d2['elo'],'timestamp':serverTimestamp(),'type':_0x1d52ce(0xdd),'rankAchieved':_0x2ac9d2['name'],'demotedBy':_0x55d52c['email']||'admin','gameMode':_0x1d9838});try{const {promotionManager:_0x18685d}=await import(_0x1d52ce(0x16d)),_0x348b3e=_0x18685d['getRankName'](_0x41d68f),_0x5e51b1=_0x2ac9d2[_0x1d52ce(0x147)];await _0x18685d['sendPromotionNotification'](_0x11ca61['id'],_0x5abbc0,_0x41d68f,_0x2ac9d2['elo'],_0x348b3e,_0x5e51b1,'demotion',{'displayName':_0x5abbc0,'source':'admin','adminUser':_0x55d52c[_0x1d52ce(0x2c3)],'ladder':_0x1d9838}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x2c8fc8){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x2c8fc8);}return alert('Successfully\x20demoted\x20'+_0x5abbc0+'\x20to\x20'+_0x2ac9d2[_0x1d52ce(0x147)]+'\x20('+_0x2ac9d2['elo']+')'),currentLadder===_0x1d9838&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x4d48c0){console[_0x1d52ce(0x13b)]('Error\x20demoting\x20player:',_0x4d48c0),alert('Error\x20demoting\x20player:\x20'+_0x4d48c0[_0x1d52ce(0x160)]);throw _0x4d48c0;}}document[a4_0x5688ea(0x11c)]('DOMContentLoaded',()=>{const _0x5667dd=document['getElementById']('demote-form');_0x5667dd&&_0x5667dd['addEventListener']('submit',async _0x4f55c1=>{const _0x36f2ff=a4_0xeb46;_0x4f55c1['preventDefault']();const _0x330d0b=document['getElementById']('demote-username')['value'][_0x36f2ff(0xee)](),_0x3eddc1=document[_0x36f2ff(0x187)]('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x330d0b){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x330d0b,_0x3eddc1),document['getElementById']('demote-modal')['classList'][_0x36f2ff(0xdb)](_0x36f2ff(0x25d)),document['getElementById']('demote-username')['value']='';}catch(_0x452a6d){console['error']('Error\x20in\x20demotion:',_0x452a6d);}});});function a4_0xeb46(_0x1d7bce,_0x3eaf31){const _0x59ba3b=a4_0x289a();return a4_0xeb46=function(_0x2320a7,_0x3645bb){_0x2320a7=_0x2320a7-0x96;let _0x289a88=_0x59ba3b[_0x2320a7];return _0x289a88;},a4_0xeb46(_0x1d7bce,_0x3eaf31);}async function setCustomElo(_0x1c22c1,_0x281aca,_0x316760){const _0x2411fe=a4_0x5688ea;try{const _0x492be2=auth['currentUser'];if(!_0x492be2||!isAdmin(_0x492be2['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x9e10fc=_0x316760==='D2'?'playersD2':'players',_0x4444e6=_0x316760==='D2'?'eloHistoryD2':'eloHistory',_0x578851=collection(db,_0x9e10fc),_0x5942c7=query(_0x578851,where(_0x2411fe(0x2cf),'==',_0x1c22c1)),_0x149b61=await getDocs(_0x5942c7);if(_0x149b61[_0x2411fe(0x23f)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x316760+'\x20ladder');const _0x24f5fc=_0x149b61['docs'][0x0],_0x483525=_0x24f5fc['data'](),_0x216c42=_0x483525['eloRating']||0x4b0,_0x3717e0=writeBatch(db);_0x3717e0['update'](doc(db,_0x9e10fc,_0x24f5fc['id']),{'eloRating':_0x281aca,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x492be2['email']});const _0x1c07c0=doc(collection(db,_0x4444e6));return _0x3717e0['set'](_0x1c07c0,{'player':_0x1c22c1,'previousElo':_0x216c42,'newElo':_0x281aca,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x492be2['email'],'gameMode':_0x316760}),await _0x3717e0['commit'](),showNotification(_0x2411fe(0x105)+_0x1c22c1+'\x20was\x20updated\x20from\x20'+_0x216c42+'\x20to\x20'+_0x281aca,'success'),currentLadder===_0x316760&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x858303){console['error']('Error\x20setting\x20custom\x20ELO:',_0x858303);throw _0x858303;}}async function setUserRole(_0x410466,_0x40e654,_0x304d0c){const _0x20ca7f=a4_0x5688ea;try{const _0x147354=auth['currentUser'];if(!_0x147354||!isAdmin(_0x147354[_0x20ca7f(0x2c3)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x27dba8=_0x40e654?_0x40e654[_0x20ca7f(0xee)]():null,_0x24d99b=_0x27dba8?_0x304d0c||'#808080':null,[_0x4a04aa,_0x3db125]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x410466))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x410466)))]),_0x58d51a=[];if(!_0x4a04aa['empty'])_0x58d51a[_0x20ca7f(0x298)]({'ref':_0x4a04aa[_0x20ca7f(0x133)][0x0]['ref'],'source':'D1'});if(!_0x3db125['empty'])_0x58d51a[_0x20ca7f(0x298)]({'ref':_0x3db125['docs'][0x0][_0x20ca7f(0x1d9)],'source':'D2'});if(_0x58d51a['length']===0x0){const [_0x22d4af,_0x3753ac]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where(_0x20ca7f(0x2cf),'==',_0x410466))),getDocs(query(collection(db,_0x20ca7f(0x1c1)),where(_0x20ca7f(0x2cf),'==',_0x410466)))]);if(!_0x22d4af[_0x20ca7f(0x23f)])_0x58d51a[_0x20ca7f(0x298)]({'ref':_0x22d4af['docs'][0x0][_0x20ca7f(0x1d9)],'source':'NonParticipant'});if(!_0x3753ac['empty'])_0x58d51a['push']({'ref':_0x3753ac['docs'][0x0][_0x20ca7f(0x1d9)],'source':'UserProfile'});}if(_0x58d51a['length']===0x0)throw new Error('User\x20\x22'+_0x410466+_0x20ca7f(0x194));const _0x4d8936=writeBatch(db);_0x58d51a['forEach'](_0x2c810b=>{const _0x56da09=_0x20ca7f;console['log']('Updating\x20role\x20for\x20'+_0x410466+'\x20in\x20'+_0x2c810b[_0x56da09(0x19b)]),!_0x27dba8?_0x4d8936['update'](_0x2c810b['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x4d8936[_0x56da09(0x1af)](_0x2c810b['ref'],{'roleName':_0x27dba8,'roleColor':_0x24d99b,'roleAssignedBy':_0x147354['email'],'roleAssignedAt':serverTimestamp()});}),await _0x4d8936['commit']();const _0x2c6f71=_0x27dba8?_0x20ca7f(0x1ba)+_0x27dba8+'\x22\x20set':_0x20ca7f(0x2da);return showNotification(_0x2c6f71+_0x20ca7f(0x18e)+_0x410466+'\x22','success'),!![];}catch(_0x3d3b69){console['error'](_0x20ca7f(0x21a),_0x3d3b69),showNotification(_0x20ca7f(0x23b)+_0x3d3b69['message'],_0x20ca7f(0x13b));throw _0x3d3b69;}}function showNotification(_0x128e9b,_0x33e5f='info'){const _0x10dcfc=a4_0x5688ea,_0x4bd65a=document[_0x10dcfc(0x180)](_0x10dcfc(0x1e8));_0x4bd65a[_0x10dcfc(0x11d)]=_0x10dcfc(0x206)+_0x33e5f,_0x4bd65a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x33e5f)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x128e9b+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20',document[_0x10dcfc(0x1a5)]['appendChild'](_0x4bd65a),setTimeout(()=>{const _0x48767c=_0x10dcfc;_0x4bd65a[_0x48767c(0x16c)]['add']('active');},0xa);const _0x494871=setTimeout(()=>{closeNotification(_0x4bd65a);},0x1388);_0x4bd65a['querySelector']('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x494871),closeNotification(_0x4bd65a);});}function getNotificationIcon(_0x411697){const _0xce6eb3=a4_0x5688ea;switch(_0x411697){case'success':return'fa-check-circle';case'error':return _0xce6eb3(0x2c9);case _0xce6eb3(0x122):return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function closeNotification(_0x29e319){const _0x4a5b94=a4_0x5688ea;_0x29e319['classList']['remove'](_0x4a5b94(0x25d)),setTimeout(()=>{_0x29e319['remove']();},0x12c);}function setupUserRolesSection(){const _0x7635a7=a4_0x5688ea,_0x20451b=document[_0x7635a7(0x2ab)](_0x7635a7(0x167));_0x20451b&&_0x20451b[_0x7635a7(0x11c)]('click',function(){const _0x4abf85=_0x7635a7;this[_0x4abf85(0x16c)]['add']('loading'),this['innerHTML']=_0x4abf85(0x276),loadUsersWithRoles()['then'](()=>{const _0x2f81bb=_0x4abf85;this['classList'][_0x2f81bb(0xdb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x47a487=>{const _0x6e6efc=_0x4abf85;console[_0x6e6efc(0x13b)]('Error\x20loading\x20users:',_0x47a487),this['classList']['remove']('loading'),this[_0x6e6efc(0x1bf)]=_0x6e6efc(0x182),setTimeout(()=>{const _0x43d420=_0x6e6efc;this[_0x43d420(0x1bf)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x2fecd9=document['getElementById']('add-new-role-btn');_0x2fecd9&&_0x2fecd9['addEventListener'](_0x7635a7(0x130),()=>{const _0x56f28b=_0x7635a7,_0x3c374d=document['getElementById'](_0x56f28b(0x107));_0x3c374d&&_0x3c374d['classList']['add'](_0x56f28b(0x25d));});const _0x40e5ab=document['getElementById']('user-search');_0x40e5ab&&_0x40e5ab['addEventListener'](_0x7635a7(0x1f1),debounce(filterUsersTable,0x12c));const _0x57b0d1=document[_0x7635a7(0x2ab)]('role-filter');_0x57b0d1&&_0x57b0d1['addEventListener'](_0x7635a7(0xbd),filterUsersTable);}async function loadUsersWithRoles(){const _0x77c6ea=a4_0x5688ea,_0x232bd1=document['getElementById']('users-table-body');if(!_0x232bd1)return;_0x232bd1[_0x77c6ea(0x1bf)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0xf4ba33,_0x2a868e,_0x24227d,_0x436b7c]=await Promise[_0x77c6ea(0x2cd)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x42f171=new Map();function _0x376275(_0x7086a8,_0x5ae9b3){_0x7086a8['forEach'](_0x4e0e08=>{const _0xa170ff=a4_0xeb46,_0x5d3f07=_0x4e0e08['data']();if(!_0x5d3f07['username'])return;if(!_0x42f171['has'](_0x5d3f07['username']))_0x42f171[_0xa170ff(0xd3)](_0x5d3f07['username'],{'username':_0x5d3f07['username'],'roleName':_0x5d3f07[_0xa170ff(0x1c5)]||null,'roleColor':_0x5d3f07[_0xa170ff(0x117)]||null,'roleAssignedBy':_0x5d3f07['roleAssignedBy']||null,'roleAssignedAt':_0x5d3f07['roleAssignedAt']||null,'sources':[_0x5ae9b3]});else{const _0x44ed35=_0x42f171['get'](_0x5d3f07[_0xa170ff(0x2cf)]);_0x5d3f07['roleName']&&(!_0x44ed35[_0xa170ff(0x1c5)]||_0x5ae9b3==='D1'||_0x5ae9b3==='D2')&&(_0x44ed35['roleName']=_0x5d3f07[_0xa170ff(0x1c5)],_0x44ed35['roleColor']=_0x5d3f07['roleColor'],_0x44ed35['roleAssignedBy']=_0x5d3f07[_0xa170ff(0xd6)],_0x44ed35['roleAssignedAt']=_0x5d3f07[_0xa170ff(0x1cb)]),!_0x44ed35[_0xa170ff(0xe6)][_0xa170ff(0x191)](_0x5ae9b3)&&_0x44ed35[_0xa170ff(0xe6)]['push'](_0x5ae9b3);}});}_0x376275(_0xf4ba33,'D1'),_0x376275(_0x2a868e,'D2'),_0x376275(_0x24227d,'Non-Participant'),_0x376275(_0x436b7c,'Profile');const _0x19b448=Array['from'](_0x42f171['values']())['sort']((_0xc78359,_0x2b0b4b)=>_0xc78359[_0x77c6ea(0x2cf)]['localeCompare'](_0x2b0b4b['username']));if(_0x19b448[_0x77c6ea(0x20d)]===0x0){_0x232bd1['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x232bd1['innerHTML']='',_0x19b448[_0x77c6ea(0xe5)](_0xcaffc4=>{const _0x1095a8=_0x77c6ea,_0x1c6996=document['createElement']('tr');_0x1c6996['dataset']['username']=_0xcaffc4['username'],_0x1c6996[_0x1095a8(0x106)][_0x1095a8(0x1c5)]=_0xcaffc4['roleName']||'',_0x1c6996['dataset'][_0x1095a8(0x117)]=_0xcaffc4[_0x1095a8(0x117)]||'#808080';const _0xad6fff=_0xcaffc4['roleAssignedAt']?new Date(_0xcaffc4['roleAssignedAt'][_0x1095a8(0x239)]*0x3e8)['toLocaleDateString']():'N/A',_0x4881b4=_0xcaffc4['roleName']?_0x1095a8(0x10e)+_0xcaffc4[_0x1095a8(0x117)]+';\x20color:\x20'+getContrastColor(_0xcaffc4['roleColor'])+';\x22>'+_0xcaffc4['roleName']+_0x1095a8(0x21b):'<span\x20class=\x22no-role\x22>None</span>';_0x1c6996[_0x1095a8(0x1bf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xcaffc4[_0x1095a8(0x2cf)]+_0x1095a8(0xa5)+_0xcaffc4['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4881b4+_0x1095a8(0x249)+(_0xcaffc4['roleAssignedBy']||_0x1095a8(0x245))+_0x1095a8(0x249)+_0xad6fff+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0xcaffc4['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xcaffc4[_0x1095a8(0x1c5)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0xcaffc4[_0x1095a8(0x2cf)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x1095a8(0xf9),_0x232bd1[_0x1095a8(0x210)](_0x1c6996);}),document[_0x77c6ea(0x26c)](_0x77c6ea(0xba))['forEach'](_0x8c4ae6=>{const _0xe28021=_0x77c6ea;_0x8c4ae6['addEventListener'](_0xe28021(0x130),()=>{const _0x2e5e31=_0x8c4ae6['dataset']['username'];openRoleEditModal(_0x2e5e31);});}),document[_0x77c6ea(0x26c)](_0x77c6ea(0x213))['forEach'](_0xee0c30=>{const _0x1e0961=_0x77c6ea;_0xee0c30['addEventListener'](_0x1e0961(0x130),()=>{const _0x957335=_0x1e0961,_0xdb80bb=_0xee0c30['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0xdb80bb+'?')&&setUserRole(_0xdb80bb,null,null)['then'](()=>loadUsersWithRoles())[_0x957335(0x120)](_0x487b99=>console['error']('Error\x20removing\x20role:',_0x487b99));});});}catch(_0x5da881){console[_0x77c6ea(0x13b)]('Error\x20loading\x20users:',_0x5da881),_0x232bd1['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x4cb19b){const _0xab8e2d=a4_0x5688ea;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x4cb19b);const _0x262cd2=document['getElementById'](_0xab8e2d(0x107)),_0x2dadbc=document[_0xab8e2d(0x2ab)]('role-username'),_0x558e6e=document['getElementById']('user-role');if(!_0x262cd2){console['error'](_0xab8e2d(0x241)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x262cd2);_0x2dadbc?(_0x2dadbc['value']=_0x4cb19b,console['log'](_0xab8e2d(0xaa)+_0x4cb19b)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x443671=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x4cb19b+'\x22]');if(_0x443671&&_0x558e6e){const _0x1ad33f=_0x443671['dataset']['role'];_0x558e6e['value']=_0x1ad33f==='none'?'':_0x1ad33f,console['log']('Role\x20select\x20set\x20to:\x20'+_0x558e6e['value']+_0xab8e2d(0x25c)+_0x1ad33f+')');}else{if(!_0x443671)console['warn'](_0xab8e2d(0x27f)+_0x4cb19b+_0xab8e2d(0xa1));if(!_0x558e6e)console[_0xab8e2d(0x1b3)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x558e6e)_0x558e6e['value']='';}console[_0xab8e2d(0xd4)](_0xab8e2d(0x2c8)),_0x262cd2['classList']['add']('active');const _0x256194=document['getElementById']('cancel-role-btn');_0x256194?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x256194['removeEventListener']('click',closeModalHandler),_0x256194['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x262cd2[_0xab8e2d(0x2b0)]('click',closeModalBackgroundHandler),_0x262cd2['addEventListener'](_0xab8e2d(0x130),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0xf2713d){_0xf2713d['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x2835c7=a4_0x5688ea,_0x177d0f=document[_0x2835c7(0x2ab)]('set-role-modal');_0x177d0f&&(_0x177d0f['classList']['remove']('active'),_0x177d0f['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x2dec0b=a4_0x5688ea,_0x4ff4cf=document['getElementById']('user-search')?.[_0x2dec0b(0x29a)][_0x2dec0b(0x17b)]()||'',_0x20ac45=document['getElementById']('role-filter')?.[_0x2dec0b(0x29a)]||'all',_0x502ab7=document['querySelectorAll']('#users-table-body\x20tr');let _0x4ec028=0x0;_0x502ab7[_0x2dec0b(0xe5)](_0x8b60e1=>{const _0x300f29=_0x2dec0b;if(_0x8b60e1[_0x300f29(0x187)]('.loading-cell')||_0x8b60e1[_0x300f29(0x187)]('.empty-state')||_0x8b60e1['querySelector'](_0x300f29(0x235)))return;const _0x1c22d6=_0x8b60e1['dataset'][_0x300f29(0x2cf)]?.['toLowerCase']()||'',_0x27e926=_0x8b60e1['dataset'][_0x300f29(0x260)]||_0x300f29(0x10f),_0x1e198d=_0x1c22d6['includes'](_0x4ff4cf),_0x256c45=_0x20ac45==='all'||_0x27e926===_0x20ac45;_0x1e198d&&_0x256c45?(_0x8b60e1['style']['display']='',_0x4ec028++):_0x8b60e1[_0x300f29(0x2b9)]['display']=_0x300f29(0x10f);});if(_0x4ec028===0x0&&_0x502ab7['length']>0x0){const _0x37464d=document['getElementById']('users-table-body');if(_0x37464d){if(!_0x37464d[_0x2dec0b(0x187)](_0x2dec0b(0x204))){const _0x57eb76=document['createElement']('tr');_0x57eb76['classList']['add']('no-results'),_0x57eb76['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x37464d['appendChild'](_0x57eb76);}}}else{const _0xca5415=document['querySelector']('.no-results');_0xca5415&&_0xca5415['remove']();}}function setupManageArticlesSection(){const _0x4edf28=a4_0x5688ea,_0x25164a=document['getElementById']('load-articles-data');_0x25164a&&_0x25164a['addEventListener']('click',function(){const _0x27024c=a4_0xeb46;this[_0x27024c(0x16c)]['add']('loading'),this[_0x27024c(0x1bf)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x27024c(0xef)](()=>{const _0x5814c9=_0x27024c;this['classList']['remove'](_0x5814c9(0x20f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x5828cf=>{const _0x3f583e=_0x27024c;console[_0x3f583e(0x13b)]('Error\x20loading\x20articles:',_0x5828cf),this['classList'][_0x3f583e(0xdb)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x221b18=_0x3f583e;this['innerHTML']=_0x221b18(0xa6);},0xbb8);});});const _0x46b4f0=document['getElementById']('create-new-article-btn');_0x46b4f0?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x46b4f0['style']['display']='block',_0x46b4f0[_0x4edf28(0x11c)](_0x4edf28(0x130),()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x3c051d=document['getElementById']('article-form');_0x3c051d&&_0x3c051d[_0x4edf28(0x11c)]('submit',_0x5d26b9=>{_0x5d26b9['preventDefault'](),saveArticle();});const _0x177fcf=document['getElementById'](_0x4edf28(0xdc));_0x177fcf&&_0x177fcf['addEventListener']('click',()=>{closeArticleModal();});const _0x5ade7d=document[_0x4edf28(0x187)](_0x4edf28(0x16f));_0x5ade7d&&_0x5ade7d['addEventListener'](_0x4edf28(0x130),()=>{closeArticleModal();});const _0x4773c0=document[_0x4edf28(0x2ab)]('article-modal');_0x4773c0&&_0x4773c0['addEventListener'](_0x4edf28(0x130),_0x33dee1=>{_0x33dee1['target']===_0x4773c0&&closeArticleModal();});}async function loadArticles(){const _0x2627f5=a4_0x5688ea,_0x61bfe7=document['getElementById']('articles-table-body');if(!_0x61bfe7)return;_0x61bfe7['innerHTML']=_0x2627f5(0x1ab);try{const _0x45332f=collection(db,_0x2627f5(0x27d)),_0x15f631=query(_0x45332f,orderBy('createdAt','desc')),_0x448af4=await getDocs(_0x15f631);if(_0x448af4[_0x2627f5(0x23f)]){_0x61bfe7['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x61bfe7['innerHTML']='',_0x448af4[_0x2627f5(0xe5)](_0x1b5107=>{const _0x204fd6=_0x2627f5,_0x2ca725=_0x1b5107[_0x204fd6(0x1bd)](),_0x526558=document['createElement']('tr'),_0x1181e2=_0x2ca725['createdAt']?new Date(_0x2ca725['createdAt']['seconds']*0x3e8)['toLocaleString']():_0x204fd6(0x245);_0x526558['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2ca725['title']||'Untitled')+_0x204fd6(0x249)+(_0x2ca725['author']||_0x204fd6(0x1a7))+_0x204fd6(0x249)+_0x1181e2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x1b5107['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x1b5107['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x61bfe7['appendChild'](_0x526558);}),setupArticleActionButtons();}catch(_0x4c9297){console[_0x2627f5(0x13b)]('Error\x20loading\x20articles:',_0x4c9297),_0x61bfe7[_0x2627f5(0x1bf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x4c9297['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x18621e=a4_0x5688ea;document['querySelectorAll']('.edit-article-btn')[_0x18621e(0xe5)](_0x20d826=>{_0x20d826['addEventListener']('click',async _0x56eb78=>{const _0xb413a6=_0x56eb78['currentTarget']['dataset']['id'];openArticleModal(_0xb413a6);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x5095ad=>{_0x5095ad['addEventListener']('click',async _0x4593ae=>{const _0x34bb41=a4_0xeb46,_0x12e4ce=_0x4593ae[_0x34bb41(0x123)]['dataset']['id'];confirmDeleteArticle(_0x12e4ce);});});}function openArticleModal(_0x315c30=null){const _0x3b9872=a4_0x5688ea,_0x316f99=document['getElementById']('article-modal'),_0x527754=document['getElementById']('article-modal-title'),_0x4531f0=document['getElementById']('article-form'),_0x33445a=document[_0x3b9872(0x2ab)]('article-id');_0x4531f0['reset'](),_0x33445a['value']='';if(_0x315c30)_0x527754['textContent']=_0x3b9872(0x28f),_0x33445a[_0x3b9872(0x29a)]=_0x315c30,loadArticleData(_0x315c30);else{_0x527754['textContent']='Create\x20Article';const _0x41ae2a=auth['currentUser'];if(_0x41ae2a){const _0x4beeb4=document['getElementById']('article-author');if(_0x4beeb4&&_0x41ae2a[_0x3b9872(0x2b4)])_0x4beeb4[_0x3b9872(0x29a)]=_0x41ae2a[_0x3b9872(0x2b4)];else _0x4beeb4&&(_0x4beeb4['value']=_0x41ae2a['email']);}}_0x316f99['classList']['add']('active');}async function loadArticleData(_0x90af8f){const _0x22acdb=a4_0x5688ea;try{const _0x2bfa6a=doc(db,'articles',_0x90af8f),_0x47d229=await getDoc(_0x2bfa6a);if(!_0x47d229['exists']()){showNotification(_0x22acdb(0xd1),'error');return;}const _0x4f57e5=_0x47d229['data']();document['getElementById']('article-title')[_0x22acdb(0x29a)]=_0x4f57e5['title']||'',document[_0x22acdb(0x2ab)](_0x22acdb(0xd7))['value']=_0x4f57e5['author']||'',document[_0x22acdb(0x2ab)]('article-image-url')[_0x22acdb(0x29a)]=_0x4f57e5[_0x22acdb(0x1d4)]||'',document['getElementById']('article-content')['value']=_0x4f57e5['content']||'';}catch(_0x2336e0){console[_0x22acdb(0x13b)]('Error\x20loading\x20article\x20data:',_0x2336e0),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x3c177f=a4_0x5688ea;try{const _0xe02387=document['getElementById'](_0x3c177f(0x189))['value'],_0x14e7c1=document[_0x3c177f(0x2ab)]('article-title')['value']['trim'](),_0x5ece86=document['getElementById']('article-author')[_0x3c177f(0x29a)]['trim'](),_0x2f1306=document['getElementById']('article-image-url')[_0x3c177f(0x29a)]['trim'](),_0x22c733=document[_0x3c177f(0x2ab)]('article-content')['value']['trim']();if(!_0x14e7c1||!_0x22c733){showNotification('Title\x20and\x20content\x20are\x20required',_0x3c177f(0x13b));return;}const _0x5600a9=auth[_0x3c177f(0xe0)];if(!_0x5600a9){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x3f38ea={'title':_0x14e7c1,'author':_0x5ece86,'imageUrl':_0x2f1306||null,'content':_0x22c733,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5600a9['email']};!_0xe02387?(_0x3f38ea['createdAt']=serverTimestamp(),_0x3f38ea['createdBy']=_0x5600a9['email'],await addDoc(collection(db,_0x3c177f(0x27d)),_0x3f38ea),showNotification('Article\x20created\x20successfully',_0x3c177f(0x2a4))):(await updateDoc(doc(db,_0x3c177f(0x27d),_0xe02387),_0x3f38ea),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x4fce2e){console[_0x3c177f(0x13b)]('Error\x20saving\x20article:',_0x4fce2e),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x4fce2e['message'],'error');}}function closeArticleModal(){const _0x224756=a4_0x5688ea,_0x3cf0e1=document[_0x224756(0x2ab)]('article-modal');_0x3cf0e1&&_0x3cf0e1['classList'][_0x224756(0xdb)]('active');}async function confirmDeleteArticle(_0x188eab){const _0x49bf4c=a4_0x5688ea;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x188eab)),loadArticles(),showNotification('Article\x20deleted\x20successfully',_0x49bf4c(0x2a4));}catch(_0x1eace0){console['error'](_0x49bf4c(0x9c),_0x1eace0),showNotification(_0x49bf4c(0x23c)+_0x1eace0[_0x49bf4c(0x160)],'error');}}function setupTrophyManagementSection(){const _0x4b0501=a4_0x5688ea,_0x2f5dd4=document['getElementById']('load-trophies-data');_0x2f5dd4&&_0x2f5dd4['addEventListener']('click',function(){const _0x1a2498=a4_0xeb46;this['classList']['add']('loading'),this['innerHTML']=_0x1a2498(0x276);const _0x21e7b9=document['getElementById']('assign-trophy-image');_0x21e7b9&&(_0x21e7b9['onerror']=function(){const _0x2edcd8=_0x1a2498;this[_0x2edcd8(0x164)]=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x1f2235=>{console['error']('Error\x20loading\x20trophies:',_0x1f2235),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x40be83=a4_0xeb46;this['innerHTML']=_0x40be83(0x270);},0xbb8);});});const _0x128661=document[_0x4b0501(0x2ab)]('create-new-trophy-btn');_0x128661&&_0x128661['addEventListener']('click',()=>{openTrophyModal();});const _0x379ae7=document['getElementById'](_0x4b0501(0x121));_0x379ae7&&_0x379ae7[_0x4b0501(0x11c)]('submit',_0x2d8911=>{_0x2d8911['preventDefault'](),saveTrophyDefinition();});const _0x441657=document['getElementById'](_0x4b0501(0x24b));_0x441657&&_0x441657[_0x4b0501(0x11c)]('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x227d8f=>{_0x227d8f['addEventListener']('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x38f6d3=document['getElementById'](_0x4b0501(0x1a3));_0x38f6d3&&_0x38f6d3['addEventListener']('click',_0x211b51=>{_0x211b51['target']===_0x38f6d3&&closeTrophyModal();});const _0x32172c=document['getElementById'](_0x4b0501(0x1b2));_0x32172c&&_0x32172c['addEventListener']('click',_0x3bc21d=>{_0x3bc21d['target']===_0x32172c&&closeAssignTrophyModal();});const _0x11b467=document['getElementById'](_0x4b0501(0x14b));_0x11b467&&_0x11b467['addEventListener']('submit',_0x4f9a6f=>{_0x4f9a6f['preventDefault'](),assignTrophyToPlayer();});const _0x171ce9=document['getElementById']('cancel-assign-btn');_0x171ce9&&_0x171ce9['addEventListener'](_0x4b0501(0x130),()=>{closeAssignTrophyModal();});const _0x50e930=document[_0x4b0501(0x2ab)]('trophy-image-url');_0x50e930&&(_0x50e930['addEventListener'](_0x4b0501(0x1f1),updateTrophyImagePreview),_0x50e930['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x2a8233=a4_0x5688ea,_0x1fe140=document['getElementById']('trophy-image-url')[_0x2a8233(0x29a)][_0x2a8233(0xee)](),_0x151b7f=document[_0x2a8233(0x2ab)]('trophy-image-preview');if(!_0x151b7f){const _0x760e3=document['getElementById']('trophy-image-url')['closest'](_0x2a8233(0x2a2)),_0x4f4faa=document['createElement']('div');_0x4f4faa['id']='trophy-image-preview',_0x4f4faa['className']='trophy-preview-container',_0x760e3['appendChild'](_0x4f4faa);const _0x256921=document['createElement'](_0x2a8233(0x263));_0x256921['id']=_0x2a8233(0x10d),_0x256921[_0x2a8233(0x19e)]='Trophy\x20Preview',_0x256921['onerror']=function(){const _0xfc0b21=_0x2a8233;this[_0xfc0b21(0x164)]=DEFAULT_TROPHY_IMAGE,this[_0xfc0b21(0x16c)]['add']('error');},_0x4f4faa['appendChild'](_0x256921);}const _0x5cbc44=document['getElementById']('trophy-preview-img');_0x1fe140?(_0x5cbc44['src']=_0x1fe140,_0x5cbc44[_0x2a8233(0x2b9)]['display']='block',_0x5cbc44['classList'][_0x2a8233(0xdb)](_0x2a8233(0x13b))):(_0x5cbc44['src']=DEFAULT_TROPHY_IMAGE,_0x5cbc44[_0x2a8233(0x2b9)][_0x2a8233(0xa3)]='block');}async function loadTrophyDefinitions(){const _0x16c102=a4_0x5688ea,_0x19180d=document['getElementById'](_0x16c102(0x218));if(!_0x19180d)return;_0x19180d[_0x16c102(0x1bf)]=_0x16c102(0x1e0);try{const _0x1dbeec=collection(db,'trophyDefinitions'),_0x2587e9=query(_0x1dbeec,orderBy(_0x16c102(0xf2),_0x16c102(0x141))),_0x1c29c4=await getDocs(_0x2587e9);if(_0x1c29c4['empty']){_0x19180d['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x19180d['innerHTML']='',_0x1c29c4[_0x16c102(0xe5)](_0x48521e=>{const _0x1e2813=_0x16c102,_0x226004=_0x48521e[_0x1e2813(0x1bd)](),_0x1d7816=document[_0x1e2813(0x180)]('tr'),_0x218efb=_0x226004[_0x1e2813(0xf2)]?new Date(_0x226004['createdAt']['seconds']*0x3e8)[_0x1e2813(0x1aa)]():'N/A';_0x1d7816[_0x1e2813(0x1bf)]=_0x1e2813(0x287)+(_0x226004[_0x1e2813(0x219)]||DEFAULT_TROPHY_IMAGE)+_0x1e2813(0x27b)+_0x226004[_0x1e2813(0x147)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x226004['name']||_0x1e2813(0x165))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x226004['rarity']||'common')+'\x22>'+(_0x226004['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x218efb+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x48521e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x48521e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x48521e['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x19180d[_0x1e2813(0x210)](_0x1d7816);}),setupTrophyActionButtons();}catch(_0x3dadd2){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x3dadd2),_0x19180d['innerHTML']=_0x16c102(0x1f5)+_0x3dadd2['message']+_0x16c102(0x2b7);}}function setupTrophyActionButtons(){const _0x122312=a4_0x5688ea;document[_0x122312(0x26c)]('.edit-trophy-btn')[_0x122312(0xe5)](_0x541e3a=>{const _0x31607a=_0x122312;_0x541e3a['addEventListener'](_0x31607a(0x130),_0x54b2aa=>{const _0x223a3e=_0x54b2aa['currentTarget']['dataset']['id'];openTrophyModal(_0x223a3e);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0xb85aeb=>{const _0x286072=_0x122312;_0xb85aeb[_0x286072(0x11c)]('click',_0xfe8b5b=>{const _0x431c35=_0x286072,_0x122124=_0xfe8b5b[_0x431c35(0x123)]['dataset']['id'];openAssignTrophyModal(_0x122124);});}),document['querySelectorAll'](_0x122312(0x21d))['forEach'](_0x29f12a=>{_0x29f12a['addEventListener']('click',_0x206450=>{const _0x239ad5=_0x206450['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x239ad5);});});}function openTrophyModal(_0x4850d7=null){const _0x510e00=a4_0x5688ea,_0x5e036c=document['getElementById']('trophy-modal'),_0x1d1744=document['getElementById']('trophy-modal-title'),_0x5eedf7=document['getElementById']('trophy-form'),_0x50c506=document['getElementById']('trophy-id');_0x5eedf7[_0x510e00(0xa8)](),_0x50c506['value']='';const _0x4c08d7=document['getElementById']('trophy-preview-img');_0x4c08d7&&(_0x4c08d7['src']=DEFAULT_TROPHY_IMAGE,_0x4c08d7['classList']['remove']('error')),_0x4850d7?(_0x1d1744['textContent']=_0x510e00(0xf1),_0x50c506['value']=_0x4850d7,loadTrophyData(_0x4850d7)):_0x1d1744[_0x510e00(0xa0)]='Create\x20New\x20Trophy',_0x5e036c['classList']['add']('active');}async function loadTrophyData(_0x2f026a){const _0x1ec42a=a4_0x5688ea;try{const _0x5df7dd=doc(db,'trophyDefinitions',_0x2f026a),_0x3ea975=await getDoc(_0x5df7dd);if(!_0x3ea975['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x37f861=_0x3ea975['data']();document['getElementById']('trophy-name')[_0x1ec42a(0x29a)]=_0x37f861[_0x1ec42a(0x147)]||'',document[_0x1ec42a(0x2ab)]('trophy-description')['value']=_0x37f861['description']||'',document['getElementById'](_0x1ec42a(0x2c5))['value']=_0x37f861[_0x1ec42a(0x219)]||'',document['getElementById']('trophy-rarity')[_0x1ec42a(0x29a)]=_0x37f861['rarity']||_0x1ec42a(0x22d),updateTrophyImagePreview();}catch(_0x1ec04c){console[_0x1ec42a(0x13b)](_0x1ec42a(0x1b1),_0x1ec04c),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x48d604=a4_0x5688ea;try{const _0xd230e1=document[_0x48d604(0x2ab)](_0x48d604(0xb1))['value'],_0x370570=document[_0x48d604(0x2ab)](_0x48d604(0x171))['value']['trim'](),_0x1d00bb=document['getElementById']('trophy-description')['value']['trim'](),_0xc89c89=document['getElementById']('trophy-image-url')['value']['trim'](),_0xdb9cbf=document[_0x48d604(0x2ab)]('trophy-rarity')['value'];if(!_0x370570||!_0x1d00bb||!_0xc89c89){showNotification('All\x20fields\x20are\x20required',_0x48d604(0x13b));return;}const _0x2a58c8=auth['currentUser'];if(!_0x2a58c8){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0xaf5466={'name':_0x370570,'description':_0x1d00bb,'image':_0xc89c89,'rarity':_0xdb9cbf,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x2a58c8['email']};!_0xd230e1?(_0xaf5466['createdAt']=serverTimestamp(),_0xaf5466['createdBy']=_0x2a58c8['email'],await addDoc(collection(db,'trophyDefinitions'),_0xaf5466),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0xd230e1),_0xaf5466),showNotification('Trophy\x20updated\x20successfully',_0x48d604(0x2a4))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x224d4f){console[_0x48d604(0x13b)]('Error\x20saving\x20trophy:',_0x224d4f),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x224d4f[_0x48d604(0x160)],'error');}}function closeTrophyModal(){const _0x5644a3=a4_0x5688ea,_0x115a03=document['getElementById']('trophy-modal');_0x115a03&&_0x115a03[_0x5644a3(0x16c)]['remove'](_0x5644a3(0x25d));}async function confirmDeleteTrophy(_0x44ab71){const _0x4519a6=a4_0x5688ea;if(!_0x44ab71){console['error'](_0x4519a6(0xea));return;}if(confirm(_0x4519a6(0x1ed)))try{const _0x1b144f=auth['currentUser'];if(!_0x1b144f){showNotification(_0x4519a6(0xed),_0x4519a6(0x13b));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x44ab71),await deleteDoc(doc(db,_0x4519a6(0x222),_0x44ab71)),showNotification(_0x4519a6(0x9e),'success'),loadTrophyDefinitions();}catch(_0x22248c){console['error'](_0x4519a6(0x2d8),_0x22248c),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x22248c['message'],'error');}}async function openAssignTrophyModal(_0x33ae49){const _0xa40854=a4_0x5688ea;try{const _0x3a663f=doc(db,'trophyDefinitions',_0x33ae49),_0x29aabc=await getDoc(_0x3a663f);if(!_0x29aabc['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x555394=_0x29aabc[_0xa40854(0x1bd)]();document['getElementById'](_0xa40854(0xc1))[_0xa40854(0x29a)]=_0x33ae49,document['getElementById']('assign-trophy-name')['value']=_0x555394[_0xa40854(0x147)],document['getElementById']('assign-trophy-image')['src']=_0x555394['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0xa40854(0x252))['textContent']=_0x555394['name']||'Unnamed\x20Trophy',document[_0xa40854(0x2ab)](_0xa40854(0x2d2))[_0xa40854(0xa0)]=_0x555394[_0xa40854(0x162)]||'No\x20description';const _0x1f006d=document['getElementById']('assign-trophy-rarity');_0x1f006d['textContent']=_0x555394['rarity']||_0xa40854(0x22d),_0x1f006d['className']=_0xa40854(0x2cc)+(_0x555394['rarity']||_0xa40854(0x22d));const _0x2ba08a=document['getElementById']('assign-trophy-modal');_0x2ba08a[_0xa40854(0x16c)][_0xa40854(0x1a4)](_0xa40854(0x25d));}catch(_0x47ff4f){console['error'](_0xa40854(0x186),_0x47ff4f),showNotification(_0xa40854(0x240),_0xa40854(0x13b));}}function closeAssignTrophyModal(){const _0xfda0e4=a4_0x5688ea,_0x54d37b=document['getElementById'](_0xfda0e4(0x1b2));_0x54d37b&&_0x54d37b[_0xfda0e4(0x16c)]['remove'](_0xfda0e4(0x25d));}async function assignTrophyToPlayer(){const _0x3885e3=a4_0x5688ea;try{const _0x110c38=document['getElementById']('assign-trophy-id')['value'],_0x22632d=document['getElementById'](_0x3885e3(0x11a))['value'],_0x33bc9a=document['getElementById']('assign-player-username')[_0x3885e3(0x29a)]['trim'](),_0x220b76=document[_0x3885e3(0x187)]('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x110c38||!_0x33bc9a){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x58651b=auth['currentUser'];if(!_0x58651b){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x3b909a=null,_0x1cd840=null,_0x42b27b=null;if(_0x220b76==='non-participant'){const _0x49b6e8=collection(db,'nonParticipants'),_0x40f880=query(_0x49b6e8,where('username','==',_0x33bc9a)),_0x1bb417=await getDocs(_0x40f880);!_0x1bb417['empty']&&(_0x3b909a=_0x1bb417['docs'][0x0],_0x1cd840=_0x3b909a['id'],_0x42b27b=_0x3b909a['data']());}else{const _0xeb6c09=_0x220b76==='D1'?'players':_0x220b76==='D2'?_0x3885e3(0x2a9):'playersD3',_0x4c0464=collection(db,_0xeb6c09),_0x1df677=query(_0x4c0464,where('username','==',_0x33bc9a)),_0xfb6f29=await getDocs(_0x1df677);!_0xfb6f29[_0x3885e3(0x23f)]&&(_0x3b909a=_0xfb6f29['docs'][0x0],_0x1cd840=_0x3b909a['id'],_0x42b27b=_0x3b909a['data']());}if(!_0x3b909a){showNotification('Player\x20\x22'+_0x33bc9a+_0x3885e3(0x26a)+(_0x220b76==='non-participant'?'non-participants':_0x220b76+_0x3885e3(0x2c4)),_0x3885e3(0x13b));return;}const _0x2019f9=collection(db,'userTrophies'),_0x3c698b=query(_0x2019f9,where('userId','==',_0x1cd840),where('trophyId','==',_0x110c38)),_0x1fa170=await getDocs(_0x3c698b);if(!_0x1fa170[_0x3885e3(0x23f)]){showNotification('Player\x20\x22'+_0x33bc9a+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x1cd840,'playerUsername':_0x33bc9a,'trophyId':_0x110c38,'awardedAt':serverTimestamp(),'awardedBy':_0x58651b[_0x3885e3(0x2c3)],'ladder':_0x220b76}),showNotification('Trophy\x20\x22'+_0x22632d+'\x22\x20awarded\x20to\x20'+_0x33bc9a,'success'),closeAssignTrophyModal();}catch(_0x4b734a){console['error']('Error\x20assigning\x20trophy:',_0x4b734a),showNotification(_0x3885e3(0x257)+_0x4b734a['message'],'error');}}function setupInactivePlayersSection(){const _0x4b409b=a4_0x5688ea,_0x242278=document['getElementById']('inactive-days-filter');_0x242278&&_0x242278['addEventListener'](_0x4b409b(0xbd),function(){const _0xd0957=_0x4b409b,_0x4857cb=document[_0xd0957(0x2ab)]('load-inactive-players-data');if(_0x4857cb)_0x4857cb['click']();});const _0x1e6bda=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x15ad07=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x1e6bda&&_0x15ad07&&(_0x1e6bda['addEventListener']('change',function(){const _0x3f66fd=_0x4b409b;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x3f66fd(0x1ad))['style']['display']!=='none'){const _0x1bd988=document[_0x3f66fd(0x2ab)]('load-inactive-players-data');if(_0x1bd988)_0x1bd988['click']();}}}),_0x15ad07['addEventListener'](_0x4b409b(0xbd),function(){const _0x3b8ee0=_0x4b409b;if(this[_0x3b8ee0(0x2a1)]){currentLadder='D2';if(document[_0x3b8ee0(0x2ab)](_0x3b8ee0(0x1ad))[_0x3b8ee0(0x2b9)]['display']!=='none'){const _0x30dd7b=document['getElementById']('load-inactive-players-data');if(_0x30dd7b)_0x30dd7b['click']();}}}));const _0x2fdc71=document['getElementById'](_0x4b409b(0x1bb));_0x2fdc71&&_0x2fdc71['addEventListener']('input',debounce(function(){const _0x1bf385=_0x4b409b,_0x136834=_0x2fdc71[_0x1bf385(0x29a)]['toLowerCase'](),_0x5d2dbc=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x5d2dbc['forEach'](_0x301489=>{const _0x448c41=_0x1bf385;if(_0x301489[_0x448c41(0x187)]('.loading-cell')||_0x301489[_0x448c41(0x187)](_0x448c41(0x28b))||_0x301489['querySelector']('.error-state'))return;const _0x1c6dcd=_0x301489[_0x448c41(0x1f7)][0x0]?.['textContent']['toLowerCase']()||'',_0x1b14c4=_0x301489['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x1c6dcd['includes'](_0x136834)||_0x1b14c4[_0x448c41(0x191)](_0x136834)?_0x301489[_0x448c41(0x2b9)]['display']='':_0x301489['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x454553){const _0x17f2d5=_0x4b409b;if(_0x454553['target']['closest'](_0x17f2d5(0x102))){const _0x21e9e5=_0x454553['target'][_0x17f2d5(0x2b3)]('.view-player-btn'),_0x542bff=_0x21e9e5[_0x17f2d5(0x106)]['username'];_0x542bff&&alert(_0x17f2d5(0x1cf)+_0x542bff+'\x20-\x20Feature\x20coming\x20soon');}}),console[_0x4b409b(0xd4)]('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x4be2dc=a4_0x5688ea,_0x4e49dc=document['getElementById'](_0x4be2dc(0x17d));if(!_0x4e49dc)return;_0x4e49dc['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x5eae80=document['getElementById'](_0x4be2dc(0x1e4)),_0x30809d=_0x5eae80?parseInt(_0x5eae80['value'])||0x0:0x0,_0x415984=collection(db,currentLadder==='D1'?'players':_0x4be2dc(0x2a9)),_0x4ef790=await getDocs(_0x415984);if(_0x4ef790[_0x4be2dc(0x23f)]){_0x4e49dc['innerHTML']=_0x4be2dc(0x2ae);return;}const _0x1cf4ca=[];_0x4ef790['forEach'](_0x5588aa=>{const _0x2ed21b=_0x4be2dc,_0x2a2409=_0x5588aa['data']();_0x1cf4ca['push']({..._0x2a2409,'id':_0x5588aa['id'],'username':_0x2a2409['username']||_0x2ed21b(0xb6)});}),console[_0x4be2dc(0xd4)]('Found\x20'+_0x1cf4ca['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+_0x4be2dc(0x2c4));const _0x27b948=currentLadder==='D1'?_0x4be2dc(0x168):'approvedMatchesD2',_0x4ea933=_0x1cf4ca['map'](async _0x55b5c8=>{const _0x1dbf39=_0x4be2dc;try{const _0x31c1e0=collection(db,_0x27b948),_0x1832fe=query(_0x31c1e0,or(where('winnerUsername','==',_0x55b5c8['username']),where(_0x1dbf39(0xd5),'==',_0x55b5c8['username'])),orderBy(_0x1dbf39(0x290),_0x1dbf39(0x141)),limit(0x1)),_0x321439=await getDocs(_0x1832fe);if(!_0x321439[_0x1dbf39(0x23f)]){const _0x3005f1=_0x321439['docs'][0x0]['data'](),_0x2bc558=_0x3005f1[_0x1dbf39(0x290)]?new Date(_0x3005f1[_0x1dbf39(0x290)]['seconds']*0x3e8):null,_0xab1af0=new Date(),_0x118694=_0x2bc558?Math['floor']((_0xab1af0-_0x2bc558)/(0x3e8*0x3c*0x3c*0x18)):null,_0x4f7766=_0x3005f1[_0x1dbf39(0xf6)]===_0x55b5c8['username']?_0x3005f1['loserUsername']:_0x3005f1['winnerUsername'],_0x4336da=_0x3005f1['winnerUsername']===_0x55b5c8['username']?_0x1dbf39(0x1a6):'Lost';return{..._0x55b5c8,'lastMatch':{'date':_0x2bc558?_0x2bc558[_0x1dbf39(0x1d3)]():'N/A','opponent':_0x4f7766||'Unknown','result':_0x4336da,'timestamp':_0x2bc558||new Date(0x0),'daysSinceMatch':_0x118694||Number[_0x1dbf39(0x20b)]}};}else return{..._0x55b5c8,'lastMatch':{'date':'Never\x20played','opponent':_0x1dbf39(0x245),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x5cf73e){return console[_0x1dbf39(0x13b)](_0x1dbf39(0x175)+_0x55b5c8['username']+':',_0x5cf73e),{..._0x55b5c8,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x59bd5e=await Promise[_0x4be2dc(0x2cd)](_0x4ea933);_0x59bd5e['sort']((_0x58c0c7,_0x66603f)=>_0x66603f['lastMatch'][_0x4be2dc(0x15e)]-_0x58c0c7['lastMatch']['daysSinceMatch']);_0x30809d>0x0&&(_0x59bd5e=_0x59bd5e[_0x4be2dc(0x185)](_0x4e4659=>_0x4e4659['lastMatch'][_0x4be2dc(0x15e)]>=_0x30809d));_0x4e49dc['innerHTML']='';if(_0x59bd5e['length']===0x0){_0x4e49dc['innerHTML']=_0x4be2dc(0x13f);return;}_0x59bd5e['forEach'](_0x550109=>{const _0x2b6359=_0x4be2dc,_0x5c7c5a=document['createElement']('tr'),_0x459b4d=_0x550109['lastMatch'][_0x2b6359(0x15e)]>0x1e?'highly-inactive':_0x550109['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x5c7c5a['className']=_0x459b4d,_0x5c7c5a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x550109[_0x2b6359(0x2cf)]+_0x2b6359(0x249)+(_0x550109['eloRating']||0x4b0)+_0x2b6359(0x249)+_0x550109[_0x2b6359(0x12c)][_0x2b6359(0x1ff)]+_0x2b6359(0x249)+(_0x550109[_0x2b6359(0x12c)]['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x2b6359(0x245):_0x550109['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x550109[_0x2b6359(0x12c)][_0x2b6359(0x1ff)]===_0x2b6359(0x1b5)?_0x2b6359(0x15f):_0x550109[_0x2b6359(0x12c)]['result']+_0x2b6359(0xdf)+_0x550109['lastMatch'][_0x2b6359(0x131)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x550109['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4e49dc['appendChild'](_0x5c7c5a);}),console['log'](_0x4be2dc(0x22f)+_0x59bd5e['length']+_0x4be2dc(0x2d9));}catch(_0xe37bb5){console['error'](_0x4be2dc(0x16b),_0xe37bb5),_0x4e49dc[_0x4be2dc(0x1bf)]=_0x4be2dc(0x174)+_0xe37bb5['message']+_0x4be2dc(0xaf);}}function setupHighlightButtons(){const _0x881bcb=a4_0x5688ea;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x42a5c3=document[_0x881bcb(0x2ab)]('create-match-highlight-btn');_0x42a5c3&&_0x42a5c3['addEventListener'](_0x881bcb(0x130),function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x477e52=document['getElementById']('create-creator-highlight-btn');_0x477e52&&_0x477e52['addEventListener']('click',function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x4712b5=document['getElementById']('create-achievement-highlight-btn');_0x4712b5&&_0x4712b5['addEventListener']('click',function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x238a67='match'){const _0x9a1c7d=a4_0x5688ea;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x238a67);const _0x2fff07=document['getElementById']('highlight-modal'),_0x22ecb5=document[_0x9a1c7d(0x2ab)]('highlight-form'),_0x4081e6=document['getElementById'](_0x9a1c7d(0x1a9)),_0x1fc21e=document['getElementById']('highlight-id');if(!_0x2fff07||!_0x22ecb5||!_0x4081e6){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x22ecb5['reset'](),_0x1fc21e['value']='';const _0x595ef3=['match','creator','achievement'],_0x3d367c=!_0x595ef3[_0x9a1c7d(0x191)](_0x238a67);if(_0x3d367c){const _0x36bcda=_0x238a67;_0x1fc21e['value']=_0x36bcda,_0x4081e6['textContent']=_0x9a1c7d(0x181),loadHighlightDataAdmin(_0x36bcda);}else{const _0x2d12f0=_0x238a67;document['getElementById']('highlight-type')[_0x9a1c7d(0x29a)]=_0x2d12f0,_0x4081e6['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x2d12f0),toggleHighlightFields(_0x2d12f0);const _0x338af3=auth['currentUser'];_0x338af3&&document[_0x9a1c7d(0x2ab)]('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')['value']=_0x338af3['displayName']||_0x338af3[_0x9a1c7d(0x2c3)]);}_0x2fff07[_0x9a1c7d(0x16c)][_0x9a1c7d(0x1a4)]('active');}function toggleHighlightFields(_0x4ed022){const _0x4f71e3=a4_0x5688ea;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x4ed022);const _0x341cdd=document[_0x4f71e3(0x2ab)]('highlight-form');if(!_0x341cdd)return;const _0xe63e06=_0x341cdd['querySelectorAll']('.form-group,\x20.form-row');_0xe63e06[_0x4f71e3(0xe5)](_0x55685a=>_0x55685a['style']['display']='none');const _0x39c9c2=document['getElementById']('highlight-video-preview-container');if(_0x39c9c2)_0x39c9c2['style']['display']='none';const _0x4cefbc=['highlight-title-container','highlight-description-container',_0x4f71e3(0x25b)];_0x4cefbc['forEach'](_0x269941=>{const _0xd3d83e=document['getElementById'](_0x269941);if(_0xd3d83e)_0xd3d83e['style']['display']='block';});if(_0x4ed022==='match'){const _0x48aeef=['highlight-video-container','highlight-match-info-container','highlight-map-container',_0x4f71e3(0x109),'highlight-players-container',_0x4f71e3(0x254)];_0x48aeef['forEach'](_0x422993=>{const _0x9b994c=_0x4f71e3,_0x24d335=document['getElementById'](_0x422993);_0x24d335&&(_0x422993==='highlight-players-container'?_0x24d335['style']['display']=_0x9b994c(0x236):_0x24d335['style']['display']='block');});const _0x40df3f=document[_0x4f71e3(0x2ab)]('highlight-video-id');if(_0x40df3f){_0x40df3f['required']=!![];const _0x1d419d=_0x40df3f['previousElementSibling'];if(_0x1d419d)_0x1d419d['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x39c9c2)_0x39c9c2['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x4ed022==='creator'){const _0x195132=['highlight-map-container',_0x4f71e3(0xcb),'highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x195132[_0x4f71e3(0xe5)](_0x4af74b=>{const _0x1a78e8=document['getElementById'](_0x4af74b);if(_0x1a78e8)_0x1a78e8['style']['display']='block';});const _0xb623aa=document[_0x4f71e3(0x2ab)]('highlight-video-id');if(_0xb623aa){_0xb623aa[_0x4f71e3(0x1d6)]=![];const _0x32e633=_0xb623aa[_0x4f71e3(0x231)];if(_0x32e633)_0x32e633['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x4ed022==='achievement'){const _0x3f9ebf=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container',_0x4f71e3(0x203)];_0x3f9ebf['forEach'](_0x328cfe=>{const _0x334529=_0x4f71e3,_0x461df1=document[_0x334529(0x2ab)](_0x328cfe);if(_0x461df1)_0x461df1['style']['display']='block';});const _0x89a82c=document['getElementById'](_0x4f71e3(0x242));if(_0x89a82c){_0x89a82c[_0x4f71e3(0x1d6)]=![];const _0x2eaf3e=_0x89a82c['previousElementSibling'];if(_0x2eaf3e)_0x2eaf3e['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x4358d5){const _0x2c20c8=a4_0x5688ea;try{const _0x51317d=doc(db,_0x2c20c8(0x14a),_0x4358d5),_0x1cda40=await getDoc(_0x51317d);if(!_0x1cda40['exists']()){showNotification(_0x2c20c8(0xc5),_0x2c20c8(0x13b));return;}const _0x4470f4=_0x1cda40[_0x2c20c8(0x1bd)](),_0x2c4b56=_0x4470f4['type']||'match';document['getElementById']('highlight-modal-title')[_0x2c20c8(0xa0)]='Edit\x20'+getHighlightTypeName(_0x2c4b56),document['getElementById']('highlight-type')['value']=_0x2c4b56,toggleHighlightFields(_0x2c4b56),document['getElementById']('highlight-title')['value']=_0x4470f4[_0x2c20c8(0x172)]||'',document['getElementById']('highlight-description')['value']=_0x4470f4['description']||'',document[_0x2c20c8(0x2ab)](_0x2c20c8(0x9b))[_0x2c20c8(0x29a)]=_0x4470f4[_0x2c20c8(0xe8)]||'';_0x4470f4['videoId']&&(document[_0x2c20c8(0x2ab)]('highlight-video-id')[_0x2c20c8(0x29a)]=_0x4470f4['videoId'],updateHighlightVideoPreview());if(_0x2c4b56==='match'){document['getElementById']('highlight-match-info')['value']=_0x4470f4['matchInfo']||'',document['getElementById']('highlight-map')[_0x2c20c8(0x29a)]=_0x4470f4['map']||'';if(_0x4470f4['matchDate']){const _0x6959b6=new Date(_0x4470f4['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x6959b6[_0x2c20c8(0x1e5)]()['split']('T')[0x0];}document[_0x2c20c8(0x2ab)]('highlight-winner-name')['value']=_0x4470f4['winnerName']||'',document['getElementById']('highlight-winner-score')['value']=_0x4470f4[_0x2c20c8(0x2d4)]||'',document['getElementById'](_0x2c20c8(0x1e7))[_0x2c20c8(0x29a)]=_0x4470f4['loserName']||'',document[_0x2c20c8(0x2ab)]('highlight-loser-score')['value']=_0x4470f4['loserScore']||'',document['getElementById']('highlight-match-link')['value']=_0x4470f4['matchLink']||'';}else{if(_0x2c4b56===_0x2c20c8(0x138))document['getElementById'](_0x2c20c8(0x101))[_0x2c20c8(0x29a)]=_0x4470f4['map']||'',document['getElementById']('highlight-map-creator')[_0x2c20c8(0x29a)]=_0x4470f4['mapCreator']||'',document[_0x2c20c8(0x2ab)]('highlight-map-version')['value']=_0x4470f4[_0x2c20c8(0x22c)]||'',document['getElementById']('highlight-creator-image')['value']=_0x4470f4[_0x2c20c8(0x17c)]||'';else _0x2c4b56==='achievement'&&(document['getElementById'](_0x2c20c8(0x1c4))['value']=_0x4470f4['achievementPlayer']||'',document[_0x2c20c8(0x2ab)](_0x2c20c8(0x28c))[_0x2c20c8(0x29a)]=_0x4470f4['achievementType']||'',document['getElementById']('highlight-achievement-details')[_0x2c20c8(0x29a)]=_0x4470f4['achievementDetails']||'',document['getElementById'](_0x2c20c8(0x199))['value']=_0x4470f4['playerProfileUrl']||'',document['getElementById']('highlight-achievement-image')['value']=_0x4470f4[_0x2c20c8(0x200)]||'');}}catch(_0x3f87a0){console['error']('Error\x20loading\x20highlight:',_0x3f87a0),showNotification(_0x2c20c8(0x243)+_0x3f87a0['message'],'error');}}async function saveHighlight(){const _0xe9c7ad=a4_0x5688ea;try{const _0x160a47=document['getElementById']('highlight-id')?.['value']||'',_0x62a18a=document['getElementById'](_0xe9c7ad(0xc0))?.[_0xe9c7ad(0x29a)]||_0xe9c7ad(0x265),_0x16b01={'title':document[_0xe9c7ad(0x2ab)](_0xe9c7ad(0x1db))?.['value']?.[_0xe9c7ad(0xee)]()||'','description':document['getElementById'](_0xe9c7ad(0x129))?.['value']?.[_0xe9c7ad(0xee)]()||'','submittedBy':document['getElementById'](_0xe9c7ad(0x9b))?.['value']?.['trim']()||'','videoId':document[_0xe9c7ad(0x2ab)]('highlight-video-id')?.['value']?.[_0xe9c7ad(0xee)]()||null,'type':_0x62a18a};if(!_0x16b01['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x62a18a==='match'){_0x16b01['matchInfo']=document['getElementById'](_0xe9c7ad(0x1fe))?.[_0xe9c7ad(0x29a)]?.['trim']()||'',_0x16b01['map']=document[_0xe9c7ad(0x2ab)]('highlight-map')?.['value']?.['trim']()||'';const _0x4240d8=document[_0xe9c7ad(0x2ab)]('highlight-match-date'),_0x403e7d=_0x4240d8?.['value']||'';_0x16b01[_0xe9c7ad(0xbb)]=_0x403e7d?Timestamp['fromDate'](new Date(_0x403e7d)):null,_0x16b01['winnerName']=document['getElementById']('highlight-winner-name')?.[_0xe9c7ad(0x29a)]?.['trim']()||'',_0x16b01['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x16b01['loserName']=document[_0xe9c7ad(0x2ab)]('highlight-loser-name')?.['value']?.['trim']()||'',_0x16b01['loserScore']=document['getElementById']('highlight-loser-score')?.['value']?.[_0xe9c7ad(0xee)]()||'',_0x16b01[_0xe9c7ad(0x227)]=document['getElementById']('highlight-match-link')?.['value']?.[_0xe9c7ad(0xee)]()||'';if(!_0x16b01['videoId']){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x62a18a==='creator'){_0x16b01[_0xe9c7ad(0x24c)]=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x16b01['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.[_0xe9c7ad(0xee)]()||'',_0x16b01['mapVersion']=document['getElementById'](_0xe9c7ad(0x10b))?.[_0xe9c7ad(0x29a)]?.[_0xe9c7ad(0xee)]()||'',_0x16b01['creatorImageUrl']=document['getElementById'](_0xe9c7ad(0x25e))?.[_0xe9c7ad(0x29a)]?.[_0xe9c7ad(0xee)]()||'';if(!_0x16b01['mapCreator']){showNotification('Map\x20Creator\x20is\x20required',_0xe9c7ad(0x13b));return;}}else{if(_0x62a18a===_0xe9c7ad(0x259)){_0x16b01['achievementPlayer']=document[_0xe9c7ad(0x2ab)]('highlight-achievement-player')?.[_0xe9c7ad(0x29a)]?.[_0xe9c7ad(0xee)]()||'',_0x16b01['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x16b01['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.[_0xe9c7ad(0xee)]()||'',_0x16b01['playerProfileUrl']=document[_0xe9c7ad(0x2ab)]('highlight-player-profile')?.['value']?.[_0xe9c7ad(0xee)]()||'',_0x16b01[_0xe9c7ad(0x200)]=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x16b01['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required',_0xe9c7ad(0x13b));return;}}}}_0x160a47?(_0x16b01['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x160a47),_0x16b01),showNotification(_0xe9c7ad(0x173),_0xe9c7ad(0x2a4))):(_0x16b01['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x16b01),showNotification('Highlight\x20created\x20successfully!',_0xe9c7ad(0x2a4))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x349a46){console[_0xe9c7ad(0x13b)]('Error\x20saving\x20highlight:',_0x349a46),showNotification('Error\x20saving\x20highlight:\x20'+_0x349a46['message'],_0xe9c7ad(0x13b));}}function closeHighlightModal(){const _0x95ef2f=a4_0x5688ea,_0x4ce888=document[_0x95ef2f(0x2ab)](_0x95ef2f(0x1e3));if(_0x4ce888)_0x4ce888['classList']['remove']('active');}function getHighlightTypeName(_0x318551){const _0xc5d058=a4_0x5688ea;switch(_0x318551){case _0xc5d058(0x265):return'Match\x20Highlight';case _0xc5d058(0x138):return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x43ee85=a4_0x5688ea,_0x527ba1=document[_0x43ee85(0x2ab)](_0x43ee85(0x242)),_0x283cba=document['getElementById']('highlight-video-preview-container'),_0x201494=document['getElementById'](_0x43ee85(0x1d7));if(!_0x527ba1||!_0x201494||!_0x283cba)return;const _0x23e668=_0x527ba1['value']['trim']();_0x23e668&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x23e668)?(_0x201494[_0x43ee85(0x164)]=_0x43ee85(0x226)+_0x23e668,_0x283cba['style']['display']='block'):(_0x201494['src']='',_0x283cba['style']['display']='none');}async function loadHighlightsAdmin(){const _0x319373=a4_0x5688ea,_0x66f867=document['getElementById']('highlights-table-body');if(!_0x66f867)return;_0x66f867[_0x319373(0x1bf)]=_0x319373(0x2cb);try{const _0x419ade=query(collection(db,_0x319373(0x14a)),orderBy('createdAt','desc')),_0x48731d=await getDocs(_0x419ade);if(_0x48731d[_0x319373(0x23f)]){_0x66f867['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x66f867['innerHTML']='',_0x48731d['forEach'](_0x5e930d=>{const _0x2ac1e2=_0x319373,_0x87526f=_0x5e930d['data'](),_0x2d08d7=document['createElement']('tr'),_0x33b8bb=_0x87526f[_0x2ac1e2(0xf2)]?new Date(_0x87526f['createdAt']['seconds']*0x3e8)[_0x2ac1e2(0x1d3)]():_0x2ac1e2(0x245);let _0xd1ac48='Unknown',_0x5bac44='';switch(_0x87526f['type']){case'match':_0xd1ac48='Match',_0x5bac44='match-type';break;case'creator':_0xd1ac48='Creator',_0x5bac44='creator-type';break;case _0x2ac1e2(0x259):_0xd1ac48='Achievement',_0x5bac44='achievement-type';break;}_0x2d08d7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x87526f[_0x2ac1e2(0x172)]||_0x2ac1e2(0x125))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x5bac44+'\x22>'+_0xd1ac48+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x33b8bb+_0x2ac1e2(0x249)+(_0x87526f[_0x2ac1e2(0xe8)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x87526f[_0x2ac1e2(0x1fb)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x5e930d['id']+_0x2ac1e2(0x1e2)+_0x5e930d['id']+_0x2ac1e2(0x170),_0x66f867['appendChild'](_0x2d08d7);}),document['querySelectorAll'](_0x319373(0x214))['forEach'](_0x2f4138=>{_0x2f4138['addEventListener']('click',_0x411b11=>{openHighlightModal(_0x411b11['currentTarget']['dataset']['id']);});}),document[_0x319373(0x26c)]('.delete-highlight-btn')['forEach'](_0x946b51=>{_0x946b51['addEventListener']('click',_0xe64d16=>{confirmDeleteHighlight(_0xe64d16['currentTarget']['dataset']['id']);});});}catch(_0x39cb1d){console[_0x319373(0x13b)]('Error\x20loading\x20highlights:',_0x39cb1d),_0x66f867[_0x319373(0x1bf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x39cb1d['message']+_0x319373(0x2b7);}}async function confirmDeleteHighlight(_0x19e734){const _0xeef757=a4_0x5688ea;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0xeef757(0x14a),_0x19e734)),showNotification('Highlight\x20deleted\x20successfully','success'),loadHighlightsAdmin();}catch(_0x43117c){console['error'](_0xeef757(0xd8),_0x43117c),showNotification('Error\x20deleting\x20highlight:\x20'+_0x43117c[_0xeef757(0x160)],'error');}}function setupCreateTestMatchModal(){const _0x1815c4=a4_0x5688ea;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x3c1f3c=document['getElementById'](_0x1815c4(0x1ec)),_0x50eed5=document['getElementById'](_0x1815c4(0x137));if(!_0x3c1f3c){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x50eed5){console['error'](_0x1815c4(0x2a0));return;}const _0x40fcd0=_0x3c1f3c[_0x1815c4(0x134)](!![]);_0x3c1f3c['parentNode']['replaceChild'](_0x40fcd0,_0x3c1f3c);const _0x1af2a=_0x40fcd0['querySelector']('#create-test-match-form');_0x40fcd0['addEventListener']('click',function(_0x26861f){const _0x3d3250=_0x1815c4;_0x26861f['target']===_0x40fcd0&&(console[_0x3d3250(0xd4)]('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x20a9f2=_0x40fcd0['querySelector']('.close-btn');_0x20a9f2&&_0x20a9f2['addEventListener']('click',function(_0x195def){const _0x1d6c2d=_0x1815c4;_0x195def['preventDefault'](),_0x195def['stopPropagation'](),console['log'](_0x1d6c2d(0x232)),closeCreateTestMatchModal();});const _0x2ce44c=_0x40fcd0['querySelector']('#cancel-create-test-match-btn');_0x2ce44c&&_0x2ce44c[_0x1815c4(0x11c)](_0x1815c4(0x130),function(_0xbcb5d1){const _0x40349a=_0x1815c4;_0xbcb5d1[_0x40349a(0xec)](),_0xbcb5d1['stopPropagation'](),console[_0x40349a(0xd4)]('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x1af2a){_0x1af2a['addEventListener']('submit',function(_0xefa7ef){const _0x49f4f0=_0x1815c4;_0xefa7ef['preventDefault'](),_0xefa7ef['stopPropagation'](),console[_0x49f4f0(0xd4)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x2eb0c2=_0x1af2a['querySelector']('button[type=\x22submit\x22]');_0x2eb0c2&&_0x2eb0c2['addEventListener']('click',function(_0x2953a1){const _0x579610=_0x1815c4;_0x2953a1['preventDefault'](),_0x2953a1['stopPropagation'](),console[_0x579610(0xd4)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console[_0x1815c4(0xd4)](_0x1815c4(0x1ee));}function setupManageHighlightsSection(){const _0xd15a8c=a4_0x5688ea;console[_0xd15a8c(0xd4)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x5ee7ac=document[_0xd15a8c(0x2ab)]('highlight-form');_0x5ee7ac&&_0x5ee7ac['addEventListener']('submit',_0x5a78e9=>{_0x5a78e9['preventDefault'](),saveHighlight();});const _0x44e832=document[_0xd15a8c(0x2ab)](_0xd15a8c(0x10c));_0x44e832&&_0x44e832['addEventListener'](_0xd15a8c(0x130),closeHighlightModal);const _0xe9e856=document['querySelector']('#highlight-modal\x20.close-btn');_0xe9e856&&_0xe9e856[_0xd15a8c(0x11c)]('click',closeHighlightModal);const _0x59a56c=document['getElementById'](_0xd15a8c(0x1e3));_0x59a56c&&_0x59a56c[_0xd15a8c(0x11c)]('click',_0x1752a2=>{const _0x52c7c2=_0xd15a8c;_0x1752a2[_0x52c7c2(0x155)]===_0x59a56c&&closeHighlightModal();});const _0x5517fd=document['getElementById']('highlight-video-id');_0x5517fd&&_0x5517fd[_0xd15a8c(0x11c)]('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x3fc0ec=a4_0x5688ea;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x4ff634=document['getElementById'](_0x3fc0ec(0x1b0)),_0x272efc=document['getElementById'](_0x3fc0ec(0x142));_0x4ff634&&_0x4ff634['addEventListener']('click',()=>{const _0x69e551=_0x3fc0ec,_0x52748c=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x52748c][_0x69e551(0xf5)]-0x1);});_0x272efc&&_0x272efc['addEventListener']('click',()=>{const _0x22b278=_0x3fc0ec,_0x4b0519=currentLadder[_0x22b278(0x17b)]();loadMatchesData(matchesPagination[_0x4b0519]['page']+0x1);});const _0x1ff0cb=document['getElementById']('apply-matches-filters'),_0x470d09=document['getElementById']('reset-matches-filters');_0x1ff0cb&&_0x1ff0cb['addEventListener']('click',applyMatchesFilters);_0x470d09&&_0x470d09['addEventListener'](_0x3fc0ec(0x130),resetMatchesFilters);const _0x8de156=document['getElementById']('matches-search');_0x8de156&&_0x8de156['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x2eea2c=document['getElementById']('resimulate-match-btn');_0x2eea2c&&_0x2eea2c['addEventListener'](_0x3fc0ec(0x130),openResimulateModal);const _0x56e526=document['getElementById']('resimulate-modal');if(_0x56e526){const _0x3719fb=_0x56e526['querySelector']('.close');_0x3719fb&&_0x3719fb['addEventListener']('click',closeResimulateModal),_0x56e526['addEventListener'](_0x3fc0ec(0x130),_0x1a6bbc=>{_0x1a6bbc['target']===_0x56e526&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x3efd90=a4_0x5688ea;console[_0x3efd90(0xd4)]('Opening\x20create\x20test\x20match\x20modal');const _0x23bae7=document[_0x3efd90(0x2ab)]('create-test-match-modal'),_0x5d62fa=document['getElementById']('create-test-match-form');if(!_0x23bae7){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x5d62fa){console[_0x3efd90(0x13b)](_0x3efd90(0x2c2)),showNotification(_0x3efd90(0x2c2),'error');return;}_0x5d62fa['reset']();const _0x3b469d=document['querySelectorAll'](_0x3efd90(0x2db));let _0x475d1c=![];_0x3b469d['forEach'](_0x247f09=>{const _0x1bff0c=_0x3efd90;console['log'](_0x1bff0c(0x2d6),_0x247f09['value']),_0x247f09['value']===currentLadder&&(_0x247f09['checked']=!![],_0x475d1c=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x475d1c){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0xba601a=document['querySelector'](_0x3efd90(0xb5));_0xba601a&&(_0xba601a['checked']=!![],console['log'](_0x3efd90(0x26e)));}const _0x276ecc=document['getElementById']('test-match-date');if(_0x276ecc){const _0x5c474c=new Date()[_0x3efd90(0x1e5)]()['split']('T')[0x0];_0x276ecc[_0x3efd90(0x29a)]=_0x5c474c;}_0x23bae7['style'][_0x3efd90(0xa3)]='flex',_0x23bae7['style']['visibility']='visible',_0x23bae7['style'][_0x3efd90(0x2bb)]='1',_0x23bae7[_0x3efd90(0x16c)]['add']('active'),console['log'](_0x3efd90(0x1d2));const _0x553006=document[_0x3efd90(0x2ab)]('test-match-winner-username');_0x553006&&setTimeout(()=>{_0x553006['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x30425d=a4_0x5688ea;console['log'](_0x30425d(0x29b));const _0x766bbe=document[_0x30425d(0x2ab)]('create-test-match-modal');if(!_0x766bbe){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x766bbe[_0x30425d(0x16c)]['remove']('active'),_0x766bbe['style']['opacity']='0',_0x766bbe['style']['visibility']='hidden',setTimeout(()=>{const _0x39513c=_0x30425d;!_0x766bbe[_0x39513c(0x16c)]['contains']('active')&&(_0x766bbe[_0x39513c(0x2b9)]['display']=_0x39513c(0x10f));},0x12c),console[_0x30425d(0xd4)]('Modal\x20closed');}async function createTestMatch(){const _0x4c8d8d=a4_0x5688ea;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0xbaec6f=auth[_0x4c8d8d(0xe0)];if(!_0xbaec6f){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x381b84='D1',_0x1eb698=_0x4c8d8d(0x168),_0x311c5d={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x4c8d8d(0x1a8),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':_0x4c8d8d(0x16a),'approvedAt':Timestamp[_0x4c8d8d(0x183)](new Date()),'approvedBy':_0xbaec6f['email'],'createdAt':serverTimestamp(),'createdBy':_0xbaec6f['email'],'isTestMatch':!![],'ladder':_0x381b84,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0xbaec6f['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x1eb698),_0x311c5d),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0xadcd76){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0xadcd76),showNotification(_0x4c8d8d(0x28e)+_0xadcd76['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x3beb01=a4_0x5688ea;try{console['log']('Testing\x20Firebase\x20connection...'),console[_0x3beb01(0xd4)]('Auth:',auth),console[_0x3beb01(0xd4)]('DB:',db),console[_0x3beb01(0xd4)]('Current\x20user:',auth['currentUser']);const _0x44e152=collection(db,_0x3beb01(0x281));console['log'](_0x3beb01(0xae),_0x44e152);const _0x84ebd3=query(_0x44e152,where('username','==','nonexistent'));console['log'](_0x3beb01(0x2d7),_0x84ebd3);const _0x503be9=await getDocs(_0x84ebd3);console['log'](_0x3beb01(0x100),_0x503be9['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x439879){console[_0x3beb01(0x13b)]('Firebase\x20connection\x20test\x20failed:',_0x439879);}};function setupCreateTestMatchButton(){const _0x4e3773=a4_0x5688ea,_0x4b9b15=document['getElementById']('create-test-match-btn');if(!_0x4b9b15){console['error'](_0x4e3773(0x21c));return;}console['log'](_0x4e3773(0x272));const _0x18793e=_0x4b9b15['cloneNode'](!![]);_0x4b9b15['parentNode']['replaceChild'](_0x18793e,_0x4b9b15),_0x18793e[_0x4e3773(0x11c)]('click',function(_0x3c102b){const _0x42e45c=_0x4e3773;_0x3c102b['preventDefault'](),_0x3c102b[_0x42e45c(0x299)](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x454e62=0x1){const _0xa937bb=a4_0x5688ea,_0x43d10d=document['getElementById'](_0xa937bb(0xc6));if(!_0x43d10d)return;_0x43d10d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x481ba6=currentLadder['toLowerCase'](),_0x48004b=matchesPagination[_0x481ba6],_0x26393a=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x4d01b3=collection(db,_0x26393a);_0x454e62<=0x1?(_0x48004b[_0xa937bb(0xf5)]=0x1,_0x48004b[_0xa937bb(0x113)]=null,_0x48004b[_0xa937bb(0xbe)]=null):_0x48004b['page']=_0x454e62;const _0x22c0db=getMatchesFilters();let _0x256011=_0x4d01b3;if(_0x22c0db['startDate']||_0x22c0db['endDate']||_0x22c0db['searchTerm']){let _0x3b1e73=[];_0x22c0db['startDate']&&_0x22c0db['endDate']?(_0x3b1e73[_0xa937bb(0x298)](where('approvedAt','>=',_0x22c0db['startDate']),where(_0xa937bb(0x290),'<=',_0x22c0db['endDate'])),_0x256011=query(_0x4d01b3,..._0x3b1e73)):_0x256011=query(_0x4d01b3,orderBy(_0xa937bb(0x290),'desc'));}else _0x256011=query(_0x4d01b3,orderBy('approvedAt',_0xa937bb(0x141)));_0x454e62>0x1&&_0x48004b[_0xa937bb(0xbe)]?_0x256011=query(_0x256011,startAfter(_0x48004b['lastVisible']),limit(PAGE_SIZE)):_0x256011=query(_0x256011,limit(PAGE_SIZE));const _0x5474eb=await getDocs(_0x256011);!_0x5474eb[_0xa937bb(0x23f)]&&(_0x48004b[_0xa937bb(0x113)]=_0x5474eb[_0xa937bb(0x133)][0x0],_0x48004b['lastVisible']=_0x5474eb[_0xa937bb(0x133)][_0x5474eb['docs']['length']-0x1]);let _0x2f7507=![];if(!_0x5474eb[_0xa937bb(0x23f)]){const _0x5e568c=query(_0x256011,startAfter(_0x48004b['lastVisible']),limit(0x1)),_0xab2706=await getDocs(_0x5e568c);_0x2f7507=!_0xab2706[_0xa937bb(0x23f)];}const _0x768970=document[_0xa937bb(0x2ab)](_0xa937bb(0x1b0)),_0x3eb12a=document['getElementById'](_0xa937bb(0x142)),_0x534d3e=document['getElementById']('matches-page-indicator');if(_0x768970)_0x768970['disabled']=_0x48004b[_0xa937bb(0xf5)]<=0x1;if(_0x3eb12a)_0x3eb12a[_0xa937bb(0x99)]=!_0x2f7507;if(_0x534d3e)_0x534d3e['textContent']=_0xa937bb(0x268)+_0x48004b['page'];if(_0x5474eb['empty']){_0x43d10d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x43d10d[_0xa937bb(0x1bf)]='',_0x5474eb[_0xa937bb(0xe5)](_0x1a0c71=>{const _0x4b4a26=_0xa937bb,_0x536c24=_0x1a0c71['data'](),_0x41a178=document[_0x4b4a26(0x180)]('tr'),_0x29aa27=_0x536c24['approvedAt']?new Date(_0x536c24['approvedAt']['seconds']*0x3e8)[_0x4b4a26(0x1d3)]():'N/A';_0x41a178['setAttribute']('data-id',_0x1a0c71['id']),_0x41a178[_0x4b4a26(0x124)]('data-ladder',currentLadder),_0x41a178['classList']['add']('match-row'),_0x41a178['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x29aa27+_0x4b4a26(0x112)+(_0x536c24['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x536c24['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x536c24['winnerScore']||0x0)+'\x20-\x20'+(_0x536c24['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x536c24['mapPlayed']||'N/A')+_0x4b4a26(0x217)+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x1a0c71['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x1a0c71['id']+_0x4b4a26(0x12d),_0x43d10d['appendChild'](_0x41a178);}),setupMatchesActionButtons(),_0x22c0db['searchTerm']&&filterMatchesTable(),console[_0xa937bb(0xd4)]('Loaded\x20'+_0x5474eb['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x48004b['page']);}catch(_0x40027e){console['error']('Error\x20loading\x20matches:',_0x40027e),_0x43d10d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x40027e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x1e567e,_0x358a5e){const _0x257579=a4_0x5688ea;try{console['log']('Deleting\x20match\x20'+_0x1e567e+_0x257579(0x115)+_0x358a5e+'\x20ladder');const _0x419a62=auth[_0x257579(0xe0)];if(!_0x419a62){showNotification(_0x257579(0x25a),_0x257579(0x13b));return;}const _0x1eda4c=_0x358a5e==='D1'?_0x257579(0x168):_0x358a5e==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log'](_0x257579(0x258)+_0x1eda4c),showNotification(_0x257579(0xfd),_0x257579(0x22e)),await deleteDoc(doc(db,_0x1eda4c,_0x1e567e)),console['log'](_0x257579(0x118)),showNotification(_0x257579(0x118),'success');const _0x130190=_0x358a5e[_0x257579(0x17b)]();loadMatchesData(matchesPagination[_0x130190]['page']);}catch(_0x884ad6){console['error']('Error\x20deleting\x20match:',_0x884ad6),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x884ad6['message'],'error');}}function setupMatchesActionButtons(){const _0x16cd58=a4_0x5688ea;console[_0x16cd58(0xd4)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x2097f8=>{_0x2097f8['addEventListener']('click',_0x18d7b9=>{const _0xe5cd96=a4_0xeb46;_0x18d7b9['preventDefault'](),_0x18d7b9['stopPropagation']();const _0x189072=_0x18d7b9['currentTarget']['dataset']['id'],_0x4b9a72=_0x18d7b9[_0xe5cd96(0x123)]['closest']('tr'),_0x5121eb=_0x4b9a72['dataset']['ladder'];console[_0xe5cd96(0xd4)](_0xe5cd96(0xb0),_0x189072,_0x5121eb),openEditMatchModal(_0x189072,_0x5121eb);});}),document['querySelectorAll']('.delete-match-btn')[_0x16cd58(0xe5)](_0x57cb4f=>{const _0x2d499c=_0x16cd58;_0x57cb4f[_0x2d499c(0x11c)]('click',_0x43c120=>{const _0x4a697e=_0x2d499c;_0x43c120['preventDefault'](),_0x43c120['stopPropagation']();const _0x3334dc=_0x43c120['currentTarget']['dataset']['id'],_0x17f8b5=_0x43c120['currentTarget']['closest']('tr'),_0x3790c4=_0x17f8b5['dataset'][_0x4a697e(0x2b1)]||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x3334dc,_0x3790c4),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x3334dc,_0x3790c4);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x37668d=a4_0x5688ea,_0x26bd20=document['getElementById']('matches-search')['value'][_0x37668d(0x17b)](),_0x411975=document['querySelectorAll'](_0x37668d(0x285));let _0x31aecc=0x0;_0x411975['forEach'](_0x2d63e0=>{const _0x57bd85=_0x37668d;if(_0x2d63e0['classList']['contains'](_0x57bd85(0xa2))||_0x2d63e0['classList']['contains']('empty-state')||_0x2d63e0['classList'][_0x57bd85(0x279)]('error-state'))return;const _0x1b3e58=_0x2d63e0['cells'][0x1]['textContent']['toLowerCase'](),_0x583e45=_0x2d63e0['cells'][0x2]['textContent']['toLowerCase'](),_0x15f05c=_0x2d63e0['cells'][0x4]['textContent'][_0x57bd85(0x17b)]();_0x1b3e58[_0x57bd85(0x191)](_0x26bd20)||_0x583e45[_0x57bd85(0x191)](_0x26bd20)||_0x15f05c[_0x57bd85(0x191)](_0x26bd20)?(_0x2d63e0[_0x57bd85(0x2b9)]['display']='',_0x31aecc++):_0x2d63e0['style'][_0x57bd85(0xa3)]=_0x57bd85(0x10f);});if(_0x31aecc===0x0&&_0x411975['length']>0x0){const _0x289e12=document['getElementById'](_0x37668d(0xc6)),_0xf2e493=_0x289e12['querySelector']('.no-results');if(!_0xf2e493){const _0x5ed470=document[_0x37668d(0x180)]('tr');_0x5ed470[_0x37668d(0x11d)]='no-results',_0x5ed470['innerHTML']=_0x37668d(0x29c)+_0x26bd20+'\x27</td>',_0x289e12[_0x37668d(0x210)](_0x5ed470);}}else{const _0x227e68=document['querySelector']('.no-results');_0x227e68&&_0x227e68['remove']();}}function getMatchesFilters(){const _0xc0da5f=a4_0x5688ea,_0x57373c=document['getElementById']('matches-search')['value']['toLowerCase'](),_0xb5f7c0=document[_0xc0da5f(0x2ab)](_0xc0da5f(0x148))['value'],_0x3e9668=document['getElementById'](_0xc0da5f(0xe7))['value'];let _0x3d0999=null,_0x1e548c=null;return _0xb5f7c0&&(_0x3d0999=new Date(_0xb5f7c0),_0x3d0999[_0xc0da5f(0x292)](0x0,0x0,0x0,0x0),_0x3d0999=Timestamp['fromDate'](_0x3d0999)),_0x3e9668&&(_0x1e548c=new Date(_0x3e9668),_0x1e548c[_0xc0da5f(0x292)](0x17,0x3b,0x3b,0x3e7),_0x1e548c=Timestamp['fromDate'](_0x1e548c)),{'searchTerm':_0x57373c,'startDate':_0x3d0999,'endDate':_0x1e548c};}async function applyMatchesFilters(){const _0x4d04fd=currentLadder['toLowerCase']();matchesPagination[_0x4d04fd]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x3d0929=a4_0x5688ea;document[_0x3d0929(0x2ab)]('matches-start-date')['value']='',document['getElementById']('matches-end-date')['value']='',document[_0x3d0929(0x2ab)]('matches-search')[_0x3d0929(0x29a)]='';const _0x117aec=currentLadder['toLowerCase']();matchesPagination[_0x117aec]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x14e0c0,_0x460b9b){const _0x1ec7a5=a4_0x5688ea,_0x2a9a24=document['getElementById']('edit-match-modal');if(!_0x2a9a24)return;try{const _0x4e04f9=_0x460b9b==='D1'?'approvedMatches':_0x460b9b==='D2'?_0x1ec7a5(0x158):'approvedMatchesD3',_0xbf2578=doc(db,_0x4e04f9,_0x14e0c0),_0x1e754b=await getDoc(_0xbf2578);if(!_0x1e754b['exists']()){showNotification('Match\x20not\x20found',_0x1ec7a5(0x13b));return;}const _0xde0474=_0x1e754b['data']();document['getElementById'](_0x1ec7a5(0x188))['value']=_0x14e0c0,document['getElementById']('edit-match-ladder')[_0x1ec7a5(0x29a)]=_0x460b9b,document['getElementById']('edit-match-winner')['value']=_0xde0474['winnerUsername']||'',document['getElementById']('edit-match-winner-score')[_0x1ec7a5(0x29a)]=_0xde0474[_0x1ec7a5(0x2d4)]||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0xde0474['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0xde0474['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0xde0474[_0x1ec7a5(0xd5)]||'',document['getElementById'](_0x1ec7a5(0x244))['value']=_0xde0474['loserScore']||0x0,document['getElementById'](_0x1ec7a5(0x1cd))[_0x1ec7a5(0x29a)]=_0xde0474['loserSuicides']||0x0,document['getElementById']('edit-match-loser-comment')['value']=_0xde0474[_0x1ec7a5(0x2b5)]||'',document[_0x1ec7a5(0x2ab)]('edit-match-map')['value']=_0xde0474[_0x1ec7a5(0x1fd)]||'',document['getElementById']('edit-match-winner-demo')['value']=_0xde0474['winnerDemoLink']||'',document[_0x1ec7a5(0x2ab)](_0x1ec7a5(0x193))[_0x1ec7a5(0x29a)]=_0xde0474['loserDemoLink']||_0xde0474['demoLink']||'',document['getElementById']('edit-match-title')['textContent']=_0x1ec7a5(0x26d)+_0xde0474[_0x1ec7a5(0xf6)]+'\x20vs\x20'+_0xde0474[_0x1ec7a5(0xd5)],_0x2a9a24[_0x1ec7a5(0x16c)]['add']('active');}catch(_0x182a30){console['error'](_0x1ec7a5(0xe2),_0x182a30),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x3d4d07=a4_0x5688ea,_0x185ef1=document['getElementById']('edit-match-modal');_0x185ef1&&_0x185ef1[_0x3d4d07(0x16c)]['remove']('active');}async function saveEditedMatch(){const _0x1828cd=a4_0x5688ea;try{const _0x3284e7=document['getElementById']('edit-match-id')['value'],_0x396b08=document['getElementById']('edit-match-ladder')['value'];if(!_0x3284e7||!_0x396b08){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x1fbb7b=_0x396b08==='D1'?'approvedMatches':_0x396b08==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x49b3dc=document[_0x1828cd(0x2ab)]('edit-match-winner')['value']['trim'](),_0x56f662=parseInt(document[_0x1828cd(0x2ab)](_0x1828cd(0xca))[_0x1828cd(0x29a)]),_0x53125a=parseInt(document[_0x1828cd(0x2ab)]('edit-match-winner-suicides')['value']),_0x341fb2=document[_0x1828cd(0x2ab)](_0x1828cd(0x1df))['value']['trim'](),_0x564a00=document['getElementById'](_0x1828cd(0x225))['value'][_0x1828cd(0xee)](),_0xade789=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x43c9b7=parseInt(document[_0x1828cd(0x2ab)]('edit-match-loser-suicides')['value']),_0x3af61f=document['getElementById']('edit-match-loser-comment')['value'][_0x1828cd(0xee)](),_0xfca0b3=document['getElementById']('edit-match-map')['value']['trim'](),_0x1c7af1=document['getElementById']('edit-match-winner-demo')['value']['trim'](),_0x42beff=document[_0x1828cd(0x2ab)]('edit-match-loser-demo')['value']['trim']();if(!_0x49b3dc||!_0x564a00){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x1fbb7b,_0x3284e7),{'winnerUsername':_0x49b3dc,'winnerScore':_0x56f662,'winnerSuicides':_0x53125a,'winnerComment':_0x341fb2,'loserUsername':_0x564a00,'loserScore':_0xade789,'loserSuicides':_0x43c9b7,'loserComment':_0x3af61f,'mapPlayed':_0xfca0b3,'winnerDemoLink':_0x1c7af1||null,'loserDemoLink':_0x42beff||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x396b08['toLowerCase']()]['page']);}catch(_0x30f496){console['error'](_0x1828cd(0x1de),_0x30f496),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x30f496['message'],_0x1828cd(0x13b));}}async function openDeleteMatchModal(_0x59fe7f,_0x26b33c){const _0x47a689=a4_0x5688ea;try{const _0x177039=_0x26b33c==='D1'?_0x47a689(0x168):_0x26b33c==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5c706d=doc(db,_0x177039,_0x59fe7f),_0x45b872=await getDoc(_0x5c706d);if(!_0x45b872['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x1d4a48=_0x45b872['data'](),_0x36b9b5=document['getElementById']('delete-match-confirm-modal');_0x36b9b5['dataset']['matchId']=_0x59fe7f,_0x36b9b5[_0x47a689(0x106)][_0x47a689(0x2b1)]=_0x26b33c;const _0x1c7c42=_0x1d4a48['approvedAt']?new Date(_0x1d4a48['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x457fed=document['getElementById']('delete-match-summary');_0x457fed['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x1c7c42+_0x47a689(0x177)+_0x1d4a48['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x1d4a48[_0x47a689(0xd5)]+_0x47a689(0x28a)+(_0x1d4a48['winnerScore']||0x0)+_0x47a689(0x208)+(_0x1d4a48['loserScore']||0x0)+_0x47a689(0xcc)+(_0x1d4a48['mapPlayed']||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x26b33c+_0x47a689(0x197),_0x36b9b5[_0x47a689(0x16c)]['add'](_0x47a689(0x25d));}catch(_0x5cdc00){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x5cdc00),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x3c9f08=a4_0x5688ea,_0x280fc6=document['getElementById'](_0x3c9f08(0xab));_0x280fc6&&(_0x280fc6['classList']['remove'](_0x3c9f08(0x25d)),_0x280fc6['removeAttribute'](_0x3c9f08(0x111)),_0x280fc6['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x2dc009=a4_0x5688ea,_0x39821e=document['getElementById']('delete-match-confirm-modal'),_0x3daa5c=_0x39821e[_0x2dc009(0x106)]['matchId'],_0x4898c1=_0x39821e['dataset']['ladder'];if(!_0x3daa5c||!_0x4898c1){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0xa7ec4d=_0x4898c1==='D1'?_0x2dc009(0x168):_0x4898c1==='D2'?_0x2dc009(0x158):'approvedMatchesD3';await deleteDoc(doc(db,_0xa7ec4d,_0x3daa5c)),showNotification(_0x2dc009(0x118),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x4898c1['toLowerCase']()]['page']);}catch(_0x20fc5d){console['error'](_0x2dc009(0xd0),_0x20fc5d),showNotification(_0x2dc009(0x15a)+_0x20fc5d['message'],'error');}}async function saveHighlightChanges(){const _0x2fefa6=a4_0x5688ea,_0x59a396=document[_0x2fefa6(0x2ab)](_0x2fefa6(0x1ce))['value'],_0x48b0a3=document[_0x2fefa6(0x2ab)]('edit-highlight-type-select')['value'];let _0x49f347={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x48b0a3,'description':document['getElementById']('edit-highlight-description-input')[_0x2fefa6(0x29a)]['trim'](),'videoId':document['getElementById'](_0x2fefa6(0x176))['value']['trim'](),'submittedBy':auth['currentUser']['email']};if(_0x48b0a3===_0x2fefa6(0x265)){_0x49f347[_0x2fefa6(0x2d5)]=document['getElementById']('edit-highlight-matchInfo-input')[_0x2fefa6(0x29a)][_0x2fefa6(0xee)](),_0x49f347['map']=document['getElementById']('edit-highlight-map-input')[_0x2fefa6(0x29a)]['trim']();const _0x16f82e=document['getElementById'](_0x2fefa6(0x21f))['value'];_0x49f347[_0x2fefa6(0xbb)]=_0x16f82e?Timestamp['fromDate'](new Date(_0x16f82e)):null,_0x49f347['winnerName']=document[_0x2fefa6(0x2ab)]('edit-highlight-winnerName-input')[_0x2fefa6(0x29a)]['trim'](),_0x49f347['winnerScore']=document['getElementById'](_0x2fefa6(0xb3))[_0x2fefa6(0x29a)]['trim'](),_0x49f347['loserName']=document[_0x2fefa6(0x2ab)]('edit-highlight-loserName-input')[_0x2fefa6(0x29a)]['trim'](),_0x49f347['loserScore']=document['getElementById'](_0x2fefa6(0xc7))['value']['trim'](),_0x49f347['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x49f347['mapCreator']=null,_0x49f347[_0x2fefa6(0x22c)]=null,_0x49f347['creatorImageUrl']=null,_0x49f347['achievementPlayer']=null,_0x49f347['achievementType']=null,_0x49f347['achievementDetails']=null,_0x49f347['playerProfileUrl']=null;}else{if(_0x48b0a3==='creator')_0x49f347['map']=document[_0x2fefa6(0x2ab)]('edit-highlight-map-input')[_0x2fefa6(0x29a)]['trim'](),_0x49f347['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')[_0x2fefa6(0x29a)][_0x2fefa6(0xee)](),_0x49f347['mapVersion']=document[_0x2fefa6(0x2ab)]('edit-highlight-mapVersion-input')['value']['trim'](),_0x49f347['creatorImageUrl']=document[_0x2fefa6(0x2ab)]('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x49f347['matchInfo']=null,_0x49f347[_0x2fefa6(0xbb)]=null,_0x49f347['winnerName']=null,_0x49f347['winnerScore']=null,_0x49f347[_0x2fefa6(0x1a0)]=null,_0x49f347[_0x2fefa6(0x1b4)]=null,_0x49f347['matchLink']=null,_0x49f347[_0x2fefa6(0x1f4)]=null,_0x49f347['achievementType']=null,_0x49f347['achievementDetails']=null,_0x49f347[_0x2fefa6(0x1dc)]=null;else _0x48b0a3===_0x2fefa6(0x259)&&(_0x49f347['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')['value'][_0x2fefa6(0xee)](),_0x49f347['achievementType']=document[_0x2fefa6(0x2ab)](_0x2fefa6(0x211))['value'][_0x2fefa6(0xee)](),_0x49f347[_0x2fefa6(0x104)]=document['getElementById'](_0x2fefa6(0x274))['value']['trim'](),_0x49f347[_0x2fefa6(0x1dc)]=document[_0x2fefa6(0x2ab)](_0x2fefa6(0x224))['value'][_0x2fefa6(0xee)](),_0x49f347[_0x2fefa6(0x2d5)]=null,_0x49f347['map']=null,_0x49f347['matchDate']=null,_0x49f347[_0x2fefa6(0xf7)]=null,_0x49f347['winnerScore']=null,_0x49f347[_0x2fefa6(0x1a0)]=null,_0x49f347['loserScore']=null,_0x49f347['matchLink']=null,_0x49f347['mapCreator']=null,_0x49f347['mapVersion']=null,_0x49f347['creatorImageUrl']=null);}try{if(_0x59a396){_0x49f347[_0x2fefa6(0x1fc)]=serverTimestamp();const _0x4387fa=doc(db,'highlights',_0x59a396);await updateDoc(_0x4387fa,_0x49f347),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x49f347['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x2fefa6(0x14a)),_0x49f347),showNotification('Highlight\x20added\x20successfully!',_0x2fefa6(0x2a4));closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x4b3bfb){console['error']('Error\x20saving\x20highlight:',_0x4b3bfb),showNotification('Error\x20saving\x20highlight:\x20'+_0x4b3bfb[_0x2fefa6(0x160)],'error');}}async function resimulateMatch(){const _0x51c314=a4_0x5688ea;try{const _0x20b603=document[_0x51c314(0x2ab)]('resimulate-match-id')[_0x51c314(0x29a)];if(!_0x20b603){showNotification(_0x51c314(0x1ae),'error');return;}const _0x1a0dd2=auth['currentUser'];if(!_0x1a0dd2){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',_0x51c314(0x13b));return;}const _0x17e777=currentLadder==='D1'?_0x51c314(0x168):currentLadder==='D2'?_0x51c314(0x158):'approvedMatchesD3',_0x55f761=doc(db,_0x17e777,_0x20b603),_0x28d05c=await getDoc(_0x55f761);if(!_0x28d05c['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x5474af=_0x28d05c['data'](),_0x1f1ea3=_0x5474af['approvedAt']?_0x5474af[_0x51c314(0x290)]['toDate']()['toLocaleString']():_0x5474af['matchDate']?_0x5474af[_0x51c314(0xbb)][_0x51c314(0xa7)]?_0x5474af['matchDate']['toDate']()['toLocaleString']():new Date(_0x5474af[_0x51c314(0xbb)])['toLocaleString']():'Unknown',_0x5b9804='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20'+_0x5474af[_0x51c314(0xf6)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x5474af[_0x51c314(0xd5)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x5474af['winnerScore']+'-'+_0x5474af[_0x51c314(0x1b4)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x5474af['mapPlayed']||_0x5474af['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x1f1ea3+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x20b603+_0x51c314(0x153)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x5b9804,document[_0x51c314(0x2ab)](_0x51c314(0x297))['style'][_0x51c314(0xa3)]=_0x51c314(0x234),document['getElementById']('confirm-resimulate-btn')['style']['display']='block',window['pendingResimulateData']={'matchId':_0x20b603,'matchData':_0x5474af,'ladder':currentLadder},showNotification(_0x51c314(0xb9),'info');}catch(_0x570be4){console['error']('Error\x20finding\x20match:',_0x570be4),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x570be4[_0x51c314(0x160)],'error');}}async function confirmResimulateMatch(){const _0x31b327=a4_0x5688ea;try{const {matchId:_0x1ce36d,matchData:_0xee11ca,ladder:_0x5e233d}=window['pendingResimulateData'];if(!_0x1ce36d||!_0xee11ca){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x290473=_0x5e233d==='D1'?'players':_0x5e233d==='D2'?'playersD2':_0x31b327(0x149),_0x5cc686=_0x5e233d==='D1'?_0x31b327(0x169):_0x5e233d==='D2'?_0x31b327(0x108):'eloHistoryD3',[_0x4b80ac,_0x59904c]=await Promise['all']([getDocs(query(collection(db,_0x290473),where('username','==',_0xee11ca[_0x31b327(0xf6)]))),getDocs(query(collection(db,_0x290473),where('username','==',_0xee11ca['loserUsername'])))]);if(_0x4b80ac['empty']||_0x59904c['empty']){showNotification(_0x31b327(0x283),'error');return;}const _0x4ff8e6=_0x4b80ac['docs'][0x0]['id'],_0xb2e736=_0x59904c['docs'][0x0]['id'],_0x54e6ba=_0x4b80ac['docs'][0x0]['data'](),_0x4d5461=_0x59904c[_0x31b327(0x133)][0x0]['data'](),[_0x7f42e4,_0x3384ff]=await Promise['all']([getDocs(query(collection(db,_0x5cc686),where(_0x31b327(0x212),'==',_0x4ff8e6),where('matchId','==',_0x1ce36d))),getDocs(query(collection(db,_0x5cc686),where(_0x31b327(0x212),'==',_0xb2e736),where('matchId','==',_0x1ce36d)))]),_0x28a1b5=!_0x7f42e4['empty'],_0x2d7d4b=!_0x3384ff['empty'],_0x48009d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x28a1b5?_0x31b327(0x269):'❌\x20Missing')+_0x31b327(0xfb)+(_0x2d7d4b?_0x31b327(0x269):'❌\x20Missing')+_0x31b327(0xcd)+(_0x54e6ba['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x4d5461[_0x31b327(0x12e)]||'Unknown')+_0x31b327(0x19a)+(_0x54e6ba['position']||'Unknown')+_0x31b327(0x2be)+(_0x4d5461['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x48009d,document['getElementById']('validation-results-container')[_0x31b327(0x2b9)][_0x31b327(0xa3)]='block';if(_0x28a1b5&&_0x2d7d4b){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification(_0x31b327(0x2a7),_0x31b327(0x22e));const _0xc6ed9c=_0xee11ca['approvedAt']||_0xee11ca[_0x31b327(0xbb)]||serverTimestamp(),[_0x118acf,_0x56df7c]=await Promise['all']([getPlayerEloAtTime(_0x4ff8e6,_0xc6ed9c,_0x5cc686),getPlayerEloAtTime(_0xb2e736,_0xc6ed9c,_0x5cc686)]),{calculateElo:_0x4fff87}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x5ea864,newLoserRating:_0x368de2}=_0x4fff87(_0x118acf,_0x56df7c),_0x174ba4=_0x54e6ba['position']||Number['MAX_SAFE_INTEGER'],_0x35181a=_0x4d5461['position']||Number['MAX_SAFE_INTEGER'];let _0x28a2f8=_0x174ba4,_0x54e715=_0x35181a;_0x174ba4>_0x35181a&&(_0x28a2f8=_0x35181a,_0x54e715=_0x35181a+0x1);const _0x3ef401=writeBatch(db),_0x19da0f=doc(db,_0x290473,_0x4ff8e6);_0x3ef401['update'](_0x19da0f,{'eloRating':_0x5ea864,'position':_0x28a2f8,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x17a142=doc(db,_0x290473,_0xb2e736);_0x3ef401['update'](_0x17a142,{'eloRating':_0x368de2,'position':_0x54e715,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x174ba4>_0x35181a){const _0x49b59a=await getDocs(query(collection(db,_0x290473),where('position','>',_0x35181a),where(_0x31b327(0x267),'<',_0x174ba4)));_0x49b59a['forEach'](_0x32cfef=>{const _0x37c4e4=_0x31b327,_0x2aa280=doc(db,_0x290473,_0x32cfef['id']),_0x6a06fb=_0x32cfef['data']()['position'];_0x3ef401['update'](_0x2aa280,{'position':_0x6a06fb+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x37c4e4(0x23a),'positionAdjustedAt':serverTimestamp()});});}if(!_0x28a1b5){const _0x4f893d=doc(collection(db,_0x5cc686));_0x3ef401[_0x31b327(0xd3)](_0x4f893d,{'playerId':_0x4ff8e6,'player':_0xee11ca[_0x31b327(0xf6)],'previousElo':_0x118acf,'newElo':_0x5ea864,'eloChange':_0x5ea864-_0x118acf,'opponentId':_0xb2e736,'opponent':_0xee11ca['loserUsername'],'matchResult':_0x31b327(0x2a8),'previousPosition':_0x174ba4,'newPosition':_0x28a2f8,'positionChange':_0x28a2f8-_0x174ba4,'matchId':_0x1ce36d,'timestamp':_0xc6ed9c,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5e233d,'matchScore':_0xee11ca[_0x31b327(0x2d4)]+'-'+_0xee11ca[_0x31b327(0x1b4)],'mapPlayed':_0xee11ca['mapPlayed']||_0xee11ca[_0x31b327(0x262)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x2d7d4b){const _0x5d113a=doc(collection(db,_0x5cc686));_0x3ef401['set'](_0x5d113a,{'playerId':_0xb2e736,'player':_0xee11ca['loserUsername'],'previousElo':_0x56df7c,'newElo':_0x368de2,'eloChange':_0x368de2-_0x56df7c,'opponentId':_0x4ff8e6,'opponent':_0xee11ca['winnerUsername'],'matchResult':_0x31b327(0x221),'previousPosition':_0x35181a,'newPosition':_0x54e715,'positionChange':_0x54e715-_0x35181a,'matchId':_0x1ce36d,'timestamp':_0xc6ed9c,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5e233d,'matchScore':_0xee11ca['winnerScore']+'-'+_0xee11ca['loserScore'],'mapPlayed':_0xee11ca['mapPlayed']||_0xee11ca[_0x31b327(0x262)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x1f6155=_0x5e233d==='D1'?'approvedMatches':_0x5e233d==='D2'?_0x31b327(0x158):'approvedMatchesD3',_0x16fce6=doc(db,_0x1f6155,_0x1ce36d);_0x3ef401[_0x31b327(0x1af)](_0x16fce6,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x54e6ba['eloRating'],'originalLoserElo':_0x4d5461[_0x31b327(0x12e)],'originalWinnerPosition':_0x174ba4,'originalLoserPosition':_0x35181a,'resimulatedWinnerElo':_0x5ea864,'resimulatedLoserElo':_0x368de2,'resimulatedWinnerPosition':_0x28a2f8,'resimulatedLoserPosition':_0x54e715}),await _0x3ef401['commit']();const _0x2aa611=(!_0x28a1b5?0x1:0x0)+(!_0x2d7d4b?0x1:0x0),_0x5aeb83=_0x174ba4!==_0x28a2f8||_0x35181a!==_0x54e715;showNotification(_0x31b327(0x1eb)+(_0x31b327(0x246)+_0x2aa611+_0x31b327(0x216))+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x118acf+'→'+_0x5ea864+'\x20(+'+(_0x5ea864-_0x118acf)+_0x31b327(0xeb))+(_0x31b327(0x215)+_0x56df7c+'→'+_0x368de2+'\x20('+(_0x368de2-_0x56df7c)+_0x31b327(0x128))+(''+(_0x5aeb83?'Positions\x20updated:\x20Winner\x20'+_0x174ba4+'→'+_0x28a2f8+',\x20Loser\x20'+_0x35181a+'→'+_0x54e715:'No\x20position\x20changes\x20needed.')),_0x31b327(0x2a4)),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x5d8a11){console['error'](_0x31b327(0x161),_0x5d8a11),showNotification(_0x31b327(0x278)+_0x5d8a11['message'],'error');}}async function getPlayerEloAtTime(_0x32b47e,_0x586618,_0x28f095){const _0x35a741=a4_0x5688ea;try{const _0x3df7bb=_0x586618['toDate']?_0x586618['toDate']():new Date(_0x586618),_0x5a9d77=query(collection(db,_0x28f095),where('playerId','==',_0x32b47e),where('timestamp','<',_0x586618),orderBy(_0x35a741(0x1ef),'desc'),limit(0x1)),_0x39cb42=await getDocs(_0x5a9d77);if(!_0x39cb42['empty']){const _0x31c767=_0x39cb42[_0x35a741(0x133)][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x32b47e+_0x35a741(0x295)+_0x31c767[_0x35a741(0xc8)]),_0x31c767['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x32b47e+_0x35a741(0x2a5)),0x4b0;}catch(_0x40d90d){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x32b47e+':',_0x40d90d),0x4b0;}}function openResimulateModal(){const _0x4b39f4=a4_0x5688ea;console['log'](_0x4b39f4(0x11e));const _0x1cfd4d=document['getElementById']('resimulate-modal');console[_0x4b39f4(0xd4)](_0x4b39f4(0x266),_0x1cfd4d);if(!_0x1cfd4d){console['error']('Modal\x20element\x20not\x20found!');return;}_0x1cfd4d['style']['display']=_0x4b39f4(0x234),_0x1cfd4d['style']['visibility']='visible',_0x1cfd4d[_0x4b39f4(0x2b9)]['opacity']='1',_0x1cfd4d['classList'][_0x4b39f4(0x1a4)]('active'),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log']('Modal\x20computed\x20styles:',window[_0x4b39f4(0x97)](_0x1cfd4d)['display']);const _0x30812c=document['getElementById']('match-details-container'),_0x5f3a84=document[_0x4b39f4(0x2ab)](_0x4b39f4(0x29e)),_0x35d98b=document['getElementById']('confirm-resimulate-btn'),_0x3cea56=document['getElementById']('resimulate-match-id');if(_0x30812c)_0x30812c['innerHTML']='';if(_0x5f3a84)_0x5f3a84['innerHTML']='';if(_0x35d98b)_0x35d98b['style']['display']='none';if(_0x3cea56)_0x3cea56['value']='';console['log'](_0x4b39f4(0x264));}function closeResimulateModal(){const _0x3aa046=a4_0x5688ea;document[_0x3aa046(0x2ab)]('resimulate-modal')['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0x5688ea(0x27c)]=closeResimulateModal;async function loadPointsData(){const _0x245725=a4_0x5688ea;console[_0x245725(0xd4)]('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x245725(0x144),'success');}catch(_0xf893ce){console['error']('Error\x20loading\x20points\x20data:',_0xf893ce),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0xf893ce['message'],_0x245725(0x13b));}}function renderPointsOverview(_0x1f38ae){const _0x33e25c=a4_0x5688ea,_0x447bf5=document[_0x33e25c(0x2ab)]('points-overview-table-body');if(!_0x447bf5)return;if(_0x1f38ae['length']===0x0){_0x447bf5['innerHTML']=_0x33e25c(0xfa);return;}_0x447bf5[_0x33e25c(0x1bf)]='',_0x1f38ae['forEach'](_0x1c800d=>{const _0xffb0e2=_0x33e25c,_0x44573d=document['createElement']('tr'),_0x579052=_0x1c800d['displayName']||_0x1c800d['username']||'Unknown\x20User',_0xda7eb9=_0x1c800d[_0xffb0e2(0x2c3)]||'No\x20email',_0x259a9f=_0x1c800d[_0xffb0e2(0xe9)]||0x0,_0x20922f=_0x1c800d[_0xffb0e2(0x178)]?new Date(_0x1c800d['lastPointsModified']['seconds']*0x3e8)[_0xffb0e2(0x1d3)]():_0xffb0e2(0x22a);_0x44573d[_0xffb0e2(0x1bf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x579052+_0xffb0e2(0xb7)+_0xda7eb9+_0xffb0e2(0x20c)+(_0x259a9f>0x3e8?'high-points':_0x259a9f>0x1f4?'medium-points':_0xffb0e2(0x1fa))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x259a9f['toLocaleString']()+_0xffb0e2(0xc3)+_0x20922f+_0xffb0e2(0xf8)+_0x1c800d['id']+_0xffb0e2(0x2a3)+_0x1c800d['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x447bf5['appendChild'](_0x44573d);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x267326=a4_0x5688ea;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x10adfe=document['querySelectorAll'](_0x267326(0x1c3));console[_0x267326(0xd4)](_0x267326(0xe4)+_0x10adfe['length']+'\x20quick\x20edit\x20buttons'),_0x10adfe['forEach'](_0x6f84da=>{const _0x17f784=_0x6f84da['cloneNode'](!![]);_0x6f84da['parentNode']['replaceChild'](_0x17f784,_0x6f84da);});const _0xe3c719=document['querySelectorAll']('.view-history-btn');console['log'](_0x267326(0xe4)+_0xe3c719['length']+'\x20view\x20history\x20buttons'),_0xe3c719['forEach'](_0xf13d53=>{const _0x24939f=_0xf13d53['cloneNode'](!![]);_0xf13d53['parentNode']['replaceChild'](_0x24939f,_0xf13d53);}),document['querySelectorAll']('.quick-edit-btn')[_0x267326(0xe5)](_0x564096=>{_0x564096['addEventListener']('click',function(_0x20aae2){const _0x218d56=a4_0xeb46;_0x20aae2['preventDefault'](),_0x20aae2['stopPropagation']();const _0x489507=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x489507);if(!_0x489507){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style'][_0x218d56(0x2bb)]=_0x218d56(0xa4),setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x489507);});}),document['querySelectorAll'](_0x267326(0x12a))['forEach'](_0x3bc429=>{_0x3bc429['addEventListener']('click',function(_0x4e06f6){const _0x2a7a0e=a4_0xeb46;_0x4e06f6['preventDefault'](),_0x4e06f6[_0x2a7a0e(0x299)]();const _0x8e60d0=this[_0x2a7a0e(0x106)]['userId'];console['log'](_0x2a7a0e(0xa9),_0x8e60d0);if(!_0x8e60d0){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x2a7a0e(0x2b9)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x8e60d0);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x183307){const _0x3bacef=a4_0x5688ea;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x183307);const _0x480a3c=document['getElementById'](_0x3bacef(0xde));if(!_0x480a3c){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...',_0x3bacef(0x22e));const _0x504f6c=doc(db,'userProfiles',_0x183307),_0x4fc97e=await getDoc(_0x504f6c);if(!_0x4fc97e[_0x3bacef(0x23d)]()){showNotification('User\x20not\x20found','error');return;}const _0x13c19e=_0x4fc97e['data']();console[_0x3bacef(0xd4)](_0x3bacef(0x1c7),_0x13c19e);const _0x5188f3=document['getElementById'](_0x3bacef(0x18c)),_0x4bc5da=document[_0x3bacef(0x2ab)]('quick-edit-display-name'),_0x2d9c26=document['getElementById']('quick-edit-email'),_0x54bd5e=document[_0x3bacef(0x2ab)](_0x3bacef(0x116)),_0x5c1d63=document[_0x3bacef(0x2ab)]('quick-edit-points-form');if(!_0x5188f3||!_0x4bc5da||!_0x2d9c26||!_0x54bd5e||!_0x5c1d63){console[_0x3bacef(0x13b)](_0x3bacef(0xb2)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x5188f3[_0x3bacef(0x29a)]=_0x183307,_0x4bc5da[_0x3bacef(0xa0)]=_0x13c19e['displayName']||_0x13c19e['username']||'Unknown\x20User',_0x2d9c26['textContent']=_0x13c19e['email']||'No\x20email',_0x54bd5e['textContent']=(_0x13c19e[_0x3bacef(0xe9)]||0x0)['toLocaleString'](),_0x5c1d63['reset']();const _0x2670b9=document['getElementById'](_0x3bacef(0xb4));_0x2670b9&&(_0x2670b9[_0x3bacef(0x2a1)]=!![]);_0x480a3c[_0x3bacef(0x16c)]['add']('active'),console[_0x3bacef(0xd4)]('Modal\x20opened\x20successfully');const _0x1414a2=document['getElementById']('quick-points-amount');_0x1414a2&&setTimeout(()=>_0x1414a2['focus'](),0x64);}catch(_0x4aaf57){console['error'](_0x3bacef(0x248),_0x4aaf57),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x4aaf57['message'],_0x3bacef(0x13b));}}function closeQuickEditModal(){const _0x23241d=document['getElementById']('quick-edit-points-modal');_0x23241d&&_0x23241d['classList']['remove']('active');}async function handleQuickEditPoints(_0x49de8d){const _0x293ce7=a4_0x5688ea;_0x49de8d['preventDefault']();const _0x2edcf2=document[_0x293ce7(0x2ab)](_0x293ce7(0x18c))['value'],_0x182725=document[_0x293ce7(0x187)](_0x293ce7(0x110))['value'],_0x47e2f8=parseInt(document['getElementById']('quick-points-amount')['value']),_0x5dd160=document['getElementById']('quick-points-reason')['value']['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0x2edcf2,'action':_0x182725,'amount':_0x47e2f8,'reason':_0x5dd160});if(!_0x2edcf2||!_0x47e2f8||_0x47e2f8<0x0){showNotification(_0x293ce7(0x119),'error');return;}try{await modifyUserPoints(_0x2edcf2,_0x182725,_0x47e2f8,_0x5dd160),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x293ce7(0x2a4)),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x2edcf2);}catch(_0x5aa9b5){console['error'](_0x293ce7(0x1d1),_0x5aa9b5),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x5aa9b5['message'],_0x293ce7(0x13b));}}async function searchUsersForPoints(){const _0x5a4905=a4_0x5688ea,_0x1ae557=document['getElementById'](_0x5a4905(0x1d0))['value']['trim']()['toLowerCase'](),_0x1d6f25=document['getElementById']('user-search-results');if(!_0x1ae557||_0x1ae557['length']<0x2){_0x1d6f25['innerHTML']='';return;}_0x1d6f25[_0x5a4905(0x1bf)]='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x2052f2=collection(db,'userProfiles'),_0xc09dc7=await getDocs(_0x2052f2),_0x381ce8=[];_0xc09dc7['forEach'](_0x1d5cb8=>{const _0x46005e=_0x5a4905,_0x5a365e=_0x1d5cb8['data'](),_0x4d2dfb=(_0x5a365e['displayName']||_0x5a365e['username']||'')['toLowerCase'](),_0x370db2=(_0x5a365e[_0x46005e(0x2c3)]||'')['toLowerCase']();(_0x4d2dfb['includes'](_0x1ae557)||_0x370db2[_0x46005e(0x191)](_0x1ae557))&&_0x381ce8['push']({'id':_0x1d5cb8['id'],..._0x5a365e});});if(_0x381ce8[_0x5a4905(0x20d)]===0x0){_0x1d6f25['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x1d6f25[_0x5a4905(0x1bf)]='',_0x381ce8['forEach'](_0x2ccfd7=>{const _0x385b00=_0x5a4905,_0x47465a=document['createElement']('div');_0x47465a['className']='search-result-item',_0x47465a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x2ccfd7[_0x385b00(0x2b4)]||_0x2ccfd7['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x2ccfd7[_0x385b00(0x2c3)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x2ccfd7['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x47465a[_0x385b00(0x11c)]('click',()=>selectUserForPoints(_0x2ccfd7)),_0x1d6f25['appendChild'](_0x47465a);});}catch(_0x2746ad){console['error']('Error\x20searching\x20users:',_0x2746ad),_0x1d6f25[_0x5a4905(0x1bf)]='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x2c4aeb){const _0x45030e=a4_0x5688ea;document['getElementById']('selected-user-name')[_0x45030e(0xa0)]=_0x2c4aeb['displayName']||_0x2c4aeb['username']||_0x45030e(0x13a),document['getElementById']('selected-user-points')['textContent']=(_0x2c4aeb['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x2c4aeb['id'],document['getElementById']('selected-user-info')['style']['display']='block',document[_0x45030e(0x2ab)]('points-management-forms')['style'][_0x45030e(0xa3)]=_0x45030e(0x234),document['getElementById']('user-search-results')['innerHTML']='',document[_0x45030e(0x2ab)]('points-user-search')['value']='';}async function handleModifyPoints(_0x3fb6e7){const _0x953270=a4_0x5688ea;_0x3fb6e7[_0x953270(0xec)]();const _0x44d966=document['getElementById']('selected-user-id')['value'],_0x16cf4b=document['getElementById']('points-action')['value'],_0xbf35b9=parseInt(document['getElementById']('points-amount')[_0x953270(0x29a)]),_0x49d724=document[_0x953270(0x2ab)]('points-reason')['value']['trim']();if(!_0x44d966||!_0xbf35b9||_0xbf35b9<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x953270(0x13b));return;}try{await modifyUserPoints(_0x44d966,_0x16cf4b,_0xbf35b9,_0x49d724),document['getElementById']('modify-points-form')['reset']();const _0x540ff8=doc(db,'userProfiles',_0x44d966),_0xeeba89=await getDoc(_0x540ff8);if(_0xeeba89['exists']()){const _0x5d2c9b=_0xeeba89[_0x953270(0x1bd)]();document['getElementById']('selected-user-points')['textContent']=(_0x5d2c9b['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x3a02e6){console['error']('Error\x20modifying\x20points:',_0x3a02e6),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x3a02e6[_0x953270(0x160)],_0x953270(0x13b));}}async function loadPointsHistory(){const _0x4b2012=a4_0x5688ea,_0x1c8cd3=document['getElementById'](_0x4b2012(0x163));if(!_0x1c8cd3)return;_0x1c8cd3[_0x4b2012(0x1bf)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x306727=collection(db,'pointsHistory'),_0x3f133b=query(_0x306727,orderBy(_0x4b2012(0x1ef),'desc'),limit(0x32)),_0x16fde7=await getDocs(_0x3f133b);if(_0x16fde7['empty']){_0x1c8cd3['innerHTML']=_0x4b2012(0x2ad);return;}_0x1c8cd3[_0x4b2012(0x1bf)]='',_0x16fde7['forEach'](_0x5d6321=>{const _0x53ef2b=_0x4b2012,_0x5824cd=_0x5d6321['data'](),_0x876874=document['createElement']('tr'),_0x59528e=_0x5824cd['timestamp']?new Date(_0x5824cd[_0x53ef2b(0x1ef)]['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0xc3d592='';switch(_0x5824cd['action']){case'add':_0xc3d592='Added\x20'+_0x5824cd['amount']+'\x20points';break;case'subtract':_0xc3d592='Subtracted\x20'+_0x5824cd[_0x53ef2b(0x2b6)]+_0x53ef2b(0x157);break;case'set':_0xc3d592=_0x53ef2b(0x22b)+_0x5824cd['amount']+'\x20points';break;default:_0xc3d592=_0x5824cd['action']+'\x20'+_0x5824cd['amount']+'\x20points';}_0x876874['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x59528e+_0x53ef2b(0x249)+(_0x5824cd['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc3d592+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x5824cd[_0x53ef2b(0xe3)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5824cd['previousPoints']||0x0)+'\x20→\x20'+(_0x5824cd[_0x53ef2b(0x24d)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5824cd['reason']||'No\x20reason\x20provided')+_0x53ef2b(0x249)+(_0x5824cd['adminEmail']||_0x53ef2b(0x26f))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1c8cd3['appendChild'](_0x876874);});}catch(_0x105944){console['error'](_0x4b2012(0x1bc),_0x105944),_0x1c8cd3['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x105944[_0x4b2012(0x160)]+'</td></tr>';}}function filterPointsOverview(){const _0x16592e=a4_0x5688ea,_0x4c2ce3=document['getElementById'](_0x16592e(0x280))['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0xf5f134=window['allUsersPoints']['filter'](_0x5058f1=>{const _0x391ea9=(_0x5058f1['displayName']||_0x5058f1['username']||'')['toLowerCase'](),_0x172670=(_0x5058f1['email']||'')['toLowerCase']();return _0x391ea9['includes'](_0x4c2ce3)||_0x172670['includes'](_0x4c2ce3);});renderPointsOverview(_0xf5f134);}function sortPointsOverview(){const _0x2274e5=a4_0x5688ea,_0x33e5fb=document[_0x2274e5(0x2ab)]('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x3d69e6=[...window[_0x2274e5(0xff)]];switch(_0x33e5fb){case'points-desc':_0x3d69e6[_0x2274e5(0x201)]((_0x4168cc,_0x1665bb)=>(_0x1665bb['points']||0x0)-(_0x4168cc[_0x2274e5(0xe9)]||0x0));break;case'points-asc':_0x3d69e6[_0x2274e5(0x201)]((_0x2eeb7a,_0x551de3)=>(_0x2eeb7a['points']||0x0)-(_0x551de3['points']||0x0));break;case'name-asc':_0x3d69e6['sort']((_0x5c4a64,_0x31c004)=>{const _0x2ae7b6=_0x2274e5,_0x582d65=(_0x5c4a64[_0x2ae7b6(0x2b4)]||_0x5c4a64['username']||'')['toLowerCase'](),_0x5b919a=(_0x31c004['displayName']||_0x31c004['username']||'')['toLowerCase']();return _0x582d65['localeCompare'](_0x5b919a);});break;case'name-desc':_0x3d69e6['sort']((_0x5dabac,_0x14fbb7)=>{const _0xc0c66a=_0x2274e5,_0x3bde7d=(_0x5dabac['displayName']||_0x5dabac['username']||'')[_0xc0c66a(0x17b)](),_0x7684b8=(_0x14fbb7['displayName']||_0x14fbb7['username']||'')[_0xc0c66a(0x17b)]();return _0x7684b8['localeCompare'](_0x3bde7d);});break;}renderPointsOverview(_0x3d69e6);}async function handleAwardItem(_0xa1fe50){const _0x3d4bd1=a4_0x5688ea;_0xa1fe50['preventDefault']();const _0x13f080=document['getElementById']('selected-user-id')['value'],_0x563e49=document[_0x3d4bd1(0x2ab)]('store-item-select')['value'],_0x300c12=document[_0x3d4bd1(0x2ab)]('award-reason')[_0x3d4bd1(0x29a)]['trim']();if(!_0x13f080||!_0x563e49){showNotification(_0x3d4bd1(0x17f),'error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')[_0x3d4bd1(0xa8)]();}catch(_0x5346e6){console[_0x3d4bd1(0x13b)]('Error\x20awarding\x20item:',_0x5346e6),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x5346e6['message'],'error');}}async function loadUserPointsHistory(_0x536e14){const _0x51e447=a4_0x5688ea;try{const _0x4d39ff=collection(db,'pointsHistory'),_0x1f2087=query(_0x4d39ff,where(_0x51e447(0x223),'==',_0x536e14),orderBy('timestamp','desc')),_0x78b1b2=await getDocs(_0x1f2087);console['log']('Found\x20'+_0x78b1b2['size']+_0x51e447(0x198)+_0x536e14),showNotification('User\x20has\x20'+_0x78b1b2['size']+_0x51e447(0x20e),_0x51e447(0x22e));}catch(_0x6fe48c){console['error']('Error\x20loading\x20user\x20points\x20history:',_0x6fe48c),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x2eb56d=a4_0x5688ea;try{console['log'](_0x2eb56d(0x289));const _0x52c0d1=collection(db,'userProfiles'),_0x2a36da=await getDocs(_0x52c0d1);if(_0x2a36da['empty']){console[_0x2eb56d(0xd4)]('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0xf4babc=0x0,_0x227181=0x0;const _0x2f0e77=writeBatch(db);let _0x47616a=0x0;return console['log'](_0x2eb56d(0xe4)+_0x2a36da['size']+'\x20users\x20to\x20check...'),_0x2a36da[_0x2eb56d(0xe5)](_0x53abb4=>{const _0x204406=_0x2eb56d,_0x169c43=_0x53abb4['data']();_0x169c43[_0x204406(0xe9)]===undefined||_0x169c43['points']===null?(_0x2f0e77['update'](_0x53abb4['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0xf4babc++,_0x47616a++,console['log']('Queued\x20'+(_0x169c43['displayName']||_0x169c43['username']||_0x169c43['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x227181++,console[_0x204406(0xd4)]((_0x169c43['displayName']||_0x169c43['username']||_0x169c43['email']||'Unknown')+_0x204406(0x209)+_0x169c43['points'])),_0x47616a>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0xf4babc>0x0?(console[_0x2eb56d(0xd4)]('Committing\x20batch\x20update\x20for\x20'+_0xf4babc+_0x2eb56d(0xad)),await _0x2f0e77[_0x2eb56d(0x192)](),console['log']('✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0xf4babc+'\x20users')):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console[_0x2eb56d(0xd4)](_0x2eb56d(0x1e9)+_0x2a36da[_0x2eb56d(0xc4)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0xf4babc+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x227181),showNotification('Points\x20field\x20initialized\x20for\x20'+_0xf4babc+'\x20users.\x20'+_0x227181+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x2a36da['size'],'usersUpdated':_0xf4babc,'usersAlreadyHadPoints':_0x227181};}catch(_0xfefd90){console['error']('Error\x20initializing\x20points\x20field:',_0xfefd90),showNotification(_0x2eb56d(0x1b7)+_0xfefd90['message'],'error');throw _0xfefd90;}}function addPointsMigrationButton(){const _0x3a1bb7=a4_0x5688ea,_0x4547de=document['getElementById']('manage-points');if(!_0x4547de)return;if(document['getElementById']('migrate-points-btn'))return;const _0x5ea1cf=document['createElement']('div');_0x5ea1cf[_0x3a1bb7(0x11d)]=_0x3a1bb7(0x1f9),_0x5ea1cf[_0x3a1bb7(0x2b9)]['marginBottom']='20px',_0x5ea1cf['style']['padding']=_0x3a1bb7(0xda),_0x5ea1cf['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x5ea1cf['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x5ea1cf['style']['borderRadius']='5px',_0x5ea1cf[_0x3a1bb7(0x1bf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x5c6edc=_0x4547de[_0x3a1bb7(0x187)]('.section-header');_0x5c6edc&&_0x5c6edc['insertAdjacentElement']('afterend',_0x5ea1cf),document['getElementById']('migrate-points-btn')[_0x3a1bb7(0x11c)]('click',async function(){const _0x2f0b4b=_0x3a1bb7;if(confirm(_0x2f0b4b(0x19f))){this['disabled']=!![],this['innerHTML']=_0x2f0b4b(0x14e);try{await initializeUserPointsField(),this['innerHTML']='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x1ebfc9=_0x2f0b4b;_0x5ea1cf['style'][_0x1ebfc9(0xa3)]='none';},0xbb8);}catch(_0x3529d6){this[_0x2f0b4b(0x1bf)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x2f0b4b(0x99)]=![];}}});}function setupManagePointsSection(){const _0x57e354=a4_0x5688ea;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x23d6f9=document['getElementById'](_0x57e354(0x1d0));_0x23d6f9&&_0x23d6f9['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x529e78=document['getElementById']('modify-points-form');_0x529e78&&_0x529e78['addEventListener']('submit',handleModifyPoints);const _0x3b36ed=document['getElementById']('award-item-form');_0x3b36ed&&_0x3b36ed[_0x57e354(0x11c)]('submit',handleAwardItem);const _0x34721a=document[_0x57e354(0x2ab)]('points-overview-search');_0x34721a&&_0x34721a['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x40d4c5=document['getElementById'](_0x57e354(0x256));_0x40d4c5&&_0x40d4c5['addEventListener']('change',sortPointsOverview);const _0x46b297=document['getElementById'](_0x57e354(0x28d));_0x46b297&&_0x46b297['addEventListener']('click',loadPointsOverview);const _0x339db7=document[_0x57e354(0x2ab)](_0x57e354(0xde));if(_0x339db7){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0xe69701=_0x339db7['querySelector'](_0x57e354(0x98));_0xe69701?_0xe69701['addEventListener'](_0x57e354(0x130),function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console[_0x57e354(0x1b3)]('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0xa1d668=document[_0x57e354(0x2ab)]('cancel-quick-edit');_0xa1d668?_0xa1d668[_0x57e354(0x11c)](_0x57e354(0x130),function(){const _0x439e30=_0x57e354;console['log'](_0x439e30(0xf3)),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x1fedb5=document['getElementById']('quick-edit-points-form');_0x1fedb5?_0x1fedb5[_0x57e354(0x11c)]('submit',function(_0x3d781a){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x3d781a);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x339db7['addEventListener'](_0x57e354(0x130),function(_0x113ecf){const _0x57545a=_0x57e354;_0x113ecf[_0x57545a(0x155)]===_0x339db7&&(console['log']('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error'](_0x57e354(0x1f6));console[_0x57e354(0xd4)](_0x57e354(0xd2));}function setupManageRibbonsSection(){const _0x471ea0=a4_0x5688ea;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x33c3d1=document['getElementById']('ribbon-user-search');_0x33c3d1&&_0x33c3d1['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x5d50ba=document['getElementById'](_0x471ea0(0x2c0));_0x5d50ba&&_0x5d50ba[_0x471ea0(0x11c)]('click',searchRibbonUser);const _0x9e1218=document[_0x471ea0(0x2ab)]('add-ribbon-form');_0x9e1218&&_0x9e1218['addEventListener']('submit',addRibbon),_0x33c3d1&&_0x33c3d1[_0x471ea0(0x11c)]('keypress',function(_0x1cae64){const _0x468824=_0x471ea0;_0x1cae64['key']==='Enter'&&(_0x1cae64[_0x468824(0xec)](),searchRibbonUser());}),console['log'](_0x471ea0(0x1b9));}async function modifyUserPoints(_0x99677a,_0x34e47e,_0xd03c5,_0x313c27=''){const _0x5ae3f0=a4_0x5688ea,_0x424bf4=doc(db,'userProfiles',_0x99677a),_0x1eeb17=await getDoc(_0x424bf4);if(!_0x1eeb17[_0x5ae3f0(0x23d)]())throw new Error('User\x20not\x20found');const _0x5f107e=_0x1eeb17['data'](),_0x11adba=_0x5f107e['points']!==undefined?_0x5f107e['points']:0x0;_0x5f107e['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x5f107e['displayName']||_0x5f107e['email']||'Unknown')),await updateDoc(_0x424bf4,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x24947e=_0x11adba;switch(_0x34e47e){case _0x5ae3f0(0x1a4):_0x24947e=_0x11adba+_0xd03c5;break;case'subtract':_0x24947e=Math[_0x5ae3f0(0x255)](0x0,_0x11adba-_0xd03c5);break;case'set':_0x24947e=_0xd03c5;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x424bf4,{'points':_0x24947e,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x99677a,'userEmail':_0x5f107e['email']||'unknown','displayName':_0x5f107e[_0x5ae3f0(0x2b4)]||_0x5f107e['username']||_0x5ae3f0(0x13a),'action':_0x34e47e,'amount':_0xd03c5,'previousPoints':_0x11adba,'newPoints':_0x24947e,'reason':_0x313c27,'adminEmail':auth['currentUser'][_0x5ae3f0(0x2c3)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x2466b7=a4_0x5688ea,_0x49bffd=document['getElementById'](_0x2466b7(0x2ca));if(!_0x49bffd)return;_0x49bffd['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x1d4c5a=collection(db,_0x2466b7(0x1c1)),_0x598d8a=await getDocs(_0x1d4c5a);if(_0x598d8a['empty']){_0x49bffd['innerHTML']=_0x2466b7(0xfa);return;}const _0x4a7f5b=[];let _0x4e61ab=0x0;_0x598d8a['forEach'](_0x320b4b=>{const _0x525595=_0x2466b7,_0x58d590=_0x320b4b['data'](),_0x1f384b=_0x58d590['points']!==undefined?_0x58d590[_0x525595(0xe9)]:0x0;_0x58d590[_0x525595(0xe9)]===undefined&&_0x4e61ab++,_0x4a7f5b['push']({'id':_0x320b4b['id'],..._0x58d590,'points':_0x1f384b});}),_0x4e61ab>0x0&&(console[_0x2466b7(0xd4)]('Found\x20'+_0x4e61ab+_0x2466b7(0x1be)),showNotification(_0x4e61ab+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.',_0x2466b7(0x22e))),_0x4a7f5b['sort']((_0x3e53cb,_0x3bdb7a)=>(_0x3bdb7a['points']||0x0)-(_0x3e53cb[_0x2466b7(0xe9)]||0x0)),window['allUsersPoints']=_0x4a7f5b,renderPointsOverview(_0x4a7f5b);}catch(_0xbaa394){console['error'](_0x2466b7(0x150),_0xbaa394),_0x49bffd['innerHTML']=_0x2466b7(0x220)+_0xbaa394[_0x2466b7(0x160)]+_0x2466b7(0xaf);}}async function loadRibbonsData(){const _0x35a738=a4_0x5688ea,_0x5d9cb2=document['getElementById']('ribbons-overview-table-body');if(!_0x5d9cb2)return;_0x5d9cb2[_0x35a738(0x1bf)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x467fe9,_0x51cd51,_0x1b8094]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x35a738(0x293))),getDocs(collection(db,'playerRibbonsD3'))]);_0x5d9cb2['innerHTML']='';const _0xf9df27=(_0x1b9904,_0x1838fa)=>{_0x1b9904['forEach'](_0x22a186=>{const _0xe0bfdb=a4_0xeb46,_0x3d93ce=_0x22a186['data'](),_0x58e3a0=_0x3d93ce[_0xe0bfdb(0x24f)]||{},_0x50284a=Object[_0xe0bfdb(0xcf)](_0x58e3a0)['length'],_0xaaf6c5=document[_0xe0bfdb(0x180)]('tr');_0xaaf6c5['innerHTML']=_0xe0bfdb(0xd9)+(_0x3d93ce['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x1838fa[_0xe0bfdb(0x17b)]()+'\x22>'+_0x1838fa+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x50284a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3d93ce['lastUpdated']?new Date(_0x3d93ce['lastUpdated'][_0xe0bfdb(0x239)]*0x3e8)[_0xe0bfdb(0x1d3)]():_0xe0bfdb(0x1a7))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x3d93ce[_0xe0bfdb(0x2cf)]+_0xe0bfdb(0x29d)+_0x1838fa+_0xe0bfdb(0x273),_0x5d9cb2[_0xe0bfdb(0x210)](_0xaaf6c5);});};_0xf9df27(_0x467fe9,'D1'),_0xf9df27(_0x51cd51,'D2'),_0xf9df27(_0x1b8094,'D3'),document['querySelectorAll'](_0x35a738(0x2aa))['forEach'](_0xd2d904=>{_0xd2d904['addEventListener']('click',function(){const _0x227d57=a4_0xeb46,_0xe6da12=this['dataset']['username'],_0x38451a=this['dataset'][_0x227d57(0x2b1)];editUserRibbons(_0xe6da12,_0x38451a);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x134f68){console['error']('Error\x20loading\x20ribbons:',_0x134f68),_0x5d9cb2['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x35a738(0x114),'error');}}async function searchRibbonUser(){const _0x56f843=a4_0x5688ea,_0x385f5a=document['getElementById'](_0x56f843(0x1f2))['value'][_0x56f843(0xee)]();if(!_0x385f5a){showNotification(_0x56f843(0x1ca),'error');return;}try{const [_0x542f2f,_0x390be7,_0x52c3a1]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x385f5a)),getDoc(doc(db,'playerRibbonsD2',_0x385f5a)),getDoc(doc(db,_0x56f843(0xf4),_0x385f5a))]);let _0x2438be=null,_0x3a4b28=null;if(_0x542f2f[_0x56f843(0x23d)]())_0x2438be='D1',_0x3a4b28=_0x542f2f[_0x56f843(0x1bd)]();else{if(_0x390be7['exists']())_0x2438be='D2',_0x3a4b28=_0x390be7['data']();else _0x52c3a1['exists']()&&(_0x2438be='D3',_0x3a4b28=_0x52c3a1[_0x56f843(0x1bd)]());}_0x2438be?(document[_0x56f843(0x2ab)]('current-ribbon-user')[_0x56f843(0xa0)]=_0x385f5a,document['getElementById']('ribbon-target-user')['value']=_0x385f5a,document['getElementById']('ribbon-target-ladder')['value']=_0x2438be,document['getElementById']('user-ribbon-management')['style']['display']=_0x56f843(0x234),displayCurrentRibbons(_0x3a4b28['ribbons']||{}),showNotification('Found\x20'+_0x385f5a+'\x20in\x20'+_0x2438be+'\x20ladder',_0x56f843(0x2a4))):showNotification(_0x56f843(0x2bd)+_0x385f5a+'\x20not\x20found\x20in\x20any\x20ladder',_0x56f843(0x13b));}catch(_0x2d25e7){console['error']('Error\x20searching\x20user:',_0x2d25e7),showNotification(_0x56f843(0x196),_0x56f843(0x13b));}}function displayCurrentRibbons(_0x4a250f){const _0x5a9944=a4_0x5688ea,_0x4c5d7c=document[_0x5a9944(0x2ab)]('current-ribbons-list');if(!_0x4c5d7c)return;_0x4c5d7c['innerHTML']='';if(Object['keys'](_0x4a250f)['length']===0x0){_0x4c5d7c[_0x5a9944(0x1bf)]='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x4a250f)['forEach'](([_0x306ed7,_0x95734])=>{const _0x6aa864=_0x5a9944,_0x4a0b57=document[_0x6aa864(0x180)](_0x6aa864(0x1e8));_0x4a0b57[_0x6aa864(0x11d)]=_0x6aa864(0xac),_0x4a0b57[_0x6aa864(0x1bf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x306ed7+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x95734['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x95734['awardedAt']?new Date(_0x95734['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+_0x6aa864(0xc9)+_0x306ed7+_0x6aa864(0x1ac),_0x4c5d7c['appendChild'](_0x4a0b57);}),document['querySelectorAll']('.remove-ribbon-btn')[_0x5a9944(0xe5)](_0x581619=>{const _0x49fe95=_0x5a9944;_0x581619[_0x49fe95(0x11c)]('click',function(){const _0x32844d=_0x49fe95,_0x67f240=this['dataset'][_0x32844d(0xce)];removeRibbon(_0x67f240);});});}async function addRibbon(_0x1a3cd4){const _0x2011c5=a4_0x5688ea;_0x1a3cd4['preventDefault']();const _0x4b6587=document['getElementById']('ribbon-target-user')['value'],_0xc1e47f=document['getElementById']('ribbon-target-ladder')['value'],_0x4eceb7=document['getElementById']('ribbon-type-select')['value'],_0x4ff3d2=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x4b6587||!_0xc1e47f||!_0x4eceb7||!_0x4ff3d2){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x226ee2='playerRibbons'+(_0xc1e47f==='D1'?'':_0xc1e47f),_0x37db54=doc(db,_0x226ee2,_0x4b6587),_0x5d20bc=await getDoc(_0x37db54),_0x3e49b7=_0x5d20bc['exists']()?_0x5d20bc['data']()['ribbons']||{}:{};_0x3e49b7[_0x4eceb7]={'level':_0x4ff3d2,'awardedAt':serverTimestamp()},await setDoc(_0x37db54,{'username':_0x4b6587,'ladder':_0xc1e47f,'ribbons':_0x3e49b7,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x2011c5(0x277)+_0x4eceb7+'\x20Level\x20'+_0x4ff3d2+_0x2011c5(0x229)+_0x4b6587,'success'),displayCurrentRibbons(_0x3e49b7),document[_0x2011c5(0x2ab)]('ribbon-type-select')[_0x2011c5(0x29a)]='',document[_0x2011c5(0x2ab)]('ribbon-level')[_0x2011c5(0x29a)]='1';}catch(_0x36429f){console[_0x2011c5(0x13b)]('Error\x20adding\x20ribbon:',_0x36429f),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x5a23f3){const _0x37f388=a4_0x5688ea,_0x5442e0=document[_0x37f388(0x2ab)](_0x37f388(0x2bf))['value'],_0x33de25=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x5a23f3+'\x20from\x20'+_0x5442e0+'?'))return;try{const _0x964e27='playerRibbons'+(_0x33de25==='D1'?'':_0x33de25),_0x250e35=doc(db,_0x964e27,_0x5442e0),_0x22d169=await getDoc(_0x250e35),_0x5a2671=_0x22d169[_0x37f388(0x23d)]()?_0x22d169['data']()['ribbons']||{}:{};delete _0x5a2671[_0x5a23f3],await setDoc(_0x250e35,{'username':_0x5442e0,'ladder':_0x33de25,'ribbons':_0x5a2671,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x5a23f3+_0x37f388(0x115)+_0x5442e0,'success'),displayCurrentRibbons(_0x5a2671);}catch(_0x43ad73){console['error']('Error\x20removing\x20ribbon:',_0x43ad73),showNotification('Error\x20removing\x20ribbon',_0x37f388(0x13b));}}function editUserRibbons(_0x803fa0,_0xf78f3b){const _0x4a3e38=a4_0x5688ea;document[_0x4a3e38(0x2ab)]('ribbon-user-search')[_0x4a3e38(0x29a)]=_0x803fa0,searchRibbonUser();}