const a25A=a25b;(function(a,b){const z=a25b,c=a();while(!![]){try{const d=parseInt(z(0x17b))/0x1*(parseInt(z(0x189))/0x2)+-parseInt(z(0x19e))/0x3*(parseInt(z(0x16b))/0x4)+parseInt(z(0x1a4))/0x5*(-parseInt(z(0x1a2))/0x6)+-parseInt(z(0x19f))/0x7*(parseInt(z(0x191))/0x8)+parseInt(z(0x16e))/0x9+parseInt(z(0x187))/0xa*(parseInt(z(0x174))/0xb)+parseInt(z(0x190))/0xc;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a25a,0x4ffbd));import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';function a25b(a,b){const c=a25a();return a25b=function(d,e){d=d-0x166;let f=c[d];if(a25b['QUCjBW']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a25b['AybGsI']=g,a=arguments,a25b['QUCjBW']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a25b['AybGsI'](f),a[i]=f):f=j,f;},a25b(a,b);}let currentLadder='D1';document[a25A(0x167)](a25A(0x196),()=>{const B=a25A,a=document['getElementById'](B(0x1a6)),b=document['getElementById'](B(0x177));console[B(0x199)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!a),console[B(0x199)](B(0x175),!!b);function c(){const C=B;document[C(0x171)](C(0x178))['forEach'](e=>{const D=C;e[D(0x167)]('change',f=>{const E=D;f[E(0x16c)][E(0x193)]&&(currentLadder=f['target'][E(0x182)],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}c();const d=document[B(0x170)](B(0x1a9));d&&d[B(0x167)](B(0x1a7),handleJoinLadder),onAuthStateChanged(auth,e=>{const F=B;if(e)checkUserLadderStatus();else{const f=document[F(0x170)]('ladder-join-prompt');f&&(f[F(0x17c)]['display']=F(0x179));}});});function a25a(){const L=['vxnLCM5HBwuGzg9LC24NDcbTyxrJAc4GugXLyxnLigvUDgvYici','re9nq29UDgvUDeXVywrLza','BgfKzgvYlwPVAw4TC3rHDhvZigvYCM9Y','CgXHEwvYCW','Bg9N','zxHPC3rZ','lcbKzwzHDwX0Aw5NihrVieqX','AM9PBI1SywrKzxiTDhLWzq','vMvYAwz5Aw5NihvZzxjUyw1LlI4U','m0rYDe1OtW','mJmWmJe2AxjYBKDU','rfvp','CgXHEwvYC0nurG','ntGYufbMr25w','rxjYB3iGAM9PBMLUzYbSywrKzxi6','nJm5nuDtsejHAW','igXHzgrLCIeGvgHLihbHz2uGD2LSBcbYzwzYzxnOlI4U','zdeTC3DPDgnO','y2XPy2S','CgXHEwvYC0qZ','AM9PBI1SywrKzxiTyNv0Dg9U','zgLZCgXHEq','zgLZywjSzwq','ywrKrxzLBNrmAxn0zw5LCG','CMvSB2fK','Cg9ZAxrPB24','qxv0AgvUDgLJyxrPB24GDMvYAwzPy2f0Aw9UigzHAwXLzdO','mJi3nJe4oevJzvf1BW','DgfYz2v0','zw1HAwW','mtiZntyZn1jPveHgEq','q1rg','z2v0rwXLBwvUDej5swq','CxvLCNLtzwXLy3rVCKfSBa','BgfKzgvYlwPVAw4TC3rHDhvZ','igXHzgrLCI4UlG','mtfRzgjWDw0','tgfKzgvYigPVAw46ieqYihjHzgLVigzVDw5KoG','z2v0swruB2TLBG','zdiTC3DPDgnO','Aw5WDxrBBMfTzt0IBgfKzgvYiL0','BM9Uzq','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguG','mujwqKjvqq','C3r5Bgu','BgfKzgvYlwPVAw4TChjVBxb0','y2XHC3noyw1L','Dgv4DenVBNrLBNq','y3vYCMvUDfvZzxi','CgXHEwvYC0qY','DMfSDwu','DwLK','CgXHEwvYC0r1B3m','zgf0yq','DgLUEs1QB2LUlwj1DhrVBG','ntq2mZaXmhvkrwXrzG','zxjYB3i','mtiZmJG2mNHVugXtwG','DhjPBq','Dg9vChbLCKnHC2u','rfvpuW','zg9JCW','Dg9mB3DLCKnHC2u','C3bSAxq','mtC3odKWneTvsxjytG','mta0sgHKuLrb','q2HLy2TPBMCGDxnLCIbZDgf0DxmGzM9YigXHzgrLCJO','y2HLy2TLza','BwvZC2fNzq'];a25a=function(){return L;};return a25a();}function getCollectionName(a){const G=a25A;switch(a?.[G(0x18b)]()){case'D1':return'players';case'D2':return G(0x181);case'D3':return G(0x1a8);case G(0x18c):case G(0x1a0):return'playersDuos';case G(0x16f):return G(0x1a1);default:console['warn']('Unknown\x20ladder\x20type:\x20'+a+G(0x19b));return G(0x198);}}async function checkUserLadderStatus(){const H=a25A;console['log'](H(0x192),currentLadder);const a=auth[H(0x180)],b=document[H(0x170)](H(0x17d)),c=document['getElementById'](H(0x19c)),d=document['getElementById'](H(0x186));if(!a||!a[H(0x183)]||!b||!c||!d){if(b)b[H(0x17c)]['display']='none';if(d)d[H(0x17c)][H(0x1aa)]=H(0x179);return;}try{try{await a['getIdToken'](![]);}catch(h){console['error'](H(0x16a),h),b[H(0x17c)]['display']='none',d['style'][H(0x1aa)]=H(0x179);return;}const e=getCollectionName(currentLadder),f=doc(db,e,a[H(0x183)]),g=await getDoc(f);if(g[H(0x19a)]())b[H(0x17c)]['display']=H(0x179),d[H(0x17c)][H(0x1aa)]='none';else{b[H(0x17c)]['display']=H(0x179),d[H(0x17c)][H(0x1aa)]='block',c[H(0x17f)]=currentLadder,d['onclick']=()=>{const I=H;b[I(0x17c)]['display']==='block'?b[I(0x17c)]['display']=I(0x179):b['style']['display']='block';};const i=document[H(0x170)]('join-username-input'),j=document['getElementById'](H(0x172));if(i)i['value']='';j&&(j[H(0x17f)]='',j['className']='ladder-join-status');}}catch(k){console[H(0x188)]('Error\x20checking\x20ladder\x20status:',k),b['style'][H(0x1aa)]='none',d['style'][H(0x1aa)]=H(0x179);}}async function handleJoinLadder(){const J=a25A,a=auth[J(0x180)],b=document[J(0x170)]('join-ladder-button'),c=document[J(0x170)](J(0x172)),d=document['getElementById']('join-username-input');if(!a||!a[J(0x183)]){c[J(0x17f)]='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',c['className']=J(0x197);return;}try{await a['getIdToken'](!![]);}catch(e){console['error']('Authentication\x20error:',e),c[J(0x17f)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',c['className']=J(0x197);return;}if(!d||!d['value']['trim']()){c['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',c['className']=J(0x197);return;}try{b['disabled']=!![],c['textContent']=J(0x19d),c[J(0x17e)]='ladder-join-status\x20loading';let f='',g=null;const h=[J(0x198),J(0x181),'playersD3',J(0x184),J(0x1a1),'nonParticipants'];for(const s of h){try{const t=doc(db,s,a['uid']),u=await getDoc(t);if(u['exists']()){g=u['data']();if(g['username']){f=g['username'];break;}}}catch(v){console['error']('Error\x20checking\x20'+s+':',v);}}!f&&a['email']&&(f=a[J(0x16d)][J(0x18f)]('@')[0x0]);if(!f){c[J(0x17f)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',c[J(0x17e)]=J(0x197),b['disabled']=![];return;}const i=d['value'][J(0x18a)]();if(f&&i[J(0x18e)]()!==f['toLowerCase']()){c[J(0x17f)]=J(0x195)+f+'\x22\x20to\x20confirm.',c['className']=J(0x197),b['disabled']=![];return;}c['textContent']='Joining\x20'+currentLadder+J(0x173);const j=getCollectionName(currentLadder),k=doc(db,j,a['uid']),l=await getDoc(k);if(l[J(0x19a)]()){c[J(0x17f)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',c[J(0x17e)]=J(0x197),b['disabled']=![];return;}try{await a[J(0x176)](!![]);}catch(w){c['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',c[J(0x17e)]='ladder-join-status\x20error',b[J(0x166)]=![];return;}const m=f,n=collection(db,j),o=query(n,orderBy('position','desc'),limit(0x1)),p=await getDocs(o);let q=0x1;if(!p['empty']){const x=p[J(0x18d)][0x0][J(0x185)]();q=(x[J(0x169)]||0x0)+0x1;}const r={'username':m,'email':a['email'],'eloRating':0x4b0,'position':q,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(k,r),currentLadder==='DUOS'?c[J(0x17f)]='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':c['textContent']=J(0x17a)+currentLadder+J(0x1a5),c[J(0x17e)]='ladder-join-status\x20success',setTimeout(()=>{const K=J;window['location'][K(0x168)]();},0x7d0);}catch(y){console[J(0x188)](J(0x1a3),y),c[J(0x17f)]='Error\x20joining\x20ladder:\x20'+y[J(0x194)],c['className']=J(0x197),b['disabled']=![];}}