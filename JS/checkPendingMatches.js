const a10_0x4944c8=a10_0x206e,a10_0x4fdcb4=(function(){let _0x4786c2=!![];return function(_0x10b53c,_0x1ced45){const _0x1fea10=_0x4786c2?function(){if(_0x1ced45){const _0x361477=_0x1ced45['apply'](_0x10b53c,arguments);return _0x1ced45=null,_0x361477;}}:function(){};return _0x4786c2=![],_0x1fea10;};}()),a10_0x5bd76f=a10_0x4fdcb4(this,function(){const _0x2bb6e9=a10_0x206e;let _0x26d7c6;try{const _0x2c1f13=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x26d7c6=_0x2c1f13();}catch(_0x401ec6){_0x26d7c6=window;}const _0x281344=_0x26d7c6['console']=_0x26d7c6['console']||{},_0x5618ee=['log','warn','info','error','exception','table',_0x2bb6e9(0xe8)];for(let _0x45af7d=0x0;_0x45af7d<_0x5618ee[_0x2bb6e9(0xd4)];_0x45af7d++){const _0x304b86=a10_0x4fdcb4['constructor']['prototype']['bind'](a10_0x4fdcb4),_0x2952da=_0x5618ee[_0x45af7d],_0x59646a=_0x281344[_0x2952da]||_0x304b86;_0x304b86['__proto__']=a10_0x4fdcb4[_0x2bb6e9(0xe6)](a10_0x4fdcb4),_0x304b86['toString']=_0x59646a['toString']['bind'](_0x59646a),_0x281344[_0x2952da]=_0x304b86;}});a10_0x5bd76f();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10_0x4944c8(0xec),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x5710af=![]){const _0x43b25b=a10_0x4944c8,_0x500a4e=Date['now'](),_0x5b0a02=checkNotificationCache();if(_0x5b0a02!==null&&!_0x5710af){updateNotificationDot(_0x5b0a02);if(_0x500a4e-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x500a4e;const _0x433896=auth['currentUser'];if(!_0x433896){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x78958,_0x414425,_0x49304c]=await Promise[_0x43b25b(0xdc)]([checkForPendingMatchesInCollection(_0x433896,'pendingMatches'),checkForPendingMatchesInCollection(_0x433896,_0x43b25b(0xe2)),checkForPendingMatchesInCollection(_0x433896,'pendingMatchesD3')]),_0xad01aa=_0x78958||_0x414425||_0x49304c;updateNotificationDot(_0xad01aa),updateNotificationCache(_0xad01aa);}catch(_0x45a649){console[_0x43b25b(0xee)](_0x43b25b(0xe3),_0x45a649);}}async function checkForPendingMatchesInCollection(_0x2402c0,_0x1bac47){const _0x3837c2=a10_0x4944c8,_0x25a7e6=_0x2402c0[_0x3837c2(0xd9)],_0x7ef3a4=_0x2402c0['email'],_0x105f3d=query(collection(db,_0x1bac47),where(_0x3837c2(0xde),'==',_0x25a7e6),where('approved','==',![])),_0x17a718=await getDocs(_0x105f3d);if(!_0x17a718['empty'])return!![];if(_0x7ef3a4){const _0x4afce8=query(collection(db,_0x1bac47),where('winnerEmail','==',_0x7ef3a4),where('approved','==',![])),_0x51bcf0=await getDocs(_0x4afce8);if(!_0x51bcf0['empty'])return!![];}let _0x1ca36b=await getUsernameFromAllSources(_0x2402c0);if(_0x1ca36b){const _0x3784ad=query(collection(db,_0x1bac47),where(_0x3837c2(0xd2),'==',_0x1ca36b),where(_0x3837c2(0xdb),'==',![])),_0x54c12f=await getDocs(_0x3784ad);if(!_0x54c12f['empty'])return!![];}return![];}function a10_0x206e(_0x3a463a,_0x53ecb5){const _0x5bd76f=a10_0x52a2();return a10_0x206e=function(_0x4fdcb4,_0x112e27){_0x4fdcb4=_0x4fdcb4-0xd2;let _0x52a254=_0x5bd76f[_0x4fdcb4];return _0x52a254;},a10_0x206e(_0x3a463a,_0x53ecb5);}async function getUsernameFromAllSources(_0x2d548f){const _0x4b477b=a10_0x4944c8,_0x2762dc=localStorage['getItem'](_0x4b477b(0xe5));if(_0x2762dc)return _0x2762dc;try{const [_0x228485,_0x3e476d,_0x450673]=await Promise[_0x4b477b(0xdc)]([getDocs(query(collection(db,'players'),where('userId','==',_0x2d548f['uid']))),getDocs(query(collection(db,_0x4b477b(0xda)),where('userId','==',_0x2d548f['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x2d548f['uid'])))]);if(!_0x228485['empty']){const _0x733fd2=_0x228485['docs'][0x0]['data']()['username'];return localStorage[_0x4b477b(0xe4)](_0x4b477b(0xe5),_0x733fd2),_0x733fd2;}if(!_0x3e476d[_0x4b477b(0xd8)]){const _0x560920=_0x3e476d['docs'][0x0][_0x4b477b(0xdf)]()['username'];return localStorage['setItem'](_0x4b477b(0xe5),_0x560920),_0x560920;}if(!_0x450673['empty']){const _0x12634c=_0x450673['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x12634c),_0x12634c;}const _0x1453d6=await getDoc(doc(db,'users',_0x2d548f[_0x4b477b(0xd9)]));if(_0x1453d6['exists']()&&_0x1453d6[_0x4b477b(0xdf)]()['username']){const _0x1bf540=_0x1453d6[_0x4b477b(0xdf)]()['username'];return localStorage['setItem'](_0x4b477b(0xe5),_0x1bf540),_0x1bf540;}}catch(_0x112086){console['error'](_0x4b477b(0xea),_0x112086);}if(_0x2d548f['email'])return _0x2d548f[_0x4b477b(0xd3)]['split']('@')[0x0];return null;}function updateNotificationCache(_0x4184a4){const _0xfba91=a10_0x4944c8,_0x1aad80={'status':_0x4184a4,'timestamp':Date[_0xfba91(0xe7)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0xfba91(0xed)](_0x1aad80));}function checkNotificationCache(){const _0x3061af=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x3061af)return null;try{const {status:_0xa264b3,timestamp:_0x18e901}=JSON['parse'](_0x3061af),_0x4eb2fc=Date['now']();if(_0x4eb2fc-_0x18e901<CACHE_EXPIRY)return _0xa264b3;}catch(_0x5c3ace){}return null;}function a10_0x52a2(){const _0x51f2d7=['winnerUsername','email','length','removeItem','10px','width','empty','uid','playersD2','approved','all','block','winnerId','data','-8px','zIndex','pendingMatchesD2','Error\x20checking\x20pending\x20matches:','setItem','currentUsername','bind','now','trace','style','Error\x20fetching\x20username:','display','pendingMatchesCache','stringify','error'];a10_0x52a2=function(){return _0x51f2d7;};return a10_0x52a2();}export function updateNotificationDot(_0x324dd0){const _0x51619b=new MutationObserver((_0x492b2a,_0x41b473)=>{const _0x566473=document['getElementById']('report-match-notification');_0x566473&&(updateDotStyle(_0x566473,_0x324dd0),_0x41b473['disconnect']());});_0x51619b['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x447817=document['getElementById']('report-match-notification');_0x447817&&(updateDotStyle(_0x447817,_0x324dd0),_0x51619b['disconnect']()),setTimeout(()=>_0x51619b['disconnect'](),0x1388);}function updateDotStyle(_0x5d2ee4,_0xff41f7){const _0x5dbf77=a10_0x4944c8;_0xff41f7?(_0x5d2ee4['style'][_0x5dbf77(0xeb)]=_0x5dbf77(0xdd),_0x5d2ee4['style']['backgroundColor']='#ff3b30',_0x5d2ee4['style'][_0x5dbf77(0xd7)]=_0x5dbf77(0xd6),_0x5d2ee4['style']['height']=_0x5dbf77(0xd6),_0x5d2ee4['style']['position']='absolute',_0x5d2ee4['style']['top']='-5px',_0x5d2ee4[_0x5dbf77(0xe9)]['right']=_0x5dbf77(0xe0),_0x5d2ee4[_0x5dbf77(0xe9)]['borderRadius']='50%',_0x5d2ee4[_0x5dbf77(0xe9)]['border']='2px\x20solid\x20white',_0x5d2ee4['style'][_0x5dbf77(0xe1)]='999'):_0x5d2ee4['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0xb6e48b=a10_0x206e;localStorage[_0xb6e48b(0xd5)](_0xb6e48b(0xe5)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});