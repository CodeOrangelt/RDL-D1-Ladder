const a2_0x53ab39=a2_0x3e7c,a2_0x12d18f=(function(){let _0x4fcb31=!![];return function(_0x116325,_0xd74816){const _0x1bf7fa=_0x4fcb31?function(){const _0xbd4951=a2_0x3e7c;if(_0xd74816){const _0x20a605=_0xd74816[_0xbd4951(0x2aa)](_0x116325,arguments);return _0xd74816=null,_0x20a605;}}:function(){};return _0x4fcb31=![],_0x1bf7fa;};}()),a2_0x2b581=a2_0x12d18f(this,function(){const _0x5ef017=a2_0x3e7c;let _0xec79f;try{const _0x59e572=Function('return\x20(function()\x20'+_0x5ef017(0x18d)+');');_0xec79f=_0x59e572();}catch(_0x56addd){_0xec79f=window;}const _0x35950e=_0xec79f['console']=_0xec79f[_0x5ef017(0x284)]||{},_0x26d4a0=[_0x5ef017(0x7f),'warn','info',_0x5ef017(0x245),_0x5ef017(0x11d),_0x5ef017(0x2d6),'trace'];for(let _0x25f7c9=0x0;_0x25f7c9<_0x26d4a0['length'];_0x25f7c9++){const _0x2af1cb=a2_0x12d18f['constructor']['prototype'][_0x5ef017(0x273)](a2_0x12d18f),_0xe96ebd=_0x26d4a0[_0x25f7c9],_0x50a4c5=_0x35950e[_0xe96ebd]||_0x2af1cb;_0x2af1cb['__proto__']=a2_0x12d18f[_0x5ef017(0x273)](a2_0x12d18f),_0x2af1cb['toString']=_0x50a4c5[_0x5ef017(0x180)]['bind'](_0x50a4c5),_0x35950e[_0xe96ebd]=_0x2af1cb;}});a2_0x2b581();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x4762f9){const _0x3ef411=a2_0x3e7c;if(!_0x4762f9)return'#ffffff';_0x4762f9=_0x4762f9['replace']('#','');_0x4762f9[_0x3ef411(0x1e4)]===0x3&&(_0x4762f9=_0x4762f9[_0x3ef411(0x163)]('')[_0x3ef411(0xc1)](_0x51bedc=>_0x51bedc+_0x51bedc)['join'](''));if(_0x4762f9['length']!==0x6)return _0x3ef411(0x235);const _0x1c4a89=parseInt(_0x4762f9['substring'](0x0,0x2),0x10),_0x124d54=parseInt(_0x4762f9['substring'](0x2,0x4),0x10),_0x257116=parseInt(_0x4762f9[_0x3ef411(0x13c)](0x4,0x6),0x10),_0x3e5a9b=(_0x1c4a89*0x12b+_0x124d54*0x24b+_0x257116*0x72)/0x3e8;return _0x3e5a9b>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document[a2_0x53ab39(0x2c9)](a2_0x53ab39(0x2a0),()=>{auth['onAuthStateChanged'](async _0x57d40b=>{const _0xf8acd7=a2_0x3e7c;if(!_0x57d40b){window[_0xf8acd7(0x17f)]['href']=_0xf8acd7(0xa9);return;}try{await initializeAdminDashboard();}catch(_0x3f9c5e){console['error'](_0xf8acd7(0x2d8),_0x3f9c5e),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x23f6d3){const _0x2dbbe5=a2_0x53ab39;if(!_0x23f6d3)return[_0x2dbbe5(0x195)];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x23f6d3+_0x2dbbe5(0x223));const _0x38b2b3=[{'name':_0x2dbbe5(0x15f),'displayName':_0x2dbbe5(0x20d)},{'name':'players','displayName':'D1\x20Players'},{'name':_0x2dbbe5(0x138),'displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x31f391=auth['currentUser'];let _0x33e2ec=null,_0x363ff1=null;for(const _0x1e58e5 of _0x38b2b3){try{if(_0x31f391){const _0x2439ca=doc(db,_0x1e58e5['name'],_0x31f391[_0x2dbbe5(0x189)]),_0x1d64f2=await getDoc(_0x2439ca);if(_0x1d64f2['exists']()){const _0x371288=_0x1d64f2['data']();console['log']('Found\x20user\x20in\x20'+_0x1e58e5['displayName']+'\x20by\x20UID:',_0x371288);const _0x3bd13c=(_0x371288['roleName']||_0x371288['role']||'')['toLowerCase']();if(_0x3bd13c&&_0x3bd13c!=='none'){_0x33e2ec=_0x3bd13c,_0x363ff1=_0x1e58e5['displayName'],console[_0x2dbbe5(0x7f)]('Found\x20specific\x20role:\x20'+_0x33e2ec+'\x20in\x20'+_0x363ff1);break;}}}if(!_0x33e2ec){const _0x4e025c=collection(db,_0x1e58e5[_0x2dbbe5(0x142)]),_0x29a0d2=query(_0x4e025c,where('email','==',_0x23f6d3)),_0x1ab95d=await getDocs(_0x29a0d2);if(!_0x1ab95d[_0x2dbbe5(0xa2)]){const _0x28dce3=_0x1ab95d[_0x2dbbe5(0x278)][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x1e58e5['displayName']+'\x20with\x20email\x20'+_0x23f6d3+':',_0x28dce3);const _0x447031=(_0x28dce3['roleName']||_0x28dce3['role']||'')['toLowerCase']();if(_0x447031&&_0x447031!=='none'){_0x33e2ec=_0x447031,_0x363ff1=_0x1e58e5[_0x2dbbe5(0x271)],console['log'](_0x2dbbe5(0xef)+_0x33e2ec+_0x2dbbe5(0x105)+_0x363ff1);break;}}}}catch(_0x63770c){console['error'](_0x2dbbe5(0x20b)+_0x1e58e5['displayName']+':',_0x63770c);}}if(_0x33e2ec){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x33e2ec+_0x2dbbe5(0x1f7)+_0x363ff1+')');const _0x1a9de1={'admin':[_0x2dbbe5(0x195),'manage-players','manage-matches','manage-articles',_0x2dbbe5(0x1df),_0x2dbbe5(0x290),'inactive-players','settings','manage-trophies','elo-history','manage-highlights','user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players',_0x2dbbe5(0x2d4),_0x2dbbe5(0xb5),_0x2dbbe5(0x1df),'manage-ranks',_0x2dbbe5(0x16a),'settings',_0x2dbbe5(0x1df),'elo-history','manage-highlights','user-roles-section','manage-matches',_0x2dbbe5(0x164),'manage-levels-ribbons','manage-ribbons'],'council':[_0x2dbbe5(0x195),'manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies',_0x2dbbe5(0x96),'manage-highlights']};if(_0x1a9de1[_0x33e2ec])return console[_0x2dbbe5(0x7f)]('Role\x20\x27'+_0x33e2ec+'\x27\x20has\x20permissions:',_0x1a9de1[_0x33e2ec]),_0x1a9de1[_0x33e2ec];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x23f6d3+_0x2dbbe5(0x168)),['dashboard'];}function setupSidebarNavigation(_0x33b84e=[]){const _0x14435d=a2_0x53ab39,_0x82c32e=document[_0x14435d(0x1e3)](_0x14435d(0xb9)),_0x58640a=document['querySelectorAll'](_0x14435d(0xc4));(!_0x33b84e||_0x33b84e[_0x14435d(0x1e4)]===0x0)&&(_0x33b84e=[_0x14435d(0x195)]);_0x82c32e['forEach'](_0x4cb4f3=>{const _0x2fa86c=_0x14435d,_0x518dd0=_0x4cb4f3[_0x2fa86c(0x1f2)](_0x2fa86c(0xff));_0x33b84e['includes'](_0x518dd0)?_0x4cb4f3['style'][_0x2fa86c(0x1b8)]=_0x2fa86c(0x170):_0x4cb4f3['style']['display']='none',_0x4cb4f3[_0x2fa86c(0x2c9)]('click',()=>{const _0x54c89d=_0x2fa86c,_0x3d5be3=_0x4cb4f3[_0x54c89d(0x1f2)]('data-section');if(!_0x33b84e['includes'](_0x3d5be3)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x82c32e['forEach'](_0x3b8f54=>_0x3b8f54[_0x54c89d(0x18f)]['remove'](_0x54c89d(0x2cb))),_0x4cb4f3['classList']['add'](_0x54c89d(0x2cb)),_0x58640a['forEach'](_0x4ce31f=>{const _0x47fce0=_0x54c89d;_0x4ce31f[_0x47fce0(0x227)][_0x47fce0(0x1b8)]=_0x47fce0(0x88);});const _0x266956=document['getElementById'](_0x3d5be3);_0x266956&&(_0x266956['style'][_0x54c89d(0x1b8)]='block',console['log']('Switched\x20to\x20'+_0x3d5be3+'\x20section'));});});const _0x2aa830=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x33b84e[0x0]+'\x22]');_0x2aa830&&_0x2aa830['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function a2_0x1ca1(){const _0x5c12a0=['medium-points','Failed\x20to\x20delete\x20match:\x20','Cancel\x20button\x20not\x20found','log','highlight-submitted-by','then','edit-match-winner','highlight-creator-image','img','</td></tr>','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','\x20ladder!','none','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','success','checked','result','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','Monday','No\x20user\x20ID\x20found\x20on\x20button','Test\x20match','quick-add','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','elo-history','admin_modification','\x20D2\x20matches,\x20','#e0e0e0','.edit-ribbons-btn','Lost','set','assign-trophy-modal','Create\x20test\x20match\x20modal\x20not\x20found','Error\x20loading\x20points\x20data:','edit-highlight-id','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','empty','modifiedBy','desc','positive-change','article-modal','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','\x22\x20already\x20has\x20this\x20trophy','login.html','article-content','change','Error\x20initializing\x20points:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','querySelector','points-user-search','Error\x20in\x20demotion:','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','current-ladder-display','Title\x20and\x20content\x20are\x20required','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','manage-articles','articles-table-body','Error\x20creating\x20activity\x20chart:','Error\x20loading\x20ribbons:','.sidebar-nav\x20.nav-item','Unknown\x20User','edit-player-modal','award-all-pilots-btn','reduce','toLocaleDateString','unknown','user-ribbon-management','map','action','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.admin-section','warn','innerHTML','Error\x20loading\x20dashboard:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','admin','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','Player\x20not\x20found\x20in\x20','pointsHistory','elo-history-search','highlight-player-profile','Error\x20awarding\x20item:','Gold','textContent','Manage\x20Points\x20section\x20initialized','lastUpdated','openResimulateModal','loserScore','You\x20must\x20be\x20logged\x20in','winnerUsername','eloHistory','Submit\x20button\x20clicked\x20directly','load-trophies-data','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','className','set-elo-btn','activity-chart','focus','lastVisible','#50C878','resimulate-match-id','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','edit-username','match-row','selected-user-id','Error\x20initializing\x20points\x20field:','assign-trophy-name','winnerName','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','push','Unknown','rgba(211,\x2047,\x2047,\x200.7)','Found\x20specific\x20role:\x20','playerRibbonsD3','promote-username','Completed!\x20Processed\x20','input','Failed\x20to\x20save\x20article:\x20','getComputedStyle','trophyDefinitions','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','.error-state','.delete-match-btn','mapCreator','User\x20not\x20found','opacity','Switched\x20to\x20','data-section','create-match-highlight-btn','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22','#FFD700','cells','achievementDetails','\x20in\x20','Player\x20','d2-prev-page','Failed\x20to\x20load\x20points\x20data:\x20','creator-type','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','add-player-form',').\x20','activity','Creator\x20highlight\x20button\x20clicked','Error\x20loading\x20matches:','trophy-name','createdAt','assign-trophy-image','achievementPlayer','Error\x20deleting\x20article:','\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points','apply-matches-filters','highlight-match-link','roleName','Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM','playerRibbons','create-test-match-modal','exception','promotedBy','message','N/A','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','promotion','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','Loading\x20user\x20data...','highlights-table-body','matches-search','update','div','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','players','\x20inactive\x20players','player','wins','userId','closest','\x20added\x20successfully\x20to\x20','player-search','Error\x20deleting\x20trophy\x20definition:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','block','search-ribbon-user-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','playersD2','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','required','quick-edit-user-id','substring','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleString','\x20before\x20match:\x20','catch','name','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','user-search','load-articles-data','Match\x20not\x20found','cancel-role-btn','createElement','#808080','fromDate','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','creator','No\x20user\x20profile\x20found\x20for\x20pilot\x20','edit-losses','trim','setHours','\x20quick\x20edit\x20buttons','✅\x20Exists','match','\x20already\x20has\x20points:\x20','firstVisible','highlight-video-container','test-match-winner-username','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','.nav-item','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','Loser\x20','\x20matches\x20for\x20','trophy-preview-img','Create\x20New\x20Trophy','userProfiles','Trophy\x20\x22','Achievement\x20highlight\x20button\x20clicked','src','split','manage-points','allUsersPoints','\x20from\x20','forEach',',\x20giving\x20default\x20access','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','inactive-players','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','data','\x20ladder,\x20page\x20','reset-history-filters','initial_placement','flex','create-new-article-btn','ribbons-overview-table-body','level','Error\x20loading\x20users:','loserDemoLink','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','Unnamed\x20Trophy','Match','size','add','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','Using\x20collections\x20for\x20','eloHistoryD3','matches-end-date','location','toString','points-history-table-body','elo','Untitled','roleColor','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','Invalid\x20points\x20amount','preventDefault','commit','uid','.close','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','players-ladder-selector','{}.constructor(\x22return\x20this\x22)(\x20)','Article\x20deleted\x20successfully','classList','\x22\x20not\x20found\x20in\x20','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','Match\x20highlight\x20button\x20clicked','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','ribbon-user-search','dashboard','highlight-description','\x20D1\x20pilots,\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','Awarded\x20','highlight-video-preview-container','Modal\x20opened\x20successfully','fa-exclamation-triangle','No\x20users\x20found\x20in\x20userProfiles\x20collection','Error\x20creating\x20simple\x20test\x20match:','appendChild','matchLink','5px','date','add-ribbon-form','cancel-assign-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','filter','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>','marginBottom','Could\x20not\x20find\x20player\x20documents','Player\x20deleted\x20successfully','Wednesday','losses','.remove-role-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','currentTarget','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','approvedMatches','</span>','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','highlight-map-creator','create-achievement-highlight-btn','display','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','previousElo','reset','load-inactive-players-data','❌\x20Missing','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','UserProfile','Remove\x20','achievement-type','\x20Rank\x20Distribution','0.6','rarity','getDate','Role\x20select\x20set\x20to:\x20','Trophy\x20not\x20found','edit-highlight-achievementPlayer-input','Create\x20Article','Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','nonParticipants','Create\x20test\x20match\x20form\x20not\x20found','✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Set\x20to\x20','page','Error\x20adding\x20ribbon','Error\x20searching\x20users:','Error\x20saving\x20match:','\x20to\x20','Error\x20loading\x20articles:','highlight-map','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','getRankName','localeCompare','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','.view-player-btn','borderRadius','bar','manage-trophies','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','Match\x20Result','position','querySelectorAll','length','match-details-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','winnerScore','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','Page\x20','approvedMatchesD3','ribbon-target-ladder','Article\x20updated\x20successfully','Initializing\x20points\x20field\x20for\x20user\x20','Points\x20action\x20buttons\x20setup\x20complete','Failed\x20to\x20find\x20match:\x20','value','pendingMatchesD3','getAttribute','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','backgroundColor','email','\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20','\x20(from\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20','.edit-match-btn','Successfully\x20demoted\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','Loading\x20players\x20from\x20','Trophy\x20definition\x20deleted\x20successfully','./ladderalgorithm.js','Error\x20promoting\x20player:\x20','playerProfileUrl','\x20(winner)\x20vs\x20','.close-btn','matches-start-date','elo-history-table-body','demotedBy','test-match-date','mapName','testFirebaseConnection','Modal\x20background\x20clicked','Error\x20checking\x20','seconds','User\x20Profiles','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','imageUrl','achievement','eloHistoryD2','NonParticipant','keypress','Error\x20loading\x20points\x20history:','loserUsername','submit','subtract','loading','set-elo-value','newElo','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','removeEventListener','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','d1-prev-page','description','no-results','set-elo-ladder','sort','\x20in\x20all\x20collections...','\x20ladder','approvedAt','remove','style','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-achievement-player-container','moderately-inactive','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','Failed\x20to\x20modify\x20points:\x20','Error\x20saving\x20highlight:','getDay','playerId','empty-state','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','lastMatch','alt','Found\x20','#ffffff','Queued\x20','click','#1976d2','Error\x20assigning\x20trophy:','edit-highlight-winnerScore-input','visible','title','edit-match-loser-comment','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','roleAssignedAt','Bronze','Never\x20played','Tuesday','Highlight\x20created\x20successfully!','.edit-article-btn','error','name-asc','body','player-count','Removed\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','Promotion','articles','Searching\x20for\x20player\x20in\x20','matchId','demote-username','rankDistribution','info','Match\x20updated\x20successfully','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','daysSinceMatch','Unranked','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','.assign-trophy-btn','amount','demote-form','.no-results','string','set-role-modal','visibility','timestamp','d3-next-page','mapVersion','color','user-role','Error\x20loading\x20dashboard\x20data:','join','slice','rgba(25,\x20118,\x20210,\x200.7)','matchInfo','Emerald','loserSuicides','highlight-creator-image-container','Error\x20updating\x20player:','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','Error\x20opening\x20assign\x20trophy\x20modal:','role-username','article-author','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','displayName',';\x22>','bind','all','approvedMatchesD2','matchDate','dataset','docs','stopPropagation','toLowerCase','resimulation','highlight-winner-name','Points\x20data\x20loaded\x20successfully','userTrophies','common','selected-user-info','inactive-days-filter','includes','points','console','MAX_SAFE_INTEGER','eloRating','edit-match-ladder','highlights','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','disabled','Article\x20not\x20found','promote-modal','Found\x20ELO\x20history\x20for\x20player\x20','hidden','create-test-match-form','manage-ranks','mapPlayed','Form\x20elements\x20are\x20missing','Modal\x20computed\x20styles:','cloneNode','edit-highlight-videoId-input','highlight-achievement-image-container','winnerDemoLink','Standard','.view-history-btn','#d32f2f','removeAttribute','Positions\x20updated:\x20Winner\x20','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','user-roles-section','currentUser','DOMContentLoaded','article-id','creatorImageUrl','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Load\x20trophies\x20data\x20clicked','no-results-message','matches-next-page','user-search-results','target','edit-highlight-playerProfileUrl-input','apply','highlight-id','points-overview-table-body','highlight-form','Profile','article-title','.edit-role-btn','Attempting\x20to\x20promote\x20','exists','\x20already\x20exists\x20in\x20','\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200','insertAdjacentElement','highlight-players-container','setAttribute','quick-edit-points-modal','ref','previousPoints','playersD3','edit-match-winner-suicides','points-overview-search','demotion','Modal\x20element\x20not\x20found!','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','getElementById','Load\x20inactive\x20players\x20data\x20clicked','username','Deleting\x20match...','validation-results-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','highlight-player-profile-container','reason','addEventListener','manage-highlights','active','get','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','Error\x20setting\x20custom\x20ELO:','Table\x20row\x20for\x20user\x20','trophy-image-url','highlight-video-id','negative-change','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','manage-matches','startDate','table','.quick-edit-btn','Error\x20initializing\x20dashboard:'];a2_0x1ca1=function(){return _0x5c12a0;};return a2_0x1ca1();}function setupTabNavigation(){const _0x1547b5=a2_0x53ab39,_0x5c8ca0=document[_0x1547b5(0x1e3)](_0x1547b5(0x159));let _0x16666d=null,_0x17ce42=new Set();_0x5c8ca0['forEach'](_0x4d189d=>{const _0x21e124=_0x1547b5;_0x4d189d[_0x21e124(0x2c9)]('click',function(){const _0x5a6d83=_0x21e124,_0x12752b=this['getAttribute'](_0x5a6d83(0xff));if(_0x12752b===_0x16666d)return;_0x16666d&&(document['getElementById'](_0x16666d)['style']['display']='none',_0x5c8ca0['forEach'](_0x342b0b=>_0x342b0b['classList'][_0x5a6d83(0x226)]('active'))),document['getElementById'](_0x12752b)['style']['display']=_0x5a6d83(0x135),this['classList']['add'](_0x5a6d83(0x2cb)),_0x16666d=_0x12752b;});});}function loadSectionData(_0x48f9aa){return;}async function initializeAdminDashboard(){const _0x21699c=a2_0x53ab39;try{const _0x2db847=auth['currentUser'],_0x11c420=await getUserTabPermissions(_0x2db847[_0x21699c(0x1f5)]);console[_0x21699c(0x7f)]('User\x20'+_0x2db847['email']+'\x20allowed\x20tabs:',_0x11c420),window['userAllowedTabs']=_0x11c420,setupSidebarNavigation(_0x11c420),setupLadderSelector(),setupDashboardSection(),_0x11c420['includes']('manage-players')&&setupManagePlayersSection(),_0x11c420[_0x21699c(0x282)]('elo-history')&&setupEloHistorySection(),_0x11c420['includes']('manage-ranks')&&setupRankControls(),_0x11c420[_0x21699c(0x282)](_0x21699c(0xb5))&&setupManageArticlesSection(),_0x11c420['includes']('user-roles-section')&&setupUserRolesSection(),_0x11c420['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x11c420[_0x21699c(0x282)]('manage-highlights')&&setupManageHighlightsSection(),_0x11c420['includes']('inactive-players')&&setupInactivePlayersSection(),_0x11c420['includes']('manage-matches')&&setupManageMatchesSection(),_0x11c420['includes'](_0x21699c(0x164))&&setupManagePointsSection(),_0x11c420['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x11c420);}catch(_0x27216d){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x27216d);}}function setupDataLoadButtons(_0x3dfdd5=[]){const _0x10c99b=a2_0x53ab39;(!_0x3dfdd5||_0x3dfdd5['length']===0x0)&&(_0x3dfdd5=['dashboard']);const _0x122043=document[_0x10c99b(0x2c1)]('load-dashboard-data');_0x122043&&_0x122043['addEventListener']('click',function(){const _0x36d02b=_0x10c99b;this[_0x36d02b(0x18f)][_0x36d02b(0x17a)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x4b2c6e=_0x36d02b;this[_0x4b2c6e(0x18f)]['remove'](_0x4b2c6e(0x218)),this['innerHTML']=_0x4b2c6e(0xe4);})[_0x36d02b(0x141)](_0x3adb38=>{const _0x40f29f=_0x36d02b;console[_0x40f29f(0x245)](_0x40f29f(0xc7),_0x3adb38),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x198e1f=_0x40f29f;this[_0x198e1f(0xc6)]=_0x198e1f(0xe4);},0xbb8);});});if(_0x3dfdd5['includes']('manage-trophies')){const _0x35d600=document['getElementById']('load-trophies-data');_0x35d600&&_0x35d600['addEventListener']('click',function(){const _0x1f55ea=_0x10c99b;console['log'](_0x1f55ea(0x2a4)),this[_0x1f55ea(0x18f)][_0x1f55ea(0x17a)](_0x1f55ea(0x218)),this[_0x1f55ea(0xc6)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0xa4e3d3=_0x1f55ea;this['classList']['remove']('loading'),this[_0xa4e3d3(0xc6)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x189b1d=>{const _0x10ad26=_0x1f55ea;console['error']('Error\x20loading\x20trophies:',_0x189b1d),this[_0x10ad26(0x18f)]['remove'](_0x10ad26(0x218)),this[_0x10ad26(0xc6)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4a0fb3=_0x10ad26;this['innerHTML']=_0x4a0fb3(0x185);},0xbb8);});});}if(_0x3dfdd5['includes']('manage-players')){const _0x476c3a=document['getElementById']('load-players-data');_0x476c3a&&_0x476c3a[_0x10c99b(0x2c9)]('click',function(){const _0x1fdf1a=_0x10c99b;console['log']('Load\x20players\x20data\x20clicked'),this[_0x1fdf1a(0x18f)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()[_0x1fdf1a(0x81)](()=>{const _0x2fd0d8=_0x1fdf1a;this['classList']['remove'](_0x2fd0d8(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x23ea51=>{const _0x1d2d87=_0x1fdf1a;console[_0x1d2d87(0x245)]('Error\x20loading\x20players:',_0x23ea51),this['classList']['remove']('loading'),this[_0x1d2d87(0xc6)]=_0x1d2d87(0x86),setTimeout(()=>{const _0x3c9024=_0x1d2d87;this[_0x3c9024(0xc6)]=_0x3c9024(0x134);},0xbb8);});});}if(_0x3dfdd5['includes']('elo-history')){const _0x1b0cce=document['getElementById']('load-elo-history-data');_0x1b0cce&&_0x1b0cce['addEventListener']('click',function(){const _0x152b70=_0x10c99b;console['log']('Load\x20history\x20data\x20clicked'),this['classList'][_0x152b70(0x17a)](_0x152b70(0x218)),this['innerHTML']=_0x152b70(0x1e0),loadEloHistory(0x1)['then'](()=>{const _0x247956=_0x152b70;this[_0x247956(0x18f)]['remove'](_0x247956(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x152b70(0x141)](_0x442d8c=>{console['error']('Error\x20loading\x20history:',_0x442d8c),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x3dfdd5['includes']('manage-articles')){const _0x3dead1=document['getElementById'](_0x10c99b(0x145));_0x3dead1&&_0x3dead1['addEventListener'](_0x10c99b(0x237),function(){const _0x42c413=_0x10c99b;console[_0x42c413(0x7f)]('Load\x20articles\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x41d931=_0x42c413;this['classList'][_0x41d931(0x226)](_0x41d931(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x116930=>{const _0x292a5e=_0x42c413;console[_0x292a5e(0x245)]('Error\x20loading\x20articles:',_0x116930),this['classList']['remove'](_0x292a5e(0x218)),this[_0x292a5e(0xc6)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x3dfdd5['includes'](_0x10c99b(0x29e))){const _0x7c736f=document['getElementById']('load-users-data');_0x7c736f&&_0x7c736f[_0x10c99b(0x2c9)]('click',function(){const _0x2dacc9=_0x10c99b;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add'](_0x2dacc9(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x2a68cc=_0x2dacc9;this['classList']['remove'](_0x2a68cc(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0xe13ceb=>{const _0x4109e1=_0x2dacc9;console['error']('Error\x20loading\x20users:',_0xe13ceb),this['classList']['remove'](_0x4109e1(0x218)),this['innerHTML']=_0x4109e1(0x86),setTimeout(()=>{const _0x5aa460=_0x4109e1;this['innerHTML']=_0x5aa460(0x1e8);},0xbb8);});});}if(_0x3dfdd5['includes'](_0x10c99b(0x16a))){const _0x2a1188=document['getElementById'](_0x10c99b(0x1bc));_0x2a1188&&_0x2a1188['addEventListener'](_0x10c99b(0x237),function(){const _0x263189=_0x10c99b;console[_0x263189(0x7f)](_0x263189(0x2c2)),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x2395f1=_0x263189;this['classList']['remove'](_0x2395f1(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})[_0x263189(0x141)](_0x4e9d44=>{const _0x2882d2=_0x263189;console['error']('Error\x20loading\x20inactive\x20players:',_0x4e9d44),this['classList'][_0x2882d2(0x226)](_0x2882d2(0x218)),this[_0x2882d2(0xc6)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x3dfdd5['includes'](_0x10c99b(0x2ca))){const _0x5aedb6=document['getElementById']('load-highlights-data');_0x5aedb6&&_0x5aedb6['addEventListener'](_0x10c99b(0x237),function(){const _0x4d99c2=_0x10c99b;console['log']('Load\x20highlights\x20data\x20clicked'),this[_0x4d99c2(0x18f)]['add'](_0x4d99c2(0x218)),this['innerHTML']=_0x4d99c2(0x1e0),loadHighlightsAdmin()[_0x4d99c2(0x81)](()=>{const _0x3686e3=_0x4d99c2;this[_0x3686e3(0x18f)][_0x3686e3(0x226)](_0x3686e3(0x218)),this['innerHTML']=_0x3686e3(0x95);})[_0x4d99c2(0x141)](_0x271354=>{const _0x5918c1=_0x4d99c2;console['error']('Error\x20loading\x20highlights:',_0x271354),this['classList']['remove'](_0x5918c1(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5dcd26=_0x5918c1;this[_0x5dcd26(0xc6)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x3dfdd5['includes']('manage-matches')){const _0x1092a9=document['getElementById']('load-matches-data');_0x1092a9&&_0x1092a9['addEventListener']('click',function(){const _0x29ee6c=_0x10c99b;console['log']('Load\x20matches\x20data\x20clicked'),this['classList']['add'](_0x29ee6c(0x218)),this['innerHTML']=_0x29ee6c(0x1e0),loadMatchesData(0x1)['then'](()=>{const _0x507bcb=_0x29ee6c;this['classList']['remove'](_0x507bcb(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x20e809=>{const _0x53f217=_0x29ee6c;console[_0x53f217(0x245)](_0x53f217(0x110),_0x20e809),this['classList'][_0x53f217(0x226)]('loading'),this['innerHTML']=_0x53f217(0x86),setTimeout(()=>{const _0x6c3d9d=_0x53f217;this[_0x6c3d9d(0xc6)]=_0x6c3d9d(0x12a);},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x3dfdd5['includes']('manage-ribbons')){const _0x217ac6=document[_0x10c99b(0x2c1)]('load-ribbons-data');_0x217ac6&&_0x217ac6[_0x10c99b(0x2c9)]('click',function(){const _0x3f74ac=_0x10c99b;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x3f74ac(0xc6)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x30619d=_0x3f74ac;this['classList']['remove']('loading'),this[_0x30619d(0xc6)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x1682a6=>{const _0xa1caf0=_0x3f74ac;console['error'](_0xa1caf0(0xb8),_0x1682a6),this[_0xa1caf0(0x18f)][_0xa1caf0(0x226)](_0xa1caf0(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x529f85=a2_0x53ab39;document['getElementById'](_0x529f85(0x248))['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x464562=a2_0x53ab39,_0x4ff9af=document[_0x464562(0x1e3)]('.ladder-switch\x20input');_0x4ff9af['forEach'](_0x9b5112=>{const _0xedda8a=_0x464562;_0x9b5112[_0xedda8a(0x2c9)]('change',()=>{const _0x3f2589=_0xedda8a;currentLadder=_0x9b5112['value'],document['body'][_0x3f2589(0x2b7)]('data-ladder',currentLadder);const _0x2470c1=document['getElementById'](_0x3f2589(0xb2));_0x2470c1&&(_0x2470c1[_0x3f2589(0xd2)]=currentLadder),document['getElementById'](_0x3f2589(0x248))[_0x3f2589(0xd2)]='-',document['getElementById']('match-count')['textContent']='-',document[_0x3f2589(0x2c1)]('pending-count')['textContent']='-',document[_0x3f2589(0x2c1)]('rejected-count')[_0x3f2589(0xd2)]='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts[_0x3f2589(0x250)]=null),charts['activity']&&(charts[_0x3f2589(0x10e)]['destroy'](),charts['activity']=null),showNotification(_0x3f2589(0xfe)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x3f2589(0x251));});});const _0x1c7b1d=document[_0x464562(0x2c1)](_0x464562(0xb2));_0x1c7b1d&&(_0x1c7b1d[_0x464562(0xd2)]=currentLadder);}async function loadDashboardOverview(){const _0x4472cc=a2_0x53ab39;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document['getElementById']('player-count')[_0x4472cc(0xd2)]='-',document[_0x4472cc(0x2c1)]('match-count')[_0x4472cc(0xd2)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';const _0x309111=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':_0x4472cc(0x2bb),_0x27fe93=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5192f3=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':_0x4472cc(0x1f1),_0x30b470=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console['log'](_0x4472cc(0x17c)+currentLadder+':\x20'+_0x309111+',\x20'+_0x27fe93);const _0xdccee3=await getDocs(collection(db,_0x309111)),_0x487f48=_0xdccee3['size'],_0x4ba32f=await getDocs(collection(db,_0x27fe93)),_0xe5d3c7=_0x4ba32f['size'],_0x158a64=await getDocs(collection(db,_0x5192f3)),_0x3dbacf=_0x158a64[_0x4472cc(0x179)],_0x4e2a40=await getDocs(collection(db,_0x30b470)),_0x4bd90f=_0x4e2a40['size'];return document['getElementById']('player-count')['textContent']=_0x487f48,document['getElementById']('match-count')['textContent']=_0xe5d3c7,document['getElementById']('pending-count')['textContent']=_0x3dbacf,document['getElementById']('rejected-count')['textContent']=_0x4bd90f,await createRankDistributionChart(),await createActivityChart(),console[_0x4472cc(0x7f)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0xb13ed0){console['error'](_0x4472cc(0x263),_0xb13ed0);throw _0xb13ed0;}}async function createRankDistributionChart(){const _0x65c7fe=a2_0x53ab39;try{const _0x1dc964=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x2990f2=await getDocs(_0x1dc964),_0x3bdbb9={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x2990f2[_0x65c7fe(0x167)](_0x5af1a2=>{const _0x45262b=_0x65c7fe,_0x562a44=_0x5af1a2['data'](),_0x5e5921=_0x562a44[_0x45262b(0x286)]||0x4b0;if(_0x5e5921>=0x7d0)_0x3bdbb9['Emerald']++;else{if(_0x5e5921>=0x708)_0x3bdbb9[_0x45262b(0xd1)]++;else{if(_0x5e5921>=0x640)_0x3bdbb9['Silver']++;else{if(_0x5e5921>=0x578)_0x3bdbb9['Bronze']++;else _0x3bdbb9[_0x45262b(0x255)]++;}}}});const _0x27b47c=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts[_0x65c7fe(0x250)]['destroy'](),charts['rankDistribution']=new Chart(_0x27b47c,{'type':'doughnut','data':{'labels':Object['keys'](_0x3bdbb9),'datasets':[{'data':Object['values'](_0x3bdbb9),'backgroundColor':['#808080','#CD7F32','#C0C0C0',_0x65c7fe(0x102),_0x65c7fe(0xe2)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+_0x65c7fe(0x1c2),'color':_0x65c7fe(0x99),'font':{'size':0x10}}}}});}catch(_0x396299){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x396299),document[_0x65c7fe(0x2c1)]('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0xcf054f=a2_0x53ab39;try{const _0x1bd55e=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x4d5eb5=collection(db,_0x1bd55e),_0x14ae07=new Date();_0x14ae07['setDate'](_0x14ae07[_0xcf054f(0x1c5)]()-0x7);const _0x162528=query(_0x4d5eb5,where(_0xcf054f(0x225),'>=',_0x14ae07),orderBy(_0xcf054f(0x225),'asc')),_0x5c27c3=await getDocs(_0x162528),_0x2acebc=['Sunday',_0xcf054f(0x90),_0xcf054f(0x242),_0xcf054f(0x1ad),'Thursday','Friday','Saturday'],_0x316f05=_0x2acebc[_0xcf054f(0xbd)]((_0x3ea1bf,_0x2e6113)=>({..._0x3ea1bf,[_0x2e6113]:0x0}),{});_0x5c27c3['forEach'](_0x3081ec=>{const _0x51d96f=_0xcf054f,_0x26b163=_0x3081ec['data']();if(_0x26b163['approvedAt']){const _0x1d3fc8=_0x2acebc[new Date(_0x26b163['approvedAt'][_0x51d96f(0x20c)]*0x3e8)[_0x51d96f(0x22e)]()];_0x316f05[_0x1d3fc8]++;}});const _0x4eb8d1=document['getElementById'](_0xcf054f(0xdf));charts['activity']&&charts[_0xcf054f(0x10e)]['destroy'](),charts['activity']=new Chart(_0x4eb8d1,{'type':_0xcf054f(0x1de),'data':{'labels':_0x2acebc,'datasets':[{'label':'Matches\x20Played','data':_0x2acebc['map'](_0x19f059=>_0x316f05[_0x19f059]),'backgroundColor':currentLadder==='D1'?_0xcf054f(0xee):_0xcf054f(0x266),'borderColor':currentLadder==='D1'?_0xcf054f(0x29a):_0xcf054f(0x238),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x125e6f){console['error'](_0xcf054f(0xb7),_0x125e6f),document[_0xcf054f(0x2c1)]('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x3ab5ca=a2_0x53ab39,_0x5886a7=document['getElementById']('players-table-body');if(!_0x5886a7)return;_0x5886a7['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x3055a0='players';if(currentLadder==='D2')_0x3055a0=_0x3ab5ca(0x138);else currentLadder==='D3'&&(_0x3055a0='playersD3');console['log'](_0x3ab5ca(0x1fd)+_0x3055a0+'\x20collection...');const _0x2ec094=collection(db,_0x3055a0),_0xd49549=query(_0x2ec094,orderBy(_0x3ab5ca(0x286),'desc')),_0x259d43=await getDocs(_0xd49549);if(_0x259d43['empty']){_0x5886a7['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x5886a7['innerHTML']='';let _0x311cda=0x1;_0x259d43[_0x3ab5ca(0x167)](_0x162934=>{const _0x45494b=_0x3ab5ca,_0x22e8f8=_0x162934[_0x45494b(0x16c)](),_0x4ec1c0=getRankFromElo(_0x22e8f8['eloRating']||0x4b0),_0x3f0af5=getRankStyle(_0x22e8f8[_0x45494b(0x286)]||0x4b0),_0x5885be=document['createElement']('tr');_0x5885be[_0x45494b(0xc6)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x311cda+_0x45494b(0x137)+_0x3f0af5['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x22e8f8['username']||_0x45494b(0xed))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x22e8f8[_0x45494b(0x286)]||0x4b0)+_0x45494b(0x24a)+_0x3f0af5[_0x45494b(0x261)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4ec1c0+_0x45494b(0x13e)+(_0x22e8f8['wins']||0x0)+'W\x20/\x20'+(_0x22e8f8[_0x45494b(0x1ae)]||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x162934['id']+_0x45494b(0x101)+_0x162934['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5886a7['appendChild'](_0x5885be),_0x311cda++;}),setupPlayerActionButtons();}catch(_0x7c223a){console['error']('Error\x20loading\x20players:',_0x7c223a),_0x5886a7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x7c223a['message']+_0x3ab5ca(0x2d3);}}function getRankFromElo(_0x18f682){const _0x29c158=a2_0x53ab39;if(_0x18f682>=0x7d0)return'Emerald';if(_0x18f682>=0x708)return _0x29c158(0xd1);if(_0x18f682>=0x640)return'Silver';if(_0x18f682>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x567f60=a2_0x53ab39;document['querySelectorAll']('.edit-btn')['forEach'](_0x562f7c=>{_0x562f7c['addEventListener']('click',async _0x385cf7=>{const _0x588d5e=a2_0x3e7c,_0x2596b6=_0x385cf7[_0x588d5e(0x1b1)]['dataset']['id'];openEditPlayerModal(_0x2596b6);});}),document['querySelectorAll']('.delete-btn')[_0x567f60(0x167)](_0x1605b3=>{const _0x52f6c5=_0x567f60;_0x1605b3[_0x52f6c5(0x2c9)]('click',async _0xe04040=>{const _0x38376e=_0xe04040['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x38376e);});});}async function openEditPlayerModal(_0x123f14){const _0x17356a=a2_0x53ab39;try{const _0x580b9e=currentLadder==='D1'?'players':'playersD2',_0x42aae6=doc(db,_0x580b9e,_0x123f14),_0x35306d=await getDoc(_0x42aae6);if(!_0x35306d[_0x17356a(0x2b2)]()){showNotification('Player\x20not\x20found','error');return;}const _0xd4ef4b=_0x35306d['data'](),_0x124fa9=document['getElementById']('edit-player-modal'),_0x470d23=document['getElementById'](_0x17356a(0xe5)),_0x45686d=document['getElementById']('edit-elo'),_0x2a2289=document['getElementById']('edit-wins'),_0x3946d2=document[_0x17356a(0x2c1)](_0x17356a(0x14e));_0x470d23['value']=_0xd4ef4b['username']||'',_0x45686d[_0x17356a(0x1f0)]=_0xd4ef4b['eloRating']||0x4b0,_0x2a2289['value']=_0xd4ef4b[_0x17356a(0x12e)]||0x0,_0x3946d2['value']=_0xd4ef4b[_0x17356a(0x1ae)]||0x0,_0x124fa9['dataset']['playerId']=_0x123f14,_0x124fa9[_0x17356a(0x18f)]['add']('active');}catch(_0x2f6da4){console[_0x17356a(0x245)]('Error\x20opening\x20edit\x20modal:',_0x2f6da4),showNotification('Failed\x20to\x20load\x20player\x20data',_0x17356a(0x245));}}async function saveEditedPlayer(){const _0x41ee83=a2_0x53ab39;try{const _0x4ee5cc=document['getElementById'](_0x41ee83(0xbb)),_0x47cb62=_0x4ee5cc[_0x41ee83(0x277)]['playerId'];if(!_0x47cb62){showNotification('No\x20player\x20selected',_0x41ee83(0x245));return;}const _0x4ff19a=document['getElementById']('edit-username'),_0x56fff9=document['getElementById']('edit-elo'),_0x5e17dd=document[_0x41ee83(0x2c1)]('edit-wins'),_0x54ba07=document[_0x41ee83(0x2c1)]('edit-losses'),_0x5c9d36=_0x4ff19a['value']['trim'](),_0x302a59=parseInt(_0x56fff9[_0x41ee83(0x1f0)]),_0x1103cd=parseInt(_0x5e17dd['value']),_0x308262=parseInt(_0x54ba07['value']);if(!_0x5c9d36||isNaN(_0x302a59)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x1470df=currentLadder==='D1'?_0x41ee83(0x12b):'playersD2',_0x2d0215=doc(db,_0x1470df,_0x47cb62),_0x293d9f=await getDoc(_0x2d0215),_0x55f9d9=_0x293d9f[_0x41ee83(0x2b2)]()?_0x293d9f['data']():{},_0x4c5a06=_0x55f9d9['eloRating']||0x4b0;await updateDoc(_0x2d0215,{'username':_0x5c9d36,'eloRating':_0x302a59,'wins':_0x1103cd||0x0,'losses':_0x308262||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x302a59!==_0x4c5a06){const _0x15be8f=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x15be8f),{'player':_0x5c9d36,'previousElo':_0x4c5a06,'newElo':_0x302a59,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x41ee83(0x8c));}catch(_0x2bfa1c){console['error'](_0x41ee83(0x26b),_0x2bfa1c),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x2bfa1c['message'],_0x41ee83(0x245));}}function closeEditPlayerModal(){const _0x40814a=a2_0x53ab39,_0x59c56f=document[_0x40814a(0x2c1)]('edit-player-modal');_0x59c56f[_0x40814a(0x18f)][_0x40814a(0x226)]('active'),_0x59c56f['dataset']['playerId']='';}async function confirmDeletePlayer(_0x2575c9){const _0x76aa29=a2_0x53ab39;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x18fa1c=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x18fa1c,_0x2575c9)),loadPlayersData(),showNotification(_0x76aa29(0x1ac),'success');}catch(_0x3030ac){console['error']('Error\x20deleting\x20player:',_0x3030ac),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x3030ac['message'],'error');}}async function setupManagePlayersSection(){const _0x165422=a2_0x53ab39,_0x258dd5=document['getElementById']('add-player-form');_0x258dd5&&_0x258dd5[_0x165422(0x2c9)]('submit',async _0x3583ef=>{const _0x1cf52a=_0x165422;_0x3583ef[_0x1cf52a(0x187)](),await addNewPlayer();});const _0x4d392d=document[_0x165422(0x2c1)](_0x165422(0x132));_0x4d392d&&_0x4d392d['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x2cda5e=document['getElementById']('save-player-btn');_0x2cda5e&&_0x2cda5e['addEventListener']('click',saveEditedPlayer);const _0x448df6=document[_0x165422(0x2c1)]('cancel-edit-btn');_0x448df6&&_0x448df6['addEventListener'](_0x165422(0x237),closeEditPlayerModal);const _0x5553a4=document['getElementById']('edit-player-modal');_0x5553a4&&_0x5553a4[_0x165422(0x2c9)](_0x165422(0x237),_0x17587f=>{_0x17587f['target']===_0x5553a4&&closeEditPlayerModal();});const _0x26ab8a=document[_0x165422(0x2c1)](_0x165422(0x18c));_0x26ab8a&&_0x26ab8a['addEventListener'](_0x165422(0xab),()=>{currentLadder=_0x26ab8a['value'],loadPlayersData();});}async function addNewPlayer(){const _0x5a73ef=a2_0x53ab39;try{const _0x19e202=document[_0x5a73ef(0x2c1)]('new-player-username'),_0x267b71=document['getElementById']('new-player-elo'),_0x48a8e9=_0x19e202['value']['trim'](),_0x50b163=parseInt(_0x267b71[_0x5a73ef(0x1f0)])||0x4b0;if(!_0x48a8e9){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x48a8e9+'\x20with\x20ELO\x20'+_0x50b163+'\x20to\x20'+currentLadder+'\x20ladder');let _0x3d8779=_0x5a73ef(0x12b),_0x426d30='eloHistory';if(currentLadder==='D2')_0x3d8779=_0x5a73ef(0x138),_0x426d30='eloHistoryD2';else currentLadder==='D3'&&(_0x3d8779=_0x5a73ef(0x2bb),_0x426d30=_0x5a73ef(0x17d));const _0x41336a=query(collection(db,_0x3d8779),where('username','==',_0x48a8e9)),_0x5bfc8b=await getDocs(_0x41336a);if(!_0x5bfc8b['empty']){alert('Username\x20'+_0x48a8e9+_0x5a73ef(0x2b3)+currentLadder+_0x5a73ef(0x224));return;}const _0x5058c1=auth[_0x5a73ef(0x29f)],_0x200198={'username':_0x48a8e9,'eloRating':_0x50b163,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x5058c1?_0x5058c1['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x3d8779),_0x200198),await addDoc(collection(db,_0x426d30),{'player':_0x48a8e9,'previousElo':0x4b0,'newElo':_0x50b163,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x5058c1?_0x5058c1[_0x5a73ef(0x1f5)]:'admin','gameMode':currentLadder}),_0x19e202['value']='',_0x267b71['value']='1200',alert(_0x5a73ef(0x106)+_0x48a8e9+_0x5a73ef(0x131)+currentLadder+_0x5a73ef(0x87)),loadPlayersData();}catch(_0x229557){console[_0x5a73ef(0x245)]('Error\x20adding\x20player:',_0x229557),alert('Error\x20adding\x20player:\x20'+_0x229557['message']);}}document['addEventListener'](a2_0x53ab39(0x2a0),()=>{const _0x324c87=a2_0x53ab39,_0x50432b=document['getElementById'](_0x324c87(0x10c));_0x50432b&&_0x50432b['addEventListener']('submit',_0x122248=>{_0x122248['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x41bc54=a2_0x53ab39,_0x439265=document['getElementById']('player-search')[_0x41bc54(0x1f0)][_0x41bc54(0x27a)](),_0x562418=document[_0x41bc54(0x1e3)]('#players-table-body\x20tr');let _0x3c069d=0x0;_0x562418['forEach'](_0x122fbf=>{const _0x4525bf=_0x41bc54,_0xa56fcd=_0x122fbf[_0x4525bf(0xae)]('.username')?.['textContent']['toLowerCase']()||'';_0xa56fcd['includes'](_0x439265)?(_0x122fbf['style']['display']='',_0x3c069d++):_0x122fbf['style'][_0x4525bf(0x1b8)]='none';});const _0x542221=document['getElementById'](_0x41bc54(0x2a5));_0x542221&&(_0x3c069d===0x0&&_0x439265!==''?_0x542221['style']['display']='block':_0x542221['style']['display']='none');}function debounce(_0x136ba0,_0x5847a6){let _0x682e60;return function(..._0x1af7a1){clearTimeout(_0x682e60),_0x682e60=setTimeout(()=>_0x136ba0['apply'](this,_0x1af7a1),_0x5847a6);};}async function loadEloHistory(_0x2dfe3d=0x1){const _0x50b226=a2_0x53ab39,_0x1230a7=document[_0x50b226(0x2c1)](_0x50b226(0x205)),_0x4e0dd5=currentLadder[_0x50b226(0x27a)]();if(!_0x1230a7)return;_0x1230a7[_0x50b226(0xc6)]=_0x50b226(0x17b);try{const _0x27762a=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x312e91=collection(db,_0x27762a);let _0x53a535;if(_0x2dfe3d>eloHistoryPagination[_0x4e0dd5]['page']&&eloHistoryPagination[_0x4e0dd5][_0x50b226(0xe1)])_0x53a535=query(_0x312e91,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x4e0dd5][_0x50b226(0xe1)]),limit(PAGE_SIZE));else _0x2dfe3d<eloHistoryPagination[_0x4e0dd5]['page']&&eloHistoryPagination[_0x4e0dd5]['firstVisible']?_0x53a535=query(_0x312e91,orderBy(_0x50b226(0x25e),'desc'),endBefore(eloHistoryPagination[_0x4e0dd5][_0x50b226(0x155)]),limitToLast(PAGE_SIZE)):_0x53a535=query(_0x312e91,orderBy(_0x50b226(0x25e),'desc'),limit(PAGE_SIZE));const _0x3c63c6=await getDocs(_0x53a535);if(_0x3c63c6['empty']){_0x1230a7['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x4e0dd5+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x4e0dd5]['page']=_0x2dfe3d,eloHistoryPagination[_0x4e0dd5]['firstVisible']=_0x3c63c6['docs'][0x0],eloHistoryPagination[_0x4e0dd5]['lastVisible']=_0x3c63c6['docs'][_0x3c63c6['docs'][_0x50b226(0x1e4)]-0x1];const _0xc78123=new Map();_0x1230a7[_0x50b226(0xc6)]='';const _0xdec0e5=async _0x41efd9=>{const _0x232766=_0x50b226;if(typeof _0x41efd9!==_0x232766(0x25b)||_0x41efd9['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x41efd9))return _0x41efd9;if(_0xc78123['has'](_0x41efd9))return _0xc78123['get'](_0x41efd9);try{for(const _0xb9d3df of['players','playersD2',_0x232766(0x2bb),_0x232766(0x1cb)]){const _0x52df8d=await getDoc(doc(db,_0xb9d3df,_0x41efd9));if(_0x52df8d[_0x232766(0x2b2)]()&&_0x52df8d['data']()['username']){const _0x243317=_0x52df8d[_0x232766(0x16c)]()['username'];return _0xc78123['set'](_0x41efd9,_0x243317),_0x243317;}}return _0x41efd9;}catch(_0x60684d){return console[_0x232766(0xc5)]('Error\x20resolving\x20username\x20for\x20'+_0x41efd9+':',_0x60684d),_0x41efd9;}};for(const _0x7dc84 of _0x3c63c6['docs']){const _0x1427a2=_0x7dc84['data'](),_0x145995=document['createElement']('tr'),_0x512906=_0x1427a2['timestamp']?new Date(_0x1427a2[_0x50b226(0x25e)][_0x50b226(0x20c)]*0x3e8)['toLocaleString']():'N/A',_0x3e7832=_0x1427a2['newElo']-_0x1427a2['previousElo'],_0x595a84=_0x3e7832>0x0?_0x50b226(0xa5):_0x3e7832<0x0?'negative-change':'',_0x3ec1a1=_0x3e7832>0x0?'+':'',_0x34a7e1=_0x1427a2[_0x50b226(0x12d)]||_0x1427a2['username']||_0x1427a2['userId']||_0x50b226(0x120),_0x564727=await _0xdec0e5(_0x34a7e1);_0x145995['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x512906+_0x50b226(0x1a6)+_0x564727+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x1427a2[_0x50b226(0x1ba)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x1427a2['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x595a84+'\x22>'+_0x3ec1a1+_0x3e7832+_0x50b226(0x2c6)+formatHistoryType(_0x1427a2['type'])+_0x50b226(0xc3)+(_0x1427a2['modifiedBy']||_0x1427a2[_0x50b226(0x11e)]||_0x1427a2[_0x50b226(0x206)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1230a7[_0x50b226(0x1a0)](_0x145995);}document['getElementById'](_0x4e0dd5+'-page-indicator')['textContent']=_0x50b226(0x1e9)+_0x2dfe3d;const _0x2203c3=document[_0x50b226(0x2c1)](_0x4e0dd5+'-prev-page'),_0x168b9a=document[_0x50b226(0x2c1)](_0x4e0dd5+'-next-page');if(_0x2203c3)_0x2203c3[_0x50b226(0x28a)]=_0x2dfe3d<=0x1;const _0x71ad08=query(_0x312e91,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x4e0dd5]['lastVisible']),limit(0x1)),_0x41eca3=await getDocs(_0x71ad08);if(_0x168b9a)_0x168b9a[_0x50b226(0x28a)]=_0x41eca3['empty'];}catch(_0x3d6cca){console['error']('Error\x20loading\x20ELO\x20history:',_0x3d6cca),_0x1230a7[_0x50b226(0xc6)]=_0x50b226(0x198)+_0x3d6cca['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x17af4a){const _0xcc92a1=a2_0x53ab39;switch(_0x17af4a){case'match_result':return _0xcc92a1(0x1e1);case'promotion':return _0xcc92a1(0x24b);case _0xcc92a1(0x2be):return'Demotion';case _0xcc92a1(0x97):return'Admin\x20Adjustment';case _0xcc92a1(0x16f):return'Initial\x20Placement';default:return _0x17af4a||'Unknown';}}function setupEloHistorySection(){const _0x506f51=a2_0x53ab39;document['getElementById'](_0x506f51(0x21e))[_0x506f51(0x2c9)](_0x506f51(0x237),()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')['addEventListener'](_0x506f51(0x237),()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById'](_0x506f51(0x107))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document[_0x506f51(0x2c1)]('d2-next-page')['addEventListener']('click',()=>{const _0x523048=_0x506f51;loadEloHistory(eloHistoryPagination['d2'][_0x523048(0x1d0)]+0x1);});const _0xb65235=document['getElementById']('d3-prev-page'),_0x42ff97=document['getElementById'](_0x506f51(0x25f));_0xb65235&&_0xb65235['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x42ff97&&_0x42ff97[_0x506f51(0x2c9)](_0x506f51(0x237),()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x2f01c8=document[_0x506f51(0x2c1)](_0x506f51(0xce));_0x2f01c8&&_0x2f01c8['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x4356aa=document['getElementById']('history-type-filter');_0x4356aa&&_0x4356aa['addEventListener']('change',applyEloHistoryFilters);const _0x5a782c=document['getElementById'](_0x506f51(0x16e));_0x5a782c&&_0x5a782c['addEventListener']('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x274dab=a2_0x53ab39,_0x24c87f=document[_0x274dab(0x2c1)]('elo-history-search')['value'][_0x274dab(0x27a)](),_0x5a9424=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x3d0d9c=0x0;_0x5a9424['forEach'](_0x45723a=>{const _0x5625b0=_0x274dab;if(_0x45723a['classList']['contains']('loading-cell')||_0x45723a[_0x5625b0(0x18f)]['contains']('empty-state')||_0x45723a[_0x5625b0(0x18f)]['contains']('error-state'))return;const _0x35ffde=_0x45723a['querySelector']('.player')?.[_0x5625b0(0xd2)]['toLowerCase']()||'',_0x30c7b9=_0x45723a[_0x5625b0(0xae)]('.type')?.[_0x5625b0(0xd2)]['toLowerCase']()||'',_0x49089e=_0x45723a[_0x5625b0(0xae)]('.admin-action')?.[_0x5625b0(0xd2)]['toLowerCase']()||'';_0x35ffde[_0x5625b0(0x282)](_0x24c87f)||_0x30c7b9[_0x5625b0(0x282)](_0x24c87f)||_0x49089e['includes'](_0x24c87f)?(_0x45723a[_0x5625b0(0x227)]['display']='',_0x3d0d9c++):_0x45723a['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x41ff58=a2_0x53ab39,_0x9cf9=document['getElementById']('history-start-date')['value'],_0x1688de=document['getElementById']('history-end-date')['value'],_0x11e2c8=document['getElementById']('history-type-filter')['value'],_0x15ccb9=currentLadder['toLowerCase']();eloHistoryPagination[_0x15ccb9]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x1356f9=document['getElementById']('elo-history-table-body');_0x1356f9['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x48cd57=currentLadder==='D1'?_0x41ff58(0xd9):_0x41ff58(0x211),_0x3d6324=collection(db,_0x48cd57);let _0x17e96f=[orderBy('timestamp','desc')];if(_0x9cf9){const _0x52e44d=new Date(_0x9cf9);_0x52e44d['setHours'](0x0,0x0,0x0,0x0),_0x17e96f['push'](where(_0x41ff58(0x25e),'>=',_0x52e44d));}if(_0x1688de){const _0x5080b3=new Date(_0x1688de);_0x5080b3[_0x41ff58(0x150)](0x17,0x3b,0x3b,0x3e7),_0x17e96f['push'](where('timestamp','<=',_0x5080b3));}_0x11e2c8&&_0x11e2c8!==_0x41ff58(0x274)&&_0x17e96f['push'](where('type','==',_0x11e2c8));_0x17e96f[_0x41ff58(0xec)](limit(PAGE_SIZE));const _0x592740=query(_0x3d6324,..._0x17e96f),_0x5c9226=await getDocs(_0x592740);!_0x5c9226['empty']&&(eloHistoryPagination[_0x15ccb9]['firstVisible']=_0x5c9226['docs'][0x0],eloHistoryPagination[_0x15ccb9]['lastVisible']=_0x5c9226['docs'][_0x5c9226['docs'][_0x41ff58(0x1e4)]-0x1]);_0x1356f9['innerHTML']='';if(_0x5c9226['empty']){_0x1356f9[_0x41ff58(0xc6)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x5c9226['forEach'](_0x36b2ff=>{const _0x534e7f=_0x41ff58,_0x35d84b=_0x36b2ff['data'](),_0x4efbd8=document[_0x534e7f(0x148)]('tr'),_0x439b07=_0x35d84b['timestamp']?new Date(_0x35d84b['timestamp'][_0x534e7f(0x20c)]*0x3e8)['toLocaleString']():'N/A',_0x38079f=_0x35d84b[_0x534e7f(0x21a)]-_0x35d84b['previousElo'],_0x530ee4=_0x38079f>0x0?'positive-change':_0x38079f<0x0?_0x534e7f(0x2d2):'',_0x8d9ac2=_0x38079f>0x0?'+':'',_0xffcfd1=_0x35d84b['player']||_0x35d84b['username']||_0x35d84b['userId']||'N/A';_0x4efbd8['innerHTML']=_0x534e7f(0x193)+_0x439b07+_0x534e7f(0x1a6)+_0xffcfd1+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x35d84b[_0x534e7f(0x1ba)]||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x35d84b['newElo']||'N/A')+_0x534e7f(0x1b0)+_0x530ee4+'\x22>'+_0x8d9ac2+_0x38079f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x35d84b['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x35d84b[_0x534e7f(0xa3)]||_0x35d84b[_0x534e7f(0x11e)]||_0x35d84b['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1356f9['appendChild'](_0x4efbd8);}),document['getElementById'](_0x15ccb9+'-page-indicator')['textContent']='Page\x201';}catch(_0x2c7037){console['error']('Error\x20applying\x20filters:',_0x2c7037),_0x1356f9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x2c7037['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x485e31=a2_0x53ab39;document['getElementById']('history-start-date')[_0x485e31(0x1f0)]='',document['getElementById']('history-end-date')[_0x485e31(0x1f0)]='',document[_0x485e31(0x2c1)]('history-type-filter')['value']='all',document['getElementById']('elo-history-search')['value']='';const _0x31e7b8=currentLadder[_0x485e31(0x27a)]();eloHistoryPagination[_0x31e7b8]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x254443=a2_0x53ab39,_0xe1575b=document['getElementById']('promote-player-btn'),_0x201c2e=document['getElementById'](_0x254443(0x28c)),_0x228f5a=document['getElementById']('promote-form');_0xe1575b&&_0x201c2e&&_0x228f5a&&(_0xe1575b['addEventListener']('click',()=>{const _0x376e17=_0x254443;_0x201c2e['classList']['add'](_0x376e17(0x2cb));}),_0x201c2e[_0x254443(0x2c9)](_0x254443(0x237),_0x25f6d8=>{const _0x1b4b77=_0x254443;_0x25f6d8['target']===_0x201c2e&&_0x201c2e['classList']['remove'](_0x1b4b77(0x2cb));}),_0x228f5a[_0x254443(0x2c9)](_0x254443(0x216),async _0x7e666a=>{const _0x44bb2c=_0x254443;_0x7e666a['preventDefault']();const _0x343aee=document['getElementById']('promote-username'),_0x530e20=document['getElementById']('promote-ladder'),_0x175361=_0x343aee['value'][_0x44bb2c(0x14f)](),_0x4223a7=_0x530e20[_0x44bb2c(0x1f0)];if(!_0x175361){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x175361,_0x4223a7),_0x201c2e[_0x44bb2c(0x18f)]['remove'](_0x44bb2c(0x2cb)),_0x343aee[_0x44bb2c(0x1f0)]='';}catch(_0x1e220e){showNotification(_0x1e220e[_0x44bb2c(0x11f)],'error');}}),document['getElementById']('cancel-promote-btn')[_0x254443(0x2c9)]('click',()=>{_0x201c2e['classList']['remove']('active');}));const _0x37aaef=document[_0x254443(0x2c1)]('demote-player-btn'),_0x26ffd7=document['getElementById']('demote-modal'),_0x4f678a=document['getElementById'](_0x254443(0x259));_0x37aaef&&_0x26ffd7&&_0x4f678a&&(_0x37aaef['addEventListener'](_0x254443(0x237),()=>{const _0x353ad7=_0x254443;_0x26ffd7['classList']['add'](_0x353ad7(0x2cb));}),_0x26ffd7['addEventListener'](_0x254443(0x237),_0x1a7b23=>{const _0x59dd63=_0x254443;_0x1a7b23['target']===_0x26ffd7&&_0x26ffd7['classList'][_0x59dd63(0x226)]('active');}),_0x4f678a[_0x254443(0x2c9)]('submit',async _0x10dd94=>{const _0x4fe17a=_0x254443;_0x10dd94['preventDefault']();const _0x1fd072=document[_0x4fe17a(0x2c1)]('demote-username'),_0x1317dc=document['getElementById']('demote-ladder'),_0x48aee6=_0x1fd072['value'][_0x4fe17a(0x14f)](),_0x7af019=_0x1317dc['value'];if(!_0x48aee6){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x48aee6,_0x7af019),document[_0x4fe17a(0x2c1)]('demote-modal')['classList']['remove'](_0x4fe17a(0x2cb)),document['getElementById']('demote-username')['value']='';}catch(_0x4485a0){console['error'](_0x4fe17a(0xb0),_0x4485a0);}}));const _0x44dfe5=document[_0x254443(0x2c1)](_0x254443(0xde)),_0x459c9d=document['getElementById']('set-elo-modal'),_0x44f27e=document[_0x254443(0x2c1)]('set-elo-form');_0x44dfe5&&_0x459c9d&&_0x44f27e&&(_0x44dfe5['addEventListener']('click',()=>{const _0x3eeb52=_0x254443;_0x459c9d[_0x3eeb52(0x18f)]['add']('active');}),_0x459c9d['addEventListener']('click',_0xdc326a=>{const _0x67f9f9=_0x254443;_0xdc326a['target']===_0x459c9d&&_0x459c9d['classList'][_0x67f9f9(0x226)]('active');}),_0x44f27e['addEventListener']('submit',async _0x1bcdf1=>{const _0x3f1ea3=_0x254443;_0x1bcdf1['preventDefault']();const _0x32fe11=document[_0x3f1ea3(0x2c1)]('set-elo-username'),_0xe35afb=document[_0x3f1ea3(0x2c1)](_0x3f1ea3(0x219));let _0x385376;const _0x339317=document['getElementById'](_0x3f1ea3(0x221)),_0x16095b=document[_0x3f1ea3(0xae)]('input[name=\x22set-elo-ladder\x22]:checked');if(_0x339317)_0x385376=_0x339317[_0x3f1ea3(0x1f0)];else _0x16095b?_0x385376=_0x16095b['value']:_0x385376='D1';if(!_0x32fe11||!_0xe35afb){showNotification(_0x3f1ea3(0x292),'error');return;}const _0x431b3e=_0x32fe11[_0x3f1ea3(0x1f0)][_0x3f1ea3(0x14f)](),_0x47b713=parseInt(_0xe35afb['value']);if(!_0x431b3e||isNaN(_0x47b713)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}try{await setCustomElo(_0x431b3e,_0x47b713,_0x385376),_0x459c9d[_0x3f1ea3(0x18f)]['remove']('active'),_0x32fe11[_0x3f1ea3(0x1f0)]='',_0xe35afb['value']='';}catch(_0x5dc2eb){showNotification(_0x5dc2eb[_0x3f1ea3(0x11f)],'error');}}),document['getElementById']('cancel-set-elo-btn')['addEventListener'](_0x254443(0x237),()=>{const _0x104eaa=_0x254443;_0x459c9d['classList'][_0x104eaa(0x226)]('active');}));const _0x2c71e6=document['getElementById']('set-role-modal'),_0x93b0a0=document['getElementById']('set-role-form');if(_0x2c71e6&&_0x93b0a0){_0x2c71e6['addEventListener']('click',_0x4825eb=>{_0x4825eb['target']===_0x2c71e6&&closeModalHandler();}),_0x93b0a0[_0x254443(0x2c9)]('submit',async _0x774879=>{const _0x39ffb8=_0x254443;_0x774879[_0x39ffb8(0x187)]();const _0x5ce422=document['getElementById'](_0x39ffb8(0x26e)),_0x17f8a3=document['getElementById']('role-name'),_0x195ad7=document[_0x39ffb8(0x2c1)]('role-color'),_0x43cc7a=_0x5ce422['value'][_0x39ffb8(0x14f)](),_0x4d0de8=_0x17f8a3['value'][_0x39ffb8(0x14f)](),_0x24bda6=_0x195ad7['value'];if(!_0x43cc7a){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x43cc7a,_0x4d0de8,_0x24bda6),closeModalHandler(),loadUsersWithRoles();}catch(_0x237fd5){}});const _0x5260c9=document['getElementById']('cancel-role-btn');_0x5260c9&&(_0x5260c9['removeEventListener'](_0x254443(0x237),closeModalHandler),_0x5260c9['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x23de72,_0x29ed2f){const _0x3dd6b8=a2_0x53ab39;try{console['log'](_0x3dd6b8(0x2b1)+_0x23de72+'\x20in\x20'+_0x29ed2f+'\x20ladder');const _0x48632d=auth['currentUser'];if(!_0x48632d)throw new Error(_0x3dd6b8(0x26c));const _0x90f10b=_0x29ed2f==='D2'?'playersD2':'players',_0x3474ba=_0x29ed2f==='D2'?'eloHistoryD2':_0x3dd6b8(0xd9);console[_0x3dd6b8(0x7f)](_0x3dd6b8(0x24d)+_0x90f10b);const _0x2da20a=collection(db,_0x90f10b),_0x400340=query(_0x2da20a,where(_0x3dd6b8(0x2c3),'==',_0x23de72)),_0x5783ac=await getDocs(_0x400340);if(_0x5783ac['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x29ed2f+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x29ed2f+'\x20ladder');}const _0x371420=_0x5783ac['docs'][0x0],_0x11c43b=_0x371420['data'](),_0x2bd0ff=_0x11c43b['eloRating']||0x4b0,_0x5b935d=_0x371420['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x2bd0ff);const _0x3c9d71=[{'name':_0x3dd6b8(0x240),'elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':_0x3dd6b8(0x268),'elo':0x7d0}];let _0x5731b1=_0x3c9d71['find'](_0x138a65=>_0x138a65['elo']>_0x2bd0ff);if(!_0x5731b1){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x29ed2f+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x29ed2f+'\x20ladder');}console[_0x3dd6b8(0x7f)]('Promoting\x20player\x20to\x20'+_0x5731b1['name']+'\x20('+_0x5731b1['elo']+')'),await updateDoc(doc(db,_0x90f10b,_0x371420['id']),{'eloRating':_0x5731b1['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x48632d['email']||'admin'}),await addDoc(collection(db,_0x3474ba),{'player':_0x23de72,'previousElo':_0x2bd0ff,'newElo':_0x5731b1['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x5731b1['name'],'promotedBy':_0x48632d['email']||_0x3dd6b8(0xca),'gameMode':_0x29ed2f});try{const {promotionManager:_0x22ee14}=await import('./promotions.js'),_0x1967bf=_0x22ee14[_0x3dd6b8(0x1d8)](_0x2bd0ff),_0x3e3c78=_0x5731b1[_0x3dd6b8(0x142)];await _0x22ee14['sendPromotionNotification'](_0x5b935d,_0x23de72,_0x2bd0ff,_0x5731b1[_0x3dd6b8(0x182)],_0x1967bf,_0x3e3c78,_0x3dd6b8(0x123),{'displayName':_0x23de72,'source':'admin','adminUser':_0x48632d['email'],'ladder':_0x29ed2f}),console['log'](_0x3dd6b8(0x8a));}catch(_0x4f40dd){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x4f40dd);}return alert('Successfully\x20promoted\x20'+_0x23de72+'\x20to\x20'+_0x5731b1[_0x3dd6b8(0x142)]+'\x20('+_0x5731b1['elo']+')'),currentLadder===_0x29ed2f&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x11f476){console[_0x3dd6b8(0x245)]('Error\x20promoting\x20player:',_0x11f476),alert(_0x3dd6b8(0x200)+_0x11f476['message']);throw _0x11f476;}}document['addEventListener'](a2_0x53ab39(0x2a0),()=>{const _0x15eb3b=document['getElementById']('promote-form');_0x15eb3b&&_0x15eb3b['addEventListener']('submit',async _0x59cf25=>{const _0x16abc8=a2_0x3e7c;_0x59cf25['preventDefault']();const _0x8b7720=document[_0x16abc8(0x2c1)]('promote-username')[_0x16abc8(0x1f0)]['trim'](),_0x3daaef=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x8b7720){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x8b7720,_0x3daaef),document['getElementById'](_0x16abc8(0x28c))['classList']['remove']('active'),document['getElementById'](_0x16abc8(0xf1))['value']='';}catch(_0xfd27a8){console['error']('Error\x20in\x20promotion:',_0xfd27a8);}});});async function demotePlayer(_0x379d8c,_0x2c3df1){const _0xe4813=a2_0x53ab39;try{console['log']('Attempting\x20to\x20demote\x20'+_0x379d8c+'\x20in\x20'+_0x2c3df1+'\x20ladder');const _0x550987=auth['currentUser'];if(!_0x550987)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x3d7c45=_0x2c3df1==='D2'?'playersD2':'players',_0x1e65ba=_0x2c3df1==='D2'?_0xe4813(0x211):'eloHistory';console['log'](_0xe4813(0x24d)+_0x3d7c45);const _0x5519d0=collection(db,_0x3d7c45),_0x3d7cf1=query(_0x5519d0,where('username','==',_0x379d8c)),_0x456a84=await getDocs(_0x3d7cf1);if(_0x456a84['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x2c3df1+'\x20ladder');throw new Error(_0xe4813(0xcc)+_0x2c3df1+_0xe4813(0x224));}const _0x118bf7=_0x456a84['docs'][0x0],_0x5b12b1=_0x118bf7[_0xe4813(0x16c)](),_0x5d8b54=_0x5b12b1[_0xe4813(0x286)]||0x4b0;console[_0xe4813(0x7f)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x5d8b54);const _0x43f216=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x3434a1=_0x43f216['find'](_0x439d2a=>_0x439d2a['elo']<_0x5d8b54);if(!_0x3434a1){alert(_0xe4813(0x124)+_0x2c3df1+'\x20ladder');throw new Error(_0xe4813(0x124)+_0x2c3df1+'\x20ladder');}console[_0xe4813(0x7f)]('Demoting\x20player\x20to\x20'+_0x3434a1[_0xe4813(0x142)]+'\x20('+_0x3434a1['elo']+')'),await updateDoc(doc(db,_0x3d7c45,_0x118bf7['id']),{'eloRating':_0x3434a1['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x550987['email']||'admin'}),await addDoc(collection(db,_0x1e65ba),{'player':_0x379d8c,'previousElo':_0x5d8b54,'newElo':_0x3434a1['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x3434a1[_0xe4813(0x142)],'demotedBy':_0x550987['email']||'admin','gameMode':_0x2c3df1});try{const {promotionManager:_0x33a7fd}=await import('./promotions.js'),_0x231aac=_0x33a7fd[_0xe4813(0x1d8)](_0x5d8b54),_0x1fc1e8=_0x3434a1['name'];await _0x33a7fd['sendPromotionNotification'](_0x118bf7['id'],_0x379d8c,_0x5d8b54,_0x3434a1['elo'],_0x231aac,_0x1fc1e8,_0xe4813(0x2be),{'displayName':_0x379d8c,'source':'admin','adminUser':_0x550987['email'],'ladder':_0x2c3df1}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x24e5d4){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x24e5d4);}return alert(_0xe4813(0x1fb)+_0x379d8c+'\x20to\x20'+_0x3434a1['name']+'\x20('+_0x3434a1['elo']+')'),currentLadder===_0x2c3df1&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x950411){console[_0xe4813(0x245)]('Error\x20demoting\x20player:',_0x950411),alert('Error\x20demoting\x20player:\x20'+_0x950411[_0xe4813(0x11f)]);throw _0x950411;}}document[a2_0x53ab39(0x2c9)](a2_0x53ab39(0x2a0),()=>{const _0x2564a4=a2_0x53ab39,_0x2c2fc5=document[_0x2564a4(0x2c1)](_0x2564a4(0x259));_0x2c2fc5&&_0x2c2fc5[_0x2564a4(0x2c9)]('submit',async _0x42596e=>{const _0xeac0b6=_0x2564a4;_0x42596e[_0xeac0b6(0x187)]();const _0x2831c8=document[_0xeac0b6(0x2c1)](_0xeac0b6(0x24f))['value']['trim'](),_0x2be93b=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x2831c8){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x2831c8,_0x2be93b),document['getElementById']('demote-modal')['classList']['remove'](_0xeac0b6(0x2cb)),document[_0xeac0b6(0x2c1)]('demote-username')['value']='';}catch(_0xbb49d5){console['error']('Error\x20in\x20demotion:',_0xbb49d5);}});});async function setCustomElo(_0x41b4bd,_0x1656b2,_0x1a4a0b){const _0xb71d5a=a2_0x53ab39;try{const _0x5c8a43=auth[_0xb71d5a(0x29f)];if(!_0x5c8a43||!isAdmin(_0x5c8a43[_0xb71d5a(0x1f5)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x426789=_0x1a4a0b==='D2'?_0xb71d5a(0x138):'players',_0x4290e6=_0x1a4a0b==='D2'?'eloHistoryD2':'eloHistory',_0x28661=collection(db,_0x426789),_0x1bdbc3=query(_0x28661,where(_0xb71d5a(0x2c3),'==',_0x41b4bd)),_0x1fe3b0=await getDocs(_0x1bdbc3);if(_0x1fe3b0['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x1a4a0b+'\x20ladder');const _0x343255=_0x1fe3b0[_0xb71d5a(0x278)][0x0],_0x5c80ce=_0x343255[_0xb71d5a(0x16c)](),_0x366a51=_0x5c80ce['eloRating']||0x4b0,_0x34b47b=writeBatch(db);_0x34b47b['update'](doc(db,_0x426789,_0x343255['id']),{'eloRating':_0x1656b2,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x5c8a43['email']});const _0x5c7984=doc(collection(db,_0x4290e6));return _0x34b47b['set'](_0x5c7984,{'player':_0x41b4bd,'previousElo':_0x366a51,'newElo':_0x1656b2,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x5c8a43['email'],'gameMode':_0x1a4a0b}),await _0x34b47b[_0xb71d5a(0x188)](),showNotification('ELO\x20rating\x20for\x20'+_0x41b4bd+'\x20was\x20updated\x20from\x20'+_0x366a51+_0xb71d5a(0x1d4)+_0x1656b2,'success'),currentLadder===_0x1a4a0b&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x39a8b8){console['error'](_0xb71d5a(0x2ce),_0x39a8b8);throw _0x39a8b8;}}async function setUserRole(_0xcef3c7,_0x2e9742,_0x56691d){const _0x4467db=a2_0x53ab39;try{const _0xbd6448=auth['currentUser'];if(!_0xbd6448||!isAdmin(_0xbd6448['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x3f61d6=_0x2e9742?_0x2e9742['trim']():null,_0x3ced0e=_0x3f61d6?_0x56691d||_0x4467db(0x149):null,[_0x8c7b4f,_0x100fbb]=await Promise[_0x4467db(0x274)]([getDocs(query(collection(db,'players'),where('username','==',_0xcef3c7))),getDocs(query(collection(db,'playersD2'),where('username','==',_0xcef3c7)))]),_0x18548e=[];if(!_0x8c7b4f[_0x4467db(0xa2)])_0x18548e['push']({'ref':_0x8c7b4f[_0x4467db(0x278)][0x0]['ref'],'source':'D1'});if(!_0x100fbb[_0x4467db(0xa2)])_0x18548e['push']({'ref':_0x100fbb[_0x4467db(0x278)][0x0]['ref'],'source':'D2'});if(_0x18548e['length']===0x0){const [_0x8bd9b9,_0x3335aa]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0xcef3c7))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0xcef3c7)))]);if(!_0x8bd9b9['empty'])_0x18548e['push']({'ref':_0x8bd9b9['docs'][0x0]['ref'],'source':_0x4467db(0x212)});if(!_0x3335aa[_0x4467db(0xa2)])_0x18548e['push']({'ref':_0x3335aa['docs'][0x0]['ref'],'source':_0x4467db(0x1bf)});}if(_0x18548e['length']===0x0)throw new Error('User\x20\x22'+_0xcef3c7+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x3625d1=writeBatch(db);_0x18548e[_0x4467db(0x167)](_0x3ea3fa=>{const _0x411b61=_0x4467db;console['log']('Updating\x20role\x20for\x20'+_0xcef3c7+_0x411b61(0x105)+_0x3ea3fa['source']),!_0x3f61d6?_0x3625d1[_0x411b61(0x128)](_0x3ea3fa['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x3625d1['update'](_0x3ea3fa[_0x411b61(0x2b9)],{'roleName':_0x3f61d6,'roleColor':_0x3ced0e,'roleAssignedBy':_0xbd6448['email'],'roleAssignedAt':serverTimestamp()});}),await _0x3625d1['commit']();const _0xed2862=_0x3f61d6?'Role\x20\x22'+_0x3f61d6+'\x22\x20set':'Role\x20removed';return showNotification(_0xed2862+'\x20for\x20user\x20\x22'+_0xcef3c7+'\x22','success'),!![];}catch(_0x33d46f){console['error']('Error\x20setting\x20user\x20role:',_0x33d46f),showNotification('Error:\x20'+_0x33d46f[_0x4467db(0x11f)],'error');throw _0x33d46f;}}function showNotification(_0x38d331,_0x98c177=a2_0x53ab39(0x251)){const _0x1716d5=a2_0x53ab39,_0x5a6f66=document['createElement']('div');_0x5a6f66['className']='notification\x20'+_0x98c177,_0x5a6f66['innerHTML']=_0x1716d5(0x1fc)+getNotificationIcon(_0x98c177)+_0x1716d5(0x1da)+_0x38d331+_0x1716d5(0x89),document[_0x1716d5(0x247)][_0x1716d5(0x1a0)](_0x5a6f66),setTimeout(()=>{const _0xeeec7=_0x1716d5;_0x5a6f66['classList'][_0xeeec7(0x17a)]('active');},0xa);const _0x1e9cff=setTimeout(()=>{closeNotification(_0x5a6f66);},0x1388);_0x5a6f66[_0x1716d5(0xae)]('.close-notification')[_0x1716d5(0x2c9)]('click',()=>{clearTimeout(_0x1e9cff),closeNotification(_0x5a6f66);});}function getNotificationIcon(_0x5c4271){const _0xf73658=a2_0x53ab39;switch(_0x5c4271){case'success':return'fa-check-circle';case _0xf73658(0x245):return'fa-exclamation-circle';case'warning':return _0xf73658(0x19d);case'info':default:return'fa-info-circle';}}function closeNotification(_0x2c9066){const _0x5a01b3=a2_0x53ab39;_0x2c9066['classList']['remove'](_0x5a01b3(0x2cb)),setTimeout(()=>{const _0x2edfee=_0x5a01b3;_0x2c9066[_0x2edfee(0x226)]();},0x12c);}function setupUserRolesSection(){const _0x235c31=a2_0x53ab39,_0x2fd16b=document[_0x235c31(0x2c1)]('load-users-data');_0x2fd16b&&_0x2fd16b[_0x235c31(0x2c9)]('click',function(){const _0x36bf53=_0x235c31;this[_0x36bf53(0x18f)][_0x36bf53(0x17a)]('loading'),this[_0x36bf53(0xc6)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()['then'](()=>{const _0x3885c2=_0x36bf53;this[_0x3885c2(0x18f)]['remove'](_0x3885c2(0x218)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x36bf53(0x141)](_0x477be0=>{const _0x46f239=_0x36bf53;console['error'](_0x46f239(0x174),_0x477be0),this[_0x46f239(0x18f)][_0x46f239(0x226)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4ba74d=_0x46f239;this['innerHTML']=_0x4ba74d(0x1e8);},0xbb8);});});const _0x32d910=document['getElementById']('add-new-role-btn');_0x32d910&&_0x32d910['addEventListener'](_0x235c31(0x237),()=>{const _0x8502c8=document['getElementById']('set-role-modal');_0x8502c8&&_0x8502c8['classList']['add']('active');});const _0x4f1dbc=document[_0x235c31(0x2c1)](_0x235c31(0x144));_0x4f1dbc&&_0x4f1dbc['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x13c6cd=document['getElementById']('role-filter');_0x13c6cd&&_0x13c6cd['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x52b26f=a2_0x53ab39,_0x19e96f=document['getElementById']('users-table-body');if(!_0x19e96f)return;_0x19e96f[_0x52b26f(0xc6)]=_0x52b26f(0x13d);try{const [_0x2a1407,_0x9a4ce2,_0x562568,_0x5f29b5]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x2829be=new Map();function _0x4bda8b(_0x430f7e,_0xa49121){_0x430f7e['forEach'](_0x1ad8d9=>{const _0x4cf07d=a2_0x3e7c,_0x170ee8=_0x1ad8d9['data']();if(!_0x170ee8['username'])return;if(!_0x2829be['has'](_0x170ee8[_0x4cf07d(0x2c3)]))_0x2829be[_0x4cf07d(0x9c)](_0x170ee8[_0x4cf07d(0x2c3)],{'username':_0x170ee8[_0x4cf07d(0x2c3)],'roleName':_0x170ee8['roleName']||null,'roleColor':_0x170ee8[_0x4cf07d(0x184)]||null,'roleAssignedBy':_0x170ee8['roleAssignedBy']||null,'roleAssignedAt':_0x170ee8[_0x4cf07d(0x23f)]||null,'sources':[_0xa49121]});else{const _0x2cbd6f=_0x2829be[_0x4cf07d(0x2cc)](_0x170ee8[_0x4cf07d(0x2c3)]);_0x170ee8['roleName']&&(!_0x2cbd6f['roleName']||_0xa49121==='D1'||_0xa49121==='D2')&&(_0x2cbd6f['roleName']=_0x170ee8[_0x4cf07d(0x119)],_0x2cbd6f['roleColor']=_0x170ee8[_0x4cf07d(0x184)],_0x2cbd6f['roleAssignedBy']=_0x170ee8['roleAssignedBy'],_0x2cbd6f['roleAssignedAt']=_0x170ee8['roleAssignedAt']),!_0x2cbd6f['sources']['includes'](_0xa49121)&&_0x2cbd6f['sources']['push'](_0xa49121);}});}_0x4bda8b(_0x2a1407,'D1'),_0x4bda8b(_0x9a4ce2,'D2'),_0x4bda8b(_0x562568,'Non-Participant'),_0x4bda8b(_0x5f29b5,_0x52b26f(0x2ae));const _0x3e3dea=Array['from'](_0x2829be['values']())['sort']((_0x45a7b3,_0x2c9b08)=>_0x45a7b3[_0x52b26f(0x2c3)][_0x52b26f(0x1d9)](_0x2c9b08[_0x52b26f(0x2c3)]));if(_0x3e3dea[_0x52b26f(0x1e4)]===0x0){_0x19e96f[_0x52b26f(0xc6)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x19e96f['innerHTML']='',_0x3e3dea['forEach'](_0x4b8c67=>{const _0x455e18=_0x52b26f,_0x3994fa=document['createElement']('tr');_0x3994fa['dataset']['username']=_0x4b8c67['username'],_0x3994fa['dataset'][_0x455e18(0x119)]=_0x4b8c67['roleName']||'',_0x3994fa[_0x455e18(0x277)]['roleColor']=_0x4b8c67['roleColor']||'#808080';const _0x7fd7f6=_0x4b8c67['roleAssignedAt']?new Date(_0x4b8c67['roleAssignedAt'][_0x455e18(0x20c)]*0x3e8)['toLocaleDateString']():_0x455e18(0x120),_0x31c915=_0x4b8c67['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x4b8c67[_0x455e18(0x184)]+';\x20color:\x20'+getContrastColor(_0x4b8c67[_0x455e18(0x184)])+_0x455e18(0x272)+_0x4b8c67['roleName']+_0x455e18(0x1b4):'<span\x20class=\x22no-role\x22>None</span>';_0x3994fa['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4b8c67['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x4b8c67['sources'][_0x455e18(0x264)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x31c915+_0x455e18(0x228)+(_0x4b8c67['roleAssignedBy']||'N/A')+_0x455e18(0x228)+_0x7fd7f6+_0x455e18(0x2c0)+_0x4b8c67['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4b8c67['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x4b8c67[_0x455e18(0x2c3)]+_0x455e18(0x2a3):'')+_0x455e18(0x1ce),_0x19e96f['appendChild'](_0x3994fa);}),document['querySelectorAll'](_0x52b26f(0x2b0))[_0x52b26f(0x167)](_0x14f104=>{const _0x2d6cb6=_0x52b26f;_0x14f104['addEventListener'](_0x2d6cb6(0x237),()=>{const _0x37d430=_0x14f104['dataset']['username'];openRoleEditModal(_0x37d430);});}),document['querySelectorAll'](_0x52b26f(0x1af))['forEach'](_0x170bbf=>{_0x170bbf['addEventListener']('click',()=>{const _0x1fe3ed=a2_0x3e7c,_0x205762=_0x170bbf['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x205762+'?')&&setUserRole(_0x205762,null,null)['then'](()=>loadUsersWithRoles())[_0x1fe3ed(0x141)](_0xe2d1fb=>console['error']('Error\x20removing\x20role:',_0xe2d1fb));});});}catch(_0x41e2e3){console['error']('Error\x20loading\x20users:',_0x41e2e3),_0x19e96f['innerHTML']=_0x52b26f(0x1a9);}}function openRoleEditModal(_0x390354){const _0x5c5ce2=a2_0x53ab39;console['log']('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0x390354);const _0x282235=document['getElementById']('set-role-modal'),_0x18519a=document['getElementById']('role-username'),_0x4ba9ad=document['getElementById'](_0x5c5ce2(0x262));if(!_0x282235){console['error'](_0x5c5ce2(0x270)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console[_0x5c5ce2(0x7f)]('Modal\x20element\x20found:',_0x282235);_0x18519a?(_0x18519a['value']=_0x390354,console[_0x5c5ce2(0x7f)]('Username\x20input\x20set\x20to:\x20'+_0x390354)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x21cc58=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x390354+'\x22]');if(_0x21cc58&&_0x4ba9ad){const _0x1d3c46=_0x21cc58['dataset']['role'];_0x4ba9ad['value']=_0x1d3c46==='none'?'':_0x1d3c46,console['log'](_0x5c5ce2(0x1c6)+_0x4ba9ad['value']+'\x20(based\x20on\x20data-role:\x20'+_0x1d3c46+')');}else{if(!_0x21cc58)console['warn'](_0x5c5ce2(0x2cf)+_0x390354+'\x20not\x20found.');if(!_0x4ba9ad)console[_0x5c5ce2(0xc5)]('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x4ba9ad)_0x4ba9ad['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x282235['classList']['add']('active');const _0x268bd1=document['getElementById'](_0x5c5ce2(0x147));_0x268bd1?(console[_0x5c5ce2(0x7f)]('Attaching\x20cancel\x20button\x20listener.'),_0x268bd1[_0x5c5ce2(0x21c)]('click',closeModalHandler),_0x268bd1[_0x5c5ce2(0x2c9)]('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x282235['removeEventListener'](_0x5c5ce2(0x237),closeModalBackgroundHandler),_0x282235['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x5676d8){_0x5676d8['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x4a43e3=a2_0x53ab39,_0x1a0c77=document['getElementById'](_0x4a43e3(0x25c));_0x1a0c77&&(_0x1a0c77[_0x4a43e3(0x18f)]['remove'](_0x4a43e3(0x2cb)),_0x1a0c77[_0x4a43e3(0x21c)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x153e31=a2_0x53ab39,_0x48c7db=document['getElementById']('user-search')?.[_0x153e31(0x1f0)]['toLowerCase']()||'',_0x5a0c9b=document['getElementById']('role-filter')?.['value']||'all',_0x7dbc60=document[_0x153e31(0x1e3)]('#users-table-body\x20tr');let _0x25b6f2=0x0;_0x7dbc60['forEach'](_0x255de8=>{const _0x726e19=_0x153e31;if(_0x255de8['querySelector']('.loading-cell')||_0x255de8['querySelector']('.empty-state')||_0x255de8[_0x726e19(0xae)](_0x726e19(0xf9)))return;const _0x29ca84=_0x255de8['dataset']['username']?.['toLowerCase']()||'',_0x435891=_0x255de8[_0x726e19(0x277)]['role']||'none',_0xe5adb1=_0x29ca84['includes'](_0x48c7db),_0x566575=_0x5a0c9b===_0x726e19(0x274)||_0x435891===_0x5a0c9b;_0xe5adb1&&_0x566575?(_0x255de8['style'][_0x726e19(0x1b8)]='',_0x25b6f2++):_0x255de8[_0x726e19(0x227)]['display']='none';});if(_0x25b6f2===0x0&&_0x7dbc60['length']>0x0){const _0x409bdb=document['getElementById']('users-table-body');if(_0x409bdb){if(!_0x409bdb['querySelector'](_0x153e31(0x25a))){const _0x5fafc0=document['createElement']('tr');_0x5fafc0['classList'][_0x153e31(0x17a)](_0x153e31(0x220)),_0x5fafc0[_0x153e31(0xc6)]='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x409bdb['appendChild'](_0x5fafc0);}}}else{const _0xacb62b=document[_0x153e31(0xae)]('.no-results');_0xacb62b&&_0xacb62b['remove']();}}function setupManageArticlesSection(){const _0x38f599=a2_0x53ab39,_0x3fc60f=document[_0x38f599(0x2c1)]('load-articles-data');_0x3fc60f&&_0x3fc60f['addEventListener']('click',function(){const _0x2d10d2=_0x38f599;this[_0x2d10d2(0x18f)]['add'](_0x2d10d2(0x218)),this[_0x2d10d2(0xc6)]=_0x2d10d2(0x1e0),loadArticles()['then'](()=>{const _0x421f6a=_0x2d10d2;this[_0x421f6a(0x18f)]['remove'](_0x421f6a(0x218)),this[_0x421f6a(0xc6)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x17db22=>{const _0x9b62d6=_0x2d10d2;console['error']('Error\x20loading\x20articles:',_0x17db22),this[_0x9b62d6(0x18f)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x29580c=_0x9b62d6;this['innerHTML']=_0x29580c(0x253);},0xbb8);});});const _0x43641a=document[_0x38f599(0x2c1)](_0x38f599(0x171));_0x43641a?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x43641a[_0x38f599(0x227)]['display']=_0x38f599(0x135),_0x43641a['addEventListener']('click',()=>{openArticleModal();})):console['error'](_0x38f599(0x8f));const _0x3f9a17=document['getElementById']('article-form');_0x3f9a17&&_0x3f9a17[_0x38f599(0x2c9)](_0x38f599(0x216),_0x4b5c96=>{_0x4b5c96['preventDefault'](),saveArticle();});const _0x17c743=document['getElementById']('cancel-article-btn');_0x17c743&&_0x17c743['addEventListener']('click',()=>{closeArticleModal();});const _0x2f095d=document[_0x38f599(0xae)]('#article-modal\x20.close-btn');_0x2f095d&&_0x2f095d['addEventListener']('click',()=>{closeArticleModal();});const _0x3646db=document['getElementById'](_0x38f599(0xa6));_0x3646db&&_0x3646db['addEventListener'](_0x38f599(0x237),_0x4aa7b8=>{_0x4aa7b8['target']===_0x3646db&&closeArticleModal();});}async function loadArticles(){const _0x3c69c9=a2_0x53ab39,_0x2f22a2=document['getElementById'](_0x3c69c9(0xb6));if(!_0x2f22a2)return;_0x2f22a2['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x10a806=collection(db,'articles'),_0x2a3d8e=query(_0x10a806,orderBy('createdAt',_0x3c69c9(0xa4))),_0x55e656=await getDocs(_0x2a3d8e);if(_0x55e656['empty']){_0x2f22a2['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x2f22a2['innerHTML']='',_0x55e656[_0x3c69c9(0x167)](_0x441e8b=>{const _0x2b4969=_0x3c69c9,_0x2989c7=_0x441e8b['data'](),_0xde07e=document['createElement']('tr'),_0x1c619b=_0x2989c7['createdAt']?new Date(_0x2989c7['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0xde07e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2989c7[_0x2b4969(0x23c)]||_0x2b4969(0x183))+_0x2b4969(0x228)+(_0x2989c7['author']||'Unknown')+_0x2b4969(0x228)+_0x1c619b+_0x2b4969(0x2cd)+_0x441e8b['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x441e8b['id']+_0x2b4969(0x1b2),_0x2f22a2['appendChild'](_0xde07e);}),setupArticleActionButtons();}catch(_0x15a000){console['error'](_0x3c69c9(0x1d5),_0x15a000),_0x2f22a2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x15a000['message']+_0x3c69c9(0x2d3);}}function setupArticleActionButtons(){const _0x2ceca3=a2_0x53ab39;document[_0x2ceca3(0x1e3)](_0x2ceca3(0x244))['forEach'](_0x403917=>{_0x403917['addEventListener']('click',async _0x56b6d3=>{const _0x251079=a2_0x3e7c,_0x292d46=_0x56b6d3['currentTarget'][_0x251079(0x277)]['id'];openArticleModal(_0x292d46);});}),document['querySelectorAll']('.delete-article-btn')['forEach'](_0x21d53c=>{_0x21d53c['addEventListener']('click',async _0x52ddf8=>{const _0x44f16a=_0x52ddf8['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x44f16a);});});}function openArticleModal(_0x4616d3=null){const _0x635afd=a2_0x53ab39,_0x1238ff=document['getElementById']('article-modal'),_0x11d6d0=document[_0x635afd(0x2c1)]('article-modal-title'),_0x345268=document['getElementById']('article-form'),_0x2264cb=document[_0x635afd(0x2c1)](_0x635afd(0x2a1));_0x345268[_0x635afd(0x1bb)](),_0x2264cb['value']='';if(_0x4616d3)_0x11d6d0['textContent']='Edit\x20Article',_0x2264cb[_0x635afd(0x1f0)]=_0x4616d3,loadArticleData(_0x4616d3);else{_0x11d6d0['textContent']=_0x635afd(0x1c9);const _0x57a3c6=auth[_0x635afd(0x29f)];if(_0x57a3c6){const _0x13fd75=document['getElementById']('article-author');if(_0x13fd75&&_0x57a3c6['displayName'])_0x13fd75[_0x635afd(0x1f0)]=_0x57a3c6['displayName'];else _0x13fd75&&(_0x13fd75['value']=_0x57a3c6[_0x635afd(0x1f5)]);}}_0x1238ff[_0x635afd(0x18f)][_0x635afd(0x17a)]('active');}async function loadArticleData(_0xa9ed9e){const _0x1832ae=a2_0x53ab39;try{const _0x796ba=doc(db,'articles',_0xa9ed9e),_0x579650=await getDoc(_0x796ba);if(!_0x579650['exists']()){showNotification(_0x1832ae(0x28b),'error');return;}const _0x3e5022=_0x579650['data']();document['getElementById'](_0x1832ae(0x2af))['value']=_0x3e5022['title']||'',document['getElementById'](_0x1832ae(0x26f))['value']=_0x3e5022['author']||'',document['getElementById']('article-image-url')['value']=_0x3e5022[_0x1832ae(0x20f)]||'',document['getElementById']('article-content')['value']=_0x3e5022['content']||'';}catch(_0x534736){console['error']('Error\x20loading\x20article\x20data:',_0x534736),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x5ac63c=a2_0x53ab39;try{const _0x256717=document['getElementById']('article-id')[_0x5ac63c(0x1f0)],_0x4e353b=document['getElementById'](_0x5ac63c(0x2af))['value']['trim'](),_0x395e3f=document[_0x5ac63c(0x2c1)](_0x5ac63c(0x26f))[_0x5ac63c(0x1f0)]['trim'](),_0x4d20f2=document[_0x5ac63c(0x2c1)]('article-image-url')['value'][_0x5ac63c(0x14f)](),_0x14e30e=document['getElementById'](_0x5ac63c(0xaa))[_0x5ac63c(0x1f0)]['trim']();if(!_0x4e353b||!_0x14e30e){showNotification(_0x5ac63c(0xb3),'error');return;}const _0x726b9=auth['currentUser'];if(!_0x726b9){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles',_0x5ac63c(0x245));return;}const _0x7f4393={'title':_0x4e353b,'author':_0x395e3f,'imageUrl':_0x4d20f2||null,'content':_0x14e30e,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x726b9['email']};!_0x256717?(_0x7f4393[_0x5ac63c(0x112)]=serverTimestamp(),_0x7f4393['createdBy']=_0x726b9['email'],await addDoc(collection(db,'articles'),_0x7f4393),showNotification('Article\x20created\x20successfully',_0x5ac63c(0x8c))):(await updateDoc(doc(db,'articles',_0x256717),_0x7f4393),showNotification(_0x5ac63c(0x1ec),'success')),closeArticleModal(),loadArticles();}catch(_0x371328){console['error']('Error\x20saving\x20article:',_0x371328),showNotification(_0x5ac63c(0xf4)+_0x371328[_0x5ac63c(0x11f)],'error');}}function closeArticleModal(){const _0x55c41e=a2_0x53ab39,_0x26ec44=document['getElementById']('article-modal');_0x26ec44&&_0x26ec44[_0x55c41e(0x18f)]['remove']('active');}async function confirmDeleteArticle(_0x6e4a71){const _0x13b025=a2_0x53ab39;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x13b025(0x24c),_0x6e4a71)),loadArticles(),showNotification(_0x13b025(0x18e),'success');}catch(_0x4dadf3){console['error'](_0x13b025(0x115),_0x4dadf3),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x4dadf3['message'],_0x13b025(0x245));}}function setupTrophyManagementSection(){const _0x480de5=a2_0x53ab39,_0x36145c=document['getElementById'](_0x480de5(0xdb));_0x36145c&&_0x36145c['addEventListener']('click',function(){const _0x5466a7=_0x480de5;this['classList'][_0x5466a7(0x17a)]('loading'),this[_0x5466a7(0xc6)]=_0x5466a7(0x1e0);const _0x9156b7=document['getElementById']('assign-trophy-image');_0x9156b7&&(_0x9156b7['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0x340e63=_0x5466a7;this['classList'][_0x340e63(0x226)]('loading'),this[_0x340e63(0xc6)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})[_0x5466a7(0x141)](_0x5c0794=>{console['error']('Error\x20loading\x20trophies:',_0x5c0794),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x271754=a2_0x3e7c;this[_0x271754(0xc6)]=_0x271754(0x256);},0xbb8);});});const _0x1085fa=document['getElementById']('create-new-trophy-btn');_0x1085fa&&_0x1085fa[_0x480de5(0x2c9)](_0x480de5(0x237),()=>{openTrophyModal();});const _0xbba8ea=document[_0x480de5(0x2c1)]('trophy-form');_0xbba8ea&&_0xbba8ea['addEventListener']('submit',_0x20dec3=>{const _0x5d6e81=_0x480de5;_0x20dec3[_0x5d6e81(0x187)](),saveTrophyDefinition();});const _0x5a81c1=document['getElementById']('cancel-trophy-btn');_0x5a81c1&&_0x5a81c1['addEventListener']('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')[_0x480de5(0x167)](_0x48ee1b=>{const _0x1609f4=_0x480de5;_0x48ee1b[_0x1609f4(0x2c9)]('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x4d3d4f=document[_0x480de5(0x2c1)]('trophy-modal');_0x4d3d4f&&_0x4d3d4f['addEventListener']('click',_0x17560f=>{const _0x39eae3=_0x480de5;_0x17560f[_0x39eae3(0x2a8)]===_0x4d3d4f&&closeTrophyModal();});const _0x2767f8=document[_0x480de5(0x2c1)]('assign-trophy-modal');_0x2767f8&&_0x2767f8['addEventListener']('click',_0x2c27f4=>{_0x2c27f4['target']===_0x2767f8&&closeAssignTrophyModal();});const _0x6e95af=document['getElementById']('assign-trophy-form');_0x6e95af&&_0x6e95af['addEventListener'](_0x480de5(0x216),_0x2aa750=>{_0x2aa750['preventDefault'](),assignTrophyToPlayer();});const _0x5b99ed=document['getElementById'](_0x480de5(0x1a5));_0x5b99ed&&_0x5b99ed['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x457fec=document[_0x480de5(0x2c1)](_0x480de5(0x2d0));_0x457fec&&(_0x457fec['addEventListener'](_0x480de5(0xf3),updateTrophyImagePreview),_0x457fec[_0x480de5(0x2c9)]('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x91b1a8=a2_0x53ab39,_0x194d6e=document['getElementById']('trophy-image-url')[_0x91b1a8(0x1f0)]['trim'](),_0x2a42dd=document['getElementById']('trophy-image-preview');if(!_0x2a42dd){const _0x40db85=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x19e0e6=document['createElement'](_0x91b1a8(0x129));_0x19e0e6['id']='trophy-image-preview',_0x19e0e6['className']='trophy-preview-container',_0x40db85[_0x91b1a8(0x1a0)](_0x19e0e6);const _0x4d5427=document['createElement'](_0x91b1a8(0x84));_0x4d5427['id']=_0x91b1a8(0x15d),_0x4d5427[_0x91b1a8(0x233)]='Trophy\x20Preview',_0x4d5427['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x19e0e6[_0x91b1a8(0x1a0)](_0x4d5427);}const _0x29426c=document[_0x91b1a8(0x2c1)]('trophy-preview-img');_0x194d6e?(_0x29426c[_0x91b1a8(0x162)]=_0x194d6e,_0x29426c['style'][_0x91b1a8(0x1b8)]=_0x91b1a8(0x135),_0x29426c['classList'][_0x91b1a8(0x226)]('error')):(_0x29426c['src']=DEFAULT_TROPHY_IMAGE,_0x29426c['style'][_0x91b1a8(0x1b8)]='block');}async function loadTrophyDefinitions(){const _0x3955be=a2_0x53ab39,_0x401541=document[_0x3955be(0x2c1)]('trophies-table-body');if(!_0x401541)return;_0x401541[_0x3955be(0xc6)]=_0x3955be(0x94);try{const _0x51a6a2=collection(db,'trophyDefinitions'),_0x338ceb=query(_0x51a6a2,orderBy('createdAt',_0x3955be(0xa4))),_0x5e4da5=await getDocs(_0x338ceb);if(_0x5e4da5[_0x3955be(0xa2)]){_0x401541['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x401541['innerHTML']='',_0x5e4da5['forEach'](_0x48fd09=>{const _0x825128=_0x3955be,_0x3f436e=_0x48fd09['data'](),_0x4b4c57=document['createElement']('tr'),_0x4356a6=_0x3f436e['createdAt']?new Date(_0x3f436e['createdAt']['seconds']*0x3e8)[_0x825128(0x13f)]():'N/A';_0x4b4c57[_0x825128(0xc6)]=_0x825128(0x121)+(_0x3f436e['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3f436e['name']+_0x825128(0xeb)+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x3f436e['name']||'Untitled\x20Trophy')+_0x825128(0x169)+(_0x3f436e['rarity']||'common')+'\x22>'+(_0x3f436e['rarity']||_0x825128(0x27f))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4356a6+_0x825128(0x8b)+_0x48fd09['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x48fd09['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x48fd09['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x401541['appendChild'](_0x4b4c57);}),setupTrophyActionButtons();}catch(_0x3f7393){console[_0x3955be(0x245)]('Error\x20loading\x20trophy\x20definitions:',_0x3f7393),_0x401541['innerHTML']=_0x3955be(0x231)+_0x3f7393['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x4f36e3=a2_0x53ab39;document['querySelectorAll']('.edit-trophy-btn')['forEach'](_0x5cb8bc=>{_0x5cb8bc['addEventListener']('click',_0xf798b9=>{const _0x4e7369=a2_0x3e7c,_0x160b33=_0xf798b9[_0x4e7369(0x1b1)][_0x4e7369(0x277)]['id'];openTrophyModal(_0x160b33);});}),document['querySelectorAll'](_0x4f36e3(0x257))[_0x4f36e3(0x167)](_0x3d556c=>{const _0x7fc452=_0x4f36e3;_0x3d556c[_0x7fc452(0x2c9)]('click',_0x20499d=>{const _0x46c4f9=_0x7fc452,_0x439277=_0x20499d[_0x46c4f9(0x1b1)]['dataset']['id'];openAssignTrophyModal(_0x439277);});}),document['querySelectorAll']('.delete-trophy-btn')['forEach'](_0x5b0877=>{_0x5b0877['addEventListener']('click',_0x5db5c1=>{const _0xe21e20=a2_0x3e7c,_0x29f04b=_0x5db5c1[_0xe21e20(0x1b1)][_0xe21e20(0x277)]['id'];confirmDeleteTrophy(_0x29f04b);});});}function openTrophyModal(_0x2e08b5=null){const _0x4bea27=a2_0x53ab39,_0x240f6f=document['getElementById']('trophy-modal'),_0x33a2d4=document['getElementById']('trophy-modal-title'),_0x5b1c1c=document['getElementById']('trophy-form'),_0x18ab1d=document['getElementById']('trophy-id');_0x5b1c1c['reset'](),_0x18ab1d['value']='';const _0x299d26=document[_0x4bea27(0x2c1)]('trophy-preview-img');_0x299d26&&(_0x299d26['src']=DEFAULT_TROPHY_IMAGE,_0x299d26['classList'][_0x4bea27(0x226)]('error')),_0x2e08b5?(_0x33a2d4['textContent']='Edit\x20Trophy',_0x18ab1d['value']=_0x2e08b5,loadTrophyData(_0x2e08b5)):_0x33a2d4[_0x4bea27(0xd2)]=_0x4bea27(0x15e),_0x240f6f['classList'][_0x4bea27(0x17a)]('active');}async function loadTrophyData(_0x4af45e){const _0x2e53db=a2_0x53ab39;try{const _0x56666d=doc(db,'trophyDefinitions',_0x4af45e),_0x1321d8=await getDoc(_0x56666d);if(!_0x1321d8['exists']()){showNotification(_0x2e53db(0x1c7),'error');return;}const _0x43ace6=_0x1321d8[_0x2e53db(0x16c)]();document[_0x2e53db(0x2c1)]('trophy-name')['value']=_0x43ace6[_0x2e53db(0x142)]||'',document['getElementById']('trophy-description')['value']=_0x43ace6['description']||'',document[_0x2e53db(0x2c1)]('trophy-image-url')['value']=_0x43ace6['image']||'',document['getElementById']('trophy-rarity')['value']=_0x43ace6[_0x2e53db(0x1c4)]||'common',updateTrophyImagePreview();}catch(_0xd54101){console[_0x2e53db(0x245)]('Error\x20loading\x20trophy\x20data:',_0xd54101),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x286e14=a2_0x53ab39;try{const _0x745e8a=document['getElementById']('trophy-id')['value'],_0x380598=document['getElementById'](_0x286e14(0x111))['value']['trim'](),_0x51ae63=document['getElementById']('trophy-description')[_0x286e14(0x1f0)]['trim'](),_0x3441cc=document['getElementById']('trophy-image-url')[_0x286e14(0x1f0)]['trim'](),_0x32952d=document['getElementById']('trophy-rarity')['value'];if(!_0x380598||!_0x51ae63||!_0x3441cc){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x3685e1=auth['currentUser'];if(!_0x3685e1){showNotification(_0x286e14(0x20e),_0x286e14(0x245));return;}const _0x2b3d60={'name':_0x380598,'description':_0x51ae63,'image':_0x3441cc,'rarity':_0x32952d,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x3685e1[_0x286e14(0x1f5)]};!_0x745e8a?(_0x2b3d60['createdAt']=serverTimestamp(),_0x2b3d60['createdBy']=_0x3685e1['email'],await addDoc(collection(db,_0x286e14(0xf6)),_0x2b3d60),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x745e8a),_0x2b3d60),showNotification('Trophy\x20updated\x20successfully',_0x286e14(0x8c))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x9c4783){console['error']('Error\x20saving\x20trophy:',_0x9c4783),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x9c4783['message'],_0x286e14(0x245));}}function closeTrophyModal(){const _0x29ad3b=a2_0x53ab39,_0x174a87=document['getElementById']('trophy-modal');_0x174a87&&_0x174a87[_0x29ad3b(0x18f)]['remove']('active');}async function confirmDeleteTrophy(_0x125f2e){const _0x2f4bea=a2_0x53ab39;if(!_0x125f2e){console[_0x2f4bea(0x245)](_0x2f4bea(0x1b5));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x4e50fd=auth['currentUser'];if(!_0x4e50fd){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','error');return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x125f2e),await deleteDoc(doc(db,'trophyDefinitions',_0x125f2e)),showNotification(_0x2f4bea(0x1fe),'success'),loadTrophyDefinitions();}catch(_0x2023f3){console['error'](_0x2f4bea(0x133),_0x2023f3),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x2023f3['message'],_0x2f4bea(0x245));}}async function openAssignTrophyModal(_0x431625){const _0xb61786=a2_0x53ab39;try{const _0x449000=doc(db,'trophyDefinitions',_0x431625),_0x4d70ab=await getDoc(_0x449000);if(!_0x4d70ab['exists']()){showNotification(_0xb61786(0x1c7),'error');return;}const _0xd01d0a=_0x4d70ab['data']();document[_0xb61786(0x2c1)]('assign-trophy-id')['value']=_0x431625,document['getElementById'](_0xb61786(0xe9))[_0xb61786(0x1f0)]=_0xd01d0a[_0xb61786(0x142)],document[_0xb61786(0x2c1)](_0xb61786(0x113))['src']=_0xd01d0a['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')['textContent']=_0xd01d0a['name']||_0xb61786(0x177),document['getElementById']('assign-trophy-description')['textContent']=_0xd01d0a['description']||'No\x20description';const _0x46cf36=document[_0xb61786(0x2c1)]('assign-trophy-rarity');_0x46cf36['textContent']=_0xd01d0a['rarity']||_0xb61786(0x27f),_0x46cf36['className']='trophy-rarity\x20'+(_0xd01d0a['rarity']||'common');const _0x33af91=document[_0xb61786(0x2c1)](_0xb61786(0x9d));_0x33af91['classList']['add']('active');}catch(_0x48559d){console['error'](_0xb61786(0x26d),_0x48559d),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x29b216=a2_0x53ab39,_0x233f5a=document[_0x29b216(0x2c1)]('assign-trophy-modal');_0x233f5a&&_0x233f5a['classList']['remove'](_0x29b216(0x2cb));}async function assignTrophyToPlayer(){const _0x2ac5d=a2_0x53ab39;try{const _0x4e076e=document['getElementById']('assign-trophy-id')['value'],_0x38b446=document[_0x2ac5d(0x2c1)](_0x2ac5d(0xe9))['value'],_0x4d8d5a=document['getElementById']('assign-player-username')['value']['trim'](),_0x43cf49=document[_0x2ac5d(0xae)]('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x4e076e||!_0x4d8d5a){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0x2ac5d(0x245));return;}const _0x1eae47=auth['currentUser'];if(!_0x1eae47){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x1537c7=null,_0x493156=null,_0xc96956=null;if(_0x43cf49==='non-participant'){const _0xd108a9=collection(db,_0x2ac5d(0x1cb)),_0xded053=query(_0xd108a9,where('username','==',_0x4d8d5a)),_0x5d12c8=await getDocs(_0xded053);!_0x5d12c8[_0x2ac5d(0xa2)]&&(_0x1537c7=_0x5d12c8[_0x2ac5d(0x278)][0x0],_0x493156=_0x1537c7['id'],_0xc96956=_0x1537c7[_0x2ac5d(0x16c)]());}else{const _0x302dbb=_0x43cf49==='D1'?'players':_0x43cf49==='D2'?'playersD2':'playersD3',_0x27d62e=collection(db,_0x302dbb),_0x57b323=query(_0x27d62e,where(_0x2ac5d(0x2c3),'==',_0x4d8d5a)),_0x9e501a=await getDocs(_0x57b323);!_0x9e501a['empty']&&(_0x1537c7=_0x9e501a[_0x2ac5d(0x278)][0x0],_0x493156=_0x1537c7['id'],_0xc96956=_0x1537c7['data']());}if(!_0x1537c7){showNotification('Player\x20\x22'+_0x4d8d5a+_0x2ac5d(0x190)+(_0x43cf49==='non-participant'?'non-participants':_0x43cf49+'\x20ladder'),'error');return;}const _0x3e69ff=collection(db,'userTrophies'),_0x1dbd19=query(_0x3e69ff,where('userId','==',_0x493156),where('trophyId','==',_0x4e076e)),_0x2d4a1c=await getDocs(_0x1dbd19);if(!_0x2d4a1c[_0x2ac5d(0xa2)]){showNotification('Player\x20\x22'+_0x4d8d5a+_0x2ac5d(0xa8),'warning');return;}await addDoc(collection(db,_0x2ac5d(0x27e)),{'userId':_0x493156,'playerUsername':_0x4d8d5a,'trophyId':_0x4e076e,'awardedAt':serverTimestamp(),'awardedBy':_0x1eae47['email'],'ladder':_0x43cf49}),showNotification(_0x2ac5d(0x160)+_0x38b446+'\x22\x20awarded\x20to\x20'+_0x4d8d5a,'success'),closeAssignTrophyModal();}catch(_0x2ccc2e){console['error'](_0x2ac5d(0x239),_0x2ccc2e),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x2ccc2e['message'],_0x2ac5d(0x245));}}function setupInactivePlayersSection(){const _0x13b6cc=a2_0x53ab39,_0x133ca6=document['getElementById'](_0x13b6cc(0x281));_0x133ca6&&_0x133ca6['addEventListener']('change',function(){const _0x40baab=_0x13b6cc,_0x289838=document[_0x40baab(0x2c1)](_0x40baab(0x1bc));if(_0x289838)_0x289838[_0x40baab(0x237)]();});const _0x55fd2c=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x43a9a7=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x55fd2c&&_0x43a9a7&&(_0x55fd2c['addEventListener']('change',function(){const _0x56f6b4=_0x13b6cc;if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')['style'][_0x56f6b4(0x1b8)]!=='none'){const _0x4d444d=document[_0x56f6b4(0x2c1)]('load-inactive-players-data');if(_0x4d444d)_0x4d444d['click']();}}}),_0x43a9a7['addEventListener']('change',function(){const _0x59ef8c=_0x13b6cc;if(this[_0x59ef8c(0x8d)]){currentLadder='D2';if(document['getElementById']('inactive-players')['style']['display']!==_0x59ef8c(0x88)){const _0x5d8d2e=document['getElementById']('load-inactive-players-data');if(_0x5d8d2e)_0x5d8d2e['click']();}}}));const _0x318292=document[_0x13b6cc(0x2c1)]('inactive-players-search');_0x318292&&_0x318292['addEventListener']('input',debounce(function(){const _0x4d1a12=_0x13b6cc,_0x1fb19b=_0x318292['value']['toLowerCase'](),_0x27d365=document[_0x4d1a12(0x1e3)]('#inactive-players-table-body\x20tr');_0x27d365['forEach'](_0x454c4d=>{const _0x5f400c=_0x4d1a12;if(_0x454c4d[_0x5f400c(0xae)]('.loading-cell')||_0x454c4d['querySelector']('.empty-state')||_0x454c4d[_0x5f400c(0xae)]('.error-state'))return;const _0x1736df=_0x454c4d[_0x5f400c(0x103)][0x0]?.['textContent']['toLowerCase']()||'',_0x188c23=_0x454c4d['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x1736df['includes'](_0x1fb19b)||_0x188c23['includes'](_0x1fb19b)?_0x454c4d['style']['display']='':_0x454c4d['style']['display']=_0x5f400c(0x88);});},0x12c)),document['addEventListener']('click',function(_0x636d29){const _0x406938=_0x13b6cc;if(_0x636d29['target']['closest']('.view-player-btn')){const _0x535bf6=_0x636d29[_0x406938(0x2a8)]['closest'](_0x406938(0x1dc)),_0x1b420a=_0x535bf6['dataset']['username'];_0x1b420a&&alert('View\x20player\x20details\x20for\x20'+_0x1b420a+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x32ed3b=a2_0x53ab39,_0x4d1a2a=document['getElementById']('inactive-players-table-body');if(!_0x4d1a2a)return;_0x4d1a2a[_0x32ed3b(0xc6)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x5f3cb3=document['getElementById'](_0x32ed3b(0x281)),_0x1baf37=_0x5f3cb3?parseInt(_0x5f3cb3[_0x32ed3b(0x1f0)])||0x0:0x0,_0x1531b9=collection(db,currentLadder==='D1'?'players':_0x32ed3b(0x138)),_0x47ddbb=await getDocs(_0x1531b9);if(_0x47ddbb['empty']){_0x4d1a2a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x237852=[];_0x47ddbb['forEach'](_0x3449a0=>{const _0x11784a=_0x32ed3b,_0xa9479b=_0x3449a0['data']();_0x237852[_0x11784a(0xec)]({..._0xa9479b,'id':_0x3449a0['id'],'username':_0xa9479b['username']||'Unknown\x20Player'});}),console[_0x32ed3b(0x7f)]('Found\x20'+_0x237852['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x3b57c9=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x31769e=_0x237852['map'](async _0x56e5bf=>{const _0x9ae49f=_0x32ed3b;try{const _0x39c2b8=collection(db,_0x3b57c9),_0x4ac62b=query(_0x39c2b8,or(where('winnerUsername','==',_0x56e5bf['username']),where('loserUsername','==',_0x56e5bf['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0xc71ee6=await getDocs(_0x4ac62b);if(!_0xc71ee6[_0x9ae49f(0xa2)]){const _0x236689=_0xc71ee6[_0x9ae49f(0x278)][0x0]['data'](),_0x57df78=_0x236689['approvedAt']?new Date(_0x236689['approvedAt']['seconds']*0x3e8):null,_0x2cfe25=new Date(),_0x21d4d8=_0x57df78?Math['floor']((_0x2cfe25-_0x57df78)/(0x3e8*0x3c*0x3c*0x18)):null,_0x15410b=_0x236689['winnerUsername']===_0x56e5bf['username']?_0x236689['loserUsername']:_0x236689['winnerUsername'],_0x30856f=_0x236689['winnerUsername']===_0x56e5bf['username']?'Won':_0x9ae49f(0x9b);return{..._0x56e5bf,'lastMatch':{'date':_0x57df78?_0x57df78['toLocaleDateString']():'N/A','opponent':_0x15410b||_0x9ae49f(0xed),'result':_0x30856f,'timestamp':_0x57df78||new Date(0x0),'daysSinceMatch':_0x21d4d8||Number['MAX_SAFE_INTEGER']}};}else return{..._0x56e5bf,'lastMatch':{'date':_0x9ae49f(0x241),'opponent':_0x9ae49f(0x120),'result':_0x9ae49f(0x120),'timestamp':new Date(0x0),'daysSinceMatch':Number[_0x9ae49f(0x285)]}};}catch(_0x141ddb){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x56e5bf['username']+':',_0x141ddb),{..._0x56e5bf,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x2df884=await Promise[_0x32ed3b(0x274)](_0x31769e);_0x2df884['sort']((_0x4af8d3,_0x3dc2b2)=>_0x3dc2b2['lastMatch']['daysSinceMatch']-_0x4af8d3[_0x32ed3b(0x232)][_0x32ed3b(0x254)]);_0x1baf37>0x0&&(_0x2df884=_0x2df884[_0x32ed3b(0x1a7)](_0x1aaad5=>_0x1aaad5['lastMatch']['daysSinceMatch']>=_0x1baf37));_0x4d1a2a['innerHTML']='';if(_0x2df884[_0x32ed3b(0x1e4)]===0x0){_0x4d1a2a['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x2df884['forEach'](_0x5ca38d=>{const _0x286473=_0x32ed3b,_0x370036=document['createElement']('tr'),_0x296e08=_0x5ca38d['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x5ca38d['lastMatch']['daysSinceMatch']>0xe?_0x286473(0x22a):'';_0x370036['className']=_0x296e08,_0x370036['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5ca38d[_0x286473(0x2c3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5ca38d['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5ca38d['lastMatch'][_0x286473(0x1a3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5ca38d['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x286473(0x120):_0x5ca38d['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+_0x286473(0x228)+(_0x5ca38d['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x5ca38d[_0x286473(0x232)][_0x286473(0x8e)]+'\x20vs\x20'+_0x5ca38d['lastMatch']['opponent'])+_0x286473(0x143)+_0x5ca38d['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4d1a2a[_0x286473(0x1a0)](_0x370036);}),console[_0x32ed3b(0x7f)]('Displaying\x20'+_0x2df884['length']+_0x32ed3b(0x12c));}catch(_0x47e827){console['error']('Error\x20loading\x20inactive\x20players:',_0x47e827),_0x4d1a2a[_0x32ed3b(0xc6)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x47e827['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x44c66a=a2_0x53ab39;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x564d6b=document['getElementById'](_0x44c66a(0x100));_0x564d6b&&_0x564d6b[_0x44c66a(0x2c9)](_0x44c66a(0x237),function(){const _0x26969c=_0x44c66a;console['log'](_0x26969c(0x192)),openHighlightModal('match');});const _0x49dc38=document['getElementById']('create-creator-highlight-btn');_0x49dc38&&_0x49dc38[_0x44c66a(0x2c9)]('click',function(){const _0x2b93b8=_0x44c66a;console[_0x2b93b8(0x7f)](_0x2b93b8(0x10f)),openHighlightModal('creator');});const _0x3737ca=document['getElementById'](_0x44c66a(0x1b7));_0x3737ca&&_0x3737ca['addEventListener']('click',function(){const _0x538610=_0x44c66a;console[_0x538610(0x7f)](_0x538610(0x161)),openHighlightModal('achievement');});}function openHighlightModal(_0x2f7866=a2_0x53ab39(0x153)){const _0x5c58d9=a2_0x53ab39;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x2f7866);const _0x26d3b3=document['getElementById']('highlight-modal'),_0x2a1974=document['getElementById'](_0x5c58d9(0x2ad)),_0xf21059=document['getElementById']('highlight-modal-title'),_0x175e13=document['getElementById'](_0x5c58d9(0x2ab));if(!_0x26d3b3||!_0x2a1974||!_0xf21059){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x2a1974['reset'](),_0x175e13['value']='';const _0x83f68d=['match','creator','achievement'],_0x44836e=!_0x83f68d[_0x5c58d9(0x282)](_0x2f7866);if(_0x44836e){const _0x256879=_0x2f7866;_0x175e13[_0x5c58d9(0x1f0)]=_0x256879,_0xf21059[_0x5c58d9(0xd2)]='Loading...',loadHighlightDataAdmin(_0x256879);}else{const _0x5a947c=_0x2f7866;document[_0x5c58d9(0x2c1)]('highlight-type')['value']=_0x5a947c,_0xf21059['textContent']='Create\x20New\x20'+getHighlightTypeName(_0x5a947c),toggleHighlightFields(_0x5a947c);const _0x21b9ad=auth[_0x5c58d9(0x29f)];_0x21b9ad&&document['getElementById']('highlight-submitted-by')&&(document['getElementById'](_0x5c58d9(0x80))[_0x5c58d9(0x1f0)]=_0x21b9ad['displayName']||_0x21b9ad['email']);}_0x26d3b3['classList'][_0x5c58d9(0x17a)]('active');}function toggleHighlightFields(_0x56d859){const _0x2240ab=a2_0x53ab39;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x56d859);const _0x4fd23a=document[_0x2240ab(0x2c1)]('highlight-form');if(!_0x4fd23a)return;const _0x4bd2cf=_0x4fd23a['querySelectorAll']('.form-group,\x20.form-row');_0x4bd2cf['forEach'](_0x1a61f9=>_0x1a61f9[_0x2240ab(0x227)]['display']='none');const _0x4e2ec0=document['getElementById']('highlight-video-preview-container');if(_0x4e2ec0)_0x4e2ec0[_0x2240ab(0x227)]['display']='none';const _0x175da6=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x175da6['forEach'](_0x3bb97b=>{const _0x56bac0=_0x2240ab,_0x54c45e=document[_0x56bac0(0x2c1)](_0x3bb97b);if(_0x54c45e)_0x54c45e['style'][_0x56bac0(0x1b8)]=_0x56bac0(0x135);});if(_0x56d859==='match'){const _0x2b6130=[_0x2240ab(0x156),'highlight-match-info-container','highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x2b6130['forEach'](_0x2e141c=>{const _0x478f16=_0x2240ab,_0x2bf460=document[_0x478f16(0x2c1)](_0x2e141c);_0x2bf460&&(_0x2e141c===_0x478f16(0x2b6)?_0x2bf460[_0x478f16(0x227)]['display']='flex':_0x2bf460['style'][_0x478f16(0x1b8)]=_0x478f16(0x135));});const _0x2937e9=document[_0x2240ab(0x2c1)](_0x2240ab(0x2d1));if(_0x2937e9){_0x2937e9[_0x2240ab(0x13a)]=!![];const _0x48afb2=_0x2937e9['previousElementSibling'];if(_0x48afb2)_0x48afb2[_0x2240ab(0xc6)]='YouTube\x20Video\x20ID*';}if(_0x4e2ec0)_0x4e2ec0['style']['display']='block';updateHighlightVideoPreview();}else{if(_0x56d859==='creator'){const _0x362167=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container',_0x2240ab(0x26a),_0x2240ab(0x156)];_0x362167['forEach'](_0x3f47a6=>{const _0x4e22b5=_0x2240ab,_0x5f11a2=document['getElementById'](_0x3f47a6);if(_0x5f11a2)_0x5f11a2['style'][_0x4e22b5(0x1b8)]=_0x4e22b5(0x135);});const _0xaedd39=document[_0x2240ab(0x2c1)]('highlight-video-id');if(_0xaedd39){_0xaedd39['required']=![];const _0x3c3634=_0xaedd39['previousElementSibling'];if(_0x3c3634)_0x3c3634['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x56d859==='achievement'){const _0x5c7c95=[_0x2240ab(0x229),'highlight-achievement-type-container','highlight-achievement-details-container',_0x2240ab(0x2c7),_0x2240ab(0x296),'highlight-video-container'];_0x5c7c95['forEach'](_0x55483c=>{const _0x289c5c=document['getElementById'](_0x55483c);if(_0x289c5c)_0x289c5c['style']['display']='block';});const _0x1eb3f9=document[_0x2240ab(0x2c1)](_0x2240ab(0x2d1));if(_0x1eb3f9){_0x1eb3f9['required']=![];const _0x14dd02=_0x1eb3f9['previousElementSibling'];if(_0x14dd02)_0x14dd02['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0x2b7f6a){const _0x172093=a2_0x53ab39;try{const _0x279ff2=doc(db,_0x172093(0x288),_0x2b7f6a),_0x8b1c6d=await getDoc(_0x279ff2);if(!_0x8b1c6d['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x419f50=_0x8b1c6d['data'](),_0x417271=_0x419f50['type']||'match';document['getElementById']('highlight-modal-title')[_0x172093(0xd2)]='Edit\x20'+getHighlightTypeName(_0x417271),document[_0x172093(0x2c1)]('highlight-type')['value']=_0x417271,toggleHighlightFields(_0x417271),document['getElementById']('highlight-title')['value']=_0x419f50['title']||'',document[_0x172093(0x2c1)](_0x172093(0x196))['value']=_0x419f50[_0x172093(0x21f)]||'',document['getElementById'](_0x172093(0x80))['value']=_0x419f50['submittedBy']||'';_0x419f50['videoId']&&(document['getElementById']('highlight-video-id')[_0x172093(0x1f0)]=_0x419f50['videoId'],updateHighlightVideoPreview());if(_0x417271==='match'){document[_0x172093(0x2c1)]('highlight-match-info')['value']=_0x419f50[_0x172093(0x267)]||'',document[_0x172093(0x2c1)]('highlight-map')[_0x172093(0x1f0)]=_0x419f50['map']||'';if(_0x419f50['matchDate']){const _0x5d5f4b=new Date(_0x419f50[_0x172093(0x276)]['seconds']*0x3e8);document['getElementById']('highlight-match-date')[_0x172093(0x1f0)]=_0x5d5f4b['toISOString']()[_0x172093(0x163)]('T')[0x0];}document['getElementById'](_0x172093(0x27c))[_0x172093(0x1f0)]=_0x419f50[_0x172093(0xea)]||'',document['getElementById']('highlight-winner-score')['value']=_0x419f50[_0x172093(0x1e7)]||'',document['getElementById']('highlight-loser-name')['value']=_0x419f50['loserName']||'',document[_0x172093(0x2c1)]('highlight-loser-score')[_0x172093(0x1f0)]=_0x419f50[_0x172093(0xd6)]||'',document['getElementById']('highlight-match-link')['value']=_0x419f50[_0x172093(0x1a1)]||'';}else{if(_0x417271==='creator')document[_0x172093(0x2c1)]('highlight-map')['value']=_0x419f50['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x419f50['mapCreator']||'',document['getElementById']('highlight-map-version')[_0x172093(0x1f0)]=_0x419f50[_0x172093(0x260)]||'',document['getElementById'](_0x172093(0x83))[_0x172093(0x1f0)]=_0x419f50[_0x172093(0x2a2)]||'';else _0x417271===_0x172093(0x210)&&(document['getElementById']('highlight-achievement-player')['value']=_0x419f50['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x419f50['achievementType']||'',document['getElementById']('highlight-achievement-details')[_0x172093(0x1f0)]=_0x419f50['achievementDetails']||'',document['getElementById'](_0x172093(0xcf))['value']=_0x419f50[_0x172093(0x201)]||'',document['getElementById']('highlight-achievement-image')['value']=_0x419f50['achievementImageUrl']||'');}}catch(_0x2cffec){console['error']('Error\x20loading\x20highlight:',_0x2cffec),showNotification('Error\x20loading\x20highlight:\x20'+_0x2cffec['message'],'error');}}async function saveHighlight(){const _0x56b102=a2_0x53ab39;try{const _0x294956=document['getElementById']('highlight-id')?.['value']||'',_0x3d68ec=document['getElementById']('highlight-type')?.['value']||'match',_0x33d253={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document['getElementById'](_0x56b102(0x196))?.[_0x56b102(0x1f0)]?.[_0x56b102(0x14f)]()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document[_0x56b102(0x2c1)]('highlight-video-id')?.['value']?.['trim']()||null,'type':_0x3d68ec};if(!_0x33d253[_0x56b102(0x23c)]){showNotification('Title\x20is\x20required',_0x56b102(0x245));return;}if(_0x3d68ec===_0x56b102(0x153)){_0x33d253['matchInfo']=document['getElementById']('highlight-match-info')?.['value']?.['trim']()||'',_0x33d253[_0x56b102(0xc1)]=document[_0x56b102(0x2c1)](_0x56b102(0x1d6))?.['value']?.[_0x56b102(0x14f)]()||'';const _0x3326ab=document['getElementById']('highlight-match-date'),_0x585266=_0x3326ab?.['value']||'';_0x33d253[_0x56b102(0x276)]=_0x585266?Timestamp[_0x56b102(0x14a)](new Date(_0x585266)):null,_0x33d253['winnerName']=document['getElementById']('highlight-winner-name')?.['value']?.[_0x56b102(0x14f)]()||'',_0x33d253['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.[_0x56b102(0x14f)]()||'',_0x33d253['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.['trim']()||'',_0x33d253['loserScore']=document['getElementById']('highlight-loser-score')?.[_0x56b102(0x1f0)]?.['trim']()||'',_0x33d253['matchLink']=document['getElementById'](_0x56b102(0x118))?.['value']?.['trim']()||'';if(!_0x33d253['videoId']){showNotification(_0x56b102(0x21b),'error');return;}}else{if(_0x3d68ec==='creator'){_0x33d253['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x33d253['mapCreator']=document['getElementById'](_0x56b102(0x1b6))?.['value']?.['trim']()||'',_0x33d253[_0x56b102(0x260)]=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x33d253['creatorImageUrl']=document['getElementById']('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x33d253['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x3d68ec==='achievement'){_0x33d253['achievementPlayer']=document[_0x56b102(0x2c1)]('highlight-achievement-player')?.['value']?.['trim']()||'',_0x33d253['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x33d253['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.['trim']()||'',_0x33d253['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.[_0x56b102(0x14f)]()||'',_0x33d253['achievementImageUrl']=document['getElementById']('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x33d253['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x294956?(_0x33d253['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x56b102(0x288),_0x294956),_0x33d253),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x33d253['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x33d253),showNotification(_0x56b102(0x243),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x47531a){console['error'](_0x56b102(0x22d),_0x47531a),showNotification('Error\x20saving\x20highlight:\x20'+_0x47531a['message'],'error');}}function closeHighlightModal(){const _0x416ded=a2_0x53ab39,_0x81f017=document['getElementById']('highlight-modal');if(_0x81f017)_0x81f017[_0x416ded(0x18f)]['remove']('active');}function getHighlightTypeName(_0x2a9645){const _0x435d30=a2_0x53ab39;switch(_0x2a9645){case'match':return'Match\x20Highlight';case _0x435d30(0x14c):return'Featured\x20Creator';case'achievement':return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x1d7d01=a2_0x53ab39,_0x4b08e6=document['getElementById']('highlight-video-id'),_0x4df080=document['getElementById'](_0x1d7d01(0x19b)),_0x560f8c=document[_0x1d7d01(0x2c1)]('highlight-video-preview');if(!_0x4b08e6||!_0x560f8c||!_0x4df080)return;const _0x16229c=_0x4b08e6['value']['trim']();_0x16229c&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x16229c)?(_0x560f8c['src']='https://www.youtube.com/embed/'+_0x16229c,_0x4df080['style']['display']='block'):(_0x560f8c[_0x1d7d01(0x162)]='',_0x4df080['style']['display']='none');}async function loadHighlightsAdmin(){const _0x33a31c=a2_0x53ab39,_0x49e0a8=document['getElementById'](_0x33a31c(0x126));if(!_0x49e0a8)return;_0x49e0a8[_0x33a31c(0xc6)]=_0x33a31c(0x22b);try{const _0xf1a5df=query(collection(db,'highlights'),orderBy('createdAt','desc')),_0x198db3=await getDocs(_0xf1a5df);if(_0x198db3['empty']){_0x49e0a8[_0x33a31c(0xc6)]=_0x33a31c(0xf8);return;}_0x49e0a8['innerHTML']='',_0x198db3['forEach'](_0x2e8e31=>{const _0x4e12cb=_0x33a31c,_0x413f73=_0x2e8e31[_0x4e12cb(0x16c)](),_0x5a4a24=document['createElement']('tr'),_0x4d4a79=_0x413f73['createdAt']?new Date(_0x413f73['createdAt'][_0x4e12cb(0x20c)]*0x3e8)['toLocaleDateString']():_0x4e12cb(0x120);let _0x343104='Unknown',_0x7cb8d2='';switch(_0x413f73['type']){case'match':_0x343104=_0x4e12cb(0x178),_0x7cb8d2='match-type';break;case _0x4e12cb(0x14c):_0x343104='Creator',_0x7cb8d2=_0x4e12cb(0x109);break;case'achievement':_0x343104='Achievement',_0x7cb8d2=_0x4e12cb(0x1c1);break;}_0x5a4a24['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x413f73['title']||'Untitled')+_0x4e12cb(0xad)+_0x7cb8d2+'\x22>'+_0x343104+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4d4a79+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x413f73['submittedBy']||_0x4e12cb(0xed))+_0x4e12cb(0x228)+(_0x413f73['videoId']?_0x4e12cb(0x191):_0x4e12cb(0x139))+_0x4e12cb(0x10a)+_0x2e8e31['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x2e8e31['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x49e0a8['appendChild'](_0x5a4a24);}),document['querySelectorAll']('.edit-highlight-btn')[_0x33a31c(0x167)](_0x510128=>{_0x510128['addEventListener']('click',_0x172bdf=>{const _0x1a9981=a2_0x3e7c;openHighlightModal(_0x172bdf[_0x1a9981(0x1b1)]['dataset']['id']);});}),document[_0x33a31c(0x1e3)]('.delete-highlight-btn')['forEach'](_0x53eae7=>{_0x53eae7['addEventListener']('click',_0x16f227=>{const _0x368947=a2_0x3e7c;confirmDeleteHighlight(_0x16f227[_0x368947(0x1b1)]['dataset']['id']);});});}catch(_0x30cfe1){console['error']('Error\x20loading\x20highlights:',_0x30cfe1),_0x49e0a8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x30cfe1['message']+_0x33a31c(0x2d3);}}async function confirmDeleteHighlight(_0x1bc443){const _0x129cd7=a2_0x53ab39;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x129cd7(0x288),_0x1bc443)),showNotification('Highlight\x20deleted\x20successfully',_0x129cd7(0x8c)),loadHighlightsAdmin();}catch(_0x5f3026){console['error']('Error\x20deleting\x20highlight:',_0x5f3026),showNotification('Error\x20deleting\x20highlight:\x20'+_0x5f3026['message'],'error');}}function setupCreateTestMatchModal(){const _0x38809d=a2_0x53ab39;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x2841cb=document['getElementById'](_0x38809d(0x11c)),_0x4d53e6=document['getElementById']('create-test-match-form');if(!_0x2841cb){console[_0x38809d(0x245)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x4d53e6){console[_0x38809d(0x245)](_0x38809d(0x11a));return;}const _0x19c04f=_0x2841cb['cloneNode'](!![]);_0x2841cb['parentNode']['replaceChild'](_0x19c04f,_0x2841cb);const _0x1dda76=_0x19c04f['querySelector']('#create-test-match-form');_0x19c04f[_0x38809d(0x2c9)](_0x38809d(0x237),function(_0xb089c7){const _0x3ed2e8=_0x38809d;_0xb089c7[_0x3ed2e8(0x2a8)]===_0x19c04f&&(console['log'](_0x3ed2e8(0x20a)),closeCreateTestMatchModal());});const _0x5bc692=_0x19c04f[_0x38809d(0xae)]('.close-btn');_0x5bc692&&_0x5bc692['addEventListener']('click',function(_0x541480){const _0xcc3113=_0x38809d;_0x541480[_0xcc3113(0x187)](),_0x541480['stopPropagation'](),console[_0xcc3113(0x7f)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x194127=_0x19c04f[_0x38809d(0xae)]('#cancel-create-test-match-btn');_0x194127&&_0x194127['addEventListener']('click',function(_0x2ff60f){_0x2ff60f['preventDefault'](),_0x2ff60f['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x1dda76){_0x1dda76['addEventListener']('submit',function(_0x5c1d28){const _0x1a96f4=_0x38809d;_0x5c1d28['preventDefault'](),_0x5c1d28[_0x1a96f4(0x279)](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x57ae3d=_0x1dda76[_0x38809d(0xae)]('button[type=\x22submit\x22]');_0x57ae3d&&_0x57ae3d['addEventListener']('click',function(_0xe40c56){const _0x1a0d04=_0x38809d;_0xe40c56['preventDefault'](),_0xe40c56['stopPropagation'](),console['log'](_0x1a0d04(0xda)),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x47d10a=a2_0x53ab39;console[_0x47d10a(0x7f)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x226f68=document[_0x47d10a(0x2c1)]('highlight-form');_0x226f68&&_0x226f68['addEventListener']('submit',_0x9f9bc2=>{_0x9f9bc2['preventDefault'](),saveHighlight();});const _0x1c591b=document[_0x47d10a(0x2c1)]('cancel-highlight-btn');_0x1c591b&&_0x1c591b['addEventListener'](_0x47d10a(0x237),closeHighlightModal);const _0xf416f8=document['querySelector']('#highlight-modal\x20.close-btn');_0xf416f8&&_0xf416f8['addEventListener']('click',closeHighlightModal);const _0x4ce5ea=document[_0x47d10a(0x2c1)]('highlight-modal');_0x4ce5ea&&_0x4ce5ea['addEventListener']('click',_0x510846=>{const _0x5f5c52=_0x47d10a;_0x510846[_0x5f5c52(0x2a8)]===_0x4ce5ea&&closeHighlightModal();});const _0x5672e2=document['getElementById'](_0x47d10a(0x2d1));_0x5672e2&&_0x5672e2['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x34a2ba=a2_0x53ab39;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x1e6707=document[_0x34a2ba(0x2c1)]('matches-prev-page'),_0x3712b4=document['getElementById']('matches-next-page');_0x1e6707&&_0x1e6707['addEventListener']('click',()=>{const _0x2b4718=_0x34a2ba,_0x1ab681=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x1ab681][_0x2b4718(0x1d0)]-0x1);});_0x3712b4&&_0x3712b4['addEventListener'](_0x34a2ba(0x237),()=>{const _0x2de152=_0x34a2ba,_0x55fb92=currentLadder[_0x2de152(0x27a)]();loadMatchesData(matchesPagination[_0x55fb92]['page']+0x1);});const _0x3f6b3f=document['getElementById'](_0x34a2ba(0x117)),_0x32d7ae=document[_0x34a2ba(0x2c1)]('reset-matches-filters');_0x3f6b3f&&_0x3f6b3f['addEventListener']('click',applyMatchesFilters);_0x32d7ae&&_0x32d7ae[_0x34a2ba(0x2c9)]('click',resetMatchesFilters);const _0x4b3b71=document['getElementById'](_0x34a2ba(0x127));_0x4b3b71&&_0x4b3b71['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x56caab=document['getElementById']('resimulate-match-btn');_0x56caab&&_0x56caab['addEventListener']('click',openResimulateModal);const _0x5272f7=document[_0x34a2ba(0x2c1)]('resimulate-modal');if(_0x5272f7){const _0x45a34d=_0x5272f7[_0x34a2ba(0xae)](_0x34a2ba(0x18a));_0x45a34d&&_0x45a34d[_0x34a2ba(0x2c9)]('click',closeResimulateModal),_0x5272f7['addEventListener']('click',_0x50920c=>{const _0x227aea=_0x34a2ba;_0x50920c[_0x227aea(0x2a8)]===_0x5272f7&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x160e20=a2_0x53ab39;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x57ab17=document['getElementById']('create-test-match-modal'),_0x19c3fa=document['getElementById'](_0x160e20(0x28f));if(!_0x57ab17){console['error'](_0x160e20(0x9e)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x19c3fa){console[_0x160e20(0x245)](_0x160e20(0x1cc)),showNotification(_0x160e20(0x1cc),'error');return;}_0x19c3fa['reset']();const _0x4d9dd7=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x26f1f2=![];_0x4d9dd7[_0x160e20(0x167)](_0x2e0c7d=>{console['log']('Found\x20radio\x20with\x20value:',_0x2e0c7d['value']),_0x2e0c7d['value']===currentLadder&&(_0x2e0c7d['checked']=!![],_0x26f1f2=!![],console['log']('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x26f1f2){console['warn'](_0x160e20(0xa7),currentLadder);const _0x176615=document[_0x160e20(0xae)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x176615&&(_0x176615['checked']=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0x43cb7d=document['getElementById'](_0x160e20(0x207));if(_0x43cb7d){const _0xdb79bf=new Date()['toISOString']()['split']('T')[0x0];_0x43cb7d['value']=_0xdb79bf;}_0x57ab17['style'][_0x160e20(0x1b8)]='flex',_0x57ab17['style']['visibility']=_0x160e20(0x23b),_0x57ab17['style'][_0x160e20(0xfd)]='1',_0x57ab17['classList']['add']('active'),console['log']('Modal\x20should\x20now\x20be\x20visible');const _0xef044a=document['getElementById'](_0x160e20(0x157));_0xef044a&&setTimeout(()=>{_0xef044a['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x1e9a51=a2_0x53ab39;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x288a00=document['getElementById']('create-test-match-modal');if(!_0x288a00){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x288a00['classList']['remove']('active'),_0x288a00['style']['opacity']='0',_0x288a00['style'][_0x1e9a51(0x25d)]=_0x1e9a51(0x28e),setTimeout(()=>{const _0x38fda4=_0x1e9a51;!_0x288a00['classList']['contains'](_0x38fda4(0x2cb))&&(_0x288a00['style']['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x547270=a2_0x53ab39;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0xf93ee5=auth[_0x547270(0x29f)];if(!_0xf93ee5){showNotification(_0x547270(0xd7),'error');return;}const _0x1b4e48='D1',_0x276746='approvedMatches',_0x359a79={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x547270(0x92),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp[_0x547270(0x14a)](new Date()),'approvedBy':_0xf93ee5['email'],'createdAt':serverTimestamp(),'createdBy':_0xf93ee5['email'],'isTestMatch':!![],'ladder':_0x1b4e48,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0xf93ee5[_0x547270(0x1f5)]};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x276746),_0x359a79),showNotification('Simple\x20test\x20match\x20created\x20successfully',_0x547270(0x8c)),closeCreateTestMatchModal();}catch(_0x2c958b){console['error'](_0x547270(0x19f),_0x2c958b),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x2c958b['message'],'error');}}window[a2_0x53ab39(0x209)]=async function(){const _0x4ca425=a2_0x53ab39;try{console[_0x4ca425(0x7f)]('Testing\x20Firebase\x20connection...'),console['log']('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x389332=collection(db,_0x4ca425(0x12b));console['log']('Collection\x20reference\x20created:',_0x389332);const _0x41eaa4=query(_0x389332,where('username','==','nonexistent'));console['log']('Query\x20created:',_0x41eaa4);const _0x134624=await getDocs(_0x41eaa4);console[_0x4ca425(0x7f)]('Query\x20executed.\x20Empty:',_0x134624['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x4a7787){console['error']('Firebase\x20connection\x20test\x20failed:',_0x4a7787);}};function setupCreateTestMatchButton(){const _0x2b3581=a2_0x53ab39,_0x29abc7=document['getElementById']('create-test-match-btn');if(!_0x29abc7){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log']('Setting\x20up\x20create\x20test\x20match\x20button');const _0xe8949=_0x29abc7[_0x2b3581(0x294)](!![]);_0x29abc7['parentNode']['replaceChild'](_0xe8949,_0x29abc7),_0xe8949['addEventListener']('click',function(_0x31c85d){_0x31c85d['preventDefault'](),_0x31c85d['stopPropagation'](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x52b115=0x1){const _0x36afcd=a2_0x53ab39,_0x4ae869=document[_0x36afcd(0x2c1)]('matches-table-body');if(!_0x4ae869)return;_0x4ae869['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x5e5990=currentLadder[_0x36afcd(0x27a)](),_0x1d05a3=matchesPagination[_0x5e5990],_0x4cf732=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x25e31f=collection(db,_0x4cf732);_0x52b115<=0x1?(_0x1d05a3['page']=0x1,_0x1d05a3[_0x36afcd(0x155)]=null,_0x1d05a3['lastVisible']=null):_0x1d05a3[_0x36afcd(0x1d0)]=_0x52b115;const _0x498a15=getMatchesFilters();let _0x25d1a5=_0x25e31f;if(_0x498a15[_0x36afcd(0x2d5)]||_0x498a15['endDate']||_0x498a15['searchTerm']){let _0x34f477=[];_0x498a15['startDate']&&_0x498a15['endDate']?(_0x34f477['push'](where(_0x36afcd(0x225),'>=',_0x498a15['startDate']),where(_0x36afcd(0x225),'<=',_0x498a15['endDate'])),_0x25d1a5=query(_0x25e31f,..._0x34f477)):_0x25d1a5=query(_0x25e31f,orderBy('approvedAt',_0x36afcd(0xa4)));}else _0x25d1a5=query(_0x25e31f,orderBy('approvedAt','desc'));_0x52b115>0x1&&_0x1d05a3['lastVisible']?_0x25d1a5=query(_0x25d1a5,startAfter(_0x1d05a3['lastVisible']),limit(PAGE_SIZE)):_0x25d1a5=query(_0x25d1a5,limit(PAGE_SIZE));const _0x1b03f3=await getDocs(_0x25d1a5);!_0x1b03f3['empty']&&(_0x1d05a3[_0x36afcd(0x155)]=_0x1b03f3['docs'][0x0],_0x1d05a3['lastVisible']=_0x1b03f3['docs'][_0x1b03f3['docs']['length']-0x1]);let _0x3e14a0=![];if(!_0x1b03f3['empty']){const _0x294ff8=query(_0x25d1a5,startAfter(_0x1d05a3[_0x36afcd(0xe1)]),limit(0x1)),_0x258e38=await getDocs(_0x294ff8);_0x3e14a0=!_0x258e38['empty'];}const _0x25c416=document['getElementById']('matches-prev-page'),_0x38b001=document['getElementById'](_0x36afcd(0x2a6)),_0xe5301a=document['getElementById']('matches-page-indicator');if(_0x25c416)_0x25c416['disabled']=_0x1d05a3['page']<=0x1;if(_0x38b001)_0x38b001['disabled']=!_0x3e14a0;if(_0xe5301a)_0xe5301a['textContent']=_0x36afcd(0x1e9)+_0x1d05a3['page'];if(_0x1b03f3['empty']){_0x4ae869[_0x36afcd(0xc6)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x4ae869['innerHTML']='',_0x1b03f3[_0x36afcd(0x167)](_0x46ed36=>{const _0x2e3758=_0x36afcd,_0xd5f2f1=_0x46ed36['data'](),_0xd4319e=document[_0x2e3758(0x148)]('tr'),_0x4cb64a=_0xd5f2f1['approvedAt']?new Date(_0xd5f2f1[_0x2e3758(0x225)]['seconds']*0x3e8)[_0x2e3758(0xbe)]():'N/A';_0xd4319e['setAttribute']('data-id',_0x46ed36['id']),_0xd4319e['setAttribute']('data-ladder',currentLadder),_0xd4319e['classList']['add'](_0x2e3758(0xe6)),_0xd4319e[_0x2e3758(0xc6)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4cb64a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0xd5f2f1['winnerUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0xd5f2f1['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0xd5f2f1['winnerScore']||0x0)+'\x20-\x20'+(_0xd5f2f1['loserScore']||0x0)+_0x2e3758(0xc9)+(_0xd5f2f1['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x46ed36['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x46ed36['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ae869[_0x2e3758(0x1a0)](_0xd4319e);}),setupMatchesActionButtons(),_0x498a15['searchTerm']&&filterMatchesTable(),console[_0x36afcd(0x7f)]('Loaded\x20'+_0x1b03f3[_0x36afcd(0x179)]+_0x36afcd(0x15c)+currentLadder+_0x36afcd(0x16d)+_0x1d05a3[_0x36afcd(0x1d0)]);}catch(_0x50917b){console['error']('Error\x20loading\x20matches:',_0x50917b),_0x4ae869['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x50917b['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0xcb0aab,_0x3b611d){const _0x291785=a2_0x53ab39;try{console[_0x291785(0x7f)]('Deleting\x20match\x20'+_0xcb0aab+_0x291785(0x166)+_0x3b611d+'\x20ladder');const _0x4dedfb=auth['currentUser'];if(!_0x4dedfb){showNotification(_0x291785(0x1be),'error');return;}const _0x1ac276=_0x3b611d==='D1'?_0x291785(0x1b3):_0x3b611d==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log']('Using\x20collection:\x20'+_0x1ac276),showNotification(_0x291785(0x2c4),'info'),await deleteDoc(doc(db,_0x1ac276,_0xcb0aab)),console['log']('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x48a01e=_0x3b611d['toLowerCase']();loadMatchesData(matchesPagination[_0x48a01e]['page']);}catch(_0x409039){console[_0x291785(0x245)]('Error\x20deleting\x20match:',_0x409039),showNotification(_0x291785(0x7d)+_0x409039['message'],_0x291785(0x245));}}function setupMatchesActionButtons(){const _0x1beb51=a2_0x53ab39;console[_0x1beb51(0x7f)]('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x1beb51(0x1fa))['forEach'](_0x4ec9dc=>{_0x4ec9dc['addEventListener']('click',_0x3badf4=>{const _0x5958b3=a2_0x3e7c;_0x3badf4['preventDefault'](),_0x3badf4['stopPropagation']();const _0x4867b8=_0x3badf4['currentTarget']['dataset']['id'],_0x5ce724=_0x3badf4['currentTarget'][_0x5958b3(0x130)]('tr'),_0x382e6b=_0x5ce724['dataset']['ladder'];console[_0x5958b3(0x7f)]('Edit\x20match\x20clicked:',_0x4867b8,_0x382e6b),openEditMatchModal(_0x4867b8,_0x382e6b);});}),document['querySelectorAll'](_0x1beb51(0xfa))['forEach'](_0x3b9fa6=>{const _0x16049c=_0x1beb51;_0x3b9fa6['addEventListener'](_0x16049c(0x237),_0x269da5=>{const _0x5b2ffd=_0x16049c;_0x269da5['preventDefault'](),_0x269da5['stopPropagation']();const _0xbac915=_0x269da5[_0x5b2ffd(0x1b1)]['dataset']['id'],_0x1bdece=_0x269da5['currentTarget'][_0x5b2ffd(0x130)]('tr'),_0x109bcd=_0x1bdece[_0x5b2ffd(0x277)]['ladder']||currentLadder;console[_0x5b2ffd(0x7f)]('Delete\x20match\x20clicked:',_0xbac915,_0x109bcd),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0xbac915,_0x109bcd);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x2be1a3=a2_0x53ab39,_0x15861a=document[_0x2be1a3(0x2c1)]('matches-search')[_0x2be1a3(0x1f0)][_0x2be1a3(0x27a)](),_0x3452c0=document['querySelectorAll']('#matches-table-body\x20tr');let _0x2299c9=0x0;_0x3452c0['forEach'](_0x5a680b=>{const _0x12e212=_0x2be1a3;if(_0x5a680b['classList']['contains']('loading-cell')||_0x5a680b['classList']['contains'](_0x12e212(0x230))||_0x5a680b['classList']['contains']('error-state'))return;const _0x1083c9=_0x5a680b['cells'][0x1][_0x12e212(0xd2)]['toLowerCase'](),_0x3b9942=_0x5a680b['cells'][0x2][_0x12e212(0xd2)]['toLowerCase'](),_0x80ce51=_0x5a680b[_0x12e212(0x103)][0x4]['textContent']['toLowerCase']();_0x1083c9['includes'](_0x15861a)||_0x3b9942['includes'](_0x15861a)||_0x80ce51['includes'](_0x15861a)?(_0x5a680b[_0x12e212(0x227)]['display']='',_0x2299c9++):_0x5a680b['style']['display']='none';});if(_0x2299c9===0x0&&_0x3452c0['length']>0x0){const _0x5f0143=document['getElementById']('matches-table-body'),_0x259827=_0x5f0143['querySelector']('.no-results');if(!_0x259827){const _0x49b51d=document['createElement']('tr');_0x49b51d['className']='no-results',_0x49b51d[_0x2be1a3(0xc6)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x15861a+'\x27</td>',_0x5f0143[_0x2be1a3(0x1a0)](_0x49b51d);}}else{const _0x93638d=document[_0x2be1a3(0xae)](_0x2be1a3(0x25a));_0x93638d&&_0x93638d['remove']();}}function getMatchesFilters(){const _0x6f3716=a2_0x53ab39,_0x555b7b=document[_0x6f3716(0x2c1)]('matches-search')['value']['toLowerCase'](),_0x5254b3=document['getElementById'](_0x6f3716(0x204))[_0x6f3716(0x1f0)],_0x4eb740=document[_0x6f3716(0x2c1)](_0x6f3716(0x17e))['value'];let _0x4e5464=null,_0x2f8586=null;return _0x5254b3&&(_0x4e5464=new Date(_0x5254b3),_0x4e5464[_0x6f3716(0x150)](0x0,0x0,0x0,0x0),_0x4e5464=Timestamp[_0x6f3716(0x14a)](_0x4e5464)),_0x4eb740&&(_0x2f8586=new Date(_0x4eb740),_0x2f8586['setHours'](0x17,0x3b,0x3b,0x3e7),_0x2f8586=Timestamp['fromDate'](_0x2f8586)),{'searchTerm':_0x555b7b,'startDate':_0x4e5464,'endDate':_0x2f8586};}async function applyMatchesFilters(){const _0x51ae80=currentLadder['toLowerCase']();matchesPagination[_0x51ae80]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x51aa5b=a2_0x53ab39;document['getElementById']('matches-start-date')[_0x51aa5b(0x1f0)]='',document['getElementById']('matches-end-date')['value']='',document[_0x51aa5b(0x2c1)]('matches-search')[_0x51aa5b(0x1f0)]='';const _0x11795e=currentLadder['toLowerCase']();matchesPagination[_0x11795e]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x967648,_0x545eb7){const _0x107d73=a2_0x53ab39,_0x4b8d3e=document['getElementById']('edit-match-modal');if(!_0x4b8d3e)return;try{const _0x6e123d=_0x545eb7==='D1'?_0x107d73(0x1b3):_0x545eb7==='D2'?'approvedMatchesD2':_0x107d73(0x1ea),_0x22283b=doc(db,_0x6e123d,_0x967648),_0x2c8b50=await getDoc(_0x22283b);if(!_0x2c8b50['exists']()){showNotification('Match\x20not\x20found',_0x107d73(0x245));return;}const _0x74cac6=_0x2c8b50[_0x107d73(0x16c)]();document[_0x107d73(0x2c1)]('edit-match-id')[_0x107d73(0x1f0)]=_0x967648,document['getElementById'](_0x107d73(0x287))['value']=_0x545eb7,document['getElementById'](_0x107d73(0x82))['value']=_0x74cac6['winnerUsername']||'',document['getElementById']('edit-match-winner-score')['value']=_0x74cac6['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')[_0x107d73(0x1f0)]=_0x74cac6['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x74cac6['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x74cac6['loserUsername']||'',document['getElementById']('edit-match-loser-score')['value']=_0x74cac6[_0x107d73(0xd6)]||0x0,document[_0x107d73(0x2c1)]('edit-match-loser-suicides')['value']=_0x74cac6[_0x107d73(0x269)]||0x0,document['getElementById'](_0x107d73(0x23d))['value']=_0x74cac6['loserComment']||'',document['getElementById']('edit-match-map')[_0x107d73(0x1f0)]=_0x74cac6['mapPlayed']||'',document[_0x107d73(0x2c1)]('edit-match-winner-demo')['value']=_0x74cac6[_0x107d73(0x297)]||'',document[_0x107d73(0x2c1)]('edit-match-loser-demo')[_0x107d73(0x1f0)]=_0x74cac6[_0x107d73(0x175)]||_0x74cac6['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x74cac6['winnerUsername']+'\x20vs\x20'+_0x74cac6[_0x107d73(0x215)],_0x4b8d3e[_0x107d73(0x18f)]['add']('active');}catch(_0x2fd0cb){console['error']('Error\x20loading\x20match\x20data:',_0x2fd0cb),showNotification('Failed\x20to\x20load\x20match\x20data',_0x107d73(0x245));}}function closeEditMatchModal(){const _0x1a8acf=a2_0x53ab39,_0x4b642d=document['getElementById']('edit-match-modal');_0x4b642d&&_0x4b642d[_0x1a8acf(0x18f)]['remove'](_0x1a8acf(0x2cb));}async function saveEditedMatch(){const _0x11a682=a2_0x53ab39;try{const _0x22f84b=document['getElementById']('edit-match-id')['value'],_0x19f4dd=document[_0x11a682(0x2c1)]('edit-match-ladder')['value'];if(!_0x22f84b||!_0x19f4dd){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x79a2fc=_0x19f4dd==='D1'?_0x11a682(0x1b3):_0x19f4dd==='D2'?'approvedMatchesD2':_0x11a682(0x1ea),_0x1a3329=document[_0x11a682(0x2c1)]('edit-match-winner')['value']['trim'](),_0x54d90b=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x4015b0=parseInt(document['getElementById'](_0x11a682(0x2bc))['value']),_0x2ee627=document['getElementById']('edit-match-winner-comment')['value']['trim'](),_0x463f38=document['getElementById']('edit-match-loser')[_0x11a682(0x1f0)][_0x11a682(0x14f)](),_0x449473=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x455427=parseInt(document[_0x11a682(0x2c1)]('edit-match-loser-suicides')['value']),_0x412318=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0x23b892=document['getElementById']('edit-match-map')[_0x11a682(0x1f0)]['trim'](),_0x38c9c9=document[_0x11a682(0x2c1)]('edit-match-winner-demo')[_0x11a682(0x1f0)]['trim'](),_0x540dfd=document[_0x11a682(0x2c1)]('edit-match-loser-demo')[_0x11a682(0x1f0)]['trim']();if(!_0x1a3329||!_0x463f38){showNotification('Winner\x20and\x20loser\x20usernames\x20are\x20required','error');return;}await updateDoc(doc(db,_0x79a2fc,_0x22f84b),{'winnerUsername':_0x1a3329,'winnerScore':_0x54d90b,'winnerSuicides':_0x4015b0,'winnerComment':_0x2ee627,'loserUsername':_0x463f38,'loserScore':_0x449473,'loserSuicides':_0x455427,'loserComment':_0x412318,'mapPlayed':_0x23b892,'winnerDemoLink':_0x38c9c9||null,'loserDemoLink':_0x540dfd||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x11a682(0x29f)][_0x11a682(0x1f5)],'isEdited':!![]}),showNotification(_0x11a682(0x252),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x19f4dd['toLowerCase']()]['page']);}catch(_0x3bb801){console['error'](_0x11a682(0x1d3),_0x3bb801),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x3bb801['message'],'error');}}async function openDeleteMatchModal(_0x50aba8,_0xa545b0){const _0x2f95e1=a2_0x53ab39;try{const _0x4c615d=_0xa545b0==='D1'?_0x2f95e1(0x1b3):_0xa545b0==='D2'?_0x2f95e1(0x275):'approvedMatchesD3',_0x51bc93=doc(db,_0x4c615d,_0x50aba8),_0x713e07=await getDoc(_0x51bc93);if(!_0x713e07[_0x2f95e1(0x2b2)]()){showNotification(_0x2f95e1(0x146),'error');return;}const _0x4587e2=_0x713e07['data'](),_0x3128b5=document['getElementById']('delete-match-confirm-modal');_0x3128b5['dataset'][_0x2f95e1(0x24e)]=_0x50aba8,_0x3128b5['dataset']['ladder']=_0xa545b0;const _0x117290=_0x4587e2[_0x2f95e1(0x225)]?new Date(_0x4587e2[_0x2f95e1(0x225)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x247582=document[_0x2f95e1(0x2c1)]('delete-match-summary');_0x247582['innerHTML']=_0x2f95e1(0x15a)+_0x117290+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x4587e2['winnerUsername']+_0x2f95e1(0x202)+_0x4587e2[_0x2f95e1(0x215)]+_0x2f95e1(0x18b)+(_0x4587e2[_0x2f95e1(0x1e7)]||0x0)+'\x20-\x20'+(_0x4587e2['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x4587e2['mapPlayed']||_0x2f95e1(0x120))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0xa545b0+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3128b5[_0x2f95e1(0x18f)]['add'](_0x2f95e1(0x2cb));}catch(_0x492a27){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x492a27),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x22769b=a2_0x53ab39,_0x4506bd=document['getElementById']('delete-match-confirm-modal');_0x4506bd&&(_0x4506bd[_0x22769b(0x18f)]['remove']('active'),_0x4506bd[_0x22769b(0x29b)]('data-match-id'),_0x4506bd['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x421171=a2_0x53ab39,_0x2553e3=document['getElementById']('delete-match-confirm-modal'),_0x163560=_0x2553e3['dataset']['matchId'],_0x5002aa=_0x2553e3['dataset']['ladder'];if(!_0x163560||!_0x5002aa){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x548f97=_0x5002aa==='D1'?'approvedMatches':_0x5002aa==='D2'?_0x421171(0x275):'approvedMatchesD3';await deleteDoc(doc(db,_0x548f97,_0x163560)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x5002aa['toLowerCase']()][_0x421171(0x1d0)]);}catch(_0x3847cb){console[_0x421171(0x245)]('Error\x20deleting\x20match:',_0x3847cb),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x3847cb['message'],'error');}}async function saveHighlightChanges(){const _0x34b2f9=a2_0x53ab39,_0x546cfe=document['getElementById'](_0x34b2f9(0xa0))['value'],_0x565710=document['getElementById']('edit-highlight-type-select')[_0x34b2f9(0x1f0)];let _0x566db3={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x565710,'description':document['getElementById']('edit-highlight-description-input')[_0x34b2f9(0x1f0)]['trim'](),'videoId':document['getElementById'](_0x34b2f9(0x295))['value']['trim'](),'submittedBy':auth[_0x34b2f9(0x29f)]['email']};if(_0x565710==='match'){_0x566db3['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x566db3['map']=document['getElementById']('edit-highlight-map-input')['value'][_0x34b2f9(0x14f)]();const _0x5d3062=document[_0x34b2f9(0x2c1)]('edit-highlight-matchDate-input')['value'];_0x566db3[_0x34b2f9(0x276)]=_0x5d3062?Timestamp['fromDate'](new Date(_0x5d3062)):null,_0x566db3['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value']['trim'](),_0x566db3['winnerScore']=document[_0x34b2f9(0x2c1)](_0x34b2f9(0x23a))[_0x34b2f9(0x1f0)][_0x34b2f9(0x14f)](),_0x566db3['loserName']=document['getElementById']('edit-highlight-loserName-input')['value'][_0x34b2f9(0x14f)](),_0x566db3['loserScore']=document[_0x34b2f9(0x2c1)]('edit-highlight-loserScore-input')['value']['trim'](),_0x566db3['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x566db3['mapCreator']=null,_0x566db3['mapVersion']=null,_0x566db3[_0x34b2f9(0x2a2)]=null,_0x566db3[_0x34b2f9(0x114)]=null,_0x566db3['achievementType']=null,_0x566db3['achievementDetails']=null,_0x566db3['playerProfileUrl']=null;}else{if(_0x565710==='creator')_0x566db3['map']=document['getElementById']('edit-highlight-map-input')['value']['trim'](),_0x566db3[_0x34b2f9(0xfb)]=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x34b2f9(0x14f)](),_0x566db3['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value']['trim'](),_0x566db3['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value'][_0x34b2f9(0x14f)](),_0x566db3[_0x34b2f9(0x267)]=null,_0x566db3['matchDate']=null,_0x566db3[_0x34b2f9(0xea)]=null,_0x566db3[_0x34b2f9(0x1e7)]=null,_0x566db3['loserName']=null,_0x566db3[_0x34b2f9(0xd6)]=null,_0x566db3['matchLink']=null,_0x566db3[_0x34b2f9(0x114)]=null,_0x566db3['achievementType']=null,_0x566db3['achievementDetails']=null,_0x566db3['playerProfileUrl']=null;else _0x565710==='achievement'&&(_0x566db3['achievementPlayer']=document['getElementById'](_0x34b2f9(0x1c8))['value']['trim'](),_0x566db3['achievementType']=document[_0x34b2f9(0x2c1)]('edit-highlight-achievementType-input')['value']['trim'](),_0x566db3[_0x34b2f9(0x104)]=document['getElementById']('edit-highlight-achievementDetails-input')['value']['trim'](),_0x566db3['playerProfileUrl']=document['getElementById'](_0x34b2f9(0x2a9))['value'][_0x34b2f9(0x14f)](),_0x566db3[_0x34b2f9(0x267)]=null,_0x566db3[_0x34b2f9(0xc1)]=null,_0x566db3[_0x34b2f9(0x276)]=null,_0x566db3[_0x34b2f9(0xea)]=null,_0x566db3['winnerScore']=null,_0x566db3['loserName']=null,_0x566db3['loserScore']=null,_0x566db3['matchLink']=null,_0x566db3['mapCreator']=null,_0x566db3['mapVersion']=null,_0x566db3['creatorImageUrl']=null);}try{if(_0x546cfe){_0x566db3['updatedAt']=serverTimestamp();const _0x2f3ea0=doc(db,'highlights',_0x546cfe);await updateDoc(_0x2f3ea0,_0x566db3),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x566db3[_0x34b2f9(0x112)]=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x566db3),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x42f31f){console['error'](_0x34b2f9(0x22d),_0x42f31f),showNotification('Error\x20saving\x20highlight:\x20'+_0x42f31f['message'],'error');}}async function resimulateMatch(){const _0x62b0e=a2_0x53ab39;try{const _0xfb9c0f=document['getElementById'](_0x62b0e(0xe3))['value'];if(!_0xfb9c0f){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x1bdbc7=auth['currentUser'];if(!_0x1bdbc7){showNotification(_0x62b0e(0x16b),'error');return;}const _0x449afd=currentLadder==='D1'?_0x62b0e(0x1b3):currentLadder==='D2'?_0x62b0e(0x275):'approvedMatchesD3',_0x4b0af3=doc(db,_0x449afd,_0xfb9c0f),_0x5b67fa=await getDoc(_0x4b0af3);if(!_0x5b67fa['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x62b0e(0x245));return;}const _0x327dd2=_0x5b67fa['data'](),_0x2ed4e3=_0x327dd2[_0x62b0e(0x225)]?_0x327dd2['approvedAt']['toDate']()['toLocaleString']():_0x327dd2['matchDate']?_0x327dd2[_0x62b0e(0x276)]['toDate']?_0x327dd2['matchDate']['toDate']()[_0x62b0e(0x13f)]():new Date(_0x327dd2[_0x62b0e(0x276)])[_0x62b0e(0x13f)]():'Unknown',_0x413ddf=_0x62b0e(0xc8)+_0x327dd2['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x327dd2[_0x62b0e(0x215)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x327dd2['winnerScore']+'-'+_0x327dd2['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x327dd2[_0x62b0e(0x291)]||_0x327dd2['mapName']||'Unknown')+_0x62b0e(0xb1)+_0x2ed4e3+_0x62b0e(0x23e)+_0xfb9c0f+_0x62b0e(0x176)+currentLadder+_0x62b0e(0x289);document[_0x62b0e(0x2c1)]('match-details-container')[_0x62b0e(0xc6)]=_0x413ddf,document[_0x62b0e(0x2c1)](_0x62b0e(0x1e5))[_0x62b0e(0x227)]['display']='block',document[_0x62b0e(0x2c1)]('confirm-resimulate-btn')['style']['display']='block',window['pendingResimulateData']={'matchId':_0xfb9c0f,'matchData':_0x327dd2,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation',_0x62b0e(0x251));}catch(_0x380320){console['error']('Error\x20finding\x20match:',_0x380320),showNotification(_0x62b0e(0x1ef)+_0x380320[_0x62b0e(0x11f)],'error');}}async function confirmResimulateMatch(){const _0xea21f4=a2_0x53ab39;try{const {matchId:_0x32e3e3,matchData:_0x3d9e86,ladder:_0x49406a}=window['pendingResimulateData'];if(!_0x32e3e3||!_0x3d9e86){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x4dadb0=_0x49406a==='D1'?_0xea21f4(0x12b):_0x49406a==='D2'?'playersD2':'playersD3',_0x419717=_0x49406a==='D1'?_0xea21f4(0xd9):_0x49406a==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x5d024a,_0x1a7559]=await Promise[_0xea21f4(0x274)]([getDocs(query(collection(db,_0x4dadb0),where('username','==',_0x3d9e86[_0xea21f4(0xd8)]))),getDocs(query(collection(db,_0x4dadb0),where('username','==',_0x3d9e86[_0xea21f4(0x215)])))]);if(_0x5d024a[_0xea21f4(0xa2)]||_0x1a7559[_0xea21f4(0xa2)]){showNotification(_0xea21f4(0x1ab),_0xea21f4(0x245));return;}const _0x366eb7=_0x5d024a['docs'][0x0]['id'],_0x510f1e=_0x1a7559['docs'][0x0]['id'],_0x4c6c57=_0x5d024a['docs'][0x0]['data'](),_0x5810e6=_0x1a7559['docs'][0x0]['data'](),[_0x1c69ca,_0x34e394]=await Promise['all']([getDocs(query(collection(db,_0x419717),where(_0xea21f4(0x22f),'==',_0x366eb7),where('matchId','==',_0x32e3e3))),getDocs(query(collection(db,_0x419717),where('playerId','==',_0x510f1e),where(_0xea21f4(0x24e),'==',_0x32e3e3)))]),_0x2c74c8=!_0x1c69ca['empty'],_0x1282bc=!_0x34e394['empty'],_0x1abb99=_0xea21f4(0x10b)+(_0x2c74c8?'✅\x20Exists':_0xea21f4(0x1bd))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x1282bc?_0xea21f4(0x152):'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x4c6c57[_0xea21f4(0x286)]||_0xea21f4(0xed))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x5810e6['eloRating']||_0xea21f4(0xed))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x4c6c57['position']||'Unknown')+_0xea21f4(0x1b9)+(_0x5810e6[_0xea21f4(0x1e2)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')[_0xea21f4(0xc6)]=_0x1abb99,document['getElementById'](_0xea21f4(0x2c5))['style']['display']='block';if(_0x2c74c8&&_0x1282bc){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x5dd15c=_0x3d9e86[_0xea21f4(0x225)]||_0x3d9e86['matchDate']||serverTimestamp(),[_0x549735,_0x38d032]=await Promise['all']([getPlayerEloAtTime(_0x366eb7,_0x5dd15c,_0x419717),getPlayerEloAtTime(_0x510f1e,_0x5dd15c,_0x419717)]),{calculateElo:_0x40ec7b}=await import(_0xea21f4(0x1ff)),{newWinnerRating:_0x46c612,newLoserRating:_0x4d5bd3}=_0x40ec7b(_0x549735,_0x38d032),_0x300add=_0x4c6c57['position']||Number[_0xea21f4(0x285)],_0x40cb28=_0x5810e6[_0xea21f4(0x1e2)]||Number['MAX_SAFE_INTEGER'];let _0x49f8b0=_0x300add,_0x946b6f=_0x40cb28;_0x300add>_0x40cb28&&(_0x49f8b0=_0x40cb28,_0x946b6f=_0x40cb28+0x1);const _0x2a1257=writeBatch(db),_0x550584=doc(db,_0x4dadb0,_0x366eb7);_0x2a1257[_0xea21f4(0x128)](_0x550584,{'eloRating':_0x46c612,'position':_0x49f8b0,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x33210e=doc(db,_0x4dadb0,_0x510f1e);_0x2a1257[_0xea21f4(0x128)](_0x33210e,{'eloRating':_0x4d5bd3,'position':_0x946b6f,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0xea21f4(0x189)]});if(_0x300add>_0x40cb28){const _0x552d6b=await getDocs(query(collection(db,_0x4dadb0),where(_0xea21f4(0x1e2),'>',_0x40cb28),where('position','<',_0x300add)));_0x552d6b['forEach'](_0x87f049=>{const _0x42b02d=_0xea21f4,_0x45564a=doc(db,_0x4dadb0,_0x87f049['id']),_0x2e38f8=_0x87f049['data']()[_0x42b02d(0x1e2)];_0x2a1257['update'](_0x45564a,{'position':_0x2e38f8+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x42b02d(0x27b),'positionAdjustedAt':serverTimestamp()});});}if(!_0x2c74c8){const _0x13f9ae=doc(collection(db,_0x419717));_0x2a1257['set'](_0x13f9ae,{'playerId':_0x366eb7,'player':_0x3d9e86['winnerUsername'],'previousElo':_0x549735,'newElo':_0x46c612,'eloChange':_0x46c612-_0x549735,'opponentId':_0x510f1e,'opponent':_0x3d9e86['loserUsername'],'matchResult':'win','previousPosition':_0x300add,'newPosition':_0x49f8b0,'positionChange':_0x49f8b0-_0x300add,'matchId':_0x32e3e3,'timestamp':_0x5dd15c,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x49406a,'matchScore':_0x3d9e86[_0xea21f4(0x1e7)]+'-'+_0x3d9e86[_0xea21f4(0xd6)],'mapPlayed':_0x3d9e86[_0xea21f4(0x291)]||_0x3d9e86['mapName']||_0xea21f4(0xed),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x1282bc){const _0x3dafe6=doc(collection(db,_0x419717));_0x2a1257[_0xea21f4(0x9c)](_0x3dafe6,{'playerId':_0x510f1e,'player':_0x3d9e86['loserUsername'],'previousElo':_0x38d032,'newElo':_0x4d5bd3,'eloChange':_0x4d5bd3-_0x38d032,'opponentId':_0x366eb7,'opponent':_0x3d9e86['winnerUsername'],'matchResult':'loss','previousPosition':_0x40cb28,'newPosition':_0x946b6f,'positionChange':_0x946b6f-_0x40cb28,'matchId':_0x32e3e3,'timestamp':_0x5dd15c,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xea21f4(0x29f)][_0xea21f4(0x189)],'gameMode':_0x49406a,'matchScore':_0x3d9e86['winnerScore']+'-'+_0x3d9e86['loserScore'],'mapPlayed':_0x3d9e86['mapPlayed']||_0x3d9e86[_0xea21f4(0x208)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0xc4af2a=_0x49406a==='D1'?'approvedMatches':_0x49406a==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x286c3=doc(db,_0xc4af2a,_0x32e3e3);_0x2a1257[_0xea21f4(0x128)](_0x286c3,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':_0xea21f4(0x199),'originalWinnerElo':_0x4c6c57[_0xea21f4(0x286)],'originalLoserElo':_0x5810e6['eloRating'],'originalWinnerPosition':_0x300add,'originalLoserPosition':_0x40cb28,'resimulatedWinnerElo':_0x46c612,'resimulatedLoserElo':_0x4d5bd3,'resimulatedWinnerPosition':_0x49f8b0,'resimulatedLoserPosition':_0x946b6f}),await _0x2a1257['commit']();const _0x51da6e=(!_0x2c74c8?0x1:0x0)+(!_0x1282bc?0x1:0x0),_0x1123f5=_0x300add!==_0x49f8b0||_0x40cb28!==_0x946b6f;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x51da6e+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x549735+'→'+_0x46c612+'\x20(+'+(_0x46c612-_0x549735)+'),\x20')+(_0xea21f4(0x15b)+_0x38d032+'→'+_0x4d5bd3+'\x20('+(_0x4d5bd3-_0x38d032)+_0xea21f4(0x10d))+(''+(_0x1123f5?_0xea21f4(0x29c)+_0x300add+'→'+_0x49f8b0+',\x20Loser\x20'+_0x40cb28+'→'+_0x946b6f:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x1edbd2){console['error']('Error\x20resimulating\x20match:',_0x1edbd2),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x1edbd2['message'],'error');}}async function getPlayerEloAtTime(_0x2dce95,_0x391835,_0x213719){const _0x51377d=a2_0x53ab39;try{const _0x45644a=_0x391835['toDate']?_0x391835['toDate']():new Date(_0x391835),_0x1d7490=query(collection(db,_0x213719),where('playerId','==',_0x2dce95),where('timestamp','<',_0x391835),orderBy(_0x51377d(0x25e),'desc'),limit(0x1)),_0x1c93f8=await getDocs(_0x1d7490);if(!_0x1c93f8['empty']){const _0x1d9ee8=_0x1c93f8['docs'][0x0][_0x51377d(0x16c)]();return console['log'](_0x51377d(0x28d)+_0x2dce95+_0x51377d(0x140)+_0x1d9ee8[_0x51377d(0x21a)]),_0x1d9ee8['newElo'];}else return console['log']('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x2dce95+_0x51377d(0x2b4)),0x4b0;}catch(_0x5eb5ec){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x2dce95+':',_0x5eb5ec),0x4b0;}}function a2_0x3e7c(_0x5cc5c6,_0x1cc45a){const _0x2b581=a2_0x1ca1();return a2_0x3e7c=function(_0x12d18f,_0x261c5f){_0x12d18f=_0x12d18f-0x7c;let _0x1ca18d=_0x2b581[_0x12d18f];return _0x1ca18d;},a2_0x3e7c(_0x5cc5c6,_0x1cc45a);}function openResimulateModal(){const _0xf154ed=a2_0x53ab39;console['log']('openResimulateModal\x20called!');const _0x17f460=document[_0xf154ed(0x2c1)]('resimulate-modal');console[_0xf154ed(0x7f)]('Modal\x20element\x20found:',_0x17f460);if(!_0x17f460){console['error'](_0xf154ed(0x2bf));return;}_0x17f460[_0xf154ed(0x227)]['display']='block',_0x17f460[_0xf154ed(0x227)]['visibility']=_0xf154ed(0x23b),_0x17f460['style'][_0xf154ed(0xfd)]='1',_0x17f460['classList']['add'](_0xf154ed(0x2cb)),console['log']('Modal\x20should\x20now\x20be\x20visible'),console['log'](_0xf154ed(0x293),window[_0xf154ed(0xf5)](_0x17f460)['display']);const _0x3662a3=document['getElementById']('match-details-container'),_0x3365af=document['getElementById']('validation-results-container'),_0x30ed2f=document['getElementById']('confirm-resimulate-btn'),_0x87a71b=document[_0xf154ed(0x2c1)]('resimulate-match-id');if(_0x3662a3)_0x3662a3['innerHTML']='';if(_0x3365af)_0x3365af[_0xf154ed(0xc6)]='';if(_0x30ed2f)_0x30ed2f['style'][_0xf154ed(0x1b8)]=_0xf154ed(0x88);if(_0x87a71b)_0x87a71b['value']='';console[_0xf154ed(0x7f)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x3c9406=a2_0x53ab39;document[_0x3c9406(0x2c1)]('resimulate-modal')['style']['display']='none',window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a2_0x53ab39(0xd5)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x2d56f4=a2_0x53ab39;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification(_0x2d56f4(0x27d),_0x2d56f4(0x8c));}catch(_0x3b7fb1){console['error'](_0x2d56f4(0x9f),_0x3b7fb1),showNotification(_0x2d56f4(0x108)+_0x3b7fb1['message'],'error');}}function renderPointsOverview(_0xddc7d3){const _0x4f776b=a2_0x53ab39,_0xd73dc7=document[_0x4f776b(0x2c1)](_0x4f776b(0x2ac));if(!_0xd73dc7)return;if(_0xddc7d3['length']===0x0){_0xd73dc7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0xd73dc7[_0x4f776b(0xc6)]='',_0xddc7d3['forEach'](_0x50c7ac=>{const _0x53a466=_0x4f776b,_0x1c72c6=document[_0x53a466(0x148)]('tr'),_0x3f5d4f=_0x50c7ac['displayName']||_0x50c7ac[_0x53a466(0x2c3)]||_0x53a466(0xba),_0x2b79b0=_0x50c7ac['email']||'No\x20email',_0x46f4cd=_0x50c7ac[_0x53a466(0x283)]||0x0,_0x515b82=_0x50c7ac['lastPointsModified']?new Date(_0x50c7ac['lastPointsModified']['seconds']*0x3e8)[_0x53a466(0xbe)]():'Never';_0x1c72c6[_0x53a466(0xc6)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x3f5d4f+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2b79b0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x46f4cd>0x3e8?'high-points':_0x46f4cd>0x1f4?_0x53a466(0x7c):'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x46f4cd['toLocaleString']()+_0x53a466(0x1e6)+_0x515b82+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x50c7ac['id']+_0x53a466(0x1d7)+_0x50c7ac['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xd73dc7['appendChild'](_0x1c72c6);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x41a8df=a2_0x53ab39;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0xe1261a=document[_0x41a8df(0x1e3)]('.quick-edit-btn');console[_0x41a8df(0x7f)](_0x41a8df(0x234)+_0xe1261a['length']+_0x41a8df(0x151)),_0xe1261a[_0x41a8df(0x167)](_0x37d809=>{const _0xb0f7af=_0x37d809['cloneNode'](!![]);_0x37d809['parentNode']['replaceChild'](_0xb0f7af,_0x37d809);});const _0x53594d=document['querySelectorAll'](_0x41a8df(0x299));console['log']('Found\x20'+_0x53594d[_0x41a8df(0x1e4)]+'\x20view\x20history\x20buttons'),_0x53594d['forEach'](_0x3cc63c=>{const _0x17198d=_0x3cc63c['cloneNode'](!![]);_0x3cc63c['parentNode']['replaceChild'](_0x17198d,_0x3cc63c);}),document[_0x41a8df(0x1e3)](_0x41a8df(0x2d7))['forEach'](_0x1f0f65=>{const _0xdb53dc=_0x41a8df;_0x1f0f65[_0xdb53dc(0x2c9)]('click',function(_0x4a187b){const _0x2952d8=_0xdb53dc;_0x4a187b['preventDefault'](),_0x4a187b[_0x2952d8(0x279)]();const _0x2a48fd=this['dataset']['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x2a48fd);if(!_0x2a48fd){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x2a48fd);});}),document['querySelectorAll']('.view-history-btn')[_0x41a8df(0x167)](_0x3d36c9=>{const _0x43d92d=_0x41a8df;_0x3d36c9['addEventListener'](_0x43d92d(0x237),function(_0x1cc418){const _0x5cf595=_0x43d92d;_0x1cc418['preventDefault'](),_0x1cc418['stopPropagation']();const _0x5485f0=this[_0x5cf595(0x277)]['userId'];console[_0x5cf595(0x7f)]('View\x20history\x20clicked\x20for\x20user:',_0x5485f0);if(!_0x5485f0){console['error'](_0x5cf595(0x91));return;}this['style'][_0x5cf595(0xfd)]=_0x5cf595(0x1c3),setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x5485f0);});}),console['log'](_0x41a8df(0x1ee));}async function openQuickEditModal(_0x5b10d1){const _0x5b466e=a2_0x53ab39;console[_0x5b466e(0x7f)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x5b10d1);const _0xcf9d80=document['getElementById'](_0x5b466e(0x2b8));if(!_0xcf9d80){console['error']('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page',_0x5b466e(0x245));return;}try{showNotification(_0x5b466e(0x125),'info');const _0xabb8c7=doc(db,'userProfiles',_0x5b10d1),_0x243457=await getDoc(_0xabb8c7);if(!_0x243457['exists']()){showNotification(_0x5b466e(0xfc),'error');return;}const _0x1bbbc4=_0x243457['data']();console[_0x5b466e(0x7f)]('User\x20data\x20loaded:',_0x1bbbc4);const _0x2c4764=document['getElementById'](_0x5b466e(0x13b)),_0x1191e1=document['getElementById']('quick-edit-display-name'),_0x8e2d8b=document['getElementById']('quick-edit-email'),_0x46736a=document['getElementById']('quick-edit-current-points'),_0x3e881c=document['getElementById']('quick-edit-points-form');if(!_0x2c4764||!_0x1191e1||!_0x8e2d8b||!_0x46736a||!_0x3e881c){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification(_0x5b466e(0x1ca),'error');return;}_0x2c4764['value']=_0x5b10d1,_0x1191e1['textContent']=_0x1bbbc4['displayName']||_0x1bbbc4['username']||_0x5b466e(0xba),_0x8e2d8b[_0x5b466e(0xd2)]=_0x1bbbc4['email']||'No\x20email',_0x46736a['textContent']=(_0x1bbbc4[_0x5b466e(0x283)]||0x0)[_0x5b466e(0x13f)](),_0x3e881c[_0x5b466e(0x1bb)]();const _0x2ab1d0=document[_0x5b466e(0x2c1)](_0x5b466e(0x93));_0x2ab1d0&&(_0x2ab1d0[_0x5b466e(0x8d)]=!![]);_0xcf9d80[_0x5b466e(0x18f)]['add'](_0x5b466e(0x2cb)),console['log'](_0x5b466e(0x19c));const _0x110bf1=document['getElementById']('quick-points-amount');_0x110bf1&&setTimeout(()=>_0x110bf1[_0x5b466e(0xe0)](),0x64);}catch(_0x1a02c8){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x1a02c8),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x1a02c8['message'],'error');}}function closeQuickEditModal(){const _0x1c711e=a2_0x53ab39,_0x1a2dbf=document['getElementById'](_0x1c711e(0x2b8));_0x1a2dbf&&_0x1a2dbf['classList']['remove']('active');}async function handleQuickEditPoints(_0x4a7051){const _0x4c6521=a2_0x53ab39;_0x4a7051['preventDefault']();const _0x14dd69=document['getElementById']('quick-edit-user-id')[_0x4c6521(0x1f0)],_0x26547b=document['querySelector']('input[name=\x22quick-action\x22]:checked')['value'],_0x2bb5e3=parseInt(document['getElementById']('quick-points-amount')['value']),_0x1db848=document['getElementById']('quick-points-reason')[_0x4c6521(0x1f0)]['trim']();console['log']('Processing\x20points\x20edit:',{'userId':_0x14dd69,'action':_0x26547b,'amount':_0x2bb5e3,'reason':_0x1db848});if(!_0x14dd69||!_0x2bb5e3||_0x2bb5e3<0x0){showNotification('Please\x20enter\x20valid\x20data',_0x4c6521(0x245));return;}try{await modifyUserPoints(_0x14dd69,_0x26547b,_0x2bb5e3,_0x1db848),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x14dd69);}catch(_0x22e9a7){console[_0x4c6521(0x245)]('Error\x20updating\x20points:',_0x22e9a7),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x22e9a7['message'],_0x4c6521(0x245));}}async function searchUsersForPoints(){const _0x264652=a2_0x53ab39,_0x3b2aaf=document[_0x264652(0x2c1)](_0x264652(0xaf))['value']['trim']()[_0x264652(0x27a)](),_0xf4139a=document['getElementById']('user-search-results');if(!_0x3b2aaf||_0x3b2aaf['length']<0x2){_0xf4139a['innerHTML']='';return;}_0xf4139a[_0x264652(0xc6)]='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x5d5b98=collection(db,'userProfiles'),_0x29fe18=await getDocs(_0x5d5b98),_0x5328f8=[];_0x29fe18['forEach'](_0x3f84d1=>{const _0x43f106=_0x264652,_0x44e16b=_0x3f84d1['data'](),_0x1370d6=(_0x44e16b['displayName']||_0x44e16b['username']||'')['toLowerCase'](),_0x14287a=(_0x44e16b['email']||'')['toLowerCase']();(_0x1370d6['includes'](_0x3b2aaf)||_0x14287a['includes'](_0x3b2aaf))&&_0x5328f8[_0x43f106(0xec)]({'id':_0x3f84d1['id'],..._0x44e16b});});if(_0x5328f8[_0x264652(0x1e4)]===0x0){_0xf4139a[_0x264652(0xc6)]=_0x264652(0x29d);return;}_0xf4139a[_0x264652(0xc6)]='',_0x5328f8['forEach'](_0x40cc74=>{const _0x5142c8=_0x264652,_0x8d385b=document['createElement']('div');_0x8d385b['className']='search-result-item',_0x8d385b[_0x5142c8(0xc6)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x40cc74['displayName']||_0x40cc74['username']||'Unknown')+_0x5142c8(0xa1)+(_0x40cc74['email']||'No\x20email')+_0x5142c8(0x158)+(_0x40cc74[_0x5142c8(0x283)]||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x8d385b['addEventListener']('click',()=>selectUserForPoints(_0x40cc74)),_0xf4139a['appendChild'](_0x8d385b);});}catch(_0x4fc6af){console[_0x264652(0x245)](_0x264652(0x1d2),_0x4fc6af),_0xf4139a['innerHTML']=_0x264652(0xb4);}}function selectUserForPoints(_0x3f349f){const _0x3fd87c=a2_0x53ab39;document['getElementById']('selected-user-name')['textContent']=_0x3f349f['displayName']||_0x3f349f['username']||_0x3fd87c(0xba),document['getElementById']('selected-user-points')['textContent']=(_0x3f349f['points']||0x0)['toLocaleString'](),document[_0x3fd87c(0x2c1)](_0x3fd87c(0xe7))['value']=_0x3f349f['id'],document['getElementById'](_0x3fd87c(0x280))[_0x3fd87c(0x227)][_0x3fd87c(0x1b8)]='block',document['getElementById']('points-management-forms')['style']['display']='block',document['getElementById'](_0x3fd87c(0x2a7))[_0x3fd87c(0xc6)]='',document['getElementById']('points-user-search')['value']='';}async function handleModifyPoints(_0x4840d3){const _0x4974f8=a2_0x53ab39;_0x4840d3['preventDefault']();const _0x3db662=document['getElementById']('selected-user-id')['value'],_0x293ce1=document[_0x4974f8(0x2c1)]('points-action')['value'],_0x446e8e=parseInt(document[_0x4974f8(0x2c1)]('points-amount')[_0x4974f8(0x1f0)]),_0x76592a=document[_0x4974f8(0x2c1)]('points-reason')['value']['trim']();if(!_0x3db662||!_0x446e8e||_0x446e8e<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount',_0x4974f8(0x245));return;}try{await modifyUserPoints(_0x3db662,_0x293ce1,_0x446e8e,_0x76592a),document['getElementById']('modify-points-form')['reset']();const _0x12a9df=doc(db,'userProfiles',_0x3db662),_0x17577e=await getDoc(_0x12a9df);if(_0x17577e[_0x4974f8(0x2b2)]()){const _0x54b3dc=_0x17577e['data']();document[_0x4974f8(0x2c1)]('selected-user-points')['textContent']=(_0x54b3dc['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x583b98){console['error']('Error\x20modifying\x20points:',_0x583b98),showNotification(_0x4974f8(0x22c)+_0x583b98[_0x4974f8(0x11f)],_0x4974f8(0x245));}}async function loadPointsHistory(){const _0x3d6217=a2_0x53ab39,_0x124623=document['getElementById'](_0x3d6217(0x181));if(!_0x124623)return;_0x124623['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x2b5fc2=collection(db,'pointsHistory'),_0x5c1d03=query(_0x2b5fc2,orderBy('timestamp','desc'),limit(0x32)),_0xc2d7df=await getDocs(_0x5c1d03);if(_0xc2d7df['empty']){_0x124623['innerHTML']=_0x3d6217(0x122);return;}_0x124623['innerHTML']='',_0xc2d7df['forEach'](_0x28666d=>{const _0x265097=_0x3d6217,_0xeb745a=_0x28666d['data'](),_0x1a9512=document['createElement']('tr'),_0x426cd1=_0xeb745a['timestamp']?new Date(_0xeb745a['timestamp']['seconds']*0x3e8)[_0x265097(0x13f)]():'Unknown';let _0x4cc9a4='';switch(_0xeb745a['action']){case'add':_0x4cc9a4='Added\x20'+_0xeb745a['amount']+'\x20points';break;case _0x265097(0x217):_0x4cc9a4='Subtracted\x20'+_0xeb745a[_0x265097(0x258)]+'\x20points';break;case'set':_0x4cc9a4=_0x265097(0x1cf)+_0xeb745a['amount']+'\x20points';break;default:_0x4cc9a4=_0xeb745a['action']+'\x20'+_0xeb745a['amount']+'\x20points';}_0x1a9512['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x426cd1+_0x265097(0x228)+(_0xeb745a['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4cc9a4+_0x265097(0x14b)+_0xeb745a[_0x265097(0xc2)]+_0x265097(0x1a8)+(_0xeb745a[_0x265097(0x2ba)]||0x0)+'\x20→\x20'+(_0xeb745a['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0xeb745a['reason']||'No\x20reason\x20provided')+_0x265097(0x228)+(_0xeb745a['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x124623[_0x265097(0x1a0)](_0x1a9512);});}catch(_0x5fd822){console[_0x3d6217(0x245)](_0x3d6217(0x214),_0x5fd822),_0x124623['innerHTML']=_0x3d6217(0x1f8)+_0x5fd822[_0x3d6217(0x11f)]+'</td></tr>';}}function filterPointsOverview(){const _0x338afe=a2_0x53ab39,_0x21e4e1=document['getElementById'](_0x338afe(0x2bd))['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x9c3cee=window['allUsersPoints']['filter'](_0x4c625a=>{const _0x2b9756=_0x338afe,_0x572d46=(_0x4c625a[_0x2b9756(0x271)]||_0x4c625a[_0x2b9756(0x2c3)]||'')['toLowerCase'](),_0x4bd810=(_0x4c625a['email']||'')[_0x2b9756(0x27a)]();return _0x572d46['includes'](_0x21e4e1)||_0x4bd810['includes'](_0x21e4e1);});renderPointsOverview(_0x9c3cee);}function sortPointsOverview(){const _0x124e5b=a2_0x53ab39,_0x39545d=document['getElementById']('points-sort-order')['value'];if(!window[_0x124e5b(0x165)])return;const _0x4b60d8=[...window['allUsersPoints']];switch(_0x39545d){case'points-desc':_0x4b60d8['sort']((_0x4b786e,_0xa0faea)=>(_0xa0faea[_0x124e5b(0x283)]||0x0)-(_0x4b786e[_0x124e5b(0x283)]||0x0));break;case'points-asc':_0x4b60d8['sort']((_0x47398a,_0x3ac99e)=>(_0x47398a['points']||0x0)-(_0x3ac99e['points']||0x0));break;case _0x124e5b(0x246):_0x4b60d8[_0x124e5b(0x222)]((_0x3cda4b,_0x5c6d4e)=>{const _0x53dc17=_0x124e5b,_0x4da6bf=(_0x3cda4b[_0x53dc17(0x271)]||_0x3cda4b['username']||'')['toLowerCase'](),_0x368a74=(_0x5c6d4e[_0x53dc17(0x271)]||_0x5c6d4e['username']||'')['toLowerCase']();return _0x4da6bf['localeCompare'](_0x368a74);});break;case'name-desc':_0x4b60d8['sort']((_0x51a96d,_0x3c1012)=>{const _0x2dbdac=_0x124e5b,_0x2f056c=(_0x51a96d['displayName']||_0x51a96d['username']||'')[_0x2dbdac(0x27a)](),_0x3ab41f=(_0x3c1012['displayName']||_0x3c1012['username']||'')['toLowerCase']();return _0x3ab41f['localeCompare'](_0x2f056c);});break;}renderPointsOverview(_0x4b60d8);}async function handleAwardItem(_0x1c85f6){const _0x2b6621=a2_0x53ab39;_0x1c85f6['preventDefault']();const _0x71577e=document['getElementById'](_0x2b6621(0xe7))['value'],_0x25bb3a=document[_0x2b6621(0x2c1)]('store-item-select')['value'],_0x5304c5=document['getElementById']('award-reason')['value']['trim']();if(!_0x71577e||!_0x25bb3a){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0x410267){console['error'](_0x2b6621(0xd0),_0x410267),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x410267['message'],_0x2b6621(0x245));}}async function loadUserPointsHistory(_0x497bef){const _0x5cef29=a2_0x53ab39;try{const _0x51ca60=collection(db,'pointsHistory'),_0x1299a2=query(_0x51ca60,where(_0x5cef29(0x12f),'==',_0x497bef),orderBy(_0x5cef29(0x25e),'desc')),_0x19c973=await getDocs(_0x1299a2);console[_0x5cef29(0x7f)]('Found\x20'+_0x19c973['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x497bef),showNotification('User\x20has\x20'+_0x19c973['size']+'\x20points\x20history\x20entries','info');}catch(_0x260307){console[_0x5cef29(0x245)]('Error\x20loading\x20user\x20points\x20history:',_0x260307),showNotification('Failed\x20to\x20load\x20user\x20history',_0x5cef29(0x245));}}async function initializeUserPointsField(){const _0x18f14f=a2_0x53ab39;try{console[_0x18f14f(0x7f)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x4b0c85=collection(db,_0x18f14f(0x15f)),_0x57d413=await getDocs(_0x4b0c85);if(_0x57d413['empty']){console[_0x18f14f(0x7f)](_0x18f14f(0x19e));return;}let _0x38fe7f=0x0,_0x4cb27b=0x0;const _0x182577=writeBatch(db);let _0x5ecb9c=0x0;return console['log']('Found\x20'+_0x57d413[_0x18f14f(0x179)]+'\x20users\x20to\x20check...'),_0x57d413['forEach'](_0x30b280=>{const _0x2c700a=_0x18f14f,_0x1f6eff=_0x30b280['data']();_0x1f6eff[_0x2c700a(0x283)]===undefined||_0x1f6eff[_0x2c700a(0x283)]===null?(_0x182577[_0x2c700a(0x128)](_0x30b280['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x38fe7f++,_0x5ecb9c++,console['log'](_0x2c700a(0x236)+(_0x1f6eff['displayName']||_0x1f6eff['username']||_0x1f6eff[_0x2c700a(0x1f5)]||'Unknown')+'\x20for\x20points\x20initialization')):(_0x4cb27b++,console['log']((_0x1f6eff['displayName']||_0x1f6eff[_0x2c700a(0x2c3)]||_0x1f6eff['email']||'Unknown')+_0x2c700a(0x154)+_0x1f6eff[_0x2c700a(0x283)])),_0x5ecb9c>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x38fe7f>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x38fe7f+'\x20users...'),await _0x182577['commit'](),console['log'](_0x18f14f(0x1cd)+_0x38fe7f+'\x20users')):console[_0x18f14f(0x7f)]('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x57d413['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x38fe7f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x4cb27b),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x38fe7f+'\x20users.\x20'+_0x4cb27b+'\x20users\x20already\x20had\x20points.','success'),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x57d413['size'],'usersUpdated':_0x38fe7f,'usersAlreadyHadPoints':_0x4cb27b};}catch(_0x55dd02){console['error'](_0x18f14f(0xe8),_0x55dd02),showNotification(_0x18f14f(0xac)+_0x55dd02['message'],'error');throw _0x55dd02;}}function addPointsMigrationButton(){const _0x523cf6=a2_0x53ab39,_0x2b5434=document[_0x523cf6(0x2c1)]('manage-points');if(!_0x2b5434)return;if(document[_0x523cf6(0x2c1)]('migrate-points-btn'))return;const _0x38f8a4=document['createElement']('div');_0x38f8a4[_0x523cf6(0xdd)]='migration-section',_0x38f8a4[_0x523cf6(0x227)][_0x523cf6(0x1aa)]='20px',_0x38f8a4[_0x523cf6(0x227)]['padding']='15px',_0x38f8a4['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x38f8a4['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x38f8a4[_0x523cf6(0x227)][_0x523cf6(0x1dd)]=_0x523cf6(0x1a2),_0x38f8a4[_0x523cf6(0xc6)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x2d7490=_0x2b5434['querySelector']('.section-header');_0x2d7490&&_0x2d7490[_0x523cf6(0x2b5)]('afterend',_0x38f8a4),document[_0x523cf6(0x2c1)]('migrate-points-btn')['addEventListener']('click',async function(){const _0x539c2b=_0x523cf6;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x539c2b(0xc6)]=_0x539c2b(0x1db),this['style'][_0x539c2b(0x1f4)]='#28a745',setTimeout(()=>{_0x38f8a4['style']['display']='none';},0xbb8);}catch(_0xa6592c){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x539c2b(0x28a)]=![];}}});}function setupManagePointsSection(){const _0x53fb9d=a2_0x53ab39;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0xddf3d5=document['getElementById'](_0x53fb9d(0xaf));_0xddf3d5&&_0xddf3d5[_0x53fb9d(0x2c9)]('input',debounce(searchUsersForPoints,0x12c));const _0x2f53f8=document['getElementById']('modify-points-form');_0x2f53f8&&_0x2f53f8['addEventListener'](_0x53fb9d(0x216),handleModifyPoints);const _0x4263f3=document[_0x53fb9d(0x2c1)]('award-item-form');_0x4263f3&&_0x4263f3['addEventListener']('submit',handleAwardItem);const _0x1cb860=document[_0x53fb9d(0x2c1)]('points-overview-search');_0x1cb860&&_0x1cb860['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x2720e4=document[_0x53fb9d(0x2c1)]('points-sort-order');_0x2720e4&&_0x2720e4['addEventListener']('change',sortPointsOverview);const _0x238f16=document[_0x53fb9d(0x2c1)]('refresh-points-overview');_0x238f16&&_0x238f16[_0x53fb9d(0x2c9)]('click',loadPointsOverview);const _0x35570b=document['getElementById']('bulk-award-points-btn');_0x35570b&&_0x35570b['addEventListener']('click',async()=>{const _0x4bc7f3=_0x53fb9d;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x35570b[_0x4bc7f3(0x28a)]=!![],_0x35570b['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x3ba07f(),_0x35570b['disabled']=![],_0x35570b[_0x4bc7f3(0xc6)]='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x2e2270=document[_0x53fb9d(0x2c1)](_0x53fb9d(0xbc));_0x2e2270&&_0x2e2270['addEventListener'](_0x53fb9d(0x237),awardPointsToAllPilots);async function _0x3ba07f(){const _0x422c38=_0x53fb9d;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...',_0x422c38(0x251));const _0x46a7b2={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0xfa286d=0x0,_0x26c1d1=0x0,_0x3cc9d2=0x0,_0x291127=0x0,_0x46c610=0x0,_0x3f5d38=0x0;const _0x2453fb=new Set(),_0x111ad9=collection(db,_0x422c38(0xcd)),_0x5ad951=query(_0x111ad9,where(_0x422c38(0x2c8),'>=','Bulk\x20award:'),where(_0x422c38(0x2c8),'<=','Bulk\x20award:')),_0x29cb8a=await getDocs(_0x5ad951);_0x29cb8a[_0x422c38(0x167)](_0x5a361b=>{const _0xf49d7f=_0x422c38,_0x448a7c=_0x5a361b['data'](),_0x5cda18=_0x448a7c['reason']||'',_0x4eea52=_0x5cda18['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x4eea52&&_0x4eea52[0x1]&&_0x2453fb[_0xf49d7f(0x17a)](_0x4eea52[0x1]);}),console['log']('Found\x20'+_0x2453fb[_0x422c38(0x179)]+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x2da3e0,_0x4aab58,_0x2b6e61]=await Promise['all']([getDocs(collection(db,_0x422c38(0x1b3))),getDocs(collection(db,_0x422c38(0x275))),getDocs(collection(db,_0x422c38(0x1ea)))]),_0x53193c=_0x2da3e0['size']+_0x4aab58['size']+_0x2b6e61['size'];showNotification('Found\x20'+_0x53193c+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x29af3f=async(_0x583ede,_0x17978f)=>{const _0x1747b6=_0x422c38;let _0x5bb606=writeBatch(db);const _0x429ada=[];let _0x3f1642=0x0;for(const _0x2606ea of _0x583ede[_0x1747b6(0x278)]){try{if(_0x2453fb['has'](_0x2606ea['id'])){if(_0x17978f==='D1')_0x3f5d38++;if(_0x17978f==='D2')_0x3f5d38++;if(_0x17978f==='D3')_0x3f5d38++;continue;}const _0x5a2319=_0x2606ea['data'](),_0x18143b=_0x5a2319['subgameType']||_0x1747b6(0x298),_0x22cadc=_0x46a7b2[_0x18143b]||0xa;let _0x4fa0cc=_0x5a2319['winnerId'];if(!_0x4fa0cc&&_0x5a2319['winnerUsername']){const [_0x39be25,_0x162d71,_0x501bfb]=await Promise['all']([getDocs(query(collection(db,_0x1747b6(0x12b)),where('username','==',_0x5a2319['winnerUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x5a2319['winnerUsername']))),getDocs(query(collection(db,_0x1747b6(0x2bb)),where('username','==',_0x5a2319['winnerUsername'])))]);if(!_0x39be25[_0x1747b6(0xa2)])_0x4fa0cc=_0x39be25['docs'][0x0]['id'];else{if(!_0x162d71['empty'])_0x4fa0cc=_0x162d71['docs'][0x0]['id'];else{if(!_0x501bfb['empty'])_0x4fa0cc=_0x501bfb['docs'][0x0]['id'];}}}let _0x4959e3=_0x5a2319['loserId'];if(!_0x4959e3&&_0x5a2319['loserUsername']){const [_0x34fe76,_0x5968db,_0x2dd248]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x5a2319['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x5a2319[_0x1747b6(0x215)]))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x5a2319[_0x1747b6(0x215)])))]);if(!_0x34fe76['empty'])_0x4959e3=_0x34fe76['docs'][0x0]['id'];else{if(!_0x5968db[_0x1747b6(0xa2)])_0x4959e3=_0x5968db['docs'][0x0]['id'];else{if(!_0x2dd248['empty'])_0x4959e3=_0x2dd248['docs'][0x0]['id'];}}}if(_0x4fa0cc&&_0x4959e3){const _0x428357=doc(db,_0x1747b6(0x15f),_0x4fa0cc),_0x5612c3=doc(db,'userProfiles',_0x4959e3),[_0x579a73,_0x5f3f5c]=await Promise['all']([getDoc(_0x428357),getDoc(_0x5612c3)]);if(_0x579a73['exists']()){const _0x34199a=_0x579a73[_0x1747b6(0x16c)](),_0x97425b=_0x34199a['points']||0x0;_0x5bb606['update'](_0x428357,{'points':_0x97425b+_0x22cadc,'lastPointsModified':serverTimestamp()}),_0x429ada[_0x1747b6(0xec)]({'userId':_0x4fa0cc,'userEmail':_0x34199a['email']||_0x1747b6(0xbf),'displayName':_0x34199a['displayName']||_0x5a2319['winnerUsername']||_0x1747b6(0xba),'action':'add','amount':_0x22cadc,'previousPoints':_0x97425b,'newPoints':_0x97425b+_0x22cadc,'reason':'Bulk\x20award:\x20'+_0x18143b+_0x1747b6(0x1f6)+_0x2606ea['id']+'\x20-\x20'+_0x17978f,'adminEmail':auth['currentUser'][_0x1747b6(0x1f5)],'timestamp':serverTimestamp()});}if(_0x5f3f5c[_0x1747b6(0x2b2)]()){const _0x28a629=_0x5f3f5c[_0x1747b6(0x16c)](),_0x166c06=_0x28a629['points']||0x0;_0x5bb606[_0x1747b6(0x128)](_0x5612c3,{'points':_0x166c06+_0x22cadc,'lastPointsModified':serverTimestamp()}),_0x429ada[_0x1747b6(0xec)]({'userId':_0x4959e3,'userEmail':_0x28a629['email']||_0x1747b6(0xbf),'displayName':_0x28a629['displayName']||_0x5a2319['loserUsername']||'Unknown\x20User','action':'add','amount':_0x22cadc,'previousPoints':_0x166c06,'newPoints':_0x166c06+_0x22cadc,'reason':'Bulk\x20award:\x20'+_0x18143b+_0x1747b6(0x1f9)+_0x2606ea['id']+'\x20-\x20'+_0x17978f,'adminEmail':auth[_0x1747b6(0x29f)]['email'],'timestamp':serverTimestamp()});}_0x291127+=_0x22cadc*0x2,_0x3f1642+=0x2,_0x2453fb['add'](_0x2606ea['id']);if(_0x3f1642>=0x190){await _0x5bb606[_0x1747b6(0x188)]();for(const _0x5ee45e of _0x429ada){await addDoc(collection(db,'pointsHistory'),_0x5ee45e);}_0x5bb606=writeBatch(db),_0x3f1642=0x0,_0x429ada['length']=0x0;}}}catch(_0x5e502c){console[_0x1747b6(0x245)]('Error\x20processing\x20'+_0x17978f+'\x20match\x20'+_0x2606ea['id']+':',_0x5e502c),_0x46c610++;}}if(_0x3f1642>0x0){await _0x5bb606['commit']();for(const _0x4ed862 of _0x429ada){await addDoc(collection(db,'pointsHistory'),_0x4ed862);}}return{'processed':_0x17978f==='D1'?_0xfa286d:_0x17978f==='D2'?_0x26c1d1:_0x3cc9d2};};await _0x29af3f(_0x2da3e0,'D1'),await _0x29af3f(_0x4aab58,'D2'),await _0x29af3f(_0x2b6e61,'D3'),showNotification(_0x422c38(0xf2)+_0xfa286d+'\x20D1\x20matches,\x20'+_0x26c1d1+_0x422c38(0x98)+_0x3cc9d2+'\x20D3\x20matches.\x20'+(_0x422c38(0x19a)+_0x291127+'\x20points.\x20Skipped\x20'+_0x3f5d38+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x46c610),'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x1f829f){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x1f829f),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x1f829f['message'],_0x422c38(0x245));}}const _0x14acdd=document[_0x53fb9d(0x2c1)]('quick-edit-points-modal');if(_0x14acdd){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x47bacd=_0x14acdd['querySelector'](_0x53fb9d(0x203));_0x47bacd?_0x47bacd[_0x53fb9d(0x2c9)]('click',function(){const _0x4cf395=_0x53fb9d;console[_0x4cf395(0x7f)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console[_0x53fb9d(0xc5)]('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x232a02=document[_0x53fb9d(0x2c1)]('cancel-quick-edit');_0x232a02?_0x232a02['addEventListener']('click',function(){const _0x4b081c=_0x53fb9d;console[_0x4b081c(0x7f)]('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x53fb9d(0x7e));const _0x244fe8=document[_0x53fb9d(0x2c1)]('quick-edit-points-form');_0x244fe8?_0x244fe8['addEventListener'](_0x53fb9d(0x216),function(_0x5b2741){const _0x46f13e=_0x53fb9d;console[_0x46f13e(0x7f)]('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x5b2741);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x14acdd['addEventListener']('click',function(_0xd3a832){const _0x512dd6=_0x53fb9d;_0xd3a832[_0x512dd6(0x2a8)]===_0x14acdd&&(console[_0x512dd6(0x7f)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log'](_0x53fb9d(0xd3));}async function awardPointsToAllPilots(){const _0x11dce8=a2_0x53ab39;try{const _0x34561c=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x34561c||isNaN(_0x34561c)){showNotification(_0x11dce8(0x186),'error');return;}if(!confirm('This\x20will\x20award\x20'+_0x34561c+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification('Starting\x20points\x20award\x20process...','info');const [_0x5bf70e,_0x33c962,_0x5c05a7]=await Promise['all']([getDocs(collection(db,_0x11dce8(0x12b))),getDocs(collection(db,_0x11dce8(0x138))),getDocs(collection(db,'playersD3'))]);console[_0x11dce8(0x7f)]('Found\x20'+_0x5bf70e['size']+_0x11dce8(0x197)+_0x33c962['size']+'\x20D2\x20pilots,\x20'+_0x5c05a7['size']+'\x20D3\x20pilots');const _0x2c23cd=_0x5bf70e['size']+_0x33c962['size']+_0x5c05a7['size'],_0x156ce5=new Map();_0x5bf70e['forEach'](_0x577efe=>{const _0x513513=_0x577efe['data']();_0x156ce5['set'](_0x577efe['id'],{'username':_0x513513['username'],'ladder':'D1'});}),_0x33c962[_0x11dce8(0x167)](_0x50eb7e=>{const _0x122861=_0x50eb7e['data']();_0x156ce5['set'](_0x50eb7e['id'],{'username':_0x122861['username'],'ladder':'D2'});}),_0x5c05a7[_0x11dce8(0x167)](_0x1ed333=>{const _0xa18db4=_0x11dce8,_0x17d5cb=_0x1ed333['data']();_0x156ce5[_0xa18db4(0x9c)](_0x1ed333['id'],{'username':_0x17d5cb['username'],'ladder':'D3'});}),console['log']('Found\x20'+_0x156ce5['size']+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x2037be=0x0,_0x551972=0x0,_0x5106ca=0x0;const _0x547852=Array['from'](_0x156ce5['keys']()),_0x37b46e=0x190;for(let _0x30329f=0x0;_0x30329f<_0x547852['length'];_0x30329f+=_0x37b46e){const _0x19d89c=writeBatch(db),_0x4fbc0f=[],_0x31a3a2=_0x547852[_0x11dce8(0x265)](_0x30329f,_0x30329f+_0x37b46e),_0x821e94=await Promise[_0x11dce8(0x274)](_0x31a3a2['map'](_0x59f316=>getDoc(doc(db,'userProfiles',_0x59f316))));for(let _0x567b9a=0x0;_0x567b9a<_0x31a3a2['length'];_0x567b9a++){try{const _0x46931c=_0x31a3a2[_0x567b9a],_0x26cfc2=_0x156ce5['get'](_0x46931c),_0x3250cb=_0x821e94[_0x567b9a];if(_0x3250cb[_0x11dce8(0x2b2)]()){const _0x5c1cb4=_0x3250cb['data'](),_0x278111=_0x5c1cb4[_0x11dce8(0x283)]||0x0,_0x52722a=_0x278111+_0x34561c;_0x19d89c['update'](doc(db,'userProfiles',_0x46931c),{'points':_0x52722a,'lastPointsModified':serverTimestamp()}),_0x4fbc0f['push']({'userId':_0x46931c,'userEmail':_0x5c1cb4['email']||'unknown','displayName':_0x5c1cb4['displayName']||_0x26cfc2['username']||'Unknown\x20User','action':_0x11dce8(0x17a),'amount':_0x34561c,'previousPoints':_0x278111,'newPoints':_0x52722a,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x26cfc2['ladder']+')','adminEmail':auth['currentUser'][_0x11dce8(0x1f5)],'timestamp':serverTimestamp()}),_0x551972+=_0x34561c,_0x2037be++;}else _0x5106ca++,console['warn'](_0x11dce8(0x14d)+_0x26cfc2['username']+'\x20('+_0x46931c+')');}catch(_0x3596ea){_0x5106ca++,console[_0x11dce8(0x245)]('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x3596ea);}}await _0x19d89c['commit']();for(const _0x334130 of _0x4fbc0f){await addDoc(collection(db,'pointsHistory'),_0x334130);}showNotification('Processed\x20'+_0x2037be+'/'+_0x2c23cd+'\x20pilots...','info');}showNotification('Complete!\x20Awarded\x20'+_0x551972+'\x20points\x20to\x20'+_0x2037be+'\x20pilots.\x20Errors:\x20'+_0x5106ca,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x4158d6){console[_0x11dce8(0x245)](_0x11dce8(0xcb),_0x4158d6),showNotification('Error:\x20'+_0x4158d6[_0x11dce8(0x11f)],'error');}}function setupManageRibbonsSection(){const _0x1ca906=a2_0x53ab39;console[_0x1ca906(0x7f)]('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x66e05d=document['getElementById']('ribbon-user-search');_0x66e05d&&_0x66e05d['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x47fadd=document[_0x1ca906(0x2c1)](_0x1ca906(0x136));_0x47fadd&&_0x47fadd['addEventListener']('click',searchRibbonUser);const _0x1ceead=document['getElementById'](_0x1ca906(0x1a4));_0x1ceead&&_0x1ceead['addEventListener'](_0x1ca906(0x216),addRibbon),_0x66e05d&&_0x66e05d['addEventListener'](_0x1ca906(0x213),function(_0x537bc5){_0x537bc5['key']==='Enter'&&(_0x537bc5['preventDefault'](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x1b21a0,_0x33431e,_0x5ef9d9,_0x3fd0dc=''){const _0x3edf70=a2_0x53ab39,_0x11048a=doc(db,'userProfiles',_0x1b21a0),_0x1552b3=await getDoc(_0x11048a);if(!_0x1552b3[_0x3edf70(0x2b2)]())throw new Error('User\x20not\x20found');const _0x4cf8c1=_0x1552b3['data'](),_0x41846a=_0x4cf8c1['points']!==undefined?_0x4cf8c1['points']:0x0;_0x4cf8c1['points']===undefined&&(console[_0x3edf70(0x7f)](_0x3edf70(0x1ed)+(_0x4cf8c1['displayName']||_0x4cf8c1['email']||'Unknown')),await updateDoc(_0x11048a,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x403b25=_0x41846a;switch(_0x33431e){case'add':_0x403b25=_0x41846a+_0x5ef9d9;break;case'subtract':_0x403b25=Math['max'](0x0,_0x41846a-_0x5ef9d9);break;case'set':_0x403b25=_0x5ef9d9;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x11048a,{'points':_0x403b25,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x1b21a0,'userEmail':_0x4cf8c1[_0x3edf70(0x1f5)]||'unknown','displayName':_0x4cf8c1['displayName']||_0x4cf8c1['username']||'Unknown\x20User','action':_0x33431e,'amount':_0x5ef9d9,'previousPoints':_0x41846a,'newPoints':_0x403b25,'reason':_0x3fd0dc,'adminEmail':auth[_0x3edf70(0x29f)]['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x4375c7=a2_0x53ab39,_0x424bb4=document['getElementById']('points-overview-table-body');if(!_0x424bb4)return;_0x424bb4['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x1040e3=collection(db,_0x4375c7(0x15f)),_0x4a00e1=await getDocs(_0x1040e3);if(_0x4a00e1['empty']){_0x424bb4[_0x4375c7(0xc6)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0xc6d75c=[];let _0x34593e=0x0;_0x4a00e1[_0x4375c7(0x167)](_0x184244=>{const _0x4a5568=_0x4375c7,_0x3afa3b=_0x184244['data'](),_0x282da2=_0x3afa3b[_0x4a5568(0x283)]!==undefined?_0x3afa3b['points']:0x0;_0x3afa3b['points']===undefined&&_0x34593e++,_0xc6d75c['push']({'id':_0x184244['id'],..._0x3afa3b,'points':_0x282da2});}),_0x34593e>0x0&&(console['log']('Found\x20'+_0x34593e+_0x4375c7(0x116)),showNotification(_0x34593e+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0xc6d75c['sort']((_0x3caffc,_0x4d2192)=>(_0x4d2192['points']||0x0)-(_0x3caffc['points']||0x0)),window['allUsersPoints']=_0xc6d75c,renderPointsOverview(_0xc6d75c);}catch(_0x454abf){console['error']('Error\x20loading\x20points\x20overview:',_0x454abf),_0x424bb4[_0x4375c7(0xc6)]=_0x4375c7(0xf7)+_0x454abf[_0x4375c7(0x11f)]+_0x4375c7(0x85);}}async function loadRibbonsData(){const _0xc7ced9=a2_0x53ab39,_0x25ca5d=document['getElementById'](_0xc7ced9(0x172));if(!_0x25ca5d)return;_0x25ca5d[_0xc7ced9(0xc6)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0xee4e10,_0x3f4519,_0xee5f9c]=await Promise['all']([getDocs(collection(db,_0xc7ced9(0x11b))),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x25ca5d['innerHTML']='';const _0x6c496a=(_0x30e53a,_0xf306bd)=>{_0x30e53a['forEach'](_0x3afa16=>{const _0x260360=a2_0x3e7c,_0x1d9340=_0x3afa16[_0x260360(0x16c)](),_0x5f103d=_0x1d9340['ribbons']||{},_0x13d57c=Object['keys'](_0x5f103d)['length'],_0xc6032b=document[_0x260360(0x148)]('tr');_0xc6032b[_0x260360(0xc6)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1d9340[_0x260360(0x2c3)]||'Unknown')+_0x260360(0x1f3)+_0xf306bd['toLowerCase']()+'\x22>'+_0xf306bd+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x13d57c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1d9340['lastUpdated']?new Date(_0x1d9340[_0x260360(0xd4)][_0x260360(0x20c)]*0x3e8)['toLocaleDateString']():_0x260360(0xed))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x1d9340[_0x260360(0x2c3)]+'\x22\x20data-ladder=\x22'+_0xf306bd+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x25ca5d[_0x260360(0x1a0)](_0xc6032b);});};_0x6c496a(_0xee4e10,'D1'),_0x6c496a(_0x3f4519,'D2'),_0x6c496a(_0xee5f9c,'D3'),document['querySelectorAll'](_0xc7ced9(0x9a))[_0xc7ced9(0x167)](_0x543856=>{const _0x40ff6e=_0xc7ced9;_0x543856[_0x40ff6e(0x2c9)](_0x40ff6e(0x237),function(){const _0x927fae=_0x40ff6e,_0x39a601=this[_0x927fae(0x277)]['username'],_0x31bb54=this['dataset']['ladder'];editUserRibbons(_0x39a601,_0x31bb54);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully',_0xc7ced9(0x8c));}catch(_0x282ef0){console['error'](_0xc7ced9(0xb8),_0x282ef0),_0x25ca5d['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data',_0xc7ced9(0x245));}}async function searchRibbonUser(){const _0x1f7685=a2_0x53ab39,_0x5ad962=document['getElementById'](_0x1f7685(0x194))['value']['trim']();if(!_0x5ad962){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x5500fa,_0x12a57d,_0x5ce55e]=await Promise['all']([getDoc(doc(db,'playerRibbons',_0x5ad962)),getDoc(doc(db,'playerRibbonsD2',_0x5ad962)),getDoc(doc(db,_0x1f7685(0xf0),_0x5ad962))]);let _0x30906f=null,_0xab7ff0=null;if(_0x5500fa[_0x1f7685(0x2b2)]())_0x30906f='D1',_0xab7ff0=_0x5500fa[_0x1f7685(0x16c)]();else{if(_0x12a57d['exists']())_0x30906f='D2',_0xab7ff0=_0x12a57d['data']();else _0x5ce55e[_0x1f7685(0x2b2)]()&&(_0x30906f='D3',_0xab7ff0=_0x5ce55e[_0x1f7685(0x16c)]());}_0x30906f?(document['getElementById']('current-ribbon-user')['textContent']=_0x5ad962,document['getElementById']('ribbon-target-user')['value']=_0x5ad962,document['getElementById']('ribbon-target-ladder')['value']=_0x30906f,document['getElementById'](_0x1f7685(0xc0))['style']['display']='block',displayCurrentRibbons(_0xab7ff0['ribbons']||{}),showNotification(_0x1f7685(0x234)+_0x5ad962+'\x20in\x20'+_0x30906f+'\x20ladder','success')):showNotification('User\x20'+_0x5ad962+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x3a88d3){console['error']('Error\x20searching\x20user:',_0x3a88d3),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x505278){const _0x1c86e0=a2_0x53ab39,_0x4ecc3f=document['getElementById']('current-ribbons-list');if(!_0x4ecc3f)return;_0x4ecc3f[_0x1c86e0(0xc6)]='';if(Object['keys'](_0x505278)['length']===0x0){_0x4ecc3f['innerHTML']=_0x1c86e0(0xdc);return;}Object['entries'](_0x505278)['forEach'](([_0x5e11ec,_0x4d81f8])=>{const _0x382b0e=_0x1c86e0,_0x2c371a=document['createElement']('div');_0x2c371a[_0x382b0e(0xdd)]='ribbon-item',_0x2c371a[_0x382b0e(0xc6)]=_0x382b0e(0x21d)+_0x5e11ec+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x4d81f8[_0x382b0e(0x173)]||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x4d81f8['awardedAt']?new Date(_0x4d81f8['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x5e11ec+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ecc3f['appendChild'](_0x2c371a);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x1b6a9d=>{_0x1b6a9d['addEventListener']('click',function(){const _0x3abc35=this['dataset']['ribbon'];removeRibbon(_0x3abc35);});});}async function addRibbon(_0x33bf59){const _0x507c73=a2_0x53ab39;_0x33bf59['preventDefault']();const _0x31f375=document[_0x507c73(0x2c1)]('ribbon-target-user')['value'],_0x249ef8=document[_0x507c73(0x2c1)]('ribbon-target-ladder')['value'],_0x5c9867=document[_0x507c73(0x2c1)]('ribbon-type-select')['value'],_0x2a660c=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x31f375||!_0x249ef8||!_0x5c9867||!_0x2a660c){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x40da20='playerRibbons'+(_0x249ef8==='D1'?'':_0x249ef8),_0x5afb51=doc(db,_0x40da20,_0x31f375),_0x5a8796=await getDoc(_0x5afb51),_0x5763b4=_0x5a8796['exists']()?_0x5a8796['data']()['ribbons']||{}:{};_0x5763b4[_0x5c9867]={'level':_0x2a660c,'awardedAt':serverTimestamp()},await setDoc(_0x5afb51,{'username':_0x31f375,'ladder':_0x249ef8,'ribbons':_0x5763b4,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x5c9867+'\x20Level\x20'+_0x2a660c+'\x20to\x20'+_0x31f375,'success'),displayCurrentRibbons(_0x5763b4),document['getElementById']('ribbon-type-select')[_0x507c73(0x1f0)]='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x21524b){console['error']('Error\x20adding\x20ribbon:',_0x21524b),showNotification(_0x507c73(0x1d1),'error');}}async function removeRibbon(_0x4acaa7){const _0x452d7f=a2_0x53ab39,_0x164c5e=document[_0x452d7f(0x2c1)]('ribbon-target-user')['value'],_0x2f791b=document['getElementById'](_0x452d7f(0x1eb))['value'];if(!confirm(_0x452d7f(0x1c0)+_0x4acaa7+'\x20from\x20'+_0x164c5e+'?'))return;try{const _0x196305='playerRibbons'+(_0x2f791b==='D1'?'':_0x2f791b),_0xde3e4e=doc(db,_0x196305,_0x164c5e),_0xa86da1=await getDoc(_0xde3e4e),_0x3218d3=_0xa86da1[_0x452d7f(0x2b2)]()?_0xa86da1[_0x452d7f(0x16c)]()['ribbons']||{}:{};delete _0x3218d3[_0x4acaa7],await setDoc(_0xde3e4e,{'username':_0x164c5e,'ladder':_0x2f791b,'ribbons':_0x3218d3,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification(_0x452d7f(0x249)+_0x4acaa7+'\x20from\x20'+_0x164c5e,'success'),displayCurrentRibbons(_0x3218d3);}catch(_0x2e2c34){console['error']('Error\x20removing\x20ribbon:',_0x2e2c34),showNotification('Error\x20removing\x20ribbon',_0x452d7f(0x245));}}function editUserRibbons(_0x276ccf,_0x20c7ce){document['getElementById']('ribbon-user-search')['value']=_0x276ccf,searchRibbonUser();}