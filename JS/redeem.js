const a50_0x1e640b=a50_0x5d95,a50_0x45e101=(function(){let _0x3ccdaa=!![];return function(_0x1b5a34,_0x450bce){const _0x561a73=_0x3ccdaa?function(){if(_0x450bce){const _0x11c6fa=_0x450bce['apply'](_0x1b5a34,arguments);return _0x450bce=null,_0x11c6fa;}}:function(){};return _0x3ccdaa=![],_0x561a73;};}()),a50_0x19daaa=a50_0x45e101(this,function(){const _0x3e6f1e=a50_0x5d95;let _0x4ebb41;try{const _0x849527=Function(_0x3e6f1e(0x19c)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4ebb41=_0x849527();}catch(_0x2227d1){_0x4ebb41=window;}const _0x55b0a7=_0x4ebb41[_0x3e6f1e(0x17f)]=_0x4ebb41['console']||{},_0x4f35e9=[_0x3e6f1e(0x16b),'warn',_0x3e6f1e(0x135),_0x3e6f1e(0x175),'exception',_0x3e6f1e(0x146),'trace'];for(let _0x13e6c4=0x0;_0x13e6c4<_0x4f35e9['length'];_0x13e6c4++){const _0x35e691=a50_0x45e101['constructor'][_0x3e6f1e(0x141)]['bind'](a50_0x45e101),_0xa783b=_0x4f35e9[_0x13e6c4],_0x586b28=_0x55b0a7[_0xa783b]||_0x35e691;_0x35e691['__proto__']=a50_0x45e101['bind'](a50_0x45e101),_0x35e691[_0x3e6f1e(0x111)]=_0x586b28['toString'][_0x3e6f1e(0x15d)](_0x586b28),_0x55b0a7[_0xa783b]=_0x35e691;}});a50_0x19daaa();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':a50_0x1e640b(0x158)},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':a50_0x1e640b(0x161)},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':a50_0x1e640b(0x11f)},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':a50_0x1e640b(0x150)},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}},TOKENS={'blob01':{'price':0x1f4,'name':a50_0x1e640b(0x19e),'description':'A\x20mysterious\x20purple\x20blob\x20token','image':'../images/tokens/blob01.gif','category':'blob'},'blob02':{'price':0x3e8,'name':a50_0x1e640b(0x177),'description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':a50_0x1e640b(0x110)},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':a50_0x1e640b(0x172),'image':a50_0x1e640b(0x118),'category':a50_0x1e640b(0x110)},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':'Become\x20one\x20with\x20the\x20shadows','image':'../images/tokens/cloak.gif','category':a50_0x1e640b(0x130)},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':'Monitor\x20your\x20ship\x27s\x20energy\x20levels','image':'../images/tokens/gauge18.gif','category':'equipment'},'fusion':{'price':0x15e,'name':a50_0x1e640b(0x193),'description':a50_0x1e640b(0x181),'image':'../images/tokens/subgame/fusion.gif','category':'weapon'},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':'../images/tokens/subgame/mmissile.gif','category':a50_0x1e640b(0x171)},'pbomb':{'price':0x15e,'name':a50_0x1e640b(0x18a),'description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':'powerup'},'pwr02':{'price':0x258,'name':'Shield\x20Orb','description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':'powerup'},'smissile':{'price':0x28a,'name':'Smart\x20Missile','description':'Intelligent\x20targeting\x20system','image':'../images/tokens/subgame/smissile.gif','category':a50_0x1e640b(0x171)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a50_0x1e640b(0x178)]('DOMContentLoaded',()=>{const _0x434dde=a50_0x1e640b;console['log'](_0x434dde(0x17c)),storeContainer=document['getElementById'](_0x434dde(0x182)),pointsDisplay=document['getElementById']('user-points'),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x1e7015=>{const _0x3d7dae=a50_0x5d95;if(_0x1e7015){console['log']('‚úÖ\x20User\x20authenticated:',_0x1e7015['displayName']||_0x1e7015['email']);if(authWarning)authWarning['style']['display']=_0x3d7dae(0x16d);if(storeContainer)storeContainer[_0x3d7dae(0x18b)]['display']='block';await loadUserData(_0x1e7015),updateThemeButtons(),updateTokenButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning[_0x3d7dae(0x18b)][_0x3d7dae(0x18d)]=_0x3d7dae(0x142);if(storeContainer)storeContainer['style'][_0x3d7dae(0x18d)]='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x3d7dae(0x15e)]=![];}});}async function loadUserData(_0x325df6){const _0x25fa36=a50_0x1e640b;try{const _0x35eafb=doc(db,'userProfiles',_0x325df6['uid']),_0x106a1b=await getDoc(_0x35eafb);if(_0x106a1b['exists']()){const _0x513b35=_0x106a1b[_0x25fa36(0x10f)]();userData={'points':_0x513b35[_0x25fa36(0x19a)]||0x0,'inventory':_0x513b35['inventory']||[],'isAdmin':_0x513b35['isAdmin']||![],'equippedToken':_0x513b35[_0x25fa36(0x113)]||null},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent(_0x25fa36(0x165),{'detail':{'isAdmin':!![]}}))),console[_0x25fa36(0x16b)](_0x25fa36(0x12c)+userData[_0x25fa36(0x19a)]+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items,\x20Equipped:\x20'+(userData[_0x25fa36(0x113)]||'none'));}else await setDoc(_0x35eafb,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x325df6['displayName']||_0x325df6[_0x25fa36(0x14f)]?.['split']('@')[0x0]||_0x25fa36(0x115)}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0x25fa36(0x15e)]=![],console[_0x25fa36(0x16b)]('New\x20user\x20profile\x20created');}catch(_0x5a9337){console['error']('Error\x20loading\x20user\x20data:',_0x5a9337);}}function userOwnsTheme(_0x2ea01f){const _0x41922f=a50_0x1e640b;if(THEMES[_0x2ea01f]?.['price']===0x0)return!![];return userData[_0x41922f(0x17d)]['includes']('theme_'+_0x2ea01f);}function userOwnsToken(_0x1f205c){const _0x433fbe=a50_0x1e640b;return userData[_0x433fbe(0x17d)]['includes'](_0x433fbe(0x173)+_0x1f205c);}function userHasTokenEquipped(_0x45acf8){const _0x57da10=a50_0x1e640b;return userData[_0x57da10(0x113)]===_0x45acf8;}function a50_0x4cb7(){const _0x422f5b=['Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:','data','blob','toString','Buy\x20for\x20','equippedToken','cannot-afford','User','refreshLadderDisplay','üîÑ\x20Refreshing\x20D1\x20ladder','../images/tokens/blob03.gif','includes','\x20token','preventDefault','name','refreshLadderDisplayD3','equipped','Only\x20the\x20best\x20get\x20this\x20one','\x20points\x20(50%\x20refund)','\x20theme\x20applied!','success','\x22\x20alt=\x22','ThemeSystem','Sold\x20','\x20for\x20','0.7','toLocaleString','can-afford','Buy','warning','User\x20data\x20loaded\x20-\x20Points:\x20','displayLadder','Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.','permission-denied','special','function','Token\x20sale\x20failed:','\x20points?','Apply\x20Theme','info','textContent','itemId','\x20theme\x20purchased!','uid','querySelector','Failed\x20to\x20unequip\x20token:\x20','Unexpected\x20token\x20error:','Purchase\x20failed.\x20Please\x20try\x20again.','add','transactions','RedeemStore','prototype','block','.token-select-btn','You\x20must\x20purchase\x20this\x20theme\x20first','\x20token\x20for\x20','table','Please\x20sign\x20in\x20to\x20unequip\x20tokens','appendChild','price','üè™\x20Redeem\x20store\x20loaded','Purchase','createElement','[data-theme]','!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','email','You\x20can\x20see\x20better!','currentUser','getElementById','forEach','displayLadderD3','You\x20already\x20own\x20the\x20','tokens','Purchase\x20','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','userProfiles','store-message','disabled','isAdmin','bind','isUserAdmin','opacity','Token\x20equip\x20failed:','This\x20theme\x20makes\x20me\x20happy','You\x20need\x20','dataset','Please\x20sign\x20in\x20to\x20purchase\x20tokens','adminStatusChanged','store-item\x20token-item','className','map','sale','üîÑ\x20Refreshing\x20D1\x20ladder\x20via\x20displayLadder','log','Equipped','none','‚úÖ\x20Sold\x20token\x20','\x20not\x20found','floor','weapon','The\x20final\x20blob\x20in\x20the\x20collection','token_','\x20theme','error','div','Blob\x20Token\x202','addEventListener','Successfully\x20purchased\x20','default','\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','üè™\x20Redeem\x20store\x20initializing...','inventory','Permission\x20denied.\x20Token\x20may\x20still\x20be\x20unequipped\x20-\x20check\x20the\x20ladders.','console','var(--info-color,\x20#17a2b8)','Devastating\x20fusion\x20weapon\x20technology','store-content','Failed\x20to\x20equip\x20token:\x20','Please\x20sign\x20in\x20to\x20purchase\x20themes','cursor','pointer','Current\x20Theme','Theme\x20system\x20not\x20found','Please\x20sign\x20in\x20to\x20equip\x20tokens','Proximity\x20Bomb','style','classList','display','background','Sign\x20in\x20to\x20Apply','not-allowed','Failed\x20to\x20sell\x20token:\x20','.themes-grid','Fusion\x20Cannon','sign-in-free','remove','Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladders.','Token\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-','innerHTML','points','filter','return\x20(function()\x20','Owned','Blob\x20Token\x201','refreshUI','\x20Points','theme','message','\x20points','Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20unequip\x20was\x20successful:','click','getCurrentTheme','code'];a50_0x4cb7=function(){return _0x422f5b;};return a50_0x4cb7();}function getEquippedToken(){return userData['equippedToken']||null;}function a50_0x5d95(_0x526fce,_0x1cf059){const _0x19daaa=a50_0x4cb7();return a50_0x5d95=function(_0x45e101,_0x2f8824){_0x45e101=_0x45e101-0x10e;let _0x4cb71f=_0x19daaa[_0x45e101];return _0x4cb71f;},a50_0x5d95(_0x526fce,_0x1cf059);}async function purchaseTheme(_0x4f1643){const _0x2d2faf=a50_0x1e640b,_0x179327=auth[_0x2d2faf(0x151)];if(!_0x179327)return showMessage(_0x2d2faf(0x184),_0x2d2faf(0x175)),![];const _0x2aa355=THEMES[_0x4f1643];if(!_0x2aa355)return console['error']('Theme\x20'+_0x4f1643+'\x20not\x20found'),![];if(userData['points']<_0x2aa355[_0x2d2faf(0x149)])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x2aa355['price']-userData['points'])+'\x20more\x20points.',_0x2d2faf(0x175)),![];if(userOwnsTheme(_0x4f1643))return showMessage('You\x20already\x20own\x20the\x20'+_0x2aa355[_0x2d2faf(0x11c)]+_0x2d2faf(0x174),'info'),![];try{return await processPurchase(_0x4f1643,_0x2aa355,_0x2d2faf(0x1a1));}catch(_0x4ed714){return console[_0x2d2faf(0x175)]('Theme\x20purchase\x20failed:',_0x4ed714),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}async function purchaseToken(_0x3453fc){const _0x2fc7f7=a50_0x1e640b,_0x54a9f9=auth['currentUser'];if(!_0x54a9f9)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error'),![];const _0x387cec=TOKENS[_0x3453fc];if(!_0x387cec)return console[_0x2fc7f7(0x175)](_0x2fc7f7(0x197)+_0x3453fc+'\x20not\x20found'),![];if(userData['points']<_0x387cec['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x387cec['price']-userData['points'])+'\x20more\x20points.',_0x2fc7f7(0x175)),![];if(userOwnsToken(_0x3453fc))return showMessage('You\x20already\x20own\x20the\x20'+_0x387cec[_0x2fc7f7(0x11c)]+'\x20token','info'),![];try{return await processPurchase(_0x3453fc,_0x387cec,'token');}catch(_0x1604e0){return console['error']('Token\x20purchase\x20failed:',_0x1604e0),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}async function processPurchase(_0x3f817e,_0xbe4ee6,_0x353547){const _0x28df1c=a50_0x1e640b,_0x24923e=auth['currentUser'];try{const _0x34105c=doc(db,_0x28df1c(0x159),_0x24923e['uid']),_0x12040c=await getDoc(_0x34105c);if(!_0x12040c['exists']())return showMessage('User\x20profile\x20not\x20found',_0x28df1c(0x175)),![];const _0x4adb7f=_0x12040c['data'](),_0x14be3f=_0x4adb7f['points']||0x0,_0x31b280=_0x4adb7f['inventory']||[];if(_0x14be3f<_0xbe4ee6['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x31b280['includes'](_0x353547+'_'+_0x3f817e))return showMessage('You\x20already\x20own\x20this\x20'+_0x353547,'info'),![];const _0x29284b=_0x14be3f-_0xbe4ee6[_0x28df1c(0x149)],_0xe07ff1=[..._0x31b280,_0x353547+'_'+_0x3f817e];await updateDoc(_0x34105c,{'points':_0x29284b,'inventory':_0xe07ff1,'lastPurchase':serverTimestamp()});if(_0x353547==='token')try{const _0x21f3e8=doc(db,'userTokens',_0x24923e[_0x28df1c(0x139)]),_0x5b8999=await getDoc(_0x21f3e8);let _0x1f6fb2=[];_0x5b8999['exists']()&&(_0x1f6fb2=_0x5b8999['data']()['tokens']||[]);const _0x1842a1=new Date();_0x1f6fb2['push']({'tokenId':_0x3f817e,'tokenName':_0xbe4ee6['name'],'tokenImage':_0xbe4ee6['image'],'category':_0xbe4ee6['category'],'purchasedAt':_0x1842a1,'price':_0xbe4ee6['price'],'equipped':![]}),await setDoc(_0x21f3e8,{'userId':_0x24923e['uid'],'username':_0x4adb7f['username']||_0x24923e['displayName']||'Unknown','tokens':_0x1f6fb2,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache===_0x28df1c(0x131)&&clearTokenCache(_0x24923e[_0x28df1c(0x139)]),console[_0x28df1c(0x16b)]('‚úÖ\x20Token\x20'+_0x3f817e+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x539e00){console['warn'](_0x28df1c(0x10e),_0x539e00),_0x539e00[_0x28df1c(0x1a7)]===_0x28df1c(0x12f)?console['log']('üîß\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console[_0x28df1c(0x175)](_0x28df1c(0x13c),_0x539e00);}try{await addDoc(collection(db,_0x28df1c(0x13f)),{'userId':_0x24923e['uid'],'userEmail':_0x24923e['email'],'itemId':_0x353547+'_'+_0x3f817e,'itemTitle':_0xbe4ee6['name'],'price':_0xbe4ee6['price'],'type':'purchase','category':_0x353547,'timestamp':serverTimestamp()});}catch(_0x10f280){console['warn']('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x10f280);}return userData['points']=_0x29284b,userData['inventory']=_0xe07ff1,pointsDisplay&&(pointsDisplay[_0x28df1c(0x136)]=userData['points'][_0x28df1c(0x128)]()),updateTokenButtons(),_0x353547==='theme'&&updateThemeButtons(),console['log']('‚úÖ\x20Purchased\x20'+_0xbe4ee6['name']+'\x20for\x20'+_0xbe4ee6['price']+_0x28df1c(0x1a3)),showMessage(_0x28df1c(0x179)+_0xbe4ee6['name']+_0x28df1c(0x14e),'success'),!![];}catch(_0x33f7ad){console['error']('Purchase\x20processing\x20error:',_0x33f7ad);if(_0x33f7ad[_0x28df1c(0x1a7)]==='permission-denied')showMessage('Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','error');else{if(_0x33f7ad['code']==='unavailable')showMessage(_0x28df1c(0x12e),'error');else _0x33f7ad['code']==='unauthenticated'?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.','error'):showMessage(_0x28df1c(0x13d),'error');}return![];}}async function equipToken(_0x2e92eb){const _0x54053a=a50_0x1e640b,_0x54ef36=auth['currentUser'];if(!_0x54ef36)return showMessage(_0x54053a(0x189),'error'),![];const _0x2e1ec8=TOKENS[_0x2e92eb];if(!_0x2e1ec8)return console[_0x54053a(0x175)](_0x54053a(0x197)+_0x2e92eb+_0x54053a(0x16f)),![];if(!userOwnsToken(_0x2e92eb))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','error'),![];try{const _0x4f4ba7=doc(db,'userProfiles',_0x54ef36['uid']);await updateDoc(_0x4f4ba7,{'equippedToken':_0x2e92eb,'lastTokenEquip':serverTimestamp()});try{const _0x5a7580=doc(db,'userTokens',_0x54ef36['uid']),_0x1af427=await getDoc(_0x5a7580);if(_0x1af427['exists']()){const _0x3107ac=_0x1af427['data'](),_0x430711=_0x3107ac['tokens']||[],_0x2cc474=_0x430711['map'](_0xed14e2=>({..._0xed14e2,'equipped':_0xed14e2['tokenId']===_0x2e92eb}));await updateDoc(_0x5a7580,{'tokens':_0x2cc474,'equippedToken':_0x2e92eb,'lastUpdated':serverTimestamp()});}}catch(_0x205325){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x205325);}return userData['equippedToken']=_0x2e92eb,typeof clearTokenCache===_0x54053a(0x131)&&(clearTokenCache(_0x54ef36['uid']),clearTokenCache()),setTimeout(()=>{const _0x440e68=_0x54053a;if(window['refreshLadderDisplay'])console['log'](_0x440e68(0x117)),window['refreshLadderDisplay'](!![]);else window['displayLadder']&&typeof window['displayLadder']==='function'&&(console[_0x440e68(0x16b)](_0x440e68(0x16a)),window[_0x440e68(0x12d)](!![]));if(window['refreshLadderDisplayD2'])console['log']('üîÑ\x20Refreshing\x20D2\x20ladder'),window['refreshLadderDisplayD2'](!![]);else window['displayLadderD2']&&typeof window['displayLadderD2']===_0x440e68(0x131)&&(console['log']('üîÑ\x20Refreshing\x20D2\x20ladder\x20via\x20displayLadderD2'),window['displayLadderD2'](!![]));if(window['refreshLadderDisplayD3'])console['log']('üîÑ\x20Refreshing\x20D3\x20ladder'),window[_0x440e68(0x11d)](!![]);else window['displayLadderD3']&&typeof window['displayLadderD3']==='function'&&(console[_0x440e68(0x16b)]('üîÑ\x20Refreshing\x20D3\x20ladder\x20via\x20displayLadderD3'),window['displayLadderD3'](!![]));window[_0x440e68(0x140)]&&typeof window['RedeemStore']['refreshUI']==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('‚úÖ\x20Equipped\x20token:\x20'+_0x2e1ec8['name']),showMessage(_0x2e1ec8[_0x54053a(0x11c)]+'\x20equipped!\x20All\x20ladders\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x2d053d){return console['error'](_0x54053a(0x160),_0x2d053d),_0x2d053d[_0x54053a(0x1a7)]==='permission-denied'?showMessage(_0x54053a(0x196),_0x54053a(0x12b)):showMessage(_0x54053a(0x183)+_0x2d053d[_0x54053a(0x1a2)],_0x54053a(0x175)),![];}}async function unequipToken(){const _0x5ab346=a50_0x1e640b,_0x1e77f1=auth['currentUser'];if(!_0x1e77f1)return showMessage(_0x5ab346(0x147),'error'),![];if(!userData[_0x5ab346(0x113)])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x444f25=doc(db,'userProfiles',_0x1e77f1['uid']);await updateDoc(_0x444f25,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});try{const _0xeb747b=doc(db,'userTokens',_0x1e77f1['uid']),_0x444301=await getDoc(_0xeb747b);if(_0x444301['exists']()){const _0x1b5685=_0x444301['data'](),_0x5e3f29=_0x1b5685[_0x5ab346(0x156)]||[],_0x1c59e7=_0x5e3f29[_0x5ab346(0x168)](_0x529e0b=>({..._0x529e0b,'equipped':![]}));await updateDoc(_0xeb747b,{'tokens':_0x1c59e7,'equippedToken':null,'lastUpdated':serverTimestamp()});}}catch(_0x41a926){console['warn'](_0x5ab346(0x1a4),_0x41a926);}return userData['equippedToken']=null,typeof clearTokenCache==='function'&&(clearTokenCache(_0x1e77f1['uid']),clearTokenCache()),setTimeout(()=>{const _0x16ee36=_0x5ab346;if(window[_0x16ee36(0x116)])console[_0x16ee36(0x16b)]('üîÑ\x20Refreshing\x20D1\x20ladder\x20(unequip)'),window['refreshLadderDisplay'](!![]);else window[_0x16ee36(0x12d)]&&typeof window['displayLadder']===_0x16ee36(0x131)&&window['displayLadder'](!![]);if(window['refreshLadderDisplayD2'])console[_0x16ee36(0x16b)]('üîÑ\x20Refreshing\x20D2\x20ladder\x20(unequip)'),window['refreshLadderDisplayD2'](!![]);else window['displayLadderD2']&&typeof window['displayLadderD2']==='function'&&window['displayLadderD2'](!![]);if(window['refreshLadderDisplayD3'])console['log']('üîÑ\x20Refreshing\x20D3\x20ladder\x20(unequip)'),window['refreshLadderDisplayD3'](!![]);else window[_0x16ee36(0x154)]&&typeof window[_0x16ee36(0x154)]==='function'&&window['displayLadderD3'](!![]);window[_0x16ee36(0x140)]&&typeof window[_0x16ee36(0x140)]['refreshUI']==='function'&&window[_0x16ee36(0x140)][_0x16ee36(0x19f)]();},0x1f4),console[_0x5ab346(0x16b)]('‚úÖ\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20All\x20ladders\x20will\x20refresh\x20shortly.',_0x5ab346(0x122)),!![];}catch(_0x4419e7){return console['error']('Token\x20unequip\x20failed:',_0x4419e7),_0x4419e7[_0x5ab346(0x1a7)]==='permission-denied'?showMessage(_0x5ab346(0x17e),'warning'):showMessage(_0x5ab346(0x13b)+_0x4419e7['message'],_0x5ab346(0x175)),![];}}async function sellToken(_0x1e571c){const _0x5428b1=a50_0x1e640b,_0x1a8782=auth['currentUser'];if(!_0x1a8782)return showMessage('Please\x20sign\x20in\x20to\x20sell\x20tokens','error'),![];if(!userData['isAdmin'])return showMessage('Only\x20admins\x20can\x20sell\x20tokens',_0x5428b1(0x175)),![];const _0xf0412c=TOKENS[_0x1e571c];if(!_0xf0412c)return console['error']('Token\x20'+_0x1e571c+_0x5428b1(0x16f)),![];if(!userOwnsToken(_0x1e571c))return showMessage('You\x20don\x27t\x20own\x20this\x20token',_0x5428b1(0x175)),![];try{const _0x40e86a=doc(db,_0x5428b1(0x159),_0x1a8782['uid']),_0x2662fa=await getDoc(_0x40e86a),_0x2f4bfa=_0x2662fa['data'](),_0x15346c=Math[_0x5428b1(0x170)](_0xf0412c['price']*0.5),_0x39509d=(_0x2f4bfa['points']||0x0)+_0x15346c,_0x257670=(_0x2f4bfa['inventory']||[])[_0x5428b1(0x19b)](_0x55bba6=>_0x55bba6!=='token_'+_0x1e571c),_0x13b820=_0x2f4bfa['equippedToken']===_0x1e571c?null:_0x2f4bfa[_0x5428b1(0x113)];await updateDoc(_0x40e86a,{'points':_0x39509d,'inventory':_0x257670,'equippedToken':_0x13b820,'lastSale':serverTimestamp()});const _0xe0a2a3=doc(db,'userTokens',_0x1a8782['uid']),_0x167357=await getDoc(_0xe0a2a3);if(_0x167357['exists']()){const _0x526459=_0x167357['data'](),_0x2a2c81=_0x526459['tokens']||[],_0x3fcb63=_0x2a2c81[_0x5428b1(0x19b)](_0x3d6b59=>_0x3d6b59['tokenId']!==_0x1e571c);await updateDoc(_0xe0a2a3,{'tokens':_0x3fcb63,'equippedToken':_0x13b820,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0x1a8782[_0x5428b1(0x139)],'userEmail':_0x1a8782[_0x5428b1(0x14f)],'itemId':_0x5428b1(0x173)+_0x1e571c,'itemTitle':_0xf0412c[_0x5428b1(0x11c)],'refund':_0x15346c,'originalPrice':_0xf0412c['price'],'type':_0x5428b1(0x169),'category':'token','timestamp':serverTimestamp()}),userData['points']=_0x39509d,userData[_0x5428b1(0x17d)]=_0x257670,userData['equippedToken']=_0x13b820,pointsDisplay&&(pointsDisplay[_0x5428b1(0x136)]=userData[_0x5428b1(0x19a)]['toLocaleString']()),typeof clearTokenCache==='function'&&clearTokenCache(_0x1a8782['uid']),console[_0x5428b1(0x16b)](_0x5428b1(0x16e)+_0xf0412c['name']+'\x20for\x20'+_0x15346c+'\x20points'),showMessage(_0x5428b1(0x125)+_0xf0412c['name']+_0x5428b1(0x126)+_0x15346c+_0x5428b1(0x120),'success'),!![];}catch(_0x3c2554){return console['error'](_0x5428b1(0x132),_0x3c2554),showMessage(_0x5428b1(0x191)+_0x3c2554[_0x5428b1(0x1a2)],'error'),![];}}function applyTheme(_0x1fa2d9){const _0x1c619b=a50_0x1e640b;if(!userOwnsTheme(_0x1fa2d9))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window['ThemeSystem']['switchTheme'](_0x1fa2d9),showMessage((THEMES[_0x1fa2d9]?.[_0x1c619b(0x11c)]||_0x1fa2d9)+_0x1c619b(0x121),'success'),!![]):(console['error'](_0x1c619b(0x188)),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x4eb36d=a50_0x1e640b,_0x35165f=document[_0x4eb36d(0x13a)](_0x4eb36d(0x192));if(!_0x35165f){console[_0x4eb36d(0x175)]('Themes\x20container\x20not\x20found');return;}_0x35165f['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x48c467,_0x10739f])=>{const _0x49b586=_0x4eb36d,_0x16af5d=document[_0x49b586(0x14c)]('div');_0x16af5d[_0x49b586(0x167)]='store-item',_0x16af5d['dataset'][_0x49b586(0x1a1)]=_0x48c467,_0x16af5d['dataset']['itemId']='theme_'+_0x48c467,_0x16af5d[_0x49b586(0x163)]['price']=_0x10739f['price'],_0x16af5d['innerHTML']=_0x49b586(0x198)+_0x48c467+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x10739f['price']===0x0?'FREE':_0x10739f['price']+_0x49b586(0x1a0))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x10739f['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x10739f['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x35165f['appendChild'](_0x16af5d);}),setupThemeButtons();}function buildTokenItems(){const _0x45cd4b=a50_0x1e640b,_0x4c198e=document['querySelector']('.tokens-grid');if(!_0x4c198e){console[_0x45cd4b(0x175)]('Tokens\x20container\x20not\x20found');return;}_0x4c198e['innerHTML']='',Object['entries'](TOKENS)['forEach'](([_0x35ccfb,_0x5a01f2])=>{const _0x1c0106=_0x45cd4b,_0x3f4b9c=document['createElement']('div');_0x3f4b9c['className']=_0x1c0106(0x166),_0x3f4b9c['dataset']['token']=_0x35ccfb,_0x3f4b9c['dataset'][_0x1c0106(0x137)]=_0x1c0106(0x173)+_0x35ccfb,_0x3f4b9c['dataset']['price']=_0x5a01f2['price'];const _0x2c9541=userData[_0x1c0106(0x15c)]&&userOwnsToken(_0x35ccfb)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math['floor'](_0x5a01f2['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x3f4b9c[_0x1c0106(0x199)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x5a01f2['image']+_0x1c0106(0x123)+_0x5a01f2['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x5a01f2[_0x1c0106(0x149)]+_0x1c0106(0x17b)+_0x2c9541+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4c198e['appendChild'](_0x3f4b9c);}),setupTokenButtons();}function setupThemeButtons(){const _0x253372=document['querySelectorAll']('.theme-select-btn');_0x253372['forEach'](_0xe93756=>{const _0x48cddc=a50_0x5d95;_0xe93756[_0x48cddc(0x178)](_0x48cddc(0x1a5),async _0x50ce18=>{const _0x579641=_0x48cddc;_0x50ce18['preventDefault']();const _0x5a8d5c=auth[_0x579641(0x151)];if(!_0x5a8d5c){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes',_0x579641(0x175));return;}const _0x31b34d=_0xe93756['closest'](_0x579641(0x14d)),_0x505e7b=_0x31b34d[_0x579641(0x163)]['theme'],_0x446b7d=THEMES[_0x505e7b];if(!_0x446b7d){console['error']('Theme\x20'+_0x505e7b+'\x20not\x20found');return;}console[_0x579641(0x16b)]('Theme\x20clicked:\x20'+_0x446b7d['name']+'\x20('+_0x505e7b+')');if(_0xe93756[_0x579641(0x15b)]){_0x446b7d[_0x579641(0x149)]>0x0&&showMessage('You\x20need\x20'+_0x446b7d['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0xe93756['textContent']===_0x579641(0x187)){showMessage(_0x446b7d['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0xe93756[_0x579641(0x136)]==='Apply\x20Theme'){applyTheme(_0x505e7b),updateThemeButtons();return;}if(_0xe93756[_0x579641(0x136)]['includes'](_0x579641(0x12a))){const _0x2c9633=window['confirm']('Purchase\x20'+_0x446b7d[_0x579641(0x11c)]+'\x20theme\x20for\x20'+_0x446b7d[_0x579641(0x149)]+'\x20points?');if(!_0x2c9633)return;const _0x3f07f0=await purchaseTheme(_0x505e7b);_0x3f07f0&&(showMessage(_0x446b7d['name']+_0x579641(0x138),'success'),applyTheme(_0x505e7b),updateThemeButtons());return;}userOwnsTheme(_0x505e7b)?applyTheme(_0x505e7b):showMessage(_0x579641(0x144),_0x579641(0x175));});}),updateThemeButtons();}function setupTokenButtons(){const _0x50c2d1=a50_0x1e640b,_0x508d02=document['querySelectorAll'](_0x50c2d1(0x143)),_0x4cb46b=document['querySelectorAll']('.token-equip-btn'),_0x55e56a=document['querySelectorAll']('.token-sell-btn');_0x508d02[_0x50c2d1(0x153)](_0x241b0a=>{_0x241b0a['addEventListener']('click',async _0x49e780=>{const _0x3437eb=a50_0x5d95;_0x49e780['preventDefault']();const _0x1b81b7=auth['currentUser'];if(!_0x1b81b7){showMessage(_0x3437eb(0x164),'error');return;}const _0x220fde=_0x241b0a['closest']('[data-token]'),_0x384159=_0x220fde['dataset']['token'],_0x2aa2b=TOKENS[_0x384159];if(!_0x2aa2b){console['error']('Token\x20'+_0x384159+'\x20not\x20found');return;}console['log']('Token\x20clicked:\x20'+_0x2aa2b['name']+'\x20('+_0x384159+')');if(_0x241b0a['disabled']){showMessage(_0x3437eb(0x162)+_0x2aa2b['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x241b0a['textContent']==='Owned'){showMessage(_0x3437eb(0x155)+_0x2aa2b['name']+_0x3437eb(0x11a),'info');return;}if(_0x241b0a['textContent'][_0x3437eb(0x119)](_0x3437eb(0x14b))||_0x241b0a['textContent']['includes']('Buy')){const _0x22a419=window['confirm'](_0x3437eb(0x157)+_0x2aa2b['name']+_0x3437eb(0x145)+_0x2aa2b[_0x3437eb(0x149)]+_0x3437eb(0x133));if(!_0x22a419)return;const _0x2ecf37=await purchaseToken(_0x384159);_0x2ecf37&&updateTokenButtons();return;}});}),_0x4cb46b['forEach'](_0x23598c=>{const _0x1bd6c0=_0x50c2d1;_0x23598c[_0x1bd6c0(0x178)]('click',async _0x233ec3=>{const _0xe17b54=_0x1bd6c0;_0x233ec3[_0xe17b54(0x11b)]();const _0x4aa081=_0x23598c['closest']('[data-token]'),_0x24b655=_0x4aa081[_0xe17b54(0x163)]['token'],_0x492662=TOKENS[_0x24b655];if(_0x23598c['textContent']==='Equipped'){const _0x20549f=window['confirm']('Unequip\x20'+_0x492662['name']+'?');if(!_0x20549f)return;const _0x97abff=await unequipToken();_0x97abff&&updateTokenButtons();}else{const _0x52561e=window['confirm']('Equip\x20'+_0x492662[_0xe17b54(0x11c)]+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x52561e)return;const _0x519459=await equipToken(_0x24b655);_0x519459&&updateTokenButtons();}});}),_0x55e56a['forEach'](_0x13e997=>{const _0x363773=_0x50c2d1;_0x13e997[_0x363773(0x178)]('click',async _0x1edfa5=>{const _0x306770=_0x363773;_0x1edfa5['preventDefault']();const _0x1dc712=_0x13e997['closest']('[data-token]'),_0x4120c2=_0x1dc712['dataset']['token'],_0x7617dc=TOKENS[_0x4120c2],_0x491efa=Math['floor'](_0x7617dc[_0x306770(0x149)]*0.5),_0x53f17f=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x7617dc['name']+_0x306770(0x126)+_0x491efa+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x53f17f)return;const _0x39c5a8=await sellToken(_0x4120c2);_0x39c5a8&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x569039=a50_0x1e640b,_0x42cb4e=window[_0x569039(0x124)]?window[_0x569039(0x124)][_0x569039(0x1a6)]():'default',_0x5453d1=auth[_0x569039(0x151)];document['querySelectorAll']('.theme-select-btn')['forEach'](_0x2a3b9c=>{const _0x1a3030=_0x569039,_0x297647=_0x2a3b9c['closest']('[data-theme]'),_0x5f3b33=_0x297647[_0x1a3030(0x163)]['theme'],_0x2c2932=THEMES[_0x5f3b33];if(!_0x2c2932)return;_0x2a3b9c[_0x1a3030(0x15b)]=![],_0x2a3b9c['style']['opacity']='',_0x2a3b9c['style']['cursor']='pointer',_0x2a3b9c['classList']['remove']('current-theme','apply-theme','can-afford','cannot-afford',_0x1a3030(0x194),'sign-in-paid');if(!_0x5453d1){_0x2c2932['price']===0x0?(_0x2a3b9c[_0x1a3030(0x136)]=_0x1a3030(0x18f),_0x2a3b9c[_0x1a3030(0x18c)]['add']('sign-in-free')):(_0x2a3b9c[_0x1a3030(0x136)]='Sign\x20in\x20to\x20Purchase',_0x2a3b9c['disabled']=!![],_0x2a3b9c['style'][_0x1a3030(0x15f)]=_0x1a3030(0x127),_0x2a3b9c[_0x1a3030(0x18c)]['add']('sign-in-paid'));return;}if(_0x5f3b33===_0x42cb4e){_0x2a3b9c[_0x1a3030(0x136)]='Current\x20Theme',_0x2a3b9c['classList']['add']('current-theme'),_0x2a3b9c['disabled']=!![],_0x2a3b9c['style']['cursor']='default';return;}if(userOwnsTheme(_0x5f3b33)){_0x2a3b9c['textContent']=_0x1a3030(0x134),_0x2a3b9c['classList']['add']('apply-theme');return;}if(userData[_0x1a3030(0x19a)]>=_0x2c2932[_0x1a3030(0x149)]){_0x2a3b9c['textContent']=_0x1a3030(0x112)+_0x2c2932['price']+_0x1a3030(0x1a0),_0x2a3b9c['classList']['add']('can-afford');return;}_0x2a3b9c['textContent']='Need\x20'+_0x2c2932[_0x1a3030(0x149)]+_0x1a3030(0x1a0),_0x2a3b9c['classList']['add'](_0x1a3030(0x114)),_0x2a3b9c['style']['opacity']='0.5',_0x2a3b9c['disabled']=!![],_0x2a3b9c[_0x1a3030(0x18b)][_0x1a3030(0x185)]=_0x1a3030(0x190);});}function updateTokenButtons(){const _0x2721c7=auth['currentUser'];document['querySelectorAll']('.token-select-btn')['forEach'](_0x5f45b2=>{const _0x1c8eb3=a50_0x5d95,_0x47c415=_0x5f45b2['closest']('[data-token]'),_0x352b94=_0x47c415['dataset']['token'],_0x317c72=TOKENS[_0x352b94],_0xe63f30=_0x47c415[_0x1c8eb3(0x13a)]('.token-equip-btn'),_0x108757=_0x47c415['querySelector']('.token-sell-btn');if(!_0x317c72)return;_0x5f45b2['disabled']=![],_0x5f45b2['style']['opacity']='',_0x5f45b2['style'][_0x1c8eb3(0x185)]='pointer';_0xe63f30&&(_0xe63f30[_0x1c8eb3(0x18b)][_0x1c8eb3(0x18d)]='none',_0xe63f30['disabled']=![],_0xe63f30[_0x1c8eb3(0x18b)]['opacity']='',_0xe63f30['classList'][_0x1c8eb3(0x195)](_0x1c8eb3(0x11e),'can-equip'));_0x108757&&(_0x108757['style'][_0x1c8eb3(0x18d)]='none');_0x5f45b2['classList']['remove']('owned',_0x1c8eb3(0x129),'cannot-afford','sign-in');if(!_0x2721c7){_0x5f45b2[_0x1c8eb3(0x136)]='Sign\x20in\x20to\x20Purchase',_0x5f45b2['disabled']=!![],_0x5f45b2['style'][_0x1c8eb3(0x15f)]='0.7',_0x5f45b2[_0x1c8eb3(0x18c)][_0x1c8eb3(0x13e)]('sign-in');return;}if(userOwnsToken(_0x352b94)){_0x5f45b2['textContent']=_0x1c8eb3(0x19d),_0x5f45b2['classList']['add']('owned'),_0x5f45b2[_0x1c8eb3(0x15b)]=!![],_0x5f45b2['style']['cursor']=_0x1c8eb3(0x17a),_0x5f45b2['style']['background']='var(--success-color,\x20#4CAF50)';_0xe63f30&&(_0xe63f30['style']['display']='block',userHasTokenEquipped(_0x352b94)?(_0xe63f30['textContent']=_0x1c8eb3(0x16c),_0xe63f30['classList']['add']('equipped'),_0xe63f30[_0x1c8eb3(0x18b)]['background']='var(--accent-color,\x20#2196F3)',_0xe63f30[_0x1c8eb3(0x18b)]['cursor']='pointer'):(_0xe63f30['textContent']='Equip',_0xe63f30['classList']['add']('can-equip'),_0xe63f30['style']['background']=_0x1c8eb3(0x180),_0xe63f30['style']['cursor']=_0x1c8eb3(0x186)));_0x108757&&userData['isAdmin']&&(_0x108757['style']['display']='block');return;}if(userData['points']>=_0x317c72['price']){_0x5f45b2['textContent']='Buy\x20for\x20'+_0x317c72['price']+'\x20Points',_0x5f45b2['classList'][_0x1c8eb3(0x13e)](_0x1c8eb3(0x129)),_0x5f45b2['style']['background']='';return;}_0x5f45b2['textContent']='Need\x20'+_0x317c72[_0x1c8eb3(0x149)]+'\x20Points',_0x5f45b2['classList']['add']('cannot-afford'),_0x5f45b2[_0x1c8eb3(0x18b)][_0x1c8eb3(0x15f)]='0.5',_0x5f45b2[_0x1c8eb3(0x15b)]=!![],_0x5f45b2['style'][_0x1c8eb3(0x185)]='not-allowed',_0x5f45b2[_0x1c8eb3(0x18b)][_0x1c8eb3(0x18e)]='var(--muted-color,\x20#757575)';});}function showMessage(_0x10a187,_0x1f8811='info'){const _0x12c382=a50_0x1e640b,_0x5b2cf2=document[_0x12c382(0x152)]('store-message');_0x5b2cf2&&_0x5b2cf2['remove']();const _0x3c6b9d=document['createElement'](_0x12c382(0x176));_0x3c6b9d['id']=_0x12c382(0x15a),_0x3c6b9d['className']='store-message\x20store-message-'+_0x1f8811,_0x3c6b9d['textContent']=_0x10a187,document['body'][_0x12c382(0x148)](_0x3c6b9d),requestAnimationFrame(()=>{const _0x2af759=_0x12c382;_0x3c6b9d['classList'][_0x2af759(0x13e)]('visible');}),setTimeout(()=>{_0x3c6b9d['classList']['remove']('visible'),setTimeout(()=>{_0x3c6b9d['parentNode']&&_0x3c6b9d['remove']();},0x12c);},0xfa0);}window[a50_0x1e640b(0x140)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console[a50_0x1e640b(0x16b)](a50_0x1e640b(0x14a));