function a23_0x4bc8(){const _0xae32c1=['Successfully\x20joined\x20the\x20','target','textContent','DOMContentLoaded','ladder-join-status\x20success','toLowerCase','none','\x22\x20to\x20confirm.','Ladder\x20changed\x20to:\x20','display',',\x20defaulting\x20to\x20D1','Error\x20joining\x20ladder:\x20','bind','block','join-ladder-button','playersD2','disabled','apply','trim','location','value','className','getIdToken','join-username-input','ladder-join-prompt','exists','DUOS','d2-switch','playersDuos','Ladder\x20join:\x20D1\x20radio\x20found:','Please\x20enter\x20your\x20username\x20to\x20confirm.','click','players','style','warn','uid','playersCTF','ladder-join-status\x20error','You\x20are\x20already\x20part\x20of\x20the\x20','{}.constructor(\x22return\x20this\x22)(\x20)','CTF','console','position'];a23_0x4bc8=function(){return _0xae32c1;};return a23_0x4bc8();}const a23_0x3fc445=a23_0x2c75,a23_0x304332=(function(){let _0x5d6cd7=!![];return function(_0x45acf9,_0x8e283e){const _0xa014c5=_0x5d6cd7?function(){const _0x7524b5=a23_0x2c75;if(_0x8e283e){const _0x143bfc=_0x8e283e[_0x7524b5(0x8a)](_0x45acf9,arguments);return _0x8e283e=null,_0x143bfc;}}:function(){};return _0x5d6cd7=![],_0xa014c5;};}()),a23_0x2d15f1=a23_0x304332(this,function(){const _0x4be1aa=a23_0x2c75;let _0x48c7b1;try{const _0x1e1d6f=Function('return\x20(function()\x20'+_0x4be1aa(0xa0)+');');_0x48c7b1=_0x1e1d6f();}catch(_0x2eae74){_0x48c7b1=window;}const _0x1e33e1=_0x48c7b1[_0x4be1aa(0xa2)]=_0x48c7b1[_0x4be1aa(0xa2)]||{},_0x285669=['log',_0x4be1aa(0x9b),'info','error','exception','table','trace'];for(let _0x1630c2=0x0;_0x1630c2<_0x285669['length'];_0x1630c2++){const _0x302109=a23_0x304332['constructor']['prototype']['bind'](a23_0x304332),_0x158dab=_0x285669[_0x1630c2],_0x2570af=_0x1e33e1[_0x158dab]||_0x302109;_0x302109['__proto__']=a23_0x304332['bind'](a23_0x304332),_0x302109['toString']=_0x2570af['toString'][_0x4be1aa(0x85)](_0x2570af),_0x1e33e1[_0x158dab]=_0x302109;}});a23_0x2d15f1();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a23_0x2c75(_0x1c58f4,_0x13f480){const _0x2d15f1=a23_0x4bc8();return a23_0x2c75=function(_0x304332,_0x1c9e1d){_0x304332=_0x304332-0x79;let _0x4bc8f3=_0x2d15f1[_0x304332];return _0x4bc8f3;},a23_0x2c75(_0x1c58f4,_0x13f480);}import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener'](a23_0x3fc445(0x7c),()=>{const _0x932c65=a23_0x3fc445,_0x1e9f0b=document['getElementById']('d1-switch'),_0x234e56=document['getElementById'](_0x932c65(0x94));console['log'](_0x932c65(0x96),!!_0x1e9f0b),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x234e56);function _0x424024(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0x46d88c=>{_0x46d88c['addEventListener']('change',_0x213fd1=>{const _0xba66d2=a23_0x2c75;_0x213fd1[_0xba66d2(0x7a)]['checked']&&(currentLadder=_0x213fd1['target'][_0xba66d2(0x8d)],console['log'](_0xba66d2(0x81)+currentLadder),checkUserLadderStatus());});});}_0x424024();const _0x76106d=document['getElementById']('join-ladder-button');_0x76106d&&_0x76106d['addEventListener'](_0x932c65(0x98),handleJoinLadder),onAuthStateChanged(auth,_0x455aac=>{const _0x298b4a=_0x932c65;if(_0x455aac)checkUserLadderStatus();else{const _0x3abaeb=document['getElementById'](_0x298b4a(0x91));_0x3abaeb&&(_0x3abaeb['style']['display']=_0x298b4a(0x7f));}});});function getCollectionName(_0x48c7e2){const _0x5588ec=a23_0x3fc445;switch(_0x48c7e2?.['toUpperCase']()){case'D1':return'players';case'D2':return _0x5588ec(0x88);case'D3':return'playersD3';case _0x5588ec(0x93):case'DUO':return _0x5588ec(0x95);case _0x5588ec(0xa1):return'playersCTF';default:console[_0x5588ec(0x9b)]('Unknown\x20ladder\x20type:\x20'+_0x48c7e2+_0x5588ec(0x83));return'players';}}async function checkUserLadderStatus(){const _0x46b138=a23_0x3fc445;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x5a6ca1=auth['currentUser'],_0x50d183=document['getElementById'](_0x46b138(0x91)),_0x5e58b6=document['getElementById']('join-ladder-type'),_0x3ead74=document['getElementById']('tiny-join-button');if(!_0x5a6ca1||!_0x5a6ca1[_0x46b138(0x9c)]||!_0x50d183||!_0x5e58b6||!_0x3ead74){if(_0x50d183)_0x50d183['style']['display']='none';if(_0x3ead74)_0x3ead74['style']['display']=_0x46b138(0x7f);return;}try{try{await _0x5a6ca1[_0x46b138(0x8f)](![]);}catch(_0x586e28){console['error']('Authentication\x20verification\x20failed:',_0x586e28),_0x50d183['style'][_0x46b138(0x82)]='none',_0x3ead74['style'][_0x46b138(0x82)]='none';return;}const _0x28d6f7=getCollectionName(currentLadder),_0x57c741=doc(db,_0x28d6f7,_0x5a6ca1['uid']),_0x4ad8fc=await getDoc(_0x57c741);if(_0x4ad8fc['exists']())_0x50d183['style']['display']='none',_0x3ead74['style']['display']='none';else{_0x50d183[_0x46b138(0x9a)]['display']='none',_0x3ead74[_0x46b138(0x9a)][_0x46b138(0x82)]=_0x46b138(0x86),_0x5e58b6['textContent']=currentLadder,_0x3ead74['onclick']=()=>{const _0x53d884=_0x46b138;_0x50d183['style']['display']==='block'?_0x50d183['style'][_0x53d884(0x82)]='none':_0x50d183['style'][_0x53d884(0x82)]='block';};const _0x1a46e2=document['getElementById'](_0x46b138(0x90)),_0x20dfc7=document['getElementById']('ladder-join-status');if(_0x1a46e2)_0x1a46e2[_0x46b138(0x8d)]='';_0x20dfc7&&(_0x20dfc7['textContent']='',_0x20dfc7['className']='ladder-join-status');}}catch(_0x4b6f5f){console['error']('Error\x20checking\x20ladder\x20status:',_0x4b6f5f),_0x50d183['style']['display']='none',_0x3ead74[_0x46b138(0x9a)]['display']=_0x46b138(0x7f);}}async function handleJoinLadder(){const _0x7c8920=a23_0x3fc445,_0x5749cc=auth['currentUser'],_0x2619be=document['getElementById'](_0x7c8920(0x87)),_0x12ad9a=document['getElementById']('ladder-join-status'),_0x5d4a0c=document['getElementById']('join-username-input');if(!_0x5749cc||!_0x5749cc['uid']){_0x12ad9a['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x12ad9a[_0x7c8920(0x8e)]=_0x7c8920(0x9e);return;}try{await _0x5749cc['getIdToken'](!![]);}catch(_0x15d7f3){console['error']('Authentication\x20error:',_0x15d7f3),_0x12ad9a[_0x7c8920(0x7b)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x12ad9a['className']=_0x7c8920(0x9e);return;}if(!_0x5d4a0c||!_0x5d4a0c['value']['trim']()){_0x12ad9a['textContent']=_0x7c8920(0x97),_0x12ad9a['className']='ladder-join-status\x20error';return;}try{_0x2619be[_0x7c8920(0x89)]=!![],_0x12ad9a[_0x7c8920(0x7b)]='Verifying\x20username...',_0x12ad9a[_0x7c8920(0x8e)]='ladder-join-status\x20loading';let _0x2fdb9a='',_0x2e95c1=null;const _0x80dc8f=[_0x7c8920(0x99),_0x7c8920(0x88),'playersD3','playersDuos',_0x7c8920(0x9d),'nonParticipants'];for(const _0x4709cc of _0x80dc8f){try{const _0x1285fe=doc(db,_0x4709cc,_0x5749cc['uid']),_0x2d02c4=await getDoc(_0x1285fe);if(_0x2d02c4[_0x7c8920(0x92)]()){_0x2e95c1=_0x2d02c4['data']();if(_0x2e95c1['username']){_0x2fdb9a=_0x2e95c1['username'];break;}}}catch(_0x57b361){console['error']('Error\x20checking\x20'+_0x4709cc+':',_0x57b361);}}!_0x2fdb9a&&_0x5749cc['email']&&(_0x2fdb9a=_0x5749cc['email']['split']('@')[0x0]);if(!_0x2fdb9a){_0x12ad9a[_0x7c8920(0x7b)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x12ad9a['className']='ladder-join-status\x20error',_0x2619be[_0x7c8920(0x89)]=![];return;}const _0x4731bc=_0x5d4a0c[_0x7c8920(0x8d)][_0x7c8920(0x8b)]();if(_0x2fdb9a&&_0x4731bc['toLowerCase']()!==_0x2fdb9a[_0x7c8920(0x7e)]()){_0x12ad9a['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x2fdb9a+_0x7c8920(0x80),_0x12ad9a['className']='ladder-join-status\x20error',_0x2619be[_0x7c8920(0x89)]=![];return;}_0x12ad9a[_0x7c8920(0x7b)]='Joining\x20'+currentLadder+'\x20ladder...';const _0x4160ec=getCollectionName(currentLadder),_0x53ab65=doc(db,_0x4160ec,_0x5749cc['uid']),_0x19be88=await getDoc(_0x53ab65);if(_0x19be88['exists']()){_0x12ad9a['textContent']=_0x7c8920(0x9f)+currentLadder+'\x20ladder.',_0x12ad9a[_0x7c8920(0x8e)]=_0x7c8920(0x9e),_0x2619be['disabled']=![];return;}try{await _0x5749cc['getIdToken'](!![]);}catch(_0x4365a7){_0x12ad9a[_0x7c8920(0x7b)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x12ad9a['className']=_0x7c8920(0x9e),_0x2619be[_0x7c8920(0x89)]=![];return;}const _0x210f78=_0x2fdb9a,_0x12f548=collection(db,_0x4160ec),_0x55866f=query(_0x12f548,orderBy('position','desc'),limit(0x1)),_0x42aa86=await getDocs(_0x55866f);let _0x30b280=0x1;if(!_0x42aa86['empty']){const _0xfc87d4=_0x42aa86['docs'][0x0]['data']();_0x30b280=(_0xfc87d4[_0x7c8920(0xa3)]||0x0)+0x1;}const _0x487ca7={'username':_0x210f78,'email':_0x5749cc['email'],'eloRating':0x4b0,'position':_0x30b280,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x53ab65,_0x487ca7),currentLadder==='DUOS'?_0x12ad9a['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x12ad9a[_0x7c8920(0x7b)]=_0x7c8920(0x79)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x12ad9a['className']=_0x7c8920(0x7d),setTimeout(()=>{const _0x4978c7=_0x7c8920;window[_0x4978c7(0x8c)]['reload']();},0x7d0);}catch(_0x57cbda){console['error']('Error\x20joining\x20ladder:',_0x57cbda),_0x12ad9a['textContent']=_0x7c8920(0x84)+_0x57cbda['message'],_0x12ad9a['className']='ladder-join-status\x20error',_0x2619be['disabled']=![];}}