const a22_0x25b7ee=a22_0x49cf;import a22_0x535626,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0xc69e21=a22_0x49cf;if(document['getElementById']('idle-overlay'))return;const _0x1ffa07=document['createElement'](_0xc69e21(0x113));_0x1ffa07['id']='idle-overlay',_0x1ffa07['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x834720=document['createElement']('div');_0x834720[_0xc69e21(0x119)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x5a03d1=document['createElement']('h2');_0x5a03d1[_0xc69e21(0x104)]=_0xc69e21(0x124),_0x5a03d1[_0xc69e21(0x119)][_0xc69e21(0x120)]='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x3c3d97=document[_0xc69e21(0x121)]('p');_0x3c3d97['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x3c3d97['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x11dbd5=document['createElement'](_0xc69e21(0xff));_0x11dbd5['id']='resume-session-btn',_0x11dbd5['textContent']='Return\x20to\x20Website',_0x11dbd5[_0xc69e21(0x119)]['cssText']=_0xc69e21(0x126),_0x11dbd5['onmouseover']=function(){this['style']['backgroundColor']='#3da05f';},_0x11dbd5['onmouseout']=function(){this['style']['backgroundColor']='#50C878';},_0x834720['appendChild'](_0x5a03d1),_0x834720[_0xc69e21(0xfe)](_0x3c3d97),_0x834720[_0xc69e21(0xfe)](_0x11dbd5),_0x1ffa07['appendChild'](_0x834720),document['body']['appendChild'](_0x1ffa07),_0x11dbd5['addEventListener'](_0xc69e21(0x114),resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x141b20=a22_0x49cf;if(document['getElementById'](_0x141b20(0x103)))return;const _0x3d9391=document['createElement']('div');_0x3d9391['id']=_0x141b20(0x103),_0x3d9391['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x4892e7=document[_0x141b20(0x121)]('div');_0x4892e7['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x4ff510=document['createElement']('h2');_0x4ff510['textContent']='Connection\x20Error',_0x4ff510['style'][_0x141b20(0x120)]='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x24d5b2=document[_0x141b20(0x121)]('p');_0x24d5b2[_0x141b20(0x104)]='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x24d5b2['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x52968e=document[_0x141b20(0x121)]('button');_0x52968e['id']='retry-connection-btn',_0x52968e[_0x141b20(0x104)]='Retry\x20Connection',_0x52968e['style'][_0x141b20(0x120)]=_0x141b20(0x125);const _0x3718b7=document['createElement']('button');_0x3718b7['id']='reload-page-btn',_0x3718b7['textContent']=_0x141b20(0x11f),_0x3718b7[_0x141b20(0x119)][_0x141b20(0x120)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x267d19=document['createElement']('div');_0x267d19['style']['cssText']=_0x141b20(0x111),_0x267d19['appendChild'](_0x52968e),_0x267d19['appendChild'](_0x3718b7),_0x4892e7['appendChild'](_0x4ff510),_0x4892e7[_0x141b20(0xfe)](_0x24d5b2),_0x4892e7[_0x141b20(0xfe)](_0x267d19),_0x3d9391['appendChild'](_0x4892e7),document[_0x141b20(0x108)]['appendChild'](_0x3d9391),_0x52968e['addEventListener']('click',retryConnection),_0x3718b7['addEventListener']('click',()=>window['location'][_0x141b20(0x11b)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function a22_0x49cf(_0x39d075,_0x1d7157){const _0x8004aa=a22_0x4849();return a22_0x49cf=function(_0x2730d5,_0x2c0b37){_0x2730d5=_0x2730d5-0xfd;let _0x48492e=_0x8004aa[_0x2730d5];return _0x48492e;},a22_0x49cf(_0x39d075,_0x1d7157);}function handleNetworkError(){const _0x393c90=a22_0x49cf;clearTimeout(idleTimer);const _0xc3baab=document['getElementById'](_0x393c90(0x103));_0xc3baab&&(_0xc3baab['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log'](_0x393c90(0x10b)),a22_0x535626[_0x393c90(0x102)]();}function retryConnection(){const _0x237ee4=a22_0x49cf;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x412f94=document['querySelector']('#network-error-overlay\x20p');_0x412f94&&(_0x412f94['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x10dbb8=document['getElementById'](_0x237ee4(0x11c));_0x10dbb8&&(_0x10dbb8['disabled']=!![],_0x10dbb8['style']['opacity']='0.5',_0x10dbb8[_0x237ee4(0x119)]['cursor']=_0x237ee4(0x122));return;}const _0xe210d9=document['getElementById']('network-error-overlay');_0xe210d9&&(_0xe210d9[_0x237ee4(0x119)][_0x237ee4(0x109)]='none');window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x56f88a}=window;if(_0x56f88a){const _0x58625e=_0x56f88a['collection']('system');_0x56f88a['getDocs'](_0x58625e)['catch'](_0x5b2bf6=>{const _0x2af114=_0x237ee4;console[_0x2af114(0x101)](_0x2af114(0x129),_0x5b2bf6),handleNetworkError();});}}catch(_0x297b99){console['error']('Failed\x20to\x20test\x20connection:',_0x297b99),handleNetworkError();}a22_0x535626[_0x237ee4(0x11d)]();}function a22_0x4849(){const _0x3104ed=['getElementById','appendChild','button','readyState','error','suspendAllListeners','network-error-overlay','textContent','message','bind','constructor','body','display','includes','Network\x20error\x20detected,\x20showing\x20error\x20overlay','keys','return\x20(function()\x20','Session\x20suspended\x20due\x20to\x20inactivity','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','log','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','network','div','click','activeListeners','RDL_SESSION_SUSPENDED','Idle\x20timeout\x20initialized:','loading','style','length','reload','retry-connection-btn','resumeAllListeners','Pending\x20operations:','Reload\x20Page','cssText','createElement','not-allowed','now','Session\x20Suspended\x20Due\x20to\x20Inactivity','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','idle-overlay','DOMContentLoaded','Connection\x20test\x20failed:'];a22_0x4849=function(){return _0x3104ed;};return a22_0x4849();}function suspendSession(){const _0x2e7c7a=a22_0x49cf;isSessionSuspended=!![];const _0x388e77=document['getElementById'](_0x2e7c7a(0x127));_0x388e77&&(_0x388e77['style']['display']='flex'),console['log'](_0x2e7c7a(0x10e)),window['RDL_SESSION_SUSPENDED']=!![],a22_0x535626['suspendAllListeners']();}function resumeSession(){const _0x49cde8=a22_0x49cf;isSessionSuspended=![],window[_0x49cde8(0x116)]=![];const _0x26bb2e=document[_0x49cde8(0xfd)](_0x49cde8(0x127));_0x26bb2e&&(_0x26bb2e['style'][_0x49cde8(0x109)]='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0x535626[_0x49cde8(0x11d)](),idleTimer&&Date['now']()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x49cde8(0x10f)),window['location'][_0x49cde8(0x11b)]());}function initIdleTimeout(){const _0x225bbd=a22_0x49cf,_0x10f54d=(function(){let _0x9803fa=!![];return function(_0x966eb6,_0x2b25fc){const _0x2b6ea0=_0x9803fa?function(){if(_0x2b25fc){const _0x20a556=_0x2b25fc['apply'](_0x966eb6,arguments);return _0x2b25fc=null,_0x20a556;}}:function(){};return _0x9803fa=![],_0x2b6ea0;};}()),_0x41ef1b=_0x10f54d(this,function(){const _0x2e9f97=a22_0x49cf;let _0x20805e;try{const _0x32747d=Function(_0x2e9f97(0x10d)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x20805e=_0x32747d();}catch(_0x1b8216){_0x20805e=window;}const _0x1e1fc2=_0x20805e['console']=_0x20805e['console']||{},_0x447f74=[_0x2e9f97(0x110),'warn','info','error','exception','table','trace'];for(let _0x4ef2ea=0x0;_0x4ef2ea<_0x447f74[_0x2e9f97(0x11a)];_0x4ef2ea++){const _0x515e2f=_0x10f54d[_0x2e9f97(0x107)]['prototype'][_0x2e9f97(0x106)](_0x10f54d),_0x298127=_0x447f74[_0x4ef2ea],_0x4537a8=_0x1e1fc2[_0x298127]||_0x515e2f;_0x515e2f['__proto__']=_0x10f54d['bind'](_0x10f54d),_0x515e2f['toString']=_0x4537a8['toString']['bind'](_0x4537a8),_0x1e1fc2[_0x298127]=_0x515e2f;}});_0x41ef1b(),createIdleOverlay();const _0x4fe203=['mousedown','mousemove','keypress','scroll','touchstart','click'];_0x4fe203['forEach'](_0x39ec1a=>{document['addEventListener'](_0x39ec1a,()=>{const _0x1f693a=a22_0x49cf;window['RDL_LAST_ACTIVITY']=Date[_0x1f693a(0x123)](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x31d1f0){const _0x16e02b=a22_0x49cf;_0x31d1f0['error']&&(_0x31d1f0['error']['message']&&_0x31d1f0['error'][_0x16e02b(0x105)]['includes']('network')||_0x31d1f0['error']['code']&&(_0x31d1f0['error']['code']==='unavailable'||_0x31d1f0['error']['code']==='resource-exhausted'||_0x31d1f0['error']['code'][_0x16e02b(0x10a)](_0x16e02b(0x112))))&&(handleNetworkError(),_0x31d1f0['preventDefault']());}),resetIdleTimer(),console['log'](_0x225bbd(0x117),IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x1dfced=_0x225bbd;return console[_0x1dfced(0x110)]('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console[_0x1dfced(0x110)]('Active\x20listeners:',a22_0x535626['activeListeners']['size']),console['log'](_0x1dfced(0x11e),a22_0x535626['pendingOperations']['size']),console['log']('Blocked\x20operations:',a22_0x535626['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x535626[_0x1dfced(0x115)]['keys']()),'pendingOperations':Array['from'](a22_0x535626['pendingOperations'][_0x1dfced(0x10c)]()),'blockedCount':a22_0x535626['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document[a22_0x25b7ee(0x100)]===a22_0x25b7ee(0x118)?document['addEventListener'](a22_0x25b7ee(0x128),initIdleTimeout):initIdleTimeout();