const a17_0xfad04b=a17_0x4cc1,a17_0x26dbe7=(function(){let _0xc9564f=!![];return function(_0x4e2797,_0x484710){const _0x4a6119=_0xc9564f?function(){const _0x159e4f=a17_0x4cc1;if(_0x484710){const _0x13d55e=_0x484710[_0x159e4f(0x1c4)](_0x4e2797,arguments);return _0x484710=null,_0x13d55e;}}:function(){};return _0xc9564f=![],_0x4a6119;};}()),a17_0x16cf3a=a17_0x26dbe7(this,function(){const _0x1bfd9a=a17_0x4cc1,_0x450769=function(){const _0x4fd152=a17_0x4cc1;let _0x1ffd99;try{_0x1ffd99=Function(_0x4fd152(0x1dd)+_0x4fd152(0x1c2)+');')();}catch(_0x1f4971){_0x1ffd99=window;}return _0x1ffd99;},_0x6fb3e3=_0x450769(),_0x2d0dc3=_0x6fb3e3[_0x1bfd9a(0x1c8)]=_0x6fb3e3['console']||{},_0x5a09c2=[_0x1bfd9a(0x1c5),'warn','info','error','exception','table','trace'];for(let _0x262147=0x0;_0x262147<_0x5a09c2['length'];_0x262147++){const _0x1c938d=a17_0x26dbe7[_0x1bfd9a(0x1b8)][_0x1bfd9a(0x1ce)]['bind'](a17_0x26dbe7),_0x2ad025=_0x5a09c2[_0x262147],_0x4d1701=_0x2d0dc3[_0x2ad025]||_0x1c938d;_0x1c938d['__proto__']=a17_0x26dbe7['bind'](a17_0x26dbe7),_0x1c938d['toString']=_0x4d1701['toString']['bind'](_0x4d1701),_0x2d0dc3[_0x2ad025]=_0x1c938d;}});function a17_0x4cc1(_0x3916c6,_0x3291ee){const _0x16cf3a=a17_0x299d();return a17_0x4cc1=function(_0x26dbe7,_0x3b44cf){_0x26dbe7=_0x26dbe7-0x1b7;let _0x299dfb=_0x16cf3a[_0x26dbe7];return _0x299dfb;},a17_0x4cc1(_0x3916c6,_0x3291ee);}a17_0x16cf3a();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x1a4d84=a17_0x4cc1;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this[_0x1a4d84(0x1be)]=0x0,this[_0x1a4d84(0x1d4)]=![];}[a17_0xfad04b(0x1b7)](){const _0x4c4e77=a17_0xfad04b;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this[_0x4c4e77(0x1be)]||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0x4c4e77(0x1ec)]('[FirebaseIdle]\x20Blocked\x20'+this[_0x4c4e77(0x1be)]+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x24a2c5,_0x30b2e5,..._0x435aef){const _0x1eb3db=a17_0xfad04b;if(!this['checkSessionActive']()){const _0x327840=_0x30b2e5+'-'+Date['now']()+'-'+Math['random']()[_0x1eb3db(0x1e6)](0x24)[_0x1eb3db(0x1d3)](0x2,0x9);return this['pendingOperations']['set'](_0x327840,{'operation':_0x24a2c5,'operationType':_0x30b2e5,'args':_0x435aef}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x24a2c5(..._0x435aef);}catch(_0x201bf9){if(_0x201bf9['code']===_0x1eb3db(0x1df)||_0x201bf9['code']===_0x1eb3db(0x1c7)||_0x201bf9['message']&&_0x201bf9['message']['includes'](_0x1eb3db(0x1e7)))return handleNetworkError(),null;throw _0x201bf9;}}async[a17_0xfad04b(0x1e1)](_0x4ae7e8){return this['safeOperation'](getDoc,'get',_0x4ae7e8);}async['getDocuments'](_0x3f0136){return this['safeOperation'](getDocs,'query',_0x3f0136);}async[a17_0xfad04b(0x1ea)](_0x5e7776,_0x46cb71){const _0x2ea39b=a17_0xfad04b;return this[_0x2ea39b(0x1e2)](addDoc,_0x2ea39b(0x1cd),_0x5e7776,_0x46cb71);}async[a17_0xfad04b(0x1cc)](_0x269506,_0x2545d0,_0x4734b0={}){const _0x7429b0=a17_0xfad04b;return this[_0x7429b0(0x1e2)](setDoc,'set',_0x269506,_0x2545d0,_0x4734b0);}async['updateDocument'](_0x2bff35,_0x351297){const _0xce3fe5=a17_0xfad04b;return this[_0xce3fe5(0x1e2)](updateDoc,_0xce3fe5(0x1de),_0x2bff35,_0x351297);}async[a17_0xfad04b(0x1e0)](_0x3f6c72){const _0x25c530=a17_0xfad04b;return this[_0x25c530(0x1e2)](deleteDoc,_0x25c530(0x1ca),_0x3f6c72);}[a17_0xfad04b(0x1cb)](){const _0x1c8326=a17_0xfad04b;console['log'](_0x1c8326(0x1e8),this[_0x1c8326(0x1d9)]['size']),this['_suspendedListeners']=new Map(this[_0x1c8326(0x1d9)]),this['activeListeners']['forEach']((_0x1c432a,_0x394a11)=>{const _0x557d71=_0x1c8326;console[_0x557d71(0x1c5)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x394a11);if(typeof _0x1c432a===_0x557d71(0x1c1))try{_0x1c432a(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x394a11);}catch(_0x58a569){console[_0x557d71(0x1d1)]('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x394a11,_0x58a569);}else{if(_0x1c432a&&typeof _0x1c432a['unsubscribe']==='function')try{_0x1c432a['unsubscribe'](),console['log'](_0x557d71(0x1e3),_0x394a11);}catch(_0x1bc7d3){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x394a11,_0x1bc7d3);}}}),this[_0x1c8326(0x1d9)]['clear']();if(this['debug']){const _0x4b05d5=document['createElement']('div');_0x4b05d5['id']='firebase-suspend-indicator',_0x4b05d5[_0x1c8326(0x1c6)]['cssText']=_0x1c8326(0x1e4),_0x4b05d5['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0x4b05d5);}console[_0x1c8326(0x1c5)](_0x1c8326(0x1d7));}['resumeAllListeners'](){const _0x3fe7d3=a17_0xfad04b;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console[_0x3fe7d3(0x1c5)]('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this[_0x3fe7d3(0x1d0)]['size']),this['_suspendedListeners'][_0x3fe7d3(0x1ba)]((_0x6acac6,_0x1bbf43)=>{const _0x47dd82=_0x3fe7d3;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x1bbf43);try{if(typeof _0x6acac6==='function'){console[_0x47dd82(0x1ec)]('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x1bbf43);return;}const {query:_0x3ef705,callback:_0x46ef19,options:_0x48d1a6}=_0x6acac6;if(_0x3ef705&&_0x46ef19){const _0x333363=onSnapshot(_0x3ef705,_0x46ef19,_0x48d1a6||{});this['activeListeners']['set'](_0x1bbf43,_0x333363),console[_0x47dd82(0x1c5)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x1bbf43);}}catch(_0x4378e8){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x1bbf43,_0x4378e8);}}),this['_suspendedListeners'][_0x3fe7d3(0x1db)]();const _0x2790ef=document['getElementById']('firebase-suspend-indicator');_0x2790ef&&_0x2790ef[_0x3fe7d3(0x1bf)](),console['log'](_0x3fe7d3(0x1bd));}['createListener'](_0x3169f2,_0x1227ef,_0x30eda8={},_0x110d39=null){const _0x28fdd1=a17_0xfad04b,_0x6ff570=_0x110d39||'listener_'+Date[_0x28fdd1(0x1c9)]()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x6ff570);if(!this['checkSessionActive']())return console[_0x28fdd1(0x1c5)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x6ff570),()=>{};try{const _0x5641d5=onSnapshot(_0x3169f2,_0x1227ef,_0x30eda8);return this['activeListeners']['set'](_0x6ff570,{'unsubscribe':_0x5641d5,'query':_0x3169f2,'callback':_0x1227ef,'options':_0x30eda8}),this['debug']&&(console['log'](_0x28fdd1(0x1cf)+_0x6ff570),console[_0x28fdd1(0x1c5)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x3f160a=_0x28fdd1;this['debug']&&console[_0x3f160a(0x1c5)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x6ff570);try{_0x5641d5(),this['activeListeners'][_0x3f160a(0x1ca)](_0x6ff570),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x6ff570),console[_0x3f160a(0x1c5)](_0x3f160a(0x1d6)+this['activeListeners'][_0x3f160a(0x1eb)]));}catch(_0x1b8aec){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x6ff570+':',_0x1b8aec);}};}catch(_0x5b1ce3){return console[_0x28fdd1(0x1d1)]('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x6ff570+':',_0x5b1ce3),()=>{};}}['executePendingOperations'](_0x2d0bc9=a17_0xfad04b(0x1dc)){const _0x7bcf4f=a17_0xfad04b;console['log']('Executing\x20pending\x20'+_0x2d0bc9+'\x20operations:\x20'+this['pendingOperations']['size']+_0x7bcf4f(0x1bc));const _0x2f3149=new Map(this[_0x7bcf4f(0x1d5)]);this['pendingOperations']['clear'](),_0x2f3149[_0x7bcf4f(0x1ba)]((_0x43294c,_0x12b10c)=>{const _0x339d24=_0x7bcf4f;_0x2d0bc9===_0x339d24(0x1dc)||_0x43294c[_0x339d24(0x1bb)]===_0x2d0bc9?(console['log']('Executing\x20delayed\x20'+_0x43294c[_0x339d24(0x1bb)]+_0x339d24(0x1d2)),this['safeOperation'](_0x43294c['operation'],_0x43294c['operationType'],..._0x43294c['args'])[_0x339d24(0x1b9)](_0xdbe34b=>console['error']('Error\x20executing\x20pending\x20operation:',_0xdbe34b))):this[_0x339d24(0x1d5)]['set'](_0x12b10c,_0x43294c);});}['enableDebug'](_0x3740b1=!![]){const _0xbe1903=a17_0xfad04b;this[_0xbe1903(0x1d4)]=_0x3740b1,console[_0xbe1903(0x1c5)](_0xbe1903(0x1e5)+(_0x3740b1?'enabled':_0xbe1903(0x1da)));if(_0x3740b1){const _0x374d0e=window['RDL_SESSION_SUSPENDED'];window[_0xbe1903(0x1c3)]=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system','test'))[_0xbe1903(0x1c0)](_0x388fd2=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x388fd2);})[_0xbe1903(0x1b9)](_0x81949e=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x81949e);})['finally'](()=>{const _0x2dd2ef=_0xbe1903;console['log'](_0x2dd2ef(0x1e9)),window[_0x2dd2ef(0x1c3)]=_0x374d0e;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x16ad7e=window['suspendSession']||function(){},_0x96e519=window['resumeSession']||function(){};window['suspendSession']=function(){const _0xc85af9=a17_0x4cc1;_0x16ad7e(),firebaseIdle[_0xc85af9(0x1cb)]();},window['resumeSession']=function(){const _0x1ee51a=a17_0x4cc1;_0x96e519(),firebaseIdle[_0x1ee51a(0x1d8)]();};}export default firebaseIdle;function a17_0x299d(){const _0x385e0a=['checkSessionActive','constructor','catch','forEach','operationType','\x20total\x20operations','[FirebaseIdle]\x20Listeners\x20resumed','blockedOperations','remove','then','function','{}.constructor(\x22return\x20this\x22)(\x20)','RDL_SESSION_SUSPENDED','apply','log','style','resource-exhausted','console','now','delete','suspendAllListeners','setDocument','add','prototype','[FirebaseIdle]\x20Listener\x20created:\x20','_suspendedListeners','error','\x20operation','substring','debug','pendingOperations','[FirebaseIdle]\x20Active\x20listeners:\x20','[FirebaseIdle]\x20All\x20listeners\x20suspended','resumeAllListeners','activeListeners','disabled','clear','all','return\x20(function()\x20','update','unavailable','deleteDocument','getDocument','safeOperation','[FirebaseIdle]\x20Successfully\x20suspended\x20listener:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[FirebaseIdle]\x20Debug\x20mode\x20','toString','network','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','[FirebaseIdle]\x20Suspension\x20test\x20complete','addDocument','size','warn'];a17_0x299d=function(){return _0x385e0a;};return a17_0x299d();}