const a48_0x404cfa=a48_0x3c98,a48_0x148771=(function(){let _0x29f4ff=!![];return function(_0x35674f,_0x698014){const _0x586bb0=_0x29f4ff?function(){if(_0x698014){const _0x121704=_0x698014['apply'](_0x35674f,arguments);return _0x698014=null,_0x121704;}}:function(){};return _0x29f4ff=![],_0x586bb0;};}()),a48_0x510717=a48_0x148771(this,function(){const _0x4f3b9b=a48_0x3c98;let _0x5c5583;try{const _0x3a3fc3=Function(_0x4f3b9b(0x85)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5c5583=_0x3a3fc3();}catch(_0x4654c4){_0x5c5583=window;}const _0x390209=_0x5c5583['console']=_0x5c5583['console']||{},_0x1bc1bc=['log','warn','info','error','exception','table','trace'];for(let _0x554edf=0x0;_0x554edf<_0x1bc1bc['length'];_0x554edf++){const _0x328683=a48_0x148771['constructor'][_0x4f3b9b(0x82)]['bind'](a48_0x148771),_0x40900f=_0x1bc1bc[_0x554edf],_0x1aac9d=_0x390209[_0x40900f]||_0x328683;_0x328683[_0x4f3b9b(0x7b)]=a48_0x148771[_0x4f3b9b(0x75)](a48_0x148771),_0x328683[_0x4f3b9b(0x6e)]=_0x1aac9d[_0x4f3b9b(0x6e)][_0x4f3b9b(0x75)](_0x1aac9d),_0x390209[_0x40900f]=_0x328683;}});a48_0x510717();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a48_0x3c98(_0x49c9b1,_0x5319ee){const _0x510717=a48_0x5c04();return a48_0x3c98=function(_0x148771,_0x283232){_0x148771=_0x148771-0x6e;let _0x5c0421=_0x510717[_0x148771];return _0x5c0421;},a48_0x3c98(_0x49c9b1,_0x5319ee);}const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':a48_0x404cfa(0xad),'description':a48_0x404cfa(0x8f)},'cyberpunk':{'price':0x190,'name':a48_0x404cfa(0x94),'description':a48_0x404cfa(0x6f)},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':'Red','description':a48_0x404cfa(0x71)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a48_0x404cfa(0x70)]('DOMContentLoaded',()=>{const _0x221be7=a48_0x404cfa;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById']('store-content'),pointsDisplay=document['getElementById']('user-points'),authWarning=document['getElementById'](_0x221be7(0x96)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x4fad07=>{const _0x2a36d8=a48_0x3c98;if(_0x4fad07){console['log']('‚úÖ\x20User\x20authenticated:',_0x4fad07['displayName']||_0x4fad07[_0x2a36d8(0x89)]);if(authWarning)authWarning[_0x2a36d8(0xb0)][_0x2a36d8(0x98)]='none';if(storeContainer)storeContainer['style']['display']=_0x2a36d8(0xaf);await loadUserData(_0x4fad07),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x34efae){const _0x2bf570=a48_0x404cfa;try{const _0xcbdba0=doc(db,'userProfiles',_0x34efae['uid']),_0x48ebbe=await getDoc(_0xcbdba0);if(_0x48ebbe['exists']()){const _0x57b176=_0x48ebbe['data']();userData={'points':_0x57b176[_0x2bf570(0xa3)]||0x0,'inventory':_0x57b176['inventory']||[],'isAdmin':_0x57b176[_0x2bf570(0x92)]||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x2bf570(0x81)]()),window['isUserAdmin']=userData[_0x2bf570(0x92)],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window[_0x2bf570(0x72)](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console[_0x2bf570(0xa0)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData[_0x2bf570(0xa3)]+_0x2bf570(0x90)+userData['inventory']['length']+_0x2bf570(0x99));}else await setDoc(_0xcbdba0,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x34efae['displayName']||_0x34efae[_0x2bf570(0x89)]?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0x2bf570(0xa5)]=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x4a23d1){console['error']('Error\x20loading\x20user\x20data:',_0x4a23d1);}}function a48_0x5c04(){const _0x12936f=['toString','This\x20theme\x20makes\x20me\x20happy','addEventListener','For\x20the\x20angry\x20type.','dispatchEvent','User\x20profile\x20not\x20found','theme','bind','\x20Theme','\x20is\x20already\x20your\x20current\x20theme','price','forEach','\x20theme\x20applied!','__proto__','closest','Sign\x20in\x20to\x20Apply','pointer','Apply\x20Theme','Theme\x20system\x20not\x20found','toLocaleString','prototype','info','data','return\x20(function()\x20','name','inventory','Purchase\x20','email','Buy','createElement','querySelectorAll','userProfiles','textContent','Can\x27t\x20get\x20enough',',\x20Inventory:\x20','purchase','isAdmin','cannot-afford','Yellow\x20Orange','.theme-select-btn','auth-warning','dataset','display','\x20items','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-','You\x20already\x20own\x20the\x20','disabled','error','ThemeSystem','store-item','log','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','cursor','points','classList','isUserAdmin','remove','RedeemStore','appendChild','Themes\x20container\x20not\x20found','success','add','Current\x20Theme','Purple','includes','block','style'];a48_0x5c04=function(){return _0x12936f;};return a48_0x5c04();}function userOwnsTheme(_0x19658d){const _0x57e0ea=a48_0x404cfa;if(THEMES[_0x19658d]?.['price']===0x0)return!![];return userData[_0x57e0ea(0x87)][_0x57e0ea(0xae)]('theme_'+_0x19658d);}async function purchaseTheme(_0x38c80b){const _0x5a77f8=a48_0x404cfa,_0x395f06=auth['currentUser'];if(!_0x395f06)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x54ab82=THEMES[_0x38c80b];if(!_0x54ab82)return console['error']('Theme\x20'+_0x38c80b+'\x20not\x20found'),![];if(userData['points']<_0x54ab82['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x54ab82['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x38c80b))return showMessage(_0x5a77f8(0x9b)+_0x54ab82['name']+'\x20theme',_0x5a77f8(0x83)),![];try{const _0x19014f=doc(db,_0x5a77f8(0x8d),_0x395f06['uid']),_0x490da0=await getDoc(_0x19014f);if(!_0x490da0['exists']())return showMessage(_0x5a77f8(0x73),'error'),![];const _0x234120=_0x490da0[_0x5a77f8(0x84)](),_0xefeabe=_0x234120['points']||0x0,_0x159da2=_0x234120['inventory']||[];if(_0xefeabe<_0x54ab82['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x159da2['includes']('theme_'+_0x38c80b))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x5c1dd1=_0xefeabe-_0x54ab82['price'],_0x44e605=[..._0x159da2,'theme_'+_0x38c80b];return await updateDoc(_0x19014f,{'points':_0x5c1dd1,'inventory':_0x44e605,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x395f06['uid'],'userEmail':_0x395f06['email'],'itemId':'theme_'+_0x38c80b,'itemTitle':_0x54ab82[_0x5a77f8(0x86)]+_0x5a77f8(0x76),'price':_0x54ab82[_0x5a77f8(0x78)],'type':_0x5a77f8(0x91),'category':_0x5a77f8(0x74),'timestamp':serverTimestamp()}),userData['points']=_0x5c1dd1,userData['inventory']=_0x44e605,pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x5a77f8(0x81)]()),console['log']('‚úÖ\x20Purchased\x20'+_0x54ab82['name']+'\x20theme\x20for\x20'+_0x54ab82['price']+'\x20points'),!![];}catch(_0x3ad140){return console['error']('Purchase\x20failed:',_0x3ad140),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x5a77f8(0x9d)),![];}}function applyTheme(_0x1991e1){const _0x4b712e=a48_0x404cfa;if(!userOwnsTheme(_0x1991e1))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window[_0x4b712e(0x9e)]?(window['ThemeSystem']['switchTheme'](_0x1991e1),showMessage((THEMES[_0x1991e1]?.['name']||_0x1991e1)+_0x4b712e(0x7a),_0x4b712e(0xaa)),!![]):(console[_0x4b712e(0x9d)](_0x4b712e(0x80)),![]);}function buildStoreUI(){const _0x548724=a48_0x404cfa,_0x1f9537=document['querySelector']('.themes-grid');if(!_0x1f9537){console['error'](_0x548724(0xa9));return;}_0x1f9537['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x55f6c7,_0x241414])=>{const _0x18d725=_0x548724,_0x5352c5=document[_0x18d725(0x8b)]('div');_0x5352c5['className']=_0x18d725(0x9f),_0x5352c5[_0x18d725(0x97)]['theme']=_0x55f6c7,_0x5352c5[_0x18d725(0x97)]['itemId']='theme_'+_0x55f6c7,_0x5352c5['dataset']['price']=_0x241414['price'],_0x5352c5['innerHTML']=_0x18d725(0x9a)+_0x55f6c7+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x241414['price']===0x0?'FREE':_0x241414['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x241414['name']+_0x18d725(0xa1)+_0x241414['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1f9537['appendChild'](_0x5352c5);}),setupThemeButtons();}function setupThemeButtons(){const _0x184c3b=a48_0x404cfa,_0x2c4c16=document[_0x184c3b(0x8c)]('.theme-select-btn');_0x2c4c16[_0x184c3b(0x79)](_0x27c2e3=>{const _0x105dc9=_0x184c3b;_0x27c2e3[_0x105dc9(0x70)]('click',async _0x37b61f=>{const _0x3f15cf=_0x105dc9;_0x37b61f['preventDefault']();const _0x3d5a95=auth['currentUser'];if(!_0x3d5a95){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x40c254=_0x27c2e3['closest']('[data-theme]'),_0x1ef910=_0x40c254['dataset']['theme'],_0x2221a9=THEMES[_0x1ef910];if(!_0x2221a9){console['error']('Theme\x20'+_0x1ef910+'\x20not\x20found');return;}console[_0x3f15cf(0xa0)]('Theme\x20clicked:\x20'+_0x2221a9['name']+'\x20('+_0x1ef910+')');if(_0x27c2e3[_0x3f15cf(0x9c)]){_0x2221a9['price']>0x0&&showMessage('You\x20need\x20'+_0x2221a9[_0x3f15cf(0x78)]+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x27c2e3['textContent']==='Current\x20Theme'){showMessage(_0x2221a9['name']+_0x3f15cf(0x77),'info');return;}if(_0x27c2e3[_0x3f15cf(0x8e)]===_0x3f15cf(0x7f)){applyTheme(_0x1ef910),updateThemeButtons();return;}if(_0x27c2e3[_0x3f15cf(0x8e)]['includes'](_0x3f15cf(0x8a))){const _0xdb497b=window['confirm'](_0x3f15cf(0x88)+_0x2221a9[_0x3f15cf(0x86)]+'\x20theme\x20for\x20'+_0x2221a9['price']+'\x20points?');if(!_0xdb497b)return;const _0x33c550=await purchaseTheme(_0x1ef910);_0x33c550&&(showMessage(_0x2221a9['name']+'\x20theme\x20purchased!','success'),applyTheme(_0x1ef910),updateThemeButtons());return;}userOwnsTheme(_0x1ef910)?applyTheme(_0x1ef910):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x255694=a48_0x404cfa,_0x43883d=window['ThemeSystem']?window['ThemeSystem']['getCurrentTheme']():'default',_0x32c40a=auth['currentUser'];document[_0x255694(0x8c)](_0x255694(0x95))[_0x255694(0x79)](_0x185ba9=>{const _0x7082cb=_0x255694,_0x4fdcd1=_0x185ba9[_0x7082cb(0x7c)]('[data-theme]'),_0x465664=_0x4fdcd1['dataset']['theme'],_0x540969=THEMES[_0x465664];if(!_0x540969)return;_0x185ba9['disabled']=![],_0x185ba9['style']['opacity']='',_0x185ba9['style'][_0x7082cb(0xa2)]=_0x7082cb(0x7e),_0x185ba9['classList'][_0x7082cb(0xa6)]('current-theme','apply-theme','can-afford','cannot-afford','sign-in-free','sign-in-paid');if(!_0x32c40a){_0x540969[_0x7082cb(0x78)]===0x0?(_0x185ba9['textContent']=_0x7082cb(0x7d),_0x185ba9[_0x7082cb(0xa4)]['add']('sign-in-free')):(_0x185ba9['textContent']='Sign\x20in\x20to\x20Purchase',_0x185ba9['disabled']=!![],_0x185ba9['style']['opacity']='0.7',_0x185ba9['classList'][_0x7082cb(0xab)]('sign-in-paid'));return;}if(_0x465664===_0x43883d){_0x185ba9['textContent']=_0x7082cb(0xac),_0x185ba9['classList'][_0x7082cb(0xab)]('current-theme'),_0x185ba9['disabled']=!![],_0x185ba9['style']['cursor']='default';return;}if(userOwnsTheme(_0x465664)){_0x185ba9['textContent']='Apply\x20Theme',_0x185ba9['classList']['add']('apply-theme');return;}if(userData['points']>=_0x540969['price']){_0x185ba9['textContent']='Buy\x20for\x20'+_0x540969[_0x7082cb(0x78)]+'\x20Points',_0x185ba9['classList']['add']('can-afford');return;}_0x185ba9['textContent']='Need\x20'+_0x540969['price']+'\x20Points',_0x185ba9['classList']['add'](_0x7082cb(0x93)),_0x185ba9['style']['opacity']='0.5',_0x185ba9[_0x7082cb(0x9c)]=!![],_0x185ba9[_0x7082cb(0xb0)]['cursor']='not-allowed';});}function showMessage(_0x2ef790,_0x3ad7b3=a48_0x404cfa(0x83)){const _0x10846a=a48_0x404cfa,_0x15d871=document['getElementById']('store-message');_0x15d871&&_0x15d871['remove']();const _0x45190d=document[_0x10846a(0x8b)]('div');_0x45190d['id']='store-message',_0x45190d['className']='store-message\x20store-message-'+_0x3ad7b3,_0x45190d['textContent']=_0x2ef790,document['body'][_0x10846a(0xa8)](_0x45190d),requestAnimationFrame(()=>{const _0x149983=_0x10846a;_0x45190d[_0x149983(0xa4)]['add']('visible');}),setTimeout(()=>{const _0x225b01=_0x10846a;_0x45190d[_0x225b01(0xa4)]['remove']('visible'),setTimeout(()=>{const _0x3caf6f=_0x225b01;_0x45190d['parentNode']&&_0x45190d[_0x3caf6f(0xa6)]();},0x12c);},0xfa0);}window[a48_0x404cfa(0xa7)]={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console[a48_0x404cfa(0xa0)]('üè™\x20Redeem\x20store\x20loaded');