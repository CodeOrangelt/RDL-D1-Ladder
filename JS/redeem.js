const a47_0x846260=a47_0x21ad,a47_0x22241d=(function(){let _0x26c9e0=!![];return function(_0x2ff1f0,_0x5cfd5d){const _0x503c9a=_0x26c9e0?function(){const _0x59ac98=a47_0x21ad;if(_0x5cfd5d){const _0x49b699=_0x5cfd5d[_0x59ac98(0x205)](_0x2ff1f0,arguments);return _0x5cfd5d=null,_0x49b699;}}:function(){};return _0x26c9e0=![],_0x503c9a;};}()),a47_0x11923e=a47_0x22241d(this,function(){const _0x21f578=a47_0x21ad,_0x438c9b=function(){let _0x50c7ab;try{_0x50c7ab=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x28c457){_0x50c7ab=window;}return _0x50c7ab;},_0x4e185a=_0x438c9b(),_0x40494f=_0x4e185a[_0x21f578(0x1df)]=_0x4e185a['console']||{},_0x476f99=['log','warn',_0x21f578(0x1fe),_0x21f578(0x212),'exception','table',_0x21f578(0x200)];for(let _0x4f64be=0x0;_0x4f64be<_0x476f99[_0x21f578(0x1eb)];_0x4f64be++){const _0x13800c=a47_0x22241d['constructor']['prototype'][_0x21f578(0x1d3)](a47_0x22241d),_0x53e371=_0x476f99[_0x4f64be],_0x5945fb=_0x40494f[_0x53e371]||_0x13800c;_0x13800c[_0x21f578(0x1ce)]=a47_0x22241d[_0x21f578(0x1d3)](a47_0x22241d),_0x13800c['toString']=_0x5945fb['toString'][_0x21f578(0x1d3)](_0x5945fb),_0x40494f[_0x53e371]=_0x13800c;}});a47_0x11923e();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a47_0x846260(0x1f5),'description':a47_0x846260(0x20d)},'purple':{'price':0x96,'name':a47_0x846260(0x1f9),'description':a47_0x846260(0x1ea)},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':a47_0x846260(0x211)},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':a47_0x846260(0x206)},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':a47_0x846260(0x1ff)},'ocean':{'price':0x12c,'name':'Blue','description':a47_0x846260(0x1ee)},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x2faafa=a47_0x846260;console[_0x2faafa(0x1de)]('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById'](_0x2faafa(0x214)),pointsDisplay=document[_0x2faafa(0x1dc)]('user-points'),authWarning=document['getElementById'](_0x2faafa(0x208)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x40ede2=>{const _0x556d86=a47_0x21ad;if(_0x40ede2){console[_0x556d86(0x1de)]('‚úÖ\x20User\x20authenticated:',_0x40ede2[_0x556d86(0x1d6)]||_0x40ede2['email']);if(authWarning)authWarning['style']['display']='none';if(storeContainer)storeContainer['style'][_0x556d86(0x20f)]='block';await loadUserData(_0x40ede2),updateThemeButtons();}else{console[_0x556d86(0x1de)]('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning[_0x556d86(0x1f3)][_0x556d86(0x20f)]='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x593d6b){const _0x599714=a47_0x846260;try{const _0x2026dc=doc(db,_0x599714(0x1fc),_0x593d6b['uid']),_0x211579=await getDoc(_0x2026dc);if(_0x211579[_0x599714(0x1f7)]()){const _0x3f8bf6=_0x211579['data']();userData={'points':_0x3f8bf6[_0x599714(0x1d9)]||0x0,'inventory':_0x3f8bf6['inventory']||[],'isAdmin':_0x3f8bf6[_0x599714(0x1f6)]||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window[_0x599714(0x20b)]=userData['isAdmin'],userData[_0x599714(0x1f6)]&&(console[_0x599714(0x1de)](_0x599714(0x213)),window['dispatchEvent'](new CustomEvent(_0x599714(0x1da),{'detail':{'isAdmin':!![]}}))),console[_0x599714(0x1de)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData[_0x599714(0x1e2)][_0x599714(0x1eb)]+'\x20items');}else await setDoc(_0x2026dc,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x593d6b['displayName']||_0x593d6b['email']?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console[_0x599714(0x1de)](_0x599714(0x1ed));}catch(_0x2bb007){console['error']('Error\x20loading\x20user\x20data:',_0x2bb007);}}function userOwnsTheme(_0x36b70b){const _0x4e360e=a47_0x846260;if(THEMES[_0x36b70b]?.['price']===0x0)return!![];return userData['inventory'][_0x4e360e(0x201)]('theme_'+_0x36b70b);}function a47_0x21ad(_0x4eb59b,_0x3dc852){const _0x11923e=a47_0x3ed1();return a47_0x21ad=function(_0x22241d,_0x5b1703){_0x22241d=_0x22241d-0x1cc;let _0x3ed17a=_0x11923e[_0x22241d];return _0x3ed17a;},a47_0x21ad(_0x4eb59b,_0x3dc852);}async function purchaseTheme(_0x186e2f){const _0x34567b=a47_0x846260,_0x1a3579=auth[_0x34567b(0x209)];if(!_0x1a3579)return showMessage(_0x34567b(0x210),'error'),![];const _0x3de698=THEMES[_0x186e2f];if(!_0x3de698)return console['error']('Theme\x20'+_0x186e2f+'\x20not\x20found'),![];if(userData['points']<_0x3de698[_0x34567b(0x202)])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x3de698['price']-userData[_0x34567b(0x1d9)])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x186e2f))return showMessage('You\x20already\x20own\x20the\x20'+_0x3de698['name']+_0x34567b(0x1e7),'info'),![];try{const _0x5e495e=doc(db,_0x34567b(0x1fc),_0x1a3579['uid']),_0x5c3a59=await getDoc(_0x5e495e);if(!_0x5c3a59['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x1b6729=_0x5c3a59[_0x34567b(0x1ef)](),_0x41ed37=_0x1b6729['points']||0x0,_0x3cae65=_0x1b6729['inventory']||[];if(_0x41ed37<_0x3de698['price'])return showMessage('Insufficient\x20points',_0x34567b(0x212)),![];if(_0x3cae65['includes'](_0x34567b(0x1cc)+_0x186e2f))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x5f8d9e=_0x41ed37-_0x3de698[_0x34567b(0x202)],_0x247ec7=[..._0x3cae65,'theme_'+_0x186e2f];return await updateDoc(_0x5e495e,{'points':_0x5f8d9e,'inventory':_0x247ec7,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x1a3579['uid'],'userEmail':_0x1a3579['email'],'itemId':'theme_'+_0x186e2f,'itemTitle':_0x3de698['name']+'\x20Theme','price':_0x3de698['price'],'type':'purchase','category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x5f8d9e,userData['inventory']=_0x247ec7,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),console['log'](_0x34567b(0x20a)+_0x3de698['name']+_0x34567b(0x207)+_0x3de698[_0x34567b(0x202)]+'\x20points'),!![];}catch(_0x319617){return console['error']('Purchase\x20failed:',_0x319617),showMessage(_0x34567b(0x1d1),'error'),![];}}function applyTheme(_0x1a761d){const _0xd39bb9=a47_0x846260;if(!userOwnsTheme(_0x1a761d))return showMessage(_0xd39bb9(0x1f1),_0xd39bb9(0x212)),![];return window[_0xd39bb9(0x1cf)]?(window['ThemeSystem'][_0xd39bb9(0x216)](_0x1a761d),showMessage((THEMES[_0x1a761d]?.['name']||_0x1a761d)+'\x20theme\x20applied!','success'),!![]):(console['error'](_0xd39bb9(0x203)),![]);}function a47_0x3ed1(){const _0x25a4a2=['theme_','Theme\x20clicked:\x20','__proto__','ThemeSystem','closest','Purchase\x20failed.\x20Please\x20try\x20again.','add','bind','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','disabled','displayName','store-item','classList','points','adminStatusChanged','not-allowed','getElementById','remove','log','console','createElement','opacity','inventory','dataset','name','can-afford','className','\x20theme','Need\x20','innerHTML','Can\x27t\x20get\x20enough','length','\x20Points','New\x20user\x20profile\x20created','This\x20one\x20is\x20really\x20pretty','data','forEach','You\x20must\x20purchase\x20this\x20theme\x20first','0.7','style','Sign\x20in\x20to\x20Apply','Classic\x20RDL','isAdmin','exists','current-theme','Purple','sign-in-free','textContent','userProfiles','pointer','info','You\x20can\x20see\x20better!','trace','includes','price','Theme\x20system\x20not\x20found','\x20points\x20to\x20purchase\x20this\x20theme','apply','Only\x20the\x20best\x20get\x20this\x20one','\x20theme\x20for\x20','auth-warning','currentUser','‚úÖ\x20Purchased\x20','isUserAdmin','querySelector','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','appendChild','display','Please\x20sign\x20in\x20to\x20purchase\x20themes','This\x20theme\x20makes\x20me\x20happy','error','üëë\x20Admin\x20controls\x20enabled','store-content','cursor','switchTheme'];a47_0x3ed1=function(){return _0x25a4a2;};return a47_0x3ed1();}function buildStoreUI(){const _0x31a812=a47_0x846260,_0xeb99d8=document[_0x31a812(0x20c)]('.themes-grid');if(!_0xeb99d8){console['error']('Themes\x20container\x20not\x20found');return;}_0xeb99d8[_0x31a812(0x1e9)]='',Object['entries'](THEMES)[_0x31a812(0x1f0)](([_0x3de6f5,_0x469e50])=>{const _0x25bf13=_0x31a812,_0x21f1ee=document[_0x25bf13(0x1e0)]('div');_0x21f1ee[_0x25bf13(0x1e6)]=_0x25bf13(0x1d7),_0x21f1ee['dataset']['theme']=_0x3de6f5,_0x21f1ee[_0x25bf13(0x1e3)]['itemId']='theme_'+_0x3de6f5,_0x21f1ee['dataset'][_0x25bf13(0x202)]=_0x469e50['price'],_0x21f1ee['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x3de6f5+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x469e50['price']===0x0?'FREE':_0x469e50['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x469e50['name']+_0x25bf13(0x1d4)+_0x469e50['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xeb99d8[_0x25bf13(0x20e)](_0x21f1ee);}),setupThemeButtons();}function setupThemeButtons(){const _0x197719=a47_0x846260,_0x1fc9cb=document['querySelectorAll']('.theme-select-btn');_0x1fc9cb[_0x197719(0x1f0)](_0x256e6b=>{_0x256e6b['addEventListener']('click',async _0x15174=>{const _0x15157f=a47_0x21ad;_0x15174['preventDefault']();const _0x9fda60=auth['currentUser'];if(!_0x9fda60){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x59af4f=_0x256e6b[_0x15157f(0x1d0)]('[data-theme]'),_0x45f32b=_0x59af4f[_0x15157f(0x1e3)]['theme'],_0x4f30bd=THEMES[_0x45f32b];if(!_0x4f30bd){console['error']('Theme\x20'+_0x45f32b+'\x20not\x20found');return;}console['log'](_0x15157f(0x1cd)+_0x4f30bd['name']+'\x20('+_0x45f32b+')');if(_0x256e6b['disabled']){_0x4f30bd[_0x15157f(0x202)]>0x0&&showMessage('You\x20need\x20'+_0x4f30bd['price']+_0x15157f(0x204),'error');return;}if(_0x256e6b[_0x15157f(0x1fb)]==='Current\x20Theme'){showMessage(_0x4f30bd['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x256e6b['textContent']==='Apply\x20Theme'){applyTheme(_0x45f32b),updateThemeButtons();return;}if(_0x256e6b[_0x15157f(0x1fb)][_0x15157f(0x201)]('Buy')){const _0x38146c=window['confirm']('Purchase\x20'+_0x4f30bd['name']+'\x20theme\x20for\x20'+_0x4f30bd['price']+'\x20points?');if(!_0x38146c)return;const _0x5a5bc7=await purchaseTheme(_0x45f32b);_0x5a5bc7&&(showMessage(_0x4f30bd[_0x15157f(0x1e4)]+'\x20theme\x20purchased!','success'),applyTheme(_0x45f32b),updateThemeButtons());return;}userOwnsTheme(_0x45f32b)?applyTheme(_0x45f32b):showMessage(_0x15157f(0x1f1),'error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x1542a5=a47_0x846260,_0x354a7f=window[_0x1542a5(0x1cf)]?window['ThemeSystem']['getCurrentTheme']():'default',_0x35ccda=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')['forEach'](_0x2b15b7=>{const _0x7832b=_0x1542a5,_0x3764fb=_0x2b15b7['closest']('[data-theme]'),_0x498587=_0x3764fb[_0x7832b(0x1e3)]['theme'],_0x5d9cbe=THEMES[_0x498587];if(!_0x5d9cbe)return;_0x2b15b7['disabled']=![],_0x2b15b7[_0x7832b(0x1f3)]['opacity']='',_0x2b15b7[_0x7832b(0x1f3)]['cursor']=_0x7832b(0x1fd),_0x2b15b7[_0x7832b(0x1d8)][_0x7832b(0x1dd)]('current-theme','apply-theme','can-afford','cannot-afford',_0x7832b(0x1fa),'sign-in-paid');if(!_0x35ccda){_0x5d9cbe['price']===0x0?(_0x2b15b7['textContent']=_0x7832b(0x1f4),_0x2b15b7[_0x7832b(0x1d8)][_0x7832b(0x1d2)]('sign-in-free')):(_0x2b15b7[_0x7832b(0x1fb)]='Sign\x20in\x20to\x20Purchase',_0x2b15b7['disabled']=!![],_0x2b15b7[_0x7832b(0x1f3)]['opacity']=_0x7832b(0x1f2),_0x2b15b7['classList']['add']('sign-in-paid'));return;}if(_0x498587===_0x354a7f){_0x2b15b7['textContent']='Current\x20Theme',_0x2b15b7['classList']['add'](_0x7832b(0x1f8)),_0x2b15b7[_0x7832b(0x1d5)]=!![],_0x2b15b7['style'][_0x7832b(0x215)]='default';return;}if(userOwnsTheme(_0x498587)){_0x2b15b7['textContent']='Apply\x20Theme',_0x2b15b7['classList']['add']('apply-theme');return;}if(userData['points']>=_0x5d9cbe[_0x7832b(0x202)]){_0x2b15b7['textContent']='Buy\x20for\x20'+_0x5d9cbe['price']+'\x20Points',_0x2b15b7['classList']['add'](_0x7832b(0x1e5));return;}_0x2b15b7['textContent']=_0x7832b(0x1e8)+_0x5d9cbe[_0x7832b(0x202)]+_0x7832b(0x1ec),_0x2b15b7['classList'][_0x7832b(0x1d2)]('cannot-afford'),_0x2b15b7['style'][_0x7832b(0x1e1)]='0.5',_0x2b15b7[_0x7832b(0x1d5)]=!![],_0x2b15b7['style']['cursor']=_0x7832b(0x1db);});}function showMessage(_0x9c6418,_0x2d155d='info'){const _0x96a2af=a47_0x846260,_0x1db9a8=document['getElementById']('store-message');_0x1db9a8&&_0x1db9a8[_0x96a2af(0x1dd)]();const _0x118e27=document[_0x96a2af(0x1e0)]('div');_0x118e27['id']='store-message',_0x118e27[_0x96a2af(0x1e6)]='store-message\x20store-message-'+_0x2d155d,_0x118e27[_0x96a2af(0x1fb)]=_0x9c6418,document['body']['appendChild'](_0x118e27),requestAnimationFrame(()=>{_0x118e27['classList']['add']('visible');}),setTimeout(()=>{_0x118e27['classList']['remove']('visible'),setTimeout(()=>{_0x118e27['parentNode']&&_0x118e27['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');