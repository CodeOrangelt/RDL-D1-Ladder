function a8_0x3023(_0x25e535,_0x49ab2b){const _0x336feb=a8_0x1cf2();return a8_0x3023=function(_0x280c27,_0xbec4cf){_0x280c27=_0x280c27-0x110;let _0x1cf28e=_0x336feb[_0x280c27];return _0x1cf28e;},a8_0x3023(_0x25e535,_0x49ab2b);}const a8_0x5dafd6=a8_0x3023,a8_0x280c27=(function(){let _0x79d5e4=!![];return function(_0x41671a,_0x8e1d86){const _0x47aa14=_0x79d5e4?function(){const _0x55f757=a8_0x3023;if(_0x8e1d86){const _0x42ba7e=_0x8e1d86[_0x55f757(0x129)](_0x41671a,arguments);return _0x8e1d86=null,_0x42ba7e;}}:function(){};return _0x79d5e4=![],_0x47aa14;};}()),a8_0x336feb=a8_0x280c27(this,function(){const _0xe6933=a8_0x3023;let _0x1bd5cd;try{const _0x2666ab=Function('return\x20(function()\x20'+_0xe6933(0x11d)+');');_0x1bd5cd=_0x2666ab();}catch(_0x55eaaf){_0x1bd5cd=window;}const _0x10ce87=_0x1bd5cd['console']=_0x1bd5cd['console']||{},_0x5deeca=['log','warn','info',_0xe6933(0x11b),'exception',_0xe6933(0x125),'trace'];for(let _0x3dfde2=0x0;_0x3dfde2<_0x5deeca['length'];_0x3dfde2++){const _0x951a33=a8_0x280c27['constructor']['prototype']['bind'](a8_0x280c27),_0x58df2a=_0x5deeca[_0x3dfde2],_0x3e1ace=_0x10ce87[_0x58df2a]||_0x951a33;_0x951a33['__proto__']=a8_0x280c27['bind'](a8_0x280c27),_0x951a33['toString']=_0x3e1ace['toString']['bind'](_0x3e1ace),_0x10ce87[_0x58df2a]=_0x951a33;}});a8_0x336feb();function a8_0x1cf2(){const _0x3499fc=['now','backgroundColor','height','data','pendingMatchesD3','docs','currentUsername','exists','block','pendingMatchesCache','all','error','stringify','{}.constructor(\x22return\x20this\x22)(\x20)','10px','getItem','top','disconnect','uid','setItem','pendingMatches','table','none','email','position','apply','username','display','style','zIndex','empty'];a8_0x1cf2=function(){return _0x3499fc;};return a8_0x1cf2();}import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a8_0x5dafd6(0x119),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x3eaf82=![]){const _0x4c725b=a8_0x5dafd6,_0x108fc2=Date[_0x4c725b(0x110)](),_0x4c9611=checkNotificationCache();if(_0x4c9611!==null&&!_0x3eaf82){updateNotificationDot(_0x4c9611);if(_0x108fc2-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x108fc2;const _0x1f2dd1=auth['currentUser'];if(!_0x1f2dd1){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x3b8d1a,_0x45cd79,_0x5ba6fe]=await Promise[_0x4c725b(0x11a)]([checkForPendingMatchesInCollection(_0x1f2dd1,_0x4c725b(0x124)),checkForPendingMatchesInCollection(_0x1f2dd1,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x1f2dd1,_0x4c725b(0x114))]),_0x3a1151=_0x3b8d1a||_0x45cd79||_0x5ba6fe;updateNotificationDot(_0x3a1151),updateNotificationCache(_0x3a1151);}catch(_0x3472e5){console['error']('Error\x20checking\x20pending\x20matches:',_0x3472e5);}}async function checkForPendingMatchesInCollection(_0x18ff0a,_0x1e1f32){const _0x3a2ca5=a8_0x5dafd6,_0x4775b5=_0x18ff0a['uid'],_0x266f9a=_0x18ff0a['email'],_0x32b97a=query(collection(db,_0x1e1f32),where('winnerId','==',_0x4775b5),where('approved','==',![])),_0x25149a=await getDocs(_0x32b97a);if(!_0x25149a[_0x3a2ca5(0x12e)])return!![];if(_0x266f9a){const _0x33c739=query(collection(db,_0x1e1f32),where('winnerEmail','==',_0x266f9a),where('approved','==',![])),_0x4ae95a=await getDocs(_0x33c739);if(!_0x4ae95a[_0x3a2ca5(0x12e)])return!![];}let _0xa6b759=await getUsernameFromAllSources(_0x18ff0a);if(_0xa6b759){const _0xf0a3c9=query(collection(db,_0x1e1f32),where('winnerUsername','==',_0xa6b759),where('approved','==',![])),_0xd31fe8=await getDocs(_0xf0a3c9);if(!_0xd31fe8[_0x3a2ca5(0x12e)])return!![];}return![];}async function getUsernameFromAllSources(_0x84fb77){const _0x5345e6=a8_0x5dafd6,_0x27fa66=localStorage[_0x5345e6(0x11f)]('currentUsername');if(_0x27fa66)return _0x27fa66;try{const [_0x5f262e,_0x31589a,_0x2b0c4b]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x84fb77['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x84fb77[_0x5345e6(0x122)]))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x84fb77['uid'])))]);if(!_0x5f262e['empty']){const _0xc7cf14=_0x5f262e['docs'][0x0]['data']()['username'];return localStorage[_0x5345e6(0x123)](_0x5345e6(0x116),_0xc7cf14),_0xc7cf14;}if(!_0x31589a[_0x5345e6(0x12e)]){const _0x5adfbe=_0x31589a['docs'][0x0]['data']()['username'];return localStorage[_0x5345e6(0x123)]('currentUsername',_0x5adfbe),_0x5adfbe;}if(!_0x2b0c4b[_0x5345e6(0x12e)]){const _0x1159d4=_0x2b0c4b[_0x5345e6(0x115)][0x0]['data']()[_0x5345e6(0x12a)];return localStorage[_0x5345e6(0x123)]('currentUsername',_0x1159d4),_0x1159d4;}const _0x3a4ebb=await getDoc(doc(db,'users',_0x84fb77['uid']));if(_0x3a4ebb[_0x5345e6(0x117)]()&&_0x3a4ebb['data']()['username']){const _0x10dcdc=_0x3a4ebb[_0x5345e6(0x113)]()['username'];return localStorage[_0x5345e6(0x123)](_0x5345e6(0x116),_0x10dcdc),_0x10dcdc;}}catch(_0x166f77){console['error']('Error\x20fetching\x20username:',_0x166f77);}if(_0x84fb77['email'])return _0x84fb77[_0x5345e6(0x127)]['split']('@')[0x0];return null;}function updateNotificationCache(_0x120ce2){const _0x47934f=a8_0x5dafd6,_0x277378={'status':_0x120ce2,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x47934f(0x11c)](_0x277378));}function checkNotificationCache(){const _0x2cbb2c=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x2cbb2c)return null;try{const {status:_0x35f748,timestamp:_0x59cf27}=JSON['parse'](_0x2cbb2c),_0x277759=Date['now']();if(_0x277759-_0x59cf27<CACHE_EXPIRY)return _0x35f748;}catch(_0x5276b7){}return null;}export function updateNotificationDot(_0x4bceab){const _0x357149=a8_0x5dafd6,_0x22c40b=new MutationObserver((_0x2dc838,_0xd37cef)=>{const _0x269477=document['getElementById']('report-match-notification');_0x269477&&(updateDotStyle(_0x269477,_0x4bceab),_0xd37cef['disconnect']());});_0x22c40b['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0xed8769=document['getElementById']('report-match-notification');_0xed8769&&(updateDotStyle(_0xed8769,_0x4bceab),_0x22c40b['disconnect']()),setTimeout(()=>_0x22c40b[_0x357149(0x121)](),0x1388);}function updateDotStyle(_0x5d9aa0,_0x1817df){const _0x153a57=a8_0x5dafd6;_0x1817df?(_0x5d9aa0['style'][_0x153a57(0x12b)]=_0x153a57(0x118),_0x5d9aa0['style'][_0x153a57(0x111)]='#ff3b30',_0x5d9aa0['style']['width']=_0x153a57(0x11e),_0x5d9aa0['style'][_0x153a57(0x112)]='10px',_0x5d9aa0['style'][_0x153a57(0x128)]='absolute',_0x5d9aa0['style'][_0x153a57(0x120)]='-5px',_0x5d9aa0['style']['right']='-8px',_0x5d9aa0['style']['borderRadius']='50%',_0x5d9aa0[_0x153a57(0x12c)]['border']='2px\x20solid\x20white',_0x5d9aa0[_0x153a57(0x12c)][_0x153a57(0x12d)]='999'):_0x5d9aa0['style']['display']=_0x153a57(0x126);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x3fe621=a8_0x3023;localStorage['removeItem'](_0x3fe621(0x116)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});