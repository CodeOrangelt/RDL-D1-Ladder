function a16_0x5be0(){const _0x16d4da=['return\x20(function()\x20','console','Silver','error','ELO\x20history\x20recorded\x20for\x20','eloHistory','toString','Unknown\x20Player','map','apply','Bronze','Gold','username','timestamp','Error\x20fetching\x20username:','data'];a16_0x5be0=function(){return _0x16d4da;};return a16_0x5be0();}const a16_0x26cd56=a16_0x448e,a16_0x288663=(function(){let _0x5cab6e=!![];return function(_0x21e33b,_0x435a05){const _0xd7d06c=_0x5cab6e?function(){const _0x3f4d3c=a16_0x448e;if(_0x435a05){const _0x1726b6=_0x435a05[_0x3f4d3c(0x7b)](_0x21e33b,arguments);return _0x435a05=null,_0x1726b6;}}:function(){};return _0x5cab6e=![],_0xd7d06c;};}()),a16_0x5902d5=a16_0x288663(this,function(){const _0x1ab57f=a16_0x448e,_0x4e0c81=function(){const _0x4eeeb0=a16_0x448e;let _0x156d79;try{_0x156d79=Function(_0x4eeeb0(0x72)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x29a6ee){_0x156d79=window;}return _0x156d79;},_0x539957=_0x4e0c81(),_0x2353a4=_0x539957[_0x1ab57f(0x73)]=_0x539957['console']||{},_0x197a5a=['log','warn','info','error','exception','table','trace'];for(let _0xd8ef5d=0x0;_0xd8ef5d<_0x197a5a['length'];_0xd8ef5d++){const _0x2837cc=a16_0x288663['constructor']['prototype']['bind'](a16_0x288663),_0x33b3ff=_0x197a5a[_0xd8ef5d],_0x391c54=_0x2353a4[_0x33b3ff]||_0x2837cc;_0x2837cc['__proto__']=a16_0x288663['bind'](a16_0x288663),_0x2837cc['toString']=_0x391c54[_0x1ab57f(0x78)]['bind'](_0x391c54),_0x2353a4[_0x33b3ff]=_0x2837cc;}});a16_0x5902d5();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':a16_0x26cd56(0x7c),'elo':0x578},{'name':'Unranked','elo':0x4b0}];async function getUsernameById(_0x318028){const _0x3d774d=a16_0x26cd56;try{if(!_0x318028)return'Unknown\x20Player';const _0x29d631=await getDoc(doc(db,'players',_0x318028));return _0x29d631['exists']()?_0x29d631[_0x3d774d(0x81)]()[_0x3d774d(0x7e)]:'Unknown\x20Player';}catch(_0x376d04){return console[_0x3d774d(0x75)](_0x3d774d(0x80),_0x376d04),_0x3d774d(0x79);}}export async function recordEloChange({playerId:_0x342552,previousElo:_0x5e68cd,newElo:_0x19dd46,opponentId:_0x579002,matchResult:_0x536ab5,previousPosition:_0x49faa3,newPosition:_0x5f16c7,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x213364}){const _0x2c1f93=a16_0x26cd56;try{const _0x32ef71=doc(collection(db,_0x2c1f93(0x77)));let _0xcd6fb3='match';if(isPromotion)_0xcd6fb3='promotion';if(isDemotion)_0xcd6fb3='demotion';let _0x7cd3c9='Unranked';if(_0x19dd46>=0x834)_0x7cd3c9='Emerald';else{if(_0x19dd46>=0x708)_0x7cd3c9=_0x2c1f93(0x7d);else{if(_0x19dd46>=0x640)_0x7cd3c9=_0x2c1f93(0x74);else{if(_0x19dd46>=0x578)_0x7cd3c9='Bronze';}}}return await setDoc(_0x32ef71,{'type':_0xcd6fb3,'player':_0x342552,'opponent':_0x579002,'previousElo':_0x5e68cd,'newElo':_0x19dd46,'change':_0x19dd46-_0x5e68cd,'matchResult':_0x536ab5,'previousPosition':_0x49faa3,'newPosition':_0x5f16c7,'rankAchieved':_0x7cd3c9,'timestamp':_0x213364}),console['log'](_0x2c1f93(0x76)+_0x342552),!![];}catch(_0x39e6ad){console[_0x2c1f93(0x75)]('Error\x20recording\x20ELO\x20history:',_0x39e6ad);throw _0x39e6ad;}}function a16_0x448e(_0x4305f5,_0x4eac39){const _0x5902d5=a16_0x5be0();return a16_0x448e=function(_0x288663,_0x486586){_0x288663=_0x288663-0x72;let _0x5be0c6=_0x5902d5[_0x288663];return _0x5be0c6;},a16_0x448e(_0x4305f5,_0x4eac39);}export async function getEloHistory(){const _0x2a209a=a16_0x26cd56;try{const _0x4b3d7d=collection(db,'eloHistory'),_0x1068c7=query(_0x4b3d7d,orderBy(_0x2a209a(0x7f),'desc')),_0x5846d4=await getDocs(_0x1068c7),_0x56e5d2=_0x5846d4['docs'][_0x2a209a(0x7a)](async _0x5aae0d=>{const _0x2bf666=_0x2a209a,_0x48b940=_0x5aae0d['data'](),[_0x57f4f4,_0x43f2ed]=await Promise['all']([getUsernameById(_0x48b940['player']),getUsernameById(_0x48b940['opponent'])]);return{..._0x48b940,'playerUsername':_0x57f4f4,'opponentUsername':_0x43f2ed,'change':_0x48b940['newElo']-_0x48b940['previousElo'],'timestamp':_0x48b940[_0x2bf666(0x7f)]};}),_0x3ca900=await Promise['all'](_0x56e5d2);return{'entries':_0x3ca900};}catch(_0x2edaac){console[_0x2a209a(0x75)]('Error\x20fetching\x20ELO\x20history:',_0x2edaac);throw _0x2edaac;}}export function resetPagination(){lastVisible=null;}