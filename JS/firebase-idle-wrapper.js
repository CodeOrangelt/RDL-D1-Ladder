const a19_0x21b713=a19_0x1fd0,a19_0x5ae9d6=(function(){let _0x7ee473=!![];return function(_0x3a6a3f,_0x453d28){const _0x513fdc=_0x7ee473?function(){if(_0x453d28){const _0x4af333=_0x453d28['apply'](_0x3a6a3f,arguments);return _0x453d28=null,_0x4af333;}}:function(){};return _0x7ee473=![],_0x513fdc;};}()),a19_0x4c182f=a19_0x5ae9d6(this,function(){const _0x503061=a19_0x1fd0,_0x447b9a=function(){let _0x14d808;try{_0x14d808=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x359e20){_0x14d808=window;}return _0x14d808;},_0x1ff8fd=_0x447b9a(),_0x595461=_0x1ff8fd['console']=_0x1ff8fd[_0x503061(0xd4)]||{},_0x4f7bc3=['log',_0x503061(0xcd),'info','error','exception','table','trace'];for(let _0x58073d=0x0;_0x58073d<_0x4f7bc3['length'];_0x58073d++){const _0x2e24a1=a19_0x5ae9d6['constructor']['prototype'][_0x503061(0xd3)](a19_0x5ae9d6),_0x2f9ae6=_0x4f7bc3[_0x58073d],_0x2d9810=_0x595461[_0x2f9ae6]||_0x2e24a1;_0x2e24a1['__proto__']=a19_0x5ae9d6[_0x503061(0xd3)](a19_0x5ae9d6),_0x2e24a1['toString']=_0x2d9810['toString']['bind'](_0x2d9810),_0x595461[_0x2f9ae6]=_0x2e24a1;}});function a19_0x1fd0(_0x560765,_0x1c28d1){const _0x4c182f=a19_0x2847();return a19_0x1fd0=function(_0x5ae9d6,_0x45c2f2){_0x5ae9d6=_0x5ae9d6-0xaa;let _0x2847dc=_0x4c182f[_0x5ae9d6];return _0x2847dc;},a19_0x1fd0(_0x560765,_0x1c28d1);}function a19_0x2847(){const _0x4fa6de=['blockedOperations','suspendSession','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','resumeSession','error','appendChild','suspendAllListeners','[FirebaseIdle]\x20Listeners\x20resumed','set','[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension','resumeAllListeners','getElementById','[FirebaseIdle]\x20Debug\x20mode\x20','[FirebaseIdle]\x20Resuming\x20listeners:','firebase-suspend-indicator','delete','debug','pendingOperations','resource-exhausted','operationType','checkSessionActive','all','textContent','clear','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','activeListeners','size','safeOperation','code','[FirebaseIdle]\x20Suspension\x20test\x20complete','_suspendedListeners','catch','log','forEach','random','warn','system','message','pendingTimeout','[FirebaseIdle]\x20Active\x20listeners:\x20','[FirebaseIdle]\x20No\x20listeners\x20to\x20resume','bind','console','query'];a19_0x2847=function(){return _0x4fa6de;};return a19_0x2847();}a19_0x4c182f();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x25ba6e=a19_0x1fd0;this['activeListeners']=new Map(),this[_0x25ba6e(0xbb)]=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}[a19_0x21b713(0xbe)](){const _0x2e3c1d=a19_0x21b713;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this[_0x2e3c1d(0xaa)]=(this[_0x2e3c1d(0xaa)]||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0x2e3c1d(0xcd)]('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x5ddbf2,_0x1e6df3,..._0x40f09d){const _0x7dcfb9=a19_0x21b713;if(!this['checkSessionActive']()){const _0x488cd2=_0x1e6df3+'-'+Date['now']()+'-'+Math[_0x7dcfb9(0xcc)]()['toString'](0x24)['substring'](0x2,0x9);return this[_0x7dcfb9(0xbb)][_0x7dcfb9(0xb2)](_0x488cd2,{'operation':_0x5ddbf2,'operationType':_0x1e6df3,'args':_0x40f09d}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{const _0x8ff8fd=_0x7dcfb9;this['pendingOperations']['clear'](),this[_0x8ff8fd(0xd0)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x5ddbf2(..._0x40f09d);}catch(_0x5d7d12){if(_0x5d7d12['code']==='unavailable'||_0x5d7d12[_0x7dcfb9(0xc6)]===_0x7dcfb9(0xbc)||_0x5d7d12[_0x7dcfb9(0xcf)]&&_0x5d7d12['message']['includes']('network'))return handleNetworkError(),null;throw _0x5d7d12;}}async['getDocument'](_0x5dacf){const _0x40ab64=a19_0x21b713;return this[_0x40ab64(0xc5)](getDoc,'get',_0x5dacf);}async['getDocuments'](_0xc6c372){const _0x45de39=a19_0x21b713;return this['safeOperation'](getDocs,_0x45de39(0xd5),_0xc6c372);}async['addDocument'](_0x1a36f6,_0x5f3d34){const _0x33b81b=a19_0x21b713;return this[_0x33b81b(0xc5)](addDoc,'add',_0x1a36f6,_0x5f3d34);}async['setDocument'](_0x223c60,_0x561210,_0x1d7205={}){return this['safeOperation'](setDoc,'set',_0x223c60,_0x561210,_0x1d7205);}async['updateDocument'](_0xe7bc3a,_0x4d7494){return this['safeOperation'](updateDoc,'update',_0xe7bc3a,_0x4d7494);}async['deleteDocument'](_0x331443){const _0x21cc80=a19_0x21b713;return this['safeOperation'](deleteDoc,_0x21cc80(0xb9),_0x331443);}['suspendAllListeners'](){const _0xccd42b=a19_0x21b713;console['log'](_0xccd42b(0xc2),this['activeListeners']['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x1bde4a,_0x463603)=>{const _0x17d029=_0xccd42b;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x463603);if(typeof _0x1bde4a==='function')try{_0x1bde4a(),console[_0x17d029(0xca)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x463603);}catch(_0x3579eb){console[_0x17d029(0xae)]('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x463603,_0x3579eb);}}),this['activeListeners']['clear']();if(this[_0xccd42b(0xba)]){const _0x5c0adb=document['createElement']('div');_0x5c0adb['id']=_0xccd42b(0xb8),_0x5c0adb['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5c0adb[_0xccd42b(0xc0)]='Firebase:\x20Suspended',document['body'][_0xccd42b(0xaf)](_0x5c0adb);}console[_0xccd42b(0xca)]('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x246dd0=a19_0x21b713;if(!this[_0x246dd0(0xc8)]||this['_suspendedListeners'][_0x246dd0(0xc4)]===0x0){console['log'](_0x246dd0(0xd2));return;}console['log'](_0x246dd0(0xb7),this[_0x246dd0(0xc8)]['size']),this['_suspendedListeners']['forEach']((_0x9d0f53,_0x5ae428)=>{const _0x51104d=_0x246dd0;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x5ae428);try{if(typeof _0x9d0f53==='function'){console[_0x51104d(0xcd)]('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x5ae428);return;}const {query:_0x1cc9e9,callback:_0x126484,options:_0x4386bb}=_0x9d0f53;if(_0x1cc9e9&&_0x126484){const _0x40b35e=onSnapshot(_0x1cc9e9,_0x126484,_0x4386bb||{});this['activeListeners'][_0x51104d(0xb2)](_0x5ae428,_0x40b35e),console[_0x51104d(0xca)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x5ae428);}}catch(_0x5ea166){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x5ae428,_0x5ea166);}}),this['_suspendedListeners'][_0x246dd0(0xc1)]();const _0x5e86fa=document[_0x246dd0(0xb5)]('firebase-suspend-indicator');_0x5e86fa&&_0x5e86fa['remove'](),console['log'](_0x246dd0(0xb1));}['createListener'](_0x37e72e,_0xd27158,_0x407e87={},_0x1c3932=null){const _0x279cde=a19_0x21b713,_0x2cd913=_0x1c3932||'listener_'+Date['now']()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x2cd913);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x2cd913),()=>{};try{const _0x19a6a2=onSnapshot(_0x37e72e,_0xd27158,_0x407e87);return this[_0x279cde(0xc3)]['set'](_0x2cd913,{'unsubscribe':_0x19a6a2,'query':_0x37e72e,'callback':_0xd27158,'options':_0x407e87}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x2cd913),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x477fa4=_0x279cde;this[_0x477fa4(0xba)]&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x2cd913);try{_0x19a6a2(),this['activeListeners']['delete'](_0x2cd913),this['debug']&&(console[_0x477fa4(0xca)]('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x2cd913),console['log'](_0x477fa4(0xd1)+this['activeListeners']['size']));}catch(_0x22aadb){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x2cd913+':',_0x22aadb);}};}catch(_0x127958){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x2cd913+':',_0x127958),()=>{};}}['executePendingOperations'](_0xa5546=a19_0x21b713(0xbf)){const _0x4ca12c=a19_0x21b713;console['log']('Executing\x20pending\x20'+_0xa5546+'\x20operations:\x20'+this['pendingOperations']['size']+'\x20total\x20operations');const _0xcc2e19=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0xcc2e19[_0x4ca12c(0xcb)]((_0x2d960d,_0x1f9923)=>{const _0x330656=_0x4ca12c;_0xa5546==='all'||_0x2d960d['operationType']===_0xa5546?(console[_0x330656(0xca)]('Executing\x20delayed\x20'+_0x2d960d['operationType']+'\x20operation'),this['safeOperation'](_0x2d960d['operation'],_0x2d960d[_0x330656(0xbd)],..._0x2d960d['args'])[_0x330656(0xc9)](_0x490464=>console['error']('Error\x20executing\x20pending\x20operation:',_0x490464))):this['pendingOperations']['set'](_0x1f9923,_0x2d960d);});}['enableDebug'](_0x5d2002=!![]){const _0x105a2b=a19_0x21b713;this[_0x105a2b(0xba)]=_0x5d2002,console[_0x105a2b(0xca)](_0x105a2b(0xb6)+(_0x5d2002?'enabled':'disabled'));if(_0x5d2002){const _0x2fe7bc=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x105a2b(0xce),'test'))['then'](_0x428010=>{const _0x2d21f6=_0x105a2b;console['log'](_0x2d21f6(0xb3),_0x428010);})['catch'](_0x20bc5c=>{const _0x49aece=_0x105a2b;console['log'](_0x49aece(0xac),_0x20bc5c);})['finally'](()=>{const _0x1b8234=_0x105a2b;console[_0x1b8234(0xca)](_0x1b8234(0xc7)),window['RDL_SESSION_SUSPENDED']=_0x2fe7bc;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x47b28d=a19_0x21b713,_0x4ab327=window[_0x47b28d(0xab)]||function(){},_0x270a38=window[_0x47b28d(0xad)]||function(){};window['suspendSession']=function(){const _0x5d00e5=_0x47b28d;_0x4ab327(),firebaseIdle[_0x5d00e5(0xb0)]();},window['resumeSession']=function(){const _0x364da5=_0x47b28d;_0x270a38(),firebaseIdle[_0x364da5(0xb4)]();};}export default firebaseIdle;