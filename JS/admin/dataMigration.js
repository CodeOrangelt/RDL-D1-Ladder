function a0_0x6cdf(_0x4db182,_0xe2ffd){const _0x24c145=a0_0x1dcd();return a0_0x6cdf=function(_0x542f25,_0x4ff958){_0x542f25=_0x542f25-0x119;let _0x1dcdbf=_0x24c145[_0x542f25];return _0x1dcdbf;},a0_0x6cdf(_0x4db182,_0xe2ffd);}const a0_0x542f25=(function(){let _0xc425d5=!![];return function(_0xc8029a,_0x7d0c0a){const _0xa298ab=_0xc425d5?function(){if(_0x7d0c0a){const _0x200950=_0x7d0c0a['apply'](_0xc8029a,arguments);return _0x7d0c0a=null,_0x200950;}}:function(){};return _0xc425d5=![],_0xa298ab;};}()),a0_0x24c145=a0_0x542f25(this,function(){const _0x24bc2f=a0_0x6cdf,_0x302ca3=function(){let _0x3e5fb5;try{_0x3e5fb5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x35b493){_0x3e5fb5=window;}return _0x3e5fb5;},_0x267c05=_0x302ca3(),_0x1f8622=_0x267c05['console']=_0x267c05['console']||{},_0x40b64f=['log',_0x24bc2f(0x12a),'info',_0x24bc2f(0x120),_0x24bc2f(0x123),'table','trace'];for(let _0x303641=0x0;_0x303641<_0x40b64f[_0x24bc2f(0x124)];_0x303641++){const _0x11770b=a0_0x542f25[_0x24bc2f(0x126)][_0x24bc2f(0x125)]['bind'](a0_0x542f25),_0xf63653=_0x40b64f[_0x303641],_0xd068ac=_0x1f8622[_0xf63653]||_0x11770b;_0x11770b[_0x24bc2f(0x11a)]=a0_0x542f25['bind'](a0_0x542f25),_0x11770b[_0x24bc2f(0x127)]=_0xd068ac[_0x24bc2f(0x127)][_0x24bc2f(0x11d)](_0xd068ac),_0x1f8622[_0xf63653]=_0x11770b;}});a0_0x24c145();import{db}from'../firebase-config.js';function a0_0x1dcd(){const _0x26d664=['playersD3','__proto__','push','playersD2','bind','userProfiles','get','error','elo','forEach','exception','length','prototype','constructor','toString','discord','size','warn'];a0_0x1dcd=function(){return _0x26d664;};return a0_0x1dcd();}import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const _0x2ca92a=a0_0x6cdf,_0x426395=['players',_0x2ca92a(0x11c),_0x2ca92a(0x119),'nonParticipants','userProfiles'],_0x1b2ee7=[];let _0x26f28e=writeBatch(db),_0x31c930=0x0;const _0x228365=collection(db,_0x2ca92a(0x11e)),_0x32c7de=new Map(),_0x201f5c=(_0x17e319,_0x5760fa)=>{_0x31c930>=0x1f4&&(_0x1b2ee7['push'](_0x26f28e),_0x26f28e=writeBatch(db),_0x31c930=0x0);const _0x3ee25a=doc(_0x228365,_0x17e319);_0x26f28e['set'](_0x3ee25a,_0x5760fa),_0x31c930++;};for(const _0x1f7ac0 of _0x426395){const _0x5c0aa1=collection(db,_0x1f7ac0),_0x573438=await getDocs(_0x5c0aa1);_0x573438['docs'][_0x2ca92a(0x122)](_0xc84947=>{const _0x2a3804=_0x2ca92a,_0x5dc7cb=_0xc84947['id'],_0x4b8eb2=_0xc84947['data']();!_0x32c7de['has'](_0x5dc7cb)&&_0x32c7de['set'](_0x5dc7cb,{'username':_0x4b8eb2['username']||_0x4b8eb2['name']||_0x5dc7cb,'email':_0x4b8eb2['email']||null,'discord':_0x4b8eb2[_0x2a3804(0x128)]||null,'createdAt':_0x4b8eb2['createdAt']||new Date()['toISOString'](),'divisions':[]});const _0x183417=_0x32c7de[_0x2a3804(0x11f)](_0x5dc7cb);if(_0x1f7ac0==='players')_0x183417['divisions']['push']({'id':0x1,'elo':_0x4b8eb2['elo']||0x5dc,'isActive':_0x4b8eb2['active']!==![]});else{if(_0x1f7ac0==='playersD2')_0x183417['divisions'][_0x2a3804(0x11b)]({'id':0x2,'elo':_0x4b8eb2[_0x2a3804(0x121)]||0x5dc,'isActive':_0x4b8eb2['active']!==![]});else _0x1f7ac0==='playersD3'&&_0x183417['divisions']['push']({'id':0x3,'elo':_0x4b8eb2['elo']||0x5dc,'isActive':_0x4b8eb2['active']!==![]});}});}for(const [_0x278fa1,_0x10867e]of _0x32c7de['entries']()){_0x201f5c(_0x278fa1,_0x10867e);}_0x31c930>0x0&&_0x1b2ee7[_0x2ca92a(0x11b)](_0x26f28e);const _0x1d6974=[];for(const _0x160f95 of _0x1b2ee7){try{await _0x160f95['commit'](),_0x1d6974[_0x2ca92a(0x11b)]({'success':!![]});}catch(_0x1bff57){_0x1d6974[_0x2ca92a(0x11b)]({'success':![],'error':_0x1bff57});}}return{'usersProcessed':_0x32c7de[_0x2ca92a(0x129)],'batchesExecuted':_0x1d6974[_0x2ca92a(0x124)],'success':_0x1d6974['every'](_0x4bc6cc=>_0x4bc6cc['success'])};}export async function updateMatchReferences(){const _0x431708=['matches','matchesD2','matchesD3'];let _0x15e8cd=0x0;for(const _0x181332 of _0x431708){const _0x4f34d1=collection(db,_0x181332),_0x171690=await getDocs(_0x4f34d1),_0x538b6e=0x1f4;let _0x1b2b7f=writeBatch(db),_0x4cc4ad=0x0;for(const _0x509b22 of _0x171690['docs']){const _0x21de1c=_0x509b22['data'](),_0x434890=doc(db,_0x181332,_0x509b22['id']);_0x1b2b7f['update'](_0x434890,{'isMigrated':!![],'lastModified':new Date()['toISOString']()}),_0x4cc4ad++,_0x15e8cd++,_0x4cc4ad>=_0x538b6e&&(await _0x1b2b7f['commit'](),_0x1b2b7f=writeBatch(db),_0x4cc4ad=0x0);}_0x4cc4ad>0x0&&await _0x1b2b7f['commit']();}return{'updatedCount':_0x15e8cd};}