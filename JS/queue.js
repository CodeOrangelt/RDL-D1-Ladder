const a47_0xeaa6ec=a47_0x51f4,a47_0x2d9319=(function(){let _0x3c3020=!![];return function(_0x12117f,_0x1ba3e8){const _0x2fc9f3=_0x3c3020?function(){if(_0x1ba3e8){const _0x4dd1c5=_0x1ba3e8['apply'](_0x12117f,arguments);return _0x1ba3e8=null,_0x4dd1c5;}}:function(){};return _0x3c3020=![],_0x2fc9f3;};}()),a47_0x5daec9=a47_0x2d9319(this,function(){const _0x5b8403=a47_0x51f4;let _0xc3dfae;try{const _0xfeffc8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xc3dfae=_0xfeffc8();}catch(_0x353c8b){_0xc3dfae=window;}const _0x31d76c=_0xc3dfae['console']=_0xc3dfae['console']||{},_0x54b25e=[_0x5b8403(0x152),_0x5b8403(0x14a),'info',_0x5b8403(0x145),'exception',_0x5b8403(0x143),'trace'];for(let _0x15b8f4=0x0;_0x15b8f4<_0x54b25e['length'];_0x15b8f4++){const _0x50c2aa=a47_0x2d9319['constructor']['prototype']['bind'](a47_0x2d9319),_0x444531=_0x54b25e[_0x15b8f4],_0x298701=_0x31d76c[_0x444531]||_0x50c2aa;_0x50c2aa['__proto__']=a47_0x2d9319['bind'](a47_0x2d9319),_0x50c2aa[_0x5b8403(0x142)]=_0x298701['toString']['bind'](_0x298701),_0x31d76c[_0x444531]=_0x50c2aa;}});a47_0x5daec9();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a47_0x51f4(_0x15c64b,_0x4521a0){const _0x5daec9=a47_0x4177();return a47_0x51f4=function(_0x2d9319,_0x276d6d){_0x2d9319=_0x2d9319-0x142;let _0x417707=_0x5daec9[_0x2d9319];return _0x417707;},a47_0x51f4(_0x15c64b,_0x4521a0);}const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x3e78af){const _0x25adc9=a47_0x51f4,_0x9429a9=document['getElementById'](_0x25adc9(0x14e));if(!_0x9429a9)return;if(_0x3e78af['length']===0x0){_0x9429a9['style'][_0x25adc9(0x150)]='none';return;}_0x9429a9['style']['display']='block';let _0x1b73b6=_0x25adc9(0x14d);_0x3e78af['forEach'](_0x9bbe50=>{const _0x4bd6e6=_0x25adc9;_0x1b73b6+=_0x4bd6e6(0x144)+(_0x9bbe50['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x9bbe50['lastUpdated'])+_0x4bd6e6(0x155);}),_0x1b73b6+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x9429a9['innerHTML']=_0x1b73b6;}function a47_0x4177(){const _0x146b85=['toString','table','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','error','lastUpdated','Error\x20in\x20queue\x20listener:','isReady','Just\x20now','warn','floor','Error\x20removing\x20player\x20from\x20queue:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','queue-container','addEventListener','display','toDate','log','forEach','unload','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'];a47_0x4177=function(){return _0x146b85;};return a47_0x4177();}function formatQueueTime(_0x36be52){const _0x32909b=a47_0x51f4;if(!_0x36be52)return _0x32909b(0x149);const _0x48f1c9=_0x36be52[_0x32909b(0x151)]?_0x36be52[_0x32909b(0x151)]():new Date(_0x36be52),_0x1ec9c8=new Date(),_0xf04446=Math[_0x32909b(0x14b)]((_0x1ec9c8-_0x48f1c9)/0xea60);if(_0xf04446<0x1)return'Just\x20now';return _0xf04446+'m\x20in\x20queue';}async function checkQueueTimeout(_0x4d61ed){const _0x7cd5c6=a47_0x51f4;if(!_0x4d61ed['lastUpdated'])return;const _0x3faef1=_0x4d61ed['lastUpdated'][_0x7cd5c6(0x151)]?_0x4d61ed['lastUpdated'][_0x7cd5c6(0x151)]():new Date(_0x4d61ed[_0x7cd5c6(0x146)]),_0xdc72fc=new Date(),_0x172d8f=Math[_0x7cd5c6(0x14b)]((_0xdc72fc-_0x3faef1)/0xea60);if(_0x172d8f>=0x1e)try{const _0x4d2465=doc(db,'readyPlayers',_0x4d61ed['id']);await updateDoc(_0x4d2465,{'isReady':![]});}catch(_0x2dff7a){console['error'](_0x7cd5c6(0x14c),_0x2dff7a);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x160bdc=>{const _0x1dc220=a47_0x51f4,_0x498d52=[];_0x160bdc[_0x1dc220(0x153)](_0x1fbdde=>{const _0xf04aa1=_0x1dc220,_0x44bc1d=_0x1fbdde['data']();if(_0x44bc1d[_0xf04aa1(0x148)]===!![]){const _0x2e88ff={'id':_0x1fbdde['id'],'username':_0x44bc1d['username'],'lastUpdated':_0x44bc1d['lastUpdated']||new Date()};_0x498d52['push'](_0x2e88ff),checkQueueTimeout(_0x2e88ff);}}),updateQueueDisplay(_0x498d52);},_0x1bc471=>{const _0x39ec9b=a47_0x51f4;console[_0x39ec9b(0x145)](_0x39ec9b(0x147),_0x1bc471);});window[a47_0xeaa6ec(0x14f)](a47_0xeaa6ec(0x154),()=>{unsubscribe();});