(function(_0x5b45a1,_0x556bb4){const _0x58af7b=a0_0x3aa6,_0x1f95e1=_0x5b45a1();while(!![]){try{const _0xc8780b=parseInt(_0x58af7b(0x132))/0x1*(-parseInt(_0x58af7b(0x143))/0x2)+parseInt(_0x58af7b(0x13b))/0x3*(parseInt(_0x58af7b(0x131))/0x4)+parseInt(_0x58af7b(0x14d))/0x5*(-parseInt(_0x58af7b(0x13e))/0x6)+parseInt(_0x58af7b(0x12c))/0x7*(parseInt(_0x58af7b(0x14e))/0x8)+-parseInt(_0x58af7b(0x130))/0x9*(parseInt(_0x58af7b(0x134))/0xa)+parseInt(_0x58af7b(0x156))/0xb+-parseInt(_0x58af7b(0x157))/0xc;if(_0xc8780b===_0x556bb4)break;else _0x1f95e1['push'](_0x1f95e1['shift']());}catch(_0x3880d7){_0x1f95e1['push'](_0x1f95e1['shift']());}}}(a0_0x1bbb,0xae26b));const a0_0x4e6d5b=(function(){let _0x11efc5=!![];return function(_0x3b789e,_0x2d8428){const _0x41cb5f=_0x11efc5?function(){if(_0x2d8428){const _0x375dc6=_0x2d8428['apply'](_0x3b789e,arguments);return _0x2d8428=null,_0x375dc6;}}:function(){};return _0x11efc5=![],_0x41cb5f;};}()),a0_0x315921=a0_0x4e6d5b(this,function(){const _0x2a3f9c=a0_0x3aa6,_0x27ac38=function(){let _0x2d52ec;try{_0x2d52ec=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5ed0dc){_0x2d52ec=window;}return _0x2d52ec;},_0x3f9f63=_0x27ac38(),_0x491bbe=_0x3f9f63[_0x2a3f9c(0x12f)]=_0x3f9f63['console']||{},_0x438af6=['log','warn','info',_0x2a3f9c(0x146),'exception',_0x2a3f9c(0x12e),'trace'];for(let _0x35a230=0x0;_0x35a230<_0x438af6['length'];_0x35a230++){const _0x42276b=a0_0x4e6d5b['constructor']['prototype']['bind'](a0_0x4e6d5b),_0x52c725=_0x438af6[_0x35a230],_0x3c0c93=_0x491bbe[_0x52c725]||_0x42276b;_0x42276b['__proto__']=a0_0x4e6d5b['bind'](a0_0x4e6d5b),_0x42276b['toString']=_0x3c0c93['toString']['bind'](_0x3c0c93),_0x491bbe[_0x52c725]=_0x42276b;}});function a0_0x1bbb(){const _0x2586e0=['124ocPwve','d2-switch','ladder-join-status\x20error','error','DUOS','Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22','exists','playersCTF','playersD3','CTF','30uLfrvg','7576968WdBmTT','Error\x20joining\x20ladder:','none','textContent','players','value','join-username-input','block','5387151QCXVvh','14393160HuaQCK','username','ladder-join-status','display','log','email','disabled','className','input[name=\x22ladder\x22]','currentUser','7cHjzVf','Ladder\x20changed\x20to:\x20','table','console','9fubaBn','2571644phkFip','7997TMlakb','desc','965630mtpyvt','style','d1-switch','target','join-ladder-type','getElementById','Unknown\x20ladder\x20type:\x20','6DYhldF','position','Ladder\x20join:\x20D2\x20radio\x20found:','217554ZDnvZB','Ladder\x20join:\x20D1\x20radio\x20found:','ladder-join-prompt','uid','You\x20are\x20already\x20part\x20of\x20the\x20'];a0_0x1bbb=function(){return _0x2586e0;};return a0_0x1bbb();}a0_0x315921();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';function a0_0x3aa6(_0x353ac0,_0x5a8449){const _0x1542ea=a0_0x1bbb();return a0_0x3aa6=function(_0x315921,_0x4e6d5b){_0x315921=_0x315921-0x129;let _0x45e3f7=_0x1542ea[_0x315921];return _0x45e3f7;},a0_0x3aa6(_0x353ac0,_0x5a8449);}let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x3e7c10=a0_0x3aa6,_0x30d728=document['getElementById'](_0x3e7c10(0x136)),_0x55121e=document['getElementById'](_0x3e7c10(0x144));console['log'](_0x3e7c10(0x13f),!!_0x30d728),console[_0x3e7c10(0x15b)](_0x3e7c10(0x13d),!!_0x55121e);function _0x2e3498(){const _0x535ce0=_0x3e7c10;document['querySelectorAll'](_0x535ce0(0x12a))['forEach'](_0x1e80fa=>{_0x1e80fa['addEventListener']('change',_0x46c87a=>{const _0x27b4b4=a0_0x3aa6;_0x46c87a[_0x27b4b4(0x137)]['checked']&&(currentLadder=_0x46c87a['target']['value'],console['log'](_0x27b4b4(0x12d)+currentLadder),checkUserLadderStatus());});});}_0x2e3498();const _0x622e2a=document['getElementById']('join-ladder-button');_0x622e2a&&_0x622e2a['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x18849e=>{const _0x301e69=_0x3e7c10;if(_0x18849e)checkUserLadderStatus();else{const _0x2b36a4=document['getElementById'](_0x301e69(0x140));_0x2b36a4&&(_0x2b36a4['style'][_0x301e69(0x15a)]='none');}});});function getCollectionName(_0xa6bd0a){const _0xbdc0b5=a0_0x3aa6;switch(_0xa6bd0a?.['toUpperCase']()){case'D1':return _0xbdc0b5(0x152);case'D2':return'playersD2';case'D3':return _0xbdc0b5(0x14b);case _0xbdc0b5(0x147):case'DUO':return'playersDuos';case _0xbdc0b5(0x14c):return'playersCTF';default:console['warn'](_0xbdc0b5(0x13a)+_0xa6bd0a+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x51c6c8=a0_0x3aa6;console[_0x51c6c8(0x15b)]('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x2f27dd=auth['currentUser'],_0x47caef=document['getElementById'](_0x51c6c8(0x140)),_0x352c7f=document['getElementById'](_0x51c6c8(0x138)),_0x5b1c68=document[_0x51c6c8(0x139)]('tiny-join-button');if(!_0x2f27dd||!_0x2f27dd[_0x51c6c8(0x141)]||!_0x47caef||!_0x352c7f||!_0x5b1c68){if(_0x47caef)_0x47caef['style'][_0x51c6c8(0x15a)]=_0x51c6c8(0x150);if(_0x5b1c68)_0x5b1c68['style'][_0x51c6c8(0x15a)]=_0x51c6c8(0x150);return;}try{try{await _0x2f27dd['getIdToken'](![]);}catch(_0x31617e){console['error']('Authentication\x20verification\x20failed:',_0x31617e),_0x47caef['style']['display']='none',_0x5b1c68[_0x51c6c8(0x135)]['display']='none';return;}const _0x1a0f48=getCollectionName(currentLadder),_0x2ef0ef=doc(db,_0x1a0f48,_0x2f27dd[_0x51c6c8(0x141)]),_0x1e83fb=await getDoc(_0x2ef0ef);if(_0x1e83fb['exists']())_0x47caef['style']['display']='none',_0x5b1c68['style']['display']='none';else{_0x47caef['style']['display']='none',_0x5b1c68['style']['display']=_0x51c6c8(0x155),_0x352c7f[_0x51c6c8(0x151)]=currentLadder,_0x5b1c68['onclick']=()=>{const _0x1fd427=_0x51c6c8;_0x47caef['style'][_0x1fd427(0x15a)]===_0x1fd427(0x155)?_0x47caef[_0x1fd427(0x135)][_0x1fd427(0x15a)]=_0x1fd427(0x150):_0x47caef[_0x1fd427(0x135)]['display']=_0x1fd427(0x155);};const _0x127e5f=document['getElementById']('join-username-input'),_0x1ba434=document['getElementById'](_0x51c6c8(0x159));if(_0x127e5f)_0x127e5f[_0x51c6c8(0x153)]='';_0x1ba434&&(_0x1ba434['textContent']='',_0x1ba434[_0x51c6c8(0x129)]=_0x51c6c8(0x159));}}catch(_0x2c4530){console[_0x51c6c8(0x146)]('Error\x20checking\x20ladder\x20status:',_0x2c4530),_0x47caef[_0x51c6c8(0x135)]['display']='none',_0x5b1c68['style']['display']='none';}}async function handleJoinLadder(){const _0x47ddc1=a0_0x3aa6,_0x2fa102=auth[_0x47ddc1(0x12b)],_0x1207e6=document['getElementById']('join-ladder-button'),_0x59517d=document['getElementById']('ladder-join-status'),_0x1fa0c3=document['getElementById'](_0x47ddc1(0x154));if(!_0x2fa102||!_0x2fa102['uid']){_0x59517d[_0x47ddc1(0x151)]='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x59517d['className']='ladder-join-status\x20error';return;}try{await _0x2fa102['getIdToken'](!![]);}catch(_0x3ab50f){console['error']('Authentication\x20error:',_0x3ab50f),_0x59517d[_0x47ddc1(0x151)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x59517d['className']='ladder-join-status\x20error';return;}if(!_0x1fa0c3||!_0x1fa0c3[_0x47ddc1(0x153)]['trim']()){_0x59517d['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x59517d[_0x47ddc1(0x129)]='ladder-join-status\x20error';return;}try{_0x1207e6[_0x47ddc1(0x15d)]=!![],_0x59517d['textContent']='Verifying\x20username...',_0x59517d['className']='ladder-join-status\x20loading';let _0x290ac8='',_0x446d5f=null;const _0xeb0b0b=['players','playersD2','playersD3','playersDuos',_0x47ddc1(0x14a),'nonParticipants'];for(const _0x3542c0 of _0xeb0b0b){try{const _0x47e485=doc(db,_0x3542c0,_0x2fa102['uid']),_0x4f6640=await getDoc(_0x47e485);if(_0x4f6640[_0x47ddc1(0x149)]()){_0x446d5f=_0x4f6640['data']();if(_0x446d5f[_0x47ddc1(0x158)]){_0x290ac8=_0x446d5f['username'];break;}}}catch(_0x291782){console['error']('Error\x20checking\x20'+_0x3542c0+':',_0x291782);}}!_0x290ac8&&_0x2fa102[_0x47ddc1(0x15c)]&&(_0x290ac8=_0x2fa102['email']['split']('@')[0x0]);if(!_0x290ac8){_0x59517d[_0x47ddc1(0x151)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x59517d['className']='ladder-join-status\x20error',_0x1207e6['disabled']=![];return;}const _0x4870bb=_0x1fa0c3['value']['trim']();if(_0x290ac8&&_0x4870bb['toLowerCase']()!==_0x290ac8['toLowerCase']()){_0x59517d['textContent']=_0x47ddc1(0x148)+_0x290ac8+'\x22\x20to\x20confirm.',_0x59517d[_0x47ddc1(0x129)]='ladder-join-status\x20error',_0x1207e6['disabled']=![];return;}_0x59517d['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0xb218e1=getCollectionName(currentLadder),_0x3a8365=doc(db,_0xb218e1,_0x2fa102[_0x47ddc1(0x141)]),_0xfb4551=await getDoc(_0x3a8365);if(_0xfb4551['exists']()){_0x59517d[_0x47ddc1(0x151)]=_0x47ddc1(0x142)+currentLadder+'\x20ladder.',_0x59517d['className']='ladder-join-status\x20error',_0x1207e6['disabled']=![];return;}try{await _0x2fa102['getIdToken'](!![]);}catch(_0x120792){_0x59517d['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x59517d['className']=_0x47ddc1(0x145),_0x1207e6['disabled']=![];return;}const _0xd5c11=_0x290ac8,_0x2879ff=collection(db,_0xb218e1),_0x1ba9b8=query(_0x2879ff,orderBy('position',_0x47ddc1(0x133)),limit(0x1)),_0x14d14f=await getDocs(_0x1ba9b8);let _0x52d1c9=0x1;if(!_0x14d14f['empty']){const _0x3451cc=_0x14d14f['docs'][0x0]['data']();_0x52d1c9=(_0x3451cc[_0x47ddc1(0x13c)]||0x0)+0x1;}const _0xf9555={'username':_0xd5c11,'email':_0x2fa102[_0x47ddc1(0x15c)],'eloRating':0x4b0,'position':_0x52d1c9,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x3a8365,_0xf9555),currentLadder==='DUOS'?_0x59517d['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x59517d['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x59517d['className']='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x2d237d){console['error'](_0x47ddc1(0x14f),_0x2d237d),_0x59517d[_0x47ddc1(0x151)]='Error\x20joining\x20ladder:\x20'+_0x2d237d['message'],_0x59517d['className']=_0x47ddc1(0x145),_0x1207e6['disabled']=![];}}