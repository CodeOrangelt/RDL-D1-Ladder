const a6_0x5794e5=a6_0x4716,a6_0x1ee7f2=(function(){let _0x4b574f=!![];return function(_0x536d09,_0x40fa6b){const _0x53595a=_0x4b574f?function(){if(_0x40fa6b){const _0x12fa0a=_0x40fa6b['apply'](_0x536d09,arguments);return _0x40fa6b=null,_0x12fa0a;}}:function(){};return _0x4b574f=![],_0x53595a;};}()),a6_0x5b091c=a6_0x1ee7f2(this,function(){const _0x57674d=a6_0x4716;let _0x5647a3;try{const _0x1910c7=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5647a3=_0x1910c7();}catch(_0x4e0c6a){_0x5647a3=window;}const _0x17538b=_0x5647a3['console']=_0x5647a3[_0x57674d(0x19a)]||{},_0x3e7df3=['log',_0x57674d(0x157),'info','error','exception',_0x57674d(0x193),'trace'];for(let _0x2a974a=0x0;_0x2a974a<_0x3e7df3['length'];_0x2a974a++){const _0x36c4a9=a6_0x1ee7f2['constructor']['prototype']['bind'](a6_0x1ee7f2),_0x8632b7=_0x3e7df3[_0x2a974a],_0x6fab67=_0x17538b[_0x8632b7]||_0x36c4a9;_0x36c4a9['__proto__']=a6_0x1ee7f2['bind'](a6_0x1ee7f2),_0x36c4a9['toString']=_0x6fab67['toString']['bind'](_0x6fab67),_0x17538b[_0x8632b7]=_0x36c4a9;}});a6_0x5b091c();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date(a6_0x5794e5(0x133))['getTime']()}];function isUsernameMuted(_0x53e1f1,_0x2c8d5c){const _0xb0540e=a6_0x5794e5;if(!_0x53e1f1)return![];const _0x391101=mutedUsers['find'](_0x1c0040=>_0x1c0040[_0xb0540e(0x178)]===_0x53e1f1);if(!_0x391101)return![];if(!_0x2c8d5c)return!![];const _0x46b384=_0x2c8d5c instanceof Date?_0x2c8d5c[_0xb0540e(0x141)]():_0x2c8d5c['seconds']?_0x2c8d5c['seconds']*0x3e8:Date['now']();return _0x46b384>=_0x391101['muteFromDate'];}function filterComment(_0x2e9b2e,_0x16b49e,_0x34af34){if(!_0x2e9b2e)return'-';if(isUsernameMuted(_0x16b49e,_0x34af34))return'Muted.';return _0x2e9b2e;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0xc4e0a1,_0x343a9a,_0x3c2c37){const _0x46ce99=a6_0x5794e5,_0xec4e04='u:'+(_0x3c2c37[_0x46ce99(0x137)]||'');return'previewCache_'+_0xc4e0a1+'_p'+_0x343a9a+'_'+_0xec4e04;}function getCachedPage(_0x4bbae7){const _0x25c229=a6_0x5794e5,_0x3fb50c=sessionStorage['getItem'](_0x4bbae7);if(_0x3fb50c)try{return JSON['parse'](_0x3fb50c);}catch(_0x230fe7){return console[_0x25c229(0x135)]('Failed\x20to\x20parse\x20cache:',_0x230fe7),sessionStorage['removeItem'](_0x4bbae7),null;}return null;}function cachePage(_0x12ca0c,_0x7c979b){const _0x5ee328=a6_0x5794e5;try{sessionStorage[_0x5ee328(0x17e)](_0x12ca0c,JSON[_0x5ee328(0x1a2)](_0x7c979b));}catch(_0x167122){console['error']('Failed\x20to\x20cache\x20data:',_0x167122);}}function getEloColor(_0x3e9f38){const _0xa9cdee=a6_0x5794e5,_0x2c5906=Number(_0x3e9f38);if(_0x2c5906>=0x7d0)return'#50C878';else{if(_0x2c5906>=0x708)return'#FFD700';else{if(_0x2c5906>=0x640)return _0xa9cdee(0x14d);else{if(_0x2c5906>=0x578)return'#CD7F32';else return'#808080';}}}}function formatDate(_0x11e97e,_0x4ab68f=![]){if(!_0x11e97e||!_0x11e97e['seconds'])return'N/A';const _0x33c013=new Date(_0x11e97e['seconds']*0x3e8);return _0x4ab68f?_0x33c013['toLocaleString']():_0x33c013['toLocaleDateString']();}function truncateComment(_0xb5c00e,_0x28a99c=0x1e){const _0x1c94f2=a6_0x5794e5;if(!_0xb5c00e)return'-';if(_0xb5c00e['length']<=_0x28a99c)return _0xb5c00e;return _0xb5c00e[_0x1c94f2(0x12b)](0x0,_0x28a99c)+'...';}function formatCommentDate(_0x9f0feb){const _0x343f34=a6_0x5794e5;if(!_0x9f0feb||!_0x9f0feb[_0x343f34(0x113)])return'';const _0x35982b=new Date(_0x9f0feb['seconds']*0x3e8),_0x583a4c=new Date(),_0x3415db=Math['abs'](_0x583a4c-_0x35982b),_0x1b7ddd=Math['floor'](_0x3415db/(0x3e8*0x3c*0x3c*0x18));if(_0x1b7ddd===0x0)return'Today';else{if(_0x1b7ddd===0x1)return'Yesterday';else return _0x1b7ddd<0x7?_0x1b7ddd+'\x20days\x20ago':_0x35982b[_0x343f34(0x151)]();}}function setLoadingIndicator(_0x25c2cf){const _0x43c004=a6_0x5794e5,_0x1e0721=document[_0x43c004(0x17f)](_0x43c004(0x1a9));if(_0x1e0721)_0x1e0721['style'][_0x43c004(0x123)]=_0x25c2cf?_0x43c004(0x19c):'none';}export function updatePreviewLadderModeUI(){const _0x3ea409=a6_0x5794e5,_0x25be1c=document['getElementById']('preview-ladder-mode'),_0x5b9353=document['getElementById']('preview-d1-button'),_0x4410b8=document['getElementById'](_0x3ea409(0x14a)),_0x17339d=document[_0x3ea409(0x17f)](_0x3ea409(0x1ad));if(_0x25be1c)_0x25be1c['textContent']=previewState['currentMode'];if(_0x5b9353)_0x5b9353[_0x3ea409(0x12d)][_0x3ea409(0x131)]('active',previewState['currentMode']==='D1');if(_0x4410b8)_0x4410b8[_0x3ea409(0x12d)]['toggle']('active',previewState[_0x3ea409(0x134)]==='D2');if(_0x17339d)_0x17339d['classList']['toggle']('active',previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x1425f0){const _0x33a0db=a6_0x5794e5,_0x30d0a5=document[_0x33a0db(0x17f)]('previewPrevPage'),_0x452686=document['getElementById'](_0x33a0db(0x136)),_0x42a7ad=document['getElementById'](_0x33a0db(0x153));if(!_0x30d0a5||!_0x452686||!_0x42a7ad)return;_0x42a7ad[_0x33a0db(0x14e)]='Page\x20'+previewState['currentPage'],_0x30d0a5[_0x33a0db(0x146)]=previewState[_0x33a0db(0xfc)]<=0x1,_0x452686[_0x33a0db(0x146)]=!_0x1425f0;}function setPreviewLoadingState(_0x406b70){const _0x3379c6=a6_0x5794e5;previewState['isLoading']=_0x406b70,setLoadingIndicator(_0x406b70);const _0x1c238b=document['getElementById']('recent-matches-preview'),_0x272f20=_0x1c238b?_0x1c238b['querySelector'](_0x3379c6(0x12f)):null,_0x2a8868=document['getElementById']('previewPrevPage'),_0x2903aa=document['getElementById']('previewNextPage'),_0x486ae3=document['getElementById']('preview-d1-button'),_0x1a0f41=document['getElementById']('preview-d2-button'),_0x9535d0=document['getElementById'](_0x3379c6(0x185)),_0x3ac73f=document['getElementById'](_0x3379c6(0x168));if(_0x272f20&&!_0x406b70)_0x272f20['style']['display']=_0x3379c6(0x11f);else _0x272f20&&_0x406b70&&(_0x272f20[_0x3379c6(0x183)]['display']='block');!_0x406b70&&_0x1c238b&&!_0x1c238b['querySelector']('.match-card')&&!_0x1c238b['querySelector'](_0x3379c6(0x142))&&(_0x1c238b[_0x3379c6(0x1a7)]=_0x3379c6(0x18c)+(previewState[_0x3379c6(0x137)]?_0x3379c6(0x17d):'')+_0x3379c6(0x17a));if(_0x2a8868)_0x2a8868['disabled']=_0x406b70||previewState['currentPage']<=0x1;if(_0x2903aa)_0x2903aa[_0x3379c6(0x146)]=_0x406b70;if(_0x486ae3)_0x486ae3[_0x3379c6(0x146)]=_0x406b70;if(_0x1a0f41)_0x1a0f41['disabled']=_0x406b70;if(_0x9535d0)_0x9535d0['disabled']=_0x406b70;if(_0x3ac73f)_0x3ac73f['disabled']=_0x406b70;}function applyClientFilters(_0x46beb7){const _0x2f2c4d=a6_0x5794e5;if(!previewState['filterUsername'])return _0x46beb7;const _0x1e1ec0=previewState[_0x2f2c4d(0x137)][_0x2f2c4d(0x110)]();return _0x46beb7['filter'](_0x542d32=>{const _0x1e5299=_0x2f2c4d,_0x4953ae=(_0x542d32['winnerUsername']||'')['toLowerCase'](),_0x18d63d=(_0x542d32['loserUsername']||'')['toLowerCase']();return _0x4953ae[_0x1e5299(0x13f)](_0x1e1ec0)||_0x18d63d['includes'](_0x1e1ec0);});}function applyEnhancedClientFilters(_0x404619){if(!hasEnhancedFilters())return _0x404619;return _0x404619['filter'](_0x58f8a8=>{const _0x49325f=a6_0x4716;if(previewState['enhancedFilters']['pilots']){const _0x277fbd=previewState[_0x49325f(0x170)][_0x49325f(0x12c)][_0x49325f(0x110)](),_0x1d27ca=(_0x58f8a8['winnerUsername']||'')['toLowerCase'](),_0x3460b4=(_0x58f8a8[_0x49325f(0x161)]||'')[_0x49325f(0x110)]();if(!_0x1d27ca['includes'](_0x277fbd)&&!_0x3460b4['includes'](_0x277fbd))return![];}if(previewState['enhancedFilters']['levels']){const _0x5bf47e=previewState['enhancedFilters']['levels'][_0x49325f(0x110)](),_0x2f25be=(_0x58f8a8['mapPlayed']||'')['toLowerCase']();if(!_0x2f25be[_0x49325f(0x13f)](_0x5bf47e))return![];}if(previewState['enhancedFilters']['subgames']['length']>0x0){const _0x245b26=_0x58f8a8['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters'][_0x49325f(0x119)]['includes'](_0x245b26))return![];}return!![];});}function hasEnhancedFilters(){const _0x217185=a6_0x5794e5;return previewState['enhancedFilters'][_0x217185(0x12c)]||previewState[_0x217185(0x170)][_0x217185(0x181)]||previewState['enhancedFilters'][_0x217185(0x119)][_0x217185(0x158)]>0x0;}function clearEnhancedFilters(){const _0x545230=a6_0x5794e5;previewState[_0x545230(0x170)]={'pilots':'','levels':'','subgames':[]},document[_0x545230(0x17f)]('filter-pilots')['value']='',document['getElementById'](_0x545230(0x107))['value']='';const _0x54b06d=document['getElementById']('filter-subgames');for(let _0x578476 of _0x54b06d[_0x545230(0x197)]){_0x578476['selected']=![];}}function jumpToPage(_0x29fb0f){const _0x181610=a6_0x5794e5,_0x5b3c71=document['getElementById']('jump-to-page'),_0x354fec=previewState[_0x181610(0xfc)];let _0x2c12bd=_0x354fec;switch(_0x29fb0f){case'start':_0x2c12bd=0x1;break;case _0x181610(0x130):_0x2c12bd=Math['max'](_0x354fec+0xa,previewState[_0x181610(0x174)]||_0x354fec+0xa);break;case'+1':_0x2c12bd=_0x354fec+0x1;break;case'+5':_0x2c12bd=_0x354fec+0x5;break;case'+10':_0x2c12bd=_0x354fec+0xa;break;case'-1':_0x2c12bd=Math['max'](0x1,_0x354fec-0x1);break;case'-5':_0x2c12bd=Math['max'](0x1,_0x354fec-0x5);break;case'-10':_0x2c12bd=Math[_0x181610(0x196)](0x1,_0x354fec-0xa);break;case'input':const _0x35a93b=parseInt(_0x5b3c71[_0x181610(0x12a)]);_0x35a93b&&_0x35a93b>0x0&&(_0x2c12bd=_0x35a93b,_0x5b3c71['value']='');break;}_0x2c12bd!==_0x354fec&&_0x2c12bd>0x0&&(previewState[_0x181610(0xfc)]=_0x2c12bd,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x557bcb='current'){const _0x27542c=a6_0x5794e5,_0x7e3159=document['getElementById'](_0x27542c(0x1aa)),_0x27ff20=document['getElementById']('match-card-template');if(previewState[_0x27542c(0x13b)]||!_0x7e3159||!_0x27ff20)return;_0x557bcb==='current'&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)[_0x27542c(0x14f)](_0x209446=>{const _0x3d2e89=_0x27542c;_0x209446['includes']('previewCache_'+previewState[_0x3d2e89(0x134)])&&sessionStorage['removeItem'](_0x209446);}));let _0x541403=previewState[_0x27542c(0xfc)];if(_0x557bcb===_0x27542c(0x11b))_0x541403++;else{if(_0x557bcb===_0x27542c(0xfe))_0x541403--;else _0x557bcb==='current'&&(_0x541403=0x1,previewState[_0x27542c(0x125)]=null,previewState['lastVisible']=null);}if(_0x541403<0x1)_0x541403=0x1;const _0x4a749a=previewState['currentPage'];previewState[_0x27542c(0xfc)]=_0x541403,updatePreviewPaginationControls(!![]);const _0x41d428={'filterUsername':previewState[_0x27542c(0x137)]},_0x256d70=getCacheKey(previewState['currentMode'],_0x541403,_0x41d428),_0x531758=_0x557bcb!=='current'?getCachedPage(_0x256d70):null;if(_0x531758){console[_0x27542c(0x14b)]('Rendering\x20page\x20'+_0x541403+_0x27542c(0x152)),setPreviewLoadingState(!![]),renderMatchCards(_0x531758['docsData']),updatePreviewPaginationControls(_0x531758[_0x27542c(0x16c)]),setPreviewLoadingState(![]);return;}console[_0x27542c(0x14b)]('Cache\x20miss\x20for\x20page\x20'+_0x541403+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x7e3159['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x31352d=previewState['currentMode']==='D1'?'approvedMatches':previewState['currentMode']==='D2'?_0x27542c(0x180):'approvedMatchesD3',_0x410bec=previewState['currentMode']==='D1'?'createdAt':'approvedAt';try{const _0x287caa=collection(window['db'],_0x31352d);let _0x4863dd=[orderBy(_0x410bec,'desc')];if(_0x541403===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x4863dd['push'](limit(previewState['matchesPerPage']));else{if(_0x557bcb==='next'&&previewState[_0x27542c(0x179)])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x4863dd['push'](startAfter(previewState['lastVisible'])),_0x4863dd['push'](limit(previewState['matchesPerPage']));else{console[_0x27542c(0x14b)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x42c2ea=_0x541403*previewState['matchesPerPage'];_0x4863dd[_0x27542c(0x132)](limit(_0x42c2ea));}}const _0x4fd0c7=query(_0x287caa,..._0x4863dd),_0x1f5f19=await getDocs(_0x4fd0c7);let _0x1a4d18=_0x1f5f19[_0x27542c(0x194)];if(_0x541403>0x1&&_0x557bcb!==_0x27542c(0x11b)){const _0x33e74c=(_0x541403-0x1)*previewState[_0x27542c(0x184)];_0x1a4d18=_0x1a4d18['slice'](_0x33e74c,_0x33e74c+previewState['matchesPerPage']);}if(_0x1a4d18['length']===0x0){console[_0x27542c(0x14b)](_0x27542c(0x10c));_0x557bcb==='next'&&(previewState['currentPage']=_0x4a749a,updatePreviewPaginationControls(![]));_0x7e3159[_0x27542c(0x1a7)]='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?_0x27542c(0x17d):'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x1a4d18[0x0],previewState['lastVisible']=_0x1a4d18[_0x1a4d18['length']-0x1];const _0x50ef90=_0x1a4d18['map'](_0x17ed8b=>({'id':_0x17ed8b['id'],..._0x17ed8b[_0x27542c(0x122)]()}));let _0x29c287=![];if(_0x1a4d18['length']===previewState['matchesPerPage']){const _0x3c3868=query(_0x287caa,orderBy(_0x410bec,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x4c91cf=await getDocs(_0x3c3868);_0x29c287=!_0x4c91cf['empty'];}const _0x395446=applyClientFilters(_0x50ef90),_0xf10930={'docsData':_0x50ef90,'hasNextPage':_0x29c287};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x41d428),_0xf10930);if(_0x541403>0x1&&_0x557bcb!==_0x27542c(0x11b))for(let _0x385665=0x1;_0x385665<_0x541403;_0x385665++){const _0x47b485=(_0x385665-0x1)*previewState['matchesPerPage'],_0x3e8eda=_0x47b485+previewState['matchesPerPage'],_0x185462=_0x1f5f19['docs']['slice'](_0x47b485,_0x3e8eda);if(_0x185462['length']>0x0){const _0x18bb76=_0x185462[_0x27542c(0x1a0)](_0x43362b=>({'id':_0x43362b['id'],..._0x43362b[_0x27542c(0x122)]()})),_0x1bd184=!![];cachePage(getCacheKey(previewState['currentMode'],_0x385665,_0x41d428),{'docsData':_0x18bb76,'hasNextPage':_0x1bd184}),console['log']('Cached\x20intermediary\x20page\x20'+_0x385665);}}_0x395446['length']===0x0&&previewState['filterUsername']?_0x7e3159[_0x27542c(0x1a7)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState[_0x27542c(0x137)]+'\x22</div>':renderMatchCards(_0x395446),updatePreviewPaginationControls(_0x29c287);}catch(_0x126376){console[_0x27542c(0x135)]('Error\x20fetching\x20'+previewState['currentMode']+'\x20matches:',_0x126376),_0x7e3159['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x126376['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x4a749a;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x158488){const _0x2183fe=a6_0x5794e5,_0x36e9c8=document['getElementById']('recent-matches-preview'),_0x3833bc=document['getElementById']('match-card-template');if(!_0x36e9c8||!_0x3833bc)return;!_0x36e9c8['querySelector'](_0x2183fe(0x142))&&(_0x36e9c8['innerHTML']='');if(!_0x158488||_0x158488[_0x2183fe(0x158)]===0x0){if(!_0x36e9c8['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x5532fd=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';_0x36e9c8['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x5532fd+'.</div>';}return;}const _0x4e8310=applyEnhancedClientFilters(_0x158488);if(_0x4e8310[_0x2183fe(0x158)]===0x0){_0x36e9c8['innerHTML']=_0x2183fe(0x167);return;}const _0x13c63d=_0x4e8310['map'](_0x592d35=>getAllCommentsForMatch(_0x592d35['id']));let _0x426e17=[];try{_0x426e17=await Promise['all'](_0x13c63d);}catch(_0x21125c){console[_0x2183fe(0x135)]('Error\x20fetching\x20comments\x20batch:',_0x21125c),_0x426e17=_0x4e8310[_0x2183fe(0x1a0)](()=>[]);}const _0x1aaee2={};_0x426e17[_0x2183fe(0x14f)]((_0x306bb4,_0xd12849)=>{_0x1aaee2[_0x4e8310[_0xd12849]['id']]=_0x306bb4||[];}),_0x4e8310[_0x2183fe(0x14f)](_0x55e509=>{const _0x533b62=_0x2183fe,_0x2cd448=_0x3833bc['content']['cloneNode'](!![]),_0x5d0e56=_0x2cd448[_0x533b62(0x1a1)](_0x533b62(0x18d)),_0x444bf1=_0x2cd448['querySelector']('.match-card'),_0x2036b5=getEloRankClass(_0x55e509[_0x533b62(0x188)]);_0x444bf1[_0x533b62(0x12d)]['add'](_0x533b62(0x1ac)+_0x2036b5),_0x444bf1['querySelector'](_0x533b62(0x143))['textContent']=_0x55e509[_0x533b62(0x18a)]||'Unknown\x20Map',_0x444bf1[_0x533b62(0x1a1)]('.match-date')['textContent']=formatDate(_0x55e509['approvedAt']||_0x55e509['createdAt']);const _0x4eba78=_0x444bf1[_0x533b62(0x1a1)]('.player.winner\x20.player-name');_0x4eba78['textContent']=_0x55e509[_0x533b62(0x11a)]||_0x533b62(0x138),_0x4eba78['style']['color']=getEloColor(_0x55e509['winnerOldElo']),_0x444bf1[_0x533b62(0x1a1)]('.player.winner\x20.player-score')[_0x533b62(0x14e)]=_0x55e509['winnerScore']??0x0;const _0x91fcf0=_0x444bf1['querySelector']('.player.winner\x20.player-suicides'),_0x4a771b=_0x55e509[_0x533b62(0x144)]||0x0;_0x91fcf0['textContent']=_0x533b62(0x199)+_0x4a771b;const _0x5910d9=_0x444bf1['querySelector']('.player.loser\x20.player-name');_0x5910d9[_0x533b62(0x14e)]=_0x55e509['loserUsername']||'Unknown',_0x5910d9['style']['color']=getEloColor(_0x55e509[_0x533b62(0x160)]),_0x444bf1['querySelector']('.player.loser\x20.player-score')[_0x533b62(0x14e)]=_0x55e509['loserScore']??0x0;const _0x2fc56f=_0x444bf1['querySelector']('.player.loser\x20.player-suicides'),_0x3560ac=_0x55e509[_0x533b62(0x124)]||0x0;_0x2fc56f['textContent']='S:\x20'+_0x3560ac;const _0xa42cc9=_0x444bf1['querySelector']('.match-subgame');if(_0xa42cc9){if(_0x55e509['subgameType']&&_0x55e509['subgameType'][_0x533b62(0x10a)]()!==''){_0xa42cc9['textContent']=_0x55e509['subgameType'],_0xa42cc9['style'][_0x533b62(0x123)]='block';const _0x4e2913=getSubgameClass(_0x55e509[_0x533b62(0x108)]);_0x4e2913&&_0xa42cc9['classList']['add'](_0x4e2913);}else _0xa42cc9['textContent']='Standard\x20Match',_0xa42cc9['style']['display']=_0x533b62(0x19c),_0xa42cc9[_0x533b62(0x183)]['opacity']=_0x533b62(0x147);}const _0x5cf3d6=_0x444bf1['querySelector']('.comment.winner-comment'),_0x4b0c79=_0x444bf1[_0x533b62(0x1a1)]('.comment.loser-comment'),_0x51fc20=_0x55e509['winnerComment']||'',_0x5175a2=_0x55e509[_0x533b62(0x18f)]||'',_0x3e9e6c=_0x55e509[_0x533b62(0x121)]||_0x55e509['createdAt'],_0xb204fc=filterComment(_0x51fc20,_0x55e509['winnerUsername'],_0x3e9e6c),_0x65935b=filterComment(_0x5175a2,_0x55e509[_0x533b62(0x161)],_0x3e9e6c);_0x5cf3d6['textContent']='\x22'+truncateComment(_0x51fc20)+'\x22',_0x4b0c79[_0x533b62(0x14e)]='\x22'+truncateComment(_0x5175a2)+'\x22';_0x51fc20&&!isUsernameMuted(_0x55e509['winnerUsername'],_0x3e9e6c)?_0x5cf3d6['onclick']=()=>showPreviewCommentPopup(_0xb204fc,_0x55e509['winnerUsername']||_0x533b62(0x16f),getEloColor(_0x55e509['winnerOldElo'])):(_0x5cf3d6[_0x533b62(0x14e)]=_0xb204fc===_0x533b62(0x10f)?'Muted.':'-',_0x5cf3d6['style']['cursor']='default',_0x5cf3d6['onclick']=null);_0x5175a2&&!isUsernameMuted(_0x55e509[_0x533b62(0x161)])?_0x4b0c79['onclick']=()=>showPreviewCommentPopup(_0x65935b,_0x55e509[_0x533b62(0x161)]||'Loser',getEloColor(_0x55e509[_0x533b62(0x160)])):(_0x4b0c79['textContent']=_0x65935b===_0x533b62(0x10f)?'Muted.':'-',_0x4b0c79[_0x533b62(0x183)]['cursor']=_0x533b62(0x154),_0x4b0c79[_0x533b62(0x120)]=null);const _0x228061=_0x5d0e56?.['querySelector']('.community-comments-section');if(!_0x228061)console['warn'](_0x533b62(0x1ae));else{const _0xac35f6=_0x228061[_0x533b62(0x1a1)]('.comments-container'),_0x55324d=_0xac35f6?.['querySelector']('.no-comments-message'),_0x252eb5=_0x228061['querySelector']('.add-comment-btn');if(_0xac35f6){while(_0xac35f6['firstChild']&&_0xac35f6[_0x533b62(0x109)]!==_0x55324d){_0xac35f6['removeChild'](_0xac35f6[_0x533b62(0x109)]);}_0x252eb5&&_0x252eb5['addEventListener']('click',()=>{showAddCommentPopup(_0x55e509['id']);});const _0x3c8860=_0x1aaee2[_0x55e509['id']]||[];if(_0x3c8860['length']>0x0){if(_0x55324d)_0x55324d['style']['display']='none';const _0x26d5ac=(_0x574bfd,_0x1440cb)=>{const _0x4e0309=_0x533b62,_0x1ae8e4=_0x574bfd[_0x4e0309(0x118)]('\x20');if(_0x1ae8e4['length']<=_0x1440cb)return _0x574bfd;return _0x1ae8e4['slice'](0x0,_0x1440cb)['join']('\x20')+'...';};_0x3c8860['forEach'](_0x1142d9=>{const _0x59b37b=_0x533b62,_0x23e5dd=document[_0x59b37b(0x13e)]('div');if(_0x1142d9[_0x59b37b(0x15c)]==='demo'){_0x23e5dd['className']='demo-link',_0x23e5dd['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x1142d9[_0x59b37b(0x12e)]+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x1142d9['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x1142d9[_0x59b37b(0x17b)]||_0x59b37b(0x1af))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x279ce6=window[_0x59b37b(0x166)]['currentUser'],_0x3b7145=_0x279ce6&&_0x1142d9['userId']===_0x279ce6[_0x59b37b(0x139)];if(_0x3b7145){const _0x5d74cb=document['createElement']('button');_0x5d74cb['className']=_0x59b37b(0x15f),_0x5d74cb[_0x59b37b(0x1a7)]='×',_0x5d74cb['setAttribute'](_0x59b37b(0x173),_0x59b37b(0x17c)),_0x5d74cb['addEventListener']('click',_0x39b65b=>{_0x39b65b['preventDefault'](),_0x39b65b['stopPropagation'](),deleteComment(_0x1142d9['id'],_0x23e5dd);}),_0x23e5dd[_0x59b37b(0x11d)](_0x5d74cb);}}else{_0x23e5dd['className']='comment-item';const _0x138d6e=isUsernameMuted(_0x1142d9[_0x59b37b(0x178)],_0x1142d9['timestamp']),_0x2660c5=_0x138d6e?_0x59b37b(0x10f):_0x26d5ac(_0x1142d9['text']||'',0xf),_0x4097f9=_0x1142d9['username']||'Anonymous',_0x4402d8=window['auth']['currentUser'],_0x24b079=_0x4402d8&&_0x1142d9['userId']===_0x4402d8[_0x59b37b(0x139)];let _0x523ed4='';_0x24b079&&(_0x523ed4=_0x59b37b(0x19f));_0x23e5dd['innerHTML']=_0x523ed4+_0x59b37b(0x1a6)+_0x4097f9+':</strong>\x20\x22'+_0x2660c5+'\x22';if(_0x24b079){const _0x3944b6=_0x23e5dd[_0x59b37b(0x1a1)]('.delete-comment-btn');_0x3944b6&&_0x3944b6['addEventListener'](_0x59b37b(0x1a8),_0x1599e1=>{const _0x5d215c=_0x59b37b;_0x1599e1[_0x5d215c(0x129)](),deleteComment(_0x1142d9['id'],_0x23e5dd);});}!_0x138d6e?_0x23e5dd['addEventListener']('click',()=>{showFullCommentLightbox(_0x1142d9);}):_0x23e5dd['style']['cursor']='default';}_0xac35f6['insertBefore'](_0x23e5dd,_0xac35f6['firstChild']);});}else{if(_0x55324d)_0x55324d[_0x533b62(0x183)][_0x533b62(0x123)]=_0x533b62(0x19c);}}}const _0x42c07e=_0x444bf1['querySelector']('.match-demo-links');if(_0x42c07e){const _0x5bba27=_0x444bf1['querySelector'](_0x533b62(0x172)),_0x4380a0=_0x444bf1['querySelector']('.loser-demo-link'),_0x5f54bd=_0x55e509['winnerDemoLink']||null,_0x26d9a3=_0x55e509['loserDemoLink']||_0x55e509['demoLink']||null;console[_0x533b62(0x14b)]('Match\x20'+_0x55e509['id']+_0x533b62(0x100),{'winner':_0x5f54bd,'loser':_0x26d9a3}),_0x5bba27&&(_0x5f54bd?(_0x5bba27[_0x533b62(0x117)]=_0x5f54bd,_0x5bba27[_0x533b62(0x183)]['display']='flex',_0x5bba27[_0x533b62(0x1a4)]=_0x55e509['winnerUsername']+'\x27s\x20Demo'):_0x5bba27['style'][_0x533b62(0x123)]=_0x533b62(0x11f)),_0x4380a0&&(_0x26d9a3?(_0x4380a0[_0x533b62(0x117)]=_0x26d9a3,_0x4380a0[_0x533b62(0x183)]['display']='flex',_0x4380a0[_0x533b62(0x1a4)]=_0x55e509['loserUsername']+_0x533b62(0x18e)):_0x4380a0['style'][_0x533b62(0x123)]='none'),_0x5f54bd&&_0x5bba27||_0x26d9a3&&_0x4380a0?_0x42c07e['style']['display']=_0x533b62(0x156):_0x42c07e[_0x533b62(0x183)]['display']=_0x533b62(0x11f);}_0x36e9c8['appendChild'](_0x2cd448);});}function getSubgameClass(_0x48a117){const _0x4d0781=a6_0x5794e5,_0x4c9c1b={'Fusion\x20Match':_0x4d0781(0x15b),'≥6\x20Missiles':_0x4d0781(0x140),'≥6\x20missiles':_0x4d0781(0x140),'Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':_0x4d0781(0xff),'Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x4c9c1b[_0x48a117]||'';}async function deleteComment(_0x482222,_0x5714f3){const _0x13713e=a6_0x5794e5,_0x369cd7=window['auth']['currentUser'];if(!_0x369cd7){alert(_0x13713e(0x13c));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x215deb=doc(window['db'],'matchComments',_0x482222),_0x297c43=await getDoc(_0x215deb);if(!_0x297c43['exists']()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x7f50f7=_0x297c43['data']();if(_0x7f50f7['userId']!==_0x369cd7['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x215deb);if(_0x5714f3&&_0x5714f3[_0x13713e(0x1ab)]){_0x5714f3['parentNode']['removeChild'](_0x5714f3);const _0x48d1f9=_0x5714f3[_0x13713e(0x169)]('.comments-container');if(_0x48d1f9&&!_0x48d1f9['querySelector']('.comment-item')){const _0x292249=_0x48d1f9['querySelector']('.no-comments-message');if(_0x292249)_0x292249[_0x13713e(0x183)]['display']=_0x13713e(0x19c);}}console[_0x13713e(0x14b)]('Comment\x20deleted\x20successfully');}catch(_0x2249b4){console['error'](_0x13713e(0x149),_0x2249b4),alert(_0x13713e(0x19e)+_0x2249b4['message']);}}async function getAllCommentsForMatch(_0x418e46){const _0x2ee66b=a6_0x5794e5;if(!_0x418e46)return[];try{const _0x55a5c7=collection(window['db'],'matchComments'),_0x3c00d1=query(_0x55a5c7,where('matchId','==',_0x418e46),orderBy('timestamp','desc')),_0x2f8154=await getDocs(_0x3c00d1);if(_0x2f8154[_0x2ee66b(0x159)])return[];return _0x2f8154['docs']['map'](_0x1c7953=>({'id':_0x1c7953['id'],..._0x1c7953[_0x2ee66b(0x122)]()}));}catch(_0x1005f7){return console['error'](_0x2ee66b(0x192),_0x1005f7),[];}}async function submitComment(_0x58975e){const _0x2d288c=a6_0x5794e5;_0x58975e['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const _0x4ff34a=window['auth'][_0x2d288c(0x111)];if(!_0x4ff34a){alert(_0x2d288c(0x171));return;}const _0x75fc79=document['getElementById']('commentMatchId')?.[_0x2d288c(0x12a)],_0x4a4ba9=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x75fc79||!_0x4a4ba9){alert(_0x2d288c(0x187));return;}const _0x4b8ddf=_0x4a4ba9['split'](/\s+/)['filter'](_0x18f5e8=>_0x18f5e8['length']>0x0)['length'];if(_0x4b8ddf>0xf){alert(_0x2d288c(0x16b));return;}const _0xd729a=document[_0x2d288c(0x1a1)](_0x2d288c(0x191));_0xd729a&&(_0xd729a['disabled']=!![],_0xd729a['textContent']=_0x2d288c(0x16d));try{let _0x24d0c9=_0x2d288c(0x175);try{const _0x392c9b=doc(window['db'],_0x2d288c(0x10b),_0x4ff34a['uid']),_0x35b17d=await getDoc(_0x392c9b);if(_0x35b17d['exists']()){const _0xddd733=_0x35b17d['data']();_0xddd733['username']&&(_0x24d0c9=_0xddd733['username']);}_0x24d0c9==='Anonymous'&&_0x4ff34a['displayName']&&(_0x24d0c9=_0x4ff34a['displayName']);}catch(_0x42f2c9){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x42f2c9),_0x4ff34a['displayName']&&(_0x24d0c9=_0x4ff34a['displayName']);}const _0x21fabd={'matchId':_0x75fc79,'userId':_0x4ff34a['uid'],'username':_0x24d0c9,'text':_0x4a4ba9,'timestamp':serverTimestamp()};console[_0x2d288c(0x14b)](_0x2d288c(0x106),_0x24d0c9);const _0x59a5c0=collection(window['db'],_0x2d288c(0x189));await addDoc(_0x59a5c0,_0x21fabd),console[_0x2d288c(0x14b)]('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x540772){console[_0x2d288c(0x135)]('Error\x20submitting\x20comment:',_0x540772),alert('Failed\x20to\x20add\x20comment:\x20'+_0x540772['message']),_0xd729a&&(_0xd729a[_0x2d288c(0x146)]=![],_0xd729a['textContent']='Submit');}}function closeAddCommentPopup(){const _0x5b53e3=a6_0x5794e5,_0x46ac12=document['getElementById']('commentAddPopup'),_0x2ed9dd=document['getElementById']('commentAddOverlay');if(_0x46ac12)_0x46ac12[_0x5b53e3(0x183)]['display']='none';if(_0x2ed9dd)_0x2ed9dd['style']['display']='none';}function showAddCommentPopup(_0x3adb3a){const _0x1478e2=a6_0x5794e5,_0x48d879=window['auth'][_0x1478e2(0x111)];if(!_0x48d879){alert(_0x1478e2(0x102));return;}let _0x5b627d=document['getElementById']('commentAddPopup'),_0x3a35d8=document['getElementById'](_0x1478e2(0x177));!_0x5b627d&&(_0x5b627d=document[_0x1478e2(0x13e)]('div'),_0x5b627d['id']=_0x1478e2(0x103),_0x5b627d['className']=_0x1478e2(0x1a3),document['body']['appendChild'](_0x5b627d));!_0x3a35d8&&(_0x3a35d8=document['createElement']('div'),_0x3a35d8['id']='commentAddOverlay',_0x3a35d8['className']=_0x1478e2(0xfd),document['body']['appendChild'](_0x3a35d8));_0x5b627d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x3adb3a+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x5b627d[_0x1478e2(0x183)][_0x1478e2(0x123)]=_0x1478e2(0x19c),_0x3a35d8['style']['display']='block',document['getElementById']('closeAddCommentPopup')['addEventListener']('click',closeAddCommentPopup),_0x3a35d8['addEventListener']('click',closeAddCommentPopup);const _0x1c9a45=_0x5b627d['querySelectorAll']('.option-tab');_0x1c9a45['forEach'](_0x1ac1b3=>{_0x1ac1b3['addEventListener']('click',function(){const _0x47fa7e=a6_0x4716;_0x1c9a45['forEach'](_0x2d4b96=>_0x2d4b96['classList']['remove']('active')),document[_0x47fa7e(0x19d)]('.option-content')['forEach'](_0x2f611d=>_0x2f611d['style'][_0x47fa7e(0x123)]=_0x47fa7e(0x11f)),this['classList']['add']('active');const _0x1b8549=this['dataset'][_0x47fa7e(0x190)];document[_0x47fa7e(0x17f)](_0x1b8549+'Option')[_0x47fa7e(0x183)]['display']='block',_0x1b8549==='demo'?(document['getElementById'](_0x47fa7e(0x12e))['setAttribute']('required',''),document[_0x47fa7e(0x17f)]('commentText')[_0x47fa7e(0xfb)]('required')):(document['getElementById']('demoLink')['removeAttribute']('required'),document['getElementById'](_0x47fa7e(0x114))['setAttribute']('required',''));});}),document['getElementById']('commentText')['setAttribute'](_0x1478e2(0x150),''),document['getElementById']('demoLink')['removeAttribute']('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription','demoWordCount',0x14),document[_0x1478e2(0x17f)]('addCommentForm')['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x4bafa1,_0x1f681f,_0xcdeb0c){const _0x2c248f=a6_0x5794e5,_0x455463=document['getElementById'](_0x4bafa1),_0x3adc35=document[_0x2c248f(0x17f)](_0x1f681f);if(!_0x455463||!_0x3adc35)return;_0x5ae22b(),_0x455463['addEventListener'](_0x2c248f(0x155),_0x5ae22b);function _0x5ae22b(){const _0x4f4700=_0x2c248f,_0x287a30=_0x455463[_0x4f4700(0x12a)]['trim'](),_0x2ae071=_0x287a30?_0x287a30['split'](/\s+/)['filter'](_0x16d826=>_0x16d826['length']>0x0)[_0x4f4700(0x158)]:0x0;_0x3adc35['textContent']=_0x2ae071,_0x2ae071>_0xcdeb0c?_0x3adc35['style'][_0x4f4700(0x13d)]=_0x4f4700(0x126):_0x3adc35['style']['color']='#aaa';}}async function submitCommentOrDemo(_0x4d8e35){const _0x142bdd=a6_0x5794e5;_0x4d8e35['preventDefault']();if(!window['auth']||!window['db']){console[_0x142bdd(0x135)](_0x142bdd(0x128)),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x449d6a=window['auth']['currentUser'];if(!_0x449d6a){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x497772=document['getElementById']('commentMatchId')['value'],_0x32b0fc=document['querySelector']('.option-tab.active')['dataset']['option'];let _0x5af2bb='Anonymous';try{const _0x22b13e=doc(window['db'],'userProfiles',_0x449d6a[_0x142bdd(0x139)]),_0x57e32c=await getDoc(_0x22b13e);if(_0x57e32c['exists']()){const _0x4f66dc=_0x57e32c['data']();_0x4f66dc[_0x142bdd(0x178)]&&(_0x5af2bb=_0x4f66dc[_0x142bdd(0x178)]);}_0x5af2bb==='Anonymous'&&_0x449d6a['displayName']&&(_0x5af2bb=_0x449d6a[_0x142bdd(0x127)]);}catch(_0xa72c8d){console['warn']('Failed\x20to\x20fetch\x20username:',_0xa72c8d),_0x449d6a[_0x142bdd(0x127)]&&(_0x5af2bb=_0x449d6a[_0x142bdd(0x127)]);}const _0x1000be=document['querySelector']('.submit-comment-btn');_0x1000be&&(_0x1000be['disabled']=!![],_0x1000be[_0x142bdd(0x14e)]=_0x142bdd(0x16d));try{if(_0x32b0fc==='comment'){const _0x4301d8=document['getElementById'](_0x142bdd(0x114))[_0x142bdd(0x12a)][_0x142bdd(0x10a)]();if(!_0x4301d8){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x1000be[_0x142bdd(0x146)]=![],_0x1000be[_0x142bdd(0x14e)]='Submit';return;}const _0x39417e=_0x4301d8['split'](/\s+/)['filter'](_0x3fe0c5=>_0x3fe0c5[_0x142bdd(0x158)]>0x0)['length'];if(_0x39417e>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x1000be['disabled']=![],_0x1000be['textContent']=_0x142bdd(0x162);return;}const _0x1a1f0d={'matchId':_0x497772,'userId':_0x449d6a['uid'],'username':_0x5af2bb,'text':_0x4301d8,'type':_0x142bdd(0x15e),'timestamp':serverTimestamp()},_0xdf2017=collection(window['db'],_0x142bdd(0x189));await addDoc(_0xdf2017,_0x1a1f0d);}else{const _0x480ea4=document[_0x142bdd(0x17f)]('demoLink')[_0x142bdd(0x12a)][_0x142bdd(0x10a)](),_0x18b38e=document['getElementById']('demoDescription')['value']['trim']()||_0x142bdd(0x176);if(!_0x480ea4){alert('Please\x20enter\x20a\x20demo\x20link'),_0x1000be['disabled']=![],_0x1000be['textContent']=_0x142bdd(0x162);return;}try{new URL(_0x480ea4);}catch(_0x33ac27){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x1000be['disabled']=![],_0x1000be['textContent']=_0x142bdd(0x162);return;}const _0x5efab6=_0x18b38e['split'](/\s+/)['filter'](_0x4a1e04=>_0x4a1e04[_0x142bdd(0x158)]>0x0)['length'];if(_0x5efab6>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x1000be['disabled']=![],_0x1000be['textContent']='Submit';return;}const _0x43acd9={'matchId':_0x497772,'userId':_0x449d6a[_0x142bdd(0x139)],'username':_0x5af2bb,'demoLink':_0x480ea4,'description':_0x18b38e,'type':'demo','text':'Demo:\x20'+_0x18b38e,'timestamp':serverTimestamp()},_0xf321ab=collection(window['db'],'matchComments');await addDoc(_0xf321ab,_0x43acd9);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x142bdd(0x115));}catch(_0x53da58){console['error']('Error\x20submitting:',_0x53da58),alert(_0x142bdd(0x145)+_0x53da58['message']),_0x1000be&&(_0x1000be['disabled']=![],_0x1000be[_0x142bdd(0x14e)]='Submit');}}function getEloRankClass(_0x53e423){const _0x148909=Number(_0x53e423);if(_0x148909>=0x7d0)return'emerald';else{if(_0x148909>=0x708)return'gold';else{if(_0x148909>=0x640)return'silver';else{if(_0x148909>=0x578)return'bronze';else return'unranked';}}}}function a6_0x4716(_0x39a921,_0x4c8226){const _0x5b091c=a6_0x3240();return a6_0x4716=function(_0x1ee7f2,_0xf9666e){_0x1ee7f2=_0x1ee7f2-0xfb;let _0x324029=_0x5b091c[_0x1ee7f2];return _0x324029;},a6_0x4716(_0x39a921,_0x4c8226);}function a6_0x3240(){const _0x24edc0=['removeAttribute','currentPage','comment-overlay','prev','rematch','\x20demo\x20links:','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo','commentAddPopup','div','message','Submitting\x20comment\x20as:','filter-levels','subgameType','firstChild','trim','userProfiles','No\x20results\x20found\x20for\x20this\x20page','#fff','commentOverlayPreview','Muted.','toLowerCase','currentUser','Enter','seconds','commentText','current','previewPrevPage','href','split','subgames','winnerUsername','next','commentPopupPreview','appendChild','wordCount','none','onclick','approvedAt','data','display','loserSuicides','firstVisible','#ff4444','displayName','Firebase\x20not\x20initialized','stopPropagation','value','substring','pilots','classList','demoLink','.matches-loading','end','toggle','push','2025-07-02','currentMode','error','previewNextPage','filterUsername','Unknown','uid','text','isLoading','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments','color','createElement','includes','missiles-6plus','getTime','.matches-loading[style*=\x22color:\x20red\x22]','.match-map','winnerSuicides','Failed\x20to\x20submit:\x20','disabled','0.6','Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.','Error\x20deleting\x20comment:','preview-d2-button','log','Close','#b9f1fc','textContent','forEach','required','toLocaleDateString','\x20from\x20cache','previewPageInfo','default','input','flex','warn','length','empty','commentUser','fusion-match','type','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?','comment','delete-comment-btn','loserOldElo','loserUsername','Submit','Comment\x20from\x20','reportCommentButton','dataset','auth','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>','clearFilterBtn','closest','from','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','hasNextPage','Submitting...','addEventListener','Winner','enhancedFilters','You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment','.winner-demo-link','aria-label','totalPages','Anonymous','Demo\x20link','commentAddOverlay','username','lastVisible','.</div>','description','Delete\x20demo','\x20matching\x20filters','setItem','getElementById','approvedMatchesD2','levels','</small>','style','matchesPerPage','applyFilterBtn','button','Please\x20enter\x20a\x20comment\x20before\x20submitting','winnerOldElo','matchComments','mapPlayed','apply-enhanced-filters','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','.match-display-wrapper','\x27s\x20Demo','loserComment','option','.submit-comment-btn','Error\x20fetching\x20comments:','table','docs','Failed\x20to\x20report\x20comment:\x20','max','options','jump-to-page','S:\x20','console','commentId','block','querySelectorAll','Failed\x20to\x20delete\x20comment:\x20','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>','map','querySelector','stringify','comment-popup','title','timestamp','<strong>','innerHTML','click','loading-indicator','recent-matches-preview','parentNode','winner-','preview-d3-button','Comments\x20section\x20not\x20found\x20in\x20template','No\x20description\x20provided'];a6_0x3240=function(){return _0x24edc0;};return a6_0x3240();}function showPreviewCommentPopup(_0x54eda9,_0x434002,_0x148f63='#fff'){const _0x2515d2=a6_0x5794e5,_0x69c283=document[_0x2515d2(0x17f)](_0x2515d2(0x11c)),_0x4d0a18=document[_0x2515d2(0x17f)]('commentOverlayPreview'),_0x4697f8=document['getElementById']('commentPopupTitlePreview'),_0x58f8c8=document['getElementById']('commentPopupContentPreview'),_0x54d9c3=document['getElementById'](_0x2515d2(0x164));if(!_0x69c283||!_0x4d0a18||!_0x4697f8||!_0x58f8c8||!_0x54d9c3)return;_0x69c283[_0x2515d2(0x165)]['commentText']=_0x54eda9,_0x69c283['dataset']['commentUser']=_0x434002,_0x4697f8[_0x2515d2(0x183)]['color']=_0x148f63,_0x4697f8[_0x2515d2(0x14e)]=_0x2515d2(0x163)+_0x434002,_0x58f8c8['textContent']=_0x54eda9,_0x54d9c3['onclick']=reportComment,_0x69c283['style']['display']='block',_0x4d0a18['style']['display']='block';}function closePreviewCommentPopup(){const _0x36efce=a6_0x5794e5,_0x341307=document['getElementById']('commentPopupPreview'),_0x37eef1=document[_0x36efce(0x17f)]('commentOverlayPreview');if(_0x341307)_0x341307['style'][_0x36efce(0x123)]='none';if(_0x37eef1)_0x37eef1[_0x36efce(0x183)]['display']='none';}async function reportComment(){const _0x4d5d82=a6_0x5794e5,_0x5e6edf=window[_0x4d5d82(0x166)]['currentUser'];if(!_0x5e6edf){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm(_0x4d5d82(0x15d)))return;try{const _0x45e40e=document['getElementById']('commentPopupPreview'),_0x6e60bf={'commentAuthor':_0x45e40e['dataset'][_0x4d5d82(0x15a)]||'Unknown\x20User','commentText':_0x45e40e[_0x4d5d82(0x165)]['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x5e6edf['uid'],'reporterUsername':_0x5e6edf[_0x4d5d82(0x127)]||'Anonymous\x20User','reportedAt':serverTimestamp()},_0xa57c88=collection(window['db'],'badComments');await addDoc(_0xa57c88,_0x6e60bf),alert(_0x4d5d82(0x148)),closePreviewCommentPopup();}catch(_0x54a3a2){console[_0x4d5d82(0x135)]('Error\x20reporting\x20comment:',_0x54a3a2),alert(_0x4d5d82(0x195)+_0x54a3a2[_0x4d5d82(0x105)]);}}function showFullCommentLightbox(_0x709dcd){const _0x3844a5=a6_0x5794e5;if(isUsernameMuted(_0x709dcd['username']))return;const _0xce49d3=document['getElementById']('commentPopupPreview'),_0x5a62a0=document[_0x3844a5(0x17f)]('commentOverlayPreview'),_0x1c055e=document['getElementById']('commentPopupTitlePreview'),_0x34b0bd=document['getElementById']('commentPopupContentPreview');if(!_0xce49d3||!_0x5a62a0||!_0x1c055e||!_0x34b0bd)return;_0x1c055e[_0x3844a5(0x183)]['color']=_0x3844a5(0x10d),_0x1c055e['textContent']='Comment\x20from\x20'+_0x709dcd['username'];if(_0x709dcd['timestamp']){const _0x17f40f=new Date(_0x709dcd[_0x3844a5(0x1a5)]['seconds']*0x3e8),_0x591b8e=_0x17f40f['toLocaleString']();_0x34b0bd['innerHTML']='<p>'+_0x709dcd[_0x3844a5(0x13a)]+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x591b8e+_0x3844a5(0x182);}else _0x34b0bd[_0x3844a5(0x14e)]=_0x709dcd[_0x3844a5(0x13a)];_0xce49d3['dataset'][_0x3844a5(0x19b)]=_0x709dcd['id']||'',_0xce49d3[_0x3844a5(0x165)]['commentUser']=_0x709dcd[_0x3844a5(0x178)]||'',_0xce49d3['dataset'][_0x3844a5(0x114)]=_0x709dcd['text']||'',_0xce49d3[_0x3844a5(0x165)]['matchId']=_0x709dcd['matchId']||'';const _0x45ad8d=_0xce49d3['querySelector']('.popup-actions')||document['createElement'](_0x3844a5(0x104));!_0xce49d3['querySelector']('.popup-actions')?(_0x45ad8d['className']='popup-actions',_0x45ad8d['style']['display']=_0x3844a5(0x156),_0x45ad8d['style']['justifyContent']='center',_0x45ad8d[_0x3844a5(0x183)]['gap']='10px',_0x45ad8d['style']['marginTop']='15px',_0xce49d3['appendChild'](_0x45ad8d)):_0x45ad8d['innerHTML']='';const _0x4a471f=document[_0x3844a5(0x13e)](_0x3844a5(0x186));_0x4a471f['textContent']=_0x3844a5(0x14c),_0x4a471f['className']='popup-btn\x20close-btn',_0x4a471f['id']='closeCommentPopupPreview',_0x4a471f[_0x3844a5(0x16e)](_0x3844a5(0x1a8),closePreviewCommentPopup);const _0x4c3c9f=document['createElement']('button');_0x4c3c9f['textContent']='Report',_0x4c3c9f['className']='popup-btn\x20report-btn',_0x4c3c9f[_0x3844a5(0x183)]['backgroundColor']='#d32f2f',_0x4c3c9f['addEventListener']('click',reportComment),_0x45ad8d['appendChild'](_0x4a471f),_0x45ad8d['appendChild'](_0x4c3c9f),_0xce49d3['style'][_0x3844a5(0x123)]='block',_0x5a62a0[_0x3844a5(0x183)]['display']=_0x3844a5(0x19c);}export function setupPreviewEventListeners(){const _0x39f86c=a6_0x5794e5,_0x2820f7=document[_0x39f86c(0x17f)](_0x39f86c(0x116)),_0xff10ea=document['getElementById'](_0x39f86c(0x136)),_0x4115ea=document['getElementById']('preview-d1-button'),_0xeb5db0=document['getElementById'](_0x39f86c(0x14a)),_0x12e297=document['getElementById']('preview-d3-button'),_0x2c7df1=document['getElementById']('filter-toggle-button'),_0x5967db=document['getElementById']('enhanced-filter-section');if(!_0x2820f7||!_0xff10ea||!_0x4115ea||!_0xeb5db0||!_0x12e297||!_0x2c7df1||!_0x5967db){console['warn'](_0x39f86c(0x101));return;}_0x2820f7['addEventListener']('click',()=>{if(!_0x2820f7['disabled'])loadRecentMatchesPreview('prev');}),_0xff10ea['addEventListener']('click',()=>{if(!_0xff10ea['disabled'])loadRecentMatchesPreview('next');}),_0x4115ea[_0x39f86c(0x16e)]('click',()=>{const _0x4cd6f0=_0x39f86c;previewState['currentMode']!=='D1'&&!previewState[_0x4cd6f0(0x13b)]&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x4cd6f0(0x115)));}),_0xeb5db0['addEventListener']('click',()=>{const _0x478018=_0x39f86c;previewState[_0x478018(0x134)]!=='D2'&&!previewState['isLoading']&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x478018(0x115)));}),_0x12e297[_0x39f86c(0x16e)]('click',()=>{const _0x49eb65=_0x39f86c;previewState['currentMode']!=='D3'&&!previewState[_0x49eb65(0x13b)]&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x2c7df1&&_0x5967db&&_0x2c7df1[_0x39f86c(0x16e)]('click',()=>{const _0xc05a3d=_0x39f86c,_0x4d1665=_0x5967db['style']['display']!=='none';_0x5967db[_0xc05a3d(0x183)]['display']=_0x4d1665?'none':'block',_0x2c7df1['classList']['toggle']('active',!_0x4d1665);});const _0x57fb9d=document[_0x39f86c(0x17f)](_0x39f86c(0x18b)),_0x3af4ce=document['getElementById']('clear-enhanced-filters');_0x57fb9d&&_0x57fb9d[_0x39f86c(0x16e)]('click',()=>{const _0x5de238=_0x39f86c;previewState['enhancedFilters']['pilots']=document[_0x5de238(0x17f)]('filter-pilots')['value']['trim'](),previewState[_0x5de238(0x170)]['levels']=document['getElementById']('filter-levels')['value']['trim']();const _0x427cdd=document['getElementById']('filter-subgames');previewState['enhancedFilters'][_0x5de238(0x119)]=Array[_0x5de238(0x16a)](_0x427cdd['selectedOptions'])['map'](_0x2e5a35=>_0x2e5a35['value'])['filter'](_0x49319a=>_0x49319a!==''),loadRecentMatchesPreview('current');});_0x3af4ce&&_0x3af4ce['addEventListener']('click',()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document['querySelectorAll']('.jump-btn')[_0x39f86c(0x14f)](_0x1a5e68=>{_0x1a5e68['addEventListener']('click',()=>{const _0xed1f8c=_0x1a5e68['dataset']['jump'];jumpToPage(_0xed1f8c);});});const _0x173a1f=document['getElementById'](_0x39f86c(0x198));_0x173a1f&&_0x173a1f['addEventListener']('keypress',_0x4171e5=>{const _0x835d0=_0x39f86c;_0x4171e5['key']===_0x835d0(0x112)&&jumpToPage('input');});const _0x3d7fff=document['getElementById']('closeCommentPopupPreview'),_0x557f26=document[_0x39f86c(0x17f)](_0x39f86c(0x10e));if(_0x3d7fff)_0x3d7fff['addEventListener'](_0x39f86c(0x1a8),closePreviewCommentPopup);if(_0x557f26)_0x557f26['addEventListener']('click',closePreviewCommentPopup);const _0x3d8f43=document['getElementById']('closeAddCommentPopup'),_0x5c36e7=document['getElementById']('commentAddOverlay'),_0x173e61=document['getElementById']('addCommentForm');if(_0x3d8f43)_0x3d8f43['addEventListener'](_0x39f86c(0x1a8),closeAddCommentPopup);if(_0x5c36e7)_0x5c36e7['addEventListener']('click',closeAddCommentPopup);if(_0x173e61)_0x173e61[_0x39f86c(0x16e)]('submit',submitComment);const _0xd995ef=document['getElementById']('commentText'),_0x41276e=document['getElementById'](_0x39f86c(0x11e));_0xd995ef&&_0x41276e&&setupWordCounter('commentText','wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;