(function(_0x53bce1,_0x483093){const _0x553c4e=a0_0x3f2c,_0x237893=_0x53bce1();while(!![]){try{const _0x3fd186=-parseInt(_0x553c4e(0xce))/0x1+-parseInt(_0x553c4e(0xa3))/0x2+-parseInt(_0x553c4e(0x8e))/0x3+parseInt(_0x553c4e(0xd8))/0x4*(parseInt(_0x553c4e(0xba))/0x5)+parseInt(_0x553c4e(0x94))/0x6*(-parseInt(_0x553c4e(0x9e))/0x7)+-parseInt(_0x553c4e(0x7b))/0x8*(parseInt(_0x553c4e(0xc8))/0x9)+parseInt(_0x553c4e(0xec))/0xa;if(_0x3fd186===_0x483093)break;else _0x237893['push'](_0x237893['shift']());}catch(_0xefbe93){_0x237893['push'](_0x237893['shift']());}}}(a0_0xb46d,0x44236));const a0_0x5d35c8=(function(){let _0x47f139=!![];return function(_0xcddc2b,_0x3ab69e){const _0x251e83=_0x47f139?function(){const _0x2f2716=a0_0x3f2c;if(_0x3ab69e){const _0x3f5838=_0x3ab69e[_0x2f2716(0xb1)](_0xcddc2b,arguments);return _0x3ab69e=null,_0x3f5838;}}:function(){};return _0x47f139=![],_0x251e83;};}()),a0_0x20697a=a0_0x5d35c8(this,function(){const _0x3a167b=a0_0x3f2c,_0x187461=function(){const _0x4e9a16=a0_0x3f2c;let _0x5c0b50;try{_0x5c0b50=Function(_0x4e9a16(0x85)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xbd9ec){_0x5c0b50=window;}return _0x5c0b50;},_0x189dc2=_0x187461(),_0x4564b6=_0x189dc2['console']=_0x189dc2[_0x3a167b(0x73)]||{},_0x848022=['log',_0x3a167b(0xb9),'info','error','exception',_0x3a167b(0xbb),'trace'];for(let _0x4681b0=0x0;_0x4681b0<_0x848022['length'];_0x4681b0++){const _0x1e1e04=a0_0x5d35c8['constructor']['prototype']['bind'](a0_0x5d35c8),_0x2bef13=_0x848022[_0x4681b0],_0x41c4ad=_0x4564b6[_0x2bef13]||_0x1e1e04;_0x1e1e04['__proto__']=a0_0x5d35c8['bind'](a0_0x5d35c8),_0x1e1e04['toString']=_0x41c4ad['toString']['bind'](_0x41c4ad),_0x4564b6[_0x2bef13]=_0x1e1e04;}});function a0_0x3f2c(_0x2203a7,_0x353955){const _0x4e9517=a0_0xb46d();return a0_0x3f2c=function(_0x20697a,_0x5d35c8){_0x20697a=_0x20697a-0x6f;let _0x38c599=_0x4e9517[_0x20697a];return _0x38c599;},a0_0x3f2c(_0x2203a7,_0x353955);}a0_0x20697a();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x405117=0x1){const _0x41f0b5=a0_0x3f2c;try{document['getElementById']('loading-indicator')[_0x41f0b5(0xf1)]['display']='block';const _0x5acf06=await getLadderData(_0x405117);_0x5acf06['sort']((_0x2b63b2,_0x57f616)=>_0x57f616[_0x41f0b5(0x93)]-_0x2b63b2['elo']);const _0xfaa223=_0x5acf06['map'](_0x13c1c7=>_0x13c1c7['id']),_0x43effe=await getEloHistoryBatch(_0xfaa223,_0x405117),_0x26b38e=_0x5acf06['map']((_0x23f640,_0x33ef2e)=>{const _0x10e556=_0x41f0b5,_0x458aca=_0x43effe[_0x23f640['id']]||[],_0x1bd4ce=_0x458aca['sort']((_0x125d5e,_0x3d386a)=>new Date(_0x3d386a['date'])-new Date(_0x125d5e['date']))['slice'](0x0,0x5);return{..._0x23f640,'rank':_0x33ef2e+0x1,'lastMatches':_0x1bd4ce,'recentActivity':_0x1bd4ce[_0x10e556(0xbc)]>0x0};});renderLadder(_0x26b38e),setupRealTimeUpdates(_0x405117);}catch(_0x4ac918){console[_0x41f0b5(0xc2)]('Error\x20loading\x20ladder\x20data:',_0x4ac918),document['getElementById']('error-message')['innerText']=_0x41f0b5(0x9b);}finally{document[_0x41f0b5(0xbd)]('loading-indicator')[_0x41f0b5(0xf1)]['display']='none';}}function setupRealTimeUpdates(_0x562fd6=0x1){const _0x26ab3b=a0_0x3f2c;activeListeners[_0x26ab3b(0xeb)](_0x260dd=>_0x260dd()),activeListeners=[];const _0x4eee11=_0x562fd6===0x1?'players':'playersD'+_0x562fd6,_0x44deaf=_0x562fd6===0x1?'matches':'matchesD'+_0x562fd6,_0x39c60d=new Date();_0x39c60d['setDate'](_0x39c60d['getDate']()-0x1);const _0x2ba1d9=setupEfficientListener(_0x44deaf,[where('date','>=',_0x39c60d['toISOString']()),limit(0xa),orderBy('date',_0x26ab3b(0xd6))],async _0x1fb7ab=>{_0x1fb7ab['length']>0x0&&await loadLadderData(_0x562fd6);});activeListeners['push'](_0x2ba1d9);}export function cleanupListeners(){activeListeners['forEach'](_0xc8cd43=>_0xc8cd43()),activeListeners=[];}function renderLadder(_0x3dc30f){const _0x3885c5=a0_0x3f2c,_0x86cf59=document['getElementById']('ladder-container');_0x86cf59['innerHTML']='',_0x3dc30f[_0x3885c5(0xeb)](_0x23a7fd=>{const _0x401449=_0x3885c5,_0x2b2934=document['createElement']('div');_0x2b2934[_0x401449(0x6f)]='ladder-player',_0x2b2934['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x23a7fd['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x23a7fd['username']||_0x23a7fd['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x23a7fd['elo']+_0x401449(0x83)+(_0x23a7fd['recentActivity']?_0x401449(0xa0):'inactive')+_0x401449(0xcf)+(_0x23a7fd['recentActivity']?_0x401449(0xd9):_0x401449(0xa9))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x86cf59['appendChild'](_0x2b2934);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x5d1669=![]){const _0x16bece=a0_0x3f2c,_0xcf5b82=document['querySelector'](_0x16bece(0xe3));if(!_0xcf5b82){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0xcf5b82[_0x16bece(0x97)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x3735c2=Date[_0x16bece(0x88)]();if(!_0x5d1669&&playerCache['data']&&_0x3735c2-playerCache[_0x16bece(0xef)]<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache[_0x16bece(0x7c)]);return;}const _0x1826e6=collection(db,'players'),_0x14f6ff=await getDocs(_0x1826e6),_0xf2f97f=[];_0x14f6ff[_0x16bece(0xeb)](_0x4ca398=>{const _0x4f9d25=_0x16bece,_0x50a8be=_0x4ca398['data']();_0xf2f97f['push']({..._0x50a8be,'id':_0x4ca398['id'],'elo':_0x50a8be[_0x4f9d25(0x9d)]||0x0,'position':_0x50a8be[_0x4f9d25(0xa1)]||Number[_0x4f9d25(0xb2)]});});const _0x35f790=collection(db,_0x16bece(0xde)),_0x10f502=await getDocs(_0x35f790),_0x58ae97=new Map();_0x10f502[_0x16bece(0xeb)](_0x39ab12=>{const _0x12b240=_0x16bece,_0x1a4688=_0x39ab12['data']();_0x1a4688['username']&&_0x58ae97[_0x12b240(0xb6)](_0x1a4688[_0x12b240(0xad)]['toLowerCase'](),_0x1a4688);}),_0xf2f97f[_0x16bece(0xeb)](_0x347263=>{const _0x1a3869=_0x16bece,_0x3d1d19=_0x347263[_0x1a3869(0xad)]?.[_0x1a3869(0xe6)]();if(_0x3d1d19&&_0x58ae97['has'](_0x3d1d19)){const _0x1d3955=_0x58ae97['get'](_0x3d1d19);_0x1d3955['country']&&(_0x347263['country']=_0x1d3955['country']['toLowerCase']()),_0x347263['points']=_0x1d3955['points']||0x0;}else _0x347263['points']=0x0;});const _0x488661=_0xf2f97f[_0x16bece(0x9a)](_0x232662=>_0x232662['username']),_0x17384e=await fetchBatchMatchStats(_0x488661);_0xf2f97f['sort']((_0x751f0e,_0x4c81f3)=>{const _0x331eed=_0x17384e['get'](_0x751f0e['username'])?.['totalMatches']||0x0,_0x32e414=_0x17384e['get'](_0x4c81f3['username'])?.['totalMatches']||0x0;if(_0x331eed===0x0!==(_0x32e414===0x0))return _0x331eed===0x0?0x1:-0x1;return(_0x751f0e['position']||0x3e7)-(_0x4c81f3['position']||0x3e7);}),_0xf2f97f['forEach']((_0x53eae7,_0x2243e2)=>{_0x53eae7['position']=_0x2243e2+0x1;}),playerCache['data']=_0xf2f97f,playerCache['timestamp']=_0x3735c2,updateLadderDisplay(_0xf2f97f,_0x17384e);}catch(_0xed39a7){console['error'](_0x16bece(0x91),_0xed39a7),_0xcf5b82['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0xed39a7[_0x16bece(0x80)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x3d6c86){const _0x319dd4=a0_0x3f2c,_0x1f443e=new Map();try{_0x3d6c86[_0x319dd4(0xeb)](_0x3695be=>{const _0x4ca638=_0x319dd4;_0x1f443e[_0x4ca638(0xb6)](_0x3695be,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x413084=collection(db,'approvedMatches'),_0x11c77c=await getDocs(_0x413084);_0x11c77c['forEach'](_0x5be5ca=>{const _0x584eac=_0x319dd4,_0x859ffc=_0x5be5ca[_0x584eac(0x7c)](),_0x18b47d=_0x859ffc[_0x584eac(0x75)],_0x520d30=_0x859ffc['loserUsername'];if(_0x3d6c86['includes'](_0x18b47d)){const _0x2acb03=_0x1f443e['get'](_0x18b47d);_0x2acb03['wins']++,_0x2acb03['totalMatches']++,_0x2acb03['totalKills']+=parseInt(_0x859ffc['winnerScore'])||0x0,_0x2acb03[_0x584eac(0x92)]+=parseInt(_0x859ffc['loserScore'])||0x0;}if(_0x3d6c86['includes'](_0x520d30)){const _0x4ce4c1=_0x1f443e['get'](_0x520d30);_0x4ce4c1['losses']++,_0x4ce4c1['totalMatches']++,_0x4ce4c1['totalKills']+=parseInt(_0x859ffc['loserScore'])||0x0,_0x4ce4c1['totalDeaths']+=parseInt(_0x859ffc['winnerScore'])||0x0;}}),_0x3d6c86['forEach'](_0x2f3a2e=>{const _0x5caf6c=_0x319dd4,_0x2ac2e0=_0x1f443e['get'](_0x2f3a2e);_0x2ac2e0['kda']=_0x2ac2e0['totalDeaths']>0x0?(_0x2ac2e0['totalKills']/_0x2ac2e0['totalDeaths'])[_0x5caf6c(0x79)](0x2):_0x2ac2e0['totalKills'][_0x5caf6c(0x79)](0x2),_0x2ac2e0['winRate']=_0x2ac2e0['totalMatches']>0x0?(_0x2ac2e0['wins']/_0x2ac2e0['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x543ff1){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x543ff1);}return _0x1f443e;}function createPlayerRow(_0x1d9022,_0x497cdc){const _0xaaccaf=a0_0x3f2c,_0x2dabe2=parseFloat(_0x1d9022['elo'])||0x0;let _0x1d97e6=_0xaaccaf(0xf0);if(_0x497cdc['totalMatches']===0x0)_0x1d97e6='#DC143C';else{if(_0x497cdc[_0xaaccaf(0xa5)]>=0x50&&_0x497cdc['totalMatches']>=0x14)_0x1d97e6='#50C878';else{if(_0x2dabe2>=0x2bc)_0x1d97e6='#FFD700';else{if(_0x2dabe2>=0x1f4)_0x1d97e6='#C0C0C0';else _0x2dabe2>=0xc8&&(_0x1d97e6='#CD7F32');}}}let _0x42c3c0='';return _0x1d9022['country']&&(_0x42c3c0='<img\x20src=\x22../images/flags/'+_0x1d9022['country']['toLowerCase']()+_0xaaccaf(0xea)+_0x1d9022[_0xaaccaf(0x77)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d9022['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x1d9022[_0xaaccaf(0xad)])+_0xaaccaf(0xdb)+_0x1d97e6+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1d9022['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x42c3c0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x1d97e6+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x2dabe2+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x497cdc['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x497cdc['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x497cdc['losses']+_0xaaccaf(0xd4)+_0x497cdc['kda']+_0xaaccaf(0xd4)+_0x497cdc['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x497cdc[_0xaaccaf(0xae)]+'</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x1debae,_0x30c19e=0x0,_0x1d14cd=0x0){const _0x1cb5b1=a0_0x3f2c;if(_0x30c19e===0x0)return'Unranked';if(_0x1debae>=0x3e8&&_0x1d14cd>=0x50&&_0x30c19e>=0x14)return'Emerald';if(_0x1debae>=0x2bc)return'Gold';if(_0x1debae>=0x1f4)return _0x1cb5b1(0xc0);if(_0x1debae>=0xc8)return _0x1cb5b1(0xd0);return'Unranked';}async function getPlayersLastEloChanges(_0x2092d7){const _0x636596=a0_0x3f2c,_0x2ec846=new Map();_0x2092d7[_0x636596(0xeb)](_0x5d6b91=>{_0x2ec846['set'](_0x5d6b91,0x0);});try{const _0x3b4714=collection(db,'players'),_0x7f7f3d=await getDocs(_0x3b4714),_0x463888=new Map(),_0x416be8=new Map();_0x7f7f3d[_0x636596(0xeb)](_0xfc4f85=>{const _0x18f7bf=_0x636596,_0x73ff7f=_0xfc4f85['data']();_0x73ff7f['username']&&(_0x463888['set'](_0xfc4f85['id'],_0x73ff7f[_0x18f7bf(0xad)]),_0x416be8['set'](_0x73ff7f['username']['toLowerCase'](),_0xfc4f85['id']));});const _0x1c8c02=collection(db,'eloHistory'),_0x2ccbd5=query(_0x1c8c02,orderBy('timestamp',_0x636596(0xd6)),limit(0x12c)),_0x33d069=await getDocs(_0x2ccbd5);if(_0x33d069['empty'])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x2ec846;if(_0x33d069['docs']['length']>0x0){const _0x2a293a=_0x33d069[_0x636596(0xc5)][0x0]['data']();if(_0x2a293a['player']&&_0x463888['has'](_0x2a293a[_0x636596(0xcd)])){}}const _0x4c6893=new Map();let _0x2b9f0b=0x0;_0x33d069['forEach'](_0x1e2918=>{const _0x3a5ca1=_0x636596,_0x58f3de=_0x1e2918['data']();let _0x13629a=null;if(_0x58f3de['player']&&_0x463888['has'](_0x58f3de['player']))_0x13629a=_0x463888[_0x3a5ca1(0x90)](_0x58f3de['player']);else{if(_0x58f3de['username']&&_0x416be8['has'](_0x58f3de['username']['toLowerCase']()))_0x13629a=_0x58f3de[_0x3a5ca1(0xad)];else _0x58f3de['playerUsername']&&_0x416be8['has'](_0x58f3de['playerUsername']['toLowerCase']())&&(_0x13629a=_0x58f3de['playerUsername']);}_0x13629a&&_0x2092d7['includes'](_0x13629a)&&(_0x2b9f0b++,!_0x4c6893[_0x3a5ca1(0x9f)](_0x13629a)&&_0x4c6893[_0x3a5ca1(0xb6)](_0x13629a,[]),_0x4c6893['get'](_0x13629a)[_0x3a5ca1(0xaf)]({..._0x58f3de,'timestamp':_0x58f3de['timestamp']?.['seconds']||0x0}));}),_0x4c6893[_0x636596(0xeb)]((_0x9d1172,_0x15d5d7)=>{const _0x55e051=_0x636596;if(_0x9d1172['length']>0x0){_0x9d1172['sort']((_0x412474,_0x5980a7)=>_0x5980a7[_0x55e051(0xef)]-_0x412474['timestamp']);const _0x432f46=_0x9d1172[_0x55e051(0xa8)](_0x336ec2=>_0x336ec2['change']!==undefined||_0x336ec2[_0x55e051(0x95)]!==undefined&&_0x336ec2['previousElo']!==undefined||_0x336ec2['newEloRating']!==undefined&&_0x336ec2['oldEloRating']!==undefined);if(_0x432f46){let _0x12acf8;if(_0x432f46[_0x55e051(0xc7)]!==undefined)_0x12acf8=parseInt(_0x432f46['change']);else{if(_0x432f46['newElo']!==undefined&&entry['previousElo']!==undefined)_0x12acf8=parseInt(_0x432f46[_0x55e051(0x95)])-parseInt(_0x432f46[_0x55e051(0x8b)]);else _0x432f46['newEloRating']!==undefined&&entry[_0x55e051(0x86)]!==undefined&&(_0x12acf8=parseInt(_0x432f46['newEloRating'])-parseInt(_0x432f46['oldEloRating']));}!isNaN(_0x12acf8)&&_0x12acf8!==0x0&&_0x2ec846['set'](_0x15d5d7,_0x12acf8);}}});}catch(_0x228173){console['error']('Error\x20fetching\x20ELO\x20history:',_0x228173);}return _0x2ec846;}function createPlayerRowWithToken(_0x4eb511,_0x4330fe,_0x527b77){const _0x1839b8=a0_0x3f2c,_0x2fc303=parseFloat(_0x4eb511['elo'])||0x0;let _0x5d539c='#DC143C';if(_0x4330fe['totalMatches']===0x0)_0x5d539c='#DC143C';else{if(_0x4330fe[_0x1839b8(0xa5)]>=0x50&&_0x4330fe['totalMatches']>=0x14)_0x5d539c='#50C878';else{if(_0x2fc303>=0x2bc)_0x5d539c=_0x1839b8(0xdd);else{if(_0x2fc303>=0x1f4)_0x5d539c='#C0C0C0';else _0x2fc303>=0xc8&&(_0x5d539c=_0x1839b8(0x78));}}}let _0x3cee49='';_0x4eb511['country']&&(_0x3cee49='<img\x20src=\x22../images/flags/'+_0x4eb511['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4eb511[_0x1839b8(0x77)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x42b651='';return _0x527b77&&(_0x42b651='<img\x20src=\x22'+_0x527b77['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x527b77['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x527b77['tokenName']+'\x20'+(_0x527b77['equipped']?'(Equipped)':'')+_0x1839b8(0xa7)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4eb511['position']+_0x1839b8(0x81)+encodeURIComponent(_0x4eb511['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x5d539c+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4eb511['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3cee49+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x42b651+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x5d539c+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x2fc303+_0x1839b8(0xa2)+_0x4330fe['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4330fe['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4330fe['losses']+_0x1839b8(0xd4)+_0x4330fe[_0x1839b8(0x98)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4330fe['winRate']+_0x1839b8(0x84)+(_0x4eb511['points']||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x1982d6,_0x34cecc=null){const _0x1fc65b=a0_0x3f2c,_0x157675=document['querySelector']('#ladder\x20tbody');if(!_0x157675){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x22f681=document['querySelector'](_0x1fc65b(0xd2));_0x22f681&&(_0x22f681['innerHTML']=_0x1fc65b(0x99));const _0x36f33f=_0x1982d6[_0x1fc65b(0x9a)](_0xaa7a35=>_0xaa7a35['username']);!_0x34cecc&&(_0x34cecc=await fetchBatchMatchStats(_0x36f33f));let _0x3758ac=new Map();try{typeof clearTokenCache===_0x1fc65b(0xb3)&&clearTokenCache(),_0x3758ac=await getTokensByUsernames(_0x36f33f),console['log'](_0x1fc65b(0xed),_0x3758ac['size'],'players'),_0x3758ac[_0x1fc65b(0xeb)]((_0xd586bd,_0x196096)=>{const _0x38732e=_0xd586bd['find'](_0x37a28b=>_0x37a28b['equipped']);_0x38732e&&console['log']('ðŸŽ¯\x20'+_0x196096+'\x20has\x20equipped:\x20'+_0x38732e['tokenName']);});}catch(_0x57bd84){console['error']('Error\x20fetching\x20tokens:',_0x57bd84);}const _0x46702a=_0x1982d6[_0x1fc65b(0x9a)](_0x44c52b=>{const _0x30f795=_0x1fc65b,_0x1a3064=_0x34cecc['get'](_0x44c52b['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x428d4b=_0x3758ac[_0x30f795(0x90)](_0x44c52b['username'])||[],_0x3c81fb=getPrimaryDisplayToken(_0x428d4b);return _0x3c81fb&&console['log']('ðŸŽ¨\x20'+_0x44c52b['username']+'\x20displaying\x20token:\x20'+_0x3c81fb['tokenName']+'\x20(equipped:\x20'+_0x3c81fb['equipped']+')'),createPlayerRowWithToken(_0x44c52b,_0x1a3064,_0x3c81fb);})['join']('');_0x157675[_0x1fc65b(0x97)]=_0x46702a,getPlayersLastEloChanges(_0x36f33f)['then'](_0x402562=>{const _0x3fd9bd=_0x1fc65b,_0x322e03=new Map();_0x157675['querySelectorAll']('tr')['forEach']((_0x380f33,_0x484acc)=>{const _0x2e04cc=a0_0x3f2c;_0x484acc<_0x36f33f[_0x2e04cc(0xbc)]&&_0x322e03['set'](_0x36f33f[_0x484acc],_0x380f33);}),_0x402562[_0x3fd9bd(0xeb)]((_0x4d4605,_0x3da11b)=>{const _0xc63054=_0x3fd9bd,_0x8e493=_0x322e03['get'](_0x3da11b);if(_0x8e493&&_0x4d4605!==0x0){const _0x573c19=_0x8e493['querySelector']('td:nth-child(3)');if(_0x573c19){const _0x50d3ac=_0x4d4605>0x0?'+'+_0x4d4605:''+_0x4d4605,_0x1a8e07=_0x573c19['querySelector']('.trend-indicator');_0x1a8e07&&(_0x1a8e07['textContent']=_0x50d3ac,_0x1a8e07['style'][_0xc63054(0xb7)]=_0x4d4605>0x0?'#4CAF50':_0xc63054(0xbe),_0x1a8e07['style'][_0xc63054(0xcc)]='bold',_0x1a8e07[_0xc63054(0xf1)][_0xc63054(0xd5)]='0.85em',_0x1a8e07['style']['display']='inline',_0x1a8e07[_0xc63054(0xf1)]['visibility']=_0xc63054(0x82),_0x1a8e07['style'][_0xc63054(0x7f)]='1');}}});})['catch'](_0x1c6980=>console[_0x1fc65b(0xc2)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x1c6980));}function a0_0xb46d(){const _0x3f724b=['teammate','players','1488654eDyZaz','duos','get','Error\x20loading\x20ladder:','totalDeaths','elo','24WSoqqs','newElo',';\x22>','innerHTML','kda','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','map','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','display','eloRating','693224PEWAEq','has','active','position','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','592856oCtNIj','cursor','winRate','disabled','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','find','Inactive','gray','round','not-allowed','username','points','push','log','apply','MAX_SAFE_INTEGER','function','No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20(','appendChild','set','color','pow','warn','22545zlTvoe','table','length','getElementById','#F44336','No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!','Silver','duos-switch','error','d2-ladder-container','body','docs','max','change','63hTlFWZ','d3-ladder-container','div','pointer','fontWeight','player','18522HWpCOZ','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Bronze','exists','#ladder\x20thead\x20tr','remove','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','fontSize','desc','</span>\x20(ELO:\x20','444PWdAjz','Active','textContent','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','elo-recommendation-text-d1','#FFD700','userProfiles','playersD2','d1-ladder-container','duos-ladder-container','includes','#ladder\x20tbody','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20','elo-recommendation-text-d3','toLowerCase','admin@ladder.com','d1-switch','Error\x20finding\x20best\x20opponent:','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','forEach','14407370lLtdhp','ðŸª™\x20Loaded\x20fresh\x20tokens\x20for','hasTeam','timestamp','#DC143C','style','elo-recommendation-text-d2','className','D2\x20toggle\x20clicked','Duos\x20ladder\x20is\x20currently\x20admin-only','brian2af@outlook.com','console','roleName','winnerUsername','d3-switch','country','#CD7F32','toFixed','classList','519824bcVijk','data','currentUser','click','opacity','message','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','visible','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','return\x20(function()\x20','oldEloRating','none','now','addEventListener','block','previousElo'];a0_0xb46d=function(){return _0x3f724b;};return a0_0xb46d();}function initLadderToggles(){const _0x914361=a0_0x3f2c,_0xef6a57=document['getElementById'](_0x914361(0xe8)),_0x39ed85=document['getElementById']('d2-switch'),_0x750e64=document['getElementById'](_0x914361(0x76)),_0x1bd3ad=document['getElementById']('duos-switch'),_0x3d990f=document[_0x914361(0xbd)]('d1-ladder-container'),_0x1a8332=document[_0x914361(0xbd)]('d2-ladder-container'),_0x2948a1=document['getElementById'](_0x914361(0xc9)),_0xe50c97=document[_0x914361(0xbd)]('duos-ladder-container');function _0x5b2eea(){const _0x4a26ea=_0x914361;if(_0x3d990f)_0x3d990f[_0x4a26ea(0x7a)]['remove']('active');if(_0x1a8332)_0x1a8332[_0x4a26ea(0x7a)][_0x4a26ea(0xd3)]('active');if(_0x2948a1)_0x2948a1['classList']['remove']('active');if(_0xe50c97)_0xe50c97[_0x4a26ea(0xf1)]['display']='none';if(_0x3d990f)_0x3d990f[_0x4a26ea(0xf1)]['display']='none';if(_0x1a8332)_0x1a8332['style']['display']='none';if(_0x2948a1)_0x2948a1['style'][_0x4a26ea(0x9c)]='none';}_0xef6a57&&_0xef6a57[_0x914361(0x89)]('click',()=>{const _0x3569a0=_0x914361;console[_0x3569a0(0xb0)]('D1\x20toggle\x20clicked'),_0x5b2eea();_0x3d990f&&(_0x3d990f['classList']['add']('active'),_0x3d990f['style']['display']='block');document['getElementById'](_0x3569a0(0xdc))[_0x3569a0(0xf1)]['display']=_0x3569a0(0x8a),document['getElementById']('elo-recommendation-text-d2')[_0x3569a0(0xf1)]['display']=_0x3569a0(0x87),document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0xef6a57)_0xef6a57['classList']['add']('active');if(_0x39ed85)_0x39ed85['classList']['remove']('active');if(_0x750e64)_0x750e64['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x39ed85&&_0x39ed85[_0x914361(0x89)](_0x914361(0x7e),()=>{const _0x177c73=_0x914361;console['log'](_0x177c73(0x70)),_0x5b2eea();_0x1a8332&&(_0x1a8332['classList']['add']('active'),_0x1a8332['style']['display']='block');document[_0x177c73(0xbd)]('elo-recommendation-text-d1')[_0x177c73(0xf1)][_0x177c73(0x9c)]='none',document[_0x177c73(0xbd)]('elo-recommendation-text-d2')['style'][_0x177c73(0x9c)]='block',document['getElementById']('elo-recommendation-text-d3')[_0x177c73(0xf1)][_0x177c73(0x9c)]=_0x177c73(0x87);if(_0x39ed85)_0x39ed85['classList']['add']('active');if(_0xef6a57)_0xef6a57['classList'][_0x177c73(0xd3)]('active');if(_0x750e64)_0x750e64[_0x177c73(0x7a)]['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x750e64&&_0x750e64[_0x914361(0x89)]('click',()=>{const _0x19943a=_0x914361;console['log']('D3\x20toggle\x20clicked'),_0x5b2eea();_0x2948a1&&(_0x2948a1['classList']['add']('active'),_0x2948a1['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x19943a(0xf2))['style']['display']='none',document['getElementById'](_0x19943a(0xe5))['style']['display']='block';if(_0x750e64)_0x750e64[_0x19943a(0x7a)]['add'](_0x19943a(0xa0));if(_0xef6a57)_0xef6a57['classList']['remove']('active');if(_0x39ed85)_0x39ed85[_0x19943a(0x7a)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x1bd3ad&&_0x1bd3ad[_0x914361(0x89)](_0x914361(0x7e),()=>{const _0x3747c7=_0x914361;_0x5b2eea();if(_0xe50c97)_0xe50c97['style'][_0x3747c7(0x9c)]=_0x3747c7(0x8a);displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document[_0x3747c7(0xbd)]('elo-recommendation-text-duos')['style']['display']='block'),document['getElementById'](_0x3747c7(0xdc))['style'][_0x3747c7(0x9c)]='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document[_0x3747c7(0xbd)]('elo-recommendation-text-d3')['style']['display']='none';});}document['addEventListener']('DOMContentLoaded',()=>{const _0x578cb6=a0_0x3f2c;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document[_0x578cb6(0xbd)]('elo-recommendation-text-d1')['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0x4f0934='d1'){const _0x23963b=a0_0x3f2c,_0x66ceba='elo-recommendation-text-'+_0x4f0934,_0xb58954=document['getElementById'](_0x66ceba);if(!_0xb58954){console[_0x23963b(0xc2)]('Recommendation\x20element\x20for\x20'+_0x4f0934+'\x20not\x20found');return;}const _0x365e33=auth[_0x23963b(0x7d)];if(!_0x365e33){_0xb58954['textContent']='';return;}try{const _0x295950=doc(db,'userProfiles',_0x365e33['uid']),_0x4c8e6d=await getDoc(_0x295950);if(!_0x4c8e6d['exists']()){console['log']('No\x20user\x20profile\x20found'),_0xb58954['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x1497b8=_0x4c8e6d[_0x23963b(0x7c)](),_0x5a2969=_0x1497b8[_0x23963b(0xad)];if(!_0x5a2969){_0xb58954[_0x23963b(0xda)]='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x47e4f7;switch(_0x4f0934){case'd1':_0x47e4f7='players';break;case'd2':_0x47e4f7=_0x23963b(0xdf);break;case'd3':_0x47e4f7='playersD3';break;case'duos':_0x47e4f7='playersDuos';break;default:_0x47e4f7='players';}if(_0x4f0934===_0x23963b(0x8f)){const _0x3737df=collection(db,_0x47e4f7),_0x27c364=query(_0x3737df,where('username','==',_0x5a2969)),_0x5d8db2=await getDocs(_0x27c364);if(_0x5d8db2['empty']){_0xb58954['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x1fba68=_0x5d8db2['docs'][0x0]['data'](),_0x520cda=parseInt(_0x1fba68[_0x23963b(0x9d)])||0x4b0;if(_0x1fba68['hasTeam']&&_0x1fba68[_0x23963b(0x8c)]){_0xb58954['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x1fba68['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x4398e9=await getDocs(_0x3737df);let _0x468e4f=null,_0x584c39=-0x1;_0x4398e9['forEach'](_0x2c76c6=>{const _0x20fd90=_0x23963b,_0x43bbe7=_0x2c76c6[_0x20fd90(0x7c)]();if(_0x43bbe7['username']===_0x5a2969)return;if(_0x43bbe7[_0x20fd90(0xee)])return;const _0x559a0b=parseInt(_0x43bbe7['eloRating'])||0x4b0,_0x31c7e9=Math['abs'](_0x559a0b-_0x520cda),_0x1d81de=Math[_0x20fd90(0xc6)](0x0,0xc8-_0x31c7e9);_0x1d81de>_0x584c39&&(_0x468e4f=_0x43bbe7,_0x584c39=_0x1d81de);});if(_0x468e4f){const _0x38a841=parseInt(_0x468e4f['eloRating'])||0x4b0;let _0x2b23ef=_0x23963b(0xaa);if(_0x38a841>=0x7d0)_0x2b23ef='#50C878';else{if(_0x38a841>=0x708)_0x2b23ef='#FFD700';else{if(_0x38a841>=0x640)_0x2b23ef='#C0C0C0';else _0x38a841>=0x578&&(_0x2b23ef=_0x23963b(0x78));}}_0xb58954['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x2b23ef+';\x22>'+_0x468e4f[_0x23963b(0xad)]+_0x23963b(0xd7)+_0x38a841+')';}else _0xb58954['textContent']=_0x23963b(0xbf);return;}const _0x5e9530=collection(db,_0x47e4f7),_0x3cbeb1=query(_0x5e9530,where(_0x23963b(0xad),'==',_0x5a2969)),_0x5bf24a=await getDocs(_0x3cbeb1);if(_0x5bf24a['empty']){_0xb58954[_0x23963b(0xda)]='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x4f0934['toUpperCase']()+'\x20ladder';return;}const _0x5aa7b5=_0x5bf24a['docs'][0x0]['data'](),_0x1afb8d=parseInt(_0x5aa7b5['eloRating'])||0x5dc,_0x469309=await getDocs(_0x5e9530);let _0x1783bc=null,_0x10768f=-0x1;const _0x53f7ec=getPlayerRankName(_0x1afb8d);_0x469309[_0x23963b(0xeb)](_0xa3664b=>{const _0x2bcb7c=_0x23963b,_0x205906=_0xa3664b['data']();if(_0x205906['username']===_0x5a2969)return;const _0x231bc9=parseInt(_0x205906['eloRating'])||0x5dc,_0x37b6e4=getPlayerRankName(_0x231bc9),_0x478cab=Math['abs'](_0x231bc9-_0x1afb8d),_0x3f66ef=0x20,_0x296488=0x1/(0x1+Math[_0x2bcb7c(0xb8)](0xa,(_0x231bc9-_0x1afb8d)/0x190)),_0x5a62c1=Math[_0x2bcb7c(0xab)](_0x3f66ef*(0x1-_0x296488));if(_0x5a62c1<=0x0)return;let _0x4a96f6=0x0;const _0x592650=Math['max'](0x0,0x64-_0x478cab*0.5),_0xc51ce6=_0x5a62c1>=0x3&&_0x5a62c1<=0x8?0x32:_0x5a62c1>0x0&&_0x5a62c1<0xf?0x1e:0xa,_0x2ba565=_0x53f7ec===_0x37b6e4?0x28:0x0;_0x4a96f6=_0x592650+_0xc51ce6+_0x2ba565,_0x4a96f6>_0x10768f&&(_0x1783bc=_0x205906,_0x10768f=_0x4a96f6);});if(_0x1783bc){const _0x474f92=parseInt(_0x1783bc[_0x23963b(0x9d)])||0x5dc;let _0x11ae28=_0x23963b(0xaa);if(_0x474f92>=0x7d0)_0x11ae28='#50C878';else{if(_0x474f92>=0x708)_0x11ae28=_0x23963b(0xdd);else{if(_0x474f92>=0x640)_0x11ae28='#b9f1fc';else _0x474f92>=0x578&&(_0x11ae28='#CD7F32');}}_0xb58954[_0x23963b(0x97)]='Based\x20on\x20your\x20ELO\x20('+_0x1afb8d+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x11ae28+_0x23963b(0x96)+_0x1783bc['username']+'</span>';}else _0xb58954['innerHTML']=_0x23963b(0xb4)+_0x1afb8d+')';}catch(_0x3cdc08){console[_0x23963b(0xc2)](_0x23963b(0xe9),_0x3cdc08),_0xb58954['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x12bd21=>{const _0x2f2db6=a0_0x3f2c,_0x44ccd3=document[_0x2f2db6(0xbd)]('d1-ladder-container')&&document['getElementById'](_0x2f2db6(0xe0))['style']['display']!==_0x2f2db6(0x87),_0x13a234=document['getElementById'](_0x2f2db6(0xc3))&&document['getElementById']('d2-ladder-container')[_0x2f2db6(0xf1)][_0x2f2db6(0x9c)]!=='none',_0x4efefd=document['getElementById']('d3-ladder-container')&&document['getElementById']('d3-ladder-container')['style']['display']!=='none',_0xe8d39d=document['getElementById'](_0x2f2db6(0xe1))&&document['getElementById']('duos-ladder-container')['style']['display']!=='none',_0x56f8dd=_0x44ccd3?'d1':_0x13a234?'d2':_0x4efefd?'d3':_0xe8d39d?_0x2f2db6(0x8f):'d1';findBestOpponent(_0x56f8dd);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x113482=a0_0x3f2c,_0x3c863b=document['getElementById'](_0x113482(0xc1)),_0x42f90d=document['querySelector']('label[for=\x22duos-switch\x22]');_0x3c863b&&_0x42f90d&&(_0x3c863b['addEventListener']('change',async _0x199006=>{const _0x5a6155=_0x113482;if(_0x199006['target']['checked']){const _0x3ce028=auth?.[_0x5a6155(0x7d)],_0x32e0f1=await checkIfUserIsAdmin(_0x3ce028);if(!_0x32e0f1){_0x199006['preventDefault']();const _0x19f9da=document['getElementById']('d1-switch');return _0x19f9da&&(_0x19f9da['checked']=!![],_0x19f9da['dispatchEvent'](new Event(_0x5a6155(0xc7)))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x5e28bb=>{const _0x14999c=_0x113482,_0x227f63=await checkIfUserIsAdmin(_0x5e28bb);!_0x227f63?(_0x3c863b[_0x14999c(0xa6)]=!![],_0x42f90d['style']['opacity']='0.5',_0x42f90d[_0x14999c(0xf1)]['cursor']=_0x14999c(0xac),_0x42f90d['title']=_0x14999c(0x71)):(_0x3c863b['disabled']=![],_0x42f90d[_0x14999c(0xf1)]['opacity']='1',_0x42f90d['style'][_0x14999c(0xa4)]=_0x14999c(0xcb),_0x42f90d['title']='');}));});async function checkIfUserIsAdmin(_0x1ef2b0){const _0x33a82e=a0_0x3f2c;if(!_0x1ef2b0)return![];try{const _0x459855=[_0x33a82e(0xe7),_0x33a82e(0x72)];if(_0x1ef2b0['email']&&_0x459855['includes'](_0x1ef2b0['email']['toLowerCase']()))return!![];const _0x1a0c8c=['userProfiles',_0x33a82e(0x8d),'playersD2','playersD3'],_0x2e8531=['admin','owner','council','creative\x20lead'];for(const _0xa79761 of _0x1a0c8c){try{const _0x55056d=doc(db,_0xa79761,_0x1ef2b0['uid']),_0x517777=await getDoc(_0x55056d);if(_0x517777[_0x33a82e(0xd1)]()){const _0x357a26=_0x517777['data'](),_0xa02dfb=(_0x357a26[_0x33a82e(0x74)]||_0x357a26['role']||'')['toLowerCase']();if(_0xa02dfb&&_0x2e8531[_0x33a82e(0xe2)](_0xa02dfb))return!![];}}catch(_0x1d9741){console['warn']('Error\x20checking\x20'+_0xa79761+':',_0x1d9741);}}return![];}catch(_0x1ec58e){return console['error']('Error\x20checking\x20admin\x20status:',_0x1ec58e),![];}}function showAdminOnlyMessage(){const _0x41bf87=a0_0x3f2c,_0x22cec1=document['getElementById']('admin-only-message');_0x22cec1&&_0x22cec1[_0x41bf87(0xd3)]();const _0xfb82fc=document['createElement'](_0x41bf87(0xca));_0xfb82fc['id']='admin-only-message',_0xfb82fc['style']['cssText']=_0x41bf87(0xe4),_0xfb82fc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document[_0x41bf87(0xc4)][_0x41bf87(0xb5)](_0xfb82fc),setTimeout(()=>{_0xfb82fc['parentNode']&&_0xfb82fc['remove']();},0xbb8);}