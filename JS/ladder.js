const a25_0x1fb511=a25_0x5b6a,a25_0x446dd9=(function(){let _0x7da442=!![];return function(_0x378bd6,_0x3868ea){const _0x1ab33f=_0x7da442?function(){const _0x26a42e=a25_0x5b6a;if(_0x3868ea){const _0x43be67=_0x3868ea[_0x26a42e(0x214)](_0x378bd6,arguments);return _0x3868ea=null,_0x43be67;}}:function(){};return _0x7da442=![],_0x1ab33f;};}()),a25_0x79600e=a25_0x446dd9(this,function(){const _0x14b14b=a25_0x5b6a,_0x3cee19=function(){let _0x50cbae;try{_0x50cbae=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x23dc08){_0x50cbae=window;}return _0x50cbae;},_0x17ef52=_0x3cee19(),_0x17dbfe=_0x17ef52[_0x14b14b(0x1f5)]=_0x17ef52['console']||{},_0x4c453e=[_0x14b14b(0x1c4),_0x14b14b(0x20d),'info','error',_0x14b14b(0x227),'table',_0x14b14b(0x1b6)];for(let _0x4a05f9=0x0;_0x4a05f9<_0x4c453e['length'];_0x4a05f9++){const _0x1a7620=a25_0x446dd9['constructor']['prototype']['bind'](a25_0x446dd9),_0x5a90fb=_0x4c453e[_0x4a05f9],_0x2449db=_0x17dbfe[_0x5a90fb]||_0x1a7620;_0x1a7620[_0x14b14b(0x208)]=a25_0x446dd9['bind'](a25_0x446dd9),_0x1a7620['toString']=_0x2449db[_0x14b14b(0x228)]['bind'](_0x2449db),_0x17dbfe[_0x5a90fb]=_0x1a7620;}});a25_0x79600e();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a25_0x5b6a(_0x49a315,_0x332170){const _0x79600e=a25_0xc952();return a25_0x5b6a=function(_0x446dd9,_0x4344a8){_0x446dd9=_0x446dd9-0x1b4;let _0xc95299=_0x79600e[_0x446dd9];return _0xc95299;},a25_0x5b6a(_0x49a315,_0x332170);}import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';function a25_0xc952(){const _0x2c7bc2=['elo-recommendation-text-','data','trace','player','roleName','d2-switch',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','style','Inactive','ðŸª™\x20Loaded\x20fresh\x20tokens\x20for','add','addEventListener','message','click','players','forEach','log','duos','#DC143C','getElementById','\x20has\x20equipped:\x20','Emerald','recentActivity','label[for=\x22duos-switch\x22]','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','winnerUsername','error','username','email','max','getDate','Ladder\x20table\x20body\x20not\x20found','d1-switch','#C0C0C0','country','kda','d3-ladder-container','date','\x20displaying\x20token:\x20','none','remove','div','admin@ladder.com','Error\x20checking\x20','#b9f1fc','abs','newEloRating','toISOString','docs','Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents','Error\x20loading\x20ladder:','<img\x20src=\x22../images/flags/','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','innerHTML','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','ðŸŽ¯\x20','block','toFixed','Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents','council','pointer','#ladder\x20tbody','preventDefault','active','console','d1-ladder-container','duos-switch','toLowerCase','elo-recommendation-text-duos','length','ðŸŽ¨\x20','map','gray','\x20(equipped:\x20','querySelector','get','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','#50C878','</span>','appendChild','playersD2','eloRating','elo-recommendation-text-d3','__proto__','Error\x20finding\x20recommended\x20opponent','.trend-indicator','admin','previousElo','warn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','set','title','not-allowed','totalMatches','elo-recommendation-text-d2','apply','losses','Active','elo','winnerScore','find','eloHistory','d2-ladder-container','textContent','display','timestamp','dispatchEvent','position','#CD7F32','uid','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','equipped','Duos\x20ladder\x20is\x20currently\x20admin-only','oldEloRating','exception','toString','classList','DOMContentLoaded','sort','desc','playerUsername','fontSize','D1\x20toggle\x20clicked'];a25_0xc952=function(){return _0x2c7bc2;};return a25_0xc952();}import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x4fa34c=0x1){const _0x30dc4b=a25_0x5b6a;try{document['getElementById']('loading-indicator')['style'][_0x30dc4b(0x21d)]='block';const _0x4f6ef5=await getLadderData(_0x4fa34c);_0x4f6ef5['sort']((_0x301067,_0x43af88)=>_0x43af88['elo']-_0x301067[_0x30dc4b(0x217)]);const _0x33bb71=_0x4f6ef5['map'](_0x4c98cc=>_0x4c98cc['id']),_0x32202d=await getEloHistoryBatch(_0x33bb71,_0x4fa34c),_0x51d73e=_0x4f6ef5['map']((_0x5262be,_0x571d53)=>{const _0x2db834=_0x30dc4b,_0x283129=_0x32202d[_0x5262be['id']]||[],_0x36b2b9=_0x283129[_0x2db834(0x22b)]((_0x2923e2,_0x17fb01)=>new Date(_0x17fb01['date'])-new Date(_0x2923e2['date']))['slice'](0x0,0x5);return{..._0x5262be,'rank':_0x571d53+0x1,'lastMatches':_0x36b2b9,'recentActivity':_0x36b2b9[_0x2db834(0x1fa)]>0x0};});renderLadder(_0x51d73e),setupRealTimeUpdates(_0x4fa34c);}catch(_0x1aa194){console['error']('Error\x20loading\x20ladder\x20data:',_0x1aa194),document['getElementById']('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')['style']['display']='none';}}function setupRealTimeUpdates(_0x296aaf=0x1){const _0x40cb56=a25_0x5b6a;activeListeners['forEach'](_0x5e97d2=>_0x5e97d2()),activeListeners=[];const _0x9ad2bd=_0x296aaf===0x1?_0x40cb56(0x1c2):'playersD'+_0x296aaf,_0x4e9dee=_0x296aaf===0x1?'matches':'matchesD'+_0x296aaf,_0x291f18=new Date();_0x291f18['setDate'](_0x291f18[_0x40cb56(0x1d2)]()-0x1);const _0x2f3216=setupEfficientListener(_0x4e9dee,[where(_0x40cb56(0x1d9),'>=',_0x291f18[_0x40cb56(0x1e3)]()),limit(0xa),orderBy('date','desc')],async _0x5004dc=>{const _0x22df01=_0x40cb56;_0x5004dc[_0x22df01(0x1fa)]>0x0&&await loadLadderData(_0x296aaf);});activeListeners['push'](_0x2f3216);}export function cleanupListeners(){activeListeners['forEach'](_0x29c974=>_0x29c974()),activeListeners=[];}function renderLadder(_0x27eeb5){const _0x65553=a25_0x5b6a,_0x5e70c7=document['getElementById']('ladder-container');_0x5e70c7['innerHTML']='',_0x27eeb5[_0x65553(0x1c3)](_0x2b0063=>{const _0x5b873e=_0x65553,_0x14b87e=document['createElement']('div');_0x14b87e['className']='ladder-player',_0x14b87e[_0x5b873e(0x1e9)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x2b0063['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x2b0063['username']||_0x2b0063['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x2b0063['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x2b0063['recentActivity']?'active':'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2b0063[_0x5b873e(0x1ca)]?_0x5b873e(0x216):_0x5b873e(0x1bc))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x5e70c7['appendChild'](_0x14b87e);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x1253b4=![]){const _0x136779=a25_0x5b6a,_0x351194=document['querySelector'](_0x136779(0x1f2));if(!_0x351194){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x351194['innerHTML']=_0x136779(0x223);try{const _0x598687=Date['now']();if(!_0x1253b4&&playerCache['data']&&_0x598687-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x1a7f8d=collection(db,'players'),_0x24241a=await getDocs(_0x1a7f8d),_0x42661c=[];_0x24241a['forEach'](_0x16001a=>{const _0x579bdc=_0x16001a['data']();_0x42661c['push']({..._0x579bdc,'id':_0x16001a['id'],'elo':_0x579bdc['eloRating']||0x0,'position':_0x579bdc['position']||Number['MAX_SAFE_INTEGER']});});const _0x4e6d94=collection(db,'userProfiles'),_0x3611a4=await getDocs(_0x4e6d94),_0x2f4594=new Map();_0x3611a4['forEach'](_0x3c1546=>{const _0x1548d0=_0x136779,_0x536903=_0x3c1546[_0x1548d0(0x1b5)]();_0x536903[_0x1548d0(0x1cf)]&&_0x2f4594['set'](_0x536903['username']['toLowerCase'](),_0x536903);}),_0x42661c['forEach'](_0x155fda=>{const _0x23d09a=_0x136779,_0x2e6cb5=_0x155fda[_0x23d09a(0x1cf)]?.['toLowerCase']();if(_0x2e6cb5&&_0x2f4594['has'](_0x2e6cb5)){const _0x5365da=_0x2f4594['get'](_0x2e6cb5);_0x5365da['country']&&(_0x155fda['country']=_0x5365da['country']['toLowerCase']()),_0x155fda['points']=_0x5365da['points']||0x0;}else _0x155fda['points']=0x0;});const _0x1ea915=_0x42661c['map'](_0x3fcce5=>_0x3fcce5['username']),_0x2c2785=await fetchBatchMatchStats(_0x1ea915);_0x42661c['sort']((_0x311e0a,_0x16fae2)=>{const _0x5de2a2=_0x136779,_0x25373e=_0x2c2785[_0x5de2a2(0x200)](_0x311e0a['username'])?.['totalMatches']||0x0,_0x3c080c=_0x2c2785[_0x5de2a2(0x200)](_0x16fae2['username'])?.['totalMatches']||0x0;if(_0x25373e===0x0!==(_0x3c080c===0x0))return _0x25373e===0x0?0x1:-0x1;return(_0x311e0a['position']||0x3e7)-(_0x16fae2[_0x5de2a2(0x220)]||0x3e7);}),_0x42661c['forEach']((_0x4ec378,_0x274850)=>{const _0x21e11e=_0x136779;_0x4ec378[_0x21e11e(0x220)]=_0x274850+0x1;}),playerCache['data']=_0x42661c,playerCache['timestamp']=_0x598687,updateLadderDisplay(_0x42661c,_0x2c2785);}catch(_0x22621a){console['error'](_0x136779(0x1e6),_0x22621a),_0x351194['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x22621a[_0x136779(0x1c0)]+_0x136779(0x20e);}}async function fetchBatchMatchStats(_0x37db47){const _0x1c3ced=new Map();try{_0x37db47['forEach'](_0xd54f4d=>{_0x1c3ced['set'](_0xd54f4d,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x129994=collection(db,'approvedMatches'),_0x58b632=await getDocs(_0x129994);_0x58b632['forEach'](_0x1b67f4=>{const _0x219e9e=a25_0x5b6a,_0x5dfd58=_0x1b67f4[_0x219e9e(0x1b5)](),_0x473490=_0x5dfd58[_0x219e9e(0x1cd)],_0x18fa71=_0x5dfd58['loserUsername'];if(_0x37db47['includes'](_0x473490)){const _0x5b40d6=_0x1c3ced['get'](_0x473490);_0x5b40d6['wins']++,_0x5b40d6[_0x219e9e(0x212)]++,_0x5b40d6['totalKills']+=parseInt(_0x5dfd58[_0x219e9e(0x218)])||0x0,_0x5b40d6['totalDeaths']+=parseInt(_0x5dfd58['loserScore'])||0x0;}if(_0x37db47['includes'](_0x18fa71)){const _0x1fe464=_0x1c3ced[_0x219e9e(0x200)](_0x18fa71);_0x1fe464['losses']++,_0x1fe464[_0x219e9e(0x212)]++,_0x1fe464['totalKills']+=parseInt(_0x5dfd58['loserScore'])||0x0,_0x1fe464['totalDeaths']+=parseInt(_0x5dfd58['winnerScore'])||0x0;}}),_0x37db47['forEach'](_0x4c65a2=>{const _0x5877e7=a25_0x5b6a,_0x4bca65=_0x1c3ced['get'](_0x4c65a2);_0x4bca65['kda']=_0x4bca65['totalDeaths']>0x0?(_0x4bca65['totalKills']/_0x4bca65['totalDeaths'])['toFixed'](0x2):_0x4bca65['totalKills'][_0x5877e7(0x1ee)](0x2),_0x4bca65['winRate']=_0x4bca65[_0x5877e7(0x212)]>0x0?(_0x4bca65['wins']/_0x4bca65['totalMatches']*0x64)[_0x5877e7(0x1ee)](0x1):0x0;});}catch(_0x46f631){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x46f631);}return _0x1c3ced;}function createPlayerRow(_0x2ebef2,_0x1c78fb){const _0x2c5ec7=a25_0x5b6a,_0x9a6f57=parseFloat(_0x2ebef2[_0x2c5ec7(0x217)])||0x0;let _0x159a11=_0x2c5ec7(0x1c6);if(_0x1c78fb['totalMatches']===0x0)_0x159a11='#DC143C';else{if(_0x1c78fb['winRate']>=0x50&&_0x1c78fb['totalMatches']>=0x14)_0x159a11=_0x2c5ec7(0x202);else{if(_0x9a6f57>=0x2bc)_0x159a11='#FFD700';else{if(_0x9a6f57>=0x1f4)_0x159a11='#C0C0C0';else _0x9a6f57>=0xc8&&(_0x159a11=_0x2c5ec7(0x221));}}}let _0x369bbb='';return _0x2ebef2[_0x2c5ec7(0x1d6)]&&(_0x369bbb=_0x2c5ec7(0x1e7)+_0x2ebef2['country'][_0x2c5ec7(0x1f8)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2ebef2['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2ebef2['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x2ebef2['username'])+_0x2c5ec7(0x1ea)+_0x159a11+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2ebef2['username']+_0x2c5ec7(0x1e8)+_0x369bbb+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x159a11+_0x2c5ec7(0x1ba)+_0x9a6f57+_0x2c5ec7(0x1eb)+_0x1c78fb['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1c78fb['wins']+_0x2c5ec7(0x201)+_0x1c78fb[_0x2c5ec7(0x215)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1c78fb['kda']+_0x2c5ec7(0x201)+_0x1c78fb['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1c78fb['points']+'</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x80b858,_0x1b5a78=0x0,_0x2866c7=0x0){const _0x2bcde5=a25_0x5b6a;if(_0x1b5a78===0x0)return'Unranked';if(_0x80b858>=0x3e8&&_0x2866c7>=0x50&&_0x1b5a78>=0x14)return _0x2bcde5(0x1c9);if(_0x80b858>=0x2bc)return'Gold';if(_0x80b858>=0x1f4)return'Silver';if(_0x80b858>=0xc8)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x5eaa6f){const _0x3064a3=a25_0x5b6a,_0x42ee47=new Map();_0x5eaa6f['forEach'](_0x17003c=>{_0x42ee47['set'](_0x17003c,0x0);});try{const _0x54c36c=collection(db,'players'),_0x976afc=await getDocs(_0x54c36c),_0xf8f641=new Map(),_0x1dfb58=new Map();_0x976afc[_0x3064a3(0x1c3)](_0x3af764=>{const _0x348111=_0x3064a3,_0x1134fb=_0x3af764['data']();_0x1134fb[_0x348111(0x1cf)]&&(_0xf8f641['set'](_0x3af764['id'],_0x1134fb[_0x348111(0x1cf)]),_0x1dfb58['set'](_0x1134fb['username']['toLowerCase'](),_0x3af764['id']));});const _0x3d085a=collection(db,_0x3064a3(0x21a)),_0x59fc8=query(_0x3d085a,orderBy('timestamp',_0x3064a3(0x22c)),limit(0x12c)),_0x348c6f=await getDocs(_0x59fc8);if(_0x348c6f['empty'])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x42ee47;if(_0x348c6f['docs']['length']>0x0){const _0xc4c424=_0x348c6f['docs'][0x0][_0x3064a3(0x1b5)]();if(_0xc4c424['player']&&_0xf8f641['has'](_0xc4c424['player'])){}}const _0x5d8b7b=new Map();let _0x19786c=0x0;_0x348c6f['forEach'](_0x4161b2=>{const _0x1aeb69=_0x3064a3,_0xadf7b2=_0x4161b2['data']();let _0x212aa8=null;if(_0xadf7b2[_0x1aeb69(0x1b7)]&&_0xf8f641['has'](_0xadf7b2['player']))_0x212aa8=_0xf8f641['get'](_0xadf7b2['player']);else{if(_0xadf7b2[_0x1aeb69(0x1cf)]&&_0x1dfb58['has'](_0xadf7b2['username']['toLowerCase']()))_0x212aa8=_0xadf7b2[_0x1aeb69(0x1cf)];else _0xadf7b2[_0x1aeb69(0x22d)]&&_0x1dfb58['has'](_0xadf7b2['playerUsername']['toLowerCase']())&&(_0x212aa8=_0xadf7b2[_0x1aeb69(0x22d)]);}_0x212aa8&&_0x5eaa6f['includes'](_0x212aa8)&&(_0x19786c++,!_0x5d8b7b['has'](_0x212aa8)&&_0x5d8b7b[_0x1aeb69(0x20f)](_0x212aa8,[]),_0x5d8b7b['get'](_0x212aa8)['push']({..._0xadf7b2,'timestamp':_0xadf7b2[_0x1aeb69(0x21e)]?.['seconds']||0x0}));}),_0x5d8b7b['forEach']((_0x38c421,_0x367250)=>{const _0x13371e=_0x3064a3;if(_0x38c421['length']>0x0){_0x38c421['sort']((_0x3fe696,_0x1d2f21)=>_0x1d2f21['timestamp']-_0x3fe696['timestamp']);const _0x1e940f=_0x38c421[_0x13371e(0x219)](_0x3cdbfd=>_0x3cdbfd['change']!==undefined||_0x3cdbfd['newElo']!==undefined&&_0x3cdbfd[_0x13371e(0x20c)]!==undefined||_0x3cdbfd['newEloRating']!==undefined&&_0x3cdbfd['oldEloRating']!==undefined);if(_0x1e940f){let _0x28ce94;if(_0x1e940f['change']!==undefined)_0x28ce94=parseInt(_0x1e940f['change']);else{if(_0x1e940f['newElo']!==undefined&&entry['previousElo']!==undefined)_0x28ce94=parseInt(_0x1e940f['newElo'])-parseInt(_0x1e940f['previousElo']);else _0x1e940f[_0x13371e(0x1e2)]!==undefined&&entry[_0x13371e(0x226)]!==undefined&&(_0x28ce94=parseInt(_0x1e940f[_0x13371e(0x1e2)])-parseInt(_0x1e940f[_0x13371e(0x226)]));}!isNaN(_0x28ce94)&&_0x28ce94!==0x0&&_0x42ee47['set'](_0x367250,_0x28ce94);}}});}catch(_0x28049f){console['error']('Error\x20fetching\x20ELO\x20history:',_0x28049f);}return _0x42ee47;}function createPlayerRowWithToken(_0x44c54c,_0x10a328,_0x5cf96e){const _0x1ffe5f=a25_0x5b6a,_0x25f11e=parseFloat(_0x44c54c['elo'])||0x0;let _0x2342c6=_0x1ffe5f(0x1c6);if(_0x10a328['totalMatches']===0x0)_0x2342c6='#DC143C';else{if(_0x10a328['winRate']>=0x50&&_0x10a328['totalMatches']>=0x14)_0x2342c6='#50C878';else{if(_0x25f11e>=0x2bc)_0x2342c6='#FFD700';else{if(_0x25f11e>=0x1f4)_0x2342c6=_0x1ffe5f(0x1d5);else _0x25f11e>=0xc8&&(_0x2342c6=_0x1ffe5f(0x221));}}}let _0x267443='';_0x44c54c['country']&&(_0x267443='<img\x20src=\x22../images/flags/'+_0x44c54c[_0x1ffe5f(0x1d6)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x44c54c[_0x1ffe5f(0x1d6)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x184e27='';return _0x5cf96e&&(_0x184e27='<img\x20src=\x22'+_0x5cf96e['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5cf96e['tokenName']+_0x1ffe5f(0x1cc)+_0x5cf96e['tokenName']+'\x20'+(_0x5cf96e[_0x1ffe5f(0x224)]?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44c54c[_0x1ffe5f(0x220)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x44c54c[_0x1ffe5f(0x1cf)])+_0x1ffe5f(0x1ea)+_0x2342c6+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x44c54c['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x267443+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x184e27+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x2342c6+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x25f11e+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10a328['totalMatches']+_0x1ffe5f(0x201)+_0x10a328['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10a328['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x10a328[_0x1ffe5f(0x1d7)]+_0x1ffe5f(0x201)+_0x10a328['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0x44c54c['points']||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x1a9ab3,_0x41b163=null){const _0x6c9eee=a25_0x5b6a,_0x3a63b2=document[_0x6c9eee(0x1ff)]('#ladder\x20tbody');if(!_0x3a63b2){console['error'](_0x6c9eee(0x1d3));return;}const _0xa729a1=document['querySelector']('#ladder\x20thead\x20tr');_0xa729a1&&(_0xa729a1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x547141=_0x1a9ab3[_0x6c9eee(0x1fc)](_0x417812=>_0x417812['username']);!_0x41b163&&(_0x41b163=await fetchBatchMatchStats(_0x547141));let _0x4d6662=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x4d6662=await getTokensByUsernames(_0x547141),console['log'](_0x6c9eee(0x1bd),_0x4d6662['size'],'players'),_0x4d6662['forEach']((_0x5ed49a,_0x294067)=>{const _0x112a14=_0x6c9eee,_0x4a4dfd=_0x5ed49a['find'](_0x56030b=>_0x56030b['equipped']);_0x4a4dfd&&console['log'](_0x112a14(0x1ec)+_0x294067+_0x112a14(0x1c8)+_0x4a4dfd['tokenName']);});}catch(_0x36b789){console[_0x6c9eee(0x1ce)]('Error\x20fetching\x20tokens:',_0x36b789);}const _0x9b8eb4=_0x1a9ab3[_0x6c9eee(0x1fc)](_0x1d94c4=>{const _0xed7428=_0x6c9eee,_0x36a926=_0x41b163['get'](_0x1d94c4['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x1176cd=_0x4d6662[_0xed7428(0x200)](_0x1d94c4['username'])||[],_0xe3c253=getPrimaryDisplayToken(_0x1176cd);return _0xe3c253&&console['log'](_0xed7428(0x1fb)+_0x1d94c4[_0xed7428(0x1cf)]+_0xed7428(0x1da)+_0xe3c253['tokenName']+_0xed7428(0x1fe)+_0xe3c253['equipped']+')'),createPlayerRowWithToken(_0x1d94c4,_0x36a926,_0xe3c253);})['join']('');_0x3a63b2['innerHTML']=_0x9b8eb4,getPlayersLastEloChanges(_0x547141)['then'](_0x1cc6f6=>{const _0xb3da52=new Map();_0x3a63b2['querySelectorAll']('tr')['forEach']((_0xb236ba,_0x370449)=>{_0x370449<_0x547141['length']&&_0xb3da52['set'](_0x547141[_0x370449],_0xb236ba);}),_0x1cc6f6['forEach']((_0x4503fc,_0x9af775)=>{const _0x2e454c=a25_0x5b6a,_0x4907f2=_0xb3da52[_0x2e454c(0x200)](_0x9af775);if(_0x4907f2&&_0x4503fc!==0x0){const _0x57d5d0=_0x4907f2['querySelector']('td:nth-child(3)');if(_0x57d5d0){const _0x4c5742=_0x4503fc>0x0?'+'+_0x4503fc:''+_0x4503fc,_0x5d262c=_0x57d5d0[_0x2e454c(0x1ff)](_0x2e454c(0x20a));_0x5d262c&&(_0x5d262c['textContent']=_0x4c5742,_0x5d262c['style']['color']=_0x4503fc>0x0?'#4CAF50':'#F44336',_0x5d262c['style']['fontWeight']='bold',_0x5d262c[_0x2e454c(0x1bb)][_0x2e454c(0x22e)]='0.85em',_0x5d262c[_0x2e454c(0x1bb)]['display']='inline',_0x5d262c['style']['visibility']='visible',_0x5d262c[_0x2e454c(0x1bb)]['opacity']='1');}}});})['catch'](_0x4d03b8=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x4d03b8));}function initLadderToggles(){const _0x1ca873=a25_0x5b6a,_0x20851e=document[_0x1ca873(0x1c7)]('d1-switch'),_0x5b8546=document[_0x1ca873(0x1c7)](_0x1ca873(0x1b9)),_0xcb246b=document[_0x1ca873(0x1c7)]('d3-switch'),_0xf937b8=document['getElementById'](_0x1ca873(0x1f7)),_0x5f4ab3=document['getElementById']('d1-ladder-container'),_0x1ed95c=document['getElementById'](_0x1ca873(0x21b)),_0x20d42c=document['getElementById'](_0x1ca873(0x1d8)),_0x13d51c=document['getElementById']('duos-ladder-container');function _0x43fe01(){const _0x3c289e=_0x1ca873;if(_0x5f4ab3)_0x5f4ab3['classList'][_0x3c289e(0x1dc)]('active');if(_0x1ed95c)_0x1ed95c['classList'][_0x3c289e(0x1dc)](_0x3c289e(0x1f4));if(_0x20d42c)_0x20d42c['classList']['remove']('active');if(_0x13d51c)_0x13d51c['style'][_0x3c289e(0x21d)]=_0x3c289e(0x1db);if(_0x5f4ab3)_0x5f4ab3['style'][_0x3c289e(0x21d)]='none';if(_0x1ed95c)_0x1ed95c[_0x3c289e(0x1bb)]['display']='none';if(_0x20d42c)_0x20d42c[_0x3c289e(0x1bb)]['display']='none';}_0x20851e&&_0x20851e[_0x1ca873(0x1bf)]('click',()=>{const _0x4e384e=_0x1ca873;console['log'](_0x4e384e(0x22f)),_0x43fe01();_0x5f4ab3&&(_0x5f4ab3[_0x4e384e(0x229)]['add'](_0x4e384e(0x1f4)),_0x5f4ab3['style']['display']=_0x4e384e(0x1ed));document['getElementById']('elo-recommendation-text-d1')['style']['display']='block',document['getElementById'](_0x4e384e(0x213))['style'][_0x4e384e(0x21d)]=_0x4e384e(0x1db),document['getElementById']('elo-recommendation-text-d3')[_0x4e384e(0x1bb)][_0x4e384e(0x21d)]=_0x4e384e(0x1db);if(_0x20851e)_0x20851e['classList']['add']('active');if(_0x5b8546)_0x5b8546['classList']['remove'](_0x4e384e(0x1f4));if(_0xcb246b)_0xcb246b['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x5b8546&&_0x5b8546['addEventListener']('click',()=>{const _0x56fc74=_0x1ca873;console[_0x56fc74(0x1c4)]('D2\x20toggle\x20clicked'),_0x43fe01();_0x1ed95c&&(_0x1ed95c['classList'][_0x56fc74(0x1be)](_0x56fc74(0x1f4)),_0x1ed95c[_0x56fc74(0x1bb)][_0x56fc74(0x21d)]='block');document['getElementById']('elo-recommendation-text-d1')['style'][_0x56fc74(0x21d)]=_0x56fc74(0x1db),document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x56fc74(0x1ed),document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x5b8546)_0x5b8546['classList']['add'](_0x56fc74(0x1f4));if(_0x20851e)_0x20851e['classList']['remove']('active');if(_0xcb246b)_0xcb246b[_0x56fc74(0x229)]['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0xcb246b&&_0xcb246b['addEventListener'](_0x1ca873(0x1c1),()=>{const _0x32785b=_0x1ca873;console[_0x32785b(0x1c4)]('D3\x20toggle\x20clicked'),_0x43fe01();_0x20d42c&&(_0x20d42c[_0x32785b(0x229)]['add']('active'),_0x20d42c['style'][_0x32785b(0x21d)]='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']=_0x32785b(0x1db),document[_0x32785b(0x1c7)]('elo-recommendation-text-d2')[_0x32785b(0x1bb)][_0x32785b(0x21d)]='none',document['getElementById']('elo-recommendation-text-d3')[_0x32785b(0x1bb)]['display']='block';if(_0xcb246b)_0xcb246b['classList']['add'](_0x32785b(0x1f4));if(_0x20851e)_0x20851e['classList']['remove'](_0x32785b(0x1f4));if(_0x5b8546)_0x5b8546[_0x32785b(0x229)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0xf937b8&&_0xf937b8[_0x1ca873(0x1bf)]('click',()=>{const _0x53c6f8=_0x1ca873;_0x43fe01();if(_0x13d51c)_0x13d51c['style']['display']='block';displayLadderDuos(),findBestOpponent(_0x53c6f8(0x1c5)),document['getElementById'](_0x53c6f8(0x1f9))&&(document['getElementById'](_0x53c6f8(0x1f9))[_0x53c6f8(0x1bb)]['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style'][_0x53c6f8(0x21d)]='none',document['getElementById']('elo-recommendation-text-d2')[_0x53c6f8(0x1bb)][_0x53c6f8(0x21d)]='none',document[_0x53c6f8(0x1c7)](_0x53c6f8(0x207))[_0x53c6f8(0x1bb)][_0x53c6f8(0x21d)]='none';});}document[a25_0x1fb511(0x1bf)]('DOMContentLoaded',()=>{initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0x4eb645='d1'){const _0x2b167f=a25_0x1fb511,_0x5b743c=_0x2b167f(0x1b4)+_0x4eb645,_0x51c6bc=document['getElementById'](_0x5b743c);if(!_0x51c6bc){console['error']('Recommendation\x20element\x20for\x20'+_0x4eb645+'\x20not\x20found');return;}const _0x41a68c=auth['currentUser'];if(!_0x41a68c){_0x51c6bc['textContent']='';return;}try{const _0x191207=doc(db,'userProfiles',_0x41a68c[_0x2b167f(0x222)]),_0x2f0274=await getDoc(_0x191207);if(!_0x2f0274['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x51c6bc['textContent']=_0x2b167f(0x1ef);return;}const _0x3022f3=_0x2f0274[_0x2b167f(0x1b5)](),_0x4ebfec=_0x3022f3['username'];if(!_0x4ebfec){_0x51c6bc['textContent']=_0x2b167f(0x1e5);return;}let _0x1df476;switch(_0x4eb645){case'd1':_0x1df476='players';break;case'd2':_0x1df476='playersD2';break;case'd3':_0x1df476='playersD3';break;case _0x2b167f(0x1c5):_0x1df476='playersDuos';break;default:_0x1df476=_0x2b167f(0x1c2);}if(_0x4eb645===_0x2b167f(0x1c5)){const _0x3be8a5=collection(db,_0x1df476),_0x3c3da4=query(_0x3be8a5,where(_0x2b167f(0x1cf),'==',_0x4ebfec)),_0x20b157=await getDocs(_0x3c3da4);if(_0x20b157['empty']){_0x51c6bc[_0x2b167f(0x21c)]='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x30ac36=_0x20b157[_0x2b167f(0x1e4)][0x0]['data'](),_0x2c3013=parseInt(_0x30ac36['eloRating'])||0x4b0;if(_0x30ac36['hasTeam']&&_0x30ac36['teammate']){_0x51c6bc['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x30ac36['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x1e6264=await getDocs(_0x3be8a5);let _0x4f23ae=null,_0x11d6d0=-0x1;_0x1e6264['forEach'](_0x43acb0=>{const _0x512641=_0x2b167f,_0x15a605=_0x43acb0[_0x512641(0x1b5)]();if(_0x15a605['username']===_0x4ebfec)return;if(_0x15a605['hasTeam'])return;const _0x37c78f=parseInt(_0x15a605['eloRating'])||0x4b0,_0x43bf15=Math[_0x512641(0x1e1)](_0x37c78f-_0x2c3013),_0x5378ef=Math[_0x512641(0x1d1)](0x0,0xc8-_0x43bf15);_0x5378ef>_0x11d6d0&&(_0x4f23ae=_0x15a605,_0x11d6d0=_0x5378ef);});if(_0x4f23ae){const _0x52556d=parseInt(_0x4f23ae[_0x2b167f(0x206)])||0x4b0;let _0x11f7cd=_0x2b167f(0x1fd);if(_0x52556d>=0x7d0)_0x11f7cd=_0x2b167f(0x202);else{if(_0x52556d>=0x708)_0x11f7cd='#FFD700';else{if(_0x52556d>=0x640)_0x11f7cd='#C0C0C0';else _0x52556d>=0x578&&(_0x11f7cd=_0x2b167f(0x221));}}_0x51c6bc['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x11f7cd+';\x22>'+_0x4f23ae['username']+'</span>\x20(ELO:\x20'+_0x52556d+')';}else _0x51c6bc['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x36e150=collection(db,_0x1df476),_0x337774=query(_0x36e150,where('username','==',_0x4ebfec)),_0x5e6fa4=await getDocs(_0x337774);if(_0x5e6fa4['empty']){_0x51c6bc['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x4eb645['toUpperCase']()+'\x20ladder';return;}const _0x5e5a4e=_0x5e6fa4['docs'][0x0]['data'](),_0x126c1c=parseInt(_0x5e5a4e[_0x2b167f(0x206)])||0x5dc,_0x29435a=await getDocs(_0x36e150);let _0x27e003=null,_0x5d7b3b=-0x1;const _0x36494d=getPlayerRankName(_0x126c1c);_0x29435a['forEach'](_0x475952=>{const _0x441218=_0x475952['data']();if(_0x441218['username']===_0x4ebfec)return;const _0xc218c7=parseInt(_0x441218['eloRating'])||0x5dc,_0x529566=getPlayerRankName(_0xc218c7),_0x17ddc5=Math['abs'](_0xc218c7-_0x126c1c),_0x58a1ce=0x20,_0xa20d7a=0x1/(0x1+Math['pow'](0xa,(_0xc218c7-_0x126c1c)/0x190)),_0x264d6a=Math['round'](_0x58a1ce*(0x1-_0xa20d7a));if(_0x264d6a<=0x0)return;let _0x509960=0x0;const _0x1eeb13=Math['max'](0x0,0x64-_0x17ddc5*0.5),_0x195364=_0x264d6a>=0x3&&_0x264d6a<=0x8?0x32:_0x264d6a>0x0&&_0x264d6a<0xf?0x1e:0xa,_0x26e9ec=_0x36494d===_0x529566?0x28:0x0;_0x509960=_0x1eeb13+_0x195364+_0x26e9ec,_0x509960>_0x5d7b3b&&(_0x27e003=_0x441218,_0x5d7b3b=_0x509960);});if(_0x27e003){const _0x1077ac=parseInt(_0x27e003[_0x2b167f(0x206)])||0x5dc;let _0x8d1f5a='gray';if(_0x1077ac>=0x7d0)_0x8d1f5a='#50C878';else{if(_0x1077ac>=0x708)_0x8d1f5a='#FFD700';else{if(_0x1077ac>=0x640)_0x8d1f5a=_0x2b167f(0x1e0);else _0x1077ac>=0x578&&(_0x8d1f5a='#CD7F32');}}_0x51c6bc['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x126c1c+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x8d1f5a+';\x22>'+_0x27e003['username']+_0x2b167f(0x203);}else _0x51c6bc['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x126c1c+')';}catch(_0x2fb556){console['error']('Error\x20finding\x20best\x20opponent:',_0x2fb556),_0x51c6bc['textContent']=_0x2b167f(0x209);}}auth['onAuthStateChanged'](_0x45148d=>{const _0x4389f7=a25_0x1fb511,_0x4ee608=document[_0x4389f7(0x1c7)](_0x4389f7(0x1f6))&&document['getElementById']('d1-ladder-container')['style'][_0x4389f7(0x21d)]!=='none',_0x1b27e4=document['getElementById'](_0x4389f7(0x21b))&&document['getElementById']('d2-ladder-container')[_0x4389f7(0x1bb)]['display']!=='none',_0x34fdab=document['getElementById']('d3-ladder-container')&&document[_0x4389f7(0x1c7)](_0x4389f7(0x1d8))['style'][_0x4389f7(0x21d)]!=='none',_0x45bc4f=document['getElementById']('duos-ladder-container')&&document['getElementById']('duos-ladder-container')['style']['display']!==_0x4389f7(0x1db),_0x689251=_0x4ee608?'d1':_0x1b27e4?'d2':_0x34fdab?'d3':_0x45bc4f?'duos':'d1';findBestOpponent(_0x689251);}),document[a25_0x1fb511(0x1bf)](a25_0x1fb511(0x22a),()=>{const _0x2b24d1=a25_0x1fb511,_0x42b71d=document['getElementById']('duos-switch'),_0x294e23=document['querySelector'](_0x2b24d1(0x1cb));_0x42b71d&&_0x294e23&&(_0x42b71d[_0x2b24d1(0x1bf)]('change',async _0x5725bc=>{const _0x216def=_0x2b24d1;if(_0x5725bc['target']['checked']){const _0x409fea=auth?.['currentUser'],_0x3aa971=await checkIfUserIsAdmin(_0x409fea);if(!_0x3aa971){_0x5725bc[_0x216def(0x1f3)]();const _0x2adc9c=document['getElementById'](_0x216def(0x1d4));return _0x2adc9c&&(_0x2adc9c['checked']=!![],_0x2adc9c[_0x216def(0x21f)](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x37a7b7=>{const _0x2c6f8a=_0x2b24d1,_0x58ff9d=await checkIfUserIsAdmin(_0x37a7b7);!_0x58ff9d?(_0x42b71d['disabled']=!![],_0x294e23['style']['opacity']='0.5',_0x294e23[_0x2c6f8a(0x1bb)]['cursor']=_0x2c6f8a(0x211),_0x294e23[_0x2c6f8a(0x210)]=_0x2c6f8a(0x225)):(_0x42b71d['disabled']=![],_0x294e23[_0x2c6f8a(0x1bb)]['opacity']='1',_0x294e23[_0x2c6f8a(0x1bb)]['cursor']=_0x2c6f8a(0x1f1),_0x294e23['title']='');}));});async function checkIfUserIsAdmin(_0x2fe404){const _0x5eb1d6=a25_0x1fb511;if(!_0x2fe404)return![];try{const _0xd3dcea=[_0x5eb1d6(0x1de),'brian2af@outlook.com'];if(_0x2fe404['email']&&_0xd3dcea['includes'](_0x2fe404[_0x5eb1d6(0x1d0)]['toLowerCase']()))return!![];const _0x73b9fb=['userProfiles','players',_0x5eb1d6(0x205),'playersD3'],_0x199997=[_0x5eb1d6(0x20b),'owner',_0x5eb1d6(0x1f0),'creative\x20lead'];for(const _0x1dfa4d of _0x73b9fb){try{const _0x5632bc=doc(db,_0x1dfa4d,_0x2fe404[_0x5eb1d6(0x222)]),_0x389617=await getDoc(_0x5632bc);if(_0x389617['exists']()){const _0x1e23a7=_0x389617['data'](),_0x2ae397=(_0x1e23a7[_0x5eb1d6(0x1b8)]||_0x1e23a7['role']||'')['toLowerCase']();if(_0x2ae397&&_0x199997['includes'](_0x2ae397))return!![];}}catch(_0x288ac6){console[_0x5eb1d6(0x20d)](_0x5eb1d6(0x1df)+_0x1dfa4d+':',_0x288ac6);}}return![];}catch(_0x47dd13){return console['error']('Error\x20checking\x20admin\x20status:',_0x47dd13),![];}}function showAdminOnlyMessage(){const _0x173ca3=a25_0x1fb511,_0xa09c66=document[_0x173ca3(0x1c7)]('admin-only-message');_0xa09c66&&_0xa09c66['remove']();const _0x3889c5=document['createElement'](_0x173ca3(0x1dd));_0x3889c5['id']='admin-only-message',_0x3889c5[_0x173ca3(0x1bb)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x3889c5[_0x173ca3(0x1e9)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body'][_0x173ca3(0x204)](_0x3889c5),setTimeout(()=>{_0x3889c5['parentNode']&&_0x3889c5['remove']();},0xbb8);}