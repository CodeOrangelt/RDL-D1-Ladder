const a43_0x1256fa=a43_0x3c86,a43_0x3bb87b=(function(){let _0x4a4eb4=!![];return function(_0x5c090f,_0x578c03){const _0x38b55b=_0x4a4eb4?function(){if(_0x578c03){const _0x511285=_0x578c03['apply'](_0x5c090f,arguments);return _0x578c03=null,_0x511285;}}:function(){};return _0x4a4eb4=![],_0x38b55b;};}()),a43_0x5f1c31=a43_0x3bb87b(this,function(){const _0xe4965f=a43_0x3c86;let _0x100ead;try{const _0x28e389=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x100ead=_0x28e389();}catch(_0x2964ed){_0x100ead=window;}const _0x355ead=_0x100ead['console']=_0x100ead['console']||{},_0x196798=['log',_0xe4965f(0xc9),'info','error','exception','table','trace'];for(let _0x22123b=0x0;_0x22123b<_0x196798[_0xe4965f(0xc2)];_0x22123b++){const _0x1c0dd1=a43_0x3bb87b[_0xe4965f(0xc3)]['prototype']['bind'](a43_0x3bb87b),_0x10d6da=_0x196798[_0x22123b],_0x546a94=_0x355ead[_0x10d6da]||_0x1c0dd1;_0x1c0dd1['__proto__']=a43_0x3bb87b['bind'](a43_0x3bb87b),_0x1c0dd1[_0xe4965f(0xc4)]=_0x546a94['toString']['bind'](_0x546a94),_0x355ead[_0x10d6da]=_0x1c0dd1;}});a43_0x5f1c31();function a43_0x4a14(){const _0x2de65c=['Just\x20now','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','toDate','getElementById','username','readyPlayers','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','length','constructor','toString','lastUpdated','Error\x20removing\x20player\x20from\x20queue:','none','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','warn','m\x20in\x20queue','error'];a43_0x4a14=function(){return _0x2de65c;};return a43_0x4a14();}import{db}from'./firebase-config.js';function a43_0x3c86(_0x1db622,_0x14a320){const _0x5f1c31=a43_0x4a14();return a43_0x3c86=function(_0x3bb87b,_0x25d15f){_0x3bb87b=_0x3bb87b-0xba;let _0x4a14b5=_0x5f1c31[_0x3bb87b];return _0x4a14b5;},a43_0x3c86(_0x1db622,_0x14a320);}import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a43_0x1256fa(0xc0)),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x387189){const _0x25209e=a43_0x1256fa,_0x250f6e=document[_0x25209e(0xbe)]('queue-container');if(!_0x250f6e)return;if(_0x387189[_0x25209e(0xc2)]===0x0){_0x250f6e['style']['display']=_0x25209e(0xc7);return;}_0x250f6e['style']['display']='block';let _0x43cf73=_0x25209e(0xc1);_0x387189[_0x25209e(0xbb)](_0xa96c4c=>{const _0x23d342=_0x25209e;_0x43cf73+=_0x23d342(0xc8)+(_0xa96c4c[_0x23d342(0xbf)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0xa96c4c['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x43cf73+=_0x25209e(0xbc),_0x250f6e['innerHTML']=_0x43cf73;}function formatQueueTime(_0x183650){const _0x219c47=a43_0x1256fa;if(!_0x183650)return _0x219c47(0xba);const _0x185801=_0x183650[_0x219c47(0xbd)]?_0x183650['toDate']():new Date(_0x183650),_0x1e9605=new Date(),_0x2c1309=Math['floor']((_0x1e9605-_0x185801)/0xea60);if(_0x2c1309<0x1)return _0x219c47(0xba);return _0x2c1309+_0x219c47(0xca);}async function checkQueueTimeout(_0x4d6dfc){const _0x2b62fd=a43_0x1256fa;if(!_0x4d6dfc['lastUpdated'])return;const _0xe3b667=_0x4d6dfc['lastUpdated'][_0x2b62fd(0xbd)]?_0x4d6dfc['lastUpdated']['toDate']():new Date(_0x4d6dfc[_0x2b62fd(0xc5)]),_0x2e937d=new Date(),_0x38cc0d=Math['floor']((_0x2e937d-_0xe3b667)/0xea60);if(_0x38cc0d>=0x1e)try{const _0x362964=doc(db,_0x2b62fd(0xc0),_0x4d6dfc['id']);await updateDoc(_0x362964,{'isReady':![]});}catch(_0x200c0a){console[_0x2b62fd(0xcb)](_0x2b62fd(0xc6),_0x200c0a);}}const unsubscribe=onSnapshot(readyPlayersRef,_0xedaad5=>{const _0xd34b51=a43_0x1256fa,_0x2d6f39=[];_0xedaad5[_0xd34b51(0xbb)](_0x49f8ac=>{const _0x4c149b=_0xd34b51,_0x4b1864=_0x49f8ac['data']();if(_0x4b1864['isReady']===!![]){const _0x200f2d={'id':_0x49f8ac['id'],'username':_0x4b1864['username'],'lastUpdated':_0x4b1864[_0x4c149b(0xc5)]||new Date()};_0x2d6f39['push'](_0x200f2d),checkQueueTimeout(_0x200f2d);}}),updateQueueDisplay(_0x2d6f39);},_0x9eabb9=>{console['error']('Error\x20in\x20queue\x20listener:',_0x9eabb9);});window['addEventListener']('unload',()=>{unsubscribe();});