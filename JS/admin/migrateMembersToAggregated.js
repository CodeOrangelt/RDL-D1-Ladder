(function(_0x407ce9,_0x264841){const _0x1d86c6=a1_0x1991,_0x5e27e0=_0x407ce9();while(!![]){try{const _0x216fbe=-parseInt(_0x1d86c6(0xe5))/0x1*(parseInt(_0x1d86c6(0xf1))/0x2)+-parseInt(_0x1d86c6(0xe3))/0x3*(parseInt(_0x1d86c6(0xec))/0x4)+parseInt(_0x1d86c6(0xdd))/0x5+-parseInt(_0x1d86c6(0xfd))/0x6+parseInt(_0x1d86c6(0xd7))/0x7+parseInt(_0x1d86c6(0xfa))/0x8+-parseInt(_0x1d86c6(0xf4))/0x9;if(_0x216fbe===_0x264841)break;else _0x5e27e0['push'](_0x5e27e0['shift']());}catch(_0x48304f){_0x5e27e0['push'](_0x5e27e0['shift']());}}}(a1_0x350c,0x34636));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);function a1_0x350c(){const _0x474bde=['set','\x20non-participants','commit','1397865PutQeq','\x20batches...','active','userProfiles','bind','üì•\x20Fetching\x20all\x20collections...','787355UDpMIg','nonParticipants','console','isNonParticipant','bronze','has','3sofCQa','üîí\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.','103ZEoKPY','motto','log','\x20D2,\x20','players','elo','ladder','569484avYcFa','‚úÖ\x20Data\x20fetched:\x20','length','username','push','4060LHcsOE','‚öôÔ∏è\x20Processed\x20','data','1212705EoHMSh','\x20profiles,\x20','error','‚ùå\x20Migration\x20failed:','all','search','3036464vnIPgT','playersD2','üíæ\x20Writing\x20aggregated\x20data...','215616wsutXx','üéâ\x20Successfully\x20migrated\x20','silver','üîÑ\x20Starting\x20migration\x20to\x20aggregated\x20members...','\x20members\x20processed)','prototype','profileImageUrl','{}.constructor(\x22return\x20this\x22)(\x20)','toISOString','size','üí°\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!','ladders','get','forEach','emerald','warn','apply','toString','info','country','__proto__','\x20D3,\x20','\x20D1,\x20','(((.+)+)+)+$','code','permission-denied','name','favoriteWeapon','return\x20(function()\x20','üì¶\x20Prepared\x20batch\x20','exception','favoriteMap','trace','table','constructor'];a1_0x350c=function(){return _0x474bde;};return a1_0x350c();}async function migrateToAggregatedMembers(){const _0x468a44=a1_0x1991,_0x1bb018=(function(){let _0x42df7b=!![];return function(_0x17512c,_0xfcffae){const _0x4cdc86=_0x42df7b?function(){if(_0xfcffae){const _0x422518=_0xfcffae['apply'](_0x17512c,arguments);return _0xfcffae=null,_0x422518;}}:function(){};return _0x42df7b=![],_0x4cdc86;};}()),_0x58652d=_0x1bb018(this,function(){const _0x4bc728=a1_0x1991;return _0x58652d[_0x4bc728(0xc2)]()[_0x4bc728(0xf9)]('(((.+)+)+)+$')[_0x4bc728(0xc2)]()['constructor'](_0x58652d)[_0x4bc728(0xf9)](_0x4bc728(0xc8));});_0x58652d();const _0x56fe28=(function(){let _0x36d7ff=!![];return function(_0x40bbfe,_0x1878c1){const _0x327ca3=_0x36d7ff?function(){const _0x32d7ad=a1_0x1991;if(_0x1878c1){const _0x23795c=_0x1878c1[_0x32d7ad(0xc1)](_0x40bbfe,arguments);return _0x1878c1=null,_0x23795c;}}:function(){};return _0x36d7ff=![],_0x327ca3;};}()),_0x1dbcc9=_0x56fe28(this,function(){const _0x37c89c=a1_0x1991,_0x955142=function(){const _0x56c2ce=a1_0x1991;let _0x15a110;try{_0x15a110=Function(_0x56c2ce(0xcd)+_0x56c2ce(0xb8)+');')();}catch(_0x47b737){_0x15a110=window;}return _0x15a110;},_0x595451=_0x955142(),_0x291a09=_0x595451[_0x37c89c(0xdf)]=_0x595451[_0x37c89c(0xdf)]||{},_0x27a042=['log',_0x37c89c(0xc0),_0x37c89c(0xc3),_0x37c89c(0xf6),_0x37c89c(0xcf),_0x37c89c(0xd2),_0x37c89c(0xd1)];for(let _0x4f96b3=0x0;_0x4f96b3<_0x27a042[_0x37c89c(0xee)];_0x4f96b3++){const _0x2bb4be=_0x56fe28[_0x37c89c(0xd3)][_0x37c89c(0xb6)][_0x37c89c(0xdb)](_0x56fe28),_0x5cbd06=_0x27a042[_0x4f96b3],_0x4dcd8a=_0x291a09[_0x5cbd06]||_0x2bb4be;_0x2bb4be[_0x37c89c(0xc5)]=_0x56fe28[_0x37c89c(0xdb)](_0x56fe28),_0x2bb4be[_0x37c89c(0xc2)]=_0x4dcd8a['toString']['bind'](_0x4dcd8a),_0x291a09[_0x5cbd06]=_0x2bb4be;}});_0x1dbcc9(),console[_0x468a44(0xe7)](_0x468a44(0xb4));try{console[_0x468a44(0xe7)](_0x468a44(0xdc));const [_0x14e2fb,_0x5ceace,_0x2d436b,_0x5a6109,_0x22c8d6]=await Promise[_0x468a44(0xf8)]([getDocs(collection(db,_0x468a44(0xda))),getDocs(collection(db,_0x468a44(0xe9))),getDocs(collection(db,_0x468a44(0xfb))),getDocs(collection(db,'playersD3')),getDocs(collection(db,_0x468a44(0xde)))]);console[_0x468a44(0xe7)](_0x468a44(0xed)+_0x14e2fb[_0x468a44(0xba)]+_0x468a44(0xf5)+_0x5ceace[_0x468a44(0xba)]+_0x468a44(0xc7)+_0x2d436b['size']+_0x468a44(0xe8)+_0x5a6109['size']+_0x468a44(0xc6)+_0x22c8d6[_0x468a44(0xba)]+_0x468a44(0xd5));const _0x50c33e=new Map();_0x14e2fb[_0x468a44(0xbe)](_0x5edd50=>{const _0xcda879=_0x468a44;_0x50c33e['set'](_0x5edd50['id'],_0x5edd50[_0xcda879(0xf3)]());});const _0x1e7ca6=new Map(),_0x3b7d3c=(_0x2728fd,_0x518fa7)=>{const _0x29c0e8=_0x468a44;_0x2728fd[_0x29c0e8(0xbe)](_0x81622=>{const _0x27e9b5=_0x29c0e8,_0x5e09de=_0x81622[_0x27e9b5(0xf3)](),_0x4a6a99=_0x81622['id'];!_0x1e7ca6['has'](_0x4a6a99)&&_0x1e7ca6[_0x27e9b5(0xd4)](_0x4a6a99,{'userId':_0x4a6a99,'username':_0x5e09de[_0x27e9b5(0xef)]||_0x5e09de['name']||'Unknown','ladders':[],'isNonParticipant':![]});const _0x563eab=_0x1e7ca6['get'](_0x4a6a99);_0x563eab[_0x27e9b5(0xbc)][_0x27e9b5(0xf0)]({'ladder':_0x518fa7,'elo':_0x5e09de['eloRating']||_0x5e09de[_0x27e9b5(0xea)]||0x4b0,'active':_0x5e09de[_0x27e9b5(0xd9)]!==![]});});};_0x3b7d3c(_0x5ceace,'D1'),_0x3b7d3c(_0x2d436b,'D2'),_0x3b7d3c(_0x5a6109,'D3'),_0x22c8d6[_0x468a44(0xbe)](_0x2b61cd=>{const _0xfdbf50=_0x468a44,_0x40c1d6=_0x2b61cd[_0xfdbf50(0xf3)](),_0x3aa87b=_0x2b61cd['id'];!_0x1e7ca6[_0xfdbf50(0xe2)](_0x3aa87b)&&(_0x40c1d6[_0xfdbf50(0xef)]||_0x40c1d6['name'])&&_0x1e7ca6[_0xfdbf50(0xd4)](_0x3aa87b,{'userId':_0x3aa87b,'username':_0x40c1d6[_0xfdbf50(0xef)]||_0x40c1d6[_0xfdbf50(0xcb)],'ladders':[],'isNonParticipant':!![]});}),console['log'](_0x468a44(0xf2)+_0x1e7ca6[_0x468a44(0xba)]+'\x20unique\x20members'),console[_0x468a44(0xe7)](_0x468a44(0xfc));const _0x59b890=[];let _0x7c6114=writeBatch(db),_0x18823c=0x0,_0x2613df=0x0;_0x1e7ca6[_0x468a44(0xbe)]((_0x917fe5,_0x249fe2)=>{const _0x4755b0=_0x468a44,_0x15fa6a=_0x50c33e[_0x4755b0(0xbd)](_0x249fe2)||{};let _0x26b9a2=0x0,_0x4da1da=null;if(_0x917fe5['ladders'][_0x4755b0(0xee)]>0x0){const _0x5866c7=_0x917fe5[_0x4755b0(0xbc)]['sort']((_0x397c39,_0x4292a0)=>_0x4292a0[_0x4755b0(0xea)]-_0x397c39[_0x4755b0(0xea)]);_0x26b9a2=_0x5866c7[0x0][_0x4755b0(0xea)],_0x4da1da=_0x5866c7[0x0][_0x4755b0(0xeb)];}const _0x187346={'userId':_0x249fe2,'username':_0x917fe5[_0x4755b0(0xef)],'profileImageUrl':_0x15fa6a[_0x4755b0(0xb7)]||null,'country':_0x15fa6a[_0x4755b0(0xc4)]||null,'motto':_0x15fa6a[_0x4755b0(0xe6)]||null,'favoriteMap':_0x15fa6a[_0x4755b0(0xd0)]||null,'favoriteWeapon':_0x15fa6a[_0x4755b0(0xcc)]||null,'isNonParticipant':_0x917fe5[_0x4755b0(0xe0)],'ladders':_0x917fe5['ladders'],'primaryLadder':_0x4da1da,'highestElo':_0x26b9a2,'rank':getPlayerRank(_0x26b9a2),'lastUpdated':new Date(),'migrationTimestamp':new Date()[_0x4755b0(0xb9)]()},_0x51296c=doc(collection(db,'aggregatedMembers'),_0x249fe2);_0x7c6114[_0x4755b0(0xd4)](_0x51296c,_0x187346),_0x18823c++,_0x2613df++,_0x18823c>=0x1c2&&(_0x59b890[_0x4755b0(0xf0)](_0x7c6114['commit']()),_0x7c6114=writeBatch(db),_0x18823c=0x0,console[_0x4755b0(0xe7)](_0x4755b0(0xce)+_0x59b890['length']+'\x20('+_0x2613df+_0x4755b0(0xb5)));}),_0x18823c>0x0&&_0x59b890[_0x468a44(0xf0)](_0x7c6114[_0x468a44(0xd6)]()),console[_0x468a44(0xe7)]('üöÄ\x20Executing\x20'+_0x59b890[_0x468a44(0xee)]+_0x468a44(0xd8)),await Promise[_0x468a44(0xf8)](_0x59b890),console['log'](_0x468a44(0xb2)+_0x1e7ca6[_0x468a44(0xba)]+'\x20members\x20to\x20aggregated\x20collection!'),console['log'](_0x468a44(0xbb));}catch(_0x5d8500){console[_0x468a44(0xf6)](_0x468a44(0xf7),_0x5d8500),_0x5d8500[_0x468a44(0xc9)]===_0x468a44(0xca)&&console[_0x468a44(0xf6)](_0x468a44(0xe4));}}function a1_0x1991(_0x3537fa,_0x25bc69){const _0x486bcd=a1_0x350c();return a1_0x1991=function(_0x41b49b,_0x56122c){_0x41b49b=_0x41b49b-0xb2;let _0x4e63d7=_0x486bcd[_0x41b49b];return _0x4e63d7;},a1_0x1991(_0x3537fa,_0x25bc69);}function getPlayerRank(_0xfe5fbf){const _0x4722aa=a1_0x1991;if(_0xfe5fbf>=0x7d0)return _0x4722aa(0xbf);if(_0xfe5fbf>=0x708)return'gold';if(_0xfe5fbf>=0x640)return _0x4722aa(0xb3);if(_0xfe5fbf>=0x578)return _0x4722aa(0xe1);return'unranked';}migrateToAggregatedMembers();