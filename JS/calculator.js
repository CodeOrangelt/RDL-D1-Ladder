function a9d(a,b){const c=a9c();return a9d=function(d,e){d=d-0xdc;let f=c[d];if(a9d['AVUtJC']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a9d['pReZcE']=g,a=arguments,a9d['AVUtJC']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a9d['pReZcE'](f),a[i]=f):f=j,f;},a9d(a,b);}const a9o=a9d;(function(a,b){const k=a9d,c=a();while(!![]){try{const d=-parseInt(k(0x123))/0x1*(-parseInt(k(0x10d))/0x2)+parseInt(k(0x126))/0x3*(-parseInt(k(0xdc))/0x4)+parseInt(k(0xf4))/0x5+parseInt(k(0xf8))/0x6+-parseInt(k(0x134))/0x7*(parseInt(k(0xed))/0x8)+parseInt(k(0x109))/0x9+-parseInt(k(0x106))/0xa*(-parseInt(k(0xe2))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a9c,0x51c57));const a9b=(function(){let a=!![];return function(b,c){const d=a?function(){if(c){const e=c['apply'](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a9a=a9b(this,function(){const l=a9d;let a;try{const d=Function('return\x20(function()\x20'+l(0xf9)+');');a=d();}catch(f){a=window;}const b=a[l(0x138)]=a[l(0x138)]||{},c=[l(0xfd),l(0x12d),l(0x133),'error','exception',l(0xf2),l(0xf6)];for(let g=0x0;g<c['length'];g++){const h=a9b[l(0xe6)]['prototype'][l(0x11f)](a9b),i=c[g],j=b[i]||h;h['__proto__']=a9b[l(0x11f)](a9b),h['toString']=j[l(0xf0)]['bind'](j),b[i]=h;}});function a9c(){const D=['zxHWzwn0zwrty29YzvDPBM5LCG','Dgv4DenVBNrLBNq','Dw5Yyw5Rzwq','iJ4kicaGicaGicaGicaGicaGia','mtiWohbnyxvktq','yMXVy2S','i0mWqZbdma','Dg9tDhjPBMC','y2XHC3nmAxn0','DgfIBgu','q3vYCMvUDcbfte86ia','mtaWmZeZnuHIDNjTrq','CMvMCMvZAc1WBgf5zxjZ','DhjHy2u','D2LUBMvYlwn1CNjLBNqTzwXV','mJi4mZG2ngfMvMneAq','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','zNjVBq','BMv3v2LUBMvYuMf0Aw5N','Aw5PDa','Bg9N','C29YDa','CM91BMq','Bg9ZzxiTBMv3lwvSBW','cIaGcKv4CgvJDgvKifnJB3jLCZOkica','y2fSy3vSyxrPB24TDgv4Da','CgXHEwvYCW','Bg9HzfbSyxLLCNm','iIbKyxrHlwvSBZ0I','mJCWodb2CLvksgy','DMfSDwvZ','zwXVuMf0Aw5N','mJyWotK4mNvTqwvdsq','z3jPza','zwXV','CgXHEwvYC0qZ','ntqZotruvenXvw0','tMv3ievmtZOG','D2LUBMvYlw5LDY1LBg8','BgfKzgvY','zgLZCgXHEunHBgn1Bgf0Aw9Urgv0ywLSCW','C2v0','y2fSy3vSyxrLruXp','C3r5Bgu','z2v0ruXpq29SB3i','icSG','ihbSyxLLCNmGzNjVBsa','y2HHBMDL','CMvTB3zL','zgLZCgXHEu1HDgnOuMvZDwX0','DgfYz2v0','zM9YrwfJAa','yNjVBNPL','tg93ievmtYbNywLUlG','yMLUza','ywn0AxzL','z2v0','y29SB3i','muv0rhfUAG','C2v0DxbfDMvUDeXPC3rLBMvYCW','zxHWzwn0zwrty29YzuXVC2vY','ntmWmZGYrg9JwxPX','pg9WDgLVBIb2ywX1zt0I','cIaGicaGicaG','ugXHEwvYig5VDcbMB3vUza','D2LUBMvYq2HHBMDL','BMv3tg9ZzxjsyxrPBMC','D2LUBMvYlxnLBgvJDa','D2fYBG','Cg9ZAxrPB24','Bg9ZzxiTBMfTzq','y2XPy2S','igXHzgrLCG','DxnLCM5HBwu','Aw5MBW','mJm2nJDjtK9RA1q','zxjYB3i','CxvLCNLtzwXLy3rVCKfSBa','zgvZyW','y29UC29Szq','oefjtu9Pqq','z2v0rwXLBwvUDej5swq','ywrK','id0G','cGPgB3jTDwXHifvZzwq6cIaGtMv3ifjHDgLUzYa9ie9SzcbsyxrPBMCGkYbllwzHy3rVCIddLYaOqwn0DwfSifnJB3jLic0GrxHWzwn0zwqGu2nVCMuPcIaGsY1Mywn0B3iGpsaZmGOGiefJDhvHBcbty29YztOGv2LUBMvYid0GmsWGtg9ZzxiGpsaWcIaGcG','BM9Uzq','mtiYmw9WyxDxyW','Dg9gAxHLza','zgLZCgXHEq','Aw5Uzxjive1m','y29UC3rYDwn0B3i','DxbKyxrLrhjVCgrVD25Z','y3vYCMvUDeXHzgrLCG'];a9c=function(){return D;};return a9c();}a9a();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const m=a9d;this[m(0xe8)]='D1',this['players']=new Map(),this[m(0xfc)]();}['init'](){const n=a9d;this['setupEventListeners'](),this[n(0x104)]();}[a9o(0x124)](){const p=a9o;document[p(0x136)]('.ladder-btn')[p(0x11c)](a=>{const q=p;a['addEventListener'](q(0x130),b=>{const r=q;document['querySelectorAll']('.ladder-btn')[r(0x11c)](c=>c[r(0xf1)][r(0x119)](r(0x120))),b['target'][r(0xf1)][r(0xde)](r(0x120)),this['currentLadder']=b[r(0x11b)]['dataset'][r(0x110)],this[r(0x104)]();});}),document['getElementById'](p(0xf5))['addEventListener']('click',()=>{this['loadPlayers']();}),document[p(0xdd)]('winner-select')['addEventListener']('change',()=>this['calculateMatch']()),document['getElementById']('loser-select')['addEventListener'](p(0x118),()=>this['calculateMatch']());}async['loadPlayers'](){const s=a9o;try{this[s(0xe7)]('<option\x20value=\x22\x22>Loading\x20players...</option>');const a=this['currentLadder']==='D1'?s(0x103):this['currentLadder']==='D2'?'playersD2':s(0x10c),b=collection(db,a),c=query(b,orderBy('eloRating',s(0x137))),d=await getDocs(c);this[s(0x103)]['clear'](),d[s(0x11c)](e=>{const t=s,f=e['data']();f['username']&&this[t(0x103)][t(0x112)](f[t(0x132)],{'id':e['id'],'username':f['username'],'elo':parseInt(f[t(0x108)])||0x4b0,'position':f[t(0x12e)]||0x3e7});}),this['updateDropdowns'](),console['log']('Loaded\x20'+this['players']['size']+s(0x117)+this['currentLadder']+s(0x131));}catch(e){console[s(0x135)]('Error\x20loading\x20players:',e),this[s(0xe7)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}[a9o(0xe7)](a=null){const u=a9o,b=document['getElementById'](u(0x12c)),c=document['getElementById']('loser-select');if(a){b['innerHTML']=a,c['innerHTML']=a;return;}let d='<option\x20value=\x22\x22>Select\x20a\x20player...</option>';const e=Array[u(0xfa)](this[u(0x103)][u(0x107)]())[u(0xfe)]((f,g)=>g[u(0x10b)]-f[u(0x10b)]);e['forEach'](f=>{const v=u,g=this['getELORankClass'](f['elo']);d+=v(0x127)+f[v(0x132)]+v(0x105)+f[v(0x10b)]+'\x22\x20class=\x22'+g+v(0xec)+f['username']+'\x20('+f['elo']+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),b[u(0xe5)]=d,c['innerHTML']=d;}['calculateMatch'](){const w=a9o,a=document[w(0xdd)](w(0x12c)),b=document[w(0xdd)]('loser-select'),c=a['value'],d=b['value'];if(!c||!d){document[w(0xdd)]('match-result')[w(0x114)]['display']=w(0xe1),document['getElementById']('calculation-details')['style'][w(0xe4)]=w(0xe1);return;}if(c===d){alert('Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser');return;}const e=this[w(0x103)][w(0x121)](c),f=this[w(0x103)]['get'](d);if(!e||!f){console[w(0x135)](w(0x129));return;}const g=this['calculateELO'](e[w(0x10b)],f['elo']);this[w(0x11a)](e,f,g),this[w(0x111)](e,f,g);}[a9o(0x113)](a,b,c=0x20){const x=a9o,d=0x1/(0x1+Math['pow'](0xa,(b-a)/0x190)),e=0x1/(0x1+Math['pow'](0xa,(a-b)/0x190)),f=a+c*(0x1-d),g=b+c*(0x0-e);return{'winnerChange':Math['round'](f-a),'loserChange':Math['round'](g-b),'newWinnerRating':Math['round'](f),'newLoserRating':Math[x(0xff)](g),'expectedScoreWinner':d,'expectedScoreLoser':e};}[a9o(0x11a)](a,b,c){const y=a9o;document[y(0xdd)]('winner-name')[y(0xea)]=a['username'],document['getElementById'](y(0xf7))['textContent']='Current\x20ELO:\x20'+a['elo'],document['getElementById']('winner-elo-change')[y(0xea)]='+'+c[y(0x12a)],document['getElementById'](y(0x10f))[y(0xea)]='New\x20ELO:\x20'+c[y(0xfb)],document[y(0xdd)](y(0x12f))[y(0xea)]=b[y(0x132)],document[y(0xdd)]('loser-current-elo')[y(0xea)]=y(0xf3)+b['elo'],document[y(0xdd)]('loser-elo-change')[y(0xea)]=''+c['loserChange'],document[y(0xdd)](y(0x100))['textContent']=y(0x10e)+c[y(0x12b)];const d=this['getELOColor'](a[y(0x10b)]),e=this['getELOColor'](b[y(0x10b)]);document['getElementById']('winner-name')[y(0x114)]['color']=d,document['getElementById']('loser-name')[y(0x114)][y(0x122)]=e,document['getElementById']('match-result')[y(0x114)]['display']=y(0x10a);}[a9o(0x111)](a,b,c){const z=a9o,d='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+a['username']+':\x20'+a['elo']+'\x0a\x20\x20'+b[z(0x132)]+':\x20'+b['elo']+z(0x101)+a['username']+':\x20'+c[z(0xe9)][z(0xe3)](0x3)+'\x20('+(c['expectedScoreWinner']*0x64)[z(0xe3)](0x1)+'%\x20chance\x20to\x20win)\x0a\x20\x20'+b[z(0x132)]+':\x20'+c[z(0x125)][z(0xe3)](0x3)+'\x20('+(c['expectedScoreLoser']*0x64)[z(0xe3)](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+a['username']+':\x20'+a[z(0x10b)]+'\x20+\x20'+c[z(0x12a)]+z(0xdf)+c[z(0xfb)]+'\x0a\x20\x20'+b[z(0x132)]+':\x20'+b[z(0x10b)]+z(0x116)+c['loserChange']+z(0xdf)+c[z(0x12b)]+z(0xe0)+(c[z(0x12a)]>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(c[z(0x12a)]<0x5?z(0x11e):'')+z(0x128);document[z(0xdd)](z(0x102))[z(0xea)]=d,document['getElementById']('calculation-details')[z(0x114)][z(0xe4)]=z(0xee);}[a9o(0x115)](a){const A=a9o;if(a>=0x7d0)return'#50C878';else{if(a>=0x708)return'#FFD700';else{if(a>=0x640)return A(0xef);else{if(a>=0x578)return'#CD7F32';else return'#808080';}}}}['getELORankClass'](a){const B=a9o;if(a>=0x7d0)return'emerald';else{if(a>=0x708)return'gold';else{if(a>=0x640)return'silver';else{if(a>=0x578)return B(0x11d);else return B(0xeb);}}}}}document['addEventListener']('DOMContentLoaded',()=>{const C=a9o;document[C(0xdd)]('sandbox')&&new ELOCalculator();});