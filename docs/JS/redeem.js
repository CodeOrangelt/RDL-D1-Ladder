const a0_0x204274=a0_0x9b06;function a0_0x9b06(_0x28db47,_0xf50179){const _0x169c23=a0_0x7d7f();return a0_0x9b06=function(_0x328f85,_0x3adf00){_0x328f85=_0x328f85-0x109;let _0x48bcb3=_0x169c23[_0x328f85];return _0x48bcb3;},a0_0x9b06(_0x28db47,_0xf50179);}(function(_0x18962d,_0x50837c){const _0x39cab8=a0_0x9b06,_0x4421cb=_0x18962d();while(!![]){try{const _0x1837ac=parseInt(_0x39cab8(0x163))/0x1*(parseInt(_0x39cab8(0x189))/0x2)+-parseInt(_0x39cab8(0x13c))/0x3+parseInt(_0x39cab8(0x193))/0x4+-parseInt(_0x39cab8(0x181))/0x5*(-parseInt(_0x39cab8(0x12b))/0x6)+parseInt(_0x39cab8(0x19b))/0x7+-parseInt(_0x39cab8(0x149))/0x8*(-parseInt(_0x39cab8(0x18e))/0x9)+-parseInt(_0x39cab8(0x118))/0xa*(parseInt(_0x39cab8(0x19a))/0xb);if(_0x1837ac===_0x50837c)break;else _0x4421cb['push'](_0x4421cb['shift']());}catch(_0x304431){_0x4421cb['push'](_0x4421cb['shift']());}}}(a0_0x7d7f,0x9bbec));const a0_0x3adf00=(function(){let _0x3faa15=!![];return function(_0x2c1d2a,_0x5f49f3){const _0x4dce45=_0x3faa15?function(){if(_0x5f49f3){const _0x29ec7c=_0x5f49f3['apply'](_0x2c1d2a,arguments);return _0x5f49f3=null,_0x29ec7c;}}:function(){};return _0x3faa15=![],_0x4dce45;};}()),a0_0x328f85=a0_0x3adf00(this,function(){const _0x1142a6=a0_0x9b06,_0x74e105=function(){let _0x3cdb71;try{_0x3cdb71=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x18272e){_0x3cdb71=window;}return _0x3cdb71;},_0x449edf=_0x74e105(),_0x285abc=_0x449edf[_0x1142a6(0x186)]=_0x449edf[_0x1142a6(0x186)]||{},_0x20f941=['log','warn','info','error','exception','table','trace'];for(let _0xc8ee84=0x0;_0xc8ee84<_0x20f941[_0x1142a6(0x185)];_0xc8ee84++){const _0xa5ddc3=a0_0x3adf00['constructor'][_0x1142a6(0x187)][_0x1142a6(0x162)](a0_0x3adf00),_0x4bb5cb=_0x20f941[_0xc8ee84],_0x265426=_0x285abc[_0x4bb5cb]||_0xa5ddc3;_0xa5ddc3['__proto__']=a0_0x3adf00['bind'](a0_0x3adf00),_0xa5ddc3[_0x1142a6(0x166)]=_0x265426[_0x1142a6(0x166)][_0x1142a6(0x162)](_0x265426),_0x285abc[_0x4bb5cb]=_0xa5ddc3;}});a0_0x328f85();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':a0_0x204274(0x165),'description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':a0_0x204274(0x11a),'description':a0_0x204274(0x123)},'cyberpunk':{'price':0x190,'name':a0_0x204274(0x148),'description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':a0_0x204274(0x173)},'gold':{'price':0x320,'name':a0_0x204274(0x116),'description':'Only\x20the\x20best\x20get\x20this\x20one'},'emerald':{'price':0x3e8,'name':'Emerald','description':a0_0x204274(0x1a3)},'cockpit':{'price':0x4b0,'name':'Cockpit','description':a0_0x204274(0x112)}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':a0_0x204274(0x19f),'image':'../images/tokens/subgame/pwr01.gif','category':'powerup'},'fan':{'price':0x96,'name':'Fan','description':a0_0x204274(0x13d),'image':a0_0x204274(0x174),'category':'fun'},'marker':{'price':0xfa,'name':'Marker','description':'Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','image':'../images/tokens/Marker.gif','category':a0_0x204274(0x127)},'laser':{'price':0x12c,'name':'Laser','description':a0_0x204274(0x152),'image':'../images/tokens/Laser.gif','category':a0_0x204274(0x178)},'pbomb':{'price':0x15e,'name':'Proximity\x20Bomb','description':a0_0x204274(0x14d),'image':'../images/tokens/subgame/pbomb.gif','category':a0_0x204274(0x178)},'fusion':{'price':0x15e,'name':a0_0x204274(0x10d),'description':'Devastating\x20fusion\x20weapon\x20technology','image':'../images/tokens/subgame/fusion.gif','category':a0_0x204274(0x178)},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':'Blob\x20Token\x201','description':'A\x20mysterious\x20purple\x20blob\x20token','image':'../images/tokens/blob01.gif','category':'blob'},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':'High-powered\x20plasma\x20cannon\x20token.','image':a0_0x204274(0x14a),'category':a0_0x204274(0x178)},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':'Become\x20one\x20with\x20the\x20shadows','image':a0_0x204274(0x135),'category':a0_0x204274(0x17d)},'pwr02':{'price':0x258,'name':'Shield\x20Orb','description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':'powerup'},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':'Fast\x20and\x20furious\x20missile\x20token.','image':'../images/tokens/Mercury.gif','category':'weapon'},'plasmablobl':{'price':0x258,'name':'Plasma\x20Blob','description':'A\x20mysterious\x20plasma\x20blob.','image':'../images/tokens/Plasmablobl.gif','category':'blob'},'smissile':{'price':0x28a,'name':'Smart\x20Missile','description':'Intelligent\x20targeting\x20system','image':'../images/tokens/subgame/smissile.gif','category':'weapon'},'smartmine':{'price':0x2ee,'name':'Smart\x20Mine','description':'A\x20cunning\x20explosive\x20device.','image':'../images/tokens/Smartmine.gif','category':a0_0x204274(0x178)},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':a0_0x204274(0x12a),'image':'../images/tokens/subgame/mmissile.gif','category':'weapon'},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':a0_0x204274(0x168),'image':'../images/tokens/gauge18.gif','category':'equipment'},'extralife':{'price':0x320,'name':'Extra\x20Life','description':'A\x20rare\x20extra\x20life\x20token.','image':a0_0x204274(0x124),'category':'special'},'hostage':{'price':0x3b6,'name':'Hostage','description':a0_0x204274(0x19d),'image':'../images/tokens/Hostage.gif','category':'special'},'phoenix':{'price':0x3b6,'name':'Phoenix\x20Cannon','description':'Fiery\x20phoenix\x20cannon\x20token.','image':'../images/tokens/Phoenix.gif','category':a0_0x204274(0x178)},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':'Invulnerability','description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':'powerup'},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':'The\x20final\x20blob\x20in\x20the\x20collection','image':a0_0x204274(0x175),'category':'blob'},'reactor':{'price':0x7d0,'name':a0_0x204274(0x128),'description':'The\x20heart\x20of\x20every\x20mine.','image':'../images/tokens/Reactor.gif','category':a0_0x204274(0x17d)},'pyro':{'price':0xbb8,'name':'Pyro','description':'The\x20iconic\x20Pyro-GX\x20ship.','image':'../images/tokens/Pyro.gif','category':'ship'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener'](a0_0x204274(0x1a2),()=>{const _0xa6d818=a0_0x204274;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById'](_0xa6d818(0x140)),pointsDisplay=document[_0xa6d818(0x117)]('user-points'),authWarning=document['getElementById'](_0xa6d818(0x12e)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x1baf03=>{const _0x4b9116=a0_0x9b06;if(_0x1baf03){console[_0x4b9116(0x155)](_0x4b9116(0x15b),_0x1baf03['displayName']||_0x1baf03[_0x4b9116(0x157)]);if(authWarning)authWarning['style']['display']='none';if(storeContainer)storeContainer['style'][_0x4b9116(0x198)]='block';await loadUserData(_0x1baf03),updateThemeButtons(),updateTokenButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer[_0x4b9116(0x199)]['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x11ab4f){const _0x588de8=a0_0x204274;try{const _0x25c42f=doc(db,_0x588de8(0x138),_0x11ab4f['uid']),_0x90a583=await getDoc(_0x25c42f);if(_0x90a583['exists']()){const _0x48b204=_0x90a583['data']();userData={'points':_0x48b204[_0x588de8(0x171)]||0x0,'inventory':_0x48b204[_0x588de8(0x119)]||[],'isAdmin':_0x48b204['isAdmin']||![],'equippedToken':_0x48b204['equippedToken']||null},pointsDisplay&&(pointsDisplay[_0x588de8(0x18c)]=userData['points'][_0x588de8(0x14c)]()),window[_0x588de8(0x191)]=userData['isAdmin'],userData[_0x588de8(0x10b)]&&(console['log'](_0x588de8(0x11d)),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console[_0x588de8(0x155)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+_0x588de8(0x170)+userData[_0x588de8(0x119)]['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||'none'));}else await setDoc(_0x25c42f,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x11ab4f['displayName']||_0x11ab4f['email']?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console[_0x588de8(0x155)]('New\x20user\x20profile\x20created');}catch(_0x54178d){console['error']('Error\x20loading\x20user\x20data:',_0x54178d);}}function userOwnsTheme(_0x581451){if(THEMES[_0x581451]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x581451);}function userOwnsToken(_0x14f9e0){const _0x30adff=a0_0x204274;return userData[_0x30adff(0x119)][_0x30adff(0x197)]('token_'+_0x14f9e0);}function userHasTokenEquipped(_0xf81d34){return userData['equippedToken']===_0xf81d34;}function getEquippedToken(){return userData['equippedToken']||null;}async function purchaseTheme(_0x33aecd){const _0xd58976=a0_0x204274,_0xb2114a=auth['currentUser'];if(!_0xb2114a)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes',_0xd58976(0x15f)),![];const _0x2df9d4=THEMES[_0x33aecd];if(!_0x2df9d4)return console['error']('Theme\x20'+_0x33aecd+'\x20not\x20found'),![];if(userData['points']<_0x2df9d4['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x2df9d4[_0xd58976(0x184)]-userData['points'])+'\x20more\x20points.',_0xd58976(0x15f)),![];if(userOwnsTheme(_0x33aecd))return showMessage('You\x20already\x20own\x20the\x20'+_0x2df9d4['name']+_0xd58976(0x190),'info'),![];try{return await processPurchase(_0x33aecd,_0x2df9d4,'theme');}catch(_0x5097e3){return console['error']('Theme\x20purchase\x20failed:',_0x5097e3),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0xd58976(0x15f)),![];}}async function purchaseToken(_0x43029a){const _0x4ac245=a0_0x204274,_0x285159=auth[_0x4ac245(0x114)];if(!_0x285159)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens',_0x4ac245(0x15f)),![];const _0x133016=TOKENS[_0x43029a];if(!_0x133016)return console['error'](_0x4ac245(0x145)+_0x43029a+'\x20not\x20found'),![];if(userData['points']<_0x133016[_0x4ac245(0x184)])return showMessage(_0x4ac245(0x159)+(_0x133016['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsToken(_0x43029a))return showMessage('You\x20already\x20own\x20the\x20'+_0x133016[_0x4ac245(0x18a)]+'\x20token','info'),![];try{return await processPurchase(_0x43029a,_0x133016,'token');}catch(_0x5ab28d){return console['error']('Token\x20purchase\x20failed:',_0x5ab28d),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}async function processPurchase(_0x5372a7,_0x39c54d,_0x2f0e67){const _0x5c5adb=a0_0x204274,_0x295b88=auth['currentUser'];try{const _0x31ffd8=doc(db,'userProfiles',_0x295b88['uid']),_0x2255cf=await getDoc(_0x31ffd8);if(!_0x2255cf['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x2c9835=_0x2255cf['data'](),_0x3116c1=_0x2c9835['points']||0x0,_0xfd895e=_0x2c9835['inventory']||[];if(_0x3116c1<_0x39c54d['price'])return showMessage(_0x5c5adb(0x147),'error'),![];if(_0xfd895e[_0x5c5adb(0x197)](_0x2f0e67+'_'+_0x5372a7))return showMessage(_0x5c5adb(0x11c)+_0x2f0e67,'info'),![];const _0x1ca786=_0x3116c1-_0x39c54d[_0x5c5adb(0x184)],_0x5ca146=[..._0xfd895e,_0x2f0e67+'_'+_0x5372a7];await updateDoc(_0x31ffd8,{'points':_0x1ca786,'inventory':_0x5ca146,'lastPurchase':serverTimestamp()});if(_0x2f0e67==='token')try{const _0x32438c=doc(db,'userTokens',_0x295b88['uid']),_0x39dff1=await getDoc(_0x32438c);let _0x58478f=[];_0x39dff1['exists']()&&(_0x58478f=_0x39dff1[_0x5c5adb(0x134)]()[_0x5c5adb(0x164)]||[]);const _0x16d2f2=new Date();_0x58478f[_0x5c5adb(0x156)]({'tokenId':_0x5372a7,'tokenName':_0x39c54d['name'],'tokenImage':_0x39c54d[_0x5c5adb(0x17e)],'category':_0x39c54d['category'],'purchasedAt':_0x16d2f2,'price':_0x39c54d['price'],'equipped':![]}),await setDoc(_0x32438c,{'userId':_0x295b88['uid'],'username':_0x2c9835[_0x5c5adb(0x17c)]||_0x295b88['displayName']||_0x5c5adb(0x188),'tokens':_0x58478f,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache===_0x5c5adb(0x15c)&&clearTokenCache(_0x295b88['uid']),console['log'](_0x5c5adb(0x177)+_0x5372a7+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x1d5663){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:',_0x1d5663),_0x1d5663['code']==='permission-denied'?console[_0x5c5adb(0x155)]('üîß\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console['error']('Unexpected\x20token\x20error:',_0x1d5663);}try{await addDoc(collection(db,'transactions'),{'userId':_0x295b88['uid'],'userEmail':_0x295b88['email'],'itemId':_0x2f0e67+'_'+_0x5372a7,'itemTitle':_0x39c54d['name'],'price':_0x39c54d[_0x5c5adb(0x184)],'type':'purchase','category':_0x2f0e67,'timestamp':serverTimestamp()});}catch(_0x344f6d){console['warn'](_0x5c5adb(0x131),_0x344f6d);}return userData['points']=_0x1ca786,userData[_0x5c5adb(0x119)]=_0x5ca146,pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),updateTokenButtons(),_0x2f0e67==='theme'&&updateThemeButtons(),console['log']('‚úÖ\x20Purchased\x20'+_0x39c54d['name']+'\x20for\x20'+_0x39c54d['price']+'\x20points'),showMessage('Successfully\x20purchased\x20'+_0x39c54d['name']+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0x42219a){console['error']('Purchase\x20processing\x20error:',_0x42219a);if(_0x42219a['code']==='permission-denied')showMessage('Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.',_0x5c5adb(0x15f));else{if(_0x42219a['code']===_0x5c5adb(0x15a))showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.',_0x5c5adb(0x15f));else _0x42219a['code']==='unauthenticated'?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.','error'):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error');}return![];}}async function equipToken(_0x449169){const _0x2e18b1=a0_0x204274,_0x58bdc7=auth['currentUser'];if(!_0x58bdc7)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens',_0x2e18b1(0x15f)),![];const _0x272643=TOKENS[_0x449169];if(!_0x272643)return console[_0x2e18b1(0x15f)](_0x2e18b1(0x145)+_0x449169+_0x2e18b1(0x130)),![];if(!userOwnsToken(_0x449169))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','error'),![];try{const _0x96fb7=doc(db,'userProfiles',_0x58bdc7['uid']);await updateDoc(_0x96fb7,{'equippedToken':_0x449169,'lastTokenEquip':serverTimestamp()});try{const _0x225c00=doc(db,'userTokens',_0x58bdc7['uid']),_0x32d341=await getDoc(_0x225c00);if(_0x32d341[_0x2e18b1(0x132)]()){const _0x492fb1=_0x32d341[_0x2e18b1(0x134)](),_0x4c63aa=_0x492fb1['tokens']||[],_0x717684=_0x4c63aa[_0x2e18b1(0x10f)](_0x24f84f=>({..._0x24f84f,'equipped':_0x24f84f['tokenId']===_0x449169}));await updateDoc(_0x225c00,{'tokens':_0x717684,'equippedToken':_0x449169,'lastUpdated':serverTimestamp()});}}catch(_0x3562ca){console[_0x2e18b1(0x144)](_0x2e18b1(0x196),_0x3562ca);}return userData['equippedToken']=_0x449169,typeof clearTokenCache==='function'&&(clearTokenCache(_0x58bdc7[_0x2e18b1(0x141)]),clearTokenCache()),setTimeout(()=>{const _0x260e4a=_0x2e18b1;window['displayLadder']&&typeof window[_0x260e4a(0x126)]==='function'&&(console['log'](_0x260e4a(0x13e)),window['displayLadder'](!![])),window['RedeemStore']&&typeof window['RedeemStore']['refreshUI']==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console[_0x2e18b1(0x155)](_0x2e18b1(0x136)+_0x272643['name']),showMessage(_0x272643['name']+_0x2e18b1(0x10c),_0x2e18b1(0x125)),!![];}catch(_0x443562){return console[_0x2e18b1(0x15f)]('Token\x20equip\x20failed:',_0x443562),_0x443562['code']==='permission-denied'?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','warning'):showMessage('Failed\x20to\x20equip\x20token:\x20'+_0x443562[_0x2e18b1(0x176)],'error'),![];}}async function unequipToken(){const _0x24183a=a0_0x204274,_0x4290f4=auth[_0x24183a(0x114)];if(!_0x4290f4)return showMessage('Please\x20sign\x20in\x20to\x20unequip\x20tokens','error'),![];if(!userData[_0x24183a(0x154)])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x26a293=doc(db,'userProfiles',_0x4290f4['uid']);await updateDoc(_0x26a293,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x5960c4=doc(db,'userTokens',_0x4290f4['uid']),_0xd67738=await getDoc(_0x5960c4);if(_0xd67738['exists']()){const _0x3e9d96=_0xd67738['data'](),_0x266814=_0x3e9d96['tokens']||[],_0x46ef28=_0x266814[_0x24183a(0x10f)](_0x4bccc6=>({..._0x4bccc6,'equipped':![]}));await updateDoc(_0x5960c4,{'tokens':_0x46ef28,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache===_0x24183a(0x15c)&&(clearTokenCache(_0x4290f4[_0x24183a(0x141)]),clearTokenCache()),setTimeout(()=>{const _0x442ba8=_0x24183a;window['displayLadder']&&typeof window[_0x442ba8(0x126)]==='function'&&(console['log']('üîÑ\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x442ba8(0x142)]['refreshUI']===_0x442ba8(0x15c)&&window['RedeemStore'][_0x442ba8(0x160)]();},0x1f4),console['log'](_0x24183a(0x113)),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x9067bd){return console['error']('Token\x20unequip\x20failed:',_0x9067bd),showMessage('Failed\x20to\x20unequip\x20token:\x20'+_0x9067bd['message'],'error'),![];}}async function sellToken(_0x210aea){const _0x5a3577=a0_0x204274,_0x4cb0f7=auth['currentUser'];if(!_0x4cb0f7)return showMessage('Please\x20sign\x20in\x20to\x20sell\x20tokens','error'),![];if(!userData['isAdmin'])return showMessage('Only\x20admins\x20can\x20sell\x20tokens',_0x5a3577(0x15f)),![];const _0x2eb282=TOKENS[_0x210aea];if(!_0x2eb282)return console['error']('Token\x20'+_0x210aea+'\x20not\x20found'),![];if(!userOwnsToken(_0x210aea))return showMessage('You\x20don\x27t\x20own\x20this\x20token',_0x5a3577(0x15f)),![];try{const _0x343072=doc(db,'userProfiles',_0x4cb0f7['uid']),_0x461b4b=await getDoc(_0x343072),_0x494e2f=_0x461b4b['data'](),_0x403051=Math[_0x5a3577(0x146)](_0x2eb282['price']*0.5),_0x2ed564=(_0x494e2f['points']||0x0)+_0x403051,_0x5f4125=(_0x494e2f[_0x5a3577(0x119)]||[])['filter'](_0x2d095d=>_0x2d095d!=='token_'+_0x210aea),_0x1385d4=_0x494e2f[_0x5a3577(0x154)]===_0x210aea?null:_0x494e2f['equippedToken'];await updateDoc(_0x343072,{'points':_0x2ed564,'inventory':_0x5f4125,'equippedToken':_0x1385d4,'lastSale':serverTimestamp()});const _0x3cd971=doc(db,_0x5a3577(0x1a0),_0x4cb0f7['uid']),_0x5b97c7=await getDoc(_0x3cd971);if(_0x5b97c7['exists']()){const _0x415d56=_0x5b97c7['data'](),_0x133db0=_0x415d56['tokens']||[],_0x5e300c=_0x133db0['filter'](_0xc8c7e8=>_0xc8c7e8['tokenId']!==_0x210aea);await updateDoc(_0x3cd971,{'tokens':_0x5e300c,'equippedToken':_0x1385d4,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,_0x5a3577(0x14e)),{'userId':_0x4cb0f7[_0x5a3577(0x141)],'userEmail':_0x4cb0f7['email'],'itemId':_0x5a3577(0x10e)+_0x210aea,'itemTitle':_0x2eb282[_0x5a3577(0x18a)],'refund':_0x403051,'originalPrice':_0x2eb282['price'],'type':'sale','category':_0x5a3577(0x111),'timestamp':serverTimestamp()}),userData[_0x5a3577(0x171)]=_0x2ed564,userData['inventory']=_0x5f4125,userData[_0x5a3577(0x154)]=_0x1385d4,pointsDisplay&&(pointsDisplay[_0x5a3577(0x18c)]=userData['points'][_0x5a3577(0x14c)]()),typeof clearTokenCache==='function'&&clearTokenCache(_0x4cb0f7['uid']),console[_0x5a3577(0x155)](_0x5a3577(0x16d)+_0x2eb282['name']+_0x5a3577(0x17b)+_0x403051+'\x20points'),showMessage('Sold\x20'+_0x2eb282['name']+'\x20for\x20'+_0x403051+'\x20points\x20(50%\x20refund)',_0x5a3577(0x125)),!![];}catch(_0x44fab9){return console[_0x5a3577(0x15f)]('Token\x20sale\x20failed:',_0x44fab9),showMessage(_0x5a3577(0x1a1)+_0x44fab9['message'],_0x5a3577(0x15f)),![];}}function applyTheme(_0x2561ba){const _0x4b2544=a0_0x204274;if(!userOwnsTheme(_0x2561ba))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x4b2544(0x15f)),![];return window['ThemeSystem']?(window[_0x4b2544(0x12c)]['switchTheme'](_0x2561ba),showMessage((THEMES[_0x2561ba]?.['name']||_0x2561ba)+'\x20theme\x20applied!','success'),!![]):(console[_0x4b2544(0x15f)]('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x4ad898=a0_0x204274,_0x48eb33=document[_0x4ad898(0x115)]('.themes-grid');if(!_0x48eb33){console[_0x4ad898(0x15f)](_0x4ad898(0x16b));return;}_0x48eb33['innerHTML']='',Object['entries'](THEMES)[_0x4ad898(0x109)](([_0x5a7fe1,_0x1d650a])=>{const _0x2331a2=_0x4ad898,_0x5d65bb=document['createElement']('div');_0x5d65bb['className']=_0x2331a2(0x18f),_0x5d65bb['dataset']['theme']=_0x5a7fe1,_0x5d65bb[_0x2331a2(0x1a4)]['itemId']=_0x2331a2(0x19e)+_0x5a7fe1,_0x5d65bb[_0x2331a2(0x1a4)]['price']=_0x1d650a['price'],_0x5d65bb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x5a7fe1+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x1d650a['price']===0x0?'FREE':_0x1d650a['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x1d650a[_0x2331a2(0x18a)]+_0x2331a2(0x167)+_0x1d650a['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x48eb33['appendChild'](_0x5d65bb);}),setupThemeButtons();}function buildTokenItems(){const _0x2a71b1=a0_0x204274,_0x4ba3dd=document[_0x2a71b1(0x115)]('.tokens-grid');if(!_0x4ba3dd){console['error']('Tokens\x20container\x20not\x20found');return;}_0x4ba3dd['innerHTML']='',Object['entries'](TOKENS)['forEach'](([_0x487cf,_0x2307b3])=>{const _0x3ed8a1=_0x2a71b1,_0x5a3b7b=document['createElement'](_0x3ed8a1(0x19c));_0x5a3b7b['className']=_0x3ed8a1(0x153),_0x5a3b7b['dataset']['token']=_0x487cf,_0x5a3b7b[_0x3ed8a1(0x1a4)]['itemId']=_0x3ed8a1(0x10e)+_0x487cf,_0x5a3b7b['dataset']['price']=_0x2307b3['price'];const _0x56c056=userData['isAdmin']&&userOwnsToken(_0x487cf)?_0x3ed8a1(0x15e)+Math['floor'](_0x2307b3['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x5a3b7b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x2307b3['image']+'\x22\x20alt=\x22'+_0x2307b3['name']+_0x3ed8a1(0x182)+_0x2307b3['price']+_0x3ed8a1(0x18b)+_0x56c056+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ba3dd['appendChild'](_0x5a3b7b);}),setupTokenButtons();}function a0_0x7d7f(){const _0x2e090a=['You\x20already\x20own\x20the\x20','classList','\x20for\x20','username','special','image','Need\x20','pointer','2485LlVkmM','\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>','0.7','price','length','console','prototype','Unknown','642GinAVw','name','\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','textContent','can-afford','4038471koCytT','store-item','\x20theme','isUserAdmin','disabled','1047668fbXxjv','[data-token]','background','Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:','includes','display','style','838563VhYCxT','7359597oIxUNk','div','Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','theme_','Enhanced\x20energy\x20generation\x20unit','userTokens','Failed\x20to\x20sell\x20token:\x20','DOMContentLoaded','Emerald\x20City!','dataset','forEach','closest','isAdmin','\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','Fusion\x20Cannon','token_','map','cursor','token','is\x20that...\x20Pfunk?','‚úÖ\x20Token\x20unequipped','currentUser','querySelector','Gold','getElementById','190oQSnWz','inventory','Blue','Theme\x20','You\x20already\x20own\x20this\x20','üëë\x20Admin\x20controls\x20enabled','Sign\x20in\x20to\x20Purchase','\x20is\x20already\x20your\x20current\x20theme','block','add','click','This\x20one\x20is\x20really\x20pretty','../images/tokens/Extralife.gif','success','displayLadder','fun','Reactor','apply-theme','Heavy\x20ordinance\x20for\x20tough\x20situations','14358jcMwyY','ThemeSystem','Purchase\x20','auth-warning','can-equip','\x20not\x20found','Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:','exists','querySelectorAll','data','../images/tokens/cloak.gif','‚úÖ\x20Equipped\x20token:\x20','[data-theme]','userProfiles','cannot-afford','opacity','className','3038850dGVzDm','Show\x20your\x20support\x20with\x20this\x20fan\x20token.','üîÑ\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token','.theme-select-btn','store-content','uid','RedeemStore','default','warn','Token\x20','floor','Insufficient\x20points','Yellow\x20Orange','8RFwIxP','../images/tokens/Plasma.gif','confirm','toLocaleString','Strategic\x20explosive\x20device','transactions','\x20Points','Equip\x20','preventDefault','Classic\x20laser\x20weapon\x20token.','store-item\x20token-item','equippedToken','log','push','email','store-message','Not\x20enough\x20points.\x20You\x20need\x20','unavailable','‚úÖ\x20User\x20authenticated:','function','owned','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20(','error','refreshUI','Buy','bind','461YMqUvy','tokens','Purple','toString','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','Monitor\x20your\x20ship\x27s\x20energy\x20levels','remove','visible','Themes\x20container\x20not\x20found','sign-in','‚úÖ\x20Sold\x20token\x20','You\x20need\x20','createElement',',\x20Inventory:\x20','points','Buy\x20for\x20','For\x20the\x20angry\x20type.','../images/tokens/Fan.gif','../images/tokens/blob03.gif','message','‚úÖ\x20Token\x20','weapon'];a0_0x7d7f=function(){return _0x2e090a;};return a0_0x7d7f();}function setupThemeButtons(){const _0x2e146b=a0_0x204274,_0x4fcba8=document[_0x2e146b(0x133)](_0x2e146b(0x13f));_0x4fcba8['forEach'](_0x433afa=>{_0x433afa['addEventListener']('click',async _0x1480db=>{const _0x116f9b=a0_0x9b06;_0x1480db['preventDefault']();const _0x349277=auth['currentUser'];if(!_0x349277){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x387a5b=_0x433afa['closest']('[data-theme]'),_0x41a4ce=_0x387a5b['dataset']['theme'],_0x5f079d=THEMES[_0x41a4ce];if(!_0x5f079d){console[_0x116f9b(0x15f)](_0x116f9b(0x11b)+_0x41a4ce+_0x116f9b(0x130));return;}console['log']('Theme\x20clicked:\x20'+_0x5f079d['name']+'\x20('+_0x41a4ce+')');if(_0x433afa['disabled']){_0x5f079d['price']>0x0&&showMessage(_0x116f9b(0x16e)+_0x5f079d['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x433afa['textContent']==='Current\x20Theme'){showMessage(_0x5f079d[_0x116f9b(0x18a)]+_0x116f9b(0x11f),'info');return;}if(_0x433afa[_0x116f9b(0x18c)]==='Apply\x20Theme'){applyTheme(_0x41a4ce),updateThemeButtons();return;}if(_0x433afa['textContent']['includes'](_0x116f9b(0x161))){const _0x10f556=window['confirm'](_0x116f9b(0x12d)+_0x5f079d['name']+'\x20theme\x20for\x20'+_0x5f079d['price']+'\x20points?');if(!_0x10f556)return;const _0x102f4c=await purchaseTheme(_0x41a4ce);_0x102f4c&&(showMessage(_0x5f079d[_0x116f9b(0x18a)]+'\x20theme\x20purchased!','success'),applyTheme(_0x41a4ce),updateThemeButtons());return;}userOwnsTheme(_0x41a4ce)?applyTheme(_0x41a4ce):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x12efa7=a0_0x204274,_0x21d1c1=document['querySelectorAll']('.token-select-btn'),_0x5f0c7b=document['querySelectorAll']('.token-equip-btn'),_0x28a692=document[_0x12efa7(0x133)]('.token-sell-btn');_0x21d1c1['forEach'](_0x2873da=>{const _0x3c9ad1=_0x12efa7;_0x2873da['addEventListener'](_0x3c9ad1(0x122),async _0x26468a=>{const _0x580440=_0x3c9ad1;_0x26468a['preventDefault']();const _0x2909c5=auth['currentUser'];if(!_0x2909c5){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0x6136e6=_0x2873da[_0x580440(0x10a)]('[data-token]'),_0x2cde7b=_0x6136e6['dataset'][_0x580440(0x111)],_0x394af6=TOKENS[_0x2cde7b];if(!_0x394af6){console['error']('Token\x20'+_0x2cde7b+'\x20not\x20found');return;}console['log']('Token\x20clicked:\x20'+_0x394af6[_0x580440(0x18a)]+'\x20('+_0x2cde7b+')');if(_0x2873da['disabled']){showMessage('You\x20need\x20'+_0x394af6['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x2873da[_0x580440(0x18c)]==='Owned'){showMessage(_0x580440(0x179)+_0x394af6['name']+'\x20token','info');return;}if(_0x2873da['textContent']['includes']('Purchase')||_0x2873da['textContent']['includes']('Buy')){const _0x50fede=window[_0x580440(0x14b)]('Purchase\x20'+_0x394af6['name']+'\x20token\x20for\x20'+_0x394af6[_0x580440(0x184)]+'\x20points?');if(!_0x50fede)return;const _0x5ecf7e=await purchaseToken(_0x2cde7b);_0x5ecf7e&&updateTokenButtons();return;}});}),_0x5f0c7b[_0x12efa7(0x109)](_0x454559=>{_0x454559['addEventListener']('click',async _0x4182f3=>{const _0xb68b3f=a0_0x9b06;_0x4182f3['preventDefault']();const _0x404aff=_0x454559['closest']('[data-token]'),_0x83bc70=_0x404aff['dataset']['token'],_0x28e35a=TOKENS[_0x83bc70];if(_0x454559['textContent']==='Equipped'){const _0x1aa261=window['confirm']('Unequip\x20'+_0x28e35a[_0xb68b3f(0x18a)]+'?');if(!_0x1aa261)return;const _0x1f6711=await unequipToken();_0x1f6711&&updateTokenButtons();}else{const _0x45de92=window['confirm'](_0xb68b3f(0x150)+_0x28e35a['name']+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x45de92)return;const _0xa250d8=await equipToken(_0x83bc70);_0xa250d8&&updateTokenButtons();}});}),_0x28a692['forEach'](_0x3f7c53=>{_0x3f7c53['addEventListener']('click',async _0x3db5ac=>{const _0x3d1542=a0_0x9b06;_0x3db5ac[_0x3d1542(0x151)]();const _0x384a93=_0x3f7c53['closest'](_0x3d1542(0x194)),_0x100b5b=_0x384a93['dataset'][_0x3d1542(0x111)],_0x20cd47=TOKENS[_0x100b5b],_0x4d19b2=Math['floor'](_0x20cd47['price']*0.5),_0x31b3ff=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x20cd47['name']+_0x3d1542(0x17b)+_0x4d19b2+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x31b3ff)return;const _0x468655=await sellToken(_0x100b5b);_0x468655&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0xa350ce=a0_0x204274,_0x4a9dd2=window[_0xa350ce(0x12c)]?window['ThemeSystem']['getCurrentTheme']():_0xa350ce(0x143),_0x43b38a=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')['forEach'](_0x2663fb=>{const _0x1bc814=_0xa350ce,_0x34b259=_0x2663fb[_0x1bc814(0x10a)](_0x1bc814(0x137)),_0x57ac42=_0x34b259['dataset']['theme'],_0x4f88be=THEMES[_0x57ac42];if(!_0x4f88be)return;_0x2663fb['disabled']=![],_0x2663fb['style']['opacity']='',_0x2663fb['style'][_0x1bc814(0x110)]=_0x1bc814(0x180),_0x2663fb['classList']['remove']('current-theme',_0x1bc814(0x129),_0x1bc814(0x18d),_0x1bc814(0x139),'sign-in-free','sign-in-paid');if(!_0x43b38a){_0x4f88be['price']===0x0?(_0x2663fb['textContent']='Sign\x20in\x20to\x20Apply',_0x2663fb[_0x1bc814(0x17a)]['add']('sign-in-free')):(_0x2663fb['textContent']=_0x1bc814(0x11e),_0x2663fb['disabled']=!![],_0x2663fb['style']['opacity']='0.7',_0x2663fb['classList'][_0x1bc814(0x121)]('sign-in-paid'));return;}if(_0x57ac42===_0x4a9dd2){_0x2663fb['textContent']='Current\x20Theme',_0x2663fb['classList']['add']('current-theme'),_0x2663fb[_0x1bc814(0x192)]=!![],_0x2663fb['style']['cursor']='default';return;}if(userOwnsTheme(_0x57ac42)){_0x2663fb['textContent']='Apply\x20Theme',_0x2663fb['classList']['add']('apply-theme');return;}if(userData['points']>=_0x4f88be[_0x1bc814(0x184)]){_0x2663fb['textContent']='Buy\x20for\x20'+_0x4f88be[_0x1bc814(0x184)]+_0x1bc814(0x14f),_0x2663fb['classList']['add'](_0x1bc814(0x18d));return;}_0x2663fb['textContent']=_0x1bc814(0x17f)+_0x4f88be['price']+_0x1bc814(0x14f),_0x2663fb[_0x1bc814(0x17a)]['add'](_0x1bc814(0x139)),_0x2663fb['style'][_0x1bc814(0x13a)]='0.5',_0x2663fb[_0x1bc814(0x192)]=!![],_0x2663fb[_0x1bc814(0x199)]['cursor']='not-allowed';});}function updateTokenButtons(){const _0x2424a9=a0_0x204274,_0x5ed7b9=auth['currentUser'];document[_0x2424a9(0x133)]('.token-select-btn')['forEach'](_0x82bc42=>{const _0x43a266=_0x2424a9,_0x358753=_0x82bc42[_0x43a266(0x10a)]('[data-token]'),_0x24e2ef=_0x358753['dataset']['token'],_0x69a014=TOKENS[_0x24e2ef],_0x3bd858=_0x358753['querySelector']('.token-equip-btn'),_0x22dc8f=_0x358753[_0x43a266(0x115)]('.token-sell-btn');if(!_0x69a014)return;_0x82bc42['disabled']=![],_0x82bc42[_0x43a266(0x199)]['opacity']='',_0x82bc42['style']['cursor']=_0x43a266(0x180);_0x3bd858&&(_0x3bd858['style']['display']='none',_0x3bd858[_0x43a266(0x192)]=![],_0x3bd858['style']['opacity']='',_0x3bd858[_0x43a266(0x17a)]['remove']('equipped',_0x43a266(0x12f)));_0x22dc8f&&(_0x22dc8f['style']['display']='none');_0x82bc42['classList'][_0x43a266(0x169)](_0x43a266(0x15d),'can-afford',_0x43a266(0x139),_0x43a266(0x16c));if(!_0x5ed7b9){_0x82bc42['textContent']='Sign\x20in\x20to\x20Purchase',_0x82bc42['disabled']=!![],_0x82bc42['style']['opacity']=_0x43a266(0x183),_0x82bc42['classList'][_0x43a266(0x121)](_0x43a266(0x16c));return;}if(userOwnsToken(_0x24e2ef)){_0x82bc42['textContent']='Owned',_0x82bc42['classList']['add']('owned'),_0x82bc42['disabled']=!![],_0x82bc42['style']['cursor']='default',_0x82bc42['style'][_0x43a266(0x195)]='var(--success-color,\x20#4CAF50)';_0x3bd858&&(_0x3bd858['style']['display']=_0x43a266(0x120),userHasTokenEquipped(_0x24e2ef)?(_0x3bd858['textContent']='Equipped',_0x3bd858['classList']['add']('equipped'),_0x3bd858['style'][_0x43a266(0x195)]='var(--accent-color,\x20#2196F3)',_0x3bd858['style']['cursor']=_0x43a266(0x180)):(_0x3bd858[_0x43a266(0x18c)]='Equip',_0x3bd858['classList']['add']('can-equip'),_0x3bd858[_0x43a266(0x199)][_0x43a266(0x195)]='var(--info-color,\x20#17a2b8)',_0x3bd858[_0x43a266(0x199)][_0x43a266(0x110)]='pointer'));_0x22dc8f&&userData['isAdmin']&&(_0x22dc8f['style'][_0x43a266(0x198)]=_0x43a266(0x120));return;}if(userData[_0x43a266(0x171)]>=_0x69a014['price']){_0x82bc42[_0x43a266(0x18c)]=_0x43a266(0x172)+_0x69a014['price']+'\x20Points',_0x82bc42[_0x43a266(0x17a)]['add']('can-afford'),_0x82bc42[_0x43a266(0x199)]['background']='';return;}_0x82bc42['textContent']='Need\x20'+_0x69a014[_0x43a266(0x184)]+_0x43a266(0x14f),_0x82bc42[_0x43a266(0x17a)]['add']('cannot-afford'),_0x82bc42['style']['opacity']='0.5',_0x82bc42['disabled']=!![],_0x82bc42['style'][_0x43a266(0x110)]='not-allowed',_0x82bc42['style']['background']='var(--muted-color,\x20#757575)';});}function showMessage(_0x225537,_0x11d793='info'){const _0x2dd6c7=a0_0x204274,_0x5c478c=document['getElementById'](_0x2dd6c7(0x158));_0x5c478c&&_0x5c478c['remove']();const _0x461a53=document[_0x2dd6c7(0x16f)]('div');_0x461a53['id']='store-message',_0x461a53[_0x2dd6c7(0x13b)]='store-message\x20store-message-'+_0x11d793,_0x461a53['textContent']=_0x225537,document['body']['appendChild'](_0x461a53),requestAnimationFrame(()=>{const _0x5bbc94=_0x2dd6c7;_0x461a53['classList'][_0x5bbc94(0x121)]('visible');}),setTimeout(()=>{const _0x26120b=_0x2dd6c7;_0x461a53[_0x26120b(0x17a)][_0x26120b(0x169)](_0x26120b(0x16a)),setTimeout(()=>{const _0x4fd834=_0x26120b;_0x461a53['parentNode']&&_0x461a53[_0x4fd834(0x169)]();},0x12c);},0xfa0);}window[a0_0x204274(0x142)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log']('üè™\x20Redeem\x20store\x20loaded');