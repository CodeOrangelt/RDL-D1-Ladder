const a10m=a10b;function a10b(a,b){const c=a10a();return a10b=function(d,e){d=d-0x133;let f=c[d];if(a10b['LzJfqV']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a10b['vsFHel']=g,a=arguments,a10b['LzJfqV']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a10b['vsFHel'](f),a[i]=f):f=j,f;},a10b(a,b);}(function(a,b){const l=a10b,c=a();while(!![]){try{const d=-parseInt(l(0x144))/0x1+parseInt(l(0x15c))/0x2*(parseInt(l(0x15f))/0x3)+-parseInt(l(0x13a))/0x4+-parseInt(l(0x149))/0x5*(parseInt(l(0x135))/0x6)+parseInt(l(0x146))/0x7*(parseInt(l(0x151))/0x8)+-parseInt(l(0x14e))/0x9*(-parseInt(l(0x148))/0xa)+-parseInt(l(0x158))/0xb*(parseInt(l(0x155))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a10a,0xbd84d));import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;function a10a(){const v=['BM9Uzq','rxjYB3iGzMv0y2HPBMCGDxnLCM5HBwu6','mtjIqw5JyNO','zw1WDhK','zgf0yq','mta3otGZmZDXvgvoC00','Dg9W','DxnLCKLK','yM9KEq','odKWEg9wsgrX','zw1HAwW','DwLK','nti3n3bwA2z2za','AgvPz2H0','yMXVy2S','ltHWEa','mJK4ntqYC3Hcvxjn','yM9YzgvY','BM93','y3vYCMvUDfvZzxjUyw1L','z2v0sxrLBq','mtm4mdm4nhvRyu9lDq','z2v0rwXLBwvUDej5swq','CMvWB3j0lw1HDgnOlw5VDgLMAwnHDgLVBG','CgXHEwvYC0qZ','C3rYAw5NAwz5','CgvUzgLUz01HDgnOzxndywnOzq','zxHPC3rZ','ywrKrxzLBNrmAxn0zw5LCG','EKLUzgv4','zgLZy29UBMvJDa','nty1otq1tfb4tfLk','otK5','n3HZsu9dCq','CMvTB3zLsxrLBq','mtq0odqZmhP6vgjSva','nvLlAvPpvW','zxjYB3i','DxnLCM5HBwu','C3r5Bgu','mNb4ihnVBgLKihDOAxrL','nJnNr2TIBLq','yxbWCM92zwq','i2zMm2iZma','nZm3nJyYneHuDgTLDa','B2jZzxj2zq'];a10a=function(){return v;};return a10a();}const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10m(0x13f),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(a=![]){const b=Date['now'](),c=checkNotificationCache();if(c!==null&&!a){updateNotificationDot(c);if(b-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=b;const d=auth['currentUser'];if(!d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [e,f,g]=await Promise['all']([checkForPendingMatchesInCollection(d,'pendingMatches'),checkForPendingMatchesInCollection(d,'pendingMatchesD2'),checkForPendingMatchesInCollection(d,'pendingMatchesD3')]),h=e||f||g;updateNotificationDot(h),updateNotificationCache(h);}catch(i){console['error']('Error\x20checking\x20pending\x20matches:',i);}}async function checkForPendingMatchesInCollection(a,b){const n=a10m,c=a['uid'],d=a[n(0x15d)],e=query(collection(db,b),where('winnerId','==',c),where(n(0x14f),'==',![])),f=await getDocs(e);if(!f[n(0x156)])return!![];if(d){const h=query(collection(db,b),where('winnerEmail','==',d),where('approved','==',![])),i=await getDocs(h);if(!i[n(0x156)])return!![];}let g=await getUsernameFromAllSources(a);if(g){const j=query(collection(db,b),where('winnerUsername','==',g),where(n(0x14f),'==',![])),k=await getDocs(j);if(!k['empty'])return!![];}return![];}async function getUsernameFromAllSources(a){const o=a10m,b=localStorage['getItem']('currentUsername');if(b)return b;try{const [c,d,e]=await Promise['all']([getDocs(query(collection(db,'players'),where(o(0x15a),'==',a['uid']))),getDocs(query(collection(db,'playersD2'),where(o(0x15a),'==',a['uid']))),getDocs(query(collection(db,o(0x13d)),where(o(0x15a),'==',a[o(0x15e)])))]);if(!c[o(0x156)]){const g=c['docs'][0x0]['data']()[o(0x14b)];return localStorage['setItem']('currentUsername',g),g;}if(!d[o(0x156)]){const h=d['docs'][0x0]['data']()[o(0x14b)];return localStorage['setItem'](o(0x138),h),h;}if(!e[o(0x156)]){const i=e['docs'][0x0][o(0x157)]()['username'];return localStorage['setItem'](o(0x138),i),i;}const f=await getDoc(doc(db,'users',a[o(0x15e)]));if(f[o(0x140)]()&&f['data']()[o(0x14b)]){const j=f[o(0x157)]()['username'];return localStorage['setItem']('currentUsername',j),j;}}catch(k){console[o(0x14a)](o(0x154),k);}if(a[o(0x15d)])return a['email']['split']('@')[0x0];return null;}function updateNotificationCache(a){const p=a10m,b={'status':a,'timestamp':Date[p(0x137)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[p(0x13e)](b));}function checkNotificationCache(){const q=a10m,a=localStorage[q(0x139)](NOTIFICATION_CACHE_KEY);if(!a)return null;try{const {status:b,timestamp:c}=JSON['parse'](a),d=Date[q(0x137)]();if(d-c<CACHE_EXPIRY)return b;}catch(f){}return null;}export function updateNotificationDot(a){const s=a10m,b=new MutationObserver((d,e)=>{const r=a10b,f=document[r(0x13b)](r(0x13c));f&&(updateDotStyle(f,a),e[r(0x143)]());});b[s(0x152)](document[s(0x15b)],{'childList':!![],'subtree':!![]});const c=document[s(0x13b)](s(0x13c));c&&(updateDotStyle(c,a),b[s(0x143)]()),setTimeout(()=>b['disconnect'](),0x1388);}function updateDotStyle(a,b){const t=a10m;b?(a['style']['display']=t(0x133),a[t(0x14c)]['backgroundColor']=t(0x150),a[t(0x14c)]['width']='10px',a['style'][t(0x160)]='10px',a[t(0x14c)]['position']='absolute',a['style'][t(0x159)]='-5px',a[t(0x14c)]['right']=t(0x134),a['style']['borderRadius']='50%',a['style'][t(0x136)]=t(0x14d),a['style'][t(0x142)]=t(0x145)):a['style']['display']=t(0x153);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10m(0x141)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const u=a10b;localStorage[u(0x147)](u(0x138)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});