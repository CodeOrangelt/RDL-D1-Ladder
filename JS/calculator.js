const a9_0x3ad43c=a9_0x3331;(function(_0xe930de,_0x178255){const _0x5647fc=a9_0x3331,_0x27bcd6=_0xe930de();while(!![]){try{const _0x224298=-parseInt(_0x5647fc(0x121))/0x1+parseInt(_0x5647fc(0xfc))/0x2+parseInt(_0x5647fc(0x139))/0x3+parseInt(_0x5647fc(0x12c))/0x4*(parseInt(_0x5647fc(0x10c))/0x5)+parseInt(_0x5647fc(0x123))/0x6*(-parseInt(_0x5647fc(0x14a))/0x7)+-parseInt(_0x5647fc(0x135))/0x8+parseInt(_0x5647fc(0x12d))/0x9;if(_0x224298===_0x178255)break;else _0x27bcd6['push'](_0x27bcd6['shift']());}catch(_0x3f025e){_0x27bcd6['push'](_0x27bcd6['shift']());}}}(a9_0x2812,0x8eb26));function a9_0x3331(_0x19d1fb,_0x53e9df){const _0x3524b3=a9_0x2812();return a9_0x3331=function(_0x451ca2,_0x297cb0){_0x451ca2=_0x451ca2-0xf0;let _0x17bc9e=_0x3524b3[_0x451ca2];return _0x17bc9e;},a9_0x3331(_0x19d1fb,_0x53e9df);}const a9_0x5eaa03=(function(){let _0x5511cc=!![];return function(_0x257654,_0x3379bd){const _0x46c40e=_0x5511cc?function(){const _0x299336=a9_0x3331;if(_0x3379bd){const _0x42ec35=_0x3379bd[_0x299336(0x10e)](_0x257654,arguments);return _0x3379bd=null,_0x42ec35;}}:function(){};return _0x5511cc=![],_0x46c40e;};}()),a9_0x127070=a9_0x5eaa03(this,function(){const _0x1e5827=a9_0x3331;return a9_0x127070['toString']()[_0x1e5827(0x14f)](_0x1e5827(0x160))[_0x1e5827(0x15b)]()[_0x1e5827(0x132)](a9_0x127070)[_0x1e5827(0x14f)](_0x1e5827(0x160));});function a9_0x2812(){const _0x1f6833=['Player\x20not\x20found','2168795MVRmJK','active','apply','calculateMatch','ladder','currentLadder','toFixed','silver','newLoserRating','sandbox','loser-current-elo','color','pow','loserChange','expectedScoreWinner','calculateELO','loser-new-elo','winnerChange','round','match-result','getELOColor','70735fDrYjf','#FFD700','20598sEfyKW','innerHTML','DOMContentLoaded','set','setupEventListeners','Loaded\x20','New\x20ELO:\x20','bind','winner-select','8egiMNf','9723519KIhXPm','size','\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','querySelectorAll','constructor','\x20players\x20from\x20','loser-elo-change','8772168MgGYuE','<option\x20value=\x22','<option\x20value=\x22\x22>Loading\x20players...</option>','click','2059551hqUczU','value','forEach','data','elo','<option\x20value=\x22\x22>Select\x20a\x20player...</option>','remove','Current\x20ELO:\x20','\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a','none','winner-name','%\x20chance\x20to\x20win)\x0a\x20\x20','<option\x20value=\x22\x22>Error\x20loading\x20players</option>','players','.ladder-btn','loser-select','textContent','2023qbhNHL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','unranked','gold','search','\x20+\x20','exception','Low\x20ELO\x20gain.','#CD7F32','console','loser-name','add','displayCalculationDetails','Error\x20loading\x20players:','#C0C0C0','\x20=\x20','toString','\x0a\x0aInitial\x20Ratings:\x0a\x20\x20','sort','winner-elo-change','#808080','(((.+)+)+)+$','from','loadPlayers','getElementById','displayMatchResult','bronze','classList','style','\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20','calculation-details','#50C878','log','init','playersD3','newWinnerRating','eloRating','\x22\x20data-elo=\x22','username','%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20','target','218906UiwqcS','info','winner-new-elo','values','length','winner-current-elo','getELORankClass','playersD2','\x0a\x20\x20','display','addEventListener','refresh-players','updateDropdowns','clear','{}.constructor(\x22return\x20this\x22)(\x20)'];a9_0x2812=function(){return _0x1f6833;};return a9_0x2812();}a9_0x127070();const a9_0x297cb0=(function(){let _0x2c08b2=!![];return function(_0x4bdd50,_0x35f0f3){const _0x5e2ca2=_0x2c08b2?function(){if(_0x35f0f3){const _0x94a0cc=_0x35f0f3['apply'](_0x4bdd50,arguments);return _0x35f0f3=null,_0x94a0cc;}}:function(){};return _0x2c08b2=![],_0x5e2ca2;};}()),a9_0x451ca2=a9_0x297cb0(this,function(){const _0x5c0607=a9_0x3331;let _0x42290c;try{const _0x387767=Function('return\x20(function()\x20'+_0x5c0607(0x10a)+');');_0x42290c=_0x387767();}catch(_0x866ca4){_0x42290c=window;}const _0x3e75f3=_0x42290c[_0x5c0607(0x154)]=_0x42290c[_0x5c0607(0x154)]||{},_0x5af8d8=[_0x5c0607(0xf3),'warn',_0x5c0607(0xfd),'error',_0x5c0607(0x151),'table','trace'];for(let _0x75209d=0x0;_0x75209d<_0x5af8d8[_0x5c0607(0x100)];_0x75209d++){const _0x1d248a=a9_0x297cb0[_0x5c0607(0x132)]['prototype'][_0x5c0607(0x12a)](a9_0x297cb0),_0x5f6fd=_0x5af8d8[_0x75209d],_0x52c7fc=_0x3e75f3[_0x5f6fd]||_0x1d248a;_0x1d248a['__proto__']=a9_0x297cb0[_0x5c0607(0x12a)](a9_0x297cb0),_0x1d248a[_0x5c0607(0x15b)]=_0x52c7fc[_0x5c0607(0x15b)]['bind'](_0x52c7fc),_0x3e75f3[_0x5f6fd]=_0x1d248a;}});a9_0x451ca2();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x1fbaa5=a9_0x3331;this[_0x1fbaa5(0x111)]='D1',this[_0x1fbaa5(0x146)]=new Map(),this[_0x1fbaa5(0xf4)]();}[a9_0x3ad43c(0xf4)](){const _0x3ecc57=a9_0x3ad43c;this[_0x3ecc57(0x127)](),this['loadPlayers']();}[a9_0x3ad43c(0x127)](){const _0x42261a=a9_0x3ad43c;document[_0x42261a(0x131)]('.ladder-btn')[_0x42261a(0x13b)](_0x1e4bb7=>{const _0x2a9b10=_0x42261a;_0x1e4bb7[_0x2a9b10(0x106)](_0x2a9b10(0x138),_0x3cd7f0=>{const _0x1c9e12=_0x2a9b10;document['querySelectorAll'](_0x1c9e12(0x147))[_0x1c9e12(0x13b)](_0x49a1b2=>_0x49a1b2[_0x1c9e12(0x166)][_0x1c9e12(0x13f)](_0x1c9e12(0x10d))),_0x3cd7f0[_0x1c9e12(0xfb)][_0x1c9e12(0x166)][_0x1c9e12(0x156)](_0x1c9e12(0x10d)),this['currentLadder']=_0x3cd7f0[_0x1c9e12(0xfb)]['dataset'][_0x1c9e12(0x110)],this[_0x1c9e12(0x162)]();});}),document[_0x42261a(0x163)](_0x42261a(0x107))[_0x42261a(0x106)](_0x42261a(0x138),()=>{const _0x13a3bb=_0x42261a;this[_0x13a3bb(0x162)]();}),document[_0x42261a(0x163)]('winner-select')[_0x42261a(0x106)]('change',()=>this[_0x42261a(0x10f)]()),document[_0x42261a(0x163)](_0x42261a(0x148))['addEventListener']('change',()=>this['calculateMatch']());}async['loadPlayers'](){const _0x36faf0=a9_0x3ad43c;try{this[_0x36faf0(0x108)](_0x36faf0(0x137));const _0x18a532=this[_0x36faf0(0x111)]==='D1'?_0x36faf0(0x146):this[_0x36faf0(0x111)]==='D2'?_0x36faf0(0x103):_0x36faf0(0xf5),_0x32bfc5=collection(db,_0x18a532),_0x103bff=query(_0x32bfc5,orderBy(_0x36faf0(0xf7),'desc')),_0x36ce07=await getDocs(_0x103bff);this[_0x36faf0(0x146)][_0x36faf0(0x109)](),_0x36ce07[_0x36faf0(0x13b)](_0x48a0df=>{const _0x19a3ee=_0x36faf0,_0x3498a9=_0x48a0df[_0x19a3ee(0x13c)]();_0x3498a9['username']&&this['players'][_0x19a3ee(0x126)](_0x3498a9[_0x19a3ee(0xf9)],{'id':_0x48a0df['id'],'username':_0x3498a9[_0x19a3ee(0xf9)],'elo':parseInt(_0x3498a9[_0x19a3ee(0xf7)])||0x4b0,'position':_0x3498a9['position']||0x3e7});}),this['updateDropdowns'](),console['log'](_0x36faf0(0x128)+this[_0x36faf0(0x146)][_0x36faf0(0x12e)]+_0x36faf0(0x133)+this[_0x36faf0(0x111)]+'\x20ladder');}catch(_0xe610a6){console['error'](_0x36faf0(0x158),_0xe610a6),this[_0x36faf0(0x108)](_0x36faf0(0x145));}}['updateDropdowns'](_0x8d583d=null){const _0x237262=a9_0x3ad43c,_0x331b0a=document[_0x237262(0x163)](_0x237262(0x12b)),_0x527ebe=document[_0x237262(0x163)](_0x237262(0x148));if(_0x8d583d){_0x331b0a[_0x237262(0x124)]=_0x8d583d,_0x527ebe[_0x237262(0x124)]=_0x8d583d;return;}let _0x313ba4=_0x237262(0x13e);const _0x427fdb=Array[_0x237262(0x161)](this[_0x237262(0x146)][_0x237262(0xff)]())[_0x237262(0x15d)]((_0x5657cf,_0x1650e1)=>_0x1650e1[_0x237262(0x13d)]-_0x5657cf[_0x237262(0x13d)]);_0x427fdb['forEach'](_0x1fb80a=>{const _0xa81d2b=_0x237262,_0x182caf=this[_0xa81d2b(0x102)](_0x1fb80a['elo']);_0x313ba4+=_0xa81d2b(0x136)+_0x1fb80a['username']+_0xa81d2b(0xf8)+_0x1fb80a[_0xa81d2b(0x13d)]+'\x22\x20class=\x22'+_0x182caf+_0xa81d2b(0x14c)+_0x1fb80a['username']+'\x20('+_0x1fb80a[_0xa81d2b(0x13d)]+_0xa81d2b(0x12f);}),_0x331b0a[_0x237262(0x124)]=_0x313ba4,_0x527ebe['innerHTML']=_0x313ba4;}[a9_0x3ad43c(0x10f)](){const _0x6b8ba9=a9_0x3ad43c,_0x31f2ba=document[_0x6b8ba9(0x163)](_0x6b8ba9(0x12b)),_0x213bce=document[_0x6b8ba9(0x163)](_0x6b8ba9(0x148)),_0x2a8ff7=_0x31f2ba[_0x6b8ba9(0x13a)],_0x4258c5=_0x213bce[_0x6b8ba9(0x13a)];if(!_0x2a8ff7||!_0x4258c5){document[_0x6b8ba9(0x163)](_0x6b8ba9(0x11f))[_0x6b8ba9(0x167)][_0x6b8ba9(0x105)]=_0x6b8ba9(0x142),document['getElementById'](_0x6b8ba9(0xf1))[_0x6b8ba9(0x167)][_0x6b8ba9(0x105)]='none';return;}if(_0x2a8ff7===_0x4258c5){alert(_0x6b8ba9(0x130));return;}const _0x197977=this[_0x6b8ba9(0x146)]['get'](_0x2a8ff7),_0x2cfc62=this[_0x6b8ba9(0x146)]['get'](_0x4258c5);if(!_0x197977||!_0x2cfc62){console['error'](_0x6b8ba9(0x10b));return;}const _0x3e74f7=this['calculateELO'](_0x197977['elo'],_0x2cfc62[_0x6b8ba9(0x13d)]);this[_0x6b8ba9(0x164)](_0x197977,_0x2cfc62,_0x3e74f7),this[_0x6b8ba9(0x157)](_0x197977,_0x2cfc62,_0x3e74f7);}[a9_0x3ad43c(0x11b)](_0x231bd6,_0x512749,_0x88b35d=0x20){const _0x8a6a3b=a9_0x3ad43c,_0x5a2e51=0x1/(0x1+Math[_0x8a6a3b(0x118)](0xa,(_0x512749-_0x231bd6)/0x190)),_0x4bfaba=0x1/(0x1+Math[_0x8a6a3b(0x118)](0xa,(_0x231bd6-_0x512749)/0x190)),_0x5abff0=_0x231bd6+_0x88b35d*(0x1-_0x5a2e51),_0xd163b8=_0x512749+_0x88b35d*(0x0-_0x4bfaba);return{'winnerChange':Math['round'](_0x5abff0-_0x231bd6),'loserChange':Math[_0x8a6a3b(0x11e)](_0xd163b8-_0x512749),'newWinnerRating':Math[_0x8a6a3b(0x11e)](_0x5abff0),'newLoserRating':Math[_0x8a6a3b(0x11e)](_0xd163b8),'expectedScoreWinner':_0x5a2e51,'expectedScoreLoser':_0x4bfaba};}['displayMatchResult'](_0x3928c2,_0xed1896,_0x5e00d5){const _0x26ea3b=a9_0x3ad43c;document[_0x26ea3b(0x163)](_0x26ea3b(0x143))[_0x26ea3b(0x149)]=_0x3928c2['username'],document[_0x26ea3b(0x163)](_0x26ea3b(0x101))[_0x26ea3b(0x149)]=_0x26ea3b(0x140)+_0x3928c2[_0x26ea3b(0x13d)],document['getElementById'](_0x26ea3b(0x15e))[_0x26ea3b(0x149)]='+'+_0x5e00d5[_0x26ea3b(0x11d)],document[_0x26ea3b(0x163)](_0x26ea3b(0xfe))[_0x26ea3b(0x149)]='New\x20ELO:\x20'+_0x5e00d5[_0x26ea3b(0xf6)],document[_0x26ea3b(0x163)](_0x26ea3b(0x155))[_0x26ea3b(0x149)]=_0xed1896[_0x26ea3b(0xf9)],document[_0x26ea3b(0x163)](_0x26ea3b(0x116))['textContent']='Current\x20ELO:\x20'+_0xed1896[_0x26ea3b(0x13d)],document['getElementById'](_0x26ea3b(0x134))['textContent']=''+_0x5e00d5[_0x26ea3b(0x119)],document[_0x26ea3b(0x163)](_0x26ea3b(0x11c))[_0x26ea3b(0x149)]=_0x26ea3b(0x129)+_0x5e00d5[_0x26ea3b(0x114)];const _0x4d77f5=this[_0x26ea3b(0x120)](_0x3928c2[_0x26ea3b(0x13d)]),_0xf2d337=this[_0x26ea3b(0x120)](_0xed1896['elo']);document[_0x26ea3b(0x163)]('winner-name')[_0x26ea3b(0x167)][_0x26ea3b(0x117)]=_0x4d77f5,document[_0x26ea3b(0x163)](_0x26ea3b(0x155))[_0x26ea3b(0x167)]['color']=_0xf2d337,document['getElementById'](_0x26ea3b(0x11f))[_0x26ea3b(0x167)][_0x26ea3b(0x105)]='grid';}[a9_0x3ad43c(0x157)](_0xd76f8,_0x3c0360,_0x4288a9){const _0x393651=a9_0x3ad43c,_0x335a0e=_0x393651(0x15c)+_0xd76f8['username']+':\x20'+_0xd76f8[_0x393651(0x13d)]+_0x393651(0x104)+_0x3c0360[_0x393651(0xf9)]+':\x20'+_0x3c0360[_0x393651(0x13d)]+_0x393651(0xf0)+_0xd76f8['username']+':\x20'+_0x4288a9[_0x393651(0x11a)]['toFixed'](0x3)+'\x20('+(_0x4288a9[_0x393651(0x11a)]*0x64)[_0x393651(0x112)](0x1)+_0x393651(0x144)+_0x3c0360[_0x393651(0xf9)]+':\x20'+_0x4288a9['expectedScoreLoser'][_0x393651(0x112)](0x3)+'\x20('+(_0x4288a9['expectedScoreLoser']*0x64)['toFixed'](0x1)+_0x393651(0xfa)+_0xd76f8[_0x393651(0xf9)]+':\x20'+_0xd76f8[_0x393651(0x13d)]+_0x393651(0x150)+_0x4288a9[_0x393651(0x11d)]+_0x393651(0x15a)+_0x4288a9[_0x393651(0xf6)]+'\x0a\x20\x20'+_0x3c0360[_0x393651(0xf9)]+':\x20'+_0x3c0360[_0x393651(0x13d)]+_0x393651(0x150)+_0x4288a9[_0x393651(0x119)]+_0x393651(0x15a)+_0x4288a9[_0x393651(0x114)]+_0x393651(0x141)+(_0x4288a9[_0x393651(0x11d)]>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(_0x4288a9[_0x393651(0x11d)]<0x5?_0x393651(0x152):'')+_0x393651(0x14b);document[_0x393651(0x163)]('calculation-text')[_0x393651(0x149)]=_0x335a0e,document[_0x393651(0x163)](_0x393651(0xf1))[_0x393651(0x167)][_0x393651(0x105)]='block';}['getELOColor'](_0x2eb154){const _0x472542=a9_0x3ad43c;if(_0x2eb154>=0x7d0)return _0x472542(0xf2);else{if(_0x2eb154>=0x708)return _0x472542(0x122);else{if(_0x2eb154>=0x640)return _0x472542(0x159);else{if(_0x2eb154>=0x578)return _0x472542(0x153);else return _0x472542(0x15f);}}}}[a9_0x3ad43c(0x102)](_0x262128){const _0x9a9ca5=a9_0x3ad43c;if(_0x262128>=0x7d0)return'emerald';else{if(_0x262128>=0x708)return _0x9a9ca5(0x14e);else{if(_0x262128>=0x640)return _0x9a9ca5(0x113);else{if(_0x262128>=0x578)return _0x9a9ca5(0x165);else return _0x9a9ca5(0x14d);}}}}}document[a9_0x3ad43c(0x106)](a9_0x3ad43c(0x125),()=>{const _0x4a1712=a9_0x3ad43c;document[_0x4a1712(0x163)](_0x4a1712(0x115))&&new ELOCalculator();});