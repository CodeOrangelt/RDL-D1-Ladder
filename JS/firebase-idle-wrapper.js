const a19_0x3b06c7=a19_0x4cdd,a19_0x1ae7af=(function(){let _0x437984=!![];return function(_0x1baac0,_0xb2a9eb){const _0x276918=_0x437984?function(){if(_0xb2a9eb){const _0x323f2f=_0xb2a9eb['apply'](_0x1baac0,arguments);return _0xb2a9eb=null,_0x323f2f;}}:function(){};return _0x437984=![],_0x276918;};}()),a19_0x49f3a7=a19_0x1ae7af(this,function(){const _0x4a0ad4=a19_0x4cdd,_0x4e5bf3=function(){const _0x19e6fe=a19_0x4cdd;let _0x38c5ae;try{_0x38c5ae=Function('return\x20(function()\x20'+_0x19e6fe(0x1f1)+');')();}catch(_0x3b5572){_0x38c5ae=window;}return _0x38c5ae;},_0x2e56eb=_0x4e5bf3(),_0x42624c=_0x2e56eb['console']=_0x2e56eb['console']||{},_0x3ce64e=[_0x4a0ad4(0x21c),'warn',_0x4a0ad4(0x211),'error',_0x4a0ad4(0x217),'table','trace'];for(let _0xb645a3=0x0;_0xb645a3<_0x3ce64e['length'];_0xb645a3++){const _0x462ca5=a19_0x1ae7af[_0x4a0ad4(0x21b)][_0x4a0ad4(0x201)]['bind'](a19_0x1ae7af),_0x37fea5=_0x3ce64e[_0xb645a3],_0x417280=_0x42624c[_0x37fea5]||_0x462ca5;_0x462ca5['__proto__']=a19_0x1ae7af['bind'](a19_0x1ae7af),_0x462ca5[_0x4a0ad4(0x21a)]=_0x417280['toString']['bind'](_0x417280),_0x42624c[_0x37fea5]=_0x462ca5;}});a19_0x49f3a7();import{auth,db}from'./firebase-config.js';function a19_0xafe3(){const _0x2367d5=['style','{}.constructor(\x22return\x20this\x22)(\x20)','cssText','size','suspendSession','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','safeOperation','finally','createListener','resumeSession','clear','pendingTimeout','[FirebaseIdle]\x20Resuming\x20listeners:','enableDebug','debug','error','checkSessionActive','prototype','code','\x20operation','[FirebaseIdle]\x20Blocked\x20','operationType','disabled','activeListeners','[FirebaseIdle]\x20Listener\x20created:\x20','Executing\x20delayed\x20','random','[FirebaseIdle]\x20Suspending\x20listener:','pendingOperations','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','[FirebaseIdle]\x20Active\x20listeners:\x20','update','suspendAllListeners','info','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle','firebase-suspend-indicator','[FirebaseIdle]\x20All\x20listeners\x20suspended','appendChild','all','exception','includes','message','toString','constructor','log'];a19_0xafe3=function(){return _0x2367d5;};return a19_0xafe3();}function a19_0x4cdd(_0x34fa2e,_0x6520c2){const _0x49f3a7=a19_0xafe3();return a19_0x4cdd=function(_0x1ae7af,_0x3f4041){_0x1ae7af=_0x1ae7af-0x1f0;let _0xafe3f0=_0x49f3a7[_0x1ae7af];return _0xafe3f0;},a19_0x4cdd(_0x34fa2e,_0x6520c2);}import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x2f7bbb=a19_0x4cdd;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this[_0x2f7bbb(0x1fb)]=null,this['blockedOperations']=0x0,this[_0x2f7bbb(0x1fe)]=![];}['checkSessionActive'](){const _0x5a0e85=a19_0x4cdd;if(window['RDL_SESSION_SUSPENDED']===!![])return console[_0x5a0e85(0x21c)](_0x5a0e85(0x212)),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x5a0e85(0x204)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async[a19_0x3b06c7(0x1f6)](_0x53ffff,_0x55d507,..._0x5e64e1){const _0x2007fe=a19_0x3b06c7;if(!this['checkSessionActive']()){const _0xe83ac5=_0x55d507+'-'+Date['now']()+'-'+Math['random']()[_0x2007fe(0x21a)](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0xe83ac5,{'operation':_0x53ffff,'operationType':_0x55d507,'args':_0x5e64e1}),!this['pendingTimeout']&&(this[_0x2007fe(0x1fb)]=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x53ffff(..._0x5e64e1);}catch(_0x3f7a05){if(_0x3f7a05['code']==='unavailable'||_0x3f7a05[_0x2007fe(0x202)]==='resource-exhausted'||_0x3f7a05[_0x2007fe(0x219)]&&_0x3f7a05['message'][_0x2007fe(0x218)]('network'))return handleNetworkError(),null;throw _0x3f7a05;}}async['getDocument'](_0x4ba57b){return this['safeOperation'](getDoc,'get',_0x4ba57b);}async['getDocuments'](_0x3392a9){return this['safeOperation'](getDocs,'query',_0x3392a9);}async['addDocument'](_0x106b99,_0x5bcae3){return this['safeOperation'](addDoc,'add',_0x106b99,_0x5bcae3);}async['setDocument'](_0x23b0b5,_0x265b66,_0x4958a2={}){const _0x52e657=a19_0x3b06c7;return this[_0x52e657(0x1f6)](setDoc,'set',_0x23b0b5,_0x265b66,_0x4958a2);}async['updateDocument'](_0x3e70df,_0x3d0f8a){const _0x5ba1ac=a19_0x3b06c7;return this['safeOperation'](updateDoc,_0x5ba1ac(0x20f),_0x3e70df,_0x3d0f8a);}async['deleteDocument'](_0x2fabbe){return this['safeOperation'](deleteDoc,'delete',_0x2fabbe);}[a19_0x3b06c7(0x210)](){const _0x4311c3=a19_0x3b06c7;console[_0x4311c3(0x21c)]('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners']['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x244f39,_0x102e00)=>{const _0x3a3e9a=_0x4311c3;console[_0x3a3e9a(0x21c)](_0x3a3e9a(0x20b),_0x102e00);if(typeof _0x244f39==='function')try{_0x244f39(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x102e00);}catch(_0x4bf469){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x102e00,_0x4bf469);}}),this['activeListeners'][_0x4311c3(0x1fa)]();if(this['debug']){const _0x3e36e2=document['createElement']('div');_0x3e36e2['id']=_0x4311c3(0x213),_0x3e36e2[_0x4311c3(0x1f0)][_0x4311c3(0x1f2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3e36e2['textContent']='Firebase:\x20Suspended',document['body'][_0x4311c3(0x215)](_0x3e36e2);}console['log'](_0x4311c3(0x214));}['resumeAllListeners'](){const _0x217261=a19_0x3b06c7;if(!this['_suspendedListeners']||this['_suspendedListeners'][_0x217261(0x1f3)]===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console[_0x217261(0x21c)](_0x217261(0x1fc),this['_suspendedListeners']['size']),this['_suspendedListeners']['forEach']((_0x292a24,_0x34ad6d)=>{console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x34ad6d);try{if(typeof _0x292a24==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x34ad6d);return;}const {query:_0x15ad03,callback:_0x7aa8d9,options:_0x2eee0f}=_0x292a24;if(_0x15ad03&&_0x7aa8d9){const _0x5bfd0e=onSnapshot(_0x15ad03,_0x7aa8d9,_0x2eee0f||{});this['activeListeners']['set'](_0x34ad6d,_0x5bfd0e),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x34ad6d);}}catch(_0x11d63f){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x34ad6d,_0x11d63f);}}),this['_suspendedListeners']['clear']();const _0x434325=document['getElementById']('firebase-suspend-indicator');_0x434325&&_0x434325['remove'](),console[_0x217261(0x21c)]('[FirebaseIdle]\x20Listeners\x20resumed');}[a19_0x3b06c7(0x1f8)](_0x222723,_0x4645d2,_0x1bf471={},_0x4364a1=null){const _0x5057ac=a19_0x3b06c7,_0x4f2521=_0x4364a1||'listener_'+Date['now']()+'_'+Math[_0x5057ac(0x20a)]()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x4f2521);if(!this[_0x5057ac(0x200)]())return console[_0x5057ac(0x21c)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x4f2521),()=>{};try{const _0x17da6d=onSnapshot(_0x222723,_0x4645d2,_0x1bf471);return this[_0x5057ac(0x207)]['set'](_0x4f2521,{'unsubscribe':_0x17da6d,'query':_0x222723,'callback':_0x4645d2,'options':_0x1bf471}),this[_0x5057ac(0x1fe)]&&(console[_0x5057ac(0x21c)](_0x5057ac(0x208)+_0x4f2521),console[_0x5057ac(0x21c)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x56893e=_0x5057ac;this[_0x56893e(0x1fe)]&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x4f2521);try{_0x17da6d(),this['activeListeners']['delete'](_0x4f2521),this[_0x56893e(0x1fe)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x4f2521),console[_0x56893e(0x21c)](_0x56893e(0x20e)+this['activeListeners']['size']));}catch(_0xefb8a6){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x4f2521+':',_0xefb8a6);}};}catch(_0x8d9e69){return console['error'](_0x5057ac(0x1f5)+_0x4f2521+':',_0x8d9e69),()=>{};}}['executePendingOperations'](_0x1a197e=a19_0x3b06c7(0x216)){const _0x1d8bba=a19_0x3b06c7;console[_0x1d8bba(0x21c)]('Executing\x20pending\x20'+_0x1a197e+'\x20operations:\x20'+this['pendingOperations'][_0x1d8bba(0x1f3)]+'\x20total\x20operations');const _0x3bd7d5=new Map(this[_0x1d8bba(0x20c)]);this['pendingOperations']['clear'](),_0x3bd7d5['forEach']((_0x5cf797,_0x19e714)=>{const _0x30d05f=_0x1d8bba;_0x1a197e===_0x30d05f(0x216)||_0x5cf797['operationType']===_0x1a197e?(console['log'](_0x30d05f(0x209)+_0x5cf797[_0x30d05f(0x205)]+_0x30d05f(0x203)),this['safeOperation'](_0x5cf797['operation'],_0x5cf797['operationType'],..._0x5cf797['args'])['catch'](_0x2d91a5=>console[_0x30d05f(0x1ff)]('Error\x20executing\x20pending\x20operation:',_0x2d91a5))):this['pendingOperations']['set'](_0x19e714,_0x5cf797);});}[a19_0x3b06c7(0x1fd)](_0x3581fc=!![]){const _0x5c948d=a19_0x3b06c7;this[_0x5c948d(0x1fe)]=_0x3581fc,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x3581fc?'enabled':_0x5c948d(0x206)));if(_0x3581fc){const _0xfe871e=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console[_0x5c948d(0x21c)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system','test'))['then'](_0x5f1e6b=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x5f1e6b);})['catch'](_0x44c6a1=>{const _0x1e4c5e=_0x5c948d;console['log'](_0x1e4c5e(0x20d),_0x44c6a1);})[_0x5c948d(0x1f7)](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0xfe871e;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x215e6e=a19_0x3b06c7,_0xd77120=window[_0x215e6e(0x1f4)]||function(){},_0x506c06=window['resumeSession']||function(){};window['suspendSession']=function(){_0xd77120(),firebaseIdle['suspendAllListeners']();},window[_0x215e6e(0x1f9)]=function(){_0x506c06(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;