const a19_0x19edf4=a19_0x462c,a19_0x1934e8=(function(){let _0x57f8ad=!![];return function(_0x3f9c07,_0x4324ba){const _0x505f5a=_0x57f8ad?function(){if(_0x4324ba){const _0x1c4d2f=_0x4324ba['apply'](_0x3f9c07,arguments);return _0x4324ba=null,_0x1c4d2f;}}:function(){};return _0x57f8ad=![],_0x505f5a;};}()),a19_0x32fe13=a19_0x1934e8(this,function(){const _0x41f54c=a19_0x462c;let _0x36ac5d;try{const _0x2b3a32=Function('return\x20(function()\x20'+_0x41f54c(0x152)+');');_0x36ac5d=_0x2b3a32();}catch(_0x31fa8c){_0x36ac5d=window;}const _0x365573=_0x36ac5d['console']=_0x36ac5d[_0x41f54c(0x168)]||{},_0x37193a=['log','warn',_0x41f54c(0x165),'error','exception','table','trace'];for(let _0x38406f=0x0;_0x38406f<_0x37193a['length'];_0x38406f++){const _0x5d1a84=a19_0x1934e8['constructor'][_0x41f54c(0x161)][_0x41f54c(0x156)](a19_0x1934e8),_0x4e52f1=_0x37193a[_0x38406f],_0x3eff1d=_0x365573[_0x4e52f1]||_0x5d1a84;_0x5d1a84['__proto__']=a19_0x1934e8['bind'](a19_0x1934e8),_0x5d1a84[_0x41f54c(0x159)]=_0x3eff1d['toString']['bind'](_0x3eff1d),_0x365573[_0x4e52f1]=_0x5d1a84;}});function a19_0x462c(_0x3e8540,_0x74e528){const _0x32fe13=a19_0x17c7();return a19_0x462c=function(_0x1934e8,_0xd32596){_0x1934e8=_0x1934e8-0x152;let _0x17c747=_0x32fe13[_0x1934e8];return _0x17c747;},a19_0x462c(_0x3e8540,_0x74e528);}a19_0x32fe13();import{auth,db}from'./firebase-config.js';function a19_0x17c7(){const _0xc2d4e0=['{}.constructor(\x22return\x20this\x22)(\x20)','now','createListener','set','bind','size','[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension','toString','blockedOperations','debug','resumeAllListeners','update','error','[FirebaseIdle]\x20Successfully\x20resumed\x20listener:','[FirebaseIdle]\x20Listener\x20removed:\x20','prototype','[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20','\x20operation','substr','info','delete','[FirebaseIdle]\x20Active\x20listeners:\x20','console','pendingOperations','log','resumeSession','firebase-suspend-indicator','[FirebaseIdle]\x20Error\x20suspending\x20listener:','get','clear','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','pendingTimeout','operation','getDocument','remove','_suspendedListeners','add','resource-exhausted','suspendAllListeners','catch','Error\x20executing\x20pending\x20operation:','forEach','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','random','cssText','activeListeners','getElementById','suspendSession','RDL_SESSION_SUSPENDED','[FirebaseIdle]\x20All\x20listeners\x20suspended'];a19_0x17c7=function(){return _0xc2d4e0;};return a19_0x17c7();}import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x496e9d=a19_0x462c;this[_0x496e9d(0x17f)]=new Map(),this[_0x496e9d(0x169)]=new Map(),this['pendingTimeout']=null,this[_0x496e9d(0x15a)]=0x0,this['debug']=![];}['checkSessionActive'](){const _0x55d9fc=a19_0x462c;if(window[_0x55d9fc(0x182)]===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this[_0x55d9fc(0x15a)]=(this[_0x55d9fc(0x15a)]||0x0)+0x1,this[_0x55d9fc(0x15a)]%0xa===0x0&&console['warn']('[FirebaseIdle]\x20Blocked\x20'+this[_0x55d9fc(0x15a)]+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x5d729b,_0x13d85e,..._0x1a3217){const _0x4e6a8a=a19_0x462c;if(!this['checkSessionActive']()){const _0xb4c7eb=_0x13d85e+'-'+Date[_0x4e6a8a(0x153)]()+'-'+Math[_0x4e6a8a(0x17d)]()[_0x4e6a8a(0x159)](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0xb4c7eb,{'operation':_0x5d729b,'operationType':_0x13d85e,'args':_0x1a3217}),!this['pendingTimeout']&&(this[_0x4e6a8a(0x171)]=setTimeout(()=>{const _0x3f0436=_0x4e6a8a;this['pendingOperations'][_0x3f0436(0x16f)](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x5d729b(..._0x1a3217);}catch(_0x468d2f){if(_0x468d2f['code']==='unavailable'||_0x468d2f['code']===_0x4e6a8a(0x177)||_0x468d2f['message']&&_0x468d2f['message']['includes']('network'))return handleNetworkError(),null;throw _0x468d2f;}}async['getDocument'](_0x547105){const _0x543760=a19_0x462c;return this['safeOperation'](getDoc,_0x543760(0x16e),_0x547105);}async['getDocuments'](_0x63f596){return this['safeOperation'](getDocs,'query',_0x63f596);}async['addDocument'](_0x18322b,_0x2dcafc){const _0x83d350=a19_0x462c;return this['safeOperation'](addDoc,_0x83d350(0x176),_0x18322b,_0x2dcafc);}async['setDocument'](_0x7f9b6,_0x365473,_0x4fc76c={}){return this['safeOperation'](setDoc,'set',_0x7f9b6,_0x365473,_0x4fc76c);}async['updateDocument'](_0x186ecd,_0x11fb20){const _0x4ac166=a19_0x462c;return this['safeOperation'](updateDoc,_0x4ac166(0x15d),_0x186ecd,_0x11fb20);}async['deleteDocument'](_0x12f490){const _0x3ae1fb=a19_0x462c;return this['safeOperation'](deleteDoc,_0x3ae1fb(0x166),_0x12f490);}[a19_0x19edf4(0x178)](){const _0x2d5969=a19_0x19edf4;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners']['size']),this[_0x2d5969(0x175)]=new Map(this['activeListeners']),this['activeListeners'][_0x2d5969(0x17b)]((_0x245ffc,_0x2d27d7)=>{const _0x320dd3=_0x2d5969;console[_0x320dd3(0x16a)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x2d27d7);if(typeof _0x245ffc==='function')try{_0x245ffc(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x2d27d7);}catch(_0x3f480c){console['error'](_0x320dd3(0x16d),_0x2d27d7,_0x3f480c);}}),this['activeListeners'][_0x2d5969(0x16f)]();if(this['debug']){const _0xd00f26=document['createElement']('div');_0xd00f26['id']='firebase-suspend-indicator',_0xd00f26['style'][_0x2d5969(0x17e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xd00f26['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0xd00f26);}console['log'](_0x2d5969(0x183));}['resumeAllListeners'](){const _0x57e6e9=a19_0x19edf4;if(!this[_0x57e6e9(0x175)]||this['_suspendedListeners']['size']===0x0){console[_0x57e6e9(0x16a)]('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this[_0x57e6e9(0x175)]['forEach']((_0x5e5968,_0xcea1c9)=>{const _0x40eaaa=_0x57e6e9;console[_0x40eaaa(0x16a)]('[FirebaseIdle]\x20Resuming\x20listener:',_0xcea1c9);try{if(typeof _0x5e5968==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0xcea1c9);return;}const {query:_0x1e3c17,callback:_0x364dad,options:_0x2b3462}=_0x5e5968;if(_0x1e3c17&&_0x364dad){const _0x50effd=onSnapshot(_0x1e3c17,_0x364dad,_0x2b3462||{});this['activeListeners'][_0x40eaaa(0x155)](_0xcea1c9,_0x50effd),console[_0x40eaaa(0x16a)](_0x40eaaa(0x15f),_0xcea1c9);}}catch(_0x155c39){console[_0x40eaaa(0x15e)]('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0xcea1c9,_0x155c39);}}),this['_suspendedListeners']['clear']();const _0x4226cf=document[_0x57e6e9(0x180)](_0x57e6e9(0x16c));_0x4226cf&&_0x4226cf[_0x57e6e9(0x174)](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}[a19_0x19edf4(0x154)](_0x47dad3,_0x5bc4f9,_0x2769e4={},_0x44f2fd=null){const _0x3ea968=a19_0x19edf4,_0x1c62fb=_0x44f2fd||'listener_'+Date[_0x3ea968(0x153)]()+'_'+Math['random']()[_0x3ea968(0x159)](0x24)[_0x3ea968(0x164)](0x2,0x9);this[_0x3ea968(0x15b)]&&console[_0x3ea968(0x16a)]('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x1c62fb);if(!this['checkSessionActive']())return console['log'](_0x3ea968(0x162)+_0x1c62fb),()=>{};try{const _0x1aa5f1=onSnapshot(_0x47dad3,_0x5bc4f9,_0x2769e4);return this['activeListeners']['set'](_0x1c62fb,{'unsubscribe':_0x1aa5f1,'query':_0x47dad3,'callback':_0x5bc4f9,'options':_0x2769e4}),this[_0x3ea968(0x15b)]&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x1c62fb),console['log'](_0x3ea968(0x167)+this['activeListeners']['size'])),()=>{const _0x6e7f1d=_0x3ea968;this[_0x6e7f1d(0x15b)]&&console[_0x6e7f1d(0x16a)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x1c62fb);try{_0x1aa5f1(),this['activeListeners']['delete'](_0x1c62fb),this['debug']&&(console['log'](_0x6e7f1d(0x160)+_0x1c62fb),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0x6e7f1d(0x157)]));}catch(_0x51979c){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x1c62fb+':',_0x51979c);}};}catch(_0xaae08a){return console['error'](_0x3ea968(0x17c)+_0x1c62fb+':',_0xaae08a),()=>{};}}['executePendingOperations'](_0x57a37c='all'){const _0x2d781d=a19_0x19edf4;console['log']('Executing\x20pending\x20'+_0x57a37c+'\x20operations:\x20'+this['pendingOperations'][_0x2d781d(0x157)]+'\x20total\x20operations');const _0x4106f7=new Map(this['pendingOperations']);this['pendingOperations']['clear'](),_0x4106f7[_0x2d781d(0x17b)]((_0x12c4d7,_0x3c40e3)=>{const _0xa68fd9=_0x2d781d;_0x57a37c==='all'||_0x12c4d7['operationType']===_0x57a37c?(console['log']('Executing\x20delayed\x20'+_0x12c4d7['operationType']+_0xa68fd9(0x163)),this['safeOperation'](_0x12c4d7[_0xa68fd9(0x172)],_0x12c4d7['operationType'],..._0x12c4d7['args'])[_0xa68fd9(0x179)](_0x260a5f=>console['error'](_0xa68fd9(0x17a),_0x260a5f))):this['pendingOperations']['set'](_0x3c40e3,_0x12c4d7);});}['enableDebug'](_0x504af7=!![]){const _0x2dd9c5=a19_0x19edf4;this['debug']=_0x504af7,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x504af7?'enabled':'disabled'));if(_0x504af7){const _0x45513d=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console[_0x2dd9c5(0x16a)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this[_0x2dd9c5(0x173)](doc(db,'system','test'))['then'](_0x37cc6e=>{const _0x46e16b=_0x2dd9c5;console['log'](_0x46e16b(0x158),_0x37cc6e);})['catch'](_0x10603e=>{const _0x4491cb=_0x2dd9c5;console['log'](_0x4491cb(0x170),_0x10603e);})['finally'](()=>{const _0x3f19e3=_0x2dd9c5;console[_0x3f19e3(0x16a)]('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x45513d;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x1719e6=a19_0x19edf4,_0x33b82e=window['suspendSession']||function(){},_0x5191ba=window[_0x1719e6(0x16b)]||function(){};window[_0x1719e6(0x181)]=function(){_0x33b82e(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){const _0x241645=_0x1719e6;_0x5191ba(),firebaseIdle[_0x241645(0x15c)]();};}export default firebaseIdle;