const a32_0x516fa5=(function(){let _0x2b9a19=!![];return function(_0x1345e5,_0x40ca00){const _0x53bba0=_0x2b9a19?function(){if(_0x40ca00){const _0x2cb7c3=_0x40ca00['apply'](_0x1345e5,arguments);return _0x40ca00=null,_0x2cb7c3;}}:function(){};return _0x2b9a19=![],_0x53bba0;};}()),a32_0x5715ae=a32_0x516fa5(this,function(){const _0xa42efd=a32_0x1f8c;let _0x1be5cd;try{const _0x4cad50=Function('return\x20(function()\x20'+_0xa42efd(0xf4)+');');_0x1be5cd=_0x4cad50();}catch(_0x43b149){_0x1be5cd=window;}const _0x1ae496=_0x1be5cd['console']=_0x1be5cd[_0xa42efd(0xdc)]||{},_0x29b79d=['log','warn','info','error','exception','table',_0xa42efd(0xec)];for(let _0x23dd54=0x0;_0x23dd54<_0x29b79d['length'];_0x23dd54++){const _0x1715a8=a32_0x516fa5['constructor']['prototype']['bind'](a32_0x516fa5),_0x2363c1=_0x29b79d[_0x23dd54],_0x4debb3=_0x1ae496[_0x2363c1]||_0x1715a8;_0x1715a8[_0xa42efd(0x102)]=a32_0x516fa5['bind'](a32_0x516fa5),_0x1715a8['toString']=_0x4debb3['toString'][_0xa42efd(0xe9)](_0x4debb3),_0x1ae496[_0x2363c1]=_0x1715a8;}});function a32_0x3b5c(){const _0x235bf0=['gray','#50C878','country','D2:\x20Found','gameMode','totalMatches','wins','console','kda','error','desc','#FFD700','playersD2','innerHTML','find','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','.trend-indicator','set','data','approvedMatchesD2','bind','position','#ladder-d2\x20tbody','trace','message','fontSize','asc','number','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','previousElo','forEach','{}.constructor(\x22return\x20this\x22)(\x20)','username','D2\x20Ladder\x20table\x20body\x20not\x20found','toFixed','loserUsername','#4CAF50','change',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','timestamp','losses','style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','includes','__proto__','seconds','visible','winRate','length','abs','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','totalKills','eloHistory','log','get','size','totalDeaths','player','td:nth-child(3)','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','opacity','newElo','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','map'];a32_0x3b5c=function(){return _0x235bf0;};return a32_0x3b5c();}a32_0x5715ae();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x36efbd from'./firebase-idle-wrapper.js';function a32_0x1f8c(_0x55bc00,_0x115255){const _0x5715ae=a32_0x3b5c();return a32_0x1f8c=function(_0x516fa5,_0x13e4f2){_0x516fa5=_0x516fa5-0xd5;let _0x3b5caa=_0x5715ae[_0x516fa5];return _0x3b5caa;},a32_0x1f8c(_0x55bc00,_0x115255);}const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x262913=![]){const _0x3856dc=a32_0x1f8c,_0x29188e=document['querySelector'](_0x3856dc(0xeb));if(!_0x29188e){console[_0x3856dc(0xde)](_0x3856dc(0xf6));return;}_0x29188e['innerHTML']=_0x3856dc(0xf1);try{const _0x3e69b9=Date['now']();if(!_0x262913&&playerCacheD2['data']&&_0x3e69b9-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x9df81a=collection(db,_0x3856dc(0xe1)),_0x3c66f9=query(_0x9df81a,orderBy('position',_0x3856dc(0xef))),_0x5ba655=await a32_0x36efbd['getDocuments'](_0x9df81a),_0x5534e5=[];_0x5ba655['forEach'](_0x2adde7=>{const _0x3ab6e2=_0x3856dc,_0x7502bd=_0x2adde7['data']();_0x7502bd[_0x3ab6e2(0xf5)]&&_0x5534e5['push']({..._0x7502bd,'id':_0x2adde7['id'],'elo':_0x7502bd['eloRating']||0x0,'position':_0x7502bd['position']||Number['MAX_SAFE_INTEGER']});});const _0x487f95=collection(db,'userProfiles'),_0x510165=await getDocs(_0x487f95),_0xee93e0=new Map();_0x510165['forEach'](_0x216547=>{const _0x516d14=_0x3856dc,_0x47ee92=_0x216547['data']();_0x47ee92['username']&&_0xee93e0[_0x516d14(0xe6)](_0x47ee92[_0x516d14(0xf5)]['toLowerCase'](),_0x47ee92);});for(const _0x811af0 of _0x5534e5){const _0x5ece0c=_0x811af0['username']['toLowerCase']();if(_0xee93e0['has'](_0x5ece0c)){const _0x40265e=_0xee93e0[_0x3856dc(0x10c)](_0x5ece0c);_0x40265e[_0x3856dc(0xd7)]&&(_0x811af0['country']=_0x40265e[_0x3856dc(0xd7)]['toLowerCase']());}}const _0x197ec0=_0x5534e5['map'](_0xa3685a=>_0xa3685a[_0x3856dc(0xf5)]),_0x39ae79=await fetchBatchMatchStatsD2(_0x197ec0);_0x5534e5['sort']((_0xbf9366,_0x14a2e9)=>{const _0x558023=_0x3856dc,_0x2854c5=_0x39ae79['get'](_0xbf9366[_0x558023(0xf5)])?.[_0x558023(0xda)]||0x0,_0x3f0ef3=_0x39ae79['get'](_0x14a2e9['username'])?.['totalMatches']||0x0;if(_0x2854c5===0x0!==(_0x3f0ef3===0x0))return _0x2854c5===0x0?0x1:-0x1;return(_0xbf9366['position']||0x3e7)-(_0x14a2e9['position']||0x3e7);}),_0x5534e5['forEach']((_0x4f446b,_0x4c1658)=>{const _0x38c3ac=_0x3856dc;_0x4f446b[_0x38c3ac(0xea)]=_0x4c1658+0x1;}),playerCacheD2['data']=_0x5534e5,playerCacheD2[_0x3856dc(0xfc)]=_0x3e69b9,updateLadderDisplayD2(_0x5534e5);}catch(_0x50f487){console[_0x3856dc(0xde)]('Error\x20loading\x20D2\x20ladder:',_0x50f487),_0x29188e['innerHTML']=_0x3856dc(0x108)+_0x50f487[_0x3856dc(0xed)]+_0x3856dc(0xff);}}function getNextAvailablePositionD2(_0x21a9a8){if(_0x21a9a8['length']===0x0)return 0x1;let _0x18dede=0x0;return _0x21a9a8['forEach'](_0xba3135=>{const _0x463f67=a32_0x1f8c;_0xba3135['position']&&typeof _0xba3135['position']===_0x463f67(0xf0)&&_0xba3135['position']>_0x18dede&&(_0x18dede=_0xba3135['position']);}),_0x18dede+0x1;}async function updatePlayerPositions(_0x19c35b,_0x537aff){const _0x5bfabe=a32_0x1f8c;try{const _0x417129=collection(db,'playersD2'),_0x4c4c30=await getDocs(_0x417129),_0x42905f=[];_0x4c4c30['forEach'](_0x1ea77d=>{const _0x210dc9=a32_0x1f8c;_0x42905f['push']({'id':_0x1ea77d['id'],..._0x1ea77d[_0x210dc9(0xe7)]()});});const _0x510c81=_0x42905f['find'](_0x2c320e=>_0x2c320e['username']===_0x19c35b),_0x423c64=_0x42905f[_0x5bfabe(0xe3)](_0x3a1cfa=>_0x3a1cfa[_0x5bfabe(0xf5)]===_0x537aff);if(!_0x510c81||!_0x423c64){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x510c81['position']>_0x423c64['position']){const _0x30682c=_0x423c64['position'];for(const _0x2516df of _0x42905f){_0x2516df[_0x5bfabe(0xea)]>=_0x423c64['position']&&_0x2516df[_0x5bfabe(0xea)]<_0x510c81['position']&&_0x2516df['username']!==_0x19c35b&&await updateDoc(doc(db,'playersD2',_0x2516df['id']),{'position':_0x2516df['position']+0x1});}await updateDoc(doc(db,_0x5bfabe(0xe1),_0x510c81['id']),{'position':_0x30682c});if(_0x30682c===0x1){const _0x1b42b6=doc(db,'playersD2',_0x510c81['id']),_0x124939=await getDoc(_0x1b42b6);!_0x124939[_0x5bfabe(0xe7)]()['firstPlaceDate']&&await updateDoc(_0x1b42b6,{'firstPlaceDate':Timestamp['now']()});}if(_0x423c64['position']===0x1){const _0x743c93=doc(db,'playersD2',_0x423c64['id']);await updateDoc(_0x743c93,{'firstPlaceDate':null});}playerCacheD2[_0x5bfabe(0xfc)]=0x0;}}catch(_0x32d3e6){console['error']('Error\x20updating\x20D2\x20player\x20positions:',_0x32d3e6);}}function calculateStreakDays(_0x13dd8a){const _0x19c98f=a32_0x1f8c;if(!_0x13dd8a)return 0x0;const _0x24774e=_0x13dd8a['toDate'](),_0x1c6c5b=new Date(),_0x184426=Math[_0x19c98f(0x107)](_0x1c6c5b-_0x24774e);return Math['ceil'](_0x184426/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x2f7013){if(_0x2f7013>=0x834)return'Emerald';if(_0x2f7013>=0x708)return'Gold';if(_0x2f7013>=0x640)return'Silver';if(_0x2f7013>=0x578)return'Bronze';return'Unranked';}async function updateLadderDisplayD2(_0x328062){const _0x306539=a32_0x1f8c;_0x328062['sort']((_0x2bebb6,_0x3aece7)=>_0x2bebb6['position']-_0x3aece7['position']);const _0x145b2b=document['querySelector'](_0x306539(0xeb));if(!_0x145b2b)return;_0x145b2b[_0x306539(0xe2)]='';const _0x56e859=_0x328062['map'](_0x1290bb=>_0x1290bb[_0x306539(0xf5)]),_0x527693=await fetchBatchMatchStatsD2(_0x56e859),_0x505051=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x505051&&(_0x505051['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x18a062=_0x328062[_0x306539(0x115)](_0x3864b8=>{const _0x1d5096=_0x527693['get'](_0x3864b8['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x3864b8,_0x1d5096);})['join']('');_0x145b2b[_0x306539(0xe2)]=_0x18a062,getPlayersLastEloChangesD2(_0x56e859)['then'](_0x582b66=>{const _0x3d9e4a=_0x306539,_0x4975b5=new Map();_0x145b2b['querySelectorAll']('tr')['forEach']((_0x5b5e49,_0x162b62)=>{const _0xec93cd=a32_0x1f8c;_0x162b62<_0x56e859[_0xec93cd(0x106)]&&_0x4975b5['set'](_0x56e859[_0x162b62],_0x5b5e49);}),_0x582b66[_0x3d9e4a(0xf3)]((_0x3d7a86,_0x2a426c)=>{const _0x2f0c8f=_0x3d9e4a,_0x5a1a40=_0x4975b5[_0x2f0c8f(0x10c)](_0x2a426c);if(_0x5a1a40&&_0x3d7a86!==0x0){const _0x395f2c=_0x5a1a40['querySelector'](_0x2f0c8f(0x110));if(_0x395f2c){const _0x178450=_0x3d7a86>0x0?'+'+_0x3d7a86:''+_0x3d7a86,_0x1b1e65=_0x395f2c['querySelector'](_0x2f0c8f(0xe5));_0x1b1e65&&(_0x1b1e65['textContent']=_0x178450,_0x1b1e65['style']['color']=_0x3d7a86>0x0?_0x2f0c8f(0xf9):'#F44336',_0x1b1e65['style']['fontWeight']='bold',_0x1b1e65[_0x2f0c8f(0xfe)][_0x2f0c8f(0xee)]='0.85em',_0x1b1e65['style']['display']='inline',_0x1b1e65['style']['visibility']=_0x2f0c8f(0x104),_0x1b1e65['style'][_0x2f0c8f(0x112)]='1');}}});})['catch'](_0x830bc3=>console[_0x306539(0xde)]('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0x830bc3));}function createPlayerRowD2(_0x162ee8,_0x343f65){const _0x1f2ffd=a32_0x1f8c,_0x4430cc=parseFloat(_0x162ee8['elo'])||0x0;let _0x1a4c8d=_0x1f2ffd(0xd5);if(_0x4430cc>=0x7d0)_0x1a4c8d=_0x1f2ffd(0xd6);else{if(_0x4430cc>=0x708)_0x1a4c8d=_0x1f2ffd(0xe0);else{if(_0x4430cc>=0x640)_0x1a4c8d='#C0C0C0';else _0x4430cc>=0x578&&(_0x1a4c8d='#CD7F32');}}let _0x3e6bd0='';return _0x162ee8['country']&&(_0x3e6bd0='<img\x20src=\x22../images/flags/'+_0x162ee8['country']['toLowerCase']()+_0x1f2ffd(0x100)+_0x162ee8['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x1f2ffd(0x111)+_0x162ee8[_0x1f2ffd(0xea)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x162ee8['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x1a4c8d+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x162ee8['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3e6bd0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x1a4c8d+_0x1f2ffd(0xfb)+_0x4430cc+_0x1f2ffd(0x114)+_0x343f65['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x343f65['wins']+_0x1f2ffd(0xe4)+_0x343f65['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x343f65[_0x1f2ffd(0xdd)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x343f65[_0x1f2ffd(0x105)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD2(_0x278682){const _0xac2df2=a32_0x1f8c,_0x51c886=new Map();_0x278682['forEach'](_0x4777ae=>_0x51c886['set'](_0x4777ae,0x0));try{const _0x583339=collection(db,'eloHistoryD2'),_0x368f55=query(_0x583339,orderBy('timestamp','desc'),limit(0x64)),_0x59802c=await getDocs(_0x368f55),_0x1473f4=new Map(),_0x4d5503=await getDocs(collection(db,'playersD2'));_0x4d5503[_0xac2df2(0xf3)](_0x176543=>{const _0x2ce315=_0xac2df2,_0x277bb8=_0x176543[_0x2ce315(0xe7)]();_0x277bb8[_0x2ce315(0xf5)]&&_0x1473f4['set'](_0x176543['id'],_0x277bb8[_0x2ce315(0xf5)]);});const _0x57cfb7=new Map();_0x59802c['forEach'](_0x41ce06=>{const _0x20f475=_0xac2df2,_0x24a576=_0x41ce06['data']();let _0x29fd2c=_0x24a576['username']||_0x24a576['playerUsername'];!_0x29fd2c&&_0x24a576['player']&&_0x1473f4['has'](_0x24a576[_0x20f475(0x10f)])&&(_0x29fd2c=_0x1473f4[_0x20f475(0x10c)](_0x24a576['player']));if(!_0x29fd2c&&_0x24a576['matchId']){}_0x29fd2c&&_0x278682['includes'](_0x29fd2c)&&(!_0x57cfb7['has'](_0x29fd2c)&&_0x57cfb7[_0x20f475(0xe6)](_0x29fd2c,[]),_0x57cfb7['get'](_0x29fd2c)['push']({..._0x24a576,'timestamp':_0x24a576[_0x20f475(0xfc)]?.[_0x20f475(0x103)]||0x0,'username':_0x29fd2c}));}),_0x57cfb7['forEach']((_0xf56a4d,_0x120e29)=>{const _0x4a32e1=_0xac2df2;if(_0xf56a4d['length']>0x0){_0xf56a4d['sort']((_0x2e7a1f,_0x370560)=>_0x370560[_0x4a32e1(0xfc)]-_0x2e7a1f['timestamp']);const _0x1564fe=_0xf56a4d['find'](_0x3fb1f0=>_0x3fb1f0['change']!==undefined||_0x3fb1f0['newElo']!==undefined&&_0x3fb1f0[_0x4a32e1(0xf2)]!==undefined);if(_0x1564fe){let _0x2f0e8c;if(_0x1564fe[_0x4a32e1(0xfa)]!==undefined)_0x2f0e8c=_0x1564fe[_0x4a32e1(0xfa)];else _0x1564fe['newElo']!==undefined&&_0x1564fe['previousElo']!==undefined&&(_0x2f0e8c=_0x1564fe['newElo']-_0x1564fe['previousElo']);_0x2f0e8c!==undefined&&_0x51c886[_0x4a32e1(0xe6)](_0x120e29,_0x2f0e8c);}}});if(_0x57cfb7[_0xac2df2(0x10d)]===0x0){const _0xa3bf85=collection(db,_0xac2df2(0x10a)),_0x24a55e=query(_0xa3bf85,where(_0xac2df2(0xd9),'==','D2'),orderBy('timestamp',_0xac2df2(0xdf)),limit(0x32));try{const _0x54d884=await getDocs(_0x24a55e);console[_0xac2df2(0x10b)](_0xac2df2(0xd8),_0x54d884[_0xac2df2(0x10d)],'fallback\x20entries'),_0x54d884[_0xac2df2(0xf3)](_0x43fd65=>{const _0x1d55b8=_0xac2df2,_0x5d72d6=_0x43fd65['data'](),_0x24850b=_0x5d72d6['username']||_0x5d72d6['playerUsername'];if(_0x24850b&&_0x278682[_0x1d55b8(0x101)](_0x24850b)){const _0x3f8cdb=_0x5d72d6['change']||(_0x5d72d6[_0x1d55b8(0x113)]!==undefined&&_0x5d72d6['previousElo']!==undefined?_0x5d72d6[_0x1d55b8(0x113)]-_0x5d72d6[_0x1d55b8(0xf2)]:0x0);_0x3f8cdb!==0x0&&(_0x51c886['set'](_0x24850b,_0x3f8cdb),console[_0x1d55b8(0x10b)]('D2:\x20'+_0x24850b+'\x20fallback\x20ELO\x20change:\x20'+_0x3f8cdb));}});}catch(_0x4d4f89){}}}catch(_0x4a0f84){console[_0xac2df2(0xde)]('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x4a0f84);}return _0x51c886;}async function fetchBatchMatchStatsD2(_0x37127a){const _0x1e23ef=a32_0x1f8c,_0x1a0413=new Map();try{_0x37127a['forEach'](_0x142808=>{_0x1a0413['set'](_0x142808,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x36ae78=collection(db,_0x1e23ef(0xe8)),_0x84416=await getDocs(_0x36ae78);_0x84416['forEach'](_0x4fef35=>{const _0x1cd6b2=_0x1e23ef,_0x1415df=_0x4fef35[_0x1cd6b2(0xe7)](),_0x3a2ccd=_0x1415df['winnerUsername'],_0x451531=_0x1415df[_0x1cd6b2(0xf8)];if(_0x37127a['includes'](_0x3a2ccd)){const _0x451c27=_0x1a0413['get'](_0x3a2ccd);_0x451c27['wins']++,_0x451c27['totalMatches']++,_0x451c27[_0x1cd6b2(0x109)]+=parseInt(_0x1415df['winnerScore'])||0x0,_0x451c27['totalDeaths']+=parseInt(_0x1415df['loserScore'])||0x0;}if(_0x37127a[_0x1cd6b2(0x101)](_0x451531)){const _0x59e466=_0x1a0413['get'](_0x451531);_0x59e466[_0x1cd6b2(0xfd)]++,_0x59e466['totalMatches']++,_0x59e466[_0x1cd6b2(0x109)]+=parseInt(_0x1415df['loserScore'])||0x0,_0x59e466['totalDeaths']+=parseInt(_0x1415df['winnerScore'])||0x0;}}),_0x37127a[_0x1e23ef(0xf3)](_0x37e7a4=>{const _0x572d87=_0x1e23ef,_0xabf7d9=_0x1a0413['get'](_0x37e7a4);_0xabf7d9[_0x572d87(0xdd)]=_0xabf7d9['totalDeaths']>0x0?(_0xabf7d9['totalKills']/_0xabf7d9[_0x572d87(0x10e)])['toFixed'](0x2):_0xabf7d9['totalKills']['toFixed'](0x2),_0xabf7d9['winRate']=_0xabf7d9[_0x572d87(0xda)]>0x0?(_0xabf7d9[_0x572d87(0xdb)]/_0xabf7d9['totalMatches']*0x64)[_0x572d87(0xf7)](0x1):0x0;});}catch(_0x578a98){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x578a98);}return _0x1a0413;}export{displayLadderD2,updatePlayerPositions};