(function(_0x1f4dd8,_0x5d07f8){const _0x35cd3f=a0_0x38d6,_0x223ec5=_0x1f4dd8();while(!![]){try{const _0x2632e4=parseInt(_0x35cd3f(0x186))/0x1+parseInt(_0x35cd3f(0x171))/0x2+-parseInt(_0x35cd3f(0x1a0))/0x3+-parseInt(_0x35cd3f(0x17f))/0x4+parseInt(_0x35cd3f(0x187))/0x5+parseInt(_0x35cd3f(0x19d))/0x6*(-parseInt(_0x35cd3f(0x192))/0x7)+parseInt(_0x35cd3f(0x19a))/0x8;if(_0x2632e4===_0x5d07f8)break;else _0x223ec5['push'](_0x223ec5['shift']());}catch(_0x5c023b){_0x223ec5['push'](_0x223ec5['shift']());}}}(a0_0x2983,0x716e7));const a0_0x15a996=(function(){let _0x4654ae=!![];return function(_0x55f900,_0x34250f){const _0x5c0be9=_0x4654ae?function(){const _0x40390f=a0_0x38d6;if(_0x34250f){const _0x3330ef=_0x34250f[_0x40390f(0x18e)](_0x55f900,arguments);return _0x34250f=null,_0x3330ef;}}:function(){};return _0x4654ae=![],_0x5c0be9;};}()),a0_0x5060eb=a0_0x15a996(this,function(){const _0x47ba74=a0_0x38d6;let _0x5e44c4;try{const _0x20393a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5e44c4=_0x20393a();}catch(_0x507d55){_0x5e44c4=window;}const _0x574f21=_0x5e44c4['console']=_0x5e44c4[_0x47ba74(0x16e)]||{},_0x58bc34=['log',_0x47ba74(0x16b),'info','error','exception',_0x47ba74(0x180),'trace'];for(let _0x5cceba=0x0;_0x5cceba<_0x58bc34[_0x47ba74(0x18d)];_0x5cceba++){const _0x52881f=a0_0x15a996[_0x47ba74(0x1a2)]['prototype'][_0x47ba74(0x178)](a0_0x15a996),_0x23531d=_0x58bc34[_0x5cceba],_0x3528de=_0x574f21[_0x23531d]||_0x52881f;_0x52881f['__proto__']=a0_0x15a996['bind'](a0_0x15a996),_0x52881f[_0x47ba74(0x18c)]=_0x3528de['toString']['bind'](_0x3528de),_0x574f21[_0x23531d]=_0x52881f;}});a0_0x5060eb();function a0_0x2983(){const _0x46ecdf=['forEach','approvedMatchesD2','opacity','1586952sMSiBn','username','#C0C0C0','426AbuyWt','getDocuments','get','1725219uOZsPO','desc','constructor','D2:\x20Error\x20fetching\x20ELO\x20history:','Silver','#CD7F32','losses','timestamp','toFixed','newElo','wins','#ladder-d2\x20tbody','totalDeaths','warn','inline','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','console','data','kda','1710274JIKlGc','Error\x20loading\x20D2\x20ladder:','includes','innerHTML','totalMatches','points','sort','bind','\x0a<tr>\x0a\x20\x20\x20\x20<td>','totalKills','eloHistory','eloRating','country','loserScore','2522832wHEiSD','table','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','style','previousElo','winnerScore','522302MucnwW','1965715yEbNDi','error','toLowerCase','playerUsername','change','toString','length','apply','playersD2','elo','#4CAF50','29435REFOQd','set','join','display','position'];a0_0x2983=function(){return _0x46ecdf;};return a0_0x2983();}import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a0_0x2c5be4 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x6f13a8=![]){const _0x2b469c=a0_0x38d6,_0x2791e7=document['querySelector'](_0x2b469c(0x169));if(!_0x2791e7){console['error']('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x2791e7['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x222e15=Date['now']();if(!_0x6f13a8&&playerCacheD2['data']&&_0x222e15-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0x2b469c(0x16f)]);return;}const _0x423b64=collection(db,'playersD2'),_0x3cbcbb=await a0_0x2c5be4[_0x2b469c(0x19e)](_0x423b64),_0x2f655e=[];_0x3cbcbb['forEach'](_0x30537c=>{const _0xfd1ff=_0x2b469c,_0x430e5d=_0x30537c['data']();_0x430e5d['username']&&_0x2f655e['push']({..._0x430e5d,'id':_0x30537c['id'],'elo':_0x430e5d[_0xfd1ff(0x17c)]||0x0,'position':_0x430e5d['position']||Number['MAX_SAFE_INTEGER']});});const _0x190fb2=collection(db,'userProfiles'),_0xb97452=await getDocs(_0x190fb2),_0x361bc8=new Map();_0xb97452['forEach'](_0x488caa=>{const _0x42e23f=_0x2b469c,_0x9fb26d=_0x488caa['data']();_0x9fb26d['username']&&_0x361bc8['set'](_0x9fb26d[_0x42e23f(0x19b)][_0x42e23f(0x189)](),_0x9fb26d);});for(const _0xfc47b0 of _0x2f655e){const _0xdb12ff=_0xfc47b0[_0x2b469c(0x19b)][_0x2b469c(0x189)]();if(_0x361bc8['has'](_0xdb12ff)){const _0x309ac9=_0x361bc8['get'](_0xdb12ff);_0x309ac9['country']&&(_0xfc47b0['country']=_0x309ac9['country'][_0x2b469c(0x189)]()),_0xfc47b0['points']=_0x309ac9[_0x2b469c(0x176)]||0x0;}else _0xfc47b0['points']=0x0;}const _0x25d34c=_0x2f655e['map'](_0x58fe31=>_0x58fe31['username']),_0x4b82d3=await fetchBatchMatchStatsD2(_0x25d34c);_0x2f655e[_0x2b469c(0x177)]((_0x1bf28e,_0x5e9294)=>{const _0x2e1a49=_0x2b469c,_0x23225=_0x4b82d3[_0x2e1a49(0x19f)](_0x1bf28e[_0x2e1a49(0x19b)])?.['totalMatches']||0x0,_0x19e7d1=_0x4b82d3['get'](_0x5e9294['username'])?.[_0x2e1a49(0x175)]||0x0;if(_0x23225===0x0!==(_0x19e7d1===0x0))return _0x23225===0x0?0x1:-0x1;return(_0x1bf28e['position']||0x3e7)-(_0x5e9294['position']||0x3e7);}),_0x2f655e[_0x2b469c(0x197)]((_0x3e5aea,_0x54d2af)=>{_0x3e5aea['position']=_0x54d2af+0x1;}),playerCacheD2['data']=_0x2f655e,playerCacheD2[_0x2b469c(0x165)]=_0x222e15,updateLadderDisplayD2(_0x2f655e);}catch(_0x2aefb5){console[_0x2b469c(0x188)](_0x2b469c(0x172),_0x2aefb5),_0x2791e7['innerHTML']=_0x2b469c(0x181)+_0x2aefb5['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function a0_0x38d6(_0x5abc2d,_0xffafb7){const _0x569105=a0_0x2983();return a0_0x38d6=function(_0x5060eb,_0x15a996){_0x5060eb=_0x5060eb-0x162;let _0x37282e=_0x569105[_0x5060eb];return _0x37282e;},a0_0x38d6(_0x5abc2d,_0xffafb7);}function getNextAvailablePositionD2(_0x29da82){if(_0x29da82['length']===0x0)return 0x1;let _0x5641c2=0x0;return _0x29da82['forEach'](_0x2c07cd=>{const _0x31aca6=a0_0x38d6;_0x2c07cd[_0x31aca6(0x196)]&&typeof _0x2c07cd['position']==='number'&&_0x2c07cd['position']>_0x5641c2&&(_0x5641c2=_0x2c07cd['position']);}),_0x5641c2+0x1;}async function updatePlayerPositions(_0x23b652,_0x3912bc){const _0x425abc=a0_0x38d6;try{const _0x29bc8a=collection(db,'playersD2'),_0x580556=await getDocs(_0x29bc8a),_0x458703=[];_0x580556[_0x425abc(0x197)](_0x161236=>{_0x458703['push']({'id':_0x161236['id'],..._0x161236['data']()});});const _0x20ebf9=_0x458703['find'](_0x588d97=>_0x588d97['username']===_0x23b652),_0x180dbf=_0x458703['find'](_0x502c51=>_0x502c51['username']===_0x3912bc);if(!_0x20ebf9||!_0x180dbf){console[_0x425abc(0x188)]('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x20ebf9[_0x425abc(0x196)]>_0x180dbf['position']){const _0x15bd89=_0x180dbf['position'];for(const _0x501cc0 of _0x458703){_0x501cc0[_0x425abc(0x196)]>=_0x180dbf['position']&&_0x501cc0[_0x425abc(0x196)]<_0x20ebf9['position']&&_0x501cc0[_0x425abc(0x19b)]!==_0x23b652&&await updateDoc(doc(db,'playersD2',_0x501cc0['id']),{'position':_0x501cc0['position']+0x1});}await updateDoc(doc(db,_0x425abc(0x18f),_0x20ebf9['id']),{'position':_0x15bd89});if(_0x15bd89===0x1){const _0x43110f=doc(db,_0x425abc(0x18f),_0x20ebf9['id']),_0x236a9a=await getDoc(_0x43110f);!_0x236a9a['data']()['firstPlaceDate']&&await updateDoc(_0x43110f,{'firstPlaceDate':Timestamp['now']()});}if(_0x180dbf['position']===0x1){const _0x3552dc=doc(db,'playersD2',_0x180dbf['id']);await updateDoc(_0x3552dc,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x594494){console['error']('Error\x20updating\x20D2\x20player\x20positions:',_0x594494);}}function getPlayerRankNameD2(_0x48165a,_0x1d78bf=0x0,_0x14d200=0x0){const _0x17d059=a0_0x38d6;if(_0x1d78bf===0x0)return'Unranked';if(_0x48165a>=0x3e8&&_0x14d200>=0x50&&_0x1d78bf>=0x14)return'Emerald';if(_0x48165a>=0x2bc)return'Gold';if(_0x48165a>=0x1f4)return _0x17d059(0x162);if(_0x48165a>=0xc8)return'Bronze';return'Unranked';}window['refreshLadderDisplayD2']=function(_0x4086a7=!![]){typeof displayLadderD2==='function'?displayLadderD2(_0x4086a7):console['warn']('displayLadderD2\x20function\x20not\x20available');};async function updateLadderDisplayD2(_0x28e387){const _0x384e96=a0_0x38d6;_0x28e387['sort']((_0x2e08ed,_0xe8dd1a)=>_0x2e08ed['position']-_0xe8dd1a[_0x384e96(0x196)]);const _0x52b99b=document['querySelector']('#ladder-d2\x20tbody');if(!_0x52b99b)return;_0x52b99b['innerHTML']='';const _0x34ce9c=_0x28e387['map'](_0x30da18=>_0x30da18['username']),_0x16d13b=await fetchBatchMatchStatsD2(_0x34ce9c);let _0x412d66=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x412d66=await getTokensByUsernames(_0x34ce9c);}catch(_0x4810bc){console['error']('D2:\x20Error\x20fetching\x20tokens:',_0x4810bc);}const _0x55b462=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x55b462&&(_0x55b462[_0x384e96(0x174)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x193474=_0x28e387['map'](_0x56bdd1=>{const _0x1393c3=_0x384e96,_0x5ca0ef=_0x16d13b['get'](_0x56bdd1['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x49be45=_0x412d66[_0x1393c3(0x19f)](_0x56bdd1['username'])||[],_0x25d8e7=getPrimaryDisplayToken(_0x49be45);return createPlayerRowWithTokenD2(_0x56bdd1,_0x5ca0ef,_0x25d8e7);})[_0x384e96(0x194)]('');_0x52b99b['innerHTML']=_0x193474,getPlayersLastEloChangesD2(_0x34ce9c)['then'](_0x412833=>{const _0x251801=_0x384e96,_0x5c93b3=new Map();_0x52b99b['querySelectorAll']('tr')[_0x251801(0x197)]((_0x145785,_0xd84bfb)=>{const _0x341418=_0x251801;_0xd84bfb<_0x34ce9c['length']&&_0x5c93b3[_0x341418(0x193)](_0x34ce9c[_0xd84bfb],_0x145785);}),_0x412833[_0x251801(0x197)]((_0x166abb,_0x3329f7)=>{const _0x45de58=_0x251801,_0x318e56=_0x5c93b3[_0x45de58(0x19f)](_0x3329f7);if(_0x318e56&&_0x166abb!==0x0){const _0x344e2a=_0x318e56['querySelector']('td:nth-child(3)');if(_0x344e2a){const _0x493793=_0x166abb>0x0?'+'+_0x166abb:''+_0x166abb,_0x1836fb=_0x344e2a['querySelector']('.trend-indicator');_0x1836fb&&(_0x1836fb['textContent']=_0x493793,_0x1836fb['style']['color']=_0x166abb>0x0?_0x45de58(0x191):'#F44336',_0x1836fb['style']['fontWeight']='bold',_0x1836fb['style']['fontSize']='0.85em',_0x1836fb[_0x45de58(0x183)][_0x45de58(0x195)]=_0x45de58(0x16c),_0x1836fb['style']['visibility']='visible',_0x1836fb['style'][_0x45de58(0x199)]='1');}}});})['catch'](_0x2a7174=>console['error']('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0x2a7174));}function createPlayerRowWithTokenD2(_0x21d330,_0x52fc78,_0x3d1eea){const _0x31c51c=a0_0x38d6,_0x39c469=parseFloat(_0x21d330[_0x31c51c(0x190)])||0x0;let _0x5563ec='#DC143C';if(_0x52fc78['totalMatches']===0x0)_0x5563ec='#DC143C';else{if(_0x39c469>=0x3e8&&_0x52fc78['winRate']>=0x50&&_0x52fc78['totalMatches']>=0x14)_0x5563ec='#50C878';else{if(_0x39c469>=0x2bc)_0x5563ec='#FFD700';else{if(_0x39c469>=0x1f4)_0x5563ec=_0x31c51c(0x19c);else _0x39c469>=0xc8&&(_0x5563ec=_0x31c51c(0x163));}}}let _0x41e0e4='';_0x21d330['country']&&(_0x41e0e4='<img\x20src=\x22../images/flags/'+_0x21d330['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x21d330[_0x31c51c(0x17d)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x7127c7='';return _0x3d1eea&&(_0x7127c7='<img\x20src=\x22'+_0x3d1eea['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3d1eea['tokenName']+_0x31c51c(0x182)+_0x3d1eea['tokenName']+'\x20'+(_0x3d1eea['equipped']?'(Equipped)':'')+_0x31c51c(0x16d)),_0x31c51c(0x179)+_0x21d330[_0x31c51c(0x196)]+'</td>\x0a\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x21d330['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x5563ec+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x21d330['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x41e0e4+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x7127c7+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x5563ec+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x39c469+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td>'+_0x52fc78['totalMatches']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x52fc78['wins']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x52fc78['losses']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x52fc78['kda']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x52fc78['winRate']+'%</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0x21d330[_0x31c51c(0x176)]||0x0)+'</td>\x0a</tr>';}async function getPlayersLastEloChangesD2(_0x248a0d){const _0x17038b=a0_0x38d6,_0x4f6ce9=new Map();_0x248a0d['forEach'](_0x3f1268=>_0x4f6ce9['set'](_0x3f1268,0x0));try{const _0x5a867c=collection(db,'eloHistoryD2'),_0x549407=query(_0x5a867c,orderBy(_0x17038b(0x165),_0x17038b(0x1a1)),limit(0x64)),_0x25494a=await getDocs(_0x549407),_0xf2cb17=new Map(),_0x109075=await getDocs(collection(db,_0x17038b(0x18f)));_0x109075['forEach'](_0x142555=>{const _0x3b28f3=_0x17038b,_0x93ffa4=_0x142555['data']();_0x93ffa4['username']&&_0xf2cb17[_0x3b28f3(0x193)](_0x142555['id'],_0x93ffa4['username']);});const _0x257569=new Map();_0x25494a[_0x17038b(0x197)](_0x3d0d70=>{const _0x564a35=_0x17038b,_0x3db1ed=_0x3d0d70['data']();let _0x4cc7ec=_0x3db1ed['username']||_0x3db1ed['playerUsername'];!_0x4cc7ec&&_0x3db1ed['player']&&_0xf2cb17['has'](_0x3db1ed['player'])&&(_0x4cc7ec=_0xf2cb17['get'](_0x3db1ed['player'])),_0x4cc7ec&&_0x248a0d[_0x564a35(0x173)](_0x4cc7ec)&&(!_0x257569['has'](_0x4cc7ec)&&_0x257569['set'](_0x4cc7ec,[]),_0x257569[_0x564a35(0x19f)](_0x4cc7ec)['push']({..._0x3db1ed,'timestamp':_0x3db1ed['timestamp']?.['seconds']||0x0,'username':_0x4cc7ec}));}),_0x257569['forEach']((_0xe8743e,_0x1f4e06)=>{const _0x35533f=_0x17038b;if(_0xe8743e['length']>0x0){_0xe8743e[_0x35533f(0x177)]((_0x1b7fc5,_0x54ddce)=>_0x54ddce[_0x35533f(0x165)]-_0x1b7fc5[_0x35533f(0x165)]);const _0x1a5b8c=_0xe8743e['find'](_0x309c4f=>_0x309c4f['change']!==undefined||_0x309c4f['newElo']!==undefined&&_0x309c4f['previousElo']!==undefined);if(_0x1a5b8c){let _0x133b96;if(_0x1a5b8c['change']!==undefined)_0x133b96=_0x1a5b8c[_0x35533f(0x18b)];else _0x1a5b8c['newElo']!==undefined&&_0x1a5b8c['previousElo']!==undefined&&(_0x133b96=_0x1a5b8c['newElo']-_0x1a5b8c['previousElo']);_0x133b96!==undefined&&_0x4f6ce9['set'](_0x1f4e06,_0x133b96);}}});if(_0x257569['size']===0x0){const _0x2c3231=collection(db,_0x17038b(0x17b)),_0x33980d=query(_0x2c3231,where('gameMode','==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x102534=await getDocs(_0x33980d);_0x102534[_0x17038b(0x197)](_0x345e23=>{const _0x58adb7=_0x17038b,_0x2691d5=_0x345e23['data'](),_0x90a659=_0x2691d5['username']||_0x2691d5[_0x58adb7(0x18a)];if(_0x90a659&&_0x248a0d[_0x58adb7(0x173)](_0x90a659)){const _0x5268ac=_0x2691d5['change']||(_0x2691d5[_0x58adb7(0x167)]!==undefined&&_0x2691d5[_0x58adb7(0x184)]!==undefined?_0x2691d5['newElo']-_0x2691d5['previousElo']:0x0);_0x5268ac!==0x0&&_0x4f6ce9['set'](_0x90a659,_0x5268ac);}});}catch(_0x1bb700){}}}catch(_0x2300a7){console['error'](_0x17038b(0x1a3),_0x2300a7);}return _0x4f6ce9;}async function fetchBatchMatchStatsD2(_0x480d36){const _0xae919f=a0_0x38d6,_0x26ad1a=new Map();try{_0x480d36['forEach'](_0x5eaf8e=>{const _0x2166ef=a0_0x38d6;_0x26ad1a[_0x2166ef(0x193)](_0x5eaf8e,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x359e9c=collection(db,_0xae919f(0x198)),_0xe6fd63=await getDocs(_0x359e9c);_0xe6fd63[_0xae919f(0x197)](_0x425a03=>{const _0x5b9f33=_0xae919f,_0x5e07f1=_0x425a03['data'](),_0x2be44c=_0x5e07f1['winnerUsername'],_0x587675=_0x5e07f1['loserUsername'];if(_0x480d36[_0x5b9f33(0x173)](_0x2be44c)){const _0x4f4c3c=_0x26ad1a['get'](_0x2be44c);_0x4f4c3c['wins']++,_0x4f4c3c['totalMatches']++,_0x4f4c3c['totalKills']+=parseInt(_0x5e07f1[_0x5b9f33(0x185)])||0x0,_0x4f4c3c['totalDeaths']+=parseInt(_0x5e07f1[_0x5b9f33(0x17e)])||0x0;}if(_0x480d36['includes'](_0x587675)){const _0x3d7e5c=_0x26ad1a['get'](_0x587675);_0x3d7e5c[_0x5b9f33(0x164)]++,_0x3d7e5c['totalMatches']++,_0x3d7e5c[_0x5b9f33(0x17a)]+=parseInt(_0x5e07f1['loserScore'])||0x0,_0x3d7e5c[_0x5b9f33(0x16a)]+=parseInt(_0x5e07f1['winnerScore'])||0x0;}}),_0x480d36['forEach'](_0x1ff29c=>{const _0x36c080=_0xae919f,_0x260923=_0x26ad1a[_0x36c080(0x19f)](_0x1ff29c);_0x260923[_0x36c080(0x170)]=_0x260923['totalDeaths']>0x0?(_0x260923['totalKills']/_0x260923['totalDeaths'])[_0x36c080(0x166)](0x2):_0x260923['totalKills'][_0x36c080(0x166)](0x2),_0x260923['winRate']=_0x260923['totalMatches']>0x0?(_0x260923[_0x36c080(0x168)]/_0x260923['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x3dd3c9){console[_0xae919f(0x188)]('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x3dd3c9);}return _0x26ad1a;}export{displayLadderD2,updatePlayerPositions};