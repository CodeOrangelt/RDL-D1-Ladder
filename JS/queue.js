const a44_0x384956=(function(){let _0x206967=!![];return function(_0x406296,_0x5a53b3){const _0x5865e2=_0x206967?function(){if(_0x5a53b3){const _0x1abd90=_0x5a53b3['apply'](_0x406296,arguments);return _0x5a53b3=null,_0x1abd90;}}:function(){};return _0x206967=![],_0x5865e2;};}()),a44_0x568176=a44_0x384956(this,function(){const _0x483d09=a44_0x2ad2;let _0x51a864;try{const _0x5046e9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x51a864=_0x5046e9();}catch(_0x540167){_0x51a864=window;}const _0x4357cb=_0x51a864['console']=_0x51a864['console']||{},_0x508221=['log','warn','info','error',_0x483d09(0x176),_0x483d09(0x17e),'trace'];for(let _0x274fae=0x0;_0x274fae<_0x508221['length'];_0x274fae++){const _0x4ea83f=a44_0x384956['constructor'][_0x483d09(0x180)]['bind'](a44_0x384956),_0x435eaa=_0x508221[_0x274fae],_0x36be3e=_0x4357cb[_0x435eaa]||_0x4ea83f;_0x4ea83f[_0x483d09(0x182)]=a44_0x384956['bind'](a44_0x384956),_0x4ea83f['toString']=_0x36be3e['toString'][_0x483d09(0x178)](_0x36be3e),_0x4357cb[_0x435eaa]=_0x4ea83f;}});a44_0x568176();function a44_0x1368(){const _0x3d61f0=['exception','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>','bind','toDate','style','length','queue-container','forEach','table','lastUpdated','prototype','error','__proto__'];a44_0x1368=function(){return _0x3d61f0;};return a44_0x1368();}import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x4e5d34){const _0x521f83=a44_0x2ad2,_0x127af4=document['getElementById'](_0x521f83(0x17c));if(!_0x127af4)return;if(_0x4e5d34[_0x521f83(0x17b)]===0x0){_0x127af4[_0x521f83(0x17a)]['display']='none';return;}_0x127af4[_0x521f83(0x17a)]['display']='block';let _0xcc6be0='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x4e5d34[_0x521f83(0x17d)](_0x146f27=>{const _0x52298e=_0x521f83;_0xcc6be0+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x146f27['username']||'Unknown\x20Player')+_0x52298e(0x177)+formatQueueTime(_0x146f27[_0x52298e(0x17f)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0xcc6be0+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x127af4['innerHTML']=_0xcc6be0;}function a44_0x2ad2(_0xfdccf8,_0x4a099b){const _0x568176=a44_0x1368();return a44_0x2ad2=function(_0x384956,_0x1dbac7){_0x384956=_0x384956-0x176;let _0x13682f=_0x568176[_0x384956];return _0x13682f;},a44_0x2ad2(_0xfdccf8,_0x4a099b);}function formatQueueTime(_0x1c57e3){const _0x829fde=a44_0x2ad2;if(!_0x1c57e3)return'Just\x20now';const _0x1a9a2b=_0x1c57e3[_0x829fde(0x179)]?_0x1c57e3['toDate']():new Date(_0x1c57e3),_0x53692c=new Date(),_0x3c10c9=Math['floor']((_0x53692c-_0x1a9a2b)/0xea60);if(_0x3c10c9<0x1)return'Just\x20now';return _0x3c10c9+'m\x20in\x20queue';}async function checkQueueTimeout(_0x269b29){const _0x106d94=a44_0x2ad2;if(!_0x269b29['lastUpdated'])return;const _0x3d4928=_0x269b29[_0x106d94(0x17f)][_0x106d94(0x179)]?_0x269b29[_0x106d94(0x17f)][_0x106d94(0x179)]():new Date(_0x269b29['lastUpdated']),_0x1bec7b=new Date(),_0x4ae3ca=Math['floor']((_0x1bec7b-_0x3d4928)/0xea60);if(_0x4ae3ca>=0x1e)try{const _0x218fab=doc(db,'readyPlayers',_0x269b29['id']);await updateDoc(_0x218fab,{'isReady':![]});}catch(_0x45fbf7){console[_0x106d94(0x181)]('Error\x20removing\x20player\x20from\x20queue:',_0x45fbf7);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x5048fa=>{const _0x815047=[];_0x5048fa['forEach'](_0x5be31e=>{const _0x5decfb=a44_0x2ad2,_0x398f26=_0x5be31e['data']();if(_0x398f26['isReady']===!![]){const _0x2b03e1={'id':_0x5be31e['id'],'username':_0x398f26['username'],'lastUpdated':_0x398f26[_0x5decfb(0x17f)]||new Date()};_0x815047['push'](_0x2b03e1),checkQueueTimeout(_0x2b03e1);}}),updateQueueDisplay(_0x815047);},_0x2364ec=>{console['error']('Error\x20in\x20queue\x20listener:',_0x2364ec);});window['addEventListener']('unload',()=>{unsubscribe();});