const a25_0x2f252b=(function(){let _0x5e33e6=!![];return function(_0x39ec47,_0x3d5bdf){const _0x47955b=_0x5e33e6?function(){if(_0x3d5bdf){const _0x6e925f=_0x3d5bdf['apply'](_0x39ec47,arguments);return _0x3d5bdf=null,_0x6e925f;}}:function(){};return _0x5e33e6=![],_0x47955b;};}()),a25_0x54897d=a25_0x2f252b(this,function(){const _0x35fa12=a25_0x3355,_0x19ec64=function(){let _0x36cfa6;try{_0x36cfa6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x30607c){_0x36cfa6=window;}return _0x36cfa6;},_0x5d6fd0=_0x19ec64(),_0x572087=_0x5d6fd0['console']=_0x5d6fd0['console']||{},_0x4518a0=[_0x35fa12(0x1c5),'warn',_0x35fa12(0x1aa),'error','exception','table','trace'];for(let _0x27be06=0x0;_0x27be06<_0x4518a0['length'];_0x27be06++){const _0x52115f=a25_0x2f252b['constructor']['prototype']['bind'](a25_0x2f252b),_0x22fa96=_0x4518a0[_0x27be06],_0x5df9a2=_0x572087[_0x22fa96]||_0x52115f;_0x52115f[_0x35fa12(0x1c9)]=a25_0x2f252b[_0x35fa12(0x1bd)](a25_0x2f252b),_0x52115f['toString']=_0x5df9a2['toString'][_0x35fa12(0x1bd)](_0x5df9a2),_0x572087[_0x22fa96]=_0x52115f;}});function a25_0x3355(_0x59a371,_0x162cc4){const _0x54897d=a25_0x2e21();return a25_0x3355=function(_0x2f252b,_0x3d9426){_0x2f252b=_0x2f252b-0x1a7;let _0x2e2154=_0x54897d[_0x2f252b];return _0x2e2154;},a25_0x3355(_0x59a371,_0x162cc4);}a25_0x54897d();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';function a25_0x2e21(){const _0x12f717=['error','username','d2-switch','info','You\x20are\x20already\x20part\x20of\x20the\x20','uid','change','tiny-join-button','getIdToken','getElementById','none','ladder-join-status\x20error','toLowerCase','DUOS','playersD3','nonParticipants','exists','display','Successfully\x20joined\x20the\x20','className','players','textContent','bind','querySelectorAll','disabled','desc','toUpperCase','d1-switch','block','Ladder\x20join:\x20D1\x20radio\x20found:','log','Ladder\x20changed\x20to:\x20','value','style','__proto__','Error\x20checking\x20ladder\x20status:','target','join-username-input'];a25_0x2e21=function(){return _0x12f717;};return a25_0x2e21();}document['addEventListener']('DOMContentLoaded',()=>{const _0x42017c=a25_0x3355,_0x1e2586=document['getElementById'](_0x42017c(0x1c2)),_0x4169a4=document[_0x42017c(0x1b0)](_0x42017c(0x1a9));console[_0x42017c(0x1c5)](_0x42017c(0x1c4),!!_0x1e2586),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x4169a4);function _0x30a397(){const _0x4142a9=_0x42017c;document[_0x4142a9(0x1be)]('input[name=\x22ladder\x22]')['forEach'](_0x5ba518=>{const _0x12f362=_0x4142a9;_0x5ba518['addEventListener'](_0x12f362(0x1ad),_0x482124=>{const _0x589642=_0x12f362;_0x482124[_0x589642(0x1cb)]['checked']&&(currentLadder=_0x482124['target']['value'],console['log'](_0x589642(0x1c6)+currentLadder),checkUserLadderStatus());});});}_0x30a397();const _0x3a9244=document[_0x42017c(0x1b0)]('join-ladder-button');_0x3a9244&&_0x3a9244['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x1b237c=>{if(_0x1b237c)checkUserLadderStatus();else{const _0x51f2db=document['getElementById']('ladder-join-prompt');_0x51f2db&&(_0x51f2db['style']['display']='none');}});});function getCollectionName(_0x53b048){const _0x450636=a25_0x3355;switch(_0x53b048?.[_0x450636(0x1c1)]()){case'D1':return _0x450636(0x1bb);case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case'DUO':return'playersDuos';case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x53b048+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x2f496b=a25_0x3355;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x51c309=auth['currentUser'],_0x522f59=document[_0x2f496b(0x1b0)]('ladder-join-prompt'),_0x2b6f65=document[_0x2f496b(0x1b0)]('join-ladder-type'),_0x3d88ab=document['getElementById'](_0x2f496b(0x1ae));if(!_0x51c309||!_0x51c309['uid']||!_0x522f59||!_0x2b6f65||!_0x3d88ab){if(_0x522f59)_0x522f59[_0x2f496b(0x1c8)]['display']=_0x2f496b(0x1b1);if(_0x3d88ab)_0x3d88ab['style']['display']=_0x2f496b(0x1b1);return;}try{try{await _0x51c309['getIdToken'](![]);}catch(_0x3bbd50){console[_0x2f496b(0x1a7)]('Authentication\x20verification\x20failed:',_0x3bbd50),_0x522f59[_0x2f496b(0x1c8)]['display']=_0x2f496b(0x1b1),_0x3d88ab[_0x2f496b(0x1c8)]['display']='none';return;}const _0x492ad7=getCollectionName(currentLadder),_0x45ccae=doc(db,_0x492ad7,_0x51c309[_0x2f496b(0x1ac)]),_0x4081d6=await getDoc(_0x45ccae);if(_0x4081d6[_0x2f496b(0x1b7)]())_0x522f59[_0x2f496b(0x1c8)][_0x2f496b(0x1b8)]='none',_0x3d88ab[_0x2f496b(0x1c8)]['display']='none';else{_0x522f59['style'][_0x2f496b(0x1b8)]='none',_0x3d88ab['style']['display']='block',_0x2b6f65['textContent']=currentLadder,_0x3d88ab['onclick']=()=>{const _0x1b04a9=_0x2f496b;_0x522f59['style']['display']==='block'?_0x522f59['style']['display']='none':_0x522f59['style']['display']=_0x1b04a9(0x1c3);};const _0x38e830=document['getElementById'](_0x2f496b(0x1cc)),_0x362119=document['getElementById']('ladder-join-status');if(_0x38e830)_0x38e830[_0x2f496b(0x1c7)]='';_0x362119&&(_0x362119['textContent']='',_0x362119[_0x2f496b(0x1ba)]='ladder-join-status');}}catch(_0x1f0028){console['error'](_0x2f496b(0x1ca),_0x1f0028),_0x522f59[_0x2f496b(0x1c8)]['display']=_0x2f496b(0x1b1),_0x3d88ab[_0x2f496b(0x1c8)][_0x2f496b(0x1b8)]=_0x2f496b(0x1b1);}}async function handleJoinLadder(){const _0x5dc114=a25_0x3355,_0x4bf2cb=auth['currentUser'],_0x5bae42=document['getElementById']('join-ladder-button'),_0x404fcd=document['getElementById']('ladder-join-status'),_0x2362d3=document[_0x5dc114(0x1b0)]('join-username-input');if(!_0x4bf2cb||!_0x4bf2cb[_0x5dc114(0x1ac)]){_0x404fcd['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x404fcd['className']=_0x5dc114(0x1b2);return;}try{await _0x4bf2cb['getIdToken'](!![]);}catch(_0x398737){console['error']('Authentication\x20error:',_0x398737),_0x404fcd['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x404fcd['className']='ladder-join-status\x20error';return;}if(!_0x2362d3||!_0x2362d3['value']['trim']()){_0x404fcd['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x404fcd['className']='ladder-join-status\x20error';return;}try{_0x5bae42['disabled']=!![],_0x404fcd['textContent']='Verifying\x20username...',_0x404fcd['className']='ladder-join-status\x20loading';let _0x4722ed='',_0x47186d=null;const _0x31f220=[_0x5dc114(0x1bb),'playersD2',_0x5dc114(0x1b5),'playersDuos','playersCTF',_0x5dc114(0x1b6)];for(const _0x785e8d of _0x31f220){try{const _0x2fd595=doc(db,_0x785e8d,_0x4bf2cb['uid']),_0x3618a4=await getDoc(_0x2fd595);if(_0x3618a4['exists']()){_0x47186d=_0x3618a4['data']();if(_0x47186d[_0x5dc114(0x1a8)]){_0x4722ed=_0x47186d[_0x5dc114(0x1a8)];break;}}}catch(_0x3ee307){console['error']('Error\x20checking\x20'+_0x785e8d+':',_0x3ee307);}}!_0x4722ed&&_0x4bf2cb['email']&&(_0x4722ed=_0x4bf2cb['email']['split']('@')[0x0]);if(!_0x4722ed){_0x404fcd['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x404fcd['className']=_0x5dc114(0x1b2),_0x5bae42[_0x5dc114(0x1bf)]=![];return;}const _0x25d1bc=_0x2362d3['value']['trim']();if(_0x4722ed&&_0x25d1bc[_0x5dc114(0x1b3)]()!==_0x4722ed['toLowerCase']()){_0x404fcd['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x4722ed+'\x22\x20to\x20confirm.',_0x404fcd['className']=_0x5dc114(0x1b2),_0x5bae42['disabled']=![];return;}_0x404fcd['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x3656f8=getCollectionName(currentLadder),_0x26c106=doc(db,_0x3656f8,_0x4bf2cb[_0x5dc114(0x1ac)]),_0x1bb8b2=await getDoc(_0x26c106);if(_0x1bb8b2['exists']()){_0x404fcd['textContent']=_0x5dc114(0x1ab)+currentLadder+'\x20ladder.',_0x404fcd[_0x5dc114(0x1ba)]='ladder-join-status\x20error',_0x5bae42[_0x5dc114(0x1bf)]=![];return;}try{await _0x4bf2cb[_0x5dc114(0x1af)](!![]);}catch(_0x21fea0){_0x404fcd['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x404fcd[_0x5dc114(0x1ba)]='ladder-join-status\x20error',_0x5bae42[_0x5dc114(0x1bf)]=![];return;}const _0x67a729=_0x4722ed,_0x3246b1=collection(db,_0x3656f8),_0x186731=query(_0x3246b1,orderBy('position',_0x5dc114(0x1c0)),limit(0x1)),_0x200e43=await getDocs(_0x186731);let _0xcaec23=0x1;if(!_0x200e43['empty']){const _0x395799=_0x200e43['docs'][0x0]['data']();_0xcaec23=(_0x395799['position']||0x0)+0x1;}const _0xc084d8={'username':_0x67a729,'email':_0x4bf2cb['email'],'eloRating':0x4b0,'position':_0xcaec23,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x26c106,_0xc084d8),currentLadder===_0x5dc114(0x1b4)?_0x404fcd[_0x5dc114(0x1bc)]='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x404fcd['textContent']=_0x5dc114(0x1b9)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x404fcd['className']='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x1ea8f5){console['error']('Error\x20joining\x20ladder:',_0x1ea8f5),_0x404fcd['textContent']='Error\x20joining\x20ladder:\x20'+_0x1ea8f5['message'],_0x404fcd[_0x5dc114(0x1ba)]=_0x5dc114(0x1b2),_0x5bae42[_0x5dc114(0x1bf)]=![];}}