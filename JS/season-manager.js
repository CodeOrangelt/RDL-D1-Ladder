const a55_0x1ffedc=(function(){let _0x37e31e=!![];return function(_0x3a7424,_0x3ee6c5){const _0x294e7c=_0x37e31e?function(){const _0x3a9e4e=a55_0x49f9;if(_0x3ee6c5){const _0x43c79=_0x3ee6c5[_0x3a9e4e(0xae)](_0x3a7424,arguments);return _0x3ee6c5=null,_0x43c79;}}:function(){};return _0x37e31e=![],_0x294e7c;};}()),a55_0x586b99=a55_0x1ffedc(this,function(){const _0xa05f58=a55_0x49f9,_0x82c8f9=function(){const _0x57770c=a55_0x49f9;let _0x10d3c3;try{_0x10d3c3=Function('return\x20(function()\x20'+_0x57770c(0xb4)+');')();}catch(_0x5e7413){_0x10d3c3=window;}return _0x10d3c3;},_0x58e454=_0x82c8f9(),_0x45750f=_0x58e454['console']=_0x58e454['console']||{},_0x10dab4=['log','warn',_0xa05f58(0xb7),_0xa05f58(0xb2),_0xa05f58(0xac),'table',_0xa05f58(0xc0)];for(let _0x2cdac1=0x0;_0x2cdac1<_0x10dab4['length'];_0x2cdac1++){const _0x3d0b05=a55_0x1ffedc['constructor'][_0xa05f58(0xb1)][_0xa05f58(0xbb)](a55_0x1ffedc),_0x24f378=_0x10dab4[_0x2cdac1],_0x36797b=_0x45750f[_0x24f378]||_0x3d0b05;_0x3d0b05[_0xa05f58(0xb6)]=a55_0x1ffedc['bind'](a55_0x1ffedc),_0x3d0b05['toString']=_0x36797b['toString']['bind'](_0x36797b),_0x45750f[_0x24f378]=_0x3d0b05;}});a55_0x586b99();import{db}from'./firebase-config.js';function a55_0x49f9(_0x468256,_0x1e4f37){const _0x586b99=a55_0x5bf8();return a55_0x49f9=function(_0x1ffedc,_0x304236){_0x1ffedc=_0x1ffedc-0xac;let _0x5bf8e6=_0x586b99[_0x1ffedc];return _0x5bf8e6;},a55_0x49f9(_0x468256,_0x1e4f37);}import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){this['setupEventListeners']();}['setupEventListeners'](){const _0x1c1e66=a55_0x49f9,_0x462def=document[_0x1c1e66(0xb3)]('reset-season'),_0x5b43fb=document[_0x1c1e66(0xb3)]('confirm-reset'),_0x2b6406=document['getElementById']('cancel-reset');_0x462def?.['addEventListener']('click',()=>{const _0x2adad1=_0x1c1e66;document[_0x2adad1(0xb3)]('reset-confirmation')['style']['display']='block';}),_0x5b43fb?.[_0x1c1e66(0xbd)](_0x1c1e66(0xc2),async()=>{const _0x2b945c=_0x1c1e66,_0x463012=document['getElementById']('reset-password'),_0xcb1e08=auth['currentUser'];if(!_0xcb1e08||!_0x463012['value']){alert('Please\x20enter\x20your\x20password');return;}try{const _0x37981f=EmailAuthProvider['credential'](_0xcb1e08['email'],_0x463012['value']);await reauthenticateWithCredential(_0xcb1e08,_0x37981f),await this['resetSeason'](),_0x463012[_0x2b945c(0xba)]='',document['getElementById']('reset-confirmation')['style'][_0x2b945c(0xaf)]='none';}catch(_0x3d280b){alert(_0x2b945c(0xc1)),console['error']('Authentication\x20error:',_0x3d280b);}}),_0x2b6406?.[_0x1c1e66(0xbd)](_0x1c1e66(0xc2),()=>{const _0x353be5=_0x1c1e66,_0xb7c881=document['getElementById']('reset-password');_0xb7c881['value']='',document[_0x353be5(0xb3)]('reset-confirmation')[_0x353be5(0xb8)][_0x353be5(0xaf)]='none';});}async['resetSeason'](){const _0x260449=a55_0x49f9;try{const _0x572389=await getDoc(doc(db,'metadata',_0x260449(0xbe)));let _0x2d391c=0x1;_0x572389[_0x260449(0xbc)]()&&(_0x2d391c=_0x572389['data']()['count']+0x1);const _0x3fe461=await getDocs(collection(db,_0x260449(0xb0))),_0x1fed9b={'players':[],'date':new Date(),'seasonNumber':_0x2d391c};for(const _0x17a2eb of _0x3fe461['docs']){const _0x2b333b=_0x17a2eb['data']();_0x1fed9b['players']['push']({'username':_0x2b333b['username'],'position':_0x2b333b['position'],'eloRating':_0x2b333b['eloRating']||0x4b0}),await setDoc(doc(db,'players',_0x17a2eb['id']),{..._0x2b333b,'eloRating':0x4b0,'position':_0x2b333b['position']});}await setDoc(doc(db,_0x260449(0xb5),_0x260449(0xbf)+_0x2d391c),_0x1fed9b),await setDoc(doc(db,'metadata','seasonCount'),{'count':_0x2d391c}),alert('Season\x20'+_0x2d391c+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location[_0x260449(0xad)]();}catch(_0x24e91b){console['error'](_0x260449(0xb9),_0x24e91b),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}export const seasonManager=new SeasonManager();function a55_0x5bf8(){const _0x2f1b7f=['exception','reload','apply','display','players','prototype','error','getElementById','{}.constructor(\x22return\x20this\x22)(\x20)','seasons','__proto__','info','style','Error\x20resetting\x20season:','value','bind','exists','addEventListener','seasonCount','season','trace','Invalid\x20password\x20or\x20authentication\x20failed','click'];a55_0x5bf8=function(){return _0x2f1b7f;};return a55_0x5bf8();}