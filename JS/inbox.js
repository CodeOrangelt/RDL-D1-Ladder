const a24_0x16658a=a24_0x5edd,a24_0x59c033=(function(){let _0xd0d0eb=!![];return function(_0x576103,_0x5bdfe2){const _0x410724=_0xd0d0eb?function(){if(_0x5bdfe2){const _0x2cd3fa=_0x5bdfe2['apply'](_0x576103,arguments);return _0x5bdfe2=null,_0x2cd3fa;}}:function(){};return _0xd0d0eb=![],_0x410724;};}()),a24_0x4ec7fb=a24_0x59c033(this,function(){const _0xc4fef2=a24_0x5edd,_0x151e41=function(){const _0x33b407=a24_0x5edd;let _0x3b2830;try{_0x3b2830=Function(_0x33b407(0x14f)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x32507c){_0x3b2830=window;}return _0x3b2830;},_0x3d8035=_0x151e41(),_0x36a858=_0x3d8035[_0xc4fef2(0x16d)]=_0x3d8035[_0xc4fef2(0x16d)]||{},_0x4d1a3f=[_0xc4fef2(0x135),'warn','info','error','exception',_0xc4fef2(0x156),'trace'];for(let _0x41be91=0x0;_0x41be91<_0x4d1a3f[_0xc4fef2(0x159)];_0x41be91++){const _0x28e736=a24_0x59c033['constructor']['prototype']['bind'](a24_0x59c033),_0x1909f7=_0x4d1a3f[_0x41be91],_0x4434d2=_0x36a858[_0x1909f7]||_0x28e736;_0x28e736['__proto__']=a24_0x59c033['bind'](a24_0x59c033),_0x28e736[_0xc4fef2(0x14a)]=_0x4434d2['toString']['bind'](_0x4434d2),_0x36a858[_0x1909f7]=_0x28e736;}});a24_0x4ec7fb();import{auth,db}from'./firebase-config.js';function a24_0x5edd(_0x3d8e77,_0x5a42b9){const _0x4ec7fb=a24_0xe23a();return a24_0x5edd=function(_0x59c033,_0x4eac61){_0x59c033=_0x59c033-0x12c;let _0xe23ace=_0x4ec7fb[_0x59c033];return _0xe23ace;},a24_0x5edd(_0x3d8e77,_0x5a42b9);}import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a24_0xe23a(){const _0x2abaa3=['\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','updateInvitationStatus','all','Error\x20performing\x20','type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22','invitations','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','success','log','#cancel-response','location','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22','innerHTML','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','createElement','find','value','./login.html','Failed\x20to\x20create\x20team:\x20','getTimeAgo','sentInvitations','createdAt','When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.','body','setupActionListeners','map','addEventListener','error','remove','toString','teamColor','pageSize','createInvitationCard','createTeamFromInvitation','return\x20(function()\x20','status','sentUnsubscribe','Team\x20\x22','querySelectorAll','\x22\x20data-invitation-id=\x22','currentFilter','table','display','click','length','invitationId','Just\x20now','accepted','unsubscribe','decline','accept','appendChild','onAuthStateChanged','#send-response','.filter-btn',';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','proposedTeamName','teamData','dataset','fromUsername','setupEventListeners','updateNotificationCount','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>','textContent','console','team_invite','toDate','docs','getElementById','floor','pending','style','cancel'];a24_0xe23a=function(){return _0x2abaa3;};return a24_0xe23a();}class InboxManager{constructor(){const _0x3072fc=a24_0x5edd;this['currentFilter']=_0x3072fc(0x173),this['invitations']=[],this[_0x3072fc(0x141)]=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this['lastDoc']=null,this['hasMore']=!![],this['init']();}async['init'](){const _0x2f8588=a24_0x5edd;auth[_0x2f8588(0x161)](_0x42b5e4=>{const _0x24905c=_0x2f8588;_0x42b5e4?(this['loadInvitations'](_0x42b5e4['uid']),this['setupEventListeners']()):window[_0x24905c(0x137)]['href']=_0x24905c(0x13e);});}[a24_0x16658a(0x169)](){document['querySelectorAll']('.filter-btn')['forEach'](_0x1ee654=>{_0x1ee654['addEventListener']('click',()=>{const _0x177aa1=a24_0x5edd;document['querySelectorAll'](_0x177aa1(0x163))['forEach'](_0x781ec5=>_0x781ec5['classList']['remove']('active')),_0x1ee654['classList']['add']('active'),this['currentFilter']=_0x1ee654['dataset']['filter'],this['renderInvitations']();});});}['loadInvitations'](_0x331e40){const _0x59afc2=a24_0x16658a,_0x494a37=collection(db,'gameInvitations');let _0x5cd666=query(_0x494a37,where('toUserId','==',_0x331e40),orderBy('createdAt','desc'),limit(this[_0x59afc2(0x14c)]));this['unsubscribe']=onSnapshot(_0x5cd666,_0xa65084=>{const _0x12ec81=_0x59afc2;this['invitations']=_0xa65084[_0x12ec81(0x170)]['map'](_0x19d0ce=>({'id':_0x19d0ce['id'],..._0x19d0ce['data']()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0xf58601=query(_0x494a37,where('fromUserId','==',_0x331e40),orderBy('createdAt','desc'),limit(this[_0x59afc2(0x14c)]));this['sentUnsubscribe']=onSnapshot(_0xf58601,_0x4557a3=>{const _0x2aa703=_0x59afc2;this['sentInvitations']=_0x4557a3['docs'][_0x2aa703(0x146)](_0x2607b0=>({'id':_0x2607b0['id'],..._0x2607b0['data'](),'isSent':!![]})),this['renderInvitations']();});}['renderInvitations'](){const _0x143c48=a24_0x16658a,_0x2412ec=document['getElementById']('inbox-content');if(!_0x2412ec)return;let _0x3ed076=[];if(this[_0x143c48(0x155)]==='outbox')_0x3ed076=this['sentInvitations'];else this['currentFilter']===_0x143c48(0x12e)?_0x3ed076=[...this['invitations'],...this['sentInvitations']]['sort']((_0x53313f,_0x5b7cad)=>{const _0x38e400=_0x143c48,_0xcf41a9=_0x53313f[_0x38e400(0x142)]?.[_0x38e400(0x16f)]?_0x53313f['createdAt']['toDate']():new Date(_0x53313f['createdAt']),_0x2e1f2b=_0x5b7cad[_0x38e400(0x142)]?.['toDate']?_0x5b7cad['createdAt'][_0x38e400(0x16f)]():new Date(_0x5b7cad['createdAt']);return _0x2e1f2b-_0xcf41a9;}):_0x3ed076=this['invitations']['filter'](_0x19a688=>_0x19a688['status']===this['currentFilter']);if(_0x3ed076['length']===0x0){const _0xf879b4=this[_0x143c48(0x155)]==='outbox'?'sent':this['currentFilter']==='all'?'':this[_0x143c48(0x155)];_0x2412ec['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0xf879b4+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this[_0x143c48(0x155)]==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':_0x143c48(0x143))+_0x143c48(0x133);return;}_0x2412ec[_0x143c48(0x139)]=_0x3ed076['map'](_0x32b0e5=>this[_0x143c48(0x14d)](_0x32b0e5))['join'](''),this[_0x143c48(0x145)]();}['createInvitationCard'](_0x2aa233){const _0x175d54=a24_0x16658a,_0x1b69b9=_0x2aa233[_0x175d54(0x142)]?.['toDate']?_0x2aa233['createdAt'][_0x175d54(0x16f)]():new Date(_0x2aa233[_0x175d54(0x142)]),_0x594268=this[_0x175d54(0x140)](_0x1b69b9),_0x37f617=_0x2aa233['isSent']||![];let _0x53e2c='';return _0x2aa233['type']===_0x175d54(0x16e)?_0x53e2c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x2aa233['message']+_0x175d54(0x13a)+_0x2aa233[_0x175d54(0x166)][_0x175d54(0x14b)]+_0x175d54(0x164)+_0x2aa233[_0x175d54(0x166)]['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20'+_0x2aa233['teamData'][_0x175d54(0x14b)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x53e2c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x2aa233['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x2aa233['status']+'\x20'+(_0x37f617?'sent-invitation':'')+_0x175d54(0x154)+_0x2aa233['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x37f617?'To:\x20'+_0x2aa233['toUsername']:_0x2aa233[_0x175d54(0x168)])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x37f617?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x594268+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x2aa233['status']+'\x22>'+_0x2aa233['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x53e2c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x37f617&&_0x2aa233['status']===_0x175d54(0x173)?_0x175d54(0x138)+_0x2aa233['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x2aa233['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2aa233[_0x175d54(0x130)]!==_0x175d54(0x16e)?_0x175d54(0x131)+_0x2aa233['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x37f617&&_0x2aa233['status']===_0x175d54(0x173)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x2aa233['id']+_0x175d54(0x12c):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){const _0x56d7e9=a24_0x16658a;document[_0x56d7e9(0x153)]('.action-btn')['forEach'](_0x20a16e=>{const _0x2f6b4f=_0x56d7e9;_0x20a16e[_0x2f6b4f(0x147)](_0x2f6b4f(0x158),async _0x2c3760=>{const _0x4402aa=_0x2f6b4f,_0x221a3a=_0x20a16e[_0x4402aa(0x167)]['action'],_0x1e32ae=_0x20a16e['dataset'][_0x4402aa(0x15a)];_0x20a16e['disabled']=!![];const _0x5d120e=_0x20a16e['innerHTML'];_0x20a16e['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x221a3a){case _0x4402aa(0x15f):await this['updateInvitationStatus'](_0x1e32ae,_0x4402aa(0x15c));break;case _0x4402aa(0x15e):await this['updateInvitationStatus'](_0x1e32ae,'declined');break;case _0x4402aa(0x175):await this[_0x4402aa(0x12d)](_0x1e32ae,'cancelled');break;case'respond':this['openResponseModal'](_0x1e32ae);break;}}catch(_0x4aa8fc){console['error'](_0x4402aa(0x12f)+_0x221a3a+':',_0x4aa8fc),alert('Failed\x20to\x20'+_0x221a3a+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x20a16e['disabled']=![],_0x20a16e[_0x4402aa(0x139)]=_0x5d120e;}});});}async['updateInvitationStatus'](_0x1acad9,_0x595434){const _0x4d5fce=a24_0x16658a;try{const _0x37c73=this[_0x4d5fce(0x132)]['find'](_0xcda8de=>_0xcda8de['id']===_0x1acad9);_0x37c73&&_0x37c73[_0x4d5fce(0x130)]==='team_invite'&&_0x595434===_0x4d5fce(0x15c)&&await this['createTeamFromInvitation'](_0x37c73);const _0x165ecf=doc(db,'gameInvitations',_0x1acad9);await updateDoc(_0x165ecf,{'status':_0x595434,'respondedAt':new Date()}),_0x37c73&&(_0x37c73[_0x4d5fce(0x150)]=_0x595434,_0x37c73['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x4ef7c2){console[_0x4d5fce(0x148)]('Error\x20updating\x20invitation\x20status:',_0x4ef7c2);throw _0x4ef7c2;}}['openResponseModal'](_0x28c30a){const _0x50e2b6=a24_0x16658a,_0x1465de=this['invitations'][_0x50e2b6(0x13c)](_0x2a414f=>_0x2a414f['id']===_0x28c30a);if(!_0x1465de)return;const _0x383fe6=document[_0x50e2b6(0x13b)]('div');_0x383fe6['className']='modal-overlay',_0x383fe6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x1465de['fromUsername']+_0x50e2b6(0x16b)+_0x1465de['value']+'</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(!document[_0x50e2b6(0x171)]('modal-styles')){const _0x10864d=document[_0x50e2b6(0x13b)]('style');_0x10864d['id']='modal-styles',_0x10864d[_0x50e2b6(0x16c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document['head'][_0x50e2b6(0x160)](_0x10864d);}document[_0x50e2b6(0x144)]['appendChild'](_0x383fe6),_0x383fe6['querySelector']('.modal-close')[_0x50e2b6(0x147)](_0x50e2b6(0x158),()=>_0x383fe6['remove']()),_0x383fe6['querySelector'](_0x50e2b6(0x136))[_0x50e2b6(0x147)]('click',()=>_0x383fe6[_0x50e2b6(0x149)]()),_0x383fe6[_0x50e2b6(0x147)](_0x50e2b6(0x158),_0x1d43b6=>{if(_0x1d43b6['target']===_0x383fe6)_0x383fe6['remove']();}),_0x383fe6['querySelector'](_0x50e2b6(0x162))[_0x50e2b6(0x147)]('click',()=>{const _0xe061fb=_0x50e2b6,_0x42c5f5=document[_0xe061fb(0x171)]('response-message')[_0xe061fb(0x13d)]['trim']();_0x42c5f5&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x383fe6['remove']());});}async[a24_0x16658a(0x14e)](_0x58303d){const _0x4dbefe=a24_0x16658a;try{const {createTeam:_0x90d0a8}=await import('./ladderduos.js'),_0x536ca1=await _0x90d0a8(_0x58303d['fromUsername'],_0x58303d['toUsername'],_0x58303d['teamData']['proposedTeamName'],_0x58303d['teamData']['teamColor']);if(!_0x536ca1[_0x4dbefe(0x134)])throw new Error(_0x536ca1['error']);alert(_0x4dbefe(0x152)+_0x58303d['teamData'][_0x4dbefe(0x165)]+'\x22\x20created\x20successfully!');}catch(_0xb581d2){console[_0x4dbefe(0x148)]('Error\x20creating\x20team:',_0xb581d2);throw new Error(_0x4dbefe(0x13f)+_0xb581d2['message']);}}[a24_0x16658a(0x16a)](){const _0x55ef8b=a24_0x16658a,_0xeacb8c=this[_0x55ef8b(0x132)]['filter'](_0xb0de67=>_0xb0de67[_0x55ef8b(0x150)]==='pending')['length'],_0x2938bf=document['getElementById']('inbox-notification');_0x2938bf&&(_0xeacb8c>0x0?(_0x2938bf[_0x55ef8b(0x174)][_0x55ef8b(0x157)]='inline-block',_0x2938bf[_0x55ef8b(0x16c)]=_0xeacb8c>0x9?'9+':_0xeacb8c):_0x2938bf[_0x55ef8b(0x174)][_0x55ef8b(0x157)]='none');}['getTimeAgo'](_0x45830d){const _0xfd2a69=a24_0x16658a,_0x4d65a8=new Date(),_0xd64b4b=_0x4d65a8-_0x45830d,_0x341e26=Math[_0xfd2a69(0x172)](_0xd64b4b/(0x3e8*0x3c)),_0x23cbf6=Math['floor'](_0xd64b4b/(0x3e8*0x3c*0x3c)),_0x514fc3=Math['floor'](_0xd64b4b/(0x3e8*0x3c*0x3c*0x18));if(_0x341e26<0x1)return _0xfd2a69(0x15b);if(_0x341e26<0x3c)return _0x341e26+'m\x20ago';if(_0x23cbf6<0x18)return _0x23cbf6+'h\x20ago';if(_0x514fc3<0x7)return _0x514fc3+'d\x20ago';return _0x45830d['toLocaleDateString']();}['destroy'](){const _0x24fc3c=a24_0x16658a;this['unsubscribe']&&this[_0x24fc3c(0x15d)](),this['sentUnsubscribe']&&this[_0x24fc3c(0x151)]();}}document['addEventListener']('DOMContentLoaded',()=>{new InboxManager();});