const a43_0x5b150a=a43_0x4b1b,a43_0xdee54e=(function(){let _0x193e73=!![];return function(_0x11f92a,_0x4b0d65){const _0x235c2f=_0x193e73?function(){if(_0x4b0d65){const _0x392779=_0x4b0d65['apply'](_0x11f92a,arguments);return _0x4b0d65=null,_0x392779;}}:function(){};return _0x193e73=![],_0x235c2f;};}()),a43_0x8cebf2=a43_0xdee54e(this,function(){const _0x56bd50=a43_0x4b1b;let _0x29f2de;try{const _0x3cfe17=Function(_0x56bd50(0x1b2)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x29f2de=_0x3cfe17();}catch(_0x55350c){_0x29f2de=window;}const _0x35d06f=_0x29f2de['console']=_0x29f2de['console']||{},_0x3d16d1=['log','warn','info','error','exception','table','trace'];for(let _0x2776f8=0x0;_0x2776f8<_0x3d16d1['length'];_0x2776f8++){const _0x9b6ee2=a43_0xdee54e[_0x56bd50(0x1b7)]['prototype']['bind'](a43_0xdee54e),_0x5e1763=_0x3d16d1[_0x2776f8],_0x4205d6=_0x35d06f[_0x5e1763]||_0x9b6ee2;_0x9b6ee2['__proto__']=a43_0xdee54e[_0x56bd50(0x1a9)](a43_0xdee54e),_0x9b6ee2['toString']=_0x4205d6['toString'][_0x56bd50(0x1a9)](_0x4205d6),_0x35d06f[_0x5e1763]=_0x9b6ee2;}});a43_0x8cebf2();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';function a43_0x4b1b(_0x269f1d,_0x262023){const _0x8cebf2=a43_0x5628();return a43_0x4b1b=function(_0xdee54e,_0x12c182){_0xdee54e=_0xdee54e-0x19e;let _0x56280e=_0x8cebf2[_0xdee54e];return _0x56280e;},a43_0x4b1b(_0x269f1d,_0x262023);}function a43_0x5628(){const _0x21dcf9=['profile-form','approvedMatches','loserScore','loadProfile','get','uid','stats-matches','setupEventListeners','loserUsername','stats-losses','favorite-weapon','bind','getElementById','pfpUrl','size','src','loadPlayerStats','form','pfp-upload','profiles','return\x20(function()\x20','target','files','wins','stats-winrate','constructor','DOMContentLoaded','addEventListener','Please\x20sign\x20in\x20to\x20save\x20your\x20profile','toFixed','forEach','Error\x20loading\x20profile:','textContent'];a43_0x5628=function(){return _0x21dcf9;};return a43_0x5628();}import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x4c932a=a43_0x4b1b;this[_0x4c932a(0x1af)]=document[_0x4c932a(0x1aa)](_0x4c932a(0x19e)),this['pfpInput']=document['getElementById'](_0x4c932a(0x1b0)),this['pfpPreview']=document['getElementById']('profile-preview'),this['statsContainer']=document[_0x4c932a(0x1aa)]('player-stats'),this['setupEventListeners'](),this[_0x4c932a(0x1a1)]();}[a43_0x5b150a(0x1a5)](){const _0x1e786f=a43_0x5b150a;this['pfpInput'][_0x1e786f(0x1b9)]('change',_0x52a972=>this['handleImageUpload'](_0x52a972)),this[_0x1e786f(0x1af)][_0x1e786f(0x1b9)]('submit',_0x744ea9=>this['handleSubmit'](_0x744ea9));}async['handleImageUpload'](_0x2f32e1){const _0x5550d4=a43_0x5b150a,_0xdd5017=_0x2f32e1['target'][_0x5550d4(0x1b4)][0x0];if(_0xdd5017){const _0x5100bd=new FileReader();_0x5100bd['onload']=_0x348fe8=>{const _0x59eb1a=_0x5550d4;this['pfpPreview']['src']=_0x348fe8[_0x59eb1a(0x1b3)]['result'];},_0x5100bd['readAsDataURL'](_0xdd5017);}}async['handleSubmit'](_0x2ff5a9){const _0x34b3b7=a43_0x5b150a;_0x2ff5a9['preventDefault']();const _0x3d5cd2=auth['currentUser'];if(!_0x3d5cd2){alert(_0x34b3b7(0x1ba));return;}try{const _0x26f641=new FormData(this[_0x34b3b7(0x1af)]),_0x152d7e={'nickname':_0x26f641[_0x34b3b7(0x1a2)]('nickname'),'motto':_0x26f641['get']('motto'),'favoriteMap':_0x26f641['get']('favorite-map'),'favoriteWeapon':_0x26f641['get']('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0x45b693=this['pfpInput']['files'][0x0];if(_0x45b693){const _0x54c844=ref(storage,'profile-pictures/'+_0x3d5cd2[_0x34b3b7(0x1a3)]);await uploadBytes(_0x54c844,_0x45b693),_0x152d7e[_0x34b3b7(0x1ab)]=await getDownloadURL(_0x54c844);}await setDoc(doc(db,_0x34b3b7(0x1b1),_0x3d5cd2[_0x34b3b7(0x1a3)]),_0x152d7e),alert('Profile\x20saved\x20successfully!');}catch(_0x54f2ce){console['error']('Error\x20saving\x20profile:',_0x54f2ce),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async['loadProfile'](){onAuthStateChanged(auth,async _0x8f428c=>{const _0x18cc9e=a43_0x4b1b;if(_0x8f428c)try{const _0x47f522=await getDoc(doc(db,'profiles',_0x8f428c['uid']));if(_0x47f522['exists']()){const _0x4fe5dd=_0x47f522['data']();document[_0x18cc9e(0x1aa)]('nickname')['value']=_0x4fe5dd['nickname']||'',document['getElementById']('motto')['value']=_0x4fe5dd['motto']||'',document[_0x18cc9e(0x1aa)]('favorite-map')['value']=_0x4fe5dd['favoriteMap']||'',document['getElementById'](_0x18cc9e(0x1a8))['value']=_0x4fe5dd['favoriteWeapon']||'',_0x4fe5dd['pfpUrl']&&(this['pfpPreview'][_0x18cc9e(0x1ad)]=_0x4fe5dd['pfpUrl']),await this[_0x18cc9e(0x1ae)](_0x4fe5dd['nickname']);}}catch(_0x1d124c){console['error'](_0x18cc9e(0x1bd),_0x1d124c);}});}async['loadPlayerStats'](_0x58d046){const _0x4f001b=a43_0x5b150a;if(!_0x58d046)return;try{const _0x53e394=collection(db,_0x4f001b(0x19f)),[_0x519a11,_0x1ca578]=await Promise['all']([getDocs(query(_0x53e394,where('winnerUsername','==',_0x58d046))),getDocs(query(_0x53e394,where(_0x4f001b(0x1a6),'==',_0x58d046)))]),_0x28b8d2=_0x519a11['size'],_0x1e1241=_0x1ca578[_0x4f001b(0x1ac)],_0x3b149d=_0x28b8d2+_0x1e1241;let _0x3e064a=0x0,_0x2defdf=0x0;_0x519a11[_0x4f001b(0x1bc)](_0x1ee088=>{const _0x58cc77=_0x1ee088['data']();if(_0x58cc77['winnerScore'])_0x3e064a+=parseInt(_0x58cc77['winnerScore']);if(_0x58cc77['loserScore'])_0x2defdf+=parseInt(_0x58cc77['loserScore']);}),_0x1ca578['forEach'](_0x2ccc8a=>{const _0x342a3c=_0x4f001b,_0x46a9e2=_0x2ccc8a['data']();if(_0x46a9e2[_0x342a3c(0x1a0)])_0x3e064a+=parseInt(_0x46a9e2['loserScore']);if(_0x46a9e2['winnerScore'])_0x2defdf+=parseInt(_0x46a9e2['winnerScore']);});const _0x4c9e11=_0x2defdf===0x0?_0x3e064a[_0x4f001b(0x1bb)](0x2):(_0x3e064a/_0x2defdf)['toFixed'](0x2),_0x32bbb5=_0x3b149d===0x0?'0':(_0x28b8d2/_0x3b149d*0x64)['toFixed'](0x1);console['log']('Stats\x20calculated:',{'totalMatches':_0x3b149d,'wins':_0x28b8d2,'losses':_0x1e1241,'totalKills':_0x3e064a,'totalDeaths':_0x2defdf,'kdRatio':_0x4c9e11,'winRate':_0x32bbb5}),document[_0x4f001b(0x1aa)](_0x4f001b(0x1a4))['textContent']=_0x3b149d,document['getElementById']('stats-wins')['textContent']=_0x28b8d2,document['getElementById'](_0x4f001b(0x1a7))[_0x4f001b(0x1be)]=_0x1e1241,document[_0x4f001b(0x1aa)]('stats-kd')['textContent']=_0x4c9e11,document['getElementById'](_0x4f001b(0x1b6))['textContent']=_0x32bbb5+'%';}catch(_0x541882){console['error']('Error\x20loading\x20player\x20stats:',_0x541882),['matches',_0x4f001b(0x1b5),'losses','kd','winrate']['forEach'](_0x1b399b=>{const _0x5679f9=_0x4f001b;document['getElementById']('stats-'+_0x1b399b)[_0x5679f9(0x1be)]='-';});}}}document['addEventListener'](a43_0x5b150a(0x1b8),()=>{new ProfileManager();});