const a36J=a36b;(function(a,b){const v=a36b,c=a();while(!![]){try{const d=parseInt(v(0x8a))/0x1+-parseInt(v(0x95))/0x2+-parseInt(v(0xa8))/0x3*(parseInt(v(0xa0))/0x4)+parseInt(v(0x8e))/0x5+-parseInt(v(0xb0))/0x6+parseInt(v(0xe0))/0x7+-parseInt(v(0xa6))/0x8*(parseInt(v(0xdc))/0x9);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a36a,0xa5367));import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function a36a(){const O=['DxnLCG','vxnLCIbZAwDUzwqGAw46','Bg9NAw4TzxjYB3i','zxjYB3i','rxjYB3iGy2HLy2TPBMCGDxnLCM5HBwu6','v2LUzg93lNjLC2vUzfzLCMLMAwnHDgLVBKvTywLSignHBgXLzcb3AxrOoG','ChjLDMvUDerLzMf1Bhq','qxr0zw1WDgLUzYbgAxjLyMfZzsbZAwDUsw5xAxrOrw1HAwXbBMrqyxnZD29Yzc4UlG','ywrKrxzLBNrmAxn0zw5LCG','y29Kzq','ywXS','yMXVy2S','vxnLCM5HBwuGBxvZDcbIzsbHDcbSzwfZDcaZignOyxjHy3rLCNmGBg9UzW','DMvYAwzPy2f0Aw9UlwfUC3DLCG','rxjYB3iGy2HLy2TPBMCGDMvYAwzPy2f0Aw9Uihn0yxr1CZO','rw1HAwWGAgfZigjLzw4GDMvYAwzPzwqHifjLzgLYzwn0Aw5NihrVigXVz2LUihbHz2uUlI4','CgXHEwvYC0qZ','qxr0zw1WDgLUzYb0BYbYzxnLBMqGDMvYAwzPy2f0Aw9UigvTywLSihrVoG','Dg9mB3DLCKnHC2u','BM9Uzq','Bg9NAw4TCgfZC3DVCMq','uhjVy2vZC2LUzYa','rxjYB3iGC2vUzgLUzYb2zxjPzMLJyxrPB24Gzw1HAwW6ia','igfKzgvKihrVia','Bg9NAw4Ty29UDgfPBMvY','lI4VAw5KzxGUAhrTBa','BwfNzw50yq','mta4odKXv09wBMfb','tg9NAw4GzxjYB3i6ia','zw1WDhK','ignVBgXLy3rPB24','otm0mdaYm2nfwK1Mta','vw5HyMXLihrVihzLCMLMEsb1C2vYBMfTzsbHDMfPBgfIAwXPDhKUifbSzwfZzsb0CNKGywDHAw4GBgf0zxiU','zgf0yq','BwvZC2fNzq','CMvNAxn0zxiTzxjYB3i','Aw5JBhvKzxm','ChvYCgXL','DxnLCM5HBwu','C3r5Bgu','Bg9JyxrPB24','vxnLCIa','mtK3oda2EvPQqKT0','y2HLy2TLza','zxHPC3rZ','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gyw55ignVBgXLy3rPB24UlI4','mJm0nJiWmgvgANPIvW','vxnLCIbZAwDUzwqGAw4GzM9YihzLCMLMAwnHDgLVBIbLBwfPBdO','cIaGicaGicaGicaGicaGicaGicaGpgrPDIbJBgfZCZ0IC3vJy2vZCY1TzxnZywDLiJ4kicaGicaGicaGicaGicaGicaGicaGicaGrw1HAwWGDMvYAwzPzwqGC3vJy2vZC2z1BgX5isbzB3uGy2fUig5VDYbSB2CGAw4UcIaGicaGicaGicaGicaGicaGicaGpc9KAxy+','z2v0rwXLBwvUDej5swq','yxv0Ac9LBwfPBc1HBhjLywr5lwLUlxvZzq','vMvYAwzPy2f0Aw9UigvTywLSihnLBNq','rw1HAwWGywrKCMvZCYbPCYbHBhjLywr5ihjLz2LZDgvYzwq','ndy1nZzhvKHQtKW','zw1HAwW','rxjYB3iGCMvZzw5KAw5NihzLCMLMAwnHDgLVBIbLBwfPBdO','DMvYAwzPy2f0Aw9Uq2HLy2TjBNrLCNzHBa','u2v0DgLUzYb1CcbLBwfPBcb2zxjPzMLJyxrPB24GBgLZDgvUzxiGzM9YoG','DhjPBq','BM9UugfYDgLJAxbHBNrZ','Bg9NAw4TzM9YBq','Aw5Uzxjive1m','vxnLCIbUB3qGzM91BMqGAw4Gyw55ignVBgXLy3rPB24SignOzwnRAw5NihbLBMrPBMCGCMvNAxn0CMf0Aw9U','rw1HAwWGAxmGDMvYAwzPzwqSihbYB2nLC3nPBMCGCMvNAxn0CMf0Aw9U','nhL0shbYBq','z2v0swruB2TLBG','Dgv4DenVBNrLBNq','igfKzgvKihrVig5VBLbHCNrPy2LWyw50CYbJB2XSzwn0Aw9U','BM9UlxbHCNrPy2LWyw50','CgXHEwvYC0qY','mJGWELj1tMnP','BM9UugfYDgLJAxbHBNq','otGYodG3AMPjqvrX','DMfSDwu','jYKIignSyxnZpsjYzxnLBMqTyNv0Dg9UiJ4kicaGicaGicaGicaGicaGicaGicbszxnLBMqGvMvYAwzPy2f0Aw9UievTywLScIaGicaGicaGicaGicaGica8l2j1DhrVBJ4kicaGicaGicaGicaGpc9KAxy+','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNDHCM5PBMCTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbqBgvHC2uGDMvYAwz5ihLVDxiGzw1HAwWGDg8Gy29TCgXLDguGEw91CIbYzwDPC3rYyxrPB24UcIaGicaGicaGicaGicaGicaGicaGicaGicaGica8yNi+pgjYpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgj1DhrVBIb0ExbLpsjIDxr0B24IigLKpsjYzxnLBMqTyNv0Dg9UiIbJBgfZCZ0ICMvZzw5Klwj1DhrVBIi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGuMvZzw5KifzLCMLMAwnHDgLVBIbfBwfPBaOGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9IDxr0B24+cIaGicaGicaGicaGicaGicaGicaGicaGidWVzgL2pG','y2XPy2S','tg9NAw4Gyxr0zw1WDcbZDgfYDgvKigzVCJO','CMvNAxn0zxiTy29UDgfPBMvY','C3rYAw5N','mZmWmtq1mNzsBenxza','CgXHEwvYCW','rw1HAwWGBM90ihLLDcb2zxjPzMLLzcWGD2fPDgLUzY4UlG','zgLZCgXHEq','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbzB3vYigfJy291BNqGAgfZigjLzw4GDMvYAwzPzwqHifLVDsbJyw4GBM93igXVzYbPBI4kicaGicaGicaGicaGicaGicaGicaGicaGpc9KAxy+','tg9NAw4GzxjYB3i6','tg9NAw4GzMfPBgvKoIa','re9nq29UDgvUDeXVywrLza','DwLK','C3vIBwL0','AhjLzG','Bg9NAw4Tzw1HAwW','Cg9ZAxrPB24','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbtzxr0Aw5NihvWihLVDxiGywnJB3vUDc4UlGOGicaGicaGicaGicaGicaGicaGicaGica8l2rPDJ4','q2HLy2TPBMCGAwyGzw1HAwWGAgfZigjLzw4GDMvYAwzPzwqUlI4','Bg9N','lIbqBgvHC2uGy2HLy2SGEw91CIbPBMjVEc4kicaGicaGicaGicaGpc9KAxy+'];a36a=function(){return O;};return a36a();}function setupVerificationListener(a,b){const w=a36b;console['log'](w(0x99),a);const c=setInterval(async()=>{const x=w;try{console[x(0xbf)](x(0xbe));const d=await signInWithEmailAndPassword(auth,a,b),e=d['user'];await e[x(0xa1)](!![]),e['emailVerified']?(console['log'](x(0xd0)),clearInterval(c),document[x(0x91)](x(0x83))['innerHTML']=x(0x90),await signOut(auth),setTimeout(()=>{const y=x;document['getElementById'](y(0xae))['style']['display']='none',document[y(0x91)](y(0xd9))['style']['display']='block',document['getElementById'](y(0xbb))[y(0xa9)]=a,document['getElementById'](y(0xc3))['innerHTML']=y(0xb4);},0x7d0)):(console['log'](x(0xb2)),await signOut(auth));}catch(f){console[x(0xc4)](x(0xcf),f),clearInterval(c);}},0x1388);window[w(0x98)]=c,setTimeout(()=>{const z=w;window['verificationCheckInterval']&&(clearInterval(window[z(0x98)]),window['verificationCheckInterval']=null,console['log']('Stopped\x20checking\x20for\x20email\x20verification\x20(timeout\x20reached)'));},0x5*0x3c*0x3e8);}async function isUsernameAvailable(a){const A=a36b;if(!a||typeof a!==A(0xaf)||a[A(0x9a)]()['length']<0x3)return document[A(0x91)](A(0x83))['textContent']=A(0xcd),![];const b=a['trim']();try{const c=/^[a-zA-Z0-9_-]{3,20}$/;if(!c['test'](b))return document[A(0x91)]('register-error')[A(0xa2)]='Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscores\x20and\x20hyphens',![];const [d,e,f]=await Promise['all']([getDocs(query(collection(db,A(0xb1)),where(A(0x86),'==',b))),getDocs(query(collection(db,'pendingRegistrations'),where(A(0x86),'==',b))),getDocs(query(collection(db,'nonParticipants'),where('username','==',b)))]);if(!d['empty']||!e['empty']||!f[A(0xde)])return document[A(0x91)]('register-error')[A(0xa2)]='Username\x20is\x20already\x20taken',![];return!![];}catch(g){return console['error'](A(0xc5),g),document['getElementById'](A(0x83))[A(0xa2)]=A(0xe1),![];}}async function handleRegister(a){const B=a36b;a[B(0xc7)]();const b=document['getElementById'](B(0x83));b['textContent']='';const c=document['getElementById']('register-email')[B(0xa9)],d=document['getElementById']('register-password')['value'],f=document[B(0x91)]('register-username')['value'],g=document['getElementById'](B(0xce))[B(0xa9)][B(0xd3)](),h=document[B(0x91)]('register-mode')['value'],i=document[B(0x91)]('non-participant')?.[B(0x8b)]||![];if(i&&h!==''){b['textContent']='Please\x20unselect\x20a\x20game\x20mode\x20if\x20you\x20choose\x20Non-Participant.';return;}if(!i&&h===''){b['textContent']='Please\x20select\x20a\x20game\x20mode\x20or\x20check\x20Non-Participant.';return;}try{const j=[B(0x85),B(0xdb)];if(!j[B(0x84)](g)){b['textContent']='Incorrect\x20answer\x20to\x20verification\x20question';return;}const k=await isUsernameAvailable(f);if(!k)return;const l=await createUserWithEmailAndPassword(auth,c,d),m=l['user'];await sendEmailVerification(m),await setDoc(doc(db,'pendingRegistrations',m['uid']),{'username':f[B(0x9a)](),'email':c,'gameMode':h,'nonParticipant':i,'createdAt':new Date(),'verified':![]}),b[B(0x9d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Registration\x20pending!\x20Please\x20check\x20your\x20email\x20to\x20verify\x20your\x20account.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resendVerificationEmail(\x27'+c+B(0xaa),await signOut(auth),setupVerificationListener(c,d);}catch(n){console[B(0xc4)]('Registration\x20error:',n),b['textContent']=n[B(0xca)]===B(0x92)?B(0x94):'Registration\x20failed.\x20Please\x20try\x20again\x20later.';}}async function handleLogin(a){const C=a36b;a[C(0xc7)]();const b=document[C(0x91)]('login-email')['value'],c=document[C(0x91)]('login-password')['value'],d=document[C(0x91)](C(0xc3));console['log'](C(0xad),b),d[C(0xa2)]='';try{console[C(0xbf)](C(0xc8));const f=await signInWithEmailAndPassword(auth,b,c),g=f['user'];console['log']('User\x20signed\x20in:',g['uid']);const h=[C(0xb1),'playersD2','playersD3','playersDuos','playersCTF',C(0x9b)];console['log'](C(0x8d));let j=![],k=await Promise[C(0xcb)](h['map'](l=>getDoc(doc(db,l,g['uid']))));for(let l=0x0;l<k['length'];l++){if(k[l][C(0x8c)]()){j=!![],console[C(0xbf)]('User\x20found\x20in\x20'+h[l]+C(0xdf));break;}}if(!j){console[C(0xbf)](C(0x9e));const m=doc(db,'pendingRegistrations',g['uid']),n=await getDoc(m);if(n[C(0x8c)]()){const o=n[C(0xe2)]();console[C(0xbf)]('Found\x20pending\x20registration:',o);if(g['emailVerified']){console['log'](C(0x9f)),d['innerHTML']=C(0xbd);if(o[C(0xa7)])console['log']('Processing\x20non-participant\x20registration'),await setDoc(doc(db,'nonParticipants',g[C(0xb8)]),{'username':o[C(0x86)],'email':g[C(0x96)],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console[C(0xbf)](C(0x89)+o[C(0x86)]+C(0xa3));else{let p;switch(o['gameMode']){case'D1':p=C(0xb1);break;case'D2':p=C(0xa5);break;case'D3':p=C(0xd1);break;case'Duos':p='playersDuos';break;case'CTF':p='playersCTF';break;default:p='players';}console['log'](C(0xd6)+o['gameMode']+'\x20player\x20registration\x20to\x20'+p);const q=collection(db,p),r=query(q,orderBy(C(0xbc),'desc'),limit(0x1)),s=await getDocs(r),t=s['empty']?0x1:s['docs'][0x0]['data']()[C(0xbc)]+0x1;await setDoc(doc(db,p,g[C(0xb8)]),{'username':o['username'],'email':g[C(0x96)],'eloRating':0x4b0,'position':t,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':o['gameMode']}),console['log']('New\x20player\x20'+o['username']+C(0xd8)+p+'\x20at\x20position\x20'+t);}await deleteDoc(m),setTimeout(()=>{const D=C;window[D(0x88)]['href']=D(0xda);},0x7d0);return;}else{d[C(0x9d)]=C(0xab),document[C(0x91)]('resend-button')[C(0xc9)](C(0xac),()=>{resendVerificationEmail(b);}),await signOut(auth);return;}}}window[C(0x88)][C(0xba)]='../index.html';}catch(u){console[C(0xc4)](C(0xb5),u),d['textContent']=C(0xb6)+u[C(0xe3)];}}function loginFormHandler(a){const E=a36b;a['preventDefault']();const b=document['getElementById'](E(0xbb))[E(0xa9)]['trim'](),c=document[E(0x91)]('login-password')['value'],d=document['getElementById'](E(0xc3));signInWithEmailAndPassword(auth,b,c)['then'](e=>{const F=E;console[F(0xbf)](F(0xc2),e[F(0xc1)]),window[F(0x88)][F(0xba)]='../index.html';})['catch'](e=>{const G=E;console['error'](G(0xb5),e),d['textContent']=G(0xdd)+e[G(0xe3)],d[G(0x87)][G(0xb3)]=G(0xcc);});}function a36b(a,b){const c=a36a();return a36b=function(d,e){d=d-0x83;let f=c[d];if(a36b['AWvzOk']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a36b['vpraQE']=g,a=arguments,a36b['AWvzOk']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a36b['vpraQE'](f),a[i]=f):f=j,f;},a36b(a,b);}async function resendVerificationEmail(a){const H=a36b;console[H(0xbf)](H(0xd2),a);try{const b=document['getElementById'](H(0xd5))?.['value'];if(!b){console['error']('Password\x20not\x20available\x20for\x20resending\x20verification'),document[H(0x91)]('login-error')['textContent']='Please\x20enter\x20your\x20password\x20to\x20resend\x20verification\x20email';return;}const c=await signInWithEmailAndPassword(auth,a,b),d=c[H(0xc1)];console[H(0xbf)](H(0x8f),d[H(0xb8)]),await sendEmailVerification(d),console['log'](H(0x93)),document[H(0x91)](H(0xc3))[H(0x9d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Verification\x20email\x20has\x20been\x20resent\x20to\x20'+a+H(0xc0),await signOut(auth);}catch(e){console[H(0xc4)](H(0x97),e),document[H(0x91)](H(0xc3))['textContent']=H(0xd7)+e[H(0xe3)];}}window['resendVerificationEmail']=function(a){const I=a36b;console[I(0xbf)](I(0xc6),a),resendVerificationEmail(a);},document['addEventListener'](a36J(0xb7),()=>{const K=a36J,a=document[K(0x91)](K(0xa4)),b=document[K(0x91)]('register-mode');a&&b&&a['addEventListener']('change',function(){const L=K;this[L(0x8b)]?(b['value']='',b['disabled']=!![]):b['disabled']=![];});const c=document[K(0x91)]('register-form'),d=document['getElementById'](K(0x9c));c&&c['addEventListener']('submit',handleRegister);d&&d['addEventListener'](K(0xb9),handleLogin);const e=document[K(0x91)]('show-register'),f=document[K(0x91)]('show-login');e&&e[K(0xc9)](K(0xac),g=>{const M=K;g[M(0xc7)](),document['getElementById']('login-container')['style'][M(0xb3)]=M(0xd4),document[M(0x91)](M(0xae))[M(0x87)][M(0xb3)]='block';}),f&&f[K(0xc9)](K(0xac),g=>{const N=K;g['preventDefault'](),document['getElementById'](N(0xae))[N(0x87)]['display']='none',document['getElementById'](N(0xd9))[N(0x87)]['display']='block';});});