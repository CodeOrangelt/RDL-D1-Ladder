const a2_0x2d6ae0=a2_0x5283,a2_0x1ca3e3=(function(){let _0x5c361e=!![];return function(_0x1271bd,_0x5f594f){const _0x2fdf9d=_0x5c361e?function(){if(_0x5f594f){const _0x3573a3=_0x5f594f['apply'](_0x1271bd,arguments);return _0x5f594f=null,_0x3573a3;}}:function(){};return _0x5c361e=![],_0x2fdf9d;};}()),a2_0x1f0118=a2_0x1ca3e3(this,function(){const _0x371aa1=a2_0x5283,_0x2ea0c6=function(){const _0xad94e3=a2_0x5283;let _0x2e0c6d;try{_0x2e0c6d=Function('return\x20(function()\x20'+_0xad94e3(0x1e0)+');')();}catch(_0x2da7b1){_0x2e0c6d=window;}return _0x2e0c6d;},_0x2a7ac2=_0x2ea0c6(),_0x2369c3=_0x2a7ac2[_0x371aa1(0xdc)]=_0x2a7ac2['console']||{},_0x1a362b=[_0x371aa1(0x10b),'warn','info','error','exception','table',_0x371aa1(0xc0)];for(let _0x28e473=0x0;_0x28e473<_0x1a362b['length'];_0x28e473++){const _0x3760bf=a2_0x1ca3e3[_0x371aa1(0x2b4)]['prototype']['bind'](a2_0x1ca3e3),_0x3b5d1f=_0x1a362b[_0x28e473],_0x5cd5b2=_0x2369c3[_0x3b5d1f]||_0x3760bf;_0x3760bf['__proto__']=a2_0x1ca3e3['bind'](a2_0x1ca3e3),_0x3760bf['toString']=_0x5cd5b2['toString'][_0x371aa1(0x27e)](_0x5cd5b2),_0x2369c3[_0x3b5d1f]=_0x3760bf;}});a2_0x1f0118();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x255de0){const _0x23d7b7=a2_0x5283;if(!_0x255de0)return'#ffffff';_0x255de0=_0x255de0['replace']('#','');_0x255de0['length']===0x3&&(_0x255de0=_0x255de0['split']('')['map'](_0x49acdb=>_0x49acdb+_0x49acdb)['join'](''));if(_0x255de0['length']!==0x6)return'#ffffff';const _0x513cb8=parseInt(_0x255de0[_0x23d7b7(0x24b)](0x0,0x2),0x10),_0x6d5ba1=parseInt(_0x255de0['substring'](0x2,0x4),0x10),_0xa3c8f=parseInt(_0x255de0[_0x23d7b7(0x24b)](0x4,0x6),0x10),_0x5d1544=(_0x513cb8*0x12b+_0x6d5ba1*0x24b+_0xa3c8f*0x72)/0x3e8;return _0x5d1544>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener'](a2_0x2d6ae0(0x1bd),()=>{auth['onAuthStateChanged'](async _0x368c49=>{const _0x3c5cd9=a2_0x5283;if(!_0x368c49){window['location']['href']=_0x3c5cd9(0x105);return;}try{await initializeAdminDashboard();}catch(_0x22cc01){console[_0x3c5cd9(0x28a)]('Error\x20initializing\x20dashboard:',_0x22cc01),showNotification(_0x3c5cd9(0x1e2),'error');}});});async function getUserTabPermissions(_0x43e68f){const _0x37b995=a2_0x2d6ae0;if(!_0x43e68f)return['dashboard'];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x43e68f+'\x20in\x20all\x20collections...');const _0x59dfbe=[{'name':_0x37b995(0xfe),'displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':_0x37b995(0x162)},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x3b39b5=auth[_0x37b995(0x1e3)];let _0x95aee0=null,_0x53f4cd=null;for(const _0x1aab53 of _0x59dfbe){try{if(_0x3b39b5){const _0x4fc4c1=doc(db,_0x1aab53['name'],_0x3b39b5['uid']),_0xe9c518=await getDoc(_0x4fc4c1);if(_0xe9c518['exists']()){const _0x1da2d0=_0xe9c518['data']();console[_0x37b995(0x10b)]('Found\x20user\x20in\x20'+_0x1aab53['displayName']+'\x20by\x20UID:',_0x1da2d0);const _0x103602=(_0x1da2d0['roleName']||_0x1da2d0['role']||'')['toLowerCase']();if(_0x103602&&_0x103602!=='none'){_0x95aee0=_0x103602,_0x53f4cd=_0x1aab53['displayName'],console['log'](_0x37b995(0x109)+_0x95aee0+_0x37b995(0x27b)+_0x53f4cd);break;}}}if(!_0x95aee0){const _0xe9a1b0=collection(db,_0x1aab53[_0x37b995(0x192)]),_0x3d14cf=query(_0xe9a1b0,where('email','==',_0x43e68f)),_0x4138da=await getDocs(_0x3d14cf);if(!_0x4138da['empty']){const _0x54b514=_0x4138da['docs'][0x0]['data']();console['log'](_0x37b995(0x1c1)+_0x1aab53['displayName']+'\x20with\x20email\x20'+_0x43e68f+':',_0x54b514);const _0x19ea3b=(_0x54b514[_0x37b995(0xef)]||_0x54b514[_0x37b995(0xfc)]||'')['toLowerCase']();if(_0x19ea3b&&_0x19ea3b!=='none'){_0x95aee0=_0x19ea3b,_0x53f4cd=_0x1aab53['displayName'],console[_0x37b995(0x10b)]('Found\x20specific\x20role:\x20'+_0x95aee0+'\x20in\x20'+_0x53f4cd);break;}}}}catch(_0x86f21c){console['error']('Error\x20checking\x20'+_0x1aab53['displayName']+':',_0x86f21c);}}if(_0x95aee0){console['log'](_0x37b995(0x24c)+_0x95aee0+'\x20(from\x20'+_0x53f4cd+')');const _0x98a580={'admin':[_0x37b995(0x157),'manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks','inactive-players','settings','manage-trophies','elo-history','manage-highlights','user-roles-section','manage-matches',_0x37b995(0x1c2),'manage-levels-ribbons',_0x37b995(0x234)],'owner':['dashboard',_0x37b995(0x168),'manage-matches',_0x37b995(0x247),'manage-trophies','manage-ranks','inactive-players',_0x37b995(0x221),'manage-trophies','elo-history','manage-highlights',_0x37b995(0x16c),'manage-matches',_0x37b995(0x1c2),_0x37b995(0xf8),'manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':[_0x37b995(0x157),_0x37b995(0x247),'manage-trophies','elo-history','manage-highlights']};if(_0x98a580[_0x95aee0])return console['log'](_0x37b995(0x22d)+_0x95aee0+'\x27\x20has\x20permissions:',_0x98a580[_0x95aee0]),_0x98a580[_0x95aee0];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x43e68f+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x2b379a=[]){const _0x4e7410=a2_0x2d6ae0,_0x3c9cdb=document['querySelectorAll']('.sidebar-nav\x20.nav-item'),_0x2c37c8=document['querySelectorAll']('.admin-section');(!_0x2b379a||_0x2b379a['length']===0x0)&&(_0x2b379a=['dashboard']);_0x3c9cdb['forEach'](_0x1bdeea=>{const _0xf95412=_0x1bdeea['getAttribute']('data-section');_0x2b379a['includes'](_0xf95412)?_0x1bdeea['style']['display']='flex':_0x1bdeea['style']['display']='none',_0x1bdeea['addEventListener']('click',()=>{const _0x332d52=a2_0x5283,_0xcd9a02=_0x1bdeea[_0x332d52(0xac)]('data-section');if(!_0x2b379a['includes'](_0xcd9a02)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x3c9cdb['forEach'](_0x3e97d1=>_0x3e97d1[_0x332d52(0x9a)][_0x332d52(0x207)](_0x332d52(0xdb))),_0x1bdeea['classList']['add'](_0x332d52(0xdb)),_0x2c37c8['forEach'](_0x5a13ed=>{const _0x3eafac=_0x332d52;_0x5a13ed['style']['display']=_0x3eafac(0x23b);});const _0x11cab0=document[_0x332d52(0x2de)](_0xcd9a02);_0x11cab0&&(_0x11cab0['style']['display']='block',console['log']('Switched\x20to\x20'+_0xcd9a02+_0x332d52(0x13b)));});});const _0x524288=document['querySelector'](_0x4e7410(0x150)+_0x2b379a[0x0]+'\x22]');_0x524288&&_0x524288['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x413db7=a2_0x2d6ae0,_0x283181=document['querySelectorAll']('.nav-item');let _0x115115=null,_0x15b428=new Set();_0x283181[_0x413db7(0x135)](_0x578b90=>{_0x578b90['addEventListener']('click',function(){const _0x23be0f=a2_0x5283,_0x2e3924=this['getAttribute']('data-section');if(_0x2e3924===_0x115115)return;_0x115115&&(document['getElementById'](_0x115115)[_0x23be0f(0x2ca)][_0x23be0f(0x1e1)]='none',_0x283181['forEach'](_0x591f50=>_0x591f50[_0x23be0f(0x9a)][_0x23be0f(0x207)]('active'))),document['getElementById'](_0x2e3924)[_0x23be0f(0x2ca)]['display']='block',this['classList']['add'](_0x23be0f(0xdb)),_0x115115=_0x2e3924;});});}function loadSectionData(_0x1b9720){return;}async function initializeAdminDashboard(){const _0x53d6bc=a2_0x2d6ae0;try{const _0x386d2b=auth[_0x53d6bc(0x1e3)],_0x41040d=await getUserTabPermissions(_0x386d2b['email']);console[_0x53d6bc(0x10b)]('User\x20'+_0x386d2b['email']+_0x53d6bc(0x210),_0x41040d),window['userAllowedTabs']=_0x41040d,setupSidebarNavigation(_0x41040d),setupLadderSelector(),setupDashboardSection(),_0x41040d['includes']('manage-players')&&setupManagePlayersSection(),_0x41040d[_0x53d6bc(0x2c3)](_0x53d6bc(0x108))&&setupEloHistorySection(),_0x41040d[_0x53d6bc(0x2c3)](_0x53d6bc(0x79))&&setupRankControls(),_0x41040d['includes']('manage-articles')&&setupManageArticlesSection(),_0x41040d['includes']('user-roles-section')&&setupUserRolesSection(),_0x41040d['includes'](_0x53d6bc(0x21c))&&setupTrophyManagementSection(),_0x41040d[_0x53d6bc(0x2c3)]('manage-highlights')&&setupManageHighlightsSection(),_0x41040d['includes']('inactive-players')&&setupInactivePlayersSection(),_0x41040d[_0x53d6bc(0x2c3)]('manage-matches')&&setupManageMatchesSection(),_0x41040d['includes']('manage-points')&&setupManagePointsSection(),_0x41040d['includes']('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0x41040d);}catch(_0x120338){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x120338);}}function setupDataLoadButtons(_0x3d00b7=[]){const _0x536580=a2_0x2d6ae0;(!_0x3d00b7||_0x3d00b7['length']===0x0)&&(_0x3d00b7=['dashboard']);const _0x1678f0=document['getElementById'](_0x536580(0x25b));_0x1678f0&&_0x1678f0['addEventListener']('click',function(){const _0x1a0a4f=_0x536580;this[_0x1a0a4f(0x9a)][_0x1a0a4f(0x288)](_0x1a0a4f(0x206)),this[_0x1a0a4f(0x7d)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()['then'](()=>{const _0x3c2a9a=_0x1a0a4f;this['classList']['remove'](_0x3c2a9a(0x206)),this[_0x3c2a9a(0x7d)]=_0x3c2a9a(0xe2);})['catch'](_0x508fbf=>{console['error']('Error\x20loading\x20dashboard:',_0x508fbf),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x3d00b7['includes'](_0x536580(0x21c))){const _0xb00f79=document['getElementById']('load-trophies-data');_0xb00f79&&_0xb00f79['addEventListener']('click',function(){const _0xeb4ba4=_0x536580;console['log']('Load\x20trophies\x20data\x20clicked'),this['classList'][_0xeb4ba4(0x288)](_0xeb4ba4(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})[_0xeb4ba4(0xda)](_0x85a2ed=>{const _0x21f662=_0xeb4ba4;console[_0x21f662(0x28a)](_0x21f662(0x292),_0x85a2ed),this[_0x21f662(0x9a)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x3d00b7['includes']('manage-players')){const _0x5c66de=document[_0x536580(0x2de)]('load-players-data');_0x5c66de&&_0x5c66de['addEventListener'](_0x536580(0x137),function(){const _0x4b9dcb=_0x536580;console['log']('Load\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x4841cd=a2_0x5283;this['classList'][_0x4841cd(0x207)]('loading'),this['innerHTML']=_0x4841cd(0x1d3);})[_0x4b9dcb(0xda)](_0x3b6306=>{const _0x240e5d=_0x4b9dcb;console[_0x240e5d(0x28a)](_0x240e5d(0x1bf),_0x3b6306),this['classList']['remove']('loading'),this[_0x240e5d(0x7d)]=_0x240e5d(0x2dd),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x3d00b7[_0x536580(0x2c3)]('elo-history')){const _0x5a10f7=document['getElementById']('load-elo-history-data');_0x5a10f7&&_0x5a10f7['addEventListener']('click',function(){const _0x53761d=_0x536580;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add'](_0x53761d(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)[_0x53761d(0x1a7)](()=>{const _0xfcb3c3=_0x53761d;this['classList'][_0xfcb3c3(0x207)](_0xfcb3c3(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0xe4265c=>{const _0x2a1fdb=_0x53761d;console['error']('Error\x20loading\x20history:',_0xe4265c),this[_0x2a1fdb(0x9a)]['remove'](_0x2a1fdb(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x3d00b7['includes']('manage-articles')){const _0x23ec57=document['getElementById']('load-articles-data');_0x23ec57&&_0x23ec57[_0x536580(0x78)]('click',function(){const _0x50955f=_0x536580;console['log'](_0x50955f(0x2bd)),this[_0x50955f(0x9a)][_0x50955f(0x288)](_0x50955f(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x5aca41=_0x50955f;this[_0x5aca41(0x9a)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0x4713f7=>{const _0x4bebc2=_0x50955f;console[_0x4bebc2(0x28a)]('Error\x20loading\x20articles:',_0x4713f7),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0x3d00b7['includes']('user-roles-section')){const _0x51d441=document['getElementById'](_0x536580(0x172));_0x51d441&&_0x51d441['addEventListener']('click',function(){const _0xe6bf7d=_0x536580;console[_0xe6bf7d(0x10b)]('Load\x20users\x20data\x20clicked'),this[_0xe6bf7d(0x9a)]['add']('loading'),this['innerHTML']=_0xe6bf7d(0xa5),loadUsersWithRoles()[_0xe6bf7d(0x1a7)](()=>{const _0x3e74ad=_0xe6bf7d;this[_0x3e74ad(0x9a)]['remove'](_0x3e74ad(0x206)),this[_0x3e74ad(0x7d)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x4dc336=>{const _0x1c56d3=_0xe6bf7d;console['error']('Error\x20loading\x20users:',_0x4dc336),this['classList']['remove']('loading'),this['innerHTML']=_0x1c56d3(0x2dd),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x3d00b7[_0x536580(0x2c3)](_0x536580(0xad))){const _0xaf3a77=document[_0x536580(0x2de)]('load-inactive-players-data');_0xaf3a77&&_0xaf3a77[_0x536580(0x78)]('click',function(){const _0x3ffc76=_0x536580;console['log'](_0x3ffc76(0x230)),this['classList'][_0x3ffc76(0x288)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()[_0x3ffc76(0x1a7)](()=>{const _0x4053fa=_0x3ffc76;this['classList'][_0x4053fa(0x207)]('loading'),this['innerHTML']=_0x4053fa(0xe6);})['catch'](_0x2dcf11=>{const _0x33d20f=_0x3ffc76;console['error']('Error\x20loading\x20inactive\x20players:',_0x2dcf11),this['classList'][_0x33d20f(0x207)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xc3a56e=_0x33d20f;this['innerHTML']=_0xc3a56e(0xe6);},0xbb8);});});}if(_0x3d00b7[_0x536580(0x2c3)]('manage-highlights')){const _0x3e0db2=document['getElementById']('load-highlights-data');_0x3e0db2&&_0x3e0db2[_0x536580(0x78)]('click',function(){const _0x1e126e=_0x536580;console[_0x1e126e(0x10b)]('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x1e126e(0x7d)]=_0x1e126e(0xa5),loadHighlightsAdmin()['then'](()=>{const _0x27cbb9=_0x1e126e;this['classList']['remove'](_0x27cbb9(0x206)),this[_0x27cbb9(0x7d)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x342a48=>{const _0x41cc3c=_0x1e126e;console['error']('Error\x20loading\x20highlights:',_0x342a48),this['classList']['remove']('loading'),this[_0x41cc3c(0x7d)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x3d00b7['includes']('manage-matches')){const _0x189b26=document['getElementById'](_0x536580(0x18b));_0x189b26&&_0x189b26[_0x536580(0x78)]('click',function(){const _0xcea49f=_0x536580;console[_0xcea49f(0x10b)]('Load\x20matches\x20data\x20clicked'),this['classList'][_0xcea49f(0x288)]('loading'),this['innerHTML']=_0xcea49f(0xa5),loadMatchesData(0x1)[_0xcea49f(0x1a7)](()=>{const _0x252d8e=_0xcea49f;this[_0x252d8e(0x9a)][_0x252d8e(0x207)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x7ffce7=>{const _0x227455=_0xcea49f;console[_0x227455(0x28a)]('Error\x20loading\x20matches:',_0x7ffce7),this[_0x227455(0x9a)]['remove']('loading'),this[_0x227455(0x7d)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x3d00b7[_0x536580(0x2c3)]('manage-ribbons')){const _0x4d5cc7=document[_0x536580(0x2de)]('load-ribbons-data');_0x4d5cc7&&_0x4d5cc7['addEventListener'](_0x536580(0x137),function(){const _0x32c24d=_0x536580;console['log'](_0x32c24d(0xc5)),this['classList']['add'](_0x32c24d(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x31021b=_0x32c24d;this[_0x31021b(0x9a)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x143c79=>{const _0x5c6f0e=_0x32c24d;console['error'](_0x5c6f0e(0x17c),_0x143c79),this['classList'][_0x5c6f0e(0x207)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x536580(0x267));}function setupDashboardSection(){const _0x1693e9=a2_0x2d6ae0;document['getElementById']('player-count')[_0x1693e9(0x1dc)]='-',document[_0x1693e9(0x2de)]('match-count')['textContent']='-',document['getElementById'](_0x1693e9(0x272))[_0x1693e9(0x1dc)]='-',document['getElementById'](_0x1693e9(0xa4))['textContent']='-';}function setupLadderSelector(){const _0x58aff5=a2_0x2d6ae0,_0x341d5d=document[_0x58aff5(0x2d8)](_0x58aff5(0x24e));_0x341d5d['forEach'](_0x3e7d22=>{_0x3e7d22['addEventListener']('change',()=>{const _0x4d73cc=a2_0x5283;currentLadder=_0x3e7d22['value'],document['body'][_0x4d73cc(0x110)]('data-ladder',currentLadder);const _0x4a33a4=document[_0x4d73cc(0x2de)](_0x4d73cc(0x89));_0x4a33a4&&(_0x4a33a4['textContent']=currentLadder),document['getElementById'](_0x4d73cc(0x284))['textContent']='-',document['getElementById'](_0x4d73cc(0x275))['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document[_0x4d73cc(0x2de)]('rejected-count')['textContent']='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts['activity'][_0x4d73cc(0x14e)](),charts['activity']=null),showNotification(_0x4d73cc(0x18f)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x4d73cc(0xa2));});});const _0x222b53=document['getElementById']('current-ladder-display');_0x222b53&&(_0x222b53[_0x58aff5(0x1dc)]=currentLadder);}async function loadDashboardOverview(){const _0x2239a0=a2_0x2d6ae0;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x2239a0(0x2de)]('player-count')['textContent']='-',document[_0x2239a0(0x2de)]('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x2239a0(0xa4))[_0x2239a0(0x1dc)]='-';const _0x3523f1=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x2370a6=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5f060d=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x122c9c=currentLadder==='D1'?_0x2239a0(0x1fc):currentLadder==='D2'?'RejectedD2':'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x3523f1+',\x20'+_0x2370a6);const _0x25ff24=await getDocs(collection(db,_0x3523f1)),_0x334080=_0x25ff24['size'],_0x512cfd=await getDocs(collection(db,_0x2370a6)),_0xbf283a=_0x512cfd['size'],_0x144d0a=await getDocs(collection(db,_0x5f060d)),_0x4e7df9=_0x144d0a['size'],_0x3505c0=await getDocs(collection(db,_0x122c9c)),_0x2b2ea6=_0x3505c0['size'];return document['getElementById']('player-count')['textContent']=_0x334080,document['getElementById']('match-count')['textContent']=_0xbf283a,document['getElementById']('pending-count')['textContent']=_0x4e7df9,document[_0x2239a0(0x2de)]('rejected-count')['textContent']=_0x2b2ea6,await createRankDistributionChart(),await createActivityChart(),console['log']('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0x56aaf3){console[_0x2239a0(0x28a)]('Error\x20loading\x20dashboard\x20data:',_0x56aaf3);throw _0x56aaf3;}}async function createRankDistributionChart(){const _0x5bd1d8=a2_0x2d6ae0;try{const _0x22dd56=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x5a65b7=await getDocs(_0x22dd56),_0x30328f={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x5a65b7['forEach'](_0x3afd00=>{const _0x569931=a2_0x5283,_0x5164e8=_0x3afd00['data'](),_0x499810=_0x5164e8[_0x569931(0x1d2)]||0x4b0;if(_0x499810>=0x7d0)_0x30328f[_0x569931(0x91)]++;else{if(_0x499810>=0x708)_0x30328f['Gold']++;else{if(_0x499810>=0x640)_0x30328f[_0x569931(0x2a0)]++;else{if(_0x499810>=0x578)_0x30328f['Bronze']++;else _0x30328f['Unranked']++;}}}});const _0x453b3e=document['getElementById']('rank-distribution-chart');charts[_0x5bd1d8(0x261)]&&charts[_0x5bd1d8(0x261)]['destroy'](),charts[_0x5bd1d8(0x261)]=new Chart(_0x453b3e,{'type':'doughnut','data':{'labels':Object[_0x5bd1d8(0x208)](_0x30328f),'datasets':[{'data':Object['values'](_0x30328f),'backgroundColor':['#808080',_0x5bd1d8(0x123),'#C0C0C0',_0x5bd1d8(0x20d),_0x5bd1d8(0x1cd)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x5bd1d8(0xc1)}},'title':{'display':!![],'text':currentLadder+_0x5bd1d8(0x291),'color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x482600){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x482600),document[_0x5bd1d8(0x2de)](_0x5bd1d8(0x15f))['innerHTML']=_0x5bd1d8(0x119);}}async function createActivityChart(){const _0x322708=a2_0x2d6ae0;try{const _0x1ca0ad=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x274260=collection(db,_0x1ca0ad),_0x3ec1b1=new Date();_0x3ec1b1['setDate'](_0x3ec1b1[_0x322708(0x203)]()-0x7);const _0x5b24ef=query(_0x274260,where('approvedAt','>=',_0x3ec1b1),orderBy('approvedAt','asc')),_0x1c299e=await getDocs(_0x5b24ef),_0xa56ff9=['Sunday',_0x322708(0x10a),'Tuesday','Wednesday','Thursday',_0x322708(0x115),_0x322708(0x293)],_0xc65658=_0xa56ff9['reduce']((_0x36fb3b,_0x19a33b)=>({..._0x36fb3b,[_0x19a33b]:0x0}),{});_0x1c299e[_0x322708(0x135)](_0x51e242=>{const _0x46c19a=_0x322708,_0x1e19af=_0x51e242['data']();if(_0x1e19af['approvedAt']){const _0x445165=_0xa56ff9[new Date(_0x1e19af['approvedAt'][_0x46c19a(0x1a1)]*0x3e8)['getDay']()];_0xc65658[_0x445165]++;}});const _0x1b93d6=document['getElementById'](_0x322708(0x28f));charts['activity']&&charts['activity'][_0x322708(0x14e)](),charts['activity']=new Chart(_0x1b93d6,{'type':_0x322708(0x90),'data':{'labels':_0xa56ff9,'datasets':[{'label':_0x322708(0xf7),'data':_0xa56ff9[_0x322708(0x104)](_0x44a146=>_0xc65658[_0x44a146]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':_0x322708(0x152),'borderColor':currentLadder==='D1'?'#d32f2f':_0x322708(0xff),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x322708(0xc1)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':_0x322708(0xc1)}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x34380b){console['error'](_0x322708(0x273),_0x34380b),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x4def23=a2_0x2d6ae0,_0x5155ac=document[_0x4def23(0x2de)]('players-table-body');if(!_0x5155ac)return;_0x5155ac[_0x4def23(0x7d)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x29a789='players';if(currentLadder==='D2')_0x29a789='playersD2';else currentLadder==='D3'&&(_0x29a789=_0x4def23(0x1c3));console['log']('Loading\x20players\x20from\x20'+_0x29a789+'\x20collection...');const _0xbc0ed9=collection(db,_0x29a789),_0x256273=query(_0xbc0ed9,orderBy(_0x4def23(0x1d2),'desc')),_0x4c050a=await getDocs(_0x256273);if(_0x4c050a['empty']){_0x5155ac['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x5155ac[_0x4def23(0x7d)]='';let _0x1c53e2=0x1;_0x4c050a[_0x4def23(0x135)](_0x123866=>{const _0x1387b4=_0x4def23,_0x173f53=_0x123866['data'](),_0xb402c0=getRankFromElo(_0x173f53[_0x1387b4(0x1d2)]||0x4b0),_0x98f225=getRankStyle(_0x173f53['eloRating']||0x4b0),_0x1dc5e8=document['createElement']('tr');_0x1dc5e8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x1c53e2+_0x1387b4(0x25e)+_0x98f225['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x173f53[_0x1387b4(0x269)]||'Unknown')+_0x1387b4(0x98)+(_0x173f53['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x98f225[_0x1387b4(0x211)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xb402c0+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x173f53[_0x1387b4(0x13d)]||0x0)+_0x1387b4(0xaf)+(_0x173f53[_0x1387b4(0x2a9)]||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x123866['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x123866['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x5155ac['appendChild'](_0x1dc5e8),_0x1c53e2++;}),setupPlayerActionButtons();}catch(_0x55beb8){console['error']('Error\x20loading\x20players:',_0x55beb8),_0x5155ac[_0x4def23(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x55beb8['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x20eee2){const _0x18abbe=a2_0x2d6ae0;if(_0x20eee2>=0x7d0)return _0x18abbe(0x91);if(_0x20eee2>=0x708)return _0x18abbe(0x21e);if(_0x20eee2>=0x640)return _0x18abbe(0x2a0);if(_0x20eee2>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x131c22=a2_0x2d6ae0;document['querySelectorAll']('.edit-btn')['forEach'](_0x384618=>{const _0x44cca4=a2_0x5283;_0x384618[_0x44cca4(0x78)]('click',async _0x380841=>{const _0x165047=_0x44cca4,_0x25dd26=_0x380841[_0x165047(0x18e)]['dataset']['id'];openEditPlayerModal(_0x25dd26);});}),document[_0x131c22(0x2d8)]('.delete-btn')['forEach'](_0xbf6b0c=>{_0xbf6b0c['addEventListener']('click',async _0xef33be=>{const _0x3482f7=a2_0x5283,_0x31868d=_0xef33be['currentTarget'][_0x3482f7(0x17d)]['id'];confirmDeletePlayer(_0x31868d);});});}async function openEditPlayerModal(_0x2b4db7){const _0x388ade=a2_0x2d6ae0;try{const _0x3130a9=currentLadder==='D1'?'players':'playersD2',_0x4166b1=doc(db,_0x3130a9,_0x2b4db7),_0x21f177=await getDoc(_0x4166b1);if(!_0x21f177[_0x388ade(0x264)]()){showNotification('Player\x20not\x20found',_0x388ade(0x28a));return;}const _0x1eafb3=_0x21f177['data'](),_0x3e8c84=document['getElementById']('edit-player-modal'),_0x5bc056=document['getElementById']('edit-username'),_0x57134a=document['getElementById']('edit-elo'),_0x46af26=document['getElementById']('edit-wins'),_0x2eb058=document['getElementById']('edit-losses');_0x5bc056['value']=_0x1eafb3['username']||'',_0x57134a['value']=_0x1eafb3['eloRating']||0x4b0,_0x46af26[_0x388ade(0x92)]=_0x1eafb3['wins']||0x0,_0x2eb058['value']=_0x1eafb3['losses']||0x0,_0x3e8c84['dataset']['playerId']=_0x2b4db7,_0x3e8c84['classList'][_0x388ade(0x288)]('active');}catch(_0x4084a4){console[_0x388ade(0x28a)]('Error\x20opening\x20edit\x20modal:',_0x4084a4),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x16577e=a2_0x2d6ae0;try{const _0x9b767b=document['getElementById']('edit-player-modal'),_0x265c12=_0x9b767b['dataset'][_0x16577e(0x7e)];if(!_0x265c12){showNotification(_0x16577e(0x8e),'error');return;}const _0x4cc541=document['getElementById']('edit-username'),_0x428439=document['getElementById']('edit-elo'),_0x6a6be3=document['getElementById']('edit-wins'),_0x53d8e7=document[_0x16577e(0x2de)]('edit-losses'),_0x37f73c=_0x4cc541['value']['trim'](),_0x30d599=parseInt(_0x428439['value']),_0x2de91c=parseInt(_0x6a6be3['value']),_0x438557=parseInt(_0x53d8e7[_0x16577e(0x92)]);if(!_0x37f73c||isNaN(_0x30d599)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO','error');return;}const _0x54d780=currentLadder==='D1'?_0x16577e(0x2bb):'playersD2',_0x28669e=doc(db,_0x54d780,_0x265c12),_0x1ffb55=await getDoc(_0x28669e),_0x10e211=_0x1ffb55['exists']()?_0x1ffb55['data']():{},_0x32d139=_0x10e211['eloRating']||0x4b0;await updateDoc(_0x28669e,{'username':_0x37f73c,'eloRating':_0x30d599,'wins':_0x2de91c||0x0,'losses':_0x438557||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x16577e(0x251)]});if(_0x30d599!==_0x32d139){const _0x53b985=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x53b985),{'player':_0x37f73c,'previousElo':_0x32d139,'newElo':_0x30d599,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x16577e(0x1a0));}catch(_0x29a97c){console[_0x16577e(0x28a)]('Error\x20updating\x20player:',_0x29a97c),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x29a97c['message'],_0x16577e(0x28a));}}function closeEditPlayerModal(){const _0x183f36=a2_0x2d6ae0,_0x5816a8=document[_0x183f36(0x2de)]('edit-player-modal');_0x5816a8[_0x183f36(0x9a)][_0x183f36(0x207)]('active'),_0x5816a8['dataset'][_0x183f36(0x7e)]='';}async function confirmDeletePlayer(_0x2e09ce){const _0x3474d8=a2_0x2d6ae0;if(confirm(_0x3474d8(0x24d)))try{const _0x575f98=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x575f98,_0x2e09ce)),loadPlayersData(),showNotification('Player\x20deleted\x20successfully',_0x3474d8(0x1a0));}catch(_0x19e2f2){console['error'](_0x3474d8(0x97),_0x19e2f2),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x19e2f2[_0x3474d8(0x11b)],'error');}}async function setupManagePlayersSection(){const _0x2bd65b=a2_0x2d6ae0,_0x2a9fca=document['getElementById'](_0x2bd65b(0x22a));_0x2a9fca&&_0x2a9fca['addEventListener'](_0x2bd65b(0x2b9),async _0x4fdcf5=>{const _0x2c94be=_0x2bd65b;_0x4fdcf5[_0x2c94be(0x1a5)](),await addNewPlayer();});const _0x57d43a=document['getElementById']('player-search');_0x57d43a&&_0x57d43a['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x45a862=document['getElementById'](_0x2bd65b(0x2d6));_0x45a862&&_0x45a862['addEventListener']('click',saveEditedPlayer);const _0x597d41=document['getElementById'](_0x2bd65b(0x1ea));_0x597d41&&_0x597d41[_0x2bd65b(0x78)]('click',closeEditPlayerModal);const _0x10d29e=document['getElementById']('edit-player-modal');_0x10d29e&&_0x10d29e['addEventListener']('click',_0x156c2d=>{_0x156c2d['target']===_0x10d29e&&closeEditPlayerModal();});const _0x420d7f=document['getElementById']('players-ladder-selector');_0x420d7f&&_0x420d7f['addEventListener'](_0x2bd65b(0x113),()=>{currentLadder=_0x420d7f['value'],loadPlayersData();});}async function addNewPlayer(){const _0x4f8dec=a2_0x2d6ae0;try{const _0x57fa23=document['getElementById']('new-player-username'),_0x2c1bda=document['getElementById']('new-player-elo'),_0xd97e7f=_0x57fa23['value']['trim'](),_0x3f627c=parseInt(_0x2c1bda['value'])||0x4b0;if(!_0xd97e7f){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0xd97e7f+'\x20with\x20ELO\x20'+_0x3f627c+_0x4f8dec(0x124)+currentLadder+'\x20ladder');let _0x5d65b6='players',_0x27bbd4=_0x4f8dec(0x299);if(currentLadder==='D2')_0x5d65b6=_0x4f8dec(0x174),_0x27bbd4='eloHistoryD2';else currentLadder==='D3'&&(_0x5d65b6='playersD3',_0x27bbd4=_0x4f8dec(0x233));const _0x3982df=query(collection(db,_0x5d65b6),where(_0x4f8dec(0x269),'==',_0xd97e7f)),_0x2f5a53=await getDocs(_0x3982df);if(!_0x2f5a53['empty']){alert(_0x4f8dec(0x186)+_0xd97e7f+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x1e8f74=auth['currentUser'],_0x86db94={'username':_0xd97e7f,'eloRating':_0x3f627c,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x1e8f74?_0x1e8f74[_0x4f8dec(0x251)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x5d65b6),_0x86db94),await addDoc(collection(db,_0x27bbd4),{'player':_0xd97e7f,'previousElo':0x4b0,'newElo':_0x3f627c,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x1e8f74?_0x1e8f74[_0x4f8dec(0x251)]:_0x4f8dec(0x13c),'gameMode':currentLadder}),_0x57fa23['value']='',_0x2c1bda['value']=_0x4f8dec(0x201),alert('Player\x20'+_0xd97e7f+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x4f8dec(0x196)),loadPlayersData();}catch(_0x3f6ce0){console['error']('Error\x20adding\x20player:',_0x3f6ce0),alert('Error\x20adding\x20player:\x20'+_0x3f6ce0['message']);}}document['addEventListener']('DOMContentLoaded',()=>{const _0x5f4f95=document['getElementById']('add-player-form');_0x5f4f95&&_0x5f4f95['addEventListener']('submit',_0x2ecce3=>{const _0x1b458a=a2_0x5283;_0x2ecce3[_0x1b458a(0x1a5)](),addNewPlayer();});});function filterPlayerTable(){const _0x5b4d4c=a2_0x2d6ae0,_0x59d4d6=document['getElementById']('player-search')['value']['toLowerCase'](),_0x445e66=document['querySelectorAll'](_0x5b4d4c(0x28b));let _0x3b3242=0x0;_0x445e66['forEach'](_0x1e07c6=>{const _0x46422b=_0x5b4d4c,_0x21be1c=_0x1e07c6[_0x46422b(0xaa)]('.username')?.['textContent'][_0x46422b(0x252)]()||'';_0x21be1c['includes'](_0x59d4d6)?(_0x1e07c6[_0x46422b(0x2ca)]['display']='',_0x3b3242++):_0x1e07c6['style']['display']=_0x46422b(0x23b);});const _0x1e5f34=document['getElementById']('no-results-message');_0x1e5f34&&(_0x3b3242===0x0&&_0x59d4d6!==''?_0x1e5f34[_0x5b4d4c(0x2ca)][_0x5b4d4c(0x1e1)]='block':_0x1e5f34[_0x5b4d4c(0x2ca)]['display']='none');}function debounce(_0x94dff0,_0xb4bb57){let _0x132201;return function(..._0x2f7ca8){const _0x510dc0=a2_0x5283;clearTimeout(_0x132201),_0x132201=setTimeout(()=>_0x94dff0[_0x510dc0(0x1c9)](this,_0x2f7ca8),_0xb4bb57);};}async function loadEloHistory(_0x3634c2=0x1){const _0x442a73=a2_0x2d6ae0,_0x1352c0=document[_0x442a73(0x2de)](_0x442a73(0x178)),_0x39dfcd=currentLadder['toLowerCase']();if(!_0x1352c0)return;_0x1352c0[_0x442a73(0x7d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x39981d=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':_0x442a73(0x233),_0x83c740=collection(db,_0x39981d);let _0xad0556;if(_0x3634c2>eloHistoryPagination[_0x39dfcd][_0x442a73(0x1b4)]&&eloHistoryPagination[_0x39dfcd]['lastVisible'])_0xad0556=query(_0x83c740,orderBy('timestamp',_0x442a73(0x27d)),startAfter(eloHistoryPagination[_0x39dfcd]['lastVisible']),limit(PAGE_SIZE));else _0x3634c2<eloHistoryPagination[_0x39dfcd]['page']&&eloHistoryPagination[_0x39dfcd][_0x442a73(0x205)]?_0xad0556=query(_0x83c740,orderBy('timestamp',_0x442a73(0x27d)),endBefore(eloHistoryPagination[_0x39dfcd]['firstVisible']),limitToLast(PAGE_SIZE)):_0xad0556=query(_0x83c740,orderBy(_0x442a73(0x16b),'desc'),limit(PAGE_SIZE));const _0x50958c=await getDocs(_0xad0556);if(_0x50958c['empty']){_0x1352c0[_0x442a73(0x7d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document['getElementById'](_0x39dfcd+_0x442a73(0x277))['textContent']='Page\x201';return;}eloHistoryPagination[_0x39dfcd]['page']=_0x3634c2,eloHistoryPagination[_0x39dfcd]['firstVisible']=_0x50958c[_0x442a73(0x29b)][0x0],eloHistoryPagination[_0x39dfcd]['lastVisible']=_0x50958c['docs'][_0x50958c['docs']['length']-0x1];const _0x310cb9=new Map();_0x1352c0['innerHTML']='';const _0x11f15c=async _0x4679f5=>{const _0x33bcd6=_0x442a73;if(typeof _0x4679f5!=='string'||_0x4679f5[_0x33bcd6(0x163)]<0x14||/[^a-zA-Z0-9-_]/[_0x33bcd6(0x16a)](_0x4679f5))return _0x4679f5;if(_0x310cb9['has'](_0x4679f5))return _0x310cb9[_0x33bcd6(0x2b6)](_0x4679f5);try{for(const _0x3963ad of['players',_0x33bcd6(0x174),'playersD3','nonParticipants']){const _0x242746=await getDoc(doc(db,_0x3963ad,_0x4679f5));if(_0x242746['exists']()&&_0x242746['data']()['username']){const _0x40b024=_0x242746[_0x33bcd6(0x290)]()['username'];return _0x310cb9['set'](_0x4679f5,_0x40b024),_0x40b024;}}return _0x4679f5;}catch(_0x3349f3){return console['warn'](_0x33bcd6(0x13e)+_0x4679f5+':',_0x3349f3),_0x4679f5;}};for(const _0x30d98d of _0x50958c['docs']){const _0x10e059=_0x30d98d['data'](),_0x16fe92=document['createElement']('tr'),_0x24400b=_0x10e059['timestamp']?new Date(_0x10e059['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x5083e3=_0x10e059[_0x442a73(0x2af)]-_0x10e059['previousElo'],_0x4b4e98=_0x5083e3>0x0?'positive-change':_0x5083e3<0x0?'negative-change':'',_0x1684d2=_0x5083e3>0x0?'+':'',_0x5a867b=_0x10e059['player']||_0x10e059['username']||_0x10e059[_0x442a73(0x15d)]||'N/A',_0x22c9e7=await _0x11f15c(_0x5a867b);_0x16fe92['innerHTML']=_0x442a73(0x15e)+_0x24400b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x22c9e7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x10e059['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x10e059['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4b4e98+'\x22>'+_0x1684d2+_0x5083e3+_0x442a73(0x140)+formatHistoryType(_0x10e059[_0x442a73(0x26c)])+_0x442a73(0x2b1)+(_0x10e059[_0x442a73(0x197)]||_0x10e059['promotedBy']||_0x10e059['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1352c0['appendChild'](_0x16fe92);}document[_0x442a73(0x2de)](_0x39dfcd+'-page-indicator')['textContent']='Page\x20'+_0x3634c2;const _0x37e77e=document[_0x442a73(0x2de)](_0x39dfcd+'-prev-page'),_0x40f819=document['getElementById'](_0x39dfcd+'-next-page');if(_0x37e77e)_0x37e77e['disabled']=_0x3634c2<=0x1;const _0x23db59=query(_0x83c740,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x39dfcd]['lastVisible']),limit(0x1)),_0x2eb63e=await getDocs(_0x23db59);if(_0x40f819)_0x40f819['disabled']=_0x2eb63e['empty'];}catch(_0x387ee9){console[_0x442a73(0x28a)](_0x442a73(0x1d0),_0x387ee9),_0x1352c0[_0x442a73(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x387ee9['message']+_0x442a73(0x1d6);}}function formatHistoryType(_0x12dc41){const _0x5407e7=a2_0x2d6ae0;switch(_0x12dc41){case _0x5407e7(0x2b2):return'Match\x20Result';case'promotion':return _0x5407e7(0x281);case'demotion':return'Demotion';case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x12dc41||_0x5407e7(0xae);}}function setupEloHistorySection(){const _0x4a1fde=a2_0x2d6ae0;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById'](_0x4a1fde(0x1df))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById'](_0x4a1fde(0x1ab))['addEventListener'](_0x4a1fde(0x137),()=>{const _0x5a3257=_0x4a1fde;loadEloHistory(eloHistoryPagination['d2'][_0x5a3257(0x1b4)]-0x1);}),document['getElementById'](_0x4a1fde(0x245))[_0x4a1fde(0x78)]('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x300fa4=document['getElementById']('d3-prev-page'),_0x5f2103=document['getElementById']('d3-next-page');_0x300fa4&&_0x300fa4[_0x4a1fde(0x78)](_0x4a1fde(0x137),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x5f2103&&_0x5f2103['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x520a3f=document['getElementById']('elo-history-search');_0x520a3f&&_0x520a3f['addEventListener'](_0x4a1fde(0x2d9),debounce(filterEloHistoryTable,0x12c));const _0x68bd08=document[_0x4a1fde(0x2de)](_0x4a1fde(0x7b));_0x68bd08&&_0x68bd08[_0x4a1fde(0x78)]('change',applyEloHistoryFilters);const _0x2d774e=document['getElementById']('reset-history-filters');_0x2d774e&&_0x2d774e[_0x4a1fde(0x78)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0xadeca0=a2_0x2d6ae0,_0x5a2f60=document[_0xadeca0(0x2de)]('elo-history-search')['value']['toLowerCase'](),_0x39cec0=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x1b9777=0x0;_0x39cec0['forEach'](_0x2a983f=>{const _0x39af8a=_0xadeca0;if(_0x2a983f['classList'][_0x39af8a(0x2d0)]('loading-cell')||_0x2a983f[_0x39af8a(0x9a)]['contains']('empty-state')||_0x2a983f['classList']['contains']('error-state'))return;const _0x2f4b74=_0x2a983f['querySelector']('.player')?.['textContent']['toLowerCase']()||'',_0x1c865e=_0x2a983f[_0x39af8a(0xaa)]('.type')?.['textContent'][_0x39af8a(0x252)]()||'',_0x14d2a7=_0x2a983f['querySelector'](_0x39af8a(0x18d))?.[_0x39af8a(0x1dc)]['toLowerCase']()||'';_0x2f4b74['includes'](_0x5a2f60)||_0x1c865e[_0x39af8a(0x2c3)](_0x5a2f60)||_0x14d2a7['includes'](_0x5a2f60)?(_0x2a983f['style']['display']='',_0x1b9777++):_0x2a983f['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x253cf1=a2_0x2d6ae0,_0x13307c=document[_0x253cf1(0x2de)]('history-start-date')['value'],_0x40ecb7=document[_0x253cf1(0x2de)]('history-end-date')['value'],_0x2fb217=document['getElementById']('history-type-filter')[_0x253cf1(0x92)],_0x3f78d4=currentLadder['toLowerCase']();eloHistoryPagination[_0x3f78d4]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x29af3c=document[_0x253cf1(0x2de)]('elo-history-table-body');_0x29af3c['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x31d588=currentLadder==='D1'?_0x253cf1(0x299):'eloHistoryD2',_0x38c855=collection(db,_0x31d588);let _0x5bf4b8=[orderBy('timestamp',_0x253cf1(0x27d))];if(_0x13307c){const _0x57a93e=new Date(_0x13307c);_0x57a93e['setHours'](0x0,0x0,0x0,0x0),_0x5bf4b8['push'](where('timestamp','>=',_0x57a93e));}if(_0x40ecb7){const _0x2cb850=new Date(_0x40ecb7);_0x2cb850['setHours'](0x17,0x3b,0x3b,0x3e7),_0x5bf4b8['push'](where('timestamp','<=',_0x2cb850));}_0x2fb217&&_0x2fb217!=='all'&&_0x5bf4b8[_0x253cf1(0x10f)](where('type','==',_0x2fb217));_0x5bf4b8['push'](limit(PAGE_SIZE));const _0x817fc1=query(_0x38c855,..._0x5bf4b8),_0x5e8121=await getDocs(_0x817fc1);!_0x5e8121['empty']&&(eloHistoryPagination[_0x3f78d4]['firstVisible']=_0x5e8121['docs'][0x0],eloHistoryPagination[_0x3f78d4][_0x253cf1(0xb3)]=_0x5e8121['docs'][_0x5e8121['docs']['length']-0x1]);_0x29af3c['innerHTML']='';if(_0x5e8121['empty']){_0x29af3c['innerHTML']=_0x253cf1(0x289);return;}_0x5e8121['forEach'](_0x2091eb=>{const _0x43a96d=_0x253cf1,_0x3f0723=_0x2091eb[_0x43a96d(0x290)](),_0x156de7=document['createElement']('tr'),_0x5a26ce=_0x3f0723[_0x43a96d(0x16b)]?new Date(_0x3f0723['timestamp']['seconds']*0x3e8)[_0x43a96d(0xc8)]():_0x43a96d(0x23e),_0x4399c5=_0x3f0723['newElo']-_0x3f0723['previousElo'],_0x4f1c02=_0x4399c5>0x0?'positive-change':_0x4399c5<0x0?'negative-change':'',_0x549c18=_0x4399c5>0x0?'+':'',_0x20c2fc=_0x3f0723['player']||_0x3f0723['username']||_0x3f0723[_0x43a96d(0x15d)]||_0x43a96d(0x23e);_0x156de7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x5a26ce+_0x43a96d(0xf9)+_0x20c2fc+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x3f0723['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x3f0723['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x4f1c02+'\x22>'+_0x549c18+_0x4399c5+_0x43a96d(0x140)+formatHistoryType(_0x3f0723['type'])+_0x43a96d(0x2b1)+(_0x3f0723['modifiedBy']||_0x3f0723[_0x43a96d(0x13f)]||_0x3f0723['demotedBy']||_0x43a96d(0x191))+_0x43a96d(0x129),_0x29af3c[_0x43a96d(0x222)](_0x156de7);}),document['getElementById'](_0x3f78d4+'-page-indicator')['textContent']='Page\x201';}catch(_0x2d2d45){console['error'](_0x253cf1(0x183),_0x2d2d45),_0x29af3c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x2d2d45['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x1467a5=a2_0x2d6ae0;document['getElementById']('history-start-date')[_0x1467a5(0x92)]='',document['getElementById']('history-end-date')['value']='',document['getElementById']('history-type-filter')['value']='all',document['getElementById']('elo-history-search')['value']='';const _0xde6dd4=currentLadder[_0x1467a5(0x252)]();eloHistoryPagination[_0xde6dd4]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function a2_0x5283(_0xf14e80,_0x397b7c){const _0x1f0118=a2_0x1d87();return a2_0x5283=function(_0x1ca3e3,_0x422587){_0x1ca3e3=_0x1ca3e3-0x75;let _0x1d875a=_0x1f0118[_0x1ca3e3];return _0x1d875a;},a2_0x5283(_0xf14e80,_0x397b7c);}function setupRankControls(){const _0x22b678=a2_0x2d6ae0,_0x2bd103=document['getElementById']('promote-player-btn'),_0x4af109=document['getElementById']('promote-modal'),_0x5cb427=document['getElementById']('promote-form');_0x2bd103&&_0x4af109&&_0x5cb427&&(_0x2bd103[_0x22b678(0x78)](_0x22b678(0x137),()=>{const _0x16967a=_0x22b678;_0x4af109['classList']['add'](_0x16967a(0xdb));}),_0x4af109['addEventListener'](_0x22b678(0x137),_0x5bd7a1=>{const _0x3a6b1a=_0x22b678;_0x5bd7a1['target']===_0x4af109&&_0x4af109['classList'][_0x3a6b1a(0x207)]('active');}),_0x5cb427['addEventListener']('submit',async _0x34c1de=>{const _0x2b2caa=_0x22b678;_0x34c1de['preventDefault']();const _0x14e36a=document['getElementById']('promote-username'),_0x10f42d=document[_0x2b2caa(0x2de)]('promote-ladder'),_0x15f820=_0x14e36a['value'][_0x2b2caa(0x118)](),_0x7f7dc4=_0x10f42d[_0x2b2caa(0x92)];if(!_0x15f820){showNotification('Please\x20enter\x20a\x20username','error');return;}try{await promotePlayer(_0x15f820,_0x7f7dc4),_0x4af109[_0x2b2caa(0x9a)]['remove']('active'),_0x14e36a[_0x2b2caa(0x92)]='';}catch(_0xb1856d){showNotification(_0xb1856d['message'],_0x2b2caa(0x28a));}}),document[_0x22b678(0x2de)]('cancel-promote-btn')['addEventListener']('click',()=>{const _0x189fc3=_0x22b678;_0x4af109[_0x189fc3(0x9a)]['remove']('active');}));const _0x204c6a=document[_0x22b678(0x2de)](_0x22b678(0x246)),_0x4ad5ae=document[_0x22b678(0x2de)](_0x22b678(0x2ac)),_0x160032=document['getElementById']('demote-form');_0x204c6a&&_0x4ad5ae&&_0x160032&&(_0x204c6a['addEventListener']('click',()=>{const _0xb837e2=_0x22b678;_0x4ad5ae['classList'][_0xb837e2(0x288)]('active');}),_0x4ad5ae['addEventListener']('click',_0xab4727=>{const _0x6efa8=_0x22b678;_0xab4727['target']===_0x4ad5ae&&_0x4ad5ae['classList'][_0x6efa8(0x207)]('active');}),_0x160032[_0x22b678(0x78)](_0x22b678(0x2b9),async _0x5c3072=>{const _0x2a938a=_0x22b678;_0x5c3072[_0x2a938a(0x1a5)]();const _0x163be8=document['getElementById'](_0x2a938a(0x2d1)),_0x5a0f8d=document['getElementById']('demote-ladder'),_0x9f277b=_0x163be8['value']['trim'](),_0xfec420=_0x5a0f8d['value'];if(!_0x9f277b){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x9f277b,_0xfec420),document[_0x2a938a(0x2de)]('demote-modal')[_0x2a938a(0x9a)]['remove'](_0x2a938a(0xdb)),document[_0x2a938a(0x2de)]('demote-username')['value']='';}catch(_0x23fdc3){console[_0x2a938a(0x28a)]('Error\x20in\x20demotion:',_0x23fdc3);}}));const _0x17b7c3=document['getElementById']('set-elo-btn'),_0x482118=document[_0x22b678(0x2de)]('set-elo-modal'),_0x39f593=document['getElementById']('set-elo-form');_0x17b7c3&&_0x482118&&_0x39f593&&(_0x17b7c3['addEventListener'](_0x22b678(0x137),()=>{const _0x349377=_0x22b678;_0x482118['classList'][_0x349377(0x288)]('active');}),_0x482118['addEventListener']('click',_0x56dea1=>{_0x56dea1['target']===_0x482118&&_0x482118['classList']['remove']('active');}),_0x39f593['addEventListener'](_0x22b678(0x2b9),async _0x3e3fc8=>{const _0x321e24=_0x22b678;_0x3e3fc8[_0x321e24(0x1a5)]();const _0x4f7c54=document[_0x321e24(0x2de)]('set-elo-username'),_0x5d5b2f=document['getElementById'](_0x321e24(0xbf));let _0x20f4c3;const _0x7fa668=document['getElementById']('set-elo-ladder'),_0x229218=document[_0x321e24(0xaa)](_0x321e24(0x114));if(_0x7fa668)_0x20f4c3=_0x7fa668['value'];else _0x229218?_0x20f4c3=_0x229218['value']:_0x20f4c3='D1';if(!_0x4f7c54||!_0x5d5b2f){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x36fcd5=_0x4f7c54['value'][_0x321e24(0x118)](),_0x389f42=parseInt(_0x5d5b2f['value']);if(!_0x36fcd5||isNaN(_0x389f42)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x321e24(0x28a));return;}try{await setCustomElo(_0x36fcd5,_0x389f42,_0x20f4c3),_0x482118['classList']['remove']('active'),_0x4f7c54[_0x321e24(0x92)]='',_0x5d5b2f[_0x321e24(0x92)]='';}catch(_0x423bb0){showNotification(_0x423bb0[_0x321e24(0x11b)],_0x321e24(0x28a));}}),document[_0x22b678(0x2de)]('cancel-set-elo-btn')[_0x22b678(0x78)](_0x22b678(0x137),()=>{_0x482118['classList']['remove']('active');}));const _0x2b1e77=document['getElementById']('set-role-modal'),_0xf89807=document['getElementById']('set-role-form');if(_0x2b1e77&&_0xf89807){_0x2b1e77['addEventListener'](_0x22b678(0x137),_0x25a5c5=>{_0x25a5c5['target']===_0x2b1e77&&closeModalHandler();}),_0xf89807['addEventListener'](_0x22b678(0x2b9),async _0x5ea9a9=>{const _0x194850=_0x22b678;_0x5ea9a9['preventDefault']();const _0x5ad512=document[_0x194850(0x2de)]('role-username'),_0x37ac39=document['getElementById']('role-name'),_0x5a3743=document['getElementById']('role-color'),_0x11b104=_0x5ad512['value']['trim'](),_0x1a68f9=_0x37ac39['value']['trim'](),_0xd11d57=_0x5a3743['value'];if(!_0x11b104){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x11b104,_0x1a68f9,_0xd11d57),closeModalHandler(),loadUsersWithRoles();}catch(_0xfe6afb){}});const _0xdafd62=document[_0x22b678(0x2de)]('cancel-role-btn');_0xdafd62&&(_0xdafd62['removeEventListener']('click',closeModalHandler),_0xdafd62['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x57db9e,_0x1d1e30){const _0x588e2e=a2_0x2d6ae0;try{console['log']('Attempting\x20to\x20promote\x20'+_0x57db9e+'\x20in\x20'+_0x1d1e30+_0x588e2e(0x1ee));const _0x307152=auth['currentUser'];if(!_0x307152)throw new Error(_0x588e2e(0x19a));const _0x2e6fe9=_0x1d1e30==='D2'?'playersD2':'players',_0x5c24c6=_0x1d1e30==='D2'?_0x588e2e(0x254):'eloHistory';console['log'](_0x588e2e(0x1ff)+_0x2e6fe9);const _0x370eed=collection(db,_0x2e6fe9),_0x1268e7=query(_0x370eed,where(_0x588e2e(0x269),'==',_0x57db9e)),_0x2dde4b=await getDocs(_0x1268e7);if(_0x2dde4b[_0x588e2e(0x219)]){alert('Player\x20not\x20found\x20in\x20'+_0x1d1e30+_0x588e2e(0x1ee));throw new Error(_0x588e2e(0x2c1)+_0x1d1e30+_0x588e2e(0x1ee));}const _0x5b990a=_0x2dde4b['docs'][0x0],_0x2e4a70=_0x5b990a['data'](),_0x2bc2f0=_0x2e4a70['eloRating']||0x4b0,_0x4648b3=_0x5b990a['id'];console['log'](_0x588e2e(0x248)+_0x2bc2f0);const _0x480d05=[{'name':'Bronze','elo':0x578},{'name':_0x588e2e(0x2a0),'elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x26f9df=_0x480d05[_0x588e2e(0x25d)](_0x1c532c=>_0x1c532c['elo']>_0x2bc2f0);if(!_0x26f9df){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1d1e30+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x1d1e30+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x26f9df['name']+'\x20('+_0x26f9df['elo']+')'),await updateDoc(doc(db,_0x2e6fe9,_0x5b990a['id']),{'eloRating':_0x26f9df[_0x588e2e(0x18a)],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x307152['email']||'admin'}),await addDoc(collection(db,_0x5c24c6),{'player':_0x57db9e,'previousElo':_0x2bc2f0,'newElo':_0x26f9df['elo'],'timestamp':serverTimestamp(),'type':_0x588e2e(0x1a9),'rankAchieved':_0x26f9df['name'],'promotedBy':_0x307152['email']||_0x588e2e(0x13c),'gameMode':_0x1d1e30});try{const {promotionManager:_0x383352}=await import('./promotions.js'),_0x6efee8=_0x383352[_0x588e2e(0x128)](_0x2bc2f0),_0xaeb7c8=_0x26f9df['name'];await _0x383352['sendPromotionNotification'](_0x4648b3,_0x57db9e,_0x2bc2f0,_0x26f9df[_0x588e2e(0x18a)],_0x6efee8,_0xaeb7c8,'promotion',{'displayName':_0x57db9e,'source':_0x588e2e(0x13c),'adminUser':_0x307152['email'],'ladder':_0x1d1e30}),console[_0x588e2e(0x10b)]('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x49c39a){console['error'](_0x588e2e(0x1f2),_0x49c39a);}return alert(_0x588e2e(0x1b3)+_0x57db9e+'\x20to\x20'+_0x26f9df['name']+'\x20('+_0x26f9df[_0x588e2e(0x18a)]+')'),currentLadder===_0x1d1e30&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x3e2906){console[_0x588e2e(0x28a)](_0x588e2e(0xd1),_0x3e2906),alert('Error\x20promoting\x20player:\x20'+_0x3e2906['message']);throw _0x3e2906;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x547265=a2_0x2d6ae0,_0x151455=document['getElementById'](_0x547265(0x2ab));_0x151455&&_0x151455['addEventListener']('submit',async _0x345a90=>{const _0x4e96a6=_0x547265;_0x345a90['preventDefault']();const _0x46165a=document['getElementById'](_0x4e96a6(0x2a2))['value']['trim'](),_0x489467=document['querySelector'](_0x4e96a6(0x117))['value'];if(!_0x46165a){alert('Please\x20enter\x20a\x20username');return;}try{await promotePlayer(_0x46165a,_0x489467),document['getElementById']('promote-modal')[_0x4e96a6(0x9a)][_0x4e96a6(0x207)]('active'),document['getElementById']('promote-username')['value']='';}catch(_0x4d7c2e){console[_0x4e96a6(0x28a)]('Error\x20in\x20promotion:',_0x4d7c2e);}});});async function demotePlayer(_0x3900d2,_0x244a92){const _0x105525=a2_0x2d6ae0;try{console['log'](_0x105525(0x101)+_0x3900d2+'\x20in\x20'+_0x244a92+'\x20ladder');const _0xda1f7e=auth[_0x105525(0x1e3)];if(!_0xda1f7e)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x373a99=_0x244a92==='D2'?'playersD2':'players',_0x627be6=_0x244a92==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x373a99);const _0x25941e=collection(db,_0x373a99),_0x2356b4=query(_0x25941e,where('username','==',_0x3900d2)),_0x5ac3b2=await getDocs(_0x2356b4);if(_0x5ac3b2[_0x105525(0x219)]){alert('Player\x20not\x20found\x20in\x20'+_0x244a92+'\x20ladder');throw new Error(_0x105525(0x2c1)+_0x244a92+'\x20ladder');}const _0x4eca99=_0x5ac3b2['docs'][0x0],_0x3c1fed=_0x4eca99['data'](),_0xc123df=_0x3c1fed[_0x105525(0x1d2)]||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0xc123df);const _0x3d94aa=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x33e33c=_0x3d94aa['find'](_0x1426a3=>_0x1426a3['elo']<_0xc123df);if(!_0x33e33c){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x244a92+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x244a92+'\x20ladder');}console[_0x105525(0x10b)]('Demoting\x20player\x20to\x20'+_0x33e33c['name']+'\x20('+_0x33e33c['elo']+')'),await updateDoc(doc(db,_0x373a99,_0x4eca99['id']),{'eloRating':_0x33e33c['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0xda1f7e['email']||'admin'}),await addDoc(collection(db,_0x627be6),{'player':_0x3900d2,'previousElo':_0xc123df,'newElo':_0x33e33c['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x33e33c['name'],'demotedBy':_0xda1f7e['email']||'admin','gameMode':_0x244a92});try{const {promotionManager:_0x4674c8}=await import(_0x105525(0x146)),_0x628ba0=_0x4674c8['getRankName'](_0xc123df),_0x1af345=_0x33e33c[_0x105525(0x192)];await _0x4674c8['sendPromotionNotification'](_0x4eca99['id'],_0x3900d2,_0xc123df,_0x33e33c['elo'],_0x628ba0,_0x1af345,_0x105525(0x189),{'displayName':_0x3900d2,'source':'admin','adminUser':_0xda1f7e['email'],'ladder':_0x244a92}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x10b60f){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x10b60f);}return alert('Successfully\x20demoted\x20'+_0x3900d2+_0x105525(0x124)+_0x33e33c['name']+'\x20('+_0x33e33c[_0x105525(0x18a)]+')'),currentLadder===_0x244a92&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x41589d){console[_0x105525(0x28a)](_0x105525(0x12c),_0x41589d),alert('Error\x20demoting\x20player:\x20'+_0x41589d['message']);throw _0x41589d;}}document['addEventListener'](a2_0x2d6ae0(0x1bd),()=>{const _0xa74e37=a2_0x2d6ae0,_0x2801e1=document[_0xa74e37(0x2de)]('demote-form');_0x2801e1&&_0x2801e1['addEventListener']('submit',async _0x2fe4bb=>{const _0x5d9050=_0xa74e37;_0x2fe4bb['preventDefault']();const _0x273acd=document['getElementById']('demote-username')['value'][_0x5d9050(0x118)](),_0xf95b95=document[_0x5d9050(0xaa)](_0x5d9050(0x28d))['value'];if(!_0x273acd){alert(_0x5d9050(0x1da));return;}try{await demotePlayer(_0x273acd,_0xf95b95),document['getElementById'](_0x5d9050(0x2ac))['classList']['remove'](_0x5d9050(0xdb)),document['getElementById']('demote-username')[_0x5d9050(0x92)]='';}catch(_0x1d3623){console[_0x5d9050(0x28a)]('Error\x20in\x20demotion:',_0x1d3623);}});});async function setCustomElo(_0xa33d69,_0xe85e9a,_0x50b4eb){const _0x1582c3=a2_0x2d6ae0;try{const _0x209500=auth['currentUser'];if(!_0x209500||!isAdmin(_0x209500[_0x1582c3(0x251)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x255784=_0x50b4eb==='D2'?'playersD2':'players',_0x1dfca5=_0x50b4eb==='D2'?'eloHistoryD2':_0x1582c3(0x299),_0x256c63=collection(db,_0x255784),_0xe339ae=query(_0x256c63,where(_0x1582c3(0x269),'==',_0xa33d69)),_0x2733fb=await getDocs(_0xe339ae);if(_0x2733fb[_0x1582c3(0x219)])throw new Error('Player\x20not\x20found\x20in\x20'+_0x50b4eb+_0x1582c3(0x1ee));const _0x444817=_0x2733fb['docs'][0x0],_0x5186ea=_0x444817[_0x1582c3(0x290)](),_0x191525=_0x5186ea[_0x1582c3(0x1d2)]||0x4b0,_0x13e21e=writeBatch(db);_0x13e21e['update'](doc(db,_0x255784,_0x444817['id']),{'eloRating':_0xe85e9a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x209500[_0x1582c3(0x251)]});const _0x266d12=doc(collection(db,_0x1dfca5));return _0x13e21e[_0x1582c3(0x236)](_0x266d12,{'player':_0xa33d69,'previousElo':_0x191525,'newElo':_0xe85e9a,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x209500['email'],'gameMode':_0x50b4eb}),await _0x13e21e['commit'](),showNotification('ELO\x20rating\x20for\x20'+_0xa33d69+'\x20was\x20updated\x20from\x20'+_0x191525+'\x20to\x20'+_0xe85e9a,'success'),currentLadder===_0x50b4eb&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x23c059){console['error']('Error\x20setting\x20custom\x20ELO:',_0x23c059);throw _0x23c059;}}async function setUserRole(_0x4c3ce4,_0x8e32b4,_0x430efe){const _0x464155=a2_0x2d6ae0;try{const _0x5d8940=auth['currentUser'];if(!_0x5d8940||!isAdmin(_0x5d8940[_0x464155(0x251)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x44eb3c=_0x8e32b4?_0x8e32b4['trim']():null,_0x46064e=_0x44eb3c?_0x430efe||'#808080':null,[_0x33382b,_0x25cf4d]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x4c3ce4))),getDocs(query(collection(db,_0x464155(0x174)),where(_0x464155(0x269),'==',_0x4c3ce4)))]),_0x4df15f=[];if(!_0x33382b['empty'])_0x4df15f['push']({'ref':_0x33382b['docs'][0x0]['ref'],'source':'D1'});if(!_0x25cf4d[_0x464155(0x219)])_0x4df15f['push']({'ref':_0x25cf4d['docs'][0x0]['ref'],'source':'D2'});if(_0x4df15f['length']===0x0){const [_0x516afc,_0x9b8819]=await Promise['all']([getDocs(query(collection(db,_0x464155(0x1ef)),where('username','==',_0x4c3ce4))),getDocs(query(collection(db,'userProfiles'),where(_0x464155(0x269),'==',_0x4c3ce4)))]);if(!_0x516afc['empty'])_0x4df15f[_0x464155(0x10f)]({'ref':_0x516afc['docs'][0x0]['ref'],'source':_0x464155(0x24f)});if(!_0x9b8819[_0x464155(0x219)])_0x4df15f['push']({'ref':_0x9b8819[_0x464155(0x29b)][0x0]['ref'],'source':'UserProfile'});}if(_0x4df15f['length']===0x0)throw new Error('User\x20\x22'+_0x4c3ce4+_0x464155(0x20a));const _0x4c76d6=writeBatch(db);_0x4df15f['forEach'](_0x9de3d1=>{const _0x1553d7=_0x464155;console['log'](_0x1553d7(0x266)+_0x4c3ce4+_0x1553d7(0x27b)+_0x9de3d1['source']),!_0x44eb3c?_0x4c76d6['update'](_0x9de3d1['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x4c76d6['update'](_0x9de3d1[_0x1553d7(0xd3)],{'roleName':_0x44eb3c,'roleColor':_0x46064e,'roleAssignedBy':_0x5d8940[_0x1553d7(0x251)],'roleAssignedAt':serverTimestamp()});}),await _0x4c76d6['commit']();const _0x312600=_0x44eb3c?_0x464155(0xb7)+_0x44eb3c+'\x22\x20set':'Role\x20removed';return showNotification(_0x312600+'\x20for\x20user\x20\x22'+_0x4c3ce4+'\x22','success'),!![];}catch(_0x6ab6a3){console['error']('Error\x20setting\x20user\x20role:',_0x6ab6a3),showNotification('Error:\x20'+_0x6ab6a3['message'],'error');throw _0x6ab6a3;}}function showNotification(_0x55ba3b,_0x1d10ee='info'){const _0x13adfa=a2_0x2d6ae0,_0x163a71=document['createElement']('div');_0x163a71[_0x13adfa(0x14d)]='notification\x20'+_0x1d10ee,_0x163a71[_0x13adfa(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x1d10ee)+_0x13adfa(0x1e6)+_0x55ba3b+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document[_0x13adfa(0x139)][_0x13adfa(0x222)](_0x163a71),setTimeout(()=>{const _0x377d12=_0x13adfa;_0x163a71['classList'][_0x377d12(0x288)]('active');},0xa);const _0x15d700=setTimeout(()=>{closeNotification(_0x163a71);},0x1388);_0x163a71['querySelector']('.close-notification')['addEventListener'](_0x13adfa(0x137),()=>{clearTimeout(_0x15d700),closeNotification(_0x163a71);});}function getNotificationIcon(_0x3bfa82){const _0x14552e=a2_0x2d6ae0;switch(_0x3bfa82){case'success':return _0x14552e(0x2c6);case'error':return'fa-exclamation-circle';case _0x14552e(0x29a):return'fa-exclamation-triangle';case _0x14552e(0xa2):default:return'fa-info-circle';}}function closeNotification(_0xe62565){_0xe62565['classList']['remove']('active'),setTimeout(()=>{_0xe62565['remove']();},0x12c);}function setupUserRolesSection(){const _0x254d45=a2_0x2d6ae0,_0x46b101=document['getElementById'](_0x254d45(0x172));_0x46b101&&_0x46b101[_0x254d45(0x78)]('click',function(){const _0x334087=_0x254d45;this['classList']['add'](_0x334087(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x334087(0x1a7)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x1133e7=>{const _0x585009=_0x334087;console['error'](_0x585009(0x258),_0x1133e7),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xc80c5=_0x585009;this[_0xc80c5(0x7d)]=_0xc80c5(0x2cc);},0xbb8);});});const _0x206574=document['getElementById'](_0x254d45(0xec));_0x206574&&_0x206574['addEventListener']('click',()=>{const _0x5d08bc=document['getElementById']('set-role-modal');_0x5d08bc&&_0x5d08bc['classList']['add']('active');});const _0x425387=document['getElementById']('user-search');_0x425387&&_0x425387['addEventListener'](_0x254d45(0x2d9),debounce(filterUsersTable,0x12c));const _0x4623b8=document['getElementById'](_0x254d45(0x2b0));_0x4623b8&&_0x4623b8[_0x254d45(0x78)]('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x267410=a2_0x2d6ae0,_0xb25379=document['getElementById'](_0x267410(0x7c));if(!_0xb25379)return;_0xb25379[_0x267410(0x7d)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x4d4409,_0x550177,_0x6d46e3,_0x2cef83]=await Promise[_0x267410(0x239)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x24b4eb=new Map();function _0x518bcd(_0x3936c0,_0x30d958){_0x3936c0['forEach'](_0x1614dd=>{const _0x39e2e8=a2_0x5283,_0x5d1ad8=_0x1614dd['data']();if(!_0x5d1ad8['username'])return;if(!_0x24b4eb['has'](_0x5d1ad8[_0x39e2e8(0x269)]))_0x24b4eb['set'](_0x5d1ad8['username'],{'username':_0x5d1ad8['username'],'roleName':_0x5d1ad8[_0x39e2e8(0xef)]||null,'roleColor':_0x5d1ad8[_0x39e2e8(0x244)]||null,'roleAssignedBy':_0x5d1ad8['roleAssignedBy']||null,'roleAssignedAt':_0x5d1ad8['roleAssignedAt']||null,'sources':[_0x30d958]});else{const _0x4d8c98=_0x24b4eb['get'](_0x5d1ad8['username']);_0x5d1ad8['roleName']&&(!_0x4d8c98['roleName']||_0x30d958==='D1'||_0x30d958==='D2')&&(_0x4d8c98[_0x39e2e8(0xef)]=_0x5d1ad8['roleName'],_0x4d8c98[_0x39e2e8(0x244)]=_0x5d1ad8['roleColor'],_0x4d8c98['roleAssignedBy']=_0x5d1ad8['roleAssignedBy'],_0x4d8c98['roleAssignedAt']=_0x5d1ad8['roleAssignedAt']),!_0x4d8c98['sources']['includes'](_0x30d958)&&_0x4d8c98[_0x39e2e8(0x19c)]['push'](_0x30d958);}});}_0x518bcd(_0x4d4409,'D1'),_0x518bcd(_0x550177,'D2'),_0x518bcd(_0x6d46e3,_0x267410(0x17e)),_0x518bcd(_0x2cef83,'Profile');const _0x4f9c62=Array['from'](_0x24b4eb['values']())['sort']((_0x281909,_0x34a5c2)=>_0x281909['username']['localeCompare'](_0x34a5c2['username']));if(_0x4f9c62['length']===0x0){_0xb25379[_0x267410(0x7d)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0xb25379[_0x267410(0x7d)]='',_0x4f9c62['forEach'](_0x605531=>{const _0xebfd10=_0x267410,_0x12d9a0=document['createElement']('tr');_0x12d9a0['dataset'][_0xebfd10(0x269)]=_0x605531['username'],_0x12d9a0['dataset'][_0xebfd10(0xef)]=_0x605531['roleName']||'',_0x12d9a0[_0xebfd10(0x17d)]['roleColor']=_0x605531[_0xebfd10(0x244)]||'#808080';const _0x46745b=_0x605531[_0xebfd10(0x29e)]?new Date(_0x605531['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x51b367=_0x605531['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x605531['roleColor']+';\x20color:\x20'+getContrastColor(_0x605531[_0xebfd10(0x244)])+';\x22>'+_0x605531['roleName']+_0xebfd10(0x19e):'<span\x20class=\x22no-role\x22>None</span>';_0x12d9a0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x605531[_0xebfd10(0x269)]+'\x20<span\x20class=\x22user-source\x22>('+_0x605531['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x51b367+_0xebfd10(0x12b)+(_0x605531['roleAssignedBy']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x46745b+_0xebfd10(0x2ce)+_0x605531['username']+_0xebfd10(0x1bb)+(_0x605531['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x605531['username']+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0xebfd10(0x129),_0xb25379[_0xebfd10(0x222)](_0x12d9a0);}),document[_0x267410(0x2d8)]('.edit-role-btn')['forEach'](_0x218fd8=>{const _0x474345=_0x267410;_0x218fd8['addEventListener'](_0x474345(0x137),()=>{const _0x36bdd9=_0x474345,_0x168ad3=_0x218fd8[_0x36bdd9(0x17d)]['username'];openRoleEditModal(_0x168ad3);});}),document['querySelectorAll'](_0x267410(0x1f7))['forEach'](_0x105212=>{_0x105212['addEventListener']('click',()=>{const _0x378962=a2_0x5283,_0xcd7cbf=_0x105212['dataset'][_0x378962(0x269)];confirm(_0x378962(0x14b)+_0xcd7cbf+'?')&&setUserRole(_0xcd7cbf,null,null)['then'](()=>loadUsersWithRoles())[_0x378962(0xda)](_0x48c9ed=>console['error']('Error\x20removing\x20role:',_0x48c9ed));});});}catch(_0x40b9cf){console[_0x267410(0x28a)]('Error\x20loading\x20users:',_0x40b9cf),_0xb25379['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0xe6e62b){const _0x77387=a2_0x2d6ae0;console['log'](_0x77387(0x94),_0xe6e62b);const _0x228305=document['getElementById'](_0x77387(0x259)),_0x133b6d=document['getElementById']('role-username'),_0x21b63a=document[_0x77387(0x2de)]('user-role');if(!_0x228305){console[_0x77387(0x28a)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log'](_0x77387(0x1ba),_0x228305);_0x133b6d?(_0x133b6d['value']=_0xe6e62b,console['log'](_0x77387(0x1f1)+_0xe6e62b)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x5881b7=document['querySelector'](_0x77387(0x9d)+_0xe6e62b+'\x22]');if(_0x5881b7&&_0x21b63a){const _0x51d794=_0x5881b7['dataset']['role'];_0x21b63a[_0x77387(0x92)]=_0x51d794===_0x77387(0x23b)?'':_0x51d794,console['log']('Role\x20select\x20set\x20to:\x20'+_0x21b63a[_0x77387(0x92)]+'\x20(based\x20on\x20data-role:\x20'+_0x51d794+')');}else{if(!_0x5881b7)console['warn']('Table\x20row\x20for\x20user\x20'+_0xe6e62b+'\x20not\x20found.');if(!_0x21b63a)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x21b63a)_0x21b63a[_0x77387(0x92)]='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x228305['classList']['add']('active');const _0x35757e=document['getElementById']('cancel-role-btn');_0x35757e?(console['log']('Attaching\x20cancel\x20button\x20listener.'),_0x35757e['removeEventListener']('click',closeModalHandler),_0x35757e['addEventListener'](_0x77387(0x137),closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log'](_0x77387(0x2db)),_0x228305[_0x77387(0x125)]('click',closeModalBackgroundHandler),_0x228305[_0x77387(0x78)](_0x77387(0x137),closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0xc1316a){const _0x25059a=a2_0x2d6ae0;_0xc1316a[_0x25059a(0x19d)]===this&&closeModalHandler();}function closeModalHandler(){const _0x8372fc=a2_0x2d6ae0,_0x252127=document['getElementById']('set-role-modal');_0x252127&&(_0x252127['classList']['remove']('active'),_0x252127[_0x8372fc(0x125)]('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0xe54d0e=a2_0x2d6ae0,_0x5e25fe=document['getElementById']('user-search')?.['value']['toLowerCase']()||'',_0x45b6c2=document[_0xe54d0e(0x2de)](_0xe54d0e(0x2b0))?.['value']||'all',_0x3d645d=document['querySelectorAll'](_0xe54d0e(0x1a2));let _0x180b99=0x0;_0x3d645d['forEach'](_0x38e13e=>{const _0x241106=_0xe54d0e;if(_0x38e13e['querySelector'](_0x241106(0x20e))||_0x38e13e[_0x241106(0xaa)]('.empty-state')||_0x38e13e['querySelector']('.error-state'))return;const _0x5f3a0c=_0x38e13e['dataset']['username']?.[_0x241106(0x252)]()||'',_0x574196=_0x38e13e['dataset']['role']||_0x241106(0x23b),_0x23482c=_0x5f3a0c['includes'](_0x5e25fe),_0x3a934a=_0x45b6c2==='all'||_0x574196===_0x45b6c2;_0x23482c&&_0x3a934a?(_0x38e13e[_0x241106(0x2ca)]['display']='',_0x180b99++):_0x38e13e[_0x241106(0x2ca)]['display']='none';});if(_0x180b99===0x0&&_0x3d645d['length']>0x0){const _0x3e813e=document['getElementById'](_0xe54d0e(0x7c));if(_0x3e813e){if(!_0x3e813e['querySelector']('.no-results')){const _0x4dcbcc=document['createElement']('tr');_0x4dcbcc['classList'][_0xe54d0e(0x288)]('no-results'),_0x4dcbcc['innerHTML']=_0xe54d0e(0x202),_0x3e813e[_0xe54d0e(0x222)](_0x4dcbcc);}}}else{const _0x2a7bc6=document[_0xe54d0e(0xaa)](_0xe54d0e(0x220));_0x2a7bc6&&_0x2a7bc6['remove']();}}function setupManageArticlesSection(){const _0x452b7e=a2_0x2d6ae0,_0x4d6a65=document['getElementById'](_0x452b7e(0x237));_0x4d6a65&&_0x4d6a65['addEventListener'](_0x452b7e(0x137),function(){const _0x37ff84=_0x452b7e;this['classList']['add'](_0x37ff84(0x206)),this[_0x37ff84(0x7d)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x267036=_0x37ff84;this['classList']['remove'](_0x267036(0x206)),this['innerHTML']=_0x267036(0x23a);})['catch'](_0x23e705=>{const _0x42281b=_0x37ff84;console['error']('Error\x20loading\x20articles:',_0x23e705),this[_0x42281b(0x9a)][_0x42281b(0x207)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x541197=document['getElementById']('create-new-article-btn');_0x541197?(console[_0x452b7e(0x10b)](_0x452b7e(0x255)),_0x541197[_0x452b7e(0x2ca)]['display']=_0x452b7e(0x132),_0x541197[_0x452b7e(0x78)]('click',()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x50daf9=document[_0x452b7e(0x2de)]('article-form');_0x50daf9&&_0x50daf9['addEventListener']('submit',_0x5590c2=>{_0x5590c2['preventDefault'](),saveArticle();});const _0x2ed07a=document['getElementById'](_0x452b7e(0x96));_0x2ed07a&&_0x2ed07a['addEventListener']('click',()=>{closeArticleModal();});const _0x1a2994=document[_0x452b7e(0xaa)](_0x452b7e(0x169));_0x1a2994&&_0x1a2994['addEventListener'](_0x452b7e(0x137),()=>{closeArticleModal();});const _0x390854=document['getElementById'](_0x452b7e(0x283));_0x390854&&_0x390854[_0x452b7e(0x78)](_0x452b7e(0x137),_0x2e979b=>{_0x2e979b['target']===_0x390854&&closeArticleModal();});}async function loadArticles(){const _0x546656=a2_0x2d6ae0,_0x1731c7=document['getElementById']('articles-table-body');if(!_0x1731c7)return;_0x1731c7[_0x546656(0x7d)]='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x3d3c5e=collection(db,'articles'),_0x2103f3=query(_0x3d3c5e,orderBy('createdAt','desc')),_0x523487=await getDocs(_0x2103f3);if(_0x523487['empty']){_0x1731c7['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x1731c7['innerHTML']='',_0x523487['forEach'](_0x4e87f3=>{const _0x5c12ce=_0x546656,_0x612a7f=_0x4e87f3['data'](),_0x484206=document[_0x5c12ce(0xeb)]('tr'),_0x184d83=_0x612a7f['createdAt']?new Date(_0x612a7f[_0x5c12ce(0x214)][_0x5c12ce(0x1a1)]*0x3e8)['toLocaleString']():'N/A';_0x484206['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x612a7f['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x612a7f['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x184d83+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x4e87f3['id']+_0x5c12ce(0xb2)+_0x4e87f3['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1731c7['appendChild'](_0x484206);}),setupArticleActionButtons();}catch(_0x4f1d8f){console['error'](_0x546656(0x195),_0x4f1d8f),_0x1731c7[_0x546656(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x4f1d8f['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x15e7c1=a2_0x2d6ae0;document[_0x15e7c1(0x2d8)]('.edit-article-btn')['forEach'](_0x1baf9d=>{_0x1baf9d['addEventListener']('click',async _0x250f74=>{const _0x58e478=a2_0x5283,_0x1219da=_0x250f74['currentTarget'][_0x58e478(0x17d)]['id'];openArticleModal(_0x1219da);});}),document[_0x15e7c1(0x2d8)]('.delete-article-btn')['forEach'](_0x10544b=>{const _0x7a75e4=_0x15e7c1;_0x10544b[_0x7a75e4(0x78)]('click',async _0x485a82=>{const _0xa1cf36=_0x7a75e4,_0x46e286=_0x485a82['currentTarget'][_0xa1cf36(0x17d)]['id'];confirmDeleteArticle(_0x46e286);});});}function openArticleModal(_0x20ffa1=null){const _0xaeab96=a2_0x2d6ae0,_0x26a6b0=document['getElementById']('article-modal'),_0x33c3f1=document[_0xaeab96(0x2de)]('article-modal-title'),_0x47223c=document['getElementById']('article-form'),_0x4e296d=document[_0xaeab96(0x2de)]('article-id');_0x47223c['reset'](),_0x4e296d[_0xaeab96(0x92)]='';if(_0x20ffa1)_0x33c3f1[_0xaeab96(0x1dc)]='Edit\x20Article',_0x4e296d['value']=_0x20ffa1,loadArticleData(_0x20ffa1);else{_0x33c3f1['textContent']='Create\x20Article';const _0x5f43fa=auth['currentUser'];if(_0x5f43fa){const _0x559a83=document[_0xaeab96(0x2de)]('article-author');if(_0x559a83&&_0x5f43fa['displayName'])_0x559a83['value']=_0x5f43fa['displayName'];else _0x559a83&&(_0x559a83['value']=_0x5f43fa['email']);}}_0x26a6b0['classList'][_0xaeab96(0x288)]('active');}async function loadArticleData(_0x4f36f9){const _0x52d3db=a2_0x2d6ae0;try{const _0x32bced=doc(db,'articles',_0x4f36f9),_0x4d9669=await getDoc(_0x32bced);if(!_0x4d9669['exists']()){showNotification(_0x52d3db(0xab),'error');return;}const _0x4a8a2b=_0x4d9669[_0x52d3db(0x290)]();document['getElementById'](_0x52d3db(0xbc))['value']=_0x4a8a2b['title']||'',document['getElementById']('article-author')['value']=_0x4a8a2b['author']||'',document['getElementById'](_0x52d3db(0x257))[_0x52d3db(0x92)]=_0x4a8a2b[_0x52d3db(0xe0)]||'',document['getElementById'](_0x52d3db(0x2a1))[_0x52d3db(0x92)]=_0x4a8a2b[_0x52d3db(0xca)]||'';}catch(_0x140767){console['error']('Error\x20loading\x20article\x20data:',_0x140767),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x409d66=a2_0x2d6ae0;try{const _0x4bc627=document['getElementById'](_0x409d66(0x1e8))[_0x409d66(0x92)],_0x585263=document[_0x409d66(0x2de)]('article-title')['value'][_0x409d66(0x118)](),_0x413c22=document['getElementById'](_0x409d66(0x1eb))['value']['trim'](),_0x2086be=document['getElementById']('article-image-url')['value']['trim'](),_0xf8eccd=document['getElementById'](_0x409d66(0x2a1))['value']['trim']();if(!_0x585263||!_0xf8eccd){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x55de87=auth['currentUser'];if(!_0x55de87){showNotification(_0x409d66(0x88),'error');return;}const _0x37fbdb={'title':_0x585263,'author':_0x413c22,'imageUrl':_0x2086be||null,'content':_0xf8eccd,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x55de87[_0x409d66(0x251)]};!_0x4bc627?(_0x37fbdb['createdAt']=serverTimestamp(),_0x37fbdb['createdBy']=_0x55de87['email'],await addDoc(collection(db,_0x409d66(0x294)),_0x37fbdb),showNotification(_0x409d66(0x227),'success')):(await updateDoc(doc(db,'articles',_0x4bc627),_0x37fbdb),showNotification(_0x409d66(0x22b),'success')),closeArticleModal(),loadArticles();}catch(_0x304d83){console['error'](_0x409d66(0x21d),_0x304d83),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x304d83['message'],_0x409d66(0x28a));}}function closeArticleModal(){const _0x2c364c=a2_0x2d6ae0,_0x4f0c84=document[_0x2c364c(0x2de)]('article-modal');_0x4f0c84&&_0x4f0c84['classList']['remove']('active');}async function confirmDeleteArticle(_0x26d51b){const _0xcea17a=a2_0x2d6ae0;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0xcea17a(0x294),_0x26d51b)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x184a3a){console[_0xcea17a(0x28a)]('Error\x20deleting\x20article:',_0x184a3a),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x184a3a['message'],'error');}}function setupTrophyManagementSection(){const _0x287661=a2_0x2d6ae0,_0x4bb687=document[_0x287661(0x2de)](_0x287661(0x21a));_0x4bb687&&_0x4bb687[_0x287661(0x78)]('click',function(){const _0x1d0436=_0x287661;this[_0x1d0436(0x9a)]['add'](_0x1d0436(0x206)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x50adac=document['getElementById']('assign-trophy-image');_0x50adac&&(_0x50adac['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x1d0436(0x1a7)](()=>{const _0x341ff3=_0x1d0436;this['classList']['remove']('loading'),this['innerHTML']=_0x341ff3(0x1c5);})['catch'](_0x2a1b1b=>{const _0x4e8b8b=_0x1d0436;console[_0x4e8b8b(0x28a)]('Error\x20loading\x20trophies:',_0x2a1b1b),this['classList']['remove']('loading'),this[_0x4e8b8b(0x7d)]=_0x4e8b8b(0x2dd),setTimeout(()=>{const _0x4ae210=_0x4e8b8b;this['innerHTML']=_0x4ae210(0x1c5);},0xbb8);});});const _0x1f8422=document[_0x287661(0x2de)]('create-new-trophy-btn');_0x1f8422&&_0x1f8422['addEventListener']('click',()=>{openTrophyModal();});const _0x12dd4f=document['getElementById']('trophy-form');_0x12dd4f&&_0x12dd4f['addEventListener']('submit',_0x1a965b=>{_0x1a965b['preventDefault'](),saveTrophyDefinition();});const _0x47805d=document['getElementById']('cancel-trophy-btn');_0x47805d&&_0x47805d['addEventListener'](_0x287661(0x137),()=>{closeTrophyModal();});document['querySelectorAll'](_0x287661(0x1e4))['forEach'](_0x408b9a=>{const _0x1622f3=_0x287661;_0x408b9a[_0x1622f3(0x78)](_0x1622f3(0x137),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0xbf3405=document['getElementById'](_0x287661(0x15a));_0xbf3405&&_0xbf3405[_0x287661(0x78)](_0x287661(0x137),_0x18c5c5=>{const _0x29daee=_0x287661;_0x18c5c5[_0x29daee(0x19d)]===_0xbf3405&&closeTrophyModal();});const _0x419646=document[_0x287661(0x2de)](_0x287661(0x93));_0x419646&&_0x419646['addEventListener']('click',_0x3daacb=>{_0x3daacb['target']===_0x419646&&closeAssignTrophyModal();});const _0x4de2ce=document['getElementById'](_0x287661(0xc3));_0x4de2ce&&_0x4de2ce['addEventListener']('submit',_0xc40e44=>{_0xc40e44['preventDefault'](),assignTrophyToPlayer();});const _0x25c7ec=document['getElementById']('cancel-assign-btn');_0x25c7ec&&_0x25c7ec['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x2d4aed=document['getElementById'](_0x287661(0x249));_0x2d4aed&&(_0x2d4aed['addEventListener'](_0x287661(0x2d9),updateTrophyImagePreview),_0x2d4aed['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x50cc37=a2_0x2d6ae0,_0x169dbd=document['getElementById']('trophy-image-url')['value']['trim'](),_0x2a6c7f=document[_0x50cc37(0x2de)]('trophy-image-preview');if(!_0x2a6c7f){const _0x5977bd=document[_0x50cc37(0x2de)]('trophy-image-url')['closest'](_0x50cc37(0x155)),_0x5ccd5f=document['createElement']('div');_0x5ccd5f['id']=_0x50cc37(0x1bc),_0x5ccd5f['className']=_0x50cc37(0xc7),_0x5977bd['appendChild'](_0x5ccd5f);const _0xd94f58=document[_0x50cc37(0xeb)](_0x50cc37(0x1a8));_0xd94f58['id']=_0x50cc37(0x2c4),_0xd94f58['alt']='Trophy\x20Preview',_0xd94f58[_0x50cc37(0x164)]=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x5ccd5f['appendChild'](_0xd94f58);}const _0x3174e0=document['getElementById']('trophy-preview-img');_0x169dbd?(_0x3174e0['src']=_0x169dbd,_0x3174e0[_0x50cc37(0x2ca)]['display']='block',_0x3174e0['classList']['remove'](_0x50cc37(0x28a))):(_0x3174e0['src']=DEFAULT_TROPHY_IMAGE,_0x3174e0[_0x50cc37(0x2ca)]['display']='block');}async function loadTrophyDefinitions(){const _0x1ad7a3=a2_0x2d6ae0,_0x5efeb7=document['getElementById'](_0x1ad7a3(0xa6));if(!_0x5efeb7)return;_0x5efeb7['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x1ad655=collection(db,'trophyDefinitions'),_0x5433c=query(_0x1ad655,orderBy('createdAt','desc')),_0x2fe490=await getDocs(_0x5433c);if(_0x2fe490[_0x1ad7a3(0x219)]){_0x5efeb7[_0x1ad7a3(0x7d)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x5efeb7['innerHTML']='',_0x2fe490[_0x1ad7a3(0x135)](_0x5a9230=>{const _0x1b07f9=_0x1ad7a3,_0x5e5a3f=_0x5a9230['data'](),_0x155f00=document['createElement']('tr'),_0x278589=_0x5e5a3f[_0x1b07f9(0x214)]?new Date(_0x5e5a3f['createdAt']['seconds']*0x3e8)['toLocaleString']():_0x1b07f9(0x23e);_0x155f00[_0x1b07f9(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x5e5a3f['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5e5a3f['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x5e5a3f['name']||'Untitled\x20Trophy')+_0x1b07f9(0x2b7)+(_0x5e5a3f[_0x1b07f9(0x231)]||_0x1b07f9(0x10e))+'\x22>'+(_0x5e5a3f['rarity']||_0x1b07f9(0x10e))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x278589+_0x1b07f9(0x228)+_0x5a9230['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x5a9230['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x5a9230['id']+_0x1b07f9(0x298),_0x5efeb7['appendChild'](_0x155f00);}),setupTrophyActionButtons();}catch(_0x35c94a){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x35c94a),_0x5efeb7[_0x1ad7a3(0x7d)]=_0x1ad7a3(0xbd)+_0x35c94a[_0x1ad7a3(0x11b)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0xc40988=a2_0x2d6ae0;document['querySelectorAll'](_0xc40988(0x159))[_0xc40988(0x135)](_0x38825b=>{const _0x4b6b26=_0xc40988;_0x38825b['addEventListener'](_0x4b6b26(0x137),_0x2df626=>{const _0x126e40=_0x4b6b26,_0x19b977=_0x2df626[_0x126e40(0x18e)]['dataset']['id'];openTrophyModal(_0x19b977);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x20ad84=>{const _0x54658a=_0xc40988;_0x20ad84['addEventListener'](_0x54658a(0x137),_0x954719=>{const _0x3e6ca3=_0x954719['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x3e6ca3);});}),document[_0xc40988(0x2d8)](_0xc40988(0x29f))[_0xc40988(0x135)](_0x48f72a=>{const _0x4d3b15=_0xc40988;_0x48f72a[_0x4d3b15(0x78)]('click',_0x5dac2a=>{const _0x64acaa=_0x5dac2a['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x64acaa);});});}function openTrophyModal(_0x466db8=null){const _0x11fcc7=a2_0x2d6ae0,_0x5e732f=document['getElementById']('trophy-modal'),_0xe095dd=document['getElementById']('trophy-modal-title'),_0x34e8c9=document['getElementById']('trophy-form'),_0x23c07b=document['getElementById']('trophy-id');_0x34e8c9['reset'](),_0x23c07b[_0x11fcc7(0x92)]='';const _0x1a6130=document['getElementById']('trophy-preview-img');_0x1a6130&&(_0x1a6130['src']=DEFAULT_TROPHY_IMAGE,_0x1a6130['classList']['remove']('error')),_0x466db8?(_0xe095dd['textContent']='Edit\x20Trophy',_0x23c07b['value']=_0x466db8,loadTrophyData(_0x466db8)):_0xe095dd['textContent']='Create\x20New\x20Trophy',_0x5e732f['classList']['add']('active');}async function loadTrophyData(_0x3b1c68){const _0xd63bb5=a2_0x2d6ae0;try{const _0x4d07d4=doc(db,_0xd63bb5(0x1af),_0x3b1c68),_0x3fd5a0=await getDoc(_0x4d07d4);if(!_0x3fd5a0['exists']()){showNotification('Trophy\x20not\x20found',_0xd63bb5(0x28a));return;}const _0x1ea151=_0x3fd5a0['data']();document['getElementById']('trophy-name')['value']=_0x1ea151['name']||'',document['getElementById']('trophy-description')[_0xd63bb5(0x92)]=_0x1ea151['description']||'',document['getElementById'](_0xd63bb5(0x249))['value']=_0x1ea151['image']||'',document[_0xd63bb5(0x2de)]('trophy-rarity')['value']=_0x1ea151['rarity']||_0xd63bb5(0x10e),updateTrophyImagePreview();}catch(_0x57e8ee){console['error'](_0xd63bb5(0x274),_0x57e8ee),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x32346b=a2_0x2d6ae0;try{const _0x19e4dd=document['getElementById'](_0x32346b(0x28e))['value'],_0x3f9620=document['getElementById']('trophy-name')['value']['trim'](),_0x5e95cf=document['getElementById']('trophy-description')[_0x32346b(0x92)]['trim'](),_0xcf1e42=document[_0x32346b(0x2de)](_0x32346b(0x249))['value']['trim'](),_0x29db1f=document['getElementById']('trophy-rarity')[_0x32346b(0x92)];if(!_0x3f9620||!_0x5e95cf||!_0xcf1e42){showNotification('All\x20fields\x20are\x20required','error');return;}const _0xe5880=auth['currentUser'];if(!_0xe5880){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x64df97={'name':_0x3f9620,'description':_0x5e95cf,'image':_0xcf1e42,'rarity':_0x29db1f,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0xe5880[_0x32346b(0x251)]};!_0x19e4dd?(_0x64df97['createdAt']=serverTimestamp(),_0x64df97[_0x32346b(0xcc)]=_0xe5880['email'],await addDoc(collection(db,'trophyDefinitions'),_0x64df97),showNotification(_0x32346b(0x20b),'success')):(await updateDoc(doc(db,'trophyDefinitions',_0x19e4dd),_0x64df97),showNotification('Trophy\x20updated\x20successfully',_0x32346b(0x1a0))),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x432faf){console[_0x32346b(0x28a)]('Error\x20saving\x20trophy:',_0x432faf),showNotification(_0x32346b(0x2c7)+_0x432faf['message'],'error');}}function closeTrophyModal(){const _0x36fe53=a2_0x2d6ae0,_0x37bdc3=document[_0x36fe53(0x2de)](_0x36fe53(0x15a));_0x37bdc3&&_0x37bdc3['classList']['remove']('active');}async function confirmDeleteTrophy(_0x54de1f){const _0x8f2af4=a2_0x2d6ae0;if(!_0x54de1f){console[_0x8f2af4(0x28a)]('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x2fb452=auth['currentUser'];if(!_0x2fb452){showNotification(_0x8f2af4(0x11d),_0x8f2af4(0x28a));return;}console['log']('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x54de1f),await deleteDoc(doc(db,'trophyDefinitions',_0x54de1f)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x2ccfd4){console[_0x8f2af4(0x28a)]('Error\x20deleting\x20trophy\x20definition:',_0x2ccfd4),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x2ccfd4['message'],'error');}}async function openAssignTrophyModal(_0x52a5f8){const _0x41613a=a2_0x2d6ae0;try{const _0x4585aa=doc(db,_0x41613a(0x1af),_0x52a5f8),_0x47cd5e=await getDoc(_0x4585aa);if(!_0x47cd5e['exists']()){showNotification('Trophy\x20not\x20found',_0x41613a(0x28a));return;}const _0x10c719=_0x47cd5e['data']();document['getElementById']('assign-trophy-id')['value']=_0x52a5f8,document['getElementById'](_0x41613a(0xfd))['value']=_0x10c719['name'],document['getElementById']('assign-trophy-image')[_0x41613a(0x17b)]=_0x10c719[_0x41613a(0x1d7)]||DEFAULT_TROPHY_IMAGE,document[_0x41613a(0x2de)](_0x41613a(0x1f0))['textContent']=_0x10c719['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x10c719['description']||_0x41613a(0x1be);const _0x26acae=document['getElementById']('assign-trophy-rarity');_0x26acae['textContent']=_0x10c719[_0x41613a(0x231)]||'common',_0x26acae['className']=_0x41613a(0x1ec)+(_0x10c719['rarity']||'common');const _0x457a8b=document['getElementById'](_0x41613a(0x93));_0x457a8b['classList']['add'](_0x41613a(0xdb));}catch(_0x33580d){console['error'](_0x41613a(0x2c5),_0x33580d),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x41613a(0x28a));}}function closeAssignTrophyModal(){const _0x4378ce=a2_0x2d6ae0,_0x11d8dc=document['getElementById'](_0x4378ce(0x93));_0x11d8dc&&_0x11d8dc['classList'][_0x4378ce(0x207)](_0x4378ce(0xdb));}async function assignTrophyToPlayer(){const _0x51abe6=a2_0x2d6ae0;try{const _0x44b466=document['getElementById']('assign-trophy-id')[_0x51abe6(0x92)],_0x23bdf0=document[_0x51abe6(0x2de)]('assign-trophy-name')[_0x51abe6(0x92)],_0x30809e=document['getElementById'](_0x51abe6(0x256))[_0x51abe6(0x92)]['trim'](),_0x1f790e=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x44b466||!_0x30809e){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0x51abe6(0x28a));return;}const _0x340518=auth['currentUser'];if(!_0x340518){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x32d00f=null,_0x2a5164=null,_0x48ef18=null;if(_0x1f790e==='non-participant'){const _0x142eea=collection(db,'nonParticipants'),_0x35d4a4=query(_0x142eea,where('username','==',_0x30809e)),_0x3a106c=await getDocs(_0x35d4a4);!_0x3a106c['empty']&&(_0x32d00f=_0x3a106c['docs'][0x0],_0x2a5164=_0x32d00f['id'],_0x48ef18=_0x32d00f['data']());}else{const _0x12a9c7=_0x1f790e==='D1'?'players':_0x1f790e==='D2'?'playersD2':_0x51abe6(0x1c3),_0x53bc91=collection(db,_0x12a9c7),_0x556588=query(_0x53bc91,where('username','==',_0x30809e)),_0xdc37c=await getDocs(_0x556588);!_0xdc37c[_0x51abe6(0x219)]&&(_0x32d00f=_0xdc37c['docs'][0x0],_0x2a5164=_0x32d00f['id'],_0x48ef18=_0x32d00f['data']());}if(!_0x32d00f){showNotification('Player\x20\x22'+_0x30809e+_0x51abe6(0x1ed)+(_0x1f790e==='non-participant'?_0x51abe6(0x1e5):_0x1f790e+_0x51abe6(0x1ee)),_0x51abe6(0x28a));return;}const _0x10a482=collection(db,'userTrophies'),_0x5ad89a=query(_0x10a482,where(_0x51abe6(0x15d),'==',_0x2a5164),where('trophyId','==',_0x44b466)),_0x1a7c31=await getDocs(_0x5ad89a);if(!_0x1a7c31['empty']){showNotification('Player\x20\x22'+_0x30809e+'\x22\x20already\x20has\x20this\x20trophy',_0x51abe6(0x29a));return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x2a5164,'playerUsername':_0x30809e,'trophyId':_0x44b466,'awardedAt':serverTimestamp(),'awardedBy':_0x340518['email'],'ladder':_0x1f790e}),showNotification('Trophy\x20\x22'+_0x23bdf0+'\x22\x20awarded\x20to\x20'+_0x30809e,'success'),closeAssignTrophyModal();}catch(_0x28d26f){console['error']('Error\x20assigning\x20trophy:',_0x28d26f),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x28d26f[_0x51abe6(0x11b)],'error');}}function setupInactivePlayersSection(){const _0x2c1198=a2_0x2d6ae0,_0x2d3b61=document['getElementById']('inactive-days-filter');_0x2d3b61&&_0x2d3b61['addEventListener'](_0x2c1198(0x113),function(){const _0x1341ad=_0x2c1198,_0xfe717c=document['getElementById'](_0x1341ad(0x102));if(_0xfe717c)_0xfe717c['click']();});const _0x1e983c=document[_0x2c1198(0xaa)]('.ladder-switch\x20input[value=\x22D1\x22]'),_0x5ca510=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x1e983c&&_0x5ca510&&(_0x1e983c['addEventListener']('change',function(){const _0x266d94=_0x2c1198;if(this['checked']){currentLadder='D1';if(document['getElementById']('inactive-players')[_0x266d94(0x2ca)][_0x266d94(0x1e1)]!==_0x266d94(0x23b)){const _0x4f664b=document['getElementById']('load-inactive-players-data');if(_0x4f664b)_0x4f664b['click']();}}}),_0x5ca510[_0x2c1198(0x78)]('change',function(){const _0x345723=_0x2c1198;if(this['checked']){currentLadder='D2';if(document[_0x345723(0x2de)](_0x345723(0xad))['style']['display']!=='none'){const _0x3760f2=document['getElementById'](_0x345723(0x102));if(_0x3760f2)_0x3760f2['click']();}}}));const _0x5fb308=document['getElementById']('inactive-players-search');_0x5fb308&&_0x5fb308[_0x2c1198(0x78)]('input',debounce(function(){const _0x43d7dd=_0x2c1198,_0x103f11=_0x5fb308['value']['toLowerCase'](),_0x59e3ad=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x59e3ad[_0x43d7dd(0x135)](_0x10037c=>{const _0x4a830d=_0x43d7dd;if(_0x10037c[_0x4a830d(0xaa)](_0x4a830d(0x20e))||_0x10037c[_0x4a830d(0xaa)](_0x4a830d(0x15c))||_0x10037c['querySelector']('.error-state'))return;const _0x36a94c=_0x10037c[_0x4a830d(0xcb)][0x0]?.[_0x4a830d(0x1dc)]['toLowerCase']()||'',_0x1c54f0=_0x10037c['cells'][0x5]?.['textContent'][_0x4a830d(0x252)]()||'';_0x36a94c[_0x4a830d(0x2c3)](_0x103f11)||_0x1c54f0[_0x4a830d(0x2c3)](_0x103f11)?_0x10037c['style']['display']='':_0x10037c['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0xc1f8ef){const _0x4f8843=_0x2c1198;if(_0xc1f8ef['target']['closest']('.view-player-btn')){const _0x4e1475=_0xc1f8ef['target'][_0x4f8843(0x16e)](_0x4f8843(0x1a3)),_0x5dd7b0=_0x4e1475['dataset']['username'];_0x5dd7b0&&alert(_0x4f8843(0xfb)+_0x5dd7b0+_0x4f8843(0x1fa));}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x23f450=a2_0x2d6ae0,_0x45ee98=document['getElementById']('inactive-players-table-body');if(!_0x45ee98)return;_0x45ee98['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x5c8b86=document['getElementById']('inactive-days-filter'),_0x1b5c85=_0x5c8b86?parseInt(_0x5c8b86[_0x23f450(0x92)])||0x0:0x0,_0x5e62fb=collection(db,currentLadder==='D1'?'players':_0x23f450(0x174)),_0x318855=await getDocs(_0x5e62fb);if(_0x318855['empty']){_0x45ee98['innerHTML']=_0x23f450(0x2cb);return;}const _0xb19b2b=[];_0x318855[_0x23f450(0x135)](_0x1f8a62=>{const _0x33b081=_0x23f450,_0x27ebf0=_0x1f8a62['data']();_0xb19b2b[_0x33b081(0x10f)]({..._0x27ebf0,'id':_0x1f8a62['id'],'username':_0x27ebf0['username']||'Unknown\x20Player'});}),console['log']('Found\x20'+_0xb19b2b[_0x23f450(0x163)]+_0x23f450(0x1f6)+currentLadder+'\x20ladder');const _0x128875=currentLadder==='D1'?_0x23f450(0x223):'approvedMatchesD2',_0x5a9944=_0xb19b2b['map'](async _0x3e6f5c=>{const _0x2771e5=_0x23f450;try{const _0x275c84=collection(db,_0x128875),_0x16a9e4=query(_0x275c84,or(where('winnerUsername','==',_0x3e6f5c[_0x2771e5(0x269)]),where(_0x2771e5(0x111),'==',_0x3e6f5c['username'])),orderBy('approvedAt','desc'),limit(0x1)),_0x34e149=await getDocs(_0x16a9e4);if(!_0x34e149['empty']){const _0x4ab9e6=_0x34e149[_0x2771e5(0x29b)][0x0]['data'](),_0x269857=_0x4ab9e6['approvedAt']?new Date(_0x4ab9e6['approvedAt'][_0x2771e5(0x1a1)]*0x3e8):null,_0x2188af=new Date(),_0x2d326e=_0x269857?Math['floor']((_0x2188af-_0x269857)/(0x3e8*0x3c*0x3c*0x18)):null,_0x58ea2f=_0x4ab9e6[_0x2771e5(0x11c)]===_0x3e6f5c[_0x2771e5(0x269)]?_0x4ab9e6[_0x2771e5(0x111)]:_0x4ab9e6[_0x2771e5(0x11c)],_0x2ee54b=_0x4ab9e6['winnerUsername']===_0x3e6f5c['username']?'Won':'Lost';return{..._0x3e6f5c,'lastMatch':{'date':_0x269857?_0x269857['toLocaleDateString']():_0x2771e5(0x23e),'opponent':_0x58ea2f||'Unknown','result':_0x2ee54b,'timestamp':_0x269857||new Date(0x0),'daysSinceMatch':_0x2d326e||Number['MAX_SAFE_INTEGER']}};}else return{..._0x3e6f5c,'lastMatch':{'date':'Never\x20played','opponent':_0x2771e5(0x23e),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number[_0x2771e5(0xfa)]}};}catch(_0x594446){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x3e6f5c['username']+':',_0x594446),{..._0x3e6f5c,'lastMatch':{'date':_0x2771e5(0x226),'opponent':'Error','result':_0x2771e5(0x226),'timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x43452d=await Promise['all'](_0x5a9944);_0x43452d[_0x23f450(0x2ae)]((_0x676c6,_0x5e9c10)=>_0x5e9c10['lastMatch']['daysSinceMatch']-_0x676c6['lastMatch']['daysSinceMatch']);_0x1b5c85>0x0&&(_0x43452d=_0x43452d['filter'](_0x1fbe65=>_0x1fbe65['lastMatch'][_0x23f450(0x2d3)]>=_0x1b5c85));_0x45ee98['innerHTML']='';if(_0x43452d[_0x23f450(0x163)]===0x0){_0x45ee98[_0x23f450(0x7d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x43452d['forEach'](_0x38e6e6=>{const _0x2f5e5a=_0x23f450,_0x1ea21a=document['createElement']('tr'),_0x393531=_0x38e6e6['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x38e6e6[_0x2f5e5a(0xe1)]['daysSinceMatch']>0xe?_0x2f5e5a(0x23f):'';_0x1ea21a['className']=_0x393531,_0x1ea21a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x38e6e6['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38e6e6['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x38e6e6['lastMatch'][_0x2f5e5a(0xa3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38e6e6[_0x2f5e5a(0xe1)]['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x2f5e5a(0x23e):_0x38e6e6['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x38e6e6[_0x2f5e5a(0xe1)]['date']==='Never\x20played'?'No\x20matches\x20found':_0x38e6e6['lastMatch']['result']+_0x2f5e5a(0x238)+_0x38e6e6['lastMatch']['opponent'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x38e6e6[_0x2f5e5a(0x269)]+_0x2f5e5a(0xa9),_0x45ee98['appendChild'](_0x1ea21a);}),console['log']('Displaying\x20'+_0x43452d['length']+'\x20inactive\x20players');}catch(_0x15dd35){console[_0x23f450(0x28a)](_0x23f450(0xd9),_0x15dd35),_0x45ee98[_0x23f450(0x7d)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x15dd35[_0x23f450(0x11b)]+_0x23f450(0xea);}}function setupHighlightButtons(){const _0x41d62f=a2_0x2d6ae0;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x632b44=document['getElementById']('create-match-highlight-btn');_0x632b44&&_0x632b44['addEventListener']('click',function(){const _0x3d1dae=a2_0x5283;console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal(_0x3d1dae(0x180));});const _0x14ba03=document['getElementById']('create-creator-highlight-btn');_0x14ba03&&_0x14ba03['addEventListener']('click',function(){const _0x1e47e4=a2_0x5283;console[_0x1e47e4(0x10b)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x1e47e4(0x20c));});const _0x1e319a=document[_0x41d62f(0x2de)]('create-achievement-highlight-btn');_0x1e319a&&_0x1e319a['addEventListener']('click',function(){const _0x13ded4=_0x41d62f;console[_0x13ded4(0x10b)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x347bbd='match'){const _0x252557=a2_0x2d6ae0;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x347bbd);const _0x452b4e=document[_0x252557(0x2de)]('highlight-modal'),_0x30c6c7=document[_0x252557(0x2de)]('highlight-form'),_0x2da3ca=document[_0x252557(0x2de)]('highlight-modal-title'),_0x5d3b48=document['getElementById']('highlight-id');if(!_0x452b4e||!_0x30c6c7||!_0x2da3ca){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x30c6c7[_0x252557(0x26e)](),_0x5d3b48['value']='';const _0x5d3092=[_0x252557(0x180),'creator','achievement'],_0x52e242=!_0x5d3092['includes'](_0x347bbd);if(_0x52e242){const _0x21896a=_0x347bbd;_0x5d3b48['value']=_0x21896a,_0x2da3ca[_0x252557(0x1dc)]='Loading...',loadHighlightDataAdmin(_0x21896a);}else{const _0x35ba2e=_0x347bbd;document[_0x252557(0x2de)]('highlight-type')[_0x252557(0x92)]=_0x35ba2e,_0x2da3ca['textContent']=_0x252557(0x10d)+getHighlightTypeName(_0x35ba2e),toggleHighlightFields(_0x35ba2e);const _0x25f017=auth[_0x252557(0x1e3)];_0x25f017&&document['getElementById'](_0x252557(0x22e))&&(document['getElementById'](_0x252557(0x22e))['value']=_0x25f017['displayName']||_0x25f017['email']);}_0x452b4e[_0x252557(0x9a)]['add']('active');}function toggleHighlightFields(_0x437d0b){const _0x1ea7fb=a2_0x2d6ae0;console['log']('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x437d0b);const _0x32daa9=document[_0x1ea7fb(0x2de)](_0x1ea7fb(0x182));if(!_0x32daa9)return;const _0x22b58e=_0x32daa9['querySelectorAll']('.form-group,\x20.form-row');_0x22b58e['forEach'](_0x207973=>_0x207973['style']['display']='none');const _0x46d9c7=document[_0x1ea7fb(0x2de)](_0x1ea7fb(0xd7));if(_0x46d9c7)_0x46d9c7['style'][_0x1ea7fb(0x1e1)]='none';const _0x130d55=['highlight-title-container','highlight-description-container','highlight-submitted-by-container'];_0x130d55['forEach'](_0x43d3ad=>{const _0xa56a97=_0x1ea7fb,_0x392a3e=document[_0xa56a97(0x2de)](_0x43d3ad);if(_0x392a3e)_0x392a3e['style']['display']='block';});if(_0x437d0b==='match'){const _0x314a5e=['highlight-video-container','highlight-match-info-container','highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x314a5e['forEach'](_0x34af00=>{const _0x1288ca=_0x1ea7fb,_0x3c1285=document['getElementById'](_0x34af00);_0x3c1285&&(_0x34af00==='highlight-players-container'?_0x3c1285['style'][_0x1288ca(0x1e1)]='flex':_0x3c1285['style'][_0x1288ca(0x1e1)]=_0x1288ca(0x132));});const _0x200be0=document['getElementById']('highlight-video-id');if(_0x200be0){_0x200be0['required']=!![];const _0x28c547=_0x200be0['previousElementSibling'];if(_0x28c547)_0x28c547['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x46d9c7)_0x46d9c7['style']['display']=_0x1ea7fb(0x132);updateHighlightVideoPreview();}else{if(_0x437d0b===_0x1ea7fb(0x20c)){const _0xa29ad8=[_0x1ea7fb(0xcf),_0x1ea7fb(0x1c8),'highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0xa29ad8['forEach'](_0xacf3ca=>{const _0x169a84=_0x1ea7fb,_0x978098=document['getElementById'](_0xacf3ca);if(_0x978098)_0x978098['style']['display']=_0x169a84(0x132);});const _0x193a41=document[_0x1ea7fb(0x2de)]('highlight-video-id');if(_0x193a41){_0x193a41['required']=![];const _0x266205=_0x193a41[_0x1ea7fb(0xe7)];if(_0x266205)_0x266205['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0x437d0b==='achievement'){const _0x38ff7c=[_0x1ea7fb(0x232),'highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x38ff7c['forEach'](_0x592351=>{const _0x9c4661=document['getElementById'](_0x592351);if(_0x9c4661)_0x9c4661['style']['display']='block';});const _0x7342f2=document[_0x1ea7fb(0x2de)]('highlight-video-id');if(_0x7342f2){_0x7342f2[_0x1ea7fb(0x265)]=![];const _0xb91021=_0x7342f2['previousElementSibling'];if(_0xb91021)_0xb91021['innerHTML']=_0x1ea7fb(0x1ca);}}}}}async function loadHighlightDataAdmin(_0x21a2f6){const _0x4022d2=a2_0x2d6ae0;try{const _0x240e67=doc(db,'highlights',_0x21a2f6),_0x2d35a6=await getDoc(_0x240e67);if(!_0x2d35a6['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x5935db=_0x2d35a6['data'](),_0x51bcbc=_0x5935db[_0x4022d2(0x26c)]||'match';document[_0x4022d2(0x2de)](_0x4022d2(0x1b8))['textContent']='Edit\x20'+getHighlightTypeName(_0x51bcbc),document[_0x4022d2(0x2de)](_0x4022d2(0xd0))['value']=_0x51bcbc,toggleHighlightFields(_0x51bcbc),document[_0x4022d2(0x2de)](_0x4022d2(0x134))['value']=_0x5935db[_0x4022d2(0x24a)]||'',document['getElementById'](_0x4022d2(0x2c0))['value']=_0x5935db['description']||'',document[_0x4022d2(0x2de)]('highlight-submitted-by')['value']=_0x5935db['submittedBy']||'';_0x5935db['videoId']&&(document['getElementById']('highlight-video-id')[_0x4022d2(0x92)]=_0x5935db['videoId'],updateHighlightVideoPreview());if(_0x51bcbc==='match'){document['getElementById'](_0x4022d2(0x131))[_0x4022d2(0x92)]=_0x5935db[_0x4022d2(0xf2)]||'',document['getElementById']('highlight-map')['value']=_0x5935db[_0x4022d2(0x104)]||'';if(_0x5935db['matchDate']){const _0x2791f1=new Date(_0x5935db[_0x4022d2(0x9c)]['seconds']*0x3e8);document[_0x4022d2(0x2de)]('highlight-match-date')[_0x4022d2(0x92)]=_0x2791f1['toISOString']()[_0x4022d2(0x188)]('T')[0x0];}document[_0x4022d2(0x2de)]('highlight-winner-name')['value']=_0x5935db['winnerName']||'',document['getElementById'](_0x4022d2(0x190))['value']=_0x5935db['winnerScore']||'',document['getElementById'](_0x4022d2(0x12a))['value']=_0x5935db['loserName']||'',document['getElementById']('highlight-loser-score')['value']=_0x5935db['loserScore']||'',document['getElementById'](_0x4022d2(0x199))['value']=_0x5935db[_0x4022d2(0x1fb)]||'';}else{if(_0x51bcbc==='creator')document['getElementById'](_0x4022d2(0xd5))['value']=_0x5935db['map']||'',document['getElementById']('highlight-map-creator')['value']=_0x5935db['mapCreator']||'',document[_0x4022d2(0x2de)](_0x4022d2(0x2a5))[_0x4022d2(0x92)]=_0x5935db[_0x4022d2(0x151)]||'',document[_0x4022d2(0x2de)]('highlight-creator-image')['value']=_0x5935db['creatorImageUrl']||'';else _0x51bcbc===_0x4022d2(0x1a6)&&(document['getElementById']('highlight-achievement-player')['value']=_0x5935db['achievementPlayer']||'',document[_0x4022d2(0x2de)]('highlight-achievement-type')[_0x4022d2(0x92)]=_0x5935db['achievementType']||'',document['getElementById']('highlight-achievement-details')['value']=_0x5935db['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x5935db[_0x4022d2(0x278)]||'',document['getElementById']('highlight-achievement-image')['value']=_0x5935db['achievementImageUrl']||'');}}catch(_0x22a04a){console[_0x4022d2(0x28a)]('Error\x20loading\x20highlight:',_0x22a04a),showNotification('Error\x20loading\x20highlight:\x20'+_0x22a04a[_0x4022d2(0x11b)],'error');}}async function saveHighlight(){const _0x318637=a2_0x2d6ae0;try{const _0x556f68=document[_0x318637(0x2de)]('highlight-id')?.['value']||'',_0x21c10d=document['getElementById'](_0x318637(0xd0))?.[_0x318637(0x92)]||'match',_0x468e02={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document['getElementById'](_0x318637(0x2c0))?.[_0x318637(0x92)]?.[_0x318637(0x118)]()||'','submittedBy':document[_0x318637(0x2de)]('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.[_0x318637(0x92)]?.['trim']()||null,'type':_0x21c10d};if(!_0x468e02['title']){showNotification('Title\x20is\x20required',_0x318637(0x28a));return;}if(_0x21c10d==='match'){_0x468e02[_0x318637(0xf2)]=document['getElementById']('highlight-match-info')?.[_0x318637(0x92)]?.['trim']()||'',_0x468e02['map']=document['getElementById'](_0x318637(0xd5))?.[_0x318637(0x92)]?.['trim']()||'';const _0x344f52=document['getElementById']('highlight-match-date'),_0x6c7445=_0x344f52?.[_0x318637(0x92)]||'';_0x468e02['matchDate']=_0x6c7445?Timestamp['fromDate'](new Date(_0x6c7445)):null,_0x468e02[_0x318637(0x26a)]=document['getElementById'](_0x318637(0x279))?.['value']?.['trim']()||'',_0x468e02['winnerScore']=document[_0x318637(0x2de)]('highlight-winner-score')?.['value']?.[_0x318637(0x118)]()||'',_0x468e02[_0x318637(0x2e0)]=document[_0x318637(0x2de)](_0x318637(0x12a))?.[_0x318637(0x92)]?.[_0x318637(0x118)]()||'',_0x468e02[_0x318637(0x217)]=document['getElementById']('highlight-loser-score')?.['value']?.['trim']()||'',_0x468e02['matchLink']=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x468e02[_0x318637(0x1aa)]){showNotification(_0x318637(0x2c8),'error');return;}}else{if(_0x21c10d==='creator'){_0x468e02['map']=document['getElementById'](_0x318637(0xd5))?.[_0x318637(0x92)]?.['trim']()||'',_0x468e02['mapCreator']=document['getElementById'](_0x318637(0x176))?.['value']?.[_0x318637(0x118)]()||'',_0x468e02['mapVersion']=document['getElementById'](_0x318637(0x2a5))?.[_0x318637(0x92)]?.['trim']()||'',_0x468e02['creatorImageUrl']=document[_0x318637(0x2de)](_0x318637(0x167))?.['value']?.['trim']()||'';if(!_0x468e02['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x21c10d==='achievement'){_0x468e02['achievementPlayer']=document['getElementById'](_0x318637(0x160))?.[_0x318637(0x92)]?.[_0x318637(0x118)]()||'',_0x468e02['achievementType']=document['getElementById'](_0x318637(0x1f9))?.['value']?.['trim']()||'',_0x468e02[_0x318637(0x29d)]=document['getElementById']('highlight-achievement-details')?.['value']?.['trim']()||'',_0x468e02['playerProfileUrl']=document['getElementById']('highlight-player-profile')?.['value']?.[_0x318637(0x118)]()||'',_0x468e02['achievementImageUrl']=document['getElementById'](_0x318637(0x2d2))?.['value']?.['trim']()||'';if(!_0x468e02[_0x318637(0x1db)]){showNotification(_0x318637(0x2ba),_0x318637(0x28a));return;}}}}_0x556f68?(_0x468e02['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x556f68),_0x468e02),showNotification('Highlight\x20updated\x20successfully!','success')):(_0x468e02['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x468e02),showNotification(_0x318637(0x235),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0xe881f4){console['error']('Error\x20saving\x20highlight:',_0xe881f4),showNotification('Error\x20saving\x20highlight:\x20'+_0xe881f4['message'],'error');}}function closeHighlightModal(){const _0x4dc693=a2_0x2d6ae0,_0x3cd1fd=document[_0x4dc693(0x2de)]('highlight-modal');if(_0x3cd1fd)_0x3cd1fd['classList']['remove']('active');}function getHighlightTypeName(_0x330063){const _0x14756b=a2_0x2d6ae0;switch(_0x330063){case'match':return _0x14756b(0x7a);case'creator':return'Featured\x20Creator';case'achievement':return _0x14756b(0xf1);default:return _0x14756b(0xf0);}}function updateHighlightVideoPreview(){const _0x193df0=a2_0x2d6ae0,_0x2342fb=document['getElementById']('highlight-video-id'),_0x28be58=document['getElementById']('highlight-video-preview-container'),_0x2f94c2=document[_0x193df0(0x2de)](_0x193df0(0x23d));if(!_0x2342fb||!_0x2f94c2||!_0x28be58)return;const _0x75b554=_0x2342fb['value']['trim']();_0x75b554&&/^[a-zA-Z0-9_-]{11}$/[_0x193df0(0x16a)](_0x75b554)?(_0x2f94c2['src']='https://www.youtube.com/embed/'+_0x75b554,_0x28be58['style'][_0x193df0(0x1e1)]='block'):(_0x2f94c2['src']='',_0x28be58['style']['display']=_0x193df0(0x23b));}async function loadHighlightsAdmin(){const _0x2a0054=a2_0x2d6ae0,_0x21b2a9=document[_0x2a0054(0x2de)]('highlights-table-body');if(!_0x21b2a9)return;_0x21b2a9['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x39202c=query(collection(db,_0x2a0054(0x185)),orderBy('createdAt','desc')),_0x1e1116=await getDocs(_0x39202c);if(_0x1e1116['empty']){_0x21b2a9['innerHTML']=_0x2a0054(0x177);return;}_0x21b2a9[_0x2a0054(0x7d)]='',_0x1e1116['forEach'](_0x1e0aa6=>{const _0x326ea4=_0x2a0054,_0x40d189=_0x1e0aa6['data'](),_0x300369=document['createElement']('tr'),_0x51fbbf=_0x40d189['createdAt']?new Date(_0x40d189['createdAt'][_0x326ea4(0x1a1)]*0x3e8)[_0x326ea4(0x2b3)]():'N/A';let _0x5b9b72=_0x326ea4(0xae),_0x4de253='';switch(_0x40d189['type']){case _0x326ea4(0x180):_0x5b9b72='Match',_0x4de253=_0x326ea4(0x1f5);break;case'creator':_0x5b9b72='Creator',_0x4de253=_0x326ea4(0x224);break;case'achievement':_0x5b9b72='Achievement',_0x4de253='achievement-type';break;}_0x300369[_0x326ea4(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x40d189['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x4de253+'\x22>'+_0x5b9b72+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x51fbbf+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x40d189[_0x326ea4(0x1ad)]||_0x326ea4(0xae))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x40d189['videoId']?_0x326ea4(0x12f):'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x1e0aa6['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x1e0aa6['id']+_0x326ea4(0x216),_0x21b2a9['appendChild'](_0x300369);}),document[_0x2a0054(0x2d8)]('.edit-highlight-btn')['forEach'](_0x1915df=>{_0x1915df['addEventListener']('click',_0x4cc567=>{const _0xbce7ea=a2_0x5283;openHighlightModal(_0x4cc567[_0xbce7ea(0x18e)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0xa59501=>{const _0x157ed1=_0x2a0054;_0xa59501['addEventListener'](_0x157ed1(0x137),_0x44fc03=>{confirmDeleteHighlight(_0x44fc03['currentTarget']['dataset']['id']);});});}catch(_0x44b3f4){console['error']('Error\x20loading\x20highlights:',_0x44b3f4),_0x21b2a9['innerHTML']=_0x2a0054(0x17a)+_0x44b3f4['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x2fbcf3){const _0x18a11e=a2_0x2d6ae0;if(confirm(_0x18a11e(0x107)))try{await deleteDoc(doc(db,'highlights',_0x2fbcf3)),showNotification(_0x18a11e(0x21f),_0x18a11e(0x1a0)),loadHighlightsAdmin();}catch(_0x57016a){console[_0x18a11e(0x28a)]('Error\x20deleting\x20highlight:',_0x57016a),showNotification('Error\x20deleting\x20highlight:\x20'+_0x57016a['message'],'error');}}function setupCreateTestMatchModal(){const _0x4584d8=a2_0x2d6ae0;console[_0x4584d8(0x10b)](_0x4584d8(0x158));const _0x213431=document[_0x4584d8(0x2de)]('create-test-match-modal'),_0xe8016c=document['getElementById'](_0x4584d8(0x76));if(!_0x213431){console[_0x4584d8(0x28a)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0xe8016c){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x21ff0b=_0x213431['cloneNode'](!![]);_0x213431['parentNode'][_0x4584d8(0x276)](_0x21ff0b,_0x213431);const _0x56fd4f=_0x21ff0b['querySelector']('#create-test-match-form');_0x21ff0b['addEventListener']('click',function(_0x4e4dd0){const _0x57ff65=_0x4584d8;_0x4e4dd0[_0x57ff65(0x19d)]===_0x21ff0b&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x3657a3=_0x21ff0b['querySelector'](_0x4584d8(0x1f4));_0x3657a3&&_0x3657a3[_0x4584d8(0x78)]('click',function(_0x587312){_0x587312['preventDefault'](),_0x587312['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x473044=_0x21ff0b['querySelector']('#cancel-create-test-match-btn');_0x473044&&_0x473044[_0x4584d8(0x78)]('click',function(_0x2054e5){const _0x481c23=_0x4584d8;_0x2054e5['preventDefault'](),_0x2054e5['stopPropagation'](),console[_0x481c23(0x10b)]('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x56fd4f){_0x56fd4f['addEventListener']('submit',function(_0x2f5896){const _0x5c7241=_0x4584d8;_0x2f5896['preventDefault'](),_0x2f5896['stopPropagation'](),console[_0x5c7241(0x10b)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x18a0d3=_0x56fd4f[_0x4584d8(0xaa)](_0x4584d8(0x83));_0x18a0d3&&_0x18a0d3[_0x4584d8(0x78)]('click',function(_0x619d1f){const _0xcdef5a=_0x4584d8;_0x619d1f['preventDefault'](),_0x619d1f['stopPropagation'](),console['log'](_0xcdef5a(0x19f)),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x3a6af9=a2_0x2d6ae0;console['log'](_0x3a6af9(0x2a4)),setupHighlightButtons();const _0x3f8537=document[_0x3a6af9(0x2de)]('highlight-form');_0x3f8537&&_0x3f8537['addEventListener'](_0x3a6af9(0x2b9),_0x5e777e=>{_0x5e777e['preventDefault'](),saveHighlight();});const _0xbca6e5=document[_0x3a6af9(0x2de)]('cancel-highlight-btn');_0xbca6e5&&_0xbca6e5[_0x3a6af9(0x78)](_0x3a6af9(0x137),closeHighlightModal);const _0x380353=document[_0x3a6af9(0xaa)](_0x3a6af9(0x285));_0x380353&&_0x380353['addEventListener']('click',closeHighlightModal);const _0x4bfa23=document['getElementById']('highlight-modal');_0x4bfa23&&_0x4bfa23[_0x3a6af9(0x78)](_0x3a6af9(0x137),_0xd12b2b=>{_0xd12b2b['target']===_0x4bfa23&&closeHighlightModal();});const _0x3903fb=document['getElementById']('highlight-video-id');_0x3903fb&&_0x3903fb['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console[_0x3a6af9(0x10b)]('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x312367=a2_0x2d6ae0;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x512d69=document[_0x312367(0x2de)]('matches-prev-page'),_0xade5a6=document['getElementById']('matches-next-page');_0x512d69&&_0x512d69['addEventListener']('click',()=>{const _0x5ac369=_0x312367,_0xa4db32=currentLadder[_0x5ac369(0x252)]();loadMatchesData(matchesPagination[_0xa4db32][_0x5ac369(0x1b4)]-0x1);});_0xade5a6&&_0xade5a6['addEventListener']('click',()=>{const _0x350310=_0x312367,_0x53a43e=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x53a43e][_0x350310(0x1b4)]+0x1);});const _0x3b72fd=document['getElementById']('apply-matches-filters'),_0x1d7c02=document['getElementById']('reset-matches-filters');_0x3b72fd&&_0x3b72fd['addEventListener'](_0x312367(0x137),applyMatchesFilters);_0x1d7c02&&_0x1d7c02['addEventListener']('click',resetMatchesFilters);const _0x27bcb2=document['getElementById']('matches-search');_0x27bcb2&&_0x27bcb2['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x1c3c26=document['getElementById']('resimulate-match-btn');_0x1c3c26&&_0x1c3c26[_0x312367(0x78)]('click',openResimulateModal);const _0x3c2be0=document['getElementById']('resimulate-modal');if(_0x3c2be0){const _0x34e702=_0x3c2be0['querySelector']('.close');_0x34e702&&_0x34e702['addEventListener']('click',closeResimulateModal),_0x3c2be0[_0x312367(0x78)]('click',_0x21c7bd=>{_0x21c7bd['target']===_0x3c2be0&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x140bec=a2_0x2d6ae0;console['log'](_0x140bec(0xb5));const _0xa17a1f=document['getElementById']('create-test-match-modal'),_0x457a80=document[_0x140bec(0x2de)]('create-test-match-form');if(!_0xa17a1f){console['error']('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification(_0x140bec(0x286),_0x140bec(0x28a));return;}if(!_0x457a80){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x457a80['reset']();const _0x30fecd=document['querySelectorAll'](_0x140bec(0x75));let _0x483ec8=![];_0x30fecd['forEach'](_0x34fa56=>{const _0x5a4bcb=_0x140bec;console['log']('Found\x20radio\x20with\x20value:',_0x34fa56[_0x5a4bcb(0x92)]),_0x34fa56[_0x5a4bcb(0x92)]===currentLadder&&(_0x34fa56['checked']=!![],_0x483ec8=!![],console[_0x5a4bcb(0x10b)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x483ec8){console['warn'](_0x140bec(0xa7),currentLadder);const _0x3b8afa=document['querySelector'](_0x140bec(0x1fe));_0x3b8afa&&(_0x3b8afa['checked']=!![],console['log'](_0x140bec(0x2b5)));}const _0x553ecc=document['getElementById']('test-match-date');if(_0x553ecc){const _0x1763fe=new Date()['toISOString']()['split']('T')[0x0];_0x553ecc['value']=_0x1763fe;}_0xa17a1f['style']['display']=_0x140bec(0xee),_0xa17a1f[_0x140bec(0x2ca)]['visibility']='visible',_0xa17a1f[_0x140bec(0x2ca)][_0x140bec(0x1b7)]='1',_0xa17a1f['classList'][_0x140bec(0x288)]('active'),console[_0x140bec(0x10b)](_0x140bec(0x95));const _0x1fc61a=document[_0x140bec(0x2de)](_0x140bec(0x250));_0x1fc61a&&setTimeout(()=>{const _0x251115=_0x140bec;_0x1fc61a[_0x251115(0x26d)]();},0x64);}function closeCreateTestMatchModal(){const _0x560f23=a2_0x2d6ae0;console['log']('Closing\x20create\x20test\x20match\x20modal');const _0x349999=document[_0x560f23(0x2de)](_0x560f23(0x215));if(!_0x349999){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x349999['classList']['remove'](_0x560f23(0xdb)),_0x349999['style'][_0x560f23(0x1b7)]='0',_0x349999[_0x560f23(0x2ca)][_0x560f23(0x295)]=_0x560f23(0x26b),setTimeout(()=>{const _0x2419a4=_0x560f23;!_0x349999[_0x2419a4(0x9a)][_0x2419a4(0x2d0)](_0x2419a4(0xdb))&&(_0x349999['style']['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x1fb619=a2_0x2d6ae0;console['log'](_0x1fb619(0x22f));try{const _0x148312=auth['currentUser'];if(!_0x148312){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x4396dc='D1',_0x5a675b='approvedMatches',_0x552f9f={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x1fb619(0x10c),'loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x148312['email'],'createdAt':serverTimestamp(),'createdBy':_0x148312[_0x1fb619(0x251)],'isTestMatch':!![],'ladder':_0x4396dc,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x148312['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x5a675b),_0x552f9f),showNotification(_0x1fb619(0x1dd),_0x1fb619(0x1a0)),closeCreateTestMatchModal();}catch(_0x3d750b){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x3d750b),showNotification(_0x1fb619(0x1d8)+_0x3d750b['message'],_0x1fb619(0x28a));}}window['testFirebaseConnection']=async function(){const _0x2620ca=a2_0x2d6ae0;try{console[_0x2620ca(0x10b)]('Testing\x20Firebase\x20connection...'),console['log'](_0x2620ca(0x2bc),auth),console['log']('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x5eadc5=collection(db,'players');console[_0x2620ca(0x10b)]('Collection\x20reference\x20created:',_0x5eadc5);const _0x331099=query(_0x5eadc5,where('username','==','nonexistent'));console[_0x2620ca(0x10b)](_0x2620ca(0x26f),_0x331099);const _0x3bf01c=await getDocs(_0x331099);console['log'](_0x2620ca(0x25a),_0x3bf01c['empty']),console['log'](_0x2620ca(0x15b));}catch(_0x2468cf){console[_0x2620ca(0x28a)](_0x2620ca(0x27c),_0x2468cf);}};function setupCreateTestMatchButton(){const _0x4a7e05=a2_0x2d6ae0,_0x49588c=document['getElementById']('create-test-match-btn');if(!_0x49588c){console['error'](_0x4a7e05(0x122));return;}console['log'](_0x4a7e05(0x19b));const _0x3c0543=_0x49588c[_0x4a7e05(0x84)](!![]);_0x49588c[_0x4a7e05(0x1b9)][_0x4a7e05(0x276)](_0x3c0543,_0x49588c),_0x3c0543['addEventListener']('click',function(_0x3725e5){const _0x1cb514=_0x4a7e05;_0x3725e5[_0x1cb514(0x1a5)](),_0x3725e5[_0x1cb514(0x2cf)](),console[_0x1cb514(0x10b)](_0x1cb514(0x99)),openCreateTestMatchModal();}),console['log'](_0x4a7e05(0xd2));}async function loadMatchesData(_0x14113a=0x1){const _0x33dc20=a2_0x2d6ae0,_0x3fe2ef=document['getElementById']('matches-table-body');if(!_0x3fe2ef)return;_0x3fe2ef[_0x33dc20(0x7d)]=_0x33dc20(0x1c4);try{const _0x554690=currentLadder['toLowerCase'](),_0x3c4ebd=matchesPagination[_0x554690],_0x31150a=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x33dc20(0x130):'approvedMatchesD3',_0x357367=collection(db,_0x31150a);_0x14113a<=0x1?(_0x3c4ebd['page']=0x1,_0x3c4ebd['firstVisible']=null,_0x3c4ebd['lastVisible']=null):_0x3c4ebd['page']=_0x14113a;const _0x34ac6d=getMatchesFilters();let _0x4f0c80=_0x357367;if(_0x34ac6d['startDate']||_0x34ac6d['endDate']||_0x34ac6d['searchTerm']){let _0x442151=[];_0x34ac6d['startDate']&&_0x34ac6d['endDate']?(_0x442151['push'](where(_0x33dc20(0x2bf),'>=',_0x34ac6d[_0x33dc20(0xc2)]),where('approvedAt','<=',_0x34ac6d['endDate'])),_0x4f0c80=query(_0x357367,..._0x442151)):_0x4f0c80=query(_0x357367,orderBy('approvedAt','desc'));}else _0x4f0c80=query(_0x357367,orderBy('approvedAt','desc'));_0x14113a>0x1&&_0x3c4ebd['lastVisible']?_0x4f0c80=query(_0x4f0c80,startAfter(_0x3c4ebd['lastVisible']),limit(PAGE_SIZE)):_0x4f0c80=query(_0x4f0c80,limit(PAGE_SIZE));const _0x216e65=await getDocs(_0x4f0c80);!_0x216e65['empty']&&(_0x3c4ebd['firstVisible']=_0x216e65['docs'][0x0],_0x3c4ebd['lastVisible']=_0x216e65['docs'][_0x216e65[_0x33dc20(0x29b)]['length']-0x1]);let _0x4566a4=![];if(!_0x216e65[_0x33dc20(0x219)]){const _0x506cf2=query(_0x4f0c80,startAfter(_0x3c4ebd[_0x33dc20(0xb3)]),limit(0x1)),_0x1445a7=await getDocs(_0x506cf2);_0x4566a4=!_0x1445a7['empty'];}const _0x2c4b4f=document['getElementById']('matches-prev-page'),_0x367e1e=document['getElementById'](_0x33dc20(0x287)),_0x579935=document[_0x33dc20(0x2de)]('matches-page-indicator');if(_0x2c4b4f)_0x2c4b4f[_0x33dc20(0xc4)]=_0x3c4ebd['page']<=0x1;if(_0x367e1e)_0x367e1e['disabled']=!_0x4566a4;if(_0x579935)_0x579935['textContent']='Page\x20'+_0x3c4ebd['page'];if(_0x216e65['empty']){_0x3fe2ef['innerHTML']=_0x33dc20(0x143);return;}_0x3fe2ef['innerHTML']='',_0x216e65['forEach'](_0x3959bf=>{const _0x540154=_0x33dc20,_0x140269=_0x3959bf['data'](),_0x509bc7=document['createElement']('tr'),_0x3325e5=_0x140269['approvedAt']?new Date(_0x140269[_0x540154(0x2bf)][_0x540154(0x1a1)]*0x3e8)['toLocaleDateString']():'N/A';_0x509bc7[_0x540154(0x110)]('data-id',_0x3959bf['id']),_0x509bc7['setAttribute']('data-ladder',currentLadder),_0x509bc7['classList'][_0x540154(0x288)](_0x540154(0x253)),_0x509bc7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3325e5+_0x540154(0x9b)+(_0x140269[_0x540154(0x11c)]||'Unknown')+_0x540154(0x29c)+(_0x140269['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x140269['winnerScore']||0x0)+_0x540154(0x173)+(_0x140269['loserScore']||0x0)+_0x540154(0x1b1)+(_0x140269['mapPlayed']||'N/A')+_0x540154(0x225)+currentLadder+_0x540154(0x9e)+_0x3959bf['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0x3959bf['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3fe2ef[_0x540154(0x222)](_0x509bc7);}),setupMatchesActionButtons(),_0x34ac6d['searchTerm']&&filterMatchesTable(),console['log'](_0x33dc20(0x126)+_0x216e65['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x3c4ebd['page']);}catch(_0x24e983){console[_0x33dc20(0x28a)]('Error\x20loading\x20matches:',_0x24e983),_0x3fe2ef['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x24e983['message']+_0x33dc20(0x1d6);}}async function deleteMatch(_0x5f0871,_0x3b344b){const _0x6be529=a2_0x2d6ae0;try{console['log']('Deleting\x20match\x20'+_0x5f0871+'\x20from\x20'+_0x3b344b+'\x20ladder');const _0x1bc1bd=auth['currentUser'];if(!_0x1bc1bd){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches',_0x6be529(0x28a));return;}const _0x38e7f6=_0x3b344b==='D1'?_0x6be529(0x223):_0x3b344b==='D2'?'approvedMatchesD2':'approvedMatchesD3';console['log'](_0x6be529(0x243)+_0x38e7f6),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x38e7f6,_0x5f0871)),console['log'](_0x6be529(0x9f)),showNotification('Match\x20deleted\x20successfully','success');const _0x38f56c=_0x3b344b['toLowerCase']();loadMatchesData(matchesPagination[_0x38f56c]['page']);}catch(_0x3317aa){console[_0x6be529(0x28a)]('Error\x20deleting\x20match:',_0x3317aa),showNotification(_0x6be529(0x77)+_0x3317aa['message'],'error');}}function setupMatchesActionButtons(){const _0x1e2d37=a2_0x2d6ae0;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll'](_0x1e2d37(0x2aa))['forEach'](_0x52a8e4=>{const _0x475d9c=_0x1e2d37;_0x52a8e4[_0x475d9c(0x78)]('click',_0x279e84=>{const _0x5ec297=_0x475d9c;_0x279e84['preventDefault'](),_0x279e84['stopPropagation']();const _0x3334fc=_0x279e84[_0x5ec297(0x18e)]['dataset']['id'],_0x2ccc2e=_0x279e84['currentTarget'][_0x5ec297(0x16e)]('tr'),_0x1bc5b8=_0x2ccc2e['dataset'][_0x5ec297(0x141)];console['log']('Edit\x20match\x20clicked:',_0x3334fc,_0x1bc5b8),openEditMatchModal(_0x3334fc,_0x1bc5b8);});}),document['querySelectorAll'](_0x1e2d37(0x268))['forEach'](_0x3b3035=>{const _0x375a4b=_0x1e2d37;_0x3b3035['addEventListener'](_0x375a4b(0x137),_0x44db18=>{const _0x329a44=_0x375a4b;_0x44db18['preventDefault'](),_0x44db18['stopPropagation']();const _0x5142b0=_0x44db18['currentTarget'][_0x329a44(0x17d)]['id'],_0x5bac18=_0x44db18['currentTarget']['closest']('tr'),_0x5e2b35=_0x5bac18['dataset'][_0x329a44(0x141)]||currentLadder;console[_0x329a44(0x10b)]('Delete\x20match\x20clicked:',_0x5142b0,_0x5e2b35),confirm(_0x329a44(0x14f))&&deleteMatch(_0x5142b0,_0x5e2b35);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x300aa5=a2_0x2d6ae0,_0x8a4e13=document['getElementById'](_0x300aa5(0x280))['value']['toLowerCase'](),_0x496438=document['querySelectorAll']('#matches-table-body\x20tr');let _0x1d3f61=0x0;_0x496438[_0x300aa5(0x135)](_0x783510=>{const _0x2fa187=_0x300aa5;if(_0x783510['classList']['contains'](_0x2fa187(0xc6))||_0x783510['classList']['contains']('empty-state')||_0x783510['classList']['contains']('error-state'))return;const _0x46f48e=_0x783510['cells'][0x1]['textContent']['toLowerCase'](),_0x7d610c=_0x783510[_0x2fa187(0xcb)][0x2]['textContent']['toLowerCase'](),_0x5e46ea=_0x783510['cells'][0x4][_0x2fa187(0x1dc)]['toLowerCase']();_0x46f48e[_0x2fa187(0x2c3)](_0x8a4e13)||_0x7d610c[_0x2fa187(0x2c3)](_0x8a4e13)||_0x5e46ea['includes'](_0x8a4e13)?(_0x783510['style'][_0x2fa187(0x1e1)]='',_0x1d3f61++):_0x783510['style']['display']='none';});if(_0x1d3f61===0x0&&_0x496438['length']>0x0){const _0x1870f1=document['getElementById'](_0x300aa5(0x2a6)),_0xd93e11=_0x1870f1['querySelector']('.no-results');if(!_0xd93e11){const _0x5db71e=document['createElement']('tr');_0x5db71e['className']='no-results',_0x5db71e[_0x300aa5(0x7d)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x8a4e13+'\x27</td>',_0x1870f1[_0x300aa5(0x222)](_0x5db71e);}}else{const _0x386153=document['querySelector']('.no-results');_0x386153&&_0x386153['remove']();}}function getMatchesFilters(){const _0x4358ba=a2_0x2d6ae0,_0x4163b0=document[_0x4358ba(0x2de)](_0x4358ba(0x280))['value']['toLowerCase'](),_0x567fed=document['getElementById'](_0x4358ba(0x27a))['value'],_0x24f85c=document['getElementById']('matches-end-date')['value'];let _0x2942ef=null,_0x451177=null;return _0x567fed&&(_0x2942ef=new Date(_0x567fed),_0x2942ef[_0x4358ba(0xf3)](0x0,0x0,0x0,0x0),_0x2942ef=Timestamp[_0x4358ba(0x2be)](_0x2942ef)),_0x24f85c&&(_0x451177=new Date(_0x24f85c),_0x451177['setHours'](0x17,0x3b,0x3b,0x3e7),_0x451177=Timestamp[_0x4358ba(0x2be)](_0x451177)),{'searchTerm':_0x4163b0,'startDate':_0x2942ef,'endDate':_0x451177};}async function applyMatchesFilters(){const _0x1fb53f=currentLadder['toLowerCase']();matchesPagination[_0x1fb53f]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x44e27c=a2_0x2d6ae0;document['getElementById']('matches-start-date')[_0x44e27c(0x92)]='',document['getElementById']('matches-end-date')['value']='',document['getElementById']('matches-search')[_0x44e27c(0x92)]='';const _0x28cd10=currentLadder['toLowerCase']();matchesPagination[_0x28cd10]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x3b38fc,_0x18d3f1){const _0x396d69=a2_0x2d6ae0,_0xc33ee8=document['getElementById'](_0x396d69(0x106));if(!_0xc33ee8)return;try{const _0x58baa7=_0x18d3f1==='D1'?'approvedMatches':_0x18d3f1==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x60c690=doc(db,_0x58baa7,_0x3b38fc),_0xa6c514=await getDoc(_0x60c690);if(!_0xa6c514['exists']()){showNotification('Match\x20not\x20found',_0x396d69(0x28a));return;}const _0x3b85f9=_0xa6c514['data']();document['getElementById']('edit-match-id')['value']=_0x3b38fc,document['getElementById']('edit-match-ladder')['value']=_0x18d3f1,document['getElementById']('edit-match-winner')['value']=_0x3b85f9[_0x396d69(0x11c)]||'',document['getElementById']('edit-match-winner-score')['value']=_0x3b85f9['winnerScore']||0x0,document[_0x396d69(0x2de)]('edit-match-winner-suicides')['value']=_0x3b85f9['winnerSuicides']||0x0,document['getElementById']('edit-match-winner-comment')['value']=_0x3b85f9[_0x396d69(0xc9)]||'',document['getElementById'](_0x396d69(0xcd))[_0x396d69(0x92)]=_0x3b85f9[_0x396d69(0x111)]||'',document[_0x396d69(0x2de)]('edit-match-loser-score')['value']=_0x3b85f9['loserScore']||0x0,document[_0x396d69(0x2de)](_0x396d69(0x194))[_0x396d69(0x92)]=_0x3b85f9['loserSuicides']||0x0,document[_0x396d69(0x2de)](_0x396d69(0x148))['value']=_0x3b85f9['loserComment']||'',document[_0x396d69(0x2de)]('edit-match-map')['value']=_0x3b85f9['mapPlayed']||'',document['getElementById'](_0x396d69(0x171))['value']=_0x3b85f9[_0x396d69(0x1f3)]||'',document['getElementById']('edit-match-loser-demo')['value']=_0x3b85f9[_0x396d69(0xde)]||_0x3b85f9['demoLink']||'',document[_0x396d69(0x2de)]('edit-match-title')[_0x396d69(0x1dc)]='Edit\x20Match:\x20'+_0x3b85f9['winnerUsername']+_0x396d69(0x238)+_0x3b85f9['loserUsername'],_0xc33ee8['classList']['add']('active');}catch(_0x48111a){console[_0x396d69(0x28a)](_0x396d69(0x161),_0x48111a),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x1cae17=a2_0x2d6ae0,_0x53013e=document['getElementById'](_0x1cae17(0x106));_0x53013e&&_0x53013e[_0x1cae17(0x9a)]['remove']('active');}async function saveEditedMatch(){const _0x15f544=a2_0x2d6ae0;try{const _0x316d1d=document['getElementById']('edit-match-id')['value'],_0x2c8fc1=document['getElementById']('edit-match-ladder')['value'];if(!_0x316d1d||!_0x2c8fc1){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x2610ce=_0x2c8fc1==='D1'?_0x15f544(0x223):_0x2c8fc1==='D2'?'approvedMatchesD2':_0x15f544(0x209),_0x5f3e60=document['getElementById']('edit-match-winner')['value']['trim'](),_0xa2f590=parseInt(document['getElementById']('edit-match-winner-score')['value']),_0x24a4e4=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x2472e8=document['getElementById'](_0x15f544(0xf6))['value']['trim'](),_0x208d09=document[_0x15f544(0x2de)]('edit-match-loser')[_0x15f544(0x92)][_0x15f544(0x118)](),_0x2807a5=parseInt(document['getElementById']('edit-match-loser-score')[_0x15f544(0x92)]),_0x5d0409=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x1e1e73=document['getElementById'](_0x15f544(0x148))['value']['trim'](),_0x332820=document['getElementById'](_0x15f544(0x2d4))['value']['trim'](),_0xf8de06=document['getElementById']('edit-match-winner-demo')[_0x15f544(0x92)]['trim'](),_0x367723=document[_0x15f544(0x2de)]('edit-match-loser-demo')['value']['trim']();if(!_0x5f3e60||!_0x208d09){showNotification(_0x15f544(0x1ac),_0x15f544(0x28a));return;}await updateDoc(doc(db,_0x2610ce,_0x316d1d),{'winnerUsername':_0x5f3e60,'winnerScore':_0xa2f590,'winnerSuicides':_0x24a4e4,'winnerComment':_0x2472e8,'loserUsername':_0x208d09,'loserScore':_0x2807a5,'loserSuicides':_0x5d0409,'loserComment':_0x1e1e73,'mapPlayed':_0x332820,'winnerDemoLink':_0xf8de06||null,'loserDemoLink':_0x367723||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth[_0x15f544(0x1e3)]['email'],'isEdited':!![]}),showNotification(_0x15f544(0x179),'success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x2c8fc1['toLowerCase']()][_0x15f544(0x1b4)]);}catch(_0x36eae3){console['error']('Error\x20saving\x20match:',_0x36eae3),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x36eae3[_0x15f544(0x11b)],'error');}}async function openDeleteMatchModal(_0x544d27,_0x533ebd){const _0x254c1c=a2_0x2d6ae0;try{const _0x1c903a=_0x533ebd==='D1'?_0x254c1c(0x223):_0x533ebd==='D2'?_0x254c1c(0x130):'approvedMatchesD3',_0x1ee13a=doc(db,_0x1c903a,_0x544d27),_0x789398=await getDoc(_0x1ee13a);if(!_0x789398[_0x254c1c(0x264)]()){showNotification('Match\x20not\x20found','error');return;}const _0x14b342=_0x789398['data'](),_0x12c1ad=document['getElementById']('delete-match-confirm-modal');_0x12c1ad['dataset']['matchId']=_0x544d27,_0x12c1ad['dataset'][_0x254c1c(0x141)]=_0x533ebd;const _0x2cfc2f=_0x14b342[_0x254c1c(0x2bf)]?new Date(_0x14b342[_0x254c1c(0x2bf)]['seconds']*0x3e8)['toLocaleDateString']():_0x254c1c(0x23e),_0x365a6b=document[_0x254c1c(0x2de)]('delete-match-summary');_0x365a6b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x2cfc2f+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x14b342['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x14b342[_0x254c1c(0x111)]+_0x254c1c(0x13a)+(_0x14b342['winnerScore']||0x0)+'\x20-\x20'+(_0x14b342['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x14b342[_0x254c1c(0x16d)]||_0x254c1c(0x23e))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x533ebd+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x12c1ad['classList'][_0x254c1c(0x288)](_0x254c1c(0xdb));}catch(_0x2c747f){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x2c747f),showNotification(_0x254c1c(0x116),'error');}}function closeDeleteMatchModal(){const _0x572aa7=a2_0x2d6ae0,_0x2450d8=document['getElementById']('delete-match-confirm-modal');_0x2450d8&&(_0x2450d8['classList']['remove'](_0x572aa7(0xdb)),_0x2450d8[_0x572aa7(0x11f)]('data-match-id'),_0x2450d8['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x348c5d=a2_0x2d6ae0,_0x2de0fc=document['getElementById'](_0x348c5d(0x263)),_0x21b9e3=_0x2de0fc['dataset']['matchId'],_0x1f6873=_0x2de0fc[_0x348c5d(0x17d)]['ladder'];if(!_0x21b9e3||!_0x1f6873){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x3eba1b=_0x1f6873==='D1'?'approvedMatches':_0x1f6873==='D2'?'approvedMatchesD2':_0x348c5d(0x209);await deleteDoc(doc(db,_0x3eba1b,_0x21b9e3)),showNotification(_0x348c5d(0x9f),_0x348c5d(0x1a0)),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x1f6873['toLowerCase']()][_0x348c5d(0x1b4)]);}catch(_0x51dc8c){console[_0x348c5d(0x28a)](_0x348c5d(0x23c),_0x51dc8c),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x51dc8c['message'],'error');}}async function saveHighlightChanges(){const _0x27dd0e=a2_0x2d6ae0,_0x85d4d2=document['getElementById'](_0x27dd0e(0x1d4))['value'],_0x52c9d5=document['getElementById'](_0x27dd0e(0x1c0))['value'];let _0x2a902c={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x52c9d5,'description':document[_0x27dd0e(0x2de)]('edit-highlight-description-input')[_0x27dd0e(0x92)][_0x27dd0e(0x118)](),'videoId':document['getElementById']('edit-highlight-videoId-input')['value'][_0x27dd0e(0x118)](),'submittedBy':auth['currentUser']['email']};if(_0x52c9d5==='match'){_0x2a902c['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x2a902c['map']=document['getElementById']('edit-highlight-map-input')['value']['trim']();const _0x4f0dc1=document[_0x27dd0e(0x2de)]('edit-highlight-matchDate-input')['value'];_0x2a902c['matchDate']=_0x4f0dc1?Timestamp[_0x27dd0e(0x2be)](new Date(_0x4f0dc1)):null,_0x2a902c['winnerName']=document['getElementById']('edit-highlight-winnerName-input')['value'][_0x27dd0e(0x118)](),_0x2a902c[_0x27dd0e(0x11a)]=document['getElementById']('edit-highlight-winnerScore-input')['value']['trim'](),_0x2a902c['loserName']=document['getElementById']('edit-highlight-loserName-input')['value']['trim'](),_0x2a902c['loserScore']=document[_0x27dd0e(0x2de)]('edit-highlight-loserScore-input')['value']['trim'](),_0x2a902c['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x2a902c['mapCreator']=null,_0x2a902c['mapVersion']=null,_0x2a902c['creatorImageUrl']=null,_0x2a902c[_0x27dd0e(0x1db)]=null,_0x2a902c['achievementType']=null,_0x2a902c['achievementDetails']=null,_0x2a902c[_0x27dd0e(0x278)]=null;}else{if(_0x52c9d5==='creator')_0x2a902c['map']=document[_0x27dd0e(0x2de)](_0x27dd0e(0x82))['value']['trim'](),_0x2a902c['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')[_0x27dd0e(0x92)][_0x27dd0e(0x118)](),_0x2a902c['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value']['trim'](),_0x2a902c['creatorImageUrl']=document['getElementById']('edit-highlight-creatorImageUrl-input')['value'][_0x27dd0e(0x118)](),_0x2a902c['matchInfo']=null,_0x2a902c['matchDate']=null,_0x2a902c['winnerName']=null,_0x2a902c[_0x27dd0e(0x11a)]=null,_0x2a902c[_0x27dd0e(0x2e0)]=null,_0x2a902c['loserScore']=null,_0x2a902c['matchLink']=null,_0x2a902c[_0x27dd0e(0x1db)]=null,_0x2a902c[_0x27dd0e(0x1e9)]=null,_0x2a902c[_0x27dd0e(0x29d)]=null,_0x2a902c['playerProfileUrl']=null;else _0x52c9d5==='achievement'&&(_0x2a902c['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x2a902c[_0x27dd0e(0x1e9)]=document[_0x27dd0e(0x2de)]('edit-highlight-achievementType-input')[_0x27dd0e(0x92)]['trim'](),_0x2a902c['achievementDetails']=document[_0x27dd0e(0x2de)]('edit-highlight-achievementDetails-input')['value'][_0x27dd0e(0x118)](),_0x2a902c['playerProfileUrl']=document[_0x27dd0e(0x2de)](_0x27dd0e(0x11e))[_0x27dd0e(0x92)]['trim'](),_0x2a902c['matchInfo']=null,_0x2a902c['map']=null,_0x2a902c['matchDate']=null,_0x2a902c['winnerName']=null,_0x2a902c[_0x27dd0e(0x11a)]=null,_0x2a902c['loserName']=null,_0x2a902c['loserScore']=null,_0x2a902c['matchLink']=null,_0x2a902c['mapCreator']=null,_0x2a902c[_0x27dd0e(0x151)]=null,_0x2a902c[_0x27dd0e(0x156)]=null);}try{if(_0x85d4d2){_0x2a902c[_0x27dd0e(0x80)]=serverTimestamp();const _0x11893d=doc(db,'highlights',_0x85d4d2);await updateDoc(_0x11893d,_0x2a902c),showNotification(_0x27dd0e(0x1c6),_0x27dd0e(0x1a0));}else _0x2a902c['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x2a902c),showNotification(_0x27dd0e(0xe4),'success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x53b9c3){console['error']('Error\x20saving\x20highlight:',_0x53b9c3),showNotification('Error\x20saving\x20highlight:\x20'+_0x53b9c3['message'],'error');}}async function resimulateMatch(){const _0x51a6ea=a2_0x2d6ae0;try{const _0x454375=document[_0x51a6ea(0x2de)]('resimulate-match-id')['value'];if(!_0x454375){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x23100e=auth[_0x51a6ea(0x1e3)];if(!_0x23100e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches',_0x51a6ea(0x28a));return;}const _0x3aeec0=currentLadder==='D1'?_0x51a6ea(0x223):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1fae9b=doc(db,_0x3aeec0,_0x454375),_0x370388=await getDoc(_0x1fae9b);if(!_0x370388['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x47da13=_0x370388[_0x51a6ea(0x290)](),_0x2e76af=_0x47da13['approvedAt']?_0x47da13[_0x51a6ea(0x2bf)][_0x51a6ea(0xf5)]()['toLocaleString']():_0x47da13[_0x51a6ea(0x9c)]?_0x47da13['matchDate']['toDate']?_0x47da13['matchDate']['toDate']()[_0x51a6ea(0xc8)]():new Date(_0x47da13['matchDate'])[_0x51a6ea(0xc8)]():'Unknown',_0x39e8f0=_0x51a6ea(0x7f)+_0x47da13['winnerUsername']+_0x51a6ea(0xbb)+_0x47da13['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x47da13['winnerScore']+'-'+_0x47da13['loserScore']+_0x51a6ea(0x2da)+(_0x47da13['mapPlayed']||_0x47da13['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x2e76af+_0x51a6ea(0x1b6)+_0x454375+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+_0x51a6ea(0x241);document[_0x51a6ea(0x2de)]('match-details-container')['innerHTML']=_0x39e8f0,document['getElementById'](_0x51a6ea(0x14a))['style'][_0x51a6ea(0x1e1)]='block',document['getElementById']('confirm-resimulate-btn')['style'][_0x51a6ea(0x1e1)]='block',window[_0x51a6ea(0x282)]={'matchId':_0x454375,'matchData':_0x47da13,'ladder':currentLadder},showNotification(_0x51a6ea(0x166),'info');}catch(_0x1ae981){console['error']('Error\x20finding\x20match:',_0x1ae981),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x1ae981['message'],'error');}}async function confirmResimulateMatch(){const _0x447887=a2_0x2d6ae0;try{const {matchId:_0x4ee34e,matchData:_0x41b370,ladder:_0x18163f}=window[_0x447887(0x282)];if(!_0x4ee34e||!_0x41b370){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x50c247=_0x18163f==='D1'?'players':_0x18163f==='D2'?_0x447887(0x174):'playersD3',_0x29be2a=_0x18163f==='D1'?'eloHistory':_0x18163f==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x1867c5,_0x1494fe]=await Promise['all']([getDocs(query(collection(db,_0x50c247),where('username','==',_0x41b370['winnerUsername']))),getDocs(query(collection(db,_0x50c247),where('username','==',_0x41b370[_0x447887(0x111)])))]);if(_0x1867c5['empty']||_0x1494fe[_0x447887(0x219)]){showNotification(_0x447887(0x149),'error');return;}const _0x411160=_0x1867c5[_0x447887(0x29b)][0x0]['id'],_0x3df88f=_0x1494fe['docs'][0x0]['id'],_0x3943c9=_0x1867c5['docs'][0x0]['data'](),_0x16b1b3=_0x1494fe['docs'][0x0]['data'](),[_0x1f87c8,_0x109fae]=await Promise['all']([getDocs(query(collection(db,_0x29be2a),where('playerId','==',_0x411160),where('matchId','==',_0x4ee34e))),getDocs(query(collection(db,_0x29be2a),where('playerId','==',_0x3df88f),where('matchId','==',_0x4ee34e)))]),_0x2d7bc2=!_0x1f87c8[_0x447887(0x219)],_0xa1172b=!_0x109fae['empty'],_0x2a4508='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x2d7bc2?_0x447887(0x20f):'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0xa1172b?'\x20Exists':_0x447887(0xe3))+_0x447887(0xdd)+(_0x3943c9['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x16b1b3['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0x3943c9['position']||'Unknown')+_0x447887(0x297)+(_0x16b1b3['position']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x447887(0x212))['innerHTML']=_0x2a4508,document[_0x447887(0x2de)]('validation-results-container')['style']['display']='block';if(_0x2d7bc2&&_0xa1172b){showNotification(_0x447887(0x2c9),'warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x3455fd=_0x41b370[_0x447887(0x2bf)]||_0x41b370[_0x447887(0x9c)]||serverTimestamp(),[_0x308483,_0x540657]=await Promise['all']([getPlayerEloAtTime(_0x411160,_0x3455fd,_0x29be2a),getPlayerEloAtTime(_0x3df88f,_0x3455fd,_0x29be2a)]),{calculateElo:_0x216500}=await import(_0x447887(0xd8)),{newWinnerRating:_0x36a85f,newLoserRating:_0x4d6dc7}=_0x216500(_0x308483,_0x540657),_0x1f306b=_0x3943c9['position']||Number['MAX_SAFE_INTEGER'],_0x12b02e=_0x16b1b3[_0x447887(0x1e7)]||Number[_0x447887(0xfa)];let _0x14aefb=_0x1f306b,_0x370790=_0x12b02e;_0x1f306b>_0x12b02e&&(_0x14aefb=_0x12b02e,_0x370790=_0x12b02e+0x1);const _0x320235=writeBatch(db),_0x13c0fc=doc(db,_0x50c247,_0x411160);_0x320235['update'](_0x13c0fc,{'eloRating':_0x36a85f,'position':_0x14aefb,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});const _0x23cad6=doc(db,_0x50c247,_0x3df88f);_0x320235['update'](_0x23cad6,{'eloRating':_0x4d6dc7,'position':_0x370790,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x1f306b>_0x12b02e){const _0x1c9af1=await getDocs(query(collection(db,_0x50c247),where(_0x447887(0x1e7),'>',_0x12b02e),where('position','<',_0x1f306b)));_0x1c9af1[_0x447887(0x135)](_0x11bf1d=>{const _0x552ec4=doc(db,_0x50c247,_0x11bf1d['id']),_0x5a7e03=_0x11bf1d['data']()['position'];_0x320235['update'](_0x552ec4,{'position':_0x5a7e03+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x2d7bc2){const _0x3192cb=doc(collection(db,_0x29be2a));_0x320235[_0x447887(0x236)](_0x3192cb,{'playerId':_0x411160,'player':_0x41b370['winnerUsername'],'previousElo':_0x308483,'newElo':_0x36a85f,'eloChange':_0x36a85f-_0x308483,'opponentId':_0x3df88f,'opponent':_0x41b370['loserUsername'],'matchResult':'win','previousPosition':_0x1f306b,'newPosition':_0x14aefb,'positionChange':_0x14aefb-_0x1f306b,'matchId':_0x4ee34e,'timestamp':_0x3455fd,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x447887(0x1e3)]['uid'],'gameMode':_0x18163f,'matchScore':_0x41b370[_0x447887(0x11a)]+'-'+_0x41b370[_0x447887(0x217)],'mapPlayed':_0x41b370['mapPlayed']||_0x41b370[_0x447887(0xb0)]||_0x447887(0xae),'note':_0x447887(0x200)});}if(!_0xa1172b){const _0xf4cb9e=doc(collection(db,_0x29be2a));_0x320235['set'](_0xf4cb9e,{'playerId':_0x3df88f,'player':_0x41b370['loserUsername'],'previousElo':_0x540657,'newElo':_0x4d6dc7,'eloChange':_0x4d6dc7-_0x540657,'opponentId':_0x411160,'opponent':_0x41b370[_0x447887(0x11c)],'matchResult':'loss','previousPosition':_0x12b02e,'newPosition':_0x370790,'positionChange':_0x370790-_0x12b02e,'matchId':_0x4ee34e,'timestamp':_0x3455fd,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x447887(0x1e3)]['uid'],'gameMode':_0x18163f,'matchScore':_0x41b370['winnerScore']+'-'+_0x41b370['loserScore'],'mapPlayed':_0x41b370['mapPlayed']||_0x41b370[_0x447887(0xb0)]||'Unknown','note':_0x447887(0x200)});}const _0x274d38=_0x18163f==='D1'?_0x447887(0x223):_0x18163f==='D2'?_0x447887(0x130):_0x447887(0x209),_0x43a95f=doc(db,_0x274d38,_0x4ee34e);_0x320235[_0x447887(0x153)](_0x43a95f,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x447887(0x1e3)][_0x447887(0x165)],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x3943c9['eloRating'],'originalLoserElo':_0x16b1b3[_0x447887(0x1d2)],'originalWinnerPosition':_0x1f306b,'originalLoserPosition':_0x12b02e,'resimulatedWinnerElo':_0x36a85f,'resimulatedLoserElo':_0x4d6dc7,'resimulatedWinnerPosition':_0x14aefb,'resimulatedLoserPosition':_0x370790}),await _0x320235['commit']();const _0x1b9cae=(!_0x2d7bc2?0x1:0x0)+(!_0xa1172b?0x1:0x0),_0x37ace5=_0x1f306b!==_0x14aefb||_0x12b02e!==_0x370790;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0x1b9cae+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x308483+''+_0x36a85f+'\x20(+'+(_0x36a85f-_0x308483)+'),\x20')+(_0x447887(0x1cf)+_0x540657+''+_0x4d6dc7+'\x20('+(_0x4d6dc7-_0x540657)+').\x20')+(''+(_0x37ace5?'Positions\x20updated:\x20Winner\x20'+_0x1f306b+''+_0x14aefb+_0x447887(0x2d7)+_0x12b02e+''+_0x370790:'No\x20position\x20changes\x20needed.')),_0x447887(0x1a0)),closeResimulateModal(),document['querySelector'](_0x447887(0x193))&&loadPlayersData();}catch(_0x3b5ece){console['error']('Error\x20resimulating\x20match:',_0x3b5ece),showNotification(_0x447887(0x2cd)+_0x3b5ece['message'],'error');}}async function getPlayerEloAtTime(_0x21f54e,_0x23953f,_0x3320fc){const _0x440d9e=a2_0x2d6ae0;try{const _0x548bd1=_0x23953f['toDate']?_0x23953f['toDate']():new Date(_0x23953f),_0xf5213=query(collection(db,_0x3320fc),where(_0x440d9e(0x7e),'==',_0x21f54e),where('timestamp','<',_0x23953f),orderBy('timestamp',_0x440d9e(0x27d)),limit(0x1)),_0x22c497=await getDocs(_0xf5213);if(!_0x22c497['empty']){const _0x1b39eb=_0x22c497['docs'][0x0]['data']();return console[_0x440d9e(0x10b)]('Found\x20ELO\x20history\x20for\x20player\x20'+_0x21f54e+'\x20before\x20match:\x20'+_0x1b39eb['newElo']),_0x1b39eb['newElo'];}else return console['log'](_0x440d9e(0xa8)+_0x21f54e+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x268396){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x21f54e+':',_0x268396),0x4b0;}}function openResimulateModal(){const _0x44ee95=a2_0x2d6ae0;console['log']('openResimulateModal\x20called!');const _0x403e20=document['getElementById']('resimulate-modal');console[_0x44ee95(0x10b)]('Modal\x20element\x20found:',_0x403e20);if(!_0x403e20){console['error']('Modal\x20element\x20not\x20found!');return;}_0x403e20[_0x44ee95(0x2ca)]['display']=_0x44ee95(0x132),_0x403e20['style']['visibility']='visible',_0x403e20['style'][_0x44ee95(0x1b7)]='1',_0x403e20['classList']['add']('active'),console[_0x44ee95(0x10b)](_0x44ee95(0x95)),console['log']('Modal\x20computed\x20styles:',window[_0x44ee95(0x1b2)](_0x403e20)['display']);const _0x526910=document['getElementById']('match-details-container'),_0x67a171=document['getElementById']('validation-results-container'),_0x418054=document['getElementById']('confirm-resimulate-btn'),_0x445024=document[_0x44ee95(0x2de)]('resimulate-match-id');if(_0x526910)_0x526910['innerHTML']='';if(_0x67a171)_0x67a171['innerHTML']='';if(_0x418054)_0x418054['style'][_0x44ee95(0x1e1)]='none';if(_0x445024)_0x445024['value']='';console['log'](_0x44ee95(0x1c7));}function closeResimulateModal(){document['getElementById']('resimulate-modal')['style']['display']='none',window['pendingResimulateData']=null;}window[a2_0x2d6ae0(0x8c)]=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x29a7a0){console['error']('Error\x20loading\x20points\x20data:',_0x29a7a0),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x29a7a0['message'],'error');}}function renderPointsOverview(_0x6312fc){const _0x492482=a2_0x2d6ae0,_0x3c7dfd=document['getElementById']('points-overview-table-body');if(!_0x3c7dfd)return;if(_0x6312fc[_0x492482(0x163)]===0x0){_0x3c7dfd[_0x492482(0x7d)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x3c7dfd['innerHTML']='',_0x6312fc[_0x492482(0x135)](_0x40d5e5=>{const _0x534540=_0x492482,_0x136ab8=document[_0x534540(0xeb)]('tr'),_0x4e969b=_0x40d5e5['displayName']||_0x40d5e5['username']||'Unknown\x20User',_0x2d9815=_0x40d5e5['email']||'No\x20email',_0x49fe97=_0x40d5e5[_0x534540(0x229)]||0x0,_0x386691=_0x40d5e5['lastPointsModified']?new Date(_0x40d5e5[_0x534540(0xdf)]['seconds']*0x3e8)['toLocaleDateString']():_0x534540(0x1ce);_0x136ab8[_0x534540(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x4e969b+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2d9815+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x49fe97>0x3e8?_0x534540(0x12d):_0x49fe97>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x49fe97['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x386691+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22'+_0x40d5e5['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x40d5e5['id']+_0x534540(0x1d9),_0x3c7dfd['appendChild'](_0x136ab8);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x22e7c8=a2_0x2d6ae0;console['log'](_0x22e7c8(0x103));const _0x34ea0c=document['querySelectorAll']('.quick-edit-btn');console['log']('Found\x20'+_0x34ea0c['length']+_0x22e7c8(0x136)),_0x34ea0c['forEach'](_0x7e7efc=>{const _0x3250d3=_0x7e7efc['cloneNode'](!![]);_0x7e7efc['parentNode']['replaceChild'](_0x3250d3,_0x7e7efc);});const _0x50a914=document['querySelectorAll']('.view-history-btn');console[_0x22e7c8(0x10b)]('Found\x20'+_0x50a914[_0x22e7c8(0x163)]+'\x20view\x20history\x20buttons'),_0x50a914[_0x22e7c8(0x135)](_0x5cceec=>{const _0x565fb9=_0x5cceec['cloneNode'](!![]);_0x5cceec['parentNode']['replaceChild'](_0x565fb9,_0x5cceec);}),document[_0x22e7c8(0x2d8)]('.quick-edit-btn')[_0x22e7c8(0x135)](_0x470c77=>{const _0x2c33de=_0x22e7c8;_0x470c77[_0x2c33de(0x78)]('click',function(_0x5f2295){const _0x46898a=_0x2c33de;_0x5f2295['preventDefault'](),_0x5f2295['stopPropagation']();const _0x311159=this[_0x46898a(0x17d)][_0x46898a(0x15d)];console['log'](_0x46898a(0xb9),_0x311159);if(!_0x311159){console[_0x46898a(0x28a)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x46898a(0x2ca)][_0x46898a(0x1b7)]=_0x46898a(0x1de),setTimeout(()=>{const _0x3ce8c9=_0x46898a;this[_0x3ce8c9(0x2ca)][_0x3ce8c9(0x1b7)]='1';},0xc8),openQuickEditModal(_0x311159);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x3a33e5=>{const _0x1ecd11=_0x22e7c8;_0x3a33e5[_0x1ecd11(0x78)]('click',function(_0x5af847){const _0x35e30a=_0x1ecd11;_0x5af847['preventDefault'](),_0x5af847[_0x35e30a(0x2cf)]();const _0x4c9ca4=this['dataset']['userId'];console['log'](_0x35e30a(0x1fd),_0x4c9ca4);if(!_0x4c9ca4){console[_0x35e30a(0x28a)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x178c53=_0x35e30a;this[_0x178c53(0x2ca)][_0x178c53(0x1b7)]='1';},0xc8),loadUserPointsHistory(_0x4c9ca4);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0x263ce0){const _0x54e1db=a2_0x2d6ae0;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x263ce0);const _0x43836e=document[_0x54e1db(0x2de)]('quick-edit-points-modal');if(!_0x43836e){console['error'](_0x54e1db(0x27f)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification('Loading\x20user\x20data...','info');const _0x19021d=doc(db,'userProfiles',_0x263ce0),_0x20089d=await getDoc(_0x19021d);if(!_0x20089d['exists']()){showNotification('User\x20not\x20found','error');return;}const _0x2695e5=_0x20089d[_0x54e1db(0x290)]();console['log'](_0x54e1db(0xe8),_0x2695e5);const _0x180cb9=document['getElementById']('quick-edit-user-id'),_0x5933d3=document['getElementById'](_0x54e1db(0x87)),_0x373511=document['getElementById'](_0x54e1db(0x2a7)),_0x9c6105=document[_0x54e1db(0x2de)](_0x54e1db(0x2ad)),_0x9b86fb=document[_0x54e1db(0x2de)](_0x54e1db(0x85));if(!_0x180cb9||!_0x5933d3||!_0x373511||!_0x9c6105||!_0x9b86fb){console['error']('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x180cb9['value']=_0x263ce0,_0x5933d3['textContent']=_0x2695e5[_0x54e1db(0x170)]||_0x2695e5['username']||'Unknown\x20User',_0x373511['textContent']=_0x2695e5[_0x54e1db(0x251)]||'No\x20email',_0x9c6105['textContent']=(_0x2695e5['points']||0x0)['toLocaleString'](),_0x9b86fb['reset']();const _0x303454=document[_0x54e1db(0x2de)]('quick-add');_0x303454&&(_0x303454['checked']=!![]);_0x43836e[_0x54e1db(0x9a)]['add'](_0x54e1db(0xdb)),console[_0x54e1db(0x10b)]('Modal\x20opened\x20successfully');const _0x2d246c=document['getElementById']('quick-points-amount');_0x2d246c&&setTimeout(()=>_0x2d246c['focus'](),0x64);}catch(_0x1a5234){console['error'](_0x54e1db(0x1b0),_0x1a5234),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x1a5234['message'],_0x54e1db(0x28a));}}function closeQuickEditModal(){const _0x4ec779=document['getElementById']('quick-edit-points-modal');_0x4ec779&&_0x4ec779['classList']['remove']('active');}async function handleQuickEditPoints(_0x3ef7e2){const _0x560f4a=a2_0x2d6ae0;_0x3ef7e2[_0x560f4a(0x1a5)]();const _0x36f682=document[_0x560f4a(0x2de)]('quick-edit-user-id')['value'],_0x6ec35=document[_0x560f4a(0xaa)]('input[name=\x22quick-action\x22]:checked')['value'],_0x1fe147=parseInt(document['getElementById']('quick-points-amount')['value']),_0x2e907b=document['getElementById']('quick-points-reason')['value']['trim']();console[_0x560f4a(0x10b)]('Processing\x20points\x20edit:',{'userId':_0x36f682,'action':_0x6ec35,'amount':_0x1fe147,'reason':_0x2e907b});if(!_0x36f682||!_0x1fe147||_0x1fe147<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x36f682,_0x6ec35,_0x1fe147,_0x2e907b),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log'](_0x560f4a(0x25c),_0x36f682);}catch(_0x59b3cd){console[_0x560f4a(0x28a)](_0x560f4a(0x144),_0x59b3cd),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x59b3cd['message'],'error');}}async function searchUsersForPoints(){const _0x3931be=a2_0x2d6ae0,_0x21c294=document['getElementById']('points-user-search')['value'][_0x3931be(0x118)]()[_0x3931be(0x252)](),_0x463629=document['getElementById']('user-search-results');if(!_0x21c294||_0x21c294['length']<0x2){_0x463629[_0x3931be(0x7d)]='';return;}_0x463629['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x864536=collection(db,'userProfiles'),_0x389ec6=await getDocs(_0x864536),_0x8b5ce5=[];_0x389ec6['forEach'](_0x52db21=>{const _0x2c5fdf=_0x3931be,_0x59e4f2=_0x52db21['data'](),_0x321981=(_0x59e4f2['displayName']||_0x59e4f2[_0x2c5fdf(0x269)]||'')['toLowerCase'](),_0x5b0cdb=(_0x59e4f2[_0x2c5fdf(0x251)]||'')['toLowerCase']();(_0x321981['includes'](_0x21c294)||_0x5b0cdb[_0x2c5fdf(0x2c3)](_0x21c294))&&_0x8b5ce5[_0x2c5fdf(0x10f)]({'id':_0x52db21['id'],..._0x59e4f2});});if(_0x8b5ce5['length']===0x0){_0x463629['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x463629[_0x3931be(0x7d)]='',_0x8b5ce5[_0x3931be(0x135)](_0x452863=>{const _0x18c40e=_0x3931be,_0x1ab98a=document[_0x18c40e(0xeb)]('div');_0x1ab98a['className']='search-result-item',_0x1ab98a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x452863['displayName']||_0x452863['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x452863[_0x18c40e(0x251)]||'No\x20email')+_0x18c40e(0x21b)+(_0x452863['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1ab98a['addEventListener']('click',()=>selectUserForPoints(_0x452863)),_0x463629[_0x18c40e(0x222)](_0x1ab98a);});}catch(_0x1e1692){console['error']('Error\x20searching\x20users:',_0x1e1692),_0x463629['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x5d1eed){const _0x2660bb=a2_0x2d6ae0;document[_0x2660bb(0x2de)]('selected-user-name')['textContent']=_0x5d1eed['displayName']||_0x5d1eed['username']||'Unknown\x20User',document['getElementById']('selected-user-points')[_0x2660bb(0x1dc)]=(_0x5d1eed['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x5d1eed['id'],document['getElementById']('selected-user-info')['style']['display']='block',document[_0x2660bb(0x2de)]('points-management-forms')['style']['display']='block',document['getElementById']('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')[_0x2660bb(0x92)]='';}async function handleModifyPoints(_0x396a90){const _0x22697c=a2_0x2d6ae0;_0x396a90['preventDefault']();const _0x33841f=document[_0x22697c(0x2de)]('selected-user-id')['value'],_0x5d9e73=document[_0x22697c(0x2de)]('points-action')[_0x22697c(0x92)],_0x10b2c5=parseInt(document['getElementById']('points-amount')['value']),_0x23e09b=document[_0x22697c(0x2de)](_0x22697c(0x81))['value'][_0x22697c(0x118)]();if(!_0x33841f||!_0x10b2c5||_0x10b2c5<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x33841f,_0x5d9e73,_0x10b2c5,_0x23e09b),document['getElementById']('modify-points-form')['reset']();const _0x221a66=doc(db,'userProfiles',_0x33841f),_0xd1224e=await getDoc(_0x221a66);if(_0xd1224e['exists']()){const _0x4c30ed=_0xd1224e[_0x22697c(0x290)]();document['getElementById'](_0x22697c(0x1b5))[_0x22697c(0x1dc)]=(_0x4c30ed[_0x22697c(0x229)]||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x46f812){console['error']('Error\x20modifying\x20points:',_0x46f812),showNotification(_0x22697c(0x14c)+_0x46f812[_0x22697c(0x11b)],'error');}}async function loadPointsHistory(){const _0x581ed2=a2_0x2d6ae0,_0x4fbb40=document[_0x581ed2(0x2de)]('points-history-table-body');if(!_0x4fbb40)return;_0x4fbb40['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x318480=collection(db,'pointsHistory'),_0x38e601=query(_0x318480,orderBy('timestamp','desc'),limit(0x32)),_0x3e034a=await getDocs(_0x38e601);if(_0x3e034a['empty']){_0x4fbb40['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x4fbb40['innerHTML']='',_0x3e034a[_0x581ed2(0x135)](_0x7b49b2=>{const _0x2aa2b6=_0x581ed2,_0x4edf1e=_0x7b49b2[_0x2aa2b6(0x290)](),_0x316ccb=document['createElement']('tr'),_0x569f38=_0x4edf1e['timestamp']?new Date(_0x4edf1e['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x2aa2b6(0xae);let _0x39b7f3='';switch(_0x4edf1e[_0x2aa2b6(0xd4)]){case _0x2aa2b6(0x288):_0x39b7f3='Added\x20'+_0x4edf1e['amount']+'\x20points';break;case'subtract':_0x39b7f3='Subtracted\x20'+_0x4edf1e['amount']+_0x2aa2b6(0x8b);break;case'set':_0x39b7f3='Set\x20to\x20'+_0x4edf1e[_0x2aa2b6(0xa1)]+'\x20points';break;default:_0x39b7f3=_0x4edf1e['action']+'\x20'+_0x4edf1e[_0x2aa2b6(0xa1)]+_0x2aa2b6(0x8b);}_0x316ccb[_0x2aa2b6(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x569f38+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4edf1e[_0x2aa2b6(0x170)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x39b7f3+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x4edf1e['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4edf1e['previousPoints']||0x0)+'\x20\x20'+(_0x4edf1e['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4edf1e['reason']||_0x2aa2b6(0x120))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4edf1e['adminEmail']||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4fbb40['appendChild'](_0x316ccb);});}catch(_0x1db3ab){console['error']('Error\x20loading\x20points\x20history:',_0x1db3ab),_0x4fbb40['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x1db3ab[_0x581ed2(0x11b)]+'</td></tr>';}}function filterPointsOverview(){const _0x2317de=a2_0x2d6ae0,_0x39a008=document['getElementById'](_0x2317de(0xbe))[_0x2317de(0x92)]['toLowerCase']();if(!window[_0x2317de(0x262)])return;const _0x5227b7=window['allUsersPoints']['filter'](_0xfb895d=>{const _0xce5c9f=_0x2317de,_0x20a2aa=(_0xfb895d['displayName']||_0xfb895d['username']||'')['toLowerCase'](),_0xc9f475=(_0xfb895d['email']||'')['toLowerCase']();return _0x20a2aa[_0xce5c9f(0x2c3)](_0x39a008)||_0xc9f475[_0xce5c9f(0x2c3)](_0x39a008);});renderPointsOverview(_0x5227b7);}function sortPointsOverview(){const _0xc1a2f1=a2_0x2d6ae0,_0x14926c=document[_0xc1a2f1(0x2de)]('points-sort-order')[_0xc1a2f1(0x92)];if(!window['allUsersPoints'])return;const _0x30320c=[...window['allUsersPoints']];switch(_0x14926c){case'points-desc':_0x30320c['sort']((_0x48d47b,_0x4d674f)=>(_0x4d674f['points']||0x0)-(_0x48d47b[_0xc1a2f1(0x229)]||0x0));break;case'points-asc':_0x30320c[_0xc1a2f1(0x2ae)]((_0x2a9c58,_0x3a6935)=>(_0x2a9c58['points']||0x0)-(_0x3a6935['points']||0x0));break;case'name-asc':_0x30320c[_0xc1a2f1(0x2ae)]((_0x449ac9,_0x1ec9ac)=>{const _0x34198b=_0xc1a2f1,_0xcb6455=(_0x449ac9['displayName']||_0x449ac9[_0x34198b(0x269)]||'')['toLowerCase'](),_0x3ea991=(_0x1ec9ac[_0x34198b(0x170)]||_0x1ec9ac['username']||'')['toLowerCase']();return _0xcb6455['localeCompare'](_0x3ea991);});break;case'name-desc':_0x30320c['sort']((_0x51025f,_0x343416)=>{const _0x4dcea8=_0xc1a2f1,_0x471c7c=(_0x51025f['displayName']||_0x51025f['username']||'')[_0x4dcea8(0x252)](),_0x1aa772=(_0x343416['displayName']||_0x343416['username']||'')[_0x4dcea8(0x252)]();return _0x1aa772['localeCompare'](_0x471c7c);});break;}renderPointsOverview(_0x30320c);}async function handleAwardItem(_0x271877){const _0x46a746=a2_0x2d6ae0;_0x271877['preventDefault']();const _0x11dad4=document['getElementById']('selected-user-id')['value'],_0x1de3cb=document['getElementById']('store-item-select')['value'],_0x10073b=document['getElementById']('award-reason')[_0x46a746(0x92)][_0x46a746(0x118)]();if(!_0x11dad4||!_0x1de3cb){showNotification(_0x46a746(0x121),'error');return;}try{showNotification('Store\x20item\x20awarded\x20successfully','success'),document['getElementById']('award-item-form')['reset']();}catch(_0x2c622e){console['error']('Error\x20awarding\x20item:',_0x2c622e),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x2c622e[_0x46a746(0x11b)],'error');}}async function loadUserPointsHistory(_0x3e6694){const _0x15c8cd=a2_0x2d6ae0;try{const _0x417797=collection(db,'pointsHistory'),_0x275db6=query(_0x417797,where('userId','==',_0x3e6694),orderBy('timestamp','desc')),_0x545aee=await getDocs(_0x275db6);console['log']('Found\x20'+_0x545aee['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x3e6694),showNotification('User\x20has\x20'+_0x545aee['size']+_0x15c8cd(0x1a4),'info');}catch(_0x2bc879){console[_0x15c8cd(0x28a)]('Error\x20loading\x20user\x20points\x20history:',_0x2bc879),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x3d5bbd=a2_0x2d6ae0;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x394189=collection(db,'userProfiles'),_0x3b58aa=await getDocs(_0x394189);if(_0x3b58aa['empty']){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x48c238=0x0,_0x3e5dc4=0x0;const _0x3d12e1=writeBatch(db);let _0x22314f=0x0;return console['log'](_0x3d5bbd(0x1ae)+_0x3b58aa[_0x3d5bbd(0x1cb)]+'\x20users\x20to\x20check...'),_0x3b58aa['forEach'](_0x108c38=>{const _0x3e57a1=_0x3d5bbd,_0x2c7d2d=_0x108c38['data']();_0x2c7d2d['points']===undefined||_0x2c7d2d[_0x3e57a1(0x229)]===null?(_0x3d12e1['update'](_0x108c38['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x48c238++,_0x22314f++,console[_0x3e57a1(0x10b)]('Queued\x20'+(_0x2c7d2d[_0x3e57a1(0x170)]||_0x2c7d2d[_0x3e57a1(0x269)]||_0x2c7d2d['email']||_0x3e57a1(0xae))+_0x3e57a1(0xe9))):(_0x3e5dc4++,console['log']((_0x2c7d2d['displayName']||_0x2c7d2d[_0x3e57a1(0x269)]||_0x2c7d2d['email']||'Unknown')+'\x20already\x20has\x20points:\x20'+_0x2c7d2d['points'])),_0x22314f>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x48c238>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x48c238+'\x20users...'),await _0x3d12e1['commit'](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x48c238+_0x3d5bbd(0x1f8))):console['log'](_0x3d5bbd(0x25f)),console[_0x3d5bbd(0x10b)]('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x3b58aa['size']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x48c238+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x3e5dc4),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x48c238+_0x3d5bbd(0x270)+_0x3e5dc4+'\x20users\x20already\x20had\x20points.',_0x3d5bbd(0x1a0)),window[_0x3d5bbd(0x262)]&&loadPointsOverview(),{'totalUsers':_0x3b58aa['size'],'usersUpdated':_0x48c238,'usersAlreadyHadPoints':_0x3e5dc4};}catch(_0x2258ae){console[_0x3d5bbd(0x28a)]('Error\x20initializing\x20points\x20field:',_0x2258ae),showNotification(_0x3d5bbd(0xa0)+_0x2258ae['message'],'error');throw _0x2258ae;}}function a2_0x1d87(){const _0x415577=['input[name=\x22test-match-ladder\x22]','create-test-match-form','Failed\x20to\x20delete\x20match:\x20','addEventListener','manage-ranks','Match\x20Highlight','history-type-filter','users-table-body','innerHTML','playerId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','updatedAt','points-reason','edit-highlight-map-input','button[type=\x22submit\x22]','cloneNode','quick-edit-points-form','.section-header','quick-edit-display-name','You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','current-ladder-display','current-ribbons-list','\x20points','resimulateMatch','\x20total\x20matches\x20across\x20all\x20ladders','No\x20player\x20selected','Error\x20adding\x20ribbon:','bar','Emerald','value','assign-trophy-modal','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','Modal\x20should\x20now\x20be\x20visible','cancel-article-btn','Error\x20deleting\x20player:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','Create\x20test\x20match\x20button\x20clicked','classList','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','matchDate','#users-table-body\x20tr[data-username=\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22','Match\x20deleted\x20successfully','Error\x20initializing\x20points:\x20','amount','info','date','rejected-count','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','trophies-table-body','No\x20radio\x20button\x20found\x20for\x20current\x20ladder:','No\x20ELO\x20history\x20found\x20for\x20player\x20','\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelector','Article\x20not\x20found','getAttribute','inactive-players','Unknown','W\x20/\x20','mapName','Initializing\x20points\x20field\x20for\x20user\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','lastVisible','Completed!\x20Processed\x20','Opening\x20create\x20test\x20match\x20modal','unknown','Role\x20\x22','from','Quick\x20edit\x20clicked\x20for\x20user:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','article-title','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','points-overview-search','set-elo-value','trace','#e0e0e0','startDate','assign-trophy-form','disabled','Load\x20ribbons\x20data\x20clicked','loading-cell','trophy-preview-container','toLocaleString','winnerComment','content','cells','createdBy','edit-match-loser','pointsHistory','highlight-map-container','highlight-type','Error\x20promoting\x20player:','Create\x20test\x20match\x20button\x20setup\x20complete','ref','action','highlight-map','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','highlight-video-preview-container','./ladderalgorithm.js','Error\x20loading\x20inactive\x20players:','catch','active','console','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','loserDemoLink','lastPointsModified','imageUrl','lastMatch','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','\x20Missing','Highlight\x20added\x20successfully!','playerRibbons','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','previousElementSibling','User\x20data\x20loaded:','\x20for\x20points\x20initialization','</td></tr>','createElement','add-new-role-btn','Error\x20in\x20bulk\x20award\x20process:\x20','flex','roleName','Highlight','Player\x20Achievement','matchInfo','setHours','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','toDate','edit-match-winner-comment','Matches\x20Played','manage-levels-ribbons','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','MAX_SAFE_INTEGER','View\x20player\x20details\x20for\x20','role','assign-trophy-name','userProfiles','#1976d2','quick-edit-points-modal','Attempting\x20to\x20demote\x20','load-inactive-players-data','Setting\x20up\x20points\x20action\x20buttons...','map','login.html','edit-match-modal','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.','elo-history','Found\x20specific\x20role:\x20','Monday','log','TestLoser','Create\x20New\x20','common','push','setAttribute','loserUsername','keypress','change','input[name=\x22set-elo-ladder\x22]:checked','Friday','Failed\x20to\x20load\x20match\x20data','input[name=\x22promote-ladder\x22]:checked','trim','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','winnerScore','message','winnerUsername','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','edit-highlight-playerProfileUrl-input','removeAttribute','No\x20reason\x20provided','Please\x20select\x20a\x20user\x20and\x20store\x20item','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','#CD7F32','\x20to\x20','removeEventListener','Loaded\x20','Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!','getRankName','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','highlight-loser-name','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Error\x20demoting\x20player:','high-points','\x20points.\x20Skipped\x20','<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes','approvedMatchesD2','highlight-match-info','block','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','highlight-title','forEach','\x20quick\x20edit\x20buttons','click','Unknown\x20User','body','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20','\x20section','admin','wins','Error\x20resolving\x20username\x20for\x20','promotedBy','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','ladder','borderRadius','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>','Error\x20updating\x20points:','Standard','./promotions.js','Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','edit-match-loser-comment','Could\x20not\x20find\x20player\x20documents','match-details-container','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','Failed\x20to\x20modify\x20points:\x20','className','destroy','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','.sidebar-nav\x20.nav-item[data-section=\x22','mapVersion','rgba(25,\x20118,\x20210,\x200.7)','update','playerRibbonsD3','.form-group','creatorImageUrl','dashboard','Setting\x20up\x20create\x20test\x20match\x20modal\x20events','.edit-trophy-btn','trophy-modal','Firebase\x20connection\x20test\x20successful!','.empty-state','userId','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','rank-distribution-chart','highlight-achievement-player','Error\x20loading\x20match\x20data:','D2\x20Players','length','onerror','uid','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','highlight-creator-image','manage-players','#article-modal\x20.close-btn','test','timestamp','user-roles-section','mapPlayed','closest','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','displayName','edit-match-winner-demo','load-users-data','\x20-\x20','playersD2','search-ribbon-user-btn','highlight-map-creator','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>','elo-history-table-body','Match\x20updated\x20successfully','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','src','Error\x20loading\x20ribbons:','dataset','Non-Participant','\x22\x20data-ladder=\x22','match','loserId','highlight-form','Error\x20applying\x20filters:','Bulk\x20award:','highlights','Username\x20','Modal\x20cancel\x20button\x20clicked','split','demotion','elo','load-matches-data','ribbon-type-select','.admin-action','currentTarget','Switched\x20to\x20','highlight-winner-score','System','name','#players.content-section.active','edit-match-loser-suicides','Error\x20loading\x20articles:','\x20ladder!','modifiedBy','Setting\x20up\x20Manage\x20Points\x20section','highlight-match-link','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','Setting\x20up\x20create\x20test\x20match\x20button','sources','target','</span>','Submit\x20button\x20clicked\x20directly','success','seconds','#users-table-body\x20tr','.view-player-btn','\x20points\x20history\x20entries','preventDefault','achievement','then','img','promotion','videoId','d2-prev-page','Winner\x20and\x20loser\x20usernames\x20are\x20required','submittedBy','Found\x20','trophyDefinitions','Error\x20opening\x20quick\x20edit\x20modal:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>','getComputedStyle','Successfully\x20promoted\x20','page','selected-user-points','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20','opacity','highlight-modal-title','parentNode','Modal\x20element\x20found:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','trophy-image-preview','DOMContentLoaded','No\x20description','Error\x20loading\x20players:','edit-highlight-type-select','Found\x20user\x20in\x20','manage-points','playersD3','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','Highlight\x20updated\x20successfully!','Modal\x20setup\x20complete','highlight-map-creator-container','apply','YouTube\x20Video\x20ID\x20(Optional)','size','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20','#50C878','Never','Loser\x20','Error\x20loading\x20ELO\x20history:','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','eloRating','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','edit-highlight-id','ribbon-target-ladder','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','image','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Please\x20enter\x20a\x20username','achievementPlayer','textContent','Simple\x20test\x20match\x20created\x20successfully','0.6','d1-next-page','{}.constructor(\x22return\x20this\x22)(\x20)','display','Error\x20setting\x20up\x20admin\x20dashboard','currentUser','#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn','non-participants','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','position','article-id','achievementType','cancel-edit-btn','article-author','trophy-rarity\x20','\x22\x20not\x20found\x20in\x20','\x20ladder','nonParticipants','assign-trophy-title','Username\x20input\x20set\x20to:\x20','Failed\x20to\x20send\x20Discord\x20notification:','winnerDemoLink','.close-btn','match-type','\x20total\x20players\x20in\x20the\x20','.remove-role-btn','\x20users','highlight-achievement-type','\x20-\x20Feature\x20coming\x20soon','matchLink','RejectedD1','View\x20history\x20clicked\x20for\x20user:','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','Searching\x20for\x20player\x20in\x20','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','1200','<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>','getDate','.edit-ribbons-btn','firstVisible','loading','remove','keys','approvedMatchesD3','\x22\x20not\x20found\x20in\x20any\x20collection','Trophy\x20created\x20successfully','creator','#FFD700','.loading-cell','\x20Exists','\x20allowed\x20tabs:','color','validation-results-container','award-all-pilots-btn','createdAt','create-test-match-modal','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','loserScore','points-overview-table-body','empty','load-trophies-data','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','manage-trophies','Error\x20saving\x20article:','Gold','Highlight\x20deleted\x20successfully','.no-results','settings','appendChild','approvedMatches','creator-type','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>','Error','Article\x20created\x20successfully','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22','points','add-player-form','Article\x20updated\x20successfully','Modal\x20close\x20button\x20clicked','Role\x20\x27','highlight-submitted-by','Creating\x20test\x20match\x20without\x20player\x20validation...','Load\x20inactive\x20players\x20data\x20clicked','rarity','highlight-achievement-player-container','eloHistoryD3','manage-ribbons','Highlight\x20created\x20successfully!','set','load-articles-data','\x20vs\x20','all','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','none','Error\x20deleting\x20match:','highlight-video-preview','N/A','moderately-inactive','winnerId','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x20D3\x20matches.\x20','Using\x20collection:\x20','roleColor','d2-next-page','demote-player-btn','manage-articles','Found\x20player\x20with\x20current\x20ELO:\x20','trophy-image-url','title','substring','Setting\x20permissions\x20based\x20on\x20role:\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','.ladder-switch\x20input','NonParticipant','test-match-winner-username','email','toLowerCase','match-row','eloHistoryD2','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','assign-player-username','article-image-url','Error\x20loading\x20users:','set-role-modal','Query\x20executed.\x20Empty:','load-dashboard-data','Points\x20updated\x20successfully\x20for\x20user:','find','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','No\x20users\x20needed\x20points\x20field\x20initialization','commit','rankDistribution','allUsersPoints','delete-match-confirm-modal','exists','required','Updating\x20role\x20for\x20','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','.delete-match-btn','username','winnerName','hidden','type','focus','reset','Query\x20created:','\x20users.\x20','awardedAt','pending-count','Error\x20creating\x20activity\x20chart:','Error\x20loading\x20trophy\x20data:','match-count','replaceChild','-page-indicator','playerProfileUrl','highlight-winner-name','matches-start-date','\x20in\x20','Firebase\x20connection\x20test\x20failed:','desc','bind','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','matches-search','Promotion','pendingResimulateData','article-modal','player-count','#highlight-modal\x20.close-btn','Create\x20test\x20match\x20modal\x20not\x20found','matches-next-page','add','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','error','#players-table-body\x20tr','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','input[name=\x22demote-ladder\x22]:checked','trophy-id','activity-chart','data','\x20Rank\x20Distribution','Error\x20loading\x20trophies:','Saturday','articles','visibility','Bulk\x20award:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','eloHistory','warning','docs','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','achievementDetails','roleAssignedAt','.delete-trophy-btn','Silver','article-content','promote-username','marginBottom','Setting\x20up\x20Manage\x20Highlights\x20section','highlight-map-version','matches-table-body','quick-edit-email','\x20points\x20to\x20','losses','.edit-match-btn','promote-form','demote-modal','quick-edit-current-points','sort','newElo','role-filter','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','match_result','toLocaleDateString','constructor','Defaulted\x20to\x20D1\x20ladder','get','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','ribbons','submit','Player\x20Name\x20is\x20required','players','Auth:','Load\x20articles\x20data\x20clicked','fromDate','approvedAt','highlight-description','Player\x20not\x20found\x20in\x20','level','includes','trophy-preview-img','Error\x20opening\x20assign\x20trophy\x20modal:','fa-check-circle','Failed\x20to\x20save\x20trophy:\x20','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','style','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','Failed\x20to\x20resimulate\x20match:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','stopPropagation','contains','demote-username','highlight-achievement-image','daysSinceMatch','edit-match-map','Starting\x20points\x20award\x20process...','save-player-btn',',\x20Loser\x20','querySelectorAll','input','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','Attaching\x20background\x20click\x20listener.','Error\x20loading\x20ribbons\x20data','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','getElementById','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','loserName'];a2_0x1d87=function(){return _0x415577;};return a2_0x1d87();}function addPointsMigrationButton(){const _0x319ed9=a2_0x2d6ae0,_0x34dfd5=document['getElementById']('manage-points');if(!_0x34dfd5)return;if(document['getElementById']('migrate-points-btn'))return;const _0x37778d=document['createElement']('div');_0x37778d[_0x319ed9(0x14d)]='migration-section',_0x37778d['style'][_0x319ed9(0x2a3)]='20px',_0x37778d['style']['padding']='15px',_0x37778d[_0x319ed9(0x2ca)]['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0x37778d['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x37778d['style'][_0x319ed9(0x142)]='5px',_0x37778d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x53363f=_0x34dfd5[_0x319ed9(0xaa)](_0x319ed9(0x86));_0x53363f&&_0x53363f['insertAdjacentElement']('afterend',_0x37778d),document['getElementById']('migrate-points-btn')[_0x319ed9(0x78)](_0x319ed9(0x137),async function(){const _0x193f67=_0x319ed9;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this[_0x193f67(0xc4)]=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this[_0x193f67(0x7d)]='<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed',this['style']['backgroundColor']='#28a745',setTimeout(()=>{const _0x229092=_0x193f67;_0x37778d['style']['display']=_0x229092(0x23b);},0xbb8);}catch(_0xba2e45){this[_0x193f67(0x7d)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x5da0ae=a2_0x2d6ae0;console['log'](_0x5da0ae(0x198)),addPointsMigrationButton();const _0x40b302=document['getElementById']('points-user-search');_0x40b302&&_0x40b302['addEventListener'](_0x5da0ae(0x2d9),debounce(searchUsersForPoints,0x12c));const _0x14d27d=document[_0x5da0ae(0x2de)]('modify-points-form');_0x14d27d&&_0x14d27d['addEventListener']('submit',handleModifyPoints);const _0x583bc2=document['getElementById']('award-item-form');_0x583bc2&&_0x583bc2[_0x5da0ae(0x78)](_0x5da0ae(0x2b9),handleAwardItem);const _0x41a4e2=document['getElementById']('points-overview-search');_0x41a4e2&&_0x41a4e2[_0x5da0ae(0x78)](_0x5da0ae(0x2d9),debounce(filterPointsOverview,0x12c));const _0x57c23a=document['getElementById']('points-sort-order');_0x57c23a&&_0x57c23a[_0x5da0ae(0x78)](_0x5da0ae(0x113),sortPointsOverview);const _0x4f1ad9=document['getElementById']('refresh-points-overview');_0x4f1ad9&&_0x4f1ad9[_0x5da0ae(0x78)]('click',loadPointsOverview);const _0x150585=document[_0x5da0ae(0x2de)]('bulk-award-points-btn');_0x150585&&_0x150585[_0x5da0ae(0x78)]('click',async()=>{confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x150585['disabled']=!![],_0x150585['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x3c0ce2(),_0x150585['disabled']=![],_0x150585['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x251f93=document[_0x5da0ae(0x2de)](_0x5da0ae(0x213));_0x251f93&&_0x251f93['addEventListener']('click',awardPointsToAllPilots);async function _0x3c0ce2(){const _0x5297c5=_0x5da0ae;try{showNotification(_0x5297c5(0x147),_0x5297c5(0xa2));const _0x2ac233={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x7b4458=0x0,_0x1b4e7a=0x0,_0x2c7757=0x0,_0x29e925=0x0,_0x3f603a=0x0,_0x57bfed=0x0;const _0x33ba48=new Set(),_0x4e398a=collection(db,'pointsHistory'),_0x182bb8=query(_0x4e398a,where('reason','>=',_0x5297c5(0x184)),where('reason','<=','Bulk\x20award:')),_0x521f2c=await getDocs(_0x182bb8);_0x521f2c['forEach'](_0x532a03=>{const _0x21b05f=_0x5297c5,_0x371818=_0x532a03['data'](),_0xebe386=_0x371818['reason']||'',_0x5eedc2=_0xebe386[_0x21b05f(0x180)](/Match ID: ([a-zA-Z0-9]+)/);_0x5eedc2&&_0x5eedc2[0x1]&&_0x33ba48['add'](_0x5eedc2[0x1]);}),console[_0x5297c5(0x10b)](_0x5297c5(0x1ae)+_0x33ba48['size']+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x1ce2fe,_0x4c59f6,_0x10e427]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,_0x5297c5(0x130))),getDocs(collection(db,'approvedMatchesD3'))]),_0x381797=_0x1ce2fe['size']+_0x4c59f6[_0x5297c5(0x1cb)]+_0x10e427['size'];showNotification(_0x5297c5(0x1ae)+_0x381797+_0x5297c5(0x8d),'info');const _0x47280c=async(_0x2e5387,_0x166faa)=>{const _0x1cdac8=_0x5297c5;let _0x3683ad=writeBatch(db);const _0x461342=[];let _0x1e8a13=0x0;for(const _0x31fc0d of _0x2e5387['docs']){try{if(_0x33ba48['has'](_0x31fc0d['id'])){if(_0x166faa==='D1')_0x57bfed++;if(_0x166faa==='D2')_0x57bfed++;if(_0x166faa==='D3')_0x57bfed++;continue;}const _0x522db0=_0x31fc0d['data'](),_0x3d647d=_0x522db0['subgameType']||_0x1cdac8(0x145),_0x3e2ba9=_0x2ac233[_0x3d647d]||0xa;let _0x33803d=_0x522db0[_0x1cdac8(0x240)];if(!_0x33803d&&_0x522db0['winnerUsername']){const [_0x406f24,_0xd20a00,_0x5e6ffc]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x522db0['winnerUsername']))),getDocs(query(collection(db,_0x1cdac8(0x174)),where('username','==',_0x522db0['winnerUsername']))),getDocs(query(collection(db,'playersD3'),where(_0x1cdac8(0x269),'==',_0x522db0['winnerUsername'])))]);if(!_0x406f24[_0x1cdac8(0x219)])_0x33803d=_0x406f24['docs'][0x0]['id'];else{if(!_0xd20a00['empty'])_0x33803d=_0xd20a00['docs'][0x0]['id'];else{if(!_0x5e6ffc[_0x1cdac8(0x219)])_0x33803d=_0x5e6ffc[_0x1cdac8(0x29b)][0x0]['id'];}}}let _0x273f8e=_0x522db0[_0x1cdac8(0x181)];if(!_0x273f8e&&_0x522db0['loserUsername']){const [_0x3c2356,_0x522444,_0x5a1f5c]=await Promise[_0x1cdac8(0x239)]([getDocs(query(collection(db,_0x1cdac8(0x2bb)),where('username','==',_0x522db0['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x522db0['loserUsername']))),getDocs(query(collection(db,_0x1cdac8(0x1c3)),where(_0x1cdac8(0x269),'==',_0x522db0['loserUsername'])))]);if(!_0x3c2356['empty'])_0x273f8e=_0x3c2356[_0x1cdac8(0x29b)][0x0]['id'];else{if(!_0x522444['empty'])_0x273f8e=_0x522444['docs'][0x0]['id'];else{if(!_0x5a1f5c['empty'])_0x273f8e=_0x5a1f5c[_0x1cdac8(0x29b)][0x0]['id'];}}}if(_0x33803d&&_0x273f8e){const _0x5d0c9a=doc(db,'userProfiles',_0x33803d),_0x43f3c5=doc(db,'userProfiles',_0x273f8e),[_0x326563,_0x28e450]=await Promise[_0x1cdac8(0x239)]([getDoc(_0x5d0c9a),getDoc(_0x43f3c5)]);if(_0x326563['exists']()){const _0x5a6244=_0x326563['data'](),_0xb59d8a=_0x5a6244['points']||0x0;_0x3683ad['update'](_0x5d0c9a,{'points':_0xb59d8a+_0x3e2ba9,'lastPointsModified':serverTimestamp()}),_0x461342['push']({'userId':_0x33803d,'userEmail':_0x5a6244['email']||'unknown','displayName':_0x5a6244[_0x1cdac8(0x170)]||_0x522db0[_0x1cdac8(0x11c)]||_0x1cdac8(0x138),'action':'add','amount':_0x3e2ba9,'previousPoints':_0xb59d8a,'newPoints':_0xb59d8a+_0x3e2ba9,'reason':_0x1cdac8(0x296)+_0x3d647d+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x31fc0d['id']+_0x1cdac8(0x173)+_0x166faa,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}if(_0x28e450['exists']()){const _0x406ea7=_0x28e450[_0x1cdac8(0x290)](),_0x22ce09=_0x406ea7['points']||0x0;_0x3683ad['update'](_0x43f3c5,{'points':_0x22ce09+_0x3e2ba9,'lastPointsModified':serverTimestamp()}),_0x461342['push']({'userId':_0x273f8e,'userEmail':_0x406ea7['email']||_0x1cdac8(0xb6),'displayName':_0x406ea7['displayName']||_0x522db0['loserUsername']||'Unknown\x20User','action':'add','amount':_0x3e2ba9,'previousPoints':_0x22ce09,'newPoints':_0x22ce09+_0x3e2ba9,'reason':'Bulk\x20award:\x20'+_0x3d647d+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x31fc0d['id']+_0x1cdac8(0x173)+_0x166faa,'adminEmail':auth['currentUser'][_0x1cdac8(0x251)],'timestamp':serverTimestamp()});}_0x29e925+=_0x3e2ba9*0x2,_0x1e8a13+=0x2,_0x33ba48['add'](_0x31fc0d['id']);if(_0x1e8a13>=0x190){await _0x3683ad['commit']();for(const _0x4f889f of _0x461342){await addDoc(collection(db,'pointsHistory'),_0x4f889f);}_0x3683ad=writeBatch(db),_0x1e8a13=0x0,_0x461342['length']=0x0;}}}catch(_0x2f0a61){console[_0x1cdac8(0x28a)]('Error\x20processing\x20'+_0x166faa+'\x20match\x20'+_0x31fc0d['id']+':',_0x2f0a61),_0x3f603a++;}}if(_0x1e8a13>0x0){await _0x3683ad[_0x1cdac8(0x260)]();for(const _0x584d9e of _0x461342){await addDoc(collection(db,'pointsHistory'),_0x584d9e);}}return{'processed':_0x166faa==='D1'?_0x7b4458:_0x166faa==='D2'?_0x1b4e7a:_0x2c7757};};await _0x47280c(_0x1ce2fe,'D1'),await _0x47280c(_0x4c59f6,'D2'),await _0x47280c(_0x10e427,'D3'),showNotification(_0x5297c5(0xb4)+_0x7b4458+'\x20D1\x20matches,\x20'+_0x1b4e7a+'\x20D2\x20matches,\x20'+_0x2c7757+_0x5297c5(0x242)+('Awarded\x20'+_0x29e925+_0x5297c5(0x12e)+_0x57bfed+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x3f603a),'success'),document['getElementById'](_0x5297c5(0x218))&&loadPointsOverview();}catch(_0x52d44b){console['error']('Error\x20in\x20bulk\x20award\x20points:',_0x52d44b),showNotification(_0x5297c5(0xed)+_0x52d44b['message'],'error');}}const _0x52869b=document['getElementById'](_0x5da0ae(0x100));if(_0x52869b){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x5b92d5=_0x52869b['querySelector']('.close-btn');_0x5b92d5?_0x5b92d5[_0x5da0ae(0x78)]('click',function(){const _0x31e9ee=_0x5da0ae;console[_0x31e9ee(0x10b)](_0x31e9ee(0x22c)),closeQuickEditModal();}):console['warn'](_0x5da0ae(0x1d1));const _0x368619=document['getElementById']('cancel-quick-edit');_0x368619?_0x368619['addEventListener']('click',function(){const _0x81bff7=_0x5da0ae;console['log'](_0x81bff7(0x187)),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x372fc8=document['getElementById']('quick-edit-points-form');_0x372fc8?_0x372fc8[_0x5da0ae(0x78)]('submit',function(_0x357c99){const _0x52fe1b=_0x5da0ae;console[_0x52fe1b(0x10b)]('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x357c99);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x52869b['addEventListener']('click',function(_0x4eb61c){const _0x4eb6d3=_0x5da0ae;_0x4eb61c['target']===_0x52869b&&(console[_0x4eb6d3(0x10b)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x5da0ae(0x28a)](_0x5da0ae(0x127));console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x2ce4f9=a2_0x2d6ae0;try{const _0x370687=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x370687||isNaN(_0x370687)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm('This\x20will\x20award\x20'+_0x370687+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification(_0x2ce4f9(0x2d5),'info');const [_0x2a4630,_0x302d8c,_0x348e05]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,_0x2ce4f9(0x174))),getDocs(collection(db,_0x2ce4f9(0x1c3)))]);console['log']('Found\x20'+_0x2a4630['size']+'\x20D1\x20pilots,\x20'+_0x302d8c['size']+'\x20D2\x20pilots,\x20'+_0x348e05['size']+'\x20D3\x20pilots');const _0x47cbf9=_0x2a4630['size']+_0x302d8c['size']+_0x348e05[_0x2ce4f9(0x1cb)],_0x27a8da=new Map();_0x2a4630[_0x2ce4f9(0x135)](_0x3e0827=>{const _0x4ce16a=_0x2ce4f9,_0x1fe95c=_0x3e0827[_0x4ce16a(0x290)]();_0x27a8da[_0x4ce16a(0x236)](_0x3e0827['id'],{'username':_0x1fe95c['username'],'ladder':'D1'});}),_0x302d8c['forEach'](_0x457190=>{const _0x5e816b=_0x2ce4f9,_0x27cb2d=_0x457190[_0x5e816b(0x290)]();_0x27a8da['set'](_0x457190['id'],{'username':_0x27cb2d['username'],'ladder':'D2'});}),_0x348e05['forEach'](_0x40b2c7=>{const _0x5487ae=_0x2ce4f9,_0x203935=_0x40b2c7[_0x5487ae(0x290)]();_0x27a8da['set'](_0x40b2c7['id'],{'username':_0x203935['username'],'ladder':'D3'});}),console[_0x2ce4f9(0x10b)](_0x2ce4f9(0x1ae)+_0x27a8da[_0x2ce4f9(0x1cb)]+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x1d33ef=0x0,_0x4d2ab8=0x0,_0x118e0a=0x0;const _0x23229a=Array[_0x2ce4f9(0xb8)](_0x27a8da[_0x2ce4f9(0x208)]()),_0xefbac3=0x190;for(let _0x2c6de9=0x0;_0x2c6de9<_0x23229a[_0x2ce4f9(0x163)];_0x2c6de9+=_0xefbac3){const _0x224273=writeBatch(db),_0x17544c=[],_0x51eeef=_0x23229a['slice'](_0x2c6de9,_0x2c6de9+_0xefbac3),_0x1c9ec7=await Promise['all'](_0x51eeef['map'](_0x165391=>getDoc(doc(db,_0x2ce4f9(0xfe),_0x165391))));for(let _0x5ba2e0=0x0;_0x5ba2e0<_0x51eeef[_0x2ce4f9(0x163)];_0x5ba2e0++){try{const _0x59f3ff=_0x51eeef[_0x5ba2e0],_0x1b2668=_0x27a8da['get'](_0x59f3ff),_0xf23c04=_0x1c9ec7[_0x5ba2e0];if(_0xf23c04[_0x2ce4f9(0x264)]()){const _0x217b8a=_0xf23c04['data'](),_0x328d09=_0x217b8a['points']||0x0,_0x1ecd27=_0x328d09+_0x370687;_0x224273[_0x2ce4f9(0x153)](doc(db,_0x2ce4f9(0xfe),_0x59f3ff),{'points':_0x1ecd27,'lastPointsModified':serverTimestamp()}),_0x17544c['push']({'userId':_0x59f3ff,'userEmail':_0x217b8a['email']||_0x2ce4f9(0xb6),'displayName':_0x217b8a['displayName']||_0x1b2668['username']||'Unknown\x20User','action':_0x2ce4f9(0x288),'amount':_0x370687,'previousPoints':_0x328d09,'newPoints':_0x1ecd27,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x1b2668['ladder']+')','adminEmail':auth[_0x2ce4f9(0x1e3)][_0x2ce4f9(0x251)],'timestamp':serverTimestamp()}),_0x4d2ab8+=_0x370687,_0x1d33ef++;}else _0x118e0a++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x1b2668['username']+'\x20('+_0x59f3ff+')');}catch(_0x4ff03d){_0x118e0a++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.[_0x2ce4f9(0x269)]+':',_0x4ff03d);}}await _0x224273[_0x2ce4f9(0x260)]();for(const _0x3e1da9 of _0x17544c){await addDoc(collection(db,'pointsHistory'),_0x3e1da9);}showNotification('Processed\x20'+_0x1d33ef+'/'+_0x47cbf9+'\x20pilots...','info');}showNotification('Complete!\x20Awarded\x20'+_0x4d2ab8+_0x2ce4f9(0x2a8)+_0x1d33ef+'\x20pilots.\x20Errors:\x20'+_0x118e0a,_0x2ce4f9(0x1a0)),document['getElementById'](_0x2ce4f9(0x218))&&loadPointsOverview();}catch(_0x403d1c){console['error']('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x403d1c),showNotification('Error:\x20'+_0x403d1c['message'],'error');}}function setupManageRibbonsSection(){const _0x37747d=a2_0x2d6ae0;console['log']('Setting\x20up\x20Manage\x20Ribbons\x20section');const _0x2ee0bd=document['getElementById']('ribbon-user-search');_0x2ee0bd&&_0x2ee0bd['addEventListener']('input',debounce(searchRibbonUser,0x12c));const _0x3a9a7f=document[_0x37747d(0x2de)](_0x37747d(0x175));_0x3a9a7f&&_0x3a9a7f[_0x37747d(0x78)]('click',searchRibbonUser);const _0x1c3dfc=document['getElementById']('add-ribbon-form');_0x1c3dfc&&_0x1c3dfc[_0x37747d(0x78)]('submit',addRibbon),_0x2ee0bd&&_0x2ee0bd[_0x37747d(0x78)](_0x37747d(0x112),function(_0x112f96){const _0x4116bd=_0x37747d;_0x112f96['key']==='Enter'&&(_0x112f96[_0x4116bd(0x1a5)](),searchRibbonUser());}),console['log']('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x17bc02,_0x10337e,_0x487baf,_0x1685da=''){const _0x5c9d86=a2_0x2d6ae0,_0x166df1=doc(db,_0x5c9d86(0xfe),_0x17bc02),_0x3fa02f=await getDoc(_0x166df1);if(!_0x3fa02f['exists']())throw new Error('User\x20not\x20found');const _0x21cfe0=_0x3fa02f[_0x5c9d86(0x290)](),_0x34ab18=_0x21cfe0[_0x5c9d86(0x229)]!==undefined?_0x21cfe0['points']:0x0;_0x21cfe0[_0x5c9d86(0x229)]===undefined&&(console['log'](_0x5c9d86(0xb1)+(_0x21cfe0[_0x5c9d86(0x170)]||_0x21cfe0[_0x5c9d86(0x251)]||'Unknown')),await updateDoc(_0x166df1,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x450f08=_0x34ab18;switch(_0x10337e){case'add':_0x450f08=_0x34ab18+_0x487baf;break;case'subtract':_0x450f08=Math['max'](0x0,_0x34ab18-_0x487baf);break;case _0x5c9d86(0x236):_0x450f08=_0x487baf;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x166df1,{'points':_0x450f08,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x5c9d86(0xce)),{'userId':_0x17bc02,'userEmail':_0x21cfe0[_0x5c9d86(0x251)]||'unknown','displayName':_0x21cfe0[_0x5c9d86(0x170)]||_0x21cfe0['username']||'Unknown\x20User','action':_0x10337e,'amount':_0x487baf,'previousPoints':_0x34ab18,'newPoints':_0x450f08,'reason':_0x1685da,'adminEmail':auth['currentUser'][_0x5c9d86(0x251)],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x729e04=a2_0x2d6ae0,_0x52b2ab=document[_0x729e04(0x2de)]('points-overview-table-body');if(!_0x52b2ab)return;_0x52b2ab['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x458209=collection(db,_0x729e04(0xfe)),_0x321a69=await getDocs(_0x458209);if(_0x321a69[_0x729e04(0x219)]){_0x52b2ab['innerHTML']=_0x729e04(0x28c);return;}const _0x2f0d09=[];let _0x1e54b2=0x0;_0x321a69['forEach'](_0x2b2397=>{const _0x158317=_0x729e04,_0x4f3fa3=_0x2b2397['data'](),_0x54a33e=_0x4f3fa3['points']!==undefined?_0x4f3fa3['points']:0x0;_0x4f3fa3['points']===undefined&&_0x1e54b2++,_0x2f0d09[_0x158317(0x10f)]({'id':_0x2b2397['id'],..._0x4f3fa3,'points':_0x54a33e});}),_0x1e54b2>0x0&&(console[_0x729e04(0x10b)]('Found\x20'+_0x1e54b2+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x1e54b2+_0x729e04(0x2df),'info')),_0x2f0d09[_0x729e04(0x2ae)]((_0x2ed87e,_0x184acd)=>(_0x184acd[_0x729e04(0x229)]||0x0)-(_0x2ed87e['points']||0x0)),window[_0x729e04(0x262)]=_0x2f0d09,renderPointsOverview(_0x2f0d09);}catch(_0x47556e){console['error']('Error\x20loading\x20points\x20overview:',_0x47556e),_0x52b2ab['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x47556e['message']+_0x729e04(0xea);}}async function loadRibbonsData(){const _0x24b122=a2_0x2d6ae0,_0x1c6550=document[_0x24b122(0x2de)]('ribbons-overview-table-body');if(!_0x1c6550)return;_0x1c6550[_0x24b122(0x7d)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x2b3590,_0x413c7c,_0x4fd1f6]=await Promise['all']([getDocs(collection(db,_0x24b122(0xe5))),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x24b122(0x154)))]);_0x1c6550['innerHTML']='';const _0x55bde4=(_0x44d41c,_0x5f5b94)=>{const _0xad03d3=_0x24b122;_0x44d41c[_0xad03d3(0x135)](_0x1305b6=>{const _0x54a3e1=_0xad03d3,_0x422ac8=_0x1305b6['data'](),_0x33002e=_0x422ac8[_0x54a3e1(0x2b8)]||{},_0x2226ec=Object['keys'](_0x33002e)['length'],_0x27bc4e=document['createElement']('tr');_0x27bc4e[_0x54a3e1(0x7d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x422ac8['username']||'Unknown')+_0x54a3e1(0x1cc)+_0x5f5b94[_0x54a3e1(0x252)]()+'\x22>'+_0x5f5b94+_0x54a3e1(0x133)+_0x2226ec+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x422ac8['lastUpdated']?new Date(_0x422ac8['lastUpdated'][_0x54a3e1(0x1a1)]*0x3e8)['toLocaleDateString']():_0x54a3e1(0xae))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x422ac8['username']+_0x54a3e1(0x17f)+_0x5f5b94+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1c6550['appendChild'](_0x27bc4e);});};_0x55bde4(_0x2b3590,'D1'),_0x55bde4(_0x413c7c,'D2'),_0x55bde4(_0x4fd1f6,'D3'),document['querySelectorAll'](_0x24b122(0x204))[_0x24b122(0x135)](_0xc86e13=>{const _0x3a531c=_0x24b122;_0xc86e13['addEventListener'](_0x3a531c(0x137),function(){const _0x42646a=this['dataset']['username'],_0x3cb5a4=this['dataset']['ladder'];editUserRibbons(_0x42646a,_0x3cb5a4);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x3274ee){console['error']('Error\x20loading\x20ribbons:',_0x3274ee),_0x1c6550['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x24b122(0x2dc),_0x24b122(0x28a));}}async function searchRibbonUser(){const _0xe5b004=a2_0x2d6ae0,_0x5f2598=document['getElementById']('ribbon-user-search')['value'][_0xe5b004(0x118)]();if(!_0x5f2598){showNotification('Please\x20enter\x20a\x20username',_0xe5b004(0x28a));return;}try{const [_0x49e54b,_0x5cc3d3,_0x5a4fea]=await Promise['all']([getDoc(doc(db,_0xe5b004(0xe5),_0x5f2598)),getDoc(doc(db,'playerRibbonsD2',_0x5f2598)),getDoc(doc(db,_0xe5b004(0x154),_0x5f2598))]);let _0x176823=null,_0x66e412=null;if(_0x49e54b[_0xe5b004(0x264)]())_0x176823='D1',_0x66e412=_0x49e54b['data']();else{if(_0x5cc3d3['exists']())_0x176823='D2',_0x66e412=_0x5cc3d3['data']();else _0x5a4fea['exists']()&&(_0x176823='D3',_0x66e412=_0x5a4fea[_0xe5b004(0x290)]());}_0x176823?(document[_0xe5b004(0x2de)]('current-ribbon-user')['textContent']=_0x5f2598,document['getElementById']('ribbon-target-user')['value']=_0x5f2598,document['getElementById'](_0xe5b004(0x1d5))['value']=_0x176823,document['getElementById']('user-ribbon-management')[_0xe5b004(0x2ca)]['display']='block',displayCurrentRibbons(_0x66e412[_0xe5b004(0x2b8)]||{}),showNotification('Found\x20'+_0x5f2598+'\x20in\x20'+_0x176823+'\x20ladder','success')):showNotification('User\x20'+_0x5f2598+'\x20not\x20found\x20in\x20any\x20ladder',_0xe5b004(0x28a));}catch(_0x414653){console['error']('Error\x20searching\x20user:',_0x414653),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x3b33d5){const _0x19754d=a2_0x2d6ae0,_0x34c51a=document['getElementById'](_0x19754d(0x8a));if(!_0x34c51a)return;_0x34c51a[_0x19754d(0x7d)]='';if(Object['keys'](_0x3b33d5)[_0x19754d(0x163)]===0x0){_0x34c51a[_0x19754d(0x7d)]=_0x19754d(0xd6);return;}Object['entries'](_0x3b33d5)['forEach'](([_0x3ec83d,_0x1853db])=>{const _0x54175e=_0x19754d,_0x288b97=document['createElement']('div');_0x288b97['className']='ribbon-item',_0x288b97['innerHTML']=_0x54175e(0xba)+_0x3ec83d+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x1853db[_0x54175e(0x2c2)]||0x1)+_0x54175e(0xf4)+(_0x1853db[_0x54175e(0x271)]?new Date(_0x1853db['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x3ec83d+_0x54175e(0x16f),_0x34c51a['appendChild'](_0x288b97);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x1e565f=>{_0x1e565f['addEventListener']('click',function(){const _0x42d7be=this['dataset']['ribbon'];removeRibbon(_0x42d7be);});});}async function addRibbon(_0x43264a){const _0x4ae2bb=a2_0x2d6ae0;_0x43264a['preventDefault']();const _0x401111=document[_0x4ae2bb(0x2de)]('ribbon-target-user')[_0x4ae2bb(0x92)],_0xb28c89=document['getElementById'](_0x4ae2bb(0x1d5))['value'],_0x5f2e60=document[_0x4ae2bb(0x2de)](_0x4ae2bb(0x18c))['value'],_0x3e9265=parseInt(document[_0x4ae2bb(0x2de)]('ribbon-level')['value']);if(!_0x401111||!_0xb28c89||!_0x5f2e60||!_0x3e9265){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x2fcf28=_0x4ae2bb(0xe5)+(_0xb28c89==='D1'?'':_0xb28c89),_0x41ec3a=doc(db,_0x2fcf28,_0x401111),_0x2ded03=await getDoc(_0x41ec3a),_0x50e811=_0x2ded03['exists']()?_0x2ded03['data']()['ribbons']||{}:{};_0x50e811[_0x5f2e60]={'level':_0x3e9265,'awardedAt':serverTimestamp()},await setDoc(_0x41ec3a,{'username':_0x401111,'ladder':_0xb28c89,'ribbons':_0x50e811,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x5f2e60+'\x20Level\x20'+_0x3e9265+'\x20to\x20'+_0x401111,'success'),displayCurrentRibbons(_0x50e811),document[_0x4ae2bb(0x2de)]('ribbon-type-select')[_0x4ae2bb(0x92)]='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x24cd7f){console['error'](_0x4ae2bb(0x8f),_0x24cd7f),showNotification('Error\x20adding\x20ribbon',_0x4ae2bb(0x28a));}}async function removeRibbon(_0x48515e){const _0x5656e8=a2_0x2d6ae0,_0x4fb33f=document[_0x5656e8(0x2de)]('ribbon-target-user')['value'],_0x1a2bdb=document['getElementById'](_0x5656e8(0x1d5))[_0x5656e8(0x92)];if(!confirm('Remove\x20'+_0x48515e+'\x20from\x20'+_0x4fb33f+'?'))return;try{const _0x1b978c='playerRibbons'+(_0x1a2bdb==='D1'?'':_0x1a2bdb),_0x2806c1=doc(db,_0x1b978c,_0x4fb33f),_0x2194e2=await getDoc(_0x2806c1),_0x51f680=_0x2194e2['exists']()?_0x2194e2['data']()[_0x5656e8(0x2b8)]||{}:{};delete _0x51f680[_0x48515e],await setDoc(_0x2806c1,{'username':_0x4fb33f,'ladder':_0x1a2bdb,'ribbons':_0x51f680,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x48515e+'\x20from\x20'+_0x4fb33f,'success'),displayCurrentRibbons(_0x51f680);}catch(_0x27fff9){console['error']('Error\x20removing\x20ribbon:',_0x27fff9),showNotification('Error\x20removing\x20ribbon',_0x5656e8(0x28a));}}function editUserRibbons(_0x410fb1,_0x36f38b){const _0x378c1b=a2_0x2d6ae0;document['getElementById']('ribbon-user-search')[_0x378c1b(0x92)]=_0x410fb1,searchRibbonUser();}