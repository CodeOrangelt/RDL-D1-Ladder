function a23_0x10d0(){const _0x215235=['__proto__','players','getIdToken','join-username-input','display','Ladder\x20join:\x20D1\x20radio\x20found:','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','warn','target','block','\x22\x20to\x20confirm.','playersCTF','DUOS','textContent','ladder-join-prompt','Error\x20checking\x20ladder\x20status:','position','toLowerCase','className','forEach','ladder-join-status\x20success','console','Verifying\x20username...','ladder-join-status','getElementById','Ladder\x20join:\x20D2\x20radio\x20found:','error','uid','location','value','message','reload','bind','ladder-join-status\x20error','Unknown\x20ladder\x20type:\x20','style'];a23_0x10d0=function(){return _0x215235;};return a23_0x10d0();}function a23_0x3b91(_0x57a0e1,_0x4d76b0){const _0x14d9c0=a23_0x10d0();return a23_0x3b91=function(_0x29dc39,_0x237e57){_0x29dc39=_0x29dc39-0x1d3;let _0x10d0c5=_0x14d9c0[_0x29dc39];return _0x10d0c5;},a23_0x3b91(_0x57a0e1,_0x4d76b0);}const a23_0x29dc39=(function(){let _0x5550d0=!![];return function(_0x71365a,_0x5a6cef){const _0x36e70c=_0x5550d0?function(){if(_0x5a6cef){const _0x59aeeb=_0x5a6cef['apply'](_0x71365a,arguments);return _0x5a6cef=null,_0x59aeeb;}}:function(){};return _0x5550d0=![],_0x36e70c;};}()),a23_0x14d9c0=a23_0x29dc39(this,function(){const _0x2c3a42=a23_0x3b91;let _0xe280f5;try{const _0x544ea3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xe280f5=_0x544ea3();}catch(_0x2e714d){_0xe280f5=window;}const _0x1d0fe4=_0xe280f5['console']=_0xe280f5[_0x2c3a42(0x1e8)]||{},_0x25fd91=['log',_0x2c3a42(0x1da),'info','error','exception','table','trace'];for(let _0x51dbc8=0x0;_0x51dbc8<_0x25fd91['length'];_0x51dbc8++){const _0x122c20=a23_0x29dc39['constructor']['prototype'][_0x2c3a42(0x1f3)](a23_0x29dc39),_0x26807c=_0x25fd91[_0x51dbc8],_0x4e03fa=_0x1d0fe4[_0x26807c]||_0x122c20;_0x122c20[_0x2c3a42(0x1d3)]=a23_0x29dc39[_0x2c3a42(0x1f3)](a23_0x29dc39),_0x122c20['toString']=_0x4e03fa['toString'][_0x2c3a42(0x1f3)](_0x4e03fa),_0x1d0fe4[_0x26807c]=_0x122c20;}});a23_0x14d9c0();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x4f56ef=a23_0x3b91,_0x866a70=document['getElementById']('d1-switch'),_0x124412=document[_0x4f56ef(0x1eb)]('d2-switch');console['log'](_0x4f56ef(0x1d8),!!_0x866a70),console['log'](_0x4f56ef(0x1ec),!!_0x124412);function _0xd9cf17(){const _0x1d85b4=_0x4f56ef;document['querySelectorAll']('input[name=\x22ladder\x22]')[_0x1d85b4(0x1e6)](_0x489c5f=>{_0x489c5f['addEventListener']('change',_0x1a4027=>{const _0x2aa4b5=a23_0x3b91;_0x1a4027['target']['checked']&&(currentLadder=_0x1a4027[_0x2aa4b5(0x1db)][_0x2aa4b5(0x1f0)],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0xd9cf17();const _0x4f4d32=document['getElementById']('join-ladder-button');_0x4f4d32&&_0x4f4d32['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x547c4c=>{const _0x52dc4c=_0x4f56ef;if(_0x547c4c)checkUserLadderStatus();else{const _0x36e9cd=document['getElementById'](_0x52dc4c(0x1e1));_0x36e9cd&&(_0x36e9cd['style'][_0x52dc4c(0x1d7)]='none');}});});function getCollectionName(_0x29f986){const _0x2b1a19=a23_0x3b91;switch(_0x29f986?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case _0x2b1a19(0x1df):case'DUO':return'playersDuos';case'CTF':return _0x2b1a19(0x1de);default:console[_0x2b1a19(0x1da)](_0x2b1a19(0x1f5)+_0x29f986+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x1ead43=a23_0x3b91;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x203951=auth['currentUser'],_0x583d69=document['getElementById']('ladder-join-prompt'),_0x196f7f=document['getElementById']('join-ladder-type'),_0xdc5793=document['getElementById']('tiny-join-button');if(!_0x203951||!_0x203951['uid']||!_0x583d69||!_0x196f7f||!_0xdc5793){if(_0x583d69)_0x583d69['style']['display']='none';if(_0xdc5793)_0xdc5793['style']['display']='none';return;}try{try{await _0x203951[_0x1ead43(0x1d5)](![]);}catch(_0x2652be){console['error']('Authentication\x20verification\x20failed:',_0x2652be),_0x583d69['style']['display']='none',_0xdc5793['style']['display']='none';return;}const _0x59db0b=getCollectionName(currentLadder),_0x5b10e1=doc(db,_0x59db0b,_0x203951[_0x1ead43(0x1ee)]),_0x28ec5f=await getDoc(_0x5b10e1);if(_0x28ec5f['exists']())_0x583d69['style']['display']='none',_0xdc5793['style']['display']='none';else{_0x583d69['style']['display']='none',_0xdc5793['style']['display']=_0x1ead43(0x1dc),_0x196f7f['textContent']=currentLadder,_0xdc5793['onclick']=()=>{const _0x2aa922=_0x1ead43;_0x583d69['style']['display']==='block'?_0x583d69['style'][_0x2aa922(0x1d7)]='none':_0x583d69['style']['display']='block';};const _0x41202e=document['getElementById'](_0x1ead43(0x1d6)),_0x4a1f71=document['getElementById'](_0x1ead43(0x1ea));if(_0x41202e)_0x41202e['value']='';_0x4a1f71&&(_0x4a1f71['textContent']='',_0x4a1f71['className']='ladder-join-status');}}catch(_0x8e25f0){console['error'](_0x1ead43(0x1e2),_0x8e25f0),_0x583d69['style']['display']='none',_0xdc5793[_0x1ead43(0x1f6)][_0x1ead43(0x1d7)]='none';}}async function handleJoinLadder(){const _0x2f19ea=a23_0x3b91,_0xa93bde=auth['currentUser'],_0x5bc75d=document['getElementById']('join-ladder-button'),_0x4d08e2=document['getElementById']('ladder-join-status'),_0x12cf13=document['getElementById']('join-username-input');if(!_0xa93bde||!_0xa93bde['uid']){_0x4d08e2['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x4d08e2['className']='ladder-join-status\x20error';return;}try{await _0xa93bde['getIdToken'](!![]);}catch(_0x5330d1){console['error']('Authentication\x20error:',_0x5330d1),_0x4d08e2[_0x2f19ea(0x1e0)]=_0x2f19ea(0x1d9),_0x4d08e2['className']=_0x2f19ea(0x1f4);return;}if(!_0x12cf13||!_0x12cf13['value']['trim']()){_0x4d08e2['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x4d08e2[_0x2f19ea(0x1e5)]='ladder-join-status\x20error';return;}try{_0x5bc75d['disabled']=!![],_0x4d08e2['textContent']=_0x2f19ea(0x1e9),_0x4d08e2[_0x2f19ea(0x1e5)]='ladder-join-status\x20loading';let _0x40b35b='',_0x43dd76=null;const _0x54599b=[_0x2f19ea(0x1d4),'playersD2','playersD3','playersDuos','playersCTF','nonParticipants'];for(const _0xe322c2 of _0x54599b){try{const _0x2fcc98=doc(db,_0xe322c2,_0xa93bde['uid']),_0x344dfd=await getDoc(_0x2fcc98);if(_0x344dfd['exists']()){_0x43dd76=_0x344dfd['data']();if(_0x43dd76['username']){_0x40b35b=_0x43dd76['username'];break;}}}catch(_0x1b49e6){console['error']('Error\x20checking\x20'+_0xe322c2+':',_0x1b49e6);}}!_0x40b35b&&_0xa93bde['email']&&(_0x40b35b=_0xa93bde['email']['split']('@')[0x0]);if(!_0x40b35b){_0x4d08e2['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x4d08e2[_0x2f19ea(0x1e5)]=_0x2f19ea(0x1f4),_0x5bc75d['disabled']=![];return;}const _0x5228ee=_0x12cf13['value']['trim']();if(_0x40b35b&&_0x5228ee[_0x2f19ea(0x1e4)]()!==_0x40b35b['toLowerCase']()){_0x4d08e2['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x40b35b+_0x2f19ea(0x1dd),_0x4d08e2['className']=_0x2f19ea(0x1f4),_0x5bc75d['disabled']=![];return;}_0x4d08e2[_0x2f19ea(0x1e0)]='Joining\x20'+currentLadder+'\x20ladder...';const _0x3fdb12=getCollectionName(currentLadder),_0x2f3806=doc(db,_0x3fdb12,_0xa93bde['uid']),_0x194ee2=await getDoc(_0x2f3806);if(_0x194ee2['exists']()){_0x4d08e2['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x4d08e2['className']=_0x2f19ea(0x1f4),_0x5bc75d['disabled']=![];return;}try{await _0xa93bde['getIdToken'](!![]);}catch(_0x2f107d){_0x4d08e2['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x4d08e2[_0x2f19ea(0x1e5)]='ladder-join-status\x20error',_0x5bc75d['disabled']=![];return;}const _0x312934=_0x40b35b,_0x5b7dd5=collection(db,_0x3fdb12),_0x4603da=query(_0x5b7dd5,orderBy('position','desc'),limit(0x1)),_0x40bdc4=await getDocs(_0x4603da);let _0x55c104=0x1;if(!_0x40bdc4['empty']){const _0x4a6464=_0x40bdc4['docs'][0x0]['data']();_0x55c104=(_0x4a6464[_0x2f19ea(0x1e3)]||0x0)+0x1;}const _0x411094={'username':_0x312934,'email':_0xa93bde['email'],'eloRating':0x4b0,'position':_0x55c104,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x2f3806,_0x411094),currentLadder===_0x2f19ea(0x1df)?_0x4d08e2['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x4d08e2['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x4d08e2[_0x2f19ea(0x1e5)]=_0x2f19ea(0x1e7),setTimeout(()=>{const _0x2cfff3=_0x2f19ea;window[_0x2cfff3(0x1ef)][_0x2cfff3(0x1f2)]();},0x7d0);}catch(_0x2b3da7){console[_0x2f19ea(0x1ed)]('Error\x20joining\x20ladder:',_0x2b3da7),_0x4d08e2['textContent']='Error\x20joining\x20ladder:\x20'+_0x2b3da7[_0x2f19ea(0x1f1)],_0x4d08e2['className']=_0x2f19ea(0x1f4),_0x5bc75d['disabled']=![];}}