const a47_0x33c00b=a47_0x46a8,a47_0x1c4204=(function(){let _0x52e7b5=!![];return function(_0x53f6c6,_0x30abb4){const _0x13f500=_0x52e7b5?function(){const _0x18efd1=a47_0x46a8;if(_0x30abb4){const _0x20c060=_0x30abb4[_0x18efd1(0x191)](_0x53f6c6,arguments);return _0x30abb4=null,_0x20c060;}}:function(){};return _0x52e7b5=![],_0x13f500;};}()),a47_0x260f70=a47_0x1c4204(this,function(){const _0x55a581=a47_0x46a8;let _0x453505;try{const _0xeaa933=Function('return\x20(function()\x20'+_0x55a581(0x18a)+');');_0x453505=_0xeaa933();}catch(_0xded9c7){_0x453505=window;}const _0x1cb26e=_0x453505['console']=_0x453505['console']||{},_0x22db39=['log','warn','info','error','exception',_0x55a581(0x187),'trace'];for(let _0x4dfdce=0x0;_0x4dfdce<_0x22db39['length'];_0x4dfdce++){const _0x356236=a47_0x1c4204[_0x55a581(0x186)]['prototype']['bind'](a47_0x1c4204),_0x45108c=_0x22db39[_0x4dfdce],_0x4151e0=_0x1cb26e[_0x45108c]||_0x356236;_0x356236['__proto__']=a47_0x1c4204[_0x55a581(0x18d)](a47_0x1c4204),_0x356236['toString']=_0x4151e0[_0x55a581(0x192)][_0x55a581(0x18d)](_0x4151e0),_0x1cb26e[_0x45108c]=_0x356236;}});function a47_0x47f9(){const _0x59b6c7=['forEach','constructor','table','m\x20in\x20queue','style','{}.constructor(\x22return\x20this\x22)(\x20)','error','innerHTML','bind','lastUpdated','none','floor','apply','toString','display','readyPlayers','username','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'];a47_0x47f9=function(){return _0x59b6c7;};return a47_0x47f9();}function a47_0x46a8(_0x3cc7ed,_0x1aa366){const _0x260f70=a47_0x47f9();return a47_0x46a8=function(_0x1c4204,_0x334c47){_0x1c4204=_0x1c4204-0x185;let _0x47f9a4=_0x260f70[_0x1c4204];return _0x47f9a4;},a47_0x46a8(_0x3cc7ed,_0x1aa366);}a47_0x260f70();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a47_0x33c00b(0x194)),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x9191ab){const _0x5d1982=a47_0x33c00b,_0x2dd513=document['getElementById']('queue-container');if(!_0x2dd513)return;if(_0x9191ab['length']===0x0){_0x2dd513['style']['display']=_0x5d1982(0x18f);return;}_0x2dd513[_0x5d1982(0x189)][_0x5d1982(0x193)]='block';let _0x457cbb='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x9191ab[_0x5d1982(0x185)](_0x1e2a99=>{const _0x33a6c8=_0x5d1982;_0x457cbb+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x1e2a99[_0x33a6c8(0x195)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x1e2a99['lastUpdated'])+_0x33a6c8(0x196);}),_0x457cbb+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2dd513[_0x5d1982(0x18c)]=_0x457cbb;}function formatQueueTime(_0x25bb3a){const _0x5b7991=a47_0x33c00b;if(!_0x25bb3a)return'Just\x20now';const _0x432af8=_0x25bb3a['toDate']?_0x25bb3a['toDate']():new Date(_0x25bb3a),_0x39508b=new Date(),_0x2f15e1=Math['floor']((_0x39508b-_0x432af8)/0xea60);if(_0x2f15e1<0x1)return'Just\x20now';return _0x2f15e1+_0x5b7991(0x188);}async function checkQueueTimeout(_0x4b65ae){const _0x2576f9=a47_0x33c00b;if(!_0x4b65ae[_0x2576f9(0x18e)])return;const _0x1504b5=_0x4b65ae[_0x2576f9(0x18e)]['toDate']?_0x4b65ae['lastUpdated']['toDate']():new Date(_0x4b65ae['lastUpdated']),_0xecde6b=new Date(),_0x2906f1=Math[_0x2576f9(0x190)]((_0xecde6b-_0x1504b5)/0xea60);if(_0x2906f1>=0x1e)try{const _0x22a973=doc(db,'readyPlayers',_0x4b65ae['id']);await updateDoc(_0x22a973,{'isReady':![]});}catch(_0x32e5fd){console[_0x2576f9(0x18b)]('Error\x20removing\x20player\x20from\x20queue:',_0x32e5fd);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x4f69ec=>{const _0x214e77=a47_0x33c00b,_0x36f9e9=[];_0x4f69ec[_0x214e77(0x185)](_0x10a05a=>{const _0x502553=_0x214e77,_0x2c7290=_0x10a05a['data']();if(_0x2c7290['isReady']===!![]){const _0x28da19={'id':_0x10a05a['id'],'username':_0x2c7290['username'],'lastUpdated':_0x2c7290[_0x502553(0x18e)]||new Date()};_0x36f9e9['push'](_0x28da19),checkQueueTimeout(_0x28da19);}}),updateQueueDisplay(_0x36f9e9);},_0x3faed5=>{console['error']('Error\x20in\x20queue\x20listener:',_0x3faed5);});window['addEventListener']('unload',()=>{unsubscribe();});