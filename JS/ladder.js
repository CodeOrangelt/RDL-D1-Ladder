const a27_0x180fff=a27_0x384a,a27_0x48674f=(function(){let _0x584a54=!![];return function(_0x3c951b,_0x559085){const _0x251da8=_0x584a54?function(){if(_0x559085){const _0x295cfd=_0x559085['apply'](_0x3c951b,arguments);return _0x559085=null,_0x295cfd;}}:function(){};return _0x584a54=![],_0x251da8;};}()),a27_0x5e2cd8=a27_0x48674f(this,function(){const _0x1b0878=a27_0x384a;let _0x3ca4da;try{const _0x56c1d9=Function('return\x20(function()\x20'+_0x1b0878(0x1e1)+');');_0x3ca4da=_0x56c1d9();}catch(_0x3daea2){_0x3ca4da=window;}const _0x12b055=_0x3ca4da['console']=_0x3ca4da['console']||{},_0x4b5049=['log','warn','info','error',_0x1b0878(0x1db),_0x1b0878(0x21a),_0x1b0878(0x1ec)];for(let _0x562e14=0x0;_0x562e14<_0x4b5049['length'];_0x562e14++){const _0x2a3365=a27_0x48674f[_0x1b0878(0x240)]['prototype']['bind'](a27_0x48674f),_0xdeff57=_0x4b5049[_0x562e14],_0x39f75c=_0x12b055[_0xdeff57]||_0x2a3365;_0x2a3365['__proto__']=a27_0x48674f[_0x1b0878(0x243)](a27_0x48674f),_0x2a3365['toString']=_0x39f75c['toString'][_0x1b0878(0x243)](_0x39f75c),_0x12b055[_0xdeff57]=_0x2a3365;}});a27_0x5e2cd8();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';function a27_0x1bcc(){const _0x261b8c=['sort','toLowerCase','Silver','exception','</span>','currentUser','Duos\x20ladder\x20is\x20currently\x20admin-only','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','querySelector','{}.constructor(\x22return\x20this\x22)(\x20)','elo-recommendation-text-d1','classList','\x20(equipped:\x20','elo-recommendation-text-d2','has','admin@ladder.com','totalKills','data','#FFD700','addEventListener','trace','error','seconds','#b9f1fc','Error\x20fetching\x20ELO\x20history:','elo-recommendation-text-d3','change','oldEloRating','Error\x20finding\x20recommended\x20opponent','includes','warn','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','position','toFixed','block','tokenImage','log','Unranked','duos','equipped','fontSize','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','playersD3','player','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20','players','max','active','Recommendation\x20element\x20for\x20','wins','now','none','dispatchEvent','loserUsername','losses','td:nth-child(3)','eloRating','then','timestamp','exists','playersD2','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','totalMatches','userProfiles','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','visible','table','forEach','add','newElo','style','loserScore','Error\x20fetching\x20tokens:','cursor',';\x22>','get','council','gray','%</td>\x0a\x20\x20\x20\x20</tr>','ladder-container','createElement','visibility',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','elo','previousElo','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','click','#50C878','empty','D1\x20toggle\x20clicked','#C0C0C0','date','querySelectorAll','winnerUsername','DOMContentLoaded','\x20has\x20equipped:\x20','winnerScore','div','\x20displaying\x20token:\x20','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','</span>\x20(ELO:\x20','country','d2-switch','username','constructor','remove','length','bind','Error\x20loading\x20ladder:','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','d1-ladder-container','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','display','preventDefault','(Equipped)','role','approvedMatches','#ladder\x20tbody','push','totalDeaths','onAuthStateChanged','getElementById','set','disabled','roleName','kda','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','join'];a27_0x1bcc=function(){return _0x261b8c;};return a27_0x1bcc();}import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x4853db=0x1){const _0x8e2190=a27_0x384a;try{document['getElementById']('loading-indicator')['style'][_0x8e2190(0x248)]='block';const _0x400325=await getLadderData(_0x4853db);_0x400325[_0x8e2190(0x1d8)]((_0x430b9a,_0x49f6f5)=>_0x49f6f5['elo']-_0x430b9a['elo']);const _0x3cabc7=_0x400325['map'](_0xd57acd=>_0xd57acd['id']),_0x2f1d87=await getEloHistoryBatch(_0x3cabc7,_0x4853db),_0x33fd28=_0x400325['map']((_0x5e4a92,_0x1cd7a6)=>{const _0x5515e9=_0x8e2190,_0x501d06=_0x2f1d87[_0x5e4a92['id']]||[],_0x33bc0e=_0x501d06[_0x5515e9(0x1d8)]((_0x30e90a,_0x2458b4)=>new Date(_0x2458b4['date'])-new Date(_0x30e90a[_0x5515e9(0x233)]))['slice'](0x0,0x5);return{..._0x5e4a92,'rank':_0x1cd7a6+0x1,'lastMatches':_0x33bc0e,'recentActivity':_0x33bc0e[_0x5515e9(0x242)]>0x0};});renderLadder(_0x33fd28),setupRealTimeUpdates(_0x4853db);}catch(_0x5a773b){console[_0x8e2190(0x1ed)]('Error\x20loading\x20ladder\x20data:',_0x5a773b),document['getElementById']('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document[_0x8e2190(0x251)]('loading-indicator')[_0x8e2190(0x21e)]['display']=_0x8e2190(0x20b);}}function setupRealTimeUpdates(_0x32e5cf=0x1){const _0x397101=a27_0x384a;activeListeners[_0x397101(0x21b)](_0x82a70f=>_0x82a70f()),activeListeners=[];const _0x4c277e=_0x32e5cf===0x1?_0x397101(0x205):'playersD'+_0x32e5cf,_0x420624=_0x32e5cf===0x1?'matches':'matchesD'+_0x32e5cf,_0x12c14b=new Date();_0x12c14b['setDate'](_0x12c14b['getDate']()-0x1);const _0x56af2a=setupEfficientListener(_0x420624,[where('date','>=',_0x12c14b['toISOString']()),limit(0xa),orderBy(_0x397101(0x233),'desc')],async _0x4b01cd=>{_0x4b01cd['length']>0x0&&await loadLadderData(_0x32e5cf);});activeListeners[_0x397101(0x24e)](_0x56af2a);}export function cleanupListeners(){const _0x4699d9=a27_0x384a;activeListeners[_0x4699d9(0x21b)](_0x5c181c=>_0x5c181c()),activeListeners=[];}function renderLadder(_0x5d6a35){const _0x4d2cb0=a27_0x384a,_0x176db2=document['getElementById'](_0x4d2cb0(0x227));_0x176db2['innerHTML']='',_0x5d6a35['forEach'](_0x5e4452=>{const _0x343188=_0x4d2cb0,_0x4a2710=document[_0x343188(0x228)](_0x343188(0x239));_0x4a2710['className']='ladder-player',_0x4a2710['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x5e4452['rank']+_0x343188(0x201)+(_0x5e4452[_0x343188(0x23f)]||_0x5e4452['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x5e4452[_0x343188(0x22b)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x5e4452['recentActivity']?'active':'inactive')+_0x343188(0x218)+(_0x5e4452['recentActivity']?'Active':'Inactive')+_0x343188(0x247),_0x176db2['appendChild'](_0x4a2710);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x337541=![]){const _0x56e9bd=a27_0x384a,_0x513b8c=document['querySelector'](_0x56e9bd(0x24d));if(!_0x513b8c){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x513b8c['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x20d7c5=Date[_0x56e9bd(0x20a)]();if(!_0x337541&&playerCache['data']&&_0x20d7c5-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache[_0x56e9bd(0x1e9)]);return;}const _0x561c7d=collection(db,'players'),_0x579e8c=await getDocs(_0x561c7d),_0x1a2122=[];_0x579e8c['forEach'](_0x196149=>{const _0x1569b6=_0x56e9bd,_0x48a72a=_0x196149[_0x1569b6(0x1e9)]();_0x1a2122['push']({..._0x48a72a,'id':_0x196149['id'],'elo':_0x48a72a['eloRating']||0x0,'position':_0x48a72a['position']||Number['MAX_SAFE_INTEGER']});});const _0x10f222=collection(db,'userProfiles'),_0x4cdf7a=await getDocs(_0x10f222),_0x51c87b=new Map();_0x4cdf7a['forEach'](_0x49d1e4=>{const _0x623c21=_0x56e9bd,_0x190434=_0x49d1e4[_0x623c21(0x1e9)]();_0x190434['username']&&_0x51c87b['set'](_0x190434['username']['toLowerCase'](),_0x190434);}),_0x1a2122['forEach'](_0x2f87b9=>{const _0x44b249=_0x56e9bd,_0x4eef68=_0x2f87b9['username']?.[_0x44b249(0x1d9)]();if(_0x4eef68&&_0x51c87b['has'](_0x4eef68)){const _0x5c1a45=_0x51c87b['get'](_0x4eef68);_0x5c1a45[_0x44b249(0x23d)]&&(_0x2f87b9['country']=_0x5c1a45['country']['toLowerCase']());}});const _0x2069c0=_0x1a2122['map'](_0x2622a4=>_0x2622a4['username']),_0x128c89=await fetchBatchMatchStats(_0x2069c0);_0x1a2122['sort']((_0x25946f,_0x35142f)=>{const _0x5a02b0=_0x56e9bd,_0x163908=_0x128c89['get'](_0x25946f[_0x5a02b0(0x23f)])?.[_0x5a02b0(0x216)]||0x0,_0xf1a517=_0x128c89['get'](_0x35142f[_0x5a02b0(0x23f)])?.['totalMatches']||0x0;if(_0x163908===0x0!==(_0xf1a517===0x0))return _0x163908===0x0?0x1:-0x1;return(_0x25946f[_0x5a02b0(0x1f8)]||0x3e7)-(_0x35142f[_0x5a02b0(0x1f8)]||0x3e7);}),_0x1a2122['forEach']((_0x42b97f,_0x1a17fb)=>{_0x42b97f['position']=_0x1a17fb+0x1;}),playerCache['data']=_0x1a2122,playerCache['timestamp']=_0x20d7c5,updateLadderDisplay(_0x1a2122,_0x128c89);}catch(_0x36ff81){console[_0x56e9bd(0x1ed)](_0x56e9bd(0x244),_0x36ff81),_0x513b8c['innerHTML']=_0x56e9bd(0x204)+_0x36ff81['message']+_0x56e9bd(0x258);}}async function fetchBatchMatchStats(_0x395cb2){const _0x69e241=a27_0x384a,_0x560dee=new Map();try{_0x395cb2[_0x69e241(0x21b)](_0x697b66=>{const _0x1b2f5e=_0x69e241;_0x560dee[_0x1b2f5e(0x252)](_0x697b66,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x76ef91=collection(db,_0x69e241(0x24c)),_0x54b85f=await getDocs(_0x76ef91);_0x54b85f['forEach'](_0x3844cb=>{const _0x473f32=_0x69e241,_0x80a4eb=_0x3844cb['data'](),_0x49c1b1=_0x80a4eb[_0x473f32(0x235)],_0x54ac15=_0x80a4eb[_0x473f32(0x20d)];if(_0x395cb2['includes'](_0x49c1b1)){const _0x47a80e=_0x560dee['get'](_0x49c1b1);_0x47a80e['wins']++,_0x47a80e['totalMatches']++,_0x47a80e['totalKills']+=parseInt(_0x80a4eb['winnerScore'])||0x0,_0x47a80e['totalDeaths']+=parseInt(_0x80a4eb[_0x473f32(0x21f)])||0x0;}if(_0x395cb2['includes'](_0x54ac15)){const _0x26eae1=_0x560dee[_0x473f32(0x223)](_0x54ac15);_0x26eae1[_0x473f32(0x20e)]++,_0x26eae1[_0x473f32(0x216)]++,_0x26eae1[_0x473f32(0x1e8)]+=parseInt(_0x80a4eb['loserScore'])||0x0,_0x26eae1[_0x473f32(0x24f)]+=parseInt(_0x80a4eb[_0x473f32(0x238)])||0x0;}}),_0x395cb2[_0x69e241(0x21b)](_0x50ced0=>{const _0x15e0f3=_0x69e241,_0x3f0e5b=_0x560dee['get'](_0x50ced0);_0x3f0e5b['kda']=_0x3f0e5b['totalDeaths']>0x0?(_0x3f0e5b['totalKills']/_0x3f0e5b['totalDeaths'])[_0x15e0f3(0x1f9)](0x2):_0x3f0e5b['totalKills']['toFixed'](0x2),_0x3f0e5b['winRate']=_0x3f0e5b[_0x15e0f3(0x216)]>0x0?(_0x3f0e5b['wins']/_0x3f0e5b['totalMatches']*0x64)[_0x15e0f3(0x1f9)](0x1):0x0;});}catch(_0x1a71c0){console[_0x69e241(0x1ed)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x1a71c0);}return _0x560dee;}function createPlayerRow(_0x26197f,_0x47b58a){const _0x1318ba=a27_0x384a,_0xf218bb=parseFloat(_0x26197f['elo'])||0x0;let _0x3056a2=_0x1318ba(0x225);if(_0xf218bb>=0x7d0)_0x3056a2='#50C878';else{if(_0xf218bb>=0x708)_0x3056a2='#FFD700';else{if(_0xf218bb>=0x640)_0x3056a2=_0x1318ba(0x1ef);else _0xf218bb>=0x578&&(_0x3056a2='#CD7F32');}}let _0x1a2d50='';return _0x26197f[_0x1318ba(0x23d)]&&(_0x1a2d50='<img\x20src=\x22../images/flags/'+_0x26197f['country']['toLowerCase']()+_0x1318ba(0x22d)+_0x26197f[_0x1318ba(0x23d)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x26197f[_0x1318ba(0x1f8)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x26197f[_0x1318ba(0x23f)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x3056a2+_0x1318ba(0x257)+_0x26197f['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1a2d50+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x3056a2+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0xf218bb+_0x1318ba(0x1df)+_0x47b58a['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x47b58a['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x47b58a['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x47b58a[_0x1318ba(0x255)]+_0x1318ba(0x215)+_0x47b58a['winRate']+_0x1318ba(0x226);}function getPlayerRankName(_0x25e601){const _0x20547e=a27_0x384a;if(_0x25e601>=0x7d0)return'Emerald';if(_0x25e601>=0x708)return'Gold';if(_0x25e601>=0x640)return _0x20547e(0x1da);if(_0x25e601>=0x578)return'Bronze';return _0x20547e(0x1fd);}async function getPlayersLastEloChanges(_0x13e874){const _0x5835bc=a27_0x384a,_0x59676e=new Map();_0x13e874[_0x5835bc(0x21b)](_0x1a92f6=>{const _0x1cc42e=_0x5835bc;_0x59676e[_0x1cc42e(0x252)](_0x1a92f6,0x0);});try{const _0x31802a=collection(db,_0x5835bc(0x205)),_0x1dfb5c=await getDocs(_0x31802a),_0x5b1445=new Map(),_0x4b3141=new Map();_0x1dfb5c['forEach'](_0x217b29=>{const _0x1dfc50=_0x5835bc,_0x5bc809=_0x217b29['data']();_0x5bc809['username']&&(_0x5b1445[_0x1dfc50(0x252)](_0x217b29['id'],_0x5bc809['username']),_0x4b3141['set'](_0x5bc809['username'][_0x1dfc50(0x1d9)](),_0x217b29['id']));});const _0x35b37b=collection(db,'eloHistory'),_0x4fee54=query(_0x35b37b,orderBy('timestamp','desc'),limit(0x12c)),_0x916ae4=await getDocs(_0x4fee54);if(_0x916ae4[_0x5835bc(0x230)])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x59676e;if(_0x916ae4['docs']['length']>0x0){const _0x32ae82=_0x916ae4['docs'][0x0][_0x5835bc(0x1e9)]();if(_0x32ae82[_0x5835bc(0x203)]&&_0x5b1445['has'](_0x32ae82[_0x5835bc(0x203)])){}}const _0x314f40=new Map();let _0x115934=0x0;_0x916ae4['forEach'](_0x1cb71f=>{const _0x16999c=_0x5835bc,_0x1f2437=_0x1cb71f[_0x16999c(0x1e9)]();let _0x1b09a9=null;if(_0x1f2437[_0x16999c(0x203)]&&_0x5b1445[_0x16999c(0x1e6)](_0x1f2437['player']))_0x1b09a9=_0x5b1445[_0x16999c(0x223)](_0x1f2437['player']);else{if(_0x1f2437['username']&&_0x4b3141[_0x16999c(0x1e6)](_0x1f2437[_0x16999c(0x23f)][_0x16999c(0x1d9)]()))_0x1b09a9=_0x1f2437[_0x16999c(0x23f)];else _0x1f2437['playerUsername']&&_0x4b3141['has'](_0x1f2437['playerUsername']['toLowerCase']())&&(_0x1b09a9=_0x1f2437['playerUsername']);}_0x1b09a9&&_0x13e874['includes'](_0x1b09a9)&&(_0x115934++,!_0x314f40['has'](_0x1b09a9)&&_0x314f40['set'](_0x1b09a9,[]),_0x314f40['get'](_0x1b09a9)['push']({..._0x1f2437,'timestamp':_0x1f2437['timestamp']?.[_0x16999c(0x1ee)]||0x0}));}),_0x314f40['forEach']((_0x5beeda,_0x462134)=>{const _0x5776eb=_0x5835bc;if(_0x5beeda[_0x5776eb(0x242)]>0x0){_0x5beeda['sort']((_0x1fed86,_0x222cd5)=>_0x222cd5[_0x5776eb(0x212)]-_0x1fed86['timestamp']);const _0x56f451=_0x5beeda['find'](_0x2aac6e=>_0x2aac6e['change']!==undefined||_0x2aac6e[_0x5776eb(0x21d)]!==undefined&&_0x2aac6e['previousElo']!==undefined||_0x2aac6e['newEloRating']!==undefined&&_0x2aac6e['oldEloRating']!==undefined);if(_0x56f451){let _0x5cbe46;if(_0x56f451[_0x5776eb(0x1f2)]!==undefined)_0x5cbe46=parseInt(_0x56f451['change']);else{if(_0x56f451['newElo']!==undefined&&entry[_0x5776eb(0x22c)]!==undefined)_0x5cbe46=parseInt(_0x56f451[_0x5776eb(0x21d)])-parseInt(_0x56f451['previousElo']);else _0x56f451['newEloRating']!==undefined&&entry[_0x5776eb(0x1f3)]!==undefined&&(_0x5cbe46=parseInt(_0x56f451['newEloRating'])-parseInt(_0x56f451['oldEloRating']));}!isNaN(_0x5cbe46)&&_0x5cbe46!==0x0&&_0x59676e[_0x5776eb(0x252)](_0x462134,_0x5cbe46);}}});}catch(_0x4f4a7a){console[_0x5835bc(0x1ed)](_0x5835bc(0x1f0),_0x4f4a7a);}return _0x59676e;}function createPlayerRowWithToken(_0x31b1c2,_0x426337,_0x32e58f){const _0x441bef=a27_0x384a,_0x4a5296=parseFloat(_0x31b1c2['elo'])||0x0;let _0x5dda7d='gray';if(_0x4a5296>=0x7d0)_0x5dda7d=_0x441bef(0x22f);else{if(_0x4a5296>=0x708)_0x5dda7d=_0x441bef(0x1ea);else{if(_0x4a5296>=0x640)_0x5dda7d='#b9f1fc';else _0x4a5296>=0x578&&(_0x5dda7d='#CD7F32');}}let _0x27ea55='';_0x31b1c2['country']&&(_0x27ea55='<img\x20src=\x22../images/flags/'+_0x31b1c2['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x31b1c2['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x4bb7c3='';return _0x32e58f&&(_0x4bb7c3='<img\x20src=\x22'+_0x32e58f[_0x441bef(0x1fb)]+_0x441bef(0x245)+_0x32e58f['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x32e58f['tokenName']+'\x20'+(_0x32e58f['equipped']?_0x441bef(0x24a):'')+_0x441bef(0x23b)),_0x441bef(0x1f7)+_0x31b1c2['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x31b1c2[_0x441bef(0x23f)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x5dda7d+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x31b1c2[_0x441bef(0x23f)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x27ea55+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4bb7c3+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x5dda7d+_0x441bef(0x22a)+_0x4a5296+_0x441bef(0x1df)+_0x426337['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x426337[_0x441bef(0x209)]+_0x441bef(0x215)+_0x426337['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x426337['kda']+_0x441bef(0x215)+_0x426337['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function a27_0x384a(_0x2ea5af,_0x29dca0){const _0x5e2cd8=a27_0x1bcc();return a27_0x384a=function(_0x48674f,_0xa526dc){_0x48674f=_0x48674f-0x1d8;let _0x1bccaa=_0x5e2cd8[_0x48674f];return _0x1bccaa;},a27_0x384a(_0x2ea5af,_0x29dca0);}async function updateLadderDisplay(_0x4f8702,_0x2acc96=null){const _0x32cb7b=a27_0x384a,_0x4e5cad=document['querySelector']('#ladder\x20tbody');if(!_0x4e5cad){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x5bbdaf=document['querySelector']('#ladder\x20thead\x20tr');_0x5bbdaf&&(_0x5bbdaf['innerHTML']=_0x32cb7b(0x256));const _0x31f28d=_0x4f8702['map'](_0x52ea42=>_0x52ea42[_0x32cb7b(0x23f)]);!_0x2acc96&&(_0x2acc96=await fetchBatchMatchStats(_0x31f28d));let _0x37af65=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x37af65=await getTokensByUsernames(_0x31f28d),console['log']('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x37af65['size'],_0x32cb7b(0x205)),_0x37af65['forEach']((_0x3f3ffb,_0x2ac52e)=>{const _0x81989c=_0x32cb7b,_0x52e311=_0x3f3ffb['find'](_0x5aa5fd=>_0x5aa5fd[_0x81989c(0x1ff)]);_0x52e311&&console[_0x81989c(0x1fc)]('ðŸŽ¯\x20'+_0x2ac52e+_0x81989c(0x237)+_0x52e311['tokenName']);});}catch(_0xce20ed){console['error'](_0x32cb7b(0x220),_0xce20ed);}const _0x32289a=_0x4f8702['map'](_0x3bc8a9=>{const _0x5af7ca=_0x32cb7b,_0x3a1880=_0x2acc96['get'](_0x3bc8a9[_0x5af7ca(0x23f)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x4e5775=_0x37af65['get'](_0x3bc8a9['username'])||[],_0x23e18b=getPrimaryDisplayToken(_0x4e5775);return _0x23e18b&&console['log']('ðŸŽ¨\x20'+_0x3bc8a9['username']+_0x5af7ca(0x23a)+_0x23e18b['tokenName']+_0x5af7ca(0x1e4)+_0x23e18b['equipped']+')'),createPlayerRowWithToken(_0x3bc8a9,_0x3a1880,_0x23e18b);})[_0x32cb7b(0x259)]('');_0x4e5cad['innerHTML']=_0x32289a,getPlayersLastEloChanges(_0x31f28d)[_0x32cb7b(0x211)](_0x392803=>{const _0x164cec=_0x32cb7b,_0x483393=new Map();_0x4e5cad[_0x164cec(0x234)]('tr')['forEach']((_0x2b95aa,_0x57ef59)=>{const _0x38d2cc=_0x164cec;_0x57ef59<_0x31f28d['length']&&_0x483393[_0x38d2cc(0x252)](_0x31f28d[_0x57ef59],_0x2b95aa);}),_0x392803['forEach']((_0xf55d69,_0x573fd8)=>{const _0x5d5e29=_0x164cec,_0x2730e4=_0x483393['get'](_0x573fd8);if(_0x2730e4&&_0xf55d69!==0x0){const _0xaaf89c=_0x2730e4['querySelector'](_0x5d5e29(0x20f));if(_0xaaf89c){const _0x3300af=_0xf55d69>0x0?'+'+_0xf55d69:''+_0xf55d69,_0x3e9943=_0xaaf89c[_0x5d5e29(0x1e0)]('.trend-indicator');_0x3e9943&&(_0x3e9943['textContent']=_0x3300af,_0x3e9943[_0x5d5e29(0x21e)]['color']=_0xf55d69>0x0?'#4CAF50':'#F44336',_0x3e9943['style']['fontWeight']='bold',_0x3e9943['style'][_0x5d5e29(0x200)]='0.85em',_0x3e9943['style'][_0x5d5e29(0x248)]='inline',_0x3e9943[_0x5d5e29(0x21e)][_0x5d5e29(0x229)]=_0x5d5e29(0x219),_0x3e9943['style']['opacity']='1');}}});})['catch'](_0x2c30d1=>console[_0x32cb7b(0x1ed)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x2c30d1));}function initLadderToggles(){const _0x383399=a27_0x384a,_0x3b87f3=document['getElementById']('d1-switch'),_0x1bbf19=document[_0x383399(0x251)](_0x383399(0x23e)),_0x155c96=document['getElementById']('d3-switch'),_0x5379da=document['getElementById']('duos-switch'),_0x5e67ca=document['getElementById'](_0x383399(0x246)),_0x2328c0=document[_0x383399(0x251)]('d2-ladder-container'),_0x274567=document[_0x383399(0x251)]('d3-ladder-container'),_0x5ec66c=document[_0x383399(0x251)]('duos-ladder-container');function _0x88c6bb(){const _0x44d25f=_0x383399;if(_0x5e67ca)_0x5e67ca[_0x44d25f(0x1e3)]['remove']('active');if(_0x2328c0)_0x2328c0['classList'][_0x44d25f(0x241)]('active');if(_0x274567)_0x274567[_0x44d25f(0x1e3)]['remove']('active');if(_0x5ec66c)_0x5ec66c[_0x44d25f(0x21e)][_0x44d25f(0x248)]=_0x44d25f(0x20b);if(_0x5e67ca)_0x5e67ca[_0x44d25f(0x21e)]['display']='none';if(_0x2328c0)_0x2328c0['style']['display']='none';if(_0x274567)_0x274567['style']['display']=_0x44d25f(0x20b);}_0x3b87f3&&_0x3b87f3['addEventListener']('click',()=>{const _0x2bd85d=_0x383399;console['log'](_0x2bd85d(0x231)),_0x88c6bb();_0x5e67ca&&(_0x5e67ca['classList'][_0x2bd85d(0x21c)]('active'),_0x5e67ca['style'][_0x2bd85d(0x248)]='block');document[_0x2bd85d(0x251)]('elo-recommendation-text-d1')['style']['display']='block',document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document[_0x2bd85d(0x251)]('elo-recommendation-text-d3')[_0x2bd85d(0x21e)][_0x2bd85d(0x248)]='none';if(_0x3b87f3)_0x3b87f3['classList']['add']('active');if(_0x1bbf19)_0x1bbf19['classList']['remove']('active');if(_0x155c96)_0x155c96['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x1bbf19&&_0x1bbf19['addEventListener'](_0x383399(0x22e),()=>{const _0x4545b1=_0x383399;console['log']('D2\x20toggle\x20clicked'),_0x88c6bb();_0x2328c0&&(_0x2328c0[_0x4545b1(0x1e3)]['add']('active'),_0x2328c0['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style'][_0x4545b1(0x248)]='block',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x1bbf19)_0x1bbf19['classList']['add']('active');if(_0x3b87f3)_0x3b87f3[_0x4545b1(0x1e3)]['remove']('active');if(_0x155c96)_0x155c96['classList']['remove'](_0x4545b1(0x207));displayLadderD2(),findBestOpponent('d2');}),_0x155c96&&_0x155c96['addEventListener'](_0x383399(0x22e),()=>{const _0x5b1c03=_0x383399;console['log']('D3\x20toggle\x20clicked'),_0x88c6bb();_0x274567&&(_0x274567[_0x5b1c03(0x1e3)][_0x5b1c03(0x21c)]('active'),_0x274567['style']['display']=_0x5b1c03(0x1fa));document[_0x5b1c03(0x251)](_0x5b1c03(0x1e2))[_0x5b1c03(0x21e)][_0x5b1c03(0x248)]=_0x5b1c03(0x20b),document[_0x5b1c03(0x251)](_0x5b1c03(0x1e5))['style'][_0x5b1c03(0x248)]=_0x5b1c03(0x20b),document['getElementById'](_0x5b1c03(0x1f1))[_0x5b1c03(0x21e)][_0x5b1c03(0x248)]=_0x5b1c03(0x1fa);if(_0x155c96)_0x155c96['classList'][_0x5b1c03(0x21c)]('active');if(_0x3b87f3)_0x3b87f3['classList']['remove']('active');if(_0x1bbf19)_0x1bbf19['classList'][_0x5b1c03(0x241)](_0x5b1c03(0x207));displayLadderD3(),findBestOpponent('d3');}),_0x5379da&&_0x5379da[_0x383399(0x1eb)](_0x383399(0x22e),()=>{const _0x4367f5=_0x383399;_0x88c6bb();if(_0x5ec66c)_0x5ec66c[_0x4367f5(0x21e)][_0x4367f5(0x248)]=_0x4367f5(0x1fa);displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document[_0x4367f5(0x251)]('elo-recommendation-text-d1')['style']['display']=_0x4367f5(0x20b),document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document['getElementById'](_0x4367f5(0x1f1))['style']['display']=_0x4367f5(0x20b);});}document['addEventListener'](a27_0x180fff(0x236),()=>{const _0x2f425d=a27_0x180fff;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document[_0x2f425d(0x251)]('elo-recommendation-text-d1')['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0x47d5bf='d1'){const _0xa9d72d=a27_0x180fff,_0x17b6d9='elo-recommendation-text-'+_0x47d5bf,_0x1c6ab3=document['getElementById'](_0x17b6d9);if(!_0x1c6ab3){console['error'](_0xa9d72d(0x208)+_0x47d5bf+'\x20not\x20found');return;}const _0x12bc24=auth['currentUser'];if(!_0x12bc24){_0x1c6ab3['textContent']='';return;}try{const _0x117125=doc(db,'userProfiles',_0x12bc24['uid']),_0xd6d5b9=await getDoc(_0x117125);if(!_0xd6d5b9[_0xa9d72d(0x213)]()){console[_0xa9d72d(0x1fc)]('No\x20user\x20profile\x20found'),_0x1c6ab3['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x2f29c4=_0xd6d5b9['data'](),_0x31844b=_0x2f29c4['username'];if(!_0x31844b){_0x1c6ab3['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x2919e7;switch(_0x47d5bf){case'd1':_0x2919e7='players';break;case'd2':_0x2919e7=_0xa9d72d(0x214);break;case'd3':_0x2919e7='playersD3';break;case'duos':_0x2919e7='playersDuos';break;default:_0x2919e7='players';}if(_0x47d5bf===_0xa9d72d(0x1fe)){const _0x33d45f=collection(db,_0x2919e7),_0x39c570=query(_0x33d45f,where('username','==',_0x31844b)),_0x834b5=await getDocs(_0x39c570);if(_0x834b5['empty']){_0x1c6ab3['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x310111=_0x834b5['docs'][0x0]['data'](),_0x5673a4=parseInt(_0x310111['eloRating'])||0x4b0;if(_0x310111['hasTeam']&&_0x310111['teammate']){_0x1c6ab3['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x310111['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x479918=await getDocs(_0x33d45f);let _0x570e6a=null,_0x2ab88e=-0x1;_0x479918[_0xa9d72d(0x21b)](_0x1a5c07=>{const _0x1ee95f=_0xa9d72d,_0xa9abb6=_0x1a5c07['data']();if(_0xa9abb6['username']===_0x31844b)return;if(_0xa9abb6['hasTeam'])return;const _0x1fec56=parseInt(_0xa9abb6[_0x1ee95f(0x210)])||0x4b0,_0x1c8958=Math['abs'](_0x1fec56-_0x5673a4),_0x147b45=Math[_0x1ee95f(0x206)](0x0,0xc8-_0x1c8958);_0x147b45>_0x2ab88e&&(_0x570e6a=_0xa9abb6,_0x2ab88e=_0x147b45);});if(_0x570e6a){const _0x4a2e6f=parseInt(_0x570e6a['eloRating'])||0x4b0;let _0x9e731b=_0xa9d72d(0x225);if(_0x4a2e6f>=0x7d0)_0x9e731b=_0xa9d72d(0x22f);else{if(_0x4a2e6f>=0x708)_0x9e731b='#FFD700';else{if(_0x4a2e6f>=0x640)_0x9e731b=_0xa9d72d(0x232);else _0x4a2e6f>=0x578&&(_0x9e731b='#CD7F32');}}_0x1c6ab3['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x9e731b+';\x22>'+_0x570e6a['username']+_0xa9d72d(0x23c)+_0x4a2e6f+')';}else _0x1c6ab3['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x420dc9=collection(db,_0x2919e7),_0x3f315e=query(_0x420dc9,where('username','==',_0x31844b)),_0x33f013=await getDocs(_0x3f315e);if(_0x33f013[_0xa9d72d(0x230)]){_0x1c6ab3['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x47d5bf['toUpperCase']()+'\x20ladder';return;}const _0x13dadd=_0x33f013['docs'][0x0]['data'](),_0x596e47=parseInt(_0x13dadd[_0xa9d72d(0x210)])||0x5dc,_0x28589b=await getDocs(_0x420dc9);let _0x19a6ac=null,_0x541c94=-0x1;const _0x372064=getPlayerRankName(_0x596e47);_0x28589b['forEach'](_0x5dd5ac=>{const _0x18eea7=_0xa9d72d,_0x325805=_0x5dd5ac['data']();if(_0x325805['username']===_0x31844b)return;const _0x4839aa=parseInt(_0x325805['eloRating'])||0x5dc,_0x10ab2f=getPlayerRankName(_0x4839aa),_0x33e416=Math['abs'](_0x4839aa-_0x596e47),_0x502712=0x20,_0x4d0b3a=0x1/(0x1+Math['pow'](0xa,(_0x4839aa-_0x596e47)/0x190)),_0x1bc6c9=Math['round'](_0x502712*(0x1-_0x4d0b3a));if(_0x1bc6c9<=0x0)return;let _0x15ec96=0x0;const _0x3c2331=Math[_0x18eea7(0x206)](0x0,0x64-_0x33e416*0.5),_0xbefe98=_0x1bc6c9>=0x3&&_0x1bc6c9<=0x8?0x32:_0x1bc6c9>0x0&&_0x1bc6c9<0xf?0x1e:0xa,_0x566ac1=_0x372064===_0x10ab2f?0x28:0x0;_0x15ec96=_0x3c2331+_0xbefe98+_0x566ac1,_0x15ec96>_0x541c94&&(_0x19a6ac=_0x325805,_0x541c94=_0x15ec96);});if(_0x19a6ac){const _0x41a068=parseInt(_0x19a6ac['eloRating'])||0x5dc;let _0x1883f8='gray';if(_0x41a068>=0x7d0)_0x1883f8='#50C878';else{if(_0x41a068>=0x708)_0x1883f8='#FFD700';else{if(_0x41a068>=0x640)_0x1883f8=_0xa9d72d(0x1ef);else _0x41a068>=0x578&&(_0x1883f8='#CD7F32');}}_0x1c6ab3['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x596e47+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x1883f8+_0xa9d72d(0x222)+_0x19a6ac['username']+_0xa9d72d(0x1dc);}else _0x1c6ab3['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x596e47+')';}catch(_0x57c426){console['error']('Error\x20finding\x20best\x20opponent:',_0x57c426),_0x1c6ab3['textContent']=_0xa9d72d(0x1f4);}}auth[a27_0x180fff(0x250)](_0x52541c=>{const _0x2abf78=a27_0x180fff,_0x38798e=document[_0x2abf78(0x251)]('d1-ladder-container')&&document[_0x2abf78(0x251)]('d1-ladder-container')[_0x2abf78(0x21e)][_0x2abf78(0x248)]!=='none',_0x3b80ab=document[_0x2abf78(0x251)]('d2-ladder-container')&&document['getElementById']('d2-ladder-container')['style'][_0x2abf78(0x248)]!=='none',_0x5dc2a9=document[_0x2abf78(0x251)]('d3-ladder-container')&&document[_0x2abf78(0x251)]('d3-ladder-container')['style']['display']!=='none',_0x112716=document['getElementById']('duos-ladder-container')&&document['getElementById']('duos-ladder-container')[_0x2abf78(0x21e)]['display']!=='none',_0x5251aa=_0x38798e?'d1':_0x3b80ab?'d2':_0x5dc2a9?'d3':_0x112716?_0x2abf78(0x1fe):'d1';findBestOpponent(_0x5251aa);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x384036=a27_0x180fff,_0x1cc12f=document['getElementById']('duos-switch'),_0x28a722=document['querySelector']('label[for=\x22duos-switch\x22]');_0x1cc12f&&_0x28a722&&(_0x1cc12f['addEventListener'](_0x384036(0x1f2),async _0x21761b=>{const _0x3b45e2=_0x384036;if(_0x21761b['target']['checked']){const _0x52fee5=auth?.[_0x3b45e2(0x1dd)],_0xebbe71=await checkIfUserIsAdmin(_0x52fee5);if(!_0xebbe71){_0x21761b[_0x3b45e2(0x249)]();const _0x31dce6=document['getElementById']('d1-switch');return _0x31dce6&&(_0x31dce6['checked']=!![],_0x31dce6[_0x3b45e2(0x20c)](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth[_0x384036(0x250)](async _0xc4f6d0=>{const _0x35a4ec=_0x384036,_0x4973a1=await checkIfUserIsAdmin(_0xc4f6d0);!_0x4973a1?(_0x1cc12f[_0x35a4ec(0x253)]=!![],_0x28a722[_0x35a4ec(0x21e)]['opacity']='0.5',_0x28a722['style']['cursor']='not-allowed',_0x28a722['title']=_0x35a4ec(0x1de)):(_0x1cc12f['disabled']=![],_0x28a722['style']['opacity']='1',_0x28a722['style'][_0x35a4ec(0x221)]='pointer',_0x28a722['title']='');}));});async function checkIfUserIsAdmin(_0x31dee2){const _0x2f9708=a27_0x180fff;if(!_0x31dee2)return![];try{const _0x91cd68=[_0x2f9708(0x1e7),'brian2af@outlook.com'];if(_0x31dee2['email']&&_0x91cd68['includes'](_0x31dee2['email'][_0x2f9708(0x1d9)]()))return!![];const _0xfd5078=[_0x2f9708(0x217),_0x2f9708(0x205),'playersD2',_0x2f9708(0x202)],_0x2f4171=['admin','owner',_0x2f9708(0x224),'creative\x20lead'];for(const _0x1d7b2d of _0xfd5078){try{const _0x846d72=doc(db,_0x1d7b2d,_0x31dee2['uid']),_0x3ec752=await getDoc(_0x846d72);if(_0x3ec752['exists']()){const _0x5835c5=_0x3ec752['data'](),_0x352541=(_0x5835c5[_0x2f9708(0x254)]||_0x5835c5[_0x2f9708(0x24b)]||'')['toLowerCase']();if(_0x352541&&_0x2f4171[_0x2f9708(0x1f5)](_0x352541))return!![];}}catch(_0x119840){console[_0x2f9708(0x1f6)]('Error\x20checking\x20'+_0x1d7b2d+':',_0x119840);}}return![];}catch(_0x3edd77){return console[_0x2f9708(0x1ed)]('Error\x20checking\x20admin\x20status:',_0x3edd77),![];}}function showAdminOnlyMessage(){const _0x45c6f7=document['getElementById']('admin-only-message');_0x45c6f7&&_0x45c6f7['remove']();const _0x24e1c7=document['createElement']('div');_0x24e1c7['id']='admin-only-message',_0x24e1c7['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x24e1c7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x24e1c7),setTimeout(()=>{const _0x16ab31=a27_0x384a;_0x24e1c7['parentNode']&&_0x24e1c7[_0x16ab31(0x241)]();},0xbb8);}