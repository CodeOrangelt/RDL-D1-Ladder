const a25_0x5294f6=a25_0xa6b6,a25_0xf9037b=(function(){let _0x19f855=!![];return function(_0x40a5e8,_0x53dd5a){const _0x62a1ff=_0x19f855?function(){if(_0x53dd5a){const _0x191f8e=_0x53dd5a['apply'](_0x40a5e8,arguments);return _0x53dd5a=null,_0x191f8e;}}:function(){};return _0x19f855=![],_0x62a1ff;};}()),a25_0x58f586=a25_0xf9037b(this,function(){const _0x3599c7=a25_0xa6b6;let _0x9f5e03;try{const _0x3ca760=Function(_0x3599c7(0x21e)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x9f5e03=_0x3ca760();}catch(_0x100bfe){_0x9f5e03=window;}const _0x46e62=_0x9f5e03[_0x3599c7(0x1ed)]=_0x9f5e03['console']||{},_0x1d60c6=['log','warn','info','error','exception',_0x3599c7(0x1e0),_0x3599c7(0x23f)];for(let _0x305a52=0x0;_0x305a52<_0x1d60c6['length'];_0x305a52++){const _0x3e8cc7=a25_0xf9037b[_0x3599c7(0x225)]['prototype']['bind'](a25_0xf9037b),_0x11f126=_0x1d60c6[_0x305a52],_0x578317=_0x46e62[_0x11f126]||_0x3e8cc7;_0x3e8cc7['__proto__']=a25_0xf9037b[_0x3599c7(0x1c1)](a25_0xf9037b),_0x3e8cc7['toString']=_0x578317[_0x3599c7(0x1c9)][_0x3599c7(0x1c1)](_0x578317),_0x46e62[_0x11f126]=_0x3e8cc7;}});a25_0x58f586();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];function a25_0x3b44(){const _0x10d7ec=['bind','eloHistory','none','uid',';\x22>','push','DOMContentLoaded','appendChild','toString','map','join','elo-recommendation-text-d3','playersDuos','Unranked','getElementById','error','<img\x20src=\x22../images/flags/','remove','#50C878','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#','empty','click','recentActivity','\x20(equipped:\x20','querySelector','log','duos-ladder-container','<img\x20src=\x22','opacity','table','classList','abs','\x20displaying\x20token:\x20','timestamp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','pointer','country','style','</td>\x0a\x20\x20\x20\x20</tr>',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','totalDeaths','label[for=\x22duos-switch\x22]','console','#CD7F32','Error\x20checking\x20admin\x20status:','matches','playersD3','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','toUpperCase','currentUser','get','addEventListener','d3-ladder-container','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','cursor','ðŸª™\x20Loaded\x20fresh\x20tokens\x20for','player','createElement','wins','textContent','disabled','Based\x20on\x20your\x20ELO\x20(','\x20ladder','players','querySelectorAll','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','toLowerCase','innerHTML','elo-recommendation-text-d2','elo','admin-only-message','forEach','Error\x20fetching\x20tokens:','pow','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20','fontSize','winRate','gray','toFixed','username','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','block','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20','eloRating','display','totalKills','duos','previousElo','Duos\x20ladder\x20is\x20currently\x20admin-only','d1-ladder-container','title','return\x20(function()\x20','totalMatches','find','add','active','function','tokenName','constructor','#FFD700','desc','Silver','data','ladder-player','innerText','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','Emerald','Error\x20finding\x20best\x20opponent:','d2-ladder-container',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','elo-recommendation-text-d1','MAX_SAFE_INTEGER','sort','losses','elo-recommendation-text-','d3-switch','getDate','set','rank','Recommendation\x20element\x20for\x20','body','exists','D3\x20toggle\x20clicked','date','trace','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents','target'];a25_0x3b44=function(){return _0x10d7ec;};return a25_0x3b44();}export async function loadLadderData(_0x52c95d=0x1){const _0x2f81e8=a25_0xa6b6;try{document['getElementById']('loading-indicator')['style'][_0x2f81e8(0x217)]='block';const _0xfe85d2=await getLadderData(_0x52c95d);_0xfe85d2['sort']((_0x34617f,_0x1eebfd)=>_0x1eebfd['elo']-_0x34617f['elo']);const _0x400ca4=_0xfe85d2['map'](_0x281ece=>_0x281ece['id']),_0x3cd333=await getEloHistoryBatch(_0x400ca4,_0x52c95d),_0x300d13=_0xfe85d2['map']((_0x3ffd5a,_0x3d1790)=>{const _0x2ecb96=_0x2f81e8,_0x497463=_0x3cd333[_0x3ffd5a['id']]||[],_0x1561ee=_0x497463[_0x2ecb96(0x233)]((_0x4edc3a,_0x28ff9f)=>new Date(_0x28ff9f['date'])-new Date(_0x4edc3a['date']))['slice'](0x0,0x5);return{..._0x3ffd5a,'rank':_0x3d1790+0x1,'lastMatches':_0x1561ee,'recentActivity':_0x1561ee['length']>0x0};});renderLadder(_0x300d13),setupRealTimeUpdates(_0x52c95d);}catch(_0x138f1c){console['error']('Error\x20loading\x20ladder\x20data:',_0x138f1c),document['getElementById']('error-message')[_0x2f81e8(0x22b)]='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')[_0x2f81e8(0x1e8)]['display']='none';}}function setupRealTimeUpdates(_0x5d8efa=0x1){const _0x2e9804=a25_0xa6b6;activeListeners['forEach'](_0x28e744=>_0x28e744()),activeListeners=[];const _0x3a710b=_0x5d8efa===0x1?'players':'playersD'+_0x5d8efa,_0x391933=_0x5d8efa===0x1?_0x2e9804(0x1f0):'matchesD'+_0x5d8efa,_0x5d553f=new Date();_0x5d553f['setDate'](_0x5d553f[_0x2e9804(0x237)]()-0x1);const _0xeaa990=setupEfficientListener(_0x391933,[where(_0x2e9804(0x23e),'>=',_0x5d553f['toISOString']()),limit(0xa),orderBy(_0x2e9804(0x23e),'desc')],async _0x318cda=>{_0x318cda['length']>0x0&&await loadLadderData(_0x5d8efa);});activeListeners['push'](_0xeaa990);}export function cleanupListeners(){const _0x29beb7=a25_0xa6b6;activeListeners[_0x29beb7(0x20a)](_0x37c754=>_0x37c754()),activeListeners=[];}function renderLadder(_0x33e4ad){const _0x2ef3bf=document['getElementById']('ladder-container');_0x2ef3bf['innerHTML']='',_0x33e4ad['forEach'](_0x32d0d6=>{const _0x4e961e=a25_0xa6b6,_0x1db149=document['createElement']('div');_0x1db149['className']=_0x4e961e(0x22a),_0x1db149['innerHTML']=_0x4e961e(0x1d6)+_0x32d0d6[_0x4e961e(0x239)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x32d0d6['username']||_0x32d0d6['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x32d0d6[_0x4e961e(0x208)]+_0x4e961e(0x215)+(_0x32d0d6[_0x4e961e(0x1d9)]?'active':'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x32d0d6['recentActivity']?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2ef3bf[_0x4e961e(0x1c8)](_0x1db149);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x134098=![]){const _0x13db53=a25_0xa6b6,_0x2a995c=document[_0x13db53(0x1db)]('#ladder\x20tbody');if(!_0x2a995c){console[_0x13db53(0x1d0)]('Ladder\x20table\x20body\x20not\x20found');return;}_0x2a995c['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x3627df=Date['now']();if(!_0x134098&&playerCache['data']&&_0x3627df-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x4cdd7e=collection(db,'players'),_0x1cc8c0=await getDocs(_0x4cdd7e),_0x2725a7=[];_0x1cc8c0['forEach'](_0x27c664=>{const _0x5db4ab=_0x13db53,_0x35a7a6=_0x27c664['data']();_0x2725a7[_0x5db4ab(0x1c6)]({..._0x35a7a6,'id':_0x27c664['id'],'elo':_0x35a7a6[_0x5db4ab(0x216)]||0x0,'position':_0x35a7a6['position']||Number[_0x5db4ab(0x232)]});});const _0x357c32=collection(db,'userProfiles'),_0x5a2947=await getDocs(_0x357c32),_0x5bee82=new Map();_0x5a2947[_0x13db53(0x20a)](_0x5ca0c3=>{const _0x174df7=_0x13db53,_0x1da864=_0x5ca0c3['data']();_0x1da864['username']&&_0x5bee82[_0x174df7(0x238)](_0x1da864['username']['toLowerCase'](),_0x1da864);}),_0x2725a7['forEach'](_0x2ed00f=>{const _0x3ec2e2=_0x13db53,_0x505add=_0x2ed00f['username']?.['toLowerCase']();if(_0x505add&&_0x5bee82['has'](_0x505add)){const _0x97c88=_0x5bee82[_0x3ec2e2(0x1f5)](_0x505add);_0x97c88['country']&&(_0x2ed00f['country']=_0x97c88['country']['toLowerCase']()),_0x2ed00f['points']=_0x97c88['points']||0x0;}else _0x2ed00f['points']=0x0;});const _0xdfcf7c=_0x2725a7[_0x13db53(0x1ca)](_0x15cada=>_0x15cada['username']),_0x216e95=await fetchBatchMatchStats(_0xdfcf7c);_0x2725a7['sort']((_0x10378a,_0x2ae3b2)=>{const _0x55fab0=_0x13db53,_0x1d0d5e=_0x216e95['get'](_0x10378a['username'])?.[_0x55fab0(0x21f)]||0x0,_0x453370=_0x216e95[_0x55fab0(0x1f5)](_0x2ae3b2['username'])?.[_0x55fab0(0x21f)]||0x0;if(_0x1d0d5e===0x0!==(_0x453370===0x0))return _0x1d0d5e===0x0?0x1:-0x1;return(_0x10378a['position']||0x3e7)-(_0x2ae3b2['position']||0x3e7);}),_0x2725a7['forEach']((_0x2b78ae,_0x5db32a)=>{_0x2b78ae['position']=_0x5db32a+0x1;}),playerCache['data']=_0x2725a7,playerCache[_0x13db53(0x1e4)]=_0x3627df,updateLadderDisplay(_0x2725a7,_0x216e95);}catch(_0x10088c){console['error']('Error\x20loading\x20ladder:',_0x10088c),_0x2a995c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x10088c['message']+_0x13db53(0x1e5);}}async function fetchBatchMatchStats(_0x32b3ed){const _0x3de49d=a25_0xa6b6,_0x4761ad=new Map();try{_0x32b3ed[_0x3de49d(0x20a)](_0x4aad98=>{_0x4761ad['set'](_0x4aad98,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x596d57=collection(db,'approvedMatches'),_0x52814e=await getDocs(_0x596d57);_0x52814e[_0x3de49d(0x20a)](_0x57ebae=>{const _0x4f20c3=_0x3de49d,_0x1f04fc=_0x57ebae['data'](),_0x50fd25=_0x1f04fc['winnerUsername'],_0x4aa5ff=_0x1f04fc['loserUsername'];if(_0x32b3ed['includes'](_0x50fd25)){const _0x8d2281=_0x4761ad['get'](_0x50fd25);_0x8d2281[_0x4f20c3(0x1fd)]++,_0x8d2281['totalMatches']++,_0x8d2281[_0x4f20c3(0x218)]+=parseInt(_0x1f04fc['winnerScore'])||0x0,_0x8d2281['totalDeaths']+=parseInt(_0x1f04fc['loserScore'])||0x0;}if(_0x32b3ed['includes'](_0x4aa5ff)){const _0x412184=_0x4761ad['get'](_0x4aa5ff);_0x412184[_0x4f20c3(0x234)]++,_0x412184['totalMatches']++,_0x412184[_0x4f20c3(0x218)]+=parseInt(_0x1f04fc['loserScore'])||0x0,_0x412184['totalDeaths']+=parseInt(_0x1f04fc['winnerScore'])||0x0;}}),_0x32b3ed['forEach'](_0x210280=>{const _0x14a57a=_0x3de49d,_0x513cd7=_0x4761ad['get'](_0x210280);_0x513cd7['kda']=_0x513cd7[_0x14a57a(0x1eb)]>0x0?(_0x513cd7[_0x14a57a(0x218)]/_0x513cd7['totalDeaths'])['toFixed'](0x2):_0x513cd7[_0x14a57a(0x218)][_0x14a57a(0x211)](0x2),_0x513cd7['winRate']=_0x513cd7['totalMatches']>0x0?(_0x513cd7['wins']/_0x513cd7['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x14cddb){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x14cddb);}return _0x4761ad;}function a25_0xa6b6(_0x1b1df6,_0x590922){const _0x58f586=a25_0x3b44();return a25_0xa6b6=function(_0xf9037b,_0xc3f9fa){_0xf9037b=_0xf9037b-0x1c1;let _0x3b4421=_0x58f586[_0xf9037b];return _0x3b4421;},a25_0xa6b6(_0x1b1df6,_0x590922);}function createPlayerRow(_0x5f4aad,_0x3c3f76){const _0x509290=a25_0xa6b6,_0x4e2112=parseFloat(_0x5f4aad[_0x509290(0x208)])||0x0;let _0xef4120='#DC143C';if(_0x3c3f76['totalMatches']===0x0)_0xef4120='#DC143C';else{if(_0x3c3f76['winRate']>=0x50&&_0x3c3f76['totalMatches']>=0x14)_0xef4120='#50C878';else{if(_0x4e2112>=0x2bc)_0xef4120='#FFD700';else{if(_0x4e2112>=0x1f4)_0xef4120='#C0C0C0';else _0x4e2112>=0xc8&&(_0xef4120='#CD7F32');}}}let _0x50df29='';return _0x5f4aad['country']&&(_0x50df29=_0x509290(0x1d1)+_0x5f4aad['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5f4aad[_0x509290(0x1e7)]+_0x509290(0x1f2)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5f4aad['position']+_0x509290(0x1d5)+encodeURIComponent(_0x5f4aad[_0x509290(0x212)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0xef4120+_0x509290(0x230)+_0x5f4aad['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x50df29+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0xef4120+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x4e2112+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c3f76['totalMatches']+_0x509290(0x1f8)+_0x3c3f76['wins']+_0x509290(0x1f8)+_0x3c3f76['losses']+_0x509290(0x1f8)+_0x3c3f76['kda']+_0x509290(0x1f8)+_0x3c3f76[_0x509290(0x20f)]+_0x509290(0x204)+_0x3c3f76['points']+_0x509290(0x1e9);}function getPlayerRankName(_0x2be6a0,_0x1b5099=0x0,_0x3d9e9f=0x0){const _0xa75692=a25_0xa6b6;if(_0x1b5099===0x0)return _0xa75692(0x1ce);if(_0x2be6a0>=0x3e8&&_0x3d9e9f>=0x50&&_0x1b5099>=0x14)return _0xa75692(0x22d);if(_0x2be6a0>=0x2bc)return'Gold';if(_0x2be6a0>=0x1f4)return _0xa75692(0x228);if(_0x2be6a0>=0xc8)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x56ddcf){const _0x2d9ee1=a25_0xa6b6,_0x24e588=new Map();_0x56ddcf['forEach'](_0x136ee9=>{_0x24e588['set'](_0x136ee9,0x0);});try{const _0x3f85a9=collection(db,'players'),_0x584eb9=await getDocs(_0x3f85a9),_0x44e283=new Map(),_0x537e10=new Map();_0x584eb9['forEach'](_0x2c1476=>{const _0x191b4e=a25_0xa6b6,_0x26c0e1=_0x2c1476['data']();_0x26c0e1['username']&&(_0x44e283['set'](_0x2c1476['id'],_0x26c0e1[_0x191b4e(0x212)]),_0x537e10[_0x191b4e(0x238)](_0x26c0e1[_0x191b4e(0x212)]['toLowerCase'](),_0x2c1476['id']));});const _0x455998=collection(db,_0x2d9ee1(0x1c2)),_0x47ad04=query(_0x455998,orderBy('timestamp',_0x2d9ee1(0x227)),limit(0x12c)),_0x30bdbf=await getDocs(_0x47ad04);if(_0x30bdbf[_0x2d9ee1(0x1d7)])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x24e588;if(_0x30bdbf['docs']['length']>0x0){const _0x43e144=_0x30bdbf['docs'][0x0]['data']();if(_0x43e144[_0x2d9ee1(0x1fb)]&&_0x44e283['has'](_0x43e144[_0x2d9ee1(0x1fb)])){}}const _0x9d4b5a=new Map();let _0x9a6812=0x0;_0x30bdbf['forEach'](_0x3cf63f=>{const _0x31ed3f=_0x2d9ee1,_0x27305e=_0x3cf63f['data']();let _0x32752b=null;if(_0x27305e['player']&&_0x44e283['has'](_0x27305e[_0x31ed3f(0x1fb)]))_0x32752b=_0x44e283['get'](_0x27305e[_0x31ed3f(0x1fb)]);else{if(_0x27305e['username']&&_0x537e10['has'](_0x27305e[_0x31ed3f(0x212)]['toLowerCase']()))_0x32752b=_0x27305e[_0x31ed3f(0x212)];else _0x27305e['playerUsername']&&_0x537e10['has'](_0x27305e['playerUsername']['toLowerCase']())&&(_0x32752b=_0x27305e['playerUsername']);}_0x32752b&&_0x56ddcf['includes'](_0x32752b)&&(_0x9a6812++,!_0x9d4b5a['has'](_0x32752b)&&_0x9d4b5a['set'](_0x32752b,[]),_0x9d4b5a['get'](_0x32752b)['push']({..._0x27305e,'timestamp':_0x27305e[_0x31ed3f(0x1e4)]?.['seconds']||0x0}));}),_0x9d4b5a[_0x2d9ee1(0x20a)]((_0x3a8916,_0x2901b7)=>{const _0x181225=_0x2d9ee1;if(_0x3a8916['length']>0x0){_0x3a8916['sort']((_0x180042,_0x461f0a)=>_0x461f0a[_0x181225(0x1e4)]-_0x180042[_0x181225(0x1e4)]);const _0x9e63f8=_0x3a8916['find'](_0x55a33e=>_0x55a33e['change']!==undefined||_0x55a33e['newElo']!==undefined&&_0x55a33e[_0x181225(0x21a)]!==undefined||_0x55a33e['newEloRating']!==undefined&&_0x55a33e['oldEloRating']!==undefined);if(_0x9e63f8){let _0x6a6fe2;if(_0x9e63f8['change']!==undefined)_0x6a6fe2=parseInt(_0x9e63f8['change']);else{if(_0x9e63f8['newElo']!==undefined&&entry[_0x181225(0x21a)]!==undefined)_0x6a6fe2=parseInt(_0x9e63f8['newElo'])-parseInt(_0x9e63f8['previousElo']);else _0x9e63f8['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x6a6fe2=parseInt(_0x9e63f8['newEloRating'])-parseInt(_0x9e63f8['oldEloRating']));}!isNaN(_0x6a6fe2)&&_0x6a6fe2!==0x0&&_0x24e588['set'](_0x2901b7,_0x6a6fe2);}}});}catch(_0x2225b4){console['error']('Error\x20fetching\x20ELO\x20history:',_0x2225b4);}return _0x24e588;}function createPlayerRowWithToken(_0x4dd93d,_0x411efe,_0x5d18c9){const _0x110558=a25_0xa6b6,_0x192beb=parseFloat(_0x4dd93d['elo'])||0x0;let _0x53c7bd='#DC143C';if(_0x411efe[_0x110558(0x21f)]===0x0)_0x53c7bd='#DC143C';else{if(_0x411efe['winRate']>=0x50&&_0x411efe[_0x110558(0x21f)]>=0x14)_0x53c7bd=_0x110558(0x1d3);else{if(_0x192beb>=0x2bc)_0x53c7bd='#FFD700';else{if(_0x192beb>=0x1f4)_0x53c7bd='#C0C0C0';else _0x192beb>=0xc8&&(_0x53c7bd='#CD7F32');}}}let _0x172eec='';_0x4dd93d['country']&&(_0x172eec=_0x110558(0x1d1)+_0x4dd93d[_0x110558(0x1e7)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4dd93d['country']+_0x110558(0x22c));let _0x2d1a6a='';return _0x5d18c9&&(_0x2d1a6a=_0x110558(0x1de)+_0x5d18c9['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x5d18c9[_0x110558(0x224)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x5d18c9['tokenName']+'\x20'+(_0x5d18c9['equipped']?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4dd93d['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x4dd93d['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x53c7bd+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4dd93d['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x172eec+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2d1a6a+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x53c7bd+_0x110558(0x1ea)+_0x192beb+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x411efe[_0x110558(0x21f)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x411efe['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x411efe['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x411efe['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x411efe[_0x110558(0x20f)]+_0x110558(0x240)+(_0x4dd93d['points']||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x145e34,_0x4b8f4d=null){const _0x1618f0=a25_0xa6b6,_0x218145=document['querySelector']('#ladder\x20tbody');if(!_0x218145){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x431f92=document['querySelector']('#ladder\x20thead\x20tr');_0x431f92&&(_0x431f92[_0x1618f0(0x206)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x31126e=_0x145e34['map'](_0x1177b5=>_0x1177b5[_0x1618f0(0x212)]);!_0x4b8f4d&&(_0x4b8f4d=await fetchBatchMatchStats(_0x31126e));let _0x2b363f=new Map();try{typeof clearTokenCache===_0x1618f0(0x223)&&clearTokenCache(),_0x2b363f=await getTokensByUsernames(_0x31126e),console['log'](_0x1618f0(0x1fa),_0x2b363f['size'],'players'),_0x2b363f[_0x1618f0(0x20a)]((_0x24035b,_0xd9d552)=>{const _0x124da5=_0x1618f0,_0x4633fc=_0x24035b[_0x124da5(0x220)](_0x4468c9=>_0x4468c9['equipped']);_0x4633fc&&console['log']('ðŸŽ¯\x20'+_0xd9d552+'\x20has\x20equipped:\x20'+_0x4633fc['tokenName']);});}catch(_0x11d5f2){console['error'](_0x1618f0(0x20b),_0x11d5f2);}const _0x136e7e=_0x145e34['map'](_0x5026c1=>{const _0x1946c4=_0x1618f0,_0x3a00e6=_0x4b8f4d[_0x1946c4(0x1f5)](_0x5026c1[_0x1946c4(0x212)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x292743=_0x2b363f[_0x1946c4(0x1f5)](_0x5026c1[_0x1946c4(0x212)])||[],_0x4fce05=getPrimaryDisplayToken(_0x292743);return _0x4fce05&&console['log']('ðŸŽ¨\x20'+_0x5026c1['username']+_0x1946c4(0x1e3)+_0x4fce05['tokenName']+_0x1946c4(0x1da)+_0x4fce05['equipped']+')'),createPlayerRowWithToken(_0x5026c1,_0x3a00e6,_0x4fce05);})[_0x1618f0(0x1cb)]('');_0x218145[_0x1618f0(0x206)]=_0x136e7e,getPlayersLastEloChanges(_0x31126e)['then'](_0x52664c=>{const _0x15cacc=_0x1618f0,_0x3da862=new Map();_0x218145[_0x15cacc(0x203)]('tr')[_0x15cacc(0x20a)]((_0x59e4ec,_0x4a5364)=>{_0x4a5364<_0x31126e['length']&&_0x3da862['set'](_0x31126e[_0x4a5364],_0x59e4ec);}),_0x52664c['forEach']((_0x2cb414,_0x2534e3)=>{const _0x391391=_0x15cacc,_0x402162=_0x3da862['get'](_0x2534e3);if(_0x402162&&_0x2cb414!==0x0){const _0x2f9676=_0x402162[_0x391391(0x1db)]('td:nth-child(3)');if(_0x2f9676){const _0x478a26=_0x2cb414>0x0?'+'+_0x2cb414:''+_0x2cb414,_0x4f685e=_0x2f9676['querySelector']('.trend-indicator');_0x4f685e&&(_0x4f685e[_0x391391(0x1fe)]=_0x478a26,_0x4f685e[_0x391391(0x1e8)]['color']=_0x2cb414>0x0?'#4CAF50':'#F44336',_0x4f685e['style']['fontWeight']='bold',_0x4f685e['style'][_0x391391(0x20e)]='0.85em',_0x4f685e['style'][_0x391391(0x217)]='inline',_0x4f685e['style']['visibility']='visible',_0x4f685e['style']['opacity']='1');}}});})['catch'](_0x487702=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x487702));}function initLadderToggles(){const _0x361504=a25_0xa6b6,_0x492f25=document['getElementById']('d1-switch'),_0x8da907=document['getElementById']('d2-switch'),_0x540a10=document['getElementById'](_0x361504(0x236)),_0x2b88f3=document['getElementById']('duos-switch'),_0x3c17f6=document['getElementById'](_0x361504(0x21c)),_0x332397=document[_0x361504(0x1cf)]('d2-ladder-container'),_0x5017b8=document[_0x361504(0x1cf)](_0x361504(0x1f7)),_0x3a025a=document['getElementById']('duos-ladder-container');function _0x1fbddb(){const _0x36c641=_0x361504;if(_0x3c17f6)_0x3c17f6['classList']['remove']('active');if(_0x332397)_0x332397[_0x36c641(0x1e1)]['remove'](_0x36c641(0x222));if(_0x5017b8)_0x5017b8[_0x36c641(0x1e1)]['remove'](_0x36c641(0x222));if(_0x3a025a)_0x3a025a[_0x36c641(0x1e8)]['display']=_0x36c641(0x1c3);if(_0x3c17f6)_0x3c17f6['style'][_0x36c641(0x217)]='none';if(_0x332397)_0x332397['style'][_0x36c641(0x217)]=_0x36c641(0x1c3);if(_0x5017b8)_0x5017b8[_0x36c641(0x1e8)]['display']=_0x36c641(0x1c3);}_0x492f25&&_0x492f25['addEventListener']('click',()=>{const _0x5a4d7e=_0x361504;console['log']('D1\x20toggle\x20clicked'),_0x1fbddb();_0x3c17f6&&(_0x3c17f6['classList'][_0x5a4d7e(0x221)](_0x5a4d7e(0x222)),_0x3c17f6[_0x5a4d7e(0x1e8)]['display']='block');document['getElementById'](_0x5a4d7e(0x231))['style']['display']=_0x5a4d7e(0x214),document[_0x5a4d7e(0x1cf)]('elo-recommendation-text-d2')['style'][_0x5a4d7e(0x217)]='none',document['getElementById']('elo-recommendation-text-d3')['style'][_0x5a4d7e(0x217)]=_0x5a4d7e(0x1c3);if(_0x492f25)_0x492f25['classList']['add']('active');if(_0x8da907)_0x8da907['classList'][_0x5a4d7e(0x1d2)](_0x5a4d7e(0x222));if(_0x540a10)_0x540a10[_0x5a4d7e(0x1e1)][_0x5a4d7e(0x1d2)](_0x5a4d7e(0x222));displayLadder(),findBestOpponent('d1');}),_0x8da907&&_0x8da907['addEventListener'](_0x361504(0x1d8),()=>{const _0x53603e=_0x361504;console['log']('D2\x20toggle\x20clicked'),_0x1fbddb();_0x332397&&(_0x332397[_0x53603e(0x1e1)]['add']('active'),_0x332397['style']['display']='block');document[_0x53603e(0x1cf)]('elo-recommendation-text-d1')['style'][_0x53603e(0x217)]=_0x53603e(0x1c3),document['getElementById']('elo-recommendation-text-d2')['style'][_0x53603e(0x217)]=_0x53603e(0x214),document['getElementById'](_0x53603e(0x1cc))['style']['display']='none';if(_0x8da907)_0x8da907['classList'][_0x53603e(0x221)]('active');if(_0x492f25)_0x492f25['classList']['remove']('active');if(_0x540a10)_0x540a10['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x540a10&&_0x540a10[_0x361504(0x1f6)]('click',()=>{const _0x1e5359=_0x361504;console['log'](_0x1e5359(0x23d)),_0x1fbddb();_0x5017b8&&(_0x5017b8['classList']['add']('active'),_0x5017b8['style']['display']='block');document[_0x1e5359(0x1cf)](_0x1e5359(0x231))['style']['display']=_0x1e5359(0x1c3),document['getElementById'](_0x1e5359(0x207))[_0x1e5359(0x1e8)]['display']='none',document['getElementById'](_0x1e5359(0x1cc))['style'][_0x1e5359(0x217)]='block';if(_0x540a10)_0x540a10['classList'][_0x1e5359(0x221)]('active');if(_0x492f25)_0x492f25['classList']['remove'](_0x1e5359(0x222));if(_0x8da907)_0x8da907[_0x1e5359(0x1e1)][_0x1e5359(0x1d2)]('active');displayLadderD3(),findBestOpponent('d3');}),_0x2b88f3&&_0x2b88f3['addEventListener']('click',()=>{const _0x209d4c=_0x361504;_0x1fbddb();if(_0x3a025a)_0x3a025a[_0x209d4c(0x1e8)]['display']='block';displayLadderDuos(),findBestOpponent(_0x209d4c(0x219)),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document[_0x209d4c(0x1cf)]('elo-recommendation-text-d2')['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')['style'][_0x209d4c(0x217)]='none';});}document[a25_0x5294f6(0x1f6)](a25_0x5294f6(0x1c7),()=>{initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0x1fb032='d1'){const _0x58fdc8=a25_0x5294f6,_0x5b4e1e=_0x58fdc8(0x235)+_0x1fb032,_0x97b796=document[_0x58fdc8(0x1cf)](_0x5b4e1e);if(!_0x97b796){console['error'](_0x58fdc8(0x23a)+_0x1fb032+'\x20not\x20found');return;}const _0x30b3da=auth[_0x58fdc8(0x1f4)];if(!_0x30b3da){_0x97b796['textContent']='';return;}try{const _0x357a49=doc(db,'userProfiles',_0x30b3da[_0x58fdc8(0x1c4)]),_0x3ea366=await getDoc(_0x357a49);if(!_0x3ea366[_0x58fdc8(0x23c)]()){console[_0x58fdc8(0x1dc)]('No\x20user\x20profile\x20found'),_0x97b796['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x2d17cc=_0x3ea366['data'](),_0x1c20d2=_0x2d17cc[_0x58fdc8(0x212)];if(!_0x1c20d2){_0x97b796[_0x58fdc8(0x1fe)]=_0x58fdc8(0x241);return;}let _0x41bf01;switch(_0x1fb032){case'd1':_0x41bf01='players';break;case'd2':_0x41bf01='playersD2';break;case'd3':_0x41bf01=_0x58fdc8(0x1f1);break;case'duos':_0x41bf01=_0x58fdc8(0x1cd);break;default:_0x41bf01=_0x58fdc8(0x202);}if(_0x1fb032==='duos'){const _0x349f9f=collection(db,_0x41bf01),_0xd79ae2=query(_0x349f9f,where(_0x58fdc8(0x212),'==',_0x1c20d2)),_0x53aa0c=await getDocs(_0xd79ae2);if(_0x53aa0c['empty']){_0x97b796[_0x58fdc8(0x1fe)]='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x89f97c=_0x53aa0c['docs'][0x0][_0x58fdc8(0x229)](),_0x3f18f3=parseInt(_0x89f97c['eloRating'])||0x4b0;if(_0x89f97c['hasTeam']&&_0x89f97c['teammate']){_0x97b796['innerHTML']=_0x58fdc8(0x213)+_0x89f97c['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x1f89ed=await getDocs(_0x349f9f);let _0x3480b6=null,_0x3e87e5=-0x1;_0x1f89ed[_0x58fdc8(0x20a)](_0x5243e0=>{const _0x27a8e1=_0x58fdc8,_0x8e3cb5=_0x5243e0['data']();if(_0x8e3cb5['username']===_0x1c20d2)return;if(_0x8e3cb5['hasTeam'])return;const _0xcdd661=parseInt(_0x8e3cb5['eloRating'])||0x4b0,_0x3a81d1=Math[_0x27a8e1(0x1e2)](_0xcdd661-_0x3f18f3),_0x4073bf=Math['max'](0x0,0xc8-_0x3a81d1);_0x4073bf>_0x3e87e5&&(_0x3480b6=_0x8e3cb5,_0x3e87e5=_0x4073bf);});if(_0x3480b6){const _0x332b9e=parseInt(_0x3480b6['eloRating'])||0x4b0;let _0x157d6c='gray';if(_0x332b9e>=0x7d0)_0x157d6c=_0x58fdc8(0x1d3);else{if(_0x332b9e>=0x708)_0x157d6c=_0x58fdc8(0x226);else{if(_0x332b9e>=0x640)_0x157d6c='#C0C0C0';else _0x332b9e>=0x578&&(_0x157d6c=_0x58fdc8(0x1ee));}}_0x97b796[_0x58fdc8(0x206)]='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x157d6c+';\x22>'+_0x3480b6['username']+'</span>\x20(ELO:\x20'+_0x332b9e+')';}else _0x97b796['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x2b4b61=collection(db,_0x41bf01),_0x5aed1f=query(_0x2b4b61,where('username','==',_0x1c20d2)),_0x1692d2=await getDocs(_0x5aed1f);if(_0x1692d2[_0x58fdc8(0x1d7)]){_0x97b796['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x1fb032[_0x58fdc8(0x1f3)]()+_0x58fdc8(0x201);return;}const _0x3887be=_0x1692d2['docs'][0x0][_0x58fdc8(0x229)](),_0x3bdfbd=parseInt(_0x3887be['eloRating'])||0x5dc,_0x3075d8=await getDocs(_0x2b4b61);let _0x3e87f2=null,_0x59b4a3=-0x1;const _0x31f84e=getPlayerRankName(_0x3bdfbd);_0x3075d8[_0x58fdc8(0x20a)](_0x1f220d=>{const _0x28b91d=_0x58fdc8,_0x1710e5=_0x1f220d['data']();if(_0x1710e5['username']===_0x1c20d2)return;const _0x1e1bb0=parseInt(_0x1710e5['eloRating'])||0x5dc,_0x5e2f92=getPlayerRankName(_0x1e1bb0),_0x5e6ac6=Math['abs'](_0x1e1bb0-_0x3bdfbd),_0x2be1b0=0x20,_0x4ecaf3=0x1/(0x1+Math[_0x28b91d(0x20c)](0xa,(_0x1e1bb0-_0x3bdfbd)/0x190)),_0x58276d=Math['round'](_0x2be1b0*(0x1-_0x4ecaf3));if(_0x58276d<=0x0)return;let _0x357857=0x0;const _0x3e1aff=Math['max'](0x0,0x64-_0x5e6ac6*0.5),_0x40f531=_0x58276d>=0x3&&_0x58276d<=0x8?0x32:_0x58276d>0x0&&_0x58276d<0xf?0x1e:0xa,_0x169224=_0x31f84e===_0x5e2f92?0x28:0x0;_0x357857=_0x3e1aff+_0x40f531+_0x169224,_0x357857>_0x59b4a3&&(_0x3e87f2=_0x1710e5,_0x59b4a3=_0x357857);});if(_0x3e87f2){const _0x5965d2=parseInt(_0x3e87f2['eloRating'])||0x5dc;let _0x21be81=_0x58fdc8(0x210);if(_0x5965d2>=0x7d0)_0x21be81='#50C878';else{if(_0x5965d2>=0x708)_0x21be81=_0x58fdc8(0x226);else{if(_0x5965d2>=0x640)_0x21be81='#b9f1fc';else _0x5965d2>=0x578&&(_0x21be81='#CD7F32');}}_0x97b796[_0x58fdc8(0x206)]=_0x58fdc8(0x200)+_0x3bdfbd+_0x58fdc8(0x1d4)+_0x21be81+_0x58fdc8(0x1c5)+_0x3e87f2['username']+'</span>';}else _0x97b796['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x3bdfbd+')';}catch(_0x36b384){console[_0x58fdc8(0x1d0)](_0x58fdc8(0x22e),_0x36b384),_0x97b796[_0x58fdc8(0x1fe)]='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x5dbaa3=>{const _0x3f98d1=a25_0x5294f6,_0x12cf91=document[_0x3f98d1(0x1cf)]('d1-ladder-container')&&document[_0x3f98d1(0x1cf)]('d1-ladder-container')['style'][_0x3f98d1(0x217)]!=='none',_0x1224de=document['getElementById']('d2-ladder-container')&&document[_0x3f98d1(0x1cf)](_0x3f98d1(0x22f))['style']['display']!=='none',_0x8f87e1=document[_0x3f98d1(0x1cf)]('d3-ladder-container')&&document['getElementById'](_0x3f98d1(0x1f7))[_0x3f98d1(0x1e8)]['display']!==_0x3f98d1(0x1c3),_0xa80d40=document['getElementById']('duos-ladder-container')&&document['getElementById'](_0x3f98d1(0x1dd))['style']['display']!=='none',_0xd4ea03=_0x12cf91?'d1':_0x1224de?'d2':_0x8f87e1?'d3':_0xa80d40?_0x3f98d1(0x219):'d1';findBestOpponent(_0xd4ea03);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x4f0350=a25_0x5294f6,_0x51cd1e=document['getElementById']('duos-switch'),_0x5cf9c6=document['querySelector'](_0x4f0350(0x1ec));_0x51cd1e&&_0x5cf9c6&&(_0x51cd1e['addEventListener']('change',async _0x49d239=>{const _0x59fbb4=_0x4f0350;if(_0x49d239[_0x59fbb4(0x242)]['checked']){const _0x3f1a64=auth?.['currentUser'],_0x2b54bc=await checkIfUserIsAdmin(_0x3f1a64);if(!_0x2b54bc){_0x49d239['preventDefault']();const _0x449f64=document['getElementById']('d1-switch');return _0x449f64&&(_0x449f64['checked']=!![],_0x449f64['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x21cdbb=>{const _0xb251fb=_0x4f0350,_0x32345b=await checkIfUserIsAdmin(_0x21cdbb);!_0x32345b?(_0x51cd1e['disabled']=!![],_0x5cf9c6['style'][_0xb251fb(0x1df)]='0.5',_0x5cf9c6['style']['cursor']='not-allowed',_0x5cf9c6[_0xb251fb(0x21d)]=_0xb251fb(0x21b)):(_0x51cd1e[_0xb251fb(0x1ff)]=![],_0x5cf9c6['style']['opacity']='1',_0x5cf9c6['style'][_0xb251fb(0x1f9)]=_0xb251fb(0x1e6),_0x5cf9c6['title']='');}));});async function checkIfUserIsAdmin(_0x2c7486){const _0x1c7f11=a25_0x5294f6;if(!_0x2c7486)return![];try{const _0x51f812=['admin@ladder.com','brian2af@outlook.com'];if(_0x2c7486['email']&&_0x51f812['includes'](_0x2c7486['email'][_0x1c7f11(0x205)]()))return!![];const _0x3754ac=['userProfiles','players','playersD2','playersD3'],_0xe7f16a=['admin','owner','council','creative\x20lead'];for(const _0x935b8f of _0x3754ac){try{const _0x169ef8=doc(db,_0x935b8f,_0x2c7486['uid']),_0x225f07=await getDoc(_0x169ef8);if(_0x225f07[_0x1c7f11(0x23c)]()){const _0x56a2f6=_0x225f07['data'](),_0x278d38=(_0x56a2f6['roleName']||_0x56a2f6['role']||'')[_0x1c7f11(0x205)]();if(_0x278d38&&_0xe7f16a['includes'](_0x278d38))return!![];}}catch(_0x496667){console['warn']('Error\x20checking\x20'+_0x935b8f+':',_0x496667);}}return![];}catch(_0x21395a){return console['error'](_0x1c7f11(0x1ef),_0x21395a),![];}}function showAdminOnlyMessage(){const _0x1b1f97=a25_0x5294f6,_0x2d0676=document[_0x1b1f97(0x1cf)](_0x1b1f97(0x209));_0x2d0676&&_0x2d0676[_0x1b1f97(0x1d2)]();const _0x58412d=document[_0x1b1f97(0x1fc)]('div');_0x58412d['id']='admin-only-message',_0x58412d['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x58412d[_0x1b1f97(0x206)]=_0x1b1f97(0x20d),document[_0x1b1f97(0x23b)]['appendChild'](_0x58412d),setTimeout(()=>{_0x58412d['parentNode']&&_0x58412d['remove']();},0xbb8);}