const a2_0x34d589=a2_0x1797,a2_0x4a84e2=(function(){let _0x3fbb42=!![];return function(_0x1b6331,_0x33439b){const _0x3076f5=_0x3fbb42?function(){const _0x5bab05=a2_0x1797;if(_0x33439b){const _0x55c47d=_0x33439b[_0x5bab05(0x2f0)](_0x1b6331,arguments);return _0x33439b=null,_0x55c47d;}}:function(){};return _0x3fbb42=![],_0x3076f5;};}()),a2_0x1ab211=a2_0x4a84e2(this,function(){const _0x1c17ad=a2_0x1797;let _0x123391;try{const _0x341630=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x123391=_0x341630();}catch(_0x522098){_0x123391=window;}const _0x4a114c=_0x123391[_0x1c17ad(0x2de)]=_0x123391[_0x1c17ad(0x2de)]||{},_0x549c25=['log','warn','info','error','exception','table','trace'];for(let _0x3ee6ea=0x0;_0x3ee6ea<_0x549c25['length'];_0x3ee6ea++){const _0x40e512=a2_0x4a84e2[_0x1c17ad(0x2d0)][_0x1c17ad(0x25f)]['bind'](a2_0x4a84e2),_0xed3516=_0x549c25[_0x3ee6ea],_0x576100=_0x4a114c[_0xed3516]||_0x40e512;_0x40e512[_0x1c17ad(0x274)]=a2_0x4a84e2['bind'](a2_0x4a84e2),_0x40e512['toString']=_0x576100[_0x1c17ad(0x2e6)]['bind'](_0x576100),_0x4a114c[_0xed3516]=_0x40e512;}});a2_0x1ab211();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x2200e2){const _0x578196=a2_0x1797;if(!_0x2200e2)return'#ffffff';_0x2200e2=_0x2200e2['replace']('#','');_0x2200e2['length']===0x3&&(_0x2200e2=_0x2200e2['split']('')['map'](_0x461156=>_0x461156+_0x461156)['join'](''));if(_0x2200e2['length']!==0x6)return'#ffffff';const _0x4eb8a5=parseInt(_0x2200e2[_0x578196(0x2df)](0x0,0x2),0x10),_0x5b7fe7=parseInt(_0x2200e2[_0x578196(0x2df)](0x2,0x4),0x10),_0x5f4481=parseInt(_0x2200e2['substring'](0x4,0x6),0x10),_0x3f7887=(_0x4eb8a5*0x12b+_0x5b7fe7*0x24b+_0x5f4481*0x72)/0x3e8;return _0x3f7887>=0x80?'#000000':_0x578196(0x2ee);}const DEFAULT_TROPHY_IMAGE=a2_0x34d589(0x351),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{auth['onAuthStateChanged'](async _0x530ebc=>{const _0x553485=a2_0x1797;if(!_0x530ebc){window['location']['href']=_0x553485(0x25d);return;}try{await initializeAdminDashboard();}catch(_0x4f790b){console[_0x553485(0x26f)]('Error\x20initializing\x20dashboard:',_0x4f790b),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x48c8f1){const _0x2a048d=a2_0x34d589;if(!_0x48c8f1)return[_0x2a048d(0x277)];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x48c8f1+'\x20in\x20all\x20collections...');const _0x1a6e94=[{'name':_0x2a048d(0x255),'displayName':'User\x20Profiles'},{'name':_0x2a048d(0x3f9),'displayName':'D1\x20Players'},{'name':_0x2a048d(0x306),'displayName':'D2\x20Players'},{'name':'playersD3','displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':'Non-Participants'}],_0x861cb=auth['currentUser'];let _0x2074a9=null,_0x12fccf=null;for(const _0x16dfec of _0x1a6e94){try{if(_0x861cb){const _0x7e093=doc(db,_0x16dfec['name'],_0x861cb['uid']),_0x2de4c2=await getDoc(_0x7e093);if(_0x2de4c2['exists']()){const _0x3489da=_0x2de4c2['data']();console['log'](_0x2a048d(0x34b)+_0x16dfec['displayName']+_0x2a048d(0x2a6),_0x3489da);const _0x249a47=(_0x3489da['roleName']||_0x3489da['role']||'')['toLowerCase']();if(_0x249a47&&_0x249a47!==_0x2a048d(0x2a4)){_0x2074a9=_0x249a47,_0x12fccf=_0x16dfec['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x2074a9+'\x20in\x20'+_0x12fccf);break;}}}if(!_0x2074a9){const _0xc64941=collection(db,_0x16dfec['name']),_0x1a03f=query(_0xc64941,where('email','==',_0x48c8f1)),_0x2b87bb=await getDocs(_0x1a03f);if(!_0x2b87bb['empty']){const _0x3e472b=_0x2b87bb[_0x2a048d(0x21d)][0x0]['data']();console[_0x2a048d(0x3f7)]('Found\x20user\x20in\x20'+_0x16dfec['displayName']+'\x20with\x20email\x20'+_0x48c8f1+':',_0x3e472b);const _0x7e9c8e=(_0x3e472b['roleName']||_0x3e472b['role']||'')['toLowerCase']();if(_0x7e9c8e&&_0x7e9c8e!==_0x2a048d(0x2a4)){_0x2074a9=_0x7e9c8e,_0x12fccf=_0x16dfec[_0x2a048d(0x2b2)],console['log']('Found\x20specific\x20role:\x20'+_0x2074a9+_0x2a048d(0x381)+_0x12fccf);break;}}}}catch(_0x255bff){console['error'](_0x2a048d(0x337)+_0x16dfec[_0x2a048d(0x2b2)]+':',_0x255bff);}}if(_0x2074a9){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x2074a9+'\x20(from\x20'+_0x12fccf+')');const _0x1c528a={'admin':['dashboard','manage-players','manage-matches','manage-articles',_0x2a048d(0x1d8),_0x2a048d(0x235),'inactive-players',_0x2a048d(0x3b0),'manage-trophies','elo-history','manage-highlights',_0x2a048d(0x3c0),_0x2a048d(0x2b9),'manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players',_0x2a048d(0x2b9),'manage-articles','manage-trophies',_0x2a048d(0x235),'inactive-players','settings','manage-trophies','elo-history',_0x2a048d(0x38c),_0x2a048d(0x3c0),'manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players',_0x2a048d(0x2b9)],'creative\x20lead':[_0x2a048d(0x277),'manage-articles',_0x2a048d(0x1d8),'elo-history','manage-highlights']};if(_0x1c528a[_0x2074a9])return console[_0x2a048d(0x3f7)]('Role\x20\x27'+_0x2074a9+_0x2a048d(0x39d),_0x1c528a[_0x2074a9]),_0x1c528a[_0x2074a9];}return console['log']('No\x20specific\x20permissions\x20for\x20user\x20'+_0x48c8f1+',\x20giving\x20default\x20access'),[_0x2a048d(0x277)];}function setupSidebarNavigation(_0x41d885=[]){const _0x135693=a2_0x34d589,_0x306c2b=document['querySelectorAll'](_0x135693(0x365)),_0x5e4345=document['querySelectorAll'](_0x135693(0x2b4));(!_0x41d885||_0x41d885['length']===0x0)&&(_0x41d885=[_0x135693(0x277)]);_0x306c2b['forEach'](_0x622f88=>{const _0x1fdfd6=_0x135693,_0x2c161d=_0x622f88[_0x1fdfd6(0x1e4)]('data-section');_0x41d885['includes'](_0x2c161d)?_0x622f88[_0x1fdfd6(0x3b3)]['display']='flex':_0x622f88['style']['display']='none',_0x622f88['addEventListener'](_0x1fdfd6(0x22e),()=>{const _0x2ee7bc=_0x1fdfd6,_0x218b5f=_0x622f88['getAttribute']('data-section');if(!_0x41d885['includes'](_0x218b5f)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x306c2b['forEach'](_0x41eb47=>_0x41eb47[_0x2ee7bc(0x431)]['remove'](_0x2ee7bc(0x22c))),_0x622f88['classList']['add'](_0x2ee7bc(0x22c)),_0x5e4345['forEach'](_0x235f4c=>{const _0x5c9179=_0x2ee7bc;_0x235f4c['style'][_0x5c9179(0x232)]='none';});const _0x2b51c8=document['getElementById'](_0x218b5f);_0x2b51c8&&(_0x2b51c8['style']['display']='block',console['log']('Switched\x20to\x20'+_0x218b5f+'\x20section'));});});const _0x230575=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x41d885[0x0]+'\x22]');_0x230575&&_0x230575['click'](),console['log'](_0x135693(0x303));}function setupTabNavigation(){const _0xbfd0d6=a2_0x34d589,_0x38fa9f=document[_0xbfd0d6(0x41f)]('.nav-item');let _0x433e8e=null,_0x39cf92=new Set();_0x38fa9f['forEach'](_0xd88f28=>{const _0x587a61=_0xbfd0d6;_0xd88f28[_0x587a61(0x421)]('click',function(){const _0x6e35e4=_0x587a61,_0xf79ec7=this['getAttribute'](_0x6e35e4(0x262));if(_0xf79ec7===_0x433e8e)return;_0x433e8e&&(document['getElementById'](_0x433e8e)[_0x6e35e4(0x3b3)]['display']='none',_0x38fa9f['forEach'](_0x3edc81=>_0x3edc81[_0x6e35e4(0x431)]['remove'](_0x6e35e4(0x22c)))),document['getElementById'](_0xf79ec7)['style']['display']='block',this['classList']['add']('active'),_0x433e8e=_0xf79ec7;});});}function loadSectionData(_0x58faf6){return;}async function initializeAdminDashboard(){const _0x4fd43b=a2_0x34d589;try{const _0x5198e4=auth['currentUser'],_0xe68079=await getUserTabPermissions(_0x5198e4['email']);console[_0x4fd43b(0x3f7)](_0x4fd43b(0x374)+_0x5198e4['email']+_0x4fd43b(0x414),_0xe68079),window['userAllowedTabs']=_0xe68079,setupSidebarNavigation(_0xe68079),setupLadderSelector(),setupDashboardSection(),_0xe68079['includes']('manage-players')&&setupManagePlayersSection(),_0xe68079['includes']('elo-history')&&setupEloHistorySection(),_0xe68079[_0x4fd43b(0x2ae)]('manage-ranks')&&setupRankControls(),_0xe68079['includes'](_0x4fd43b(0x272))&&setupManageArticlesSection(),_0xe68079['includes']('user-roles-section')&&setupUserRolesSection(),_0xe68079['includes']('manage-trophies')&&setupTrophyManagementSection(),_0xe68079['includes']('manage-highlights')&&setupManageHighlightsSection(),_0xe68079['includes'](_0x4fd43b(0x25e))&&setupInactivePlayersSection(),_0xe68079['includes'](_0x4fd43b(0x2b9))&&setupManageMatchesSection(),_0xe68079[_0x4fd43b(0x2ae)]('manage-points')&&setupManagePointsSection(),_0xe68079[_0x4fd43b(0x2ae)]('manage-ribbons')&&setupManageRibbonsSection(),setupDataLoadButtons(_0xe68079);}catch(_0x56c69c){console[_0x4fd43b(0x26f)]('Error\x20initializing\x20admin\x20dashboard:',_0x56c69c);}}function setupDataLoadButtons(_0x488221=[]){const _0x1f6a74=a2_0x34d589;(!_0x488221||_0x488221['length']===0x0)&&(_0x488221=['dashboard']);const _0x482028=document[_0x1f6a74(0x204)]('load-dashboard-data');_0x482028&&_0x482028['addEventListener'](_0x1f6a74(0x22e),function(){const _0x3533cc=_0x1f6a74;this[_0x3533cc(0x431)]['add']('loading'),this[_0x3533cc(0x214)]=_0x3533cc(0x24f),loadDashboardOverview()['then'](()=>{const _0x36544e=_0x3533cc;this['classList']['remove']('loading'),this['innerHTML']=_0x36544e(0x1fc);})['catch'](_0x14a538=>{const _0x167fac=_0x3533cc;console['error'](_0x167fac(0x266),_0x14a538),this[_0x167fac(0x431)][_0x167fac(0x34c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x488221['includes'](_0x1f6a74(0x1d8))){const _0x314ff5=document['getElementById']('load-trophies-data');_0x314ff5&&_0x314ff5['addEventListener'](_0x1f6a74(0x22e),function(){const _0x4ac1f4=_0x1f6a74;console[_0x4ac1f4(0x3f7)]('Load\x20trophies\x20data\x20clicked'),this[_0x4ac1f4(0x431)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x124069=_0x4ac1f4;this[_0x124069(0x431)][_0x124069(0x34c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})[_0x4ac1f4(0x417)](_0xe958be=>{const _0x3aff72=_0x4ac1f4;console['error']('Error\x20loading\x20trophies:',_0xe958be),this['classList']['remove']('loading'),this[_0x3aff72(0x214)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xe763b9=_0x3aff72;this['innerHTML']=_0xe763b9(0x3e2);},0xbb8);});});}if(_0x488221['includes']('manage-players')){const _0x24e1d5=document['getElementById']('load-players-data');_0x24e1d5&&_0x24e1d5['addEventListener']('click',function(){const _0x48c8cd=_0x1f6a74;console[_0x48c8cd(0x3f7)](_0x48c8cd(0x1d5)),this['classList'][_0x48c8cd(0x280)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x2aac76=_0x48c8cd;this[_0x2aac76(0x431)]['remove']('loading'),this[_0x2aac76(0x214)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0x97a7d1=>{const _0x3f5518=_0x48c8cd;console['error']('Error\x20loading\x20players:',_0x97a7d1),this['classList'][_0x3f5518(0x34c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x488221['includes'](_0x1f6a74(0x27e))){const _0x34ad13=document['getElementById']('load-elo-history-data');_0x34ad13&&_0x34ad13['addEventListener']('click',function(){const _0x40e656=_0x1f6a74;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x40e656(0x214)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)[_0x40e656(0x41e)](()=>{const _0x10684e=_0x40e656;this['classList'][_0x10684e(0x34c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})[_0x40e656(0x417)](_0x5ade7b=>{const _0x136770=_0x40e656;console[_0x136770(0x26f)]('Error\x20loading\x20history:',_0x5ade7b),this['classList']['remove']('loading'),this['innerHTML']=_0x136770(0x2fa),setTimeout(()=>{const _0x61086d=_0x136770;this[_0x61086d(0x214)]=_0x61086d(0x32a);},0xbb8);});});}if(_0x488221['includes']('manage-articles')){const _0x11b73c=document[_0x1f6a74(0x204)]('load-articles-data');_0x11b73c&&_0x11b73c['addEventListener']('click',function(){const _0x28ca49=_0x1f6a74;console['log']('Load\x20articles\x20data\x20clicked'),this['classList']['add'](_0x28ca49(0x433)),this['innerHTML']=_0x28ca49(0x24f),loadArticles()['then'](()=>{const _0x53022a=_0x28ca49;this[_0x53022a(0x431)]['remove'](_0x53022a(0x433)),this[_0x53022a(0x214)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})['catch'](_0xed9f0d=>{const _0x34e27a=_0x28ca49;console[_0x34e27a(0x26f)]('Error\x20loading\x20articles:',_0xed9f0d),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x93d0c1=_0x34e27a;this[_0x93d0c1(0x214)]=_0x93d0c1(0x428);},0xbb8);});});}if(_0x488221['includes'](_0x1f6a74(0x3c0))){const _0x67e224=document['getElementById']('load-users-data');_0x67e224&&_0x67e224['addEventListener']('click',function(){const _0x22897c=_0x1f6a74;console['log']('Load\x20users\x20data\x20clicked'),this['classList'][_0x22897c(0x280)](_0x22897c(0x433)),this['innerHTML']=_0x22897c(0x24f),loadUsersWithRoles()['then'](()=>{const _0xea17b6=_0x22897c;this[_0xea17b6(0x431)]['remove'](_0xea17b6(0x433)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})[_0x22897c(0x417)](_0x1cbeab=>{const _0x292185=_0x22897c;console['error']('Error\x20loading\x20users:',_0x1cbeab),this['classList'][_0x292185(0x34c)]('loading'),this['innerHTML']=_0x292185(0x2fa),setTimeout(()=>{const _0x32446a=_0x292185;this[_0x32446a(0x214)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x488221['includes'](_0x1f6a74(0x25e))){const _0x4a14a0=document['getElementById'](_0x1f6a74(0x357));_0x4a14a0&&_0x4a14a0[_0x1f6a74(0x421)]('click',function(){console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()['then'](()=>{const _0x21daee=a2_0x1797;this['classList'][_0x21daee(0x34c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x536ec5=>{const _0x380445=a2_0x1797;console['error']('Error\x20loading\x20inactive\x20players:',_0x536ec5),this['classList'][_0x380445(0x34c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0x488221['includes'](_0x1f6a74(0x38c))){const _0x58583b=document[_0x1f6a74(0x204)]('load-highlights-data');_0x58583b&&_0x58583b['addEventListener']('click',function(){const _0x336186=_0x1f6a74;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add'](_0x336186(0x433)),this[_0x336186(0x214)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x55974f=_0x336186;this['classList']['remove']('loading'),this[_0x55974f(0x214)]=_0x55974f(0x234);})['catch'](_0x239955=>{const _0x28242f=_0x336186;console[_0x28242f(0x26f)]('Error\x20loading\x20highlights:',_0x239955),this[_0x28242f(0x431)][_0x28242f(0x34c)](_0x28242f(0x433)),this['innerHTML']=_0x28242f(0x2fa),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x488221['includes'](_0x1f6a74(0x2b9))){const _0x59e2d1=document['getElementById']('load-matches-data');_0x59e2d1&&_0x59e2d1[_0x1f6a74(0x421)]('click',function(){const _0x4f8454=_0x1f6a74;console[_0x4f8454(0x3f7)](_0x4f8454(0x36a)),this['classList']['add'](_0x4f8454(0x433)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0x7ff775=>{const _0x43e146=_0x4f8454;console['error'](_0x43e146(0x2e4),_0x7ff775),this[_0x43e146(0x431)]['remove'](_0x43e146(0x433)),this[_0x43e146(0x214)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x488221[_0x1f6a74(0x2ae)]('manage-ribbons')){const _0x38c499=document['getElementById'](_0x1f6a74(0x294));_0x38c499&&_0x38c499[_0x1f6a74(0x421)]('click',function(){const _0x1619ab=_0x1f6a74;console['log']('Load\x20ribbons\x20data\x20clicked'),this[_0x1619ab(0x431)][_0x1619ab(0x280)]('loading'),this[_0x1619ab(0x214)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x34a997=_0x1619ab;this[_0x34a997(0x431)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})[_0x1619ab(0x417)](_0xa7504f=>{const _0x24ce83=_0x1619ab;console['error'](_0x24ce83(0x390),_0xa7504f),this['classList']['remove'](_0x24ce83(0x433)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log'](_0x1f6a74(0x3ff));}function setupDashboardSection(){const _0xb513aa=a2_0x34d589;document[_0xb513aa(0x204)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0xb513aa(0x328))['textContent']='-';}function setupLadderSelector(){const _0x46a485=a2_0x34d589,_0x4803d4=document['querySelectorAll']('.ladder-switch\x20input');_0x4803d4['forEach'](_0x5d6943=>{const _0x5216b3=a2_0x1797;_0x5d6943['addEventListener'](_0x5216b3(0x2c9),()=>{const _0x2e5774=_0x5216b3;currentLadder=_0x5d6943[_0x2e5774(0x2f8)],document['body'][_0x2e5774(0x256)](_0x2e5774(0x283),currentLadder);const _0x32ed08=document['getElementById']('current-ladder-display');_0x32ed08&&(_0x32ed08['textContent']=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById'](_0x2e5774(0x328))['textContent']='-',charts[_0x2e5774(0x301)]&&(charts['rankDistribution']['destroy'](),charts[_0x2e5774(0x301)]=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x2e5774(0x400));});});const _0x4dad5d=document['getElementById'](_0x46a485(0x20e));_0x4dad5d&&(_0x4dad5d['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x5bcead=a2_0x34d589;try{console['log'](_0x5bcead(0x2c7)),document['getElementById']('player-count')['textContent']='-',document[_0x5bcead(0x204)](_0x5bcead(0x201))['textContent']='-',document['getElementById'](_0x5bcead(0x3de))['textContent']='-',document[_0x5bcead(0x204)](_0x5bcead(0x328))['textContent']='-';const _0x16bce0=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x4cbd96=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?_0x5bcead(0x2cf):'approvedMatchesD3',_0x9b249e=currentLadder==='D1'?'pendingMatches':currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x1332e1=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?'RejectedD2':'RejectedD3';console[_0x5bcead(0x3f7)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x16bce0+',\x20'+_0x4cbd96);const _0x591463=await getDocs(collection(db,_0x16bce0)),_0x3edf0f=_0x591463[_0x5bcead(0x339)],_0x132391=await getDocs(collection(db,_0x4cbd96)),_0x3dad91=_0x132391[_0x5bcead(0x339)],_0x4aa7fc=await getDocs(collection(db,_0x9b249e)),_0x5ddee6=_0x4aa7fc['size'],_0x330f1b=await getDocs(collection(db,_0x1332e1)),_0x1cf9ce=_0x330f1b['size'];return document['getElementById'](_0x5bcead(0x27d))['textContent']=_0x3edf0f,document['getElementById']('match-count')['textContent']=_0x3dad91,document['getElementById']('pending-count')['textContent']=_0x5ddee6,document[_0x5bcead(0x204)]('rejected-count')[_0x5bcead(0x2db)]=_0x1cf9ce,await createRankDistributionChart(),await createActivityChart(),console[_0x5bcead(0x3f7)](_0x5bcead(0x241)),!![];}catch(_0x56a178){console['error'](_0x5bcead(0x3a6),_0x56a178);throw _0x56a178;}}async function createRankDistributionChart(){const _0x221dab=a2_0x34d589;try{const _0x355f65=collection(db,currentLadder==='D1'?'players':_0x221dab(0x306)),_0x39bf31=await getDocs(_0x355f65),_0x4c748d={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x39bf31[_0x221dab(0x202)](_0x22237a=>{const _0xcfa30d=_0x22237a['data'](),_0x37e881=_0xcfa30d['eloRating']||0x4b0;if(_0x37e881>=0x7d0)_0x4c748d['Emerald']++;else{if(_0x37e881>=0x708)_0x4c748d['Gold']++;else{if(_0x37e881>=0x640)_0x4c748d['Silver']++;else{if(_0x37e881>=0x578)_0x4c748d['Bronze']++;else _0x4c748d['Unranked']++;}}}});const _0x7395ac=document['getElementById']('rank-distribution-chart');charts['rankDistribution']&&charts[_0x221dab(0x301)][_0x221dab(0x385)](),charts[_0x221dab(0x301)]=new Chart(_0x7395ac,{'type':_0x221dab(0x38f),'data':{'labels':Object['keys'](_0x4c748d),'datasets':[{'data':Object[_0x221dab(0x251)](_0x4c748d),'backgroundColor':['#808080','#CD7F32','#C0C0C0',_0x221dab(0x2be),'#50C878'],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x221dab(0x22a),'font':{'size':0x10}}}}});}catch(_0x58aa8b){console[_0x221dab(0x26f)](_0x221dab(0x423),_0x58aa8b),document['getElementById']('rank-distribution-chart')['innerHTML']=_0x221dab(0x43c);}}async function createActivityChart(){const _0x24fb10=a2_0x34d589;try{const _0x3ad36c=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0xeaad18=collection(db,_0x3ad36c),_0x2586c2=new Date();_0x2586c2['setDate'](_0x2586c2['getDate']()-0x7);const _0x43189f=query(_0xeaad18,where('approvedAt','>=',_0x2586c2),orderBy('approvedAt','asc')),_0x5e69bd=await getDocs(_0x43189f),_0x5bd173=['Sunday','Monday',_0x24fb10(0x422),'Wednesday','Thursday',_0x24fb10(0x308),'Saturday'],_0x34740f=_0x5bd173['reduce']((_0x48f7a0,_0x5c74de)=>({..._0x48f7a0,[_0x5c74de]:0x0}),{});_0x5e69bd['forEach'](_0x47df9b=>{const _0x6f5df=_0x24fb10,_0x1149a5=_0x47df9b['data']();if(_0x1149a5['approvedAt']){const _0x4f9299=_0x5bd173[new Date(_0x1149a5['approvedAt']['seconds']*0x3e8)[_0x6f5df(0x245)]()];_0x34740f[_0x4f9299]++;}});const _0x2e88f7=document['getElementById']('activity-chart');charts['activity']&&charts[_0x24fb10(0x329)][_0x24fb10(0x385)](),charts[_0x24fb10(0x329)]=new Chart(_0x2e88f7,{'type':'bar','data':{'labels':_0x5bd173,'datasets':[{'label':_0x24fb10(0x3a3),'data':_0x5bd173['map'](_0x2f0e7c=>_0x34740f[_0x2f0e7c]),'backgroundColor':currentLadder==='D1'?_0x24fb10(0x2d2):'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':_0x24fb10(0x388)}}},'plugins':{'legend':{'labels':{'color':_0x24fb10(0x22a)}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':_0x24fb10(0x22a),'font':{'size':0x10}}}}});}catch(_0x224053){console['error'](_0x24fb10(0x3ee),_0x224053),document['getElementById']('activity-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0xdb610b=a2_0x34d589,_0x1d29da=document['getElementById']('players-table-body');if(!_0x1d29da)return;_0x1d29da['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x20416c='players';if(currentLadder==='D2')_0x20416c='playersD2';else currentLadder==='D3'&&(_0x20416c='playersD3');console[_0xdb610b(0x3f7)]('Loading\x20players\x20from\x20'+_0x20416c+'\x20collection...');const _0x52a93c=collection(db,_0x20416c),_0x20bbff=query(_0x52a93c,orderBy('eloRating',_0xdb610b(0x269))),_0x4e0288=await getDocs(_0x20bbff);if(_0x4e0288[_0xdb610b(0x3e8)]){_0x1d29da['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x1d29da['innerHTML']='';let _0x4ed856=0x1;_0x4e0288['forEach'](_0x52e865=>{const _0x236770=_0xdb610b,_0x5652f4=_0x52e865['data'](),_0x245a2a=getRankFromElo(_0x5652f4[_0x236770(0x23b)]||0x4b0),_0x371525=getRankStyle(_0x5652f4['eloRating']||0x4b0),_0x346b46=document[_0x236770(0x291)]('tr');_0x346b46['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x4ed856+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x371525[_0x236770(0x31a)]+_0x236770(0x3a8)+(_0x5652f4['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x5652f4[_0x236770(0x23b)]||0x4b0)+_0x236770(0x2a7)+_0x371525[_0x236770(0x31a)]+_0x236770(0x3d9)+_0x245a2a+_0x236770(0x439)+(_0x5652f4[_0x236770(0x284)]||0x0)+'W\x20/\x20'+(_0x5652f4['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x52e865['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x52e865['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1d29da['appendChild'](_0x346b46),_0x4ed856++;}),setupPlayerActionButtons();}catch(_0x246de1){console['error']('Error\x20loading\x20players:',_0x246de1),_0x1d29da['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x246de1['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x243a17){const _0x141cd2=a2_0x34d589;if(_0x243a17>=0x7d0)return'Emerald';if(_0x243a17>=0x708)return'Gold';if(_0x243a17>=0x640)return _0x141cd2(0x3f3);if(_0x243a17>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x96d38b=a2_0x34d589;document[_0x96d38b(0x41f)](_0x96d38b(0x376))[_0x96d38b(0x202)](_0x44a926=>{_0x44a926['addEventListener']('click',async _0x22e1a7=>{const _0x11d2d9=_0x22e1a7['currentTarget']['dataset']['id'];openEditPlayerModal(_0x11d2d9);});}),document[_0x96d38b(0x41f)]('.delete-btn')['forEach'](_0xa4e826=>{_0xa4e826['addEventListener']('click',async _0x38c9c4=>{const _0x15a904=a2_0x1797,_0x37cb59=_0x38c9c4['currentTarget'][_0x15a904(0x3c3)]['id'];confirmDeletePlayer(_0x37cb59);});});}async function openEditPlayerModal(_0x5a2d4b){const _0x434720=a2_0x34d589;try{const _0x118b69=currentLadder==='D1'?_0x434720(0x3f9):'playersD2',_0x19a70b=doc(db,_0x118b69,_0x5a2d4b),_0x4b771c=await getDoc(_0x19a70b);if(!_0x4b771c['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x4f163b=_0x4b771c['data'](),_0x455321=document[_0x434720(0x204)](_0x434720(0x370)),_0x5ef04=document['getElementById']('edit-username'),_0x6927e7=document['getElementById']('edit-elo'),_0x2f94a8=document['getElementById']('edit-wins'),_0x4f2b71=document['getElementById'](_0x434720(0x2a5));_0x5ef04['value']=_0x4f163b['username']||'',_0x6927e7[_0x434720(0x2f8)]=_0x4f163b['eloRating']||0x4b0,_0x2f94a8['value']=_0x4f163b['wins']||0x0,_0x4f2b71['value']=_0x4f163b['losses']||0x0,_0x455321['dataset']['playerId']=_0x5a2d4b,_0x455321['classList']['add']('active');}catch(_0xafd077){console['error']('Error\x20opening\x20edit\x20modal:',_0xafd077),showNotification('Failed\x20to\x20load\x20player\x20data','error');}}async function saveEditedPlayer(){const _0x37ac2e=a2_0x34d589;try{const _0x2723ff=document[_0x37ac2e(0x204)](_0x37ac2e(0x370)),_0x8b03c2=_0x2723ff['dataset']['playerId'];if(!_0x8b03c2){showNotification('No\x20player\x20selected','error');return;}const _0x271cc9=document['getElementById']('edit-username'),_0x1fdaff=document['getElementById'](_0x37ac2e(0x358)),_0x5c6df4=document[_0x37ac2e(0x204)]('edit-wins'),_0x395015=document['getElementById']('edit-losses'),_0x2d9684=_0x271cc9['value']['trim'](),_0xb459cf=parseInt(_0x1fdaff['value']),_0x12e578=parseInt(_0x5c6df4[_0x37ac2e(0x2f8)]),_0x42f6ea=parseInt(_0x395015['value']);if(!_0x2d9684||isNaN(_0xb459cf)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x37ac2e(0x26f));return;}const _0x59e974=currentLadder==='D1'?'players':_0x37ac2e(0x306),_0x22612a=doc(db,_0x59e974,_0x8b03c2),_0x45609e=await getDoc(_0x22612a),_0x3d4f0=_0x45609e['exists']()?_0x45609e['data']():{},_0x14cef8=_0x3d4f0['eloRating']||0x4b0;await updateDoc(_0x22612a,{'username':_0x2d9684,'eloRating':_0xb459cf,'wins':_0x12e578||0x0,'losses':_0x42f6ea||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0xb459cf!==_0x14cef8){const _0x1064e1=currentLadder==='D1'?'eloHistory':_0x37ac2e(0x208);await addDoc(collection(db,_0x1064e1),{'player':_0x2d9684,'previousElo':_0x14cef8,'newElo':_0xb459cf,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully',_0x37ac2e(0x379));}catch(_0xc07cc1){console[_0x37ac2e(0x26f)]('Error\x20updating\x20player:',_0xc07cc1),showNotification('Failed\x20to\x20update\x20player:\x20'+_0xc07cc1[_0x37ac2e(0x320)],_0x37ac2e(0x26f));}}function closeEditPlayerModal(){const _0x26e066=document['getElementById']('edit-player-modal');_0x26e066['classList']['remove']('active'),_0x26e066['dataset']['playerId']='';}async function confirmDeletePlayer(_0x12f45b){const _0x1c7d2d=a2_0x34d589;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x2b8752=currentLadder==='D1'?'players':_0x1c7d2d(0x306);await deleteDoc(doc(db,_0x2b8752,_0x12f45b)),loadPlayersData(),showNotification(_0x1c7d2d(0x324),'success');}catch(_0x189bb7){console['error']('Error\x20deleting\x20player:',_0x189bb7),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x189bb7['message'],_0x1c7d2d(0x26f));}}async function setupManagePlayersSection(){const _0x5175a3=a2_0x34d589,_0x47475d=document['getElementById']('add-player-form');_0x47475d&&_0x47475d[_0x5175a3(0x421)]('submit',async _0x8b0ecd=>{_0x8b0ecd['preventDefault'](),await addNewPlayer();});const _0xe6bf7a=document[_0x5175a3(0x204)]('player-search');_0xe6bf7a&&_0xe6bf7a['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x4e7486=document['getElementById'](_0x5175a3(0x3c1));_0x4e7486&&_0x4e7486['addEventListener']('click',saveEditedPlayer);const _0x4883bd=document['getElementById']('cancel-edit-btn');_0x4883bd&&_0x4883bd['addEventListener']('click',closeEditPlayerModal);const _0x65f92a=document['getElementById']('edit-player-modal');_0x65f92a&&_0x65f92a[_0x5175a3(0x421)]('click',_0x57e1ca=>{_0x57e1ca['target']===_0x65f92a&&closeEditPlayerModal();});const _0x421dfd=document['getElementById']('players-ladder-selector');_0x421dfd&&_0x421dfd['addEventListener']('change',()=>{currentLadder=_0x421dfd['value'],loadPlayersData();});}async function addNewPlayer(){const _0x146f18=a2_0x34d589;try{const _0x7014bb=document['getElementById']('new-player-username'),_0x984f7a=document['getElementById']('new-player-elo'),_0x28b806=_0x7014bb['value']['trim'](),_0xbee42d=parseInt(_0x984f7a['value'])||0x4b0;if(!_0x28b806){alert('Please\x20enter\x20a\x20valid\x20username');return;}console['log']('Adding\x20player\x20'+_0x28b806+_0x146f18(0x336)+_0xbee42d+'\x20to\x20'+currentLadder+'\x20ladder');let _0x13ae64='players',_0x1ecb54='eloHistory';if(currentLadder==='D2')_0x13ae64='playersD2',_0x1ecb54='eloHistoryD2';else currentLadder==='D3'&&(_0x13ae64=_0x146f18(0x3d4),_0x1ecb54=_0x146f18(0x317));const _0x239b48=query(collection(db,_0x13ae64),where(_0x146f18(0x30a),'==',_0x28b806)),_0xadcfae=await getDocs(_0x239b48);if(!_0xadcfae[_0x146f18(0x3e8)]){alert('Username\x20'+_0x28b806+'\x20already\x20exists\x20in\x20'+currentLadder+_0x146f18(0x307));return;}const _0x36f283=auth['currentUser'],_0x31fe6c={'username':_0x28b806,'eloRating':_0xbee42d,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x36f283?_0x36f283['email']:_0x146f18(0x429),'gameMode':currentLadder};await addDoc(collection(db,_0x13ae64),_0x31fe6c),await addDoc(collection(db,_0x1ecb54),{'player':_0x28b806,'previousElo':0x4b0,'newElo':_0xbee42d,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x36f283?_0x36f283[_0x146f18(0x3d6)]:'admin','gameMode':currentLadder}),_0x7014bb['value']='',_0x984f7a['value']=_0x146f18(0x38e),alert('Player\x20'+_0x28b806+_0x146f18(0x412)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x2489fe){console['error'](_0x146f18(0x30e),_0x2489fe),alert('Error\x20adding\x20player:\x20'+_0x2489fe[_0x146f18(0x320)]);}}document[a2_0x34d589(0x421)]('DOMContentLoaded',()=>{const _0x4ffc12=document['getElementById']('add-player-form');_0x4ffc12&&_0x4ffc12['addEventListener']('submit',_0x5648a8=>{const _0x4d81ca=a2_0x1797;_0x5648a8[_0x4d81ca(0x38a)](),addNewPlayer();});});function a2_0x48b5(){const _0xf80162=['highlight-achievement-player-container','Load\x20players\x20data\x20clicked','submittedBy','reset-matches-filters','manage-trophies','has','Query\x20created:','push','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20','Please\x20fill\x20all\x20fields','assign-trophy-title','Found\x20','winnerSuicides','winnerUsername','Please\x20enter\x20a\x20username','validation-results-container','getAttribute','edit-match-modal','edit-highlight-creatorImageUrl-input','highlight-player-profile','roleColor','trophy-name','warn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','.edit-match-btn','Quick\x20edit\x20form\x20submitted','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>','highlight-match-link','articles','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22>×</button>\x0a\x20\x20\x20\x20','exists','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','previousElo','Closing\x20create\x20test\x20match\x20modal','Test\x20match','roleName','lastVisible','matchDate','Error\x20loading\x20trophy\x20definitions:','edit-match-loser','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','resimulate-match-btn','Error\x20deleting\x20match:','create-new-article-btn','ref','match-count','forEach','Match\x20ID\x20or\x20ladder\x20missing','getElementById','\x20points','Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality','cancel-assign-btn','eloHistoryD2','mapName','Quick\x20edit\x20clicked\x20for\x20user:','userId','Setting\x20up\x20Manage\x20Ribbons\x20section','Found\x20player\x20with\x20current\x20ELO:\x20','current-ladder-display','marginBottom','loserUsername','startDate','commit','points-overview-table-body','innerHTML','role-name','Page\x20','trophy-image-url','Failed\x20to\x20delete\x20match:\x20','update','toLocaleDateString','lastPointsModified','data','docs','selected-user-id','.ladder-switch\x20input[value=\x22D1\x22]','Remove\x20','Lost','Profile','type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-match-title','.edit-role-btn','inactive-players-search','inactive-days-filter','No\x20email','#e0e0e0','fa-check-circle','active','Match','click','action','\x20unique\x20pilots\x20across\x20all\x20ladders','input[name=\x22quick-action\x22]:checked','display','result','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','manage-ranks','Failed\x20to\x20award\x20item:\x20','\x20points\x20to\x20','Create\x20New\x20Trophy','highlight-modal-title','Trophy\x20updated\x20successfully','eloRating','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','closest','Modal\x20should\x20now\x20be\x20visible','find','approvedMatches','Dashboard\x20data\x20loaded\x20successfully','promote-form','trophy-modal','highlight-achievement-player','getDay','button[type=\x22submit\x22]','seconds','appendChild','toLowerCase','edit-match-id','winnerName','\x20already\x20processed\x20matches.\x20Errors:\x20','points-action','ribbon-user-search','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','insertAdjacentElement','values','winnerScore','player-search','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','userProfiles','setAttribute','ribbon-level','NonParticipant','winnerComment','d3-prev-page','flex','Deleting\x20match...','login.html','inactive-players','prototype','Edit\x20match\x20clicked:','No\x20users\x20found\x20in\x20userProfiles\x20collection','data-section','playerProfileUrl','Error\x20setting\x20user\x20role:','Edit\x20Article','Error\x20loading\x20dashboard:','No\x20ELO\x20history\x20found\x20for\x20player\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','desc','ribbon-target-user','loserDemoLink','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','Trophy\x20definition\x20deleted\x20successfully','allUsersPoints','error','querySelector','5px','manage-articles','creator','__proto__','from','Match\x20highlight\x20button\x20clicked','dashboard','article-content','loserSuicides','trophy-preview-container','matches-table-body','Please\x20enter\x20valid\x20username\x20and\x20ELO','player-count','elo-history','createdAt','add','Adding\x20simple\x20test\x20match...','Failed\x20to\x20save\x20match:\x20','data-ladder','wins','body','N/A','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22','uid','history-start-date','Setting\x20up\x20matches\x20action\x20buttons...','trophy-image-preview','\x20view\x20history\x20buttons','achievementDetails','Unknown','highlight-type','match-row','createElement','.delete-article-btn','trophies-table-body','load-ribbons-data','edit-match-loser-score','disabled','Winner\x20and\x20loser\x20usernames\x20are\x20required','position','points','\x20quick\x20edit\x20buttons','Highlight\x20updated\x20successfully!','\x20(based\x20on\x20data-role:\x20','highlight-video-container','Untitled','highlight-map','award-all-pilots-btn','highlight-achievement-details-container','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','demote-ladder','none','edit-losses','\x20by\x20UID:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','Error\x20assigning\x20trophy:','Demotion','cloneNode','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20','achievementType','elo-history-table-body','includes','trophy-preview-img','Error\x20removing\x20ribbon','loserScore','displayName','match','.admin-section','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','highlight-player-profile-container','roleAssignedAt','Highlight\x20deleted\x20successfully','manage-matches','page','Error\x20applying\x20filters:','edit-match-winner',').\x20','#FFD700','.empty-state','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','.close-btn','edit-match-winner-demo','✅\x20Successfully\x20initialized\x20points\x20field\x20for\x20','negative-change','sendPromotionNotification','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Loading\x20dashboard\x20overview\x20data...','nonParticipants','change','visible','ribbon','Standard','non-participants','currentUser','approvedMatchesD2','constructor','edit-highlight-matchDate-input','rgba(211,\x2047,\x2047,\x200.7)','mapVersion','highlight-id','replaceChild','Auth:','mapPlayed','playerId','toLocaleString','\x20D1\x20pilots,\x20','textContent','fromDate','#28a745','console','substring','Trophy\x20created\x20successfully','<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>','Error\x20loading\x20matches:','\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toString','points-history-table-body','removeAttribute','article-modal','key','Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','quick-edit-points-modal','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','#ffffff','error-state','apply','creatorImageUrl','create-test-match-form','Error\x20loading\x20user\x20points\x20history:','reason','Error\x20searching\x20user:','trophy-rarity','edit-match-winner-score','value','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','contains','edit-highlight-playerProfileUrl-input','YouTube\x20Video\x20ID\x20(Optional)','Role\x20removed','Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!','rankDistribution','rgba(255,\x20193,\x207,\x200.1)','Sidebar\x20navigation\x20initialized\x20with\x20permissions','resimulation','Match\x20resimulated\x20successfully!\x20','playersD2','\x20ladder','Friday','Adding\x20\x22active\x22\x20class\x20to\x20modal.','username','Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML','\x20users','ribbon-type-select','Error\x20adding\x20player:','high-points','No\x20user\x20ID\x20found\x20on\x20button','userTrophies','.edit-highlight-btn','split','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','roleAssignedBy','Processing\x20points\x20edit:','eloHistoryD3','matchInfo','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','color','map','firstVisible','Player\x20\x22','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...','.error-state','message','eloHistory','loserName','\x20(winner)\x20vs\x20','Player\x20deleted\x20successfully','\x20match\x20','System','highlight-achievement-details','rejected-count','activity','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20','\x20for\x20points\x20initialization','approvedAt','daysSinceMatch','videoId','highlight-title','search-result-item','#players.content-section.active','confirmResimulateMatch','elo-history-search','set-elo-form','\x20with\x20ELO\x20','Error\x20checking\x20','Error\x20deleting\x20highlight:','size','currentTarget','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','edit-match-loser-comment','User\x20has\x20','Failed\x20to\x20send\x20Discord\x20notification:','Attempting\x20to\x20promote\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','toISOString','highlight-title-container','highlights','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','set-role-modal','Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20','trophy-id','Attempting\x20to\x20demote\x20','points-user-search','Found\x20user\x20in\x20','remove','.username','delete-match-summary','modifiedBy','\x20already\x20has\x20points:\x20','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>','<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>','role','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','Won','load-inactive-players-data','edit-elo','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','demotion','no-results','loserId','\x20pilots...','matchLink','trophy-description','Create\x20Article','pendingResimulateData','stopPropagation','edit-highlight-winnerScore-input','date','.sidebar-nav\x20.nav-item','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','highlight-video-preview-container','Error\x20finding\x20match:','lastUpdated','Load\x20matches\x20data\x20clicked','#article-modal\x20.close-btn','Modal\x20element\x20not\x20found!','\x22\x20not\x20found\x20in\x20any\x20collection','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','borderRadius','edit-player-modal','mapCreator','name','checked','User\x20','\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22','.edit-btn','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','cells','success','Role\x20\x22','pointsHistory','Error\x20loading\x20users:','achievementPlayer','promote-player-btn','points-management-forms','You\x20must\x20be\x20logged\x20in','\x20in\x20','current-ribbons-list','highlight-achievement-image','Error\x20removing\x20role:','destroy','Creator','edit-match-loser-demo','rgba(255,\x20255,\x20255,\x200.1)','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','preventDefault','Setting\x20up\x20create\x20test\x20match\x20button','manage-highlights','Unknown\x20User','1200','doughnut','Error\x20loading\x20ribbons:','role-color','playerRibbonsD2','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','View\x20history\x20clicked\x20for\x20user:','demote-username','highlight-video-id','common','matches-prev-page','getRankName','user-ribbon-management','\x20from\x20','Error\x20loading\x20highlights:','\x27\x20has\x20permissions:','div','src','article-id','rarity','Created\x20','Matches\x20Played','assign-trophy-modal','Bulk\x20award\x20to\x20all\x20pilots\x20(','Error\x20loading\x20dashboard\x20data:','toDate','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Loading\x20points\x20data...','\x20not\x20found.','d3-next-page','#users-table-body\x20tr','timestamp','No\x20position\x20changes\x20needed.','loserComment','settings','Error\x20initializing\x20points:\x20','\x20-\x20','style','ladder','Points\x20action\x20buttons\x20setup\x20complete','awardedAt','quick-points-reason','Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','Store\x20item\x20awarded\x20successfully','all','className','edit-highlight-id','highlight-map-version-container','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20','user-roles-section','save-player-btn','edit-highlight-loserName-input','dataset','playerRibbonsD3','Starting\x20complete\x20match\x20resimulation...','unknown','assign-trophy-form','highlight-form','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','sort','role-filter','match-details-container','Error\x20saving\x20highlight:','achievement','Modal\x20element\x20found:','<span\x20class=\x22no-role\x22>None</span>','newElo','Promotion','Opening\x20create\x20test\x20match\x20modal','playersD3','.type','email','edit-highlight-videoId-input','closeResimulateModal','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Match\x20deleted\x20successfully','Current\x20user:','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','promotion','pending-count','Error\x20demoting\x20player:\x20','set-elo-modal','set','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','submit','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','elo','keys','previousPoints','empty','demotedBy','warning','.admin-action','points-overview-search','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Error\x20creating\x20activity\x20chart:','assign-trophy-image','target','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','-prev-page','Silver','input[name=\x22set-elo-ladder\x22]:checked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','delete-match-confirm-modal','log','Demoting\x20player\x20to\x20','players','Error\x20in\x20bulk\x20award\x20points:','\x22\x20awarded\x20to\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Points\x20modified\x20successfully','<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>','Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions','info','loading-cell','Error\x20loading\x20points\x20overview:','filter','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','edit-match-winner-comment','Testing\x20Firebase\x20connection...','promotedBy','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','reset','role-username','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','\x20pilots.\x20Errors:\x20','trim','Failed\x20to\x20load\x20article\x20data','Awarded\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20','\x20added\x20successfully\x20to\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','\x20allowed\x20tabs:','updatedAt','load-articles-data','catch','Unauthorized:\x20Admin\x20access\x20required','\x20to\x20','length','demoLink','\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','sources','then','querySelectorAll','Error\x20promoting\x20player:\x20','addEventListener','Tuesday','Error\x20creating\x20rank\x20distribution\x20chart:','.no-results','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','-page-indicator','Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','admin','searchTerm','\x20vs\x20','Starting\x20points\x20award\x20process...','MAX_SAFE_INTEGER','#elo-history-table-body\x20tr','lastMatch','users-table-body','classList','block','loading','highlight-map-creator','name-desc','Error\x20loading\x20ribbons\x20data','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','Positions\x20updated:\x20Winner\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.','Error\x20in\x20award\x20points\x20to\x20all\x20pilots:','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','history-end-date','\x20<span\x20class=\x22user-source\x22>(','trophyDefinitions','title','Manage\x20Ribbons\x20section\x20initialized','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','focus','Subtracted\x20','highlight-description','highlight-winner-name','Failed\x20to\x20load\x20user\x20history','input'];a2_0x48b5=function(){return _0xf80162;};return a2_0x48b5();}function filterPlayerTable(){const _0x1f7923=a2_0x34d589,_0x5c7fc2=document[_0x1f7923(0x204)](_0x1f7923(0x253))['value']['toLowerCase'](),_0x51b13d=document['querySelectorAll']('#players-table-body\x20tr');let _0x599385=0x0;_0x51b13d['forEach'](_0x5e59bd=>{const _0x39889b=_0x1f7923,_0xdc190e=_0x5e59bd['querySelector'](_0x39889b(0x34d))?.['textContent']['toLowerCase']()||'';_0xdc190e['includes'](_0x5c7fc2)?(_0x5e59bd['style']['display']='',_0x599385++):_0x5e59bd['style'][_0x39889b(0x232)]='none';});const _0x1a7a3d=document['getElementById']('no-results-message');_0x1a7a3d&&(_0x599385===0x0&&_0x5c7fc2!==''?_0x1a7a3d[_0x1f7923(0x3b3)]['display']='block':_0x1a7a3d[_0x1f7923(0x3b3)][_0x1f7923(0x232)]='none');}function debounce(_0x267f28,_0x4919aa){let _0x2dae8b;return function(..._0x4bff35){clearTimeout(_0x2dae8b),_0x2dae8b=setTimeout(()=>_0x267f28['apply'](this,_0x4bff35),_0x4919aa);};}async function loadEloHistory(_0x22d817=0x1){const _0x204987=a2_0x34d589,_0xa5e9a5=document[_0x204987(0x204)](_0x204987(0x2ad)),_0x35e46b=currentLadder['toLowerCase']();if(!_0xa5e9a5)return;_0xa5e9a5[_0x204987(0x214)]=_0x204987(0x40c);try{const _0xeedbda=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':'eloHistoryD3',_0x5cb1dd=collection(db,_0xeedbda);let _0x4476cf;if(_0x22d817>eloHistoryPagination[_0x35e46b][_0x204987(0x2ba)]&&eloHistoryPagination[_0x35e46b]['lastVisible'])_0x4476cf=query(_0x5cb1dd,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x35e46b]['lastVisible']),limit(PAGE_SIZE));else _0x22d817<eloHistoryPagination[_0x35e46b]['page']&&eloHistoryPagination[_0x35e46b]['firstVisible']?_0x4476cf=query(_0x5cb1dd,orderBy(_0x204987(0x3ad),_0x204987(0x269)),endBefore(eloHistoryPagination[_0x35e46b]['firstVisible']),limitToLast(PAGE_SIZE)):_0x4476cf=query(_0x5cb1dd,orderBy('timestamp',_0x204987(0x269)),limit(PAGE_SIZE));const _0x3a38a2=await getDocs(_0x4476cf);if(_0x3a38a2['empty']){_0xa5e9a5['innerHTML']=_0x204987(0x26c),document[_0x204987(0x204)](_0x35e46b+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x35e46b][_0x204987(0x2ba)]=_0x22d817,eloHistoryPagination[_0x35e46b]['firstVisible']=_0x3a38a2['docs'][0x0],eloHistoryPagination[_0x35e46b]['lastVisible']=_0x3a38a2['docs'][_0x3a38a2['docs'][_0x204987(0x41a)]-0x1];const _0x51dfb9=new Map();_0xa5e9a5['innerHTML']='';const _0x47b57b=async _0x6d9856=>{const _0x45a15b=_0x204987;if(typeof _0x6d9856!=='string'||_0x6d9856[_0x45a15b(0x41a)]<0x14||/[^a-zA-Z0-9-_]/['test'](_0x6d9856))return _0x6d9856;if(_0x51dfb9['has'](_0x6d9856))return _0x51dfb9['get'](_0x6d9856);try{for(const _0x3e3237 of[_0x45a15b(0x3f9),'playersD2','playersD3','nonParticipants']){const _0x2737be=await getDoc(doc(db,_0x3e3237,_0x6d9856));if(_0x2737be['exists']()&&_0x2737be['data']()['username']){const _0xc9562d=_0x2737be['data']()[_0x45a15b(0x30a)];return _0x51dfb9[_0x45a15b(0x3e1)](_0x6d9856,_0xc9562d),_0xc9562d;}}return _0x6d9856;}catch(_0x386239){return console['warn']('Error\x20resolving\x20username\x20for\x20'+_0x6d9856+':',_0x386239),_0x6d9856;}};for(const _0x1389b0 of _0x3a38a2['docs']){const _0x17b369=_0x1389b0['data'](),_0x2f3916=document['createElement']('tr'),_0x2859d3=_0x17b369[_0x204987(0x3ad)]?new Date(_0x17b369['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x3a79a4=_0x17b369[_0x204987(0x3d1)]-_0x17b369['previousElo'],_0x22b2c5=_0x3a79a4>0x0?'positive-change':_0x3a79a4<0x0?_0x204987(0x2c4):'',_0x122764=_0x3a79a4>0x0?'+':'',_0x4d4885=_0x17b369['player']||_0x17b369['username']||_0x17b369['userId']||'N/A',_0x1c243f=await _0x47b57b(_0x4d4885);_0x2f3916['innerHTML']=_0x204987(0x1eb)+_0x2859d3+_0x204987(0x2e3)+_0x1c243f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x17b369[_0x204987(0x1f4)]||'N/A')+_0x204987(0x352)+(_0x17b369['newElo']||_0x204987(0x286))+_0x204987(0x345)+_0x22b2c5+'\x22>'+_0x122764+_0x3a79a4+_0x204987(0x1ee)+formatHistoryType(_0x17b369['type'])+_0x204987(0x3fc)+(_0x17b369['modifiedBy']||_0x17b369['promotedBy']||_0x17b369[_0x204987(0x3e9)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xa5e9a5[_0x204987(0x248)](_0x2f3916);}document['getElementById'](_0x35e46b+'-page-indicator')[_0x204987(0x2db)]='Page\x20'+_0x22d817;const _0x196484=document['getElementById'](_0x35e46b+_0x204987(0x3f2)),_0x1a96a7=document['getElementById'](_0x35e46b+'-next-page');if(_0x196484)_0x196484['disabled']=_0x22d817<=0x1;const _0x5942af=query(_0x5cb1dd,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x35e46b][_0x204987(0x1f8)]),limit(0x1)),_0x4950b8=await getDocs(_0x5942af);if(_0x1a96a7)_0x1a96a7['disabled']=_0x4950b8[_0x204987(0x3e8)];}catch(_0x4f2eb5){console['error']('Error\x20loading\x20ELO\x20history:',_0x4f2eb5),_0xa5e9a5[_0x204987(0x214)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x4f2eb5[_0x204987(0x320)]+_0x204987(0x3e4);}}function formatHistoryType(_0x2a9520){const _0x4d1191=a2_0x34d589;switch(_0x2a9520){case'match_result':return'Match\x20Result';case'promotion':return _0x4d1191(0x3d2);case'demotion':return _0x4d1191(0x2a9);case'admin_modification':return'Admin\x20Adjustment';case'initial_placement':return'Initial\x20Placement';default:return _0x2a9520||'Unknown';}}function setupEloHistorySection(){const _0x346d61=a2_0x34d589;document[_0x346d61(0x204)]('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')[_0x346d61(0x421)]('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById']('d2-next-page')[_0x346d61(0x421)](_0x346d61(0x22e),()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x34c4cd=document[_0x346d61(0x204)](_0x346d61(0x25a)),_0x2ef957=document[_0x346d61(0x204)](_0x346d61(0x3ab));_0x34c4cd&&_0x34c4cd['addEventListener'](_0x346d61(0x22e),()=>{loadEloHistory(eloHistoryPagination['d3']['page']-0x1);});_0x2ef957&&_0x2ef957[_0x346d61(0x421)]('click',()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x40c720=document['getElementById']('elo-history-search');_0x40c720&&_0x40c720[_0x346d61(0x421)]('input',debounce(filterEloHistoryTable,0x12c));const _0x47d4ef=document['getElementById']('history-type-filter');_0x47d4ef&&_0x47d4ef[_0x346d61(0x421)]('change',applyEloHistoryFilters);const _0x5d7a8e=document['getElementById']('reset-history-filters');_0x5d7a8e&&_0x5d7a8e[_0x346d61(0x421)]('click',resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x40c5f3=a2_0x34d589,_0x515167=document[_0x40c5f3(0x204)]('elo-history-search')['value'][_0x40c5f3(0x249)](),_0x23c819=document['querySelectorAll'](_0x40c5f3(0x42e));let _0x18be32=0x0;_0x23c819[_0x40c5f3(0x202)](_0x5e84cc=>{const _0x52ecc9=_0x40c5f3;if(_0x5e84cc[_0x52ecc9(0x431)]['contains'](_0x52ecc9(0x401))||_0x5e84cc[_0x52ecc9(0x431)]['contains']('empty-state')||_0x5e84cc[_0x52ecc9(0x431)]['contains']('error-state'))return;const _0x39c004=_0x5e84cc['querySelector']('.player')?.['textContent'][_0x52ecc9(0x249)]()||'',_0x36e05f=_0x5e84cc['querySelector'](_0x52ecc9(0x3d5))?.['textContent'][_0x52ecc9(0x249)]()||'',_0x4f75ea=_0x5e84cc['querySelector'](_0x52ecc9(0x3eb))?.[_0x52ecc9(0x2db)]['toLowerCase']()||'';_0x39c004[_0x52ecc9(0x2ae)](_0x515167)||_0x36e05f['includes'](_0x515167)||_0x4f75ea['includes'](_0x515167)?(_0x5e84cc['style']['display']='',_0x18be32++):_0x5e84cc[_0x52ecc9(0x3b3)]['display']='none';});}async function applyEloHistoryFilters(){const _0x594960=a2_0x34d589,_0x4f8dad=document['getElementById']('history-start-date')['value'],_0x3db685=document['getElementById'](_0x594960(0x43d))['value'],_0x5635c0=document[_0x594960(0x204)]('history-type-filter')['value'],_0x51983a=currentLadder['toLowerCase']();eloHistoryPagination[_0x51983a]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x4b8009=document['getElementById']('elo-history-table-body');_0x4b8009['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x433d27=currentLadder==='D1'?'eloHistory':_0x594960(0x208),_0x40166d=collection(db,_0x433d27);let _0x5e7722=[orderBy('timestamp','desc')];if(_0x4f8dad){const _0xf9982c=new Date(_0x4f8dad);_0xf9982c['setHours'](0x0,0x0,0x0,0x0),_0x5e7722['push'](where(_0x594960(0x3ad),'>=',_0xf9982c));}if(_0x3db685){const _0x3122f1=new Date(_0x3db685);_0x3122f1['setHours'](0x17,0x3b,0x3b,0x3e7),_0x5e7722[_0x594960(0x1db)](where('timestamp','<=',_0x3122f1));}_0x5635c0&&_0x5635c0!=='all'&&_0x5e7722['push'](where('type','==',_0x5635c0));_0x5e7722['push'](limit(PAGE_SIZE));const _0x3162df=query(_0x40166d,..._0x5e7722),_0x514cd4=await getDocs(_0x3162df);!_0x514cd4['empty']&&(eloHistoryPagination[_0x51983a]['firstVisible']=_0x514cd4[_0x594960(0x21d)][0x0],eloHistoryPagination[_0x51983a]['lastVisible']=_0x514cd4['docs'][_0x514cd4['docs']['length']-0x1]);_0x4b8009[_0x594960(0x214)]='';if(_0x514cd4['empty']){_0x4b8009['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x514cd4['forEach'](_0x4d9aad=>{const _0x4272eb=_0x594960,_0x1ae4b5=_0x4d9aad['data'](),_0x2757f5=document['createElement']('tr'),_0x2f23e9=_0x1ae4b5['timestamp']?new Date(_0x1ae4b5['timestamp']['seconds']*0x3e8)['toLocaleString']():_0x4272eb(0x286),_0x3c9538=_0x1ae4b5['newElo']-_0x1ae4b5['previousElo'],_0x47e8a1=_0x3c9538>0x0?'positive-change':_0x3c9538<0x0?'negative-change':'',_0x478345=_0x3c9538>0x0?'+':'',_0x2fa6e0=_0x1ae4b5['player']||_0x1ae4b5['username']||_0x1ae4b5['userId']||_0x4272eb(0x286);_0x2757f5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x2f23e9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x2fa6e0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x1ae4b5['previousElo']||'N/A')+_0x4272eb(0x352)+(_0x1ae4b5['newElo']||'N/A')+_0x4272eb(0x345)+_0x47e8a1+'\x22>'+_0x478345+_0x3c9538+_0x4272eb(0x1ee)+formatHistoryType(_0x1ae4b5['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1ae4b5[_0x4272eb(0x34f)]||_0x1ae4b5[_0x4272eb(0x408)]||_0x1ae4b5[_0x4272eb(0x3e9)]||_0x4272eb(0x326))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4b8009['appendChild'](_0x2757f5);}),document['getElementById'](_0x51983a+_0x594960(0x426))['textContent']='Page\x201';}catch(_0x533ede){console['error'](_0x594960(0x2bb),_0x533ede),_0x4b8009[_0x594960(0x214)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0x533ede['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x356543=a2_0x34d589;document['getElementById'](_0x356543(0x289))['value']='',document['getElementById'](_0x356543(0x43d))['value']='',document['getElementById']('history-type-filter')[_0x356543(0x2f8)]='all',document[_0x356543(0x204)](_0x356543(0x334))['value']='';const _0x3464d5=currentLadder['toLowerCase']();eloHistoryPagination[_0x3464d5]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x3d0961=a2_0x34d589,_0x3642eb=document[_0x3d0961(0x204)](_0x3d0961(0x37e)),_0xc1db1b=document['getElementById']('promote-modal'),_0x498a15=document[_0x3d0961(0x204)]('promote-form');_0x3642eb&&_0xc1db1b&&_0x498a15&&(_0x3642eb['addEventListener']('click',()=>{const _0x5cc3f3=_0x3d0961;_0xc1db1b['classList']['add'](_0x5cc3f3(0x22c));}),_0xc1db1b['addEventListener']('click',_0x263d4a=>{const _0x1129dc=_0x3d0961;_0x263d4a[_0x1129dc(0x3f0)]===_0xc1db1b&&_0xc1db1b[_0x1129dc(0x431)]['remove'](_0x1129dc(0x22c));}),_0x498a15[_0x3d0961(0x421)]('submit',async _0x186ae2=>{const _0x4610d6=_0x3d0961;_0x186ae2['preventDefault']();const _0x137818=document['getElementById']('promote-username'),_0x1a78d1=document[_0x4610d6(0x204)]('promote-ladder'),_0x3b49d6=_0x137818[_0x4610d6(0x2f8)][_0x4610d6(0x40e)](),_0x1bf35b=_0x1a78d1[_0x4610d6(0x2f8)];if(!_0x3b49d6){showNotification(_0x4610d6(0x1e2),'error');return;}try{await promotePlayer(_0x3b49d6,_0x1bf35b),_0xc1db1b['classList'][_0x4610d6(0x34c)]('active'),_0x137818['value']='';}catch(_0xd56f19){showNotification(_0xd56f19['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{const _0x5b5db2=_0x3d0961;_0xc1db1b[_0x5b5db2(0x431)]['remove']('active');}));const _0x3a3343=document['getElementById']('demote-player-btn'),_0x4c81bb=document['getElementById']('demote-modal'),_0x533c7a=document[_0x3d0961(0x204)]('demote-form');_0x3a3343&&_0x4c81bb&&_0x533c7a&&(_0x3a3343[_0x3d0961(0x421)]('click',()=>{_0x4c81bb['classList']['add']('active');}),_0x4c81bb[_0x3d0961(0x421)]('click',_0x3ad890=>{const _0x58097c=_0x3d0961;_0x3ad890['target']===_0x4c81bb&&_0x4c81bb['classList']['remove'](_0x58097c(0x22c));}),_0x533c7a['addEventListener']('submit',async _0x2e0e87=>{const _0x15058d=_0x3d0961;_0x2e0e87['preventDefault']();const _0x31f701=document[_0x15058d(0x204)]('demote-username'),_0x365e2f=document['getElementById'](_0x15058d(0x2a3)),_0x51f369=_0x31f701['value']['trim'](),_0x29872e=_0x365e2f['value'];if(!_0x51f369){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x51f369,_0x29872e),document['getElementById']('demote-modal')[_0x15058d(0x431)][_0x15058d(0x34c)]('active'),document['getElementById'](_0x15058d(0x395))[_0x15058d(0x2f8)]='';}catch(_0x52c31d){console[_0x15058d(0x26f)]('Error\x20in\x20demotion:',_0x52c31d);}}));const _0x407d43=document['getElementById']('set-elo-btn'),_0x5950e5=document[_0x3d0961(0x204)](_0x3d0961(0x3e0)),_0x3c52c1=document['getElementById'](_0x3d0961(0x335));_0x407d43&&_0x5950e5&&_0x3c52c1&&(_0x407d43['addEventListener']('click',()=>{const _0x27d9dc=_0x3d0961;_0x5950e5[_0x27d9dc(0x431)]['add']('active');}),_0x5950e5['addEventListener'](_0x3d0961(0x22e),_0x6966da=>{_0x6966da['target']===_0x5950e5&&_0x5950e5['classList']['remove']('active');}),_0x3c52c1['addEventListener']('submit',async _0x44b695=>{const _0x432502=_0x3d0961;_0x44b695[_0x432502(0x38a)]();const _0x38dced=document['getElementById']('set-elo-username'),_0x151d95=document['getElementById']('set-elo-value');let _0x2874a5;const _0x2c9098=document['getElementById']('set-elo-ladder'),_0x368fda=document[_0x432502(0x270)](_0x432502(0x3f4));if(_0x2c9098)_0x2874a5=_0x2c9098['value'];else _0x368fda?_0x2874a5=_0x368fda[_0x432502(0x2f8)]:_0x2874a5='D1';if(!_0x38dced||!_0x151d95){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x2fe744=_0x38dced['value']['trim'](),_0x5913b6=parseInt(_0x151d95['value']);if(!_0x2fe744||isNaN(_0x5913b6)){showNotification(_0x432502(0x27c),'error');return;}try{await setCustomElo(_0x2fe744,_0x5913b6,_0x2874a5),_0x5950e5['classList']['remove']('active'),_0x38dced['value']='',_0x151d95[_0x432502(0x2f8)]='';}catch(_0x4ee5dc){showNotification(_0x4ee5dc['message'],_0x432502(0x26f));}}),document['getElementById']('cancel-set-elo-btn')['addEventListener']('click',()=>{const _0x4cfe09=_0x3d0961;_0x5950e5[_0x4cfe09(0x431)]['remove']('active');}));const _0x5e8e81=document['getElementById'](_0x3d0961(0x346)),_0x16c61e=document[_0x3d0961(0x204)]('set-role-form');if(_0x5e8e81&&_0x16c61e){_0x5e8e81[_0x3d0961(0x421)]('click',_0x473cb8=>{_0x473cb8['target']===_0x5e8e81&&closeModalHandler();}),_0x16c61e[_0x3d0961(0x421)](_0x3d0961(0x3e3),async _0x5c222f=>{const _0x2d3a95=_0x3d0961;_0x5c222f['preventDefault']();const _0x5161e6=document['getElementById'](_0x2d3a95(0x40b)),_0x16ee2e=document['getElementById'](_0x2d3a95(0x215)),_0x2be4a4=document[_0x2d3a95(0x204)](_0x2d3a95(0x391)),_0x102251=_0x5161e6[_0x2d3a95(0x2f8)]['trim'](),_0x3e2917=_0x16ee2e['value'][_0x2d3a95(0x40e)](),_0x44d013=_0x2be4a4[_0x2d3a95(0x2f8)];if(!_0x102251){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x102251,_0x3e2917,_0x44d013),closeModalHandler(),loadUsersWithRoles();}catch(_0x3ac2f8){}});const _0x50b03e=document['getElementById']('cancel-role-btn');_0x50b03e&&(_0x50b03e['removeEventListener']('click',closeModalHandler),_0x50b03e['addEventListener'](_0x3d0961(0x22e),closeModalHandler));}}async function promotePlayer(_0xd77a89,_0x11b891){const _0x53e659=a2_0x34d589;try{console['log'](_0x53e659(0x33f)+_0xd77a89+_0x53e659(0x381)+_0x11b891+'\x20ladder');const _0x140061=auth[_0x53e659(0x2ce)];if(!_0x140061)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x21ad60=_0x11b891==='D2'?'playersD2':'players',_0x1fa043=_0x11b891==='D2'?'eloHistoryD2':_0x53e659(0x321);console['log']('Searching\x20for\x20player\x20in\x20'+_0x21ad60);const _0x58fa38=collection(db,_0x21ad60),_0x2dc8a6=query(_0x58fa38,where('username','==',_0xd77a89)),_0x5e43f3=await getDocs(_0x2dc8a6);if(_0x5e43f3[_0x53e659(0x3e8)]){alert('Player\x20not\x20found\x20in\x20'+_0x11b891+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x11b891+'\x20ladder');}const _0x606dbf=_0x5e43f3[_0x53e659(0x21d)][0x0],_0x1470e1=_0x606dbf['data'](),_0xf767d4=_0x1470e1['eloRating']||0x4b0,_0x3e73c9=_0x606dbf['id'];console[_0x53e659(0x3f7)](_0x53e659(0x20d)+_0xf767d4);const _0x4c44e9=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':'Gold','elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x433239=_0x4c44e9['find'](_0x3c8619=>_0x3c8619['elo']>_0xf767d4);if(!_0x433239){alert(_0x53e659(0x347)+_0x11b891+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x11b891+_0x53e659(0x307));}console[_0x53e659(0x3f7)]('Promoting\x20player\x20to\x20'+_0x433239['name']+'\x20('+_0x433239[_0x53e659(0x3e5)]+')'),await updateDoc(doc(db,_0x21ad60,_0x606dbf['id']),{'eloRating':_0x433239['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x140061['email']||'admin'}),await addDoc(collection(db,_0x1fa043),{'player':_0xd77a89,'previousElo':_0xf767d4,'newElo':_0x433239[_0x53e659(0x3e5)],'timestamp':serverTimestamp(),'type':_0x53e659(0x3dd),'rankAchieved':_0x433239[_0x53e659(0x372)],'promotedBy':_0x140061[_0x53e659(0x3d6)]||_0x53e659(0x429),'gameMode':_0x11b891});try{const {promotionManager:_0xab0a1f}=await import('./promotions.js'),_0x9ddf8d=_0xab0a1f['getRankName'](_0xf767d4),_0xb8befb=_0x433239['name'];await _0xab0a1f['sendPromotionNotification'](_0x3e73c9,_0xd77a89,_0xf767d4,_0x433239['elo'],_0x9ddf8d,_0xb8befb,'promotion',{'displayName':_0xd77a89,'source':'admin','adminUser':_0x140061['email'],'ladder':_0x11b891}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x4c07f8){console['error'](_0x53e659(0x33e),_0x4c07f8);}return alert('Successfully\x20promoted\x20'+_0xd77a89+'\x20to\x20'+_0x433239[_0x53e659(0x372)]+'\x20('+_0x433239['elo']+')'),currentLadder===_0x11b891&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x349dc0){console['error']('Error\x20promoting\x20player:',_0x349dc0),alert(_0x53e659(0x420)+_0x349dc0['message']);throw _0x349dc0;}}document[a2_0x34d589(0x421)]('DOMContentLoaded',()=>{const _0x1d3e89=a2_0x34d589,_0x48fbb3=document[_0x1d3e89(0x204)](_0x1d3e89(0x242));_0x48fbb3&&_0x48fbb3[_0x1d3e89(0x421)]('submit',async _0x29ef77=>{const _0x523df7=_0x1d3e89;_0x29ef77[_0x523df7(0x38a)]();const _0xd0d487=document['getElementById']('promote-username')['value']['trim'](),_0x3d3810=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0xd0d487){alert(_0x523df7(0x1e2));return;}try{await promotePlayer(_0xd0d487,_0x3d3810),document['getElementById']('promote-modal')[_0x523df7(0x431)]['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x3c76ed){console[_0x523df7(0x26f)]('Error\x20in\x20promotion:',_0x3c76ed);}});});async function demotePlayer(_0x4cc0e0,_0x49e196){const _0x5a262e=a2_0x34d589;try{console['log'](_0x5a262e(0x349)+_0x4cc0e0+_0x5a262e(0x381)+_0x49e196+'\x20ladder');const _0x4aeb50=auth['currentUser'];if(!_0x4aeb50)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0xc192d0=_0x49e196==='D2'?'playersD2':_0x5a262e(0x3f9),_0x52ac58=_0x49e196==='D2'?'eloHistoryD2':'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0xc192d0);const _0x2b0510=collection(db,_0xc192d0),_0x497633=query(_0x2b0510,where('username','==',_0x4cc0e0)),_0x153bb0=await getDocs(_0x497633);if(_0x153bb0['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x49e196+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x49e196+'\x20ladder');}const _0x4a1717=_0x153bb0['docs'][0x0],_0xa6d090=_0x4a1717['data'](),_0x4bffe2=_0xa6d090['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x4bffe2);const _0x36ed58=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x4357e7=_0x36ed58[_0x5a262e(0x23f)](_0x5a854f=>_0x5a854f['elo']<_0x4bffe2);if(!_0x4357e7){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x49e196+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x49e196+_0x5a262e(0x307));}console['log'](_0x5a262e(0x3f8)+_0x4357e7['name']+'\x20('+_0x4357e7['elo']+')'),await updateDoc(doc(db,_0xc192d0,_0x4a1717['id']),{'eloRating':_0x4357e7['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x4aeb50[_0x5a262e(0x3d6)]||'admin'}),await addDoc(collection(db,_0x52ac58),{'player':_0x4cc0e0,'previousElo':_0x4bffe2,'newElo':_0x4357e7['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x4357e7[_0x5a262e(0x372)],'demotedBy':_0x4aeb50['email']||'admin','gameMode':_0x49e196});try{const {promotionManager:_0x566f8f}=await import('./promotions.js'),_0x403873=_0x566f8f[_0x5a262e(0x399)](_0x4bffe2),_0x32a5f3=_0x4357e7['name'];await _0x566f8f[_0x5a262e(0x2c5)](_0x4a1717['id'],_0x4cc0e0,_0x4bffe2,_0x4357e7['elo'],_0x403873,_0x32a5f3,_0x5a262e(0x35a),{'displayName':_0x4cc0e0,'source':'admin','adminUser':_0x4aeb50['email'],'ladder':_0x49e196}),console[_0x5a262e(0x3f7)]('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x1f68d5){console[_0x5a262e(0x26f)]('Failed\x20to\x20send\x20Discord\x20notification:',_0x1f68d5);}return alert('Successfully\x20demoted\x20'+_0x4cc0e0+_0x5a262e(0x419)+_0x4357e7[_0x5a262e(0x372)]+'\x20('+_0x4357e7[_0x5a262e(0x3e5)]+')'),currentLadder===_0x49e196&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x2d4581){console['error']('Error\x20demoting\x20player:',_0x2d4581),alert(_0x5a262e(0x3df)+_0x2d4581[_0x5a262e(0x320)]);throw _0x2d4581;}}document[a2_0x34d589(0x421)]('DOMContentLoaded',()=>{const _0x1cc508=a2_0x34d589,_0x3d9c35=document['getElementById']('demote-form');_0x3d9c35&&_0x3d9c35[_0x1cc508(0x421)]('submit',async _0x1b1a3e=>{const _0xd9be0b=_0x1cc508;_0x1b1a3e['preventDefault']();const _0x58bb80=document['getElementById']('demote-username')[_0xd9be0b(0x2f8)][_0xd9be0b(0x40e)](),_0x102140=document[_0xd9be0b(0x270)]('input[name=\x22demote-ladder\x22]:checked')[_0xd9be0b(0x2f8)];if(!_0x58bb80){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x58bb80,_0x102140),document['getElementById']('demote-modal')[_0xd9be0b(0x431)]['remove']('active'),document['getElementById']('demote-username')[_0xd9be0b(0x2f8)]='';}catch(_0x13ec64){console['error']('Error\x20in\x20demotion:',_0x13ec64);}});});async function setCustomElo(_0x497123,_0x53928a,_0x365f55){const _0xf12827=a2_0x34d589;try{const _0x3a700c=auth[_0xf12827(0x2ce)];if(!_0x3a700c||!isAdmin(_0x3a700c[_0xf12827(0x3d6)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0xb54cfa=_0x365f55==='D2'?_0xf12827(0x306):'players',_0x313c9b=_0x365f55==='D2'?_0xf12827(0x208):'eloHistory',_0x43b033=collection(db,_0xb54cfa),_0x10b5ea=query(_0x43b033,where(_0xf12827(0x30a),'==',_0x497123)),_0x766e68=await getDocs(_0x10b5ea);if(_0x766e68['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x365f55+'\x20ladder');const _0x2b3264=_0x766e68['docs'][0x0],_0x414d28=_0x2b3264[_0xf12827(0x21c)](),_0x9511c3=_0x414d28['eloRating']||0x4b0,_0x2fce38=writeBatch(db);_0x2fce38['update'](doc(db,_0xb54cfa,_0x2b3264['id']),{'eloRating':_0x53928a,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x3a700c['email']});const _0x59f53d=doc(collection(db,_0x313c9b));return _0x2fce38['set'](_0x59f53d,{'player':_0x497123,'previousElo':_0x9511c3,'newElo':_0x53928a,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x3a700c['email'],'gameMode':_0x365f55}),await _0x2fce38[_0xf12827(0x212)](),showNotification('ELO\x20rating\x20for\x20'+_0x497123+'\x20was\x20updated\x20from\x20'+_0x9511c3+'\x20to\x20'+_0x53928a,'success'),currentLadder===_0x365f55&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x15130c){console['error']('Error\x20setting\x20custom\x20ELO:',_0x15130c);throw _0x15130c;}}async function setUserRole(_0x15603c,_0x16f0c3,_0x3eeca8){const _0x17fc75=a2_0x34d589;try{const _0x3d25d2=auth['currentUser'];if(!_0x3d25d2||!isAdmin(_0x3d25d2['email']))throw new Error(_0x17fc75(0x418));const _0x1cf66c=_0x16f0c3?_0x16f0c3['trim']():null,_0x26156f=_0x1cf66c?_0x3eeca8||'#808080':null,[_0x551a14,_0x16e928]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x15603c))),getDocs(query(collection(db,_0x17fc75(0x306)),where('username','==',_0x15603c)))]),_0x33f40a=[];if(!_0x551a14['empty'])_0x33f40a[_0x17fc75(0x1db)]({'ref':_0x551a14['docs'][0x0]['ref'],'source':'D1'});if(!_0x16e928['empty'])_0x33f40a[_0x17fc75(0x1db)]({'ref':_0x16e928['docs'][0x0]['ref'],'source':'D2'});if(_0x33f40a['length']===0x0){const [_0x19cc70,_0x4cb588]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x15603c))),getDocs(query(collection(db,'userProfiles'),where(_0x17fc75(0x30a),'==',_0x15603c)))]);if(!_0x19cc70['empty'])_0x33f40a['push']({'ref':_0x19cc70[_0x17fc75(0x21d)][0x0]['ref'],'source':_0x17fc75(0x258)});if(!_0x4cb588[_0x17fc75(0x3e8)])_0x33f40a['push']({'ref':_0x4cb588['docs'][0x0][_0x17fc75(0x200)],'source':'UserProfile'});}if(_0x33f40a['length']===0x0)throw new Error('User\x20\x22'+_0x15603c+_0x17fc75(0x36d));const _0x15211c=writeBatch(db);_0x33f40a['forEach'](_0x34c58e=>{const _0x5b75f3=_0x17fc75;console['log']('Updating\x20role\x20for\x20'+_0x15603c+'\x20in\x20'+_0x34c58e['source']),!_0x1cf66c?_0x15211c[_0x5b75f3(0x219)](_0x34c58e[_0x5b75f3(0x200)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x15211c['update'](_0x34c58e[_0x5b75f3(0x200)],{'roleName':_0x1cf66c,'roleColor':_0x26156f,'roleAssignedBy':_0x3d25d2['email'],'roleAssignedAt':serverTimestamp()});}),await _0x15211c['commit']();const _0x1ef8de=_0x1cf66c?_0x17fc75(0x37a)+_0x1cf66c+'\x22\x20set':_0x17fc75(0x2ff);return showNotification(_0x1ef8de+'\x20for\x20user\x20\x22'+_0x15603c+'\x22','success'),!![];}catch(_0x15f384){console['error'](_0x17fc75(0x264),_0x15f384),showNotification('Error:\x20'+_0x15f384[_0x17fc75(0x320)],'error');throw _0x15f384;}}function showNotification(_0x23ed3d,_0x3ec6bd='info'){const _0x10d4c6=a2_0x34d589,_0x42379e=document[_0x10d4c6(0x291)](_0x10d4c6(0x39e));_0x42379e[_0x10d4c6(0x3bc)]='notification\x20'+_0x3ec6bd,_0x42379e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x3ec6bd)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x23ed3d+_0x10d4c6(0x1f1),document[_0x10d4c6(0x285)]['appendChild'](_0x42379e),setTimeout(()=>{_0x42379e['classList']['add']('active');},0xa);const _0x2b577e=setTimeout(()=>{closeNotification(_0x42379e);},0x1388);_0x42379e[_0x10d4c6(0x270)]('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x2b577e),closeNotification(_0x42379e);});}function getNotificationIcon(_0x372d7e){const _0x511ee5=a2_0x34d589;switch(_0x372d7e){case'success':return _0x511ee5(0x22b);case _0x511ee5(0x26f):return'fa-exclamation-circle';case _0x511ee5(0x3ea):return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function closeNotification(_0x9c8f59){_0x9c8f59['classList']['remove']('active'),setTimeout(()=>{_0x9c8f59['remove']();},0x12c);}function setupUserRolesSection(){const _0x1fb288=a2_0x34d589,_0x1940f0=document['getElementById']('load-users-data');_0x1940f0&&_0x1940f0['addEventListener']('click',function(){const _0x4137b9=a2_0x1797;this['classList']['add'](_0x4137b9(0x433)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadUsersWithRoles()[_0x4137b9(0x41e)](()=>{const _0x4c894d=_0x4137b9;this[_0x4c894d(0x431)][_0x4c894d(0x34c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x47fa35=>{console['error']('Error\x20loading\x20users:',_0x47fa35),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3cda05=a2_0x1797;this[_0x3cda05(0x214)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0x525707=document[_0x1fb288(0x204)]('add-new-role-btn');_0x525707&&_0x525707['addEventListener']('click',()=>{const _0x1877a3=_0x1fb288,_0x443d55=document['getElementById']('set-role-modal');_0x443d55&&_0x443d55[_0x1877a3(0x431)][_0x1877a3(0x280)]('active');});const _0x2a5868=document['getElementById']('user-search');_0x2a5868&&_0x2a5868['addEventListener'](_0x1fb288(0x448),debounce(filterUsersTable,0x12c));const _0x4d811a=document['getElementById'](_0x1fb288(0x3cb));_0x4d811a&&_0x4d811a['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x2229bf=a2_0x34d589,_0x32ae19=document['getElementById']('users-table-body');if(!_0x32ae19)return;_0x32ae19['innerHTML']=_0x2229bf(0x3fe);try{const [_0x234cee,_0x1f7508,_0x272b93,_0x18d593]=await Promise['all']([getDocs(collection(db,_0x2229bf(0x3f9))),getDocs(collection(db,_0x2229bf(0x306))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x23e5db=new Map();function _0x5a846b(_0x27ce2d,_0x21be79){_0x27ce2d['forEach'](_0x2c7183=>{const _0x305c20=a2_0x1797,_0x16b4fc=_0x2c7183['data']();if(!_0x16b4fc['username'])return;if(!_0x23e5db[_0x305c20(0x1d9)](_0x16b4fc['username']))_0x23e5db['set'](_0x16b4fc['username'],{'username':_0x16b4fc[_0x305c20(0x30a)],'roleName':_0x16b4fc['roleName']||null,'roleColor':_0x16b4fc['roleColor']||null,'roleAssignedBy':_0x16b4fc['roleAssignedBy']||null,'roleAssignedAt':_0x16b4fc['roleAssignedAt']||null,'sources':[_0x21be79]});else{const _0x1a4dda=_0x23e5db['get'](_0x16b4fc['username']);_0x16b4fc['roleName']&&(!_0x1a4dda['roleName']||_0x21be79==='D1'||_0x21be79==='D2')&&(_0x1a4dda[_0x305c20(0x1f7)]=_0x16b4fc['roleName'],_0x1a4dda[_0x305c20(0x1e8)]=_0x16b4fc[_0x305c20(0x1e8)],_0x1a4dda[_0x305c20(0x315)]=_0x16b4fc[_0x305c20(0x315)],_0x1a4dda['roleAssignedAt']=_0x16b4fc['roleAssignedAt']),!_0x1a4dda[_0x305c20(0x41d)]['includes'](_0x21be79)&&_0x1a4dda['sources']['push'](_0x21be79);}});}_0x5a846b(_0x234cee,'D1'),_0x5a846b(_0x1f7508,'D2'),_0x5a846b(_0x272b93,'Non-Participant'),_0x5a846b(_0x18d593,_0x2229bf(0x222));const _0x46085c=Array['from'](_0x23e5db['values']())['sort']((_0x18b18a,_0x190412)=>_0x18b18a['username']['localeCompare'](_0x190412['username']));if(_0x46085c[_0x2229bf(0x41a)]===0x0){_0x32ae19['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x32ae19['innerHTML']='',_0x46085c['forEach'](_0x1d38ae=>{const _0x2f8ec9=_0x2229bf,_0x3a4e1b=document[_0x2f8ec9(0x291)]('tr');_0x3a4e1b['dataset'][_0x2f8ec9(0x30a)]=_0x1d38ae[_0x2f8ec9(0x30a)],_0x3a4e1b['dataset'][_0x2f8ec9(0x1f7)]=_0x1d38ae['roleName']||'',_0x3a4e1b['dataset']['roleColor']=_0x1d38ae['roleColor']||'#808080';const _0x4e09c8=_0x1d38ae[_0x2f8ec9(0x2b7)]?new Date(_0x1d38ae[_0x2f8ec9(0x2b7)]['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x1c83b0=_0x1d38ae['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x1d38ae['roleColor']+';\x20color:\x20'+getContrastColor(_0x1d38ae['roleColor'])+';\x22>'+_0x1d38ae['roleName']+'</span>':_0x2f8ec9(0x3d0);_0x3a4e1b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1d38ae['username']+_0x2f8ec9(0x43e)+_0x1d38ae['sources']['join'](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1c83b0+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1d38ae[_0x2f8ec9(0x315)]||'N/A')+_0x2f8ec9(0x355)+_0x4e09c8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x1d38ae['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1d38ae['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x1d38ae[_0x2f8ec9(0x30a)]+'\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x32ae19[_0x2f8ec9(0x248)](_0x3a4e1b);}),document['querySelectorAll'](_0x2229bf(0x226))['forEach'](_0x148d7b=>{const _0x2d56a9=_0x2229bf;_0x148d7b['addEventListener'](_0x2d56a9(0x22e),()=>{const _0x41e4aa=_0x148d7b['dataset']['username'];openRoleEditModal(_0x41e4aa);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x27f667=>{const _0x5db424=_0x2229bf;_0x27f667['addEventListener'](_0x5db424(0x22e),()=>{const _0xbbdd54=_0x5db424,_0x569a2b=_0x27f667['dataset']['username'];confirm(_0xbbdd54(0x23c)+_0x569a2b+'?')&&setUserRole(_0x569a2b,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x42fdeb=>console['error'](_0xbbdd54(0x384),_0x42fdeb));});});}catch(_0x4f9b8d){console['error'](_0x2229bf(0x37c),_0x4f9b8d),_0x32ae19[_0x2229bf(0x214)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x361ad4){const _0x430df=a2_0x34d589;console[_0x430df(0x3f7)](_0x430df(0x3dc),_0x361ad4);const _0x3846d2=document[_0x430df(0x204)](_0x430df(0x346)),_0x281383=document[_0x430df(0x204)](_0x430df(0x40b)),_0x4af8d3=document[_0x430df(0x204)]('user-role');if(!_0x3846d2){console[_0x430df(0x26f)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log'](_0x430df(0x3cf),_0x3846d2);_0x281383?(_0x281383['value']=_0x361ad4,console['log']('Username\x20input\x20set\x20to:\x20'+_0x361ad4)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x5d76a3=document['querySelector']('#users-table-body\x20tr[data-username=\x22'+_0x361ad4+'\x22]');if(_0x5d76a3&&_0x4af8d3){const _0x2ff162=_0x5d76a3['dataset'][_0x430df(0x354)];_0x4af8d3['value']=_0x2ff162===_0x430df(0x2a4)?'':_0x2ff162,console['log']('Role\x20select\x20set\x20to:\x20'+_0x4af8d3[_0x430df(0x2f8)]+_0x430df(0x29c)+_0x2ff162+')');}else{if(!_0x5d76a3)console['warn']('Table\x20row\x20for\x20user\x20'+_0x361ad4+_0x430df(0x3aa));if(!_0x4af8d3)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x4af8d3)_0x4af8d3['value']='';}console['log'](_0x430df(0x309)),_0x3846d2['classList'][_0x430df(0x280)](_0x430df(0x22c));const _0x18cc85=document['getElementById']('cancel-role-btn');_0x18cc85?(console[_0x430df(0x3f7)]('Attaching\x20cancel\x20button\x20listener.'),_0x18cc85['removeEventListener']('click',closeModalHandler),_0x18cc85['addEventListener'](_0x430df(0x22e),closeModalHandler)):console[_0x430df(0x1ea)]('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x3846d2['removeEventListener']('click',closeModalBackgroundHandler),_0x3846d2['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x11f015){const _0x50908a=a2_0x34d589;_0x11f015[_0x50908a(0x3f0)]===this&&closeModalHandler();}function closeModalHandler(){const _0x409f88=a2_0x34d589,_0x2f4737=document[_0x409f88(0x204)]('set-role-modal');_0x2f4737&&(_0x2f4737[_0x409f88(0x431)]['remove']('active'),_0x2f4737['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x5c5d64=a2_0x34d589,_0x3345f5=document['getElementById']('user-search')?.['value']['toLowerCase']()||'',_0x395d38=document[_0x5c5d64(0x204)](_0x5c5d64(0x3cb))?.['value']||'all',_0x5c3aba=document['querySelectorAll'](_0x5c5d64(0x3ac));let _0x31abf2=0x0;_0x5c3aba['forEach'](_0x34abb5=>{const _0x2f32d3=_0x5c5d64;if(_0x34abb5[_0x2f32d3(0x270)]('.loading-cell')||_0x34abb5['querySelector']('.empty-state')||_0x34abb5[_0x2f32d3(0x270)](_0x2f32d3(0x31f)))return;const _0x275d85=_0x34abb5[_0x2f32d3(0x3c3)]['username']?.['toLowerCase']()||'',_0x1c6fc3=_0x34abb5['dataset']['role']||'none',_0x26d75a=_0x275d85['includes'](_0x3345f5),_0x27482f=_0x395d38==='all'||_0x1c6fc3===_0x395d38;_0x26d75a&&_0x27482f?(_0x34abb5['style']['display']='',_0x31abf2++):_0x34abb5['style']['display']=_0x2f32d3(0x2a4);});if(_0x31abf2===0x0&&_0x5c3aba['length']>0x0){const _0x2314f5=document['getElementById'](_0x5c5d64(0x430));if(_0x2314f5){if(!_0x2314f5['querySelector'](_0x5c5d64(0x424))){const _0x4f1d7a=document['createElement']('tr');_0x4f1d7a[_0x5c5d64(0x431)]['add'](_0x5c5d64(0x35b)),_0x4f1d7a['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x2314f5['appendChild'](_0x4f1d7a);}}}else{const _0x4e4fcf=document[_0x5c5d64(0x270)]('.no-results');_0x4e4fcf&&_0x4e4fcf['remove']();}}function setupManageArticlesSection(){const _0x8aa78a=a2_0x34d589,_0x21c281=document['getElementById'](_0x8aa78a(0x416));_0x21c281&&_0x21c281['addEventListener'](_0x8aa78a(0x22e),function(){const _0x5e3524=_0x8aa78a;this[_0x5e3524(0x431)][_0x5e3524(0x280)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x34921b=_0x5e3524;this['classList'][_0x34921b(0x34c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})['catch'](_0x3d16bf=>{const _0x5f004a=_0x5e3524;console['error']('Error\x20loading\x20articles:',_0x3d16bf),this['classList']['remove'](_0x5f004a(0x433)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0xe66945=document['getElementById'](_0x8aa78a(0x1ff));_0xe66945?(console['log'](_0x8aa78a(0x366)),_0xe66945['style']['display']='block',_0xe66945[_0x8aa78a(0x421)]('click',()=>{openArticleModal();})):console[_0x8aa78a(0x26f)](_0x8aa78a(0x300));const _0x247478=document['getElementById']('article-form');_0x247478&&_0x247478['addEventListener']('submit',_0x3b4f63=>{_0x3b4f63['preventDefault'](),saveArticle();});const _0x4b741c=document['getElementById']('cancel-article-btn');_0x4b741c&&_0x4b741c['addEventListener']('click',()=>{closeArticleModal();});const _0x12aab5=document['querySelector'](_0x8aa78a(0x36b));_0x12aab5&&_0x12aab5['addEventListener']('click',()=>{closeArticleModal();});const _0xcf5ca9=document[_0x8aa78a(0x204)]('article-modal');_0xcf5ca9&&_0xcf5ca9[_0x8aa78a(0x421)]('click',_0x56b149=>{const _0x37eef0=_0x8aa78a;_0x56b149[_0x37eef0(0x3f0)]===_0xcf5ca9&&closeArticleModal();});}async function loadArticles(){const _0x3658ee=a2_0x34d589,_0x432dfd=document[_0x3658ee(0x204)]('articles-table-body');if(!_0x432dfd)return;_0x432dfd['innerHTML']=_0x3658ee(0x353);try{const _0x13cb09=collection(db,'articles'),_0x53a58d=query(_0x13cb09,orderBy('createdAt','desc')),_0x28366d=await getDocs(_0x53a58d);if(_0x28366d['empty']){_0x432dfd[_0x3658ee(0x214)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x432dfd[_0x3658ee(0x214)]='',_0x28366d['forEach'](_0x4906c8=>{const _0x1965fe=_0x3658ee,_0x33acb9=_0x4906c8[_0x1965fe(0x21c)](),_0x3cec01=document['createElement']('tr'),_0x22bac9=_0x33acb9['createdAt']?new Date(_0x33acb9['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x3cec01[_0x1965fe(0x214)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x33acb9['title']||_0x1965fe(0x29e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x33acb9['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x22bac9+_0x1965fe(0x287)+_0x4906c8['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x4906c8['id']+_0x1965fe(0x2a2),_0x432dfd['appendChild'](_0x3cec01);}),setupArticleActionButtons();}catch(_0x4d9ef8){console['error']('Error\x20loading\x20articles:',_0x4d9ef8),_0x432dfd['innerHTML']=_0x3658ee(0x411)+_0x4d9ef8[_0x3658ee(0x320)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x4ff442=a2_0x34d589;document['querySelectorAll']('.edit-article-btn')['forEach'](_0x17308d=>{_0x17308d['addEventListener']('click',async _0x2f6738=>{const _0x204416=a2_0x1797,_0x5843e9=_0x2f6738[_0x204416(0x33a)]['dataset']['id'];openArticleModal(_0x5843e9);});}),document['querySelectorAll'](_0x4ff442(0x292))['forEach'](_0x4fa25a=>{const _0x19348f=_0x4ff442;_0x4fa25a[_0x19348f(0x421)]('click',async _0x24fadb=>{const _0x26bb3d=_0x19348f,_0x4a4280=_0x24fadb[_0x26bb3d(0x33a)]['dataset']['id'];confirmDeleteArticle(_0x4a4280);});});}function openArticleModal(_0x29f3d7=null){const _0x52b19a=a2_0x34d589,_0x15e641=document['getElementById'](_0x52b19a(0x2e9)),_0x2a690=document['getElementById']('article-modal-title'),_0x28486f=document[_0x52b19a(0x204)]('article-form'),_0x352603=document['getElementById']('article-id');_0x28486f[_0x52b19a(0x40a)](),_0x352603['value']='';if(_0x29f3d7)_0x2a690['textContent']=_0x52b19a(0x265),_0x352603[_0x52b19a(0x2f8)]=_0x29f3d7,loadArticleData(_0x29f3d7);else{_0x2a690[_0x52b19a(0x2db)]=_0x52b19a(0x360);const _0xafd2ce=auth['currentUser'];if(_0xafd2ce){const _0x581c04=document['getElementById']('article-author');if(_0x581c04&&_0xafd2ce['displayName'])_0x581c04['value']=_0xafd2ce['displayName'];else _0x581c04&&(_0x581c04['value']=_0xafd2ce[_0x52b19a(0x3d6)]);}}_0x15e641[_0x52b19a(0x431)]['add']('active');}async function loadArticleData(_0x2be8f4){const _0x2263b8=a2_0x34d589;try{const _0x373c12=doc(db,_0x2263b8(0x1f0),_0x2be8f4),_0x37dd1d=await getDoc(_0x373c12);if(!_0x37dd1d['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x20af02=_0x37dd1d['data']();document['getElementById']('article-title')['value']=_0x20af02['title']||'',document['getElementById']('article-author')[_0x2263b8(0x2f8)]=_0x20af02['author']||'',document['getElementById']('article-image-url')['value']=_0x20af02['imageUrl']||'',document['getElementById'](_0x2263b8(0x278))['value']=_0x20af02['content']||'';}catch(_0x1f3b80){console['error']('Error\x20loading\x20article\x20data:',_0x1f3b80),showNotification(_0x2263b8(0x40f),'error');}}async function saveArticle(){const _0x56f48d=a2_0x34d589;try{const _0x5d9879=document[_0x56f48d(0x204)](_0x56f48d(0x3a0))['value'],_0x5b322f=document['getElementById']('article-title')['value']['trim'](),_0x1ffccd=document['getElementById']('article-author')['value']['trim'](),_0x417464=document['getElementById']('article-image-url')['value']['trim'](),_0x48e2eb=document['getElementById'](_0x56f48d(0x278))['value'][_0x56f48d(0x40e)]();if(!_0x5b322f||!_0x48e2eb){showNotification('Title\x20and\x20content\x20are\x20required','error');return;}const _0x517eac=auth[_0x56f48d(0x2ce)];if(!_0x517eac){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x2dde06={'title':_0x5b322f,'author':_0x1ffccd,'imageUrl':_0x417464||null,'content':_0x48e2eb,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x517eac['email']};!_0x5d9879?(_0x2dde06['createdAt']=serverTimestamp(),_0x2dde06['createdBy']=_0x517eac['email'],await addDoc(collection(db,'articles'),_0x2dde06),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x5d9879),_0x2dde06),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x6c544f){console['error']('Error\x20saving\x20article:',_0x6c544f),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x6c544f['message'],_0x56f48d(0x26f));}}function closeArticleModal(){const _0x3bc017=a2_0x34d589,_0x119c2c=document[_0x3bc017(0x204)]('article-modal');_0x119c2c&&_0x119c2c[_0x3bc017(0x431)]['remove']('active');}async function confirmDeleteArticle(_0x52754d){const _0x564794=a2_0x34d589;if(confirm(_0x564794(0x43a)))try{await deleteDoc(doc(db,'articles',_0x52754d)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x4c0fd8){console[_0x564794(0x26f)]('Error\x20deleting\x20article:',_0x4c0fd8),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x4c0fd8['message'],'error');}}function setupTrophyManagementSection(){const _0x5531ef=a2_0x34d589,_0x16a04f=document['getElementById']('load-trophies-data');_0x16a04f&&_0x16a04f[_0x5531ef(0x421)](_0x5531ef(0x22e),function(){const _0x287744=_0x5531ef;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...';const _0x518a78=document[_0x287744(0x204)](_0x287744(0x3ef));_0x518a78&&(_0x518a78['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0x287744(0x41e)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x13d865=>{const _0x21a727=_0x287744;console[_0x21a727(0x26f)]('Error\x20loading\x20trophies:',_0x13d865),this[_0x21a727(0x431)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4d0172=_0x21a727;this[_0x4d0172(0x214)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0x1d49ae=document['getElementById']('create-new-trophy-btn');_0x1d49ae&&_0x1d49ae['addEventListener']('click',()=>{openTrophyModal();});const _0x507174=document['getElementById']('trophy-form');_0x507174&&_0x507174['addEventListener'](_0x5531ef(0x3e3),_0x39b6d0=>{_0x39b6d0['preventDefault'](),saveTrophyDefinition();});const _0x3a0bcd=document[_0x5531ef(0x204)]('cancel-trophy-btn');_0x3a0bcd&&_0x3a0bcd['addEventListener'](_0x5531ef(0x22e),()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x2b4686=>{const _0x1eaae7=_0x5531ef;_0x2b4686['addEventListener'](_0x1eaae7(0x22e),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x49a23c=document['getElementById']('trophy-modal');_0x49a23c&&_0x49a23c[_0x5531ef(0x421)]('click',_0x3900ba=>{_0x3900ba['target']===_0x49a23c&&closeTrophyModal();});const _0x5c2ff3=document['getElementById'](_0x5531ef(0x3a4));_0x5c2ff3&&_0x5c2ff3['addEventListener']('click',_0x299384=>{_0x299384['target']===_0x5c2ff3&&closeAssignTrophyModal();});const _0x514e25=document['getElementById'](_0x5531ef(0x3c7));_0x514e25&&_0x514e25['addEventListener']('submit',_0x38931e=>{const _0x518cc3=_0x5531ef;_0x38931e[_0x518cc3(0x38a)](),assignTrophyToPlayer();});const _0x3adfeb=document['getElementById'](_0x5531ef(0x207));_0x3adfeb&&_0x3adfeb['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x24b8fb=document['getElementById']('trophy-image-url');_0x24b8fb&&(_0x24b8fb['addEventListener']('input',updateTrophyImagePreview),_0x24b8fb['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x6ec20a=a2_0x34d589,_0x423c1c=document['getElementById']('trophy-image-url')['value']['trim'](),_0x550b58=document[_0x6ec20a(0x204)](_0x6ec20a(0x28b));if(!_0x550b58){const _0x16365e=document[_0x6ec20a(0x204)]('trophy-image-url')['closest']('.form-group'),_0xed89e2=document['createElement']('div');_0xed89e2['id']=_0x6ec20a(0x28b),_0xed89e2[_0x6ec20a(0x3bc)]=_0x6ec20a(0x27a),_0x16365e[_0x6ec20a(0x248)](_0xed89e2);const _0x25547e=document['createElement']('img');_0x25547e['id']='trophy-preview-img',_0x25547e['alt']='Trophy\x20Preview',_0x25547e['onerror']=function(){const _0x2d6ae1=_0x6ec20a;this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add'](_0x2d6ae1(0x26f));},_0xed89e2['appendChild'](_0x25547e);}const _0xdd4567=document[_0x6ec20a(0x204)](_0x6ec20a(0x2af));_0x423c1c?(_0xdd4567[_0x6ec20a(0x39f)]=_0x423c1c,_0xdd4567['style']['display']='block',_0xdd4567[_0x6ec20a(0x431)]['remove']('error')):(_0xdd4567['src']=DEFAULT_TROPHY_IMAGE,_0xdd4567['style'][_0x6ec20a(0x232)]='block');}async function loadTrophyDefinitions(){const _0x40f0f1=a2_0x34d589,_0x2fbd9f=document['getElementById'](_0x40f0f1(0x293));if(!_0x2fbd9f)return;_0x2fbd9f['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x59393a=collection(db,'trophyDefinitions'),_0x55851=query(_0x59393a,orderBy(_0x40f0f1(0x27f),'desc')),_0x4e1955=await getDocs(_0x55851);if(_0x4e1955[_0x40f0f1(0x3e8)]){_0x2fbd9f[_0x40f0f1(0x214)]=_0x40f0f1(0x409);return;}_0x2fbd9f[_0x40f0f1(0x214)]='',_0x4e1955[_0x40f0f1(0x202)](_0x3e2ee7=>{const _0x73417f=_0x40f0f1,_0x16750b=_0x3e2ee7[_0x73417f(0x21c)](),_0x1807b2=document['createElement']('tr'),_0x54e6ba=_0x16750b[_0x73417f(0x27f)]?new Date(_0x16750b['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x1807b2['innerHTML']=_0x73417f(0x425)+(_0x16750b['image']||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x16750b['name']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x16750b['name']||'Untitled\x20Trophy')+_0x73417f(0x377)+(_0x16750b['rarity']||_0x73417f(0x397))+'\x22>'+(_0x16750b[_0x73417f(0x3a1)]||'common')+_0x73417f(0x359)+_0x54e6ba+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x3e2ee7['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x3e2ee7['id']+_0x73417f(0x3c9)+_0x3e2ee7['id']+_0x73417f(0x2a2),_0x2fbd9f['appendChild'](_0x1807b2);}),setupTrophyActionButtons();}catch(_0x55177e){console[_0x40f0f1(0x26f)](_0x40f0f1(0x1fa),_0x55177e),_0x2fbd9f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x55177e['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x3a42e3=a2_0x34d589;document[_0x3a42e3(0x41f)]('.edit-trophy-btn')[_0x3a42e3(0x202)](_0x185f63=>{_0x185f63['addEventListener']('click',_0x50dd7e=>{const _0x33e332=a2_0x1797,_0x3eaeed=_0x50dd7e['currentTarget'][_0x33e332(0x3c3)]['id'];openTrophyModal(_0x3eaeed);});}),document['querySelectorAll']('.assign-trophy-btn')['forEach'](_0x2551bd=>{const _0x1b7fbf=_0x3a42e3;_0x2551bd['addEventListener'](_0x1b7fbf(0x22e),_0x599981=>{const _0x3ba1e2=_0x599981['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x3ba1e2);});}),document[_0x3a42e3(0x41f)]('.delete-trophy-btn')['forEach'](_0x4789ad=>{_0x4789ad['addEventListener']('click',_0x4d007d=>{const _0x5ec306=a2_0x1797,_0x21b713=_0x4d007d['currentTarget'][_0x5ec306(0x3c3)]['id'];confirmDeleteTrophy(_0x21b713);});});}function openTrophyModal(_0x46a5da=null){const _0x2f0bf5=a2_0x34d589,_0x101de5=document['getElementById'](_0x2f0bf5(0x243)),_0x1e28d8=document['getElementById']('trophy-modal-title'),_0x68e4a9=document['getElementById']('trophy-form'),_0x49a3bb=document['getElementById']('trophy-id');_0x68e4a9['reset'](),_0x49a3bb['value']='';const _0x1de74b=document['getElementById']('trophy-preview-img');_0x1de74b&&(_0x1de74b['src']=DEFAULT_TROPHY_IMAGE,_0x1de74b['classList'][_0x2f0bf5(0x34c)]('error')),_0x46a5da?(_0x1e28d8['textContent']='Edit\x20Trophy',_0x49a3bb['value']=_0x46a5da,loadTrophyData(_0x46a5da)):_0x1e28d8['textContent']=_0x2f0bf5(0x238),_0x101de5[_0x2f0bf5(0x431)]['add'](_0x2f0bf5(0x22c));}async function loadTrophyData(_0x367fa1){const _0x30db3c=a2_0x34d589;try{const _0x45c24f=doc(db,'trophyDefinitions',_0x367fa1),_0x2d2163=await getDoc(_0x45c24f);if(!_0x2d2163['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x2e85a1=_0x2d2163['data']();document['getElementById']('trophy-name')['value']=_0x2e85a1['name']||'',document['getElementById']('trophy-description')['value']=_0x2e85a1['description']||'',document[_0x30db3c(0x204)](_0x30db3c(0x217))[_0x30db3c(0x2f8)]=_0x2e85a1['image']||'',document['getElementById'](_0x30db3c(0x2f6))['value']=_0x2e85a1['rarity']||_0x30db3c(0x397),updateTrophyImagePreview();}catch(_0x3a0a1f){console['error']('Error\x20loading\x20trophy\x20data:',_0x3a0a1f),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x5719c3=a2_0x34d589;try{const _0x3ac521=document['getElementById'](_0x5719c3(0x348))['value'],_0x3035af=document['getElementById'](_0x5719c3(0x1e9))['value']['trim'](),_0x520248=document['getElementById'](_0x5719c3(0x35f))[_0x5719c3(0x2f8)]['trim'](),_0x19b517=document['getElementById'](_0x5719c3(0x217))['value']['trim'](),_0x3b55cb=document['getElementById']('trophy-rarity')['value'];if(!_0x3035af||!_0x520248||!_0x19b517){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x59705d=auth['currentUser'];if(!_0x59705d){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x333da5={'name':_0x3035af,'description':_0x520248,'image':_0x19b517,'rarity':_0x3b55cb,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x59705d['email']};!_0x3ac521?(_0x333da5['createdAt']=serverTimestamp(),_0x333da5['createdBy']=_0x59705d[_0x5719c3(0x3d6)],await addDoc(collection(db,_0x5719c3(0x43f)),_0x333da5),showNotification(_0x5719c3(0x2e0),'success')):(await updateDoc(doc(db,'trophyDefinitions',_0x3ac521),_0x333da5),showNotification(_0x5719c3(0x23a),'success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x3127f8){console['error']('Error\x20saving\x20trophy:',_0x3127f8),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x3127f8[_0x5719c3(0x320)],_0x5719c3(0x26f));}}function closeTrophyModal(){const _0x1330de=document['getElementById']('trophy-modal');_0x1330de&&_0x1330de['classList']['remove']('active');}async function confirmDeleteTrophy(_0x593cf3){const _0x4e145a=a2_0x34d589;if(!_0x593cf3){console['error']('Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.');return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x50425b=auth[_0x4e145a(0x2ce)];if(!_0x50425b){showNotification(_0x4e145a(0x341),_0x4e145a(0x26f));return;}console[_0x4e145a(0x3f7)]('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x593cf3),await deleteDoc(doc(db,'trophyDefinitions',_0x593cf3)),showNotification(_0x4e145a(0x26d),_0x4e145a(0x379)),loadTrophyDefinitions();}catch(_0x5a7071){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x5a7071),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x5a7071['message'],_0x4e145a(0x26f));}}async function openAssignTrophyModal(_0x576000){const _0x3598dc=a2_0x34d589;try{const _0x2dd27c=doc(db,'trophyDefinitions',_0x576000),_0x31123f=await getDoc(_0x2dd27c);if(!_0x31123f[_0x3598dc(0x1f2)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x506a8d=_0x31123f[_0x3598dc(0x21c)]();document['getElementById']('assign-trophy-id')[_0x3598dc(0x2f8)]=_0x576000,document['getElementById']('assign-trophy-name')['value']=_0x506a8d['name'],document['getElementById']('assign-trophy-image')['src']=_0x506a8d['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0x3598dc(0x1de))['textContent']=_0x506a8d[_0x3598dc(0x372)]||'Unnamed\x20Trophy',document[_0x3598dc(0x204)]('assign-trophy-description')['textContent']=_0x506a8d['description']||'No\x20description';const _0x4b29db=document[_0x3598dc(0x204)]('assign-trophy-rarity');_0x4b29db['textContent']=_0x506a8d['rarity']||'common',_0x4b29db['className']='trophy-rarity\x20'+(_0x506a8d['rarity']||'common');const _0x3d0ec8=document[_0x3598dc(0x204)]('assign-trophy-modal');_0x3d0ec8['classList']['add']('active');}catch(_0x8bec43){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x8bec43),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x4e9486=a2_0x34d589,_0xb90b27=document[_0x4e9486(0x204)](_0x4e9486(0x3a4));_0xb90b27&&_0xb90b27[_0x4e9486(0x431)]['remove']('active');}async function assignTrophyToPlayer(){const _0x1d4853=a2_0x34d589;try{const _0x1d7bce=document['getElementById']('assign-trophy-id')['value'],_0x398c46=document[_0x1d4853(0x204)]('assign-trophy-name')['value'],_0x3f8637=document['getElementById']('assign-player-username')['value']['trim'](),_0x7c6e87=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x1d7bce||!_0x3f8637){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required','error');return;}const _0x4c711e=auth['currentUser'];if(!_0x4c711e){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x83b75d=null,_0x1c2bfd=null,_0x2a3ded=null;if(_0x7c6e87==='non-participant'){const _0x3549e5=collection(db,_0x1d4853(0x2c8)),_0x5d7f88=query(_0x3549e5,where(_0x1d4853(0x30a),'==',_0x3f8637)),_0x2f05e2=await getDocs(_0x5d7f88);!_0x2f05e2['empty']&&(_0x83b75d=_0x2f05e2['docs'][0x0],_0x1c2bfd=_0x83b75d['id'],_0x2a3ded=_0x83b75d['data']());}else{const _0x20b7c9=_0x7c6e87==='D1'?_0x1d4853(0x3f9):_0x7c6e87==='D2'?'playersD2':_0x1d4853(0x3d4),_0x5ab04f=collection(db,_0x20b7c9),_0x2ed606=query(_0x5ab04f,where('username','==',_0x3f8637)),_0x3d1112=await getDocs(_0x2ed606);!_0x3d1112[_0x1d4853(0x3e8)]&&(_0x83b75d=_0x3d1112['docs'][0x0],_0x1c2bfd=_0x83b75d['id'],_0x2a3ded=_0x83b75d['data']());}if(!_0x83b75d){showNotification(_0x1d4853(0x31d)+_0x3f8637+'\x22\x20not\x20found\x20in\x20'+(_0x7c6e87==='non-participant'?_0x1d4853(0x2cd):_0x7c6e87+_0x1d4853(0x307)),'error');return;}const _0x1adfa4=collection(db,_0x1d4853(0x311)),_0x387055=query(_0x1adfa4,where(_0x1d4853(0x20b),'==',_0x1c2bfd),where('trophyId','==',_0x1d7bce)),_0x13ddb4=await getDocs(_0x387055);if(!_0x13ddb4['empty']){showNotification('Player\x20\x22'+_0x3f8637+'\x22\x20already\x20has\x20this\x20trophy','warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x1c2bfd,'playerUsername':_0x3f8637,'trophyId':_0x1d7bce,'awardedAt':serverTimestamp(),'awardedBy':_0x4c711e['email'],'ladder':_0x7c6e87}),showNotification('Trophy\x20\x22'+_0x398c46+_0x1d4853(0x3fb)+_0x3f8637,'success'),closeAssignTrophyModal();}catch(_0x454a34){console[_0x1d4853(0x26f)](_0x1d4853(0x2a8),_0x454a34),showNotification('Failed\x20to\x20assign\x20trophy:\x20'+_0x454a34['message'],_0x1d4853(0x26f));}}function setupInactivePlayersSection(){const _0x5902a5=a2_0x34d589,_0x4aca2c=document['getElementById'](_0x5902a5(0x228));_0x4aca2c&&_0x4aca2c['addEventListener']('change',function(){const _0x604536=_0x5902a5,_0x4ee39a=document['getElementById'](_0x604536(0x357));if(_0x4ee39a)_0x4ee39a['click']();});const _0x18ece3=document[_0x5902a5(0x270)](_0x5902a5(0x21f)),_0x4c69d1=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x18ece3&&_0x4c69d1&&(_0x18ece3['addEventListener']('change',function(){const _0x50456d=_0x5902a5;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x50456d(0x25e))['style']['display']!=='none'){const _0x13925e=document['getElementById'](_0x50456d(0x357));if(_0x13925e)_0x13925e['click']();}}}),_0x4c69d1['addEventListener']('change',function(){const _0x4ed388=_0x5902a5;if(this[_0x4ed388(0x373)]){currentLadder='D2';if(document[_0x4ed388(0x204)]('inactive-players')['style']['display']!==_0x4ed388(0x2a4)){const _0xced752=document[_0x4ed388(0x204)](_0x4ed388(0x357));if(_0xced752)_0xced752['click']();}}}));const _0x25a380=document['getElementById'](_0x5902a5(0x227));_0x25a380&&_0x25a380['addEventListener']('input',debounce(function(){const _0xfcd3b9=_0x5902a5,_0x5bcac8=_0x25a380[_0xfcd3b9(0x2f8)][_0xfcd3b9(0x249)](),_0xd91288=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0xd91288['forEach'](_0x377a37=>{const _0x86f26=_0xfcd3b9;if(_0x377a37[_0x86f26(0x270)]('.loading-cell')||_0x377a37['querySelector'](_0x86f26(0x2bf))||_0x377a37['querySelector']('.error-state'))return;const _0x275086=_0x377a37[_0x86f26(0x378)][0x0]?.[_0x86f26(0x2db)][_0x86f26(0x249)]()||'',_0x4b2853=_0x377a37[_0x86f26(0x378)][0x5]?.[_0x86f26(0x2db)][_0x86f26(0x249)]()||'';_0x275086[_0x86f26(0x2ae)](_0x5bcac8)||_0x4b2853[_0x86f26(0x2ae)](_0x5bcac8)?_0x377a37[_0x86f26(0x3b3)][_0x86f26(0x232)]='':_0x377a37['style']['display']='none';});},0x12c)),document['addEventListener']('click',function(_0x17d8a1){const _0x518c01=_0x5902a5;if(_0x17d8a1[_0x518c01(0x3f0)][_0x518c01(0x23d)]('.view-player-btn')){const _0x3860f2=_0x17d8a1['target']['closest']('.view-player-btn'),_0x45628d=_0x3860f2['dataset'][_0x518c01(0x30a)];_0x45628d&&alert('View\x20player\x20details\x20for\x20'+_0x45628d+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x2e4d61=a2_0x34d589,_0x33f142=document['getElementById']('inactive-players-table-body');if(!_0x33f142)return;_0x33f142['innerHTML']=_0x2e4d61(0x2e2);try{const _0x44001d=document['getElementById']('inactive-days-filter'),_0x3c38af=_0x44001d?parseInt(_0x44001d['value'])||0x0:0x0,_0xfe95f3=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x415017=await getDocs(_0xfe95f3);if(_0x415017['empty']){_0x33f142['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x17084f=[];_0x415017['forEach'](_0x16dd28=>{const _0x3a7db3=_0x16dd28['data']();_0x17084f['push']({..._0x3a7db3,'id':_0x16dd28['id'],'username':_0x3a7db3['username']||'Unknown\x20Player'});}),console[_0x2e4d61(0x3f7)](_0x2e4d61(0x1df)+_0x17084f['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x3d7a00=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x579e81=_0x17084f['map'](async _0x3f1b7d=>{const _0x3f5811=_0x2e4d61;try{const _0x5696a3=collection(db,_0x3d7a00),_0x26b16e=query(_0x5696a3,or(where('winnerUsername','==',_0x3f1b7d['username']),where('loserUsername','==',_0x3f1b7d[_0x3f5811(0x30a)])),orderBy('approvedAt','desc'),limit(0x1)),_0x4f858b=await getDocs(_0x26b16e);if(!_0x4f858b[_0x3f5811(0x3e8)]){const _0x1e3b80=_0x4f858b[_0x3f5811(0x21d)][0x0]['data'](),_0x144882=_0x1e3b80['approvedAt']?new Date(_0x1e3b80['approvedAt']['seconds']*0x3e8):null,_0x1e1400=new Date(),_0xcc500a=_0x144882?Math['floor']((_0x1e1400-_0x144882)/(0x3e8*0x3c*0x3c*0x18)):null,_0x49bf04=_0x1e3b80['winnerUsername']===_0x3f1b7d['username']?_0x1e3b80['loserUsername']:_0x1e3b80['winnerUsername'],_0x37e9b3=_0x1e3b80['winnerUsername']===_0x3f1b7d['username']?_0x3f5811(0x356):_0x3f5811(0x221);return{..._0x3f1b7d,'lastMatch':{'date':_0x144882?_0x144882[_0x3f5811(0x21a)]():'N/A','opponent':_0x49bf04||'Unknown','result':_0x37e9b3,'timestamp':_0x144882||new Date(0x0),'daysSinceMatch':_0xcc500a||Number['MAX_SAFE_INTEGER']}};}else return{..._0x3f1b7d,'lastMatch':{'date':'Never\x20played','opponent':_0x3f5811(0x286),'result':'N/A','timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x231e2f){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x3f1b7d['username']+':',_0x231e2f),{..._0x3f1b7d,'lastMatch':{'date':'Error','opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x5c2683=await Promise[_0x2e4d61(0x3bb)](_0x579e81);_0x5c2683['sort']((_0x5128a2,_0x17f73f)=>_0x17f73f['lastMatch'][_0x2e4d61(0x32e)]-_0x5128a2[_0x2e4d61(0x42f)]['daysSinceMatch']);_0x3c38af>0x0&&(_0x5c2683=_0x5c2683['filter'](_0x9a9494=>_0x9a9494[_0x2e4d61(0x42f)]['daysSinceMatch']>=_0x3c38af));_0x33f142['innerHTML']='';if(_0x5c2683[_0x2e4d61(0x41a)]===0x0){_0x33f142[_0x2e4d61(0x214)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x5c2683[_0x2e4d61(0x202)](_0x44a47e=>{const _0x12d716=_0x2e4d61,_0x31693f=document['createElement']('tr'),_0xffd0c5=_0x44a47e['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x44a47e['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x31693f[_0x12d716(0x3bc)]=_0xffd0c5,_0x31693f[_0x12d716(0x214)]=_0x12d716(0x224)+_0x44a47e['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x44a47e[_0x12d716(0x23b)]||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x44a47e['lastMatch'][_0x12d716(0x364)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x44a47e['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?_0x12d716(0x286):_0x44a47e['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x44a47e['lastMatch'][_0x12d716(0x364)]==='Never\x20played'?'No\x20matches\x20found':_0x44a47e['lastMatch'][_0x12d716(0x233)]+_0x12d716(0x42b)+_0x44a47e['lastMatch']['opponent'])+_0x12d716(0x340)+_0x44a47e['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x33f142['appendChild'](_0x31693f);}),console[_0x2e4d61(0x3f7)]('Displaying\x20'+_0x5c2683['length']+'\x20inactive\x20players');}catch(_0x15f0c3){console[_0x2e4d61(0x26f)]('Error\x20loading\x20inactive\x20players:',_0x15f0c3),_0x33f142[_0x2e4d61(0x214)]='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x15f0c3['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x7b30e3=a2_0x34d589;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x5b9d6e=document[_0x7b30e3(0x204)]('create-match-highlight-btn');_0x5b9d6e&&_0x5b9d6e[_0x7b30e3(0x421)]('click',function(){const _0x472367=_0x7b30e3;console['log'](_0x472367(0x276)),openHighlightModal('match');});const _0x361bd9=document['getElementById']('create-creator-highlight-btn');_0x361bd9&&_0x361bd9['addEventListener']('click',function(){const _0x1dd8de=_0x7b30e3;console[_0x1dd8de(0x3f7)]('Creator\x20highlight\x20button\x20clicked'),openHighlightModal(_0x1dd8de(0x273));});const _0x3519a4=document[_0x7b30e3(0x204)]('create-achievement-highlight-btn');_0x3519a4&&_0x3519a4['addEventListener']('click',function(){const _0x5034a4=_0x7b30e3;console[_0x5034a4(0x3f7)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x2762a0='match'){const _0x40803e=a2_0x34d589;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x2762a0);const _0xed8e18=document['getElementById']('highlight-modal'),_0x4dd64f=document['getElementById'](_0x40803e(0x3c8)),_0x4e7fe0=document['getElementById'](_0x40803e(0x239)),_0x1e48c5=document['getElementById'](_0x40803e(0x2d4));if(!_0xed8e18||!_0x4dd64f||!_0x4e7fe0){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x4dd64f['reset'](),_0x1e48c5['value']='';const _0xdca329=['match','creator','achievement'],_0x15cb3c=!_0xdca329['includes'](_0x2762a0);if(_0x15cb3c){const _0x39361c=_0x2762a0;_0x1e48c5[_0x40803e(0x2f8)]=_0x39361c,_0x4e7fe0['textContent']='Loading...',loadHighlightDataAdmin(_0x39361c);}else{const _0x515968=_0x2762a0;document['getElementById'](_0x40803e(0x28f))['value']=_0x515968,_0x4e7fe0[_0x40803e(0x2db)]='Create\x20New\x20'+getHighlightTypeName(_0x515968),toggleHighlightFields(_0x515968);const _0x4105ba=auth[_0x40803e(0x2ce)];_0x4105ba&&document['getElementById']('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')['value']=_0x4105ba['displayName']||_0x4105ba['email']);}_0xed8e18[_0x40803e(0x431)]['add']('active');}function toggleHighlightFields(_0xc756d4){const _0x509d60=a2_0x34d589;console[_0x509d60(0x3f7)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0xc756d4);const _0x933f45=document[_0x509d60(0x204)](_0x509d60(0x3c8));if(!_0x933f45)return;const _0x268063=_0x933f45['querySelectorAll']('.form-group,\x20.form-row');_0x268063['forEach'](_0x15cccb=>_0x15cccb[_0x509d60(0x3b3)]['display']=_0x509d60(0x2a4));const _0x52f544=document['getElementById'](_0x509d60(0x367));if(_0x52f544)_0x52f544['style']['display']='none';const _0x302b87=[_0x509d60(0x343),'highlight-description-container','highlight-submitted-by-container'];_0x302b87['forEach'](_0x2fb154=>{const _0x2c950d=_0x509d60,_0x2ff7bc=document[_0x2c950d(0x204)](_0x2fb154);if(_0x2ff7bc)_0x2ff7bc[_0x2c950d(0x3b3)]['display']='block';});if(_0xc756d4===_0x509d60(0x2b3)){const _0x5db17a=[_0x509d60(0x29d),'highlight-match-info-container','highlight-map-container','highlight-match-date-container','highlight-players-container','highlight-match-link-container'];_0x5db17a[_0x509d60(0x202)](_0x5cf43f=>{const _0x2e5519=_0x509d60,_0x461028=document['getElementById'](_0x5cf43f);_0x461028&&(_0x5cf43f==='highlight-players-container'?_0x461028['style'][_0x2e5519(0x232)]=_0x2e5519(0x25b):_0x461028['style'][_0x2e5519(0x232)]='block');});const _0x165b4f=document[_0x509d60(0x204)](_0x509d60(0x396));if(_0x165b4f){_0x165b4f['required']=!![];const _0x3592fe=_0x165b4f['previousElementSibling'];if(_0x3592fe)_0x3592fe[_0x509d60(0x214)]='YouTube\x20Video\x20ID*';}if(_0x52f544)_0x52f544[_0x509d60(0x3b3)][_0x509d60(0x232)]='block';updateHighlightVideoPreview();}else{if(_0xc756d4==='creator'){const _0x12b5a6=['highlight-map-container','highlight-map-creator-container',_0x509d60(0x3be),'highlight-creator-image-container','highlight-video-container'];_0x12b5a6['forEach'](_0x58bb94=>{const _0x414896=_0x509d60,_0x49eea5=document['getElementById'](_0x58bb94);if(_0x49eea5)_0x49eea5[_0x414896(0x3b3)]['display']='block';});const _0x406aba=document['getElementById']('highlight-video-id');if(_0x406aba){_0x406aba['required']=![];const _0x40d69f=_0x406aba['previousElementSibling'];if(_0x40d69f)_0x40d69f['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}else{if(_0xc756d4===_0x509d60(0x3ce)){const _0x1856b9=[_0x509d60(0x1d4),'highlight-achievement-type-container',_0x509d60(0x2a1),_0x509d60(0x2b6),'highlight-achievement-image-container',_0x509d60(0x29d)];_0x1856b9['forEach'](_0x3f87e4=>{const _0x68285=_0x509d60,_0x49926c=document['getElementById'](_0x3f87e4);if(_0x49926c)_0x49926c[_0x68285(0x3b3)]['display']='block';});const _0x341a20=document[_0x509d60(0x204)]('highlight-video-id');if(_0x341a20){_0x341a20['required']=![];const _0x3e257e=_0x341a20['previousElementSibling'];if(_0x3e257e)_0x3e257e['innerHTML']=_0x509d60(0x2fe);}}}}}async function loadHighlightDataAdmin(_0x27744e){const _0x450420=a2_0x34d589;try{const _0x16d668=doc(db,'highlights',_0x27744e),_0x1fd2f2=await getDoc(_0x16d668);if(!_0x1fd2f2['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x4d22dc=_0x1fd2f2['data'](),_0x57f4df=_0x4d22dc[_0x450420(0x223)]||'match';document[_0x450420(0x204)](_0x450420(0x239))['textContent']='Edit\x20'+getHighlightTypeName(_0x57f4df),document['getElementById'](_0x450420(0x28f))['value']=_0x57f4df,toggleHighlightFields(_0x57f4df),document[_0x450420(0x204)](_0x450420(0x330))[_0x450420(0x2f8)]=_0x4d22dc[_0x450420(0x440)]||'',document[_0x450420(0x204)]('highlight-description')['value']=_0x4d22dc['description']||'',document['getElementById']('highlight-submitted-by')[_0x450420(0x2f8)]=_0x4d22dc[_0x450420(0x1d6)]||'';_0x4d22dc['videoId']&&(document[_0x450420(0x204)]('highlight-video-id')['value']=_0x4d22dc['videoId'],updateHighlightVideoPreview());if(_0x57f4df==='match'){document['getElementById']('highlight-match-info')['value']=_0x4d22dc['matchInfo']||'',document[_0x450420(0x204)]('highlight-map')['value']=_0x4d22dc['map']||'';if(_0x4d22dc['matchDate']){const _0x34f4b6=new Date(_0x4d22dc['matchDate'][_0x450420(0x247)]*0x3e8);document['getElementById']('highlight-match-date')['value']=_0x34f4b6[_0x450420(0x342)]()['split']('T')[0x0];}document['getElementById'](_0x450420(0x446))['value']=_0x4d22dc[_0x450420(0x24b)]||'',document[_0x450420(0x204)]('highlight-winner-score')[_0x450420(0x2f8)]=_0x4d22dc['winnerScore']||'',document['getElementById']('highlight-loser-name')['value']=_0x4d22dc[_0x450420(0x322)]||'',document['getElementById']('highlight-loser-score')[_0x450420(0x2f8)]=_0x4d22dc['loserScore']||'',document[_0x450420(0x204)]('highlight-match-link')['value']=_0x4d22dc[_0x450420(0x35e)]||'';}else{if(_0x57f4df==='creator')document['getElementById'](_0x450420(0x29f))['value']=_0x4d22dc['map']||'',document['getElementById'](_0x450420(0x434))[_0x450420(0x2f8)]=_0x4d22dc['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x4d22dc['mapVersion']||'',document['getElementById']('highlight-creator-image')['value']=_0x4d22dc[_0x450420(0x2f1)]||'';else _0x57f4df===_0x450420(0x3ce)&&(document['getElementById'](_0x450420(0x244))['value']=_0x4d22dc['achievementPlayer']||'',document[_0x450420(0x204)]('highlight-achievement-type')['value']=_0x4d22dc[_0x450420(0x2ac)]||'',document['getElementById']('highlight-achievement-details')['value']=_0x4d22dc['achievementDetails']||'',document['getElementById']('highlight-player-profile')['value']=_0x4d22dc['playerProfileUrl']||'',document[_0x450420(0x204)]('highlight-achievement-image')['value']=_0x4d22dc['achievementImageUrl']||'');}}catch(_0x55eb14){console[_0x450420(0x26f)]('Error\x20loading\x20highlight:',_0x55eb14),showNotification('Error\x20loading\x20highlight:\x20'+_0x55eb14[_0x450420(0x320)],'error');}}async function saveHighlight(){const _0x4ffa25=a2_0x34d589;try{const _0x311c51=document['getElementById'](_0x4ffa25(0x2d4))?.['value']||'',_0x38e58e=document['getElementById']('highlight-type')?.['value']||'match',_0x483637={'title':document['getElementById']('highlight-title')?.['value']?.['trim']()||'','description':document[_0x4ffa25(0x204)](_0x4ffa25(0x445))?.['value']?.['trim']()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document['getElementById']('highlight-video-id')?.[_0x4ffa25(0x2f8)]?.[_0x4ffa25(0x40e)]()||null,'type':_0x38e58e};if(!_0x483637['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x38e58e==='match'){_0x483637['matchInfo']=document[_0x4ffa25(0x204)]('highlight-match-info')?.['value']?.['trim']()||'',_0x483637['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'';const _0xb1ccf6=document['getElementById']('highlight-match-date'),_0x2d2f4e=_0xb1ccf6?.['value']||'';_0x483637['matchDate']=_0x2d2f4e?Timestamp['fromDate'](new Date(_0x2d2f4e)):null,_0x483637[_0x4ffa25(0x24b)]=document['getElementById'](_0x4ffa25(0x446))?.['value']?.[_0x4ffa25(0x40e)]()||'',_0x483637['winnerScore']=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x483637[_0x4ffa25(0x322)]=document['getElementById']('highlight-loser-name')?.[_0x4ffa25(0x2f8)]?.['trim']()||'',_0x483637['loserScore']=document['getElementById']('highlight-loser-score')?.['value']?.[_0x4ffa25(0x40e)]()||'',_0x483637['matchLink']=document['getElementById'](_0x4ffa25(0x1ef))?.['value']?.[_0x4ffa25(0x40e)]()||'';if(!_0x483637[_0x4ffa25(0x32f)]){showNotification('YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','error');return;}}else{if(_0x38e58e==='creator'){_0x483637['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x483637['mapCreator']=document['getElementById'](_0x4ffa25(0x434))?.['value']?.['trim']()||'',_0x483637[_0x4ffa25(0x2d3)]=document['getElementById']('highlight-map-version')?.['value']?.['trim']()||'',_0x483637['creatorImageUrl']=document[_0x4ffa25(0x204)]('highlight-creator-image')?.[_0x4ffa25(0x2f8)]?.[_0x4ffa25(0x40e)]()||'';if(!_0x483637[_0x4ffa25(0x371)]){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x38e58e==='achievement'){_0x483637['achievementPlayer']=document[_0x4ffa25(0x204)](_0x4ffa25(0x244))?.['value']?.['trim']()||'',_0x483637['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x483637['achievementDetails']=document[_0x4ffa25(0x204)](_0x4ffa25(0x327))?.['value']?.['trim']()||'',_0x483637['playerProfileUrl']=document['getElementById'](_0x4ffa25(0x1e7))?.['value']?.['trim']()||'',_0x483637['achievementImageUrl']=document[_0x4ffa25(0x204)](_0x4ffa25(0x383))?.['value']?.['trim']()||'';if(!_0x483637['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x311c51?(_0x483637[_0x4ffa25(0x415)]=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x311c51),_0x483637),showNotification(_0x4ffa25(0x29b),_0x4ffa25(0x379))):(_0x483637['createdAt']=serverTimestamp(),await addDoc(collection(db,_0x4ffa25(0x344)),_0x483637),showNotification('Highlight\x20created\x20successfully!',_0x4ffa25(0x379))),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x326933){console[_0x4ffa25(0x26f)]('Error\x20saving\x20highlight:',_0x326933),showNotification('Error\x20saving\x20highlight:\x20'+_0x326933['message'],'error');}}function closeHighlightModal(){const _0x212393=document['getElementById']('highlight-modal');if(_0x212393)_0x212393['classList']['remove']('active');}function getHighlightTypeName(_0x3a4787){const _0x19bac2=a2_0x34d589;switch(_0x3a4787){case'match':return'Match\x20Highlight';case'creator':return'Featured\x20Creator';case _0x19bac2(0x3ce):return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0x4d6ced=a2_0x34d589,_0xee7e1f=document[_0x4d6ced(0x204)](_0x4d6ced(0x396)),_0x54e2a2=document['getElementById']('highlight-video-preview-container'),_0x491468=document[_0x4d6ced(0x204)]('highlight-video-preview');if(!_0xee7e1f||!_0x491468||!_0x54e2a2)return;const _0x5e2f18=_0xee7e1f['value']['trim']();_0x5e2f18&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x5e2f18)?(_0x491468['src']='https://www.youtube.com/embed/'+_0x5e2f18,_0x54e2a2[_0x4d6ced(0x3b3)]['display']='block'):(_0x491468['src']='',_0x54e2a2[_0x4d6ced(0x3b3)]['display']='none');}async function loadHighlightsAdmin(){const _0x16fd55=a2_0x34d589,_0x211f08=document['getElementById']('highlights-table-body');if(!_0x211f08)return;_0x211f08['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x39dffd=query(collection(db,_0x16fd55(0x344)),orderBy('createdAt',_0x16fd55(0x269))),_0x321801=await getDocs(_0x39dffd);if(_0x321801['empty']){_0x211f08['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x211f08['innerHTML']='',_0x321801['forEach'](_0x2c97ed=>{const _0x4b6d8a=_0x16fd55,_0x1fd235=_0x2c97ed[_0x4b6d8a(0x21c)](),_0x17d721=document['createElement']('tr'),_0x492c5d=_0x1fd235[_0x4b6d8a(0x27f)]?new Date(_0x1fd235[_0x4b6d8a(0x27f)]['seconds']*0x3e8)['toLocaleDateString']():_0x4b6d8a(0x286);let _0x159c13='Unknown',_0x4a58f5='';switch(_0x1fd235[_0x4b6d8a(0x223)]){case'match':_0x159c13=_0x4b6d8a(0x22d),_0x4a58f5='match-type';break;case'creator':_0x159c13=_0x4b6d8a(0x386),_0x4a58f5='creator-type';break;case'achievement':_0x159c13='Achievement',_0x4a58f5='achievement-type';break;}_0x17d721['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1fd235['title']||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x4a58f5+'\x22>'+_0x159c13+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x492c5d+_0x4b6d8a(0x355)+(_0x1fd235['submittedBy']||'Unknown')+_0x4b6d8a(0x355)+(_0x1fd235['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x2c97ed['id']+_0x4b6d8a(0x3b9)+_0x2c97ed['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x211f08['appendChild'](_0x17d721);}),document['querySelectorAll'](_0x16fd55(0x312))['forEach'](_0xb57cdb=>{const _0x140776=_0x16fd55;_0xb57cdb['addEventListener'](_0x140776(0x22e),_0x38e4f4=>{const _0x5572ce=_0x140776;openHighlightModal(_0x38e4f4['currentTarget'][_0x5572ce(0x3c3)]['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x401c29=>{_0x401c29['addEventListener']('click',_0x5471aa=>{const _0x45b781=a2_0x1797;confirmDeleteHighlight(_0x5471aa[_0x45b781(0x33a)]['dataset']['id']);});});}catch(_0x33a9c9){console['error'](_0x16fd55(0x39c),_0x33a9c9),_0x211f08['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x33a9c9['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function confirmDeleteHighlight(_0x40c5e5){const _0x427121=a2_0x34d589;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x427121(0x344),_0x40c5e5)),showNotification(_0x427121(0x2b8),'success'),loadHighlightsAdmin();}catch(_0x31c0e0){console['error'](_0x427121(0x338),_0x31c0e0),showNotification('Error\x20deleting\x20highlight:\x20'+_0x31c0e0[_0x427121(0x320)],'error');}}function setupCreateTestMatchModal(){const _0x4404f5=a2_0x34d589;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x2b4f76=document['getElementById']('create-test-match-modal'),_0x771202=document['getElementById'](_0x4404f5(0x2f2));if(!_0x2b4f76){console[_0x4404f5(0x26f)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x771202){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x1686e1=_0x2b4f76[_0x4404f5(0x2aa)](!![]);_0x2b4f76['parentNode']['replaceChild'](_0x1686e1,_0x2b4f76);const _0x3ea259=_0x1686e1['querySelector']('#create-test-match-form');_0x1686e1['addEventListener']('click',function(_0x22c066){const _0x52c369=_0x4404f5;_0x22c066['target']===_0x1686e1&&(console[_0x52c369(0x3f7)]('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x1c9e23=_0x1686e1[_0x4404f5(0x270)](_0x4404f5(0x2c1));_0x1c9e23&&_0x1c9e23['addEventListener']('click',function(_0x26f28c){const _0x5543df=_0x4404f5;_0x26f28c[_0x5543df(0x38a)](),_0x26f28c['stopPropagation'](),console['log']('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x130e11=_0x1686e1['querySelector']('#cancel-create-test-match-btn');_0x130e11&&_0x130e11['addEventListener'](_0x4404f5(0x22e),function(_0x312df0){_0x312df0['preventDefault'](),_0x312df0['stopPropagation'](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x3ea259){_0x3ea259['addEventListener']('submit',function(_0x171c83){_0x171c83['preventDefault'](),_0x171c83['stopPropagation'](),console['log']('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x1345e8=_0x3ea259['querySelector'](_0x4404f5(0x246));_0x1345e8&&_0x1345e8['addEventListener']('click',function(_0x257dec){const _0x21931d=_0x4404f5;_0x257dec['preventDefault'](),_0x257dec[_0x21931d(0x362)](),console[_0x21931d(0x3f7)]('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x726e1a=a2_0x34d589;console[_0x726e1a(0x3f7)]('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x1c1fc7=document['getElementById'](_0x726e1a(0x3c8));_0x1c1fc7&&_0x1c1fc7['addEventListener']('submit',_0x133e17=>{_0x133e17['preventDefault'](),saveHighlight();});const _0x3ea5f1=document['getElementById']('cancel-highlight-btn');_0x3ea5f1&&_0x3ea5f1['addEventListener']('click',closeHighlightModal);const _0x5effbf=document[_0x726e1a(0x270)]('#highlight-modal\x20.close-btn');_0x5effbf&&_0x5effbf[_0x726e1a(0x421)](_0x726e1a(0x22e),closeHighlightModal);const _0x4b403c=document[_0x726e1a(0x204)]('highlight-modal');_0x4b403c&&_0x4b403c['addEventListener']('click',_0x5bb91d=>{_0x5bb91d['target']===_0x4b403c&&closeHighlightModal();});const _0x1b8900=document['getElementById']('highlight-video-id');_0x1b8900&&_0x1b8900['addEventListener']('input',()=>{updateHighlightVideoPreview();}),console[_0x726e1a(0x3f7)]('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x3d3adf=a2_0x34d589;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x48b15d=document['getElementById']('matches-prev-page'),_0x18031f=document[_0x3d3adf(0x204)]('matches-next-page');_0x48b15d&&_0x48b15d['addEventListener']('click',()=>{const _0x568cbb=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x568cbb]['page']-0x1);});_0x18031f&&_0x18031f[_0x3d3adf(0x421)]('click',()=>{const _0x4d5f16=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x4d5f16]['page']+0x1);});const _0x2ee0a6=document['getElementById']('apply-matches-filters'),_0x5aa1e7=document[_0x3d3adf(0x204)](_0x3d3adf(0x1d7));_0x2ee0a6&&_0x2ee0a6[_0x3d3adf(0x421)](_0x3d3adf(0x22e),applyMatchesFilters);_0x5aa1e7&&_0x5aa1e7['addEventListener'](_0x3d3adf(0x22e),resetMatchesFilters);const _0x205c47=document['getElementById']('matches-search');_0x205c47&&_0x205c47[_0x3d3adf(0x421)](_0x3d3adf(0x448),debounce(filterMatchesTable,0x12c));const _0x4966cb=document[_0x3d3adf(0x204)](_0x3d3adf(0x1fd));_0x4966cb&&_0x4966cb['addEventListener']('click',openResimulateModal);const _0x28e0b5=document[_0x3d3adf(0x204)]('resimulate-modal');if(_0x28e0b5){const _0x28a245=_0x28e0b5[_0x3d3adf(0x270)]('.close');_0x28a245&&_0x28a245['addEventListener']('click',closeResimulateModal),_0x28e0b5['addEventListener']('click',_0x3dbddd=>{const _0x345477=_0x3d3adf;_0x3dbddd[_0x345477(0x3f0)]===_0x28e0b5&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log'](_0x3d3adf(0x206));}function openCreateTestMatchModal(){const _0x55d897=a2_0x34d589;console['log'](_0x55d897(0x3d3));const _0x592279=document['getElementById']('create-test-match-modal'),_0x581fb7=document['getElementById']('create-test-match-form');if(!_0x592279){console[_0x55d897(0x26f)]('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x581fb7){console[_0x55d897(0x26f)]('Create\x20test\x20match\x20form\x20not\x20found'),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x581fb7['reset']();const _0x9b7f66=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x48e059=![];_0x9b7f66['forEach'](_0x23570b=>{const _0x275d91=_0x55d897;console['log']('Found\x20radio\x20with\x20value:',_0x23570b['value']),_0x23570b['value']===currentLadder&&(_0x23570b[_0x275d91(0x373)]=!![],_0x48e059=!![],console[_0x275d91(0x3f7)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x48e059){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x376cee=document['querySelector']('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x376cee&&(_0x376cee['checked']=!![],console[_0x55d897(0x3f7)]('Defaulted\x20to\x20D1\x20ladder'));}const _0xe11b6b=document['getElementById']('test-match-date');if(_0xe11b6b){const _0x1c1e71=new Date()['toISOString']()[_0x55d897(0x313)]('T')[0x0];_0xe11b6b[_0x55d897(0x2f8)]=_0x1c1e71;}_0x592279[_0x55d897(0x3b3)][_0x55d897(0x232)]=_0x55d897(0x25b),_0x592279[_0x55d897(0x3b3)]['visibility']=_0x55d897(0x2ca),_0x592279['style']['opacity']='1',_0x592279['classList']['add'](_0x55d897(0x22c)),console['log'](_0x55d897(0x23e));const _0x47ab7b=document[_0x55d897(0x204)]('test-match-winner-username');_0x47ab7b&&setTimeout(()=>{const _0x18efb8=_0x55d897;_0x47ab7b[_0x18efb8(0x443)]();},0x64);}function closeCreateTestMatchModal(){const _0x23eda9=a2_0x34d589;console['log'](_0x23eda9(0x1f5));const _0x7153ee=document[_0x23eda9(0x204)]('create-test-match-modal');if(!_0x7153ee){console[_0x23eda9(0x26f)]('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x7153ee['classList']['remove']('active'),_0x7153ee['style']['opacity']='0',_0x7153ee['style']['visibility']='hidden',setTimeout(()=>{const _0x3fb12d=_0x23eda9;!_0x7153ee[_0x3fb12d(0x431)]['contains']('active')&&(_0x7153ee['style']['display']='none');},0x12c),console[_0x23eda9(0x3f7)]('Modal\x20closed');}async function createTestMatch(){const _0x36d3c0=a2_0x34d589;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x2ecec1=auth[_0x36d3c0(0x2ce)];if(!_0x2ecec1){showNotification(_0x36d3c0(0x380),_0x36d3c0(0x26f));return;}const _0x1b2e65='D1',_0x284dc2='approvedMatches',_0x27731f={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x36d3c0(0x1f6),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':'Test\x20match','loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x2ecec1['email'],'createdAt':serverTimestamp(),'createdBy':_0x2ecec1['email'],'isTestMatch':!![],'ladder':_0x1b2e65,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':'Simple\x20test\x20match\x20created\x20by\x20admin\x20'+_0x2ecec1['email']};console[_0x36d3c0(0x3f7)](_0x36d3c0(0x281)),await addDoc(collection(db,_0x284dc2),_0x27731f),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0x41c1f4){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0x41c1f4),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0x41c1f4['message'],'error');}}window['testFirebaseConnection']=async function(){const _0xf72ab2=a2_0x34d589;try{console['log'](_0xf72ab2(0x407)),console['log'](_0xf72ab2(0x2d6),auth),console[_0xf72ab2(0x3f7)]('DB:',db),console['log'](_0xf72ab2(0x3db),auth[_0xf72ab2(0x2ce)]);const _0x5c7083=collection(db,'players');console['log']('Collection\x20reference\x20created:',_0x5c7083);const _0x226e48=query(_0x5c7083,where(_0xf72ab2(0x30a),'==','nonexistent'));console[_0xf72ab2(0x3f7)](_0xf72ab2(0x1da),_0x226e48);const _0x23d1ce=await getDocs(_0x226e48);console['log']('Query\x20executed.\x20Empty:',_0x23d1ce['empty']),console['log']('Firebase\x20connection\x20test\x20successful!');}catch(_0x154f02){console['error']('Firebase\x20connection\x20test\x20failed:',_0x154f02);}};function setupCreateTestMatchButton(){const _0x2e5ca9=a2_0x34d589,_0x4a8955=document['getElementById']('create-test-match-btn');if(!_0x4a8955){console['error'](_0x2e5ca9(0x437));return;}console[_0x2e5ca9(0x3f7)](_0x2e5ca9(0x38b));const _0x2bf774=_0x4a8955['cloneNode'](!![]);_0x4a8955['parentNode']['replaceChild'](_0x2bf774,_0x4a8955),_0x2bf774['addEventListener']('click',function(_0x42be1e){const _0x432067=_0x2e5ca9;_0x42be1e['preventDefault'](),_0x42be1e[_0x432067(0x362)](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x5878c4=0x1){const _0x53ed74=a2_0x34d589,_0x17349d=document['getElementById']('matches-table-body');if(!_0x17349d)return;_0x17349d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x2cde84=currentLadder['toLowerCase'](),_0x2405e7=matchesPagination[_0x2cde84],_0x8824a3=currentLadder==='D1'?_0x53ed74(0x240):currentLadder==='D2'?_0x53ed74(0x2cf):'approvedMatchesD3',_0x590159=collection(db,_0x8824a3);_0x5878c4<=0x1?(_0x2405e7['page']=0x1,_0x2405e7['firstVisible']=null,_0x2405e7['lastVisible']=null):_0x2405e7['page']=_0x5878c4;const _0x205a96=getMatchesFilters();let _0x3a769e=_0x590159;if(_0x205a96[_0x53ed74(0x211)]||_0x205a96['endDate']||_0x205a96['searchTerm']){let _0x474e62=[];_0x205a96[_0x53ed74(0x211)]&&_0x205a96['endDate']?(_0x474e62[_0x53ed74(0x1db)](where('approvedAt','>=',_0x205a96['startDate']),where('approvedAt','<=',_0x205a96['endDate'])),_0x3a769e=query(_0x590159,..._0x474e62)):_0x3a769e=query(_0x590159,orderBy(_0x53ed74(0x32d),'desc'));}else _0x3a769e=query(_0x590159,orderBy(_0x53ed74(0x32d),_0x53ed74(0x269)));_0x5878c4>0x1&&_0x2405e7['lastVisible']?_0x3a769e=query(_0x3a769e,startAfter(_0x2405e7['lastVisible']),limit(PAGE_SIZE)):_0x3a769e=query(_0x3a769e,limit(PAGE_SIZE));const _0x3c81f0=await getDocs(_0x3a769e);!_0x3c81f0[_0x53ed74(0x3e8)]&&(_0x2405e7[_0x53ed74(0x31c)]=_0x3c81f0['docs'][0x0],_0x2405e7['lastVisible']=_0x3c81f0['docs'][_0x3c81f0[_0x53ed74(0x21d)][_0x53ed74(0x41a)]-0x1]);let _0x25ddc3=![];if(!_0x3c81f0['empty']){const _0x5074b2=query(_0x3a769e,startAfter(_0x2405e7['lastVisible']),limit(0x1)),_0x4772d8=await getDocs(_0x5074b2);_0x25ddc3=!_0x4772d8['empty'];}const _0x51d8e1=document['getElementById'](_0x53ed74(0x398)),_0x2e68f1=document['getElementById']('matches-next-page'),_0x336bc2=document['getElementById']('matches-page-indicator');if(_0x51d8e1)_0x51d8e1['disabled']=_0x2405e7['page']<=0x1;if(_0x2e68f1)_0x2e68f1['disabled']=!_0x25ddc3;if(_0x336bc2)_0x336bc2[_0x53ed74(0x2db)]=_0x53ed74(0x216)+_0x2405e7['page'];if(_0x3c81f0['empty']){_0x17349d['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x17349d[_0x53ed74(0x214)]='',_0x3c81f0[_0x53ed74(0x202)](_0x1a9693=>{const _0x2d4147=_0x53ed74,_0x5c99f2=_0x1a9693[_0x2d4147(0x21c)](),_0x4313a1=document[_0x2d4147(0x291)]('tr'),_0x4fe7d0=_0x5c99f2['approvedAt']?new Date(_0x5c99f2['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x4313a1[_0x2d4147(0x256)]('data-id',_0x1a9693['id']),_0x4313a1['setAttribute']('data-ladder',currentLadder),_0x4313a1[_0x2d4147(0x431)][_0x2d4147(0x280)](_0x2d4147(0x290)),_0x4313a1[_0x2d4147(0x214)]=_0x2d4147(0x224)+_0x4fe7d0+_0x2d4147(0x404)+(_0x5c99f2[_0x2d4147(0x1e1)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x5c99f2['loserUsername']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x5c99f2['winnerScore']||0x0)+_0x2d4147(0x3b2)+(_0x5c99f2[_0x2d4147(0x2b1)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x5c99f2[_0x2d4147(0x2d7)]||_0x2d4147(0x286))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x1a9693['id']+_0x2d4147(0x375)+_0x1a9693['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x17349d['appendChild'](_0x4313a1);}),setupMatchesActionButtons(),_0x205a96[_0x53ed74(0x42a)]&&filterMatchesTable(),console['log']('Loaded\x20'+_0x3c81f0[_0x53ed74(0x339)]+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x2405e7[_0x53ed74(0x2ba)]);}catch(_0x567d04){console['error'](_0x53ed74(0x2e4),_0x567d04),_0x17349d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x567d04['message']+_0x53ed74(0x3e4);}}async function deleteMatch(_0x13de4b,_0x369dfd){const _0x463230=a2_0x34d589;try{console['log']('Deleting\x20match\x20'+_0x13de4b+_0x463230(0x39b)+_0x369dfd+'\x20ladder');const _0x49458f=auth['currentUser'];if(!_0x49458f){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x2ba767=_0x369dfd==='D1'?'approvedMatches':_0x369dfd==='D2'?_0x463230(0x2cf):'approvedMatchesD3';console[_0x463230(0x3f7)]('Using\x20collection:\x20'+_0x2ba767),showNotification(_0x463230(0x25c),'info'),await deleteDoc(doc(db,_0x2ba767,_0x13de4b)),console[_0x463230(0x3f7)]('Match\x20deleted\x20successfully'),showNotification('Match\x20deleted\x20successfully','success');const _0x514bd2=_0x369dfd['toLowerCase']();loadMatchesData(matchesPagination[_0x514bd2][_0x463230(0x2ba)]);}catch(_0x528927){console['error']('Error\x20deleting\x20match:',_0x528927),showNotification(_0x463230(0x218)+_0x528927[_0x463230(0x320)],'error');}}function setupMatchesActionButtons(){const _0xeadaf3=a2_0x34d589;console['log'](_0xeadaf3(0x28a)),document['querySelectorAll'](_0xeadaf3(0x1ec))['forEach'](_0x5343a5=>{const _0x1299d3=_0xeadaf3;_0x5343a5[_0x1299d3(0x421)]('click',_0x47c604=>{const _0x226aec=_0x1299d3;_0x47c604[_0x226aec(0x38a)](),_0x47c604[_0x226aec(0x362)]();const _0x6ccce9=_0x47c604[_0x226aec(0x33a)]['dataset']['id'],_0x2d66f5=_0x47c604['currentTarget']['closest']('tr'),_0xccd727=_0x2d66f5[_0x226aec(0x3c3)][_0x226aec(0x3b4)];console['log'](_0x226aec(0x260),_0x6ccce9,_0xccd727),openEditMatchModal(_0x6ccce9,_0xccd727);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x5e2be0=>{_0x5e2be0['addEventListener']('click',_0x10a285=>{const _0x1ab67f=a2_0x1797;_0x10a285[_0x1ab67f(0x38a)](),_0x10a285['stopPropagation']();const _0x490ba5=_0x10a285['currentTarget']['dataset']['id'],_0x284ea3=_0x10a285['currentTarget']['closest']('tr'),_0x30b17b=_0x284ea3['dataset']['ladder']||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x490ba5,_0x30b17b),confirm(_0x1ab67f(0x2ed))&&deleteMatch(_0x490ba5,_0x30b17b);});}),console['log']('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x5044a9=a2_0x34d589,_0x2282a2=document['getElementById']('matches-search')[_0x5044a9(0x2f8)]['toLowerCase'](),_0x3b5143=document['querySelectorAll']('#matches-table-body\x20tr');let _0x18fc83=0x0;_0x3b5143['forEach'](_0x13bfe6=>{const _0x2360bc=_0x5044a9;if(_0x13bfe6['classList']['contains'](_0x2360bc(0x401))||_0x13bfe6[_0x2360bc(0x431)][_0x2360bc(0x2fc)]('empty-state')||_0x13bfe6[_0x2360bc(0x431)][_0x2360bc(0x2fc)](_0x2360bc(0x2ef)))return;const _0x2601ab=_0x13bfe6['cells'][0x1]['textContent']['toLowerCase'](),_0x31c9ca=_0x13bfe6[_0x2360bc(0x378)][0x2][_0x2360bc(0x2db)]['toLowerCase'](),_0x2de5bd=_0x13bfe6['cells'][0x4]['textContent']['toLowerCase']();_0x2601ab['includes'](_0x2282a2)||_0x31c9ca['includes'](_0x2282a2)||_0x2de5bd['includes'](_0x2282a2)?(_0x13bfe6[_0x2360bc(0x3b3)]['display']='',_0x18fc83++):_0x13bfe6['style']['display']=_0x2360bc(0x2a4);});if(_0x18fc83===0x0&&_0x3b5143[_0x5044a9(0x41a)]>0x0){const _0x49f0a7=document['getElementById'](_0x5044a9(0x27b)),_0x3ca663=_0x49f0a7[_0x5044a9(0x270)]('.no-results');if(!_0x3ca663){const _0x34e0a9=document[_0x5044a9(0x291)]('tr');_0x34e0a9[_0x5044a9(0x3bc)]='no-results',_0x34e0a9['innerHTML']=_0x5044a9(0x2e1)+_0x2282a2+'\x27</td>',_0x49f0a7['appendChild'](_0x34e0a9);}}else{const _0x519820=document['querySelector']('.no-results');_0x519820&&_0x519820[_0x5044a9(0x34c)]();}}function getMatchesFilters(){const _0x5a1bb4=a2_0x34d589,_0x26b146=document['getElementById']('matches-search')['value']['toLowerCase'](),_0x411b01=document['getElementById']('matches-start-date')[_0x5a1bb4(0x2f8)],_0x666927=document['getElementById']('matches-end-date')[_0x5a1bb4(0x2f8)];let _0x354c11=null,_0x4a3f5f=null;return _0x411b01&&(_0x354c11=new Date(_0x411b01),_0x354c11['setHours'](0x0,0x0,0x0,0x0),_0x354c11=Timestamp[_0x5a1bb4(0x2dc)](_0x354c11)),_0x666927&&(_0x4a3f5f=new Date(_0x666927),_0x4a3f5f['setHours'](0x17,0x3b,0x3b,0x3e7),_0x4a3f5f=Timestamp[_0x5a1bb4(0x2dc)](_0x4a3f5f)),{'searchTerm':_0x26b146,'startDate':_0x354c11,'endDate':_0x4a3f5f};}async function applyMatchesFilters(){const _0x1df33a=a2_0x34d589,_0x5a6129=currentLadder[_0x1df33a(0x249)]();matchesPagination[_0x5a6129]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x354644=a2_0x34d589;document[_0x354644(0x204)]('matches-start-date')['value']='',document[_0x354644(0x204)]('matches-end-date')[_0x354644(0x2f8)]='',document['getElementById']('matches-search')['value']='';const _0x33b2e2=currentLadder['toLowerCase']();matchesPagination[_0x33b2e2]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x520fde,_0x1bad53){const _0xf01a3d=a2_0x34d589,_0x5cb74e=document[_0xf01a3d(0x204)]('edit-match-modal');if(!_0x5cb74e)return;try{const _0x28abe1=_0x1bad53==='D1'?'approvedMatches':_0x1bad53==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x190589=doc(db,_0x28abe1,_0x520fde),_0x5803a8=await getDoc(_0x190589);if(!_0x5803a8[_0xf01a3d(0x1f2)]()){showNotification('Match\x20not\x20found',_0xf01a3d(0x26f));return;}const _0x14d71d=_0x5803a8['data']();document[_0xf01a3d(0x204)]('edit-match-id')['value']=_0x520fde,document['getElementById']('edit-match-ladder')[_0xf01a3d(0x2f8)]=_0x1bad53,document['getElementById']('edit-match-winner')['value']=_0x14d71d['winnerUsername']||'',document[_0xf01a3d(0x204)]('edit-match-winner-score')['value']=_0x14d71d['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')[_0xf01a3d(0x2f8)]=_0x14d71d[_0xf01a3d(0x1e0)]||0x0,document[_0xf01a3d(0x204)](_0xf01a3d(0x406))['value']=_0x14d71d[_0xf01a3d(0x259)]||'',document['getElementById'](_0xf01a3d(0x1fb))['value']=_0x14d71d[_0xf01a3d(0x210)]||'',document['getElementById'](_0xf01a3d(0x295))[_0xf01a3d(0x2f8)]=_0x14d71d[_0xf01a3d(0x2b1)]||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x14d71d[_0xf01a3d(0x279)]||0x0,document['getElementById'](_0xf01a3d(0x33c))['value']=_0x14d71d[_0xf01a3d(0x3af)]||'',document[_0xf01a3d(0x204)]('edit-match-map')['value']=_0x14d71d[_0xf01a3d(0x2d7)]||'',document[_0xf01a3d(0x204)](_0xf01a3d(0x2c2))['value']=_0x14d71d['winnerDemoLink']||'',document['getElementById'](_0xf01a3d(0x387))[_0xf01a3d(0x2f8)]=_0x14d71d[_0xf01a3d(0x26b)]||_0x14d71d[_0xf01a3d(0x41b)]||'',document[_0xf01a3d(0x204)](_0xf01a3d(0x225))['textContent']='Edit\x20Match:\x20'+_0x14d71d[_0xf01a3d(0x1e1)]+_0xf01a3d(0x42b)+_0x14d71d[_0xf01a3d(0x210)],_0x5cb74e[_0xf01a3d(0x431)]['add']('active');}catch(_0x2ef651){console['error']('Error\x20loading\x20match\x20data:',_0x2ef651),showNotification('Failed\x20to\x20load\x20match\x20data',_0xf01a3d(0x26f));}}function closeEditMatchModal(){const _0x4e562f=a2_0x34d589,_0x27231f=document['getElementById'](_0x4e562f(0x1e5));_0x27231f&&_0x27231f['classList'][_0x4e562f(0x34c)](_0x4e562f(0x22c));}async function saveEditedMatch(){const _0x198039=a2_0x34d589;try{const _0x37516e=document[_0x198039(0x204)](_0x198039(0x24a))['value'],_0x46d564=document['getElementById']('edit-match-ladder')['value'];if(!_0x37516e||!_0x46d564){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error');return;}const _0x46a21b=_0x46d564==='D1'?_0x198039(0x240):_0x46d564==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x8f28c=document[_0x198039(0x204)](_0x198039(0x2bc))['value']['trim'](),_0x39547c=parseInt(document[_0x198039(0x204)](_0x198039(0x2f7))['value']),_0x43a626=parseInt(document['getElementById']('edit-match-winner-suicides')[_0x198039(0x2f8)]),_0x1354ad=document['getElementById']('edit-match-winner-comment')[_0x198039(0x2f8)][_0x198039(0x40e)](),_0xac93a2=document['getElementById']('edit-match-loser')['value']['trim'](),_0x2e0b5c=parseInt(document['getElementById']('edit-match-loser-score')['value']),_0x3c9d45=parseInt(document['getElementById']('edit-match-loser-suicides')[_0x198039(0x2f8)]),_0x24d5ec=document['getElementById']('edit-match-loser-comment')[_0x198039(0x2f8)]['trim'](),_0x133397=document['getElementById']('edit-match-map')[_0x198039(0x2f8)]['trim'](),_0x23ce37=document['getElementById'](_0x198039(0x2c2))['value']['trim'](),_0x33bde5=document[_0x198039(0x204)](_0x198039(0x387))['value']['trim']();if(!_0x8f28c||!_0xac93a2){showNotification(_0x198039(0x297),'error');return;}await updateDoc(doc(db,_0x46a21b,_0x37516e),{'winnerUsername':_0x8f28c,'winnerScore':_0x39547c,'winnerSuicides':_0x43a626,'winnerComment':_0x1354ad,'loserUsername':_0xac93a2,'loserScore':_0x2e0b5c,'loserSuicides':_0x3c9d45,'loserComment':_0x24d5ec,'mapPlayed':_0x133397,'winnerDemoLink':_0x23ce37||null,'loserDemoLink':_0x33bde5||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email'],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully','success'),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x46d564['toLowerCase']()][_0x198039(0x2ba)]);}catch(_0x1a1fb8){console['error']('Error\x20saving\x20match:',_0x1a1fb8),showNotification(_0x198039(0x282)+_0x1a1fb8[_0x198039(0x320)],_0x198039(0x26f));}}async function openDeleteMatchModal(_0x15c189,_0x1638f7){const _0x2411d1=a2_0x34d589;try{const _0x1df1b7=_0x1638f7==='D1'?'approvedMatches':_0x1638f7==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1121f8=doc(db,_0x1df1b7,_0x15c189),_0x315d24=await getDoc(_0x1121f8);if(!_0x315d24['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x57d158=_0x315d24['data'](),_0x3971d6=document['getElementById']('delete-match-confirm-modal');_0x3971d6['dataset']['matchId']=_0x15c189,_0x3971d6['dataset']['ladder']=_0x1638f7;const _0x19583f=_0x57d158['approvedAt']?new Date(_0x57d158['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x3b5e7e=document['getElementById'](_0x2411d1(0x34e));_0x3b5e7e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20'+_0x19583f+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x57d158['winnerUsername']+_0x2411d1(0x323)+_0x57d158['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x57d158['winnerScore']||0x0)+'\x20-\x20'+(_0x57d158[_0x2411d1(0x2b1)]||0x0)+_0x2411d1(0x2f9)+(_0x57d158[_0x2411d1(0x2d7)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x1638f7+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3971d6['classList']['add']('active');}catch(_0x5414b5){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x5414b5),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeDeleteMatchModal(){const _0x5b7b15=a2_0x34d589,_0x31e260=document['getElementById']('delete-match-confirm-modal');_0x31e260&&(_0x31e260['classList'][_0x5b7b15(0x34c)]('active'),_0x31e260['removeAttribute']('data-match-id'),_0x31e260[_0x5b7b15(0x2e8)](_0x5b7b15(0x283)));}async function confirmDeleteMatch(){const _0x2d973f=a2_0x34d589,_0x4e9e93=document['getElementById'](_0x2d973f(0x3f6)),_0x570a5f=_0x4e9e93['dataset']['matchId'],_0x7e9d1d=_0x4e9e93['dataset']['ladder'];if(!_0x570a5f||!_0x7e9d1d){showNotification(_0x2d973f(0x203),'error'),closeDeleteMatchModal();return;}try{const _0x11b55d=_0x7e9d1d==='D1'?_0x2d973f(0x240):_0x7e9d1d==='D2'?_0x2d973f(0x2cf):'approvedMatchesD3';await deleteDoc(doc(db,_0x11b55d,_0x570a5f)),showNotification(_0x2d973f(0x3da),'success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x7e9d1d['toLowerCase']()][_0x2d973f(0x2ba)]);}catch(_0x2a816c){console['error'](_0x2d973f(0x1fe),_0x2a816c),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x2a816c['message'],'error');}}async function saveHighlightChanges(){const _0x413873=a2_0x34d589,_0x4459f4=document[_0x413873(0x204)](_0x413873(0x3bd))['value'],_0x59d840=document['getElementById']('edit-highlight-type-select')['value'];let _0x203946={'title':document['getElementById']('edit-highlight-title-input')['value']['trim'](),'type':_0x59d840,'description':document[_0x413873(0x204)]('edit-highlight-description-input')['value']['trim'](),'videoId':document['getElementById'](_0x413873(0x3d7))['value']['trim'](),'submittedBy':auth[_0x413873(0x2ce)]['email']};if(_0x59d840==='match'){_0x203946[_0x413873(0x318)]=document['getElementById']('edit-highlight-matchInfo-input')[_0x413873(0x2f8)]['trim'](),_0x203946['map']=document[_0x413873(0x204)]('edit-highlight-map-input')[_0x413873(0x2f8)]['trim']();const _0x5c404f=document['getElementById'](_0x413873(0x2d1))[_0x413873(0x2f8)];_0x203946[_0x413873(0x1f9)]=_0x5c404f?Timestamp[_0x413873(0x2dc)](new Date(_0x5c404f)):null,_0x203946[_0x413873(0x24b)]=document[_0x413873(0x204)]('edit-highlight-winnerName-input')['value']['trim'](),_0x203946['winnerScore']=document['getElementById'](_0x413873(0x363))[_0x413873(0x2f8)][_0x413873(0x40e)](),_0x203946[_0x413873(0x322)]=document['getElementById'](_0x413873(0x3c2))['value'][_0x413873(0x40e)](),_0x203946['loserScore']=document['getElementById']('edit-highlight-loserScore-input')['value']['trim'](),_0x203946['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x203946['mapCreator']=null,_0x203946['mapVersion']=null,_0x203946[_0x413873(0x2f1)]=null,_0x203946[_0x413873(0x37d)]=null,_0x203946[_0x413873(0x2ac)]=null,_0x203946[_0x413873(0x28d)]=null,_0x203946['playerProfileUrl']=null;}else{if(_0x59d840==='creator')_0x203946['map']=document[_0x413873(0x204)]('edit-highlight-map-input')['value']['trim'](),_0x203946['mapCreator']=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x413873(0x40e)](),_0x203946['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value'][_0x413873(0x40e)](),_0x203946[_0x413873(0x2f1)]=document['getElementById'](_0x413873(0x1e6))[_0x413873(0x2f8)][_0x413873(0x40e)](),_0x203946['matchInfo']=null,_0x203946[_0x413873(0x1f9)]=null,_0x203946['winnerName']=null,_0x203946[_0x413873(0x252)]=null,_0x203946['loserName']=null,_0x203946[_0x413873(0x2b1)]=null,_0x203946['matchLink']=null,_0x203946['achievementPlayer']=null,_0x203946['achievementType']=null,_0x203946[_0x413873(0x28d)]=null,_0x203946[_0x413873(0x263)]=null;else _0x59d840==='achievement'&&(_0x203946['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')[_0x413873(0x2f8)][_0x413873(0x40e)](),_0x203946['achievementType']=document['getElementById']('edit-highlight-achievementType-input')[_0x413873(0x2f8)][_0x413873(0x40e)](),_0x203946['achievementDetails']=document[_0x413873(0x204)]('edit-highlight-achievementDetails-input')[_0x413873(0x2f8)][_0x413873(0x40e)](),_0x203946['playerProfileUrl']=document['getElementById'](_0x413873(0x2fd))[_0x413873(0x2f8)]['trim'](),_0x203946['matchInfo']=null,_0x203946['map']=null,_0x203946['matchDate']=null,_0x203946['winnerName']=null,_0x203946['winnerScore']=null,_0x203946['loserName']=null,_0x203946[_0x413873(0x2b1)]=null,_0x203946['matchLink']=null,_0x203946[_0x413873(0x371)]=null,_0x203946['mapVersion']=null,_0x203946[_0x413873(0x2f1)]=null);}try{if(_0x4459f4){_0x203946['updatedAt']=serverTimestamp();const _0x4d140f=doc(db,'highlights',_0x4459f4);await updateDoc(_0x4d140f,_0x203946),showNotification('Highlight\x20updated\x20successfully!','success');}else _0x203946[_0x413873(0x27f)]=serverTimestamp(),await addDoc(collection(db,_0x413873(0x344)),_0x203946),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0x1aa92e){console['error'](_0x413873(0x3cd),_0x1aa92e),showNotification('Error\x20saving\x20highlight:\x20'+_0x1aa92e['message'],'error');}}async function resimulateMatch(){const _0x3e76c9=a2_0x34d589;try{const _0x4f0ee5=document['getElementById']('resimulate-match-id')[_0x3e76c9(0x2f8)];if(!_0x4f0ee5){showNotification('Match\x20ID\x20is\x20required','error');return;}const _0x255bcc=auth['currentUser'];if(!_0x255bcc){showNotification(_0x3e76c9(0x1f3),'error');return;}const _0x1bb5a0=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x41b631=doc(db,_0x1bb5a0,_0x4f0ee5),_0xba2193=await getDoc(_0x41b631);if(!_0xba2193['exists']()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches',_0x3e76c9(0x26f));return;}const _0x5c0c3c=_0xba2193['data'](),_0x20804b=_0x5c0c3c[_0x3e76c9(0x32d)]?_0x5c0c3c['approvedAt'][_0x3e76c9(0x3a7)]()['toLocaleString']():_0x5c0c3c['matchDate']?_0x5c0c3c[_0x3e76c9(0x1f9)][_0x3e76c9(0x3a7)]?_0x5c0c3c['matchDate']['toDate']()[_0x3e76c9(0x2d9)]():new Date(_0x5c0c3c['matchDate'])['toLocaleString']():'Unknown',_0x42ea02=_0x3e76c9(0x2c0)+_0x5c0c3c['winnerUsername']+_0x3e76c9(0x32b)+_0x5c0c3c['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x5c0c3c['winnerScore']+'-'+_0x5c0c3c['loserScore']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x5c0c3c['mapPlayed']||_0x5c0c3c['mapName']||'Unknown')+_0x3e76c9(0x1dc)+_0x20804b+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x4f0ee5+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x3e76c9(0x204)](_0x3e76c9(0x3cc))['innerHTML']=_0x42ea02,document[_0x3e76c9(0x204)](_0x3e76c9(0x3cc))[_0x3e76c9(0x3b3)]['display']='block',document['getElementById']('confirm-resimulate-btn')['style']['display']='block',window[_0x3e76c9(0x361)]={'matchId':_0x4f0ee5,'matchData':_0x5c0c3c,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x3a9137){console['error'](_0x3e76c9(0x368),_0x3a9137),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x3a9137['message'],_0x3e76c9(0x26f));}}async function confirmResimulateMatch(){const _0x350b6a=a2_0x34d589;try{const {matchId:_0x9a89ef,matchData:_0x4aea67,ladder:_0x5ed19b}=window['pendingResimulateData'];if(!_0x9a89ef||!_0x4aea67){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation',_0x350b6a(0x26f));return;}const _0x3b3413=_0x5ed19b==='D1'?_0x350b6a(0x3f9):_0x5ed19b==='D2'?'playersD2':'playersD3',_0xfa614f=_0x5ed19b==='D1'?_0x350b6a(0x321):_0x5ed19b==='D2'?'eloHistoryD2':'eloHistoryD3',[_0x4c188f,_0x206084]=await Promise['all']([getDocs(query(collection(db,_0x3b3413),where(_0x350b6a(0x30a),'==',_0x4aea67['winnerUsername']))),getDocs(query(collection(db,_0x3b3413),where(_0x350b6a(0x30a),'==',_0x4aea67['loserUsername'])))]);if(_0x4c188f['empty']||_0x206084['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x335ce3=_0x4c188f[_0x350b6a(0x21d)][0x0]['id'],_0x5785af=_0x206084['docs'][0x0]['id'],_0x13cc96=_0x4c188f['docs'][0x0]['data'](),_0x3caf7d=_0x206084['docs'][0x0]['data'](),[_0x15e2d4,_0x338cf6]=await Promise[_0x350b6a(0x3bb)]([getDocs(query(collection(db,_0xfa614f),where('playerId','==',_0x335ce3),where('matchId','==',_0x9a89ef))),getDocs(query(collection(db,_0xfa614f),where(_0x350b6a(0x2d8),'==',_0x5785af),where('matchId','==',_0x9a89ef)))]),_0x4b29e4=!_0x15e2d4[_0x350b6a(0x3e8)],_0x27fbaa=!_0x338cf6['empty'],_0x485f85='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x4b29e4?'✅\x20Exists':'❌\x20Missing')+_0x350b6a(0x314)+(_0x27fbaa?'✅\x20Exists':'❌\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0x13cc96['eloRating']||_0x350b6a(0x28e))+_0x350b6a(0x2ab)+(_0x3caf7d[_0x350b6a(0x23b)]||'Unknown')+_0x350b6a(0x3f1)+(_0x13cc96['position']||_0x350b6a(0x28e))+_0x350b6a(0x254)+(_0x3caf7d['position']||_0x350b6a(0x28e))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>⚠️\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById'](_0x350b6a(0x1e3))['innerHTML']=_0x485f85,document['getElementById'](_0x350b6a(0x1e3))['style'][_0x350b6a(0x232)]='block';if(_0x4b29e4&&_0x27fbaa){showNotification(_0x350b6a(0x2fb),'warning');return;}showNotification(_0x350b6a(0x3c5),'info');const _0x3537c3=_0x4aea67[_0x350b6a(0x32d)]||_0x4aea67['matchDate']||serverTimestamp(),[_0x321220,_0x5b1969]=await Promise['all']([getPlayerEloAtTime(_0x335ce3,_0x3537c3,_0xfa614f),getPlayerEloAtTime(_0x5785af,_0x3537c3,_0xfa614f)]),{calculateElo:_0x6f9d32}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x354137,newLoserRating:_0x4b1b44}=_0x6f9d32(_0x321220,_0x5b1969),_0x23829d=_0x13cc96['position']||Number[_0x350b6a(0x42d)],_0x373026=_0x3caf7d['position']||Number['MAX_SAFE_INTEGER'];let _0x2200af=_0x23829d,_0x592f91=_0x373026;_0x23829d>_0x373026&&(_0x2200af=_0x373026,_0x592f91=_0x373026+0x1);const _0x530d26=writeBatch(db),_0x23a509=doc(db,_0x3b3413,_0x335ce3);_0x530d26['update'](_0x23a509,{'eloRating':_0x354137,'position':_0x2200af,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x350b6a(0x288)]});const _0x40ea00=doc(db,_0x3b3413,_0x5785af);_0x530d26[_0x350b6a(0x219)](_0x40ea00,{'eloRating':_0x4b1b44,'position':_0x592f91,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0x23829d>_0x373026){const _0x5c8952=await getDocs(query(collection(db,_0x3b3413),where('position','>',_0x373026),where(_0x350b6a(0x298),'<',_0x23829d)));_0x5c8952['forEach'](_0x301705=>{const _0x3879f2=_0x350b6a,_0x3e5ff9=doc(db,_0x3b3413,_0x301705['id']),_0xbe4091=_0x301705[_0x3879f2(0x21c)]()[_0x3879f2(0x298)];_0x530d26['update'](_0x3e5ff9,{'position':_0xbe4091+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x3879f2(0x304),'positionAdjustedAt':serverTimestamp()});});}if(!_0x4b29e4){const _0x38a9c0=doc(collection(db,_0xfa614f));_0x530d26['set'](_0x38a9c0,{'playerId':_0x335ce3,'player':_0x4aea67['winnerUsername'],'previousElo':_0x321220,'newElo':_0x354137,'eloChange':_0x354137-_0x321220,'opponentId':_0x5785af,'opponent':_0x4aea67[_0x350b6a(0x210)],'matchResult':'win','previousPosition':_0x23829d,'newPosition':_0x2200af,'positionChange':_0x2200af-_0x23829d,'matchId':_0x9a89ef,'timestamp':_0x3537c3,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0x350b6a(0x288)],'gameMode':_0x5ed19b,'matchScore':_0x4aea67['winnerScore']+'-'+_0x4aea67['loserScore'],'mapPlayed':_0x4aea67[_0x350b6a(0x2d7)]||_0x4aea67[_0x350b6a(0x209)]||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x27fbaa){const _0x33f410=doc(collection(db,_0xfa614f));_0x530d26['set'](_0x33f410,{'playerId':_0x5785af,'player':_0x4aea67[_0x350b6a(0x210)],'previousElo':_0x5b1969,'newElo':_0x4b1b44,'eloChange':_0x4b1b44-_0x5b1969,'opponentId':_0x335ce3,'opponent':_0x4aea67['winnerUsername'],'matchResult':'loss','previousPosition':_0x373026,'newPosition':_0x592f91,'positionChange':_0x592f91-_0x373026,'matchId':_0x9a89ef,'timestamp':_0x3537c3,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x5ed19b,'matchScore':_0x4aea67[_0x350b6a(0x252)]+'-'+_0x4aea67['loserScore'],'mapPlayed':_0x4aea67['mapPlayed']||_0x4aea67['mapName']||_0x350b6a(0x28e),'note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x281d70=_0x5ed19b==='D1'?_0x350b6a(0x240):_0x5ed19b==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x48974a=doc(db,_0x281d70,_0x9a89ef);_0x530d26[_0x350b6a(0x219)](_0x48974a,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0x13cc96[_0x350b6a(0x23b)],'originalLoserElo':_0x3caf7d[_0x350b6a(0x23b)],'originalWinnerPosition':_0x23829d,'originalLoserPosition':_0x373026,'resimulatedWinnerElo':_0x354137,'resimulatedLoserElo':_0x4b1b44,'resimulatedWinnerPosition':_0x2200af,'resimulatedLoserPosition':_0x592f91}),await _0x530d26['commit']();const _0x388d27=(!_0x4b29e4?0x1:0x0)+(!_0x27fbaa?0x1:0x0),_0x2e76fc=_0x23829d!==_0x2200af||_0x373026!==_0x592f91;showNotification(_0x350b6a(0x305)+(_0x350b6a(0x3a2)+_0x388d27+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x321220+'→'+_0x354137+'\x20(+'+(_0x354137-_0x321220)+'),\x20')+('Loser\x20'+_0x5b1969+'→'+_0x4b1b44+'\x20('+(_0x4b1b44-_0x5b1969)+_0x350b6a(0x2bd))+(''+(_0x2e76fc?_0x350b6a(0x438)+_0x23829d+'→'+_0x2200af+',\x20Loser\x20'+_0x373026+'→'+_0x592f91:_0x350b6a(0x3ae))),_0x350b6a(0x379)),closeResimulateModal(),document['querySelector'](_0x350b6a(0x332))&&loadPlayersData();}catch(_0x25bfd5){console[_0x350b6a(0x26f)]('Error\x20resimulating\x20match:',_0x25bfd5),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x25bfd5['message'],'error');}}async function getPlayerEloAtTime(_0x397d45,_0x13cf08,_0x36a64a){const _0x56e5f9=a2_0x34d589;try{const _0x14755c=_0x13cf08['toDate']?_0x13cf08['toDate']():new Date(_0x13cf08),_0x113107=query(collection(db,_0x36a64a),where('playerId','==',_0x397d45),where('timestamp','<',_0x13cf08),orderBy(_0x56e5f9(0x3ad),'desc'),limit(0x1)),_0x3afd86=await getDocs(_0x113107);if(!_0x3afd86['empty']){const _0xd407d4=_0x3afd86['docs'][0x0]['data']();return console['log']('Found\x20ELO\x20history\x20for\x20player\x20'+_0x397d45+'\x20before\x20match:\x20'+_0xd407d4[_0x56e5f9(0x3d1)]),_0xd407d4['newElo'];}else return console['log'](_0x56e5f9(0x267)+_0x397d45+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x121389){return console[_0x56e5f9(0x26f)]('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x397d45+':',_0x121389),0x4b0;}}function openResimulateModal(){const _0x795b34=a2_0x34d589;console['log']('openResimulateModal\x20called!');const _0xfd6dfc=document[_0x795b34(0x204)]('resimulate-modal');console['log']('Modal\x20element\x20found:',_0xfd6dfc);if(!_0xfd6dfc){console['error'](_0x795b34(0x36c));return;}_0xfd6dfc[_0x795b34(0x3b3)]['display']='block',_0xfd6dfc[_0x795b34(0x3b3)]['visibility']=_0x795b34(0x2ca),_0xfd6dfc[_0x795b34(0x3b3)]['opacity']='1',_0xfd6dfc[_0x795b34(0x431)]['add']('active'),console['log'](_0x795b34(0x23e)),console['log']('Modal\x20computed\x20styles:',window['getComputedStyle'](_0xfd6dfc)[_0x795b34(0x232)]);const _0x1a7b97=document[_0x795b34(0x204)]('match-details-container'),_0x5a1a20=document['getElementById'](_0x795b34(0x1e3)),_0x1fa089=document['getElementById']('confirm-resimulate-btn'),_0x1bd01f=document['getElementById']('resimulate-match-id');if(_0x1a7b97)_0x1a7b97[_0x795b34(0x214)]='';if(_0x5a1a20)_0x5a1a20[_0x795b34(0x214)]='';if(_0x1fa089)_0x1fa089['style']['display']=_0x795b34(0x2a4);if(_0x1bd01f)_0x1bd01f['value']='';console['log']('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x33dd99=a2_0x34d589;document['getElementById']('resimulate-modal')[_0x33dd99(0x3b3)]['display']=_0x33dd99(0x2a4),window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window[a2_0x34d589(0x333)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a2_0x34d589(0x3d8)]=closeResimulateModal;async function loadPointsData(){const _0x796f17=a2_0x34d589;console[_0x796f17(0x3f7)](_0x796f17(0x3a9));try{await Promise[_0x796f17(0x3bb)]([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x7c5879){console['error']('Error\x20loading\x20points\x20data:',_0x7c5879),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x7c5879['message'],_0x796f17(0x26f));}}function renderPointsOverview(_0x3dcc8c){const _0x46a32e=a2_0x34d589,_0xc85b46=document['getElementById']('points-overview-table-body');if(!_0xc85b46)return;if(_0x3dcc8c['length']===0x0){_0xc85b46[_0x46a32e(0x214)]=_0x46a32e(0x2b5);return;}_0xc85b46['innerHTML']='',_0x3dcc8c[_0x46a32e(0x202)](_0xb61f57=>{const _0x150af2=_0x46a32e,_0xbd4c6d=document['createElement']('tr'),_0x24b42e=_0xb61f57['displayName']||_0xb61f57['username']||'Unknown\x20User',_0x218340=_0xb61f57['email']||'No\x20email',_0x1a0f45=_0xb61f57[_0x150af2(0x299)]||0x0,_0xaef2c7=_0xb61f57[_0x150af2(0x21b)]?new Date(_0xb61f57[_0x150af2(0x21b)][_0x150af2(0x247)]*0x3e8)['toLocaleDateString']():'Never';_0xbd4c6d[_0x150af2(0x214)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x24b42e+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x218340+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x1a0f45>0x3e8?_0x150af2(0x30f):_0x1a0f45>0x1f4?'medium-points':'low-points')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x1a0f45['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xaef2c7+_0x150af2(0x413)+_0xb61f57['id']+_0x150af2(0x405)+_0xb61f57['id']+_0x150af2(0x2e5),_0xc85b46[_0x150af2(0x248)](_0xbd4c6d);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x3ec42f=a2_0x34d589;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x4bab4d=document['querySelectorAll']('.quick-edit-btn');console['log'](_0x3ec42f(0x1df)+_0x4bab4d['length']+_0x3ec42f(0x29a)),_0x4bab4d['forEach'](_0x4ba95b=>{const _0x540531=_0x4ba95b['cloneNode'](!![]);_0x4ba95b['parentNode']['replaceChild'](_0x540531,_0x4ba95b);});const _0x2c1339=document['querySelectorAll']('.view-history-btn');console['log']('Found\x20'+_0x2c1339['length']+_0x3ec42f(0x28c)),_0x2c1339[_0x3ec42f(0x202)](_0x6a85e9=>{const _0x12e897=_0x3ec42f,_0x55a418=_0x6a85e9['cloneNode'](!![]);_0x6a85e9['parentNode'][_0x12e897(0x2d5)](_0x55a418,_0x6a85e9);}),document['querySelectorAll']('.quick-edit-btn')[_0x3ec42f(0x202)](_0x2c0dbc=>{const _0x44756d=_0x3ec42f;_0x2c0dbc['addEventListener'](_0x44756d(0x22e),function(_0x143f21){const _0x1524f1=_0x44756d;_0x143f21['preventDefault'](),_0x143f21['stopPropagation']();const _0x250aae=this['dataset']['userId'];console['log'](_0x1524f1(0x20a),_0x250aae);if(!_0x250aae){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this['style']['opacity']='0.6',setTimeout(()=>{const _0x351c4a=_0x1524f1;this[_0x351c4a(0x3b3)]['opacity']='1';},0xc8),openQuickEditModal(_0x250aae);});}),document[_0x3ec42f(0x41f)]('.view-history-btn')[_0x3ec42f(0x202)](_0x4d9cd3=>{_0x4d9cd3['addEventListener']('click',function(_0x241fb4){const _0x5caa7c=a2_0x1797;_0x241fb4[_0x5caa7c(0x38a)](),_0x241fb4['stopPropagation']();const _0x5ea757=this['dataset']['userId'];console['log'](_0x5caa7c(0x394),_0x5ea757);if(!_0x5ea757){console[_0x5caa7c(0x26f)](_0x5caa7c(0x310));return;}this['style']['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x5ea757);});}),console['log'](_0x3ec42f(0x3b5));}async function openQuickEditModal(_0x4aa5db){const _0x4c4d17=a2_0x34d589;console[_0x4c4d17(0x3f7)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x4aa5db);const _0x3707fc=document['getElementById']('quick-edit-points-modal');if(!_0x3707fc){console[_0x4c4d17(0x26f)](_0x4c4d17(0x319)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page',_0x4c4d17(0x26f));return;}try{showNotification('Loading\x20user\x20data...',_0x4c4d17(0x400));const _0x1dc455=doc(db,'userProfiles',_0x4aa5db),_0x4f7f7f=await getDoc(_0x1dc455);if(!_0x4f7f7f['exists']()){showNotification('User\x20not\x20found',_0x4c4d17(0x26f));return;}const _0x44345b=_0x4f7f7f['data']();console['log']('User\x20data\x20loaded:',_0x44345b);const _0x172dd7=document['getElementById']('quick-edit-user-id'),_0x5f1590=document['getElementById']('quick-edit-display-name'),_0x147d9b=document['getElementById']('quick-edit-email'),_0x5a770b=document[_0x4c4d17(0x204)]('quick-edit-current-points'),_0xe6feaf=document['getElementById']('quick-edit-points-form');if(!_0x172dd7||!_0x5f1590||!_0x147d9b||!_0x5a770b||!_0xe6feaf){console['error'](_0x4c4d17(0x30b)),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x172dd7['value']=_0x4aa5db,_0x5f1590['textContent']=_0x44345b[_0x4c4d17(0x2b2)]||_0x44345b['username']||_0x4c4d17(0x38d),_0x147d9b['textContent']=_0x44345b[_0x4c4d17(0x3d6)]||'No\x20email',_0x5a770b[_0x4c4d17(0x2db)]=(_0x44345b[_0x4c4d17(0x299)]||0x0)['toLocaleString'](),_0xe6feaf['reset']();const _0x5d9f20=document['getElementById']('quick-add');_0x5d9f20&&(_0x5d9f20['checked']=!![]);_0x3707fc['classList'][_0x4c4d17(0x280)]('active'),console['log']('Modal\x20opened\x20successfully');const _0xd0052=document['getElementById']('quick-points-amount');_0xd0052&&setTimeout(()=>_0xd0052[_0x4c4d17(0x443)](),0x64);}catch(_0x1b18d7){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x1b18d7),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x1b18d7['message'],'error');}}function closeQuickEditModal(){const _0x11d335=a2_0x34d589,_0x1b2aae=document[_0x11d335(0x204)]('quick-edit-points-modal');_0x1b2aae&&_0x1b2aae[_0x11d335(0x431)][_0x11d335(0x34c)](_0x11d335(0x22c));}async function handleQuickEditPoints(_0x253a76){const _0x5cbf43=a2_0x34d589;_0x253a76['preventDefault']();const _0x4909d7=document[_0x5cbf43(0x204)]('quick-edit-user-id')['value'],_0x1add40=document[_0x5cbf43(0x270)](_0x5cbf43(0x231))['value'],_0x2cd00a=parseInt(document['getElementById']('quick-points-amount')['value']),_0x320168=document['getElementById'](_0x5cbf43(0x3b7))['value']['trim']();console[_0x5cbf43(0x3f7)](_0x5cbf43(0x316),{'userId':_0x4909d7,'action':_0x1add40,'amount':_0x2cd00a,'reason':_0x320168});if(!_0x4909d7||!_0x2cd00a||_0x2cd00a<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x4909d7,_0x1add40,_0x2cd00a,_0x320168),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x5cbf43(0x379)),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x4909d7);}catch(_0x43f5a2){console['error']('Error\x20updating\x20points:',_0x43f5a2),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x43f5a2['message'],'error');}}async function searchUsersForPoints(){const _0x396d3f=a2_0x34d589,_0x5043fa=document['getElementById'](_0x396d3f(0x34a))[_0x396d3f(0x2f8)][_0x396d3f(0x40e)]()[_0x396d3f(0x249)](),_0x233271=document[_0x396d3f(0x204)]('user-search-results');if(!_0x5043fa||_0x5043fa[_0x396d3f(0x41a)]<0x2){_0x233271['innerHTML']='';return;}_0x233271['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x286ffe=collection(db,'userProfiles'),_0x59e01a=await getDocs(_0x286ffe),_0x20db5b=[];_0x59e01a[_0x396d3f(0x202)](_0x44851f=>{const _0x181ae0=_0x396d3f,_0x5a78c6=_0x44851f['data'](),_0x3d61a4=(_0x5a78c6['displayName']||_0x5a78c6['username']||'')['toLowerCase'](),_0xdcb46f=(_0x5a78c6['email']||'')[_0x181ae0(0x249)]();(_0x3d61a4[_0x181ae0(0x2ae)](_0x5043fa)||_0xdcb46f['includes'](_0x5043fa))&&_0x20db5b['push']({'id':_0x44851f['id'],..._0x5a78c6});});if(_0x20db5b['length']===0x0){_0x233271['innerHTML']='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x233271['innerHTML']='',_0x20db5b['forEach'](_0x53d58b=>{const _0x54f9d7=_0x396d3f,_0x2b2be9=document['createElement']('div');_0x2b2be9[_0x54f9d7(0x3bc)]=_0x54f9d7(0x331),_0x2b2be9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x53d58b[_0x54f9d7(0x2b2)]||_0x53d58b['username']||'Unknown')+_0x54f9d7(0x36e)+(_0x53d58b['email']||_0x54f9d7(0x229))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x53d58b['points']||0x0)['toLocaleString']()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x2b2be9['addEventListener'](_0x54f9d7(0x22e),()=>selectUserForPoints(_0x53d58b)),_0x233271[_0x54f9d7(0x248)](_0x2b2be9);});}catch(_0x350bb7){console['error']('Error\x20searching\x20users:',_0x350bb7),_0x233271[_0x396d3f(0x214)]=_0x396d3f(0x393);}}function selectUserForPoints(_0x2fe02d){const _0x4bc240=a2_0x34d589;document['getElementById']('selected-user-name')[_0x4bc240(0x2db)]=_0x2fe02d['displayName']||_0x2fe02d[_0x4bc240(0x30a)]||'Unknown\x20User',document[_0x4bc240(0x204)]('selected-user-points')['textContent']=(_0x2fe02d['points']||0x0)[_0x4bc240(0x2d9)](),document['getElementById'](_0x4bc240(0x21e))['value']=_0x2fe02d['id'],document['getElementById']('selected-user-info')['style'][_0x4bc240(0x232)]=_0x4bc240(0x432),document['getElementById'](_0x4bc240(0x37f))['style'][_0x4bc240(0x232)]='block',document[_0x4bc240(0x204)]('user-search-results')[_0x4bc240(0x214)]='',document['getElementById'](_0x4bc240(0x34a))['value']='';}async function handleModifyPoints(_0x1887eb){const _0x307930=a2_0x34d589;_0x1887eb['preventDefault']();const _0x3829f3=document['getElementById']('selected-user-id')[_0x307930(0x2f8)],_0x579952=document['getElementById'](_0x307930(0x24d))['value'],_0x2d2fb8=parseInt(document['getElementById']('points-amount')['value']),_0x2950c2=document['getElementById']('points-reason')['value'][_0x307930(0x40e)]();if(!_0x3829f3||!_0x2d2fb8||_0x2d2fb8<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x3829f3,_0x579952,_0x2d2fb8,_0x2950c2),document['getElementById']('modify-points-form')['reset']();const _0x2825d4=doc(db,'userProfiles',_0x3829f3),_0xc4e6cc=await getDoc(_0x2825d4);if(_0xc4e6cc['exists']()){const _0x1d930d=_0xc4e6cc['data']();document['getElementById']('selected-user-points')['textContent']=(_0x1d930d[_0x307930(0x299)]||0x0)['toLocaleString']();}showNotification(_0x307930(0x3fd),'success'),loadPointsHistory();}catch(_0x5ed4d3){console['error']('Error\x20modifying\x20points:',_0x5ed4d3),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x5ed4d3['message'],'error');}}async function loadPointsHistory(){const _0x198643=a2_0x34d589,_0x3df26=document['getElementById'](_0x198643(0x2e7));if(!_0x3df26)return;_0x3df26[_0x198643(0x214)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x393e54=collection(db,'pointsHistory'),_0x24826a=query(_0x393e54,orderBy(_0x198643(0x3ad),_0x198643(0x269)),limit(0x32)),_0x36c605=await getDocs(_0x24826a);if(_0x36c605[_0x198643(0x3e8)]){_0x3df26[_0x198643(0x214)]='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x3df26[_0x198643(0x214)]='',_0x36c605['forEach'](_0x12e54d=>{const _0x2ab7bc=_0x198643,_0x5152ce=_0x12e54d['data'](),_0x5f2b3c=document['createElement']('tr'),_0xf19699=_0x5152ce['timestamp']?new Date(_0x5152ce[_0x2ab7bc(0x3ad)]['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x3b9464='';switch(_0x5152ce[_0x2ab7bc(0x22f)]){case'add':_0x3b9464='Added\x20'+_0x5152ce['amount']+'\x20points';break;case'subtract':_0x3b9464=_0x2ab7bc(0x444)+_0x5152ce['amount']+'\x20points';break;case'set':_0x3b9464='Set\x20to\x20'+_0x5152ce['amount']+'\x20points';break;default:_0x3b9464=_0x5152ce[_0x2ab7bc(0x22f)]+'\x20'+_0x5152ce['amount']+_0x2ab7bc(0x205);}_0x5f2b3c[_0x2ab7bc(0x214)]=_0x2ab7bc(0x224)+_0xf19699+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5152ce['displayName']||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b9464+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x5152ce[_0x2ab7bc(0x22f)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5152ce[_0x2ab7bc(0x3e7)]||0x0)+'\x20→\x20'+(_0x5152ce['newPoints']||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5152ce[_0x2ab7bc(0x2f4)]||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5152ce['adminEmail']||'Unknown\x20Admin')+_0x2ab7bc(0x268),_0x3df26['appendChild'](_0x5f2b3c);});}catch(_0x5d9cb5){console['error']('Error\x20loading\x20points\x20history:',_0x5d9cb5),_0x3df26['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x5d9cb5[_0x198643(0x320)]+'</td></tr>';}}function filterPointsOverview(){const _0x1232d8=a2_0x34d589,_0x8046d5=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x2229a5=window['allUsersPoints'][_0x1232d8(0x403)](_0x1dad61=>{const _0x2a2a8b=(_0x1dad61['displayName']||_0x1dad61['username']||'')['toLowerCase'](),_0x52ff36=(_0x1dad61['email']||'')['toLowerCase']();return _0x2a2a8b['includes'](_0x8046d5)||_0x52ff36['includes'](_0x8046d5);});renderPointsOverview(_0x2229a5);}function sortPointsOverview(){const _0x2b8c93=a2_0x34d589,_0x3ab8ed=document[_0x2b8c93(0x204)]('points-sort-order')['value'];if(!window['allUsersPoints'])return;const _0x49f84f=[...window[_0x2b8c93(0x26e)]];switch(_0x3ab8ed){case'points-desc':_0x49f84f[_0x2b8c93(0x3ca)]((_0xab56e5,_0x1181eb)=>(_0x1181eb['points']||0x0)-(_0xab56e5[_0x2b8c93(0x299)]||0x0));break;case'points-asc':_0x49f84f[_0x2b8c93(0x3ca)]((_0x3bd7a7,_0x2af2d0)=>(_0x3bd7a7['points']||0x0)-(_0x2af2d0[_0x2b8c93(0x299)]||0x0));break;case'name-asc':_0x49f84f['sort']((_0x6da8c6,_0x27a206)=>{const _0x543e5f=_0x2b8c93,_0xddadf2=(_0x6da8c6['displayName']||_0x6da8c6[_0x543e5f(0x30a)]||'')['toLowerCase'](),_0x58e10f=(_0x27a206['displayName']||_0x27a206['username']||'')['toLowerCase']();return _0xddadf2['localeCompare'](_0x58e10f);});break;case _0x2b8c93(0x435):_0x49f84f[_0x2b8c93(0x3ca)]((_0x5db267,_0x372389)=>{const _0x1b7a4c=_0x2b8c93,_0x3d0669=(_0x5db267[_0x1b7a4c(0x2b2)]||_0x5db267['username']||'')['toLowerCase'](),_0x110cb7=(_0x372389[_0x1b7a4c(0x2b2)]||_0x372389[_0x1b7a4c(0x30a)]||'')['toLowerCase']();return _0x110cb7['localeCompare'](_0x3d0669);});break;}renderPointsOverview(_0x49f84f);}async function handleAwardItem(_0x50a9ad){const _0x426f56=a2_0x34d589;_0x50a9ad[_0x426f56(0x38a)]();const _0x313c96=document['getElementById']('selected-user-id')['value'],_0x565492=document[_0x426f56(0x204)]('store-item-select')['value'],_0x25edaa=document['getElementById']('award-reason')[_0x426f56(0x2f8)][_0x426f56(0x40e)]();if(!_0x313c96||!_0x565492){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification(_0x426f56(0x3ba),_0x426f56(0x379)),document['getElementById']('award-item-form')['reset']();}catch(_0x2bd12e){console[_0x426f56(0x26f)]('Error\x20awarding\x20item:',_0x2bd12e),showNotification(_0x426f56(0x236)+_0x2bd12e['message'],'error');}}async function loadUserPointsHistory(_0x3861ff){const _0xf8ffbe=a2_0x34d589;try{const _0x45e644=collection(db,_0xf8ffbe(0x37b)),_0x14df0d=query(_0x45e644,where('userId','==',_0x3861ff),orderBy('timestamp',_0xf8ffbe(0x269))),_0x40658e=await getDocs(_0x14df0d);console['log']('Found\x20'+_0x40658e['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x3861ff),showNotification(_0xf8ffbe(0x33d)+_0x40658e['size']+'\x20points\x20history\x20entries','info');}catch(_0x39cdb6){console['error'](_0xf8ffbe(0x2f3),_0x39cdb6),showNotification(_0xf8ffbe(0x447),'error');}}async function initializeUserPointsField(){const _0x12f4ac=a2_0x34d589;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x19e22d=collection(db,'userProfiles'),_0x978163=await getDocs(_0x19e22d);if(_0x978163['empty']){console['log'](_0x12f4ac(0x261));return;}let _0x2880ac=0x0,_0x4acb7a=0x0;const _0x573bf0=writeBatch(db);let _0x2f1802=0x0;return console[_0x12f4ac(0x3f7)](_0x12f4ac(0x1df)+_0x978163[_0x12f4ac(0x339)]+'\x20users\x20to\x20check...'),_0x978163['forEach'](_0x29cc32=>{const _0x10f354=_0x12f4ac,_0x694fd6=_0x29cc32['data']();_0x694fd6[_0x10f354(0x299)]===undefined||_0x694fd6['points']===null?(_0x573bf0[_0x10f354(0x219)](_0x29cc32['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x2880ac++,_0x2f1802++,console[_0x10f354(0x3f7)]('Queued\x20'+(_0x694fd6[_0x10f354(0x2b2)]||_0x694fd6['username']||_0x694fd6[_0x10f354(0x3d6)]||'Unknown')+_0x10f354(0x32c))):(_0x4acb7a++,console['log']((_0x694fd6['displayName']||_0x694fd6['username']||_0x694fd6[_0x10f354(0x3d6)]||_0x10f354(0x28e))+_0x10f354(0x350)+_0x694fd6[_0x10f354(0x299)])),_0x2f1802>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x2880ac>0x0?(console['log']('Committing\x20batch\x20update\x20for\x20'+_0x2880ac+'\x20users...'),await _0x573bf0[_0x12f4ac(0x212)](),console['log'](_0x12f4ac(0x2c3)+_0x2880ac+_0x12f4ac(0x30c))):console[_0x12f4ac(0x3f7)]('No\x20users\x20needed\x20points\x20field\x20initialization'),console[_0x12f4ac(0x3f7)](_0x12f4ac(0x427)+_0x978163[_0x12f4ac(0x339)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x2880ac+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20'+_0x4acb7a),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x2880ac+'\x20users.\x20'+_0x4acb7a+'\x20users\x20already\x20had\x20points.',_0x12f4ac(0x379)),window['allUsersPoints']&&loadPointsOverview(),{'totalUsers':_0x978163[_0x12f4ac(0x339)],'usersUpdated':_0x2880ac,'usersAlreadyHadPoints':_0x4acb7a};}catch(_0x4b1a32){console['error']('Error\x20initializing\x20points\x20field:',_0x4b1a32),showNotification(_0x12f4ac(0x3b1)+_0x4b1a32['message'],_0x12f4ac(0x26f));throw _0x4b1a32;}}function addPointsMigrationButton(){const _0x1be2ee=a2_0x34d589,_0x132cc7=document[_0x1be2ee(0x204)]('manage-points');if(!_0x132cc7)return;if(document['getElementById']('migrate-points-btn'))return;const _0x45b461=document['createElement'](_0x1be2ee(0x39e));_0x45b461['className']='migration-section',_0x45b461['style'][_0x1be2ee(0x20f)]='20px',_0x45b461['style']['padding']='15px',_0x45b461['style']['backgroundColor']=_0x1be2ee(0x302),_0x45b461['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x45b461[_0x1be2ee(0x3b3)][_0x1be2ee(0x36f)]=_0x1be2ee(0x271),_0x45b461['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x271f3a=_0x132cc7[_0x1be2ee(0x270)]('.section-header');_0x271f3a&&_0x271f3a[_0x1be2ee(0x250)]('afterend',_0x45b461),document[_0x1be2ee(0x204)]('migrate-points-btn')[_0x1be2ee(0x421)]('click',async function(){const _0x497a49=_0x1be2ee;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this[_0x497a49(0x214)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0x497a49(0x3ed),this['style']['backgroundColor']=_0x497a49(0x2dd),setTimeout(()=>{_0x45b461['style']['display']='none';},0xbb8);}catch(_0x5a5ebb){this[_0x497a49(0x214)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0xf21988=a2_0x34d589;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x4585a5=document['getElementById'](_0xf21988(0x34a));_0x4585a5&&_0x4585a5['addEventListener'](_0xf21988(0x448),debounce(searchUsersForPoints,0x12c));const _0x284faa=document['getElementById']('modify-points-form');_0x284faa&&_0x284faa['addEventListener'](_0xf21988(0x3e3),handleModifyPoints);const _0x7f2de6=document[_0xf21988(0x204)]('award-item-form');_0x7f2de6&&_0x7f2de6['addEventListener']('submit',handleAwardItem);const _0x329624=document['getElementById'](_0xf21988(0x3ec));_0x329624&&_0x329624['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x3228dc=document['getElementById']('points-sort-order');_0x3228dc&&_0x3228dc['addEventListener']('change',sortPointsOverview);const _0x297639=document['getElementById']('refresh-points-overview');_0x297639&&_0x297639['addEventListener']('click',loadPointsOverview);const _0x4d7f89=document['getElementById']('bulk-award-points-btn');_0x4d7f89&&_0x4d7f89['addEventListener'](_0xf21988(0x22e),async()=>{const _0x87846b=_0xf21988;confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x4d7f89[_0x87846b(0x296)]=!![],_0x4d7f89[_0x87846b(0x214)]=_0x87846b(0x31e),await _0xc44d11(),_0x4d7f89['disabled']=![],_0x4d7f89[_0x87846b(0x214)]='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x3afa39=document[_0xf21988(0x204)](_0xf21988(0x2a0));_0x3afa39&&_0x3afa39['addEventListener']('click',awardPointsToAllPilots);async function _0xc44d11(){const _0x392e0e=_0xf21988;try{showNotification(_0x392e0e(0x2eb),'info');const _0x59a052={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'≥6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0xb60cac=0x0,_0x384d1f=0x0,_0x5c3ad1=0x0,_0x22990c=0x0,_0x403b58=0x0,_0x324dcf=0x0;const _0x2d7d51=new Set(),_0x1ade86=collection(db,'pointsHistory'),_0x509453=query(_0x1ade86,where('reason','>=','Bulk\x20award:'),where('reason','<=','Bulk\x20award:')),_0x41fb31=await getDocs(_0x509453);_0x41fb31[_0x392e0e(0x202)](_0x2c9ce0=>{const _0x19c2c4=_0x392e0e,_0x42bba7=_0x2c9ce0[_0x19c2c4(0x21c)](),_0x4e089c=_0x42bba7[_0x19c2c4(0x2f4)]||'',_0x4200f8=_0x4e089c[_0x19c2c4(0x2b3)](/Match ID: ([a-zA-Z0-9]+)/);_0x4200f8&&_0x4200f8[0x1]&&_0x2d7d51['add'](_0x4200f8[0x1]);}),console[_0x392e0e(0x3f7)]('Found\x20'+_0x2d7d51[_0x392e0e(0x339)]+'\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded');const [_0x530a6a,_0x4dd81b,_0x8d7572]=await Promise['all']([getDocs(collection(db,'approvedMatches')),getDocs(collection(db,_0x392e0e(0x2cf))),getDocs(collection(db,'approvedMatchesD3'))]),_0x3271e9=_0x530a6a['size']+_0x4dd81b['size']+_0x8d7572['size'];showNotification(_0x392e0e(0x1df)+_0x3271e9+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x560287=async(_0x25b090,_0xb04354)=>{const _0x4656be=_0x392e0e;let _0x4c6e19=writeBatch(db);const _0x393e40=[];let _0x171656=0x0;for(const _0x242a55 of _0x25b090['docs']){try{if(_0x2d7d51['has'](_0x242a55['id'])){if(_0xb04354==='D1')_0x324dcf++;if(_0xb04354==='D2')_0x324dcf++;if(_0xb04354==='D3')_0x324dcf++;continue;}const _0x48daca=_0x242a55[_0x4656be(0x21c)](),_0x5181e3=_0x48daca['subgameType']||_0x4656be(0x2cc),_0x4115ac=_0x59a052[_0x5181e3]||0xa;let _0x1af8f0=_0x48daca['winnerId'];if(!_0x1af8f0&&_0x48daca['winnerUsername']){const [_0x40c8da,_0x5e63f0,_0xa9921]=await Promise['all']([getDocs(query(collection(db,_0x4656be(0x3f9)),where('username','==',_0x48daca[_0x4656be(0x1e1)]))),getDocs(query(collection(db,_0x4656be(0x306)),where('username','==',_0x48daca[_0x4656be(0x1e1)]))),getDocs(query(collection(db,_0x4656be(0x3d4)),where('username','==',_0x48daca['winnerUsername'])))]);if(!_0x40c8da[_0x4656be(0x3e8)])_0x1af8f0=_0x40c8da[_0x4656be(0x21d)][0x0]['id'];else{if(!_0x5e63f0['empty'])_0x1af8f0=_0x5e63f0['docs'][0x0]['id'];else{if(!_0xa9921['empty'])_0x1af8f0=_0xa9921['docs'][0x0]['id'];}}}let _0x7626bc=_0x48daca[_0x4656be(0x35c)];if(!_0x7626bc&&_0x48daca['loserUsername']){const [_0x5497e0,_0x4412fb,_0x14ed4e]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x48daca['loserUsername']))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x48daca['loserUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x48daca['loserUsername'])))]);if(!_0x5497e0['empty'])_0x7626bc=_0x5497e0['docs'][0x0]['id'];else{if(!_0x4412fb['empty'])_0x7626bc=_0x4412fb['docs'][0x0]['id'];else{if(!_0x14ed4e['empty'])_0x7626bc=_0x14ed4e['docs'][0x0]['id'];}}}if(_0x1af8f0&&_0x7626bc){const _0x20f5dc=doc(db,'userProfiles',_0x1af8f0),_0x37f0db=doc(db,'userProfiles',_0x7626bc),[_0x56bcc9,_0x4294f8]=await Promise['all']([getDoc(_0x20f5dc),getDoc(_0x37f0db)]);if(_0x56bcc9[_0x4656be(0x1f2)]()){const _0x33fcce=_0x56bcc9['data'](),_0x1fa7fc=_0x33fcce['points']||0x0;_0x4c6e19[_0x4656be(0x219)](_0x20f5dc,{'points':_0x1fa7fc+_0x4115ac,'lastPointsModified':serverTimestamp()}),_0x393e40['push']({'userId':_0x1af8f0,'userEmail':_0x33fcce['email']||'unknown','displayName':_0x33fcce['displayName']||_0x48daca['winnerUsername']||'Unknown\x20User','action':'add','amount':_0x4115ac,'previousPoints':_0x1fa7fc,'newPoints':_0x1fa7fc+_0x4115ac,'reason':'Bulk\x20award:\x20'+_0x5181e3+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x242a55['id']+_0x4656be(0x3b2)+_0xb04354,'adminEmail':auth['currentUser'][_0x4656be(0x3d6)],'timestamp':serverTimestamp()});}if(_0x4294f8[_0x4656be(0x1f2)]()){const _0x382364=_0x4294f8[_0x4656be(0x21c)](),_0x38e3b7=_0x382364['points']||0x0;_0x4c6e19[_0x4656be(0x219)](_0x37f0db,{'points':_0x38e3b7+_0x4115ac,'lastPointsModified':serverTimestamp()}),_0x393e40['push']({'userId':_0x7626bc,'userEmail':_0x382364['email']||'unknown','displayName':_0x382364['displayName']||_0x48daca['loserUsername']||'Unknown\x20User','action':'add','amount':_0x4115ac,'previousPoints':_0x38e3b7,'newPoints':_0x38e3b7+_0x4115ac,'reason':'Bulk\x20award:\x20'+_0x5181e3+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x242a55['id']+'\x20-\x20'+_0xb04354,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}_0x22990c+=_0x4115ac*0x2,_0x171656+=0x2,_0x2d7d51['add'](_0x242a55['id']);if(_0x171656>=0x190){await _0x4c6e19['commit']();for(const _0x23edb0 of _0x393e40){await addDoc(collection(db,'pointsHistory'),_0x23edb0);}_0x4c6e19=writeBatch(db),_0x171656=0x0,_0x393e40[_0x4656be(0x41a)]=0x0;}}}catch(_0x6714fb){console[_0x4656be(0x26f)]('Error\x20processing\x20'+_0xb04354+_0x4656be(0x325)+_0x242a55['id']+':',_0x6714fb),_0x403b58++;}}if(_0x171656>0x0){await _0x4c6e19['commit']();for(const _0x2d52f5 of _0x393e40){await addDoc(collection(db,'pointsHistory'),_0x2d52f5);}}return{'processed':_0xb04354==='D1'?_0xb60cac:_0xb04354==='D2'?_0x384d1f:_0x5c3ad1};};await _0x560287(_0x530a6a,'D1'),await _0x560287(_0x4dd81b,'D2'),await _0x560287(_0x8d7572,'D3'),showNotification('Completed!\x20Processed\x20'+_0xb60cac+'\x20D1\x20matches,\x20'+_0x384d1f+'\x20D2\x20matches,\x20'+_0x5c3ad1+'\x20D3\x20matches.\x20'+(_0x392e0e(0x410)+_0x22990c+'\x20points.\x20Skipped\x20'+_0x324dcf+_0x392e0e(0x24c)+_0x403b58),_0x392e0e(0x379)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x382d11){console['error'](_0x392e0e(0x3fa),_0x382d11),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x382d11[_0x392e0e(0x320)],_0x392e0e(0x26f));}}const _0x44c8eb=document['getElementById'](_0xf21988(0x2ec));if(_0x44c8eb){console[_0xf21988(0x3f7)]('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x5edafe=_0x44c8eb['querySelector'](_0xf21988(0x2c1));_0x5edafe?_0x5edafe['addEventListener']('click',function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0xf21988(0x389));const _0x507bb5=document[_0xf21988(0x204)]('cancel-quick-edit');_0x507bb5?_0x507bb5['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x57ca49=document['getElementById']('quick-edit-points-form');_0x57ca49?_0x57ca49['addEventListener']('submit',function(_0x28cd04){const _0x15bf9c=_0xf21988;console['log'](_0x15bf9c(0x1ed)),handleQuickEditPoints(_0x28cd04);}):console[_0xf21988(0x26f)]('Quick\x20edit\x20form\x20not\x20found!'),_0x44c8eb['addEventListener'](_0xf21988(0x22e),function(_0x235bb0){const _0x2e65c5=_0xf21988;_0x235bb0[_0x2e65c5(0x3f0)]===_0x44c8eb&&(console[_0x2e65c5(0x3f7)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log']('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x14add3=a2_0x34d589;try{const _0x5499cb=parseInt(prompt(_0x14add3(0x3b8),'10'));if(!_0x5499cb||isNaN(_0x5499cb)){showNotification('Invalid\x20points\x20amount','error');return;}if(!confirm('This\x20will\x20award\x20'+_0x5499cb+'\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?'))return;showNotification(_0x14add3(0x42c),_0x14add3(0x400));const [_0x57eb26,_0x5eed38,_0x14d13a]=await Promise['all']([getDocs(collection(db,_0x14add3(0x3f9))),getDocs(collection(db,'playersD2')),getDocs(collection(db,'playersD3'))]);console['log']('Found\x20'+_0x57eb26['size']+_0x14add3(0x2da)+_0x5eed38['size']+'\x20D2\x20pilots,\x20'+_0x14d13a['size']+'\x20D3\x20pilots');const _0x4e5619=_0x57eb26['size']+_0x5eed38['size']+_0x14d13a['size'],_0x664fa6=new Map();_0x57eb26[_0x14add3(0x202)](_0x1bf250=>{const _0x48005d=_0x14add3,_0x361ce0=_0x1bf250['data']();_0x664fa6[_0x48005d(0x3e1)](_0x1bf250['id'],{'username':_0x361ce0['username'],'ladder':'D1'});}),_0x5eed38['forEach'](_0x1bcf1e=>{const _0x1036e5=_0x14add3,_0xa26a85=_0x1bcf1e[_0x1036e5(0x21c)]();_0x664fa6[_0x1036e5(0x3e1)](_0x1bcf1e['id'],{'username':_0xa26a85['username'],'ladder':'D2'});}),_0x14d13a['forEach'](_0x3197f1=>{const _0xf86301=_0x14add3,_0x53ea08=_0x3197f1['data']();_0x664fa6['set'](_0x3197f1['id'],{'username':_0x53ea08[_0xf86301(0x30a)],'ladder':'D3'});}),console['log'](_0x14add3(0x1df)+_0x664fa6['size']+_0x14add3(0x230));let _0xda45b=0x0,_0x5b558e=0x0,_0x1b3bb5=0x0;const _0x22fa38=Array[_0x14add3(0x275)](_0x664fa6[_0x14add3(0x3e6)]()),_0x20ec18=0x190;for(let _0x1a80e2=0x0;_0x1a80e2<_0x22fa38['length'];_0x1a80e2+=_0x20ec18){const _0x504550=writeBatch(db),_0x5cb3b8=[],_0x57d5a5=_0x22fa38['slice'](_0x1a80e2,_0x1a80e2+_0x20ec18),_0x5e599f=await Promise[_0x14add3(0x3bb)](_0x57d5a5[_0x14add3(0x31b)](_0x714610=>getDoc(doc(db,_0x14add3(0x255),_0x714610))));for(let _0x598079=0x0;_0x598079<_0x57d5a5['length'];_0x598079++){try{const _0x1bc036=_0x57d5a5[_0x598079],_0x596d1d=_0x664fa6['get'](_0x1bc036),_0x4bfa99=_0x5e599f[_0x598079];if(_0x4bfa99['exists']()){const _0x1fa955=_0x4bfa99['data'](),_0xbf3b25=_0x1fa955['points']||0x0,_0xb6135=_0xbf3b25+_0x5499cb;_0x504550['update'](doc(db,'userProfiles',_0x1bc036),{'points':_0xb6135,'lastPointsModified':serverTimestamp()}),_0x5cb3b8['push']({'userId':_0x1bc036,'userEmail':_0x1fa955['email']||_0x14add3(0x3c6),'displayName':_0x1fa955[_0x14add3(0x2b2)]||_0x596d1d['username']||_0x14add3(0x38d),'action':'add','amount':_0x5499cb,'previousPoints':_0xbf3b25,'newPoints':_0xb6135,'reason':_0x14add3(0x3a5)+_0x596d1d['ladder']+')','adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()}),_0x5b558e+=_0x5499cb,_0xda45b++;}else _0x1b3bb5++,console[_0x14add3(0x1ea)]('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x596d1d[_0x14add3(0x30a)]+'\x20('+_0x1bc036+')');}catch(_0x96dc75){_0x1b3bb5++,console[_0x14add3(0x26f)]('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x96dc75);}}await _0x504550['commit']();for(const _0x841d40 of _0x5cb3b8){await addDoc(collection(db,_0x14add3(0x37b)),_0x841d40);}showNotification('Processed\x20'+_0xda45b+'/'+_0x4e5619+_0x14add3(0x35d),'info');}showNotification('Complete!\x20Awarded\x20'+_0x5b558e+_0x14add3(0x237)+_0xda45b+_0x14add3(0x40d)+_0x1b3bb5,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x3388ab){console[_0x14add3(0x26f)](_0x14add3(0x43b),_0x3388ab),showNotification('Error:\x20'+_0x3388ab['message'],'error');}}function setupManageRibbonsSection(){const _0x2af79e=a2_0x34d589;console['log'](_0x2af79e(0x20c));const _0x36b1e1=document['getElementById'](_0x2af79e(0x24e));_0x36b1e1&&_0x36b1e1['addEventListener'](_0x2af79e(0x448),debounce(searchRibbonUser,0x12c));const _0x246e48=document['getElementById']('search-ribbon-user-btn');_0x246e48&&_0x246e48[_0x2af79e(0x421)]('click',searchRibbonUser);const _0x119aa7=document[_0x2af79e(0x204)]('add-ribbon-form');_0x119aa7&&_0x119aa7['addEventListener']('submit',addRibbon),_0x36b1e1&&_0x36b1e1[_0x2af79e(0x421)]('keypress',function(_0x4faa68){const _0x2ab04d=_0x2af79e;_0x4faa68[_0x2ab04d(0x2ea)]==='Enter'&&(_0x4faa68[_0x2ab04d(0x38a)](),searchRibbonUser());}),console[_0x2af79e(0x3f7)](_0x2af79e(0x441));}async function modifyUserPoints(_0x27f3ab,_0x230c03,_0x30d756,_0x23e273=''){const _0x1f0084=a2_0x34d589,_0x43ff74=doc(db,'userProfiles',_0x27f3ab),_0x1af4fd=await getDoc(_0x43ff74);if(!_0x1af4fd['exists']())throw new Error('User\x20not\x20found');const _0x5dcb8b=_0x1af4fd['data'](),_0x1b0763=_0x5dcb8b[_0x1f0084(0x299)]!==undefined?_0x5dcb8b['points']:0x0;_0x5dcb8b[_0x1f0084(0x299)]===undefined&&(console[_0x1f0084(0x3f7)]('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x5dcb8b[_0x1f0084(0x2b2)]||_0x5dcb8b[_0x1f0084(0x3d6)]||'Unknown')),await updateDoc(_0x43ff74,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x1c45a9=_0x1b0763;switch(_0x230c03){case _0x1f0084(0x280):_0x1c45a9=_0x1b0763+_0x30d756;break;case'subtract':_0x1c45a9=Math['max'](0x0,_0x1b0763-_0x30d756);break;case'set':_0x1c45a9=_0x30d756;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x43ff74,{'points':_0x1c45a9,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x1f0084(0x37b)),{'userId':_0x27f3ab,'userEmail':_0x5dcb8b['email']||'unknown','displayName':_0x5dcb8b['displayName']||_0x5dcb8b['username']||'Unknown\x20User','action':_0x230c03,'amount':_0x30d756,'previousPoints':_0x1b0763,'newPoints':_0x1c45a9,'reason':_0x23e273,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x30c60e=a2_0x34d589,_0x5db3cc=document['getElementById'](_0x30c60e(0x213));if(!_0x5db3cc)return;_0x5db3cc[_0x30c60e(0x214)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x40e360=collection(db,'userProfiles'),_0x3c9239=await getDocs(_0x40e360);if(_0x3c9239[_0x30c60e(0x3e8)]){_0x5db3cc[_0x30c60e(0x214)]=_0x30c60e(0x2b5);return;}const _0xa6de7a=[];let _0x351a4=0x0;_0x3c9239[_0x30c60e(0x202)](_0x23f27d=>{const _0x3caf57=_0x30c60e,_0x4a7f5b=_0x23f27d['data'](),_0xef3d8b=_0x4a7f5b[_0x3caf57(0x299)]!==undefined?_0x4a7f5b[_0x3caf57(0x299)]:0x0;_0x4a7f5b['points']===undefined&&_0x351a4++,_0xa6de7a[_0x3caf57(0x1db)]({'id':_0x23f27d['id'],..._0x4a7f5b,'points':_0xef3d8b});}),_0x351a4>0x0&&(console['log']('Found\x20'+_0x351a4+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x351a4+_0x30c60e(0x41c),'info')),_0xa6de7a['sort']((_0x1e0993,_0x259b7f)=>(_0x259b7f[_0x30c60e(0x299)]||0x0)-(_0x1e0993['points']||0x0)),window[_0x30c60e(0x26e)]=_0xa6de7a,renderPointsOverview(_0xa6de7a);}catch(_0x5c7ab7){console['error'](_0x30c60e(0x402),_0x5c7ab7),_0x5db3cc[_0x30c60e(0x214)]=_0x30c60e(0x3bf)+_0x5c7ab7['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x162e88=a2_0x34d589,_0x49c865=document[_0x162e88(0x204)]('ribbons-overview-table-body');if(!_0x49c865)return;_0x49c865['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x11104d,_0x2af3bb,_0x470f8a]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,'playerRibbonsD3'))]);_0x49c865['innerHTML']='';const _0x4dde82=(_0x5ef54c,_0x109454)=>{_0x5ef54c['forEach'](_0x4e5978=>{const _0x336319=a2_0x1797,_0x567abe=_0x4e5978['data'](),_0x1b60a7=_0x567abe['ribbons']||{},_0x338d5b=Object[_0x336319(0x3e6)](_0x1b60a7)['length'],_0x50e299=document['createElement']('tr');_0x50e299['innerHTML']=_0x336319(0x33b)+(_0x567abe['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x109454[_0x336319(0x249)]()+'\x22>'+_0x109454+_0x336319(0x2c6)+_0x338d5b+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x567abe['lastUpdated']?new Date(_0x567abe[_0x336319(0x369)][_0x336319(0x247)]*0x3e8)['toLocaleDateString']():'Unknown')+_0x336319(0x3f5)+_0x567abe['username']+'\x22\x20data-ladder=\x22'+_0x109454+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x49c865[_0x336319(0x248)](_0x50e299);});};_0x4dde82(_0x11104d,'D1'),_0x4dde82(_0x2af3bb,'D2'),_0x4dde82(_0x470f8a,'D3'),document['querySelectorAll']('.edit-ribbons-btn')['forEach'](_0x1aa4cc=>{const _0x263cfa=_0x162e88;_0x1aa4cc[_0x263cfa(0x421)]('click',function(){const _0x2dd485=_0x263cfa,_0x4eab51=this['dataset'][_0x2dd485(0x30a)],_0x429323=this['dataset']['ladder'];editUserRibbons(_0x4eab51,_0x429323);});}),showNotification('Ribbons\x20data\x20loaded\x20successfully','success');}catch(_0x5846a3){console['error']('Error\x20loading\x20ribbons:',_0x5846a3),_0x49c865['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification(_0x162e88(0x436),_0x162e88(0x26f));}}async function searchRibbonUser(){const _0x6fe764=a2_0x34d589,_0x27999a=document['getElementById']('ribbon-user-search')['value']['trim']();if(!_0x27999a){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x408763,_0x3f5dbd,_0x2cd593]=await Promise[_0x6fe764(0x3bb)]([getDoc(doc(db,'playerRibbons',_0x27999a)),getDoc(doc(db,_0x6fe764(0x392),_0x27999a)),getDoc(doc(db,_0x6fe764(0x3c4),_0x27999a))]);let _0x1affde=null,_0x37d1c3=null;if(_0x408763[_0x6fe764(0x1f2)]())_0x1affde='D1',_0x37d1c3=_0x408763['data']();else{if(_0x3f5dbd[_0x6fe764(0x1f2)]())_0x1affde='D2',_0x37d1c3=_0x3f5dbd[_0x6fe764(0x21c)]();else _0x2cd593['exists']()&&(_0x1affde='D3',_0x37d1c3=_0x2cd593['data']());}_0x1affde?(document['getElementById']('current-ribbon-user')['textContent']=_0x27999a,document['getElementById'](_0x6fe764(0x26a))['value']=_0x27999a,document['getElementById']('ribbon-target-ladder')['value']=_0x1affde,document['getElementById'](_0x6fe764(0x39a))[_0x6fe764(0x3b3)]['display']='block',displayCurrentRibbons(_0x37d1c3['ribbons']||{}),showNotification('Found\x20'+_0x27999a+'\x20in\x20'+_0x1affde+_0x6fe764(0x307),'success')):showNotification('User\x20'+_0x27999a+'\x20not\x20found\x20in\x20any\x20ladder','error');}catch(_0x2fdec0){console['error'](_0x6fe764(0x2f5),_0x2fdec0),showNotification('Error\x20searching\x20for\x20user','error');}}function displayCurrentRibbons(_0x5b4525){const _0x356f68=a2_0x34d589,_0x356474=document['getElementById'](_0x356f68(0x382));if(!_0x356474)return;_0x356474['innerHTML']='';if(Object['keys'](_0x5b4525)['length']===0x0){_0x356474['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0x5b4525)['forEach'](([_0x4598c0,_0x2340fd])=>{const _0x357cc6=_0x356f68,_0x5d71bb=document['createElement'](_0x357cc6(0x39e));_0x5d71bb['className']='ribbon-item',_0x5d71bb[_0x357cc6(0x214)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x4598c0+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x2340fd['level']||0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20'+(_0x2340fd[_0x357cc6(0x3b6)]?new Date(_0x2340fd['awardedAt']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x4598c0+_0x357cc6(0x442),_0x356474['appendChild'](_0x5d71bb);}),document['querySelectorAll']('.remove-ribbon-btn')[_0x356f68(0x202)](_0x1e636c=>{const _0xbdbfa2=_0x356f68;_0x1e636c[_0xbdbfa2(0x421)](_0xbdbfa2(0x22e),function(){const _0x5d37d4=_0xbdbfa2,_0xc8db0d=this['dataset'][_0x5d37d4(0x2cb)];removeRibbon(_0xc8db0d);});});}function a2_0x1797(_0x4c5688,_0x17ad1){const _0x1ab211=a2_0x48b5();return a2_0x1797=function(_0x4a84e2,_0x13e210){_0x4a84e2=_0x4a84e2-0x1d4;let _0x48b5fd=_0x1ab211[_0x4a84e2];return _0x48b5fd;},a2_0x1797(_0x4c5688,_0x17ad1);}async function addRibbon(_0x20d0b5){const _0x21fddf=a2_0x34d589;_0x20d0b5['preventDefault']();const _0x1bc529=document['getElementById'](_0x21fddf(0x26a))['value'],_0x481a27=document[_0x21fddf(0x204)]('ribbon-target-ladder')['value'],_0x5e11e8=document[_0x21fddf(0x204)]('ribbon-type-select')['value'],_0x19f9dd=parseInt(document['getElementById']('ribbon-level')['value']);if(!_0x1bc529||!_0x481a27||!_0x5e11e8||!_0x19f9dd){showNotification(_0x21fddf(0x1dd),_0x21fddf(0x26f));return;}try{const _0x2e90f7='playerRibbons'+(_0x481a27==='D1'?'':_0x481a27),_0x9f2033=doc(db,_0x2e90f7,_0x1bc529),_0x144818=await getDoc(_0x9f2033),_0x30f1d9=_0x144818[_0x21fddf(0x1f2)]()?_0x144818[_0x21fddf(0x21c)]()['ribbons']||{}:{};_0x30f1d9[_0x5e11e8]={'level':_0x19f9dd,'awardedAt':serverTimestamp()},await setDoc(_0x9f2033,{'username':_0x1bc529,'ladder':_0x481a27,'ribbons':_0x30f1d9,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x5e11e8+'\x20Level\x20'+_0x19f9dd+'\x20to\x20'+_0x1bc529,'success'),displayCurrentRibbons(_0x30f1d9),document['getElementById'](_0x21fddf(0x30d))['value']='',document['getElementById'](_0x21fddf(0x257))[_0x21fddf(0x2f8)]='1';}catch(_0x4f78b2){console['error']('Error\x20adding\x20ribbon:',_0x4f78b2),showNotification('Error\x20adding\x20ribbon',_0x21fddf(0x26f));}}async function removeRibbon(_0x54e3bd){const _0x711c3a=a2_0x34d589,_0x23cb2e=document['getElementById']('ribbon-target-user')[_0x711c3a(0x2f8)],_0x174ba0=document[_0x711c3a(0x204)]('ribbon-target-ladder')['value'];if(!confirm(_0x711c3a(0x220)+_0x54e3bd+_0x711c3a(0x39b)+_0x23cb2e+'?'))return;try{const _0x58c4e5='playerRibbons'+(_0x174ba0==='D1'?'':_0x174ba0),_0x30a123=doc(db,_0x58c4e5,_0x23cb2e),_0x5a47d1=await getDoc(_0x30a123),_0x182d44=_0x5a47d1['exists']()?_0x5a47d1['data']()['ribbons']||{}:{};delete _0x182d44[_0x54e3bd],await setDoc(_0x30a123,{'username':_0x23cb2e,'ladder':_0x174ba0,'ribbons':_0x182d44,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x54e3bd+'\x20from\x20'+_0x23cb2e,'success'),displayCurrentRibbons(_0x182d44);}catch(_0x28bd78){console[_0x711c3a(0x26f)]('Error\x20removing\x20ribbon:',_0x28bd78),showNotification(_0x711c3a(0x2b0),_0x711c3a(0x26f));}}function editUserRibbons(_0x207a06,_0x26ccd5){const _0x3629ad=a2_0x34d589;document[_0x3629ad(0x204)]('ribbon-user-search')[_0x3629ad(0x2f8)]=_0x207a06,searchRibbonUser();}