function a43_0x3930(){const _0x2da017=['style','length','return\x20(function()\x20','prototype','addEventListener','Error\x20in\x20queue\x20listener:','isReady','console','unload','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Just\x20now','readyPlayers','m\x20in\x20queue','data','lastUpdated','error','innerHTML','__proto__','log','bind','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','forEach'];a43_0x3930=function(){return _0x2da017;};return a43_0x3930();}const a43_0x58528b=a43_0x27d3,a43_0x54bc96=(function(){let _0x32e603=!![];return function(_0xa9cc9,_0x335f4f){const _0x3c96e5=_0x32e603?function(){if(_0x335f4f){const _0x137f5a=_0x335f4f['apply'](_0xa9cc9,arguments);return _0x335f4f=null,_0x137f5a;}}:function(){};return _0x32e603=![],_0x3c96e5;};}()),a43_0x30089e=a43_0x54bc96(this,function(){const _0x3908b7=a43_0x27d3;let _0x2996a2;try{const _0x66344b=Function(_0x3908b7(0x15b)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2996a2=_0x66344b();}catch(_0x47fdb4){_0x2996a2=window;}const _0x4e61aa=_0x2996a2['console']=_0x2996a2[_0x3908b7(0x160)]||{},_0x42b7d1=[_0x3908b7(0x16b),'warn','info','error','exception','table','trace'];for(let _0x223612=0x0;_0x223612<_0x42b7d1['length'];_0x223612++){const _0x465d3f=a43_0x54bc96['constructor'][_0x3908b7(0x15c)]['bind'](a43_0x54bc96),_0x4dd056=_0x42b7d1[_0x223612],_0x2ee563=_0x4e61aa[_0x4dd056]||_0x465d3f;_0x465d3f[_0x3908b7(0x16a)]=a43_0x54bc96['bind'](a43_0x54bc96),_0x465d3f['toString']=_0x2ee563['toString'][_0x3908b7(0x16c)](_0x2ee563),_0x4e61aa[_0x4dd056]=_0x465d3f;}});a43_0x30089e();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a43_0x27d3(_0x26874a,_0x997173){const _0x30089e=a43_0x3930();return a43_0x27d3=function(_0x54bc96,_0x1e5426){_0x54bc96=_0x54bc96-0x159;let _0x393005=_0x30089e[_0x54bc96];return _0x393005;},a43_0x27d3(_0x26874a,_0x997173);}const readyPlayersRef=collection(db,a43_0x58528b(0x164)),activePlayersQuery=query(readyPlayersRef,where(a43_0x58528b(0x15f),'==',!![]));function updateQueueDisplay(_0x4f759a){const _0x297fd8=a43_0x58528b,_0xca0f10=document['getElementById']('queue-container');if(!_0xca0f10)return;if(_0x4f759a[_0x297fd8(0x15a)]===0x0){_0xca0f10['style']['display']='none';return;}_0xca0f10[_0x297fd8(0x159)]['display']='block';let _0x3be3d7='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x4f759a['forEach'](_0x58ba72=>{const _0x135d5b=_0x297fd8;_0x3be3d7+=_0x135d5b(0x16d)+(_0x58ba72['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x58ba72['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x3be3d7+=_0x297fd8(0x162),_0xca0f10[_0x297fd8(0x169)]=_0x3be3d7;}function formatQueueTime(_0x5e6665){const _0x4a65ca=a43_0x58528b;if(!_0x5e6665)return _0x4a65ca(0x163);const _0xb18d07=_0x5e6665['toDate']?_0x5e6665['toDate']():new Date(_0x5e6665),_0x571e71=new Date(),_0x1b3965=Math['floor']((_0x571e71-_0xb18d07)/0xea60);if(_0x1b3965<0x1)return _0x4a65ca(0x163);return _0x1b3965+_0x4a65ca(0x165);}async function checkQueueTimeout(_0x41293a){const _0x15763c=a43_0x58528b;if(!_0x41293a['lastUpdated'])return;const _0x10a97e=_0x41293a['lastUpdated']['toDate']?_0x41293a['lastUpdated']['toDate']():new Date(_0x41293a['lastUpdated']),_0x5691d0=new Date(),_0x30bfcc=Math['floor']((_0x5691d0-_0x10a97e)/0xea60);if(_0x30bfcc>=0x1e)try{const _0x1e14b3=doc(db,'readyPlayers',_0x41293a['id']);await updateDoc(_0x1e14b3,{'isReady':![]});}catch(_0x34e619){console[_0x15763c(0x168)]('Error\x20removing\x20player\x20from\x20queue:',_0x34e619);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x39a926=>{const _0x4a7548=a43_0x58528b,_0x46e9d3=[];_0x39a926[_0x4a7548(0x16e)](_0x217de4=>{const _0x1fcf13=_0x4a7548,_0x17a0d4=_0x217de4[_0x1fcf13(0x166)]();if(_0x17a0d4['isReady']===!![]){const _0x3ce144={'id':_0x217de4['id'],'username':_0x17a0d4['username'],'lastUpdated':_0x17a0d4[_0x1fcf13(0x167)]||new Date()};_0x46e9d3['push'](_0x3ce144),checkQueueTimeout(_0x3ce144);}}),updateQueueDisplay(_0x46e9d3);},_0x3af494=>{const _0x57e026=a43_0x58528b;console['error'](_0x57e026(0x15e),_0x3af494);});window[a43_0x58528b(0x15d)](a43_0x58528b(0x161),()=>{unsubscribe();});