function a9_0x9a33(_0x50d462,_0x2a3b9c){const _0x13b6a8=a9_0x299e();return a9_0x9a33=function(_0x4cd86c,_0x422cbe){_0x4cd86c=_0x4cd86c-0xe9;let _0x299e73=_0x13b6a8[_0x4cd86c];return _0x299e73;},a9_0x9a33(_0x50d462,_0x2a3b9c);}const a9_0x2eb267=a9_0x9a33,a9_0x4cd86c=(function(){let _0x2a0123=!![];return function(_0xf131b0,_0x5afd0f){const _0x6ec95a=_0x2a0123?function(){if(_0x5afd0f){const _0x5760fb=_0x5afd0f['apply'](_0xf131b0,arguments);return _0x5afd0f=null,_0x5760fb;}}:function(){};return _0x2a0123=![],_0x6ec95a;};}()),a9_0x13b6a8=a9_0x4cd86c(this,function(){const _0x5e11ee=a9_0x9a33,_0x481f3b=function(){const _0x2509cd=a9_0x9a33;let _0x31d6be;try{_0x31d6be=Function(_0x2509cd(0xec)+_0x2509cd(0x11c)+');')();}catch(_0x6a797a){_0x31d6be=window;}return _0x31d6be;},_0x2102db=_0x481f3b(),_0x226b57=_0x2102db['console']=_0x2102db['console']||{},_0x4f8dc1=['log','warn','info','error',_0x5e11ee(0xf3),_0x5e11ee(0x119),'trace'];for(let _0x5ce3db=0x0;_0x5ce3db<_0x4f8dc1['length'];_0x5ce3db++){const _0x53f686=a9_0x4cd86c[_0x5e11ee(0xf1)]['prototype']['bind'](a9_0x4cd86c),_0x1759f5=_0x4f8dc1[_0x5ce3db],_0x11c805=_0x226b57[_0x1759f5]||_0x53f686;_0x53f686['__proto__']=a9_0x4cd86c['bind'](a9_0x4cd86c),_0x53f686['toString']=_0x11c805[_0x5e11ee(0x114)]['bind'](_0x11c805),_0x226b57[_0x1759f5]=_0x53f686;}});a9_0x13b6a8();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x2295c0=a9_0x9a33;this[_0x2295c0(0x109)]='D1',this[_0x2295c0(0xfe)]=new Map(),this['init']();}[a9_0x2eb267(0xf2)](){this['setupEventListeners'](),this['loadPlayers']();}['setupEventListeners'](){const _0x1f7783=a9_0x2eb267;document['querySelectorAll']('.ladder-btn')[_0x1f7783(0x112)](_0x28218e=>{_0x28218e['addEventListener']('click',_0x260f60=>{const _0x219aea=a9_0x9a33;document['querySelectorAll']('.ladder-btn')['forEach'](_0x1c99e4=>_0x1c99e4['classList']['remove']('active')),_0x260f60[_0x219aea(0x100)]['classList']['add']('active'),this['currentLadder']=_0x260f60[_0x219aea(0x100)]['dataset'][_0x219aea(0x118)],this['loadPlayers']();});}),document[_0x1f7783(0xf9)]('refresh-players')['addEventListener']('click',()=>{this['loadPlayers']();}),document[_0x1f7783(0xf9)]('winner-select')['addEventListener']('change',()=>this[_0x1f7783(0x11b)]()),document[_0x1f7783(0xf9)]('loser-select')['addEventListener'](_0x1f7783(0xed),()=>this['calculateMatch']());}async['loadPlayers'](){const _0x5be162=a9_0x2eb267;try{this['updateDropdowns']('<option\x20value=\x22\x22>Loading\x20players...</option>');const _0x50e8ef=this['currentLadder']==='D1'?'players':this['currentLadder']==='D2'?'playersD2':'playersD3',_0x31ba8e=collection(db,_0x50e8ef),_0x3bc824=query(_0x31ba8e,orderBy('eloRating','desc')),_0x177d7a=await getDocs(_0x3bc824);this['players']['clear'](),_0x177d7a[_0x5be162(0x112)](_0x5d335e=>{const _0x372729=_0x5be162,_0xaca63d=_0x5d335e[_0x372729(0x10e)]();_0xaca63d['username']&&this['players']['set'](_0xaca63d['username'],{'id':_0x5d335e['id'],'username':_0xaca63d['username'],'elo':parseInt(_0xaca63d['eloRating'])||0x4b0,'position':_0xaca63d[_0x372729(0x115)]||0x3e7});}),this['updateDropdowns'](),console['log'](_0x5be162(0x105)+this['players'][_0x5be162(0xef)]+'\x20players\x20from\x20'+this[_0x5be162(0x109)]+_0x5be162(0x103));}catch(_0x398306){console[_0x5be162(0x106)]('Error\x20loading\x20players:',_0x398306),this[_0x5be162(0x113)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}[a9_0x2eb267(0x113)](_0x1d5611=null){const _0x5ec17d=a9_0x2eb267,_0x2b8496=document['getElementById'](_0x5ec17d(0x10a)),_0x5cac0c=document['getElementById']('loser-select');if(_0x1d5611){_0x2b8496['innerHTML']=_0x1d5611,_0x5cac0c[_0x5ec17d(0xf5)]=_0x1d5611;return;}let _0x3afd5c='<option\x20value=\x22\x22>Select\x20a\x20player...</option>';const _0x87c4bc=Array[_0x5ec17d(0x107)](this['players']['values']())['sort']((_0x3117f3,_0x33c45c)=>_0x33c45c['elo']-_0x3117f3['elo']);_0x87c4bc['forEach'](_0x575735=>{const _0x5aac69=_0x5ec17d,_0x4ae8ac=this['getELORankClass'](_0x575735['elo']);_0x3afd5c+=_0x5aac69(0xe9)+_0x575735[_0x5aac69(0x104)]+_0x5aac69(0xea)+_0x575735['elo']+'\x22\x20class=\x22'+_0x4ae8ac+_0x5aac69(0xf0)+_0x575735[_0x5aac69(0x104)]+'\x20('+_0x575735['elo']+'\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>';}),_0x2b8496['innerHTML']=_0x3afd5c,_0x5cac0c['innerHTML']=_0x3afd5c;}[a9_0x2eb267(0x11b)](){const _0x11ee30=a9_0x2eb267,_0x59aed5=document['getElementById']('winner-select'),_0x3bed40=document['getElementById'](_0x11ee30(0x116)),_0x47b564=_0x59aed5[_0x11ee30(0xeb)],_0x13c0bd=_0x3bed40['value'];if(!_0x47b564||!_0x13c0bd){document['getElementById']('match-result')['style']['display']='none',document['getElementById'](_0x11ee30(0xf7))['style']['display']='none';return;}if(_0x47b564===_0x13c0bd){alert('Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser');return;}const _0x519c80=this['players']['get'](_0x47b564),_0x1becc0=this['players']['get'](_0x13c0bd);if(!_0x519c80||!_0x1becc0){console['error']('Player\x20not\x20found');return;}const _0x58443c=this[_0x11ee30(0x110)](_0x519c80['elo'],_0x1becc0[_0x11ee30(0xfc)]);this['displayMatchResult'](_0x519c80,_0x1becc0,_0x58443c),this['displayCalculationDetails'](_0x519c80,_0x1becc0,_0x58443c);}[a9_0x2eb267(0x110)](_0x1d9844,_0x498e9d,_0x10ca75=0x20){const _0x28125e=a9_0x2eb267,_0x496d13=0x1/(0x1+Math['pow'](0xa,(_0x498e9d-_0x1d9844)/0x190)),_0x44a311=0x1/(0x1+Math['pow'](0xa,(_0x1d9844-_0x498e9d)/0x190)),_0x3bd213=_0x1d9844+_0x10ca75*(0x1-_0x496d13),_0x1aee4e=_0x498e9d+_0x10ca75*(0x0-_0x44a311);return{'winnerChange':Math['round'](_0x3bd213-_0x1d9844),'loserChange':Math['round'](_0x1aee4e-_0x498e9d),'newWinnerRating':Math[_0x28125e(0xee)](_0x3bd213),'newLoserRating':Math[_0x28125e(0xee)](_0x1aee4e),'expectedScoreWinner':_0x496d13,'expectedScoreLoser':_0x44a311};}['displayMatchResult'](_0x1fd895,_0x471bcf,_0x224d39){const _0x38ab48=a9_0x2eb267;document['getElementById']('winner-name')['textContent']=_0x1fd895[_0x38ab48(0x104)],document['getElementById'](_0x38ab48(0x117))['textContent']=_0x38ab48(0xfa)+_0x1fd895[_0x38ab48(0xfc)],document['getElementById'](_0x38ab48(0x10d))['textContent']='+'+_0x224d39['winnerChange'],document['getElementById']('winner-new-elo')[_0x38ab48(0x10f)]='New\x20ELO:\x20'+_0x224d39['newWinnerRating'],document[_0x38ab48(0xf9)]('loser-name')[_0x38ab48(0x10f)]=_0x471bcf['username'],document['getElementById'](_0x38ab48(0xfb))['textContent']='Current\x20ELO:\x20'+_0x471bcf['elo'],document['getElementById']('loser-elo-change')[_0x38ab48(0x10f)]=''+_0x224d39[_0x38ab48(0x102)],document['getElementById']('loser-new-elo')['textContent']=_0x38ab48(0x108)+_0x224d39['newLoserRating'];const _0x422b63=this['getELOColor'](_0x1fd895['elo']),_0x15eed5=this[_0x38ab48(0x101)](_0x471bcf['elo']);document[_0x38ab48(0xf9)]('winner-name')['style']['color']=_0x422b63,document['getElementById']('loser-name')['style']['color']=_0x15eed5,document[_0x38ab48(0xf9)](_0x38ab48(0x111))['style']['display']='grid';}['displayCalculationDetails'](_0x2cfacd,_0x591515,_0x186838){const _0x59df04=a9_0x2eb267,_0x49e3c5='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+_0x2cfacd[_0x59df04(0x104)]+':\x20'+_0x2cfacd[_0x59df04(0xfc)]+'\x0a\x20\x20'+_0x591515['username']+':\x20'+_0x591515['elo']+'\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20'+_0x2cfacd['username']+':\x20'+_0x186838['expectedScoreWinner']['toFixed'](0x3)+'\x20('+(_0x186838['expectedScoreWinner']*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x20\x20'+_0x591515['username']+':\x20'+_0x186838['expectedScoreLoser'][_0x59df04(0xf6)](0x3)+'\x20('+(_0x186838[_0x59df04(0xf8)]*0x64)['toFixed'](0x1)+_0x59df04(0xf4)+_0x2cfacd['username']+':\x20'+_0x2cfacd[_0x59df04(0xfc)]+_0x59df04(0xff)+_0x186838[_0x59df04(0x10c)]+'\x20=\x20'+_0x186838['newWinnerRating']+'\x0a\x20\x20'+_0x591515['username']+':\x20'+_0x591515[_0x59df04(0xfc)]+_0x59df04(0xff)+_0x186838['loserChange']+'\x20=\x20'+_0x186838['newLoserRating']+'\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a'+(_0x186838['winnerChange']>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(_0x186838['winnerChange']<0x5?'Low\x20ELO\x20gain.':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('calculation-text')['textContent']=_0x49e3c5,document[_0x59df04(0xf9)]('calculation-details')['style']['display']='block';}['getELOColor'](_0x3d58ae){if(_0x3d58ae>=0x7d0)return'#50C878';else{if(_0x3d58ae>=0x708)return'#FFD700';else{if(_0x3d58ae>=0x640)return'#C0C0C0';else{if(_0x3d58ae>=0x578)return'#CD7F32';else return'#808080';}}}}[a9_0x2eb267(0x11a)](_0x4f35c6){const _0x236aeb=a9_0x2eb267;if(_0x4f35c6>=0x7d0)return'emerald';else{if(_0x4f35c6>=0x708)return _0x236aeb(0xfd);else{if(_0x4f35c6>=0x640)return'silver';else{if(_0x4f35c6>=0x578)return'bronze';else return'unranked';}}}}}document['addEventListener'](a9_0x2eb267(0x10b),()=>{document['getElementById']('sandbox')&&new ELOCalculator();});function a9_0x299e(){const _0x11b92=['<option\x20value=\x22','\x22\x20data-elo=\x22','value','return\x20(function()\x20','change','round','size','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','constructor','init','exception','%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20','innerHTML','toFixed','calculation-details','expectedScoreLoser','getElementById','Current\x20ELO:\x20','loser-current-elo','elo','gold','players','\x20+\x20','target','getELOColor','loserChange','\x20ladder','username','Loaded\x20','error','from','New\x20ELO:\x20','currentLadder','winner-select','DOMContentLoaded','winnerChange','winner-elo-change','data','textContent','calculateELO','match-result','forEach','updateDropdowns','toString','position','loser-select','winner-current-elo','ladder','table','getELORankClass','calculateMatch','{}.constructor(\x22return\x20this\x22)(\x20)'];a9_0x299e=function(){return _0x11b92;};return a9_0x299e();}