function a10_0x1d6c(){const _0x9faf13=['report-match-notification','absolute','length','none','data','currentUsername','split','block','#ff3b30','now','toString','backgroundColor','trace','constructor','10px','pendingMatchesD3','2px\x20solid\x20white','docs','onAuthStateChanged','disconnect','uid','bind','email','borderRadius','setItem','pendingMatches','apply','userId','__proto__','getItem','username','exception','empty','error','approved','style'];a10_0x1d6c=function(){return _0x9faf13;};return a10_0x1d6c();}const a10_0xe03643=(function(){let _0x47c627=!![];return function(_0x5ede08,_0x107ce2){const _0x4818dd=_0x47c627?function(){const _0x39a914=a10_0x4949;if(_0x107ce2){const _0x5ef9cd=_0x107ce2[_0x39a914(0x192)](_0x5ede08,arguments);return _0x107ce2=null,_0x5ef9cd;}}:function(){};return _0x47c627=![],_0x4818dd;};}()),a10_0x10fe52=a10_0xe03643(this,function(){const _0x120b10=a10_0x4949,_0x3f3fa4=function(){let _0x2fb2af;try{_0x2fb2af=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x41a468){_0x2fb2af=window;}return _0x2fb2af;},_0x6fa992=_0x3f3fa4(),_0x116f1a=_0x6fa992['console']=_0x6fa992['console']||{},_0x1ebd89=['log','warn','info',_0x120b10(0x199),_0x120b10(0x197),'table',_0x120b10(0x184)];for(let _0x54f1a2=0x0;_0x54f1a2<_0x1ebd89[_0x120b10(0x17a)];_0x54f1a2++){const _0x3a87f9=a10_0xe03643[_0x120b10(0x185)]['prototype'][_0x120b10(0x18d)](a10_0xe03643),_0x266d50=_0x1ebd89[_0x54f1a2],_0x2fdc98=_0x116f1a[_0x266d50]||_0x3a87f9;_0x3a87f9[_0x120b10(0x194)]=a10_0xe03643[_0x120b10(0x18d)](a10_0xe03643),_0x3a87f9[_0x120b10(0x182)]=_0x2fdc98['toString'][_0x120b10(0x18d)](_0x2fdc98),_0x116f1a[_0x266d50]=_0x3a87f9;}});a10_0x10fe52();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x192585=![]){const _0x1b8868=a10_0x4949,_0x4adca2=Date['now'](),_0x246488=checkNotificationCache();if(_0x246488!==null&&!_0x192585){updateNotificationDot(_0x246488);if(_0x4adca2-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x4adca2;const _0x33470b=auth['currentUser'];if(!_0x33470b){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x29ab2b,_0x18fbc5,_0x349634]=await Promise['all']([checkForPendingMatchesInCollection(_0x33470b,_0x1b8868(0x191)),checkForPendingMatchesInCollection(_0x33470b,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x33470b,_0x1b8868(0x187))]),_0x2290bb=_0x29ab2b||_0x18fbc5||_0x349634;updateNotificationDot(_0x2290bb),updateNotificationCache(_0x2290bb);}catch(_0x3220a9){console['error']('Error\x20checking\x20pending\x20matches:',_0x3220a9);}}async function checkForPendingMatchesInCollection(_0x2eb0c1,_0x2eb4ff){const _0x4c1af1=a10_0x4949,_0x1d9569=_0x2eb0c1['uid'],_0x13c462=_0x2eb0c1[_0x4c1af1(0x18e)],_0x40d4b4=query(collection(db,_0x2eb4ff),where('winnerId','==',_0x1d9569),where(_0x4c1af1(0x19a),'==',![])),_0x1ed3f8=await getDocs(_0x40d4b4);if(!_0x1ed3f8['empty'])return!![];if(_0x13c462){const _0x499db0=query(collection(db,_0x2eb4ff),where('winnerEmail','==',_0x13c462),where(_0x4c1af1(0x19a),'==',![])),_0x27fa3c=await getDocs(_0x499db0);if(!_0x27fa3c[_0x4c1af1(0x198)])return!![];}let _0x43761c=await getUsernameFromAllSources(_0x2eb0c1);if(_0x43761c){const _0x161602=query(collection(db,_0x2eb4ff),where('winnerUsername','==',_0x43761c),where(_0x4c1af1(0x19a),'==',![])),_0x5225bc=await getDocs(_0x161602);if(!_0x5225bc['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x311a3c){const _0x51ca8=a10_0x4949,_0x53f215=localStorage[_0x51ca8(0x195)](_0x51ca8(0x17d));if(_0x53f215)return _0x53f215;try{const [_0xd3f91b,_0x78ea8a,_0x1dde29]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x311a3c['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x311a3c['uid']))),getDocs(query(collection(db,'playersD3'),where(_0x51ca8(0x193),'==',_0x311a3c[_0x51ca8(0x18c)])))]);if(!_0xd3f91b['empty']){const _0x4762f6=_0xd3f91b['docs'][0x0][_0x51ca8(0x17c)]()['username'];return localStorage['setItem']('currentUsername',_0x4762f6),_0x4762f6;}if(!_0x78ea8a['empty']){const _0x75d114=_0x78ea8a[_0x51ca8(0x189)][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x75d114),_0x75d114;}if(!_0x1dde29[_0x51ca8(0x198)]){const _0x1021bc=_0x1dde29['docs'][0x0]['data']()[_0x51ca8(0x196)];return localStorage['setItem'](_0x51ca8(0x17d),_0x1021bc),_0x1021bc;}const _0x2a5694=await getDoc(doc(db,'users',_0x311a3c['uid']));if(_0x2a5694['exists']()&&_0x2a5694['data']()['username']){const _0x22e43d=_0x2a5694[_0x51ca8(0x17c)]()[_0x51ca8(0x196)];return localStorage['setItem']('currentUsername',_0x22e43d),_0x22e43d;}}catch(_0xaee90b){console['error']('Error\x20fetching\x20username:',_0xaee90b);}if(_0x311a3c['email'])return _0x311a3c['email'][_0x51ca8(0x17e)]('@')[0x0];return null;}function updateNotificationCache(_0x6f4e12){const _0x43d547=a10_0x4949,_0x21ba50={'status':_0x6f4e12,'timestamp':Date['now']()};localStorage[_0x43d547(0x190)](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x21ba50));}function checkNotificationCache(){const _0x115fb6=a10_0x4949,_0x4e0ec7=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x4e0ec7)return null;try{const {status:_0x3a5a9e,timestamp:_0x516af9}=JSON['parse'](_0x4e0ec7),_0x508515=Date[_0x115fb6(0x181)]();if(_0x508515-_0x516af9<CACHE_EXPIRY)return _0x3a5a9e;}catch(_0x30c28e){}return null;}export function updateNotificationDot(_0xad33e6){const _0x5574e2=a10_0x4949,_0x2a2b98=new MutationObserver((_0x3babcf,_0x2b7e48)=>{const _0x1deebb=document['getElementById']('report-match-notification');_0x1deebb&&(updateDotStyle(_0x1deebb,_0xad33e6),_0x2b7e48['disconnect']());});_0x2a2b98['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x455ba8=document['getElementById'](_0x5574e2(0x178));_0x455ba8&&(updateDotStyle(_0x455ba8,_0xad33e6),_0x2a2b98[_0x5574e2(0x18b)]()),setTimeout(()=>_0x2a2b98['disconnect'](),0x1388);}function a10_0x4949(_0x7ff67,_0x589429){const _0x10fe52=a10_0x1d6c();return a10_0x4949=function(_0xe03643,_0x35a6ed){_0xe03643=_0xe03643-0x178;let _0x1d6c37=_0x10fe52[_0xe03643];return _0x1d6c37;},a10_0x4949(_0x7ff67,_0x589429);}function updateDotStyle(_0x152386,_0x4ada3d){const _0x2de3b0=a10_0x4949;_0x4ada3d?(_0x152386[_0x2de3b0(0x19b)]['display']=_0x2de3b0(0x17f),_0x152386[_0x2de3b0(0x19b)][_0x2de3b0(0x183)]=_0x2de3b0(0x180),_0x152386[_0x2de3b0(0x19b)]['width']='10px',_0x152386[_0x2de3b0(0x19b)]['height']=_0x2de3b0(0x186),_0x152386['style']['position']=_0x2de3b0(0x179),_0x152386[_0x2de3b0(0x19b)]['top']='-5px',_0x152386[_0x2de3b0(0x19b)]['right']='-8px',_0x152386['style'][_0x2de3b0(0x18f)]='50%',_0x152386['style']['border']=_0x2de3b0(0x188),_0x152386[_0x2de3b0(0x19b)]['zIndex']='999'):_0x152386['style']['display']=_0x2de3b0(0x17b);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{const _0x3cd9f0=a10_0x4949;setTimeout(()=>checkPendingMatches(),0x1f4),auth[_0x3cd9f0(0x18a)](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});