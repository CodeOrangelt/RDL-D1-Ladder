const a10_0xc55644=(function(){let _0x5a842a=!![];return function(_0x2ea258,_0x22f744){const _0x3daaa9=_0x5a842a?function(){if(_0x22f744){const _0x67ae50=_0x22f744['apply'](_0x2ea258,arguments);return _0x22f744=null,_0x67ae50;}}:function(){};return _0x5a842a=![],_0x3daaa9;};}()),a10_0x529d84=a10_0xc55644(this,function(){const _0x251b01=a10_0xc433,_0x1046bc=function(){let _0x2c0c67;try{_0x2c0c67=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x394a1e){_0x2c0c67=window;}return _0x2c0c67;},_0x344112=_0x1046bc(),_0x12893f=_0x344112[_0x251b01(0xbf)]=_0x344112[_0x251b01(0xbf)]||{},_0x1b5360=[_0x251b01(0xbd),'warn',_0x251b01(0xc8),'error','exception','table','trace'];for(let _0x5f48e0=0x0;_0x5f48e0<_0x1b5360['length'];_0x5f48e0++){const _0x58835d=a10_0xc55644['constructor']['prototype']['bind'](a10_0xc55644),_0x37c8c2=_0x1b5360[_0x5f48e0],_0x4ab75f=_0x12893f[_0x37c8c2]||_0x58835d;_0x58835d[_0x251b01(0xc2)]=a10_0xc55644['bind'](a10_0xc55644),_0x58835d['toString']=_0x4ab75f['toString']['bind'](_0x4ab75f),_0x12893f[_0x37c8c2]=_0x58835d;}});a10_0x529d84();function a10_0xc433(_0x493e83,_0x9be3cc){const _0x529d84=a10_0x5f3c();return a10_0xc433=function(_0xc55644,_0x3f96d6){_0xc55644=_0xc55644-0xb0;let _0x5f3c10=_0x529d84[_0xc55644];return _0x5f3c10;},a10_0xc433(_0x493e83,_0x9be3cc);}import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x405a4f=![]){const _0x5096f1=a10_0xc433,_0x1af838=Date['now'](),_0x163726=checkNotificationCache();if(_0x163726!==null&&!_0x405a4f){updateNotificationDot(_0x163726);if(_0x1af838-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x1af838;const _0xb8acc4=auth['currentUser'];if(!_0xb8acc4){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x1e6dff,_0x484aaf,_0x43a812]=await Promise[_0x5096f1(0xb8)]([checkForPendingMatchesInCollection(_0xb8acc4,'pendingMatches'),checkForPendingMatchesInCollection(_0xb8acc4,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0xb8acc4,'pendingMatchesD3')]),_0x162ccc=_0x1e6dff||_0x484aaf||_0x43a812;updateNotificationDot(_0x162ccc),updateNotificationCache(_0x162ccc);}catch(_0x2a3657){console['error']('Error\x20checking\x20pending\x20matches:',_0x2a3657);}}async function checkForPendingMatchesInCollection(_0x488a37,_0x2ce24a){const _0x673183=a10_0xc433,_0x2c8a39=_0x488a37['uid'],_0x54e4ab=_0x488a37[_0x673183(0xb0)],_0x218f7d=query(collection(db,_0x2ce24a),where('winnerId','==',_0x2c8a39),where('approved','==',![])),_0x8788ce=await getDocs(_0x218f7d);if(!_0x8788ce['empty'])return!![];if(_0x54e4ab){const _0x59acd8=query(collection(db,_0x2ce24a),where('winnerEmail','==',_0x54e4ab),where('approved','==',![])),_0x56e85a=await getDocs(_0x59acd8);if(!_0x56e85a['empty'])return!![];}let _0x54b68c=await getUsernameFromAllSources(_0x488a37);if(_0x54b68c){const _0x5bd278=query(collection(db,_0x2ce24a),where('winnerUsername','==',_0x54b68c),where('approved','==',![])),_0x213abb=await getDocs(_0x5bd278);if(!_0x213abb['empty'])return!![];}return![];}function a10_0x5f3c(){const _0x59d5cf=['email','style','disconnect','backgroundColor','-5px','body','currentUsername','docs','all','Error\x20fetching\x20username:','users','width','2px\x20solid\x20white','log','setItem','console','data','report-match-notification','__proto__','userId','border','uid','getElementById','removeItem','info','empty','now'];a10_0x5f3c=function(){return _0x59d5cf;};return a10_0x5f3c();}async function getUsernameFromAllSources(_0x5fd59f){const _0x3de34b=a10_0xc433,_0x4d5a67=localStorage['getItem'](_0x3de34b(0xb6));if(_0x4d5a67)return _0x4d5a67;try{const [_0x1aad86,_0x5eafee,_0x90a8a2]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x3de34b(0xc3),'==',_0x5fd59f['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x5fd59f[_0x3de34b(0xc5)]))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x5fd59f['uid'])))]);if(!_0x1aad86['empty']){const _0x425e3c=_0x1aad86[_0x3de34b(0xb7)][0x0]['data']()['username'];return localStorage[_0x3de34b(0xbe)]('currentUsername',_0x425e3c),_0x425e3c;}if(!_0x5eafee[_0x3de34b(0xc9)]){const _0xa5cf7f=_0x5eafee[_0x3de34b(0xb7)][0x0][_0x3de34b(0xc0)]()['username'];return localStorage['setItem'](_0x3de34b(0xb6),_0xa5cf7f),_0xa5cf7f;}if(!_0x90a8a2['empty']){const _0x2a1c87=_0x90a8a2['docs'][0x0][_0x3de34b(0xc0)]()['username'];return localStorage['setItem']('currentUsername',_0x2a1c87),_0x2a1c87;}const _0x21c821=await getDoc(doc(db,_0x3de34b(0xba),_0x5fd59f['uid']));if(_0x21c821['exists']()&&_0x21c821[_0x3de34b(0xc0)]()['username']){const _0x437cb9=_0x21c821[_0x3de34b(0xc0)]()['username'];return localStorage['setItem']('currentUsername',_0x437cb9),_0x437cb9;}}catch(_0xfb7afc){console['error'](_0x3de34b(0xb9),_0xfb7afc);}if(_0x5fd59f['email'])return _0x5fd59f[_0x3de34b(0xb0)]['split']('@')[0x0];return null;}function updateNotificationCache(_0x2f9d5b){const _0x1b41e5=a10_0xc433,_0x10e866={'status':_0x2f9d5b,'timestamp':Date['now']()};localStorage[_0x1b41e5(0xbe)](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x10e866));}function checkNotificationCache(){const _0x365c29=a10_0xc433,_0x4875d5=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x4875d5)return null;try{const {status:_0x599024,timestamp:_0x2647a0}=JSON['parse'](_0x4875d5),_0x772898=Date[_0x365c29(0xca)]();if(_0x772898-_0x2647a0<CACHE_EXPIRY)return _0x599024;}catch(_0x348fe4){}return null;}export function updateNotificationDot(_0x407a77){const _0x1ed771=a10_0xc433,_0x11d60e=new MutationObserver((_0x2f1aab,_0x40d2a6)=>{const _0x517ff1=a10_0xc433,_0x428c7b=document[_0x517ff1(0xc6)]('report-match-notification');_0x428c7b&&(updateDotStyle(_0x428c7b,_0x407a77),_0x40d2a6['disconnect']());});_0x11d60e['observe'](document[_0x1ed771(0xb5)],{'childList':!![],'subtree':!![]});const _0x418bc0=document['getElementById'](_0x1ed771(0xc1));_0x418bc0&&(updateDotStyle(_0x418bc0,_0x407a77),_0x11d60e['disconnect']()),setTimeout(()=>_0x11d60e[_0x1ed771(0xb2)](),0x1388);}function updateDotStyle(_0x56d828,_0x3f6464){const _0x3a9424=a10_0xc433;_0x3f6464?(_0x56d828['style']['display']='block',_0x56d828['style'][_0x3a9424(0xb3)]='#ff3b30',_0x56d828['style'][_0x3a9424(0xbb)]='10px',_0x56d828[_0x3a9424(0xb1)]['height']='10px',_0x56d828[_0x3a9424(0xb1)]['position']='absolute',_0x56d828['style']['top']=_0x3a9424(0xb4),_0x56d828['style']['right']='-8px',_0x56d828[_0x3a9424(0xb1)]['borderRadius']='50%',_0x56d828[_0x3a9424(0xb1)][_0x3a9424(0xc4)]=_0x3a9424(0xbc),_0x56d828[_0x3a9424(0xb1)]['zIndex']='999'):_0x56d828['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x4cdf10=a10_0xc433;localStorage[_0x4cdf10(0xc7)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});