import a22_0x1a62d2,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';function a22_0x5a87(_0x3257c7,_0x4ebcc8){const _0x468b64=a22_0x27bb();return a22_0x5a87=function(_0x51ba40,_0x3b2566){_0x51ba40=_0x51ba40-0x10f;let _0x27bb2a=_0x468b64[_0x51ba40];return _0x27bb2a;},a22_0x5a87(_0x3257c7,_0x4ebcc8);}const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x2d939c=a22_0x5a87;if(document['getElementById'](_0x2d939c(0x143)))return;const _0x6417b8=document[_0x2d939c(0x133)]('div');_0x6417b8['id']='idle-overlay',_0x6417b8['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x3a6e80=document[_0x2d939c(0x133)]('div');_0x3a6e80['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x49d1b4=document['createElement']('h2');_0x49d1b4['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x49d1b4['style'][_0x2d939c(0x13a)]='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x5dda47=document['createElement']('p');_0x5dda47['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x5dda47['style'][_0x2d939c(0x13a)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x31566c=document[_0x2d939c(0x133)](_0x2d939c(0x11c));_0x31566c['id']='resume-session-btn',_0x31566c['textContent']='Return\x20to\x20Website',_0x31566c['style']['cssText']=_0x2d939c(0x13f),_0x31566c[_0x2d939c(0x139)]=function(){const _0xd1bb33=_0x2d939c;this[_0xd1bb33(0x128)][_0xd1bb33(0x135)]='#3da05f';},_0x31566c['onmouseout']=function(){const _0x41caca=_0x2d939c;this['style'][_0x41caca(0x135)]='#50C878';},_0x3a6e80['appendChild'](_0x49d1b4),_0x3a6e80[_0x2d939c(0x12d)](_0x5dda47),_0x3a6e80['appendChild'](_0x31566c),_0x6417b8['appendChild'](_0x3a6e80),document[_0x2d939c(0x126)][_0x2d939c(0x12d)](_0x6417b8),_0x31566c[_0x2d939c(0x11e)]('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x3c5a12=a22_0x5a87;if(document[_0x3c5a12(0x13e)]('network-error-overlay'))return;const _0x123b1d=document[_0x3c5a12(0x133)]('div');_0x123b1d['id']=_0x3c5a12(0x138),_0x123b1d['style'][_0x3c5a12(0x13a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x3a5159=document['createElement'](_0x3c5a12(0x129));_0x3a5159[_0x3c5a12(0x128)]['cssText']=_0x3c5a12(0x12a);const _0x51b6d4=document['createElement']('h2');_0x51b6d4['textContent']=_0x3c5a12(0x124),_0x51b6d4[_0x3c5a12(0x128)][_0x3c5a12(0x13a)]='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x4bfad0=document['createElement']('p');_0x4bfad0['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x4bfad0[_0x3c5a12(0x128)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x2c7740=document['createElement']('button');_0x2c7740['id']='retry-connection-btn',_0x2c7740[_0x3c5a12(0x10f)]='Retry\x20Connection',_0x2c7740['style']['cssText']=_0x3c5a12(0x11f);const _0x275db2=document['createElement'](_0x3c5a12(0x11c));_0x275db2['id']='reload-page-btn',_0x275db2['textContent']='Reload\x20Page',_0x275db2['style']['cssText']=_0x3c5a12(0x113);const _0x36262b=document['createElement']('div');_0x36262b['style']['cssText']=_0x3c5a12(0x127),_0x36262b['appendChild'](_0x2c7740),_0x36262b['appendChild'](_0x275db2),_0x3a5159['appendChild'](_0x51b6d4),_0x3a5159['appendChild'](_0x4bfad0),_0x3a5159['appendChild'](_0x36262b),_0x123b1d['appendChild'](_0x3a5159),document['body']['appendChild'](_0x123b1d),_0x2c7740['addEventListener']('click',retryConnection),_0x275db2['addEventListener']('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x44bc33=a22_0x5a87;clearTimeout(idleTimer);const _0x45dd78=document['getElementById']('network-error-overlay');_0x45dd78&&(_0x45dd78[_0x44bc33(0x128)][_0x44bc33(0x117)]='flex'),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x1a62d2['suspendAllListeners']();}function a22_0x27bb(){const _0x45a68c=['textContent','Network\x20error:','flex','exception','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','querySelector','system','constructor','display','none','preventDefault','opacity','getDocs','button','not-allowed','addEventListener','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20','reload','RDL_NETWORK_ERROR','message','resumeAllListeners','Connection\x20Error','Forcing\x20idle\x20timeout...','body','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','style','div','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','log','RDL_LAST_ACTIVITY','appendChild','error','blockedOperations','info','suspendSession','return\x20(function()\x20','createElement','from','backgroundColor','Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.','mousemove','network-error-overlay','onmouseover','cssText','click','retry-connection-btn','RDL_SESSION_SUSPENDED','getElementById','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','size','Active\x20listeners:','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','idle-overlay'];a22_0x27bb=function(){return _0x45a68c;};return a22_0x27bb();}function retryConnection(){const _0x505316=a22_0x5a87;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x4df622=document[_0x505316(0x114)]('#network-error-overlay\x20p');_0x4df622&&(_0x4df622[_0x505316(0x10f)]=_0x505316(0x136));const _0x3397ab=document['getElementById'](_0x505316(0x13c));_0x3397ab&&(_0x3397ab['disabled']=!![],_0x3397ab[_0x505316(0x128)][_0x505316(0x11a)]='0.5',_0x3397ab['style']['cursor']=_0x505316(0x11d));return;}const _0x256f2a=document[_0x505316(0x13e)]('network-error-overlay');_0x256f2a&&(_0x256f2a['style'][_0x505316(0x117)]='none');window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x5749dc}=window;if(_0x5749dc){const _0x69e2e3=_0x5749dc['collection'](_0x505316(0x115));_0x5749dc[_0x505316(0x11b)](_0x69e2e3)['catch'](_0xaaa038=>{console['error']('Connection\x20test\x20failed:',_0xaaa038),handleNetworkError();});}}catch(_0x39e07e){console['error']('Failed\x20to\x20test\x20connection:',_0x39e07e),handleNetworkError();}a22_0x1a62d2['resumeAllListeners']();}function suspendSession(){const _0x53dd23=a22_0x5a87;isSessionSuspended=!![];const _0x45418d=document[_0x53dd23(0x13e)]('idle-overlay');_0x45418d&&(_0x45418d[_0x53dd23(0x128)]['display']=_0x53dd23(0x111)),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a22_0x1a62d2['suspendAllListeners']();}function resumeSession(){const _0x3daa36=a22_0x5a87;isSessionSuspended=![],window[_0x3daa36(0x13d)]=![];const _0x2463c3=document['getElementById'](_0x3daa36(0x143));_0x2463c3&&(_0x2463c3[_0x3daa36(0x128)]['display']=_0x3daa36(0x118)),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0x1a62d2[_0x3daa36(0x123)](),idleTimer&&Date['now']()-(window[_0x3daa36(0x12c)]||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x3daa36(0x142)),window['location'][_0x3daa36(0x120)]());}function initIdleTimeout(){const _0x2ec310=a22_0x5a87,_0x1d12b1=(function(){let _0x48174e=!![];return function(_0xd424de,_0x4cfc9c){const _0x386567=_0x48174e?function(){if(_0x4cfc9c){const _0x27242a=_0x4cfc9c['apply'](_0xd424de,arguments);return _0x4cfc9c=null,_0x27242a;}}:function(){};return _0x48174e=![],_0x386567;};}()),_0x154b94=_0x1d12b1(this,function(){const _0x1636ca=a22_0x5a87,_0xc670e4=function(){const _0x533c6a=a22_0x5a87;let _0x2cbcf5;try{_0x2cbcf5=Function(_0x533c6a(0x132)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2c8350){_0x2cbcf5=window;}return _0x2cbcf5;},_0x8122a3=_0xc670e4(),_0x172ea2=_0x8122a3['console']=_0x8122a3['console']||{},_0x52a157=['log','warn',_0x1636ca(0x130),'error',_0x1636ca(0x112),'table','trace'];for(let _0x3b7757=0x0;_0x3b7757<_0x52a157['length'];_0x3b7757++){const _0x10822b=_0x1d12b1[_0x1636ca(0x116)]['prototype']['bind'](_0x1d12b1),_0x2ee6b9=_0x52a157[_0x3b7757],_0x29ed19=_0x172ea2[_0x2ee6b9]||_0x10822b;_0x10822b['__proto__']=_0x1d12b1['bind'](_0x1d12b1),_0x10822b['toString']=_0x29ed19['toString']['bind'](_0x29ed19),_0x172ea2[_0x2ee6b9]=_0x10822b;}});_0x154b94(),createIdleOverlay();const _0xd7fcf2=['mousedown',_0x2ec310(0x137),'keypress','scroll','touchstart',_0x2ec310(0x13b)];_0xd7fcf2['forEach'](_0x53c0ee=>{const _0x49250e=_0x2ec310;document[_0x49250e(0x11e)](_0x53c0ee,()=>{const _0x597411=_0x49250e;window[_0x597411(0x12c)]=Date['now'](),resetIdleTimer();},!![]);}),window[_0x2ec310(0x11e)]('error',function(_0x9d21c0){const _0x16058b=_0x2ec310;_0x9d21c0['error']&&(_0x9d21c0['error']['message']&&_0x9d21c0['error'][_0x16058b(0x122)]['includes']('network')||_0x9d21c0[_0x16058b(0x12e)]['code']&&(_0x9d21c0[_0x16058b(0x12e)]['code']==='unavailable'||_0x9d21c0['error']['code']==='resource-exhausted'||_0x9d21c0[_0x16058b(0x12e)]['code']['includes']('network')))&&(handleNetworkError(),_0x9d21c0[_0x16058b(0x119)]());}),resetIdleTimer(),console[_0x2ec310(0x12b)]('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window[_0x2ec310(0x131)]=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x161866=_0x2ec310;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log'](_0x161866(0x110),window[_0x161866(0x121)]),console['log'](_0x161866(0x141),a22_0x1a62d2['activeListeners']['size']),console['log']('Pending\x20operations:',a22_0x1a62d2['pendingOperations'][_0x161866(0x140)]),console[_0x161866(0x12b)]('Blocked\x20operations:',a22_0x1a62d2[_0x161866(0x12f)]||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window[_0x161866(0x121)],'activeListeners':Array[_0x161866(0x134)](a22_0x1a62d2['activeListeners']['keys']()),'pendingOperations':Array['from'](a22_0x1a62d2['pendingOperations']['keys']()),'blockedCount':a22_0x1a62d2[_0x161866(0x12f)]||0x0};},window['forceIdleTimeout']=function(){const _0x5834f6=_0x2ec310;console['log'](_0x5834f6(0x125)),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();