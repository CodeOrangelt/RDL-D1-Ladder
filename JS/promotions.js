const a43L=a43d;function a43d(a,b){const c=a43c();return a43d=function(d,e){d=d-0x1c1;let f=c[d];if(a43d['gcywvm']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a43d['qDWZJK']=g,a=arguments,a43d['gcywvm']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a43d['qDWZJK'](f),a[i]=f):f=j,f;},a43d(a,b);}function a43c(){const a7=['nJyWs1LXu0XQ','DgHLBG','qsbWBgf5zxi','ww91j3zLigjLzw4GzgvTB3rLzcb0BW','BgfKzgvY','zMv0y2HjBNrLCNzHBa','sw52ywXPzcbZDg9YywDLigzVCM1HDcbMB3iG','Dgv4DenVBNrLBNq','C2HVDwXKu2HVD1bYB21VDgLVBG','igzVCIa','CMvZB2X2zvvZzxjjza','lcb0CMvHDgLUzYbHCYbUzxC','mtzyzvH4EgG','Aw5JBhvKzxm','y29UC3rYDwn0B3i','y2XHC3noyw1L','ChjVBw90Aw9UC19JAgvJA2vKxW','C3rYAw5NAwz5','BM93','CMvTB3zL','D2fYBG','DgLTzxn0yw1W','C2v0sxrLBq','AwDUB3jLza','CMfUAY1JAgfUz2uTBw9KywWG','BM9Uzq','C2vUzfbYB21VDgLVBK5VDgLMAwnHDgLVBG','CgXHEwvYvxnLCM5HBwu','uMvJB3jKAw5Nia','CgfYzw50tM9Kzq','iZuWqZG3oa','ChjLDMLVDxnsyw5R','Aw5Uzxjive1m','zgf0yq','mti4nuPUz1fjzq','z2v0uMfUA05HBwu','C2HVD1jHBMTdAgfUz2vcyw5Uzxi','BgfZDezLDgnOvgLTzq','zgvZyW','y2XHC3nmAxn0','zgLZBwLZC2LUzW','ChjVBw90Aw9U','y29TBwL0','Bg9ZzxjvC2vYBMfTzq','yMXVy2S','rxjYB3iGC2f2Aw5NihbYB21VDgLVBIbWCMvMzxjLBMnLoG','yxbWBhK','rxjYB3iGCMvZB2X2Aw5NihvZzxiGsuq6','C29Tzq','y2XLyw51Ca','uhjVBw90Aw9Uia','zxHJzxb0Aw9U','rxjYB3iGD3jPDgLUzYbWCM9TB3rPB24GCMvJB3jKCZO','Bg9N','zw1WDhK','y3vYCMvUDfvZzxi','D2LUBMvYvxnLCM5HBwu','yMLUza','mJa1mJi1mgHlBxn1qW','Dg9nAwXSAxm','rxjYB3iGzMv0y2HPBMCGChjVBw90Aw9UCZO','CMvZB2X2zwroyw1L','zgf0ys1Yyw5R','Bwf0y2Hjza','u2TPChbPBMCGAwDUB3jLzcbWCM9TB3rPB246ia','DgfYz2v0','BMv3uMfUAW','rxjYB3iGy2HLy2TPBMCGChjVBw90Aw9UihzPC2LIAwXPDhK6','ChjVBw90Aw9UsgLZDg9YEq','DgfIBgu','mtHJrxLsywi','yxbWzw5Kq2HPBgq','zxHPC3rZ','CgXHEwvY','DxnLCKLK','y2HPBgrYzw4','y2XPy2S','odeWneTQvxbgtG','igHVDxjZ','rMfSBgjHy2SGD3jPDguGzMfPBgvKoG','pc9WpGOGicaGicaGicaGicaGicaGpgGZignSyxnZpsjYyw5Rlw5HBwuIpG','DhLWzq','DMLZAwjSzq','tMv2zxiGC2HVDYb0AgLZihbYB21VDgLVBIbHz2fPBG','ndiZB2TcBvjQ','rgLZy29YzcbUB3rPzMLJyxrPB24GC2vUDcbZDwnJzxnZzNvSBhKGD2L0AcbjrdOG','BgvUz3rO','z2v0rwXLBwvUDej5swq','mJyZndG3vfPtELLl','CgfYC2u','C2v0','zgL2','C29YDa','q29Uz3jHDhvSyxrPB25Ziq','reLtueXbwv9it1vsuW','uKfos1m','Dhj1zq','zgLZCgXHEq','re9nq29UDgvUDeXVywrLza','zgLZCgXHEu5HBwu','DMLZAwjPBgL0Evn0yxrL','yM9KEq','ihDHCYbWCM9TB3rLzcb0BW','y3jLyxrLrwXLBwvUDa','ChjVy2vZC1jHBMTdAgfUz2vZ','C3r5Bgu','ihDHCYbKzw1VDgvKihrV','zw1HAwW','CMfUA0fJAgLLDMvK','ChjVBw90Aw9UxW','mtK1otG2mhfvvu9Iwq','yMfUBMvYq29UDgfPBMvY','ndqXmuPWC0HVEG','yxbWCM92zwrnyxrJAgvZ','ww91j3zLigjLzw4GChjVBw90zwqGDg8','CgXHEwvYCW','u1rbuLrjtKCGBM90AwzPy2f0Aw9UigzVCIa','mtmYzMLwyuzx','igLZihbLCM1HBMvUDgX5igLNBM9Yzwq','Cg9SBgLUz0LUDgvYDMfS','q3jLyxrPBMCGrgLZy29YzcbUB3rPzMLJyxrPB246','uhjVBw90Aw9UigjHBM5LCIbJB250ywLUzxiGBM90igzVDw5K','ksdIHPiG','jNrPBwvZoW','y2HLy2TbBMrszwnVCMrqCM9TB3rPB24','AxnozxDsyw5Rq2HHBMDL','BMv3lxjHBMSTy2HHBMDL','Bg9Zzxjjza','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','rgLZBwLZCW','ywrKrxzLBNrmAxn0zw5LCG','y29UC29Szq','zxjYB3i','idXZCgfUignSyxnZpsjYyw5RlxrLEhqIpG','CMfUAY1JAgfUz2uTB2STyNrU','yxv0B21HDgLJ','DhjHy2u','DxnLCM5HBwu','CMfUA0nOyw5Nzu1VzgfS','zg9JCW','DMLZAwjPBgL0EwnOyw5Nzq','mte0nJyYnxbMtgPRzG','DgHYzxnOB2XK','ihrVia','z2v0sxrLBq','rMfPBgvKihrVihjLC29SDMuGDxnLCIbjrdOG'];a43c=function(){return a7;};return a43c();}(function(a,b){const C=a43d,c=a();while(!![]){try{const d=parseInt(C(0x1ed))/0x1*(-parseInt(C(0x1cb))/0x2)+-parseInt(C(0x223))/0x3*(parseInt(C(0x1d7))/0x4)+parseInt(C(0x1c6))/0x5+parseInt(C(0x211))/0x6*(parseInt(C(0x239))/0x7)+-parseInt(C(0x218))/0x8*(parseInt(C(0x21f))/0x9)+parseInt(C(0x205))/0xa+-parseInt(C(0x23b))/0xb*(-parseInt(C(0x240))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a43c,0x6f4f4));const a43b=(function(){let a=!![];return function(b,c){const d=a?function(){const D=a43d;if(c){const e=c[D(0x1f9)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a43a=a43b(this,function(){const E=a43d;let a;try{const d=Function('return\x20(function()\x20'+E(0x24b)+');');a=d();}catch(f){a=window;}const b=a[E(0x24e)]=a[E(0x24e)]||{},c=['log','warn','info','error',E(0x1fe),E(0x210),E(0x1c1)];for(let g=0x0;g<c['length'];g++){const h=a43b[E(0x1d9)]['prototype']['bind'](a43b),i=c[g],j=b[i]||h;h['__proto__']=a43b[E(0x204)](a43b),h['toString']=j['toString']['bind'](j),b[i]=h;}});a43a();import{collection,doc,query,where,orderBy,limit,getDocs,addDoc,getDoc,serverTimestamp,writeBatch}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';class PromotionManager{constructor(){const F=a43d;this['DISPLAY_HOURS']=0x18,this[F(0x22a)]=[{'threshold':0x578,'name':'Bronze','color':'#CD7F32'},{'threshold':0x640,'name':'Silver','color':'#C0C0C0'},{'threshold':0x708,'name':'Gold','color':'#FFD700'},{'threshold':0x834,'name':'Emerald','color':F(0x1e9)}],this[F(0x23a)]=null,this['lastFetchTime']=0x0,this['fetchInterval']=0xea60,this[F(0x242)]=null,this['usernameCache']={};}['initialize'](){const G=a43d;this['bannerContainer']=document[G(0x222)]('promotion-banner-container');if(!this['bannerContainer']){console[G(0x24f)](G(0x244));return;}this['setupBannerContainer']();const a=G(0x1db)+new Date()['toDateString'](),b=sessionStorage['getItem'](a);!b&&(this['fetchRecentPromotions'](),sessionStorage['setItem'](a,G(0x22b))),document[G(0x24d)](G(0x1c5),()=>{const H=G;document[H(0x22f)]===H(0x21d)&&!sessionStorage[H(0x1c9)](a)&&(this['fetchRecentPromotions'](),sessionStorage[H(0x1e1)](a,H(0x22b)));}),window[G(0x24d)]('beforeunload',()=>{this['pollingInterval']&&clearInterval(this['pollingInterval']);});}['setupBannerContainer'](){const I=a43d;this[I(0x23a)][I(0x1eb)]='',this['bannerContainer']['style'][I(0x22c)]=I(0x1e4);}async['fetchRecentPromotions'](){const J=a43d;try{const a=Date['now']();if(a-this['lastFetchTime']<this[J(0x1d0)])return;this[J(0x1f0)]=a;const b=collection(db,'eloHistory'),c=query(b,where(J(0x21c),'in',[J(0x1f4),'demotion']),orderBy(J(0x1e0),'desc'),limit(0x14)),d=await getDocs(c),e=[];d['forEach'](f=>{const K=J,g={'id':f['id'],...f['data']()};this[K(0x1d3)](f['id'])&&this['isNewRankChange'](g)&&e['push'](g);}),e[J(0x221)]>0x0&&await this[J(0x233)](e);}catch(f){console['error'](J(0x207),f);}}async[a43L(0x233)](a){const M=a43L;if(a['length']===0x0)return;a[M(0x227)]((e,f)=>{const N=M,g=e[N(0x1e0)]?.[N(0x206)]?.()||e['timestamp']?.['seconds']*0x3e8||0x0,h=f['timestamp']?.['toMillis']?.()||f[N(0x1e0)]?.['seconds']*0x3e8||0x0;return h-g;});const b=this['bannerContainer']['children'][M(0x221)],c=0x3-b;if(c<=0x0)return;const d=a['slice'](0x0,c);for(let e=0x0;e<d['length'];e++){const f=d[e],g=auth['currentUser'];try{setTimeout(()=>{const O=M;this[O(0x1ef)](f);},e*0x3e8),g&&f['player']===g[M(0x22e)]&&this['showRankChangeLightbox'](f[M(0x21c)],f['rankAchieved']);}catch(h){console['error']('Error\x20processing\x20rank\x20change:',h);}}}['shouldShowPromotion'](a){const P=a43L;try{const b=P(0x238)+a,c=localStorage['getItem'](b);if(c){let d;try{d=JSON[P(0x224)](c);}catch(g){return console[P(0x1df)](P(0x1d1)+b+P(0x1d6)),!![];}if(d['ignored']===!![])return console['log']('Promotion\x20'+a+P(0x241)),![];const f=Date['now']();if(d['userDismissed']&&f-d['timestamp']<this[P(0x229)]*0x3c*0x3c*0x3e8)return console['log']('Promotion\x20'+a+'\x20was\x20dismissed\x20by\x20user\x20within\x20last\x20'+this[P(0x229)]+P(0x219)),![];if(d['systemDismissed']&&f-d['timestamp']<0x4*0x3c*0x3c*0x3e8)return console[P(0x200)](P(0x1fd)+a+'\x20was\x20auto-dismissed\x20within\x20last\x204\x20hours'),![];}return!![];}catch(h){return console[P(0x24f)](P(0x20e),h),![];}}['ignorePromotion'](a){const Q=a43L;try{const b=Q(0x238)+a;localStorage['setItem'](b,JSON['stringify']({'timestamp':Date[Q(0x1dd)](),'ignored':!![]}));}catch(c){console['error'](Q(0x1f8),c);}}[a43L(0x1ef)](a){const R=a43L;this[R(0x1d5)](a)[R(0x1cc)](b=>{const S=R,c=S(0x238)+a['id'],d=localStorage['getItem'](c);if(d)try{const m=JSON['parse'](d);if(m[S(0x1e2)]===!![]){console['log'](S(0x20b)+a['id']);return;}}catch(n){}localStorage['setItem'](c,JSON['stringify']({'timestamp':Date['now'](),'ignored':![],'userDismissed':![],'systemDismissed':![],'seenAt':Date['now']()})),this[S(0x23a)][S(0x234)][S(0x22c)]=S(0x1f7);while(this[S(0x23a)][S(0x216)][S(0x221)]>=0x3){this['bannerContainer']['removeChild'](this[S(0x23a)]['firstChild']);}const f=document[S(0x232)](S(0x226));f['className']='promotion-banner',f['setAttribute'](S(0x209),b['rankAchieved']),f['setAttribute']('data-id',b['id']);const g=document['createElement']('div');g[S(0x1da)]='promotion-details';const h=b[S(0x208)]||b['player']||b['username']||b['playerUsername']||b['displayName']||S(0x1cd),i=b[S(0x21c)]==='promotion'?h+S(0x231):h+S(0x235);g['innerHTML']=i+S(0x250)+b[S(0x237)]+'</span>';const j=document['createElement'](S(0x226));j[S(0x1da)]='banner-actions';const k=document['createElement']('button');k[S(0x1da)]='dismiss-btn',k[S(0x1eb)]=S(0x246),k['title']=S(0x24c);const l=document['createElement']('button');l['className']='ignore-btn',l[S(0x1d2)]='Don\x27t\x20show\x20again',l['title']=S(0x21e),j['appendChild'](l),j[S(0x212)](k),f[S(0x212)](g),f['appendChild'](j),this[S(0x23a)]['appendChild'](f),void f['offsetWidth'],setTimeout(()=>{f['classList']['add']('new-rank-change');},0x32),k[S(0x24d)](S(0x217),()=>{const T=S;localStorage['setItem'](c,JSON[T(0x1dc)]({'timestamp':Date[T(0x1dd)](),'ignored':![],'userDismissed':!![],'systemDismissed':![]})),f[T(0x1f2)][T(0x1de)](T(0x249)),f['classList']['add'](T(0x1f3)),setTimeout(()=>{const U=T;f['parentNode']&&(f['remove'](),this[U(0x23a)]['children'][U(0x221)]===0x0&&(this['bannerContainer'][U(0x234)][U(0x22c)]=U(0x1e4)));},0x1f4);}),l['addEventListener'](S(0x217),()=>{const V=S;localStorage['setItem'](c,JSON['stringify']({'timestamp':Date[V(0x1dd)](),'ignored':!![],'userDismissed':!![],'systemDismissed':![]})),f[V(0x1f2)]['remove']('new-rank-change'),f[V(0x1f2)]['add'](V(0x1f3)),setTimeout(()=>{const W=V;f['parentNode']&&(f[W(0x1de)](),this['bannerContainer']['children'][W(0x221)]===0x0&&(this['bannerContainer'][W(0x234)]['display']='none'));},0x1f4);}),setTimeout(()=>{const X=S;f[X(0x1e8)]&&(f['classList'][X(0x1de)]('new-rank-change'),f['classList']['add'](X(0x1f3)),localStorage[X(0x1e1)](c,JSON[X(0x1dc)]({'timestamp':Date['now'](),'ignored':![],'userDismissed':![],'systemDismissed':!![]})),setTimeout(()=>{const Y=X;f[Y(0x1e8)]&&(f[Y(0x1de)](),this[Y(0x23a)]['children'][Y(0x221)]===0x0&&(this['bannerContainer']['style']['display']='none'));},0x1f4));},0x3a98);});}async[a43L(0x1d5)](a){const Z=a43L,b={...a},c=[a[Z(0x214)],a['username'],a[Z(0x1e6)],a['displayName']],d=c[Z(0x1fb)](f=>f&&typeof f==='string'&&!f[Z(0x1d8)]('ID:')&&!/^[a-zA-Z0-9]{20,}$/['test'](f));if(d)return b;let e=null;if(a['userId'])e=a[Z(0x215)];else a['player']&&/^[A-Za-z0-9]{20,}$/['test'](a['player'])&&(e=a['player']);if(!e)return b;try{const f=await getDoc(doc(db,Z(0x23e),e));if(f['exists']()){const i=f[Z(0x1ec)]();if(i[Z(0x1c2)])return b[Z(0x208)]=i['username'],b;}const g=await getDocs(query(collection(db,Z(0x23c)),where('winnerId','==',e),orderBy('date',Z(0x1f1)),limit(0x1)));if(!g['empty']){const j=g[Z(0x1c4)][0x0]['data']();if(j[Z(0x203)])return b[Z(0x208)]=j[Z(0x203)],b;}const h=await getDocs(query(collection(db,'approvedMatches'),where(Z(0x24a),'==',e),orderBy('date','desc'),limit(0x1)));if(!h[Z(0x201)]){const k=h['docs'][0x0]['data']();if(k[Z(0x1f6)])return b['resolvedName']=k[Z(0x1f6)],console['log']('Resolved\x20'+e+Z(0x1c8)+k['loserUsername']+'\x20(loser)'),b;}}catch(l){console['error'](Z(0x1fa),l);}return console['warn'](Z(0x1ca)+e),b;}['showRankChangeLightbox'](a,b){const a0=a43L;let c=document[a0(0x222)](a0(0x1c3));!c&&(c=document[a0(0x232)]('div'),c['id']=a0(0x1c3),c[a0(0x1da)]=a0(0x1e3)+a,document[a0(0x230)][a0(0x212)](c));const d=a===a0(0x1f4)?a0(0x228):'Rank\x20Update',e=a===a0(0x1f4)?a0(0x23d):a0(0x1ce);c[a0(0x1eb)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank-change-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2\x20class=\x22rank-change-title\x22>'+d+'</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+e+a0(0x21b)+b+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22rank-change-button\x22\x20id=\x22rank-change-ok-btn\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Got\x20it!\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',c[a0(0x234)][a0(0x22c)]='flex',document[a0(0x222)](a0(0x251))[a0(0x24d)](a0(0x217),()=>{const a1=a0;c['style'][a1(0x22c)]='none';}),c['addEventListener']('click',f=>{const a2=a0;f[a2(0x20c)]===c&&(c[a2(0x234)][a2(0x22c)]='none');});}async[a43L(0x247)](a,b,c,d={}){const a3=a43L;try{if(b===c||!a)return null;const e=d['source']||a3(0x252),f=d[a3(0x20a)]||null,g=d['adminUser']||null;console[a3(0x200)]('Processing\x20potential\x20rank\x20change:\x20'+c+'\x20â†’\x20'+b+'\x20(source:\x20'+e+')');let h=null,i=null;try{const l=await getDoc(doc(db,a3(0x23e),a));if(l[a3(0x213)]()){const m=l['data']();h=m[a3(0x1c2)]||m['displayName']||null,i=m['displayName']||m[a3(0x1c2)]||null;}!h&&d['username']&&(h=d['username'],i=d[a3(0x1c2)]);!h&&auth[a3(0x202)]&&(h=auth[a3(0x202)]['displayName']||auth[a3(0x202)][a3(0x236)]['split']('@')[0x0],i=auth['currentUser'][a3(0x22e)]||null);if(!h){const n=query(collection(db,'approvedMatches'),where('winnerId','==',a),limit(0x1)),o=await getDocs(n);if(!o['empty'])h=o['docs'][0x0][a3(0x1ec)]()['winnerUsername']||'Unknown\x20Player',i=h;else{const p=query(collection(db,a3(0x23c)),where(a3(0x24a),'==',a),limit(0x1)),q=await getDocs(p);!q['empty']&&(h=q[0x0][a3(0x1ec)]()[a3(0x1f6)]||'Unknown\x20Player',i=h);}}}catch(r){console[a3(0x24f)]('Error\x20resolving\x20username:',r);}!h&&(console['warn']('Could\x20not\x20resolve\x20username\x20for\x20userId:',a),h=a3(0x1cd),i='Unknown\x20Player');const j=this['getRankName'](c),k=this[a3(0x1ee)](b);if(j!==k){const s=b>c,t=s?'promotion':'demotion',u=k;console[a3(0x200)](a3(0x1e7)+t+'\x20for\x20'+h+':\x20'+c+'\x20('+j+a3(0x245)+b+'\x20('+k+')');try{const v={'player':h,'playerUsername':h,'username':h,'displayName':i,'userId':a,'type':t,'rankAchieved':u,'timestamp':serverTimestamp(),'previousElo':c,'newElo':b,'change':b-c,'previousRank':j,'newRank':k,'source':e};if(e==='match'&&f)v['matchId']=f;else e==='admin'&&g?(v['modifiedBy']=g,v['isAutomatic']=![]):v['isAutomatic']=!![];const w=writeBatch(db),x=doc(collection(db,'eloHistory')),y=doc(collection(db,a3(0x20f)));return w[a3(0x225)](x,v),w[a3(0x225)](y,v),await w[a3(0x1f5)](),await this['sendPromotionNotification'](a,h,c,b,j,k,t,{'displayName':i,'source':e,'matchId':f,'ladder':d[a3(0x1cf)]||'D1'}),console['log']('Successfully\x20recorded\x20'+t+a3(0x1d4)+h+'\x20to\x20'+u),u;}catch(z){console[a3(0x24f)](a3(0x1ff),z);try{return await addDoc(collection(db,'eloHistory'),{'player':h,'playerUsername':h,'username':h,'displayName':i,'userId':a,'type':t,'rankAchieved':u,'timestamp':serverTimestamp(),'previousElo':c,'newElo':b,'change':b-c,'previousRank':j,'source':e,'isAutomatic':e!=='admin'}),await this['sendPromotionNotification'](a,h,c,b,j,k,t,{'displayName':i,'source':e,'matchId':f,'ladder':d[a3(0x1cf)]||'D1'}),u;}catch(A){return console[a3(0x24f)](a3(0x21a),A),null;}}}return null;}catch(B){return console['error']('Error\x20in\x20promotion/demotion\x20recording:',B),null;}}['getRankName'](a){const a4=a43L;for(let b=this[a4(0x22a)]['length']-0x1;b>=0x0;b--){if(a>=this['RANKS'][b][a4(0x1c7)])return this['RANKS'][b]['name'];}return'Unranked';}[a43L(0x1fc)](){this['pollingInterval']&&clearInterval(this['pollingInterval']);}[a43L(0x248)](a){const a5=a43L;if(a['timestamp']){const b=a['timestamp']['seconds']*0x3e8,c=Date['now'](),d=(c-b)/(0x3e8*0x3c*0x3c);if(d>0x18)return![];}if(a['previousRank']&&a['newRank']&&a[a5(0x1ea)]!==a[a5(0x20d)])return!![];return![];}async[a43L(0x1e5)](a,b,c,d,e,f,g,h={}){const a6=a43L;try{console['log'](a6(0x23f)+b+'\x27s\x20'+g);const i={'userId':a,'username':b,'displayName':h[a6(0x22e)]||b,'oldElo':parseInt(c),'newElo':parseInt(d),'eloDifference':parseInt(d)-parseInt(c),'oldRank':e,'newRank':f,'type':g,'timestamp':serverTimestamp(),'processed':![],'source':h['source']||a6(0x252),'matchId':h[a6(0x20a)]||null,'ladder':h[a6(0x1cf)]||'D1','adminUser':h['adminUser']||null};console[a6(0x200)](a6(0x243),i);const j=await addDoc(collection(db,'promotionNotifications'),i);return console['log'](a6(0x220)+j['id']),!![];}catch(k){return console[a6(0x24f)]('Error\x20sending\x20Discord\x20notification:',k),![];}}}export const promotionManager=new PromotionManager();document[a43L(0x24d)](a43L(0x22d),()=>{promotionManager['initialize']();});export const initializePromotionTracker=()=>promotionManager['initialize']();export const checkAndRecordPromotion=(a,b,c,d)=>promotionManager[a43L(0x247)](a,b,c,d);export const getRankName=a=>promotionManager['getRankName'](a);