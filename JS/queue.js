const a44_0x6e00f1=a44_0x349e,a44_0x1f6405=(function(){let _0x166871=!![];return function(_0x49eda7,_0x26227){const _0x282452=_0x166871?function(){if(_0x26227){const _0x3f041d=_0x26227['apply'](_0x49eda7,arguments);return _0x26227=null,_0x3f041d;}}:function(){};return _0x166871=![],_0x282452;};}()),a44_0x26735e=a44_0x1f6405(this,function(){const _0x26087e=a44_0x349e;let _0x5adfe5;try{const _0x41194e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5adfe5=_0x41194e();}catch(_0x5aee23){_0x5adfe5=window;}const _0x5f02a4=_0x5adfe5['console']=_0x5adfe5['console']||{},_0xffdcb4=['log','warn','info',_0x26087e(0x1c8),'exception','table','trace'];for(let _0x399e9f=0x0;_0x399e9f<_0xffdcb4['length'];_0x399e9f++){const _0xbf9bf8=a44_0x1f6405[_0x26087e(0x1c9)]['prototype'][_0x26087e(0x1cc)](a44_0x1f6405),_0x1dca8d=_0xffdcb4[_0x399e9f],_0x5d120c=_0x5f02a4[_0x1dca8d]||_0xbf9bf8;_0xbf9bf8['__proto__']=a44_0x1f6405[_0x26087e(0x1cc)](a44_0x1f6405),_0xbf9bf8['toString']=_0x5d120c['toString'][_0x26087e(0x1cc)](_0x5d120c),_0x5f02a4[_0x1dca8d]=_0xbf9bf8;}});a44_0x26735e();import{db}from'./firebase-config.js';function a44_0x2aa6(){const _0x1ad846=['display','style','Error\x20in\x20queue\x20listener:','error','constructor','isReady','username','bind','readyPlayers','toDate','lastUpdated','data','queue-container'];a44_0x2aa6=function(){return _0x1ad846;};return a44_0x2aa6();}function a44_0x349e(_0x4906d4,_0x449645){const _0x26735e=a44_0x2aa6();return a44_0x349e=function(_0x1f6405,_0x2a274e){_0x1f6405=_0x1f6405-0x1c5;let _0x2aa6e0=_0x26735e[_0x1f6405];return _0x2aa6e0;},a44_0x349e(_0x4906d4,_0x449645);}import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where(a44_0x6e00f1(0x1ca),'==',!![]));function updateQueueDisplay(_0x5ea1ab){const _0x3d05ee=a44_0x6e00f1,_0x5b2221=document['getElementById'](_0x3d05ee(0x1d1));if(!_0x5b2221)return;if(_0x5ea1ab['length']===0x0){_0x5b2221['style'][_0x3d05ee(0x1c5)]='none';return;}_0x5b2221[_0x3d05ee(0x1c6)][_0x3d05ee(0x1c5)]='block';let _0x4fcc55='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x5ea1ab['forEach'](_0x212c08=>{_0x4fcc55+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x212c08['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x212c08['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x4fcc55+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x5b2221['innerHTML']=_0x4fcc55;}function formatQueueTime(_0x4128d6){const _0x1adc80=a44_0x6e00f1;if(!_0x4128d6)return'Just\x20now';const _0x3add7b=_0x4128d6[_0x1adc80(0x1ce)]?_0x4128d6['toDate']():new Date(_0x4128d6),_0x44950e=new Date(),_0x39baec=Math['floor']((_0x44950e-_0x3add7b)/0xea60);if(_0x39baec<0x1)return'Just\x20now';return _0x39baec+'m\x20in\x20queue';}async function checkQueueTimeout(_0x33bb14){const _0x128224=a44_0x6e00f1;if(!_0x33bb14['lastUpdated'])return;const _0x298fc0=_0x33bb14[_0x128224(0x1cf)]['toDate']?_0x33bb14['lastUpdated']['toDate']():new Date(_0x33bb14['lastUpdated']),_0xcb327c=new Date(),_0x1afd53=Math['floor']((_0xcb327c-_0x298fc0)/0xea60);if(_0x1afd53>=0x1e)try{const _0x481ebe=doc(db,_0x128224(0x1cd),_0x33bb14['id']);await updateDoc(_0x481ebe,{'isReady':![]});}catch(_0x348054){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x348054);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x226e83=>{const _0x4e8f70=[];_0x226e83['forEach'](_0x5691fc=>{const _0x234b22=a44_0x349e,_0x5ed96e=_0x5691fc[_0x234b22(0x1d0)]();if(_0x5ed96e['isReady']===!![]){const _0x4ba2d2={'id':_0x5691fc['id'],'username':_0x5ed96e[_0x234b22(0x1cb)],'lastUpdated':_0x5ed96e[_0x234b22(0x1cf)]||new Date()};_0x4e8f70['push'](_0x4ba2d2),checkQueueTimeout(_0x4ba2d2);}}),updateQueueDisplay(_0x4e8f70);},_0x3bb167=>{const _0x12eb2a=a44_0x6e00f1;console['error'](_0x12eb2a(0x1c7),_0x3bb167);});window['addEventListener']('unload',()=>{unsubscribe();});