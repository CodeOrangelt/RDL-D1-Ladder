const a50_0x31672d=a50_0x3a18,a50_0x369e5d=(function(){let _0x7f1591=!![];return function(_0x213175,_0x5cdd57){const _0x1fbc71=_0x7f1591?function(){if(_0x5cdd57){const _0xd27499=_0x5cdd57['apply'](_0x213175,arguments);return _0x5cdd57=null,_0xd27499;}}:function(){};return _0x7f1591=![],_0x1fbc71;};}()),a50_0x377d6d=a50_0x369e5d(this,function(){const _0x2ef30d=a50_0x3a18;let _0x1c1081;try{const _0x19ef74=Function(_0x2ef30d(0x16c)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1c1081=_0x19ef74();}catch(_0x531c66){_0x1c1081=window;}const _0x223726=_0x1c1081['console']=_0x1c1081['console']||{},_0x32e662=['log','warn','info','error',_0x2ef30d(0x156),'table','trace'];for(let _0x22ecd0=0x0;_0x22ecd0<_0x32e662[_0x2ef30d(0x16d)];_0x22ecd0++){const _0x525ce1=a50_0x369e5d['constructor']['prototype']['bind'](a50_0x369e5d),_0xad45e9=_0x32e662[_0x22ecd0],_0x561a2a=_0x223726[_0xad45e9]||_0x525ce1;_0x525ce1['__proto__']=a50_0x369e5d['bind'](a50_0x369e5d),_0x525ce1['toString']=_0x561a2a['toString']['bind'](_0x561a2a),_0x223726[_0xad45e9]=_0x525ce1;}});a50_0x377d6d();function a50_0x60f8(){const _0x36d6e1=['ThemeSystem','adminStatusChanged','\x20is\x20already\x20your\x20current\x20theme','innerHTML','Purchase\x20failed.\x20Please\x20try\x20again.','üè™\x20Redeem\x20store\x20initializing...','switchTheme','uid','Yellow\x20Orange','name','style','email','Not\x20enough\x20points.\x20You\x20need\x20','visible','[data-theme]','cursor','createElement','FREE','\x20points','confirm','can-afford','Themes\x20container\x20not\x20found','success','querySelector','theme_','Current\x20Theme','\x20Points','current-theme','toLocaleString','\x20theme\x20applied!','theme','parentNode','store-message','includes','store-content','Classic\x20RDL','Apply\x20Theme','forEach','currentUser','store-message\x20store-message-','price','exists','none','cannot-afford','error','\x20items','\x20theme\x20purchased!','points','info','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Buy','RedeemStore','remove','exception','User\x20data\x20loaded\x20-\x20Points:\x20','log','display','Theme\x20','disabled','sign-in-free','For\x20the\x20angry\x20type.','Theme\x20clicked:\x20','body','pointer','isAdmin','Purchase\x20failed:','sign-in-paid','dataset','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','add','Purple','purchase','classList','\x20theme','Only\x20the\x20best\x20get\x20this\x20one','return\x20(function()\x20','length','textContent','closest','inventory',',\x20Inventory:\x20','appendChild','Theme\x20system\x20not\x20found','.theme-select-btn'];a50_0x60f8=function(){return _0x36d6e1;};return a50_0x60f8();}import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a50_0x31672d(0x144),'description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':a50_0x31672d(0x167),'description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':a50_0x31672d(0x129),'description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':a50_0x31672d(0x16b)},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':'Red','description':a50_0x31672d(0x15d)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x3408a8=a50_0x31672d;console['log'](_0x3408a8(0x126)),storeContainer=document['getElementById'](_0x3408a8(0x143)),pointsDisplay=document['getElementById']('user-points'),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x558bf9=>{const _0x577b3a=a50_0x3a18;if(_0x558bf9){console['log']('‚úÖ\x20User\x20authenticated:',_0x558bf9['displayName']||_0x558bf9['email']);if(authWarning)authWarning['style']['display']=_0x577b3a(0x14b);if(storeContainer)storeContainer['style'][_0x577b3a(0x159)]='block';await loadUserData(_0x558bf9),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x5cfe27){const _0x41e2f0=a50_0x31672d;try{const _0x3cfbc6=doc(db,'userProfiles',_0x5cfe27['uid']),_0x57bbb6=await getDoc(_0x3cfbc6);if(_0x57bbb6[_0x41e2f0(0x14a)]()){const _0x2a4034=_0x57bbb6['data']();userData={'points':_0x2a4034['points']||0x0,'inventory':_0x2a4034['inventory']||[],'isAdmin':_0x2a4034['isAdmin']||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x41e2f0(0x13d)]()),window['isUserAdmin']=userData[_0x41e2f0(0x161)],userData[_0x41e2f0(0x161)]&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent(_0x41e2f0(0x122),{'detail':{'isAdmin':!![]}}))),console[_0x41e2f0(0x158)](_0x41e2f0(0x157)+userData['points']+_0x41e2f0(0x171)+userData['inventory']['length']+_0x41e2f0(0x14e));}else await setDoc(_0x3cfbc6,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x5cfe27['displayName']||_0x5cfe27[_0x41e2f0(0x12c)]?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay[_0x41e2f0(0x16e)]='0'),window['isUserAdmin']=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x564599){console['error']('Error\x20loading\x20user\x20data:',_0x564599);}}function userOwnsTheme(_0x37f887){if(THEMES[_0x37f887]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x37f887);}async function purchaseTheme(_0x34267f){const _0x1743d2=a50_0x31672d,_0x576537=auth['currentUser'];if(!_0x576537)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x4ee533=THEMES[_0x34267f];if(!_0x4ee533)return console['error'](_0x1743d2(0x15a)+_0x34267f+'\x20not\x20found'),![];if(userData['points']<_0x4ee533['price'])return showMessage(_0x1743d2(0x12d)+(_0x4ee533['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x34267f))return showMessage('You\x20already\x20own\x20the\x20'+_0x4ee533['name']+_0x1743d2(0x16a),_0x1743d2(0x151)),![];try{const _0x53a9bb=doc(db,'userProfiles',_0x576537['uid']),_0x34b075=await getDoc(_0x53a9bb);if(!_0x34b075['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x11d9b8=_0x34b075['data'](),_0x58249e=_0x11d9b8['points']||0x0,_0x45966c=_0x11d9b8['inventory']||[];if(_0x58249e<_0x4ee533['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x45966c['includes'](_0x1743d2(0x139)+_0x34267f))return showMessage('You\x20already\x20own\x20this\x20theme',_0x1743d2(0x151)),![];const _0x8a4126=_0x58249e-_0x4ee533['price'],_0x1a1966=[..._0x45966c,'theme_'+_0x34267f];return await updateDoc(_0x53a9bb,{'points':_0x8a4126,'inventory':_0x1a1966,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x576537[_0x1743d2(0x128)],'userEmail':_0x576537['email'],'itemId':'theme_'+_0x34267f,'itemTitle':_0x4ee533['name']+'\x20Theme','price':_0x4ee533['price'],'type':_0x1743d2(0x168),'category':'theme','timestamp':serverTimestamp()}),userData[_0x1743d2(0x150)]=_0x8a4126,userData[_0x1743d2(0x170)]=_0x1a1966,pointsDisplay&&(pointsDisplay[_0x1743d2(0x16e)]=userData['points']['toLocaleString']()),console[_0x1743d2(0x158)]('‚úÖ\x20Purchased\x20'+_0x4ee533[_0x1743d2(0x12a)]+'\x20theme\x20for\x20'+_0x4ee533[_0x1743d2(0x149)]+_0x1743d2(0x133)),!![];}catch(_0xff037f){return console[_0x1743d2(0x14d)](_0x1743d2(0x162),_0xff037f),showMessage(_0x1743d2(0x125),'error'),![];}}function applyTheme(_0x475400){const _0x173d13=a50_0x31672d;if(!userOwnsTheme(_0x475400))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window[_0x173d13(0x121)]?(window['ThemeSystem'][_0x173d13(0x127)](_0x475400),showMessage((THEMES[_0x475400]?.['name']||_0x475400)+_0x173d13(0x13e),'success'),!![]):(console[_0x173d13(0x14d)](_0x173d13(0x173)),![]);}function buildStoreUI(){const _0x55bad4=a50_0x31672d,_0x53cc95=document[_0x55bad4(0x138)]('.themes-grid');if(!_0x53cc95){console['error'](_0x55bad4(0x136));return;}_0x53cc95['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x2acb87,_0x56dc6d])=>{const _0x8855fd=_0x55bad4,_0x5507e1=document[_0x8855fd(0x131)]('div');_0x5507e1['className']='store-item',_0x5507e1['dataset']['theme']=_0x2acb87,_0x5507e1[_0x8855fd(0x164)]['itemId']='theme_'+_0x2acb87,_0x5507e1['dataset'][_0x8855fd(0x149)]=_0x56dc6d[_0x8855fd(0x149)],_0x5507e1[_0x8855fd(0x124)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x2acb87+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x56dc6d['price']===0x0?_0x8855fd(0x132):_0x56dc6d[_0x8855fd(0x149)]+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x56dc6d['name']+_0x8855fd(0x165)+_0x56dc6d['description']+_0x8855fd(0x152),_0x53cc95['appendChild'](_0x5507e1);}),setupThemeButtons();}function setupThemeButtons(){const _0x17022d=a50_0x31672d,_0x325066=document['querySelectorAll'](_0x17022d(0x174));_0x325066['forEach'](_0x1f3764=>{_0x1f3764['addEventListener']('click',async _0x44138f=>{const _0x585131=a50_0x3a18;_0x44138f['preventDefault']();const _0x4d781e=auth[_0x585131(0x147)];if(!_0x4d781e){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0xd21f70=_0x1f3764[_0x585131(0x16f)]('[data-theme]'),_0x599430=_0xd21f70['dataset'][_0x585131(0x13f)],_0x2887a8=THEMES[_0x599430];if(!_0x2887a8){console['error']('Theme\x20'+_0x599430+'\x20not\x20found');return;}console['log'](_0x585131(0x15e)+_0x2887a8['name']+'\x20('+_0x599430+')');if(_0x1f3764['disabled']){_0x2887a8['price']>0x0&&showMessage('You\x20need\x20'+_0x2887a8[_0x585131(0x149)]+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x1f3764[_0x585131(0x16e)]===_0x585131(0x13a)){showMessage(_0x2887a8['name']+_0x585131(0x123),_0x585131(0x151));return;}if(_0x1f3764['textContent']==='Apply\x20Theme'){applyTheme(_0x599430),updateThemeButtons();return;}if(_0x1f3764['textContent'][_0x585131(0x142)](_0x585131(0x153))){const _0x298013=window[_0x585131(0x134)]('Purchase\x20'+_0x2887a8[_0x585131(0x12a)]+'\x20theme\x20for\x20'+_0x2887a8[_0x585131(0x149)]+'\x20points?');if(!_0x298013)return;const _0x3ff2f4=await purchaseTheme(_0x599430);_0x3ff2f4&&(showMessage(_0x2887a8[_0x585131(0x12a)]+_0x585131(0x14f),_0x585131(0x137)),applyTheme(_0x599430),updateThemeButtons());return;}userOwnsTheme(_0x599430)?applyTheme(_0x599430):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x5b7cc9=a50_0x31672d,_0x2e4e67=window['ThemeSystem']?window[_0x5b7cc9(0x121)]['getCurrentTheme']():'default',_0x239acb=auth['currentUser'];document['querySelectorAll'](_0x5b7cc9(0x174))[_0x5b7cc9(0x146)](_0x41636b=>{const _0x33bbc9=_0x5b7cc9,_0x9bfc2b=_0x41636b[_0x33bbc9(0x16f)](_0x33bbc9(0x12f)),_0x1ea7ae=_0x9bfc2b['dataset']['theme'],_0x1ac7cc=THEMES[_0x1ea7ae];if(!_0x1ac7cc)return;_0x41636b[_0x33bbc9(0x15b)]=![],_0x41636b['style']['opacity']='',_0x41636b[_0x33bbc9(0x12b)]['cursor']=_0x33bbc9(0x160),_0x41636b['classList']['remove']('current-theme','apply-theme',_0x33bbc9(0x135),'cannot-afford','sign-in-free',_0x33bbc9(0x163));if(!_0x239acb){_0x1ac7cc[_0x33bbc9(0x149)]===0x0?(_0x41636b[_0x33bbc9(0x16e)]='Sign\x20in\x20to\x20Apply',_0x41636b['classList'][_0x33bbc9(0x166)](_0x33bbc9(0x15c))):(_0x41636b['textContent']='Sign\x20in\x20to\x20Purchase',_0x41636b[_0x33bbc9(0x15b)]=!![],_0x41636b['style']['opacity']='0.7',_0x41636b['classList']['add']('sign-in-paid'));return;}if(_0x1ea7ae===_0x2e4e67){_0x41636b['textContent']='Current\x20Theme',_0x41636b['classList']['add'](_0x33bbc9(0x13c)),_0x41636b['disabled']=!![],_0x41636b[_0x33bbc9(0x12b)]['cursor']='default';return;}if(userOwnsTheme(_0x1ea7ae)){_0x41636b['textContent']=_0x33bbc9(0x145),_0x41636b['classList']['add']('apply-theme');return;}if(userData['points']>=_0x1ac7cc[_0x33bbc9(0x149)]){_0x41636b['textContent']='Buy\x20for\x20'+_0x1ac7cc['price']+_0x33bbc9(0x13b),_0x41636b['classList']['add'](_0x33bbc9(0x135));return;}_0x41636b['textContent']='Need\x20'+_0x1ac7cc['price']+_0x33bbc9(0x13b),_0x41636b[_0x33bbc9(0x169)]['add'](_0x33bbc9(0x14c)),_0x41636b['style']['opacity']='0.5',_0x41636b[_0x33bbc9(0x15b)]=!![],_0x41636b['style'][_0x33bbc9(0x130)]='not-allowed';});}function showMessage(_0x57bc98,_0x182076='info'){const _0x2d5f28=a50_0x31672d,_0x3fe533=document['getElementById']('store-message');_0x3fe533&&_0x3fe533['remove']();const _0x4d721e=document['createElement']('div');_0x4d721e['id']=_0x2d5f28(0x141),_0x4d721e['className']=_0x2d5f28(0x148)+_0x182076,_0x4d721e[_0x2d5f28(0x16e)]=_0x57bc98,document[_0x2d5f28(0x15f)][_0x2d5f28(0x172)](_0x4d721e),requestAnimationFrame(()=>{const _0x34e17f=_0x2d5f28;_0x4d721e['classList'][_0x34e17f(0x166)](_0x34e17f(0x12e));}),setTimeout(()=>{const _0x3a9e98=_0x2d5f28;_0x4d721e['classList'][_0x3a9e98(0x155)]('visible'),setTimeout(()=>{const _0xcd1f5c=_0x3a9e98;_0x4d721e[_0xcd1f5c(0x140)]&&_0x4d721e['remove']();},0x12c);},0xfa0);}function a50_0x3a18(_0x1a9aa1,_0x544dd6){const _0x377d6d=a50_0x60f8();return a50_0x3a18=function(_0x369e5d,_0xff7889){_0x369e5d=_0x369e5d-0x121;let _0x60f8b7=_0x377d6d[_0x369e5d];return _0x60f8b7;},a50_0x3a18(_0x1a9aa1,_0x544dd6);}window[a50_0x31672d(0x154)]={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');