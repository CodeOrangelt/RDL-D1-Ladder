const a36J=a36d;(function(a,b){const v=a36d,c=a();while(!![]){try{const d=-parseInt(v(0x22d))/0x1+parseInt(v(0x246))/0x2+-parseInt(v(0x217))/0x3*(-parseInt(v(0x233))/0x4)+parseInt(v(0x20a))/0x5+-parseInt(v(0x234))/0x6+parseInt(v(0x22a))/0x7*(-parseInt(v(0x237))/0x8)+-parseInt(v(0x232))/0x9*(-parseInt(v(0x227))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a36c,0xa09e2));const a36b=(function(){let a=!![];return function(b,c){const d=a?function(){const w=a36d;if(c){const e=c[w(0x204)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a36a=a36b(this,function(){const x=a36d,a=function(){let f;try{f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(g){f=window;}return f;},b=a(),c=b[x(0x223)]=b['console']||{},d=[x(0x213),x(0x21e),'info','error',x(0x22b),'table','trace'];for(let e=0x0;e<d['length'];e++){const f=a36b['constructor']['prototype'][x(0x224)](a36b),g=d[e],h=c[g]||f;f['__proto__']=a36b['bind'](a36b),f['toString']=h['toString']['bind'](h),c[g]=f;}});a36a();function a36d(a,b){const c=a36c();return a36d=function(d,e){d=d-0x1e9;let f=c[d];if(a36d['GlnEEz']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a36d['qXYaBU']=g,a=arguments,a36d['GlnEEz']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a36d['qXYaBU'](f),a[i]=f):f=j,f;},a36d(a,b);}import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a36c(){const O=['zgvZyW','re9nq29UDgvUDeXVywrLza','vMvYAwzPy2f0Aw9UigvTywLSihnLBNq','z2v0rwXLBwvUDej5swq','D2fYBG','Bg9NAw4Ty29UDgfPBMvY','Aw5Uzxjive1m','qxr0zw1WDgLUzYbgAxjLyMfZzsbZAwDUsw5xAxrOrw1HAwXbBMrqyxnZD29Yzc4UlG','rxjYB3iGy2HLy2TPBMCGDMvYAwzPy2f0Aw9Uihn0yxr1CZO','y29UC29Szq','yMLUza','zxjYB3i','Bg9NAw4TzM9YBq','mJe1ntb1B3L0q1C','CMvNAxn0zxiTDxnLCM5HBwu','DxnLCM5HBwu','mJKXmJDRueLKtKi','zxHJzxb0Aw9U','y2f0y2G','mtiXnZC3nxvYEvP5BW','BgvUz3rO','ugfZC3DVCMqGBM90igf2ywLSywjSzsbMB3iGCMvZzw5KAw5NihzLCMLMAwnHDgLVBG','CMvNAxn0zxiTzxjYB3i','y29Kzq','mZq0n01OyKPjAa','nJCYnJrJtunoDvO','nJiYmZm3neDOCfvgtq','DgvZDa','z2fTzu1Vzgu','mta0tK1HBvbV','ihbSyxLLCIbYzwDPC3rYyxrPB24GDg8G','CgXHEwvYCW','tMv3ihbSyxLLCIa','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gyw55ignVBgXLy3rPB24UlI4','CgXHEwvYC0qZ','rw1HAwWGBM90ihLLDcb2zxjPzMLLzcWGD2fPDgLUzY4UlG','lIbqBgvHC2uGy2HLy2SGEw91CIbPBMjVEc4kicaGicaGicaGicaGpc9KAxy+','rw1HAwWGywrKCMvZCYbPCYbHBhjLywr5ihjLz2LZDgvYzwq','ChjLDMvUDerLzMf1Bhq','BwfNzw50yq','CgvUzgLUz1jLz2LZDhjHDgLVBNm','CgXHEwvYC0nurG','Bg9JyxrPB24','CMvNAxn0zxiTy29UDgfPBMvY','mtyZndy0oefwvLzHtq','y2XPy2S','igfKzgvKihrVia','ChvYCgXL','zw1WDhK','igf0ihbVC2L0Aw9Uia','tg9NAw4Gyxr0zw1WDcbZDgfYDgvKigzVCJO','Dg9mB3DLCKnHC2u','CgXHEwvYC0r1B3m','tg9NAw4GzMfPBgvKoIa','DMfSDwu','C2HVDY1YzwDPC3rLCG','u3rVChbLzcbJAgvJA2LUzYbMB3iGzw1HAwWGDMvYAwzPy2f0Aw9UicH0Aw1LB3v0ihjLywnOzwqP','BM9UugfYDgLJAxbHBNq','y2HHBMDL','lI4VAw5KzxGUAhrTBa','DgHLBG','Bg9NAw4Tzw1HAwW','rw1HAwWGAxmGDMvYAwzPzwqSihbYB2nLC3nPBMCGCMvNAxn0CMf0Aw9U','Dgv4DenVBNrLBNq','cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicbszwDPC3rYyxrPB24GCgvUzgLUzYeGugXLyxnLignOzwnRihLVDxiGzw1HAwWGDg8GDMvYAwz5ihLVDxiGywnJB3vUDc4kicaGicaGicaGicaGicaGidXICJ48yNi+cIaGicaGicaGicaGicaGica8yNv0Dg9Uig9Uy2XPy2S9iNjLC2vUzfzLCMLMAwnHDgLVBKvTywLSkcC','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNDHCM5PBMCTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbqBgvHC2uGDMvYAwz5ihLVDxiGzw1HAwWGDg8Gy29TCgXLDguGEw91CIbYzwDPC3rYyxrPB24UcIaGicaGicaGicaGicaGicaGicaGicaGicaGica8yNi+pgjYpGOGicaGicaGicaGicaGicaGicaGicaGicaGicaGpgj1DhrVBIb0ExbLpsjIDxr0B24IigLKpsjYzxnLBMqTyNv0Dg9UiIbJBgfZCZ0ICMvZzw5Klwj1DhrVBIi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicaGicaGuMvZzw5KifzLCMLMAwnHDgLVBIbfBwfPBaOGicaGicaGicaGicaGicaGicaGicaGicaGicaGpc9IDxr0B24+cIaGicaGicaGicaGicaGicaGicaGicaGidWVzgL2pG','CMvNAxn0zxiTBw9Kzq','Bg9NAw4TzxjYB3i','zw1HAwW','BM9UlxbHCNrPy2LWyw50','BM9Uzq','CMvNAxn0zxiTCgfZC3DVCMq','C2HVDY1SB2DPBG','AhjLzG','cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicbwzxjPzMLJyxrPB24Gzw1HAwWGAgfZigjLzw4GCMvZzw50ihrVia','ugXLyxnLihvUC2vSzwn0igeGz2fTzsbTB2rLigLMihLVDsbJAg9VC2uGtM9UlvbHCNrPy2LWyw50lG','zw1HAwXwzxjPzMLLza','BwvZC2fNzq','DhjPBq','CMvNAxn0zxiTzM9YBq','vxnLCIbZAwDUzwqGAw4GzM9YihzLCMLMAwnHDgLVBIbLBwfPBdO','CMvNAxn0zxiTzw1HAwW','Bg9NAw4TCgfZC3DVCMq','yxbWBhK','sw5JB3jYzwn0igfUC3DLCIb0BYb2zxjPzMLJyxrPB24GCxvLC3rPB24','vxnLCM5HBwuGBxvZDcbIzsbHDcbSzwfZDcaZignOyxjHy3rLCNmGBg9UzW','zgLZCgXHEq','ywXS','zgLZywjSzwq','ntK0odG1mfrIANjvzG','v2LUzg93lNjLC2vUzfzLCMLMAwnHDgLVBKvTywLSignHBgXLzcb3AxrOoG','C3r5Bgu','ywrKrxzLBNrmAxn0zw5LCG','DwLK','vxnLCM5HBwuGy2fUig9UBhKGy29UDgfPBIbSzxr0zxjZlcbUDw1IzxjZlcb1BMrLCNnJB3jLCYbHBMqGAhLWAgvUCW','BwfW','DMvYAwzPy2f0Aw9Uq2HLy2TjBNrLCNzHBa','uMvNAxn0CMf0Aw9UigvYCM9YoG','Bg9N','BM9UugfYDgLJAxbHBNrZ','rw1HAwWGAgfZigjLzw4GDMvYAwzPzwqHifjLzgLYzwn0Aw5NihrVigXVz2LUihbHz2uUlI4','DxnLCG','mJrvwLfdB08','rhvVCW','zgf0yq'];a36c=function(){return O;};return a36c();}import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function setupVerificationListener(a,b){console['log']('Setting\x20up\x20email\x20verification\x20listener\x20for:',a);const c=setInterval(async()=>{const y=a36d;try{console[y(0x213)]('Checking\x20if\x20email\x20has\x20been\x20verified...');const d=await signInWithEmailAndPassword(auth,a,b),e=d[y(0x216)];await e['getIdToken'](!![]),e[y(0x1fd)]?(console[y(0x213)](y(0x215)),clearInterval(c),document[y(0x21d)]('register-error')[y(0x220)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Email\x20verified\x20successfully!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setTimeout(()=>{const z=y;document['getElementById'](z(0x245))[z(0x20c)][z(0x207)]=z(0x1f7),document[z(0x21d)](z(0x21f))['style']['display']='block',document['getElementById'](z(0x1ee))['value']=a,document['getElementById'](z(0x1f4))[z(0x220)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Your\x20account\x20has\x20been\x20verified!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';},0x7d0)):(console[y(0x213)](y(0x23d)),await signOut(auth));}catch(f){console['error'](y(0x222),f),clearInterval(c);}},0x1388);window['verificationCheckInterval']=c,setTimeout(()=>{const A=a36d;window[A(0x211)]&&(clearInterval(window['verificationCheckInterval']),window[A(0x211)]=null,console['log'](A(0x1e9)));},0x5*0x3c*0x3e8);}async function isUsernameAvailable(a){const B=a36d;if(!a||typeof a!=='string'||a[B(0x1ff)]()[B(0x22e)]<0x3)return document['getElementById'](B(0x230))['textContent']=B(0x206),![];const b=a['trim']();try{const c=/^[a-zA-Z0-9_-]{3,20}$/;if(!c[B(0x235)](b))return document[B(0x21d)]('register-error')['textContent']=B(0x20f),![];const [d,e,f]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',b))),getDocs(query(collection(db,B(0x242)),where('username','==',b))),getDocs(query(collection(db,B(0x214)),where(B(0x229),'==',b)))]);if(!d['empty']||!e[B(0x24a)]||!f['empty'])return document['getElementById']('register-error')[B(0x1f0)]='Username\x20is\x20already\x20taken',![];return!![];}catch(g){return console['error']('Error\x20checking\x20username:',g),document['getElementById']('register-error')[B(0x1f0)]='Unable\x20to\x20verify\x20username\x20availability.\x20Please\x20try\x20again\x20later.',![];}}async function handleRegister(a){const C=a36d;a['preventDefault']();const b=document['getElementById'](C(0x230));b['textContent']='';const c=document[C(0x21d)](C(0x202))['value'],d=document[C(0x21d)](C(0x1f8))[C(0x250)],f=document[C(0x21d)](C(0x228))['value'],g=document['getElementById']('verification-answer')[C(0x250)][C(0x24d)](),h=document[C(0x21d)](C(0x1f3))[C(0x250)],i=document['getElementById'](C(0x1f6))?.['checked']||![];if(i&&h!==''){b['textContent']=C(0x1fc);return;}if(!i&&h===''){b[C(0x1f0)]='Please\x20select\x20a\x20game\x20mode\x20or\x20check\x20Non-Participant.';return;}try{const j=[C(0x249),C(0x241)];if(!j['includes'](g)){b['textContent']=C(0x205);return;}const k=await isUsernameAvailable(f);if(!k)return;const l=await createUserWithEmailAndPassword(auth,c,d),m=l['user'];await sendEmailVerification(m),await setDoc(doc(db,C(0x242),m[C(0x20e)]),{'username':f[C(0x1ff)](),'email':c,'gameMode':h,'nonParticipant':i,'createdAt':new Date(),'verified':![]}),b[C(0x220)]=C(0x1f1)+c+'\x27)\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setupVerificationListener(c,d);}catch(n){console[C(0x225)](C(0x212),n),b[C(0x1f0)]=n[C(0x231)]==='auth/email-already-in-use'?C(0x23f):'Registration\x20failed.\x20Please\x20try\x20again\x20later.';}}async function handleLogin(a){const D=a36d;a[D(0x240)]();const b=document[D(0x21d)](D(0x1ee))[D(0x250)],c=document['getElementById'](D(0x203))['value'],d=document[D(0x21d)]('login-error');console[D(0x213)](D(0x24c),b),d[D(0x1f0)]='';try{console['log'](D(0x221));const f=await signInWithEmailAndPassword(auth,b,c),g=f[D(0x216)];console['log']('User\x20signed\x20in:',g['uid']);const h=[D(0x239),'playersD2','playersD3','playersDuos',D(0x243),'nonParticipants'];console[D(0x213)](D(0x23b));let j=![],k=await Promise[D(0x208)](h[D(0x210)](l=>getDoc(doc(db,l,g['uid']))));for(let l=0x0;l<k['length'];l++){if(k[l]['exists']()){j=!![],console[D(0x213)]('User\x20found\x20in\x20'+h[l]+'\x20collection');break;}}if(!j){console['log']('User\x20not\x20found\x20in\x20any\x20collection,\x20checking\x20pending\x20registration');const m=doc(db,D(0x242),g[D(0x20e)]),n=await getDoc(m);if(n['exists']()){const o=n[D(0x219)]();console['log']('Found\x20pending\x20registration:',o);if(g[D(0x1fd)]){console['log'](D(0x1ef)),d[D(0x220)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Setting\x20up\x20your\x20account...\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';if(o[D(0x1ea)])console['log']('Processing\x20non-participant\x20registration'),await setDoc(doc(db,'nonParticipants',g[D(0x20e)]),{'username':o[D(0x229)],'email':g[D(0x1f5)],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console[D(0x213)]('User\x20'+o[D(0x229)]+'\x20added\x20to\x20nonParticipants\x20collection');else{let p;switch(o['gameMode']){case'D1':p='players';break;case'D2':p='playersD2';break;case'D3':p=D(0x23c);break;case D(0x218):p=D(0x24e);break;case'CTF':p=D(0x243);break;default:p='players';}console[D(0x213)]('Processing\x20'+o[D(0x236)]+D(0x238)+p);const q=collection(db,p),r=query(q,orderBy('position',D(0x21a)),limit(0x1)),s=await getDocs(r),t=s['empty']?0x1:s['docs'][0x0]['data']()['position']+0x1;await setDoc(doc(db,p,g['uid']),{'username':o[D(0x229)],'email':g[D(0x1f5)],'eloRating':0x4b0,'position':t,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':o[D(0x236)]}),console[D(0x213)](D(0x23a)+o[D(0x229)]+D(0x248)+p+D(0x24b)+t);}await deleteDoc(m),setTimeout(()=>{window['location']['href']='../index.html';},0x7d0);return;}else{d[D(0x220)]=D(0x1f2),document[D(0x21d)]('resend-button')['addEventListener']('click',()=>{resendVerificationEmail(b);}),await signOut(auth);return;}}}window[D(0x244)][D(0x1fa)]='../index.html';}catch(u){console[D(0x225)]('Login\x20error:',u),d[D(0x1f0)]=D(0x24f)+u['message'];}}function loginFormHandler(a){const E=a36d;a['preventDefault']();const b=document['getElementById'](E(0x1ee))[E(0x250)]['trim'](),c=document[E(0x21d)]('login-password')['value'],d=document[E(0x21d)]('login-error');signInWithEmailAndPassword(auth,b,c)[E(0x1ed)](e=>{const F=E;console['log']('User\x20signed\x20in:',e['user']),window[F(0x244)][F(0x1fa)]=F(0x1ec);})[E(0x22c)](e=>{const G=E;console['error']('Login\x20error:',e),d[G(0x1f0)]='Login\x20error:\x20'+e[G(0x1fe)],d['style']['display']='block';});}async function resendVerificationEmail(a){const H=a36d;console[H(0x213)]('Attempting\x20to\x20resend\x20verification\x20email\x20to:',a);try{const b=document[H(0x21d)](H(0x203))?.[H(0x250)];if(!b){console['error'](H(0x22f)),document[H(0x21d)](H(0x1f4))['textContent']='Please\x20enter\x20your\x20password\x20to\x20resend\x20verification\x20email';return;}const c=await signInWithEmailAndPassword(auth,a,b),d=c['user'];console['log'](H(0x201),d[H(0x20e)]),await sendEmailVerification(d),console[H(0x213)](H(0x21c)),document[H(0x21d)](H(0x1f4))['innerHTML']=H(0x1fb)+a+H(0x23e),await signOut(auth);}catch(e){console['error']('Error\x20resending\x20verification\x20email:',e),document[H(0x21d)](H(0x1f4))['textContent']='Error\x20sending\x20verification\x20email:\x20'+e['message'];}}window['resendVerificationEmail']=function(a){const I=a36d;console['log'](I(0x20b),a),resendVerificationEmail(a);},document['addEventListener'](a36J(0x21b),()=>{const K=a36J,a=document[K(0x21d)]('non-participant'),b=document['getElementById']('register-mode');a&&b&&a[K(0x20d)](K(0x1eb),function(){const L=K;this['checked']?(b['value']='',b[L(0x209)]=!![]):b[L(0x209)]=![];});const c=document['getElementById'](K(0x200)),d=document[K(0x21d)](K(0x226));c&&c['addEventListener']('submit',handleRegister);d&&d['addEventListener']('submit',handleLogin);const e=document['getElementById'](K(0x251)),f=document[K(0x21d)](K(0x1f9));e&&e['addEventListener'](K(0x247),g=>{const M=K;g['preventDefault'](),document[M(0x21d)](M(0x21f))[M(0x20c)][M(0x207)]='none',document['getElementById']('register-container')['style']['display']='block';}),f&&f[K(0x20d)](K(0x247),g=>{const N=K;g[N(0x240)](),document['getElementById'](N(0x245))['style'][N(0x207)]=N(0x1f7),document['getElementById']('login-container')[N(0x20c)]['display']='block';});});