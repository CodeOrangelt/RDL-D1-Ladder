const a6_0x17627c=a6_0x31ec,a6_0x4d19f0=(function(){let _0x3a6e77=!![];return function(_0x33762a,_0x5dba16){const _0x5e9006=_0x3a6e77?function(){if(_0x5dba16){const _0x13f241=_0x5dba16['apply'](_0x33762a,arguments);return _0x5dba16=null,_0x13f241;}}:function(){};return _0x3a6e77=![],_0x5e9006;};}()),a6_0x491030=a6_0x4d19f0(this,function(){const _0x123775=a6_0x31ec;let _0x4fb3e0;try{const _0x67db15=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4fb3e0=_0x67db15();}catch(_0x17468b){_0x4fb3e0=window;}const _0x13efba=_0x4fb3e0[_0x123775(0xa4)]=_0x4fb3e0['console']||{},_0x5b188e=[_0x123775(0x108),'warn','info','error','exception',_0x123775(0x109),'trace'];for(let _0x385601=0x0;_0x385601<_0x5b188e['length'];_0x385601++){const _0x5f4053=a6_0x4d19f0[_0x123775(0x9e)]['prototype']['bind'](a6_0x4d19f0),_0x295efb=_0x5b188e[_0x385601],_0x182d01=_0x13efba[_0x295efb]||_0x5f4053;_0x5f4053['__proto__']=a6_0x4d19f0['bind'](a6_0x4d19f0),_0x5f4053[_0x123775(0x113)]=_0x182d01[_0x123775(0x113)][_0x123775(0xf6)](_0x182d01),_0x13efba[_0x295efb]=_0x5f4053;}});a6_0x491030();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date('2025-07-02')['getTime']()}];function isUsernameMuted(_0x43bbb7,_0x511ce8){if(!_0x43bbb7)return![];const _0x5bea85=mutedUsers['find'](_0x5506a7=>_0x5506a7['username']===_0x43bbb7);if(!_0x5bea85)return![];if(!_0x511ce8)return!![];const _0x20cc75=_0x511ce8 instanceof Date?_0x511ce8['getTime']():_0x511ce8['seconds']?_0x511ce8['seconds']*0x3e8:Date['now']();return _0x20cc75>=_0x5bea85['muteFromDate'];}function a6_0x31ec(_0x586e13,_0x49cb93){const _0x491030=a6_0x1772();return a6_0x31ec=function(_0x4d19f0,_0x277477){_0x4d19f0=_0x4d19f0-0x6c;let _0x17729d=_0x491030[_0x4d19f0];return _0x17729d;},a6_0x31ec(_0x586e13,_0x49cb93);}function filterComment(_0x584fc8,_0x3fb241,_0x3be449){if(!_0x584fc8)return'-';if(isUsernameMuted(_0x3fb241,_0x3be449))return'Muted.';return _0x584fc8;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x57be16,_0x158824,_0x17f848){const _0x4d01d7='u:'+(_0x17f848['filterUsername']||'');return'previewCache_'+_0x57be16+'_p'+_0x158824+'_'+_0x4d01d7;}function a6_0x1772(){const _0x5e540c=['max','\x20matching\x20filters','...','demoLink','gauss-and-mercs','value','demo','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22','removeChild','disabled','winnerUsername','You\x20can\x20only\x20delete\x20your\x20own\x20comments','includes','.match-date','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','missiles-6plus','Firebase\x20not\x20initialized','jump-to-page','fusion-match','.matches-loading','clearFilterBtn','Submitting...','abs','ratting','N/A','querySelectorAll','className','Anonymous','closeCommentPopupPreview','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','winnerOldElo','loserSuicides','currentPage','filterUsername','bronze','commentPopupContentPreview','appendChild','color','createElement','Failed\x20to\x20cache\x20data:','textContent','\x20matches:','desc','displayName','.comment.winner-comment','.player.loser\x20.player-score','Failed\x20to\x20fetch\x20user\x20profile:','Error\x20fetching\x20comments:','.match-card','options','constructor','applyFilterBtn','all','input','currentUser','keypress','console','Delete\x20demo','subgameType','No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages','getElementById','mega-match','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','commentText','.match-subgame','closeAddCommentPopup','Please\x20enter\x20a\x20demo\x20link','.</div>','style','previewPrevPage','preventDefault','body','approvedAt','none','loserUsername','display','seconds','error','popup-actions','href','username','#b9f1fc','Error\x20fetching\x20comments\x20batch:','#ff4444','.matches-loading[style*=\x22color:\x20red\x22]','Failed\x20to\x20add\x20comment:\x20','preview-d2-button','firstChild','match-card-template','slice','userId','option','toLowerCase','.submit-comment-btn','querySelector','.match-demo-links','loserComment','trim','dataset','timestamp','isLoading','winnerComment','Error\x20deleting\x20comment:','parentNode','click','#FFD700','auth','add','matchesPerPage','Please\x20enter\x20a\x20comment\x20before\x20submitting','subgames','.comment.loser-comment','message','.popup-actions','commentId','createdAt','current','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments','active','Failed\x20to\x20fetch\x20username:','classList','lastVisible','setAttribute','enhancedFilters','submit','firstVisible','commentPopupTitlePreview','Muted.','.winner-demo-link','Comment\x20deleted\x20successfully','removeAttribute','block','.comment-item','data','filter-subgames','default','commentUser','required','bind','Option','.option-tab.active','innerHTML','Failed\x20to\x20report\x20comment:\x20','recent-matches-preview','div','Loading\x20next\x20page\x20using\x20cursor','addEventListener','userProfiles','Failed\x20to\x20parse\x20cache:','.option-tab','commentAddOverlay','preview-d3-button','split','marginTop','.loser-demo-link','from','log','table','Demo\x20link','totalPages','length','title','onclick','toggle','key','prev','previewNextPage','toString','clear-enhanced-filters','button','toLocaleString','#CD7F32','currentMode','commentPopupPreview','.player.loser\x20.player-suicides','selected','levels','S:\x20','stringify','Yesterday','currentMatchId','uid','\x27s\x20Demo','map','stopPropagation','cursor','\x20demo\x20links:','exists','pilots','warn'];a6_0x1772=function(){return _0x5e540c;};return a6_0x1772();}function getCachedPage(_0x1daacb){const _0x1fd9f4=a6_0x31ec,_0x2ca529=sessionStorage['getItem'](_0x1daacb);if(_0x2ca529)try{return JSON['parse'](_0x2ca529);}catch(_0x50aca5){return console['error'](_0x1fd9f4(0x100),_0x50aca5),sessionStorage['removeItem'](_0x1daacb),null;}return null;}function cachePage(_0xdd8447,_0x4f445e){const _0x5f083d=a6_0x31ec;try{sessionStorage['setItem'](_0xdd8447,JSON[_0x5f083d(0x11e)](_0x4f445e));}catch(_0x1e45af){console['error'](_0x5f083d(0x93),_0x1e45af);}}function getEloColor(_0x1822e2){const _0x26df94=a6_0x31ec,_0xb8bbc2=Number(_0x1822e2);if(_0xb8bbc2>=0x7d0)return'#50C878';else{if(_0xb8bbc2>=0x708)return _0x26df94(0xd5);else{if(_0xb8bbc2>=0x640)return _0x26df94(0xbd);else{if(_0xb8bbc2>=0x578)return _0x26df94(0x117);else return'#808080';}}}}function formatDate(_0x414e84,_0x3e0bea=![]){const _0x185881=a6_0x31ec;if(!_0x414e84||!_0x414e84['seconds'])return _0x185881(0x84);const _0x5d4d03=new Date(_0x414e84['seconds']*0x3e8);return _0x3e0bea?_0x5d4d03[_0x185881(0x116)]():_0x5d4d03['toLocaleDateString']();}function truncateComment(_0x387ae0,_0x1dd26e=0x1e){const _0x2b70c4=a6_0x31ec;if(!_0x387ae0)return'-';if(_0x387ae0['length']<=_0x1dd26e)return _0x387ae0;return _0x387ae0['substring'](0x0,_0x1dd26e)+_0x2b70c4(0x6e);}function formatCommentDate(_0x1f8715){const _0x408e68=a6_0x31ec;if(!_0x1f8715||!_0x1f8715[_0x408e68(0xb8)])return'';const _0x169572=new Date(_0x1f8715['seconds']*0x3e8),_0x3b7bd1=new Date(),_0x3fae9f=Math[_0x408e68(0x82)](_0x3b7bd1-_0x169572),_0x22ed69=Math['floor'](_0x3fae9f/(0x3e8*0x3c*0x3c*0x18));if(_0x22ed69===0x0)return'Today';else{if(_0x22ed69===0x1)return _0x408e68(0x11f);else return _0x22ed69<0x7?_0x22ed69+'\x20days\x20ago':_0x169572['toLocaleDateString']();}}function setLoadingIndicator(_0x3f2ed2){const _0x15b870=a6_0x31ec,_0x32c601=document['getElementById']('loading-indicator');if(_0x32c601)_0x32c601['style'][_0x15b870(0xb7)]=_0x3f2ed2?'block':'none';}export function updatePreviewLadderModeUI(){const _0x1355e5=a6_0x31ec,_0x38476f=document['getElementById']('preview-ladder-mode'),_0x4594e6=document[_0x1355e5(0xa8)]('preview-d1-button'),_0x3da03a=document['getElementById']('preview-d2-button'),_0x58fdd4=document[_0x1355e5(0xa8)](_0x1355e5(0x103));if(_0x38476f)_0x38476f['textContent']=previewState['currentMode'];if(_0x4594e6)_0x4594e6['classList'][_0x1355e5(0x10f)]('active',previewState['currentMode']==='D1');if(_0x3da03a)_0x3da03a['classList']['toggle']('active',previewState[_0x1355e5(0x118)]==='D2');if(_0x58fdd4)_0x58fdd4[_0x1355e5(0xe4)]['toggle'](_0x1355e5(0xe2),previewState['currentMode']==='D3');}function updatePreviewPaginationControls(_0x5476da){const _0x11798d=a6_0x31ec,_0x4abafc=document['getElementById']('previewPrevPage'),_0x4effe2=document[_0x11798d(0xa8)](_0x11798d(0x112)),_0x377fba=document['getElementById']('previewPageInfo');if(!_0x4abafc||!_0x4effe2||!_0x377fba)return;_0x377fba['textContent']='Page\x20'+previewState['currentPage'],_0x4abafc['disabled']=previewState['currentPage']<=0x1,_0x4effe2[_0x11798d(0x75)]=!_0x5476da;}function setPreviewLoadingState(_0x4f90fd){const _0x4f0be8=a6_0x31ec;previewState[_0x4f0be8(0xd0)]=_0x4f90fd,setLoadingIndicator(_0x4f90fd);const _0x52581c=document['getElementById']('recent-matches-preview'),_0xa47b83=_0x52581c?_0x52581c['querySelector'](_0x4f0be8(0x7f)):null,_0x4b0715=document['getElementById']('previewPrevPage'),_0x6e1a7e=document['getElementById']('previewNextPage'),_0x5d3fe2=document['getElementById']('preview-d1-button'),_0x5d88fc=document['getElementById'](_0x4f0be8(0xc2)),_0x4e7a49=document['getElementById'](_0x4f0be8(0x9f)),_0xa61b32=document['getElementById'](_0x4f0be8(0x80));if(_0xa47b83&&!_0x4f90fd)_0xa47b83[_0x4f0be8(0xb0)][_0x4f0be8(0xb7)]=_0x4f0be8(0xb5);else _0xa47b83&&_0x4f90fd&&(_0xa47b83['style']['display']=_0x4f0be8(0xef));!_0x4f90fd&&_0x52581c&&!_0x52581c['querySelector']('.match-card')&&!_0x52581c['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x52581c[_0x4f0be8(0xf9)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?_0x4f0be8(0x6d):'')+_0x4f0be8(0xaf));if(_0x4b0715)_0x4b0715[_0x4f0be8(0x75)]=_0x4f90fd||previewState[_0x4f0be8(0x8c)]<=0x1;if(_0x6e1a7e)_0x6e1a7e[_0x4f0be8(0x75)]=_0x4f90fd;if(_0x5d3fe2)_0x5d3fe2['disabled']=_0x4f90fd;if(_0x5d88fc)_0x5d88fc[_0x4f0be8(0x75)]=_0x4f90fd;if(_0x4e7a49)_0x4e7a49['disabled']=_0x4f90fd;if(_0xa61b32)_0xa61b32['disabled']=_0x4f90fd;}function applyClientFilters(_0x902407){if(!previewState['filterUsername'])return _0x902407;const _0x1edd57=previewState['filterUsername']['toLowerCase']();return _0x902407['filter'](_0x58bec1=>{const _0xa90929=(_0x58bec1['winnerUsername']||'')['toLowerCase'](),_0x1602d1=(_0x58bec1['loserUsername']||'')['toLowerCase']();return _0xa90929['includes'](_0x1edd57)||_0x1602d1['includes'](_0x1edd57);});}function applyEnhancedClientFilters(_0x5ec0f7){if(!hasEnhancedFilters())return _0x5ec0f7;return _0x5ec0f7['filter'](_0x1b0f32=>{const _0xdc0c1c=a6_0x31ec;if(previewState[_0xdc0c1c(0xe7)]['pilots']){const _0x43d17b=previewState['enhancedFilters'][_0xdc0c1c(0x128)][_0xdc0c1c(0xc8)](),_0x24b377=(_0x1b0f32[_0xdc0c1c(0x76)]||'')['toLowerCase'](),_0x7124b5=(_0x1b0f32[_0xdc0c1c(0xb6)]||'')[_0xdc0c1c(0xc8)]();if(!_0x24b377[_0xdc0c1c(0x78)](_0x43d17b)&&!_0x7124b5['includes'](_0x43d17b))return![];}if(previewState[_0xdc0c1c(0xe7)]['levels']){const _0x41a6ab=previewState['enhancedFilters']['levels']['toLowerCase'](),_0x5456fb=(_0x1b0f32['mapPlayed']||'')['toLowerCase']();if(!_0x5456fb['includes'](_0x41a6ab))return![];}if(previewState['enhancedFilters'][_0xdc0c1c(0xda)]['length']>0x0){const _0x38e857=_0x1b0f32['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters']['subgames']['includes'](_0x38e857))return![];}return!![];});}function hasEnhancedFilters(){const _0x218d53=a6_0x31ec;return previewState[_0x218d53(0xe7)]['pilots']||previewState[_0x218d53(0xe7)][_0x218d53(0x11c)]||previewState['enhancedFilters']['subgames']['length']>0x0;}function clearEnhancedFilters(){const _0x5f2650=a6_0x31ec;previewState[_0x5f2650(0xe7)]={'pilots':'','levels':'','subgames':[]},document['getElementById']('filter-pilots')['value']='',document['getElementById']('filter-levels')[_0x5f2650(0x71)]='';const _0x9f0f0b=document[_0x5f2650(0xa8)](_0x5f2650(0xf2));for(let _0x2a22a3 of _0x9f0f0b[_0x5f2650(0x9d)]){_0x2a22a3[_0x5f2650(0x11b)]=![];}}function jumpToPage(_0x4a1ef8){const _0x2e6076=a6_0x31ec,_0x223597=document[_0x2e6076(0xa8)](_0x2e6076(0x7d)),_0x2900d9=previewState['currentPage'];let _0x46266e=_0x2900d9;switch(_0x4a1ef8){case'start':_0x46266e=0x1;break;case'end':_0x46266e=Math['max'](_0x2900d9+0xa,previewState[_0x2e6076(0x10b)]||_0x2900d9+0xa);break;case'+1':_0x46266e=_0x2900d9+0x1;break;case'+5':_0x46266e=_0x2900d9+0x5;break;case'+10':_0x46266e=_0x2900d9+0xa;break;case'-1':_0x46266e=Math['max'](0x1,_0x2900d9-0x1);break;case'-5':_0x46266e=Math[_0x2e6076(0x6c)](0x1,_0x2900d9-0x5);break;case'-10':_0x46266e=Math['max'](0x1,_0x2900d9-0xa);break;case _0x2e6076(0xa1):const _0x59b23d=parseInt(_0x223597['value']);_0x59b23d&&_0x59b23d>0x0&&(_0x46266e=_0x59b23d,_0x223597['value']='');break;}_0x46266e!==_0x2900d9&&_0x46266e>0x0&&(previewState[_0x2e6076(0x8c)]=_0x46266e,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x3b7a16=a6_0x17627c(0xe0)){const _0x47466a=a6_0x17627c,_0x58ffed=document[_0x47466a(0xa8)](_0x47466a(0xfb)),_0x289d5a=document['getElementById']('match-card-template');if(previewState['isLoading']||!_0x58ffed||!_0x289d5a)return;_0x3b7a16==='current'&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object['keys'](sessionStorage)['forEach'](_0x573e61=>{_0x573e61['includes']('previewCache_'+previewState['currentMode'])&&sessionStorage['removeItem'](_0x573e61);}));let _0x24aff1=previewState['currentPage'];if(_0x3b7a16==='next')_0x24aff1++;else{if(_0x3b7a16===_0x47466a(0x111))_0x24aff1--;else _0x3b7a16===_0x47466a(0xe0)&&(_0x24aff1=0x1,previewState['firstVisible']=null,previewState['lastVisible']=null);}if(_0x24aff1<0x1)_0x24aff1=0x1;const _0x1d3ea8=previewState['currentPage'];previewState[_0x47466a(0x8c)]=_0x24aff1,updatePreviewPaginationControls(!![]);const _0x533803={'filterUsername':previewState['filterUsername']},_0x31c09f=getCacheKey(previewState['currentMode'],_0x24aff1,_0x533803),_0x5df40d=_0x3b7a16!=='current'?getCachedPage(_0x31c09f):null;if(_0x5df40d){console[_0x47466a(0x108)]('Rendering\x20page\x20'+_0x24aff1+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x5df40d['docsData']),updatePreviewPaginationControls(_0x5df40d['hasNextPage']),setPreviewLoadingState(![]);return;}console[_0x47466a(0x108)]('Cache\x20miss\x20for\x20page\x20'+_0x24aff1+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x58ffed['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x1928b8=previewState[_0x47466a(0x118)]==='D1'?'approvedMatches':previewState[_0x47466a(0x118)]==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x555818=previewState['currentMode']==='D1'?'createdAt':_0x47466a(0xb4);try{const _0x91dca7=collection(window['db'],_0x1928b8);let _0x332ab5=[orderBy(_0x555818,_0x47466a(0x96))];if(_0x24aff1===0x1)console[_0x47466a(0x108)]('Loading\x20first\x20page\x20from\x20Firestore'),_0x332ab5['push'](limit(previewState['matchesPerPage']));else{if(_0x3b7a16==='next'&&previewState['lastVisible'])console['log'](_0x47466a(0xfd)),_0x332ab5['push'](startAfter(previewState['lastVisible'])),_0x332ab5['push'](limit(previewState['matchesPerPage']));else{console['log'](_0x47466a(0xa7));const _0x304da8=_0x24aff1*previewState[_0x47466a(0xd8)];_0x332ab5['push'](limit(_0x304da8));}}const _0x50fa6b=query(_0x91dca7,..._0x332ab5),_0x1cde7e=await getDocs(_0x50fa6b);let _0x4d2631=_0x1cde7e['docs'];if(_0x24aff1>0x1&&_0x3b7a16!=='next'){const _0x5d149b=(_0x24aff1-0x1)*previewState[_0x47466a(0xd8)];_0x4d2631=_0x4d2631[_0x47466a(0xc5)](_0x5d149b,_0x5d149b+previewState[_0x47466a(0xd8)]);}if(_0x4d2631['length']===0x0){console['log']('No\x20results\x20found\x20for\x20this\x20page');_0x3b7a16==='next'&&(previewState['currentPage']=_0x1d3ea8,updatePreviewPaginationControls(![]));_0x58ffed[_0x47466a(0xf9)]='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState[_0x47466a(0x8d)]?_0x47466a(0x6d):'')+'.</div>',setPreviewLoadingState(![]);return;}previewState[_0x47466a(0xe9)]=_0x4d2631[0x0],previewState['lastVisible']=_0x4d2631[_0x4d2631[_0x47466a(0x10c)]-0x1];const _0x4e3301=_0x4d2631['map'](_0x1d0728=>({'id':_0x1d0728['id'],..._0x1d0728['data']()}));let _0x248753=![];if(_0x4d2631['length']===previewState[_0x47466a(0xd8)]){const _0x1a9a92=query(_0x91dca7,orderBy(_0x555818,'desc'),startAfter(previewState[_0x47466a(0xe5)]),limit(0x1)),_0x22fb13=await getDocs(_0x1a9a92);_0x248753=!_0x22fb13['empty'];}const _0x27b523=applyClientFilters(_0x4e3301),_0x35cb04={'docsData':_0x4e3301,'hasNextPage':_0x248753};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x533803),_0x35cb04);if(_0x24aff1>0x1&&_0x3b7a16!=='next')for(let _0x4d5aaa=0x1;_0x4d5aaa<_0x24aff1;_0x4d5aaa++){const _0x2b4cf2=(_0x4d5aaa-0x1)*previewState[_0x47466a(0xd8)],_0x1df03a=_0x2b4cf2+previewState['matchesPerPage'],_0x24770a=_0x1cde7e['docs']['slice'](_0x2b4cf2,_0x1df03a);if(_0x24770a['length']>0x0){const _0x183176=_0x24770a['map'](_0x12e385=>({'id':_0x12e385['id'],..._0x12e385['data']()})),_0x35e3cf=!![];cachePage(getCacheKey(previewState[_0x47466a(0x118)],_0x4d5aaa,_0x533803),{'docsData':_0x183176,'hasNextPage':_0x35e3cf}),console['log']('Cached\x20intermediary\x20page\x20'+_0x4d5aaa);}}_0x27b523['length']===0x0&&previewState['filterUsername']?_0x58ffed['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState['filterUsername']+'\x22</div>':renderMatchCards(_0x27b523),updatePreviewPaginationControls(_0x248753);}catch(_0x44d130){console[_0x47466a(0xb9)]('Error\x20fetching\x20'+previewState['currentMode']+_0x47466a(0x95),_0x44d130),_0x58ffed['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x44d130['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x1d3ea8;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x58dbc7){const _0x338251=a6_0x17627c,_0x10953e=document['getElementById']('recent-matches-preview'),_0x116858=document['getElementById'](_0x338251(0xc4));if(!_0x10953e||!_0x116858)return;!_0x10953e['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x10953e[_0x338251(0xf9)]='');if(!_0x58dbc7||_0x58dbc7[_0x338251(0x10c)]===0x0){if(!_0x10953e['querySelector'](_0x338251(0xc0))){const _0x585980=hasEnhancedFilters()?_0x338251(0x6d):previewState['filterUsername']?_0x338251(0x6d):'';_0x10953e['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x585980+_0x338251(0xaf);}return;}const _0x29da20=applyEnhancedClientFilters(_0x58dbc7);if(_0x29da20['length']===0x0){_0x10953e['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x410d18=_0x29da20['map'](_0x2e69a9=>getAllCommentsForMatch(_0x2e69a9['id']));let _0x2b26b=[];try{_0x2b26b=await Promise[_0x338251(0xa0)](_0x410d18);}catch(_0x3bc13c){console[_0x338251(0xb9)](_0x338251(0xbe),_0x3bc13c),_0x2b26b=_0x29da20['map'](()=>[]);}const _0x3cdc5b={};_0x2b26b['forEach']((_0x5da60b,_0x2dd722)=>{_0x3cdc5b[_0x29da20[_0x2dd722]['id']]=_0x5da60b||[];}),_0x29da20['forEach'](_0xa90941=>{const _0x16a982=_0x338251,_0x4ef833=_0x116858['content']['cloneNode'](!![]),_0x2829de=_0x4ef833['querySelector']('.match-display-wrapper'),_0x5e3a8d=_0x4ef833[_0x16a982(0xca)](_0x16a982(0x9c)),_0xca4bf6=getEloRankClass(_0xa90941['winnerOldElo']);_0x5e3a8d['classList'][_0x16a982(0xd7)]('winner-'+_0xca4bf6),_0x5e3a8d['querySelector']('.match-map')['textContent']=_0xa90941['mapPlayed']||'Unknown\x20Map',_0x5e3a8d[_0x16a982(0xca)](_0x16a982(0x79))[_0x16a982(0x94)]=formatDate(_0xa90941['approvedAt']||_0xa90941[_0x16a982(0xdf)]);const _0x132a6a=_0x5e3a8d['querySelector']('.player.winner\x20.player-name');_0x132a6a[_0x16a982(0x94)]=_0xa90941['winnerUsername']||'Unknown',_0x132a6a[_0x16a982(0xb0)][_0x16a982(0x91)]=getEloColor(_0xa90941[_0x16a982(0x8a)]),_0x5e3a8d[_0x16a982(0xca)]('.player.winner\x20.player-score')['textContent']=_0xa90941['winnerScore']??0x0;const _0x360a7d=_0x5e3a8d['querySelector']('.player.winner\x20.player-suicides'),_0x317c79=_0xa90941['winnerSuicides']||0x0;_0x360a7d['textContent']=_0x16a982(0x11d)+_0x317c79;const _0x36c3c3=_0x5e3a8d['querySelector']('.player.loser\x20.player-name');_0x36c3c3['textContent']=_0xa90941['loserUsername']||'Unknown',_0x36c3c3[_0x16a982(0xb0)]['color']=getEloColor(_0xa90941['loserOldElo']),_0x5e3a8d['querySelector'](_0x16a982(0x99))['textContent']=_0xa90941['loserScore']??0x0;const _0x535c95=_0x5e3a8d['querySelector'](_0x16a982(0x11a)),_0xf1a69c=_0xa90941[_0x16a982(0x8b)]||0x0;_0x535c95['textContent']='S:\x20'+_0xf1a69c;const _0x538eb8=_0x5e3a8d[_0x16a982(0xca)](_0x16a982(0xac));if(_0x538eb8){if(_0xa90941['subgameType']&&_0xa90941[_0x16a982(0xa6)]['trim']()!==''){_0x538eb8['textContent']=_0xa90941[_0x16a982(0xa6)],_0x538eb8[_0x16a982(0xb0)]['display']='block';const _0xd988a=getSubgameClass(_0xa90941[_0x16a982(0xa6)]);_0xd988a&&_0x538eb8[_0x16a982(0xe4)]['add'](_0xd988a);}else _0x538eb8['textContent']='Standard\x20Match',_0x538eb8[_0x16a982(0xb0)][_0x16a982(0xb7)]='block',_0x538eb8['style']['opacity']='0.6';}const _0x23aa53=_0x5e3a8d[_0x16a982(0xca)](_0x16a982(0x98)),_0x5d4103=_0x5e3a8d['querySelector'](_0x16a982(0xdb)),_0x2bb3c6=_0xa90941[_0x16a982(0xd1)]||'',_0x47c53b=_0xa90941[_0x16a982(0xcc)]||'',_0x10d18d=_0xa90941['approvedAt']||_0xa90941[_0x16a982(0xdf)],_0x39ac2c=filterComment(_0x2bb3c6,_0xa90941['winnerUsername'],_0x10d18d),_0x35002b=filterComment(_0x47c53b,_0xa90941['loserUsername'],_0x10d18d);_0x23aa53['textContent']='\x22'+truncateComment(_0x2bb3c6)+'\x22',_0x5d4103['textContent']='\x22'+truncateComment(_0x47c53b)+'\x22';_0x2bb3c6&&!isUsernameMuted(_0xa90941['winnerUsername'],_0x10d18d)?_0x23aa53[_0x16a982(0x10e)]=()=>showPreviewCommentPopup(_0x39ac2c,_0xa90941[_0x16a982(0x76)]||'Winner',getEloColor(_0xa90941['winnerOldElo'])):(_0x23aa53['textContent']=_0x39ac2c==='Muted.'?_0x16a982(0xeb):'-',_0x23aa53['style']['cursor']=_0x16a982(0xf3),_0x23aa53['onclick']=null);_0x47c53b&&!isUsernameMuted(_0xa90941['loserUsername'])?_0x5d4103[_0x16a982(0x10e)]=()=>showPreviewCommentPopup(_0x35002b,_0xa90941[_0x16a982(0xb6)]||'Loser',getEloColor(_0xa90941['loserOldElo'])):(_0x5d4103['textContent']=_0x35002b==='Muted.'?'Muted.':'-',_0x5d4103[_0x16a982(0xb0)]['cursor']=_0x16a982(0xf3),_0x5d4103[_0x16a982(0x10e)]=null);const _0x369845=_0x2829de?.['querySelector']('.community-comments-section');if(!_0x369845)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x5138a6=_0x369845['querySelector']('.comments-container'),_0x34b450=_0x5138a6?.['querySelector']('.no-comments-message'),_0x59d00b=_0x369845['querySelector']('.add-comment-btn');if(_0x5138a6){while(_0x5138a6[_0x16a982(0xc3)]&&_0x5138a6['firstChild']!==_0x34b450){_0x5138a6[_0x16a982(0x74)](_0x5138a6['firstChild']);}_0x59d00b&&_0x59d00b['addEventListener']('click',()=>{showAddCommentPopup(_0xa90941['id']);});const _0x236dcd=_0x3cdc5b[_0xa90941['id']]||[];if(_0x236dcd[_0x16a982(0x10c)]>0x0){if(_0x34b450)_0x34b450['style']['display']='none';const _0x4e3902=(_0x13c31e,_0x1a37f3)=>{const _0x2eacca=_0x16a982,_0x450195=_0x13c31e[_0x2eacca(0x104)]('\x20');if(_0x450195[_0x2eacca(0x10c)]<=_0x1a37f3)return _0x13c31e;return _0x450195['slice'](0x0,_0x1a37f3)['join']('\x20')+'...';};_0x236dcd['forEach'](_0x58c10d=>{const _0x2f58f8=_0x16a982,_0x5b44a2=document['createElement']('div');if(_0x58c10d['type']==='demo'){_0x5b44a2['className']='demo-link',_0x5b44a2['innerHTML']=_0x2f58f8(0x7a)+_0x58c10d['demoLink']+'\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20'+_0x58c10d[_0x2f58f8(0xbc)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x58c10d['description']||'No\x20description\x20provided')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x5a9bad=window['auth'][_0x2f58f8(0xa2)],_0x1895ee=_0x5a9bad&&_0x58c10d['userId']===_0x5a9bad['uid'];if(_0x1895ee){const _0x488e7a=document['createElement']('button');_0x488e7a['className']='delete-comment-btn',_0x488e7a['innerHTML']='×',_0x488e7a[_0x2f58f8(0xe6)]('aria-label',_0x2f58f8(0xa5)),_0x488e7a[_0x2f58f8(0xfe)]('click',_0x56b93f=>{const _0x1435ed=_0x2f58f8;_0x56b93f[_0x1435ed(0xb2)](),_0x56b93f['stopPropagation'](),deleteComment(_0x58c10d['id'],_0x5b44a2);}),_0x5b44a2['appendChild'](_0x488e7a);}}else{_0x5b44a2['className']='comment-item';const _0x345d09=isUsernameMuted(_0x58c10d['username'],_0x58c10d[_0x2f58f8(0xcf)]),_0x43ab56=_0x345d09?'Muted.':_0x4e3902(_0x58c10d['text']||'',0xf),_0x25f20a=_0x58c10d[_0x2f58f8(0xbc)]||_0x2f58f8(0x87),_0x5198d2=window[_0x2f58f8(0xd6)]['currentUser'],_0x142720=_0x5198d2&&_0x58c10d[_0x2f58f8(0xc6)]===_0x5198d2['uid'];let _0x1c064e='';_0x142720&&(_0x1c064e='<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>');_0x5b44a2['innerHTML']=_0x1c064e+'<strong>'+_0x25f20a+':</strong>\x20\x22'+_0x43ab56+'\x22';if(_0x142720){const _0x2bdcbb=_0x5b44a2[_0x2f58f8(0xca)]('.delete-comment-btn');_0x2bdcbb&&_0x2bdcbb[_0x2f58f8(0xfe)]('click',_0x26dc2d=>{const _0x49a516=_0x2f58f8;_0x26dc2d[_0x49a516(0x124)](),deleteComment(_0x58c10d['id'],_0x5b44a2);});}!_0x345d09?_0x5b44a2['addEventListener']('click',()=>{showFullCommentLightbox(_0x58c10d);}):_0x5b44a2['style'][_0x2f58f8(0x125)]=_0x2f58f8(0xf3);}_0x5138a6['insertBefore'](_0x5b44a2,_0x5138a6['firstChild']);});}else{if(_0x34b450)_0x34b450[_0x16a982(0xb0)]['display']='block';}}}const _0x3f3ab5=_0x5e3a8d['querySelector'](_0x16a982(0xcb));if(_0x3f3ab5){const _0x758675=_0x5e3a8d['querySelector'](_0x16a982(0xec)),_0x4ef2d8=_0x5e3a8d['querySelector'](_0x16a982(0x106)),_0x58e4b8=_0xa90941['winnerDemoLink']||null,_0xf8e50f=_0xa90941['loserDemoLink']||_0xa90941['demoLink']||null;console['log']('Match\x20'+_0xa90941['id']+_0x16a982(0x126),{'winner':_0x58e4b8,'loser':_0xf8e50f}),_0x758675&&(_0x58e4b8?(_0x758675[_0x16a982(0xbb)]=_0x58e4b8,_0x758675[_0x16a982(0xb0)]['display']='flex',_0x758675[_0x16a982(0x10d)]=_0xa90941['winnerUsername']+'\x27s\x20Demo'):_0x758675['style']['display']='none'),_0x4ef2d8&&(_0xf8e50f?(_0x4ef2d8['href']=_0xf8e50f,_0x4ef2d8['style']['display']='flex',_0x4ef2d8['title']=_0xa90941[_0x16a982(0xb6)]+_0x16a982(0x122)):_0x4ef2d8[_0x16a982(0xb0)][_0x16a982(0xb7)]='none'),_0x58e4b8&&_0x758675||_0xf8e50f&&_0x4ef2d8?_0x3f3ab5[_0x16a982(0xb0)][_0x16a982(0xb7)]='flex':_0x3f3ab5['style'][_0x16a982(0xb7)]='none';}_0x10953e[_0x16a982(0x90)](_0x4ef833);});}function getSubgameClass(_0x4e4bba){const _0x51495b=a6_0x17627c,_0x2df6da={'Fusion\x20Match':_0x51495b(0x7e),'≥6\x20Missiles':_0x51495b(0x7b),'≥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':_0x51495b(0x83),'Altered\x20Powerups':'altered-powerups','Mega\x20Match':_0x51495b(0xa9),'Dogfight':'dogfight','Gauss\x20and\x20Mercs':_0x51495b(0x70)};return _0x2df6da[_0x4e4bba]||'';}async function deleteComment(_0x111ce0,_0x3e2710){const _0x15b878=a6_0x17627c,_0x1292c9=window[_0x15b878(0xd6)]['currentUser'];if(!_0x1292c9){alert(_0x15b878(0xe1));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x467ddd=doc(window['db'],'matchComments',_0x111ce0),_0x44c283=await getDoc(_0x467ddd);if(!_0x44c283[_0x15b878(0x127)]()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x2dcfcd=_0x44c283[_0x15b878(0xf1)]();if(_0x2dcfcd['userId']!==_0x1292c9['uid']){alert(_0x15b878(0x77));return;}await deleteDoc(_0x467ddd);if(_0x3e2710&&_0x3e2710[_0x15b878(0xd3)]){_0x3e2710[_0x15b878(0xd3)]['removeChild'](_0x3e2710);const _0x21e403=_0x3e2710['closest']('.comments-container');if(_0x21e403&&!_0x21e403['querySelector'](_0x15b878(0xf0))){const _0x47c5ca=_0x21e403[_0x15b878(0xca)]('.no-comments-message');if(_0x47c5ca)_0x47c5ca['style']['display']='block';}}console['log'](_0x15b878(0xed));}catch(_0x474af5){console['error'](_0x15b878(0xd2),_0x474af5),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x474af5['message']);}}async function getAllCommentsForMatch(_0x83cb24){const _0x4307e2=a6_0x17627c;if(!_0x83cb24)return[];try{const _0x39b29a=collection(window['db'],'matchComments'),_0x108ea2=query(_0x39b29a,where('matchId','==',_0x83cb24),orderBy(_0x4307e2(0xcf),'desc')),_0x414c59=await getDocs(_0x108ea2);if(_0x414c59['empty'])return[];return _0x414c59['docs']['map'](_0xb1ec72=>({'id':_0xb1ec72['id'],..._0xb1ec72['data']()}));}catch(_0x41c9c2){return console['error'](_0x4307e2(0x9b),_0x41c9c2),[];}}async function submitComment(_0x5a3c8e){const _0x5aa85e=a6_0x17627c;_0x5a3c8e[_0x5aa85e(0xb2)]();if(!window['auth']||!window['db']){console[_0x5aa85e(0xb9)]('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const _0x3a3c55=window['auth']['currentUser'];if(!_0x3a3c55){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x246688=document['getElementById']('commentMatchId')?.['value'],_0x1628f7=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x246688||!_0x1628f7){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting');return;}const _0x434fb4=_0x1628f7['split'](/\s+/)['filter'](_0x2e656b=>_0x2e656b['length']>0x0)['length'];if(_0x434fb4>0xf){alert(_0x5aa85e(0xaa));return;}const _0x2504b2=document['querySelector'](_0x5aa85e(0xc9));_0x2504b2&&(_0x2504b2['disabled']=!![],_0x2504b2[_0x5aa85e(0x94)]=_0x5aa85e(0x81));try{let _0x33bdfb='Anonymous';try{const _0x2ba678=doc(window['db'],'userProfiles',_0x3a3c55[_0x5aa85e(0x121)]),_0x5f0257=await getDoc(_0x2ba678);if(_0x5f0257['exists']()){const _0x4acb1b=_0x5f0257['data']();_0x4acb1b['username']&&(_0x33bdfb=_0x4acb1b['username']);}_0x33bdfb===_0x5aa85e(0x87)&&_0x3a3c55['displayName']&&(_0x33bdfb=_0x3a3c55[_0x5aa85e(0x97)]);}catch(_0x3632c){console['warn'](_0x5aa85e(0x9a),_0x3632c),_0x3a3c55['displayName']&&(_0x33bdfb=_0x3a3c55[_0x5aa85e(0x97)]);}const _0x58011d={'matchId':_0x246688,'userId':_0x3a3c55['uid'],'username':_0x33bdfb,'text':_0x1628f7,'timestamp':serverTimestamp()};console[_0x5aa85e(0x108)]('Submitting\x20comment\x20as:',_0x33bdfb);const _0x4cf876=collection(window['db'],'matchComments');await addDoc(_0x4cf876,_0x58011d),console[_0x5aa85e(0x108)]('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview(_0x5aa85e(0xe0));}catch(_0x3ebb5e){console['error']('Error\x20submitting\x20comment:',_0x3ebb5e),alert(_0x5aa85e(0xc1)+_0x3ebb5e[_0x5aa85e(0xdc)]),_0x2504b2&&(_0x2504b2['disabled']=![],_0x2504b2['textContent']='Submit');}}function closeAddCommentPopup(){const _0x1736f2=a6_0x17627c,_0x24bde7=document['getElementById']('commentAddPopup'),_0x15ec43=document['getElementById'](_0x1736f2(0x102));if(_0x24bde7)_0x24bde7[_0x1736f2(0xb0)]['display']='none';if(_0x15ec43)_0x15ec43[_0x1736f2(0xb0)]['display']=_0x1736f2(0xb5);}function showAddCommentPopup(_0x2fab23){const _0x50eed4=a6_0x17627c,_0x4f4763=window[_0x50eed4(0xd6)][_0x50eed4(0xa2)];if(!_0x4f4763){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x332d97=document['getElementById']('commentAddPopup'),_0x51c841=document['getElementById']('commentAddOverlay');!_0x332d97&&(_0x332d97=document[_0x50eed4(0x92)]('div'),_0x332d97['id']='commentAddPopup',_0x332d97[_0x50eed4(0x86)]='comment-popup',document[_0x50eed4(0xb3)]['appendChild'](_0x332d97));!_0x51c841&&(_0x51c841=document['createElement']('div'),_0x51c841['id']='commentAddOverlay',_0x51c841['className']='comment-overlay',document[_0x50eed4(0xb3)]['appendChild'](_0x51c841));_0x332d97['innerHTML']=_0x50eed4(0x73)+_0x2fab23+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x332d97['style'][_0x50eed4(0xb7)]=_0x50eed4(0xef),_0x51c841['style']['display']='block',document[_0x50eed4(0xa8)]('closeAddCommentPopup')[_0x50eed4(0xfe)]('click',closeAddCommentPopup),_0x51c841['addEventListener']('click',closeAddCommentPopup);const _0xe848bd=_0x332d97['querySelectorAll'](_0x50eed4(0x101));_0xe848bd['forEach'](_0x4ea967=>{_0x4ea967['addEventListener']('click',function(){const _0x509ddd=a6_0x31ec;_0xe848bd['forEach'](_0x1cca1b=>_0x1cca1b['classList']['remove']('active')),document[_0x509ddd(0x85)]('.option-content')['forEach'](_0x24990f=>_0x24990f[_0x509ddd(0xb0)][_0x509ddd(0xb7)]='none'),this['classList']['add']('active');const _0x40bb24=this['dataset'][_0x509ddd(0xc7)];document['getElementById'](_0x40bb24+_0x509ddd(0xf7))['style']['display']='block',_0x40bb24==='demo'?(document[_0x509ddd(0xa8)]('demoLink')[_0x509ddd(0xe6)](_0x509ddd(0xf5),''),document[_0x509ddd(0xa8)](_0x509ddd(0xab))[_0x509ddd(0xee)]('required')):(document[_0x509ddd(0xa8)](_0x509ddd(0x6f))[_0x509ddd(0xee)]('required'),document[_0x509ddd(0xa8)]('commentText')['setAttribute']('required',''));});}),document['getElementById']('commentText')['setAttribute'](_0x50eed4(0xf5),''),document['getElementById']('demoLink')['removeAttribute'](_0x50eed4(0xf5)),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription','demoWordCount',0x14),document['getElementById']('addCommentForm')[_0x50eed4(0xfe)]('submit',submitCommentOrDemo);}function setupWordCounter(_0x2cd31a,_0x18a564,_0x32a6e7){const _0x1abcae=a6_0x17627c,_0xe02e92=document[_0x1abcae(0xa8)](_0x2cd31a),_0x4da7ba=document['getElementById'](_0x18a564);if(!_0xe02e92||!_0x4da7ba)return;_0x5d87d4(),_0xe02e92['addEventListener']('input',_0x5d87d4);function _0x5d87d4(){const _0x52cbe7=_0x1abcae,_0x5b8b2b=_0xe02e92['value']['trim'](),_0xda4a3c=_0x5b8b2b?_0x5b8b2b['split'](/\s+/)['filter'](_0x4cd697=>_0x4cd697[_0x52cbe7(0x10c)]>0x0)['length']:0x0;_0x4da7ba[_0x52cbe7(0x94)]=_0xda4a3c,_0xda4a3c>_0x32a6e7?_0x4da7ba['style']['color']=_0x52cbe7(0xbf):_0x4da7ba['style']['color']='#aaa';}}async function submitCommentOrDemo(_0x553d34){const _0x8e6a4e=a6_0x17627c;_0x553d34[_0x8e6a4e(0xb2)]();if(!window['auth']||!window['db']){console['error'](_0x8e6a4e(0x7c)),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x15869b=window['auth']['currentUser'];if(!_0x15869b){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x38c5a3=document['getElementById']('commentMatchId')['value'],_0x39fb7d=document['querySelector'](_0x8e6a4e(0xf8))['dataset']['option'];let _0x3ba838=_0x8e6a4e(0x87);try{const _0xf6c73e=doc(window['db'],_0x8e6a4e(0xff),_0x15869b['uid']),_0x5829f5=await getDoc(_0xf6c73e);if(_0x5829f5['exists']()){const _0x547885=_0x5829f5[_0x8e6a4e(0xf1)]();_0x547885['username']&&(_0x3ba838=_0x547885['username']);}_0x3ba838==='Anonymous'&&_0x15869b['displayName']&&(_0x3ba838=_0x15869b[_0x8e6a4e(0x97)]);}catch(_0x1a9d16){console['warn'](_0x8e6a4e(0xe3),_0x1a9d16),_0x15869b[_0x8e6a4e(0x97)]&&(_0x3ba838=_0x15869b['displayName']);}const _0x7f2c0b=document['querySelector']('.submit-comment-btn');_0x7f2c0b&&(_0x7f2c0b['disabled']=!![],_0x7f2c0b['textContent']=_0x8e6a4e(0x81));try{if(_0x39fb7d==='comment'){const _0x189eca=document['getElementById'](_0x8e6a4e(0xab))['value']['trim']();if(!_0x189eca){alert(_0x8e6a4e(0xd9)),_0x7f2c0b[_0x8e6a4e(0x75)]=![],_0x7f2c0b['textContent']='Submit';return;}const _0x44a76a=_0x189eca['split'](/\s+/)['filter'](_0x540930=>_0x540930[_0x8e6a4e(0x10c)]>0x0)['length'];if(_0x44a76a>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x7f2c0b[_0x8e6a4e(0x75)]=![],_0x7f2c0b['textContent']='Submit';return;}const _0x1cfa97={'matchId':_0x38c5a3,'userId':_0x15869b[_0x8e6a4e(0x121)],'username':_0x3ba838,'text':_0x189eca,'type':'comment','timestamp':serverTimestamp()},_0x4c9618=collection(window['db'],'matchComments');await addDoc(_0x4c9618,_0x1cfa97);}else{const _0x289ca1=document['getElementById']('demoLink')['value'][_0x8e6a4e(0xcd)](),_0x1a9061=document['getElementById']('demoDescription')[_0x8e6a4e(0x71)][_0x8e6a4e(0xcd)]()||_0x8e6a4e(0x10a);if(!_0x289ca1){alert(_0x8e6a4e(0xae)),_0x7f2c0b['disabled']=![],_0x7f2c0b['textContent']='Submit';return;}try{new URL(_0x289ca1);}catch(_0x27c7b0){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x7f2c0b['disabled']=![],_0x7f2c0b[_0x8e6a4e(0x94)]='Submit';return;}const _0x222400=_0x1a9061['split'](/\s+/)['filter'](_0x2cf4c2=>_0x2cf4c2[_0x8e6a4e(0x10c)]>0x0)[_0x8e6a4e(0x10c)];if(_0x222400>0x14){alert(_0x8e6a4e(0x89)),_0x7f2c0b[_0x8e6a4e(0x75)]=![],_0x7f2c0b['textContent']='Submit';return;}const _0xe259d9={'matchId':_0x38c5a3,'userId':_0x15869b[_0x8e6a4e(0x121)],'username':_0x3ba838,'demoLink':_0x289ca1,'description':_0x1a9061,'type':_0x8e6a4e(0x72),'text':'Demo:\x20'+_0x1a9061,'timestamp':serverTimestamp()},_0x36b58c=collection(window['db'],'matchComments');await addDoc(_0x36b58c,_0xe259d9);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x2904cd){console['error']('Error\x20submitting:',_0x2904cd),alert('Failed\x20to\x20submit:\x20'+_0x2904cd['message']),_0x7f2c0b&&(_0x7f2c0b['disabled']=![],_0x7f2c0b['textContent']='Submit');}}function getEloRankClass(_0x135d9f){const _0x163c36=a6_0x17627c,_0x32034d=Number(_0x135d9f);if(_0x32034d>=0x7d0)return'emerald';else{if(_0x32034d>=0x708)return'gold';else{if(_0x32034d>=0x640)return'silver';else{if(_0x32034d>=0x578)return _0x163c36(0x8e);else return'unranked';}}}}function showPreviewCommentPopup(_0x3102e2,_0x7e3c80,_0x293bc7='#fff'){const _0x2106e3=a6_0x17627c,_0x2d640d=document[_0x2106e3(0xa8)]('commentPopupPreview'),_0x388689=document['getElementById']('commentOverlayPreview'),_0x224462=document[_0x2106e3(0xa8)](_0x2106e3(0xea)),_0x10c504=document[_0x2106e3(0xa8)](_0x2106e3(0x8f)),_0x55575e=document['getElementById']('reportCommentButton');if(!_0x2d640d||!_0x388689||!_0x224462||!_0x10c504||!_0x55575e)return;_0x2d640d['dataset'][_0x2106e3(0xab)]=_0x3102e2,_0x2d640d[_0x2106e3(0xce)]['commentUser']=_0x7e3c80,_0x224462['style']['color']=_0x293bc7,_0x224462[_0x2106e3(0x94)]='Comment\x20from\x20'+_0x7e3c80,_0x10c504['textContent']=_0x3102e2,_0x55575e['onclick']=reportComment,_0x2d640d['style'][_0x2106e3(0xb7)]='block',_0x388689['style'][_0x2106e3(0xb7)]='block';}function closePreviewCommentPopup(){const _0x2a7d19=a6_0x17627c,_0x1810d8=document[_0x2a7d19(0xa8)](_0x2a7d19(0x119)),_0x18f25f=document['getElementById']('commentOverlayPreview');if(_0x1810d8)_0x1810d8[_0x2a7d19(0xb0)]['display']=_0x2a7d19(0xb5);if(_0x18f25f)_0x18f25f['style']['display']=_0x2a7d19(0xb5);}async function reportComment(){const _0x2ddd59=a6_0x17627c,_0x1612a6=window['auth']['currentUser'];if(!_0x1612a6){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x593211=document['getElementById'](_0x2ddd59(0x119)),_0x1bcef3={'commentAuthor':_0x593211['dataset']['commentUser']||'Unknown\x20User','commentText':_0x593211['dataset']['commentText']||'','matchId':previewState[_0x2ddd59(0x120)]||'','reportedBy':_0x1612a6['uid'],'reporterUsername':_0x1612a6['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0xbf4ce7=collection(window['db'],'badComments');await addDoc(_0xbf4ce7,_0x1bcef3),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x544fda){console[_0x2ddd59(0xb9)]('Error\x20reporting\x20comment:',_0x544fda),alert(_0x2ddd59(0xfa)+_0x544fda[_0x2ddd59(0xdc)]);}}function showFullCommentLightbox(_0x531034){const _0x4b926d=a6_0x17627c;if(isUsernameMuted(_0x531034[_0x4b926d(0xbc)]))return;const _0xa95b68=document['getElementById'](_0x4b926d(0x119)),_0xbbcd1e=document[_0x4b926d(0xa8)]('commentOverlayPreview'),_0x705847=document['getElementById']('commentPopupTitlePreview'),_0x5a78f7=document[_0x4b926d(0xa8)]('commentPopupContentPreview');if(!_0xa95b68||!_0xbbcd1e||!_0x705847||!_0x5a78f7)return;_0x705847['style']['color']='#fff',_0x705847['textContent']='Comment\x20from\x20'+_0x531034['username'];if(_0x531034[_0x4b926d(0xcf)]){const _0x4a9e3c=new Date(_0x531034['timestamp']['seconds']*0x3e8),_0x3376e1=_0x4a9e3c['toLocaleString']();_0x5a78f7['innerHTML']='<p>'+_0x531034['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x3376e1+'</small>';}else _0x5a78f7['textContent']=_0x531034['text'];_0xa95b68[_0x4b926d(0xce)][_0x4b926d(0xde)]=_0x531034['id']||'',_0xa95b68['dataset'][_0x4b926d(0xf4)]=_0x531034[_0x4b926d(0xbc)]||'',_0xa95b68['dataset']['commentText']=_0x531034['text']||'',_0xa95b68['dataset']['matchId']=_0x531034['matchId']||'';const _0x348341=_0xa95b68['querySelector'](_0x4b926d(0xdd))||document['createElement'](_0x4b926d(0xfc));!_0xa95b68[_0x4b926d(0xca)](_0x4b926d(0xdd))?(_0x348341[_0x4b926d(0x86)]=_0x4b926d(0xba),_0x348341['style']['display']='flex',_0x348341['style']['justifyContent']='center',_0x348341['style']['gap']='10px',_0x348341['style'][_0x4b926d(0x105)]='15px',_0xa95b68['appendChild'](_0x348341)):_0x348341['innerHTML']='';const _0xbc554d=document['createElement']('button');_0xbc554d['textContent']='Close',_0xbc554d['className']='popup-btn\x20close-btn',_0xbc554d['id']=_0x4b926d(0x88),_0xbc554d['addEventListener'](_0x4b926d(0xd4),closePreviewCommentPopup);const _0x391a52=document['createElement'](_0x4b926d(0x115));_0x391a52['textContent']='Report',_0x391a52['className']='popup-btn\x20report-btn',_0x391a52['style']['backgroundColor']='#d32f2f',_0x391a52['addEventListener']('click',reportComment),_0x348341[_0x4b926d(0x90)](_0xbc554d),_0x348341['appendChild'](_0x391a52),_0xa95b68['style']['display']='block',_0xbbcd1e['style'][_0x4b926d(0xb7)]='block';}export function setupPreviewEventListeners(){const _0x19b2be=a6_0x17627c,_0x51933e=document['getElementById'](_0x19b2be(0xb1)),_0x1ae25a=document['getElementById']('previewNextPage'),_0x2e308c=document['getElementById']('preview-d1-button'),_0x45c9a5=document['getElementById']('preview-d2-button'),_0x301a55=document['getElementById']('preview-d3-button'),_0x3885d9=document['getElementById']('filter-toggle-button'),_0xa27b31=document['getElementById']('enhanced-filter-section');if(!_0x51933e||!_0x1ae25a||!_0x2e308c||!_0x45c9a5||!_0x301a55||!_0x3885d9||!_0xa27b31){console[_0x19b2be(0x129)]('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x51933e['addEventListener']('click',()=>{if(!_0x51933e['disabled'])loadRecentMatchesPreview('prev');}),_0x1ae25a['addEventListener'](_0x19b2be(0xd4),()=>{const _0x21583c=_0x19b2be;if(!_0x1ae25a[_0x21583c(0x75)])loadRecentMatchesPreview('next');}),_0x2e308c[_0x19b2be(0xfe)]('click',()=>{const _0x3e15d7=_0x19b2be;previewState['currentMode']!=='D1'&&!previewState[_0x3e15d7(0xd0)]&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x3e15d7(0xe0)));}),_0x45c9a5['addEventListener']('click',()=>{previewState['currentMode']!=='D2'&&!previewState['isLoading']&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x301a55['addEventListener']('click',()=>{const _0x195525=_0x19b2be;previewState[_0x195525(0x118)]!=='D3'&&!previewState[_0x195525(0xd0)]&&(previewState[_0x195525(0x118)]='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x3885d9&&_0xa27b31&&_0x3885d9['addEventListener'](_0x19b2be(0xd4),()=>{const _0x591383=_0x19b2be,_0x3e011f=_0xa27b31['style']['display']!=='none';_0xa27b31[_0x591383(0xb0)]['display']=_0x3e011f?'none':'block',_0x3885d9[_0x591383(0xe4)]['toggle'](_0x591383(0xe2),!_0x3e011f);});const _0x4df3f2=document['getElementById']('apply-enhanced-filters'),_0x350a6e=document[_0x19b2be(0xa8)](_0x19b2be(0x114));_0x4df3f2&&_0x4df3f2['addEventListener']('click',()=>{const _0x1bc0bd=_0x19b2be;previewState['enhancedFilters']['pilots']=document['getElementById']('filter-pilots')['value']['trim'](),previewState['enhancedFilters']['levels']=document['getElementById']('filter-levels')['value']['trim']();const _0x381597=document['getElementById'](_0x1bc0bd(0xf2));previewState[_0x1bc0bd(0xe7)]['subgames']=Array[_0x1bc0bd(0x107)](_0x381597['selectedOptions'])[_0x1bc0bd(0x123)](_0x345dea=>_0x345dea['value'])['filter'](_0x4cbf59=>_0x4cbf59!==''),loadRecentMatchesPreview(_0x1bc0bd(0xe0));});_0x350a6e&&_0x350a6e['addEventListener']('click',()=>{const _0x238b2b=_0x19b2be;clearEnhancedFilters(),loadRecentMatchesPreview(_0x238b2b(0xe0));});document[_0x19b2be(0x85)]('.jump-btn')['forEach'](_0x259e23=>{const _0x31796d=_0x19b2be;_0x259e23[_0x31796d(0xfe)](_0x31796d(0xd4),()=>{const _0x1bf5b1=_0x259e23['dataset']['jump'];jumpToPage(_0x1bf5b1);});});const _0x3112d5=document['getElementById'](_0x19b2be(0x7d));_0x3112d5&&_0x3112d5['addEventListener'](_0x19b2be(0xa3),_0x3fd35e=>{const _0x567837=_0x19b2be;_0x3fd35e[_0x567837(0x110)]==='Enter'&&jumpToPage('input');});const _0x54c541=document['getElementById']('closeCommentPopupPreview'),_0x1e9dd9=document['getElementById']('commentOverlayPreview');if(_0x54c541)_0x54c541[_0x19b2be(0xfe)]('click',closePreviewCommentPopup);if(_0x1e9dd9)_0x1e9dd9['addEventListener'](_0x19b2be(0xd4),closePreviewCommentPopup);const _0x45580b=document['getElementById']('closeAddCommentPopup'),_0x2041b8=document['getElementById']('commentAddOverlay'),_0x5da095=document['getElementById']('addCommentForm');if(_0x45580b)_0x45580b['addEventListener']('click',closeAddCommentPopup);if(_0x2041b8)_0x2041b8['addEventListener']('click',closeAddCommentPopup);if(_0x5da095)_0x5da095['addEventListener'](_0x19b2be(0xe8),submitComment);const _0x3ac26c=document['getElementById']('commentText'),_0x27527e=document['getElementById']('wordCount');_0x3ac26c&&_0x27527e&&setupWordCounter('commentText','wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window[a6_0x17627c(0xad)]=closeAddCommentPopup,window['submitComment']=submitComment;