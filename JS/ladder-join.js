const a25_0x5cd6bd=(function(){let _0x452b6e=!![];return function(_0x58e2aa,_0xf1cd3d){const _0x1b6cd7=_0x452b6e?function(){if(_0xf1cd3d){const _0x1c682d=_0xf1cd3d['apply'](_0x58e2aa,arguments);return _0xf1cd3d=null,_0x1c682d;}}:function(){};return _0x452b6e=![],_0x1b6cd7;};}()),a25_0x452042=a25_0x5cd6bd(this,function(){const _0x5ef243=a25_0x5857;let _0x2d25a7;try{const _0x107f59=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2d25a7=_0x107f59();}catch(_0x54ef89){_0x2d25a7=window;}const _0x45bd10=_0x2d25a7['console']=_0x2d25a7[_0x5ef243(0x1c1)]||{},_0x1be735=['log','warn','info',_0x5ef243(0x1bc),_0x5ef243(0x1d3),'table',_0x5ef243(0x1b8)];for(let _0x551617=0x0;_0x551617<_0x1be735['length'];_0x551617++){const _0xfd8d97=a25_0x5cd6bd['constructor']['prototype'][_0x5ef243(0x1c4)](a25_0x5cd6bd),_0x24784e=_0x1be735[_0x551617],_0x43c35c=_0x45bd10[_0x24784e]||_0xfd8d97;_0xfd8d97['__proto__']=a25_0x5cd6bd['bind'](a25_0x5cd6bd),_0xfd8d97['toString']=_0x43c35c['toString']['bind'](_0x43c35c),_0x45bd10[_0x24784e]=_0xfd8d97;}});a25_0x452042();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x518d39=a25_0x5857,_0x417413=document['getElementById'](_0x518d39(0x1c0)),_0x1b263a=document['getElementById']('d2-switch');console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x417413),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x1b263a);function _0x45a925(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0xac668b=>{_0xac668b['addEventListener']('change',_0x2081a1=>{const _0x4cc08c=a25_0x5857;_0x2081a1[_0x4cc08c(0x1d0)]['checked']&&(currentLadder=_0x2081a1['target']['value'],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x45a925();const _0x21b172=document['getElementById'](_0x518d39(0x1d5));_0x21b172&&_0x21b172['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x1bcea0=>{if(_0x1bcea0)checkUserLadderStatus();else{const _0x1ce731=document['getElementById']('ladder-join-prompt');_0x1ce731&&(_0x1ce731['style']['display']='none');}});});function a25_0x3644(){const _0x5b7064=['\x20ladder!\x20The\x20page\x20will\x20refresh...','exists','DUO','getIdToken','value','Please\x20enter\x20your\x20username\x20to\x20confirm.','You\x20are\x20already\x20part\x20of\x20the\x20','Error\x20joining\x20ladder:','ladder-join-status\x20success','trace','playersCTF','Joining\x20','className','error','display','warn','join-username-input','d1-switch','console','Checking\x20user\x20status\x20for\x20ladder:','position','bind','username','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','uid','style','ladder-join-status\x20error','toLowerCase','none','textContent','Error\x20checking\x20','Unknown\x20ladder\x20type:\x20','getElementById','target','block','players','exception','currentUser','join-ladder-button','Verifying\x20username...','data','disabled','Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...'];a25_0x3644=function(){return _0x5b7064;};return a25_0x3644();}function getCollectionName(_0x1a782b){const _0x619162=a25_0x5857;switch(_0x1a782b?.['toUpperCase']()){case'D1':return _0x619162(0x1d2);case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case _0x619162(0x1b1):return'playersDuos';case'CTF':return _0x619162(0x1b9);default:console[_0x619162(0x1be)](_0x619162(0x1ce)+_0x1a782b+',\x20defaulting\x20to\x20D1');return _0x619162(0x1d2);}}function a25_0x5857(_0x258c89,_0x3ced3b){const _0x452042=a25_0x3644();return a25_0x5857=function(_0x5cd6bd,_0x16f452){_0x5cd6bd=_0x5cd6bd-0x1af;let _0x364441=_0x452042[_0x5cd6bd];return _0x364441;},a25_0x5857(_0x258c89,_0x3ced3b);}async function checkUserLadderStatus(){const _0x1b2790=a25_0x5857;console['log'](_0x1b2790(0x1c2),currentLadder);const _0x2600a2=auth['currentUser'],_0x3f99ea=document[_0x1b2790(0x1cf)]('ladder-join-prompt'),_0x5048c1=document[_0x1b2790(0x1cf)]('join-ladder-type'),_0x48d5af=document['getElementById']('tiny-join-button');if(!_0x2600a2||!_0x2600a2['uid']||!_0x3f99ea||!_0x5048c1||!_0x48d5af){if(_0x3f99ea)_0x3f99ea['style']['display']=_0x1b2790(0x1cb);if(_0x48d5af)_0x48d5af['style'][_0x1b2790(0x1bd)]='none';return;}try{try{await _0x2600a2[_0x1b2790(0x1b2)](![]);}catch(_0x1190d4){console['error']('Authentication\x20verification\x20failed:',_0x1190d4),_0x3f99ea['style']['display']='none',_0x48d5af['style']['display']='none';return;}const _0x2758ee=getCollectionName(currentLadder),_0x457693=doc(db,_0x2758ee,_0x2600a2['uid']),_0x5410c1=await getDoc(_0x457693);if(_0x5410c1['exists']())_0x3f99ea['style']['display']=_0x1b2790(0x1cb),_0x48d5af['style'][_0x1b2790(0x1bd)]='none';else{_0x3f99ea[_0x1b2790(0x1c8)]['display']='none',_0x48d5af['style']['display']=_0x1b2790(0x1d1),_0x5048c1['textContent']=currentLadder,_0x48d5af['onclick']=()=>{const _0x5a7242=_0x1b2790;_0x3f99ea[_0x5a7242(0x1c8)][_0x5a7242(0x1bd)]==='block'?_0x3f99ea[_0x5a7242(0x1c8)]['display']='none':_0x3f99ea['style']['display']='block';};const _0xd3859d=document[_0x1b2790(0x1cf)](_0x1b2790(0x1bf)),_0x1a7460=document['getElementById']('ladder-join-status');if(_0xd3859d)_0xd3859d['value']='';_0x1a7460&&(_0x1a7460['textContent']='',_0x1a7460['className']='ladder-join-status');}}catch(_0x4f2be7){console['error']('Error\x20checking\x20ladder\x20status:',_0x4f2be7),_0x3f99ea['style'][_0x1b2790(0x1bd)]=_0x1b2790(0x1cb),_0x48d5af[_0x1b2790(0x1c8)][_0x1b2790(0x1bd)]='none';}}async function handleJoinLadder(){const _0x3c8666=a25_0x5857,_0x325fd3=auth[_0x3c8666(0x1d4)],_0x19131f=document[_0x3c8666(0x1cf)]('join-ladder-button'),_0x210565=document[_0x3c8666(0x1cf)]('ladder-join-status'),_0x30a170=document['getElementById']('join-username-input');if(!_0x325fd3||!_0x325fd3['uid']){_0x210565['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x210565['className']='ladder-join-status\x20error';return;}try{await _0x325fd3['getIdToken'](!![]);}catch(_0xbcaae7){console['error']('Authentication\x20error:',_0xbcaae7),_0x210565['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x210565[_0x3c8666(0x1bb)]=_0x3c8666(0x1c9);return;}if(!_0x30a170||!_0x30a170[_0x3c8666(0x1b3)]['trim']()){_0x210565['textContent']=_0x3c8666(0x1b4),_0x210565[_0x3c8666(0x1bb)]='ladder-join-status\x20error';return;}try{_0x19131f['disabled']=!![],_0x210565['textContent']=_0x3c8666(0x1d6),_0x210565['className']='ladder-join-status\x20loading';let _0x474d3d='',_0x270fcc=null;const _0x265aa1=[_0x3c8666(0x1d2),'playersD2','playersD3','playersDuos',_0x3c8666(0x1b9),'nonParticipants'];for(const _0x4b6eae of _0x265aa1){try{const _0x12a014=doc(db,_0x4b6eae,_0x325fd3[_0x3c8666(0x1c7)]),_0x202175=await getDoc(_0x12a014);if(_0x202175['exists']()){_0x270fcc=_0x202175[_0x3c8666(0x1d7)]();if(_0x270fcc[_0x3c8666(0x1c5)]){_0x474d3d=_0x270fcc[_0x3c8666(0x1c5)];break;}}}catch(_0x5c59e7){console['error'](_0x3c8666(0x1cd)+_0x4b6eae+':',_0x5c59e7);}}!_0x474d3d&&_0x325fd3['email']&&(_0x474d3d=_0x325fd3['email']['split']('@')[0x0]);if(!_0x474d3d){_0x210565['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x210565['className']=_0x3c8666(0x1c9),_0x19131f[_0x3c8666(0x1d8)]=![];return;}const _0x4168b8=_0x30a170[_0x3c8666(0x1b3)]['trim']();if(_0x474d3d&&_0x4168b8[_0x3c8666(0x1ca)]()!==_0x474d3d['toLowerCase']()){_0x210565['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x474d3d+'\x22\x20to\x20confirm.',_0x210565['className']=_0x3c8666(0x1c9),_0x19131f['disabled']=![];return;}_0x210565['textContent']=_0x3c8666(0x1ba)+currentLadder+'\x20ladder...';const _0x5703db=getCollectionName(currentLadder),_0x5f58ab=doc(db,_0x5703db,_0x325fd3['uid']),_0x21cbf1=await getDoc(_0x5f58ab);if(_0x21cbf1[_0x3c8666(0x1b0)]()){_0x210565['textContent']=_0x3c8666(0x1b5)+currentLadder+'\x20ladder.',_0x210565['className']='ladder-join-status\x20error',_0x19131f['disabled']=![];return;}try{await _0x325fd3['getIdToken'](!![]);}catch(_0x3eead4){_0x210565['textContent']=_0x3c8666(0x1c6),_0x210565['className']='ladder-join-status\x20error',_0x19131f[_0x3c8666(0x1d8)]=![];return;}const _0x5f3aec=_0x474d3d,_0x287c34=collection(db,_0x5703db),_0x4054ae=query(_0x287c34,orderBy('position','desc'),limit(0x1)),_0x9edabd=await getDocs(_0x4054ae);let _0x4f5512=0x1;if(!_0x9edabd['empty']){const _0x37286c=_0x9edabd['docs'][0x0]['data']();_0x4f5512=(_0x37286c[_0x3c8666(0x1c3)]||0x0)+0x1;}const _0x5a8b91={'username':_0x5f3aec,'email':_0x325fd3['email'],'eloRating':0x4b0,'position':_0x4f5512,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x5f58ab,_0x5a8b91),currentLadder==='DUOS'?_0x210565['textContent']=_0x3c8666(0x1d9):_0x210565['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+_0x3c8666(0x1af),_0x210565['className']=_0x3c8666(0x1b7),setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x15b29a){console['error'](_0x3c8666(0x1b6),_0x15b29a),_0x210565[_0x3c8666(0x1cc)]='Error\x20joining\x20ladder:\x20'+_0x15b29a['message'],_0x210565['className']='ladder-join-status\x20error',_0x19131f['disabled']=![];}}