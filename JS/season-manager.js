const a52p=a52d;(function(a,b){const i=a52d,c=a();while(!![]){try{const d=-parseInt(i(0x1f5))/0x1*(parseInt(i(0x1fc))/0x2)+-parseInt(i(0x1e3))/0x3*(-parseInt(i(0x1e9))/0x4)+-parseInt(i(0x1f9))/0x5+parseInt(i(0x1ee))/0x6+-parseInt(i(0x1eb))/0x7+parseInt(i(0x207))/0x8*(-parseInt(i(0x20b))/0x9)+-parseInt(i(0x209))/0xa*(-parseInt(i(0x1f3))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a52c,0x981ff));const a52b=(function(){let a=!![];return function(b,c){const d=a?function(){const j=a52d;if(c){const e=c[j(0x1fb)](b,arguments);return c=null,e;}}:function(){};return a=![],d;};}()),a52a=a52b(this,function(){const k=a52d,a=function(){let f;try{f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(g){f=window;}return f;},b=a(),c=b['console']=b[k(0x1e5)]||{},d=[k(0x202),k(0x1ed),k(0x1e2),k(0x206),'exception','table',k(0x208)];for(let e=0x0;e<d[k(0x1fe)];e++){const f=a52b[k(0x1f4)][k(0x1e8)]['bind'](a52b),g=d[e],h=c[g]||f;f['__proto__']=a52b[k(0x1ec)](a52b),f['toString']=h['toString'][k(0x1ec)](h),c[g]=f;}});a52a();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a52d(a,b){const c=a52c();return a52d=function(d,e){d=d-0x1e1;let f=c[d];if(a52d['pbswZl']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a52d['PbyQfS']=g,a=arguments,a52d['pbswZl']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a52d['PbyQfS'](f),a[i]=f):f=j,f;},a52d(a,b);}function a52c(){const r=['yxbWBhK','otm2mZCWvKXJA0rj','C2vHC29U','BgvUz3rO','z2v0rwXLBwvUDej5swq','ugXLyxnLigvUDgvYihLVDxiGCgfZC3DVCMq','CMvSB2fK','Bg9N','CMvZzxqTy29UzMLYBwf0Aw9U','rxjYB3iGCMvZzxr0Aw5NihnLyxnVBI4GugXLyxnLihrYEsbHz2fPBI4','zxHPC3rZ','zxjYB3i','ndC0oti0ohfQr1HZDa','DhjHy2u','mtbzuLzpEKS','CMvZzxqTCgfZC3DVCMq','mtHrBgfcuuG','Cg9ZAxrPB24','CMvZzxrtzwfZB24','rxjYB3iGCMvZzxr0Aw5NihnLyxnVBJO','zgLZCgXHEq','y29UzMLYBs1YzxnLDa','Aw5MBW','m0j4qMT2DW','CgXHEwvYCW','y29UC29Szq','DMfSDwu','qxv0AgvUDgLJyxrPB24GzxjYB3i6','ChjVDg90ExbL','mtC1nte5nK5pBxzrAa','u2vHC29Uia','mtiWoty1nLbWAKz2Eq','yMLUza','D2fYBG','ndCXotK1nezstNn1yG','C3r5Bgu','ywrKrxzLBNrmAxn0zw5LCG','y2XPy2S','C2vHC29Uq291BNq','mJq5nJm3odv1qvLhtwG','y29UC3rYDwn0B3i','mK1YthPvBG','Bwv0ywrHDge','igHHCYbIzwvUigfYy2HPDMvKigfUzcbWBgf5zxjZigHHDMuGyMvLBIbYzxnLDc4','C2vHC29UCW','mJG3nJuWmeDNCeXwsa','sw52ywXPzcbWyxnZD29YzcbVCIbHDxrOzw50AwnHDgLVBIbMywLSzwq'];a52c=function(){return r;};return a52c();}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){this['setupEventListeners']();}['setupEventListeners'](){const l=a52d,a=document[l(0x1ff)]('reset-season'),b=document['getElementById'](l(0x1e1)),c=document['getElementById']('cancel-reset');a?.[l(0x1f0)](l(0x1f1),()=>{const m=l;document['getElementById'](m(0x203))['style']['display']='block';}),b?.[l(0x1f0)]('click',async()=>{const n=l,d=document[n(0x1ff)](n(0x20a)),e=auth['currentUser'];if(!e||!d[n(0x1e6)]){alert(n(0x200));return;}try{const f=EmailAuthProvider['credential'](e['email'],d[n(0x1e6)]);await reauthenticateWithCredential(e,f),await this[n(0x20d)](),d[n(0x1e6)]='',document[n(0x1ff)]('reset-confirmation')[n(0x1ef)]['display']='none';}catch(g){alert(n(0x1fa)),console['error'](n(0x1e7),g);}}),c?.['addEventListener']('click',()=>{const o=l,d=document['getElementById']('reset-password');d['value']='',document[o(0x1ff)](o(0x203))[o(0x1ef)][o(0x20f)]='none';});}async[a52p(0x20d)](){const q=a52p;try{const a=await getDoc(doc(db,q(0x1f6),q(0x1f2)));let b=0x1;a[q(0x205)]()&&(b=a['data']()['count']+0x1);const c=await getDocs(collection(db,'players')),d={'players':[],'date':new Date(),'seasonNumber':b};for(const e of c['docs']){const f=e['data']();d[q(0x1e4)]['push']({'username':f['username'],'position':f[q(0x20c)],'eloRating':f['eloRating']||0x4b0}),await setDoc(doc(db,q(0x1e4),e['id']),{...f,'eloRating':0x4b0,'position':f[q(0x20c)]});}await setDoc(doc(db,q(0x1f8),q(0x1fd)+b),d),await setDoc(doc(db,q(0x1f6),q(0x1f2)),{'count':b}),alert(q(0x1ea)+b+q(0x1f7)),location[q(0x201)]();}catch(g){console['error'](q(0x20e),g),alert(q(0x204));}}}export const seasonManager=new SeasonManager();