const a10_0x3900d1=(function(){let _0x24d297=!![];return function(_0x2e1994,_0xe7c618){const _0x416aa2=_0x24d297?function(){if(_0xe7c618){const _0x3379ce=_0xe7c618['apply'](_0x2e1994,arguments);return _0xe7c618=null,_0x3379ce;}}:function(){};return _0x24d297=![],_0x416aa2;};}()),a10_0x3f9fde=a10_0x3900d1(this,function(){const _0x30e5a4=a10_0xe2c6;let _0x309622;try{const _0x287e90=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x309622=_0x287e90();}catch(_0xf199a4){_0x309622=window;}const _0x1923bd=_0x309622['console']=_0x309622[_0x30e5a4(0x153)]||{},_0x43593a=['log','warn',_0x30e5a4(0x152),'error','exception','table',_0x30e5a4(0x13b)];for(let _0xef6fdd=0x0;_0xef6fdd<_0x43593a[_0x30e5a4(0x146)];_0xef6fdd++){const _0x3aa622=a10_0x3900d1['constructor']['prototype'][_0x30e5a4(0x147)](a10_0x3900d1),_0xd64c4=_0x43593a[_0xef6fdd],_0x301b85=_0x1923bd[_0xd64c4]||_0x3aa622;_0x3aa622['__proto__']=a10_0x3900d1['bind'](a10_0x3900d1),_0x3aa622['toString']=_0x301b85['toString']['bind'](_0x301b85),_0x1923bd[_0xd64c4]=_0x3aa622;}});a10_0x3f9fde();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x44537f=![]){const _0x4a66f5=a10_0xe2c6,_0x277aaf=Date['now'](),_0x44b95f=checkNotificationCache();if(_0x44b95f!==null&&!_0x44537f){updateNotificationDot(_0x44b95f);if(_0x277aaf-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x277aaf;const _0x157131=auth['currentUser'];if(!_0x157131){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x23c7ad,_0x3bbfd4,_0x1de34b]=await Promise['all']([checkForPendingMatchesInCollection(_0x157131,'pendingMatches'),checkForPendingMatchesInCollection(_0x157131,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x157131,_0x4a66f5(0x143))]),_0x367809=_0x23c7ad||_0x3bbfd4||_0x1de34b;updateNotificationDot(_0x367809),updateNotificationCache(_0x367809);}catch(_0x100c97){console[_0x4a66f5(0x140)](_0x4a66f5(0x13c),_0x100c97);}}async function checkForPendingMatchesInCollection(_0x483bbe,_0x24b417){const _0x5c5afa=a10_0xe2c6,_0x43d51c=_0x483bbe['uid'],_0x2d37e9=_0x483bbe['email'],_0x3759e4=query(collection(db,_0x24b417),where(_0x5c5afa(0x155),'==',_0x43d51c),where(_0x5c5afa(0x14d),'==',![])),_0x4b9022=await getDocs(_0x3759e4);if(!_0x4b9022['empty'])return!![];if(_0x2d37e9){const _0x3202b8=query(collection(db,_0x24b417),where('winnerEmail','==',_0x2d37e9),where(_0x5c5afa(0x14d),'==',![])),_0x396b3d=await getDocs(_0x3202b8);if(!_0x396b3d['empty'])return!![];}let _0x3df7fa=await getUsernameFromAllSources(_0x483bbe);if(_0x3df7fa){const _0x4ca97=query(collection(db,_0x24b417),where('winnerUsername','==',_0x3df7fa),where('approved','==',![])),_0x27bcaf=await getDocs(_0x4ca97);if(!_0x27bcaf[_0x5c5afa(0x14b)])return!![];}return![];}async function getUsernameFromAllSources(_0x4b5224){const _0x139234=a10_0xe2c6,_0x52c2fa=localStorage['getItem']('currentUsername');if(_0x52c2fa)return _0x52c2fa;try{const [_0x3eb833,_0x47cc1a,_0x2a9f3e]=await Promise[_0x139234(0x142)]([getDocs(query(collection(db,'players'),where('userId','==',_0x4b5224[_0x139234(0x149)]))),getDocs(query(collection(db,_0x139234(0x144)),where(_0x139234(0x148),'==',_0x4b5224['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x4b5224['uid'])))]);if(!_0x3eb833['empty']){const _0x228946=_0x3eb833[_0x139234(0x145)][0x0]['data']()[_0x139234(0x14c)];return localStorage['setItem']('currentUsername',_0x228946),_0x228946;}if(!_0x47cc1a['empty']){const _0x3a3f9d=_0x47cc1a[_0x139234(0x145)][0x0]['data']()[_0x139234(0x14c)];return localStorage['setItem']('currentUsername',_0x3a3f9d),_0x3a3f9d;}if(!_0x2a9f3e['empty']){const _0x4c1053=_0x2a9f3e[_0x139234(0x145)][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x4c1053),_0x4c1053;}const _0x2fd3e0=await getDoc(doc(db,'users',_0x4b5224['uid']));if(_0x2fd3e0['exists']()&&_0x2fd3e0['data']()[_0x139234(0x14c)]){const _0x1c7e49=_0x2fd3e0['data']()[_0x139234(0x14c)];return localStorage['setItem'](_0x139234(0x13e),_0x1c7e49),_0x1c7e49;}}catch(_0x5670ab){console['error']('Error\x20fetching\x20username:',_0x5670ab);}if(_0x4b5224[_0x139234(0x14a)])return _0x4b5224['email']['split']('@')[0x0];return null;}function a10_0xe2c6(_0x129bc2,_0x5a2c6a){const _0x3f9fde=a10_0x2172();return a10_0xe2c6=function(_0x3900d1,_0x27d4f8){_0x3900d1=_0x3900d1-0x13a;let _0x2172a4=_0x3f9fde[_0x3900d1];return _0x2172a4;},a10_0xe2c6(_0x129bc2,_0x5a2c6a);}function updateNotificationCache(_0xc043e5){const _0x5ea342=a10_0xe2c6,_0xe41294={'status':_0xc043e5,'timestamp':Date[_0x5ea342(0x150)]()};localStorage[_0x5ea342(0x14e)](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0xe41294));}function checkNotificationCache(){const _0x2cd8ed=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x2cd8ed)return null;try{const {status:_0x5705ef,timestamp:_0x3e0e6a}=JSON['parse'](_0x2cd8ed),_0xa372dd=Date['now']();if(_0xa372dd-_0x3e0e6a<CACHE_EXPIRY)return _0x5705ef;}catch(_0x5e7f56){}return null;}export function updateNotificationDot(_0x55bf95){const _0x41aadb=a10_0xe2c6,_0x246d36=new MutationObserver((_0x2b1861,_0x574b50)=>{const _0xc1685b=document['getElementById']('report-match-notification');_0xc1685b&&(updateDotStyle(_0xc1685b,_0x55bf95),_0x574b50['disconnect']());});_0x246d36['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x10533d=document['getElementById']('report-match-notification');_0x10533d&&(updateDotStyle(_0x10533d,_0x55bf95),_0x246d36[_0x41aadb(0x156)]()),setTimeout(()=>_0x246d36['disconnect'](),0x1388);}function updateDotStyle(_0x3b64ec,_0x5e02e7){const _0x59d8be=a10_0xe2c6;_0x5e02e7?(_0x3b64ec[_0x59d8be(0x141)]['display']='block',_0x3b64ec[_0x59d8be(0x141)]['backgroundColor']='#ff3b30',_0x3b64ec['style']['width']=_0x59d8be(0x13a),_0x3b64ec['style']['height']='10px',_0x3b64ec['style'][_0x59d8be(0x14f)]=_0x59d8be(0x13d),_0x3b64ec['style']['top']='-5px',_0x3b64ec[_0x59d8be(0x141)]['right']='-8px',_0x3b64ec['style']['borderRadius']=_0x59d8be(0x13f),_0x3b64ec['style']['border']=_0x59d8be(0x151),_0x3b64ec['style']['zIndex']='999'):_0x3b64ec['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x4a793b=a10_0xe2c6;localStorage[_0x4a793b(0x154)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});function a10_0x2172(){const _0x2dd66b=['10px','trace','Error\x20checking\x20pending\x20matches:','absolute','currentUsername','50%','error','style','all','pendingMatchesD3','playersD2','docs','length','bind','userId','uid','email','empty','username','approved','setItem','position','now','2px\x20solid\x20white','info','console','removeItem','winnerId','disconnect'];a10_0x2172=function(){return _0x2dd66b;};return a10_0x2172();}