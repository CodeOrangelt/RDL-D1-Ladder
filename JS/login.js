const a36I=a36b;function a36b(a,b){const c=a36a();return a36b=function(d,e){d=d-0x99;let f=c[d];if(a36b['HNQxgL']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a36b['gNklgn']=g,a=arguments,a36b['HNQxgL']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a36b['gNklgn'](f),a[i]=f):f=j,f;},a36b(a,b);}(function(a,b){const v=a36b,c=a();while(!![]){try{const d=-parseInt(v(0xa2))/0x1*(-parseInt(v(0xe9))/0x2)+parseInt(v(0xd4))/0x3+parseInt(v(0xa4))/0x4+parseInt(v(0xb9))/0x5+parseInt(v(0xab))/0x6+-parseInt(v(0xbf))/0x7*(parseInt(v(0xc8))/0x8)+parseInt(v(0xde))/0x9*(-parseInt(v(0x99))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a36a,0x81ca5));function a36a(){const O=['CgXHEwvYC0nurG','qxr0zw1WDgLUzYb0BYbYzxnLBMqGDMvYAwzPy2f0Aw9UigvTywLSihrVoG','CgXHEwvYC0qY','ywrKrxzLBNrmAxn0zw5LCG','Bg9NAw4TCgfZC3DVCMq','igfKzgvKihrVig5VBLbHCNrPy2LWyw50CYbJB2XSzwn0Aw9U','zgf0yq','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gyw55ignVBgXLy3rPB24UlI4','CMvNAxn0zxiTzM9YBq','DMvYAwzPy2f0Aw9Uq2HLy2TjBNrLCNzHBa','otbPww9LC1i','Bg9NAw4Tzw1HAwW','y2XPy2S','CgXHEwvYC0r1B3m','DMfSDwu','ChjLDMvUDerLzMf1Bhq','rM91BMqGCgvUzgLUzYbYzwDPC3rYyxrPB246','BM9Uzq','tMv3ihbSyxLLCIa','nJq0y0vsBu9u','CgvUzgLUz1jLz2LZDhjHDgLVBNm','mZy3odaZmLjIBLjywa','Aw5Uzxjive1m','CgXHEwvYCW','u3rVChbLzcbJAgvJA2LUzYbMB3iGzw1HAwWGDMvYAwzPy2f0Aw9UicH0Aw1LB3v0ihjLywnOzwqP','Bg9JyxrPB24','BwfW','vxnLCIbUB3qGzM91BMqGAw4Gyw55ignVBgXLy3rPB24SignOzwnRAw5NihbLBMrPBMCGCMvNAxn0CMf0Aw9U','mZGYmJGXmez3r1PNrG','rxjYB3iGy2HLy2TPBMCGDxnLCM5HBwu6','C3rYAw5N','C3vIBwL0','BM9UugfYDgLJAxbHBNq','y2HHBMDL','lI4VAw5KzxGUAhrTBa','CMvZzw5KvMvYAwzPy2f0Aw9Urw1HAwW','zgLZCgXHEq','DxnLCG','tg9NAw4GzxjYB3i6','zw1HAwXwzxjPzMLLza','vxnLCM5HBwuGAxmGywXYzwfKEsb0ywTLBG','C2HVDY1SB2DPBG','ndi4ndq1nuHvs2DYCW','uMvNAxn0CMf0Aw9UigvYCM9YoG','DhjPBq','BwvZC2fNzq','Cg9ZAxrPB24','CMvNAxn0zxiTy29UDgfPBMvY','nJKYodq4mxLAtLjKzq','yMXVy2S','DwLK','CMvNAxn0zxiTzw1HAwW','rw1HAwWGywrKCMvZCYbPCYbHBhjLywr5ihjLz2LZDgvYzwq','Bg9N','tg9NAw4GzxjYB3i6ia','z2fTzu1Vzgu','vMvYAwzPy2f0Aw9UigvTywLSihnLBNq','ohLhD3Pxvq','CMvNAxn0zxiTCgfZC3DVCMq','zxHPC3rZ','zw1WDhK','DgvZDa','uhjVy2vZC2LUzYbUB24TCgfYDgLJAxbHBNqGCMvNAxn0CMf0Aw9U','rxjYB3iGC2vUzgLUzYb2zxjPzMLJyxrPB24Gzw1HAwW6ia','rxjYB3iGCMvZzw5KAw5NihzLCMLMAwnHDgLVBIbLBwfPBdO','CMvNAxn0zxiTDxnLCM5HBwu','y2HLy2TLza','zgvZyW','yxv0Ac9LBwfPBc1HBhjLywr5lwLUlxvZzq','mJK1mJaYneH3DeTkuW','vxnLCIbMB3vUzcbPBIa','rw1HAwWGAxmGDMvYAwzPzwqSihbYB2nLC3nPBMCGCMvNAxn0CMf0Aw9U','cIaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicbwzxjPzMLJyxrPB24Gzw1HAwWGAgfZigjLzw4GCMvZzw50ihrVia','CMvNAxn0zxiTBw9Kzq','zgLZywjSzwq','cIaGicaGicaGicaGicaGicaGicaGicaGidXKAxyGy2XHC3m9iNn1y2nLC3mTBwvZC2fNzsi+cIaGicaGicaGicaGicaGicaGicaGicaGicaGicbtzxr0Aw5NihvWihLVDxiGywnJB3vUDc4UlGOGicaGicaGicaGicaGicaGicaGicaGica8l2rPDJ4','sw5JB3jYzwn0igfUC3DLCIb0BYb2zxjPzMLJyxrPB24GCxvLC3rPB24','Bg9NAw4Ty29UDgfPBMvY','ugXLyxnLigvUDgvYihLVDxiGCgfZC3DVCMqGDg8GCMvZzw5KihzLCMLMAwnHDgLVBIbLBwfPBa','mtG4nduXmgrODujQza','CMvNAxn0zxiTzxjYB3i','q1rg','AhjLzG','zxjYB3i','C3r5Bgu','vxnLCIa','ugfZC3DVCMqGBM90igf2ywLSywjSzsbMB3iGCMvZzw5KAw5NihzLCMLMAwnHDgLVBG','ihbSyxLLCIbYzwDPC3rYyxrPB24GDg8G','Bg9NAw4TzxjYB3i','Dgv4DenVBNrLBNq','mJz6ALjTBg0','z2v0rwXLBwvUDej5swq','DxnLCM5HBwu'];a36a=function(){return O;};return a36a();}import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function setupVerificationListener(a,b){const y=a36b;console['log']('Setting\x20up\x20email\x20verification\x20listener\x20for:',a);const c=setInterval(async()=>{const w=a36b;try{console[w(0xc4)]('Checking\x20if\x20email\x20has\x20been\x20verified...');const d=await signInWithEmailAndPassword(auth,a,b),e=d['user'];await e['getIdToken'](!![]),e['emailVerified']?(console[w(0xc4)]('Email\x20has\x20been\x20verified!\x20Redirecting\x20to\x20login\x20page...'),clearInterval(c),document['getElementById'](w(0xdf))[w(0xa5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Email\x20verified\x20successfully!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setTimeout(()=>{const x=w;document['getElementById'](x(0xbe))['style'][x(0xb3)]='none',document['getElementById'](x(0xdc))[x(0xe3)][x(0xb3)]=x(0xc0),document[x(0xea)]('login-email')[x(0x9d)]=a,document[x(0xea)](x(0xe7))[x(0xa5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Your\x20account\x20has\x20been\x20verified!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';},0x7d0)):(console['log']('Email\x20not\x20yet\x20verified,\x20waiting...'),await signOut(auth));}catch(f){console['error']('Error\x20checking\x20verification\x20status:',f),clearInterval(c);}},0x1388);window[y(0xf5)]=c,setTimeout(()=>{const z=y;window['verificationCheckInterval']&&(clearInterval(window[z(0xf5)]),window[z(0xf5)]=null,console['log'](z(0xa7)));},0x5*0x3c*0x3e8);}async function isUsernameAvailable(a){const A=a36b;if(!a||typeof a!==A(0xad)||a[A(0xbb)]()['length']<0x3)return document[A(0xea)]('register-error')['textContent']='Username\x20must\x20be\x20at\x20least\x203\x20characters\x20long',![];const b=a[A(0xbb)]();try{const c=/^[a-zA-Z0-9_-]{3,20}$/;if(!c[A(0xcc)](b))return document[A(0xea)]('register-error')['textContent']='Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscores\x20and\x20hyphens',![];const [d,e,f]=await Promise['all']([getDocs(query(collection(db,A(0xa6)),where(A(0xeb),'==',b))),getDocs(query(collection(db,A(0xa3)),where(A(0xeb),'==',b))),getDocs(query(collection(db,'nonParticipants'),where(A(0xeb),'==',b)))]);if(!d['empty']||!e[A(0xcb)]||!f[A(0xcb)])return document['getElementById']('register-error')['textContent']=A(0xb7),![];return!![];}catch(g){return console[A(0xe2)](A(0xac),g),document[A(0xea)](A(0xdf))[A(0xe8)]='Unable\x20to\x20verify\x20username\x20availability.\x20Please\x20try\x20again\x20later.',![];}}async function handleRegister(a){const B=a36b;a['preventDefault']();const b=document[B(0xea)]('register-error');b[B(0xe8)]='';const c=document['getElementById'](B(0xc2))[B(0x9d)],d=document['getElementById'](B(0xc9))[B(0x9d)],f=document['getElementById'](B(0xd0))['value'],g=document['getElementById']('verification-answer')['value']['toLowerCase'](),h=document[B(0xea)](B(0xd8))['value'],i=document['getElementById']('non-participant')?.['checked']||![];if(i&&h!==''){b[B(0xe8)]='Please\x20unselect\x20a\x20game\x20mode\x20if\x20you\x20choose\x20Non-Participant.';return;}if(!i&&h===''){b[B(0xe8)]='Please\x20select\x20a\x20game\x20mode\x20or\x20check\x20Non-Participant.';return;}try{const j=['purple','magenta'];if(!j['includes'](g)){b[B(0xe8)]=B(0xdb);return;}const k=await isUsernameAvailable(f);if(!k)return;const l=await createUserWithEmailAndPassword(auth,c,d),m=l['user'];await sendEmailVerification(m),await setDoc(doc(db,B(0xa3),m['uid']),{'username':f[B(0xbb)](),'email':c,'gameMode':h,'nonParticipant':i,'createdAt':new Date(),'verified':![]}),b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Registration\x20pending!\x20Please\x20check\x20your\x20email\x20to\x20verify\x20your\x20account.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resendVerificationEmail(\x27'+c+'\x27)\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setupVerificationListener(c,d);}catch(n){console['error'](B(0xba),n),b[B(0xe8)]=n['code']===B(0xd3)?B(0xc3):'Registration\x20failed.\x20Please\x20try\x20again\x20later.';}}async function handleLogin(a){const C=a36b;a['preventDefault']();const b=document['getElementById'](C(0x9a))[C(0x9d)],c=document[C(0xea)]('login-password')[C(0x9d)],d=document['getElementById']('login-error');console[C(0xc4)]('Login\x20attempt\x20started\x20for:',b),d[C(0xe8)]='';try{console[C(0xc4)]('Attempting\x20Firebase\x20signInWithEmailAndPassword...');const f=await signInWithEmailAndPassword(auth,b,c),g=f[C(0xb4)];console['log']('User\x20signed\x20in:',g['uid']);const h=['players',C(0xee),'playersD3',C(0x9c),'playersCTF','nonParticipants'];console[C(0xc4)](C(0xf3));let j=![],k=await Promise['all'](h[C(0xa9)](l=>getDoc(doc(db,l,g['uid']))));for(let l=0x0;l<k['length'];l++){if(k[l]['exists']()){j=!![],console[C(0xc4)](C(0xd5)+h[l]+'\x20collection');break;}}if(!j){console['log'](C(0xaa));const m=doc(db,C(0xa3),g['uid']),n=await getDoc(m);if(n[C(0xca)]()){const o=n[C(0xf2)]();console['log'](C(0x9f),o);if(g[C(0xb6)]){console['log'](C(0xd6)),d['innerHTML']=C(0xda);if(o[C(0xaf)])console[C(0xc4)](C(0xcd)),await setDoc(doc(db,'nonParticipants',g['uid']),{'username':o[C(0xeb)],'email':g['email'],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console['log'](C(0xe4)+o['username']+C(0xf1));else{let p;switch(o[C(0xc6)]){case'D1':p=C(0xa6);break;case'D2':p='playersD2';break;case'D3':p='playersD3';break;case'Duos':p='playersDuos';break;case C(0xe0):p=C(0xec);break;default:p='players';}console[C(0xc4)]('Processing\x20'+o['gameMode']+C(0xe6)+p);const q=collection(db,p),r=query(q,orderBy('position',C(0xd2)),limit(0x1)),s=await getDocs(r),t=s['empty']?0x1:s['docs'][0x0]['data']()[C(0xbd)]+0x1;await setDoc(doc(db,p,g[C(0xc1)]),{'username':o['username'],'email':g['email'],'eloRating':0x4b0,'position':t,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':o[C(0xc6)]}),console['log'](C(0xa1)+o['username']+'\x20added\x20to\x20'+p+'\x20at\x20position\x20'+t);}await deleteDoc(m),setTimeout(()=>{const D=C;window['location'][D(0xe1)]=D(0xb1);},0x7d0);return;}else{d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22warning-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20verify\x20your\x20email\x20to\x20complete\x20your\x20registration.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22resend-button\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',document[C(0xea)]('resend-button')[C(0xef)](C(0x9b),()=>{resendVerificationEmail(b);}),await signOut(auth);return;}}}window[C(0xa8)][C(0xe1)]='../index.html';}catch(u){console[C(0xe2)]('Login\x20error:',u),d[C(0xe8)]='Login\x20failed:\x20'+u[C(0xbc)];}}function loginFormHandler(a){const E=a36b;a['preventDefault']();const b=document[E(0xea)]('login-email')['value'][E(0xbb)](),c=document['getElementById'](E(0xf0))['value'],d=document['getElementById'](E(0xe7));signInWithEmailAndPassword(auth,b,c)['then'](e=>{const F=E;console['log']('User\x20signed\x20in:',e['user']),window['location'][F(0xe1)]='../index.html';})['catch'](e=>{const G=E;console['error'](G(0xb5),e),d[G(0xe8)]=G(0xc5)+e[G(0xbc)],d['style']['display']='block';});}async function resendVerificationEmail(a){const H=a36b;console['log'](H(0xed),a);try{const b=document['getElementById'](H(0xf0))?.[H(0x9d)];if(!b){console[H(0xe2)](H(0xe5)),document['getElementById']('login-error')['textContent']=H(0xdd);return;}const c=await signInWithEmailAndPassword(auth,a,b),d=c[H(0xb4)];console[H(0xc4)]('User\x20signed\x20in\x20for\x20verification\x20email:',d[H(0xc1)]),await sendEmailVerification(d),console['log'](H(0xc7)),document[H(0xea)](H(0xe7))['innerHTML']=H(0xd7)+a+'.\x20Please\x20check\x20your\x20inbox.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth);}catch(e){console[H(0xe2)](H(0xcf),e),document['getElementById'](H(0xe7))['textContent']=H(0xce)+e[H(0xbc)];}}window[a36I(0xb2)]=function(a){const J=a36I;console[J(0xc4)]('Window.resendVerificationEmail\x20called\x20with:',a),resendVerificationEmail(a);},document[a36I(0xef)]('DOMContentLoaded',()=>{const K=a36I,a=document[K(0xea)]('non-participant'),b=document[K(0xea)]('register-mode');a&&b&&a[K(0xef)](K(0xb0),function(){const L=K;this[L(0xd1)]?(b[L(0x9d)]='',b['disabled']=!![]):b[L(0xd9)]=![];});const c=document['getElementById'](K(0xf4)),d=document['getElementById']('login-form');c&&c['addEventListener'](K(0xae),handleRegister);d&&d[K(0xef)]('submit',handleLogin);const e=document[K(0xea)]('show-register'),f=document[K(0xea)](K(0xb8));e&&e['addEventListener']('click',g=>{const M=K;g[M(0x9e)](),document['getElementById'](M(0xdc))[M(0xe3)]['display']=M(0xa0),document['getElementById'](M(0xbe))[M(0xe3)]['display']='block';}),f&&f[K(0xef)]('click',g=>{const N=K;g['preventDefault'](),document['getElementById'](N(0xbe))[N(0xe3)]['display']='none',document[N(0xea)](N(0xdc))['style']['display']=N(0xc0);});});