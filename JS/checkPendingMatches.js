(function(a,b){const l=a10b,c=a();while(!![]){try{const d=parseInt(l(0x98))/0x1*(-parseInt(l(0x96))/0x2)+-parseInt(l(0x9a))/0x3*(-parseInt(l(0x85))/0x4)+-parseInt(l(0x94))/0x5+-parseInt(l(0x78))/0x6*(parseInt(l(0x7f))/0x7)+-parseInt(l(0x92))/0x8+-parseInt(l(0x9b))/0x9*(-parseInt(l(0x8d))/0xa)+parseInt(l(0x86))/0xb*(parseInt(l(0x8e))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a10a,0xeff77));import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(a=![]){const m=a10b,b=Date[m(0x99)](),c=checkNotificationCache();if(c!==null&&!a){updateNotificationDot(c);if(b-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=b;const d=auth['currentUser'];if(!d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [e,f,g]=await Promise[m(0x95)]([checkForPendingMatchesInCollection(d,'pendingMatches'),checkForPendingMatchesInCollection(d,m(0x7a)),checkForPendingMatchesInCollection(d,m(0x70))]),h=e||f||g;updateNotificationDot(h),updateNotificationCache(h);}catch(i){console[m(0x90)]('Error\x20checking\x20pending\x20matches:',i);}}async function checkForPendingMatchesInCollection(a,b){const n=a10b,c=a['uid'],d=a[n(0x8a)],e=query(collection(db,b),where('winnerId','==',c),where('approved','==',![])),f=await getDocs(e);if(!f['empty'])return!![];if(d){const h=query(collection(db,b),where(n(0x97),'==',d),where(n(0x74),'==',![])),i=await getDocs(h);if(!i['empty'])return!![];}let g=await getUsernameFromAllSources(a);if(g){const j=query(collection(db,b),where('winnerUsername','==',g),where('approved','==',![])),k=await getDocs(j);if(!k[n(0x91)])return!![];}return![];}async function getUsernameFromAllSources(a){const o=a10b,b=localStorage[o(0x7d)]('currentUsername');if(b)return b;try{const [c,d,e]=await Promise['all']([getDocs(query(collection(db,'players'),where(o(0x75),'==',a['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',a['uid']))),getDocs(query(collection(db,'playersD3'),where('userId','==',a['uid'])))]);if(!c['empty']){const g=c['docs'][0x0]['data']()['username'];return localStorage[o(0x6c)]('currentUsername',g),g;}if(!d['empty']){const h=d[o(0x71)][0x0][o(0x72)]()['username'];return localStorage['setItem']('currentUsername',h),h;}if(!e['empty']){const i=e['docs'][0x0]['data']()[o(0x7b)];return localStorage['setItem']('currentUsername',i),i;}const f=await getDoc(doc(db,'users',a[o(0x77)]));if(f[o(0x8f)]()&&f['data']()['username']){const j=f[o(0x72)]()['username'];return localStorage[o(0x6c)](o(0x87),j),j;}}catch(k){console['error']('Error\x20fetching\x20username:',k);}if(a['email'])return a['email']['split']('@')[0x0];return null;}function a10b(a,b){const c=a10a();return a10b=function(d,e){d=d-0x6a;let f=c[d];if(a10b['frQjli']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a10b['mxlGwp']=g,a=arguments,a10b['frQjli']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a10b['mxlGwp'](f),a[i]=f):f=j,f;},a10b(a,b);}function updateNotificationCache(a){const p=a10b,b={'status':a,'timestamp':Date[p(0x99)]()};localStorage[p(0x6c)](NOTIFICATION_CACHE_KEY,JSON[p(0x6d)](b));}function checkNotificationCache(){const q=a10b,a=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!a)return null;try{const {status:b,timestamp:c}=JSON[q(0x76)](a),d=Date['now']();if(d-c<CACHE_EXPIRY)return b;}catch(f){}return null;}export function updateNotificationDot(a){const s=a10b,b=new MutationObserver((d,e)=>{const r=a10b,f=document['getElementById'](r(0x89));f&&(updateDotStyle(f,a),e['disconnect']());});b[s(0x84)](document['body'],{'childList':!![],'subtree':!![]});const c=document['getElementById'](s(0x89));c&&(updateDotStyle(c,a),b[s(0x73)]()),setTimeout(()=>b['disconnect'](),0x1388);}function updateDotStyle(a,b){const t=a10b;b?(a[t(0x80)]['display']=t(0x7e),a['style']['backgroundColor']=t(0x8c),a[t(0x80)][t(0x93)]=t(0x8b),a['style']['height']='10px',a['style'][t(0x7c)]='absolute',a['style'][t(0x82)]=t(0x79),a['style']['right']='-8px',a['style'][t(0x6f)]=t(0x88),a['style'][t(0x83)]=t(0x6a),a['style'][t(0x6e)]=t(0x6b)):a['style'][t(0x81)]='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});function a10a(){const u=['nZnjqNrMyLm','BM93','mJq1mJe5muzhr0jkwq','mtGWt0fKDNnL','mNb4ihnVBgLKihDOAxrL','otK5','C2v0sxrLBq','C3rYAw5NAwz5','EKLUzgv4','yM9YzgvYuMfKAxvZ','CgvUzgLUz01HDgnOzxnemW','zg9JCW','zgf0yq','zgLZy29UBMvJDa','yxbWCM92zwq','DxnLCKLK','CgfYC2u','DwLK','nNvsB3LZwq','ltvWEa','CgvUzgLUz01HDgnOzxnemG','DxnLCM5HBwu','Cg9ZAxrPB24','z2v0sxrLBq','yMXVy2S','mJm1oti3m3jPCM5ysa','C3r5Bgu','zgLZCgXHEq','Dg9W','yM9YzgvY','B2jZzxj2zq','ohbJz1rvuG','mte0mZCWodvnwMz4rhO','y3vYCMvUDfvZzxjUyw1L','ntaL','CMvWB3j0lw1HDgnOlw5VDgLMAwnHDgLVBG','zw1HAwW','mtbWEa','i2zMm2iZma','nZe2mJaWwgPKtMj5','mtjJvenHD20','zxHPC3rZ','zxjYB3i','zw1WDhK','mJuXotK4nhzYDwXdCa','D2LKDgG','nJC2nZC4meT0rhnczq','ywXS','mZa2ndjyyuHWtu8','D2LUBMvYrw1HAwW'];a10a=function(){return u;};return a10a();}