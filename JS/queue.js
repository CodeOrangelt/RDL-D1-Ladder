const a43_0x171b34=a43_0x510f,a43_0x1d2388=(function(){let _0xd394ab=!![];return function(_0x3d923e,_0x1c7a6f){const _0x2dabbf=_0xd394ab?function(){const _0x4ca54c=a43_0x510f;if(_0x1c7a6f){const _0x4abb9c=_0x1c7a6f[_0x4ca54c(0x191)](_0x3d923e,arguments);return _0x1c7a6f=null,_0x4abb9c;}}:function(){};return _0xd394ab=![],_0x2dabbf;};}()),a43_0x5c2c59=a43_0x1d2388(this,function(){const _0x3753f8=a43_0x510f,_0xead69d=function(){let _0x4a2e09;try{_0x4a2e09=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x480da2){_0x4a2e09=window;}return _0x4a2e09;},_0x44f796=_0xead69d(),_0x3a8e6f=_0x44f796['console']=_0x44f796[_0x3753f8(0x198)]||{},_0x4d2855=[_0x3753f8(0x19a),_0x3753f8(0x197),_0x3753f8(0x196),'error','exception','table','trace'];for(let _0x2cca19=0x0;_0x2cca19<_0x4d2855[_0x3753f8(0x19d)];_0x2cca19++){const _0x5ba194=a43_0x1d2388['constructor']['prototype']['bind'](a43_0x1d2388),_0x171f62=_0x4d2855[_0x2cca19],_0x2757fa=_0x3a8e6f[_0x171f62]||_0x5ba194;_0x5ba194['__proto__']=a43_0x1d2388['bind'](a43_0x1d2388),_0x5ba194['toString']=_0x2757fa['toString'][_0x3753f8(0x190)](_0x2757fa),_0x3a8e6f[_0x171f62]=_0x5ba194;}});a43_0x5c2c59();import{db}from'./firebase-config.js';function a43_0x510f(_0x5373a3,_0x3542cb){const _0x5c2c59=a43_0x3f2a();return a43_0x510f=function(_0x1d2388,_0x3f1e9a){_0x1d2388=_0x1d2388-0x18f;let _0x3f2a2b=_0x5c2c59[_0x1d2388];return _0x3f2a2b;},a43_0x510f(_0x5373a3,_0x3542cb);}import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x107947){const _0x11746c=a43_0x510f,_0x5a8349=document['getElementById'](_0x11746c(0x193));if(!_0x5a8349)return;if(_0x107947['length']===0x0){_0x5a8349[_0x11746c(0x1a1)]['display']='none';return;}_0x5a8349[_0x11746c(0x1a1)]['display']='block';let _0x5f1487=_0x11746c(0x1a2);_0x107947[_0x11746c(0x195)](_0x52093e=>{_0x5f1487+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x52093e['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x52093e['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x5f1487+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x5a8349['innerHTML']=_0x5f1487;}function a43_0x3f2a(){const _0x31e159=['error','bind','apply','Error\x20removing\x20player\x20from\x20queue:','queue-container','floor','forEach','info','warn','console','isReady','log','unload','toDate','length','lastUpdated','push','addEventListener','style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20'];a43_0x3f2a=function(){return _0x31e159;};return a43_0x3f2a();}function formatQueueTime(_0x353056){const _0x17f0d6=a43_0x510f;if(!_0x353056)return'Just\x20now';const _0xcadc02=_0x353056['toDate']?_0x353056[_0x17f0d6(0x19c)]():new Date(_0x353056),_0xd15837=new Date(),_0x5d39a2=Math[_0x17f0d6(0x194)]((_0xd15837-_0xcadc02)/0xea60);if(_0x5d39a2<0x1)return'Just\x20now';return _0x5d39a2+'m\x20in\x20queue';}async function checkQueueTimeout(_0x1c9e77){const _0x3b567d=a43_0x510f;if(!_0x1c9e77['lastUpdated'])return;const _0x3a8ee5=_0x1c9e77['lastUpdated']['toDate']?_0x1c9e77['lastUpdated'][_0x3b567d(0x19c)]():new Date(_0x1c9e77[_0x3b567d(0x19e)]),_0x4b60e4=new Date(),_0x4c1acd=Math['floor']((_0x4b60e4-_0x3a8ee5)/0xea60);if(_0x4c1acd>=0x1e)try{const _0x3b566d=doc(db,'readyPlayers',_0x1c9e77['id']);await updateDoc(_0x3b566d,{'isReady':![]});}catch(_0x5e1a27){console[_0x3b567d(0x18f)](_0x3b567d(0x192),_0x5e1a27);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x40f45b=>{const _0x1aa482=[];_0x40f45b['forEach'](_0xd42307=>{const _0xb3983b=a43_0x510f,_0x36b4bd=_0xd42307['data']();if(_0x36b4bd[_0xb3983b(0x199)]===!![]){const _0xc68921={'id':_0xd42307['id'],'username':_0x36b4bd['username'],'lastUpdated':_0x36b4bd['lastUpdated']||new Date()};_0x1aa482[_0xb3983b(0x19f)](_0xc68921),checkQueueTimeout(_0xc68921);}}),updateQueueDisplay(_0x1aa482);},_0x3c1d18=>{console['error']('Error\x20in\x20queue\x20listener:',_0x3c1d18);});window[a43_0x171b34(0x1a0)](a43_0x171b34(0x19b),()=>{unsubscribe();});