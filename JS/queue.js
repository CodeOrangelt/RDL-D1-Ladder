function a47_0x4cad(_0x3d7b41,_0x40ebb5){const _0x353fef=a47_0x1e8e();return a47_0x4cad=function(_0x387465,_0x117abf){_0x387465=_0x387465-0x14a;let _0x1e8ede=_0x353fef[_0x387465];return _0x1e8ede;},a47_0x4cad(_0x3d7b41,_0x40ebb5);}const a47_0x45d1b6=a47_0x4cad,a47_0x387465=(function(){let _0x5dba98=!![];return function(_0xbace33,_0x3ab70f){const _0x529661=_0x5dba98?function(){if(_0x3ab70f){const _0x1c08a4=_0x3ab70f['apply'](_0xbace33,arguments);return _0x3ab70f=null,_0x1c08a4;}}:function(){};return _0x5dba98=![],_0x529661;};}()),a47_0x353fef=a47_0x387465(this,function(){const _0x15de78=a47_0x4cad;let _0x58e59f;try{const _0x3eeda0=Function(_0x15de78(0x152)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x58e59f=_0x3eeda0();}catch(_0x4a23d8){_0x58e59f=window;}const _0x4500ab=_0x58e59f['console']=_0x58e59f['console']||{},_0x5091f3=['log',_0x15de78(0x14b),'info','error','exception','table',_0x15de78(0x156)];for(let _0x1d163f=0x0;_0x1d163f<_0x5091f3['length'];_0x1d163f++){const _0x4cd4b0=a47_0x387465[_0x15de78(0x14e)]['prototype']['bind'](a47_0x387465),_0x430e31=_0x5091f3[_0x1d163f],_0xa906ea=_0x4500ab[_0x430e31]||_0x4cd4b0;_0x4cd4b0[_0x15de78(0x153)]=a47_0x387465['bind'](a47_0x387465),_0x4cd4b0['toString']=_0xa906ea[_0x15de78(0x14d)][_0x15de78(0x154)](_0xa906ea),_0x4500ab[_0x430e31]=_0x4cd4b0;}});a47_0x353fef();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x241ae4){const _0x11d6d4=a47_0x4cad,_0x5cff1b=document['getElementById']('queue-container');if(!_0x5cff1b)return;if(_0x241ae4[_0x11d6d4(0x15e)]===0x0){_0x5cff1b[_0x11d6d4(0x151)]['display']='none';return;}_0x5cff1b[_0x11d6d4(0x151)][_0x11d6d4(0x14a)]='block';let _0x1e66b5=_0x11d6d4(0x159);_0x241ae4[_0x11d6d4(0x14f)](_0x158899=>{const _0x3649ff=_0x11d6d4;_0x1e66b5+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x158899['username']||'Unknown\x20Player')+_0x3649ff(0x15d)+formatQueueTime(_0x158899['lastUpdated'])+_0x3649ff(0x15b);}),_0x1e66b5+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x5cff1b['innerHTML']=_0x1e66b5;}function formatQueueTime(_0x11b7e9){const _0x4aba2d=a47_0x4cad;if(!_0x11b7e9)return'Just\x20now';const _0x26e5fc=_0x11b7e9[_0x4aba2d(0x15c)]?_0x11b7e9['toDate']():new Date(_0x11b7e9),_0x5406cb=new Date(),_0x16c86a=Math['floor']((_0x5406cb-_0x26e5fc)/0xea60);if(_0x16c86a<0x1)return _0x4aba2d(0x158);return _0x16c86a+'m\x20in\x20queue';}async function checkQueueTimeout(_0x444d6e){const _0x5486de=a47_0x4cad;if(!_0x444d6e['lastUpdated'])return;const _0x34c436=_0x444d6e[_0x5486de(0x157)][_0x5486de(0x15c)]?_0x444d6e['lastUpdated']['toDate']():new Date(_0x444d6e['lastUpdated']),_0x3e56f2=new Date(),_0xb606a7=Math[_0x5486de(0x15a)]((_0x3e56f2-_0x34c436)/0xea60);if(_0xb606a7>=0x1e)try{const _0x464c6d=doc(db,_0x5486de(0x14c),_0x444d6e['id']);await updateDoc(_0x464c6d,{'isReady':![]});}catch(_0x42f51a){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x42f51a);}}function a47_0x1e8e(){const _0x2bdd48=['display','warn','readyPlayers','toString','constructor','forEach','Error\x20in\x20queue\x20listener:','style','return\x20(function()\x20','__proto__','bind','addEventListener','trace','lastUpdated','Just\x20now','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','floor','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toDate','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>','length','isReady'];a47_0x1e8e=function(){return _0x2bdd48;};return a47_0x1e8e();}const unsubscribe=onSnapshot(readyPlayersRef,_0x34e1f4=>{const _0x684ff1=[];_0x34e1f4['forEach'](_0x3495bc=>{const _0x4a2fe7=a47_0x4cad,_0x1d58ef=_0x3495bc['data']();if(_0x1d58ef[_0x4a2fe7(0x15f)]===!![]){const _0x4bfa6c={'id':_0x3495bc['id'],'username':_0x1d58ef['username'],'lastUpdated':_0x1d58ef['lastUpdated']||new Date()};_0x684ff1['push'](_0x4bfa6c),checkQueueTimeout(_0x4bfa6c);}}),updateQueueDisplay(_0x684ff1);},_0xf9986f=>{const _0x40ab7e=a47_0x4cad;console['error'](_0x40ab7e(0x150),_0xf9986f);});window[a47_0x45d1b6(0x155)]('unload',()=>{unsubscribe();});