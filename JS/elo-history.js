const a16_0x2c5f50=a16_0xd5a7;(function(_0x211601,_0xcbebd2){const _0x556875=a16_0xd5a7,_0x586c03=_0x211601();while(!![]){try{const _0x2092cb=-parseInt(_0x556875(0x171))/0x1*(-parseInt(_0x556875(0x181))/0x2)+-parseInt(_0x556875(0x177))/0x3*(-parseInt(_0x556875(0x196))/0x4)+parseInt(_0x556875(0x172))/0x5+parseInt(_0x556875(0x182))/0x6*(-parseInt(_0x556875(0x185))/0x7)+-parseInt(_0x556875(0x16a))/0x8*(-parseInt(_0x556875(0x18f))/0x9)+-parseInt(_0x556875(0x18b))/0xa*(parseInt(_0x556875(0x194))/0xb)+parseInt(_0x556875(0x174))/0xc;if(_0x2092cb===_0xcbebd2)break;else _0x586c03['push'](_0x586c03['shift']());}catch(_0x9c343f){_0x586c03['push'](_0x586c03['shift']());}}}(a16_0x4779,0x1abf7));const a16_0xa17130=(function(){let _0x236987=!![];return function(_0x536552,_0x9f3ded){const _0x12fc93=_0x236987?function(){const _0x40ed4d=a16_0xd5a7;if(_0x9f3ded){const _0x105b73=_0x9f3ded[_0x40ed4d(0x180)](_0x536552,arguments);return _0x9f3ded=null,_0x105b73;}}:function(){};return _0x236987=![],_0x12fc93;};}()),a16_0x580bce=a16_0xa17130(this,function(){const _0xdfeb85=a16_0xd5a7;return a16_0x580bce[_0xdfeb85(0x16f)]()[_0xdfeb85(0x191)](_0xdfeb85(0x17b))['toString']()[_0xdfeb85(0x195)](a16_0x580bce)[_0xdfeb85(0x191)](_0xdfeb85(0x17b));});a16_0x580bce();function a16_0xd5a7(_0x544c77,_0x25ef9b){const _0x272d9b=a16_0x4779();return a16_0xd5a7=function(_0x1c7b77,_0x55eaa5){_0x1c7b77=_0x1c7b77-0x169;let _0x495619=_0x272d9b[_0x1c7b77];return _0x495619;},a16_0xd5a7(_0x544c77,_0x25ef9b);}const a16_0x55eaa5=(function(){let _0x5356dd=!![];return function(_0x49daa8,_0x404fac){const _0x13f83d=_0x5356dd?function(){const _0x66e99b=a16_0xd5a7;if(_0x404fac){const _0x4b71eb=_0x404fac[_0x66e99b(0x180)](_0x49daa8,arguments);return _0x404fac=null,_0x4b71eb;}}:function(){};return _0x5356dd=![],_0x13f83d;};}()),a16_0x1c7b77=a16_0x55eaa5(this,function(){const _0x1699b5=a16_0xd5a7,_0x152014=function(){const _0x1d1139=a16_0xd5a7;let _0x6350f;try{_0x6350f=Function(_0x1d1139(0x187)+_0x1d1139(0x197)+');')();}catch(_0x38469f){_0x6350f=window;}return _0x6350f;},_0x3d6ec3=_0x152014(),_0x494670=_0x3d6ec3[_0x1699b5(0x17e)]=_0x3d6ec3[_0x1699b5(0x17e)]||{},_0x132a0d=[_0x1699b5(0x16d),_0x1699b5(0x184),_0x1699b5(0x176),'error','exception','table','trace'];for(let _0x5c0c95=0x0;_0x5c0c95<_0x132a0d['length'];_0x5c0c95++){const _0x3cb446=a16_0x55eaa5['constructor']['prototype']['bind'](a16_0x55eaa5),_0x2f1d0c=_0x132a0d[_0x5c0c95],_0x1985c1=_0x494670[_0x2f1d0c]||_0x3cb446;_0x3cb446[_0x1699b5(0x188)]=a16_0x55eaa5['bind'](a16_0x55eaa5),_0x3cb446['toString']=_0x1985c1[_0x1699b5(0x16f)][_0x1699b5(0x183)](_0x1985c1),_0x494670[_0x2f1d0c]=_0x3cb446;}});a16_0x1c7b77();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':a16_0x2c5f50(0x175),'elo':0x640},{'name':a16_0x2c5f50(0x18d),'elo':0x578},{'name':a16_0x2c5f50(0x169),'elo':0x4b0}];async function getUsernameById(_0x4c7df0){const _0x1679f8=a16_0x2c5f50;try{if(!_0x4c7df0)return _0x1679f8(0x16c);const _0x30ac7e=await getDoc(doc(db,'players',_0x4c7df0));return _0x30ac7e['exists']()?_0x30ac7e[_0x1679f8(0x170)]()[_0x1679f8(0x17f)]:_0x1679f8(0x16c);}catch(_0xd474b2){return console['error'](_0x1679f8(0x17c),_0xd474b2),_0x1679f8(0x16c);}}export async function recordEloChange({playerId:_0x488fe6,previousElo:_0x478567,newElo:_0x2f8f94,opponentId:_0x90c295,matchResult:_0x2125ab,previousPosition:_0xc3b4d4,newPosition:_0xbb727e,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x37bd01}){const _0x1e9d4f=a16_0x2c5f50;try{const _0x169dfe=doc(collection(db,_0x1e9d4f(0x178)));let _0x2d805f=_0x1e9d4f(0x173);if(isPromotion)_0x2d805f='promotion';if(isDemotion)_0x2d805f=_0x1e9d4f(0x18a);let _0x492222='Unranked';if(_0x2f8f94>=0x834)_0x492222=_0x1e9d4f(0x179);else{if(_0x2f8f94>=0x708)_0x492222=_0x1e9d4f(0x190);else{if(_0x2f8f94>=0x640)_0x492222='Silver';else{if(_0x2f8f94>=0x578)_0x492222=_0x1e9d4f(0x18d);}}}return await setDoc(_0x169dfe,{'type':_0x2d805f,'player':_0x488fe6,'opponent':_0x90c295,'previousElo':_0x478567,'newElo':_0x2f8f94,'change':_0x2f8f94-_0x478567,'matchResult':_0x2125ab,'previousPosition':_0xc3b4d4,'newPosition':_0xbb727e,'rankAchieved':_0x492222,'timestamp':_0x37bd01}),console['log']('ELO\x20history\x20recorded\x20for\x20'+_0x488fe6),!![];}catch(_0x42248c){console[_0x1e9d4f(0x17a)](_0x1e9d4f(0x18e),_0x42248c);throw _0x42248c;}}export async function getEloHistory(){const _0x214d1f=a16_0x2c5f50;try{const _0xa214a9=collection(db,_0x214d1f(0x178)),_0xfc95b1=query(_0xa214a9,orderBy(_0x214d1f(0x186),_0x214d1f(0x17d))),_0x5618f2=await getDocs(_0xfc95b1),_0x206aa6=_0x5618f2[_0x214d1f(0x193)][_0x214d1f(0x16e)](async _0x48a61=>{const _0x48460e=_0x214d1f,_0x221c21=_0x48a61[_0x48460e(0x170)](),[_0x102197,_0x4a577c]=await Promise[_0x48460e(0x18c)]([getUsernameById(_0x221c21[_0x48460e(0x16b)]),getUsernameById(_0x221c21['opponent'])]);return{..._0x221c21,'playerUsername':_0x102197,'opponentUsername':_0x4a577c,'change':_0x221c21[_0x48460e(0x192)]-_0x221c21['previousElo'],'timestamp':_0x221c21[_0x48460e(0x186)]};}),_0x596db1=await Promise['all'](_0x206aa6);return{'entries':_0x596db1};}catch(_0x2a61dc){console[_0x214d1f(0x17a)](_0x214d1f(0x189),_0x2a61dc);throw _0x2a61dc;}}function a16_0x4779(){const _0x25688d=['368894BgmYTT','78GjpHgj','bind','warn','85771ehhoPE','timestamp','return\x20(function()\x20','__proto__','Error\x20fetching\x20ELO\x20history:','demotion','369690qJRJpI','all','Bronze','Error\x20recording\x20ELO\x20history:','678357hpNsgv','Gold','search','newElo','docs','55DpqQbY','constructor','18536CNMBBX','{}.constructor(\x22return\x20this\x22)(\x20)','Unranked','16TdanrR','player','Unknown\x20Player','log','map','toString','data','1KzUxRM','369035CDoBVW','match','147060qnMJHO','Silver','info','21ZElaHf','eloHistory','Emerald','error','(((.+)+)+)+$','Error\x20fetching\x20username:','desc','console','username','apply'];a16_0x4779=function(){return _0x25688d;};return a16_0x4779();}export function resetPagination(){lastVisible=null;}