const a22_0x4bd72e=a22_0x32f9;import a22_0xe9373,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;function a22_0x32f9(_0x4fb4c7,_0x37a49d){const _0xafdc15=a22_0x1fdc();return a22_0x32f9=function(_0x170e68,_0x5638f6){_0x170e68=_0x170e68-0x187;let _0x1fdccd=_0xafdc15[_0x170e68];return _0x1fdccd;},a22_0x32f9(_0x4fb4c7,_0x37a49d);}let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x8a2b49=a22_0x32f9;if(document['getElementById'](_0x8a2b49(0x192)))return;const _0x593f46=document['createElement']('div');_0x593f46['id']='idle-overlay',_0x593f46['style']['cssText']=_0x8a2b49(0x1ab);const _0x45891a=document['createElement'](_0x8a2b49(0x1b0));_0x45891a['style'][_0x8a2b49(0x1ac)]=_0x8a2b49(0x1b6);const _0x5b40e7=document[_0x8a2b49(0x190)]('h2');_0x5b40e7['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x5b40e7['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x4736be=document['createElement']('p');_0x4736be['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x4736be[_0x8a2b49(0x1af)]['cssText']=_0x8a2b49(0x194);const _0x4cf14c=document['createElement']('button');_0x4cf14c['id']='resume-session-btn',_0x4cf14c['textContent']='Return\x20to\x20Website',_0x4cf14c['style'][_0x8a2b49(0x1ac)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x4cf14c[_0x8a2b49(0x1b7)]=function(){const _0x3dbe66=_0x8a2b49;this[_0x3dbe66(0x1af)][_0x3dbe66(0x1a1)]=_0x3dbe66(0x1a2);},_0x4cf14c['onmouseout']=function(){const _0x3284c1=_0x8a2b49;this[_0x3284c1(0x1af)]['backgroundColor']='#50C878';},_0x45891a['appendChild'](_0x5b40e7),_0x45891a['appendChild'](_0x4736be),_0x45891a[_0x8a2b49(0x1b2)](_0x4cf14c),_0x593f46['appendChild'](_0x45891a),document['body']['appendChild'](_0x593f46),_0x4cf14c[_0x8a2b49(0x18b)]('click',resumeSession),createNetworkErrorOverlay();}function a22_0x1fdc(){const _0x1cc563=['preventDefault','table','body','not-allowed','addEventListener','none','getDocs','error','bind','createElement','cursor','idle-overlay','network-error-overlay','color:\x20#fff;\x20margin-bottom:\x2030px;','code','RDL_SESSION_SUSPENDED','keypress','size','Pending\x20operations:','textContent','opacity','We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20','resource-exhausted','click','retry-connection-btn','backgroundColor','#3da05f','Idle\x20timeout\x20initialized:','Session\x20suspended\x20due\x20to\x20inactivity','pendingOperations','console','log','getElementById','RDL_LAST_ACTIVITY','flex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','cssText','activeListeners','reload','style','div','location','appendChild','reload-page-btn','now','Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','onmouseover'];a22_0x1fdc=function(){return _0x1cc563;};return a22_0x1fdc();}function createNetworkErrorOverlay(){const _0x43487a=a22_0x32f9;if(document[_0x43487a(0x1a8)]('network-error-overlay'))return;const _0xc76fbc=document['createElement']('div');_0xc76fbc['id']='network-error-overlay',_0xc76fbc[_0x43487a(0x1af)][_0x43487a(0x1ac)]=_0x43487a(0x1ab);const _0x3fa20a=document['createElement']('div');_0x3fa20a['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x4369e0=document['createElement']('h2');_0x4369e0['textContent']='Connection\x20Error',_0x4369e0['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x42c64d=document['createElement']('p');_0x42c64d[_0x43487a(0x19a)]=_0x43487a(0x19c),_0x42c64d['style'][_0x43487a(0x1ac)]=_0x43487a(0x194);const _0x5467c3=document['createElement']('button');_0x5467c3['id']=_0x43487a(0x1a0),_0x5467c3[_0x43487a(0x19a)]='Retry\x20Connection',_0x5467c3[_0x43487a(0x1af)]['cssText']=_0x43487a(0x19d);const _0x492386=document['createElement']('button');_0x492386['id']=_0x43487a(0x1b3),_0x492386['textContent']='Reload\x20Page',_0x492386['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x7ea939=document['createElement'](_0x43487a(0x1b0));_0x7ea939['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x7ea939['appendChild'](_0x5467c3),_0x7ea939['appendChild'](_0x492386),_0x3fa20a['appendChild'](_0x4369e0),_0x3fa20a['appendChild'](_0x42c64d),_0x3fa20a['appendChild'](_0x7ea939),_0xc76fbc['appendChild'](_0x3fa20a),document[_0x43487a(0x189)][_0x43487a(0x1b2)](_0xc76fbc),_0x5467c3['addEventListener']('click',retryConnection),_0x492386[_0x43487a(0x18b)](_0x43487a(0x19f),()=>window[_0x43487a(0x1b1)][_0x43487a(0x1ae)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x3e1245=a22_0x32f9;clearTimeout(idleTimer);const _0x4cf658=document['getElementById'](_0x3e1245(0x193));_0x4cf658&&(_0x4cf658['style']['display']=_0x3e1245(0x1aa)),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0xe9373['suspendAllListeners']();}function retryConnection(){const _0x224453=a22_0x32f9;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x34992c=document['querySelector']('#network-error-overlay\x20p');_0x34992c&&(_0x34992c[_0x224453(0x19a)]=_0x224453(0x1b5));const _0x375dbd=document['getElementById'](_0x224453(0x1a0));_0x375dbd&&(_0x375dbd['disabled']=!![],_0x375dbd['style'][_0x224453(0x19b)]='0.5',_0x375dbd['style'][_0x224453(0x191)]=_0x224453(0x18a));return;}const _0x18a0c0=document['getElementById']('network-error-overlay');_0x18a0c0&&(_0x18a0c0['style']['display']=_0x224453(0x18c));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x4e0ab9}=window;if(_0x4e0ab9){const _0x22ed02=_0x4e0ab9['collection']('system');_0x4e0ab9[_0x224453(0x18d)](_0x22ed02)['catch'](_0x2fc118=>{const _0x511c3e=_0x224453;console[_0x511c3e(0x18e)]('Connection\x20test\x20failed:',_0x2fc118),handleNetworkError();});}}catch(_0x2f64dc){console[_0x224453(0x18e)]('Failed\x20to\x20test\x20connection:',_0x2f64dc),handleNetworkError();}a22_0xe9373['resumeAllListeners']();}function suspendSession(){const _0x1f1d38=a22_0x32f9;isSessionSuspended=!![];const _0x22b315=document[_0x1f1d38(0x1a8)](_0x1f1d38(0x192));_0x22b315&&(_0x22b315['style']['display']='flex'),console['log'](_0x1f1d38(0x1a4)),window[_0x1f1d38(0x196)]=!![],a22_0xe9373['suspendAllListeners']();}function resumeSession(){const _0x33c8c4=a22_0x32f9;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x39a888=document['getElementById']('idle-overlay');_0x39a888&&(_0x39a888[_0x33c8c4(0x1af)]['display']='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0xe9373['resumeAllListeners'](),idleTimer&&Date[_0x33c8c4(0x1b4)]()-(window[_0x33c8c4(0x1a9)]||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0xfe6490=a22_0x32f9,_0x3fc453=(function(){let _0x3223f3=!![];return function(_0x1821c2,_0x4347e6){const _0x32494c=_0x3223f3?function(){if(_0x4347e6){const _0x23e447=_0x4347e6['apply'](_0x1821c2,arguments);return _0x4347e6=null,_0x23e447;}}:function(){};return _0x3223f3=![],_0x32494c;};}()),_0x872603=_0x3fc453(this,function(){const _0x12f9da=a22_0x32f9,_0x104a09=function(){let _0x21f7f3;try{_0x21f7f3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x14c381){_0x21f7f3=window;}return _0x21f7f3;},_0x694589=_0x104a09(),_0x47250e=_0x694589['console']=_0x694589[_0x12f9da(0x1a6)]||{},_0x4581a6=['log','warn','info','error','exception',_0x12f9da(0x188),'trace'];for(let _0x3a860b=0x0;_0x3a860b<_0x4581a6['length'];_0x3a860b++){const _0x4bb7d8=_0x3fc453['constructor']['prototype']['bind'](_0x3fc453),_0x73bb9a=_0x4581a6[_0x3a860b],_0x3cb86f=_0x47250e[_0x73bb9a]||_0x4bb7d8;_0x4bb7d8['__proto__']=_0x3fc453['bind'](_0x3fc453),_0x4bb7d8['toString']=_0x3cb86f['toString'][_0x12f9da(0x18f)](_0x3cb86f),_0x47250e[_0x73bb9a]=_0x4bb7d8;}});_0x872603(),createIdleOverlay();const _0x58d75c=['mousedown','mousemove',_0xfe6490(0x197),'scroll','touchstart','click'];_0x58d75c['forEach'](_0x5bb6c6=>{document['addEventListener'](_0x5bb6c6,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x20ac7d){const _0x5a27d1=_0xfe6490;_0x20ac7d[_0x5a27d1(0x18e)]&&(_0x20ac7d['error']['message']&&_0x20ac7d['error']['message']['includes']('network')||_0x20ac7d['error']['code']&&(_0x20ac7d['error']['code']==='unavailable'||_0x20ac7d[_0x5a27d1(0x18e)][_0x5a27d1(0x195)]===_0x5a27d1(0x19e)||_0x20ac7d['error']['code']['includes']('network')))&&(handleNetworkError(),_0x20ac7d[_0x5a27d1(0x187)]());}),resetIdleTimer(),console['log'](_0xfe6490(0x1a3),IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x1a5d32=_0xfe6490;return console['log']('Session\x20suspended:',window[_0x1a5d32(0x196)]),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console[_0x1a5d32(0x1a7)]('Active\x20listeners:',a22_0xe9373['activeListeners'][_0x1a5d32(0x198)]),console['log'](_0x1a5d32(0x199),a22_0xe9373['pendingOperations']['size']),console['log']('Blocked\x20operations:',a22_0xe9373['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0xe9373[_0x1a5d32(0x1ad)]['keys']()),'pendingOperations':Array['from'](a22_0xe9373[_0x1a5d32(0x1a5)]['keys']()),'blockedCount':a22_0xe9373['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document[a22_0x4bd72e(0x18b)]('DOMContentLoaded',initIdleTimeout):initIdleTimeout();