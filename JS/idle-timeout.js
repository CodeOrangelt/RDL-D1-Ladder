const a20_0x50402e=a20_0x4173;import a20_0x585ee1,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;function a20_0x5cc1(){const _0x360f28=['activeListeners','getElementById','backgroundColor','reload-page-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','display','from','textContent','keypress','code','button','Failed\x20to\x20test\x20connection:','toString','#3da05f','cssText','includes','checkFirebaseIdleStatus','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','forEach','pendingOperations','error','log','RDL_LAST_ACTIVITY','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','RDL_NETWORK_ERROR','body','disabled','blockedOperations','addEventListener','#50C878','apply','not-allowed','location','RDL_SESSION_SUSPENDED','Blocked\x20operations:','color:\x20#fff;\x20margin-bottom:\x2030px;','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','Active\x20listeners:','appendChild','bind','resumeAllListeners','style','now','flex','createElement','network-error-overlay','console','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','Reload\x20Page','DOMContentLoaded','Connection\x20Error','div'];a20_0x5cc1=function(){return _0x360f28;};return a20_0x5cc1();}let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x11a138=a20_0x4173;if(document['getElementById']('idle-overlay'))return;const _0x63ee35=document['createElement']('div');_0x63ee35['id']='idle-overlay',_0x63ee35[_0x11a138(0xca)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0xa7a56a=document[_0x11a138(0xcd)]('div');_0xa7a56a['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x15a83c=document['createElement']('h2');_0x15a83c['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x15a83c['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x534f6d=document[_0x11a138(0xcd)]('p');_0x534f6d['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x534f6d['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x19c964=document[_0x11a138(0xcd)](_0x11a138(0xab));_0x19c964['id']='resume-session-btn',_0x19c964['textContent']='Return\x20to\x20Website',_0x19c964[_0x11a138(0xca)]['cssText']=_0x11a138(0xa5),_0x19c964['onmouseover']=function(){const _0x2497c6=_0x11a138;this['style'][_0x2497c6(0xa3)]=_0x2497c6(0xae);},_0x19c964['onmouseout']=function(){const _0x291a56=_0x11a138;this['style']['backgroundColor']=_0x291a56(0xbe);},_0xa7a56a['appendChild'](_0x15a83c),_0xa7a56a['appendChild'](_0x534f6d),_0xa7a56a['appendChild'](_0x19c964),_0x63ee35[_0x11a138(0xc7)](_0xa7a56a),document['body']['appendChild'](_0x63ee35),_0x19c964[_0x11a138(0xbd)]('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x51d20c=a20_0x4173;if(document[_0x51d20c(0xa2)](_0x51d20c(0xce)))return;const _0x106696=document['createElement'](_0x51d20c(0xd4));_0x106696['id']=_0x51d20c(0xce),_0x106696['style'][_0x51d20c(0xaf)]=_0x51d20c(0xb8);const _0x524bfa=document[_0x51d20c(0xcd)](_0x51d20c(0xd4));_0x524bfa['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x5cf3c5=document['createElement']('h2');_0x5cf3c5['textContent']=_0x51d20c(0xd3),_0x5cf3c5['style']['cssText']=_0x51d20c(0xc5);const _0x10b575=document['createElement']('p');_0x10b575['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x10b575['style']['cssText']=_0x51d20c(0xc4);const _0x36e8cf=document['createElement']('button');_0x36e8cf['id']='retry-connection-btn',_0x36e8cf[_0x51d20c(0xa8)]='Retry\x20Connection',_0x36e8cf[_0x51d20c(0xca)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x1b2186=document[_0x51d20c(0xcd)](_0x51d20c(0xab));_0x1b2186['id']=_0x51d20c(0xa4),_0x1b2186[_0x51d20c(0xa8)]=_0x51d20c(0xd1),_0x1b2186['style'][_0x51d20c(0xaf)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x5bd85f=document[_0x51d20c(0xcd)](_0x51d20c(0xd4));_0x5bd85f['style']['cssText']=_0x51d20c(0xd0),_0x5bd85f[_0x51d20c(0xc7)](_0x36e8cf),_0x5bd85f['appendChild'](_0x1b2186),_0x524bfa['appendChild'](_0x5cf3c5),_0x524bfa['appendChild'](_0x10b575),_0x524bfa[_0x51d20c(0xc7)](_0x5bd85f),_0x106696['appendChild'](_0x524bfa),document[_0x51d20c(0xba)][_0x51d20c(0xc7)](_0x106696),_0x36e8cf['addEventListener']('click',retryConnection),_0x1b2186['addEventListener']('click',()=>window[_0x51d20c(0xc1)]['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x4f2acb=a20_0x4173;clearTimeout(idleTimer);const _0x33a683=document['getElementById']('network-error-overlay');_0x33a683&&(_0x33a683['style']['display']=_0x4f2acb(0xcc)),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a20_0x585ee1['suspendAllListeners']();}function retryConnection(){const _0x14aad7=a20_0x4173;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x1e01bc=document['querySelector']('#network-error-overlay\x20p');_0x1e01bc&&(_0x1e01bc['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x415b0b=document[_0x14aad7(0xa2)]('retry-connection-btn');_0x415b0b&&(_0x415b0b[_0x14aad7(0xbb)]=!![],_0x415b0b['style']['opacity']='0.5',_0x415b0b['style']['cursor']=_0x14aad7(0xc0));return;}const _0x401510=document['getElementById'](_0x14aad7(0xce));_0x401510&&(_0x401510['style']['display']='none');window[_0x14aad7(0xb9)]=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x1b5abb}=window;if(_0x1b5abb){const _0x4166b1=_0x1b5abb['collection']('system');_0x1b5abb['getDocs'](_0x4166b1)['catch'](_0x397eca=>{console['error']('Connection\x20test\x20failed:',_0x397eca),handleNetworkError();});}}catch(_0x36aea9){console['error'](_0x14aad7(0xac),_0x36aea9),handleNetworkError();}a20_0x585ee1[_0x14aad7(0xc9)]();}function suspendSession(){const _0x4456f5=a20_0x4173;isSessionSuspended=!![];const _0x517d6c=document['getElementById']('idle-overlay');_0x517d6c&&(_0x517d6c[_0x4456f5(0xca)][_0x4456f5(0xa6)]='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x4456f5(0xc2)]=!![],a20_0x585ee1['suspendAllListeners']();}function resumeSession(){const _0x46f141=a20_0x4173;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x5badd1=document['getElementById']('idle-overlay');_0x5badd1&&(_0x5badd1[_0x46f141(0xca)]['display']='none'),console[_0x46f141(0xb6)]('Session\x20resumed'),resetIdleTimer(),a20_0x585ee1['resumeAllListeners'](),idleTimer&&Date['now']()-(window[_0x46f141(0xb7)]||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x46f141(0xb2)),window['location']['reload']());}function a20_0x4173(_0x39a69a,_0x398329){const _0x4a6c4f=a20_0x5cc1();return a20_0x4173=function(_0x2bb585,_0x19f3e8){_0x2bb585=_0x2bb585-0xa1;let _0x5cc10e=_0x4a6c4f[_0x2bb585];return _0x5cc10e;},a20_0x4173(_0x39a69a,_0x398329);}function initIdleTimeout(){const _0x5c15c0=a20_0x4173,_0x5690de=(function(){let _0x206baa=!![];return function(_0x15a308,_0x2b1bd6){const _0x1039a0=_0x206baa?function(){const _0xeb223c=a20_0x4173;if(_0x2b1bd6){const _0x40d02f=_0x2b1bd6[_0xeb223c(0xbf)](_0x15a308,arguments);return _0x2b1bd6=null,_0x40d02f;}}:function(){};return _0x206baa=![],_0x1039a0;};}()),_0x5f46b5=_0x5690de(this,function(){const _0xd47009=a20_0x4173;let _0x1f2c8b;try{const _0xfcb419=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1f2c8b=_0xfcb419();}catch(_0x1c183e){_0x1f2c8b=window;}const _0x16d829=_0x1f2c8b[_0xd47009(0xcf)]=_0x1f2c8b['console']||{},_0x3247a6=[_0xd47009(0xb6),'warn','info','error','exception','table','trace'];for(let _0x42488a=0x0;_0x42488a<_0x3247a6['length'];_0x42488a++){const _0x33e6ab=_0x5690de['constructor']['prototype']['bind'](_0x5690de),_0x598f60=_0x3247a6[_0x42488a],_0x1b93c3=_0x16d829[_0x598f60]||_0x33e6ab;_0x33e6ab['__proto__']=_0x5690de['bind'](_0x5690de),_0x33e6ab[_0xd47009(0xad)]=_0x1b93c3['toString'][_0xd47009(0xc8)](_0x1b93c3),_0x16d829[_0x598f60]=_0x33e6ab;}});_0x5f46b5(),createIdleOverlay();const _0x4ebea1=['mousedown','mousemove',_0x5c15c0(0xa9),'scroll','touchstart','click'];_0x4ebea1[_0x5c15c0(0xb3)](_0x2f0932=>{const _0x244da2=_0x5c15c0;document[_0x244da2(0xbd)](_0x2f0932,()=>{const _0x450e46=_0x244da2;window[_0x450e46(0xb7)]=Date[_0x450e46(0xcb)](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0xf313b0){const _0x4d15df=_0x5c15c0;_0xf313b0['error']&&(_0xf313b0['error']['message']&&_0xf313b0['error']['message'][_0x4d15df(0xb0)]('network')||_0xf313b0[_0x4d15df(0xb5)][_0x4d15df(0xaa)]&&(_0xf313b0['error'][_0x4d15df(0xaa)]==='unavailable'||_0xf313b0[_0x4d15df(0xb5)]['code']==='resource-exhausted'||_0xf313b0['error'][_0x4d15df(0xaa)][_0x4d15df(0xb0)]('network')))&&(handleNetworkError(),_0xf313b0['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window[_0x5c15c0(0xb1)]=function(){const _0xf41148=_0x5c15c0;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window[_0xf41148(0xb9)]),console[_0xf41148(0xb6)](_0xf41148(0xc6),a20_0x585ee1['activeListeners']['size']),console['log']('Pending\x20operations:',a20_0x585ee1['pendingOperations']['size']),console['log'](_0xf41148(0xc3),a20_0x585ee1[_0xf41148(0xbc)]||0x0),{'suspended':window[_0xf41148(0xc2)],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a20_0x585ee1[_0xf41148(0xa1)]['keys']()),'pendingOperations':Array[_0xf41148(0xa7)](a20_0x585ee1[_0xf41148(0xb4)]['keys']()),'blockedCount':a20_0x585ee1['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document[a20_0x50402e(0xbd)](a20_0x50402e(0xd2),initIdleTimeout):initIdleTimeout();