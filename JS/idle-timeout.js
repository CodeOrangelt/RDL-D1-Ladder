const a20_0x44377b=a20_0x54bf;import a20_0x5b2999,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';function a20_0x54bf(_0x1b4771,_0x4731f0){const _0x35f580=a20_0x4c2e();return a20_0x54bf=function(_0x336e4c,_0xac9fed){_0x336e4c=_0x336e4c-0xe7;let _0x4c2e1d=_0x35f580[_0x336e4c];return _0x4c2e1d;},a20_0x54bf(_0x1b4771,_0x4731f0);}const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x3d0bae=a20_0x54bf;if(document['getElementById'](_0x3d0bae(0xf2)))return;const _0x598466=document['createElement']('div');_0x598466['id']='idle-overlay',_0x598466[_0x3d0bae(0xf4)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x5b2661=document[_0x3d0bae(0xfc)]('div');_0x5b2661['style']['cssText']=_0x3d0bae(0x111);const _0x15a1ba=document['createElement']('h2');_0x15a1ba['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x15a1ba['style']['cssText']=_0x3d0bae(0xf8);const _0x386ca4=document['createElement']('p');_0x386ca4[_0x3d0bae(0x103)]='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x386ca4['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x5960f5=document[_0x3d0bae(0xfc)]('button');_0x5960f5['id']='resume-session-btn',_0x5960f5['textContent']='Return\x20to\x20Website',_0x5960f5['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x5960f5['onmouseover']=function(){const _0x4cfb16=_0x3d0bae;this['style']['backgroundColor']=_0x4cfb16(0xeb);},_0x5960f5['onmouseout']=function(){const _0x5c950e=_0x3d0bae;this['style']['backgroundColor']=_0x5c950e(0x10b);},_0x5b2661[_0x3d0bae(0xfd)](_0x15a1ba),_0x5b2661[_0x3d0bae(0xfd)](_0x386ca4),_0x5b2661['appendChild'](_0x5960f5),_0x598466['appendChild'](_0x5b2661),document['body']['appendChild'](_0x598466),_0x5960f5['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x2aca7f=a20_0x54bf;if(document[_0x2aca7f(0xe8)]('network-error-overlay'))return;const _0x31cc80=document[_0x2aca7f(0xfc)]('div');_0x31cc80['id']='network-error-overlay',_0x31cc80['style'][_0x2aca7f(0xf3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x4dd7c3=document['createElement'](_0x2aca7f(0x10f));_0x4dd7c3['style'][_0x2aca7f(0xf3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x17f5d9=document['createElement']('h2');_0x17f5d9['textContent']=_0x2aca7f(0x105),_0x17f5d9['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x1b96d7=document[_0x2aca7f(0xfc)]('p');_0x1b96d7['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x1b96d7[_0x2aca7f(0xf4)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x232966=document['createElement'](_0x2aca7f(0x109));_0x232966['id']='retry-connection-btn',_0x232966['textContent']='Retry\x20Connection',_0x232966[_0x2aca7f(0xf4)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x53429b=document[_0x2aca7f(0xfc)]('button');_0x53429b['id']='reload-page-btn',_0x53429b['textContent']=_0x2aca7f(0xe7),_0x53429b['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x4f6634=document[_0x2aca7f(0xfc)](_0x2aca7f(0x10f));_0x4f6634['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x4f6634['appendChild'](_0x232966),_0x4f6634[_0x2aca7f(0xfd)](_0x53429b),_0x4dd7c3['appendChild'](_0x17f5d9),_0x4dd7c3['appendChild'](_0x1b96d7),_0x4dd7c3['appendChild'](_0x4f6634),_0x31cc80[_0x2aca7f(0xfd)](_0x4dd7c3),document['body'][_0x2aca7f(0xfd)](_0x31cc80),_0x232966[_0x2aca7f(0x10d)]('click',retryConnection),_0x53429b[_0x2aca7f(0x10d)](_0x2aca7f(0xee),()=>window[_0x2aca7f(0xff)][_0x2aca7f(0x100)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function a20_0x4c2e(){const _0x5eb409=['Reload\x20Page','getElementById','RDL_NETWORK_ERROR','message','#3da05f','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','includes','click','network','activeListeners','constructor','idle-overlay','cssText','style','RDL_SESSION_SUSPENDED','preventDefault','keypress','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','log','error','warn','createElement','appendChild','bind','location','reload','#network-error-overlay\x20p','length','textContent','DOMContentLoaded','Connection\x20Error','code','none','RDL_LAST_ACTIVITY','button','Session\x20resumed','#50C878','now','addEventListener','scroll','div','not-allowed','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','flex','querySelector'];a20_0x4c2e=function(){return _0x5eb409;};return a20_0x4c2e();}function handleNetworkError(){const _0x2254fc=a20_0x54bf;clearTimeout(idleTimer);const _0x41ccf3=document[_0x2254fc(0xe8)]('network-error-overlay');_0x41ccf3&&(_0x41ccf3['style']['display']='flex'),window[_0x2254fc(0xe9)]=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a20_0x5b2999['suspendAllListeners']();}function retryConnection(){const _0x7754df=a20_0x54bf;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x3df4c8=document[_0x7754df(0x113)](_0x7754df(0x101));_0x3df4c8&&(_0x3df4c8[_0x7754df(0x103)]='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x471c6f=document['getElementById']('retry-connection-btn');_0x471c6f&&(_0x471c6f['disabled']=!![],_0x471c6f['style']['opacity']='0.5',_0x471c6f['style']['cursor']=_0x7754df(0x110));return;}const _0x1eb396=document['getElementById']('network-error-overlay');_0x1eb396&&(_0x1eb396['style']['display']=_0x7754df(0x107));window[_0x7754df(0xe9)]=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x11b6b0}=window;if(_0x11b6b0){const _0x216e56=_0x11b6b0['collection']('system');_0x11b6b0['getDocs'](_0x216e56)['catch'](_0xb39a13=>{console['error']('Connection\x20test\x20failed:',_0xb39a13),handleNetworkError();});}}catch(_0x5e3291){console['error']('Failed\x20to\x20test\x20connection:',_0x5e3291),handleNetworkError();}a20_0x5b2999['resumeAllListeners']();}function suspendSession(){const _0xb380f1=a20_0x54bf;isSessionSuspended=!![];const _0x3823ac=document[_0xb380f1(0xe8)]('idle-overlay');_0x3823ac&&(_0x3823ac['style']['display']=_0xb380f1(0x112)),console[_0xb380f1(0xf9)]('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a20_0x5b2999['suspendAllListeners']();}function resumeSession(){const _0x2c27c2=a20_0x54bf;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x5a8f13=document[_0x2c27c2(0xe8)](_0x2c27c2(0xf2));_0x5a8f13&&(_0x5a8f13['style']['display']='none'),console['log'](_0x2c27c2(0x10a)),resetIdleTimer(),a20_0x5b2999['resumeAllListeners'](),idleTimer&&Date[_0x2c27c2(0x10c)]()-(window[_0x2c27c2(0x108)]||0x0)>IDLE_TIMEOUT*0x2&&(console['log'](_0x2c27c2(0xec)),window[_0x2c27c2(0xff)]['reload']());}function initIdleTimeout(){const _0x30c608=a20_0x54bf,_0x265a23=(function(){let _0x2253a2=!![];return function(_0xa653bc,_0x5054e3){const _0x1c697f=_0x2253a2?function(){if(_0x5054e3){const _0x40f775=_0x5054e3['apply'](_0xa653bc,arguments);return _0x5054e3=null,_0x40f775;}}:function(){};return _0x2253a2=![],_0x1c697f;};}()),_0x50d2e1=_0x265a23(this,function(){const _0x5c8da1=a20_0x54bf;let _0x47f994;try{const _0x2c1692=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x47f994=_0x2c1692();}catch(_0x2b30d7){_0x47f994=window;}const _0x364d7d=_0x47f994['console']=_0x47f994['console']||{},_0x153f3b=[_0x5c8da1(0xf9),_0x5c8da1(0xfb),'info','error','exception','table','trace'];for(let _0x177edf=0x0;_0x177edf<_0x153f3b[_0x5c8da1(0x102)];_0x177edf++){const _0x574bc2=_0x265a23[_0x5c8da1(0xf1)]['prototype']['bind'](_0x265a23),_0xa0baf7=_0x153f3b[_0x177edf],_0x5b8483=_0x364d7d[_0xa0baf7]||_0x574bc2;_0x574bc2['__proto__']=_0x265a23[_0x5c8da1(0xfe)](_0x265a23),_0x574bc2['toString']=_0x5b8483['toString'][_0x5c8da1(0xfe)](_0x5b8483),_0x364d7d[_0xa0baf7]=_0x574bc2;}});_0x50d2e1(),createIdleOverlay();const _0x3f9d9d=['mousedown','mousemove',_0x30c608(0xf7),_0x30c608(0x10e),'touchstart',_0x30c608(0xee)];_0x3f9d9d['forEach'](_0x2bbc2a=>{document['addEventListener'](_0x2bbc2a,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x27a5bd){const _0x2fe13c=_0x30c608;_0x27a5bd[_0x2fe13c(0xfa)]&&(_0x27a5bd['error'][_0x2fe13c(0xea)]&&_0x27a5bd[_0x2fe13c(0xfa)][_0x2fe13c(0xea)][_0x2fe13c(0xed)](_0x2fe13c(0xef))||_0x27a5bd['error']['code']&&(_0x27a5bd['error']['code']==='unavailable'||_0x27a5bd['error'][_0x2fe13c(0x106)]==='resource-exhausted'||_0x27a5bd['error']['code']['includes']('network')))&&(handleNetworkError(),_0x27a5bd[_0x2fe13c(0xf6)]());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x4c427b=_0x30c608;return console[_0x4c427b(0xf9)]('Session\x20suspended:',window[_0x4c427b(0xf5)]),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console['log']('Active\x20listeners:',a20_0x5b2999[_0x4c427b(0xf0)]['size']),console[_0x4c427b(0xf9)]('Pending\x20operations:',a20_0x5b2999['pendingOperations']['size']),console['log']('Blocked\x20operations:',a20_0x5b2999['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window[_0x4c427b(0xe9)],'activeListeners':Array['from'](a20_0x5b2999['activeListeners']['keys']()),'pendingOperations':Array['from'](a20_0x5b2999['pendingOperations']['keys']()),'blockedCount':a20_0x5b2999['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document[a20_0x44377b(0x10d)](a20_0x44377b(0x104),initIdleTimeout):initIdleTimeout();