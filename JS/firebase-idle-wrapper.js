function a19_0x439d(){const _0x4b3d6d=['warn','all','now','[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20','toString','size','table','[FirebaseIdle]\x20Error\x20suspending\x20listener:','exception','safeOperation','_suspendedListeners','system','checkSessionActive','delete','blockedOperations','cssText','clear','appendChild','resource-exhausted','listener_','\x20operation','error','debug','forEach','resumeSession','network','activeListeners','prototype','[FirebaseIdle]\x20No\x20listeners\x20to\x20resume','message','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','Error\x20executing\x20pending\x20operation:','console','pendingTimeout','return\x20(function()\x20','includes','pendingOperations','[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20','set','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle','function','random','resumeAllListeners','[FirebaseIdle]\x20Active\x20listeners:\x20','log','unavailable','suspendAllListeners'];a19_0x439d=function(){return _0x4b3d6d;};return a19_0x439d();}const a19_0x789302=a19_0xca11,a19_0x38f26e=(function(){let _0x3ad391=!![];return function(_0x3918d9,_0x12efd7){const _0x1ee4c7=_0x3ad391?function(){if(_0x12efd7){const _0x5c754c=_0x12efd7['apply'](_0x3918d9,arguments);return _0x12efd7=null,_0x5c754c;}}:function(){};return _0x3ad391=![],_0x1ee4c7;};}()),a19_0x27f3d0=a19_0x38f26e(this,function(){const _0x39b613=a19_0xca11;let _0x18ecbb;try{const _0x1b7357=Function(_0x39b613(0x171)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x18ecbb=_0x1b7357();}catch(_0x30d5c8){_0x18ecbb=window;}const _0x5e4dbe=_0x18ecbb[_0x39b613(0x16f)]=_0x18ecbb['console']||{},_0x157f48=[_0x39b613(0x17b),_0x39b613(0x14f),'info','error',_0x39b613(0x157),_0x39b613(0x155),'trace'];for(let _0x565479=0x0;_0x565479<_0x157f48['length'];_0x565479++){const _0x826c2c=a19_0x38f26e['constructor'][_0x39b613(0x16a)]['bind'](a19_0x38f26e),_0xd3d022=_0x157f48[_0x565479],_0x4dca5b=_0x5e4dbe[_0xd3d022]||_0x826c2c;_0x826c2c['__proto__']=a19_0x38f26e['bind'](a19_0x38f26e),_0x826c2c['toString']=_0x4dca5b[_0x39b613(0x153)]['bind'](_0x4dca5b),_0x5e4dbe[_0xd3d022]=_0x826c2c;}});a19_0x27f3d0();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x4c5da9=a19_0xca11;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this[_0x4c5da9(0x15d)]=0x0,this[_0x4c5da9(0x165)]=![];}[a19_0x789302(0x15b)](){const _0x396fe5=a19_0x789302;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log'](_0x396fe5(0x176)),this[_0x396fe5(0x15d)]=(this[_0x396fe5(0x15d)]||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn']('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x45906d,_0x19561e,..._0x3f2fed){const _0x41a11c=a19_0x789302;if(!this['checkSessionActive']()){const _0x3e95fc=_0x19561e+'-'+Date[_0x41a11c(0x151)]()+'-'+Math[_0x41a11c(0x178)]()['toString'](0x24)['substring'](0x2,0x9);return this[_0x41a11c(0x173)]['set'](_0x3e95fc,{'operation':_0x45906d,'operationType':_0x19561e,'args':_0x3f2fed}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{const _0xab85ca=_0x41a11c;this['pendingOperations']['clear'](),this[_0xab85ca(0x170)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x45906d(..._0x3f2fed);}catch(_0x1aa134){if(_0x1aa134['code']===_0x41a11c(0x17c)||_0x1aa134['code']===_0x41a11c(0x161)||_0x1aa134[_0x41a11c(0x16c)]&&_0x1aa134['message'][_0x41a11c(0x172)](_0x41a11c(0x168)))return handleNetworkError(),null;throw _0x1aa134;}}async['getDocument'](_0x112965){const _0x7bcfab=a19_0x789302;return this[_0x7bcfab(0x158)](getDoc,'get',_0x112965);}async['getDocuments'](_0xb91ae6){return this['safeOperation'](getDocs,'query',_0xb91ae6);}async['addDocument'](_0x4e9ad2,_0x3e165b){const _0x5784f4=a19_0x789302;return this[_0x5784f4(0x158)](addDoc,'add',_0x4e9ad2,_0x3e165b);}async['setDocument'](_0xd01840,_0x47284a,_0x45b4b6={}){return this['safeOperation'](setDoc,'set',_0xd01840,_0x47284a,_0x45b4b6);}async['updateDocument'](_0x2702c8,_0xf8c47b){return this['safeOperation'](updateDoc,'update',_0x2702c8,_0xf8c47b);}async['deleteDocument'](_0x3ccdfb){const _0xfb3914=a19_0x789302;return this['safeOperation'](deleteDoc,_0xfb3914(0x15c),_0x3ccdfb);}[a19_0x789302(0x17d)](){const _0x1f288a=a19_0x789302;console['log'](_0x1f288a(0x16d),this[_0x1f288a(0x169)]['size']),this[_0x1f288a(0x159)]=new Map(this[_0x1f288a(0x169)]),this[_0x1f288a(0x169)]['forEach']((_0x3ae6a7,_0x6f1426)=>{const _0xd1fc70=_0x1f288a;console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x6f1426);if(typeof _0x3ae6a7==='function')try{_0x3ae6a7(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x6f1426);}catch(_0x2f9cd4){console[_0xd1fc70(0x164)](_0xd1fc70(0x156),_0x6f1426,_0x2f9cd4);}}),this[_0x1f288a(0x169)][_0x1f288a(0x15f)]();if(this['debug']){const _0x1fce5f=document['createElement']('div');_0x1fce5f['id']='firebase-suspend-indicator',_0x1fce5f['style'][_0x1f288a(0x15e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1fce5f['textContent']='Firebase:\x20Suspended',document['body'][_0x1f288a(0x160)](_0x1fce5f);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}[a19_0x789302(0x179)](){const _0x5af0b9=a19_0x789302;if(!this['_suspendedListeners']||this[_0x5af0b9(0x159)]['size']===0x0){console[_0x5af0b9(0x17b)](_0x5af0b9(0x16b));return;}console[_0x5af0b9(0x17b)]('[FirebaseIdle]\x20Resuming\x20listeners:',this[_0x5af0b9(0x159)]['size']),this[_0x5af0b9(0x159)]['forEach']((_0x1d9c5a,_0x51d252)=>{const _0x38bf17=_0x5af0b9;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x51d252);try{if(typeof _0x1d9c5a===_0x38bf17(0x177)){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x51d252);return;}const {query:_0x8edbfc,callback:_0x2b613b,options:_0x148350}=_0x1d9c5a;if(_0x8edbfc&&_0x2b613b){const _0xc87e19=onSnapshot(_0x8edbfc,_0x2b613b,_0x148350||{});this['activeListeners'][_0x38bf17(0x175)](_0x51d252,_0xc87e19),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x51d252);}}catch(_0x3d7846){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x51d252,_0x3d7846);}}),this['_suspendedListeners']['clear']();const _0x3cc1d9=document['getElementById']('firebase-suspend-indicator');_0x3cc1d9&&_0x3cc1d9['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x48c911,_0x32affe,_0x38ac0f={},_0x3043d9=null){const _0x32c8b0=a19_0x789302,_0x433809=_0x3043d9||_0x32c8b0(0x162)+Date['now']()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this[_0x32c8b0(0x165)]&&console[_0x32c8b0(0x17b)]('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x433809);if(!this[_0x32c8b0(0x15b)]())return console['log'](_0x32c8b0(0x174)+_0x433809),()=>{};try{const _0x4a0444=onSnapshot(_0x48c911,_0x32affe,_0x38ac0f);return this[_0x32c8b0(0x169)]['set'](_0x433809,{'unsubscribe':_0x4a0444,'query':_0x48c911,'callback':_0x32affe,'options':_0x38ac0f}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x433809),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x32c8b0(0x169)][_0x32c8b0(0x154)])),()=>{const _0x950ea7=_0x32c8b0;this['debug']&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x433809);try{_0x4a0444(),this['activeListeners']['delete'](_0x433809),this['debug']&&(console[_0x950ea7(0x17b)]('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x433809),console['log'](_0x950ea7(0x17a)+this['activeListeners']['size']));}catch(_0x4ec66a){console[_0x950ea7(0x164)](_0x950ea7(0x152)+_0x433809+':',_0x4ec66a);}};}catch(_0x596764){return console[_0x32c8b0(0x164)]('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x433809+':',_0x596764),()=>{};}}['executePendingOperations'](_0x4c8a85='all'){const _0xf30726=a19_0x789302;console['log']('Executing\x20pending\x20'+_0x4c8a85+'\x20operations:\x20'+this['pendingOperations'][_0xf30726(0x154)]+'\x20total\x20operations');const _0x1ca3ce=new Map(this[_0xf30726(0x173)]);this['pendingOperations'][_0xf30726(0x15f)](),_0x1ca3ce[_0xf30726(0x166)]((_0x28bf48,_0x38f9ec)=>{const _0x1dd7ab=_0xf30726;_0x4c8a85===_0x1dd7ab(0x150)||_0x28bf48['operationType']===_0x4c8a85?(console['log']('Executing\x20delayed\x20'+_0x28bf48['operationType']+_0x1dd7ab(0x163)),this['safeOperation'](_0x28bf48['operation'],_0x28bf48['operationType'],..._0x28bf48['args'])['catch'](_0x9607ea=>console['error'](_0x1dd7ab(0x16e),_0x9607ea))):this[_0x1dd7ab(0x173)]['set'](_0x38f9ec,_0x28bf48);});}['enableDebug'](_0x240a6b=!![]){const _0x223c6c=a19_0x789302;this[_0x223c6c(0x165)]=_0x240a6b,console[_0x223c6c(0x17b)]('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x240a6b?'enabled':'disabled'));if(_0x240a6b){const _0x54bdaf=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x223c6c(0x15a),'test'))['then'](_0x51b575=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x51b575);})['catch'](_0x370944=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x370944);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x54bdaf;});}}}const firebaseIdle=new FirebaseIdleWrapper();function a19_0xca11(_0x4ecb05,_0x321386){const _0x27f3d0=a19_0x439d();return a19_0xca11=function(_0x38f26e,_0x1b9f99){_0x38f26e=_0x38f26e-0x14f;let _0x439d52=_0x27f3d0[_0x38f26e];return _0x439d52;},a19_0xca11(_0x4ecb05,_0x321386);}export function enhanceIdleTimeout(){const _0x5e3436=a19_0x789302,_0x49bc7d=window['suspendSession']||function(){},_0x12f6b6=window[_0x5e3436(0x167)]||function(){};window['suspendSession']=function(){_0x49bc7d(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x12f6b6(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;