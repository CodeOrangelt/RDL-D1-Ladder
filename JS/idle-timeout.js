const a20_0x453736=a20_0x2682;import a20_0x2c0d43,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x35049d=a20_0x2682;if(document[_0x35049d(0x13d)](_0x35049d(0x15c)))return;const _0x59480f=document['createElement']('div');_0x59480f['id']='idle-overlay',_0x59480f['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x26be38=document[_0x35049d(0x163)](_0x35049d(0x14c));_0x26be38['style']['cssText']=_0x35049d(0x165);const _0x5696bc=document[_0x35049d(0x163)]('h2');_0x5696bc[_0x35049d(0x14f)]='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x5696bc['style'][_0x35049d(0x156)]='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x1e1fac=document['createElement']('p');_0x1e1fac['textContent']=_0x35049d(0x136),_0x1e1fac[_0x35049d(0x138)][_0x35049d(0x156)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x2e87c8=document['createElement']('button');_0x2e87c8['id']='resume-session-btn',_0x2e87c8[_0x35049d(0x14f)]='Return\x20to\x20Website',_0x2e87c8['style'][_0x35049d(0x156)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x2e87c8[_0x35049d(0x15b)]=function(){this['style']['backgroundColor']='#3da05f';},_0x2e87c8['onmouseout']=function(){const _0x5057ae=_0x35049d;this['style'][_0x5057ae(0x146)]='#50C878';},_0x26be38['appendChild'](_0x5696bc),_0x26be38['appendChild'](_0x1e1fac),_0x26be38['appendChild'](_0x2e87c8),_0x59480f['appendChild'](_0x26be38),document['body']['appendChild'](_0x59480f),_0x2e87c8['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x2477e8=a20_0x2682;if(document[_0x2477e8(0x13d)]('network-error-overlay'))return;const _0x13267e=document['createElement']('div');_0x13267e['id']='network-error-overlay',_0x13267e['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x1adbd3=document['createElement']('div');_0x1adbd3['style'][_0x2477e8(0x156)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x5219bc=document[_0x2477e8(0x163)]('h2');_0x5219bc[_0x2477e8(0x14f)]='Connection\x20Error',_0x5219bc['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x5e1b6c=document['createElement']('p');_0x5e1b6c['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x5e1b6c['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x2948fb=document['createElement']('button');_0x2948fb['id']='retry-connection-btn',_0x2948fb[_0x2477e8(0x14f)]='Retry\x20Connection',_0x2948fb['style'][_0x2477e8(0x156)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x4362dc=document['createElement']('button');_0x4362dc['id']='reload-page-btn',_0x4362dc['textContent']='Reload\x20Page',_0x4362dc['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x4ac89e=document[_0x2477e8(0x163)]('div');_0x4ac89e['style']['cssText']=_0x2477e8(0x158),_0x4ac89e['appendChild'](_0x2948fb),_0x4ac89e[_0x2477e8(0x13b)](_0x4362dc),_0x1adbd3['appendChild'](_0x5219bc),_0x1adbd3['appendChild'](_0x5e1b6c),_0x1adbd3['appendChild'](_0x4ac89e),_0x13267e[_0x2477e8(0x13b)](_0x1adbd3),document['body']['appendChild'](_0x13267e),_0x2948fb['addEventListener']('click',retryConnection),_0x4362dc[_0x2477e8(0x141)]('click',()=>window['location']['reload']());}function a20_0x4cad(){const _0x332b7e=['flex','RDL_SESSION_SUSPENDED','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','RDL_LAST_ACTIVITY','style','catch','resumeAllListeners','appendChild','opacity','getElementById','system','size','info','addEventListener','RDL_NETWORK_ERROR','blockedOperations','mousedown','bind','backgroundColor','forEach','toString','from','touchstart','constructor','div','location','log','textContent','Failed\x20to\x20test\x20connection:','error','preventDefault','display','activeListeners','Connection\x20test\x20failed:','cssText','now','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','return\x20(function()\x20','prototype','onmouseover','idle-overlay','code','Pending\x20operations:','unavailable','suspendAllListeners','loading','DOMContentLoaded','createElement','includes','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','mousemove'];a20_0x4cad=function(){return _0x332b7e;};return a20_0x4cad();}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x3faddb=a20_0x2682;clearTimeout(idleTimer);const _0x4d70f1=document['getElementById']('network-error-overlay');_0x4d70f1&&(_0x4d70f1['style'][_0x3faddb(0x153)]='flex'),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a20_0x2c0d43[_0x3faddb(0x160)]();}function a20_0x2682(_0x14d033,_0x2bcbc0){const _0x30c2bf=a20_0x4cad();return a20_0x2682=function(_0x40d88f,_0x4ea692){_0x40d88f=_0x40d88f-0x134;let _0x4cad7b=_0x30c2bf[_0x40d88f];return _0x4cad7b;},a20_0x2682(_0x14d033,_0x2bcbc0);}function retryConnection(){const _0x54e94a=a20_0x2682;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x311864=document['querySelector']('#network-error-overlay\x20p');_0x311864&&(_0x311864['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0xbb7da8=document[_0x54e94a(0x13d)]('retry-connection-btn');_0xbb7da8&&(_0xbb7da8['disabled']=!![],_0xbb7da8['style'][_0x54e94a(0x13c)]='0.5',_0xbb7da8['style']['cursor']='not-allowed');return;}const _0x2d7401=document['getElementById']('network-error-overlay');_0x2d7401&&(_0x2d7401['style'][_0x54e94a(0x153)]='none');window[_0x54e94a(0x142)]=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x4808f2}=window;if(_0x4808f2){const _0x1a26d5=_0x4808f2['collection'](_0x54e94a(0x13e));_0x4808f2['getDocs'](_0x1a26d5)[_0x54e94a(0x139)](_0x200828=>{const _0x19e3db=_0x54e94a;console[_0x19e3db(0x151)](_0x19e3db(0x155),_0x200828),handleNetworkError();});}}catch(_0x673d4c){console['error'](_0x54e94a(0x150),_0x673d4c),handleNetworkError();}a20_0x2c0d43['resumeAllListeners']();}function suspendSession(){const _0x286cbd=a20_0x2682;isSessionSuspended=!![];const _0x5e76ef=document['getElementById']('idle-overlay');_0x5e76ef&&(_0x5e76ef['style']['display']=_0x286cbd(0x134)),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x286cbd(0x135)]=!![],a20_0x2c0d43[_0x286cbd(0x160)]();}function resumeSession(){const _0x1a7686=a20_0x2682;isSessionSuspended=![],window[_0x1a7686(0x135)]=![];const _0x2ec016=document[_0x1a7686(0x13d)](_0x1a7686(0x15c));_0x2ec016&&(_0x2ec016['style']['display']='none'),console[_0x1a7686(0x14e)]('Session\x20resumed'),resetIdleTimer(),a20_0x2c0d43[_0x1a7686(0x13a)](),idleTimer&&Date['now']()-(window[_0x1a7686(0x137)]||0x0)>IDLE_TIMEOUT*0x2&&(console[_0x1a7686(0x14e)]('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window[_0x1a7686(0x14d)]['reload']());}function initIdleTimeout(){const _0x2d7e37=a20_0x2682,_0x40b88c=(function(){let _0x5e61fc=!![];return function(_0x116c82,_0x5d55f5){const _0x222753=_0x5e61fc?function(){if(_0x5d55f5){const _0x2e9fe8=_0x5d55f5['apply'](_0x116c82,arguments);return _0x5d55f5=null,_0x2e9fe8;}}:function(){};return _0x5e61fc=![],_0x222753;};}()),_0x51b76c=_0x40b88c(this,function(){const _0x51bde6=a20_0x2682,_0x2cd47b=function(){const _0x15a202=a20_0x2682;let _0x3f0951;try{_0x3f0951=Function(_0x15a202(0x159)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1ec2fb){_0x3f0951=window;}return _0x3f0951;},_0x3e4cea=_0x2cd47b(),_0x23985f=_0x3e4cea['console']=_0x3e4cea['console']||{},_0x58e04c=['log','warn',_0x51bde6(0x140),_0x51bde6(0x151),'exception','table','trace'];for(let _0x52fdf0=0x0;_0x52fdf0<_0x58e04c['length'];_0x52fdf0++){const _0x21c651=_0x40b88c[_0x51bde6(0x14b)][_0x51bde6(0x15a)]['bind'](_0x40b88c),_0x22af4c=_0x58e04c[_0x52fdf0],_0x592cd1=_0x23985f[_0x22af4c]||_0x21c651;_0x21c651['__proto__']=_0x40b88c['bind'](_0x40b88c),_0x21c651['toString']=_0x592cd1[_0x51bde6(0x148)][_0x51bde6(0x145)](_0x592cd1),_0x23985f[_0x22af4c]=_0x21c651;}});_0x51b76c(),createIdleOverlay();const _0x5c2ee5=[_0x2d7e37(0x144),_0x2d7e37(0x166),'keypress','scroll',_0x2d7e37(0x14a),'click'];_0x5c2ee5[_0x2d7e37(0x147)](_0x360abf=>{document['addEventListener'](_0x360abf,()=>{const _0x3e054c=a20_0x2682;window['RDL_LAST_ACTIVITY']=Date[_0x3e054c(0x157)](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x5be7b7){const _0x4edf83=_0x2d7e37;_0x5be7b7[_0x4edf83(0x151)]&&(_0x5be7b7[_0x4edf83(0x151)]['message']&&_0x5be7b7[_0x4edf83(0x151)]['message']['includes']('network')||_0x5be7b7['error'][_0x4edf83(0x15d)]&&(_0x5be7b7['error']['code']===_0x4edf83(0x15f)||_0x5be7b7['error']['code']==='resource-exhausted'||_0x5be7b7[_0x4edf83(0x151)][_0x4edf83(0x15d)][_0x4edf83(0x164)]('network')))&&(handleNetworkError(),_0x5be7b7[_0x4edf83(0x152)]());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x1c5524=_0x2d7e37;return console['log']('Session\x20suspended:',window[_0x1c5524(0x135)]),console['log']('Network\x20error:',window[_0x1c5524(0x142)]),console['log']('Active\x20listeners:',a20_0x2c0d43[_0x1c5524(0x154)][_0x1c5524(0x13f)]),console['log'](_0x1c5524(0x15e),a20_0x2c0d43['pendingOperations'][_0x1c5524(0x13f)]),console['log']('Blocked\x20operations:',a20_0x2c0d43['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window[_0x1c5524(0x142)],'activeListeners':Array['from'](a20_0x2c0d43['activeListeners']['keys']()),'pendingOperations':Array[_0x1c5524(0x149)](a20_0x2c0d43['pendingOperations']['keys']()),'blockedCount':a20_0x2c0d43[_0x1c5524(0x143)]||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']===a20_0x453736(0x161)?document[a20_0x453736(0x141)](a20_0x453736(0x162),initIdleTimeout):initIdleTimeout();