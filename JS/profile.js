function a45_0x383a(){const _0xeed431=['exception','bind','toString','forEach','profiles','{}.constructor(\x22return\x20this\x22)(\x20)','target','currentUser','nickname','loadProfile','addEventListener','textContent','getElementById','trace','value','files','loadPlayerStats','readAsDataURL','setupEventListeners','favorite-weapon','Error\x20loading\x20profile:','apply','pfpUrl','toFixed','loserUsername','change','motto','log','error','pfpPreview','onload','uid','loserScore','profile-pictures/','pfpInput'];a45_0x383a=function(){return _0xeed431;};return a45_0x383a();}const a45_0x2e0830=a45_0x2723,a45_0x166ff6=(function(){let _0x1e1a0c=!![];return function(_0x4ef992,_0x89fa79){const _0x4490c5=_0x1e1a0c?function(){const _0x25b986=a45_0x2723;if(_0x89fa79){const _0x41b1b7=_0x89fa79[_0x25b986(0x174)](_0x4ef992,arguments);return _0x89fa79=null,_0x41b1b7;}}:function(){};return _0x1e1a0c=![],_0x4490c5;};}()),a45_0x5bd8a7=a45_0x166ff6(this,function(){const _0x2c84c6=a45_0x2723,_0x41e3f5=function(){const _0x264487=a45_0x2723;let _0x209287;try{_0x209287=Function('return\x20(function()\x20'+_0x264487(0x164)+');')();}catch(_0x3eb1fb){_0x209287=window;}return _0x209287;},_0x3c4986=_0x41e3f5(),_0x195c40=_0x3c4986['console']=_0x3c4986['console']||{},_0x26806c=[_0x2c84c6(0x17a),'warn','info','error',_0x2c84c6(0x15f),'table',_0x2c84c6(0x16c)];for(let _0x584a36=0x0;_0x584a36<_0x26806c['length'];_0x584a36++){const _0x477f23=a45_0x166ff6['constructor']['prototype'][_0x2c84c6(0x160)](a45_0x166ff6),_0x4ab31a=_0x26806c[_0x584a36],_0x2171aa=_0x195c40[_0x4ab31a]||_0x477f23;_0x477f23['__proto__']=a45_0x166ff6['bind'](a45_0x166ff6),_0x477f23['toString']=_0x2171aa[_0x2c84c6(0x161)][_0x2c84c6(0x160)](_0x2171aa),_0x195c40[_0x4ab31a]=_0x477f23;}});a45_0x5bd8a7();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a45_0x2723(_0x5287de,_0x13a08e){const _0x5bd8a7=a45_0x383a();return a45_0x2723=function(_0x166ff6,_0x50077c){_0x166ff6=_0x166ff6-0x15f;let _0x383a90=_0x5bd8a7[_0x166ff6];return _0x383a90;},a45_0x2723(_0x5287de,_0x13a08e);}import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x1dff5b=a45_0x2723;this['form']=document['getElementById']('profile-form'),this[_0x1dff5b(0x181)]=document[_0x1dff5b(0x16b)]('pfp-upload'),this['pfpPreview']=document[_0x1dff5b(0x16b)]('profile-preview'),this['statsContainer']=document['getElementById']('player-stats'),this[_0x1dff5b(0x171)](),this['loadProfile']();}['setupEventListeners'](){const _0x3e9faf=a45_0x2723;this['pfpInput']['addEventListener'](_0x3e9faf(0x178),_0x243d09=>this['handleImageUpload'](_0x243d09)),this['form'][_0x3e9faf(0x169)]('submit',_0xbf44c7=>this['handleSubmit'](_0xbf44c7));}async['handleImageUpload'](_0x417e59){const _0x29c5ee=a45_0x2723,_0x42e48f=_0x417e59['target'][_0x29c5ee(0x16e)][0x0];if(_0x42e48f){const _0x4f6caf=new FileReader();_0x4f6caf[_0x29c5ee(0x17d)]=_0x339b4b=>{const _0x6e0ad9=_0x29c5ee;this['pfpPreview']['src']=_0x339b4b[_0x6e0ad9(0x165)]['result'];},_0x4f6caf[_0x29c5ee(0x170)](_0x42e48f);}}async['handleSubmit'](_0x52f03a){const _0x110058=a45_0x2723;_0x52f03a['preventDefault']();const _0x3a866c=auth[_0x110058(0x166)];if(!_0x3a866c){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x32e875=new FormData(this['form']),_0x335e42={'nickname':_0x32e875['get'](_0x110058(0x167)),'motto':_0x32e875['get'](_0x110058(0x179)),'favoriteMap':_0x32e875['get']('favorite-map'),'favoriteWeapon':_0x32e875['get'](_0x110058(0x172)),'updatedAt':new Date()['toISOString']()},_0x5adc54=this['pfpInput'][_0x110058(0x16e)][0x0];if(_0x5adc54){const _0x5610d1=ref(storage,_0x110058(0x180)+_0x3a866c[_0x110058(0x17e)]);await uploadBytes(_0x5610d1,_0x5adc54),_0x335e42['pfpUrl']=await getDownloadURL(_0x5610d1);}await setDoc(doc(db,'profiles',_0x3a866c['uid']),_0x335e42),alert('Profile\x20saved\x20successfully!');}catch(_0x559b14){console['error']('Error\x20saving\x20profile:',_0x559b14),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async[a45_0x2e0830(0x168)](){onAuthStateChanged(auth,async _0x19a3ca=>{const _0x2dfdbe=a45_0x2723;if(_0x19a3ca)try{const _0x2c55e1=await getDoc(doc(db,_0x2dfdbe(0x163),_0x19a3ca['uid']));if(_0x2c55e1['exists']()){const _0x216cf5=_0x2c55e1['data']();document['getElementById']('nickname')[_0x2dfdbe(0x16d)]=_0x216cf5['nickname']||'',document['getElementById']('motto')['value']=_0x216cf5['motto']||'',document[_0x2dfdbe(0x16b)]('favorite-map')[_0x2dfdbe(0x16d)]=_0x216cf5['favoriteMap']||'',document['getElementById']('favorite-weapon')['value']=_0x216cf5['favoriteWeapon']||'',_0x216cf5[_0x2dfdbe(0x175)]&&(this[_0x2dfdbe(0x17c)]['src']=_0x216cf5['pfpUrl']),await this[_0x2dfdbe(0x16f)](_0x216cf5['nickname']);}}catch(_0x33c7ae){console['error'](_0x2dfdbe(0x173),_0x33c7ae);}});}async['loadPlayerStats'](_0x46c11b){const _0x298fb5=a45_0x2e0830;if(!_0x46c11b)return;try{const _0x2ea325=collection(db,'approvedMatches'),[_0x3d5d53,_0x1f9170]=await Promise['all']([getDocs(query(_0x2ea325,where('winnerUsername','==',_0x46c11b))),getDocs(query(_0x2ea325,where(_0x298fb5(0x177),'==',_0x46c11b)))]),_0x3f095a=_0x3d5d53['size'],_0x4b8205=_0x1f9170['size'],_0x4f0060=_0x3f095a+_0x4b8205;let _0x1ed671=0x0,_0x2eeba2=0x0;_0x3d5d53[_0x298fb5(0x162)](_0x126492=>{const _0x5e22d5=_0x298fb5,_0x55579d=_0x126492['data']();if(_0x55579d['winnerScore'])_0x1ed671+=parseInt(_0x55579d['winnerScore']);if(_0x55579d['loserScore'])_0x2eeba2+=parseInt(_0x55579d[_0x5e22d5(0x17f)]);}),_0x1f9170['forEach'](_0xf633eb=>{const _0x56263f=_0xf633eb['data']();if(_0x56263f['loserScore'])_0x1ed671+=parseInt(_0x56263f['loserScore']);if(_0x56263f['winnerScore'])_0x2eeba2+=parseInt(_0x56263f['winnerScore']);});const _0x360244=_0x2eeba2===0x0?_0x1ed671[_0x298fb5(0x176)](0x2):(_0x1ed671/_0x2eeba2)[_0x298fb5(0x176)](0x2),_0x2e4096=_0x4f0060===0x0?'0':(_0x3f095a/_0x4f0060*0x64)['toFixed'](0x1);console['log']('Stats\x20calculated:',{'totalMatches':_0x4f0060,'wins':_0x3f095a,'losses':_0x4b8205,'totalKills':_0x1ed671,'totalDeaths':_0x2eeba2,'kdRatio':_0x360244,'winRate':_0x2e4096}),document[_0x298fb5(0x16b)]('stats-matches')[_0x298fb5(0x16a)]=_0x4f0060,document['getElementById']('stats-wins')['textContent']=_0x3f095a,document['getElementById']('stats-losses')[_0x298fb5(0x16a)]=_0x4b8205,document['getElementById']('stats-kd')['textContent']=_0x360244,document[_0x298fb5(0x16b)]('stats-winrate')['textContent']=_0x2e4096+'%';}catch(_0xb96f51){console[_0x298fb5(0x17b)]('Error\x20loading\x20player\x20stats:',_0xb96f51),['matches','wins','losses','kd','winrate'][_0x298fb5(0x162)](_0x5bf7ee=>{const _0x44cf67=_0x298fb5;document[_0x44cf67(0x16b)]('stats-'+_0x5bf7ee)['textContent']='-';});}}}document[a45_0x2e0830(0x169)]('DOMContentLoaded',()=>{new ProfileManager();});