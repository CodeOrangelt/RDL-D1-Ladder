const a45_0xb0f9c8=a45_0x1a81,a45_0xe3612e=(function(){let _0x19dc0c=!![];return function(_0x29ae89,_0x2e8ecd){const _0x439bab=_0x19dc0c?function(){if(_0x2e8ecd){const _0x538a82=_0x2e8ecd['apply'](_0x29ae89,arguments);return _0x2e8ecd=null,_0x538a82;}}:function(){};return _0x19dc0c=![],_0x439bab;};}()),a45_0x51ddfc=a45_0xe3612e(this,function(){const _0xc72075=a45_0x1a81;let _0x349257;try{const _0x34e036=Function('return\x20(function()\x20'+_0xc72075(0x19c)+');');_0x349257=_0x34e036();}catch(_0x458a58){_0x349257=window;}const _0x92ec8d=_0x349257['console']=_0x349257['console']||{},_0x564839=['log','warn','info','error','exception',_0xc72075(0x1aa),'trace'];for(let _0x596cdd=0x0;_0x596cdd<_0x564839['length'];_0x596cdd++){const _0x1df51c=a45_0xe3612e['constructor'][_0xc72075(0x199)]['bind'](a45_0xe3612e),_0x366f50=_0x564839[_0x596cdd],_0x2a5496=_0x92ec8d[_0x366f50]||_0x1df51c;_0x1df51c['__proto__']=a45_0xe3612e['bind'](a45_0xe3612e),_0x1df51c['toString']=_0x2a5496[_0xc72075(0x18b)]['bind'](_0x2a5496),_0x92ec8d[_0x366f50]=_0x1df51c;}});a45_0x51ddfc();import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a45_0x17b2(){const _0x302678=['uid','src','data','profile-pictures/','Profile\x20saved\x20successfully!','form','toString','stats-','winrate','textContent','profiles','winnerScore','log','DOMContentLoaded','pfp-upload','forEach','stats-winrate','loadProfile','handleImageUpload','favoriteMap','prototype','value','favoriteWeapon','{}.constructor(\x22return\x20this\x22)(\x20)','size','player-stats','losses','submit','stats-kd','toFixed','pfpUrl','favorite-map','statsContainer','getElementById','winnerUsername','error','Error\x20loading\x20profile:','table'];a45_0x17b2=function(){return _0x302678;};return a45_0x17b2();}import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';function a45_0x1a81(_0x201151,_0x1d4e80){const _0x51ddfc=a45_0x17b2();return a45_0x1a81=function(_0xe3612e,_0x2bb715){_0xe3612e=_0xe3612e-0x185;let _0x17b2ac=_0x51ddfc[_0xe3612e];return _0x17b2ac;},a45_0x1a81(_0x201151,_0x1d4e80);}import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);class ProfileManager{constructor(){const _0x14851f=a45_0x1a81;this['form']=document[_0x14851f(0x1a6)]('profile-form'),this['pfpInput']=document[_0x14851f(0x1a6)](_0x14851f(0x193)),this['pfpPreview']=document[_0x14851f(0x1a6)]('profile-preview'),this[_0x14851f(0x1a5)]=document['getElementById'](_0x14851f(0x19e)),this['setupEventListeners'](),this['loadProfile']();}['setupEventListeners'](){const _0x5495d1=a45_0x1a81;this['pfpInput']['addEventListener']('change',_0x51bb4b=>this[_0x5495d1(0x197)](_0x51bb4b)),this[_0x5495d1(0x18a)]['addEventListener'](_0x5495d1(0x1a0),_0x10dff9=>this['handleSubmit'](_0x10dff9));}async['handleImageUpload'](_0xf81a33){const _0x45167d=_0xf81a33['target']['files'][0x0];if(_0x45167d){const _0x4cacb1=new FileReader();_0x4cacb1['onload']=_0x12ce76=>{this['pfpPreview']['src']=_0x12ce76['target']['result'];},_0x4cacb1['readAsDataURL'](_0x45167d);}}async['handleSubmit'](_0x1bb26a){const _0x473df2=a45_0x1a81;_0x1bb26a['preventDefault']();const _0x591f54=auth['currentUser'];if(!_0x591f54){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const _0x5012f7=new FormData(this[_0x473df2(0x18a)]),_0xe7e224={'nickname':_0x5012f7['get']('nickname'),'motto':_0x5012f7['get']('motto'),'favoriteMap':_0x5012f7['get'](_0x473df2(0x1a4)),'favoriteWeapon':_0x5012f7['get']('favorite-weapon'),'updatedAt':new Date()['toISOString']()},_0x38a00e=this['pfpInput']['files'][0x0];if(_0x38a00e){const _0x2ef77d=ref(storage,_0x473df2(0x188)+_0x591f54['uid']);await uploadBytes(_0x2ef77d,_0x38a00e),_0xe7e224['pfpUrl']=await getDownloadURL(_0x2ef77d);}await setDoc(doc(db,_0x473df2(0x18f),_0x591f54[_0x473df2(0x185)]),_0xe7e224),alert(_0x473df2(0x189));}catch(_0x520f19){console[_0x473df2(0x1a8)]('Error\x20saving\x20profile:',_0x520f19),alert('Error\x20saving\x20profile.\x20Please\x20try\x20again.');}}async[a45_0xb0f9c8(0x196)](){onAuthStateChanged(auth,async _0x1e04c4=>{const _0xc9cbcd=a45_0x1a81;if(_0x1e04c4)try{const _0x253f3e=await getDoc(doc(db,_0xc9cbcd(0x18f),_0x1e04c4['uid']));if(_0x253f3e['exists']()){const _0x24f1c5=_0x253f3e[_0xc9cbcd(0x187)]();document['getElementById']('nickname')['value']=_0x24f1c5['nickname']||'',document['getElementById']('motto')['value']=_0x24f1c5['motto']||'',document['getElementById']('favorite-map')[_0xc9cbcd(0x19a)]=_0x24f1c5[_0xc9cbcd(0x198)]||'',document['getElementById']('favorite-weapon')['value']=_0x24f1c5[_0xc9cbcd(0x19b)]||'',_0x24f1c5['pfpUrl']&&(this['pfpPreview'][_0xc9cbcd(0x186)]=_0x24f1c5[_0xc9cbcd(0x1a3)]),await this['loadPlayerStats'](_0x24f1c5['nickname']);}}catch(_0x437f83){console['error'](_0xc9cbcd(0x1a9),_0x437f83);}});}async['loadPlayerStats'](_0xb94a35){const _0x5e4e07=a45_0xb0f9c8;if(!_0xb94a35)return;try{const _0x3ca374=collection(db,'approvedMatches'),[_0x2a725f,_0x11b137]=await Promise['all']([getDocs(query(_0x3ca374,where(_0x5e4e07(0x1a7),'==',_0xb94a35))),getDocs(query(_0x3ca374,where('loserUsername','==',_0xb94a35)))]),_0x1743b9=_0x2a725f[_0x5e4e07(0x19d)],_0x57bd9b=_0x11b137['size'],_0x2d328b=_0x1743b9+_0x57bd9b;let _0x6b1115=0x0,_0x2ed9a4=0x0;_0x2a725f[_0x5e4e07(0x194)](_0x4855fb=>{const _0x5dbda5=_0x4855fb['data']();if(_0x5dbda5['winnerScore'])_0x6b1115+=parseInt(_0x5dbda5['winnerScore']);if(_0x5dbda5['loserScore'])_0x2ed9a4+=parseInt(_0x5dbda5['loserScore']);}),_0x11b137['forEach'](_0x43d1fb=>{const _0x208a33=_0x5e4e07,_0x38dc4f=_0x43d1fb[_0x208a33(0x187)]();if(_0x38dc4f['loserScore'])_0x6b1115+=parseInt(_0x38dc4f['loserScore']);if(_0x38dc4f[_0x208a33(0x190)])_0x2ed9a4+=parseInt(_0x38dc4f[_0x208a33(0x190)]);});const _0x484f0e=_0x2ed9a4===0x0?_0x6b1115['toFixed'](0x2):(_0x6b1115/_0x2ed9a4)[_0x5e4e07(0x1a2)](0x2),_0x2a8867=_0x2d328b===0x0?'0':(_0x1743b9/_0x2d328b*0x64)[_0x5e4e07(0x1a2)](0x1);console[_0x5e4e07(0x191)]('Stats\x20calculated:',{'totalMatches':_0x2d328b,'wins':_0x1743b9,'losses':_0x57bd9b,'totalKills':_0x6b1115,'totalDeaths':_0x2ed9a4,'kdRatio':_0x484f0e,'winRate':_0x2a8867}),document['getElementById']('stats-matches')['textContent']=_0x2d328b,document[_0x5e4e07(0x1a6)]('stats-wins')['textContent']=_0x1743b9,document[_0x5e4e07(0x1a6)]('stats-losses')[_0x5e4e07(0x18e)]=_0x57bd9b,document['getElementById'](_0x5e4e07(0x1a1))['textContent']=_0x484f0e,document['getElementById'](_0x5e4e07(0x195))['textContent']=_0x2a8867+'%';}catch(_0x158ef5){console['error']('Error\x20loading\x20player\x20stats:',_0x158ef5),['matches','wins',_0x5e4e07(0x19f),'kd',_0x5e4e07(0x18d)][_0x5e4e07(0x194)](_0x318dc=>{const _0x25ffc8=_0x5e4e07;document['getElementById'](_0x25ffc8(0x18c)+_0x318dc)[_0x25ffc8(0x18e)]='-';});}}}document['addEventListener'](a45_0xb0f9c8(0x192),()=>{new ProfileManager();});