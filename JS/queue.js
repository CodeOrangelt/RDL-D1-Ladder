const a43_0x36978f=(function(){let _0x419e4d=!![];return function(_0x1e14df,_0x212bc2){const _0x29b948=_0x419e4d?function(){if(_0x212bc2){const _0x326b52=_0x212bc2['apply'](_0x1e14df,arguments);return _0x212bc2=null,_0x326b52;}}:function(){};return _0x419e4d=![],_0x29b948;};}()),a43_0x1936e5=a43_0x36978f(this,function(){const _0xb6e00c=a43_0x2860;let _0x573921;try{const _0x3aed16=Function('return\x20(function()\x20'+_0xb6e00c(0x194)+');');_0x573921=_0x3aed16();}catch(_0x41b37e){_0x573921=window;}const _0x1f7f46=_0x573921[_0xb6e00c(0x191)]=_0x573921['console']||{},_0x2707d9=['log','warn','info','error','exception','table',_0xb6e00c(0x190)];for(let _0x1376d4=0x0;_0x1376d4<_0x2707d9['length'];_0x1376d4++){const _0x51a837=a43_0x36978f['constructor'][_0xb6e00c(0x18e)]['bind'](a43_0x36978f),_0x2e5b82=_0x2707d9[_0x1376d4],_0x393f17=_0x1f7f46[_0x2e5b82]||_0x51a837;_0x51a837['__proto__']=a43_0x36978f['bind'](a43_0x36978f),_0x51a837['toString']=_0x393f17[_0xb6e00c(0x195)][_0xb6e00c(0x19a)](_0x393f17),_0x1f7f46[_0x2e5b82]=_0x51a837;}});a43_0x1936e5();import{db}from'./firebase-config.js';function a43_0x2ed2(){const _0x1ceea7=['prototype','username','trace','console','toDate','lastUpdated','{}.constructor(\x22return\x20this\x22)(\x20)','toString','error','Error\x20in\x20queue\x20listener:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','data','bind','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20'];a43_0x2ed2=function(){return _0x1ceea7;};return a43_0x2ed2();}import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x20cc48){const _0x2de054=a43_0x2860,_0x3d478c=document['getElementById']('queue-container');if(!_0x3d478c)return;if(_0x20cc48['length']===0x0){_0x3d478c['style']['display']='none';return;}_0x3d478c['style']['display']='block';let _0x1c10dc=_0x2de054(0x19b);_0x20cc48['forEach'](_0x1040d2=>{const _0x5b04f6=_0x2de054;_0x1c10dc+=_0x5b04f6(0x198)+(_0x1040d2[_0x5b04f6(0x18f)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x1040d2[_0x5b04f6(0x193)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x1c10dc+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x3d478c['innerHTML']=_0x1c10dc;}function formatQueueTime(_0x22804c){const _0x452d8d=a43_0x2860;if(!_0x22804c)return'Just\x20now';const _0x3ad1d2=_0x22804c['toDate']?_0x22804c[_0x452d8d(0x192)]():new Date(_0x22804c),_0x5470c6=new Date(),_0x240ac8=Math['floor']((_0x5470c6-_0x3ad1d2)/0xea60);if(_0x240ac8<0x1)return'Just\x20now';return _0x240ac8+'m\x20in\x20queue';}async function checkQueueTimeout(_0x25990e){if(!_0x25990e['lastUpdated'])return;const _0x272ac4=_0x25990e['lastUpdated']['toDate']?_0x25990e['lastUpdated']['toDate']():new Date(_0x25990e['lastUpdated']),_0x30344d=new Date(),_0x2f717d=Math['floor']((_0x30344d-_0x272ac4)/0xea60);if(_0x2f717d>=0x1e)try{const _0x23990c=doc(db,'readyPlayers',_0x25990e['id']);await updateDoc(_0x23990c,{'isReady':![]});}catch(_0x5b079b){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x5b079b);}}function a43_0x2860(_0x50680e,_0x34b198){const _0x1936e5=a43_0x2ed2();return a43_0x2860=function(_0x36978f,_0x1cb6fa){_0x36978f=_0x36978f-0x18e;let _0x2ed27f=_0x1936e5[_0x36978f];return _0x2ed27f;},a43_0x2860(_0x50680e,_0x34b198);}const unsubscribe=onSnapshot(readyPlayersRef,_0xa60e7e=>{const _0x381efe=[];_0xa60e7e['forEach'](_0x8519f0=>{const _0xef9a0b=a43_0x2860,_0x54133d=_0x8519f0[_0xef9a0b(0x199)]();if(_0x54133d['isReady']===!![]){const _0x1f705d={'id':_0x8519f0['id'],'username':_0x54133d[_0xef9a0b(0x18f)],'lastUpdated':_0x54133d['lastUpdated']||new Date()};_0x381efe['push'](_0x1f705d),checkQueueTimeout(_0x1f705d);}}),updateQueueDisplay(_0x381efe);},_0x35cdf9=>{const _0x4d82ee=a43_0x2860;console[_0x4d82ee(0x196)](_0x4d82ee(0x197),_0x35cdf9);});window['addEventListener']('unload',()=>{unsubscribe();});