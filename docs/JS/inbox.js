const a0_0xcd4226=a0_0x1e25;(function(_0x573220,_0x290096){const _0x294c96=a0_0x1e25,_0x35034b=_0x573220();while(!![]){try{const _0xc87cbb=parseInt(_0x294c96(0xf6))/0x1*(parseInt(_0x294c96(0xce))/0x2)+parseInt(_0x294c96(0xec))/0x3*(-parseInt(_0x294c96(0xee))/0x4)+parseInt(_0x294c96(0xb8))/0x5*(-parseInt(_0x294c96(0xbb))/0x6)+-parseInt(_0x294c96(0x104))/0x7+-parseInt(_0x294c96(0xfe))/0x8*(-parseInt(_0x294c96(0xe7))/0x9)+parseInt(_0x294c96(0xf9))/0xa+-parseInt(_0x294c96(0xdc))/0xb*(parseInt(_0x294c96(0xc7))/0xc);if(_0xc87cbb===_0x290096)break;else _0x35034b['push'](_0x35034b['shift']());}catch(_0x42fd86){_0x35034b['push'](_0x35034b['shift']());}}}(a0_0x5ae8,0x74ef2));const a0_0x5ebed2=(function(){let _0x3bf512=!![];return function(_0x4abec9,_0x3c3a3c){const _0x5b4d85=_0x3bf512?function(){if(_0x3c3a3c){const _0x1ed18f=_0x3c3a3c['apply'](_0x4abec9,arguments);return _0x3c3a3c=null,_0x1ed18f;}}:function(){};return _0x3bf512=![],_0x5b4d85;};}()),a0_0x2a3066=a0_0x5ebed2(this,function(){const _0x117959=a0_0x1e25,_0x3a2ed2=function(){let _0x44b75a;try{_0x44b75a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3ff0c6){_0x44b75a=window;}return _0x44b75a;},_0x11058f=_0x3a2ed2(),_0x43b85c=_0x11058f[_0x117959(0xd0)]=_0x11058f[_0x117959(0xd0)]||{},_0x4c5e73=['log',_0x117959(0xc0),_0x117959(0xbd),'error',_0x117959(0xd3),_0x117959(0xc9),'trace'];for(let _0x3911c9=0x0;_0x3911c9<_0x4c5e73['length'];_0x3911c9++){const _0x43edef=a0_0x5ebed2['constructor']['prototype'][_0x117959(0xe6)](a0_0x5ebed2),_0x46a604=_0x4c5e73[_0x3911c9],_0x5a4c37=_0x43b85c[_0x46a604]||_0x43edef;_0x43edef['__proto__']=a0_0x5ebed2['bind'](a0_0x5ebed2),_0x43edef['toString']=_0x5a4c37['toString']['bind'](_0x5a4c37),_0x43b85c[_0x46a604]=_0x43edef;}});a0_0x2a3066();function a0_0x1e25(_0x4bb97b,_0x18c2f7){const _0x58b2e9=a0_0x5ae8();return a0_0x1e25=function(_0x2a3066,_0x5ebed2){_0x2a3066=_0x2a3066-0xb6;let _0x3318c3=_0x58b2e9[_0x2a3066];return _0x3318c3;},a0_0x1e25(_0x4bb97b,_0x18c2f7);}import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0x5ae8(){const _0x1f9d55=['init','pending','10XuJUsu','disabled','updateInvitationStatus','9575710cytjAO','accepted','#send-response','renderInvitations','querySelector','3216392HHyyek','desc','setupEventListeners','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','trim','inline-block','2339981jDHVjB','currentFilter','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','teamData','data','sentUnsubscribe','decline','toUsername','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','gameInvitations','Error\x20updating\x20invitation\x20status:','fromUserId','./login.html','2270MSQaTJ','find','outbox','1554eeDVWP','./ladderduos.js','info','add','click','warn','invitations','location','team_invite','toDate','response-message','hasMore','245940cWpfUH','Failed\x20to\x20create\x20team:\x20','table','dataset','createInvitationCard','forEach','Just\x20now','138298ukchBB','addEventListener','console','m\x20ago','filter','exception','status','sentInvitations','DOMContentLoaded','teamColor','destroy',';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','active','unsubscribe','495zPHDvh','declined','error','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-','querySelectorAll','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','createdAt','fromUsername','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','success','bind','18kWZKcX','respond','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22','cancel','head','1800159dPOvdH','h\x20ago','4JDCnrO','sort','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','proposedTeamName','body','div'];a0_0x5ae8=function(){return _0x1f9d55;};return a0_0x5ae8();}class InboxManager{constructor(){const _0x28b077=a0_0x1e25;this['currentFilter']=_0x28b077(0xf5),this[_0x28b077(0xc1)]=[],this['sentInvitations']=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this['lastDoc']=null,this[_0x28b077(0xc6)]=!![],this[_0x28b077(0xf4)]();}async[a0_0xcd4226(0xf4)](){auth['onAuthStateChanged'](_0x49dae1=>{const _0x49e04a=a0_0x1e25;_0x49dae1?(this['loadInvitations'](_0x49dae1['uid']),this[_0x49e04a(0x100)]()):window[_0x49e04a(0xc2)]['href']=_0x49e04a(0xb7);});}['setupEventListeners'](){document['querySelectorAll']('.filter-btn')['forEach'](_0x388087=>{_0x388087['addEventListener']('click',()=>{const _0x300d36=a0_0x1e25;document['querySelectorAll']('.filter-btn')[_0x300d36(0xcc)](_0xde0e9a=>_0xde0e9a['classList']['remove']('active')),_0x388087['classList'][_0x300d36(0xbe)](_0x300d36(0xda)),this['currentFilter']=_0x388087[_0x300d36(0xca)][_0x300d36(0xd2)],this['renderInvitations']();});});}['loadInvitations'](_0xd97a04){const _0x2faeb9=a0_0xcd4226,_0x55c1b4=collection(db,'gameInvitations');let _0x48d572=query(_0x55c1b4,where('toUserId','==',_0xd97a04),orderBy('createdAt',_0x2faeb9(0xff)),limit(this['pageSize']));this[_0x2faeb9(0xdb)]=onSnapshot(_0x48d572,_0x279bec=>{const _0x21bc67=_0x2faeb9;this[_0x21bc67(0xc1)]=_0x279bec['docs']['map'](_0x83df90=>({'id':_0x83df90['id'],..._0x83df90[_0x21bc67(0x109)]()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x4be060=query(_0x55c1b4,where(_0x2faeb9(0xb6),'==',_0xd97a04),orderBy('createdAt','desc'),limit(this['pageSize']));this[_0x2faeb9(0x10a)]=onSnapshot(_0x4be060,_0x18e5ce=>{const _0x4c54f6=_0x2faeb9;this['sentInvitations']=_0x18e5ce['docs']['map'](_0x45a0b0=>({'id':_0x45a0b0['id'],..._0x45a0b0['data'](),'isSent':!![]})),this[_0x4c54f6(0xfc)]();});}['renderInvitations'](){const _0x965c8e=a0_0xcd4226,_0x3b06a9=document['getElementById']('inbox-content');if(!_0x3b06a9)return;let _0x127b5b=[];if(this['currentFilter']==='outbox')_0x127b5b=this[_0x965c8e(0xd5)];else this[_0x965c8e(0x105)]==='all'?_0x127b5b=[...this[_0x965c8e(0xc1)],...this[_0x965c8e(0xd5)]][_0x965c8e(0xef)]((_0xc6f581,_0x300317)=>{const _0x5bfc3a=_0x965c8e,_0xee4830=_0xc6f581[_0x5bfc3a(0xe2)]?.['toDate']?_0xc6f581['createdAt']['toDate']():new Date(_0xc6f581['createdAt']),_0x596a9a=_0x300317['createdAt']?.['toDate']?_0x300317['createdAt'][_0x5bfc3a(0xc4)]():new Date(_0x300317['createdAt']);return _0x596a9a-_0xee4830;}):_0x127b5b=this['invitations'][_0x965c8e(0xd2)](_0x25f5be=>_0x25f5be['status']===this[_0x965c8e(0x105)]);if(_0x127b5b['length']===0x0){const _0x2e3817=this['currentFilter']===_0x965c8e(0xba)?'sent':this['currentFilter']==='all'?'':this[_0x965c8e(0x105)];_0x3b06a9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x2e3817+'\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+(this['currentFilter']==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x3b06a9[_0x965c8e(0x106)]=_0x127b5b['map'](_0x3f2340=>this['createInvitationCard'](_0x3f2340))['join'](''),this['setupActionListeners']();}[a0_0xcd4226(0xcb)](_0x214f45){const _0x2ebe07=a0_0xcd4226,_0x189c87=_0x214f45[_0x2ebe07(0xe2)]?.['toDate']?_0x214f45['createdAt'][_0x2ebe07(0xc4)]():new Date(_0x214f45[_0x2ebe07(0xe2)]),_0x2fccef=this['getTimeAgo'](_0x189c87),_0x1bf074=_0x214f45['isSent']||![];let _0x6d286d='';return _0x214f45['type']===_0x2ebe07(0xc3)?_0x6d286d='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x214f45['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20'+_0x214f45['teamData']['teamColor']+_0x2ebe07(0xd9)+_0x214f45['teamData']['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20'+_0x214f45[_0x2ebe07(0x108)][_0x2ebe07(0xd7)]+_0x2ebe07(0x107):_0x6d286d=_0x2ebe07(0xf0)+_0x214f45['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x214f45['status']+'\x20'+(_0x1bf074?'sent-invitation':'')+'\x22\x20data-invitation-id=\x22'+_0x214f45['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1bf074?'To:\x20'+_0x214f45[_0x2ebe07(0x10c)]:_0x214f45['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1bf074?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x2fccef+_0x2ebe07(0xdf)+_0x214f45[_0x2ebe07(0xd4)]+'\x22>'+_0x214f45['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x6d286d+_0x2ebe07(0x101)+(!_0x1bf074&&_0x214f45['status']==='pending'?_0x2ebe07(0xe9)+_0x214f45['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x214f45['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x214f45['type']!=='team_invite'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x214f45['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x2ebe07(0xe1):'')+_0x2ebe07(0x101)+(_0x1bf074&&_0x214f45['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x214f45['id']+_0x2ebe07(0x10d):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){const _0xf3fe2=a0_0xcd4226;document[_0xf3fe2(0xe0)]('.action-btn')['forEach'](_0x108cb1=>{const _0xe9bc21=_0xf3fe2;_0x108cb1[_0xe9bc21(0xcf)](_0xe9bc21(0xbf),async _0x579807=>{const _0x452dce=_0xe9bc21,_0x383ef5=_0x108cb1[_0x452dce(0xca)]['action'],_0x311229=_0x108cb1['dataset']['invitationId'];_0x108cb1[_0x452dce(0xf7)]=!![];const _0x546f81=_0x108cb1['innerHTML'];_0x108cb1['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x383ef5){case'accept':await this['updateInvitationStatus'](_0x311229,'accepted');break;case _0x452dce(0x10b):await this['updateInvitationStatus'](_0x311229,_0x452dce(0xdd));break;case _0x452dce(0xea):await this[_0x452dce(0xf8)](_0x311229,'cancelled');break;case _0x452dce(0xe8):this['openResponseModal'](_0x311229);break;}}catch(_0xfee3fd){console[_0x452dce(0xde)]('Error\x20performing\x20'+_0x383ef5+':',_0xfee3fd),alert('Failed\x20to\x20'+_0x383ef5+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x108cb1[_0x452dce(0xf7)]=![],_0x108cb1['innerHTML']=_0x546f81;}});});}async['updateInvitationStatus'](_0x252e6f,_0x171c01){const _0x112eb2=a0_0xcd4226;try{const _0x2e77b5=this[_0x112eb2(0xc1)][_0x112eb2(0xb9)](_0x2eb97d=>_0x2eb97d['id']===_0x252e6f);_0x2e77b5&&_0x2e77b5['type']==='team_invite'&&_0x171c01===_0x112eb2(0xfa)&&await this['createTeamFromInvitation'](_0x2e77b5);const _0x5822=doc(db,_0x112eb2(0x10e),_0x252e6f);await updateDoc(_0x5822,{'status':_0x171c01,'respondedAt':new Date()}),_0x2e77b5&&(_0x2e77b5[_0x112eb2(0xd4)]=_0x171c01,_0x2e77b5['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x415237){console[_0x112eb2(0xde)](_0x112eb2(0x10f),_0x415237);throw _0x415237;}}['openResponseModal'](_0x53f01c){const _0x2d4228=a0_0xcd4226,_0x353fc4=this['invitations']['find'](_0x4ff75a=>_0x4ff75a['id']===_0x53f01c);if(!_0x353fc4)return;const _0x1c2c5c=document['createElement'](_0x2d4228(0xf3));_0x1c2c5c['className']='modal-overlay',_0x1c2c5c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x353fc4[_0x2d4228(0xe3)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x353fc4['value']+_0x2d4228(0xe4);if(!document['getElementById']('modal-styles')){const _0x2d6f13=document['createElement']('style');_0x2d6f13['id']='modal-styles',_0x2d6f13['textContent']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x2d4228(0xeb)]['appendChild'](_0x2d6f13);}document[_0x2d4228(0xf2)]['appendChild'](_0x1c2c5c),_0x1c2c5c[_0x2d4228(0xfd)]('.modal-close')['addEventListener']('click',()=>_0x1c2c5c['remove']()),_0x1c2c5c['querySelector']('#cancel-response')[_0x2d4228(0xcf)]('click',()=>_0x1c2c5c['remove']()),_0x1c2c5c['addEventListener'](_0x2d4228(0xbf),_0x4fc5ff=>{if(_0x4fc5ff['target']===_0x1c2c5c)_0x1c2c5c['remove']();}),_0x1c2c5c[_0x2d4228(0xfd)](_0x2d4228(0xfb))['addEventListener']('click',()=>{const _0x4b3498=_0x2d4228,_0x5c34b5=document['getElementById'](_0x4b3498(0xc5))['value'][_0x4b3498(0x102)]();_0x5c34b5&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x1c2c5c['remove']());});}async['createTeamFromInvitation'](_0x395d49){const _0x324b22=a0_0xcd4226;try{const {createTeam:_0x54d896}=await import(_0x324b22(0xbc)),_0x2dd3f6=await _0x54d896(_0x395d49['fromUsername'],_0x395d49['toUsername'],_0x395d49['teamData']['proposedTeamName'],_0x395d49[_0x324b22(0x108)]['teamColor']);if(!_0x2dd3f6[_0x324b22(0xe5)])throw new Error(_0x2dd3f6['error']);alert('Team\x20\x22'+_0x395d49[_0x324b22(0x108)][_0x324b22(0xf1)]+'\x22\x20created\x20successfully!');}catch(_0x3c5309){console[_0x324b22(0xde)]('Error\x20creating\x20team:',_0x3c5309);throw new Error(_0x324b22(0xc8)+_0x3c5309['message']);}}['updateNotificationCount'](){const _0x56a5e4=a0_0xcd4226,_0xe9ff40=this[_0x56a5e4(0xc1)]['filter'](_0x452c51=>_0x452c51['status']==='pending')['length'],_0x11df7e=document['getElementById']('inbox-notification');_0x11df7e&&(_0xe9ff40>0x0?(_0x11df7e['style']['display']=_0x56a5e4(0x103),_0x11df7e['textContent']=_0xe9ff40>0x9?'9+':_0xe9ff40):_0x11df7e['style']['display']='none');}['getTimeAgo'](_0x5ace06){const _0x43fdcc=a0_0xcd4226,_0x346d9d=new Date(),_0x246341=_0x346d9d-_0x5ace06,_0x47573c=Math['floor'](_0x246341/(0x3e8*0x3c)),_0x4003ac=Math['floor'](_0x246341/(0x3e8*0x3c*0x3c)),_0x27f8dd=Math['floor'](_0x246341/(0x3e8*0x3c*0x3c*0x18));if(_0x47573c<0x1)return _0x43fdcc(0xcd);if(_0x47573c<0x3c)return _0x47573c+_0x43fdcc(0xd1);if(_0x4003ac<0x18)return _0x4003ac+_0x43fdcc(0xed);if(_0x27f8dd<0x7)return _0x27f8dd+'d\x20ago';return _0x5ace06['toLocaleDateString']();}[a0_0xcd4226(0xd8)](){const _0x2f6c66=a0_0xcd4226;this[_0x2f6c66(0xdb)]&&this[_0x2f6c66(0xdb)](),this['sentUnsubscribe']&&this['sentUnsubscribe']();}}document['addEventListener'](a0_0xcd4226(0xd6),()=>{new InboxManager();});