const a48_0xff221d=a48_0x5664,a48_0x3110cd=(function(){let _0x46431d=!![];return function(_0x56d8ec,_0x21e08d){const _0x8e2ad8=_0x46431d?function(){if(_0x21e08d){const _0xdd7fd=_0x21e08d['apply'](_0x56d8ec,arguments);return _0x21e08d=null,_0xdd7fd;}}:function(){};return _0x46431d=![],_0x8e2ad8;};}()),a48_0x49485e=a48_0x3110cd(this,function(){const _0xd1834b=a48_0x5664,_0x165174=function(){const _0x3c9484=a48_0x5664;let _0x13bcb1;try{_0x13bcb1=Function(_0x3c9484(0x1ed)+_0x3c9484(0x1f1)+');')();}catch(_0x1bcaec){_0x13bcb1=window;}return _0x13bcb1;},_0x2b4f6b=_0x165174(),_0x19e9ba=_0x2b4f6b['console']=_0x2b4f6b['console']||{},_0x4255c4=[_0xd1834b(0x226),_0xd1834b(0x1eb),'info','error','exception','table','trace'];for(let _0x21526e=0x0;_0x21526e<_0x4255c4[_0xd1834b(0x1f0)];_0x21526e++){const _0x2717cf=a48_0x3110cd['constructor'][_0xd1834b(0x1ff)]['bind'](a48_0x3110cd),_0x3f41c6=_0x4255c4[_0x21526e],_0x23e1a8=_0x19e9ba[_0x3f41c6]||_0x2717cf;_0x2717cf['__proto__']=a48_0x3110cd[_0xd1834b(0x21e)](a48_0x3110cd),_0x2717cf['toString']=_0x23e1a8['toString'][_0xd1834b(0x21e)](_0x23e1a8),_0x19e9ba[_0x3f41c6]=_0x2717cf;}});a48_0x49485e();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':a48_0xff221d(0x1f8),'description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':'Blue','description':a48_0xff221d(0x209)},'volcanic':{'price':0x1f4,'name':'Red','description':a48_0xff221d(0x1f2)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a48_0xff221d(0x223)](a48_0xff221d(0x208),()=>{const _0x16c77d=a48_0xff221d;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById']('store-content'),pointsDisplay=document[_0x16c77d(0x1ea)](_0x16c77d(0x21c)),authWarning=document['getElementById'](_0x16c77d(0x20b)),initAuthListener(),buildStoreUI();});function a48_0x5664(_0x5b9ac0,_0x560bae){const _0x49485e=a48_0x26da();return a48_0x5664=function(_0x3110cd,_0x34ae16){_0x3110cd=_0x3110cd-0x1e2;let _0x26da50=_0x49485e[_0x3110cd];return _0x26da50;},a48_0x5664(_0x5b9ac0,_0x560bae);}function initAuthListener(){onAuthStateChanged(auth,async _0xd5a3b7=>{const _0x4263a9=a48_0x5664;if(_0xd5a3b7){console[_0x4263a9(0x226)]('‚úÖ\x20User\x20authenticated:',_0xd5a3b7['displayName']||_0xd5a3b7[_0x4263a9(0x1f7)]);if(authWarning)authWarning['style']['display']=_0x4263a9(0x20a);if(storeContainer)storeContainer[_0x4263a9(0x212)]['display']='block';await loadUserData(_0xd5a3b7),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style'][_0x4263a9(0x1e9)]=_0x4263a9(0x1e6);if(storeContainer)storeContainer['style'][_0x4263a9(0x1e9)]='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x1dd1d6){const _0x3ea061=a48_0xff221d;try{const _0x2c0fbf=doc(db,'userProfiles',_0x1dd1d6['uid']),_0x56c154=await getDoc(_0x2c0fbf);if(_0x56c154['exists']()){const _0x22bdfd=_0x56c154['data']();userData={'points':_0x22bdfd['points']||0x0,'inventory':_0x22bdfd[_0x3ea061(0x220)]||[],'isAdmin':_0x22bdfd['isAdmin']||![]},pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x3ea061(0x1fe)]()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent(_0x3ea061(0x20e),{'detail':{'isAdmin':!![]}}))),console[_0x3ea061(0x226)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData['inventory']['length']+_0x3ea061(0x21f));}else await setDoc(_0x2c0fbf,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x1dd1d6['displayName']||_0x1dd1d6[_0x3ea061(0x1f7)]?.['split']('@')[0x0]||_0x3ea061(0x1f3)}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0x3ea061(0x204)]=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x47f77b){console['error']('Error\x20loading\x20user\x20data:',_0x47f77b);}}function a48_0x26da(){const _0x135974=['classList','closest','Current\x20Theme','store-message','block','points','transactions','display','getElementById','warn','.theme-select-btn','return\x20(function()\x20','info','dataset','length','{}.constructor(\x22return\x20this\x22)(\x20)','For\x20the\x20angry\x20type.','User','error','\x20is\x20already\x20your\x20current\x20theme','currentUser','email','Black\x20&\x20White','remove','success','name','div','uid','toLocaleString','prototype','querySelectorAll','Not\x20enough\x20points.\x20You\x20need\x20','[data-theme]','opacity','isUserAdmin','ThemeSystem','disabled','\x20not\x20found','DOMContentLoaded','This\x20one\x20is\x20really\x20pretty','none','auth-warning','\x20theme\x20applied!','cannot-afford','adminStatusChanged','price','üè™\x20Redeem\x20store\x20loaded','\x20points','style','entries','0.7','Purchase\x20failed:','cursor','sign-in-free','\x20Points','add','textContent','theme_','user-points','forEach','bind','\x20items','inventory','store-item','appendChild','addEventListener','Apply\x20Theme','description','log','You\x20already\x20own\x20the\x20','theme','0.5','querySelector'];a48_0x26da=function(){return _0x135974;};return a48_0x26da();}function userOwnsTheme(_0x2ff54c){if(THEMES[_0x2ff54c]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x2ff54c);}async function purchaseTheme(_0x62b50a){const _0x5d937b=a48_0xff221d,_0x51fc4f=auth[_0x5d937b(0x1f6)];if(!_0x51fc4f)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x3b890c=THEMES[_0x62b50a];if(!_0x3b890c)return console['error']('Theme\x20'+_0x62b50a+_0x5d937b(0x207)),![];if(userData['points']<_0x3b890c['price'])return showMessage(_0x5d937b(0x201)+(_0x3b890c['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x62b50a))return showMessage(_0x5d937b(0x227)+_0x3b890c[_0x5d937b(0x1fb)]+'\x20theme','info'),![];try{const _0x24be91=doc(db,'userProfiles',_0x51fc4f[_0x5d937b(0x1fd)]),_0x391547=await getDoc(_0x24be91);if(!_0x391547['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x5d68d4=_0x391547['data'](),_0x27252a=_0x5d68d4['points']||0x0,_0x42ba69=_0x5d68d4['inventory']||[];if(_0x27252a<_0x3b890c[_0x5d937b(0x20f)])return showMessage('Insufficient\x20points','error'),![];if(_0x42ba69['includes']('theme_'+_0x62b50a))return showMessage('You\x20already\x20own\x20this\x20theme',_0x5d937b(0x1ee)),![];const _0x10e626=_0x27252a-_0x3b890c[_0x5d937b(0x20f)],_0x3c47ce=[..._0x42ba69,'theme_'+_0x62b50a];return await updateDoc(_0x24be91,{'points':_0x10e626,'inventory':_0x3c47ce,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,_0x5d937b(0x1e8)),{'userId':_0x51fc4f[_0x5d937b(0x1fd)],'userEmail':_0x51fc4f['email'],'itemId':_0x5d937b(0x21b)+_0x62b50a,'itemTitle':_0x3b890c[_0x5d937b(0x1fb)]+'\x20Theme','price':_0x3b890c['price'],'type':'purchase','category':_0x5d937b(0x228),'timestamp':serverTimestamp()}),userData['points']=_0x10e626,userData['inventory']=_0x3c47ce,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x5d937b(0x1e7)]['toLocaleString']()),console[_0x5d937b(0x226)]('‚úÖ\x20Purchased\x20'+_0x3b890c['name']+'\x20theme\x20for\x20'+_0x3b890c['price']+_0x5d937b(0x211)),!![];}catch(_0x3ddf44){return console[_0x5d937b(0x1f4)](_0x5d937b(0x215),_0x3ddf44),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x42209d){const _0xe3fbfe=a48_0xff221d;if(!userOwnsTheme(_0x42209d))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0xe3fbfe(0x1f4)),![];return window['ThemeSystem']?(window[_0xe3fbfe(0x205)]['switchTheme'](_0x42209d),showMessage((THEMES[_0x42209d]?.[_0xe3fbfe(0x1fb)]||_0x42209d)+_0xe3fbfe(0x20c),'success'),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x98dcfd=a48_0xff221d,_0x54e9fb=document[_0x98dcfd(0x22a)]('.themes-grid');if(!_0x54e9fb){console[_0x98dcfd(0x1f4)]('Themes\x20container\x20not\x20found');return;}_0x54e9fb['innerHTML']='',Object[_0x98dcfd(0x213)](THEMES)['forEach'](([_0x484c09,_0x5248f2])=>{const _0x2c011d=_0x98dcfd,_0x673c80=document['createElement'](_0x2c011d(0x1fc));_0x673c80['className']=_0x2c011d(0x221),_0x673c80['dataset'][_0x2c011d(0x228)]=_0x484c09,_0x673c80[_0x2c011d(0x1ef)]['itemId']=_0x2c011d(0x21b)+_0x484c09,_0x673c80[_0x2c011d(0x1ef)]['price']=_0x5248f2['price'],_0x673c80['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x484c09+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x5248f2[_0x2c011d(0x20f)]===0x0?'FREE':_0x5248f2['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x5248f2[_0x2c011d(0x1fb)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x5248f2[_0x2c011d(0x225)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x54e9fb[_0x2c011d(0x222)](_0x673c80);}),setupThemeButtons();}function setupThemeButtons(){const _0x4d159c=a48_0xff221d,_0x5657b7=document[_0x4d159c(0x200)](_0x4d159c(0x1ec));_0x5657b7[_0x4d159c(0x21d)](_0x2b562d=>{const _0x3789bf=_0x4d159c;_0x2b562d[_0x3789bf(0x223)]('click',async _0x43c66e=>{const _0x431df6=_0x3789bf;_0x43c66e['preventDefault']();const _0x78c8cf=auth[_0x431df6(0x1f6)];if(!_0x78c8cf){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes',_0x431df6(0x1f4));return;}const _0x5d4cfa=_0x2b562d['closest'](_0x431df6(0x202)),_0xcc463c=_0x5d4cfa['dataset']['theme'],_0x30d82b=THEMES[_0xcc463c];if(!_0x30d82b){console['error']('Theme\x20'+_0xcc463c+'\x20not\x20found');return;}console[_0x431df6(0x226)]('Theme\x20clicked:\x20'+_0x30d82b['name']+'\x20('+_0xcc463c+')');if(_0x2b562d[_0x431df6(0x206)]){_0x30d82b['price']>0x0&&showMessage('You\x20need\x20'+_0x30d82b['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x2b562d['textContent']==='Current\x20Theme'){showMessage(_0x30d82b['name']+_0x431df6(0x1f5),'info');return;}if(_0x2b562d['textContent']===_0x431df6(0x224)){applyTheme(_0xcc463c),updateThemeButtons();return;}if(_0x2b562d['textContent']['includes']('Buy')){const _0x241b79=window['confirm']('Purchase\x20'+_0x30d82b[_0x431df6(0x1fb)]+'\x20theme\x20for\x20'+_0x30d82b['price']+'\x20points?');if(!_0x241b79)return;const _0x9ba343=await purchaseTheme(_0xcc463c);_0x9ba343&&(showMessage(_0x30d82b[_0x431df6(0x1fb)]+'\x20theme\x20purchased!',_0x431df6(0x1fa)),applyTheme(_0xcc463c),updateThemeButtons());return;}userOwnsTheme(_0xcc463c)?applyTheme(_0xcc463c):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function updateThemeButtons(){const _0xe0ed86=window['ThemeSystem']?window['ThemeSystem']['getCurrentTheme']():'default',_0x267aea=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')['forEach'](_0x2af834=>{const _0x504385=a48_0x5664,_0x5daba9=_0x2af834[_0x504385(0x1e3)](_0x504385(0x202)),_0x38c285=_0x5daba9['dataset']['theme'],_0x437758=THEMES[_0x38c285];if(!_0x437758)return;_0x2af834[_0x504385(0x206)]=![],_0x2af834['style'][_0x504385(0x203)]='',_0x2af834['style']['cursor']='pointer',_0x2af834['classList']['remove']('current-theme','apply-theme','can-afford',_0x504385(0x20d),_0x504385(0x217),'sign-in-paid');if(!_0x267aea){_0x437758[_0x504385(0x20f)]===0x0?(_0x2af834[_0x504385(0x21a)]='Sign\x20in\x20to\x20Apply',_0x2af834[_0x504385(0x1e2)][_0x504385(0x219)](_0x504385(0x217))):(_0x2af834[_0x504385(0x21a)]='Sign\x20in\x20to\x20Purchase',_0x2af834['disabled']=!![],_0x2af834['style']['opacity']=_0x504385(0x214),_0x2af834['classList'][_0x504385(0x219)]('sign-in-paid'));return;}if(_0x38c285===_0xe0ed86){_0x2af834['textContent']=_0x504385(0x1e4),_0x2af834['classList']['add']('current-theme'),_0x2af834['disabled']=!![],_0x2af834['style']['cursor']='default';return;}if(userOwnsTheme(_0x38c285)){_0x2af834['textContent']='Apply\x20Theme',_0x2af834[_0x504385(0x1e2)]['add']('apply-theme');return;}if(userData['points']>=_0x437758['price']){_0x2af834['textContent']='Buy\x20for\x20'+_0x437758[_0x504385(0x20f)]+'\x20Points',_0x2af834[_0x504385(0x1e2)]['add']('can-afford');return;}_0x2af834[_0x504385(0x21a)]='Need\x20'+_0x437758[_0x504385(0x20f)]+_0x504385(0x218),_0x2af834[_0x504385(0x1e2)]['add'](_0x504385(0x20d)),_0x2af834[_0x504385(0x212)]['opacity']=_0x504385(0x229),_0x2af834['disabled']=!![],_0x2af834['style'][_0x504385(0x216)]='not-allowed';});}function showMessage(_0x4dbe69,_0x789567=a48_0xff221d(0x1ee)){const _0x157209=a48_0xff221d,_0x188518=document['getElementById']('store-message');_0x188518&&_0x188518['remove']();const _0x127bd8=document['createElement'](_0x157209(0x1fc));_0x127bd8['id']=_0x157209(0x1e5),_0x127bd8['className']='store-message\x20store-message-'+_0x789567,_0x127bd8[_0x157209(0x21a)]=_0x4dbe69,document['body'][_0x157209(0x222)](_0x127bd8),requestAnimationFrame(()=>{const _0x4eb6b3=_0x157209;_0x127bd8[_0x4eb6b3(0x1e2)]['add']('visible');}),setTimeout(()=>{_0x127bd8['classList']['remove']('visible'),setTimeout(()=>{const _0x3a345c=a48_0x5664;_0x127bd8['parentNode']&&_0x127bd8[_0x3a345c(0x1f9)]();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log'](a48_0xff221d(0x210));