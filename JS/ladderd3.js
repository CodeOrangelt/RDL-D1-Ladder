const a33_0x56a61d=a33_0x1d45,a33_0x3e5265=(function(){let _0x5165e3=!![];return function(_0x376128,_0x240f09){const _0x393ce3=_0x5165e3?function(){if(_0x240f09){const _0x355ba4=_0x240f09['apply'](_0x376128,arguments);return _0x240f09=null,_0x355ba4;}}:function(){};return _0x5165e3=![],_0x393ce3;};}()),a33_0x959039=a33_0x3e5265(this,function(){const _0x2ee239=a33_0x1d45,_0x1427b7=function(){let _0x7d51bd;try{_0x7d51bd=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x57f22d){_0x7d51bd=window;}return _0x7d51bd;},_0x23c2c1=_0x1427b7(),_0x726fbf=_0x23c2c1[_0x2ee239(0x17b)]=_0x23c2c1['console']||{},_0x589bda=[_0x2ee239(0x16d),'warn',_0x2ee239(0x170),'error','exception','table','trace'];for(let _0x550e75=0x0;_0x550e75<_0x589bda['length'];_0x550e75++){const _0x58eee3=a33_0x3e5265['constructor'][_0x2ee239(0x167)]['bind'](a33_0x3e5265),_0x3bc6dd=_0x589bda[_0x550e75],_0x27e2be=_0x726fbf[_0x3bc6dd]||_0x58eee3;_0x58eee3[_0x2ee239(0x16f)]=a33_0x3e5265[_0x2ee239(0x189)](a33_0x3e5265),_0x58eee3[_0x2ee239(0x186)]=_0x27e2be[_0x2ee239(0x186)][_0x2ee239(0x189)](_0x27e2be),_0x726fbf[_0x3bc6dd]=_0x58eee3;}});a33_0x959039();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a33_0x3cf3(){const _0x2fb3d4=['newElo','includes','D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...','loserScore','totalMatches','set','sort','get','playersD3','previousElo','playerUsername','winRate','D3:\x20Found\x20','prototype','winnerUsername','now','size','map','push','log','td:nth-child(3)','__proto__','info','toFixed','kda','inline','MAX_SAFE_INTEGER','querySelector','textContent','forEach','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','username','position','console','player','country','timestamp','string','fontSize','empty','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','seconds','\x20ELO\x20change:\x20','winnerScore','toString','has','D3:\x20','bind','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20','\x20entries\x20in\x20eloHistoryD3','length','#F44336','fontWeight','losses','firstPlaceDate','filter','D3:\x20Found\x20entries\x20for\x20','#ladder-d3\x20tbody','data','error','pilot','D3:\x20Found\x20pilot\x20entry:','gameMode','%</td>\x0a\x20\x20\x20\x20</tr>','querySelectorAll',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'];a33_0x3cf3=function(){return _0x2fb3d4;};return a33_0x3cf3();}import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x24ddab from'./firebase-idle-wrapper.js';const styleEl=document['createElement']('style');styleEl[a33_0x56a61d(0x176)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x328af1=![]){const _0x4d38ab=a33_0x56a61d,_0xdf2e88=document['querySelector'](_0x4d38ab(0x193));if(!_0xdf2e88){console[_0x4d38ab(0x195)]('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0xdf2e88['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>';try{const _0xe0b39e=Date[_0x4d38ab(0x169)]();if(!_0x328af1&&playerCacheD3['data']&&_0xe0b39e-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x479750=collection(db,'playersD3'),_0x13fd8a=await getDocs(_0x479750),_0x10f515=[];_0x13fd8a['forEach'](_0x1f0842=>{const _0x249b7b=_0x4d38ab,_0x4ca67d=_0x1f0842[_0x249b7b(0x194)]();_0x4ca67d['username']&&_0x10f515['push']({..._0x4ca67d,'id':_0x1f0842['id'],'elo':_0x4ca67d['eloRating']||0x0,'position':_0x4ca67d[_0x249b7b(0x17a)]||Number[_0x249b7b(0x174)]});});const _0x4b51bf=collection(db,'userProfiles'),_0xe3ff84=await getDocs(_0x4b51bf),_0x52553d=new Map();_0xe3ff84['forEach'](_0x1b6790=>{const _0x2ce59b=_0x4d38ab,_0x3e72ed=_0x1b6790['data']();_0x3e72ed[_0x2ce59b(0x179)]&&_0x52553d['set'](_0x3e72ed['username']['toLowerCase'](),_0x3e72ed);});for(const _0x40b56f of _0x10f515){const _0x1190c6=_0x40b56f['username']['toLowerCase']();if(_0x52553d['has'](_0x1190c6)){const _0x2e003d=_0x52553d[_0x4d38ab(0x161)](_0x1190c6);_0x2e003d[_0x4d38ab(0x17d)]&&(_0x40b56f['country']=_0x2e003d['country']['toLowerCase']());}}const _0xa8bf4d=_0x10f515[_0x4d38ab(0x16b)](_0xe42658=>_0xe42658[_0x4d38ab(0x179)]),_0x1324f4=await fetchBatchMatchStatsD3(_0xa8bf4d);_0x10f515['sort']((_0x24f9a6,_0x4582b8)=>{const _0xc8eb62=_0x4d38ab,_0x301926=_0x1324f4['get'](_0x24f9a6['username'])?.[_0xc8eb62(0x15e)]||0x0,_0x5ac027=_0x1324f4[_0xc8eb62(0x161)](_0x4582b8['username'])?.['totalMatches']||0x0;if(_0x301926===0x0!==(_0x5ac027===0x0))return _0x301926===0x0?0x1:-0x1;return(_0x24f9a6['position']||0x3e7)-(_0x4582b8['position']||0x3e7);}),_0x10f515['forEach']((_0x51fe01,_0x57f718)=>{_0x51fe01['position']=_0x57f718+0x1;}),playerCacheD3['data']=_0x10f515,playerCacheD3['timestamp']=_0xe0b39e,updateLadderDisplayD3(_0x10f515);}catch(_0x440041){console[_0x4d38ab(0x195)]('Error\x20loading\x20D3\x20ladder:',_0x440041),_0xdf2e88['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x440041['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x18be89){if(!_0x18be89)return 0x0;const _0x57339d=_0x18be89['toDate'](),_0x5a3788=new Date(),_0x3f0204=Math['abs'](_0x5a3788-_0x57339d);return Math['ceil'](_0x3f0204/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x16d394,_0x2a661c){const _0x3cc33e=a33_0x56a61d;try{const _0x539435=collection(db,'playersD3'),_0x5d7ab8=await getDocs(_0x539435),_0x12b179=[];_0x5d7ab8[_0x3cc33e(0x177)](_0x2125c4=>{const _0x415949=_0x3cc33e;_0x12b179[_0x415949(0x16c)]({'id':_0x2125c4['id'],..._0x2125c4['data']()});});const _0x2c8ad4=_0x12b179['find'](_0x4a4fca=>_0x4a4fca['username']===_0x16d394),_0x5bfed7=_0x12b179['find'](_0x5599e7=>_0x5599e7['username']===_0x2a661c);if(!_0x2c8ad4||!_0x5bfed7){console[_0x3cc33e(0x195)]('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x2c8ad4[_0x3cc33e(0x17a)]>_0x5bfed7['position']){const _0x42fb22=_0x5bfed7[_0x3cc33e(0x17a)];for(const _0x2fc54e of _0x12b179){_0x2fc54e['position']>=_0x5bfed7['position']&&_0x2fc54e[_0x3cc33e(0x17a)]<_0x2c8ad4['position']&&_0x2fc54e['username']!==_0x16d394&&await updateDoc(doc(db,'playersD3',_0x2fc54e['id']),{'position':_0x2fc54e['position']+0x1});}await updateDoc(doc(db,_0x3cc33e(0x162),_0x2c8ad4['id']),{'position':_0x42fb22});if(_0x42fb22===0x1){const _0x2a4233=doc(db,'playersD3',_0x2c8ad4['id']),_0x9fa21b=await getDoc(_0x2a4233);!_0x9fa21b[_0x3cc33e(0x194)]()[_0x3cc33e(0x190)]&&await updateDoc(_0x2a4233,{'firstPlaceDate':Timestamp[_0x3cc33e(0x169)]()});}if(_0x5bfed7[_0x3cc33e(0x17a)]===0x1){const _0x2e7def=doc(db,_0x3cc33e(0x162),_0x5bfed7['id']);await updateDoc(_0x2e7def,{'firstPlaceDate':null});}}}catch(_0x43554f){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x43554f);}}async function updateLadderDisplayD3(_0x4487b3){const _0x2cb2df=a33_0x56a61d;_0x4487b3[_0x2cb2df(0x160)]((_0x20995b,_0x5c2c10)=>_0x20995b[_0x2cb2df(0x17a)]-_0x5c2c10['position']);const _0x4db409=document['querySelector']('#ladder-d3\x20tbody');if(!_0x4db409)return;_0x4db409['innerHTML']='';const _0x5bc9ff=_0x4487b3['map'](_0x53c617=>_0x53c617['username']),_0x1b2f48=await fetchBatchMatchStatsD3(_0x5bc9ff),_0x121a83=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x121a83['innerHTML']=_0x2cb2df(0x18a);const _0x19c016=_0x4487b3['map'](_0x412186=>{const _0x3e099c=_0x1b2f48['get'](_0x412186['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x412186,_0x3e099c);})['join']('');_0x4db409['innerHTML']=_0x19c016,getPlayersLastEloChangesD3(_0x5bc9ff)['then'](_0x5a5597=>{const _0x30de6f=_0x2cb2df,_0xceba74=new Map();_0x4db409[_0x30de6f(0x19a)]('tr')['forEach']((_0x5a283d,_0x4b7fe1)=>{const _0x33af34=_0x30de6f;_0x4b7fe1<_0x5bc9ff[_0x33af34(0x18c)]&&_0xceba74[_0x33af34(0x15f)](_0x5bc9ff[_0x4b7fe1],_0x5a283d);}),_0x5a5597['forEach']((_0x188f2b,_0x52c281)=>{const _0x43c00d=_0x30de6f,_0x46f4cd=_0xceba74['get'](_0x52c281);if(_0x46f4cd&&_0x188f2b!==0x0){const _0x1afd6d=_0x46f4cd[_0x43c00d(0x175)](_0x43c00d(0x16e));if(_0x1afd6d){const _0x3023e0=_0x188f2b>0x0?'+'+_0x188f2b:''+_0x188f2b,_0x55a05a=_0x1afd6d[_0x43c00d(0x175)]('.trend-indicator');_0x55a05a&&(_0x55a05a['textContent']=_0x3023e0,_0x55a05a['style']['color']=_0x188f2b>0x0?'#4CAF50':_0x43c00d(0x18d),_0x55a05a['style'][_0x43c00d(0x18e)]='bold',_0x55a05a['style'][_0x43c00d(0x180)]='0.85em',_0x55a05a['style']['display']=_0x43c00d(0x173),_0x55a05a['style']['visibility']='visible',_0x55a05a['style']['opacity']='1');}}});})['catch'](_0x2bc621=>console[_0x2cb2df(0x195)]('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x2bc621));}async function fetchBatchMatchStatsD3(_0x396377){const _0x4c69f6=new Map();try{const _0xc1645b=collection(db,'approvedMatchesD3'),_0x1bd186=await getDocs(_0xc1645b);_0x1bd186['forEach'](_0x4dd5b2=>{const _0x53c20d=a33_0x1d45,_0x2edfdc=_0x4dd5b2[_0x53c20d(0x194)]();if(_0x396377[_0x53c20d(0x15b)](_0x2edfdc[_0x53c20d(0x168)])){const _0x20166b=_0x2edfdc['winnerUsername'];!_0x4c69f6[_0x53c20d(0x187)](_0x20166b)&&_0x4c69f6[_0x53c20d(0x15f)](_0x20166b,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x3354b7=_0x4c69f6['get'](_0x20166b);_0x3354b7['wins']++,_0x3354b7[_0x53c20d(0x15e)]++,_0x3354b7['totalKills']+=parseInt(_0x2edfdc[_0x53c20d(0x185)])||0x0,_0x3354b7['totalDeaths']+=parseInt(_0x2edfdc[_0x53c20d(0x15d)])||0x0;}if(_0x396377['includes'](_0x2edfdc['loserUsername'])){const _0x160314=_0x2edfdc['loserUsername'];!_0x4c69f6['has'](_0x160314)&&_0x4c69f6['set'](_0x160314,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x2d5ff3=_0x4c69f6['get'](_0x160314);_0x2d5ff3['losses']++,_0x2d5ff3['totalMatches']++,_0x2d5ff3['totalKills']+=parseInt(_0x2edfdc['loserScore'])||0x0,_0x2d5ff3['totalDeaths']+=parseInt(_0x2edfdc['winnerScore'])||0x0;}}),_0x4c69f6['forEach'](_0x1112f9=>{const _0x2ff1cd=a33_0x1d45;_0x1112f9[_0x2ff1cd(0x172)]=_0x1112f9['totalDeaths']>0x0?(_0x1112f9['totalKills']/_0x1112f9['totalDeaths'])[_0x2ff1cd(0x171)](0x2):_0x1112f9['totalKills'],_0x1112f9[_0x2ff1cd(0x165)]=_0x1112f9[_0x2ff1cd(0x15e)]>0x0?(_0x1112f9['wins']/_0x1112f9[_0x2ff1cd(0x15e)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x1a4b7b){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x1a4b7b);}return _0x4c69f6;}function createPlayerRowD3(_0x46ae8f,_0x21e28a){const _0x19b584=a33_0x56a61d,_0x109845=parseFloat(_0x46ae8f['elo'])||0x0;let _0x1ffeeb='gray';if(_0x109845>=0x7d0)_0x1ffeeb='#50C878';else{if(_0x109845>=0x708)_0x1ffeeb='#FFD700';else{if(_0x109845>=0x640)_0x1ffeeb='#C0C0C0';else _0x109845>=0x578&&(_0x1ffeeb='#CD7F32');}}let _0x2ed714='';return _0x46ae8f[_0x19b584(0x17d)]&&(_0x2ed714='<img\x20src=\x22../images/flags/'+_0x46ae8f[_0x19b584(0x17d)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x46ae8f['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0x19b584(0x182)+_0x46ae8f[_0x19b584(0x17a)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x46ae8f['username'])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x1ffeeb+_0x19b584(0x19b)+_0x46ae8f['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2ed714+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x1ffeeb+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x109845+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21e28a['totalMatches']+_0x19b584(0x178)+_0x21e28a['wins']+_0x19b584(0x178)+_0x21e28a[_0x19b584(0x18f)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21e28a['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x21e28a['winRate']+_0x19b584(0x199);}async function getPlayersLastEloChangesD3(_0x41950e){const _0x5982bf=a33_0x56a61d,_0x51da56=new Map();_0x41950e[_0x5982bf(0x177)](_0x49401f=>_0x51da56['set'](_0x49401f,0x0));try{console['log']('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x41950e);const _0x859f7=new Map(),_0x458e2f=await getDocs(collection(db,'playersD3'));_0x458e2f[_0x5982bf(0x177)](_0x52ca73=>{const _0x72ae5b=_0x5982bf,_0x418ac6=_0x52ca73['data']();_0x418ac6[_0x72ae5b(0x179)]&&_0x859f7['set'](_0x52ca73['id'],_0x418ac6['username']);}),console['log']('D3:\x20Player\x20ID\x20mappings:',Array['from'](_0x859f7['entries']()));const _0x1341ef=collection(db,'eloHistoryD3'),_0x501a15=query(_0x1341ef,orderBy('timestamp','desc'),limit(0x64)),_0x148d11=await getDocs(_0x501a15);_0x148d11[_0x5982bf(0x181)]?console[_0x5982bf(0x16d)](_0x5982bf(0x15c)):console['log'](_0x5982bf(0x166)+_0x148d11['size']+_0x5982bf(0x18b));const _0x254a45=new Map();_0x148d11[_0x5982bf(0x177)](_0x13475f=>{const _0x4facd3=_0x5982bf,_0x561fbc=_0x13475f['data']();let _0x117e42=null;if(_0x561fbc['username'])_0x117e42=_0x561fbc[_0x4facd3(0x179)];else{if(_0x561fbc['playerUsername'])_0x117e42=_0x561fbc[_0x4facd3(0x164)];else{if(_0x561fbc[_0x4facd3(0x17c)]&&typeof _0x561fbc['player']===_0x4facd3(0x17f))_0x117e42=_0x561fbc['player'];else{if(_0x561fbc['player']&&_0x859f7[_0x4facd3(0x187)](_0x561fbc['player']))_0x117e42=_0x859f7['get'](_0x561fbc['player']);else _0x561fbc['playerId']&&_0x859f7['has'](_0x561fbc['playerId'])&&(_0x117e42=_0x859f7['get'](_0x561fbc['playerId']));}}}(_0x561fbc['username']==='pilot'||_0x561fbc['playerUsername']===_0x4facd3(0x196)||_0x561fbc['player']&&_0x859f7['get'](_0x561fbc[_0x4facd3(0x17c)])==='pilot')&&console[_0x4facd3(0x16d)](_0x4facd3(0x197),_0x561fbc),_0x117e42&&_0x41950e[_0x4facd3(0x15b)](_0x117e42)&&(!_0x254a45['has'](_0x117e42)&&_0x254a45[_0x4facd3(0x15f)](_0x117e42,[]),_0x254a45['get'](_0x117e42)[_0x4facd3(0x16c)]({..._0x561fbc,'timestamp':_0x561fbc[_0x4facd3(0x17e)]?.[_0x4facd3(0x183)]||0x0}));}),console[_0x5982bf(0x16d)](_0x5982bf(0x192)+_0x254a45['size']+'\x20players'),_0x254a45[_0x5982bf(0x177)]((_0x222940,_0x23d1ad)=>{const _0x147989=_0x5982bf;if(_0x222940['length']>0x0){_0x222940[_0x147989(0x160)]((_0x27f624,_0x115122)=>_0x115122[_0x147989(0x17e)]-_0x27f624['timestamp']);const _0x5878d9=_0x222940['find'](_0x354848=>_0x354848['change']!==undefined||_0x354848['newElo']!==undefined&&_0x354848[_0x147989(0x163)]!==undefined);if(_0x5878d9){let _0x5f0ed2;if(_0x5878d9['change']!==undefined)_0x5f0ed2=_0x5878d9['change'];else _0x5878d9['newElo']!==undefined&&_0x5878d9['previousElo']!==undefined&&(_0x5f0ed2=_0x5878d9[_0x147989(0x15a)]-_0x5878d9[_0x147989(0x163)]);_0x5f0ed2!==undefined&&(_0x51da56[_0x147989(0x15f)](_0x23d1ad,_0x5f0ed2),console[_0x147989(0x16d)](_0x147989(0x188)+_0x23d1ad+_0x147989(0x184)+_0x5f0ed2));}}});if(_0x254a45[_0x5982bf(0x16a)]===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x36c048=collection(db,'eloHistory'),_0xc7e3ac=query(_0x36c048,where(_0x5982bf(0x198),'==','D3'),orderBy(_0x5982bf(0x17e),'desc'),limit(0x32));try{const _0x3e2c55=await getDocs(_0xc7e3ac);console['log']('D3:\x20Found\x20'+_0x3e2c55[_0x5982bf(0x16a)]+'\x20fallback\x20entries'),_0x3e2c55[_0x5982bf(0x177)](_0x4b2943=>{const _0x15a232=_0x5982bf,_0x29b14d=_0x4b2943['data']();let _0x469f49=_0x29b14d['username']||_0x29b14d[_0x15a232(0x164)];!_0x469f49&&_0x29b14d[_0x15a232(0x17c)]&&_0x859f7['has'](_0x29b14d[_0x15a232(0x17c)])&&(_0x469f49=_0x859f7['get'](_0x29b14d['player']));if(_0x469f49&&_0x41950e[_0x15a232(0x15b)](_0x469f49)){const _0x1610c3=_0x29b14d['change']||(_0x29b14d[_0x15a232(0x15a)]!==undefined&&_0x29b14d['previousElo']!==undefined?_0x29b14d['newElo']-_0x29b14d[_0x15a232(0x163)]:0x0);_0x1610c3!==0x0&&(_0x51da56[_0x15a232(0x15f)](_0x469f49,_0x1610c3),console['log']('D3:\x20'+_0x469f49+'\x20fallback\x20ELO\x20change:\x20'+_0x1610c3));}});}catch(_0x4775e4){console[_0x5982bf(0x16d)]('D3:\x20Fallback\x20query\x20failed:',_0x4775e4);}}const _0x4651f6=Array['from'](_0x51da56['entries']())[_0x5982bf(0x191)](([_0x27cbdb,_0x54712e])=>_0x54712e!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x4651f6);}catch(_0x462195){console[_0x5982bf(0x195)]('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x462195);}return _0x51da56;}function a33_0x1d45(_0x2c30d6,_0x7783fb){const _0x959039=a33_0x3cf3();return a33_0x1d45=function(_0x3e5265,_0x3abeab){_0x3e5265=_0x3e5265-0x15a;let _0x3cf317=_0x959039[_0x3e5265];return _0x3cf317;},a33_0x1d45(_0x2c30d6,_0x7783fb);}export{displayLadderD3,updatePlayerPositions};