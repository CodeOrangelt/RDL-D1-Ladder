const a8_0x1a797c=a8_0x4f63,a8_0x45d1e3=(function(){let _0x48b1a6=!![];return function(_0x4edbf7,_0x2584ca){const _0x207078=_0x48b1a6?function(){if(_0x2584ca){const _0x5c1bc7=_0x2584ca['apply'](_0x4edbf7,arguments);return _0x2584ca=null,_0x5c1bc7;}}:function(){};return _0x48b1a6=![],_0x207078;};}()),a8_0x79271=a8_0x45d1e3(this,function(){const _0x5b49a2=a8_0x4f63;let _0x3b8d7c;try{const _0x55e871=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3b8d7c=_0x55e871();}catch(_0x14f653){_0x3b8d7c=window;}const _0x17c74f=_0x3b8d7c['console']=_0x3b8d7c[_0x5b49a2(0xe2)]||{},_0x5a30bf=[_0x5b49a2(0xe9),'warn','info','error','exception','table','trace'];for(let _0x22e88a=0x0;_0x22e88a<_0x5a30bf['length'];_0x22e88a++){const _0x167ff6=a8_0x45d1e3['constructor']['prototype']['bind'](a8_0x45d1e3),_0x1a0af7=_0x5a30bf[_0x22e88a],_0x3afb96=_0x17c74f[_0x1a0af7]||_0x167ff6;_0x167ff6['__proto__']=a8_0x45d1e3['bind'](a8_0x45d1e3),_0x167ff6['toString']=_0x3afb96['toString'][_0x5b49a2(0xe7)](_0x3afb96),_0x17c74f[_0x1a0af7]=_0x167ff6;}});a8_0x79271();function a8_0x3bfd(){const _0x34f60c=['docs','Error\x20fetching\x20username:','approved','currentUsername','all','email','winnerEmail','body','report-match-notification','right','addEventListener','disconnect','empty','username','split','pendingMatchesD3','border','pendingMatchesD2','style','error','uid','playersD2','now','setItem','winnerId','winnerUsername','data','50%','console','top','-5px','parse','display','bind','zIndex','log'];a8_0x3bfd=function(){return _0x34f60c;};return a8_0x3bfd();}import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a8_0x4f63(_0x1cd69b,_0x482bb9){const _0x79271=a8_0x3bfd();return a8_0x4f63=function(_0x45d1e3,_0x239d02){_0x45d1e3=_0x45d1e3-0xc6;let _0x3bfd52=_0x79271[_0x45d1e3];return _0x3bfd52;},a8_0x4f63(_0x1cd69b,_0x482bb9);}import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x2aac57=![]){const _0x2cfcb5=a8_0x4f63,_0xcd2a30=Date['now'](),_0x2904ec=checkNotificationCache();if(_0x2904ec!==null&&!_0x2aac57){updateNotificationDot(_0x2904ec);if(_0xcd2a30-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0xcd2a30;const _0x2f118e=auth['currentUser'];if(!_0x2f118e){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x15622d,_0x51ffd0,_0x58e532]=await Promise[_0x2cfcb5(0xca)]([checkForPendingMatchesInCollection(_0x2f118e,'pendingMatches'),checkForPendingMatchesInCollection(_0x2f118e,_0x2cfcb5(0xd7)),checkForPendingMatchesInCollection(_0x2f118e,_0x2cfcb5(0xd5))]),_0x50cdfd=_0x15622d||_0x51ffd0||_0x58e532;updateNotificationDot(_0x50cdfd),updateNotificationCache(_0x50cdfd);}catch(_0x271e2f){console['error']('Error\x20checking\x20pending\x20matches:',_0x271e2f);}}async function checkForPendingMatchesInCollection(_0x4b3aef,_0x27be27){const _0x2b306c=a8_0x4f63,_0x2e81eb=_0x4b3aef[_0x2b306c(0xda)],_0x41e088=_0x4b3aef['email'],_0xe635f2=query(collection(db,_0x27be27),where(_0x2b306c(0xde),'==',_0x2e81eb),where('approved','==',![])),_0x1eae78=await getDocs(_0xe635f2);if(!_0x1eae78[_0x2b306c(0xd2)])return!![];if(_0x41e088){const _0x475dbc=query(collection(db,_0x27be27),where(_0x2b306c(0xcc),'==',_0x41e088),where(_0x2b306c(0xc8),'==',![])),_0x200806=await getDocs(_0x475dbc);if(!_0x200806[_0x2b306c(0xd2)])return!![];}let _0x3b6620=await getUsernameFromAllSources(_0x4b3aef);if(_0x3b6620){const _0x383d99=query(collection(db,_0x27be27),where(_0x2b306c(0xdf),'==',_0x3b6620),where('approved','==',![])),_0x43916a=await getDocs(_0x383d99);if(!_0x43916a['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x42bb24){const _0x594f6c=a8_0x4f63,_0x1f6abf=localStorage['getItem']('currentUsername');if(_0x1f6abf)return _0x1f6abf;try{const [_0x347a88,_0x4558b1,_0x1e1ad6]=await Promise[_0x594f6c(0xca)]([getDocs(query(collection(db,'players'),where('userId','==',_0x42bb24[_0x594f6c(0xda)]))),getDocs(query(collection(db,_0x594f6c(0xdb)),where('userId','==',_0x42bb24[_0x594f6c(0xda)]))),getDocs(query(collection(db,'playersD3'),where('userId','==',_0x42bb24[_0x594f6c(0xda)])))]);if(!_0x347a88[_0x594f6c(0xd2)]){const _0x333aee=_0x347a88['docs'][0x0]['data']()[_0x594f6c(0xd3)];return localStorage['setItem']('currentUsername',_0x333aee),_0x333aee;}if(!_0x4558b1['empty']){const _0x3ff2b4=_0x4558b1[_0x594f6c(0xc6)][0x0][_0x594f6c(0xe0)]()[_0x594f6c(0xd3)];return localStorage['setItem'](_0x594f6c(0xc9),_0x3ff2b4),_0x3ff2b4;}if(!_0x1e1ad6['empty']){const _0x539109=_0x1e1ad6[_0x594f6c(0xc6)][0x0][_0x594f6c(0xe0)]()['username'];return localStorage[_0x594f6c(0xdd)]('currentUsername',_0x539109),_0x539109;}const _0x4d811e=await getDoc(doc(db,'users',_0x42bb24['uid']));if(_0x4d811e['exists']()&&_0x4d811e['data']()['username']){const _0x7006b3=_0x4d811e['data']()['username'];return localStorage['setItem'](_0x594f6c(0xc9),_0x7006b3),_0x7006b3;}}catch(_0x469562){console[_0x594f6c(0xd9)](_0x594f6c(0xc7),_0x469562);}if(_0x42bb24[_0x594f6c(0xcb)])return _0x42bb24[_0x594f6c(0xcb)][_0x594f6c(0xd4)]('@')[0x0];return null;}function updateNotificationCache(_0x5c4bfe){const _0x3a87a1={'status':_0x5c4bfe,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x3a87a1));}function checkNotificationCache(){const _0x4745aa=a8_0x4f63,_0x157f26=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x157f26)return null;try{const {status:_0x26dd4e,timestamp:_0x51dd0f}=JSON[_0x4745aa(0xe5)](_0x157f26),_0x708c77=Date[_0x4745aa(0xdc)]();if(_0x708c77-_0x51dd0f<CACHE_EXPIRY)return _0x26dd4e;}catch(_0x2df20d){}return null;}export function updateNotificationDot(_0x314153){const _0x598c80=a8_0x4f63,_0x2606a8=new MutationObserver((_0x485a35,_0x799d75)=>{const _0x174b4e=document['getElementById']('report-match-notification');_0x174b4e&&(updateDotStyle(_0x174b4e,_0x314153),_0x799d75['disconnect']());});_0x2606a8['observe'](document[_0x598c80(0xcd)],{'childList':!![],'subtree':!![]});const _0x4398a8=document['getElementById'](_0x598c80(0xce));_0x4398a8&&(updateDotStyle(_0x4398a8,_0x314153),_0x2606a8[_0x598c80(0xd1)]()),setTimeout(()=>_0x2606a8['disconnect'](),0x1388);}function updateDotStyle(_0x2595d3,_0x436c73){const _0x59727f=a8_0x4f63;_0x436c73?(_0x2595d3['style'][_0x59727f(0xe6)]='block',_0x2595d3['style']['backgroundColor']='#ff3b30',_0x2595d3['style']['width']='10px',_0x2595d3['style']['height']='10px',_0x2595d3['style']['position']='absolute',_0x2595d3['style'][_0x59727f(0xe3)]=_0x59727f(0xe4),_0x2595d3['style'][_0x59727f(0xcf)]='-8px',_0x2595d3['style']['borderRadius']=_0x59727f(0xe1),_0x2595d3['style'][_0x59727f(0xd6)]='2px\x20solid\x20white',_0x2595d3['style'][_0x59727f(0xe8)]='999'):_0x2595d3[_0x59727f(0xd8)]['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a8_0x1a797c(0xd0)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});