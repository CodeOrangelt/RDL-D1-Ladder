const a25_0x404085=(function(){let _0x5aac1e=!![];return function(_0xdd7a71,_0x495c93){const _0x5cdfe3=_0x5aac1e?function(){if(_0x495c93){const _0xfba8c7=_0x495c93['apply'](_0xdd7a71,arguments);return _0x495c93=null,_0xfba8c7;}}:function(){};return _0x5aac1e=![],_0x5cdfe3;};}()),a25_0xc1cfd6=a25_0x404085(this,function(){const _0x26f9d5=a25_0xb6d1;let _0x22737d;try{const _0x35123b=Function(_0x26f9d5(0xfa)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x22737d=_0x35123b();}catch(_0x4f0c70){_0x22737d=window;}const _0xc283c4=_0x22737d['console']=_0x22737d['console']||{},_0x329342=['log','warn','info','error','exception',_0x26f9d5(0xf9),'trace'];for(let _0x5ecf7f=0x0;_0x5ecf7f<_0x329342['length'];_0x5ecf7f++){const _0x41298a=a25_0x404085[_0x26f9d5(0xfd)]['prototype'][_0x26f9d5(0x109)](a25_0x404085),_0x5283dc=_0x329342[_0x5ecf7f],_0x59ff5b=_0xc283c4[_0x5283dc]||_0x41298a;_0x41298a['__proto__']=a25_0x404085['bind'](a25_0x404085),_0x41298a[_0x26f9d5(0xe9)]=_0x59ff5b[_0x26f9d5(0xe9)][_0x26f9d5(0x109)](_0x59ff5b),_0xc283c4[_0x5283dc]=_0x41298a;}});a25_0xc1cfd6();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a25_0x36f7(){const _0x559a1a=['style','warn','split','toUpperCase','playersD3','desc','Error\x20joining\x20ladder:','exists','onclick','addEventListener','textContent','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','toString','Error\x20joining\x20ladder:\x20','players','currentUser','username','Authentication\x20verification\x20failed:','playersCTF','You\x20are\x20already\x20part\x20of\x20the\x20','trim','error','toLowerCase','nonParticipants','none','DUOS','ladder-join-status\x20error','change','table','return\x20(function()\x20','disabled','log','constructor','uid','join-ladder-button','input[name=\x22ladder\x22]','Successfully\x20joined\x20the\x20','target','className','email','playersDuos','playersD2','display','ladder-join-status','bind','getElementById'];a25_0x36f7=function(){return _0x559a1a;};return a25_0x36f7();}import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';function a25_0xb6d1(_0x2a0b66,_0x3a8820){const _0xc1cfd6=a25_0x36f7();return a25_0xb6d1=function(_0x404085,_0x1148c4){_0x404085=_0x404085-0xdd;let _0x36f7e6=_0xc1cfd6[_0x404085];return _0x36f7e6;},a25_0xb6d1(_0x2a0b66,_0x3a8820);}document['addEventListener']('DOMContentLoaded',()=>{const _0x47a4c1=a25_0xb6d1,_0x24b3c3=document['getElementById']('d1-switch'),_0xd365dc=document[_0x47a4c1(0x10a)]('d2-switch');console[_0x47a4c1(0xfc)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x24b3c3),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0xd365dc);function _0x36373e(){const _0x1db71f=_0x47a4c1;document['querySelectorAll'](_0x1db71f(0x100))['forEach'](_0x156a1e=>{const _0x5d185c=_0x1db71f;_0x156a1e[_0x5d185c(0xe6)](_0x5d185c(0xf8),_0x518aa6=>{const _0x506fb4=_0x5d185c;_0x518aa6[_0x506fb4(0x102)]['checked']&&(currentLadder=_0x518aa6['target']['value'],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x36373e();const _0xa4956b=document['getElementById']('join-ladder-button');_0xa4956b&&_0xa4956b['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x3071a4=>{const _0x3c0e34=_0x47a4c1;if(_0x3071a4)checkUserLadderStatus();else{const _0x27302e=document['getElementById']('ladder-join-prompt');_0x27302e&&(_0x27302e['style']['display']=_0x3c0e34(0xf5));}});});function getCollectionName(_0x273a35){const _0x279094=a25_0xb6d1;switch(_0x273a35?.[_0x279094(0xe0)]()){case'D1':return _0x279094(0xeb);case'D2':return'playersD2';case'D3':return _0x279094(0xe1);case _0x279094(0xf6):case'DUO':return _0x279094(0x105);case'CTF':return'playersCTF';default:console[_0x279094(0xde)]('Unknown\x20ladder\x20type:\x20'+_0x273a35+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x43877e=a25_0xb6d1;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x39829e=auth[_0x43877e(0xec)],_0x17146e=document['getElementById']('ladder-join-prompt'),_0x3e0452=document['getElementById']('join-ladder-type'),_0x4ed5a7=document[_0x43877e(0x10a)]('tiny-join-button');if(!_0x39829e||!_0x39829e['uid']||!_0x17146e||!_0x3e0452||!_0x4ed5a7){if(_0x17146e)_0x17146e['style']['display']=_0x43877e(0xf5);if(_0x4ed5a7)_0x4ed5a7['style']['display']='none';return;}try{try{await _0x39829e['getIdToken'](![]);}catch(_0x5d8aec){console['error'](_0x43877e(0xee),_0x5d8aec),_0x17146e['style'][_0x43877e(0x107)]='none',_0x4ed5a7[_0x43877e(0xdd)]['display']='none';return;}const _0x1abb96=getCollectionName(currentLadder),_0x59f461=doc(db,_0x1abb96,_0x39829e['uid']),_0x48e927=await getDoc(_0x59f461);if(_0x48e927[_0x43877e(0xe4)]())_0x17146e['style']['display']='none',_0x4ed5a7['style']['display']='none';else{_0x17146e['style']['display']='none',_0x4ed5a7['style'][_0x43877e(0x107)]='block',_0x3e0452['textContent']=currentLadder,_0x4ed5a7[_0x43877e(0xe5)]=()=>{_0x17146e['style']['display']==='block'?_0x17146e['style']['display']='none':_0x17146e['style']['display']='block';};const _0x6f6e5d=document['getElementById']('join-username-input'),_0x261b47=document['getElementById']('ladder-join-status');if(_0x6f6e5d)_0x6f6e5d['value']='';_0x261b47&&(_0x261b47['textContent']='',_0x261b47['className']=_0x43877e(0x108));}}catch(_0x17ae26){console[_0x43877e(0xf2)]('Error\x20checking\x20ladder\x20status:',_0x17ae26),_0x17146e[_0x43877e(0xdd)]['display']='none',_0x4ed5a7['style'][_0x43877e(0x107)]=_0x43877e(0xf5);}}async function handleJoinLadder(){const _0x125f46=a25_0xb6d1,_0x389580=auth['currentUser'],_0xbd3f85=document['getElementById'](_0x125f46(0xff)),_0x25e3cd=document['getElementById'](_0x125f46(0x108)),_0x26f0a9=document['getElementById']('join-username-input');if(!_0x389580||!_0x389580['uid']){_0x25e3cd[_0x125f46(0xe7)]='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x25e3cd['className']='ladder-join-status\x20error';return;}try{await _0x389580['getIdToken'](!![]);}catch(_0x515b62){console['error']('Authentication\x20error:',_0x515b62),_0x25e3cd['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x25e3cd['className']='ladder-join-status\x20error';return;}if(!_0x26f0a9||!_0x26f0a9['value'][_0x125f46(0xf1)]()){_0x25e3cd[_0x125f46(0xe7)]='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x25e3cd['className']='ladder-join-status\x20error';return;}try{_0xbd3f85['disabled']=!![],_0x25e3cd[_0x125f46(0xe7)]='Verifying\x20username...',_0x25e3cd[_0x125f46(0x103)]='ladder-join-status\x20loading';let _0x38bfb4='',_0x3e8d91=null;const _0x1e4f83=['players',_0x125f46(0x106),_0x125f46(0xe1),_0x125f46(0x105),_0x125f46(0xef),_0x125f46(0xf4)];for(const _0x4931bb of _0x1e4f83){try{const _0x3aea74=doc(db,_0x4931bb,_0x389580[_0x125f46(0xfe)]),_0x40d8c5=await getDoc(_0x3aea74);if(_0x40d8c5['exists']()){_0x3e8d91=_0x40d8c5['data']();if(_0x3e8d91[_0x125f46(0xed)]){_0x38bfb4=_0x3e8d91['username'];break;}}}catch(_0x340d2a){console['error']('Error\x20checking\x20'+_0x4931bb+':',_0x340d2a);}}!_0x38bfb4&&_0x389580['email']&&(_0x38bfb4=_0x389580['email'][_0x125f46(0xdf)]('@')[0x0]);if(!_0x38bfb4){_0x25e3cd[_0x125f46(0xe7)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x25e3cd['className']='ladder-join-status\x20error',_0xbd3f85['disabled']=![];return;}const _0x25e6e9=_0x26f0a9['value']['trim']();if(_0x38bfb4&&_0x25e6e9[_0x125f46(0xf3)]()!==_0x38bfb4['toLowerCase']()){_0x25e3cd[_0x125f46(0xe7)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x38bfb4+'\x22\x20to\x20confirm.',_0x25e3cd['className']='ladder-join-status\x20error',_0xbd3f85[_0x125f46(0xfb)]=![];return;}_0x25e3cd['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x19a53f=getCollectionName(currentLadder),_0x312222=doc(db,_0x19a53f,_0x389580['uid']),_0x5ae789=await getDoc(_0x312222);if(_0x5ae789['exists']()){_0x25e3cd['textContent']=_0x125f46(0xf0)+currentLadder+'\x20ladder.',_0x25e3cd['className']='ladder-join-status\x20error',_0xbd3f85['disabled']=![];return;}try{await _0x389580['getIdToken'](!![]);}catch(_0x4521f4){_0x25e3cd['textContent']=_0x125f46(0xe8),_0x25e3cd['className']=_0x125f46(0xf7),_0xbd3f85['disabled']=![];return;}const _0x41a052=_0x38bfb4,_0x23f593=collection(db,_0x19a53f),_0xb7e322=query(_0x23f593,orderBy('position',_0x125f46(0xe2)),limit(0x1)),_0x2a8f00=await getDocs(_0xb7e322);let _0x5e2ddb=0x1;if(!_0x2a8f00['empty']){const _0x262e34=_0x2a8f00['docs'][0x0]['data']();_0x5e2ddb=(_0x262e34['position']||0x0)+0x1;}const _0x148cc1={'username':_0x41a052,'email':_0x389580[_0x125f46(0x104)],'eloRating':0x4b0,'position':_0x5e2ddb,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x312222,_0x148cc1),currentLadder===_0x125f46(0xf6)?_0x25e3cd['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x25e3cd[_0x125f46(0xe7)]=_0x125f46(0x101)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x25e3cd[_0x125f46(0x103)]='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x4633cd){console[_0x125f46(0xf2)](_0x125f46(0xe3),_0x4633cd),_0x25e3cd['textContent']=_0x125f46(0xea)+_0x4633cd['message'],_0x25e3cd['className']='ladder-join-status\x20error',_0xbd3f85['disabled']=![];}}