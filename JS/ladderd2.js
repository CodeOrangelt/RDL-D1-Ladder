const a30_0x47e1d5=a30_0x55e9,a30_0x43e530=(function(){let _0xada43e=!![];return function(_0x144824,_0x39eace){const _0x1c0059=_0xada43e?function(){const _0x513a3c=a30_0x55e9;if(_0x39eace){const _0x3f6f3f=_0x39eace[_0x513a3c(0x11c)](_0x144824,arguments);return _0x39eace=null,_0x3f6f3f;}}:function(){};return _0xada43e=![],_0x1c0059;};}()),a30_0x98065=a30_0x43e530(this,function(){const _0x443a6d=a30_0x55e9,_0x2c9311=function(){const _0x1f070d=a30_0x55e9;let _0x5b65e8;try{_0x5b65e8=Function(_0x1f070d(0x18c)+_0x1f070d(0x11e)+');')();}catch(_0x25d459){_0x5b65e8=window;}return _0x5b65e8;},_0x37b859=_0x2c9311(),_0x20de3f=_0x37b859[_0x443a6d(0x133)]=_0x37b859[_0x443a6d(0x133)]||{},_0x3167ce=[_0x443a6d(0x14e),_0x443a6d(0x187),_0x443a6d(0x17e),_0x443a6d(0x130),_0x443a6d(0x118),_0x443a6d(0x161),_0x443a6d(0x136)];for(let _0x526911=0x0;_0x526911<_0x3167ce[_0x443a6d(0x138)];_0x526911++){const _0x5d7776=a30_0x43e530[_0x443a6d(0x17b)][_0x443a6d(0x14b)][_0x443a6d(0x13e)](a30_0x43e530),_0xac6f4d=_0x3167ce[_0x526911],_0x3234d7=_0x20de3f[_0xac6f4d]||_0x5d7776;_0x5d7776[_0x443a6d(0x10c)]=a30_0x43e530[_0x443a6d(0x13e)](a30_0x43e530),_0x5d7776[_0x443a6d(0x114)]=_0x3234d7[_0x443a6d(0x114)][_0x443a6d(0x13e)](_0x3234d7),_0x20de3f[_0xac6f4d]=_0x5d7776;}});a30_0x98065();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a30_0x589072 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},profileCacheD2={'data':null,'timestamp':0x0},matchStatsCacheD2={'data':null,'timestamp':0x0},eloHistoryCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x5*0x3c*0x3e8,PROFILE_CACHE_DURATION=0xa*0x3c*0x3e8,MATCH_STATS_CACHE_DURATION=0x3*0x3c*0x3e8,ELO_HISTORY_CACHE_DURATION=0x2*0x3c*0x3e8;async function loadLadderDataOptimizedD2(_0x115362=![]){const _0x99582e=a30_0x55e9,_0x130569=Date[_0x99582e(0x119)]();if(!_0x115362&&playerCacheD2[_0x99582e(0x154)]&&_0x130569-playerCacheD2[_0x99582e(0x16c)]<CACHE_DURATION){console[_0x99582e(0x14e)](_0x99582e(0x146));const _0xa7a24=playerCacheD2[_0x99582e(0x154)][_0x99582e(0x15b)](_0x1f1532=>_0x1f1532[_0x99582e(0x190)]),_0xe8c620=await fetchBatchMatchStatsD2(_0xa7a24);return{'players':playerCacheD2[_0x99582e(0x154)],'matchStatsBatch':_0xe8c620};}const [_0x2d2a98,_0x3ce3de]=await Promise[_0x99582e(0x17a)]([getDocs(collection(db,_0x99582e(0x156))),getDocs(collection(db,_0x99582e(0x158)))]),_0x5c11e7=[];_0x2d2a98[_0x99582e(0x113)](_0x287c7d=>{const _0x4876f5=_0x99582e,_0x1ce986=_0x287c7d[_0x4876f5(0x154)]();_0x1ce986[_0x4876f5(0x190)]&&_0x5c11e7[_0x4876f5(0x13f)]({..._0x1ce986,'id':_0x287c7d['id'],'elo':_0x1ce986[_0x4876f5(0x142)]||0x0,'position':_0x1ce986[_0x4876f5(0x10b)]||Number[_0x4876f5(0x12c)]});});const _0x501255=new Map();_0x3ce3de[_0x99582e(0x113)](_0x1ce2d7=>{const _0x51d5d2=_0x99582e,_0x2ffc61=_0x1ce2d7[_0x51d5d2(0x154)]();_0x2ffc61[_0x51d5d2(0x190)]&&_0x501255[_0x51d5d2(0x170)](_0x2ffc61[_0x51d5d2(0x190)][_0x51d5d2(0x15a)](),_0x2ffc61);});for(const _0x53c20c of _0x5c11e7){const _0x3f5435=_0x53c20c[_0x99582e(0x190)][_0x99582e(0x15a)]();if(_0x501255[_0x99582e(0x188)](_0x3f5435)){const _0x19b36c=_0x501255[_0x99582e(0x149)](_0x3f5435);_0x19b36c[_0x99582e(0x166)]&&(_0x53c20c[_0x99582e(0x166)]=_0x19b36c[_0x99582e(0x166)][_0x99582e(0x15a)]()),_0x53c20c[_0x99582e(0x10e)]=_0x19b36c[_0x99582e(0x10e)]||0x0;}else _0x53c20c[_0x99582e(0x10e)]=0x0;}const _0x14b08a=_0x5c11e7[_0x99582e(0x15b)](_0x200e4e=>_0x200e4e[_0x99582e(0x190)]),_0x3512ed=await fetchBatchMatchStatsD2(_0x14b08a);return _0x5c11e7[_0x99582e(0x16d)]((_0x1e7917,_0x50391d)=>{const _0x517950=_0x99582e,_0x3db2c5=_0x3512ed[_0x517950(0x149)](_0x1e7917[_0x517950(0x190)])?.[_0x517950(0x193)]||0x0,_0x3e3e15=_0x3512ed[_0x517950(0x149)](_0x50391d[_0x517950(0x190)])?.[_0x517950(0x193)]||0x0;if(_0x3db2c5===0x0!==(_0x3e3e15===0x0))return _0x3db2c5===0x0?0x1:-0x1;return(_0x1e7917[_0x517950(0x10b)]||0x3e7)-(_0x50391d[_0x517950(0x10b)]||0x3e7);}),_0x5c11e7[_0x99582e(0x113)]((_0x2e4359,_0x53cdfa)=>{const _0x4b7b67=_0x99582e;_0x2e4359[_0x4b7b67(0x10b)]=_0x53cdfa+0x1;}),playerCacheD2[_0x99582e(0x154)]=_0x5c11e7,playerCacheD2[_0x99582e(0x16c)]=_0x130569,{'players':_0x5c11e7,'matchStatsBatch':_0x3512ed};}function a30_0x55e9(_0x1e07be,_0x1ca062){const _0x98065=a30_0x8127();return a30_0x55e9=function(_0x43e530,_0x4f7e03){_0x43e530=_0x43e530-0x10a;let _0x81279f=_0x98065[_0x43e530];return _0x81279f;},a30_0x55e9(_0x1e07be,_0x1ca062);}async function displayLadderD2(_0x7943d9=![]){const _0x18b335=a30_0x55e9,_0x3e6609=document[_0x18b335(0x151)](_0x18b335(0x12f));if(!_0x3e6609){console[_0x18b335(0x130)](_0x18b335(0x16a));return;}_0x3e6609[_0x18b335(0x124)]=_0x18b335(0x117);try{const {players:_0x2071d1,matchStatsBatch:_0x5922ca}=await loadLadderDataOptimizedD2(_0x7943d9);await updateLadderDisplayD2(_0x2071d1,_0x5922ca);}catch(_0x3bc256){console[_0x18b335(0x130)](_0x18b335(0x14d),_0x3bc256),_0x3e6609[_0x18b335(0x124)]=_0x18b335(0x157)+_0x3bc256[_0x18b335(0x159)]+_0x18b335(0x167);}}function getNextAvailablePositionD2(_0x28dbd5){const _0x3e50e6=a30_0x55e9;if(_0x28dbd5[_0x3e50e6(0x138)]===0x0)return 0x1;let _0x40aff2=0x0;return _0x28dbd5[_0x3e50e6(0x113)](_0x478527=>{const _0x1f2099=_0x3e50e6;_0x478527[_0x1f2099(0x10b)]&&typeof _0x478527[_0x1f2099(0x10b)]===_0x1f2099(0x11d)&&_0x478527[_0x1f2099(0x10b)]>_0x40aff2&&(_0x40aff2=_0x478527[_0x1f2099(0x10b)]);}),_0x40aff2+0x1;}async function updatePlayerPositions(_0x152ee8,_0x550169){const _0x4e90e8=a30_0x55e9;try{const _0x2f6c11=collection(db,_0x4e90e8(0x156)),_0x15bf56=await getDocs(_0x2f6c11),_0x678e29=[];_0x15bf56[_0x4e90e8(0x113)](_0x28ae17=>{const _0x5dfddd=_0x4e90e8;_0x678e29[_0x5dfddd(0x13f)]({'id':_0x28ae17['id'],..._0x28ae17[_0x5dfddd(0x154)]()});});const _0x5c9e7e=_0x678e29[_0x4e90e8(0x155)](_0x121e82=>_0x121e82[_0x4e90e8(0x190)]===_0x152ee8),_0x1c2b63=_0x678e29[_0x4e90e8(0x155)](_0x479e07=>_0x479e07[_0x4e90e8(0x190)]===_0x550169);if(!_0x5c9e7e||!_0x1c2b63){console[_0x4e90e8(0x130)](_0x4e90e8(0x13a));return;}if(_0x5c9e7e[_0x4e90e8(0x10b)]>_0x1c2b63[_0x4e90e8(0x10b)]){const _0x2fd401=_0x1c2b63[_0x4e90e8(0x10b)];for(const _0x229ee7 of _0x678e29){_0x229ee7[_0x4e90e8(0x10b)]>=_0x1c2b63[_0x4e90e8(0x10b)]&&_0x229ee7[_0x4e90e8(0x10b)]<_0x5c9e7e[_0x4e90e8(0x10b)]&&_0x229ee7[_0x4e90e8(0x190)]!==_0x152ee8&&await updateDoc(doc(db,_0x4e90e8(0x156),_0x229ee7['id']),{'position':_0x229ee7[_0x4e90e8(0x10b)]+0x1});}await updateDoc(doc(db,_0x4e90e8(0x156),_0x5c9e7e['id']),{'position':_0x2fd401});if(_0x2fd401===0x1){const _0x482b47=doc(db,_0x4e90e8(0x156),_0x5c9e7e['id']),_0x596466=await getDoc(_0x482b47);!_0x596466[_0x4e90e8(0x154)]()[_0x4e90e8(0x18b)]&&await updateDoc(_0x482b47,{'firstPlaceDate':Timestamp[_0x4e90e8(0x119)]()});}if(_0x1c2b63[_0x4e90e8(0x10b)]===0x1){const _0x33da7a=doc(db,_0x4e90e8(0x156),_0x1c2b63['id']);await updateDoc(_0x33da7a,{'firstPlaceDate':null});}playerCacheD2[_0x4e90e8(0x16c)]=0x0;}}catch(_0x16b37e){console[_0x4e90e8(0x130)](_0x4e90e8(0x12d),_0x16b37e);}}function getPlayerRankNameD2(_0x2e56e5,_0x1901d4=0x0,_0x11b2e5=0x0){const _0x291077=a30_0x55e9;if(_0x1901d4===0x0)return _0x291077(0x169);if(_0x2e56e5>=0x3e8&&_0x11b2e5>=0x50&&_0x1901d4>=0x14)return _0x291077(0x175);if(_0x2e56e5>=0x2bc)return _0x291077(0x122);if(_0x2e56e5>=0x1f4)return _0x291077(0x16b);if(_0x2e56e5>=0xc8)return _0x291077(0x194);return _0x291077(0x169);}function a30_0x8127(){const _0x4f0458=['\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22flag-placeholder\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22token-placeholder\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20','position','__proto__','losses','points','function','totalKills','#FFD700','desc','forEach','toString','textContent','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td>','<tr><td\x20colspan=\x229\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','exception','now','#CD7F32','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','apply','number','{}.constructor(\x22return\x20this\x22)(\x20)','winnerUsername','#50C878','loserUsername','Gold','#DC143C','innerHTML','D2:\x20Error\x20fetching\x20ELO\x20history:','querySelectorAll','catch','toFixed','dataset','&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','totalDeaths','MAX_SAFE_INTEGER','Error\x20updating\x20D2\x20player\x20positions:','color','#ladder-d2\x20tbody','error','</td>\x0a\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','0.85em','console',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','(Equipped)','trace',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','length','#ladder-d2\x20thead\x20tr','Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list','eloHistory','#4CAF50','fontSize','bind','push','newElo','\x0a<tr>\x0a\x20\x20\x20\x20<td>','eloRating','previousElo','seconds','display','Using\x20cached\x20D2\x20ladder\x20data','playerUsername','#C0C0C0','get','\x22\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','prototype','wins','Error\x20loading\x20D2\x20ladder:','log','.flag-placeholder','loserScore','querySelector','winnerScore','elo','data','find','playersD2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x229\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20','userProfiles','message','toLowerCase','map','inline','winRate','%</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','refreshLadderDisplayD2','true','table','tokenImage','fontWeight','kda','td:nth-child(3)','country','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','#F44336','Unranked','D2\x20Ladder\x20table\x20body\x20not\x20found','Silver','timestamp','sort','style','gameMode','set','approvedMatchesD2','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','tokenName','Emerald','indexOf','initialized','\x22\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','<img\x20src=\x22../images/flags/','all','constructor','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','eloHistoryD2','info','bold','createElement','.trend-indicator','.token-placeholder','</td>\x0a</tr>','appendChild','player','Error\x20loading\x20D2\x20tokens:','warn','has','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','includes','firstPlaceDate','return\x20(function()\x20','</td>\x0a\x20\x20\x20\x20<td>','then','<img\x20src=\x22','username','equipped','createDocumentFragment','totalMatches','Bronze','displayLadderD2\x20function\x20not\x20available','size','change','Error\x20updating\x20D2\x20ELO\x20changes:'];a30_0x8127=function(){return _0x4f0458;};return a30_0x8127();}window[a30_0x47e1d5(0x15f)]=function(_0x589e5c=!![]){const _0x1741d6=a30_0x47e1d5;typeof displayLadderD2===_0x1741d6(0x10f)?displayLadderD2(_0x589e5c):console[_0x1741d6(0x187)](_0x1741d6(0x195));};async function updateLadderDisplayD2(_0x51c7ac,_0x4ee28b=null){const _0x129b72=a30_0x47e1d5,_0x4fcc93=document[_0x129b72(0x151)](_0x129b72(0x12f));if(!_0x4fcc93){console[_0x129b72(0x130)](_0x129b72(0x16a));return;}const _0x23c624=document[_0x129b72(0x151)](_0x129b72(0x139));_0x23c624&&!_0x23c624[_0x129b72(0x129)][_0x129b72(0x177)]&&(_0x23c624[_0x129b72(0x124)]=_0x129b72(0x189),_0x23c624[_0x129b72(0x129)][_0x129b72(0x177)]=_0x129b72(0x160));_0x51c7ac[_0x129b72(0x16d)]((_0x98be49,_0x421b05)=>_0x98be49[_0x129b72(0x10b)]-_0x421b05[_0x129b72(0x10b)]);if(!_0x4ee28b){const _0x4ad0d9=_0x51c7ac[_0x129b72(0x15b)](_0x4d10d3=>_0x4d10d3[_0x129b72(0x190)]);_0x4ee28b=await fetchBatchMatchStatsD2(_0x4ad0d9);}const _0x3e9d95=document[_0x129b72(0x192)]();_0x51c7ac[_0x129b72(0x113)](_0x32a73d=>{const _0x3ad910=_0x129b72,_0x9c6c61=_0x4ee28b[_0x3ad910(0x149)](_0x32a73d[_0x3ad910(0x190)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0},_0x31a152=document[_0x3ad910(0x180)]('tr');_0x31a152[_0x3ad910(0x124)]=createPlayerRowWithTokenD2(_0x32a73d,_0x9c6c61,null),_0x3e9d95[_0x3ad910(0x184)](_0x31a152);}),_0x4fcc93[_0x129b72(0x124)]='',_0x4fcc93[_0x129b72(0x184)](_0x3e9d95);const _0xacd0ae=_0x51c7ac[_0x129b72(0x15b)](_0x1aeaaa=>_0x1aeaaa[_0x129b72(0x190)]);loadTokensAsyncD2(_0x4fcc93,_0x51c7ac,_0x4ee28b,_0xacd0ae),loadEloChangesAsyncD2(_0x4fcc93,_0xacd0ae);}async function loadTokensAsyncD2(_0x402fe2,_0x294113,_0x560651,_0x4e3118){const _0x40bc57=a30_0x47e1d5;try{const _0x51f769=await getTokensByUsernames(_0x4e3118);enhanceLadderWithTokensD2(_0x402fe2,_0x294113,_0x560651,_0x51f769);}catch(_0x2acbd1){return console[_0x40bc57(0x130)](_0x40bc57(0x186),_0x2acbd1),new Map();}}function enhanceLadderWithTokensD2(_0x593828,_0x47d263,_0x1c567e,_0x56be38){const _0x1c2843=a30_0x47e1d5,_0x370014=_0x593828[_0x1c2843(0x126)]('tr');_0x47d263[_0x1c2843(0x113)]((_0x4e782e,_0x2b7c2f)=>{const _0x2da7dc=_0x1c2843;if(_0x2b7c2f>=_0x370014[_0x2da7dc(0x138)])return;const _0x254670=_0x370014[_0x2b7c2f],_0x1b1f9c=_0x254670[_0x2da7dc(0x151)](_0x2da7dc(0x14f)),_0x36d839=_0x254670[_0x2da7dc(0x151)](_0x2da7dc(0x182));_0x4e782e[_0x2da7dc(0x166)]&&_0x1b1f9c&&(_0x1b1f9c[_0x2da7dc(0x124)]=_0x2da7dc(0x179)+_0x4e782e[_0x2da7dc(0x166)][_0x2da7dc(0x15a)]()+_0x2da7dc(0x172)+_0x4e782e[_0x2da7dc(0x166)]+_0x2da7dc(0x14a));const _0x3fcaff=_0x56be38[_0x2da7dc(0x149)](_0x4e782e[_0x2da7dc(0x190)])||[],_0x1398a9=getPrimaryDisplayToken(_0x3fcaff);_0x1398a9&&_0x36d839&&(_0x36d839[_0x2da7dc(0x124)]=_0x2da7dc(0x18f)+_0x1398a9[_0x2da7dc(0x162)]+_0x2da7dc(0x173)+_0x1398a9[_0x2da7dc(0x174)]+_0x2da7dc(0x178)+_0x1398a9[_0x2da7dc(0x174)]+'\x20'+(_0x1398a9[_0x2da7dc(0x191)]?_0x2da7dc(0x135):'')+_0x2da7dc(0x17c));});}function loadEloChangesAsyncD2(_0x7b29b2,_0x2bf233){const _0x2c25c7=a30_0x47e1d5;getPlayersLastEloChangesD2(_0x2bf233)[_0x2c25c7(0x18e)](_0x1983e2=>{const _0x404221=_0x2c25c7,_0x2eded7=_0x7b29b2[_0x404221(0x126)]('tr');_0x1983e2[_0x404221(0x113)]((_0x58c133,_0x54a990)=>{const _0x20a2f8=_0x404221,_0x1c3c16=_0x2bf233[_0x20a2f8(0x176)](_0x54a990);if(_0x1c3c16!==-0x1&&_0x1c3c16<_0x2eded7[_0x20a2f8(0x138)]&&_0x58c133!==0x0){const _0x486cd0=_0x2eded7[_0x1c3c16],_0xf4fd37=_0x486cd0[_0x20a2f8(0x151)](_0x20a2f8(0x165));if(_0xf4fd37){const _0x4fbf35=_0xf4fd37[_0x20a2f8(0x151)](_0x20a2f8(0x181));if(_0x4fbf35){const _0xb535ca=_0x58c133>0x0?'+'+_0x58c133:''+_0x58c133;_0x4fbf35[_0x20a2f8(0x115)]=_0xb535ca,_0x4fbf35[_0x20a2f8(0x16e)][_0x20a2f8(0x12e)]=_0x58c133>0x0?_0x20a2f8(0x13c):_0x20a2f8(0x168),_0x4fbf35[_0x20a2f8(0x16e)][_0x20a2f8(0x163)]=_0x20a2f8(0x17f),_0x4fbf35[_0x20a2f8(0x16e)][_0x20a2f8(0x13d)]=_0x20a2f8(0x132),_0x4fbf35[_0x20a2f8(0x16e)][_0x20a2f8(0x145)]=_0x20a2f8(0x15c);}}}});})[_0x2c25c7(0x127)](_0x148e7f=>console[_0x2c25c7(0x130)](_0x2c25c7(0x198),_0x148e7f));}function createPlayerRowWithTokenD2(_0x4a3ad0,_0x1aac00,_0x52d36a){const _0x20591d=a30_0x47e1d5,_0x7c1d48=parseFloat(_0x4a3ad0[_0x20591d(0x153)])||0x0;let _0x5671f0=_0x20591d(0x123);if(_0x1aac00[_0x20591d(0x193)]===0x0)_0x5671f0=_0x20591d(0x123);else{if(_0x7c1d48>=0x3e8&&_0x1aac00[_0x20591d(0x15d)]>=0x50&&_0x1aac00[_0x20591d(0x193)]>=0x14)_0x5671f0=_0x20591d(0x120);else{if(_0x7c1d48>=0x2bc)_0x5671f0=_0x20591d(0x111);else{if(_0x7c1d48>=0x1f4)_0x5671f0=_0x20591d(0x148);else _0x7c1d48>=0xc8&&(_0x5671f0=_0x20591d(0x11a));}}}return _0x20591d(0x141)+_0x4a3ad0[_0x20591d(0x10b)]+_0x20591d(0x131)+encodeURIComponent(_0x4a3ad0[_0x20591d(0x190)])+_0x20591d(0x12a)+_0x5671f0+_0x20591d(0x137)+_0x4a3ad0[_0x20591d(0x190)]+_0x20591d(0x10a)+_0x5671f0+_0x20591d(0x134)+_0x7c1d48+_0x20591d(0x116)+_0x1aac00[_0x20591d(0x193)]+_0x20591d(0x18d)+_0x1aac00[_0x20591d(0x14c)]+_0x20591d(0x18d)+_0x1aac00[_0x20591d(0x10d)]+_0x20591d(0x18d)+_0x1aac00[_0x20591d(0x164)]+_0x20591d(0x18d)+_0x1aac00[_0x20591d(0x15d)]+_0x20591d(0x15e)+(_0x4a3ad0[_0x20591d(0x10e)]||0x0)+_0x20591d(0x183);}async function getPlayersLastEloChangesD2(_0x28ce1c){const _0x5831ed=a30_0x47e1d5,_0xb7dce4=new Map();_0x28ce1c[_0x5831ed(0x113)](_0x2fd17f=>_0xb7dce4[_0x5831ed(0x170)](_0x2fd17f,0x0));try{const _0x1beb7a=collection(db,_0x5831ed(0x17d)),_0x478d22=query(_0x1beb7a,orderBy(_0x5831ed(0x16c),_0x5831ed(0x112)),limit(0x64)),_0x4db3c4=await getDocs(_0x478d22),_0x22ac11=new Map(),_0x268682=await getDocs(collection(db,_0x5831ed(0x156)));_0x268682[_0x5831ed(0x113)](_0x42eddc=>{const _0x44b7e6=_0x5831ed,_0x139495=_0x42eddc[_0x44b7e6(0x154)]();_0x139495[_0x44b7e6(0x190)]&&_0x22ac11[_0x44b7e6(0x170)](_0x42eddc['id'],_0x139495[_0x44b7e6(0x190)]);});const _0x5b2da1=new Map();_0x4db3c4[_0x5831ed(0x113)](_0x42957f=>{const _0x5d1eed=_0x5831ed,_0x51f6a0=_0x42957f[_0x5d1eed(0x154)]();let _0x4f5f67=_0x51f6a0[_0x5d1eed(0x190)]||_0x51f6a0[_0x5d1eed(0x147)];!_0x4f5f67&&_0x51f6a0[_0x5d1eed(0x185)]&&_0x22ac11[_0x5d1eed(0x188)](_0x51f6a0[_0x5d1eed(0x185)])&&(_0x4f5f67=_0x22ac11[_0x5d1eed(0x149)](_0x51f6a0[_0x5d1eed(0x185)])),_0x4f5f67&&_0x28ce1c[_0x5d1eed(0x18a)](_0x4f5f67)&&(!_0x5b2da1[_0x5d1eed(0x188)](_0x4f5f67)&&_0x5b2da1[_0x5d1eed(0x170)](_0x4f5f67,[]),_0x5b2da1[_0x5d1eed(0x149)](_0x4f5f67)[_0x5d1eed(0x13f)]({..._0x51f6a0,'timestamp':_0x51f6a0[_0x5d1eed(0x16c)]?.[_0x5d1eed(0x144)]||0x0,'username':_0x4f5f67}));}),_0x5b2da1[_0x5831ed(0x113)]((_0x51c6e,_0x54e200)=>{const _0x129159=_0x5831ed;if(_0x51c6e[_0x129159(0x138)]>0x0){_0x51c6e[_0x129159(0x16d)]((_0x5ed9cf,_0x103d9a)=>_0x103d9a[_0x129159(0x16c)]-_0x5ed9cf[_0x129159(0x16c)]);const _0x30848b=_0x51c6e[_0x129159(0x155)](_0x46574a=>_0x46574a[_0x129159(0x197)]!==undefined||_0x46574a[_0x129159(0x140)]!==undefined&&_0x46574a[_0x129159(0x143)]!==undefined);if(_0x30848b){let _0x446cb9;if(_0x30848b[_0x129159(0x197)]!==undefined)_0x446cb9=_0x30848b[_0x129159(0x197)];else _0x30848b[_0x129159(0x140)]!==undefined&&_0x30848b[_0x129159(0x143)]!==undefined&&(_0x446cb9=_0x30848b[_0x129159(0x140)]-_0x30848b[_0x129159(0x143)]);_0x446cb9!==undefined&&_0xb7dce4[_0x129159(0x170)](_0x54e200,_0x446cb9);}}});if(_0x5b2da1[_0x5831ed(0x196)]===0x0){const _0x4796a3=collection(db,_0x5831ed(0x13b)),_0x480078=query(_0x4796a3,where(_0x5831ed(0x16f),'==','D2'),orderBy(_0x5831ed(0x16c),_0x5831ed(0x112)),limit(0x32));try{const _0x12c5a6=await getDocs(_0x480078);_0x12c5a6[_0x5831ed(0x113)](_0x2d6daf=>{const _0x45df4c=_0x5831ed,_0x4a9a40=_0x2d6daf[_0x45df4c(0x154)](),_0x3dae37=_0x4a9a40[_0x45df4c(0x190)]||_0x4a9a40[_0x45df4c(0x147)];if(_0x3dae37&&_0x28ce1c[_0x45df4c(0x18a)](_0x3dae37)){const _0x148b52=_0x4a9a40[_0x45df4c(0x197)]||(_0x4a9a40[_0x45df4c(0x140)]!==undefined&&_0x4a9a40[_0x45df4c(0x143)]!==undefined?_0x4a9a40[_0x45df4c(0x140)]-_0x4a9a40[_0x45df4c(0x143)]:0x0);_0x148b52!==0x0&&_0xb7dce4[_0x45df4c(0x170)](_0x3dae37,_0x148b52);}});}catch(_0x714499){}}}catch(_0x31c0cc){console[_0x5831ed(0x130)](_0x5831ed(0x125),_0x31c0cc);}return _0xb7dce4;}async function fetchBatchMatchStatsD2(_0x465e8b){const _0x48ddd2=a30_0x47e1d5,_0x2419b9=Date[_0x48ddd2(0x119)]();if(matchStatsCacheD2[_0x48ddd2(0x154)]&&_0x2419b9-matchStatsCacheD2[_0x48ddd2(0x16c)]<MATCH_STATS_CACHE_DURATION){const _0x326c84=new Map();return _0x465e8b[_0x48ddd2(0x113)](_0x4c4c9b=>{const _0xd1aa56=_0x48ddd2;matchStatsCacheD2[_0xd1aa56(0x154)][_0xd1aa56(0x188)](_0x4c4c9b)?_0x326c84[_0xd1aa56(0x170)](_0x4c4c9b,matchStatsCacheD2[_0xd1aa56(0x154)][_0xd1aa56(0x149)](_0x4c4c9b)):_0x326c84[_0xd1aa56(0x170)](_0x4c4c9b,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});}),_0x326c84;}const _0x4369f7=new Map();try{_0x465e8b[_0x48ddd2(0x113)](_0x4abc7d=>{const _0x8b501b=_0x48ddd2;_0x4369f7[_0x8b501b(0x170)](_0x4abc7d,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x43628c=collection(db,_0x48ddd2(0x171)),_0x51f9ea=await getDocs(_0x43628c);_0x51f9ea[_0x48ddd2(0x113)](_0x48a22d=>{const _0x4e1dca=_0x48ddd2,_0x9a8d6e=_0x48a22d[_0x4e1dca(0x154)](),_0x579403=_0x9a8d6e[_0x4e1dca(0x11f)],_0x4de751=_0x9a8d6e[_0x4e1dca(0x121)];if(_0x465e8b[_0x4e1dca(0x18a)](_0x579403)){const _0x595204=_0x4369f7[_0x4e1dca(0x149)](_0x579403);_0x595204[_0x4e1dca(0x14c)]++,_0x595204[_0x4e1dca(0x193)]++,_0x595204[_0x4e1dca(0x110)]+=parseInt(_0x9a8d6e[_0x4e1dca(0x152)])||0x0,_0x595204[_0x4e1dca(0x12b)]+=parseInt(_0x9a8d6e[_0x4e1dca(0x150)])||0x0;}if(_0x465e8b[_0x4e1dca(0x18a)](_0x4de751)){const _0x2af12b=_0x4369f7[_0x4e1dca(0x149)](_0x4de751);_0x2af12b[_0x4e1dca(0x10d)]++,_0x2af12b[_0x4e1dca(0x193)]++,_0x2af12b[_0x4e1dca(0x110)]+=parseInt(_0x9a8d6e[_0x4e1dca(0x150)])||0x0,_0x2af12b[_0x4e1dca(0x12b)]+=parseInt(_0x9a8d6e[_0x4e1dca(0x152)])||0x0;}}),_0x465e8b[_0x48ddd2(0x113)](_0x572acb=>{const _0x44c452=_0x48ddd2,_0x369740=_0x4369f7[_0x44c452(0x149)](_0x572acb);_0x369740[_0x44c452(0x164)]=_0x369740[_0x44c452(0x12b)]>0x0?(_0x369740[_0x44c452(0x110)]/_0x369740[_0x44c452(0x12b)])[_0x44c452(0x128)](0x2):_0x369740[_0x44c452(0x110)][_0x44c452(0x128)](0x2),_0x369740[_0x44c452(0x15d)]=_0x369740[_0x44c452(0x193)]>0x0?(_0x369740[_0x44c452(0x14c)]/_0x369740[_0x44c452(0x193)]*0x64)[_0x44c452(0x128)](0x1):0x0;}),matchStatsCacheD2[_0x48ddd2(0x154)]=_0x4369f7,matchStatsCacheD2[_0x48ddd2(0x16c)]=_0x2419b9;}catch(_0x18411f){console[_0x48ddd2(0x130)](_0x48ddd2(0x11b),_0x18411f);}return _0x4369f7;}export{displayLadderD2,updatePlayerPositions};