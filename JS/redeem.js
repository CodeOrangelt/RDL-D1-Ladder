const a48_0x4333ad=a48_0x4f4e,a48_0xf35655=(function(){let _0x53cd47=!![];return function(_0x91c2ac,_0x22426a){const _0x4ca80f=_0x53cd47?function(){const _0x22c5c2=a48_0x4f4e;if(_0x22426a){const _0x2a5eb4=_0x22426a[_0x22c5c2(0x1f3)](_0x91c2ac,arguments);return _0x22426a=null,_0x2a5eb4;}}:function(){};return _0x53cd47=![],_0x4ca80f;};}()),a48_0x40175d=a48_0xf35655(this,function(){const _0x5d8b12=a48_0x4f4e,_0x333aa7=function(){let _0x261def;try{_0x261def=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3d68fa){_0x261def=window;}return _0x261def;},_0x50d30c=_0x333aa7(),_0x12f6f8=_0x50d30c['console']=_0x50d30c['console']||{},_0x29e9b0=['log','warn',_0x5d8b12(0x1f7),'error','exception','table','trace'];for(let _0x3df98d=0x0;_0x3df98d<_0x29e9b0['length'];_0x3df98d++){const _0x2fd507=a48_0xf35655['constructor'][_0x5d8b12(0x1dd)][_0x5d8b12(0x213)](a48_0xf35655),_0x1f91bf=_0x29e9b0[_0x3df98d],_0x2cd616=_0x12f6f8[_0x1f91bf]||_0x2fd507;_0x2fd507['__proto__']=a48_0xf35655['bind'](a48_0xf35655),_0x2fd507['toString']=_0x2cd616['toString']['bind'](_0x2cd616),_0x12f6f8[_0x1f91bf]=_0x2fd507;}});a48_0x40175d();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a48_0xe8c2(){const _0x1285bc=['Sign\x20in\x20to\x20Purchase','toLocaleString','For\x20the\x20angry\x20type.','style','length','Classic\x20RDL','includes','div','prototype','Apply\x20Theme',',\x20Inventory:\x20','user-points','Can\x27t\x20get\x20enough','add','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','cannot-afford','You\x20need\x20','RedeemStore','You\x20must\x20purchase\x20this\x20theme\x20first','Emerald\x20City!','forEach','currentUser','price','Not\x20enough\x20points.\x20You\x20need\x20','\x20theme\x20purchased!','Current\x20Theme','purchase','\x20points?','display','apply','parentNode','inventory','textContent','info','success','points','\x20not\x20found','block','You\x20already\x20own\x20the\x20','‚úÖ\x20Purchased\x20','createElement','error','üè™\x20Redeem\x20store\x20initializing...','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','none','\x20points','dataset','New\x20user\x20profile\x20created','addEventListener','opacity','visible','name','Theme\x20system\x20not\x20found','DOMContentLoaded','Error\x20loading\x20user\x20data:','Please\x20sign\x20in\x20to\x20select\x20themes','theme_','‚ùå\x20User\x20not\x20authenticated','ThemeSystem','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','email','bind','You\x20can\x20see\x20better!','classList','can-afford','body','current-theme','description'];a48_0xe8c2=function(){return _0x1285bc;};return a48_0xe8c2();}import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a48_0x4333ad(0x1da),'description':a48_0x4333ad(0x211)},'purple':{'price':0x96,'name':'Purple','description':a48_0x4333ad(0x1e1)},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':a48_0x4333ad(0x1e9)},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':a48_0x4333ad(0x214)},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':'Red','description':a48_0x4333ad(0x1d7)}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document[a48_0x4333ad(0x206)](a48_0x4333ad(0x20b),()=>{const _0x4722ae=a48_0x4333ad;console['log'](_0x4722ae(0x200)),storeContainer=document['getElementById']('store-content'),pointsDisplay=document['getElementById'](_0x4722ae(0x1e0)),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x56c99e=>{const _0x2bfdd0=a48_0x4f4e;if(_0x56c99e){console['log']('‚úÖ\x20User\x20authenticated:',_0x56c99e['displayName']||_0x56c99e['email']);if(authWarning)authWarning[_0x2bfdd0(0x1d8)]['display']=_0x2bfdd0(0x202);if(storeContainer)storeContainer['style'][_0x2bfdd0(0x1f2)]=_0x2bfdd0(0x1fb);await loadUserData(_0x56c99e),updateThemeButtons();}else{console['log'](_0x2bfdd0(0x20f));if(authWarning)authWarning['style']['display']=_0x2bfdd0(0x1fb);if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x298dce){const _0x256c80=a48_0x4333ad;try{const _0x47fedd=doc(db,'userProfiles',_0x298dce['uid']),_0x41bc6b=await getDoc(_0x47fedd);if(_0x41bc6b['exists']()){const _0x549027=_0x41bc6b['data']();userData={'points':_0x549027['points']||0x0,'inventory':_0x549027['inventory']||[],'isAdmin':_0x549027['isAdmin']||![]},pointsDisplay&&(pointsDisplay[_0x256c80(0x1f6)]=userData['points']['toLocaleString']()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+_0x256c80(0x1df)+userData['inventory'][_0x256c80(0x1d9)]+'\x20items');}else await setDoc(_0x47fedd,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x298dce['displayName']||_0x298dce['email']?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console['log'](_0x256c80(0x205));}catch(_0x1dd9c4){console['error'](_0x256c80(0x20c),_0x1dd9c4);}}function a48_0x4f4e(_0x5b5c0d,_0x4ca7e0){const _0x40175d=a48_0xe8c2();return a48_0x4f4e=function(_0xf35655,_0x396d33){_0xf35655=_0xf35655-0x1d5;let _0xe8c2c1=_0x40175d[_0xf35655];return _0xe8c2c1;},a48_0x4f4e(_0x5b5c0d,_0x4ca7e0);}function userOwnsTheme(_0x212721){const _0xe47270=a48_0x4333ad;if(THEMES[_0x212721]?.[_0xe47270(0x1ec)]===0x0)return!![];return userData['inventory']['includes'](_0xe47270(0x20e)+_0x212721);}async function purchaseTheme(_0x3827b0){const _0x522e64=a48_0x4333ad,_0x582f4a=auth[_0x522e64(0x1eb)];if(!_0x582f4a)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x52e98a=THEMES[_0x3827b0];if(!_0x52e98a)return console['error']('Theme\x20'+_0x3827b0+'\x20not\x20found'),![];if(userData['points']<_0x52e98a[_0x522e64(0x1ec)])return showMessage(_0x522e64(0x1ed)+(_0x52e98a['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x3827b0))return showMessage(_0x522e64(0x1fc)+_0x52e98a['name']+'\x20theme','info'),![];try{const _0x213f92=doc(db,'userProfiles',_0x582f4a['uid']),_0x588ae8=await getDoc(_0x213f92);if(!_0x588ae8['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x35b6a2=_0x588ae8['data'](),_0x3fd937=_0x35b6a2['points']||0x0,_0x938fd9=_0x35b6a2[_0x522e64(0x1f5)]||[];if(_0x3fd937<_0x52e98a['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x938fd9['includes']('theme_'+_0x3827b0))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0xc17104=_0x3fd937-_0x52e98a['price'],_0x35e6d6=[..._0x938fd9,'theme_'+_0x3827b0];return await updateDoc(_0x213f92,{'points':_0xc17104,'inventory':_0x35e6d6,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x582f4a['uid'],'userEmail':_0x582f4a[_0x522e64(0x212)],'itemId':'theme_'+_0x3827b0,'itemTitle':_0x52e98a['name']+'\x20Theme','price':_0x52e98a[_0x522e64(0x1ec)],'type':_0x522e64(0x1f0),'category':'theme','timestamp':serverTimestamp()}),userData['points']=_0xc17104,userData['inventory']=_0x35e6d6,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x522e64(0x1f9)][_0x522e64(0x1d6)]()),console['log'](_0x522e64(0x1fd)+_0x52e98a['name']+'\x20theme\x20for\x20'+_0x52e98a['price']+_0x522e64(0x203)),!![];}catch(_0x1a28e0){return console['error']('Purchase\x20failed:',_0x1a28e0),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x522e64(0x1ff)),![];}}function applyTheme(_0x3b9959){const _0xde7954=a48_0x4333ad;if(!userOwnsTheme(_0x3b9959))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window['ThemeSystem']['switchTheme'](_0x3b9959),showMessage((THEMES[_0x3b9959]?.['name']||_0x3b9959)+'\x20theme\x20applied!','success'),!![]):(console['error'](_0xde7954(0x20a)),![]);}function buildStoreUI(){const _0x5cc035=a48_0x4333ad,_0x40ccd2=document['querySelector']('.themes-grid');if(!_0x40ccd2){console['error']('Themes\x20container\x20not\x20found');return;}_0x40ccd2['innerHTML']='',Object['entries'](THEMES)[_0x5cc035(0x1ea)](([_0x319923,_0x5e5845])=>{const _0x3d2127=_0x5cc035,_0x2ff2bb=document[_0x3d2127(0x1fe)](_0x3d2127(0x1dc));_0x2ff2bb['className']='store-item',_0x2ff2bb['dataset']['theme']=_0x319923,_0x2ff2bb[_0x3d2127(0x204)]['itemId']='theme_'+_0x319923,_0x2ff2bb['dataset']['price']=_0x5e5845[_0x3d2127(0x1ec)],_0x2ff2bb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x319923+_0x3d2127(0x1e3)+(_0x5e5845['price']===0x0?'FREE':_0x5e5845['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x5e5845['name']+_0x3d2127(0x201)+_0x5e5845[_0x3d2127(0x219)]+_0x3d2127(0x1e4),_0x40ccd2['appendChild'](_0x2ff2bb);}),setupThemeButtons();}function setupThemeButtons(){const _0xae349d=a48_0x4333ad,_0xd4983c=document['querySelectorAll']('.theme-select-btn');_0xd4983c[_0xae349d(0x1ea)](_0x145a68=>{_0x145a68['addEventListener']('click',async _0xedc450=>{const _0x52961a=a48_0x4f4e;_0xedc450['preventDefault']();const _0x5ab03d=auth[_0x52961a(0x1eb)];if(!_0x5ab03d){showMessage(_0x52961a(0x20d),'error');return;}const _0x302abd=_0x145a68['closest']('[data-theme]'),_0x287e03=_0x302abd['dataset']['theme'],_0x266eb7=THEMES[_0x287e03];if(!_0x266eb7){console['error']('Theme\x20'+_0x287e03+_0x52961a(0x1fa));return;}console['log']('Theme\x20clicked:\x20'+_0x266eb7['name']+'\x20('+_0x287e03+')');if(_0x145a68['disabled']){_0x266eb7[_0x52961a(0x1ec)]>0x0&&showMessage(_0x52961a(0x1e6)+_0x266eb7['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x145a68['textContent']==='Current\x20Theme'){showMessage(_0x266eb7[_0x52961a(0x209)]+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x145a68['textContent']===_0x52961a(0x1de)){applyTheme(_0x287e03),updateThemeButtons();return;}if(_0x145a68['textContent'][_0x52961a(0x1db)]('Buy')){const _0xa8d17c=window['confirm']('Purchase\x20'+_0x266eb7[_0x52961a(0x209)]+'\x20theme\x20for\x20'+_0x266eb7['price']+_0x52961a(0x1f1));if(!_0xa8d17c)return;const _0x39a717=await purchaseTheme(_0x287e03);_0x39a717&&(showMessage(_0x266eb7['name']+_0x52961a(0x1ee),_0x52961a(0x1f8)),applyTheme(_0x287e03),updateThemeButtons());return;}userOwnsTheme(_0x287e03)?applyTheme(_0x287e03):showMessage(_0x52961a(0x1e8),'error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x3e8352=a48_0x4333ad,_0x3418c0=window[_0x3e8352(0x210)]?window[_0x3e8352(0x210)]['getCurrentTheme']():'default',_0x25a0ba=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')[_0x3e8352(0x1ea)](_0x5a01cf=>{const _0x474e72=_0x3e8352,_0x566df0=_0x5a01cf['closest']('[data-theme]'),_0x475d3e=_0x566df0['dataset']['theme'],_0x274eea=THEMES[_0x475d3e];if(!_0x274eea)return;_0x5a01cf['disabled']=![],_0x5a01cf['style'][_0x474e72(0x207)]='',_0x5a01cf['style']['cursor']='pointer',_0x5a01cf['classList']['remove'](_0x474e72(0x218),'apply-theme',_0x474e72(0x216),_0x474e72(0x1e5),'sign-in-free','sign-in-paid');if(!_0x25a0ba){_0x274eea['price']===0x0?(_0x5a01cf[_0x474e72(0x1f6)]='Sign\x20in\x20to\x20Apply',_0x5a01cf['classList']['add']('sign-in-free')):(_0x5a01cf[_0x474e72(0x1f6)]=_0x474e72(0x1d5),_0x5a01cf['disabled']=!![],_0x5a01cf['style']['opacity']='0.7',_0x5a01cf[_0x474e72(0x215)]['add']('sign-in-paid'));return;}if(_0x475d3e===_0x3418c0){_0x5a01cf[_0x474e72(0x1f6)]=_0x474e72(0x1ef),_0x5a01cf['classList'][_0x474e72(0x1e2)](_0x474e72(0x218)),_0x5a01cf['disabled']=!![],_0x5a01cf[_0x474e72(0x1d8)]['cursor']='default';return;}if(userOwnsTheme(_0x475d3e)){_0x5a01cf['textContent']='Apply\x20Theme',_0x5a01cf['classList']['add']('apply-theme');return;}if(userData['points']>=_0x274eea['price']){_0x5a01cf[_0x474e72(0x1f6)]='Buy\x20for\x20'+_0x274eea[_0x474e72(0x1ec)]+'\x20Points',_0x5a01cf[_0x474e72(0x215)]['add'](_0x474e72(0x216));return;}_0x5a01cf['textContent']='Need\x20'+_0x274eea['price']+'\x20Points',_0x5a01cf['classList'][_0x474e72(0x1e2)]('cannot-afford'),_0x5a01cf['style']['opacity']='0.5',_0x5a01cf['disabled']=!![],_0x5a01cf[_0x474e72(0x1d8)]['cursor']='not-allowed';});}function showMessage(_0x2af2a6,_0x24e056='info'){const _0x23c5ff=a48_0x4333ad,_0x90caaa=document['getElementById']('store-message');_0x90caaa&&_0x90caaa['remove']();const _0x3e945a=document[_0x23c5ff(0x1fe)]('div');_0x3e945a['id']='store-message',_0x3e945a['className']='store-message\x20store-message-'+_0x24e056,_0x3e945a[_0x23c5ff(0x1f6)]=_0x2af2a6,document[_0x23c5ff(0x217)]['appendChild'](_0x3e945a),requestAnimationFrame(()=>{const _0x1f3c07=_0x23c5ff;_0x3e945a[_0x1f3c07(0x215)]['add'](_0x1f3c07(0x208));}),setTimeout(()=>{_0x3e945a['classList']['remove']('visible'),setTimeout(()=>{const _0x51cc51=a48_0x4f4e;_0x3e945a[_0x51cc51(0x1f4)]&&_0x3e945a['remove']();},0x12c);},0xfa0);}window[a48_0x4333ad(0x1e7)]={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');