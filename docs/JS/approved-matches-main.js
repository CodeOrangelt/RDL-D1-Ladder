const a0_0x171c74=a0_0x2dd2;(function(_0xc46e8e,_0x4046e0){const _0x39ae6c=a0_0x2dd2,_0x208c89=_0xc46e8e();while(!![]){try{const _0x5e0ec6=-parseInt(_0x39ae6c(0x232))/0x1*(parseInt(_0x39ae6c(0x205))/0x2)+-parseInt(_0x39ae6c(0x21d))/0x3*(parseInt(_0x39ae6c(0x282))/0x4)+-parseInt(_0x39ae6c(0x288))/0x5*(parseInt(_0x39ae6c(0x226))/0x6)+parseInt(_0x39ae6c(0x216))/0x7*(-parseInt(_0x39ae6c(0x286))/0x8)+-parseInt(_0x39ae6c(0x264))/0x9+parseInt(_0x39ae6c(0x27c))/0xa*(-parseInt(_0x39ae6c(0x1fd))/0xb)+parseInt(_0x39ae6c(0x249))/0xc;if(_0x5e0ec6===_0x4046e0)break;else _0x208c89['push'](_0x208c89['shift']());}catch(_0x2b6d67){_0x208c89['push'](_0x208c89['shift']());}}}(a0_0x333f,0x7688c));function a0_0x333f(){const _0x583ce4=['currentMode','11qEVbBq','removeItem','matchComments','recent-matches-preview','innerHTML','loserSuicides','Muted.','altered-powerups','1609334lZSRPc','Today','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','Comment\x20added\x20successfully','.comment.winner-comment','forEach','textContent','#b9f1fc','filter','commentPopupContentPreview','\x20days\x20ago','hasNextPage','Submit','start','.option-tab','missiles-6plus','comment-item','14504suzdRD','text','Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.','comment','push','Error\x20submitting\x20comment:','unranked','13155mExjvx','winnerUsername','\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20','center','max','next','selected','matchesPerPage','getElementById','6KzThbA','flex','empty','currentUser','trim','block','keypress','title','closeCommentPopupPreview','Failed\x20to\x20delete\x20comment:\x20','15px','filterUsername','1VqFxSu','querySelector','preview-d3-button','click','Loser',':</strong>\x20\x22','displayName','#50C878','Error\x20deleting\x20comment:','No\x20results\x20found\x20for\x20this\x20page','filter-pilots','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','disabled','previewCache_','map','value','winnerComment','Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.','docs','onclick','filter-levels','.popup-actions','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','35734188EQqOAx','jump','split','.comment.loser-comment','uid','removeChild','Option','Failed\x20to\x20report\x20comment:\x20','timestamp','currentPage','username','classList','toggle','error','appendChild','\x20matching\x20filters','commentOverlayPreview','Anonymous','fusion-match','active','Page\x20','<p>','badComments','closeAddCommentPopup','keys','addEventListener','#ff4444','7876323sJrsOZ','.player.winner\x20.player-suicides','Failed\x20to\x20parse\x20cache:','table','Demo\x20link','Firebase\x20not\x20initialized','preview-d1-button','pilots','message','bind','Yesterday','className','opacity','lastVisible','</small>','style','color','commentMatchId','enhancedFilters','log','backgroundColor','length','current','loserOldElo','1305560nXadQZ','.no-comments-message','Please\x20enter\x20a\x20comment\x20before\x20submitting','Match\x20','+10','winnerOldElo','100OvHJmb','popup-btn\x20report-btn','subgames','demoLink','1016XfiAKh','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>Ã—</button>','1545970hHCiuc','demo','.matches-loading','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?','.match-card','auth','stopPropagation','isLoading','createdAt','.matches-loading[style*=\x22color:\x20red\x22]','{}.constructor(\x22return\x20this\x22)(\x20)','prev','matchId','default','toLocaleString','display','warn','<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display','href','data','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',',\x20fetching\x20from\x20Firestore','previewNextPage','createElement','button','commentUser','submit','.community-comments-section','Cached\x20intermediary\x20page\x20','dataset','Unable\x20to\x20submit\x20-\x20system\x20not\x20ready','addCommentForm','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','subgameType','stringify','userId','getItem','dogfight','setAttribute','N/A','toLocaleDateString','...','none','parentNode','toLowerCase','slice','loserUsername','seconds','clear-enhanced-filters','Comment\x20from\x20','.player.loser\x20.player-score'];a0_0x333f=function(){return _0x583ce4;};return a0_0x333f();}const a0_0x1cc619=(function(){let _0x13f41d=!![];return function(_0x5cdcb0,_0x8c29b5){const _0x533f6b=_0x13f41d?function(){if(_0x8c29b5){const _0x4c9f9d=_0x8c29b5['apply'](_0x5cdcb0,arguments);return _0x8c29b5=null,_0x4c9f9d;}}:function(){};return _0x13f41d=![],_0x533f6b;};}()),a0_0x57b57c=a0_0x1cc619(this,function(){const _0x44466a=a0_0x2dd2,_0x4ed5b5=function(){const _0x542532=a0_0x2dd2;let _0x24ea05;try{_0x24ea05=Function('return\x20(function()\x20'+_0x542532(0x1d3)+');')();}catch(_0x540d73){_0x24ea05=window;}return _0x24ea05;},_0x2f382e=_0x4ed5b5(),_0x1f92ca=_0x2f382e['console']=_0x2f382e['console']||{},_0x415e8e=[_0x44466a(0x277),_0x44466a(0x1d9),'info','error','exception',_0x44466a(0x267),'trace'];for(let _0x5f4970=0x0;_0x5f4970<_0x415e8e['length'];_0x5f4970++){const _0x4b0089=a0_0x1cc619['constructor']['prototype'][_0x44466a(0x26d)](a0_0x1cc619),_0x2ed724=_0x415e8e[_0x5f4970],_0x3337b8=_0x1f92ca[_0x2ed724]||_0x4b0089;_0x4b0089['__proto__']=a0_0x1cc619['bind'](a0_0x1cc619),_0x4b0089['toString']=_0x3337b8['toString']['bind'](_0x3337b8),_0x1f92ca[_0x2ed724]=_0x4b0089;}});a0_0x57b57c();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':'Daz','muteFromDate':new Date('2025-07-02')['getTime']()}];function isUsernameMuted(_0x19fd21,_0x1fdaaf){if(!_0x19fd21)return![];const _0xa60e4b=mutedUsers['find'](_0x14c18e=>_0x14c18e['username']===_0x19fd21);if(!_0xa60e4b)return![];if(!_0x1fdaaf)return!![];const _0x1f1c67=_0x1fdaaf instanceof Date?_0x1fdaaf['getTime']():_0x1fdaaf['seconds']?_0x1fdaaf['seconds']*0x3e8:Date['now']();return _0x1f1c67>=_0xa60e4b['muteFromDate'];}function filterComment(_0x1e5db9,_0x167e9c,_0x2e9a41){if(!_0x1e5db9)return'-';if(isUsernameMuted(_0x167e9c,_0x2e9a41))return'Muted.';return _0x1e5db9;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x5d66ff,_0x5108c1,_0x4c2d2f){const _0xcb7c0a=a0_0x2dd2,_0x38ee13='u:'+(_0x4c2d2f['filterUsername']||'');return _0xcb7c0a(0x23f)+_0x5d66ff+'_p'+_0x5108c1+'_'+_0x38ee13;}function getCachedPage(_0x420b31){const _0x4d6f7e=a0_0x2dd2,_0x3f7c27=sessionStorage[_0x4d6f7e(0x1ed)](_0x420b31);if(_0x3f7c27)try{return JSON['parse'](_0x3f7c27);}catch(_0x3d46a6){return console['error'](_0x4d6f7e(0x266),_0x3d46a6),sessionStorage[_0x4d6f7e(0x1fe)](_0x420b31),null;}return null;}function cachePage(_0x2e1840,_0x1b79cd){const _0x55a17c=a0_0x2dd2;try{sessionStorage['setItem'](_0x2e1840,JSON[_0x55a17c(0x1eb)](_0x1b79cd));}catch(_0x5b2a50){console['error']('Failed\x20to\x20cache\x20data:',_0x5b2a50);}}function getEloColor(_0x55ac75){const _0x516dd5=a0_0x2dd2,_0x4c5c79=Number(_0x55ac75);if(_0x4c5c79>=0x7d0)return _0x516dd5(0x239);else{if(_0x4c5c79>=0x708)return'#FFD700';else{if(_0x4c5c79>=0x640)return _0x516dd5(0x20c);else{if(_0x4c5c79>=0x578)return'#CD7F32';else return'#808080';}}}}function formatDate(_0x4e18dd,_0x2c9f66=![]){const _0x4afb39=a0_0x2dd2;if(!_0x4e18dd||!_0x4e18dd['seconds'])return _0x4afb39(0x1f0);const _0x4666a3=new Date(_0x4e18dd['seconds']*0x3e8);return _0x2c9f66?_0x4666a3[_0x4afb39(0x1d7)]():_0x4666a3[_0x4afb39(0x1f1)]();}function truncateComment(_0x1593ae,_0x3ea75e=0x1e){const _0xe280d2=a0_0x2dd2;if(!_0x1593ae)return'-';if(_0x1593ae['length']<=_0x3ea75e)return _0x1593ae;return _0x1593ae['substring'](0x0,_0x3ea75e)+_0xe280d2(0x1f2);}function formatCommentDate(_0x4326be){const _0x4c4194=a0_0x2dd2;if(!_0x4326be||!_0x4326be['seconds'])return'';const _0x48fb6b=new Date(_0x4326be['seconds']*0x3e8),_0x1da72d=new Date(),_0x6e5b9c=Math['abs'](_0x1da72d-_0x48fb6b),_0x4a30f2=Math['floor'](_0x6e5b9c/(0x3e8*0x3c*0x3c*0x18));if(_0x4a30f2===0x0)return _0x4c4194(0x206);else{if(_0x4a30f2===0x1)return _0x4c4194(0x26e);else return _0x4a30f2<0x7?_0x4a30f2+_0x4c4194(0x20f):_0x48fb6b['toLocaleDateString']();}}function setLoadingIndicator(_0x3d5e4a){const _0x1b7f45=document['getElementById']('loading-indicator');if(_0x1b7f45)_0x1b7f45['style']['display']=_0x3d5e4a?'block':'none';}function a0_0x2dd2(_0x46ae4f,_0x3d976f){const _0x18999a=a0_0x333f();return a0_0x2dd2=function(_0x57b57c,_0x1cc619){_0x57b57c=_0x57b57c-0x1cc;let _0x3f9c59=_0x18999a[_0x57b57c];return _0x3f9c59;},a0_0x2dd2(_0x46ae4f,_0x3d976f);}export function updatePreviewLadderModeUI(){const _0x52a87e=a0_0x2dd2,_0xf4167a=document[_0x52a87e(0x225)]('preview-ladder-mode'),_0x35c49c=document['getElementById']('preview-d1-button'),_0x5a31f4=document[_0x52a87e(0x225)]('preview-d2-button'),_0x11ada6=document['getElementById'](_0x52a87e(0x234));if(_0xf4167a)_0xf4167a['textContent']=previewState['currentMode'];if(_0x35c49c)_0x35c49c['classList']['toggle']('active',previewState[_0x52a87e(0x1fc)]==='D1');if(_0x5a31f4)_0x5a31f4[_0x52a87e(0x254)][_0x52a87e(0x255)]('active',previewState['currentMode']==='D2');if(_0x11ada6)_0x11ada6['classList']['toggle']('active',previewState[_0x52a87e(0x1fc)]==='D3');}function updatePreviewPaginationControls(_0x2974a7){const _0x3ff4c8=a0_0x2dd2,_0x421791=document['getElementById']('previewPrevPage'),_0x2d475c=document['getElementById']('previewNextPage'),_0x2fad0a=document[_0x3ff4c8(0x225)]('previewPageInfo');if(!_0x421791||!_0x2d475c||!_0x2fad0a)return;_0x2fad0a['textContent']=_0x3ff4c8(0x25d)+previewState[_0x3ff4c8(0x252)],_0x421791['disabled']=previewState[_0x3ff4c8(0x252)]<=0x1,_0x2d475c['disabled']=!_0x2974a7;}function setPreviewLoadingState(_0x2d78b1){const _0x115795=a0_0x2dd2;previewState['isLoading']=_0x2d78b1,setLoadingIndicator(_0x2d78b1);const _0x413231=document['getElementById'](_0x115795(0x200)),_0x54f818=_0x413231?_0x413231[_0x115795(0x233)](_0x115795(0x28a)):null,_0xafb2d5=document['getElementById']('previewPrevPage'),_0x1d544f=document[_0x115795(0x225)](_0x115795(0x1df)),_0x21b12e=document['getElementById']('preview-d1-button'),_0xbaf6af=document['getElementById']('preview-d2-button'),_0x179984=document['getElementById']('applyFilterBtn'),_0x5a90db=document[_0x115795(0x225)]('clearFilterBtn');if(_0x54f818&&!_0x2d78b1)_0x54f818['style']['display']='none';else _0x54f818&&_0x2d78b1&&(_0x54f818['style']['display']='block');!_0x2d78b1&&_0x413231&&!_0x413231['querySelector']('.match-card')&&!_0x413231['querySelector'](_0x115795(0x1d2))&&(_0x413231['innerHTML']=_0x115795(0x23d)+(previewState[_0x115795(0x231)]?_0x115795(0x258):'')+'.</div>');if(_0xafb2d5)_0xafb2d5[_0x115795(0x23e)]=_0x2d78b1||previewState['currentPage']<=0x1;if(_0x1d544f)_0x1d544f['disabled']=_0x2d78b1;if(_0x21b12e)_0x21b12e[_0x115795(0x23e)]=_0x2d78b1;if(_0xbaf6af)_0xbaf6af['disabled']=_0x2d78b1;if(_0x179984)_0x179984['disabled']=_0x2d78b1;if(_0x5a90db)_0x5a90db['disabled']=_0x2d78b1;}function applyClientFilters(_0x1872c8){const _0x3d7bf4=a0_0x2dd2;if(!previewState[_0x3d7bf4(0x231)])return _0x1872c8;const _0x414f57=previewState[_0x3d7bf4(0x231)]['toLowerCase']();return _0x1872c8['filter'](_0x2caf0e=>{const _0x317895=_0x3d7bf4,_0x7e9dba=(_0x2caf0e['winnerUsername']||'')[_0x317895(0x1f5)](),_0x5f3e8a=(_0x2caf0e['loserUsername']||'')[_0x317895(0x1f5)]();return _0x7e9dba['includes'](_0x414f57)||_0x5f3e8a['includes'](_0x414f57);});}function applyEnhancedClientFilters(_0x244fe6){const _0x221197=a0_0x2dd2;if(!hasEnhancedFilters())return _0x244fe6;return _0x244fe6[_0x221197(0x20d)](_0x17078d=>{const _0x2fbdc3=_0x221197;if(previewState[_0x2fbdc3(0x276)]['pilots']){const _0x316379=previewState[_0x2fbdc3(0x276)][_0x2fbdc3(0x26b)]['toLowerCase'](),_0x585d61=(_0x17078d['winnerUsername']||'')[_0x2fbdc3(0x1f5)](),_0x420011=(_0x17078d['loserUsername']||'')['toLowerCase']();if(!_0x585d61['includes'](_0x316379)&&!_0x420011['includes'](_0x316379))return![];}if(previewState['enhancedFilters']['levels']){const _0x54e35f=previewState['enhancedFilters']['levels']['toLowerCase'](),_0xd3b262=(_0x17078d['mapPlayed']||'')['toLowerCase']();if(!_0xd3b262['includes'](_0x54e35f))return![];}if(previewState['enhancedFilters']['subgames']['length']>0x0){const _0x539d1e=_0x17078d['subgameType']||'Standard\x20Match';if(!previewState[_0x2fbdc3(0x276)]['subgames']['includes'](_0x539d1e))return![];}return!![];});}function hasEnhancedFilters(){return previewState['enhancedFilters']['pilots']||previewState['enhancedFilters']['levels']||previewState['enhancedFilters']['subgames']['length']>0x0;}function clearEnhancedFilters(){const _0x2e0077=a0_0x2dd2;previewState[_0x2e0077(0x276)]={'pilots':'','levels':'','subgames':[]},document[_0x2e0077(0x225)](_0x2e0077(0x23c))['value']='',document[_0x2e0077(0x225)]('filter-levels')[_0x2e0077(0x241)]='';const _0x518c42=document['getElementById']('filter-subgames');for(let _0x5a7378 of _0x518c42['options']){_0x5a7378[_0x2e0077(0x223)]=![];}}function jumpToPage(_0x10cdb6){const _0x3d1a7f=a0_0x2dd2,_0x2fccbe=document[_0x3d1a7f(0x225)]('jump-to-page'),_0x41ccc0=previewState[_0x3d1a7f(0x252)];let _0x4c38b8=_0x41ccc0;switch(_0x10cdb6){case _0x3d1a7f(0x212):_0x4c38b8=0x1;break;case'end':_0x4c38b8=Math['max'](_0x41ccc0+0xa,previewState['totalPages']||_0x41ccc0+0xa);break;case'+1':_0x4c38b8=_0x41ccc0+0x1;break;case'+5':_0x4c38b8=_0x41ccc0+0x5;break;case _0x3d1a7f(0x280):_0x4c38b8=_0x41ccc0+0xa;break;case'-1':_0x4c38b8=Math['max'](0x1,_0x41ccc0-0x1);break;case'-5':_0x4c38b8=Math[_0x3d1a7f(0x221)](0x1,_0x41ccc0-0x5);break;case'-10':_0x4c38b8=Math['max'](0x1,_0x41ccc0-0xa);break;case'input':const _0x3f43c3=parseInt(_0x2fccbe[_0x3d1a7f(0x241)]);_0x3f43c3&&_0x3f43c3>0x0&&(_0x4c38b8=_0x3f43c3,_0x2fccbe['value']='');break;}_0x4c38b8!==_0x41ccc0&&_0x4c38b8>0x0&&(previewState['currentPage']=_0x4c38b8,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x234614='current'){const _0x409331=a0_0x2dd2,_0x58f27f=document['getElementById'](_0x409331(0x200)),_0x201426=document['getElementById']('match-card-template');if(previewState['isLoading']||!_0x58f27f||!_0x201426)return;_0x234614==='current'&&(console[_0x409331(0x277)]('Clearing\x20cache\x20for\x20refresh/reset'),Object[_0x409331(0x261)](sessionStorage)['forEach'](_0xc62247=>{const _0x5a8640=_0x409331;_0xc62247['includes']('previewCache_'+previewState[_0x5a8640(0x1fc)])&&sessionStorage[_0x5a8640(0x1fe)](_0xc62247);}));let _0x5cb030=previewState['currentPage'];if(_0x234614==='next')_0x5cb030++;else{if(_0x234614==='prev')_0x5cb030--;else _0x234614==='current'&&(_0x5cb030=0x1,previewState['firstVisible']=null,previewState[_0x409331(0x271)]=null);}if(_0x5cb030<0x1)_0x5cb030=0x1;const _0x2080d9=previewState['currentPage'];previewState['currentPage']=_0x5cb030,updatePreviewPaginationControls(!![]);const _0xa5191d={'filterUsername':previewState['filterUsername']},_0x31a895=getCacheKey(previewState[_0x409331(0x1fc)],_0x5cb030,_0xa5191d),_0x339ffa=_0x234614!=='current'?getCachedPage(_0x31a895):null;if(_0x339ffa){console['log']('Rendering\x20page\x20'+_0x5cb030+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x339ffa['docsData']),updatePreviewPaginationControls(_0x339ffa[_0x409331(0x210)]),setPreviewLoadingState(![]);return;}console['log']('Cache\x20miss\x20for\x20page\x20'+_0x5cb030+_0x409331(0x1de)),setPreviewLoadingState(!![]),_0x58f27f['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x11d566=previewState[_0x409331(0x1fc)]==='D1'?'approvedMatches':previewState['currentMode']==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x30749c=previewState[_0x409331(0x1fc)]==='D1'?'createdAt':'approvedAt';try{const _0x5e2e95=collection(window['db'],_0x11d566);let _0x9cf408=[orderBy(_0x30749c,'desc')];if(_0x5cb030===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x9cf408['push'](limit(previewState['matchesPerPage']));else{if(_0x234614===_0x409331(0x222)&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x9cf408['push'](startAfter(previewState['lastVisible'])),_0x9cf408[_0x409331(0x21a)](limit(previewState[_0x409331(0x224)]));else{console[_0x409331(0x277)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x2c5978=_0x5cb030*previewState['matchesPerPage'];_0x9cf408['push'](limit(_0x2c5978));}}const _0x36d4a8=query(_0x5e2e95,..._0x9cf408),_0x455602=await getDocs(_0x36d4a8);let _0x51095c=_0x455602[_0x409331(0x244)];if(_0x5cb030>0x1&&_0x234614!=='next'){const _0x323263=(_0x5cb030-0x1)*previewState['matchesPerPage'];_0x51095c=_0x51095c['slice'](_0x323263,_0x323263+previewState['matchesPerPage']);}if(_0x51095c['length']===0x0){console['log'](_0x409331(0x23b));_0x234614===_0x409331(0x222)&&(previewState['currentPage']=_0x2080d9,updatePreviewPaginationControls(![]));_0x58f27f['innerHTML']=_0x409331(0x1da)+(previewState[_0x409331(0x231)]?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x51095c[0x0],previewState[_0x409331(0x271)]=_0x51095c[_0x51095c[_0x409331(0x279)]-0x1];const _0x46fc2a=_0x51095c['map'](_0x1c27ce=>({'id':_0x1c27ce['id'],..._0x1c27ce['data']()}));let _0x2abeb7=![];if(_0x51095c[_0x409331(0x279)]===previewState['matchesPerPage']){const _0x25bb8c=query(_0x5e2e95,orderBy(_0x30749c,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x31624=await getDocs(_0x25bb8c);_0x2abeb7=!_0x31624[_0x409331(0x228)];}const _0x4a5e44=applyClientFilters(_0x46fc2a),_0x5c6073={'docsData':_0x46fc2a,'hasNextPage':_0x2abeb7};cachePage(getCacheKey(previewState['currentMode'],previewState[_0x409331(0x252)],_0xa5191d),_0x5c6073);if(_0x5cb030>0x1&&_0x234614!=='next')for(let _0x21e91f=0x1;_0x21e91f<_0x5cb030;_0x21e91f++){const _0x1a8758=(_0x21e91f-0x1)*previewState['matchesPerPage'],_0x35d48d=_0x1a8758+previewState['matchesPerPage'],_0x1e6fb2=_0x455602[_0x409331(0x244)][_0x409331(0x1f6)](_0x1a8758,_0x35d48d);if(_0x1e6fb2[_0x409331(0x279)]>0x0){const _0x2ff894=_0x1e6fb2['map'](_0x2147eb=>({'id':_0x2147eb['id'],..._0x2147eb['data']()})),_0x4370c6=!![];cachePage(getCacheKey(previewState['currentMode'],_0x21e91f,_0xa5191d),{'docsData':_0x2ff894,'hasNextPage':_0x4370c6}),console['log'](_0x409331(0x1e5)+_0x21e91f);}}_0x4a5e44[_0x409331(0x279)]===0x0&&previewState[_0x409331(0x231)]?_0x58f27f['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState[_0x409331(0x231)]+'\x22</div>':renderMatchCards(_0x4a5e44),updatePreviewPaginationControls(_0x2abeb7);}catch(_0x5d2b06){console[_0x409331(0x256)]('Error\x20fetching\x20'+previewState['currentMode']+'\x20matches:',_0x5d2b06),_0x58f27f['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x5d2b06['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x2080d9;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x30be12){const _0x36048b=a0_0x2dd2,_0x18ab71=document['getElementById'](_0x36048b(0x200)),_0x491b24=document['getElementById']('match-card-template');if(!_0x18ab71||!_0x491b24)return;!_0x18ab71['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x18ab71['innerHTML']='');if(!_0x30be12||_0x30be12['length']===0x0){if(!_0x18ab71['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x5f58d5=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?'\x20matching\x20filters':'';_0x18ab71['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+_0x5f58d5+'.</div>';}return;}const _0xe00a3c=applyEnhancedClientFilters(_0x30be12);if(_0xe00a3c['length']===0x0){_0x18ab71[_0x36048b(0x201)]='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0xc6f54c=_0xe00a3c[_0x36048b(0x240)](_0x670657=>getAllCommentsForMatch(_0x670657['id']));let _0x2d42f4=[];try{_0x2d42f4=await Promise['all'](_0xc6f54c);}catch(_0x2380b7){console[_0x36048b(0x256)]('Error\x20fetching\x20comments\x20batch:',_0x2380b7),_0x2d42f4=_0xe00a3c[_0x36048b(0x240)](()=>[]);}const _0x1bb7dd={};_0x2d42f4[_0x36048b(0x20a)]((_0x91af1a,_0x25935c)=>{_0x1bb7dd[_0xe00a3c[_0x25935c]['id']]=_0x91af1a||[];}),_0xe00a3c['forEach'](_0x2871f7=>{const _0x4effe6=_0x36048b,_0x52f960=_0x491b24['content']['cloneNode'](!![]),_0x39922e=_0x52f960['querySelector']('.match-display-wrapper'),_0x22c2e8=_0x52f960[_0x4effe6(0x233)](_0x4effe6(0x1cd)),_0x535b3d=getEloRankClass(_0x2871f7['winnerOldElo']);_0x22c2e8['classList']['add']('winner-'+_0x535b3d),_0x22c2e8['querySelector']('.match-map')[_0x4effe6(0x20b)]=_0x2871f7['mapPlayed']||'Unknown\x20Map',_0x22c2e8['querySelector']('.match-date')['textContent']=formatDate(_0x2871f7['approvedAt']||_0x2871f7[_0x4effe6(0x1d1)]);const _0x56b2dd=_0x22c2e8[_0x4effe6(0x233)]('.player.winner\x20.player-name');_0x56b2dd['textContent']=_0x2871f7['winnerUsername']||'Unknown',_0x56b2dd['style'][_0x4effe6(0x274)]=getEloColor(_0x2871f7['winnerOldElo']),_0x22c2e8['querySelector']('.player.winner\x20.player-score')[_0x4effe6(0x20b)]=_0x2871f7['winnerScore']??0x0;const _0x1557ca=_0x22c2e8['querySelector'](_0x4effe6(0x265)),_0x64b4b7=_0x2871f7['winnerSuicides']||0x0;_0x1557ca['textContent']='S:\x20'+_0x64b4b7;const _0x6b2bb5=_0x22c2e8['querySelector']('.player.loser\x20.player-name');_0x6b2bb5['textContent']=_0x2871f7[_0x4effe6(0x1f7)]||'Unknown',_0x6b2bb5[_0x4effe6(0x273)]['color']=getEloColor(_0x2871f7[_0x4effe6(0x27b)]),_0x22c2e8['querySelector'](_0x4effe6(0x1fb))['textContent']=_0x2871f7['loserScore']??0x0;const _0x1a7a33=_0x22c2e8['querySelector']('.player.loser\x20.player-suicides'),_0x47d129=_0x2871f7[_0x4effe6(0x202)]||0x0;_0x1a7a33['textContent']='S:\x20'+_0x47d129;const _0xfa51eb=_0x22c2e8[_0x4effe6(0x233)]('.match-subgame');if(_0xfa51eb){if(_0x2871f7[_0x4effe6(0x1ea)]&&_0x2871f7['subgameType']['trim']()!==''){_0xfa51eb['textContent']=_0x2871f7['subgameType'],_0xfa51eb[_0x4effe6(0x273)]['display']=_0x4effe6(0x22b);const _0x5aface=getSubgameClass(_0x2871f7['subgameType']);_0x5aface&&_0xfa51eb['classList']['add'](_0x5aface);}else _0xfa51eb['textContent']='Standard\x20Match',_0xfa51eb[_0x4effe6(0x273)][_0x4effe6(0x1d8)]=_0x4effe6(0x22b),_0xfa51eb['style'][_0x4effe6(0x270)]='0.6';}const _0x499a45=_0x22c2e8[_0x4effe6(0x233)](_0x4effe6(0x209)),_0x129f6c=_0x22c2e8['querySelector'](_0x4effe6(0x24c)),_0x255379=_0x2871f7[_0x4effe6(0x242)]||'',_0x2913fb=_0x2871f7['loserComment']||'',_0x3c55da=_0x2871f7['approvedAt']||_0x2871f7['createdAt'],_0x35047e=filterComment(_0x255379,_0x2871f7['winnerUsername'],_0x3c55da),_0x341ff2=filterComment(_0x2913fb,_0x2871f7['loserUsername'],_0x3c55da);_0x499a45['textContent']='\x22'+truncateComment(_0x255379)+'\x22',_0x129f6c['textContent']='\x22'+truncateComment(_0x2913fb)+'\x22';_0x255379&&!isUsernameMuted(_0x2871f7[_0x4effe6(0x21e)],_0x3c55da)?_0x499a45['onclick']=()=>showPreviewCommentPopup(_0x35047e,_0x2871f7[_0x4effe6(0x21e)]||'Winner',getEloColor(_0x2871f7[_0x4effe6(0x281)])):(_0x499a45[_0x4effe6(0x20b)]=_0x35047e===_0x4effe6(0x203)?_0x4effe6(0x203):'-',_0x499a45['style']['cursor']='default',_0x499a45[_0x4effe6(0x245)]=null);_0x2913fb&&!isUsernameMuted(_0x2871f7[_0x4effe6(0x1f7)])?_0x129f6c['onclick']=()=>showPreviewCommentPopup(_0x341ff2,_0x2871f7['loserUsername']||_0x4effe6(0x236),getEloColor(_0x2871f7[_0x4effe6(0x27b)])):(_0x129f6c['textContent']=_0x341ff2==='Muted.'?'Muted.':'-',_0x129f6c[_0x4effe6(0x273)]['cursor']=_0x4effe6(0x1d6),_0x129f6c['onclick']=null);const _0x4b38a3=_0x39922e?.['querySelector'](_0x4effe6(0x1e4));if(!_0x4b38a3)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x3451d6=_0x4b38a3['querySelector']('.comments-container'),_0x4c7542=_0x3451d6?.['querySelector']('.no-comments-message'),_0x51a552=_0x4b38a3[_0x4effe6(0x233)]('.add-comment-btn');if(_0x3451d6){while(_0x3451d6['firstChild']&&_0x3451d6['firstChild']!==_0x4c7542){_0x3451d6['removeChild'](_0x3451d6['firstChild']);}_0x51a552&&_0x51a552[_0x4effe6(0x262)](_0x4effe6(0x235),()=>{showAddCommentPopup(_0x2871f7['id']);});const _0x9a8623=_0x1bb7dd[_0x2871f7['id']]||[];if(_0x9a8623['length']>0x0){if(_0x4c7542)_0x4c7542['style']['display']='none';const _0x3fed34=(_0x4565aa,_0x1b8239)=>{const _0x310136=_0x4effe6,_0x4e96d7=_0x4565aa['split']('\x20');if(_0x4e96d7['length']<=_0x1b8239)return _0x4565aa;return _0x4e96d7[_0x310136(0x1f6)](0x0,_0x1b8239)['join']('\x20')+_0x310136(0x1f2);};_0x9a8623['forEach'](_0x69b5ae=>{const _0x54c545=_0x4effe6,_0x2343c8=document['createElement']('div');if(_0x69b5ae['type']==='demo'){_0x2343c8['className']='demo-link',_0x2343c8['innerHTML']=_0x54c545(0x207)+_0x69b5ae['demoLink']+_0x54c545(0x21f)+_0x69b5ae['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x69b5ae['description']||'No\x20description\x20provided')+_0x54c545(0x1dd);const _0xd7f0a9=window['auth']['currentUser'],_0x44d785=_0xd7f0a9&&_0x69b5ae[_0x54c545(0x1ec)]===_0xd7f0a9['uid'];if(_0x44d785){const _0x92a826=document['createElement'](_0x54c545(0x1e1));_0x92a826[_0x54c545(0x26f)]='delete-comment-btn',_0x92a826['innerHTML']='Ã—',_0x92a826['setAttribute']('aria-label','Delete\x20demo'),_0x92a826['addEventListener']('click',_0x13cb33=>{const _0x5270da=_0x54c545;_0x13cb33['preventDefault'](),_0x13cb33[_0x5270da(0x1cf)](),deleteComment(_0x69b5ae['id'],_0x2343c8);}),_0x2343c8[_0x54c545(0x257)](_0x92a826);}}else{_0x2343c8[_0x54c545(0x26f)]=_0x54c545(0x215);const _0x2100df=isUsernameMuted(_0x69b5ae['username'],_0x69b5ae['timestamp']),_0x3d8e2c=_0x2100df?'Muted.':_0x3fed34(_0x69b5ae[_0x54c545(0x217)]||'',0xf),_0x1e59d9=_0x69b5ae[_0x54c545(0x253)]||'Anonymous',_0x263a8b=window[_0x54c545(0x1ce)]['currentUser'],_0x23f83b=_0x263a8b&&_0x69b5ae[_0x54c545(0x1ec)]===_0x263a8b['uid'];let _0x4534b0='';_0x23f83b&&(_0x4534b0=_0x54c545(0x287));_0x2343c8['innerHTML']=_0x4534b0+'<strong>'+_0x1e59d9+_0x54c545(0x237)+_0x3d8e2c+'\x22';if(_0x23f83b){const _0x555b40=_0x2343c8['querySelector']('.delete-comment-btn');_0x555b40&&_0x555b40['addEventListener'](_0x54c545(0x235),_0x4acbc5=>{_0x4acbc5['stopPropagation'](),deleteComment(_0x69b5ae['id'],_0x2343c8);});}!_0x2100df?_0x2343c8[_0x54c545(0x262)]('click',()=>{showFullCommentLightbox(_0x69b5ae);}):_0x2343c8['style']['cursor']='default';}_0x3451d6['insertBefore'](_0x2343c8,_0x3451d6['firstChild']);});}else{if(_0x4c7542)_0x4c7542['style']['display']='block';}}}const _0x2881cf=_0x22c2e8['querySelector']('.match-demo-links');if(_0x2881cf){const _0x4872d0=_0x22c2e8['querySelector']('.winner-demo-link'),_0x259f61=_0x22c2e8['querySelector']('.loser-demo-link'),_0x4cd202=_0x2871f7['winnerDemoLink']||null,_0x203d79=_0x2871f7['loserDemoLink']||_0x2871f7['demoLink']||null;console['log'](_0x4effe6(0x27f)+_0x2871f7['id']+'\x20demo\x20links:',{'winner':_0x4cd202,'loser':_0x203d79}),_0x4872d0&&(_0x4cd202?(_0x4872d0[_0x4effe6(0x1db)]=_0x4cd202,_0x4872d0[_0x4effe6(0x273)]['display']='flex',_0x4872d0[_0x4effe6(0x22d)]=_0x2871f7[_0x4effe6(0x21e)]+'\x27s\x20Demo'):_0x4872d0['style']['display']='none'),_0x259f61&&(_0x203d79?(_0x259f61['href']=_0x203d79,_0x259f61[_0x4effe6(0x273)][_0x4effe6(0x1d8)]='flex',_0x259f61['title']=_0x2871f7['loserUsername']+'\x27s\x20Demo'):_0x259f61['style']['display']='none'),_0x4cd202&&_0x4872d0||_0x203d79&&_0x259f61?_0x2881cf['style'][_0x4effe6(0x1d8)]=_0x4effe6(0x227):_0x2881cf['style']['display']=_0x4effe6(0x1f3);}_0x18ab71['appendChild'](_0x52f960);});}function getSubgameClass(_0x124358){const _0x4f372f=a0_0x2dd2,_0x324098={'Fusion\x20Match':_0x4f372f(0x25b),'â‰¥6\x20Missiles':'missiles-6plus','â‰¥6\x20missiles':_0x4f372f(0x214),'Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':'blind-match','Rematch':'rematch','Disorientation':'disorientation','Ratting':'ratting','Altered\x20Powerups':_0x4f372f(0x204),'Mega\x20Match':'mega-match','Dogfight':_0x4f372f(0x1ee),'Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x324098[_0x124358]||'';}async function deleteComment(_0x42149e,_0x17237d){const _0x1813c9=a0_0x2dd2,_0x1d5a5e=window['auth']['currentUser'];if(!_0x1d5a5e){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x5e0bc3=doc(window['db'],'matchComments',_0x42149e),_0x436345=await getDoc(_0x5e0bc3);if(!_0x436345['exists']()){alert(_0x1813c9(0x218));return;}const _0x365eab=_0x436345['data']();if(_0x365eab['userId']!==_0x1d5a5e['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x5e0bc3);if(_0x17237d&&_0x17237d[_0x1813c9(0x1f4)]){_0x17237d['parentNode'][_0x1813c9(0x24e)](_0x17237d);const _0x53b54c=_0x17237d['closest']('.comments-container');if(_0x53b54c&&!_0x53b54c['querySelector']('.comment-item')){const _0x16255b=_0x53b54c['querySelector'](_0x1813c9(0x27d));if(_0x16255b)_0x16255b['style']['display']=_0x1813c9(0x22b);}}console[_0x1813c9(0x277)]('Comment\x20deleted\x20successfully');}catch(_0x45fc41){console['error'](_0x1813c9(0x23a),_0x45fc41),alert(_0x1813c9(0x22f)+_0x45fc41[_0x1813c9(0x26c)]);}}async function getAllCommentsForMatch(_0x234920){const _0x41a996=a0_0x2dd2;if(!_0x234920)return[];try{const _0x30e9ca=collection(window['db'],_0x41a996(0x1ff)),_0x443d01=query(_0x30e9ca,where(_0x41a996(0x1d5),'==',_0x234920),orderBy('timestamp','desc')),_0x480612=await getDocs(_0x443d01);if(_0x480612[_0x41a996(0x228)])return[];return _0x480612['docs']['map'](_0x42cacc=>({'id':_0x42cacc['id'],..._0x42cacc['data']()}));}catch(_0x13885f){return console['error']('Error\x20fetching\x20comments:',_0x13885f),[];}}async function submitComment(_0x479fd1){const _0x24e784=a0_0x2dd2;_0x479fd1['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert(_0x24e784(0x248));return;}const _0x4df354=window['auth']['currentUser'];if(!_0x4df354){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x4f511f=document['getElementById'](_0x24e784(0x275))?.[_0x24e784(0x241)],_0x2b1521=document['getElementById']('commentText')?.['value']?.['trim']();if(!_0x4f511f||!_0x2b1521){alert(_0x24e784(0x27e));return;}const _0x4f3e86=_0x2b1521['split'](/\s+/)['filter'](_0x388f5f=>_0x388f5f['length']>0x0)[_0x24e784(0x279)];if(_0x4f3e86>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.');return;}const _0x2469b6=document[_0x24e784(0x233)]('.submit-comment-btn');_0x2469b6&&(_0x2469b6['disabled']=!![],_0x2469b6[_0x24e784(0x20b)]='Submitting...');try{let _0x4ac2f5='Anonymous';try{const _0x5f010e=doc(window['db'],'userProfiles',_0x4df354['uid']),_0x51b114=await getDoc(_0x5f010e);if(_0x51b114['exists']()){const _0x4616b6=_0x51b114[_0x24e784(0x1dc)]();_0x4616b6[_0x24e784(0x253)]&&(_0x4ac2f5=_0x4616b6['username']);}_0x4ac2f5==='Anonymous'&&_0x4df354['displayName']&&(_0x4ac2f5=_0x4df354[_0x24e784(0x238)]);}catch(_0x4c3e96){console[_0x24e784(0x1d9)]('Failed\x20to\x20fetch\x20user\x20profile:',_0x4c3e96),_0x4df354['displayName']&&(_0x4ac2f5=_0x4df354[_0x24e784(0x238)]);}const _0x23c5d5={'matchId':_0x4f511f,'userId':_0x4df354['uid'],'username':_0x4ac2f5,'text':_0x2b1521,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',_0x4ac2f5);const _0x298a12=collection(window['db'],'matchComments');await addDoc(_0x298a12,_0x23c5d5),console['log'](_0x24e784(0x208)),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x39a8fe){console[_0x24e784(0x256)](_0x24e784(0x21b),_0x39a8fe),alert('Failed\x20to\x20add\x20comment:\x20'+_0x39a8fe['message']),_0x2469b6&&(_0x2469b6['disabled']=![],_0x2469b6['textContent']='Submit');}}function closeAddCommentPopup(){const _0x2524a8=a0_0x2dd2,_0x32cdc1=document[_0x2524a8(0x225)]('commentAddPopup'),_0x2ed75a=document['getElementById']('commentAddOverlay');if(_0x32cdc1)_0x32cdc1[_0x2524a8(0x273)][_0x2524a8(0x1d8)]=_0x2524a8(0x1f3);if(_0x2ed75a)_0x2ed75a['style']['display']=_0x2524a8(0x1f3);}function showAddCommentPopup(_0x4d3a3e){const _0x887aa6=a0_0x2dd2,_0x4c4730=window[_0x887aa6(0x1ce)][_0x887aa6(0x229)];if(!_0x4c4730){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo');return;}let _0x1c4f10=document['getElementById']('commentAddPopup'),_0x2a9854=document[_0x887aa6(0x225)]('commentAddOverlay');!_0x1c4f10&&(_0x1c4f10=document['createElement']('div'),_0x1c4f10['id']='commentAddPopup',_0x1c4f10['className']='comment-popup',document['body']['appendChild'](_0x1c4f10));!_0x2a9854&&(_0x2a9854=document[_0x887aa6(0x1e0)]('div'),_0x2a9854['id']='commentAddOverlay',_0x2a9854['className']='comment-overlay',document['body']['appendChild'](_0x2a9854));_0x1c4f10[_0x887aa6(0x201)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x4d3a3e+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x1c4f10['style']['display']='block',_0x2a9854['style']['display']='block',document['getElementById']('closeAddCommentPopup')['addEventListener']('click',closeAddCommentPopup),_0x2a9854[_0x887aa6(0x262)](_0x887aa6(0x235),closeAddCommentPopup);const _0x24e4cc=_0x1c4f10['querySelectorAll'](_0x887aa6(0x213));_0x24e4cc['forEach'](_0x5106ed=>{const _0x2d8ba3=_0x887aa6;_0x5106ed['addEventListener'](_0x2d8ba3(0x235),function(){const _0x52ff53=_0x2d8ba3;_0x24e4cc[_0x52ff53(0x20a)](_0x1f933e=>_0x1f933e[_0x52ff53(0x254)]['remove']('active')),document['querySelectorAll']('.option-content')['forEach'](_0x1ba495=>_0x1ba495['style']['display']='none'),this['classList']['add'](_0x52ff53(0x25c));const _0x170a8b=this['dataset']['option'];document['getElementById'](_0x170a8b+_0x52ff53(0x24f))[_0x52ff53(0x273)][_0x52ff53(0x1d8)]='block',_0x170a8b===_0x52ff53(0x289)?(document['getElementById']('demoLink')['setAttribute']('required',''),document['getElementById']('commentText')['removeAttribute']('required')):(document[_0x52ff53(0x225)](_0x52ff53(0x285))['removeAttribute']('required'),document[_0x52ff53(0x225)]('commentText')['setAttribute']('required',''));});}),document['getElementById']('commentText')[_0x887aa6(0x1ef)]('required',''),document[_0x887aa6(0x225)]('demoLink')['removeAttribute']('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription','demoWordCount',0x14),document[_0x887aa6(0x225)](_0x887aa6(0x1e8))[_0x887aa6(0x262)](_0x887aa6(0x1e3),submitCommentOrDemo);}function setupWordCounter(_0xee5e6c,_0x32c820,_0xd599bd){const _0x1c247b=a0_0x2dd2,_0x598892=document['getElementById'](_0xee5e6c),_0x13fb85=document[_0x1c247b(0x225)](_0x32c820);if(!_0x598892||!_0x13fb85)return;_0x45692c(),_0x598892[_0x1c247b(0x262)]('input',_0x45692c);function _0x45692c(){const _0x3298a7=_0x1c247b,_0x1e0868=_0x598892['value']['trim'](),_0x53ef7a=_0x1e0868?_0x1e0868['split'](/\s+/)['filter'](_0x58861e=>_0x58861e['length']>0x0)['length']:0x0;_0x13fb85[_0x3298a7(0x20b)]=_0x53ef7a,_0x53ef7a>_0xd599bd?_0x13fb85['style'][_0x3298a7(0x274)]=_0x3298a7(0x263):_0x13fb85['style'][_0x3298a7(0x274)]='#aaa';}}async function submitCommentOrDemo(_0x128456){const _0x3fbe7d=a0_0x2dd2;_0x128456['preventDefault']();if(!window['auth']||!window['db']){console['error'](_0x3fbe7d(0x269)),alert(_0x3fbe7d(0x1e7));return;}const _0xe757cd=window['auth']['currentUser'];if(!_0xe757cd){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x1dc369=document[_0x3fbe7d(0x225)]('commentMatchId')['value'],_0x20975c=document['querySelector']('.option-tab.active')['dataset']['option'];let _0x1f6185=_0x3fbe7d(0x25a);try{const _0x10b655=doc(window['db'],'userProfiles',_0xe757cd['uid']),_0x3276a2=await getDoc(_0x10b655);if(_0x3276a2['exists']()){const _0x1ebd68=_0x3276a2['data']();_0x1ebd68['username']&&(_0x1f6185=_0x1ebd68['username']);}_0x1f6185==='Anonymous'&&_0xe757cd['displayName']&&(_0x1f6185=_0xe757cd['displayName']);}catch(_0x36cbbd){console['warn']('Failed\x20to\x20fetch\x20username:',_0x36cbbd),_0xe757cd['displayName']&&(_0x1f6185=_0xe757cd[_0x3fbe7d(0x238)]);}const _0x2ff41c=document['querySelector']('.submit-comment-btn');_0x2ff41c&&(_0x2ff41c['disabled']=!![],_0x2ff41c[_0x3fbe7d(0x20b)]='Submitting...');try{if(_0x20975c==='comment'){const _0x4703fd=document['getElementById']('commentText')[_0x3fbe7d(0x241)][_0x3fbe7d(0x22a)]();if(!_0x4703fd){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x2ff41c['disabled']=![],_0x2ff41c['textContent']='Submit';return;}const _0x162d07=_0x4703fd[_0x3fbe7d(0x24b)](/\s+/)['filter'](_0x8a7103=>_0x8a7103[_0x3fbe7d(0x279)]>0x0)['length'];if(_0x162d07>0xf){alert(_0x3fbe7d(0x1e9)),_0x2ff41c[_0x3fbe7d(0x23e)]=![],_0x2ff41c['textContent']='Submit';return;}const _0x248d16={'matchId':_0x1dc369,'userId':_0xe757cd['uid'],'username':_0x1f6185,'text':_0x4703fd,'type':_0x3fbe7d(0x219),'timestamp':serverTimestamp()},_0x4e663c=collection(window['db'],'matchComments');await addDoc(_0x4e663c,_0x248d16);}else{const _0x335f5b=document[_0x3fbe7d(0x225)]('demoLink')[_0x3fbe7d(0x241)][_0x3fbe7d(0x22a)](),_0x5ec674=document[_0x3fbe7d(0x225)]('demoDescription')[_0x3fbe7d(0x241)][_0x3fbe7d(0x22a)]()||_0x3fbe7d(0x268);if(!_0x335f5b){alert('Please\x20enter\x20a\x20demo\x20link'),_0x2ff41c[_0x3fbe7d(0x23e)]=![],_0x2ff41c['textContent']='Submit';return;}try{new URL(_0x335f5b);}catch(_0x4b5146){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x2ff41c['disabled']=![],_0x2ff41c['textContent']=_0x3fbe7d(0x211);return;}const _0x516144=_0x5ec674['split'](/\s+/)['filter'](_0x1bc0bd=>_0x1bc0bd['length']>0x0)['length'];if(_0x516144>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x2ff41c['disabled']=![],_0x2ff41c['textContent']='Submit';return;}const _0x52c7f3={'matchId':_0x1dc369,'userId':_0xe757cd[_0x3fbe7d(0x24d)],'username':_0x1f6185,'demoLink':_0x335f5b,'description':_0x5ec674,'type':_0x3fbe7d(0x289),'text':'Demo:\x20'+_0x5ec674,'timestamp':serverTimestamp()},_0x2da6ef=collection(window['db'],'matchComments');await addDoc(_0x2da6ef,_0x52c7f3);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x208368){console['error']('Error\x20submitting:',_0x208368),alert('Failed\x20to\x20submit:\x20'+_0x208368['message']),_0x2ff41c&&(_0x2ff41c['disabled']=![],_0x2ff41c['textContent']=_0x3fbe7d(0x211));}}function getEloRankClass(_0x572d9d){const _0x1204e7=a0_0x2dd2,_0x2b5132=Number(_0x572d9d);if(_0x2b5132>=0x7d0)return'emerald';else{if(_0x2b5132>=0x708)return'gold';else{if(_0x2b5132>=0x640)return'silver';else{if(_0x2b5132>=0x578)return'bronze';else return _0x1204e7(0x21c);}}}}function showPreviewCommentPopup(_0x38a392,_0x576d05,_0x5ccf95='#fff'){const _0x5dcd37=a0_0x2dd2,_0x22ff30=document[_0x5dcd37(0x225)]('commentPopupPreview'),_0x1156dd=document[_0x5dcd37(0x225)](_0x5dcd37(0x259)),_0x211709=document['getElementById']('commentPopupTitlePreview'),_0x231976=document['getElementById']('commentPopupContentPreview'),_0x55de1c=document['getElementById']('reportCommentButton');if(!_0x22ff30||!_0x1156dd||!_0x211709||!_0x231976||!_0x55de1c)return;_0x22ff30['dataset']['commentText']=_0x38a392,_0x22ff30[_0x5dcd37(0x1e6)][_0x5dcd37(0x1e2)]=_0x576d05,_0x211709[_0x5dcd37(0x273)]['color']=_0x5ccf95,_0x211709[_0x5dcd37(0x20b)]='Comment\x20from\x20'+_0x576d05,_0x231976['textContent']=_0x38a392,_0x55de1c['onclick']=reportComment,_0x22ff30[_0x5dcd37(0x273)][_0x5dcd37(0x1d8)]=_0x5dcd37(0x22b),_0x1156dd[_0x5dcd37(0x273)][_0x5dcd37(0x1d8)]='block';}function closePreviewCommentPopup(){const _0x30f4cc=a0_0x2dd2,_0x3951d5=document[_0x30f4cc(0x225)]('commentPopupPreview'),_0x362ba2=document[_0x30f4cc(0x225)]('commentOverlayPreview');if(_0x3951d5)_0x3951d5['style']['display']='none';if(_0x362ba2)_0x362ba2['style'][_0x30f4cc(0x1d8)]='none';}async function reportComment(){const _0x32e171=a0_0x2dd2,_0x737765=window['auth']['currentUser'];if(!_0x737765){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm(_0x32e171(0x1cc)))return;try{const _0x2611d9=document['getElementById']('commentPopupPreview'),_0x4eeaba={'commentAuthor':_0x2611d9['dataset'][_0x32e171(0x1e2)]||'Unknown\x20User','commentText':_0x2611d9['dataset']['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0x737765['uid'],'reporterUsername':_0x737765['displayName']||'Anonymous\x20User','reportedAt':serverTimestamp()},_0x5d061d=collection(window['db'],_0x32e171(0x25f));await addDoc(_0x5d061d,_0x4eeaba),alert(_0x32e171(0x243)),closePreviewCommentPopup();}catch(_0x44fda0){console[_0x32e171(0x256)]('Error\x20reporting\x20comment:',_0x44fda0),alert(_0x32e171(0x250)+_0x44fda0['message']);}}function showFullCommentLightbox(_0x5248ac){const _0x1e209b=a0_0x2dd2;if(isUsernameMuted(_0x5248ac[_0x1e209b(0x253)]))return;const _0x5f2570=document['getElementById']('commentPopupPreview'),_0x5c56fe=document[_0x1e209b(0x225)]('commentOverlayPreview'),_0x125378=document['getElementById']('commentPopupTitlePreview'),_0x3399c9=document['getElementById'](_0x1e209b(0x20e));if(!_0x5f2570||!_0x5c56fe||!_0x125378||!_0x3399c9)return;_0x125378['style'][_0x1e209b(0x274)]='#fff',_0x125378[_0x1e209b(0x20b)]=_0x1e209b(0x1fa)+_0x5248ac[_0x1e209b(0x253)];if(_0x5248ac['timestamp']){const _0xdfece2=new Date(_0x5248ac[_0x1e209b(0x251)][_0x1e209b(0x1f8)]*0x3e8),_0x3662d9=_0xdfece2['toLocaleString']();_0x3399c9['innerHTML']=_0x1e209b(0x25e)+_0x5248ac['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x3662d9+_0x1e209b(0x272);}else _0x3399c9[_0x1e209b(0x20b)]=_0x5248ac['text'];_0x5f2570[_0x1e209b(0x1e6)]['commentId']=_0x5248ac['id']||'',_0x5f2570[_0x1e209b(0x1e6)]['commentUser']=_0x5248ac[_0x1e209b(0x253)]||'',_0x5f2570[_0x1e209b(0x1e6)]['commentText']=_0x5248ac['text']||'',_0x5f2570[_0x1e209b(0x1e6)]['matchId']=_0x5248ac[_0x1e209b(0x1d5)]||'';const _0x3e7f64=_0x5f2570['querySelector']('.popup-actions')||document['createElement']('div');!_0x5f2570['querySelector'](_0x1e209b(0x247))?(_0x3e7f64[_0x1e209b(0x26f)]='popup-actions',_0x3e7f64[_0x1e209b(0x273)]['display']='flex',_0x3e7f64['style']['justifyContent']=_0x1e209b(0x220),_0x3e7f64[_0x1e209b(0x273)]['gap']='10px',_0x3e7f64[_0x1e209b(0x273)]['marginTop']=_0x1e209b(0x230),_0x5f2570['appendChild'](_0x3e7f64)):_0x3e7f64[_0x1e209b(0x201)]='';const _0xa37322=document['createElement']('button');_0xa37322['textContent']='Close',_0xa37322['className']='popup-btn\x20close-btn',_0xa37322['id']=_0x1e209b(0x22e),_0xa37322['addEventListener'](_0x1e209b(0x235),closePreviewCommentPopup);const _0x882067=document['createElement'](_0x1e209b(0x1e1));_0x882067['textContent']='Report',_0x882067[_0x1e209b(0x26f)]=_0x1e209b(0x283),_0x882067['style'][_0x1e209b(0x278)]='#d32f2f',_0x882067[_0x1e209b(0x262)]('click',reportComment),_0x3e7f64['appendChild'](_0xa37322),_0x3e7f64['appendChild'](_0x882067),_0x5f2570['style'][_0x1e209b(0x1d8)]='block',_0x5c56fe['style']['display']=_0x1e209b(0x22b);}export function setupPreviewEventListeners(){const _0xe7a197=a0_0x2dd2,_0x2d52af=document['getElementById']('previewPrevPage'),_0x4ce7e1=document[_0xe7a197(0x225)](_0xe7a197(0x1df)),_0x520d4c=document['getElementById'](_0xe7a197(0x26a)),_0x55863c=document['getElementById']('preview-d2-button'),_0x137320=document[_0xe7a197(0x225)]('preview-d3-button'),_0x2f2734=document[_0xe7a197(0x225)]('filter-toggle-button'),_0xaf56af=document['getElementById']('enhanced-filter-section');if(!_0x2d52af||!_0x4ce7e1||!_0x520d4c||!_0x55863c||!_0x137320||!_0x2f2734||!_0xaf56af){console[_0xe7a197(0x1d9)]('Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.');return;}_0x2d52af['addEventListener']('click',()=>{const _0x46193b=_0xe7a197;if(!_0x2d52af['disabled'])loadRecentMatchesPreview(_0x46193b(0x1d4));}),_0x4ce7e1[_0xe7a197(0x262)]('click',()=>{if(!_0x4ce7e1['disabled'])loadRecentMatchesPreview('next');}),_0x520d4c['addEventListener']('click',()=>{const _0x5dae10=_0xe7a197;previewState['currentMode']!=='D1'&&!previewState[_0x5dae10(0x1d0)]&&(previewState[_0x5dae10(0x1fc)]='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x5dae10(0x27a)));}),_0x55863c['addEventListener']('click',()=>{const _0x4fd5b3=_0xe7a197;previewState[_0x4fd5b3(0x1fc)]!=='D2'&&!previewState[_0x4fd5b3(0x1d0)]&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x137320['addEventListener']('click',()=>{const _0x2f2f48=_0xe7a197;previewState[_0x2f2f48(0x1fc)]!=='D3'&&!previewState['isLoading']&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));});_0x2f2734&&_0xaf56af&&_0x2f2734['addEventListener']('click',()=>{const _0x12891d=_0xe7a197,_0xd59991=_0xaf56af['style']['display']!=='none';_0xaf56af['style']['display']=_0xd59991?_0x12891d(0x1f3):_0x12891d(0x22b),_0x2f2734['classList'][_0x12891d(0x255)](_0x12891d(0x25c),!_0xd59991);});const _0x1ce3bc=document['getElementById']('apply-enhanced-filters'),_0x1bc634=document['getElementById'](_0xe7a197(0x1f9));_0x1ce3bc&&_0x1ce3bc['addEventListener']('click',()=>{const _0xae5e12=_0xe7a197;previewState[_0xae5e12(0x276)]['pilots']=document['getElementById']('filter-pilots')[_0xae5e12(0x241)]['trim'](),previewState[_0xae5e12(0x276)]['levels']=document['getElementById'](_0xae5e12(0x246))['value']['trim']();const _0x3b3071=document['getElementById']('filter-subgames');previewState['enhancedFilters'][_0xae5e12(0x284)]=Array['from'](_0x3b3071['selectedOptions'])['map'](_0x459193=>_0x459193[_0xae5e12(0x241)])['filter'](_0x5d2680=>_0x5d2680!==''),loadRecentMatchesPreview('current');});_0x1bc634&&_0x1bc634['addEventListener']('click',()=>{const _0x2cce4d=_0xe7a197;clearEnhancedFilters(),loadRecentMatchesPreview(_0x2cce4d(0x27a));});document['querySelectorAll']('.jump-btn')['forEach'](_0x74e01e=>{_0x74e01e['addEventListener']('click',()=>{const _0xa4b257=a0_0x2dd2,_0xff4119=_0x74e01e['dataset'][_0xa4b257(0x24a)];jumpToPage(_0xff4119);});});const _0x2b1717=document[_0xe7a197(0x225)]('jump-to-page');_0x2b1717&&_0x2b1717[_0xe7a197(0x262)](_0xe7a197(0x22c),_0x522d69=>{_0x522d69['key']==='Enter'&&jumpToPage('input');});const _0x391bf9=document[_0xe7a197(0x225)]('closeCommentPopupPreview'),_0x1e0b87=document['getElementById']('commentOverlayPreview');if(_0x391bf9)_0x391bf9['addEventListener']('click',closePreviewCommentPopup);if(_0x1e0b87)_0x1e0b87[_0xe7a197(0x262)]('click',closePreviewCommentPopup);const _0x3c3663=document['getElementById']('closeAddCommentPopup'),_0x12ac49=document[_0xe7a197(0x225)]('commentAddOverlay'),_0x1f61fa=document['getElementById'](_0xe7a197(0x1e8));if(_0x3c3663)_0x3c3663['addEventListener'](_0xe7a197(0x235),closeAddCommentPopup);if(_0x12ac49)_0x12ac49[_0xe7a197(0x262)](_0xe7a197(0x235),closeAddCommentPopup);if(_0x1f61fa)_0x1f61fa[_0xe7a197(0x262)]('submit',submitComment);const _0x4e6961=document['getElementById']('commentText'),_0x245045=document[_0xe7a197(0x225)]('wordCount');_0x4e6961&&_0x245045&&setupWordCounter('commentText','wordCount',0xf);}window['showAddCommentPopup']=showAddCommentPopup,window[a0_0x171c74(0x260)]=closeAddCommentPopup,window['submitComment']=submitComment;