const a45_0x469db4=a45_0x3471,a45_0x3cf602=(function(){let _0x51ebd8=!![];return function(_0x39a314,_0x23d96a){const _0x4dab06=_0x51ebd8?function(){if(_0x23d96a){const _0x4c0a70=_0x23d96a['apply'](_0x39a314,arguments);return _0x23d96a=null,_0x4c0a70;}}:function(){};return _0x51ebd8=![],_0x4dab06;};}()),a45_0x4a6bd7=a45_0x3cf602(this,function(){const _0xc8c3ae=a45_0x3471,_0x152acc=function(){let _0x17e2fb;try{_0x17e2fb=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x44145e){_0x17e2fb=window;}return _0x17e2fb;},_0x383051=_0x152acc(),_0x4d0590=_0x383051['console']=_0x383051['console']||{},_0x1231c3=[_0xc8c3ae(0x149),'warn','info','error','exception',_0xc8c3ae(0x151),'trace'];for(let _0x1f870c=0x0;_0x1f870c<_0x1231c3['length'];_0x1f870c++){const _0x32f146=a45_0x3cf602['constructor']['prototype']['bind'](a45_0x3cf602),_0x329559=_0x1231c3[_0x1f870c],_0x32be2e=_0x4d0590[_0x329559]||_0x32f146;_0x32f146['__proto__']=a45_0x3cf602['bind'](a45_0x3cf602),_0x32f146['toString']=_0x32be2e['toString']['bind'](_0x32be2e),_0x4d0590[_0x329559]=_0x32f146;}});a45_0x4a6bd7();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x232805){const _0x9cb6f9=a45_0x3471,_0x3caf97=document['getElementById'](_0x9cb6f9(0x155));if(!_0x3caf97)return;if(_0x232805['length']===0x0){_0x3caf97['style']['display']='none';return;}_0x3caf97['style'][_0x9cb6f9(0x14c)]=_0x9cb6f9(0x153);let _0x49b4d7='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x232805['forEach'](_0x3be979=>{const _0x2e1e12=_0x9cb6f9;_0x49b4d7+=_0x2e1e12(0x156)+(_0x3be979['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x3be979['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x49b4d7+=_0x9cb6f9(0x14d),_0x3caf97['innerHTML']=_0x49b4d7;}function a45_0x5d3d(){const _0x2fb2bd=['log','unload','lastUpdated','display','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','isReady','readyPlayers','floor','table','Error\x20removing\x20player\x20from\x20queue:','block','toDate','queue-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'];a45_0x5d3d=function(){return _0x2fb2bd;};return a45_0x5d3d();}function formatQueueTime(_0x2a2e78){const _0x531499=a45_0x3471;if(!_0x2a2e78)return'Just\x20now';const _0x38d112=_0x2a2e78[_0x531499(0x154)]?_0x2a2e78['toDate']():new Date(_0x2a2e78),_0x3d17f0=new Date(),_0x811656=Math[_0x531499(0x150)]((_0x3d17f0-_0x38d112)/0xea60);if(_0x811656<0x1)return'Just\x20now';return _0x811656+'m\x20in\x20queue';}function a45_0x3471(_0x47a20c,_0x1e5a79){const _0x4a6bd7=a45_0x5d3d();return a45_0x3471=function(_0x3cf602,_0x441d96){_0x3cf602=_0x3cf602-0x149;let _0x5d3dca=_0x4a6bd7[_0x3cf602];return _0x5d3dca;},a45_0x3471(_0x47a20c,_0x1e5a79);}async function checkQueueTimeout(_0x342849){const _0x1c66e8=a45_0x3471;if(!_0x342849['lastUpdated'])return;const _0x179dde=_0x342849['lastUpdated'][_0x1c66e8(0x154)]?_0x342849['lastUpdated']['toDate']():new Date(_0x342849[_0x1c66e8(0x14b)]),_0x547799=new Date(),_0xdf86fa=Math['floor']((_0x547799-_0x179dde)/0xea60);if(_0xdf86fa>=0x1e)try{const _0x1de50e=doc(db,_0x1c66e8(0x14f),_0x342849['id']);await updateDoc(_0x1de50e,{'isReady':![]});}catch(_0x137504){console['error'](_0x1c66e8(0x152),_0x137504);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x50685f=>{const _0x9238ec=[];_0x50685f['forEach'](_0x47f775=>{const _0x58f988=a45_0x3471,_0x3b61e1=_0x47f775['data']();if(_0x3b61e1[_0x58f988(0x14e)]===!![]){const _0x5bee0a={'id':_0x47f775['id'],'username':_0x3b61e1['username'],'lastUpdated':_0x3b61e1['lastUpdated']||new Date()};_0x9238ec['push'](_0x5bee0a),checkQueueTimeout(_0x5bee0a);}}),updateQueueDisplay(_0x9238ec);},_0xdb8c11=>{console['error']('Error\x20in\x20queue\x20listener:',_0xdb8c11);});window['addEventListener'](a45_0x469db4(0x14a),()=>{unsubscribe();});