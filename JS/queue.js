const a45_0x73b454=a45_0x5975,a45_0x13757a=(function(){let _0x57f126=!![];return function(_0x1cf48b,_0x4baa3e){const _0x4a082a=_0x57f126?function(){if(_0x4baa3e){const _0x426a81=_0x4baa3e['apply'](_0x1cf48b,arguments);return _0x4baa3e=null,_0x426a81;}}:function(){};return _0x57f126=![],_0x4a082a;};}()),a45_0x25eaf1=a45_0x13757a(this,function(){const _0x135b29=a45_0x5975;let _0x4048b0;try{const _0x1e9b92=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4048b0=_0x1e9b92();}catch(_0x562c16){_0x4048b0=window;}const _0x52392d=_0x4048b0['console']=_0x4048b0['console']||{},_0xc182a6=['log','warn','info','error','exception','table',_0x135b29(0x74)];for(let _0x22e8f7=0x0;_0x22e8f7<_0xc182a6['length'];_0x22e8f7++){const _0x4352b5=a45_0x13757a['constructor']['prototype']['bind'](a45_0x13757a),_0x4a4234=_0xc182a6[_0x22e8f7],_0x7ba361=_0x52392d[_0x4a4234]||_0x4352b5;_0x4352b5['__proto__']=a45_0x13757a['bind'](a45_0x13757a),_0x4352b5['toString']=_0x7ba361['toString']['bind'](_0x7ba361),_0x52392d[_0x4a4234]=_0x4352b5;}});function a45_0x5975(_0x1903d4,_0x489e87){const _0x25eaf1=a45_0x3eb9();return a45_0x5975=function(_0x13757a,_0x289261){_0x13757a=_0x13757a-0x6b;let _0x3eb913=_0x25eaf1[_0x13757a];return _0x3eb913;},a45_0x5975(_0x1903d4,_0x489e87);}a45_0x25eaf1();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a45_0x73b454(0x6b)),activePlayersQuery=query(readyPlayersRef,where(a45_0x73b454(0x6e),'==',!![]));function updateQueueDisplay(_0x2bc28f){const _0xd4df0a=a45_0x73b454,_0x556fbb=document['getElementById']('queue-container');if(!_0x556fbb)return;if(_0x2bc28f['length']===0x0){_0x556fbb['style']['display']='none';return;}_0x556fbb['style']['display']='block';let _0x34a099=_0xd4df0a(0x75);_0x2bc28f['forEach'](_0x171504=>{const _0x5799eb=_0xd4df0a;_0x34a099+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x171504['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x171504['lastUpdated'])+_0x5799eb(0x73);}),_0x34a099+=_0xd4df0a(0x6c),_0x556fbb['innerHTML']=_0x34a099;}function formatQueueTime(_0x57f8ef){const _0x4f1ada=a45_0x73b454;if(!_0x57f8ef)return'Just\x20now';const _0x5919dd=_0x57f8ef['toDate']?_0x57f8ef[_0x4f1ada(0x6f)]():new Date(_0x57f8ef),_0x468c3f=new Date(),_0x1465a1=Math['floor']((_0x468c3f-_0x5919dd)/0xea60);if(_0x1465a1<0x1)return _0x4f1ada(0x71);return _0x1465a1+_0x4f1ada(0x70);}async function checkQueueTimeout(_0x2a8387){const _0x172055=a45_0x73b454;if(!_0x2a8387[_0x172055(0x72)])return;const _0x44dc5f=_0x2a8387['lastUpdated']['toDate']?_0x2a8387['lastUpdated'][_0x172055(0x6f)]():new Date(_0x2a8387['lastUpdated']),_0x4c5528=new Date(),_0x53fde7=Math['floor']((_0x4c5528-_0x44dc5f)/0xea60);if(_0x53fde7>=0x1e)try{const _0x31101b=doc(db,_0x172055(0x6b),_0x2a8387['id']);await updateDoc(_0x31101b,{'isReady':![]});}catch(_0x362606){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x362606);}}function a45_0x3eb9(){const _0x5ddf41=['readyPlayers','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Error\x20in\x20queue\x20listener:','isReady','toDate','m\x20in\x20queue','Just\x20now','lastUpdated','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','trace','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20'];a45_0x3eb9=function(){return _0x5ddf41;};return a45_0x3eb9();}const unsubscribe=onSnapshot(readyPlayersRef,_0x45fe56=>{const _0x527012=[];_0x45fe56['forEach'](_0x222214=>{const _0x13c67e=_0x222214['data']();if(_0x13c67e['isReady']===!![]){const _0x1780a1={'id':_0x222214['id'],'username':_0x13c67e['username'],'lastUpdated':_0x13c67e['lastUpdated']||new Date()};_0x527012['push'](_0x1780a1),checkQueueTimeout(_0x1780a1);}}),updateQueueDisplay(_0x527012);},_0x56c5c5=>{const _0x4fadcc=a45_0x73b454;console['error'](_0x4fadcc(0x6d),_0x56c5c5);});window['addEventListener']('unload',()=>{unsubscribe();});