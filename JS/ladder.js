const a25_0x28e196=a25_0x2f43,a25_0x19039f=(function(){let _0x3e3b67=!![];return function(_0x3a4910,_0x13ccd2){const _0x1afdd9=_0x3e3b67?function(){if(_0x13ccd2){const _0x893e03=_0x13ccd2['apply'](_0x3a4910,arguments);return _0x13ccd2=null,_0x893e03;}}:function(){};return _0x3e3b67=![],_0x1afdd9;};}()),a25_0x5d400a=a25_0x19039f(this,function(){const _0x24f81d=a25_0x2f43;let _0xffafd0;try{const _0x2e73ac=Function(_0x24f81d(0x1c1)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xffafd0=_0x2e73ac();}catch(_0x51684a){_0xffafd0=window;}const _0x55b2c2=_0xffafd0['console']=_0xffafd0['console']||{},_0x334f1c=['log','warn','info','error',_0x24f81d(0x1af),'table',_0x24f81d(0x1e4)];for(let _0x5630d4=0x0;_0x5630d4<_0x334f1c['length'];_0x5630d4++){const _0xb3cbdf=a25_0x19039f[_0x24f81d(0x18c)]['prototype']['bind'](a25_0x19039f),_0x159efb=_0x334f1c[_0x5630d4],_0x3830c9=_0x55b2c2[_0x159efb]||_0xb3cbdf;_0xb3cbdf[_0x24f81d(0x177)]=a25_0x19039f['bind'](a25_0x19039f),_0xb3cbdf['toString']=_0x3830c9[_0x24f81d(0x185)]['bind'](_0x3830c9),_0x55b2c2[_0x159efb]=_0xb3cbdf;}});a25_0x5d400a();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';function a25_0x2f43(_0x15660d,_0x2421c6){const _0x5d400a=a25_0x2dbb();return a25_0x2f43=function(_0x19039f,_0x1c27b4){_0x19039f=_0x19039f-0x173;let _0x2dbb20=_0x5d400a[_0x19039f];return _0x2dbb20;},a25_0x2f43(_0x15660d,_0x2421c6);}import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x36d249=0x1){const _0x5b358b=a25_0x2f43;try{document[_0x5b358b(0x184)](_0x5b358b(0x1df))['style'][_0x5b358b(0x173)]='block';const _0x5509c9=await getLadderData(_0x36d249);_0x5509c9['sort']((_0x35f937,_0x138e01)=>_0x138e01['elo']-_0x35f937['elo']);const _0x4de0d1=_0x5509c9['map'](_0x26c734=>_0x26c734['id']),_0x26f3ca=await getEloHistoryBatch(_0x4de0d1,_0x36d249),_0x5aea87=_0x5509c9['map']((_0x12ba0f,_0x4c3ffd)=>{const _0x1a3713=_0x5b358b,_0x4af676=_0x26f3ca[_0x12ba0f['id']]||[],_0x5166e6=_0x4af676['sort']((_0x3c14ba,_0x1539d1)=>new Date(_0x1539d1[_0x1a3713(0x1ac)])-new Date(_0x3c14ba['date']))[_0x1a3713(0x191)](0x0,0x5);return{..._0x12ba0f,'rank':_0x4c3ffd+0x1,'lastMatches':_0x5166e6,'recentActivity':_0x5166e6['length']>0x0};});renderLadder(_0x5aea87),setupRealTimeUpdates(_0x36d249);}catch(_0x1b4936){console[_0x5b358b(0x1a8)]('Error\x20loading\x20ladder\x20data:',_0x1b4936),document['getElementById'](_0x5b358b(0x1bb))[_0x5b358b(0x1bc)]=_0x5b358b(0x195);}finally{document[_0x5b358b(0x184)](_0x5b358b(0x1df))['style']['display']='none';}}function setupRealTimeUpdates(_0x4fefef=0x1){const _0x5eb349=a25_0x2f43;activeListeners['forEach'](_0x28c0d0=>_0x28c0d0()),activeListeners=[];const _0x2440a8=_0x4fefef===0x1?'players':_0x5eb349(0x1e3)+_0x4fefef,_0x54384f=_0x4fefef===0x1?'matches':'matchesD'+_0x4fefef,_0x19524a=new Date();_0x19524a[_0x5eb349(0x182)](_0x19524a['getDate']()-0x1);const _0x1a55a5=setupEfficientListener(_0x54384f,[where(_0x5eb349(0x1ac),'>=',_0x19524a[_0x5eb349(0x1b0)]()),limit(0xa),orderBy('date','desc')],async _0x328f65=>{_0x328f65['length']>0x0&&await loadLadderData(_0x4fefef);});activeListeners['push'](_0x1a55a5);}export function cleanupListeners(){activeListeners['forEach'](_0x4a6637=>_0x4a6637()),activeListeners=[];}function renderLadder(_0x4b4fea){const _0x2354e5=a25_0x2f43,_0x2a95c6=document[_0x2354e5(0x184)]('ladder-container');_0x2a95c6['innerHTML']='',_0x4b4fea['forEach'](_0x500a95=>{const _0x115f67=_0x2354e5,_0x230abc=document['createElement']('div');_0x230abc['className']='ladder-player',_0x230abc['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x500a95['rank']+_0x115f67(0x1b2)+(_0x500a95['username']||_0x500a95['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x500a95['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x500a95[_0x115f67(0x1c6)]?'active':'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x500a95[_0x115f67(0x1c6)]?'Active':'Inactive')+_0x115f67(0x1c0),_0x2a95c6['appendChild'](_0x230abc);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x475e04=![]){const _0x168599=a25_0x2f43,_0x42ba4d=document['querySelector']('#ladder\x20tbody');if(!_0x42ba4d){console[_0x168599(0x1a8)]('Ladder\x20table\x20body\x20not\x20found');return;}_0x42ba4d['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x5cf9f5=Date['now']();if(!_0x475e04&&playerCache[_0x168599(0x1e7)]&&_0x5cf9f5-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache[_0x168599(0x1e7)]);return;}const _0x11faa9=collection(db,'players'),_0x2d9c2e=await getDocs(_0x11faa9),_0x3c3b2f=[];_0x2d9c2e['forEach'](_0x4ea401=>{const _0x2f4aa2=_0x168599,_0x285df2=_0x4ea401[_0x2f4aa2(0x1e7)]();_0x3c3b2f[_0x2f4aa2(0x188)]({..._0x285df2,'id':_0x4ea401['id'],'elo':_0x285df2['eloRating']||0x0,'position':_0x285df2['position']||Number[_0x2f4aa2(0x183)]});});const _0x3fbfd3=collection(db,_0x168599(0x1c2)),_0x4a4df2=await getDocs(_0x3fbfd3),_0x5ddc1f=new Map();_0x4a4df2[_0x168599(0x1bf)](_0x3dd04d=>{const _0x411b9a=_0x168599,_0x27b2ba=_0x3dd04d['data']();_0x27b2ba[_0x411b9a(0x1a1)]&&_0x5ddc1f['set'](_0x27b2ba['username']['toLowerCase'](),_0x27b2ba);}),_0x3c3b2f['forEach'](_0x33dba6=>{const _0x5bb0de=_0x168599,_0x43f7e4=_0x33dba6['username']?.[_0x5bb0de(0x175)]();if(_0x43f7e4&&_0x5ddc1f['has'](_0x43f7e4)){const _0x2bb487=_0x5ddc1f[_0x5bb0de(0x1b7)](_0x43f7e4);_0x2bb487['country']&&(_0x33dba6['country']=_0x2bb487['country']['toLowerCase']()),_0x33dba6[_0x5bb0de(0x1dc)]=_0x2bb487['points']||0x0;}else _0x33dba6['points']=0x0;});const _0xd5cf93=_0x3c3b2f[_0x168599(0x1c5)](_0x297dc7=>_0x297dc7[_0x168599(0x1a1)]),_0x47eb74=await fetchBatchMatchStats(_0xd5cf93);_0x3c3b2f['sort']((_0x2991f7,_0x3726a3)=>{const _0x56b8af=_0x168599,_0x419215=_0x47eb74['get'](_0x2991f7['username'])?.[_0x56b8af(0x187)]||0x0,_0x57dcbd=_0x47eb74['get'](_0x3726a3['username'])?.['totalMatches']||0x0;if(_0x419215===0x0!==(_0x57dcbd===0x0))return _0x419215===0x0?0x1:-0x1;return(_0x2991f7[_0x56b8af(0x17c)]||0x3e7)-(_0x3726a3['position']||0x3e7);}),_0x3c3b2f['forEach']((_0x1f068b,_0x42e5fe)=>{_0x1f068b['position']=_0x42e5fe+0x1;}),playerCache['data']=_0x3c3b2f,playerCache['timestamp']=_0x5cf9f5,updateLadderDisplay(_0x3c3b2f,_0x47eb74);}catch(_0x46b202){console['error']('Error\x20loading\x20ladder:',_0x46b202),_0x42ba4d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x46b202['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0xa94af2){const _0x4093e5=a25_0x2f43,_0x278111=new Map();try{_0xa94af2['forEach'](_0x91983=>{_0x278111['set'](_0x91983,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0,'points':0x0});});const _0x1705a7=collection(db,_0x4093e5(0x18b)),_0x73bd8a=await getDocs(_0x1705a7);_0x73bd8a['forEach'](_0x3c39e0=>{const _0x243f46=_0x4093e5,_0x5376c4=_0x3c39e0[_0x243f46(0x1e7)](),_0x70261d=_0x5376c4['winnerUsername'],_0x1d7bb1=_0x5376c4[_0x243f46(0x176)];if(_0xa94af2[_0x243f46(0x1ad)](_0x70261d)){const _0x4adc89=_0x278111[_0x243f46(0x1b7)](_0x70261d);_0x4adc89['wins']++,_0x4adc89['totalMatches']++,_0x4adc89['totalKills']+=parseInt(_0x5376c4['winnerScore'])||0x0,_0x4adc89[_0x243f46(0x1c9)]+=parseInt(_0x5376c4['loserScore'])||0x0;}if(_0xa94af2['includes'](_0x1d7bb1)){const _0x1357c1=_0x278111[_0x243f46(0x1b7)](_0x1d7bb1);_0x1357c1[_0x243f46(0x189)]++,_0x1357c1[_0x243f46(0x187)]++,_0x1357c1['totalKills']+=parseInt(_0x5376c4['loserScore'])||0x0,_0x1357c1['totalDeaths']+=parseInt(_0x5376c4[_0x243f46(0x1e6)])||0x0;}}),_0xa94af2[_0x4093e5(0x1bf)](_0x11e335=>{const _0x2133d8=_0x4093e5,_0x580e90=_0x278111['get'](_0x11e335);_0x580e90['kda']=_0x580e90['totalDeaths']>0x0?(_0x580e90[_0x2133d8(0x17f)]/_0x580e90[_0x2133d8(0x1c9)])[_0x2133d8(0x180)](0x2):_0x580e90['totalKills']['toFixed'](0x2),_0x580e90['winRate']=_0x580e90['totalMatches']>0x0?(_0x580e90['wins']/_0x580e90[_0x2133d8(0x187)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x1cb81a){console[_0x4093e5(0x1a8)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x1cb81a);}return _0x278111;}function createPlayerRow(_0x40432a,_0x3ef287){const _0x19e765=a25_0x2f43,_0x47249a=parseFloat(_0x40432a[_0x19e765(0x18e)])||0x0;let _0x5439bc='#DC143C';if(_0x3ef287['totalMatches']===0x0)_0x5439bc='#DC143C';else{if(_0x3ef287['winRate']>=0x50&&_0x3ef287['totalMatches']>=0x14)_0x5439bc='#50C878';else{if(_0x47249a>=0x2bc)_0x5439bc=_0x19e765(0x1e0);else{if(_0x47249a>=0x1f4)_0x5439bc='#C0C0C0';else _0x47249a>=0xc8&&(_0x5439bc=_0x19e765(0x1ef));}}}let _0x238ac6='';return _0x40432a['country']&&(_0x238ac6=_0x19e765(0x17b)+_0x40432a['country'][_0x19e765(0x175)]()+_0x19e765(0x19d)+_0x40432a[_0x19e765(0x1b6)]+_0x19e765(0x199)),_0x19e765(0x196)+_0x40432a['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x40432a['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x5439bc+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x40432a[_0x19e765(0x1a1)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x238ac6+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x5439bc+_0x19e765(0x1d4)+_0x47249a+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ef287[_0x19e765(0x187)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ef287['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ef287['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ef287[_0x19e765(0x1f0)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ef287[_0x19e765(0x1e9)]+_0x19e765(0x1cc)+_0x3ef287[_0x19e765(0x1dc)]+'</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x34b1c6,_0x35c5bb=0x0,_0x176724=0x0){const _0x5ba4bd=a25_0x2f43;if(_0x35c5bb===0x0)return'Unranked';if(_0x34b1c6>=0x3e8&&_0x176724>=0x50&&_0x35c5bb>=0x14)return _0x5ba4bd(0x17e);if(_0x34b1c6>=0x2bc)return _0x5ba4bd(0x1a3);if(_0x34b1c6>=0x1f4)return'Silver';if(_0x34b1c6>=0xc8)return _0x5ba4bd(0x1d5);return'Unranked';}async function getPlayersLastEloChanges(_0x4407c7){const _0x236dc3=a25_0x2f43,_0x39ec24=new Map();_0x4407c7['forEach'](_0x593823=>{_0x39ec24['set'](_0x593823,0x0);});try{const _0x9dfc1b=collection(db,'players'),_0x4eb516=await getDocs(_0x9dfc1b),_0x4ef63a=new Map(),_0x587e1d=new Map();_0x4eb516['forEach'](_0x1b5a1f=>{const _0x1c18e7=a25_0x2f43,_0x16459e=_0x1b5a1f['data']();_0x16459e[_0x1c18e7(0x1a1)]&&(_0x4ef63a['set'](_0x1b5a1f['id'],_0x16459e['username']),_0x587e1d['set'](_0x16459e[_0x1c18e7(0x1a1)]['toLowerCase'](),_0x1b5a1f['id']));});const _0x23c4c9=collection(db,'eloHistory'),_0x21f8d8=query(_0x23c4c9,orderBy('timestamp',_0x236dc3(0x1ca)),limit(0x12c)),_0x5d5035=await getDocs(_0x21f8d8);if(_0x5d5035['empty'])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x39ec24;if(_0x5d5035['docs']['length']>0x0){const _0x262c3f=_0x5d5035['docs'][0x0]['data']();if(_0x262c3f['player']&&_0x4ef63a['has'](_0x262c3f['player'])){}}const _0x196b14=new Map();let _0x1c4e87=0x0;_0x5d5035['forEach'](_0x1b9ba4=>{const _0x5217a3=_0x236dc3,_0xf52148=_0x1b9ba4['data']();let _0x1c9982=null;if(_0xf52148['player']&&_0x4ef63a['has'](_0xf52148[_0x5217a3(0x1c8)]))_0x1c9982=_0x4ef63a[_0x5217a3(0x1b7)](_0xf52148[_0x5217a3(0x1c8)]);else{if(_0xf52148[_0x5217a3(0x1a1)]&&_0x587e1d['has'](_0xf52148['username']['toLowerCase']()))_0x1c9982=_0xf52148['username'];else _0xf52148[_0x5217a3(0x18d)]&&_0x587e1d[_0x5217a3(0x1dd)](_0xf52148['playerUsername']['toLowerCase']())&&(_0x1c9982=_0xf52148['playerUsername']);}_0x1c9982&&_0x4407c7[_0x5217a3(0x1ad)](_0x1c9982)&&(_0x1c4e87++,!_0x196b14['has'](_0x1c9982)&&_0x196b14['set'](_0x1c9982,[]),_0x196b14['get'](_0x1c9982)['push']({..._0xf52148,'timestamp':_0xf52148[_0x5217a3(0x1cb)]?.['seconds']||0x0}));}),_0x196b14['forEach']((_0x545800,_0x2015b3)=>{const _0x1e9200=_0x236dc3;if(_0x545800[_0x1e9200(0x17a)]>0x0){_0x545800[_0x1e9200(0x19b)]((_0x73054e,_0x5bf8d9)=>_0x5bf8d9['timestamp']-_0x73054e['timestamp']);const _0x531594=_0x545800[_0x1e9200(0x1d2)](_0xe47bf1=>_0xe47bf1['change']!==undefined||_0xe47bf1['newElo']!==undefined&&_0xe47bf1['previousElo']!==undefined||_0xe47bf1['newEloRating']!==undefined&&_0xe47bf1[_0x1e9200(0x1e2)]!==undefined);if(_0x531594){let _0x79cb74;if(_0x531594['change']!==undefined)_0x79cb74=parseInt(_0x531594['change']);else{if(_0x531594[_0x1e9200(0x19f)]!==undefined&&entry['previousElo']!==undefined)_0x79cb74=parseInt(_0x531594['newElo'])-parseInt(_0x531594['previousElo']);else _0x531594['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x79cb74=parseInt(_0x531594['newEloRating'])-parseInt(_0x531594[_0x1e9200(0x1e2)]));}!isNaN(_0x79cb74)&&_0x79cb74!==0x0&&_0x39ec24['set'](_0x2015b3,_0x79cb74);}}});}catch(_0x2a0464){console['error'](_0x236dc3(0x194),_0x2a0464);}return _0x39ec24;}function a25_0x2dbb(){const _0x467ff6=['display','size','toLowerCase','loserUsername','__proto__','playersD2','elo-recommendation-text-d3','length','<img\x20src=\x22../images/flags/','position','equipped','Emerald','totalKills','toFixed','duos-switch','setDate','MAX_SAFE_INTEGER','getElementById','toString','eloRating','totalMatches','push','losses','Error\x20checking\x20admin\x20status:','approvedMatches','constructor','playerUsername','elo','Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents','addEventListener','slice','creative\x20lead','target','Error\x20fetching\x20ELO\x20history:','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','#F44336','council','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','Error\x20fetching\x20tokens:','sort','checked','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','empty','newElo','createElement','username','not-allowed','Gold','(Equipped)','playersD3','textContent','admin-only-message','error','block','log','remove','date','includes','d1-ladder-container','exception','toISOString','add','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','hasTeam','d2-ladder-container','opacity','country','get','Duos\x20ladder\x20is\x20currently\x20admin-only','elo-recommendation-text-d2','elo-recommendation-text-d1','error-message','innerText','innerHTML','change','forEach','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','return\x20(function()\x20','userProfiles','catch','classList','map','recentActivity','pow','player','totalDeaths','desc','timestamp','%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','click','preventDefault','active','</span>\x20(ELO:\x20','),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20','find','currentUser',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','Bronze','</span>','#b9f1fc','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','tokenName','DOMContentLoaded','none','points','has','D3\x20toggle\x20clicked','loading-indicator','#FFD700','\x20not\x20found','oldEloRating','playersD','trace','style','winnerScore','data','querySelector','winRate','gray','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20','#50C878','d3-switch','email','#CD7F32','kda'];a25_0x2dbb=function(){return _0x467ff6;};return a25_0x2dbb();}function createPlayerRowWithToken(_0x35bb45,_0x784def,_0x3b096b){const _0xd5af82=a25_0x2f43,_0x2c92ed=parseFloat(_0x35bb45['elo'])||0x0;let _0x2d368d='#DC143C';if(_0x784def['totalMatches']===0x0)_0x2d368d='#DC143C';else{if(_0x784def[_0xd5af82(0x1e9)]>=0x50&&_0x784def['totalMatches']>=0x14)_0x2d368d='#50C878';else{if(_0x2c92ed>=0x2bc)_0x2d368d=_0xd5af82(0x1e0);else{if(_0x2c92ed>=0x1f4)_0x2d368d='#C0C0C0';else _0x2c92ed>=0xc8&&(_0x2d368d='#CD7F32');}}}let _0x4ef989='';_0x35bb45['country']&&(_0x4ef989=_0xd5af82(0x17b)+_0x35bb45['country']['toLowerCase']()+_0xd5af82(0x19d)+_0x35bb45['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x47c3ef='';return _0x3b096b&&(_0x47c3ef='<img\x20src=\x22'+_0x3b096b['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3b096b['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x3b096b['tokenName']+'\x20'+(_0x3b096b[_0xd5af82(0x17d)]?_0xd5af82(0x1a4):'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x35bb45[_0xd5af82(0x17c)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x35bb45['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x2d368d+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x35bb45['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4ef989+_0xd5af82(0x1d8)+_0x47c3ef+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x2d368d+_0xd5af82(0x1d4)+_0x2c92ed+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x784def['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x784def['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x784def[_0xd5af82(0x189)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x784def[_0xd5af82(0x1f0)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x784def['winRate']+'%</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>'+(_0x35bb45[_0xd5af82(0x1dc)]||0x0)+'</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x5d335f,_0x3d0c2f=null){const _0x12d4e7=a25_0x2f43,_0x578d21=document['querySelector']('#ladder\x20tbody');if(!_0x578d21){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x3d0f04=document['querySelector']('#ladder\x20thead\x20tr');_0x3d0f04&&(_0x3d0f04['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x5cab89=_0x5d335f['map'](_0x60cc99=>_0x60cc99['username']);!_0x3d0c2f&&(_0x3d0c2f=await fetchBatchMatchStats(_0x5cab89));let _0x128b4a=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x128b4a=await getTokensByUsernames(_0x5cab89),console['log']('🪙\x20Loaded\x20fresh\x20tokens\x20for',_0x128b4a[_0x12d4e7(0x174)],'players'),_0x128b4a['forEach']((_0x1a9606,_0x43f5a9)=>{const _0x2ade25=_0x12d4e7,_0x195bc5=_0x1a9606[_0x2ade25(0x1d2)](_0x4e29c5=>_0x4e29c5['equipped']);_0x195bc5&&console['log']('🎯\x20'+_0x43f5a9+'\x20has\x20equipped:\x20'+_0x195bc5[_0x2ade25(0x1d9)]);});}catch(_0x1345dd){console['error'](_0x12d4e7(0x19a),_0x1345dd);}const _0x2fdb7c=_0x5d335f['map'](_0x561cc8=>{const _0xf80803=_0x12d4e7,_0x6a0c98=_0x3d0c2f[_0xf80803(0x1b7)](_0x561cc8['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x28958f=_0x128b4a['get'](_0x561cc8['username'])||[],_0x38ae73=getPrimaryDisplayToken(_0x28958f);return _0x38ae73&&console['log']('🎨\x20'+_0x561cc8['username']+'\x20displaying\x20token:\x20'+_0x38ae73[_0xf80803(0x1d9)]+'\x20(equipped:\x20'+_0x38ae73[_0xf80803(0x17d)]+')'),createPlayerRowWithToken(_0x561cc8,_0x6a0c98,_0x38ae73);})['join']('');_0x578d21['innerHTML']=_0x2fdb7c,getPlayersLastEloChanges(_0x5cab89)['then'](_0x11783f=>{const _0x5b0595=new Map();_0x578d21['querySelectorAll']('tr')['forEach']((_0xb2049,_0x3ed61f)=>{_0x3ed61f<_0x5cab89['length']&&_0x5b0595['set'](_0x5cab89[_0x3ed61f],_0xb2049);}),_0x11783f['forEach']((_0x23979a,_0x47118a)=>{const _0x47cd02=a25_0x2f43,_0x1d60d1=_0x5b0595[_0x47cd02(0x1b7)](_0x47118a);if(_0x1d60d1&&_0x23979a!==0x0){const _0x3abd6e=_0x1d60d1['querySelector']('td:nth-child(3)');if(_0x3abd6e){const _0x10f65a=_0x23979a>0x0?'+'+_0x23979a:''+_0x23979a,_0x4a8284=_0x3abd6e['querySelector']('.trend-indicator');_0x4a8284&&(_0x4a8284[_0x47cd02(0x1a6)]=_0x10f65a,_0x4a8284['style']['color']=_0x23979a>0x0?'#4CAF50':_0x47cd02(0x197),_0x4a8284['style']['fontWeight']='bold',_0x4a8284[_0x47cd02(0x1e5)]['fontSize']='0.85em',_0x4a8284['style'][_0x47cd02(0x173)]='inline',_0x4a8284['style']['visibility']='visible',_0x4a8284[_0x47cd02(0x1e5)][_0x47cd02(0x1b5)]='1');}}});})[_0x12d4e7(0x1c3)](_0x315085=>console[_0x12d4e7(0x1a8)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x315085));}function initLadderToggles(){const _0x4a0aac=a25_0x2f43,_0x4d4134=document[_0x4a0aac(0x184)]('d1-switch'),_0x2a221f=document[_0x4a0aac(0x184)]('d2-switch'),_0x59246c=document['getElementById'](_0x4a0aac(0x1ed)),_0xb0596d=document[_0x4a0aac(0x184)](_0x4a0aac(0x181)),_0x34ec80=document['getElementById']('d1-ladder-container'),_0x1b8f63=document[_0x4a0aac(0x184)]('d2-ladder-container'),_0x2f5b33=document['getElementById']('d3-ladder-container'),_0x444ed8=document['getElementById']('duos-ladder-container');function _0x1f6f76(){const _0x206592=_0x4a0aac;if(_0x34ec80)_0x34ec80['classList'][_0x206592(0x1ab)](_0x206592(0x1cf));if(_0x1b8f63)_0x1b8f63[_0x206592(0x1c4)][_0x206592(0x1ab)](_0x206592(0x1cf));if(_0x2f5b33)_0x2f5b33[_0x206592(0x1c4)][_0x206592(0x1ab)]('active');if(_0x444ed8)_0x444ed8[_0x206592(0x1e5)]['display']='none';if(_0x34ec80)_0x34ec80['style']['display']='none';if(_0x1b8f63)_0x1b8f63['style']['display']='none';if(_0x2f5b33)_0x2f5b33['style']['display']='none';}_0x4d4134&&_0x4d4134['addEventListener']('click',()=>{const _0x387dbc=_0x4a0aac;console['log']('D1\x20toggle\x20clicked'),_0x1f6f76();_0x34ec80&&(_0x34ec80['classList']['add']('active'),_0x34ec80[_0x387dbc(0x1e5)]['display']='block');document['getElementById'](_0x387dbc(0x1ba))['style']['display']=_0x387dbc(0x1a9),document[_0x387dbc(0x184)]('elo-recommendation-text-d2')['style']['display']='none',document['getElementById'](_0x387dbc(0x179))['style'][_0x387dbc(0x173)]='none';if(_0x4d4134)_0x4d4134[_0x387dbc(0x1c4)]['add']('active');if(_0x2a221f)_0x2a221f['classList']['remove'](_0x387dbc(0x1cf));if(_0x59246c)_0x59246c['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x2a221f&&_0x2a221f['addEventListener']('click',()=>{const _0x25cd59=_0x4a0aac;console['log']('D2\x20toggle\x20clicked'),_0x1f6f76();_0x1b8f63&&(_0x1b8f63['classList']['add'](_0x25cd59(0x1cf)),_0x1b8f63['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style'][_0x25cd59(0x173)]='none',document['getElementById'](_0x25cd59(0x1b9))['style'][_0x25cd59(0x173)]='block',document[_0x25cd59(0x184)]('elo-recommendation-text-d3')[_0x25cd59(0x1e5)]['display']='none';if(_0x2a221f)_0x2a221f['classList']['add']('active');if(_0x4d4134)_0x4d4134['classList'][_0x25cd59(0x1ab)](_0x25cd59(0x1cf));if(_0x59246c)_0x59246c['classList'][_0x25cd59(0x1ab)]('active');displayLadderD2(),findBestOpponent('d2');}),_0x59246c&&_0x59246c['addEventListener'](_0x4a0aac(0x1cd),()=>{const _0x557803=_0x4a0aac;console[_0x557803(0x1aa)](_0x557803(0x1de)),_0x1f6f76();_0x2f5b33&&(_0x2f5b33['classList'][_0x557803(0x1b1)]('active'),_0x2f5b33[_0x557803(0x1e5)]['display']=_0x557803(0x1a9));document['getElementById']('elo-recommendation-text-d1')[_0x557803(0x1e5)]['display']='none',document[_0x557803(0x184)]('elo-recommendation-text-d2')['style']['display']=_0x557803(0x1db),document['getElementById']('elo-recommendation-text-d3')['style']['display']='block';if(_0x59246c)_0x59246c['classList']['add'](_0x557803(0x1cf));if(_0x4d4134)_0x4d4134[_0x557803(0x1c4)]['remove']('active');if(_0x2a221f)_0x2a221f[_0x557803(0x1c4)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0xb0596d&&_0xb0596d['addEventListener'](_0x4a0aac(0x1cd),()=>{const _0x570865=_0x4a0aac;_0x1f6f76();if(_0x444ed8)_0x444ed8[_0x570865(0x1e5)]['display']='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']=_0x570865(0x1a9)),document['getElementById'](_0x570865(0x1ba))['style']['display']='none',document['getElementById'](_0x570865(0x1b9))['style'][_0x570865(0x173)]='none',document[_0x570865(0x184)]('elo-recommendation-text-d3')['style'][_0x570865(0x173)]='none';});}document['addEventListener'](a25_0x28e196(0x1da),()=>{const _0x183c8b=a25_0x28e196;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x183c8b(0x1ba))[_0x183c8b(0x1e5)]['display']='block';});export{displayLadder};async function findBestOpponent(_0x2ea382='d1'){const _0x443a0f=a25_0x28e196,_0xc64cd1='elo-recommendation-text-'+_0x2ea382,_0x312ede=document['getElementById'](_0xc64cd1);if(!_0x312ede){console[_0x443a0f(0x1a8)]('Recommendation\x20element\x20for\x20'+_0x2ea382+_0x443a0f(0x1e1));return;}const _0x159c86=auth['currentUser'];if(!_0x159c86){_0x312ede['textContent']='';return;}try{const _0x348e81=doc(db,'userProfiles',_0x159c86['uid']),_0x3f74cd=await getDoc(_0x348e81);if(!_0x3f74cd['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x312ede['textContent']=_0x443a0f(0x18f);return;}const _0x4ffb1c=_0x3f74cd['data'](),_0x5db555=_0x4ffb1c[_0x443a0f(0x1a1)];if(!_0x5db555){_0x312ede[_0x443a0f(0x1a6)]='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x2dbc4d;switch(_0x2ea382){case'd1':_0x2dbc4d='players';break;case'd2':_0x2dbc4d='playersD2';break;case'd3':_0x2dbc4d='playersD3';break;case'duos':_0x2dbc4d='playersDuos';break;default:_0x2dbc4d='players';}if(_0x2ea382==='duos'){const _0x17c543=collection(db,_0x2dbc4d),_0x324dec=query(_0x17c543,where('username','==',_0x5db555)),_0xb8b917=await getDocs(_0x324dec);if(_0xb8b917['empty']){_0x312ede[_0x443a0f(0x1a6)]='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x2e88e7=_0xb8b917['docs'][0x0]['data'](),_0x214a91=parseInt(_0x2e88e7['eloRating'])||0x4b0;if(_0x2e88e7[_0x443a0f(0x1b3)]&&_0x2e88e7['teammate']){_0x312ede['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x2e88e7['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x5eb950=await getDocs(_0x17c543);let _0x5a8e21=null,_0x621159=-0x1;_0x5eb950['forEach'](_0x134233=>{const _0x169f48=_0x134233['data']();if(_0x169f48['username']===_0x5db555)return;if(_0x169f48['hasTeam'])return;const _0x587bbb=parseInt(_0x169f48['eloRating'])||0x4b0,_0x1dd3e3=Math['abs'](_0x587bbb-_0x214a91),_0x169ee1=Math['max'](0x0,0xc8-_0x1dd3e3);_0x169ee1>_0x621159&&(_0x5a8e21=_0x169f48,_0x621159=_0x169ee1);});if(_0x5a8e21){const _0x18ccaa=parseInt(_0x5a8e21[_0x443a0f(0x186)])||0x4b0;let _0x4834a1=_0x443a0f(0x1ea);if(_0x18ccaa>=0x7d0)_0x4834a1=_0x443a0f(0x1ec);else{if(_0x18ccaa>=0x708)_0x4834a1=_0x443a0f(0x1e0);else{if(_0x18ccaa>=0x640)_0x4834a1='#C0C0C0';else _0x18ccaa>=0x578&&(_0x4834a1='#CD7F32');}}_0x312ede['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x4834a1+';\x22>'+_0x5a8e21[_0x443a0f(0x1a1)]+_0x443a0f(0x1d0)+_0x18ccaa+')';}else _0x312ede[_0x443a0f(0x1a6)]='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x4962a8=collection(db,_0x2dbc4d),_0x1295a3=query(_0x4962a8,where('username','==',_0x5db555)),_0x516859=await getDocs(_0x1295a3);if(_0x516859[_0x443a0f(0x19e)]){_0x312ede['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x2ea382['toUpperCase']()+'\x20ladder';return;}const _0x18e0af=_0x516859['docs'][0x0]['data'](),_0x15b7d5=parseInt(_0x18e0af['eloRating'])||0x5dc,_0x281f04=await getDocs(_0x4962a8);let _0x15243d=null,_0x53957c=-0x1;const _0x33bb24=getPlayerRankName(_0x15b7d5);_0x281f04['forEach'](_0x4fdf25=>{const _0x19d297=_0x443a0f,_0x51bc57=_0x4fdf25[_0x19d297(0x1e7)]();if(_0x51bc57['username']===_0x5db555)return;const _0x1b9079=parseInt(_0x51bc57['eloRating'])||0x5dc,_0x36946e=getPlayerRankName(_0x1b9079),_0x8cab11=Math['abs'](_0x1b9079-_0x15b7d5),_0x59e553=0x20,_0x57e3f2=0x1/(0x1+Math[_0x19d297(0x1c7)](0xa,(_0x1b9079-_0x15b7d5)/0x190)),_0x4b590e=Math['round'](_0x59e553*(0x1-_0x57e3f2));if(_0x4b590e<=0x0)return;let _0x408347=0x0;const _0x5010dd=Math['max'](0x0,0x64-_0x8cab11*0.5),_0x5eb304=_0x4b590e>=0x3&&_0x4b590e<=0x8?0x32:_0x4b590e>0x0&&_0x4b590e<0xf?0x1e:0xa,_0x1e80d2=_0x33bb24===_0x36946e?0x28:0x0;_0x408347=_0x5010dd+_0x5eb304+_0x1e80d2,_0x408347>_0x53957c&&(_0x15243d=_0x51bc57,_0x53957c=_0x408347);});if(_0x15243d){const _0x19f938=parseInt(_0x15243d['eloRating'])||0x5dc;let _0x1d2e6='gray';if(_0x19f938>=0x7d0)_0x1d2e6='#50C878';else{if(_0x19f938>=0x708)_0x1d2e6='#FFD700';else{if(_0x19f938>=0x640)_0x1d2e6=_0x443a0f(0x1d7);else _0x19f938>=0x578&&(_0x1d2e6='#CD7F32');}}_0x312ede[_0x443a0f(0x1bd)]='Based\x20on\x20your\x20ELO\x20('+_0x15b7d5+_0x443a0f(0x1d1)+_0x1d2e6+';\x22>'+_0x15243d[_0x443a0f(0x1a1)]+_0x443a0f(0x1d6);}else _0x312ede[_0x443a0f(0x1bd)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x15b7d5+')';}catch(_0x2125dc){console['error']('Error\x20finding\x20best\x20opponent:',_0x2125dc),_0x312ede['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x37fba9=>{const _0x1af004=a25_0x28e196,_0x5c5f1a=document['getElementById']('d1-ladder-container')&&document['getElementById'](_0x1af004(0x1ae))['style']['display']!==_0x1af004(0x1db),_0x414c3d=document['getElementById']('d2-ladder-container')&&document['getElementById'](_0x1af004(0x1b4))['style']['display']!=='none',_0x5a66d0=document[_0x1af004(0x184)]('d3-ladder-container')&&document['getElementById']('d3-ladder-container')['style']['display']!==_0x1af004(0x1db),_0x2bd125=document[_0x1af004(0x184)]('duos-ladder-container')&&document[_0x1af004(0x184)]('duos-ladder-container')['style']['display']!=='none',_0x577288=_0x5c5f1a?'d1':_0x414c3d?'d2':_0x5a66d0?'d3':_0x2bd125?'duos':'d1';findBestOpponent(_0x577288);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x13b13e=a25_0x28e196,_0x1ee90a=document[_0x13b13e(0x184)](_0x13b13e(0x181)),_0x4c5349=document[_0x13b13e(0x1e8)]('label[for=\x22duos-switch\x22]');_0x1ee90a&&_0x4c5349&&(_0x1ee90a[_0x13b13e(0x190)]('change',async _0x354e8d=>{const _0x5404a7=_0x13b13e;if(_0x354e8d[_0x5404a7(0x193)][_0x5404a7(0x19c)]){const _0x1d3efb=auth?.[_0x5404a7(0x1d3)],_0x40db1d=await checkIfUserIsAdmin(_0x1d3efb);if(!_0x40db1d){_0x354e8d[_0x5404a7(0x1ce)]();const _0x2da52a=document['getElementById']('d1-switch');return _0x2da52a&&(_0x2da52a[_0x5404a7(0x19c)]=!![],_0x2da52a['dispatchEvent'](new Event(_0x5404a7(0x1be)))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x125aef=>{const _0x5d0c2b=_0x13b13e,_0x46e7c6=await checkIfUserIsAdmin(_0x125aef);!_0x46e7c6?(_0x1ee90a['disabled']=!![],_0x4c5349[_0x5d0c2b(0x1e5)][_0x5d0c2b(0x1b5)]='0.5',_0x4c5349[_0x5d0c2b(0x1e5)]['cursor']=_0x5d0c2b(0x1a2),_0x4c5349['title']=_0x5d0c2b(0x1b8)):(_0x1ee90a['disabled']=![],_0x4c5349['style'][_0x5d0c2b(0x1b5)]='1',_0x4c5349['style']['cursor']='pointer',_0x4c5349['title']='');}));});async function checkIfUserIsAdmin(_0x2925f3){const _0x54bbb7=a25_0x28e196;if(!_0x2925f3)return![];try{const _0x102293=['admin@ladder.com','brian2af@outlook.com'];if(_0x2925f3[_0x54bbb7(0x1ee)]&&_0x102293['includes'](_0x2925f3['email'][_0x54bbb7(0x175)]()))return!![];const _0x13b7de=['userProfiles','players',_0x54bbb7(0x178),_0x54bbb7(0x1a5)],_0x30a6b9=['admin','owner',_0x54bbb7(0x198),_0x54bbb7(0x192)];for(const _0x47cda3 of _0x13b7de){try{const _0x15cbe2=doc(db,_0x47cda3,_0x2925f3['uid']),_0x1ec0f2=await getDoc(_0x15cbe2);if(_0x1ec0f2['exists']()){const _0x5b814c=_0x1ec0f2['data'](),_0x1eb44d=(_0x5b814c['roleName']||_0x5b814c['role']||'')['toLowerCase']();if(_0x1eb44d&&_0x30a6b9['includes'](_0x1eb44d))return!![];}}catch(_0x512261){console['warn']('Error\x20checking\x20'+_0x47cda3+':',_0x512261);}}return![];}catch(_0x496402){return console[_0x54bbb7(0x1a8)](_0x54bbb7(0x18a),_0x496402),![];}}function showAdminOnlyMessage(){const _0xea20c9=a25_0x28e196,_0x2e2e60=document['getElementById']('admin-only-message');_0x2e2e60&&_0x2e2e60[_0xea20c9(0x1ab)]();const _0x34b53b=document[_0xea20c9(0x1a0)]('div');_0x34b53b['id']=_0xea20c9(0x1a7),_0x34b53b['style']['cssText']=_0xea20c9(0x1eb),_0x34b53b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>🔒\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x34b53b),setTimeout(()=>{const _0xe7eea7=_0xea20c9;_0x34b53b['parentNode']&&_0x34b53b[_0xe7eea7(0x1ab)]();},0xbb8);}