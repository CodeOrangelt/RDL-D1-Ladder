function a23_0x51fd(){const _0x4cee7c=['tiny-join-button','value','playersDuos','display','ladder-join-status\x20error','data','getIdToken','style','bind','ladder-join-prompt','trim','Authentication\x20error:','forEach','toString','players','uid','exception','empty','warn','block','currentUser','className','none','disabled','apply','\x20ladder!\x20The\x20page\x20will\x20refresh...','info','Successfully\x20joined\x20the\x20','getElementById','join-ladder-type','DUOS','Unknown\x20ladder\x20type:\x20','split','log','d2-switch','toLowerCase','textContent','console','Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...','exists','email','error','username'];a23_0x51fd=function(){return _0x4cee7c;};return a23_0x51fd();}const a23_0x9e3e5c=(function(){let _0x2554d3=!![];return function(_0x321a96,_0x368552){const _0x5339cb=_0x2554d3?function(){const _0x4b18a8=a23_0x3dd2;if(_0x368552){const _0x2dbe36=_0x368552[_0x4b18a8(0x191)](_0x321a96,arguments);return _0x368552=null,_0x2dbe36;}}:function(){};return _0x2554d3=![],_0x5339cb;};}()),a23_0x43022e=a23_0x9e3e5c(this,function(){const _0x3b7a77=a23_0x3dd2;let _0x18197f;try{const _0x24325f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x18197f=_0x24325f();}catch(_0x5ce009){_0x18197f=window;}const _0x40b033=_0x18197f['console']=_0x18197f[_0x3b7a77(0x19e)]||{},_0x2b432d=['log',_0x3b7a77(0x18b),_0x3b7a77(0x193),'error',_0x3b7a77(0x189),'table','trace'];for(let _0x426b38=0x0;_0x426b38<_0x2b432d['length'];_0x426b38++){const _0x362969=a23_0x9e3e5c['constructor']['prototype'][_0x3b7a77(0x181)](a23_0x9e3e5c),_0x3683b8=_0x2b432d[_0x426b38],_0x4d8cf0=_0x40b033[_0x3683b8]||_0x362969;_0x362969['__proto__']=a23_0x9e3e5c['bind'](a23_0x9e3e5c),_0x362969['toString']=_0x4d8cf0[_0x3b7a77(0x186)]['bind'](_0x4d8cf0),_0x40b033[_0x3683b8]=_0x362969;}});a23_0x43022e();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';function a23_0x3dd2(_0x34217b,_0x351e17){const _0x43022e=a23_0x51fd();return a23_0x3dd2=function(_0x9e3e5c,_0x4a5f03){_0x9e3e5c=_0x9e3e5c-0x179;let _0x51fdb6=_0x43022e[_0x9e3e5c];return _0x51fdb6;},a23_0x3dd2(_0x34217b,_0x351e17);}document['addEventListener']('DOMContentLoaded',()=>{const _0xc6bc8f=a23_0x3dd2,_0x5c2156=document['getElementById']('d1-switch'),_0x39ad06=document[_0xc6bc8f(0x195)](_0xc6bc8f(0x19b));console[_0xc6bc8f(0x19a)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x5c2156),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x39ad06);function _0x250cd9(){const _0x2c9bb0=_0xc6bc8f;document['querySelectorAll']('input[name=\x22ladder\x22]')[_0x2c9bb0(0x185)](_0x236285=>{_0x236285['addEventListener']('change',_0x230441=>{const _0x42342a=a23_0x3dd2;_0x230441['target']['checked']&&(currentLadder=_0x230441['target'][_0x42342a(0x17a)],console[_0x42342a(0x19a)]('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x250cd9();const _0x276f15=document['getElementById']('join-ladder-button');_0x276f15&&_0x276f15['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x10bc5d=>{const _0x1ae953=_0xc6bc8f;if(_0x10bc5d)checkUserLadderStatus();else{const _0x56b9a1=document[_0x1ae953(0x195)]('ladder-join-prompt');_0x56b9a1&&(_0x56b9a1['style']['display']='none');}});});function getCollectionName(_0xe939e7){const _0x3f4ad7=a23_0x3dd2;switch(_0xe939e7?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case _0x3f4ad7(0x197):case'DUO':return _0x3f4ad7(0x17b);case'CTF':return'playersCTF';default:console['warn'](_0x3f4ad7(0x198)+_0xe939e7+',\x20defaulting\x20to\x20D1');return _0x3f4ad7(0x187);}}async function checkUserLadderStatus(){const _0x50ac6a=a23_0x3dd2;console[_0x50ac6a(0x19a)]('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x513708=auth[_0x50ac6a(0x18d)],_0x463d52=document['getElementById'](_0x50ac6a(0x182)),_0x508a32=document['getElementById'](_0x50ac6a(0x196)),_0xe94c2c=document[_0x50ac6a(0x195)](_0x50ac6a(0x179));if(!_0x513708||!_0x513708[_0x50ac6a(0x188)]||!_0x463d52||!_0x508a32||!_0xe94c2c){if(_0x463d52)_0x463d52[_0x50ac6a(0x180)][_0x50ac6a(0x17c)]=_0x50ac6a(0x18f);if(_0xe94c2c)_0xe94c2c['style']['display']=_0x50ac6a(0x18f);return;}try{try{await _0x513708[_0x50ac6a(0x17f)](![]);}catch(_0x45f1d4){console['error']('Authentication\x20verification\x20failed:',_0x45f1d4),_0x463d52['style']['display']='none',_0xe94c2c['style']['display']=_0x50ac6a(0x18f);return;}const _0x35ab78=getCollectionName(currentLadder),_0x4bb747=doc(db,_0x35ab78,_0x513708[_0x50ac6a(0x188)]),_0x1a5bba=await getDoc(_0x4bb747);if(_0x1a5bba['exists']())_0x463d52[_0x50ac6a(0x180)][_0x50ac6a(0x17c)]='none',_0xe94c2c['style']['display']=_0x50ac6a(0x18f);else{_0x463d52[_0x50ac6a(0x180)][_0x50ac6a(0x17c)]='none',_0xe94c2c['style'][_0x50ac6a(0x17c)]='block',_0x508a32[_0x50ac6a(0x19d)]=currentLadder,_0xe94c2c['onclick']=()=>{const _0x4f0367=_0x50ac6a;_0x463d52['style']['display']==='block'?_0x463d52['style'][_0x4f0367(0x17c)]=_0x4f0367(0x18f):_0x463d52['style']['display']=_0x4f0367(0x18c);};const _0x13a3a0=document[_0x50ac6a(0x195)]('join-username-input'),_0x1258e4=document['getElementById']('ladder-join-status');if(_0x13a3a0)_0x13a3a0['value']='';_0x1258e4&&(_0x1258e4['textContent']='',_0x1258e4[_0x50ac6a(0x18e)]='ladder-join-status');}}catch(_0x3415cf){console[_0x50ac6a(0x1a2)]('Error\x20checking\x20ladder\x20status:',_0x3415cf),_0x463d52['style'][_0x50ac6a(0x17c)]='none',_0xe94c2c['style']['display']=_0x50ac6a(0x18f);}}async function handleJoinLadder(){const _0x26ad05=a23_0x3dd2,_0x4f7a6d=auth['currentUser'],_0x4efc67=document[_0x26ad05(0x195)]('join-ladder-button'),_0x29f067=document[_0x26ad05(0x195)]('ladder-join-status'),_0x3bec5f=document['getElementById']('join-username-input');if(!_0x4f7a6d||!_0x4f7a6d['uid']){_0x29f067['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x29f067['className']='ladder-join-status\x20error';return;}try{await _0x4f7a6d['getIdToken'](!![]);}catch(_0x3883c2){console[_0x26ad05(0x1a2)](_0x26ad05(0x184),_0x3883c2),_0x29f067['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x29f067['className']='ladder-join-status\x20error';return;}if(!_0x3bec5f||!_0x3bec5f['value'][_0x26ad05(0x183)]()){_0x29f067[_0x26ad05(0x19d)]='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x29f067['className']='ladder-join-status\x20error';return;}try{_0x4efc67['disabled']=!![],_0x29f067['textContent']='Verifying\x20username...',_0x29f067['className']='ladder-join-status\x20loading';let _0x23e1c1='',_0x49d6ab=null;const _0x1edee0=[_0x26ad05(0x187),'playersD2','playersD3','playersDuos','playersCTF','nonParticipants'];for(const _0xb6e7b0 of _0x1edee0){try{const _0x72a9cb=doc(db,_0xb6e7b0,_0x4f7a6d['uid']),_0x34aa20=await getDoc(_0x72a9cb);if(_0x34aa20[_0x26ad05(0x1a0)]()){_0x49d6ab=_0x34aa20[_0x26ad05(0x17e)]();if(_0x49d6ab['username']){_0x23e1c1=_0x49d6ab[_0x26ad05(0x1a3)];break;}}}catch(_0x26ff14){console[_0x26ad05(0x1a2)]('Error\x20checking\x20'+_0xb6e7b0+':',_0x26ff14);}}!_0x23e1c1&&_0x4f7a6d['email']&&(_0x23e1c1=_0x4f7a6d[_0x26ad05(0x1a1)][_0x26ad05(0x199)]('@')[0x0]);if(!_0x23e1c1){_0x29f067['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x29f067['className']=_0x26ad05(0x17d),_0x4efc67['disabled']=![];return;}const _0x85739b=_0x3bec5f[_0x26ad05(0x17a)]['trim']();if(_0x23e1c1&&_0x85739b[_0x26ad05(0x19c)]()!==_0x23e1c1['toLowerCase']()){_0x29f067[_0x26ad05(0x19d)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x23e1c1+'\x22\x20to\x20confirm.',_0x29f067[_0x26ad05(0x18e)]='ladder-join-status\x20error',_0x4efc67[_0x26ad05(0x190)]=![];return;}_0x29f067['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x1588c3=getCollectionName(currentLadder),_0x2ea4d9=doc(db,_0x1588c3,_0x4f7a6d['uid']),_0x4bab41=await getDoc(_0x2ea4d9);if(_0x4bab41['exists']()){_0x29f067[_0x26ad05(0x19d)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x29f067['className']='ladder-join-status\x20error',_0x4efc67['disabled']=![];return;}try{await _0x4f7a6d['getIdToken'](!![]);}catch(_0x4832cf){_0x29f067['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x29f067[_0x26ad05(0x18e)]=_0x26ad05(0x17d),_0x4efc67['disabled']=![];return;}const _0x5e11a7=_0x23e1c1,_0x1d0ad2=collection(db,_0x1588c3),_0x5d9af2=query(_0x1d0ad2,orderBy('position','desc'),limit(0x1)),_0x8a5d78=await getDocs(_0x5d9af2);let _0x57b439=0x1;if(!_0x8a5d78[_0x26ad05(0x18a)]){const _0x24adf1=_0x8a5d78['docs'][0x0]['data']();_0x57b439=(_0x24adf1['position']||0x0)+0x1;}const _0x5a3e38={'username':_0x5e11a7,'email':_0x4f7a6d['email'],'eloRating':0x4b0,'position':_0x57b439,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x2ea4d9,_0x5a3e38),currentLadder==='DUOS'?_0x29f067[_0x26ad05(0x19d)]=_0x26ad05(0x19f):_0x29f067['textContent']=_0x26ad05(0x194)+currentLadder+_0x26ad05(0x192),_0x29f067['className']='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x53cffb){console['error']('Error\x20joining\x20ladder:',_0x53cffb),_0x29f067['textContent']='Error\x20joining\x20ladder:\x20'+_0x53cffb['message'],_0x29f067[_0x26ad05(0x18e)]=_0x26ad05(0x17d),_0x4efc67[_0x26ad05(0x190)]=![];}}