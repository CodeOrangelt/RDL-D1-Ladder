const a0_0x2d5007=a0_0x1f8d;(function(_0x1c7e9f,_0x1a3f29){const _0x5286c1=a0_0x1f8d,_0x23970e=_0x1c7e9f();while(!![]){try{const _0xb3ffe1=-parseInt(_0x5286c1(0x130))/0x1*(parseInt(_0x5286c1(0xf5))/0x2)+parseInt(_0x5286c1(0x12e))/0x3+-parseInt(_0x5286c1(0x147))/0x4+parseInt(_0x5286c1(0x120))/0x5+-parseInt(_0x5286c1(0x16f))/0x6*(-parseInt(_0x5286c1(0xef))/0x7)+parseInt(_0x5286c1(0x102))/0x8+parseInt(_0x5286c1(0x18e))/0x9*(-parseInt(_0x5286c1(0x183))/0xa);if(_0xb3ffe1===_0x1a3f29)break;else _0x23970e['push'](_0x23970e['shift']());}catch(_0x81e831){_0x23970e['push'](_0x23970e['shift']());}}}(a0_0x4c41,0xaa69f));const a0_0x4bb2be=(function(){let _0x2e19a3=!![];return function(_0x565c18,_0x33af06){const _0x48aa2d=_0x2e19a3?function(){if(_0x33af06){const _0x1ac7ca=_0x33af06['apply'](_0x565c18,arguments);return _0x33af06=null,_0x1ac7ca;}}:function(){};return _0x2e19a3=![],_0x48aa2d;};}()),a0_0x58df61=a0_0x4bb2be(this,function(){const _0x1aa225=a0_0x1f8d,_0x53c3e7=function(){let _0x53c8f5;try{_0x53c8f5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x46005b){_0x53c8f5=window;}return _0x53c8f5;},_0x1327c8=_0x53c3e7(),_0x13db02=_0x1327c8[_0x1aa225(0x163)]=_0x1327c8[_0x1aa225(0x163)]||{},_0x57f773=[_0x1aa225(0x122),_0x1aa225(0x14e),_0x1aa225(0x152),'error',_0x1aa225(0x184),'table',_0x1aa225(0x148)];for(let _0x37f143=0x0;_0x37f143<_0x57f773[_0x1aa225(0x187)];_0x37f143++){const _0x1f7d79=a0_0x4bb2be[_0x1aa225(0x197)]['prototype']['bind'](a0_0x4bb2be),_0xea089b=_0x57f773[_0x37f143],_0x2b639f=_0x13db02[_0xea089b]||_0x1f7d79;_0x1f7d79[_0x1aa225(0x133)]=a0_0x4bb2be['bind'](a0_0x4bb2be),_0x1f7d79['toString']=_0x2b639f[_0x1aa225(0x177)]['bind'](_0x2b639f),_0x13db02[_0xea089b]=_0x1f7d79;}});function a0_0x1f8d(_0x53bd7a,_0x353e2e){const _0x16ba00=a0_0x4c41();return a0_0x1f8d=function(_0x58df61,_0x4bb2be){_0x58df61=_0x58df61-0xe6;let _0x5acae9=_0x16ba00[_0x58df61];return _0x5acae9;},a0_0x1f8d(_0x53bd7a,_0x353e2e);}a0_0x58df61();import{approveReport}from'./ladderalgorithm.js';import{approveReportD2}from'./ladderalgorithm-d2.js';import{approveReportD3}from'./ladderalgorithm-d3.js';import{checkPendingMatches,updatePendingMatchNotification,updateNotificationDot}from'./checkPendingMatches.js';import{collection,getDocs,query,where,orderBy,serverTimestamp,doc,setDoc,getDoc,addDoc,updateDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';function a0_0x4c41(){const _0x5e4343=['rgba(255,\x20255,\x20255,\x200.05)','target','pendingMatchesD2','console','remove','value','createdAt','gameMode','exists','outstanding-matches-list','brian2af@outlook.com','You\x20are\x20not\x20registered\x20in\x20the\x20','click','winnerEmail','cancel-edit-btn','199770UpDpzV','Your\x20player\x20profile\x20not\x20found','loserSuicides','lightbox-suicides','padding','winnerOldElo','view-outstanding-btn','You\x20must\x20be\x20logged\x20in\x20to\x20reject\x20a\x20match','toString','style','Error:\x20','Error\x20checking\x20','scrollIntoView','playersD2','undefined','You\x20(','\x20ladder...','size','approve-button','lightbox-subgame','171440GtVeMl','exception','\x20mode','RejectedD2','length','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Map:\x20','.rescind-report-btn','catch','empty','d2-mode','User\x20found\x20in\x20','387UCtIyg','reload',',\x20switching\x20to\x20','show','players','then','outstanding-modal','Please\x20provide\x20a\x20reason\x20for\x20rejecting\x20this\x20match\x20report:','auth-warning','constructor','Elements\x20object\x20is\x20null\x20or\x20undefined','Element\x20\x27','winner-suicides','loser-comment','winnerId','8px\x2016px','classList','uid','No\x20matches\x20found\x20by\x20winnerId,\x20trying\x20winnerEmail','playersD3','Match\x20report\x20rejected\x20successfully','pointer','210mTcWJA','position','Error\x20submitting\x20report:','message','email','add','585608kgancu','loser-score','removeAttribute','User\x20already\x20logged\x20in,\x20checking\x20D1\x20ladder\x20status','pendingMatchesD3','Found\x20pending\x20match:','User\x20not\x20authenticated','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-item\x22\x20data-id=\x22','loserComment','currentUser','Found\x20buttons\x20container:','User\x20found\x20in\x20collection\x20','disabled','8111616hBpBaW','subgameType','\x20rejected\x20successfully','No\x20comment','setAttribute','username','getAttribute','red','<option\x20value=\x22\x22>Select\x20Opponent</option>','report-error','some','appendChild','toLocaleDateString','options','Game\x20reported\x20successfully.','d1-mode','block','Reject\x20Match','loserScore','loserEmail','button\x20danger-button','Standard\x20Match','preventDefault','authWarning','loserUsername','error','winner-score','Game\x20mode\x20set\x20to:\x20','lightbox-winner','textContent','6792015WnTlGS','addEventListener','log','Reject\x20button\x20added:','forEach','Report\x20form\x20reset','view-outstanding-container','\x20matches\x20found','reportError','sort','RejectedD3','display','data-id','loserId','959847jZvARQ','find','3XvDWFS','mapPlayed','cancel-button','__proto__','createElement','d3-mode','#d32f2f','winnerUsername','suicides','losersOldElo','querySelectorAll','Checking\x20if\x20you\x20are\x20registered\x20in\x20','winner-username','\x20ladder.','playersCTF','Current\x20user\x20info:','subgame-type','active','lightbox-game-mode','innerHTML','#6a1b9a','data','color','5510140xHMCeT','trace','.lightbox-buttons','Update\x20Report','loser-username','Cancel\x20Edit','toDate','warn','button[type=\x22submit\x22]','Checking\x20reports\x20for\x20user:\x20','Failed\x20to\x20update\x20report.\x20Please\x20try\x20again.','info','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>','none','getElementById','reportForm','pendingMatches','10px','docs','reject-button','white','fontWeight','approved','report-lightbox','eloRating'];a0_0x4c41=function(){return _0x5e4343;};return a0_0x4c41();}let currentUserEmail=null,confirmationNotification=null,outstandingReportData=null,currentGameMode='D1',outstandingMatches=[];document['addEventListener']('DOMContentLoaded',async()=>{const _0x437011=a0_0x1f8d,_0x3ad786={'authWarning':document['getElementById']('auth-warning'),'reportForm':document['getElementById']('report-form'),'winnerUsername':document['getElementById']('winner-username'),'loserUsername':document['getElementById'](_0x437011(0x14b)),'loserScore':document['getElementById'](_0x437011(0xf6)),'suicides':document['getElementById'](_0x437011(0x138)),'mapPlayed':document['getElementById']('map-played'),'loserComment':document['getElementById']('loser-comment'),'reportError':document['getElementById']('report-error'),'reportLightbox':document[_0x437011(0x155)](_0x437011(0x15e))};Object['entries'](_0x3ad786)['forEach'](([_0x169075,_0x556773])=>{const _0x3b5598=_0x437011;!_0x556773&&console[_0x3b5598(0x14e)](_0x3b5598(0x199)+_0x169075+'\x27\x20not\x20found\x20in\x20the\x20DOM');});const _0x2c1002=document['getElementById']('d1-mode'),_0x527892=document['getElementById']('d2-mode'),_0x4a374b=document['getElementById']('d3-mode');_0x2c1002[_0x437011(0x121)]('click',()=>{const _0x5d9f1f=_0x437011;_0x4871ff('D1'),_0x2c1002['classList']['add'](_0x5d9f1f(0x141)),_0x527892['classList'][_0x5d9f1f(0x164)]('active'),_0x4a374b['classList']['remove']('active');}),_0x527892[_0x437011(0x121)](_0x437011(0x16c),()=>{const _0x9e3df5=_0x437011;_0x4871ff('D2'),_0x527892['classList'][_0x9e3df5(0xf4)]('active'),_0x2c1002['classList'][_0x9e3df5(0x164)]('active'),_0x4a374b[_0x9e3df5(0xe9)]['remove']('active');}),_0x4a374b['addEventListener']('click',()=>{const _0xe473e7=_0x437011;_0x4871ff('D3'),_0x4a374b[_0xe473e7(0xe9)]['add']('active'),_0x2c1002['classList']['remove']('active'),_0x527892[_0xe473e7(0xe9)][_0xe473e7(0x164)]('active');});function _0x4871ff(_0x4ee7de){const _0x5eb267=_0x437011;currentGameMode=_0x4ee7de,console['log'](_0x5eb267(0x11d)+currentGameMode),auth[_0x5eb267(0xfe)]&&checkUserInLadderAndLoadOpponents(auth['currentUser'][_0x5eb267(0xea)]);}setupAuthStateListener(_0x3ad786),setupReportForm(_0x3ad786),auth['currentUser']?(console['log'](_0x437011(0xf8)),checkUserInLadderAndLoadOpponents(auth[_0x437011(0xfe)][_0x437011(0xea)])):console[_0x437011(0x122)]('No\x20user\x20logged\x20in\x20yet,\x20waiting\x20for\x20auth\x20state\x20change');});function setupAuthStateListener(_0x14a555){onAuthStateChanged(auth,async _0x176ad8=>{_0x176ad8?handleUserSignedIn(_0x176ad8,_0x14a555):handleUserSignedOut(_0x14a555);});}async function handleUserSignedIn(_0x4ed401,_0x2b8481){const _0x223290=a0_0x1f8d;if(!_0x2b8481){console['error'](_0x223290(0x198));return;}currentUserEmail=_0x4ed401['email']||null;const _0x5bf4d8=_0x4ed401[_0x223290(0xea)];try{const _0x4d203d=doc(db,'nonParticipants',_0x5bf4d8);try{const _0x2b590e=await getDoc(_0x4d203d);console['log']('Non-participant\x20check:',{'exists':_0x2b590e['exists'](),'data':_0x2b590e[_0x223290(0x168)]()?_0x2b590e['data']():null});if(_0x2b590e['exists']()&&_0x2b590e['data']()['isNonParticipant']===!![]){_0x2b8481['authWarning']&&(_0x2b8481[_0x223290(0x119)]['style']['display']='block',_0x2b8481[_0x223290(0x119)]['textContent']='Non-participants\x20cannot\x20report\x20games.');_0x2b8481['reportForm']&&(_0x2b8481['reportForm']['style']['display']='none');return;}}catch(_0x47d7c0){console['warn']('Error\x20checking\x20non-participant\x20status:',_0x47d7c0);}const _0xa2f12e=['players',_0x223290(0x17c),'playersD3','playersDuos',_0x223290(0x13e)];let _0x440270=![],_0x407848='';for(const _0xea2d0c of _0xa2f12e){try{const _0x11cf26=doc(db,_0xea2d0c,_0x5bf4d8),_0x28b25c=await getDoc(_0x11cf26);if(_0x28b25c['exists']()){_0x440270=!![],_0x407848=_0x28b25c['data']()['username'],console[_0x223290(0x122)](_0x223290(0x100)+_0xea2d0c+'\x20with\x20username:\x20'+_0x407848);if(_0xea2d0c===_0x223290(0x192)&&currentGameMode!=='D1'){currentGameMode='D1';const _0x4785ad=document[_0x223290(0x155)](_0x223290(0x111)),_0x1e9294=document['getElementById']('d2-mode'),_0x40afae=document['getElementById']('d3-mode');_0x4785ad['classList'][_0x223290(0xf4)](_0x223290(0x141)),_0x1e9294[_0x223290(0xe9)][_0x223290(0x164)]('active'),_0x40afae['classList'][_0x223290(0x164)](_0x223290(0x141));}else{if(_0xea2d0c===_0x223290(0x17c)&&currentGameMode!=='D2'){currentGameMode='D2';const _0x4aa2f5=document[_0x223290(0x155)]('d1-mode'),_0x52fad6=document['getElementById']('d2-mode'),_0x32a7b3=document[_0x223290(0x155)]('d3-mode');_0x52fad6[_0x223290(0xe9)]['add']('active'),_0x4aa2f5[_0x223290(0xe9)]['remove']('active'),_0x32a7b3[_0x223290(0xe9)]['remove']('active');}}break;}}catch(_0x380baf){console['warn']('Error\x20checking\x20'+_0xea2d0c+'\x20collection:',_0x380baf);}}if(!_0x440270){_0x2b8481[_0x223290(0x119)]&&(_0x2b8481['authWarning']['style']['display']='block');_0x2b8481[_0x223290(0x156)]&&(_0x2b8481['reportForm'][_0x223290(0x178)]['display']=_0x223290(0x154));return;}const _0x4ff785=await checkUserInLadderAndLoadOpponents(_0x5bf4d8);if(!_0x4ff785){console[_0x223290(0x14e)]('User\x20is\x20not\x20in\x20the\x20'+currentGameMode+'\x20ladder.\x20Checking\x20other\x20ladders.');for(const _0x51a9cf of['players','playersD2','playersD3']){if(_0x51a9cf===(currentGameMode==='D1'?_0x223290(0x192):currentGameMode==='D2'?'playersD2':_0x223290(0xec)))continue;const _0x10571f=doc(db,_0x51a9cf,_0x5bf4d8);try{const _0x54f9af=await getDoc(_0x10571f);if(_0x54f9af[_0x223290(0x168)]()){const _0x3339ab=_0x51a9cf==='players'?'D1':_0x51a9cf==='playersD2'?'D2':'D3';console[_0x223290(0x122)](_0x223290(0x18d)+_0x51a9cf+_0x223290(0x190)+_0x3339ab+_0x223290(0x185));const _0x382f73=document['getElementById']('d1-mode'),_0x5982b2=document['getElementById'](_0x223290(0x18c)),_0x24854c=document[_0x223290(0x155)]('d3-mode');if(_0x3339ab==='D1')_0x382f73['classList'][_0x223290(0xf4)]('active'),_0x5982b2[_0x223290(0xe9)]['remove'](_0x223290(0x141)),_0x24854c['classList']['remove']('active');else _0x3339ab==='D2'?(_0x5982b2['classList'][_0x223290(0xf4)]('active'),_0x382f73[_0x223290(0xe9)]['remove']('active'),_0x24854c['classList']['remove']('active')):(_0x24854c['classList'][_0x223290(0xf4)]('active'),_0x382f73[_0x223290(0xe9)]['remove'](_0x223290(0x141)),_0x5982b2[_0x223290(0xe9)][_0x223290(0x164)]('active'));currentGameMode=_0x3339ab,await checkUserInLadderAndLoadOpponents(_0x5bf4d8);break;}}catch(_0x52af3e){console['warn'](_0x223290(0x17a)+_0x51a9cf+':',_0x52af3e);}}}}catch(_0x309604){console['error']('Error\x20during\x20sign-in\x20handling:',_0x309604);}}function handleUserSignedOut(_0x5d9efb){const _0x4ff7a4=a0_0x1f8d;_0x5d9efb['authWarning']['style'][_0x4ff7a4(0x12b)]=_0x4ff7a4(0x112),_0x5d9efb[_0x4ff7a4(0x156)]['style']['display']=_0x4ff7a4(0x154),currentUserEmail=null;}async function updateUserDisplay(_0x49e033,_0x30c4da){const _0x53758c=a0_0x1f8d,_0x5ab7ee=collection(db,'players'),_0x4a124d=query(_0x5ab7ee,where('email','==',_0x49e033)),_0x116539=await getDocs(_0x4a124d);if(!_0x116539['empty']){const _0x707137=_0x116539[_0x53758c(0x159)][0x0]['data']()['username'];_0x30c4da['loserUsername']['textContent']=_0x707137;}}async function populateWinnerDropdown(_0x20ab0d){const _0x5c4d4d=a0_0x1f8d;try{const _0x5de6f2=collection(db,_0x5c4d4d(0x192)),_0x34834d=await getDocs(_0x5de6f2);_0x20ab0d['innerHTML']='<option\x20value=\x22\x22>Select\x20Winner</option>',!_0x34834d['empty']&&_0x34834d['forEach'](_0x379d88=>{const _0x5a5f43=_0x5c4d4d,_0x5b14d9=_0x379d88['data']();if(_0x5b14d9[_0x5a5f43(0xf3)]!==currentUserEmail){const _0x2c3d17=document[_0x5a5f43(0x134)]('option');_0x2c3d17['value']=_0x5b14d9['email'],_0x2c3d17['textContent']=_0x5b14d9['username'],_0x20ab0d[_0x5a5f43(0x10d)](_0x2c3d17);}});}catch(_0x227a80){console['error']('Error\x20populating\x20winner\x20dropdown:',_0x227a80);throw _0x227a80;}}function setupReportForm(_0x54fd51){const _0x48137f=a0_0x1f8d;if(!_0x54fd51['reportForm'])return;_0x54fd51['reportForm'][_0x48137f(0x121)]('submit',async _0xdd7a57=>{const _0x265e87=_0x48137f;_0xdd7a57[_0x265e87(0x118)]();try{await submitReport(_0x54fd51),_0x54fd51['reportForm']['reset'](),alert(_0x265e87(0x110));}catch(_0x44260b){console[_0x265e87(0x11b)]('Error\x20submitting\x20report:',_0x44260b),_0x54fd51['reportError'][_0x265e87(0x11f)]='Error\x20reporting\x20game.\x20Please\x20try\x20again.';}});}async function submitReport(_0x434d93){const _0x505bf2=a0_0x1f8d,_0x5135aa=currentGameMode==='D1'?_0x505bf2(0x157):currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x578366=collection(db,_0x5135aa),_0x455758=doc(_0x578366);try{const _0x280106=auth[_0x505bf2(0xfe)];if(!_0x280106)throw new Error(_0x505bf2(0xfb));const _0x4ffa27=_0x280106['uid'],_0x35df8f=currentGameMode==='D1'?'players':currentGameMode==='D2'?_0x505bf2(0x17c):_0x505bf2(0xec),_0x5d6d3c=await getDoc(doc(db,_0x35df8f,_0x4ffa27));if(!_0x5d6d3c['exists']())throw new Error(_0x505bf2(0x170));const _0x485dc3=document['getElementById'](_0x505bf2(0x140)),_0x378342=_0x434d93['winnerUsername']['value'];if(!_0x378342)throw new Error('Please\x20select\x20an\x20opponent');const _0x55f169=query(collection(db,_0x35df8f),where(_0x505bf2(0x107),'==',_0x378342)),_0x3a2077=await getDocs(_0x55f169);if(_0x3a2077['empty'])throw new Error('Selected\x20opponent\x20not\x20found');const _0x16b274=_0x3a2077['docs'][0x0]['data'](),_0xfdc1a2=_0x3a2077['docs'][0x0]['id'],_0x536d47={'matchId':_0x455758['id'],'loserUsername':_0x5d6d3c['data']()[_0x505bf2(0x107)],'loserId':_0x4ffa27,'winnerUsername':_0x16b274['username'],'winnerId':_0xfdc1a2,'loserScore':_0x434d93['loserScore']['value'],'loserSuicides':_0x434d93[_0x505bf2(0x138)][_0x505bf2(0x165)],'mapPlayed':_0x434d93[_0x505bf2(0x131)][_0x505bf2(0x165)],'loserComment':_0x434d93['loserComment'][_0x505bf2(0x165)],'subgameType':_0x485dc3?_0x485dc3['value']:'','gameMode':currentGameMode,'approved':![],'createdAt':serverTimestamp(),'winnerOldElo':_0x16b274[_0x505bf2(0x15f)]||null,'losersOldElo':_0x5d6d3c['data']()['eloRating']||null};await setDoc(_0x455758,_0x536d47),console['log']('Match\x20reported\x20in\x20'+_0x5135aa+'\x20with\x20ID:\x20'+_0x455758['id']),_0x434d93[_0x505bf2(0x128)][_0x505bf2(0x11f)]='Game\x20reported\x20successfully!',_0x434d93['reportError']['style'][_0x505bf2(0x146)]='green',updatePendingMatchNotification();}catch(_0x41d73b){console['error'](_0x505bf2(0xf1),_0x41d73b),_0x434d93['reportError']['textContent']=_0x505bf2(0x179)+_0x41d73b['message'],_0x434d93['reportError']['style']['color']='red';throw _0x41d73b;}}async function checkForOutstandingReports(_0x11bcc9,_0x2cc2cb,_0x197b89=null){const _0x391aeb=a0_0x1f8d;console[_0x391aeb(0x122)](_0x391aeb(0x150)+_0x11bcc9+'\x20in\x20'+(_0x197b89||'default\x20collection'));const _0xe1a036=_0x197b89||(currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':_0x391aeb(0xf9));console['log']('Using\x20collection:\x20'+_0xe1a036);try{const _0x1a3596=auth['currentUser'];if(!_0x1a3596){console['log']('No\x20authenticated\x20user\x20found');return;}const _0x27533c=_0x1a3596[_0x391aeb(0xea)],_0x4fdeff=collection(db,_0xe1a036),_0x50b92c=query(_0x4fdeff,where(_0x391aeb(0xe7),'==',_0x27533c),where(_0x391aeb(0x15d),'==',![]));let _0x5b1222=await getDocs(_0x50b92c);console['log']('Query\x20by\x20winnerId\x20results:\x20'+_0x5b1222['size']+_0x391aeb(0x127));if(_0x5b1222['empty']&&_0x1a3596['email']){console[_0x391aeb(0x122)](_0x391aeb(0xeb));const _0x578ca8=query(_0x4fdeff,where('winnerEmail','==',_0x1a3596['email']),where('approved','==',![]));_0x5b1222=await getDocs(_0x578ca8),console['log']('Query\x20by\x20winnerEmail\x20results:\x20'+_0x5b1222[_0x391aeb(0x180)]+'\x20matches\x20found');}if(_0x5b1222['empty']){console['log']('No\x20matches\x20found\x20by\x20email\x20either,\x20trying\x20winnerUsername');const _0x9ae533=currentGameMode==='D1'?'players':'playersD2',_0x555b59=await getDoc(doc(db,_0x9ae533,_0x27533c));if(_0x555b59['exists']()&&_0x555b59['data']()['username']){const _0x211298=_0x555b59['data']()[_0x391aeb(0x107)],_0x274459=query(_0x4fdeff,where('winnerUsername','==',_0x211298),where('approved','==',![]));_0x5b1222=await getDocs(_0x274459),console[_0x391aeb(0x122)]('Query\x20by\x20winnerUsername\x20results:\x20'+_0x5b1222[_0x391aeb(0x180)]+'\x20matches\x20found');}}if(!_0x5b1222['empty']){const _0x13f982=_0x5b1222['docs'][0x0]['data']();return console['log'](_0x391aeb(0xfa),_0x13f982),_0x13f982['id']=_0x5b1222['docs'][0x0]['id'],autoFillReportForm(_0x13f982),updateNotificationDot(!![]),!![];}else return console['log']('No\x20pending\x20matches\x20found\x20for\x20this\x20user'),updateNotificationDot(![]),![];}catch(_0x3583da){console['error']('Error\x20checking\x20outstanding\x20reports:',_0x3583da);}}function autoFillReportForm(_0x4519cd){const _0x322bd9=a0_0x1f8d;console[_0x322bd9(0x122)]('Report\x20Data\x20in\x20autoFillReportForm:',_0x4519cd);if(_0x4519cd){const _0x2c3961=parseInt(_0x4519cd['loserScore']||'0'),_0x355b0b=_0x2c3961<0x12?0x14:_0x2c3961+0x2,_0x58d4f9=_0x4519cd[_0x322bd9(0x167)]||currentGameMode,_0x35d707=_0x58d4f9==='D1'?_0x322bd9(0x192):_0x58d4f9==='D2'?'playersD2':'playersD3';console['log']('Using\x20players\x20collection:\x20'+_0x35d707+'\x20for\x20game\x20mode:\x20'+_0x58d4f9);let _0x1f095c;_0x4519cd['winnerId']?_0x1f095c=getDoc(doc(db,_0x35d707,_0x4519cd['winnerId']))['then'](_0x2c607b=>_0x2c607b[_0x322bd9(0x168)]()?{'id':_0x2c607b['id'],'data':_0x2c607b['data']()}:null):_0x1f095c=getDocs(query(collection(db,_0x35d707),where('username','==',_0x4519cd['winnerUsername'])))[_0x322bd9(0x193)](_0x5ceb46=>!_0x5ceb46[_0x322bd9(0x18b)]?{'id':_0x5ceb46['docs'][0x0]['id'],'data':_0x5ceb46[_0x322bd9(0x159)][0x0][_0x322bd9(0x145)]()}:null);let _0x4d56da;_0x4519cd['loserId']?_0x4d56da=getDoc(doc(db,_0x35d707,_0x4519cd[_0x322bd9(0x12d)]))['then'](_0x21fcb9=>_0x21fcb9['exists']()?{'id':_0x21fcb9['id'],'data':_0x21fcb9['data']()}:null):_0x4d56da=getDocs(query(collection(db,_0x35d707),where('username','==',_0x4519cd[_0x322bd9(0x11a)])))['then'](_0x4ae45f=>!_0x4ae45f[_0x322bd9(0x18b)]?{'id':_0x4ae45f['docs'][0x0]['id'],'data':_0x4ae45f[_0x322bd9(0x159)][0x0]['data']()}:null),Promise['all']([_0x1f095c,_0x4d56da])['then'](([_0x33dcdf,_0x451c73])=>{const _0x114fbe=_0x322bd9;if(!_0x33dcdf){console[_0x114fbe(0x11b)]('No\x20winner\x20found\x20for\x20this\x20match'),alert('Error:\x20Winner\x20data\x20not\x20found.');return;}if(!_0x451c73){console['error']('No\x20loser\x20found\x20for\x20this\x20match'),alert('Error:\x20Loser\x20data\x20not\x20found.');return;}const _0xa5482c=_0x4519cd['winnerOldElo']!=null?_0x4519cd[_0x114fbe(0x174)]:_0x33dcdf['data'][_0x114fbe(0x15f)],_0x228bdc=_0x4519cd[_0x114fbe(0x139)]!=null?_0x4519cd[_0x114fbe(0x139)]:_0x451c73['data']['eloRating'],_0x13bfa9=_0x33dcdf['data'][_0x114fbe(0x107)],_0x583ea7=_0x451c73[_0x114fbe(0x145)]['username'];console['log']('Winner:\x20'+_0x13bfa9+'\x20(ELO:\x20'+_0xa5482c+'),\x20Loser:\x20'+_0x583ea7+'\x20(ELO:\x20'+_0x228bdc+')');const _0x49ab9a=document['getElementById']('report-lightbox');if(!_0x49ab9a){console['error']('Lightbox\x20element\x20not\x20found');return;}document[_0x114fbe(0x155)](_0x114fbe(0x11e))['textContent']=_0x13bfa9,document[_0x114fbe(0x155)]('lightbox-loser')['textContent']=_0x583ea7,document['getElementById']('lightbox-loser-score')['textContent']=_0x4519cd['loserScore']||'0',document['getElementById'](_0x114fbe(0x172))['textContent']=_0x4519cd[_0x114fbe(0x171)]||'0',document['getElementById']('lightbox-map')['textContent']=_0x4519cd[_0x114fbe(0x131)]||'Not\x20specified',document['getElementById']('lightbox-comment')['textContent']=_0x4519cd['loserComment']||'No\x20comment',document[_0x114fbe(0x155)]('lightbox-subgame')['textContent']=_0x4519cd[_0x114fbe(0x103)]||_0x114fbe(0x117);const _0x3340cd=document['getElementById'](_0x114fbe(0x11c));_0x3340cd&&(_0x3340cd['value']=_0x355b0b,_0x3340cd['readOnly']=!![],_0x3340cd['style']['backgroundColor']=_0x114fbe(0x160));showLightbox();const _0x35c229=document['querySelector'](_0x114fbe(0x149));if(_0x35c229){console[_0x114fbe(0x122)](_0x114fbe(0xff),_0x35c229);const _0xd5b5be=document['getElementById'](_0x114fbe(0x15a));_0xd5b5be&&_0xd5b5be['remove']();const _0x1b8510=document[_0x114fbe(0x134)]('button');_0x1b8510['id']=_0x114fbe(0x15a),_0x1b8510['className']=_0x114fbe(0x116),_0x1b8510[_0x114fbe(0x11f)]=_0x114fbe(0x113),_0x1b8510['style']['backgroundColor']=_0x114fbe(0x136),_0x1b8510['style'][_0x114fbe(0x146)]=_0x114fbe(0x15b),_0x1b8510['style']['marginRight']='10px',_0x1b8510[_0x114fbe(0x178)][_0x114fbe(0x173)]=_0x114fbe(0xe8),_0x1b8510['style']['border']='none',_0x1b8510['style']['borderRadius']='4px',_0x1b8510['style']['cursor']=_0x114fbe(0xee),_0x1b8510['style'][_0x114fbe(0x15c)]='bold',_0x35c229['prepend'](_0x1b8510),console['log'](_0x114fbe(0x123),_0x1b8510);}const _0x44ebe9=document[_0x114fbe(0x155)](_0x114fbe(0x181)),_0x5ad7e2=document['getElementById']('reject-button'),_0x581134=document['getElementById']('cancel-button');if(_0x44ebe9){const _0x3b7853=_0x44ebe9['cloneNode'](!![]);_0x44ebe9['parentNode']['replaceChild'](_0x3b7853,_0x44ebe9),_0x3b7853['addEventListener'](_0x114fbe(0x16c),async function(){const _0xd86d91=_0x114fbe;try{const _0x4bb06d=document['getElementById'](_0xd86d91(0x11c))['value'],_0x5bb06c=document[_0xd86d91(0x155)](_0xd86d91(0x19a))['value']||'0',_0x2acbbe=document['getElementById']('winner-comment')[_0xd86d91(0x165)]||'';console[_0xd86d91(0x122)](_0xd86d91(0x13f),{'uid':auth['currentUser']?.['uid'],'email':auth['currentUser']?.['email'],'isAdmin':auth['currentUser']?.['email']==='admin@ladder.com'||auth['currentUser']?.[_0xd86d91(0xf3)]===_0xd86d91(0x16a)});const _0x5b2a5c=_0x4519cd['gameMode']||currentGameMode;if(_0x5b2a5c==='D3')await approveReportD3(_0x4519cd['id'],_0x4bb06d,_0x5bb06c,_0x2acbbe);else _0x5b2a5c==='D2'?await approveReportD2(_0x4519cd['id'],_0x4bb06d,_0x5bb06c,_0x2acbbe):await approveReport(_0x4519cd['id'],_0x4bb06d,_0x5bb06c,_0x2acbbe);document['getElementById'](_0xd86d91(0x15e))['style'][_0xd86d91(0x12b)]=_0xd86d91(0x154),alert('Match\x20approved\x20successfully'),updatePendingMatchNotification(),location[_0xd86d91(0x18f)]();const _0x1b17d8=_0x5b2a5c==='D1'?'players':'playersD2',_0x13346d=doc(db,_0x1b17d8,_0x33dcdf['id']),_0x1e9e96=doc(db,_0x1b17d8,_0x451c73['id']),[_0x368a84,_0x350fa6]=await Promise['all']([getDoc(_0x13346d),getDoc(_0x1e9e96)]);if(_0x368a84['exists']()&&_0x350fa6['exists']()){const _0x4e03cf=_0x368a84[_0xd86d91(0x145)](),_0x1fc487=_0x350fa6['data']();_0x4e03cf[_0xd86d91(0xf0)]>_0x1fc487['position']?(await updateDoc(_0x13346d,{'position':_0x1fc487['position']}),console['log']('Winner\x20'+_0x4e03cf['username']+'\x20moved\x20to\x20position\x20'+_0x1fc487['position'])):console['log']('No\x20position\x20change\x20needed;\x20winner\x20is\x20already\x20above\x20the\x20loser.');}}catch(_0x1158c1){console['error']('Error\x20approving\x20report:',_0x1158c1),alert('Error\x20approving\x20match:\x20'+_0x1158c1[_0xd86d91(0xf2)]);}});}if(_0x5ad7e2){const _0x4a6889=_0x5ad7e2['cloneNode'](!![]);_0x5ad7e2['parentNode']['replaceChild'](_0x4a6889,_0x5ad7e2),_0x4a6889[_0x114fbe(0x121)]('click',async function(){const _0x236281=_0x114fbe;try{const _0x1ccc06=prompt(_0x236281(0x195),'');if(_0x1ccc06===null)return;await rejectReport(_0x4519cd['id'],_0x1ccc06),hideLightbox(),alert(_0x236281(0xed)),updatePendingMatchNotification(),location['reload']();}catch(_0xa52648){console['error']('Error\x20rejecting\x20report:',_0xa52648),alert('Error\x20rejecting\x20match:\x20'+_0xa52648['message']);}});}if(_0x581134){const _0x1fb7cf=_0x581134['cloneNode'](!![]);_0x581134['parentNode']['replaceChild'](_0x1fb7cf,_0x581134),_0x1fb7cf['addEventListener']('click',hideLightbox);}})[_0x322bd9(0x18a)](_0x120f8c=>{const _0x5eb800=_0x322bd9;console[_0x5eb800(0x11b)]('Error\x20processing\x20player\x20data:',_0x120f8c),alert('Error\x20fetching\x20player\x20data.\x20Please\x20try\x20again.');});}}function showLightbox(){const _0x4f30f3=a0_0x1f8d;console['log']('Showing\x20lightbox');const _0x47b92f=document['getElementById']('report-lightbox');if(!_0x47b92f){console['error']('Lightbox\x20element\x20not\x20found');return;}_0x47b92f['classList'][_0x4f30f3(0xf4)]('show');}function hideLightbox(){const _0x2fd6b9=document['getElementById']('report-lightbox');_0x2fd6b9['classList']['remove']('show');}async function rejectReport(_0x22c89d,_0x229d1a){const _0x162783=a0_0x1f8d;try{const _0x3f7fa5=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':_0x162783(0xf9),_0x1a3a3b=currentGameMode==='D1'?'RejectedD1':currentGameMode==='D2'?_0x162783(0x186):_0x162783(0x12a);console['log']('Rejecting\x20match\x20'+_0x22c89d+'\x20from\x20'+_0x3f7fa5+'\x20to\x20'+_0x1a3a3b);const _0x335600=auth[_0x162783(0xfe)];if(!_0x335600)throw new Error(_0x162783(0x176));const _0x33b8f7=doc(db,_0x3f7fa5,_0x22c89d),_0x1c666e=await getDoc(_0x33b8f7);if(!_0x1c666e['exists']())throw new Error('Match\x20report\x20not\x20found');const _0x350226=_0x1c666e[_0x162783(0x145)](),_0x2b7486=_0x350226['winnerId']&&_0x350226['winnerId']===_0x335600[_0x162783(0xea)]||_0x350226['winnerEmail']&&_0x350226[_0x162783(0x16d)]===_0x335600[_0x162783(0xf3)]||_0x350226['winnerUsername']&&_0x350226[_0x162783(0x137)]===await getUsernameFromId(_0x335600[_0x162783(0xea)]);if(!_0x2b7486)throw new Error('Only\x20the\x20winner\x20of\x20the\x20match\x20can\x20reject\x20it');const _0x21564f={..._0x350226,'rejectedAt':serverTimestamp(),'rejectedBy':_0x335600['uid'],'rejectionReason':_0x229d1a||'No\x20reason\x20provided','originalDocumentId':_0x22c89d},_0x23d3a3=doc(collection(db,_0x1a3a3b));return await setDoc(_0x23d3a3,_0x21564f),await deleteDoc(_0x33b8f7),console['log']('Match\x20'+_0x22c89d+_0x162783(0x104)),updatePendingMatchNotification(),!![];}catch(_0x5536d5){console['error']('Error\x20rejecting\x20match:',_0x5536d5);throw _0x5536d5;}}async function getUsernameFromId(_0xa37fc7){const _0x218c96=a0_0x1f8d,_0x51bca8=await getDoc(doc(db,'players',_0xa37fc7));if(_0x51bca8[_0x218c96(0x168)]())return _0x51bca8[_0x218c96(0x145)]()[_0x218c96(0x107)];const _0x271b46=await getDoc(doc(db,'playersD2',_0xa37fc7));if(_0x271b46['exists']())return _0x271b46['data']()[_0x218c96(0x107)];return null;}async function loadOpponentsList(_0x26e330){const _0x3d10ac=a0_0x1f8d;try{const _0x5abf58=document[_0x3d10ac(0x155)](_0x3d10ac(0x10b)),_0x52cbd1=document[_0x3d10ac(0x155)](_0x3d10ac(0x14b)),_0x404efe=document['getElementById'](_0x3d10ac(0x13c));if(!_0x5abf58||!_0x52cbd1||!_0x404efe){console['error']('Required\x20elements\x20not\x20found\x20for\x20loadOpponentsList');return;}const _0x1c6ed1=currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':'playersD3';console['log']('Loading\x20opponents\x20from\x20collection:\x20'+_0x1c6ed1);const _0xea36aa=await getDoc(doc(db,_0x1c6ed1,_0x26e330));if(!_0xea36aa[_0x3d10ac(0x168)]()){_0x5abf58['textContent']=_0x3d10ac(0x16b)+currentGameMode+_0x3d10ac(0x13d),_0x5abf58['style']['color']=_0x3d10ac(0x109),_0x52cbd1['textContent']='Not\x20registered\x20in\x20this\x20ladder',_0x404efe['disabled']=!![];return;}const _0x46ec1e=_0xea36aa['data'](),_0x229b64=_0x46ec1e[_0x3d10ac(0x107)];_0x52cbd1['textContent']=_0x3d10ac(0x17e)+_0x229b64+')',_0x5abf58[_0x3d10ac(0x11f)]='',_0x404efe['disabled']=![];const _0x149d78=collection(db,_0x1c6ed1),_0x547a13=await getDocs(_0x149d78);if(_0x547a13['empty']){console['log']('No\x20opponents\x20available');return;}_0x404efe['innerHTML']='<option\x20value=\x22\x22>Select\x20Opponent</option>',_0x547a13['forEach'](_0x1317f6=>{const _0xbfceea=_0x3d10ac,_0x83f826=_0x1317f6[_0xbfceea(0x145)]();if(_0x1317f6['id']!==_0x26e330){const _0x3122c8=document['createElement']('option');_0x3122c8['value']=_0x83f826['username'],_0x3122c8[_0xbfceea(0x11f)]=_0x83f826[_0xbfceea(0x107)],_0x3122c8['dataset']['uid']=_0x1317f6['id'],_0x404efe[_0xbfceea(0x10d)](_0x3122c8);}});}catch(_0x3e3f61){console['error']('Error\x20loading\x20opponents\x20list:',_0x3e3f61),document[_0x3d10ac(0x155)](_0x3d10ac(0x10b))['textContent']='Error\x20loading\x20opponents.\x20Please\x20try\x20again\x20later.',document['getElementById']('report-error')['style'][_0x3d10ac(0x146)]='red';}}async function checkUserInLadderAndLoadOpponents(_0x148325){const _0x53ffcc=a0_0x1f8d;try{const _0x48fef1=document['getElementById'](_0x53ffcc(0x10b)),_0x299019=document['getElementById']('loser-username'),_0x1bab93=document[_0x53ffcc(0x155)]('winner-username'),_0x154f60=document[_0x53ffcc(0x155)]('report-form'),_0x327473=document['getElementById']('auth-warning');_0x48fef1[_0x53ffcc(0x11f)]=_0x53ffcc(0x13b)+currentGameMode+_0x53ffcc(0x17f),_0x48fef1['style'][_0x53ffcc(0x146)]='white';const _0x4ac476=currentGameMode==='D1'?_0x53ffcc(0x192):currentGameMode==='D2'?'playersD2':'playersD3';console['log']('Checking\x20if\x20user\x20exists\x20in\x20collection:\x20'+_0x4ac476);const _0x2a7c07=await getDoc(doc(db,_0x4ac476,_0x148325));if(!_0x2a7c07['exists']())return _0x48fef1['textContent']=_0x53ffcc(0x16b)+currentGameMode+_0x53ffcc(0x13d),_0x48fef1['style']['color']='red',_0x299019['textContent']='Not\x20registered\x20in\x20this\x20ladder',_0x1bab93[_0x53ffcc(0x101)]=!![],_0x1bab93['innerHTML']=_0x53ffcc(0x10a),_0x327473[_0x53ffcc(0x178)]['display']='block',_0x327473[_0x53ffcc(0x11f)]=_0x53ffcc(0x16b)+currentGameMode+_0x53ffcc(0x13d),![];_0x48fef1['textContent']='',_0x327473[_0x53ffcc(0x178)][_0x53ffcc(0x12b)]=_0x53ffcc(0x154);const _0x2be4c1=_0x2a7c07['data'](),_0x2127ff=_0x2be4c1[_0x53ffcc(0x107)];_0x299019['textContent']=_0x53ffcc(0x17e)+_0x2127ff+')',_0x1bab93['disabled']=![],_0x154f60['style']['display']=_0x53ffcc(0x112),await loadOpponentsList(_0x148325);const _0x1038b4=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':_0x53ffcc(0xf9);return await checkForOutstandingReports(_0x2be4c1['email'],null,_0x1038b4),!![];}catch(_0x2e86f2){return console['error']('Error\x20checking\x20if\x20user\x20is\x20in\x20ladder:',_0x2e86f2),document['getElementById'](_0x53ffcc(0x10b))[_0x53ffcc(0x11f)]='Error\x20checking\x20ladder\x20membership.\x20Please\x20try\x20again\x20later.',document['getElementById']('report-error')[_0x53ffcc(0x178)]['color']='red',![];}}export async function fetchOutstandingMatches(){const _0x431531=a0_0x1f8d,_0x9e1d83=auth[_0x431531(0xfe)];if(!_0x9e1d83)return[];try{const _0x12ccc2=[],_0x128746=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?_0x431531(0x162):'pendingMatchesD3',_0xd49478=collection(db,_0x128746),_0x4ae54a=[query(_0xd49478,where(_0x431531(0x12d),'==',_0x9e1d83['uid']),where(_0x431531(0x15d),'==',![])),query(_0xd49478,where(_0x431531(0x115),'==',_0x9e1d83['email']),where('approved','==',![])),query(_0xd49478,where('winnerId','==',_0x9e1d83[_0x431531(0xea)]),where(_0x431531(0x15d),'==',![])),query(_0xd49478,where(_0x431531(0x16d),'==',_0x9e1d83['email']),where('approved','==',![]))],_0x51977b=currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':_0x431531(0xec),_0x2ac0ed=await getDocs(query(collection(db,_0x51977b),where('email','==',_0x9e1d83[_0x431531(0xf3)])));let _0x4bd6f7=null;!_0x2ac0ed[_0x431531(0x18b)]&&(_0x4bd6f7=_0x2ac0ed[_0x431531(0x159)][0x0]['data']()[_0x431531(0x107)],_0x4bd6f7&&_0x4ae54a['push'](query(_0xd49478,where('loserUsername','==',_0x4bd6f7),where('approved','==',![])),query(_0xd49478,where(_0x431531(0x137),'==',_0x4bd6f7),where('approved','==',![]))));for(const _0x6298e8 of _0x4ae54a){const _0x20609f=await getDocs(_0x6298e8);!_0x20609f[_0x431531(0x18b)]&&_0x20609f[_0x431531(0x124)](_0x1755e5=>{const _0xe9b859=_0x431531;!_0x12ccc2[_0xe9b859(0x10c)](_0xf5a94e=>_0xf5a94e['id']===_0x1755e5['id'])&&_0x12ccc2['push']({'id':_0x1755e5['id'],..._0x1755e5['data']()});});}return _0x12ccc2[_0x431531(0x129)]((_0x45c7de,_0x16bafa)=>{const _0x2d8d2d=_0x431531,_0x1b8e07=_0x45c7de[_0x2d8d2d(0x166)]?.[_0x2d8d2d(0x14d)]()||new Date(0x0),_0x5802c2=_0x16bafa['createdAt']?.[_0x2d8d2d(0x14d)]()||new Date(0x0);return _0x5802c2-_0x1b8e07;}),outstandingMatches=_0x12ccc2,_0x12ccc2;}catch(_0x3db654){return console['error']('Error\x20fetching\x20outstanding\x20matches:',_0x3db654),[];}}export function renderOutstandingMatches(){const _0x15f4e9=a0_0x1f8d,_0x498e26=document['getElementById'](_0x15f4e9(0x169));if(outstandingMatches['length']===0x0){_0x498e26['innerHTML']='<p>No\x20outstanding\x20matches\x20found\x20in\x20the\x20current\x20game\x20mode.</p>';return;}let _0x44c366='';const _0x406f4d=auth['currentUser'];if(!_0x406f4d)return;outstandingMatches['forEach'](_0x189918=>{const _0x54f5f2=_0x15f4e9,_0x83ce58=_0x189918['createdAt']?.['toDate']()?_0x189918['createdAt']['toDate']()[_0x54f5f2(0x10e)]():'Unknown\x20date',_0x461225=_0x189918['loserEmail']===_0x406f4d['email']||_0x189918['loserId']===_0x406f4d['uid'];_0x44c366+=_0x54f5f2(0xfc)+_0x189918['id']+_0x54f5f2(0x153)+(_0x189918['winnerUsername']||'Winner')+'\x20vs\x20'+(_0x189918[_0x54f5f2(0x11a)]||'Loser')+_0x54f5f2(0x188)+(_0x189918['mapPlayed']||'Unknown')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Date:\x20'+_0x83ce58+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Score:\x20?\x20-\x20'+(_0x189918[_0x54f5f2(0x114)]||'0')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20view-detail-btn\x22\x20data-id=\x22'+_0x189918['id']+'\x22>View\x20Details</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x461225?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20edit-report-btn\x22\x20data-id=\x22'+_0x189918['id']+'\x22>Edit\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20danger-button\x20rescind-report-btn\x22\x20data-id=\x22'+_0x189918['id']+'\x22>Rescind\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x498e26['innerHTML']=_0x44c366,document['querySelectorAll']('.view-detail-btn')['forEach'](_0x495db8=>{const _0x4265b4=_0x15f4e9;_0x495db8['addEventListener'](_0x4265b4(0x16c),function(){const _0x5b4856=_0x4265b4,_0x3a97c7=this['getAttribute'](_0x5b4856(0x12c)),_0xd655d1=outstandingMatches['find'](_0x34c304=>_0x34c304['id']===_0x3a97c7);document['getElementById'](_0x5b4856(0x194))['classList'][_0x5b4856(0x164)](_0x5b4856(0x191)),showMatchLightbox(_0xd655d1);});}),document[_0x15f4e9(0x13a)]('.edit-report-btn')['forEach'](_0x3e4203=>{const _0xec0923=_0x15f4e9;_0x3e4203[_0xec0923(0x121)]('click',function(){const _0x521e5f=_0xec0923,_0x482302=this[_0x521e5f(0x108)]('data-id'),_0x27bd44=outstandingMatches['find'](_0x40db34=>_0x40db34['id']===_0x482302);document['getElementById'](_0x521e5f(0x194))['classList']['remove'](_0x521e5f(0x191)),editReport(_0x27bd44);});}),document[_0x15f4e9(0x13a)](_0x15f4e9(0x189))['forEach'](_0x33e10d=>{const _0x3476aa=_0x15f4e9;_0x33e10d[_0x3476aa(0x121)]('click',function(){const _0x2470c9=_0x3476aa,_0x2ee89a=this['getAttribute'](_0x2470c9(0x12c)),_0x7db642=outstandingMatches[_0x2470c9(0x12f)](_0x12f86e=>_0x12f86e['id']===_0x2ee89a);confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20rescind\x20this\x20match\x20report\x20against\x20'+(_0x7db642[_0x2470c9(0x137)]||'opponent')+'?')&&rescindReport(_0x7db642);});});}export async function rescindReport(_0xe6cd0){const _0x289c1=a0_0x1f8d;try{const _0x35e5cd=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?_0x289c1(0x162):'pendingMatchesD3',_0x574b7b=doc(db,_0x35e5cd,_0xe6cd0['id']);await deleteDoc(_0x574b7b),alert('Report\x20has\x20been\x20successfully\x20rescinded.'),await fetchOutstandingMatches(),renderOutstandingMatches();}catch(_0x52227f){console['error']('Error\x20rescinding\x20report:',_0x52227f),alert('Failed\x20to\x20rescind\x20report.\x20Please\x20try\x20again.');}}export function editReport(_0x5241c2){const _0x35da8c=a0_0x1f8d,_0x4a99b3=document['getElementById']('report-form'),_0x669b43=document['getElementById']('loser-score'),_0x5b5221=document['getElementById']('suicides'),_0x322bae=document[_0x35da8c(0x155)]('map-played'),_0x57ec33=document['getElementById'](_0x35da8c(0xe6));_0x4a99b3['style'][_0x35da8c(0x12b)]=_0x35da8c(0x112),document['getElementById'](_0x35da8c(0x196))['style'][_0x35da8c(0x12b)]=_0x35da8c(0x154);if(_0x5241c2['loserScore'])_0x669b43[_0x35da8c(0x165)]=_0x5241c2[_0x35da8c(0x114)];if(_0x5241c2['loserSuicides'])_0x5b5221['value']=_0x5241c2['loserSuicides'];if(_0x5241c2['mapPlayed'])_0x322bae['value']=_0x5241c2[_0x35da8c(0x131)];if(_0x5241c2[_0x35da8c(0xfd)])_0x57ec33['value']=_0x5241c2['loserComment'];const _0x46eff0=document['getElementById']('winner-username');_0x46eff0&&_0x5241c2[_0x35da8c(0x137)]&&Array['from'](_0x46eff0[_0x35da8c(0x10f)])['forEach'](_0x36fa9b=>{const _0x54f0ce=_0x35da8c;_0x36fa9b['text']===_0x5241c2[_0x54f0ce(0x137)]&&(_0x36fa9b['selected']=!![]);});const _0x471aaa=document['getElementById']('subgame-type');_0x471aaa&&_0x5241c2[_0x35da8c(0x103)]&&(_0x471aaa['value']=_0x5241c2[_0x35da8c(0x103)]);_0x4a99b3[_0x35da8c(0x106)]('data-edit-id',_0x5241c2['id']);const _0xc0a329=_0x4a99b3['querySelector'](_0x35da8c(0x14f));_0xc0a329['textContent']=_0x35da8c(0x14a);if(!document['getElementById']('cancel-edit-btn')){const _0xa5634c=document['createElement']('button');_0xa5634c['id']=_0x35da8c(0x16e),_0xa5634c['className']='btn',_0xa5634c[_0x35da8c(0x178)]['backgroundColor']=_0x35da8c(0x144),_0xa5634c['style']['marginRight']=_0x35da8c(0x158),_0xa5634c['textContent']=_0x35da8c(0x14c),_0xa5634c['type']='button',_0xc0a329['parentNode']['insertBefore'](_0xa5634c,_0xc0a329),_0xa5634c[_0x35da8c(0x121)]('click',function(_0x781f85){const _0x27eefc=_0x35da8c;_0x781f85[_0x27eefc(0x118)](),_0x4a99b3['reset'](),_0x4a99b3[_0x27eefc(0xf7)]('data-edit-id'),_0xc0a329[_0x27eefc(0x11f)]='Report\x20Game',this['remove'](),initReportForm();});}_0x4a99b3[_0x35da8c(0x17b)]({'behavior':'smooth'});}function initReportForm(){const _0x5e9fe9=a0_0x1f8d;console['log'](_0x5e9fe9(0x125));}export function showMatchLightbox(_0x148bc9){const _0x47ffa5=a0_0x1f8d,_0x24c646=document['getElementById']('report-lightbox');document[_0x47ffa5(0x155)](_0x47ffa5(0x142))['textContent']=currentGameMode,document[_0x47ffa5(0x155)]('lightbox-winner')['textContent']=_0x148bc9[_0x47ffa5(0x137)]||'Unknown',document['getElementById']('lightbox-loser')[_0x47ffa5(0x11f)]=_0x148bc9['loserUsername']||'Unknown',document[_0x47ffa5(0x155)]('lightbox-loser-score')['textContent']=_0x148bc9['loserScore']||'0',document['getElementById']('lightbox-suicides')['textContent']=_0x148bc9[_0x47ffa5(0x171)]||'0',document['getElementById']('lightbox-map')[_0x47ffa5(0x11f)]=_0x148bc9['mapPlayed']||'Unknown',document[_0x47ffa5(0x155)]('lightbox-comment')[_0x47ffa5(0x11f)]=_0x148bc9['loserComment']||_0x47ffa5(0x105),document[_0x47ffa5(0x155)](_0x47ffa5(0x182))['textContent']=_0x148bc9['subgameType']||'Standard\x20Match',_0x24c646['classList']['add']('show');}export function setCurrentGameMode(_0xaf2e63){currentGameMode=_0xaf2e63;}export function initOutstandingMatches(){const _0x348451=a0_0x1f8d;document[_0x348451(0x121)]('DOMContentLoaded',()=>{const _0x1c5743=_0x348451,_0x5d0daf=document['getElementById'](_0x1c5743(0x175)),_0x4da45e=document[_0x1c5743(0x155)](_0x1c5743(0x126)),_0x13f59c=document['getElementById']('outstanding-modal'),_0x597b31=document['getElementById']('close-outstanding-btn'),_0x20969b=document[_0x1c5743(0x155)](_0x1c5743(0x132)),_0x1f15a3=document[_0x1c5743(0x155)](_0x1c5743(0x111)),_0x3ada1e=document[_0x1c5743(0x155)]('d2-mode'),_0x15e015=document['getElementById'](_0x1c5743(0x135));if(_0x1f15a3)_0x1f15a3['addEventListener']('click',()=>{setCurrentGameMode('D1');});if(_0x3ada1e)_0x3ada1e['addEventListener']('click',()=>{setCurrentGameMode('D2');});if(_0x15e015)_0x15e015[_0x1c5743(0x121)]('click',()=>{setCurrentGameMode('D3');});auth['onAuthStateChanged'](_0x5ea448=>{const _0x4ea191=_0x1c5743;_0x5ea448?_0x4da45e[_0x4ea191(0x178)]['display']=_0x4ea191(0x112):_0x4da45e[_0x4ea191(0x178)]['display']='none';});_0x5d0daf&&_0x5d0daf['addEventListener'](_0x1c5743(0x16c),async()=>{const _0x2628d0=_0x1c5743;_0x13f59c['classList']['add']('show'),document['getElementById']('outstanding-matches-list')[_0x2628d0(0x143)]='<div\x20class=\x22loading\x22>Loading\x20your\x20matches...</div>',await fetchOutstandingMatches(),renderOutstandingMatches();});_0x597b31&&_0x597b31[_0x1c5743(0x121)](_0x1c5743(0x16c),()=>{const _0x586a50=_0x1c5743;_0x13f59c['classList']['remove'](_0x586a50(0x191));});_0x20969b&&_0x20969b[_0x1c5743(0x121)]('click',()=>{const _0x6fa5d3=_0x1c5743;document[_0x6fa5d3(0x155)]('report-lightbox')[_0x6fa5d3(0xe9)]['remove']('show');});_0x13f59c&&_0x13f59c[_0x1c5743(0x121)](_0x1c5743(0x16c),_0x13c13e=>{const _0x473796=_0x1c5743;_0x13c13e[_0x473796(0x161)]===_0x13f59c&&_0x13f59c[_0x473796(0xe9)]['remove']('show');});const _0xd24047=document['getElementById']('report-lightbox');_0xd24047&&_0xd24047['addEventListener']('click',_0x374e10=>{const _0x26122a=_0x1c5743;_0x374e10['target']===_0xd24047&&_0xd24047['classList'][_0x26122a(0x164)]('show');});const _0x46e9e2=document[_0x1c5743(0x155)]('report-form');if(_0x46e9e2){const _0x43f00d=_0x46e9e2['onsubmit'];_0x46e9e2['onsubmit']=async function(_0x380231){const _0xcd64c1=_0x1c5743;_0x380231['preventDefault']();const _0x50c490=this['getAttribute']('data-edit-id');if(_0x50c490)try{const _0x17462d=document['getElementById']('loser-score')['value'],_0x2b6e12=document[_0xcd64c1(0x155)]('suicides')['value'],_0x5dec21=document['getElementById']('map-played')[_0xcd64c1(0x165)],_0x38dec4=document['getElementById']('loser-comment')[_0xcd64c1(0x165)],_0x22b215=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x4e4c7c=doc(db,_0x22b215,_0x50c490);await updateDoc(_0x4e4c7c,{'loserScore':Number(_0x17462d),'loserSuicides':Number(_0x2b6e12),'mapPlayed':_0x5dec21,'loserComment':_0x38dec4,'subgameType':document['getElementById']('subgame-type')['value'],'updatedAt':new Date()}),alert('Report\x20has\x20been\x20successfully\x20updated.'),this['reset'](),this['removeAttribute']('data-edit-id');const _0x36a6fe=this['querySelector']('button[type=\x22submit\x22]');_0x36a6fe['textContent']='Report\x20Game';const _0x494dc8=document['getElementById']('cancel-edit-btn');if(_0x494dc8)_0x494dc8[_0xcd64c1(0x164)]();}catch(_0x2a7396){console['error']('Error\x20updating\x20report:',_0x2a7396),document['getElementById']('report-error')['textContent']=_0xcd64c1(0x151);}else typeof _0x43f00d==='function'&&_0x43f00d['call'](this,_0x380231);};}});}typeof window!==a0_0x2d5007(0x17d)&&(window['showMatchLightbox']=showMatchLightbox,window['editReport']=editReport,window['rescindReport']=rescindReport,window['fetchOutstandingMatches']=fetchOutstandingMatches,window['renderOutstandingMatches']=renderOutstandingMatches);initOutstandingMatches();