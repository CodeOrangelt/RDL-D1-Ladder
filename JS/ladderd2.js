const a32_0x188a1c=(function(){let _0xe26f0=!![];return function(_0x24e114,_0x4b1efa){const _0x4d6eda=_0xe26f0?function(){if(_0x4b1efa){const _0x5e9e21=_0x4b1efa['apply'](_0x24e114,arguments);return _0x4b1efa=null,_0x5e9e21;}}:function(){};return _0xe26f0=![],_0x4d6eda;};}()),a32_0x5b986d=a32_0x188a1c(this,function(){const _0x59bc4c=a32_0x5dce;let _0x31abd7;try{const _0x425ee8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x31abd7=_0x425ee8();}catch(_0x51b115){_0x31abd7=window;}const _0x414451=_0x31abd7[_0x59bc4c(0x156)]=_0x31abd7['console']||{},_0x37b77d=[_0x59bc4c(0x140),'warn','info','error','exception',_0x59bc4c(0x132),'trace'];for(let _0x2bbcbd=0x0;_0x2bbcbd<_0x37b77d[_0x59bc4c(0x158)];_0x2bbcbd++){const _0x7edf98=a32_0x188a1c['constructor']['prototype']['bind'](a32_0x188a1c),_0x3e919b=_0x37b77d[_0x2bbcbd],_0x358e55=_0x414451[_0x3e919b]||_0x7edf98;_0x7edf98[_0x59bc4c(0x120)]=a32_0x188a1c[_0x59bc4c(0x135)](a32_0x188a1c),_0x7edf98['toString']=_0x358e55[_0x59bc4c(0x149)]['bind'](_0x358e55),_0x414451[_0x3e919b]=_0x7edf98;}});a32_0x5b986d();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a32_0x1ba3(){const _0x13e13f=['MAX_SAFE_INTEGER','desc','sort','opacity','losses','playersD2','__proto__','winRate','totalKills','has','totalMatches','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','style','totalDeaths','country','#FFD700','map','kda','push','eloHistoryD2','includes','D2:\x20Found','ceil','table','userProfiles','forEach','bind','querySelector','visibility','color','then','Gold','td:nth-child(3)','position','toFixed','now','matchId','log','set','elo','change','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','abs','Unranked','data','join','toString','fontWeight','timestamp','username','Bronze','player','playerUsername','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','message','get','catch','newElo','error','console',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','length','number','%</td>\x0a\x20\x20\x20\x20</tr>','#4CAF50'];a32_0x1ba3=function(){return _0x13e13f;};return a32_0x1ba3();}import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x5503b8 from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x3eeae1=![]){const _0x2639b3=a32_0x5dce,_0x3d414d=document[_0x2639b3(0x136)]('#ladder-d2\x20tbody');if(!_0x3d414d){console['error']('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x3d414d['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x50ecc0=Date[_0x2639b3(0x13e)]();if(!_0x3eeae1&&playerCacheD2[_0x2639b3(0x147)]&&_0x50ecc0-playerCacheD2[_0x2639b3(0x14b)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x3b2e06=collection(db,_0x2639b3(0x11f)),_0x386bdf=query(_0x3b2e06,orderBy(_0x2639b3(0x13c),'asc')),_0x3e88fc=await a32_0x5503b8['getDocuments'](_0x3b2e06),_0x4ffdb2=[];_0x3e88fc['forEach'](_0x470459=>{const _0x13fee3=_0x2639b3,_0x5c8f0a=_0x470459[_0x13fee3(0x147)]();_0x5c8f0a['username']&&_0x4ffdb2['push']({..._0x5c8f0a,'id':_0x470459['id'],'elo':_0x5c8f0a['eloRating']||0x0,'position':_0x5c8f0a[_0x13fee3(0x13c)]||Number[_0x13fee3(0x11a)]});});const _0x411436=collection(db,_0x2639b3(0x133)),_0x2fd59b=await getDocs(_0x411436),_0x6256f=new Map();_0x2fd59b[_0x2639b3(0x134)](_0x27653e=>{const _0x7df423=_0x27653e['data']();_0x7df423['username']&&_0x6256f['set'](_0x7df423['username']['toLowerCase'](),_0x7df423);});for(const _0xad0ef0 of _0x4ffdb2){const _0x4de130=_0xad0ef0['username']['toLowerCase']();if(_0x6256f['has'](_0x4de130)){const _0x4516a5=_0x6256f['get'](_0x4de130);_0x4516a5['country']&&(_0xad0ef0['country']=_0x4516a5[_0x2639b3(0x129)]['toLowerCase']());}}const _0x3eaf6f=_0x4ffdb2[_0x2639b3(0x12b)](_0x1cf384=>_0x1cf384[_0x2639b3(0x14c)]),_0x59284a=await fetchBatchMatchStatsD2(_0x3eaf6f);_0x4ffdb2['sort']((_0x11f298,_0x163498)=>{const _0xef58dd=_0x2639b3,_0x4a7c51=_0x59284a['get'](_0x11f298[_0xef58dd(0x14c)])?.['totalMatches']||0x0,_0x1f3ae0=_0x59284a[_0xef58dd(0x152)](_0x163498['username'])?.[_0xef58dd(0x124)]||0x0;if(_0x4a7c51===0x0!==(_0x1f3ae0===0x0))return _0x4a7c51===0x0?0x1:-0x1;return(_0x11f298['position']||0x3e7)-(_0x163498[_0xef58dd(0x13c)]||0x3e7);}),_0x4ffdb2['forEach']((_0x5450dc,_0x2666e2)=>{_0x5450dc['position']=_0x2666e2+0x1;}),playerCacheD2[_0x2639b3(0x147)]=_0x4ffdb2,playerCacheD2['timestamp']=_0x50ecc0,updateLadderDisplayD2(_0x4ffdb2);}catch(_0x30f165){console[_0x2639b3(0x155)]('Error\x20loading\x20D2\x20ladder:',_0x30f165),_0x3d414d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x30f165[_0x2639b3(0x151)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x2e319d){const _0x3dc247=a32_0x5dce;if(_0x2e319d[_0x3dc247(0x158)]===0x0)return 0x1;let _0x3610b9=0x0;return _0x2e319d['forEach'](_0x458951=>{const _0xdb89ca=_0x3dc247;_0x458951['position']&&typeof _0x458951['position']===_0xdb89ca(0x159)&&_0x458951[_0xdb89ca(0x13c)]>_0x3610b9&&(_0x3610b9=_0x458951['position']);}),_0x3610b9+0x1;}async function updatePlayerPositions(_0x2c6d9f,_0x525cd7){const _0x1b494a=a32_0x5dce;try{const _0x32ef2b=collection(db,_0x1b494a(0x11f)),_0x32e6d0=await getDocs(_0x32ef2b),_0x518e95=[];_0x32e6d0['forEach'](_0x493481=>{_0x518e95['push']({'id':_0x493481['id'],..._0x493481['data']()});});const _0x4a36d5=_0x518e95['find'](_0x190f27=>_0x190f27['username']===_0x2c6d9f),_0x3a28e6=_0x518e95['find'](_0x5b6328=>_0x5b6328['username']===_0x525cd7);if(!_0x4a36d5||!_0x3a28e6){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x4a36d5[_0x1b494a(0x13c)]>_0x3a28e6['position']){const _0x4487c5=_0x3a28e6['position'];for(const _0x51623d of _0x518e95){_0x51623d['position']>=_0x3a28e6[_0x1b494a(0x13c)]&&_0x51623d['position']<_0x4a36d5['position']&&_0x51623d['username']!==_0x2c6d9f&&await updateDoc(doc(db,'playersD2',_0x51623d['id']),{'position':_0x51623d[_0x1b494a(0x13c)]+0x1});}await updateDoc(doc(db,'playersD2',_0x4a36d5['id']),{'position':_0x4487c5});if(_0x4487c5===0x1){const _0x2a0c10=doc(db,'playersD2',_0x4a36d5['id']),_0x2c156f=await getDoc(_0x2a0c10);!_0x2c156f['data']()['firstPlaceDate']&&await updateDoc(_0x2a0c10,{'firstPlaceDate':Timestamp[_0x1b494a(0x13e)]()});}if(_0x3a28e6['position']===0x1){const _0x3a0e29=doc(db,'playersD2',_0x3a28e6['id']);await updateDoc(_0x3a0e29,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0xb93d37){console['error']('Error\x20updating\x20D2\x20player\x20positions:',_0xb93d37);}}function calculateStreakDays(_0x456e86){const _0x2ed13d=a32_0x5dce;if(!_0x456e86)return 0x0;const _0x40274c=_0x456e86['toDate'](),_0x2af612=new Date(),_0x4e4132=Math[_0x2ed13d(0x145)](_0x2af612-_0x40274c);return Math[_0x2ed13d(0x131)](_0x4e4132/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x438695){const _0x1b4628=a32_0x5dce;if(_0x438695>=0x834)return'Emerald';if(_0x438695>=0x708)return _0x1b4628(0x13a);if(_0x438695>=0x640)return'Silver';if(_0x438695>=0x578)return _0x1b4628(0x14d);return _0x1b4628(0x146);}function a32_0x5dce(_0xcb44a9,_0x483fad){const _0x5b986d=a32_0x1ba3();return a32_0x5dce=function(_0x188a1c,_0x19f549){_0x188a1c=_0x188a1c-0x11a;let _0x1ba342=_0x5b986d[_0x188a1c];return _0x1ba342;},a32_0x5dce(_0xcb44a9,_0x483fad);}async function updateLadderDisplayD2(_0x3236a5){const _0x237f02=a32_0x5dce;_0x3236a5[_0x237f02(0x11c)]((_0x3292de,_0x24f923)=>_0x3292de['position']-_0x24f923['position']);const _0x4f6739=document['querySelector']('#ladder-d2\x20tbody');if(!_0x4f6739)return;_0x4f6739['innerHTML']='';const _0xa4e08a=_0x3236a5['map'](_0x83808a=>_0x83808a[_0x237f02(0x14c)]),_0x3de298=await fetchBatchMatchStatsD2(_0xa4e08a),_0x3eb781=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x3eb781&&(_0x3eb781['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x55c640=_0x3236a5['map'](_0x46ea12=>{const _0x178dfc=_0x237f02,_0x4d251f=_0x3de298['get'](_0x46ea12[_0x178dfc(0x14c)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x46ea12,_0x4d251f);})[_0x237f02(0x148)]('');_0x4f6739['innerHTML']=_0x55c640,getPlayersLastEloChangesD2(_0xa4e08a)[_0x237f02(0x139)](_0x16ce0a=>{const _0x279cd9=new Map();_0x4f6739['querySelectorAll']('tr')['forEach']((_0x1e656e,_0x241840)=>{const _0x42e0aa=a32_0x5dce;_0x241840<_0xa4e08a['length']&&_0x279cd9[_0x42e0aa(0x141)](_0xa4e08a[_0x241840],_0x1e656e);}),_0x16ce0a['forEach']((_0x2c2901,_0x1e6606)=>{const _0x14ffbe=a32_0x5dce,_0x95ee9a=_0x279cd9[_0x14ffbe(0x152)](_0x1e6606);if(_0x95ee9a&&_0x2c2901!==0x0){const _0x2e2c1e=_0x95ee9a['querySelector'](_0x14ffbe(0x13b));if(_0x2e2c1e){const _0x2ee551=_0x2c2901>0x0?'+'+_0x2c2901:''+_0x2c2901,_0x45ac5c=_0x2e2c1e['querySelector']('.trend-indicator');_0x45ac5c&&(_0x45ac5c['textContent']=_0x2ee551,_0x45ac5c[_0x14ffbe(0x127)][_0x14ffbe(0x138)]=_0x2c2901>0x0?_0x14ffbe(0x15b):'#F44336',_0x45ac5c['style'][_0x14ffbe(0x14a)]='bold',_0x45ac5c['style']['fontSize']='0.85em',_0x45ac5c['style']['display']='inline',_0x45ac5c['style'][_0x14ffbe(0x137)]='visible',_0x45ac5c[_0x14ffbe(0x127)][_0x14ffbe(0x11d)]='1');}}});})[_0x237f02(0x153)](_0x46b903=>console['error'](_0x237f02(0x144),_0x46b903));}function createPlayerRowD2(_0x1bf86c,_0x3ea7bb){const _0x36c129=a32_0x5dce,_0xbb4ecd=parseFloat(_0x1bf86c[_0x36c129(0x142)])||0x0;let _0x19c715='gray';if(_0xbb4ecd>=0x7d0)_0x19c715='#50C878';else{if(_0xbb4ecd>=0x708)_0x19c715=_0x36c129(0x12a);else{if(_0xbb4ecd>=0x640)_0x19c715='#C0C0C0';else _0xbb4ecd>=0x578&&(_0x19c715='#CD7F32');}}let _0x3b1036='';return _0x1bf86c['country']&&(_0x3b1036='<img\x20src=\x22../images/flags/'+_0x1bf86c[_0x36c129(0x129)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1bf86c[_0x36c129(0x129)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1bf86c['position']+_0x36c129(0x125)+encodeURIComponent(_0x1bf86c['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x19c715+_0x36c129(0x126)+_0x1bf86c[_0x36c129(0x14c)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3b1036+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x19c715+_0x36c129(0x157)+_0xbb4ecd+_0x36c129(0x150)+_0x3ea7bb['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ea7bb['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ea7bb[_0x36c129(0x11e)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ea7bb[_0x36c129(0x12c)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3ea7bb['winRate']+_0x36c129(0x15a);}async function getPlayersLastEloChangesD2(_0x56bc2f){const _0x904ff4=a32_0x5dce,_0x4ad809=new Map();_0x56bc2f['forEach'](_0x4bbe9a=>_0x4ad809[_0x904ff4(0x141)](_0x4bbe9a,0x0));try{const _0x3d6caa=collection(db,_0x904ff4(0x12e)),_0xe506ec=query(_0x3d6caa,orderBy('timestamp',_0x904ff4(0x11b)),limit(0x64)),_0x530ce1=await getDocs(_0xe506ec),_0x4e93ab=new Map(),_0x80cae=await getDocs(collection(db,'playersD2'));_0x80cae['forEach'](_0x19300a=>{const _0x23c022=_0x19300a['data']();_0x23c022['username']&&_0x4e93ab['set'](_0x19300a['id'],_0x23c022['username']);});const _0x4f4298=new Map();_0x530ce1['forEach'](_0x44b865=>{const _0x59428e=_0x904ff4,_0x3e664f=_0x44b865['data']();let _0x2d3b19=_0x3e664f['username']||_0x3e664f['playerUsername'];!_0x2d3b19&&_0x3e664f['player']&&_0x4e93ab[_0x59428e(0x123)](_0x3e664f[_0x59428e(0x14e)])&&(_0x2d3b19=_0x4e93ab[_0x59428e(0x152)](_0x3e664f['player']));if(!_0x2d3b19&&_0x3e664f[_0x59428e(0x13f)]){}_0x2d3b19&&_0x56bc2f['includes'](_0x2d3b19)&&(!_0x4f4298['has'](_0x2d3b19)&&_0x4f4298['set'](_0x2d3b19,[]),_0x4f4298[_0x59428e(0x152)](_0x2d3b19)[_0x59428e(0x12d)]({..._0x3e664f,'timestamp':_0x3e664f['timestamp']?.['seconds']||0x0,'username':_0x2d3b19}));}),_0x4f4298[_0x904ff4(0x134)]((_0x2315cb,_0xa775cc)=>{const _0x104888=_0x904ff4;if(_0x2315cb['length']>0x0){_0x2315cb['sort']((_0x4bca83,_0x26b998)=>_0x26b998['timestamp']-_0x4bca83['timestamp']);const _0x3fbb50=_0x2315cb['find'](_0x5d24e0=>_0x5d24e0['change']!==undefined||_0x5d24e0['newElo']!==undefined&&_0x5d24e0['previousElo']!==undefined);if(_0x3fbb50){let _0x1cec64;if(_0x3fbb50['change']!==undefined)_0x1cec64=_0x3fbb50['change'];else _0x3fbb50['newElo']!==undefined&&_0x3fbb50['previousElo']!==undefined&&(_0x1cec64=_0x3fbb50[_0x104888(0x154)]-_0x3fbb50['previousElo']);_0x1cec64!==undefined&&_0x4ad809[_0x104888(0x141)](_0xa775cc,_0x1cec64);}}});if(_0x4f4298['size']===0x0){const _0x14295c=collection(db,'eloHistory'),_0x4d0c16=query(_0x14295c,where('gameMode','==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x87f61=await getDocs(_0x4d0c16);console['log'](_0x904ff4(0x130),_0x87f61['size'],'fallback\x20entries'),_0x87f61['forEach'](_0x260101=>{const _0x5687c4=_0x904ff4,_0x5e014f=_0x260101['data'](),_0x1ebe05=_0x5e014f[_0x5687c4(0x14c)]||_0x5e014f[_0x5687c4(0x14f)];if(_0x1ebe05&&_0x56bc2f['includes'](_0x1ebe05)){const _0x99a4fc=_0x5e014f[_0x5687c4(0x143)]||(_0x5e014f[_0x5687c4(0x154)]!==undefined&&_0x5e014f['previousElo']!==undefined?_0x5e014f['newElo']-_0x5e014f['previousElo']:0x0);_0x99a4fc!==0x0&&(_0x4ad809['set'](_0x1ebe05,_0x99a4fc),console[_0x5687c4(0x140)]('D2:\x20'+_0x1ebe05+'\x20fallback\x20ELO\x20change:\x20'+_0x99a4fc));}});}catch(_0x257644){}}}catch(_0x348e21){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x348e21);}return _0x4ad809;}async function fetchBatchMatchStatsD2(_0x153817){const _0x9d8a07=a32_0x5dce,_0x15cf4b=new Map();try{_0x153817['forEach'](_0x2c58c5=>{_0x15cf4b['set'](_0x2c58c5,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x59be35=collection(db,'approvedMatchesD2'),_0x3fe655=await getDocs(_0x59be35);_0x3fe655['forEach'](_0x367ddf=>{const _0x1addb8=a32_0x5dce,_0x2e37a0=_0x367ddf['data'](),_0x241561=_0x2e37a0['winnerUsername'],_0x57b13f=_0x2e37a0['loserUsername'];if(_0x153817['includes'](_0x241561)){const _0x18ebd3=_0x15cf4b[_0x1addb8(0x152)](_0x241561);_0x18ebd3['wins']++,_0x18ebd3['totalMatches']++,_0x18ebd3['totalKills']+=parseInt(_0x2e37a0['winnerScore'])||0x0,_0x18ebd3['totalDeaths']+=parseInt(_0x2e37a0['loserScore'])||0x0;}if(_0x153817[_0x1addb8(0x12f)](_0x57b13f)){const _0x3ed979=_0x15cf4b[_0x1addb8(0x152)](_0x57b13f);_0x3ed979[_0x1addb8(0x11e)]++,_0x3ed979[_0x1addb8(0x124)]++,_0x3ed979['totalKills']+=parseInt(_0x2e37a0['loserScore'])||0x0,_0x3ed979[_0x1addb8(0x128)]+=parseInt(_0x2e37a0['winnerScore'])||0x0;}}),_0x153817[_0x9d8a07(0x134)](_0x2a7783=>{const _0x2cf365=_0x9d8a07,_0x5dbf2b=_0x15cf4b['get'](_0x2a7783);_0x5dbf2b['kda']=_0x5dbf2b['totalDeaths']>0x0?(_0x5dbf2b[_0x2cf365(0x122)]/_0x5dbf2b['totalDeaths'])[_0x2cf365(0x13d)](0x2):_0x5dbf2b[_0x2cf365(0x122)]['toFixed'](0x2),_0x5dbf2b[_0x2cf365(0x121)]=_0x5dbf2b['totalMatches']>0x0?(_0x5dbf2b['wins']/_0x5dbf2b['totalMatches']*0x64)[_0x2cf365(0x13d)](0x1):0x0;});}catch(_0x496b62){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x496b62);}return _0x15cf4b;}export{displayLadderD2,updatePlayerPositions};