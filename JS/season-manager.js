const a52_0x712c1b=a52_0x5edc;(function(_0x118d0a,_0x212a94){const _0xa8e3d8=a52_0x5edc,_0x560eee=_0x118d0a();while(!![]){try{const _0x13e91d=parseInt(_0xa8e3d8(0x1d0))/0x1+parseInt(_0xa8e3d8(0x1c3))/0x2+-parseInt(_0xa8e3d8(0x1f3))/0x3*(parseInt(_0xa8e3d8(0x1e9))/0x4)+-parseInt(_0xa8e3d8(0x1ec))/0x5*(parseInt(_0xa8e3d8(0x1e7))/0x6)+-parseInt(_0xa8e3d8(0x1f1))/0x7+-parseInt(_0xa8e3d8(0x1dc))/0x8+parseInt(_0xa8e3d8(0x1ea))/0x9*(parseInt(_0xa8e3d8(0x1e2))/0xa);if(_0x13e91d===_0x212a94)break;else _0x560eee['push'](_0x560eee['shift']());}catch(_0x5532c4){_0x560eee['push'](_0x560eee['shift']());}}}(a52_0x3ef5,0x7c3ef));const a52_0x250696=(function(){let _0x42004f=!![];return function(_0x3a4d4e,_0x494062){const _0x2e108d=_0x42004f?function(){const _0x2b3c75=a52_0x5edc;if(_0x494062){const _0x3acdea=_0x494062[_0x2b3c75(0x1f2)](_0x3a4d4e,arguments);return _0x494062=null,_0x3acdea;}}:function(){};return _0x42004f=![],_0x2e108d;};}()),a52_0x353c6e=a52_0x250696(this,function(){const _0x173fe7=a52_0x5edc;return a52_0x353c6e[_0x173fe7(0x1cd)]()[_0x173fe7(0x1eb)](_0x173fe7(0x1d7))['toString']()[_0x173fe7(0x1e5)](a52_0x353c6e)[_0x173fe7(0x1eb)]('(((.+)+)+)+$');});a52_0x353c6e();const a52_0x43e7eb=(function(){let _0x2e691c=!![];return function(_0x5e84f4,_0x34304b){const _0x3f27bb=_0x2e691c?function(){const _0x490547=a52_0x5edc;if(_0x34304b){const _0x21ef24=_0x34304b[_0x490547(0x1f2)](_0x5e84f4,arguments);return _0x34304b=null,_0x21ef24;}}:function(){};return _0x2e691c=![],_0x3f27bb;};}()),a52_0x534352=a52_0x43e7eb(this,function(){const _0xcdbeca=a52_0x5edc;let _0xb8075d;try{const _0x2ea623=Function(_0xcdbeca(0x1d8)+_0xcdbeca(0x1f0)+');');_0xb8075d=_0x2ea623();}catch(_0x5b4266){_0xb8075d=window;}const _0x31b0f1=_0xb8075d[_0xcdbeca(0x1dd)]=_0xb8075d[_0xcdbeca(0x1dd)]||{},_0x1e19b7=[_0xcdbeca(0x1d4),_0xcdbeca(0x1c7),_0xcdbeca(0x1cb),_0xcdbeca(0x1c9),_0xcdbeca(0x1c6),_0xcdbeca(0x1d5),'trace'];for(let _0x17162a=0x0;_0x17162a<_0x1e19b7['length'];_0x17162a++){const _0x4e7b45=a52_0x43e7eb[_0xcdbeca(0x1e5)]['prototype']['bind'](a52_0x43e7eb),_0x1f857b=_0x1e19b7[_0x17162a],_0x4b34af=_0x31b0f1[_0x1f857b]||_0x4e7b45;_0x4e7b45[_0xcdbeca(0x1d3)]=a52_0x43e7eb[_0xcdbeca(0x1da)](a52_0x43e7eb),_0x4e7b45[_0xcdbeca(0x1cd)]=_0x4b34af[_0xcdbeca(0x1cd)][_0xcdbeca(0x1da)](_0x4b34af),_0x31b0f1[_0x1f857b]=_0x4e7b45;}});a52_0x534352();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){this['setupEventListeners']();}[a52_0x712c1b(0x1c8)](){const _0x29a96e=a52_0x712c1b,_0x34ab3d=document['getElementById'](_0x29a96e(0x1cc)),_0x5d7d07=document[_0x29a96e(0x1e8)](_0x29a96e(0x1df)),_0x10ad96=document['getElementById'](_0x29a96e(0x1c2));_0x34ab3d?.['addEventListener'](_0x29a96e(0x1e4),()=>{const _0x7fee99=_0x29a96e;document['getElementById'](_0x7fee99(0x1db))[_0x7fee99(0x1d2)][_0x7fee99(0x1ee)]=_0x7fee99(0x1f5);}),_0x5d7d07?.[_0x29a96e(0x1f4)](_0x29a96e(0x1e4),async()=>{const _0x4d4192=_0x29a96e,_0x4bb656=document[_0x4d4192(0x1e8)]('reset-password'),_0x38e405=auth['currentUser'];if(!_0x38e405||!_0x4bb656['value']){alert(_0x4d4192(0x1cf));return;}try{const _0x128cac=EmailAuthProvider[_0x4d4192(0x1d1)](_0x38e405['email'],_0x4bb656[_0x4d4192(0x1e6)]);await reauthenticateWithCredential(_0x38e405,_0x128cac),await this[_0x4d4192(0x1ca)](),_0x4bb656['value']='',document['getElementById']('reset-confirmation')[_0x4d4192(0x1d2)][_0x4d4192(0x1ee)]=_0x4d4192(0x1d9);}catch(_0x28e12a){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console[_0x4d4192(0x1c9)](_0x4d4192(0x1de),_0x28e12a);}}),_0x10ad96?.[_0x29a96e(0x1f4)](_0x29a96e(0x1e4),()=>{const _0x400a5a=_0x29a96e,_0x5e6f6b=document['getElementById']('reset-password');_0x5e6f6b['value']='',document[_0x400a5a(0x1e8)](_0x400a5a(0x1db))[_0x400a5a(0x1d2)]['display']=_0x400a5a(0x1d9);});}async[a52_0x712c1b(0x1ca)](){const _0x5ce979=a52_0x712c1b;try{const _0x41a32c=await getDoc(doc(db,_0x5ce979(0x1e0),_0x5ce979(0x1c1)));let _0x9d4e50=0x1;_0x41a32c['exists']()&&(_0x9d4e50=_0x41a32c['data']()[_0x5ce979(0x1e3)]+0x1);const _0x5a3af3=await getDocs(collection(db,_0x5ce979(0x1ed))),_0xbbb3db={'players':[],'date':new Date(),'seasonNumber':_0x9d4e50};for(const _0x3a751b of _0x5a3af3['docs']){const _0x4e7004=_0x3a751b['data']();_0xbbb3db[_0x5ce979(0x1ed)]['push']({'username':_0x4e7004[_0x5ce979(0x1ce)],'position':_0x4e7004['position'],'eloRating':_0x4e7004[_0x5ce979(0x1c4)]||0x4b0}),await setDoc(doc(db,_0x5ce979(0x1ed),_0x3a751b['id']),{..._0x4e7004,'eloRating':0x4b0,'position':_0x4e7004[_0x5ce979(0x1e1)]});}await setDoc(doc(db,_0x5ce979(0x1c5),_0x5ce979(0x1ef)+_0x9d4e50),_0xbbb3db),await setDoc(doc(db,_0x5ce979(0x1e0),'seasonCount'),{'count':_0x9d4e50}),alert('Season\x20'+_0x9d4e50+'\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.'),location['reload']();}catch(_0x4c62be){console[_0x5ce979(0x1c9)]('Error\x20resetting\x20season:',_0x4c62be),alert(_0x5ce979(0x1d6));}}}function a52_0x5edc(_0x2d3cc4,_0x16718a){const _0x1cd50a=a52_0x3ef5();return a52_0x5edc=function(_0x534352,_0x43e7eb){_0x534352=_0x534352-0x1c1;let _0x4e16cc=_0x1cd50a[_0x534352];return _0x4e16cc;},a52_0x5edc(_0x2d3cc4,_0x16718a);}function a52_0x3ef5(){const _0x3b6af2=['108DBowCm','search','5wjKqQK','players','display','season','{}.constructor(\x22return\x20this\x22)(\x20)','138103XXsYJq','apply','285903GBfwIR','addEventListener','block','seasonCount','cancel-reset','1275610mTUXOk','eloRating','seasons','exception','warn','setupEventListeners','error','resetSeason','info','reset-season','toString','username','Please\x20enter\x20your\x20password','858994UPXHsA','credential','style','__proto__','log','table','Error\x20resetting\x20season.\x20Please\x20try\x20again.','(((.+)+)+)+$','return\x20(function()\x20','none','bind','reset-confirmation','919152igbtUT','console','Authentication\x20error:','confirm-reset','metadata','position','10970pEUyWN','count','click','constructor','value','2911350fnfmST','getElementById','16CXwqHu'];a52_0x3ef5=function(){return _0x3b6af2;};return a52_0x3ef5();}export const seasonManager=new SeasonManager();