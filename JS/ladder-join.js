function a25_0x51a3(){const _0x448804=['reload','join-username-input','playersD2','DUO','display','Successfully\x20joined\x20the\x20','block','playersCTF','log','trim','error','join-ladder-type','textContent','none','className','location','tiny-join-button','uid','ladder-join-prompt','Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22','d2-switch','getIdToken','players','email','checked','disabled','getElementById','docs','trace','bind','style','desc','length','ladder-join-status\x20success','change','d1-switch','addEventListener','username','ladder-join-status\x20error','toLowerCase','console','table','input[name=\x22ladder\x22]','forEach','nonParticipants','ladder-join-status'];a25_0x51a3=function(){return _0x448804;};return a25_0x51a3();}function a25_0xb1b8(_0x2c0a89,_0x4e01df){const _0x212771=a25_0x51a3();return a25_0xb1b8=function(_0x5a3882,_0x3d677c){_0x5a3882=_0x5a3882-0xfd;let _0x51a383=_0x212771[_0x5a3882];return _0x51a383;},a25_0xb1b8(_0x2c0a89,_0x4e01df);}const a25_0x239b95=a25_0xb1b8,a25_0x5a3882=(function(){let _0x54f0f2=!![];return function(_0x2a13f2,_0x150235){const _0x589f10=_0x54f0f2?function(){if(_0x150235){const _0x5b5c79=_0x150235['apply'](_0x2a13f2,arguments);return _0x150235=null,_0x5b5c79;}}:function(){};return _0x54f0f2=![],_0x589f10;};}()),a25_0x212771=a25_0x5a3882(this,function(){const _0x17b2c6=a25_0xb1b8,_0x5f1df0=function(){let _0x48e8b6;try{_0x48e8b6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3fbea1){_0x48e8b6=window;}return _0x48e8b6;},_0x513829=_0x5f1df0(),_0x48fae2=_0x513829[_0x17b2c6(0x125)]=_0x513829['console']||{},_0xf19408=[_0x17b2c6(0x105),'warn','info',_0x17b2c6(0x107),'exception',_0x17b2c6(0x126),_0x17b2c6(0x119)];for(let _0x35327c=0x0;_0x35327c<_0xf19408[_0x17b2c6(0x11d)];_0x35327c++){const _0x1a4b32=a25_0x5a3882['constructor']['prototype'][_0x17b2c6(0x11a)](a25_0x5a3882),_0x2d96c7=_0xf19408[_0x35327c],_0x3e7bba=_0x48fae2[_0x2d96c7]||_0x1a4b32;_0x1a4b32['__proto__']=a25_0x5a3882['bind'](a25_0x5a3882),_0x1a4b32['toString']=_0x3e7bba['toString']['bind'](_0x3e7bba),_0x48fae2[_0x2d96c7]=_0x1a4b32;}});a25_0x212771();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document[a25_0x239b95(0x121)]('DOMContentLoaded',()=>{const _0x5e5f11=a25_0x239b95,_0x112242=document['getElementById'](_0x5e5f11(0x120)),_0x15a83a=document['getElementById'](_0x5e5f11(0x111));console[_0x5e5f11(0x105)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x112242),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x15a83a);function _0x105f54(){const _0x1bf6ff=_0x5e5f11;document['querySelectorAll'](_0x1bf6ff(0x127))[_0x1bf6ff(0x128)](_0x20fa1d=>{const _0xaaa699=_0x1bf6ff;_0x20fa1d['addEventListener'](_0xaaa699(0x11f),_0x1c56d3=>{const _0x1a17a0=_0xaaa699;_0x1c56d3['target'][_0x1a17a0(0x115)]&&(currentLadder=_0x1c56d3['target']['value'],console[_0x1a17a0(0x105)]('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x105f54();const _0x5ca368=document['getElementById']('join-ladder-button');_0x5ca368&&_0x5ca368['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x51e683=>{const _0x8fa328=_0x5e5f11;if(_0x51e683)checkUserLadderStatus();else{const _0x1af5d9=document['getElementById'](_0x8fa328(0x10f));_0x1af5d9&&(_0x1af5d9['style'][_0x8fa328(0x101)]='none');}});});function getCollectionName(_0x4b73e2){const _0x56744c=a25_0x239b95;switch(_0x4b73e2?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return'playersD3';case'DUOS':case _0x56744c(0x100):return'playersDuos';case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x4b73e2+',\x20defaulting\x20to\x20D1');return _0x56744c(0x113);}}async function checkUserLadderStatus(){const _0x44c265=a25_0x239b95;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x1e0657=auth['currentUser'],_0x2fee9=document[_0x44c265(0x117)]('ladder-join-prompt'),_0x387bed=document[_0x44c265(0x117)](_0x44c265(0x108)),_0x3b22d0=document['getElementById'](_0x44c265(0x10d));if(!_0x1e0657||!_0x1e0657['uid']||!_0x2fee9||!_0x387bed||!_0x3b22d0){if(_0x2fee9)_0x2fee9[_0x44c265(0x11b)]['display']=_0x44c265(0x10a);if(_0x3b22d0)_0x3b22d0['style'][_0x44c265(0x101)]='none';return;}try{try{await _0x1e0657['getIdToken'](![]);}catch(_0x363b09){console['error']('Authentication\x20verification\x20failed:',_0x363b09),_0x2fee9['style']['display']='none',_0x3b22d0['style'][_0x44c265(0x101)]='none';return;}const _0x509e42=getCollectionName(currentLadder),_0x2a558f=doc(db,_0x509e42,_0x1e0657[_0x44c265(0x10e)]),_0x5ab57a=await getDoc(_0x2a558f);if(_0x5ab57a['exists']())_0x2fee9[_0x44c265(0x11b)]['display']='none',_0x3b22d0['style']['display']='none';else{_0x2fee9['style']['display']='none',_0x3b22d0['style']['display']='block',_0x387bed[_0x44c265(0x109)]=currentLadder,_0x3b22d0['onclick']=()=>{const _0x247960=_0x44c265;_0x2fee9['style']['display']==='block'?_0x2fee9['style']['display']=_0x247960(0x10a):_0x2fee9['style']['display']=_0x247960(0x103);};const _0xf6a38c=document['getElementById'](_0x44c265(0xfe)),_0x164233=document['getElementById']('ladder-join-status');if(_0xf6a38c)_0xf6a38c['value']='';_0x164233&&(_0x164233['textContent']='',_0x164233['className']=_0x44c265(0x12a));}}catch(_0x5548b9){console['error']('Error\x20checking\x20ladder\x20status:',_0x5548b9),_0x2fee9['style'][_0x44c265(0x101)]='none',_0x3b22d0[_0x44c265(0x11b)]['display']=_0x44c265(0x10a);}}async function handleJoinLadder(){const _0x1fc853=a25_0x239b95,_0x44f5c2=auth['currentUser'],_0x2cbbd4=document['getElementById']('join-ladder-button'),_0x425d83=document['getElementById']('ladder-join-status'),_0x9fc6e2=document['getElementById'](_0x1fc853(0xfe));if(!_0x44f5c2||!_0x44f5c2['uid']){_0x425d83[_0x1fc853(0x109)]='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x425d83['className']='ladder-join-status\x20error';return;}try{await _0x44f5c2['getIdToken'](!![]);}catch(_0x2faabe){console['error']('Authentication\x20error:',_0x2faabe),_0x425d83[_0x1fc853(0x109)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x425d83['className']='ladder-join-status\x20error';return;}if(!_0x9fc6e2||!_0x9fc6e2['value']['trim']()){_0x425d83['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x425d83[_0x1fc853(0x10b)]=_0x1fc853(0x123);return;}try{_0x2cbbd4[_0x1fc853(0x116)]=!![],_0x425d83['textContent']='Verifying\x20username...',_0x425d83['className']='ladder-join-status\x20loading';let _0x354255='',_0x3e66b2=null;const _0xf3b2b0=[_0x1fc853(0x113),_0x1fc853(0xff),'playersD3','playersDuos',_0x1fc853(0x104),_0x1fc853(0x129)];for(const _0x2c4c48 of _0xf3b2b0){try{const _0x5763ba=doc(db,_0x2c4c48,_0x44f5c2['uid']),_0x359b8c=await getDoc(_0x5763ba);if(_0x359b8c['exists']()){_0x3e66b2=_0x359b8c['data']();if(_0x3e66b2[_0x1fc853(0x122)]){_0x354255=_0x3e66b2['username'];break;}}}catch(_0x117b3a){console['error']('Error\x20checking\x20'+_0x2c4c48+':',_0x117b3a);}}!_0x354255&&_0x44f5c2[_0x1fc853(0x114)]&&(_0x354255=_0x44f5c2['email']['split']('@')[0x0]);if(!_0x354255){_0x425d83['textContent']='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x425d83['className']=_0x1fc853(0x123),_0x2cbbd4[_0x1fc853(0x116)]=![];return;}const _0x545cc4=_0x9fc6e2['value'][_0x1fc853(0x106)]();if(_0x354255&&_0x545cc4['toLowerCase']()!==_0x354255[_0x1fc853(0x124)]()){_0x425d83['textContent']=_0x1fc853(0x110)+_0x354255+'\x22\x20to\x20confirm.',_0x425d83['className']=_0x1fc853(0x123),_0x2cbbd4['disabled']=![];return;}_0x425d83[_0x1fc853(0x109)]='Joining\x20'+currentLadder+'\x20ladder...';const _0x446670=getCollectionName(currentLadder),_0xaaa977=doc(db,_0x446670,_0x44f5c2['uid']),_0x14fc41=await getDoc(_0xaaa977);if(_0x14fc41['exists']()){_0x425d83['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x425d83['className']='ladder-join-status\x20error',_0x2cbbd4[_0x1fc853(0x116)]=![];return;}try{await _0x44f5c2[_0x1fc853(0x112)](!![]);}catch(_0x2e8074){_0x425d83[_0x1fc853(0x109)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x425d83['className']=_0x1fc853(0x123),_0x2cbbd4['disabled']=![];return;}const _0x652df=_0x354255,_0x258d2d=collection(db,_0x446670),_0x3d9b37=query(_0x258d2d,orderBy('position',_0x1fc853(0x11c)),limit(0x1)),_0x3dd09a=await getDocs(_0x3d9b37);let _0x3bbc37=0x1;if(!_0x3dd09a['empty']){const _0x519a55=_0x3dd09a[_0x1fc853(0x118)][0x0]['data']();_0x3bbc37=(_0x519a55['position']||0x0)+0x1;}const _0x55f40b={'username':_0x652df,'email':_0x44f5c2['email'],'eloRating':0x4b0,'position':_0x3bbc37,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0xaaa977,_0x55f40b),currentLadder==='DUOS'?_0x425d83[_0x1fc853(0x109)]='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x425d83[_0x1fc853(0x109)]=_0x1fc853(0x102)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x425d83[_0x1fc853(0x10b)]=_0x1fc853(0x11e),setTimeout(()=>{const _0x4fb23a=_0x1fc853;window[_0x4fb23a(0x10c)][_0x4fb23a(0xfd)]();},0x7d0);}catch(_0x4fc844){console['error']('Error\x20joining\x20ladder:',_0x4fc844),_0x425d83[_0x1fc853(0x109)]='Error\x20joining\x20ladder:\x20'+_0x4fc844['message'],_0x425d83[_0x1fc853(0x10b)]=_0x1fc853(0x123),_0x2cbbd4['disabled']=![];}}