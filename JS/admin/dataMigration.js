(function(_0x1fee77,_0x382727){const _0x88ee84=a0_0x2a93,_0x16f8ec=_0x1fee77();while(!![]){try{const _0x4bd932=-parseInt(_0x88ee84(0x176))/0x1+-parseInt(_0x88ee84(0x184))/0x2*(parseInt(_0x88ee84(0x166))/0x3)+parseInt(_0x88ee84(0x17c))/0x4+-parseInt(_0x88ee84(0x17f))/0x5*(-parseInt(_0x88ee84(0x169))/0x6)+parseInt(_0x88ee84(0x177))/0x7*(-parseInt(_0x88ee84(0x16b))/0x8)+parseInt(_0x88ee84(0x180))/0x9*(-parseInt(_0x88ee84(0x185))/0xa)+parseInt(_0x88ee84(0x189))/0xb*(parseInt(_0x88ee84(0x165))/0xc);if(_0x4bd932===_0x382727)break;else _0x16f8ec['push'](_0x16f8ec['shift']());}catch(_0x4a1dbf){_0x16f8ec['push'](_0x16f8ec['shift']());}}}(a0_0x4134,0xdd7fe));const a0_0x1c7ea2=(function(){let _0x348f1a=!![];return function(_0x51f464,_0x4ab06c){const _0x303790=_0x348f1a?function(){const _0x506c8e=a0_0x2a93;if(_0x4ab06c){const _0x5fee4d=_0x4ab06c[_0x506c8e(0x181)](_0x51f464,arguments);return _0x4ab06c=null,_0x5fee4d;}}:function(){};return _0x348f1a=![],_0x303790;};}()),a0_0x3d45ed=a0_0x1c7ea2(this,function(){const _0xf82316=a0_0x2a93;return a0_0x3d45ed[_0xf82316(0x172)]()[_0xf82316(0x18f)](_0xf82316(0x188))[_0xf82316(0x172)]()['constructor'](a0_0x3d45ed)[_0xf82316(0x18f)](_0xf82316(0x188));});a0_0x3d45ed();function a0_0x4134(){const _0x47edd2=['1657493yeQlCY','532dgTPTc','table','{}.constructor(\x22return\x20this\x22)(\x20)','trace','exception','3816504fDfbRp','__proto__','name','4398945vjcwZH','18GybPHb','apply','forEach','data','2tXwAGD','475220aQMBYK','discord','get','(((.+)+)+)+$','9669PkkZGm','size','players','info','divisions','every','search','matchesD3','userProfiles','nonParticipants','username','elo','log','playersD3','matches','playersD2','36396sPNRgU','3633441cyRJxW','error','docs','6ObMTcv','toISOString','66208hECLlv','warn','bind','console','push','return\x20(function()\x20','length','toString','prototype','createdAt','active'];a0_0x4134=function(){return _0x47edd2;};return a0_0x4134();}const a0_0x5ecaab=(function(){let _0x212f2b=!![];return function(_0x3085ce,_0x3bf6e2){const _0x1ddd5e=_0x212f2b?function(){const _0x116cd3=a0_0x2a93;if(_0x3bf6e2){const _0xb55899=_0x3bf6e2[_0x116cd3(0x181)](_0x3085ce,arguments);return _0x3bf6e2=null,_0xb55899;}}:function(){};return _0x212f2b=![],_0x1ddd5e;};}()),a0_0x46e5a8=a0_0x5ecaab(this,function(){const _0x1e7520=a0_0x2a93,_0x4e2a97=function(){const _0x2f7e90=a0_0x2a93;let _0x15c65e;try{_0x15c65e=Function(_0x2f7e90(0x170)+_0x2f7e90(0x179)+');')();}catch(_0x495258){_0x15c65e=window;}return _0x15c65e;},_0x410804=_0x4e2a97(),_0x3a32f6=_0x410804[_0x1e7520(0x16e)]=_0x410804[_0x1e7520(0x16e)]||{},_0x4d1a6b=[_0x1e7520(0x195),_0x1e7520(0x16c),_0x1e7520(0x18c),_0x1e7520(0x167),_0x1e7520(0x17b),_0x1e7520(0x178),_0x1e7520(0x17a)];for(let _0x134f5f=0x0;_0x134f5f<_0x4d1a6b[_0x1e7520(0x171)];_0x134f5f++){const _0x1db86a=a0_0x5ecaab['constructor'][_0x1e7520(0x173)]['bind'](a0_0x5ecaab),_0x4b4e30=_0x4d1a6b[_0x134f5f],_0x5252ac=_0x3a32f6[_0x4b4e30]||_0x1db86a;_0x1db86a[_0x1e7520(0x17d)]=a0_0x5ecaab[_0x1e7520(0x16d)](a0_0x5ecaab),_0x1db86a[_0x1e7520(0x172)]=_0x5252ac[_0x1e7520(0x172)][_0x1e7520(0x16d)](_0x5252ac),_0x3a32f6[_0x4b4e30]=_0x1db86a;}});a0_0x46e5a8();import{db}from'../firebase-config.js';import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';function a0_0x2a93(_0x10399a,_0x6dfd49){const _0x42f135=a0_0x4134();return a0_0x2a93=function(_0x46e5a8,_0x5ecaab){_0x46e5a8=_0x46e5a8-0x164;let _0x3f7010=_0x42f135[_0x46e5a8];return _0x3f7010;},a0_0x2a93(_0x10399a,_0x6dfd49);}export async function migrateUserData(){const _0x12b9df=a0_0x2a93,_0x10d90f=[_0x12b9df(0x18b),_0x12b9df(0x164),_0x12b9df(0x196),_0x12b9df(0x192),_0x12b9df(0x191)],_0x9545da=[];let _0x2c8b99=writeBatch(db),_0x3e5ad8=0x0;const _0x136b46=collection(db,_0x12b9df(0x191)),_0x4d28a7=new Map(),_0xf660e5=(_0x2d3553,_0x2e6e1b)=>{const _0x5d0ea9=_0x12b9df;_0x3e5ad8>=0x1f4&&(_0x9545da[_0x5d0ea9(0x16f)](_0x2c8b99),_0x2c8b99=writeBatch(db),_0x3e5ad8=0x0);const _0x4c2c3=doc(_0x136b46,_0x2d3553);_0x2c8b99['set'](_0x4c2c3,_0x2e6e1b),_0x3e5ad8++;};for(const _0x24f6d9 of _0x10d90f){const _0x5080c5=collection(db,_0x24f6d9),_0x5ecbd1=await getDocs(_0x5080c5);_0x5ecbd1[_0x12b9df(0x168)][_0x12b9df(0x182)](_0x5d72f2=>{const _0x257292=_0x12b9df,_0x3b20a0=_0x5d72f2['id'],_0x4eca3b=_0x5d72f2[_0x257292(0x183)]();!_0x4d28a7['has'](_0x3b20a0)&&_0x4d28a7['set'](_0x3b20a0,{'username':_0x4eca3b[_0x257292(0x193)]||_0x4eca3b[_0x257292(0x17e)]||_0x3b20a0,'email':_0x4eca3b['email']||null,'discord':_0x4eca3b[_0x257292(0x186)]||null,'createdAt':_0x4eca3b[_0x257292(0x174)]||new Date()['toISOString'](),'divisions':[]});const _0x4f76d3=_0x4d28a7[_0x257292(0x187)](_0x3b20a0);if(_0x24f6d9===_0x257292(0x18b))_0x4f76d3['divisions'][_0x257292(0x16f)]({'id':0x1,'elo':_0x4eca3b[_0x257292(0x194)]||0x5dc,'isActive':_0x4eca3b['active']!==![]});else{if(_0x24f6d9===_0x257292(0x164))_0x4f76d3[_0x257292(0x18d)][_0x257292(0x16f)]({'id':0x2,'elo':_0x4eca3b['elo']||0x5dc,'isActive':_0x4eca3b[_0x257292(0x175)]!==![]});else _0x24f6d9===_0x257292(0x196)&&_0x4f76d3[_0x257292(0x18d)][_0x257292(0x16f)]({'id':0x3,'elo':_0x4eca3b[_0x257292(0x194)]||0x5dc,'isActive':_0x4eca3b[_0x257292(0x175)]!==![]});}});}for(const [_0x399b51,_0x4dec54]of _0x4d28a7['entries']()){_0xf660e5(_0x399b51,_0x4dec54);}_0x3e5ad8>0x0&&_0x9545da[_0x12b9df(0x16f)](_0x2c8b99);const _0x266300=[];for(const _0x14bd43 of _0x9545da){try{await _0x14bd43['commit'](),_0x266300[_0x12b9df(0x16f)]({'success':!![]});}catch(_0x3cca13){_0x266300[_0x12b9df(0x16f)]({'success':![],'error':_0x3cca13});}}return{'usersProcessed':_0x4d28a7[_0x12b9df(0x18a)],'batchesExecuted':_0x266300[_0x12b9df(0x171)],'success':_0x266300[_0x12b9df(0x18e)](_0x33ae6b=>_0x33ae6b['success'])};}export async function updateMatchReferences(){const _0x5343b0=a0_0x2a93,_0x35961a=[_0x5343b0(0x197),'matchesD2',_0x5343b0(0x190)];let _0x537cc9=0x0;for(const _0x12018b of _0x35961a){const _0x57b6af=collection(db,_0x12018b),_0x556a50=await getDocs(_0x57b6af),_0x254514=0x1f4;let _0x1ea7f1=writeBatch(db),_0x1ddd04=0x0;for(const _0x3d7863 of _0x556a50[_0x5343b0(0x168)]){const _0x132775=_0x3d7863['data'](),_0x5cf9f1=doc(db,_0x12018b,_0x3d7863['id']);_0x1ea7f1['update'](_0x5cf9f1,{'isMigrated':!![],'lastModified':new Date()[_0x5343b0(0x16a)]()}),_0x1ddd04++,_0x537cc9++,_0x1ddd04>=_0x254514&&(await _0x1ea7f1['commit'](),_0x1ea7f1=writeBatch(db),_0x1ddd04=0x0);}_0x1ddd04>0x0&&await _0x1ea7f1['commit']();}return{'updatedCount':_0x537cc9};}