const a27_0x9df488=a27_0x264f,a27_0x4306c8=(function(){let _0xdeb41a=!![];return function(_0x3e5db1,_0x40b1b6){const _0x42033a=_0xdeb41a?function(){if(_0x40b1b6){const _0x46563f=_0x40b1b6['apply'](_0x3e5db1,arguments);return _0x40b1b6=null,_0x46563f;}}:function(){};return _0xdeb41a=![],_0x42033a;};}()),a27_0x15654b=a27_0x4306c8(this,function(){const _0x402d2d=a27_0x264f,_0x188eaf=function(){const _0x15f8a5=a27_0x264f;let _0x43c41c;try{_0x43c41c=Function(_0x15f8a5(0xfc)+_0x15f8a5(0xd1)+');')();}catch(_0x1aa9ab){_0x43c41c=window;}return _0x43c41c;},_0x4a6726=_0x188eaf(),_0x154416=_0x4a6726[_0x402d2d(0xae)]=_0x4a6726[_0x402d2d(0xae)]||{},_0x8f948=[_0x402d2d(0xd2),'warn','info','error',_0x402d2d(0xf7),_0x402d2d(0x112),'trace'];for(let _0x4faaa1=0x0;_0x4faaa1<_0x8f948[_0x402d2d(0xcc)];_0x4faaa1++){const _0x2c4841=a27_0x4306c8['constructor']['prototype']['bind'](a27_0x4306c8),_0x403f47=_0x8f948[_0x4faaa1],_0x34b0d4=_0x154416[_0x403f47]||_0x2c4841;_0x2c4841['__proto__']=a27_0x4306c8['bind'](a27_0x4306c8),_0x2c4841['toString']=_0x34b0d4['toString']['bind'](_0x34b0d4),_0x154416[_0x403f47]=_0x2c4841;}});a27_0x15654b();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x245d20=0x1){const _0x28b81f=a27_0x264f;try{document[_0x28b81f(0xe4)](_0x28b81f(0xb6))['style'][_0x28b81f(0xb1)]='block';const _0xb46493=await getLadderData(_0x245d20);_0xb46493['sort']((_0x2673e1,_0x461969)=>_0x461969['elo']-_0x2673e1['elo']);const _0x5a512f=_0xb46493[_0x28b81f(0xb7)](_0x4bd91b=>_0x4bd91b['id']),_0x3dc49c=await getEloHistoryBatch(_0x5a512f,_0x245d20),_0xac7515=_0xb46493['map']((_0x4b7894,_0x390ac0)=>{const _0x2a06e5=_0x28b81f,_0xf42bac=_0x3dc49c[_0x4b7894['id']]||[],_0x155ad5=_0xf42bac[_0x2a06e5(0xf5)]((_0x4dd9bb,_0x30e621)=>new Date(_0x30e621['date'])-new Date(_0x4dd9bb['date']))['slice'](0x0,0x5);return{..._0x4b7894,'rank':_0x390ac0+0x1,'lastMatches':_0x155ad5,'recentActivity':_0x155ad5['length']>0x0};});renderLadder(_0xac7515),setupRealTimeUpdates(_0x245d20);}catch(_0x4e2cdc){console[_0x28b81f(0xb3)]('Error\x20loading\x20ladder\x20data:',_0x4e2cdc),document['getElementById']('error-message')[_0x28b81f(0xc0)]=_0x28b81f(0xce);}finally{document['getElementById']('loading-indicator')['style']['display']='none';}}function a27_0x34c2(){const _0x2edede=['d1-ladder-container','d3-ladder-container','eloRating','style','label[for=\x22duos-switch\x22]','(Equipped)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','newElo','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','rank','Active','\x20(equipped:\x20','elo-recommendation-text-d3','includes','click','set','previousElo','D3\x20toggle\x20clicked','winRate','<img\x20src=\x22','Silver','console','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','ladder-player','display','data','error','fontWeight','Error\x20checking\x20','loading-indicator','map','setDate','matchesD','elo-recommendation-text-duos','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','cursor','d1-switch','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','tokenName','innerText','DOMContentLoaded','active','hasTeam','totalDeaths','elo-recommendation-text-d1','totalKills','#ladder\x20tbody','remove','block','duos','get','length','classList','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','playersDuos','{}.constructor(\x22return\x20this\x22)(\x20)','log','.trend-indicator','toLowerCase','country','role','</span>.\x20Challenge\x20other\x20teams!','currentUser','d2-ladder-container','innerHTML','owner','change','admin-only-message','catch','Error\x20fetching\x20tokens:','abs','bold','position','has','getElementById','#50C878','textContent','</span>','#CD7F32','userProfiles','admin@ladder.com','round','You\x27re\x20not\x20registered\x20on\x20the\x20','equipped','add','addEventListener','forEach','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','none','#C0C0C0','timestamp','sort','d3-switch','exception','docs','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','oldEloRating','playersD2','return\x20(function()\x20','desc','playerUsername','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','then','div','querySelector','loserScore','appendChild','recentActivity','username','size','brian2af@outlook.com','#FFD700','wins','totalMatches','elo-recommendation-text-d2','find','toFixed','\x20not\x20found','playersD3','players','table'];a27_0x34c2=function(){return _0x2edede;};return a27_0x34c2();}function setupRealTimeUpdates(_0x323626=0x1){const _0x1d5997=a27_0x264f;activeListeners[_0x1d5997(0xf0)](_0xd4f7a8=>_0xd4f7a8()),activeListeners=[];const _0x114373=_0x323626===0x1?'players':'playersD'+_0x323626,_0x298a0f=_0x323626===0x1?'matches':_0x1d5997(0xb9)+_0x323626,_0xaff316=new Date();_0xaff316[_0x1d5997(0xb8)](_0xaff316['getDate']()-0x1);const _0x55e8ba=setupEfficientListener(_0x298a0f,[where('date','>=',_0xaff316['toISOString']()),limit(0xa),orderBy('date',_0x1d5997(0xfd))],async _0x29bcd5=>{_0x29bcd5['length']>0x0&&await loadLadderData(_0x323626);});activeListeners['push'](_0x55e8ba);}export function cleanupListeners(){activeListeners['forEach'](_0x5dc5c7=>_0x5dc5c7()),activeListeners=[];}function renderLadder(_0x1da3f0){const _0x12fe86=a27_0x264f,_0x1bd6a0=document[_0x12fe86(0xe4)]('ladder-container');_0x1bd6a0['innerHTML']='',_0x1da3f0['forEach'](_0x15af48=>{const _0x326e01=_0x12fe86,_0x32b419=document['createElement']('div');_0x32b419['className']=_0x326e01(0xb0),_0x32b419[_0x326e01(0xda)]='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x15af48[_0x326e01(0xa2)]+_0x326e01(0xcf)+(_0x15af48['username']||_0x15af48['id'])+_0x326e01(0xbe)+_0x15af48['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x15af48[_0x326e01(0x105)]?_0x326e01(0xc2):'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x15af48[_0x326e01(0x105)]?_0x326e01(0xa3):'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x1bd6a0[_0x326e01(0x104)](_0x32b419);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;function a27_0x264f(_0x30554b,_0x44befb){const _0x15654b=a27_0x34c2();return a27_0x264f=function(_0x4306c8,_0x47be8e){_0x4306c8=_0x4306c8-0x97;let _0x34c279=_0x15654b[_0x4306c8];return _0x34c279;},a27_0x264f(_0x30554b,_0x44befb);}async function displayLadder(_0x1b6a0e=![]){const _0x317eae=a27_0x264f,_0x3beeb5=document[_0x317eae(0x102)](_0x317eae(0xc7));if(!_0x3beeb5){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x3beeb5[_0x317eae(0xda)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x153eca=Date['now']();if(!_0x1b6a0e&&playerCache[_0x317eae(0xb2)]&&_0x153eca-playerCache[_0x317eae(0xf4)]<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x78b55a=collection(db,_0x317eae(0x111)),_0x3e8da5=await getDocs(_0x78b55a),_0x39bab3=[];_0x3e8da5[_0x317eae(0xf0)](_0x3198c5=>{const _0x59cc55=_0x317eae,_0x2b6654=_0x3198c5[_0x59cc55(0xb2)]();_0x39bab3['push']({..._0x2b6654,'id':_0x3198c5['id'],'elo':_0x2b6654['eloRating']||0x0,'position':_0x2b6654['position']||Number['MAX_SAFE_INTEGER']});});const _0x5d65d6=collection(db,_0x317eae(0xe9)),_0x5508b9=await getDocs(_0x5d65d6),_0xd397f5=new Map();_0x5508b9['forEach'](_0x1ce90e=>{const _0x4a1055=_0x1ce90e['data']();_0x4a1055['username']&&_0xd397f5['set'](_0x4a1055['username']['toLowerCase'](),_0x4a1055);}),_0x39bab3[_0x317eae(0xf0)](_0x565df9=>{const _0xf3e0e1=_0x317eae,_0x5f1249=_0x565df9['username']?.['toLowerCase']();if(_0x5f1249&&_0xd397f5[_0xf3e0e1(0xe3)](_0x5f1249)){const _0x581dcb=_0xd397f5['get'](_0x5f1249);_0x581dcb['country']&&(_0x565df9[_0xf3e0e1(0xd5)]=_0x581dcb[_0xf3e0e1(0xd5)]['toLowerCase']());}});const _0x3cccd3=_0x39bab3['map'](_0x661fa4=>_0x661fa4['username']),_0xa92371=await fetchBatchMatchStats(_0x3cccd3);_0x39bab3['sort']((_0x191200,_0x4df71b)=>{const _0x380312=_0x317eae,_0x2f3941=_0xa92371['get'](_0x191200['username'])?.['totalMatches']||0x0,_0x2e6778=_0xa92371['get'](_0x4df71b['username'])?.['totalMatches']||0x0;if(_0x2f3941===0x0!==(_0x2e6778===0x0))return _0x2f3941===0x0?0x1:-0x1;return(_0x191200[_0x380312(0xe2)]||0x3e7)-(_0x4df71b[_0x380312(0xe2)]||0x3e7);}),_0x39bab3['forEach']((_0x593414,_0x46ef92)=>{const _0xabbfa7=_0x317eae;_0x593414[_0xabbfa7(0xe2)]=_0x46ef92+0x1;}),playerCache[_0x317eae(0xb2)]=_0x39bab3,playerCache['timestamp']=_0x153eca,updateLadderDisplay(_0x39bab3,_0xa92371);}catch(_0x202017){console['error']('Error\x20loading\x20ladder:',_0x202017),_0x3beeb5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x202017['message']+_0x317eae(0x9f);}}async function fetchBatchMatchStats(_0x21d04e){const _0x1094e9=a27_0x264f,_0x3d771e=new Map();try{_0x21d04e['forEach'](_0x572b5e=>{_0x3d771e['set'](_0x572b5e,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x17fbf9=collection(db,'approvedMatches'),_0x254487=await getDocs(_0x17fbf9);_0x254487['forEach'](_0xb99440=>{const _0x1abd69=a27_0x264f,_0x30f46f=_0xb99440['data'](),_0x487ee5=_0x30f46f['winnerUsername'],_0x43e1d5=_0x30f46f['loserUsername'];if(_0x21d04e['includes'](_0x487ee5)){const _0x26716a=_0x3d771e[_0x1abd69(0xcb)](_0x487ee5);_0x26716a[_0x1abd69(0x10a)]++,_0x26716a['totalMatches']++,_0x26716a[_0x1abd69(0xc6)]+=parseInt(_0x30f46f['winnerScore'])||0x0,_0x26716a['totalDeaths']+=parseInt(_0x30f46f[_0x1abd69(0x103)])||0x0;}if(_0x21d04e[_0x1abd69(0xa6)](_0x43e1d5)){const _0x14c5dc=_0x3d771e['get'](_0x43e1d5);_0x14c5dc['losses']++,_0x14c5dc['totalMatches']++,_0x14c5dc['totalKills']+=parseInt(_0x30f46f['loserScore'])||0x0,_0x14c5dc['totalDeaths']+=parseInt(_0x30f46f['winnerScore'])||0x0;}}),_0x21d04e['forEach'](_0x42c39c=>{const _0x3ca1a9=a27_0x264f,_0x2f7666=_0x3d771e[_0x3ca1a9(0xcb)](_0x42c39c);_0x2f7666['kda']=_0x2f7666['totalDeaths']>0x0?(_0x2f7666['totalKills']/_0x2f7666[_0x3ca1a9(0xc4)])['toFixed'](0x2):_0x2f7666['totalKills'][_0x3ca1a9(0x10e)](0x2),_0x2f7666['winRate']=_0x2f7666['totalMatches']>0x0?(_0x2f7666['wins']/_0x2f7666[_0x3ca1a9(0x10b)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x14a55f){console[_0x1094e9(0xb3)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x14a55f);}return _0x3d771e;}function createPlayerRow(_0x2e623e,_0x638bae){const _0x53868c=a27_0x264f,_0x5badba=parseFloat(_0x2e623e['elo'])||0x0;let _0x93f02='gray';if(_0x5badba>=0x7d0)_0x93f02=_0x53868c(0xe5);else{if(_0x5badba>=0x708)_0x93f02=_0x53868c(0x109);else{if(_0x5badba>=0x640)_0x93f02='#b9f1fc';else _0x5badba>=0x578&&(_0x93f02=_0x53868c(0xe8));}}let _0x127a9f='';return _0x2e623e[_0x53868c(0xd5)]&&(_0x127a9f='<img\x20src=\x22../images/flags/'+_0x2e623e['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2e623e['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2e623e['position']+_0x53868c(0xf1)+encodeURIComponent(_0x2e623e['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x93f02+_0x53868c(0x9e)+_0x2e623e[_0x53868c(0x106)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x127a9f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x93f02+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x5badba+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x638bae['totalMatches']+_0x53868c(0xff)+_0x638bae['wins']+_0x53868c(0xff)+_0x638bae['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x638bae['kda']+_0x53868c(0xff)+_0x638bae[_0x53868c(0xab)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x4cc086){const _0x6c0a08=a27_0x264f;if(_0x4cc086>=0x7d0)return'Emerald';if(_0x4cc086>=0x708)return'Gold';if(_0x4cc086>=0x640)return _0x6c0a08(0xad);if(_0x4cc086>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x45fdd5){const _0x2019b2=a27_0x264f,_0x32f70f=new Map();_0x45fdd5['forEach'](_0x564868=>{const _0x8c1063=a27_0x264f;_0x32f70f[_0x8c1063(0xa8)](_0x564868,0x0);});try{const _0x28ea8c=collection(db,'players'),_0x58093c=await getDocs(_0x28ea8c),_0x4145df=new Map(),_0x2f0731=new Map();_0x58093c['forEach'](_0x21a6bd=>{const _0x58edef=a27_0x264f,_0x356ed4=_0x21a6bd[_0x58edef(0xb2)]();_0x356ed4['username']&&(_0x4145df['set'](_0x21a6bd['id'],_0x356ed4[_0x58edef(0x106)]),_0x2f0731['set'](_0x356ed4['username']['toLowerCase'](),_0x21a6bd['id']));});const _0xa20845=collection(db,'eloHistory'),_0x4554ef=query(_0xa20845,orderBy(_0x2019b2(0xf4),_0x2019b2(0xfd)),limit(0x12c)),_0x16fd05=await getDocs(_0x4554ef);if(_0x16fd05['empty'])return console[_0x2019b2(0xd2)]('ELO\x20history\x20collection\x20is\x20empty'),_0x32f70f;if(_0x16fd05['docs'][_0x2019b2(0xcc)]>0x0){const _0x5a5b47=_0x16fd05['docs'][0x0]['data']();if(_0x5a5b47['player']&&_0x4145df['has'](_0x5a5b47['player'])){}}const _0x4971a5=new Map();let _0x22c647=0x0;_0x16fd05['forEach'](_0x2c6301=>{const _0x1f8435=_0x2019b2,_0x1f9df7=_0x2c6301[_0x1f8435(0xb2)]();let _0xc964cb=null;if(_0x1f9df7['player']&&_0x4145df[_0x1f8435(0xe3)](_0x1f9df7['player']))_0xc964cb=_0x4145df['get'](_0x1f9df7['player']);else{if(_0x1f9df7['username']&&_0x2f0731['has'](_0x1f9df7['username']['toLowerCase']()))_0xc964cb=_0x1f9df7[_0x1f8435(0x106)];else _0x1f9df7['playerUsername']&&_0x2f0731['has'](_0x1f9df7['playerUsername'][_0x1f8435(0xd4)]())&&(_0xc964cb=_0x1f9df7[_0x1f8435(0xfe)]);}_0xc964cb&&_0x45fdd5[_0x1f8435(0xa6)](_0xc964cb)&&(_0x22c647++,!_0x4971a5[_0x1f8435(0xe3)](_0xc964cb)&&_0x4971a5['set'](_0xc964cb,[]),_0x4971a5['get'](_0xc964cb)['push']({..._0x1f9df7,'timestamp':_0x1f9df7['timestamp']?.['seconds']||0x0}));}),_0x4971a5['forEach']((_0x6d5d1,_0x13621f)=>{const _0x31b07d=_0x2019b2;if(_0x6d5d1['length']>0x0){_0x6d5d1['sort']((_0x1189cf,_0x3f3c5)=>_0x3f3c5['timestamp']-_0x1189cf['timestamp']);const _0x478aa0=_0x6d5d1[_0x31b07d(0x10d)](_0x3aabf2=>_0x3aabf2[_0x31b07d(0xdc)]!==undefined||_0x3aabf2[_0x31b07d(0xa0)]!==undefined&&_0x3aabf2[_0x31b07d(0xa9)]!==undefined||_0x3aabf2['newEloRating']!==undefined&&_0x3aabf2[_0x31b07d(0xfa)]!==undefined);if(_0x478aa0){let _0x16935c;if(_0x478aa0[_0x31b07d(0xdc)]!==undefined)_0x16935c=parseInt(_0x478aa0['change']);else{if(_0x478aa0['newElo']!==undefined&&entry['previousElo']!==undefined)_0x16935c=parseInt(_0x478aa0[_0x31b07d(0xa0)])-parseInt(_0x478aa0['previousElo']);else _0x478aa0['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x16935c=parseInt(_0x478aa0['newEloRating'])-parseInt(_0x478aa0[_0x31b07d(0xfa)]));}!isNaN(_0x16935c)&&_0x16935c!==0x0&&_0x32f70f[_0x31b07d(0xa8)](_0x13621f,_0x16935c);}}});}catch(_0x236502){console[_0x2019b2(0xb3)]('Error\x20fetching\x20ELO\x20history:',_0x236502);}return _0x32f70f;}function createPlayerRowWithToken(_0x1b7d6a,_0x1dae7b,_0x2bc2f6){const _0xfe7466=a27_0x264f,_0x4abf77=parseFloat(_0x1b7d6a['elo'])||0x0;let _0x12d789='gray';if(_0x4abf77>=0x7d0)_0x12d789=_0xfe7466(0xe5);else{if(_0x4abf77>=0x708)_0x12d789='#FFD700';else{if(_0x4abf77>=0x640)_0x12d789='#b9f1fc';else _0x4abf77>=0x578&&(_0x12d789=_0xfe7466(0xe8));}}let _0xa9a67f='';_0x1b7d6a['country']&&(_0xa9a67f='<img\x20src=\x22../images/flags/'+_0x1b7d6a['country'][_0xfe7466(0xd4)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1b7d6a[_0xfe7466(0xd5)]+_0xfe7466(0xf9));let _0x2b0bff='';return _0x2bc2f6&&(_0x2b0bff=_0xfe7466(0xac)+_0x2bc2f6['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2bc2f6['tokenName']+_0xfe7466(0xa1)+_0x2bc2f6['tokenName']+'\x20'+(_0x2bc2f6['equipped']?_0xfe7466(0x9c):'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),_0xfe7466(0xaf)+_0x1b7d6a['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x1b7d6a['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x12d789+_0xfe7466(0x9e)+_0x1b7d6a[_0xfe7466(0x106)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xa9a67f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2b0bff+_0xfe7466(0xbb)+_0x12d789+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x4abf77+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1dae7b['totalMatches']+_0xfe7466(0xff)+_0x1dae7b['wins']+_0xfe7466(0xff)+_0x1dae7b['losses']+_0xfe7466(0xff)+_0x1dae7b['kda']+_0xfe7466(0xff)+_0x1dae7b['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x1c2ae9,_0x5d345c=null){const _0x1c2c01=a27_0x264f,_0xa0fd7=document['querySelector']('#ladder\x20tbody');if(!_0xa0fd7){console[_0x1c2c01(0xb3)]('Ladder\x20table\x20body\x20not\x20found');return;}const _0x2028d7=document['querySelector']('#ladder\x20thead\x20tr');_0x2028d7&&(_0x2028d7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x531f0e=_0x1c2ae9['map'](_0x4c72c5=>_0x4c72c5['username']);!_0x5d345c&&(_0x5d345c=await fetchBatchMatchStats(_0x531f0e));let _0x57d87c=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x57d87c=await getTokensByUsernames(_0x531f0e),console[_0x1c2c01(0xd2)]('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x57d87c[_0x1c2c01(0x107)],'players'),_0x57d87c['forEach']((_0x216f59,_0x37dd75)=>{const _0x286063=_0x1c2c01,_0x328ad0=_0x216f59[_0x286063(0x10d)](_0x3f711c=>_0x3f711c[_0x286063(0xed)]);_0x328ad0&&console[_0x286063(0xd2)]('ðŸŽ¯\x20'+_0x37dd75+'\x20has\x20equipped:\x20'+_0x328ad0[_0x286063(0xbf)]);});}catch(_0x292553){console['error'](_0x1c2c01(0xdf),_0x292553);}const _0x3a1167=_0x1c2ae9['map'](_0x32c10e=>{const _0x38cf21=_0x1c2c01,_0x3062eb=_0x5d345c['get'](_0x32c10e['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x2ee982=_0x57d87c[_0x38cf21(0xcb)](_0x32c10e[_0x38cf21(0x106)])||[],_0x37ba95=getPrimaryDisplayToken(_0x2ee982);return _0x37ba95&&console['log']('ðŸŽ¨\x20'+_0x32c10e['username']+'\x20displaying\x20token:\x20'+_0x37ba95[_0x38cf21(0xbf)]+_0x38cf21(0xa4)+_0x37ba95[_0x38cf21(0xed)]+')'),createPlayerRowWithToken(_0x32c10e,_0x3062eb,_0x37ba95);})['join']('');_0xa0fd7['innerHTML']=_0x3a1167,getPlayersLastEloChanges(_0x531f0e)[_0x1c2c01(0x100)](_0x1c4914=>{const _0x25ed92=new Map();_0xa0fd7['querySelectorAll']('tr')['forEach']((_0x24f06d,_0x502f63)=>{_0x502f63<_0x531f0e['length']&&_0x25ed92['set'](_0x531f0e[_0x502f63],_0x24f06d);}),_0x1c4914['forEach']((_0x3028e0,_0x50762a)=>{const _0x6387f7=a27_0x264f,_0x543404=_0x25ed92['get'](_0x50762a);if(_0x543404&&_0x3028e0!==0x0){const _0xcf27c4=_0x543404[_0x6387f7(0x102)]('td:nth-child(3)');if(_0xcf27c4){const _0x8598cc=_0x3028e0>0x0?'+'+_0x3028e0:''+_0x3028e0,_0x26b89b=_0xcf27c4['querySelector'](_0x6387f7(0xd3));_0x26b89b&&(_0x26b89b['textContent']=_0x8598cc,_0x26b89b['style']['color']=_0x3028e0>0x0?'#4CAF50':'#F44336',_0x26b89b[_0x6387f7(0x9a)][_0x6387f7(0xb4)]=_0x6387f7(0xe1),_0x26b89b['style']['fontSize']='0.85em',_0x26b89b['style']['display']='inline',_0x26b89b['style']['visibility']='visible',_0x26b89b['style']['opacity']='1');}}});})[_0x1c2c01(0xde)](_0x5ef8b6=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x5ef8b6));}function initLadderToggles(){const _0x417560=a27_0x264f,_0x3e9180=document['getElementById'](_0x417560(0xbd)),_0x44e1a3=document[_0x417560(0xe4)]('d2-switch'),_0x11f27d=document['getElementById'](_0x417560(0xf6)),_0x50bc04=document[_0x417560(0xe4)]('duos-switch'),_0x4c069f=document[_0x417560(0xe4)](_0x417560(0x97)),_0x700ca8=document['getElementById'](_0x417560(0xd9)),_0x545836=document['getElementById']('d3-ladder-container'),_0x2f45db=document['getElementById']('duos-ladder-container');function _0x4b2f08(){const _0x14d11c=_0x417560;if(_0x4c069f)_0x4c069f[_0x14d11c(0xcd)][_0x14d11c(0xc8)]('active');if(_0x700ca8)_0x700ca8['classList']['remove']('active');if(_0x545836)_0x545836[_0x14d11c(0xcd)]['remove']('active');if(_0x2f45db)_0x2f45db['style']['display']=_0x14d11c(0xf2);if(_0x4c069f)_0x4c069f['style'][_0x14d11c(0xb1)]='none';if(_0x700ca8)_0x700ca8['style'][_0x14d11c(0xb1)]='none';if(_0x545836)_0x545836[_0x14d11c(0x9a)][_0x14d11c(0xb1)]=_0x14d11c(0xf2);}_0x3e9180&&_0x3e9180[_0x417560(0xef)]('click',()=>{const _0xaa1649=_0x417560;console['log']('D1\x20toggle\x20clicked'),_0x4b2f08();_0x4c069f&&(_0x4c069f[_0xaa1649(0xcd)][_0xaa1649(0xee)]('active'),_0x4c069f['style'][_0xaa1649(0xb1)]='block');document[_0xaa1649(0xe4)](_0xaa1649(0xc5))['style']['display']='block',document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')[_0xaa1649(0x9a)]['display']='none';if(_0x3e9180)_0x3e9180[_0xaa1649(0xcd)]['add'](_0xaa1649(0xc2));if(_0x44e1a3)_0x44e1a3['classList'][_0xaa1649(0xc8)]('active');if(_0x11f27d)_0x11f27d['classList']['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x44e1a3&&_0x44e1a3[_0x417560(0xef)]('click',()=>{const _0x14f3c7=_0x417560;console[_0x14f3c7(0xd2)]('D2\x20toggle\x20clicked'),_0x4b2f08();_0x700ca8&&(_0x700ca8[_0x14f3c7(0xcd)]['add']('active'),_0x700ca8['style']['display']='block');document[_0x14f3c7(0xe4)]('elo-recommendation-text-d1')[_0x14f3c7(0x9a)]['display']=_0x14f3c7(0xf2),document[_0x14f3c7(0xe4)]('elo-recommendation-text-d2')['style']['display']='block',document[_0x14f3c7(0xe4)]('elo-recommendation-text-d3')[_0x14f3c7(0x9a)]['display']='none';if(_0x44e1a3)_0x44e1a3['classList'][_0x14f3c7(0xee)]('active');if(_0x3e9180)_0x3e9180['classList']['remove'](_0x14f3c7(0xc2));if(_0x11f27d)_0x11f27d['classList'][_0x14f3c7(0xc8)]('active');displayLadderD2(),findBestOpponent('d2');}),_0x11f27d&&_0x11f27d[_0x417560(0xef)](_0x417560(0xa7),()=>{const _0x4e1a46=_0x417560;console[_0x4e1a46(0xd2)](_0x4e1a46(0xaa)),_0x4b2f08();_0x545836&&(_0x545836['classList']['add']('active'),_0x545836['style']['display']='block');document[_0x4e1a46(0xe4)](_0x4e1a46(0xc5))['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')[_0x4e1a46(0x9a)][_0x4e1a46(0xb1)]='none',document['getElementById']('elo-recommendation-text-d3')[_0x4e1a46(0x9a)]['display']=_0x4e1a46(0xc9);if(_0x11f27d)_0x11f27d[_0x4e1a46(0xcd)][_0x4e1a46(0xee)](_0x4e1a46(0xc2));if(_0x3e9180)_0x3e9180[_0x4e1a46(0xcd)]['remove']('active');if(_0x44e1a3)_0x44e1a3[_0x4e1a46(0xcd)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x50bc04&&_0x50bc04['addEventListener']('click',()=>{const _0x569619=_0x417560;_0x4b2f08();if(_0x2f45db)_0x2f45db['style'][_0x569619(0xb1)]='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById'](_0x569619(0xba))[_0x569619(0x9a)]['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x569619(0x10c))[_0x569619(0x9a)][_0x569619(0xb1)]='none',document['getElementById'](_0x569619(0xa5))['style']['display']='none';});}document[a27_0x9df488(0xef)](a27_0x9df488(0xc1),()=>{const _0x6eba61=a27_0x9df488;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x6eba61(0xc5))['style']['display']=_0x6eba61(0xc9);});export{displayLadder};async function findBestOpponent(_0x1cf1b8='d1'){const _0x3e60b9=a27_0x9df488,_0x4b9ada='elo-recommendation-text-'+_0x1cf1b8,_0x52beb2=document[_0x3e60b9(0xe4)](_0x4b9ada);if(!_0x52beb2){console['error']('Recommendation\x20element\x20for\x20'+_0x1cf1b8+_0x3e60b9(0x10f));return;}const _0x455f0f=auth[_0x3e60b9(0xd8)];if(!_0x455f0f){_0x52beb2['textContent']='';return;}try{const _0x5380db=doc(db,'userProfiles',_0x455f0f['uid']),_0x1a1cae=await getDoc(_0x5380db);if(!_0x1a1cae['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x52beb2['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x1aa954=_0x1a1cae['data'](),_0x1dc8e2=_0x1aa954[_0x3e60b9(0x106)];if(!_0x1dc8e2){_0x52beb2['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x1c00cb;switch(_0x1cf1b8){case'd1':_0x1c00cb='players';break;case'd2':_0x1c00cb=_0x3e60b9(0xfb);break;case'd3':_0x1c00cb='playersD3';break;case'duos':_0x1c00cb=_0x3e60b9(0xd0);break;default:_0x1c00cb='players';}if(_0x1cf1b8==='duos'){const _0x2dda2f=collection(db,_0x1c00cb),_0x323a17=query(_0x2dda2f,where('username','==',_0x1dc8e2)),_0x589df6=await getDocs(_0x323a17);if(_0x589df6['empty']){_0x52beb2['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x2fe72c=_0x589df6['docs'][0x0]['data'](),_0x178037=parseInt(_0x2fe72c[_0x3e60b9(0x99)])||0x4b0;if(_0x2fe72c[_0x3e60b9(0xc3)]&&_0x2fe72c['teammate']){_0x52beb2[_0x3e60b9(0xda)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x2fe72c['teammate']+_0x3e60b9(0xd7);return;}const _0x23cb9a=await getDocs(_0x2dda2f);let _0x1445fb=null,_0x166ad8=-0x1;_0x23cb9a[_0x3e60b9(0xf0)](_0x21aab7=>{const _0x2d986d=_0x3e60b9,_0x14ebcf=_0x21aab7[_0x2d986d(0xb2)]();if(_0x14ebcf[_0x2d986d(0x106)]===_0x1dc8e2)return;if(_0x14ebcf[_0x2d986d(0xc3)])return;const _0x5ab059=parseInt(_0x14ebcf[_0x2d986d(0x99)])||0x4b0,_0x3f763b=Math[_0x2d986d(0xe0)](_0x5ab059-_0x178037),_0x210c6d=Math['max'](0x0,0xc8-_0x3f763b);_0x210c6d>_0x166ad8&&(_0x1445fb=_0x14ebcf,_0x166ad8=_0x210c6d);});if(_0x1445fb){const _0x1cef75=parseInt(_0x1445fb['eloRating'])||0x4b0;let _0x38eef0='gray';if(_0x1cef75>=0x7d0)_0x38eef0='#50C878';else{if(_0x1cef75>=0x708)_0x38eef0='#FFD700';else{if(_0x1cef75>=0x640)_0x38eef0=_0x3e60b9(0xf3);else _0x1cef75>=0x578&&(_0x38eef0=_0x3e60b9(0xe8));}}_0x52beb2[_0x3e60b9(0xda)]='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x38eef0+';\x22>'+_0x1445fb[_0x3e60b9(0x106)]+'</span>\x20(ELO:\x20'+_0x1cef75+')';}else _0x52beb2[_0x3e60b9(0xe6)]='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x36af75=collection(db,_0x1c00cb),_0x1e3932=query(_0x36af75,where(_0x3e60b9(0x106),'==',_0x1dc8e2)),_0x2f58c3=await getDocs(_0x1e3932);if(_0x2f58c3['empty']){_0x52beb2['textContent']=_0x3e60b9(0xec)+_0x1cf1b8['toUpperCase']()+'\x20ladder';return;}const _0x323f52=_0x2f58c3[_0x3e60b9(0xf8)][0x0]['data'](),_0xa8984d=parseInt(_0x323f52['eloRating'])||0x5dc,_0x9984fd=await getDocs(_0x36af75);let _0x35a021=null,_0x5c1d99=-0x1;const _0x54c3da=getPlayerRankName(_0xa8984d);_0x9984fd['forEach'](_0x6281f=>{const _0x3a014a=_0x3e60b9,_0x4ebbbc=_0x6281f['data']();if(_0x4ebbbc['username']===_0x1dc8e2)return;const _0x439f5e=parseInt(_0x4ebbbc['eloRating'])||0x5dc,_0x5649c6=getPlayerRankName(_0x439f5e),_0x4906ce=Math['abs'](_0x439f5e-_0xa8984d),_0x2d98a5=0x20,_0x3a22f8=0x1/(0x1+Math['pow'](0xa,(_0x439f5e-_0xa8984d)/0x190)),_0x4e9f12=Math[_0x3a014a(0xeb)](_0x2d98a5*(0x1-_0x3a22f8));if(_0x4e9f12<=0x0)return;let _0x33032c=0x0;const _0x58cb6f=Math['max'](0x0,0x64-_0x4906ce*0.5),_0x3f1e62=_0x4e9f12>=0x3&&_0x4e9f12<=0x8?0x32:_0x4e9f12>0x0&&_0x4e9f12<0xf?0x1e:0xa,_0x297ae7=_0x54c3da===_0x5649c6?0x28:0x0;_0x33032c=_0x58cb6f+_0x3f1e62+_0x297ae7,_0x33032c>_0x5c1d99&&(_0x35a021=_0x4ebbbc,_0x5c1d99=_0x33032c);});if(_0x35a021){const _0x1b6e8c=parseInt(_0x35a021['eloRating'])||0x5dc;let _0x135f7d='gray';if(_0x1b6e8c>=0x7d0)_0x135f7d='#50C878';else{if(_0x1b6e8c>=0x708)_0x135f7d='#FFD700';else{if(_0x1b6e8c>=0x640)_0x135f7d='#b9f1fc';else _0x1b6e8c>=0x578&&(_0x135f7d='#CD7F32');}}_0x52beb2[_0x3e60b9(0xda)]='Based\x20on\x20your\x20ELO\x20('+_0xa8984d+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x135f7d+';\x22>'+_0x35a021['username']+_0x3e60b9(0xe7);}else _0x52beb2[_0x3e60b9(0xda)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0xa8984d+')';}catch(_0x418ab1){console[_0x3e60b9(0xb3)]('Error\x20finding\x20best\x20opponent:',_0x418ab1),_0x52beb2[_0x3e60b9(0xe6)]='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x4d9f50=>{const _0x17a802=a27_0x9df488,_0x3b7623=document[_0x17a802(0xe4)]('d1-ladder-container')&&document['getElementById'](_0x17a802(0x97))['style'][_0x17a802(0xb1)]!=='none',_0x1b35d6=document['getElementById']('d2-ladder-container')&&document['getElementById']('d2-ladder-container')['style']['display']!=='none',_0x1fd864=document['getElementById'](_0x17a802(0x98))&&document[_0x17a802(0xe4)](_0x17a802(0x98))['style']['display']!=='none',_0x3662d0=document['getElementById']('duos-ladder-container')&&document[_0x17a802(0xe4)]('duos-ladder-container')['style'][_0x17a802(0xb1)]!==_0x17a802(0xf2),_0x2ea1a0=_0x3b7623?'d1':_0x1b35d6?'d2':_0x1fd864?'d3':_0x3662d0?_0x17a802(0xca):'d1';findBestOpponent(_0x2ea1a0);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x56f752=a27_0x9df488,_0xae0da4=document[_0x56f752(0xe4)]('duos-switch'),_0x4cfae7=document[_0x56f752(0x102)](_0x56f752(0x9b));_0xae0da4&&_0x4cfae7&&(_0xae0da4['addEventListener'](_0x56f752(0xdc),async _0x463b7d=>{const _0x2e3097=_0x56f752;if(_0x463b7d['target']['checked']){const _0x41b189=auth?.['currentUser'],_0x1122d6=await checkIfUserIsAdmin(_0x41b189);if(!_0x1122d6){_0x463b7d['preventDefault']();const _0x50c7fa=document['getElementById']('d1-switch');return _0x50c7fa&&(_0x50c7fa['checked']=!![],_0x50c7fa['dispatchEvent'](new Event(_0x2e3097(0xdc)))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x3bcc7b=>{const _0xb69d3f=_0x56f752,_0x2f9e08=await checkIfUserIsAdmin(_0x3bcc7b);!_0x2f9e08?(_0xae0da4['disabled']=!![],_0x4cfae7[_0xb69d3f(0x9a)]['opacity']='0.5',_0x4cfae7['style']['cursor']='not-allowed',_0x4cfae7['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0xae0da4['disabled']=![],_0x4cfae7['style']['opacity']='1',_0x4cfae7['style'][_0xb69d3f(0xbc)]='pointer',_0x4cfae7['title']='');}));});async function checkIfUserIsAdmin(_0x526d31){const _0x3d3976=a27_0x9df488;if(!_0x526d31)return![];try{const _0x1752bf=[_0x3d3976(0xea),_0x3d3976(0x108)];if(_0x526d31['email']&&_0x1752bf['includes'](_0x526d31['email']['toLowerCase']()))return!![];const _0x1e6237=['userProfiles',_0x3d3976(0x111),_0x3d3976(0xfb),_0x3d3976(0x110)],_0x14f115=['admin',_0x3d3976(0xdb),'council','creative\x20lead'];for(const _0x97f6d8 of _0x1e6237){try{const _0x1b7d03=doc(db,_0x97f6d8,_0x526d31['uid']),_0x2d0d73=await getDoc(_0x1b7d03);if(_0x2d0d73['exists']()){const _0x5396ea=_0x2d0d73['data'](),_0x512ced=(_0x5396ea['roleName']||_0x5396ea[_0x3d3976(0xd6)]||'')[_0x3d3976(0xd4)]();if(_0x512ced&&_0x14f115['includes'](_0x512ced))return!![];}}catch(_0x450b29){console['warn'](_0x3d3976(0xb5)+_0x97f6d8+':',_0x450b29);}}return![];}catch(_0x42ab72){return console['error']('Error\x20checking\x20admin\x20status:',_0x42ab72),![];}}function showAdminOnlyMessage(){const _0x36451d=a27_0x9df488,_0x3f5f3a=document['getElementById']('admin-only-message');_0x3f5f3a&&_0x3f5f3a[_0x36451d(0xc8)]();const _0x2c85da=document['createElement'](_0x36451d(0x101));_0x2c85da['id']=_0x36451d(0xdd),_0x2c85da['style']['cssText']=_0x36451d(0x9d),_0x2c85da['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body'][_0x36451d(0x104)](_0x2c85da),setTimeout(()=>{_0x2c85da['parentNode']&&_0x2c85da['remove']();},0xbb8);}