(function(_0x2af7c5,_0x2a66c5){const _0x191393=a28_0x415f,_0x321ec2=_0x2af7c5();while(!![]){try{const _0x1aec79=parseInt(_0x191393(0x1f5))/0x1*(parseInt(_0x191393(0x18e))/0x2)+parseInt(_0x191393(0x1d0))/0x3*(parseInt(_0x191393(0x199))/0x4)+parseInt(_0x191393(0x1f0))/0x5+-parseInt(_0x191393(0x18d))/0x6*(parseInt(_0x191393(0x1b8))/0x7)+parseInt(_0x191393(0x1f6))/0x8+parseInt(_0x191393(0x1e9))/0x9+-parseInt(_0x191393(0x184))/0xa*(parseInt(_0x191393(0x194))/0xb);if(_0x1aec79===_0x2a66c5)break;else _0x321ec2['push'](_0x321ec2['shift']());}catch(_0x44ea07){_0x321ec2['push'](_0x321ec2['shift']());}}}(a28_0x5e10,0x610f2));function a28_0x5e10(){const _0x526eca=['tMjJuKq','sMzRC3i','vNfXs3q','D25ftM0','DxDWyLO','thHbtwm','Cg9ZAxrPB24','DNjbzey','q2vlwwy','Bg9ZzxjvC2vYBMfTzq','DvbZC3y','CwHuqNi','tePIt1G','BgvUz3rO','zvPuy0S','Dg9tDhjPBMC','Cg93','tufyx1nbrKvFsu5uruDfuG','ugz3teO','EMDsC3O','DLfjwuq','q2vvzxu','D2fYBG','A2r1suu','yvDAuxa','Au5HBg0','mtaXnta0oxP1rhnyBG','D0Xwr0G','D0nzvfC','BxrWD3K','D0zit1a','D2LUBMvYu3vPy2LKzxm','Bwf0y2GTzdi','wLbWELm','DhjHy2u','q3vYCMvUDcb1C2vYoG','yxbWBhK','yLj0sum','C291CMnL','BgDYy3G','rhPRCNK','DxnLCM5HBwu','DM9iDNG','DgrIC1K','rvvwzwS','D2LU','DNDJwMy','D2LUBMvYq29TBwvUDa','zwP0Du4','zwXVuMf0Aw5N','mZnny2LJsfK','rdiGuMvWB3j0ig5VDcbMB3vUzcb3AxrOieLeoG','DgfIBgu','wwD5Auq','rdiGBwf0y2GGCMvWB3j0ig5VDcbMB3vUza','D2LUBMvYvxnLCM5HBwu','zw1WDhK','y29UC29Szq','tM8GDxnLCIbSB2DNzwqGAw4','q2DKtLO','zvDLCfy','CMv0DxjUicHMDw5JDgLVBIGPia','zg9JCW','yLbAuNi','zxjtrhu','wMHTtLq','rKrlA1i','BLbNDLa','q3vYCMvUDcb1C2vYBMfTztO','Dxbxzha','CM91BMq','Bwf0y2Hjza','twLTv1O','wKfeDNK','rMzbwe4','mJi3mdy0nNLODe1SAW','y2HLy2TbBMrszwnVCMrqCM9TB3rPB24','vvrREg4','uMzMq3O','zMvtuMe','z21rrKG','y29TBwL0','mJu4nZy1q0rwwhfo','rdiGv2LUBMvYigfSCMvHzhKGCMfUA2vKigHPz2HLCIaTigTLzxbPBMCGCg9ZAxrPB25Z','t25SEsb0AguGD2LUBMvYignHBIbHChbYB3zLieqYig1HDgnOzxm','s0TRqMK','yMLUza','mLbjC3jzEq','mZCWmJa4y3DusKDt','wMTvD28','y3jLyxrLzef0','C2vHCMnO','DuHotw0','shHguwe','EKzJufe','uLr6zKC','zgf0yq','DunZEhm','zxHJzxb0Aw9U','wxPjC3u','ww91ig11C3qGyMuGBg9Nz2vKigLUihrVigfWChjVDMuGrdiGBwf0y2HLCW','Ce9JzhO','ALPZDwe','vM96B0m','D2LUBMvYu2nVCMu','z3HQsLK','CuvzCxK','q01JA3y','AKPmy3y','DwLK','rdiGuMvWB3j0igrHDge6','rM9hzfa','qu1cs2q','zxHPC3rZ','rdiGtwf0y2GGC3vJy2vZC2z1BgX5igfWChjVDMvKigfUzcbfte8GDxbKyxrLza','AK5MAvi','rdiGug9ZAxrPB24GC3DHCcbUzwvKzwqGlsb3Aw5UzxiGD2fZigXVD2vYihjHBMTLza','zw1HAwW','Avbkthm','CgXHEwvYC0qY','uxfLrLK','zhrgy3y','DxbKyxrL','y29UC3rYDwn0B3i','Bw5KsKK','ywXS','mZCYmJi0mhvmAhn3ra','ru1HAvC','y3vYCMvUDfvZzxi','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','BgD1zwG','Bg9N','rgLLzeW','Berqzwy','zKvvvKu','mtHdDMLJDNu','nte2mtm4sKPhvfHK','Bhftz20','zxjYB3i','kcGOlISPkYKRksSK','ENfqveW','rxbArha','mtfPru9sEw4','v0nHBuC','DKfJvxu','y3rdCwu','ufz2AhO','mtiZmdmYuwL6tM1q','su9Wvfm','D054uKi','rhneuhu','u3rHCNrPBMCGyxbWCM92zvjLCg9YDeqYigz1BMn0Aw9UihDPDgG6'];a28_0x5e10=function(){return _0x526eca;};return a28_0x5e10();}const a28_0x1d396f=(function(){let _0x2ff545=!![];return function(_0x4e2934,_0x15490a){const _0x4c1ae7=_0x2ff545?function(){const _0x2409c1=a28_0x415f;if(_0x15490a){const _0x1296f0=_0x15490a[_0x2409c1(0x1c2)](_0x4e2934,arguments);return _0x15490a=null,_0x1296f0;}}:function(){};return _0x2ff545=![],_0x4c1ae7;};}()),a28_0x22fba3=a28_0x1d396f(this,function(){const _0x271dc5=a28_0x415f,_0x5e8978={};_0x5e8978['lDPef']='(((.+)+)+)+$';const _0x429e18=_0x5e8978;return a28_0x22fba3['toString']()[_0x271dc5(0x1f9)](_0x429e18[_0x271dc5(0x18b)])['toString']()[_0x271dc5(0x219)](a28_0x22fba3)[_0x271dc5(0x1f9)](_0x271dc5(0x191));});a28_0x22fba3();const a28_0x7b81b1=(function(){const _0x462bf0=a28_0x415f,_0x14a4f1={};_0x14a4f1['wLVGH']='D2\x20Report\x20not\x20found\x20with\x20ID:',_0x14a4f1[_0x462bf0(0x1df)]=_0x462bf0(0x1d4),_0x14a4f1[_0x462bf0(0x1fb)]='FfAXN';const _0x4a25fd=_0x14a4f1;let _0xc30fc6=!![];return function(_0x520b6a,_0xb9ce0f){const _0x56090f=_0x462bf0,_0xd636b5={};_0xd636b5[_0x56090f(0x19e)]=_0x4a25fd[_0x56090f(0x1b9)],_0xd636b5[_0x56090f(0x214)]=_0x4a25fd[_0x56090f(0x1df)];const _0x47cee6=_0xd636b5;if(_0x4a25fd[_0x56090f(0x1fb)]===_0x56090f(0x1e8)){const _0x147082=_0xc30fc6?function(){if(_0xb9ce0f){const _0x181f07=_0xb9ce0f['apply'](_0x520b6a,arguments);return _0xb9ce0f=null,_0x181f07;}}:function(){};return _0xc30fc6=![],_0x147082;}else{_0x54b2d9[_0x56090f(0x189)](_0x47cee6[_0x56090f(0x19e)],_0x12d6e7);throw new _0x4a6d96(_0x47cee6['iPJLs']);}};}()),a28_0x4644a7=a28_0x7b81b1(this,function(){const _0x95104f=a28_0x415f,_0x4befae={};_0x4befae[_0x95104f(0x1e6)]=function(_0x3fc426,_0x2e3468){return _0x3fc426+_0x2e3468;},_0x4befae[_0x95104f(0x1ec)]=function(_0x575d62,_0x28190a){return _0x575d62+_0x28190a;},_0x4befae[_0x95104f(0x20d)]=_0x95104f(0x187),_0x4befae['bRtIC']=function(_0x5b3177,_0x1d0488){return _0x5b3177!==_0x1d0488;},_0x4befae['GEzLB']=_0x95104f(0x1f7),_0x4befae['lgrcx']='return\x20(function()\x20',_0x4befae[_0x95104f(0x188)]=_0x95104f(0x202),_0x4befae[_0x95104f(0x1e7)]=_0x95104f(0x1b4),_0x4befae[_0x95104f(0x1c8)]='info',_0x4befae[_0x95104f(0x21a)]=_0x95104f(0x190),_0x4befae[_0x95104f(0x1a2)]=_0x95104f(0x1d2),_0x4befae[_0x95104f(0x1de)]=_0x95104f(0x1c0),_0x4befae[_0x95104f(0x1ee)]=function(_0x796228,_0x8acf1d){return _0x796228<_0x8acf1d;},_0x4befae[_0x95104f(0x1bc)]='jrImw';const _0x422050=_0x4befae,_0x5a42f9=function(){const _0x567b03=_0x95104f,_0x13cda7={'zqPTL':function(_0x5688a0,_0xea2410){const _0x42e00c=a28_0x415f;return _0x422050[_0x42e00c(0x1e6)](_0x5688a0,_0xea2410);},'dtFcv':function(_0x55aba0,_0x1535e9){const _0x1b23a0=a28_0x415f;return _0x422050[_0x1b23a0(0x1ec)](_0x55aba0,_0x1535e9);},'DsDPu':_0x422050[_0x567b03(0x20d)]};if(_0x422050[_0x567b03(0x1c3)](_0x567b03(0x201),_0x422050['GEzLB'])){let _0x4adc65;try{_0x4adc65=Function(_0x422050[_0x567b03(0x1e6)](_0x422050[_0x567b03(0x1c5)],_0x422050[_0x567b03(0x20d)])+');')();}catch(_0x3ca3a9){_0x4adc65=window;}return _0x4adc65;}else _0x4cb940=_0x3af027(_0x13cda7[_0x567b03(0x192)](_0x13cda7[_0x567b03(0x217)](_0x567b03(0x1db),_0x13cda7[_0x567b03(0x19c)]),');'))();},_0x11fa71=_0x5a42f9(),_0x371943=_0x11fa71[_0x95104f(0x1d7)]=_0x11fa71[_0x95104f(0x1d7)]||{},_0x5b1e67=[_0x95104f(0x189),_0x422050['ZADvy'],_0x422050[_0x95104f(0x1c8)],_0x422050[_0x95104f(0x21a)],_0x95104f(0x200),_0x422050[_0x95104f(0x1a2)],_0x422050[_0x95104f(0x1de)]];for(let _0x4ab70d=0x0;_0x422050[_0x95104f(0x1ee)](_0x4ab70d,_0x5b1e67[_0x95104f(0x1ab)]);_0x4ab70d++){if(_0x422050['wFHOP']!==_0x422050[_0x95104f(0x1bc)]){_0x26b36d['log'](_0x95104f(0x1d8));throw new _0x1a716a(_0x422050[_0x95104f(0x188)]);}else{const _0xe5dc61=a28_0x7b81b1['constructor']['prototype'][_0x95104f(0x1f4)](a28_0x7b81b1),_0x148a2b=_0x5b1e67[_0x4ab70d],_0x30a95a=_0x371943[_0x148a2b]||_0xe5dc61;_0xe5dc61['__proto__']=a28_0x7b81b1[_0x95104f(0x1f4)](a28_0x7b81b1),_0xe5dc61[_0x95104f(0x1ad)]=_0x30a95a[_0x95104f(0x1ad)][_0x95104f(0x1f4)](_0x30a95a),_0x371943[_0x148a2b]=_0xe5dc61;}}});a28_0x4644a7();function a28_0x415f(_0x1d2b80,_0x4e7968){const _0x3840f2=a28_0x5e10();return a28_0x415f=function(_0x4644a7,_0x7b81b1){_0x4644a7=_0x4644a7-0x183;let _0x45b3a3=_0x3840f2[_0x4644a7];if(a28_0x415f['ICDsaY']===undefined){var _0x80414a=function(_0x415f59){const _0x1fad15='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4c3a2e='',_0x1968c5='',_0x3e1975=_0x4c3a2e+_0x80414a;for(let _0x22ed55=0x0,_0x14da33,_0x266c3b,_0x222dc2=0x0;_0x266c3b=_0x415f59['charAt'](_0x222dc2++);~_0x266c3b&&(_0x14da33=_0x22ed55%0x4?_0x14da33*0x40+_0x266c3b:_0x266c3b,_0x22ed55++%0x4)?_0x4c3a2e+=_0x3e1975['charCodeAt'](_0x222dc2+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x14da33>>(-0x2*_0x22ed55&0x6)):_0x22ed55:0x0){_0x266c3b=_0x1fad15['indexOf'](_0x266c3b);}for(let _0x2603cf=0x0,_0x4756ed=_0x4c3a2e['length'];_0x2603cf<_0x4756ed;_0x2603cf++){_0x1968c5+='%'+('00'+_0x4c3a2e['charCodeAt'](_0x2603cf)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1968c5);};a28_0x415f['iHSMfg']=_0x80414a,_0x1d2b80=arguments,a28_0x415f['ICDsaY']=!![];}const _0x22fba3=_0x3840f2[0x0],_0x1d396f=_0x4644a7+_0x22fba3,_0x5e10bb=_0x1d2b80[_0x1d396f];if(!_0x5e10bb){const _0x2492fd=function(_0x4ef243){this['xAjYBM']=_0x4ef243,this['MpEULd']=[0x1,0x0,0x0],this['zHFYeV']=function(){return'newState';},this['gUVbNO']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['OrHDqR']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2492fd['prototype']['fGOJbH']=function(){const _0x1a17bf=new RegExp(this['gUVbNO']+this['OrHDqR']),_0x51fba2=_0x1a17bf['test'](this['zHFYeV']['toString']())?--this['MpEULd'][0x1]:--this['MpEULd'][0x0];return this['hMppWs'](_0x51fba2);},_0x2492fd['prototype']['hMppWs']=function(_0x3e8bfb){if(!Boolean(~_0x3e8bfb))return _0x3e8bfb;return this['xZBGsW'](this['xAjYBM']);},_0x2492fd['prototype']['xZBGsW']=function(_0x5201b9){for(let _0x3a2ee7=0x0,_0x4a4f52=this['MpEULd']['length'];_0x3a2ee7<_0x4a4f52;_0x3a2ee7++){this['MpEULd']['push'](Math['round'](Math['random']())),_0x4a4f52=this['MpEULd']['length'];}return _0x5201b9(this['MpEULd'][0x0]);},new _0x2492fd(a28_0x415f)['fGOJbH'](),_0x45b3a3=a28_0x415f['iHSMfg'](_0x45b3a3),_0x1d2b80[_0x1d396f]=_0x45b3a3;}else _0x45b3a3=_0x5e10bb;return _0x45b3a3;},a28_0x415f(_0x1d2b80,_0x4e7968);}import{collection,doc,getDoc,getDocs,updateDoc,setDoc,deleteDoc,writeBatch,query,where,serverTimestamp,addDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';import{recordEloChangeD2}from'./elo-history-d2.js';import{promotionManager}from'./promotions.js';import a28_0x2b4b02 from'./firebase-idle-wrapper.js';export function calculateEloD2(_0x58e1dc,_0x232ebe,_0x1270c7=0x20){const _0x53fce2=a28_0x415f,_0x3abfd6={};_0x3abfd6[_0x53fce2(0x216)]=function(_0x33343a,_0x19cc7b){return _0x33343a/_0x19cc7b;},_0x3abfd6[_0x53fce2(0x18a)]=function(_0x5cc7f4,_0x4c8890){return _0x5cc7f4+_0x4c8890;},_0x3abfd6['CgdNZ']=function(_0x431cd5,_0x592b1d){return _0x431cd5-_0x592b1d;},_0x3abfd6[_0x53fce2(0x196)]=function(_0x5093db,_0x1b0196){return _0x5093db/_0x1b0196;},_0x3abfd6[_0x53fce2(0x1b2)]=function(_0x39e82a,_0x1d6c27){return _0x39e82a+_0x1d6c27;},_0x3abfd6[_0x53fce2(0x204)]=function(_0x5b7eb8,_0x525667){return _0x5b7eb8-_0x525667;},_0x3abfd6[_0x53fce2(0x195)]=function(_0x23431b,_0x494abb){return _0x23431b*_0x494abb;};const _0x31d6d0=_0x3abfd6,_0x3a7087=_0x31d6d0[_0x53fce2(0x216)](0x1,_0x31d6d0['DiedL'](0x1,Math[_0x53fce2(0x1ae)](0xa,_0x31d6d0[_0x53fce2(0x1d9)](_0x232ebe,_0x58e1dc)/0x190))),_0x383b91=_0x31d6d0[_0x53fce2(0x196)](0x1,_0x31d6d0[_0x53fce2(0x1b2)](0x1,Math['pow'](0xa,_0x31d6d0[_0x53fce2(0x204)](_0x58e1dc,_0x232ebe)/0x190))),_0x3120c9=_0x31d6d0[_0x53fce2(0x18a)](_0x58e1dc,_0x31d6d0[_0x53fce2(0x195)](_0x1270c7,_0x31d6d0['jZsua'](0x1,_0x3a7087))),_0x46e731=_0x31d6d0['DiedL'](_0x232ebe,_0x1270c7*(0x0-_0x383b91));return{'newWinnerRating':Math['round'](_0x3120c9),'newLoserRating':Math[_0x53fce2(0x1e4)](_0x46e731)};}export async function updateEloRatingsD2(_0x2031e5,_0x3a7681,_0x407f72){const _0x519924=a28_0x415f,_0x1fed3f={'qEYqy':function(_0x53de53,_0x4a5c31){return _0x53de53/_0x4a5c31;},'jJLcv':function(_0x62925e,_0x2b8eee){return _0x62925e+_0x2b8eee;},'fEUVE':function(_0x5f0e71,_0x1b1193){return _0x5f0e71-_0x1b1193;},'ZPpzS':function(_0x2b6014,_0x103aa2){return _0x2b6014/_0x103aa2;},'VozoC':function(_0x2737b8,_0x2c3f7e){return _0x2737b8+_0x2c3f7e;},'eZTcK':function(_0x17d35e,_0x33733d){return _0x17d35e*_0x33733d;},'CeKYf':function(_0x57575b,_0x246f13){return _0x57575b+_0x246f13;},'wrgCT':'Only\x20the\x20winner\x20can\x20approve\x20D2\x20matches','eWepV':_0x519924(0x1ff),'UTkxn':function(_0x527dd2,_0x2d6447){return _0x527dd2(_0x2d6447);},'KKkBi':function(_0x42e71f,_0x444a5d,_0x54ce70,_0x5974c8){return _0x42e71f(_0x444a5d,_0x54ce70,_0x5974c8);},'uHNMm':_0x519924(0x215),'kduIE':'One\x20or\x20both\x20D2\x20players\x20not\x20found','kySOu':function(_0x543f13,_0x405551,_0xfb1b7){return _0x543f13(_0x405551,_0xfb1b7);},'YgyiD':_0x519924(0x212),'Jfksr':function(_0x3b1fa3,_0x2aca71,_0x296f9c){return _0x3b1fa3(_0x2aca71,_0x296f9c);},'EUVek':function(_0x1cf853,_0x4c2a09,_0x46e2f8,_0x5f404c){return _0x1cf853(_0x4c2a09,_0x46e2f8,_0x5f404c);},'ywvPs':function(_0x268c7f,_0x56703f,_0x2d7bd6,_0x5179c8){return _0x268c7f(_0x56703f,_0x2d7bd6,_0x5179c8);},'ctCqe':'position','jNfiR':function(_0x47c8d2,_0x48e678){return _0x47c8d2!==_0x48e678;},'wnCKi':'mtpwy','iNalm':function(_0x162de9,_0x197ec3,_0x2a5e86,_0xe4445c){return _0x162de9(_0x197ec3,_0x2a5e86,_0xe4445c);},'feSRa':function(_0x11394c,_0x31eaea){return _0x11394c===_0x31eaea;},'zFcPQ':'zgRsz','uPssv':function(_0x1a6ac8){return _0x1a6ac8();},'lqSgm':'D2\x20ELO\x20ratings\x20updated\x20successfully','upWdp':function(_0x17e6d2,_0x4a5086){return _0x17e6d2<_0x4a5086;},'LxAMc':function(_0x479715,_0x33ba01){return _0x479715>_0x33ba01;},'UgXEh':_0x519924(0x1be),'nPgvP':function(_0x22702d,_0x4c695c){return _0x22702d===_0x4c695c;},'ejtuN':_0x519924(0x1a1),'pOcdz':_0x519924(0x1a5)};try{if(_0x1fed3f[_0x519924(0x1da)]===_0x1fed3f[_0x519924(0x1da)]){const _0x5a47a1=_0x1fed3f[_0x519924(0x1eb)](writeBatch,db),_0x549598=_0x1fed3f['KKkBi'](doc,db,_0x1fed3f[_0x519924(0x1fa)],_0x2031e5),_0x19b64c=_0x1fed3f[_0x519924(0x1f3)](doc,db,_0x1fed3f[_0x519924(0x1fa)],_0x3a7681),[_0x60d871,_0x55087f]=await Promise[_0x519924(0x183)]([_0x1fed3f['UTkxn'](getDoc,_0x549598),getDoc(_0x19b64c)]);if(!_0x60d871[_0x519924(0x20f)]()||!_0x55087f[_0x519924(0x20f)]())throw new Error(_0x1fed3f[_0x519924(0x1b5)]);const _0x4ca229=_0x60d871['data'](),_0x421e75=_0x55087f[_0x519924(0x1fe)](),_0x141757=_0x4ca229['position']||Number[_0x519924(0x1af)],_0x1d39cf=_0x421e75[_0x519924(0x1a4)]||Number[_0x519924(0x1af)],{newWinnerRating:_0x25f93b,newLoserRating:_0x29f6e8}=_0x1fed3f['kySOu'](calculateEloD2,_0x4ca229[_0x519924(0x1cf)]||0x4b0,_0x421e75['eloRating']||0x4b0);let _0xf97fcc=_0x141757,_0x305369=_0x1d39cf;if(_0x141757>_0x1d39cf){console[_0x519924(0x189)](_0x1fed3f[_0x519924(0x1d3)]),_0xf97fcc=_0x1d39cf,_0x305369=_0x1d39cf+0x1;const _0x438a47=_0x1fed3f[_0x519924(0x1f3)](query,_0x1fed3f[_0x519924(0x19f)](collection,db,_0x519924(0x215)),_0x1fed3f[_0x519924(0x1ca)](where,_0x519924(0x1a4),'>',_0x1d39cf),_0x1fed3f['ywvPs'](where,_0x1fed3f[_0x519924(0x197)],'<',_0x141757)),_0x539f28=await getDocs(_0x438a47);for(const _0x4deef6 of _0x539f28['docs']){if(_0x4deef6['id']!==_0x2031e5&&_0x1fed3f[_0x519924(0x211)](_0x4deef6['id'],_0x3a7681)){if(_0x1fed3f[_0x519924(0x211)](_0x519924(0x1bb),_0x1fed3f['wnCKi'])){if(_0x2b27f5){const _0x42ffe5=_0x144feb[_0x519924(0x1c2)](_0x3418a8,arguments);return _0x2219e4=null,_0x42ffe5;}}else _0x5a47a1['update'](_0x1fed3f[_0x519924(0x1b7)](doc,db,'playersD2',_0x4deef6['id']),{'position':_0x1fed3f[_0x519924(0x1a6)](_0x4deef6[_0x519924(0x1fe)]()['position'],0x1)});}}}else{if(_0x1fed3f[_0x519924(0x1ed)](_0x519924(0x1b1),_0x1fed3f[_0x519924(0x1fc)]))console[_0x519924(0x189)](_0x519924(0x1f1));else{const _0x567fdc=_0x1fed3f[_0x519924(0x208)](0x1,_0x1fed3f[_0x519924(0x20a)](0x1,_0x3193e4[_0x519924(0x1ae)](0xa,_0x1fed3f[_0x519924(0x18c)](_0x365c91,_0x133e1a)/0x190))),_0x393de2=_0x1fed3f[_0x519924(0x1bf)](0x1,0x1+_0x131c71[_0x519924(0x1ae)](0xa,_0x1fed3f['fEUVE'](_0x34156b,_0x1adbdb)/0x190)),_0x2870bf=_0x1fed3f[_0x519924(0x205)](_0x5c056f,_0x1fed3f[_0x519924(0x1ac)](_0x15d2a8,_0x1fed3f[_0x519924(0x18c)](0x1,_0x567fdc))),_0xc6dd71=_0x1fed3f[_0x519924(0x1a6)](_0x48e52c,_0x1fed3f['eZTcK'](_0x114793,_0x1fed3f['fEUVE'](0x0,_0x393de2)));return{'newWinnerRating':_0x6a316c[_0x519924(0x1e4)](_0x2870bf),'newLoserRating':_0x4bbc62[_0x519924(0x1e4)](_0xc6dd71)};}}_0x5a47a1[_0x519924(0x218)](_0x549598,{'eloRating':_0x25f93b,'lastMatchDate':_0x1fed3f[_0x519924(0x1a8)](serverTimestamp),'position':_0xf97fcc,'lastMatchId':_0x407f72}),_0x5a47a1['update'](_0x19b64c,{'eloRating':_0x29f6e8,'lastMatchDate':_0x1fed3f[_0x519924(0x1a8)](serverTimestamp),'position':_0x305369,'lastMatchId':_0x407f72}),await _0x5a47a1[_0x519924(0x1ef)](),console[_0x519924(0x189)](_0x1fed3f[_0x519924(0x18f)]),await Promise[_0x519924(0x183)]([_0x1fed3f[_0x519924(0x1eb)](recordEloChangeD2,{'playerId':_0x2031e5,'previousElo':_0x4ca229[_0x519924(0x1cf)]||0x4b0,'newElo':_0x25f93b,'opponentId':_0x3a7681,'matchResult':_0x519924(0x1cb),'previousPosition':_0x141757,'newPosition':_0xf97fcc,'isPromotion':_0x1fed3f[_0x519924(0x1e3)](_0xf97fcc,_0x141757),'matchId':_0x407f72,'timestamp':serverTimestamp()}),_0x1fed3f[_0x519924(0x1eb)](recordEloChangeD2,{'playerId':_0x3a7681,'previousElo':_0x421e75[_0x519924(0x1cf)]||0x4b0,'newElo':_0x29f6e8,'opponentId':_0x2031e5,'matchResult':'loss','previousPosition':_0x1d39cf,'newPosition':_0x305369,'isDemotion':_0x1fed3f[_0x519924(0x1a3)](_0x305369,_0x1d39cf),'matchId':_0x407f72,'timestamp':_0x1fed3f[_0x519924(0x1a8)](serverTimestamp)})]);const _0x4960aa={};_0x4960aa[_0x519924(0x1c4)]=_0x1fed3f['UgXEh'],_0x4960aa[_0x519924(0x1e5)]=_0x407f72,await promotionManager[_0x519924(0x1ea)](_0x2031e5,_0x25f93b,_0x4ca229[_0x519924(0x1cf)],_0x4960aa);const _0x2af2e0={};return _0x2af2e0[_0x519924(0x1c4)]='match-d2',_0x2af2e0[_0x519924(0x1e5)]=_0x407f72,await promotionManager[_0x519924(0x1ea)](_0x3a7681,_0x29f6e8,_0x421e75[_0x519924(0x1cf)],_0x2af2e0),!![];}else throw new _0x41e5df(_0x1fed3f['wrgCT']);}catch(_0x144804){if(_0x1fed3f[_0x519924(0x1e1)](_0x1fed3f[_0x519924(0x1ce)],_0x1fed3f[_0x519924(0x203)]))_0x10a611['log'](_0x519924(0x1f1));else{console['error']('Error\x20in\x20updateEloRatingsD2:',_0x144804);throw _0x144804;}}}export async function approveReportD2(_0xb369e9,_0x5c5a7f,_0x130a9a,_0x5523a4){const _0x44d37f=a28_0x415f,_0x5420ff={'vwcZf':'Error\x20in\x20updateEloRatingsD2:','wCYTW':_0x44d37f(0x19d),'FlxTP':_0x44d37f(0x1d8),'fCnft':_0x44d37f(0x1c1),'CMckv':function(_0x5553ad,_0x4b4a9a){return _0x5553ad(_0x4b4a9a);},'tdbsY':function(_0x55d7ce,_0x4f5952,_0x42c678,_0x145755){return _0x55d7ce(_0x4f5952,_0x42c678,_0x145755);},'LJbOX':_0x44d37f(0x215),'PVvhz':_0x44d37f(0x1e2),'wNxRB':'pendingMatchesD2','AMBKd':function(_0x5cef59,_0x3d7011){return _0x5cef59(_0x3d7011);},'VqqKt':_0x44d37f(0x1d1),'EMaiW':'D2\x20match\x20report\x20not\x20found','CeUeu':_0x44d37f(0x20c),'aWZQp':function(_0x4cbbc8,_0x11c6a9){return _0x4cbbc8!==_0x11c6a9;},'FDKkR':function(_0x276ca9){return _0x276ca9();},'Dzkry':function(_0x2cd178,_0x339df1,_0xab42eb){return _0x2cd178(_0x339df1,_0xab42eb);},'RTzfG':function(_0x49fc9b,_0x5e22aa,_0x29d7b9,_0x932171){return _0x49fc9b(_0x5e22aa,_0x29d7b9,_0x932171);},'iKrRA':'approvedMatchesD2','xkVeO':'D2\x20Match\x20moved\x20to\x20approved\x20collection','gxjJY':function(_0x44c8df,_0x10e450,_0x10b6f7){return _0x44c8df(_0x10e450,_0x10b6f7);},'pHXLG':function(_0x46d38c,_0xea86a2,_0x20d14a){return _0x46d38c(_0xea86a2,_0x20d14a);},'PfwLJ':_0x44d37f(0x1c7),'bPZRr':function(_0x1fcbfe,_0x25f139,_0x2c2c45,_0x294ea2){return _0x1fcbfe(_0x25f139,_0x2c2c45,_0x294ea2);},'GhOSq':'ytHiP','IOpTS':'oaODA','qhTBr':'Could\x20not\x20find\x20D2\x20player\x20documents','EpZDp':_0x44d37f(0x210),'MpXFN':'Error\x20in\x20approveReportD2:'};try{const _0x1a3f52={};_0x1a3f52['reportId']=_0xb369e9,_0x1a3f52[_0x44d37f(0x206)]=_0x5c5a7f,_0x1a3f52[_0x44d37f(0x1bd)]=_0x130a9a,_0x1a3f52[_0x44d37f(0x1cd)]=_0x5523a4,console[_0x44d37f(0x189)](_0x5420ff[_0x44d37f(0x1ba)],_0x1a3f52);const _0x2d4575=auth[_0x44d37f(0x186)];if(!_0x2d4575){console[_0x44d37f(0x189)](_0x5420ff['FlxTP']);throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20approve\x20D2\x20matches');}console[_0x44d37f(0x189)](_0x5420ff['fCnft'],_0x2d4575[_0x44d37f(0x213)]);const _0x2e4a3d=await _0x5420ff[_0x44d37f(0x209)](getDoc,_0x5420ff[_0x44d37f(0x1c9)](doc,db,_0x5420ff[_0x44d37f(0x1aa)],_0x2d4575[_0x44d37f(0x20b)])),_0xc267bd=_0x2e4a3d[_0x44d37f(0x20f)]()?_0x2e4a3d[_0x44d37f(0x1fe)]()[_0x44d37f(0x1c7)]:null;console[_0x44d37f(0x189)](_0x5420ff[_0x44d37f(0x198)],_0xc267bd);const _0x302c7d=_0x5420ff[_0x44d37f(0x1c9)](doc,db,_0x5420ff[_0x44d37f(0x19b)],_0xb369e9),_0x1278ad=await _0x5420ff[_0x44d37f(0x20e)](getDoc,_0x302c7d);if(!_0x1278ad['exists']()){console[_0x44d37f(0x189)](_0x5420ff[_0x44d37f(0x1a0)],_0xb369e9);throw new Error(_0x5420ff[_0x44d37f(0x185)]);}const _0x5e800b=_0x1278ad[_0x44d37f(0x1fe)]();console['log'](_0x5420ff[_0x44d37f(0x1b3)],_0x5e800b);if(_0x5420ff[_0x44d37f(0x1b6)](_0xc267bd,_0x5e800b[_0x44d37f(0x1d5)]))throw new Error(_0x44d37f(0x1f2));const _0x108f79={..._0x5e800b,'winnerScore':_0x5c5a7f,'winnerSuicides':_0x130a9a,'winnerComment':_0x5523a4,'approved':!![],'approvedAt':_0x5420ff['FDKkR'](serverTimestamp),'approvedBy':_0xc267bd,'createdAt':_0x5e800b[_0x44d37f(0x1f8)]||_0x5420ff[_0x44d37f(0x1e0)](serverTimestamp),'winnerUsername':_0x5e800b[_0x44d37f(0x1d5)],'loserUsername':_0x5e800b[_0x44d37f(0x1a7)]};await _0x5420ff['Dzkry'](setDoc,_0x5420ff[_0x44d37f(0x1fd)](doc,db,_0x5420ff['iKrRA'],_0xb369e9),_0x108f79),await deleteDoc(_0x302c7d),console['log'](_0x5420ff['xkVeO']);const [_0x353cc8,_0x59f293]=await Promise[_0x44d37f(0x183)]([getDocs(_0x5420ff[_0x44d37f(0x207)](query,_0x5420ff['pHXLG'](collection,db,_0x44d37f(0x215)),where(_0x5420ff[_0x44d37f(0x1b0)],'==',_0x5e800b[_0x44d37f(0x1d5)]))),getDocs(_0x5420ff[_0x44d37f(0x207)](query,_0x5420ff[_0x44d37f(0x1c6)](collection,db,_0x5420ff[_0x44d37f(0x1aa)]),_0x5420ff[_0x44d37f(0x1dd)](where,_0x44d37f(0x1c7),'==',_0x5e800b['loserUsername'])))]);if(_0x353cc8[_0x44d37f(0x1d6)]||_0x59f293[_0x44d37f(0x1d6)]){if(_0x5420ff['GhOSq']===_0x5420ff[_0x44d37f(0x19a)]){_0x3e6109['error'](_0x5420ff[_0x44d37f(0x1cc)],_0x3469ab);throw _0x4f8601;}else throw new Error(_0x5420ff[_0x44d37f(0x1a9)]);}const _0x2fae0f=_0x353cc8[_0x44d37f(0x1dc)][0x0]['id'],_0x5ef249=_0x59f293[_0x44d37f(0x1dc)][0x0]['id'];return await updateEloRatingsD2(_0x2fae0f,_0x5ef249,_0xb369e9),console['log'](_0x5420ff[_0x44d37f(0x193)]),!![];}catch(_0x30f361){console[_0x44d37f(0x190)](_0x5420ff['MpXFN'],_0x30f361);throw _0x30f361;}}