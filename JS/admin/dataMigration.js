(function(_0x1b3d22,_0x479c4){const _0x366ccb=a0_0x2e20,_0x43e218=_0x1b3d22();while(!![]){try{const _0x844ee0=parseInt(_0x366ccb(0x99))/0x1*(parseInt(_0x366ccb(0xba))/0x2)+-parseInt(_0x366ccb(0xb5))/0x3+-parseInt(_0x366ccb(0x9b))/0x4*(parseInt(_0x366ccb(0xa9))/0x5)+-parseInt(_0x366ccb(0xa3))/0x6*(parseInt(_0x366ccb(0xbf))/0x7)+parseInt(_0x366ccb(0x9a))/0x8+-parseInt(_0x366ccb(0xb0))/0x9+parseInt(_0x366ccb(0xb7))/0xa;if(_0x844ee0===_0x479c4)break;else _0x43e218['push'](_0x43e218['shift']());}catch(_0x1d76b2){_0x43e218['push'](_0x43e218['shift']());}}}(a0_0x895a,0xaa6fe));function a0_0x2e20(_0x394556,_0x3ba7a4){const _0x399c9f=a0_0x895a();return a0_0x2e20=function(_0x10371c,_0x2cfd43){_0x10371c=_0x10371c-0x94;let _0xfc99bf=_0x399c9f[_0x10371c];return _0xfc99bf;},a0_0x2e20(_0x394556,_0x3ba7a4);}const a0_0x1d071b=(function(){let _0x3ac6df=!![];return function(_0x2fcbc1,_0x4e14f1){const _0x57c60a=_0x3ac6df?function(){if(_0x4e14f1){const _0x393426=_0x4e14f1['apply'](_0x2fcbc1,arguments);return _0x4e14f1=null,_0x393426;}}:function(){};return _0x3ac6df=![],_0x57c60a;};}()),a0_0x5d9298=a0_0x1d071b(this,function(){const _0x5af1e2=a0_0x2e20;return a0_0x5d9298[_0x5af1e2(0xb6)]()[_0x5af1e2(0xa0)](_0x5af1e2(0xa1))[_0x5af1e2(0xb6)]()[_0x5af1e2(0xab)](a0_0x5d9298)[_0x5af1e2(0xa0)]('(((.+)+)+)+$');});function a0_0x895a(){const _0x74991a=['prototype','elo','docs','table','search','(((.+)+)+)+$','discord','6270onrCpi','matchesD3','console','nonParticipants','createdAt','active','5ZNkEFD','divisions','constructor','return\x20(function()\x20','length','error','entries','8358255TsALzB','toISOString','push','userProfiles','matches','2498250SWQooA','toString','16892520ePEfBQ','get','update','4ztINIU','exception','warn','log','playersD2','6419WfzSwP','bind','set','success','data','trace','players','{}.constructor(\x22return\x20this\x22)(\x20)','size','name','commit','playersD3','422810xUDKjq','10134104vygnGz','1535260CJkHdy'];a0_0x895a=function(){return _0x74991a;};return a0_0x895a();}a0_0x5d9298();const a0_0x2cfd43=(function(){let _0x3648ca=!![];return function(_0x34d3cf,_0x1b3f35){const _0x4c8a90=_0x3648ca?function(){if(_0x1b3f35){const _0x342d31=_0x1b3f35['apply'](_0x34d3cf,arguments);return _0x1b3f35=null,_0x342d31;}}:function(){};return _0x3648ca=![],_0x4c8a90;};}()),a0_0x10371c=a0_0x2cfd43(this,function(){const _0x3eea4a=a0_0x2e20;let _0x41f275;try{const _0x1a1c0a=Function(_0x3eea4a(0xac)+_0x3eea4a(0x94)+');');_0x41f275=_0x1a1c0a();}catch(_0x5610b7){_0x41f275=window;}const _0x5376c8=_0x41f275['console']=_0x41f275[_0x3eea4a(0xa5)]||{},_0x4de0c9=[_0x3eea4a(0xbd),_0x3eea4a(0xbc),'info',_0x3eea4a(0xae),_0x3eea4a(0xbb),_0x3eea4a(0x9f),_0x3eea4a(0xc4)];for(let _0x45a114=0x0;_0x45a114<_0x4de0c9[_0x3eea4a(0xad)];_0x45a114++){const _0x1526c2=a0_0x2cfd43['constructor'][_0x3eea4a(0x9c)][_0x3eea4a(0xc0)](a0_0x2cfd43),_0x3e472c=_0x4de0c9[_0x45a114],_0x47a91b=_0x5376c8[_0x3e472c]||_0x1526c2;_0x1526c2['__proto__']=a0_0x2cfd43[_0x3eea4a(0xc0)](a0_0x2cfd43),_0x1526c2[_0x3eea4a(0xb6)]=_0x47a91b[_0x3eea4a(0xb6)][_0x3eea4a(0xc0)](_0x47a91b),_0x5376c8[_0x3e472c]=_0x1526c2;}});a0_0x10371c();import{db}from'../firebase-config.js';import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const _0x3f42f4=a0_0x2e20,_0x35c4b2=[_0x3f42f4(0xc5),'playersD2',_0x3f42f4(0x98),_0x3f42f4(0xa6),_0x3f42f4(0xb3)],_0x1965e2=[];let _0x1903eb=writeBatch(db),_0xcefbd2=0x0;const _0x43d6d7=collection(db,_0x3f42f4(0xb3)),_0xeff349=new Map(),_0x4bec38=(_0x1610c4,_0x49a4dc)=>{const _0x5b11c4=_0x3f42f4;_0xcefbd2>=0x1f4&&(_0x1965e2[_0x5b11c4(0xb2)](_0x1903eb),_0x1903eb=writeBatch(db),_0xcefbd2=0x0);const _0x3c9a70=doc(_0x43d6d7,_0x1610c4);_0x1903eb['set'](_0x3c9a70,_0x49a4dc),_0xcefbd2++;};for(const _0x31ec2b of _0x35c4b2){const _0x3e7ab2=collection(db,_0x31ec2b),_0x44a05f=await getDocs(_0x3e7ab2);_0x44a05f['docs']['forEach'](_0x7a47f2=>{const _0x32d8a6=_0x3f42f4,_0x346fe7=_0x7a47f2['id'],_0x4beb86=_0x7a47f2[_0x32d8a6(0xc3)]();!_0xeff349['has'](_0x346fe7)&&_0xeff349[_0x32d8a6(0xc1)](_0x346fe7,{'username':_0x4beb86['username']||_0x4beb86[_0x32d8a6(0x96)]||_0x346fe7,'email':_0x4beb86['email']||null,'discord':_0x4beb86[_0x32d8a6(0xa2)]||null,'createdAt':_0x4beb86[_0x32d8a6(0xa7)]||new Date()[_0x32d8a6(0xb1)](),'divisions':[]});const _0x28c7bc=_0xeff349[_0x32d8a6(0xb8)](_0x346fe7);if(_0x31ec2b===_0x32d8a6(0xc5))_0x28c7bc[_0x32d8a6(0xaa)][_0x32d8a6(0xb2)]({'id':0x1,'elo':_0x4beb86[_0x32d8a6(0x9d)]||0x5dc,'isActive':_0x4beb86[_0x32d8a6(0xa8)]!==![]});else{if(_0x31ec2b===_0x32d8a6(0xbe))_0x28c7bc[_0x32d8a6(0xaa)][_0x32d8a6(0xb2)]({'id':0x2,'elo':_0x4beb86[_0x32d8a6(0x9d)]||0x5dc,'isActive':_0x4beb86['active']!==![]});else _0x31ec2b===_0x32d8a6(0x98)&&_0x28c7bc[_0x32d8a6(0xaa)][_0x32d8a6(0xb2)]({'id':0x3,'elo':_0x4beb86[_0x32d8a6(0x9d)]||0x5dc,'isActive':_0x4beb86[_0x32d8a6(0xa8)]!==![]});}});}for(const [_0x156312,_0x2c70ba]of _0xeff349[_0x3f42f4(0xaf)]()){_0x4bec38(_0x156312,_0x2c70ba);}_0xcefbd2>0x0&&_0x1965e2[_0x3f42f4(0xb2)](_0x1903eb);const _0x487582=[];for(const _0x3b9fca of _0x1965e2){try{await _0x3b9fca[_0x3f42f4(0x97)](),_0x487582[_0x3f42f4(0xb2)]({'success':!![]});}catch(_0x2ed095){_0x487582[_0x3f42f4(0xb2)]({'success':![],'error':_0x2ed095});}}return{'usersProcessed':_0xeff349[_0x3f42f4(0x95)],'batchesExecuted':_0x487582[_0x3f42f4(0xad)],'success':_0x487582['every'](_0x38bd56=>_0x38bd56[_0x3f42f4(0xc2)])};}export async function updateMatchReferences(){const _0x21a6e8=a0_0x2e20,_0x30aa14=[_0x21a6e8(0xb4),'matchesD2',_0x21a6e8(0xa4)];let _0x353b83=0x0;for(const _0x297a61 of _0x30aa14){const _0x49ce95=collection(db,_0x297a61),_0x2782f8=await getDocs(_0x49ce95),_0x723cfc=0x1f4;let _0x1c0270=writeBatch(db),_0x10f5a4=0x0;for(const _0x260778 of _0x2782f8[_0x21a6e8(0x9e)]){const _0x49f5a3=_0x260778['data'](),_0x41953f=doc(db,_0x297a61,_0x260778['id']);_0x1c0270[_0x21a6e8(0xb9)](_0x41953f,{'isMigrated':!![],'lastModified':new Date()['toISOString']()}),_0x10f5a4++,_0x353b83++,_0x10f5a4>=_0x723cfc&&(await _0x1c0270['commit'](),_0x1c0270=writeBatch(db),_0x10f5a4=0x0);}_0x10f5a4>0x0&&await _0x1c0270[_0x21a6e8(0x97)]();}return{'updatedCount':_0x353b83};}