const a30_0x262295=(function(){let _0x2c833e=!![];return function(_0x4b9588,_0xe76661){const _0x5b8dbe=_0x2c833e?function(){const _0x149a4d=a30_0x4d22;if(_0xe76661){const _0x409f8c=_0xe76661[_0x149a4d(0xc8)](_0x4b9588,arguments);return _0xe76661=null,_0x409f8c;}}:function(){};return _0x2c833e=![],_0x5b8dbe;};}()),a30_0x58d22d=a30_0x262295(this,function(){const _0x19954b=a30_0x4d22,_0x1c7577=function(){let _0x3e3689;try{_0x3e3689=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3154ff){_0x3e3689=window;}return _0x3e3689;},_0x4ebd30=_0x1c7577(),_0x3ee299=_0x4ebd30['console']=_0x4ebd30['console']||{},_0x38b4b5=[_0x19954b(0xa6),'warn',_0x19954b(0xb6),'error','exception','table','trace'];for(let _0x555b55=0x0;_0x555b55<_0x38b4b5[_0x19954b(0x9c)];_0x555b55++){const _0x5e2726=a30_0x262295[_0x19954b(0x9b)]['prototype']['bind'](a30_0x262295),_0x255790=_0x38b4b5[_0x555b55],_0x5d7c2e=_0x3ee299[_0x255790]||_0x5e2726;_0x5e2726[_0x19954b(0xb0)]=a30_0x262295[_0x19954b(0xb2)](a30_0x262295),_0x5e2726['toString']=_0x5d7c2e[_0x19954b(0xa1)]['bind'](_0x5d7c2e),_0x3ee299[_0x255790]=_0x5e2726;}});a30_0x58d22d();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a30_0xf336de from'./firebase-idle-wrapper.js';function a30_0x4e6b(){const _0x5e6fcd=['seconds','toLowerCase','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','player','#ladder-d2\x20tbody','previousElo','newElo','.trend-indicator','elo','catch','push','forEach','set','style','D2:\x20Error\x20fetching\x20ELO\x20history:','constructor','length','Gold','includes','kda','error','toString','timestamp','country','D2:\x20Error\x20fetching\x20tokens:','now','log','totalDeaths','toFixed','map','userProfiles','innerHTML','totalMatches','change','playersD2','sort','__proto__','loserScore','bind','position','#CD7F32',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','info','textContent','number','Error\x20loading\x20D2\x20ladder:','data','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','querySelector','has','message','Silver','winRate','MAX_SAFE_INTEGER','#FFD700','<img\x20src=\x22../images/flags/','get','tokenName','username','apply','#4CAF50'];a30_0x4e6b=function(){return _0x5e6fcd;};return a30_0x4e6b();}import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x342cbb=![]){const _0x5b7413=a30_0x4d22,_0x531a3b=document['querySelector'](_0x5b7413(0x90));if(!_0x531a3b){console[_0x5b7413(0xa0)]('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x531a3b['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x4949ea=Date[_0x5b7413(0xa5)]();if(!_0x342cbb&&playerCacheD2['data']&&_0x4949ea-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x3055b3=collection(db,'playersD2'),_0x2e7ff1=await a30_0xf336de['getDocuments'](_0x3055b3),_0x50f3f6=[];_0x2e7ff1['forEach'](_0x186e34=>{const _0x3f7faa=_0x5b7413,_0x5d7829=_0x186e34['data']();_0x5d7829['username']&&_0x50f3f6['push']({..._0x5d7829,'id':_0x186e34['id'],'elo':_0x5d7829['eloRating']||0x0,'position':_0x5d7829[_0x3f7faa(0xb3)]||Number[_0x3f7faa(0xc2)]});});const _0x58c995=collection(db,_0x5b7413(0xaa)),_0x37fd31=await getDocs(_0x58c995),_0x1696dd=new Map();_0x37fd31['forEach'](_0x110908=>{const _0x28b665=_0x5b7413,_0x369f43=_0x110908['data']();_0x369f43['username']&&_0x1696dd[_0x28b665(0x98)](_0x369f43['username']['toLowerCase'](),_0x369f43);});for(const _0x3d9955 of _0x50f3f6){const _0x9cd733=_0x3d9955[_0x5b7413(0xc7)]['toLowerCase']();if(_0x1696dd['has'](_0x9cd733)){const _0x384b38=_0x1696dd['get'](_0x9cd733);_0x384b38['country']&&(_0x3d9955[_0x5b7413(0xa3)]=_0x384b38['country'][_0x5b7413(0x8d)]());}}const _0x4a6a3b=_0x50f3f6[_0x5b7413(0xa9)](_0xc0dc4e=>_0xc0dc4e['username']),_0x12171b=await fetchBatchMatchStatsD2(_0x4a6a3b);_0x50f3f6['sort']((_0x54cde7,_0x2e256f)=>{const _0x169c7d=_0x12171b['get'](_0x54cde7['username'])?.['totalMatches']||0x0,_0x581c97=_0x12171b['get'](_0x2e256f['username'])?.['totalMatches']||0x0;if(_0x169c7d===0x0!==(_0x581c97===0x0))return _0x169c7d===0x0?0x1:-0x1;return(_0x54cde7['position']||0x3e7)-(_0x2e256f['position']||0x3e7);}),_0x50f3f6['forEach']((_0xd230b9,_0x55f75a)=>{_0xd230b9['position']=_0x55f75a+0x1;}),playerCacheD2['data']=_0x50f3f6,playerCacheD2['timestamp']=_0x4949ea,updateLadderDisplayD2(_0x50f3f6);}catch(_0x504c32){console[_0x5b7413(0xa0)](_0x5b7413(0xb9),_0x504c32),_0x531a3b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x504c32[_0x5b7413(0xbf)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x39aa81){if(_0x39aa81['length']===0x0)return 0x1;let _0x2b2a58=0x0;return _0x39aa81['forEach'](_0x311f0d=>{const _0x28520b=a30_0x4d22;_0x311f0d[_0x28520b(0xb3)]&&typeof _0x311f0d['position']===_0x28520b(0xb8)&&_0x311f0d[_0x28520b(0xb3)]>_0x2b2a58&&(_0x2b2a58=_0x311f0d['position']);}),_0x2b2a58+0x1;}async function updatePlayerPositions(_0x3aad79,_0x4117df){const _0xda9ff2=a30_0x4d22;try{const _0x5d9098=collection(db,'playersD2'),_0x2219a1=await getDocs(_0x5d9098),_0x16aca9=[];_0x2219a1['forEach'](_0x509cf1=>{_0x16aca9['push']({'id':_0x509cf1['id'],..._0x509cf1['data']()});});const _0x77604b=_0x16aca9['find'](_0x5c4042=>_0x5c4042['username']===_0x3aad79),_0x4d4718=_0x16aca9['find'](_0x3af14d=>_0x3af14d['username']===_0x4117df);if(!_0x77604b||!_0x4d4718){console[_0xda9ff2(0xa0)]('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x77604b['position']>_0x4d4718[_0xda9ff2(0xb3)]){const _0x4945cc=_0x4d4718['position'];for(const _0x3e2ec5 of _0x16aca9){_0x3e2ec5['position']>=_0x4d4718['position']&&_0x3e2ec5[_0xda9ff2(0xb3)]<_0x77604b['position']&&_0x3e2ec5[_0xda9ff2(0xc7)]!==_0x3aad79&&await updateDoc(doc(db,_0xda9ff2(0xae),_0x3e2ec5['id']),{'position':_0x3e2ec5['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x77604b['id']),{'position':_0x4945cc});if(_0x4945cc===0x1){const _0x5ec838=doc(db,'playersD2',_0x77604b['id']),_0x34d434=await getDoc(_0x5ec838);!_0x34d434['data']()['firstPlaceDate']&&await updateDoc(_0x5ec838,{'firstPlaceDate':Timestamp['now']()});}if(_0x4d4718[_0xda9ff2(0xb3)]===0x1){const _0x44305d=doc(db,'playersD2',_0x4d4718['id']);await updateDoc(_0x44305d,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0xefcbb2){console[_0xda9ff2(0xa0)]('Error\x20updating\x20D2\x20player\x20positions:',_0xefcbb2);}}function getPlayerRankNameD2(_0x5a5b75){const _0x211f78=a30_0x4d22;if(_0x5a5b75>=0x834)return'Emerald';if(_0x5a5b75>=0x708)return _0x211f78(0x9d);if(_0x5a5b75>=0x640)return _0x211f78(0xc0);if(_0x5a5b75>=0x578)return'Bronze';return'Unranked';}window['refreshLadderDisplayD2']=function(_0x5f27fe=!![]){typeof displayLadderD2==='function'?displayLadderD2(_0x5f27fe):console['warn']('displayLadderD2\x20function\x20not\x20available');};async function updateLadderDisplayD2(_0x3d12e6){const _0x5369fd=a30_0x4d22;_0x3d12e6['sort']((_0x192bae,_0x40404b)=>_0x192bae[_0x5369fd(0xb3)]-_0x40404b['position']);const _0x240e73=document[_0x5369fd(0xbd)](_0x5369fd(0x90));if(!_0x240e73)return;_0x240e73['innerHTML']='';const _0x14fe0d=_0x3d12e6[_0x5369fd(0xa9)](_0x483b45=>_0x483b45['username']),_0x103ec7=await fetchBatchMatchStatsD2(_0x14fe0d);let _0x409e44=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x409e44=await getTokensByUsernames(_0x14fe0d);}catch(_0x1d6b19){console[_0x5369fd(0xa0)](_0x5369fd(0xa4),_0x1d6b19);}const _0x5b3f2d=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x5b3f2d&&(_0x5b3f2d[_0x5369fd(0xab)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x37cdca=_0x3d12e6['map'](_0x27be3b=>{const _0x500838=_0x5369fd,_0x27db0c=_0x103ec7[_0x500838(0xc5)](_0x27be3b[_0x500838(0xc7)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x4df060=_0x409e44['get'](_0x27be3b['username'])||[],_0x80c2b3=getPrimaryDisplayToken(_0x4df060);return createPlayerRowWithTokenD2(_0x27be3b,_0x27db0c,_0x80c2b3);})['join']('');_0x240e73['innerHTML']=_0x37cdca,getPlayersLastEloChangesD2(_0x14fe0d)['then'](_0x7d4ec9=>{const _0x5034d4=_0x5369fd,_0xcb9675=new Map();_0x240e73['querySelectorAll']('tr')[_0x5034d4(0x97)]((_0xf7aa89,_0x3d0523)=>{_0x3d0523<_0x14fe0d['length']&&_0xcb9675['set'](_0x14fe0d[_0x3d0523],_0xf7aa89);}),_0x7d4ec9[_0x5034d4(0x97)]((_0x595cac,_0x140b88)=>{const _0x3eb257=_0x5034d4,_0x5d79bd=_0xcb9675['get'](_0x140b88);if(_0x5d79bd&&_0x595cac!==0x0){const _0x2dddfe=_0x5d79bd['querySelector']('td:nth-child(3)');if(_0x2dddfe){const _0x270a88=_0x595cac>0x0?'+'+_0x595cac:''+_0x595cac,_0x18d08d=_0x2dddfe[_0x3eb257(0xbd)](_0x3eb257(0x93));_0x18d08d&&(_0x18d08d[_0x3eb257(0xb7)]=_0x270a88,_0x18d08d['style']['color']=_0x595cac>0x0?_0x3eb257(0xc9):'#F44336',_0x18d08d['style']['fontWeight']='bold',_0x18d08d['style']['fontSize']='0.85em',_0x18d08d['style']['display']='inline',_0x18d08d[_0x3eb257(0x99)]['visibility']='visible',_0x18d08d[_0x3eb257(0x99)]['opacity']='1');}}});})[_0x5369fd(0x95)](_0x2fba73=>console['error'](_0x5369fd(0xbb),_0x2fba73));}function a30_0x4d22(_0x4dd169,_0x818d0f){const _0x58d22d=a30_0x4e6b();return a30_0x4d22=function(_0x262295,_0x48a2ae){_0x262295=_0x262295-0x8c;let _0x4e6bb0=_0x58d22d[_0x262295];return _0x4e6bb0;},a30_0x4d22(_0x4dd169,_0x818d0f);}function createPlayerRowWithTokenD2(_0x3f5348,_0x3cf63d,_0x497d85){const _0xb61d35=a30_0x4d22,_0xd71fc=parseFloat(_0x3f5348[_0xb61d35(0x94)])||0x0;let _0x20d46e='gray';if(_0xd71fc>=0x7d0)_0x20d46e='#50C878';else{if(_0xd71fc>=0x708)_0x20d46e=_0xb61d35(0xc3);else{if(_0xd71fc>=0x640)_0x20d46e='#b9f1fc';else _0xd71fc>=0x578&&(_0x20d46e=_0xb61d35(0xb4));}}let _0x1a4f35='';_0x3f5348[_0xb61d35(0xa3)]&&(_0x1a4f35=_0xb61d35(0xc4)+_0x3f5348['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x3f5348['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x160d35='';return _0x497d85&&(_0x160d35='<img\x20src=\x22'+_0x497d85['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x497d85[_0xb61d35(0xc6)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x497d85['tokenName']+'\x20'+(_0x497d85['equipped']?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3f5348[_0xb61d35(0xb3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x3f5348[_0xb61d35(0xc7)])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x20d46e+_0xb61d35(0xb5)+_0x3f5348['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1a4f35+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x160d35+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x20d46e+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0xd71fc+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3cf63d[_0xb61d35(0xac)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3cf63d['wins']+_0xb61d35(0x8e)+_0x3cf63d['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3cf63d['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3cf63d['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD2(_0x453d67){const _0x5a06af=a30_0x4d22,_0x4ab0bb=new Map();_0x453d67['forEach'](_0x51d555=>_0x4ab0bb['set'](_0x51d555,0x0));try{const _0x95e12f=collection(db,'eloHistoryD2'),_0x52d9d6=query(_0x95e12f,orderBy('timestamp','desc'),limit(0x64)),_0x288415=await getDocs(_0x52d9d6),_0x53a886=new Map(),_0x1d9d95=await getDocs(collection(db,'playersD2'));_0x1d9d95['forEach'](_0x19fd66=>{const _0x380e11=a30_0x4d22,_0x3eac0e=_0x19fd66[_0x380e11(0xba)]();_0x3eac0e['username']&&_0x53a886[_0x380e11(0x98)](_0x19fd66['id'],_0x3eac0e['username']);});const _0x54deb5=new Map();_0x288415[_0x5a06af(0x97)](_0x30e95f=>{const _0x2ad08e=_0x5a06af,_0x547722=_0x30e95f['data']();let _0x4f8740=_0x547722['username']||_0x547722['playerUsername'];!_0x4f8740&&_0x547722[_0x2ad08e(0x8f)]&&_0x53a886['has'](_0x547722['player'])&&(_0x4f8740=_0x53a886[_0x2ad08e(0xc5)](_0x547722['player'])),_0x4f8740&&_0x453d67[_0x2ad08e(0x9e)](_0x4f8740)&&(!_0x54deb5[_0x2ad08e(0xbe)](_0x4f8740)&&_0x54deb5[_0x2ad08e(0x98)](_0x4f8740,[]),_0x54deb5[_0x2ad08e(0xc5)](_0x4f8740)[_0x2ad08e(0x96)]({..._0x547722,'timestamp':_0x547722['timestamp']?.[_0x2ad08e(0x8c)]||0x0,'username':_0x4f8740}));}),_0x54deb5[_0x5a06af(0x97)]((_0x4b9b0e,_0x2d4df8)=>{const _0x302f8f=_0x5a06af;if(_0x4b9b0e[_0x302f8f(0x9c)]>0x0){_0x4b9b0e[_0x302f8f(0xaf)]((_0x46f787,_0x25447f)=>_0x25447f[_0x302f8f(0xa2)]-_0x46f787['timestamp']);const _0x1b7d17=_0x4b9b0e['find'](_0x4f7af5=>_0x4f7af5['change']!==undefined||_0x4f7af5[_0x302f8f(0x92)]!==undefined&&_0x4f7af5['previousElo']!==undefined);if(_0x1b7d17){let _0x58cab1;if(_0x1b7d17['change']!==undefined)_0x58cab1=_0x1b7d17['change'];else _0x1b7d17['newElo']!==undefined&&_0x1b7d17['previousElo']!==undefined&&(_0x58cab1=_0x1b7d17['newElo']-_0x1b7d17[_0x302f8f(0x91)]);_0x58cab1!==undefined&&_0x4ab0bb[_0x302f8f(0x98)](_0x2d4df8,_0x58cab1);}}});if(_0x54deb5['size']===0x0){const _0x54252d=collection(db,'eloHistory'),_0x5f429c=query(_0x54252d,where('gameMode','==','D2'),orderBy(_0x5a06af(0xa2),'desc'),limit(0x32));try{const _0x537d84=await getDocs(_0x5f429c);_0x537d84[_0x5a06af(0x97)](_0x181d10=>{const _0x2d19ae=_0x5a06af,_0x567fb5=_0x181d10['data'](),_0x5e5378=_0x567fb5['username']||_0x567fb5['playerUsername'];if(_0x5e5378&&_0x453d67['includes'](_0x5e5378)){const _0x2d88d7=_0x567fb5[_0x2d19ae(0xad)]||(_0x567fb5['newElo']!==undefined&&_0x567fb5[_0x2d19ae(0x91)]!==undefined?_0x567fb5[_0x2d19ae(0x92)]-_0x567fb5['previousElo']:0x0);_0x2d88d7!==0x0&&_0x4ab0bb['set'](_0x5e5378,_0x2d88d7);}});}catch(_0x251122){}}}catch(_0x4d8076){console['error'](_0x5a06af(0x9a),_0x4d8076);}return _0x4ab0bb;}async function fetchBatchMatchStatsD2(_0x2b0273){const _0x5763f8=a30_0x4d22,_0xc1eef5=new Map();try{_0x2b0273['forEach'](_0x5530bb=>{_0xc1eef5['set'](_0x5530bb,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x341b07=collection(db,'approvedMatchesD2'),_0x4ab117=await getDocs(_0x341b07);_0x4ab117['forEach'](_0x44ea31=>{const _0x2d06a2=a30_0x4d22,_0x3fcabf=_0x44ea31['data'](),_0x28980c=_0x3fcabf['winnerUsername'],_0x34102f=_0x3fcabf['loserUsername'];if(_0x2b0273[_0x2d06a2(0x9e)](_0x28980c)){const _0x97dc08=_0xc1eef5[_0x2d06a2(0xc5)](_0x28980c);_0x97dc08['wins']++,_0x97dc08[_0x2d06a2(0xac)]++,_0x97dc08['totalKills']+=parseInt(_0x3fcabf['winnerScore'])||0x0,_0x97dc08['totalDeaths']+=parseInt(_0x3fcabf[_0x2d06a2(0xb1)])||0x0;}if(_0x2b0273[_0x2d06a2(0x9e)](_0x34102f)){const _0x4ae2e2=_0xc1eef5[_0x2d06a2(0xc5)](_0x34102f);_0x4ae2e2['losses']++,_0x4ae2e2['totalMatches']++,_0x4ae2e2['totalKills']+=parseInt(_0x3fcabf['loserScore'])||0x0,_0x4ae2e2['totalDeaths']+=parseInt(_0x3fcabf['winnerScore'])||0x0;}}),_0x2b0273[_0x5763f8(0x97)](_0x25eb9d=>{const _0x3ac413=_0x5763f8,_0x375f35=_0xc1eef5[_0x3ac413(0xc5)](_0x25eb9d);_0x375f35[_0x3ac413(0x9f)]=_0x375f35[_0x3ac413(0xa7)]>0x0?(_0x375f35['totalKills']/_0x375f35['totalDeaths'])['toFixed'](0x2):_0x375f35['totalKills']['toFixed'](0x2),_0x375f35[_0x3ac413(0xc1)]=_0x375f35['totalMatches']>0x0?(_0x375f35['wins']/_0x375f35[_0x3ac413(0xac)]*0x64)[_0x3ac413(0xa8)](0x1):0x0;});}catch(_0x418dd4){console[_0x5763f8(0xa0)](_0x5763f8(0xbc),_0x418dd4);}return _0xc1eef5;}export{displayLadderD2,updatePlayerPositions};