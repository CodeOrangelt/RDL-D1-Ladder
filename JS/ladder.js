const a25_0x145830=a25_0x4b49,a25_0x13cd28=(function(){let _0xf243d9=!![];return function(_0x41439f,_0x418419){const _0x4cf3fb=_0xf243d9?function(){const _0x2b44b0=a25_0x4b49;if(_0x418419){const _0xc554db=_0x418419[_0x2b44b0(0x1dc)](_0x41439f,arguments);return _0x418419=null,_0xc554db;}}:function(){};return _0xf243d9=![],_0x4cf3fb;};}()),a25_0xc9d24f=a25_0x13cd28(this,function(){const _0x434eb2=a25_0x4b49;let _0x7c729f;try{const _0x1bc343=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x7c729f=_0x1bc343();}catch(_0x30fe7f){_0x7c729f=window;}const _0x52aeb6=_0x7c729f['console']=_0x7c729f['console']||{},_0x403f46=[_0x434eb2(0x1d3),'warn','info',_0x434eb2(0x1fd),'exception','table','trace'];for(let _0x25363d=0x0;_0x25363d<_0x403f46[_0x434eb2(0x1ce)];_0x25363d++){const _0x342ae0=a25_0x13cd28[_0x434eb2(0x20a)]['prototype']['bind'](a25_0x13cd28),_0x5acc05=_0x403f46[_0x25363d],_0x342ce5=_0x52aeb6[_0x5acc05]||_0x342ae0;_0x342ae0[_0x434eb2(0x227)]=a25_0x13cd28['bind'](a25_0x13cd28),_0x342ae0['toString']=_0x342ce5['toString']['bind'](_0x342ce5),_0x52aeb6[_0x5acc05]=_0x342ae0;}});a25_0xc9d24f();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';function a25_0x4b49(_0xdfb383,_0x237532){const _0xc9d24f=a25_0x2136();return a25_0x4b49=function(_0x13cd28,_0xf175fe){_0x13cd28=_0x13cd28-0x1cd;let _0x21361b=_0xc9d24f[_0x13cd28];return _0x21361b;},a25_0x4b49(_0xdfb383,_0x237532);}import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x4ebbfb=0x1){const _0x446440=a25_0x4b49;try{document[_0x446440(0x1f2)](_0x446440(0x1f4))[_0x446440(0x209)][_0x446440(0x201)]='block';const _0x2ce4ba=await getLadderData(_0x4ebbfb);_0x2ce4ba['sort']((_0x127ebf,_0x2528a1)=>_0x2528a1['elo']-_0x127ebf['elo']);const _0x3a71f1=_0x2ce4ba[_0x446440(0x244)](_0xfa893c=>_0xfa893c['id']),_0x403739=await getEloHistoryBatch(_0x3a71f1,_0x4ebbfb),_0x2361c9=_0x2ce4ba['map']((_0x1cacf4,_0x12feba)=>{const _0x4c4d56=_0x403739[_0x1cacf4['id']]||[],_0x2dd885=_0x4c4d56['sort']((_0x405c34,_0x3e9358)=>new Date(_0x3e9358['date'])-new Date(_0x405c34['date']))['slice'](0x0,0x5);return{..._0x1cacf4,'rank':_0x12feba+0x1,'lastMatches':_0x2dd885,'recentActivity':_0x2dd885['length']>0x0};});renderLadder(_0x2361c9),setupRealTimeUpdates(_0x4ebbfb);}catch(_0x41245f){console[_0x446440(0x1fd)](_0x446440(0x219),_0x41245f),document[_0x446440(0x1f2)]('error-message')['innerText']=_0x446440(0x1eb);}finally{document[_0x446440(0x1f2)]('loading-indicator')[_0x446440(0x209)]['display']='none';}}function setupRealTimeUpdates(_0x45a2b3=0x1){const _0x22e50f=a25_0x4b49;activeListeners['forEach'](_0x4c1444=>_0x4c1444()),activeListeners=[];const _0x5472da=_0x45a2b3===0x1?'players':'playersD'+_0x45a2b3,_0x2b3d9c=_0x45a2b3===0x1?'matches':'matchesD'+_0x45a2b3,_0x1ab9c2=new Date();_0x1ab9c2[_0x22e50f(0x205)](_0x1ab9c2['getDate']()-0x1);const _0x1d16b5=setupEfficientListener(_0x2b3d9c,[where('date','>=',_0x1ab9c2['toISOString']()),limit(0xa),orderBy('date','desc')],async _0xef0a1d=>{_0xef0a1d['length']>0x0&&await loadLadderData(_0x45a2b3);});activeListeners['push'](_0x1d16b5);}export function cleanupListeners(){activeListeners['forEach'](_0x464a95=>_0x464a95()),activeListeners=[];}function renderLadder(_0xbb4d4e){const _0x280ce0=a25_0x4b49,_0x10a577=document[_0x280ce0(0x1f2)]('ladder-container');_0x10a577['innerHTML']='',_0xbb4d4e['forEach'](_0x3df278=>{const _0x35f574=_0x280ce0,_0x10a3e2=document['createElement']('div');_0x10a3e2[_0x35f574(0x218)]='ladder-player',_0x10a3e2['innerHTML']=_0x35f574(0x232)+_0x3df278['rank']+_0x35f574(0x221)+(_0x3df278['username']||_0x3df278['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x3df278['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x3df278['recentActivity']?_0x35f574(0x1f0):'inactive')+_0x35f574(0x1db)+(_0x3df278['recentActivity']?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x10a577['appendChild'](_0x10a3e2);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x4030e5=![]){const _0x48491e=a25_0x4b49,_0xc9e806=document[_0x48491e(0x21a)](_0x48491e(0x1df));if(!_0xc9e806){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0xc9e806['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x38494b=Date['now']();if(!_0x4030e5&&playerCache['data']&&_0x38494b-playerCache['timestamp']<CACHE_DURATION){console[_0x48491e(0x1d3)]('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x597269=collection(db,_0x48491e(0x243)),_0x55d926=await getDocs(_0x597269),_0x3f9d2a=[];_0x55d926['forEach'](_0x578e63=>{const _0x209db6=_0x48491e,_0x567067=_0x578e63['data']();_0x3f9d2a['push']({..._0x567067,'id':_0x578e63['id'],'elo':_0x567067['eloRating']||0x0,'position':_0x567067['position']||Number[_0x209db6(0x21f)]});});const _0xe198da=collection(db,'userProfiles'),_0x3baafe=await getDocs(_0xe198da),_0x9cc52f=new Map();_0x3baafe[_0x48491e(0x202)](_0x1e0779=>{const _0x248c5d=_0x48491e,_0xe160ed=_0x1e0779['data']();_0xe160ed['username']&&_0x9cc52f[_0x248c5d(0x1d6)](_0xe160ed['username']['toLowerCase'](),_0xe160ed);}),_0x3f9d2a[_0x48491e(0x202)](_0x85a700=>{const _0x48cb52=_0x48491e,_0x56d32e=_0x85a700['username']?.[_0x48cb52(0x215)]();if(_0x56d32e&&_0x9cc52f[_0x48cb52(0x21c)](_0x56d32e)){const _0x35a5af=_0x9cc52f['get'](_0x56d32e);_0x35a5af['country']&&(_0x85a700[_0x48cb52(0x22b)]=_0x35a5af['country']['toLowerCase']());}});const _0x1a22fb=_0x3f9d2a[_0x48491e(0x244)](_0x153e3f=>_0x153e3f['username']),_0x3ab11e=await fetchBatchMatchStats(_0x1a22fb);_0x3f9d2a['sort']((_0x46d3f4,_0x4071d3)=>{const _0x4caacc=_0x48491e,_0x44aa74=_0x3ab11e['get'](_0x46d3f4['username'])?.['totalMatches']||0x0,_0x2bb1f0=_0x3ab11e[_0x4caacc(0x1e2)](_0x4071d3['username'])?.['totalMatches']||0x0;if(_0x44aa74===0x0!==(_0x2bb1f0===0x0))return _0x44aa74===0x0?0x1:-0x1;return(_0x46d3f4['position']||0x3e7)-(_0x4071d3[_0x4caacc(0x237)]||0x3e7);}),_0x3f9d2a[_0x48491e(0x202)]((_0x25d687,_0x501fd3)=>{_0x25d687['position']=_0x501fd3+0x1;}),playerCache['data']=_0x3f9d2a,playerCache['timestamp']=_0x38494b,updateLadderDisplay(_0x3f9d2a,_0x3ab11e);}catch(_0x22c47f){console['error']('Error\x20loading\x20ladder:',_0x22c47f),_0xc9e806['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x22c47f['message']+_0x48491e(0x249);}}async function fetchBatchMatchStats(_0x579830){const _0x4b0aad=a25_0x4b49,_0x63897e=new Map();try{_0x579830['forEach'](_0x318431=>{_0x63897e['set'](_0x318431,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x2376a8=collection(db,_0x4b0aad(0x22f)),_0x217081=await getDocs(_0x2376a8);_0x217081['forEach'](_0x419012=>{const _0x4c948e=_0x4b0aad,_0x7e0ea9=_0x419012['data'](),_0x2dbae2=_0x7e0ea9['winnerUsername'],_0x264719=_0x7e0ea9['loserUsername'];if(_0x579830['includes'](_0x2dbae2)){const _0x53105a=_0x63897e['get'](_0x2dbae2);_0x53105a['wins']++,_0x53105a['totalMatches']++,_0x53105a[_0x4c948e(0x1d1)]+=parseInt(_0x7e0ea9[_0x4c948e(0x1d8)])||0x0,_0x53105a['totalDeaths']+=parseInt(_0x7e0ea9['loserScore'])||0x0;}if(_0x579830['includes'](_0x264719)){const _0x58fff9=_0x63897e[_0x4c948e(0x1e2)](_0x264719);_0x58fff9['losses']++,_0x58fff9['totalMatches']++,_0x58fff9[_0x4c948e(0x1d1)]+=parseInt(_0x7e0ea9[_0x4c948e(0x1ee)])||0x0,_0x58fff9['totalDeaths']+=parseInt(_0x7e0ea9['winnerScore'])||0x0;}}),_0x579830['forEach'](_0x45e4cd=>{const _0x1b723d=_0x4b0aad,_0x36b35f=_0x63897e['get'](_0x45e4cd);_0x36b35f[_0x1b723d(0x246)]=_0x36b35f[_0x1b723d(0x234)]>0x0?(_0x36b35f['totalKills']/_0x36b35f['totalDeaths'])['toFixed'](0x2):_0x36b35f['totalKills'][_0x1b723d(0x23b)](0x2),_0x36b35f['winRate']=_0x36b35f['totalMatches']>0x0?(_0x36b35f['wins']/_0x36b35f['totalMatches']*0x64)[_0x1b723d(0x23b)](0x1):0x0;});}catch(_0x4b9b0c){console[_0x4b0aad(0x1fd)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x4b9b0c);}return _0x63897e;}function createPlayerRow(_0x577f98,_0x2f573f){const _0x58ea25=a25_0x4b49,_0x25a8ef=parseFloat(_0x577f98['elo'])||0x0;let _0xd36096='gray';if(_0x25a8ef>=0x7d0)_0xd36096='#50C878';else{if(_0x25a8ef>=0x708)_0xd36096=_0x58ea25(0x1e0);else{if(_0x25a8ef>=0x640)_0xd36096='#b9f1fc';else _0x25a8ef>=0x578&&(_0xd36096='#CD7F32');}}let _0x13e5e9='';return _0x577f98['country']&&(_0x13e5e9='<img\x20src=\x22../images/flags/'+_0x577f98['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x577f98[_0x58ea25(0x22b)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x577f98['position']+_0x58ea25(0x1f3)+encodeURIComponent(_0x577f98['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0xd36096+_0x58ea25(0x22e)+_0x577f98['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x13e5e9+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0xd36096+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x25a8ef+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2f573f['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2f573f['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2f573f['losses']+_0x58ea25(0x20e)+_0x2f573f['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2f573f['winRate']+_0x58ea25(0x23e);}function getPlayerRankName(_0x570bae){const _0x3f949a=a25_0x4b49;if(_0x570bae>=0x7d0)return _0x3f949a(0x1fa);if(_0x570bae>=0x708)return'Gold';if(_0x570bae>=0x640)return _0x3f949a(0x1e8);if(_0x570bae>=0x578)return _0x3f949a(0x248);return _0x3f949a(0x1d5);}function a25_0x2136(){const _0x180c64=['duos-ladder-container','length','bold','d2-ladder-container','totalKills','#CD7F32','log','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','Unranked','set','title','winnerScore','visibility','createElement','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','apply','#50C878','checked','#ladder\x20tbody','#FFD700','playersD3','get','currentUser','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','d1-switch','docs',';\x22>','Silver','round','parentNode','Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.','</span>','addEventListener','loserScore','ðŸŽ¯\x20','active','totalMatches','getElementById','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','loading-indicator','innerHTML','block','elo-recommendation-text-duos','Error\x20finding\x20best\x20opponent:','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Emerald','eloRating','\x20has\x20equipped:\x20','error','cursor','label[for=\x22duos-switch\x22]','toUpperCase','display','forEach','winRate','#b9f1fc','setDate','elo-recommendation-text-d3','Error\x20updating\x20ELO\x20trend\x20indicators:','wins','style','constructor','elo','remove','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','elo-recommendation-text-d2','oldEloRating','#ladder\x20thead\x20tr','textContent','tokenImage','DOMContentLoaded','toLowerCase','admin','newElo','className','Error\x20loading\x20ladder\x20data:','querySelector','data','has','click','tokenName','MAX_SAFE_INTEGER','max','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','#4CAF50','D1\x20toggle\x20clicked','newEloRating','playerUsername','player','__proto__','\x20not\x20found','pointer','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','country','sort','ELO\x20history\x20collection\x20is\x20empty',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','approvedMatches','d1-ladder-container','d3-switch','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#','elo-recommendation-text-d1','totalDeaths','add','</span>\x20(ELO:\x20','position','none','classList','dispatchEvent','toFixed','cssText','duos','%</td>\x0a\x20\x20\x20\x20</tr>','onAuthStateChanged','username','admin@ladder.com','abs','players','map','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','kda','hasTeam','Bronze','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','change','td:nth-child(3)'];a25_0x2136=function(){return _0x180c64;};return a25_0x2136();}async function getPlayersLastEloChanges(_0x8320da){const _0x23e621=a25_0x4b49,_0x90d90a=new Map();_0x8320da['forEach'](_0x2843f7=>{_0x90d90a['set'](_0x2843f7,0x0);});try{const _0x409a99=collection(db,'players'),_0x562371=await getDocs(_0x409a99),_0x60eb9a=new Map(),_0x47335e=new Map();_0x562371['forEach'](_0xf804db=>{const _0x283620=_0xf804db['data']();_0x283620['username']&&(_0x60eb9a['set'](_0xf804db['id'],_0x283620['username']),_0x47335e['set'](_0x283620['username']['toLowerCase'](),_0xf804db['id']));});const _0x20d8ea=collection(db,'eloHistory'),_0x1264d0=query(_0x20d8ea,orderBy('timestamp','desc'),limit(0x12c)),_0x51c0b9=await getDocs(_0x1264d0);if(_0x51c0b9['empty'])return console[_0x23e621(0x1d3)](_0x23e621(0x22d)),_0x90d90a;if(_0x51c0b9['docs'][_0x23e621(0x1ce)]>0x0){const _0x3d62c2=_0x51c0b9['docs'][0x0][_0x23e621(0x21b)]();if(_0x3d62c2['player']&&_0x60eb9a['has'](_0x3d62c2[_0x23e621(0x226)])){}}const _0x3d8c98=new Map();let _0x42a2dc=0x0;_0x51c0b9['forEach'](_0x50cbfb=>{const _0x529f8c=_0x23e621,_0x54e944=_0x50cbfb['data']();let _0x4ce90b=null;if(_0x54e944['player']&&_0x60eb9a['has'](_0x54e944['player']))_0x4ce90b=_0x60eb9a['get'](_0x54e944['player']);else{if(_0x54e944['username']&&_0x47335e['has'](_0x54e944['username']['toLowerCase']()))_0x4ce90b=_0x54e944['username'];else _0x54e944[_0x529f8c(0x225)]&&_0x47335e['has'](_0x54e944['playerUsername']['toLowerCase']())&&(_0x4ce90b=_0x54e944['playerUsername']);}_0x4ce90b&&_0x8320da['includes'](_0x4ce90b)&&(_0x42a2dc++,!_0x3d8c98[_0x529f8c(0x21c)](_0x4ce90b)&&_0x3d8c98[_0x529f8c(0x1d6)](_0x4ce90b,[]),_0x3d8c98[_0x529f8c(0x1e2)](_0x4ce90b)['push']({..._0x54e944,'timestamp':_0x54e944['timestamp']?.['seconds']||0x0}));}),_0x3d8c98['forEach']((_0xfd68b8,_0x47150d)=>{const _0x48f86c=_0x23e621;if(_0xfd68b8[_0x48f86c(0x1ce)]>0x0){_0xfd68b8[_0x48f86c(0x22c)]((_0x2744b3,_0x5e98ea)=>_0x5e98ea['timestamp']-_0x2744b3['timestamp']);const _0x36e9c2=_0xfd68b8['find'](_0x183198=>_0x183198[_0x48f86c(0x24a)]!==undefined||_0x183198[_0x48f86c(0x217)]!==undefined&&_0x183198['previousElo']!==undefined||_0x183198[_0x48f86c(0x224)]!==undefined&&_0x183198['oldEloRating']!==undefined);if(_0x36e9c2){let _0x3c6b7d;if(_0x36e9c2['change']!==undefined)_0x3c6b7d=parseInt(_0x36e9c2[_0x48f86c(0x24a)]);else{if(_0x36e9c2['newElo']!==undefined&&entry['previousElo']!==undefined)_0x3c6b7d=parseInt(_0x36e9c2['newElo'])-parseInt(_0x36e9c2['previousElo']);else _0x36e9c2[_0x48f86c(0x224)]!==undefined&&entry['oldEloRating']!==undefined&&(_0x3c6b7d=parseInt(_0x36e9c2['newEloRating'])-parseInt(_0x36e9c2[_0x48f86c(0x210)]));}!isNaN(_0x3c6b7d)&&_0x3c6b7d!==0x0&&_0x90d90a['set'](_0x47150d,_0x3c6b7d);}}});}catch(_0x51492c){console['error']('Error\x20fetching\x20ELO\x20history:',_0x51492c);}return _0x90d90a;}function createPlayerRowWithToken(_0x5ed3bc,_0x4a26b7,_0x4a9b02){const _0x2a2932=a25_0x4b49,_0x7148b2=parseFloat(_0x5ed3bc[_0x2a2932(0x20b)])||0x0;let _0x1cd5ef='gray';if(_0x7148b2>=0x7d0)_0x1cd5ef=_0x2a2932(0x1dd);else{if(_0x7148b2>=0x708)_0x1cd5ef='#FFD700';else{if(_0x7148b2>=0x640)_0x1cd5ef=_0x2a2932(0x204);else _0x7148b2>=0x578&&(_0x1cd5ef=_0x2a2932(0x1d2));}}let _0xeab743='';_0x5ed3bc['country']&&(_0xeab743='<img\x20src=\x22../images/flags/'+_0x5ed3bc['country']['toLowerCase']()+_0x2a2932(0x1d4)+_0x5ed3bc['country']+_0x2a2932(0x245));let _0x336fba='';return _0x4a9b02&&(_0x336fba='<img\x20src=\x22'+_0x4a9b02[_0x2a2932(0x213)]+_0x2a2932(0x1e4)+_0x4a9b02[_0x2a2932(0x21e)]+_0x2a2932(0x20d)+_0x4a9b02[_0x2a2932(0x21e)]+'\x20'+(_0x4a9b02['equipped']?'(Equipped)':'')+_0x2a2932(0x22a)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5ed3bc[_0x2a2932(0x237)]+_0x2a2932(0x1f3)+encodeURIComponent(_0x5ed3bc['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x1cd5ef+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5ed3bc['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xeab743+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x336fba+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x1cd5ef+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x7148b2+_0x2a2932(0x1f9)+_0x4a26b7[_0x2a2932(0x1f1)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4a26b7[_0x2a2932(0x208)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4a26b7['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4a26b7['kda']+_0x2a2932(0x20e)+_0x4a26b7[_0x2a2932(0x203)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0x4e72b4,_0x2b3465=null){const _0xa3a650=a25_0x4b49,_0x5b7fdb=document['querySelector'](_0xa3a650(0x1df));if(!_0x5b7fdb){console[_0xa3a650(0x1fd)]('Ladder\x20table\x20body\x20not\x20found');return;}const _0x242543=document['querySelector'](_0xa3a650(0x211));_0x242543&&(_0x242543['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0xbe178c=_0x4e72b4['map'](_0x1f3e66=>_0x1f3e66[_0xa3a650(0x240)]);!_0x2b3465&&(_0x2b3465=await fetchBatchMatchStats(_0xbe178c));let _0x1939f3=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x1939f3=await getTokensByUsernames(_0xbe178c),console['log']('ðŸª™\x20Loaded\x20fresh\x20tokens\x20for',_0x1939f3['size'],'players'),_0x1939f3['forEach']((_0x432b3f,_0x494ca0)=>{const _0xa7f294=_0xa3a650,_0x3f4bc6=_0x432b3f['find'](_0x12673f=>_0x12673f['equipped']);_0x3f4bc6&&console['log'](_0xa7f294(0x1ef)+_0x494ca0+_0xa7f294(0x1fc)+_0x3f4bc6['tokenName']);});}catch(_0x54e32d){console[_0xa3a650(0x1fd)]('Error\x20fetching\x20tokens:',_0x54e32d);}const _0x1add38=_0x4e72b4['map'](_0x13c5b1=>{const _0x6af7b0=_0x2b3465['get'](_0x13c5b1['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x3c5b58=_0x1939f3['get'](_0x13c5b1['username'])||[],_0x1a8647=getPrimaryDisplayToken(_0x3c5b58);return _0x1a8647&&console['log']('ðŸŽ¨\x20'+_0x13c5b1['username']+'\x20displaying\x20token:\x20'+_0x1a8647['tokenName']+'\x20(equipped:\x20'+_0x1a8647['equipped']+')'),createPlayerRowWithToken(_0x13c5b1,_0x6af7b0,_0x1a8647);})['join']('');_0x5b7fdb['innerHTML']=_0x1add38,getPlayersLastEloChanges(_0xbe178c)['then'](_0x1faa25=>{const _0xef974c=_0xa3a650,_0xa677fb=new Map();_0x5b7fdb['querySelectorAll']('tr')['forEach']((_0x5b8735,_0x56d9b3)=>{const _0x23009e=a25_0x4b49;_0x56d9b3<_0xbe178c['length']&&_0xa677fb[_0x23009e(0x1d6)](_0xbe178c[_0x56d9b3],_0x5b8735);}),_0x1faa25[_0xef974c(0x202)]((_0x18ad94,_0x4dbd33)=>{const _0x59dab3=_0xef974c,_0x832e84=_0xa677fb[_0x59dab3(0x1e2)](_0x4dbd33);if(_0x832e84&&_0x18ad94!==0x0){const _0x203892=_0x832e84['querySelector'](_0x59dab3(0x24b));if(_0x203892){const _0x3eb746=_0x18ad94>0x0?'+'+_0x18ad94:''+_0x18ad94,_0x18b68c=_0x203892['querySelector']('.trend-indicator');_0x18b68c&&(_0x18b68c['textContent']=_0x3eb746,_0x18b68c['style']['color']=_0x18ad94>0x0?_0x59dab3(0x222):'#F44336',_0x18b68c[_0x59dab3(0x209)]['fontWeight']=_0x59dab3(0x1cf),_0x18b68c['style']['fontSize']='0.85em',_0x18b68c['style']['display']='inline',_0x18b68c['style'][_0x59dab3(0x1d9)]='visible',_0x18b68c['style']['opacity']='1');}}});})['catch'](_0x326418=>console['error'](_0xa3a650(0x207),_0x326418));}function initLadderToggles(){const _0x2d5347=a25_0x4b49,_0x25e964=document['getElementById'](_0x2d5347(0x1e5)),_0x1196e0=document['getElementById']('d2-switch'),_0x1a12b3=document['getElementById'](_0x2d5347(0x231)),_0x2e8898=document[_0x2d5347(0x1f2)]('duos-switch'),_0x306f45=document[_0x2d5347(0x1f2)]('d1-ladder-container'),_0x1462c5=document['getElementById']('d2-ladder-container'),_0x4012fe=document['getElementById']('d3-ladder-container'),_0x285187=document['getElementById'](_0x2d5347(0x1cd));function _0x396e71(){const _0x5978a9=_0x2d5347;if(_0x306f45)_0x306f45[_0x5978a9(0x239)]['remove']('active');if(_0x1462c5)_0x1462c5[_0x5978a9(0x239)]['remove']('active');if(_0x4012fe)_0x4012fe['classList'][_0x5978a9(0x20c)]('active');if(_0x285187)_0x285187['style'][_0x5978a9(0x201)]='none';if(_0x306f45)_0x306f45[_0x5978a9(0x209)]['display']=_0x5978a9(0x238);if(_0x1462c5)_0x1462c5['style']['display']=_0x5978a9(0x238);if(_0x4012fe)_0x4012fe[_0x5978a9(0x209)]['display']='none';}_0x25e964&&_0x25e964['addEventListener']('click',()=>{const _0x95b9a5=_0x2d5347;console['log'](_0x95b9a5(0x223)),_0x396e71();_0x306f45&&(_0x306f45['classList'][_0x95b9a5(0x235)]('active'),_0x306f45['style']['display']='block');document['getElementById'](_0x95b9a5(0x233))['style']['display']='block',document['getElementById'](_0x95b9a5(0x20f))['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']=_0x95b9a5(0x238);if(_0x25e964)_0x25e964['classList'][_0x95b9a5(0x235)](_0x95b9a5(0x1f0));if(_0x1196e0)_0x1196e0['classList']['remove']('active');if(_0x1a12b3)_0x1a12b3[_0x95b9a5(0x239)]['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x1196e0&&_0x1196e0['addEventListener']('click',()=>{const _0x1d03b9=_0x2d5347;console['log']('D2\x20toggle\x20clicked'),_0x396e71();_0x1462c5&&(_0x1462c5['classList']['add']('active'),_0x1462c5['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style'][_0x1d03b9(0x201)]='none',document['getElementById'](_0x1d03b9(0x20f))['style']['display']=_0x1d03b9(0x1f6),document['getElementById']('elo-recommendation-text-d3')['style'][_0x1d03b9(0x201)]=_0x1d03b9(0x238);if(_0x1196e0)_0x1196e0[_0x1d03b9(0x239)][_0x1d03b9(0x235)](_0x1d03b9(0x1f0));if(_0x25e964)_0x25e964['classList']['remove'](_0x1d03b9(0x1f0));if(_0x1a12b3)_0x1a12b3['classList'][_0x1d03b9(0x20c)]('active');displayLadderD2(),findBestOpponent('d2');}),_0x1a12b3&&_0x1a12b3[_0x2d5347(0x1ed)](_0x2d5347(0x21d),()=>{const _0x4eec93=_0x2d5347;console[_0x4eec93(0x1d3)]('D3\x20toggle\x20clicked'),_0x396e71();_0x4012fe&&(_0x4012fe['classList']['add']('active'),_0x4012fe['style']['display']=_0x4eec93(0x1f6));document[_0x4eec93(0x1f2)]('elo-recommendation-text-d1')['style'][_0x4eec93(0x201)]='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']=_0x4eec93(0x1f6);if(_0x1a12b3)_0x1a12b3['classList']['add']('active');if(_0x25e964)_0x25e964['classList'][_0x4eec93(0x20c)](_0x4eec93(0x1f0));if(_0x1196e0)_0x1196e0[_0x4eec93(0x239)][_0x4eec93(0x20c)]('active');displayLadderD3(),findBestOpponent('d3');}),_0x2e8898&&_0x2e8898['addEventListener']('click',()=>{const _0x4ce41=_0x2d5347;_0x396e71();if(_0x285187)_0x285187[_0x4ce41(0x209)]['display']='block';displayLadderDuos(),findBestOpponent(_0x4ce41(0x23d)),document['getElementById'](_0x4ce41(0x1f7))&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document[_0x4ce41(0x1f2)]('elo-recommendation-text-d1')['style']['display']=_0x4ce41(0x238),document['getElementById'](_0x4ce41(0x20f))['style'][_0x4ce41(0x201)]=_0x4ce41(0x238),document['getElementById'](_0x4ce41(0x206))['style']['display']='none';});}document['addEventListener']('DOMContentLoaded',()=>{const _0x44af9c=a25_0x4b49;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document[_0x44af9c(0x1f2)]('elo-recommendation-text-d1')['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0x315d00='d1'){const _0x56bed2=a25_0x4b49,_0x1124f0='elo-recommendation-text-'+_0x315d00,_0x2ca59a=document['getElementById'](_0x1124f0);if(!_0x2ca59a){console['error']('Recommendation\x20element\x20for\x20'+_0x315d00+_0x56bed2(0x228));return;}const _0x21db62=auth[_0x56bed2(0x1e3)];if(!_0x21db62){_0x2ca59a['textContent']='';return;}try{const _0x2bbabf=doc(db,'userProfiles',_0x21db62['uid']),_0x835f7=await getDoc(_0x2bbabf);if(!_0x835f7['exists']()){console[_0x56bed2(0x1d3)]('No\x20user\x20profile\x20found'),_0x2ca59a['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x5d7d2a=_0x835f7['data'](),_0x3be8f9=_0x5d7d2a[_0x56bed2(0x240)];if(!_0x3be8f9){_0x2ca59a[_0x56bed2(0x212)]='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x186bad;switch(_0x315d00){case'd1':_0x186bad=_0x56bed2(0x243);break;case'd2':_0x186bad='playersD2';break;case'd3':_0x186bad=_0x56bed2(0x1e1);break;case'duos':_0x186bad='playersDuos';break;default:_0x186bad='players';}if(_0x315d00==='duos'){const _0xd6378c=collection(db,_0x186bad),_0x2495d5=query(_0xd6378c,where(_0x56bed2(0x240),'==',_0x3be8f9)),_0x2908f2=await getDocs(_0x2495d5);if(_0x2908f2['empty']){_0x2ca59a['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x3ebd6d=_0x2908f2['docs'][0x0][_0x56bed2(0x21b)](),_0x7e9368=parseInt(_0x3ebd6d['eloRating'])||0x4b0;if(_0x3ebd6d[_0x56bed2(0x247)]&&_0x3ebd6d['teammate']){_0x2ca59a[_0x56bed2(0x1f5)]='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x3ebd6d['teammate']+'</span>.\x20Challenge\x20other\x20teams!';return;}const _0x5b709e=await getDocs(_0xd6378c);let _0x3f47ab=null,_0x2d53f8=-0x1;_0x5b709e[_0x56bed2(0x202)](_0x18f13c=>{const _0x5975e1=_0x56bed2,_0x4acb1e=_0x18f13c[_0x5975e1(0x21b)]();if(_0x4acb1e[_0x5975e1(0x240)]===_0x3be8f9)return;if(_0x4acb1e[_0x5975e1(0x247)])return;const _0x235d5b=parseInt(_0x4acb1e[_0x5975e1(0x1fb)])||0x4b0,_0x24a6e6=Math[_0x5975e1(0x242)](_0x235d5b-_0x7e9368),_0x3f8ee7=Math['max'](0x0,0xc8-_0x24a6e6);_0x3f8ee7>_0x2d53f8&&(_0x3f47ab=_0x4acb1e,_0x2d53f8=_0x3f8ee7);});if(_0x3f47ab){const _0x4a5e6e=parseInt(_0x3f47ab['eloRating'])||0x4b0;let _0x35fb6b='gray';if(_0x4a5e6e>=0x7d0)_0x35fb6b='#50C878';else{if(_0x4a5e6e>=0x708)_0x35fb6b=_0x56bed2(0x1e0);else{if(_0x4a5e6e>=0x640)_0x35fb6b='#C0C0C0';else _0x4a5e6e>=0x578&&(_0x35fb6b='#CD7F32');}}_0x2ca59a['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x35fb6b+_0x56bed2(0x1e7)+_0x3f47ab['username']+_0x56bed2(0x236)+_0x4a5e6e+')';}else _0x2ca59a[_0x56bed2(0x212)]='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x4e57ec=collection(db,_0x186bad),_0x572e1c=query(_0x4e57ec,where('username','==',_0x3be8f9)),_0x2f94b1=await getDocs(_0x572e1c);if(_0x2f94b1['empty']){_0x2ca59a['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x315d00[_0x56bed2(0x200)]()+'\x20ladder';return;}const _0x562108=_0x2f94b1[_0x56bed2(0x1e6)][0x0][_0x56bed2(0x21b)](),_0x34d7eb=parseInt(_0x562108[_0x56bed2(0x1fb)])||0x5dc,_0x878c42=await getDocs(_0x4e57ec);let _0x222d68=null,_0x258ac5=-0x1;const _0x26aa57=getPlayerRankName(_0x34d7eb);_0x878c42[_0x56bed2(0x202)](_0x50f1d3=>{const _0x5cb79e=_0x56bed2,_0x17953a=_0x50f1d3['data']();if(_0x17953a['username']===_0x3be8f9)return;const _0x409515=parseInt(_0x17953a['eloRating'])||0x5dc,_0x46dddd=getPlayerRankName(_0x409515),_0x718763=Math['abs'](_0x409515-_0x34d7eb),_0x36a8d2=0x20,_0x4099bb=0x1/(0x1+Math['pow'](0xa,(_0x409515-_0x34d7eb)/0x190)),_0x31b3f3=Math[_0x5cb79e(0x1e9)](_0x36a8d2*(0x1-_0x4099bb));if(_0x31b3f3<=0x0)return;let _0x8b53d0=0x0;const _0xfe33d=Math[_0x5cb79e(0x220)](0x0,0x64-_0x718763*0.5),_0x5b42ef=_0x31b3f3>=0x3&&_0x31b3f3<=0x8?0x32:_0x31b3f3>0x0&&_0x31b3f3<0xf?0x1e:0xa,_0x22cd98=_0x26aa57===_0x46dddd?0x28:0x0;_0x8b53d0=_0xfe33d+_0x5b42ef+_0x22cd98,_0x8b53d0>_0x258ac5&&(_0x222d68=_0x17953a,_0x258ac5=_0x8b53d0);});if(_0x222d68){const _0x2f07f2=parseInt(_0x222d68['eloRating'])||0x5dc;let _0x265d11='gray';if(_0x2f07f2>=0x7d0)_0x265d11=_0x56bed2(0x1dd);else{if(_0x2f07f2>=0x708)_0x265d11='#FFD700';else{if(_0x2f07f2>=0x640)_0x265d11=_0x56bed2(0x204);else _0x2f07f2>=0x578&&(_0x265d11=_0x56bed2(0x1d2));}}_0x2ca59a['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x34d7eb+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x265d11+';\x22>'+_0x222d68[_0x56bed2(0x240)]+_0x56bed2(0x1ec);}else _0x2ca59a['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x34d7eb+')';}catch(_0x469e07){console['error'](_0x56bed2(0x1f8),_0x469e07),_0x2ca59a['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x4409d6=>{const _0x2351ee=a25_0x4b49,_0x1c05f5=document[_0x2351ee(0x1f2)]('d1-ladder-container')&&document['getElementById'](_0x2351ee(0x230))[_0x2351ee(0x209)][_0x2351ee(0x201)]!==_0x2351ee(0x238),_0x5df468=document[_0x2351ee(0x1f2)](_0x2351ee(0x1d0))&&document[_0x2351ee(0x1f2)]('d2-ladder-container')['style']['display']!=='none',_0x167909=document['getElementById']('d3-ladder-container')&&document['getElementById']('d3-ladder-container')['style']['display']!==_0x2351ee(0x238),_0x217a69=document['getElementById']('duos-ladder-container')&&document['getElementById']('duos-ladder-container')[_0x2351ee(0x209)][_0x2351ee(0x201)]!=='none',_0x1ed935=_0x1c05f5?'d1':_0x5df468?'d2':_0x167909?'d3':_0x217a69?_0x2351ee(0x23d):'d1';findBestOpponent(_0x1ed935);}),document['addEventListener'](a25_0x145830(0x214),()=>{const _0x55edbd=a25_0x145830,_0x2addcc=document['getElementById']('duos-switch'),_0x2d585f=document['querySelector'](_0x55edbd(0x1ff));_0x2addcc&&_0x2d585f&&(_0x2addcc['addEventListener'](_0x55edbd(0x24a),async _0x5d8c5a=>{const _0x306a09=_0x55edbd;if(_0x5d8c5a['target']['checked']){const _0x34e67b=auth?.['currentUser'],_0x1d6f53=await checkIfUserIsAdmin(_0x34e67b);if(!_0x1d6f53){_0x5d8c5a['preventDefault']();const _0x4b6531=document['getElementById']('d1-switch');return _0x4b6531&&(_0x4b6531[_0x306a09(0x1de)]=!![],_0x4b6531[_0x306a09(0x23a)](new Event(_0x306a09(0x24a)))),showAdminOnlyMessage(),![];}}}),auth[_0x55edbd(0x23f)](async _0x2d4c79=>{const _0x1b60e7=_0x55edbd,_0xc9909d=await checkIfUserIsAdmin(_0x2d4c79);!_0xc9909d?(_0x2addcc['disabled']=!![],_0x2d585f[_0x1b60e7(0x209)]['opacity']='0.5',_0x2d585f['style']['cursor']='not-allowed',_0x2d585f[_0x1b60e7(0x1d7)]='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x2addcc['disabled']=![],_0x2d585f[_0x1b60e7(0x209)]['opacity']='1',_0x2d585f['style'][_0x1b60e7(0x1fe)]=_0x1b60e7(0x229),_0x2d585f[_0x1b60e7(0x1d7)]='');}));});async function checkIfUserIsAdmin(_0x8dcfff){const _0x3aa60e=a25_0x145830;if(!_0x8dcfff)return![];try{const _0x1e0540=[_0x3aa60e(0x241),'brian2af@outlook.com'];if(_0x8dcfff['email']&&_0x1e0540['includes'](_0x8dcfff['email']['toLowerCase']()))return!![];const _0x4057e1=['userProfiles','players','playersD2','playersD3'],_0x27de20=[_0x3aa60e(0x216),'owner','council','creative\x20lead'];for(const _0x173e67 of _0x4057e1){try{const _0x4ebb1e=doc(db,_0x173e67,_0x8dcfff['uid']),_0x342751=await getDoc(_0x4ebb1e);if(_0x342751['exists']()){const _0x39eb10=_0x342751[_0x3aa60e(0x21b)](),_0x5ad455=(_0x39eb10['roleName']||_0x39eb10['role']||'')[_0x3aa60e(0x215)]();if(_0x5ad455&&_0x27de20['includes'](_0x5ad455))return!![];}}catch(_0x528178){console['warn']('Error\x20checking\x20'+_0x173e67+':',_0x528178);}}return![];}catch(_0xff84da){return console['error']('Error\x20checking\x20admin\x20status:',_0xff84da),![];}}function showAdminOnlyMessage(){const _0xdbf0cd=a25_0x145830,_0xb92d1=document['getElementById']('admin-only-message');_0xb92d1&&_0xb92d1['remove']();const _0x159481=document[_0xdbf0cd(0x1da)]('div');_0x159481['id']='admin-only-message',_0x159481['style'][_0xdbf0cd(0x23c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x159481[_0xdbf0cd(0x1f5)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x159481),setTimeout(()=>{const _0x4d20a3=_0xdbf0cd;_0x159481[_0x4d20a3(0x1ea)]&&_0x159481[_0x4d20a3(0x20c)]();},0xbb8);}