function a43_0x44aa(){const _0x2bfcb2=['length','toString','push','lastUpdated','__proto__','Just\x20now','username','block','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','display','isReady','prototype','Error\x20removing\x20player\x20from\x20queue:','toDate','constructor','{}.constructor(\x22return\x20this\x22)(\x20)'];a43_0x44aa=function(){return _0x2bfcb2;};return a43_0x44aa();}function a43_0x5107(_0x246627,_0x7c533c){const _0x3e728d=a43_0x44aa();return a43_0x5107=function(_0x54dfaf,_0x2c6435){_0x54dfaf=_0x54dfaf-0x1eb;let _0x44aaef=_0x3e728d[_0x54dfaf];return _0x44aaef;},a43_0x5107(_0x246627,_0x7c533c);}const a43_0x54dfaf=(function(){let _0x14f01d=!![];return function(_0x8f28a9,_0x1884ac){const _0x2fa5ef=_0x14f01d?function(){if(_0x1884ac){const _0x5bc3cb=_0x1884ac['apply'](_0x8f28a9,arguments);return _0x1884ac=null,_0x5bc3cb;}}:function(){};return _0x14f01d=![],_0x2fa5ef;};}()),a43_0x3e728d=a43_0x54dfaf(this,function(){const _0x8f19b6=a43_0x5107;let _0x3d0624;try{const _0x593c1c=Function('return\x20(function()\x20'+_0x8f19b6(0x1fa)+');');_0x3d0624=_0x593c1c();}catch(_0x4321e5){_0x3d0624=window;}const _0x25e58d=_0x3d0624['console']=_0x3d0624['console']||{},_0x274e8e=['log','warn','info','error','exception','table','trace'];for(let _0x1e2ce7=0x0;_0x1e2ce7<_0x274e8e[_0x8f19b6(0x1eb)];_0x1e2ce7++){const _0x52b36d=a43_0x54dfaf[_0x8f19b6(0x1f9)][_0x8f19b6(0x1f6)]['bind'](a43_0x54dfaf),_0x5713a9=_0x274e8e[_0x1e2ce7],_0x102504=_0x25e58d[_0x5713a9]||_0x52b36d;_0x52b36d[_0x8f19b6(0x1ef)]=a43_0x54dfaf['bind'](a43_0x54dfaf),_0x52b36d[_0x8f19b6(0x1ec)]=_0x102504['toString']['bind'](_0x102504),_0x25e58d[_0x5713a9]=_0x52b36d;}});a43_0x3e728d();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x11f167){const _0x2a7227=a43_0x5107,_0x657719=document['getElementById']('queue-container');if(!_0x657719)return;if(_0x11f167[_0x2a7227(0x1eb)]===0x0){_0x657719['style'][_0x2a7227(0x1f4)]='none';return;}_0x657719['style']['display']=_0x2a7227(0x1f2);let _0x53c2a9='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x11f167['forEach'](_0x5bb7b9=>{_0x53c2a9+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x5bb7b9['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x5bb7b9['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x53c2a9+=_0x2a7227(0x1f3),_0x657719['innerHTML']=_0x53c2a9;}function formatQueueTime(_0x351b4a){const _0x4ad313=a43_0x5107;if(!_0x351b4a)return'Just\x20now';const _0x3faeb4=_0x351b4a['toDate']?_0x351b4a[_0x4ad313(0x1f8)]():new Date(_0x351b4a),_0x322d78=new Date(),_0x3c9c4d=Math['floor']((_0x322d78-_0x3faeb4)/0xea60);if(_0x3c9c4d<0x1)return _0x4ad313(0x1f0);return _0x3c9c4d+'m\x20in\x20queue';}async function checkQueueTimeout(_0x4e982f){const _0x57da9b=a43_0x5107;if(!_0x4e982f[_0x57da9b(0x1ee)])return;const _0x3b2ec4=_0x4e982f['lastUpdated'][_0x57da9b(0x1f8)]?_0x4e982f[_0x57da9b(0x1ee)][_0x57da9b(0x1f8)]():new Date(_0x4e982f[_0x57da9b(0x1ee)]),_0x1f2ea7=new Date(),_0x1fa774=Math['floor']((_0x1f2ea7-_0x3b2ec4)/0xea60);if(_0x1fa774>=0x1e)try{const _0x1c710e=doc(db,'readyPlayers',_0x4e982f['id']);await updateDoc(_0x1c710e,{'isReady':![]});}catch(_0x170935){console['error'](_0x57da9b(0x1f7),_0x170935);}}const unsubscribe=onSnapshot(readyPlayersRef,_0xc2dec=>{const _0x3ee5b0=[];_0xc2dec['forEach'](_0x2c5754=>{const _0x9c2d2e=a43_0x5107,_0x210b7b=_0x2c5754['data']();if(_0x210b7b[_0x9c2d2e(0x1f5)]===!![]){const _0x5ca6a1={'id':_0x2c5754['id'],'username':_0x210b7b[_0x9c2d2e(0x1f1)],'lastUpdated':_0x210b7b['lastUpdated']||new Date()};_0x3ee5b0[_0x9c2d2e(0x1ed)](_0x5ca6a1),checkQueueTimeout(_0x5ca6a1);}}),updateQueueDisplay(_0x3ee5b0);},_0x39ea35=>{console['error']('Error\x20in\x20queue\x20listener:',_0x39ea35);});window['addEventListener']('unload',()=>{unsubscribe();});