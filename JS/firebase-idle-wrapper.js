const a19_0xba1f22=a19_0x5b7d,a19_0x7c1e01=(function(){let _0x5943b0=!![];return function(_0x51d0b6,_0x271cb3){const _0x3fd518=_0x5943b0?function(){if(_0x271cb3){const _0x1fcbe2=_0x271cb3['apply'](_0x51d0b6,arguments);return _0x271cb3=null,_0x1fcbe2;}}:function(){};return _0x5943b0=![],_0x3fd518;};}()),a19_0x58a5ed=a19_0x7c1e01(this,function(){const _0x5e64d8=a19_0x5b7d,_0x3f077a=function(){let _0x4ff1f7;try{_0x4ff1f7=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x354029){_0x4ff1f7=window;}return _0x4ff1f7;},_0x504780=_0x3f077a(),_0x37349c=_0x504780['console']=_0x504780['console']||{},_0x46c8d7=[_0x5e64d8(0x1b2),'warn','info','error','exception','table','trace'];for(let _0xdd1aaa=0x0;_0xdd1aaa<_0x46c8d7['length'];_0xdd1aaa++){const _0x32f146=a19_0x7c1e01['constructor']['prototype'][_0x5e64d8(0x1c5)](a19_0x7c1e01),_0xc0ed5b=_0x46c8d7[_0xdd1aaa],_0xdf2113=_0x37349c[_0xc0ed5b]||_0x32f146;_0x32f146['__proto__']=a19_0x7c1e01['bind'](a19_0x7c1e01),_0x32f146[_0x5e64d8(0x1b0)]=_0xdf2113['toString']['bind'](_0xdf2113),_0x37349c[_0xc0ed5b]=_0x32f146;}});a19_0x58a5ed();import{auth,db}from'./firebase-config.js';function a19_0x39f9(){const _0x21d402=['error','\x20total\x20operations','pendingTimeout','clear','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','add','addDocument','safeOperation','[FirebaseIdle]\x20Active\x20listeners:\x20','getDocuments','blockedOperations','size','now','toString','get','log','suspendAllListeners','updateDocument','resumeAllListeners','_suspendedListeners','RDL_SESSION_SUSPENDED','style','activeListeners','checkSessionActive','resumeSession','debug','[FirebaseIdle]\x20Suspending\x20listener:','suspendSession','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20','catch','forEach','code','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','bind','function','createListener','pendingOperations','\x20operations:\x20','remove','substr','\x20operation'];a19_0x39f9=function(){return _0x21d402;};return a19_0x39f9();}import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x500bac=a19_0x5b7d;this[_0x500bac(0x1b9)]=new Map(),this[_0x500bac(0x1c8)]=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}[a19_0xba1f22(0x1ba)](){const _0xec397d=a19_0xba1f22;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn']('[FirebaseIdle]\x20Blocked\x20'+this[_0xec397d(0x1ad)]+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console[_0xec397d(0x1b2)](_0xec397d(0x1c4)),![];return!![];}async[a19_0xba1f22(0x1aa)](_0x587910,_0x25f729,..._0x2efec1){const _0x5accc5=a19_0xba1f22;if(!this[_0x5accc5(0x1ba)]()){const _0x3feaa6=_0x25f729+'-'+Date[_0x5accc5(0x1af)]()+'-'+Math['random']()[_0x5accc5(0x1b0)](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x3feaa6,{'operation':_0x587910,'operationType':_0x25f729,'args':_0x2efec1}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{const _0x59dde5=_0x5accc5;this['pendingOperations'][_0x59dde5(0x1a6)](),this[_0x59dde5(0x1a5)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x587910(..._0x2efec1);}catch(_0x3b0347){if(_0x3b0347[_0x5accc5(0x1c3)]==='unavailable'||_0x3b0347['code']==='resource-exhausted'||_0x3b0347['message']&&_0x3b0347['message']['includes']('network'))return handleNetworkError(),null;throw _0x3b0347;}}async['getDocument'](_0x507aff){const _0x2f65fc=a19_0xba1f22;return this['safeOperation'](getDoc,_0x2f65fc(0x1b1),_0x507aff);}async[a19_0xba1f22(0x1ac)](_0x32cde0){const _0x285bfc=a19_0xba1f22;return this[_0x285bfc(0x1aa)](getDocs,'query',_0x32cde0);}async[a19_0xba1f22(0x1a9)](_0x4f4d83,_0x4e9d92){const _0x3af025=a19_0xba1f22;return this['safeOperation'](addDoc,_0x3af025(0x1a8),_0x4f4d83,_0x4e9d92);}async['setDocument'](_0x4b49bc,_0x2f5960,_0xdcb064={}){return this['safeOperation'](setDoc,'set',_0x4b49bc,_0x2f5960,_0xdcb064);}async[a19_0xba1f22(0x1b4)](_0x3b9f35,_0x568479){const _0x564465=a19_0xba1f22;return this[_0x564465(0x1aa)](updateDoc,'update',_0x3b9f35,_0x568479);}async['deleteDocument'](_0x4af327){return this['safeOperation'](deleteDoc,'delete',_0x4af327);}[a19_0xba1f22(0x1b3)](){const _0xe2a355=a19_0xba1f22;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this[_0xe2a355(0x1b9)]['size']),this['_suspendedListeners']=new Map(this[_0xe2a355(0x1b9)]),this[_0xe2a355(0x1b9)]['forEach']((_0x4172ea,_0x22a57c)=>{const _0x5441f1=_0xe2a355;console['log'](_0x5441f1(0x1bd),_0x22a57c);if(typeof _0x4172ea===_0x5441f1(0x1c6))try{_0x4172ea(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x22a57c);}catch(_0x38ac82){console[_0x5441f1(0x1a3)]('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x22a57c,_0x38ac82);}}),this['activeListeners']['clear']();if(this[_0xe2a355(0x1bc)]){const _0x4759d4=document['createElement']('div');_0x4759d4['id']='firebase-suspend-indicator',_0x4759d4[_0xe2a355(0x1b8)]['cssText']=_0xe2a355(0x1bf),_0x4759d4['textContent']='Firebase:\x20Suspended',document['body']['appendChild'](_0x4759d4);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}[a19_0xba1f22(0x1b5)](){const _0x573213=a19_0xba1f22;if(!this['_suspendedListeners']||this['_suspendedListeners']['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this[_0x573213(0x1b6)]['forEach']((_0x3f32c4,_0x1182d7)=>{const _0x1c823d=_0x573213;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x1182d7);try{if(typeof _0x3f32c4==='function'){console['warn'](_0x1c823d(0x1a7),_0x1182d7);return;}const {query:_0x4b9ffe,callback:_0x340828,options:_0x1b332a}=_0x3f32c4;if(_0x4b9ffe&&_0x340828){const _0x1e626a=onSnapshot(_0x4b9ffe,_0x340828,_0x1b332a||{});this['activeListeners']['set'](_0x1182d7,_0x1e626a),console[_0x1c823d(0x1b2)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x1182d7);}}catch(_0xa9b5c6){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x1182d7,_0xa9b5c6);}}),this['_suspendedListeners']['clear']();const _0x25a4ad=document['getElementById']('firebase-suspend-indicator');_0x25a4ad&&_0x25a4ad[_0x573213(0x1ca)](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}[a19_0xba1f22(0x1c7)](_0x153699,_0x25ada9,_0x5052ef={},_0x4f5fa2=null){const _0x562b4a=a19_0xba1f22,_0x30404c=_0x4f5fa2||'listener_'+Date[_0x562b4a(0x1af)]()+'_'+Math['random']()[_0x562b4a(0x1b0)](0x24)[_0x562b4a(0x1cb)](0x2,0x9);this[_0x562b4a(0x1bc)]&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x30404c);if(!this[_0x562b4a(0x1ba)]())return console['log'](_0x562b4a(0x1c0)+_0x30404c),()=>{};try{const _0x306c48=onSnapshot(_0x153699,_0x25ada9,_0x5052ef);return this[_0x562b4a(0x1b9)]['set'](_0x30404c,{'unsubscribe':_0x306c48,'query':_0x153699,'callback':_0x25ada9,'options':_0x5052ef}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x30404c),console['log'](_0x562b4a(0x1ab)+this['activeListeners'][_0x562b4a(0x1ae)])),()=>{const _0x5f43e9=_0x562b4a;this['debug']&&console[_0x5f43e9(0x1b2)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x30404c);try{_0x306c48(),this[_0x5f43e9(0x1b9)]['delete'](_0x30404c),this[_0x5f43e9(0x1bc)]&&(console[_0x5f43e9(0x1b2)]('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x30404c),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x371778){console[_0x5f43e9(0x1a3)]('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x30404c+':',_0x371778);}};}catch(_0x23c2e9){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x30404c+':',_0x23c2e9),()=>{};}}['executePendingOperations'](_0x5cae10='all'){const _0x45115a=a19_0xba1f22;console['log']('Executing\x20pending\x20'+_0x5cae10+_0x45115a(0x1c9)+this['pendingOperations']['size']+_0x45115a(0x1a4));const _0x1c0ff7=new Map(this['pendingOperations']);this['pendingOperations'][_0x45115a(0x1a6)](),_0x1c0ff7[_0x45115a(0x1c2)]((_0x594238,_0x1b9b22)=>{const _0x95c330=_0x45115a;_0x5cae10==='all'||_0x594238['operationType']===_0x5cae10?(console['log']('Executing\x20delayed\x20'+_0x594238['operationType']+_0x95c330(0x1cc)),this['safeOperation'](_0x594238['operation'],_0x594238['operationType'],..._0x594238['args'])['catch'](_0x700ac7=>console['error']('Error\x20executing\x20pending\x20operation:',_0x700ac7))):this['pendingOperations']['set'](_0x1b9b22,_0x594238);});}['enableDebug'](_0xe6758e=!![]){const _0x59d9a0=a19_0xba1f22;this[_0x59d9a0(0x1bc)]=_0xe6758e,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0xe6758e?'enabled':'disabled'));if(_0xe6758e){const _0x42324b=window[_0x59d9a0(0x1b7)];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system','test'))['then'](_0x3d777f=>{const _0x5f47f9=_0x59d9a0;console[_0x5f47f9(0x1b2)]('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x3d777f);})[_0x59d9a0(0x1c1)](_0x59ef28=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x59ef28);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x42324b;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x181c1c=a19_0xba1f22,_0x50cd78=window['suspendSession']||function(){},_0x27f73e=window[_0x181c1c(0x1bb)]||function(){};window[_0x181c1c(0x1be)]=function(){_0x50cd78(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){const _0x553529=_0x181c1c;_0x27f73e(),firebaseIdle[_0x553529(0x1b5)]();};}function a19_0x5b7d(_0x18e92f,_0xa98004){const _0x58a5ed=a19_0x39f9();return a19_0x5b7d=function(_0x7c1e01,_0x476f48){_0x7c1e01=_0x7c1e01-0x1a3;let _0x39f96a=_0x58a5ed[_0x7c1e01];return _0x39f96a;},a19_0x5b7d(_0x18e92f,_0xa98004);}export default firebaseIdle;