const a0_0x389de0=a0_0x9337;(function(_0x938e6,_0x359f30){const _0x56ad8f=a0_0x9337,_0x2d9287=_0x938e6();while(!![]){try{const _0x51669f=parseInt(_0x56ad8f(0x77))/0x1*(-parseInt(_0x56ad8f(0x7b))/0x2)+parseInt(_0x56ad8f(0x6f))/0x3+-parseInt(_0x56ad8f(0x6e))/0x4+parseInt(_0x56ad8f(0x72))/0x5*(-parseInt(_0x56ad8f(0x70))/0x6)+-parseInt(_0x56ad8f(0x84))/0x7*(-parseInt(_0x56ad8f(0x76))/0x8)+parseInt(_0x56ad8f(0x78))/0x9+parseInt(_0x56ad8f(0x7e))/0xa;if(_0x51669f===_0x359f30)break;else _0x2d9287['push'](_0x2d9287['shift']());}catch(_0x2237c4){_0x2d9287['push'](_0x2d9287['shift']());}}}(a0_0x4a0f,0x863a8));const a0_0x5a3e49=(function(){let _0x2da60c=!![];return function(_0x39210b,_0xe0ffbf){const _0x5b3abd=_0x2da60c?function(){if(_0xe0ffbf){const _0x11c380=_0xe0ffbf['apply'](_0x39210b,arguments);return _0xe0ffbf=null,_0x11c380;}}:function(){};return _0x2da60c=![],_0x5b3abd;};}()),a0_0x9c1fb0=a0_0x5a3e49(this,function(){const _0x47df5a=a0_0x9337,_0x6ac4bf=function(){const _0x3ca468=a0_0x9337;let _0x347160;try{_0x347160=Function('return\x20(function()\x20'+_0x3ca468(0x87)+');')();}catch(_0x4965b0){_0x347160=window;}return _0x347160;},_0xd3abb8=_0x6ac4bf(),_0x219c44=_0xd3abb8['console']=_0xd3abb8['console']||{},_0x1ac9c5=[_0x47df5a(0x83),'warn','info','error','exception','table','trace'];for(let _0x477e67=0x0;_0x477e67<_0x1ac9c5['length'];_0x477e67++){const _0x795700=a0_0x5a3e49['constructor']['prototype']['bind'](a0_0x5a3e49),_0x26d456=_0x1ac9c5[_0x477e67],_0x59d1bd=_0x219c44[_0x26d456]||_0x795700;_0x795700['__proto__']=a0_0x5a3e49['bind'](a0_0x5a3e49),_0x795700[_0x47df5a(0x74)]=_0x59d1bd['toString']['bind'](_0x59d1bd),_0x219c44[_0x26d456]=_0x795700;}});a0_0x9c1fb0();import{collection,addDoc,serverTimestamp,query,orderBy,getDocs,limit,startAfter,doc,setDoc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const ELO_THRESHOLDS=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':a0_0x389de0(0x7c),'elo':0x4b0}];async function getUsernameById(_0x589170){const _0x5b3ab6=a0_0x389de0;try{if(!_0x589170)return'Unknown\x20Player';const _0x2513f7=await getDoc(doc(db,'players',_0x589170));return _0x2513f7[_0x5b3ab6(0x7f)]()?_0x2513f7['data']()[_0x5b3ab6(0x75)]:'Unknown\x20Player';}catch(_0x14e9b0){return console['error'](_0x5b3ab6(0x81),_0x14e9b0),'Unknown\x20Player';}}export async function recordEloChange({playerId:_0x3d6c4f,previousElo:_0x28a5a2,newElo:_0x236a60,opponentId:_0xab088e,matchResult:_0x3ac59c,previousPosition:_0x4f3e1f,newPosition:_0x386ed4,isPromotion:isPromotion=![],isDemotion:isDemotion=![],timestamp:_0x34e312}){const _0xc93446=a0_0x389de0;try{const _0x52754f=doc(collection(db,'eloHistory'));let _0xf781cc='match';if(isPromotion)_0xf781cc='promotion';if(isDemotion)_0xf781cc='demotion';let _0x230e20='Unranked';if(_0x236a60>=0x834)_0x230e20='Emerald';else{if(_0x236a60>=0x708)_0x230e20='Gold';else{if(_0x236a60>=0x640)_0x230e20='Silver';else{if(_0x236a60>=0x578)_0x230e20=_0xc93446(0x71);}}}return await setDoc(_0x52754f,{'type':_0xf781cc,'player':_0x3d6c4f,'opponent':_0xab088e,'previousElo':_0x28a5a2,'newElo':_0x236a60,'change':_0x236a60-_0x28a5a2,'matchResult':_0x3ac59c,'previousPosition':_0x4f3e1f,'newPosition':_0x386ed4,'rankAchieved':_0x230e20,'timestamp':_0x34e312}),console[_0xc93446(0x83)](_0xc93446(0x7d)+_0x3d6c4f),!![];}catch(_0x2115b2){console['error'](_0xc93446(0x82),_0x2115b2);throw _0x2115b2;}}function a0_0x9337(_0x44cc1a,_0x166e89){const _0x354c83=a0_0x4a0f();return a0_0x9337=function(_0x9c1fb0,_0x5a3e49){_0x9c1fb0=_0x9c1fb0-0x6e;let _0x3ac5d5=_0x354c83[_0x9c1fb0];return _0x3ac5d5;},a0_0x9337(_0x44cc1a,_0x166e89);}export async function getEloHistory(){const _0x420606=a0_0x389de0;try{const _0x44de9b=collection(db,'eloHistory'),_0x348e2f=query(_0x44de9b,orderBy(_0x420606(0x73),'desc')),_0x3e52db=await getDocs(_0x348e2f),_0x398993=_0x3e52db[_0x420606(0x85)]['map'](async _0x5b4da5=>{const _0x48fc95=_0x420606,_0x43c12a=_0x5b4da5[_0x48fc95(0x79)](),[_0x58f96c,_0x12db45]=await Promise['all']([getUsernameById(_0x43c12a['player']),getUsernameById(_0x43c12a['opponent'])]);return{..._0x43c12a,'playerUsername':_0x58f96c,'opponentUsername':_0x12db45,'change':_0x43c12a['newElo']-_0x43c12a[_0x48fc95(0x80)],'timestamp':_0x43c12a[_0x48fc95(0x73)]};}),_0x130fdd=await Promise[_0x420606(0x86)](_0x398993);return{'entries':_0x130fdd};}catch(_0xfe8d7b){console['error'](_0x420606(0x7a),_0xfe8d7b);throw _0xfe8d7b;}}export function resetPagination(){lastVisible=null;}function a0_0x4a0f(){const _0x111c20=['{}.constructor(\x22return\x20this\x22)(\x20)','298912pWEtwa','2909520gDLEOp','870IDHhIk','Bronze','7305ZWrPxd','timestamp','toString','username','1058824sAKlFu','256285hPNHNJ','1988604XnBHAM','data','Error\x20fetching\x20ELO\x20history:','8nCivtM','Unranked','ELO\x20history\x20recorded\x20for\x20','89520xbFukW','exists','previousElo','Error\x20fetching\x20username:','Error\x20recording\x20ELO\x20history:','log','35eROqQU','docs','all'];a0_0x4a0f=function(){return _0x111c20;};return a0_0x4a0f();}