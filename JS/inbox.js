const a22_0x4050e2=a22_0x160b,a22_0x2f7145=(function(){let _0x379958=!![];return function(_0x1f8e5a,_0x170d0c){const _0x112274=_0x379958?function(){const _0xf72ee5=a22_0x160b;if(_0x170d0c){const _0x5525e2=_0x170d0c[_0xf72ee5(0xef)](_0x1f8e5a,arguments);return _0x170d0c=null,_0x5525e2;}}:function(){};return _0x379958=![],_0x112274;};}()),a22_0x105b14=a22_0x2f7145(this,function(){const _0x323d00=a22_0x160b;let _0x437509;try{const _0x1a63e8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x437509=_0x1a63e8();}catch(_0xae6e3b){_0x437509=window;}const _0x17baf1=_0x437509['console']=_0x437509[_0x323d00(0x10f)]||{},_0x58f2c9=['log','warn','info','error',_0x323d00(0x11a),'table',_0x323d00(0xfb)];for(let _0x465211=0x0;_0x465211<_0x58f2c9['length'];_0x465211++){const _0x3255af=a22_0x2f7145['constructor']['prototype'][_0x323d00(0x107)](a22_0x2f7145),_0x398221=_0x58f2c9[_0x465211],_0x1556b3=_0x17baf1[_0x398221]||_0x3255af;_0x3255af['__proto__']=a22_0x2f7145['bind'](a22_0x2f7145),_0x3255af['toString']=_0x1556b3['toString']['bind'](_0x1556b3),_0x17baf1[_0x398221]=_0x3255af;}});function a22_0x55a4(){const _0x40a918=['target','display','m\x20ago','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','response-message','success','innerHTML','team_invite','accepted','\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22','#send-response','desc','addEventListener','find','map','floor','currentFilter','proposedTeamName','sort','renderInvitations','./ladderduos.js','updateNotificationCount','.filter-btn','apply','respond','init','location','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','pageSize','sentInvitations','destroy','gameInvitations','disabled','invitations','sentUnsubscribe','trace','openResponseModal','trim','classList','createTeamFromInvitation','toUsername','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toDate','Failed\x20to\x20','createElement','\x22\x20created\x20successfully!','querySelector','bind','status','teamColor','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','querySelectorAll','teamData','style','console','textContent','pending','modal-overlay','updateInvitationStatus','docs','getTimeAgo','createdAt','outbox','click','remove','exception','message','dataset'];a22_0x55a4=function(){return _0x40a918;};return a22_0x55a4();}function a22_0x160b(_0xd9bb79,_0x2ee289){const _0x105b14=a22_0x55a4();return a22_0x160b=function(_0x2f7145,_0x64cd6d){_0x2f7145=_0x2f7145-0xd7;let _0x55a462=_0x105b14[_0x2f7145];return _0x55a462;},a22_0x160b(_0xd9bb79,_0x2ee289);}a22_0x105b14();import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x20a48e=a22_0x160b;this['currentFilter']='pending',this[_0x20a48e(0xf9)]=[],this[_0x20a48e(0xf5)]=[],this['unsubscribe']=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this['lastDoc']=null,this['hasMore']=!![],this[_0x20a48e(0xf1)]();}async[a22_0x4050e2(0xf1)](){auth['onAuthStateChanged'](_0x57fe77=>{const _0x475c92=a22_0x160b;_0x57fe77?(this['loadInvitations'](_0x57fe77['uid']),this['setupEventListeners']()):window[_0x475c92(0xf2)]['href']='./login.html';});}['setupEventListeners'](){const _0xe5e643=a22_0x4050e2;document['querySelectorAll'](_0xe5e643(0xee))['forEach'](_0x3ab4f0=>{const _0x40b6be=_0xe5e643;_0x3ab4f0['addEventListener'](_0x40b6be(0x118),()=>{const _0x7913a8=_0x40b6be;document['querySelectorAll'](_0x7913a8(0xee))['forEach'](_0x296fe2=>_0x296fe2['classList']['remove']('active')),_0x3ab4f0[_0x7913a8(0xfe)]['add']('active'),this[_0x7913a8(0xe8)]=_0x3ab4f0[_0x7913a8(0x11c)]['filter'],this['renderInvitations']();});});}['loadInvitations'](_0x468b8c){const _0x7e84a1=a22_0x4050e2,_0x154e80=collection(db,_0x7e84a1(0xf7));let _0x536205=query(_0x154e80,where('toUserId','==',_0x468b8c),orderBy('createdAt','desc'),limit(this[_0x7e84a1(0xf4)]));this['unsubscribe']=onSnapshot(_0x536205,_0x2b3824=>{const _0x5c536c=_0x7e84a1;this[_0x5c536c(0xf9)]=_0x2b3824['docs']['map'](_0x188622=>({'id':_0x188622['id'],..._0x188622['data']()})),this[_0x5c536c(0xeb)](),this[_0x5c536c(0xed)]();});let _0x528609=query(_0x154e80,where('fromUserId','==',_0x468b8c),orderBy(_0x7e84a1(0x116),_0x7e84a1(0xe3)),limit(this['pageSize']));this['sentUnsubscribe']=onSnapshot(_0x528609,_0x307d32=>{const _0x5bb608=_0x7e84a1;this['sentInvitations']=_0x307d32[_0x5bb608(0x114)][_0x5bb608(0xe6)](_0x1e39af=>({'id':_0x1e39af['id'],..._0x1e39af['data'](),'isSent':!![]})),this['renderInvitations']();});}['renderInvitations'](){const _0xf4f325=a22_0x4050e2,_0x4e6a4d=document['getElementById']('inbox-content');if(!_0x4e6a4d)return;let _0x48a173=[];if(this['currentFilter']==='outbox')_0x48a173=this['sentInvitations'];else this[_0xf4f325(0xe8)]==='all'?_0x48a173=[...this['invitations'],...this['sentInvitations']][_0xf4f325(0xea)]((_0x1f79d4,_0x50b308)=>{const _0x4996b5=_0xf4f325,_0x6ae07d=_0x1f79d4['createdAt']?.['toDate']?_0x1f79d4['createdAt'][_0x4996b5(0x102)]():new Date(_0x1f79d4['createdAt']),_0x243926=_0x50b308[_0x4996b5(0x116)]?.['toDate']?_0x50b308[_0x4996b5(0x116)][_0x4996b5(0x102)]():new Date(_0x50b308['createdAt']);return _0x243926-_0x6ae07d;}):_0x48a173=this[_0xf4f325(0xf9)]['filter'](_0x2cc457=>_0x2cc457['status']===this['currentFilter']);if(_0x48a173['length']===0x0){const _0x4d3456=this['currentFilter']===_0xf4f325(0x117)?'sent':this['currentFilter']==='all'?'':this[_0xf4f325(0xe8)];_0x4e6a4d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x4d3456+_0xf4f325(0xe0)+(this['currentFilter']==='outbox'?'Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.':'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0x4e6a4d[_0xf4f325(0xdd)]=_0x48a173[_0xf4f325(0xe6)](_0x448fa4=>this['createInvitationCard'](_0x448fa4))['join'](''),this['setupActionListeners']();}['createInvitationCard'](_0x6f7444){const _0x1ae8a3=a22_0x4050e2,_0x19327e=_0x6f7444['createdAt']?.['toDate']?_0x6f7444['createdAt'][_0x1ae8a3(0x102)]():new Date(_0x6f7444['createdAt']),_0x1fccfc=this['getTimeAgo'](_0x19327e),_0x4aac31=_0x6f7444['isSent']||![];let _0x454e08='';return _0x6f7444['type']==='team_invite'?_0x454e08=_0x1ae8a3(0x10b)+_0x6f7444[_0x1ae8a3(0x11b)]+_0x1ae8a3(0xf3)+_0x6f7444['teamData']['teamColor']+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x6f7444[_0x1ae8a3(0x10d)]['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20â€¢\x20Color:\x20'+_0x6f7444['teamData'][_0x1ae8a3(0x109)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x454e08='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x6f7444[_0x1ae8a3(0x11b)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20'+_0x6f7444[_0x1ae8a3(0x108)]+'\x20'+(_0x4aac31?'sent-invitation':'')+'\x22\x20data-invitation-id=\x22'+_0x6f7444['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4aac31?'To:\x20'+_0x6f7444[_0x1ae8a3(0x100)]:_0x6f7444['fromUsername'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4aac31?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x1fccfc+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x6f7444['status']+'\x22>'+_0x6f7444['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x454e08+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x4aac31&&_0x6f7444['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x6f7444['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x6f7444['id']+_0x1ae8a3(0x10a)+(_0x6f7444['type']!==_0x1ae8a3(0xde)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x6f7444['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x4aac31&&_0x6f7444['status']==='pending'?_0x1ae8a3(0xe1)+_0x6f7444['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){const _0x375b2b=a22_0x4050e2;document[_0x375b2b(0x10c)]('.action-btn')['forEach'](_0x4f41ef=>{const _0x17e756=_0x375b2b;_0x4f41ef[_0x17e756(0xe4)]('click',async _0x4a7494=>{const _0x3a327f=_0x17e756,_0x46bb5a=_0x4f41ef[_0x3a327f(0x11c)]['action'],_0x3f34aa=_0x4f41ef[_0x3a327f(0x11c)]['invitationId'];_0x4f41ef[_0x3a327f(0xf8)]=!![];const _0x108c85=_0x4f41ef['innerHTML'];_0x4f41ef['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>';try{switch(_0x46bb5a){case'accept':await this['updateInvitationStatus'](_0x3f34aa,_0x3a327f(0xdf));break;case'decline':await this[_0x3a327f(0x113)](_0x3f34aa,'declined');break;case'cancel':await this[_0x3a327f(0x113)](_0x3f34aa,'cancelled');break;case _0x3a327f(0xf0):this['openResponseModal'](_0x3f34aa);break;}}catch(_0x1e7b68){console['error']('Error\x20performing\x20'+_0x46bb5a+':',_0x1e7b68),alert(_0x3a327f(0x103)+_0x46bb5a+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x4f41ef['disabled']=![],_0x4f41ef['innerHTML']=_0x108c85;}});});}async['updateInvitationStatus'](_0x5954a0,_0x26f9bb){const _0x4d2448=a22_0x4050e2;try{const _0x38c46b=this['invitations'][_0x4d2448(0xe5)](_0x21a7bb=>_0x21a7bb['id']===_0x5954a0);_0x38c46b&&_0x38c46b['type']===_0x4d2448(0xde)&&_0x26f9bb===_0x4d2448(0xdf)&&await this[_0x4d2448(0xff)](_0x38c46b);const _0xddd378=doc(db,'gameInvitations',_0x5954a0);await updateDoc(_0xddd378,{'status':_0x26f9bb,'respondedAt':new Date()}),_0x38c46b&&(_0x38c46b['status']=_0x26f9bb,_0x38c46b['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x19a742){console['error']('Error\x20updating\x20invitation\x20status:',_0x19a742);throw _0x19a742;}}[a22_0x4050e2(0xfc)](_0x521b45){const _0x2c1899=a22_0x4050e2,_0x2c2d15=this[_0x2c1899(0xf9)][_0x2c1899(0xe5)](_0x36aaae=>_0x36aaae['id']===_0x521b45);if(!_0x2c2d15)return;const _0x4256cf=document[_0x2c1899(0x104)]('div');_0x4256cf['className']=_0x2c1899(0x112),_0x4256cf[_0x2c1899(0xdd)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x2c2d15['fromUsername']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x2c2d15['value']+_0x2c1899(0x101);if(!document['getElementById']('modal-styles')){const _0x355c4b=document['createElement'](_0x2c1899(0x10e));_0x355c4b['id']='modal-styles',_0x355c4b['textContent']=_0x2c1899(0xda),document['head']['appendChild'](_0x355c4b);}document['body']['appendChild'](_0x4256cf),_0x4256cf['querySelector']('.modal-close')['addEventListener'](_0x2c1899(0x118),()=>_0x4256cf[_0x2c1899(0x119)]()),_0x4256cf[_0x2c1899(0x106)]('#cancel-response')[_0x2c1899(0xe4)]('click',()=>_0x4256cf['remove']()),_0x4256cf['addEventListener']('click',_0x138e33=>{const _0x4709d3=_0x2c1899;if(_0x138e33[_0x4709d3(0xd7)]===_0x4256cf)_0x4256cf[_0x4709d3(0x119)]();}),_0x4256cf['querySelector'](_0x2c1899(0xe2))[_0x2c1899(0xe4)](_0x2c1899(0x118),()=>{const _0x4c238c=_0x2c1899,_0x286929=document['getElementById'](_0x4c238c(0xdb))['value'][_0x4c238c(0xfd)]();_0x286929&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x4256cf[_0x4c238c(0x119)]());});}async['createTeamFromInvitation'](_0x5b9424){const _0x569c9b=a22_0x4050e2;try{const {createTeam:_0x53f657}=await import(_0x569c9b(0xec)),_0x5a4d16=await _0x53f657(_0x5b9424['fromUsername'],_0x5b9424['toUsername'],_0x5b9424['teamData']['proposedTeamName'],_0x5b9424['teamData']['teamColor']);if(!_0x5a4d16[_0x569c9b(0xdc)])throw new Error(_0x5a4d16['error']);alert('Team\x20\x22'+_0x5b9424[_0x569c9b(0x10d)][_0x569c9b(0xe9)]+_0x569c9b(0x105));}catch(_0x38dae6){console['error']('Error\x20creating\x20team:',_0x38dae6);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x38dae6['message']);}}[a22_0x4050e2(0xed)](){const _0x1e64c4=a22_0x4050e2,_0x1beb1b=this['invitations']['filter'](_0x3bcabb=>_0x3bcabb['status']===_0x1e64c4(0x111))['length'],_0xdf9704=document['getElementById']('inbox-notification');_0xdf9704&&(_0x1beb1b>0x0?(_0xdf9704['style']['display']='inline-block',_0xdf9704[_0x1e64c4(0x110)]=_0x1beb1b>0x9?'9+':_0x1beb1b):_0xdf9704['style'][_0x1e64c4(0xd8)]='none');}[a22_0x4050e2(0x115)](_0x45e11e){const _0x252e4c=a22_0x4050e2,_0x264e20=new Date(),_0xa1d68c=_0x264e20-_0x45e11e,_0x3b8cb8=Math['floor'](_0xa1d68c/(0x3e8*0x3c)),_0x138709=Math['floor'](_0xa1d68c/(0x3e8*0x3c*0x3c)),_0x194e91=Math[_0x252e4c(0xe7)](_0xa1d68c/(0x3e8*0x3c*0x3c*0x18));if(_0x3b8cb8<0x1)return'Just\x20now';if(_0x3b8cb8<0x3c)return _0x3b8cb8+_0x252e4c(0xd9);if(_0x138709<0x18)return _0x138709+'h\x20ago';if(_0x194e91<0x7)return _0x194e91+'d\x20ago';return _0x45e11e['toLocaleDateString']();}[a22_0x4050e2(0xf6)](){const _0x5bc7a2=a22_0x4050e2;this['unsubscribe']&&this['unsubscribe'](),this['sentUnsubscribe']&&this[_0x5bc7a2(0xfa)]();}}document['addEventListener']('DOMContentLoaded',()=>{new InboxManager();});