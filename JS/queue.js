const a45_0x51c7c9=a45_0x288f,a45_0x1e8bb9=(function(){let _0x4833ef=!![];return function(_0x2039c2,_0x5a6fdf){const _0xb3db8b=_0x4833ef?function(){const _0x3036de=a45_0x288f;if(_0x5a6fdf){const _0x266901=_0x5a6fdf[_0x3036de(0x16d)](_0x2039c2,arguments);return _0x5a6fdf=null,_0x266901;}}:function(){};return _0x4833ef=![],_0xb3db8b;};}()),a45_0xc08fd4=a45_0x1e8bb9(this,function(){const _0x4fa250=a45_0x288f,_0xc1a00f=function(){const _0x1f4c42=a45_0x288f;let _0x4ef107;try{_0x4ef107=Function('return\x20(function()\x20'+_0x1f4c42(0x161)+');')();}catch(_0x30bf1e){_0x4ef107=window;}return _0x4ef107;},_0x24e626=_0xc1a00f(),_0x495d7c=_0x24e626[_0x4fa250(0x16b)]=_0x24e626[_0x4fa250(0x16b)]||{},_0x42ded7=[_0x4fa250(0x15a),'warn','info','error',_0x4fa250(0x16a),'table','trace'];for(let _0x39de27=0x0;_0x39de27<_0x42ded7['length'];_0x39de27++){const _0x46ed15=a45_0x1e8bb9['constructor'][_0x4fa250(0x169)]['bind'](a45_0x1e8bb9),_0x53a2fe=_0x42ded7[_0x39de27],_0x16c33e=_0x495d7c[_0x53a2fe]||_0x46ed15;_0x46ed15['__proto__']=a45_0x1e8bb9[_0x4fa250(0x15d)](a45_0x1e8bb9),_0x46ed15['toString']=_0x16c33e['toString'][_0x4fa250(0x15d)](_0x16c33e),_0x495d7c[_0x53a2fe]=_0x46ed15;}});function a45_0x364a(){const _0x352459=['Unknown\x20Player','log','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','bind','unload','addEventListener','isReady','{}.constructor(\x22return\x20this\x22)(\x20)','toDate','innerHTML','Just\x20now','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','none','error','push','prototype','exception','console','forEach','apply'];a45_0x364a=function(){return _0x352459;};return a45_0x364a();}function a45_0x288f(_0xdb71fc,_0x3e8080){const _0xc08fd4=a45_0x364a();return a45_0x288f=function(_0x1e8bb9,_0x48f4d8){_0x1e8bb9=_0x1e8bb9-0x159;let _0x364a4c=_0xc08fd4[_0x1e8bb9];return _0x364a4c;},a45_0x288f(_0xdb71fc,_0x3e8080);}a45_0xc08fd4();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x5c1755){const _0x41ce6e=a45_0x288f,_0x666176=document['getElementById']('queue-container');if(!_0x666176)return;if(_0x5c1755['length']===0x0){_0x666176['style']['display']=_0x41ce6e(0x166);return;}_0x666176['style']['display']='block';let _0x70c2ab=_0x41ce6e(0x15c);_0x5c1755[_0x41ce6e(0x16c)](_0x16d2a6=>{const _0x30042e=_0x41ce6e;_0x70c2ab+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x16d2a6['username']||_0x30042e(0x159))+_0x30042e(0x15b)+formatQueueTime(_0x16d2a6['lastUpdated'])+_0x30042e(0x165);}),_0x70c2ab+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x666176[_0x41ce6e(0x163)]=_0x70c2ab;}function formatQueueTime(_0x532d98){const _0x772b7c=a45_0x288f;if(!_0x532d98)return _0x772b7c(0x164);const _0x2f8804=_0x532d98['toDate']?_0x532d98[_0x772b7c(0x162)]():new Date(_0x532d98),_0x45f972=new Date(),_0x3102a1=Math['floor']((_0x45f972-_0x2f8804)/0xea60);if(_0x3102a1<0x1)return'Just\x20now';return _0x3102a1+'m\x20in\x20queue';}async function checkQueueTimeout(_0x441e55){const _0x51e339=a45_0x288f;if(!_0x441e55['lastUpdated'])return;const _0xfff1fe=_0x441e55['lastUpdated']['toDate']?_0x441e55['lastUpdated']['toDate']():new Date(_0x441e55['lastUpdated']),_0x13d72b=new Date(),_0x2b3793=Math['floor']((_0x13d72b-_0xfff1fe)/0xea60);if(_0x2b3793>=0x1e)try{const _0xdd7627=doc(db,'readyPlayers',_0x441e55['id']);await updateDoc(_0xdd7627,{'isReady':![]});}catch(_0x5cbf95){console[_0x51e339(0x167)]('Error\x20removing\x20player\x20from\x20queue:',_0x5cbf95);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x2cd265=>{const _0x48209a=[];_0x2cd265['forEach'](_0x512e5a=>{const _0x3a0831=a45_0x288f,_0xd982c8=_0x512e5a['data']();if(_0xd982c8[_0x3a0831(0x160)]===!![]){const _0x1c241d={'id':_0x512e5a['id'],'username':_0xd982c8['username'],'lastUpdated':_0xd982c8['lastUpdated']||new Date()};_0x48209a[_0x3a0831(0x168)](_0x1c241d),checkQueueTimeout(_0x1c241d);}}),updateQueueDisplay(_0x48209a);},_0x375ecf=>{console['error']('Error\x20in\x20queue\x20listener:',_0x375ecf);});window[a45_0x51c7c9(0x15f)](a45_0x51c7c9(0x15e),()=>{unsubscribe();});