const a33_0x1912f7=a33_0x27df,a33_0xfd79c4=(function(){let _0x1392bc=!![];return function(_0x5a2390,_0xcb23ae){const _0x36d7e7=_0x1392bc?function(){const _0xd104fd=a33_0x27df;if(_0xcb23ae){const _0xcbbf58=_0xcb23ae[_0xd104fd(0x120)](_0x5a2390,arguments);return _0xcb23ae=null,_0xcbbf58;}}:function(){};return _0x1392bc=![],_0x36d7e7;};}()),a33_0x2e2c64=a33_0xfd79c4(this,function(){const _0x26c814=a33_0x27df;let _0xfa379e;try{const _0x2cd913=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xfa379e=_0x2cd913();}catch(_0x331b41){_0xfa379e=window;}const _0x40197b=_0xfa379e[_0x26c814(0x127)]=_0xfa379e[_0x26c814(0x127)]||{},_0x214e16=['log','warn','info',_0x26c814(0x13f),_0x26c814(0x118),'table',_0x26c814(0x108)];for(let _0x2b89a0=0x0;_0x2b89a0<_0x214e16['length'];_0x2b89a0++){const _0x5b2d91=a33_0xfd79c4[_0x26c814(0x12b)]['prototype']['bind'](a33_0xfd79c4),_0x4ce276=_0x214e16[_0x2b89a0],_0x345193=_0x40197b[_0x4ce276]||_0x5b2d91;_0x5b2d91[_0x26c814(0x10c)]=a33_0xfd79c4['bind'](a33_0xfd79c4),_0x5b2d91[_0x26c814(0x12a)]=_0x345193['toString']['bind'](_0x345193),_0x40197b[_0x4ce276]=_0x5b2d91;}});a33_0x2e2c64();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a33_0x37bd(){const _0x467ff3=['trace','playersD3','%</td>\x0a\x20\x20\x20\x20</tr>','set','__proto__','fontSize','push','sort','newElo','has','\x20fallback\x20ELO\x20change:\x20','previousElo','totalMatches','#CD7F32','D3:\x20Error\x20fetching\x20ELO\x20history:','.trend-indicator','exception','country','map','log','player','find','style','#F44336','apply','color','change','D3:\x20Found\x20entries\x20for\x20','gameMode','timestamp','textContent','console','pilot','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','toString','constructor','position','empty','&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','gray','D3:\x20','get','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','totalKills','totalDeaths','\x20players','visibility','innerHTML','eloHistoryD3','toDate','winnerUsername','now','data','#4CAF50','playerId','error','abs','D3:\x20Fallback\x20query\x20failed:','wins','forEach','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','D3:\x20Player\x20ID\x20mappings:','kda','username'];a33_0x37bd=function(){return _0x467ff3;};return a33_0x37bd();}import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x598537 from'./firebase-idle-wrapper.js';const styleEl=document['createElement']('style');styleEl[a33_0x1912f7(0x126)]='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;function a33_0x27df(_0x584ac6,_0x55e1fc){const _0x2e2c64=a33_0x37bd();return a33_0x27df=function(_0xfd79c4,_0x28c3ea){_0xfd79c4=_0xfd79c4-0x108;let _0x37bd25=_0x2e2c64[_0xfd79c4];return _0x37bd25;},a33_0x27df(_0x584ac6,_0x55e1fc);}async function displayLadderD3(_0x48724b=![]){const _0x32efba=a33_0x1912f7,_0x89897b=document['querySelector']('#ladder-d3\x20tbody');if(!_0x89897b){console['error']('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x89897b[_0x32efba(0x137)]=_0x32efba(0x129);try{const _0x50fd76=Date['now']();if(!_0x48724b&&playerCacheD3['data']&&_0x50fd76-playerCacheD3[_0x32efba(0x125)]<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3[_0x32efba(0x13c)]);return;}const _0x1db28b=collection(db,_0x32efba(0x109)),_0x282fd5=await getDocs(_0x1db28b),_0x590767=[];_0x282fd5[_0x32efba(0x143)](_0x15e37d=>{const _0x4e68d0=_0x32efba,_0x2009a5=_0x15e37d['data']();_0x2009a5[_0x4e68d0(0x147)]&&_0x590767['push']({..._0x2009a5,'id':_0x15e37d['id'],'elo':_0x2009a5['eloRating']||0x0,'position':_0x2009a5['position']||Number['MAX_SAFE_INTEGER']});});const _0x28b99c=collection(db,'userProfiles'),_0x1caf5a=await getDocs(_0x28b99c),_0x2f134b=new Map();_0x1caf5a[_0x32efba(0x143)](_0x581c85=>{const _0x12d572=_0x32efba,_0x2e73d3=_0x581c85['data']();_0x2e73d3['username']&&_0x2f134b['set'](_0x2e73d3[_0x12d572(0x147)]['toLowerCase'](),_0x2e73d3);});for(const _0xba8c3e of _0x590767){const _0x22c760=_0xba8c3e['username']['toLowerCase']();if(_0x2f134b[_0x32efba(0x111)](_0x22c760)){const _0x54ce12=_0x2f134b['get'](_0x22c760);_0x54ce12['country']&&(_0xba8c3e[_0x32efba(0x119)]=_0x54ce12[_0x32efba(0x119)]['toLowerCase']());}}const _0x246ca5=_0x590767['map'](_0x1e84f1=>_0x1e84f1['username']),_0x42ffa0=await fetchBatchMatchStatsD3(_0x246ca5);_0x590767[_0x32efba(0x10f)]((_0x103ad1,_0x56e0c7)=>{const _0x24dbdc=_0x32efba,_0x40a0c4=_0x42ffa0['get'](_0x103ad1['username'])?.['totalMatches']||0x0,_0x4a5d18=_0x42ffa0['get'](_0x56e0c7[_0x24dbdc(0x147)])?.['totalMatches']||0x0;if(_0x40a0c4===0x0!==(_0x4a5d18===0x0))return _0x40a0c4===0x0?0x1:-0x1;return(_0x103ad1['position']||0x3e7)-(_0x56e0c7['position']||0x3e7);}),_0x590767['forEach']((_0x47cfdf,_0x15e3d8)=>{_0x47cfdf['position']=_0x15e3d8+0x1;}),playerCacheD3['data']=_0x590767,playerCacheD3['timestamp']=_0x50fd76,updateLadderDisplayD3(_0x590767);}catch(_0x5cf3e7){console['error']('Error\x20loading\x20D3\x20ladder:',_0x5cf3e7),_0x89897b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x5cf3e7['message']+_0x32efba(0x132);}}function calculateStreakDays(_0x4c28db){const _0x3847b6=a33_0x1912f7;if(!_0x4c28db)return 0x0;const _0x2d229f=_0x4c28db[_0x3847b6(0x139)](),_0x17ca67=new Date(),_0x3faf85=Math[_0x3847b6(0x140)](_0x17ca67-_0x2d229f);return Math['ceil'](_0x3faf85/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x1be3f6,_0x71aef5){const _0x3b1c9f=a33_0x1912f7;try{const _0x2163cd=collection(db,_0x3b1c9f(0x109)),_0x594e12=await getDocs(_0x2163cd),_0x30ecac=[];_0x594e12['forEach'](_0x5e51bf=>{const _0x9cb3b7=_0x3b1c9f;_0x30ecac[_0x9cb3b7(0x10e)]({'id':_0x5e51bf['id'],..._0x5e51bf['data']()});});const _0x290f6a=_0x30ecac['find'](_0x48e5dc=>_0x48e5dc['username']===_0x1be3f6),_0x1021c3=_0x30ecac['find'](_0x4f7105=>_0x4f7105['username']===_0x71aef5);if(!_0x290f6a||!_0x1021c3){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x290f6a[_0x3b1c9f(0x12c)]>_0x1021c3[_0x3b1c9f(0x12c)]){const _0x1c3ced=_0x1021c3[_0x3b1c9f(0x12c)];for(const _0x368dac of _0x30ecac){_0x368dac['position']>=_0x1021c3['position']&&_0x368dac['position']<_0x290f6a['position']&&_0x368dac['username']!==_0x1be3f6&&await updateDoc(doc(db,'playersD3',_0x368dac['id']),{'position':_0x368dac['position']+0x1});}await updateDoc(doc(db,'playersD3',_0x290f6a['id']),{'position':_0x1c3ced});if(_0x1c3ced===0x1){const _0x9236e1=doc(db,_0x3b1c9f(0x109),_0x290f6a['id']),_0x3b53b6=await getDoc(_0x9236e1);!_0x3b53b6[_0x3b1c9f(0x13c)]()['firstPlaceDate']&&await updateDoc(_0x9236e1,{'firstPlaceDate':Timestamp[_0x3b1c9f(0x13b)]()});}if(_0x1021c3[_0x3b1c9f(0x12c)]===0x1){const _0x1d2fac=doc(db,'playersD3',_0x1021c3['id']);await updateDoc(_0x1d2fac,{'firstPlaceDate':null});}}}catch(_0x564780){console[_0x3b1c9f(0x13f)]('Error\x20updating\x20D3\x20player\x20positions:',_0x564780);}}async function updateLadderDisplayD3(_0x3842e0){const _0x51c60c=a33_0x1912f7;_0x3842e0['sort']((_0x3b9305,_0x20671e)=>_0x3b9305[_0x51c60c(0x12c)]-_0x20671e['position']);const _0x28dd09=document['querySelector']('#ladder-d3\x20tbody');if(!_0x28dd09)return;_0x28dd09[_0x51c60c(0x137)]='';const _0x4df38f=_0x3842e0['map'](_0x434128=>_0x434128[_0x51c60c(0x147)]),_0xb1b527=await fetchBatchMatchStatsD3(_0x4df38f),_0x5e1f38=document['querySelector']('#ladder-d3\x20thead\x20tr');_0x5e1f38['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x1f78c9=_0x3842e0[_0x51c60c(0x11a)](_0x2cb876=>{const _0x478af9=_0x51c60c,_0x2ba3c8=_0xb1b527['get'](_0x2cb876[_0x478af9(0x147)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x2cb876,_0x2ba3c8);})['join']('');_0x28dd09['innerHTML']=_0x1f78c9,getPlayersLastEloChangesD3(_0x4df38f)['then'](_0x109ef8=>{const _0x161850=_0x51c60c,_0xa64c65=new Map();_0x28dd09['querySelectorAll']('tr')[_0x161850(0x143)]((_0x4774cf,_0x588357)=>{const _0x4b9aef=_0x161850;_0x588357<_0x4df38f['length']&&_0xa64c65[_0x4b9aef(0x10b)](_0x4df38f[_0x588357],_0x4774cf);}),_0x109ef8['forEach']((_0x494086,_0x2da0bb)=>{const _0x85fde6=_0x161850,_0x3b782a=_0xa64c65['get'](_0x2da0bb);if(_0x3b782a&&_0x494086!==0x0){const _0x156f16=_0x3b782a['querySelector']('td:nth-child(3)');if(_0x156f16){const _0x5b0acb=_0x494086>0x0?'+'+_0x494086:''+_0x494086,_0x47acf6=_0x156f16['querySelector'](_0x85fde6(0x117));_0x47acf6&&(_0x47acf6[_0x85fde6(0x126)]=_0x5b0acb,_0x47acf6['style'][_0x85fde6(0x121)]=_0x494086>0x0?_0x85fde6(0x13d):_0x85fde6(0x11f),_0x47acf6['style']['fontWeight']='bold',_0x47acf6['style'][_0x85fde6(0x10d)]='0.85em',_0x47acf6['style']['display']='inline',_0x47acf6[_0x85fde6(0x11e)][_0x85fde6(0x136)]='visible',_0x47acf6['style']['opacity']='1');}}});})['catch'](_0x16dd68=>console['error']('Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:',_0x16dd68));}async function fetchBatchMatchStatsD3(_0x55fdc7){const _0x3aecd9=new Map();try{const _0x1c479d=collection(db,'approvedMatchesD3'),_0x4d3b6b=await getDocs(_0x1c479d);_0x4d3b6b['forEach'](_0x316f57=>{const _0x62390a=a33_0x27df,_0x31d691=_0x316f57['data']();if(_0x55fdc7['includes'](_0x31d691[_0x62390a(0x13a)])){const _0x13cb4a=_0x31d691[_0x62390a(0x13a)];!_0x3aecd9['has'](_0x13cb4a)&&_0x3aecd9['set'](_0x13cb4a,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x45002d=_0x3aecd9['get'](_0x13cb4a);_0x45002d['wins']++,_0x45002d['totalMatches']++,_0x45002d[_0x62390a(0x133)]+=parseInt(_0x31d691['winnerScore'])||0x0,_0x45002d['totalDeaths']+=parseInt(_0x31d691['loserScore'])||0x0;}if(_0x55fdc7['includes'](_0x31d691['loserUsername'])){const _0x4e4958=_0x31d691['loserUsername'];!_0x3aecd9['has'](_0x4e4958)&&_0x3aecd9[_0x62390a(0x10b)](_0x4e4958,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x5de111=_0x3aecd9['get'](_0x4e4958);_0x5de111['losses']++,_0x5de111['totalMatches']++,_0x5de111[_0x62390a(0x133)]+=parseInt(_0x31d691['loserScore'])||0x0,_0x5de111[_0x62390a(0x134)]+=parseInt(_0x31d691['winnerScore'])||0x0;}}),_0x3aecd9['forEach'](_0x11728f=>{const _0x39d740=a33_0x27df;_0x11728f[_0x39d740(0x146)]=_0x11728f['totalDeaths']>0x0?(_0x11728f['totalKills']/_0x11728f['totalDeaths'])['toFixed'](0x2):_0x11728f['totalKills'],_0x11728f['winRate']=_0x11728f['totalMatches']>0x0?(_0x11728f['wins']/_0x11728f[_0x39d740(0x114)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x5cb814){console['error']('Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:',_0x5cb814);}return _0x3aecd9;}function createPlayerRowD3(_0x4ef2a9,_0x413401){const _0x348a71=a33_0x1912f7,_0x599a8c=parseFloat(_0x4ef2a9['elo'])||0x0;let _0x457f4e=_0x348a71(0x12f);if(_0x599a8c>=0x7d0)_0x457f4e='#50C878';else{if(_0x599a8c>=0x708)_0x457f4e='#FFD700';else{if(_0x599a8c>=0x640)_0x457f4e='#C0C0C0';else _0x599a8c>=0x578&&(_0x457f4e=_0x348a71(0x115));}}let _0x54e706='';return _0x4ef2a9['country']&&(_0x54e706='<img\x20src=\x22../images/flags/'+_0x4ef2a9[_0x348a71(0x119)]['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4ef2a9['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4ef2a9[_0x348a71(0x12c)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x4ef2a9[_0x348a71(0x147)])+_0x348a71(0x12e)+_0x457f4e+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4ef2a9[_0x348a71(0x147)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x54e706+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x457f4e+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x599a8c+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x413401[_0x348a71(0x114)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x413401[_0x348a71(0x142)]+_0x348a71(0x144)+_0x413401['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x413401[_0x348a71(0x146)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x413401['winRate']+_0x348a71(0x10a);}async function getPlayersLastEloChangesD3(_0x5d2439){const _0x46abb8=a33_0x1912f7,_0x217dd8=new Map();_0x5d2439[_0x46abb8(0x143)](_0x39c67d=>_0x217dd8['set'](_0x39c67d,0x0));try{console['log']('D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:',_0x5d2439);const _0x5a63ab=new Map(),_0x5b8d95=await getDocs(collection(db,_0x46abb8(0x109)));_0x5b8d95['forEach'](_0x5e55e6=>{const _0x3ee21a=_0x5e55e6['data']();_0x3ee21a['username']&&_0x5a63ab['set'](_0x5e55e6['id'],_0x3ee21a['username']);}),console['log'](_0x46abb8(0x145),Array['from'](_0x5a63ab['entries']()));const _0x4254ab=collection(db,_0x46abb8(0x138)),_0x5a63ed=query(_0x4254ab,orderBy('timestamp','desc'),limit(0x64)),_0x140f5a=await getDocs(_0x5a63ed);_0x140f5a[_0x46abb8(0x12d)]?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console[_0x46abb8(0x11b)]('D3:\x20Found\x20'+_0x140f5a['size']+'\x20entries\x20in\x20eloHistoryD3');const _0xd0270=new Map();_0x140f5a['forEach'](_0x455b9e=>{const _0x2f33f4=_0x46abb8,_0x582f16=_0x455b9e[_0x2f33f4(0x13c)]();let _0x3f8626=null;if(_0x582f16[_0x2f33f4(0x147)])_0x3f8626=_0x582f16[_0x2f33f4(0x147)];else{if(_0x582f16['playerUsername'])_0x3f8626=_0x582f16['playerUsername'];else{if(_0x582f16[_0x2f33f4(0x11c)]&&typeof _0x582f16[_0x2f33f4(0x11c)]==='string')_0x3f8626=_0x582f16[_0x2f33f4(0x11c)];else{if(_0x582f16['player']&&_0x5a63ab['has'](_0x582f16['player']))_0x3f8626=_0x5a63ab[_0x2f33f4(0x131)](_0x582f16['player']);else _0x582f16['playerId']&&_0x5a63ab['has'](_0x582f16[_0x2f33f4(0x13e)])&&(_0x3f8626=_0x5a63ab['get'](_0x582f16['playerId']));}}}(_0x582f16['username']==='pilot'||_0x582f16['playerUsername']===_0x2f33f4(0x128)||_0x582f16[_0x2f33f4(0x11c)]&&_0x5a63ab['get'](_0x582f16['player'])===_0x2f33f4(0x128))&&console['log']('D3:\x20Found\x20pilot\x20entry:',_0x582f16),_0x3f8626&&_0x5d2439['includes'](_0x3f8626)&&(!_0xd0270['has'](_0x3f8626)&&_0xd0270['set'](_0x3f8626,[]),_0xd0270['get'](_0x3f8626)['push']({..._0x582f16,'timestamp':_0x582f16['timestamp']?.['seconds']||0x0}));}),console['log'](_0x46abb8(0x123)+_0xd0270['size']+_0x46abb8(0x135)),_0xd0270['forEach']((_0x1c87ee,_0x471a4d)=>{const _0xa49c6b=_0x46abb8;if(_0x1c87ee['length']>0x0){_0x1c87ee['sort']((_0x4f9513,_0x7ecba9)=>_0x7ecba9['timestamp']-_0x4f9513['timestamp']);const _0x35fe46=_0x1c87ee[_0xa49c6b(0x11d)](_0x169960=>_0x169960[_0xa49c6b(0x122)]!==undefined||_0x169960['newElo']!==undefined&&_0x169960['previousElo']!==undefined);if(_0x35fe46){let _0x3a3bb9;if(_0x35fe46['change']!==undefined)_0x3a3bb9=_0x35fe46[_0xa49c6b(0x122)];else _0x35fe46[_0xa49c6b(0x110)]!==undefined&&_0x35fe46['previousElo']!==undefined&&(_0x3a3bb9=_0x35fe46[_0xa49c6b(0x110)]-_0x35fe46[_0xa49c6b(0x113)]);_0x3a3bb9!==undefined&&(_0x217dd8[_0xa49c6b(0x10b)](_0x471a4d,_0x3a3bb9),console['log'](_0xa49c6b(0x130)+_0x471a4d+'\x20ELO\x20change:\x20'+_0x3a3bb9));}}});if(_0xd0270['size']===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x243f97=collection(db,'eloHistory'),_0x1a8888=query(_0x243f97,where(_0x46abb8(0x124),'==','D3'),orderBy(_0x46abb8(0x125),'desc'),limit(0x32));try{const _0xd8a5cc=await getDocs(_0x1a8888);console['log']('D3:\x20Found\x20'+_0xd8a5cc['size']+'\x20fallback\x20entries'),_0xd8a5cc[_0x46abb8(0x143)](_0x1fb0e3=>{const _0x2dfa02=_0x46abb8,_0xfb19e7=_0x1fb0e3[_0x2dfa02(0x13c)]();let _0x4555ef=_0xfb19e7['username']||_0xfb19e7['playerUsername'];!_0x4555ef&&_0xfb19e7['player']&&_0x5a63ab['has'](_0xfb19e7['player'])&&(_0x4555ef=_0x5a63ab['get'](_0xfb19e7['player']));if(_0x4555ef&&_0x5d2439['includes'](_0x4555ef)){const _0x2e8136=_0xfb19e7[_0x2dfa02(0x122)]||(_0xfb19e7[_0x2dfa02(0x110)]!==undefined&&_0xfb19e7['previousElo']!==undefined?_0xfb19e7['newElo']-_0xfb19e7['previousElo']:0x0);_0x2e8136!==0x0&&(_0x217dd8['set'](_0x4555ef,_0x2e8136),console[_0x2dfa02(0x11b)]('D3:\x20'+_0x4555ef+_0x2dfa02(0x112)+_0x2e8136));}});}catch(_0x48a469){console['log'](_0x46abb8(0x141),_0x48a469);}}const _0x31bd4e=Array['from'](_0x217dd8['entries']())['filter'](([_0x4c9771,_0x5dae84])=>_0x5dae84!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x31bd4e);}catch(_0x1078a1){console['error'](_0x46abb8(0x116),_0x1078a1);}return _0x217dd8;}export{displayLadderD3,updatePlayerPositions};