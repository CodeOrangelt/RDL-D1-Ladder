const a6_0x1de08a=a6_0x54a6,a6_0x79cf2c=(function(){let _0xbab2ef=!![];return function(_0xef533f,_0xe29f5e){const _0x25a0ba=_0xbab2ef?function(){if(_0xe29f5e){const _0x51b41d=_0xe29f5e['apply'](_0xef533f,arguments);return _0xe29f5e=null,_0x51b41d;}}:function(){};return _0xbab2ef=![],_0x25a0ba;};}()),a6_0x2f4740=a6_0x79cf2c(this,function(){const _0x3ff87f=a6_0x54a6,_0x1cf330=function(){let _0x206a85;try{_0x206a85=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3e2a2f){_0x206a85=window;}return _0x206a85;},_0x475f64=_0x1cf330(),_0x419cec=_0x475f64['console']=_0x475f64['console']||{},_0x3e3a42=['log','warn','info','error','exception','table','trace'];for(let _0x393ef1=0x0;_0x393ef1<_0x3e3a42[_0x3ff87f(0x174)];_0x393ef1++){const _0x1efcc5=a6_0x79cf2c['constructor']['prototype']['bind'](a6_0x79cf2c),_0x13f9c4=_0x3e3a42[_0x393ef1],_0x51415b=_0x419cec[_0x13f9c4]||_0x1efcc5;_0x1efcc5['__proto__']=a6_0x79cf2c[_0x3ff87f(0x193)](a6_0x79cf2c),_0x1efcc5['toString']=_0x51415b['toString']['bind'](_0x51415b),_0x419cec[_0x13f9c4]=_0x1efcc5;}});a6_0x2f4740();import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a6_0x1de08a(0x16d),'muteFromDate':new Date(a6_0x1de08a(0x1b9))['getTime']()}];function isUsernameMuted(_0x510229,_0x25fe33){const _0x1a881a=a6_0x1de08a;if(!_0x510229)return![];const _0x5a2bc8=mutedUsers['find'](_0x189019=>_0x189019[_0x1a881a(0x19f)]===_0x510229);if(!_0x5a2bc8)return![];if(!_0x25fe33)return!![];const _0x4acb17=_0x25fe33 instanceof Date?_0x25fe33['getTime']():_0x25fe33[_0x1a881a(0x196)]?_0x25fe33['seconds']*0x3e8:Date[_0x1a881a(0x117)]();return _0x4acb17>=_0x5a2bc8['muteFromDate'];}function filterComment(_0x3d9e78,_0x377707,_0x19ab92){if(!_0x3d9e78)return'-';if(isUsernameMuted(_0x377707,_0x19ab92))return'Muted.';return _0x3d9e78;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x4f40d1,_0xd94e6e,_0x4bf5f0){const _0x4147bf='u:'+(_0x4bf5f0['filterUsername']||'');return'previewCache_'+_0x4f40d1+'_p'+_0xd94e6e+'_'+_0x4147bf;}function getCachedPage(_0x33bc91){const _0x4235fa=sessionStorage['getItem'](_0x33bc91);if(_0x4235fa)try{return JSON['parse'](_0x4235fa);}catch(_0x5db198){return console['error']('Failed\x20to\x20parse\x20cache:',_0x5db198),sessionStorage['removeItem'](_0x33bc91),null;}return null;}function cachePage(_0x5636e1,_0x4a4902){const _0x53441c=a6_0x1de08a;try{sessionStorage['setItem'](_0x5636e1,JSON['stringify'](_0x4a4902));}catch(_0x329489){console[_0x53441c(0x13d)]('Failed\x20to\x20cache\x20data:',_0x329489);}}function getEloColor(_0x50dd9e){const _0x72a82=a6_0x1de08a,_0x19e615=Number(_0x50dd9e);if(_0x19e615>=0x7d0)return'#50C878';else{if(_0x19e615>=0x708)return _0x72a82(0x184);else{if(_0x19e615>=0x640)return _0x72a82(0x1a3);else{if(_0x19e615>=0x578)return _0x72a82(0x132);else return _0x72a82(0x182);}}}}function formatDate(_0x337789,_0x2c1066=![]){if(!_0x337789||!_0x337789['seconds'])return'N/A';const _0x3870e2=new Date(_0x337789['seconds']*0x3e8);return _0x2c1066?_0x3870e2['toLocaleString']():_0x3870e2['toLocaleDateString']();}function truncateComment(_0x5cf36a,_0x26477d=0x1e){const _0x20069f=a6_0x1de08a;if(!_0x5cf36a)return'-';if(_0x5cf36a[_0x20069f(0x174)]<=_0x26477d)return _0x5cf36a;return _0x5cf36a['substring'](0x0,_0x26477d)+'...';}function formatCommentDate(_0x18247a){const _0x1c0e47=a6_0x1de08a;if(!_0x18247a||!_0x18247a['seconds'])return'';const _0x3cb662=new Date(_0x18247a[_0x1c0e47(0x196)]*0x3e8),_0x305959=new Date(),_0x31549e=Math['abs'](_0x305959-_0x3cb662),_0x297f10=Math[_0x1c0e47(0x140)](_0x31549e/(0x3e8*0x3c*0x3c*0x18));if(_0x297f10===0x0)return _0x1c0e47(0x13a);else{if(_0x297f10===0x1)return'Yesterday';else return _0x297f10<0x7?_0x297f10+'\x20days\x20ago':_0x3cb662[_0x1c0e47(0x164)]();}}function setLoadingIndicator(_0x40f486){const _0x5cda20=a6_0x1de08a,_0x3df7e8=document['getElementById'](_0x5cda20(0x1a9));if(_0x3df7e8)_0x3df7e8['style']['display']=_0x40f486?_0x5cda20(0x14c):'none';}export function updatePreviewLadderModeUI(){const _0x30b2b1=a6_0x1de08a,_0x54a664=document['getElementById'](_0x30b2b1(0x1b2)),_0x5dbec8=document['getElementById']('preview-d1-button'),_0x33f109=document[_0x30b2b1(0x10b)]('preview-d2-button'),_0x2f1a55=document[_0x30b2b1(0x10b)]('preview-d3-button');if(_0x54a664)_0x54a664['textContent']=previewState['currentMode'];if(_0x5dbec8)_0x5dbec8['classList']['toggle']('active',previewState['currentMode']==='D1');if(_0x33f109)_0x33f109['classList'][_0x30b2b1(0x15a)]('active',previewState[_0x30b2b1(0x11b)]==='D2');if(_0x2f1a55)_0x2f1a55[_0x30b2b1(0x165)][_0x30b2b1(0x15a)]('active',previewState['currentMode']==='D3');}function a6_0x54a6(_0x1beb73,_0x26e21a){const _0x2f4740=a6_0x3c5f();return a6_0x54a6=function(_0x79cf2c,_0x5dfc88){_0x79cf2c=_0x79cf2c-0x102;let _0x3c5f0d=_0x2f4740[_0x79cf2c];return _0x3c5f0d;},a6_0x54a6(_0x1beb73,_0x26e21a);}function updatePreviewPaginationControls(_0x1e7e61){const _0x4664b3=a6_0x1de08a,_0x5c4c17=document[_0x4664b3(0x10b)](_0x4664b3(0x14f)),_0x4b3a7e=document['getElementById'](_0x4664b3(0x12d)),_0x48f2c9=document[_0x4664b3(0x10b)](_0x4664b3(0x14a));if(!_0x5c4c17||!_0x4b3a7e||!_0x48f2c9)return;_0x48f2c9[_0x4664b3(0x10e)]=_0x4664b3(0x195)+previewState['currentPage'],_0x5c4c17['disabled']=previewState['currentPage']<=0x1,_0x4b3a7e[_0x4664b3(0x169)]=!_0x1e7e61;}function setPreviewLoadingState(_0x2fa93c){const _0x151164=a6_0x1de08a;previewState['isLoading']=_0x2fa93c,setLoadingIndicator(_0x2fa93c);const _0x460480=document[_0x151164(0x10b)](_0x151164(0x12a)),_0x37027b=_0x460480?_0x460480['querySelector']('.matches-loading'):null,_0x51df95=document[_0x151164(0x10b)]('previewPrevPage'),_0x3ed7f9=document[_0x151164(0x10b)]('previewNextPage'),_0x2dd057=document['getElementById']('preview-d1-button'),_0x3d7464=document['getElementById']('preview-d2-button'),_0x5622a2=document[_0x151164(0x10b)]('applyFilterBtn'),_0x5e01c8=document['getElementById'](_0x151164(0x1a0));if(_0x37027b&&!_0x2fa93c)_0x37027b['style']['display']=_0x151164(0x150);else _0x37027b&&_0x2fa93c&&(_0x37027b['style']['display']='block');!_0x2fa93c&&_0x460480&&!_0x460480['querySelector']('.match-card')&&!_0x460480['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x460480[_0x151164(0x125)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState['filterUsername']?'\x20matching\x20filters':'')+'.</div>');if(_0x51df95)_0x51df95['disabled']=_0x2fa93c||previewState['currentPage']<=0x1;if(_0x3ed7f9)_0x3ed7f9['disabled']=_0x2fa93c;if(_0x2dd057)_0x2dd057['disabled']=_0x2fa93c;if(_0x3d7464)_0x3d7464[_0x151164(0x169)]=_0x2fa93c;if(_0x5622a2)_0x5622a2[_0x151164(0x169)]=_0x2fa93c;if(_0x5e01c8)_0x5e01c8['disabled']=_0x2fa93c;}function applyClientFilters(_0x45793e){const _0xbc1435=a6_0x1de08a;if(!previewState[_0xbc1435(0x104)])return _0x45793e;const _0x400642=previewState['filterUsername'][_0xbc1435(0x194)]();return _0x45793e['filter'](_0x3f9944=>{const _0x290fa0=_0xbc1435,_0x5a3c48=(_0x3f9944['winnerUsername']||'')[_0x290fa0(0x194)](),_0x3f77c0=(_0x3f9944['loserUsername']||'')['toLowerCase']();return _0x5a3c48[_0x290fa0(0x119)](_0x400642)||_0x3f77c0[_0x290fa0(0x119)](_0x400642);});}function applyEnhancedClientFilters(_0x2e7daf){const _0x120894=a6_0x1de08a;if(!hasEnhancedFilters())return _0x2e7daf;return _0x2e7daf[_0x120894(0x149)](_0x1b9cf0=>{const _0x2fc175=_0x120894;if(previewState[_0x2fc175(0x171)]['pilots']){const _0x18ea34=previewState[_0x2fc175(0x171)][_0x2fc175(0x1ba)]['toLowerCase'](),_0x8954c0=(_0x1b9cf0['winnerUsername']||'')['toLowerCase'](),_0x4ce7d0=(_0x1b9cf0[_0x2fc175(0x197)]||'')[_0x2fc175(0x194)]();if(!_0x8954c0['includes'](_0x18ea34)&&!_0x4ce7d0['includes'](_0x18ea34))return![];}if(previewState['enhancedFilters']['levels']){const _0x52f1f0=previewState[_0x2fc175(0x171)]['levels'][_0x2fc175(0x194)](),_0x2f51c2=(_0x1b9cf0[_0x2fc175(0x108)]||'')[_0x2fc175(0x194)]();if(!_0x2f51c2['includes'](_0x52f1f0))return![];}if(previewState[_0x2fc175(0x171)][_0x2fc175(0x12f)]['length']>0x0){const _0x11cf0e=_0x1b9cf0['subgameType']||_0x2fc175(0x158);if(!previewState['enhancedFilters']['subgames'][_0x2fc175(0x119)](_0x11cf0e))return![];}return!![];});}function hasEnhancedFilters(){const _0x5223b5=a6_0x1de08a;return previewState[_0x5223b5(0x171)][_0x5223b5(0x1ba)]||previewState['enhancedFilters']['levels']||previewState['enhancedFilters']['subgames'][_0x5223b5(0x174)]>0x0;}function clearEnhancedFilters(){const _0x54dec6=a6_0x1de08a;previewState[_0x54dec6(0x171)]={'pilots':'','levels':'','subgames':[]},document[_0x54dec6(0x10b)]('filter-pilots')['value']='',document[_0x54dec6(0x10b)](_0x54dec6(0x105))['value']='';const _0x45a64e=document['getElementById']('filter-subgames');for(let _0x5acec5 of _0x45a64e['options']){_0x5acec5[_0x54dec6(0x124)]=![];}}function jumpToPage(_0x316aa9){const _0x4b18e7=a6_0x1de08a,_0x16f734=document[_0x4b18e7(0x10b)]('jump-to-page'),_0x3308ec=previewState['currentPage'];let _0x3c9bbf=_0x3308ec;switch(_0x316aa9){case'start':_0x3c9bbf=0x1;break;case _0x4b18e7(0x137):_0x3c9bbf=Math['max'](_0x3308ec+0xa,previewState['totalPages']||_0x3308ec+0xa);break;case'+1':_0x3c9bbf=_0x3308ec+0x1;break;case'+5':_0x3c9bbf=_0x3308ec+0x5;break;case'+10':_0x3c9bbf=_0x3308ec+0xa;break;case'-1':_0x3c9bbf=Math['max'](0x1,_0x3308ec-0x1);break;case'-5':_0x3c9bbf=Math['max'](0x1,_0x3308ec-0x5);break;case'-10':_0x3c9bbf=Math[_0x4b18e7(0x16e)](0x1,_0x3308ec-0xa);break;case'input':const _0x3b3a35=parseInt(_0x16f734['value']);_0x3b3a35&&_0x3b3a35>0x0&&(_0x3c9bbf=_0x3b3a35,_0x16f734['value']='');break;}_0x3c9bbf!==_0x3308ec&&_0x3c9bbf>0x0&&(previewState['currentPage']=_0x3c9bbf,loadRecentMatchesPreview(_0x4b18e7(0x181)));}export async function loadRecentMatchesPreview(_0x55b8c3=a6_0x1de08a(0x135)){const _0xcb0aae=a6_0x1de08a,_0x4077e3=document['getElementById']('recent-matches-preview'),_0x3189c7=document['getElementById']('match-card-template');if(previewState[_0xcb0aae(0x19a)]||!_0x4077e3||!_0x3189c7)return;_0x55b8c3===_0xcb0aae(0x135)&&(console['log']('Clearing\x20cache\x20for\x20refresh/reset'),Object[_0xcb0aae(0x114)](sessionStorage)['forEach'](_0x35c022=>{const _0x33b32e=_0xcb0aae;_0x35c022['includes'](_0x33b32e(0x167)+previewState['currentMode'])&&sessionStorage['removeItem'](_0x35c022);}));let _0x539040=previewState['currentPage'];if(_0x55b8c3==='next')_0x539040++;else{if(_0x55b8c3===_0xcb0aae(0x1a8))_0x539040--;else _0x55b8c3==='current'&&(_0x539040=0x1,previewState['firstVisible']=null,previewState[_0xcb0aae(0x15c)]=null);}if(_0x539040<0x1)_0x539040=0x1;const _0x1b7f05=previewState[_0xcb0aae(0x17d)];previewState['currentPage']=_0x539040,updatePreviewPaginationControls(!![]);const _0x8a8598={'filterUsername':previewState['filterUsername']},_0x15c816=getCacheKey(previewState['currentMode'],_0x539040,_0x8a8598),_0x41d61c=_0x55b8c3!==_0xcb0aae(0x135)?getCachedPage(_0x15c816):null;if(_0x41d61c){console['log']('Rendering\x20page\x20'+_0x539040+'\x20from\x20cache'),setPreviewLoadingState(!![]),renderMatchCards(_0x41d61c['docsData']),updatePreviewPaginationControls(_0x41d61c[_0xcb0aae(0x17b)]),setPreviewLoadingState(![]);return;}console[_0xcb0aae(0x1a1)]('Cache\x20miss\x20for\x20page\x20'+_0x539040+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x4077e3['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x24e903=previewState['currentMode']==='D1'?'approvedMatches':previewState[_0xcb0aae(0x11b)]==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x1f55da=previewState['currentMode']==='D1'?'createdAt':'approvedAt';try{const _0x2efcf9=collection(window['db'],_0x24e903);let _0x507226=[orderBy(_0x1f55da,'desc')];if(_0x539040===0x1)console['log']('Loading\x20first\x20page\x20from\x20Firestore'),_0x507226['push'](limit(previewState['matchesPerPage']));else{if(_0x55b8c3===_0xcb0aae(0x12b)&&previewState[_0xcb0aae(0x15c)])console['log'](_0xcb0aae(0x176)),_0x507226[_0xcb0aae(0x1aa)](startAfter(previewState['lastVisible'])),_0x507226['push'](limit(previewState['matchesPerPage']));else{console[_0xcb0aae(0x1a1)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x3d8cf3=_0x539040*previewState[_0xcb0aae(0x153)];_0x507226['push'](limit(_0x3d8cf3));}}const _0x3d7e79=query(_0x2efcf9,..._0x507226),_0x37a3a8=await getDocs(_0x3d7e79);let _0x553f57=_0x37a3a8['docs'];if(_0x539040>0x1&&_0x55b8c3!==_0xcb0aae(0x12b)){const _0x5e9895=(_0x539040-0x1)*previewState['matchesPerPage'];_0x553f57=_0x553f57['slice'](_0x5e9895,_0x5e9895+previewState['matchesPerPage']);}if(_0x553f57['length']===0x0){console[_0xcb0aae(0x1a1)]('No\x20results\x20found\x20for\x20this\x20page');_0x55b8c3==='next'&&(previewState['currentPage']=_0x1b7f05,updatePreviewPaginationControls(![]));_0x4077e3['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState['filterUsername']?_0xcb0aae(0x147):'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x553f57[0x0],previewState['lastVisible']=_0x553f57[_0x553f57['length']-0x1];const _0x3fce79=_0x553f57['map'](_0x5e06d7=>({'id':_0x5e06d7['id'],..._0x5e06d7['data']()}));let _0x19df0d=![];if(_0x553f57['length']===previewState['matchesPerPage']){const _0x2d7247=query(_0x2efcf9,orderBy(_0x1f55da,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x32d0e7=await getDocs(_0x2d7247);_0x19df0d=!_0x32d0e7['empty'];}const _0x2f4718=applyClientFilters(_0x3fce79),_0xdb8698={'docsData':_0x3fce79,'hasNextPage':_0x19df0d};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x8a8598),_0xdb8698);if(_0x539040>0x1&&_0x55b8c3!==_0xcb0aae(0x12b))for(let _0x3752c7=0x1;_0x3752c7<_0x539040;_0x3752c7++){const _0x9566a0=(_0x3752c7-0x1)*previewState['matchesPerPage'],_0x56e236=_0x9566a0+previewState[_0xcb0aae(0x153)],_0x327a9e=_0x37a3a8['docs']['slice'](_0x9566a0,_0x56e236);if(_0x327a9e['length']>0x0){const _0x101a31=_0x327a9e[_0xcb0aae(0x122)](_0xb21446=>({'id':_0xb21446['id'],..._0xb21446['data']()})),_0x2609d8=!![];cachePage(getCacheKey(previewState['currentMode'],_0x3752c7,_0x8a8598),{'docsData':_0x101a31,'hasNextPage':_0x2609d8}),console['log'](_0xcb0aae(0x107)+_0x3752c7);}}_0x2f4718['length']===0x0&&previewState['filterUsername']?_0x4077e3['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState['filterUsername']+_0xcb0aae(0x175):renderMatchCards(_0x2f4718),updatePreviewPaginationControls(_0x19df0d);}catch(_0x4e08ce){console['error']('Error\x20fetching\x20'+previewState[_0xcb0aae(0x11b)]+'\x20matches:',_0x4e08ce),_0x4077e3['innerHTML']='<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20'+_0x4e08ce['message']+'</div>',updatePreviewPaginationControls(![]),previewState['currentPage']=_0x1b7f05;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x130e54){const _0x810168=a6_0x1de08a,_0xe09661=document['getElementById']('recent-matches-preview'),_0x3b9049=document['getElementById']('match-card-template');if(!_0xe09661||!_0x3b9049)return;!_0xe09661['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0xe09661['innerHTML']='');if(!_0x130e54||_0x130e54['length']===0x0){if(!_0xe09661['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x3a5be9=hasEnhancedFilters()?'\x20matching\x20filters':previewState[_0x810168(0x104)]?'\x20matching\x20filters':'';_0xe09661[_0x810168(0x125)]=_0x810168(0x13f)+_0x3a5be9+'.</div>';}return;}const _0x4cfa2=applyEnhancedClientFilters(_0x130e54);if(_0x4cfa2['length']===0x0){_0xe09661['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>';return;}const _0x163fab=_0x4cfa2[_0x810168(0x122)](_0x1254dd=>getAllCommentsForMatch(_0x1254dd['id']));let _0x280c4a=[];try{_0x280c4a=await Promise['all'](_0x163fab);}catch(_0x3d4258){console['error']('Error\x20fetching\x20comments\x20batch:',_0x3d4258),_0x280c4a=_0x4cfa2['map'](()=>[]);}const _0xa5e52f={};_0x280c4a['forEach']((_0xc55866,_0x108d92)=>{_0xa5e52f[_0x4cfa2[_0x108d92]['id']]=_0xc55866||[];}),_0x4cfa2[_0x810168(0x15f)](_0xaf07e2=>{const _0x2d7edc=_0x810168,_0x4fc385=_0x3b9049[_0x2d7edc(0x18d)]['cloneNode'](!![]),_0x500423=_0x4fc385['querySelector']('.match-display-wrapper'),_0x21b149=_0x4fc385['querySelector']('.match-card'),_0x259ea2=getEloRankClass(_0xaf07e2['winnerOldElo']);_0x21b149['classList']['add'](_0x2d7edc(0x146)+_0x259ea2),_0x21b149[_0x2d7edc(0x1b4)](_0x2d7edc(0x1b5))['textContent']=_0xaf07e2[_0x2d7edc(0x108)]||'Unknown\x20Map',_0x21b149['querySelector']('.match-date')['textContent']=formatDate(_0xaf07e2['approvedAt']||_0xaf07e2['createdAt']);const _0x47d410=_0x21b149['querySelector']('.player.winner\x20.player-name');_0x47d410[_0x2d7edc(0x10e)]=_0xaf07e2[_0x2d7edc(0x143)]||'Unknown',_0x47d410['style'][_0x2d7edc(0x17f)]=getEloColor(_0xaf07e2['winnerOldElo']),_0x21b149['querySelector'](_0x2d7edc(0x10f))['textContent']=_0xaf07e2['winnerScore']??0x0;const _0x262322=_0x21b149['querySelector']('.player.winner\x20.player-suicides'),_0xe15411=_0xaf07e2['winnerSuicides']||0x0;_0x262322['textContent']='S:\x20'+_0xe15411;const _0x512b62=_0x21b149['querySelector']('.player.loser\x20.player-name');_0x512b62[_0x2d7edc(0x10e)]=_0xaf07e2['loserUsername']||'Unknown',_0x512b62['style'][_0x2d7edc(0x17f)]=getEloColor(_0xaf07e2[_0x2d7edc(0x110)]),_0x21b149['querySelector']('.player.loser\x20.player-score')['textContent']=_0xaf07e2['loserScore']??0x0;const _0x3ddf4e=_0x21b149['querySelector']('.player.loser\x20.player-suicides'),_0x20ee57=_0xaf07e2['loserSuicides']||0x0;_0x3ddf4e['textContent']='S:\x20'+_0x20ee57;const _0x36195a=_0x21b149[_0x2d7edc(0x1b4)]('.match-subgame');if(_0x36195a){if(_0xaf07e2[_0x2d7edc(0x130)]&&_0xaf07e2['subgameType']['trim']()!==''){_0x36195a['textContent']=_0xaf07e2['subgameType'],_0x36195a['style'][_0x2d7edc(0x14d)]='block';const _0x2a5bdf=getSubgameClass(_0xaf07e2['subgameType']);_0x2a5bdf&&_0x36195a['classList']['add'](_0x2a5bdf);}else _0x36195a['textContent']=_0x2d7edc(0x158),_0x36195a['style']['display']='block',_0x36195a[_0x2d7edc(0x189)]['opacity']='0.6';}const _0x2da792=_0x21b149['querySelector']('.comment.winner-comment'),_0x2c292b=_0x21b149['querySelector']('.comment.loser-comment'),_0x4166c7=_0xaf07e2['winnerComment']||'',_0x25e773=_0xaf07e2['loserComment']||'',_0x1663f5=_0xaf07e2[_0x2d7edc(0x178)]||_0xaf07e2['createdAt'],_0x322c07=filterComment(_0x4166c7,_0xaf07e2['winnerUsername'],_0x1663f5),_0x54db29=filterComment(_0x25e773,_0xaf07e2[_0x2d7edc(0x197)],_0x1663f5);_0x2da792['textContent']='\x22'+truncateComment(_0x4166c7)+'\x22',_0x2c292b['textContent']='\x22'+truncateComment(_0x25e773)+'\x22';_0x4166c7&&!isUsernameMuted(_0xaf07e2['winnerUsername'],_0x1663f5)?_0x2da792[_0x2d7edc(0x18f)]=()=>showPreviewCommentPopup(_0x322c07,_0xaf07e2['winnerUsername']||'Winner',getEloColor(_0xaf07e2['winnerOldElo'])):(_0x2da792['textContent']=_0x322c07==='Muted.'?'Muted.':'-',_0x2da792['style'][_0x2d7edc(0x1a5)]='default',_0x2da792[_0x2d7edc(0x18f)]=null);_0x25e773&&!isUsernameMuted(_0xaf07e2['loserUsername'])?_0x2c292b['onclick']=()=>showPreviewCommentPopup(_0x54db29,_0xaf07e2[_0x2d7edc(0x197)]||'Loser',getEloColor(_0xaf07e2['loserOldElo'])):(_0x2c292b['textContent']=_0x54db29==='Muted.'?'Muted.':'-',_0x2c292b[_0x2d7edc(0x189)]['cursor']=_0x2d7edc(0x162),_0x2c292b['onclick']=null);const _0x4a3a63=_0x500423?.['querySelector']('.community-comments-section');if(!_0x4a3a63)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0x9277f=_0x4a3a63[_0x2d7edc(0x1b4)](_0x2d7edc(0x160)),_0x9ec7a9=_0x9277f?.[_0x2d7edc(0x1b4)]('.no-comments-message'),_0x20bcf8=_0x4a3a63['querySelector'](_0x2d7edc(0x1b1));if(_0x9277f){while(_0x9277f['firstChild']&&_0x9277f['firstChild']!==_0x9ec7a9){_0x9277f['removeChild'](_0x9277f['firstChild']);}_0x20bcf8&&_0x20bcf8[_0x2d7edc(0x163)]('click',()=>{showAddCommentPopup(_0xaf07e2['id']);});const _0x71c516=_0xa5e52f[_0xaf07e2['id']]||[];if(_0x71c516['length']>0x0){if(_0x9ec7a9)_0x9ec7a9['style']['display']=_0x2d7edc(0x150);const _0x5614e7=(_0x2cf465,_0x43df27)=>{const _0x2d1ecc=_0x2d7edc,_0x3c2315=_0x2cf465['split']('\x20');if(_0x3c2315['length']<=_0x43df27)return _0x2cf465;return _0x3c2315['slice'](0x0,_0x43df27)[_0x2d1ecc(0x126)]('\x20')+_0x2d1ecc(0x180);};_0x71c516[_0x2d7edc(0x15f)](_0x56b518=>{const _0x4fdbb8=_0x2d7edc,_0x48a16f=document[_0x4fdbb8(0x166)]('div');if(_0x56b518['type']==='demo'){_0x48a16f['className']='demo-link',_0x48a16f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x56b518['demoLink']+_0x4fdbb8(0x138)+_0x56b518['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x56b518['description']||'No\x20description\x20provided')+_0x4fdbb8(0x116);const _0x497a75=window['auth']['currentUser'],_0x4946bb=_0x497a75&&_0x56b518['userId']===_0x497a75[_0x4fdbb8(0x192)];if(_0x4946bb){const _0x4d9f3b=document['createElement']('button');_0x4d9f3b['className']='delete-comment-btn',_0x4d9f3b['innerHTML']='×',_0x4d9f3b['setAttribute']('aria-label','Delete\x20demo'),_0x4d9f3b[_0x4fdbb8(0x163)]('click',_0x54f1f9=>{_0x54f1f9['preventDefault'](),_0x54f1f9['stopPropagation'](),deleteComment(_0x56b518['id'],_0x48a16f);}),_0x48a16f['appendChild'](_0x4d9f3b);}}else{_0x48a16f[_0x4fdbb8(0x1ac)]=_0x4fdbb8(0x13c);const _0x461781=isUsernameMuted(_0x56b518['username'],_0x56b518['timestamp']),_0x4b9a8e=_0x461781?'Muted.':_0x5614e7(_0x56b518[_0x4fdbb8(0x190)]||'',0xf),_0x3b9780=_0x56b518[_0x4fdbb8(0x19f)]||_0x4fdbb8(0x179),_0x21fda8=window[_0x4fdbb8(0x115)]['currentUser'],_0x426b2a=_0x21fda8&&_0x56b518[_0x4fdbb8(0x17e)]===_0x21fda8['uid'];let _0x1993c5='';_0x426b2a&&(_0x1993c5=_0x4fdbb8(0x1bb));_0x48a16f['innerHTML']=_0x1993c5+_0x4fdbb8(0x159)+_0x3b9780+':</strong>\x20\x22'+_0x4b9a8e+'\x22';if(_0x426b2a){const _0x25b8f1=_0x48a16f['querySelector']('.delete-comment-btn');_0x25b8f1&&_0x25b8f1['addEventListener']('click',_0x17661c=>{const _0x64fdfa=_0x4fdbb8;_0x17661c[_0x64fdfa(0x157)](),deleteComment(_0x56b518['id'],_0x48a16f);});}!_0x461781?_0x48a16f[_0x4fdbb8(0x163)]('click',()=>{showFullCommentLightbox(_0x56b518);}):_0x48a16f['style']['cursor']='default';}_0x9277f['insertBefore'](_0x48a16f,_0x9277f['firstChild']);});}else{if(_0x9ec7a9)_0x9ec7a9[_0x2d7edc(0x189)]['display']='block';}}}const _0x1b0330=_0x21b149['querySelector']('.match-demo-links');if(_0x1b0330){const _0x1e308d=_0x21b149['querySelector']('.winner-demo-link'),_0x4a0beb=_0x21b149[_0x2d7edc(0x1b4)]('.loser-demo-link'),_0x34bc61=_0xaf07e2['winnerDemoLink']||null,_0x2e865c=_0xaf07e2[_0x2d7edc(0x17a)]||_0xaf07e2[_0x2d7edc(0x18c)]||null;console['log'](_0x2d7edc(0x177)+_0xaf07e2['id']+'\x20demo\x20links:',{'winner':_0x34bc61,'loser':_0x2e865c}),_0x1e308d&&(_0x34bc61?(_0x1e308d['href']=_0x34bc61,_0x1e308d[_0x2d7edc(0x189)]['display']='flex',_0x1e308d[_0x2d7edc(0x103)]=_0xaf07e2['winnerUsername']+_0x2d7edc(0x133)):_0x1e308d['style']['display']=_0x2d7edc(0x150)),_0x4a0beb&&(_0x2e865c?(_0x4a0beb['href']=_0x2e865c,_0x4a0beb['style'][_0x2d7edc(0x14d)]='flex',_0x4a0beb['title']=_0xaf07e2[_0x2d7edc(0x197)]+_0x2d7edc(0x133)):_0x4a0beb['style']['display']=_0x2d7edc(0x150)),_0x34bc61&&_0x1e308d||_0x2e865c&&_0x4a0beb?_0x1b0330['style']['display']='flex':_0x1b0330['style']['display']='none';}_0xe09661[_0x2d7edc(0x14b)](_0x4fc385);});}function getSubgameClass(_0x106244){const _0x1d02f0=a6_0x1de08a,_0x327101={'Fusion\x20Match':_0x1d02f0(0x17c),'≥6\x20Missiles':'missiles-6plus','≥6\x20missiles':_0x1d02f0(0x145),'Weapon\x20Imbalance':_0x1d02f0(0x11f),'Blind\x20Match':'blind-match','Rematch':_0x1d02f0(0x199),'Disorientation':'disorientation','Ratting':_0x1d02f0(0x148),'Altered\x20Powerups':'altered-powerups','Mega\x20Match':'mega-match','Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0x327101[_0x106244]||'';}async function deleteComment(_0x1a1a19,_0x58f9ac){const _0x5198ad=a6_0x1de08a,_0x69d2da=window['auth']['currentUser'];if(!_0x69d2da){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm(_0x5198ad(0x11e)))return;try{const _0x10939d=doc(window['db'],'matchComments',_0x1a1a19),_0x361d9c=await getDoc(_0x10939d);if(!_0x361d9c['exists']()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x2abfce=_0x361d9c['data']();if(_0x2abfce['userId']!==_0x69d2da['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x10939d);if(_0x58f9ac&&_0x58f9ac['parentNode']){_0x58f9ac['parentNode'][_0x5198ad(0x15b)](_0x58f9ac);const _0x270c56=_0x58f9ac['closest']('.comments-container');if(_0x270c56&&!_0x270c56['querySelector'](_0x5198ad(0x120))){const _0x1223d0=_0x270c56['querySelector']('.no-comments-message');if(_0x1223d0)_0x1223d0['style'][_0x5198ad(0x14d)]='block';}}console['log']('Comment\x20deleted\x20successfully');}catch(_0xa84fb2){console['error'](_0x5198ad(0x1b0),_0xa84fb2),alert(_0x5198ad(0x134)+_0xa84fb2['message']);}}async function getAllCommentsForMatch(_0x37a798){const _0x37c5c7=a6_0x1de08a;if(!_0x37a798)return[];try{const _0x16070c=collection(window['db'],'matchComments'),_0x5351d1=query(_0x16070c,where(_0x37c5c7(0x1b7),'==',_0x37a798),orderBy('timestamp',_0x37c5c7(0x161))),_0x57377d=await getDocs(_0x5351d1);if(_0x57377d['empty'])return[];return _0x57377d[_0x37c5c7(0x16c)]['map'](_0x5bf8a9=>({'id':_0x5bf8a9['id'],..._0x5bf8a9[_0x37c5c7(0x113)]()}));}catch(_0x5c0cad){return console[_0x37c5c7(0x13d)]('Error\x20fetching\x20comments:',_0x5c0cad),[];}}async function submitComment(_0x2c219b){const _0x1bdc55=a6_0x1de08a;_0x2c219b[_0x1bdc55(0x123)]();if(!window['auth']||!window['db']){console['error'](_0x1bdc55(0x185)),alert(_0x1bdc55(0x1b8));return;}const _0x415a67=window['auth'][_0x1bdc55(0x10a)];if(!_0x415a67){alert('You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment');return;}const _0x447a50=document['getElementById']('commentMatchId')?.['value'],_0x40ddf9=document['getElementById'](_0x1bdc55(0x12c))?.['value']?.[_0x1bdc55(0x106)]();if(!_0x447a50||!_0x40ddf9){alert(_0x1bdc55(0x1b3));return;}const _0x3a5444=_0x40ddf9['split'](/\s+/)[_0x1bdc55(0x149)](_0x4a56f3=>_0x4a56f3['length']>0x0)[_0x1bdc55(0x174)];if(_0x3a5444>0xf){alert(_0x1bdc55(0x15d));return;}const _0x195b7c=document[_0x1bdc55(0x1b4)]('.submit-comment-btn');_0x195b7c&&(_0x195b7c['disabled']=!![],_0x195b7c['textContent']=_0x1bdc55(0x16a));try{let _0x4c027b='Anonymous';try{const _0xa199a7=doc(window['db'],'userProfiles',_0x415a67['uid']),_0x24ecb2=await getDoc(_0xa199a7);if(_0x24ecb2['exists']()){const _0x46c070=_0x24ecb2['data']();_0x46c070[_0x1bdc55(0x19f)]&&(_0x4c027b=_0x46c070[_0x1bdc55(0x19f)]);}_0x4c027b==='Anonymous'&&_0x415a67['displayName']&&(_0x4c027b=_0x415a67['displayName']);}catch(_0x5296d0){console[_0x1bdc55(0x10d)](_0x1bdc55(0x13b),_0x5296d0),_0x415a67[_0x1bdc55(0x19d)]&&(_0x4c027b=_0x415a67['displayName']);}const _0x4e2657={'matchId':_0x447a50,'userId':_0x415a67['uid'],'username':_0x4c027b,'text':_0x40ddf9,'timestamp':serverTimestamp()};console['log']('Submitting\x20comment\x20as:',_0x4c027b);const _0x6b91be=collection(window['db'],_0x1bdc55(0x109));await addDoc(_0x6b91be,_0x4e2657),console['log']('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x4bf224){console['error']('Error\x20submitting\x20comment:',_0x4bf224),alert(_0x1bdc55(0x156)+_0x4bf224[_0x1bdc55(0x13e)]),_0x195b7c&&(_0x195b7c['disabled']=![],_0x195b7c[_0x1bdc55(0x10e)]='Submit');}}function closeAddCommentPopup(){const _0x30763d=a6_0x1de08a,_0x36a2c0=document['getElementById']('commentAddPopup'),_0x4d2b8e=document[_0x30763d(0x10b)](_0x30763d(0x136));if(_0x36a2c0)_0x36a2c0['style'][_0x30763d(0x14d)]='none';if(_0x4d2b8e)_0x4d2b8e['style'][_0x30763d(0x14d)]='none';}function showAddCommentPopup(_0x5b2d4a){const _0x2f80be=a6_0x1de08a,_0x40e5dc=window[_0x2f80be(0x115)]['currentUser'];if(!_0x40e5dc){alert(_0x2f80be(0x18b));return;}let _0x45add1=document[_0x2f80be(0x10b)]('commentAddPopup'),_0x4c9354=document['getElementById'](_0x2f80be(0x136));!_0x45add1&&(_0x45add1=document['createElement']('div'),_0x45add1['id']='commentAddPopup',_0x45add1[_0x2f80be(0x1ac)]='comment-popup',document['body']['appendChild'](_0x45add1));!_0x4c9354&&(_0x4c9354=document['createElement']('div'),_0x4c9354['id']='commentAddOverlay',_0x4c9354[_0x2f80be(0x1ac)]='comment-overlay',document['body'][_0x2f80be(0x14b)](_0x4c9354));_0x45add1['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x5b2d4a+_0x2f80be(0x172),_0x45add1['style'][_0x2f80be(0x14d)]='block',_0x4c9354['style']['display']=_0x2f80be(0x14c),document[_0x2f80be(0x10b)](_0x2f80be(0x1ae))[_0x2f80be(0x163)](_0x2f80be(0x141),closeAddCommentPopup),_0x4c9354[_0x2f80be(0x163)]('click',closeAddCommentPopup);const _0x5a8913=_0x45add1['querySelectorAll'](_0x2f80be(0x154));_0x5a8913['forEach'](_0x20ab45=>{_0x20ab45['addEventListener']('click',function(){const _0x506609=a6_0x54a6;_0x5a8913['forEach'](_0x486970=>_0x486970[_0x506609(0x165)][_0x506609(0x152)]('active')),document['querySelectorAll'](_0x506609(0x15e))['forEach'](_0x19b929=>_0x19b929['style']['display']='none'),this['classList']['add'](_0x506609(0x18a));const _0x3ccec9=this['dataset']['option'];document['getElementById'](_0x3ccec9+_0x506609(0x129))['style'][_0x506609(0x14d)]='block',_0x3ccec9==='demo'?(document['getElementById'](_0x506609(0x18c))['setAttribute']('required',''),document['getElementById']('commentText')[_0x506609(0x118)]('required')):(document['getElementById'](_0x506609(0x18c))['removeAttribute']('required'),document['getElementById']('commentText')[_0x506609(0x128)]('required',''));});}),document[_0x2f80be(0x10b)]('commentText')['setAttribute']('required',''),document[_0x2f80be(0x10b)](_0x2f80be(0x18c))['removeAttribute']('required'),setupWordCounter(_0x2f80be(0x12c),_0x2f80be(0x187),0xf),setupWordCounter('demoDescription','demoWordCount',0x14),document['getElementById']('addCommentForm')['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x246ac5,_0x58eb63,_0x1a8cc7){const _0x2b79c9=a6_0x1de08a,_0x14ba55=document[_0x2b79c9(0x10b)](_0x246ac5),_0x5baf15=document['getElementById'](_0x58eb63);if(!_0x14ba55||!_0x5baf15)return;_0x4d2be5(),_0x14ba55[_0x2b79c9(0x163)](_0x2b79c9(0x1af),_0x4d2be5);function _0x4d2be5(){const _0x585c44=_0x2b79c9,_0x5dbd00=_0x14ba55['value'][_0x585c44(0x106)](),_0x4503a3=_0x5dbd00?_0x5dbd00['split'](/\s+/)['filter'](_0xf387b4=>_0xf387b4[_0x585c44(0x174)]>0x0)[_0x585c44(0x174)]:0x0;_0x5baf15['textContent']=_0x4503a3,_0x4503a3>_0x1a8cc7?_0x5baf15[_0x585c44(0x189)][_0x585c44(0x17f)]=_0x585c44(0x1b6):_0x5baf15['style'][_0x585c44(0x17f)]='#aaa';}}async function submitCommentOrDemo(_0x5f3830){const _0x4e37de=a6_0x1de08a;_0x5f3830['preventDefault']();if(!window['auth']||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert('Unable\x20to\x20submit\x20-\x20system\x20not\x20ready');return;}const _0x39b6d3=window['auth']['currentUser'];if(!_0x39b6d3){alert(_0x4e37de(0x1a6));return;}const _0xab41c9=document['getElementById'](_0x4e37de(0x144))['value'],_0x59e45e=document['querySelector']('.option-tab.active')['dataset']['option'];let _0x5e3eda='Anonymous';try{const _0x432a12=doc(window['db'],'userProfiles',_0x39b6d3['uid']),_0x20bcc3=await getDoc(_0x432a12);if(_0x20bcc3['exists']()){const _0x44eb05=_0x20bcc3[_0x4e37de(0x113)]();_0x44eb05['username']&&(_0x5e3eda=_0x44eb05['username']);}_0x5e3eda==='Anonymous'&&_0x39b6d3['displayName']&&(_0x5e3eda=_0x39b6d3['displayName']);}catch(_0x34d02d){console[_0x4e37de(0x10d)]('Failed\x20to\x20fetch\x20username:',_0x34d02d),_0x39b6d3['displayName']&&(_0x5e3eda=_0x39b6d3['displayName']);}const _0x2d0aec=document['querySelector'](_0x4e37de(0x19c));_0x2d0aec&&(_0x2d0aec['disabled']=!![],_0x2d0aec[_0x4e37de(0x10e)]='Submitting...');try{if(_0x59e45e==='comment'){const _0x80d8=document['getElementById']('commentText')[_0x4e37de(0x186)]['trim']();if(!_0x80d8){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x2d0aec['disabled']=![],_0x2d0aec['textContent']='Submit';return;}const _0x3bb4ac=_0x80d8['split'](/\s+/)['filter'](_0x53f688=>_0x53f688['length']>0x0)['length'];if(_0x3bb4ac>0xf){alert(_0x4e37de(0x15d)),_0x2d0aec[_0x4e37de(0x169)]=![],_0x2d0aec['textContent']='Submit';return;}const _0x455682={'matchId':_0xab41c9,'userId':_0x39b6d3['uid'],'username':_0x5e3eda,'text':_0x80d8,'type':'comment','timestamp':serverTimestamp()},_0x271e76=collection(window['db'],_0x4e37de(0x109));await addDoc(_0x271e76,_0x455682);}else{const _0x147474=document[_0x4e37de(0x10b)]('demoLink')['value']['trim'](),_0x5e2979=document['getElementById']('demoDescription')['value']['trim']()||'Demo\x20link';if(!_0x147474){alert(_0x4e37de(0x170)),_0x2d0aec[_0x4e37de(0x169)]=![],_0x2d0aec['textContent']='Submit';return;}try{new URL(_0x147474);}catch(_0x30d1c0){alert(_0x4e37de(0x168)),_0x2d0aec['disabled']=![],_0x2d0aec['textContent']=_0x4e37de(0x1a4);return;}const _0x3d2e60=_0x5e2979['split'](/\s+/)['filter'](_0x17f559=>_0x17f559[_0x4e37de(0x174)]>0x0)[_0x4e37de(0x174)];if(_0x3d2e60>0x14){alert('Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.'),_0x2d0aec[_0x4e37de(0x169)]=![],_0x2d0aec['textContent']='Submit';return;}const _0x56a0da={'matchId':_0xab41c9,'userId':_0x39b6d3['uid'],'username':_0x5e3eda,'demoLink':_0x147474,'description':_0x5e2979,'type':_0x4e37de(0x11c),'text':'Demo:\x20'+_0x5e2979,'timestamp':serverTimestamp()},_0x6c0144=collection(window['db'],'matchComments');await addDoc(_0x6c0144,_0x56a0da);}closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x46af30){console['error']('Error\x20submitting:',_0x46af30),alert('Failed\x20to\x20submit:\x20'+_0x46af30[_0x4e37de(0x13e)]),_0x2d0aec&&(_0x2d0aec['disabled']=![],_0x2d0aec['textContent']='Submit');}}function getEloRankClass(_0x3ef934){const _0x260938=a6_0x1de08a,_0x21d641=Number(_0x3ef934);if(_0x21d641>=0x7d0)return _0x260938(0x188);else{if(_0x21d641>=0x708)return _0x260938(0x183);else{if(_0x21d641>=0x640)return _0x260938(0x191);else{if(_0x21d641>=0x578)return _0x260938(0x1a7);else return'unranked';}}}}function showPreviewCommentPopup(_0x4232ca,_0x2efa84,_0x322f93='#fff'){const _0x5a458e=a6_0x1de08a,_0x331d9d=document[_0x5a458e(0x10b)]('commentPopupPreview'),_0x52a226=document['getElementById'](_0x5a458e(0x155)),_0xdc91bb=document['getElementById'](_0x5a458e(0x1a2)),_0x3229d0=document[_0x5a458e(0x10b)](_0x5a458e(0x1ab)),_0x3db698=document[_0x5a458e(0x10b)]('reportCommentButton');if(!_0x331d9d||!_0x52a226||!_0xdc91bb||!_0x3229d0||!_0x3db698)return;_0x331d9d['dataset']['commentText']=_0x4232ca,_0x331d9d['dataset'][_0x5a458e(0x121)]=_0x2efa84,_0xdc91bb[_0x5a458e(0x189)]['color']=_0x322f93,_0xdc91bb['textContent']='Comment\x20from\x20'+_0x2efa84,_0x3229d0[_0x5a458e(0x10e)]=_0x4232ca,_0x3db698[_0x5a458e(0x18f)]=reportComment,_0x331d9d[_0x5a458e(0x189)]['display']=_0x5a458e(0x14c),_0x52a226['style']['display']='block';}function closePreviewCommentPopup(){const _0x23f68b=a6_0x1de08a,_0x3a04ef=document['getElementById'](_0x23f68b(0x142)),_0x89568=document['getElementById']('commentOverlayPreview');if(_0x3a04ef)_0x3a04ef['style']['display']='none';if(_0x89568)_0x89568[_0x23f68b(0x189)]['display']='none';}async function reportComment(){const _0x5d331f=a6_0x1de08a,_0x49d9ac=window[_0x5d331f(0x115)]['currentUser'];if(!_0x49d9ac){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments');return;}if(!confirm(_0x5d331f(0x112)))return;try{const _0x20c14e=document['getElementById']('commentPopupPreview'),_0x54ae3f={'commentAuthor':_0x20c14e['dataset']['commentUser']||_0x5d331f(0x16b),'commentText':_0x20c14e['dataset']['commentText']||'','matchId':previewState[_0x5d331f(0x10c)]||'','reportedBy':_0x49d9ac['uid'],'reporterUsername':_0x49d9ac[_0x5d331f(0x19d)]||'Anonymous\x20User','reportedAt':serverTimestamp()},_0xfba88c=collection(window['db'],'badComments');await addDoc(_0xfba88c,_0x54ae3f),alert('Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.'),closePreviewCommentPopup();}catch(_0x54bde2){console['error']('Error\x20reporting\x20comment:',_0x54bde2),alert('Failed\x20to\x20report\x20comment:\x20'+_0x54bde2['message']);}}function showFullCommentLightbox(_0x1d0821){const _0x576bba=a6_0x1de08a;if(isUsernameMuted(_0x1d0821['username']))return;const _0xd1a424=document['getElementById'](_0x576bba(0x142)),_0x2b7f7b=document['getElementById'](_0x576bba(0x155)),_0x2c2918=document[_0x576bba(0x10b)]('commentPopupTitlePreview'),_0x1aed13=document['getElementById']('commentPopupContentPreview');if(!_0xd1a424||!_0x2b7f7b||!_0x2c2918||!_0x1aed13)return;_0x2c2918[_0x576bba(0x189)]['color']='#fff',_0x2c2918[_0x576bba(0x10e)]='Comment\x20from\x20'+_0x1d0821[_0x576bba(0x19f)];if(_0x1d0821['timestamp']){const _0x2bc4a8=new Date(_0x1d0821[_0x576bba(0x19b)][_0x576bba(0x196)]*0x3e8),_0x2492fb=_0x2bc4a8['toLocaleString']();_0x1aed13['innerHTML']='<p>'+_0x1d0821[_0x576bba(0x190)]+_0x576bba(0x151)+_0x2492fb+'</small>';}else _0x1aed13['textContent']=_0x1d0821['text'];_0xd1a424[_0x576bba(0x102)]['commentId']=_0x1d0821['id']||'',_0xd1a424['dataset']['commentUser']=_0x1d0821[_0x576bba(0x19f)]||'',_0xd1a424['dataset']['commentText']=_0x1d0821['text']||'',_0xd1a424['dataset']['matchId']=_0x1d0821['matchId']||'';const _0x49a44e=_0xd1a424['querySelector'](_0x576bba(0x19e))||document['createElement']('div');!_0xd1a424['querySelector']('.popup-actions')?(_0x49a44e['className']='popup-actions',_0x49a44e['style']['display']='flex',_0x49a44e['style']['justifyContent']=_0x576bba(0x198),_0x49a44e['style'][_0x576bba(0x11d)]='10px',_0x49a44e['style']['marginTop']=_0x576bba(0x16f),_0xd1a424['appendChild'](_0x49a44e)):_0x49a44e[_0x576bba(0x125)]='';const _0x3e3553=document[_0x576bba(0x166)]('button');_0x3e3553['textContent']='Close',_0x3e3553[_0x576bba(0x1ac)]='popup-btn\x20close-btn',_0x3e3553['id']='closeCommentPopupPreview',_0x3e3553[_0x576bba(0x163)]('click',closePreviewCommentPopup);const _0x1669c2=document[_0x576bba(0x166)](_0x576bba(0x18e));_0x1669c2[_0x576bba(0x10e)]='Report',_0x1669c2['className']='popup-btn\x20report-btn',_0x1669c2['style']['backgroundColor']=_0x576bba(0x173),_0x1669c2[_0x576bba(0x163)]('click',reportComment),_0x49a44e[_0x576bba(0x14b)](_0x3e3553),_0x49a44e['appendChild'](_0x1669c2),_0xd1a424['style']['display']='block',_0x2b7f7b['style']['display']='block';}export function setupPreviewEventListeners(){const _0x42626f=a6_0x1de08a,_0x1ebb83=document[_0x42626f(0x10b)]('previewPrevPage'),_0x1c4e50=document['getElementById'](_0x42626f(0x12d)),_0x1425ed=document['getElementById']('preview-d1-button'),_0x34dde2=document['getElementById']('preview-d2-button'),_0x58c1db=document['getElementById']('preview-d3-button'),_0x36f996=document[_0x42626f(0x10b)]('filter-toggle-button'),_0x58697b=document[_0x42626f(0x10b)](_0x42626f(0x12e));if(!_0x1ebb83||!_0x1c4e50||!_0x1425ed||!_0x34dde2||!_0x58c1db||!_0x36f996||!_0x58697b){console['warn'](_0x42626f(0x131));return;}_0x1ebb83['addEventListener'](_0x42626f(0x141),()=>{const _0x4dcb3c=_0x42626f;if(!_0x1ebb83[_0x4dcb3c(0x169)])loadRecentMatchesPreview('prev');}),_0x1c4e50[_0x42626f(0x163)]('click',()=>{const _0x598f86=_0x42626f;if(!_0x1c4e50[_0x598f86(0x169)])loadRecentMatchesPreview('next');}),_0x1425ed['addEventListener']('click',()=>{const _0x392f10=_0x42626f;previewState['currentMode']!=='D1'&&!previewState[_0x392f10(0x19a)]&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x34dde2['addEventListener']('click',()=>{previewState['currentMode']!=='D2'&&!previewState['isLoading']&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x58c1db[_0x42626f(0x163)]('click',()=>{const _0x5605bf=_0x42626f;previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x5605bf(0x135)));});_0x36f996&&_0x58697b&&_0x36f996[_0x42626f(0x163)]('click',()=>{const _0x591357=_0x42626f,_0x362fbc=_0x58697b['style'][_0x591357(0x14d)]!=='none';_0x58697b['style']['display']=_0x362fbc?_0x591357(0x150):'block',_0x36f996['classList']['toggle']('active',!_0x362fbc);});const _0x1dd2d1=document['getElementById']('apply-enhanced-filters'),_0xe8b5c8=document['getElementById'](_0x42626f(0x14e));_0x1dd2d1&&_0x1dd2d1['addEventListener'](_0x42626f(0x141),()=>{const _0x34086f=_0x42626f;previewState['enhancedFilters'][_0x34086f(0x1ba)]=document[_0x34086f(0x10b)]('filter-pilots')['value'][_0x34086f(0x106)](),previewState[_0x34086f(0x171)][_0x34086f(0x111)]=document['getElementById'](_0x34086f(0x105))['value'][_0x34086f(0x106)]();const _0x17f7a0=document['getElementById'](_0x34086f(0x11a));previewState['enhancedFilters']['subgames']=Array['from'](_0x17f7a0['selectedOptions'])['map'](_0x23d85b=>_0x23d85b['value'])['filter'](_0x1e15af=>_0x1e15af!==''),loadRecentMatchesPreview(_0x34086f(0x135));});_0xe8b5c8&&_0xe8b5c8[_0x42626f(0x163)]('click',()=>{const _0x50998e=_0x42626f;clearEnhancedFilters(),loadRecentMatchesPreview(_0x50998e(0x135));});document[_0x42626f(0x127)]('.jump-btn')['forEach'](_0x446a30=>{const _0x3666f1=_0x42626f;_0x446a30[_0x3666f1(0x163)](_0x3666f1(0x141),()=>{const _0xd6de0e=_0x3666f1,_0x2bb376=_0x446a30[_0xd6de0e(0x102)]['jump'];jumpToPage(_0x2bb376);});});const _0x2c344c=document[_0x42626f(0x10b)]('jump-to-page');_0x2c344c&&_0x2c344c['addEventListener']('keypress',_0x425cb3=>{const _0x582798=_0x42626f;_0x425cb3['key']===_0x582798(0x139)&&jumpToPage(_0x582798(0x1af));});const _0x2f59d7=document[_0x42626f(0x10b)]('closeCommentPopupPreview'),_0x3e33d2=document[_0x42626f(0x10b)](_0x42626f(0x155));if(_0x2f59d7)_0x2f59d7[_0x42626f(0x163)](_0x42626f(0x141),closePreviewCommentPopup);if(_0x3e33d2)_0x3e33d2['addEventListener']('click',closePreviewCommentPopup);const _0x562434=document[_0x42626f(0x10b)]('closeAddCommentPopup'),_0x27baef=document['getElementById']('commentAddOverlay'),_0x4b8db8=document['getElementById']('addCommentForm');if(_0x562434)_0x562434[_0x42626f(0x163)]('click',closeAddCommentPopup);if(_0x27baef)_0x27baef['addEventListener']('click',closeAddCommentPopup);if(_0x4b8db8)_0x4b8db8['addEventListener']('submit',submitComment);const _0x552dab=document['getElementById']('commentText'),_0x308af5=document['getElementById']('wordCount');_0x552dab&&_0x308af5&&setupWordCounter(_0x42626f(0x12c),'wordCount',0xf);}window[a6_0x1de08a(0x1ad)]=showAddCommentPopup,window['closeAddCommentPopup']=closeAddCommentPopup,window['submitComment']=submitComment;function a6_0x3c5f(){const _0x3844a8=['dataset','title','filterUsername','filter-levels','trim','Cached\x20intermediary\x20page\x20','mapPlayed','matchComments','currentUser','getElementById','currentMatchId','warn','textContent','.player.winner\x20.player-score','loserOldElo','levels','Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?','data','keys','auth','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','now','removeAttribute','includes','filter-subgames','currentMode','demo','gap','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?','weapon-imbalance','.comment-item','commentUser','map','preventDefault','selected','innerHTML','join','querySelectorAll','setAttribute','Option','recent-matches-preview','next','commentText','previewNextPage','enhanced-filter-section','subgames','subgameType','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','#CD7F32','\x27s\x20Demo','Failed\x20to\x20delete\x20comment:\x20','current','commentAddOverlay','end','\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20','Enter','Today','Failed\x20to\x20fetch\x20user\x20profile:','comment-item','error','message','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','floor','click','commentPopupPreview','winnerUsername','commentMatchId','missiles-6plus','winner-','\x20matching\x20filters','ratting','filter','previewPageInfo','appendChild','block','display','clear-enhanced-filters','previewPrevPage','none','</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20','remove','matchesPerPage','.option-tab','commentOverlayPreview','Failed\x20to\x20add\x20comment:\x20','stopPropagation','Standard\x20Match','<strong>','toggle','removeChild','lastVisible','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','.option-content','forEach','.comments-container','desc','default','addEventListener','toLocaleDateString','classList','createElement','previewCache_','Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link','disabled','Submitting...','Unknown\x20User','docs','Daz','max','15px','Please\x20enter\x20a\x20demo\x20link','enhancedFilters','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20','#d32f2f','length','\x22</div>','Loading\x20next\x20page\x20using\x20cursor','Match\x20','approvedAt','Anonymous','loserDemoLink','hasNextPage','fusion-match','currentPage','userId','color','...','jump','#808080','gold','#FFD700','Firebase\x20not\x20initialized','value','wordCount','emerald','style','active','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo','demoLink','content','button','onclick','text','silver','uid','bind','toLowerCase','Page\x20','seconds','loserUsername','center','rematch','isLoading','timestamp','.submit-comment-btn','displayName','.popup-actions','username','clearFilterBtn','log','commentPopupTitlePreview','#b9f1fc','Submit','cursor','You\x20must\x20be\x20signed\x20in\x20to\x20continue','bronze','prev','loading-indicator','push','commentPopupContentPreview','className','showAddCommentPopup','closeAddCommentPopup','input','Error\x20deleting\x20comment:','.add-comment-btn','preview-ladder-mode','Please\x20enter\x20a\x20comment\x20before\x20submitting','querySelector','.match-map','#ff4444','matchId','Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready','2025-07-02','pilots','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>×</button>'];a6_0x3c5f=function(){return _0x3844a8;};return a6_0x3c5f();}