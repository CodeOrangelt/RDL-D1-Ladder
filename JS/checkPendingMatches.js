const a8_0x1bb1a1=a8_0x2dd3,a8_0x2d9766=(function(){let _0x5f4817=!![];return function(_0x5e6a0b,_0x3664a6){const _0x425825=_0x5f4817?function(){if(_0x3664a6){const _0x145c39=_0x3664a6['apply'](_0x5e6a0b,arguments);return _0x3664a6=null,_0x145c39;}}:function(){};return _0x5f4817=![],_0x425825;};}()),a8_0x381b52=a8_0x2d9766(this,function(){const _0x13bfa2=a8_0x2dd3;let _0x2f27e8;try{const _0x1e2469=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2f27e8=_0x1e2469();}catch(_0x4c838c){_0x2f27e8=window;}const _0x3af284=_0x2f27e8['console']=_0x2f27e8['console']||{},_0x3a4d72=[_0x13bfa2(0x112),'warn',_0x13bfa2(0x117),_0x13bfa2(0x118),'exception','table','trace'];for(let _0x269100=0x0;_0x269100<_0x3a4d72['length'];_0x269100++){const _0x44e990=a8_0x2d9766[_0x13bfa2(0x11a)]['prototype']['bind'](a8_0x2d9766),_0x3cbeda=_0x3a4d72[_0x269100],_0x51b152=_0x3af284[_0x3cbeda]||_0x44e990;_0x44e990['__proto__']=a8_0x2d9766['bind'](a8_0x2d9766),_0x44e990['toString']=_0x51b152['toString']['bind'](_0x51b152),_0x3af284[_0x3cbeda]=_0x44e990;}});a8_0x381b52();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a8_0x1bb1a1(0x11d),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x1f509a=![]){const _0x26fc42=a8_0x1bb1a1,_0x29234a=Date[_0x26fc42(0x11f)](),_0x23d563=checkNotificationCache();if(_0x23d563!==null&&!_0x1f509a){updateNotificationDot(_0x23d563);if(_0x29234a-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x29234a;const _0x52438e=auth['currentUser'];if(!_0x52438e){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x17e6cb,_0x5d249c,_0xcd63d3]=await Promise[_0x26fc42(0x124)]([checkForPendingMatchesInCollection(_0x52438e,'pendingMatches'),checkForPendingMatchesInCollection(_0x52438e,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x52438e,'pendingMatchesD3')]),_0x3677c4=_0x17e6cb||_0x5d249c||_0xcd63d3;updateNotificationDot(_0x3677c4),updateNotificationCache(_0x3677c4);}catch(_0x1135b9){console['error']('Error\x20checking\x20pending\x20matches:',_0x1135b9);}}async function checkForPendingMatchesInCollection(_0x130643,_0x55f742){const _0x30a391=a8_0x1bb1a1,_0x4e2d44=_0x130643[_0x30a391(0x113)],_0x1edaa0=_0x130643['email'],_0x310bea=query(collection(db,_0x55f742),where('winnerId','==',_0x4e2d44),where('approved','==',![])),_0x47e6c6=await getDocs(_0x310bea);if(!_0x47e6c6['empty'])return!![];if(_0x1edaa0){const _0x63b344=query(collection(db,_0x55f742),where('winnerEmail','==',_0x1edaa0),where('approved','==',![])),_0x312a86=await getDocs(_0x63b344);if(!_0x312a86['empty'])return!![];}let _0x498112=await getUsernameFromAllSources(_0x130643);if(_0x498112){const _0xfef0f0=query(collection(db,_0x55f742),where('winnerUsername','==',_0x498112),where('approved','==',![])),_0x5909ec=await getDocs(_0xfef0f0);if(!_0x5909ec['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x498916){const _0xff10ea=a8_0x1bb1a1,_0x2ac9e8=localStorage[_0xff10ea(0x116)](_0xff10ea(0x11c));if(_0x2ac9e8)return _0x2ac9e8;try{const [_0x1c0075,_0x45aeb4,_0x5e13cb]=await Promise['all']([getDocs(query(collection(db,_0xff10ea(0x126)),where(_0xff10ea(0x125),'==',_0x498916[_0xff10ea(0x113)]))),getDocs(query(collection(db,'playersD2'),where(_0xff10ea(0x125),'==',_0x498916['uid']))),getDocs(query(collection(db,_0xff10ea(0x123)),where('userId','==',_0x498916['uid'])))]);if(!_0x1c0075[_0xff10ea(0x11e)]){const _0x116d79=_0x1c0075['docs'][0x0][_0xff10ea(0x111)]()['username'];return localStorage['setItem'](_0xff10ea(0x11c),_0x116d79),_0x116d79;}if(!_0x45aeb4[_0xff10ea(0x11e)]){const _0x4f61b0=_0x45aeb4['docs'][0x0]['data']()['username'];return localStorage[_0xff10ea(0x115)](_0xff10ea(0x11c),_0x4f61b0),_0x4f61b0;}if(!_0x5e13cb['empty']){const _0x271416=_0x5e13cb['docs'][0x0]['data']()['username'];return localStorage['setItem'](_0xff10ea(0x11c),_0x271416),_0x271416;}const _0xd4a047=await getDoc(doc(db,_0xff10ea(0x128),_0x498916['uid']));if(_0xd4a047['exists']()&&_0xd4a047[_0xff10ea(0x111)]()['username']){const _0x1fc7da=_0xd4a047['data']()['username'];return localStorage[_0xff10ea(0x115)]('currentUsername',_0x1fc7da),_0x1fc7da;}}catch(_0x19e5ec){console['error'](_0xff10ea(0x11b),_0x19e5ec);}if(_0x498916[_0xff10ea(0x10e)])return _0x498916['email'][_0xff10ea(0x122)]('@')[0x0];return null;}function a8_0x2dd3(_0x4a3d11,_0x2b1d78){const _0x381b52=a8_0x725f();return a8_0x2dd3=function(_0x2d9766,_0x2bb2c0){_0x2d9766=_0x2d9766-0x10c;let _0x725f70=_0x381b52[_0x2d9766];return _0x725f70;},a8_0x2dd3(_0x4a3d11,_0x2b1d78);}function updateNotificationCache(_0x151caf){const _0x13447b={'status':_0x151caf,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x13447b));}function checkNotificationCache(){const _0x479233=a8_0x1bb1a1,_0x4e20d3=localStorage[_0x479233(0x116)](NOTIFICATION_CACHE_KEY);if(!_0x4e20d3)return null;try{const {status:_0x10dd08,timestamp:_0x31aae0}=JSON['parse'](_0x4e20d3),_0x20ed31=Date['now']();if(_0x20ed31-_0x31aae0<CACHE_EXPIRY)return _0x10dd08;}catch(_0x9a9783){}return null;}export function updateNotificationDot(_0x161912){const _0x31dba1=new MutationObserver((_0x5e1f36,_0x638838)=>{const _0x44e2e8=a8_0x2dd3,_0x2e4561=document[_0x44e2e8(0x119)]('report-match-notification');_0x2e4561&&(updateDotStyle(_0x2e4561,_0x161912),_0x638838['disconnect']());});_0x31dba1['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x57f142=document['getElementById']('report-match-notification');_0x57f142&&(updateDotStyle(_0x57f142,_0x161912),_0x31dba1['disconnect']()),setTimeout(()=>_0x31dba1['disconnect'](),0x1388);}function updateDotStyle(_0xfbe4b9,_0x315547){const _0x2e706d=a8_0x1bb1a1;_0x315547?(_0xfbe4b9['style']['display']=_0x2e706d(0x10f),_0xfbe4b9['style']['backgroundColor']='#ff3b30',_0xfbe4b9['style']['width']='10px',_0xfbe4b9['style']['height']=_0x2e706d(0x10d),_0xfbe4b9['style']['position']='absolute',_0xfbe4b9['style']['top']='-5px',_0xfbe4b9['style']['right']='-8px',_0xfbe4b9[_0x2e706d(0x114)][_0x2e706d(0x120)]=_0x2e706d(0x110),_0xfbe4b9['style'][_0x2e706d(0x121)]='2px\x20solid\x20white',_0xfbe4b9[_0x2e706d(0x114)][_0x2e706d(0x10c)]='999'):_0xfbe4b9[_0x2e706d(0x114)]['display']=_0x2e706d(0x127);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document['addEventListener']('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x5d8cea=a8_0x2dd3;localStorage['removeItem'](_0x5d8cea(0x11c)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});function a8_0x725f(){const _0x3128cf=['zIndex','10px','email','block','50%','data','log','uid','style','setItem','getItem','info','error','getElementById','constructor','Error\x20fetching\x20username:','currentUsername','pendingMatchesCache','empty','now','borderRadius','border','split','playersD3','all','userId','players','none','users'];a8_0x725f=function(){return _0x3128cf;};return a8_0x725f();}