const a47_0x5c8207=a47_0x28e1,a47_0x3e2cde=(function(){let _0x489877=!![];return function(_0x2c5b4f,_0x20fb81){const _0x41c939=_0x489877?function(){if(_0x20fb81){const _0x16f608=_0x20fb81['apply'](_0x2c5b4f,arguments);return _0x20fb81=null,_0x16f608;}}:function(){};return _0x489877=![],_0x41c939;};}()),a47_0x4a5072=a47_0x3e2cde(this,function(){const _0x150bb9=a47_0x28e1;let _0x560f37;try{const _0x526bba=Function('return\x20(function()\x20'+_0x150bb9(0x13b)+');');_0x560f37=_0x526bba();}catch(_0x323ebf){_0x560f37=window;}const _0x1d608e=_0x560f37['console']=_0x560f37['console']||{},_0x3efe86=['log',_0x150bb9(0x148),'info','error',_0x150bb9(0x14d),'table','trace'];for(let _0x5988f5=0x0;_0x5988f5<_0x3efe86['length'];_0x5988f5++){const _0x47f6be=a47_0x3e2cde['constructor'][_0x150bb9(0x165)][_0x150bb9(0x16e)](a47_0x3e2cde),_0x214561=_0x3efe86[_0x5988f5],_0x5bbaaf=_0x1d608e[_0x214561]||_0x47f6be;_0x47f6be['__proto__']=a47_0x3e2cde['bind'](a47_0x3e2cde),_0x47f6be[_0x150bb9(0x14b)]=_0x5bbaaf['toString']['bind'](_0x5bbaaf),_0x1d608e[_0x214561]=_0x47f6be;}});a47_0x4a5072();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':a47_0x5c8207(0x161),'description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':a47_0x5c8207(0x164),'description':'Can\x27t\x20get\x20enough'},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'gold':{'price':0x320,'name':'Gold','description':a47_0x5c8207(0x14e)},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':a47_0x5c8207(0x173)},'ocean':{'price':0x12c,'name':'Blue','description':a47_0x5c8207(0x146)},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x4b39db=a47_0x5c8207;console['log'](_0x4b39db(0x153)),storeContainer=document['getElementById'](_0x4b39db(0x150)),pointsDisplay=document[_0x4b39db(0x171)]('user-points'),authWarning=document[_0x4b39db(0x171)]('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x326ca8=>{const _0x11f3c9=a47_0x28e1;if(_0x326ca8){console['log']('‚úÖ\x20User\x20authenticated:',_0x326ca8[_0x11f3c9(0x14a)]||_0x326ca8[_0x11f3c9(0x145)]);if(authWarning)authWarning['style']['display']='none';if(storeContainer)storeContainer['style']['display']='block';await loadUserData(_0x326ca8),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style']['display']=_0x11f3c9(0x15e);if(storeContainer)storeContainer[_0x11f3c9(0x166)][_0x11f3c9(0x16a)]='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x11f3c9(0x142)]=![];}});}async function loadUserData(_0x55393f){const _0x36f560=a47_0x5c8207;try{const _0x394e2f=doc(db,_0x36f560(0x13f),_0x55393f[_0x36f560(0x14c)]),_0x3f2e71=await getDoc(_0x394e2f);if(_0x3f2e71['exists']()){const _0x383ea7=_0x3f2e71['data']();userData={'points':_0x383ea7['points']||0x0,'inventory':_0x383ea7[_0x36f560(0x141)]||[],'isAdmin':_0x383ea7[_0x36f560(0x158)]||![]},pointsDisplay&&(pointsDisplay[_0x36f560(0x162)]=userData[_0x36f560(0x172)]['toLocaleString']()),window['isUserAdmin']=userData[_0x36f560(0x158)],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console[_0x36f560(0x147)]('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items');}else await setDoc(_0x394e2f,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x55393f['displayName']||_0x55393f['email']?.[_0x36f560(0x156)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x23ae63){console[_0x36f560(0x16b)]('Error\x20loading\x20user\x20data:',_0x23ae63);}}function a47_0x28e1(_0x756ace,_0x22b29c){const _0x4a5072=a47_0x3104();return a47_0x28e1=function(_0x3e2cde,_0x19a1c1){_0x3e2cde=_0x3e2cde-0x13b;let _0x3104e9=_0x4a5072[_0x3e2cde];return _0x3104e9;},a47_0x28e1(_0x756ace,_0x22b29c);}function userOwnsTheme(_0x2310c2){const _0x125955=a47_0x5c8207;if(THEMES[_0x2310c2]?.[_0x125955(0x167)]===0x0)return!![];return userData[_0x125955(0x141)]['includes'](_0x125955(0x15f)+_0x2310c2);}async function purchaseTheme(_0x3101b0){const _0x3e2e46=a47_0x5c8207,_0x288e04=auth['currentUser'];if(!_0x288e04)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20themes','error'),![];const _0x2bd139=THEMES[_0x3101b0];if(!_0x2bd139)return console['error']('Theme\x20'+_0x3101b0+'\x20not\x20found'),![];if(userData['points']<_0x2bd139['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x2bd139['price']-userData['points'])+'\x20more\x20points.',_0x3e2e46(0x16b)),![];if(userOwnsTheme(_0x3101b0))return showMessage('You\x20already\x20own\x20the\x20'+_0x2bd139['name']+'\x20theme','info'),![];try{const _0x1ea78f=doc(db,_0x3e2e46(0x13f),_0x288e04['uid']),_0x98b187=await getDoc(_0x1ea78f);if(!_0x98b187['exists']())return showMessage(_0x3e2e46(0x15c),_0x3e2e46(0x16b)),![];const _0x305c3f=_0x98b187[_0x3e2e46(0x159)](),_0x4ee229=_0x305c3f['points']||0x0,_0x2a0c30=_0x305c3f['inventory']||[];if(_0x4ee229<_0x2bd139['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x2a0c30['includes']('theme_'+_0x3101b0))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x29280b=_0x4ee229-_0x2bd139[_0x3e2e46(0x167)],_0x3d06ad=[..._0x2a0c30,'theme_'+_0x3101b0];return await updateDoc(_0x1ea78f,{'points':_0x29280b,'inventory':_0x3d06ad,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0x288e04[_0x3e2e46(0x14c)],'userEmail':_0x288e04['email'],'itemId':_0x3e2e46(0x15f)+_0x3101b0,'itemTitle':_0x2bd139['name']+'\x20Theme','price':_0x2bd139['price'],'type':_0x3e2e46(0x16f),'category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x29280b,userData['inventory']=_0x3d06ad,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x3e2e46(0x172)]['toLocaleString']()),console['log'](_0x3e2e46(0x13e)+_0x2bd139['name']+'\x20theme\x20for\x20'+_0x2bd139[_0x3e2e46(0x167)]+_0x3e2e46(0x16d)),!![];}catch(_0x3366aa){return console['error']('Purchase\x20failed:',_0x3366aa),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x3389d4){const _0x514829=a47_0x5c8207;if(!userOwnsTheme(_0x3389d4))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first',_0x514829(0x16b)),![];return window[_0x514829(0x15d)]?(window[_0x514829(0x15d)]['switchTheme'](_0x3389d4),showMessage((THEMES[_0x3389d4]?.[_0x514829(0x13c)]||_0x3389d4)+'\x20theme\x20applied!',_0x514829(0x143)),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){const _0x5aa424=a47_0x5c8207,_0x4ca119=document['querySelector'](_0x5aa424(0x144));if(!_0x4ca119){console['error']('Themes\x20container\x20not\x20found');return;}_0x4ca119['innerHTML']='',Object[_0x5aa424(0x177)](THEMES)['forEach'](([_0x4df396,_0x2a835f])=>{const _0x3f39b3=_0x5aa424,_0x2236ae=document['createElement'](_0x3f39b3(0x174));_0x2236ae['className']=_0x3f39b3(0x155),_0x2236ae['dataset'][_0x3f39b3(0x160)]=_0x4df396,_0x2236ae[_0x3f39b3(0x170)]['itemId']='theme_'+_0x4df396,_0x2236ae['dataset']['price']=_0x2a835f['price'],_0x2236ae['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x4df396+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x2a835f[_0x3f39b3(0x167)]===0x0?'FREE':_0x2a835f['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x2a835f['name']+_0x3f39b3(0x16c)+_0x2a835f['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ca119['appendChild'](_0x2236ae);}),setupThemeButtons();}function setupThemeButtons(){const _0x4648c6=document['querySelectorAll']('.theme-select-btn');_0x4648c6['forEach'](_0x594d70=>{_0x594d70['addEventListener']('click',async _0x1ff6e2=>{const _0x2be651=a47_0x28e1;_0x1ff6e2['preventDefault']();const _0x255680=auth['currentUser'];if(!_0x255680){showMessage(_0x2be651(0x15b),'error');return;}const _0x480fe3=_0x594d70['closest']('[data-theme]'),_0x2ecbef=_0x480fe3[_0x2be651(0x170)]['theme'],_0xad544e=THEMES[_0x2ecbef];if(!_0xad544e){console['error']('Theme\x20'+_0x2ecbef+'\x20not\x20found');return;}console[_0x2be651(0x147)]('Theme\x20clicked:\x20'+_0xad544e[_0x2be651(0x13c)]+'\x20('+_0x2ecbef+')');if(_0x594d70['disabled']){_0xad544e['price']>0x0&&showMessage('You\x20need\x20'+_0xad544e['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x594d70['textContent']==='Current\x20Theme'){showMessage(_0xad544e['name']+'\x20is\x20already\x20your\x20current\x20theme',_0x2be651(0x176));return;}if(_0x594d70['textContent']==='Apply\x20Theme'){applyTheme(_0x2ecbef),updateThemeButtons();return;}if(_0x594d70[_0x2be651(0x162)]['includes']('Buy')){const _0x48d9d3=window['confirm']('Purchase\x20'+_0xad544e[_0x2be651(0x13c)]+'\x20theme\x20for\x20'+_0xad544e['price']+'\x20points?');if(!_0x48d9d3)return;const _0x2a82a3=await purchaseTheme(_0x2ecbef);_0x2a82a3&&(showMessage(_0xad544e['name']+'\x20theme\x20purchased!','success'),applyTheme(_0x2ecbef),updateThemeButtons());return;}userOwnsTheme(_0x2ecbef)?applyTheme(_0x2ecbef):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x56ee60=a47_0x5c8207,_0x18ddfa=window[_0x56ee60(0x15d)]?window['ThemeSystem'][_0x56ee60(0x140)]():'default',_0x35ed0b=auth['currentUser'];document['querySelectorAll']('.theme-select-btn')[_0x56ee60(0x157)](_0x4fb279=>{const _0x3d3ed7=_0x56ee60,_0x406ec8=_0x4fb279['closest']('[data-theme]'),_0x3556dc=_0x406ec8['dataset'][_0x3d3ed7(0x160)],_0x6d5ac7=THEMES[_0x3556dc];if(!_0x6d5ac7)return;_0x4fb279['disabled']=![],_0x4fb279[_0x3d3ed7(0x166)][_0x3d3ed7(0x163)]='',_0x4fb279['style']['cursor']='pointer',_0x4fb279['classList']['remove']('current-theme','apply-theme',_0x3d3ed7(0x151),'cannot-afford',_0x3d3ed7(0x179),'sign-in-paid');if(!_0x35ed0b){_0x6d5ac7['price']===0x0?(_0x4fb279['textContent']=_0x3d3ed7(0x169),_0x4fb279[_0x3d3ed7(0x14f)][_0x3d3ed7(0x168)]('sign-in-free')):(_0x4fb279[_0x3d3ed7(0x162)]=_0x3d3ed7(0x175),_0x4fb279['disabled']=!![],_0x4fb279['style']['opacity']='0.7',_0x4fb279[_0x3d3ed7(0x14f)]['add'](_0x3d3ed7(0x17a)));return;}if(_0x3556dc===_0x18ddfa){_0x4fb279['textContent']='Current\x20Theme',_0x4fb279[_0x3d3ed7(0x14f)]['add']('current-theme'),_0x4fb279['disabled']=!![],_0x4fb279['style']['cursor']='default';return;}if(userOwnsTheme(_0x3556dc)){_0x4fb279[_0x3d3ed7(0x162)]='Apply\x20Theme',_0x4fb279[_0x3d3ed7(0x14f)][_0x3d3ed7(0x168)](_0x3d3ed7(0x13d));return;}if(userData['points']>=_0x6d5ac7['price']){_0x4fb279[_0x3d3ed7(0x162)]='Buy\x20for\x20'+_0x6d5ac7[_0x3d3ed7(0x167)]+'\x20Points',_0x4fb279[_0x3d3ed7(0x14f)][_0x3d3ed7(0x168)]('can-afford');return;}_0x4fb279[_0x3d3ed7(0x162)]='Need\x20'+_0x6d5ac7[_0x3d3ed7(0x167)]+'\x20Points',_0x4fb279['classList']['add']('cannot-afford'),_0x4fb279['style']['opacity']='0.5',_0x4fb279['disabled']=!![],_0x4fb279[_0x3d3ed7(0x166)]['cursor']='not-allowed';});}function a47_0x3104(){const _0x44daa2=['{}.constructor(\x22return\x20this\x22)(\x20)','name','apply-theme','‚úÖ\x20Purchased\x20','userProfiles','getCurrentTheme','inventory','isUserAdmin','success','.themes-grid','email','This\x20one\x20is\x20really\x20pretty','log','warn','remove','displayName','toString','uid','exception','Only\x20the\x20best\x20get\x20this\x20one','classList','store-content','can-afford','className','üè™\x20Redeem\x20store\x20initializing...','parentNode','store-item','split','forEach','isAdmin','data','store-message','Please\x20sign\x20in\x20to\x20select\x20themes','User\x20profile\x20not\x20found','ThemeSystem','block','theme_','theme','Classic\x20RDL','textContent','opacity','Purple','prototype','style','price','add','Sign\x20in\x20to\x20Apply','display','error','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','\x20points','bind','purchase','dataset','getElementById','points','You\x20can\x20see\x20better!','div','Sign\x20in\x20to\x20Purchase','info','entries','createElement','sign-in-free','sign-in-paid'];a47_0x3104=function(){return _0x44daa2;};return a47_0x3104();}function showMessage(_0x136e02,_0x9c4bff='info'){const _0x27712f=a47_0x5c8207,_0x1540e6=document['getElementById'](_0x27712f(0x15a));_0x1540e6&&_0x1540e6['remove']();const _0x24a89e=document[_0x27712f(0x178)]('div');_0x24a89e['id']='store-message',_0x24a89e[_0x27712f(0x152)]='store-message\x20store-message-'+_0x9c4bff,_0x24a89e[_0x27712f(0x162)]=_0x136e02,document['body']['appendChild'](_0x24a89e),requestAnimationFrame(()=>{_0x24a89e['classList']['add']('visible');}),setTimeout(()=>{const _0x56c842=_0x27712f;_0x24a89e['classList'][_0x56c842(0x149)]('visible'),setTimeout(()=>{const _0x36fbd4=_0x56c842;_0x24a89e[_0x36fbd4(0x154)]&&_0x24a89e['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console[a47_0x5c8207(0x147)]('üè™\x20Redeem\x20store\x20loaded');