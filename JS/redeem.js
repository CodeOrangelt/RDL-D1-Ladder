const a46_0x136f52=a46_0x36c9,a46_0x544353=(function(){let _0x224f08=!![];return function(_0x245780,_0x4bb386){const _0x3d5414=_0x224f08?function(){const _0x1e82ad=a46_0x36c9;if(_0x4bb386){const _0x34a972=_0x4bb386[_0x1e82ad(0x159)](_0x245780,arguments);return _0x4bb386=null,_0x34a972;}}:function(){};return _0x224f08=![],_0x3d5414;};}()),a46_0x36497b=a46_0x544353(this,function(){const _0x2d3e1b=a46_0x36c9;let _0x3f47e7;try{const _0x5b6020=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3f47e7=_0x5b6020();}catch(_0x4515a7){_0x3f47e7=window;}const _0x51c553=_0x3f47e7['console']=_0x3f47e7['console']||{},_0x5e36e3=['log','warn','info','error','exception','table','trace'];for(let _0x2a9986=0x0;_0x2a9986<_0x5e36e3['length'];_0x2a9986++){const _0x3c3912=a46_0x544353[_0x2d3e1b(0x185)]['prototype']['bind'](a46_0x544353),_0x37c3da=_0x5e36e3[_0x2a9986],_0x1b4efa=_0x51c553[_0x37c3da]||_0x3c3912;_0x3c3912['__proto__']=a46_0x544353['bind'](a46_0x544353),_0x3c3912['toString']=_0x1b4efa[_0x2d3e1b(0x15c)][_0x2d3e1b(0x12e)](_0x1b4efa),_0x51c553[_0x37c3da]=_0x3c3912;}});a46_0x36497b();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':a46_0x136f52(0x19a)},'contrast':{'price':0x0,'name':a46_0x136f52(0x176),'description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':a46_0x136f52(0x16e),'description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':'Red','description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':a46_0x136f52(0x132),'description':'Only\x20the\x20best\x20get\x20this\x20one'},'emerald':{'price':0x3e8,'name':'Emerald','description':'Emerald\x20City!'},'cockpit':{'price':0x4b0,'name':'Cockpit','description':'is\x20that...\x20Pfunk?'}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':'../images/tokens/subgame/pwr01.gif','category':'powerup'},'fan':{'price':0x96,'name':'Fan','description':'Show\x20your\x20support\x20with\x20this\x20fan\x20token.','image':'../images/tokens/Fan.gif','category':a46_0x136f52(0x180)},'marker':{'price':0xfa,'name':a46_0x136f52(0x171),'description':a46_0x136f52(0x1a0),'image':'../images/tokens/Marker.gif','category':'fun'},'laser':{'price':0x12c,'name':'Laser','description':'Classic\x20laser\x20weapon\x20token.','image':'../images/tokens/Laser.gif','category':'weapon'},'pbomb':{'price':0x15e,'name':a46_0x136f52(0x15d),'description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':'weapon'},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':a46_0x136f52(0x15e),'image':a46_0x136f52(0x165),'category':a46_0x136f52(0x195)},'lock':{'price':0x1c2,'name':'Lock','description':a46_0x136f52(0x191),'image':'../images/tokens/Lock.gif','category':'fun'},'blob01':{'price':0x1f4,'name':'Blob\x20Token\x201','description':'A\x20mysterious\x20purple\x20blob\x20token','image':a46_0x136f52(0x187),'category':'blob'},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':a46_0x136f52(0x195)},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':'Become\x20one\x20with\x20the\x20shadows','image':a46_0x136f52(0x1aa),'category':'special'},'pwr02':{'price':0x258,'name':'Shield\x20Orb','description':a46_0x136f52(0x196),'image':'../images/tokens/subgame/pwr02.gif','category':'powerup'},'mercury':{'price':0x258,'name':a46_0x136f52(0x17d),'description':'Fast\x20and\x20furious\x20missile\x20token.','image':a46_0x136f52(0x17a),'category':'weapon'},'plasmablobl':{'price':0x258,'name':'Plasma\x20Blob','description':'A\x20mysterious\x20plasma\x20blob.','image':'../images/tokens/Plasmablobl.gif','category':a46_0x136f52(0x1a9)},'smissile':{'price':0x28a,'name':'Smart\x20Missile','description':'Intelligent\x20targeting\x20system','image':a46_0x136f52(0x19e),'category':'weapon'},'smartmine':{'price':0x2ee,'name':a46_0x136f52(0x155),'description':a46_0x136f52(0x157),'image':'../images/tokens/Smartmine.gif','category':'weapon'},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':'../images/tokens/subgame/mmissile.gif','category':a46_0x136f52(0x195)},'gauge18':{'price':0x320,'name':'R/Y/B\x20Keys','description':'Monitor\x20your\x20ship\x27s\x20energy\x20levels','image':'../images/tokens/gauge18.gif','category':'equipment'},'extralife':{'price':0x320,'name':'Extra\x20Life','description':'A\x20rare\x20extra\x20life\x20token.','image':'../images/tokens/Extralife.gif','category':'special'},'hostage':{'price':0x3b6,'name':a46_0x136f52(0x1a2),'description':a46_0x136f52(0x131),'image':'../images/tokens/Hostage.gif','category':a46_0x136f52(0x18f)},'phoenix':{'price':0x3b6,'name':a46_0x136f52(0x122),'description':'Fiery\x20phoenix\x20cannon\x20token.','image':'../images/tokens/Phoenix.gif','category':a46_0x136f52(0x195)},'blob02':{'price':0x3e8,'name':'Blob\x20Token\x202','description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':'blob'},'invuln':{'price':0x5dc,'name':a46_0x136f52(0x184),'description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':'powerup'},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':a46_0x136f52(0x16b),'image':'../images/tokens/blob03.gif','category':a46_0x136f52(0x1a9)},'reactor':{'price':0x7d0,'name':'Reactor','description':a46_0x136f52(0x1a1),'image':'../images/tokens/Reactor.gif','category':'special'},'pyro':{'price':0xbb8,'name':'Pyro','description':'The\x20iconic\x20Pyro-GX\x20ship.','image':a46_0x136f52(0x141),'category':'ship'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener'](a46_0x136f52(0x12b),()=>{const _0x5b6f0c=a46_0x136f52;console[_0x5b6f0c(0x1a6)]('🏪\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x5b6f0c(0x124)]('store-content'),pointsDisplay=document['getElementById']('user-points'),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x31dccb=>{const _0xf7ff90=a46_0x36c9;if(_0x31dccb){console['log']('✅\x20User\x20authenticated:',_0x31dccb['displayName']||_0x31dccb['email']);if(authWarning)authWarning['style'][_0xf7ff90(0x142)]='none';if(storeContainer)storeContainer['style'][_0xf7ff90(0x142)]=_0xf7ff90(0x152);await loadUserData(_0x31dccb),updateThemeButtons(),updateTokenButtons();}else{console['log'](_0xf7ff90(0x17c));if(authWarning)authWarning[_0xf7ff90(0x170)][_0xf7ff90(0x142)]='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x577fab){const _0xc86ea6=a46_0x136f52;try{const _0x223c8b=doc(db,'userProfiles',_0x577fab['uid']),_0x7cd2e=await getDoc(_0x223c8b);if(_0x7cd2e[_0xc86ea6(0x19d)]()){const _0x1aa0e9=_0x7cd2e['data']();userData={'points':_0x1aa0e9['points']||0x0,'inventory':_0x1aa0e9['inventory']||[],'isAdmin':_0x1aa0e9['isAdmin']||![],'equippedToken':_0x1aa0e9[_0xc86ea6(0x172)]||null},pointsDisplay&&(pointsDisplay['textContent']=userData['points']['toLocaleString']()),window[_0xc86ea6(0x160)]=userData[_0xc86ea6(0x1a5)],userData[_0xc86ea6(0x1a5)]&&(console['log']('👑\x20Admin\x20controls\x20enabled'),window['dispatchEvent'](new CustomEvent('adminStatusChanged',{'detail':{'isAdmin':!![]}}))),console['log'](_0xc86ea6(0x123)+userData[_0xc86ea6(0x128)]+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||'none'));}else await setDoc(_0x223c8b,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0x577fab[_0xc86ea6(0x162)]||_0x577fab['email']?.[_0xc86ea6(0x18c)]('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay['textContent']='0'),window[_0xc86ea6(0x160)]=![],console['log'](_0xc86ea6(0x183));}catch(_0x452f6a){console['error']('Error\x20loading\x20user\x20data:',_0x452f6a);}}function userOwnsTheme(_0x1eb805){const _0x24a48a=a46_0x136f52;if(THEMES[_0x1eb805]?.[_0x24a48a(0x13a)]===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x1eb805);}function userOwnsToken(_0x3f11cc){const _0x5901b6=a46_0x136f52;return userData['inventory']['includes'](_0x5901b6(0x136)+_0x3f11cc);}function userHasTokenEquipped(_0x55d6f9){return userData['equippedToken']===_0x55d6f9;}function getEquippedToken(){return userData['equippedToken']||null;}async function purchaseTheme(_0x472e58){const _0x5859b0=a46_0x136f52,_0x39f9d8=auth[_0x5859b0(0x140)];if(!_0x39f9d8)return showMessage(_0x5859b0(0x15a),_0x5859b0(0x130)),![];const _0x22ea77=THEMES[_0x472e58];if(!_0x22ea77)return console['error']('Theme\x20'+_0x472e58+'\x20not\x20found'),![];if(userData['points']<_0x22ea77['price'])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x22ea77[_0x5859b0(0x13a)]-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsTheme(_0x472e58))return showMessage('You\x20already\x20own\x20the\x20'+_0x22ea77['name']+'\x20theme','info'),![];try{return await processPurchase(_0x472e58,_0x22ea77,'theme');}catch(_0x1ea86d){return console['error'](_0x5859b0(0x177),_0x1ea86d),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x5859b0(0x130)),![];}}async function purchaseToken(_0xe51c50){const _0x507d69=a46_0x136f52,_0x10c263=auth['currentUser'];if(!_0x10c263)return showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error'),![];const _0x51b1e2=TOKENS[_0xe51c50];if(!_0x51b1e2)return console['error']('Token\x20'+_0xe51c50+'\x20not\x20found'),![];if(userData['points']<_0x51b1e2[_0x507d69(0x13a)])return showMessage(_0x507d69(0x168)+(_0x51b1e2[_0x507d69(0x13a)]-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsToken(_0xe51c50))return showMessage('You\x20already\x20own\x20the\x20'+_0x51b1e2[_0x507d69(0x143)]+'\x20token','info'),![];try{return await processPurchase(_0xe51c50,_0x51b1e2,_0x507d69(0x166));}catch(_0x2a9106){return console['error']('Token\x20purchase\x20failed:',_0x2a9106),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.',_0x507d69(0x130)),![];}}async function processPurchase(_0x265282,_0x4cca64,_0x3af970){const _0x13cb8f=a46_0x136f52,_0x504499=auth['currentUser'];try{const _0x396d9c=doc(db,'userProfiles',_0x504499['uid']),_0x10c15c=await getDoc(_0x396d9c);if(!_0x10c15c[_0x13cb8f(0x19d)]())return showMessage(_0x13cb8f(0x175),'error'),![];const _0x524f6f=_0x10c15c['data'](),_0x3e2ef5=_0x524f6f['points']||0x0,_0x20699e=_0x524f6f['inventory']||[];if(_0x3e2ef5<_0x4cca64['price'])return showMessage('Insufficient\x20points','error'),![];if(_0x20699e['includes'](_0x3af970+'_'+_0x265282))return showMessage('You\x20already\x20own\x20this\x20'+_0x3af970,'info'),![];const _0x422b5b=_0x3e2ef5-_0x4cca64['price'],_0x5e8497=[..._0x20699e,_0x3af970+'_'+_0x265282];await updateDoc(_0x396d9c,{'points':_0x422b5b,'inventory':_0x5e8497,'lastPurchase':serverTimestamp()});if(_0x3af970===_0x13cb8f(0x166))try{const _0x301f29=doc(db,'userTokens',_0x504499['uid']),_0x37ee31=await getDoc(_0x301f29);let _0x199b55=[];_0x37ee31['exists']()&&(_0x199b55=_0x37ee31['data']()[_0x13cb8f(0x121)]||[]);const _0x178f69=new Date();_0x199b55['push']({'tokenId':_0x265282,'tokenName':_0x4cca64['name'],'tokenImage':_0x4cca64['image'],'category':_0x4cca64['category'],'purchasedAt':_0x178f69,'price':_0x4cca64[_0x13cb8f(0x13a)],'equipped':![]}),await setDoc(_0x301f29,{'userId':_0x504499['uid'],'username':_0x524f6f['username']||_0x504499['displayName']||'Unknown','tokens':_0x199b55,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache==='function'&&clearTokenCache(_0x504499['uid']),console['log']('✅\x20Token\x20'+_0x265282+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x3957b0){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:',_0x3957b0),_0x3957b0['code']==='permission-denied'?console['log']('🔧\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console['error'](_0x13cb8f(0x13b),_0x3957b0);}try{await addDoc(collection(db,_0x13cb8f(0x15b)),{'userId':_0x504499['uid'],'userEmail':_0x504499['email'],'itemId':_0x3af970+'_'+_0x265282,'itemTitle':_0x4cca64['name'],'price':_0x4cca64[_0x13cb8f(0x13a)],'type':'purchase','category':_0x3af970,'timestamp':serverTimestamp()});}catch(_0x52a957){console[_0x13cb8f(0x188)]('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x52a957);}return userData[_0x13cb8f(0x128)]=_0x422b5b,userData[_0x13cb8f(0x182)]=_0x5e8497,pointsDisplay&&(pointsDisplay[_0x13cb8f(0x18a)]=userData['points'][_0x13cb8f(0x164)]()),updateTokenButtons(),_0x3af970==='theme'&&updateThemeButtons(),console['log']('✅\x20Purchased\x20'+_0x4cca64[_0x13cb8f(0x143)]+_0x13cb8f(0x146)+_0x4cca64['price']+'\x20points'),showMessage('Successfully\x20purchased\x20'+_0x4cca64[_0x13cb8f(0x143)]+'!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','success'),!![];}catch(_0x10854e){console['error'](_0x13cb8f(0x14b),_0x10854e);if(_0x10854e['code']==='permission-denied')showMessage('Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','error');else{if(_0x10854e['code']==='unavailable')showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.',_0x13cb8f(0x130));else _0x10854e[_0x13cb8f(0x190)]===_0x13cb8f(0x13c)?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.',_0x13cb8f(0x130)):showMessage(_0x13cb8f(0x199),'error');}return![];}}async function equipToken(_0x22eff2){const _0x2705f1=a46_0x136f52,_0x12f0f7=auth[_0x2705f1(0x140)];if(!_0x12f0f7)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens','error'),![];const _0x533f29=TOKENS[_0x22eff2];if(!_0x533f29)return console[_0x2705f1(0x130)]('Token\x20'+_0x22eff2+'\x20not\x20found'),![];if(!userOwnsToken(_0x22eff2))return showMessage(_0x2705f1(0x18d),'error'),![];try{const _0x3a25e0=doc(db,'userProfiles',_0x12f0f7[_0x2705f1(0x192)]);await updateDoc(_0x3a25e0,{'equippedToken':_0x22eff2,'lastTokenEquip':serverTimestamp()});try{const _0x9e17e1=doc(db,_0x2705f1(0x13d),_0x12f0f7['uid']),_0xa438a4=await getDoc(_0x9e17e1);if(_0xa438a4['exists']()){const _0x159c32=_0xa438a4[_0x2705f1(0x18e)](),_0x15c9df=_0x159c32['tokens']||[],_0x9013c3=_0x15c9df[_0x2705f1(0x18b)](_0x5900b5=>({..._0x5900b5,'equipped':_0x5900b5['tokenId']===_0x22eff2}));await updateDoc(_0x9e17e1,{'tokens':_0x9013c3,'equippedToken':_0x22eff2,'lastUpdated':serverTimestamp()});}}catch(_0x213a6a){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x213a6a);}return userData['equippedToken']=_0x22eff2,typeof clearTokenCache===_0x2705f1(0x149)&&(clearTokenCache(_0x12f0f7[_0x2705f1(0x192)]),clearTokenCache()),setTimeout(()=>{const _0x320e1a=_0x2705f1;window['displayLadder']&&typeof window['displayLadder']==='function'&&(console[_0x320e1a(0x1a6)]('🔄\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x320e1a(0x14d)]['refreshUI']===_0x320e1a(0x149)&&window['RedeemStore']['refreshUI']();},0x1f4),console['log'](_0x2705f1(0x19f)+_0x533f29['name']),showMessage(_0x533f29[_0x2705f1(0x143)]+'\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x64647b){return console['error']('Token\x20equip\x20failed:',_0x64647b),_0x64647b['code']==='permission-denied'?showMessage('Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','warning'):showMessage('Failed\x20to\x20equip\x20token:\x20'+_0x64647b[_0x2705f1(0x127)],_0x2705f1(0x130)),![];}}async function unequipToken(){const _0x2664e3=a46_0x136f52,_0x17cc8a=auth[_0x2664e3(0x140)];if(!_0x17cc8a)return showMessage('Please\x20sign\x20in\x20to\x20unequip\x20tokens',_0x2664e3(0x130)),![];if(!userData['equippedToken'])return showMessage('No\x20token\x20is\x20currently\x20equipped','info'),![];try{const _0x2c0542=doc(db,_0x2664e3(0x13f),_0x17cc8a['uid']);await updateDoc(_0x2c0542,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x46f2dd=doc(db,'userTokens',_0x17cc8a[_0x2664e3(0x192)]),_0x16bd0c=await getDoc(_0x46f2dd);if(_0x16bd0c[_0x2664e3(0x19d)]()){const _0x585cb2=_0x16bd0c[_0x2664e3(0x18e)](),_0x39b570=_0x585cb2['tokens']||[],_0x26f3a0=_0x39b570['map'](_0x1cd938=>({..._0x1cd938,'equipped':![]}));await updateDoc(_0x46f2dd,{'tokens':_0x26f3a0,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData[_0x2664e3(0x172)]=null,typeof clearTokenCache==='function'&&(clearTokenCache(_0x17cc8a['uid']),clearTokenCache()),setTimeout(()=>{const _0x4cea4c=_0x2664e3;window['displayLadder']&&typeof window['displayLadder']===_0x4cea4c(0x149)&&(console['log']('🔄\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x4cea4c(0x14d)]['refreshUI']==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console['log']('✅\x20Token\x20unequipped'),showMessage('Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x54055){return console['error'](_0x2664e3(0x186),_0x54055),showMessage('Failed\x20to\x20unequip\x20token:\x20'+_0x54055['message'],'error'),![];}}async function sellToken(_0x4e9ca5){const _0x5e8909=a46_0x136f52,_0x16451b=auth['currentUser'];if(!_0x16451b)return showMessage('Please\x20sign\x20in\x20to\x20sell\x20tokens',_0x5e8909(0x130)),![];if(!userData['isAdmin'])return showMessage('Only\x20admins\x20can\x20sell\x20tokens','error'),![];const _0x1bbfa8=TOKENS[_0x4e9ca5];if(!_0x1bbfa8)return console['error'](_0x5e8909(0x14c)+_0x4e9ca5+'\x20not\x20found'),![];if(!userOwnsToken(_0x4e9ca5))return showMessage('You\x20don\x27t\x20own\x20this\x20token','error'),![];try{const _0x208954=doc(db,'userProfiles',_0x16451b[_0x5e8909(0x192)]),_0x3b263d=await getDoc(_0x208954),_0xce2277=_0x3b263d[_0x5e8909(0x18e)](),_0x3f3a61=Math[_0x5e8909(0x19b)](_0x1bbfa8['price']*0.5),_0x240131=(_0xce2277['points']||0x0)+_0x3f3a61,_0x36e497=(_0xce2277['inventory']||[])['filter'](_0x1c6184=>_0x1c6184!=='token_'+_0x4e9ca5),_0x176252=_0xce2277['equippedToken']===_0x4e9ca5?null:_0xce2277['equippedToken'];await updateDoc(_0x208954,{'points':_0x240131,'inventory':_0x36e497,'equippedToken':_0x176252,'lastSale':serverTimestamp()});const _0x1dee6e=doc(db,'userTokens',_0x16451b[_0x5e8909(0x192)]),_0x2aa518=await getDoc(_0x1dee6e);if(_0x2aa518['exists']()){const _0x2359c2=_0x2aa518['data'](),_0x3c0cfd=_0x2359c2['tokens']||[],_0x20c5cd=_0x3c0cfd['filter'](_0x2b2e7b=>_0x2b2e7b['tokenId']!==_0x4e9ca5);await updateDoc(_0x1dee6e,{'tokens':_0x20c5cd,'equippedToken':_0x176252,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0x16451b['uid'],'userEmail':_0x16451b['email'],'itemId':'token_'+_0x4e9ca5,'itemTitle':_0x1bbfa8['name'],'refund':_0x3f3a61,'originalPrice':_0x1bbfa8['price'],'type':_0x5e8909(0x14a),'category':'token','timestamp':serverTimestamp()}),userData[_0x5e8909(0x128)]=_0x240131,userData['inventory']=_0x36e497,userData['equippedToken']=_0x176252,pointsDisplay&&(pointsDisplay[_0x5e8909(0x18a)]=userData['points']['toLocaleString']()),typeof clearTokenCache==='function'&&clearTokenCache(_0x16451b[_0x5e8909(0x192)]),console['log'](_0x5e8909(0x17e)+_0x1bbfa8['name']+'\x20for\x20'+_0x3f3a61+'\x20points'),showMessage('Sold\x20'+_0x1bbfa8['name']+'\x20for\x20'+_0x3f3a61+'\x20points\x20(50%\x20refund)','success'),!![];}catch(_0x5a2b31){return console['error'](_0x5e8909(0x135),_0x5a2b31),showMessage(_0x5e8909(0x125)+_0x5a2b31[_0x5e8909(0x127)],'error'),![];}}function a46_0x36c9(_0x4204d7,_0x21655a){const _0x36497b=a46_0x279b();return a46_0x36c9=function(_0x544353,_0x233f7b){_0x544353=_0x544353-0x11e;let _0x279b08=_0x36497b[_0x544353];return _0x279b08;},a46_0x36c9(_0x4204d7,_0x21655a);}function applyTheme(_0x58d980){const _0x448800=a46_0x136f52;if(!userOwnsTheme(_0x58d980))return showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error'),![];return window['ThemeSystem']?(window[_0x448800(0x158)][_0x448800(0x174)](_0x58d980),showMessage((THEMES[_0x58d980]?.['name']||_0x58d980)+'\x20theme\x20applied!',_0x448800(0x12a)),!![]):(console['error']('Theme\x20system\x20not\x20found'),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x366c8a=a46_0x136f52,_0x2ab18a=document[_0x366c8a(0x179)](_0x366c8a(0x11e));if(!_0x2ab18a){console[_0x366c8a(0x130)](_0x366c8a(0x163));return;}_0x2ab18a['innerHTML']='',Object[_0x366c8a(0x1a4)](THEMES)['forEach'](([_0x5ac418,_0x450b08])=>{const _0x9b1aa7=_0x366c8a,_0xcf3288=document['createElement']('div');_0xcf3288[_0x9b1aa7(0x197)]='store-item',_0xcf3288[_0x9b1aa7(0x138)]['theme']=_0x5ac418,_0xcf3288['dataset'][_0x9b1aa7(0x14e)]='theme_'+_0x5ac418,_0xcf3288[_0x9b1aa7(0x138)][_0x9b1aa7(0x13a)]=_0x450b08['price'],_0xcf3288['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x5ac418+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x450b08[_0x9b1aa7(0x13a)]===0x0?'FREE':_0x450b08['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x450b08['name']+_0x9b1aa7(0x178)+_0x450b08['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2ab18a['appendChild'](_0xcf3288);}),setupThemeButtons();}function buildTokenItems(){const _0x1229bc=a46_0x136f52,_0x55f5b0=document[_0x1229bc(0x179)]('.tokens-grid');if(!_0x55f5b0){console['error']('Tokens\x20container\x20not\x20found');return;}_0x55f5b0[_0x1229bc(0x161)]='',Object['entries'](TOKENS)['forEach'](([_0x297011,_0x79cc91])=>{const _0xf4407f=_0x1229bc,_0x5ba21b=document['createElement']('div');_0x5ba21b['className']='store-item\x20token-item',_0x5ba21b['dataset']['token']=_0x297011,_0x5ba21b['dataset']['itemId']='token_'+_0x297011,_0x5ba21b['dataset']['price']=_0x79cc91['price'];const _0x57c77e=userData['isAdmin']&&userOwnsToken(_0x297011)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math['floor'](_0x79cc91['price']*0.5)+'\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':'';_0x5ba21b['innerHTML']=_0xf4407f(0x145)+_0x79cc91['image']+'\x22\x20alt=\x22'+_0x79cc91['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x79cc91['price']+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x57c77e+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x55f5b0['appendChild'](_0x5ba21b);}),setupTokenButtons();}function a46_0x279b(){const _0x2fbfd8=['.themes-grid','pointer','[data-token]','tokens','Phoenix\x20Cannon','User\x20data\x20loaded\x20-\x20Points:\x20','getElementById','Failed\x20to\x20sell\x20token:\x20','Need\x20','message','points','cannot-afford','success','DOMContentLoaded','Equipped','info','bind','includes','error','Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','Gold','classList','add','Token\x20sale\x20failed:','token_','background','dataset','none','price','Unexpected\x20token\x20error:','unauthenticated','userTokens','var(--muted-color,\x20#757575)','userProfiles','currentUser','../images/tokens/Pyro.gif','display','name','.token-sell-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x20for\x20','.theme-select-btn','preventDefault','function','sale','Purchase\x20processing\x20error:','Token\x20','RedeemStore','itemId','store-message','can-afford','visible','block','disabled','querySelectorAll','Smart\x20Mine','confirm','A\x20cunning\x20explosive\x20device.','ThemeSystem','apply','Please\x20sign\x20in\x20to\x20purchase\x20themes','transactions','toString','Proximity\x20Bomb','Devastating\x20fusion\x20weapon\x20technology','[data-theme]','isUserAdmin','innerHTML','displayName','Themes\x20container\x20not\x20found','toLocaleString','../images/tokens/subgame/fusion.gif','token','apply-theme','Not\x20enough\x20points.\x20You\x20need\x20','cursor','body','The\x20final\x20blob\x20in\x20the\x20collection','addEventListener','click','Yellow\x20Orange','forEach','style','Marker','equippedToken','\x20Points','switchTheme','User\x20profile\x20not\x20found','Nightlight','Theme\x20purchase\x20failed:','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','querySelector','../images/tokens/Mercury.gif','\x20not\x20found','❌\x20User\x20not\x20authenticated','Mercury\x20Missile','✅\x20Sold\x20token\x20','default','fun','appendChild','inventory','New\x20user\x20profile\x20created','Invulnerability','constructor','Token\x20unequip\x20failed:','../images/tokens/blob01.gif','warn','\x20token','textContent','map','split','You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','data','special','code','Lock\x20in\x20your\x20victory.','uid','remove','Sign\x20in\x20to\x20Purchase','weapon','Advanced\x20energy\x20storage\x20system','className','opacity','Purchase\x20failed.\x20Please\x20try\x20again.','Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer','floor','var(--success-color,\x20#4CAF50)','exists','../images/tokens/subgame/smissile.gif','✅\x20Equipped\x20token:\x20','Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','The\x20heart\x20of\x20every\x20mine.','Hostage','can-equip','entries','isAdmin','log','\x20theme\x20purchased!','Buy','blob','../images/tokens/cloak.gif'];a46_0x279b=function(){return _0x2fbfd8;};return a46_0x279b();}function setupThemeButtons(){const _0x27a9b6=a46_0x136f52,_0x4f157d=document['querySelectorAll'](_0x27a9b6(0x147));_0x4f157d['forEach'](_0x36375f=>{const _0x1b7b7a=_0x27a9b6;_0x36375f[_0x1b7b7a(0x16c)]('click',async _0xe4d31a=>{const _0x24966f=_0x1b7b7a;_0xe4d31a['preventDefault']();const _0x577fa3=auth['currentUser'];if(!_0x577fa3){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x1e67ed=_0x36375f['closest'](_0x24966f(0x15f)),_0x1047cf=_0x1e67ed['dataset']['theme'],_0x158069=THEMES[_0x1047cf];if(!_0x158069){console['error']('Theme\x20'+_0x1047cf+_0x24966f(0x17b));return;}console[_0x24966f(0x1a6)]('Theme\x20clicked:\x20'+_0x158069['name']+'\x20('+_0x1047cf+')');if(_0x36375f[_0x24966f(0x153)]){_0x158069['price']>0x0&&showMessage('You\x20need\x20'+_0x158069['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x36375f['textContent']==='Current\x20Theme'){showMessage(_0x158069['name']+'\x20is\x20already\x20your\x20current\x20theme',_0x24966f(0x12d));return;}if(_0x36375f['textContent']==='Apply\x20Theme'){applyTheme(_0x1047cf),updateThemeButtons();return;}if(_0x36375f['textContent'][_0x24966f(0x12f)]('Buy')){const _0x2ccaa2=window[_0x24966f(0x156)]('Purchase\x20'+_0x158069[_0x24966f(0x143)]+'\x20theme\x20for\x20'+_0x158069['price']+'\x20points?');if(!_0x2ccaa2)return;const _0x2c5261=await purchaseTheme(_0x1047cf);_0x2c5261&&(showMessage(_0x158069['name']+_0x24966f(0x1a7),'success'),applyTheme(_0x1047cf),updateThemeButtons());return;}userOwnsTheme(_0x1047cf)?applyTheme(_0x1047cf):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x2bea67=a46_0x136f52,_0x40c5e0=document['querySelectorAll']('.token-select-btn'),_0x201e2e=document[_0x2bea67(0x154)]('.token-equip-btn'),_0x49ee90=document['querySelectorAll'](_0x2bea67(0x144));_0x40c5e0['forEach'](_0x1b295b=>{const _0x8ddb3=_0x2bea67;_0x1b295b['addEventListener'](_0x8ddb3(0x16d),async _0x54cd6f=>{const _0x290ead=_0x8ddb3;_0x54cd6f['preventDefault']();const _0x2980b2=auth['currentUser'];if(!_0x2980b2){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0x468d4d=_0x1b295b['closest'](_0x290ead(0x120)),_0x18eda2=_0x468d4d[_0x290ead(0x138)][_0x290ead(0x166)],_0x3014a9=TOKENS[_0x18eda2];if(!_0x3014a9){console[_0x290ead(0x130)]('Token\x20'+_0x18eda2+'\x20not\x20found');return;}console[_0x290ead(0x1a6)]('Token\x20clicked:\x20'+_0x3014a9['name']+'\x20('+_0x18eda2+')');if(_0x1b295b['disabled']){showMessage('You\x20need\x20'+_0x3014a9[_0x290ead(0x13a)]+'\x20points\x20to\x20purchase\x20this\x20token',_0x290ead(0x130));return;}if(_0x1b295b['textContent']==='Owned'){showMessage('You\x20already\x20own\x20the\x20'+_0x3014a9['name']+_0x290ead(0x189),'info');return;}if(_0x1b295b['textContent']['includes']('Purchase')||_0x1b295b['textContent']['includes'](_0x290ead(0x1a8))){const _0x4dbce5=window[_0x290ead(0x156)]('Purchase\x20'+_0x3014a9[_0x290ead(0x143)]+'\x20token\x20for\x20'+_0x3014a9[_0x290ead(0x13a)]+'\x20points?');if(!_0x4dbce5)return;const _0x3cb915=await purchaseToken(_0x18eda2);_0x3cb915&&updateTokenButtons();return;}});}),_0x201e2e['forEach'](_0x376e06=>{const _0x44538b=_0x2bea67;_0x376e06['addEventListener'](_0x44538b(0x16d),async _0x474d68=>{const _0x2092c0=_0x44538b;_0x474d68[_0x2092c0(0x148)]();const _0x460e39=_0x376e06['closest'](_0x2092c0(0x120)),_0x2f5b34=_0x460e39[_0x2092c0(0x138)]['token'],_0x3c6a0f=TOKENS[_0x2f5b34];if(_0x376e06['textContent']===_0x2092c0(0x12c)){const _0x23e7b6=window['confirm']('Unequip\x20'+_0x3c6a0f['name']+'?');if(!_0x23e7b6)return;const _0x3b6188=await unequipToken();_0x3b6188&&updateTokenButtons();}else{const _0x24ebf7=window['confirm']('Equip\x20'+_0x3c6a0f['name']+'?\x20This\x20will\x20unequip\x20your\x20current\x20token.');if(!_0x24ebf7)return;const _0x397960=await equipToken(_0x2f5b34);_0x397960&&updateTokenButtons();}});}),_0x49ee90['forEach'](_0x137f67=>{const _0x372655=_0x2bea67;_0x137f67[_0x372655(0x16c)]('click',async _0x42aab2=>{const _0x337fc8=_0x372655;_0x42aab2['preventDefault']();const _0x143d03=_0x137f67['closest']('[data-token]'),_0x202ceb=_0x143d03[_0x337fc8(0x138)]['token'],_0x1b36eb=TOKENS[_0x202ceb],_0x699693=Math['floor'](_0x1b36eb['price']*0.5),_0x54e757=window[_0x337fc8(0x156)]('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x1b36eb[_0x337fc8(0x143)]+'\x20for\x20'+_0x699693+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x54e757)return;const _0x1b823d=await sellToken(_0x202ceb);_0x1b823d&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x34f588=a46_0x136f52,_0x2dc279=window[_0x34f588(0x158)]?window['ThemeSystem']['getCurrentTheme']():_0x34f588(0x17f),_0x255d1e=auth[_0x34f588(0x140)];document['querySelectorAll'](_0x34f588(0x147))['forEach'](_0x4b6962=>{const _0x258bcc=_0x34f588,_0x5ad9c3=_0x4b6962['closest']('[data-theme]'),_0x267d4f=_0x5ad9c3['dataset']['theme'],_0x231c64=THEMES[_0x267d4f];if(!_0x231c64)return;_0x4b6962['disabled']=![],_0x4b6962[_0x258bcc(0x170)]['opacity']='',_0x4b6962[_0x258bcc(0x170)]['cursor']='pointer',_0x4b6962['classList'][_0x258bcc(0x193)]('current-theme',_0x258bcc(0x167),'can-afford','cannot-afford','sign-in-free','sign-in-paid');if(!_0x255d1e){_0x231c64['price']===0x0?(_0x4b6962['textContent']='Sign\x20in\x20to\x20Apply',_0x4b6962[_0x258bcc(0x133)]['add']('sign-in-free')):(_0x4b6962[_0x258bcc(0x18a)]=_0x258bcc(0x194),_0x4b6962[_0x258bcc(0x153)]=!![],_0x4b6962['style']['opacity']='0.7',_0x4b6962[_0x258bcc(0x133)]['add']('sign-in-paid'));return;}if(_0x267d4f===_0x2dc279){_0x4b6962['textContent']='Current\x20Theme',_0x4b6962['classList']['add']('current-theme'),_0x4b6962[_0x258bcc(0x153)]=!![],_0x4b6962['style'][_0x258bcc(0x169)]=_0x258bcc(0x17f);return;}if(userOwnsTheme(_0x267d4f)){_0x4b6962['textContent']='Apply\x20Theme',_0x4b6962['classList'][_0x258bcc(0x134)]('apply-theme');return;}if(userData['points']>=_0x231c64['price']){_0x4b6962['textContent']='Buy\x20for\x20'+_0x231c64['price']+_0x258bcc(0x173),_0x4b6962['classList'][_0x258bcc(0x134)](_0x258bcc(0x150));return;}_0x4b6962['textContent']=_0x258bcc(0x126)+_0x231c64['price']+'\x20Points',_0x4b6962['classList']['add'](_0x258bcc(0x129)),_0x4b6962['style'][_0x258bcc(0x198)]='0.5',_0x4b6962['disabled']=!![],_0x4b6962[_0x258bcc(0x170)][_0x258bcc(0x169)]='not-allowed';});}function updateTokenButtons(){const _0x3bf047=a46_0x136f52,_0x8ddf0b=auth['currentUser'];document['querySelectorAll']('.token-select-btn')[_0x3bf047(0x16f)](_0x2dd984=>{const _0x28c697=_0x3bf047,_0x5a423c=_0x2dd984['closest']('[data-token]'),_0x5cf718=_0x5a423c['dataset'][_0x28c697(0x166)],_0x49aa81=TOKENS[_0x5cf718],_0xf47c95=_0x5a423c['querySelector']('.token-equip-btn'),_0x1dacee=_0x5a423c[_0x28c697(0x179)](_0x28c697(0x144));if(!_0x49aa81)return;_0x2dd984['disabled']=![],_0x2dd984['style']['opacity']='',_0x2dd984['style'][_0x28c697(0x169)]=_0x28c697(0x11f);_0xf47c95&&(_0xf47c95['style']['display']='none',_0xf47c95['disabled']=![],_0xf47c95['style']['opacity']='',_0xf47c95['classList'][_0x28c697(0x193)]('equipped',_0x28c697(0x1a3)));_0x1dacee&&(_0x1dacee[_0x28c697(0x170)]['display']=_0x28c697(0x139));_0x2dd984['classList']['remove']('owned','can-afford','cannot-afford','sign-in');if(!_0x8ddf0b){_0x2dd984['textContent']='Sign\x20in\x20to\x20Purchase',_0x2dd984[_0x28c697(0x153)]=!![],_0x2dd984[_0x28c697(0x170)][_0x28c697(0x198)]='0.7',_0x2dd984['classList']['add']('sign-in');return;}if(userOwnsToken(_0x5cf718)){_0x2dd984[_0x28c697(0x18a)]='Owned',_0x2dd984['classList'][_0x28c697(0x134)]('owned'),_0x2dd984[_0x28c697(0x153)]=!![],_0x2dd984['style']['cursor']='default',_0x2dd984['style'][_0x28c697(0x137)]=_0x28c697(0x19c);_0xf47c95&&(_0xf47c95['style']['display']=_0x28c697(0x152),userHasTokenEquipped(_0x5cf718)?(_0xf47c95['textContent']='Equipped',_0xf47c95[_0x28c697(0x133)]['add']('equipped'),_0xf47c95[_0x28c697(0x170)]['background']='var(--accent-color,\x20#2196F3)',_0xf47c95[_0x28c697(0x170)]['cursor']=_0x28c697(0x11f)):(_0xf47c95[_0x28c697(0x18a)]='Equip',_0xf47c95['classList']['add']('can-equip'),_0xf47c95[_0x28c697(0x170)]['background']='var(--info-color,\x20#17a2b8)',_0xf47c95[_0x28c697(0x170)]['cursor']='pointer'));_0x1dacee&&userData['isAdmin']&&(_0x1dacee[_0x28c697(0x170)]['display']=_0x28c697(0x152));return;}if(userData['points']>=_0x49aa81['price']){_0x2dd984['textContent']='Buy\x20for\x20'+_0x49aa81['price']+'\x20Points',_0x2dd984['classList'][_0x28c697(0x134)]('can-afford'),_0x2dd984['style']['background']='';return;}_0x2dd984['textContent']='Need\x20'+_0x49aa81[_0x28c697(0x13a)]+_0x28c697(0x173),_0x2dd984['classList']['add'](_0x28c697(0x129)),_0x2dd984[_0x28c697(0x170)][_0x28c697(0x198)]='0.5',_0x2dd984['disabled']=!![],_0x2dd984['style']['cursor']='not-allowed',_0x2dd984['style']['background']=_0x28c697(0x13e);});}function showMessage(_0x36a906,_0x26296b='info'){const _0x47f6f9=a46_0x136f52,_0xf50525=document[_0x47f6f9(0x124)](_0x47f6f9(0x14f));_0xf50525&&_0xf50525['remove']();const _0x5c5447=document['createElement']('div');_0x5c5447['id']='store-message',_0x5c5447[_0x47f6f9(0x197)]='store-message\x20store-message-'+_0x26296b,_0x5c5447['textContent']=_0x36a906,document[_0x47f6f9(0x16a)][_0x47f6f9(0x181)](_0x5c5447),requestAnimationFrame(()=>{const _0x353e66=_0x47f6f9;_0x5c5447[_0x353e66(0x133)]['add']('visible');}),setTimeout(()=>{const _0x6e0665=_0x47f6f9;_0x5c5447['classList']['remove'](_0x6e0665(0x151)),setTimeout(()=>{_0x5c5447['parentNode']&&_0x5c5447['remove']();},0x12c);},0xfa0);}window[a46_0x136f52(0x14d)]={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log']('🏪\x20Redeem\x20store\x20loaded');