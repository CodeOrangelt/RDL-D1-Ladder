const a4_0x1d2ca2=a4_0x4320,a4_0x1e98dc=(function(){let _0x4948d7=!![];return function(_0x926cfc,_0x1756fe){const _0x4a9b84=_0x4948d7?function(){if(_0x1756fe){const _0x9d7dde=_0x1756fe['apply'](_0x926cfc,arguments);return _0x1756fe=null,_0x9d7dde;}}:function(){};return _0x4948d7=![],_0x4a9b84;};}()),a4_0x5d4f62=a4_0x1e98dc(this,function(){const _0x102fb5=a4_0x4320;let _0x543fd0;try{const _0x545635=Function(_0x102fb5(0x237)+_0x102fb5(0x25f)+');');_0x543fd0=_0x545635();}catch(_0x1f57cd){_0x543fd0=window;}const _0x3cf121=_0x543fd0['console']=_0x543fd0['console']||{},_0x5dbc37=[_0x102fb5(0x28e),'warn',_0x102fb5(0x1f9),_0x102fb5(0x28f),'exception','table','trace'];for(let _0x998013=0x0;_0x998013<_0x5dbc37['length'];_0x998013++){const _0x452e98=a4_0x1e98dc['constructor'][_0x102fb5(0x213)][_0x102fb5(0x20b)](a4_0x1e98dc),_0x2b0f14=_0x5dbc37[_0x998013],_0x2a4589=_0x3cf121[_0x2b0f14]||_0x452e98;_0x452e98[_0x102fb5(0x291)]=a4_0x1e98dc[_0x102fb5(0x20b)](a4_0x1e98dc),_0x452e98['toString']=_0x2a4589[_0x102fb5(0x245)]['bind'](_0x2a4589),_0x3cf121[_0x2b0f14]=_0x452e98;}});a4_0x5d4f62();function a4_0x55ee(){const _0x4986d1=['now','closeAddCommentPopup','max','block','.matches-loading','Unknown\x20Map','Anonymous\x20User','length','start','<div\x20class=\x22matches-loading\x22\x20style=\x22color:\x20red;\x22>Error\x20loading\x20matches:\x20','disabled','displayName','#50C878','isLoading','flex','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment\x20or\x20add\x20a\x20demo','userProfiles','Error\x20fetching\x20comments:','gold','.player.winner\x20.player-suicides','You\x20need\x20to\x20be\x20signed\x20in\x20to\x20report\x20comments','demoLink','.option-content','S:\x20','dataset','querySelector','Clearing\x20cache\x20for\x20refresh/reset','Unable\x20to\x20submit\x20-\x20system\x20not\x20ready','preview-d2-button','commentText','loserDemoLink','Firebase\x20not\x20initialized','enhanced-filter-section','<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20current\x20filters.</div>','winnerScore','required','current','.player.winner\x20.player-score','<p>','username','toLowerCase','stringify','removeItem','filterUsername','Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.','levels','loserComment','Muted.','info','input','filter-pilots','submit','Preview\x20UI\x20or\x20Filter\x20elements\x20not\x20found,\x20cannot\x20attach\x20listeners.','commentMatchId','cursor','push','toggle','\x27s\x20Demo','onclick','description','Comment\x20deleted\x20successfully','content','pilots','Please\x20enter\x20a\x20demo\x20link','<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found','Unknown\x20User','bind','clear-enhanced-filters','includes','userId','recent-matches-preview','comment-popup','warn','demoWordCount','prototype','commentAddOverlay','commentAddPopup','Error\x20reporting\x20comment:','button','winnerUsername','innerHTML','exists','body','...','Page\x20','trim','Thank\x20you.\x20The\x20comment\x20has\x20been\x20reported\x20and\x20will\x20be\x20reviewed.','parentNode','10px','all','enhancedFilters','filter-subgames','timestamp','.player.winner\x20.player-name','\x22\x20target=\x22_blank\x22\x20class=\x22play-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20d=\x22M8,5.14V19.14L19,12.14L8,5.14Z\x22\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-author\x22>Demo\x20from\x20','previewPrevPage','split','color','aria-label','lastVisible','display','add','classList','removeChild','#ff4444','#d32f2f','bronze','none','.no-comments-message','loserOldElo','return\x20(function()\x20','showAddCommentPopup','map','preview-d1-button','querySelectorAll','text','<button\x20class=\x22delete-comment-btn\x22\x20aria-label=\x22Delete\x20comment\x22>Ã—</button>','seconds','docs','comment','cloneNode','commentUser','getTime','subgames','toString','#808080','message','popup-actions','silver','addEventListener','Please\x20enter\x20a\x20comment\x20before\x20submitting','firstVisible','option','currentUser','\x20matching\x20filters','filter','appendChild','selectedOptions','.community-comments-section','currentMode','empty','ratting','Winner','uid','altered-powerups','Submit','floor','winnerOldElo','removeAttribute','selected','{}.constructor(\x22return\x20this\x22)(\x20)','No\x20results\x20found\x20for\x20this\x20page','commentPopupTitlePreview','Demo\x20descriptions\x20are\x20limited\x20to\x2020\x20words\x20maximum.\x20Please\x20shorten\x20your\x20description.','loserUsername','style','</div>','currentPage','opacity','applyFilterBtn','.match-card','click','abs','next','preview-d3-button','forEach','value','.popup-actions','winnerComment','blind-match','Daz','keys','.match-demo-links','Error\x20fetching\x20comments\x20batch:','\x20from\x20cache','remove','createElement','getElementById','getItem','title','textContent','demo','data','insertBefore','matchesPerPage','previewNextPage','Cached\x20intermediary\x20page\x20','closest','Unknown','wordCount','Failed\x20to\x20report\x20comment:\x20','loserScore','active','addCommentForm','auth','firstChild','default','log','error','missiles-6plus','__proto__','Demo\x20link','.match-date','approvedMatchesD3','You\x20must\x20be\x20signed\x20in\x20to\x20leave\x20a\x20comment','slice'];a4_0x55ee=function(){return _0x4986d1;};return a4_0x55ee();}import{collection,getDocs,addDoc,query,orderBy,limit,startAfter,Timestamp,serverTimestamp,getDoc,doc,where,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const mutedUsers=[{'username':a4_0x1d2ca2(0x273),'muteFromDate':new Date('2025-07-02')[a4_0x1d2ca2(0x243)]()}];function isUsernameMuted(_0x3d2713,_0x42abd1){const _0x2ea448=a4_0x1d2ca2;if(!_0x3d2713)return![];const _0x343668=mutedUsers['find'](_0x6062bd=>_0x6062bd['username']===_0x3d2713);if(!_0x343668)return![];if(!_0x42abd1)return!![];const _0x2d10c5=_0x42abd1 instanceof Date?_0x42abd1['getTime']():_0x42abd1['seconds']?_0x42abd1['seconds']*0x3e8:Date[_0x2ea448(0x1c9)]();return _0x2d10c5>=_0x343668['muteFromDate'];}function filterComment(_0x549d57,_0x15558d,_0x4bcd82){const _0xf04a68=a4_0x1d2ca2;if(!_0x549d57)return'-';if(isUsernameMuted(_0x15558d,_0x4bcd82))return _0xf04a68(0x1f8);return _0x549d57;}const previewState={'currentMode':'D1','currentPage':0x1,'matchesPerPage':0x5,'lastVisible':null,'firstVisible':null,'isLoading':![],'filterUsername':'','enhancedFilters':{'pilots':'','levels':'','subgames':[]},'totalPages':0x1,'hasReachedEnd':![]};function getCacheKey(_0x1cbd75,_0x4a310b,_0x390290){const _0x37c096='u:'+(_0x390290['filterUsername']||'');return'previewCache_'+_0x1cbd75+'_p'+_0x4a310b+'_'+_0x37c096;}function getCachedPage(_0x22254a){const _0x5d1bf9=a4_0x1d2ca2,_0x5972b7=sessionStorage[_0x5d1bf9(0x27b)](_0x22254a);if(_0x5972b7)try{return JSON['parse'](_0x5972b7);}catch(_0x34eeb6){return console['error']('Failed\x20to\x20parse\x20cache:',_0x34eeb6),sessionStorage[_0x5d1bf9(0x1f3)](_0x22254a),null;}return null;}function cachePage(_0x31fc9e,_0x36d404){const _0x54a2e9=a4_0x1d2ca2;try{sessionStorage['setItem'](_0x31fc9e,JSON[_0x54a2e9(0x1f2)](_0x36d404));}catch(_0x1ad010){console[_0x54a2e9(0x28f)]('Failed\x20to\x20cache\x20data:',_0x1ad010);}}function getEloColor(_0x8d5df6){const _0x2cbf2b=a4_0x1d2ca2,_0x27b9a1=Number(_0x8d5df6);if(_0x27b9a1>=0x7d0)return _0x2cbf2b(0x1d5);else{if(_0x27b9a1>=0x708)return'#FFD700';else{if(_0x27b9a1>=0x640)return'#b9f1fc';else{if(_0x27b9a1>=0x578)return'#CD7F32';else return _0x2cbf2b(0x246);}}}}function formatDate(_0x3d49d3,_0x2c8239=![]){if(!_0x3d49d3||!_0x3d49d3['seconds'])return'N/A';const _0x1c00ac=new Date(_0x3d49d3['seconds']*0x3e8);return _0x2c8239?_0x1c00ac['toLocaleString']():_0x1c00ac['toLocaleDateString']();}function truncateComment(_0x930630,_0x107aa9=0x1e){const _0x5029e6=a4_0x1d2ca2;if(!_0x930630)return'-';if(_0x930630['length']<=_0x107aa9)return _0x930630;return _0x930630['substring'](0x0,_0x107aa9)+_0x5029e6(0x21c);}function formatCommentDate(_0x404fdc){const _0x23b70a=a4_0x1d2ca2;if(!_0x404fdc||!_0x404fdc['seconds'])return'';const _0x9accbe=new Date(_0x404fdc['seconds']*0x3e8),_0x2a913f=new Date(),_0x266940=Math[_0x23b70a(0x26b)](_0x2a913f-_0x9accbe),_0x3ecef7=Math[_0x23b70a(0x25b)](_0x266940/(0x3e8*0x3c*0x3c*0x18));if(_0x3ecef7===0x0)return'Today';else{if(_0x3ecef7===0x1)return'Yesterday';else return _0x3ecef7<0x7?_0x3ecef7+'\x20days\x20ago':_0x9accbe['toLocaleDateString']();}}function setLoadingIndicator(_0x3b3a8c){const _0x10d861=a4_0x1d2ca2,_0x320fc8=document[_0x10d861(0x27a)]('loading-indicator');if(_0x320fc8)_0x320fc8[_0x10d861(0x264)][_0x10d861(0x22d)]=_0x3b3a8c?'block':'none';}export function updatePreviewLadderModeUI(){const _0x142382=a4_0x1d2ca2,_0x1883af=document['getElementById']('preview-ladder-mode'),_0x435724=document['getElementById']('preview-d1-button'),_0x3510df=document[_0x142382(0x27a)](_0x142382(0x1e5)),_0x3ebada=document[_0x142382(0x27a)](_0x142382(0x26d));if(_0x1883af)_0x1883af[_0x142382(0x27d)]=previewState['currentMode'];if(_0x435724)_0x435724['classList'][_0x142382(0x201)](_0x142382(0x289),previewState['currentMode']==='D1');if(_0x3510df)_0x3510df['classList'][_0x142382(0x201)](_0x142382(0x289),previewState[_0x142382(0x254)]==='D2');if(_0x3ebada)_0x3ebada['classList']['toggle'](_0x142382(0x289),previewState['currentMode']==='D3');}function a4_0x4320(_0x4bb8dd,_0x1c725c){const _0x5d4f62=a4_0x55ee();return a4_0x4320=function(_0x1e98dc,_0x1a826b){_0x1e98dc=_0x1e98dc-0x1c9;let _0x55eefd=_0x5d4f62[_0x1e98dc];return _0x55eefd;},a4_0x4320(_0x4bb8dd,_0x1c725c);}function updatePreviewPaginationControls(_0x578439){const _0x2ad1f9=a4_0x1d2ca2,_0x304e05=document['getElementById'](_0x2ad1f9(0x228)),_0x4b4ac1=document[_0x2ad1f9(0x27a)](_0x2ad1f9(0x282)),_0x941bb1=document['getElementById']('previewPageInfo');if(!_0x304e05||!_0x4b4ac1||!_0x941bb1)return;_0x941bb1[_0x2ad1f9(0x27d)]=_0x2ad1f9(0x21d)+previewState['currentPage'],_0x304e05['disabled']=previewState['currentPage']<=0x1,_0x4b4ac1['disabled']=!_0x578439;}function setPreviewLoadingState(_0x3c544e){const _0x27ccfa=a4_0x1d2ca2;previewState['isLoading']=_0x3c544e,setLoadingIndicator(_0x3c544e);const _0x404a73=document['getElementById']('recent-matches-preview'),_0x1a3dfd=_0x404a73?_0x404a73[_0x27ccfa(0x1e2)](_0x27ccfa(0x1cd)):null,_0xde60b4=document[_0x27ccfa(0x27a)]('previewPrevPage'),_0x33ec64=document['getElementById']('previewNextPage'),_0x4ad791=document[_0x27ccfa(0x27a)](_0x27ccfa(0x23a)),_0x22b606=document['getElementById']('preview-d2-button'),_0x3e4cd2=document['getElementById'](_0x27ccfa(0x268)),_0x1956f3=document['getElementById']('clearFilterBtn');if(_0x1a3dfd&&!_0x3c544e)_0x1a3dfd[_0x27ccfa(0x264)]['display']=_0x27ccfa(0x234);else _0x1a3dfd&&_0x3c544e&&(_0x1a3dfd['style'][_0x27ccfa(0x22d)]=_0x27ccfa(0x1cc));!_0x3c544e&&_0x404a73&&!_0x404a73['querySelector'](_0x27ccfa(0x269))&&!_0x404a73['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x404a73[_0x27ccfa(0x219)]='<div\x20class=\x22matches-loading\x22>No\x20recent\x20matches\x20found'+(previewState[_0x27ccfa(0x1f4)]?_0x27ccfa(0x24f):'')+'.</div>');if(_0xde60b4)_0xde60b4['disabled']=_0x3c544e||previewState['currentPage']<=0x1;if(_0x33ec64)_0x33ec64[_0x27ccfa(0x1d3)]=_0x3c544e;if(_0x4ad791)_0x4ad791['disabled']=_0x3c544e;if(_0x22b606)_0x22b606['disabled']=_0x3c544e;if(_0x3e4cd2)_0x3e4cd2['disabled']=_0x3c544e;if(_0x1956f3)_0x1956f3[_0x27ccfa(0x1d3)]=_0x3c544e;}function applyClientFilters(_0x486908){const _0x4520bd=a4_0x1d2ca2;if(!previewState[_0x4520bd(0x1f4)])return _0x486908;const _0x5cebb8=previewState['filterUsername']['toLowerCase']();return _0x486908[_0x4520bd(0x250)](_0x2a5cc8=>{const _0x12cdb8=(_0x2a5cc8['winnerUsername']||'')['toLowerCase'](),_0x178798=(_0x2a5cc8['loserUsername']||'')['toLowerCase']();return _0x12cdb8['includes'](_0x5cebb8)||_0x178798['includes'](_0x5cebb8);});}function applyEnhancedClientFilters(_0x4277d6){if(!hasEnhancedFilters())return _0x4277d6;return _0x4277d6['filter'](_0x2f4449=>{const _0x1135d5=a4_0x4320;if(previewState['enhancedFilters'][_0x1135d5(0x207)]){const _0x3e020f=previewState['enhancedFilters'][_0x1135d5(0x207)][_0x1135d5(0x1f1)](),_0x11bfa2=(_0x2f4449['winnerUsername']||'')['toLowerCase'](),_0x212003=(_0x2f4449['loserUsername']||'')[_0x1135d5(0x1f1)]();if(!_0x11bfa2['includes'](_0x3e020f)&&!_0x212003['includes'](_0x3e020f))return![];}if(previewState['enhancedFilters']['levels']){const _0x21553a=previewState['enhancedFilters']['levels']['toLowerCase'](),_0x131c0f=(_0x2f4449['mapPlayed']||'')['toLowerCase']();if(!_0x131c0f[_0x1135d5(0x20d)](_0x21553a))return![];}if(previewState[_0x1135d5(0x223)]['subgames']['length']>0x0){const _0x4ed3dd=_0x2f4449['subgameType']||'Standard\x20Match';if(!previewState['enhancedFilters'][_0x1135d5(0x244)][_0x1135d5(0x20d)](_0x4ed3dd))return![];}return!![];});}function hasEnhancedFilters(){const _0x47d49e=a4_0x1d2ca2;return previewState[_0x47d49e(0x223)][_0x47d49e(0x207)]||previewState['enhancedFilters'][_0x47d49e(0x1f6)]||previewState[_0x47d49e(0x223)][_0x47d49e(0x244)][_0x47d49e(0x1d0)]>0x0;}function clearEnhancedFilters(){const _0x24cdff=a4_0x1d2ca2;previewState[_0x24cdff(0x223)]={'pilots':'','levels':'','subgames':[]},document[_0x24cdff(0x27a)]('filter-pilots')['value']='',document['getElementById']('filter-levels')['value']='';const _0x3d1c54=document['getElementById']('filter-subgames');for(let _0x268c23 of _0x3d1c54['options']){_0x268c23[_0x24cdff(0x25e)]=![];}}function jumpToPage(_0x502e69){const _0x524ff5=a4_0x1d2ca2,_0x43ed12=document['getElementById']('jump-to-page'),_0x440851=previewState['currentPage'];let _0x1025ec=_0x440851;switch(_0x502e69){case _0x524ff5(0x1d1):_0x1025ec=0x1;break;case'end':_0x1025ec=Math['max'](_0x440851+0xa,previewState['totalPages']||_0x440851+0xa);break;case'+1':_0x1025ec=_0x440851+0x1;break;case'+5':_0x1025ec=_0x440851+0x5;break;case'+10':_0x1025ec=_0x440851+0xa;break;case'-1':_0x1025ec=Math[_0x524ff5(0x1cb)](0x1,_0x440851-0x1);break;case'-5':_0x1025ec=Math[_0x524ff5(0x1cb)](0x1,_0x440851-0x5);break;case'-10':_0x1025ec=Math[_0x524ff5(0x1cb)](0x1,_0x440851-0xa);break;case _0x524ff5(0x1fa):const _0x442e52=parseInt(_0x43ed12['value']);_0x442e52&&_0x442e52>0x0&&(_0x1025ec=_0x442e52,_0x43ed12['value']='');break;}_0x1025ec!==_0x440851&&_0x1025ec>0x0&&(previewState['currentPage']=_0x1025ec,loadRecentMatchesPreview('jump'));}export async function loadRecentMatchesPreview(_0x535322='current'){const _0x2fb5f8=a4_0x1d2ca2,_0x3928f1=document['getElementById']('recent-matches-preview'),_0x2db79=document['getElementById']('match-card-template');if(previewState['isLoading']||!_0x3928f1||!_0x2db79)return;_0x535322===_0x2fb5f8(0x1ed)&&(console['log'](_0x2fb5f8(0x1e3)),Object[_0x2fb5f8(0x274)](sessionStorage)['forEach'](_0x4e4171=>{const _0x4f1579=_0x2fb5f8;_0x4e4171[_0x4f1579(0x20d)]('previewCache_'+previewState[_0x4f1579(0x254)])&&sessionStorage['removeItem'](_0x4e4171);}));let _0xd09b4d=previewState[_0x2fb5f8(0x266)];if(_0x535322==='next')_0xd09b4d++;else{if(_0x535322==='prev')_0xd09b4d--;else _0x535322==='current'&&(_0xd09b4d=0x1,previewState[_0x2fb5f8(0x24c)]=null,previewState['lastVisible']=null);}if(_0xd09b4d<0x1)_0xd09b4d=0x1;const _0x405065=previewState['currentPage'];previewState['currentPage']=_0xd09b4d,updatePreviewPaginationControls(!![]);const _0x237177={'filterUsername':previewState['filterUsername']},_0x20883e=getCacheKey(previewState['currentMode'],_0xd09b4d,_0x237177),_0x2769ce=_0x535322!=='current'?getCachedPage(_0x20883e):null;if(_0x2769ce){console[_0x2fb5f8(0x28e)]('Rendering\x20page\x20'+_0xd09b4d+_0x2fb5f8(0x277)),setPreviewLoadingState(!![]),renderMatchCards(_0x2769ce['docsData']),updatePreviewPaginationControls(_0x2769ce['hasNextPage']),setPreviewLoadingState(![]);return;}console[_0x2fb5f8(0x28e)]('Cache\x20miss\x20for\x20page\x20'+_0xd09b4d+',\x20fetching\x20from\x20Firestore'),setPreviewLoadingState(!![]),_0x3928f1['innerHTML']='<div\x20class=\x22matches-loading\x22>Loading\x20recent\x20matches...</div>';const _0x43c6a8=previewState['currentMode']==='D1'?'approvedMatches':previewState['currentMode']==='D2'?'approvedMatchesD2':_0x2fb5f8(0x294),_0x4c7f36=previewState[_0x2fb5f8(0x254)]==='D1'?'createdAt':'approvedAt';try{const _0x537df1=collection(window['db'],_0x43c6a8);let _0x98795a=[orderBy(_0x4c7f36,'desc')];if(_0xd09b4d===0x1)console[_0x2fb5f8(0x28e)]('Loading\x20first\x20page\x20from\x20Firestore'),_0x98795a['push'](limit(previewState[_0x2fb5f8(0x281)]));else{if(_0x535322==='next'&&previewState['lastVisible'])console['log']('Loading\x20next\x20page\x20using\x20cursor'),_0x98795a[_0x2fb5f8(0x200)](startAfter(previewState[_0x2fb5f8(0x22c)])),_0x98795a[_0x2fb5f8(0x200)](limit(previewState['matchesPerPage']));else{console[_0x2fb5f8(0x28e)]('No\x20valid\x20cursor,\x20fetching\x20from\x20beginning\x20and\x20skipping\x20pages');const _0x7e4d80=_0xd09b4d*previewState['matchesPerPage'];_0x98795a[_0x2fb5f8(0x200)](limit(_0x7e4d80));}}const _0x4ba1aa=query(_0x537df1,..._0x98795a),_0x5a71d1=await getDocs(_0x4ba1aa);let _0x5f47d9=_0x5a71d1[_0x2fb5f8(0x23f)];if(_0xd09b4d>0x1&&_0x535322!==_0x2fb5f8(0x26c)){const _0x506b94=(_0xd09b4d-0x1)*previewState['matchesPerPage'];_0x5f47d9=_0x5f47d9[_0x2fb5f8(0x296)](_0x506b94,_0x506b94+previewState['matchesPerPage']);}if(_0x5f47d9[_0x2fb5f8(0x1d0)]===0x0){console['log'](_0x2fb5f8(0x260));_0x535322==='next'&&(previewState['currentPage']=_0x405065,updatePreviewPaginationControls(![]));_0x3928f1['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20more\x20matches\x20to\x20display'+(previewState[_0x2fb5f8(0x1f4)]?'\x20matching\x20filters':'')+'.</div>',setPreviewLoadingState(![]);return;}previewState['firstVisible']=_0x5f47d9[0x0],previewState['lastVisible']=_0x5f47d9[_0x5f47d9[_0x2fb5f8(0x1d0)]-0x1];const _0xf3f85=_0x5f47d9['map'](_0xd7a14f=>({'id':_0xd7a14f['id'],..._0xd7a14f['data']()}));let _0x5be886=![];if(_0x5f47d9[_0x2fb5f8(0x1d0)]===previewState[_0x2fb5f8(0x281)]){const _0x458e5f=query(_0x537df1,orderBy(_0x4c7f36,'desc'),startAfter(previewState['lastVisible']),limit(0x1)),_0x47170c=await getDocs(_0x458e5f);_0x5be886=!_0x47170c['empty'];}const _0x1c06b7=applyClientFilters(_0xf3f85),_0x7f2793={'docsData':_0xf3f85,'hasNextPage':_0x5be886};cachePage(getCacheKey(previewState['currentMode'],previewState['currentPage'],_0x237177),_0x7f2793);if(_0xd09b4d>0x1&&_0x535322!=='next')for(let _0x13fed5=0x1;_0x13fed5<_0xd09b4d;_0x13fed5++){const _0x335c5d=(_0x13fed5-0x1)*previewState[_0x2fb5f8(0x281)],_0x343769=_0x335c5d+previewState[_0x2fb5f8(0x281)],_0x12e388=_0x5a71d1['docs'][_0x2fb5f8(0x296)](_0x335c5d,_0x343769);if(_0x12e388['length']>0x0){const _0x36f3a4=_0x12e388['map'](_0x3c0ff4=>({'id':_0x3c0ff4['id'],..._0x3c0ff4[_0x2fb5f8(0x27f)]()})),_0x5ca3af=!![];cachePage(getCacheKey(previewState['currentMode'],_0x13fed5,_0x237177),{'docsData':_0x36f3a4,'hasNextPage':_0x5ca3af}),console[_0x2fb5f8(0x28e)](_0x2fb5f8(0x283)+_0x13fed5);}}_0x1c06b7['length']===0x0&&previewState['filterUsername']?_0x3928f1['innerHTML']='<div\x20class=\x22matches-loading\x22>No\x20matches\x20found\x20matching\x20filter:\x20\x22'+previewState[_0x2fb5f8(0x1f4)]+'\x22</div>':renderMatchCards(_0x1c06b7),updatePreviewPaginationControls(_0x5be886);}catch(_0x5eba34){console['error']('Error\x20fetching\x20'+previewState[_0x2fb5f8(0x254)]+'\x20matches:',_0x5eba34),_0x3928f1[_0x2fb5f8(0x219)]=_0x2fb5f8(0x1d2)+_0x5eba34[_0x2fb5f8(0x247)]+_0x2fb5f8(0x265),updatePreviewPaginationControls(![]),previewState[_0x2fb5f8(0x266)]=_0x405065;}finally{setPreviewLoadingState(![]);}}async function renderMatchCards(_0x5f270d){const _0xfd6a72=a4_0x1d2ca2,_0x32b9a0=document[_0xfd6a72(0x27a)](_0xfd6a72(0x20f)),_0x3f96f8=document['getElementById']('match-card-template');if(!_0x32b9a0||!_0x3f96f8)return;!_0x32b9a0[_0xfd6a72(0x1e2)]('.matches-loading[style*=\x22color:\x20red\x22]')&&(_0x32b9a0['innerHTML']='');if(!_0x5f270d||_0x5f270d['length']===0x0){if(!_0x32b9a0['querySelector']('.matches-loading[style*=\x22color:\x20red\x22]')){const _0x1f0379=hasEnhancedFilters()?'\x20matching\x20filters':previewState['filterUsername']?_0xfd6a72(0x24f):'';_0x32b9a0[_0xfd6a72(0x219)]=_0xfd6a72(0x209)+_0x1f0379+'.</div>';}return;}const _0x433f31=applyEnhancedClientFilters(_0x5f270d);if(_0x433f31['length']===0x0){_0x32b9a0[_0xfd6a72(0x219)]=_0xfd6a72(0x1ea);return;}const _0x5057f1=_0x433f31[_0xfd6a72(0x239)](_0x222ada=>getAllCommentsForMatch(_0x222ada['id']));let _0x28b3f0=[];try{_0x28b3f0=await Promise[_0xfd6a72(0x222)](_0x5057f1);}catch(_0x560b80){console['error'](_0xfd6a72(0x276),_0x560b80),_0x28b3f0=_0x433f31[_0xfd6a72(0x239)](()=>[]);}const _0x1fe2c4={};_0x28b3f0['forEach']((_0x50b2c7,_0x2991ad)=>{_0x1fe2c4[_0x433f31[_0x2991ad]['id']]=_0x50b2c7||[];}),_0x433f31[_0xfd6a72(0x26e)](_0x10d555=>{const _0x3dc2d3=_0xfd6a72,_0x47dbaf=_0x3f96f8[_0x3dc2d3(0x206)][_0x3dc2d3(0x241)](!![]),_0x141ad0=_0x47dbaf['querySelector']('.match-display-wrapper'),_0x4e6684=_0x47dbaf['querySelector']('.match-card'),_0x13d9d4=getEloRankClass(_0x10d555['winnerOldElo']);_0x4e6684['classList']['add']('winner-'+_0x13d9d4),_0x4e6684['querySelector']('.match-map')['textContent']=_0x10d555['mapPlayed']||_0x3dc2d3(0x1ce),_0x4e6684['querySelector'](_0x3dc2d3(0x293))['textContent']=formatDate(_0x10d555['approvedAt']||_0x10d555['createdAt']);const _0x32ca70=_0x4e6684['querySelector'](_0x3dc2d3(0x226));_0x32ca70['textContent']=_0x10d555[_0x3dc2d3(0x218)]||_0x3dc2d3(0x285),_0x32ca70['style']['color']=getEloColor(_0x10d555[_0x3dc2d3(0x25c)]),_0x4e6684['querySelector'](_0x3dc2d3(0x1ee))[_0x3dc2d3(0x27d)]=_0x10d555[_0x3dc2d3(0x1eb)]??0x0;const _0x34a353=_0x4e6684['querySelector'](_0x3dc2d3(0x1dc)),_0x179c0f=_0x10d555['winnerSuicides']||0x0;_0x34a353[_0x3dc2d3(0x27d)]=_0x3dc2d3(0x1e0)+_0x179c0f;const _0x42310a=_0x4e6684['querySelector']('.player.loser\x20.player-name');_0x42310a[_0x3dc2d3(0x27d)]=_0x10d555['loserUsername']||'Unknown',_0x42310a['style']['color']=getEloColor(_0x10d555['loserOldElo']),_0x4e6684[_0x3dc2d3(0x1e2)]('.player.loser\x20.player-score')['textContent']=_0x10d555[_0x3dc2d3(0x288)]??0x0;const _0x1a6b46=_0x4e6684['querySelector']('.player.loser\x20.player-suicides'),_0x60b9ce=_0x10d555['loserSuicides']||0x0;_0x1a6b46['textContent']=_0x3dc2d3(0x1e0)+_0x60b9ce;const _0x246cf6=_0x4e6684['querySelector']('.match-subgame');if(_0x246cf6){if(_0x10d555['subgameType']&&_0x10d555['subgameType'][_0x3dc2d3(0x21e)]()!==''){_0x246cf6['textContent']=_0x10d555['subgameType'],_0x246cf6[_0x3dc2d3(0x264)]['display']='block';const _0x2e0ace=getSubgameClass(_0x10d555['subgameType']);_0x2e0ace&&_0x246cf6['classList'][_0x3dc2d3(0x22e)](_0x2e0ace);}else _0x246cf6['textContent']='Standard\x20Match',_0x246cf6['style']['display']=_0x3dc2d3(0x1cc),_0x246cf6[_0x3dc2d3(0x264)][_0x3dc2d3(0x267)]='0.6';}const _0x319a6c=_0x4e6684['querySelector']('.comment.winner-comment'),_0x2ab00f=_0x4e6684[_0x3dc2d3(0x1e2)]('.comment.loser-comment'),_0x364de2=_0x10d555[_0x3dc2d3(0x271)]||'',_0x2fdd7b=_0x10d555[_0x3dc2d3(0x1f7)]||'',_0x2e104f=_0x10d555['approvedAt']||_0x10d555['createdAt'],_0x365b69=filterComment(_0x364de2,_0x10d555[_0x3dc2d3(0x218)],_0x2e104f),_0x11526f=filterComment(_0x2fdd7b,_0x10d555['loserUsername'],_0x2e104f);_0x319a6c['textContent']='\x22'+truncateComment(_0x364de2)+'\x22',_0x2ab00f['textContent']='\x22'+truncateComment(_0x2fdd7b)+'\x22';_0x364de2&&!isUsernameMuted(_0x10d555[_0x3dc2d3(0x218)],_0x2e104f)?_0x319a6c['onclick']=()=>showPreviewCommentPopup(_0x365b69,_0x10d555['winnerUsername']||_0x3dc2d3(0x257),getEloColor(_0x10d555['winnerOldElo'])):(_0x319a6c['textContent']=_0x365b69==='Muted.'?_0x3dc2d3(0x1f8):'-',_0x319a6c[_0x3dc2d3(0x264)][_0x3dc2d3(0x1ff)]=_0x3dc2d3(0x28d),_0x319a6c['onclick']=null);_0x2fdd7b&&!isUsernameMuted(_0x10d555['loserUsername'])?_0x2ab00f[_0x3dc2d3(0x203)]=()=>showPreviewCommentPopup(_0x11526f,_0x10d555[_0x3dc2d3(0x263)]||'Loser',getEloColor(_0x10d555[_0x3dc2d3(0x236)])):(_0x2ab00f['textContent']=_0x11526f==='Muted.'?_0x3dc2d3(0x1f8):'-',_0x2ab00f[_0x3dc2d3(0x264)]['cursor']='default',_0x2ab00f[_0x3dc2d3(0x203)]=null);const _0x2ce6a2=_0x141ad0?.['querySelector'](_0x3dc2d3(0x253));if(!_0x2ce6a2)console['warn']('Comments\x20section\x20not\x20found\x20in\x20template');else{const _0xfd2d60=_0x2ce6a2['querySelector']('.comments-container'),_0x3f5e20=_0xfd2d60?.['querySelector']('.no-comments-message'),_0x1ef2da=_0x2ce6a2['querySelector']('.add-comment-btn');if(_0xfd2d60){while(_0xfd2d60['firstChild']&&_0xfd2d60['firstChild']!==_0x3f5e20){_0xfd2d60['removeChild'](_0xfd2d60['firstChild']);}_0x1ef2da&&_0x1ef2da['addEventListener']('click',()=>{showAddCommentPopup(_0x10d555['id']);});const _0x4129a6=_0x1fe2c4[_0x10d555['id']]||[];if(_0x4129a6['length']>0x0){if(_0x3f5e20)_0x3f5e20['style']['display']=_0x3dc2d3(0x234);const _0x311ae7=(_0x3d76b7,_0x406c63)=>{const _0x3e6221=_0x3dc2d3,_0x587c43=_0x3d76b7['split']('\x20');if(_0x587c43['length']<=_0x406c63)return _0x3d76b7;return _0x587c43[_0x3e6221(0x296)](0x0,_0x406c63)['join']('\x20')+'...';};_0x4129a6['forEach'](_0x45d5af=>{const _0x3fa7e8=_0x3dc2d3,_0x3c4d39=document[_0x3fa7e8(0x279)]('div');if(_0x45d5af['type']==='demo'){_0x3c4d39['className']='demo-link',_0x3c4d39[_0x3fa7e8(0x219)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x45d5af[_0x3fa7e8(0x1de)]+_0x3fa7e8(0x227)+_0x45d5af['username']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22demo-description\x22>'+(_0x45d5af[_0x3fa7e8(0x204)]||'No\x20description\x20provided')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';const _0x23afd8=window['auth']['currentUser'],_0x2558c5=_0x23afd8&&_0x45d5af['userId']===_0x23afd8[_0x3fa7e8(0x258)];if(_0x2558c5){const _0x2e786e=document['createElement']('button');_0x2e786e['className']='delete-comment-btn',_0x2e786e['innerHTML']='Ã—',_0x2e786e['setAttribute'](_0x3fa7e8(0x22b),'Delete\x20demo'),_0x2e786e['addEventListener']('click',_0x92ca65=>{_0x92ca65['preventDefault'](),_0x92ca65['stopPropagation'](),deleteComment(_0x45d5af['id'],_0x3c4d39);}),_0x3c4d39[_0x3fa7e8(0x251)](_0x2e786e);}}else{_0x3c4d39['className']='comment-item';const _0x185351=isUsernameMuted(_0x45d5af['username'],_0x45d5af['timestamp']),_0x489e0d=_0x185351?'Muted.':_0x311ae7(_0x45d5af[_0x3fa7e8(0x23c)]||'',0xf),_0x29ca5c=_0x45d5af['username']||'Anonymous',_0x1eae8e=window['auth'][_0x3fa7e8(0x24e)],_0xe5feed=_0x1eae8e&&_0x45d5af[_0x3fa7e8(0x20e)]===_0x1eae8e['uid'];let _0x498d52='';_0xe5feed&&(_0x498d52=_0x3fa7e8(0x23d));_0x3c4d39['innerHTML']=_0x498d52+'<strong>'+_0x29ca5c+':</strong>\x20\x22'+_0x489e0d+'\x22';if(_0xe5feed){const _0x5d8c5b=_0x3c4d39['querySelector']('.delete-comment-btn');_0x5d8c5b&&_0x5d8c5b['addEventListener']('click',_0x41f713=>{_0x41f713['stopPropagation'](),deleteComment(_0x45d5af['id'],_0x3c4d39);});}!_0x185351?_0x3c4d39[_0x3fa7e8(0x24a)](_0x3fa7e8(0x26a),()=>{showFullCommentLightbox(_0x45d5af);}):_0x3c4d39['style']['cursor']=_0x3fa7e8(0x28d);}_0xfd2d60[_0x3fa7e8(0x280)](_0x3c4d39,_0xfd2d60[_0x3fa7e8(0x28c)]);});}else{if(_0x3f5e20)_0x3f5e20['style']['display']='block';}}}const _0x5b1fb6=_0x4e6684['querySelector'](_0x3dc2d3(0x275));if(_0x5b1fb6){const _0x155af2=_0x4e6684['querySelector']('.winner-demo-link'),_0x240a61=_0x4e6684[_0x3dc2d3(0x1e2)]('.loser-demo-link'),_0x2a1705=_0x10d555['winnerDemoLink']||null,_0x4b71ce=_0x10d555[_0x3dc2d3(0x1e7)]||_0x10d555['demoLink']||null;console['log']('Match\x20'+_0x10d555['id']+'\x20demo\x20links:',{'winner':_0x2a1705,'loser':_0x4b71ce}),_0x155af2&&(_0x2a1705?(_0x155af2['href']=_0x2a1705,_0x155af2['style']['display']='flex',_0x155af2['title']=_0x10d555['winnerUsername']+_0x3dc2d3(0x202)):_0x155af2['style']['display']='none'),_0x240a61&&(_0x4b71ce?(_0x240a61['href']=_0x4b71ce,_0x240a61['style']['display']=_0x3dc2d3(0x1d7),_0x240a61[_0x3dc2d3(0x27c)]=_0x10d555['loserUsername']+'\x27s\x20Demo'):_0x240a61['style']['display']='none'),_0x2a1705&&_0x155af2||_0x4b71ce&&_0x240a61?_0x5b1fb6[_0x3dc2d3(0x264)]['display']='flex':_0x5b1fb6['style'][_0x3dc2d3(0x22d)]='none';}_0x32b9a0[_0x3dc2d3(0x251)](_0x47dbaf);});}function getSubgameClass(_0xc69261){const _0x16d775=a4_0x1d2ca2,_0xcc48ce={'Fusion\x20Match':'fusion-match','â‰¥6\x20Missiles':_0x16d775(0x290),'â‰¥6\x20missiles':'missiles-6plus','Weapon\x20Imbalance':'weapon-imbalance','Blind\x20Match':_0x16d775(0x272),'Rematch':'rematch','Disorientation':'disorientation','Ratting':_0x16d775(0x256),'Altered\x20Powerups':_0x16d775(0x259),'Mega\x20Match':'mega-match','Dogfight':'dogfight','Gauss\x20and\x20Mercs':'gauss-and-mercs'};return _0xcc48ce[_0xc69261]||'';}async function deleteComment(_0x15d5b0,_0x133e5e){const _0xa1f59c=a4_0x1d2ca2,_0x5ebc85=window['auth']['currentUser'];if(!_0x5ebc85){alert('You\x20need\x20to\x20be\x20signed\x20in\x20to\x20delete\x20comments');return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20comment?'))return;try{const _0x3e0f4d=doc(window['db'],'matchComments',_0x15d5b0),_0x32889a=await getDoc(_0x3e0f4d);if(!_0x32889a['exists']()){alert('Comment\x20not\x20found.\x20It\x20may\x20have\x20already\x20been\x20deleted.');return;}const _0x27f1e1=_0x32889a['data']();if(_0x27f1e1[_0xa1f59c(0x20e)]!==_0x5ebc85['uid']){alert('You\x20can\x20only\x20delete\x20your\x20own\x20comments');return;}await deleteDoc(_0x3e0f4d);if(_0x133e5e&&_0x133e5e['parentNode']){_0x133e5e[_0xa1f59c(0x220)][_0xa1f59c(0x230)](_0x133e5e);const _0x54f680=_0x133e5e[_0xa1f59c(0x284)]('.comments-container');if(_0x54f680&&!_0x54f680['querySelector']('.comment-item')){const _0x3a48dc=_0x54f680['querySelector'](_0xa1f59c(0x235));if(_0x3a48dc)_0x3a48dc['style']['display']='block';}}console['log'](_0xa1f59c(0x205));}catch(_0x3eb761){console[_0xa1f59c(0x28f)]('Error\x20deleting\x20comment:',_0x3eb761),alert('Failed\x20to\x20delete\x20comment:\x20'+_0x3eb761['message']);}}async function getAllCommentsForMatch(_0x39733a){const _0x3b2a30=a4_0x1d2ca2;if(!_0x39733a)return[];try{const _0x40fef7=collection(window['db'],'matchComments'),_0x466a75=query(_0x40fef7,where('matchId','==',_0x39733a),orderBy(_0x3b2a30(0x225),'desc')),_0x397a8c=await getDocs(_0x466a75);if(_0x397a8c[_0x3b2a30(0x255)])return[];return _0x397a8c['docs']['map'](_0x141f4f=>({'id':_0x141f4f['id'],..._0x141f4f['data']()}));}catch(_0x5c4331){return console[_0x3b2a30(0x28f)](_0x3b2a30(0x1da),_0x5c4331),[];}}async function submitComment(_0x5d8dd7){const _0x156fcf=a4_0x1d2ca2;_0x5d8dd7['preventDefault']();if(!window['auth']||!window['db']){console['error'](_0x156fcf(0x1e8)),alert('Unable\x20to\x20submit\x20comment\x20-\x20system\x20not\x20ready');return;}const _0x1932f9=window['auth']['currentUser'];if(!_0x1932f9){alert(_0x156fcf(0x295));return;}const _0x131d50=document['getElementById']('commentMatchId')?.['value'],_0x57d032=document['getElementById']('commentText')?.['value']?.[_0x156fcf(0x21e)]();if(!_0x131d50||!_0x57d032){alert(_0x156fcf(0x24b));return;}const _0x314f9d=_0x57d032['split'](/\s+/)[_0x156fcf(0x250)](_0x796432=>_0x796432[_0x156fcf(0x1d0)]>0x0)['length'];if(_0x314f9d>0xf){alert(_0x156fcf(0x1f5));return;}const _0x18da29=document[_0x156fcf(0x1e2)]('.submit-comment-btn');_0x18da29&&(_0x18da29['disabled']=!![],_0x18da29['textContent']='Submitting...');try{let _0x31f48b='Anonymous';try{const _0xdec2cd=doc(window['db'],_0x156fcf(0x1d9),_0x1932f9['uid']),_0x5f0e67=await getDoc(_0xdec2cd);if(_0x5f0e67[_0x156fcf(0x21a)]()){const _0x4ad11c=_0x5f0e67['data']();_0x4ad11c['username']&&(_0x31f48b=_0x4ad11c[_0x156fcf(0x1f0)]);}_0x31f48b==='Anonymous'&&_0x1932f9['displayName']&&(_0x31f48b=_0x1932f9[_0x156fcf(0x1d4)]);}catch(_0x130941){console['warn']('Failed\x20to\x20fetch\x20user\x20profile:',_0x130941),_0x1932f9['displayName']&&(_0x31f48b=_0x1932f9[_0x156fcf(0x1d4)]);}const _0x59b529={'matchId':_0x131d50,'userId':_0x1932f9['uid'],'username':_0x31f48b,'text':_0x57d032,'timestamp':serverTimestamp()};console[_0x156fcf(0x28e)]('Submitting\x20comment\x20as:',_0x31f48b);const _0x1d07f7=collection(window['db'],'matchComments');await addDoc(_0x1d07f7,_0x59b529),console[_0x156fcf(0x28e)]('Comment\x20added\x20successfully'),closeAddCommentPopup(),loadRecentMatchesPreview('current');}catch(_0x50ebb2){console[_0x156fcf(0x28f)]('Error\x20submitting\x20comment:',_0x50ebb2),alert('Failed\x20to\x20add\x20comment:\x20'+_0x50ebb2[_0x156fcf(0x247)]),_0x18da29&&(_0x18da29['disabled']=![],_0x18da29['textContent']=_0x156fcf(0x25a));}}function closeAddCommentPopup(){const _0x1942ae=a4_0x1d2ca2,_0x198bec=document['getElementById']('commentAddPopup'),_0x4c55a2=document['getElementById'](_0x1942ae(0x214));if(_0x198bec)_0x198bec[_0x1942ae(0x264)]['display']='none';if(_0x4c55a2)_0x4c55a2['style'][_0x1942ae(0x22d)]=_0x1942ae(0x234);}function showAddCommentPopup(_0x575ff7){const _0x5defa8=a4_0x1d2ca2,_0x561ae7=window['auth'][_0x5defa8(0x24e)];if(!_0x561ae7){alert(_0x5defa8(0x1d8));return;}let _0x5b25f3=document['getElementById']('commentAddPopup'),_0x3b2d0b=document['getElementById'](_0x5defa8(0x214));!_0x5b25f3&&(_0x5b25f3=document['createElement']('div'),_0x5b25f3['id']=_0x5defa8(0x215),_0x5b25f3['className']=_0x5defa8(0x210),document[_0x5defa8(0x21b)]['appendChild'](_0x5b25f3));!_0x3b2d0b&&(_0x3b2d0b=document['createElement']('div'),_0x3b2d0b['id']='commentAddOverlay',_0x3b2d0b['className']='comment-overlay',document['body']['appendChild'](_0x3b2d0b));_0x5b25f3['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22popup-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Add\x20Comment\x20or\x20Demo</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeAddCommentPopup\x22\x20class=\x22close-btn\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22addCommentForm\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22hidden\x22\x20id=\x22commentMatchId\x22\x20name=\x22commentMatchId\x22\x20value=\x22'+_0x575ff7+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-tabs\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x20active\x22\x20data-option=\x22comment\x22>Add\x20Comment</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22option-divider\x22>OR</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20class=\x22option-tab\x22\x20data-option=\x22demo\x22>Share\x20Demo\x20Link</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22commentOption\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22commentText\x22>Your\x20comment\x20(15\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22commentText\x22\x20name=\x22commentText\x22\x20rows=\x223\x22\x20placeholder=\x22Share\x20your\x20thoughts...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22wordCount\x22>0</span>/15\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22option-content\x22\x20id=\x22demoOption\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoLink\x22>Demo\x20Link:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22url\x22\x20id=\x22demoLink\x22\x20name=\x22demoLink\x22\x20placeholder=\x22https://...\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22demoDescription\x22>Description\x20(20\x20words\x20max):</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22demoDescription\x22\x20name=\x22demoDescription\x22\x20rows=\x222\x22\x20placeholder=\x22Describe\x20your\x20demo...\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22word-counter\x22><span\x20id=\x22demoWordCount\x22>0</span>/20\x20words</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22submit-comment-btn\x22>Submit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20',_0x5b25f3['style']['display']='block',_0x3b2d0b['style']['display']='block',document['getElementById'](_0x5defa8(0x1ca))['addEventListener']('click',closeAddCommentPopup),_0x3b2d0b['addEventListener'](_0x5defa8(0x26a),closeAddCommentPopup);const _0x543ae2=_0x5b25f3['querySelectorAll']('.option-tab');_0x543ae2['forEach'](_0x4c4b04=>{const _0x58cbf6=_0x5defa8;_0x4c4b04['addEventListener'](_0x58cbf6(0x26a),function(){const _0xcf37b6=_0x58cbf6;_0x543ae2['forEach'](_0x796c93=>_0x796c93[_0xcf37b6(0x22f)][_0xcf37b6(0x278)]('active')),document[_0xcf37b6(0x23b)](_0xcf37b6(0x1df))[_0xcf37b6(0x26e)](_0x4ef00d=>_0x4ef00d['style'][_0xcf37b6(0x22d)]=_0xcf37b6(0x234)),this[_0xcf37b6(0x22f)][_0xcf37b6(0x22e)](_0xcf37b6(0x289));const _0x1d569a=this['dataset']['option'];document['getElementById'](_0x1d569a+'Option')['style']['display']='block',_0x1d569a===_0xcf37b6(0x27e)?(document['getElementById']('demoLink')['setAttribute'](_0xcf37b6(0x1ec),''),document['getElementById']('commentText')[_0xcf37b6(0x25d)](_0xcf37b6(0x1ec))):(document['getElementById'](_0xcf37b6(0x1de))['removeAttribute'](_0xcf37b6(0x1ec)),document[_0xcf37b6(0x27a)]('commentText')['setAttribute'](_0xcf37b6(0x1ec),''));});}),document['getElementById']('commentText')['setAttribute'](_0x5defa8(0x1ec),''),document[_0x5defa8(0x27a)](_0x5defa8(0x1de))[_0x5defa8(0x25d)]('required'),setupWordCounter('commentText','wordCount',0xf),setupWordCounter('demoDescription',_0x5defa8(0x212),0x14),document[_0x5defa8(0x27a)](_0x5defa8(0x28a))['addEventListener']('submit',submitCommentOrDemo);}function setupWordCounter(_0x2cd056,_0x1620b6,_0x6629b7){const _0x5aef01=document['getElementById'](_0x2cd056),_0x11dac4=document['getElementById'](_0x1620b6);if(!_0x5aef01||!_0x11dac4)return;_0x2a4bf5(),_0x5aef01['addEventListener']('input',_0x2a4bf5);function _0x2a4bf5(){const _0x25218e=a4_0x4320,_0x14c09b=_0x5aef01[_0x25218e(0x26f)]['trim'](),_0x4370ca=_0x14c09b?_0x14c09b[_0x25218e(0x229)](/\s+/)[_0x25218e(0x250)](_0x15b72c=>_0x15b72c['length']>0x0)['length']:0x0;_0x11dac4['textContent']=_0x4370ca,_0x4370ca>_0x6629b7?_0x11dac4['style'][_0x25218e(0x22a)]=_0x25218e(0x231):_0x11dac4['style']['color']='#aaa';}}async function submitCommentOrDemo(_0x22be00){const _0x463b20=a4_0x1d2ca2;_0x22be00['preventDefault']();if(!window[_0x463b20(0x28b)]||!window['db']){console['error']('Firebase\x20not\x20initialized'),alert(_0x463b20(0x1e4));return;}const _0x4fd669=window['auth']['currentUser'];if(!_0x4fd669){alert('You\x20must\x20be\x20signed\x20in\x20to\x20continue');return;}const _0x352aa2=document['getElementById'](_0x463b20(0x1fe))['value'],_0x57e011=document['querySelector']('.option-tab.active')['dataset'][_0x463b20(0x24d)];let _0x38a846='Anonymous';try{const _0x452d5e=doc(window['db'],'userProfiles',_0x4fd669[_0x463b20(0x258)]),_0x38df94=await getDoc(_0x452d5e);if(_0x38df94[_0x463b20(0x21a)]()){const _0x278bdc=_0x38df94[_0x463b20(0x27f)]();_0x278bdc['username']&&(_0x38a846=_0x278bdc['username']);}_0x38a846==='Anonymous'&&_0x4fd669['displayName']&&(_0x38a846=_0x4fd669[_0x463b20(0x1d4)]);}catch(_0x11f707){console[_0x463b20(0x211)]('Failed\x20to\x20fetch\x20username:',_0x11f707),_0x4fd669[_0x463b20(0x1d4)]&&(_0x38a846=_0x4fd669[_0x463b20(0x1d4)]);}const _0x3db52e=document['querySelector']('.submit-comment-btn');_0x3db52e&&(_0x3db52e[_0x463b20(0x1d3)]=!![],_0x3db52e[_0x463b20(0x27d)]='Submitting...');try{if(_0x57e011===_0x463b20(0x240)){const _0x2c890c=document[_0x463b20(0x27a)](_0x463b20(0x1e6))['value']['trim']();if(!_0x2c890c){alert('Please\x20enter\x20a\x20comment\x20before\x20submitting'),_0x3db52e[_0x463b20(0x1d3)]=![],_0x3db52e[_0x463b20(0x27d)]='Submit';return;}const _0x53a8bb=_0x2c890c['split'](/\s+/)['filter'](_0x11067b=>_0x11067b[_0x463b20(0x1d0)]>0x0)['length'];if(_0x53a8bb>0xf){alert('Comments\x20are\x20limited\x20to\x2015\x20words\x20maximum.\x20Please\x20shorten\x20your\x20comment.'),_0x3db52e['disabled']=![],_0x3db52e['textContent']='Submit';return;}const _0xb34b81={'matchId':_0x352aa2,'userId':_0x4fd669['uid'],'username':_0x38a846,'text':_0x2c890c,'type':'comment','timestamp':serverTimestamp()},_0x1d9010=collection(window['db'],'matchComments');await addDoc(_0x1d9010,_0xb34b81);}else{const _0x2e2341=document['getElementById'](_0x463b20(0x1de))[_0x463b20(0x26f)]['trim'](),_0xb18594=document['getElementById']('demoDescription')[_0x463b20(0x26f)]['trim']()||_0x463b20(0x292);if(!_0x2e2341){alert(_0x463b20(0x208)),_0x3db52e['disabled']=![],_0x3db52e[_0x463b20(0x27d)]='Submit';return;}try{new URL(_0x2e2341);}catch(_0x244f4e){alert('Please\x20enter\x20a\x20valid\x20URL\x20for\x20the\x20demo\x20link'),_0x3db52e['disabled']=![],_0x3db52e[_0x463b20(0x27d)]=_0x463b20(0x25a);return;}const _0x4666e8=_0xb18594['split'](/\s+/)['filter'](_0x3360ac=>_0x3360ac['length']>0x0)['length'];if(_0x4666e8>0x14){alert(_0x463b20(0x262)),_0x3db52e['disabled']=![],_0x3db52e['textContent']='Submit';return;}const _0x43d6f9={'matchId':_0x352aa2,'userId':_0x4fd669['uid'],'username':_0x38a846,'demoLink':_0x2e2341,'description':_0xb18594,'type':_0x463b20(0x27e),'text':'Demo:\x20'+_0xb18594,'timestamp':serverTimestamp()},_0x15ccb8=collection(window['db'],'matchComments');await addDoc(_0x15ccb8,_0x43d6f9);}closeAddCommentPopup(),loadRecentMatchesPreview(_0x463b20(0x1ed));}catch(_0x19ec88){console[_0x463b20(0x28f)]('Error\x20submitting:',_0x19ec88),alert('Failed\x20to\x20submit:\x20'+_0x19ec88['message']),_0x3db52e&&(_0x3db52e['disabled']=![],_0x3db52e['textContent']='Submit');}}function getEloRankClass(_0x5e6627){const _0x234485=a4_0x1d2ca2,_0x160a55=Number(_0x5e6627);if(_0x160a55>=0x7d0)return'emerald';else{if(_0x160a55>=0x708)return _0x234485(0x1db);else{if(_0x160a55>=0x640)return _0x234485(0x249);else{if(_0x160a55>=0x578)return _0x234485(0x233);else return'unranked';}}}}function showPreviewCommentPopup(_0x3d10cc,_0x4e2491,_0xea201='#fff'){const _0x450485=a4_0x1d2ca2,_0x3b86a8=document[_0x450485(0x27a)]('commentPopupPreview'),_0x2eddf8=document[_0x450485(0x27a)]('commentOverlayPreview'),_0x2c1541=document['getElementById'](_0x450485(0x261)),_0x133f8d=document['getElementById']('commentPopupContentPreview'),_0x20d182=document[_0x450485(0x27a)]('reportCommentButton');if(!_0x3b86a8||!_0x2eddf8||!_0x2c1541||!_0x133f8d||!_0x20d182)return;_0x3b86a8[_0x450485(0x1e1)]['commentText']=_0x3d10cc,_0x3b86a8['dataset']['commentUser']=_0x4e2491,_0x2c1541[_0x450485(0x264)][_0x450485(0x22a)]=_0xea201,_0x2c1541[_0x450485(0x27d)]='Comment\x20from\x20'+_0x4e2491,_0x133f8d[_0x450485(0x27d)]=_0x3d10cc,_0x20d182['onclick']=reportComment,_0x3b86a8['style']['display']=_0x450485(0x1cc),_0x2eddf8['style']['display']='block';}function closePreviewCommentPopup(){const _0x470cf1=a4_0x1d2ca2,_0x546b92=document['getElementById']('commentPopupPreview'),_0x5e0ea9=document['getElementById']('commentOverlayPreview');if(_0x546b92)_0x546b92[_0x470cf1(0x264)][_0x470cf1(0x22d)]='none';if(_0x5e0ea9)_0x5e0ea9['style'][_0x470cf1(0x22d)]='none';}async function reportComment(){const _0x15ec5e=a4_0x1d2ca2,_0xfdd242=window['auth']['currentUser'];if(!_0xfdd242){alert(_0x15ec5e(0x1dd));return;}if(!confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20report\x20this\x20comment\x20as\x20inappropriate?'))return;try{const _0x128df6=document['getElementById']('commentPopupPreview'),_0x59e4e9={'commentAuthor':_0x128df6[_0x15ec5e(0x1e1)][_0x15ec5e(0x242)]||_0x15ec5e(0x20a),'commentText':_0x128df6['dataset']['commentText']||'','matchId':previewState['currentMatchId']||'','reportedBy':_0xfdd242['uid'],'reporterUsername':_0xfdd242[_0x15ec5e(0x1d4)]||_0x15ec5e(0x1cf),'reportedAt':serverTimestamp()},_0x1c030f=collection(window['db'],'badComments');await addDoc(_0x1c030f,_0x59e4e9),alert(_0x15ec5e(0x21f)),closePreviewCommentPopup();}catch(_0x61ca36){console['error'](_0x15ec5e(0x216),_0x61ca36),alert(_0x15ec5e(0x287)+_0x61ca36['message']);}}function showFullCommentLightbox(_0x24463e){const _0x2f88b1=a4_0x1d2ca2;if(isUsernameMuted(_0x24463e['username']))return;const _0x1bdf40=document['getElementById']('commentPopupPreview'),_0x175138=document[_0x2f88b1(0x27a)]('commentOverlayPreview'),_0x4e9265=document['getElementById']('commentPopupTitlePreview'),_0x461750=document[_0x2f88b1(0x27a)]('commentPopupContentPreview');if(!_0x1bdf40||!_0x175138||!_0x4e9265||!_0x461750)return;_0x4e9265[_0x2f88b1(0x264)]['color']='#fff',_0x4e9265['textContent']='Comment\x20from\x20'+_0x24463e['username'];if(_0x24463e['timestamp']){const _0x8094b4=new Date(_0x24463e['timestamp'][_0x2f88b1(0x23e)]*0x3e8),_0x179bb5=_0x8094b4['toLocaleString']();_0x461750['innerHTML']=_0x2f88b1(0x1ef)+_0x24463e['text']+'</p><small\x20style=\x22color:#aaa;\x20display:block;\x20text-align:right;\x20margin-top:10px;\x22>Posted\x20on\x20'+_0x179bb5+'</small>';}else _0x461750[_0x2f88b1(0x27d)]=_0x24463e['text'];_0x1bdf40[_0x2f88b1(0x1e1)]['commentId']=_0x24463e['id']||'',_0x1bdf40['dataset']['commentUser']=_0x24463e['username']||'',_0x1bdf40['dataset'][_0x2f88b1(0x1e6)]=_0x24463e['text']||'',_0x1bdf40['dataset']['matchId']=_0x24463e['matchId']||'';const _0x18b9c6=_0x1bdf40[_0x2f88b1(0x1e2)]('.popup-actions')||document['createElement']('div');!_0x1bdf40['querySelector'](_0x2f88b1(0x270))?(_0x18b9c6['className']=_0x2f88b1(0x248),_0x18b9c6[_0x2f88b1(0x264)][_0x2f88b1(0x22d)]=_0x2f88b1(0x1d7),_0x18b9c6['style']['justifyContent']='center',_0x18b9c6[_0x2f88b1(0x264)]['gap']=_0x2f88b1(0x221),_0x18b9c6[_0x2f88b1(0x264)]['marginTop']='15px',_0x1bdf40['appendChild'](_0x18b9c6)):_0x18b9c6['innerHTML']='';const _0x40cbf7=document['createElement'](_0x2f88b1(0x217));_0x40cbf7['textContent']='Close',_0x40cbf7['className']='popup-btn\x20close-btn',_0x40cbf7['id']='closeCommentPopupPreview',_0x40cbf7['addEventListener']('click',closePreviewCommentPopup);const _0x178902=document['createElement']('button');_0x178902['textContent']='Report',_0x178902['className']='popup-btn\x20report-btn',_0x178902['style']['backgroundColor']=_0x2f88b1(0x232),_0x178902[_0x2f88b1(0x24a)](_0x2f88b1(0x26a),reportComment),_0x18b9c6['appendChild'](_0x40cbf7),_0x18b9c6[_0x2f88b1(0x251)](_0x178902),_0x1bdf40['style']['display']='block',_0x175138['style'][_0x2f88b1(0x22d)]=_0x2f88b1(0x1cc);}export function setupPreviewEventListeners(){const _0x4b2b62=a4_0x1d2ca2,_0x3df47c=document['getElementById']('previewPrevPage'),_0x110110=document['getElementById']('previewNextPage'),_0x455f85=document['getElementById'](_0x4b2b62(0x23a)),_0x4e3911=document['getElementById']('preview-d2-button'),_0x2e4b9f=document[_0x4b2b62(0x27a)]('preview-d3-button'),_0xee0aa8=document['getElementById']('filter-toggle-button'),_0x76ea06=document['getElementById'](_0x4b2b62(0x1e9));if(!_0x3df47c||!_0x110110||!_0x455f85||!_0x4e3911||!_0x2e4b9f||!_0xee0aa8||!_0x76ea06){console[_0x4b2b62(0x211)](_0x4b2b62(0x1fd));return;}_0x3df47c['addEventListener'](_0x4b2b62(0x26a),()=>{const _0x34e6ee=_0x4b2b62;if(!_0x3df47c[_0x34e6ee(0x1d3)])loadRecentMatchesPreview('prev');}),_0x110110[_0x4b2b62(0x24a)]('click',()=>{if(!_0x110110['disabled'])loadRecentMatchesPreview('next');}),_0x455f85['addEventListener']('click',()=>{const _0x3313a2=_0x4b2b62;previewState['currentMode']!=='D1'&&!previewState[_0x3313a2(0x1d6)]&&(previewState['currentMode']='D1',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x3313a2(0x1ed)));}),_0x4e3911['addEventListener']('click',()=>{const _0x3ba92c=_0x4b2b62;previewState['currentMode']!=='D2'&&!previewState[_0x3ba92c(0x1d6)]&&(previewState['currentMode']='D2',updatePreviewLadderModeUI(),loadRecentMatchesPreview('current'));}),_0x2e4b9f['addEventListener'](_0x4b2b62(0x26a),()=>{const _0x16e952=_0x4b2b62;previewState['currentMode']!=='D3'&&!previewState['isLoading']&&(previewState['currentMode']='D3',updatePreviewLadderModeUI(),loadRecentMatchesPreview(_0x16e952(0x1ed)));});_0xee0aa8&&_0x76ea06&&_0xee0aa8['addEventListener']('click',()=>{const _0x170df1=_0x4b2b62,_0x5858af=_0x76ea06['style']['display']!==_0x170df1(0x234);_0x76ea06['style'][_0x170df1(0x22d)]=_0x5858af?_0x170df1(0x234):'block',_0xee0aa8['classList']['toggle']('active',!_0x5858af);});const _0x52a064=document['getElementById']('apply-enhanced-filters'),_0x1cb029=document[_0x4b2b62(0x27a)](_0x4b2b62(0x20c));_0x52a064&&_0x52a064[_0x4b2b62(0x24a)]('click',()=>{const _0x284c8e=_0x4b2b62;previewState['enhancedFilters'][_0x284c8e(0x207)]=document['getElementById'](_0x284c8e(0x1fb))['value']['trim'](),previewState[_0x284c8e(0x223)]['levels']=document[_0x284c8e(0x27a)]('filter-levels')['value']['trim']();const _0x33e1cc=document['getElementById'](_0x284c8e(0x224));previewState[_0x284c8e(0x223)][_0x284c8e(0x244)]=Array['from'](_0x33e1cc[_0x284c8e(0x252)])['map'](_0x46b383=>_0x46b383['value'])['filter'](_0x4e2e82=>_0x4e2e82!==''),loadRecentMatchesPreview(_0x284c8e(0x1ed));});_0x1cb029&&_0x1cb029['addEventListener']('click',()=>{clearEnhancedFilters(),loadRecentMatchesPreview('current');});document['querySelectorAll']('.jump-btn')['forEach'](_0x3459d0=>{_0x3459d0['addEventListener']('click',()=>{const _0x44be83=_0x3459d0['dataset']['jump'];jumpToPage(_0x44be83);});});const _0x49a9fd=document['getElementById']('jump-to-page');_0x49a9fd&&_0x49a9fd[_0x4b2b62(0x24a)]('keypress',_0x5417e4=>{_0x5417e4['key']==='Enter'&&jumpToPage('input');});const _0x199213=document[_0x4b2b62(0x27a)]('closeCommentPopupPreview'),_0x10a898=document['getElementById']('commentOverlayPreview');if(_0x199213)_0x199213[_0x4b2b62(0x24a)](_0x4b2b62(0x26a),closePreviewCommentPopup);if(_0x10a898)_0x10a898[_0x4b2b62(0x24a)]('click',closePreviewCommentPopup);const _0x2f090b=document['getElementById']('closeAddCommentPopup'),_0x1fbe33=document[_0x4b2b62(0x27a)](_0x4b2b62(0x214)),_0x5f81da=document['getElementById']('addCommentForm');if(_0x2f090b)_0x2f090b[_0x4b2b62(0x24a)]('click',closeAddCommentPopup);if(_0x1fbe33)_0x1fbe33['addEventListener'](_0x4b2b62(0x26a),closeAddCommentPopup);if(_0x5f81da)_0x5f81da[_0x4b2b62(0x24a)](_0x4b2b62(0x1fc),submitComment);const _0x27664c=document['getElementById'](_0x4b2b62(0x1e6)),_0x1d3fbc=document['getElementById'](_0x4b2b62(0x286));_0x27664c&&_0x1d3fbc&&setupWordCounter(_0x4b2b62(0x1e6),'wordCount',0xf);}window[a4_0x1d2ca2(0x238)]=showAddCommentPopup,window[a4_0x1d2ca2(0x1ca)]=closeAddCommentPopup,window['submitComment']=submitComment;