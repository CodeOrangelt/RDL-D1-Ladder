const a22_0x4738b9=a22_0x40ed;import a22_0x26b4ee,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;function a22_0x40ed(_0x515a08,_0x4b73e8){const _0x509eb1=a22_0x4954();return a22_0x40ed=function(_0x103120,_0x834f68){_0x103120=_0x103120-0x107;let _0x4954fa=_0x509eb1[_0x103120];return _0x4954fa;},a22_0x40ed(_0x515a08,_0x4b73e8);}let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x30d7f1=a22_0x40ed;if(document[_0x30d7f1(0x13d)]('idle-overlay'))return;const _0x3aff66=document[_0x30d7f1(0x10f)]('div');_0x3aff66['id']='idle-overlay',_0x3aff66['style']['cssText']=_0x30d7f1(0x131);const _0x30c83d=document['createElement']('div');_0x30c83d['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x49781d=document[_0x30d7f1(0x10f)]('h2');_0x49781d['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x49781d['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x12685d=document['createElement']('p');_0x12685d[_0x30d7f1(0x120)]=_0x30d7f1(0x11f),_0x12685d[_0x30d7f1(0x11b)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x192804=document[_0x30d7f1(0x10f)]('button');_0x192804['id']='resume-session-btn',_0x192804['textContent']='Return\x20to\x20Website',_0x192804[_0x30d7f1(0x11b)]['cssText']=_0x30d7f1(0x13b),_0x192804[_0x30d7f1(0x10d)]=function(){const _0x14f9e8=_0x30d7f1;this[_0x14f9e8(0x11b)]['backgroundColor']='#3da05f';},_0x192804['onmouseout']=function(){const _0x15e1b8=_0x30d7f1;this['style']['backgroundColor']=_0x15e1b8(0x10c);},_0x30c83d['appendChild'](_0x49781d),_0x30c83d['appendChild'](_0x12685d),_0x30c83d[_0x30d7f1(0x119)](_0x192804),_0x3aff66[_0x30d7f1(0x119)](_0x30c83d),document['body'][_0x30d7f1(0x119)](_0x3aff66),_0x192804['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x10389d=a22_0x40ed;if(document[_0x10389d(0x13d)]('network-error-overlay'))return;const _0x53cf5f=document[_0x10389d(0x10f)]('div');_0x53cf5f['id']=_0x10389d(0x117),_0x53cf5f['style']['cssText']=_0x10389d(0x131);const _0x4509e1=document['createElement'](_0x10389d(0x129));_0x4509e1['style']['cssText']=_0x10389d(0x138);const _0x2e6e6f=document[_0x10389d(0x10f)]('h2');_0x2e6e6f['textContent']='Connection\x20Error',_0x2e6e6f['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x3ebd71=document[_0x10389d(0x10f)]('p');_0x3ebd71['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x3ebd71['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x293bbd=document['createElement']('button');_0x293bbd['id']='retry-connection-btn',_0x293bbd['textContent']=_0x10389d(0x122),_0x293bbd['style'][_0x10389d(0x126)]=_0x10389d(0x110);const _0x154acc=document['createElement'](_0x10389d(0x124));_0x154acc['id']='reload-page-btn',_0x154acc['textContent']='Reload\x20Page',_0x154acc[_0x10389d(0x11b)][_0x10389d(0x126)]=_0x10389d(0x115);const _0x5056f6=document[_0x10389d(0x10f)](_0x10389d(0x129));_0x5056f6['style'][_0x10389d(0x126)]=_0x10389d(0x113),_0x5056f6['appendChild'](_0x293bbd),_0x5056f6['appendChild'](_0x154acc),_0x4509e1[_0x10389d(0x119)](_0x2e6e6f),_0x4509e1[_0x10389d(0x119)](_0x3ebd71),_0x4509e1['appendChild'](_0x5056f6),_0x53cf5f['appendChild'](_0x4509e1),document['body'][_0x10389d(0x119)](_0x53cf5f),_0x293bbd['addEventListener']('click',retryConnection),_0x154acc['addEventListener']('click',()=>window['location'][_0x10389d(0x116)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x24b77d=a22_0x40ed;clearTimeout(idleTimer);const _0xbf6862=document['getElementById'](_0x24b77d(0x117));_0xbf6862&&(_0xbf6862['style']['display']='flex'),window[_0x24b77d(0x130)]=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x26b4ee['suspendAllListeners']();}function retryConnection(){const _0x16eb4f=a22_0x40ed;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x2c0cd5=document['querySelector']('#network-error-overlay\x20p');_0x2c0cd5&&(_0x2c0cd5['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x47a13e=document['getElementById'](_0x16eb4f(0x11c));_0x47a13e&&(_0x47a13e['disabled']=!![],_0x47a13e['style']['opacity']='0.5',_0x47a13e['style'][_0x16eb4f(0x107)]='not-allowed');return;}const _0x303ae4=document['getElementById']('network-error-overlay');_0x303ae4&&(_0x303ae4['style'][_0x16eb4f(0x123)]=_0x16eb4f(0x111));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x4c950c}=window;if(_0x4c950c){const _0x2062f1=_0x4c950c['collection']('system');_0x4c950c['getDocs'](_0x2062f1)['catch'](_0x2a2fcc=>{const _0x249f54=_0x16eb4f;console[_0x249f54(0x12d)]('Connection\x20test\x20failed:',_0x2a2fcc),handleNetworkError();});}}catch(_0x57d300){console['error'](_0x16eb4f(0x133),_0x57d300),handleNetworkError();}a22_0x26b4ee[_0x16eb4f(0x12b)]();}function a22_0x4954(){const _0x3eb4fb=['cursor','RDL_LAST_ACTIVITY','log','mousedown','suspendSession','#50C878','onmouseover','suspendAllListeners','createElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20','none','now','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','idle-overlay','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','reload','network-error-overlay','Active\x20listeners:','appendChild','console','style','retry-connection-btn','length','Pending\x20operations:','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','textContent','apply','Retry\x20Connection','display','button','{}.constructor(\x22return\x20this\x22)(\x20)','cssText','keys','bind','div','warn','resumeAllListeners','mousemove','error','resource-exhausted','DOMContentLoaded','RDL_NETWORK_ERROR','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','loading','Failed\x20to\x20test\x20connection:','checkFirebaseIdleStatus','pendingOperations','activeListeners','code','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','Forcing\x20idle\x20timeout...','click','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','includes','getElementById'];a22_0x4954=function(){return _0x3eb4fb;};return a22_0x4954();}function suspendSession(){const _0x55389b=a22_0x40ed;isSessionSuspended=!![];const _0x59824d=document['getElementById']('idle-overlay');_0x59824d&&(_0x59824d['style']['display']='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a22_0x26b4ee[_0x55389b(0x10e)]();}function resumeSession(){const _0x3514ee=a22_0x40ed;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x2d7ab4=document['getElementById'](_0x3514ee(0x114));_0x2d7ab4&&(_0x2d7ab4['style']['display']='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0x26b4ee['resumeAllListeners'](),idleTimer&&Date['now']()-(window[_0x3514ee(0x108)]||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0x1fef1c=a22_0x40ed,_0xe0f316=(function(){let _0x2279f8=!![];return function(_0x20c629,_0x3ccc7e){const _0xaaaf92=_0x2279f8?function(){const _0x423112=a22_0x40ed;if(_0x3ccc7e){const _0x3b248e=_0x3ccc7e[_0x423112(0x121)](_0x20c629,arguments);return _0x3ccc7e=null,_0x3b248e;}}:function(){};return _0x2279f8=![],_0xaaaf92;};}()),_0x19e83c=_0xe0f316(this,function(){const _0x236e36=a22_0x40ed;let _0xb788bc;try{const _0x404f14=Function('return\x20(function()\x20'+_0x236e36(0x125)+');');_0xb788bc=_0x404f14();}catch(_0xbb74e1){_0xb788bc=window;}const _0xe24ecd=_0xb788bc[_0x236e36(0x11a)]=_0xb788bc['console']||{},_0x22b3b1=['log',_0x236e36(0x12a),'info','error','exception','table','trace'];for(let _0x494889=0x0;_0x494889<_0x22b3b1[_0x236e36(0x11d)];_0x494889++){const _0x6ecd98=_0xe0f316['constructor']['prototype']['bind'](_0xe0f316),_0x289558=_0x22b3b1[_0x494889],_0x59b0b5=_0xe24ecd[_0x289558]||_0x6ecd98;_0x6ecd98['__proto__']=_0xe0f316[_0x236e36(0x128)](_0xe0f316),_0x6ecd98['toString']=_0x59b0b5['toString']['bind'](_0x59b0b5),_0xe24ecd[_0x289558]=_0x6ecd98;}});_0x19e83c(),createIdleOverlay();const _0x481732=[_0x1fef1c(0x10a),_0x1fef1c(0x12c),'keypress','scroll','touchstart',_0x1fef1c(0x13a)];_0x481732['forEach'](_0x55388d=>{document['addEventListener'](_0x55388d,()=>{const _0x3b56d2=a22_0x40ed;window['RDL_LAST_ACTIVITY']=Date[_0x3b56d2(0x112)](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x5563f0){const _0x1cc313=_0x1fef1c;_0x5563f0[_0x1cc313(0x12d)]&&(_0x5563f0['error']['message']&&_0x5563f0['error']['message'][_0x1cc313(0x13c)]('network')||_0x5563f0['error']['code']&&(_0x5563f0['error'][_0x1cc313(0x137)]==='unavailable'||_0x5563f0['error'][_0x1cc313(0x137)]===_0x1cc313(0x12e)||_0x5563f0['error'][_0x1cc313(0x137)][_0x1cc313(0x13c)]('network')))&&(handleNetworkError(),_0x5563f0['preventDefault']());}),resetIdleTimer(),console[_0x1fef1c(0x109)]('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window[_0x1fef1c(0x10b)]=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window[_0x1fef1c(0x134)]=function(){const _0x3a1d9c=_0x1fef1c;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window[_0x3a1d9c(0x130)]),console['log'](_0x3a1d9c(0x118),a22_0x26b4ee[_0x3a1d9c(0x136)]['size']),console[_0x3a1d9c(0x109)](_0x3a1d9c(0x11e),a22_0x26b4ee[_0x3a1d9c(0x135)]['size']),console['log']('Blocked\x20operations:',a22_0x26b4ee['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x26b4ee['activeListeners']['keys']()),'pendingOperations':Array['from'](a22_0x26b4ee['pendingOperations'][_0x3a1d9c(0x127)]()),'blockedCount':a22_0x26b4ee['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){const _0x4a858c=_0x1fef1c;console['log'](_0x4a858c(0x139)),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']===a22_0x4738b9(0x132)?document['addEventListener'](a22_0x4738b9(0x12f),initIdleTimeout):initIdleTimeout();