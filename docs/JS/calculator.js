const a0_0x5d3f25=a0_0x13fe;(function(_0x3ebc95,_0xdbe450){const _0x20c2c2=a0_0x13fe,_0x5908ad=_0x3ebc95();while(!![]){try{const _0x529e3d=parseInt(_0x20c2c2(0x1c5))/0x1+parseInt(_0x20c2c2(0x1ce))/0x2+parseInt(_0x20c2c2(0x1b7))/0x3*(-parseInt(_0x20c2c2(0x1d3))/0x4)+-parseInt(_0x20c2c2(0x1d6))/0x5+parseInt(_0x20c2c2(0x1b1))/0x6*(parseInt(_0x20c2c2(0x1de))/0x7)+parseInt(_0x20c2c2(0x1d1))/0x8+-parseInt(_0x20c2c2(0x1cd))/0x9;if(_0x529e3d===_0xdbe450)break;else _0x5908ad['push'](_0x5908ad['shift']());}catch(_0x5194f3){_0x5908ad['push'](_0x5908ad['shift']());}}}(a0_0x1071,0xde47c));function a0_0x13fe(_0x37063f,_0x1934d2){const _0x43f108=a0_0x1071();return a0_0x13fe=function(_0x19d7d8,_0x4ba7ac){_0x19d7d8=_0x19d7d8-0x1b1;let _0xf4ff79=_0x43f108[_0x19d7d8];return _0xf4ff79;},a0_0x13fe(_0x37063f,_0x1934d2);}const a0_0x4ba7ac=(function(){let _0x45c25e=!![];return function(_0x1aed19,_0x3a6102){const _0x585a54=_0x45c25e?function(){if(_0x3a6102){const _0x141b60=_0x3a6102['apply'](_0x1aed19,arguments);return _0x3a6102=null,_0x141b60;}}:function(){};return _0x45c25e=![],_0x585a54;};}()),a0_0x19d7d8=a0_0x4ba7ac(this,function(){const _0x8005f1=a0_0x13fe;let _0xb4b103;try{const _0x39ca1e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xb4b103=_0x39ca1e();}catch(_0x1e9461){_0xb4b103=window;}const _0x3a2986=_0xb4b103['console']=_0xb4b103[_0x8005f1(0x1d9)]||{},_0x19f858=['log','warn','info','error','exception',_0x8005f1(0x1eb),_0x8005f1(0x1b5)];for(let _0x3f2751=0x0;_0x3f2751<_0x19f858['length'];_0x3f2751++){const _0x1c94f0=a0_0x4ba7ac['constructor']['prototype'][_0x8005f1(0x1dc)](a0_0x4ba7ac),_0x1e5d7e=_0x19f858[_0x3f2751],_0x2bd0fe=_0x3a2986[_0x1e5d7e]||_0x1c94f0;_0x1c94f0[_0x8005f1(0x1e2)]=a0_0x4ba7ac[_0x8005f1(0x1dc)](a0_0x4ba7ac),_0x1c94f0['toString']=_0x2bd0fe[_0x8005f1(0x1da)]['bind'](_0x2bd0fe),_0x3a2986[_0x1e5d7e]=_0x1c94f0;}});a0_0x19d7d8();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const _0x4d9592=a0_0x13fe;this['currentLadder']='D1',this['players']=new Map(),this[_0x4d9592(0x1b9)]();}[a0_0x5d3f25(0x1b9)](){this['setupEventListeners'](),this['loadPlayers']();}['setupEventListeners'](){const _0x4645db=a0_0x5d3f25;document['querySelectorAll'](_0x4645db(0x1c6))['forEach'](_0x1363d8=>{_0x1363d8['addEventListener']('click',_0x36c091=>{const _0x529a62=a0_0x13fe;document['querySelectorAll']('.ladder-btn')['forEach'](_0x2ceec0=>_0x2ceec0[_0x529a62(0x1ec)]['remove']('active')),_0x36c091['target']['classList']['add'](_0x529a62(0x1c7)),this['currentLadder']=_0x36c091['target']['dataset']['ladder'],this['loadPlayers']();});}),document['getElementById']('refresh-players')[_0x4645db(0x1c8)]('click',()=>{this['loadPlayers']();}),document[_0x4645db(0x1e0)](_0x4645db(0x1ed))[_0x4645db(0x1c8)]('change',()=>this[_0x4645db(0x1c1)]()),document['getElementById']('loser-select')['addEventListener'](_0x4645db(0x1d8),()=>this[_0x4645db(0x1c1)]());}async['loadPlayers'](){const _0x1d0c31=a0_0x5d3f25;try{this[_0x1d0c31(0x1e1)](_0x1d0c31(0x1c3));const _0x30aa15=this['currentLadder']==='D1'?_0x1d0c31(0x1bc):this['currentLadder']==='D2'?'playersD2':_0x1d0c31(0x1bb),_0x59ff57=collection(db,_0x30aa15),_0x5be677=query(_0x59ff57,orderBy('eloRating','desc')),_0x172b35=await getDocs(_0x5be677);this['players']['clear'](),_0x172b35[_0x1d0c31(0x1e9)](_0xdf8e14=>{const _0x20d60b=_0x1d0c31,_0x586e7e=_0xdf8e14['data']();_0x586e7e[_0x20d60b(0x1c4)]&&this['players']['set'](_0x586e7e['username'],{'id':_0xdf8e14['id'],'username':_0x586e7e[_0x20d60b(0x1c4)],'elo':parseInt(_0x586e7e['eloRating'])||0x4b0,'position':_0x586e7e['position']||0x3e7});}),this[_0x1d0c31(0x1e1)](),console[_0x1d0c31(0x1e6)]('Loaded\x20'+this['players']['size']+_0x1d0c31(0x1df)+this['currentLadder']+'\x20ladder');}catch(_0x307ffd){console['error']('Error\x20loading\x20players:',_0x307ffd),this['updateDropdowns']('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](_0x465a21=null){const _0xe9a519=a0_0x5d3f25,_0x342383=document['getElementById']('winner-select'),_0x3d03c4=document[_0xe9a519(0x1e0)]('loser-select');if(_0x465a21){_0x342383[_0xe9a519(0x1d7)]=_0x465a21,_0x3d03c4[_0xe9a519(0x1d7)]=_0x465a21;return;}let _0x1a1bfa=_0xe9a519(0x1ef);const _0x3fee0e=Array['from'](this['players']['values']())[_0xe9a519(0x1b4)]((_0xf6b0f2,_0x2c399b)=>_0x2c399b['elo']-_0xf6b0f2[_0xe9a519(0x1e4)]);_0x3fee0e[_0xe9a519(0x1e9)](_0x6bc10c=>{const _0x26701a=_0xe9a519,_0x1078b2=this['getELORankClass'](_0x6bc10c['elo']);_0x1a1bfa+='<option\x20value=\x22'+_0x6bc10c['username']+_0x26701a(0x1b6)+_0x6bc10c['elo']+'\x22\x20class=\x22'+_0x1078b2+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x6bc10c['username']+'\x20('+_0x6bc10c[_0x26701a(0x1e4)]+_0x26701a(0x1d2);}),_0x342383['innerHTML']=_0x1a1bfa,_0x3d03c4['innerHTML']=_0x1a1bfa;}[a0_0x5d3f25(0x1c1)](){const _0x5d292a=a0_0x5d3f25,_0x4cd0ef=document['getElementById'](_0x5d292a(0x1ed)),_0x1176f8=document['getElementById'](_0x5d292a(0x1ba)),_0x340e7e=_0x4cd0ef[_0x5d292a(0x1b2)],_0x2b7f1d=_0x1176f8[_0x5d292a(0x1b2)];if(!_0x340e7e||!_0x2b7f1d){document['getElementById']('match-result')['style']['display']='none',document['getElementById']('calculation-details')[_0x5d292a(0x1ca)]['display']='none';return;}if(_0x340e7e===_0x2b7f1d){alert('Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser');return;}const _0x2dcc98=this['players']['get'](_0x340e7e),_0x82dadd=this[_0x5d292a(0x1bc)][_0x5d292a(0x1b8)](_0x2b7f1d);if(!_0x2dcc98||!_0x82dadd){console['error']('Player\x20not\x20found');return;}const _0x250229=this['calculateELO'](_0x2dcc98[_0x5d292a(0x1e4)],_0x82dadd[_0x5d292a(0x1e4)]);this[_0x5d292a(0x1c2)](_0x2dcc98,_0x82dadd,_0x250229),this[_0x5d292a(0x1be)](_0x2dcc98,_0x82dadd,_0x250229);}[a0_0x5d3f25(0x1e8)](_0x3badb8,_0x470a58,_0x273019=0x20){const _0x228ca1=a0_0x5d3f25,_0x182a10=0x1/(0x1+Math['pow'](0xa,(_0x470a58-_0x3badb8)/0x190)),_0x2539a7=0x1/(0x1+Math['pow'](0xa,(_0x3badb8-_0x470a58)/0x190)),_0x46a6ca=_0x3badb8+_0x273019*(0x1-_0x182a10),_0xe01081=_0x470a58+_0x273019*(0x0-_0x2539a7);return{'winnerChange':Math['round'](_0x46a6ca-_0x3badb8),'loserChange':Math['round'](_0xe01081-_0x470a58),'newWinnerRating':Math['round'](_0x46a6ca),'newLoserRating':Math[_0x228ca1(0x1ea)](_0xe01081),'expectedScoreWinner':_0x182a10,'expectedScoreLoser':_0x2539a7};}[a0_0x5d3f25(0x1c2)](_0x53da74,_0x51be8c,_0x2f0fa4){const _0x51fee3=a0_0x5d3f25;document['getElementById'](_0x51fee3(0x1cf))['textContent']=_0x53da74['username'],document['getElementById']('winner-current-elo')['textContent']='Current\x20ELO:\x20'+_0x53da74['elo'],document['getElementById']('winner-elo-change')['textContent']='+'+_0x2f0fa4['winnerChange'],document[_0x51fee3(0x1e0)](_0x51fee3(0x1cb))['textContent']=_0x51fee3(0x1e7)+_0x2f0fa4['newWinnerRating'],document[_0x51fee3(0x1e0)](_0x51fee3(0x1bf))[_0x51fee3(0x1db)]=_0x51be8c['username'],document[_0x51fee3(0x1e0)]('loser-current-elo')['textContent']='Current\x20ELO:\x20'+_0x51be8c[_0x51fee3(0x1e4)],document['getElementById'](_0x51fee3(0x1c0))['textContent']=''+_0x2f0fa4['loserChange'],document['getElementById']('loser-new-elo')['textContent']='New\x20ELO:\x20'+_0x2f0fa4['newLoserRating'];const _0x14989c=this['getELOColor'](_0x53da74[_0x51fee3(0x1e4)]),_0x14c157=this[_0x51fee3(0x1b3)](_0x51be8c[_0x51fee3(0x1e4)]);document[_0x51fee3(0x1e0)]('winner-name')['style']['color']=_0x14989c,document['getElementById']('loser-name')['style']['color']=_0x14c157,document['getElementById']('match-result')['style']['display']='grid';}[a0_0x5d3f25(0x1be)](_0x5e5b98,_0xe3d552,_0x4f077e){const _0x19ce4a=a0_0x5d3f25,_0x20d30d=_0x19ce4a(0x1cc)+_0x5e5b98['username']+':\x20'+_0x5e5b98['elo']+_0x19ce4a(0x1e3)+_0xe3d552['username']+':\x20'+_0xe3d552[_0x19ce4a(0x1e4)]+'\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20'+_0x5e5b98['username']+':\x20'+_0x4f077e[_0x19ce4a(0x1d4)]['toFixed'](0x3)+'\x20('+(_0x4f077e[_0x19ce4a(0x1d4)]*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x20\x20'+_0xe3d552[_0x19ce4a(0x1c4)]+':\x20'+_0x4f077e['expectedScoreLoser'][_0x19ce4a(0x1d5)](0x3)+'\x20('+(_0x4f077e['expectedScoreLoser']*0x64)['toFixed'](0x1)+'%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'+_0x5e5b98[_0x19ce4a(0x1c4)]+':\x20'+_0x5e5b98[_0x19ce4a(0x1e4)]+_0x19ce4a(0x1e5)+_0x4f077e[_0x19ce4a(0x1ee)]+'\x20=\x20'+_0x4f077e[_0x19ce4a(0x1bd)]+'\x0a\x20\x20'+_0xe3d552[_0x19ce4a(0x1c4)]+':\x20'+_0xe3d552[_0x19ce4a(0x1e4)]+'\x20+\x20'+_0x4f077e[_0x19ce4a(0x1dd)]+'\x20=\x20'+_0x4f077e['newLoserRating']+'\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a'+(_0x4f077e['winnerChange']>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(_0x4f077e['winnerChange']<0x5?'Low\x20ELO\x20gain.':'')+_0x19ce4a(0x1d0);document['getElementById']('calculation-text')[_0x19ce4a(0x1db)]=_0x20d30d,document[_0x19ce4a(0x1e0)]('calculation-details')['style']['display']='block';}[a0_0x5d3f25(0x1b3)](_0x2fdfd2){if(_0x2fdfd2>=0x7d0)return'#50C878';else{if(_0x2fdfd2>=0x708)return'#FFD700';else{if(_0x2fdfd2>=0x640)return'#C0C0C0';else{if(_0x2fdfd2>=0x578)return'#CD7F32';else return'#808080';}}}}['getELORankClass'](_0x2a141e){const _0x193b58=a0_0x5d3f25;if(_0x2a141e>=0x7d0)return'emerald';else{if(_0x2a141e>=0x708)return _0x193b58(0x1c9);else{if(_0x2a141e>=0x640)return'silver';else{if(_0x2a141e>=0x578)return'bronze';else return'unranked';}}}}}function a0_0x1071(){const _0x164800=['trace','\x22\x20data-elo=\x22','1758GIkOPc','get','init','loser-select','playersD3','players','newWinnerRating','displayCalculationDetails','loser-name','loser-elo-change','calculateMatch','displayMatchResult','<option\x20value=\x22\x22>Loading\x20players...</option>','username','584529QrOmbZ','.ladder-btn','active','addEventListener','gold','style','winner-new-elo','\x0a\x0aInitial\x20Ratings:\x0a\x20\x20','9899721ajFoiq','2268016PYsfcH','winner-name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','7313232EJcICZ','\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>','5816WZWAub','expectedScoreWinner','toFixed','3340345zIKJIY','innerHTML','change','console','toString','textContent','bind','loserChange','6284957IBJzqG','\x20players\x20from\x20','getElementById','updateDropdowns','__proto__','\x0a\x20\x20','elo','\x20+\x20','log','New\x20ELO:\x20','calculateELO','forEach','round','table','classList','winner-select','winnerChange','<option\x20value=\x22\x22>Select\x20a\x20player...</option>','6PEuxlh','value','getELOColor','sort'];a0_0x1071=function(){return _0x164800;};return a0_0x1071();}document['addEventListener']('DOMContentLoaded',()=>{document['getElementById']('sandbox')&&new ELOCalculator();});