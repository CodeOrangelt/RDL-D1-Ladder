function a9_0x56a9(){const _0x3aa322=['change','calculateELO','eloRating','sandbox','emerald','bind','%\x20chance\x20to\x20win)\x0a\x20\x20','table','toFixed','ladder','forEach','from','gold','innerHTML','username','warn','{}.constructor(\x22return\x20this\x22)(\x20)','target','players','displayCalculationDetails','grid','\x0a\x20\x20','Low\x20ELO\x20gain.','textContent','.ladder-btn','currentLadder','New\x20ELO:\x20','none','setupEventListeners','value','constructor','getELORankClass','style','toString','addEventListener','click','\x0a\x0aFormula\x20Used:\x0a\x20\x20New\x20Rating\x20=\x20Old\x20Rating\x20+\x20K-factor\x20Ã—\x20(Actual\x20Score\x20-\x20Expected\x20Score)\x0a\x20\x20K-factor\x20=\x2032\x0a\x20\x20Actual\x20Score:\x20Winner\x20=\x201,\x20Loser\x20=\x200\x0a\x20\x20\x0a','loadPlayers','#FFD700','block','active','\x20players\x20from\x20','calculateMatch','updateDropdowns','Player\x20not\x20found','desc','\x20ELO)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</option>','getElementById','elo','display','log','loser-select','Please\x20select\x20different\x20players\x20for\x20winner\x20and\x20loser','dataset','#50C878','__proto__','pow','winner-select','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','refresh-players','match-result','getELOColor','%\x20chance\x20to\x20win)\x0a\x0aELO\x20Changes:\x0a\x20\x20'];a9_0x56a9=function(){return _0x3aa322;};return a9_0x56a9();}function a9_0x1227(_0x5a5210,_0x165561){const _0x25d10e=a9_0x56a9();return a9_0x1227=function(_0x5cfb96,_0x5de19d){_0x5cfb96=_0x5cfb96-0x107;let _0x56a96a=_0x25d10e[_0x5cfb96];return _0x56a96a;},a9_0x1227(_0x5a5210,_0x165561);}const a9_0x50b481=a9_0x1227,a9_0x5cfb96=(function(){let _0x76ef46=!![];return function(_0x5a6f3f,_0x3330f4){const _0x438884=_0x76ef46?function(){if(_0x3330f4){const _0x35c832=_0x3330f4['apply'](_0x5a6f3f,arguments);return _0x3330f4=null,_0x35c832;}}:function(){};return _0x76ef46=![],_0x438884;};}()),a9_0x25d10e=a9_0x5cfb96(this,function(){const _0x40597b=a9_0x1227,_0x264ad5=function(){const _0x40bcdc=a9_0x1227;let _0x1bfec3;try{_0x1bfec3=Function('return\x20(function()\x20'+_0x40bcdc(0x117)+');')();}catch(_0x2176c1){_0x1bfec3=window;}return _0x1bfec3;},_0x405242=_0x264ad5(),_0x3a5981=_0x405242['console']=_0x405242['console']||{},_0x5a3343=['log',_0x40597b(0x116),'info','error','exception',_0x40597b(0x10e),'trace'];for(let _0x2ce8d7=0x0;_0x2ce8d7<_0x5a3343['length'];_0x2ce8d7++){const _0x122adb=a9_0x5cfb96[_0x40597b(0x125)]['prototype'][_0x40597b(0x10c)](a9_0x5cfb96),_0x34c9a0=_0x5a3343[_0x2ce8d7],_0xa93f7e=_0x3a5981[_0x34c9a0]||_0x122adb;_0x122adb[_0x40597b(0x13e)]=a9_0x5cfb96['bind'](a9_0x5cfb96),_0x122adb['toString']=_0xa93f7e[_0x40597b(0x128)]['bind'](_0xa93f7e),_0x3a5981[_0x34c9a0]=_0x122adb;}});a9_0x25d10e();import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){this['currentLadder']='D1',this['players']=new Map(),this['init']();}['init'](){const _0x466d04=a9_0x1227;this[_0x466d04(0x123)](),this[_0x466d04(0x12c)]();}['setupEventListeners'](){const _0x4543a1=a9_0x1227;document['querySelectorAll'](_0x4543a1(0x11f))['forEach'](_0x8e6ed=>{const _0x474368=_0x4543a1;_0x8e6ed['addEventListener'](_0x474368(0x12a),_0x564ab7=>{const _0x2c0b98=_0x474368;document['querySelectorAll'](_0x2c0b98(0x11f))['forEach'](_0x564052=>_0x564052['classList']['remove'](_0x2c0b98(0x12f))),_0x564ab7['target']['classList']['add']('active'),this['currentLadder']=_0x564ab7[_0x2c0b98(0x118)][_0x2c0b98(0x13c)][_0x2c0b98(0x110)],this['loadPlayers']();});}),document['getElementById'](_0x4543a1(0x142))['addEventListener'](_0x4543a1(0x12a),()=>{this['loadPlayers']();}),document['getElementById']('winner-select')[_0x4543a1(0x129)](_0x4543a1(0x107),()=>this['calculateMatch']()),document['getElementById'](_0x4543a1(0x13a))['addEventListener']('change',()=>this['calculateMatch']());}async['loadPlayers'](){const _0x184544=a9_0x1227;try{this[_0x184544(0x132)]('<option\x20value=\x22\x22>Loading\x20players...</option>');const _0x214ddf=this['currentLadder']==='D1'?_0x184544(0x119):this['currentLadder']==='D2'?'playersD2':'playersD3',_0x29e35d=collection(db,_0x214ddf),_0xc80973=query(_0x29e35d,orderBy(_0x184544(0x109),_0x184544(0x134))),_0x2b33ad=await getDocs(_0xc80973);this['players']['clear'](),_0x2b33ad[_0x184544(0x111)](_0x13076a=>{const _0x5b9e68=_0x184544,_0x217904=_0x13076a['data']();_0x217904[_0x5b9e68(0x115)]&&this[_0x5b9e68(0x119)]['set'](_0x217904['username'],{'id':_0x13076a['id'],'username':_0x217904['username'],'elo':parseInt(_0x217904[_0x5b9e68(0x109)])||0x4b0,'position':_0x217904['position']||0x3e7});}),this['updateDropdowns'](),console[_0x184544(0x139)]('Loaded\x20'+this['players']['size']+_0x184544(0x130)+this[_0x184544(0x120)]+'\x20ladder');}catch(_0x34c896){console['error']('Error\x20loading\x20players:',_0x34c896),this[_0x184544(0x132)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}['updateDropdowns'](_0x4d3ed9=null){const _0x5b9bc3=a9_0x1227,_0x5b4343=document['getElementById'](_0x5b9bc3(0x140)),_0x1c5bc0=document['getElementById']('loser-select');if(_0x4d3ed9){_0x5b4343['innerHTML']=_0x4d3ed9,_0x1c5bc0[_0x5b9bc3(0x114)]=_0x4d3ed9;return;}let _0x4370f9='<option\x20value=\x22\x22>Select\x20a\x20player...</option>';const _0x45f430=Array[_0x5b9bc3(0x112)](this['players']['values']())['sort']((_0x878a16,_0x4ef64f)=>_0x4ef64f['elo']-_0x878a16['elo']);_0x45f430['forEach'](_0x9e836a=>{const _0x5f33f4=_0x5b9bc3,_0x5bb128=this['getELORankClass'](_0x9e836a[_0x5f33f4(0x137)]);_0x4370f9+='<option\x20value=\x22'+_0x9e836a[_0x5f33f4(0x115)]+'\x22\x20data-elo=\x22'+_0x9e836a['elo']+'\x22\x20class=\x22'+_0x5bb128+_0x5f33f4(0x141)+_0x9e836a[_0x5f33f4(0x115)]+'\x20('+_0x9e836a['elo']+_0x5f33f4(0x135);}),_0x5b4343[_0x5b9bc3(0x114)]=_0x4370f9,_0x1c5bc0[_0x5b9bc3(0x114)]=_0x4370f9;}[a9_0x50b481(0x131)](){const _0x539e06=a9_0x50b481,_0x3f08fa=document['getElementById']('winner-select'),_0x1b9f9d=document['getElementById'](_0x539e06(0x13a)),_0x1118a0=_0x3f08fa['value'],_0x3a5d8d=_0x1b9f9d[_0x539e06(0x124)];if(!_0x1118a0||!_0x3a5d8d){document[_0x539e06(0x136)]('match-result')['style']['display']=_0x539e06(0x122),document['getElementById']('calculation-details')[_0x539e06(0x127)]['display']='none';return;}if(_0x1118a0===_0x3a5d8d){alert(_0x539e06(0x13b));return;}const _0x6e0902=this['players']['get'](_0x1118a0),_0x506c05=this['players']['get'](_0x3a5d8d);if(!_0x6e0902||!_0x506c05){console['error'](_0x539e06(0x133));return;}const _0x454e83=this[_0x539e06(0x108)](_0x6e0902[_0x539e06(0x137)],_0x506c05['elo']);this['displayMatchResult'](_0x6e0902,_0x506c05,_0x454e83),this[_0x539e06(0x11a)](_0x6e0902,_0x506c05,_0x454e83);}[a9_0x50b481(0x108)](_0x430fd9,_0x375903,_0x54cc80=0x20){const _0x157aad=a9_0x50b481,_0x322e06=0x1/(0x1+Math[_0x157aad(0x13f)](0xa,(_0x375903-_0x430fd9)/0x190)),_0x435f3b=0x1/(0x1+Math['pow'](0xa,(_0x430fd9-_0x375903)/0x190)),_0x1780b0=_0x430fd9+_0x54cc80*(0x1-_0x322e06),_0x423bb9=_0x375903+_0x54cc80*(0x0-_0x435f3b);return{'winnerChange':Math['round'](_0x1780b0-_0x430fd9),'loserChange':Math['round'](_0x423bb9-_0x375903),'newWinnerRating':Math['round'](_0x1780b0),'newLoserRating':Math['round'](_0x423bb9),'expectedScoreWinner':_0x322e06,'expectedScoreLoser':_0x435f3b};}['displayMatchResult'](_0x27c03a,_0x50e4f7,_0x248f9c){const _0x58a0bb=a9_0x50b481;document['getElementById']('winner-name')['textContent']=_0x27c03a[_0x58a0bb(0x115)],document[_0x58a0bb(0x136)]('winner-current-elo')[_0x58a0bb(0x11e)]='Current\x20ELO:\x20'+_0x27c03a['elo'],document['getElementById']('winner-elo-change')[_0x58a0bb(0x11e)]='+'+_0x248f9c['winnerChange'],document['getElementById']('winner-new-elo')['textContent']=_0x58a0bb(0x121)+_0x248f9c['newWinnerRating'],document['getElementById']('loser-name')['textContent']=_0x50e4f7['username'],document['getElementById']('loser-current-elo')['textContent']='Current\x20ELO:\x20'+_0x50e4f7[_0x58a0bb(0x137)],document['getElementById']('loser-elo-change')['textContent']=''+_0x248f9c['loserChange'],document['getElementById']('loser-new-elo')['textContent']='New\x20ELO:\x20'+_0x248f9c['newLoserRating'];const _0x419d12=this[_0x58a0bb(0x144)](_0x27c03a['elo']),_0x5918e3=this['getELOColor'](_0x50e4f7['elo']);document['getElementById']('winner-name')['style']['color']=_0x419d12,document[_0x58a0bb(0x136)]('loser-name')[_0x58a0bb(0x127)]['color']=_0x5918e3,document['getElementById'](_0x58a0bb(0x143))['style'][_0x58a0bb(0x138)]=_0x58a0bb(0x11b);}['displayCalculationDetails'](_0x19b6d2,_0x472d8b,_0x27d74b){const _0x41a1a8=a9_0x50b481,_0x2fe70e='\x0a\x0aInitial\x20Ratings:\x0a\x20\x20'+_0x19b6d2[_0x41a1a8(0x115)]+':\x20'+_0x19b6d2['elo']+_0x41a1a8(0x11c)+_0x472d8b['username']+':\x20'+_0x472d8b['elo']+'\x0a\x20\x20\x0aExpected\x20Scores:\x0a\x20\x20'+_0x19b6d2[_0x41a1a8(0x115)]+':\x20'+_0x27d74b['expectedScoreWinner']['toFixed'](0x3)+'\x20('+(_0x27d74b['expectedScoreWinner']*0x64)['toFixed'](0x1)+_0x41a1a8(0x10d)+_0x472d8b['username']+':\x20'+_0x27d74b['expectedScoreLoser'][_0x41a1a8(0x10f)](0x3)+'\x20('+(_0x27d74b['expectedScoreLoser']*0x64)[_0x41a1a8(0x10f)](0x1)+_0x41a1a8(0x145)+_0x19b6d2['username']+':\x20'+_0x19b6d2[_0x41a1a8(0x137)]+'\x20+\x20'+_0x27d74b['winnerChange']+'\x20=\x20'+_0x27d74b['newWinnerRating']+'\x0a\x20\x20'+_0x472d8b['username']+':\x20'+_0x472d8b['elo']+'\x20+\x20'+_0x27d74b['loserChange']+'\x20=\x20'+_0x27d74b['newLoserRating']+_0x41a1a8(0x12b)+(_0x27d74b['winnerChange']>0x14?'\x20High\x20ELO\x20gain':'')+'\x0a'+(_0x27d74b['winnerChange']<0x5?_0x41a1a8(0x11d):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x41a1a8(0x136)]('calculation-text')[_0x41a1a8(0x11e)]=_0x2fe70e,document['getElementById']('calculation-details')['style']['display']=_0x41a1a8(0x12e);}[a9_0x50b481(0x144)](_0xe8298c){const _0x29e500=a9_0x50b481;if(_0xe8298c>=0x7d0)return _0x29e500(0x13d);else{if(_0xe8298c>=0x708)return _0x29e500(0x12d);else{if(_0xe8298c>=0x640)return'#C0C0C0';else{if(_0xe8298c>=0x578)return'#CD7F32';else return'#808080';}}}}[a9_0x50b481(0x126)](_0x48eac5){const _0x53f8a=a9_0x50b481;if(_0x48eac5>=0x7d0)return _0x53f8a(0x10b);else{if(_0x48eac5>=0x708)return _0x53f8a(0x113);else{if(_0x48eac5>=0x640)return'silver';else{if(_0x48eac5>=0x578)return'bronze';else return'unranked';}}}}}document['addEventListener']('DOMContentLoaded',()=>{const _0x523788=a9_0x50b481;document[_0x523788(0x136)](_0x523788(0x10a))&&new ELOCalculator();});