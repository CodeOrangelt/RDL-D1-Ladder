const a0_0x527023=a0_0x146c;(function(_0x2d0eae,_0x35fc66){const _0x3287ee=a0_0x146c,_0x3b9007=_0x2d0eae();while(!![]){try{const _0x2fc369=parseInt(_0x3287ee(0x1e6))/0x1+-parseInt(_0x3287ee(0x1de))/0x2+-parseInt(_0x3287ee(0x1e3))/0x3*(-parseInt(_0x3287ee(0x1ee))/0x4)+-parseInt(_0x3287ee(0x1e5))/0x5+-parseInt(_0x3287ee(0x1e4))/0x6+parseInt(_0x3287ee(0x1dc))/0x7*(-parseInt(_0x3287ee(0x1d9))/0x8)+parseInt(_0x3287ee(0x1e7))/0x9;if(_0x2fc369===_0x35fc66)break;else _0x3b9007['push'](_0x3b9007['shift']());}catch(_0x15a516){_0x3b9007['push'](_0x3b9007['shift']());}}}(a0_0x4768,0x5978e));const a0_0x33290d=(function(){let _0x2880de=!![];return function(_0x24c176,_0xc5af13){const _0x366754=_0x2880de?function(){const _0x42c2a1=a0_0x146c;if(_0xc5af13){const _0x48b1e9=_0xc5af13[_0x42c2a1(0x1e0)](_0x24c176,arguments);return _0xc5af13=null,_0x48b1e9;}}:function(){};return _0x2880de=![],_0x366754;};}()),a0_0x1c3042=a0_0x33290d(this,function(){const _0x5cb3d0=a0_0x146c;let _0x595f82;try{const _0x198927=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x595f82=_0x198927();}catch(_0x511368){_0x595f82=window;}const _0x16c0f6=_0x595f82[_0x5cb3d0(0x1e2)]=_0x595f82[_0x5cb3d0(0x1e2)]||{},_0x5b4f34=['log','warn','info','error',_0x5cb3d0(0x1db),'table','trace'];for(let _0x57fee7=0x0;_0x57fee7<_0x5b4f34['length'];_0x57fee7++){const _0x2db5f8=a0_0x33290d['constructor']['prototype']['bind'](a0_0x33290d),_0x21bcad=_0x5b4f34[_0x57fee7],_0x2080c3=_0x16c0f6[_0x21bcad]||_0x2db5f8;_0x2db5f8['__proto__']=a0_0x33290d['bind'](a0_0x33290d),_0x2db5f8['toString']=_0x2080c3['toString'][_0x5cb3d0(0x1f0)](_0x2080c3),_0x16c0f6[_0x21bcad]=_0x2db5f8;}});a0_0x1c3042();function a0_0x4768(){const _0x485911=['readyPlayers','bind','block','innerHTML','Just\x20now','2344ttLMPS','addEventListener','exception','7651dMxgfL','isReady','1232990TekZXr','toDate','apply','error','console','27SWtJiT','758094wurOpH','2793570leYMfc','109704FYvsOe','16316172WNxXSG','getElementById','lastUpdated','style','forEach','m\x20in\x20queue','username','29188bMIitX'];a0_0x4768=function(){return _0x485911;};return a0_0x4768();}import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a0_0x146c(_0x1ce478,_0x5118f5){const _0x2c60bd=a0_0x4768();return a0_0x146c=function(_0x1c3042,_0x33290d){_0x1c3042=_0x1c3042-0x1d9;let _0x109b41=_0x2c60bd[_0x1c3042];return _0x109b41;},a0_0x146c(_0x1ce478,_0x5118f5);}const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x4f383b){const _0x1e383a=a0_0x146c,_0x3239f4=document[_0x1e383a(0x1e8)]('queue-container');if(!_0x3239f4)return;if(_0x4f383b['length']===0x0){_0x3239f4[_0x1e383a(0x1ea)]['display']='none';return;}_0x3239f4['style']['display']=_0x1e383a(0x1f1);let _0x4b6990='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x4f383b[_0x1e383a(0x1eb)](_0x1eacf9=>{const _0x1a06f4=_0x1e383a;_0x4b6990+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x1eacf9[_0x1a06f4(0x1ed)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x1eacf9[_0x1a06f4(0x1e9)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x4b6990+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x3239f4[_0x1e383a(0x1f2)]=_0x4b6990;}function formatQueueTime(_0x4378f2){const _0x4a2c1e=a0_0x146c;if(!_0x4378f2)return _0x4a2c1e(0x1f3);const _0x165925=_0x4378f2['toDate']?_0x4378f2['toDate']():new Date(_0x4378f2),_0x32990f=new Date(),_0x12c299=Math['floor']((_0x32990f-_0x165925)/0xea60);if(_0x12c299<0x1)return'Just\x20now';return _0x12c299+_0x4a2c1e(0x1ec);}async function checkQueueTimeout(_0x1aa6c1){const _0x2b3184=a0_0x146c;if(!_0x1aa6c1[_0x2b3184(0x1e9)])return;const _0xe6e3e8=_0x1aa6c1['lastUpdated'][_0x2b3184(0x1df)]?_0x1aa6c1[_0x2b3184(0x1e9)][_0x2b3184(0x1df)]():new Date(_0x1aa6c1['lastUpdated']),_0x31920d=new Date(),_0x11ddf3=Math['floor']((_0x31920d-_0xe6e3e8)/0xea60);if(_0x11ddf3>=0x1e)try{const _0x1f3643=doc(db,_0x2b3184(0x1ef),_0x1aa6c1['id']);await updateDoc(_0x1f3643,{'isReady':![]});}catch(_0x2f6128){console[_0x2b3184(0x1e1)]('Error\x20removing\x20player\x20from\x20queue:',_0x2f6128);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x47a0c1=>{const _0x4e13ee=a0_0x146c,_0x256663=[];_0x47a0c1[_0x4e13ee(0x1eb)](_0x4b710a=>{const _0x5d566d=_0x4e13ee,_0x240f92=_0x4b710a['data']();if(_0x240f92[_0x5d566d(0x1dd)]===!![]){const _0x172a36={'id':_0x4b710a['id'],'username':_0x240f92[_0x5d566d(0x1ed)],'lastUpdated':_0x240f92[_0x5d566d(0x1e9)]||new Date()};_0x256663['push'](_0x172a36),checkQueueTimeout(_0x172a36);}}),updateQueueDisplay(_0x256663);},_0x49b7cd=>{const _0x42cc1f=a0_0x146c;console[_0x42cc1f(0x1e1)]('Error\x20in\x20queue\x20listener:',_0x49b7cd);});window[a0_0x527023(0x1da)]('unload',()=>{unsubscribe();});