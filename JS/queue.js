const a43_0x407701=(function(){let _0x171b77=!![];return function(_0x220dc2,_0x26f4c3){const _0x2d14ff=_0x171b77?function(){if(_0x26f4c3){const _0x3d4ddf=_0x26f4c3['apply'](_0x220dc2,arguments);return _0x26f4c3=null,_0x3d4ddf;}}:function(){};return _0x171b77=![],_0x2d14ff;};}()),a43_0x23d129=a43_0x407701(this,function(){const _0xf3e2a5=a43_0x6b02,_0x5d8ff6=function(){const _0x55dc36=a43_0x6b02;let _0x4cc80b;try{_0x4cc80b=Function('return\x20(function()\x20'+_0x55dc36(0x166)+');')();}catch(_0x408c45){_0x4cc80b=window;}return _0x4cc80b;},_0x450a6c=_0x5d8ff6(),_0x22bf9b=_0x450a6c['console']=_0x450a6c['console']||{},_0x323c0d=['log','warn',_0xf3e2a5(0x16f),'error','exception',_0xf3e2a5(0x173),'trace'];for(let _0x4d065f=0x0;_0x4d065f<_0x323c0d['length'];_0x4d065f++){const _0x38424b=a43_0x407701[_0xf3e2a5(0x168)][_0xf3e2a5(0x16a)]['bind'](a43_0x407701),_0x2dc396=_0x323c0d[_0x4d065f],_0x2c98d9=_0x22bf9b[_0x2dc396]||_0x38424b;_0x38424b['__proto__']=a43_0x407701['bind'](a43_0x407701),_0x38424b['toString']=_0x2c98d9[_0xf3e2a5(0x163)]['bind'](_0x2c98d9),_0x22bf9b[_0x2dc396]=_0x38424b;}});a43_0x23d129();function a43_0x6b02(_0x2e67e5,_0x5504a1){const _0x23d129=a43_0x13e5();return a43_0x6b02=function(_0x407701,_0x362c29){_0x407701=_0x407701-0x161;let _0x13e5be=_0x23d129[_0x407701];return _0x13e5be;},a43_0x6b02(_0x2e67e5,_0x5504a1);}import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x11471a){const _0x40aa82=a43_0x6b02,_0x46298d=document['getElementById'](_0x40aa82(0x161));if(!_0x46298d)return;if(_0x11471a[_0x40aa82(0x16e)]===0x0){_0x46298d['style']['display']='none';return;}_0x46298d['style']['display']='block';let _0x29c984='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x11471a['forEach'](_0x34ab37=>{const _0x37f1b1=_0x40aa82;_0x29c984+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x34ab37[_0x37f1b1(0x170)]||_0x37f1b1(0x165))+_0x37f1b1(0x16d)+formatQueueTime(_0x34ab37['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x29c984+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x46298d['innerHTML']=_0x29c984;}function formatQueueTime(_0x4f5028){const _0x2124f2=a43_0x6b02;if(!_0x4f5028)return _0x2124f2(0x167);const _0x2c1988=_0x4f5028['toDate']?_0x4f5028['toDate']():new Date(_0x4f5028),_0x26cb9c=new Date(),_0x20bd18=Math[_0x2124f2(0x169)]((_0x26cb9c-_0x2c1988)/0xea60);if(_0x20bd18<0x1)return'Just\x20now';return _0x20bd18+_0x2124f2(0x16c);}function a43_0x13e5(){const _0x11e262=['queue-container','error','toString','lastUpdated','Unknown\x20Player','{}.constructor(\x22return\x20this\x22)(\x20)','Just\x20now','constructor','floor','prototype','Error\x20removing\x20player\x20from\x20queue:','m\x20in\x20queue','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>','length','info','username','data','Error\x20in\x20queue\x20listener:','table'];a43_0x13e5=function(){return _0x11e262;};return a43_0x13e5();}async function checkQueueTimeout(_0x52a6ef){const _0x598623=a43_0x6b02;if(!_0x52a6ef[_0x598623(0x164)])return;const _0x5e382c=_0x52a6ef[_0x598623(0x164)]['toDate']?_0x52a6ef['lastUpdated']['toDate']():new Date(_0x52a6ef['lastUpdated']),_0x1633a1=new Date(),_0x3618e4=Math['floor']((_0x1633a1-_0x5e382c)/0xea60);if(_0x3618e4>=0x1e)try{const _0x30196c=doc(db,'readyPlayers',_0x52a6ef['id']);await updateDoc(_0x30196c,{'isReady':![]});}catch(_0x537a1c){console[_0x598623(0x162)](_0x598623(0x16b),_0x537a1c);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x263551=>{const _0x1851da=[];_0x263551['forEach'](_0x1ab0ce=>{const _0x481413=a43_0x6b02,_0x21e1b9=_0x1ab0ce[_0x481413(0x171)]();if(_0x21e1b9['isReady']===!![]){const _0x4b10c4={'id':_0x1ab0ce['id'],'username':_0x21e1b9['username'],'lastUpdated':_0x21e1b9[_0x481413(0x164)]||new Date()};_0x1851da['push'](_0x4b10c4),checkQueueTimeout(_0x4b10c4);}}),updateQueueDisplay(_0x1851da);},_0x31b519=>{const _0x2502a8=a43_0x6b02;console[_0x2502a8(0x162)](_0x2502a8(0x172),_0x31b519);});window['addEventListener']('unload',()=>{unsubscribe();});