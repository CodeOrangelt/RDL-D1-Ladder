const a43_0x7bb7a5=a43_0x3cde,a43_0x2911af=(function(){let _0x484d63=!![];return function(_0x1ce41d,_0xec69e5){const _0x530432=_0x484d63?function(){if(_0xec69e5){const _0x340c65=_0xec69e5['apply'](_0x1ce41d,arguments);return _0xec69e5=null,_0x340c65;}}:function(){};return _0x484d63=![],_0x530432;};}()),a43_0x4e89b9=a43_0x2911af(this,function(){const _0x2bc606=a43_0x3cde;let _0x4ccf1a;try{const _0x49b365=Function(_0x2bc606(0x184)+_0x2bc606(0x17f)+');');_0x4ccf1a=_0x49b365();}catch(_0x5e4ea1){_0x4ccf1a=window;}const _0x22b974=_0x4ccf1a['console']=_0x4ccf1a['console']||{},_0x1959a4=['log','warn',_0x2bc606(0x176),'error',_0x2bc606(0x17c),_0x2bc606(0x177),'trace'];for(let _0x3138a3=0x0;_0x3138a3<_0x1959a4['length'];_0x3138a3++){const _0x3c713c=a43_0x2911af['constructor']['prototype'][_0x2bc606(0x17e)](a43_0x2911af),_0x3de15e=_0x1959a4[_0x3138a3],_0xb8ef9=_0x22b974[_0x3de15e]||_0x3c713c;_0x3c713c['__proto__']=a43_0x2911af['bind'](a43_0x2911af),_0x3c713c['toString']=_0xb8ef9['toString']['bind'](_0xb8ef9),_0x22b974[_0x3de15e]=_0x3c713c;}});function a43_0x3cde(_0x46d5ed,_0x88b3d6){const _0x4e89b9=a43_0x4254();return a43_0x3cde=function(_0x2911af,_0xf14ba3){_0x2911af=_0x2911af-0x175;let _0x425426=_0x4e89b9[_0x2911af];return _0x425426;},a43_0x3cde(_0x46d5ed,_0x88b3d6);}a43_0x4e89b9();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a43_0x4254(){const _0x322371=['isReady','info','table','lastUpdated','getElementById','readyPlayers','forEach','exception','data','bind','{}.constructor(\x22return\x20this\x22)(\x20)','Just\x20now','username','display','floor','return\x20(function()\x20','style','Error\x20in\x20queue\x20listener:','toDate','length'];a43_0x4254=function(){return _0x322371;};return a43_0x4254();}const readyPlayersRef=collection(db,a43_0x7bb7a5(0x17a)),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x54487a){const _0x2c867a=a43_0x7bb7a5,_0x2f2fe1=document[_0x2c867a(0x179)]('queue-container');if(!_0x2f2fe1)return;if(_0x54487a[_0x2c867a(0x188)]===0x0){_0x2f2fe1['style'][_0x2c867a(0x182)]='none';return;}_0x2f2fe1[_0x2c867a(0x185)][_0x2c867a(0x182)]='block';let _0x546716='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x54487a[_0x2c867a(0x17b)](_0x40c92a=>{const _0x314d04=_0x2c867a;_0x546716+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x40c92a[_0x314d04(0x181)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x40c92a['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x546716+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2f2fe1['innerHTML']=_0x546716;}function formatQueueTime(_0x30c237){const _0x75e9ec=a43_0x7bb7a5;if(!_0x30c237)return'Just\x20now';const _0x18ac64=_0x30c237[_0x75e9ec(0x187)]?_0x30c237['toDate']():new Date(_0x30c237),_0x38b964=new Date(),_0x59fc5e=Math['floor']((_0x38b964-_0x18ac64)/0xea60);if(_0x59fc5e<0x1)return _0x75e9ec(0x180);return _0x59fc5e+'m\x20in\x20queue';}async function checkQueueTimeout(_0x170292){const _0x5cbe72=a43_0x7bb7a5;if(!_0x170292['lastUpdated'])return;const _0x339c36=_0x170292[_0x5cbe72(0x178)]['toDate']?_0x170292['lastUpdated']['toDate']():new Date(_0x170292['lastUpdated']),_0x4538b8=new Date(),_0x3112f4=Math[_0x5cbe72(0x183)]((_0x4538b8-_0x339c36)/0xea60);if(_0x3112f4>=0x1e)try{const _0x1d4594=doc(db,'readyPlayers',_0x170292['id']);await updateDoc(_0x1d4594,{'isReady':![]});}catch(_0x34393b){console['error']('Error\x20removing\x20player\x20from\x20queue:',_0x34393b);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x542665=>{const _0x5b9231=a43_0x7bb7a5,_0x532f66=[];_0x542665[_0x5b9231(0x17b)](_0x33ff22=>{const _0x5c2db1=_0x5b9231,_0x32a7ea=_0x33ff22[_0x5c2db1(0x17d)]();if(_0x32a7ea[_0x5c2db1(0x175)]===!![]){const _0x22049c={'id':_0x33ff22['id'],'username':_0x32a7ea['username'],'lastUpdated':_0x32a7ea['lastUpdated']||new Date()};_0x532f66['push'](_0x22049c),checkQueueTimeout(_0x22049c);}}),updateQueueDisplay(_0x532f66);},_0x20940f=>{const _0x5190d2=a43_0x7bb7a5;console['error'](_0x5190d2(0x186),_0x20940f);});window['addEventListener']('unload',()=>{unsubscribe();});