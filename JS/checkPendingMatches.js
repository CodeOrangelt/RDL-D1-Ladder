const a10_0x5a57db=a10_0x1e9e,a10_0x4b0032=(function(){let _0x426f22=!![];return function(_0x1b5cef,_0x5d69c9){const _0x540683=_0x426f22?function(){if(_0x5d69c9){const _0x19151b=_0x5d69c9['apply'](_0x1b5cef,arguments);return _0x5d69c9=null,_0x19151b;}}:function(){};return _0x426f22=![],_0x540683;};}()),a10_0xa3f71b=a10_0x4b0032(this,function(){const _0xc9f342=a10_0x1e9e,_0x254901=function(){const _0x21cebf=a10_0x1e9e;let _0xb2cb24;try{_0xb2cb24=Function('return\x20(function()\x20'+_0x21cebf(0x1d2)+');')();}catch(_0x43d122){_0xb2cb24=window;}return _0xb2cb24;},_0x28c40a=_0x254901(),_0x25da58=_0x28c40a[_0xc9f342(0x1d3)]=_0x28c40a['console']||{},_0x422294=['log','warn',_0xc9f342(0x1d5),'error','exception',_0xc9f342(0x1e5),'trace'];for(let _0x438cea=0x0;_0x438cea<_0x422294[_0xc9f342(0x1e4)];_0x438cea++){const _0x42e053=a10_0x4b0032['constructor']['prototype']['bind'](a10_0x4b0032),_0x53541d=_0x422294[_0x438cea],_0x229f13=_0x25da58[_0x53541d]||_0x42e053;_0x42e053['__proto__']=a10_0x4b0032['bind'](a10_0x4b0032),_0x42e053[_0xc9f342(0x1ce)]=_0x229f13['toString']['bind'](_0x229f13),_0x25da58[_0x53541d]=_0x42e053;}});a10_0xa3f71b();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10_0x5a57db(0x1e2),CACHE_EXPIRY=0xea60;function a10_0x4ae7(){const _0x1d4eb6=['approved','playersD3','removeItem','10px','empty','currentUser','disconnect','docs','width','username','winnerUsername','toString','block','email','userId','{}.constructor(\x22return\x20this\x22)(\x20)','console','none','info','all','style','currentUsername','DOMContentLoaded','data','getItem','2px\x20solid\x20white','setItem','position','players','users','uid','pendingMatchesCache','observe','length','table','playersD2'];a10_0x4ae7=function(){return _0x1d4eb6;};return a10_0x4ae7();}export async function checkPendingMatches(_0x171c65=![]){const _0x4613e0=a10_0x5a57db,_0x4f5dc9=Date['now'](),_0x4399e6=checkNotificationCache();if(_0x4399e6!==null&&!_0x171c65){updateNotificationDot(_0x4399e6);if(_0x4f5dc9-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x4f5dc9;const _0x368161=auth[_0x4613e0(0x1c8)];if(!_0x368161){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x2b8bae,_0x77fc62,_0x870a6c]=await Promise['all']([checkForPendingMatchesInCollection(_0x368161,'pendingMatches'),checkForPendingMatchesInCollection(_0x368161,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x368161,'pendingMatchesD3')]),_0x21ee29=_0x2b8bae||_0x77fc62||_0x870a6c;updateNotificationDot(_0x21ee29),updateNotificationCache(_0x21ee29);}catch(_0x1faf5d){console['error']('Error\x20checking\x20pending\x20matches:',_0x1faf5d);}}async function checkForPendingMatchesInCollection(_0x2e7055,_0x4f43ea){const _0x32824a=a10_0x5a57db,_0x4e3298=_0x2e7055['uid'],_0x28d2ab=_0x2e7055[_0x32824a(0x1d0)],_0x57203d=query(collection(db,_0x4f43ea),where('winnerId','==',_0x4e3298),where('approved','==',![])),_0x23651e=await getDocs(_0x57203d);if(!_0x23651e['empty'])return!![];if(_0x28d2ab){const _0xb56518=query(collection(db,_0x4f43ea),where('winnerEmail','==',_0x28d2ab),where(_0x32824a(0x1c3),'==',![])),_0x88c171=await getDocs(_0xb56518);if(!_0x88c171[_0x32824a(0x1c7)])return!![];}let _0x3387e9=await getUsernameFromAllSources(_0x2e7055);if(_0x3387e9){const _0x41efb5=query(collection(db,_0x4f43ea),where(_0x32824a(0x1cd),'==',_0x3387e9),where('approved','==',![])),_0x412920=await getDocs(_0x41efb5);if(!_0x412920['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x5bdf76){const _0x33ccfb=a10_0x5a57db,_0x283527=localStorage[_0x33ccfb(0x1db)]('currentUsername');if(_0x283527)return _0x283527;try{const [_0x5f5d7f,_0x3bfe75,_0x44863e]=await Promise[_0x33ccfb(0x1d6)]([getDocs(query(collection(db,_0x33ccfb(0x1df)),where(_0x33ccfb(0x1d1),'==',_0x5bdf76['uid']))),getDocs(query(collection(db,_0x33ccfb(0x1e6)),where('userId','==',_0x5bdf76['uid']))),getDocs(query(collection(db,_0x33ccfb(0x1c4)),where('userId','==',_0x5bdf76['uid'])))]);if(!_0x5f5d7f['empty']){const _0x1c25cd=_0x5f5d7f['docs'][0x0]['data']()[_0x33ccfb(0x1cc)];return localStorage['setItem']('currentUsername',_0x1c25cd),_0x1c25cd;}if(!_0x3bfe75['empty']){const _0x2319d9=_0x3bfe75[_0x33ccfb(0x1ca)][0x0][_0x33ccfb(0x1da)]()['username'];return localStorage['setItem']('currentUsername',_0x2319d9),_0x2319d9;}if(!_0x44863e[_0x33ccfb(0x1c7)]){const _0x58bbed=_0x44863e['docs'][0x0]['data']()['username'];return localStorage[_0x33ccfb(0x1dd)]('currentUsername',_0x58bbed),_0x58bbed;}const _0x628eeb=await getDoc(doc(db,_0x33ccfb(0x1e0),_0x5bdf76[_0x33ccfb(0x1e1)]));if(_0x628eeb['exists']()&&_0x628eeb['data']()[_0x33ccfb(0x1cc)]){const _0x59a6df=_0x628eeb['data']()['username'];return localStorage['setItem']('currentUsername',_0x59a6df),_0x59a6df;}}catch(_0x3c26f0){console['error']('Error\x20fetching\x20username:',_0x3c26f0);}if(_0x5bdf76['email'])return _0x5bdf76['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x408644){const _0xf776ff=a10_0x5a57db,_0x1155f5={'status':_0x408644,'timestamp':Date['now']()};localStorage[_0xf776ff(0x1dd)](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x1155f5));}function checkNotificationCache(){const _0x3ece3c=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x3ece3c)return null;try{const {status:_0x1326cf,timestamp:_0x464c97}=JSON['parse'](_0x3ece3c),_0x5f4c45=Date['now']();if(_0x5f4c45-_0x464c97<CACHE_EXPIRY)return _0x1326cf;}catch(_0x33dd22){}return null;}export function updateNotificationDot(_0x537d2c){const _0x263119=a10_0x5a57db,_0x1b2213=new MutationObserver((_0x2804a7,_0x1290bf)=>{const _0x4988d6=a10_0x1e9e,_0x41324b=document['getElementById']('report-match-notification');_0x41324b&&(updateDotStyle(_0x41324b,_0x537d2c),_0x1290bf[_0x4988d6(0x1c9)]());});_0x1b2213[_0x263119(0x1e3)](document['body'],{'childList':!![],'subtree':!![]});const _0x26b643=document['getElementById']('report-match-notification');_0x26b643&&(updateDotStyle(_0x26b643,_0x537d2c),_0x1b2213[_0x263119(0x1c9)]()),setTimeout(()=>_0x1b2213['disconnect'](),0x1388);}function updateDotStyle(_0x34e1e6,_0x4a049c){const _0x290c38=a10_0x5a57db;_0x4a049c?(_0x34e1e6['style']['display']=_0x290c38(0x1cf),_0x34e1e6[_0x290c38(0x1d7)]['backgroundColor']='#ff3b30',_0x34e1e6['style'][_0x290c38(0x1cb)]='10px',_0x34e1e6[_0x290c38(0x1d7)]['height']=_0x290c38(0x1c6),_0x34e1e6['style'][_0x290c38(0x1de)]='absolute',_0x34e1e6[_0x290c38(0x1d7)]['top']='-5px',_0x34e1e6[_0x290c38(0x1d7)]['right']='-8px',_0x34e1e6['style']['borderRadius']='50%',_0x34e1e6[_0x290c38(0x1d7)]['border']=_0x290c38(0x1dc),_0x34e1e6[_0x290c38(0x1d7)]['zIndex']='999'):_0x34e1e6['style']['display']=_0x290c38(0x1d4);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}function a10_0x1e9e(_0x1fa8dd,_0xc67b1f){const _0xa3f71b=a10_0x4ae7();return a10_0x1e9e=function(_0x4b0032,_0x45e24c){_0x4b0032=_0x4b0032-0x1c3;let _0x4ae70f=_0xa3f71b[_0x4b0032];return _0x4ae70f;},a10_0x1e9e(_0x1fa8dd,_0xc67b1f);}document['addEventListener'](a10_0x5a57db(0x1d9),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0xc8cf6a=a10_0x1e9e;localStorage[_0xc8cf6a(0x1c5)](_0xc8cf6a(0x1d8)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});