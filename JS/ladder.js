const a25_0x143dde=a25_0x3cca,a25_0x5b0fcc=(function(){let _0x1c58b7=!![];return function(_0x8b39ea,_0x2ec081){const _0x292c93=_0x1c58b7?function(){if(_0x2ec081){const _0x163553=_0x2ec081['apply'](_0x8b39ea,arguments);return _0x2ec081=null,_0x163553;}}:function(){};return _0x1c58b7=![],_0x292c93;};}()),a25_0x52e635=a25_0x5b0fcc(this,function(){const _0x210cd8=a25_0x3cca;let _0x412ef4;try{const _0x1e376e=Function('return\x20(function()\x20'+_0x210cd8(0xd9)+');');_0x412ef4=_0x1e376e();}catch(_0x1d4662){_0x412ef4=window;}const _0x324846=_0x412ef4['console']=_0x412ef4[_0x210cd8(0xc5)]||{},_0x1dc267=['log','warn','info',_0x210cd8(0xbe),_0x210cd8(0x11f),_0x210cd8(0x129),'trace'];for(let _0x198d04=0x0;_0x198d04<_0x1dc267['length'];_0x198d04++){const _0x5adced=a25_0x5b0fcc['constructor']['prototype'][_0x210cd8(0xde)](a25_0x5b0fcc),_0x3a721e=_0x1dc267[_0x198d04],_0x36b2a7=_0x324846[_0x3a721e]||_0x5adced;_0x5adced['__proto__']=a25_0x5b0fcc['bind'](a25_0x5b0fcc),_0x5adced['toString']=_0x36b2a7['toString']['bind'](_0x36b2a7),_0x324846[_0x3a721e]=_0x5adced;}});a25_0x52e635();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';import{getTokensByUsernames,getPrimaryDisplayToken}from'./tokens.js';const auth=getAuth();let activeListeners=[];function a25_0x3cca(_0x13fc1a,_0x3d23c6){const _0x52e635=a25_0x5cde();return a25_0x3cca=function(_0x5b0fcc,_0x9f232d){_0x5b0fcc=_0x5b0fcc-0xba;let _0x5cde08=_0x52e635[_0x5b0fcc];return _0x5cde08;},a25_0x3cca(_0x13fc1a,_0x3d23c6);}export async function loadLadderData(_0x5ee527=0x1){const _0x394518=a25_0x3cca;try{document[_0x394518(0x100)]('loading-indicator')[_0x394518(0xfb)][_0x394518(0x12a)]=_0x394518(0xee);const _0x179f6f=await getLadderData(_0x5ee527);_0x179f6f[_0x394518(0x11e)]((_0x26a8aa,_0x23801c)=>_0x23801c['elo']-_0x26a8aa['elo']);const _0x37f2f0=_0x179f6f['map'](_0x1e242e=>_0x1e242e['id']),_0xdef829=await getEloHistoryBatch(_0x37f2f0,_0x5ee527),_0x4a5e7e=_0x179f6f['map']((_0x181f47,_0x18ffbf)=>{const _0x25a073=_0x394518,_0x1d9ac2=_0xdef829[_0x181f47['id']]||[],_0x24468f=_0x1d9ac2['sort']((_0xb4c177,_0x4ba925)=>new Date(_0x4ba925['date'])-new Date(_0xb4c177[_0x25a073(0xe8)]))['slice'](0x0,0x5);return{..._0x181f47,'rank':_0x18ffbf+0x1,'lastMatches':_0x24468f,'recentActivity':_0x24468f['length']>0x0};});renderLadder(_0x4a5e7e),setupRealTimeUpdates(_0x5ee527);}catch(_0x1a6933){console['error']('Error\x20loading\x20ladder\x20data:',_0x1a6933),document['getElementById']('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document[_0x394518(0x100)](_0x394518(0x11c))['style'][_0x394518(0x12a)]='none';}}function setupRealTimeUpdates(_0x416cbb=0x1){const _0x454eb1=a25_0x3cca;activeListeners['forEach'](_0x83826d=>_0x83826d()),activeListeners=[];const _0x35dd9c=_0x416cbb===0x1?'players':_0x454eb1(0xf3)+_0x416cbb,_0x3487fc=_0x416cbb===0x1?_0x454eb1(0xce):_0x454eb1(0x142)+_0x416cbb,_0x34dddd=new Date();_0x34dddd['setDate'](_0x34dddd['getDate']()-0x1);const _0x165178=setupEfficientListener(_0x3487fc,[where('date','>=',_0x34dddd['toISOString']()),limit(0xa),orderBy(_0x454eb1(0xe8),'desc')],async _0xe3d15a=>{_0xe3d15a['length']>0x0&&await loadLadderData(_0x416cbb);});activeListeners['push'](_0x165178);}export function cleanupListeners(){const _0x425bf7=a25_0x3cca;activeListeners[_0x425bf7(0x137)](_0x48d0ed=>_0x48d0ed()),activeListeners=[];}function renderLadder(_0x5e405a){const _0x2c439e=document['getElementById']('ladder-container');_0x2c439e['innerHTML']='',_0x5e405a['forEach'](_0x42de1a=>{const _0xd63d6c=a25_0x3cca,_0x323ea2=document['createElement'](_0xd63d6c(0x12f));_0x323ea2[_0xd63d6c(0xf7)]='ladder-player',_0x323ea2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x42de1a[_0xd63d6c(0x12c)]+_0xd63d6c(0x125)+(_0x42de1a[_0xd63d6c(0xda)]||_0x42de1a['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x42de1a[_0xd63d6c(0xc9)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x42de1a['recentActivity']?'active':'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x42de1a[_0xd63d6c(0xe1)]?_0xd63d6c(0x124):'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2c439e[_0xd63d6c(0xdd)](_0x323ea2);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x359f95=![]){const _0x52a35f=a25_0x3cca,_0x5eef9e=document['querySelector']('#ladder\x20tbody');if(!_0x5eef9e){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x5eef9e['innerHTML']=_0x52a35f(0xbf);try{const _0x28d40c=Date[_0x52a35f(0x103)]();if(!_0x359f95&&playerCache['data']&&_0x28d40c-playerCache[_0x52a35f(0xf0)]<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x26344b=collection(db,'players'),_0xef2cd9=await getDocs(_0x26344b),_0x565548=[];_0xef2cd9['forEach'](_0x4bf5cb=>{const _0x126e14=_0x4bf5cb['data']();_0x565548['push']({..._0x126e14,'id':_0x4bf5cb['id'],'elo':_0x126e14['eloRating']||0x0,'position':_0x126e14['position']||Number['MAX_SAFE_INTEGER']});});const _0x20a96e=collection(db,_0x52a35f(0x10e)),_0x16c4fa=await getDocs(_0x20a96e),_0x172be3=new Map();_0x16c4fa['forEach'](_0x2ece6b=>{const _0x46efa9=_0x52a35f,_0x8c7bc1=_0x2ece6b['data']();_0x8c7bc1['username']&&_0x172be3[_0x46efa9(0xdb)](_0x8c7bc1[_0x46efa9(0xda)][_0x46efa9(0x116)](),_0x8c7bc1);}),_0x565548['forEach'](_0xe09f63=>{const _0x714e89=_0xe09f63['username']?.['toLowerCase']();if(_0x714e89&&_0x172be3['has'](_0x714e89)){const _0x523183=_0x172be3['get'](_0x714e89);_0x523183['country']&&(_0xe09f63['country']=_0x523183['country']['toLowerCase']());}});const _0x2cf253=_0x565548[_0x52a35f(0xdf)](_0x53ba6a=>_0x53ba6a['username']),_0x3520f4=await fetchBatchMatchStats(_0x2cf253);_0x565548['sort']((_0x876aab,_0x557a83)=>{const _0x2bbd7c=_0x52a35f,_0x25f364=_0x3520f4[_0x2bbd7c(0xe7)](_0x876aab['username'])?.['totalMatches']||0x0,_0x1c251a=_0x3520f4[_0x2bbd7c(0xe7)](_0x557a83[_0x2bbd7c(0xda)])?.[_0x2bbd7c(0x13f)]||0x0;if(_0x25f364===0x0!==(_0x1c251a===0x0))return _0x25f364===0x0?0x1:-0x1;return(_0x876aab['position']||0x3e7)-(_0x557a83['position']||0x3e7);}),_0x565548[_0x52a35f(0x137)]((_0x11edf9,_0x59ad6f)=>{_0x11edf9['position']=_0x59ad6f+0x1;}),playerCache['data']=_0x565548,playerCache[_0x52a35f(0xf0)]=_0x28d40c,updateLadderDisplay(_0x565548,_0x3520f4);}catch(_0x38ebb3){console[_0x52a35f(0xbe)](_0x52a35f(0x139),_0x38ebb3),_0x5eef9e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x38ebb3[_0x52a35f(0x117)]+_0x52a35f(0x138);}}function a25_0x5cde(){const _0x416b7e=['td:nth-child(3)','loserScore','disabled','target','error','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','#ladder\x20tbody','players','title','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','#CD7F32','console','active','#FFD700','cursor','elo','Unranked','Gold','Error\x20checking\x20','none','matches','kda','Error\x20fetching\x20tokens:','d3-switch','addEventListener','d3-ladder-container','Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents','eloHistory','\x20ladder','not-allowed','d1-ladder-container','{}.constructor(\x22return\x20this\x22)(\x20)','username','set','join','appendChild','bind','map','council','recentActivity','duos','toFixed','then','querySelector','eloRating','get','date','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20','length','0.85em','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','opacity','block','#50C878','timestamp','duos-ladder-container','owner','playersD','tokenImage','You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder','approvedMatches','className','change','innerHTML','Error\x20fetching\x20ELO\x20history:','style','uid','equipped','playerUsername','DOMContentLoaded','getElementById','<img\x20src=\x22','gray','now','#b9f1fc','add','teammate','fontSize','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','textContent','currentUser','<img\x20src=\x22../images/flags/','</span>.\x20Challenge\x20other\x20teams!','querySelectorAll','userProfiles','country','playersD3','classList','admin-only-message','Error\x20finding\x20best\x20opponent:','Error\x20finding\x20recommended\x20opponent','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','toLowerCase','message','data','elo-recommendation-text-d1','cssText','onAuthStateChanged','loading-indicator','losses','sort','exception','roleName','hasTeam','Recommendation\x20element\x20for\x20','click','Active','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20(equipped:\x20','table','display','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','rank','preventDefault','totalKills','div','Error\x20fetching\x20batch\x20match\x20stats:','parentNode','playersD2','remove','log','totalDeaths','0.5','forEach','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20ladder:','warn','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','size','toUpperCase','totalMatches','newElo','winRate','matchesD','.trend-indicator','push'];a25_0x5cde=function(){return _0x416b7e;};return a25_0x5cde();}async function fetchBatchMatchStats(_0x38e697){const _0x1de83a=a25_0x3cca,_0x1c5f65=new Map();try{_0x38e697[_0x1de83a(0x137)](_0x5d1425=>{const _0x5ca26c=_0x1de83a;_0x1c5f65[_0x5ca26c(0xdb)](_0x5d1425,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x502c92=collection(db,_0x1de83a(0xf6)),_0x8d35ee=await getDocs(_0x502c92);_0x8d35ee['forEach'](_0x3084c5=>{const _0x1f8a8c=_0x1de83a,_0x2d386c=_0x3084c5['data'](),_0x105035=_0x2d386c['winnerUsername'],_0x5e189f=_0x2d386c['loserUsername'];if(_0x38e697['includes'](_0x105035)){const _0x480b46=_0x1c5f65['get'](_0x105035);_0x480b46['wins']++,_0x480b46[_0x1f8a8c(0x13f)]++,_0x480b46['totalKills']+=parseInt(_0x2d386c['winnerScore'])||0x0,_0x480b46[_0x1f8a8c(0x135)]+=parseInt(_0x2d386c['loserScore'])||0x0;}if(_0x38e697['includes'](_0x5e189f)){const _0x22196a=_0x1c5f65[_0x1f8a8c(0xe7)](_0x5e189f);_0x22196a[_0x1f8a8c(0x11d)]++,_0x22196a[_0x1f8a8c(0x13f)]++,_0x22196a[_0x1f8a8c(0x12e)]+=parseInt(_0x2d386c[_0x1f8a8c(0xbb)])||0x0,_0x22196a['totalDeaths']+=parseInt(_0x2d386c['winnerScore'])||0x0;}}),_0x38e697['forEach'](_0x4b0a75=>{const _0x1d4a04=_0x1de83a,_0x14ef8b=_0x1c5f65['get'](_0x4b0a75);_0x14ef8b['kda']=_0x14ef8b['totalDeaths']>0x0?(_0x14ef8b['totalKills']/_0x14ef8b[_0x1d4a04(0x135)])[_0x1d4a04(0xe3)](0x2):_0x14ef8b['totalKills']['toFixed'](0x2),_0x14ef8b['winRate']=_0x14ef8b['totalMatches']>0x0?(_0x14ef8b['wins']/_0x14ef8b['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x1a6bbc){console['error'](_0x1de83a(0x130),_0x1a6bbc);}return _0x1c5f65;}function createPlayerRow(_0x11cef9,_0x4772a9){const _0x24979b=a25_0x3cca,_0x11d10a=parseFloat(_0x11cef9[_0x24979b(0xc9)])||0x0;let _0x503cce=_0x24979b(0x102);if(_0x11d10a>=0x7d0)_0x503cce='#50C878';else{if(_0x11d10a>=0x708)_0x503cce='#FFD700';else{if(_0x11d10a>=0x640)_0x503cce='#b9f1fc';else _0x11d10a>=0x578&&(_0x503cce='#CD7F32');}}let _0x42dbba='';return _0x11cef9[_0x24979b(0x10f)]&&(_0x42dbba=_0x24979b(0x10b)+_0x11cef9['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x11cef9['country']+_0x24979b(0x13b)),_0x24979b(0x126)+_0x11cef9['position']+_0x24979b(0xc3)+encodeURIComponent(_0x11cef9['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x503cce+_0x24979b(0x127)+_0x11cef9['username']+_0x24979b(0xec)+_0x42dbba+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x503cce+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x11d10a+_0x24979b(0x12b)+_0x4772a9['totalMatches']+_0x24979b(0x13c)+_0x4772a9['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4772a9['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4772a9[_0x24979b(0xcf)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4772a9['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x3099cb){const _0x517ecb=a25_0x3cca;if(_0x3099cb>=0x7d0)return'Emerald';if(_0x3099cb>=0x708)return _0x517ecb(0xcb);if(_0x3099cb>=0x640)return'Silver';if(_0x3099cb>=0x578)return'Bronze';return _0x517ecb(0xca);}async function getPlayersLastEloChanges(_0x575466){const _0x3c17f6=a25_0x3cca,_0x49508a=new Map();_0x575466[_0x3c17f6(0x137)](_0x5a3f9f=>{const _0x59eedf=_0x3c17f6;_0x49508a[_0x59eedf(0xdb)](_0x5a3f9f,0x0);});try{const _0x449fbc=collection(db,'players'),_0x892cad=await getDocs(_0x449fbc),_0x470bcb=new Map(),_0x383817=new Map();_0x892cad['forEach'](_0xf69637=>{const _0x49109c=_0x3c17f6,_0x4513df=_0xf69637['data']();_0x4513df['username']&&(_0x470bcb['set'](_0xf69637['id'],_0x4513df[_0x49109c(0xda)]),_0x383817['set'](_0x4513df[_0x49109c(0xda)]['toLowerCase'](),_0xf69637['id']));});const _0x218fa0=collection(db,_0x3c17f6(0xd5)),_0x7d1dd9=query(_0x218fa0,orderBy(_0x3c17f6(0xf0),'desc'),limit(0x12c)),_0x474ca3=await getDocs(_0x7d1dd9);if(_0x474ca3['empty'])return console[_0x3c17f6(0x134)]('ELO\x20history\x20collection\x20is\x20empty'),_0x49508a;if(_0x474ca3['docs'][_0x3c17f6(0xea)]>0x0){const _0x2e786e=_0x474ca3['docs'][0x0]['data']();if(_0x2e786e['player']&&_0x470bcb['has'](_0x2e786e['player'])){}}const _0x4baf2b=new Map();let _0x2ffef9=0x0;_0x474ca3[_0x3c17f6(0x137)](_0x12cd0b=>{const _0x540b47=_0x3c17f6,_0x57ac8d=_0x12cd0b['data']();let _0x16f7f5=null;if(_0x57ac8d['player']&&_0x470bcb['has'](_0x57ac8d['player']))_0x16f7f5=_0x470bcb[_0x540b47(0xe7)](_0x57ac8d['player']);else{if(_0x57ac8d['username']&&_0x383817['has'](_0x57ac8d['username']['toLowerCase']()))_0x16f7f5=_0x57ac8d['username'];else _0x57ac8d['playerUsername']&&_0x383817['has'](_0x57ac8d['playerUsername']['toLowerCase']())&&(_0x16f7f5=_0x57ac8d[_0x540b47(0xfe)]);}_0x16f7f5&&_0x575466['includes'](_0x16f7f5)&&(_0x2ffef9++,!_0x4baf2b['has'](_0x16f7f5)&&_0x4baf2b['set'](_0x16f7f5,[]),_0x4baf2b['get'](_0x16f7f5)[_0x540b47(0x144)]({..._0x57ac8d,'timestamp':_0x57ac8d['timestamp']?.['seconds']||0x0}));}),_0x4baf2b['forEach']((_0x4f61db,_0x14b708)=>{const _0x3b5420=_0x3c17f6;if(_0x4f61db['length']>0x0){_0x4f61db['sort']((_0xd8ca1f,_0x4bcfc4)=>_0x4bcfc4[_0x3b5420(0xf0)]-_0xd8ca1f['timestamp']);const _0x4a1fff=_0x4f61db['find'](_0x2c2aff=>_0x2c2aff[_0x3b5420(0xf8)]!==undefined||_0x2c2aff['newElo']!==undefined&&_0x2c2aff['previousElo']!==undefined||_0x2c2aff['newEloRating']!==undefined&&_0x2c2aff['oldEloRating']!==undefined);if(_0x4a1fff){let _0x23a7e1;if(_0x4a1fff['change']!==undefined)_0x23a7e1=parseInt(_0x4a1fff['change']);else{if(_0x4a1fff['newElo']!==undefined&&entry['previousElo']!==undefined)_0x23a7e1=parseInt(_0x4a1fff[_0x3b5420(0x140)])-parseInt(_0x4a1fff['previousElo']);else _0x4a1fff['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x23a7e1=parseInt(_0x4a1fff['newEloRating'])-parseInt(_0x4a1fff['oldEloRating']));}!isNaN(_0x23a7e1)&&_0x23a7e1!==0x0&&_0x49508a['set'](_0x14b708,_0x23a7e1);}}});}catch(_0x5bade7){console['error'](_0x3c17f6(0xfa),_0x5bade7);}return _0x49508a;}function createPlayerRowWithToken(_0x2d5b94,_0x4b1d65,_0x57790c){const _0x4f60dc=a25_0x3cca,_0xce673a=parseFloat(_0x2d5b94['elo'])||0x0;let _0x24c9cc='gray';if(_0xce673a>=0x7d0)_0x24c9cc=_0x4f60dc(0xef);else{if(_0xce673a>=0x708)_0x24c9cc=_0x4f60dc(0xc7);else{if(_0xce673a>=0x640)_0x24c9cc=_0x4f60dc(0x104);else _0xce673a>=0x578&&(_0x24c9cc='#CD7F32');}}let _0x345d41='';_0x2d5b94[_0x4f60dc(0x10f)]&&(_0x345d41='<img\x20src=\x22../images/flags/'+_0x2d5b94['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2d5b94[_0x4f60dc(0x10f)]+_0x4f60dc(0x108));let _0x49b21c='';return _0x57790c&&(_0x49b21c=_0x4f60dc(0x101)+_0x57790c[_0x4f60dc(0xf4)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x57790c['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x57790c['tokenName']+'\x20'+(_0x57790c[_0x4f60dc(0xfd)]?'(Equipped)':'')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2d5b94['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x2d5b94['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x24c9cc+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2d5b94['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x345d41+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x49b21c+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x24c9cc+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0xce673a+_0x4f60dc(0x12b)+_0x4b1d65['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4b1d65['wins']+_0x4f60dc(0x13c)+_0x4b1d65['losses']+_0x4f60dc(0x13c)+_0x4b1d65['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4b1d65[_0x4f60dc(0x141)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function updateLadderDisplay(_0xc39b4d,_0x343dc6=null){const _0x27056e=a25_0x3cca,_0x196ec7=document['querySelector'](_0x27056e(0xc0));if(!_0x196ec7){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x4960fa=document[_0x27056e(0xe5)]('#ladder\x20thead\x20tr');_0x4960fa&&(_0x4960fa['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x4b46fc=_0xc39b4d['map'](_0xde3ff4=>_0xde3ff4['username']);!_0x343dc6&&(_0x343dc6=await fetchBatchMatchStats(_0x4b46fc));let _0x47e3ee=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x47e3ee=await getTokensByUsernames(_0x4b46fc),console['log']('🪙\x20Loaded\x20fresh\x20tokens\x20for',_0x47e3ee[_0x27056e(0x13d)],_0x27056e(0xc1)),_0x47e3ee['forEach']((_0x47b2c2,_0xc3defa)=>{const _0x830b53=_0x27056e,_0x5e13e3=_0x47b2c2['find'](_0xb042da=>_0xb042da[_0x830b53(0xfd)]);_0x5e13e3&&console['log']('🎯\x20'+_0xc3defa+'\x20has\x20equipped:\x20'+_0x5e13e3['tokenName']);});}catch(_0x2657ab){console[_0x27056e(0xbe)](_0x27056e(0xd0),_0x2657ab);}const _0x3ed48c=_0xc39b4d['map'](_0x437896=>{const _0x4cf13a=_0x27056e,_0x6f649d=_0x343dc6['get'](_0x437896['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x28f473=_0x47e3ee[_0x4cf13a(0xe7)](_0x437896['username'])||[],_0x4c196e=getPrimaryDisplayToken(_0x28f473);return _0x4c196e&&console['log']('🎨\x20'+_0x437896[_0x4cf13a(0xda)]+'\x20displaying\x20token:\x20'+_0x4c196e['tokenName']+_0x4cf13a(0x128)+_0x4c196e[_0x4cf13a(0xfd)]+')'),createPlayerRowWithToken(_0x437896,_0x6f649d,_0x4c196e);})[_0x27056e(0xdc)]('');_0x196ec7[_0x27056e(0xf9)]=_0x3ed48c,getPlayersLastEloChanges(_0x4b46fc)[_0x27056e(0xe4)](_0x46cd42=>{const _0x99bbf4=_0x27056e,_0x26fd3a=new Map();_0x196ec7[_0x99bbf4(0x10d)]('tr')['forEach']((_0x32ee8f,_0x4bab63)=>{_0x4bab63<_0x4b46fc['length']&&_0x26fd3a['set'](_0x4b46fc[_0x4bab63],_0x32ee8f);}),_0x46cd42[_0x99bbf4(0x137)]((_0x29bb0f,_0x395cdc)=>{const _0x579825=_0x99bbf4,_0x33c604=_0x26fd3a[_0x579825(0xe7)](_0x395cdc);if(_0x33c604&&_0x29bb0f!==0x0){const _0x105b8b=_0x33c604['querySelector'](_0x579825(0xba));if(_0x105b8b){const _0x46885f=_0x29bb0f>0x0?'+'+_0x29bb0f:''+_0x29bb0f,_0x10e395=_0x105b8b['querySelector'](_0x579825(0x143));_0x10e395&&(_0x10e395['textContent']=_0x46885f,_0x10e395['style']['color']=_0x29bb0f>0x0?'#4CAF50':'#F44336',_0x10e395['style']['fontWeight']='bold',_0x10e395['style'][_0x579825(0x107)]=_0x579825(0xeb),_0x10e395['style'][_0x579825(0x12a)]='inline',_0x10e395['style']['visibility']='visible',_0x10e395['style']['opacity']='1');}}});})['catch'](_0x27b51c=>console[_0x27056e(0xbe)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x27b51c));}function initLadderToggles(){const _0xbe27e5=a25_0x3cca,_0x3da0e2=document['getElementById']('d1-switch'),_0x157a3f=document[_0xbe27e5(0x100)]('d2-switch'),_0xdaff65=document['getElementById'](_0xbe27e5(0xd1)),_0x11d338=document[_0xbe27e5(0x100)]('duos-switch'),_0x280831=document['getElementById'](_0xbe27e5(0xd8)),_0x5db6da=document['getElementById']('d2-ladder-container'),_0x81e6cc=document['getElementById']('d3-ladder-container'),_0x21c853=document['getElementById']('duos-ladder-container');function _0x28ca99(){const _0x2653f7=_0xbe27e5;if(_0x280831)_0x280831[_0x2653f7(0x111)]['remove']('active');if(_0x5db6da)_0x5db6da['classList'][_0x2653f7(0x133)]('active');if(_0x81e6cc)_0x81e6cc['classList']['remove'](_0x2653f7(0xc6));if(_0x21c853)_0x21c853[_0x2653f7(0xfb)][_0x2653f7(0x12a)]=_0x2653f7(0xcd);if(_0x280831)_0x280831[_0x2653f7(0xfb)][_0x2653f7(0x12a)]=_0x2653f7(0xcd);if(_0x5db6da)_0x5db6da['style']['display']='none';if(_0x81e6cc)_0x81e6cc[_0x2653f7(0xfb)][_0x2653f7(0x12a)]='none';}_0x3da0e2&&_0x3da0e2[_0xbe27e5(0xd2)]('click',()=>{const _0x60ab51=_0xbe27e5;console['log']('D1\x20toggle\x20clicked'),_0x28ca99();_0x280831&&(_0x280831['classList']['add']('active'),_0x280831['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='block',document['getElementById']('elo-recommendation-text-d2')['style'][_0x60ab51(0x12a)]='none',document[_0x60ab51(0x100)]('elo-recommendation-text-d3')['style'][_0x60ab51(0x12a)]='none';if(_0x3da0e2)_0x3da0e2[_0x60ab51(0x111)][_0x60ab51(0x105)]('active');if(_0x157a3f)_0x157a3f['classList'][_0x60ab51(0x133)]('active');if(_0xdaff65)_0xdaff65['classList'][_0x60ab51(0x133)]('active');displayLadder(),findBestOpponent('d1');}),_0x157a3f&&_0x157a3f['addEventListener']('click',()=>{const _0x1c6ad2=_0xbe27e5;console['log']('D2\x20toggle\x20clicked'),_0x28ca99();_0x5db6da&&(_0x5db6da['classList']['add']('active'),_0x5db6da[_0x1c6ad2(0xfb)]['display']='block');document[_0x1c6ad2(0x100)](_0x1c6ad2(0x119))['style']['display']='none',document[_0x1c6ad2(0x100)]('elo-recommendation-text-d2')['style'][_0x1c6ad2(0x12a)]='block',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x157a3f)_0x157a3f['classList']['add']('active');if(_0x3da0e2)_0x3da0e2[_0x1c6ad2(0x111)]['remove']('active');if(_0xdaff65)_0xdaff65[_0x1c6ad2(0x111)]['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0xdaff65&&_0xdaff65[_0xbe27e5(0xd2)](_0xbe27e5(0x123),()=>{const _0x561ead=_0xbe27e5;console['log']('D3\x20toggle\x20clicked'),_0x28ca99();_0x81e6cc&&(_0x81e6cc['classList']['add']('active'),_0x81e6cc[_0x561ead(0xfb)]['display']='block');document['getElementById']('elo-recommendation-text-d1')[_0x561ead(0xfb)]['display']=_0x561ead(0xcd),document['getElementById']('elo-recommendation-text-d2')['style'][_0x561ead(0x12a)]='none',document['getElementById']('elo-recommendation-text-d3')[_0x561ead(0xfb)][_0x561ead(0x12a)]='block';if(_0xdaff65)_0xdaff65[_0x561ead(0x111)]['add'](_0x561ead(0xc6));if(_0x3da0e2)_0x3da0e2['classList'][_0x561ead(0x133)]('active');if(_0x157a3f)_0x157a3f['classList'][_0x561ead(0x133)]('active');displayLadderD3(),findBestOpponent('d3');}),_0x11d338&&_0x11d338[_0xbe27e5(0xd2)]('click',()=>{const _0x4a4db2=_0xbe27e5;_0x28ca99();if(_0x21c853)_0x21c853['style'][_0x4a4db2(0x12a)]='block';displayLadderDuos(),findBestOpponent('duos'),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')[_0x4a4db2(0xfb)]['display']=_0x4a4db2(0xee)),document['getElementById']('elo-recommendation-text-d1')['style']['display']=_0x4a4db2(0xcd),document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x4a4db2(0xcd),document['getElementById']('elo-recommendation-text-d3')[_0x4a4db2(0xfb)][_0x4a4db2(0x12a)]='none';});}document['addEventListener'](a25_0x143dde(0xff),()=>{const _0x46b78d=a25_0x143dde;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x46b78d(0x119))['style'][_0x46b78d(0x12a)]='block';});export{displayLadder};async function findBestOpponent(_0x2d3bf2='d1'){const _0x5c7b61=a25_0x143dde,_0xdadf3d='elo-recommendation-text-'+_0x2d3bf2,_0x2f23fe=document[_0x5c7b61(0x100)](_0xdadf3d);if(!_0x2f23fe){console['error'](_0x5c7b61(0x122)+_0x2d3bf2+'\x20not\x20found');return;}const _0x8d4620=auth['currentUser'];if(!_0x8d4620){_0x2f23fe['textContent']='';return;}try{const _0x12a9d7=doc(db,'userProfiles',_0x8d4620['uid']),_0x4a0b45=await getDoc(_0x12a9d7);if(!_0x4a0b45['exists']()){console[_0x5c7b61(0x134)]('No\x20user\x20profile\x20found'),_0x2f23fe['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x18bd10=_0x4a0b45['data'](),_0x4859f1=_0x18bd10['username'];if(!_0x4859f1){_0x2f23fe[_0x5c7b61(0x109)]=_0x5c7b61(0xd4);return;}let _0x2a4d0e;switch(_0x2d3bf2){case'd1':_0x2a4d0e=_0x5c7b61(0xc1);break;case'd2':_0x2a4d0e='playersD2';break;case'd3':_0x2a4d0e='playersD3';break;case'duos':_0x2a4d0e='playersDuos';break;default:_0x2a4d0e=_0x5c7b61(0xc1);}if(_0x2d3bf2==='duos'){const _0x473f99=collection(db,_0x2a4d0e),_0x2e4c2c=query(_0x473f99,where(_0x5c7b61(0xda),'==',_0x4859f1)),_0x4c3912=await getDocs(_0x2e4c2c);if(_0x4c3912['empty']){_0x2f23fe[_0x5c7b61(0x109)]=_0x5c7b61(0xf5);return;}const _0x50bba4=_0x4c3912['docs'][0x0]['data'](),_0x455eca=parseInt(_0x50bba4[_0x5c7b61(0xe6)])||0x4b0;if(_0x50bba4['hasTeam']&&_0x50bba4[_0x5c7b61(0x106)]){_0x2f23fe['innerHTML']=_0x5c7b61(0x115)+_0x50bba4[_0x5c7b61(0x106)]+_0x5c7b61(0x10c);return;}const _0x4f476e=await getDocs(_0x473f99);let _0x22cf4c=null,_0x523118=-0x1;_0x4f476e[_0x5c7b61(0x137)](_0x4195b0=>{const _0x3f9d04=_0x5c7b61,_0x5ab488=_0x4195b0['data']();if(_0x5ab488['username']===_0x4859f1)return;if(_0x5ab488[_0x3f9d04(0x121)])return;const _0x416cc3=parseInt(_0x5ab488[_0x3f9d04(0xe6)])||0x4b0,_0x13ff41=Math['abs'](_0x416cc3-_0x455eca),_0x3020f4=Math['max'](0x0,0xc8-_0x13ff41);_0x3020f4>_0x523118&&(_0x22cf4c=_0x5ab488,_0x523118=_0x3020f4);});if(_0x22cf4c){const _0x41bfc3=parseInt(_0x22cf4c['eloRating'])||0x4b0;let _0x83195e='gray';if(_0x41bfc3>=0x7d0)_0x83195e=_0x5c7b61(0xef);else{if(_0x41bfc3>=0x708)_0x83195e=_0x5c7b61(0xc7);else{if(_0x41bfc3>=0x640)_0x83195e='#C0C0C0';else _0x41bfc3>=0x578&&(_0x83195e='#CD7F32');}}_0x2f23fe['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x83195e+';\x22>'+_0x22cf4c[_0x5c7b61(0xda)]+'</span>\x20(ELO:\x20'+_0x41bfc3+')';}else _0x2f23fe[_0x5c7b61(0x109)]='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x1a5081=collection(db,_0x2a4d0e),_0x995bad=query(_0x1a5081,where('username','==',_0x4859f1)),_0x215af2=await getDocs(_0x995bad);if(_0x215af2['empty']){_0x2f23fe['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x2d3bf2[_0x5c7b61(0x13e)]()+_0x5c7b61(0xd6);return;}const _0x18230a=_0x215af2['docs'][0x0][_0x5c7b61(0x118)](),_0x1b3c31=parseInt(_0x18230a['eloRating'])||0x5dc,_0x113bae=await getDocs(_0x1a5081);let _0x5c8746=null,_0x130045=-0x1;const _0x4d8d87=getPlayerRankName(_0x1b3c31);_0x113bae[_0x5c7b61(0x137)](_0x1968c3=>{const _0x1dceb6=_0x1968c3['data']();if(_0x1dceb6['username']===_0x4859f1)return;const _0x3fce35=parseInt(_0x1dceb6['eloRating'])||0x5dc,_0x21188b=getPlayerRankName(_0x3fce35),_0x4853f4=Math['abs'](_0x3fce35-_0x1b3c31),_0x491a7d=0x20,_0x11ee95=0x1/(0x1+Math['pow'](0xa,(_0x3fce35-_0x1b3c31)/0x190)),_0x4ff782=Math['round'](_0x491a7d*(0x1-_0x11ee95));if(_0x4ff782<=0x0)return;let _0x4ca2d4=0x0;const _0x4c24d0=Math['max'](0x0,0x64-_0x4853f4*0.5),_0xb18e8b=_0x4ff782>=0x3&&_0x4ff782<=0x8?0x32:_0x4ff782>0x0&&_0x4ff782<0xf?0x1e:0xa,_0x2257c4=_0x4d8d87===_0x21188b?0x28:0x0;_0x4ca2d4=_0x4c24d0+_0xb18e8b+_0x2257c4,_0x4ca2d4>_0x130045&&(_0x5c8746=_0x1dceb6,_0x130045=_0x4ca2d4);});if(_0x5c8746){const _0x439343=parseInt(_0x5c8746['eloRating'])||0x5dc;let _0x11c239=_0x5c7b61(0x102);if(_0x439343>=0x7d0)_0x11c239=_0x5c7b61(0xef);else{if(_0x439343>=0x708)_0x11c239='#FFD700';else{if(_0x439343>=0x640)_0x11c239='#b9f1fc';else _0x439343>=0x578&&(_0x11c239=_0x5c7b61(0xc4));}}_0x2f23fe['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x1b3c31+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x11c239+';\x22>'+_0x5c8746['username']+'</span>';}else _0x2f23fe['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x1b3c31+')';}catch(_0x1cd511){console['error'](_0x5c7b61(0x113),_0x1cd511),_0x2f23fe['textContent']=_0x5c7b61(0x114);}}auth[a25_0x143dde(0x11b)](_0x1b1414=>{const _0x9186a4=a25_0x143dde,_0x2659b2=document['getElementById'](_0x9186a4(0xd8))&&document['getElementById'](_0x9186a4(0xd8))['style'][_0x9186a4(0x12a)]!=='none',_0xd8ab00=document[_0x9186a4(0x100)]('d2-ladder-container')&&document['getElementById']('d2-ladder-container')['style']['display']!==_0x9186a4(0xcd),_0x199cdc=document['getElementById'](_0x9186a4(0xd3))&&document['getElementById']('d3-ladder-container')[_0x9186a4(0xfb)]['display']!==_0x9186a4(0xcd),_0x4d56fa=document[_0x9186a4(0x100)]('duos-ladder-container')&&document['getElementById'](_0x9186a4(0xf1))[_0x9186a4(0xfb)][_0x9186a4(0x12a)]!==_0x9186a4(0xcd),_0x2c19cd=_0x2659b2?'d1':_0xd8ab00?'d2':_0x199cdc?'d3':_0x4d56fa?_0x9186a4(0xe2):'d1';findBestOpponent(_0x2c19cd);}),document['addEventListener'](a25_0x143dde(0xff),()=>{const _0x258450=a25_0x143dde,_0x5d0c5c=document[_0x258450(0x100)]('duos-switch'),_0x8173b5=document[_0x258450(0xe5)]('label[for=\x22duos-switch\x22]');_0x5d0c5c&&_0x8173b5&&(_0x5d0c5c['addEventListener']('change',async _0x3ccd46=>{const _0x57d24a=_0x258450;if(_0x3ccd46[_0x57d24a(0xbd)]['checked']){const _0x45a63b=auth?.[_0x57d24a(0x10a)],_0x478833=await checkIfUserIsAdmin(_0x45a63b);if(!_0x478833){_0x3ccd46[_0x57d24a(0x12d)]();const _0x458189=document['getElementById']('d1-switch');return _0x458189&&(_0x458189['checked']=!![],_0x458189['dispatchEvent'](new Event(_0x57d24a(0xf8)))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0x4e50cd=>{const _0x98a4de=_0x258450,_0x58359c=await checkIfUserIsAdmin(_0x4e50cd);!_0x58359c?(_0x5d0c5c[_0x98a4de(0xbc)]=!![],_0x8173b5['style'][_0x98a4de(0xed)]=_0x98a4de(0x136),_0x8173b5['style'][_0x98a4de(0xc8)]=_0x98a4de(0xd7),_0x8173b5[_0x98a4de(0xc2)]='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x5d0c5c[_0x98a4de(0xbc)]=![],_0x8173b5[_0x98a4de(0xfb)]['opacity']='1',_0x8173b5[_0x98a4de(0xfb)]['cursor']='pointer',_0x8173b5[_0x98a4de(0xc2)]='');}));});async function checkIfUserIsAdmin(_0x3284a6){const _0x68315d=a25_0x143dde;if(!_0x3284a6)return![];try{const _0x4189a4=['admin@ladder.com','brian2af@outlook.com'];if(_0x3284a6['email']&&_0x4189a4['includes'](_0x3284a6['email']['toLowerCase']()))return!![];const _0x4bf1f8=[_0x68315d(0x10e),_0x68315d(0xc1),_0x68315d(0x132),_0x68315d(0x110)],_0x434300=['admin',_0x68315d(0xf2),_0x68315d(0xe0),'creative\x20lead'];for(const _0x3ce5f2 of _0x4bf1f8){try{const _0x3698b8=doc(db,_0x3ce5f2,_0x3284a6[_0x68315d(0xfc)]),_0x3cf4ec=await getDoc(_0x3698b8);if(_0x3cf4ec['exists']()){const _0x1c18d5=_0x3cf4ec[_0x68315d(0x118)](),_0x47fc22=(_0x1c18d5[_0x68315d(0x120)]||_0x1c18d5['role']||'')['toLowerCase']();if(_0x47fc22&&_0x434300['includes'](_0x47fc22))return!![];}}catch(_0x1a394e){console[_0x68315d(0x13a)](_0x68315d(0xcc)+_0x3ce5f2+':',_0x1a394e);}}return![];}catch(_0x2a8832){return console['error']('Error\x20checking\x20admin\x20status:',_0x2a8832),![];}}function showAdminOnlyMessage(){const _0x4f0a4a=a25_0x143dde,_0x12c74e=document[_0x4f0a4a(0x100)]('admin-only-message');_0x12c74e&&_0x12c74e['remove']();const _0x53c352=document['createElement']('div');_0x53c352['id']=_0x4f0a4a(0x112),_0x53c352['style'][_0x4f0a4a(0x11a)]=_0x4f0a4a(0xe9),_0x53c352['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>🔒\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x53c352),setTimeout(()=>{const _0x1153aa=_0x4f0a4a;_0x53c352[_0x1153aa(0x131)]&&_0x53c352[_0x1153aa(0x133)]();},0xbb8);}