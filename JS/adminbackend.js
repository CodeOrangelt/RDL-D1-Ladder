const a4_0x47be6c=a4_0x3520,a4_0x170775=(function(){let _0x1c329d=!![];return function(_0x4829ae,_0x1e9366){const _0x4e85c9=_0x1c329d?function(){if(_0x1e9366){const _0x45b46a=_0x1e9366['apply'](_0x4829ae,arguments);return _0x1e9366=null,_0x45b46a;}}:function(){};return _0x1c329d=![],_0x4e85c9;};}()),a4_0x8d6caf=a4_0x170775(this,function(){const _0x18678d=a4_0x3520,_0x5503b5=function(){let _0x500467;try{_0x500467=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xe5a5b0){_0x500467=window;}return _0x500467;},_0x4bac0d=_0x5503b5(),_0x1c8b94=_0x4bac0d['console']=_0x4bac0d['console']||{},_0x792e5c=['log',_0x18678d(0xd8),'info','error','exception','table',_0x18678d(0x222)];for(let _0xcb230d=0x0;_0xcb230d<_0x792e5c['length'];_0xcb230d++){const _0x1d83da=a4_0x170775['constructor']['prototype']['bind'](a4_0x170775),_0x1f92d3=_0x792e5c[_0xcb230d],_0x429d30=_0x1c8b94[_0x1f92d3]||_0x1d83da;_0x1d83da['__proto__']=a4_0x170775['bind'](a4_0x170775),_0x1d83da['toString']=_0x429d30['toString'][_0x18678d(0x16b)](_0x429d30),_0x1c8b94[_0x1f92d3]=_0x1d83da;}});a4_0x8d6caf();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x76160){const _0x4871c4=a4_0x3520;if(!_0x76160)return'#ffffff';_0x76160=_0x76160['replace']('#','');_0x76160['length']===0x3&&(_0x76160=_0x76160['split']('')[_0x4871c4(0x1b8)](_0x2b45f4=>_0x2b45f4+_0x2b45f4)['join'](''));if(_0x76160['length']!==0x6)return'#ffffff';const _0x221a64=parseInt(_0x76160[_0x4871c4(0x143)](0x0,0x2),0x10),_0x4112d7=parseInt(_0x76160['substring'](0x2,0x4),0x10),_0x3a5c69=parseInt(_0x76160[_0x4871c4(0x143)](0x4,0x6),0x10),_0x11f0d8=(_0x221a64*0x12b+_0x4112d7*0x24b+_0x3a5c69*0x72)/0x3e8;return _0x11f0d8>=0x80?'#000000':_0x4871c4(0x15e);}const DEFAULT_TROPHY_IMAGE=a4_0x47be6c(0x25d),charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener']('DOMContentLoaded',()=>{const _0x51ac5a=a4_0x47be6c;auth[_0x51ac5a(0x189)](async _0x246887=>{if(!_0x246887){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x575fb3){console['error']('Error\x20initializing\x20dashboard:',_0x575fb3),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x3588e2){const _0x2e5d7b=a4_0x47be6c;if(!_0x3588e2)return[_0x2e5d7b(0x11d)];console['log']('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x3588e2+'\x20in\x20all\x20collections...');const _0x39842e=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':'playersD3','displayName':_0x2e5d7b(0x294)},{'name':_0x2e5d7b(0x236),'displayName':'Non-Participants'}],_0x3ea363=auth[_0x2e5d7b(0x300)];let _0x5dee10=null,_0x4dee9e=null;for(const _0x3777be of _0x39842e){try{if(_0x3ea363){const _0x179eab=doc(db,_0x3777be['name'],_0x3ea363['uid']),_0xf8501b=await getDoc(_0x179eab);if(_0xf8501b['exists']()){const _0x23d5ba=_0xf8501b['data']();console['log']('Found\x20user\x20in\x20'+_0x3777be[_0x2e5d7b(0x292)]+'\x20by\x20UID:',_0x23d5ba);const _0x526712=(_0x23d5ba['roleName']||_0x23d5ba['role']||'')[_0x2e5d7b(0x166)]();if(_0x526712&&_0x526712!=='none'){_0x5dee10=_0x526712,_0x4dee9e=_0x3777be['displayName'],console['log'](_0x2e5d7b(0x317)+_0x5dee10+_0x2e5d7b(0x266)+_0x4dee9e);break;}}}if(!_0x5dee10){const _0x5ce2bd=collection(db,_0x3777be['name']),_0x31250b=query(_0x5ce2bd,where(_0x2e5d7b(0x208),'==',_0x3588e2)),_0x5f2b69=await getDocs(_0x31250b);if(!_0x5f2b69[_0x2e5d7b(0x177)]){const _0x3542a5=_0x5f2b69[_0x2e5d7b(0x153)][0x0]['data']();console['log']('Found\x20user\x20in\x20'+_0x3777be['displayName']+'\x20with\x20email\x20'+_0x3588e2+':',_0x3542a5);const _0x30f46f=(_0x3542a5['roleName']||_0x3542a5['role']||'')['toLowerCase']();if(_0x30f46f&&_0x30f46f!=='none'){_0x5dee10=_0x30f46f,_0x4dee9e=_0x3777be['displayName'],console[_0x2e5d7b(0x1c9)]('Found\x20specific\x20role:\x20'+_0x5dee10+_0x2e5d7b(0x266)+_0x4dee9e);break;}}}}catch(_0x3d8bed){console['error']('Error\x20checking\x20'+_0x3777be['displayName']+':',_0x3d8bed);}}if(_0x5dee10){console[_0x2e5d7b(0x1c9)](_0x2e5d7b(0x269)+_0x5dee10+_0x2e5d7b(0xf4)+_0x4dee9e+')');const _0x3aa889={'admin':['dashboard','manage-players','manage-matches','manage-articles',_0x2e5d7b(0x1e0),_0x2e5d7b(0x12b),'inactive-players','settings','manage-trophies',_0x2e5d7b(0x24b),_0x2e5d7b(0x20c),_0x2e5d7b(0x1b0),_0x2e5d7b(0x218),'manage-points','manage-levels-ribbons','manage-ribbons'],'owner':['dashboard','manage-players','manage-matches','manage-articles','manage-trophies','manage-ranks',_0x2e5d7b(0x1fd),'settings','manage-trophies',_0x2e5d7b(0x24b),'manage-highlights','user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard','manage-articles','manage-trophies','elo-history','manage-highlights']};if(_0x3aa889[_0x5dee10])return console['log']('Role\x20\x27'+_0x5dee10+'\x27\x20has\x20permissions:',_0x3aa889[_0x5dee10]),_0x3aa889[_0x5dee10];}return console[_0x2e5d7b(0x1c9)](_0x2e5d7b(0xbc)+_0x3588e2+',\x20giving\x20default\x20access'),['dashboard'];}function setupSidebarNavigation(_0x1ed156=[]){const _0x5a4a15=a4_0x47be6c,_0x188778=document[_0x5a4a15(0x250)]('.sidebar-nav\x20.nav-item'),_0x529223=document[_0x5a4a15(0x250)]('.admin-section');(!_0x1ed156||_0x1ed156['length']===0x0)&&(_0x1ed156=['dashboard']);_0x188778['forEach'](_0x27427e=>{const _0x4d55d9=_0x5a4a15,_0x325b72=_0x27427e[_0x4d55d9(0x23a)](_0x4d55d9(0xda));_0x1ed156['includes'](_0x325b72)?_0x27427e['style']['display']='flex':_0x27427e[_0x4d55d9(0x1e1)]['display']='none',_0x27427e['addEventListener']('click',()=>{const _0x4889e7=_0x4d55d9,_0x280804=_0x27427e[_0x4889e7(0x23a)]('data-section');if(!_0x1ed156['includes'](_0x280804)){showNotification('You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','error');return;}_0x188778['forEach'](_0x11bbb4=>_0x11bbb4['classList'][_0x4889e7(0x112)]('active')),_0x27427e[_0x4889e7(0x239)]['add']('active'),_0x529223[_0x4889e7(0x2f7)](_0x2ef32e=>{const _0x64cc79=_0x4889e7;_0x2ef32e['style'][_0x64cc79(0xcc)]=_0x64cc79(0x18f);});const _0x41277e=document['getElementById'](_0x280804);_0x41277e&&(_0x41277e['style'][_0x4889e7(0xcc)]=_0x4889e7(0x1b5),console[_0x4889e7(0x1c9)](_0x4889e7(0xd0)+_0x280804+'\x20section'));});});const _0x46810f=document['querySelector']('.sidebar-nav\x20.nav-item[data-section=\x22'+_0x1ed156[0x0]+'\x22]');_0x46810f&&_0x46810f['click'](),console['log']('Sidebar\x20navigation\x20initialized\x20with\x20permissions');}function setupTabNavigation(){const _0x1a9b31=a4_0x47be6c,_0x246605=document['querySelectorAll']('.nav-item');let _0x17cc6c=null,_0x3be156=new Set();_0x246605[_0x1a9b31(0x2f7)](_0x4fce31=>{const _0x562663=_0x1a9b31;_0x4fce31['addEventListener'](_0x562663(0x1ae),function(){const _0x1005b3=_0x562663,_0x129d33=this['getAttribute'](_0x1005b3(0xda));if(_0x129d33===_0x17cc6c)return;_0x17cc6c&&(document['getElementById'](_0x17cc6c)['style']['display']='none',_0x246605['forEach'](_0x464673=>_0x464673['classList']['remove']('active'))),document['getElementById'](_0x129d33)[_0x1005b3(0x1e1)]['display']=_0x1005b3(0x1b5),this['classList'][_0x1005b3(0x1f6)](_0x1005b3(0x2d0)),_0x17cc6c=_0x129d33;});});}function loadSectionData(_0x3d1cc3){return;}async function initializeAdminDashboard(){const _0x175f8b=a4_0x47be6c;try{const _0x456136=auth['currentUser'],_0x1ee596=await getUserTabPermissions(_0x456136[_0x175f8b(0x208)]);console['log']('User\x20'+_0x456136['email']+'\x20allowed\x20tabs:',_0x1ee596),window['userAllowedTabs']=_0x1ee596,setupSidebarNavigation(_0x1ee596),setupLadderSelector(),setupDashboardSection(),_0x1ee596['includes']('manage-players')&&setupManagePlayersSection(),_0x1ee596[_0x175f8b(0x2f4)](_0x175f8b(0x24b))&&setupEloHistorySection(),_0x1ee596[_0x175f8b(0x2f4)]('manage-ranks')&&setupRankControls(),_0x1ee596['includes']('manage-articles')&&setupManageArticlesSection(),_0x1ee596['includes'](_0x175f8b(0x1b0))&&setupUserRolesSection(),_0x1ee596['includes'](_0x175f8b(0x1e0))&&setupTrophyManagementSection(),_0x1ee596[_0x175f8b(0x2f4)]('manage-highlights')&&setupManageHighlightsSection(),_0x1ee596['includes'](_0x175f8b(0x1fd))&&setupInactivePlayersSection(),_0x1ee596['includes']('manage-matches')&&setupManageMatchesSection(),_0x1ee596[_0x175f8b(0x2f4)]('manage-points')&&setupManagePointsSection(),_0x1ee596['includes'](_0x175f8b(0x2a7))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x1ee596);}catch(_0x3f8d40){console['error']('Error\x20initializing\x20admin\x20dashboard:',_0x3f8d40);}}function setupDataLoadButtons(_0x4d5c1d=[]){const _0xd9f3d6=a4_0x47be6c;(!_0x4d5c1d||_0x4d5c1d['length']===0x0)&&(_0x4d5c1d=[_0xd9f3d6(0x11d)]);const _0x5d0ff5=document['getElementById']('load-dashboard-data');_0x5d0ff5&&_0x5d0ff5['addEventListener']('click',function(){const _0x4bec42=_0xd9f3d6;this['classList']['add'](_0x4bec42(0x306)),this['innerHTML']=_0x4bec42(0x2a6),loadDashboardOverview()['then'](()=>{const _0x4c7026=_0x4bec42;this['classList']['remove'](_0x4c7026(0x306)),this['innerHTML']=_0x4c7026(0x2fd);})['catch'](_0xc48c=>{const _0x3f582c=_0x4bec42;console['error'](_0x3f582c(0xe5),_0xc48c),this['classList'][_0x3f582c(0x112)](_0x3f582c(0x306)),this[_0x3f582c(0x312)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';},0xbb8);});});if(_0x4d5c1d['includes'](_0xd9f3d6(0x1e0))){const _0x30591c=document[_0xd9f3d6(0x10a)]('load-trophies-data');_0x30591c&&_0x30591c['addEventListener']('click',function(){const _0x25f4ea=_0xd9f3d6;console['log'](_0x25f4ea(0x13d)),this['classList'][_0x25f4ea(0x1f6)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()[_0x25f4ea(0x248)](()=>{const _0x280cdf=_0x25f4ea;this['classList'][_0x280cdf(0x112)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x85f5ea=>{const _0x561f05=_0x25f4ea;console['error']('Error\x20loading\x20trophies:',_0x85f5ea),this[_0x561f05(0x239)]['remove']('loading'),this['innerHTML']=_0x561f05(0x2e5),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';},0xbb8);});});}if(_0x4d5c1d['includes']('manage-players')){const _0x4b617f=document['getElementById'](_0xd9f3d6(0x123));_0x4b617f&&_0x4b617f['addEventListener']('click',function(){const _0x2a290d=_0xd9f3d6;console['log'](_0x2a290d(0x2c2)),this['classList']['add']('loading'),this['innerHTML']=_0x2a290d(0x2a6),loadPlayersData()['then'](()=>{const _0x1d0cc9=_0x2a290d;this['classList'][_0x1d0cc9(0x112)]('loading'),this[_0x1d0cc9(0x312)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})[_0x2a290d(0x225)](_0x55c1f6=>{console['error']('Error\x20loading\x20players:',_0x55c1f6),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x4419f1=a4_0x3520;this[_0x4419f1(0x312)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';},0xbb8);});});}if(_0x4d5c1d['includes']('elo-history')){const _0x29f5a7=document['getElementById']('load-elo-history-data');_0x29f5a7&&_0x29f5a7['addEventListener']('click',function(){const _0x4b1051=_0xd9f3d6;console['log']('Load\x20history\x20data\x20clicked'),this['classList']['add'](_0x4b1051(0x306)),this['innerHTML']=_0x4b1051(0x2a6),loadEloHistory(0x1)['then'](()=>{const _0x70ecd=_0x4b1051;this['classList']['remove'](_0x70ecd(0x306)),this[_0x70ecd(0x312)]=_0x70ecd(0x2b7);})['catch'](_0x141a76=>{const _0x13ed4b=_0x4b1051;console['error'](_0x13ed4b(0x1b1),_0x141a76),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';},0xbb8);});});}if(_0x4d5c1d[_0xd9f3d6(0x2f4)](_0xd9f3d6(0x159))){const _0xe37788=document['getElementById']('load-articles-data');_0xe37788&&_0xe37788[_0xd9f3d6(0x219)](_0xd9f3d6(0x1ae),function(){const _0x3b5d2f=_0xd9f3d6;console[_0x3b5d2f(0x1c9)](_0x3b5d2f(0x2d2)),this['classList'][_0x3b5d2f(0x1f6)]('loading'),this['innerHTML']=_0x3b5d2f(0x2a6),loadArticles()['then'](()=>{const _0x5ac460=_0x3b5d2f;this[_0x5ac460(0x239)]['remove']('loading'),this[_0x5ac460(0x312)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})[_0x3b5d2f(0x225)](_0x195729=>{const _0x3413f0=_0x3b5d2f;console['error'](_0x3413f0(0x144),_0x195729),this['classList']['remove']('loading'),this[_0x3413f0(0x312)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x23e140=_0x3413f0;this['innerHTML']=_0x23e140(0x19c);},0xbb8);});});}if(_0x4d5c1d['includes'](_0xd9f3d6(0x1b0))){const _0x182ad7=document['getElementById']('load-users-data');_0x182ad7&&_0x182ad7['addEventListener'](_0xd9f3d6(0x1ae),function(){const _0x99a12c=_0xd9f3d6;console['log']('Load\x20users\x20data\x20clicked'),this['classList']['add'](_0x99a12c(0x306)),this['innerHTML']=_0x99a12c(0x2a6),loadUsersWithRoles()['then'](()=>{const _0x13c3c6=_0x99a12c;this['classList']['remove'](_0x13c3c6(0x306)),this['innerHTML']=_0x13c3c6(0x1eb);})['catch'](_0x2d405e=>{const _0x174698=_0x99a12c;console[_0x174698(0x1ab)]('Error\x20loading\x20users:',_0x2d405e),this['classList']['remove'](_0x174698(0x306)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});}if(_0x4d5c1d['includes']('inactive-players')){const _0x144cc5=document[_0xd9f3d6(0x10a)](_0xd9f3d6(0x18d));_0x144cc5&&_0x144cc5['addEventListener']('click',function(){const _0x5f3d80=_0xd9f3d6;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this[_0x5f3d80(0x239)]['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadInactivePlayersData()[_0x5f3d80(0x248)](()=>{const _0x42abec=_0x5f3d80;this['classList']['remove']('loading'),this[_0x42abec(0x312)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})['catch'](_0x5136f6=>{const _0x2aff7e=_0x5f3d80;console[_0x2aff7e(0x1ab)]('Error\x20loading\x20inactive\x20players:',_0x5136f6),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5bcaf1=_0x2aff7e;this['innerHTML']=_0x5bcaf1(0x1d1);},0xbb8);});});}if(_0x4d5c1d['includes'](_0xd9f3d6(0x20c))){const _0x33042e=document['getElementById']('load-highlights-data');_0x33042e&&_0x33042e[_0xd9f3d6(0x219)]('click',function(){const _0x3e25ba=_0xd9f3d6;console[_0x3e25ba(0x1c9)]('Load\x20highlights\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x3e25ba(0x312)]=_0x3e25ba(0x2a6),loadHighlightsAdmin()['then'](()=>{const _0x2a47b9=_0x3e25ba;this[_0x2a47b9(0x239)]['remove'](_0x2a47b9(0x306)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})[_0x3e25ba(0x225)](_0x3ebca3=>{const _0x125a5b=_0x3e25ba;console[_0x125a5b(0x1ab)](_0x125a5b(0x14f),_0x3ebca3),this[_0x125a5b(0x239)]['remove'](_0x125a5b(0x306)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';},0xbb8);});});}if(_0x4d5c1d['includes'](_0xd9f3d6(0x218))){const _0x52d737=document['getElementById']('load-matches-data');_0x52d737&&_0x52d737[_0xd9f3d6(0x219)](_0xd9f3d6(0x1ae),function(){const _0x40f577=_0xd9f3d6;console['log'](_0x40f577(0x21b)),this['classList']['add'](_0x40f577(0x306)),this[_0x40f577(0x312)]=_0x40f577(0x2a6),loadMatchesData(0x1)['then'](()=>{const _0x2bdee9=_0x40f577;this[_0x2bdee9(0x239)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';})['catch'](_0xd4d6fc=>{const _0x4f7d49=_0x40f577;console['error'](_0x4f7d49(0x2b9),_0xd4d6fc),this['classList'][_0x4f7d49(0x112)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0x4d5c1d['includes']('manage-ribbons')){const _0x4936ba=document['getElementById'](_0xd9f3d6(0x2c9));_0x4936ba&&_0x4936ba['addEventListener']('click',function(){const _0x299c63=_0xd9f3d6;console[_0x299c63(0x1c9)]('Load\x20ribbons\x20data\x20clicked'),this['classList']['add'](_0x299c63(0x306)),this[_0x299c63(0x312)]=_0x299c63(0x2a6),loadRibbonsData()['then'](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x3d5fc4=>{const _0x296838=_0x299c63;console['error']('Error\x20loading\x20ribbons:',_0x3d5fc4),this[_0x296838(0x239)]['remove'](_0x296838(0x306)),this[_0x296838(0x312)]=_0x296838(0x2e5),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x2ee9e0=a4_0x47be6c;document[_0x2ee9e0(0x10a)](_0x2ee9e0(0x2ec))['textContent']='-',document['getElementById'](_0x2ee9e0(0x16c))[_0x2ee9e0(0x1b6)]='-',document['getElementById']('pending-count')['textContent']='-',document['getElementById']('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x38c879=a4_0x47be6c,_0x58e796=document['querySelectorAll']('.ladder-switch\x20input');_0x58e796['forEach'](_0x372d86=>{const _0x5ef176=a4_0x3520;_0x372d86[_0x5ef176(0x219)]('change',()=>{const _0x263e80=_0x5ef176;currentLadder=_0x372d86['value'],document[_0x263e80(0x22f)]['setAttribute']('data-ladder',currentLadder);const _0xe0341b=document['getElementById']('current-ladder-display');_0xe0341b&&(_0xe0341b[_0x263e80(0x1b6)]=currentLadder),document['getElementById'](_0x263e80(0x2ec))['textContent']='-',document['getElementById']('match-count')['textContent']='-',document[_0x263e80(0x10a)](_0x263e80(0x2f3))[_0x263e80(0x1b6)]='-',document['getElementById']('rejected-count')[_0x263e80(0x1b6)]='-',charts['rankDistribution']&&(charts['rankDistribution']['destroy'](),charts[_0x263e80(0x1d7)]=null),charts[_0x263e80(0x20f)]&&(charts['activity']['destroy'](),charts[_0x263e80(0x20f)]=null),showNotification('Switched\x20to\x20'+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x263e80(0x118));});});const _0x395331=document[_0x38c879(0x10a)]('current-ladder-display');_0x395331&&(_0x395331[_0x38c879(0x1b6)]=currentLadder);}async function loadDashboardOverview(){const _0x17a1ad=a4_0x47be6c;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x17a1ad(0x10a)]('player-count')[_0x17a1ad(0x1b6)]='-',document['getElementById']('match-count')['textContent']='-',document['getElementById']('pending-count')[_0x17a1ad(0x1b6)]='-',document['getElementById']('rejected-count')['textContent']='-';const _0x15141a=currentLadder==='D1'?_0x17a1ad(0x286):currentLadder==='D2'?'playersD2':'playersD3',_0x4cf9e0=currentLadder==='D1'?_0x17a1ad(0x2c1):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x121cc2=currentLadder==='D1'?_0x17a1ad(0x107):currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x2ce009=currentLadder==='D1'?'RejectedD1':currentLadder==='D2'?_0x17a1ad(0x1fe):'RejectedD3';console[_0x17a1ad(0x1c9)]('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0x15141a+',\x20'+_0x4cf9e0);const _0x5995f5=await getDocs(collection(db,_0x15141a)),_0x5b4e89=_0x5995f5['size'],_0x21dc6c=await getDocs(collection(db,_0x4cf9e0)),_0x468986=_0x21dc6c[_0x17a1ad(0x1ba)],_0x57f742=await getDocs(collection(db,_0x121cc2)),_0x384dc4=_0x57f742[_0x17a1ad(0x1ba)],_0xb054e0=await getDocs(collection(db,_0x2ce009)),_0x1277eb=_0xb054e0['size'];return document[_0x17a1ad(0x10a)]('player-count')['textContent']=_0x5b4e89,document[_0x17a1ad(0x10a)]('match-count')['textContent']=_0x468986,document['getElementById'](_0x17a1ad(0x2f3))[_0x17a1ad(0x1b6)]=_0x384dc4,document['getElementById']('rejected-count')['textContent']=_0x1277eb,await createRankDistributionChart(),await createActivityChart(),console['log'](_0x17a1ad(0x1f0)),!![];}catch(_0x569e23){console['error'](_0x17a1ad(0x291),_0x569e23);throw _0x569e23;}}async function createRankDistributionChart(){const _0x14147a=a4_0x47be6c;try{const _0x452ee9=collection(db,currentLadder==='D1'?_0x14147a(0x286):'playersD2'),_0x2b4311=await getDocs(_0x452ee9),_0x38b4e5={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0x2b4311['forEach'](_0x2f3326=>{const _0x528fed=_0x14147a,_0x500f1e=_0x2f3326['data'](),_0xf44cba=_0x500f1e['eloRating']||0x4b0;if(_0xf44cba>=0x7d0)_0x38b4e5['Emerald']++;else{if(_0xf44cba>=0x708)_0x38b4e5['Gold']++;else{if(_0xf44cba>=0x640)_0x38b4e5[_0x528fed(0x147)]++;else{if(_0xf44cba>=0x578)_0x38b4e5['Bronze']++;else _0x38b4e5['Unranked']++;}}}});const _0x361259=document[_0x14147a(0x10a)]('rank-distribution-chart');charts[_0x14147a(0x1d7)]&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0x361259,{'type':'doughnut','data':{'labels':Object['keys'](_0x38b4e5),'datasets':[{'data':Object['values'](_0x38b4e5),'backgroundColor':['#808080','#CD7F32','#C0C0C0','#FFD700',_0x14147a(0x168)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':_0x14147a(0x129),'font':{'size':0x10}}}}});}catch(_0x48566f){console[_0x14147a(0x1ab)]('Error\x20creating\x20rank\x20distribution\x20chart:',_0x48566f),document['getElementById']('rank-distribution-chart')['innerHTML']='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function createActivityChart(){const _0x5ca9c8=a4_0x47be6c;try{const _0x571769=currentLadder==='D1'?_0x5ca9c8(0x2c1):'approvedMatchesD2',_0x467cf9=collection(db,_0x571769),_0x18395=new Date();_0x18395[_0x5ca9c8(0x2f1)](_0x18395['getDate']()-0x7);const _0x2650aa=query(_0x467cf9,where('approvedAt','>=',_0x18395),orderBy(_0x5ca9c8(0x1fa),_0x5ca9c8(0xde))),_0x1b3c2b=await getDocs(_0x2650aa),_0x282c28=['Sunday',_0x5ca9c8(0xfd),'Tuesday','Wednesday',_0x5ca9c8(0x297),_0x5ca9c8(0x181),'Saturday'],_0x15cb86=_0x282c28['reduce']((_0x2d7008,_0xa07121)=>({..._0x2d7008,[_0xa07121]:0x0}),{});_0x1b3c2b['forEach'](_0x5f2453=>{const _0x531a1d=_0x5ca9c8,_0x185865=_0x5f2453['data']();if(_0x185865['approvedAt']){const _0x278ef4=_0x282c28[new Date(_0x185865[_0x531a1d(0x1fa)]['seconds']*0x3e8)[_0x531a1d(0x162)]()];_0x15cb86[_0x278ef4]++;}});const _0x353ab2=document[_0x5ca9c8(0x10a)](_0x5ca9c8(0xc5));charts[_0x5ca9c8(0x20f)]&&charts['activity']['destroy'](),charts['activity']=new Chart(_0x353ab2,{'type':'bar','data':{'labels':_0x282c28,'datasets':[{'label':'Matches\x20Played','data':_0x282c28['map'](_0x510977=>_0x15cb86[_0x510977]),'backgroundColor':currentLadder==='D1'?_0x5ca9c8(0x187):'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?'#d32f2f':'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':'#e0e0e0'}},'title':{'display':!![],'text':currentLadder+'\x20Weekly\x20Activity','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x25abf1){console['error'](_0x5ca9c8(0x2b8),_0x25abf1),document['getElementById'](_0x5ca9c8(0xc5))[_0x5ca9c8(0x312)]='<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>';}}async function loadPlayersData(){const _0x5d4006=a4_0x47be6c,_0x311dc5=document[_0x5d4006(0x10a)]('players-table-body');if(!_0x311dc5)return;_0x311dc5[_0x5d4006(0x312)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>';try{let _0x4952c9=_0x5d4006(0x286);if(currentLadder==='D2')_0x4952c9='playersD2';else currentLadder==='D3'&&(_0x4952c9='playersD3');console['log']('Loading\x20players\x20from\x20'+_0x4952c9+'\x20collection...');const _0x33eb84=collection(db,_0x4952c9),_0x4b5da0=query(_0x33eb84,orderBy(_0x5d4006(0x1b4),_0x5d4006(0x1a5))),_0x312645=await getDocs(_0x4b5da0);if(_0x312645[_0x5d4006(0x177)]){_0x311dc5['innerHTML']=_0x5d4006(0x27a);return;}_0x311dc5['innerHTML']='';let _0x551965=0x1;_0x312645['forEach'](_0x43158c=>{const _0x51d9e8=_0x5d4006,_0x33b342=_0x43158c['data'](),_0x22eb55=getRankFromElo(_0x33b342['eloRating']||0x4b0),_0x23afde=getRankStyle(_0x33b342['eloRating']||0x4b0),_0x54876c=document[_0x51d9e8(0x12c)]('tr');_0x54876c['innerHTML']=_0x51d9e8(0x2d8)+_0x551965+_0x51d9e8(0x14c)+_0x23afde['color']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x33b342['username']||'Unknown')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>'+(_0x33b342['eloRating']||0x4b0)+_0x51d9e8(0x11b)+_0x23afde['color']+_0x51d9e8(0x314)+_0x22eb55+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x33b342['wins']||0x0)+'W\x20/\x20'+(_0x33b342['losses']||0x0)+'L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22'+_0x43158c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x43158c['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x311dc5['appendChild'](_0x54876c),_0x551965++;}),setupPlayerActionButtons();}catch(_0x2a95d8){console['error'](_0x5d4006(0x18a),_0x2a95d8),_0x311dc5[_0x5d4006(0x312)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0x2a95d8['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getRankFromElo(_0x48651b){const _0x601888=a4_0x47be6c;if(_0x48651b>=0x7d0)return'Emerald';if(_0x48651b>=0x708)return _0x601888(0x1d6);if(_0x48651b>=0x640)return _0x601888(0x147);if(_0x48651b>=0x578)return'Bronze';return'Unranked';}function setupPlayerActionButtons(){const _0x457554=a4_0x47be6c;document['querySelectorAll'](_0x457554(0x25a))['forEach'](_0x45f44c=>{const _0x40b8d8=_0x457554;_0x45f44c[_0x40b8d8(0x219)](_0x40b8d8(0x1ae),async _0x27769b=>{const _0x50100a=_0x27769b['currentTarget']['dataset']['id'];openEditPlayerModal(_0x50100a);});}),document[_0x457554(0x250)]('.delete-btn')['forEach'](_0x255bc7=>{const _0x41aaf9=_0x457554;_0x255bc7['addEventListener'](_0x41aaf9(0x1ae),async _0x1eb3bd=>{const _0x2bba4a=_0x1eb3bd['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x2bba4a);});});}async function openEditPlayerModal(_0x48b745){const _0x45c229=a4_0x47be6c;try{const _0x5e0fca=currentLadder==='D1'?'players':_0x45c229(0xbf),_0x5423ab=doc(db,_0x5e0fca,_0x48b745),_0x44e55a=await getDoc(_0x5423ab);if(!_0x44e55a['exists']()){showNotification(_0x45c229(0x1c8),_0x45c229(0x1ab));return;}const _0x4ec221=_0x44e55a['data'](),_0x3cdddc=document['getElementById']('edit-player-modal'),_0x2fe131=document['getElementById'](_0x45c229(0xee)),_0x2d523b=document['getElementById']('edit-elo'),_0x2aaae6=document[_0x45c229(0x10a)](_0x45c229(0x145)),_0x440554=document[_0x45c229(0x10a)](_0x45c229(0x157));_0x2fe131[_0x45c229(0x160)]=_0x4ec221['username']||'',_0x2d523b[_0x45c229(0x160)]=_0x4ec221[_0x45c229(0x1b4)]||0x4b0,_0x2aaae6['value']=_0x4ec221['wins']||0x0,_0x440554[_0x45c229(0x160)]=_0x4ec221['losses']||0x0,_0x3cdddc[_0x45c229(0x22b)][_0x45c229(0x202)]=_0x48b745,_0x3cdddc['classList']['add']('active');}catch(_0x50edbc){console[_0x45c229(0x1ab)]('Error\x20opening\x20edit\x20modal:',_0x50edbc),showNotification('Failed\x20to\x20load\x20player\x20data',_0x45c229(0x1ab));}}async function saveEditedPlayer(){const _0x46b5a6=a4_0x47be6c;try{const _0x466017=document[_0x46b5a6(0x10a)]('edit-player-modal'),_0x2bbac2=_0x466017['dataset'][_0x46b5a6(0x202)];if(!_0x2bbac2){showNotification(_0x46b5a6(0x182),'error');return;}const _0x3fdbc6=document['getElementById']('edit-username'),_0x369b9f=document['getElementById'](_0x46b5a6(0x180)),_0x465180=document['getElementById'](_0x46b5a6(0x145)),_0x3dc83f=document['getElementById'](_0x46b5a6(0x157)),_0x2dd472=_0x3fdbc6['value']['trim'](),_0xd42720=parseInt(_0x369b9f['value']),_0x478e0f=parseInt(_0x465180['value']),_0x4a200e=parseInt(_0x3dc83f[_0x46b5a6(0x160)]);if(!_0x2dd472||isNaN(_0xd42720)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x46b5a6(0x1ab));return;}const _0x1727ee=currentLadder==='D1'?'players':_0x46b5a6(0xbf),_0x207b4b=doc(db,_0x1727ee,_0x2bbac2),_0x4d91c7=await getDoc(_0x207b4b),_0x58fcb9=_0x4d91c7['exists']()?_0x4d91c7['data']():{},_0x27cc29=_0x58fcb9['eloRating']||0x4b0;await updateDoc(_0x207b4b,{'username':_0x2dd472,'eloRating':_0xd42720,'wins':_0x478e0f||0x0,'losses':_0x4a200e||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0xd42720!==_0x27cc29){const _0x39f6a3=currentLadder==='D1'?'eloHistory':'eloHistoryD2';await addDoc(collection(db,_0x39f6a3),{'player':_0x2dd472,'previousElo':_0x27cc29,'newElo':_0xd42720,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification(_0x46b5a6(0x30b),'success');}catch(_0x2d7b14){console['error'](_0x46b5a6(0x140),_0x2d7b14),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x2d7b14[_0x46b5a6(0x293)],'error');}}function closeEditPlayerModal(){const _0x5e592b=a4_0x47be6c,_0x4b81b8=document['getElementById']('edit-player-modal');_0x4b81b8[_0x5e592b(0x239)]['remove']('active'),_0x4b81b8['dataset']['playerId']='';}async function confirmDeletePlayer(_0x52a540){const _0x351bbe=a4_0x47be6c;if(confirm(_0x351bbe(0x2bf)))try{const _0x3e961f=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x3e961f,_0x52a540)),loadPlayersData(),showNotification(_0x351bbe(0x163),'success');}catch(_0x423164){console['error']('Error\x20deleting\x20player:',_0x423164),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x423164['message'],_0x351bbe(0x1ab));}}async function setupManagePlayersSection(){const _0x5807e6=a4_0x47be6c,_0x4d2d21=document[_0x5807e6(0x10a)]('add-player-form');_0x4d2d21&&_0x4d2d21['addEventListener']('submit',async _0x1772c3=>{const _0x2e5fb0=_0x5807e6;_0x1772c3[_0x2e5fb0(0x287)](),await addNewPlayer();});const _0x211cca=document['getElementById'](_0x5807e6(0x100));_0x211cca&&_0x211cca[_0x5807e6(0x219)]('input',debounce(filterPlayerTable,0x12c));const _0x343e4b=document[_0x5807e6(0x10a)]('save-player-btn');_0x343e4b&&_0x343e4b['addEventListener']('click',saveEditedPlayer);const _0x1090e2=document['getElementById']('cancel-edit-btn');_0x1090e2&&_0x1090e2['addEventListener']('click',closeEditPlayerModal);const _0x56731c=document['getElementById']('edit-player-modal');_0x56731c&&_0x56731c['addEventListener']('click',_0x1a6d64=>{_0x1a6d64['target']===_0x56731c&&closeEditPlayerModal();});const _0x5287f7=document[_0x5807e6(0x10a)]('players-ladder-selector');_0x5287f7&&_0x5287f7['addEventListener']('change',()=>{currentLadder=_0x5287f7['value'],loadPlayersData();});}async function addNewPlayer(){const _0x5952b9=a4_0x47be6c;try{const _0x34a91d=document['getElementById']('new-player-username'),_0x468581=document['getElementById']('new-player-elo'),_0x3e5884=_0x34a91d['value']['trim'](),_0x459691=parseInt(_0x468581['value'])||0x4b0;if(!_0x3e5884){alert(_0x5952b9(0x274));return;}console['log'](_0x5952b9(0x308)+_0x3e5884+'\x20with\x20ELO\x20'+_0x459691+'\x20to\x20'+currentLadder+'\x20ladder');let _0x2bba00='players',_0x43b81e='eloHistory';if(currentLadder==='D2')_0x2bba00='playersD2',_0x43b81e='eloHistoryD2';else currentLadder==='D3'&&(_0x2bba00='playersD3',_0x43b81e='eloHistoryD3');const _0x656456=query(collection(db,_0x2bba00),where('username','==',_0x3e5884)),_0x471c5d=await getDocs(_0x656456);if(!_0x471c5d['empty']){alert('Username\x20'+_0x3e5884+'\x20already\x20exists\x20in\x20'+currentLadder+'\x20ladder');return;}const _0x59d37e=auth[_0x5952b9(0x300)],_0x50435f={'username':_0x3e5884,'eloRating':_0x459691,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x59d37e?_0x59d37e['email']:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x2bba00),_0x50435f),await addDoc(collection(db,_0x43b81e),{'player':_0x3e5884,'previousElo':0x4b0,'newElo':_0x459691,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x59d37e?_0x59d37e[_0x5952b9(0x208)]:_0x5952b9(0x17d),'gameMode':currentLadder}),_0x34a91d['value']='',_0x468581['value']='1200',alert(_0x5952b9(0x13a)+_0x3e5884+_0x5952b9(0x243)+currentLadder+'\x20ladder!'),loadPlayersData();}catch(_0x41ff90){console[_0x5952b9(0x1ab)]('Error\x20adding\x20player:',_0x41ff90),alert('Error\x20adding\x20player:\x20'+_0x41ff90[_0x5952b9(0x293)]);}}document[a4_0x47be6c(0x219)](a4_0x47be6c(0x216),()=>{const _0x188581=a4_0x47be6c,_0x5d5d8a=document['getElementById']('add-player-form');_0x5d5d8a&&_0x5d5d8a[_0x188581(0x219)]('submit',_0x440654=>{const _0x4d78e1=_0x188581;_0x440654[_0x4d78e1(0x287)](),addNewPlayer();});});function filterPlayerTable(){const _0x3b2e1b=a4_0x47be6c,_0x4a1c5b=document['getElementById']('player-search')[_0x3b2e1b(0x160)][_0x3b2e1b(0x166)](),_0x32c746=document[_0x3b2e1b(0x250)]('#players-table-body\x20tr');let _0x2b53ac=0x0;_0x32c746['forEach'](_0x212e84=>{const _0x27c905=_0x3b2e1b,_0xabbdea=_0x212e84['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0xabbdea['includes'](_0x4a1c5b)?(_0x212e84['style']['display']='',_0x2b53ac++):_0x212e84['style']['display']=_0x27c905(0x18f);});const _0x49216d=document['getElementById'](_0x3b2e1b(0x173));_0x49216d&&(_0x2b53ac===0x0&&_0x4a1c5b!==''?_0x49216d['style']['display']=_0x3b2e1b(0x1b5):_0x49216d['style']['display']='none');}function debounce(_0x5e3a3f,_0x39af5f){let _0x175433;return function(..._0x7081a7){const _0xca956d=a4_0x3520;clearTimeout(_0x175433),_0x175433=setTimeout(()=>_0x5e3a3f[_0xca956d(0x11c)](this,_0x7081a7),_0x39af5f);};}async function loadEloHistory(_0x4d8811=0x1){const _0x53d195=a4_0x47be6c,_0x48ec1b=document[_0x53d195(0x10a)]('elo-history-table-body'),_0x1e3d96=currentLadder['toLowerCase']();if(!_0x48ec1b)return;_0x48ec1b['innerHTML']=_0x53d195(0x1cf);try{const _0x61a19b=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?'eloHistoryD2':_0x53d195(0x1d3),_0x3cf378=collection(db,_0x61a19b);let _0x546a12;if(_0x4d8811>eloHistoryPagination[_0x1e3d96]['page']&&eloHistoryPagination[_0x1e3d96]['lastVisible'])_0x546a12=query(_0x3cf378,orderBy('timestamp',_0x53d195(0x1a5)),startAfter(eloHistoryPagination[_0x1e3d96]['lastVisible']),limit(PAGE_SIZE));else _0x4d8811<eloHistoryPagination[_0x1e3d96]['page']&&eloHistoryPagination[_0x1e3d96][_0x53d195(0x265)]?_0x546a12=query(_0x3cf378,orderBy('timestamp',_0x53d195(0x1a5)),endBefore(eloHistoryPagination[_0x1e3d96][_0x53d195(0x265)]),limitToLast(PAGE_SIZE)):_0x546a12=query(_0x3cf378,orderBy('timestamp',_0x53d195(0x1a5)),limit(PAGE_SIZE));const _0xcfd3ad=await getDocs(_0x546a12);if(_0xcfd3ad['empty']){_0x48ec1b[_0x53d195(0x312)]='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>',document[_0x53d195(0x10a)](_0x1e3d96+'-page-indicator')['textContent']=_0x53d195(0x169);return;}eloHistoryPagination[_0x1e3d96]['page']=_0x4d8811,eloHistoryPagination[_0x1e3d96]['firstVisible']=_0xcfd3ad['docs'][0x0],eloHistoryPagination[_0x1e3d96]['lastVisible']=_0xcfd3ad['docs'][_0xcfd3ad[_0x53d195(0x153)]['length']-0x1];const _0x5f06f0=new Map();_0x48ec1b[_0x53d195(0x312)]='';const _0x1867f3=async _0x2505ac=>{const _0x2f1395=_0x53d195;if(typeof _0x2505ac!=='string'||_0x2505ac['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x2505ac))return _0x2505ac;if(_0x5f06f0[_0x2f1395(0x174)](_0x2505ac))return _0x5f06f0['get'](_0x2505ac);try{for(const _0x131c36 of['players',_0x2f1395(0xbf),_0x2f1395(0x1b2),'nonParticipants']){const _0x1fdca7=await getDoc(doc(db,_0x131c36,_0x2505ac));if(_0x1fdca7[_0x2f1395(0x21f)]()&&_0x1fdca7['data']()[_0x2f1395(0x1e5)]){const _0x31814d=_0x1fdca7['data']()[_0x2f1395(0x1e5)];return _0x5f06f0[_0x2f1395(0x2c0)](_0x2505ac,_0x31814d),_0x31814d;}}return _0x2505ac;}catch(_0x73c50e){return console[_0x2f1395(0xd8)]('Error\x20resolving\x20username\x20for\x20'+_0x2505ac+':',_0x73c50e),_0x2505ac;}};for(const _0x10b1d6 of _0xcfd3ad['docs']){const _0x5ce52c=_0x10b1d6['data'](),_0x1ef461=document['createElement']('tr'),_0x1a26e8=_0x5ce52c['timestamp']?new Date(_0x5ce52c['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x16455f=_0x5ce52c['newElo']-_0x5ce52c[_0x53d195(0xc2)],_0x9c72a2=_0x16455f>0x0?'positive-change':_0x16455f<0x0?_0x53d195(0x23e):'',_0x3e2f28=_0x16455f>0x0?'+':'',_0x542954=_0x5ce52c[_0x53d195(0xf8)]||_0x5ce52c['username']||_0x5ce52c[_0x53d195(0xfa)]||'N/A',_0x41ad1c=await _0x1867f3(_0x542954);_0x1ef461['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x1a26e8+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x41ad1c+_0x53d195(0x1db)+(_0x5ce52c[_0x53d195(0xc2)]||_0x53d195(0x10e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x5ce52c['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x9c72a2+'\x22>'+_0x3e2f28+_0x16455f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x5ce52c[_0x53d195(0x125)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5ce52c['modifiedBy']||_0x5ce52c['promotedBy']||_0x5ce52c['demotedBy']||'System')+_0x53d195(0x1bd),_0x48ec1b['appendChild'](_0x1ef461);}document['getElementById'](_0x1e3d96+'-page-indicator')['textContent']=_0x53d195(0x28a)+_0x4d8811;const _0x45fe02=document[_0x53d195(0x10a)](_0x1e3d96+'-prev-page'),_0x65af97=document['getElementById'](_0x1e3d96+_0x53d195(0x198));if(_0x45fe02)_0x45fe02['disabled']=_0x4d8811<=0x1;const _0x23a65f=query(_0x3cf378,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x1e3d96]['lastVisible']),limit(0x1)),_0x37e45b=await getDocs(_0x23a65f);if(_0x65af97)_0x65af97['disabled']=_0x37e45b[_0x53d195(0x177)];}catch(_0x32a624){console['error'](_0x53d195(0x2e4),_0x32a624),_0x48ec1b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x32a624['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x430b59){const _0x5b2abb=a4_0x47be6c;switch(_0x430b59){case'match_result':return'Match\x20Result';case'promotion':return _0x5b2abb(0x156);case _0x5b2abb(0x1dc):return'Demotion';case _0x5b2abb(0xcd):return'Admin\x20Adjustment';case'initial_placement':return _0x5b2abb(0x215);default:return _0x430b59||'Unknown';}}function setupEloHistorySection(){const _0xcc373=a4_0x47be6c;document['getElementById']('d1-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document[_0xcc373(0x10a)]('d1-next-page')['addEventListener'](_0xcc373(0x1ae),()=>{const _0x32f075=_0xcc373;loadEloHistory(eloHistoryPagination['d1'][_0x32f075(0x2af)]+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']-0x1);}),document['getElementById'](_0xcc373(0x244))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d2']['page']+0x1);});const _0x5912af=document['getElementById']('d3-prev-page'),_0x59edf0=document[_0xcc373(0x10a)]('d3-next-page');_0x5912af&&_0x5912af[_0xcc373(0x219)]('click',()=>{const _0x502c2a=_0xcc373;loadEloHistory(eloHistoryPagination['d3'][_0x502c2a(0x2af)]-0x1);});_0x59edf0&&_0x59edf0['addEventListener']('click',()=>{const _0x1e8258=_0xcc373;loadEloHistory(eloHistoryPagination['d3'][_0x1e8258(0x2af)]+0x1);});const _0x23c2cf=document['getElementById']('elo-history-search');_0x23c2cf&&_0x23c2cf['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x2733ba=document[_0xcc373(0x10a)](_0xcc373(0x1ff));_0x2733ba&&_0x2733ba['addEventListener']('change',applyEloHistoryFilters);const _0x974b33=document[_0xcc373(0x10a)](_0xcc373(0x295));_0x974b33&&_0x974b33['addEventListener'](_0xcc373(0x1ae),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x4d7886=a4_0x47be6c,_0x1430c6=document[_0x4d7886(0x10a)](_0x4d7886(0x28b))[_0x4d7886(0x160)]['toLowerCase'](),_0x206d31=document['querySelectorAll']('#elo-history-table-body\x20tr');let _0x17cc26=0x0;_0x206d31['forEach'](_0x209be5=>{const _0x258c53=_0x4d7886;if(_0x209be5[_0x258c53(0x239)][_0x258c53(0x2ae)]('loading-cell')||_0x209be5['classList']['contains']('empty-state')||_0x209be5['classList']['contains'](_0x258c53(0xe2)))return;const _0x900e3a=_0x209be5[_0x258c53(0x229)]('.player')?.[_0x258c53(0x1b6)]['toLowerCase']()||'',_0x5f02a1=_0x209be5['querySelector']('.type')?.['textContent'][_0x258c53(0x166)]()||'',_0x1572d2=_0x209be5['querySelector'](_0x258c53(0x102))?.['textContent']['toLowerCase']()||'';_0x900e3a['includes'](_0x1430c6)||_0x5f02a1['includes'](_0x1430c6)||_0x1572d2[_0x258c53(0x2f4)](_0x1430c6)?(_0x209be5[_0x258c53(0x1e1)]['display']='',_0x17cc26++):_0x209be5['style']['display']=_0x258c53(0x18f);});}async function applyEloHistoryFilters(){const _0xd74245=a4_0x47be6c,_0x8c0198=document['getElementById'](_0xd74245(0x200))[_0xd74245(0x160)],_0x1b3a22=document['getElementById']('history-end-date')['value'],_0x133f92=document['getElementById'](_0xd74245(0x1ff))['value'],_0x5f5739=currentLadder['toLowerCase']();eloHistoryPagination[_0x5f5739]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x58d8d3=document['getElementById']('elo-history-table-body');_0x58d8d3['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x14b2d6=currentLadder==='D1'?'eloHistory':_0xd74245(0x190),_0x1ce212=collection(db,_0x14b2d6);let _0x2df1a7=[orderBy(_0xd74245(0x131),'desc')];if(_0x8c0198){const _0x4e12dc=new Date(_0x8c0198);_0x4e12dc[_0xd74245(0xf6)](0x0,0x0,0x0,0x0),_0x2df1a7[_0xd74245(0x111)](where('timestamp','>=',_0x4e12dc));}if(_0x1b3a22){const _0x29c348=new Date(_0x1b3a22);_0x29c348[_0xd74245(0xf6)](0x17,0x3b,0x3b,0x3e7),_0x2df1a7['push'](where(_0xd74245(0x131),'<=',_0x29c348));}_0x133f92&&_0x133f92!=='all'&&_0x2df1a7['push'](where('type','==',_0x133f92));_0x2df1a7[_0xd74245(0x111)](limit(PAGE_SIZE));const _0x525505=query(_0x1ce212,..._0x2df1a7),_0x5a8a9e=await getDocs(_0x525505);!_0x5a8a9e['empty']&&(eloHistoryPagination[_0x5f5739][_0xd74245(0x265)]=_0x5a8a9e['docs'][0x0],eloHistoryPagination[_0x5f5739]['lastVisible']=_0x5a8a9e['docs'][_0x5a8a9e[_0xd74245(0x153)]['length']-0x1]);_0x58d8d3['innerHTML']='';if(_0x5a8a9e['empty']){_0x58d8d3['innerHTML']=_0xd74245(0x150);return;}_0x5a8a9e['forEach'](_0x339c03=>{const _0x5c1390=_0xd74245,_0x359782=_0x339c03['data'](),_0x2f6997=document['createElement']('tr'),_0x16a189=_0x359782['timestamp']?new Date(_0x359782['timestamp']['seconds']*0x3e8)['toLocaleString']():'N/A',_0x662cb7=_0x359782['newElo']-_0x359782['previousElo'],_0x3483c5=_0x662cb7>0x0?'positive-change':_0x662cb7<0x0?'negative-change':'',_0x4e71a0=_0x662cb7>0x0?'+':'',_0x36d246=_0x359782['player']||_0x359782[_0x5c1390(0x1e5)]||_0x359782[_0x5c1390(0xfa)]||'N/A';_0x2f6997[_0x5c1390(0x312)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x16a189+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x36d246+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x359782[_0x5c1390(0xc2)]||_0x5c1390(0x10e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x359782['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x3483c5+'\x22>'+_0x4e71a0+_0x662cb7+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x359782[_0x5c1390(0x125)])+_0x5c1390(0x2c7)+(_0x359782[_0x5c1390(0x188)]||_0x359782['promotedBy']||_0x359782[_0x5c1390(0x14e)]||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x58d8d3['appendChild'](_0x2f6997);}),document['getElementById'](_0x5f5739+'-page-indicator')['textContent']=_0xd74245(0x169);}catch(_0x425364){console[_0xd74245(0x1ab)](_0xd74245(0x30f),_0x425364),_0x58d8d3['innerHTML']=_0xd74245(0x109)+_0x425364['message']+_0xd74245(0xcb);}}function resetEloHistoryFilters(){const _0x2e01d7=a4_0x47be6c;document['getElementById']('history-start-date')['value']='',document['getElementById'](_0x2e01d7(0x1ca))['value']='',document['getElementById']('history-type-filter')['value']=_0x2e01d7(0x2b4),document['getElementById']('elo-history-search')['value']='';const _0x21a5f7=currentLadder[_0x2e01d7(0x166)]();eloHistoryPagination[_0x21a5f7]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x2a0cd0=a4_0x47be6c,_0x4703f6=document['getElementById']('promote-player-btn'),_0x4f52f7=document[_0x2a0cd0(0x10a)](_0x2a0cd0(0xf0)),_0x147867=document[_0x2a0cd0(0x10a)]('promote-form');_0x4703f6&&_0x4f52f7&&_0x147867&&(_0x4703f6[_0x2a0cd0(0x219)]('click',()=>{const _0xa6c146=_0x2a0cd0;_0x4f52f7['classList']['add'](_0xa6c146(0x2d0));}),_0x4f52f7['addEventListener']('click',_0x3d091b=>{const _0x4131df=_0x2a0cd0;_0x3d091b['target']===_0x4f52f7&&_0x4f52f7[_0x4131df(0x239)][_0x4131df(0x112)](_0x4131df(0x2d0));}),_0x147867[_0x2a0cd0(0x219)]('submit',async _0x1f89ca=>{const _0x2f96b3=_0x2a0cd0;_0x1f89ca['preventDefault']();const _0x470880=document['getElementById'](_0x2f96b3(0x296)),_0x449c64=document['getElementById'](_0x2f96b3(0xdc)),_0x14e817=_0x470880[_0x2f96b3(0x160)][_0x2f96b3(0x2cf)](),_0xba4490=_0x449c64['value'];if(!_0x14e817){showNotification(_0x2f96b3(0xfc),_0x2f96b3(0x1ab));return;}try{await promotePlayer(_0x14e817,_0xba4490),_0x4f52f7[_0x2f96b3(0x239)]['remove']('active'),_0x470880[_0x2f96b3(0x160)]='';}catch(_0x3911d6){showNotification(_0x3911d6[_0x2f96b3(0x293)],'error');}}),document[_0x2a0cd0(0x10a)](_0x2a0cd0(0xc6))['addEventListener']('click',()=>{const _0x15fd82=_0x2a0cd0;_0x4f52f7[_0x15fd82(0x239)][_0x15fd82(0x112)]('active');}));const _0x13bcd8=document['getElementById']('demote-player-btn'),_0x401851=document['getElementById']('demote-modal'),_0xe07fd6=document[_0x2a0cd0(0x10a)]('demote-form');_0x13bcd8&&_0x401851&&_0xe07fd6&&(_0x13bcd8['addEventListener']('click',()=>{const _0x332926=_0x2a0cd0;_0x401851[_0x332926(0x239)]['add']('active');}),_0x401851['addEventListener']('click',_0x1fefef=>{const _0x534b27=_0x2a0cd0;_0x1fefef['target']===_0x401851&&_0x401851['classList'][_0x534b27(0x112)](_0x534b27(0x2d0));}),_0xe07fd6[_0x2a0cd0(0x219)]('submit',async _0x1b9fce=>{const _0x43e2ab=_0x2a0cd0;_0x1b9fce[_0x43e2ab(0x287)]();const _0x5b6ebf=document[_0x43e2ab(0x10a)]('demote-username'),_0x304118=document[_0x43e2ab(0x10a)](_0x43e2ab(0x280)),_0x12f4af=_0x5b6ebf['value']['trim'](),_0x5dace3=_0x304118[_0x43e2ab(0x160)];if(!_0x12f4af){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x12f4af,_0x5dace3),document['getElementById']('demote-modal')['classList']['remove']('active'),document[_0x43e2ab(0x10a)](_0x43e2ab(0x27c))['value']='';}catch(_0x6a6375){console[_0x43e2ab(0x1ab)](_0x43e2ab(0x15b),_0x6a6375);}}));const _0x45c054=document['getElementById']('set-elo-btn'),_0x3bb8c6=document['getElementById'](_0x2a0cd0(0x309)),_0x737a1e=document['getElementById'](_0x2a0cd0(0xbe));_0x45c054&&_0x3bb8c6&&_0x737a1e&&(_0x45c054['addEventListener']('click',()=>{const _0x4f961b=_0x2a0cd0;_0x3bb8c6[_0x4f961b(0x239)]['add']('active');}),_0x3bb8c6['addEventListener'](_0x2a0cd0(0x1ae),_0x36ae86=>{const _0x394c9e=_0x2a0cd0;_0x36ae86[_0x394c9e(0x17c)]===_0x3bb8c6&&_0x3bb8c6['classList']['remove']('active');}),_0x737a1e['addEventListener']('submit',async _0x3fae20=>{const _0x97541c=_0x2a0cd0;_0x3fae20[_0x97541c(0x287)]();const _0x351f18=document['getElementById']('set-elo-username'),_0x4a858b=document[_0x97541c(0x10a)]('set-elo-value');let _0x48cd3d;const _0x390ff7=document['getElementById']('set-elo-ladder'),_0x184f4b=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x390ff7)_0x48cd3d=_0x390ff7['value'];else _0x184f4b?_0x48cd3d=_0x184f4b[_0x97541c(0x160)]:_0x48cd3d='D1';if(!_0x351f18||!_0x4a858b){showNotification('Form\x20elements\x20are\x20missing',_0x97541c(0x1ab));return;}const _0x271eea=_0x351f18['value']['trim'](),_0x52d99b=parseInt(_0x4a858b['value']);if(!_0x271eea||isNaN(_0x52d99b)){showNotification(_0x97541c(0x2ce),'error');return;}try{await setCustomElo(_0x271eea,_0x52d99b,_0x48cd3d),_0x3bb8c6[_0x97541c(0x239)]['remove'](_0x97541c(0x2d0)),_0x351f18['value']='',_0x4a858b['value']='';}catch(_0x18c140){showNotification(_0x18c140['message'],'error');}}),document['getElementById'](_0x2a0cd0(0x130))['addEventListener']('click',()=>{const _0x33e435=_0x2a0cd0;_0x3bb8c6['classList'][_0x33e435(0x112)]('active');}));const _0x376afd=document['getElementById']('set-role-modal'),_0x5860a7=document[_0x2a0cd0(0x10a)](_0x2a0cd0(0xd4));if(_0x376afd&&_0x5860a7){_0x376afd['addEventListener']('click',_0x32391d=>{_0x32391d['target']===_0x376afd&&closeModalHandler();}),_0x5860a7['addEventListener'](_0x2a0cd0(0x259),async _0x936478=>{const _0x32930f=_0x2a0cd0;_0x936478[_0x32930f(0x287)]();const _0x13e316=document[_0x32930f(0x10a)]('role-username'),_0xb167cf=document['getElementById']('role-name'),_0x4ba62f=document['getElementById'](_0x32930f(0x2d1)),_0x3c2d60=_0x13e316['value']['trim'](),_0x58c39c=_0xb167cf['value']['trim'](),_0x478817=_0x4ba62f['value'];if(!_0x3c2d60){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x3c2d60,_0x58c39c,_0x478817),closeModalHandler(),loadUsersWithRoles();}catch(_0x5eed17){}});const _0x2b4929=document['getElementById']('cancel-role-btn');_0x2b4929&&(_0x2b4929[_0x2a0cd0(0x240)]('click',closeModalHandler),_0x2b4929['addEventListener']('click',closeModalHandler));}}async function promotePlayer(_0x34733d,_0x26ae26){const _0x162afb=a4_0x47be6c;try{console['log'](_0x162afb(0xe8)+_0x34733d+'\x20in\x20'+_0x26ae26+'\x20ladder');const _0x41846f=auth['currentUser'];if(!_0x41846f)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x53e32b=_0x26ae26==='D2'?'playersD2':_0x162afb(0x286),_0x392d5d=_0x26ae26==='D2'?_0x162afb(0x190):'eloHistory';console['log']('Searching\x20for\x20player\x20in\x20'+_0x53e32b);const _0x3df085=collection(db,_0x53e32b),_0x3cb3f4=query(_0x3df085,where('username','==',_0x34733d)),_0x40c600=await getDocs(_0x3cb3f4);if(_0x40c600['empty']){alert('Player\x20not\x20found\x20in\x20'+_0x26ae26+'\x20ladder');throw new Error('Player\x20not\x20found\x20in\x20'+_0x26ae26+'\x20ladder');}const _0xd40465=_0x40c600['docs'][0x0],_0x546eef=_0xd40465[_0x162afb(0x120)](),_0x48fe37=_0x546eef['eloRating']||0x4b0,_0x6aa72a=_0xd40465['id'];console[_0x162afb(0x1c9)]('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x48fe37);const _0x2626fb=[{'name':'Bronze','elo':0x578},{'name':_0x162afb(0x147),'elo':0x640},{'name':_0x162afb(0x1d6),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x233870=_0x2626fb['find'](_0x57adfb=>_0x57adfb[_0x162afb(0x132)]>_0x48fe37);if(!_0x233870){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x26ae26+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x26ae26+'\x20ladder');}console[_0x162afb(0x1c9)](_0x162afb(0x1f1)+_0x233870['name']+'\x20('+_0x233870['elo']+')'),await updateDoc(doc(db,_0x53e32b,_0xd40465['id']),{'eloRating':_0x233870['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x41846f['email']||'admin'}),await addDoc(collection(db,_0x392d5d),{'player':_0x34733d,'previousElo':_0x48fe37,'newElo':_0x233870['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x233870[_0x162afb(0x2e8)],'promotedBy':_0x41846f['email']||'admin','gameMode':_0x26ae26});try{const {promotionManager:_0x21f134}=await import('./promotions.js'),_0x81c36c=_0x21f134['getRankName'](_0x48fe37),_0x3266bb=_0x233870['name'];await _0x21f134['sendPromotionNotification'](_0x6aa72a,_0x34733d,_0x48fe37,_0x233870[_0x162afb(0x132)],_0x81c36c,_0x3266bb,'promotion',{'displayName':_0x34733d,'source':'admin','adminUser':_0x41846f[_0x162afb(0x208)],'ladder':_0x26ae26}),console[_0x162afb(0x1c9)](_0x162afb(0x1b3));}catch(_0x5b457c){console['error']('Failed\x20to\x20send\x20Discord\x20notification:',_0x5b457c);}return alert('Successfully\x20promoted\x20'+_0x34733d+'\x20to\x20'+_0x233870['name']+'\x20('+_0x233870[_0x162afb(0x132)]+')'),currentLadder===_0x26ae26&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0xd5504b){console['error'](_0x162afb(0x19f),_0xd5504b),alert(_0x162afb(0x1a7)+_0xd5504b['message']);throw _0xd5504b;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x1ee54c=a4_0x47be6c,_0x43bf1c=document['getElementById'](_0x1ee54c(0x142));_0x43bf1c&&_0x43bf1c[_0x1ee54c(0x219)](_0x1ee54c(0x259),async _0x353994=>{const _0x2607e2=_0x1ee54c;_0x353994[_0x2607e2(0x287)]();const _0x772ec5=document['getElementById']('promote-username')['value']['trim'](),_0x765891=document['querySelector']('input[name=\x22promote-ladder\x22]:checked')['value'];if(!_0x772ec5){alert(_0x2607e2(0xfc));return;}try{await promotePlayer(_0x772ec5,_0x765891),document['getElementById']('promote-modal')['classList'][_0x2607e2(0x112)]('active'),document['getElementById']('promote-username')['value']='';}catch(_0x16ee39){console['error']('Error\x20in\x20promotion:',_0x16ee39);}});});async function demotePlayer(_0x510853,_0x50681b){const _0xa05317=a4_0x47be6c;try{console[_0xa05317(0x1c9)]('Attempting\x20to\x20demote\x20'+_0x510853+'\x20in\x20'+_0x50681b+'\x20ladder');const _0x525e25=auth['currentUser'];if(!_0x525e25)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x54fa1e=_0x50681b==='D2'?'playersD2':_0xa05317(0x286),_0x3bd774=_0x50681b==='D2'?_0xa05317(0x190):_0xa05317(0x2bc);console['log']('Searching\x20for\x20player\x20in\x20'+_0x54fa1e);const _0x278bb8=collection(db,_0x54fa1e),_0x3fcef6=query(_0x278bb8,where('username','==',_0x510853)),_0x26c620=await getDocs(_0x3fcef6);if(_0x26c620['empty']){alert(_0xa05317(0x1ad)+_0x50681b+'\x20ladder');throw new Error(_0xa05317(0x1ad)+_0x50681b+_0xa05317(0xc8));}const _0x1a3670=_0x26c620['docs'][0x0],_0x18a340=_0x1a3670[_0xa05317(0x120)](),_0x45a371=_0x18a340['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x45a371);const _0x179052=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':'Bronze','elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x2cd4e4=_0x179052['find'](_0x5ba677=>_0x5ba677[_0xa05317(0x132)]<_0x45a371);if(!_0x2cd4e4){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x50681b+_0xa05317(0xc8));throw new Error('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0x50681b+_0xa05317(0xc8));}console['log']('Demoting\x20player\x20to\x20'+_0x2cd4e4[_0xa05317(0x2e8)]+'\x20('+_0x2cd4e4['elo']+')'),await updateDoc(doc(db,_0x54fa1e,_0x1a3670['id']),{'eloRating':_0x2cd4e4['elo'],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x525e25['email']||_0xa05317(0x17d)}),await addDoc(collection(db,_0x3bd774),{'player':_0x510853,'previousElo':_0x45a371,'newElo':_0x2cd4e4['elo'],'timestamp':serverTimestamp(),'type':'demotion','rankAchieved':_0x2cd4e4['name'],'demotedBy':_0x525e25['email']||'admin','gameMode':_0x50681b});try{const {promotionManager:_0x361aff}=await import(_0xa05317(0x22c)),_0x54eed7=_0x361aff['getRankName'](_0x45a371),_0x4472f6=_0x2cd4e4['name'];await _0x361aff[_0xa05317(0x278)](_0x1a3670['id'],_0x510853,_0x45a371,_0x2cd4e4[_0xa05317(0x132)],_0x54eed7,_0x4472f6,_0xa05317(0x1dc),{'displayName':_0x510853,'source':'admin','adminUser':_0x525e25[_0xa05317(0x208)],'ladder':_0x50681b}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x29b883){console['error'](_0xa05317(0x1d4),_0x29b883);}return alert('Successfully\x20demoted\x20'+_0x510853+'\x20to\x20'+_0x2cd4e4[_0xa05317(0x2e8)]+'\x20('+_0x2cd4e4['elo']+')'),currentLadder===_0x50681b&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x1d1875){console['error']('Error\x20demoting\x20player:',_0x1d1875),alert(_0xa05317(0x1ea)+_0x1d1875[_0xa05317(0x293)]);throw _0x1d1875;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x3ae750=document['getElementById']('demote-form');_0x3ae750&&_0x3ae750['addEventListener']('submit',async _0x48724b=>{const _0xe3ab8=a4_0x3520;_0x48724b[_0xe3ab8(0x287)]();const _0x1812cb=document[_0xe3ab8(0x10a)]('demote-username')['value']['trim'](),_0x15937f=document['querySelector']('input[name=\x22demote-ladder\x22]:checked')['value'];if(!_0x1812cb){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x1812cb,_0x15937f),document['getElementById']('demote-modal')['classList']['remove'](_0xe3ab8(0x2d0)),document[_0xe3ab8(0x10a)](_0xe3ab8(0x27c))['value']='';}catch(_0x512b63){console['error']('Error\x20in\x20demotion:',_0x512b63);}});});async function setCustomElo(_0x2b6970,_0x39e6e9,_0x5f314e){const _0x27d118=a4_0x47be6c;try{const _0x4710e5=auth[_0x27d118(0x300)];if(!_0x4710e5||!isAdmin(_0x4710e5['email']))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x2f5fc4=_0x5f314e==='D2'?'playersD2':'players',_0x3c2544=_0x5f314e==='D2'?_0x27d118(0x190):'eloHistory',_0x2386ec=collection(db,_0x2f5fc4),_0x1d1810=query(_0x2386ec,where('username','==',_0x2b6970)),_0x512545=await getDocs(_0x1d1810);if(_0x512545[_0x27d118(0x177)])throw new Error(_0x27d118(0x1ad)+_0x5f314e+_0x27d118(0xc8));const _0x439e03=_0x512545['docs'][0x0],_0x3079ea=_0x439e03['data'](),_0xe2a073=_0x3079ea[_0x27d118(0x1b4)]||0x4b0,_0x38b721=writeBatch(db);_0x38b721['update'](doc(db,_0x2f5fc4,_0x439e03['id']),{'eloRating':_0x39e6e9,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x4710e5['email']});const _0x3f831a=doc(collection(db,_0x3c2544));return _0x38b721['set'](_0x3f831a,{'player':_0x2b6970,'previousElo':_0xe2a073,'newElo':_0x39e6e9,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':_0x4710e5['email'],'gameMode':_0x5f314e}),await _0x38b721['commit'](),showNotification(_0x27d118(0x10b)+_0x2b6970+'\x20was\x20updated\x20from\x20'+_0xe2a073+'\x20to\x20'+_0x39e6e9,_0x27d118(0x22a)),currentLadder===_0x5f314e&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x4391ce){console['error']('Error\x20setting\x20custom\x20ELO:',_0x4391ce);throw _0x4391ce;}}async function setUserRole(_0x327ef5,_0x3bee9f,_0x5165b4){const _0x5c4f66=a4_0x47be6c;try{const _0x148b6c=auth['currentUser'];if(!_0x148b6c||!isAdmin(_0x148b6c[_0x5c4f66(0x208)]))throw new Error(_0x5c4f66(0x2df));const _0x7a7eaa=_0x3bee9f?_0x3bee9f[_0x5c4f66(0x2cf)]():null,_0x528c0c=_0x7a7eaa?_0x5165b4||_0x5c4f66(0x1f2):null,[_0x6a3ada,_0x582c70]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x327ef5))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x327ef5)))]),_0x476153=[];if(!_0x6a3ada['empty'])_0x476153[_0x5c4f66(0x111)]({'ref':_0x6a3ada['docs'][0x0][_0x5c4f66(0xd6)],'source':'D1'});if(!_0x582c70['empty'])_0x476153[_0x5c4f66(0x111)]({'ref':_0x582c70['docs'][0x0]['ref'],'source':'D2'});if(_0x476153[_0x5c4f66(0x227)]===0x0){const [_0xee6345,_0xd77678]=await Promise['all']([getDocs(query(collection(db,'nonParticipants'),where('username','==',_0x327ef5))),getDocs(query(collection(db,_0x5c4f66(0x2fb)),where('username','==',_0x327ef5)))]);if(!_0xee6345[_0x5c4f66(0x177)])_0x476153['push']({'ref':_0xee6345['docs'][0x0][_0x5c4f66(0xd6)],'source':_0x5c4f66(0x2bb)});if(!_0xd77678['empty'])_0x476153['push']({'ref':_0xd77678['docs'][0x0]['ref'],'source':_0x5c4f66(0x261)});}if(_0x476153[_0x5c4f66(0x227)]===0x0)throw new Error('User\x20\x22'+_0x327ef5+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x2b191a=writeBatch(db);_0x476153['forEach'](_0x49fa32=>{const _0x445ad2=_0x5c4f66;console['log']('Updating\x20role\x20for\x20'+_0x327ef5+'\x20in\x20'+_0x49fa32['source']),!_0x7a7eaa?_0x2b191a['update'](_0x49fa32['ref'],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x2b191a['update'](_0x49fa32[_0x445ad2(0xd6)],{'roleName':_0x7a7eaa,'roleColor':_0x528c0c,'roleAssignedBy':_0x148b6c['email'],'roleAssignedAt':serverTimestamp()});}),await _0x2b191a[_0x5c4f66(0xd3)]();const _0x1ef411=_0x7a7eaa?'Role\x20\x22'+_0x7a7eaa+'\x22\x20set':'Role\x20removed';return showNotification(_0x1ef411+'\x20for\x20user\x20\x22'+_0x327ef5+'\x22',_0x5c4f66(0x22a)),!![];}catch(_0x48ed46){console['error']('Error\x20setting\x20user\x20role:',_0x48ed46),showNotification(_0x5c4f66(0x1de)+_0x48ed46['message'],'error');throw _0x48ed46;}}function showNotification(_0x51feb9,_0x5cf891='info'){const _0x512387=a4_0x47be6c,_0x4926c1=document[_0x512387(0x12c)]('div');_0x4926c1['className']=_0x512387(0x136)+_0x5cf891,_0x4926c1['innerHTML']=_0x512387(0x1f7)+getNotificationIcon(_0x5cf891)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x51feb9+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20',document['body'][_0x512387(0xe3)](_0x4926c1),setTimeout(()=>{const _0x2df5bf=_0x512387;_0x4926c1['classList'][_0x2df5bf(0x1f6)]('active');},0xa);const _0x4ee841=setTimeout(()=>{closeNotification(_0x4926c1);},0x1388);_0x4926c1['querySelector']('.close-notification')['addEventListener']('click',()=>{clearTimeout(_0x4ee841),closeNotification(_0x4926c1);});}function getNotificationIcon(_0x34b2e0){const _0x50bc4d=a4_0x47be6c;switch(_0x34b2e0){case'success':return'fa-check-circle';case _0x50bc4d(0x1ab):return _0x50bc4d(0x30a);case'warning':return'fa-exclamation-triangle';case'info':default:return'fa-info-circle';}}function closeNotification(_0x2cfa2e){_0x2cfa2e['classList']['remove']('active'),setTimeout(()=>{_0x2cfa2e['remove']();},0x12c);}function a4_0x245c(){const _0x11fe97=['No\x20specific\x20permissions\x20for\x20user\x20','Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets','set-elo-form','playersD2','.loading-cell','submittedBy','previousElo','Ribbons\x20data\x20loaded\x20successfully','create-test-match-btn','activity-chart','cancel-promote-btn','Loading\x20user\x20data...','\x20ladder','Highlight\x20deleted\x20successfully','Untitled','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','display','admin_modification','toLocaleString','#cancel-create-test-match-btn','Switched\x20to\x20','<div\x20class=\x22error\x22>Error\x20searching\x20users</div>','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22','commit','set-role-form','className','ref','currentTarget','warn','Quick\x20edit\x20form\x20not\x20found!','data-section','resimulateMatch','promote-ladder','No\x20reason\x20provided','asc','matches-next-page','No\x20users\x20found\x20in\x20userProfiles\x20collection','\x20total\x20players\x20in\x20the\x20','error-state','appendChild','Modal\x20closed','Error\x20loading\x20dashboard:','</td></tr>','\x20(winner)\x20vs\x20','Attempting\x20to\x20promote\x20','Please\x20enter\x20valid\x20data','Error','highlight-modal','Error\x20awarding\x20item:','\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','edit-username','Highlight\x20updated\x20successfully!','promote-modal','Error\x20initializing\x20points\x20field:','View\x20player\x20details\x20for\x20','trophy-preview-img','\x20(from\x20','trophy-rarity','setHours','Error\x20finding\x20match:','player','Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM','userId','uid','Please\x20enter\x20a\x20username','Monday','Failed\x20to\x20assign\x20trophy:\x20','edit-highlight-matchLink-input','player-search','removeAttribute','.admin-action','Added\x20','pointsHistory','marginBottom','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20','pendingMatches','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20','getElementById','ELO\x20rating\x20for\x20','.delete-match-btn','playerRibbonsD3','N/A','ribbons','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','push','remove','opacity','MAX_SAFE_INTEGER','TestMap','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','Create\x20test\x20match\x20modal\x20setup\x20complete','info','role-filter','\x20from\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20','apply','dashboard','.close','createdBy','data','highlight-video-id','YouTube\x20Video\x20ID\x20(Optional)','load-players-data','current-ribbon-user','type','localeCompare','lastMatch','resimulate-modal','#e0e0e0','Match\x20resimulated\x20successfully!\x20','manage-ranks','createElement','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','parentNode','mapPlayed','cancel-set-elo-btn','timestamp','elo','user-role','edit-highlight-creatorImageUrl-input','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20','notification\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','Error\x20deleting\x20match:','Player\x20','.edit-ribbons-btn','Setting\x20up\x20Manage\x20Points\x20section','Load\x20trophies\x20data\x20clicked','trophy-image-url','trophy-image-preview','Error\x20updating\x20player:','mapVersion','promote-form','substring','Error\x20loading\x20articles:','edit-wins','Error\x20deleting\x20highlight:','Silver','Error\x20loading\x20users:','.no-results','Setting\x20up\x20Manage\x20Highlights\x20section','achievementDetails','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20','join','demotedBy','Error\x20loading\x20highlights:','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>','Found\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>','docs','lastVisible','ribbon-type-select','Promotion','edit-losses','award-reason','manage-articles','\x20users','Error\x20in\x20demotion:','creator','Failed\x20to\x20create\x20simple\x20test\x20match:\x20','#ffffff','winnerScore','value','inactive-players-table-body','getDay','Player\x20deleted\x20successfully','Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','toLowerCase','creatorImageUrl','#50C878','Page\x201','points-user-search','bind','match-count','achievement','apply-matches-filters','Using\x20collection:\x20','matchDate','\x20points','Error\x20updating\x20points:','no-results-message','has','0.6','edit-match-winner-score','empty','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','position','test-match-winner-username','sort','target','admin','winnerUsername','lastUpdated','edit-elo','Friday','No\x20player\x20selected','points-asc','modify-points-form','closeResimulateModal','Unknown\x20User','rgba(211,\x2047,\x2047,\x200.7)','modifiedBy','onAuthStateChanged','Error\x20loading\x20players:','Error\x20loading\x20ribbons:','focus','load-inactive-players-data','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20','none','eloHistoryD2','points','match','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','matchLink','role','quick-edit-points-modal','image','-next-page','quick-edit-email','Failed\x20to\x20update\x20points:\x20','Error\x20loading\x20trophy\x20data:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20','Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20','Error\x20promoting\x20player:','Test\x20match','\x20already\x20has\x20points:\x20','article-author','Match\x20ID\x20or\x20ladder\x20missing','Match\x20deleted\x20successfully','desc','Article\x20created\x20successfully','Error\x20promoting\x20player:\x20','<span\x20class=\x22no-role\x22>None</span>','ribbon-target-ladder','Query\x20created:','error','TestLoser','Player\x20not\x20found\x20in\x20','click','test','user-roles-section','Error\x20loading\x20history:','playersD3','Promotion\x20notification\x20sent\x20to\x20Discord\x20bot','eloRating','block','textContent','getComputedStyle','map','Manage\x20Points\x20section\x20initialized','size','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','visibility','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','checked','highlight-match-link-container','points-amount','onerror','.ladder-switch\x20input[value=\x22D1\x22]','endDate','highlight-submitted-by','Simple\x20test\x20match\x20created\x20by\x20admin\x20','Title\x20and\x20content\x20are\x20required','\x22\x20data-ladder=\x22','Player\x20not\x20found','log','history-end-date','Error\x20loading\x20inactive\x20players:','Failed\x20to\x20load\x20user\x20history','required','Error\x20creating\x20simple\x20test\x20match:','<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>','Create\x20test\x20match\x20form\x20not\x20found','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','eloHistoryD3','Failed\x20to\x20send\x20Discord\x20notification:',';\x22>','Gold','rankDistribution','highlight-achievement-details-container','achievementImageUrl',';\x20color:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>','demotion','nonexistent','Error:\x20','highlight-player-profile','manage-trophies','style','Create\x20Article','setAttribute','Failed\x20to\x20save\x20article:\x20','username','highlight-match-info','loserUsername','matchId','playerProfileUrl','Error\x20demoting\x20player:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','roleAssignedAt','toLocaleDateString','edit-match-winner','create-test-match-modal','Dashboard\x20data\x20loaded\x20successfully','Promoting\x20player\x20to\x20','#808080','highlight-players-container','.empty-state','delete-match-summary','add','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20','</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','achievementPlayer','approvedAt','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>','inactive-players','RejectedD2','history-type-filter','history-start-date','rarity','playerId','button[type=\x22submit\x22]','edit-match-winner-demo','Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.','Store\x20item\x20awarded\x20successfully','Featured\x20Creator','email','update','Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:','input','manage-highlights','Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.','articles-table-body','activity','roleAssignedBy','article-modal','date','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','low-points','Initial\x20Placement','DOMContentLoaded','article-modal-title','manage-matches','addEventListener','newElo','Load\x20matches\x20data\x20clicked','subtract','Error\x20resimulating\x20match:','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies','exists','No\x20match\x20data\x20found\x20for\x20resimulation','src','trace','Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','catch','matches-page-indicator','length','Modal\x20background\x20clicked','querySelector','success','dataset','./promotions.js','Set\x20to\x20','highlight-submitted-by-container','body','#create-test-match-form','Processing\x20points\x20edit:','stopPropagation','edit-match-winner-comment','Match','<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20','nonParticipants','You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies',').\x20','classList','getAttribute','Found\x20ELO\x20history\x20for\x20player\x20','non-participant','Error\x20searching\x20for\x20user','negative-change','opponent','removeEventListener','highlight-achievement-player','You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','\x20added\x20successfully\x20to\x20','d2-next-page','Matches\x20action\x20buttons\x20setup\x20complete','Winner\x20and\x20loser\x20usernames\x20are\x20required','Highlight','then','seconds','createdAt','elo-history','Displaying\x20','Please\x20select\x20a\x20user\x20and\x20store\x20item','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles','roleColor','querySelectorAll','user-search-results','playerRibbons','roleName','cloneNode','reset','Error\x20loading\x20user\x20points\x20history:','Title\x20is\x20required','cells','submit','.edit-btn','key','ribbon-level','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC','Unknown','\x20<span\x20class=\x22user-source\x22>(','\x20points\x20history\x20entries','UserProfile','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20','Modal\x20not\x20found\x20when\x20trying\x20to\x20close','\x20users...','firstVisible','\x20in\x20','replaceChild','award-item-form','Setting\x20permissions\x20based\x20on\x20role:\x20','split','User\x20not\x20found','paste','Modal\x20close\x20button\x20clicked','\x20not\x20found.','article-form','edit-match-loser-demo','loserComment','Error\x20initializing\x20points:\x20','highlight-winner-name','Please\x20enter\x20a\x20valid\x20username','edit-match-loser','toISOString','\x20vs\x20','sendPromotionNotification','div','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>','points-overview-search','demote-username','pendingResimulateData','article-id','\x20\x20','demote-ladder','quick-edit-points-form','highlight-type','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','loserScore','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','players','preventDefault','Error\x20saving\x20highlight:\x20','keypress','Page\x20','elo-history-search','no-results','Failed\x20to\x20delete\x20match:\x20','approvedMatchesD3','.quick-edit-btn','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Error\x20loading\x20dashboard\x20data:','displayName','message','D3\x20Players','reset-history-filters','promote-username','Thursday','\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22','match-details-container','Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20','\x22\x20awarded\x20to\x20','winnerName','Points\x20action\x20buttons\x20setup\x20complete','.error-state','Invalid\x20action','Error\x20saving\x20article:','Creator\x20highlight\x20button\x20clicked','medium-points','edit-match-loser-comment','\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','manage-ribbons','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','filter','resimulate-match-btn','.edit-trophy-btn','Failed\x20to\x20load\x20match\x20data','Error\x20opening\x20quick\x20edit\x20modal:','contains','page','result','article-image-url','videoId','points-history-table-body','all','\x22\x20already\x20has\x20this\x20trophy','edit-highlight-mapVersion-input','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','Error\x20creating\x20activity\x20chart:','Error\x20loading\x20matches:','Setting\x20up\x20Manage\x20Ribbons\x20section','NonParticipant','eloHistory','adminEmail','quick-points-reason','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.','set','approvedMatches','Load\x20players\x20data\x20clicked','Cancel\x20button\x20not\x20found','highlight-match-date','Loaded\x20','Create\x20New\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','load-ribbons-data','\x20not\x20found\x20in\x20any\x20ladder','change','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>','Highlight\x20created\x20successfully!','Please\x20enter\x20valid\x20username\x20and\x20ELO','trim','active','role-color','Load\x20articles\x20data\x20clicked','inactive-days-filter','resimulate-match-id','trophies-table-body','Toggling\x20fields\x20for\x20highlight\x20type:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>','edit-highlight-achievementDetails-input','load-articles-data','approvedMatchesD2','.assign-trophy-btn','Points\x20modified\x20successfully','\x20Level\x20','Unauthorized:\x20Admin\x20access\x20required','quick-add','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','Unknown\x20Admin','Remove\x20','Error\x20loading\x20ELO\x20history:','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','.form-group,\x20.form-row','ribbon-target-user','name','Failed\x20to\x20load\x20points\x20data:\x20','Essential\x20highlight\x20modal\x20elements\x20not\x20found!','.view-history-btn','player-count','highlight-description-container','confirmResimulateMatch','./ladderalgorithm.js','Modal\x20cancel\x20button\x20clicked','setDate','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','pending-count','includes','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.','edit-highlight-map-input','forEach','Modal\x20computed\x20styles:','delete-match-confirm-modal','highlights','userProfiles','cancel-highlight-btn','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','ribbon-user-search','assign-trophy-title','currentUser','keys','lastPointsModified','assign-trophy-image','ribbons-overview-table-body','loading-cell','loading','data-ladder','Adding\x20player\x20','set-elo-modal','fa-exclamation-circle','Player\x20updated\x20successfully','allUsersPoints','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22','trophyDefinitions','Error\x20applying\x20filters:','trophy-modal-title','Manage\x20Ribbons\x20section\x20initialized','innerHTML','title','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','cancel-quick-edit','awardedAt','Found\x20specific\x20role:\x20'];a4_0x245c=function(){return _0x11fe97;};return a4_0x245c();}function setupUserRolesSection(){const _0x581653=a4_0x47be6c,_0x15d1de=document['getElementById']('load-users-data');_0x15d1de&&_0x15d1de['addEventListener']('click',function(){const _0x5ce3e3=a4_0x3520;this[_0x5ce3e3(0x239)]['add']('loading'),this['innerHTML']=_0x5ce3e3(0x2a6),loadUsersWithRoles()[_0x5ce3e3(0x248)](()=>{const _0x415040=_0x5ce3e3;this['classList'][_0x415040(0x112)](_0x415040(0x306)),this[_0x415040(0x312)]=_0x415040(0x1eb);})['catch'](_0x2e520b=>{const _0xf20908=_0x5ce3e3;console['error'](_0xf20908(0x148),_0x2e520b),this[_0xf20908(0x239)][_0xf20908(0x112)]('loading'),this['innerHTML']=_0xf20908(0x2e5),setTimeout(()=>{const _0x4f6bd3=_0xf20908;this['innerHTML']=_0x4f6bd3(0x1eb);},0xbb8);});});const _0x1c0991=document['getElementById']('add-new-role-btn');_0x1c0991&&_0x1c0991[_0x581653(0x219)](_0x581653(0x1ae),()=>{const _0x6a52e4=document['getElementById']('set-role-modal');_0x6a52e4&&_0x6a52e4['classList']['add']('active');});const _0x2b6e49=document[_0x581653(0x10a)]('user-search');_0x2b6e49&&_0x2b6e49['addEventListener']('input',debounce(filterUsersTable,0x12c));const _0x955803=document['getElementById']('role-filter');_0x955803&&_0x955803['addEventListener']('change',filterUsersTable);}async function loadUsersWithRoles(){const _0x18349b=a4_0x47be6c,_0x1b59ce=document['getElementById']('users-table-body');if(!_0x1b59ce)return;_0x1b59ce[_0x18349b(0x312)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x48898e,_0x41e416,_0x41e2af,_0x260f14]=await Promise['all']([getDocs(collection(db,'players')),getDocs(collection(db,_0x18349b(0xbf))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0x2e96ef=new Map();function _0x834b8a(_0x3b14d0,_0x4ab53d){_0x3b14d0['forEach'](_0x38c840=>{const _0x4bab7f=a4_0x3520,_0x54df5f=_0x38c840['data']();if(!_0x54df5f['username'])return;if(!_0x2e96ef[_0x4bab7f(0x174)](_0x54df5f['username']))_0x2e96ef['set'](_0x54df5f['username'],{'username':_0x54df5f['username'],'roleName':_0x54df5f['roleName']||null,'roleColor':_0x54df5f[_0x4bab7f(0x24f)]||null,'roleAssignedBy':_0x54df5f[_0x4bab7f(0x210)]||null,'roleAssignedAt':_0x54df5f[_0x4bab7f(0x1ec)]||null,'sources':[_0x4ab53d]});else{const _0x3ab997=_0x2e96ef['get'](_0x54df5f['username']);_0x54df5f['roleName']&&(!_0x3ab997['roleName']||_0x4ab53d==='D1'||_0x4ab53d==='D2')&&(_0x3ab997['roleName']=_0x54df5f['roleName'],_0x3ab997[_0x4bab7f(0x24f)]=_0x54df5f['roleColor'],_0x3ab997['roleAssignedBy']=_0x54df5f['roleAssignedBy'],_0x3ab997['roleAssignedAt']=_0x54df5f['roleAssignedAt']),!_0x3ab997['sources'][_0x4bab7f(0x2f4)](_0x4ab53d)&&_0x3ab997['sources']['push'](_0x4ab53d);}});}_0x834b8a(_0x48898e,'D1'),_0x834b8a(_0x41e416,'D2'),_0x834b8a(_0x41e2af,'Non-Participant'),_0x834b8a(_0x260f14,'Profile');const _0x5961fd=Array['from'](_0x2e96ef['values']())[_0x18349b(0x17b)]((_0x386353,_0x10fe7e)=>_0x386353[_0x18349b(0x1e5)][_0x18349b(0x126)](_0x10fe7e['username']));if(_0x5961fd['length']===0x0){_0x1b59ce['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x1b59ce['innerHTML']='',_0x5961fd['forEach'](_0x474d9f=>{const _0x36d820=_0x18349b,_0x5193ce=document[_0x36d820(0x12c)]('tr');_0x5193ce['dataset']['username']=_0x474d9f[_0x36d820(0x1e5)],_0x5193ce['dataset']['roleName']=_0x474d9f['roleName']||'',_0x5193ce['dataset']['roleColor']=_0x474d9f['roleColor']||'#808080';const _0x56bd40=_0x474d9f['roleAssignedAt']?new Date(_0x474d9f['roleAssignedAt'][_0x36d820(0x249)]*0x3e8)['toLocaleDateString']():'N/A',_0x5e705a=_0x474d9f['roleName']?_0x36d820(0x235)+_0x474d9f[_0x36d820(0x24f)]+_0x36d820(0x1da)+getContrastColor(_0x474d9f[_0x36d820(0x24f)])+_0x36d820(0x1d5)+_0x474d9f[_0x36d820(0x253)]+'</span>':_0x36d820(0x1a8);_0x5193ce['innerHTML']=_0x36d820(0x2c8)+_0x474d9f['username']+_0x36d820(0x25f)+_0x474d9f['sources'][_0x36d820(0x14d)](',\x20')+')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5e705a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x474d9f['roleAssignedBy']||'N/A')+_0x36d820(0x285)+_0x56bd40+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22'+_0x474d9f['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x474d9f[_0x36d820(0x253)]?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x474d9f[_0x36d820(0x1e5)]+_0x36d820(0x1fb):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1b59ce['appendChild'](_0x5193ce);}),document['querySelectorAll']('.edit-role-btn')[_0x18349b(0x2f7)](_0x2aa550=>{_0x2aa550['addEventListener']('click',()=>{const _0xfb4c0d=_0x2aa550['dataset']['username'];openRoleEditModal(_0xfb4c0d);});}),document['querySelectorAll']('.remove-role-btn')['forEach'](_0x2fc1ee=>{const _0x295db3=_0x18349b;_0x2fc1ee[_0x295db3(0x219)]('click',()=>{const _0x4df801=_0x2fc1ee['dataset']['username'];confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20'+_0x4df801+'?')&&setUserRole(_0x4df801,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0xb546b=>console['error']('Error\x20removing\x20role:',_0xb546b));});});}catch(_0x5f2aa9){console['error']('Error\x20loading\x20users:',_0x5f2aa9),_0x1b59ce[_0x18349b(0x312)]='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function openRoleEditModal(_0x4d398b){const _0x50812e=a4_0x47be6c;console['log'](_0x50812e(0x20a),_0x4d398b);const _0x92d127=document[_0x50812e(0x10a)]('set-role-modal'),_0x98753b=document['getElementById']('role-username'),_0xfe8941=document['getElementById'](_0x50812e(0x133));if(!_0x92d127){console[_0x50812e(0x1ab)]('CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!'),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console['log']('Modal\x20element\x20found:',_0x92d127);_0x98753b?(_0x98753b['value']=_0x4d398b,console[_0x50812e(0x1c9)]('Username\x20input\x20set\x20to:\x20'+_0x4d398b)):console[_0x50812e(0xd8)](_0x50812e(0x205));const _0x3eab6c=document[_0x50812e(0x229)]('#users-table-body\x20tr[data-username=\x22'+_0x4d398b+'\x22]');if(_0x3eab6c&&_0xfe8941){const _0x243c4c=_0x3eab6c['dataset'][_0x50812e(0x195)];_0xfe8941['value']=_0x243c4c==='none'?'':_0x243c4c,console['log']('Role\x20select\x20set\x20to:\x20'+_0xfe8941['value']+'\x20(based\x20on\x20data-role:\x20'+_0x243c4c+')');}else{if(!_0x3eab6c)console['warn']('Table\x20row\x20for\x20user\x20'+_0x4d398b+_0x50812e(0x26e));if(!_0xfe8941)console['warn'](_0x50812e(0x223));if(_0xfe8941)_0xfe8941[_0x50812e(0x160)]='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x92d127['classList'][_0x50812e(0x1f6)]('active');const _0x339010=document['getElementById']('cancel-role-btn');_0x339010?(console[_0x50812e(0x1c9)]('Attaching\x20cancel\x20button\x20listener.'),_0x339010['removeEventListener']('click',closeModalHandler),_0x339010['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log']('Attaching\x20background\x20click\x20listener.'),_0x92d127[_0x50812e(0x240)]('click',closeModalBackgroundHandler),_0x92d127[_0x50812e(0x219)]('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x84af2){const _0x335aab=a4_0x47be6c;_0x84af2[_0x335aab(0x17c)]===this&&closeModalHandler();}function closeModalHandler(){const _0x388029=a4_0x47be6c,_0x503843=document[_0x388029(0x10a)]('set-role-modal');_0x503843&&(_0x503843['classList']['remove'](_0x388029(0x2d0)),_0x503843['removeEventListener'](_0x388029(0x1ae),closeModalBackgroundHandler));}function filterUsersTable(){const _0x377d4b=a4_0x47be6c,_0x11d100=document['getElementById']('user-search')?.['value'][_0x377d4b(0x166)]()||'',_0x544137=document['getElementById'](_0x377d4b(0x119))?.['value']||'all',_0x43eb41=document[_0x377d4b(0x250)]('#users-table-body\x20tr');let _0x3fba45=0x0;_0x43eb41['forEach'](_0x5746c2=>{const _0x421b5d=_0x377d4b;if(_0x5746c2['querySelector']('.loading-cell')||_0x5746c2[_0x421b5d(0x229)]('.empty-state')||_0x5746c2['querySelector'](_0x421b5d(0x29f)))return;const _0x5cb257=_0x5746c2['dataset'][_0x421b5d(0x1e5)]?.['toLowerCase']()||'',_0x3f2b5e=_0x5746c2['dataset']['role']||_0x421b5d(0x18f),_0x4cafb5=_0x5cb257['includes'](_0x11d100),_0x1ff53e=_0x544137==='all'||_0x3f2b5e===_0x544137;_0x4cafb5&&_0x1ff53e?(_0x5746c2['style']['display']='',_0x3fba45++):_0x5746c2['style'][_0x421b5d(0xcc)]='none';});if(_0x3fba45===0x0&&_0x43eb41['length']>0x0){const _0x5737ca=document['getElementById']('users-table-body');if(_0x5737ca){if(!_0x5737ca['querySelector'](_0x377d4b(0x149))){const _0x3235fd=document['createElement']('tr');_0x3235fd['classList']['add']('no-results'),_0x3235fd['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x5737ca['appendChild'](_0x3235fd);}}}else{const _0x511d95=document['querySelector']('.no-results');_0x511d95&&_0x511d95[_0x377d4b(0x112)]();}}function setupManageArticlesSection(){const _0x2b2afa=a4_0x47be6c,_0x38bb6f=document['getElementById'](_0x2b2afa(0x2da));_0x38bb6f&&_0x38bb6f['addEventListener'](_0x2b2afa(0x1ae),function(){const _0x533be5=_0x2b2afa;this[_0x533be5(0x239)]['add']('loading'),this[_0x533be5(0x312)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x533be5(0x248)](()=>{const _0x1e763d=_0x533be5;this[_0x1e763d(0x239)]['remove'](_0x1e763d(0x306)),this['innerHTML']=_0x1e763d(0x24e);})['catch'](_0x1f075e=>{const _0x5a81bd=_0x533be5;console['error']('Error\x20loading\x20articles:',_0x1f075e),this['classList'][_0x5a81bd(0x112)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x352403=document[_0x2b2afa(0x10a)]('create-new-article-btn');_0x352403?(console[_0x2b2afa(0x1c9)](_0x2b2afa(0x20d)),_0x352403['style']['display']='block',_0x352403['addEventListener'](_0x2b2afa(0x1ae),()=>{openArticleModal();})):console['error']('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x5941ab=document['getElementById'](_0x2b2afa(0x26f));_0x5941ab&&_0x5941ab['addEventListener']('submit',_0x33c5d7=>{_0x33c5d7['preventDefault'](),saveArticle();});const _0x38859e=document['getElementById']('cancel-article-btn');_0x38859e&&_0x38859e['addEventListener']('click',()=>{closeArticleModal();});const _0x37c1d7=document['querySelector']('#article-modal\x20.close-btn');_0x37c1d7&&_0x37c1d7['addEventListener'](_0x2b2afa(0x1ae),()=>{closeArticleModal();});const _0x2da7b4=document['getElementById']('article-modal');_0x2da7b4&&_0x2da7b4['addEventListener']('click',_0x41b580=>{const _0x1dac6e=_0x2b2afa;_0x41b580[_0x1dac6e(0x17c)]===_0x2da7b4&&closeArticleModal();});}async function loadArticles(){const _0x335143=a4_0x47be6c,_0x24e80c=document['getElementById'](_0x335143(0x20e));if(!_0x24e80c)return;_0x24e80c['innerHTML']='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x3d1622=collection(db,'articles'),_0x28555c=query(_0x3d1622,orderBy('createdAt','desc')),_0xb44204=await getDocs(_0x28555c);if(_0xb44204[_0x335143(0x177)]){_0x24e80c[_0x335143(0x312)]='<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>';return;}_0x24e80c[_0x335143(0x312)]='',_0xb44204['forEach'](_0xab2dc9=>{const _0x4f23f0=_0x335143,_0x460394=_0xab2dc9[_0x4f23f0(0x120)](),_0x55254a=document['createElement']('tr'),_0xc7e1c9=_0x460394['createdAt']?new Date(_0x460394['createdAt'][_0x4f23f0(0x249)]*0x3e8)[_0x4f23f0(0xce)]():'N/A';_0x55254a[_0x4f23f0(0x312)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x460394[_0x4f23f0(0x313)]||_0x4f23f0(0xca))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x460394['author']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0xc7e1c9+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0xab2dc9['id']+_0x4f23f0(0xd2)+_0xab2dc9['id']+_0x4f23f0(0x110),_0x24e80c[_0x4f23f0(0xe3)](_0x55254a);}),setupArticleActionButtons();}catch(_0x568783){console['error']('Error\x20loading\x20articles:',_0x568783),_0x24e80c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x568783['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x45883d=a4_0x47be6c;document['querySelectorAll']('.edit-article-btn')['forEach'](_0x183dcd=>{const _0x4768c5=a4_0x3520;_0x183dcd[_0x4768c5(0x219)]('click',async _0x2a2907=>{const _0x5a45ae=_0x4768c5,_0x4b6ece=_0x2a2907[_0x5a45ae(0xd7)]['dataset']['id'];openArticleModal(_0x4b6ece);});}),document['querySelectorAll']('.delete-article-btn')[_0x45883d(0x2f7)](_0x119bea=>{const _0x39e9ce=_0x45883d;_0x119bea[_0x39e9ce(0x219)]('click',async _0x5aa613=>{const _0x5b10a6=_0x5aa613['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x5b10a6);});});}function openArticleModal(_0x2064e2=null){const _0x34869b=a4_0x47be6c,_0x220375=document['getElementById'](_0x34869b(0x211)),_0x2622bc=document['getElementById'](_0x34869b(0x217)),_0x3ddaaa=document['getElementById']('article-form'),_0x3d1c06=document[_0x34869b(0x10a)]('article-id');_0x3ddaaa['reset'](),_0x3d1c06['value']='';if(_0x2064e2)_0x2622bc[_0x34869b(0x1b6)]='Edit\x20Article',_0x3d1c06[_0x34869b(0x160)]=_0x2064e2,loadArticleData(_0x2064e2);else{_0x2622bc[_0x34869b(0x1b6)]=_0x34869b(0x1e2);const _0x4a8ba9=auth['currentUser'];if(_0x4a8ba9){const _0x5be4a7=document['getElementById'](_0x34869b(0x1a2));if(_0x5be4a7&&_0x4a8ba9['displayName'])_0x5be4a7['value']=_0x4a8ba9[_0x34869b(0x292)];else _0x5be4a7&&(_0x5be4a7['value']=_0x4a8ba9['email']);}}_0x220375[_0x34869b(0x239)]['add']('active');}async function loadArticleData(_0x21596e){const _0xdb0a51=a4_0x47be6c;try{const _0x3f5c03=doc(db,'articles',_0x21596e),_0x223552=await getDoc(_0x3f5c03);if(!_0x223552['exists']()){showNotification('Article\x20not\x20found','error');return;}const _0x467b44=_0x223552['data']();document['getElementById']('article-title')[_0xdb0a51(0x160)]=_0x467b44['title']||'',document['getElementById']('article-author')[_0xdb0a51(0x160)]=_0x467b44['author']||'',document[_0xdb0a51(0x10a)](_0xdb0a51(0x2b1))['value']=_0x467b44['imageUrl']||'',document['getElementById']('article-content')['value']=_0x467b44['content']||'';}catch(_0x5c466e){console['error']('Error\x20loading\x20article\x20data:',_0x5c466e),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x296cac=a4_0x47be6c;try{const _0x4e2b47=document['getElementById'](_0x296cac(0x27e))['value'],_0x40119b=document[_0x296cac(0x10a)]('article-title')['value'][_0x296cac(0x2cf)](),_0x522015=document['getElementById']('article-author')['value']['trim'](),_0x14fb7e=document[_0x296cac(0x10a)]('article-image-url')['value'][_0x296cac(0x2cf)](),_0x4a1519=document['getElementById']('article-content')['value'][_0x296cac(0x2cf)]();if(!_0x40119b||!_0x4a1519){showNotification(_0x296cac(0x1c6),'error');return;}const _0x1a5358=auth['currentUser'];if(!_0x1a5358){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles',_0x296cac(0x1ab));return;}const _0x50cf81={'title':_0x40119b,'author':_0x522015,'imageUrl':_0x14fb7e||null,'content':_0x4a1519,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x1a5358['email']};!_0x4e2b47?(_0x50cf81[_0x296cac(0x24a)]=serverTimestamp(),_0x50cf81[_0x296cac(0x11f)]=_0x1a5358[_0x296cac(0x208)],await addDoc(collection(db,'articles'),_0x50cf81),showNotification(_0x296cac(0x1a6),_0x296cac(0x22a))):(await updateDoc(doc(db,'articles',_0x4e2b47),_0x50cf81),showNotification('Article\x20updated\x20successfully','success')),closeArticleModal(),loadArticles();}catch(_0x1906b2){console[_0x296cac(0x1ab)](_0x296cac(0x2a1),_0x1906b2),showNotification(_0x296cac(0x1e4)+_0x1906b2['message'],'error');}}function closeArticleModal(){const _0x4df642=a4_0x47be6c,_0x2d2fee=document['getElementById']('article-modal');_0x2d2fee&&_0x2d2fee['classList']['remove'](_0x4df642(0x2d0));}async function confirmDeleteArticle(_0x3fe2dd){const _0x5b7c97=a4_0x47be6c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'articles',_0x3fe2dd)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x356f8f){console[_0x5b7c97(0x1ab)]('Error\x20deleting\x20article:',_0x356f8f),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x356f8f[_0x5b7c97(0x293)],'error');}}function setupTrophyManagementSection(){const _0x4a92b6=a4_0x47be6c,_0xf4ca0e=document[_0x4a92b6(0x10a)]('load-trophies-data');_0xf4ca0e&&_0xf4ca0e[_0x4a92b6(0x219)]('click',function(){const _0xeb8a28=_0x4a92b6;this['classList'][_0xeb8a28(0x1f6)]('loading'),this['innerHTML']=_0xeb8a28(0x2a6);const _0x5d64bc=document['getElementById'](_0xeb8a28(0x303));_0x5d64bc&&(_0x5d64bc['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()[_0xeb8a28(0x248)](()=>{this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})['catch'](_0x229238=>{const _0x1a6155=_0xeb8a28;console['error']('Error\x20loading\x20trophies:',_0x229238),this['classList'][_0x1a6155(0x112)]('loading'),this[_0x1a6155(0x312)]=_0x1a6155(0x2e5),setTimeout(()=>{const _0x3ffc0e=_0x1a6155;this['innerHTML']=_0x3ffc0e(0x21e);},0xbb8);});});const _0x588e61=document[_0x4a92b6(0x10a)]('create-new-trophy-btn');_0x588e61&&_0x588e61['addEventListener']('click',()=>{openTrophyModal();});const _0x38c674=document[_0x4a92b6(0x10a)]('trophy-form');_0x38c674&&_0x38c674['addEventListener'](_0x4a92b6(0x259),_0x5d26aa=>{_0x5d26aa['preventDefault'](),saveTrophyDefinition();});const _0x21571a=document['getElementById']('cancel-trophy-btn');_0x21571a&&_0x21571a[_0x4a92b6(0x219)]('click',()=>{closeTrophyModal();});document['querySelectorAll']('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x2d482f=>{const _0x298cb0=_0x4a92b6;_0x2d482f[_0x298cb0(0x219)]('click',()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0xe7eba0=document[_0x4a92b6(0x10a)]('trophy-modal');_0xe7eba0&&_0xe7eba0['addEventListener']('click',_0x12457c=>{const _0x3a52a3=_0x4a92b6;_0x12457c[_0x3a52a3(0x17c)]===_0xe7eba0&&closeTrophyModal();});const _0x53bb43=document[_0x4a92b6(0x10a)]('assign-trophy-modal');_0x53bb43&&_0x53bb43['addEventListener']('click',_0xc828d6=>{_0xc828d6['target']===_0x53bb43&&closeAssignTrophyModal();});const _0x19961b=document['getElementById']('assign-trophy-form');_0x19961b&&_0x19961b['addEventListener']('submit',_0x295cb8=>{_0x295cb8['preventDefault'](),assignTrophyToPlayer();});const _0x471d4=document['getElementById']('cancel-assign-btn');_0x471d4&&_0x471d4['addEventListener'](_0x4a92b6(0x1ae),()=>{closeAssignTrophyModal();});const _0x5ca60d=document['getElementById'](_0x4a92b6(0x13e));_0x5ca60d&&(_0x5ca60d['addEventListener']('input',updateTrophyImagePreview),_0x5ca60d['addEventListener'](_0x4a92b6(0x26c),()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x32070d=a4_0x47be6c,_0x1a8b88=document[_0x32070d(0x10a)](_0x32070d(0x13e))[_0x32070d(0x160)]['trim'](),_0x61fc0=document[_0x32070d(0x10a)]('trophy-image-preview');if(!_0x61fc0){const _0x442e2e=document['getElementById']('trophy-image-url')['closest']('.form-group'),_0x5d6d7f=document['createElement']('div');_0x5d6d7f['id']=_0x32070d(0x13f),_0x5d6d7f['className']='trophy-preview-container',_0x442e2e[_0x32070d(0xe3)](_0x5d6d7f);const _0xb16d4e=document['createElement']('img');_0xb16d4e['id']='trophy-preview-img',_0xb16d4e['alt']='Trophy\x20Preview',_0xb16d4e[_0x32070d(0x1c1)]=function(){const _0x481094=_0x32070d;this['src']=DEFAULT_TROPHY_IMAGE,this[_0x481094(0x239)]['add']('error');},_0x5d6d7f['appendChild'](_0xb16d4e);}const _0x3607c3=document[_0x32070d(0x10a)](_0x32070d(0xf3));_0x1a8b88?(_0x3607c3[_0x32070d(0x221)]=_0x1a8b88,_0x3607c3['style'][_0x32070d(0xcc)]='block',_0x3607c3['classList'][_0x32070d(0x112)]('error')):(_0x3607c3[_0x32070d(0x221)]=DEFAULT_TROPHY_IMAGE,_0x3607c3['style']['display']=_0x32070d(0x1b5));}async function loadTrophyDefinitions(){const _0x4d5670=a4_0x47be6c,_0x4d292b=document['getElementById'](_0x4d5670(0x2d5));if(!_0x4d292b)return;_0x4d292b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x57d59d=collection(db,_0x4d5670(0x30e)),_0x1d84e3=query(_0x57d59d,orderBy(_0x4d5670(0x24a),_0x4d5670(0x1a5))),_0x57ccbc=await getDocs(_0x1d84e3);if(_0x57ccbc[_0x4d5670(0x177)]){_0x4d292b['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>';return;}_0x4d292b['innerHTML']='',_0x57ccbc['forEach'](_0x4b8108=>{const _0x3f034c=_0x4d5670,_0x1aa115=_0x4b8108['data'](),_0x5acca4=document['createElement']('tr'),_0xf987ce=_0x1aa115['createdAt']?new Date(_0x1aa115['createdAt']['seconds']*0x3e8)['toLocaleString']():'N/A';_0x5acca4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x1aa115[_0x3f034c(0x197)]||DEFAULT_TROPHY_IMAGE)+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x1aa115[_0x3f034c(0x2e8)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27'+DEFAULT_TROPHY_IMAGE+'\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>'+(_0x1aa115[_0x3f034c(0x2e8)]||'Untitled\x20Trophy')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20'+(_0x1aa115['rarity']||'common')+'\x22>'+(_0x1aa115[_0x3f034c(0x201)]||'common')+_0x3f034c(0x12d)+_0xf987ce+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x4b8108['id']+_0x3f034c(0x2d7)+_0x4b8108['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22'+_0x4b8108['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4d292b['appendChild'](_0x5acca4);}),setupTrophyActionButtons();}catch(_0x28473b){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x28473b),_0x4d292b['innerHTML']=_0x4d5670(0x262)+_0x28473b['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x262723=a4_0x47be6c;document['querySelectorAll'](_0x262723(0x2ab))['forEach'](_0x21ac6a=>{_0x21ac6a['addEventListener']('click',_0x44877a=>{const _0x20af89=_0x44877a['currentTarget']['dataset']['id'];openTrophyModal(_0x20af89);});}),document['querySelectorAll'](_0x262723(0x2dc))['forEach'](_0x55c09c=>{_0x55c09c['addEventListener']('click',_0xd162ba=>{const _0x294647=_0xd162ba['currentTarget']['dataset']['id'];openAssignTrophyModal(_0x294647);});}),document['querySelectorAll']('.delete-trophy-btn')[_0x262723(0x2f7)](_0x5c33d0=>{_0x5c33d0['addEventListener']('click',_0x144593=>{const _0x2049b5=_0x144593['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x2049b5);});});}function openTrophyModal(_0xf671d5=null){const _0x4c6d1a=a4_0x47be6c,_0x28efe7=document['getElementById']('trophy-modal'),_0x3d19fd=document['getElementById'](_0x4c6d1a(0x310)),_0x202d66=document[_0x4c6d1a(0x10a)]('trophy-form'),_0x594ab1=document['getElementById']('trophy-id');_0x202d66[_0x4c6d1a(0x255)](),_0x594ab1['value']='';const _0x2a4411=document[_0x4c6d1a(0x10a)]('trophy-preview-img');_0x2a4411&&(_0x2a4411['src']=DEFAULT_TROPHY_IMAGE,_0x2a4411[_0x4c6d1a(0x239)]['remove']('error')),_0xf671d5?(_0x3d19fd['textContent']='Edit\x20Trophy',_0x594ab1['value']=_0xf671d5,loadTrophyData(_0xf671d5)):_0x3d19fd['textContent']='Create\x20New\x20Trophy',_0x28efe7['classList']['add'](_0x4c6d1a(0x2d0));}async function loadTrophyData(_0x2cd203){const _0x20c144=a4_0x47be6c;try{const _0x1a8872=doc(db,_0x20c144(0x30e),_0x2cd203),_0x570127=await getDoc(_0x1a8872);if(!_0x570127['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x2479e6=_0x570127[_0x20c144(0x120)]();document['getElementById']('trophy-name')['value']=_0x2479e6['name']||'',document['getElementById']('trophy-description')['value']=_0x2479e6['description']||'',document['getElementById']('trophy-image-url')[_0x20c144(0x160)]=_0x2479e6[_0x20c144(0x197)]||'',document['getElementById'](_0x20c144(0xf5))['value']=_0x2479e6['rarity']||'common',updateTrophyImagePreview();}catch(_0x66653){console['error'](_0x20c144(0x19b),_0x66653),showNotification('Failed\x20to\x20load\x20trophy\x20data',_0x20c144(0x1ab));}}async function saveTrophyDefinition(){const _0xb49ba8=a4_0x47be6c;try{const _0x129a92=document[_0xb49ba8(0x10a)]('trophy-id')['value'],_0x1779d1=document[_0xb49ba8(0x10a)]('trophy-name')['value']['trim'](),_0x3a8b54=document['getElementById']('trophy-description')['value']['trim'](),_0x123108=document['getElementById']('trophy-image-url')['value'][_0xb49ba8(0x2cf)](),_0x213376=document[_0xb49ba8(0x10a)]('trophy-rarity')['value'];if(!_0x1779d1||!_0x3a8b54||!_0x123108){showNotification('All\x20fields\x20are\x20required',_0xb49ba8(0x1ab));return;}const _0x6dbec3=auth['currentUser'];if(!_0x6dbec3){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies',_0xb49ba8(0x1ab));return;}const _0x1aead5={'name':_0x1779d1,'description':_0x3a8b54,'image':_0x123108,'rarity':_0x213376,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x6dbec3[_0xb49ba8(0x208)]};!_0x129a92?(_0x1aead5[_0xb49ba8(0x24a)]=serverTimestamp(),_0x1aead5['createdBy']=_0x6dbec3[_0xb49ba8(0x208)],await addDoc(collection(db,'trophyDefinitions'),_0x1aead5),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x129a92),_0x1aead5),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x184473){console[_0xb49ba8(0x1ab)]('Error\x20saving\x20trophy:',_0x184473),showNotification('Failed\x20to\x20save\x20trophy:\x20'+_0x184473['message'],'error');}}function closeTrophyModal(){const _0x1c6aa8=a4_0x47be6c,_0x1bc682=document['getElementById']('trophy-modal');_0x1bc682&&_0x1bc682['classList']['remove'](_0x1c6aa8(0x2d0));}async function confirmDeleteTrophy(_0x5667b6){const _0x24aaeb=a4_0x47be6c;if(!_0x5667b6){console['error'](_0x24aaeb(0x1bb));return;}if(confirm(_0x24aaeb(0x2f5)))try{const _0x354c7b=auth[_0x24aaeb(0x300)];if(!_0x354c7b){showNotification(_0x24aaeb(0x213),'error');return;}console[_0x24aaeb(0x1c9)](_0x24aaeb(0x19e)+_0x5667b6),await deleteDoc(doc(db,_0x24aaeb(0x30e),_0x5667b6)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x28284e){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x28284e),showNotification('Failed\x20to\x20delete\x20trophy:\x20'+_0x28284e['message'],_0x24aaeb(0x1ab));}}async function openAssignTrophyModal(_0x58daa2){const _0x446d9b=a4_0x47be6c;try{const _0x247702=doc(db,_0x446d9b(0x30e),_0x58daa2),_0x24aabf=await getDoc(_0x247702);if(!_0x24aabf['exists']()){showNotification('Trophy\x20not\x20found','error');return;}const _0x45a387=_0x24aabf[_0x446d9b(0x120)]();document['getElementById']('assign-trophy-id')['value']=_0x58daa2,document[_0x446d9b(0x10a)]('assign-trophy-name')['value']=_0x45a387['name'],document[_0x446d9b(0x10a)](_0x446d9b(0x303))['src']=_0x45a387['image']||DEFAULT_TROPHY_IMAGE,document['getElementById'](_0x446d9b(0x2ff))['textContent']=_0x45a387['name']||'Unnamed\x20Trophy',document['getElementById']('assign-trophy-description')['textContent']=_0x45a387['description']||'No\x20description';const _0x591725=document['getElementById']('assign-trophy-rarity');_0x591725['textContent']=_0x45a387[_0x446d9b(0x201)]||'common',_0x591725['className']='trophy-rarity\x20'+(_0x45a387['rarity']||'common');const _0x1806ed=document['getElementById']('assign-trophy-modal');_0x1806ed[_0x446d9b(0x239)]['add']('active');}catch(_0x4574be){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x4574be),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}function closeAssignTrophyModal(){const _0x30b08c=a4_0x47be6c,_0x5e310a=document['getElementById']('assign-trophy-modal');_0x5e310a&&_0x5e310a[_0x30b08c(0x239)]['remove']('active');}async function assignTrophyToPlayer(){const _0xf4a8bc=a4_0x47be6c;try{const _0x313a9=document['getElementById']('assign-trophy-id')[_0xf4a8bc(0x160)],_0x3d780f=document['getElementById']('assign-trophy-name')['value'],_0x420b5b=document[_0xf4a8bc(0x10a)]('assign-player-username')['value'][_0xf4a8bc(0x2cf)](),_0x27c351=document['querySelector']('input[name=\x22assign-ladder\x22]:checked')['value'];if(!_0x313a9||!_0x420b5b){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0xf4a8bc(0x1ab));return;}const _0x17ebbe=auth[_0xf4a8bc(0x300)];if(!_0x17ebbe){showNotification(_0xf4a8bc(0x237),'error');return;}let _0x570678=null,_0x487140=null,_0x2a484b=null;if(_0x27c351===_0xf4a8bc(0x23c)){const _0x290162=collection(db,_0xf4a8bc(0x236)),_0x203c99=query(_0x290162,where(_0xf4a8bc(0x1e5),'==',_0x420b5b)),_0x337b4c=await getDocs(_0x203c99);!_0x337b4c['empty']&&(_0x570678=_0x337b4c['docs'][0x0],_0x487140=_0x570678['id'],_0x2a484b=_0x570678['data']());}else{const _0x20a66f=_0x27c351==='D1'?_0xf4a8bc(0x286):_0x27c351==='D2'?_0xf4a8bc(0xbf):'playersD3',_0x5a3263=collection(db,_0x20a66f),_0x1aee93=query(_0x5a3263,where(_0xf4a8bc(0x1e5),'==',_0x420b5b)),_0xb0fac5=await getDocs(_0x1aee93);!_0xb0fac5['empty']&&(_0x570678=_0xb0fac5['docs'][0x0],_0x487140=_0x570678['id'],_0x2a484b=_0x570678['data']());}if(!_0x570678){showNotification('Player\x20\x22'+_0x420b5b+'\x22\x20not\x20found\x20in\x20'+(_0x27c351==='non-participant'?'non-participants':_0x27c351+'\x20ladder'),'error');return;}const _0xdb904f=collection(db,'userTrophies'),_0x4ae61a=query(_0xdb904f,where(_0xf4a8bc(0xfa),'==',_0x487140),where('trophyId','==',_0x313a9)),_0xdca83b=await getDocs(_0x4ae61a);if(!_0xdca83b[_0xf4a8bc(0x177)]){showNotification('Player\x20\x22'+_0x420b5b+_0xf4a8bc(0x2b5),'warning');return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x487140,'playerUsername':_0x420b5b,'trophyId':_0x313a9,'awardedAt':serverTimestamp(),'awardedBy':_0x17ebbe[_0xf4a8bc(0x208)],'ladder':_0x27c351}),showNotification('Trophy\x20\x22'+_0x3d780f+_0xf4a8bc(0x29c)+_0x420b5b,'success'),closeAssignTrophyModal();}catch(_0x168fac){console['error']('Error\x20assigning\x20trophy:',_0x168fac),showNotification(_0xf4a8bc(0xfe)+_0x168fac['message'],'error');}}function setupInactivePlayersSection(){const _0x5b4507=a4_0x47be6c,_0x11e84b=document['getElementById']('inactive-days-filter');_0x11e84b&&_0x11e84b[_0x5b4507(0x219)]('change',function(){const _0x5381b1=_0x5b4507,_0x15dfa3=document[_0x5381b1(0x10a)](_0x5381b1(0x18d));if(_0x15dfa3)_0x15dfa3['click']();});const _0x18c7b5=document['querySelector'](_0x5b4507(0x1c2)),_0x270b5e=document['querySelector']('.ladder-switch\x20input[value=\x22D2\x22]');_0x18c7b5&&_0x270b5e&&(_0x18c7b5[_0x5b4507(0x219)](_0x5b4507(0x2cb),function(){const _0x4b7905=_0x5b4507;if(this['checked']){currentLadder='D1';if(document['getElementById'](_0x4b7905(0x1fd))['style']['display']!==_0x4b7905(0x18f)){const _0x4c0ecf=document[_0x4b7905(0x10a)]('load-inactive-players-data');if(_0x4c0ecf)_0x4c0ecf['click']();}}}),_0x270b5e[_0x5b4507(0x219)]('change',function(){const _0x48c96b=_0x5b4507;if(this['checked']){currentLadder='D2';if(document[_0x48c96b(0x10a)]('inactive-players')['style']['display']!=='none'){const _0x583e32=document['getElementById'](_0x48c96b(0x18d));if(_0x583e32)_0x583e32['click']();}}}));const _0x3dba69=document[_0x5b4507(0x10a)]('inactive-players-search');_0x3dba69&&_0x3dba69['addEventListener']('input',debounce(function(){const _0x1a0bfb=_0x5b4507,_0x238e80=_0x3dba69[_0x1a0bfb(0x160)]['toLowerCase'](),_0x9cc104=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x9cc104['forEach'](_0x5c02f9=>{const _0x5c156d=_0x1a0bfb;if(_0x5c02f9['querySelector'](_0x5c156d(0xc0))||_0x5c02f9['querySelector'](_0x5c156d(0x1f4))||_0x5c02f9['querySelector'](_0x5c156d(0x29f)))return;const _0x5bc670=_0x5c02f9[_0x5c156d(0x258)][0x0]?.['textContent']['toLowerCase']()||'',_0x1732a5=_0x5c02f9['cells'][0x5]?.['textContent']['toLowerCase']()||'';_0x5bc670['includes'](_0x238e80)||_0x1732a5['includes'](_0x238e80)?_0x5c02f9['style']['display']='':_0x5c02f9['style']['display']=_0x5c156d(0x18f);});},0x12c)),document[_0x5b4507(0x219)]('click',function(_0x492224){const _0x4169cc=_0x5b4507;if(_0x492224['target']['closest']('.view-player-btn')){const _0x4d0683=_0x492224['target']['closest']('.view-player-btn'),_0x10f709=_0x4d0683[_0x4169cc(0x22b)]['username'];_0x10f709&&alert(_0x4169cc(0xf2)+_0x10f709+'\x20-\x20Feature\x20coming\x20soon');}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x432597=a4_0x47be6c,_0x13a7d3=document['getElementById'](_0x432597(0x161));if(!_0x13a7d3)return;_0x13a7d3[_0x432597(0x312)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x1ef5e3=document['getElementById'](_0x432597(0x2d3)),_0x51444b=_0x1ef5e3?parseInt(_0x1ef5e3[_0x432597(0x160)])||0x0:0x0,_0x57b3cc=collection(db,currentLadder==='D1'?_0x432597(0x286):'playersD2'),_0x41ac26=await getDocs(_0x57b3cc);if(_0x41ac26['empty']){_0x13a7d3[_0x432597(0x312)]=_0x432597(0x1fc);return;}const _0x1c595f=[];_0x41ac26['forEach'](_0x3dd6f2=>{const _0x3a7b2e=_0x432597,_0x40a987=_0x3dd6f2['data']();_0x1c595f['push']({..._0x40a987,'id':_0x3dd6f2['id'],'username':_0x40a987[_0x3a7b2e(0x1e5)]||'Unknown\x20Player'});}),console['log'](_0x432597(0x151)+_0x1c595f['length']+_0x432597(0xe1)+currentLadder+'\x20ladder');const _0xf43fbc=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x3df79e=_0x1c595f['map'](async _0x5db7c5=>{const _0x63d1b6=_0x432597;try{const _0xa83b43=collection(db,_0xf43fbc),_0x294f2f=query(_0xa83b43,or(where('winnerUsername','==',_0x5db7c5['username']),where('loserUsername','==',_0x5db7c5['username'])),orderBy(_0x63d1b6(0x1fa),'desc'),limit(0x1)),_0xce2fed=await getDocs(_0x294f2f);if(!_0xce2fed['empty']){const _0x5f0233=_0xce2fed['docs'][0x0]['data'](),_0x51e7a7=_0x5f0233['approvedAt']?new Date(_0x5f0233['approvedAt'][_0x63d1b6(0x249)]*0x3e8):null,_0x9a022e=new Date(),_0x306946=_0x51e7a7?Math['floor']((_0x9a022e-_0x51e7a7)/(0x3e8*0x3c*0x3c*0x18)):null,_0x31ca47=_0x5f0233['winnerUsername']===_0x5db7c5['username']?_0x5f0233['loserUsername']:_0x5f0233['winnerUsername'],_0x268616=_0x5f0233['winnerUsername']===_0x5db7c5[_0x63d1b6(0x1e5)]?'Won':'Lost';return{..._0x5db7c5,'lastMatch':{'date':_0x51e7a7?_0x51e7a7['toLocaleDateString']():_0x63d1b6(0x10e),'opponent':_0x31ca47||'Unknown','result':_0x268616,'timestamp':_0x51e7a7||new Date(0x0),'daysSinceMatch':_0x306946||Number['MAX_SAFE_INTEGER']}};}else return{..._0x5db7c5,'lastMatch':{'date':'Never\x20played','opponent':'N/A','result':_0x63d1b6(0x10e),'timestamp':new Date(0x0),'daysSinceMatch':Number[_0x63d1b6(0x114)]}};}catch(_0x1ec003){return console['error']('Error\x20fetching\x20matches\x20for\x20'+_0x5db7c5['username']+':',_0x1ec003),{..._0x5db7c5,'lastMatch':{'date':'Error','opponent':_0x63d1b6(0xea),'result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x5c6352=await Promise['all'](_0x3df79e);_0x5c6352[_0x432597(0x17b)]((_0x4dff37,_0x29e81e)=>_0x29e81e['lastMatch']['daysSinceMatch']-_0x4dff37[_0x432597(0x127)]['daysSinceMatch']);_0x51444b>0x0&&(_0x5c6352=_0x5c6352['filter'](_0x56bd00=>_0x56bd00['lastMatch']['daysSinceMatch']>=_0x51444b));_0x13a7d3[_0x432597(0x312)]='';if(_0x5c6352['length']===0x0){_0x13a7d3['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>';return;}_0x5c6352[_0x432597(0x2f7)](_0x5ea91c=>{const _0x5edef3=_0x432597,_0x50bfe9=document['createElement']('tr'),_0x3fd06d=_0x5ea91c['lastMatch']['daysSinceMatch']>0x1e?'highly-inactive':_0x5ea91c['lastMatch']['daysSinceMatch']>0xe?'moderately-inactive':'';_0x50bfe9['className']=_0x3fd06d,_0x50bfe9[_0x5edef3(0x312)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x5ea91c[_0x5edef3(0x1e5)]+_0x5edef3(0x285)+(_0x5ea91c['eloRating']||0x4b0)+_0x5edef3(0x285)+_0x5ea91c['lastMatch'][_0x5edef3(0x212)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5ea91c['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x5ea91c['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5ea91c['lastMatch']['date']==='Never\x20played'?'No\x20matches\x20found':_0x5ea91c['lastMatch'][_0x5edef3(0x2b0)]+'\x20vs\x20'+_0x5ea91c['lastMatch'][_0x5edef3(0x23f)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x5ea91c[_0x5edef3(0x1e5)]+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x13a7d3['appendChild'](_0x50bfe9);}),console['log'](_0x432597(0x24c)+_0x5c6352[_0x432597(0x227)]+'\x20inactive\x20players');}catch(_0x13c703){console[_0x432597(0x1ab)](_0x432597(0x1cb),_0x13c703),_0x13a7d3['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20'+_0x13c703['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x31effe=a4_0x47be6c;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x4fca4c=document['getElementById']('create-match-highlight-btn');_0x4fca4c&&_0x4fca4c['addEventListener'](_0x31effe(0x1ae),function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x2a26b8=document[_0x31effe(0x10a)]('create-creator-highlight-btn');_0x2a26b8&&_0x2a26b8[_0x31effe(0x219)]('click',function(){const _0x279b05=_0x31effe;console['log'](_0x279b05(0x2a2)),openHighlightModal('creator');});const _0x43964b=document['getElementById']('create-achievement-highlight-btn');_0x43964b&&_0x43964b['addEventListener']('click',function(){const _0x562724=_0x31effe;console[_0x562724(0x1c9)]('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x2357fd='match'){const _0xdc5827=a4_0x47be6c;console['log']('Opening\x20highlight\x20modal\x20with\x20parameter:\x20'+_0x2357fd);const _0x3bec5c=document['getElementById'](_0xdc5827(0xeb)),_0x75db6e=document['getElementById']('highlight-form'),_0xc19e1b=document['getElementById']('highlight-modal-title'),_0x296132=document['getElementById']('highlight-id');if(!_0x3bec5c||!_0x75db6e||!_0xc19e1b){console['error'](_0xdc5827(0x2ea));return;}_0x75db6e[_0xdc5827(0x255)](),_0x296132['value']='';const _0x1f15f4=['match','creator','achievement'],_0x37570e=!_0x1f15f4['includes'](_0x2357fd);if(_0x37570e){const _0x2949a0=_0x2357fd;_0x296132[_0xdc5827(0x160)]=_0x2949a0,_0xc19e1b[_0xdc5827(0x1b6)]='Loading...',loadHighlightDataAdmin(_0x2949a0);}else{const _0x1490e2=_0x2357fd;document[_0xdc5827(0x10a)](_0xdc5827(0x282))['value']=_0x1490e2,_0xc19e1b[_0xdc5827(0x1b6)]=_0xdc5827(0x2c6)+getHighlightTypeName(_0x1490e2),toggleHighlightFields(_0x1490e2);const _0x2917bb=auth['currentUser'];_0x2917bb&&document[_0xdc5827(0x10a)]('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')[_0xdc5827(0x160)]=_0x2917bb['displayName']||_0x2917bb['email']);}_0x3bec5c['classList'][_0xdc5827(0x1f6)](_0xdc5827(0x2d0));}function toggleHighlightFields(_0xe10d05){const _0x2a1fed=a4_0x47be6c;console['log'](_0x2a1fed(0x2d6)+_0xe10d05);const _0x593834=document['getElementById']('highlight-form');if(!_0x593834)return;const _0xa9b723=_0x593834['querySelectorAll'](_0x2a1fed(0x2e6));_0xa9b723['forEach'](_0x37b00c=>_0x37b00c[_0x2a1fed(0x1e1)][_0x2a1fed(0xcc)]='none');const _0xe82052=document['getElementById']('highlight-video-preview-container');if(_0xe82052)_0xe82052['style'][_0x2a1fed(0xcc)]='none';const _0x363e01=['highlight-title-container',_0x2a1fed(0x2ed),_0x2a1fed(0x22e)];_0x363e01['forEach'](_0x47856e=>{const _0x36aca4=_0x2a1fed,_0x2c49dc=document[_0x36aca4(0x10a)](_0x47856e);if(_0x2c49dc)_0x2c49dc['style']['display']=_0x36aca4(0x1b5);});if(_0xe10d05==='match'){const _0x589628=['highlight-video-container','highlight-match-info-container','highlight-map-container','highlight-match-date-container',_0x2a1fed(0x1f3),_0x2a1fed(0x1bf)];_0x589628['forEach'](_0x129091=>{const _0x32870e=_0x2a1fed,_0x383133=document['getElementById'](_0x129091);_0x383133&&(_0x129091==='highlight-players-container'?_0x383133['style'][_0x32870e(0xcc)]='flex':_0x383133['style']['display']=_0x32870e(0x1b5));});const _0xe3f5f6=document['getElementById']('highlight-video-id');if(_0xe3f5f6){_0xe3f5f6[_0x2a1fed(0x1cd)]=!![];const _0x3209e3=_0xe3f5f6['previousElementSibling'];if(_0x3209e3)_0x3209e3[_0x2a1fed(0x312)]='YouTube\x20Video\x20ID*';}if(_0xe82052)_0xe82052['style']['display']='block';updateHighlightVideoPreview();}else{if(_0xe10d05==='creator'){const _0x2c9ac5=['highlight-map-container','highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0x2c9ac5['forEach'](_0x3c9c28=>{const _0x230722=_0x2a1fed,_0x2e4bdd=document['getElementById'](_0x3c9c28);if(_0x2e4bdd)_0x2e4bdd['style']['display']=_0x230722(0x1b5);});const _0xd747d1=document[_0x2a1fed(0x10a)]('highlight-video-id');if(_0xd747d1){_0xd747d1['required']=![];const _0x59db39=_0xd747d1['previousElementSibling'];if(_0x59db39)_0x59db39['innerHTML']=_0x2a1fed(0x122);}}else{if(_0xe10d05==='achievement'){const _0x266e0f=['highlight-achievement-player-container','highlight-achievement-type-container',_0x2a1fed(0x1d8),'highlight-player-profile-container','highlight-achievement-image-container','highlight-video-container'];_0x266e0f['forEach'](_0x3d4305=>{const _0x1ca905=_0x2a1fed,_0x4fe325=document[_0x1ca905(0x10a)](_0x3d4305);if(_0x4fe325)_0x4fe325['style']['display']='block';});const _0x1023a5=document['getElementById'](_0x2a1fed(0x121));if(_0x1023a5){_0x1023a5[_0x2a1fed(0x1cd)]=![];const _0x530fd5=_0x1023a5['previousElementSibling'];if(_0x530fd5)_0x530fd5['innerHTML']='YouTube\x20Video\x20ID\x20(Optional)';}}}}}async function loadHighlightDataAdmin(_0xba7b06){const _0x4582f0=a4_0x47be6c;try{const _0x575d06=doc(db,_0x4582f0(0x2fa),_0xba7b06),_0x46ace5=await getDoc(_0x575d06);if(!_0x46ace5['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x5e0a49=_0x46ace5['data'](),_0x46b8ed=_0x5e0a49['type']||'match';document[_0x4582f0(0x10a)]('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x46b8ed),document[_0x4582f0(0x10a)]('highlight-type')['value']=_0x46b8ed,toggleHighlightFields(_0x46b8ed),document['getElementById']('highlight-title')[_0x4582f0(0x160)]=_0x5e0a49[_0x4582f0(0x313)]||'',document['getElementById']('highlight-description')['value']=_0x5e0a49['description']||'',document['getElementById']('highlight-submitted-by')['value']=_0x5e0a49[_0x4582f0(0xc1)]||'';_0x5e0a49[_0x4582f0(0x2b2)]&&(document['getElementById'](_0x4582f0(0x121))['value']=_0x5e0a49[_0x4582f0(0x2b2)],updateHighlightVideoPreview());if(_0x46b8ed==='match'){document[_0x4582f0(0x10a)]('highlight-match-info')['value']=_0x5e0a49['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x5e0a49[_0x4582f0(0x1b8)]||'';if(_0x5e0a49['matchDate']){const _0x4cdd57=new Date(_0x5e0a49[_0x4582f0(0x170)]['seconds']*0x3e8);document[_0x4582f0(0x10a)]('highlight-match-date')[_0x4582f0(0x160)]=_0x4cdd57[_0x4582f0(0x276)]()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x5e0a49[_0x4582f0(0x29d)]||'',document['getElementById']('highlight-winner-score')[_0x4582f0(0x160)]=_0x5e0a49['winnerScore']||'',document[_0x4582f0(0x10a)]('highlight-loser-name')[_0x4582f0(0x160)]=_0x5e0a49['loserName']||'',document[_0x4582f0(0x10a)]('highlight-loser-score')['value']=_0x5e0a49['loserScore']||'',document['getElementById']('highlight-match-link')[_0x4582f0(0x160)]=_0x5e0a49[_0x4582f0(0x194)]||'';}else{if(_0x46b8ed==='creator')document['getElementById']('highlight-map')['value']=_0x5e0a49['map']||'',document[_0x4582f0(0x10a)]('highlight-map-creator')['value']=_0x5e0a49['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x5e0a49['mapVersion']||'',document[_0x4582f0(0x10a)]('highlight-creator-image')['value']=_0x5e0a49['creatorImageUrl']||'';else _0x46b8ed==='achievement'&&(document[_0x4582f0(0x10a)]('highlight-achievement-player')[_0x4582f0(0x160)]=_0x5e0a49['achievementPlayer']||'',document['getElementById']('highlight-achievement-type')['value']=_0x5e0a49['achievementType']||'',document[_0x4582f0(0x10a)]('highlight-achievement-details')['value']=_0x5e0a49[_0x4582f0(0x14b)]||'',document['getElementById'](_0x4582f0(0x1df))[_0x4582f0(0x160)]=_0x5e0a49['playerProfileUrl']||'',document[_0x4582f0(0x10a)]('highlight-achievement-image')['value']=_0x5e0a49[_0x4582f0(0x1d9)]||'');}}catch(_0x4296ab){console[_0x4582f0(0x1ab)]('Error\x20loading\x20highlight:',_0x4296ab),showNotification('Error\x20loading\x20highlight:\x20'+_0x4296ab[_0x4582f0(0x293)],'error');}}async function saveHighlight(){const _0x3d7a7d=a4_0x47be6c;try{const _0x1bf25e=document['getElementById']('highlight-id')?.[_0x3d7a7d(0x160)]||'',_0x4bdaa7=document['getElementById']('highlight-type')?.['value']||_0x3d7a7d(0x192),_0x27c36e={'title':document['getElementById']('highlight-title')?.['value']?.[_0x3d7a7d(0x2cf)]()||'','description':document['getElementById']('highlight-description')?.[_0x3d7a7d(0x160)]?.['trim']()||'','submittedBy':document['getElementById'](_0x3d7a7d(0x1c4))?.['value']?.[_0x3d7a7d(0x2cf)]()||'','videoId':document['getElementById'](_0x3d7a7d(0x121))?.['value']?.[_0x3d7a7d(0x2cf)]()||null,'type':_0x4bdaa7};if(!_0x27c36e['title']){showNotification(_0x3d7a7d(0x257),'error');return;}if(_0x4bdaa7==='match'){_0x27c36e['matchInfo']=document[_0x3d7a7d(0x10a)](_0x3d7a7d(0x1e6))?.['value']?.['trim']()||'',_0x27c36e[_0x3d7a7d(0x1b8)]=document['getElementById']('highlight-map')?.[_0x3d7a7d(0x160)]?.['trim']()||'';const _0x502e46=document['getElementById'](_0x3d7a7d(0x2c4)),_0x10702d=_0x502e46?.[_0x3d7a7d(0x160)]||'';_0x27c36e['matchDate']=_0x10702d?Timestamp['fromDate'](new Date(_0x10702d)):null,_0x27c36e['winnerName']=document['getElementById'](_0x3d7a7d(0x273))?.[_0x3d7a7d(0x160)]?.[_0x3d7a7d(0x2cf)]()||'',_0x27c36e[_0x3d7a7d(0x15f)]=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x27c36e['loserName']=document['getElementById']('highlight-loser-name')?.[_0x3d7a7d(0x160)]?.['trim']()||'',_0x27c36e['loserScore']=document[_0x3d7a7d(0x10a)]('highlight-loser-score')?.['value']?.[_0x3d7a7d(0x2cf)]()||'',_0x27c36e['matchLink']=document[_0x3d7a7d(0x10a)]('highlight-match-link')?.['value']?.[_0x3d7a7d(0x2cf)]()||'';if(!_0x27c36e[_0x3d7a7d(0x2b2)]){showNotification(_0x3d7a7d(0x2f2),_0x3d7a7d(0x1ab));return;}}else{if(_0x4bdaa7===_0x3d7a7d(0x15c)){_0x27c36e['map']=document[_0x3d7a7d(0x10a)]('highlight-map')?.['value']?.['trim']()||'',_0x27c36e['mapCreator']=document['getElementById']('highlight-map-creator')?.['value']?.[_0x3d7a7d(0x2cf)]()||'',_0x27c36e['mapVersion']=document['getElementById']('highlight-map-version')?.['value']?.[_0x3d7a7d(0x2cf)]()||'',_0x27c36e['creatorImageUrl']=document['getElementById']('highlight-creator-image')?.['value']?.['trim']()||'';if(!_0x27c36e['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x4bdaa7==='achievement'){_0x27c36e['achievementPlayer']=document['getElementById'](_0x3d7a7d(0x241))?.['value']?.['trim']()||'',_0x27c36e['achievementType']=document['getElementById']('highlight-achievement-type')?.['value']?.['trim']()||'',_0x27c36e['achievementDetails']=document['getElementById']('highlight-achievement-details')?.['value']?.[_0x3d7a7d(0x2cf)]()||'',_0x27c36e['playerProfileUrl']=document[_0x3d7a7d(0x10a)]('highlight-player-profile')?.[_0x3d7a7d(0x160)]?.['trim']()||'',_0x27c36e['achievementImageUrl']=document[_0x3d7a7d(0x10a)]('highlight-achievement-image')?.['value']?.['trim']()||'';if(!_0x27c36e['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required','error');return;}}}}_0x1bf25e?(_0x27c36e['updatedAt']=serverTimestamp(),await updateDoc(doc(db,_0x3d7a7d(0x2fa),_0x1bf25e),_0x27c36e),showNotification(_0x3d7a7d(0xef),'success')):(_0x27c36e['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x27c36e),showNotification(_0x3d7a7d(0x2cd),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x843ed9){console[_0x3d7a7d(0x1ab)]('Error\x20saving\x20highlight:',_0x843ed9),showNotification(_0x3d7a7d(0x288)+_0x843ed9[_0x3d7a7d(0x293)],'error');}}function closeHighlightModal(){const _0x447e1d=a4_0x47be6c,_0x12a0b3=document[_0x447e1d(0x10a)](_0x447e1d(0xeb));if(_0x12a0b3)_0x12a0b3['classList']['remove']('active');}function getHighlightTypeName(_0x6d45ad){const _0x5cb590=a4_0x47be6c;switch(_0x6d45ad){case'match':return'Match\x20Highlight';case'creator':return _0x5cb590(0x207);case'achievement':return'Player\x20Achievement';default:return _0x5cb590(0x247);}}function updateHighlightVideoPreview(){const _0x4ca8c9=a4_0x47be6c,_0x456b8f=document['getElementById']('highlight-video-id'),_0x56599d=document[_0x4ca8c9(0x10a)]('highlight-video-preview-container'),_0x425b50=document['getElementById']('highlight-video-preview');if(!_0x456b8f||!_0x425b50||!_0x56599d)return;const _0x5894a7=_0x456b8f['value']['trim']();_0x5894a7&&/^[a-zA-Z0-9_-]{11}$/[_0x4ca8c9(0x1af)](_0x5894a7)?(_0x425b50[_0x4ca8c9(0x221)]='https://www.youtube.com/embed/'+_0x5894a7,_0x56599d['style']['display']='block'):(_0x425b50[_0x4ca8c9(0x221)]='',_0x56599d['style']['display']='none');}async function loadHighlightsAdmin(){const _0x13742=a4_0x47be6c,_0x108c5c=document['getElementById']('highlights-table-body');if(!_0x108c5c)return;_0x108c5c[_0x13742(0x312)]='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>';try{const _0x4e2bf7=query(collection(db,'highlights'),orderBy('createdAt',_0x13742(0x1a5))),_0x2b45c8=await getDocs(_0x4e2bf7);if(_0x2b45c8['empty']){_0x108c5c['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x108c5c['innerHTML']='',_0x2b45c8['forEach'](_0x580268=>{const _0x2981a5=_0x13742,_0x1dd2a9=_0x580268['data'](),_0x514999=document[_0x2981a5(0x12c)]('tr'),_0x57c983=_0x1dd2a9['createdAt']?new Date(_0x1dd2a9['createdAt']['seconds']*0x3e8)['toLocaleDateString']():_0x2981a5(0x10e);let _0x4aaae2='Unknown',_0x94e030='';switch(_0x1dd2a9[_0x2981a5(0x125)]){case'match':_0x4aaae2=_0x2981a5(0x234),_0x94e030='match-type';break;case'creator':_0x4aaae2='Creator',_0x94e030='creator-type';break;case _0x2981a5(0x16d):_0x4aaae2='Achievement',_0x94e030='achievement-type';break;}_0x514999['innerHTML']=_0x2981a5(0x2c8)+(_0x1dd2a9[_0x2981a5(0x313)]||'Untitled')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20'+_0x94e030+'\x22>'+_0x4aaae2+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x57c983+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x1dd2a9['submittedBy']||'Unknown')+_0x2981a5(0x285)+(_0x1dd2a9['videoId']?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':'<i\x20class=\x22fas\x20fa-times\x22></i>\x20No')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22'+_0x580268['id']+'\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22'+_0x580268['id']+'\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x108c5c['appendChild'](_0x514999);}),document['querySelectorAll']('.edit-highlight-btn')[_0x13742(0x2f7)](_0x5bdbd5=>{const _0xc492e1=_0x13742;_0x5bdbd5[_0xc492e1(0x219)](_0xc492e1(0x1ae),_0x19c9a8=>{const _0x42f071=_0xc492e1;openHighlightModal(_0x19c9a8[_0x42f071(0xd7)]['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x5e2415=>{_0x5e2415['addEventListener']('click',_0x1d31a0=>{confirmDeleteHighlight(_0x1d31a0['currentTarget']['dataset']['id']);});});}catch(_0x55cbce){console['error']('Error\x20loading\x20highlights:',_0x55cbce),_0x108c5c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20'+_0x55cbce[_0x13742(0x293)]+_0x13742(0xcb);}}async function confirmDeleteHighlight(_0x563fc4){const _0x482e10=a4_0x47be6c;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,'highlights',_0x563fc4)),showNotification(_0x482e10(0xc9),'success'),loadHighlightsAdmin();}catch(_0x3e47e1){console['error'](_0x482e10(0x146),_0x3e47e1),showNotification('Error\x20deleting\x20highlight:\x20'+_0x3e47e1['message'],_0x482e10(0x1ab));}}function setupCreateTestMatchModal(){const _0x55e410=a4_0x47be6c;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x28dafe=document['getElementById']('create-test-match-modal'),_0x26f291=document['getElementById']('create-test-match-form');if(!_0x28dafe){console['error']('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x26f291){console['error']('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x26be07=_0x28dafe['cloneNode'](!![]);_0x28dafe['parentNode']['replaceChild'](_0x26be07,_0x28dafe);const _0x421efe=_0x26be07['querySelector'](_0x55e410(0x230));_0x26be07['addEventListener']('click',function(_0x500ec6){const _0x20b27a=_0x55e410;_0x500ec6['target']===_0x26be07&&(console['log'](_0x20b27a(0x228)),closeCreateTestMatchModal());});const _0x47019a=_0x26be07['querySelector']('.close-btn');_0x47019a&&_0x47019a[_0x55e410(0x219)]('click',function(_0x9ba96f){const _0x2852cb=_0x55e410;_0x9ba96f['preventDefault'](),_0x9ba96f['stopPropagation'](),console['log'](_0x2852cb(0x26d)),closeCreateTestMatchModal();});const _0x3d66ab=_0x26be07[_0x55e410(0x229)](_0x55e410(0xcf));_0x3d66ab&&_0x3d66ab[_0x55e410(0x219)]('click',function(_0x4de96f){const _0x13d11d=_0x55e410;_0x4de96f['preventDefault'](),_0x4de96f['stopPropagation'](),console['log'](_0x13d11d(0x2f0)),closeCreateTestMatchModal();});if(_0x421efe){_0x421efe['addEventListener']('submit',function(_0x2c38c5){const _0x37f9a9=_0x55e410;_0x2c38c5['preventDefault'](),_0x2c38c5[_0x37f9a9(0x232)](),console[_0x37f9a9(0x1c9)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x3ee301=_0x421efe['querySelector'](_0x55e410(0x203));_0x3ee301&&_0x3ee301[_0x55e410(0x219)]('click',function(_0x5952f3){const _0x3791aa=_0x55e410;_0x5952f3[_0x3791aa(0x287)](),_0x5952f3['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log'](_0x55e410(0x117));}function setupManageHighlightsSection(){const _0x1d7f4b=a4_0x47be6c;console['log'](_0x1d7f4b(0x14a)),setupHighlightButtons();const _0x55188e=document[_0x1d7f4b(0x10a)]('highlight-form');_0x55188e&&_0x55188e[_0x1d7f4b(0x219)]('submit',_0x3bdbc7=>{const _0x17c590=_0x1d7f4b;_0x3bdbc7[_0x17c590(0x287)](),saveHighlight();});const _0x192504=document['getElementById'](_0x1d7f4b(0x2fc));_0x192504&&_0x192504['addEventListener']('click',closeHighlightModal);const _0x421331=document['querySelector']('#highlight-modal\x20.close-btn');_0x421331&&_0x421331['addEventListener']('click',closeHighlightModal);const _0x3bb09a=document['getElementById'](_0x1d7f4b(0xeb));_0x3bb09a&&_0x3bb09a['addEventListener']('click',_0x18dad4=>{const _0xc06860=_0x1d7f4b;_0x18dad4[_0xc06860(0x17c)]===_0x3bb09a&&closeHighlightModal();});const _0x3d5d5b=document['getElementById']('highlight-video-id');_0x3d5d5b&&_0x3d5d5b[_0x1d7f4b(0x219)]('input',()=>{updateHighlightVideoPreview();}),console[_0x1d7f4b(0x1c9)]('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x3da0c4=a4_0x47be6c;console['log']('Setting\x20up\x20Manage\x20Matches\x20section');const _0x25ddf8=document['getElementById']('matches-prev-page'),_0x2234e1=document['getElementById']('matches-next-page');_0x25ddf8&&_0x25ddf8[_0x3da0c4(0x219)]('click',()=>{const _0x34d881=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x34d881]['page']-0x1);});_0x2234e1&&_0x2234e1['addEventListener'](_0x3da0c4(0x1ae),()=>{const _0x3f8851=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x3f8851]['page']+0x1);});const _0x24aa72=document['getElementById'](_0x3da0c4(0x16e)),_0x2bceda=document['getElementById']('reset-matches-filters');_0x24aa72&&_0x24aa72['addEventListener'](_0x3da0c4(0x1ae),applyMatchesFilters);_0x2bceda&&_0x2bceda[_0x3da0c4(0x219)]('click',resetMatchesFilters);const _0x404303=document['getElementById']('matches-search');_0x404303&&_0x404303[_0x3da0c4(0x219)]('input',debounce(filterMatchesTable,0x12c));const _0x5aef13=document['getElementById'](_0x3da0c4(0x2aa));_0x5aef13&&_0x5aef13['addEventListener']('click',openResimulateModal);const _0x3bd335=document['getElementById']('resimulate-modal');if(_0x3bd335){const _0x15700d=_0x3bd335['querySelector'](_0x3da0c4(0x11e));_0x15700d&&_0x15700d['addEventListener'](_0x3da0c4(0x1ae),closeResimulateModal),_0x3bd335['addEventListener']('click',_0x4ecc89=>{const _0xba376f=_0x3da0c4;_0x4ecc89[_0xba376f(0x17c)]===_0x3bd335&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x55efec=a4_0x47be6c;console['log']('Opening\x20create\x20test\x20match\x20modal');const _0x1194c9=document['getElementById']('create-test-match-modal'),_0x48c21e=document[_0x55efec(0x10a)]('create-test-match-form');if(!_0x1194c9){console[_0x55efec(0x1ab)]('Create\x20test\x20match\x20modal\x20not\x20found'),showNotification('Create\x20test\x20match\x20modal\x20not\x20found','error');return;}if(!_0x48c21e){console['error'](_0x55efec(0x1d0)),showNotification('Create\x20test\x20match\x20form\x20not\x20found','error');return;}_0x48c21e['reset']();const _0x592f5a=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x469c29=![];_0x592f5a['forEach'](_0x3e4292=>{const _0x314e6e=_0x55efec;console['log']('Found\x20radio\x20with\x20value:',_0x3e4292[_0x314e6e(0x160)]),_0x3e4292['value']===currentLadder&&(_0x3e4292['checked']=!![],_0x469c29=!![],console[_0x314e6e(0x1c9)]('Set\x20default\x20ladder\x20to:',currentLadder));});if(!_0x469c29){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x1afec4=document[_0x55efec(0x229)]('input[name=\x22test-match-ladder\x22][value=\x22D1\x22]');_0x1afec4&&(_0x1afec4[_0x55efec(0x1be)]=!![],console['log']('Defaulted\x20to\x20D1\x20ladder'));}const _0xeff2e=document[_0x55efec(0x10a)]('test-match-date');if(_0xeff2e){const _0x4a0574=new Date()[_0x55efec(0x276)]()[_0x55efec(0x26a)]('T')[0x0];_0xeff2e[_0x55efec(0x160)]=_0x4a0574;}_0x1194c9['style']['display']='flex',_0x1194c9['style'][_0x55efec(0x1bc)]='visible',_0x1194c9[_0x55efec(0x1e1)][_0x55efec(0x113)]='1',_0x1194c9['classList']['add']('active'),console[_0x55efec(0x1c9)]('Modal\x20should\x20now\x20be\x20visible');const _0x3423b2=document['getElementById'](_0x55efec(0x17a));_0x3423b2&&setTimeout(()=>{_0x3423b2['focus']();},0x64);}function closeCreateTestMatchModal(){const _0x229e28=a4_0x47be6c;console[_0x229e28(0x1c9)]('Closing\x20create\x20test\x20match\x20modal');const _0x928cee=document['getElementById'](_0x229e28(0x1ef));if(!_0x928cee){console['error'](_0x229e28(0x263));return;}_0x928cee[_0x229e28(0x239)]['remove']('active'),_0x928cee['style'][_0x229e28(0x113)]='0',_0x928cee['style']['visibility']='hidden',setTimeout(()=>{const _0x5d0d21=_0x229e28;!_0x928cee['classList']['contains']('active')&&(_0x928cee[_0x5d0d21(0x1e1)]['display']='none');},0x12c),console['log'](_0x229e28(0xe4));}async function createTestMatch(){const _0x47fe72=a4_0x47be6c;console['log']('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0x3cc81e=auth['currentUser'];if(!_0x3cc81e){showNotification('You\x20must\x20be\x20logged\x20in','error');return;}const _0x42fbf1='D1',_0x2da7a0='approvedMatches',_0x49b9fc={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':'Test\x20match','winnerDemoLink':null,'loserUsername':_0x47fe72(0x1ac),'loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x47fe72(0x1a0),'loserDemoLink':null,'mapPlayed':_0x47fe72(0x115),'approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0x3cc81e['email'],'createdAt':serverTimestamp(),'createdBy':_0x3cc81e[_0x47fe72(0x208)],'isTestMatch':!![],'ladder':_0x42fbf1,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x47fe72(0x1c5)+_0x3cc81e['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x2da7a0),_0x49b9fc),showNotification('Simple\x20test\x20match\x20created\x20successfully','success'),closeCreateTestMatchModal();}catch(_0xc2678){console[_0x47fe72(0x1ab)](_0x47fe72(0x1ce),_0xc2678),showNotification(_0x47fe72(0x15d)+_0xc2678['message'],'error');}}window['testFirebaseConnection']=async function(){const _0x8bc82c=a4_0x47be6c;try{console['log']('Testing\x20Firebase\x20connection...'),console[_0x8bc82c(0x1c9)]('Auth:',auth),console['log']('DB:',db),console['log']('Current\x20user:',auth['currentUser']);const _0x690d47=collection(db,'players');console[_0x8bc82c(0x1c9)]('Collection\x20reference\x20created:',_0x690d47);const _0x2d81ab=query(_0x690d47,where(_0x8bc82c(0x1e5),'==',_0x8bc82c(0x1dd)));console['log'](_0x8bc82c(0x1aa),_0x2d81ab);const _0x49b594=await getDocs(_0x2d81ab);console[_0x8bc82c(0x1c9)]('Query\x20executed.\x20Empty:',_0x49b594[_0x8bc82c(0x177)]),console[_0x8bc82c(0x1c9)]('Firebase\x20connection\x20test\x20successful!');}catch(_0x460f73){console['error']('Firebase\x20connection\x20test\x20failed:',_0x460f73);}};function setupCreateTestMatchButton(){const _0x28c55f=a4_0x47be6c,_0x27e3fc=document['getElementById'](_0x28c55f(0xc4));if(!_0x27e3fc){console[_0x28c55f(0x1ab)](_0x28c55f(0xf9));return;}console[_0x28c55f(0x1c9)]('Setting\x20up\x20create\x20test\x20match\x20button');const _0x420b96=_0x27e3fc[_0x28c55f(0x254)](!![]);_0x27e3fc['parentNode'][_0x28c55f(0x267)](_0x420b96,_0x27e3fc),_0x420b96['addEventListener']('click',function(_0x3c11a3){const _0xd9eeba=_0x28c55f;_0x3c11a3['preventDefault'](),_0x3c11a3[_0xd9eeba(0x232)](),console['log']('Create\x20test\x20match\x20button\x20clicked'),openCreateTestMatchModal();}),console['log']('Create\x20test\x20match\x20button\x20setup\x20complete');}async function loadMatchesData(_0x2b6946=0x1){const _0x59c48c=a4_0x47be6c,_0x53f83f=document['getElementById']('matches-table-body');if(!_0x53f83f)return;_0x53f83f['innerHTML']=_0x59c48c(0x152);try{const _0x27c2ad=currentLadder['toLowerCase'](),_0x248e0b=matchesPagination[_0x27c2ad],_0x49cdbd=currentLadder==='D1'?_0x59c48c(0x2c1):currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x323efd=collection(db,_0x49cdbd);_0x2b6946<=0x1?(_0x248e0b['page']=0x1,_0x248e0b['firstVisible']=null,_0x248e0b[_0x59c48c(0x154)]=null):_0x248e0b['page']=_0x2b6946;const _0x337b8e=getMatchesFilters();let _0x9847de=_0x323efd;if(_0x337b8e['startDate']||_0x337b8e['endDate']||_0x337b8e['searchTerm']){let _0x2be313=[];_0x337b8e['startDate']&&_0x337b8e[_0x59c48c(0x1c3)]?(_0x2be313[_0x59c48c(0x111)](where('approvedAt','>=',_0x337b8e['startDate']),where(_0x59c48c(0x1fa),'<=',_0x337b8e[_0x59c48c(0x1c3)])),_0x9847de=query(_0x323efd,..._0x2be313)):_0x9847de=query(_0x323efd,orderBy('approvedAt','desc'));}else _0x9847de=query(_0x323efd,orderBy('approvedAt','desc'));_0x2b6946>0x1&&_0x248e0b[_0x59c48c(0x154)]?_0x9847de=query(_0x9847de,startAfter(_0x248e0b['lastVisible']),limit(PAGE_SIZE)):_0x9847de=query(_0x9847de,limit(PAGE_SIZE));const _0x2bd94a=await getDocs(_0x9847de);!_0x2bd94a['empty']&&(_0x248e0b[_0x59c48c(0x265)]=_0x2bd94a['docs'][0x0],_0x248e0b['lastVisible']=_0x2bd94a['docs'][_0x2bd94a['docs']['length']-0x1]);let _0xae0b99=![];if(!_0x2bd94a[_0x59c48c(0x177)]){const _0x165172=query(_0x9847de,startAfter(_0x248e0b['lastVisible']),limit(0x1)),_0x1a4fe6=await getDocs(_0x165172);_0xae0b99=!_0x1a4fe6['empty'];}const _0x246615=document['getElementById']('matches-prev-page'),_0x44f8b0=document[_0x59c48c(0x10a)](_0x59c48c(0xdf)),_0x5916e1=document['getElementById'](_0x59c48c(0x226));if(_0x246615)_0x246615['disabled']=_0x248e0b['page']<=0x1;if(_0x44f8b0)_0x44f8b0['disabled']=!_0xae0b99;if(_0x5916e1)_0x5916e1['textContent']='Page\x20'+_0x248e0b[_0x59c48c(0x2af)];if(_0x2bd94a[_0x59c48c(0x177)]){_0x53f83f['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x53f83f['innerHTML']='',_0x2bd94a[_0x59c48c(0x2f7)](_0xd1c48b=>{const _0x4f5e43=_0x59c48c,_0x23333e=_0xd1c48b['data'](),_0x544cb2=document[_0x4f5e43(0x12c)]('tr'),_0x18185f=_0x23333e['approvedAt']?new Date(_0x23333e[_0x4f5e43(0x1fa)]['seconds']*0x3e8)['toLocaleDateString']():'N/A';_0x544cb2[_0x4f5e43(0x1e3)]('data-id',_0xd1c48b['id']),_0x544cb2['setAttribute'](_0x4f5e43(0x307),currentLadder),_0x544cb2['classList']['add']('match-row'),_0x544cb2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x18185f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0x23333e[_0x4f5e43(0x17e)]||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>'+(_0x23333e['loserUsername']||_0x4f5e43(0x25e))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>'+(_0x23333e['winnerScore']||0x0)+'\x20-\x20'+(_0x23333e[_0x4f5e43(0x284)]||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0x23333e['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0xd1c48b['id']+'\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22'+_0xd1c48b['id']+_0x4f5e43(0x2a5),_0x53f83f[_0x4f5e43(0xe3)](_0x544cb2);}),setupMatchesActionButtons(),_0x337b8e['searchTerm']&&filterMatchesTable(),console[_0x59c48c(0x1c9)](_0x59c48c(0x2c5)+_0x2bd94a['size']+'\x20matches\x20for\x20'+currentLadder+'\x20ladder,\x20page\x20'+_0x248e0b['page']);}catch(_0x7f8d8d){console['error']('Error\x20loading\x20matches:',_0x7f8d8d),_0x53f83f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x7f8d8d['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x32d36a,_0x5516e6){const _0x4646de=a4_0x47be6c;try{console['log']('Deleting\x20match\x20'+_0x32d36a+_0x4646de(0x11a)+_0x5516e6+'\x20ladder');const _0x420634=auth['currentUser'];if(!_0x420634){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','error');return;}const _0x3f4041=_0x5516e6==='D1'?_0x4646de(0x2c1):_0x5516e6==='D2'?_0x4646de(0x2db):_0x4646de(0x28e);console['log'](_0x4646de(0x16f)+_0x3f4041),showNotification('Deleting\x20match...','info'),await deleteDoc(doc(db,_0x3f4041,_0x32d36a)),console['log'](_0x4646de(0x1a4)),showNotification('Match\x20deleted\x20successfully','success');const _0x16c8d8=_0x5516e6['toLowerCase']();loadMatchesData(matchesPagination[_0x16c8d8]['page']);}catch(_0x533cdd){console[_0x4646de(0x1ab)](_0x4646de(0x139),_0x533cdd),showNotification(_0x4646de(0x28d)+_0x533cdd['message'],'error');}}function setupMatchesActionButtons(){const _0x23912e=a4_0x47be6c;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x1f5d89=>{_0x1f5d89['addEventListener']('click',_0x2d2ded=>{const _0x186574=a4_0x3520;_0x2d2ded[_0x186574(0x287)](),_0x2d2ded['stopPropagation']();const _0x187b1e=_0x2d2ded['currentTarget']['dataset']['id'],_0x3e3c70=_0x2d2ded[_0x186574(0xd7)]['closest']('tr'),_0xdabebe=_0x3e3c70['dataset']['ladder'];console['log']('Edit\x20match\x20clicked:',_0x187b1e,_0xdabebe),openEditMatchModal(_0x187b1e,_0xdabebe);});}),document['querySelectorAll'](_0x23912e(0x10c))['forEach'](_0x207f6f=>{_0x207f6f['addEventListener']('click',_0x179aa6=>{const _0x1b6a37=a4_0x3520;_0x179aa6[_0x1b6a37(0x287)](),_0x179aa6[_0x1b6a37(0x232)]();const _0x42cdbd=_0x179aa6[_0x1b6a37(0xd7)]['dataset']['id'],_0x3e33b4=_0x179aa6[_0x1b6a37(0xd7)]['closest']('tr'),_0x48d1f1=_0x3e33b4[_0x1b6a37(0x22b)]['ladder']||currentLadder;console[_0x1b6a37(0x1c9)]('Delete\x20match\x20clicked:',_0x42cdbd,_0x48d1f1),confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.')&&deleteMatch(_0x42cdbd,_0x48d1f1);});}),console[_0x23912e(0x1c9)](_0x23912e(0x245));}function filterMatchesTable(){const _0x41df53=a4_0x47be6c,_0x5bb9ea=document[_0x41df53(0x10a)]('matches-search')['value']['toLowerCase'](),_0x4a6981=document['querySelectorAll']('#matches-table-body\x20tr');let _0x9945e3=0x0;_0x4a6981['forEach'](_0x27a584=>{const _0x2ff84f=_0x41df53;if(_0x27a584['classList']['contains'](_0x2ff84f(0x305))||_0x27a584['classList'][_0x2ff84f(0x2ae)]('empty-state')||_0x27a584[_0x2ff84f(0x239)]['contains']('error-state'))return;const _0x1e92f2=_0x27a584['cells'][0x1]['textContent']['toLowerCase'](),_0x22cf08=_0x27a584['cells'][0x2]['textContent'][_0x2ff84f(0x166)](),_0x7a6966=_0x27a584[_0x2ff84f(0x258)][0x4]['textContent']['toLowerCase']();_0x1e92f2['includes'](_0x5bb9ea)||_0x22cf08['includes'](_0x5bb9ea)||_0x7a6966[_0x2ff84f(0x2f4)](_0x5bb9ea)?(_0x27a584[_0x2ff84f(0x1e1)][_0x2ff84f(0xcc)]='',_0x9945e3++):_0x27a584['style']['display']='none';});if(_0x9945e3===0x0&&_0x4a6981['length']>0x0){const _0x1dd67d=document['getElementById']('matches-table-body'),_0x156ec8=_0x1dd67d['querySelector']('.no-results');if(!_0x156ec8){const _0x338e6c=document['createElement']('tr');_0x338e6c['className']=_0x41df53(0x28c),_0x338e6c[_0x41df53(0x312)]='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x5bb9ea+'\x27</td>',_0x1dd67d[_0x41df53(0xe3)](_0x338e6c);}}else{const _0x36f281=document[_0x41df53(0x229)](_0x41df53(0x149));_0x36f281&&_0x36f281['remove']();}}function getMatchesFilters(){const _0x5b5b41=a4_0x47be6c,_0x1b6044=document['getElementById']('matches-search')[_0x5b5b41(0x160)][_0x5b5b41(0x166)](),_0x367d25=document['getElementById']('matches-start-date')[_0x5b5b41(0x160)],_0x255684=document['getElementById']('matches-end-date')[_0x5b5b41(0x160)];let _0x54d8e2=null,_0xd8f8eb=null;return _0x367d25&&(_0x54d8e2=new Date(_0x367d25),_0x54d8e2['setHours'](0x0,0x0,0x0,0x0),_0x54d8e2=Timestamp['fromDate'](_0x54d8e2)),_0x255684&&(_0xd8f8eb=new Date(_0x255684),_0xd8f8eb['setHours'](0x17,0x3b,0x3b,0x3e7),_0xd8f8eb=Timestamp['fromDate'](_0xd8f8eb)),{'searchTerm':_0x1b6044,'startDate':_0x54d8e2,'endDate':_0xd8f8eb};}async function applyMatchesFilters(){const _0x2b7679=currentLadder['toLowerCase']();matchesPagination[_0x2b7679]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x1605e0=a4_0x47be6c;document[_0x1605e0(0x10a)]('matches-start-date')['value']='',document[_0x1605e0(0x10a)]('matches-end-date')['value']='',document[_0x1605e0(0x10a)]('matches-search')['value']='';const _0x476ce7=currentLadder['toLowerCase']();matchesPagination[_0x476ce7]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x379ce2,_0x55d44d){const _0x35d2cf=a4_0x47be6c,_0x54849d=document['getElementById']('edit-match-modal');if(!_0x54849d)return;try{const _0x5ec611=_0x55d44d==='D1'?_0x35d2cf(0x2c1):_0x55d44d==='D2'?_0x35d2cf(0x2db):_0x35d2cf(0x28e),_0x259e90=doc(db,_0x5ec611,_0x379ce2),_0x16528a=await getDoc(_0x259e90);if(!_0x16528a['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x1e217c=_0x16528a['data']();document[_0x35d2cf(0x10a)]('edit-match-id')['value']=_0x379ce2,document[_0x35d2cf(0x10a)]('edit-match-ladder')[_0x35d2cf(0x160)]=_0x55d44d,document['getElementById']('edit-match-winner')[_0x35d2cf(0x160)]=_0x1e217c['winnerUsername']||'',document['getElementById']('edit-match-winner-score')[_0x35d2cf(0x160)]=_0x1e217c['winnerScore']||0x0,document['getElementById']('edit-match-winner-suicides')['value']=_0x1e217c['winnerSuicides']||0x0,document['getElementById'](_0x35d2cf(0x233))['value']=_0x1e217c['winnerComment']||'',document['getElementById']('edit-match-loser')['value']=_0x1e217c['loserUsername']||'',document['getElementById']('edit-match-loser-score')[_0x35d2cf(0x160)]=_0x1e217c['loserScore']||0x0,document['getElementById']('edit-match-loser-suicides')['value']=_0x1e217c['loserSuicides']||0x0,document['getElementById']('edit-match-loser-comment')[_0x35d2cf(0x160)]=_0x1e217c[_0x35d2cf(0x271)]||'',document['getElementById']('edit-match-map')['value']=_0x1e217c['mapPlayed']||'',document['getElementById'](_0x35d2cf(0x204))['value']=_0x1e217c['winnerDemoLink']||'',document['getElementById']('edit-match-loser-demo')['value']=_0x1e217c['loserDemoLink']||_0x1e217c['demoLink']||'',document['getElementById']('edit-match-title')['textContent']='Edit\x20Match:\x20'+_0x1e217c['winnerUsername']+_0x35d2cf(0x277)+_0x1e217c[_0x35d2cf(0x1e7)],_0x54849d[_0x35d2cf(0x239)]['add']('active');}catch(_0x1a2e7d){console['error']('Error\x20loading\x20match\x20data:',_0x1a2e7d),showNotification('Failed\x20to\x20load\x20match\x20data','error');}}function closeEditMatchModal(){const _0x17f95f=document['getElementById']('edit-match-modal');_0x17f95f&&_0x17f95f['classList']['remove']('active');}async function saveEditedMatch(){const _0x104c04=a4_0x47be6c;try{const _0x541c58=document['getElementById']('edit-match-id')['value'],_0x5e2dd7=document['getElementById']('edit-match-ladder')[_0x104c04(0x160)];if(!_0x541c58||!_0x5e2dd7){showNotification(_0x104c04(0x1a3),'error');return;}const _0x1eebcc=_0x5e2dd7==='D1'?'approvedMatches':_0x5e2dd7==='D2'?_0x104c04(0x2db):'approvedMatchesD3',_0x57d43b=document['getElementById'](_0x104c04(0x1ee))['value']['trim'](),_0x175ee0=parseInt(document['getElementById'](_0x104c04(0x176))['value']),_0x17bb13=parseInt(document['getElementById']('edit-match-winner-suicides')['value']),_0x4ab996=document[_0x104c04(0x10a)](_0x104c04(0x233))['value'][_0x104c04(0x2cf)](),_0x436e96=document['getElementById'](_0x104c04(0x275))[_0x104c04(0x160)]['trim'](),_0x284209=parseInt(document[_0x104c04(0x10a)]('edit-match-loser-score')['value']),_0x2f5a96=parseInt(document['getElementById']('edit-match-loser-suicides')['value']),_0x8c1518=document['getElementById'](_0x104c04(0x2a4))[_0x104c04(0x160)]['trim'](),_0x476781=document['getElementById']('edit-match-map')['value']['trim'](),_0x3ebd69=document['getElementById']('edit-match-winner-demo')['value'][_0x104c04(0x2cf)](),_0x3cd5da=document['getElementById'](_0x104c04(0x270))['value'][_0x104c04(0x2cf)]();if(!_0x57d43b||!_0x436e96){showNotification(_0x104c04(0x246),'error');return;}await updateDoc(doc(db,_0x1eebcc,_0x541c58),{'winnerUsername':_0x57d43b,'winnerScore':_0x175ee0,'winnerSuicides':_0x17bb13,'winnerComment':_0x4ab996,'loserUsername':_0x436e96,'loserScore':_0x284209,'loserSuicides':_0x2f5a96,'loserComment':_0x8c1518,'mapPlayed':_0x476781,'winnerDemoLink':_0x3ebd69||null,'loserDemoLink':_0x3cd5da||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x104c04(0x208)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully',_0x104c04(0x22a)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x5e2dd7[_0x104c04(0x166)]()]['page']);}catch(_0x1fef4b){console[_0x104c04(0x1ab)]('Error\x20saving\x20match:',_0x1fef4b),showNotification('Failed\x20to\x20save\x20match:\x20'+_0x1fef4b[_0x104c04(0x293)],'error');}}async function openDeleteMatchModal(_0x3b7635,_0x19f159){const _0x38a453=a4_0x47be6c;try{const _0x9049eb=_0x19f159==='D1'?_0x38a453(0x2c1):_0x19f159==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0xc0a10e=doc(db,_0x9049eb,_0x3b7635),_0x5e6844=await getDoc(_0xc0a10e);if(!_0x5e6844['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x418f9a=_0x5e6844['data'](),_0x44fdf6=document[_0x38a453(0x10a)](_0x38a453(0x2f9));_0x44fdf6['dataset']['matchId']=_0x3b7635,_0x44fdf6[_0x38a453(0x22b)]['ladder']=_0x19f159;const _0x2a985d=_0x418f9a['approvedAt']?new Date(_0x418f9a['approvedAt']['seconds']*0x3e8)[_0x38a453(0x1ed)]():'N/A',_0x1cf6aa=document['getElementById'](_0x38a453(0x1f5));_0x1cf6aa['innerHTML']=_0x38a453(0x2a8)+_0x2a985d+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20'+_0x418f9a['winnerUsername']+_0x38a453(0xe7)+_0x418f9a['loserUsername']+'\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+(_0x418f9a[_0x38a453(0x15f)]||0x0)+'\x20-\x20'+(_0x418f9a[_0x38a453(0x284)]||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x418f9a[_0x38a453(0x12f)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x19f159+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x44fdf6[_0x38a453(0x239)]['add']('active');}catch(_0x153add){console[_0x38a453(0x1ab)]('Error\x20loading\x20match\x20for\x20deletion:',_0x153add),showNotification(_0x38a453(0x2ac),'error');}}function closeDeleteMatchModal(){const _0x2b4739=a4_0x47be6c,_0x28b52e=document[_0x2b4739(0x10a)]('delete-match-confirm-modal');_0x28b52e&&(_0x28b52e[_0x2b4739(0x239)]['remove']('active'),_0x28b52e[_0x2b4739(0x101)]('data-match-id'),_0x28b52e['removeAttribute'](_0x2b4739(0x307)));}async function confirmDeleteMatch(){const _0x5bb9ae=a4_0x47be6c,_0x45f9a5=document['getElementById']('delete-match-confirm-modal'),_0x599e56=_0x45f9a5['dataset']['matchId'],_0x1768a7=_0x45f9a5['dataset']['ladder'];if(!_0x599e56||!_0x1768a7){showNotification('Match\x20ID\x20or\x20ladder\x20missing','error'),closeDeleteMatchModal();return;}try{const _0x20a8fd=_0x1768a7==='D1'?'approvedMatches':_0x1768a7==='D2'?'approvedMatchesD2':_0x5bb9ae(0x28e);await deleteDoc(doc(db,_0x20a8fd,_0x599e56)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0x1768a7['toLowerCase']()][_0x5bb9ae(0x2af)]);}catch(_0x3d279c){console[_0x5bb9ae(0x1ab)](_0x5bb9ae(0x139),_0x3d279c),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x3d279c['message'],_0x5bb9ae(0x1ab));}}async function saveHighlightChanges(){const _0x3ea007=a4_0x47be6c,_0x34428b=document['getElementById']('edit-highlight-id')['value'],_0x1f2209=document['getElementById']('edit-highlight-type-select')['value'];let _0x5d2096={'title':document[_0x3ea007(0x10a)]('edit-highlight-title-input')[_0x3ea007(0x160)]['trim'](),'type':_0x1f2209,'description':document['getElementById']('edit-highlight-description-input')['value']['trim'](),'videoId':document[_0x3ea007(0x10a)]('edit-highlight-videoId-input')[_0x3ea007(0x160)]['trim'](),'submittedBy':auth['currentUser'][_0x3ea007(0x208)]};if(_0x1f2209==='match'){_0x5d2096['matchInfo']=document['getElementById']('edit-highlight-matchInfo-input')['value']['trim'](),_0x5d2096[_0x3ea007(0x1b8)]=document[_0x3ea007(0x10a)]('edit-highlight-map-input')['value']['trim']();const _0x3b5b66=document['getElementById']('edit-highlight-matchDate-input')['value'];_0x5d2096[_0x3ea007(0x170)]=_0x3b5b66?Timestamp['fromDate'](new Date(_0x3b5b66)):null,_0x5d2096['winnerName']=document[_0x3ea007(0x10a)]('edit-highlight-winnerName-input')['value']['trim'](),_0x5d2096['winnerScore']=document[_0x3ea007(0x10a)]('edit-highlight-winnerScore-input')[_0x3ea007(0x160)]['trim'](),_0x5d2096['loserName']=document[_0x3ea007(0x10a)]('edit-highlight-loserName-input')['value']['trim'](),_0x5d2096[_0x3ea007(0x284)]=document[_0x3ea007(0x10a)]('edit-highlight-loserScore-input')['value']['trim'](),_0x5d2096['matchLink']=document['getElementById'](_0x3ea007(0xff))['value'][_0x3ea007(0x2cf)](),_0x5d2096['mapCreator']=null,_0x5d2096['mapVersion']=null,_0x5d2096['creatorImageUrl']=null,_0x5d2096['achievementPlayer']=null,_0x5d2096['achievementType']=null,_0x5d2096['achievementDetails']=null,_0x5d2096['playerProfileUrl']=null;}else{if(_0x1f2209==='creator')_0x5d2096['map']=document['getElementById'](_0x3ea007(0x2f6))[_0x3ea007(0x160)]['trim'](),_0x5d2096['mapCreator']=document[_0x3ea007(0x10a)]('edit-highlight-mapCreator-input')['value'][_0x3ea007(0x2cf)](),_0x5d2096[_0x3ea007(0x141)]=document['getElementById'](_0x3ea007(0x2b6))['value'][_0x3ea007(0x2cf)](),_0x5d2096[_0x3ea007(0x167)]=document[_0x3ea007(0x10a)](_0x3ea007(0x134))['value']['trim'](),_0x5d2096['matchInfo']=null,_0x5d2096['matchDate']=null,_0x5d2096['winnerName']=null,_0x5d2096[_0x3ea007(0x15f)]=null,_0x5d2096['loserName']=null,_0x5d2096['loserScore']=null,_0x5d2096['matchLink']=null,_0x5d2096[_0x3ea007(0x1f9)]=null,_0x5d2096['achievementType']=null,_0x5d2096['achievementDetails']=null,_0x5d2096[_0x3ea007(0x1e9)]=null;else _0x1f2209===_0x3ea007(0x16d)&&(_0x5d2096['achievementPlayer']=document['getElementById']('edit-highlight-achievementPlayer-input')[_0x3ea007(0x160)]['trim'](),_0x5d2096['achievementType']=document['getElementById']('edit-highlight-achievementType-input')['value']['trim'](),_0x5d2096[_0x3ea007(0x14b)]=document[_0x3ea007(0x10a)](_0x3ea007(0x2d9))[_0x3ea007(0x160)]['trim'](),_0x5d2096['playerProfileUrl']=document[_0x3ea007(0x10a)]('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x5d2096['matchInfo']=null,_0x5d2096[_0x3ea007(0x1b8)]=null,_0x5d2096['matchDate']=null,_0x5d2096[_0x3ea007(0x29d)]=null,_0x5d2096['winnerScore']=null,_0x5d2096['loserName']=null,_0x5d2096[_0x3ea007(0x284)]=null,_0x5d2096[_0x3ea007(0x194)]=null,_0x5d2096['mapCreator']=null,_0x5d2096['mapVersion']=null,_0x5d2096[_0x3ea007(0x167)]=null);}try{if(_0x34428b){_0x5d2096['updatedAt']=serverTimestamp();const _0x4c7999=doc(db,'highlights',_0x34428b);await updateDoc(_0x4c7999,_0x5d2096),showNotification(_0x3ea007(0xef),_0x3ea007(0x22a));}else _0x5d2096['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x5d2096),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0xa9ab5){console['error']('Error\x20saving\x20highlight:',_0xa9ab5),showNotification(_0x3ea007(0x288)+_0xa9ab5['message'],'error');}}async function resimulateMatch(){const _0x1f83d3=a4_0x47be6c;try{const _0x559299=document['getElementById']('resimulate-match-id')['value'];if(!_0x559299){showNotification('Match\x20ID\x20is\x20required',_0x1f83d3(0x1ab));return;}const _0x2f089c=auth[_0x1f83d3(0x300)];if(!_0x2f089c){showNotification(_0x1f83d3(0x242),'error');return;}const _0x123100=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x274a66=doc(db,_0x123100,_0x559299),_0x318171=await getDoc(_0x274a66);if(!_0x318171[_0x1f83d3(0x21f)]()){showNotification('Match\x20not\x20found\x20in\x20approved\x20matches','error');return;}const _0x33edf8=_0x318171[_0x1f83d3(0x120)](),_0x2a1a8a=_0x33edf8['approvedAt']?_0x33edf8['approvedAt']['toDate']()['toLocaleString']():_0x33edf8[_0x1f83d3(0x170)]?_0x33edf8['matchDate']['toDate']?_0x33edf8[_0x1f83d3(0x170)]['toDate']()['toLocaleString']():new Date(_0x33edf8['matchDate'])[_0x1f83d3(0xce)]():'Unknown',_0x2df3cd=_0x1f83d3(0x224)+_0x33edf8['winnerUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x33edf8['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x33edf8['winnerScore']+'-'+_0x33edf8[_0x1f83d3(0x284)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x33edf8['mapPlayed']||_0x33edf8['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x2a1a8a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x559299+_0x1f83d3(0x2e1)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x2df3cd,document['getElementById']('match-details-container')['style']['display']=_0x1f83d3(0x1b5),document[_0x1f83d3(0x10a)]('confirm-resimulate-btn')['style']['display']=_0x1f83d3(0x1b5),window['pendingResimulateData']={'matchId':_0x559299,'matchData':_0x33edf8,'ladder':currentLadder},showNotification(_0x1f83d3(0x164),'info');}catch(_0x50472c){console['error'](_0x1f83d3(0xf7),_0x50472c),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x50472c['message'],_0x1f83d3(0x1ab));}}async function confirmResimulateMatch(){const _0x323cf5=a4_0x47be6c;try{const {matchId:_0x275d56,matchData:_0x51627c,ladder:_0x67d391}=window[_0x323cf5(0x27d)];if(!_0x275d56||!_0x51627c){showNotification(_0x323cf5(0x220),_0x323cf5(0x1ab));return;}const _0x2787d4=_0x67d391==='D1'?'players':_0x67d391==='D2'?_0x323cf5(0xbf):'playersD3',_0x251deb=_0x67d391==='D1'?'eloHistory':_0x67d391==='D2'?_0x323cf5(0x190):_0x323cf5(0x1d3),[_0x5a4d05,_0x585e1a]=await Promise['all']([getDocs(query(collection(db,_0x2787d4),where('username','==',_0x51627c['winnerUsername']))),getDocs(query(collection(db,_0x2787d4),where('username','==',_0x51627c['loserUsername'])))]);if(_0x5a4d05['empty']||_0x585e1a['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x9e6b53=_0x5a4d05['docs'][0x0]['id'],_0x1e36f6=_0x585e1a[_0x323cf5(0x153)][0x0]['id'],_0x49f839=_0x5a4d05['docs'][0x0][_0x323cf5(0x120)](),_0x175756=_0x585e1a['docs'][0x0]['data'](),[_0x122d0a,_0x4821e5]=await Promise['all']([getDocs(query(collection(db,_0x251deb),where('playerId','==',_0x9e6b53),where(_0x323cf5(0x1e8),'==',_0x275d56))),getDocs(query(collection(db,_0x251deb),where(_0x323cf5(0x202),'==',_0x1e36f6),where('matchId','==',_0x275d56)))]),_0x496478=!_0x122d0a[_0x323cf5(0x177)],_0x377de7=!_0x4821e5['empty'],_0x5c706b=_0x323cf5(0x18e)+(_0x496478?'\x20Exists':'\x20Missing')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20'+(_0x377de7?'\x20Exists':'\x20Missing')+_0x323cf5(0x106)+(_0x49f839['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x175756['eloRating']||_0x323cf5(0x25e))+_0x323cf5(0x19d)+(_0x49f839['position']||'Unknown')+_0x323cf5(0x165)+(_0x175756[_0x323cf5(0x179)]||_0x323cf5(0x25e))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document[_0x323cf5(0x10a)]('validation-results-container')['innerHTML']=_0x5c706b,document['getElementById']('validation-results-container')['style']['display']='block';if(_0x496478&&_0x377de7){showNotification('Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x1106f2=_0x51627c['approvedAt']||_0x51627c['matchDate']||serverTimestamp(),[_0x1dda9c,_0x3312ee]=await Promise['all']([getPlayerEloAtTime(_0x9e6b53,_0x1106f2,_0x251deb),getPlayerEloAtTime(_0x1e36f6,_0x1106f2,_0x251deb)]),{calculateElo:_0xd18eb4}=await import(_0x323cf5(0x2ef)),{newWinnerRating:_0x107380,newLoserRating:_0x30a3d6}=_0xd18eb4(_0x1dda9c,_0x3312ee),_0xa79fcd=_0x49f839['position']||Number['MAX_SAFE_INTEGER'],_0x118be1=_0x175756['position']||Number['MAX_SAFE_INTEGER'];let _0x36cc92=_0xa79fcd,_0x5669da=_0x118be1;_0xa79fcd>_0x118be1&&(_0x36cc92=_0x118be1,_0x5669da=_0x118be1+0x1);const _0x163987=writeBatch(db),_0x19c0c3=doc(db,_0x2787d4,_0x9e6b53);_0x163987['update'](_0x19c0c3,{'eloRating':_0x107380,'position':_0x36cc92,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0x323cf5(0x300)][_0x323cf5(0xfb)]});const _0xa41d5=doc(db,_0x2787d4,_0x1e36f6);_0x163987[_0x323cf5(0x209)](_0xa41d5,{'eloRating':_0x30a3d6,'position':_0x5669da,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid']});if(_0xa79fcd>_0x118be1){const _0xadc262=await getDocs(query(collection(db,_0x2787d4),where('position','>',_0x118be1),where(_0x323cf5(0x179),'<',_0xa79fcd)));_0xadc262['forEach'](_0x1db10d=>{const _0x16ff9a=doc(db,_0x2787d4,_0x1db10d['id']),_0x2dff42=_0x1db10d['data']()['position'];_0x163987['update'](_0x16ff9a,{'position':_0x2dff42+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':'resimulation','positionAdjustedAt':serverTimestamp()});});}if(!_0x496478){const _0x1c3c57=doc(collection(db,_0x251deb));_0x163987[_0x323cf5(0x2c0)](_0x1c3c57,{'playerId':_0x9e6b53,'player':_0x51627c['winnerUsername'],'previousElo':_0x1dda9c,'newElo':_0x107380,'eloChange':_0x107380-_0x1dda9c,'opponentId':_0x1e36f6,'opponent':_0x51627c['loserUsername'],'matchResult':'win','previousPosition':_0xa79fcd,'newPosition':_0x36cc92,'positionChange':_0x36cc92-_0xa79fcd,'matchId':_0x275d56,'timestamp':_0x1106f2,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x67d391,'matchScore':_0x51627c['winnerScore']+'-'+_0x51627c['loserScore'],'mapPlayed':_0x51627c['mapPlayed']||_0x51627c['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x377de7){const _0x42f319=doc(collection(db,_0x251deb));_0x163987['set'](_0x42f319,{'playerId':_0x1e36f6,'player':_0x51627c['loserUsername'],'previousElo':_0x3312ee,'newElo':_0x30a3d6,'eloChange':_0x30a3d6-_0x3312ee,'opponentId':_0x9e6b53,'opponent':_0x51627c['winnerUsername'],'matchResult':'loss','previousPosition':_0x118be1,'newPosition':_0x5669da,'positionChange':_0x5669da-_0x118be1,'matchId':_0x275d56,'timestamp':_0x1106f2,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x67d391,'matchScore':_0x51627c['winnerScore']+'-'+_0x51627c[_0x323cf5(0x284)],'mapPlayed':_0x51627c['mapPlayed']||_0x51627c['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}const _0x4fc106=_0x67d391==='D1'?'approvedMatches':_0x67d391==='D2'?_0x323cf5(0x2db):_0x323cf5(0x28e),_0x241859=doc(db,_0x4fc106,_0x275d56);_0x163987['update'](_0x241859,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':_0x323cf5(0x29a),'originalWinnerElo':_0x49f839[_0x323cf5(0x1b4)],'originalLoserElo':_0x175756[_0x323cf5(0x1b4)],'originalWinnerPosition':_0xa79fcd,'originalLoserPosition':_0x118be1,'resimulatedWinnerElo':_0x107380,'resimulatedLoserElo':_0x30a3d6,'resimulatedWinnerPosition':_0x36cc92,'resimulatedLoserPosition':_0x5669da}),await _0x163987['commit']();const _0x2a4476=(!_0x496478?0x1:0x0)+(!_0x377de7?0x1:0x0),_0x2cfb0e=_0xa79fcd!==_0x36cc92||_0x118be1!==_0x5669da;showNotification(_0x323cf5(0x12a)+('Created\x20'+_0x2a4476+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x1dda9c+''+_0x107380+'\x20(+'+(_0x107380-_0x1dda9c)+'),\x20')+('Loser\x20'+_0x3312ee+''+_0x30a3d6+'\x20('+(_0x30a3d6-_0x3312ee)+_0x323cf5(0x238))+(''+(_0x2cfb0e?'Positions\x20updated:\x20Winner\x20'+_0xa79fcd+''+_0x36cc92+',\x20Loser\x20'+_0x118be1+''+_0x5669da:'No\x20position\x20changes\x20needed.')),'success'),closeResimulateModal(),document[_0x323cf5(0x229)]('#players.content-section.active')&&loadPlayersData();}catch(_0x44a6a2){console['error'](_0x323cf5(0x21d),_0x44a6a2),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x44a6a2['message'],_0x323cf5(0x1ab));}}async function getPlayerEloAtTime(_0x16edac,_0x1d155c,_0x31b9b8){const _0x5e1dbd=a4_0x47be6c;try{const _0x2aa700=_0x1d155c['toDate']?_0x1d155c['toDate']():new Date(_0x1d155c),_0x4c0b03=query(collection(db,_0x31b9b8),where('playerId','==',_0x16edac),where('timestamp','<',_0x1d155c),orderBy('timestamp','desc'),limit(0x1)),_0x2f5ca4=await getDocs(_0x4c0b03);if(!_0x2f5ca4['empty']){const _0x3d6bcc=_0x2f5ca4['docs'][0x0][_0x5e1dbd(0x120)]();return console['log'](_0x5e1dbd(0x23b)+_0x16edac+'\x20before\x20match:\x20'+_0x3d6bcc['newElo']),_0x3d6bcc[_0x5e1dbd(0x21a)];}else return console[_0x5e1dbd(0x1c9)]('No\x20ELO\x20history\x20found\x20for\x20player\x20'+_0x16edac+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x28fcde){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x16edac+':',_0x28fcde),0x4b0;}}function openResimulateModal(){const _0xefdf71=a4_0x47be6c;console[_0xefdf71(0x1c9)]('openResimulateModal\x20called!');const _0x4a0074=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x4a0074);if(!_0x4a0074){console[_0xefdf71(0x1ab)]('Modal\x20element\x20not\x20found!');return;}_0x4a0074['style'][_0xefdf71(0xcc)]='block',_0x4a0074['style'][_0xefdf71(0x1bc)]='visible',_0x4a0074['style'][_0xefdf71(0x113)]='1',_0x4a0074['classList'][_0xefdf71(0x1f6)]('active'),console[_0xefdf71(0x1c9)]('Modal\x20should\x20now\x20be\x20visible'),console['log'](_0xefdf71(0x2f8),window[_0xefdf71(0x1b7)](_0x4a0074)['display']);const _0x43dad2=document['getElementById'](_0xefdf71(0x299)),_0x569e4d=document['getElementById']('validation-results-container'),_0xd3ea49=document['getElementById']('confirm-resimulate-btn'),_0x346e2f=document['getElementById'](_0xefdf71(0x2d4));if(_0x43dad2)_0x43dad2[_0xefdf71(0x312)]='';if(_0x569e4d)_0x569e4d[_0xefdf71(0x312)]='';if(_0xd3ea49)_0xd3ea49[_0xefdf71(0x1e1)]['display']=_0xefdf71(0x18f);if(_0x346e2f)_0x346e2f[_0xefdf71(0x160)]='';console[_0xefdf71(0x1c9)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x4ae651=a4_0x47be6c;document['getElementById'](_0x4ae651(0x128))['style'][_0x4ae651(0xcc)]='none',window['pendingResimulateData']=null;}window[a4_0x47be6c(0xdb)]=resimulateMatch,window[a4_0x47be6c(0x2ee)]=confirmResimulateMatch,window['openResimulateModal']=openResimulateModal,window[a4_0x47be6c(0x185)]=closeResimulateModal;async function loadPointsData(){const _0x3f1753=a4_0x47be6c;console[_0x3f1753(0x1c9)]('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0xc45398){console['error']('Error\x20loading\x20points\x20data:',_0xc45398),showNotification(_0x3f1753(0x2e9)+_0xc45398[_0x3f1753(0x293)],'error');}}function renderPointsOverview(_0x5bea61){const _0x4c54bb=document['getElementById']('points-overview-table-body');if(!_0x4c54bb)return;if(_0x5bea61['length']===0x0){_0x4c54bb['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x4c54bb['innerHTML']='',_0x5bea61['forEach'](_0x6aa53=>{const _0xed119d=a4_0x3520,_0x156f0a=document[_0xed119d(0x12c)]('tr'),_0x581b5=_0x6aa53['displayName']||_0x6aa53[_0xed119d(0x1e5)]||'Unknown\x20User',_0x351ba4=_0x6aa53['email']||'No\x20email',_0x3b762d=_0x6aa53['points']||0x0,_0x54111e=_0x6aa53['lastPointsModified']?new Date(_0x6aa53[_0xed119d(0x302)][_0xed119d(0x249)]*0x3e8)[_0xed119d(0x1ed)]():'Never';_0x156f0a['innerHTML']=_0xed119d(0x108)+_0x581b5+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x351ba4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20'+(_0x3b762d>0x3e8?'high-points':_0x3b762d>0x1f4?_0xed119d(0x2a3):_0xed119d(0x214))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0x3b762d[_0xed119d(0xce)]()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x54111e+_0xed119d(0x1d2)+_0x6aa53['id']+_0xed119d(0x298)+_0x6aa53['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4c54bb[_0xed119d(0xe3)](_0x156f0a);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x91a36e=a4_0x47be6c;console['log']('Setting\x20up\x20points\x20action\x20buttons...');const _0x16baea=document[_0x91a36e(0x250)]('.quick-edit-btn');console['log']('Found\x20'+_0x16baea['length']+'\x20quick\x20edit\x20buttons'),_0x16baea['forEach'](_0x421865=>{const _0x4c0f92=_0x91a36e,_0x1e2a28=_0x421865['cloneNode'](!![]);_0x421865[_0x4c0f92(0x12e)][_0x4c0f92(0x267)](_0x1e2a28,_0x421865);});const _0xe69739=document['querySelectorAll'](_0x91a36e(0x2eb));console['log']('Found\x20'+_0xe69739[_0x91a36e(0x227)]+'\x20view\x20history\x20buttons'),_0xe69739['forEach'](_0x261101=>{const _0x8a1bff=_0x91a36e,_0x1c870c=_0x261101['cloneNode'](!![]);_0x261101[_0x8a1bff(0x12e)][_0x8a1bff(0x267)](_0x1c870c,_0x261101);}),document['querySelectorAll'](_0x91a36e(0x28f))['forEach'](_0x1bdf29=>{const _0x2f8d47=_0x91a36e;_0x1bdf29[_0x2f8d47(0x219)]('click',function(_0x4e4636){const _0xceafc4=_0x2f8d47;_0x4e4636['preventDefault'](),_0x4e4636[_0xceafc4(0x232)]();const _0x59e3e9=this[_0xceafc4(0x22b)]['userId'];console['log']('Quick\x20edit\x20clicked\x20for\x20user:',_0x59e3e9);if(!_0x59e3e9){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0xceafc4(0x1e1)]['opacity']='0.6',setTimeout(()=>{const _0x3f45bf=_0xceafc4;this['style'][_0x3f45bf(0x113)]='1';},0xc8),openQuickEditModal(_0x59e3e9);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x5c8b4f=>{const _0x218783=_0x91a36e;_0x5c8b4f[_0x218783(0x219)]('click',function(_0x2d99a1){const _0x2944b9=_0x218783;_0x2d99a1['preventDefault'](),_0x2d99a1['stopPropagation']();const _0x372ac7=this['dataset']['userId'];console[_0x2944b9(0x1c9)]('View\x20history\x20clicked\x20for\x20user:',_0x372ac7);if(!_0x372ac7){console['error']('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x2944b9(0x1e1)]['opacity']=_0x2944b9(0x175),setTimeout(()=>{this['style']['opacity']='1';},0xc8),loadUserPointsHistory(_0x372ac7);});}),console['log'](_0x91a36e(0x29e));}async function openQuickEditModal(_0x4334b8){const _0x2fa35d=a4_0x47be6c;console[_0x2fa35d(0x1c9)]('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0x4334b8);const _0x3101c3=document['getElementById'](_0x2fa35d(0x196));if(!_0x3101c3){console[_0x2fa35d(0x1ab)]('Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.'),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page',_0x2fa35d(0x1ab));return;}try{showNotification(_0x2fa35d(0xc7),'info');const _0x3c12a9=doc(db,_0x2fa35d(0x2fb),_0x4334b8),_0x2566cc=await getDoc(_0x3c12a9);if(!_0x2566cc[_0x2fa35d(0x21f)]()){showNotification(_0x2fa35d(0x26b),'error');return;}const _0x3452a3=_0x2566cc['data']();console['log']('User\x20data\x20loaded:',_0x3452a3);const _0x1bcaa5=document['getElementById']('quick-edit-user-id'),_0x21e1b6=document['getElementById']('quick-edit-display-name'),_0x57e384=document['getElementById'](_0x2fa35d(0x199)),_0x53f84a=document['getElementById']('quick-edit-current-points'),_0x5c33a7=document['getElementById']('quick-edit-points-form');if(!_0x1bcaa5||!_0x21e1b6||!_0x57e384||!_0x53f84a||!_0x5c33a7){console[_0x2fa35d(0x1ab)]('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.','error');return;}_0x1bcaa5[_0x2fa35d(0x160)]=_0x4334b8,_0x21e1b6[_0x2fa35d(0x1b6)]=_0x3452a3['displayName']||_0x3452a3['username']||'Unknown\x20User',_0x57e384['textContent']=_0x3452a3[_0x2fa35d(0x208)]||'No\x20email',_0x53f84a['textContent']=(_0x3452a3[_0x2fa35d(0x191)]||0x0)[_0x2fa35d(0xce)](),_0x5c33a7[_0x2fa35d(0x255)]();const _0xcfd934=document[_0x2fa35d(0x10a)](_0x2fa35d(0x2e0));_0xcfd934&&(_0xcfd934['checked']=!![]);_0x3101c3[_0x2fa35d(0x239)][_0x2fa35d(0x1f6)]('active'),console['log']('Modal\x20opened\x20successfully');const _0x319fb5=document['getElementById']('quick-points-amount');_0x319fb5&&setTimeout(()=>_0x319fb5[_0x2fa35d(0x18c)](),0x64);}catch(_0x519bf0){console['error'](_0x2fa35d(0x2ad),_0x519bf0),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x519bf0[_0x2fa35d(0x293)],'error');}}function closeQuickEditModal(){const _0x46e60e=a4_0x47be6c,_0x2e9362=document['getElementById'](_0x46e60e(0x196));_0x2e9362&&_0x2e9362['classList']['remove']('active');}async function handleQuickEditPoints(_0x482e89){const _0x5e7465=a4_0x47be6c;_0x482e89[_0x5e7465(0x287)]();const _0x4040cd=document['getElementById']('quick-edit-user-id')['value'],_0x53bc34=document[_0x5e7465(0x229)]('input[name=\x22quick-action\x22]:checked')['value'],_0x501910=parseInt(document['getElementById']('quick-points-amount')['value']),_0x2cbdf3=document['getElementById'](_0x5e7465(0x2be))['value']['trim']();console['log'](_0x5e7465(0x231),{'userId':_0x4040cd,'action':_0x53bc34,'amount':_0x501910,'reason':_0x2cbdf3});if(!_0x4040cd||!_0x501910||_0x501910<0x0){showNotification(_0x5e7465(0xe9),_0x5e7465(0x1ab));return;}try{await modifyUserPoints(_0x4040cd,_0x53bc34,_0x501910,_0x2cbdf3),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully','success'),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x4040cd);}catch(_0x42d322){console[_0x5e7465(0x1ab)](_0x5e7465(0x172),_0x42d322),showNotification(_0x5e7465(0x19a)+_0x42d322['message'],'error');}}async function searchUsersForPoints(){const _0x2f4cbd=a4_0x47be6c,_0x5e4787=document[_0x2f4cbd(0x10a)]('points-user-search')['value'][_0x2f4cbd(0x2cf)]()['toLowerCase'](),_0x4894f2=document['getElementById']('user-search-results');if(!_0x5e4787||_0x5e4787[_0x2f4cbd(0x227)]<0x2){_0x4894f2['innerHTML']='';return;}_0x4894f2['innerHTML']='<div\x20class=\x22loading\x22>Searching...</div>';try{const _0x302025=collection(db,'userProfiles'),_0x31c584=await getDocs(_0x302025),_0x232071=[];_0x31c584['forEach'](_0x3d4f3c=>{const _0x405486=_0x2f4cbd,_0x3ff5f8=_0x3d4f3c['data'](),_0x336df2=(_0x3ff5f8['displayName']||_0x3ff5f8[_0x405486(0x1e5)]||'')['toLowerCase'](),_0x127ffe=(_0x3ff5f8['email']||'')['toLowerCase']();(_0x336df2['includes'](_0x5e4787)||_0x127ffe['includes'](_0x5e4787))&&_0x232071[_0x405486(0x111)]({'id':_0x3d4f3c['id'],..._0x3ff5f8});});if(_0x232071['length']===0x0){_0x4894f2[_0x2f4cbd(0x312)]='<div\x20class=\x22no-results\x22>No\x20users\x20found</div>';return;}_0x4894f2['innerHTML']='',_0x232071['forEach'](_0x1f715d=>{const _0x23ca54=_0x2f4cbd,_0x4d6c8b=document['createElement']('div');_0x4d6c8b['className']='search-result-item',_0x4d6c8b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x1f715d['displayName']||_0x1f715d['username']||'Unknown')+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+(_0x1f715d['email']||'No\x20email')+_0x23ca54(0x2cc)+(_0x1f715d['points']||0x0)['toLocaleString']()+_0x23ca54(0xed),_0x4d6c8b[_0x23ca54(0x219)]('click',()=>selectUserForPoints(_0x1f715d)),_0x4894f2['appendChild'](_0x4d6c8b);});}catch(_0xa9ef1d){console['error']('Error\x20searching\x20users:',_0xa9ef1d),_0x4894f2['innerHTML']=_0x2f4cbd(0xd1);}}function selectUserForPoints(_0xee3bea){const _0x4c69b9=a4_0x47be6c;document['getElementById']('selected-user-name')[_0x4c69b9(0x1b6)]=_0xee3bea['displayName']||_0xee3bea['username']||_0x4c69b9(0x186),document['getElementById']('selected-user-points')['textContent']=(_0xee3bea['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0xee3bea['id'],document[_0x4c69b9(0x10a)]('selected-user-info')[_0x4c69b9(0x1e1)][_0x4c69b9(0xcc)]='block',document['getElementById']('points-management-forms')['style']['display']=_0x4c69b9(0x1b5),document['getElementById'](_0x4c69b9(0x251))[_0x4c69b9(0x312)]='',document['getElementById'](_0x4c69b9(0x16a))['value']='';}async function handleModifyPoints(_0x5b0751){const _0x2eccbf=a4_0x47be6c;_0x5b0751[_0x2eccbf(0x287)]();const _0x2b7d05=document['getElementById']('selected-user-id')[_0x2eccbf(0x160)],_0x5c381d=document['getElementById']('points-action')['value'],_0x1f3d36=parseInt(document['getElementById'](_0x2eccbf(0x1c0))[_0x2eccbf(0x160)]),_0x239cca=document['getElementById']('points-reason')['value']['trim']();if(!_0x2b7d05||!_0x1f3d36||_0x1f3d36<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x2b7d05,_0x5c381d,_0x1f3d36,_0x239cca),document['getElementById']('modify-points-form')['reset']();const _0x2a0c5e=doc(db,'userProfiles',_0x2b7d05),_0x4023d2=await getDoc(_0x2a0c5e);if(_0x4023d2['exists']()){const _0x1b9891=_0x4023d2[_0x2eccbf(0x120)]();document['getElementById']('selected-user-points')['textContent']=(_0x1b9891[_0x2eccbf(0x191)]||0x0)['toLocaleString']();}showNotification(_0x2eccbf(0x2dd),'success'),loadPointsHistory();}catch(_0x346327){console['error']('Error\x20modifying\x20points:',_0x346327),showNotification('Failed\x20to\x20modify\x20points:\x20'+_0x346327['message'],_0x2eccbf(0x1ab));}}async function loadPointsHistory(){const _0x636d2a=a4_0x47be6c,_0x29d722=document[_0x636d2a(0x10a)](_0x636d2a(0x2b3));if(!_0x29d722)return;_0x29d722['innerHTML']=_0x636d2a(0x137);try{const _0x4cf5f9=collection(db,'pointsHistory'),_0x270852=query(_0x4cf5f9,orderBy(_0x636d2a(0x131),_0x636d2a(0x1a5)),limit(0x32)),_0x3033a7=await getDocs(_0x270852);if(_0x3033a7['empty']){_0x29d722['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>';return;}_0x29d722['innerHTML']='',_0x3033a7[_0x636d2a(0x2f7)](_0x16fd5f=>{const _0x52de32=_0x636d2a,_0x34f663=_0x16fd5f[_0x52de32(0x120)](),_0x38b1e0=document['createElement']('tr'),_0x7f9f73=_0x34f663['timestamp']?new Date(_0x34f663[_0x52de32(0x131)]['seconds']*0x3e8)['toLocaleString']():'Unknown';let _0x3b1a1a='';switch(_0x34f663['action']){case'add':_0x3b1a1a=_0x52de32(0x103)+_0x34f663['amount']+'\x20points';break;case'subtract':_0x3b1a1a='Subtracted\x20'+_0x34f663['amount']+'\x20points';break;case _0x52de32(0x2c0):_0x3b1a1a=_0x52de32(0x22d)+_0x34f663['amount']+'\x20points';break;default:_0x3b1a1a=_0x34f663['action']+'\x20'+_0x34f663['amount']+_0x52de32(0x171);}_0x38b1e0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x7f9f73+_0x52de32(0x285)+(_0x34f663[_0x52de32(0x292)]||'Unknown\x20User')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3b1a1a+_0x52de32(0x135)+_0x34f663['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x34f663['previousPoints']||0x0)+_0x52de32(0x27f)+(_0x34f663['newPoints']||0x0)+_0x52de32(0x178)+(_0x34f663['reason']||_0x52de32(0xdd))+_0x52de32(0x285)+(_0x34f663[_0x52de32(0x2bd)]||_0x52de32(0x2e2))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x29d722['appendChild'](_0x38b1e0);});}catch(_0x4e2979){console['error']('Error\x20loading\x20points\x20history:',_0x4e2979),_0x29d722['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20'+_0x4e2979[_0x636d2a(0x293)]+_0x636d2a(0xe6);}}function filterPointsOverview(){const _0x348d9e=a4_0x47be6c,_0x35e658=document['getElementById'](_0x348d9e(0x27b))['value']['toLowerCase']();if(!window['allUsersPoints'])return;const _0x5565ed=window['allUsersPoints'][_0x348d9e(0x2a9)](_0x39f91b=>{const _0x25f258=_0x348d9e,_0x59a002=(_0x39f91b[_0x25f258(0x292)]||_0x39f91b['username']||'')['toLowerCase'](),_0xd7ffdf=(_0x39f91b['email']||'')[_0x25f258(0x166)]();return _0x59a002['includes'](_0x35e658)||_0xd7ffdf['includes'](_0x35e658);});renderPointsOverview(_0x5565ed);}function sortPointsOverview(){const _0x36b2bc=a4_0x47be6c,_0x295b6f=document[_0x36b2bc(0x10a)]('points-sort-order')['value'];if(!window[_0x36b2bc(0x30c)])return;const _0x41e1dc=[...window['allUsersPoints']];switch(_0x295b6f){case'points-desc':_0x41e1dc['sort']((_0x90f7e,_0x188f4e)=>(_0x188f4e['points']||0x0)-(_0x90f7e['points']||0x0));break;case _0x36b2bc(0x183):_0x41e1dc[_0x36b2bc(0x17b)]((_0x1af4a3,_0x4e9550)=>(_0x1af4a3['points']||0x0)-(_0x4e9550['points']||0x0));break;case'name-asc':_0x41e1dc['sort']((_0x2fe729,_0x4e1a46)=>{const _0x5c71d3=_0x36b2bc,_0x61f503=(_0x2fe729['displayName']||_0x2fe729['username']||'')[_0x5c71d3(0x166)](),_0x1dd34d=(_0x4e1a46['displayName']||_0x4e1a46[_0x5c71d3(0x1e5)]||'')['toLowerCase']();return _0x61f503[_0x5c71d3(0x126)](_0x1dd34d);});break;case'name-desc':_0x41e1dc['sort']((_0x31c09a,_0x2ba6bf)=>{const _0x347d20=(_0x31c09a['displayName']||_0x31c09a['username']||'')['toLowerCase'](),_0x285cf8=(_0x2ba6bf['displayName']||_0x2ba6bf['username']||'')['toLowerCase']();return _0x285cf8['localeCompare'](_0x347d20);});break;}renderPointsOverview(_0x41e1dc);}async function handleAwardItem(_0x38a98c){const _0x246c05=a4_0x47be6c;_0x38a98c['preventDefault']();const _0x120d4b=document['getElementById']('selected-user-id')[_0x246c05(0x160)],_0x51c627=document['getElementById']('store-item-select')['value'],_0x27c26b=document['getElementById'](_0x246c05(0x158))[_0x246c05(0x160)][_0x246c05(0x2cf)]();if(!_0x120d4b||!_0x51c627){showNotification(_0x246c05(0x24d),_0x246c05(0x1ab));return;}try{showNotification(_0x246c05(0x206),_0x246c05(0x22a)),document['getElementById']('award-item-form')['reset']();}catch(_0x1f7f34){console[_0x246c05(0x1ab)](_0x246c05(0xec),_0x1f7f34),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x1f7f34[_0x246c05(0x293)],'error');}}async function loadUserPointsHistory(_0x1f7b98){const _0x480a65=a4_0x47be6c;try{const _0x4aa744=collection(db,'pointsHistory'),_0x18adbd=query(_0x4aa744,where('userId','==',_0x1f7b98),orderBy(_0x480a65(0x131),'desc')),_0x99cf63=await getDocs(_0x18adbd);console['log']('Found\x20'+_0x99cf63['size']+'\x20history\x20entries\x20for\x20user\x20'+_0x1f7b98),showNotification('User\x20has\x20'+_0x99cf63['size']+_0x480a65(0x260),'info');}catch(_0x4956d6){console['error'](_0x480a65(0x256),_0x4956d6),showNotification(_0x480a65(0x1cc),'error');}}async function initializeUserPointsField(){const _0x42fdd1=a4_0x47be6c;try{console['log']('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x17421a=collection(db,_0x42fdd1(0x2fb)),_0x409e60=await getDocs(_0x17421a);if(_0x409e60['empty']){console[_0x42fdd1(0x1c9)](_0x42fdd1(0xe0));return;}let _0x49c0fb=0x0,_0x5908dd=0x0;const _0x36b173=writeBatch(db);let _0x217aba=0x0;return console[_0x42fdd1(0x1c9)]('Found\x20'+_0x409e60[_0x42fdd1(0x1ba)]+'\x20users\x20to\x20check...'),_0x409e60['forEach'](_0x40a3ab=>{const _0x218f90=_0x42fdd1,_0x1306b0=_0x40a3ab[_0x218f90(0x120)]();_0x1306b0[_0x218f90(0x191)]===undefined||_0x1306b0[_0x218f90(0x191)]===null?(_0x36b173['update'](_0x40a3ab[_0x218f90(0xd6)],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x49c0fb++,_0x217aba++,console[_0x218f90(0x1c9)]('Queued\x20'+(_0x1306b0['displayName']||_0x1306b0[_0x218f90(0x1e5)]||_0x1306b0['email']||'Unknown')+'\x20for\x20points\x20initialization')):(_0x5908dd++,console['log']((_0x1306b0['displayName']||_0x1306b0['username']||_0x1306b0[_0x218f90(0x208)]||_0x218f90(0x25e))+_0x218f90(0x1a1)+_0x1306b0['points'])),_0x217aba>=0x1f4&&console['warn'](_0x218f90(0xbd));}),_0x49c0fb>0x0?(console[_0x42fdd1(0x1c9)]('Committing\x20batch\x20update\x20for\x20'+_0x49c0fb+_0x42fdd1(0x264)),await _0x36b173['commit'](),console['log']('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x49c0fb+_0x42fdd1(0x15a))):console['log']('No\x20users\x20needed\x20points\x20field\x20initialization'),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x409e60[_0x42fdd1(0x1ba)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20'+_0x49c0fb+_0x42fdd1(0x138)+_0x5908dd),showNotification('Points\x20field\x20initialized\x20for\x20'+_0x49c0fb+'\x20users.\x20'+_0x5908dd+'\x20users\x20already\x20had\x20points.','success'),window[_0x42fdd1(0x30c)]&&loadPointsOverview(),{'totalUsers':_0x409e60['size'],'usersUpdated':_0x49c0fb,'usersAlreadyHadPoints':_0x5908dd};}catch(_0x5d5ce2){console['error'](_0x42fdd1(0xf1),_0x5d5ce2),showNotification(_0x42fdd1(0x272)+_0x5d5ce2[_0x42fdd1(0x293)],'error');throw _0x5d5ce2;}}function addPointsMigrationButton(){const _0x1a57cc=a4_0x47be6c,_0x3cdf0b=document[_0x1a57cc(0x10a)]('manage-points');if(!_0x3cdf0b)return;if(document[_0x1a57cc(0x10a)]('migrate-points-btn'))return;const _0xb06b2=document['createElement']('div');_0xb06b2[_0x1a57cc(0xd5)]='migration-section',_0xb06b2['style'][_0x1a57cc(0x105)]='20px',_0xb06b2['style']['padding']='15px',_0xb06b2['style']['backgroundColor']='rgba(255,\x20193,\x207,\x200.1)',_0xb06b2['style']['border']='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0xb06b2['style']['borderRadius']='5px',_0xb06b2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0x25e40b=_0x3cdf0b['querySelector']('.section-header');_0x25e40b&&_0x25e40b['insertAdjacentElement']('afterend',_0xb06b2),document['getElementById']('migrate-points-btn')[_0x1a57cc(0x219)](_0x1a57cc(0x1ae),async function(){const _0xbe5955=_0x1a57cc;if(confirm('This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?')){this['disabled']=!![],this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0xbe5955(0x290),this['style']['backgroundColor']='#28a745',setTimeout(()=>{_0xb06b2['style']['display']='none';},0xbb8);}catch(_0x38fd5f){this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this['disabled']=![];}}});}function setupManagePointsSection(){const _0x2e4d0a=a4_0x47be6c;console[_0x2e4d0a(0x1c9)](_0x2e4d0a(0x13c)),addPointsMigrationButton();const _0x48cb78=document[_0x2e4d0a(0x10a)]('points-user-search');_0x48cb78&&_0x48cb78['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x13e4b2=document['getElementById'](_0x2e4d0a(0x184));_0x13e4b2&&_0x13e4b2['addEventListener'](_0x2e4d0a(0x259),handleModifyPoints);const _0x477de5=document['getElementById'](_0x2e4d0a(0x268));_0x477de5&&_0x477de5['addEventListener']('submit',handleAwardItem);const _0x1c3700=document['getElementById'](_0x2e4d0a(0x27b));_0x1c3700&&_0x1c3700['addEventListener']('input',debounce(filterPointsOverview,0x12c));const _0x137ef=document['getElementById']('points-sort-order');_0x137ef&&_0x137ef[_0x2e4d0a(0x219)]('change',sortPointsOverview);const _0x2bac91=document['getElementById']('refresh-points-overview');_0x2bac91&&_0x2bac91['addEventListener']('click',loadPointsOverview);const _0x3bfb5e=document['getElementById']('quick-edit-points-modal');if(_0x3bfb5e){console['log']('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x318b52=_0x3bfb5e['querySelector']('.close-btn');_0x318b52?_0x318b52[_0x2e4d0a(0x219)]('click',function(){const _0x275308=_0x2e4d0a;console[_0x275308(0x1c9)]('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal');const _0x204394=document['getElementById'](_0x2e4d0a(0x315));_0x204394?_0x204394[_0x2e4d0a(0x219)]('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x2e4d0a(0x2c3));const _0x5a5b0f=document['getElementById'](_0x2e4d0a(0x281));_0x5a5b0f?_0x5a5b0f['addEventListener']('submit',function(_0x1ff8cd){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x1ff8cd);}):console['error'](_0x2e4d0a(0xd9)),_0x3bfb5e['addEventListener']('click',function(_0x4b3e38){const _0x3b1912=_0x2e4d0a;_0x4b3e38['target']===_0x3bfb5e&&(console[_0x3b1912(0x1c9)]('Modal\x20background\x20clicked'),closeQuickEditModal());});}else console[_0x2e4d0a(0x1ab)]('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console['log'](_0x2e4d0a(0x1b9));}function setupManageRibbonsSection(){const _0x2f62ce=a4_0x47be6c;console['log'](_0x2f62ce(0x2ba));const _0x74eaa5=document['getElementById'](_0x2f62ce(0x2fe));_0x74eaa5&&_0x74eaa5['addEventListener'](_0x2f62ce(0x20b),debounce(searchRibbonUser,0x12c));const _0x10821a=document[_0x2f62ce(0x10a)]('search-ribbon-user-btn');_0x10821a&&_0x10821a[_0x2f62ce(0x219)]('click',searchRibbonUser);const _0x4e3c58=document['getElementById']('add-ribbon-form');_0x4e3c58&&_0x4e3c58['addEventListener'](_0x2f62ce(0x259),addRibbon),_0x74eaa5&&_0x74eaa5[_0x2f62ce(0x219)](_0x2f62ce(0x289),function(_0x2208b9){const _0x21b67c=_0x2f62ce;_0x2208b9[_0x21b67c(0x25b)]==='Enter'&&(_0x2208b9[_0x21b67c(0x287)](),searchRibbonUser());}),console[_0x2f62ce(0x1c9)](_0x2f62ce(0x311));}async function modifyUserPoints(_0x4395ef,_0x1b1433,_0x1bed55,_0xf54cc8=''){const _0x4cccb0=a4_0x47be6c,_0x5244a0=doc(db,_0x4cccb0(0x2fb),_0x4395ef),_0x1a7035=await getDoc(_0x5244a0);if(!_0x1a7035['exists']())throw new Error(_0x4cccb0(0x26b));const _0x309e23=_0x1a7035['data'](),_0xba4d51=_0x309e23['points']!==undefined?_0x309e23[_0x4cccb0(0x191)]:0x0;_0x309e23['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x309e23['displayName']||_0x309e23['email']||_0x4cccb0(0x25e))),await updateDoc(_0x5244a0,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x42f0a2=_0xba4d51;switch(_0x1b1433){case'add':_0x42f0a2=_0xba4d51+_0x1bed55;break;case _0x4cccb0(0x21c):_0x42f0a2=Math['max'](0x0,_0xba4d51-_0x1bed55);break;case _0x4cccb0(0x2c0):_0x42f0a2=_0x1bed55;break;default:throw new Error(_0x4cccb0(0x2a0));}await updateDoc(_0x5244a0,{'points':_0x42f0a2,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,_0x4cccb0(0x104)),{'userId':_0x4395ef,'userEmail':_0x309e23['email']||'unknown','displayName':_0x309e23['displayName']||_0x309e23['username']||_0x4cccb0(0x186),'action':_0x1b1433,'amount':_0x1bed55,'previousPoints':_0xba4d51,'newPoints':_0x42f0a2,'reason':_0xf54cc8,'adminEmail':auth[_0x4cccb0(0x300)]['email'],'timestamp':serverTimestamp()});}function a4_0x3520(_0x2a2ae7,_0x2bcd83){const _0x8d6caf=a4_0x245c();return a4_0x3520=function(_0x170775,_0x57111e){_0x170775=_0x170775-0xbc;let _0x245cd2=_0x8d6caf[_0x170775];return _0x245cd2;},a4_0x3520(_0x2a2ae7,_0x2bcd83);}async function loadPointsOverview(){const _0x53684d=a4_0x47be6c,_0x1820e9=document['getElementById']('points-overview-table-body');if(!_0x1820e9)return;_0x1820e9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x20b8b7=collection(db,'userProfiles'),_0x16b157=await getDocs(_0x20b8b7);if(_0x16b157[_0x53684d(0x177)]){_0x1820e9['innerHTML']=_0x53684d(0x283);return;}const _0x455495=[];let _0x2d424a=0x0;_0x16b157['forEach'](_0x23a930=>{const _0x6b95dc=_0x53684d,_0x204b39=_0x23a930['data'](),_0x58d43b=_0x204b39[_0x6b95dc(0x191)]!==undefined?_0x204b39['points']:0x0;_0x204b39['points']===undefined&&_0x2d424a++,_0x455495['push']({'id':_0x23a930['id'],..._0x204b39,'points':_0x58d43b});}),_0x2d424a>0x0&&(console['log']('Found\x20'+_0x2d424a+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0x2d424a+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x455495['sort']((_0x5c8e05,_0x116203)=>(_0x116203['points']||0x0)-(_0x5c8e05['points']||0x0)),window['allUsersPoints']=_0x455495,renderPointsOverview(_0x455495);}catch(_0x2201a5){console['error']('Error\x20loading\x20points\x20overview:',_0x2201a5),_0x1820e9['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x2201a5['message']+_0x53684d(0xe6);}}async function loadRibbonsData(){const _0x70968d=a4_0x47be6c,_0x34f850=document['getElementById'](_0x70968d(0x304));if(!_0x34f850)return;_0x34f850[_0x70968d(0x312)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0x4d41e0,_0x2186f0,_0x14d4a3]=await Promise[_0x70968d(0x2b4)]([getDocs(collection(db,_0x70968d(0x252))),getDocs(collection(db,'playerRibbonsD2')),getDocs(collection(db,_0x70968d(0x10d)))]);_0x34f850['innerHTML']='';const _0x3425c6=(_0x1867da,_0x585e37)=>{_0x1867da['forEach'](_0x40a915=>{const _0x15b2ed=a4_0x3520,_0x5e87ef=_0x40a915['data'](),_0x442ea4=_0x5e87ef['ribbons']||{},_0x1b924a=Object['keys'](_0x442ea4)[_0x15b2ed(0x227)],_0x4e0b4e=document['createElement']('tr');_0x4e0b4e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5e87ef['username']||'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x585e37['toLowerCase']()+'\x22>'+_0x585e37+_0x15b2ed(0x1f8)+_0x1b924a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x5e87ef['lastUpdated']?new Date(_0x5e87ef[_0x15b2ed(0x17f)][_0x15b2ed(0x249)]*0x3e8)['toLocaleDateString']():'Unknown')+_0x15b2ed(0x30d)+_0x5e87ef['username']+_0x15b2ed(0x1c7)+_0x585e37+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x34f850[_0x15b2ed(0xe3)](_0x4e0b4e);});};_0x3425c6(_0x4d41e0,'D1'),_0x3425c6(_0x2186f0,'D2'),_0x3425c6(_0x14d4a3,'D3'),document['querySelectorAll'](_0x70968d(0x13b))[_0x70968d(0x2f7)](_0x34d511=>{const _0x161767=_0x70968d;_0x34d511['addEventListener'](_0x161767(0x1ae),function(){const _0x9ee63b=this['dataset']['username'],_0x2875f9=this['dataset']['ladder'];editUserRibbons(_0x9ee63b,_0x2875f9);});}),showNotification(_0x70968d(0xc3),'success');}catch(_0x2e3c96){console['error'](_0x70968d(0x18b),_0x2e3c96),_0x34f850['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>',showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x2ea614=a4_0x47be6c,_0x53ef6b=document[_0x2ea614(0x10a)]('ribbon-user-search')['value']['trim']();if(!_0x53ef6b){showNotification('Please\x20enter\x20a\x20username','error');return;}try{const [_0x6d60a0,_0x14b845,_0x108e97]=await Promise['all']([getDoc(doc(db,_0x2ea614(0x252),_0x53ef6b)),getDoc(doc(db,'playerRibbonsD2',_0x53ef6b)),getDoc(doc(db,'playerRibbonsD3',_0x53ef6b))]);let _0x2b83e7=null,_0x35d028=null;if(_0x6d60a0[_0x2ea614(0x21f)]())_0x2b83e7='D1',_0x35d028=_0x6d60a0['data']();else{if(_0x14b845['exists']())_0x2b83e7='D2',_0x35d028=_0x14b845['data']();else _0x108e97['exists']()&&(_0x2b83e7='D3',_0x35d028=_0x108e97['data']());}_0x2b83e7?(document['getElementById'](_0x2ea614(0x124))['textContent']=_0x53ef6b,document['getElementById'](_0x2ea614(0x2e7))['value']=_0x53ef6b,document['getElementById']('ribbon-target-ladder')['value']=_0x2b83e7,document['getElementById']('user-ribbon-management')[_0x2ea614(0x1e1)][_0x2ea614(0xcc)]='block',displayCurrentRibbons(_0x35d028[_0x2ea614(0x10f)]||{}),showNotification('Found\x20'+_0x53ef6b+'\x20in\x20'+_0x2b83e7+'\x20ladder','success')):showNotification('User\x20'+_0x53ef6b+_0x2ea614(0x2ca),_0x2ea614(0x1ab));}catch(_0x446548){console['error']('Error\x20searching\x20user:',_0x446548),showNotification(_0x2ea614(0x23d),_0x2ea614(0x1ab));}}function displayCurrentRibbons(_0xaf8db){const _0x26d8ac=a4_0x47be6c,_0x3f70fb=document['getElementById']('current-ribbons-list');if(!_0x3f70fb)return;_0x3f70fb[_0x26d8ac(0x312)]='';if(Object[_0x26d8ac(0x301)](_0xaf8db)['length']===0x0){_0x3f70fb['innerHTML']='<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>';return;}Object['entries'](_0xaf8db)['forEach'](([_0x1a6ad9,_0x37379f])=>{const _0x8eaf0e=_0x26d8ac,_0x57cff0=document['createElement'](_0x8eaf0e(0x279));_0x57cff0['className']='ribbon-item',_0x57cff0['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x1a6ad9+_0x8eaf0e(0x29b)+(_0x37379f['level']||0x1)+_0x8eaf0e(0x116)+(_0x37379f['awardedAt']?new Date(_0x37379f[_0x8eaf0e(0x316)][_0x8eaf0e(0x249)]*0x3e8)['toLocaleDateString']():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x1a6ad9+_0x8eaf0e(0x193),_0x3f70fb['appendChild'](_0x57cff0);}),document['querySelectorAll']('.remove-ribbon-btn')['forEach'](_0x1c2611=>{const _0x4b4617=_0x26d8ac;_0x1c2611['addEventListener'](_0x4b4617(0x1ae),function(){const _0x53e218=this['dataset']['ribbon'];removeRibbon(_0x53e218);});});}async function addRibbon(_0x33ae19){const _0x380ca8=a4_0x47be6c;_0x33ae19[_0x380ca8(0x287)]();const _0x1cbae7=document[_0x380ca8(0x10a)]('ribbon-target-user')[_0x380ca8(0x160)],_0x263284=document[_0x380ca8(0x10a)]('ribbon-target-ladder')['value'],_0x5983b5=document['getElementById']('ribbon-type-select')['value'],_0x2e0c2e=parseInt(document['getElementById'](_0x380ca8(0x25c))['value']);if(!_0x1cbae7||!_0x263284||!_0x5983b5||!_0x2e0c2e){showNotification('Please\x20fill\x20all\x20fields',_0x380ca8(0x1ab));return;}try{const _0x37b7b9=_0x380ca8(0x252)+(_0x263284==='D1'?'':_0x263284),_0x2c2ef9=doc(db,_0x37b7b9,_0x1cbae7),_0x5de5d0=await getDoc(_0x2c2ef9),_0x50af06=_0x5de5d0[_0x380ca8(0x21f)]()?_0x5de5d0['data']()[_0x380ca8(0x10f)]||{}:{};_0x50af06[_0x5983b5]={'level':_0x2e0c2e,'awardedAt':serverTimestamp()},await setDoc(_0x2c2ef9,{'username':_0x1cbae7,'ladder':_0x263284,'ribbons':_0x50af06,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x5983b5+_0x380ca8(0x2de)+_0x2e0c2e+'\x20to\x20'+_0x1cbae7,_0x380ca8(0x22a)),displayCurrentRibbons(_0x50af06),document['getElementById'](_0x380ca8(0x155))[_0x380ca8(0x160)]='',document['getElementById'](_0x380ca8(0x25c))[_0x380ca8(0x160)]='1';}catch(_0x2cc104){console['error']('Error\x20adding\x20ribbon:',_0x2cc104),showNotification('Error\x20adding\x20ribbon',_0x380ca8(0x1ab));}}async function removeRibbon(_0x34ec7b){const _0x35c4d7=a4_0x47be6c,_0x147512=document['getElementById'](_0x35c4d7(0x2e7))['value'],_0x203a7e=document['getElementById'](_0x35c4d7(0x1a9))['value'];if(!confirm(_0x35c4d7(0x2e3)+_0x34ec7b+'\x20from\x20'+_0x147512+'?'))return;try{const _0xcb7e9f='playerRibbons'+(_0x203a7e==='D1'?'':_0x203a7e),_0x1c28f8=doc(db,_0xcb7e9f,_0x147512),_0x4d92ac=await getDoc(_0x1c28f8),_0x12b03c=_0x4d92ac['exists']()?_0x4d92ac['data']()['ribbons']||{}:{};delete _0x12b03c[_0x34ec7b],await setDoc(_0x1c28f8,{'username':_0x147512,'ladder':_0x203a7e,'ribbons':_0x12b03c,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x34ec7b+_0x35c4d7(0x11a)+_0x147512,'success'),displayCurrentRibbons(_0x12b03c);}catch(_0x1a320f){console['error']('Error\x20removing\x20ribbon:',_0x1a320f),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x2e459a,_0x243348){document['getElementById']('ribbon-user-search')['value']=_0x2e459a,searchRibbonUser();}