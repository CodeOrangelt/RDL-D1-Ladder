function a46_0x540f(){const _0x19a5b5=['mapStatsChart','-rank\x22>','className','‚úÖ\x20Using\x20cached\x20','winRate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-stats-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>üó∫Ô∏è\x20Most\x20Played\x20Maps\x20-\x20','toLocaleDateString','remove','.record-value','%)</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22record-detail\x22>','elo','topPlayer','‚úÖ\x20Map\x20stats\x20displayed:\x20','silver','bind','%</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22record-detail\x22>','matchSnapshot','querySelector','exception','cloneNode','getElementById','\x0a\x20\x20\x20\x20.load-more-btn\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20linear-gradient(135deg,\x20#673ab7,\x20#9c27b0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2015px\x2025px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x2020px\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20600;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20all\x200.3s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(103,\x2058,\x20183,\x200.3);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.load-more-btn:hover:not(:disabled)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-2px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x206px\x2016px\x20rgba(103,\x2058,\x20183,\x200.4);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.load-more-btn:disabled\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20not-allowed;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.load-more-btn\x20small\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x205px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.9;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.partial-data-indicator\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(255,\x20193,\x207,\x200.1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20rgba(255,\x20193,\x207,\x200.3);\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ffc107;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20gap:\x208px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.partial-data-indicator\x20i\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ffc107;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20/*\x20Enhanced\x20Map\x20Stats\x20Styling\x20*/\x0a\x20\x20\x20\x20.map-stats-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-stats-header\x20h3\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.4em;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-stats-header\x20.total-matches\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#666;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-stats-list\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20gap:\x2012px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-stat-item\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(255,\x20255,\x20255,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20rgba(0,\x200,\x200,\x200.1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20all\x200.2s\x20ease;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-stat-item:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(255,\x20255,\x20255,\x200.95);\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-1px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,\x200,\x200,\x200.1);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-info\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x208px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-rank\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#673ab7;\x0a\x20\x20\x20\x20\x20\x20\x20\x20min-width:\x2030px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-name\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20600;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x2012px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-count\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#666;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-bar-container\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20gap:\x2010px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-bar\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x206px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20linear-gradient(90deg,\x20#673ab7,\x20#9c27b0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x203px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20width\x200.3s\x20ease;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-percentage\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x200.8em;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#666;\x0a\x20\x20\x20\x20\x20\x20\x20\x20min-width:\x2035px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20right;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.map-stats-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding-top:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20rgba(0,\x200,\x200,\x200.1);\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.remaining-maps\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#666;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-style:\x20italic;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.error-message\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#dc3545;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-style:\x20italic;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2020px;\x0a\x20\x20\x20\x20}\x0a','Error','</div>','set','log','default','size','error','cache','üìä\x20Processed\x20','\x20players\x20from\x20optimized\x20dataset','text','toString','round','\x20unique\x20maps','suicideRate','üì•\x20Using\x20simple\x20getDocs\x20(no\x20orderBy\x20to\x20avoid\x20index\x20issues)...','innerHTML','nav-placeholder','.records','replaceChild','\x20maps\x20shown','isLoadingMore','totalSuicides','sort','currentGameMode','timestamp','‚úÖ\x20Complete\x20dataset\x20loaded\x20successfully!','filter','loserUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-stats-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22remaining-maps\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20+\x20','.map-stats-container','winnerUsername','Error\x20fetching\x20players\x20for\x20tiers:\x20','createElement','playerSnapshot','scoreDifferential','eloRating','least-suicides','mapName','from','.tier-players','then','winnerSuicides','approvedMatchesD2','.records-grid','Available\x20containers:','players','toFixed','prototype','\x20matches','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading\x20complete\x20dataset...','appendChild','trace','__proto__','textContent','data','level','üìä\x20Found\x20','emerald','warn','position','value','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22map-name\x22>','get','has','push','üîÑ\x20Loading\x20COMPLETE\x20dataset\x20(this\x20will\x20use\x20more\x20reads)...','<div\x20class=\x22loading-msg\x22>Processing...</div>','records-stats','stringify','contains','username','some','forEach','üìä\x20Processing\x20map\x20stats\x20from\x20','N/A','wins','slice','üìä\x20Loaded:\x20','length','\x20player','‚ö†Ô∏è\x20No\x20maps\x20found\x20in\x20match\x20data','</span>\x20<span\x20class=\x22record-stat\x22>(','querySelectorAll','totalMatches','üîÑ\x20Loading\x20','reduce','playerStats','kdRatio','\x20total'];a46_0x540f=function(){return _0x19a5b5;};return a46_0x540f();}const a46_0x24d160=a46_0x9ff5,a46_0x25dbab=(function(){let _0x44d647=!![];return function(_0x57d83f,_0x9e36cc){const _0x657668=_0x44d647?function(){if(_0x9e36cc){const _0x108142=_0x9e36cc['apply'](_0x57d83f,arguments);return _0x9e36cc=null,_0x108142;}}:function(){};return _0x44d647=![],_0x657668;};}()),a46_0x1e029d=a46_0x25dbab(this,function(){const _0x224c07=a46_0x9ff5;let _0x3178c3;try{const _0x2d76fc=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3178c3=_0x2d76fc();}catch(_0x2e5825){_0x3178c3=window;}const _0x4f002c=_0x3178c3['console']=_0x3178c3['console']||{},_0x30214b=['log',_0x224c07(0x1aa),'info','error',_0x224c07(0x16b),'table',_0x224c07(0x1a3)];for(let _0x566a90=0x0;_0x566a90<_0x30214b[_0x224c07(0x1be)];_0x566a90++){const _0x32a819=a46_0x25dbab['constructor'][_0x224c07(0x19f)]['bind'](a46_0x25dbab),_0x460487=_0x30214b[_0x566a90],_0x266c26=_0x4f002c[_0x460487]||_0x32a819;_0x32a819[_0x224c07(0x1a4)]=a46_0x25dbab[_0x224c07(0x167)](a46_0x25dbab),_0x32a819['toString']=_0x266c26[_0x224c07(0x17a)]['bind'](_0x266c26),_0x4f002c[_0x460487]=_0x32a819;}});a46_0x1e029d();import{collection,getDocs,query,orderBy,limit,where,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const MIN_MATCHES_REQUIREMENT=0xa,CACHE_DURATION_MS=0x1e*0x3c*0x3e8,MAX_PLAYERS_PER_BATCH=0x32,MAX_MATCHES_PER_BATCH=0x64,state={'currentGameMode':'D1','cache':{'D1':{'playerStats':null,'playerSnapshot':null,'matchSnapshot':null,'timestamp':0x0,'fullDataLoaded':![]},'D2':{'playerStats':null,'playerSnapshot':null,'matchSnapshot':null,'timestamp':0x0,'fullDataLoaded':![]}},'isLoadingMore':![]};let mapChart=null;console['log']('üöÄ\x20Ultra-optimized\x20records.js\x20loaded!'),console['log']('üìä\x20This\x20page\x20now\x20uses\x20~50\x20reads\x20instead\x20of\x201000+!');function getPlayerTier(_0x143c88){const _0x597e8d=a46_0x9ff5;if(_0x143c88===undefined||_0x143c88===null)return'default';const _0x3dbb0d=Number(_0x143c88);if(isNaN(_0x3dbb0d))return _0x597e8d(0x173);if(_0x3dbb0d>=0x7d0)return'emerald';if(_0x3dbb0d>=0x708)return'gold';if(_0x3dbb0d>=0x640)return'silver';if(_0x3dbb0d>=0x578)return'bronze';return'default';}function updateRecordCard(_0x2d050d,_0xf9394e,_0x2384c8='',_0x54ce65=![]){const _0x2709f3=a46_0x9ff5,_0x5343c9=document[_0x2709f3(0x16d)](_0x2d050d);if(!_0x5343c9){console['warn']('Element\x20with\x20ID\x20\x22'+_0x2d050d+'\x22\x20not\x20found.');return;}const _0x1412ec=getPlayerTier(_0xf9394e['elo']);let _0x44a50a=_0xf9394e[_0x2709f3(0x1ac)];_0x54ce65&&_0xf9394e['value']>0x0&&(_0x44a50a='+'+_0xf9394e[_0x2709f3(0x1ac)]),_0x5343c9['innerHTML']='<span\x20class=\x22player-name\x20'+_0x1412ec+'-rank\x22>'+_0xf9394e['username']+_0x2709f3(0x1c1)+_0x44a50a+_0x2384c8+')</span>';}async function loadRecords(){const _0x4601e5=a46_0x9ff5;try{console[_0x4601e5(0x172)](_0x4601e5(0x1c4)+state['currentGameMode']+'\x20records...'),document[_0x4601e5(0x1c2)]('.record-value')['forEach'](_0x4a8e6f=>_0x4a8e6f[_0x4601e5(0x1a5)]='Loading...'),document['querySelectorAll'](_0x4601e5(0x197))['forEach'](_0x16f91c=>_0x16f91c[_0x4601e5(0x17f)]='<div\x20class=\x22loading-msg\x22>Loading\x20players...</div>');const _0x4d6d8e=state[_0x4601e5(0x187)],_0x2ccae0=_0x4d6d8e==='D1'?'players':'playersD2',_0x20acde=_0x4d6d8e==='D1'?'approvedMatches':'approvedMatchesD2',_0x491f8b=Date['now'](),_0x2a0888=state['cache'][_0x4d6d8e];if(_0x2a0888['playerStats']&&_0x2a0888[_0x4601e5(0x191)]&&_0x491f8b-_0x2a0888[_0x4601e5(0x188)]<CACHE_DURATION_MS){console['log'](_0x4601e5(0x15c)+_0x4d6d8e+'\x20records\x20data'),updateRecordDisplay(_0x2a0888[_0x4601e5(0x1c6)]),await updateTopPlayersByTier(_0x2a0888[_0x4601e5(0x191)]),updateSummaryStats(_0x2a0888[_0x4601e5(0x191)]);return;}console['log']('üì•\x20Fetching\x20ALL\x20data\x20from\x20'+_0x2ccae0+'\x20and\x20'+_0x20acde+'...');const _0x753863=collection(db,_0x2ccae0),_0x1e7687=collection(db,_0x20acde),[_0x30dd18,_0x5a7f4e]=await Promise['all']([getDocs(_0x753863),getDocs(_0x1e7687)]);console['log'](_0x4601e5(0x1bd)+_0x30dd18['size']+'\x20players,\x20'+_0x5a7f4e[_0x4601e5(0x174)]+'\x20matches');const _0x38dd3c=await calculateOptimizedStats(_0x30dd18,_0x5a7f4e,_0x4d6d8e);console['log']('üìä\x20Calculated\x20stats\x20for\x20'+_0x38dd3c['size']+'\x20players'),state['cache'][_0x4d6d8e]={'playerStats':_0x38dd3c,'playerSnapshot':_0x30dd18,'matchSnapshot':_0x5a7f4e,'timestamp':_0x491f8b,'fullDataLoaded':!![]},updateRecordDisplay(_0x38dd3c),await updateTopPlayersByTier(_0x30dd18),updateSummaryStats(_0x30dd18),console[_0x4601e5(0x172)]('‚úÖ\x20Records\x20loaded\x20successfully!');}catch(_0x2924c5){console[_0x4601e5(0x175)]('‚ùå\x20Error\x20loading\x20'+state[_0x4601e5(0x187)]+'\x20records:',_0x2924c5),document['querySelectorAll'](_0x4601e5(0x161))['forEach'](_0x4131a0=>_0x4131a0[_0x4601e5(0x1a5)]=_0x4601e5(0x16f)),document[_0x4601e5(0x1c2)](_0x4601e5(0x197))['forEach'](_0x38f725=>{_0x38f725['innerHTML']='<div\x20class=\x22loading-msg\x22>Error\x20loading\x20data</div>';});}}async function calculateOptimizedStats(_0x263fa1,_0x478ec3,_0x331338){const _0x388839=a46_0x9ff5,_0xbe2cb=new Map(),_0x575b72=new Map();return _0x478ec3['forEach'](_0x24bfe1=>{const _0x3adb35=a46_0x9ff5,_0x4c1709=_0x24bfe1['data']();if(!_0x4c1709[_0x3adb35(0x18e)]||!_0x4c1709['loserUsername'])return;!_0x575b72['has'](_0x4c1709['winnerUsername'])&&_0x575b72['set'](_0x4c1709['winnerUsername'],{'wins':[],'losses':[]}),!_0x575b72[_0x3adb35(0x1af)](_0x4c1709[_0x3adb35(0x18b)])&&_0x575b72['set'](_0x4c1709['loserUsername'],{'wins':[],'losses':[]}),_0x575b72[_0x3adb35(0x1ae)](_0x4c1709[_0x3adb35(0x18e)])['wins']['push'](_0x4c1709),_0x575b72['get'](_0x4c1709[_0x3adb35(0x18b)])['losses']['push'](_0x4c1709);}),_0x263fa1['forEach'](_0x253bb1=>{const _0x300609=a46_0x9ff5,_0x493a12=_0x253bb1[_0x300609(0x1a6)](),_0x445e76=_0x493a12['username'];if(!_0x445e76)return;const _0x158e9e=_0x575b72[_0x300609(0x1ae)](_0x445e76)||{'wins':[],'losses':[]},_0x11a5bb=_0x158e9e['wins'][_0x300609(0x1be)],_0x19b61f=_0x158e9e['losses']['length'],_0x28c365=_0x11a5bb+_0x19b61f;let _0x3b5b26=0x0,_0x531885=0x0,_0x55c353=0x0,_0x5f1041=0x0;_0x158e9e[_0x300609(0x1bb)]['forEach'](_0x478740=>{const _0x33188f=parseInt(_0x478740['winnerScore'])||0x0,_0x228230=parseInt(_0x478740['loserScore'])||0x0;_0x3b5b26+=_0x33188f,_0x531885+=_0x228230,_0x55c353+=parseInt(_0x478740['winnerSuicides'])||0x0,_0x5f1041+=_0x33188f-_0x228230;}),_0x158e9e['losses']['forEach'](_0xcdfb03=>{const _0x2f1e52=parseInt(_0xcdfb03['winnerScore'])||0x0,_0x7fe2d8=parseInt(_0xcdfb03['loserScore'])||0x0;_0x3b5b26+=_0x7fe2d8,_0x531885+=_0x2f1e52,_0x55c353+=parseInt(_0xcdfb03['loserSuicides'])||0x0,_0x5f1041-=_0x2f1e52-_0x7fe2d8;});const _0x5e546f=_0x531885>0x0?parseFloat((_0x3b5b26/_0x531885)['toFixed'](0x2)):_0x3b5b26,_0x214192=_0x28c365>0x0?parseFloat((_0x11a5bb/_0x28c365*0x64)['toFixed'](0x1)):0x0;_0xbe2cb['set'](_0x445e76,{'wins':_0x11a5bb,'losses':_0x19b61f,'totalMatches':_0x28c365,'kdRatio':_0x5e546f,'winRate':_0x214192,'totalKills':_0x3b5b26,'totalDeaths':_0x531885,'totalSuicides':_0x55c353,'scoreDifferential':_0x5f1041,'eloRating':_0x493a12[_0x300609(0x193)]||0x4b0,'position':_0x493a12['position'],'isPartialData':!![]});}),console[_0x388839(0x172)]('üìä\x20Calculated\x20stats\x20for\x20'+_0xbe2cb['size']+_0x388839(0x178)),_0xbe2cb;}function addLoadMoreOption(_0x4bf448){const _0x36c342=a46_0x9ff5,_0x2b0f5b=state['cache'][_0x4bf448];if(_0x2b0f5b['fullDataLoaded'])return;const _0x2b70fe=document['querySelector'](_0x36c342(0x19b))||document[_0x36c342(0x16a)]('.records');if(_0x2b70fe&&!document['getElementById']('load-more-btn')){const _0x93e1d5=document['createElement']('button');_0x93e1d5['id']='load-more-btn',_0x93e1d5['className']='load-more-btn',_0x93e1d5['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-expand-arrows-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Load\x20Complete\x20Dataset\x20(All\x20Players\x20&\x20Matches)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>May\x20take\x20longer\x20but\x20shows\x20complete\x20statistics</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x93e1d5['addEventListener']('click',()=>loadCompleteDataset(_0x4bf448)),_0x2b70fe['appendChild'](_0x93e1d5);}}function a46_0x9ff5(_0x1248d3,_0x5d6e2c){const _0x1e029d=a46_0x540f();return a46_0x9ff5=function(_0x25dbab,_0x18fef6){_0x25dbab=_0x25dbab-0x159;let _0x540fa1=_0x1e029d[_0x25dbab];return _0x540fa1;},a46_0x9ff5(_0x1248d3,_0x5d6e2c);}async function loadCompleteDataset(_0x536b71){const _0x14898d=a46_0x9ff5;if(state[_0x14898d(0x184)])return;state['isLoadingMore']=!![];const _0x21fba4=document[_0x14898d(0x16d)]('load-more-btn');_0x21fba4&&(_0x21fba4['innerHTML']=_0x14898d(0x1a1),_0x21fba4['disabled']=!![]);try{console['log'](_0x14898d(0x1b1));const _0xa6a95d=_0x536b71==='D1'?'players':'playersD2',_0x1923f8=_0x536b71==='D1'?'approvedMatches':'approvedMatchesD2',_0x5d72c0=collection(db,_0xa6a95d),_0x368e87=collection(db,_0x1923f8),[_0x3eca6f,_0x4cf52d]=await Promise['all']([getDocs(_0x5d72c0),getDocs(_0x368e87)]);console[_0x14898d(0x172)]('üìä\x20Complete\x20dataset:\x20'+_0x3eca6f['size']+'\x20players,\x20'+_0x4cf52d['size']+_0x14898d(0x1a0));const _0xc9e787=await calculateCompleteStats(_0x3eca6f,_0x4cf52d);state[_0x14898d(0x176)][_0x536b71]={'playerStats':_0xc9e787,'playerSnapshot':_0x3eca6f,'matchSnapshot':_0x4cf52d,'timestamp':Date['now'](),'fullDataLoaded':!![]},updateRecordDisplay(_0xc9e787),await updateTopPlayersByTier(_0x3eca6f),updateSummaryStats(_0x3eca6f),_0x21fba4&&_0x21fba4['remove'](),console[_0x14898d(0x172)](_0x14898d(0x189));}catch(_0x35284a){console['error']('Error\x20loading\x20complete\x20dataset:',_0x35284a),_0x21fba4&&(_0x21fba4[_0x14898d(0x17f)]='Error\x20loading\x20complete\x20data\x20-\x20Click\x20to\x20retry',_0x21fba4['disabled']=![]);}finally{state['isLoadingMore']=![];}}async function calculateCompleteStats(_0x2eb8cc,_0x1300b6){const _0x1f6acf=a46_0x9ff5,_0x230e49=new Map(),_0x3b227d=new Map();return _0x1300b6[_0x1f6acf(0x1b8)](_0x300bc2=>{const _0x2b6bb1=_0x1f6acf,_0x5f45b9=_0x300bc2['data']();if(!_0x5f45b9['winnerUsername']||!_0x5f45b9['loserUsername'])return;!_0x3b227d['has'](_0x5f45b9['winnerUsername'])&&_0x3b227d['set'](_0x5f45b9['winnerUsername'],{'wins':[],'losses':[]}),!_0x3b227d['has'](_0x5f45b9['loserUsername'])&&_0x3b227d[_0x2b6bb1(0x171)](_0x5f45b9['loserUsername'],{'wins':[],'losses':[]}),_0x3b227d[_0x2b6bb1(0x1ae)](_0x5f45b9[_0x2b6bb1(0x18e)])['wins'][_0x2b6bb1(0x1b0)](_0x5f45b9),_0x3b227d['get'](_0x5f45b9['loserUsername'])['losses'][_0x2b6bb1(0x1b0)](_0x5f45b9);}),_0x2eb8cc['forEach'](_0x1313d1=>{const _0x4d1038=_0x1f6acf,_0x2e1b65=_0x1313d1['data'](),_0x19caea=_0x2e1b65[_0x4d1038(0x1b6)];if(!_0x19caea)return;const _0x46bea0=_0x3b227d['get'](_0x19caea)||{'wins':[],'losses':[]},_0x4776ac=_0x46bea0['wins']['length'],_0x20d32c=_0x46bea0['losses']['length'],_0x2a76f3=_0x4776ac+_0x20d32c;let _0x4fe0c5=0x0,_0x5b48ad=0x0,_0x3e2dcf=0x0,_0xd350e6=0x0;_0x46bea0['wins'][_0x4d1038(0x1b8)](_0x1bdc44=>{const _0x5397d2=_0x4d1038,_0x37eb54=parseInt(_0x1bdc44['winnerScore'])||0x0,_0x2554dc=parseInt(_0x1bdc44['loserScore'])||0x0;_0x4fe0c5+=_0x37eb54,_0x5b48ad+=_0x2554dc,_0x3e2dcf+=parseInt(_0x1bdc44[_0x5397d2(0x199)])||0x0,_0xd350e6+=_0x37eb54-_0x2554dc;}),_0x46bea0['losses'][_0x4d1038(0x1b8)](_0x44d586=>{const _0xf3270c=parseInt(_0x44d586['winnerScore'])||0x0,_0x304f84=parseInt(_0x44d586['loserScore'])||0x0;_0x4fe0c5+=_0x304f84,_0x5b48ad+=_0xf3270c,_0x3e2dcf+=parseInt(_0x44d586['loserSuicides'])||0x0,_0xd350e6-=_0xf3270c-_0x304f84;});const _0x5dd28a=_0x5b48ad>0x0?parseFloat((_0x4fe0c5/_0x5b48ad)['toFixed'](0x2)):_0x4fe0c5,_0x4c2ff7=_0x2a76f3>0x0?parseFloat((_0x4776ac/_0x2a76f3*0x64)['toFixed'](0x1)):0x0;_0x230e49['set'](_0x19caea,{'wins':_0x4776ac,'losses':_0x20d32c,'totalMatches':_0x2a76f3,'kdRatio':_0x5dd28a,'winRate':_0x4c2ff7,'totalKills':_0x4fe0c5,'totalDeaths':_0x5b48ad,'totalSuicides':_0x3e2dcf,'scoreDifferential':_0xd350e6,'eloRating':_0x2e1b65[_0x4d1038(0x193)]||0x4b0,'position':_0x2e1b65['position'],'isPartialData':![]});}),_0x230e49;}function updateRecordDisplay(_0x4cc346){const _0x3860b1=a46_0x9ff5;if(!_0x4cc346||_0x4cc346['size']===0x0){console['warn']('No\x20player\x20stats\x20available\x20to\x20display\x20records.'),document[_0x3860b1(0x1c2)](_0x3860b1(0x161))['forEach'](_0x5a1b2a=>_0x5a1b2a['textContent']='N/A');return;}let _0x2d1f1d={'username':'N/A','value':0x0,'elo':0x0},_0x4fccb4={'username':_0x3860b1(0x1ba),'value':0x0,'elo':0x0},_0x4e029a={'username':_0x3860b1(0x1ba),'value':0x0,'elo':0x0},_0xc3f743={'username':'N/A','value':0x0,'elo':0x0},_0x574057={'username':'N/A','value':-Infinity,'elo':0x0},_0x4092d9={'username':'N/A','value':0x0,'elo':0x0},_0x377cd2=null,_0x5bfad7=Infinity,_0x136727={'username':_0x3860b1(0x1ba),'value':0x0,'elo':0x0},_0x4cfa7a={'username':_0x3860b1(0x1ba),'value':0x0,'elo':0x0};for(const [_0x32a841,_0xba7f3b]of _0x4cc346){const _0x2c71a9=_0xba7f3b['eloRating']||0x0;if(_0xba7f3b['wins']>_0x2d1f1d['value'])_0x2d1f1d={'username':_0x32a841,'value':_0xba7f3b['wins'],'elo':_0x2c71a9};if(_0xba7f3b['totalMatches']>=MIN_MATCHES_REQUIREMENT&&_0xba7f3b['winRate']>_0x4fccb4['value'])_0x4fccb4={'username':_0x32a841,'value':_0xba7f3b['winRate'],'elo':_0x2c71a9};if(_0xba7f3b['totalMatches']>=MIN_MATCHES_REQUIREMENT&&_0xba7f3b[_0x3860b1(0x1c7)]>_0x4e029a['value'])_0x4e029a={'username':_0x32a841,'value':_0xba7f3b[_0x3860b1(0x1c7)],'elo':_0x2c71a9};if(_0xba7f3b[_0x3860b1(0x1c3)]>_0xc3f743['value'])_0xc3f743={'username':_0x32a841,'value':_0xba7f3b['totalMatches'],'elo':_0x2c71a9};if(_0xba7f3b[_0x3860b1(0x1c3)]>=MIN_MATCHES_REQUIREMENT&&_0xba7f3b[_0x3860b1(0x192)]>_0x574057['value'])_0x574057={'username':_0x32a841,'value':_0xba7f3b['scoreDifferential'],'elo':_0x2c71a9};if(_0xba7f3b['losses']>_0x4092d9['value'])_0x4092d9={'username':_0x32a841,'value':_0xba7f3b['losses'],'elo':_0x2c71a9};if(_0xba7f3b['totalMatches']>=MIN_MATCHES_REQUIREMENT&&_0xba7f3b['totalSuicides']>=0x0){const _0x3a3b2a=_0xba7f3b['totalSuicides']/_0xba7f3b[_0x3860b1(0x1c3)]*0x64;_0x3a3b2a<_0x5bfad7&&(_0x5bfad7=_0x3a3b2a,_0x377cd2={'username':_0x32a841,'suicideRate':_0x3a3b2a,'totalSuicides':_0xba7f3b[_0x3860b1(0x185)],'totalMatches':_0xba7f3b['totalMatches'],'elo':_0x2c71a9});}if(_0xba7f3b['totalKills']>_0x136727['value'])_0x136727={'username':_0x32a841,'value':_0xba7f3b['totalKills'],'elo':_0x2c71a9};if(_0xba7f3b['eloRating']>_0x4cfa7a[_0x3860b1(0x1ac)])_0x4cfa7a={'username':_0x32a841,'value':Math['round'](_0xba7f3b['eloRating']),'elo':_0x2c71a9};}updateRecordCard('most-wins',_0x2d1f1d),updateRecordCard('best-winrate',_0x4fccb4,'%'),updateRecordCard('best-kd',_0x4e029a),updateRecordCard('most-matches',_0xc3f743),updateRecordCard('best-differential',_0x574057,'',!![]),updateRecordCard('most-losses',_0x4092d9);const _0x536f9b=document['getElementById']('least-suicides');if(_0x377cd2&&_0x536f9b){const _0x5303ec=getPlayerTier(_0x377cd2['elo']);_0x536f9b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x20'+_0x5303ec+_0x3860b1(0x15a)+_0x377cd2[_0x3860b1(0x1b6)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22record-stat\x22>('+_0x377cd2['suicideRate'][_0x3860b1(0x19e)](0x2)+_0x3860b1(0x162)+_0x377cd2['totalSuicides']+'\x20suicides\x20in\x20'+_0x377cd2['totalMatches']+'\x20matches</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}else _0x536f9b&&(_0x536f9b['textContent']='No\x20data\x20available');updateRecordCard('most-kills',_0x136727),updateRecordCard('best-elo',_0x4cfa7a);const _0x47d5bb=Array[_0x3860b1(0x196)](_0x4cc346['values']())[_0x3860b1(0x1b7)](_0x50cb60=>_0x50cb60['isPartialData']);_0x47d5bb&&addPartialDataIndicator(),updateHiddenStatsDiv(_0x4cc346);}function addPartialDataIndicator(){const _0x5e6010=a46_0x9ff5,_0x529250=document['querySelector'](_0x5e6010(0x19b))||document[_0x5e6010(0x16a)](_0x5e6010(0x181));if(_0x529250&&!document['querySelector']('.partial-data-indicator')){const _0x4101e7=document[_0x5e6010(0x190)]('div');_0x4101e7[_0x5e6010(0x15b)]='partial-data-indicator',_0x4101e7['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-info-circle\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Showing\x20results\x20from\x20top\x20'+MAX_PLAYERS_PER_BATCH+'\x20players\x20and\x20recent\x20'+MAX_MATCHES_PER_BATCH+'\x20matches\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x529250['insertBefore'](_0x4101e7,_0x529250['firstChild']);}}async function loadMapStats(){const _0x3eedab=a46_0x9ff5;try{console[_0x3eedab(0x172)]('üîÑ\x20Loading\x20map\x20stats\x20for\x20'+state['currentGameMode']+'...');const _0x310fd4=state[_0x3eedab(0x187)],_0x4dc2fc=state['cache'][_0x310fd4];let _0x15b18b;if(_0x4dc2fc[_0x3eedab(0x169)]&&Date['now']()-_0x4dc2fc['timestamp']<CACHE_DURATION_MS)console['log']('‚úÖ\x20Using\x20cached\x20match\x20data\x20for\x20map\x20stats\x20(from\x20loadRecords)'),_0x15b18b=_0x4dc2fc[_0x3eedab(0x169)];else{console['log']('üîÑ\x20Fetching\x20matches\x20for\x20map\x20stats\x20(separate\x20query)...');const _0x965991=_0x310fd4==='D1'?'approvedMatches':_0x3eedab(0x19a),_0x3eeae9=collection(db,_0x965991);console[_0x3eedab(0x172)](_0x3eedab(0x17e)),_0x15b18b=await getDocs(_0x3eeae9),console['log']('‚úÖ\x20Simple\x20map\x20query\x20successful:\x20'+_0x15b18b[_0x3eedab(0x174)]+'\x20matches');}console['log'](_0x3eedab(0x1b9)+_0x15b18b[_0x3eedab(0x174)]+'\x20matches...');const _0x297da6=new Map(),_0x15970e=new Map();let _0x23c32d=0x0;_0x15b18b[_0x3eedab(0x1b8)](_0x1c28bf=>{const _0x57f26f=_0x3eedab,_0x4cfb74=_0x1c28bf['data'](),_0x3bf0df=_0x4cfb74['mapPlayed']||_0x4cfb74['map']||_0x4cfb74[_0x57f26f(0x195)]||_0x4cfb74[_0x57f26f(0x1a7)];if(_0x3bf0df&&typeof _0x3bf0df==='string'&&_0x3bf0df['trim']()[_0x57f26f(0x1be)]>0x0){const _0x30cc21=_0x3bf0df['toLowerCase']()['trim']();_0x297da6['set'](_0x30cc21,(_0x297da6[_0x57f26f(0x1ae)](_0x30cc21)||0x0)+0x1),!_0x15970e[_0x57f26f(0x1af)](_0x30cc21)&&_0x15970e['set'](_0x30cc21,{}),_0x15970e[_0x57f26f(0x1ae)](_0x30cc21)[_0x3bf0df]=(_0x15970e['get'](_0x30cc21)[_0x3bf0df]||0x0)+0x1,_0x23c32d++;}}),console['log'](_0x3eedab(0x177)+_0x23c32d+'\x20matches\x20with\x20map\x20data\x20out\x20of\x20'+_0x15b18b[_0x3eedab(0x174)]+_0x3eedab(0x1c8)),console['log'](_0x3eedab(0x1a8)+_0x297da6[_0x3eedab(0x174)]+_0x3eedab(0x17c));if(_0x297da6['size']===0x0){console['warn'](_0x3eedab(0x1c0));_0x15b18b['size']>0x0&&(console['log']('üîç\x20Sample\x20match\x20structure\x20for\x20debugging:'),_0x15b18b[_0x3eedab(0x1b8)]((_0x23d1b9,_0xb7d7f)=>{const _0x52e258=_0x3eedab;if(_0xb7d7f===0x0){const _0x1172a8=_0x23d1b9[_0x52e258(0x1a6)]();console['log']('First\x20match\x20data:',_0x1172a8),console['log']('Available\x20fields:',Object['keys'](_0x1172a8));}}));const _0x281089=document['getElementById'](_0x3eedab(0x159))?.['parentElement']||document[_0x3eedab(0x16a)]('.chart-container')||document[_0x3eedab(0x16a)]('.map-stats-container');_0x281089&&(_0x281089['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-stats-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Most\x20Played\x20Maps\x20-\x20'+state['currentGameMode']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22error-message\x22>No\x20map\x20data\x20found\x20in\x20'+_0x15b18b['size']+'\x20matches</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22error-message\x22>Check\x20console\x20for\x20match\x20structure\x20debug\x20info</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20');return;}const _0x2710b8=Array[_0x3eedab(0x196)](_0x297da6['entries']())[_0x3eedab(0x186)]((_0x1b1a9c,_0x13e0c1)=>_0x13e0c1[0x1]-_0x1b1a9c[0x1])[_0x3eedab(0x1bc)](0x0,0xf),_0x18b07f=_0x2710b8['length']>0x0?_0x2710b8[0x0][0x1]:0x1,_0x472b54=_0x15b18b['size'],_0x2fa9e9=document[_0x3eedab(0x16d)]('mapStatsChart')?.['parentElement']||document['querySelector']('.chart-container')||document['querySelector']('.map-stats-container');if(!_0x2fa9e9){console['warn']('Map\x20stats\x20container\x20not\x20found.\x20Looking\x20for\x20containers...'),console[_0x3eedab(0x172)](_0x3eedab(0x19c),{'mapStatsChart':!!document['getElementById']('mapStatsChart'),'chartContainer':!!document[_0x3eedab(0x16a)]('.chart-container'),'mapStatsContainer':!!document[_0x3eedab(0x16a)](_0x3eedab(0x18d))});return;}let _0x12b0c7=_0x3eedab(0x15e)+state[_0x3eedab(0x187)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22total-matches\x22>Based\x20on\x20'+_0x23c32d+'\x20matches\x20with\x20map\x20data\x20‚Ä¢\x20'+_0x297da6[_0x3eedab(0x174)]+'\x20unique\x20maps</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-stats-list\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';_0x2710b8['forEach'](([_0x37dd5,_0x5d41ca],_0x871f0e)=>{const _0xba9592=_0x3eedab,_0x1b3edc=_0x15970e['get'](_0x37dd5);let _0x4159bb=_0x37dd5,_0x411748=0x0;for(const [_0x164ee0,_0x22f394]of Object['entries'](_0x1b3edc)){_0x22f394>_0x411748&&(_0x411748=_0x22f394,_0x4159bb=_0x164ee0);}const _0x475605=Math['round'](_0x5d41ca/_0x18b07f*0x64),_0x28586b=Math[_0xba9592(0x17b)](_0x5d41ca/_0x23c32d*0x64),_0x305f7d=_0x871f0e+0x1;_0x12b0c7+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-stat-item\x22\x20title=\x22'+_0x4159bb+':\x20'+_0x5d41ca+'\x20matches\x20('+_0x28586b+'%)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22map-rank\x22>#'+_0x305f7d+_0xba9592(0x1ad)+_0x4159bb+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22map-count\x22>'+_0x5d41ca+'\x20matches</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-bar-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-bar\x22\x20style=\x22width:\x20'+_0x475605+'%\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22map-percentage\x22>'+_0x28586b+'%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x12b0c7+=_0x3eedab(0x170);if(_0x297da6[_0x3eedab(0x174)]>0xf){const _0xc24616=_0x297da6['size']-0xf,_0x7ae8c1=Array[_0x3eedab(0x196)](_0x297da6['values']())['slice'](0xf)['reduce']((_0x86bdf,_0x2d0119)=>_0x86bdf+_0x2d0119,0x0);_0x12b0c7+=_0x3eedab(0x18c)+_0xc24616+'\x20more\x20maps\x20with\x20'+_0x7ae8c1+'\x20total\x20matches\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}_0x2fa9e9['innerHTML']=_0x12b0c7,console[_0x3eedab(0x172)](_0x3eedab(0x165)+_0x2710b8['length']+_0x3eedab(0x183));}catch(_0x149240){console['error']('‚ùå\x20Error\x20loading\x20'+state['currentGameMode']+'\x20map\x20statistics:',_0x149240);const _0x39d6a9=document['getElementById']('mapStatsChart')?.['parentElement']||document['querySelector']('.chart-container');_0x39d6a9&&(_0x39d6a9['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22map-stats-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Most\x20Played\x20Maps\x20-\x20'+state[_0x3eedab(0x187)]+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22error-message\x22>Error\x20loading\x20map\x20statistics:\x20'+_0x149240['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20');}}async function updateTopPlayersByTier(_0x4916e6){const _0x376a96=a46_0x9ff5;if(!_0x4916e6){console['error']('playerSnapshot\x20not\x20provided\x20to\x20updateTopPlayersByTier');try{const _0x1704a3=state['currentGameMode']==='D1'?_0x376a96(0x19d):'playersD2';_0x4916e6=await getDocs(collection(db,_0x1704a3));}catch(_0x2af5ac){console['error'](_0x376a96(0x18f)+_0x2af5ac),document['querySelectorAll']('.tier-players')['forEach'](_0x3d89ad=>_0x3d89ad['innerHTML']='<div\x20class=\x22loading-msg\x22>Error\x20loading\x20players</div>');return;}}try{document['querySelectorAll'](_0x376a96(0x197))['forEach'](_0x1041f6=>_0x1041f6['innerHTML']=_0x376a96(0x1b2));const _0x143adb={'emerald':{'min':0x7d0,'players':[]},'gold':{'min':0x708,'players':[]},'silver':{'min':0x640,'players':[]},'bronze':{'min':0x578,'players':[]}};_0x4916e6['forEach'](_0x73eff6=>{const _0xac0afc=_0x376a96,_0x535ece=_0x73eff6[_0xac0afc(0x1a6)]();if(!_0x535ece['username'])return;const _0x4a46cf=_0x535ece[_0xac0afc(0x193)]||0x4b0,_0x329757={'username':_0x535ece['username'],'elo':_0x4a46cf,'position':_0x535ece[_0xac0afc(0x1ab)]||0x3e7};if(_0x4a46cf>=_0x143adb['emerald']['min'])_0x143adb[_0xac0afc(0x1a9)]['players']['push'](_0x329757);else{if(_0x4a46cf>=_0x143adb['gold']['min'])_0x143adb['gold']['players']['push'](_0x329757);else{if(_0x4a46cf>=_0x143adb['silver']['min'])_0x143adb[_0xac0afc(0x166)]['players']['push'](_0x329757);else{if(_0x4a46cf>=_0x143adb['bronze']['min'])_0x143adb['bronze']['players'][_0xac0afc(0x1b0)](_0x329757);}}}});for(const _0x53c0c5 in _0x143adb){const _0x199c13=_0x143adb[_0x53c0c5];_0x199c13['players'][_0x376a96(0x1be)]>0x0?(_0x199c13['players'][_0x376a96(0x186)]((_0x3a1bf7,_0x296601)=>{const _0x570e39=_0x376a96,_0x582ae5=_0x3a1bf7['position']===0x3e7?Infinity:_0x3a1bf7[_0x570e39(0x1ab)],_0x4ac2fc=_0x296601['position']===0x3e7?Infinity:_0x296601[_0x570e39(0x1ab)];if(_0x582ae5!==_0x4ac2fc)return _0x582ae5-_0x4ac2fc;return _0x296601[_0x570e39(0x163)]-_0x3a1bf7['elo'];}),_0x199c13['topPlayer']=_0x199c13['players'][0x0]):_0x199c13['topPlayer']=null;const _0x4a7e91=document[_0x376a96(0x16d)](_0x53c0c5+'-players');if(!_0x4a7e91)continue;if(!_0x199c13[_0x376a96(0x164)])_0x4a7e91[_0x376a96(0x17f)]='<div\x20class=\x22loading-msg\x22>No\x20players\x20in\x20this\x20tier</div>';else{const _0x17a5fd=_0x199c13['topPlayer'],_0x5633d9=_0x17a5fd[_0x376a96(0x1ab)]&&_0x17a5fd['position']<0x3e7?_0x17a5fd['position']:0x1;_0x4a7e91[_0x376a96(0x17f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tier-player\x20top-player\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-rank\x22>#'+_0x5633d9+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+_0x17a5fd[_0x376a96(0x1b6)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-elo\x22>'+Math['round'](_0x17a5fd[_0x376a96(0x163)])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-badge\x22>Best\x20'+(_0x53c0c5['charAt'](0x0)['toUpperCase']()+_0x53c0c5[_0x376a96(0x1bc)](0x1))+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22tier-count\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x199c13['players']['length']+_0x376a96(0x1bf)+(_0x199c13[_0x376a96(0x19d)]['length']!==0x1?'s':'')+'\x20in\x20'+state['currentGameMode']+'\x20'+_0x53c0c5+'\x20tier\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';}}}catch(_0x1bae20){console['error']('Error\x20updating\x20top\x20players\x20by\x20tier:\x20'+_0x1bae20),document[_0x376a96(0x1c2)]('.tier-players')['forEach'](_0xdc9d4c=>_0xdc9d4c[_0x376a96(0x17f)]='<div\x20class=\x22loading-msg\x22>Error\x20loading\x20players</div>');}}function updateSummaryStats(_0x153000){const _0x3c7ac5=a46_0x9ff5;if(!_0x153000)return;const _0x57e51a=_0x153000['size'],_0x1eaa52=_0x153000['docs'][_0x3c7ac5(0x18a)](_0x485671=>_0x485671[_0x3c7ac5(0x1a6)]()['active']!==![])[_0x3c7ac5(0x1be)],_0x2d7654=document[_0x3c7ac5(0x16d)]('total-matches'),_0x422418=document['getElementById']('total-players'),_0x5cb316=document['getElementById']('last-updated'),_0x49c4d9=state[_0x3c7ac5(0x176)][state['currentGameMode']]?.['playerStats'];if(_0x49c4d9){const _0x1d44c8=Array['from'](_0x49c4d9['values']())['reduce']((_0x51c7d7,_0x318034)=>_0x51c7d7+_0x318034['totalMatches'],0x0)/0x2;if(_0x2d7654)_0x2d7654['textContent']=Math['round'](_0x1d44c8);}else{if(_0x2d7654)_0x2d7654['textContent']=_0x3c7ac5(0x1ba);}if(_0x422418)_0x422418[_0x3c7ac5(0x1a5)]=_0x1eaa52;if(_0x5cb316)_0x5cb316[_0x3c7ac5(0x1a5)]=new Date()[_0x3c7ac5(0x15f)]();}function updateHiddenStatsDiv(_0x2b7526){const _0x4dfca0=a46_0x9ff5;let _0x2dea6d=document['getElementById'](_0x4dfca0(0x1b3));!_0x2dea6d&&(_0x2dea6d=document[_0x4dfca0(0x190)]('div'),_0x2dea6d['id']='records-stats',_0x2dea6d['style']['display']='none',document['body'][_0x4dfca0(0x1a2)](_0x2dea6d));const _0xc67c33=(_0x2d07fe,_0x270983=()=>!![],_0xe7eee2,_0x597925=_0x2d07fe)=>Array['from'](_0x2b7526['entries']())['filter'](_0x270983)['sort'](_0xe7eee2)['slice'](0x0,0x3)['map'](([_0x3a3d7a,_0x24d661])=>({'name':_0x3a3d7a,[_0x597925]:_0x24d661[_0x597925]})),_0x25bf75={'mode':state[_0x4dfca0(0x187)],'timestamp':new Date()['toISOString'](),'records':{'mostWins':_0xc67c33('wins',()=>!![],(_0x3e915d,_0x3951c8)=>_0x3951c8[0x1]['wins']-_0x3e915d[0x1]['wins']),'bestWinRate':_0xc67c33(_0x4dfca0(0x15d),([_0x2ce176,_0x1be0bd])=>_0x1be0bd['totalMatches']>=MIN_MATCHES_REQUIREMENT,(_0x19e10f,_0x4c6a90)=>_0x4c6a90[0x1]['winRate']-_0x19e10f[0x1]['winRate']),'bestKD':_0xc67c33('kdRatio',([_0x4c2947,_0x3f13d0])=>_0x3f13d0['totalMatches']>=MIN_MATCHES_REQUIREMENT,(_0x202041,_0x569b7b)=>_0x569b7b[0x1][_0x4dfca0(0x1c7)]-_0x202041[0x1]['kdRatio']),'mostMatches':_0xc67c33('totalMatches',()=>!![],(_0x40bfde,_0x32ec26)=>_0x32ec26[0x1]['totalMatches']-_0x40bfde[0x1][_0x4dfca0(0x1c3)])}};_0x2dea6d['textContent']=JSON[_0x4dfca0(0x1b4)](_0x25bf75,null,0x2);}function setupGameModeToggle(){const _0xb1045f=a46_0x9ff5,_0x1e4219=document['querySelectorAll']('.toggle-btn');_0x1e4219[_0xb1045f(0x1b8)](_0x115d00=>{const _0x3e61bb=_0xb1045f,_0x133bbd=_0x115d00[_0x3e61bb(0x16c)](!![]);_0x115d00['parentNode'][_0x3e61bb(0x182)](_0x133bbd,_0x115d00),_0x133bbd['addEventListener']('click',function(){const _0x25a5a4=_0x3e61bb;if(this['classList'][_0x25a5a4(0x1b5)]('active'))return;const _0xebeeee=this['getAttribute']('data-game')['toUpperCase']();console['log']('Switching\x20to\x20'+_0xebeeee+'\x20mode...'),document['querySelectorAll']('.toggle-btn')['forEach'](_0x4c97f4=>_0x4c97f4['classList'][_0x25a5a4(0x160)]('active')),this['classList']['add']('active'),state['currentGameMode']=_0xebeeee;const _0x829110=document[_0x25a5a4(0x16d)]('load-more-btn');if(_0x829110)_0x829110['remove']();loadRecords(),loadMapStats();});});}const style=document['createElement']('style');style[a46_0x24d160(0x1a5)]=a46_0x24d160(0x16e),document['head']['appendChild'](style),document['addEventListener']('DOMContentLoaded',()=>{const _0x40a257=a46_0x24d160;Promise['all']([fetch('../HTML/nav.html')[_0x40a257(0x198)](_0x56cbd4=>_0x56cbd4['ok']?_0x56cbd4[_0x40a257(0x179)]():Promise['reject']('Nav\x20fetch\x20failed')),fetch('../HTML/footer.html')['then'](_0x390672=>_0x390672['ok']?_0x390672['text']():Promise['reject']('Footer\x20fetch\x20failed'))])['then'](([_0x2a5e31,_0x419b14])=>{const _0x36835f=_0x40a257,_0x279bbd=document[_0x36835f(0x16d)](_0x36835f(0x180)),_0x2b46b0=document['getElementById']('footer-placeholder');if(_0x279bbd)_0x279bbd['innerHTML']=_0x2a5e31;if(_0x2b46b0)_0x2b46b0['innerHTML']=_0x419b14;})['catch'](_0x1e8a1b=>{const _0x3d5b6b=_0x40a257;console[_0x3d5b6b(0x175)]('Error\x20loading\x20nav\x20or\x20footer:',_0x1e8a1b);}),loadRecords(),loadMapStats(),setupGameModeToggle();});function calculatePlayerRecords(_0x3017f,_0x598c6d){const _0x3b19a5=a46_0x24d160;let _0x177c39=null,_0x58eafc=Infinity;_0x598c6d[_0x3b19a5(0x1b8)](_0x5178a4=>{const _0x2ca0e8=_0x3b19a5,_0x295b54=_0x3017f[_0x2ca0e8(0x18a)](_0x5e882f=>_0x5e882f['winnerUsername']===_0x5178a4['username']||_0x5e882f['loserUsername']===_0x5178a4[_0x2ca0e8(0x1b6)]);if(_0x295b54['length']<0x5)return;const _0x1f8547=_0x295b54[_0x2ca0e8(0x1c5)]((_0x55f6c3,_0x3a149a)=>{const _0x5a6f90=_0x2ca0e8;return _0x3a149a[_0x5a6f90(0x18e)]===_0x5178a4['username']?_0x55f6c3+(_0x3a149a[_0x5a6f90(0x199)]||0x0):_0x55f6c3+(_0x3a149a['loserSuicides']||0x0);},0x0),_0x51363c=_0x1f8547/_0x295b54[_0x2ca0e8(0x1be)]*0x64;_0x51363c<_0x58eafc&&(_0x58eafc=_0x51363c,_0x177c39={'player':_0x5178a4[_0x2ca0e8(0x1b6)],'suicideRate':_0x51363c,'totalSuicides':_0x1f8547,'totalMatches':_0x295b54[_0x2ca0e8(0x1be)]});});const _0x254734=document['getElementById'](_0x3b19a5(0x194));_0x177c39?_0x254734[_0x3b19a5(0x17f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+_0x177c39['player']+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22record-stat\x22>'+_0x177c39[_0x3b19a5(0x17d)]['toFixed'](0x2)+_0x3b19a5(0x168)+_0x177c39['totalSuicides']+'\x20suicides\x20in\x20'+_0x177c39['totalMatches']+'\x20matches</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20':_0x254734['textContent']='No\x20data\x20available';}