function a48_0x295c(_0x4c37b6,_0x3a3eb0){const _0x5a145f=a48_0x1f55();return a48_0x295c=function(_0x51ec5d,_0x2e0e6a){_0x51ec5d=_0x51ec5d-0x12b;let _0x1f556a=_0x5a145f[_0x51ec5d];return _0x1f556a;},a48_0x295c(_0x4c37b6,_0x3a3eb0);}const a48_0x1fe699=a48_0x295c,a48_0x51ec5d=(function(){let _0x144099=!![];return function(_0x403a4f,_0x4a51c8){const _0x1c4b7b=_0x144099?function(){if(_0x4a51c8){const _0xedf45a=_0x4a51c8['apply'](_0x403a4f,arguments);return _0x4a51c8=null,_0xedf45a;}}:function(){};return _0x144099=![],_0x1c4b7b;};}()),a48_0x5a145f=a48_0x51ec5d(this,function(){const _0x32c746=a48_0x295c;let _0x5334aa;try{const _0x174648=Function('return\x20(function()\x20'+_0x32c746(0x152)+');');_0x5334aa=_0x174648();}catch(_0x2c8c32){_0x5334aa=window;}const _0x7a7947=_0x5334aa[_0x32c746(0x134)]=_0x5334aa['console']||{},_0x5e8903=[_0x32c746(0x188),'warn','info','error','exception','table','trace'];for(let _0x177ae8=0x0;_0x177ae8<_0x5e8903['length'];_0x177ae8++){const _0x1b94a6=a48_0x51ec5d[_0x32c746(0x17d)][_0x32c746(0x13a)]['bind'](a48_0x51ec5d),_0x439a62=_0x5e8903[_0x177ae8],_0x4b2b88=_0x7a7947[_0x439a62]||_0x1b94a6;_0x1b94a6['__proto__']=a48_0x51ec5d[_0x32c746(0x1af)](a48_0x51ec5d),_0x1b94a6['toString']=_0x4b2b88[_0x32c746(0x1b4)]['bind'](_0x4b2b88),_0x7a7947[_0x439a62]=_0x1b94a6;}});a48_0x5a145f();import{approveReport}from'./ladderalgorithm.js';import{approveReportD2}from'./ladderalgorithm-d2.js';import{approveReportD3}from'./ladderalgorithm-d3.js';import{checkPendingMatches,updatePendingMatchNotification,updateNotificationDot}from'./checkPendingMatches.js';import{collection,getDocs,query,where,orderBy,serverTimestamp,doc,setDoc,getDoc,addDoc,updateDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentUserEmail=null,confirmationNotification=null,outstandingReportData=null,currentGameMode='D1',outstandingMatches=[];document['addEventListener']('DOMContentLoaded',async()=>{const _0x377a86=a48_0x295c,_0x208402={'authWarning':document['getElementById'](_0x377a86(0x163)),'reportForm':document[_0x377a86(0x1bf)]('report-form'),'winnerUsername':document['getElementById']('winner-username'),'loserUsername':document['getElementById'](_0x377a86(0x161)),'loserScore':document[_0x377a86(0x1bf)]('loser-score'),'suicides':document[_0x377a86(0x1bf)]('suicides'),'mapPlayed':document['getElementById']('map-played'),'loserComment':document['getElementById'](_0x377a86(0x14d)),'reportError':document['getElementById']('report-error'),'reportLightbox':document[_0x377a86(0x1bf)]('report-lightbox')};Object['entries'](_0x208402)['forEach'](([_0x241c5b,_0x11fc17])=>{!_0x11fc17&&console['warn']('Element\x20\x27'+_0x241c5b+'\x27\x20not\x20found\x20in\x20the\x20DOM');});const _0x221e91=document['getElementById']('d1-mode'),_0x3a36e0=document['getElementById']('d2-mode'),_0xc49058=document['getElementById']('d3-mode');_0x221e91['addEventListener'](_0x377a86(0x196),()=>{const _0x4d66de=_0x377a86;_0x49cf11('D1'),_0x221e91['classList']['add']('active'),_0x3a36e0['classList']['remove']('active'),_0xc49058[_0x4d66de(0x1a9)][_0x4d66de(0x1b0)](_0x4d66de(0x12c));}),_0x3a36e0['addEventListener']('click',()=>{const _0x2510e2=_0x377a86;_0x49cf11('D2'),_0x3a36e0[_0x2510e2(0x1a9)]['add']('active'),_0x221e91['classList']['remove'](_0x2510e2(0x12c)),_0xc49058[_0x2510e2(0x1a9)][_0x2510e2(0x1b0)]('active');}),_0xc49058['addEventListener']('click',()=>{const _0x53c6c5=_0x377a86;_0x49cf11('D3'),_0xc49058[_0x53c6c5(0x1a9)]['add']('active'),_0x221e91['classList']['remove']('active'),_0x3a36e0['classList'][_0x53c6c5(0x1b0)]('active');});function _0x49cf11(_0x1cdcb6){const _0x2221db=_0x377a86;currentGameMode=_0x1cdcb6,console['log']('Game\x20mode\x20set\x20to:\x20'+currentGameMode),auth['currentUser']&&checkUserInLadderAndLoadOpponents(auth[_0x2221db(0x1bb)]['uid']);}setupAuthStateListener(_0x208402),setupReportForm(_0x208402),auth[_0x377a86(0x1bb)]?(console['log']('User\x20already\x20logged\x20in,\x20checking\x20D1\x20ladder\x20status'),checkUserInLadderAndLoadOpponents(auth[_0x377a86(0x1bb)][_0x377a86(0x14b)])):console['log'](_0x377a86(0x1c0));});function setupAuthStateListener(_0x3570f4){onAuthStateChanged(auth,async _0x21e188=>{_0x21e188?handleUserSignedIn(_0x21e188,_0x3570f4):handleUserSignedOut(_0x3570f4);});}async function handleUserSignedIn(_0x1ae42e,_0x20ce10){const _0x200444=a48_0x295c;if(!_0x20ce10){console[_0x200444(0x157)](_0x200444(0x178));return;}currentUserEmail=_0x1ae42e['email']||null;const _0x576649=_0x1ae42e['uid'];try{const _0x15595f=doc(db,'nonParticipants',_0x576649);try{const _0x361d83=await getDoc(_0x15595f);console['log']('Non-participant\x20check:',{'exists':_0x361d83['exists'](),'data':_0x361d83[_0x200444(0x194)]()?_0x361d83['data']():null});if(_0x361d83['exists']()&&_0x361d83['data']()['isNonParticipant']===!![]){_0x20ce10['authWarning']&&(_0x20ce10['authWarning'][_0x200444(0x1a6)]['display']='block',_0x20ce10[_0x200444(0x169)]['textContent']='Non-participants\x20cannot\x20report\x20games.');_0x20ce10[_0x200444(0x159)]&&(_0x20ce10[_0x200444(0x159)]['style']['display']=_0x200444(0x1ad));return;}}catch(_0x3b9ac1){console[_0x200444(0x145)](_0x200444(0x18e),_0x3b9ac1);}const _0x31596b=[_0x200444(0x1b7),'playersD2','playersD3',_0x200444(0x1b1),'playersCTF'];let _0x3015b7=![],_0x334591='';for(const _0x572930 of _0x31596b){try{const _0x5ea3fe=doc(db,_0x572930,_0x576649),_0x55e139=await getDoc(_0x5ea3fe);if(_0x55e139['exists']()){_0x3015b7=!![],_0x334591=_0x55e139['data']()['username'],console['log']('User\x20found\x20in\x20collection\x20'+_0x572930+'\x20with\x20username:\x20'+_0x334591);if(_0x572930==='players'&&currentGameMode!=='D1'){currentGameMode='D1';const _0x57f3ad=document['getElementById'](_0x200444(0x1b8)),_0x95446c=document[_0x200444(0x1bf)]('d2-mode'),_0x54d7df=document['getElementById'](_0x200444(0x1a1));_0x57f3ad['classList']['add'](_0x200444(0x12c)),_0x95446c['classList'][_0x200444(0x1b0)]('active'),_0x54d7df['classList']['remove'](_0x200444(0x12c));}else{if(_0x572930==='playersD2'&&currentGameMode!=='D2'){currentGameMode='D2';const _0x38332d=document[_0x200444(0x1bf)]('d1-mode'),_0xbf401f=document['getElementById']('d2-mode'),_0x3f47e7=document[_0x200444(0x1bf)]('d3-mode');_0xbf401f['classList']['add'](_0x200444(0x12c)),_0x38332d['classList']['remove']('active'),_0x3f47e7[_0x200444(0x1a9)][_0x200444(0x1b0)]('active');}}break;}}catch(_0xa53eaf){console['warn'](_0x200444(0x160)+_0x572930+_0x200444(0x16f),_0xa53eaf);}}if(!_0x3015b7){_0x20ce10[_0x200444(0x169)]&&(_0x20ce10['authWarning']['style']['display']='block',_0x20ce10['authWarning']['textContent']='You\x20are\x20not\x20registered\x20in\x20any\x20ladder.');_0x20ce10['reportForm']&&(_0x20ce10['reportForm'][_0x200444(0x1a6)]['display']='none');return;}const _0xa5fc90=await checkUserInLadderAndLoadOpponents(_0x576649);if(!_0xa5fc90){console['warn']('User\x20is\x20not\x20in\x20the\x20'+currentGameMode+'\x20ladder.\x20Checking\x20other\x20ladders.');for(const _0x4238f5 of['players','playersD2',_0x200444(0x150)]){if(_0x4238f5===(currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':'playersD3'))continue;const _0x16d663=doc(db,_0x4238f5,_0x576649);try{const _0x4909f9=await getDoc(_0x16d663);if(_0x4909f9['exists']()){const _0x132820=_0x4238f5===_0x200444(0x1b7)?'D1':_0x4238f5==='playersD2'?'D2':'D3';console[_0x200444(0x188)]('User\x20found\x20in\x20'+_0x4238f5+_0x200444(0x13b)+_0x132820+_0x200444(0x18d));const _0x254492=document['getElementById']('d1-mode'),_0x32a3d6=document[_0x200444(0x1bf)]('d2-mode'),_0x3fc767=document[_0x200444(0x1bf)](_0x200444(0x1a1));if(_0x132820==='D1')_0x254492['classList']['add'](_0x200444(0x12c)),_0x32a3d6['classList']['remove'](_0x200444(0x12c)),_0x3fc767[_0x200444(0x1a9)]['remove']('active');else _0x132820==='D2'?(_0x32a3d6['classList']['add']('active'),_0x254492['classList'][_0x200444(0x1b0)]('active'),_0x3fc767['classList']['remove']('active')):(_0x3fc767['classList']['add']('active'),_0x254492['classList']['remove'](_0x200444(0x12c)),_0x32a3d6['classList'][_0x200444(0x1b0)](_0x200444(0x12c)));currentGameMode=_0x132820,await checkUserInLadderAndLoadOpponents(_0x576649);break;}}catch(_0x22649a){console[_0x200444(0x145)](_0x200444(0x160)+_0x4238f5+':',_0x22649a);}}}}catch(_0x7e9a5a){console['error']('Error\x20during\x20sign-in\x20handling:',_0x7e9a5a);}}function handleUserSignedOut(_0x441d33){const _0x47f312=a48_0x295c;_0x441d33[_0x47f312(0x169)]['style']['display']='block',_0x441d33['reportForm']['style'][_0x47f312(0x131)]=_0x47f312(0x1ad),currentUserEmail=null;}async function updateUserDisplay(_0x1a23c5,_0x25013d){const _0x100b2a=a48_0x295c,_0x337487=collection(db,'players'),_0x45793e=query(_0x337487,where('email','==',_0x1a23c5)),_0x3fc3c9=await getDocs(_0x45793e);if(!_0x3fc3c9[_0x100b2a(0x14f)]){const _0x29d221=_0x3fc3c9['docs'][0x0]['data']()['username'];_0x25013d['loserUsername']['textContent']=_0x29d221;}}async function populateWinnerDropdown(_0x4c044e){const _0x2ed408=a48_0x295c;try{const _0x20ab20=collection(db,'players'),_0x319e90=await getDocs(_0x20ab20);_0x4c044e[_0x2ed408(0x15b)]='<option\x20value=\x22\x22>Select\x20Winner</option>',!_0x319e90[_0x2ed408(0x14f)]&&_0x319e90['forEach'](_0x100356=>{const _0x4e531c=_0x2ed408,_0x95b3d5=_0x100356['data']();if(_0x95b3d5[_0x4e531c(0x19d)]!==currentUserEmail){const _0x4bcce9=document[_0x4e531c(0x1bd)]('option');_0x4bcce9[_0x4e531c(0x173)]=_0x95b3d5[_0x4e531c(0x19d)],_0x4bcce9['textContent']=_0x95b3d5[_0x4e531c(0x158)],_0x4c044e['appendChild'](_0x4bcce9);}});}catch(_0x3aa048){console['error']('Error\x20populating\x20winner\x20dropdown:',_0x3aa048);throw _0x3aa048;}}function setupReportForm(_0x57f33a){const _0x159191=a48_0x295c;if(!_0x57f33a[_0x159191(0x159)])return;_0x57f33a[_0x159191(0x159)][_0x159191(0x192)](_0x159191(0x1b3),async _0x11a53c=>{const _0x25cf2d=_0x159191;_0x11a53c['preventDefault']();try{await submitReport(_0x57f33a),_0x57f33a[_0x25cf2d(0x159)][_0x25cf2d(0x18f)](),alert('Game\x20reported\x20successfully.');}catch(_0x465210){console['error']('Error\x20submitting\x20report:',_0x465210),_0x57f33a['reportError'][_0x25cf2d(0x1a7)]='Error\x20reporting\x20game.\x20Please\x20try\x20again.';}});}async function submitReport(_0x5021f9){const _0x3b5df3=a48_0x295c,_0x14ec83=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x387857=collection(db,_0x14ec83),_0xb14386=doc(_0x387857);try{const _0x1bff5d=auth['currentUser'];if(!_0x1bff5d)throw new Error(_0x3b5df3(0x1c8));const _0x5baf1f=_0x1bff5d['uid'],_0x56785d=currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':'playersD3',_0x2266e3=await getDoc(doc(db,_0x56785d,_0x5baf1f));if(!_0x2266e3[_0x3b5df3(0x194)]())throw new Error('Your\x20player\x20profile\x20not\x20found');const _0x2c3c4e=document[_0x3b5df3(0x1bf)]('subgame-type'),_0x1ea535=_0x5021f9['winnerUsername']['value'];if(!_0x1ea535)throw new Error('Please\x20select\x20an\x20opponent');const _0x5e5f7b=query(collection(db,_0x56785d),where('username','==',_0x1ea535)),_0x316265=await getDocs(_0x5e5f7b);if(_0x316265['empty'])throw new Error('Selected\x20opponent\x20not\x20found');const _0x35f77d=_0x316265['docs'][0x0]['data'](),_0x22720e=_0x316265['docs'][0x0]['id'],_0x411643={'matchId':_0xb14386['id'],'loserUsername':_0x2266e3['data']()['username'],'loserId':_0x5baf1f,'winnerUsername':_0x35f77d['username'],'winnerId':_0x22720e,'loserScore':_0x5021f9['loserScore']['value'],'loserSuicides':_0x5021f9['suicides']['value'],'mapPlayed':_0x5021f9['mapPlayed']['value'],'loserComment':_0x5021f9['loserComment']['value'],'subgameType':_0x2c3c4e?_0x2c3c4e['value']:'','gameMode':currentGameMode,'approved':![],'createdAt':serverTimestamp(),'winnerOldElo':_0x35f77d['eloRating']||null,'losersOldElo':_0x2266e3['data']()['eloRating']||null};await setDoc(_0xb14386,_0x411643),console[_0x3b5df3(0x188)]('Match\x20reported\x20in\x20'+_0x14ec83+'\x20with\x20ID:\x20'+_0xb14386['id']),_0x5021f9[_0x3b5df3(0x180)]['textContent']=_0x3b5df3(0x149),_0x5021f9['reportError'][_0x3b5df3(0x1a6)][_0x3b5df3(0x185)]='green',updatePendingMatchNotification();}catch(_0x3294a3){console['error']('Error\x20submitting\x20report:',_0x3294a3),_0x5021f9['reportError'][_0x3b5df3(0x1a7)]=_0x3b5df3(0x1ba)+_0x3294a3['message'],_0x5021f9['reportError']['style'][_0x3b5df3(0x185)]='red';throw _0x3294a3;}}async function checkForOutstandingReports(_0x2c55a8,_0x67a236,_0x8dbaec=null){const _0x535dd0=a48_0x295c;console['log']('Checking\x20reports\x20for\x20user:\x20'+_0x2c55a8+'\x20in\x20'+(_0x8dbaec||'default\x20collection'));const _0x2f4ac2=_0x8dbaec||(currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3');console[_0x535dd0(0x188)]('Using\x20collection:\x20'+_0x2f4ac2);try{const _0x58c664=auth[_0x535dd0(0x1bb)];if(!_0x58c664){console['log']('No\x20authenticated\x20user\x20found');return;}const _0x2ed5dd=_0x58c664['uid'],_0x16b102=collection(db,_0x2f4ac2),_0x4478d3=query(_0x16b102,where('winnerId','==',_0x2ed5dd),where('approved','==',![]));let _0x34cf98=await getDocs(_0x4478d3);console['log']('Query\x20by\x20winnerId\x20results:\x20'+_0x34cf98['size']+'\x20matches\x20found');if(_0x34cf98[_0x535dd0(0x14f)]&&_0x58c664['email']){console['log']('No\x20matches\x20found\x20by\x20winnerId,\x20trying\x20winnerEmail');const _0x164f53=query(_0x16b102,where(_0x535dd0(0x155),'==',_0x58c664['email']),where('approved','==',![]));_0x34cf98=await getDocs(_0x164f53),console['log']('Query\x20by\x20winnerEmail\x20results:\x20'+_0x34cf98[_0x535dd0(0x198)]+_0x535dd0(0x13d));}if(_0x34cf98[_0x535dd0(0x14f)]){console[_0x535dd0(0x188)]('No\x20matches\x20found\x20by\x20email\x20either,\x20trying\x20winnerUsername');const _0x32d07d=currentGameMode==='D1'?_0x535dd0(0x1b7):'playersD2',_0x129b2e=await getDoc(doc(db,_0x32d07d,_0x2ed5dd));if(_0x129b2e[_0x535dd0(0x194)]()&&_0x129b2e['data']()['username']){const _0xc3953c=_0x129b2e['data']()['username'],_0x151030=query(_0x16b102,where('winnerUsername','==',_0xc3953c),where(_0x535dd0(0x15a),'==',![]));_0x34cf98=await getDocs(_0x151030),console[_0x535dd0(0x188)]('Query\x20by\x20winnerUsername\x20results:\x20'+_0x34cf98['size']+'\x20matches\x20found');}}if(!_0x34cf98['empty']){const _0x3e42ed=_0x34cf98['docs'][0x0][_0x535dd0(0x1bc)]();return console['log'](_0x535dd0(0x148),_0x3e42ed),_0x3e42ed['id']=_0x34cf98['docs'][0x0]['id'],autoFillReportForm(_0x3e42ed),updateNotificationDot(!![]),!![];}else return console['log']('No\x20pending\x20matches\x20found\x20for\x20this\x20user'),updateNotificationDot(![]),![];}catch(_0x5aaa8a){console['error'](_0x535dd0(0x15f),_0x5aaa8a);}}function autoFillReportForm(_0x5b5b57){const _0xc7e7fb=a48_0x295c;console[_0xc7e7fb(0x188)](_0xc7e7fb(0x18c),_0x5b5b57);if(_0x5b5b57){const _0x24acc5=parseInt(_0x5b5b57['loserScore']||'0'),_0x151ec5=_0x24acc5<0x12?0x14:_0x24acc5+0x2,_0x17c3be=_0x5b5b57['gameMode']||currentGameMode,_0x2c1854=_0x17c3be==='D1'?'players':_0x17c3be==='D2'?_0xc7e7fb(0x16d):_0xc7e7fb(0x150);console['log'](_0xc7e7fb(0x197)+_0x2c1854+'\x20for\x20game\x20mode:\x20'+_0x17c3be);let _0x4454dd;_0x5b5b57['winnerId']?_0x4454dd=getDoc(doc(db,_0x2c1854,_0x5b5b57['winnerId']))['then'](_0x544c19=>_0x544c19[_0xc7e7fb(0x194)]()?{'id':_0x544c19['id'],'data':_0x544c19['data']()}:null):_0x4454dd=getDocs(query(collection(db,_0x2c1854),where(_0xc7e7fb(0x158),'==',_0x5b5b57[_0xc7e7fb(0x13c)])))[_0xc7e7fb(0x1a5)](_0x393213=>!_0x393213[_0xc7e7fb(0x14f)]?{'id':_0x393213['docs'][0x0]['id'],'data':_0x393213['docs'][0x0]['data']()}:null);let _0x35fcb7;_0x5b5b57['loserId']?_0x35fcb7=getDoc(doc(db,_0x2c1854,_0x5b5b57[_0xc7e7fb(0x171)]))[_0xc7e7fb(0x1a5)](_0x57957c=>_0x57957c['exists']()?{'id':_0x57957c['id'],'data':_0x57957c[_0xc7e7fb(0x1bc)]()}:null):_0x35fcb7=getDocs(query(collection(db,_0x2c1854),where('username','==',_0x5b5b57['loserUsername'])))['then'](_0x36a5be=>!_0x36a5be['empty']?{'id':_0x36a5be['docs'][0x0]['id'],'data':_0x36a5be['docs'][0x0]['data']()}:null),Promise['all']([_0x4454dd,_0x35fcb7])['then'](([_0x2dfd60,_0xe184f3])=>{const _0x1326a4=_0xc7e7fb;if(!_0x2dfd60){console['error']('No\x20winner\x20found\x20for\x20this\x20match'),alert(_0x1326a4(0x12b));return;}if(!_0xe184f3){console['error'](_0x1326a4(0x170)),alert('Error:\x20Loser\x20data\x20not\x20found.');return;}const _0x1d556b=_0x5b5b57[_0x1326a4(0x174)]!=null?_0x5b5b57['winnerOldElo']:_0x2dfd60['data']['eloRating'],_0xdcb41=_0x5b5b57['losersOldElo']!=null?_0x5b5b57[_0x1326a4(0x1ac)]:_0xe184f3['data']['eloRating'],_0x378989=_0x2dfd60[_0x1326a4(0x1bc)]['username'],_0x4d14eb=_0xe184f3['data']['username'];console[_0x1326a4(0x188)]('Winner:\x20'+_0x378989+'\x20(ELO:\x20'+_0x1d556b+_0x1326a4(0x19c)+_0x4d14eb+_0x1326a4(0x1c6)+_0xdcb41+')');const _0x41ebff=document['getElementById'](_0x1326a4(0x147));if(!_0x41ebff){console['error']('Lightbox\x20element\x20not\x20found');return;}document[_0x1326a4(0x1bf)]('lightbox-winner')[_0x1326a4(0x1a7)]=_0x378989,document[_0x1326a4(0x1bf)](_0x1326a4(0x138))['textContent']=_0x4d14eb,document['getElementById'](_0x1326a4(0x164))['textContent']=_0x5b5b57[_0x1326a4(0x153)]||'0',document['getElementById'](_0x1326a4(0x182))['textContent']=_0x5b5b57['loserSuicides']||'0',document['getElementById']('lightbox-map')['textContent']=_0x5b5b57['mapPlayed']||_0x1326a4(0x189),document[_0x1326a4(0x1bf)](_0x1326a4(0x132))['textContent']=_0x5b5b57['loserComment']||'No\x20comment',document[_0x1326a4(0x1bf)]('lightbox-subgame')[_0x1326a4(0x1a7)]=_0x5b5b57[_0x1326a4(0x135)]||'Standard\x20Match';const _0x246d74=document['getElementById']('winner-score');_0x246d74&&(_0x246d74['value']=_0x151ec5,_0x246d74['readOnly']=!![],_0x246d74['style']['backgroundColor']=_0x1326a4(0x16a));showLightbox();const _0x394ba5=document['querySelector']('.lightbox-buttons');if(_0x394ba5){console[_0x1326a4(0x188)]('Found\x20buttons\x20container:',_0x394ba5);const _0x29ad67=document['getElementById']('reject-button');_0x29ad67&&_0x29ad67['remove']();const _0x52a304=document[_0x1326a4(0x1bd)]('button');_0x52a304['id']='reject-button',_0x52a304['className']='button\x20danger-button',_0x52a304[_0x1326a4(0x1a7)]='Reject\x20Match',_0x52a304['style']['backgroundColor']='#d32f2f',_0x52a304['style']['color']='white',_0x52a304[_0x1326a4(0x1a6)]['marginRight']=_0x1326a4(0x140),_0x52a304['style']['padding']='8px\x2016px',_0x52a304['style'][_0x1326a4(0x195)]='none',_0x52a304['style'][_0x1326a4(0x16b)]='4px',_0x52a304[_0x1326a4(0x1a6)][_0x1326a4(0x151)]=_0x1326a4(0x186),_0x52a304[_0x1326a4(0x1a6)][_0x1326a4(0x1c2)]='bold',_0x394ba5['prepend'](_0x52a304),console[_0x1326a4(0x188)](_0x1326a4(0x1a0),_0x52a304);}const _0x421163=document['getElementById']('approve-button'),_0xaf2e37=document['getElementById']('reject-button'),_0x2a8084=document[_0x1326a4(0x1bf)]('cancel-button');if(_0x421163){const _0x1c1576=_0x421163['cloneNode'](!![]);_0x421163['parentNode'][_0x1326a4(0x143)](_0x1c1576,_0x421163),_0x1c1576['addEventListener']('click',async function(){const _0x420ce0=_0x1326a4;try{const _0x419362=document['getElementById']('winner-score')['value'],_0x172aa1=document[_0x420ce0(0x1bf)](_0x420ce0(0x172))['value']||'0',_0x26417a=document['getElementById'](_0x420ce0(0x165))['value']||'';console['log'](_0x420ce0(0x191),{'uid':auth['currentUser']?.['uid'],'email':auth['currentUser']?.[_0x420ce0(0x19d)],'isAdmin':auth['currentUser']?.[_0x420ce0(0x19d)]==='admin@ladder.com'||auth['currentUser']?.['email']==='brian2af@outlook.com'});const _0x4aa640=_0x5b5b57['gameMode']||currentGameMode;if(_0x4aa640==='D3')await approveReportD3(_0x5b5b57['id'],_0x419362,_0x172aa1,_0x26417a);else _0x4aa640==='D2'?await approveReportD2(_0x5b5b57['id'],_0x419362,_0x172aa1,_0x26417a):await approveReport(_0x5b5b57['id'],_0x419362,_0x172aa1,_0x26417a);document['getElementById']('report-lightbox')['style'][_0x420ce0(0x131)]='none',alert('Match\x20approved\x20successfully'),updatePendingMatchNotification(),location['reload']();const _0x4093a6=_0x4aa640==='D1'?'players':'playersD2',_0x568c1c=doc(db,_0x4093a6,_0x2dfd60['id']),_0x333881=doc(db,_0x4093a6,_0xe184f3['id']),[_0x32d7df,_0xbbdd45]=await Promise['all']([getDoc(_0x568c1c),getDoc(_0x333881)]);if(_0x32d7df[_0x420ce0(0x194)]()&&_0xbbdd45['exists']()){const _0x11c3b9=_0x32d7df['data'](),_0x3ff28c=_0xbbdd45['data']();_0x11c3b9['position']>_0x3ff28c['position']?(await updateDoc(_0x568c1c,{'position':_0x3ff28c['position']}),console[_0x420ce0(0x188)]('Winner\x20'+_0x11c3b9['username']+'\x20moved\x20to\x20position\x20'+_0x3ff28c['position'])):console[_0x420ce0(0x188)]('No\x20position\x20change\x20needed;\x20winner\x20is\x20already\x20above\x20the\x20loser.');}}catch(_0x198165){console['error']('Error\x20approving\x20report:',_0x198165),alert(_0x420ce0(0x19f)+_0x198165['message']);}});}if(_0xaf2e37){const _0x9e734e=_0xaf2e37[_0x1326a4(0x168)](!![]);_0xaf2e37['parentNode']['replaceChild'](_0x9e734e,_0xaf2e37),_0x9e734e['addEventListener'](_0x1326a4(0x196),async function(){const _0x32be8c=_0x1326a4;try{const _0x592d92=prompt(_0x32be8c(0x18b),'');if(_0x592d92===null)return;await rejectReport(_0x5b5b57['id'],_0x592d92),hideLightbox(),alert(_0x32be8c(0x1c5)),updatePendingMatchNotification(),location['reload']();}catch(_0x37103b){console['error'](_0x32be8c(0x154),_0x37103b),alert(_0x32be8c(0x137)+_0x37103b['message']);}});}if(_0x2a8084){const _0x4e90fd=_0x2a8084['cloneNode'](!![]);_0x2a8084['parentNode'][_0x1326a4(0x143)](_0x4e90fd,_0x2a8084),_0x4e90fd['addEventListener'](_0x1326a4(0x196),hideLightbox);}})['catch'](_0x4c1c72=>{const _0x720289=_0xc7e7fb;console[_0x720289(0x157)]('Error\x20processing\x20player\x20data:',_0x4c1c72),alert(_0x720289(0x15c));});}}function showLightbox(){const _0x1b0357=a48_0x295c;console['log']('Showing\x20lightbox');const _0xb66f90=document[_0x1b0357(0x1bf)]('report-lightbox');if(!_0xb66f90){console['error'](_0x1b0357(0x1ab));return;}_0xb66f90[_0x1b0357(0x1a9)][_0x1b0357(0x13f)](_0x1b0357(0x175));}function hideLightbox(){const _0x370ff1=a48_0x295c,_0x253ff0=document['getElementById']('report-lightbox');_0x253ff0['classList'][_0x370ff1(0x1b0)]('show');}async function rejectReport(_0x568496,_0x42b9cd){const _0x4d09fb=a48_0x295c;try{const _0x4afac2=currentGameMode==='D1'?_0x4d09fb(0x144):currentGameMode==='D2'?'pendingMatchesD2':_0x4d09fb(0x133),_0x3ddc11=currentGameMode==='D1'?'RejectedD1':currentGameMode==='D2'?'RejectedD2':_0x4d09fb(0x187);console['log'](_0x4d09fb(0x18a)+_0x568496+'\x20from\x20'+_0x4afac2+_0x4d09fb(0x1c9)+_0x3ddc11);const _0x2d2f3d=auth['currentUser'];if(!_0x2d2f3d)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20reject\x20a\x20match');const _0x22a1ed=doc(db,_0x4afac2,_0x568496),_0x38bdd7=await getDoc(_0x22a1ed);if(!_0x38bdd7['exists']())throw new Error('Match\x20report\x20not\x20found');const _0x5e2be8=_0x38bdd7['data'](),_0x54b909=_0x5e2be8['winnerId']&&_0x5e2be8[_0x4d09fb(0x19a)]===_0x2d2f3d['uid']||_0x5e2be8['winnerEmail']&&_0x5e2be8[_0x4d09fb(0x155)]===_0x2d2f3d['email']||_0x5e2be8['winnerUsername']&&_0x5e2be8['winnerUsername']===await getUsernameFromId(_0x2d2f3d['uid']);if(!_0x54b909)throw new Error(_0x4d09fb(0x14e));const _0xe5d64f={..._0x5e2be8,'rejectedAt':serverTimestamp(),'rejectedBy':_0x2d2f3d['uid'],'rejectionReason':_0x42b9cd||'No\x20reason\x20provided','originalDocumentId':_0x568496},_0x1b1216=doc(collection(db,_0x3ddc11));return await setDoc(_0x1b1216,_0xe5d64f),await deleteDoc(_0x22a1ed),console['log'](_0x4d09fb(0x193)+_0x568496+'\x20rejected\x20successfully'),updatePendingMatchNotification(),!![];}catch(_0x5e2bc1){console[_0x4d09fb(0x157)](_0x4d09fb(0x14a),_0x5e2bc1);throw _0x5e2bc1;}}async function getUsernameFromId(_0x407f12){const _0x4de4e3=a48_0x295c,_0xabfc2b=await getDoc(doc(db,'players',_0x407f12));if(_0xabfc2b[_0x4de4e3(0x194)]())return _0xabfc2b[_0x4de4e3(0x1bc)]()['username'];const _0x36807c=await getDoc(doc(db,'playersD2',_0x407f12));if(_0x36807c[_0x4de4e3(0x194)]())return _0x36807c['data']()['username'];return null;}async function loadOpponentsList(_0x1ac990){const _0x54e3ba=a48_0x295c;try{const _0x8651b3=document['getElementById']('report-error'),_0x110728=document[_0x54e3ba(0x1bf)](_0x54e3ba(0x161)),_0x239a8d=document[_0x54e3ba(0x1bf)](_0x54e3ba(0x1b2));if(!_0x8651b3||!_0x110728||!_0x239a8d){console[_0x54e3ba(0x157)]('Required\x20elements\x20not\x20found\x20for\x20loadOpponentsList');return;}const _0x1db107=currentGameMode==='D1'?'players':currentGameMode==='D2'?_0x54e3ba(0x16d):_0x54e3ba(0x150);console['log']('Loading\x20opponents\x20from\x20collection:\x20'+_0x1db107);const _0x201c16=await getDoc(doc(db,_0x1db107,_0x1ac990));if(!_0x201c16['exists']()){_0x8651b3['textContent']=_0x54e3ba(0x179)+currentGameMode+'\x20ladder.',_0x8651b3['style']['color']=_0x54e3ba(0x17c),_0x110728['textContent']='Not\x20registered\x20in\x20this\x20ladder',_0x239a8d[_0x54e3ba(0x1b6)]=!![];return;}const _0x539a8a=_0x201c16['data'](),_0x45b82f=_0x539a8a['username'];_0x110728[_0x54e3ba(0x1a7)]='You\x20('+_0x45b82f+')',_0x8651b3['textContent']='',_0x239a8d['disabled']=![];const _0x34b186=collection(db,_0x1db107),_0x4cae33=await getDocs(_0x34b186);if(_0x4cae33[_0x54e3ba(0x14f)]){console['log']('No\x20opponents\x20available');return;}_0x239a8d['innerHTML']=_0x54e3ba(0x183),_0x4cae33['forEach'](_0x4490a3=>{const _0x290270=_0x54e3ba,_0x560922=_0x4490a3['data']();if(_0x4490a3['id']!==_0x1ac990){const _0x4e5186=document['createElement'](_0x290270(0x176));_0x4e5186['value']=_0x560922[_0x290270(0x158)],_0x4e5186['textContent']=_0x560922[_0x290270(0x158)],_0x4e5186['dataset']['uid']=_0x4490a3['id'],_0x239a8d['appendChild'](_0x4e5186);}});}catch(_0x400faf){console[_0x54e3ba(0x157)]('Error\x20loading\x20opponents\x20list:',_0x400faf),document['getElementById']('report-error')['textContent']='Error\x20loading\x20opponents.\x20Please\x20try\x20again\x20later.',document['getElementById'](_0x54e3ba(0x190))['style'][_0x54e3ba(0x185)]=_0x54e3ba(0x17c);}}async function checkUserInLadderAndLoadOpponents(_0x54ae54){const _0x2a2ec9=a48_0x295c;try{const _0x2b27b0=document['getElementById']('report-error'),_0x2b3114=document['getElementById'](_0x2a2ec9(0x161)),_0x49c04f=document['getElementById']('winner-username'),_0x578e3c=document['getElementById']('report-form'),_0x407afb=document[_0x2a2ec9(0x1bf)]('auth-warning');_0x2b27b0['textContent']='Checking\x20if\x20you\x20are\x20registered\x20in\x20'+currentGameMode+'\x20ladder...',_0x2b27b0[_0x2a2ec9(0x1a6)]['color']=_0x2a2ec9(0x1a3);const _0x263c35=currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':'playersD3';console['log'](_0x2a2ec9(0x156)+_0x263c35);const _0x76e1f5=await getDoc(doc(db,_0x263c35,_0x54ae54));if(!_0x76e1f5[_0x2a2ec9(0x194)]())return _0x2b27b0['textContent']='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+'\x20ladder.',_0x2b27b0['style']['color']='red',_0x2b3114['textContent']='Not\x20registered\x20in\x20this\x20ladder',_0x49c04f[_0x2a2ec9(0x1b6)]=!![],_0x49c04f['innerHTML']='<option\x20value=\x22\x22>Select\x20Opponent</option>',_0x407afb['style']['display']='block',_0x407afb['textContent']='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+'\x20ladder.',![];_0x2b27b0['textContent']='',_0x407afb[_0x2a2ec9(0x1a6)]['display']='none';const _0x2551f2=_0x76e1f5[_0x2a2ec9(0x1bc)](),_0x54c6d1=_0x2551f2['username'];_0x2b3114['textContent']='You\x20('+_0x54c6d1+')',_0x49c04f['disabled']=![],_0x578e3c['style']['display']='block',await loadOpponentsList(_0x54ae54);const _0x2ccf51=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3';return await checkForOutstandingReports(_0x2551f2[_0x2a2ec9(0x19d)],null,_0x2ccf51),!![];}catch(_0x4e7f76){return console['error']('Error\x20checking\x20if\x20user\x20is\x20in\x20ladder:',_0x4e7f76),document['getElementById'](_0x2a2ec9(0x190))['textContent']='Error\x20checking\x20ladder\x20membership.\x20Please\x20try\x20again\x20later.',document['getElementById']('report-error')[_0x2a2ec9(0x1a6)]['color']=_0x2a2ec9(0x17c),![];}}export async function fetchOutstandingMatches(){const _0x452c7c=a48_0x295c,_0x3d74a6=auth['currentUser'];if(!_0x3d74a6)return[];try{const _0x17e7fd=[],_0x2f7deb=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x3f33b8=collection(db,_0x2f7deb),_0x4ac7b7=[query(_0x3f33b8,where('loserId','==',_0x3d74a6['uid']),where('approved','==',![])),query(_0x3f33b8,where('loserEmail','==',_0x3d74a6['email']),where('approved','==',![])),query(_0x3f33b8,where(_0x452c7c(0x19a),'==',_0x3d74a6['uid']),where('approved','==',![])),query(_0x3f33b8,where('winnerEmail','==',_0x3d74a6[_0x452c7c(0x19d)]),where('approved','==',![]))],_0x4277a4=currentGameMode==='D1'?'players':currentGameMode==='D2'?_0x452c7c(0x16d):'playersD3',_0x3e8cc1=await getDocs(query(collection(db,_0x4277a4),where(_0x452c7c(0x19d),'==',_0x3d74a6[_0x452c7c(0x19d)])));let _0x45a55d=null;!_0x3e8cc1['empty']&&(_0x45a55d=_0x3e8cc1['docs'][0x0]['data']()['username'],_0x45a55d&&_0x4ac7b7['push'](query(_0x3f33b8,where('loserUsername','==',_0x45a55d),where('approved','==',![])),query(_0x3f33b8,where('winnerUsername','==',_0x45a55d),where(_0x452c7c(0x15a),'==',![]))));for(const _0x9bae33 of _0x4ac7b7){const _0x57cef2=await getDocs(_0x9bae33);!_0x57cef2['empty']&&_0x57cef2['forEach'](_0x515db6=>{const _0x5cfd8e=_0x452c7c;!_0x17e7fd[_0x5cfd8e(0x139)](_0x33ff17=>_0x33ff17['id']===_0x515db6['id'])&&_0x17e7fd[_0x5cfd8e(0x1c7)]({'id':_0x515db6['id'],..._0x515db6[_0x5cfd8e(0x1bc)]()});});}return _0x17e7fd['sort']((_0x53234b,_0x2914a5)=>{const _0xe295d1=_0x53234b['createdAt']?.['toDate']()||new Date(0x0),_0x456a1f=_0x2914a5['createdAt']?.['toDate']()||new Date(0x0);return _0x456a1f-_0xe295d1;}),outstandingMatches=_0x17e7fd,_0x17e7fd;}catch(_0x381858){return console['error']('Error\x20fetching\x20outstanding\x20matches:',_0x381858),[];}}export function renderOutstandingMatches(){const _0x35b7de=a48_0x295c,_0x56acf9=document['getElementById']('outstanding-matches-list');if(outstandingMatches['length']===0x0){_0x56acf9['innerHTML']=_0x35b7de(0x141);return;}let _0x53f118='';const _0x10170d=auth[_0x35b7de(0x1bb)];if(!_0x10170d)return;outstandingMatches['forEach'](_0x2ec7ee=>{const _0x35317e=_0x35b7de,_0x2a2bd9=_0x2ec7ee['createdAt']?.['toDate']()?_0x2ec7ee['createdAt']['toDate']()[_0x35317e(0x16e)]():'Unknown\x20date',_0x1fef1f=_0x2ec7ee['loserEmail']===_0x10170d['email']||_0x2ec7ee[_0x35317e(0x171)]===_0x10170d['uid'];_0x53f118+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-item\x22\x20data-id=\x22'+_0x2ec7ee['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>'+(_0x2ec7ee['winnerUsername']||_0x35317e(0x142))+_0x35317e(0x13e)+(_0x2ec7ee['loserUsername']||'Loser')+_0x35317e(0x166)+(_0x2ec7ee['mapPlayed']||'Unknown')+_0x35317e(0x1c4)+_0x2a2bd9+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Score:\x20?\x20-\x20'+(_0x2ec7ee['loserScore']||'0')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20view-detail-btn\x22\x20data-id=\x22'+_0x2ec7ee['id']+'\x22>View\x20Details</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x1fef1f?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20edit-report-btn\x22\x20data-id=\x22'+_0x2ec7ee['id']+'\x22>Edit\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20danger-button\x20rescind-report-btn\x22\x20data-id=\x22'+_0x2ec7ee['id']+'\x22>Rescind\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x56acf9[_0x35b7de(0x15b)]=_0x53f118,document['querySelectorAll']('.view-detail-btn')['forEach'](_0xf2a210=>{_0xf2a210['addEventListener']('click',function(){const _0x221fd8=a48_0x295c,_0x39fc3a=this['getAttribute'](_0x221fd8(0x136)),_0x6d6e9f=outstandingMatches['find'](_0x1b5cfd=>_0x1b5cfd['id']===_0x39fc3a);document['getElementById']('outstanding-modal')['classList']['remove']('show'),showMatchLightbox(_0x6d6e9f);});}),document['querySelectorAll']('.edit-report-btn')['forEach'](_0x24ed7e=>{_0x24ed7e['addEventListener']('click',function(){const _0x287e9a=a48_0x295c,_0x5599da=this[_0x287e9a(0x14c)]('data-id'),_0x231d32=outstandingMatches['find'](_0x3226ef=>_0x3226ef['id']===_0x5599da);document['getElementById']('outstanding-modal')['classList']['remove']('show'),editReport(_0x231d32);});}),document['querySelectorAll']('.rescind-report-btn')['forEach'](_0x22175f=>{const _0x3fc313=_0x35b7de;_0x22175f['addEventListener'](_0x3fc313(0x196),function(){const _0x585690=_0x3fc313,_0x635d36=this[_0x585690(0x14c)](_0x585690(0x136)),_0x3afc10=outstandingMatches['find'](_0x221162=>_0x221162['id']===_0x635d36);confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20rescind\x20this\x20match\x20report\x20against\x20'+(_0x3afc10[_0x585690(0x13c)]||'opponent')+'?')&&rescindReport(_0x3afc10);});});}function a48_0x1f55(){const _0x9b8755=['Error:\x20Winner\x20data\x20not\x20found.','active','loserSuicides','rescindReport','report-form','from','display','lightbox-comment','pendingMatchesD3','console','subgameType','data-id','Error\x20rejecting\x20match:\x20','lightbox-loser','some','prototype',',\x20switching\x20to\x20','winnerUsername','\x20matches\x20found','\x20vs\x20','add','10px','<p>No\x20outstanding\x20matches\x20found\x20in\x20the\x20current\x20game\x20mode.</p>','Winner','replaceChild','pendingMatches','warn','Cancel\x20Edit','report-lightbox','Found\x20pending\x20match:','Game\x20reported\x20successfully!','Error\x20rejecting\x20match:','uid','getAttribute','loser-comment','Only\x20the\x20winner\x20of\x20the\x20match\x20can\x20reject\x20it','empty','playersD3','cursor','{}.constructor(\x22return\x20this\x22)(\x20)','loserScore','Error\x20rejecting\x20report:','winnerEmail','Checking\x20if\x20user\x20exists\x20in\x20collection:\x20','error','username','reportForm','approved','innerHTML','Error\x20fetching\x20player\x20data.\x20Please\x20try\x20again.','loser-score','data-edit-id','Error\x20checking\x20outstanding\x20reports:','Error\x20checking\x20','loser-username','close-outstanding-btn','auth-warning','lightbox-loser-score','winner-comment','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Map:\x20','Report\x20has\x20been\x20successfully\x20rescinded.','cloneNode','authWarning','rgba(255,\x20255,\x20255,\x200.05)','borderRadius','scrollIntoView','playersD2','toLocaleDateString','\x20collection:','No\x20loser\x20found\x20for\x20this\x20match','loserId','winner-suicides','value','winnerOldElo','show','option','cancel-edit-btn','Elements\x20object\x20is\x20null\x20or\x20undefined','You\x20are\x20not\x20registered\x20in\x20the\x20','preventDefault','Failed\x20to\x20update\x20report.\x20Please\x20try\x20again.','red','constructor','setAttribute','view-outstanding-btn','reportError','text','lightbox-suicides','<option\x20value=\x22\x22>Select\x20Opponent</option>','pendingMatchesD2','color','pointer','RejectedD3','log','Not\x20specified','Rejecting\x20match\x20','Please\x20provide\x20a\x20reason\x20for\x20rejecting\x20this\x20match\x20report:','Report\x20Data\x20in\x20autoFillReportForm:','\x20mode','Error\x20checking\x20non-participant\x20status:','reset','report-error','Current\x20user\x20info:','addEventListener','Match\x20','exists','border','click','Using\x20players\x20collection:\x20','size','outstanding-matches-list','winnerId','Report\x20Game','),\x20Loser:\x20','email','#6a1b9a','Error\x20approving\x20match:\x20','Reject\x20button\x20added:','d3-mode','undefined','white','block','then','style','textContent','querySelector','classList','d2-mode','Lightbox\x20element\x20not\x20found','losersOldElo','none','onsubmit','bind','remove','playersDuos','winner-username','submit','toString','mapPlayed','disabled','players','d1-mode','outstanding-modal','Error:\x20','currentUser','data','createElement','showMatchLightbox','getElementById','No\x20user\x20logged\x20in\x20yet,\x20waiting\x20for\x20auth\x20state\x20change','Update\x20Report','fontWeight','Unknown','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Date:\x20','Match\x20report\x20rejected\x20successfully','\x20(ELO:\x20','push','User\x20not\x20authenticated','\x20to\x20'];a48_0x1f55=function(){return _0x9b8755;};return a48_0x1f55();}export async function rescindReport(_0x333334){const _0x5dcde1=a48_0x295c;try{const _0x46c743=currentGameMode==='D1'?_0x5dcde1(0x144):currentGameMode==='D2'?_0x5dcde1(0x184):'pendingMatchesD3',_0x4970c1=doc(db,_0x46c743,_0x333334['id']);await deleteDoc(_0x4970c1),alert(_0x5dcde1(0x167)),await fetchOutstandingMatches(),renderOutstandingMatches();}catch(_0x2cea8d){console['error']('Error\x20rescinding\x20report:',_0x2cea8d),alert('Failed\x20to\x20rescind\x20report.\x20Please\x20try\x20again.');}}export function editReport(_0x23ef58){const _0x2322a4=a48_0x295c,_0x44920a=document['getElementById']('report-form'),_0x1b69ed=document[_0x2322a4(0x1bf)](_0x2322a4(0x15d)),_0x5623af=document['getElementById']('suicides'),_0x54ab8b=document[_0x2322a4(0x1bf)]('map-played'),_0x64b765=document['getElementById'](_0x2322a4(0x14d));_0x44920a[_0x2322a4(0x1a6)][_0x2322a4(0x131)]='block',document['getElementById']('auth-warning')['style']['display']=_0x2322a4(0x1ad);if(_0x23ef58['loserScore'])_0x1b69ed[_0x2322a4(0x173)]=_0x23ef58[_0x2322a4(0x153)];if(_0x23ef58['loserSuicides'])_0x5623af['value']=_0x23ef58[_0x2322a4(0x12d)];if(_0x23ef58[_0x2322a4(0x1b5)])_0x54ab8b[_0x2322a4(0x173)]=_0x23ef58['mapPlayed'];if(_0x23ef58['loserComment'])_0x64b765['value']=_0x23ef58['loserComment'];const _0x1dcbb2=document['getElementById']('winner-username');_0x1dcbb2&&_0x23ef58['winnerUsername']&&Array[_0x2322a4(0x130)](_0x1dcbb2['options'])['forEach'](_0x416a9c=>{const _0x4cab1e=_0x2322a4;_0x416a9c[_0x4cab1e(0x181)]===_0x23ef58[_0x4cab1e(0x13c)]&&(_0x416a9c['selected']=!![]);});const _0x44fe7a=document[_0x2322a4(0x1bf)]('subgame-type');_0x44fe7a&&_0x23ef58['subgameType']&&(_0x44fe7a['value']=_0x23ef58['subgameType']);_0x44920a[_0x2322a4(0x17e)]('data-edit-id',_0x23ef58['id']);const _0x5ceef9=_0x44920a[_0x2322a4(0x1a8)]('button[type=\x22submit\x22]');_0x5ceef9['textContent']=_0x2322a4(0x1c1);if(!document[_0x2322a4(0x1bf)]('cancel-edit-btn')){const _0x3abe7d=document['createElement']('button');_0x3abe7d['id']='cancel-edit-btn',_0x3abe7d['className']='btn',_0x3abe7d[_0x2322a4(0x1a6)]['backgroundColor']=_0x2322a4(0x19e),_0x3abe7d['style']['marginRight']='10px',_0x3abe7d[_0x2322a4(0x1a7)]=_0x2322a4(0x146),_0x3abe7d['type']='button',_0x5ceef9['parentNode']['insertBefore'](_0x3abe7d,_0x5ceef9),_0x3abe7d[_0x2322a4(0x192)](_0x2322a4(0x196),function(_0x470e39){_0x470e39['preventDefault'](),_0x44920a['reset'](),_0x44920a['removeAttribute']('data-edit-id'),_0x5ceef9['textContent']='Report\x20Game',this['remove'](),initReportForm();});}_0x44920a[_0x2322a4(0x16c)]({'behavior':'smooth'});}function initReportForm(){console['log']('Report\x20form\x20reset');}export function showMatchLightbox(_0x59d0f0){const _0x17877a=a48_0x295c,_0x240282=document['getElementById'](_0x17877a(0x147));document[_0x17877a(0x1bf)]('lightbox-game-mode')['textContent']=currentGameMode,document[_0x17877a(0x1bf)]('lightbox-winner')['textContent']=_0x59d0f0['winnerUsername']||'Unknown',document['getElementById']('lightbox-loser')['textContent']=_0x59d0f0['loserUsername']||'Unknown',document['getElementById']('lightbox-loser-score')['textContent']=_0x59d0f0['loserScore']||'0',document['getElementById'](_0x17877a(0x182))['textContent']=_0x59d0f0[_0x17877a(0x12d)]||'0',document[_0x17877a(0x1bf)]('lightbox-map')['textContent']=_0x59d0f0['mapPlayed']||_0x17877a(0x1c3),document['getElementById'](_0x17877a(0x132))[_0x17877a(0x1a7)]=_0x59d0f0['loserComment']||'No\x20comment',document[_0x17877a(0x1bf)]('lightbox-subgame')[_0x17877a(0x1a7)]=_0x59d0f0['subgameType']||'Standard\x20Match',_0x240282[_0x17877a(0x1a9)][_0x17877a(0x13f)](_0x17877a(0x175));}export function setCurrentGameMode(_0x1384f6){currentGameMode=_0x1384f6;}export function initOutstandingMatches(){document['addEventListener']('DOMContentLoaded',()=>{const _0x2826cc=a48_0x295c,_0x1e108e=document[_0x2826cc(0x1bf)](_0x2826cc(0x17f)),_0x41d976=document[_0x2826cc(0x1bf)]('view-outstanding-container'),_0x3a1edb=document['getElementById'](_0x2826cc(0x1b9)),_0x2260b0=document['getElementById'](_0x2826cc(0x162)),_0x410251=document[_0x2826cc(0x1bf)]('cancel-button'),_0x16dce0=document['getElementById'](_0x2826cc(0x1b8)),_0x13b3b6=document['getElementById'](_0x2826cc(0x1aa)),_0x8c331c=document['getElementById']('d3-mode');if(_0x16dce0)_0x16dce0['addEventListener']('click',()=>{setCurrentGameMode('D1');});if(_0x13b3b6)_0x13b3b6['addEventListener']('click',()=>{setCurrentGameMode('D2');});if(_0x8c331c)_0x8c331c['addEventListener']('click',()=>{setCurrentGameMode('D3');});auth['onAuthStateChanged'](_0xb35ff2=>{const _0x468416=_0x2826cc;_0xb35ff2?_0x41d976['style']['display']=_0x468416(0x1a4):_0x41d976[_0x468416(0x1a6)]['display']=_0x468416(0x1ad);});_0x1e108e&&_0x1e108e[_0x2826cc(0x192)]('click',async()=>{const _0x358081=_0x2826cc;_0x3a1edb['classList'][_0x358081(0x13f)]('show'),document[_0x358081(0x1bf)](_0x358081(0x199))['innerHTML']='<div\x20class=\x22loading\x22>Loading\x20your\x20matches...</div>',await fetchOutstandingMatches(),renderOutstandingMatches();});_0x2260b0&&_0x2260b0['addEventListener']('click',()=>{const _0x290820=_0x2826cc;_0x3a1edb['classList'][_0x290820(0x1b0)](_0x290820(0x175));});_0x410251&&_0x410251['addEventListener'](_0x2826cc(0x196),()=>{const _0x1b1435=_0x2826cc;document[_0x1b1435(0x1bf)]('report-lightbox')['classList'][_0x1b1435(0x1b0)](_0x1b1435(0x175));});_0x3a1edb&&_0x3a1edb['addEventListener']('click',_0x52ee42=>{const _0x1b40ea=_0x2826cc;_0x52ee42['target']===_0x3a1edb&&_0x3a1edb['classList']['remove'](_0x1b40ea(0x175));});const _0x1b677a=document['getElementById']('report-lightbox');_0x1b677a&&_0x1b677a['addEventListener']('click',_0x31cd2a=>{const _0x5cd56d=_0x2826cc;_0x31cd2a['target']===_0x1b677a&&_0x1b677a[_0x5cd56d(0x1a9)]['remove']('show');});const _0x56a96b=document['getElementById'](_0x2826cc(0x12f));if(_0x56a96b){const _0x5e303f=_0x56a96b[_0x2826cc(0x1ae)];_0x56a96b['onsubmit']=async function(_0x43cb59){const _0x12d06e=_0x2826cc;_0x43cb59[_0x12d06e(0x17a)]();const _0x3dc283=this['getAttribute']('data-edit-id');if(_0x3dc283)try{const _0x2ac105=document['getElementById']('loser-score')['value'],_0x4d1ed5=document['getElementById']('suicides')['value'],_0x3a277c=document[_0x12d06e(0x1bf)]('map-played')['value'],_0x27b114=document['getElementById']('loser-comment')['value'],_0x649632=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?_0x12d06e(0x184):'pendingMatchesD3',_0xe053c4=doc(db,_0x649632,_0x3dc283);await updateDoc(_0xe053c4,{'loserScore':Number(_0x2ac105),'loserSuicides':Number(_0x4d1ed5),'mapPlayed':_0x3a277c,'loserComment':_0x27b114,'subgameType':document['getElementById']('subgame-type')['value'],'updatedAt':new Date()}),alert('Report\x20has\x20been\x20successfully\x20updated.'),this['reset'](),this['removeAttribute'](_0x12d06e(0x15e));const _0x4f3b16=this['querySelector']('button[type=\x22submit\x22]');_0x4f3b16['textContent']=_0x12d06e(0x19b);const _0x14bd74=document['getElementById'](_0x12d06e(0x177));if(_0x14bd74)_0x14bd74[_0x12d06e(0x1b0)]();}catch(_0x1b9f6a){console['error']('Error\x20updating\x20report:',_0x1b9f6a),document[_0x12d06e(0x1bf)]('report-error')[_0x12d06e(0x1a7)]=_0x12d06e(0x17b);}else typeof _0x5e303f==='function'&&_0x5e303f['call'](this,_0x43cb59);};}});}typeof window!==a48_0x1fe699(0x1a2)&&(window[a48_0x1fe699(0x1be)]=showMatchLightbox,window['editReport']=editReport,window[a48_0x1fe699(0x12e)]=rescindReport,window['fetchOutstandingMatches']=fetchOutstandingMatches,window['renderOutstandingMatches']=renderOutstandingMatches);initOutstandingMatches();