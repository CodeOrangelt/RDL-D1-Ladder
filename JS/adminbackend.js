const a2_0x57c234=a2_0x4135,a2_0x3a2ddd=(function(){let _0x59180a=!![];return function(_0x4173b7,_0x4a2c56){const _0x1398cd=_0x59180a?function(){if(_0x4a2c56){const _0x536220=_0x4a2c56['apply'](_0x4173b7,arguments);return _0x4a2c56=null,_0x536220;}}:function(){};return _0x59180a=![],_0x1398cd;};}()),a2_0x4ae9af=a2_0x3a2ddd(this,function(){const _0xfc06b=a2_0x4135,_0x37d12a=function(){const _0xeca536=a2_0x4135;let _0x3e06ac;try{_0x3e06ac=Function(_0xeca536(0x17d)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1e5a09){_0x3e06ac=window;}return _0x3e06ac;},_0x287358=_0x37d12a(),_0x4bef67=_0x287358['console']=_0x287358['console']||{},_0x48c8cd=['log','warn','info','error','exception','table','trace'];for(let _0x21fddf=0x0;_0x21fddf<_0x48c8cd['length'];_0x21fddf++){const _0x5ba931=a2_0x3a2ddd['constructor']['prototype'][_0xfc06b(0x399)](a2_0x3a2ddd),_0x46a00a=_0x48c8cd[_0x21fddf],_0x4433c9=_0x4bef67[_0x46a00a]||_0x5ba931;_0x5ba931['__proto__']=a2_0x3a2ddd[_0xfc06b(0x399)](a2_0x3a2ddd),_0x5ba931[_0xfc06b(0x23a)]=_0x4433c9['toString'][_0xfc06b(0x399)](_0x4433c9),_0x4bef67[_0x46a00a]=_0x5ba931;}});a2_0x4ae9af();import{collection,getDocs,query,orderBy,addDoc,deleteDoc,where,doc,getDoc,serverTimestamp,setDoc,updateDoc,writeBatch,limit,startAfter,endBefore,limitToLast,onSnapshot,deleteField,or,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import{isAdmin}from'./admin-check.js';let matchesPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};function getContrastColor(_0x5eb9c0){const _0xf3c211=a2_0x4135;if(!_0x5eb9c0)return'#ffffff';_0x5eb9c0=_0x5eb9c0['replace']('#','');_0x5eb9c0['length']===0x3&&(_0x5eb9c0=_0x5eb9c0['split']('')['map'](_0x4afc86=>_0x4afc86+_0x4afc86)['join'](''));if(_0x5eb9c0[_0xf3c211(0x1a8)]!==0x6)return'#ffffff';const _0x406eb8=parseInt(_0x5eb9c0[_0xf3c211(0x249)](0x0,0x2),0x10),_0x3e64f2=parseInt(_0x5eb9c0['substring'](0x2,0x4),0x10),_0x5177a6=parseInt(_0x5eb9c0['substring'](0x4,0x6),0x10),_0x5268e6=(_0x406eb8*0x12b+_0x3e64f2*0x24b+_0x5177a6*0x72)/0x3e8;return _0x5268e6>=0x80?'#000000':'#ffffff';}const DEFAULT_TROPHY_IMAGE='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHUlEQVR4nO2XS0hUURjHf3fGnPGB+cBkzEAFRSglH5mQEiitIFoYEW6iFrWJoE20SReCQUGbXrRqEVFB0SIKKnrhM3wUldmQjc5Yk46Njjpz7+06cO50vTP3jplJ0fnDYe75zpnz/e73+L5zFf4n+X1SUoAM624GUoA0IAjw+IS5BWwgCIwCbuAn0AcMWOsP4NHE+BlqEjmxDZQCq4H5QCoQsALMWJjLWgMTvN8FPALuWWs38MhnfCoQoBvIBY4Du4EVwCyPDj7L+ptA/S/WX4EW4ALQMM1g/k8FmA5UAPuBZYCK94wRyXmU6TlwDEFzwDHgltOHnQKcBWwFjgL5jglOTTeBI8BtuwdVmweLgCvAAsckpq8XwDagzQ7QboPZQC1Q7JjA7KgX2AJ02zkwmjINuAzUzHCyGnAFmDMZ4DqgERHNTEsBDmvT0eVSYNgx1PSl28pOldcGvw/WAOeB+Y6pzEwPEJV1zOvBPcAJx0RmLg3YGw0Yu80G4LRjErOjU0BxJGARcB1Y6JjE7GgQKAD6w4FmAM3AUscE4pMuozqigrMa52RUKiK+ipxKDRkVRAYSoiDwDLiLKKU9iqKMgiQRH2wElsdxwDPgLPAAOZ4Fo/YV5BNkAXXIvFgLXAS+2wDnAU2MZEmsJOIK8NqG/wEVwClEoREmLeKP50hn5FSvgT3AY5v+J5HmHVZ4iY+pNG0E1wEss+FbjXS2vjgeUJETzYLJE5+gz5aHXSzlQBnQFQ9gCPH5F4lL94B2G3yl0QE+jwdwBJgH9ESSMgrcteG7HNJihk1A3AMOAgeBT9E7NE0LAkEnEkYHqEa162QMn+02/LJsxpg0YLexURTl3cSgmqYFTNMccPJ1uIDPxuYScDyG31Ls1+EbK6muSIAul8tQ7Jrq5BoGWhVFCQJ7kQkjlnIQFR1TKowNGY6JomnMQkSoGviXvAWWKIoSjgVxPdLtvwKwQ1GUD7ECugBDURTPeHUBfIwVUNO0EWPyWT+mNGBQ13WXN6CqKoOGYYT8fj8+n2NCCYyLiooC8f75D86ukgTJZSGcAAAAAElFTkSuQmCC',charts={};let currentLadder='D1',eloHistoryPagination={'d1':{'page':0x1,'lastVisible':null,'firstVisible':null},'d2':{'page':0x1,'lastVisible':null,'firstVisible':null},'d3':{'page':0x1,'lastVisible':null,'firstVisible':null}};const PAGE_SIZE=0xf;document['addEventListener'](a2_0x57c234(0x2e0),()=>{const _0x12b19e=a2_0x57c234;auth[_0x12b19e(0x398)](async _0x191d57=>{if(!_0x191d57){window['location']['href']='login.html';return;}try{await initializeAdminDashboard();}catch(_0x596cc0){console['error']('Error\x20initializing\x20dashboard:',_0x596cc0),showNotification('Error\x20setting\x20up\x20admin\x20dashboard','error');}});});async function getUserTabPermissions(_0x522a9f){const _0x2bc7b9=a2_0x57c234;if(!_0x522a9f)return['dashboard'];console[_0x2bc7b9(0x2a6)]('Looking\x20for\x20user\x20role\x20information\x20for\x20'+_0x522a9f+_0x2bc7b9(0x280));const _0x1c40be=[{'name':'userProfiles','displayName':'User\x20Profiles'},{'name':'players','displayName':'D1\x20Players'},{'name':'playersD2','displayName':'D2\x20Players'},{'name':_0x2bc7b9(0x346),'displayName':'D3\x20Players'},{'name':'nonParticipants','displayName':_0x2bc7b9(0x22b)}],_0x574365=auth[_0x2bc7b9(0x1c4)];let _0x4779bc=null,_0x4a2a6c=null;for(const _0xd1eced of _0x1c40be){try{if(_0x574365){const _0x286dba=doc(db,_0xd1eced['name'],_0x574365[_0x2bc7b9(0x2fd)]),_0x252377=await getDoc(_0x286dba);if(_0x252377[_0x2bc7b9(0x1de)]()){const _0x2f1d31=_0x252377[_0x2bc7b9(0x1af)]();console['log']('Found\x20user\x20in\x20'+_0xd1eced['displayName']+'\x20by\x20UID:',_0x2f1d31);const _0x41a801=(_0x2f1d31[_0x2bc7b9(0x2d7)]||_0x2f1d31['role']||'')[_0x2bc7b9(0x1ee)]();if(_0x41a801&&_0x41a801!==_0x2bc7b9(0x297)){_0x4779bc=_0x41a801,_0x4a2a6c=_0xd1eced['displayName'],console['log']('Found\x20specific\x20role:\x20'+_0x4779bc+'\x20in\x20'+_0x4a2a6c);break;}}}if(!_0x4779bc){const _0x250b2c=collection(db,_0xd1eced['name']),_0x1f2784=query(_0x250b2c,where('email','==',_0x522a9f)),_0x547101=await getDocs(_0x1f2784);if(!_0x547101['empty']){const _0x4d721d=_0x547101['docs'][0x0][_0x2bc7b9(0x1af)]();console['log']('Found\x20user\x20in\x20'+_0xd1eced['displayName']+'\x20with\x20email\x20'+_0x522a9f+':',_0x4d721d);const _0x2b90a5=(_0x4d721d['roleName']||_0x4d721d[_0x2bc7b9(0x1fc)]||'')['toLowerCase']();if(_0x2b90a5&&_0x2b90a5!=='none'){_0x4779bc=_0x2b90a5,_0x4a2a6c=_0xd1eced[_0x2bc7b9(0x369)],console['log']('Found\x20specific\x20role:\x20'+_0x4779bc+'\x20in\x20'+_0x4a2a6c);break;}}}}catch(_0x3d0b5c){console['error'](_0x2bc7b9(0x223)+_0xd1eced['displayName']+':',_0x3d0b5c);}}if(_0x4779bc){console['log']('Setting\x20permissions\x20based\x20on\x20role:\x20'+_0x4779bc+'\x20(from\x20'+_0x4a2a6c+')');const _0x3d7ea5={'admin':['dashboard','manage-players',_0x2bc7b9(0x362),_0x2bc7b9(0x309),'manage-trophies','manage-ranks','inactive-players','settings','manage-trophies',_0x2bc7b9(0x24b),_0x2bc7b9(0x16e),'user-roles-section',_0x2bc7b9(0x362),'manage-points','manage-levels-ribbons','manage-ribbons'],'owner':[_0x2bc7b9(0x1ea),_0x2bc7b9(0x1f3),'manage-matches','manage-articles','manage-trophies',_0x2bc7b9(0x240),'inactive-players','settings','manage-trophies',_0x2bc7b9(0x24b),_0x2bc7b9(0x16e),'user-roles-section','manage-matches','manage-points','manage-levels-ribbons','manage-ribbons'],'council':['dashboard','manage-players','manage-matches'],'creative\x20lead':['dashboard',_0x2bc7b9(0x309),'manage-trophies','elo-history','manage-highlights']};if(_0x3d7ea5[_0x4779bc])return console['log']('Role\x20\x27'+_0x4779bc+_0x2bc7b9(0x17a),_0x3d7ea5[_0x4779bc]),_0x3d7ea5[_0x4779bc];}return console[_0x2bc7b9(0x2a6)]('No\x20specific\x20permissions\x20for\x20user\x20'+_0x522a9f+_0x2bc7b9(0x39a)),['dashboard'];}function setupSidebarNavigation(_0x3f2d10=[]){const _0x2ae00b=a2_0x57c234,_0x1c9057=document[_0x2ae00b(0x31f)]('.sidebar-nav\x20.nav-item'),_0x541e63=document['querySelectorAll']('.admin-section');(!_0x3f2d10||_0x3f2d10['length']===0x0)&&(_0x3f2d10=['dashboard']);_0x1c9057[_0x2ae00b(0x30a)](_0x4af28a=>{const _0x573649=_0x2ae00b,_0x46ad3d=_0x4af28a[_0x573649(0x2a0)]('data-section');_0x3f2d10[_0x573649(0x2b4)](_0x46ad3d)?_0x4af28a['style'][_0x573649(0x2ea)]='flex':_0x4af28a['style'][_0x573649(0x2ea)]='none',_0x4af28a[_0x573649(0x392)]('click',()=>{const _0x1cf347=_0x573649,_0x261342=_0x4af28a['getAttribute']('data-section');if(!_0x3f2d10['includes'](_0x261342)){showNotification(_0x1cf347(0x251),_0x1cf347(0x380));return;}_0x1c9057[_0x1cf347(0x30a)](_0x1feac8=>_0x1feac8['classList']['remove']('active')),_0x4af28a[_0x1cf347(0x15b)][_0x1cf347(0x1c0)]('active'),_0x541e63[_0x1cf347(0x30a)](_0x22c547=>{const _0x4a4e58=_0x1cf347;_0x22c547[_0x4a4e58(0x1c6)]['display']=_0x4a4e58(0x297);});const _0x71be47=document[_0x1cf347(0x37a)](_0x261342);_0x71be47&&(_0x71be47['style']['display']=_0x1cf347(0x35f),console[_0x1cf347(0x2a6)](_0x1cf347(0x15a)+_0x261342+'\x20section'));});});const _0x5918d7=document[_0x2ae00b(0x29e)](_0x2ae00b(0x148)+_0x3f2d10[0x0]+'\x22]');_0x5918d7&&_0x5918d7['click'](),console['log'](_0x2ae00b(0x170));}function setupTabNavigation(){const _0xf27f25=a2_0x57c234,_0x12ae1f=document[_0xf27f25(0x31f)]('.nav-item');let _0x3fc25a=null,_0x5e4d89=new Set();_0x12ae1f['forEach'](_0x1cd36a=>{_0x1cd36a['addEventListener']('click',function(){const _0x335057=a2_0x4135,_0x1165d4=this['getAttribute'](_0x335057(0x282));if(_0x1165d4===_0x3fc25a)return;_0x3fc25a&&(document[_0x335057(0x37a)](_0x3fc25a)[_0x335057(0x1c6)]['display']=_0x335057(0x297),_0x12ae1f['forEach'](_0x155086=>_0x155086[_0x335057(0x15b)][_0x335057(0x32c)]('active'))),document['getElementById'](_0x1165d4)['style']['display']='block',this['classList']['add']('active'),_0x3fc25a=_0x1165d4;});});}function loadSectionData(_0x1faa02){return;}async function initializeAdminDashboard(){const _0x5aa941=a2_0x57c234;try{const _0x12b9f0=auth['currentUser'],_0x22cf61=await getUserTabPermissions(_0x12b9f0['email']);console['log'](_0x5aa941(0x150)+_0x12b9f0[_0x5aa941(0x31d)]+'\x20allowed\x20tabs:',_0x22cf61),window['userAllowedTabs']=_0x22cf61,setupSidebarNavigation(_0x22cf61),setupLadderSelector(),setupDashboardSection(),_0x22cf61['includes']('manage-players')&&setupManagePlayersSection(),_0x22cf61[_0x5aa941(0x2b4)]('elo-history')&&setupEloHistorySection(),_0x22cf61['includes']('manage-ranks')&&setupRankControls(),_0x22cf61['includes']('manage-articles')&&setupManageArticlesSection(),_0x22cf61['includes']('user-roles-section')&&setupUserRolesSection(),_0x22cf61['includes']('manage-trophies')&&setupTrophyManagementSection(),_0x22cf61['includes']('manage-highlights')&&setupManageHighlightsSection(),_0x22cf61['includes']('inactive-players')&&setupInactivePlayersSection(),_0x22cf61['includes']('manage-matches')&&setupManageMatchesSection(),_0x22cf61[_0x5aa941(0x2b4)]('manage-points')&&setupManagePointsSection(),_0x22cf61[_0x5aa941(0x2b4)](_0x5aa941(0x326))&&setupManageRibbonsSection(),setupDataLoadButtons(_0x22cf61);}catch(_0x72ab03){console['error'](_0x5aa941(0x272),_0x72ab03);}}function setupDataLoadButtons(_0xe10f40=[]){const _0x1aa2e2=a2_0x57c234;(!_0xe10f40||_0xe10f40['length']===0x0)&&(_0xe10f40=[_0x1aa2e2(0x1ea)]);const _0x421bb5=document['getElementById']('load-dashboard-data');_0x421bb5&&_0x421bb5[_0x1aa2e2(0x392)](_0x1aa2e2(0x1dd),function(){const _0x11b615=_0x1aa2e2;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadDashboardOverview()[_0x11b615(0x167)](()=>{const _0xb6edab=_0x11b615;this['classList']['remove']('loading'),this[_0xb6edab(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data';})[_0x11b615(0x2c9)](_0x3454bd=>{const _0x4649a0=_0x11b615;console[_0x4649a0(0x380)](_0x4649a0(0x29d),_0x3454bd),this[_0x4649a0(0x15b)]['remove']('loading'),this['innerHTML']=_0x4649a0(0x273),setTimeout(()=>{const _0x40032a=_0x4649a0;this['innerHTML']=_0x40032a(0x1ca);},0xbb8);});});if(_0xe10f40['includes'](_0x1aa2e2(0x2b2))){const _0x2c7835=document['getElementById']('load-trophies-data');_0x2c7835&&_0x2c7835['addEventListener']('click',function(){const _0x1ed36e=_0x1aa2e2;console[_0x1ed36e(0x2a6)]('Load\x20trophies\x20data\x20clicked'),this[_0x1ed36e(0x15b)]['add'](_0x1ed36e(0x17f)),this[_0x1ed36e(0x200)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadTrophyDefinitions()['then'](()=>{const _0x131c71=_0x1ed36e;this['classList']['remove']('loading'),this[_0x131c71(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data';})['catch'](_0x1c45b2=>{const _0x1d90b3=_0x1ed36e;console[_0x1d90b3(0x380)]('Error\x20loading\x20trophies:',_0x1c45b2),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1fe86d=_0x1d90b3;this[_0x1fe86d(0x200)]=_0x1fe86d(0x307);},0xbb8);});});}if(_0xe10f40['includes'](_0x1aa2e2(0x1f3))){const _0x58b51a=document['getElementById'](_0x1aa2e2(0x337));_0x58b51a&&_0x58b51a['addEventListener']('click',function(){const _0x5b0b5e=_0x1aa2e2;console[_0x5b0b5e(0x2a6)]('Load\x20players\x20data\x20clicked'),this['classList'][_0x5b0b5e(0x1c0)](_0x5b0b5e(0x17f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadPlayersData()['then'](()=>{const _0x49f235=_0x5b0b5e;this[_0x49f235(0x15b)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data';})['catch'](_0xf09408=>{const _0x3b3f2b=_0x5b0b5e;console['error'](_0x3b3f2b(0x19f),_0xf09408),this['classList']['remove']('loading'),this[_0x3b3f2b(0x200)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x37f34f=_0x3b3f2b;this['innerHTML']=_0x37f34f(0x1d8);},0xbb8);});});}if(_0xe10f40[_0x1aa2e2(0x2b4)](_0x1aa2e2(0x24b))){const _0x517e1a=document[_0x1aa2e2(0x37a)]('load-elo-history-data');_0x517e1a&&_0x517e1a['addEventListener']('click',function(){const _0x22c067=_0x1aa2e2;console[_0x22c067(0x2a6)](_0x22c067(0x262)),this['classList'][_0x22c067(0x1c0)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadEloHistory(0x1)['then'](()=>{const _0x1014d5=_0x22c067;this[_0x1014d5(0x15b)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data';})['catch'](_0xcd42ae=>{const _0x554c5d=_0x22c067;console['error']('Error\x20loading\x20history:',_0xcd42ae),this[_0x554c5d(0x15b)]['remove'](_0x554c5d(0x17f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x3a5df2=_0x554c5d;this['innerHTML']=_0x3a5df2(0x379);},0xbb8);});});}if(_0xe10f40['includes']('manage-articles')){const _0x182681=document[_0x1aa2e2(0x37a)]('load-articles-data');_0x182681&&_0x182681['addEventListener']('click',function(){const _0x5d2915=_0x1aa2e2;console['log'](_0x5d2915(0x14d)),this['classList']['add']('loading'),this[_0x5d2915(0x200)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()[_0x5d2915(0x167)](()=>{const _0x48ba71=_0x5d2915;this[_0x48ba71(0x15b)][_0x48ba71(0x32c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';})[_0x5d2915(0x2c9)](_0x3eb120=>{const _0x1505fa=_0x5d2915;console[_0x1505fa(0x380)]('Error\x20loading\x20articles:',_0x3eb120),this[_0x1505fa(0x15b)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x496d11=_0x1505fa;this[_0x496d11(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles\x20Data';},0xbb8);});});}if(_0xe10f40['includes'](_0x1aa2e2(0x26e))){const _0x509f6c=document['getElementById']('load-users-data');_0x509f6c&&_0x509f6c['addEventListener']('click',function(){const _0x543244=_0x1aa2e2;console['log'](_0x543244(0x1c1)),this['classList']['add'](_0x543244(0x17f)),this[_0x543244(0x200)]=_0x543244(0x2d1),loadUsersWithRoles()['then'](()=>{const _0x41585b=_0x543244;this['classList']['remove']('loading'),this[_0x41585b(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x94b4b0=>{const _0x5b5240=_0x543244;console['error']('Error\x20loading\x20users:',_0x94b4b0),this['classList'][_0x5b5240(0x32c)]('loading'),this[_0x5b5240(0x200)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x55a970=_0x5b5240;this[_0x55a970(0x200)]=_0x55a970(0x333);},0xbb8);});});}if(_0xe10f40['includes']('inactive-players')){const _0x2b8ae2=document['getElementById']('load-inactive-players-data');_0x2b8ae2&&_0x2b8ae2[_0x1aa2e2(0x392)](_0x1aa2e2(0x1dd),function(){const _0x238eb3=_0x1aa2e2;console['log']('Load\x20inactive\x20players\x20data\x20clicked'),this[_0x238eb3(0x15b)]['add']('loading'),this['innerHTML']=_0x238eb3(0x2d1),loadInactivePlayersData()[_0x238eb3(0x167)](()=>{const _0x5f0aec=_0x238eb3;this['classList']['remove']('loading'),this[_0x5f0aec(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';})[_0x238eb3(0x2c9)](_0x433441=>{const _0x391cb9=_0x238eb3;console['error']('Error\x20loading\x20inactive\x20players:',_0x433441),this[_0x391cb9(0x15b)]['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x5ebf7a=_0x391cb9;this[_0x5ebf7a(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Inactive\x20Players';},0xbb8);});});}if(_0xe10f40['includes'](_0x1aa2e2(0x16e))){const _0x409d44=document['getElementById']('load-highlights-data');_0x409d44&&_0x409d44['addEventListener'](_0x1aa2e2(0x1dd),function(){const _0x3cc633=_0x1aa2e2;console['log']('Load\x20highlights\x20data\x20clicked'),this['classList']['add'](_0x3cc633(0x17f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadHighlightsAdmin()['then'](()=>{const _0x5d471d=_0x3cc633;this['classList'][_0x5d471d(0x32c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights';})['catch'](_0x3cadb6=>{const _0x1cc478=_0x3cc633;console['error']('Error\x20loading\x20highlights:',_0x3cadb6),this['classList']['remove']('loading'),this[_0x1cc478(0x200)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0xf2fc59=_0x1cc478;this[_0xf2fc59(0x200)]=_0xf2fc59(0x2cd);},0xbb8);});});}if(_0xe10f40['includes'](_0x1aa2e2(0x362))){const _0x3d38a2=document['getElementById']('load-matches-data');_0x3d38a2&&_0x3d38a2[_0x1aa2e2(0x392)](_0x1aa2e2(0x1dd),function(){const _0x26e323=_0x1aa2e2;console[_0x26e323(0x2a6)]('Load\x20matches\x20data\x20clicked'),this['classList'][_0x26e323(0x1c0)]('loading'),this[_0x26e323(0x200)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadMatchesData(0x1)['then'](()=>{const _0x5912dc=_0x26e323;this['classList']['remove'](_0x5912dc(0x17f)),this['innerHTML']=_0x5912dc(0x30b);})['catch'](_0x1a445c=>{const _0x26a0b2=_0x26e323;console['error'](_0x26a0b2(0x16f),_0x1a445c),this['classList']['remove'](_0x26a0b2(0x17f)),this['innerHTML']=_0x26a0b2(0x273),setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches';},0xbb8);});}),setupCreateTestMatchButton(),setupCreateTestMatchModal();}if(_0xe10f40['includes']('manage-ribbons')){const _0xb17e61=document['getElementById'](_0x1aa2e2(0x199));_0xb17e61&&_0xb17e61['addEventListener']('click',function(){const _0x448cd3=_0x1aa2e2;console['log']('Load\x20ribbons\x20data\x20clicked'),this['classList']['add']('loading'),this[_0x448cd3(0x200)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadRibbonsData()['then'](()=>{const _0x2f9070=_0x448cd3;this['classList']['remove']('loading'),this[_0x2f9070(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';})['catch'](_0x404d99=>{const _0x2e68ca=_0x448cd3;console[_0x2e68ca(0x380)]('Error\x20loading\x20ribbons:',_0x404d99),this['classList']['remove']('loading'),this[_0x2e68ca(0x200)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Ribbons\x20Data';},0xbb8);});});}console['log']('Data\x20load\x20buttons\x20initialized\x20based\x20on\x20permissions');}function setupDashboardSection(){const _0x4144ea=a2_0x57c234;document['getElementById']('player-count')['textContent']='-',document[_0x4144ea(0x37a)]('match-count')['textContent']='-',document[_0x4144ea(0x37a)](_0x4144ea(0x1eb))['textContent']='-',document[_0x4144ea(0x37a)]('rejected-count')['textContent']='-';}function setupLadderSelector(){const _0x41143f=a2_0x57c234,_0x1f4f0c=document[_0x41143f(0x31f)]('.ladder-switch\x20input');_0x1f4f0c['forEach'](_0x297b88=>{_0x297b88['addEventListener']('change',()=>{const _0x358e85=a2_0x4135;currentLadder=_0x297b88['value'],document['body']['setAttribute']('data-ladder',currentLadder);const _0x9cc9a2=document['getElementById']('current-ladder-display');_0x9cc9a2&&(_0x9cc9a2[_0x358e85(0x14a)]=currentLadder),document['getElementById']('player-count')['textContent']='-',document['getElementById'](_0x358e85(0x160))[_0x358e85(0x14a)]='-',document['getElementById'](_0x358e85(0x1eb))['textContent']='-',document['getElementById'](_0x358e85(0x385))['textContent']='-',charts['rankDistribution']&&(charts[_0x358e85(0x1e1)]['destroy'](),charts['rankDistribution']=null),charts['activity']&&(charts['activity']['destroy'](),charts['activity']=null),showNotification(_0x358e85(0x15a)+currentLadder+'\x20ladder.\x20Click\x20\x22Load\x20Data\x22\x20to\x20refresh.',_0x358e85(0x2d4));});});const _0x138fc8=document['getElementById']('current-ladder-display');_0x138fc8&&(_0x138fc8['textContent']=currentLadder);}async function loadDashboardOverview(){const _0x3a2327=a2_0x57c234;try{console['log']('Loading\x20dashboard\x20overview\x20data...'),document[_0x3a2327(0x37a)]('player-count')['textContent']='-',document['getElementById']('match-count')['textContent']='-',document['getElementById'](_0x3a2327(0x1eb))['textContent']='-',document[_0x3a2327(0x37a)](_0x3a2327(0x385))[_0x3a2327(0x14a)]='-';const _0xe10044=currentLadder==='D1'?'players':currentLadder==='D2'?'playersD2':'playersD3',_0x4242d3=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2daf88=currentLadder==='D1'?_0x3a2327(0x154):currentLadder==='D2'?'pendingMatchesD2':'pendingMatchesD3',_0x3ee624=currentLadder==='D1'?_0x3a2327(0x384):currentLadder==='D2'?_0x3a2327(0x146):'RejectedD3';console['log']('Using\x20collections\x20for\x20'+currentLadder+':\x20'+_0xe10044+',\x20'+_0x4242d3);const _0x504e86=await getDocs(collection(db,_0xe10044)),_0x537950=_0x504e86['size'],_0xc86569=await getDocs(collection(db,_0x4242d3)),_0x3a837d=_0xc86569['size'],_0x11bf34=await getDocs(collection(db,_0x2daf88)),_0x509c5c=_0x11bf34['size'],_0x1a6a01=await getDocs(collection(db,_0x3ee624)),_0x3a86a2=_0x1a6a01['size'];return document['getElementById']('player-count')['textContent']=_0x537950,document['getElementById'](_0x3a2327(0x160))[_0x3a2327(0x14a)]=_0x3a837d,document['getElementById']('pending-count')['textContent']=_0x509c5c,document['getElementById'](_0x3a2327(0x385))['textContent']=_0x3a86a2,await createRankDistributionChart(),await createActivityChart(),console[_0x3a2327(0x2a6)]('Dashboard\x20data\x20loaded\x20successfully'),!![];}catch(_0xf6c7b0){console['error']('Error\x20loading\x20dashboard\x20data:',_0xf6c7b0);throw _0xf6c7b0;}}async function createRankDistributionChart(){const _0x25633e=a2_0x57c234;try{const _0x36783d=collection(db,currentLadder==='D1'?_0x25633e(0x257):'playersD2'),_0xa27ae7=await getDocs(_0x36783d),_0x36d95c={'Unranked':0x0,'Bronze':0x0,'Silver':0x0,'Gold':0x0,'Emerald':0x0};_0xa27ae7[_0x25633e(0x30a)](_0x28d473=>{const _0xe22e63=_0x25633e,_0x59c6e8=_0x28d473['data'](),_0x1bdd2c=_0x59c6e8[_0xe22e63(0x361)]||0x4b0;if(_0x1bdd2c>=0x7d0)_0x36d95c['Emerald']++;else{if(_0x1bdd2c>=0x708)_0x36d95c['Gold']++;else{if(_0x1bdd2c>=0x640)_0x36d95c['Silver']++;else{if(_0x1bdd2c>=0x578)_0x36d95c[_0xe22e63(0x21e)]++;else _0x36d95c['Unranked']++;}}}});const _0xc4f007=document['getElementById'](_0x25633e(0x278));charts['rankDistribution']&&charts['rankDistribution']['destroy'](),charts['rankDistribution']=new Chart(_0xc4f007,{'type':'doughnut','data':{'labels':Object['keys'](_0x36d95c),'datasets':[{'data':Object[_0x25633e(0x39b)](_0x36d95c),'backgroundColor':[_0x25633e(0x342),'#CD7F32','#C0C0C0','#FFD700',_0x25633e(0x2e1)],'borderWidth':0x2}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':'right','labels':{'color':_0x25633e(0x20c)}},'title':{'display':!![],'text':currentLadder+'\x20Rank\x20Distribution','color':'#e0e0e0','font':{'size':0x10}}}}});}catch(_0x21bb37){console['error']('Error\x20creating\x20rank\x20distribution\x20chart:',_0x21bb37),document['getElementById']('rank-distribution-chart')[_0x25633e(0x200)]=_0x25633e(0x268);}}async function createActivityChart(){const _0x7fcec7=a2_0x57c234;try{const _0x1d6044=currentLadder==='D1'?'approvedMatches':_0x7fcec7(0x33c),_0x43e8f3=collection(db,_0x1d6044),_0x1821f5=new Date();_0x1821f5[_0x7fcec7(0x293)](_0x1821f5['getDate']()-0x7);const _0x1edd46=query(_0x43e8f3,where('approvedAt','>=',_0x1821f5),orderBy('approvedAt',_0x7fcec7(0x31c))),_0x220885=await getDocs(_0x1edd46),_0x4a1680=['Sunday',_0x7fcec7(0x2a9),'Tuesday','Wednesday','Thursday','Friday','Saturday'],_0x4e3946=_0x4a1680['reduce']((_0x8f31ab,_0x5c4d37)=>({..._0x8f31ab,[_0x5c4d37]:0x0}),{});_0x220885[_0x7fcec7(0x30a)](_0x4d9699=>{const _0x4ce8fd=_0x7fcec7,_0x26ed02=_0x4d9699['data']();if(_0x26ed02[_0x4ce8fd(0x203)]){const _0x3044d7=_0x4a1680[new Date(_0x26ed02[_0x4ce8fd(0x203)]['seconds']*0x3e8)['getDay']()];_0x4e3946[_0x3044d7]++;}});const _0x311820=document['getElementById']('activity-chart');charts['activity']&&charts['activity'][_0x7fcec7(0x14b)](),charts['activity']=new Chart(_0x311820,{'type':'bar','data':{'labels':_0x4a1680,'datasets':[{'label':'Matches\x20Played','data':_0x4a1680['map'](_0x13c6d0=>_0x4e3946[_0x13c6d0]),'backgroundColor':currentLadder==='D1'?'rgba(211,\x2047,\x2047,\x200.7)':'rgba(25,\x20118,\x20210,\x200.7)','borderColor':currentLadder==='D1'?_0x7fcec7(0x21f):'#1976d2','borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x7fcec7(0x20c)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':'#e0e0e0'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}},'plugins':{'legend':{'labels':{'color':_0x7fcec7(0x20c)}},'title':{'display':!![],'text':currentLadder+_0x7fcec7(0x2e7),'color':_0x7fcec7(0x20c),'font':{'size':0x10}}}}});}catch(_0x55e8b6){console[_0x7fcec7(0x380)]('Error\x20creating\x20activity\x20chart:',_0x55e8b6),document['getElementById']('activity-chart')['innerHTML']=_0x7fcec7(0x268);}}async function loadPlayersData(){const _0x372e90=a2_0x57c234,_0x633935=document[_0x372e90(0x37a)]('players-table-body');if(!_0x633935)return;_0x633935['innerHTML']=_0x372e90(0x143);try{let _0x2e0ab1='players';if(currentLadder==='D2')_0x2e0ab1=_0x372e90(0x153);else currentLadder==='D3'&&(_0x2e0ab1=_0x372e90(0x346));console['log']('Loading\x20players\x20from\x20'+_0x2e0ab1+'\x20collection...');const _0x1a6974=collection(db,_0x2e0ab1),_0x416975=query(_0x1a6974,orderBy(_0x372e90(0x361),'desc')),_0x1b9044=await getDocs(_0x416975);if(_0x1b9044['empty']){_0x633935['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20players\x20found</td></tr>';return;}_0x633935[_0x372e90(0x200)]='';let _0x3493de=0x1;_0x1b9044['forEach'](_0x210d44=>{const _0x46eafa=_0x372e90,_0x3be32e=_0x210d44[_0x46eafa(0x1af)](),_0x4d93bf=getRankFromElo(_0x3be32e[_0x46eafa(0x361)]||0x4b0),_0x384de7=getRankStyle(_0x3be32e['eloRating']||0x4b0),_0x22cb01=document[_0x46eafa(0x1d7)]('tr');_0x22cb01[_0x46eafa(0x200)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22position\x22>'+_0x3493de+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22username\x22\x20style=\x22color:\x20'+_0x384de7[_0x46eafa(0x335)]+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3be32e['username']||'Unknown')+_0x46eafa(0x1c3)+(_0x3be32e['eloRating']||0x4b0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22rank\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-badge\x22\x20style=\x22background-color:\x20'+_0x384de7['color']+_0x46eafa(0x1db)+_0x4d93bf+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22stats\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3be32e[_0x46eafa(0x371)]||0x0)+'W\x20/\x20'+(_0x3be32e['losses']||0x0)+_0x46eafa(0x2a2)+_0x210d44['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-btn\x22\x20data-id=\x22'+_0x210d44['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x633935['appendChild'](_0x22cb01),_0x3493de++;}),setupPlayerActionButtons();}catch(_0xa03fdc){console[_0x372e90(0x380)]('Error\x20loading\x20players:',_0xa03fdc),_0x633935['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20players:\x20'+_0xa03fdc['message']+_0x372e90(0x38c);}}function getRankFromElo(_0x58c56e){const _0x45f7df=a2_0x57c234;if(_0x58c56e>=0x7d0)return'Emerald';if(_0x58c56e>=0x708)return'Gold';if(_0x58c56e>=0x640)return'Silver';if(_0x58c56e>=0x578)return'Bronze';return _0x45f7df(0x1d3);}function setupPlayerActionButtons(){const _0x362f1f=a2_0x57c234;document[_0x362f1f(0x31f)]('.edit-btn')['forEach'](_0x7f6e49=>{_0x7f6e49['addEventListener']('click',async _0x6b7ced=>{const _0x2dc2b7=a2_0x4135,_0xcabdae=_0x6b7ced[_0x2dc2b7(0x159)]['dataset']['id'];openEditPlayerModal(_0xcabdae);});}),document[_0x362f1f(0x31f)]('.delete-btn')['forEach'](_0x341da9=>{_0x341da9['addEventListener']('click',async _0x15afb3=>{const _0x28255b=_0x15afb3['currentTarget']['dataset']['id'];confirmDeletePlayer(_0x28255b);});});}async function openEditPlayerModal(_0x2d475d){const _0x296125=a2_0x57c234;try{const _0x35e10d=currentLadder==='D1'?_0x296125(0x257):'playersD2',_0x3610fa=doc(db,_0x35e10d,_0x2d475d),_0x2d6dfe=await getDoc(_0x3610fa);if(!_0x2d6dfe['exists']()){showNotification('Player\x20not\x20found','error');return;}const _0x46e0e0=_0x2d6dfe['data'](),_0x47382d=document[_0x296125(0x37a)](_0x296125(0x31e)),_0x4c40ce=document['getElementById'](_0x296125(0x25e)),_0x42b7f9=document['getElementById']('edit-elo'),_0x560990=document['getElementById'](_0x296125(0x391)),_0x3157d5=document['getElementById']('edit-losses');_0x4c40ce['value']=_0x46e0e0['username']||'',_0x42b7f9[_0x296125(0x296)]=_0x46e0e0['eloRating']||0x4b0,_0x560990['value']=_0x46e0e0[_0x296125(0x371)]||0x0,_0x3157d5[_0x296125(0x296)]=_0x46e0e0['losses']||0x0,_0x47382d[_0x296125(0x393)]['playerId']=_0x2d475d,_0x47382d[_0x296125(0x15b)]['add'](_0x296125(0x1b5));}catch(_0x2b3614){console['error']('Error\x20opening\x20edit\x20modal:',_0x2b3614),showNotification(_0x296125(0x2c0),'error');}}async function saveEditedPlayer(){const _0x4c85d4=a2_0x57c234;try{const _0x5dab9c=document['getElementById']('edit-player-modal'),_0x57b8ce=_0x5dab9c[_0x4c85d4(0x393)]['playerId'];if(!_0x57b8ce){showNotification('No\x20player\x20selected','error');return;}const _0x4d67cf=document['getElementById'](_0x4c85d4(0x25e)),_0x2281ac=document[_0x4c85d4(0x37a)](_0x4c85d4(0x1cb)),_0x4eca5c=document[_0x4c85d4(0x37a)](_0x4c85d4(0x391)),_0x38714e=document['getElementById']('edit-losses'),_0x3c24b2=_0x4d67cf['value'][_0x4c85d4(0x14f)](),_0x2690c2=parseInt(_0x2281ac[_0x4c85d4(0x296)]),_0x48eace=parseInt(_0x4eca5c['value']),_0x4b4cf8=parseInt(_0x38714e['value']);if(!_0x3c24b2||isNaN(_0x2690c2)){showNotification(_0x4c85d4(0x325),'error');return;}const _0xce4857=currentLadder==='D1'?'players':'playersD2',_0x4826e5=doc(db,_0xce4857,_0x57b8ce),_0x4fcf02=await getDoc(_0x4826e5),_0x4e078f=_0x4fcf02['exists']()?_0x4fcf02['data']():{},_0x305414=_0x4e078f['eloRating']||0x4b0;await updateDoc(_0x4826e5,{'username':_0x3c24b2,'eloRating':_0x2690c2,'wins':_0x48eace||0x0,'losses':_0x4b4cf8||0x0,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser']['email']});if(_0x2690c2!==_0x305414){const _0xbb834c=currentLadder==='D1'?_0x4c85d4(0x2b8):'eloHistoryD2';await addDoc(collection(db,_0xbb834c),{'player':_0x3c24b2,'previousElo':_0x305414,'newElo':_0x2690c2,'timestamp':serverTimestamp(),'type':'admin_modification','modifiedBy':auth['currentUser']['email'],'gameMode':currentLadder});}closeEditPlayerModal(),loadPlayersData(),showNotification('Player\x20updated\x20successfully','success');}catch(_0x39c5f5){console['error'](_0x4c85d4(0x245),_0x39c5f5),showNotification('Failed\x20to\x20update\x20player:\x20'+_0x39c5f5['message'],'error');}}function closeEditPlayerModal(){const _0x4308ff=a2_0x57c234,_0x3ff9f8=document['getElementById'](_0x4308ff(0x31e));_0x3ff9f8['classList']['remove']('active'),_0x3ff9f8[_0x4308ff(0x393)]['playerId']='';}async function confirmDeletePlayer(_0x454a8e){const _0xaa1c49=a2_0x57c234;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20player?\x20This\x20action\x20cannot\x20be\x20undone.'))try{const _0x264160=currentLadder==='D1'?'players':'playersD2';await deleteDoc(doc(db,_0x264160,_0x454a8e)),loadPlayersData(),showNotification(_0xaa1c49(0x295),'success');}catch(_0x568968){console[_0xaa1c49(0x380)]('Error\x20deleting\x20player:',_0x568968),showNotification('Failed\x20to\x20delete\x20player:\x20'+_0x568968['message'],_0xaa1c49(0x380));}}async function setupManagePlayersSection(){const _0x4a6cbd=a2_0x57c234,_0x23ecb5=document['getElementById']('add-player-form');_0x23ecb5&&_0x23ecb5['addEventListener'](_0x4a6cbd(0x2f8),async _0x178ee6=>{_0x178ee6['preventDefault'](),await addNewPlayer();});const _0x13376c=document['getElementById']('player-search');_0x13376c&&_0x13376c['addEventListener']('input',debounce(filterPlayerTable,0x12c));const _0x5f57f2=document['getElementById']('save-player-btn');_0x5f57f2&&_0x5f57f2[_0x4a6cbd(0x392)]('click',saveEditedPlayer);const _0x535b28=document['getElementById']('cancel-edit-btn');_0x535b28&&_0x535b28['addEventListener'](_0x4a6cbd(0x1dd),closeEditPlayerModal);const _0x454a91=document['getElementById']('edit-player-modal');_0x454a91&&_0x454a91['addEventListener']('click',_0x4229c9=>{_0x4229c9['target']===_0x454a91&&closeEditPlayerModal();});const _0x5b5e12=document['getElementById']('players-ladder-selector');_0x5b5e12&&_0x5b5e12['addEventListener']('change',()=>{currentLadder=_0x5b5e12['value'],loadPlayersData();});}async function addNewPlayer(){const _0x3c3cb7=a2_0x57c234;try{const _0x17505a=document['getElementById'](_0x3c3cb7(0x28d)),_0x24f8b0=document[_0x3c3cb7(0x37a)]('new-player-elo'),_0x2acd1f=_0x17505a['value'][_0x3c3cb7(0x14f)](),_0x22e615=parseInt(_0x24f8b0[_0x3c3cb7(0x296)])||0x4b0;if(!_0x2acd1f){alert(_0x3c3cb7(0x1bc));return;}console['log']('Adding\x20player\x20'+_0x2acd1f+'\x20with\x20ELO\x20'+_0x22e615+'\x20to\x20'+currentLadder+_0x3c3cb7(0x277));let _0x3bcbfa='players',_0x1ceaea='eloHistory';if(currentLadder==='D2')_0x3bcbfa='playersD2',_0x1ceaea='eloHistoryD2';else currentLadder==='D3'&&(_0x3bcbfa=_0x3c3cb7(0x346),_0x1ceaea='eloHistoryD3');const _0x128eec=query(collection(db,_0x3bcbfa),where(_0x3c3cb7(0x320),'==',_0x2acd1f)),_0x514725=await getDocs(_0x128eec);if(!_0x514725['empty']){alert('Username\x20'+_0x2acd1f+'\x20already\x20exists\x20in\x20'+currentLadder+_0x3c3cb7(0x277));return;}const _0x30041b=auth['currentUser'],_0x4bf16a={'username':_0x2acd1f,'eloRating':_0x22e615,'wins':0x0,'losses':0x0,'createdAt':serverTimestamp(),'createdBy':_0x30041b?_0x30041b[_0x3c3cb7(0x31d)]:'admin','gameMode':currentLadder};await addDoc(collection(db,_0x3bcbfa),_0x4bf16a),await addDoc(collection(db,_0x1ceaea),{'player':_0x2acd1f,'previousElo':0x4b0,'newElo':_0x22e615,'timestamp':serverTimestamp(),'type':'initial_placement','placedBy':_0x30041b?_0x30041b['email']:'admin','gameMode':currentLadder}),_0x17505a[_0x3c3cb7(0x296)]='',_0x24f8b0['value']=_0x3c3cb7(0x37b),alert('Player\x20'+_0x2acd1f+'\x20added\x20successfully\x20to\x20'+currentLadder+_0x3c3cb7(0x196)),loadPlayersData();}catch(_0xe5ee43){console['error']('Error\x20adding\x20player:',_0xe5ee43),alert(_0x3c3cb7(0x1c7)+_0xe5ee43['message']);}}document['addEventListener'](a2_0x57c234(0x2e0),()=>{const _0xb966b8=a2_0x57c234,_0x56a6a3=document['getElementById'](_0xb966b8(0x247));_0x56a6a3&&_0x56a6a3['addEventListener']('submit',_0x16cc02=>{_0x16cc02['preventDefault'](),addNewPlayer();});});function filterPlayerTable(){const _0x56173b=a2_0x57c234,_0x36c3f4=document['getElementById']('player-search')['value']['toLowerCase'](),_0x10702c=document['querySelectorAll'](_0x56173b(0x1cc));let _0x42f699=0x0;_0x10702c[_0x56173b(0x30a)](_0x3992eb=>{const _0x398b60=_0x56173b,_0x5061c3=_0x3992eb['querySelector']('.username')?.['textContent']['toLowerCase']()||'';_0x5061c3[_0x398b60(0x2b4)](_0x36c3f4)?(_0x3992eb['style']['display']='',_0x42f699++):_0x3992eb[_0x398b60(0x1c6)]['display']='none';});const _0x366f87=document['getElementById']('no-results-message');_0x366f87&&(_0x42f699===0x0&&_0x36c3f4!==''?_0x366f87[_0x56173b(0x1c6)]['display']='block':_0x366f87['style'][_0x56173b(0x2ea)]='none');}function debounce(_0x55b045,_0x55b2df){let _0x27b993;return function(..._0x4baf0c){clearTimeout(_0x27b993),_0x27b993=setTimeout(()=>_0x55b045['apply'](this,_0x4baf0c),_0x55b2df);};}async function loadEloHistory(_0xf9493e=0x1){const _0x59f2d4=a2_0x57c234,_0x4b0d68=document['getElementById']('elo-history-table-body'),_0x5a05c6=currentLadder[_0x59f2d4(0x1ee)]();if(!_0x4b0d68)return;_0x4b0d68[_0x59f2d4(0x200)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x33d388=currentLadder==='D1'?'eloHistory':currentLadder==='D2'?_0x59f2d4(0x1a6):'eloHistoryD3',_0x29c169=collection(db,_0x33d388);let _0x9460a5;if(_0xf9493e>eloHistoryPagination[_0x5a05c6]['page']&&eloHistoryPagination[_0x5a05c6][_0x59f2d4(0x323)])_0x9460a5=query(_0x29c169,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x5a05c6]['lastVisible']),limit(PAGE_SIZE));else _0xf9493e<eloHistoryPagination[_0x5a05c6]['page']&&eloHistoryPagination[_0x5a05c6]['firstVisible']?_0x9460a5=query(_0x29c169,orderBy(_0x59f2d4(0x381),'desc'),endBefore(eloHistoryPagination[_0x5a05c6][_0x59f2d4(0x311)]),limitToLast(PAGE_SIZE)):_0x9460a5=query(_0x29c169,orderBy('timestamp',_0x59f2d4(0x1f6)),limit(PAGE_SIZE));const _0x246b43=await getDocs(_0x9460a5);if(_0x246b43['empty']){_0x4b0d68[_0x59f2d4(0x200)]=_0x59f2d4(0x1e2),document['getElementById'](_0x5a05c6+'-page-indicator')['textContent']='Page\x201';return;}eloHistoryPagination[_0x5a05c6]['page']=_0xf9493e,eloHistoryPagination[_0x5a05c6]['firstVisible']=_0x246b43['docs'][0x0],eloHistoryPagination[_0x5a05c6][_0x59f2d4(0x323)]=_0x246b43['docs'][_0x246b43[_0x59f2d4(0x158)][_0x59f2d4(0x1a8)]-0x1];const _0x23f508=new Map();_0x4b0d68['innerHTML']='';const _0x53d164=async _0x2dc325=>{const _0x177f99=_0x59f2d4;if(typeof _0x2dc325!=='string'||_0x2dc325['length']<0x14||/[^a-zA-Z0-9-_]/['test'](_0x2dc325))return _0x2dc325;if(_0x23f508[_0x177f99(0x23c)](_0x2dc325))return _0x23f508['get'](_0x2dc325);try{for(const _0x1a5700 of['players','playersD2','playersD3',_0x177f99(0x1d2)]){const _0x10a1ba=await getDoc(doc(db,_0x1a5700,_0x2dc325));if(_0x10a1ba['exists']()&&_0x10a1ba[_0x177f99(0x1af)]()['username']){const _0x304ee8=_0x10a1ba['data']()['username'];return _0x23f508[_0x177f99(0x1f8)](_0x2dc325,_0x304ee8),_0x304ee8;}}return _0x2dc325;}catch(_0x237593){return console[_0x177f99(0x221)](_0x177f99(0x2c8)+_0x2dc325+':',_0x237593),_0x2dc325;}};for(const _0x4d9786 of _0x246b43['docs']){const _0x43d508=_0x4d9786['data'](),_0x560e7a=document['createElement']('tr'),_0x11d058=_0x43d508['timestamp']?new Date(_0x43d508[_0x59f2d4(0x381)]['seconds']*0x3e8)['toLocaleString']():'N/A',_0xdc7141=_0x43d508['newElo']-_0x43d508['previousElo'],_0x5b8733=_0xdc7141>0x0?'positive-change':_0xdc7141<0x0?'negative-change':'',_0x21bed2=_0xdc7141>0x0?'+':'',_0x3475fc=_0x43d508['player']||_0x43d508[_0x59f2d4(0x320)]||_0x43d508['userId']||'N/A',_0x1f45b2=await _0x53d164(_0x3475fc);_0x560e7a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>'+_0x11d058+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x1f45b2+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0x43d508['previousElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0x43d508['newElo']||'N/A')+_0x59f2d4(0x319)+_0x5b8733+'\x22>'+_0x21bed2+_0xdc7141+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0x43d508['type'])+_0x59f2d4(0x300)+(_0x43d508['modifiedBy']||_0x43d508['promotedBy']||_0x43d508['demotedBy']||'System')+_0x59f2d4(0x327),_0x4b0d68['appendChild'](_0x560e7a);}document['getElementById'](_0x5a05c6+'-page-indicator')[_0x59f2d4(0x14a)]='Page\x20'+_0xf9493e;const _0x358e52=document['getElementById'](_0x5a05c6+'-prev-page'),_0x381c39=document['getElementById'](_0x5a05c6+'-next-page');if(_0x358e52)_0x358e52['disabled']=_0xf9493e<=0x1;const _0x37b6fc=query(_0x29c169,orderBy('timestamp','desc'),startAfter(eloHistoryPagination[_0x5a05c6]['lastVisible']),limit(0x1)),_0x474bf1=await getDocs(_0x37b6fc);if(_0x381c39)_0x381c39['disabled']=_0x474bf1['empty'];}catch(_0x4482bf){console[_0x59f2d4(0x380)]('Error\x20loading\x20ELO\x20history:',_0x4482bf),_0x4b0d68[_0x59f2d4(0x200)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20history:\x20'+_0x4482bf[_0x59f2d4(0x1b3)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function formatHistoryType(_0x5b74ed){const _0x5692ec=a2_0x57c234;switch(_0x5b74ed){case _0x5692ec(0x291):return'Match\x20Result';case'promotion':return'Promotion';case _0x5692ec(0x215):return'Demotion';case _0x5692ec(0x22f):return'Admin\x20Adjustment';case _0x5692ec(0x26f):return'Initial\x20Placement';default:return _0x5b74ed||'Unknown';}}function setupEloHistorySection(){const _0x951ab0=a2_0x57c234;document['getElementById'](_0x951ab0(0x204))['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']-0x1);}),document['getElementById']('d1-next-page')['addEventListener']('click',()=>{loadEloHistory(eloHistoryPagination['d1']['page']+0x1);}),document['getElementById']('d2-prev-page')['addEventListener']('click',()=>{const _0x590f56=_0x951ab0;loadEloHistory(eloHistoryPagination['d2'][_0x590f56(0x317)]-0x1);}),document[_0x951ab0(0x37a)](_0x951ab0(0x34a))['addEventListener']('click',()=>{const _0x49a0f1=_0x951ab0;loadEloHistory(eloHistoryPagination['d2'][_0x49a0f1(0x317)]+0x1);});const _0x1bc127=document[_0x951ab0(0x37a)]('d3-prev-page'),_0x406897=document['getElementById']('d3-next-page');_0x1bc127&&_0x1bc127[_0x951ab0(0x392)]('click',()=>{const _0x301cc8=_0x951ab0;loadEloHistory(eloHistoryPagination['d3'][_0x301cc8(0x317)]-0x1);});_0x406897&&_0x406897[_0x951ab0(0x392)](_0x951ab0(0x1dd),()=>{loadEloHistory(eloHistoryPagination['d3']['page']+0x1);});const _0x5617dd=document['getElementById']('elo-history-search');_0x5617dd&&_0x5617dd['addEventListener']('input',debounce(filterEloHistoryTable,0x12c));const _0x59efb9=document['getElementById'](_0x951ab0(0x352));_0x59efb9&&_0x59efb9['addEventListener']('change',applyEloHistoryFilters);const _0x25366e=document['getElementById']('reset-history-filters');_0x25366e&&_0x25366e['addEventListener'](_0x951ab0(0x1dd),resetEloHistoryFilters);}function filterEloHistoryTable(){const _0x191960=a2_0x57c234,_0x59e68f=document['getElementById']('elo-history-search')['value']['toLowerCase'](),_0x39c258=document[_0x191960(0x31f)]('#elo-history-table-body\x20tr');let _0x6ee5c8=0x0;_0x39c258['forEach'](_0x40a853=>{const _0x459758=_0x191960;if(_0x40a853[_0x459758(0x15b)]['contains'](_0x459758(0x16d))||_0x40a853['classList'][_0x459758(0x2dc)](_0x459758(0x284))||_0x40a853[_0x459758(0x15b)]['contains']('error-state'))return;const _0x5cf505=_0x40a853['querySelector']('.player')?.[_0x459758(0x14a)]['toLowerCase']()||'',_0x4dde2d=_0x40a853['querySelector']('.type')?.['textContent']['toLowerCase']()||'',_0x3e5ffa=_0x40a853['querySelector']('.admin-action')?.[_0x459758(0x14a)][_0x459758(0x1ee)]()||'';_0x5cf505['includes'](_0x59e68f)||_0x4dde2d['includes'](_0x59e68f)||_0x3e5ffa['includes'](_0x59e68f)?(_0x40a853['style']['display']='',_0x6ee5c8++):_0x40a853['style']['display']='none';});}async function applyEloHistoryFilters(){const _0x492767=a2_0x57c234,_0x563209=document[_0x492767(0x37a)]('history-start-date')['value'],_0x225507=document[_0x492767(0x37a)]('history-end-date')[_0x492767(0x296)],_0x5da436=document['getElementById'](_0x492767(0x352))['value'],_0x5966db=currentLadder['toLowerCase']();eloHistoryPagination[_0x5966db]={'page':0x1,'lastVisible':null,'firstVisible':null};const _0x3a80d1=document['getElementById']('elo-history-table-body');_0x3a80d1[_0x492767(0x200)]='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Applying\x20filters...</td></tr>';try{const _0x393d41=currentLadder==='D1'?_0x492767(0x2b8):'eloHistoryD2',_0xb1174f=collection(db,_0x393d41);let _0x10ab15=[orderBy('timestamp',_0x492767(0x1f6))];if(_0x563209){const _0xba6453=new Date(_0x563209);_0xba6453['setHours'](0x0,0x0,0x0,0x0),_0x10ab15[_0x492767(0x2cb)](where('timestamp','>=',_0xba6453));}if(_0x225507){const _0x379911=new Date(_0x225507);_0x379911['setHours'](0x17,0x3b,0x3b,0x3e7),_0x10ab15['push'](where(_0x492767(0x381),'<=',_0x379911));}_0x5da436&&_0x5da436!=='all'&&_0x10ab15['push'](where(_0x492767(0x2e5),'==',_0x5da436));_0x10ab15['push'](limit(PAGE_SIZE));const _0x34def6=query(_0xb1174f,..._0x10ab15),_0x3dd9ab=await getDocs(_0x34def6);!_0x3dd9ab[_0x492767(0x2b1)]&&(eloHistoryPagination[_0x5966db]['firstVisible']=_0x3dd9ab[_0x492767(0x158)][0x0],eloHistoryPagination[_0x5966db][_0x492767(0x323)]=_0x3dd9ab[_0x492767(0x158)][_0x3dd9ab['docs'][_0x492767(0x1a8)]-0x1]);_0x3a80d1['innerHTML']='';if(_0x3dd9ab['empty']){_0x3a80d1['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found\x20for\x20the\x20selected\x20filters</td></tr>';return;}_0x3dd9ab[_0x492767(0x30a)](_0x298952=>{const _0x33b323=_0x492767,_0xeeea7f=_0x298952['data'](),_0x3113a9=document[_0x33b323(0x1d7)]('tr'),_0x209b02=_0xeeea7f['timestamp']?new Date(_0xeeea7f[_0x33b323(0x381)][_0x33b323(0x2bf)]*0x3e8)['toLocaleString']():'N/A',_0x8b638c=_0xeeea7f['newElo']-_0xeeea7f[_0x33b323(0x15d)],_0x25419a=_0x8b638c>0x0?'positive-change':_0x8b638c<0x0?_0x33b323(0x2cc):'',_0xbe49d7=_0x8b638c>0x0?'+':'',_0x3ff78c=_0xeeea7f['player']||_0xeeea7f[_0x33b323(0x320)]||_0xeeea7f['userId']||'N/A';_0x3113a9['innerHTML']=_0x33b323(0x1f9)+_0x209b02+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22player\x22>'+_0x3ff78c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22previous-elo\x22>'+(_0xeeea7f['previousElo']||_0x33b323(0x236))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22new-elo\x22>'+(_0xeeea7f['newElo']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20'+_0x25419a+'\x22>'+_0xbe49d7+_0x8b638c+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22type\x22>'+formatHistoryType(_0xeeea7f['type'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xeeea7f['modifiedBy']||_0xeeea7f['promotedBy']||_0xeeea7f['demotedBy']||'System')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3a80d1[_0x33b323(0x156)](_0x3113a9);}),document['getElementById'](_0x5966db+_0x492767(0x22a))[_0x492767(0x14a)]=_0x492767(0x38f);}catch(_0xf3e3d2){console[_0x492767(0x380)]('Error\x20applying\x20filters:',_0xf3e3d2),_0x3a80d1[_0x492767(0x200)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20applying\x20filters:\x20'+_0xf3e3d2[_0x492767(0x1b3)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function resetEloHistoryFilters(){const _0x3dd249=a2_0x57c234;document['getElementById'](_0x3dd249(0x1da))[_0x3dd249(0x296)]='',document['getElementById']('history-end-date')['value']='',document[_0x3dd249(0x37a)](_0x3dd249(0x352))['value']='all',document['getElementById']('elo-history-search')['value']='';const _0x43ff7f=currentLadder['toLowerCase']();eloHistoryPagination[_0x43ff7f]={'page':0x1,'lastVisible':null,'firstVisible':null},loadEloHistory(0x1);}function setupRankControls(){const _0x5679ff=a2_0x57c234,_0x176dbb=document['getElementById']('promote-player-btn'),_0x2e3582=document[_0x5679ff(0x37a)]('promote-modal'),_0x57167e=document['getElementById']('promote-form');_0x176dbb&&_0x2e3582&&_0x57167e&&(_0x176dbb['addEventListener']('click',()=>{const _0x47ffd4=_0x5679ff;_0x2e3582[_0x47ffd4(0x15b)]['add']('active');}),_0x2e3582['addEventListener']('click',_0xe2a72c=>{const _0x48e02d=_0x5679ff;_0xe2a72c[_0x48e02d(0x25c)]===_0x2e3582&&_0x2e3582['classList'][_0x48e02d(0x32c)](_0x48e02d(0x1b5));}),_0x57167e['addEventListener']('submit',async _0x36d5c4=>{const _0x55c3fa=_0x5679ff;_0x36d5c4['preventDefault']();const _0x4bd029=document[_0x55c3fa(0x37a)](_0x55c3fa(0x338)),_0x578720=document['getElementById']('promote-ladder'),_0xc341ee=_0x4bd029[_0x55c3fa(0x296)]['trim'](),_0x3eff51=_0x578720['value'];if(!_0xc341ee){showNotification('Please\x20enter\x20a\x20username',_0x55c3fa(0x380));return;}try{await promotePlayer(_0xc341ee,_0x3eff51),_0x2e3582[_0x55c3fa(0x15b)]['remove']('active'),_0x4bd029[_0x55c3fa(0x296)]='';}catch(_0x65e7fb){showNotification(_0x65e7fb['message'],'error');}}),document['getElementById']('cancel-promote-btn')['addEventListener']('click',()=>{_0x2e3582['classList']['remove']('active');}));const _0x573b2d=document['getElementById']('demote-player-btn'),_0x5a4a49=document['getElementById'](_0x5679ff(0x169)),_0x2700fd=document[_0x5679ff(0x37a)]('demote-form');_0x573b2d&&_0x5a4a49&&_0x2700fd&&(_0x573b2d['addEventListener'](_0x5679ff(0x1dd),()=>{const _0x13bf00=_0x5679ff;_0x5a4a49[_0x13bf00(0x15b)]['add']('active');}),_0x5a4a49['addEventListener']('click',_0x1fba84=>{_0x1fba84['target']===_0x5a4a49&&_0x5a4a49['classList']['remove']('active');}),_0x2700fd['addEventListener']('submit',async _0x3ee7c3=>{const _0x1b3b83=_0x5679ff;_0x3ee7c3['preventDefault']();const _0x1458d1=document['getElementById']('demote-username'),_0x4827ce=document['getElementById']('demote-ladder'),_0xb962ef=_0x1458d1['value'][_0x1b3b83(0x14f)](),_0x34d0d8=_0x4827ce['value'];if(!_0xb962ef){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0xb962ef,_0x34d0d8),document['getElementById']('demote-modal')['classList']['remove']('active'),document['getElementById'](_0x1b3b83(0x366))['value']='';}catch(_0x48fc88){console['error']('Error\x20in\x20demotion:',_0x48fc88);}}));const _0xef7db1=document['getElementById']('set-elo-btn'),_0x3e86f0=document[_0x5679ff(0x37a)](_0x5679ff(0x260)),_0x2333f7=document[_0x5679ff(0x37a)]('set-elo-form');_0xef7db1&&_0x3e86f0&&_0x2333f7&&(_0xef7db1['addEventListener']('click',()=>{const _0xff5d5f=_0x5679ff;_0x3e86f0['classList']['add'](_0xff5d5f(0x1b5));}),_0x3e86f0['addEventListener']('click',_0xddbb47=>{const _0x2e42fb=_0x5679ff;_0xddbb47['target']===_0x3e86f0&&_0x3e86f0['classList']['remove'](_0x2e42fb(0x1b5));}),_0x2333f7[_0x5679ff(0x392)]('submit',async _0x28c265=>{const _0x3d831e=_0x5679ff;_0x28c265[_0x3d831e(0x386)]();const _0x32a3fc=document['getElementById']('set-elo-username'),_0x42e1ad=document['getElementById']('set-elo-value');let _0xc29640;const _0x1d3297=document['getElementById'](_0x3d831e(0x375)),_0x458ad3=document['querySelector']('input[name=\x22set-elo-ladder\x22]:checked');if(_0x1d3297)_0xc29640=_0x1d3297['value'];else _0x458ad3?_0xc29640=_0x458ad3['value']:_0xc29640='D1';if(!_0x32a3fc||!_0x42e1ad){showNotification('Form\x20elements\x20are\x20missing','error');return;}const _0x3ebe79=_0x32a3fc['value'][_0x3d831e(0x14f)](),_0x447f69=parseInt(_0x42e1ad[_0x3d831e(0x296)]);if(!_0x3ebe79||isNaN(_0x447f69)){showNotification('Please\x20enter\x20valid\x20username\x20and\x20ELO',_0x3d831e(0x380));return;}try{await setCustomElo(_0x3ebe79,_0x447f69,_0xc29640),_0x3e86f0['classList'][_0x3d831e(0x32c)]('active'),_0x32a3fc[_0x3d831e(0x296)]='',_0x42e1ad['value']='';}catch(_0x4e0121){showNotification(_0x4e0121['message'],_0x3d831e(0x380));}}),document['getElementById']('cancel-set-elo-btn')[_0x5679ff(0x392)]('click',()=>{_0x3e86f0['classList']['remove']('active');}));const _0x130149=document['getElementById']('set-role-modal'),_0x36557a=document['getElementById']('set-role-form');if(_0x130149&&_0x36557a){_0x130149['addEventListener']('click',_0x53c723=>{_0x53c723['target']===_0x130149&&closeModalHandler();}),_0x36557a['addEventListener']('submit',async _0x4ee6ff=>{const _0xc8f108=_0x5679ff;_0x4ee6ff['preventDefault']();const _0x3fec7d=document['getElementById']('role-username'),_0x2c72de=document['getElementById']('role-name'),_0x454537=document['getElementById']('role-color'),_0x43effa=_0x3fec7d['value']['trim'](),_0x411106=_0x2c72de[_0xc8f108(0x296)]['trim'](),_0x18f66d=_0x454537[_0xc8f108(0x296)];if(!_0x43effa){showNotification('Username\x20is\x20missing','error');return;}try{await setUserRole(_0x43effa,_0x411106,_0x18f66d),closeModalHandler(),loadUsersWithRoles();}catch(_0xcaedda){}});const _0x2c4374=document[_0x5679ff(0x37a)]('cancel-role-btn');_0x2c4374&&(_0x2c4374['removeEventListener']('click',closeModalHandler),_0x2c4374[_0x5679ff(0x392)](_0x5679ff(0x1dd),closeModalHandler));}}async function promotePlayer(_0x32fd2a,_0x252619){const _0x3376c=a2_0x57c234;try{console['log']('Attempting\x20to\x20promote\x20'+_0x32fd2a+'\x20in\x20'+_0x252619+_0x3376c(0x277));const _0x53fffd=auth['currentUser'];if(!_0x53fffd)throw new Error(_0x3376c(0x21c));const _0x11b678=_0x252619==='D2'?'playersD2':'players',_0x1c10e3=_0x252619==='D2'?'eloHistoryD2':_0x3376c(0x2b8);console['log']('Searching\x20for\x20player\x20in\x20'+_0x11b678);const _0x28fda2=collection(db,_0x11b678),_0x21081c=query(_0x28fda2,where('username','==',_0x32fd2a)),_0x53f05f=await getDocs(_0x21081c);if(_0x53f05f['empty']){alert(_0x3376c(0x222)+_0x252619+_0x3376c(0x277));throw new Error('Player\x20not\x20found\x20in\x20'+_0x252619+'\x20ladder');}const _0x2dc632=_0x53f05f['docs'][0x0],_0x480cce=_0x2dc632['data'](),_0xae98ef=_0x480cce['eloRating']||0x4b0,_0x5b28fa=_0x2dc632['id'];console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0xae98ef);const _0x2e59fe=[{'name':'Bronze','elo':0x578},{'name':'Silver','elo':0x640},{'name':_0x3376c(0x364),'elo':0x708},{'name':'Emerald','elo':0x7d0}];let _0x582123=_0x2e59fe['find'](_0x33f626=>_0x33f626[_0x3376c(0x270)]>_0xae98ef);if(!_0x582123){alert('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x252619+'\x20ladder');throw new Error('Player\x20is\x20already\x20at\x20maximum\x20rank\x20(Emerald)\x20in\x20'+_0x252619+'\x20ladder');}console['log']('Promoting\x20player\x20to\x20'+_0x582123['name']+'\x20('+_0x582123['elo']+')'),await updateDoc(doc(db,_0x11b678,_0x2dc632['id']),{'eloRating':_0x582123['elo'],'lastPromotedAt':serverTimestamp(),'promotedBy':_0x53fffd[_0x3376c(0x31d)]||'admin'}),await addDoc(collection(db,_0x1c10e3),{'player':_0x32fd2a,'previousElo':_0xae98ef,'newElo':_0x582123['elo'],'timestamp':serverTimestamp(),'type':'promotion','rankAchieved':_0x582123['name'],'promotedBy':_0x53fffd['email']||'admin','gameMode':_0x252619});try{const {promotionManager:_0x38c012}=await import('./promotions.js'),_0x4e8d8c=_0x38c012['getRankName'](_0xae98ef),_0x216480=_0x582123['name'];await _0x38c012[_0x3376c(0x2ae)](_0x5b28fa,_0x32fd2a,_0xae98ef,_0x582123[_0x3376c(0x270)],_0x4e8d8c,_0x216480,'promotion',{'displayName':_0x32fd2a,'source':'admin','adminUser':_0x53fffd['email'],'ladder':_0x252619}),console['log']('Promotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0xfce2d5){console['error'](_0x3376c(0x2af),_0xfce2d5);}return alert(_0x3376c(0x2aa)+_0x32fd2a+'\x20to\x20'+_0x582123['name']+'\x20('+_0x582123['elo']+')'),currentLadder===_0x252619&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x44ef10){console['error']('Error\x20promoting\x20player:',_0x44ef10),alert('Error\x20promoting\x20player:\x20'+_0x44ef10[_0x3376c(0x1b3)]);throw _0x44ef10;}}document['addEventListener'](a2_0x57c234(0x2e0),()=>{const _0x4ebdab=a2_0x57c234,_0x4587c1=document['getElementById']('promote-form');_0x4587c1&&_0x4587c1[_0x4ebdab(0x392)]('submit',async _0x3240ef=>{const _0x10d0b6=_0x4ebdab;_0x3240ef['preventDefault']();const _0x12f17b=document[_0x10d0b6(0x37a)]('promote-username')['value']['trim'](),_0xc7be5b=document['querySelector'](_0x10d0b6(0x269))[_0x10d0b6(0x296)];if(!_0x12f17b){alert(_0x10d0b6(0x349));return;}try{await promotePlayer(_0x12f17b,_0xc7be5b),document['getElementById']('promote-modal')[_0x10d0b6(0x15b)]['remove']('active'),document['getElementById']('promote-username')['value']='';}catch(_0x501478){console['error']('Error\x20in\x20promotion:',_0x501478);}});});async function demotePlayer(_0xc71571,_0xa4bde6){const _0x332df4=a2_0x57c234;try{console['log'](_0x332df4(0x397)+_0xc71571+'\x20in\x20'+_0xa4bde6+'\x20ladder');const _0x201acb=auth['currentUser'];if(!_0x201acb)throw new Error('You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action');const _0x414ba7=_0xa4bde6==='D2'?'playersD2':'players',_0x5f5142=_0xa4bde6==='D2'?'eloHistoryD2':'eloHistory';console['log'](_0x332df4(0x14e)+_0x414ba7);const _0x61d2fd=collection(db,_0x414ba7),_0x17d10d=query(_0x61d2fd,where(_0x332df4(0x320),'==',_0xc71571)),_0x142a09=await getDocs(_0x17d10d);if(_0x142a09[_0x332df4(0x2b1)]){alert('Player\x20not\x20found\x20in\x20'+_0xa4bde6+_0x332df4(0x277));throw new Error(_0x332df4(0x222)+_0xa4bde6+'\x20ladder');}const _0x2f384b=_0x142a09['docs'][0x0],_0x2a33ee=_0x2f384b['data'](),_0x9927cd=_0x2a33ee['eloRating']||0x4b0;console['log']('Found\x20player\x20with\x20current\x20ELO:\x20'+_0x9927cd);const _0x48541e=[{'name':'Gold','elo':0x708},{'name':'Silver','elo':0x640},{'name':_0x332df4(0x21e),'elo':0x578},{'name':'Unranked','elo':0x4b0}];let _0x2d8905=_0x48541e['find'](_0x2a8b42=>_0x2a8b42['elo']<_0x9927cd);if(!_0x2d8905){alert('Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20'+_0xa4bde6+'\x20ladder');throw new Error(_0x332df4(0x378)+_0xa4bde6+_0x332df4(0x277));}console['log']('Demoting\x20player\x20to\x20'+_0x2d8905[_0x332df4(0x2b5)]+'\x20('+_0x2d8905['elo']+')'),await updateDoc(doc(db,_0x414ba7,_0x2f384b['id']),{'eloRating':_0x2d8905[_0x332df4(0x270)],'lastDemotedAt':serverTimestamp(),'demotedBy':_0x201acb['email']||'admin'}),await addDoc(collection(db,_0x5f5142),{'player':_0xc71571,'previousElo':_0x9927cd,'newElo':_0x2d8905['elo'],'timestamp':serverTimestamp(),'type':_0x332df4(0x215),'rankAchieved':_0x2d8905[_0x332df4(0x2b5)],'demotedBy':_0x201acb['email']||'admin','gameMode':_0xa4bde6});try{const {promotionManager:_0x4ae25d}=await import(_0x332df4(0x2a1)),_0x197abf=_0x4ae25d['getRankName'](_0x9927cd),_0x25081f=_0x2d8905['name'];await _0x4ae25d[_0x332df4(0x2ae)](_0x2f384b['id'],_0xc71571,_0x9927cd,_0x2d8905['elo'],_0x197abf,_0x25081f,_0x332df4(0x215),{'displayName':_0xc71571,'source':_0x332df4(0x234),'adminUser':_0x201acb['email'],'ladder':_0xa4bde6}),console['log']('Demotion\x20notification\x20sent\x20to\x20Discord\x20bot');}catch(_0x50b2cc){console['error'](_0x332df4(0x2af),_0x50b2cc);}return alert(_0x332df4(0x2e6)+_0xc71571+'\x20to\x20'+_0x2d8905['name']+'\x20('+_0x2d8905[_0x332df4(0x270)]+')'),currentLadder===_0xa4bde6&&(loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5934f4){console[_0x332df4(0x380)]('Error\x20demoting\x20player:',_0x5934f4),alert(_0x332df4(0x23b)+_0x5934f4['message']);throw _0x5934f4;}}document['addEventListener']('DOMContentLoaded',()=>{const _0x5b3607=document['getElementById']('demote-form');_0x5b3607&&_0x5b3607['addEventListener']('submit',async _0x270de2=>{const _0x19e73f=a2_0x4135;_0x270de2[_0x19e73f(0x386)]();const _0x2b39bf=document[_0x19e73f(0x37a)](_0x19e73f(0x366))['value']['trim'](),_0x81483e=document[_0x19e73f(0x29e)](_0x19e73f(0x1a1))[_0x19e73f(0x296)];if(!_0x2b39bf){alert('Please\x20enter\x20a\x20username');return;}try{await demotePlayer(_0x2b39bf,_0x81483e),document['getElementById']('demote-modal')[_0x19e73f(0x15b)]['remove']('active'),document[_0x19e73f(0x37a)]('demote-username')['value']='';}catch(_0x2fa5b4){console['error'](_0x19e73f(0x188),_0x2fa5b4);}});});async function setCustomElo(_0x287c2d,_0x544a67,_0x1d8582){const _0x27757f=a2_0x57c234;try{const _0x236af8=auth['currentUser'];if(!_0x236af8||!isAdmin(_0x236af8[_0x27757f(0x31d)]))throw new Error('Unauthorized:\x20Admin\x20access\x20required');const _0x59ca94=_0x1d8582==='D2'?_0x27757f(0x153):'players',_0x2c05ef=_0x1d8582==='D2'?'eloHistoryD2':'eloHistory',_0x2354f9=collection(db,_0x59ca94),_0x11b687=query(_0x2354f9,where('username','==',_0x287c2d)),_0xac88da=await getDocs(_0x11b687);if(_0xac88da['empty'])throw new Error('Player\x20not\x20found\x20in\x20'+_0x1d8582+'\x20ladder');const _0x3dbe2d=_0xac88da['docs'][0x0],_0x4d821b=_0x3dbe2d['data'](),_0x3485c1=_0x4d821b['eloRating']||0x4b0,_0x232bbf=writeBatch(db);_0x232bbf['update'](doc(db,_0x59ca94,_0x3dbe2d['id']),{'eloRating':_0x544a67,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x236af8[_0x27757f(0x31d)]});const _0x8d9a0d=doc(collection(db,_0x2c05ef));return _0x232bbf['set'](_0x8d9a0d,{'player':_0x287c2d,'previousElo':_0x3485c1,'newElo':_0x544a67,'timestamp':serverTimestamp(),'type':_0x27757f(0x22f),'modifiedBy':_0x236af8['email'],'gameMode':_0x1d8582}),await _0x232bbf['commit'](),showNotification(_0x27757f(0x353)+_0x287c2d+'\x20was\x20updated\x20from\x20'+_0x3485c1+'\x20to\x20'+_0x544a67,_0x27757f(0x226)),currentLadder===_0x1d8582&&(loadDashboardOverview(),loadPlayersData(),loadEloHistory(0x1)),!![];}catch(_0x5f3b1b){console[_0x27757f(0x380)]('Error\x20setting\x20custom\x20ELO:',_0x5f3b1b);throw _0x5f3b1b;}}async function setUserRole(_0x5d332a,_0x2f622b,_0x32ba56){const _0x50b9aa=a2_0x57c234;try{const _0x15170b=auth['currentUser'];if(!_0x15170b||!isAdmin(_0x15170b['email']))throw new Error(_0x50b9aa(0x20b));const _0x361acc=_0x2f622b?_0x2f622b[_0x50b9aa(0x14f)]():null,_0x514710=_0x361acc?_0x32ba56||'#808080':null,[_0x561008,_0xef6dd5]=await Promise['all']([getDocs(query(collection(db,_0x50b9aa(0x257)),where(_0x50b9aa(0x320),'==',_0x5d332a))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x5d332a)))]),_0x335701=[];if(!_0x561008['empty'])_0x335701['push']({'ref':_0x561008['docs'][0x0]['ref'],'source':'D1'});if(!_0xef6dd5['empty'])_0x335701['push']({'ref':_0xef6dd5['docs'][0x0]['ref'],'source':'D2'});if(_0x335701['length']===0x0){const [_0x359f68,_0x1c5151]=await Promise['all']([getDocs(query(collection(db,_0x50b9aa(0x1d2)),where('username','==',_0x5d332a))),getDocs(query(collection(db,'userProfiles'),where('username','==',_0x5d332a)))]);if(!_0x359f68['empty'])_0x335701['push']({'ref':_0x359f68['docs'][0x0][_0x50b9aa(0x18c)],'source':_0x50b9aa(0x27a)});if(!_0x1c5151[_0x50b9aa(0x2b1)])_0x335701['push']({'ref':_0x1c5151['docs'][0x0]['ref'],'source':_0x50b9aa(0x27e)});}if(_0x335701[_0x50b9aa(0x1a8)]===0x0)throw new Error('User\x20\x22'+_0x5d332a+'\x22\x20not\x20found\x20in\x20any\x20collection');const _0x1a3dc4=writeBatch(db);_0x335701[_0x50b9aa(0x30a)](_0x1309ab=>{const _0xef8775=_0x50b9aa;console['log'](_0xef8775(0x254)+_0x5d332a+'\x20in\x20'+_0x1309ab['source']),!_0x361acc?_0x1a3dc4['update'](_0x1309ab[_0xef8775(0x18c)],{'roleName':deleteField(),'roleColor':deleteField(),'roleAssignedBy':deleteField(),'roleAssignedAt':deleteField()}):_0x1a3dc4['update'](_0x1309ab['ref'],{'roleName':_0x361acc,'roleColor':_0x514710,'roleAssignedBy':_0x15170b[_0xef8775(0x31d)],'roleAssignedAt':serverTimestamp()});}),await _0x1a3dc4[_0x50b9aa(0x26d)]();const _0x2fe47c=_0x361acc?'Role\x20\x22'+_0x361acc+'\x22\x20set':'Role\x20removed';return showNotification(_0x2fe47c+'\x20for\x20user\x20\x22'+_0x5d332a+'\x22','success'),!![];}catch(_0x3acdb8){console['error']('Error\x20setting\x20user\x20role:',_0x3acdb8),showNotification('Error:\x20'+_0x3acdb8['message'],_0x50b9aa(0x380));throw _0x3acdb8;}}function showNotification(_0x3703ef,_0x1a2bf9='info'){const _0x536015=a2_0x57c234,_0x56e4b4=document[_0x536015(0x1d7)]('div');_0x56e4b4[_0x536015(0x357)]='notification\x20'+_0x1a2bf9,_0x56e4b4['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20'+getNotificationIcon(_0x1a2bf9)+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x3703ef+_0x536015(0x2ec),document[_0x536015(0x18e)][_0x536015(0x156)](_0x56e4b4),setTimeout(()=>{const _0x23183f=_0x536015;_0x56e4b4['classList']['add'](_0x23183f(0x1b5));},0xa);const _0x1f542f=setTimeout(()=>{closeNotification(_0x56e4b4);},0x1388);_0x56e4b4[_0x536015(0x29e)]('.close-notification')[_0x536015(0x392)]('click',()=>{clearTimeout(_0x1f542f),closeNotification(_0x56e4b4);});}function getNotificationIcon(_0x4e7637){const _0x3e649f=a2_0x57c234;switch(_0x4e7637){case _0x3e649f(0x226):return _0x3e649f(0x1a3);case _0x3e649f(0x380):return'fa-exclamation-circle';case'warning':return'fa-exclamation-triangle';case _0x3e649f(0x2d4):default:return'fa-info-circle';}}function closeNotification(_0x5165ca){const _0x112709=a2_0x57c234;_0x5165ca[_0x112709(0x15b)][_0x112709(0x32c)]('active'),setTimeout(()=>{_0x5165ca['remove']();},0x12c);}function setupUserRolesSection(){const _0x5e6bd2=a2_0x57c234,_0x11709d=document['getElementById'](_0x5e6bd2(0x276));_0x11709d&&_0x11709d[_0x5e6bd2(0x392)](_0x5e6bd2(0x1dd),function(){const _0x22b012=_0x5e6bd2;this[_0x22b012(0x15b)][_0x22b012(0x1c0)]('loading'),this['innerHTML']=_0x22b012(0x2d1),loadUsersWithRoles()['then'](()=>{const _0x3621ac=_0x22b012;this['classList']['remove']('loading'),this[_0x3621ac(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';})['catch'](_0x53b8c2=>{const _0x45a724=_0x22b012;console['error']('Error\x20loading\x20users:',_0x53b8c2),this['classList'][_0x45a724(0x32c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data';},0xbb8);});});const _0xa80837=document[_0x5e6bd2(0x37a)](_0x5e6bd2(0x292));_0xa80837&&_0xa80837['addEventListener']('click',()=>{const _0x4f39a0=document['getElementById']('set-role-modal');_0x4f39a0&&_0x4f39a0['classList']['add']('active');});const _0x496e4f=document['getElementById']('user-search');_0x496e4f&&_0x496e4f['addEventListener'](_0x5e6bd2(0x1cd),debounce(filterUsersTable,0x12c));const _0x1492b7=document['getElementById'](_0x5e6bd2(0x230));_0x1492b7&&_0x1492b7['addEventListener'](_0x5e6bd2(0x33e),filterUsersTable);}async function loadUsersWithRoles(){const _0x5a471a=a2_0x57c234,_0x499122=document[_0x5a471a(0x37a)]('users-table-body');if(!_0x499122)return;_0x499122['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20users...</td></tr>';try{const [_0x3b062d,_0x32d64c,_0x2b3dcc,_0x28a710]=await Promise[_0x5a471a(0x29c)]([getDocs(collection(db,'players')),getDocs(collection(db,_0x5a471a(0x153))),getDocs(collection(db,'nonParticipants')),getDocs(collection(db,'userProfiles'))]),_0xff1f18=new Map();function _0xf4cf1b(_0x282730,_0x27fbdc){const _0x2c0df0=_0x5a471a;_0x282730[_0x2c0df0(0x30a)](_0x5413c3=>{const _0x27f845=_0x2c0df0,_0x4d2803=_0x5413c3['data']();if(!_0x4d2803['username'])return;if(!_0xff1f18['has'](_0x4d2803[_0x27f845(0x320)]))_0xff1f18[_0x27f845(0x1f8)](_0x4d2803['username'],{'username':_0x4d2803['username'],'roleName':_0x4d2803['roleName']||null,'roleColor':_0x4d2803['roleColor']||null,'roleAssignedBy':_0x4d2803[_0x27f845(0x37e)]||null,'roleAssignedAt':_0x4d2803['roleAssignedAt']||null,'sources':[_0x27fbdc]});else{const _0x4d2374=_0xff1f18['get'](_0x4d2803['username']);_0x4d2803['roleName']&&(!_0x4d2374['roleName']||_0x27fbdc==='D1'||_0x27fbdc==='D2')&&(_0x4d2374['roleName']=_0x4d2803['roleName'],_0x4d2374['roleColor']=_0x4d2803['roleColor'],_0x4d2374['roleAssignedBy']=_0x4d2803['roleAssignedBy'],_0x4d2374['roleAssignedAt']=_0x4d2803[_0x27f845(0x24e)]),!_0x4d2374[_0x27f845(0x157)]['includes'](_0x27fbdc)&&_0x4d2374[_0x27f845(0x157)]['push'](_0x27fbdc);}});}_0xf4cf1b(_0x3b062d,'D1'),_0xf4cf1b(_0x32d64c,'D2'),_0xf4cf1b(_0x2b3dcc,_0x5a471a(0x2bc)),_0xf4cf1b(_0x28a710,'Profile');const _0x31a586=Array[_0x5a471a(0x149)](_0xff1f18['values']())['sort']((_0x4f31e7,_0x4bcbdd)=>_0x4f31e7['username']['localeCompare'](_0x4bcbdd['username']));if(_0x31a586['length']===0x0){_0x499122[_0x5a471a(0x200)]='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}_0x499122[_0x5a471a(0x200)]='',_0x31a586['forEach'](_0x473b29=>{const _0x462ed4=_0x5a471a,_0x4daf2e=document[_0x462ed4(0x1d7)]('tr');_0x4daf2e[_0x462ed4(0x393)]['username']=_0x473b29['username'],_0x4daf2e['dataset']['roleName']=_0x473b29['roleName']||'',_0x4daf2e[_0x462ed4(0x393)][_0x462ed4(0x22e)]=_0x473b29['roleColor']||'#808080';const _0x564c40=_0x473b29['roleAssignedAt']?new Date(_0x473b29['roleAssignedAt']['seconds']*0x3e8)['toLocaleDateString']():'N/A',_0x56f31f=_0x473b29['roleName']?'<span\x20class=\x22role-badge\x22\x20style=\x22background-color:\x20'+_0x473b29['roleColor']+_0x462ed4(0x18f)+getContrastColor(_0x473b29[_0x462ed4(0x22e)])+';\x22>'+_0x473b29['roleName']+'</span>':_0x462ed4(0x168);_0x4daf2e['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x473b29['username']+'\x20<span\x20class=\x22user-source\x22>('+_0x473b29['sources']['join'](',\x20')+_0x462ed4(0x289)+_0x56f31f+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x473b29['roleAssignedBy']||_0x462ed4(0x236))+_0x462ed4(0x35c)+_0x564c40+_0x462ed4(0x176)+_0x473b29['username']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x473b29['roleName']?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22remove-role-btn\x22\x20data-username=\x22'+_0x473b29[_0x462ed4(0x320)]+_0x462ed4(0x21d):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x499122[_0x462ed4(0x156)](_0x4daf2e);}),document['querySelectorAll']('.edit-role-btn')['forEach'](_0x2865df=>{const _0x2da649=_0x5a471a;_0x2865df[_0x2da649(0x392)]('click',()=>{const _0x1735c2=_0x2da649,_0x67c013=_0x2865df[_0x1735c2(0x393)]['username'];openRoleEditModal(_0x67c013);});}),document['querySelectorAll']('.remove-role-btn')[_0x5a471a(0x30a)](_0x4609a7=>{const _0x39404e=_0x5a471a;_0x4609a7['addEventListener'](_0x39404e(0x1dd),()=>{const _0x3b47c8=_0x39404e,_0x50dad6=_0x4609a7['dataset']['username'];confirm(_0x3b47c8(0x173)+_0x50dad6+'?')&&setUserRole(_0x50dad6,null,null)['then'](()=>loadUsersWithRoles())['catch'](_0x1e7439=>console[_0x3b47c8(0x380)](_0x3b47c8(0x201),_0x1e7439));});});}catch(_0x113490){console[_0x5a471a(0x380)](_0x5a471a(0x39d),_0x113490),_0x499122['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users</td></tr>';}}function a2_0x2f24(){const _0x214dfa=['<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20players...</td></tr>','Quick\x20edit\x20modal\x20not\x20found!\x20Make\x20sure\x20the\x20HTML\x20element\x20exists.','points','RejectedD2','trophyId','.sidebar-nav\x20.nav-item[data-section=\x22','from','textContent','destroy','Failed\x20to\x20load\x20trophy\x20data','Load\x20articles\x20data\x20clicked','Searching\x20for\x20player\x20in\x20','trim','User\x20','quick-edit-display-name','#users-table-body\x20tr[data-username=\x22','playersD2','pendingMatches','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','appendChild','sources','docs','currentTarget','Switched\x20to\x20','classList','startDate','previousElo','action','\x20matches\x20for\x20','match-count','<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20ribbons</td></tr>','description','Deleting\x20match\x20','disabled','Error\x20removing\x20ribbon:','adminEmail','then','<span\x20class=\x22no-role\x22>None</span>','demote-modal','highlight-players-container','Error\x20loading\x20points\x20overview:','Create\x20Article','loading-cell','manage-highlights','Error\x20loading\x20matches:','Sidebar\x20navigation\x20initialized\x20with\x20permissions','\x20pilots.\x20Errors:\x20','ribbon-target-ladder','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20the\x20role\x20from\x20','selected-user-id','playerRibbons','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-role-btn\x22\x20data-username=\x22','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-rarity-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trophy-rarity\x20','borderRadius','current-ribbons-list','\x27\x20has\x20permissions:','<div\x20class=\x22no-results\x22>No\x20users\x20found</div>','quick-edit-points-form','return\x20(function()\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20','loading','Highlight\x20updated\x20successfully!','\x20-\x20Feature\x20coming\x20soon','closest','mapPlayed','quick-edit-points-modal','subtract','Modal\x20background\x20clicked','Simple\x20test\x20match\x20created\x20by\x20admin\x20','Error\x20in\x20demotion:','highlight-video-container','winnerUsername','edit-match-loser-score','ref','Deleting\x20match...','body',';\x20color:\x20','Error\x20updating\x20points:','selected-user-points','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','map','assign-trophy-form','mapVersion','\x20ladder!','\x20(based\x20on\x20data-role:\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-highlight-btn\x22\x20data-id=\x22','load-ribbons-data','update','slice','Create\x20test\x20match\x20button\x20clicked','pointsHistory','Points\x20field\x20initialized\x20for\x20','Error\x20loading\x20players:','winnerScore','input[name=\x22demote-ladder\x22]:checked','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22quick-edit-btn\x22\x20data-user-id=\x22','fa-check-circle','approvedMatches','resimulation','eloHistoryD2','localeCompare','length','opponent','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20inactive\x20players\x20match\x20your\x20criteria</td></tr>','toLocaleString','edit-highlight-matchInfo-input','creator','test-match-winner-username','data','user-ribbon-management','matches-table-body','edit-match-loser','message','Match\x20not\x20found\x20in\x20approved\x20matches','active','assign-trophy-id','Set\x20to\x20','\x20Exists','Found\x20','achievementPlayer','playerRibbonsD3','Please\x20enter\x20a\x20valid\x20username','award-reason','#28a745','title','add','Load\x20users\x20data\x20clicked','Unknown','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo\x22>','currentUser','creatorImageUrl','style','Error\x20adding\x20player:\x20','\x20users\x20already\x20had\x20points.','Match\x20Highlight','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Dashboard\x20Data','edit-elo','#players-table-body\x20tr','input','input[name=\x22quick-action\x22]:checked','edit-match-winner-comment','YouTube\x20Video\x20ID\x20is\x20required\x20for\x20match\x20highlights','userProfiles','nonParticipants','Unranked','article-author','edit-highlight-winnerName-input','Highlight\x20deleted\x20successfully','createElement','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Players\x20Data','medium-points','history-start-date','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','toLocaleDateString','click','exists','opacity','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.src=\x27','rankDistribution','<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20ELO\x20history\x20found</td></tr>','endDate','points-user-search','Match\x20ID\x20is\x20required','loserSuicides','demoLink','YouTube\x20Video\x20ID\x20(Optional)','Completed!\x20Processed\x20','dashboard','pending-count','openResimulateModal','selected-user-info','toLowerCase','keys','<tr><td\x20colspan=\x224\x22\x20class=\x22empty-state\x22>No\x20articles\x20found</td></tr>','\x20from\x20','Test\x20match','manage-players','No\x20users\x20needed\x20points\x20field\x20initialization','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x226\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20highlights:\x20','desc','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20Position:</strong>\x20','set','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22timestamp\x22>','highlight-creator-image','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Players:</strong>\x20','role','delete-match-confirm-modal','amount','warning','innerHTML','Error\x20removing\x20role:','loserUsername','approvedAt','d1-prev-page','trophy-form','div','<tr><td\x20colspan=\x227\x22\x20class=\x22error-state\x22>Error\x20loading\x20inactive\x20players:\x20','highlight-achievement-type','Auth:','flex','Unauthorized:\x20Admin\x20access\x20required','#e0e0e0','migrate-points-btn','\x22\x20title=\x22Delete\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Lost','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','non-participant','Invalid\x20points\x20amount','Setting\x20up\x20create\x20test\x20match\x20button','highlight-form','demotion','Unknown\x20Player','match-row','Error\x20processing\x20','https://www.youtube.com/embed/','article-id','focus','You\x20must\x20be\x20logged\x20in\x20to\x20perform\x20this\x20action','\x22\x20title=\x22Remove\x20Role\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20<!--\x20Changed\x20icon\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Bronze','#d32f2f','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22loser-cell\x22>','warn','Player\x20not\x20found\x20in\x20','Error\x20checking\x20','</td></tr>','Collection\x20reference\x20created:','success','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Completed','Queued\x20','trophyDefinitions','-page-indicator','Non-Participants','.form-group,\x20.form-row','This\x20will\x20add\x20a\x20points\x20field\x20(set\x20to\x200)\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20one\x20yet.\x20Continue?','roleColor','admin_modification','role-filter','.close-btn','\x22\x20title=\x22Edit\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-match-btn\x20btn-small\x20btn-danger\x22\x20data-id=\x22','matches-start-date','admin','trophy-modal','N/A','Article\x20not\x20found','Edit\x20Match:\x20','<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20highlights...</td></tr>','toString','Error\x20demoting\x20player:\x20','has','\x22\x20not\x20found\x20in\x20','.edit-ribbons-btn','Creator','manage-ranks','\x20matches\x20that\x20already\x20have\x20had\x20points\x20awarded','Create\x20test\x20match\x20form\x20not\x20found','),\x20','playerId','Error\x20updating\x20player:','parentNode','add-player-form','edit-highlight-loserScore-input','substring','matches-next-page','elo-history','Simple\x20test\x20match\x20created\x20successfully','CRITICAL:\x20Role\x20modal\x20element\x20(#set-role-modal)\x20not\x20found\x20in\x20the\x20DOM!','roleAssignedAt','newElo','low-points','You\x20do\x20not\x20have\x20permission\x20to\x20access\x20this\x20section','Featured\x20Creator','.view-history-btn','Updating\x20role\x20for\x20','Article\x20updated\x20successfully','<tr><td\x20colspan=\x226\x22\x20class=\x22error-state\x22>Error\x20loading\x20history:\x20','players','videoId',',\x20Loser\x20','eloHistoryD3','filter','target','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20matches','edit-username','\x22\x20title=\x22Edit\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-highlight-btn\x22\x20data-id=\x22','set-elo-modal','approvedMatchesD3','Load\x20history\x20data\x20clicked','No\x20ELO\x20history\x20found\x20for\x20player\x20','ribbon-user-search','winnerName','\x20to\x20','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20trophy\x20definitions\x20found</td></tr>','<div\x20class=\x22chart-error\x22>Error\x20loading\x20chart\x20data</div>','input[name=\x22promote-ladder\x22]:checked','.delete-trophy-btn','date','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','commit','user-roles-section','initial_placement','elo','moderately-inactive','Error\x20initializing\x20admin\x20dashboard:','<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error','Modal\x20element\x20not\x20found!','Failed\x20to\x20delete\x20match:\x20','load-users-data','\x20ladder','rank-distribution-chart','createdAt','NonParticipant','marginBottom','Unnamed\x20Trophy','matchLink','UserProfile','Error\x20loading\x20points\x20history:','\x20in\x20all\x20collections...','Winner\x20and\x20loser\x20usernames\x20are\x20required','data-section','Closing\x20create\x20test\x20match\x20modal','empty-state','cells','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','matchId','checked',')</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x20D3\x20matches.\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<small>Awarded:\x20','resimulate-modal','new-player-username','Both\x20players\x20already\x20have\x20ELO\x20history\x20for\x20this\x20match.\x20No\x20resimulation\x20needed.','cloneNode','matchInfo','match_result','add-new-role-btn','setDate','highlight-loser-score','Player\x20deleted\x20successfully','value','none','<p\x20class=\x22no-ribbons\x22>No\x20ribbons\x20found</p>','winnerDemoLink','\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-name\x22>','Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data','all','Error\x20loading\x20dashboard:','querySelector','match','getAttribute','./promotions.js','L\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-btn\x22\x20data-id=\x22','Failed\x20to\x20assign\x20trophy:\x20','highlight-modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20updated\x20with\x20points:\x20','log','Close\x20button\x20not\x20found\x20in\x20quick\x20edit\x20modal','loserName','Monday','Successfully\x20promoted\x20','sort','backgroundColor','unknown','sendPromotionNotification','Failed\x20to\x20send\x20Discord\x20notification:','assign-trophy-rarity','empty','manage-trophies','View\x20history\x20clicked\x20for\x20user:','includes','name','.quick-edit-btn','Never\x20played','eloHistory','keypress','highlight-achievement-player','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser\x20ELO\x20History:</strong>\x20','Non-Participant','rarity','Error\x20loading\x20match\x20data:','seconds','Failed\x20to\x20load\x20player\x20data','ribbon-target-user','20px','.ladder-switch\x20input[value=\x22D2\x22]','Match\x20deleted\x20successfully','input[name=\x22test-match-ladder\x22][value=\x22D1\x22]','Error','Delete\x20Trophy:\x20No\x20trophy\x20ID\x20provided.','Error\x20resolving\x20username\x20for\x20','catch','article-modal','push','negative-change','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Highlights','<div\x20class=\x22loading\x22>Searching...</div>','You\x20must\x20be\x20logged\x20in\x20to\x20delete\x20trophies','resimulate-match-id','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','playerRibbonsD2','info','reason','.view-player-btn','roleName','Setting\x20up\x20Manage\x20Ribbons\x20section','role-username','highlight-achievement-image','quick-points-reason','contains','quick-points-amount','Failed\x20to\x20load\x20match\x20data','highlight-player-profile','DOMContentLoaded','#50C878','Match\x20ID\x20or\x20ladder\x20missing','\x20Level\x20','Create\x20test\x20match\x20button\x20setup\x20complete','type','Successfully\x20demoted\x20','\x20Weekly\x20Activity','award-item-form','\x20-\x20','display','edit-highlight-matchDate-input','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22close-notification\x22></button>\x0a\x20\x20\x20\x20','Failed\x20to\x20delete\x20trophy:\x20','User\x20not\x20found','lastMatch','highlight-map-container','Current\x20user:','Error\x20in\x20bulk\x20award\x20points:','\x20D2\x20pilots,\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22score-cell\x22>','reset','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user-plus\x22\x20title=\x22Assign\x20to\x20player\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-trophy-btn\x22\x20data-id=\x22','highlight-map-creator','submit','Unknown\x20User','visible','Highlight\x20created\x20successfully!','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22highlight-type\x20','uid','Attaching\x20cancel\x20button\x20listener.','set-role-modal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22admin-action\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Setting\x20up\x20Manage\x20Matches\x20section','highlight-match-date','highlight-map','Error\x20saving\x20highlight:\x20','ribbons','Bulk\x20award:\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies\x20Data','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-badge\x20','manage-articles','forEach','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Matches','Failed\x20to\x20save\x20match:\x20','matchDate','size','.form-group','article-title','firstVisible','<i\x20class=\x22fas\x20fa-times\x22></i>\x20No','Bulk\x20award:','edit-match-ladder','ribbon-type-select','Set\x20default\x20ladder\x20to:','page','loserScore','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22elo-change\x20','.empty-state','src','asc','email','edit-player-modal','querySelectorAll','username','Using\x20collection:\x20','Firebase\x20connection\x20test\x20successful!','lastVisible','toISOString','Please\x20enter\x20valid\x20username\x20and\x20ELO','manage-ribbons','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','allUsersPoints','article-form','\x20D2\x20matches,\x20','edit-match-winner-suicides','remove','Loading\x20user\x20data...','trophy-description','.remove-ribbon-btn','\x20quick\x20edit\x20buttons','highlights','setHours','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Users\x20Data','ladder','color','.no-results','load-players-data','promote-username','\x20not\x20found\x20in\x20any\x20ladder','matches-end-date','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','approvedMatchesD2','newPoints','change','edit-highlight-videoId-input','edit-highlight-map-input','submittedBy','#808080','\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Users\x20who\x20already\x20had\x20points:\x20','input[name=\x22assign-ladder\x22]:checked','Opening\x20highlight\x20modal\x20with\x20parameter:\x20','playersD3','nonexistent','Failed\x20to\x20modify\x20points:\x20','Please\x20enter\x20a\x20username','d2-next-page','awardedAt','matches-page-indicator','common','trophy-preview-img','winnerSuicides','achievement','articles','history-type-filter','ELO\x20rating\x20for\x20','imageUrl','<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20history\x20found</td></tr>','You\x20must\x20be\x20logged\x20in','className','Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20match?\x20This\x20action\x20cannot\x20be\x20undone.','Create\x20test\x20match\x20modal\x20not\x20found','\x20points\x20to\x20ALL\x20pilots\x20in\x20ALL\x20ladders\x20(D1,\x20D2,\x20and\x20D3).\x20Continue?','achievementDetails','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>','achievementType','Attaching\x20background\x20click\x20listener.','block','highlight-video-id','eloRating','manage-matches','\x20D1\x20matches,\x20','Gold','Error\x20awarding\x20item:','demote-username','Ribbons\x20data\x20loaded\x20successfully','matches-search','displayName','load-inactive-players-data','Committing\x20batch\x20update\x20for\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Match\x20Details:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner:</strong>\x20','Error\x20searching\x20for\x20user','mapCreator','setAttribute','edit-highlight-description-input','wins','View\x20player\x20details\x20for\x20','highly-inactive','user-role','set-elo-ladder','required','position','Player\x20is\x20already\x20at\x20minimum\x20rank\x20(Unranked)\x20in\x20','<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20History\x20Data','getElementById','1200','points-overview-table-body','insertAdjacentElement','roleAssignedBy','Failed\x20to\x20save\x20trophy:\x20','error','timestamp','<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>','\x20Missing','RejectedD1','rejected-count','preventDefault','Store\x20item\x20awarded\x20successfully','Table\x20row\x20for\x20user\x20','edit-match-modal','split','border','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20points\x20data:','MAX_SAFE_INTEGER','Page\x201','Error\x20saving\x20match:','edit-wins','addEventListener','dataset','Error\x20deleting\x20article:','stopPropagation','edit-match-map','Attempting\x20to\x20demote\x20','onAuthStateChanged','bind',',\x20giving\x20default\x20access','values','highlight-title-container','Error\x20loading\x20users:','\x20(loser)</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'];a2_0x2f24=function(){return _0x214dfa;};return a2_0x2f24();}function openRoleEditModal(_0xc8c27a){const _0x48323b=a2_0x57c234;console[_0x48323b(0x2a6)]('Attempting\x20to\x20open\x20role\x20edit\x20modal\x20for:',_0xc8c27a);const _0x1f8b88=document['getElementById'](_0x48323b(0x2ff)),_0x3a8dd9=document['getElementById'](_0x48323b(0x2d9)),_0x7388e4=document['getElementById'](_0x48323b(0x374));if(!_0x1f8b88){console['error'](_0x48323b(0x24d)),alert('Error:\x20Could\x20not\x20find\x20the\x20role\x20editing\x20dialog.');return;}console[_0x48323b(0x2a6)]('Modal\x20element\x20found:',_0x1f8b88);_0x3a8dd9?(_0x3a8dd9[_0x48323b(0x296)]=_0xc8c27a,console['log']('Username\x20input\x20set\x20to:\x20'+_0xc8c27a)):console['warn']('Username\x20input\x20field\x20(#role-username)\x20not\x20found\x20in\x20modal.');const _0x4c1f5e=document['querySelector'](_0x48323b(0x152)+_0xc8c27a+'\x22]');if(_0x4c1f5e&&_0x7388e4){const _0x25a5e3=_0x4c1f5e['dataset']['role'];_0x7388e4[_0x48323b(0x296)]=_0x25a5e3==='none'?'':_0x25a5e3,console['log']('Role\x20select\x20set\x20to:\x20'+_0x7388e4['value']+_0x48323b(0x197)+_0x25a5e3+')');}else{if(!_0x4c1f5e)console['warn'](_0x48323b(0x388)+_0xc8c27a+'\x20not\x20found.');if(!_0x7388e4)console['warn']('Role\x20select\x20field\x20(#user-role)\x20not\x20found\x20in\x20modal.');if(_0x7388e4)_0x7388e4['value']='';}console['log']('Adding\x20\x22active\x22\x20class\x20to\x20modal.'),_0x1f8b88['classList']['add'](_0x48323b(0x1b5));const _0x3a4c82=document['getElementById']('cancel-role-btn');_0x3a4c82?(console['log'](_0x48323b(0x2fe)),_0x3a4c82['removeEventListener']('click',closeModalHandler),_0x3a4c82['addEventListener']('click',closeModalHandler)):console['warn']('Cancel\x20button\x20(#cancel-role-btn)\x20not\x20found\x20in\x20modal.'),console['log'](_0x48323b(0x35e)),_0x1f8b88['removeEventListener']('click',closeModalBackgroundHandler),_0x1f8b88['addEventListener']('click',closeModalBackgroundHandler);}function closeModalBackgroundHandler(_0x3868d6){_0x3868d6['target']===this&&closeModalHandler();}function closeModalHandler(){const _0x53773d=a2_0x57c234,_0x3a7bf0=document[_0x53773d(0x37a)]('set-role-modal');_0x3a7bf0&&(_0x3a7bf0['classList']['remove'](_0x53773d(0x1b5)),_0x3a7bf0['removeEventListener']('click',closeModalBackgroundHandler));}function filterUsersTable(){const _0x409aab=a2_0x57c234,_0x5ca76a=document[_0x409aab(0x37a)]('user-search')?.['value']['toLowerCase']()||'',_0x4f5a90=document['getElementById']('role-filter')?.[_0x409aab(0x296)]||'all',_0x5bce20=document['querySelectorAll']('#users-table-body\x20tr');let _0x56e11d=0x0;_0x5bce20[_0x409aab(0x30a)](_0xcc668c=>{const _0x357614=_0x409aab;if(_0xcc668c['querySelector']('.loading-cell')||_0xcc668c['querySelector'](_0x357614(0x31a))||_0xcc668c['querySelector']('.error-state'))return;const _0x210aef=_0xcc668c['dataset'][_0x357614(0x320)]?.[_0x357614(0x1ee)]()||'',_0x2315a1=_0xcc668c['dataset'][_0x357614(0x1fc)]||'none',_0x1bb8a8=_0x210aef[_0x357614(0x2b4)](_0x5ca76a),_0x51045c=_0x4f5a90==='all'||_0x2315a1===_0x4f5a90;_0x1bb8a8&&_0x51045c?(_0xcc668c[_0x357614(0x1c6)]['display']='',_0x56e11d++):_0xcc668c['style'][_0x357614(0x2ea)]='none';});if(_0x56e11d===0x0&&_0x5bce20['length']>0x0){const _0x3aca0f=document['getElementById']('users-table-body');if(_0x3aca0f){if(!_0x3aca0f['querySelector'](_0x409aab(0x336))){const _0x499292=document[_0x409aab(0x1d7)]('tr');_0x499292['classList']['add']('no-results'),_0x499292['innerHTML']='<td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20match\x20your\x20filters</td>',_0x3aca0f['appendChild'](_0x499292);}}}else{const _0x13c81a=document['querySelector']('.no-results');_0x13c81a&&_0x13c81a[_0x409aab(0x32c)]();}}function setupManageArticlesSection(){const _0x2944b0=a2_0x57c234,_0x106e9f=document['getElementById']('load-articles-data');_0x106e9f&&_0x106e9f['addEventListener']('click',function(){const _0x29ae97=a2_0x4135;this['classList']['add']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Loading...',loadArticles()['then'](()=>{const _0x49f14c=a2_0x4135;this[_0x49f14c(0x15b)][_0x49f14c(0x32c)]('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';})[_0x29ae97(0x2c9)](_0x19de89=>{const _0x35d293=_0x29ae97;console['error']('Error\x20loading\x20articles:',_0x19de89),this['classList']['remove'](_0x35d293(0x17f)),this[_0x35d293(0x200)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{const _0x1d322f=_0x35d293;this[_0x1d322f(0x200)]='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Articles';},0xbb8);});});const _0x1a449c=document['getElementById']('create-new-article-btn');_0x1a449c?(console['log']('Setting\x20up\x20Manage\x20Articles\x20section\x20-\x20Found\x20Create\x20Article\x20button.'),_0x1a449c['style']['display']='block',_0x1a449c['addEventListener']('click',()=>{openArticleModal();})):console[_0x2944b0(0x380)]('Setup\x20Manage\x20Articles:\x20Create\x20Article\x20button\x20not\x20found!');const _0x4d6c0e=document['getElementById'](_0x2944b0(0x329));_0x4d6c0e&&_0x4d6c0e[_0x2944b0(0x392)]('submit',_0x163f5d=>{const _0x1299a1=_0x2944b0;_0x163f5d[_0x1299a1(0x386)](),saveArticle();});const _0xff8e89=document['getElementById']('cancel-article-btn');_0xff8e89&&_0xff8e89['addEventListener']('click',()=>{closeArticleModal();});const _0x84bd01=document['querySelector']('#article-modal\x20.close-btn');_0x84bd01&&_0x84bd01['addEventListener']('click',()=>{closeArticleModal();});const _0x1200cd=document['getElementById']('article-modal');_0x1200cd&&_0x1200cd['addEventListener']('click',_0x1586b8=>{_0x1586b8['target']===_0x1200cd&&closeArticleModal();});}async function loadArticles(){const _0x58f88c=a2_0x57c234,_0xd3b368=document['getElementById']('articles-table-body');if(!_0xd3b368)return;_0xd3b368[_0x58f88c(0x200)]='<tr><td\x20colspan=\x224\x22\x20class=\x22loading-cell\x22>Loading\x20articles...</td></tr>';try{const _0x3d1205=collection(db,'articles'),_0x1e1935=query(_0x3d1205,orderBy('createdAt','desc')),_0x34e340=await getDocs(_0x1e1935);if(_0x34e340['empty']){_0xd3b368['innerHTML']=_0x58f88c(0x1f0);return;}_0xd3b368['innerHTML']='',_0x34e340['forEach'](_0x1a9260=>{const _0xbe8dbe=_0x58f88c,_0x239855=_0x1a9260[_0xbe8dbe(0x1af)](),_0x52190d=document['createElement']('tr'),_0xe8c697=_0x239855['createdAt']?new Date(_0x239855['createdAt'][_0xbe8dbe(0x2bf)]*0x3e8)['toLocaleString']():'N/A';_0x52190d[_0xbe8dbe(0x200)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x239855['title']||'Untitled')+_0xbe8dbe(0x35c)+(_0x239855['author']||_0xbe8dbe(0x1c2))+_0xbe8dbe(0x35c)+_0xe8c697+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-article-btn\x22\x20data-id=\x22'+_0x1a9260['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-article-btn\x22\x20data-id=\x22'+_0x1a9260['id']+_0xbe8dbe(0x286),_0xd3b368['appendChild'](_0x52190d);}),setupArticleActionButtons();}catch(_0x2e2989){console[_0x58f88c(0x380)]('Error\x20loading\x20articles:',_0x2e2989),_0xd3b368['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x224\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20articles:\x20'+_0x2e2989[_0x58f88c(0x1b3)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupArticleActionButtons(){const _0x119bec=a2_0x57c234;document[_0x119bec(0x31f)]('.edit-article-btn')['forEach'](_0x40169e=>{_0x40169e['addEventListener']('click',async _0x32578c=>{const _0xaaf589=_0x32578c['currentTarget']['dataset']['id'];openArticleModal(_0xaaf589);});}),document['querySelectorAll']('.delete-article-btn')[_0x119bec(0x30a)](_0x2a4249=>{_0x2a4249['addEventListener']('click',async _0x3bcf4f=>{const _0x275848=_0x3bcf4f['currentTarget']['dataset']['id'];confirmDeleteArticle(_0x275848);});});}function openArticleModal(_0x5ad0c6=null){const _0x48493e=a2_0x57c234,_0x3a274e=document['getElementById'](_0x48493e(0x2ca)),_0x211093=document['getElementById']('article-modal-title'),_0x1a4604=document['getElementById']('article-form'),_0x3fc6c2=document['getElementById'](_0x48493e(0x21a));_0x1a4604['reset'](),_0x3fc6c2[_0x48493e(0x296)]='';if(_0x5ad0c6)_0x211093[_0x48493e(0x14a)]='Edit\x20Article',_0x3fc6c2[_0x48493e(0x296)]=_0x5ad0c6,loadArticleData(_0x5ad0c6);else{_0x211093[_0x48493e(0x14a)]=_0x48493e(0x16c);const _0x2c634b=auth['currentUser'];if(_0x2c634b){const _0x72571=document['getElementById'](_0x48493e(0x1d4));if(_0x72571&&_0x2c634b[_0x48493e(0x369)])_0x72571['value']=_0x2c634b['displayName'];else _0x72571&&(_0x72571['value']=_0x2c634b['email']);}}_0x3a274e['classList'][_0x48493e(0x1c0)]('active');}async function loadArticleData(_0x10a196){const _0x1b24a4=a2_0x57c234;try{const _0x173a74=doc(db,'articles',_0x10a196),_0x40df57=await getDoc(_0x173a74);if(!_0x40df57['exists']()){showNotification(_0x1b24a4(0x237),'error');return;}const _0x1dca7a=_0x40df57['data']();document['getElementById'](_0x1b24a4(0x310))[_0x1b24a4(0x296)]=_0x1dca7a['title']||'',document['getElementById']('article-author')['value']=_0x1dca7a['author']||'',document['getElementById']('article-image-url')['value']=_0x1dca7a[_0x1b24a4(0x354)]||'',document['getElementById']('article-content')[_0x1b24a4(0x296)]=_0x1dca7a['content']||'';}catch(_0x483160){console['error']('Error\x20loading\x20article\x20data:',_0x483160),showNotification('Failed\x20to\x20load\x20article\x20data','error');}}async function saveArticle(){const _0x37ea95=a2_0x57c234;try{const _0x173c17=document['getElementById']('article-id')['value'],_0x12d054=document['getElementById']('article-title')['value']['trim'](),_0x4853ed=document['getElementById'](_0x37ea95(0x1d4))['value'][_0x37ea95(0x14f)](),_0x764501=document['getElementById']('article-image-url')['value']['trim'](),_0x37e5fd=document['getElementById']('article-content')[_0x37ea95(0x296)][_0x37ea95(0x14f)]();if(!_0x12d054||!_0x37e5fd){showNotification('Title\x20and\x20content\x20are\x20required',_0x37ea95(0x380));return;}const _0x706fd1=auth[_0x37ea95(0x1c4)];if(!_0x706fd1){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20articles','error');return;}const _0x5b8577={'title':_0x12d054,'author':_0x4853ed,'imageUrl':_0x764501||null,'content':_0x37e5fd,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x706fd1[_0x37ea95(0x31d)]};!_0x173c17?(_0x5b8577['createdAt']=serverTimestamp(),_0x5b8577['createdBy']=_0x706fd1[_0x37ea95(0x31d)],await addDoc(collection(db,_0x37ea95(0x351)),_0x5b8577),showNotification('Article\x20created\x20successfully','success')):(await updateDoc(doc(db,'articles',_0x173c17),_0x5b8577),showNotification(_0x37ea95(0x255),'success')),closeArticleModal(),loadArticles();}catch(_0x11ffc3){console['error']('Error\x20saving\x20article:',_0x11ffc3),showNotification('Failed\x20to\x20save\x20article:\x20'+_0x11ffc3['message'],'error');}}function closeArticleModal(){const _0x5cee14=a2_0x57c234,_0x19b21d=document['getElementById']('article-modal');_0x19b21d&&_0x19b21d['classList'][_0x5cee14(0x32c)](_0x5cee14(0x1b5));}async function confirmDeleteArticle(_0xe685b2){const _0x22a396=a2_0x57c234;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20article?\x20This\x20action\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x22a396(0x351),_0xe685b2)),loadArticles(),showNotification('Article\x20deleted\x20successfully','success');}catch(_0x506400){console['error'](_0x22a396(0x394),_0x506400),showNotification('Failed\x20to\x20delete\x20article:\x20'+_0x506400['message'],'error');}}function setupTrophyManagementSection(){const _0x84f2ba=a2_0x57c234,_0x5389ea=document[_0x84f2ba(0x37a)]('load-trophies-data');_0x5389ea&&_0x5389ea['addEventListener']('click',function(){const _0x2c785d=_0x84f2ba;this['classList']['add'](_0x2c785d(0x17f)),this['innerHTML']=_0x2c785d(0x2d1);const _0x3bcbdc=document['getElementById']('assign-trophy-image');_0x3bcbdc&&(_0x3bcbdc['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE;}),loadTrophyDefinitions()['then'](()=>{const _0xbee70d=_0x2c785d;this['classList']['remove'](_0xbee70d(0x17f)),this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';})[_0x2c785d(0x2c9)](_0x4f6822=>{console['error']('Error\x20loading\x20trophies:',_0x4f6822),this['classList']['remove']('loading'),this['innerHTML']='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error',setTimeout(()=>{this['innerHTML']='<i\x20class=\x22fas\x20fa-sync-alt\x22></i>\x20Load\x20Trophies';},0xbb8);});});const _0xff59ff=document['getElementById']('create-new-trophy-btn');_0xff59ff&&_0xff59ff[_0x84f2ba(0x392)]('click',()=>{openTrophyModal();});const _0x7d3416=document['getElementById'](_0x84f2ba(0x205));_0x7d3416&&_0x7d3416['addEventListener']('submit',_0x211eff=>{const _0x377aff=_0x84f2ba;_0x211eff[_0x377aff(0x386)](),saveTrophyDefinition();});const _0x324e32=document['getElementById']('cancel-trophy-btn');_0x324e32&&_0x324e32['addEventListener']('click',()=>{closeTrophyModal();});document[_0x84f2ba(0x31f)]('#trophy-modal\x20.close-btn,\x20#assign-trophy-modal\x20.close-btn')['forEach'](_0x58188f=>{const _0xcd70bc=_0x84f2ba;_0x58188f['addEventListener'](_0xcd70bc(0x1dd),()=>{closeTrophyModal(),closeAssignTrophyModal();});});const _0x30fc63=document['getElementById'](_0x84f2ba(0x235));_0x30fc63&&_0x30fc63['addEventListener']('click',_0x48bc87=>{const _0x3cb77a=_0x84f2ba;_0x48bc87[_0x3cb77a(0x25c)]===_0x30fc63&&closeTrophyModal();});const _0x48dec5=document['getElementById']('assign-trophy-modal');_0x48dec5&&_0x48dec5[_0x84f2ba(0x392)](_0x84f2ba(0x1dd),_0x122207=>{_0x122207['target']===_0x48dec5&&closeAssignTrophyModal();});const _0x55dded=document['getElementById'](_0x84f2ba(0x194));_0x55dded&&_0x55dded['addEventListener'](_0x84f2ba(0x2f8),_0x1c3506=>{_0x1c3506['preventDefault'](),assignTrophyToPlayer();});const _0xac5ddb=document['getElementById']('cancel-assign-btn');_0xac5ddb&&_0xac5ddb['addEventListener']('click',()=>{closeAssignTrophyModal();});const _0x3dd8d3=document[_0x84f2ba(0x37a)]('trophy-image-url');_0x3dd8d3&&(_0x3dd8d3['addEventListener']('input',updateTrophyImagePreview),_0x3dd8d3['addEventListener']('paste',()=>{setTimeout(updateTrophyImagePreview,0xa);}));}function updateTrophyImagePreview(){const _0x229ef5=a2_0x57c234,_0x1c5b0f=document['getElementById']('trophy-image-url')['value'][_0x229ef5(0x14f)](),_0x4c9546=document[_0x229ef5(0x37a)]('trophy-image-preview');if(!_0x4c9546){const _0x41330c=document['getElementById']('trophy-image-url')['closest'](_0x229ef5(0x30f)),_0x2de01f=document['createElement']('div');_0x2de01f['id']='trophy-image-preview',_0x2de01f['className']='trophy-preview-container',_0x41330c[_0x229ef5(0x156)](_0x2de01f);const _0x5294ef=document['createElement']('img');_0x5294ef['id']=_0x229ef5(0x34e),_0x5294ef['alt']='Trophy\x20Preview',_0x5294ef['onerror']=function(){this['src']=DEFAULT_TROPHY_IMAGE,this['classList']['add']('error');},_0x2de01f[_0x229ef5(0x156)](_0x5294ef);}const _0x51e6f6=document['getElementById']('trophy-preview-img');_0x1c5b0f?(_0x51e6f6[_0x229ef5(0x31b)]=_0x1c5b0f,_0x51e6f6['style'][_0x229ef5(0x2ea)]='block',_0x51e6f6['classList'][_0x229ef5(0x32c)]('error')):(_0x51e6f6[_0x229ef5(0x31b)]=DEFAULT_TROPHY_IMAGE,_0x51e6f6['style'][_0x229ef5(0x2ea)]='block');}async function loadTrophyDefinitions(){const _0x1ead33=a2_0x57c234,_0x245e89=document['getElementById']('trophies-table-body');if(!_0x245e89)return;_0x245e89['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20trophies...</td></tr>';try{const _0x50807a=collection(db,'trophyDefinitions'),_0x216e26=query(_0x50807a,orderBy('createdAt','desc')),_0x4ef674=await getDocs(_0x216e26);if(_0x4ef674[_0x1ead33(0x2b1)]){_0x245e89[_0x1ead33(0x200)]=_0x1ead33(0x267);return;}_0x245e89['innerHTML']='',_0x4ef674['forEach'](_0x1238f5=>{const _0x4f1579=_0x1ead33,_0x14786c=_0x1238f5['data'](),_0x10f6ba=document['createElement']('tr'),_0x27cede=_0x14786c['createdAt']?new Date(_0x14786c['createdAt']['seconds']*0x3e8)[_0x4f1579(0x1ab)]():_0x4f1579(0x236);_0x10f6ba['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22trophy-image-cell\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(_0x14786c['image']||DEFAULT_TROPHY_IMAGE)+_0x4f1579(0x210)+_0x14786c['name']+_0x4f1579(0x1e0)+DEFAULT_TROPHY_IMAGE+_0x4f1579(0x29a)+(_0x14786c['name']||'Untitled\x20Trophy')+_0x4f1579(0x177)+(_0x14786c['rarity']||_0x4f1579(0x34d))+'\x22>'+(_0x14786c['rarity']||'common')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x27cede+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-trophy-btn\x22\x20data-id=\x22'+_0x1238f5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-pencil-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22assign-trophy-btn\x22\x20data-id=\x22'+_0x1238f5['id']+_0x4f1579(0x2f6)+_0x1238f5['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x245e89['appendChild'](_0x10f6ba);}),setupTrophyActionButtons();}catch(_0x2c8510){console['error']('Error\x20loading\x20trophy\x20definitions:',_0x2c8510),_0x245e89['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x225\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20trophies:\x20'+_0x2c8510['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function setupTrophyActionButtons(){const _0x2207a8=a2_0x57c234;document['querySelectorAll']('.edit-trophy-btn')[_0x2207a8(0x30a)](_0x156136=>{const _0x19d45a=_0x2207a8;_0x156136[_0x19d45a(0x392)]('click',_0x216b07=>{const _0x26075d=_0x216b07['currentTarget']['dataset']['id'];openTrophyModal(_0x26075d);});}),document['querySelectorAll']('.assign-trophy-btn')[_0x2207a8(0x30a)](_0x37fdab=>{const _0x292b88=_0x2207a8;_0x37fdab['addEventListener'](_0x292b88(0x1dd),_0x2983e6=>{const _0x3298a7=_0x292b88,_0x73b3ff=_0x2983e6['currentTarget'][_0x3298a7(0x393)]['id'];openAssignTrophyModal(_0x73b3ff);});}),document[_0x2207a8(0x31f)](_0x2207a8(0x26a))['forEach'](_0x117b89=>{_0x117b89['addEventListener']('click',_0x4cdb2c=>{const _0x2aab32=_0x4cdb2c['currentTarget']['dataset']['id'];confirmDeleteTrophy(_0x2aab32);});});}function openTrophyModal(_0x18985d=null){const _0x54bb9d=a2_0x57c234,_0xfa821=document['getElementById']('trophy-modal'),_0xdff3b4=document['getElementById']('trophy-modal-title'),_0x1780cb=document['getElementById'](_0x54bb9d(0x205)),_0x86ad52=document[_0x54bb9d(0x37a)]('trophy-id');_0x1780cb[_0x54bb9d(0x2f5)](),_0x86ad52[_0x54bb9d(0x296)]='';const _0x2f9d4b=document[_0x54bb9d(0x37a)]('trophy-preview-img');_0x2f9d4b&&(_0x2f9d4b[_0x54bb9d(0x31b)]=DEFAULT_TROPHY_IMAGE,_0x2f9d4b[_0x54bb9d(0x15b)]['remove']('error')),_0x18985d?(_0xdff3b4['textContent']='Edit\x20Trophy',_0x86ad52['value']=_0x18985d,loadTrophyData(_0x18985d)):_0xdff3b4['textContent']='Create\x20New\x20Trophy',_0xfa821['classList']['add']('active');}async function loadTrophyData(_0x3d4a97){const _0x471b20=a2_0x57c234;try{const _0x3aa219=doc(db,'trophyDefinitions',_0x3d4a97),_0x118951=await getDoc(_0x3aa219);if(!_0x118951[_0x471b20(0x1de)]()){showNotification('Trophy\x20not\x20found','error');return;}const _0x36d594=_0x118951['data']();document[_0x471b20(0x37a)]('trophy-name')['value']=_0x36d594['name']||'',document['getElementById']('trophy-description')[_0x471b20(0x296)]=_0x36d594[_0x471b20(0x162)]||'',document['getElementById']('trophy-image-url')['value']=_0x36d594['image']||'',document['getElementById']('trophy-rarity')[_0x471b20(0x296)]=_0x36d594['rarity']||'common',updateTrophyImagePreview();}catch(_0x29e3b4){console['error']('Error\x20loading\x20trophy\x20data:',_0x29e3b4),showNotification('Failed\x20to\x20load\x20trophy\x20data','error');}}async function saveTrophyDefinition(){const _0x1c7fd6=a2_0x57c234;try{const _0x2db09e=document[_0x1c7fd6(0x37a)]('trophy-id')['value'],_0x319101=document[_0x1c7fd6(0x37a)]('trophy-name')['value']['trim'](),_0x2753ca=document['getElementById'](_0x1c7fd6(0x32e))[_0x1c7fd6(0x296)][_0x1c7fd6(0x14f)](),_0x101983=document[_0x1c7fd6(0x37a)]('trophy-image-url')[_0x1c7fd6(0x296)]['trim'](),_0x5e45e6=document['getElementById']('trophy-rarity')['value'];if(!_0x319101||!_0x2753ca||!_0x101983){showNotification('All\x20fields\x20are\x20required','error');return;}const _0x38d32d=auth[_0x1c7fd6(0x1c4)];if(!_0x38d32d){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20save\x20trophies','error');return;}const _0x13cc55={'name':_0x319101,'description':_0x2753ca,'image':_0x101983,'rarity':_0x5e45e6,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':_0x38d32d['email']};!_0x2db09e?(_0x13cc55[_0x1c7fd6(0x279)]=serverTimestamp(),_0x13cc55['createdBy']=_0x38d32d['email'],await addDoc(collection(db,_0x1c7fd6(0x229)),_0x13cc55),showNotification('Trophy\x20created\x20successfully','success')):(await updateDoc(doc(db,'trophyDefinitions',_0x2db09e),_0x13cc55),showNotification('Trophy\x20updated\x20successfully','success')),closeTrophyModal(),loadTrophyDefinitions();}catch(_0x23b99e){console['error']('Error\x20saving\x20trophy:',_0x23b99e),showNotification(_0x1c7fd6(0x37f)+_0x23b99e[_0x1c7fd6(0x1b3)],'error');}}function closeTrophyModal(){const _0x3f42fc=a2_0x57c234,_0x25cfd3=document['getElementById']('trophy-modal');_0x25cfd3&&_0x25cfd3['classList']['remove'](_0x3f42fc(0x1b5));}async function confirmDeleteTrophy(_0x2ae403){const _0x787af3=a2_0x57c234;if(!_0x2ae403){console['error'](_0x787af3(0x2c7));return;}if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20trophy\x20definition?\x20This\x20action\x20cannot\x20be\x20undone\x20and\x20might\x20affect\x20players\x20who\x20have\x20been\x20awarded\x20this\x20trophy.'))try{const _0x3e948b=auth['currentUser'];if(!_0x3e948b){showNotification(_0x787af3(0x2cf),'error');return;}console[_0x787af3(0x2a6)]('Attempting\x20to\x20delete\x20trophy\x20definition\x20with\x20ID:\x20'+_0x2ae403),await deleteDoc(doc(db,_0x787af3(0x229),_0x2ae403)),showNotification('Trophy\x20definition\x20deleted\x20successfully','success'),loadTrophyDefinitions();}catch(_0x26c9a0){console['error']('Error\x20deleting\x20trophy\x20definition:',_0x26c9a0),showNotification(_0x787af3(0x2ed)+_0x26c9a0[_0x787af3(0x1b3)],'error');}}async function openAssignTrophyModal(_0x5edff9){const _0x1c0f61=a2_0x57c234;try{const _0xefb322=doc(db,'trophyDefinitions',_0x5edff9),_0x5a1ac1=await getDoc(_0xefb322);if(!_0x5a1ac1[_0x1c0f61(0x1de)]()){showNotification('Trophy\x20not\x20found',_0x1c0f61(0x380));return;}const _0x57bc8f=_0x5a1ac1[_0x1c0f61(0x1af)]();document[_0x1c0f61(0x37a)](_0x1c0f61(0x1b6))['value']=_0x5edff9,document['getElementById']('assign-trophy-name')['value']=_0x57bc8f['name'],document['getElementById']('assign-trophy-image')[_0x1c0f61(0x31b)]=_0x57bc8f['image']||DEFAULT_TROPHY_IMAGE,document['getElementById']('assign-trophy-title')[_0x1c0f61(0x14a)]=_0x57bc8f['name']||_0x1c0f61(0x27c),document['getElementById']('assign-trophy-description')['textContent']=_0x57bc8f[_0x1c0f61(0x162)]||'No\x20description';const _0x528b98=document['getElementById'](_0x1c0f61(0x2b0));_0x528b98['textContent']=_0x57bc8f[_0x1c0f61(0x2bd)]||_0x1c0f61(0x34d),_0x528b98[_0x1c0f61(0x357)]='trophy-rarity\x20'+(_0x57bc8f[_0x1c0f61(0x2bd)]||'common');const _0x1f1c0a=document['getElementById']('assign-trophy-modal');_0x1f1c0a[_0x1c0f61(0x15b)]['add']('active');}catch(_0x5f4def){console['error']('Error\x20opening\x20assign\x20trophy\x20modal:',_0x5f4def),showNotification(_0x1c0f61(0x14c),'error');}}function closeAssignTrophyModal(){const _0x3d4eed=a2_0x57c234,_0x398459=document['getElementById']('assign-trophy-modal');_0x398459&&_0x398459['classList'][_0x3d4eed(0x32c)]('active');}async function assignTrophyToPlayer(){const _0x3f5ec0=a2_0x57c234;try{const _0x59392f=document[_0x3f5ec0(0x37a)](_0x3f5ec0(0x1b6))[_0x3f5ec0(0x296)],_0x91501=document['getElementById']('assign-trophy-name')['value'],_0x3b2769=document['getElementById']('assign-player-username')['value']['trim'](),_0x4f6d32=document['querySelector'](_0x3f5ec0(0x344))[_0x3f5ec0(0x296)];if(!_0x59392f||!_0x3b2769){showNotification('Trophy\x20ID\x20and\x20username\x20are\x20required',_0x3f5ec0(0x380));return;}const _0x4cd9c2=auth[_0x3f5ec0(0x1c4)];if(!_0x4cd9c2){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20assign\x20trophies','error');return;}let _0x88e9fa=null,_0x16a83d=null,_0x49ef46=null;if(_0x4f6d32===_0x3f5ec0(0x211)){const _0x205644=collection(db,'nonParticipants'),_0x6647c3=query(_0x205644,where('username','==',_0x3b2769)),_0x24bab9=await getDocs(_0x6647c3);!_0x24bab9['empty']&&(_0x88e9fa=_0x24bab9[_0x3f5ec0(0x158)][0x0],_0x16a83d=_0x88e9fa['id'],_0x49ef46=_0x88e9fa['data']());}else{const _0x19ae9b=_0x4f6d32==='D1'?'players':_0x4f6d32==='D2'?_0x3f5ec0(0x153):'playersD3',_0x47656c=collection(db,_0x19ae9b),_0x335470=query(_0x47656c,where('username','==',_0x3b2769)),_0x543ba8=await getDocs(_0x335470);!_0x543ba8['empty']&&(_0x88e9fa=_0x543ba8[_0x3f5ec0(0x158)][0x0],_0x16a83d=_0x88e9fa['id'],_0x49ef46=_0x88e9fa['data']());}if(!_0x88e9fa){showNotification('Player\x20\x22'+_0x3b2769+_0x3f5ec0(0x23d)+(_0x4f6d32==='non-participant'?'non-participants':_0x4f6d32+'\x20ladder'),'error');return;}const _0x2e46ea=collection(db,'userTrophies'),_0x44cd1d=query(_0x2e46ea,where('userId','==',_0x16a83d),where(_0x3f5ec0(0x147),'==',_0x59392f)),_0x45d862=await getDocs(_0x44cd1d);if(!_0x45d862[_0x3f5ec0(0x2b1)]){showNotification('Player\x20\x22'+_0x3b2769+'\x22\x20already\x20has\x20this\x20trophy',_0x3f5ec0(0x1ff));return;}await addDoc(collection(db,'userTrophies'),{'userId':_0x16a83d,'playerUsername':_0x3b2769,'trophyId':_0x59392f,'awardedAt':serverTimestamp(),'awardedBy':_0x4cd9c2[_0x3f5ec0(0x31d)],'ladder':_0x4f6d32}),showNotification('Trophy\x20\x22'+_0x91501+'\x22\x20awarded\x20to\x20'+_0x3b2769,'success'),closeAssignTrophyModal();}catch(_0x138502){console['error']('Error\x20assigning\x20trophy:',_0x138502),showNotification(_0x3f5ec0(0x2a3)+_0x138502['message'],'error');}}function setupInactivePlayersSection(){const _0x273c06=a2_0x57c234,_0x3b9ef9=document['getElementById']('inactive-days-filter');_0x3b9ef9&&_0x3b9ef9['addEventListener'](_0x273c06(0x33e),function(){const _0x3a1b7c=_0x273c06,_0x58bb5a=document[_0x3a1b7c(0x37a)](_0x3a1b7c(0x36a));if(_0x58bb5a)_0x58bb5a[_0x3a1b7c(0x1dd)]();});const _0x3c3bc0=document['querySelector']('.ladder-switch\x20input[value=\x22D1\x22]'),_0x20add1=document['querySelector'](_0x273c06(0x2c3));_0x3c3bc0&&_0x20add1&&(_0x3c3bc0['addEventListener']('change',function(){const _0x3bb86f=_0x273c06;if(this['checked']){currentLadder='D1';if(document[_0x3bb86f(0x37a)]('inactive-players')['style']['display']!=='none'){const _0x4f9ad8=document['getElementById']('load-inactive-players-data');if(_0x4f9ad8)_0x4f9ad8[_0x3bb86f(0x1dd)]();}}}),_0x20add1['addEventListener']('change',function(){const _0x4efa01=_0x273c06;if(this[_0x4efa01(0x288)]){currentLadder='D2';if(document[_0x4efa01(0x37a)]('inactive-players')['style']['display']!=='none'){const _0x1ec5ba=document[_0x4efa01(0x37a)](_0x4efa01(0x36a));if(_0x1ec5ba)_0x1ec5ba['click']();}}}));const _0x4cc533=document['getElementById']('inactive-players-search');_0x4cc533&&_0x4cc533['addEventListener'](_0x273c06(0x1cd),debounce(function(){const _0x4fb188=_0x273c06,_0x204633=_0x4cc533['value'][_0x4fb188(0x1ee)](),_0x51cbf5=document['querySelectorAll']('#inactive-players-table-body\x20tr');_0x51cbf5['forEach'](_0x2031cb=>{const _0x1bb3e2=_0x4fb188;if(_0x2031cb['querySelector']('.loading-cell')||_0x2031cb[_0x1bb3e2(0x29e)](_0x1bb3e2(0x31a))||_0x2031cb['querySelector']('.error-state'))return;const _0x523f21=_0x2031cb[_0x1bb3e2(0x285)][0x0]?.[_0x1bb3e2(0x14a)]['toLowerCase']()||'',_0x5e25c1=_0x2031cb[_0x1bb3e2(0x285)][0x5]?.['textContent']['toLowerCase']()||'';_0x523f21['includes'](_0x204633)||_0x5e25c1[_0x1bb3e2(0x2b4)](_0x204633)?_0x2031cb[_0x1bb3e2(0x1c6)]['display']='':_0x2031cb[_0x1bb3e2(0x1c6)]['display']='none';});},0x12c)),document['addEventListener'](_0x273c06(0x1dd),function(_0x5e8777){const _0x134f77=_0x273c06;if(_0x5e8777['target']['closest']('.view-player-btn')){const _0x3c6408=_0x5e8777['target'][_0x134f77(0x182)](_0x134f77(0x2d6)),_0xa153dc=_0x3c6408['dataset']['username'];_0xa153dc&&alert(_0x134f77(0x372)+_0xa153dc+_0x134f77(0x181));}}),console['log']('Inactive\x20players\x20section\x20initialized');}async function loadInactivePlayersData(){const _0x28c6fa=a2_0x57c234,_0xe7e0c1=document[_0x28c6fa(0x37a)]('inactive-players-table-body');if(!_0xe7e0c1)return;_0xe7e0c1['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20inactive\x20players...</td></tr>';try{const _0x5140c6=document['getElementById']('inactive-days-filter'),_0x5f037d=_0x5140c6?parseInt(_0x5140c6['value'])||0x0:0x0,_0x10cea9=collection(db,currentLadder==='D1'?'players':'playersD2'),_0x5cb049=await getDocs(_0x10cea9);if(_0x5cb049['empty']){_0xe7e0c1['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20players\x20found\x20in\x20this\x20ladder</td></tr>';return;}const _0x4521a5=[];_0x5cb049['forEach'](_0x183526=>{const _0x4c878d=_0x28c6fa,_0xb94531=_0x183526['data']();_0x4521a5['push']({..._0xb94531,'id':_0x183526['id'],'username':_0xb94531['username']||_0x4c878d(0x216)});}),console['log'](_0x28c6fa(0x1b9)+_0x4521a5['length']+'\x20total\x20players\x20in\x20the\x20'+currentLadder+'\x20ladder');const _0x5eed5f=currentLadder==='D1'?'approvedMatches':'approvedMatchesD2',_0x294001=_0x4521a5[_0x28c6fa(0x193)](async _0x5278ee=>{const _0x55eca3=_0x28c6fa;try{const _0x1890b9=collection(db,_0x5eed5f),_0x520c5a=query(_0x1890b9,or(where(_0x55eca3(0x18a),'==',_0x5278ee['username']),where('loserUsername','==',_0x5278ee[_0x55eca3(0x320)])),orderBy('approvedAt','desc'),limit(0x1)),_0x3a6bb5=await getDocs(_0x520c5a);if(!_0x3a6bb5['empty']){const _0xbeb634=_0x3a6bb5[_0x55eca3(0x158)][0x0][_0x55eca3(0x1af)](),_0x1c0287=_0xbeb634[_0x55eca3(0x203)]?new Date(_0xbeb634['approvedAt']['seconds']*0x3e8):null,_0x2584fa=new Date(),_0x57097e=_0x1c0287?Math['floor']((_0x2584fa-_0x1c0287)/(0x3e8*0x3c*0x3c*0x18)):null,_0x4e25b4=_0xbeb634[_0x55eca3(0x18a)]===_0x5278ee['username']?_0xbeb634['loserUsername']:_0xbeb634['winnerUsername'],_0x43d557=_0xbeb634['winnerUsername']===_0x5278ee['username']?'Won':_0x55eca3(0x20f);return{..._0x5278ee,'lastMatch':{'date':_0x1c0287?_0x1c0287['toLocaleDateString']():'N/A','opponent':_0x4e25b4||'Unknown','result':_0x43d557,'timestamp':_0x1c0287||new Date(0x0),'daysSinceMatch':_0x57097e||Number[_0x55eca3(0x38e)]}};}else return{..._0x5278ee,'lastMatch':{'date':_0x55eca3(0x2b7),'opponent':'N/A','result':_0x55eca3(0x236),'timestamp':new Date(0x0),'daysSinceMatch':Number['MAX_SAFE_INTEGER']}};}catch(_0x568f09){return console[_0x55eca3(0x380)]('Error\x20fetching\x20matches\x20for\x20'+_0x5278ee[_0x55eca3(0x320)]+':',_0x568f09),{..._0x5278ee,'lastMatch':{'date':_0x55eca3(0x2c6),'opponent':'Error','result':'Error','timestamp':new Date(0x0),'daysSinceMatch':0x0}};}});let _0x334b0d=await Promise[_0x28c6fa(0x29c)](_0x294001);_0x334b0d['sort']((_0x3390cb,_0x238a7c)=>_0x238a7c[_0x28c6fa(0x2ef)]['daysSinceMatch']-_0x3390cb[_0x28c6fa(0x2ef)]['daysSinceMatch']);_0x5f037d>0x0&&(_0x334b0d=_0x334b0d[_0x28c6fa(0x25b)](_0x35f4a3=>_0x35f4a3['lastMatch']['daysSinceMatch']>=_0x5f037d));_0xe7e0c1['innerHTML']='';if(_0x334b0d['length']===0x0){_0xe7e0c1['innerHTML']=_0x28c6fa(0x1aa);return;}_0x334b0d['forEach'](_0x32817e=>{const _0xcf3ea1=_0x28c6fa,_0x4349a3=document['createElement']('tr'),_0x2f950b=_0x32817e['lastMatch']['daysSinceMatch']>0x1e?_0xcf3ea1(0x373):_0x32817e['lastMatch']['daysSinceMatch']>0xe?_0xcf3ea1(0x271):'';_0x4349a3['className']=_0x2f950b,_0x4349a3[_0xcf3ea1(0x200)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x32817e['username']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x32817e['eloRating']||0x4b0)+_0xcf3ea1(0x35c)+_0x32817e[_0xcf3ea1(0x2ef)]['date']+_0xcf3ea1(0x35c)+(_0x32817e['lastMatch']['daysSinceMatch']===Number['MAX_SAFE_INTEGER']?'N/A':_0x32817e['lastMatch']['daysSinceMatch'])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x32817e[_0xcf3ea1(0x2ef)][_0xcf3ea1(0x26b)]===_0xcf3ea1(0x2b7)?'No\x20matches\x20found':_0x32817e['lastMatch']['result']+'\x20vs\x20'+_0x32817e[_0xcf3ea1(0x2ef)][_0xcf3ea1(0x1a9)])+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-player-btn\x22\x20data-username=\x22'+_0x32817e['username']+'\x22\x20title=\x22View\x20Player\x20Details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0xe7e0c1['appendChild'](_0x4349a3);}),console['log']('Displaying\x20'+_0x334b0d['length']+'\x20inactive\x20players');}catch(_0x2fbcc7){console['error']('Error\x20loading\x20inactive\x20players:',_0x2fbcc7),_0xe7e0c1['innerHTML']=_0x28c6fa(0x207)+_0x2fbcc7['message']+'</td></tr>';}}function setupHighlightButtons(){const _0x22b485=a2_0x57c234;console['log']('Setting\x20up\x20highlight\x20buttons');const _0x5718d5=document['getElementById']('create-match-highlight-btn');_0x5718d5&&_0x5718d5[_0x22b485(0x392)]('click',function(){console['log']('Match\x20highlight\x20button\x20clicked'),openHighlightModal('match');});const _0x2f13f5=document[_0x22b485(0x37a)]('create-creator-highlight-btn');_0x2f13f5&&_0x2f13f5[_0x22b485(0x392)]('click',function(){console['log']('Creator\x20highlight\x20button\x20clicked'),openHighlightModal('creator');});const _0x217109=document['getElementById']('create-achievement-highlight-btn');_0x217109&&_0x217109[_0x22b485(0x392)](_0x22b485(0x1dd),function(){console['log']('Achievement\x20highlight\x20button\x20clicked'),openHighlightModal('achievement');});}function openHighlightModal(_0x4c35ba=a2_0x57c234(0x29f)){const _0x15fc78=a2_0x57c234;console['log'](_0x15fc78(0x345)+_0x4c35ba);const _0x3460c6=document['getElementById']('highlight-modal'),_0x4762bc=document['getElementById'](_0x15fc78(0x214)),_0x36d7b0=document['getElementById']('highlight-modal-title'),_0x2f3d17=document['getElementById']('highlight-id');if(!_0x3460c6||!_0x4762bc||!_0x36d7b0){console['error']('Essential\x20highlight\x20modal\x20elements\x20not\x20found!');return;}_0x4762bc['reset'](),_0x2f3d17['value']='';const _0x4c6f8b=['match','creator',_0x15fc78(0x350)],_0x3e301d=!_0x4c6f8b['includes'](_0x4c35ba);if(_0x3e301d){const _0xd38d6e=_0x4c35ba;_0x2f3d17['value']=_0xd38d6e,_0x36d7b0['textContent']='Loading...',loadHighlightDataAdmin(_0xd38d6e);}else{const _0xae7caa=_0x4c35ba;document['getElementById']('highlight-type')['value']=_0xae7caa,_0x36d7b0[_0x15fc78(0x14a)]='Create\x20New\x20'+getHighlightTypeName(_0xae7caa),toggleHighlightFields(_0xae7caa);const _0x40a982=auth['currentUser'];_0x40a982&&document['getElementById']('highlight-submitted-by')&&(document['getElementById']('highlight-submitted-by')['value']=_0x40a982[_0x15fc78(0x369)]||_0x40a982[_0x15fc78(0x31d)]);}_0x3460c6['classList'][_0x15fc78(0x1c0)]('active');}function toggleHighlightFields(_0x2534e9){const _0x339f61=a2_0x57c234;console[_0x339f61(0x2a6)]('Toggling\x20fields\x20for\x20highlight\x20type:\x20'+_0x2534e9);const _0x5a5689=document['getElementById']('highlight-form');if(!_0x5a5689)return;const _0x3262bb=_0x5a5689['querySelectorAll'](_0x339f61(0x22c));_0x3262bb[_0x339f61(0x30a)](_0x31f6b1=>_0x31f6b1[_0x339f61(0x1c6)]['display']='none');const _0x3a02a9=document[_0x339f61(0x37a)]('highlight-video-preview-container');if(_0x3a02a9)_0x3a02a9[_0x339f61(0x1c6)]['display']=_0x339f61(0x297);const _0x5a5a51=[_0x339f61(0x39c),'highlight-description-container','highlight-submitted-by-container'];_0x5a5a51[_0x339f61(0x30a)](_0x368bbe=>{const _0x526cfb=_0x339f61,_0x20101e=document['getElementById'](_0x368bbe);if(_0x20101e)_0x20101e[_0x526cfb(0x1c6)][_0x526cfb(0x2ea)]='block';});if(_0x2534e9==='match'){const _0x2402c9=['highlight-video-container','highlight-match-info-container',_0x339f61(0x2f0),'highlight-match-date-container',_0x339f61(0x16a),'highlight-match-link-container'];_0x2402c9['forEach'](_0x4c7b39=>{const _0x8894ef=_0x339f61,_0x1c9257=document['getElementById'](_0x4c7b39);_0x1c9257&&(_0x4c7b39==='highlight-players-container'?_0x1c9257[_0x8894ef(0x1c6)][_0x8894ef(0x2ea)]='flex':_0x1c9257['style']['display']=_0x8894ef(0x35f));});const _0x71b2ed=document[_0x339f61(0x37a)](_0x339f61(0x360));if(_0x71b2ed){_0x71b2ed[_0x339f61(0x376)]=!![];const _0x104157=_0x71b2ed['previousElementSibling'];if(_0x104157)_0x104157['innerHTML']='YouTube\x20Video\x20ID*';}if(_0x3a02a9)_0x3a02a9[_0x339f61(0x1c6)]['display']='block';updateHighlightVideoPreview();}else{if(_0x2534e9===_0x339f61(0x1ad)){const _0xc93f54=[_0x339f61(0x2f0),'highlight-map-creator-container','highlight-map-version-container','highlight-creator-image-container','highlight-video-container'];_0xc93f54['forEach'](_0x5da2b9=>{const _0x5cba5a=_0x339f61,_0x489dae=document[_0x5cba5a(0x37a)](_0x5da2b9);if(_0x489dae)_0x489dae[_0x5cba5a(0x1c6)]['display']='block';});const _0x1f0100=document[_0x339f61(0x37a)]('highlight-video-id');if(_0x1f0100){_0x1f0100['required']=![];const _0x55cc57=_0x1f0100['previousElementSibling'];if(_0x55cc57)_0x55cc57['innerHTML']=_0x339f61(0x1e8);}}else{if(_0x2534e9==='achievement'){const _0x1ab235=['highlight-achievement-player-container','highlight-achievement-type-container','highlight-achievement-details-container','highlight-player-profile-container','highlight-achievement-image-container',_0x339f61(0x189)];_0x1ab235['forEach'](_0x364dd8=>{const _0x3da86d=document['getElementById'](_0x364dd8);if(_0x3da86d)_0x3da86d['style']['display']='block';});const _0x30f7bd=document[_0x339f61(0x37a)]('highlight-video-id');if(_0x30f7bd){_0x30f7bd[_0x339f61(0x376)]=![];const _0x1d562b=_0x30f7bd['previousElementSibling'];if(_0x1d562b)_0x1d562b[_0x339f61(0x200)]=_0x339f61(0x1e8);}}}}}async function loadHighlightDataAdmin(_0x22b4d4){const _0x5718f4=a2_0x57c234;try{const _0x9d2f4b=doc(db,_0x5718f4(0x331),_0x22b4d4),_0x5d96f1=await getDoc(_0x9d2f4b);if(!_0x5d96f1['exists']()){showNotification('Highlight\x20not\x20found','error');return;}const _0x42e0d3=_0x5d96f1['data'](),_0x184db8=_0x42e0d3[_0x5718f4(0x2e5)]||_0x5718f4(0x29f);document['getElementById']('highlight-modal-title')['textContent']='Edit\x20'+getHighlightTypeName(_0x184db8),document['getElementById']('highlight-type')['value']=_0x184db8,toggleHighlightFields(_0x184db8),document[_0x5718f4(0x37a)]('highlight-title')[_0x5718f4(0x296)]=_0x42e0d3[_0x5718f4(0x1bf)]||'',document['getElementById']('highlight-description')[_0x5718f4(0x296)]=_0x42e0d3['description']||'',document['getElementById']('highlight-submitted-by')[_0x5718f4(0x296)]=_0x42e0d3['submittedBy']||'';_0x42e0d3['videoId']&&(document['getElementById']('highlight-video-id')['value']=_0x42e0d3['videoId'],updateHighlightVideoPreview());if(_0x184db8==='match'){document[_0x5718f4(0x37a)]('highlight-match-info')['value']=_0x42e0d3['matchInfo']||'',document['getElementById']('highlight-map')['value']=_0x42e0d3[_0x5718f4(0x193)]||'';if(_0x42e0d3['matchDate']){const _0xb71f29=new Date(_0x42e0d3['matchDate']['seconds']*0x3e8);document['getElementById']('highlight-match-date')[_0x5718f4(0x296)]=_0xb71f29['toISOString']()['split']('T')[0x0];}document['getElementById']('highlight-winner-name')['value']=_0x42e0d3['winnerName']||'',document[_0x5718f4(0x37a)]('highlight-winner-score')[_0x5718f4(0x296)]=_0x42e0d3['winnerScore']||'',document['getElementById']('highlight-loser-name')[_0x5718f4(0x296)]=_0x42e0d3['loserName']||'',document[_0x5718f4(0x37a)]('highlight-loser-score')['value']=_0x42e0d3['loserScore']||'',document[_0x5718f4(0x37a)]('highlight-match-link')['value']=_0x42e0d3['matchLink']||'';}else{if(_0x184db8==='creator')document['getElementById']('highlight-map')['value']=_0x42e0d3[_0x5718f4(0x193)]||'',document['getElementById'](_0x5718f4(0x2f7))[_0x5718f4(0x296)]=_0x42e0d3['mapCreator']||'',document['getElementById']('highlight-map-version')['value']=_0x42e0d3[_0x5718f4(0x195)]||'',document['getElementById']('highlight-creator-image')['value']=_0x42e0d3[_0x5718f4(0x1c5)]||'';else _0x184db8==='achievement'&&(document['getElementById'](_0x5718f4(0x2ba))['value']=_0x42e0d3[_0x5718f4(0x1ba)]||'',document['getElementById']('highlight-achievement-type')['value']=_0x42e0d3['achievementType']||'',document[_0x5718f4(0x37a)]('highlight-achievement-details')['value']=_0x42e0d3['achievementDetails']||'',document['getElementById'](_0x5718f4(0x2df))['value']=_0x42e0d3['playerProfileUrl']||'',document['getElementById'](_0x5718f4(0x2da))['value']=_0x42e0d3['achievementImageUrl']||'');}}catch(_0x1ee3f4){console['error']('Error\x20loading\x20highlight:',_0x1ee3f4),showNotification('Error\x20loading\x20highlight:\x20'+_0x1ee3f4['message'],_0x5718f4(0x380));}}async function saveHighlight(){const _0x48ba5e=a2_0x57c234;try{const _0x46c260=document['getElementById']('highlight-id')?.['value']||'',_0x2ae8a5=document[_0x48ba5e(0x37a)]('highlight-type')?.['value']||_0x48ba5e(0x29f),_0x48bbfa={'title':document['getElementById']('highlight-title')?.[_0x48ba5e(0x296)]?.['trim']()||'','description':document[_0x48ba5e(0x37a)]('highlight-description')?.['value']?.[_0x48ba5e(0x14f)]()||'','submittedBy':document['getElementById']('highlight-submitted-by')?.['value']?.['trim']()||'','videoId':document[_0x48ba5e(0x37a)]('highlight-video-id')?.[_0x48ba5e(0x296)]?.['trim']()||null,'type':_0x2ae8a5};if(!_0x48bbfa['title']){showNotification('Title\x20is\x20required','error');return;}if(_0x2ae8a5==='match'){_0x48bbfa[_0x48ba5e(0x290)]=document['getElementById']('highlight-match-info')?.[_0x48ba5e(0x296)]?.['trim']()||'',_0x48bbfa['map']=document[_0x48ba5e(0x37a)](_0x48ba5e(0x303))?.['value']?.['trim']()||'';const _0x4873b7=document['getElementById'](_0x48ba5e(0x302)),_0x161ec1=_0x4873b7?.[_0x48ba5e(0x296)]||'';_0x48bbfa[_0x48ba5e(0x30d)]=_0x161ec1?Timestamp['fromDate'](new Date(_0x161ec1)):null,_0x48bbfa[_0x48ba5e(0x265)]=document[_0x48ba5e(0x37a)]('highlight-winner-name')?.['value']?.['trim']()||'',_0x48bbfa[_0x48ba5e(0x1a0)]=document['getElementById']('highlight-winner-score')?.['value']?.['trim']()||'',_0x48bbfa['loserName']=document['getElementById']('highlight-loser-name')?.['value']?.[_0x48ba5e(0x14f)]()||'',_0x48bbfa['loserScore']=document[_0x48ba5e(0x37a)](_0x48ba5e(0x294))?.['value']?.['trim']()||'',_0x48bbfa[_0x48ba5e(0x27d)]=document['getElementById']('highlight-match-link')?.['value']?.['trim']()||'';if(!_0x48bbfa['videoId']){showNotification(_0x48ba5e(0x1d0),'error');return;}}else{if(_0x2ae8a5==='creator'){_0x48bbfa['map']=document['getElementById']('highlight-map')?.['value']?.['trim']()||'',_0x48bbfa['mapCreator']=document['getElementById'](_0x48ba5e(0x2f7))?.[_0x48ba5e(0x296)]?.['trim']()||'',_0x48bbfa['mapVersion']=document[_0x48ba5e(0x37a)]('highlight-map-version')?.[_0x48ba5e(0x296)]?.['trim']()||'',_0x48bbfa['creatorImageUrl']=document['getElementById'](_0x48ba5e(0x1fa))?.['value']?.['trim']()||'';if(!_0x48bbfa['mapCreator']){showNotification('Map\x20Creator\x20is\x20required','error');return;}}else{if(_0x2ae8a5===_0x48ba5e(0x350)){_0x48bbfa['achievementPlayer']=document[_0x48ba5e(0x37a)](_0x48ba5e(0x2ba))?.['value']?.[_0x48ba5e(0x14f)]()||'',_0x48bbfa['achievementType']=document['getElementById'](_0x48ba5e(0x208))?.[_0x48ba5e(0x296)]?.[_0x48ba5e(0x14f)]()||'',_0x48bbfa['achievementDetails']=document[_0x48ba5e(0x37a)]('highlight-achievement-details')?.['value']?.['trim']()||'',_0x48bbfa['playerProfileUrl']=document[_0x48ba5e(0x37a)](_0x48ba5e(0x2df))?.['value']?.['trim']()||'',_0x48bbfa['achievementImageUrl']=document[_0x48ba5e(0x37a)]('highlight-achievement-image')?.[_0x48ba5e(0x296)]?.['trim']()||'';if(!_0x48bbfa['achievementPlayer']){showNotification('Player\x20Name\x20is\x20required',_0x48ba5e(0x380));return;}}}}_0x46c260?(_0x48bbfa['updatedAt']=serverTimestamp(),await updateDoc(doc(db,'highlights',_0x46c260),_0x48bbfa),showNotification(_0x48ba5e(0x180),'success')):(_0x48bbfa['createdAt']=serverTimestamp(),await addDoc(collection(db,'highlights'),_0x48bbfa),showNotification(_0x48ba5e(0x2fb),'success')),closeHighlightModal(),loadHighlightsAdmin();}catch(_0x2ad40e){console['error']('Error\x20saving\x20highlight:',_0x2ad40e),showNotification('Error\x20saving\x20highlight:\x20'+_0x2ad40e['message'],'error');}}function closeHighlightModal(){const _0x35fae2=a2_0x57c234,_0xda8432=document[_0x35fae2(0x37a)]('highlight-modal');if(_0xda8432)_0xda8432['classList']['remove']('active');}function getHighlightTypeName(_0x3e116a){const _0x21a0a0=a2_0x57c234;switch(_0x3e116a){case _0x21a0a0(0x29f):return _0x21a0a0(0x1c9);case'creator':return _0x21a0a0(0x252);case _0x21a0a0(0x350):return'Player\x20Achievement';default:return'Highlight';}}function updateHighlightVideoPreview(){const _0xa7e385=a2_0x57c234,_0x2c2716=document['getElementById']('highlight-video-id'),_0x11dc16=document['getElementById']('highlight-video-preview-container'),_0x2d39d=document['getElementById']('highlight-video-preview');if(!_0x2c2716||!_0x2d39d||!_0x11dc16)return;const _0x5ae736=_0x2c2716[_0xa7e385(0x296)]['trim']();_0x5ae736&&/^[a-zA-Z0-9_-]{11}$/['test'](_0x5ae736)?(_0x2d39d['src']=_0xa7e385(0x219)+_0x5ae736,_0x11dc16['style']['display']='block'):(_0x2d39d['src']='',_0x11dc16[_0xa7e385(0x1c6)]['display']='none');}async function loadHighlightsAdmin(){const _0x371ee5=a2_0x57c234,_0x193b12=document[_0x371ee5(0x37a)]('highlights-table-body');if(!_0x193b12)return;_0x193b12['innerHTML']=_0x371ee5(0x239);try{const _0xbb1558=query(collection(db,'highlights'),orderBy(_0x371ee5(0x279),_0x371ee5(0x1f6))),_0x585d0c=await getDocs(_0xbb1558);if(_0x585d0c[_0x371ee5(0x2b1)]){_0x193b12['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22empty-state\x22>No\x20highlights\x20found</td></tr>';return;}_0x193b12[_0x371ee5(0x200)]='',_0x585d0c['forEach'](_0x156de2=>{const _0x54aac7=_0x371ee5,_0x50e532=_0x156de2['data'](),_0x5dd087=document['createElement']('tr'),_0x494ef4=_0x50e532['createdAt']?new Date(_0x50e532['createdAt'][_0x54aac7(0x2bf)]*0x3e8)[_0x54aac7(0x1dc)]():_0x54aac7(0x236);let _0x4fe30b='Unknown',_0x92174a='';switch(_0x50e532['type']){case'match':_0x4fe30b='Match',_0x92174a='match-type';break;case'creator':_0x4fe30b=_0x54aac7(0x23f),_0x92174a='creator-type';break;case _0x54aac7(0x350):_0x4fe30b='Achievement',_0x92174a='achievement-type';break;}_0x5dd087['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x50e532['title']||'Untitled')+_0x54aac7(0x2fc)+_0x92174a+'\x22>'+_0x4fe30b+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x494ef4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x50e532[_0x54aac7(0x341)]||'Unknown')+_0x54aac7(0x35c)+(_0x50e532[_0x54aac7(0x258)]?'<i\x20class=\x22fas\x20fa-video\x22></i>\x20Yes':_0x54aac7(0x312))+_0x54aac7(0x198)+_0x156de2['id']+_0x54aac7(0x25f)+_0x156de2['id']+_0x54aac7(0x20e),_0x193b12['appendChild'](_0x5dd087);}),document['querySelectorAll']('.edit-highlight-btn')['forEach'](_0x55faef=>{_0x55faef['addEventListener']('click',_0x14b8d7=>{openHighlightModal(_0x14b8d7['currentTarget']['dataset']['id']);});}),document['querySelectorAll']('.delete-highlight-btn')['forEach'](_0x4a7db8=>{const _0x573c9f=_0x371ee5;_0x4a7db8[_0x573c9f(0x392)](_0x573c9f(0x1dd),_0x483281=>{const _0x2f4563=_0x573c9f;confirmDeleteHighlight(_0x483281['currentTarget'][_0x2f4563(0x393)]['id']);});});}catch(_0x399e1c){console['error']('Error\x20loading\x20highlights:',_0x399e1c),_0x193b12[_0x371ee5(0x200)]=_0x371ee5(0x1f5)+_0x399e1c[_0x371ee5(0x1b3)]+_0x371ee5(0x38c);}}async function confirmDeleteHighlight(_0x3a8f55){const _0x34a8e3=a2_0x57c234;if(confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20this\x20highlight?\x20This\x20cannot\x20be\x20undone.'))try{await deleteDoc(doc(db,_0x34a8e3(0x331),_0x3a8f55)),showNotification(_0x34a8e3(0x1d6),'success'),loadHighlightsAdmin();}catch(_0x27a0ae){console[_0x34a8e3(0x380)]('Error\x20deleting\x20highlight:',_0x27a0ae),showNotification('Error\x20deleting\x20highlight:\x20'+_0x27a0ae[_0x34a8e3(0x1b3)],'error');}}function setupCreateTestMatchModal(){const _0x4189df=a2_0x57c234;console['log']('Setting\x20up\x20create\x20test\x20match\x20modal\x20events');const _0x13c9e5=document['getElementById']('create-test-match-modal'),_0x28c4f7=document[_0x4189df(0x37a)]('create-test-match-form');if(!_0x13c9e5){console[_0x4189df(0x380)]('Create\x20test\x20match\x20modal\x20not\x20found\x20in\x20DOM');return;}if(!_0x28c4f7){console[_0x4189df(0x380)]('Create\x20test\x20match\x20form\x20not\x20found\x20in\x20DOM');return;}const _0x88f95e=_0x13c9e5['cloneNode'](!![]);_0x13c9e5['parentNode']['replaceChild'](_0x88f95e,_0x13c9e5);const _0x5ab89d=_0x88f95e['querySelector']('#create-test-match-form');_0x88f95e['addEventListener']('click',function(_0x195768){_0x195768['target']===_0x88f95e&&(console['log']('Modal\x20background\x20clicked'),closeCreateTestMatchModal());});const _0x33dd74=_0x88f95e['querySelector'](_0x4189df(0x231));_0x33dd74&&_0x33dd74['addEventListener'](_0x4189df(0x1dd),function(_0x35e7c6){const _0x1d7791=_0x4189df;_0x35e7c6['preventDefault'](),_0x35e7c6['stopPropagation'](),console[_0x1d7791(0x2a6)]('Modal\x20close\x20button\x20clicked'),closeCreateTestMatchModal();});const _0x4e3f4c=_0x88f95e['querySelector']('#cancel-create-test-match-btn');_0x4e3f4c&&_0x4e3f4c['addEventListener'](_0x4189df(0x1dd),function(_0x26222b){const _0x1e843a=_0x4189df;_0x26222b['preventDefault'](),_0x26222b[_0x1e843a(0x395)](),console['log']('Modal\x20cancel\x20button\x20clicked'),closeCreateTestMatchModal();});if(_0x5ab89d){_0x5ab89d[_0x4189df(0x392)](_0x4189df(0x2f8),function(_0x279a5b){const _0x23ff45=_0x4189df;_0x279a5b[_0x23ff45(0x386)](),_0x279a5b['stopPropagation'](),console[_0x23ff45(0x2a6)]('Create\x20test\x20match\x20form\x20submitted'),createTestMatch();});const _0x348b1f=_0x5ab89d['querySelector']('button[type=\x22submit\x22]');_0x348b1f&&_0x348b1f[_0x4189df(0x392)]('click',function(_0x45efdc){_0x45efdc['preventDefault'](),_0x45efdc['stopPropagation'](),console['log']('Submit\x20button\x20clicked\x20directly'),createTestMatch();});}console['log']('Create\x20test\x20match\x20modal\x20setup\x20complete');}function setupManageHighlightsSection(){const _0x5584b9=a2_0x57c234;console['log']('Setting\x20up\x20Manage\x20Highlights\x20section'),setupHighlightButtons();const _0x445f7a=document['getElementById'](_0x5584b9(0x214));_0x445f7a&&_0x445f7a['addEventListener']('submit',_0x4ca46d=>{_0x4ca46d['preventDefault'](),saveHighlight();});const _0x58e38e=document['getElementById']('cancel-highlight-btn');_0x58e38e&&_0x58e38e['addEventListener']('click',closeHighlightModal);const _0x43308f=document['querySelector']('#highlight-modal\x20.close-btn');_0x43308f&&_0x43308f[_0x5584b9(0x392)](_0x5584b9(0x1dd),closeHighlightModal);const _0xcb6964=document['getElementById'](_0x5584b9(0x2a4));_0xcb6964&&_0xcb6964['addEventListener'](_0x5584b9(0x1dd),_0x265fc6=>{_0x265fc6['target']===_0xcb6964&&closeHighlightModal();});const _0x54211b=document['getElementById']('highlight-video-id');_0x54211b&&_0x54211b[_0x5584b9(0x392)]('input',()=>{updateHighlightVideoPreview();}),console['log']('Manage\x20Highlights\x20section\x20initialized');}function setupManageMatchesSection(){const _0x4b5b07=a2_0x57c234;console['log'](_0x4b5b07(0x301));const _0x14d766=document[_0x4b5b07(0x37a)]('matches-prev-page'),_0x4554a5=document['getElementById'](_0x4b5b07(0x24a));_0x14d766&&_0x14d766[_0x4b5b07(0x392)]('click',()=>{const _0x354802=_0x4b5b07,_0x2a532c=currentLadder['toLowerCase']();loadMatchesData(matchesPagination[_0x2a532c][_0x354802(0x317)]-0x1);});_0x4554a5&&_0x4554a5[_0x4b5b07(0x392)]('click',()=>{const _0x8280f2=_0x4b5b07,_0x2653d2=currentLadder[_0x8280f2(0x1ee)]();loadMatchesData(matchesPagination[_0x2653d2]['page']+0x1);});const _0x1b83f8=document[_0x4b5b07(0x37a)]('apply-matches-filters'),_0x20c020=document['getElementById']('reset-matches-filters');_0x1b83f8&&_0x1b83f8['addEventListener'](_0x4b5b07(0x1dd),applyMatchesFilters);_0x20c020&&_0x20c020[_0x4b5b07(0x392)]('click',resetMatchesFilters);const _0x47c88f=document['getElementById']('matches-search');_0x47c88f&&_0x47c88f['addEventListener']('input',debounce(filterMatchesTable,0x12c));const _0x4188cf=document['getElementById']('resimulate-match-btn');_0x4188cf&&_0x4188cf[_0x4b5b07(0x392)]('click',openResimulateModal);const _0x499849=document['getElementById'](_0x4b5b07(0x28c));if(_0x499849){const _0x35182d=_0x499849['querySelector']('.close');_0x35182d&&_0x35182d[_0x4b5b07(0x392)]('click',closeResimulateModal),_0x499849['addEventListener'](_0x4b5b07(0x1dd),_0x3add85=>{_0x3add85['target']===_0x499849&&closeResimulateModal();});}setupCreateTestMatchButton(),setupCreateTestMatchModal(),console['log']('Manage\x20Matches\x20section\x20initialized\x20with\x20resimulate\x20functionality');}function openCreateTestMatchModal(){const _0x1eed3e=a2_0x57c234;console[_0x1eed3e(0x2a6)]('Opening\x20create\x20test\x20match\x20modal');const _0x3bb44e=document['getElementById']('create-test-match-modal'),_0x2099eb=document[_0x1eed3e(0x37a)]('create-test-match-form');if(!_0x3bb44e){console[_0x1eed3e(0x380)](_0x1eed3e(0x359)),showNotification('Create\x20test\x20match\x20modal\x20not\x20found',_0x1eed3e(0x380));return;}if(!_0x2099eb){console['error']('Create\x20test\x20match\x20form\x20not\x20found'),showNotification(_0x1eed3e(0x242),'error');return;}_0x2099eb['reset']();const _0x4b0828=document['querySelectorAll']('input[name=\x22test-match-ladder\x22]');let _0x117654=![];_0x4b0828['forEach'](_0x583e64=>{const _0x5973e2=_0x1eed3e;console['log']('Found\x20radio\x20with\x20value:',_0x583e64[_0x5973e2(0x296)]),_0x583e64['value']===currentLadder&&(_0x583e64[_0x5973e2(0x288)]=!![],_0x117654=!![],console['log'](_0x5973e2(0x316),currentLadder));});if(!_0x117654){console['warn']('No\x20radio\x20button\x20found\x20for\x20current\x20ladder:',currentLadder);const _0x2d864a=document['querySelector'](_0x1eed3e(0x2c5));_0x2d864a&&(_0x2d864a['checked']=!![],console[_0x1eed3e(0x2a6)]('Defaulted\x20to\x20D1\x20ladder'));}const _0xde11bc=document[_0x1eed3e(0x37a)]('test-match-date');if(_0xde11bc){const _0xc6fc9c=new Date()[_0x1eed3e(0x324)]()[_0x1eed3e(0x38a)]('T')[0x0];_0xde11bc['value']=_0xc6fc9c;}_0x3bb44e['style']['display']=_0x1eed3e(0x20a),_0x3bb44e['style']['visibility']=_0x1eed3e(0x2fa),_0x3bb44e[_0x1eed3e(0x1c6)]['opacity']='1',_0x3bb44e[_0x1eed3e(0x15b)][_0x1eed3e(0x1c0)](_0x1eed3e(0x1b5)),console[_0x1eed3e(0x2a6)]('Modal\x20should\x20now\x20be\x20visible');const _0x4afcd2=document['getElementById'](_0x1eed3e(0x1ae));_0x4afcd2&&setTimeout(()=>{const _0x80f7dd=_0x1eed3e;_0x4afcd2[_0x80f7dd(0x21b)]();},0x64);}function closeCreateTestMatchModal(){const _0x39bff4=a2_0x57c234;console['log'](_0x39bff4(0x283));const _0x4f1b97=document[_0x39bff4(0x37a)]('create-test-match-modal');if(!_0x4f1b97){console['error']('Modal\x20not\x20found\x20when\x20trying\x20to\x20close');return;}_0x4f1b97['classList'][_0x39bff4(0x32c)](_0x39bff4(0x1b5)),_0x4f1b97['style'][_0x39bff4(0x1df)]='0',_0x4f1b97['style']['visibility']='hidden',setTimeout(()=>{const _0x42103e=_0x39bff4;!_0x4f1b97['classList'][_0x42103e(0x2dc)](_0x42103e(0x1b5))&&(_0x4f1b97['style']['display']='none');},0x12c),console['log']('Modal\x20closed');}async function createTestMatch(){const _0x59a900=a2_0x57c234;console[_0x59a900(0x2a6)]('Creating\x20test\x20match\x20without\x20player\x20validation...');try{const _0xd5265b=auth['currentUser'];if(!_0xd5265b){showNotification(_0x59a900(0x356),_0x59a900(0x380));return;}const _0x8d45ca='D1',_0x5e5405='approvedMatches',_0x415520={'winnerUsername':'TestWinner','winnerScore':0x14,'winnerSuicides':0x0,'winnerComment':_0x59a900(0x1f2),'winnerDemoLink':null,'loserUsername':'TestLoser','loserScore':0xf,'loserSuicides':0x0,'loserComment':_0x59a900(0x1f2),'loserDemoLink':null,'mapPlayed':'TestMap','approvedAt':Timestamp['fromDate'](new Date()),'approvedBy':_0xd5265b[_0x59a900(0x31d)],'createdAt':serverTimestamp(),'createdBy':_0xd5265b['email'],'isTestMatch':!![],'ladder':_0x8d45ca,'testMatchCreatedAt':serverTimestamp(),'testMatchNote':_0x59a900(0x187)+_0xd5265b['email']};console['log']('Adding\x20simple\x20test\x20match...'),await addDoc(collection(db,_0x5e5405),_0x415520),showNotification(_0x59a900(0x24c),'success'),closeCreateTestMatchModal();}catch(_0xf14072){console['error']('Error\x20creating\x20simple\x20test\x20match:',_0xf14072),showNotification('Failed\x20to\x20create\x20simple\x20test\x20match:\x20'+_0xf14072['message'],_0x59a900(0x380));}}window['testFirebaseConnection']=async function(){const _0x3696e2=a2_0x57c234;try{console[_0x3696e2(0x2a6)]('Testing\x20Firebase\x20connection...'),console[_0x3696e2(0x2a6)](_0x3696e2(0x209),auth),console['log']('DB:',db),console[_0x3696e2(0x2a6)](_0x3696e2(0x2f1),auth['currentUser']);const _0x3cb63b=collection(db,'players');console['log'](_0x3696e2(0x225),_0x3cb63b);const _0x2bc0a0=query(_0x3cb63b,where('username','==',_0x3696e2(0x347)));console[_0x3696e2(0x2a6)]('Query\x20created:',_0x2bc0a0);const _0x49645b=await getDocs(_0x2bc0a0);console[_0x3696e2(0x2a6)]('Query\x20executed.\x20Empty:',_0x49645b[_0x3696e2(0x2b1)]),console['log'](_0x3696e2(0x322));}catch(_0x1645c0){console[_0x3696e2(0x380)]('Firebase\x20connection\x20test\x20failed:',_0x1645c0);}};function setupCreateTestMatchButton(){const _0x2a93e2=a2_0x57c234,_0x4e0fff=document[_0x2a93e2(0x37a)]('create-test-match-btn');if(!_0x4e0fff){console['error']('Create\x20test\x20match\x20button\x20not\x20found\x20in\x20DOM');return;}console['log'](_0x2a93e2(0x213));const _0x581fce=_0x4e0fff[_0x2a93e2(0x28f)](!![]);_0x4e0fff[_0x2a93e2(0x246)]['replaceChild'](_0x581fce,_0x4e0fff),_0x581fce['addEventListener'](_0x2a93e2(0x1dd),function(_0x42649c){const _0x29e161=_0x2a93e2;_0x42649c['preventDefault'](),_0x42649c['stopPropagation'](),console['log'](_0x29e161(0x19c)),openCreateTestMatchModal();}),console[_0x2a93e2(0x2a6)](_0x2a93e2(0x2e4));}async function loadMatchesData(_0x16657c=0x1){const _0x53b9a3=a2_0x57c234,_0x4d9ae2=document['getElementById'](_0x53b9a3(0x1b1));if(!_0x4d9ae2)return;_0x4d9ae2['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22loading-cell\x22>Loading\x20matches...</td></tr>';try{const _0x357a7c=currentLadder['toLowerCase'](),_0x326827=matchesPagination[_0x357a7c],_0x5f50e0=currentLadder==='D1'?_0x53b9a3(0x1a4):currentLadder==='D2'?_0x53b9a3(0x33c):'approvedMatchesD3',_0x1908c7=collection(db,_0x5f50e0);_0x16657c<=0x1?(_0x326827[_0x53b9a3(0x317)]=0x1,_0x326827['firstVisible']=null,_0x326827['lastVisible']=null):_0x326827['page']=_0x16657c;const _0x1a1b70=getMatchesFilters();let _0x418f23=_0x1908c7;if(_0x1a1b70[_0x53b9a3(0x15c)]||_0x1a1b70[_0x53b9a3(0x1e3)]||_0x1a1b70['searchTerm']){let _0xb617f6=[];_0x1a1b70['startDate']&&_0x1a1b70[_0x53b9a3(0x1e3)]?(_0xb617f6['push'](where('approvedAt','>=',_0x1a1b70['startDate']),where(_0x53b9a3(0x203),'<=',_0x1a1b70['endDate'])),_0x418f23=query(_0x1908c7,..._0xb617f6)):_0x418f23=query(_0x1908c7,orderBy('approvedAt','desc'));}else _0x418f23=query(_0x1908c7,orderBy('approvedAt','desc'));_0x16657c>0x1&&_0x326827['lastVisible']?_0x418f23=query(_0x418f23,startAfter(_0x326827['lastVisible']),limit(PAGE_SIZE)):_0x418f23=query(_0x418f23,limit(PAGE_SIZE));const _0x2446c5=await getDocs(_0x418f23);!_0x2446c5[_0x53b9a3(0x2b1)]&&(_0x326827['firstVisible']=_0x2446c5[_0x53b9a3(0x158)][0x0],_0x326827[_0x53b9a3(0x323)]=_0x2446c5['docs'][_0x2446c5['docs']['length']-0x1]);let _0x4399ed=![];if(!_0x2446c5['empty']){const _0x313609=query(_0x418f23,startAfter(_0x326827['lastVisible']),limit(0x1)),_0x2ea546=await getDocs(_0x313609);_0x4399ed=!_0x2ea546['empty'];}const _0x430ec7=document['getElementById']('matches-prev-page'),_0x2bd1e1=document[_0x53b9a3(0x37a)]('matches-next-page'),_0x2f0a97=document['getElementById'](_0x53b9a3(0x34c));if(_0x430ec7)_0x430ec7['disabled']=_0x326827[_0x53b9a3(0x317)]<=0x1;if(_0x2bd1e1)_0x2bd1e1['disabled']=!_0x4399ed;if(_0x2f0a97)_0x2f0a97[_0x53b9a3(0x14a)]='Page\x20'+_0x326827['page'];if(_0x2446c5['empty']){_0x4d9ae2['innerHTML']='<tr><td\x20colspan=\x227\x22\x20class=\x22empty-state\x22>No\x20matches\x20found</td></tr>';return;}_0x4d9ae2[_0x53b9a3(0x200)]='',_0x2446c5['forEach'](_0x2c29b8=>{const _0x25c569=_0x53b9a3,_0xc43be8=_0x2c29b8['data'](),_0x297411=document[_0x25c569(0x1d7)]('tr'),_0x3e767d=_0xc43be8[_0x25c569(0x203)]?new Date(_0xc43be8['approvedAt']['seconds']*0x3e8)['toLocaleDateString']():_0x25c569(0x236);_0x297411[_0x25c569(0x36f)]('data-id',_0x2c29b8['id']),_0x297411[_0x25c569(0x36f)]('data-ladder',currentLadder),_0x297411['classList']['add'](_0x25c569(0x217)),_0x297411[_0x25c569(0x200)]=_0x25c569(0x192)+_0x3e767d+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22winner-cell\x22>'+(_0xc43be8['winnerUsername']||_0x25c569(0x1c2))+_0x25c569(0x220)+(_0xc43be8[_0x25c569(0x202)]||'Unknown')+_0x25c569(0x2f4)+(_0xc43be8['winnerScore']||0x0)+'\x20-\x20'+(_0xc43be8['loserScore']||0x0)+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22map-cell\x22>'+(_0xc43be8['mapPlayed']||'N/A')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22ladder-cell\x22>'+currentLadder+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-match-btn\x20btn-small\x22\x20data-id=\x22'+_0x2c29b8['id']+_0x25c569(0x232)+_0x2c29b8['id']+'\x22\x20title=\x22Delete\x20Match\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x4d9ae2['appendChild'](_0x297411);}),setupMatchesActionButtons(),_0x1a1b70['searchTerm']&&filterMatchesTable(),console['log']('Loaded\x20'+_0x2446c5[_0x53b9a3(0x30e)]+_0x53b9a3(0x15f)+currentLadder+'\x20ladder,\x20page\x20'+_0x326827[_0x53b9a3(0x317)]);}catch(_0x5bc8fd){console['error']('Error\x20loading\x20matches:',_0x5bc8fd),_0x4d9ae2['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x227\x22\x20class=\x22error-state\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20matches:\x20'+_0x5bc8fd['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function deleteMatch(_0x30c278,_0x3e21bd){const _0x2dd022=a2_0x57c234;try{console['log'](_0x2dd022(0x163)+_0x30c278+'\x20from\x20'+_0x3e21bd+_0x2dd022(0x277));const _0xb1d9de=auth[_0x2dd022(0x1c4)];if(!_0xb1d9de){showNotification(_0x2dd022(0x25d),'error');return;}const _0x4d3b3a=_0x3e21bd==='D1'?'approvedMatches':_0x3e21bd==='D2'?'approvedMatchesD2':_0x2dd022(0x261);console['log'](_0x2dd022(0x321)+_0x4d3b3a),showNotification(_0x2dd022(0x18d),'info'),await deleteDoc(doc(db,_0x4d3b3a,_0x30c278)),console[_0x2dd022(0x2a6)]('Match\x20deleted\x20successfully'),showNotification(_0x2dd022(0x2c4),'success');const _0x308bd7=_0x3e21bd['toLowerCase']();loadMatchesData(matchesPagination[_0x308bd7]['page']);}catch(_0x31bc72){console['error']('Error\x20deleting\x20match:',_0x31bc72),showNotification('Failed\x20to\x20delete\x20match:\x20'+_0x31bc72[_0x2dd022(0x1b3)],_0x2dd022(0x380));}}function setupMatchesActionButtons(){const _0x16fac0=a2_0x57c234;console['log']('Setting\x20up\x20matches\x20action\x20buttons...'),document['querySelectorAll']('.edit-match-btn')['forEach'](_0x29b91f=>{const _0x31b40d=a2_0x4135;_0x29b91f[_0x31b40d(0x392)]('click',_0x40c753=>{_0x40c753['preventDefault'](),_0x40c753['stopPropagation']();const _0x243d93=_0x40c753['currentTarget']['dataset']['id'],_0x124817=_0x40c753['currentTarget']['closest']('tr'),_0x308fe1=_0x124817['dataset']['ladder'];console['log']('Edit\x20match\x20clicked:',_0x243d93,_0x308fe1),openEditMatchModal(_0x243d93,_0x308fe1);});}),document['querySelectorAll']('.delete-match-btn')['forEach'](_0x4ee8ba=>{_0x4ee8ba['addEventListener']('click',_0x3c1d37=>{const _0xe8896a=a2_0x4135;_0x3c1d37['preventDefault'](),_0x3c1d37[_0xe8896a(0x395)]();const _0x5c33ae=_0x3c1d37[_0xe8896a(0x159)]['dataset']['id'],_0x4eca8f=_0x3c1d37['currentTarget'][_0xe8896a(0x182)]('tr'),_0x16b271=_0x4eca8f['dataset'][_0xe8896a(0x334)]||currentLadder;console['log']('Delete\x20match\x20clicked:',_0x5c33ae,_0x16b271),confirm(_0xe8896a(0x358))&&deleteMatch(_0x5c33ae,_0x16b271);});}),console[_0x16fac0(0x2a6)]('Matches\x20action\x20buttons\x20setup\x20complete');}function filterMatchesTable(){const _0x5aba00=a2_0x57c234,_0x5846b0=document['getElementById'](_0x5aba00(0x368))['value'][_0x5aba00(0x1ee)](),_0x313911=document['querySelectorAll']('#matches-table-body\x20tr');let _0x3c2413=0x0;_0x313911['forEach'](_0x13bfc7=>{const _0x2eccf3=_0x5aba00;if(_0x13bfc7[_0x2eccf3(0x15b)]['contains']('loading-cell')||_0x13bfc7['classList']['contains']('empty-state')||_0x13bfc7[_0x2eccf3(0x15b)]['contains']('error-state'))return;const _0x3d24f9=_0x13bfc7['cells'][0x1][_0x2eccf3(0x14a)]['toLowerCase'](),_0x570403=_0x13bfc7['cells'][0x2]['textContent']['toLowerCase'](),_0x3bbd6a=_0x13bfc7['cells'][0x4]['textContent']['toLowerCase']();_0x3d24f9[_0x2eccf3(0x2b4)](_0x5846b0)||_0x570403[_0x2eccf3(0x2b4)](_0x5846b0)||_0x3bbd6a['includes'](_0x5846b0)?(_0x13bfc7[_0x2eccf3(0x1c6)]['display']='',_0x3c2413++):_0x13bfc7['style']['display']='none';});if(_0x3c2413===0x0&&_0x313911['length']>0x0){const _0x572826=document['getElementById'](_0x5aba00(0x1b1)),_0x558448=_0x572826['querySelector']('.no-results');if(!_0x558448){const _0xe118fa=document['createElement']('tr');_0xe118fa['className']='no-results',_0xe118fa['innerHTML']='<td\x20colspan=\x227\x22>No\x20matches\x20found\x20matching\x20\x27'+_0x5846b0+'\x27</td>',_0x572826['appendChild'](_0xe118fa);}}else{const _0x446fd4=document[_0x5aba00(0x29e)]('.no-results');_0x446fd4&&_0x446fd4['remove']();}}function getMatchesFilters(){const _0x54f99e=a2_0x57c234,_0x47c717=document[_0x54f99e(0x37a)]('matches-search')['value']['toLowerCase'](),_0x5eb21d=document[_0x54f99e(0x37a)](_0x54f99e(0x233))['value'],_0x4dc68f=document[_0x54f99e(0x37a)]('matches-end-date')[_0x54f99e(0x296)];let _0x4dfcf8=null,_0x2aab33=null;return _0x5eb21d&&(_0x4dfcf8=new Date(_0x5eb21d),_0x4dfcf8[_0x54f99e(0x332)](0x0,0x0,0x0,0x0),_0x4dfcf8=Timestamp['fromDate'](_0x4dfcf8)),_0x4dc68f&&(_0x2aab33=new Date(_0x4dc68f),_0x2aab33['setHours'](0x17,0x3b,0x3b,0x3e7),_0x2aab33=Timestamp['fromDate'](_0x2aab33)),{'searchTerm':_0x47c717,'startDate':_0x4dfcf8,'endDate':_0x2aab33};}async function applyMatchesFilters(){const _0x4daf95=a2_0x57c234,_0x479c73=currentLadder[_0x4daf95(0x1ee)]();matchesPagination[_0x479c73]={'page':0x1,'lastVisible':null,'firstVisible':null},await loadMatchesData(0x1);}function resetMatchesFilters(){const _0x21ee61=a2_0x57c234;document['getElementById']('matches-start-date')['value']='',document['getElementById'](_0x21ee61(0x33a))['value']='',document['getElementById'](_0x21ee61(0x368))['value']='';const _0x3556e3=currentLadder[_0x21ee61(0x1ee)]();matchesPagination[_0x3556e3]={'page':0x1,'lastVisible':null,'firstVisible':null},loadMatchesData(0x1);}async function openEditMatchModal(_0x24c836,_0x348b01){const _0x419a6b=a2_0x57c234,_0x5103bd=document[_0x419a6b(0x37a)](_0x419a6b(0x389));if(!_0x5103bd)return;try{const _0x492257=_0x348b01==='D1'?'approvedMatches':_0x348b01==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x5a1562=doc(db,_0x492257,_0x24c836),_0x31fd76=await getDoc(_0x5a1562);if(!_0x31fd76['exists']()){showNotification('Match\x20not\x20found','error');return;}const _0x53a279=_0x31fd76[_0x419a6b(0x1af)]();document[_0x419a6b(0x37a)]('edit-match-id')['value']=_0x24c836,document['getElementById']('edit-match-ladder')[_0x419a6b(0x296)]=_0x348b01,document['getElementById']('edit-match-winner')['value']=_0x53a279['winnerUsername']||'',document['getElementById']('edit-match-winner-score')['value']=_0x53a279['winnerScore']||0x0,document['getElementById'](_0x419a6b(0x32b))[_0x419a6b(0x296)]=_0x53a279[_0x419a6b(0x34f)]||0x0,document['getElementById'](_0x419a6b(0x1cf))['value']=_0x53a279['winnerComment']||'',document['getElementById'](_0x419a6b(0x1b2))[_0x419a6b(0x296)]=_0x53a279[_0x419a6b(0x202)]||'',document['getElementById']('edit-match-loser-score')['value']=_0x53a279['loserScore']||0x0,document[_0x419a6b(0x37a)]('edit-match-loser-suicides')[_0x419a6b(0x296)]=_0x53a279[_0x419a6b(0x1e6)]||0x0,document[_0x419a6b(0x37a)]('edit-match-loser-comment')['value']=_0x53a279['loserComment']||'',document['getElementById']('edit-match-map')['value']=_0x53a279['mapPlayed']||'',document['getElementById']('edit-match-winner-demo')['value']=_0x53a279[_0x419a6b(0x299)]||'',document['getElementById']('edit-match-loser-demo')['value']=_0x53a279['loserDemoLink']||_0x53a279[_0x419a6b(0x1e7)]||'',document[_0x419a6b(0x37a)]('edit-match-title')['textContent']=_0x419a6b(0x238)+_0x53a279[_0x419a6b(0x18a)]+'\x20vs\x20'+_0x53a279[_0x419a6b(0x202)],_0x5103bd['classList']['add']('active');}catch(_0x52cd36){console[_0x419a6b(0x380)](_0x419a6b(0x2be),_0x52cd36),showNotification(_0x419a6b(0x2de),'error');}}function closeEditMatchModal(){const _0x521125=a2_0x57c234,_0x41e235=document['getElementById']('edit-match-modal');_0x41e235&&_0x41e235['classList'][_0x521125(0x32c)]('active');}async function saveEditedMatch(){const _0x1d1a91=a2_0x57c234;try{const _0x2db86e=document['getElementById']('edit-match-id')['value'],_0x5b27e1=document['getElementById'](_0x1d1a91(0x314))[_0x1d1a91(0x296)];if(!_0x2db86e||!_0x5b27e1){showNotification('Match\x20ID\x20or\x20ladder\x20missing',_0x1d1a91(0x380));return;}const _0x2c61d5=_0x5b27e1==='D1'?'approvedMatches':_0x5b27e1==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x2b04fd=document['getElementById']('edit-match-winner')['value']['trim'](),_0x47c7db=parseInt(document['getElementById']('edit-match-winner-score')[_0x1d1a91(0x296)]),_0x5dac18=parseInt(document['getElementById'](_0x1d1a91(0x32b))['value']),_0x1e88e2=document[_0x1d1a91(0x37a)]('edit-match-winner-comment')['value']['trim'](),_0x58bef8=document['getElementById']('edit-match-loser')['value']['trim'](),_0x1d3758=parseInt(document['getElementById'](_0x1d1a91(0x18b))[_0x1d1a91(0x296)]),_0xdfd944=parseInt(document[_0x1d1a91(0x37a)]('edit-match-loser-suicides')['value']),_0x49046e=document['getElementById']('edit-match-loser-comment')['value']['trim'](),_0x5146e8=document['getElementById'](_0x1d1a91(0x396))[_0x1d1a91(0x296)]['trim'](),_0x2566a8=document[_0x1d1a91(0x37a)]('edit-match-winner-demo')[_0x1d1a91(0x296)][_0x1d1a91(0x14f)](),_0x31dd12=document[_0x1d1a91(0x37a)]('edit-match-loser-demo')[_0x1d1a91(0x296)]['trim']();if(!_0x2b04fd||!_0x58bef8){showNotification(_0x1d1a91(0x281),_0x1d1a91(0x380));return;}await updateDoc(doc(db,_0x2c61d5,_0x2db86e),{'winnerUsername':_0x2b04fd,'winnerScore':_0x47c7db,'winnerSuicides':_0x5dac18,'winnerComment':_0x1e88e2,'loserUsername':_0x58bef8,'loserScore':_0x1d3758,'loserSuicides':_0xdfd944,'loserComment':_0x49046e,'mapPlayed':_0x5146e8,'winnerDemoLink':_0x2566a8||null,'loserDemoLink':_0x31dd12||null,'lastModifiedAt':serverTimestamp(),'lastModifiedBy':auth['currentUser'][_0x1d1a91(0x31d)],'isEdited':!![]}),showNotification('Match\x20updated\x20successfully',_0x1d1a91(0x226)),closeEditMatchModal(),loadMatchesData(matchesPagination[_0x5b27e1['toLowerCase']()]['page']);}catch(_0x345a3f){console['error'](_0x1d1a91(0x390),_0x345a3f),showNotification(_0x1d1a91(0x30c)+_0x345a3f['message'],'error');}}async function openDeleteMatchModal(_0x245e4c,_0x5ce018){const _0x3bad24=a2_0x57c234;try{const _0x3d693e=_0x5ce018==='D1'?'approvedMatches':_0x5ce018==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x39455d=doc(db,_0x3d693e,_0x245e4c),_0xf08d3f=await getDoc(_0x39455d);if(!_0xf08d3f['exists']()){showNotification('Match\x20not\x20found',_0x3bad24(0x380));return;}const _0x377e01=_0xf08d3f[_0x3bad24(0x1af)](),_0x5e5380=document['getElementById']('delete-match-confirm-modal');_0x5e5380[_0x3bad24(0x393)]['matchId']=_0x245e4c,_0x5e5380[_0x3bad24(0x393)]['ladder']=_0x5ce018;const _0x316be2=_0x377e01[_0x3bad24(0x203)]?new Date(_0x377e01['approvedAt'][_0x3bad24(0x2bf)]*0x3e8)['toLocaleDateString']():'N/A',_0x1c266f=document['getElementById']('delete-match-summary');_0x1c266f['innerHTML']=_0x3bad24(0x33b)+_0x316be2+_0x3bad24(0x1fb)+_0x377e01['winnerUsername']+'\x20(winner)\x20vs\x20'+_0x377e01[_0x3bad24(0x202)]+_0x3bad24(0x39e)+(_0x377e01['winnerScore']||0x0)+'\x20-\x20'+(_0x377e01['loserScore']||0x0)+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x377e01[_0x3bad24(0x183)]||'N/A')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Ladder:</strong>\x20'+_0x5ce018+_0x3bad24(0x26c),_0x5e5380['classList'][_0x3bad24(0x1c0)](_0x3bad24(0x1b5));}catch(_0x8d514a){console['error']('Error\x20loading\x20match\x20for\x20deletion:',_0x8d514a),showNotification('Failed\x20to\x20load\x20match\x20data',_0x3bad24(0x380));}}function closeDeleteMatchModal(){const _0x2c50a8=a2_0x57c234,_0x533951=document[_0x2c50a8(0x37a)]('delete-match-confirm-modal');_0x533951&&(_0x533951['classList']['remove']('active'),_0x533951['removeAttribute']('data-match-id'),_0x533951['removeAttribute']('data-ladder'));}async function confirmDeleteMatch(){const _0x5d4f94=a2_0x57c234,_0x318482=document['getElementById'](_0x5d4f94(0x1fd)),_0xc3ec7=_0x318482['dataset']['matchId'],_0xf25860=_0x318482['dataset']['ladder'];if(!_0xc3ec7||!_0xf25860){showNotification(_0x5d4f94(0x2e2),_0x5d4f94(0x380)),closeDeleteMatchModal();return;}try{const _0x200b0f=_0xf25860==='D1'?_0x5d4f94(0x1a4):_0xf25860==='D2'?_0x5d4f94(0x33c):_0x5d4f94(0x261);await deleteDoc(doc(db,_0x200b0f,_0xc3ec7)),showNotification('Match\x20deleted\x20successfully','success'),closeDeleteMatchModal(),loadMatchesData(matchesPagination[_0xf25860['toLowerCase']()][_0x5d4f94(0x317)]);}catch(_0x25422a){console['error']('Error\x20deleting\x20match:',_0x25422a),showNotification(_0x5d4f94(0x275)+_0x25422a[_0x5d4f94(0x1b3)],'error');}}function a2_0x4135(_0x36b67a,_0x2b778c){const _0x4ae9af=a2_0x2f24();return a2_0x4135=function(_0x3a2ddd,_0x46416a){_0x3a2ddd=_0x3a2ddd-0x143;let _0x2f24b5=_0x4ae9af[_0x3a2ddd];return _0x2f24b5;},a2_0x4135(_0x36b67a,_0x2b778c);}async function saveHighlightChanges(){const _0x181c22=a2_0x57c234,_0x36a09c=document['getElementById']('edit-highlight-id')[_0x181c22(0x296)],_0x36a8ab=document['getElementById']('edit-highlight-type-select')['value'];let _0x2ea626={'title':document[_0x181c22(0x37a)]('edit-highlight-title-input')['value']['trim'](),'type':_0x36a8ab,'description':document[_0x181c22(0x37a)](_0x181c22(0x370))['value']['trim'](),'videoId':document['getElementById'](_0x181c22(0x33f))[_0x181c22(0x296)][_0x181c22(0x14f)](),'submittedBy':auth['currentUser']['email']};if(_0x36a8ab==='match'){_0x2ea626['matchInfo']=document['getElementById'](_0x181c22(0x1ac))['value']['trim'](),_0x2ea626[_0x181c22(0x193)]=document['getElementById'](_0x181c22(0x340))['value'][_0x181c22(0x14f)]();const _0x2c6e3d=document['getElementById'](_0x181c22(0x2eb))['value'];_0x2ea626['matchDate']=_0x2c6e3d?Timestamp['fromDate'](new Date(_0x2c6e3d)):null,_0x2ea626['winnerName']=document['getElementById'](_0x181c22(0x1d5))[_0x181c22(0x296)]['trim'](),_0x2ea626['winnerScore']=document['getElementById']('edit-highlight-winnerScore-input')['value']['trim'](),_0x2ea626['loserName']=document['getElementById']('edit-highlight-loserName-input')[_0x181c22(0x296)]['trim'](),_0x2ea626['loserScore']=document['getElementById'](_0x181c22(0x248))[_0x181c22(0x296)]['trim'](),_0x2ea626['matchLink']=document['getElementById']('edit-highlight-matchLink-input')['value']['trim'](),_0x2ea626['mapCreator']=null,_0x2ea626['mapVersion']=null,_0x2ea626['creatorImageUrl']=null,_0x2ea626[_0x181c22(0x1ba)]=null,_0x2ea626[_0x181c22(0x35d)]=null,_0x2ea626[_0x181c22(0x35b)]=null,_0x2ea626['playerProfileUrl']=null;}else{if(_0x36a8ab==='creator')_0x2ea626['map']=document[_0x181c22(0x37a)](_0x181c22(0x340))['value']['trim'](),_0x2ea626[_0x181c22(0x36e)]=document['getElementById']('edit-highlight-mapCreator-input')['value'][_0x181c22(0x14f)](),_0x2ea626['mapVersion']=document['getElementById']('edit-highlight-mapVersion-input')['value']['trim'](),_0x2ea626['creatorImageUrl']=document[_0x181c22(0x37a)]('edit-highlight-creatorImageUrl-input')['value']['trim'](),_0x2ea626['matchInfo']=null,_0x2ea626['matchDate']=null,_0x2ea626['winnerName']=null,_0x2ea626[_0x181c22(0x1a0)]=null,_0x2ea626[_0x181c22(0x2a8)]=null,_0x2ea626['loserScore']=null,_0x2ea626['matchLink']=null,_0x2ea626[_0x181c22(0x1ba)]=null,_0x2ea626['achievementType']=null,_0x2ea626[_0x181c22(0x35b)]=null,_0x2ea626['playerProfileUrl']=null;else _0x36a8ab==='achievement'&&(_0x2ea626[_0x181c22(0x1ba)]=document['getElementById']('edit-highlight-achievementPlayer-input')['value']['trim'](),_0x2ea626['achievementType']=document['getElementById']('edit-highlight-achievementType-input')['value'][_0x181c22(0x14f)](),_0x2ea626['achievementDetails']=document[_0x181c22(0x37a)]('edit-highlight-achievementDetails-input')['value']['trim'](),_0x2ea626['playerProfileUrl']=document['getElementById']('edit-highlight-playerProfileUrl-input')['value']['trim'](),_0x2ea626[_0x181c22(0x290)]=null,_0x2ea626['map']=null,_0x2ea626[_0x181c22(0x30d)]=null,_0x2ea626['winnerName']=null,_0x2ea626[_0x181c22(0x1a0)]=null,_0x2ea626['loserName']=null,_0x2ea626['loserScore']=null,_0x2ea626['matchLink']=null,_0x2ea626['mapCreator']=null,_0x2ea626['mapVersion']=null,_0x2ea626[_0x181c22(0x1c5)]=null);}try{if(_0x36a09c){_0x2ea626['updatedAt']=serverTimestamp();const _0x1265d1=doc(db,_0x181c22(0x331),_0x36a09c);await updateDoc(_0x1265d1,_0x2ea626),showNotification(_0x181c22(0x180),'success');}else _0x2ea626[_0x181c22(0x279)]=serverTimestamp(),await addDoc(collection(db,_0x181c22(0x331)),_0x2ea626),showNotification('Highlight\x20added\x20successfully!','success');closeEditHighlightModal(),loadHighlightsAdmin();}catch(_0xa67429){console['error']('Error\x20saving\x20highlight:',_0xa67429),showNotification(_0x181c22(0x304)+_0xa67429[_0x181c22(0x1b3)],'error');}}async function resimulateMatch(){const _0x556521=a2_0x57c234;try{const _0x306f0d=document['getElementById'](_0x556521(0x2d0))['value'];if(!_0x306f0d){showNotification(_0x556521(0x1e5),'error');return;}const _0x24c932=auth['currentUser'];if(!_0x24c932){showNotification('You\x20must\x20be\x20logged\x20in\x20to\x20resimulate\x20matches','error');return;}const _0x1462f2=currentLadder==='D1'?'approvedMatches':currentLadder==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x35be25=doc(db,_0x1462f2,_0x306f0d),_0x4f7084=await getDoc(_0x35be25);if(!_0x4f7084[_0x556521(0x1de)]()){showNotification(_0x556521(0x1b4),'error');return;}const _0x5b7775=_0x4f7084['data'](),_0x98bac4=_0x5b7775['approvedAt']?_0x5b7775['approvedAt']['toDate']()[_0x556521(0x1ab)]():_0x5b7775[_0x556521(0x30d)]?_0x5b7775['matchDate']['toDate']?_0x5b7775['matchDate']['toDate']()['toLocaleString']():new Date(_0x5b7775['matchDate'])['toLocaleString']():'Unknown',_0x170d0a=_0x556521(0x36c)+_0x5b7775[_0x556521(0x18a)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Loser:</strong>\x20'+_0x5b7775['loserUsername']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Score:</strong>\x20'+_0x5b7775['winnerScore']+'-'+_0x5b7775[_0x556521(0x318)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Map:</strong>\x20'+(_0x5b7775['mapPlayed']||_0x5b7775['mapName']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20Date:</strong>\x20'+_0x98bac4+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Match\x20ID:</strong>\x20'+_0x306f0d+_0x556521(0x17e)+currentLadder+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><em>This\x20will\x20create\x20accurate\x20ELO\x20history\x20entries\x20based\x20on\x20the\x20players\x27\x20ELO\x20ratings\x20at\x20the\x20time\x20this\x20match\x20was\x20played.</em></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('match-details-container')['innerHTML']=_0x170d0a,document['getElementById']('match-details-container')['style']['display']='block',document[_0x556521(0x37a)]('confirm-resimulate-btn')['style']['display']=_0x556521(0x35f),window['pendingResimulateData']={'matchId':_0x306f0d,'matchData':_0x5b7775,'ladder':currentLadder},showNotification('Match\x20found\x20-\x20please\x20review\x20details\x20and\x20confirm\x20resimulation','info');}catch(_0x5e3c3e){console[_0x556521(0x380)]('Error\x20finding\x20match:',_0x5e3c3e),showNotification('Failed\x20to\x20find\x20match:\x20'+_0x5e3c3e[_0x556521(0x1b3)],'error');}}async function confirmResimulateMatch(){const _0xf56bdd=a2_0x57c234;try{const {matchId:_0x381a7b,matchData:_0x2570e7,ladder:_0x47240a}=window['pendingResimulateData'];if(!_0x381a7b||!_0x2570e7){showNotification('No\x20match\x20data\x20found\x20for\x20resimulation','error');return;}const _0x2f697e=_0x47240a==='D1'?'players':_0x47240a==='D2'?'playersD2':_0xf56bdd(0x346),_0xed01b7=_0x47240a==='D1'?'eloHistory':_0x47240a==='D2'?'eloHistoryD2':_0xf56bdd(0x25a),[_0x33e9ce,_0x1c4bbf]=await Promise[_0xf56bdd(0x29c)]([getDocs(query(collection(db,_0x2f697e),where('username','==',_0x2570e7[_0xf56bdd(0x18a)]))),getDocs(query(collection(db,_0x2f697e),where('username','==',_0x2570e7['loserUsername'])))]);if(_0x33e9ce['empty']||_0x1c4bbf['empty']){showNotification('Could\x20not\x20find\x20player\x20documents','error');return;}const _0x1ceb1b=_0x33e9ce['docs'][0x0]['id'],_0x3057fb=_0x1c4bbf['docs'][0x0]['id'],_0xfb4e72=_0x33e9ce['docs'][0x0]['data'](),_0x54363c=_0x1c4bbf[_0xf56bdd(0x158)][0x0][_0xf56bdd(0x1af)](),[_0x58d6f1,_0x200096]=await Promise[_0xf56bdd(0x29c)]([getDocs(query(collection(db,_0xed01b7),where('playerId','==',_0x1ceb1b),where(_0xf56bdd(0x287),'==',_0x381a7b))),getDocs(query(collection(db,_0xed01b7),where('playerId','==',_0x3057fb),where('matchId','==',_0x381a7b)))]),_0x4bad16=!_0x58d6f1['empty'],_0x500200=!_0x200096[_0xf56bdd(0x2b1)],_0x10fece='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22validation-results\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4>Validation\x20Results:</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Winner\x20ELO\x20History:</strong>\x20'+(_0x4bad16?_0xf56bdd(0x1b8):'\x20Missing')+_0xf56bdd(0x2bb)+(_0x500200?'\x20Exists':_0xf56bdd(0x383))+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20ELO:</strong>\x20'+(_0xfb4e72['eloRating']||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Loser\x20ELO:</strong>\x20'+(_0x54363c[_0xf56bdd(0x361)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Current\x20Winner\x20Position:</strong>\x20'+(_0xfb4e72['position']||'Unknown')+_0xf56bdd(0x1f7)+(_0x54363c[_0xf56bdd(0x377)]||'Unknown')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<hr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong\x20style=\x22color:\x20#ff9800;\x22>\x20RESIMULATION\x20WILL:</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20ELO\x20ratings\x20based\x20on\x20pre-match\x20values</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Update\x20current\x20player\x20ELO\x20ratings</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Recalculate\x20and\x20update\x20player\x20positions</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Create\x20missing\x20ELO\x20history\x20entries</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li>Handle\x20position\x20swaps\x20if\x20winner\x20was\x20lower\x20ranked</li>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';document['getElementById']('validation-results-container')['innerHTML']=_0x10fece,document['getElementById']('validation-results-container')['style']['display']='block';if(_0x4bad16&&_0x500200){showNotification(_0xf56bdd(0x28e),'warning');return;}showNotification('Starting\x20complete\x20match\x20resimulation...','info');const _0x5ddc49=_0x2570e7['approvedAt']||_0x2570e7[_0xf56bdd(0x30d)]||serverTimestamp(),[_0x1ee640,_0x34a03a]=await Promise['all']([getPlayerEloAtTime(_0x1ceb1b,_0x5ddc49,_0xed01b7),getPlayerEloAtTime(_0x3057fb,_0x5ddc49,_0xed01b7)]),{calculateElo:_0x563de2}=await import('./ladderalgorithm.js'),{newWinnerRating:_0x5b9063,newLoserRating:_0x26af05}=_0x563de2(_0x1ee640,_0x34a03a),_0x19a888=_0xfb4e72['position']||Number['MAX_SAFE_INTEGER'],_0x1a8dff=_0x54363c[_0xf56bdd(0x377)]||Number['MAX_SAFE_INTEGER'];let _0x369cf8=_0x19a888,_0x4f4a0f=_0x1a8dff;_0x19a888>_0x1a8dff&&(_0x369cf8=_0x1a8dff,_0x4f4a0f=_0x1a8dff+0x1);const _0x305f5c=writeBatch(db),_0x3dbb29=doc(db,_0x2f697e,_0x1ceb1b);_0x305f5c['update'](_0x3dbb29,{'eloRating':_0x5b9063,'position':_0x369cf8,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth[_0xf56bdd(0x1c4)]['uid']});const _0x5d760b=doc(db,_0x2f697e,_0x3057fb);_0x305f5c['update'](_0x5d760b,{'eloRating':_0x26af05,'position':_0x4f4a0f,'lastUpdated':serverTimestamp(),'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser'][_0xf56bdd(0x2fd)]});if(_0x19a888>_0x1a8dff){const _0x121b23=await getDocs(query(collection(db,_0x2f697e),where('position','>',_0x1a8dff),where('position','<',_0x19a888)));_0x121b23[_0xf56bdd(0x30a)](_0x3d7143=>{const _0x324f1f=_0xf56bdd,_0x484af9=doc(db,_0x2f697e,_0x3d7143['id']),_0x56a729=_0x3d7143['data']()['position'];_0x305f5c['update'](_0x484af9,{'position':_0x56a729+0x1,'lastUpdated':serverTimestamp(),'positionAdjustedBy':_0x324f1f(0x1a5),'positionAdjustedAt':serverTimestamp()});});}if(!_0x4bad16){const _0x36e7ce=doc(collection(db,_0xed01b7));_0x305f5c['set'](_0x36e7ce,{'playerId':_0x1ceb1b,'player':_0x2570e7['winnerUsername'],'previousElo':_0x1ee640,'newElo':_0x5b9063,'eloChange':_0x5b9063-_0x1ee640,'opponentId':_0x3057fb,'opponent':_0x2570e7['loserUsername'],'matchResult':'win','previousPosition':_0x19a888,'newPosition':_0x369cf8,'positionChange':_0x369cf8-_0x19a888,'matchId':_0x381a7b,'timestamp':_0x5ddc49,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x47240a,'matchScore':_0x2570e7['winnerScore']+'-'+_0x2570e7[_0xf56bdd(0x318)],'mapPlayed':_0x2570e7['mapPlayed']||_0x2570e7['mapName']||'Unknown','note':'Resimulated\x20entry\x20-\x20ELO\x20and\x20positions\x20calculated\x20from\x20actual\x20pre-match\x20data'});}if(!_0x500200){const _0x3b9828=doc(collection(db,_0xed01b7));_0x305f5c['set'](_0x3b9828,{'playerId':_0x3057fb,'player':_0x2570e7['loserUsername'],'previousElo':_0x34a03a,'newElo':_0x26af05,'eloChange':_0x26af05-_0x34a03a,'opponentId':_0x1ceb1b,'opponent':_0x2570e7['winnerUsername'],'matchResult':'loss','previousPosition':_0x1a8dff,'newPosition':_0x4f4a0f,'positionChange':_0x4f4a0f-_0x1a8dff,'matchId':_0x381a7b,'timestamp':_0x5ddc49,'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'gameMode':_0x47240a,'matchScore':_0x2570e7['winnerScore']+'-'+_0x2570e7['loserScore'],'mapPlayed':_0x2570e7['mapPlayed']||_0x2570e7['mapName']||_0xf56bdd(0x1c2),'note':_0xf56bdd(0x29b)});}const _0x59120c=_0x47240a==='D1'?'approvedMatches':_0x47240a==='D2'?_0xf56bdd(0x33c):_0xf56bdd(0x261),_0x3dc1e=doc(db,_0x59120c,_0x381a7b);_0x305f5c[_0xf56bdd(0x19a)](_0x3dc1e,{'resimulated':!![],'resimulatedAt':serverTimestamp(),'resimulatedBy':auth['currentUser']['uid'],'resimulatedReason':'Complete\x20resimulation\x20-\x20ELO\x20ratings\x20and\x20positions\x20recalculated','originalWinnerElo':_0xfb4e72['eloRating'],'originalLoserElo':_0x54363c[_0xf56bdd(0x361)],'originalWinnerPosition':_0x19a888,'originalLoserPosition':_0x1a8dff,'resimulatedWinnerElo':_0x5b9063,'resimulatedLoserElo':_0x26af05,'resimulatedWinnerPosition':_0x369cf8,'resimulatedLoserPosition':_0x4f4a0f}),await _0x305f5c['commit']();const _0xe50a1e=(!_0x4bad16?0x1:0x0)+(!_0x500200?0x1:0x0),_0x22e819=_0x19a888!==_0x369cf8||_0x1a8dff!==_0x4f4a0f;showNotification('Match\x20resimulated\x20successfully!\x20'+('Created\x20'+_0xe50a1e+'\x20ELO\x20history\x20entries.\x20')+('Updated\x20ELO\x20ratings:\x20Winner\x20'+_0x1ee640+''+_0x5b9063+'\x20(+'+(_0x5b9063-_0x1ee640)+_0xf56bdd(0x243))+('Loser\x20'+_0x34a03a+''+_0x26af05+'\x20('+(_0x26af05-_0x34a03a)+').\x20')+(''+(_0x22e819?'Positions\x20updated:\x20Winner\x20'+_0x19a888+''+_0x369cf8+_0xf56bdd(0x259)+_0x1a8dff+''+_0x4f4a0f:'No\x20position\x20changes\x20needed.')),_0xf56bdd(0x226)),closeResimulateModal(),document['querySelector']('#players.content-section.active')&&loadPlayersData();}catch(_0x47bcf3){console['error']('Error\x20resimulating\x20match:',_0x47bcf3),showNotification('Failed\x20to\x20resimulate\x20match:\x20'+_0x47bcf3['message'],'error');}}async function getPlayerEloAtTime(_0x9e696a,_0x267a9c,_0x4f1301){const _0x58dea7=a2_0x57c234;try{const _0x2ba757=_0x267a9c['toDate']?_0x267a9c['toDate']():new Date(_0x267a9c),_0x22706b=query(collection(db,_0x4f1301),where(_0x58dea7(0x244),'==',_0x9e696a),where('timestamp','<',_0x267a9c),orderBy(_0x58dea7(0x381),_0x58dea7(0x1f6)),limit(0x1)),_0x3a7299=await getDocs(_0x22706b);if(!_0x3a7299['empty']){const _0x154172=_0x3a7299['docs'][0x0]['data']();return console[_0x58dea7(0x2a6)]('Found\x20ELO\x20history\x20for\x20player\x20'+_0x9e696a+'\x20before\x20match:\x20'+_0x154172['newElo']),_0x154172[_0x58dea7(0x24f)];}else return console['log'](_0x58dea7(0x263)+_0x9e696a+'\x20before\x20match\x20-\x20using\x20starting\x20ELO\x201200'),0x4b0;}catch(_0x3de07c){return console['error']('Error\x20getting\x20ELO\x20at\x20time\x20for\x20player\x20'+_0x9e696a+':',_0x3de07c),0x4b0;}}function openResimulateModal(){const _0x5b7668=a2_0x57c234;console['log']('openResimulateModal\x20called!');const _0x375b38=document['getElementById']('resimulate-modal');console['log']('Modal\x20element\x20found:',_0x375b38);if(!_0x375b38){console['error'](_0x5b7668(0x274));return;}_0x375b38['style'][_0x5b7668(0x2ea)]='block',_0x375b38['style']['visibility']='visible',_0x375b38['style']['opacity']='1',_0x375b38[_0x5b7668(0x15b)]['add']('active'),console[_0x5b7668(0x2a6)]('Modal\x20should\x20now\x20be\x20visible'),console[_0x5b7668(0x2a6)]('Modal\x20computed\x20styles:',window['getComputedStyle'](_0x375b38)[_0x5b7668(0x2ea)]);const _0x471ac6=document[_0x5b7668(0x37a)]('match-details-container'),_0xa58411=document['getElementById']('validation-results-container'),_0x31a7a5=document['getElementById']('confirm-resimulate-btn'),_0x56050b=document[_0x5b7668(0x37a)]('resimulate-match-id');if(_0x471ac6)_0x471ac6['innerHTML']='';if(_0xa58411)_0xa58411['innerHTML']='';if(_0x31a7a5)_0x31a7a5['style'][_0x5b7668(0x2ea)]='none';if(_0x56050b)_0x56050b['value']='';console[_0x5b7668(0x2a6)]('Modal\x20setup\x20complete');}function closeResimulateModal(){const _0x131b10=a2_0x57c234;document['getElementById']('resimulate-modal')['style']['display']=_0x131b10(0x297),window['pendingResimulateData']=null;}window['resimulateMatch']=resimulateMatch,window['confirmResimulateMatch']=confirmResimulateMatch,window[a2_0x57c234(0x1ec)]=openResimulateModal,window['closeResimulateModal']=closeResimulateModal;async function loadPointsData(){const _0x250233=a2_0x57c234;console['log']('Loading\x20points\x20data...');try{await Promise['all']([loadPointsOverview(),loadPointsHistory()]),showNotification('Points\x20data\x20loaded\x20successfully','success');}catch(_0x1e8da2){console['error'](_0x250233(0x38d),_0x1e8da2),showNotification('Failed\x20to\x20load\x20points\x20data:\x20'+_0x1e8da2['message'],'error');}}function renderPointsOverview(_0xf9b406){const _0x41f3ff=a2_0x57c234,_0x4b3340=document['getElementById'](_0x41f3ff(0x37c));if(!_0x4b3340)return;if(_0xf9b406['length']===0x0){_0x4b3340[_0x41f3ff(0x200)]=_0x41f3ff(0x382);return;}_0x4b3340['innerHTML']='',_0xf9b406['forEach'](_0x2b1fe6=>{const _0x4b3772=_0x41f3ff,_0x5ba378=document['createElement']('tr'),_0x25e53c=_0x2b1fe6[_0x4b3772(0x369)]||_0x2b1fe6['username']||_0x4b3772(0x2f9),_0x4f081e=_0x2b1fe6['email']||'No\x20email',_0xf8f9f7=_0x2b1fe6['points']||0x0,_0x58b949=_0x2b1fe6['lastPointsModified']?new Date(_0x2b1fe6['lastPointsModified']['seconds']*0x3e8)['toLocaleDateString']():'Never';_0x5ba378['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-user\x20user-icon\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-name\x22>'+_0x25e53c+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4f081e+_0x4b3772(0x308)+(_0xf8f9f7>0x3e8?'high-points':_0xf8f9f7>0x1f4?_0x4b3772(0x1d9):_0x4b3772(0x250))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x20'+_0xf8f9f7['toLocaleString']()+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x58b949+_0x4b3772(0x1a2)+_0x2b1fe6['id']+'\x22\x20title=\x22Quick\x20Edit\x20Points\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22view-history-btn\x22\x20data-user-id=\x22'+_0x2b1fe6['id']+'\x22\x20title=\x22View\x20Points\x20History\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-history\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4b3340['appendChild'](_0x5ba378);}),setupPointsActionButtons();}function setupPointsActionButtons(){const _0x3d990a=a2_0x57c234;console[_0x3d990a(0x2a6)]('Setting\x20up\x20points\x20action\x20buttons...');const _0x1bb7a2=document[_0x3d990a(0x31f)](_0x3d990a(0x2b6));console['log']('Found\x20'+_0x1bb7a2['length']+_0x3d990a(0x330)),_0x1bb7a2['forEach'](_0x5ded1c=>{const _0x1e0c19=_0x3d990a,_0x4e3538=_0x5ded1c[_0x1e0c19(0x28f)](!![]);_0x5ded1c['parentNode']['replaceChild'](_0x4e3538,_0x5ded1c);});const _0x1f173d=document['querySelectorAll'](_0x3d990a(0x253));console['log'](_0x3d990a(0x1b9)+_0x1f173d['length']+'\x20view\x20history\x20buttons'),_0x1f173d[_0x3d990a(0x30a)](_0x5c3928=>{const _0x59b801=_0x5c3928['cloneNode'](!![]);_0x5c3928['parentNode']['replaceChild'](_0x59b801,_0x5c3928);}),document['querySelectorAll'](_0x3d990a(0x2b6))['forEach'](_0x59d603=>{const _0x50fd41=_0x3d990a;_0x59d603['addEventListener'](_0x50fd41(0x1dd),function(_0x19cffb){const _0x25de6c=_0x50fd41;_0x19cffb['preventDefault'](),_0x19cffb['stopPropagation']();const _0x326c3c=this['dataset']['userId'];console[_0x25de6c(0x2a6)]('Quick\x20edit\x20clicked\x20for\x20user:',_0x326c3c);if(!_0x326c3c){console[_0x25de6c(0x380)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x25de6c(0x1c6)]['opacity']='0.6',setTimeout(()=>{this['style']['opacity']='1';},0xc8),openQuickEditModal(_0x326c3c);});}),document['querySelectorAll']('.view-history-btn')['forEach'](_0x13e620=>{_0x13e620['addEventListener']('click',function(_0x300c82){const _0x3ffda5=a2_0x4135;_0x300c82[_0x3ffda5(0x386)](),_0x300c82[_0x3ffda5(0x395)]();const _0x157f86=this[_0x3ffda5(0x393)]['userId'];console[_0x3ffda5(0x2a6)](_0x3ffda5(0x2b3),_0x157f86);if(!_0x157f86){console[_0x3ffda5(0x380)]('No\x20user\x20ID\x20found\x20on\x20button');return;}this[_0x3ffda5(0x1c6)]['opacity']='0.6',setTimeout(()=>{const _0x6d2188=_0x3ffda5;this['style'][_0x6d2188(0x1df)]='1';},0xc8),loadUserPointsHistory(_0x157f86);});}),console['log']('Points\x20action\x20buttons\x20setup\x20complete');}async function openQuickEditModal(_0xdd8b1){const _0x4f4cf2=a2_0x57c234;console['log']('Opening\x20quick\x20edit\x20modal\x20for\x20user\x20ID:',_0xdd8b1);const _0x337d92=document['getElementById'](_0x4f4cf2(0x184));if(!_0x337d92){console[_0x4f4cf2(0x380)](_0x4f4cf2(0x144)),showNotification('Quick\x20edit\x20modal\x20not\x20found\x20in\x20the\x20page','error');return;}try{showNotification(_0x4f4cf2(0x32d),_0x4f4cf2(0x2d4));const _0x57b686=doc(db,_0x4f4cf2(0x1d1),_0xdd8b1),_0x288a08=await getDoc(_0x57b686);if(!_0x288a08['exists']()){showNotification(_0x4f4cf2(0x2ee),_0x4f4cf2(0x380));return;}const _0x4e0f0d=_0x288a08['data']();console['log']('User\x20data\x20loaded:',_0x4e0f0d);const _0x1bd691=document['getElementById']('quick-edit-user-id'),_0x504b92=document[_0x4f4cf2(0x37a)](_0x4f4cf2(0x151)),_0x474b8e=document[_0x4f4cf2(0x37a)]('quick-edit-email'),_0xe56069=document['getElementById']('quick-edit-current-points'),_0x5e57d9=document['getElementById'](_0x4f4cf2(0x17c));if(!_0x1bd691||!_0x504b92||!_0x474b8e||!_0xe56069||!_0x5e57d9){console[_0x4f4cf2(0x380)]('Quick\x20edit\x20form\x20elements\x20missing\x20from\x20HTML'),showNotification('Quick\x20edit\x20form\x20is\x20incomplete.\x20Check\x20the\x20HTML\x20structure.',_0x4f4cf2(0x380));return;}_0x1bd691[_0x4f4cf2(0x296)]=_0xdd8b1,_0x504b92['textContent']=_0x4e0f0d['displayName']||_0x4e0f0d['username']||'Unknown\x20User',_0x474b8e['textContent']=_0x4e0f0d[_0x4f4cf2(0x31d)]||'No\x20email',_0xe56069['textContent']=(_0x4e0f0d['points']||0x0)['toLocaleString'](),_0x5e57d9[_0x4f4cf2(0x2f5)]();const _0x201a1c=document['getElementById']('quick-add');_0x201a1c&&(_0x201a1c[_0x4f4cf2(0x288)]=!![]);_0x337d92[_0x4f4cf2(0x15b)]['add']('active'),console['log']('Modal\x20opened\x20successfully');const _0x186469=document['getElementById']('quick-points-amount');_0x186469&&setTimeout(()=>_0x186469['focus'](),0x64);}catch(_0x2a214f){console['error']('Error\x20opening\x20quick\x20edit\x20modal:',_0x2a214f),showNotification('Failed\x20to\x20load\x20user\x20data:\x20'+_0x2a214f['message'],'error');}}function closeQuickEditModal(){const _0x27dbf6=a2_0x57c234,_0x3e0087=document[_0x27dbf6(0x37a)]('quick-edit-points-modal');_0x3e0087&&_0x3e0087['classList']['remove']('active');}async function handleQuickEditPoints(_0x52c702){const _0x311e68=a2_0x57c234;_0x52c702['preventDefault']();const _0x12da83=document['getElementById']('quick-edit-user-id')['value'],_0x5bbddc=document['querySelector'](_0x311e68(0x1ce))[_0x311e68(0x296)],_0x133868=parseInt(document['getElementById'](_0x311e68(0x2dd))['value']),_0x10195f=document['getElementById'](_0x311e68(0x2db))[_0x311e68(0x296)]['trim']();console[_0x311e68(0x2a6)]('Processing\x20points\x20edit:',{'userId':_0x12da83,'action':_0x5bbddc,'amount':_0x133868,'reason':_0x10195f});if(!_0x12da83||!_0x133868||_0x133868<0x0){showNotification('Please\x20enter\x20valid\x20data','error');return;}try{await modifyUserPoints(_0x12da83,_0x5bbddc,_0x133868,_0x10195f),closeQuickEditModal(),loadPointsOverview(),showNotification('Points\x20updated\x20successfully',_0x311e68(0x226)),console['log']('Points\x20updated\x20successfully\x20for\x20user:',_0x12da83);}catch(_0x42405b){console['error'](_0x311e68(0x190),_0x42405b),showNotification('Failed\x20to\x20update\x20points:\x20'+_0x42405b['message'],'error');}}async function searchUsersForPoints(){const _0x2dc21e=a2_0x57c234,_0x2acfed=document[_0x2dc21e(0x37a)](_0x2dc21e(0x1e4))['value']['trim']()['toLowerCase'](),_0x81d220=document['getElementById']('user-search-results');if(!_0x2acfed||_0x2acfed[_0x2dc21e(0x1a8)]<0x2){_0x81d220['innerHTML']='';return;}_0x81d220['innerHTML']=_0x2dc21e(0x2ce);try{const _0x32fa3c=collection(db,'userProfiles'),_0x25533d=await getDocs(_0x32fa3c),_0x4bb395=[];_0x25533d['forEach'](_0x3d8c7c=>{const _0x356ddf=_0x2dc21e,_0x5e82dd=_0x3d8c7c['data'](),_0x47dae0=(_0x5e82dd['displayName']||_0x5e82dd['username']||'')['toLowerCase'](),_0x3003bf=(_0x5e82dd[_0x356ddf(0x31d)]||'')['toLowerCase']();(_0x47dae0[_0x356ddf(0x2b4)](_0x2acfed)||_0x3003bf[_0x356ddf(0x2b4)](_0x2acfed))&&_0x4bb395['push']({'id':_0x3d8c7c['id'],..._0x5e82dd});});if(_0x4bb395[_0x2dc21e(0x1a8)]===0x0){_0x81d220[_0x2dc21e(0x200)]=_0x2dc21e(0x17b);return;}_0x81d220['innerHTML']='',_0x4bb395['forEach'](_0x497b41=>{const _0x8917f8=_0x2dc21e,_0x1a74e6=document['createElement']('div');_0x1a74e6['className']='search-result-item',_0x1a74e6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+(_0x497b41['displayName']||_0x497b41['username']||'Unknown')+_0x8917f8(0x2d2)+(_0x497b41[_0x8917f8(0x31d)]||'No\x20email')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-points\x22>'+(_0x497b41['points']||0x0)[_0x8917f8(0x1ab)]()+'\x20points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1a74e6[_0x8917f8(0x392)]('click',()=>selectUserForPoints(_0x497b41)),_0x81d220[_0x8917f8(0x156)](_0x1a74e6);});}catch(_0x4252c6){console['error']('Error\x20searching\x20users:',_0x4252c6),_0x81d220['innerHTML']='<div\x20class=\x22error\x22>Error\x20searching\x20users</div>';}}function selectUserForPoints(_0x331726){const _0x433f35=a2_0x57c234;document['getElementById']('selected-user-name')[_0x433f35(0x14a)]=_0x331726[_0x433f35(0x369)]||_0x331726[_0x433f35(0x320)]||_0x433f35(0x2f9),document['getElementById'](_0x433f35(0x191))['textContent']=(_0x331726['points']||0x0)['toLocaleString'](),document['getElementById']('selected-user-id')['value']=_0x331726['id'],document['getElementById'](_0x433f35(0x1ed))['style']['display']=_0x433f35(0x35f),document['getElementById']('points-management-forms')['style'][_0x433f35(0x2ea)]='block',document['getElementById']('user-search-results')['innerHTML']='',document['getElementById']('points-user-search')[_0x433f35(0x296)]='';}async function handleModifyPoints(_0x2320f2){const _0x42622f=a2_0x57c234;_0x2320f2['preventDefault']();const _0x2d9717=document[_0x42622f(0x37a)]('selected-user-id')['value'],_0x277920=document[_0x42622f(0x37a)]('points-action')['value'],_0x27813b=parseInt(document['getElementById']('points-amount')['value']),_0x19640e=document['getElementById']('points-reason')['value'][_0x42622f(0x14f)]();if(!_0x2d9717||!_0x27813b||_0x27813b<0x0){showNotification('Please\x20select\x20a\x20user\x20and\x20enter\x20a\x20valid\x20amount','error');return;}try{await modifyUserPoints(_0x2d9717,_0x277920,_0x27813b,_0x19640e),document['getElementById']('modify-points-form')['reset']();const _0x56dc01=doc(db,'userProfiles',_0x2d9717),_0x17518a=await getDoc(_0x56dc01);if(_0x17518a['exists']()){const _0x22234e=_0x17518a['data']();document['getElementById']('selected-user-points')['textContent']=(_0x22234e['points']||0x0)['toLocaleString']();}showNotification('Points\x20modified\x20successfully','success'),loadPointsHistory();}catch(_0x42f8a7){console[_0x42622f(0x380)]('Error\x20modifying\x20points:',_0x42f8a7),showNotification(_0x42622f(0x348)+_0x42f8a7['message'],_0x42622f(0x380));}}async function loadPointsHistory(){const _0x3e1416=a2_0x57c234,_0x384bd7=document['getElementById']('points-history-table-body');if(!_0x384bd7)return;_0x384bd7['innerHTML']='<tr><td\x20colspan=\x226\x22\x20class=\x22loading-cell\x22>Loading\x20history...</td></tr>';try{const _0x4ead54=collection(db,'pointsHistory'),_0x30d0cc=query(_0x4ead54,orderBy('timestamp',_0x3e1416(0x1f6)),limit(0x32)),_0x4a08ba=await getDocs(_0x30d0cc);if(_0x4a08ba[_0x3e1416(0x2b1)]){_0x384bd7['innerHTML']=_0x3e1416(0x355);return;}_0x384bd7[_0x3e1416(0x200)]='',_0x4a08ba['forEach'](_0x42fe96=>{const _0x7ac2f4=_0x3e1416,_0x2e462c=_0x42fe96[_0x7ac2f4(0x1af)](),_0x17fb30=document[_0x7ac2f4(0x1d7)]('tr'),_0x2b798a=_0x2e462c['timestamp']?new Date(_0x2e462c['timestamp'][_0x7ac2f4(0x2bf)]*0x3e8)[_0x7ac2f4(0x1ab)]():'Unknown';let _0x46f0c4='';switch(_0x2e462c[_0x7ac2f4(0x15e)]){case'add':_0x46f0c4='Added\x20'+_0x2e462c[_0x7ac2f4(0x1fe)]+'\x20points';break;case'subtract':_0x46f0c4='Subtracted\x20'+_0x2e462c[_0x7ac2f4(0x1fe)]+'\x20points';break;case _0x7ac2f4(0x1f8):_0x46f0c4=_0x7ac2f4(0x1b7)+_0x2e462c['amount']+'\x20points';break;default:_0x46f0c4=_0x2e462c['action']+'\x20'+_0x2e462c['amount']+'\x20points';}_0x17fb30['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2b798a+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2e462c['displayName']||'Unknown\x20User')+_0x7ac2f4(0x35c)+_0x46f0c4+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22points-change\x20'+_0x2e462c['action']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2e462c['previousPoints']||0x0)+'\x20\x20'+(_0x2e462c[_0x7ac2f4(0x33d)]||0x0)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2e462c[_0x7ac2f4(0x2d5)]||'No\x20reason\x20provided')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x2e462c[_0x7ac2f4(0x166)]||'Unknown\x20Admin')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x384bd7[_0x7ac2f4(0x156)](_0x17fb30);});}catch(_0x4aecef){console['error'](_0x3e1416(0x27f),_0x4aecef),_0x384bd7['innerHTML']=_0x3e1416(0x256)+_0x4aecef['message']+_0x3e1416(0x224);}}function filterPointsOverview(){const _0x40165e=a2_0x57c234,_0x469dc7=document['getElementById']('points-overview-search')['value']['toLowerCase']();if(!window[_0x40165e(0x328)])return;const _0x3e743b=window['allUsersPoints'][_0x40165e(0x25b)](_0x4c39f2=>{const _0x1831cf=_0x40165e,_0x4f468a=(_0x4c39f2['displayName']||_0x4c39f2['username']||'')['toLowerCase'](),_0x76a493=(_0x4c39f2[_0x1831cf(0x31d)]||'')[_0x1831cf(0x1ee)]();return _0x4f468a[_0x1831cf(0x2b4)](_0x469dc7)||_0x76a493[_0x1831cf(0x2b4)](_0x469dc7);});renderPointsOverview(_0x3e743b);}function sortPointsOverview(){const _0x3d36f6=a2_0x57c234,_0x188b0a=document['getElementById']('points-sort-order')[_0x3d36f6(0x296)];if(!window['allUsersPoints'])return;const _0x2d2dad=[...window[_0x3d36f6(0x328)]];switch(_0x188b0a){case'points-desc':_0x2d2dad['sort']((_0x4d45a5,_0x4c68a5)=>(_0x4c68a5[_0x3d36f6(0x145)]||0x0)-(_0x4d45a5['points']||0x0));break;case'points-asc':_0x2d2dad['sort']((_0x39db88,_0x2f8e65)=>(_0x39db88[_0x3d36f6(0x145)]||0x0)-(_0x2f8e65['points']||0x0));break;case'name-asc':_0x2d2dad[_0x3d36f6(0x2ab)]((_0x590fcc,_0x3fbfac)=>{const _0x315e47=_0x3d36f6,_0x14fc82=(_0x590fcc[_0x315e47(0x369)]||_0x590fcc[_0x315e47(0x320)]||'')[_0x315e47(0x1ee)](),_0xe28de4=(_0x3fbfac['displayName']||_0x3fbfac[_0x315e47(0x320)]||'')['toLowerCase']();return _0x14fc82['localeCompare'](_0xe28de4);});break;case'name-desc':_0x2d2dad['sort']((_0x397f7f,_0x118152)=>{const _0xdbcbc9=_0x3d36f6,_0x12587d=(_0x397f7f[_0xdbcbc9(0x369)]||_0x397f7f['username']||'')[_0xdbcbc9(0x1ee)](),_0x4f1035=(_0x118152[_0xdbcbc9(0x369)]||_0x118152['username']||'')['toLowerCase']();return _0x4f1035[_0xdbcbc9(0x1a7)](_0x12587d);});break;}renderPointsOverview(_0x2d2dad);}async function handleAwardItem(_0x1270ad){const _0x5a5ef6=a2_0x57c234;_0x1270ad['preventDefault']();const _0x15b46f=document['getElementById'](_0x5a5ef6(0x174))[_0x5a5ef6(0x296)],_0xcb02c5=document['getElementById']('store-item-select')[_0x5a5ef6(0x296)],_0x252495=document[_0x5a5ef6(0x37a)](_0x5a5ef6(0x1bd))['value']['trim']();if(!_0x15b46f||!_0xcb02c5){showNotification('Please\x20select\x20a\x20user\x20and\x20store\x20item','error');return;}try{showNotification(_0x5a5ef6(0x387),'success'),document['getElementById']('award-item-form')['reset']();}catch(_0x31fab2){console[_0x5a5ef6(0x380)](_0x5a5ef6(0x365),_0x31fab2),showNotification('Failed\x20to\x20award\x20item:\x20'+_0x31fab2[_0x5a5ef6(0x1b3)],'error');}}async function loadUserPointsHistory(_0x590a7c){const _0x57f17b=a2_0x57c234;try{const _0x21e2be=collection(db,_0x57f17b(0x19d)),_0x3f420f=query(_0x21e2be,where('userId','==',_0x590a7c),orderBy(_0x57f17b(0x381),_0x57f17b(0x1f6))),_0xf3a2b0=await getDocs(_0x3f420f);console['log']('Found\x20'+_0xf3a2b0[_0x57f17b(0x30e)]+'\x20history\x20entries\x20for\x20user\x20'+_0x590a7c),showNotification('User\x20has\x20'+_0xf3a2b0['size']+'\x20points\x20history\x20entries','info');}catch(_0x57ecde){console[_0x57f17b(0x380)]('Error\x20loading\x20user\x20points\x20history:',_0x57ecde),showNotification('Failed\x20to\x20load\x20user\x20history','error');}}async function initializeUserPointsField(){const _0x2a2d67=a2_0x57c234;try{console[_0x2a2d67(0x2a6)]('Starting\x20points\x20field\x20initialization\x20for\x20all\x20users...');const _0x327bc4=collection(db,'userProfiles'),_0x49a854=await getDocs(_0x327bc4);if(_0x49a854[_0x2a2d67(0x2b1)]){console['log']('No\x20users\x20found\x20in\x20userProfiles\x20collection');return;}let _0x473587=0x0,_0x9c9c66=0x0;const _0x1880f7=writeBatch(db);let _0x3701fd=0x0;return console['log']('Found\x20'+_0x49a854['size']+'\x20users\x20to\x20check...'),_0x49a854['forEach'](_0x32e9c3=>{const _0x43d216=_0x2a2d67,_0x4c7dd1=_0x32e9c3['data']();_0x4c7dd1['points']===undefined||_0x4c7dd1['points']===null?(_0x1880f7['update'](_0x32e9c3['ref'],{'points':0x0,'pointsInitializedAt':serverTimestamp()}),_0x473587++,_0x3701fd++,console[_0x43d216(0x2a6)](_0x43d216(0x228)+(_0x4c7dd1['displayName']||_0x4c7dd1['username']||_0x4c7dd1[_0x43d216(0x31d)]||'Unknown')+'\x20for\x20points\x20initialization')):(_0x9c9c66++,console['log']((_0x4c7dd1[_0x43d216(0x369)]||_0x4c7dd1['username']||_0x4c7dd1['email']||_0x43d216(0x1c2))+'\x20already\x20has\x20points:\x20'+_0x4c7dd1['points'])),_0x3701fd>=0x1f4&&console['warn']('Batch\x20limit\x20reached\x20-\x20you\x20may\x20need\x20to\x20run\x20this\x20function\x20multiple\x20times\x20for\x20large\x20datasets');}),_0x473587>0x0?(console['log'](_0x2a2d67(0x36b)+_0x473587+'\x20users...'),await _0x1880f7['commit'](),console[_0x2a2d67(0x2a6)]('\x20Successfully\x20initialized\x20points\x20field\x20for\x20'+_0x473587+'\x20users')):console[_0x2a2d67(0x2a6)](_0x2a2d67(0x1f4)),console['log']('Migration\x20Summary:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Total\x20users\x20checked:\x20'+_0x49a854['size']+_0x2a2d67(0x2a5)+_0x473587+_0x2a2d67(0x343)+_0x9c9c66),showNotification(_0x2a2d67(0x19e)+_0x473587+'\x20users.\x20'+_0x9c9c66+_0x2a2d67(0x1c8),'success'),window[_0x2a2d67(0x328)]&&loadPointsOverview(),{'totalUsers':_0x49a854['size'],'usersUpdated':_0x473587,'usersAlreadyHadPoints':_0x9c9c66};}catch(_0x2973f5){console['error']('Error\x20initializing\x20points\x20field:',_0x2973f5),showNotification('Error\x20initializing\x20points:\x20'+_0x2973f5[_0x2a2d67(0x1b3)],_0x2a2d67(0x380));throw _0x2973f5;}}function addPointsMigrationButton(){const _0x1181df=a2_0x57c234,_0x226738=document[_0x1181df(0x37a)]('manage-points');if(!_0x226738)return;if(document['getElementById'](_0x1181df(0x20d)))return;const _0x294924=document[_0x1181df(0x1d7)]('div');_0x294924[_0x1181df(0x357)]='migration-section',_0x294924['style'][_0x1181df(0x27b)]=_0x1181df(0x2c2),_0x294924['style']['padding']='15px',_0x294924[_0x1181df(0x1c6)][_0x1181df(0x2ac)]='rgba(255,\x20193,\x207,\x200.1)',_0x294924['style'][_0x1181df(0x38b)]='1px\x20solid\x20rgba(255,\x20193,\x207,\x200.3)',_0x294924['style'][_0x1181df(0x178)]='5px',_0x294924[_0x1181df(0x200)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<h4><i\x20class=\x22fas\x20fa-database\x22></i>\x20Database\x20Migration</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>Initialize\x20the\x20points\x20field\x20for\x20all\x20users\x20who\x20don\x27t\x20have\x20it\x20yet.\x20This\x20is\x20safe\x20to\x20run\x20multiple\x20times.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22migrate-points-btn\x22\x20class=\x22btn\x20btn-warning\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-magic\x22></i>\x20Initialize\x20Points\x20Field\x20for\x20All\x20Users\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';const _0xed92c=_0x226738['querySelector']('.section-header');_0xed92c&&_0xed92c[_0x1181df(0x37d)]('afterend',_0x294924),document['getElementById']('migrate-points-btn')['addEventListener']('click',async function(){const _0x210f1b=_0x1181df;if(confirm(_0x210f1b(0x22d))){this['disabled']=!![],this[_0x210f1b(0x200)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Initializing...';try{await initializeUserPointsField(),this['innerHTML']=_0x210f1b(0x227),this['style']['backgroundColor']=_0x210f1b(0x1be),setTimeout(()=>{const _0x4a147d=_0x210f1b;_0x294924['style']['display']=_0x4a147d(0x297);},0xbb8);}catch(_0x202d4d){this[_0x210f1b(0x200)]='<i\x20class=\x22fas\x20fa-exclamation-triangle\x22></i>\x20Error\x20-\x20Try\x20Again',this[_0x210f1b(0x164)]=![];}}});}function setupManagePointsSection(){const _0x85e304=a2_0x57c234;console['log']('Setting\x20up\x20Manage\x20Points\x20section'),addPointsMigrationButton();const _0x14e581=document[_0x85e304(0x37a)]('points-user-search');_0x14e581&&_0x14e581['addEventListener']('input',debounce(searchUsersForPoints,0x12c));const _0x8c3f89=document[_0x85e304(0x37a)]('modify-points-form');_0x8c3f89&&_0x8c3f89['addEventListener']('submit',handleModifyPoints);const _0x3ca7f1=document['getElementById'](_0x85e304(0x2e8));_0x3ca7f1&&_0x3ca7f1['addEventListener']('submit',handleAwardItem);const _0x520ed2=document['getElementById']('points-overview-search');_0x520ed2&&_0x520ed2['addEventListener'](_0x85e304(0x1cd),debounce(filterPointsOverview,0x12c));const _0x36d249=document['getElementById']('points-sort-order');_0x36d249&&_0x36d249['addEventListener']('change',sortPointsOverview);const _0x480c74=document['getElementById']('refresh-points-overview');_0x480c74&&_0x480c74[_0x85e304(0x392)]('click',loadPointsOverview);const _0x5ca86f=document['getElementById']('bulk-award-points-btn');_0x5ca86f&&_0x5ca86f[_0x85e304(0x392)](_0x85e304(0x1dd),async()=>{confirm('This\x20will\x20award\x20points\x20for\x20all\x20approved\x20matches\x20based\x20on\x20their\x20subgame\x20types.\x20Continue?')&&(_0x5ca86f['disabled']=!![],_0x5ca86f['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Processing...',await _0x54f113(),_0x5ca86f['disabled']=![],_0x5ca86f['innerHTML']='<i\x20class=\x22fas\x20fa-coins\x22></i>\x20Award\x20Points\x20for\x20All\x20Matches');});const _0x24635c=document['getElementById']('award-all-pilots-btn');_0x24635c&&_0x24635c['addEventListener']('click',awardPointsToAllPilots);async function _0x54f113(){const _0x2687e5=_0x85e304;try{showNotification('Starting\x20bulk\x20points\x20award\x20process\x20for\x20ALL\x20game\x20types...','info');const _0x243e9d={'':0xa,'Standard':0xa,'Fusion\x20Match':0x19,'6\x20Missiles':0xa,'Weapon\x20Imbalance':0x1e,'Blind\x20Match':0x4b,'Rematch':0x14,'Disorientation':0x32,'Ratting':0x23,'Altered\x20Powerups':0x23,'Mega\x20Match':0x28,'Dogfight':0x32,'Gauss\x20and\x20Mercs':0x19,'Misc':0x1e};let _0x58f082=0x0,_0x1468e0=0x0,_0x4d1ee5=0x0,_0x14bbab=0x0,_0x3973e1=0x0,_0x1dd250=0x0;const _0x342b40=new Set(),_0x1bdbe7=collection(db,_0x2687e5(0x19d)),_0x30de4d=query(_0x1bdbe7,where('reason','>=','Bulk\x20award:'),where('reason','<=',_0x2687e5(0x313))),_0x2f9756=await getDocs(_0x30de4d);_0x2f9756['forEach'](_0x1c428d=>{const _0x37d9a7=_0x2687e5,_0x4ccd43=_0x1c428d['data'](),_0x8eb00b=_0x4ccd43[_0x37d9a7(0x2d5)]||'',_0x311b6d=_0x8eb00b['match'](/Match ID: ([a-zA-Z0-9]+)/);_0x311b6d&&_0x311b6d[0x1]&&_0x342b40['add'](_0x311b6d[0x1]);}),console['log']('Found\x20'+_0x342b40['size']+_0x2687e5(0x241));const [_0x55fe15,_0x1b1276,_0x3b7df6]=await Promise['all']([getDocs(collection(db,_0x2687e5(0x1a4))),getDocs(collection(db,'approvedMatchesD2')),getDocs(collection(db,_0x2687e5(0x261)))]),_0x5599a9=_0x55fe15['size']+_0x1b1276[_0x2687e5(0x30e)]+_0x3b7df6['size'];showNotification('Found\x20'+_0x5599a9+'\x20total\x20matches\x20across\x20all\x20ladders','info');const _0x271414=async(_0x14c2d8,_0x5a7f47)=>{const _0x2288ae=_0x2687e5;let _0x1be87a=writeBatch(db);const _0x134340=[];let _0x6c8be1=0x0;for(const _0x1616d8 of _0x14c2d8['docs']){try{if(_0x342b40[_0x2288ae(0x23c)](_0x1616d8['id'])){if(_0x5a7f47==='D1')_0x1dd250++;if(_0x5a7f47==='D2')_0x1dd250++;if(_0x5a7f47==='D3')_0x1dd250++;continue;}const _0x11a1bb=_0x1616d8[_0x2288ae(0x1af)](),_0x5249b5=_0x11a1bb['subgameType']||'Standard',_0x1bc2f9=_0x243e9d[_0x5249b5]||0xa;let _0x499c59=_0x11a1bb['winnerId'];if(!_0x499c59&&_0x11a1bb['winnerUsername']){const [_0x208d99,_0x28b2ac,_0x57bb84]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x2288ae(0x320),'==',_0x11a1bb[_0x2288ae(0x18a)]))),getDocs(query(collection(db,'playersD2'),where('username','==',_0x11a1bb['winnerUsername']))),getDocs(query(collection(db,'playersD3'),where('username','==',_0x11a1bb[_0x2288ae(0x18a)])))]);if(!_0x208d99['empty'])_0x499c59=_0x208d99['docs'][0x0]['id'];else{if(!_0x28b2ac['empty'])_0x499c59=_0x28b2ac['docs'][0x0]['id'];else{if(!_0x57bb84['empty'])_0x499c59=_0x57bb84['docs'][0x0]['id'];}}}let _0xa31022=_0x11a1bb['loserId'];if(!_0xa31022&&_0x11a1bb['loserUsername']){const [_0x4d19d5,_0x2c3f03,_0x91102f]=await Promise['all']([getDocs(query(collection(db,'players'),where('username','==',_0x11a1bb[_0x2288ae(0x202)]))),getDocs(query(collection(db,_0x2288ae(0x153)),where('username','==',_0x11a1bb[_0x2288ae(0x202)]))),getDocs(query(collection(db,_0x2288ae(0x346)),where('username','==',_0x11a1bb['loserUsername'])))]);if(!_0x4d19d5['empty'])_0xa31022=_0x4d19d5[_0x2288ae(0x158)][0x0]['id'];else{if(!_0x2c3f03['empty'])_0xa31022=_0x2c3f03['docs'][0x0]['id'];else{if(!_0x91102f['empty'])_0xa31022=_0x91102f[_0x2288ae(0x158)][0x0]['id'];}}}if(_0x499c59&&_0xa31022){const _0x583c50=doc(db,'userProfiles',_0x499c59),_0x2790b5=doc(db,'userProfiles',_0xa31022),[_0x3e4c98,_0x13c553]=await Promise['all']([getDoc(_0x583c50),getDoc(_0x2790b5)]);if(_0x3e4c98['exists']()){const _0x4e7d93=_0x3e4c98['data'](),_0x1388ca=_0x4e7d93['points']||0x0;_0x1be87a['update'](_0x583c50,{'points':_0x1388ca+_0x1bc2f9,'lastPointsModified':serverTimestamp()}),_0x134340['push']({'userId':_0x499c59,'userEmail':_0x4e7d93['email']||'unknown','displayName':_0x4e7d93['displayName']||_0x11a1bb[_0x2288ae(0x18a)]||'Unknown\x20User','action':'add','amount':_0x1bc2f9,'previousPoints':_0x1388ca,'newPoints':_0x1388ca+_0x1bc2f9,'reason':'Bulk\x20award:\x20'+_0x5249b5+'\x20match\x20(Winner)\x20-\x20Match\x20ID:\x20'+_0x1616d8['id']+_0x2288ae(0x2e9)+_0x5a7f47,'adminEmail':auth[_0x2288ae(0x1c4)]['email'],'timestamp':serverTimestamp()});}if(_0x13c553['exists']()){const _0x350917=_0x13c553['data'](),_0x2d5b3f=_0x350917['points']||0x0;_0x1be87a['update'](_0x2790b5,{'points':_0x2d5b3f+_0x1bc2f9,'lastPointsModified':serverTimestamp()}),_0x134340['push']({'userId':_0xa31022,'userEmail':_0x350917['email']||_0x2288ae(0x2ad),'displayName':_0x350917['displayName']||_0x11a1bb['loserUsername']||'Unknown\x20User','action':'add','amount':_0x1bc2f9,'previousPoints':_0x2d5b3f,'newPoints':_0x2d5b3f+_0x1bc2f9,'reason':_0x2288ae(0x306)+_0x5249b5+'\x20match\x20(Participant)\x20-\x20Match\x20ID:\x20'+_0x1616d8['id']+'\x20-\x20'+_0x5a7f47,'adminEmail':auth[_0x2288ae(0x1c4)]['email'],'timestamp':serverTimestamp()});}_0x14bbab+=_0x1bc2f9*0x2,_0x6c8be1+=0x2,_0x342b40['add'](_0x1616d8['id']);if(_0x6c8be1>=0x190){await _0x1be87a['commit']();for(const _0x33601f of _0x134340){await addDoc(collection(db,'pointsHistory'),_0x33601f);}_0x1be87a=writeBatch(db),_0x6c8be1=0x0,_0x134340[_0x2288ae(0x1a8)]=0x0;}}}catch(_0x505de7){console[_0x2288ae(0x380)](_0x2288ae(0x218)+_0x5a7f47+'\x20match\x20'+_0x1616d8['id']+':',_0x505de7),_0x3973e1++;}}if(_0x6c8be1>0x0){await _0x1be87a['commit']();for(const _0x3b4891 of _0x134340){await addDoc(collection(db,'pointsHistory'),_0x3b4891);}}return{'processed':_0x5a7f47==='D1'?_0x58f082:_0x5a7f47==='D2'?_0x1468e0:_0x4d1ee5};};await _0x271414(_0x55fe15,'D1'),await _0x271414(_0x1b1276,'D2'),await _0x271414(_0x3b7df6,'D3'),showNotification(_0x2687e5(0x1e9)+_0x58f082+_0x2687e5(0x363)+_0x1468e0+_0x2687e5(0x32a)+_0x4d1ee5+_0x2687e5(0x28a)+('Awarded\x20'+_0x14bbab+'\x20points.\x20Skipped\x20'+_0x1dd250+'\x20already\x20processed\x20matches.\x20Errors:\x20'+_0x3973e1),_0x2687e5(0x226)),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x126c90){console['error'](_0x2687e5(0x2f2),_0x126c90),showNotification('Error\x20in\x20bulk\x20award\x20process:\x20'+_0x126c90['message'],_0x2687e5(0x380));}}const _0x543d78=document[_0x85e304(0x37a)]('quick-edit-points-modal');if(_0x543d78){console[_0x85e304(0x2a6)]('Quick\x20edit\x20modal\x20found,\x20setting\x20up\x20events...');const _0x8cba59=_0x543d78['querySelector']('.close-btn');_0x8cba59?_0x8cba59['addEventListener'](_0x85e304(0x1dd),function(){console['log']('Modal\x20close\x20button\x20clicked'),closeQuickEditModal();}):console['warn'](_0x85e304(0x2a7));const _0xbbbe4=document['getElementById']('cancel-quick-edit');_0xbbbe4?_0xbbbe4['addEventListener']('click',function(){console['log']('Modal\x20cancel\x20button\x20clicked'),closeQuickEditModal();}):console['warn']('Cancel\x20button\x20not\x20found');const _0x5c6c06=document['getElementById']('quick-edit-points-form');_0x5c6c06?_0x5c6c06['addEventListener']('submit',function(_0x5780e1){console['log']('Quick\x20edit\x20form\x20submitted'),handleQuickEditPoints(_0x5780e1);}):console['error']('Quick\x20edit\x20form\x20not\x20found!'),_0x543d78[_0x85e304(0x392)]('click',function(_0x3d6a5d){const _0x12d2b4=_0x85e304;_0x3d6a5d[_0x12d2b4(0x25c)]===_0x543d78&&(console['log'](_0x12d2b4(0x186)),closeQuickEditModal());});}else console['error']('Quick\x20edit\x20modal\x20not\x20found\x20in\x20DOM!');console[_0x85e304(0x2a6)]('Manage\x20Points\x20section\x20initialized');}async function awardPointsToAllPilots(){const _0x4ddf1c=a2_0x57c234;try{const _0x3f2061=parseInt(prompt('Enter\x20points\x20amount\x20to\x20award\x20to\x20ALL\x20pilots:','10'));if(!_0x3f2061||isNaN(_0x3f2061)){showNotification(_0x4ddf1c(0x212),'error');return;}if(!confirm('This\x20will\x20award\x20'+_0x3f2061+_0x4ddf1c(0x35a)))return;showNotification('Starting\x20points\x20award\x20process...','info');const [_0x377416,_0x289f5f,_0x15afd7]=await Promise[_0x4ddf1c(0x29c)]([getDocs(collection(db,'players')),getDocs(collection(db,'playersD2')),getDocs(collection(db,_0x4ddf1c(0x346)))]);console['log']('Found\x20'+_0x377416[_0x4ddf1c(0x30e)]+'\x20D1\x20pilots,\x20'+_0x289f5f[_0x4ddf1c(0x30e)]+_0x4ddf1c(0x2f3)+_0x15afd7['size']+'\x20D3\x20pilots');const _0x1eb100=_0x377416['size']+_0x289f5f[_0x4ddf1c(0x30e)]+_0x15afd7['size'],_0x1fc566=new Map();_0x377416[_0x4ddf1c(0x30a)](_0x4205d=>{const _0x14bc1d=_0x4ddf1c,_0x1ec721=_0x4205d[_0x14bc1d(0x1af)]();_0x1fc566[_0x14bc1d(0x1f8)](_0x4205d['id'],{'username':_0x1ec721['username'],'ladder':'D1'});}),_0x289f5f[_0x4ddf1c(0x30a)](_0x362718=>{const _0x1cb7a5=_0x362718['data']();_0x1fc566['set'](_0x362718['id'],{'username':_0x1cb7a5['username'],'ladder':'D2'});}),_0x15afd7['forEach'](_0x5481d2=>{const _0x3ac780=_0x4ddf1c,_0x3842ec=_0x5481d2[_0x3ac780(0x1af)]();_0x1fc566['set'](_0x5481d2['id'],{'username':_0x3842ec['username'],'ladder':'D3'});}),console['log'](_0x4ddf1c(0x1b9)+_0x1fc566[_0x4ddf1c(0x30e)]+'\x20unique\x20pilots\x20across\x20all\x20ladders');let _0x3059ae=0x0,_0x214774=0x0,_0x3ac414=0x0;const _0x335e14=Array['from'](_0x1fc566[_0x4ddf1c(0x1ef)]()),_0x521d16=0x190;for(let _0x56451b=0x0;_0x56451b<_0x335e14['length'];_0x56451b+=_0x521d16){const _0x39d8d8=writeBatch(db),_0x51dec5=[],_0x4b12ab=_0x335e14[_0x4ddf1c(0x19b)](_0x56451b,_0x56451b+_0x521d16),_0x378e11=await Promise[_0x4ddf1c(0x29c)](_0x4b12ab['map'](_0x2d70b2=>getDoc(doc(db,'userProfiles',_0x2d70b2))));for(let _0x171797=0x0;_0x171797<_0x4b12ab[_0x4ddf1c(0x1a8)];_0x171797++){try{const _0x141a4d=_0x4b12ab[_0x171797],_0x21da98=_0x1fc566['get'](_0x141a4d),_0x28c185=_0x378e11[_0x171797];if(_0x28c185[_0x4ddf1c(0x1de)]()){const _0x40a128=_0x28c185[_0x4ddf1c(0x1af)](),_0x4b5184=_0x40a128['points']||0x0,_0x2411de=_0x4b5184+_0x3f2061;_0x39d8d8['update'](doc(db,'userProfiles',_0x141a4d),{'points':_0x2411de,'lastPointsModified':serverTimestamp()}),_0x51dec5['push']({'userId':_0x141a4d,'userEmail':_0x40a128['email']||'unknown','displayName':_0x40a128['displayName']||_0x21da98['username']||'Unknown\x20User','action':_0x4ddf1c(0x1c0),'amount':_0x3f2061,'previousPoints':_0x4b5184,'newPoints':_0x2411de,'reason':'Bulk\x20award\x20to\x20all\x20pilots\x20('+_0x21da98['ladder']+')','adminEmail':auth[_0x4ddf1c(0x1c4)][_0x4ddf1c(0x31d)],'timestamp':serverTimestamp()}),_0x214774+=_0x3f2061,_0x3059ae++;}else _0x3ac414++,console['warn']('No\x20user\x20profile\x20found\x20for\x20pilot\x20'+_0x21da98['username']+'\x20('+_0x141a4d+')');}catch(_0x5acb50){_0x3ac414++,console['error']('Error\x20processing\x20pilot\x20'+pilotInfo?.['username']+':',_0x5acb50);}}await _0x39d8d8[_0x4ddf1c(0x26d)]();for(const _0x518279 of _0x51dec5){await addDoc(collection(db,'pointsHistory'),_0x518279);}showNotification('Processed\x20'+_0x3059ae+'/'+_0x1eb100+'\x20pilots...',_0x4ddf1c(0x2d4));}showNotification('Complete!\x20Awarded\x20'+_0x214774+'\x20points\x20to\x20'+_0x3059ae+_0x4ddf1c(0x171)+_0x3ac414,'success'),document['getElementById']('points-overview-table-body')&&loadPointsOverview();}catch(_0x522db2){console[_0x4ddf1c(0x380)]('Error\x20in\x20award\x20points\x20to\x20all\x20pilots:',_0x522db2),showNotification('Error:\x20'+_0x522db2[_0x4ddf1c(0x1b3)],'error');}}function setupManageRibbonsSection(){const _0x5cbd20=a2_0x57c234;console[_0x5cbd20(0x2a6)](_0x5cbd20(0x2d8));const _0x3c3151=document['getElementById'](_0x5cbd20(0x264));_0x3c3151&&_0x3c3151[_0x5cbd20(0x392)](_0x5cbd20(0x1cd),debounce(searchRibbonUser,0x12c));const _0x361312=document['getElementById']('search-ribbon-user-btn');_0x361312&&_0x361312[_0x5cbd20(0x392)]('click',searchRibbonUser);const _0x612449=document[_0x5cbd20(0x37a)]('add-ribbon-form');_0x612449&&_0x612449[_0x5cbd20(0x392)]('submit',addRibbon),_0x3c3151&&_0x3c3151[_0x5cbd20(0x392)](_0x5cbd20(0x2b9),function(_0x2f37d8){const _0x56ac8a=_0x5cbd20;_0x2f37d8['key']==='Enter'&&(_0x2f37d8[_0x56ac8a(0x386)](),searchRibbonUser());}),console[_0x5cbd20(0x2a6)]('Manage\x20Ribbons\x20section\x20initialized');}async function modifyUserPoints(_0x44fcda,_0x11ba97,_0x5567d8,_0x6691c6=''){const _0x27e809=a2_0x57c234,_0x2c349a=doc(db,'userProfiles',_0x44fcda),_0x11afe7=await getDoc(_0x2c349a);if(!_0x11afe7['exists']())throw new Error('User\x20not\x20found');const _0x105f92=_0x11afe7['data'](),_0x5cd4b0=_0x105f92['points']!==undefined?_0x105f92['points']:0x0;_0x105f92['points']===undefined&&(console['log']('Initializing\x20points\x20field\x20for\x20user\x20'+(_0x105f92['displayName']||_0x105f92['email']||'Unknown')),await updateDoc(_0x2c349a,{'points':0x0,'pointsInitializedAt':serverTimestamp()}));let _0x22e1c5=_0x5cd4b0;switch(_0x11ba97){case _0x27e809(0x1c0):_0x22e1c5=_0x5cd4b0+_0x5567d8;break;case _0x27e809(0x185):_0x22e1c5=Math['max'](0x0,_0x5cd4b0-_0x5567d8);break;case'set':_0x22e1c5=_0x5567d8;break;default:throw new Error('Invalid\x20action');}await updateDoc(_0x2c349a,{'points':_0x22e1c5,'lastPointsModified':serverTimestamp()}),await addDoc(collection(db,'pointsHistory'),{'userId':_0x44fcda,'userEmail':_0x105f92['email']||'unknown','displayName':_0x105f92['displayName']||_0x105f92['username']||'Unknown\x20User','action':_0x11ba97,'amount':_0x5567d8,'previousPoints':_0x5cd4b0,'newPoints':_0x22e1c5,'reason':_0x6691c6,'adminEmail':auth['currentUser']['email'],'timestamp':serverTimestamp()});}async function loadPointsOverview(){const _0x308cb9=a2_0x57c234,_0xaadb01=document['getElementById'](_0x308cb9(0x37c));if(!_0xaadb01)return;_0xaadb01[_0x308cb9(0x200)]='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20user\x20points...</td></tr>';try{const _0x4b7406=collection(db,_0x308cb9(0x1d1)),_0x4e9201=await getDocs(_0x4b7406);if(_0x4e9201[_0x308cb9(0x2b1)]){_0xaadb01['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22empty-state\x22>No\x20users\x20found</td></tr>';return;}const _0x53c3d4=[];let _0xc8f36f=0x0;_0x4e9201['forEach'](_0x65d298=>{const _0x4d3d87=_0x308cb9,_0x483371=_0x65d298['data'](),_0x4476e3=_0x483371['points']!==undefined?_0x483371['points']:0x0;_0x483371[_0x4d3d87(0x145)]===undefined&&_0xc8f36f++,_0x53c3d4['push']({'id':_0x65d298['id'],..._0x483371,'points':_0x4476e3});}),_0xc8f36f>0x0&&(console['log']('Found\x20'+_0xc8f36f+'\x20users\x20without\x20points\x20field\x20-\x20they\x20will\x20display\x20as\x200\x20points'),showNotification(_0xc8f36f+'\x20users\x20don\x27t\x20have\x20points\x20field\x20yet.\x20Use\x20the\x20migration\x20button\x20to\x20initialize.','info')),_0x53c3d4[_0x308cb9(0x2ab)]((_0x1ec011,_0x49746f)=>(_0x49746f['points']||0x0)-(_0x1ec011['points']||0x0)),window['allUsersPoints']=_0x53c3d4,renderPointsOverview(_0x53c3d4);}catch(_0x349f9c){console['error'](_0x308cb9(0x16b),_0x349f9c),_0xaadb01['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22error-state\x22>Error\x20loading\x20users:\x20'+_0x349f9c['message']+'</td></tr>';}}async function loadRibbonsData(){const _0x4b86cb=a2_0x57c234,_0x396de5=document['getElementById']('ribbons-overview-table-body');if(!_0x396de5)return;_0x396de5['innerHTML']='<tr><td\x20colspan=\x225\x22\x20class=\x22loading-cell\x22>Loading\x20ribbons\x20data...</td></tr>';try{const [_0xbf7681,_0x1aad2d,_0x10e1b3]=await Promise['all']([getDocs(collection(db,'playerRibbons')),getDocs(collection(db,_0x4b86cb(0x2d3))),getDocs(collection(db,'playerRibbonsD3'))]);_0x396de5['innerHTML']='';const _0x57f368=(_0x5628e5,_0x5af5fd)=>{const _0x18428f=_0x4b86cb;_0x5628e5[_0x18428f(0x30a)](_0x393a3a=>{const _0x287769=_0x18428f,_0x3e9c59=_0x393a3a[_0x287769(0x1af)](),_0x18dd3b=_0x3e9c59['ribbons']||{},_0x494961=Object[_0x287769(0x1ef)](_0x18dd3b)['length'],_0x585d71=document['createElement']('tr');_0x585d71['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x3e9c59[_0x287769(0x320)]||_0x287769(0x1c2))+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td><span\x20class=\x22ladder-badge\x20'+_0x5af5fd[_0x287769(0x1ee)]()+'\x22>'+_0x5af5fd+'</span></td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x494961+_0x287769(0x155)+(_0x3e9c59['lastUpdated']?new Date(_0x3e9c59['lastUpdated']['seconds']*0x3e8)['toLocaleDateString']():'Unknown')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20edit-ribbons-btn\x22\x20data-username=\x22'+_0x3e9c59['username']+'\x22\x20data-ladder=\x22'+_0x5af5fd+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Edit\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x396de5['appendChild'](_0x585d71);});};_0x57f368(_0xbf7681,'D1'),_0x57f368(_0x1aad2d,'D2'),_0x57f368(_0x10e1b3,'D3'),document['querySelectorAll'](_0x4b86cb(0x23e))[_0x4b86cb(0x30a)](_0x2e85b8=>{const _0x1211fb=_0x4b86cb;_0x2e85b8[_0x1211fb(0x392)](_0x1211fb(0x1dd),function(){const _0x32129b=_0x1211fb,_0x3aaad0=this['dataset']['username'],_0x31ce96=this[_0x32129b(0x393)]['ladder'];editUserRibbons(_0x3aaad0,_0x31ce96);});}),showNotification(_0x4b86cb(0x367),'success');}catch(_0x18b9ab){console['error']('Error\x20loading\x20ribbons:',_0x18b9ab),_0x396de5['innerHTML']=_0x4b86cb(0x161),showNotification('Error\x20loading\x20ribbons\x20data','error');}}async function searchRibbonUser(){const _0x247399=a2_0x57c234,_0x2edb70=document[_0x247399(0x37a)]('ribbon-user-search')['value'][_0x247399(0x14f)]();if(!_0x2edb70){showNotification('Please\x20enter\x20a\x20username',_0x247399(0x380));return;}try{const [_0x198e50,_0x149fa2,_0x37137f]=await Promise['all']([getDoc(doc(db,_0x247399(0x175),_0x2edb70)),getDoc(doc(db,'playerRibbonsD2',_0x2edb70)),getDoc(doc(db,_0x247399(0x1bb),_0x2edb70))]);let _0x2586f6=null,_0x3b0e77=null;if(_0x198e50['exists']())_0x2586f6='D1',_0x3b0e77=_0x198e50['data']();else{if(_0x149fa2['exists']())_0x2586f6='D2',_0x3b0e77=_0x149fa2[_0x247399(0x1af)]();else _0x37137f['exists']()&&(_0x2586f6='D3',_0x3b0e77=_0x37137f['data']());}_0x2586f6?(document['getElementById']('current-ribbon-user')['textContent']=_0x2edb70,document['getElementById'](_0x247399(0x2c1))[_0x247399(0x296)]=_0x2edb70,document[_0x247399(0x37a)]('ribbon-target-ladder')['value']=_0x2586f6,document[_0x247399(0x37a)](_0x247399(0x1b0))['style'][_0x247399(0x2ea)]='block',displayCurrentRibbons(_0x3b0e77['ribbons']||{}),showNotification('Found\x20'+_0x2edb70+'\x20in\x20'+_0x2586f6+_0x247399(0x277),'success')):showNotification('User\x20'+_0x2edb70+_0x247399(0x339),'error');}catch(_0x32c19d){console['error']('Error\x20searching\x20user:',_0x32c19d),showNotification(_0x247399(0x36d),'error');}}function displayCurrentRibbons(_0x2500bb){const _0x2c8b13=a2_0x57c234,_0x2d120d=document['getElementById'](_0x2c8b13(0x179));if(!_0x2d120d)return;_0x2d120d['innerHTML']='';if(Object['keys'](_0x2500bb)[_0x2c8b13(0x1a8)]===0x0){_0x2d120d['innerHTML']=_0x2c8b13(0x298);return;}Object['entries'](_0x2500bb)[_0x2c8b13(0x30a)](([_0x4f6632,_0x2c3f14])=>{const _0x16455e=_0x2c8b13,_0x4f082b=document[_0x16455e(0x1d7)](_0x16455e(0x206));_0x4f082b['className']='ribbon-item',_0x4f082b['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+_0x4f6632+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Level:\x20'+(_0x2c3f14['level']||0x1)+_0x16455e(0x28b)+(_0x2c3f14[_0x16455e(0x34b)]?new Date(_0x2c3f14['awardedAt']['seconds']*0x3e8)[_0x16455e(0x1dc)]():'Unknown')+'</small>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-danger\x20btn-sm\x20remove-ribbon-btn\x22\x20data-ribbon=\x22'+_0x4f6632+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Remove\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x2d120d['appendChild'](_0x4f082b);}),document['querySelectorAll'](_0x2c8b13(0x32f))['forEach'](_0x4f7d1e=>{_0x4f7d1e['addEventListener']('click',function(){const _0x4fdc41=this['dataset']['ribbon'];removeRibbon(_0x4fdc41);});});}async function addRibbon(_0x1b612a){const _0x2cf225=a2_0x57c234;_0x1b612a['preventDefault']();const _0x38582b=document['getElementById'](_0x2cf225(0x2c1))['value'],_0x1910d8=document['getElementById'](_0x2cf225(0x172))['value'],_0x15f05a=document[_0x2cf225(0x37a)]('ribbon-type-select')['value'],_0x2d8e30=parseInt(document['getElementById']('ribbon-level')[_0x2cf225(0x296)]);if(!_0x38582b||!_0x1910d8||!_0x15f05a||!_0x2d8e30){showNotification('Please\x20fill\x20all\x20fields','error');return;}try{const _0x3646d0='playerRibbons'+(_0x1910d8==='D1'?'':_0x1910d8),_0x461e7b=doc(db,_0x3646d0,_0x38582b),_0x554550=await getDoc(_0x461e7b),_0x39cd29=_0x554550[_0x2cf225(0x1de)]()?_0x554550['data']()[_0x2cf225(0x305)]||{}:{};_0x39cd29[_0x15f05a]={'level':_0x2d8e30,'awardedAt':serverTimestamp()},await setDoc(_0x461e7b,{'username':_0x38582b,'ladder':_0x1910d8,'ribbons':_0x39cd29,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Added\x20'+_0x15f05a+_0x2cf225(0x2e3)+_0x2d8e30+_0x2cf225(0x266)+_0x38582b,'success'),displayCurrentRibbons(_0x39cd29),document['getElementById'](_0x2cf225(0x315))['value']='',document['getElementById']('ribbon-level')['value']='1';}catch(_0x877702){console['error']('Error\x20adding\x20ribbon:',_0x877702),showNotification('Error\x20adding\x20ribbon','error');}}async function removeRibbon(_0x148858){const _0x4f3e4c=a2_0x57c234,_0x491582=document[_0x4f3e4c(0x37a)](_0x4f3e4c(0x2c1))['value'],_0x3e0702=document['getElementById']('ribbon-target-ladder')['value'];if(!confirm('Remove\x20'+_0x148858+'\x20from\x20'+_0x491582+'?'))return;try{const _0x18aa3a='playerRibbons'+(_0x3e0702==='D1'?'':_0x3e0702),_0x379a04=doc(db,_0x18aa3a,_0x491582),_0x281508=await getDoc(_0x379a04),_0x34e1c4=_0x281508[_0x4f3e4c(0x1de)]()?_0x281508['data']()[_0x4f3e4c(0x305)]||{}:{};delete _0x34e1c4[_0x148858],await setDoc(_0x379a04,{'username':_0x491582,'ladder':_0x3e0702,'ribbons':_0x34e1c4,'lastUpdated':serverTimestamp()},{'merge':!![]}),showNotification('Removed\x20'+_0x148858+_0x4f3e4c(0x1f1)+_0x491582,'success'),displayCurrentRibbons(_0x34e1c4);}catch(_0x7420d6){console[_0x4f3e4c(0x380)](_0x4f3e4c(0x165),_0x7420d6),showNotification('Error\x20removing\x20ribbon','error');}}function editUserRibbons(_0x4f4501,_0x5164cf){const _0x160d18=a2_0x57c234;document['getElementById']('ribbon-user-search')[_0x160d18(0x296)]=_0x4f4501,searchRibbonUser();}