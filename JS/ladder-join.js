const a25_0x45404e=a25_0x5de2,a25_0x107ed3=(function(){let _0x280e8f=!![];return function(_0x3bd3e2,_0x3d4bc8){const _0x5d3cfb=_0x280e8f?function(){if(_0x3d4bc8){const _0x241a37=_0x3d4bc8['apply'](_0x3bd3e2,arguments);return _0x3d4bc8=null,_0x241a37;}}:function(){};return _0x280e8f=![],_0x5d3cfb;};}()),a25_0x521a04=a25_0x107ed3(this,function(){const _0x19020d=a25_0x5de2;let _0x252d89;try{const _0x27912a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x252d89=_0x27912a();}catch(_0x2ca8c7){_0x252d89=window;}const _0x57a36a=_0x252d89['console']=_0x252d89['console']||{},_0x26a81c=[_0x19020d(0x192),_0x19020d(0x177),'info',_0x19020d(0x181),'exception','table','trace'];for(let _0x22646d=0x0;_0x22646d<_0x26a81c['length'];_0x22646d++){const _0x584283=a25_0x107ed3['constructor']['prototype'][_0x19020d(0x18f)](a25_0x107ed3),_0x4d556d=_0x26a81c[_0x22646d],_0x3d1252=_0x57a36a[_0x4d556d]||_0x584283;_0x584283['__proto__']=a25_0x107ed3['bind'](a25_0x107ed3),_0x584283['toString']=_0x3d1252['toString'][_0x19020d(0x18f)](_0x3d1252),_0x57a36a[_0x4d556d]=_0x584283;}});a25_0x521a04();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a25_0x5de2(_0x428738,_0x1ddae1){const _0x521a04=a25_0x1a27();return a25_0x5de2=function(_0x107ed3,_0x95b5bf){_0x107ed3=_0x107ed3-0x173;let _0x1a27d2=_0x521a04[_0x107ed3];return _0x1a27d2;},a25_0x5de2(_0x428738,_0x1ddae1);}import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a25_0x1a27(){const _0x150267=['onclick','ladder-join-status\x20error','nonParticipants','playersD2','warn','target','input[name=\x22ladder\x22]','playersD3','Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.','Verifying\x20username...','Joining\x20','style','ladder-join-status\x20success','d2-switch','error','Error\x20joining\x20ladder:','exists','CTF','textContent','data','\x20ladder...','uid','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','none','DOMContentLoaded','Error\x20checking\x20ladder\x20status:','Successfully\x20joined\x20the\x20','players','bind','value','You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.','log','currentUser','Checking\x20user\x20status\x20for\x20ladder:','trim','display','checked','username','className','DUOS','position','getElementById','toLowerCase','disabled'];a25_0x1a27=function(){return _0x150267;};return a25_0x1a27();}import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener'](a25_0x45404e(0x18b),()=>{const _0x3c07ce=a25_0x45404e,_0x5ec023=document[_0x3c07ce(0x19c)]('d1-switch'),_0x14557b=document['getElementById'](_0x3c07ce(0x180));console[_0x3c07ce(0x192)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x5ec023),console[_0x3c07ce(0x192)]('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x14557b);function _0x46f9e7(){const _0x4a1c26=_0x3c07ce;document['querySelectorAll'](_0x4a1c26(0x179))['forEach'](_0x295ab9=>{_0x295ab9['addEventListener']('change',_0x3ffd1a=>{const _0x556648=a25_0x5de2;_0x3ffd1a['target'][_0x556648(0x197)]&&(currentLadder=_0x3ffd1a[_0x556648(0x178)][_0x556648(0x190)],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x46f9e7();const _0x408432=document['getElementById']('join-ladder-button');_0x408432&&_0x408432['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x50fe77=>{const _0x5041e1=_0x3c07ce;if(_0x50fe77)checkUserLadderStatus();else{const _0x1f10c9=document[_0x5041e1(0x19c)]('ladder-join-prompt');_0x1f10c9&&(_0x1f10c9[_0x5041e1(0x17e)][_0x5041e1(0x196)]='none');}});});function getCollectionName(_0x13ece4){const _0x302427=a25_0x45404e;switch(_0x13ece4?.['toUpperCase']()){case'D1':return'players';case'D2':return _0x302427(0x176);case'D3':return _0x302427(0x17a);case'DUOS':case'DUO':return'playersDuos';case _0x302427(0x184):return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x13ece4+',\x20defaulting\x20to\x20D1');return _0x302427(0x18e);}}async function checkUserLadderStatus(){const _0x8e7117=a25_0x45404e;console['log'](_0x8e7117(0x194),currentLadder);const _0x375afc=auth['currentUser'],_0x3dbfd1=document['getElementById']('ladder-join-prompt'),_0x3ae523=document['getElementById']('join-ladder-type'),_0x4ca772=document['getElementById']('tiny-join-button');if(!_0x375afc||!_0x375afc['uid']||!_0x3dbfd1||!_0x3ae523||!_0x4ca772){if(_0x3dbfd1)_0x3dbfd1['style']['display']=_0x8e7117(0x18a);if(_0x4ca772)_0x4ca772['style']['display']='none';return;}try{try{await _0x375afc['getIdToken'](![]);}catch(_0x4a354a){console[_0x8e7117(0x181)]('Authentication\x20verification\x20failed:',_0x4a354a),_0x3dbfd1['style']['display']='none',_0x4ca772['style']['display']='none';return;}const _0x4cbb41=getCollectionName(currentLadder),_0x13732c=doc(db,_0x4cbb41,_0x375afc['uid']),_0x31cfcd=await getDoc(_0x13732c);if(_0x31cfcd[_0x8e7117(0x183)]())_0x3dbfd1['style']['display']=_0x8e7117(0x18a),_0x4ca772['style']['display']='none';else{_0x3dbfd1[_0x8e7117(0x17e)]['display']='none',_0x4ca772['style']['display']='block',_0x3ae523['textContent']=currentLadder,_0x4ca772[_0x8e7117(0x173)]=()=>{const _0x3ee2c8=_0x8e7117;_0x3dbfd1['style']['display']==='block'?_0x3dbfd1[_0x3ee2c8(0x17e)][_0x3ee2c8(0x196)]=_0x3ee2c8(0x18a):_0x3dbfd1['style']['display']='block';};const _0x19ace3=document[_0x8e7117(0x19c)]('join-username-input'),_0xaaf02c=document['getElementById']('ladder-join-status');if(_0x19ace3)_0x19ace3['value']='';_0xaaf02c&&(_0xaaf02c['textContent']='',_0xaaf02c['className']='ladder-join-status');}}catch(_0x55b01f){console['error'](_0x8e7117(0x18c),_0x55b01f),_0x3dbfd1['style']['display']='none',_0x4ca772['style'][_0x8e7117(0x196)]='none';}}async function handleJoinLadder(){const _0x633c9b=a25_0x45404e,_0x229def=auth[_0x633c9b(0x193)],_0x1efe75=document['getElementById']('join-ladder-button'),_0x13c767=document['getElementById']('ladder-join-status'),_0x3183b8=document['getElementById']('join-username-input');if(!_0x229def||!_0x229def['uid']){_0x13c767['textContent']=_0x633c9b(0x191),_0x13c767['className']='ladder-join-status\x20error';return;}try{await _0x229def['getIdToken'](!![]);}catch(_0x87d914){console['error']('Authentication\x20error:',_0x87d914),_0x13c767['textContent']=_0x633c9b(0x189),_0x13c767['className']='ladder-join-status\x20error';return;}if(!_0x3183b8||!_0x3183b8[_0x633c9b(0x190)][_0x633c9b(0x195)]()){_0x13c767[_0x633c9b(0x185)]='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x13c767['className']='ladder-join-status\x20error';return;}try{_0x1efe75['disabled']=!![],_0x13c767['textContent']=_0x633c9b(0x17c),_0x13c767['className']='ladder-join-status\x20loading';let _0x348fa5='',_0x4d0831=null;const _0x339731=['players','playersD2','playersD3','playersDuos','playersCTF',_0x633c9b(0x175)];for(const _0x54d29e of _0x339731){try{const _0x50648a=doc(db,_0x54d29e,_0x229def[_0x633c9b(0x188)]),_0x54ffa7=await getDoc(_0x50648a);if(_0x54ffa7[_0x633c9b(0x183)]()){_0x4d0831=_0x54ffa7['data']();if(_0x4d0831['username']){_0x348fa5=_0x4d0831[_0x633c9b(0x198)];break;}}}catch(_0x2afeb2){console['error']('Error\x20checking\x20'+_0x54d29e+':',_0x2afeb2);}}!_0x348fa5&&_0x229def['email']&&(_0x348fa5=_0x229def['email']['split']('@')[0x0]);if(!_0x348fa5){_0x13c767['textContent']=_0x633c9b(0x17b),_0x13c767[_0x633c9b(0x199)]='ladder-join-status\x20error',_0x1efe75[_0x633c9b(0x19e)]=![];return;}const _0xb63b31=_0x3183b8['value']['trim']();if(_0x348fa5&&_0xb63b31[_0x633c9b(0x19d)]()!==_0x348fa5[_0x633c9b(0x19d)]()){_0x13c767['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x348fa5+'\x22\x20to\x20confirm.',_0x13c767['className']='ladder-join-status\x20error',_0x1efe75[_0x633c9b(0x19e)]=![];return;}_0x13c767['textContent']=_0x633c9b(0x17d)+currentLadder+_0x633c9b(0x187);const _0x1342e1=getCollectionName(currentLadder),_0x977cf5=doc(db,_0x1342e1,_0x229def['uid']),_0x5b2fe0=await getDoc(_0x977cf5);if(_0x5b2fe0['exists']()){_0x13c767[_0x633c9b(0x185)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+'\x20ladder.',_0x13c767['className']=_0x633c9b(0x174),_0x1efe75['disabled']=![];return;}try{await _0x229def['getIdToken'](!![]);}catch(_0x48a0a5){_0x13c767['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x13c767['className']=_0x633c9b(0x174),_0x1efe75['disabled']=![];return;}const _0x1faf6a=_0x348fa5,_0x23248e=collection(db,_0x1342e1),_0x2100a6=query(_0x23248e,orderBy(_0x633c9b(0x19b),'desc'),limit(0x1)),_0x34418e=await getDocs(_0x2100a6);let _0x1c1b8f=0x1;if(!_0x34418e['empty']){const _0x35ee3e=_0x34418e['docs'][0x0][_0x633c9b(0x186)]();_0x1c1b8f=(_0x35ee3e['position']||0x0)+0x1;}const _0xab510f={'username':_0x1faf6a,'email':_0x229def['email'],'eloRating':0x4b0,'position':_0x1c1b8f,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===_0x633c9b(0x19a)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x977cf5,_0xab510f),currentLadder===_0x633c9b(0x19a)?_0x13c767['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x13c767['textContent']=_0x633c9b(0x18d)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x13c767['className']=_0x633c9b(0x17f),setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0xfaf00c){console['error'](_0x633c9b(0x182),_0xfaf00c),_0x13c767[_0x633c9b(0x185)]='Error\x20joining\x20ladder:\x20'+_0xfaf00c['message'],_0x13c767[_0x633c9b(0x199)]='ladder-join-status\x20error',_0x1efe75['disabled']=![];}}