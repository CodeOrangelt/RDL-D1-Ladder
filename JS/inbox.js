const a24_0x29cdc6=a24_0x5e14,a24_0x4ad54a=(function(){let _0xa7d6d2=!![];return function(_0x75aeda,_0x1635d8){const _0xa030=_0xa7d6d2?function(){if(_0x1635d8){const _0x258a09=_0x1635d8['apply'](_0x75aeda,arguments);return _0x1635d8=null,_0x258a09;}}:function(){};return _0xa7d6d2=![],_0xa030;};}()),a24_0x106b00=a24_0x4ad54a(this,function(){const _0x5b4983=a24_0x5e14;let _0x3ba43f;try{const _0x3db111=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3ba43f=_0x3db111();}catch(_0x297e69){_0x3ba43f=window;}const _0x1d134c=_0x3ba43f['console']=_0x3ba43f['console']||{},_0x51552f=['log','warn','info','error',_0x5b4983(0x9d),_0x5b4983(0xa2),_0x5b4983(0xc1)];for(let _0x57e4bf=0x0;_0x57e4bf<_0x51552f[_0x5b4983(0x7d)];_0x57e4bf++){const _0x2b9f7c=a24_0x4ad54a['constructor']['prototype']['bind'](a24_0x4ad54a),_0x57c77d=_0x51552f[_0x57e4bf],_0x5ce3b6=_0x1d134c[_0x57c77d]||_0x2b9f7c;_0x2b9f7c[_0x5b4983(0x9f)]=a24_0x4ad54a[_0x5b4983(0x80)](a24_0x4ad54a),_0x2b9f7c['toString']=_0x5ce3b6['toString']['bind'](_0x5ce3b6),_0x1d134c[_0x57c77d]=_0x2b9f7c;}});function a24_0x5e14(_0x5c6a72,_0x3d1dae){const _0x106b00=a24_0x4c9b();return a24_0x5e14=function(_0x4ad54a,_0x147bb2){_0x4ad54a=_0x4ad54a-0x79;let _0x4c9b70=_0x106b00[_0x4ad54a];return _0x4c9b70;},a24_0x5e14(_0x5c6a72,_0x3d1dae);}function a24_0x4c9b(){const _0xc729db=['error','.modal-close','sort','addEventListener','length','DOMContentLoaded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','bind','active','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','loadInvitations','floor','toUsername','click','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20','unsubscribe','type','invitations','sent-invitation','renderInvitations','sent','dataset','map','status','d\x20ago','appendChild','disabled','To:\x20','classList','createTeamFromInvitation','getTimeAgo','setupActionListeners','createdAt','h\x20ago','exception','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','__proto__','fromUserId','team_invite','table','sentUnsubscribe','#cancel-response','toDate','value','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','proposedTeamName','#send-response','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>','gameInvitations','Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.','join','getElementById','teamData','decline','Just\x20now','updateInvitationStatus','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','remove','style','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','inline-block','inbox-notification','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','currentFilter','desc','querySelector','teamColor','trace','docs','createInvitationCard'];a24_0x4c9b=function(){return _0xc729db;};return a24_0x4c9b();}a24_0x106b00();import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class InboxManager{constructor(){const _0x3a7a4d=a24_0x5e14;this[_0x3a7a4d(0xbd)]='pending',this['invitations']=[],this['sentInvitations']=[],this[_0x3a7a4d(0x8a)]=null,this['sentUnsubscribe']=null,this['pageSize']=0x14,this['lastDoc']=null,this['hasMore']=!![],this['init']();}async['init'](){auth['onAuthStateChanged'](_0x400046=>{const _0xc0806b=a24_0x5e14;_0x400046?(this[_0xc0806b(0x85)](_0x400046['uid']),this['setupEventListeners']()):window['location']['href']='./login.html';});}['setupEventListeners'](){document['querySelectorAll']('.filter-btn')['forEach'](_0x5a466f=>{const _0x4360e8=a24_0x5e14;_0x5a466f[_0x4360e8(0x7c)]('click',()=>{const _0x4a034e=_0x4360e8;document['querySelectorAll']('.filter-btn')['forEach'](_0x502cd1=>_0x502cd1['classList'][_0x4a034e(0xb6)]('active')),_0x5a466f[_0x4a034e(0x97)]['add'](_0x4a034e(0x81)),this['currentFilter']=_0x5a466f['dataset']['filter'],this[_0x4a034e(0x8e)]();});});}['loadInvitations'](_0x6c31cc){const _0x314519=a24_0x5e14,_0x2693bc=collection(db,_0x314519(0xac));let _0x140027=query(_0x2693bc,where('toUserId','==',_0x6c31cc),orderBy('createdAt',_0x314519(0xbe)),limit(this['pageSize']));this['unsubscribe']=onSnapshot(_0x140027,_0x89d305=>{const _0x26d970=_0x314519;this['invitations']=_0x89d305[_0x26d970(0xc2)]['map'](_0x1f232f=>({'id':_0x1f232f['id'],..._0x1f232f['data']()})),this['renderInvitations'](),this['updateNotificationCount']();});let _0x252a8f=query(_0x2693bc,where(_0x314519(0xa0),'==',_0x6c31cc),orderBy(_0x314519(0x9b),'desc'),limit(this['pageSize']));this[_0x314519(0xa3)]=onSnapshot(_0x252a8f,_0x584ebd=>{const _0x135a14=_0x314519;this['sentInvitations']=_0x584ebd[_0x135a14(0xc2)]['map'](_0x2f775b=>({'id':_0x2f775b['id'],..._0x2f775b['data'](),'isSent':!![]})),this['renderInvitations']();});}[a24_0x29cdc6(0x8e)](){const _0x20ccbb=a24_0x29cdc6,_0x201a52=document['getElementById']('inbox-content');if(!_0x201a52)return;let _0x34d8bd=[];if(this['currentFilter']==='outbox')_0x34d8bd=this['sentInvitations'];else this['currentFilter']==='all'?_0x34d8bd=[...this[_0x20ccbb(0x8c)],...this['sentInvitations']][_0x20ccbb(0x7b)]((_0xe0a450,_0x52fda1)=>{const _0x1eabf8=_0x20ccbb,_0x3f0a10=_0xe0a450[_0x1eabf8(0x9b)]?.[_0x1eabf8(0xa5)]?_0xe0a450['createdAt'][_0x1eabf8(0xa5)]():new Date(_0xe0a450['createdAt']),_0x31f66e=_0x52fda1['createdAt']?.['toDate']?_0x52fda1['createdAt']['toDate']():new Date(_0x52fda1['createdAt']);return _0x31f66e-_0x3f0a10;}):_0x34d8bd=this['invitations']['filter'](_0x40a450=>_0x40a450['status']===this['currentFilter']);if(_0x34d8bd[_0x20ccbb(0x7d)]===0x0){const _0x598585=this['currentFilter']==='outbox'?_0x20ccbb(0x8f):this['currentFilter']==='all'?'':this['currentFilter'];_0x201a52['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20'+_0x598585+_0x20ccbb(0xb5)+(this[_0x20ccbb(0xbd)]==='outbox'?_0x20ccbb(0xad):'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+_0x20ccbb(0xb8);return;}_0x201a52['innerHTML']=_0x34d8bd[_0x20ccbb(0x91)](_0x2c82c7=>this[_0x20ccbb(0xc3)](_0x2c82c7))[_0x20ccbb(0xae)](''),this[_0x20ccbb(0x9a)]();}[a24_0x29cdc6(0xc3)](_0x544e36){const _0x305798=a24_0x29cdc6,_0x676161=_0x544e36[_0x305798(0x9b)]?.[_0x305798(0xa5)]?_0x544e36['createdAt']['toDate']():new Date(_0x544e36['createdAt']),_0x4c7296=this[_0x305798(0x99)](_0x676161),_0x3e01d0=_0x544e36['isSent']||![];let _0x18ec6c='';return _0x544e36[_0x305798(0x8b)]===_0x305798(0xa1)?_0x18ec6c='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x544e36['message']+_0x305798(0x82)+_0x544e36['teamData']['teamColor']+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x544e36['teamData'][_0x305798(0xa9)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20•\x20Color:\x20'+_0x544e36[_0x305798(0xb0)]['teamColor']+_0x305798(0x9e):_0x18ec6c=_0x305798(0x84)+_0x544e36['message']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x305798(0x89)+_0x544e36[_0x305798(0x92)]+'\x20'+(_0x3e01d0?_0x305798(0x8d):'')+'\x22\x20data-invitation-id=\x22'+_0x544e36['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3e01d0?_0x305798(0x96)+_0x544e36[_0x305798(0x87)]:_0x544e36['fromUsername'])+_0x305798(0xa8)+(_0x3e01d0?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x4c7296+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x544e36['status']+'\x22>'+_0x544e36['status']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x18ec6c+_0x305798(0xbb)+(!_0x3e01d0&&_0x544e36[_0x305798(0x92)]==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x544e36['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x544e36['id']+_0x305798(0xa7)+(_0x544e36['type']!==_0x305798(0xa1)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22'+_0x544e36['id']+_0x305798(0xb4):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+_0x305798(0xbb)+(_0x3e01d0&&_0x544e36[_0x305798(0x92)]==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x544e36['id']+_0x305798(0x83):'')+_0x305798(0xbc);}['setupActionListeners'](){document['querySelectorAll']('.action-btn')['forEach'](_0x16ed2f=>{const _0x57e5f2=a24_0x5e14;_0x16ed2f[_0x57e5f2(0x7c)](_0x57e5f2(0x88),async _0x4a4d87=>{const _0x26b87a=_0x57e5f2,_0x31c8bd=_0x16ed2f[_0x26b87a(0x90)]['action'],_0x168e3b=_0x16ed2f['dataset']['invitationId'];_0x16ed2f['disabled']=!![];const _0x2df449=_0x16ed2f['innerHTML'];_0x16ed2f['innerHTML']=_0x26b87a(0xab);try{switch(_0x31c8bd){case'accept':await this[_0x26b87a(0xb3)](_0x168e3b,'accepted');break;case _0x26b87a(0xb1):await this['updateInvitationStatus'](_0x168e3b,'declined');break;case'cancel':await this['updateInvitationStatus'](_0x168e3b,'cancelled');break;case'respond':this['openResponseModal'](_0x168e3b);break;}}catch(_0x3d65b0){console[_0x26b87a(0x79)]('Error\x20performing\x20'+_0x31c8bd+':',_0x3d65b0),alert('Failed\x20to\x20'+_0x31c8bd+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x16ed2f[_0x26b87a(0x95)]=![],_0x16ed2f['innerHTML']=_0x2df449;}});});}async[a24_0x29cdc6(0xb3)](_0x40f0dd,_0x33d4a7){const _0x987f56=a24_0x29cdc6;try{const _0x5a846a=this['invitations']['find'](_0xc7c7a5=>_0xc7c7a5['id']===_0x40f0dd);_0x5a846a&&_0x5a846a['type']==='team_invite'&&_0x33d4a7==='accepted'&&await this[_0x987f56(0x98)](_0x5a846a);const _0x5fe861=doc(db,'gameInvitations',_0x40f0dd);await updateDoc(_0x5fe861,{'status':_0x33d4a7,'respondedAt':new Date()}),_0x5a846a&&(_0x5a846a['status']=_0x33d4a7,_0x5a846a['respondedAt']=new Date(),this['renderInvitations']());}catch(_0xee1885){console['error']('Error\x20updating\x20invitation\x20status:',_0xee1885);throw _0xee1885;}}['openResponseModal'](_0x35e64f){const _0x2d43e9=a24_0x29cdc6,_0x39711e=this['invitations']['find'](_0x3eb4a0=>_0x3eb4a0['id']===_0x35e64f);if(!_0x39711e)return;const _0x11c1cb=document['createElement']('div');_0x11c1cb['className']='modal-overlay',_0x11c1cb['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x39711e['fromUsername']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>'+_0x39711e['value']+'</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(!document['getElementById']('modal-styles')){const _0x3e456a=document['createElement']('style');_0x3e456a['id']='modal-styles',_0x3e456a['textContent']=_0x2d43e9(0x7f),document['head']['appendChild'](_0x3e456a);}document['body'][_0x2d43e9(0x94)](_0x11c1cb),_0x11c1cb[_0x2d43e9(0xbf)](_0x2d43e9(0x7a))['addEventListener'](_0x2d43e9(0x88),()=>_0x11c1cb[_0x2d43e9(0xb6)]()),_0x11c1cb['querySelector'](_0x2d43e9(0xa4))[_0x2d43e9(0x7c)]('click',()=>_0x11c1cb['remove']()),_0x11c1cb[_0x2d43e9(0x7c)]('click',_0x4a96f3=>{const _0x1f659b=_0x2d43e9;if(_0x4a96f3['target']===_0x11c1cb)_0x11c1cb[_0x1f659b(0xb6)]();}),_0x11c1cb['querySelector'](_0x2d43e9(0xaa))[_0x2d43e9(0x7c)](_0x2d43e9(0x88),()=>{const _0x5b9723=_0x2d43e9,_0x1264fb=document[_0x5b9723(0xaf)]('response-message')[_0x5b9723(0xa6)]['trim']();_0x1264fb&&(alert('Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)'),_0x11c1cb['remove']());});}async['createTeamFromInvitation'](_0x492599){const _0x29ef0a=a24_0x29cdc6;try{const {createTeam:_0x72adde}=await import('./ladderduos.js'),_0x5d706b=await _0x72adde(_0x492599['fromUsername'],_0x492599['toUsername'],_0x492599['teamData']['proposedTeamName'],_0x492599['teamData'][_0x29ef0a(0xc0)]);if(!_0x5d706b['success'])throw new Error(_0x5d706b['error']);alert('Team\x20\x22'+_0x492599['teamData']['proposedTeamName']+'\x22\x20created\x20successfully!');}catch(_0x1a981d){console['error']('Error\x20creating\x20team:',_0x1a981d);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x1a981d['message']);}}['updateNotificationCount'](){const _0x30c527=a24_0x29cdc6,_0xf8b9bc=this['invitations']['filter'](_0x4ec5d9=>_0x4ec5d9[_0x30c527(0x92)]==='pending')['length'],_0x2e0986=document[_0x30c527(0xaf)](_0x30c527(0xba));_0x2e0986&&(_0xf8b9bc>0x0?(_0x2e0986['style']['display']=_0x30c527(0xb9),_0x2e0986['textContent']=_0xf8b9bc>0x9?'9+':_0xf8b9bc):_0x2e0986[_0x30c527(0xb7)]['display']='none');}['getTimeAgo'](_0xda1cf5){const _0x28bb53=a24_0x29cdc6,_0x45ea44=new Date(),_0x1253d5=_0x45ea44-_0xda1cf5,_0x6ec046=Math['floor'](_0x1253d5/(0x3e8*0x3c)),_0x1b619a=Math['floor'](_0x1253d5/(0x3e8*0x3c*0x3c)),_0x30413e=Math[_0x28bb53(0x86)](_0x1253d5/(0x3e8*0x3c*0x3c*0x18));if(_0x6ec046<0x1)return _0x28bb53(0xb2);if(_0x6ec046<0x3c)return _0x6ec046+'m\x20ago';if(_0x1b619a<0x18)return _0x1b619a+_0x28bb53(0x9c);if(_0x30413e<0x7)return _0x30413e+_0x28bb53(0x93);return _0xda1cf5['toLocaleDateString']();}['destroy'](){const _0x464e57=a24_0x29cdc6;this[_0x464e57(0x8a)]&&this['unsubscribe'](),this[_0x464e57(0xa3)]&&this[_0x464e57(0xa3)]();}}document[a24_0x29cdc6(0x7c)](a24_0x29cdc6(0x7e),()=>{new InboxManager();});