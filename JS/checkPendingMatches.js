function a10_0x2de8(){const _0x3309f9=['setItem','pendingMatches','top','border','-5px','addEventListener','info','email','users','error','userId','zIndex','toString','2px\x20solid\x20white','height','approved','999','Error\x20fetching\x20username:','#ff3b30','username','length','getElementById','bind','empty','prototype','uid','style','absolute','width','currentUsername','report-match-notification','all','currentUser','now'];a10_0x2de8=function(){return _0x3309f9;};return a10_0x2de8();}const a10_0x492b46=a10_0x20d8,a10_0x21dbe3=(function(){let _0x37eb82=!![];return function(_0x23d66f,_0xe23fd5){const _0x300993=_0x37eb82?function(){if(_0xe23fd5){const _0x3325e5=_0xe23fd5['apply'](_0x23d66f,arguments);return _0xe23fd5=null,_0x3325e5;}}:function(){};return _0x37eb82=![],_0x300993;};}()),a10_0x3d2fb9=a10_0x21dbe3(this,function(){const _0xd27f37=a10_0x20d8;let _0x6be11e;try{const _0x968166=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x6be11e=_0x968166();}catch(_0xdf74ec){_0x6be11e=window;}const _0x92a6d6=_0x6be11e['console']=_0x6be11e['console']||{},_0x57fcb8=['log','warn',_0xd27f37(0x155),_0xd27f37(0x158),'exception','table','trace'];for(let _0x1b41e3=0x0;_0x1b41e3<_0x57fcb8[_0xd27f37(0x163)];_0x1b41e3++){const _0x18ffc7=a10_0x21dbe3['constructor'][_0xd27f37(0x167)][_0xd27f37(0x165)](a10_0x21dbe3),_0x22ca61=_0x57fcb8[_0x1b41e3],_0x96f1d7=_0x92a6d6[_0x22ca61]||_0x18ffc7;_0x18ffc7['__proto__']=a10_0x21dbe3['bind'](a10_0x21dbe3),_0x18ffc7[_0xd27f37(0x15b)]=_0x96f1d7[_0xd27f37(0x15b)]['bind'](_0x96f1d7),_0x92a6d6[_0x22ca61]=_0x18ffc7;}});function a10_0x20d8(_0x2efae7,_0x206efb){const _0x3d2fb9=a10_0x2de8();return a10_0x20d8=function(_0x21dbe3,_0x681829){_0x21dbe3=_0x21dbe3-0x14f;let _0x2de8c8=_0x3d2fb9[_0x21dbe3];return _0x2de8c8;},a10_0x20d8(_0x2efae7,_0x206efb);}a10_0x3d2fb9();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x23fcae=![]){const _0x27abb0=a10_0x20d8,_0x5b8c2f=Date[_0x27abb0(0x170)](),_0x3b4126=checkNotificationCache();if(_0x3b4126!==null&&!_0x23fcae){updateNotificationDot(_0x3b4126);if(_0x5b8c2f-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x5b8c2f;const _0x47ed45=auth[_0x27abb0(0x16f)];if(!_0x47ed45){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0xc0e23b,_0x4ba4a8,_0x3838d4]=await Promise[_0x27abb0(0x16e)]([checkForPendingMatchesInCollection(_0x47ed45,_0x27abb0(0x150)),checkForPendingMatchesInCollection(_0x47ed45,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x47ed45,'pendingMatchesD3')]),_0x57a569=_0xc0e23b||_0x4ba4a8||_0x3838d4;updateNotificationDot(_0x57a569),updateNotificationCache(_0x57a569);}catch(_0x1ec176){console['error']('Error\x20checking\x20pending\x20matches:',_0x1ec176);}}async function checkForPendingMatchesInCollection(_0x148212,_0x1318df){const _0x475a27=a10_0x20d8,_0x4d8b3f=_0x148212[_0x475a27(0x168)],_0x29e3c6=_0x148212['email'],_0x291994=query(collection(db,_0x1318df),where('winnerId','==',_0x4d8b3f),where(_0x475a27(0x15e),'==',![])),_0x57beda=await getDocs(_0x291994);if(!_0x57beda[_0x475a27(0x166)])return!![];if(_0x29e3c6){const _0x493f94=query(collection(db,_0x1318df),where('winnerEmail','==',_0x29e3c6),where('approved','==',![])),_0x55d93b=await getDocs(_0x493f94);if(!_0x55d93b['empty'])return!![];}let _0x13e986=await getUsernameFromAllSources(_0x148212);if(_0x13e986){const _0x50d378=query(collection(db,_0x1318df),where('winnerUsername','==',_0x13e986),where('approved','==',![])),_0x583375=await getDocs(_0x50d378);if(!_0x583375['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x18aee1){const _0x114ec9=a10_0x20d8,_0x235592=localStorage['getItem']('currentUsername');if(_0x235592)return _0x235592;try{const [_0x19d2ea,_0x125629,_0x134d5c]=await Promise['all']([getDocs(query(collection(db,'players'),where('userId','==',_0x18aee1['uid']))),getDocs(query(collection(db,'playersD2'),where('userId','==',_0x18aee1[_0x114ec9(0x168)]))),getDocs(query(collection(db,'playersD3'),where(_0x114ec9(0x159),'==',_0x18aee1['uid'])))]);if(!_0x19d2ea['empty']){const _0x12dc1e=_0x19d2ea['docs'][0x0]['data']()[_0x114ec9(0x162)];return localStorage['setItem']('currentUsername',_0x12dc1e),_0x12dc1e;}if(!_0x125629['empty']){const _0x20d3f4=_0x125629['docs'][0x0]['data']()[_0x114ec9(0x162)];return localStorage[_0x114ec9(0x14f)](_0x114ec9(0x16c),_0x20d3f4),_0x20d3f4;}if(!_0x134d5c['empty']){const _0x2a8083=_0x134d5c['docs'][0x0]['data']()['username'];return localStorage[_0x114ec9(0x14f)]('currentUsername',_0x2a8083),_0x2a8083;}const _0x32424d=await getDoc(doc(db,_0x114ec9(0x157),_0x18aee1[_0x114ec9(0x168)]));if(_0x32424d['exists']()&&_0x32424d['data']()['username']){const _0xcf9734=_0x32424d['data']()['username'];return localStorage['setItem']('currentUsername',_0xcf9734),_0xcf9734;}}catch(_0x583f8f){console['error'](_0x114ec9(0x160),_0x583f8f);}if(_0x18aee1[_0x114ec9(0x156)])return _0x18aee1['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x4f333e){const _0x3d8295=a10_0x20d8,_0x3b4764={'status':_0x4f333e,'timestamp':Date[_0x3d8295(0x170)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x3b4764));}function checkNotificationCache(){const _0x450099=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x450099)return null;try{const {status:_0x1c3231,timestamp:_0x3ab993}=JSON['parse'](_0x450099),_0x32addb=Date['now']();if(_0x32addb-_0x3ab993<CACHE_EXPIRY)return _0x1c3231;}catch(_0x2dab10){}return null;}export function updateNotificationDot(_0x396264){const _0x39ba0a=a10_0x20d8,_0x2388dd=new MutationObserver((_0x8ed72c,_0x3ffd2e)=>{const _0x172c60=document['getElementById']('report-match-notification');_0x172c60&&(updateDotStyle(_0x172c60,_0x396264),_0x3ffd2e['disconnect']());});_0x2388dd['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x5de02b=document[_0x39ba0a(0x164)](_0x39ba0a(0x16d));_0x5de02b&&(updateDotStyle(_0x5de02b,_0x396264),_0x2388dd['disconnect']()),setTimeout(()=>_0x2388dd['disconnect'](),0x1388);}function updateDotStyle(_0x969b12,_0xedcf3a){const _0x5f2768=a10_0x20d8;_0xedcf3a?(_0x969b12['style']['display']='block',_0x969b12['style']['backgroundColor']=_0x5f2768(0x161),_0x969b12['style'][_0x5f2768(0x16b)]='10px',_0x969b12[_0x5f2768(0x169)][_0x5f2768(0x15d)]='10px',_0x969b12['style']['position']=_0x5f2768(0x16a),_0x969b12['style'][_0x5f2768(0x151)]=_0x5f2768(0x153),_0x969b12['style']['right']='-8px',_0x969b12['style']['borderRadius']='50%',_0x969b12['style'][_0x5f2768(0x152)]=_0x5f2768(0x15c),_0x969b12['style'][_0x5f2768(0x15a)]=_0x5f2768(0x15f)):_0x969b12[_0x5f2768(0x169)]['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x492b46(0x154)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});