const a52j=a52b;(function(a,b){const h=a52b,c=a();while(!![]){try{const d=parseInt(h(0x1ae))/0x1*(-parseInt(h(0x1a4))/0x2)+-parseInt(h(0x1a3))/0x3+-parseInt(h(0x192))/0x4+parseInt(h(0x19e))/0x5+-parseInt(h(0x198))/0x6+parseInt(h(0x1b2))/0x7*(-parseInt(h(0x1a7))/0x8)+-parseInt(h(0x1a0))/0x9*(-parseInt(h(0x194))/0xa);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a52a,0xf05de));import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a52b(a,b){const c=a52a();return a52b=function(d,e){d=d-0x190;let f=c[d];if(a52b['NoRIxr']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a52b['OaDBet']=g,a=arguments,a52b['NoRIxr']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a52b['OaDBet'](f),a[i]=f):f=j,f;},a52b(a,b);}import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a52a(){const o=['y3vYCMvUDfvZzxi','C2vHC29Uq291BNq','zgLZCgXHEq','oti5nZmWnwrwBMPrqq','Bwv0ywrHDge','mtq4mtu5mZveqMX2uwm','CMvZzxqTC2vHC29U','y2fUy2vSlxjLC2v0','mJm3otC4ouTQuez6Ea','mtuWotC3mKngEgPzyW','zxHPC3rZ','C2v0DxbfDMvUDeXPC3rLBMvYCW','oty1nZzht3P3yKu','qxv0AgvUDgLJyxrPB24GzxjYB3i6','Cg9ZAxrPB24','C2vHC29UCW','BM9Uzq','CMvZzxqTCgfZC3DVCMq','igHHCYbIzwvUigfYy2HPDMvKigfUzcbWBgf5zxjZigHHDMuGyMvLBIbYzxnLDc4','mvDUvKnYBG','y29UzMLYBs1YzxnLDa','y3jLzgvUDgLHBa','CMvZzxrtzwfZB24','ntzTyvbIDgu','y2XPy2S','zwXVuMf0Aw5N','ugXLyxnLigvUDgvYihLVDxiGCgfZC3DVCMq','mtuWnZm1mMjxzLnMwa','DMfSDwu','mtbItLbiA2W','z2v0rwXLBwvUDej5swq','u2vHC29Uia','zgf0yq','mJK5nZqYnKDyzvLoEq','ywrKrxzLBNrmAxn0zw5LCG','zxjYB3i'];a52a=function(){return o;};return a52a();}class SeasonManager{constructor(){const i=a52b;this[i(0x1a6)]();}[a52j(0x1a6)](){const k=a52j,a=document[k(0x195)](k(0x1a1)),b=document[k(0x195)](k(0x1af)),c=document[k(0x195)](k(0x1a2));a?.['addEventListener']('click',()=>{document['getElementById']('reset-confirmation')['style']['display']='block';}),b?.[k(0x199)](k(0x1b3),async()=>{const l=k,d=document['getElementById']('reset-password'),e=auth[l(0x19b)];if(!e||!d['value']){alert(l(0x191));return;}try{const f=EmailAuthProvider[l(0x1b0)](e['email'],d[l(0x193)]);await reauthenticateWithCredential(e,f),await this[l(0x1b1)](),d['value']='',document[l(0x195)]('reset-confirmation')['style']['display']='none';}catch(g){alert('Invalid\x20password\x20or\x20authentication\x20failed'),console['error'](l(0x1a8),g);}}),c?.['addEventListener'](k(0x1b3),()=>{const m=k,d=document['getElementById'](m(0x1ac));d['value']='',document[m(0x195)]('reset-confirmation')['style'][m(0x19d)]=m(0x1ab);});}async[a52j(0x1b1)](){const n=a52j;try{const a=await getDoc(doc(db,n(0x19f),'seasonCount'));let b=0x1;a[n(0x1a5)]()&&(b=a['data']()['count']+0x1);const c=await getDocs(collection(db,'players')),d={'players':[],'date':new Date(),'seasonNumber':b};for(const e of c['docs']){const f=e[n(0x197)]();d['players']['push']({'username':f['username'],'position':f[n(0x1a9)],'eloRating':f[n(0x190)]||0x4b0}),await setDoc(doc(db,'players',e['id']),{...f,'eloRating':0x4b0,'position':f['position']});}await setDoc(doc(db,n(0x1aa),'season'+b),d),await setDoc(doc(db,'metadata',n(0x19c)),{'count':b}),alert(n(0x196)+b+n(0x1ad)),location['reload']();}catch(g){console[n(0x19a)]('Error\x20resetting\x20season:',g),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}export const seasonManager=new SeasonManager();