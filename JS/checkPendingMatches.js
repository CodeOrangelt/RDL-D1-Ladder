const a10t=a10b;(function(a,b){const l=a10b,c=a();while(!![]){try{const d=parseInt(l(0x192))/0x1*(-parseInt(l(0x17f))/0x2)+parseInt(l(0x18f))/0x3+parseInt(l(0x181))/0x4*(-parseInt(l(0x19d))/0x5)+-parseInt(l(0x18b))/0x6*(-parseInt(l(0x195))/0x7)+-parseInt(l(0x185))/0x8+-parseInt(l(0x17b))/0x9*(parseInt(l(0x18a))/0xa)+parseInt(l(0x176))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a10a,0xb6edb));import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;function a10b(a,b){const c=a10a();return a10b=function(d,e){d=d-0x171;let f=c[d];if(a10b['TEYLZq']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a10b['rlJBuG']=g,a=arguments,a10b['TEYLZq']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a10b['rlJBuG'](f),a[i]=f):f=j,f;},a10b(a,b);}export async function checkPendingMatches(a=![]){const m=a10b,b=Date[m(0x17e)](),c=checkNotificationCache();if(c!==null&&!a){updateNotificationDot(c);if(b-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=b;const d=auth[m(0x19c)];if(!d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [e,f,g]=await Promise['all']([checkForPendingMatchesInCollection(d,'pendingMatches'),checkForPendingMatchesInCollection(d,m(0x179)),checkForPendingMatchesInCollection(d,m(0x18d))]),h=e||f||g;updateNotificationDot(h),updateNotificationCache(h);}catch(i){console['error']('Error\x20checking\x20pending\x20matches:',i);}}async function checkForPendingMatchesInCollection(a,b){const n=a10b,c=a[n(0x182)],d=a['email'],e=query(collection(db,b),where(n(0x172),'==',c),where(n(0x18e),'==',![])),f=await getDocs(e);if(!f[n(0x198)])return!![];if(d){const h=query(collection(db,b),where(n(0x178),'==',d),where(n(0x18e),'==',![])),i=await getDocs(h);if(!i[n(0x198)])return!![];}let g=await getUsernameFromAllSources(a);if(g){const j=query(collection(db,b),where(n(0x17a),'==',g),where('approved','==',![])),k=await getDocs(j);if(!k[n(0x198)])return!![];}return![];}async function getUsernameFromAllSources(a){const o=a10b,b=localStorage[o(0x180)](o(0x193));if(b)return b;try{const [c,d,e]=await Promise['all']([getDocs(query(collection(db,o(0x199)),where(o(0x17d),'==',a['uid']))),getDocs(query(collection(db,'playersD2'),where(o(0x17d),'==',a[o(0x182)]))),getDocs(query(collection(db,o(0x19b)),where(o(0x17d),'==',a['uid'])))]);if(!c[o(0x198)]){const g=c['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',g),g;}if(!d[o(0x198)]){const h=d['docs'][0x0]['data']()['username'];return localStorage[o(0x186)](o(0x193),h),h;}if(!e[o(0x198)]){const i=e['docs'][0x0][o(0x17c)]()[o(0x189)];return localStorage[o(0x186)](o(0x193),i),i;}const f=await getDoc(doc(db,'users',a['uid']));if(f['exists']()&&f[o(0x17c)]()['username']){const j=f['data']()[o(0x189)];return localStorage[o(0x186)](o(0x193),j),j;}}catch(k){console['error']('Error\x20fetching\x20username:',k);}if(a[o(0x171)])return a['email']['split']('@')[0x0];return null;}function updateNotificationCache(a){const b={'status':a,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](b));}function checkNotificationCache(){const p=a10b,a=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!a)return null;try{const {status:b,timestamp:c}=JSON['parse'](a),d=Date[p(0x17e)]();if(d-c<CACHE_EXPIRY)return b;}catch(f){}return null;}export function updateNotificationDot(a){const r=a10b,b=new MutationObserver((d,e)=>{const q=a10b,f=document['getElementById'](q(0x191));f&&(updateDotStyle(f,a),e[q(0x174)]());});b['observe'](document[r(0x187)],{'childList':!![],'subtree':!![]});const c=document['getElementById'](r(0x191));c&&(updateDotStyle(c,a),b['disconnect']()),setTimeout(()=>b[r(0x174)](),0x1388);}function updateDotStyle(a,b){const s=a10b;b?(a['style']['display']='block',a['style']['backgroundColor']='#ff3b30',a['style']['width']=s(0x184),a['style']['height']='10px',a['style']['position']='absolute',a[s(0x177)][s(0x196)]=s(0x188),a['style'][s(0x173)]='-8px',a[s(0x177)]['borderRadius']=s(0x18c),a[s(0x177)]['border']=s(0x19a),a['style'][s(0x197)]=s(0x175)):a[s(0x177)]['display']='none';}function a10a(){const v=['zgf0yq','DxnLCKLK','BM93','mJe1mZHJq1zRvvG','z2v0sxrLBq','ntz3rwfPtKm','DwLK','re9nq29UDgvUDeXVywrLza','mtbWEa','mZK2oteWnfLMrKnPEq','C2v0sxrLBq','yM9KEq','ltvWEa','DxnLCM5HBwu','mtbPzhrzuu0','ndaYAxDizej3','ntaL','CgvUzgLUz01HDgnOzxnemW','yxbWCM92zwq','mZC4ntKXoxHhz2v0AG','CMvTB3zLsxrLBq','CMvWB3j0lw1HDgnOlw5VDgLMAwnHDgLVBG','mxHuwgXmEa','y3vYCMvUDfvZzxjUyw1L','ywrKrxzLBNrmAxn0zw5LCG','ody2nJDMuxHxEhG','Dg9W','EKLUzgv4','zw1WDhK','CgXHEwvYCW','mNb4ihnVBgLKihDOAxrL','CgXHEwvYC0qZ','y3vYCMvUDfvZzxi','mJi3odbMA3rOrwG','zw1HAwW','D2LUBMvYswq','CMLNAhq','zgLZy29UBMvJDa','otK5','nJi4nJmWmMT1A0vIAq','C3r5Bgu','D2LUBMvYrw1HAwW','CgvUzgLUz01HDgnOzxnemG','D2LUBMvYvxnLCM5HBwu','mtiWodCXndr1wwr3qxm'];a10a=function(){return v;};return a10a();}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10t(0x194)](a10t(0x183),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const u=a10b;localStorage[u(0x190)]('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});