const a48_0x58e09d=a48_0x4ebf,a48_0x4a6bd7=(function(){let _0x467cfe=!![];return function(_0x3ad6ac,_0x43adfa){const _0x667883=_0x467cfe?function(){const _0x360d0b=a48_0x4ebf;if(_0x43adfa){const _0x41aa44=_0x43adfa[_0x360d0b(0x1d0)](_0x3ad6ac,arguments);return _0x43adfa=null,_0x41aa44;}}:function(){};return _0x467cfe=![],_0x667883;};}()),a48_0x548b29=a48_0x4a6bd7(this,function(){const _0x43f01c=a48_0x4ebf,_0x3d4b38=function(){const _0x52b39d=a48_0x4ebf;let _0x43c6cd;try{_0x43c6cd=Function(_0x52b39d(0x1bf)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1a765d){_0x43c6cd=window;}return _0x43c6cd;},_0x52775d=_0x3d4b38(),_0x4a5e31=_0x52775d['console']=_0x52775d['console']||{},_0x378c92=['log','warn',_0x43f01c(0x1bd),'error','exception','table','trace'];for(let _0x2b8b5e=0x0;_0x2b8b5e<_0x378c92['length'];_0x2b8b5e++){const _0x1f1c71=a48_0x4a6bd7['constructor']['prototype']['bind'](a48_0x4a6bd7),_0xc04a9e=_0x378c92[_0x2b8b5e],_0x51a55f=_0x4a5e31[_0xc04a9e]||_0x1f1c71;_0x1f1c71['__proto__']=a48_0x4a6bd7[_0x43f01c(0x1e5)](a48_0x4a6bd7),_0x1f1c71[_0x43f01c(0x1ec)]=_0x51a55f['toString']['bind'](_0x51a55f),_0x4a5e31[_0xc04a9e]=_0x1f1c71;}});a48_0x548b29();function a48_0x496c(){const _0x9b3c1=['pointer','üëë\x20Admin\x20controls\x20enabled','display','Theme\x20clicked:\x20','isAdmin','block','Theme\x20system\x20not\x20found','isUserAdmin','You\x20must\x20purchase\x20this\x20theme\x20first','Please\x20sign\x20in\x20to\x20purchase\x20themes','dataset','userProfiles','info','points','return\x20(function()\x20','sign-in-free','purchase','\x20theme\x20for\x20','User','Insufficient\x20points','error','querySelectorAll','visible','New\x20user\x20profile\x20created','classList','You\x20already\x20own\x20the\x20','DOMContentLoaded','innerHTML','‚úÖ\x20User\x20authenticated:','email','price','apply','disabled','closest','length','Purchase\x20','Can\x27t\x20get\x20enough','Red','ThemeSystem','getCurrentTheme','adminStatusChanged','dispatchEvent','store-message\x20store-message-','Emerald\x20City!','style','entries','can-afford','preventDefault','createElement','You\x20need\x20','cursor','Theme\x20','bind','add','store-message','RedeemStore','log','user-points','User\x20data\x20loaded\x20-\x20Points:\x20','toString','textContent','success','\x20points','Buy\x20for\x20','forEach','opacity','appendChild','none','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>','\x20theme\x20purchased!','0.5','name','Please\x20sign\x20in\x20to\x20select\x20themes'];a48_0x496c=function(){return _0x9b3c1;};return a48_0x496c();}import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'purple':{'price':0x96,'name':'Purple','description':a48_0x58e09d(0x1d5)},'cyberpunk':{'price':0x190,'name':'Yellow\x20Orange','description':'This\x20theme\x20makes\x20me\x20happy'},'emerald':{'price':0x3e8,'name':'Emerald','description':a48_0x58e09d(0x1dc)},'gold':{'price':0x320,'name':'Gold','description':'Only\x20the\x20best\x20get\x20this\x20one'},'contrast':{'price':0x0,'name':'Black\x20&\x20White','description':'You\x20can\x20see\x20better!'},'ocean':{'price':0x12c,'name':'Blue','description':'This\x20one\x20is\x20really\x20pretty'},'volcanic':{'price':0x1f4,'name':a48_0x58e09d(0x1d6),'description':'For\x20the\x20angry\x20type.'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener'](a48_0x58e09d(0x1cb),()=>{const _0x2c0b9b=a48_0x58e09d;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document['getElementById']('store-content'),pointsDisplay=document['getElementById'](_0x2c0b9b(0x1ea)),authWarning=document['getElementById']('auth-warning'),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x445f59=>{const _0x2fd832=a48_0x4ebf;if(_0x445f59){console['log'](_0x2fd832(0x1cd),_0x445f59['displayName']||_0x445f59['email']);if(authWarning)authWarning['style'][_0x2fd832(0x1b3)]=_0x2fd832(0x1f4);if(storeContainer)storeContainer[_0x2fd832(0x1dd)]['display']='block';await loadUserData(_0x445f59),updateThemeButtons();}else{console['log']('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style'][_0x2fd832(0x1b3)]=_0x2fd832(0x1b6);if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window['isUserAdmin']=![];}});}async function loadUserData(_0x366dcb){const _0x10dc17=a48_0x58e09d;try{const _0x1fb678=doc(db,_0x10dc17(0x1bc),_0x366dcb['uid']),_0x2232a0=await getDoc(_0x1fb678);if(_0x2232a0['exists']()){const _0x351c34=_0x2232a0['data']();userData={'points':_0x351c34[_0x10dc17(0x1be)]||0x0,'inventory':_0x351c34['inventory']||[],'isAdmin':_0x351c34['isAdmin']||![]},pointsDisplay&&(pointsDisplay[_0x10dc17(0x1ed)]=userData['points']['toLocaleString']()),window[_0x10dc17(0x1b8)]=userData['isAdmin'],userData[_0x10dc17(0x1b5)]&&(console[_0x10dc17(0x1e9)](_0x10dc17(0x1b2)),window[_0x10dc17(0x1da)](new CustomEvent(_0x10dc17(0x1d9),{'detail':{'isAdmin':!![]}}))),console['log'](_0x10dc17(0x1eb)+userData['points']+',\x20Inventory:\x20'+userData['inventory'][_0x10dc17(0x1d3)]+'\x20items');}else await setDoc(_0x1fb678,{'points':0x0,'inventory':[],'createdAt':serverTimestamp(),'username':_0x366dcb['displayName']||_0x366dcb['email']?.['split']('@')[0x0]||_0x10dc17(0x1c3)}),userData={'points':0x0,'inventory':[],'isAdmin':![]},pointsDisplay&&(pointsDisplay['textContent']='0'),window['isUserAdmin']=![],console['log'](_0x10dc17(0x1c8));}catch(_0x35eab9){console['error']('Error\x20loading\x20user\x20data:',_0x35eab9);}}function userOwnsTheme(_0x309dc8){if(THEMES[_0x309dc8]?.['price']===0x0)return!![];return userData['inventory']['includes']('theme_'+_0x309dc8);}async function purchaseTheme(_0x853655){const _0x4134ba=a48_0x58e09d,_0xeb6fa=auth['currentUser'];if(!_0xeb6fa)return showMessage(_0x4134ba(0x1ba),'error'),![];const _0x58935=THEMES[_0x853655];if(!_0x58935)return console['error']('Theme\x20'+_0x853655+'\x20not\x20found'),![];if(userData[_0x4134ba(0x1be)]<_0x58935[_0x4134ba(0x1cf)])return showMessage('Not\x20enough\x20points.\x20You\x20need\x20'+(_0x58935['price']-userData['points'])+'\x20more\x20points.',_0x4134ba(0x1c5)),![];if(userOwnsTheme(_0x853655))return showMessage(_0x4134ba(0x1ca)+_0x58935['name']+'\x20theme','info'),![];try{const _0x5dfdd7=doc(db,'userProfiles',_0xeb6fa['uid']),_0x42d643=await getDoc(_0x5dfdd7);if(!_0x42d643['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0x42c4a5=_0x42d643['data'](),_0x26f46b=_0x42c4a5['points']||0x0,_0x1e9554=_0x42c4a5['inventory']||[];if(_0x26f46b<_0x58935['price'])return showMessage(_0x4134ba(0x1c4),'error'),![];if(_0x1e9554['includes']('theme_'+_0x853655))return showMessage('You\x20already\x20own\x20this\x20theme','info'),![];const _0x652610=_0x26f46b-_0x58935[_0x4134ba(0x1cf)],_0x38f04c=[..._0x1e9554,'theme_'+_0x853655];return await updateDoc(_0x5dfdd7,{'points':_0x652610,'inventory':_0x38f04c,'lastPurchase':serverTimestamp()}),await addDoc(collection(db,'transactions'),{'userId':_0xeb6fa['uid'],'userEmail':_0xeb6fa[_0x4134ba(0x1ce)],'itemId':'theme_'+_0x853655,'itemTitle':_0x58935['name']+'\x20Theme','price':_0x58935['price'],'type':_0x4134ba(0x1c1),'category':'theme','timestamp':serverTimestamp()}),userData['points']=_0x652610,userData['inventory']=_0x38f04c,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x4134ba(0x1be)]['toLocaleString']()),console['log']('‚úÖ\x20Purchased\x20'+_0x58935['name']+'\x20theme\x20for\x20'+_0x58935[_0x4134ba(0x1cf)]+_0x4134ba(0x1ef)),!![];}catch(_0x108167){return console[_0x4134ba(0x1c5)]('Purchase\x20failed:',_0x108167),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function applyTheme(_0x3113a2){const _0x1e9b93=a48_0x58e09d;if(!userOwnsTheme(_0x3113a2))return showMessage(_0x1e9b93(0x1b9),'error'),![];return window['ThemeSystem']?(window[_0x1e9b93(0x1d7)]['switchTheme'](_0x3113a2),showMessage((THEMES[_0x3113a2]?.['name']||_0x3113a2)+'\x20theme\x20applied!','success'),!![]):(console['error'](_0x1e9b93(0x1b7)),![]);}function buildStoreUI(){const _0x35c87f=a48_0x58e09d,_0x4fb2b8=document['querySelector']('.themes-grid');if(!_0x4fb2b8){console[_0x35c87f(0x1c5)]('Themes\x20container\x20not\x20found');return;}_0x4fb2b8[_0x35c87f(0x1cc)]='',Object[_0x35c87f(0x1de)](THEMES)[_0x35c87f(0x1f1)](([_0x33a595,_0x4cde3a])=>{const _0x1976ed=_0x35c87f,_0x22df45=document['createElement']('div');_0x22df45['className']='store-item',_0x22df45['dataset']['theme']=_0x33a595,_0x22df45['dataset']['itemId']='theme_'+_0x33a595,_0x22df45['dataset'][_0x1976ed(0x1cf)]=_0x4cde3a['price'],_0x22df45['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x33a595+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+(_0x4cde3a['price']===0x0?'FREE':_0x4cde3a[_0x1976ed(0x1cf)]+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x4cde3a['name']+_0x1976ed(0x1f5)+_0x4cde3a['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4fb2b8[_0x1976ed(0x1f3)](_0x22df45);}),setupThemeButtons();}function setupThemeButtons(){const _0x30c647=a48_0x58e09d,_0x1fbd6c=document['querySelectorAll']('.theme-select-btn');_0x1fbd6c[_0x30c647(0x1f1)](_0x306158=>{_0x306158['addEventListener']('click',async _0x3e641e=>{const _0x52d7fb=a48_0x4ebf;_0x3e641e[_0x52d7fb(0x1e0)]();const _0x3f1b06=auth['currentUser'];if(!_0x3f1b06){showMessage(_0x52d7fb(0x1f9),_0x52d7fb(0x1c5));return;}const _0x4e4c7a=_0x306158[_0x52d7fb(0x1d2)]('[data-theme]'),_0x59a401=_0x4e4c7a['dataset']['theme'],_0x154235=THEMES[_0x59a401];if(!_0x154235){console['error'](_0x52d7fb(0x1e4)+_0x59a401+'\x20not\x20found');return;}console[_0x52d7fb(0x1e9)](_0x52d7fb(0x1b4)+_0x154235['name']+'\x20('+_0x59a401+')');if(_0x306158[_0x52d7fb(0x1d1)]){_0x154235['price']>0x0&&showMessage(_0x52d7fb(0x1e2)+_0x154235['price']+'\x20points\x20to\x20purchase\x20this\x20theme','error');return;}if(_0x306158['textContent']==='Current\x20Theme'){showMessage(_0x154235['name']+'\x20is\x20already\x20your\x20current\x20theme','info');return;}if(_0x306158['textContent']==='Apply\x20Theme'){applyTheme(_0x59a401),updateThemeButtons();return;}if(_0x306158[_0x52d7fb(0x1ed)]['includes']('Buy')){const _0x4d6425=window['confirm'](_0x52d7fb(0x1d4)+_0x154235[_0x52d7fb(0x1f8)]+_0x52d7fb(0x1c2)+_0x154235[_0x52d7fb(0x1cf)]+'\x20points?');if(!_0x4d6425)return;const _0x3f000e=await purchaseTheme(_0x59a401);_0x3f000e&&(showMessage(_0x154235['name']+_0x52d7fb(0x1f6),_0x52d7fb(0x1ee)),applyTheme(_0x59a401),updateThemeButtons());return;}userOwnsTheme(_0x59a401)?applyTheme(_0x59a401):showMessage(_0x52d7fb(0x1b9),'error');});}),updateThemeButtons();}function updateThemeButtons(){const _0x50cdbd=a48_0x58e09d,_0x1234ab=window['ThemeSystem']?window['ThemeSystem'][_0x50cdbd(0x1d8)]():'default',_0x2d1350=auth['currentUser'];document[_0x50cdbd(0x1c6)]('.theme-select-btn')['forEach'](_0x365536=>{const _0x1d1a57=_0x50cdbd,_0x171219=_0x365536['closest']('[data-theme]'),_0x32bdf5=_0x171219[_0x1d1a57(0x1bb)]['theme'],_0x1d5743=THEMES[_0x32bdf5];if(!_0x1d5743)return;_0x365536['disabled']=![],_0x365536[_0x1d1a57(0x1dd)][_0x1d1a57(0x1f2)]='',_0x365536[_0x1d1a57(0x1dd)][_0x1d1a57(0x1e3)]=_0x1d1a57(0x1b1),_0x365536['classList']['remove']('current-theme','apply-theme',_0x1d1a57(0x1df),'cannot-afford',_0x1d1a57(0x1c0),'sign-in-paid');if(!_0x2d1350){_0x1d5743['price']===0x0?(_0x365536[_0x1d1a57(0x1ed)]='Sign\x20in\x20to\x20Apply',_0x365536['classList']['add']('sign-in-free')):(_0x365536['textContent']='Sign\x20in\x20to\x20Purchase',_0x365536['disabled']=!![],_0x365536['style']['opacity']='0.7',_0x365536[_0x1d1a57(0x1c9)]['add']('sign-in-paid'));return;}if(_0x32bdf5===_0x1234ab){_0x365536['textContent']='Current\x20Theme',_0x365536['classList'][_0x1d1a57(0x1e6)]('current-theme'),_0x365536[_0x1d1a57(0x1d1)]=!![],_0x365536[_0x1d1a57(0x1dd)][_0x1d1a57(0x1e3)]='default';return;}if(userOwnsTheme(_0x32bdf5)){_0x365536['textContent']='Apply\x20Theme',_0x365536[_0x1d1a57(0x1c9)]['add']('apply-theme');return;}if(userData['points']>=_0x1d5743['price']){_0x365536['textContent']=_0x1d1a57(0x1f0)+_0x1d5743[_0x1d1a57(0x1cf)]+'\x20Points',_0x365536['classList'][_0x1d1a57(0x1e6)](_0x1d1a57(0x1df));return;}_0x365536[_0x1d1a57(0x1ed)]='Need\x20'+_0x1d5743[_0x1d1a57(0x1cf)]+'\x20Points',_0x365536[_0x1d1a57(0x1c9)]['add']('cannot-afford'),_0x365536['style']['opacity']=_0x1d1a57(0x1f7),_0x365536['disabled']=!![],_0x365536['style'][_0x1d1a57(0x1e3)]='not-allowed';});}function a48_0x4ebf(_0x587be5,_0x36bdf8){const _0x548b29=a48_0x496c();return a48_0x4ebf=function(_0x4a6bd7,_0x38e3e2){_0x4a6bd7=_0x4a6bd7-0x1b1;let _0x496c8e=_0x548b29[_0x4a6bd7];return _0x496c8e;},a48_0x4ebf(_0x587be5,_0x36bdf8);}function showMessage(_0x52b54e,_0x4c3147='info'){const _0x47f7b7=a48_0x58e09d,_0xfc52ed=document['getElementById'](_0x47f7b7(0x1e7));_0xfc52ed&&_0xfc52ed['remove']();const _0xacbf1=document[_0x47f7b7(0x1e1)]('div');_0xacbf1['id']=_0x47f7b7(0x1e7),_0xacbf1['className']=_0x47f7b7(0x1db)+_0x4c3147,_0xacbf1[_0x47f7b7(0x1ed)]=_0x52b54e,document['body']['appendChild'](_0xacbf1),requestAnimationFrame(()=>{const _0x4efe8f=_0x47f7b7;_0xacbf1[_0x4efe8f(0x1c9)]['add']('visible');}),setTimeout(()=>{const _0x552b47=_0x47f7b7;_0xacbf1['classList']['remove'](_0x552b47(0x1c7)),setTimeout(()=>{_0xacbf1['parentNode']&&_0xacbf1['remove']();},0x12c);},0xfa0);}window[a48_0x58e09d(0x1e8)]={'refreshUI':()=>{updateThemeButtons();},'checkOwnership':userOwnsTheme,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme},console['log']('üè™\x20Redeem\x20store\x20loaded');