const a25A=a25b;(function(a,b){const z=a25b,c=a();while(!![]){try{const d=parseInt(z(0x15a))/0x1+parseInt(z(0x164))/0x2*(parseInt(z(0x142))/0x3)+-parseInt(z(0x170))/0x4*(parseInt(z(0x179))/0x5)+-parseInt(z(0x161))/0x6*(parseInt(z(0x16c))/0x7)+-parseInt(z(0x168))/0x8*(-parseInt(z(0x13c))/0x9)+parseInt(z(0x15f))/0xa+parseInt(z(0x149))/0xb*(-parseInt(z(0x147))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a25a,0xbdfdd));function a25a(){const L=['re9nq29UDgvUDeXVywrLza','DxnLCM5HBwu','Aw5WDxrBBMfTzt0IBgfKzgvYiL0','ywrKrxzLBNrmAxn0zw5LCG','igXHzgrLCI4','y3vYCMvUDfvZzxi','y2XHC3noyw1L','DhjPBq','mte1mtCWowHRDuTWDW','y2HLy2TLza','BM9UugfYDgLJAxbHBNrZ','lcbKzwzHDwX0Aw5NihrVieqX','zxjYB3i','mta2mJmWndbnq011v3e','Cg9ZAxrPB24','mZi5mtb2C3HuD20','AM9PBI1SywrKzxiTyNv0Dg9U','ugXLyxnLigvUDgvYihLVDxiGDxnLCM5HBwuGDg8Gy29UzMLYBs4','odmYmJeWrhfZrxHg','rxjYB3iGy2HLy2TPBMCGBgfKzgvYihn0yxr1CZO','zgvZyW','C3bSAxq','nte0nhrnv1DKvG','CgXHEwvYC0qZ','zg9JCW','vxnLCM5HBwuGzg9LC24NDcbTyxrJAc4GugXLyxnLigvUDgvYici','odyXDgDOtKPy','q291BgqGBM90ihzLCMLMEsb5B3vYigfJy291BNqUifbSzwfZzsbJB250ywn0igfUigfKBwLUAxn0CMf0B3iU','DwLK','BgfKzgvYlwPVAw4TC3rHDhvZ','ngD3rNnLAa','Bg9N','igXHzgrLCIeGvgHLihbHz2uGD2LSBcbYzwzYzxnOlI4U','C3r5Bgu','sM9PBMLUzYa','Bg9JyxrPB24','zxHPC3rZ','CgXHEwvYC0qY','rfvp','mZu2mJG1mevuDvnfsa','rxjYB3iGAM9PBMLUzYbSywrKzxi6ia','q2HLy2TPBMCGDxnLCIbZDgf0DxmGzM9YigXHzgrLCJO','tgfKzgvYigPVAw46ieqYihjHzgLVigzVDw5KoG','qxv0AgvUDgLJyxrPB24GDMvYAwzPy2f0Aw9UigzHAwXLzdO','AM9PBI11C2vYBMfTzs1PBNb1Da','zgLZywjSzwq','z2v0rwXLBwvUDej5swq','Dgv4DenVBNrLBNq','AM9PBI1SywrKzxiTDhLWzq','qxv0AgvUDgLJyxrPB24GzMfPBgvKlIbqBgvHC2uGC2LNBIbPBIbHz2fPBI4','y2HHBMDL','nJC1own1tgTPEa','BgfKzgvYlwPVAw4TC3rHDhvZigvYCM9Y','z2v0swruB2TLBG','CgXHEwvYC0r1B3m','zdeTC3DPDgnO','Dg9mB3DLCKnHC2u','m3jTuLv2zq','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguG','ww91ig11C3qGyMuGC2LNBMvKigLUihrVigPVAw4GysbSywrKzxiU','zgLZCgXHEq','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguGrhvVCYbSywrKzxiHifLVDsbJyw4GBM93igzVCM0GDgvHBxmGD2L0AcbVDgHLCIbWBgf5zxjZlIbuAguGCgfNzsb3AwXSihjLzNjLC2GUlI4','mteZnZa5nZj5CxDPC0O','zw1HAwW','mtfnzeTXEwG','BgfKzgvYlwPVAw4TChjVBxb0','DgfYz2v0','rfvpuW','CxvLCNLtzwXLy3rVCKfSBa','BM9Uzq','CgXHEwvYCW','zw1WDhK','DMfSDwu'];a25a=function(){return L;};return a25a();}import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a25b(a,b){const c=a25a();return a25b=function(d,e){d=d-0x13b;let f=c[d];if(a25b['CNbGGA']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a25b['FJJuKv']=g,a=arguments,a25b['CNbGGA']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a25b['FJJuKv'](f),a[i]=f):f=j,f;},a25b(a,b);}import{auth,db}from'./firebase-config.js';let currentLadder='D1';document[a25A(0x155)](a25A(0x152),()=>{const B=a25A,a=document['getElementById'](B(0x140)),b=document[B(0x180)]('d2-switch');console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!a),console[B(0x171)](B(0x17c),!!b);function c(){const C=B;document[C(0x14d)](C(0x154))['forEach'](e=>{const D=C;e['addEventListener'](D(0x13b),f=>{const E=D;f['target'][E(0x15b)]&&(currentLadder=f[E(0x14b)][E(0x151)],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}c();const d=document[B(0x180)](B(0x162));d&&d[B(0x155)]('click',handleJoinLadder),onAuthStateChanged(auth,e=>{const F=B;if(e)checkUserLadderStatus();else{const f=document[F(0x180)](F(0x14a));f&&(f['style'][F(0x145)]=F(0x14e));}});});function getCollectionName(a){const G=a25A;switch(a?.['toUpperCase']()){case'D1':return G(0x14f);case'D2':return G(0x177);case'D3':return G(0x169);case'DUOS':case G(0x178):return G(0x13f);case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+a+G(0x15d));return'players';}}async function checkUserLadderStatus(){const H=a25A;console[H(0x171)](H(0x17b),currentLadder);const a=auth[H(0x157)],b=document['getElementById']('ladder-join-prompt'),c=document['getElementById'](H(0x182)),d=document[H(0x180)]('tiny-join-button');if(!a||!a[H(0x16e)]||!b||!c||!d){if(b)b[H(0x173)]['display']='none';if(d)d[H(0x173)]['display']=H(0x14e);return;}try{try{await a['getIdToken'](![]);}catch(h){console['error'](H(0x17d),h),b['style'][H(0x145)]='none',d[H(0x173)]['display']=H(0x14e);return;}const e=getCollectionName(currentLadder),f=doc(db,e,a['uid']),g=await getDoc(f);if(g[H(0x176)]())b['style']['display']='none',d['style'][H(0x145)]='none';else{b[H(0x173)]['display']='none',d[H(0x173)][H(0x145)]='block',c['textContent']=currentLadder,d['onclick']=()=>{const I=H;b[I(0x173)]['display']==='block'?b['style']['display']='none':b['style']['display']='block';};const i=document[H(0x180)](H(0x17e)),j=document['getElementById'](H(0x16f));if(i)i['value']='';j&&(j[H(0x181)]='',j['className']=H(0x16f));}}catch(k){console[H(0x15e)](H(0x165),k),b['style'][H(0x145)]=H(0x14e),d['style']['display']=H(0x14e);}}async function handleJoinLadder(){const J=a25A,a=auth[J(0x157)],b=document[J(0x180)](J(0x162)),c=document['getElementById'](J(0x16f)),d=document[J(0x180)]('join-username-input');if(!a||!a['uid']){c[J(0x181)]=J(0x144),c[J(0x158)]=J(0x13d);return;}try{await a[J(0x13e)](!![]);}catch(e){console['error']('Authentication\x20error:',e),c['textContent']=J(0x183),c['className']='ladder-join-status\x20error';return;}if(!d||!d[J(0x151)][J(0x159)]()){c[J(0x181)]=J(0x163),c[J(0x158)]=J(0x13d);return;}try{b['disabled']=!![],c['textContent']='Verifying\x20username...',c[J(0x158)]='ladder-join-status\x20loading';let f='',g=null;const h=['players',J(0x177),J(0x169),J(0x13f),'playersCTF',J(0x15c)];for(const s of h){try{const t=doc(db,s,a[J(0x16e)]),u=await getDoc(t);if(u['exists']()){g=u['data']();if(g['username']){f=g[J(0x153)];break;}}}catch(v){console['error']('Error\x20checking\x20'+s+':',v);}}!f&&a[J(0x148)]&&(f=a[J(0x148)][J(0x167)]('@')[0x0]);if(!f){c['textContent']=J(0x16d),c[J(0x158)]=J(0x13d),b['disabled']=![];return;}const i=d[J(0x151)]['trim']();if(f&&i[J(0x141)]()!==f[J(0x141)]()){c['textContent']=J(0x16b)+f+'\x22\x20to\x20confirm.',c['className']='ladder-join-status\x20error',b[J(0x17f)]=![];return;}c['textContent']=J(0x174)+currentLadder+'\x20ladder...';const j=getCollectionName(currentLadder),k=doc(db,j,a['uid']),l=await getDoc(k);if(l[J(0x176)]()){c['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+J(0x156),c['className']=J(0x13d),b['disabled']=![];return;}try{await a['getIdToken'](!![]);}catch(w){c['textContent']=J(0x183),c['className']=J(0x13d),b['disabled']=![];return;}const m=f,n=collection(db,j),o=query(n,orderBy(J(0x160),J(0x166)),limit(0x1)),p=await getDocs(o);let q=0x1;if(!p[J(0x150)]){const x=p[J(0x16a)][0x0]['data']();q=(x['position']||0x0)+0x1;}const r={'username':m,'email':a['email'],'eloRating':0x4b0,'position':q,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(k,r),currentLadder===J(0x14c)?c['textContent']=J(0x146):c['textContent']=J(0x143)+currentLadder+J(0x172),c['className']='ladder-join-status\x20success',setTimeout(()=>{const K=J;window[K(0x175)]['reload']();},0x7d0);}catch(y){console['error']('Error\x20joining\x20ladder:',y),c['textContent']=J(0x17a)+y['message'],c[J(0x158)]='ladder-join-status\x20error',b[J(0x17f)]=![];}}