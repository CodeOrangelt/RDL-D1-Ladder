const a22_0x15d8f5=a22_0x57ad;import a22_0x537ff5,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x5ba559=a22_0x57ad;if(document['getElementById']('idle-overlay'))return;const _0x1f3748=document[_0x5ba559(0xee)](_0x5ba559(0xc5));_0x1f3748['id']=_0x5ba559(0xe5),_0x1f3748['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x433382=document['createElement'](_0x5ba559(0xc5));_0x433382[_0x5ba559(0xe1)]['cssText']=_0x5ba559(0xcf);const _0x4aef5a=document['createElement']('h2');_0x4aef5a[_0x5ba559(0xdf)]='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x4aef5a['style']['cssText']='color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x43ef49=document[_0x5ba559(0xee)]('p');_0x43ef49['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x43ef49['style'][_0x5ba559(0xd3)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x5e6305=document[_0x5ba559(0xee)](_0x5ba559(0xe4));_0x5e6305['id']='resume-session-btn',_0x5e6305['textContent']='Return\x20to\x20Website',_0x5e6305[_0x5ba559(0xe1)][_0x5ba559(0xd3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x5e6305['onmouseover']=function(){const _0x5c472a=_0x5ba559;this[_0x5c472a(0xe1)][_0x5c472a(0xcb)]='#3da05f';},_0x5e6305['onmouseout']=function(){const _0x304384=_0x5ba559;this[_0x304384(0xe1)][_0x304384(0xcb)]='#50C878';},_0x433382['appendChild'](_0x4aef5a),_0x433382['appendChild'](_0x43ef49),_0x433382['appendChild'](_0x5e6305),_0x1f3748[_0x5ba559(0xeb)](_0x433382),document[_0x5ba559(0xd2)]['appendChild'](_0x1f3748),_0x5e6305['addEventListener'](_0x5ba559(0xd6),resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x3da2f7=a22_0x57ad;if(document[_0x3da2f7(0xc9)](_0x3da2f7(0xd7)))return;const _0x502dd4=document['createElement']('div');_0x502dd4['id']='network-error-overlay',_0x502dd4['style'][_0x3da2f7(0xd3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x216e85=document['createElement']('div');_0x216e85['style'][_0x3da2f7(0xd3)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x326771=document[_0x3da2f7(0xee)]('h2');_0x326771['textContent']=_0x3da2f7(0xd8),_0x326771['style']['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x391e76=document['createElement']('p');_0x391e76['textContent']=_0x3da2f7(0xdc),_0x391e76[_0x3da2f7(0xe1)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x51b91e=document[_0x3da2f7(0xee)]('button');_0x51b91e['id']='retry-connection-btn',_0x51b91e[_0x3da2f7(0xdf)]=_0x3da2f7(0xe2),_0x51b91e['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x4833e8=document['createElement']('button');_0x4833e8['id']=_0x3da2f7(0xce),_0x4833e8['textContent']='Reload\x20Page',_0x4833e8['style']['cssText']=_0x3da2f7(0xef);const _0x50db14=document['createElement'](_0x3da2f7(0xc5));_0x50db14['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x50db14[_0x3da2f7(0xeb)](_0x51b91e),_0x50db14['appendChild'](_0x4833e8),_0x216e85['appendChild'](_0x326771),_0x216e85['appendChild'](_0x391e76),_0x216e85['appendChild'](_0x50db14),_0x502dd4['appendChild'](_0x216e85),document['body']['appendChild'](_0x502dd4),_0x51b91e['addEventListener'](_0x3da2f7(0xd6),retryConnection),_0x4833e8['addEventListener']('click',()=>window[_0x3da2f7(0xc4)]['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x1e15fa=a22_0x57ad;clearTimeout(idleTimer);const _0x3d55a7=document['getElementById']('network-error-overlay');_0x3d55a7&&(_0x3d55a7['style']['display']='flex'),window[_0x1e15fa(0xe0)]=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x537ff5['suspendAllListeners']();}function retryConnection(){const _0x5671a8=a22_0x57ad;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x447cdd=document[_0x5671a8(0xd9)]('#network-error-overlay\x20p');_0x447cdd&&(_0x447cdd['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x3fad94=document[_0x5671a8(0xc9)]('retry-connection-btn');_0x3fad94&&(_0x3fad94['disabled']=!![],_0x3fad94['style']['opacity']='0.5',_0x3fad94['style'][_0x5671a8(0xc2)]='not-allowed');return;}const _0x45fc84=document['getElementById'](_0x5671a8(0xd7));_0x45fc84&&(_0x45fc84['style'][_0x5671a8(0xd0)]='none');window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log'](_0x5671a8(0xea));try{const {rdlFirestore:_0x2aa128}=window;if(_0x2aa128){const _0x3be979=_0x2aa128['collection'](_0x5671a8(0xed));_0x2aa128['getDocs'](_0x3be979)['catch'](_0xf1aa50=>{const _0x2a4f25=_0x5671a8;console['error'](_0x2a4f25(0xe3),_0xf1aa50),handleNetworkError();});}}catch(_0x237cf3){console[_0x5671a8(0xc8)]('Failed\x20to\x20test\x20connection:',_0x237cf3),handleNetworkError();}a22_0x537ff5['resumeAllListeners']();}function suspendSession(){isSessionSuspended=!![];const _0x2ca6da=document['getElementById']('idle-overlay');_0x2ca6da&&(_0x2ca6da['style']['display']='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a22_0x537ff5['suspendAllListeners']();}function a22_0x1c86(){const _0x40df40=['warn','cursor','unavailable','location','div','__proto__','prototype','error','getElementById','activeListeners','backgroundColor','console','mousedown','reload-page-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','display','RDL_LAST_ACTIVITY','body','cssText','from','trace','click','network-error-overlay','Connection\x20Error','querySelector','Session\x20resumed','loading','We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.','scroll','log','textContent','RDL_NETWORK_ERROR','style','Retry\x20Connection','Connection\x20test\x20failed:','button','idle-overlay','addEventListener','includes','RDL_SESSION_SUSPENDED','code','Retrying\x20connection...','appendChild','toString','system','createElement','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','resumeSession','reload'];a22_0x1c86=function(){return _0x40df40;};return a22_0x1c86();}function resumeSession(){const _0xd58fae=a22_0x57ad;isSessionSuspended=![],window[_0xd58fae(0xe8)]=![];const _0x379c74=document['getElementById']('idle-overlay');_0x379c74&&(_0x379c74['style']['display']='none'),console['log'](_0xd58fae(0xda)),resetIdleTimer(),a22_0x537ff5['resumeAllListeners'](),idleTimer&&Date['now']()-(window[_0xd58fae(0xd1)]||0x0)>IDLE_TIMEOUT*0x2&&(console[_0xd58fae(0xde)]('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location'][_0xd58fae(0xf1)]());}function a22_0x57ad(_0x408a87,_0x10d2ea){const _0xfb0992=a22_0x1c86();return a22_0x57ad=function(_0x56b43e,_0x3e611f){_0x56b43e=_0x56b43e-0xc1;let _0x1c86fe=_0xfb0992[_0x56b43e];return _0x1c86fe;},a22_0x57ad(_0x408a87,_0x10d2ea);}function initIdleTimeout(){const _0x7290b8=a22_0x57ad,_0x459934=(function(){let _0x4bbb13=!![];return function(_0x4fad2d,_0x3e450a){const _0x343247=_0x4bbb13?function(){if(_0x3e450a){const _0x26a70b=_0x3e450a['apply'](_0x4fad2d,arguments);return _0x3e450a=null,_0x26a70b;}}:function(){};return _0x4bbb13=![],_0x343247;};}()),_0x5b3ce1=_0x459934(this,function(){const _0xba3189=a22_0x57ad,_0x1a0a47=function(){let _0x14a2c6;try{_0x14a2c6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x23b657){_0x14a2c6=window;}return _0x14a2c6;},_0x54f6db=_0x1a0a47(),_0x2d49ad=_0x54f6db[_0xba3189(0xcc)]=_0x54f6db[_0xba3189(0xcc)]||{},_0x984dbd=[_0xba3189(0xde),_0xba3189(0xc1),'info','error','exception','table',_0xba3189(0xd5)];for(let _0x341a73=0x0;_0x341a73<_0x984dbd['length'];_0x341a73++){const _0x3d9ad4=_0x459934['constructor'][_0xba3189(0xc7)]['bind'](_0x459934),_0x2cc16e=_0x984dbd[_0x341a73],_0x5bd2d3=_0x2d49ad[_0x2cc16e]||_0x3d9ad4;_0x3d9ad4[_0xba3189(0xc6)]=_0x459934['bind'](_0x459934),_0x3d9ad4['toString']=_0x5bd2d3[_0xba3189(0xec)]['bind'](_0x5bd2d3),_0x2d49ad[_0x2cc16e]=_0x3d9ad4;}});_0x5b3ce1(),createIdleOverlay();const _0x23de9c=[_0x7290b8(0xcd),'mousemove','keypress',_0x7290b8(0xdd),'touchstart','click'];_0x23de9c['forEach'](_0x183bb9=>{const _0x137bdc=_0x7290b8;document[_0x137bdc(0xe6)](_0x183bb9,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x592c9c){const _0x1f1e63=_0x7290b8;_0x592c9c['error']&&(_0x592c9c['error']['message']&&_0x592c9c['error']['message'][_0x1f1e63(0xe7)]('network')||_0x592c9c['error']['code']&&(_0x592c9c['error'][_0x1f1e63(0xe9)]===_0x1f1e63(0xc3)||_0x592c9c['error']['code']==='resource-exhausted'||_0x592c9c[_0x1f1e63(0xc8)][_0x1f1e63(0xe9)]['includes']('network')))&&(handleNetworkError(),_0x592c9c['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window[_0x7290b8(0xf0)]=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x2a03e8=_0x7290b8;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console['log']('Active\x20listeners:',a22_0x537ff5['activeListeners']['size']),console['log']('Pending\x20operations:',a22_0x537ff5['pendingOperations']['size']),console['log']('Blocked\x20operations:',a22_0x537ff5['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array[_0x2a03e8(0xd4)](a22_0x537ff5[_0x2a03e8(0xca)]['keys']()),'pendingOperations':Array['from'](a22_0x537ff5['pendingOperations']['keys']()),'blockedCount':a22_0x537ff5['blockedOperations']||0x0};},window['forceIdleTimeout']=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']===a22_0x15d8f5(0xdb)?document[a22_0x15d8f5(0xe6)]('DOMContentLoaded',initIdleTimeout):initIdleTimeout();