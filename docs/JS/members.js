function a0_0x1b4a(){const _0x7129cf=['5058693NfLLfc','length','bind','info','7858873ojacks','data','slice','playersD3','2766882MNdWxy','userProfiles','prototype','error','forEach','delete','active','3929052NbhiAZ','batch','push','has','commit','ladders','8259147gLdykR','favoriteWeapon','16261yIwBXH','send','__proto__','1BXcPpS','params','10ChPyZp','set','nonParticipants','get','toString','userId','8uGNuDK','all','document','3508925yAkpDk','players','favoriteMap','Unknown','exception','8ARvWoe'];a0_0x1b4a=function(){return _0x7129cf;};return a0_0x1b4a();}function a0_0x5f20(_0x4a12f7,_0x558205){const _0x4fc875=a0_0x1b4a();return a0_0x5f20=function(_0x53b397,_0x39a2b7){_0x53b397=_0x53b397-0x140;let _0xeea6e2=_0x4fc875[_0x53b397];return _0xeea6e2;},a0_0x5f20(_0x4a12f7,_0x558205);}const a0_0x1fc141=a0_0x5f20;(function(_0xff0862,_0x298f83){const _0x4c742d=a0_0x5f20,_0x3aaec0=_0xff0862();while(!![]){try{const _0x16dc4f=-parseInt(_0x4c742d(0x166))/0x1*(parseInt(_0x4c742d(0x154))/0x2)+parseInt(_0x4c742d(0x14c))/0x3+-parseInt(_0x4c742d(0x14b))/0x4*(-parseInt(_0x4c742d(0x146))/0x5)+-parseInt(_0x4c742d(0x15b))/0x6+parseInt(_0x4c742d(0x163))/0x7*(-parseInt(_0x4c742d(0x143))/0x8)+-parseInt(_0x4c742d(0x161))/0x9+-parseInt(_0x4c742d(0x168))/0xa*(-parseInt(_0x4c742d(0x150))/0xb);if(_0x16dc4f===_0x298f83)break;else _0x3aaec0['push'](_0x3aaec0['shift']());}catch(_0x542e27){_0x3aaec0['push'](_0x3aaec0['shift']());}}}(a0_0x1b4a,0xce883));const a0_0x39a2b7=(function(){let _0x548b8e=!![];return function(_0x2ffb2e,_0x332df0){const _0x19d8da=_0x548b8e?function(){if(_0x332df0){const _0x567164=_0x332df0['apply'](_0x2ffb2e,arguments);return _0x332df0=null,_0x567164;}}:function(){};return _0x548b8e=![],_0x19d8da;};}()),a0_0x53b397=a0_0x39a2b7(this,function(){const _0x4ca2fb=a0_0x5f20;let _0x39aba5;try{const _0x4ef6af=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x39aba5=_0x4ef6af();}catch(_0x2617e3){_0x39aba5=window;}const _0xc242cf=_0x39aba5['console']=_0x39aba5['console']||{},_0x4bfc72=['log','warn',_0x4ca2fb(0x14f),'error',_0x4ca2fb(0x14a),'table','trace'];for(let _0x5a1f69=0x0;_0x5a1f69<_0x4bfc72[_0x4ca2fb(0x14d)];_0x5a1f69++){const _0x1adea6=a0_0x39a2b7['constructor'][_0x4ca2fb(0x156)]['bind'](a0_0x39a2b7),_0x4a3863=_0x4bfc72[_0x5a1f69],_0x24a8f2=_0xc242cf[_0x4a3863]||_0x1adea6;_0x1adea6[_0x4ca2fb(0x165)]=a0_0x39a2b7['bind'](a0_0x39a2b7),_0x1adea6[_0x4ca2fb(0x141)]=_0x24a8f2['toString'][_0x4ca2fb(0x14e)](_0x24a8f2),_0xc242cf[_0x4a3863]=_0x1adea6;}});a0_0x53b397();const functions=require('firebase-functions'),admin=require('firebase-admin');admin['initializeApp']();const db=admin['firestore']();exports['updateMembersList']=functions['firestore'][a0_0x1fc141(0x145)]('{collection}/{docId}')['onWrite'](async(_0x1123ae,_0x5adba6)=>{const _0x4de200=a0_0x1fc141,_0x83ac5b=_0x5adba6['params']['collection'],_0x323bc3=_0x5adba6[_0x4de200(0x167)]['docId'];if(!['players','playersD2',_0x4de200(0x153),_0x4de200(0x155),_0x4de200(0x16a)]['includes'](_0x83ac5b))return null;try{await rebuildMembersList(),console['log']('Successfully\x20updated\x20aggregated\x20members\x20list');}catch(_0x2a4d60){console[_0x4de200(0x157)]('Error\x20updating\x20members\x20list:',_0x2a4d60);}});async function rebuildMembersList(){const _0x5e2335=a0_0x1fc141,_0x4fc979=db['batch'](),[_0x2bbe1f,_0x43efcb,_0x53ff78,_0x1b628e,_0x532fcd]=await Promise[_0x5e2335(0x144)]([db['collection']('userProfiles')['get'](),db['collection'](_0x5e2335(0x147))[_0x5e2335(0x140)](),db['collection']('playersD2')['get'](),db['collection']('playersD3')['get'](),db['collection']('nonParticipants')['get']()]),_0x28d1d8=new Map();_0x2bbe1f['forEach'](_0x1350d9=>{const _0x46e9a6=_0x5e2335;_0x28d1d8['set'](_0x1350d9['id'],_0x1350d9[_0x46e9a6(0x151)]());});const _0xa14b59=new Map(),_0x14099f=(_0x455a68,_0x323bc2)=>{const _0x4db6bb=_0x5e2335;_0x455a68[_0x4db6bb(0x158)](_0x12f17c=>{const _0x518df1=_0x4db6bb,_0x1e54d3=_0x12f17c['data'](),_0x2b321a=_0x12f17c['id'];!_0xa14b59['has'](_0x2b321a)&&_0xa14b59['set'](_0x2b321a,{'userId':_0x2b321a,'username':_0x1e54d3['username']||_0x518df1(0x149),'ladders':[],'isNonParticipant':![]});const _0x4ab7da=_0xa14b59['get'](_0x2b321a);_0x4ab7da[_0x518df1(0x160)]['push']({'ladder':_0x323bc2,'elo':_0x1e54d3['eloRating']||0x4b0,'active':_0x1e54d3[_0x518df1(0x15a)]!==![]});});};_0x14099f(_0x43efcb,'D1'),_0x14099f(_0x53ff78,'D2'),_0x14099f(_0x1b628e,'D3'),_0x532fcd['forEach'](_0x1f5768=>{const _0x63dd39=_0x5e2335,_0x3d2ccf=_0x1f5768[_0x63dd39(0x151)](),_0x354b9b=_0x1f5768['id'];!_0xa14b59[_0x63dd39(0x15e)](_0x354b9b)&&_0x3d2ccf['username']&&_0xa14b59[_0x63dd39(0x169)](_0x354b9b,{'userId':_0x354b9b,'username':_0x3d2ccf['username'],'ladders':[],'isNonParticipant':!![]});});const _0x40b747=[];_0xa14b59['forEach']((_0x590d34,_0x48ddff)=>{const _0x53538b=_0x5e2335,_0x47e1d9=_0x28d1d8['get'](_0x48ddff)||{};let _0x82c98c=0x0,_0x2f5120=null;if(_0x590d34['ladders']['length']>0x0){const _0x37b07d=_0x590d34['ladders']['sort']((_0x4caf00,_0x3a168e)=>_0x3a168e['elo']-_0x4caf00['elo']);_0x82c98c=_0x37b07d[0x0]['elo'],_0x2f5120=_0x37b07d[0x0]['ladder'];}const _0x5650c9={'userId':_0x48ddff,'username':_0x590d34['username'],'profileImageUrl':_0x47e1d9['profileImageUrl']||null,'country':_0x47e1d9['country']||null,'motto':_0x47e1d9['motto']||null,'favoriteMap':_0x47e1d9[_0x53538b(0x148)]||null,'favoriteWeapon':_0x47e1d9[_0x53538b(0x162)]||null,'isNonParticipant':_0x590d34['isNonParticipant'],'ladders':_0x590d34['ladders'],'primaryLadder':_0x2f5120,'highestElo':_0x82c98c,'rank':getPlayerRank(_0x82c98c),'lastUpdated':admin['firestore']['FieldValue']['serverTimestamp']()};_0x40b747[_0x53538b(0x15d)](_0x5650c9);});const _0x18eae9=db['collection']('aggregatedMembers'),_0x427097=await _0x18eae9['get'](),_0x51aa7c=[];_0x427097['forEach'](_0x4dd225=>{const _0x1301c3=_0x5e2335;_0x51aa7c['push'](_0x4dd225['ref'][_0x1301c3(0x159)]());}),await Promise['all'](_0x51aa7c);const _0x260a62=0x1f4,_0x226789=[];for(let _0x54ecad=0x0;_0x54ecad<_0x40b747['length'];_0x54ecad+=_0x260a62){const _0x453586=db[_0x5e2335(0x15c)](),_0x5ddf64=_0x40b747[_0x5e2335(0x152)](_0x54ecad,_0x54ecad+_0x260a62);_0x5ddf64['forEach'](_0x1ea22f=>{const _0x4f56a3=_0x5e2335,_0x21cb8d=_0x18eae9['doc'](_0x1ea22f[_0x4f56a3(0x142)]);_0x453586['set'](_0x21cb8d,_0x1ea22f);}),_0x226789['push'](_0x453586[_0x5e2335(0x15f)]());}await Promise['all'](_0x226789);}function getPlayerRank(_0xa26bf5){if(_0xa26bf5>=0x7d0)return'emerald';if(_0xa26bf5>=0x708)return'gold';if(_0xa26bf5>=0x640)return'silver';if(_0xa26bf5>=0x578)return'bronze';return'unranked';}exports['rebuildMembersListManual']=functions['https']['onRequest'](async(_0x119245,_0x58b01c)=>{const _0x5ca52e=a0_0x1fc141;try{await rebuildMembersList(),_0x58b01c['status'](0xc8)['send']('Members\x20list\x20rebuilt\x20successfully');}catch(_0x4723c3){console[_0x5ca52e(0x157)]('Error\x20rebuilding\x20members\x20list:',_0x4723c3),_0x58b01c['status'](0x1f4)[_0x5ca52e(0x164)]('Error\x20rebuilding\x20members\x20list');}});