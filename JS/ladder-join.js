(function(a,b){const z=a25b,c=a();while(!![]){try{const d=parseInt(z(0x19b))/0x1*(-parseInt(z(0x193))/0x2)+parseInt(z(0x1a1))/0x3*(-parseInt(z(0x1a6))/0x4)+-parseInt(z(0x1ab))/0x5+parseInt(z(0x19a))/0x6+-parseInt(z(0x192))/0x7*(parseInt(z(0x18b))/0x8)+-parseInt(z(0x19c))/0x9+parseInt(z(0x1bc))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a25a,0x4839b));import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';function a25a(){const J=['zdeTC3DPDgnO','m2Pqt3z2sq','sM9PBMLUzYa','y2XHC3noyw1L','igXHzgrLCI4','CxvLCNLtzwXLy3rVCKfSBa','mtG0mtq2nfnPBg9uuq','rxjYB3iGy2HLy2TPBMCG','B25JBgLJAW','zg9JCW','BgfKzgvYlwPVAw4TC3rHDhvZ','mJKWntC1meXzy3zxrq','Dgv4DenVBNrLBNq','z2v0swruB2TLBG','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguG','zgLZywjSzwq','CMvSB2fK','zgvZyW','zgLZCgXHEq','rxjYB3iGAM9PBMLUzYbSywrKzxi6ia','CgXHEwvYC0qY','Dg9mB3DLCKnHC2u','yMXVy2S','rfvpuW','igXHzgrLCIeGvgHLihbHz2uGD2LSBcbYzwzYzxnOlI4U','rxjYB3iGy2HLy2TPBMCGBgfKzgvYihn0yxr1CZO','u3vJy2vZC2z1BgX5igPVAw5Lzcb0AguGrhvVCYbSywrKzxiHifLVDsbJyw4GBM93igzVCM0GDgvHBxmGD2L0AcbVDgHLCIbWBgf5zxjZlIbuAguGCgfNzsb3AwXSihjLzNjLC2GUlI4','Dg9vChbLCKnHC2u','mJy1nZC3otbdExjHyK0','q2HLy2TPBMCGDxnLCIbZDgf0DxmGzM9YigXHzgrLCJO','BM9Uzq','CgXHEwvYC0nurG','DwLK','BM9UugfYDgLJAxbHBNrZ','BgfKzgvYlwPVAw4TC3rHDhvZigvYCM9Y','z2v0rwXLBwvUDej5swq','AM9PBI11C2vYBMfTzs1PBNb1Da','lcbKzwzHDwX0Aw5NihrVieqX','AM9PBI1SywrKzxiTyNv0Dg9U','Cg9ZAxrPB24','Bg9N','igXHzgrLCI4UlG','y3vYCMvUDfvZzxi','ww91igfYzsbHBhjLywr5ihbHCNqGB2yGDgHLia','DgfYz2v0','zxjYB3i','D2fYBG','ywrKrxzLBNrmAxn0zw5LCG','zxHPC3rZ','mZi4y2jLreni','C3bSAxq','q1rg','DgLUEs1QB2LUlwj1DhrVBG','zw1WDhK','CgXHEwvYC0qZ','BgfKzgvYlwPVAw4TChjVBxb0','oda4nJrHB3fQwNK','mta0mJCZmNbRt2vJCa','iIb0BYbJB25MAxjTlG','zgf0yq','C3r5Bgu','qxv0AgvUDgLJyxrPB24GzMfPBgvKlIbqBgvHC2uGC2LNBIbPBIbHz2fPBI4','DMfSDwu','zw1HAwW','oty1oti4rvzdr1rj','mu5cywjTtq','ndm3nZC2mNLVzuXzDq','ugXLyxnLigvUDgvYihLVDxiGDxnLCM5HBwuGDg8Gy29UzMLYBs4','DxnLCM5HBwu','CgXHEwvYCW'];a25a=function(){return J;};return a25a();}document['addEventListener']('DOMContentLoaded',()=>{const A=a25b,a=document['getElementById'](A(0x1a0)),b=document[A(0x17d)]('d2-switch');console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!a),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!b);function c(){const B=A;document[B(0x1a5)]('input[name=\x22ladder\x22]')['forEach'](e=>{e['addEventListener']('change',f=>{const C=a25b;f['target']['checked']&&(currentLadder=f[C(0x186)][C(0x198)],console[C(0x182)]('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}c();const d=document['getElementById'](A(0x180));d&&d[A(0x189)]('click',handleJoinLadder),onAuthStateChanged(auth,e=>{const D=A;if(e)checkUserLadderStatus();else{const f=document[D(0x17d)]('ladder-join-prompt');f&&(f[D(0x196)][D(0x1b2)]=D(0x1be));}});});function getCollectionName(a){const E=a25b;switch(a?.[E(0x1bb)]()){case'D1':return'players';case'D2':return E(0x1b4);case'D3':return'playersD3';case'DUOS':case'DUO':return'playersDuos';case E(0x18d):return E(0x179);default:console[E(0x188)]('Unknown\x20ladder\x20type:\x20'+a+E(0x17f));return E(0x19f);}}async function checkUserLadderStatus(){const F=a25b;console[F(0x182)](F(0x1bd),currentLadder);const a=auth[F(0x184)],b=document[F(0x17d)](F(0x191)),c=document['getElementById']('join-ladder-type'),d=document['getElementById'](F(0x18e));if(!a||!a[F(0x17a)]||!b||!c||!d){if(b)b[F(0x196)][F(0x1b2)]='none';if(d)d[F(0x196)]['display']=F(0x1be);return;}try{try{await a[F(0x1ad)](![]);}catch(h){console[F(0x187)]('Authentication\x20verification\x20failed:',h),b[F(0x196)]['display']='none',d[F(0x196)]['display']='none';return;}const e=getCollectionName(currentLadder),f=doc(db,e,a[F(0x17a)]),g=await getDoc(f);if(g[F(0x18a)]())b[F(0x196)]['display']='none',d[F(0x196)][F(0x1b2)]=F(0x1be);else{b[F(0x196)][F(0x1b2)]=F(0x1be),d[F(0x196)][F(0x1b2)]=F(0x1b6),c[F(0x1ac)]=currentLadder,d[F(0x1a8)]=()=>{const G=F;b['style'][G(0x1b2)]===G(0x1b6)?b['style'][G(0x1b2)]='none':b['style'][G(0x1b2)]=G(0x1b6);};const i=document[F(0x17d)](F(0x17e)),j=document['getElementById']('ladder-join-status');if(i)i['value']='';j&&(j[F(0x1ac)]='',j['className']='ladder-join-status');}}catch(k){console['error'](F(0x1b9),k),b['style'][F(0x1b2)]='none',d[F(0x196)]['display']=F(0x1be);}}function a25b(a,b){const c=a25a();return a25b=function(d,e){d=d-0x179;let f=c[d];if(a25b['jAEjfJ']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a25b['AdUdqw']=g,a=arguments,a25b['jAEjfJ']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a25b['AdUdqw'](f),a[i]=f):f=j,f;},a25b(a,b);}async function handleJoinLadder(){const H=a25b,a=auth['currentUser'],b=document['getElementById'](H(0x180)),c=document['getElementById'](H(0x1aa)),d=document[H(0x17d)]('join-username-input');if(!a||!a['uid']){c['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',c['className']=H(0x17c);return;}try{await a['getIdToken'](!![]);}catch(e){console['error']('Authentication\x20error:',e),c[H(0x1ac)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',c['className']='ladder-join-status\x20error';return;}if(!d||!d[H(0x198)]['trim']()){c['textContent']=H(0x19d),c[H(0x1a3)]=H(0x17c);return;}try{b[H(0x1af)]=!![],c['textContent']='Verifying\x20username...',c['className']='ladder-join-status\x20loading';let f='',g=null;const h=[H(0x19f),'playersD2',H(0x190),'playersDuos','playersCTF',H(0x17b)];for(const s of h){try{const t=doc(db,s,a[H(0x17a)]),u=await getDoc(t);if(u['exists']()){g=u[H(0x195)]();if(g[H(0x19e)]){f=g[H(0x19e)];break;}}}catch(v){console['error'](H(0x1a7)+s+':',v);}}!f&&a[H(0x199)]&&(f=a[H(0x199)][H(0x18c)]('@')[0x0]);if(!f){c[H(0x1ac)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',c['className']='ladder-join-status\x20error',b['disabled']=![];return;}const i=d['value']['trim']();if(f&&i['toLowerCase']()!==f[H(0x1b5)]()){c['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+f+H(0x194),c[H(0x1a3)]=H(0x17c),b['disabled']=![];return;}c['textContent']=H(0x1a2)+currentLadder+H(0x183);const j=getCollectionName(currentLadder),k=doc(db,j,a[H(0x17a)]),l=await getDoc(k);if(l['exists']()){c[H(0x1ac)]=H(0x185)+currentLadder+H(0x1a4),c[H(0x1a3)]=H(0x17c),b['disabled']=![];return;}try{await a[H(0x1ad)](!![]);}catch(w){c['textContent']=H(0x197),c[H(0x1a3)]=H(0x17c),b[H(0x1af)]=![];return;}const m=f,n=collection(db,j),o=query(n,orderBy('position',H(0x1b1)),limit(0x1)),p=await getDocs(o);let q=0x1;if(!p[H(0x18f)]){const x=p[H(0x1a9)][0x0][H(0x195)]();q=(x[H(0x181)]||0x0)+0x1;}const r={'username':m,'email':a['email'],'eloRating':0x4b0,'position':q,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===H(0x1b7)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(k,r),currentLadder===H(0x1b7)?c['textContent']=H(0x1ba):c[H(0x1ac)]=H(0x1ae)+currentLadder+H(0x1b8),c[H(0x1a3)]='ladder-join-status\x20success',setTimeout(()=>{const I=H;window['location'][I(0x1b0)]();},0x7d0);}catch(y){console['error']('Error\x20joining\x20ladder:',y),c['textContent']=H(0x1b3)+y['message'],c['className']='ladder-join-status\x20error',b[H(0x1af)]=![];}}