const a0_0x3a4d28=a0_0x2c10;(function(_0x516ac4,_0x3c67b5){const _0x55f655=a0_0x2c10,_0x223a85=_0x516ac4();while(!![]){try{const _0x3f6ff5=-parseInt(_0x55f655(0x188))/0x1*(-parseInt(_0x55f655(0x1e2))/0x2)+-parseInt(_0x55f655(0x1d5))/0x3+parseInt(_0x55f655(0x1cc))/0x4*(-parseInt(_0x55f655(0x18b))/0x5)+-parseInt(_0x55f655(0x1ea))/0x6+-parseInt(_0x55f655(0x217))/0x7+parseInt(_0x55f655(0x181))/0x8*(parseInt(_0x55f655(0x175))/0x9)+parseInt(_0x55f655(0x201))/0xa*(parseInt(_0x55f655(0x1fc))/0xb);if(_0x3f6ff5===_0x3c67b5)break;else _0x223a85['push'](_0x223a85['shift']());}catch(_0x5defd8){_0x223a85['push'](_0x223a85['shift']());}}}(a0_0x8f17,0xb7a2d));const a0_0x13d912=(function(){let _0x2a5789=!![];return function(_0x509faa,_0x55df9b){const _0x73f7ed=_0x2a5789?function(){if(_0x55df9b){const _0x240529=_0x55df9b['apply'](_0x509faa,arguments);return _0x55df9b=null,_0x240529;}}:function(){};return _0x2a5789=![],_0x73f7ed;};}()),a0_0x11e2b2=a0_0x13d912(this,function(){const _0x37c877=a0_0x2c10,_0x4deffd=function(){const _0x42707d=a0_0x2c10;let _0x1be228;try{_0x1be228=Function(_0x42707d(0x214)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x409911){_0x1be228=window;}return _0x1be228;},_0x463a69=_0x4deffd(),_0x4b135a=_0x463a69['console']=_0x463a69['console']||{},_0x170175=['log','warn','info','error','exception','table','trace'];for(let _0xfd8e92=0x0;_0xfd8e92<_0x170175['length'];_0xfd8e92++){const _0x3a798=a0_0x13d912[_0x37c877(0x1d6)]['prototype'][_0x37c877(0x1f3)](a0_0x13d912),_0x3b6d28=_0x170175[_0xfd8e92],_0x2a003f=_0x4b135a[_0x3b6d28]||_0x3a798;_0x3a798['__proto__']=a0_0x13d912['bind'](a0_0x13d912),_0x3a798['toString']=_0x2a003f[_0x37c877(0x1b2)]['bind'](_0x2a003f),_0x4b135a[_0x3b6d28]=_0x3a798;}});a0_0x11e2b2();import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getFirestore,doc,getDoc,setDoc,updateDoc,collection,addDoc,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{clearTokenCache}from'./tokens.js';const auth=getAuth(),db=getFirestore(),THEMES={'default':{'price':0x0,'name':'Classic\x20RDL','description':'Rock\x20texture\x20with\x20a\x20sleek\x20nav\x20and\x20footer'},'contrast':{'price':0x0,'name':'Nightlight','description':'For\x20the\x20late-nights.'},'purple':{'price':0x96,'name':'Purple','description':'Can\x27t\x20get\x20enough'},'ocean':{'price':0x12c,'name':a0_0x3a4d28(0x1b7),'description':'This\x20one\x20is\x20really\x20pretty'},'cyberpunk':{'price':0x190,'name':a0_0x3a4d28(0x18e),'description':'This\x20theme\x20makes\x20me\x20happy'},'volcanic':{'price':0x1f4,'name':a0_0x3a4d28(0x1df),'description':'For\x20the\x20angry\x20type.'},'gold':{'price':0x320,'name':'Gold','description':a0_0x3a4d28(0x1be)},'emerald':{'price':0x3e8,'name':'Emerald','description':a0_0x3a4d28(0x21a)},'cockpit':{'price':0x4b0,'name':a0_0x3a4d28(0x179),'description':'is\x20that...\x20Pfunk?'}},TOKENS={'pwr01':{'price':0x64,'name':'Energy','description':'Enhanced\x20energy\x20generation\x20unit','image':a0_0x3a4d28(0x1ae),'category':'powerup'},'fan':{'price':0x96,'name':'Fan','description':a0_0x3a4d28(0x1b4),'image':'../images/tokens/Fan.gif','category':'fun'},'marker':{'price':0xfa,'name':a0_0x3a4d28(0x1fd),'description':'Leave\x20your\x20mark\x20on\x20the\x20leaderboard.','image':'../images/tokens/Marker.gif','category':'fun'},'laser':{'price':0x12c,'name':'Laser','description':'Classic\x20laser\x20weapon\x20token.','image':'../images/tokens/Laser.gif','category':'weapon'},'pbomb':{'price':0x15e,'name':a0_0x3a4d28(0x1a9),'description':'Strategic\x20explosive\x20device','image':'../images/tokens/subgame/pbomb.gif','category':a0_0x3a4d28(0x17d)},'fusion':{'price':0x15e,'name':'Fusion\x20Cannon','description':a0_0x3a4d28(0x1de),'image':a0_0x3a4d28(0x1ca),'category':'weapon'},'lock':{'price':0x1c2,'name':'Lock','description':'Lock\x20in\x20your\x20victory.','image':'../images/tokens/Lock.gif','category':a0_0x3a4d28(0x1f9)},'blob01':{'price':0x1f4,'name':a0_0x3a4d28(0x207),'description':'A\x20mysterious\x20purple\x20blob\x20token','image':'../images/tokens/blob01.gif','category':'blob'},'plasma':{'price':0x1f4,'name':'Plasma\x20Cannon','description':'High-powered\x20plasma\x20cannon\x20token.','image':'../images/tokens/Plasma.gif','category':a0_0x3a4d28(0x17d)},'cloak':{'price':0x1f4,'name':'Cloaking\x20Device','description':a0_0x3a4d28(0x193),'image':'../images/tokens/cloak.gif','category':a0_0x3a4d28(0x183)},'pwr02':{'price':0x258,'name':'Shield\x20Orb','description':'Advanced\x20energy\x20storage\x20system','image':'../images/tokens/subgame/pwr02.gif','category':'powerup'},'mercury':{'price':0x258,'name':'Mercury\x20Missile','description':a0_0x3a4d28(0x177),'image':a0_0x3a4d28(0x202),'category':a0_0x3a4d28(0x17d)},'plasmablobl':{'price':0x258,'name':'Plasma\x20Blob','description':'A\x20mysterious\x20plasma\x20blob.','image':a0_0x3a4d28(0x1db),'category':'blob'},'smissile':{'price':0x28a,'name':a0_0x3a4d28(0x187),'description':'Intelligent\x20targeting\x20system','image':'../images/tokens/subgame/smissile.gif','category':'weapon'},'smartmine':{'price':0x2ee,'name':'Smart\x20Mine','description':a0_0x3a4d28(0x1b6),'image':'../images/tokens/Smartmine.gif','category':'weapon'},'mmissile':{'price':0x320,'name':'Mega\x20Missile','description':'Heavy\x20ordinance\x20for\x20tough\x20situations','image':'../images/tokens/subgame/mmissile.gif','category':a0_0x3a4d28(0x17d)},'gauge18':{'price':0x320,'name':a0_0x3a4d28(0x1cf),'description':'Monitor\x20your\x20ship\x27s\x20energy\x20levels','image':'../images/tokens/gauge18.gif','category':a0_0x3a4d28(0x198)},'extralife':{'price':0x320,'name':'Extra\x20Life','description':'A\x20rare\x20extra\x20life\x20token.','image':'../images/tokens/Extralife.gif','category':a0_0x3a4d28(0x183)},'hostage':{'price':0x3b6,'name':'Hostage','description':'Rescue\x20the\x20hostage\x20for\x20bonus\x20points.','image':'../images/tokens/Hostage.gif','category':'special'},'phoenix':{'price':0x3b6,'name':'Phoenix\x20Cannon','description':'Fiery\x20phoenix\x20cannon\x20token.','image':'../images/tokens/Phoenix.gif','category':'weapon'},'blob02':{'price':0x3e8,'name':a0_0x3a4d28(0x221),'description':'Another\x20enigmatic\x20blob\x20creature','image':'../images/tokens/blob02.gif','category':a0_0x3a4d28(0x1e4)},'invuln':{'price':0x5dc,'name':'Invulnerability','description':'Become\x20invincible\x20for\x20a\x20short\x20time.','image':'../images/tokens/Invuln.gif','category':a0_0x3a4d28(0x20a)},'blob03':{'price':0x7d0,'name':'Blob\x20Token\x203','description':a0_0x3a4d28(0x1f1),'image':'../images/tokens/blob03.gif','category':a0_0x3a4d28(0x1e4)},'reactor':{'price':0x7d0,'name':'Reactor','description':'The\x20heart\x20of\x20every\x20mine.','image':'../images/tokens/Reactor.gif','category':'special'},'pyro':{'price':0xbb8,'name':'Pyro','description':a0_0x3a4d28(0x1bf),'image':'../images/tokens/Pyro.gif','category':'ship'}};let userData={'points':0x0,'inventory':[],'isAdmin':![]},storeContainer,pointsDisplay,authWarning;document['addEventListener']('DOMContentLoaded',()=>{const _0x5edab9=a0_0x3a4d28;console['log']('üè™\x20Redeem\x20store\x20initializing...'),storeContainer=document[_0x5edab9(0x1dc)]('store-content'),pointsDisplay=document['getElementById'](_0x5edab9(0x1c2)),authWarning=document[_0x5edab9(0x1dc)](_0x5edab9(0x1d7)),initAuthListener(),buildStoreUI();});function initAuthListener(){onAuthStateChanged(auth,async _0x443ca7=>{const _0x104160=a0_0x2c10;if(_0x443ca7){console['log']('‚úÖ\x20User\x20authenticated:',_0x443ca7['displayName']||_0x443ca7['email']);if(authWarning)authWarning['style']['display']='none';if(storeContainer)storeContainer['style']['display']=_0x104160(0x208);await loadUserData(_0x443ca7),updateThemeButtons(),updateTokenButtons();}else{console[_0x104160(0x205)]('‚ùå\x20User\x20not\x20authenticated');if(authWarning)authWarning['style'][_0x104160(0x1a5)]='block';if(storeContainer)storeContainer['style']['display']='none';userData={'points':0x0,'inventory':[],'isAdmin':![]},window[_0x104160(0x212)]=![];}});}async function loadUserData(_0xc420d0){const _0x2f31fe=a0_0x3a4d28;try{const _0x2346dc=doc(db,_0x2f31fe(0x21d),_0xc420d0['uid']),_0xaec8=await getDoc(_0x2346dc);if(_0xaec8['exists']()){const _0x191827=_0xaec8['data']();userData={'points':_0x191827['points']||0x0,'inventory':_0x191827['inventory']||[],'isAdmin':_0x191827['isAdmin']||![],'equippedToken':_0x191827['equippedToken']||null},pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x2f31fe(0x1bd)]()),window['isUserAdmin']=userData['isAdmin'],userData['isAdmin']&&(console['log']('üëë\x20Admin\x20controls\x20enabled'),window[_0x2f31fe(0x1b3)](new CustomEvent(_0x2f31fe(0x1fb),{'detail':{'isAdmin':!![]}}))),console['log']('User\x20data\x20loaded\x20-\x20Points:\x20'+userData['points']+',\x20Inventory:\x20'+userData['inventory']['length']+'\x20items,\x20Equipped:\x20'+(userData['equippedToken']||_0x2f31fe(0x1f5)));}else await setDoc(_0x2346dc,{'points':0x0,'inventory':[],'equippedToken':null,'createdAt':serverTimestamp(),'username':_0xc420d0['displayName']||_0xc420d0[_0x2f31fe(0x1a0)]?.['split']('@')[0x0]||'User'}),userData={'points':0x0,'inventory':[],'isAdmin':![],'equippedToken':null},pointsDisplay&&(pointsDisplay[_0x2f31fe(0x1b9)]='0'),window['isUserAdmin']=![],console['log']('New\x20user\x20profile\x20created');}catch(_0x4fe372){console[_0x2f31fe(0x19e)](_0x2f31fe(0x192),_0x4fe372);}}function userOwnsTheme(_0x339817){const _0x84ebbc=a0_0x3a4d28;if(THEMES[_0x339817]?.['price']===0x0)return!![];return userData['inventory'][_0x84ebbc(0x196)]('theme_'+_0x339817);}function userOwnsToken(_0x26b3c0){const _0x20dde6=a0_0x3a4d28;return userData['inventory']['includes'](_0x20dde6(0x1a7)+_0x26b3c0);}function userHasTokenEquipped(_0x4bd7b5){const _0x19a788=a0_0x3a4d28;return userData[_0x19a788(0x1c5)]===_0x4bd7b5;}function a0_0x2c10(_0x3e9f66,_0x5d536f){const _0x2efffd=a0_0x8f17();return a0_0x2c10=function(_0x11e2b2,_0x13d912){_0x11e2b2=_0x11e2b2-0x172;let _0x5ef668=_0x2efffd[_0x11e2b2];return _0x5ef668;},a0_0x2c10(_0x3e9f66,_0x5d536f);}function getEquippedToken(){const _0x4e876c=a0_0x3a4d28;return userData[_0x4e876c(0x1c5)]||null;}async function purchaseTheme(_0x34d417){const _0x1d92ca=a0_0x3a4d28,_0x21a889=auth['currentUser'];if(!_0x21a889)return showMessage(_0x1d92ca(0x1e3),'error'),![];const _0x3e3ed5=THEMES[_0x34d417];if(!_0x3e3ed5)return console['error']('Theme\x20'+_0x34d417+'\x20not\x20found'),![];if(userData['points']<_0x3e3ed5[_0x1d92ca(0x1d8)])return showMessage(_0x1d92ca(0x172)+(_0x3e3ed5['price']-userData[_0x1d92ca(0x1ba)])+_0x1d92ca(0x1ef),'error'),![];if(userOwnsTheme(_0x34d417))return showMessage('You\x20already\x20own\x20the\x20'+_0x3e3ed5['name']+'\x20theme','info'),![];try{return await processPurchase(_0x34d417,_0x3e3ed5,'theme');}catch(_0x3a2539){return console['error'](_0x1d92ca(0x1f6),_0x3a2539),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}async function purchaseToken(_0x3a1efa){const _0x340dd8=a0_0x3a4d28,_0x507c60=auth['currentUser'];if(!_0x507c60)return showMessage(_0x340dd8(0x21c),_0x340dd8(0x19e)),![];const _0x4a4eb9=TOKENS[_0x3a1efa];if(!_0x4a4eb9)return console['error'](_0x340dd8(0x1fa)+_0x3a1efa+'\x20not\x20found'),![];if(userData['points']<_0x4a4eb9['price'])return showMessage(_0x340dd8(0x172)+(_0x4a4eb9['price']-userData['points'])+'\x20more\x20points.','error'),![];if(userOwnsToken(_0x3a1efa))return showMessage(_0x340dd8(0x178)+_0x4a4eb9['name']+'\x20token','info'),![];try{return await processPurchase(_0x3a1efa,_0x4a4eb9,'token');}catch(_0x38615f){return console[_0x340dd8(0x19e)]('Token\x20purchase\x20failed:',_0x38615f),showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error'),![];}}function a0_0x8f17(){const _0x3e2589=['Theme\x20system\x20not\x20found','inventory','background','toString','dispatchEvent','Show\x20your\x20support\x20with\x20this\x20fan\x20token.','\x20Points','A\x20cunning\x20explosive\x20device.','Blue','sale','textContent','points','function','div','toLocaleString','Only\x20the\x20best\x20get\x20this\x20one','The\x20iconic\x20Pyro-GX\x20ship.','‚úÖ\x20Token\x20','Please\x20sign\x20in\x20to\x20sell\x20tokens','user-points','current-theme','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','equippedToken','uid','‚úÖ\x20Equipped\x20token:\x20','closest','data','../images/tokens/subgame/fusion.gif','getCurrentTheme','4rtRxLL','visible','can-equip','R/Y/B\x20Keys','querySelector','unavailable','.token-sell-btn','\x20theme\x20purchased!','Successfully\x20purchased\x20','1852935wqjqFG','constructor','auth-warning','price','Insufficient\x20points','RedeemStore','../images/tokens/Plasmablobl.gif','getElementById','map','Devastating\x20fusion\x20weapon\x20technology','Red','can-afford','store-message','31190UtqBcp','Please\x20sign\x20in\x20to\x20purchase\x20themes','blob','name','Failed\x20to\x20sell\x20token:\x20','‚úÖ\x20Purchased\x20','floor','displayLadder','8252460OEVoMe','addEventListener','cannot-afford','Failed\x20to\x20unequip\x20token:\x20','click','\x20more\x20points.','Only\x20admins\x20can\x20sell\x20tokens','The\x20final\x20blob\x20in\x20the\x20collection','innerHTML','bind','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22theme-select-btn\x20purchase-btn\x22>Select\x20Theme</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','none','Theme\x20purchase\x20failed:','isAdmin','‚úÖ\x20Token\x20unequipped','fun','Token\x20','adminStatusChanged','13114046YCYzDC','Marker','Need\x20','dataset','\x20token\x20for\x20','20BLtTmB','../images/tokens/Mercury.gif','.theme-select-btn','Current\x20Theme','log','token','Blob\x20Token\x201','block','style','powerup','Equipped','permission-denied','Permission\x20denied.\x20Token\x20may\x20still\x20be\x20equipped\x20-\x20check\x20the\x20ladder.','\x20points\x20(50%\x20refund)','[data-token]','pointer','forEach','isUserAdmin','apply-theme','return\x20(function()\x20','üè™\x20Redeem\x20store\x20loaded','\x20not\x20found','1573859NAnPjg','cursor','tokenId','Emerald\x20City!','userTokens','Please\x20sign\x20in\x20to\x20purchase\x20tokens','userProfiles','var(--success-color,\x20#4CAF50)','?\x20This\x20will\x20unequip\x20your\x20current\x20token.','switchTheme','Blob\x20Token\x202','0.7','Not\x20enough\x20points.\x20You\x20need\x20','equipped','classList','243rEsZxb','tokens','Fast\x20and\x20furious\x20missile\x20token.','You\x20already\x20own\x20the\x20','Cockpit','\x20points\x20to\x20purchase\x20this\x20theme','message','success','weapon','code','You\x20already\x20own\x20this\x20','className','153888TDpRXo','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-palette\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>','special','\x20is\x20already\x20your\x20current\x20theme','displayName','Failed\x20to\x20equip\x20token:\x20','Smart\x20Missile','11VJMaBT','Token\x20unequip\x20failed:','Tokens\x20container\x20not\x20found','526120xccvGF','.token-select-btn','\x20points','Yellow\x20Orange','createElement','remove','\x22\x20alt=\x22','Error\x20loading\x20user\x20data:','Become\x20one\x20with\x20the\x20shadows','Token\x20sale\x20failed:','username','includes','\x20pts)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','equipment','!\x20Use\x20the\x20\x22Equip\x22\x20button\x20to\x20show\x20it\x20on\x20the\x20ladder.','info','appendChild','owned','Token\x20unequipped!\x20Ladder\x20will\x20refresh\x20shortly.','error','You\x20must\x20purchase\x20this\x20theme\x20first','email','currentUser','description','Equip','confirm','display','querySelectorAll','token_','FREE','Proximity\x20Bomb','add','preventDefault','üîÑ\x20Refreshing\x20ladder\x20to\x20show\x20equipped\x20token','store-item\x20token-item','../images/tokens/subgame/pwr01.gif'];a0_0x8f17=function(){return _0x3e2589;};return a0_0x8f17();}async function processPurchase(_0x3441d9,_0x2f80e9,_0x16355a){const _0x34f691=a0_0x3a4d28,_0x3f7e1=auth['currentUser'];try{const _0x4afbc5=doc(db,_0x34f691(0x21d),_0x3f7e1['uid']),_0x519687=await getDoc(_0x4afbc5);if(!_0x519687['exists']())return showMessage('User\x20profile\x20not\x20found','error'),![];const _0xde8bed=_0x519687[_0x34f691(0x1c9)](),_0x19aaae=_0xde8bed['points']||0x0,_0x13d002=_0xde8bed['inventory']||[];if(_0x19aaae<_0x2f80e9[_0x34f691(0x1d8)])return showMessage(_0x34f691(0x1d9),'error'),![];if(_0x13d002['includes'](_0x16355a+'_'+_0x3441d9))return showMessage(_0x34f691(0x17f)+_0x16355a,'info'),![];const _0x532238=_0x19aaae-_0x2f80e9[_0x34f691(0x1d8)],_0x49c94d=[..._0x13d002,_0x16355a+'_'+_0x3441d9];await updateDoc(_0x4afbc5,{'points':_0x532238,'inventory':_0x49c94d,'lastPurchase':serverTimestamp()});if(_0x16355a==='token')try{const _0x202102=doc(db,_0x34f691(0x21b),_0x3f7e1[_0x34f691(0x1c6)]),_0x1623c9=await getDoc(_0x202102);let _0xc0ff45=[];_0x1623c9['exists']()&&(_0xc0ff45=_0x1623c9[_0x34f691(0x1c9)]()['tokens']||[]);const _0x1d4b13=new Date();_0xc0ff45['push']({'tokenId':_0x3441d9,'tokenName':_0x2f80e9[_0x34f691(0x1e5)],'tokenImage':_0x2f80e9['image'],'category':_0x2f80e9['category'],'purchasedAt':_0x1d4b13,'price':_0x2f80e9['price'],'equipped':![]}),await setDoc(_0x202102,{'userId':_0x3f7e1['uid'],'username':_0xde8bed[_0x34f691(0x195)]||_0x3f7e1[_0x34f691(0x185)]||'Unknown','tokens':_0xc0ff45,'lastUpdated':serverTimestamp()},{'merge':!![]}),typeof clearTokenCache==='function'&&clearTokenCache(_0x3f7e1['uid']),console[_0x34f691(0x205)](_0x34f691(0x1c0)+_0x3441d9+'\x20saved\x20to\x20userTokens\x20collection\x20(not\x20equipped)');}catch(_0x31c092){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20purchase\x20completed:',_0x31c092),_0x31c092['code']==='permission-denied'?console[_0x34f691(0x205)]('üîß\x20Token\x20permissions\x20issue\x20detected,\x20but\x20purchase\x20was\x20successful'):console['error']('Unexpected\x20token\x20error:',_0x31c092);}try{await addDoc(collection(db,'transactions'),{'userId':_0x3f7e1['uid'],'userEmail':_0x3f7e1[_0x34f691(0x1a0)],'itemId':_0x16355a+'_'+_0x3441d9,'itemTitle':_0x2f80e9['name'],'price':_0x2f80e9['price'],'type':'purchase','category':_0x16355a,'timestamp':serverTimestamp()});}catch(_0x37d048){console['warn']('Transaction\x20logging\x20failed,\x20but\x20purchase\x20was\x20successful:',_0x37d048);}return userData[_0x34f691(0x1ba)]=_0x532238,userData['inventory']=_0x49c94d,pointsDisplay&&(pointsDisplay['textContent']=userData['points'][_0x34f691(0x1bd)]()),updateTokenButtons(),_0x16355a==='theme'&&updateThemeButtons(),console['log'](_0x34f691(0x1e7)+_0x2f80e9[_0x34f691(0x1e5)]+'\x20for\x20'+_0x2f80e9['price']+'\x20points'),showMessage(_0x34f691(0x1d4)+_0x2f80e9[_0x34f691(0x1e5)]+_0x34f691(0x199),'success'),!![];}catch(_0x2573ec){console[_0x34f691(0x19e)]('Purchase\x20processing\x20error:',_0x2573ec);if(_0x2573ec['code']===_0x34f691(0x20c))showMessage('Permission\x20denied.\x20Please\x20try\x20again\x20or\x20contact\x20support.','error');else{if(_0x2573ec['code']===_0x34f691(0x1d1))showMessage('Service\x20temporarily\x20unavailable.\x20Please\x20try\x20again.','error');else _0x2573ec['code']==='unauthenticated'?showMessage('Please\x20sign\x20in\x20again\x20to\x20complete\x20purchase.','error'):showMessage('Purchase\x20failed.\x20Please\x20try\x20again.','error');}return![];}}async function equipToken(_0x34c84a){const _0x10c06e=a0_0x3a4d28,_0x58fe77=auth['currentUser'];if(!_0x58fe77)return showMessage('Please\x20sign\x20in\x20to\x20equip\x20tokens','error'),![];const _0x44440b=TOKENS[_0x34c84a];if(!_0x44440b)return console['error']('Token\x20'+_0x34c84a+'\x20not\x20found'),![];if(!userOwnsToken(_0x34c84a))return showMessage('You\x20must\x20own\x20this\x20token\x20to\x20equip\x20it','error'),![];try{const _0x340519=doc(db,'userProfiles',_0x58fe77[_0x10c06e(0x1c6)]);await updateDoc(_0x340519,{'equippedToken':_0x34c84a,'lastTokenEquip':serverTimestamp()});try{const _0x26d07f=doc(db,'userTokens',_0x58fe77['uid']),_0x384e83=await getDoc(_0x26d07f);if(_0x384e83['exists']()){const _0x2f34e4=_0x384e83['data'](),_0x54efd6=_0x2f34e4['tokens']||[],_0x7436d1=_0x54efd6['map'](_0x125c8a=>({..._0x125c8a,'equipped':_0x125c8a[_0x10c06e(0x219)]===_0x34c84a}));await updateDoc(_0x26d07f,{'tokens':_0x7436d1,'equippedToken':_0x34c84a,'lastUpdated':serverTimestamp()});}}catch(_0x28b652){console['warn']('Token\x20collection\x20update\x20had\x20an\x20issue,\x20but\x20equip\x20was\x20successful:',_0x28b652);}return userData['equippedToken']=_0x34c84a,typeof clearTokenCache==='function'&&(clearTokenCache(_0x58fe77[_0x10c06e(0x1c6)]),clearTokenCache()),setTimeout(()=>{const _0x3aa86a=_0x10c06e;window[_0x3aa86a(0x1e9)]&&typeof window['displayLadder']==='function'&&(console[_0x3aa86a(0x205)](_0x3aa86a(0x1ac)),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x3aa86a(0x1da)]['refreshUI']==='function'&&window['RedeemStore']['refreshUI']();},0x1f4),console['log'](_0x10c06e(0x1c7)+_0x44440b[_0x10c06e(0x1e5)]),showMessage(_0x44440b['name']+'\x20equipped!\x20Ladder\x20will\x20refresh\x20shortly.','success'),!![];}catch(_0x20a6bf){return console['error']('Token\x20equip\x20failed:',_0x20a6bf),_0x20a6bf[_0x10c06e(0x17e)]==='permission-denied'?showMessage(_0x10c06e(0x20d),'warning'):showMessage(_0x10c06e(0x186)+_0x20a6bf[_0x10c06e(0x17b)],'error'),![];}}async function unequipToken(){const _0x4f98a7=a0_0x3a4d28,_0x2e29be=auth['currentUser'];if(!_0x2e29be)return showMessage('Please\x20sign\x20in\x20to\x20unequip\x20tokens',_0x4f98a7(0x19e)),![];if(!userData[_0x4f98a7(0x1c5)])return showMessage('No\x20token\x20is\x20currently\x20equipped',_0x4f98a7(0x19a)),![];try{const _0x2e94a0=doc(db,_0x4f98a7(0x21d),_0x2e29be[_0x4f98a7(0x1c6)]);await updateDoc(_0x2e94a0,{'equippedToken':null,'lastTokenEquip':serverTimestamp()});const _0x21b08f=doc(db,'userTokens',_0x2e29be['uid']),_0x57421=await getDoc(_0x21b08f);if(_0x57421['exists']()){const _0x5797d5=_0x57421['data'](),_0x226d47=_0x5797d5['tokens']||[],_0xa55f6e=_0x226d47[_0x4f98a7(0x1dd)](_0x182ea7=>({..._0x182ea7,'equipped':![]}));await updateDoc(_0x21b08f,{'tokens':_0xa55f6e,'equippedToken':null,'lastUpdated':serverTimestamp()});}return userData['equippedToken']=null,typeof clearTokenCache==='function'&&(clearTokenCache(_0x2e29be['uid']),clearTokenCache()),setTimeout(()=>{const _0x2ad1a2=_0x4f98a7;window['displayLadder']&&typeof window[_0x2ad1a2(0x1e9)]==='function'&&(console['log']('üîÑ\x20Refreshing\x20ladder\x20to\x20remove\x20unequipped\x20token'),window['displayLadder'](!![])),window['RedeemStore']&&typeof window[_0x2ad1a2(0x1da)]['refreshUI']==='function'&&window[_0x2ad1a2(0x1da)]['refreshUI']();},0x1f4),console[_0x4f98a7(0x205)](_0x4f98a7(0x1f8)),showMessage(_0x4f98a7(0x19d),'success'),!![];}catch(_0x46fd43){return console['error'](_0x4f98a7(0x189),_0x46fd43),showMessage(_0x4f98a7(0x1ed)+_0x46fd43['message'],_0x4f98a7(0x19e)),![];}}async function sellToken(_0x3b89b8){const _0x2eb626=a0_0x3a4d28,_0x3c0ad9=auth['currentUser'];if(!_0x3c0ad9)return showMessage(_0x2eb626(0x1c1),_0x2eb626(0x19e)),![];if(!userData['isAdmin'])return showMessage(_0x2eb626(0x1f0),'error'),![];const _0xd11abe=TOKENS[_0x3b89b8];if(!_0xd11abe)return console['error'](_0x2eb626(0x1fa)+_0x3b89b8+'\x20not\x20found'),![];if(!userOwnsToken(_0x3b89b8))return showMessage('You\x20don\x27t\x20own\x20this\x20token','error'),![];try{const _0x14e02b=doc(db,'userProfiles',_0x3c0ad9['uid']),_0x54e456=await getDoc(_0x14e02b),_0x18113c=_0x54e456[_0x2eb626(0x1c9)](),_0x25e58a=Math['floor'](_0xd11abe['price']*0.5),_0x29e589=(_0x18113c['points']||0x0)+_0x25e58a,_0x3e37f4=(_0x18113c['inventory']||[])['filter'](_0x4cb6d1=>_0x4cb6d1!==_0x2eb626(0x1a7)+_0x3b89b8),_0x2352e2=_0x18113c['equippedToken']===_0x3b89b8?null:_0x18113c['equippedToken'];await updateDoc(_0x14e02b,{'points':_0x29e589,'inventory':_0x3e37f4,'equippedToken':_0x2352e2,'lastSale':serverTimestamp()});const _0x412e6d=doc(db,_0x2eb626(0x21b),_0x3c0ad9['uid']),_0x56a712=await getDoc(_0x412e6d);if(_0x56a712['exists']()){const _0x285494=_0x56a712['data'](),_0xab1b0c=_0x285494[_0x2eb626(0x176)]||[],_0x176f52=_0xab1b0c['filter'](_0x50c012=>_0x50c012[_0x2eb626(0x219)]!==_0x3b89b8);await updateDoc(_0x412e6d,{'tokens':_0x176f52,'equippedToken':_0x2352e2,'lastUpdated':serverTimestamp()});}return await addDoc(collection(db,'transactions'),{'userId':_0x3c0ad9['uid'],'userEmail':_0x3c0ad9[_0x2eb626(0x1a0)],'itemId':'token_'+_0x3b89b8,'itemTitle':_0xd11abe[_0x2eb626(0x1e5)],'refund':_0x25e58a,'originalPrice':_0xd11abe['price'],'type':_0x2eb626(0x1b8),'category':'token','timestamp':serverTimestamp()}),userData[_0x2eb626(0x1ba)]=_0x29e589,userData[_0x2eb626(0x1b0)]=_0x3e37f4,userData['equippedToken']=_0x2352e2,pointsDisplay&&(pointsDisplay['textContent']=userData[_0x2eb626(0x1ba)][_0x2eb626(0x1bd)]()),typeof clearTokenCache===_0x2eb626(0x1bb)&&clearTokenCache(_0x3c0ad9['uid']),console[_0x2eb626(0x205)]('‚úÖ\x20Sold\x20token\x20'+_0xd11abe['name']+'\x20for\x20'+_0x25e58a+_0x2eb626(0x18d)),showMessage('Sold\x20'+_0xd11abe['name']+'\x20for\x20'+_0x25e58a+_0x2eb626(0x20e),'success'),!![];}catch(_0x515063){return console['error'](_0x2eb626(0x194),_0x515063),showMessage(_0x2eb626(0x1e6)+_0x515063[_0x2eb626(0x17b)],_0x2eb626(0x19e)),![];}}function applyTheme(_0x1a4fd6){const _0x430ec5=a0_0x3a4d28;if(!userOwnsTheme(_0x1a4fd6))return showMessage(_0x430ec5(0x19f),'error'),![];return window['ThemeSystem']?(window['ThemeSystem'][_0x430ec5(0x220)](_0x1a4fd6),showMessage((THEMES[_0x1a4fd6]?.['name']||_0x1a4fd6)+'\x20theme\x20applied!','success'),!![]):(console['error'](_0x430ec5(0x1af)),![]);}function buildStoreUI(){buildThemeItems(),buildTokenItems();}function buildThemeItems(){const _0x250466=a0_0x3a4d28,_0x477192=document['querySelector']('.themes-grid');if(!_0x477192){console[_0x250466(0x19e)]('Themes\x20container\x20not\x20found');return;}_0x477192['innerHTML']='',Object['entries'](THEMES)['forEach'](([_0x3b99a6,_0x22aac3])=>{const _0x49c863=_0x250466,_0x1b3e8c=document[_0x49c863(0x18f)](_0x49c863(0x1bc));_0x1b3e8c['className']='store-item',_0x1b3e8c['dataset']['theme']=_0x3b99a6,_0x1b3e8c['dataset']['itemId']='theme_'+_0x3b99a6,_0x1b3e8c['dataset']['price']=_0x22aac3['price'],_0x1b3e8c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20theme-icon-'+_0x3b99a6+_0x49c863(0x182)+(_0x22aac3[_0x49c863(0x1d8)]===0x0?_0x49c863(0x1a8):_0x22aac3['price']+'\x20Points')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22item-title\x22>'+_0x22aac3['name']+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22item-description\x22>'+_0x22aac3[_0x49c863(0x1a2)]+_0x49c863(0x1f4),_0x477192[_0x49c863(0x19b)](_0x1b3e8c);}),setupThemeButtons();}function buildTokenItems(){const _0x5dd94b=a0_0x3a4d28,_0x4653d5=document[_0x5dd94b(0x1d0)]('.tokens-grid');if(!_0x4653d5){console[_0x5dd94b(0x19e)](_0x5dd94b(0x18a));return;}_0x4653d5[_0x5dd94b(0x1f2)]='',Object['entries'](TOKENS)['forEach'](([_0x44f98a,_0x3d6f72])=>{const _0x24480e=_0x5dd94b,_0x209698=document['createElement']('div');_0x209698[_0x24480e(0x180)]=_0x24480e(0x1ad),_0x209698['dataset']['token']=_0x44f98a,_0x209698['dataset']['itemId']=_0x24480e(0x1a7)+_0x44f98a,_0x209698[_0x24480e(0x1ff)]['price']=_0x3d6f72['price'];const _0x3fa184=userData[_0x24480e(0x1f7)]&&userOwnsToken(_0x44f98a)?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-sell-btn\x20admin-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20background:\x20#f44336;\x20font-size:\x200.8rem;\x20padding:\x200.3rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Sell\x20('+Math['floor'](_0x3d6f72[_0x24480e(0x1d8)]*0.5)+_0x24480e(0x197):'';_0x209698['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-icon\x20token-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x3d6f72['image']+_0x24480e(0x191)+_0x3d6f72['name']+'\x22\x20class=\x22token-preview\x22\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27flex\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22token-fallback\x22\x20style=\x22display:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-coins\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22item-price\x22>'+_0x3d6f72[_0x24480e(0x1d8)]+'\x20Points</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-select-btn\x20purchase-btn\x22>Purchase</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22token-equip-btn\x20equip-btn\x22\x20style=\x22margin-top:\x200.5rem;\x20display:\x20none;\x22>Equip</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3fa184+_0x24480e(0x1c4),_0x4653d5[_0x24480e(0x19b)](_0x209698);}),setupTokenButtons();}function setupThemeButtons(){const _0x3da718=document['querySelectorAll']('.theme-select-btn');_0x3da718['forEach'](_0x29a454=>{const _0x39814a=a0_0x2c10;_0x29a454[_0x39814a(0x1eb)]('click',async _0x587167=>{const _0x3c363e=_0x39814a;_0x587167['preventDefault']();const _0x3307c1=auth['currentUser'];if(!_0x3307c1){showMessage('Please\x20sign\x20in\x20to\x20select\x20themes','error');return;}const _0x4b7302=_0x29a454['closest']('[data-theme]'),_0xfa3781=_0x4b7302['dataset']['theme'],_0x26fd84=THEMES[_0xfa3781];if(!_0x26fd84){console[_0x3c363e(0x19e)]('Theme\x20'+_0xfa3781+_0x3c363e(0x216));return;}console[_0x3c363e(0x205)]('Theme\x20clicked:\x20'+_0x26fd84['name']+'\x20('+_0xfa3781+')');if(_0x29a454['disabled']){_0x26fd84['price']>0x0&&showMessage('You\x20need\x20'+_0x26fd84['price']+_0x3c363e(0x17a),'error');return;}if(_0x29a454['textContent']==='Current\x20Theme'){showMessage(_0x26fd84['name']+_0x3c363e(0x184),'info');return;}if(_0x29a454[_0x3c363e(0x1b9)]==='Apply\x20Theme'){applyTheme(_0xfa3781),updateThemeButtons();return;}if(_0x29a454['textContent'][_0x3c363e(0x196)]('Buy')){const _0x3bb66b=window['confirm']('Purchase\x20'+_0x26fd84['name']+'\x20theme\x20for\x20'+_0x26fd84['price']+'\x20points?');if(!_0x3bb66b)return;const _0x15eee0=await purchaseTheme(_0xfa3781);_0x15eee0&&(showMessage(_0x26fd84[_0x3c363e(0x1e5)]+_0x3c363e(0x1d3),_0x3c363e(0x17c)),applyTheme(_0xfa3781),updateThemeButtons());return;}userOwnsTheme(_0xfa3781)?applyTheme(_0xfa3781):showMessage('You\x20must\x20purchase\x20this\x20theme\x20first','error');});}),updateThemeButtons();}function setupTokenButtons(){const _0x4506cb=a0_0x3a4d28,_0x12adca=document[_0x4506cb(0x1a6)](_0x4506cb(0x18c)),_0x565a30=document['querySelectorAll']('.token-equip-btn'),_0x29ff6a=document[_0x4506cb(0x1a6)]('.token-sell-btn');_0x12adca['forEach'](_0x3ea651=>{const _0x3212fa=_0x4506cb;_0x3ea651[_0x3212fa(0x1eb)]('click',async _0x12639b=>{const _0x5cfc39=_0x3212fa;_0x12639b[_0x5cfc39(0x1ab)]();const _0x1ab807=auth['currentUser'];if(!_0x1ab807){showMessage('Please\x20sign\x20in\x20to\x20purchase\x20tokens','error');return;}const _0x5bc4ae=_0x3ea651[_0x5cfc39(0x1c8)]('[data-token]'),_0x524b77=_0x5bc4ae['dataset'][_0x5cfc39(0x206)],_0x47de15=TOKENS[_0x524b77];if(!_0x47de15){console[_0x5cfc39(0x19e)]('Token\x20'+_0x524b77+_0x5cfc39(0x216));return;}console['log']('Token\x20clicked:\x20'+_0x47de15['name']+'\x20('+_0x524b77+')');if(_0x3ea651['disabled']){showMessage('You\x20need\x20'+_0x47de15['price']+'\x20points\x20to\x20purchase\x20this\x20token','error');return;}if(_0x3ea651['textContent']==='Owned'){showMessage('You\x20already\x20own\x20the\x20'+_0x47de15[_0x5cfc39(0x1e5)]+'\x20token','info');return;}if(_0x3ea651['textContent']['includes']('Purchase')||_0x3ea651[_0x5cfc39(0x1b9)]['includes']('Buy')){const _0x5c019f=window['confirm']('Purchase\x20'+_0x47de15['name']+_0x5cfc39(0x200)+_0x47de15['price']+'\x20points?');if(!_0x5c019f)return;const _0x1292a5=await purchaseToken(_0x524b77);_0x1292a5&&updateTokenButtons();return;}});}),_0x565a30[_0x4506cb(0x211)](_0x29d6c8=>{_0x29d6c8['addEventListener']('click',async _0x1f8956=>{const _0x4c7e18=a0_0x2c10;_0x1f8956['preventDefault']();const _0x46b90c=_0x29d6c8['closest']('[data-token]'),_0xd5cdde=_0x46b90c['dataset']['token'],_0x4583c4=TOKENS[_0xd5cdde];if(_0x29d6c8['textContent']===_0x4c7e18(0x20b)){const _0x51c2c2=window[_0x4c7e18(0x1a4)]('Unequip\x20'+_0x4583c4['name']+'?');if(!_0x51c2c2)return;const _0x40ab54=await unequipToken();_0x40ab54&&updateTokenButtons();}else{const _0x42d5f3=window['confirm']('Equip\x20'+_0x4583c4[_0x4c7e18(0x1e5)]+_0x4c7e18(0x21f));if(!_0x42d5f3)return;const _0x3922ca=await equipToken(_0xd5cdde);_0x3922ca&&updateTokenButtons();}});}),_0x29ff6a['forEach'](_0x1055c3=>{const _0x151ad6=_0x4506cb;_0x1055c3['addEventListener'](_0x151ad6(0x1ee),async _0x4cb6ef=>{const _0x5c9104=_0x151ad6;_0x4cb6ef[_0x5c9104(0x1ab)]();const _0x229d70=_0x1055c3[_0x5c9104(0x1c8)](_0x5c9104(0x20f)),_0x3aefc4=_0x229d70[_0x5c9104(0x1ff)]['token'],_0x47c46d=TOKENS[_0x3aefc4],_0x465c02=Math[_0x5c9104(0x1e8)](_0x47c46d['price']*0.5),_0x3847d7=window['confirm']('Are\x20you\x20sure\x20you\x20want\x20to\x20sell\x20'+_0x47c46d[_0x5c9104(0x1e5)]+'\x20for\x20'+_0x465c02+'\x20points?\x20This\x20cannot\x20be\x20undone.');if(!_0x3847d7)return;const _0x2ee27b=await sellToken(_0x3aefc4);_0x2ee27b&&updateTokenButtons();});}),updateTokenButtons();}function updateThemeButtons(){const _0x21388f=a0_0x3a4d28,_0x1c6460=window['ThemeSystem']?window['ThemeSystem'][_0x21388f(0x1cb)]():'default',_0x47d024=auth['currentUser'];document['querySelectorAll'](_0x21388f(0x203))['forEach'](_0x344393=>{const _0xae462d=_0x21388f,_0x5c354e=_0x344393['closest']('[data-theme]'),_0xa34574=_0x5c354e[_0xae462d(0x1ff)]['theme'],_0x22a049=THEMES[_0xa34574];if(!_0x22a049)return;_0x344393['disabled']=![],_0x344393['style']['opacity']='',_0x344393['style']['cursor']=_0xae462d(0x210),_0x344393['classList'][_0xae462d(0x190)]('current-theme',_0xae462d(0x213),'can-afford','cannot-afford','sign-in-free','sign-in-paid');if(!_0x47d024){_0x22a049['price']===0x0?(_0x344393[_0xae462d(0x1b9)]='Sign\x20in\x20to\x20Apply',_0x344393[_0xae462d(0x174)]['add']('sign-in-free')):(_0x344393['textContent']='Sign\x20in\x20to\x20Purchase',_0x344393['disabled']=!![],_0x344393['style']['opacity']=_0xae462d(0x222),_0x344393['classList']['add']('sign-in-paid'));return;}if(_0xa34574===_0x1c6460){_0x344393['textContent']=_0xae462d(0x204),_0x344393['classList'][_0xae462d(0x1aa)](_0xae462d(0x1c3)),_0x344393['disabled']=!![],_0x344393[_0xae462d(0x209)][_0xae462d(0x218)]='default';return;}if(userOwnsTheme(_0xa34574)){_0x344393['textContent']='Apply\x20Theme',_0x344393['classList']['add']('apply-theme');return;}if(userData['points']>=_0x22a049['price']){_0x344393['textContent']='Buy\x20for\x20'+_0x22a049['price']+_0xae462d(0x1b5),_0x344393['classList']['add']('can-afford');return;}_0x344393['textContent']='Need\x20'+_0x22a049['price']+'\x20Points',_0x344393['classList'][_0xae462d(0x1aa)](_0xae462d(0x1ec)),_0x344393['style']['opacity']='0.5',_0x344393['disabled']=!![],_0x344393['style']['cursor']='not-allowed';});}function updateTokenButtons(){const _0x433aeb=a0_0x3a4d28,_0x2b5b7b=auth[_0x433aeb(0x1a1)];document[_0x433aeb(0x1a6)]('.token-select-btn')[_0x433aeb(0x211)](_0x905c13=>{const _0x3abb5a=_0x433aeb,_0x266f23=_0x905c13['closest']('[data-token]'),_0x3e2413=_0x266f23[_0x3abb5a(0x1ff)]['token'],_0x3df2da=TOKENS[_0x3e2413],_0x30e272=_0x266f23['querySelector']('.token-equip-btn'),_0xcba2a1=_0x266f23['querySelector'](_0x3abb5a(0x1d2));if(!_0x3df2da)return;_0x905c13['disabled']=![],_0x905c13['style']['opacity']='',_0x905c13['style'][_0x3abb5a(0x218)]=_0x3abb5a(0x210);_0x30e272&&(_0x30e272['style'][_0x3abb5a(0x1a5)]=_0x3abb5a(0x1f5),_0x30e272['disabled']=![],_0x30e272['style']['opacity']='',_0x30e272['classList']['remove'](_0x3abb5a(0x173),'can-equip'));_0xcba2a1&&(_0xcba2a1['style'][_0x3abb5a(0x1a5)]='none');_0x905c13['classList']['remove'](_0x3abb5a(0x19c),'can-afford','cannot-afford','sign-in');if(!_0x2b5b7b){_0x905c13[_0x3abb5a(0x1b9)]='Sign\x20in\x20to\x20Purchase',_0x905c13['disabled']=!![],_0x905c13['style']['opacity']='0.7',_0x905c13['classList']['add']('sign-in');return;}if(userOwnsToken(_0x3e2413)){_0x905c13[_0x3abb5a(0x1b9)]='Owned',_0x905c13['classList'][_0x3abb5a(0x1aa)]('owned'),_0x905c13['disabled']=!![],_0x905c13['style'][_0x3abb5a(0x218)]='default',_0x905c13[_0x3abb5a(0x209)]['background']=_0x3abb5a(0x21e);_0x30e272&&(_0x30e272['style']['display']=_0x3abb5a(0x208),userHasTokenEquipped(_0x3e2413)?(_0x30e272['textContent']=_0x3abb5a(0x20b),_0x30e272[_0x3abb5a(0x174)]['add']('equipped'),_0x30e272['style'][_0x3abb5a(0x1b1)]='var(--accent-color,\x20#2196F3)',_0x30e272['style']['cursor']='pointer'):(_0x30e272[_0x3abb5a(0x1b9)]=_0x3abb5a(0x1a3),_0x30e272['classList']['add'](_0x3abb5a(0x1ce)),_0x30e272['style']['background']='var(--info-color,\x20#17a2b8)',_0x30e272['style']['cursor']='pointer'));_0xcba2a1&&userData['isAdmin']&&(_0xcba2a1['style'][_0x3abb5a(0x1a5)]='block');return;}if(userData['points']>=_0x3df2da['price']){_0x905c13['textContent']='Buy\x20for\x20'+_0x3df2da[_0x3abb5a(0x1d8)]+'\x20Points',_0x905c13['classList'][_0x3abb5a(0x1aa)](_0x3abb5a(0x1e0)),_0x905c13['style']['background']='';return;}_0x905c13['textContent']=_0x3abb5a(0x1fe)+_0x3df2da['price']+_0x3abb5a(0x1b5),_0x905c13[_0x3abb5a(0x174)]['add']('cannot-afford'),_0x905c13['style']['opacity']='0.5',_0x905c13['disabled']=!![],_0x905c13[_0x3abb5a(0x209)]['cursor']='not-allowed',_0x905c13['style']['background']='var(--muted-color,\x20#757575)';});}function showMessage(_0x5da32f,_0x9fb587=a0_0x3a4d28(0x19a)){const _0x1cdf76=a0_0x3a4d28,_0x4dbca9=document[_0x1cdf76(0x1dc)]('store-message');_0x4dbca9&&_0x4dbca9[_0x1cdf76(0x190)]();const _0x35d7e2=document['createElement']('div');_0x35d7e2['id']=_0x1cdf76(0x1e1),_0x35d7e2[_0x1cdf76(0x180)]='store-message\x20store-message-'+_0x9fb587,_0x35d7e2['textContent']=_0x5da32f,document['body'][_0x1cdf76(0x19b)](_0x35d7e2),requestAnimationFrame(()=>{_0x35d7e2['classList']['add']('visible');}),setTimeout(()=>{const _0x59c35e=_0x1cdf76;_0x35d7e2['classList']['remove'](_0x59c35e(0x1cd)),setTimeout(()=>{_0x35d7e2['parentNode']&&_0x35d7e2['remove']();},0x12c);},0xfa0);}window['RedeemStore']={'refreshUI':()=>{updateThemeButtons(),updateTokenButtons();},'checkOwnership':userOwnsTheme,'checkTokenOwnership':userOwnsToken,'applyTheme':applyTheme,'purchaseTheme':purchaseTheme,'purchaseToken':purchaseToken},console['log'](a0_0x3a4d28(0x215));