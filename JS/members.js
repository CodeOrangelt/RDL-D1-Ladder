const a39_0x1a2c42=a39_0x3064,a39_0x381975=(function(){let _0x1ae339=!![];return function(_0x76f057,_0x43a0a7){const _0x585673=_0x1ae339?function(){const _0x4c07db=a39_0x3064;if(_0x43a0a7){const _0x5e18a7=_0x43a0a7[_0x4c07db(0x13a)](_0x76f057,arguments);return _0x43a0a7=null,_0x5e18a7;}}:function(){};return _0x1ae339=![],_0x585673;};}()),a39_0x4dd7ef=a39_0x381975(this,function(){const _0x1e6e60=a39_0x3064,_0x28f24b=function(){const _0x4531a8=a39_0x3064;let _0x288b1a;try{_0x288b1a=Function(_0x4531a8(0x158)+_0x4531a8(0x156)+');')();}catch(_0x2df4a5){_0x288b1a=window;}return _0x288b1a;},_0x498ccc=_0x28f24b(),_0x33f71f=_0x498ccc[_0x1e6e60(0x172)]=_0x498ccc[_0x1e6e60(0x172)]||{},_0x376536=[_0x1e6e60(0x139),_0x1e6e60(0x12f),_0x1e6e60(0x12e),_0x1e6e60(0x177),_0x1e6e60(0x132),_0x1e6e60(0x15b),_0x1e6e60(0x17a)];for(let _0x249704=0x0;_0x249704<_0x376536[_0x1e6e60(0x14b)];_0x249704++){const _0x43920b=a39_0x381975[_0x1e6e60(0x178)][_0x1e6e60(0x168)][_0x1e6e60(0x15a)](a39_0x381975),_0x24af85=_0x376536[_0x249704],_0x3f4e14=_0x33f71f[_0x24af85]||_0x43920b;_0x43920b[_0x1e6e60(0x175)]=a39_0x381975[_0x1e6e60(0x15a)](a39_0x381975),_0x43920b[_0x1e6e60(0x179)]=_0x3f4e14[_0x1e6e60(0x179)][_0x1e6e60(0x15a)](_0x3f4e14),_0x33f71f[_0x24af85]=_0x43920b;}});function a39_0x3064(_0x9ef8df,_0x204f7e){_0x9ef8df=_0x9ef8df-0x12b;const _0x4dd7ef=a39_0x836a();let _0x381975=_0x4dd7ef[_0x9ef8df];return _0x381975;}a39_0x4dd7ef();const functions=require(a39_0x1a2c42(0x143)),admin=require(a39_0x1a2c42(0x152));admin[a39_0x1a2c42(0x176)]();const db=admin[a39_0x1a2c42(0x163)]();function a39_0x836a(){const _0x1dedfd=['slice','get','playersD3','info','warn','favoriteWeapon','ladders','exception','silver','ref','batch','{collection}/{docId}','ladder','emerald','log','apply','commit','delete','userProfiles','push','unranked','playersD2','onWrite','onRequest','firebase-functions','Error\x20updating\x20members\x20list:','elo','FieldValue','bronze','https','forEach','Error\x20rebuilding\x20members\x20list:','length','all','motto','serverTimestamp','updateMembersList','favoriteMap','eloRating','firebase-admin','sort','includes','country','{}.constructor(\x22return\x20this\x22)(\x20)','status','return\x20(function()\x20','send','bind','table','params','docId','userId','username','active','Unknown','Members\x20list\x20rebuilt\x20successfully','firestore','Error\x20rebuilding\x20members\x20list','doc','set','Successfully\x20updated\x20aggregated\x20members\x20list','prototype','data','aggregatedMembers','collection','rebuildMembersListManual','profileImageUrl','document','nonParticipants','gold','players','console','isNonParticipant','has','__proto__','initializeApp','error','constructor','toString','trace'];a39_0x836a=function(){return _0x1dedfd;};return a39_0x836a();}exports[a39_0x1a2c42(0x14f)]=functions[a39_0x1a2c42(0x163)][a39_0x1a2c42(0x16e)](a39_0x1a2c42(0x136))[a39_0x1a2c42(0x141)](async(_0x430e5f,_0x31ee1b)=>{const _0x4e8239=a39_0x1a2c42,_0xca8b50=_0x31ee1b[_0x4e8239(0x15c)][_0x4e8239(0x16b)],_0x333fc5=_0x31ee1b[_0x4e8239(0x15c)][_0x4e8239(0x15d)];if(![_0x4e8239(0x171),_0x4e8239(0x140),_0x4e8239(0x12d),_0x4e8239(0x13d),_0x4e8239(0x16f)][_0x4e8239(0x154)](_0xca8b50))return null;try{await rebuildMembersList(),console[_0x4e8239(0x139)](_0x4e8239(0x167));}catch(_0xc5869c){console[_0x4e8239(0x177)](_0x4e8239(0x144),_0xc5869c);}});async function rebuildMembersList(){const _0x3217a4=a39_0x1a2c42,_0x38ecbb=db[_0x3217a4(0x135)](),[_0x4e3d88,_0x585cf1,_0x246af7,_0x3cbddf,_0x542267]=await Promise[_0x3217a4(0x14c)]([db[_0x3217a4(0x16b)](_0x3217a4(0x13d))[_0x3217a4(0x12c)](),db[_0x3217a4(0x16b)](_0x3217a4(0x171))[_0x3217a4(0x12c)](),db[_0x3217a4(0x16b)](_0x3217a4(0x140))[_0x3217a4(0x12c)](),db[_0x3217a4(0x16b)](_0x3217a4(0x12d))[_0x3217a4(0x12c)](),db[_0x3217a4(0x16b)](_0x3217a4(0x16f))[_0x3217a4(0x12c)]()]),_0xead8f6=new Map();_0x4e3d88[_0x3217a4(0x149)](_0x1c6554=>{const _0x1ee530=_0x3217a4;_0xead8f6[_0x1ee530(0x166)](_0x1c6554['id'],_0x1c6554[_0x1ee530(0x169)]());});const _0xab1f15=new Map(),_0x397f32=(_0x56b5ef,_0x467588)=>{const _0x357a60=_0x3217a4;_0x56b5ef[_0x357a60(0x149)](_0xf68937=>{const _0x41fb74=_0x357a60,_0x2f0588=_0xf68937[_0x41fb74(0x169)](),_0x4fd911=_0xf68937['id'];!_0xab1f15[_0x41fb74(0x174)](_0x4fd911)&&_0xab1f15[_0x41fb74(0x166)](_0x4fd911,{'userId':_0x4fd911,'username':_0x2f0588[_0x41fb74(0x15f)]||_0x41fb74(0x161),'ladders':[],'isNonParticipant':![]});const _0x3229f1=_0xab1f15[_0x41fb74(0x12c)](_0x4fd911);_0x3229f1[_0x41fb74(0x131)][_0x41fb74(0x13e)]({'ladder':_0x467588,'elo':_0x2f0588[_0x41fb74(0x151)]||0xc8,'active':_0x2f0588[_0x41fb74(0x160)]!==![]});});};_0x397f32(_0x585cf1,'D1'),_0x397f32(_0x246af7,'D2'),_0x397f32(_0x3cbddf,'D3'),_0x542267[_0x3217a4(0x149)](_0x44a170=>{const _0x43e1a9=_0x3217a4,_0x51750d=_0x44a170[_0x43e1a9(0x169)](),_0x1db834=_0x44a170['id'];!_0xab1f15[_0x43e1a9(0x174)](_0x1db834)&&_0x51750d[_0x43e1a9(0x15f)]&&_0xab1f15[_0x43e1a9(0x166)](_0x1db834,{'userId':_0x1db834,'username':_0x51750d[_0x43e1a9(0x15f)],'ladders':[],'isNonParticipant':!![]});});const _0x118e23=[];_0xab1f15[_0x3217a4(0x149)]((_0x17a3b7,_0x1809dd)=>{const _0x24c930=_0x3217a4,_0xdc2ce1=_0xead8f6[_0x24c930(0x12c)](_0x1809dd)||{};let _0x3b1ebf=0x0,_0x483dca=null;if(_0x17a3b7[_0x24c930(0x131)][_0x24c930(0x14b)]>0x0){const _0x27d177=_0x17a3b7[_0x24c930(0x131)][_0x24c930(0x153)]((_0x19b5c0,_0x5c92f4)=>_0x5c92f4[_0x24c930(0x145)]-_0x19b5c0[_0x24c930(0x145)]);_0x3b1ebf=_0x27d177[0x0][_0x24c930(0x145)],_0x483dca=_0x27d177[0x0][_0x24c930(0x137)];}const _0x638528={'userId':_0x1809dd,'username':_0x17a3b7[_0x24c930(0x15f)],'profileImageUrl':_0xdc2ce1[_0x24c930(0x16d)]||null,'country':_0xdc2ce1[_0x24c930(0x155)]||null,'motto':_0xdc2ce1[_0x24c930(0x14d)]||null,'favoriteMap':_0xdc2ce1[_0x24c930(0x150)]||null,'favoriteWeapon':_0xdc2ce1[_0x24c930(0x130)]||null,'isNonParticipant':_0x17a3b7[_0x24c930(0x173)],'ladders':_0x17a3b7[_0x24c930(0x131)],'primaryLadder':_0x483dca,'highestElo':_0x3b1ebf,'rank':getPlayerRank(_0x3b1ebf),'lastUpdated':admin[_0x24c930(0x163)][_0x24c930(0x146)][_0x24c930(0x14e)]()};_0x118e23[_0x24c930(0x13e)](_0x638528);});const _0x999fdc=db[_0x3217a4(0x16b)](_0x3217a4(0x16a)),_0x58a057=await _0x999fdc[_0x3217a4(0x12c)](),_0x487cca=[];_0x58a057[_0x3217a4(0x149)](_0x2c8474=>{const _0xb42828=_0x3217a4;_0x487cca[_0xb42828(0x13e)](_0x2c8474[_0xb42828(0x134)][_0xb42828(0x13c)]());}),await Promise[_0x3217a4(0x14c)](_0x487cca);const _0x3ce546=0x1f4,_0x55ea9d=[];for(let _0x257edb=0x0;_0x257edb<_0x118e23[_0x3217a4(0x14b)];_0x257edb+=_0x3ce546){const _0x95efd4=db[_0x3217a4(0x135)](),_0x486b37=_0x118e23[_0x3217a4(0x12b)](_0x257edb,_0x257edb+_0x3ce546);_0x486b37[_0x3217a4(0x149)](_0x197cd0=>{const _0x28854e=_0x3217a4,_0x102559=_0x999fdc[_0x28854e(0x165)](_0x197cd0[_0x28854e(0x15e)]);_0x95efd4[_0x28854e(0x166)](_0x102559,_0x197cd0);}),_0x55ea9d[_0x3217a4(0x13e)](_0x95efd4[_0x3217a4(0x13b)]());}await Promise[_0x3217a4(0x14c)](_0x55ea9d);}function getPlayerRank(_0x2efc95,_0xb063df=0x0){const _0x45ebe7=a39_0x1a2c42;if(_0xb063df===0x0)return _0x45ebe7(0x13f);if(_0xb063df>=0x5&&_0x2efc95<0xc8)return _0x45ebe7(0x147);if(_0x2efc95>=0x3e8)return _0x45ebe7(0x138);if(_0x2efc95>=0x2bc)return _0x45ebe7(0x170);if(_0x2efc95>=0x1f4)return _0x45ebe7(0x133);if(_0x2efc95>=0xc8)return _0x45ebe7(0x147);return _0x45ebe7(0x13f);}exports[a39_0x1a2c42(0x16c)]=functions[a39_0x1a2c42(0x148)][a39_0x1a2c42(0x142)](async(_0x20d0c2,_0x53e066)=>{const _0x4cedb1=a39_0x1a2c42;try{await rebuildMembersList(),_0x53e066[_0x4cedb1(0x157)](0xc8)[_0x4cedb1(0x159)](_0x4cedb1(0x162));}catch(_0x403802){console[_0x4cedb1(0x177)](_0x4cedb1(0x14a),_0x403802),_0x53e066[_0x4cedb1(0x157)](0x1f4)[_0x4cedb1(0x159)](_0x4cedb1(0x164));}});