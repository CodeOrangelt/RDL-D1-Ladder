const a10m=a10b;function a10b(a,b){const c=a10a();return a10b=function(d,e){d=d-0x9d;let f=c[d];if(a10b['FMCZVh']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a10b['gavxlP']=g,a=arguments,a10b['FMCZVh']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a10b['gavxlP'](f),a[i]=f):f=j,f;},a10b(a,b);}(function(a,b){const l=a10b,c=a();while(!![]){try{const d=-parseInt(l(0xc7))/0x1+-parseInt(l(0xa8))/0x2+parseInt(l(0xb0))/0x3*(parseInt(l(0xce))/0x4)+parseInt(l(0xbc))/0x5*(-parseInt(l(0xc0))/0x6)+-parseInt(l(0xae))/0x7*(parseInt(l(0xa6))/0x8)+-parseInt(l(0xc1))/0x9+-parseInt(l(0xb7))/0xa*(-parseInt(l(0xaf))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a10a,0xe9c9a));import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';function a10a(){const v=['DxnLCNm','yM9YzgvY','ywXS','CgvUzgLUz01HDgnOzxndywnOzq','mty5ote0me1ivgrlBG','DxnLCKLK','ltHWEa','C2v0sxrLBq','CgvUzgLUz01HDgnOzxnemG','CMLNAhq','ltvWEa','mtiYmZCYCwndte5T','D2LUBMvYrw1HAwW','yM9YzgvYuMfKAxvZ','yMfJA2DYB3vUzenVBg9Y','AgvPz2H0','zgf0yq','zxHPC3rZ','CgfYC2u','ywjZB2X1Dgu','D2LUBMvYvxnLCM5HBwu','zg9JCW','ndHJy3DIAfC','yM9KEq','mJiWmdyYmePbswPQEG','zw1WDhK','BM93','zxjYB3i','y3vYCMvUDfvZzxi','yxbWCM92zwq','otmXndGZDwnRrfL3','nJq5EM9cALDM','mJDiEKHRwMG','rxjYB3iGy2HLy2TPBMCGCgvUzgLUzYbTyxrJAgvZoG','C3r5Bgu','CgXHEwvYC0qZ','zgLZy29UBMvJDa','y3vYCMvUDfvZzxjUyw1L','DxnLCM5HBwu','mte1nteZme1wr3DbCa','DwLK','B2jZzxj2zq','ywrKrxzLBNrmAxn0zw5LCG','CgvUzgLUz01HDgnOzxnemW','mJaXnw9TAxPMsq','CMvWB3j0lw1HDgnOlw5VDgLMAwnHDgLVBG','mtbWEa','CgXHEwvYCW','mtyYmZzrr0HzCgy','mtmWmde2ntjOr1rkAwO','zw1HAwW'];a10a=function(){return v;};return a10a();}let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10m(0xc6),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(a=![]){const n=a10m,b=Date[n(0xaa)](),c=checkNotificationCache();if(c!==null&&!a){updateNotificationDot(c);if(b-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=b;const d=auth[n(0xac)];if(!d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [e,f,g]=await Promise['all']([checkForPendingMatchesInCollection(d,'pendingMatches'),checkForPendingMatchesInCollection(d,n(0xcb)),checkForPendingMatchesInCollection(d,n(0xbb))]),h=e||f||g;updateNotificationDot(h),updateNotificationCache(h);}catch(i){console['error'](n(0xb1),i);}}async function checkForPendingMatchesInCollection(a,b){const o=a10m,c=a['uid'],d=a['email'],e=query(collection(db,b),where('winnerId','==',c),where('approved','==',![])),f=await getDocs(e);if(!f['empty'])return!![];if(d){const h=query(collection(db,b),where(o(0xcf),'==',d),where('approved','==',![])),i=await getDocs(h);if(!i[o(0xa9)])return!![];}let g=await getUsernameFromAllSources(a);if(g){const j=query(collection(db,b),where(o(0xa4),'==',g),where(o(0xad),'==',![])),k=await getDocs(j);if(!k[o(0xa9)])return!![];}return![];}async function getUsernameFromAllSources(a){const p=a10m,b=localStorage['getItem']('currentUsername');if(b)return b;try{const [c,d,e]=await Promise[p(0xc5)]([getDocs(query(collection(db,p(0xbf)),where(p(0xc8),'==',a[p(0xb8)]))),getDocs(query(collection(db,'playersD2'),where('userId','==',a[p(0xb8)]))),getDocs(query(collection(db,p(0xb3)),where(p(0xc8),'==',a['uid'])))]);if(!c[p(0xa9)]){const g=c[p(0xa5)][0x0]['data']()['username'];return localStorage[p(0xca)]('currentUsername',g),g;}if(!d[p(0xa9)]){const h=d['docs'][0x0]['data']()['username'];return localStorage[p(0xca)](p(0xb5),h),h;}if(!e[p(0xa9)]){const i=e[p(0xa5)][0x0]['data']()[p(0xb6)];return localStorage[p(0xca)]('currentUsername',i),i;}const f=await getDoc(doc(db,p(0xc3),a[p(0xb8)]));if(f[p(0xa1)]()&&f[p(0xa0)]()['username']){const j=f['data']()['username'];return localStorage[p(0xca)](p(0xb5),j),j;}}catch(k){console[p(0xab)]('Error\x20fetching\x20username:',k);}if(a['email'])return a[p(0xc2)]['split']('@')[0x0];return null;}function updateNotificationCache(a){const q=a10m,b={'status':a,'timestamp':Date[q(0xaa)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](b));}function checkNotificationCache(){const r=a10m,a=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!a)return null;try{const {status:b,timestamp:c}=JSON[r(0xa2)](a),d=Date['now']();if(d-c<CACHE_EXPIRY)return b;}catch(f){}return null;}export function updateNotificationDot(a){const t=a10m,b=new MutationObserver((d,e)=>{const s=a10b,f=document['getElementById'](s(0xbd));f&&(updateDotStyle(f,a),e[s(0xb4)]());});b[t(0xb9)](document[t(0xa7)],{'childList':!![],'subtree':!![]});const c=document['getElementById'](t(0xbd));c&&(updateDotStyle(c,a),b['disconnect']()),setTimeout(()=>b[t(0xb4)](),0x1388);}function updateDotStyle(a,b){const u=a10m;b?(a['style']['display']='block',a[u(0xb2)][u(0x9e)]='#ff3b30',a['style']['width']=u(0xbe),a[u(0xb2)][u(0x9f)]='10px',a[u(0xb2)]['position']=u(0xa3),a['style']['top']=u(0xcd),a['style'][u(0xcc)]=u(0xc9),a['style'][u(0x9d)]='50%',a['style'][u(0xc4)]='2px\x20solid\x20white',a['style']['zIndex']='999'):a[u(0xb2)]['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10m(0xba)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});