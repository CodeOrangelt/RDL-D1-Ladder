const a27_0xe80033=(function(){let _0x234b8c=!![];return function(_0x1c8b0d,_0x5219ae){const _0x44677b=_0x234b8c?function(){const _0xc83f4c=a27_0x236d;if(_0x5219ae){const _0x22bb42=_0x5219ae[_0xc83f4c(0xb0)](_0x1c8b0d,arguments);return _0x5219ae=null,_0x22bb42;}}:function(){};return _0x234b8c=![],_0x44677b;};}()),a27_0x35830a=a27_0xe80033(this,function(){const _0x52ca08=a27_0x236d;let _0x50baed;try{const _0x14a9a3=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x50baed=_0x14a9a3();}catch(_0x261723){_0x50baed=window;}const _0x46f881=_0x50baed[_0x52ca08(0x9c)]=_0x50baed['console']||{},_0x2a4081=['log','warn','info','error',_0x52ca08(0xda),'table',_0x52ca08(0x98)];for(let _0x567068=0x0;_0x567068<_0x2a4081['length'];_0x567068++){const _0x599db6=a27_0xe80033['constructor']['prototype']['bind'](a27_0xe80033),_0xb5cd56=_0x2a4081[_0x567068],_0x1d8015=_0x46f881[_0xb5cd56]||_0x599db6;_0x599db6['__proto__']=a27_0xe80033['bind'](a27_0xe80033),_0x599db6[_0x52ca08(0x9d)]=_0x1d8015['toString']['bind'](_0x1d8015),_0x46f881[_0xb5cd56]=_0x599db6;}});a27_0x35830a();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x16759e=0x1){const _0x4d0ae8=a27_0x236d;try{document['getElementById']('loading-indicator')[_0x4d0ae8(0xeb)]['display']='block';const _0x487810=await getLadderData(_0x16759e);_0x487810['sort']((_0x1d507b,_0x569198)=>_0x569198['elo']-_0x1d507b[_0x4d0ae8(0xec)]);const _0xd46fb5=_0x487810['map'](_0x9ac9a3=>_0x9ac9a3['id']),_0x1cb697=await getEloHistoryBatch(_0xd46fb5,_0x16759e),_0x468eb9=_0x487810[_0x4d0ae8(0xe1)]((_0x3f347c,_0x5ca926)=>{const _0x48eb38=_0x4d0ae8,_0x5b9f1f=_0x1cb697[_0x3f347c['id']]||[],_0x4d5953=_0x5b9f1f[_0x48eb38(0xcd)]((_0x32d2b0,_0x50901f)=>new Date(_0x50901f['date'])-new Date(_0x32d2b0[_0x48eb38(0xb2)]))['slice'](0x0,0x5);return{..._0x3f347c,'rank':_0x5ca926+0x1,'lastMatches':_0x4d5953,'recentActivity':_0x4d5953[_0x48eb38(0xd5)]>0x0};});renderLadder(_0x468eb9),setupRealTimeUpdates(_0x16759e);}catch(_0x7107cc){console['error']('Error\x20loading\x20ladder\x20data:',_0x7107cc),document['getElementById']('error-message')[_0x4d0ae8(0xd2)]='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById'](_0x4d0ae8(0xbc))[_0x4d0ae8(0xeb)][_0x4d0ae8(0x97)]=_0x4d0ae8(0xf3);}}function setupRealTimeUpdates(_0x17a8be=0x1){const _0x127bbe=a27_0x236d;activeListeners['forEach'](_0x1fa8db=>_0x1fa8db()),activeListeners=[];const _0x1883be=_0x17a8be===0x1?'players':'playersD'+_0x17a8be,_0x49ca71=_0x17a8be===0x1?'matches':'matchesD'+_0x17a8be,_0x153cd8=new Date();_0x153cd8['setDate'](_0x153cd8['getDate']()-0x1);const _0x1ecec0=setupEfficientListener(_0x49ca71,[where(_0x127bbe(0xb2),'>=',_0x153cd8['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x1ee34d=>{_0x1ee34d['length']>0x0&&await loadLadderData(_0x17a8be);});activeListeners['push'](_0x1ecec0);}export function cleanupListeners(){activeListeners['forEach'](_0x45445d=>_0x45445d()),activeListeners=[];}function renderLadder(_0xc193df){const _0x1ef6ff=document['getElementById']('ladder-container');_0x1ef6ff['innerHTML']='',_0xc193df['forEach'](_0xa2ae0d=>{const _0x1aa0d0=a27_0x236d,_0x12b682=document['createElement'](_0x1aa0d0(0xcc));_0x12b682[_0x1aa0d0(0x99)]='ladder-player',_0x12b682['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0xa2ae0d[_0x1aa0d0(0xfb)]+_0x1aa0d0(0xe8)+(_0xa2ae0d[_0x1aa0d0(0x93)]||_0xa2ae0d['id'])+_0x1aa0d0(0xf8)+_0xa2ae0d['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0xa2ae0d['recentActivity']?'active':'inactive')+_0x1aa0d0(0xb7)+(_0xa2ae0d['recentActivity']?'Active':'Inactive')+_0x1aa0d0(0xfa),_0x1ef6ff['appendChild'](_0x12b682);});}function a27_0x236d(_0x305386,_0x2b6198){const _0x35830a=a27_0x7fbc();return a27_0x236d=function(_0xe80033,_0xeacd01){_0xe80033=_0xe80033-0x8f;let _0x7fbc58=_0x35830a[_0xe80033];return _0x7fbc58;},a27_0x236d(_0x305386,_0x2b6198);}function a27_0x7fbc(){const _0x4e8cc4=['get','set','loserUsername','catch','username','abs','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','#C0C0C0','display','trace','className','Based\x20on\x20your\x20ELO\x20(','elo-recommendation-text-d2','console','toString','checked','userProfiles','%</td>\x0a\x20\x20\x20\x20</tr>','textContent','</span>.\x20Challenge\x20other\x20teams!','appendChild','timestamp','loserScore','#4CAF50','toFixed','includes','D2\x20toggle\x20clicked','admin','newEloRating','totalDeaths','kda','\x20ladder','docs','apply',';\x22>','date','player','Ladder\x20table\x20body\x20not\x20found','active','opacity','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','.trend-indicator','seconds','remove','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','loading-indicator','toLowerCase','#ladder\x20tbody','block','D1\x20toggle\x20clicked','querySelector','#FFD700','approvedMatches','gray','message','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','totalKills','target','#50C878','Error\x20fetching\x20ELO\x20history:','div','sort','eloRating','data','eloHistory','click','innerText','find','querySelectorAll','length','classList','totalMatches','d1-switch','log','exception','oldEloRating','position','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','cursor','addEventListener','map','has','duos','elo-recommendation-text-d3','add','innerHTML','No\x20user\x20profile\x20found','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','players','forEach','style','elo','error','getElementById','currentUser','d2-ladder-container','exists','newElo','none','pow','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20','ELO\x20history\x20collection\x20is\x20empty','playersD3','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','duos-switch','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','rank','elo-recommendation-text-d1'];a27_0x7fbc=function(){return _0x4e8cc4;};return a27_0x7fbc();}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x486cb8=![]){const _0x194cd8=a27_0x236d,_0x30c193=document[_0x194cd8(0xc1)]('#ladder\x20tbody');if(!_0x30c193){console['error'](_0x194cd8(0xb4));return;}_0x30c193['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x4c76d5=Date['now']();if(!_0x486cb8&&playerCache['data']&&_0x4c76d5-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x55d429=collection(db,_0x194cd8(0xe9)),_0x30568e=await getDocs(_0x55d429),_0x1a7bcf=[];_0x30568e['forEach'](_0x376298=>{const _0x2288fe=_0x194cd8,_0x2fd45b=_0x376298['data']();_0x1a7bcf['push']({..._0x2fd45b,'id':_0x376298['id'],'elo':_0x2fd45b['eloRating']||0x0,'position':_0x2fd45b[_0x2288fe(0xdc)]||Number['MAX_SAFE_INTEGER']});});const _0x1a9d31=collection(db,'userProfiles'),_0x2cb066=await getDocs(_0x1a9d31),_0x28a823=new Map();_0x2cb066[_0x194cd8(0xea)](_0x16cd85=>{const _0x1c922a=_0x194cd8,_0x41a728=_0x16cd85[_0x1c922a(0xcf)]();_0x41a728[_0x1c922a(0x93)]&&_0x28a823[_0x1c922a(0x90)](_0x41a728['username'][_0x1c922a(0xbd)](),_0x41a728);}),_0x1a7bcf[_0x194cd8(0xea)](_0xc664f6=>{const _0x40817d=_0x194cd8,_0x5ed6f2=_0xc664f6['username']?.['toLowerCase']();if(_0x5ed6f2&&_0x28a823['has'](_0x5ed6f2)){const _0x5eee5a=_0x28a823[_0x40817d(0x8f)](_0x5ed6f2);_0x5eee5a['country']&&(_0xc664f6['country']=_0x5eee5a['country']['toLowerCase']());}});const _0x1fe244=_0x1a7bcf['map'](_0x5d5076=>_0x5d5076['username']),_0x454da6=await fetchBatchMatchStats(_0x1fe244);_0x1a7bcf[_0x194cd8(0xcd)]((_0x4bc1a2,_0x286b87)=>{const _0x2dab9e=_0x194cd8,_0x5bdbb1=_0x454da6[_0x2dab9e(0x8f)](_0x4bc1a2['username'])?.['totalMatches']||0x0,_0x17fcc5=_0x454da6[_0x2dab9e(0x8f)](_0x286b87[_0x2dab9e(0x93)])?.['totalMatches']||0x0;if(_0x5bdbb1===0x0!==(_0x17fcc5===0x0))return _0x5bdbb1===0x0?0x1:-0x1;return(_0x4bc1a2[_0x2dab9e(0xdc)]||0x3e7)-(_0x286b87[_0x2dab9e(0xdc)]||0x3e7);}),_0x1a7bcf['forEach']((_0x37b8a8,_0x3733fa)=>{const _0x3e8e5b=_0x194cd8;_0x37b8a8[_0x3e8e5b(0xdc)]=_0x3733fa+0x1;}),playerCache['data']=_0x1a7bcf,playerCache['timestamp']=_0x4c76d5,updateLadderDisplay(_0x1a7bcf,_0x454da6);}catch(_0x37f084){console[_0x194cd8(0xed)]('Error\x20loading\x20ladder:',_0x37f084),_0x30c193['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20'+_0x37f084[_0x194cd8(0xc5)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x2c8816){const _0x460433=a27_0x236d,_0xa0b173=new Map();try{_0x2c8816[_0x460433(0xea)](_0x3a1809=>{_0xa0b173['set'](_0x3a1809,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x4b57d9=collection(db,_0x460433(0xc3)),_0x51060f=await getDocs(_0x4b57d9);_0x51060f['forEach'](_0x2d5085=>{const _0x235c09=_0x460433,_0x5713ba=_0x2d5085[_0x235c09(0xcf)](),_0x42834b=_0x5713ba['winnerUsername'],_0x4baaaa=_0x5713ba[_0x235c09(0x91)];if(_0x2c8816['includes'](_0x42834b)){const _0x3728d4=_0xa0b173[_0x235c09(0x8f)](_0x42834b);_0x3728d4['wins']++,_0x3728d4[_0x235c09(0xd7)]++,_0x3728d4['totalKills']+=parseInt(_0x5713ba['winnerScore'])||0x0,_0x3728d4[_0x235c09(0xac)]+=parseInt(_0x5713ba[_0x235c09(0xa5)])||0x0;}if(_0x2c8816[_0x235c09(0xa8)](_0x4baaaa)){const _0x54ab97=_0xa0b173[_0x235c09(0x8f)](_0x4baaaa);_0x54ab97['losses']++,_0x54ab97[_0x235c09(0xd7)]++,_0x54ab97[_0x235c09(0xc8)]+=parseInt(_0x5713ba['loserScore'])||0x0,_0x54ab97[_0x235c09(0xac)]+=parseInt(_0x5713ba['winnerScore'])||0x0;}}),_0x2c8816[_0x460433(0xea)](_0x4acf92=>{const _0x5e110b=_0x460433,_0x3799b5=_0xa0b173[_0x5e110b(0x8f)](_0x4acf92);_0x3799b5[_0x5e110b(0xad)]=_0x3799b5['totalDeaths']>0x0?(_0x3799b5['totalKills']/_0x3799b5['totalDeaths'])['toFixed'](0x2):_0x3799b5['totalKills'][_0x5e110b(0xa7)](0x2),_0x3799b5['winRate']=_0x3799b5['totalMatches']>0x0?(_0x3799b5['wins']/_0x3799b5['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x56b6fd){console['error']('Error\x20fetching\x20batch\x20match\x20stats:',_0x56b6fd);}return _0xa0b173;}function createPlayerRow(_0x54b476,_0x500de3){const _0x1bb4e1=a27_0x236d,_0x57800a=parseFloat(_0x54b476['elo'])||0x0;let _0x244021=_0x1bb4e1(0xc4);if(_0x57800a>=0x7d0)_0x244021='#50C878';else{if(_0x57800a>=0x708)_0x244021=_0x1bb4e1(0xc2);else{if(_0x57800a>=0x640)_0x244021='#b9f1fc';else _0x57800a>=0x578&&(_0x244021='#CD7F32');}}let _0x92b8d0='';return _0x54b476['country']&&(_0x92b8d0='<img\x20src=\x22../images/flags/'+_0x54b476['country']['toLowerCase']()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x54b476['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x54b476['position']+_0x1bb4e1(0xbb)+encodeURIComponent(_0x54b476['username'])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x244021+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x54b476['username']+_0x1bb4e1(0xdd)+_0x92b8d0+_0x1bb4e1(0xc7)+_0x244021+_0x1bb4e1(0xde)+_0x57800a+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x500de3['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x500de3['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x500de3['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x500de3['kda']+_0x1bb4e1(0xc6)+_0x500de3['winRate']+_0x1bb4e1(0xa0);}function getPlayerRankName(_0x1f0b00){if(_0x1f0b00>=0x7d0)return'Emerald';if(_0x1f0b00>=0x708)return'Gold';if(_0x1f0b00>=0x640)return'Silver';if(_0x1f0b00>=0x578)return'Bronze';return'Unranked';}async function getPlayersLastEloChanges(_0x112acd){const _0x1b05b7=a27_0x236d,_0x1155f5=new Map();_0x112acd['forEach'](_0x5a54bc=>{_0x1155f5['set'](_0x5a54bc,0x0);});try{const _0x5ecb48=collection(db,_0x1b05b7(0xe9)),_0x1e6451=await getDocs(_0x5ecb48),_0x3c6800=new Map(),_0x4be8f1=new Map();_0x1e6451['forEach'](_0x4d4fc2=>{const _0x7e846d=_0x1b05b7,_0x273b4e=_0x4d4fc2['data']();_0x273b4e['username']&&(_0x3c6800['set'](_0x4d4fc2['id'],_0x273b4e['username']),_0x4be8f1['set'](_0x273b4e['username'][_0x7e846d(0xbd)](),_0x4d4fc2['id']));});const _0x2439c7=collection(db,_0x1b05b7(0xd0)),_0xa6250=query(_0x2439c7,orderBy(_0x1b05b7(0xa4),'desc'),limit(0x12c)),_0x30b001=await getDocs(_0xa6250);if(_0x30b001['empty'])return console[_0x1b05b7(0xd9)](_0x1b05b7(0xf6)),_0x1155f5;if(_0x30b001['docs']['length']>0x0){const _0x2ac127=_0x30b001['docs'][0x0][_0x1b05b7(0xcf)]();if(_0x2ac127['player']&&_0x3c6800[_0x1b05b7(0xe2)](_0x2ac127['player'])){}}const _0xaea5fb=new Map();let _0x152b59=0x0;_0x30b001['forEach'](_0x3ddfe9=>{const _0x3dcb2d=_0x1b05b7,_0x373e0b=_0x3ddfe9['data']();let _0x3ce7db=null;if(_0x373e0b['player']&&_0x3c6800['has'](_0x373e0b[_0x3dcb2d(0xb3)]))_0x3ce7db=_0x3c6800[_0x3dcb2d(0x8f)](_0x373e0b['player']);else{if(_0x373e0b['username']&&_0x4be8f1['has'](_0x373e0b['username']['toLowerCase']()))_0x3ce7db=_0x373e0b['username'];else _0x373e0b['playerUsername']&&_0x4be8f1['has'](_0x373e0b['playerUsername'][_0x3dcb2d(0xbd)]())&&(_0x3ce7db=_0x373e0b['playerUsername']);}_0x3ce7db&&_0x112acd['includes'](_0x3ce7db)&&(_0x152b59++,!_0xaea5fb['has'](_0x3ce7db)&&_0xaea5fb['set'](_0x3ce7db,[]),_0xaea5fb[_0x3dcb2d(0x8f)](_0x3ce7db)['push']({..._0x373e0b,'timestamp':_0x373e0b['timestamp']?.[_0x3dcb2d(0xb9)]||0x0}));}),_0xaea5fb['forEach']((_0x36ae05,_0x380799)=>{const _0x1b410a=_0x1b05b7;if(_0x36ae05[_0x1b410a(0xd5)]>0x0){_0x36ae05['sort']((_0x2e68e7,_0x42effb)=>_0x42effb['timestamp']-_0x2e68e7['timestamp']);const _0x50a8ef=_0x36ae05[_0x1b410a(0xd3)](_0x3395a3=>_0x3395a3['change']!==undefined||_0x3395a3['newElo']!==undefined&&_0x3395a3['previousElo']!==undefined||_0x3395a3['newEloRating']!==undefined&&_0x3395a3[_0x1b410a(0xdb)]!==undefined);if(_0x50a8ef){let _0x1bc8f6;if(_0x50a8ef['change']!==undefined)_0x1bc8f6=parseInt(_0x50a8ef['change']);else{if(_0x50a8ef[_0x1b410a(0xf2)]!==undefined&&entry['previousElo']!==undefined)_0x1bc8f6=parseInt(_0x50a8ef['newElo'])-parseInt(_0x50a8ef['previousElo']);else _0x50a8ef['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x1bc8f6=parseInt(_0x50a8ef[_0x1b410a(0xab)])-parseInt(_0x50a8ef['oldEloRating']));}!isNaN(_0x1bc8f6)&&_0x1bc8f6!==0x0&&_0x1155f5['set'](_0x380799,_0x1bc8f6);}}});}catch(_0x4f3ba1){console[_0x1b05b7(0xed)](_0x1b05b7(0xcb),_0x4f3ba1);}return _0x1155f5;}async function updateLadderDisplay(_0x528163,_0x5d4e3d=null){const _0x3c7986=a27_0x236d,_0x1fd304=document[_0x3c7986(0xc1)](_0x3c7986(0xbe));if(!_0x1fd304){console[_0x3c7986(0xed)]('Ladder\x20table\x20body\x20not\x20found');return;}const _0x52ec2a=document['querySelector']('#ladder\x20thead\x20tr');_0x52ec2a&&(_0x52ec2a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x384c21=_0x528163['map'](_0x391858=>_0x391858['username']);!_0x5d4e3d&&(_0x5d4e3d=await fetchBatchMatchStats(_0x384c21));const _0x29518b=_0x528163['map'](_0x32b6c4=>{const _0x25c58d=_0x5d4e3d['get'](_0x32b6c4['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRow(_0x32b6c4,_0x25c58d);})['join']('');_0x1fd304['innerHTML']=_0x29518b,getPlayersLastEloChanges(_0x384c21)['then'](_0x423189=>{const _0x47c154=_0x3c7986,_0xae7643=new Map();_0x1fd304[_0x47c154(0xd4)]('tr')[_0x47c154(0xea)]((_0xb7c011,_0x20568a)=>{const _0x27842b=_0x47c154;_0x20568a<_0x384c21[_0x27842b(0xd5)]&&_0xae7643['set'](_0x384c21[_0x20568a],_0xb7c011);}),_0x423189['forEach']((_0x53e409,_0x161a5b)=>{const _0x72027d=_0x47c154,_0x4b49dd=_0xae7643['get'](_0x161a5b);if(_0x4b49dd&&_0x53e409!==0x0){const _0xa0342e=_0x4b49dd['querySelector']('td:nth-child(3)');if(_0xa0342e){const _0x40ae78=_0x53e409>0x0?'+'+_0x53e409:''+_0x53e409,_0x3a7335=_0xa0342e['querySelector'](_0x72027d(0xb8));if(_0x3a7335)_0x3a7335['textContent']=_0x40ae78,_0x3a7335['style']['color']=_0x53e409>0x0?_0x72027d(0xa6):'#F44336',_0x3a7335['style']['fontWeight']='bold',_0x3a7335['style']['fontSize']='0.85em',_0x3a7335['style']['display']='inline',_0x3a7335['style']['visibility']='visible',_0x3a7335['style'][_0x72027d(0xb6)]='1';else{}}}});})[_0x3c7986(0x92)](_0x46e203=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x46e203));}function initLadderToggles(){const _0x16dc9b=a27_0x236d,_0x1175d3=document['getElementById'](_0x16dc9b(0xd8)),_0x427527=document['getElementById']('d2-switch'),_0x4ca468=document['getElementById']('d3-switch'),_0x4475c9=document['getElementById'](_0x16dc9b(0xf9)),_0x232a1c=document['getElementById']('d1-ladder-container'),_0xa68b1c=document[_0x16dc9b(0xee)](_0x16dc9b(0xf0)),_0x75f1e8=document[_0x16dc9b(0xee)]('d3-ladder-container'),_0x33315b=document[_0x16dc9b(0xee)]('duos-ladder-container');function _0x1ff77a(){const _0x4334bc=_0x16dc9b;if(_0x232a1c)_0x232a1c['classList'][_0x4334bc(0xba)]('active');if(_0xa68b1c)_0xa68b1c['classList']['remove'](_0x4334bc(0xb5));if(_0x75f1e8)_0x75f1e8[_0x4334bc(0xd6)]['remove']('active');if(_0x33315b)_0x33315b['style'][_0x4334bc(0x97)]='none';if(_0x232a1c)_0x232a1c['style']['display']='none';if(_0xa68b1c)_0xa68b1c[_0x4334bc(0xeb)]['display']='none';if(_0x75f1e8)_0x75f1e8['style']['display']=_0x4334bc(0xf3);}_0x1175d3&&_0x1175d3['addEventListener'](_0x16dc9b(0xd1),()=>{const _0x500cff=_0x16dc9b;console[_0x500cff(0xd9)](_0x500cff(0xc0)),_0x1ff77a();_0x232a1c&&(_0x232a1c['classList']['add']('active'),_0x232a1c['style'][_0x500cff(0x97)]='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='block',document['getElementById']('elo-recommendation-text-d2')['style']['display']='none',document[_0x500cff(0xee)](_0x500cff(0xe4))[_0x500cff(0xeb)]['display']='none';if(_0x1175d3)_0x1175d3['classList']['add'](_0x500cff(0xb5));if(_0x427527)_0x427527['classList'][_0x500cff(0xba)]('active');if(_0x4ca468)_0x4ca468['classList']['remove'](_0x500cff(0xb5));displayLadder(),findBestOpponent('d1');}),_0x427527&&_0x427527['addEventListener']('click',()=>{const _0x3497b6=_0x16dc9b;console[_0x3497b6(0xd9)](_0x3497b6(0xa9)),_0x1ff77a();_0xa68b1c&&(_0xa68b1c[_0x3497b6(0xd6)]['add'](_0x3497b6(0xb5)),_0xa68b1c['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x3497b6(0x9b))['style'][_0x3497b6(0x97)]='block',document['getElementById'](_0x3497b6(0xe4))['style']['display']='none';if(_0x427527)_0x427527['classList']['add']('active');if(_0x1175d3)_0x1175d3[_0x3497b6(0xd6)]['remove'](_0x3497b6(0xb5));if(_0x4ca468)_0x4ca468['classList']['remove']('active');displayLadderD2(),findBestOpponent('d2');}),_0x4ca468&&_0x4ca468['addEventListener'](_0x16dc9b(0xd1),()=>{const _0x1be743=_0x16dc9b;console[_0x1be743(0xd9)]('D3\x20toggle\x20clicked'),_0x1ff77a();_0x75f1e8&&(_0x75f1e8['classList'][_0x1be743(0xe5)]('active'),_0x75f1e8['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')[_0x1be743(0xeb)]['display']=_0x1be743(0xf3),document['getElementById']('elo-recommendation-text-d3')[_0x1be743(0xeb)]['display']='block';if(_0x4ca468)_0x4ca468['classList'][_0x1be743(0xe5)]('active');if(_0x1175d3)_0x1175d3['classList']['remove']('active');if(_0x427527)_0x427527['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x4475c9&&_0x4475c9['addEventListener'](_0x16dc9b(0xd1),()=>{const _0x3df7a6=_0x16dc9b;_0x1ff77a();if(_0x33315b)_0x33315b['style'][_0x3df7a6(0x97)]=_0x3df7a6(0xbf);displayLadderDuos(),findBestOpponent(_0x3df7a6(0xe3)),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style'][_0x3df7a6(0x97)]='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']=_0x3df7a6(0xf3);});}document['addEventListener']('DOMContentLoaded',()=>{const _0x493694=a27_0x236d;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x493694(0xfc))['style']['display']=_0x493694(0xbf);});export{displayLadder};async function findBestOpponent(_0x48b47a='d1'){const _0x52508b=a27_0x236d,_0x3c39b6='elo-recommendation-text-'+_0x48b47a,_0xd8b40a=document['getElementById'](_0x3c39b6);if(!_0xd8b40a){console['error']('Recommendation\x20element\x20for\x20'+_0x48b47a+'\x20not\x20found');return;}const _0x162c64=auth[_0x52508b(0xef)];if(!_0x162c64){_0xd8b40a[_0x52508b(0xa1)]='';return;}try{const _0x13011c=doc(db,_0x52508b(0x9f),_0x162c64['uid']),_0x200d92=await getDoc(_0x13011c);if(!_0x200d92[_0x52508b(0xf1)]()){console['log'](_0x52508b(0xe7)),_0xd8b40a['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x633eec=_0x200d92['data'](),_0xe19b9a=_0x633eec['username'];if(!_0xe19b9a){_0xd8b40a['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x310946;switch(_0x48b47a){case'd1':_0x310946=_0x52508b(0xe9);break;case'd2':_0x310946='playersD2';break;case'd3':_0x310946='playersD3';break;case _0x52508b(0xe3):_0x310946='playersDuos';break;default:_0x310946='players';}if(_0x48b47a==='duos'){const _0x8ebd90=collection(db,_0x310946),_0x2776e7=query(_0x8ebd90,where('username','==',_0xe19b9a)),_0x1a2e0d=await getDocs(_0x2776e7);if(_0x1a2e0d['empty']){_0xd8b40a[_0x52508b(0xa1)]='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x35882f=_0x1a2e0d['docs'][0x0]['data'](),_0x163a43=parseInt(_0x35882f['eloRating'])||0x4b0;if(_0x35882f['hasTeam']&&_0x35882f['teammate']){_0xd8b40a[_0x52508b(0xe6)]=_0x52508b(0x95)+_0x35882f['teammate']+_0x52508b(0xa2);return;}const _0xaf1638=await getDocs(_0x8ebd90);let _0x12f03e=null,_0x50b503=-0x1;_0xaf1638['forEach'](_0xe789cb=>{const _0x51e2e1=_0x52508b,_0x7590c7=_0xe789cb[_0x51e2e1(0xcf)]();if(_0x7590c7['username']===_0xe19b9a)return;if(_0x7590c7['hasTeam'])return;const _0x412d47=parseInt(_0x7590c7['eloRating'])||0x4b0,_0x5a466f=Math['abs'](_0x412d47-_0x163a43),_0x27407b=Math['max'](0x0,0xc8-_0x5a466f);_0x27407b>_0x50b503&&(_0x12f03e=_0x7590c7,_0x50b503=_0x27407b);});if(_0x12f03e){const _0x5cd3ad=parseInt(_0x12f03e['eloRating'])||0x4b0;let _0x3d07c3='gray';if(_0x5cd3ad>=0x7d0)_0x3d07c3=_0x52508b(0xca);else{if(_0x5cd3ad>=0x708)_0x3d07c3='#FFD700';else{if(_0x5cd3ad>=0x640)_0x3d07c3=_0x52508b(0x96);else _0x5cd3ad>=0x578&&(_0x3d07c3='#CD7F32');}}_0xd8b40a['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x3d07c3+';\x22>'+_0x12f03e['username']+'</span>\x20(ELO:\x20'+_0x5cd3ad+')';}else _0xd8b40a['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x34fc10=collection(db,_0x310946),_0x517288=query(_0x34fc10,where(_0x52508b(0x93),'==',_0xe19b9a)),_0x2449da=await getDocs(_0x517288);if(_0x2449da['empty']){_0xd8b40a['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x48b47a['toUpperCase']()+_0x52508b(0xae);return;}const _0x2b130e=_0x2449da[_0x52508b(0xaf)][0x0]['data'](),_0xa59e3f=parseInt(_0x2b130e[_0x52508b(0xce)])||0x5dc,_0x463a39=await getDocs(_0x34fc10);let _0x404b1f=null,_0x4cb7ba=-0x1;const _0x4a0ddc=getPlayerRankName(_0xa59e3f);_0x463a39[_0x52508b(0xea)](_0x33fecc=>{const _0x2e6441=_0x52508b,_0xa84000=_0x33fecc[_0x2e6441(0xcf)]();if(_0xa84000['username']===_0xe19b9a)return;const _0x331bf1=parseInt(_0xa84000['eloRating'])||0x5dc,_0x206275=getPlayerRankName(_0x331bf1),_0x261403=Math[_0x2e6441(0x94)](_0x331bf1-_0xa59e3f),_0xcd0dfa=0x20,_0x528626=0x1/(0x1+Math[_0x2e6441(0xf4)](0xa,(_0x331bf1-_0xa59e3f)/0x190)),_0x5c9de8=Math['round'](_0xcd0dfa*(0x1-_0x528626));if(_0x5c9de8<=0x0)return;let _0x597fea=0x0;const _0x44cd2a=Math['max'](0x0,0x64-_0x261403*0.5),_0x47f360=_0x5c9de8>=0x3&&_0x5c9de8<=0x8?0x32:_0x5c9de8>0x0&&_0x5c9de8<0xf?0x1e:0xa,_0x5a157a=_0x4a0ddc===_0x206275?0x28:0x0;_0x597fea=_0x44cd2a+_0x47f360+_0x5a157a,_0x597fea>_0x4cb7ba&&(_0x404b1f=_0xa84000,_0x4cb7ba=_0x597fea);});if(_0x404b1f){const _0x3ff64a=parseInt(_0x404b1f['eloRating'])||0x5dc;let _0x4d25dc=_0x52508b(0xc4);if(_0x3ff64a>=0x7d0)_0x4d25dc='#50C878';else{if(_0x3ff64a>=0x708)_0x4d25dc=_0x52508b(0xc2);else{if(_0x3ff64a>=0x640)_0x4d25dc='#b9f1fc';else _0x3ff64a>=0x578&&(_0x4d25dc='#CD7F32');}}_0xd8b40a['innerHTML']=_0x52508b(0x9a)+_0xa59e3f+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x4d25dc+_0x52508b(0xb1)+_0x404b1f[_0x52508b(0x93)]+'</span>';}else _0xd8b40a[_0x52508b(0xe6)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0xa59e3f+')';}catch(_0x642f08){console[_0x52508b(0xed)]('Error\x20finding\x20best\x20opponent:',_0x642f08),_0xd8b40a['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0xbaee1=>{const _0x5e3ffa=a27_0x236d,_0x517e20=document[_0x5e3ffa(0xee)]('d1-ladder-container')&&document[_0x5e3ffa(0xee)]('d1-ladder-container')['style']['display']!=='none',_0x3ccf92=document['getElementById']('d2-ladder-container')&&document['getElementById'](_0x5e3ffa(0xf0))['style']['display']!=='none',_0x355d80=document['getElementById']('d3-ladder-container')&&document['getElementById']('d3-ladder-container')['style']['display']!=='none',_0x2de5cf=document['getElementById']('duos-ladder-container')&&document[_0x5e3ffa(0xee)]('duos-ladder-container')[_0x5e3ffa(0xeb)][_0x5e3ffa(0x97)]!=='none',_0x133ca2=_0x517e20?'d1':_0x3ccf92?'d2':_0x355d80?'d3':_0x2de5cf?'duos':'d1';findBestOpponent(_0x133ca2);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x210733=a27_0x236d,_0x25de3e=document['getElementById']('duos-switch'),_0x2db89a=document[_0x210733(0xc1)]('label[for=\x22duos-switch\x22]');_0x25de3e&&_0x2db89a&&(_0x25de3e[_0x210733(0xe0)]('change',async _0x4cc4a9=>{const _0x3c76c3=_0x210733;if(_0x4cc4a9[_0x3c76c3(0xc9)]['checked']){const _0x1b754b=auth?.[_0x3c76c3(0xef)],_0x3d7c05=await checkIfUserIsAdmin(_0x1b754b);if(!_0x3d7c05){_0x4cc4a9['preventDefault']();const _0x342313=document['getElementById']('d1-switch');return _0x342313&&(_0x342313[_0x3c76c3(0x9e)]=!![],_0x342313['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0xe709d6=>{const _0x53a0df=_0x210733,_0x52cc51=await checkIfUserIsAdmin(_0xe709d6);!_0x52cc51?(_0x25de3e['disabled']=!![],_0x2db89a[_0x53a0df(0xeb)]['opacity']='0.5',_0x2db89a['style'][_0x53a0df(0xdf)]='not-allowed',_0x2db89a['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x25de3e['disabled']=![],_0x2db89a['style'][_0x53a0df(0xb6)]='1',_0x2db89a[_0x53a0df(0xeb)]['cursor']='pointer',_0x2db89a['title']='');}));});async function checkIfUserIsAdmin(_0x18b43d){const _0x2d50a7=a27_0x236d;if(!_0x18b43d)return![];try{const _0x2fffcd=['admin@ladder.com','brian2af@outlook.com'];if(_0x18b43d['email']&&_0x2fffcd['includes'](_0x18b43d['email']['toLowerCase']()))return!![];const _0x4654ae=['userProfiles',_0x2d50a7(0xe9),'playersD2',_0x2d50a7(0xf7)],_0x27a03a=[_0x2d50a7(0xaa),'owner','council','creative\x20lead'];for(const _0x18e3a5 of _0x4654ae){try{const _0x517069=doc(db,_0x18e3a5,_0x18b43d['uid']),_0x135900=await getDoc(_0x517069);if(_0x135900['exists']()){const _0x14f8fc=_0x135900['data'](),_0x1253c3=(_0x14f8fc['roleName']||_0x14f8fc['role']||'')['toLowerCase']();if(_0x1253c3&&_0x27a03a[_0x2d50a7(0xa8)](_0x1253c3))return!![];}}catch(_0xe2238a){console['warn']('Error\x20checking\x20'+_0x18e3a5+':',_0xe2238a);}}return![];}catch(_0x2ccd90){return console['error']('Error\x20checking\x20admin\x20status:',_0x2ccd90),![];}}function showAdminOnlyMessage(){const _0x4f5b5f=a27_0x236d,_0x4449d4=document[_0x4f5b5f(0xee)]('admin-only-message');_0x4449d4&&_0x4449d4['remove']();const _0x493b56=document['createElement']('div');_0x493b56['id']='admin-only-message',_0x493b56['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x493b56['innerHTML']=_0x4f5b5f(0xf5),document['body'][_0x4f5b5f(0xa3)](_0x493b56),setTimeout(()=>{_0x493b56['parentNode']&&_0x493b56['remove']();},0xbb8);}