const a47_0x4431bd=a47_0x11a3,a47_0xa94436=(function(){let _0x4337fd=!![];return function(_0x4798af,_0x4f962b){const _0x365332=_0x4337fd?function(){if(_0x4f962b){const _0x27632b=_0x4f962b['apply'](_0x4798af,arguments);return _0x4f962b=null,_0x27632b;}}:function(){};return _0x4337fd=![],_0x365332;};}()),a47_0x3af756=a47_0xa94436(this,function(){const _0x4ff7bf=a47_0x11a3;let _0xfa648b;try{const _0x15e80d=Function(_0x4ff7bf(0x1ac)+_0x4ff7bf(0x1af)+');');_0xfa648b=_0x15e80d();}catch(_0x1668c0){_0xfa648b=window;}const _0x144032=_0xfa648b[_0x4ff7bf(0x1ba)]=_0xfa648b['console']||{},_0x2acf4f=['log','warn','info','error','exception',_0x4ff7bf(0x1b6),_0x4ff7bf(0x1b5)];for(let _0x48fa4a=0x0;_0x48fa4a<_0x2acf4f['length'];_0x48fa4a++){const _0x120b62=a47_0xa94436[_0x4ff7bf(0x1b8)]['prototype']['bind'](a47_0xa94436),_0x33e37f=_0x2acf4f[_0x48fa4a],_0x51f0ea=_0x144032[_0x33e37f]||_0x120b62;_0x120b62['__proto__']=a47_0xa94436[_0x4ff7bf(0x1b1)](a47_0xa94436),_0x120b62['toString']=_0x51f0ea['toString']['bind'](_0x51f0ea),_0x144032[_0x33e37f]=_0x120b62;}});a47_0x3af756();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a47_0x11a3(_0x2f4f45,_0x1c30ee){const _0x3af756=a47_0x5ca7();return a47_0x11a3=function(_0xa94436,_0x269a4b){_0xa94436=_0xa94436-0x1ac;let _0x5ca733=_0x3af756[_0xa94436];return _0x5ca733;},a47_0x11a3(_0x2f4f45,_0x1c30ee);}const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x48957e){const _0x349843=a47_0x11a3,_0x387f09=document['getElementById'](_0x349843(0x1b3));if(!_0x387f09)return;if(_0x48957e['length']===0x0){_0x387f09['style']['display']='none';return;}_0x387f09['style']['display']='block';let _0x383853='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x48957e['forEach'](_0x2121cf=>{_0x383853+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0x2121cf['username']||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0x2121cf['lastUpdated'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),_0x383853+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x387f09[_0x349843(0x1ad)]=_0x383853;}function formatQueueTime(_0x3f02e7){const _0x331665=a47_0x11a3;if(!_0x3f02e7)return'Just\x20now';const _0x29b65e=_0x3f02e7['toDate']?_0x3f02e7['toDate']():new Date(_0x3f02e7),_0x44024b=new Date(),_0x1598c1=Math['floor']((_0x44024b-_0x29b65e)/0xea60);if(_0x1598c1<0x1)return _0x331665(0x1b4);return _0x1598c1+_0x331665(0x1bb);}async function checkQueueTimeout(_0x442da5){const _0x2b42f0=a47_0x11a3;if(!_0x442da5['lastUpdated'])return;const _0x295fe7=_0x442da5['lastUpdated'][_0x2b42f0(0x1b2)]?_0x442da5['lastUpdated']['toDate']():new Date(_0x442da5[_0x2b42f0(0x1b0)]),_0x25df44=new Date(),_0x2be0f2=Math['floor']((_0x25df44-_0x295fe7)/0xea60);if(_0x2be0f2>=0x1e)try{const _0x32709c=doc(db,'readyPlayers',_0x442da5['id']);await updateDoc(_0x32709c,{'isReady':![]});}catch(_0x266efc){console[_0x2b42f0(0x1b9)]('Error\x20removing\x20player\x20from\x20queue:',_0x266efc);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x2809af=>{const _0x16eff5=[];_0x2809af['forEach'](_0x3ca984=>{const _0x571137=a47_0x11a3,_0x43bbeb=_0x3ca984[_0x571137(0x1b7)]();if(_0x43bbeb['isReady']===!![]){const _0xf16e48={'id':_0x3ca984['id'],'username':_0x43bbeb['username'],'lastUpdated':_0x43bbeb['lastUpdated']||new Date()};_0x16eff5['push'](_0xf16e48),checkQueueTimeout(_0xf16e48);}}),updateQueueDisplay(_0x16eff5);},_0x512421=>{console['error']('Error\x20in\x20queue\x20listener:',_0x512421);});window[a47_0x4431bd(0x1ae)]('unload',()=>{unsubscribe();});function a47_0x5ca7(){const _0x4a9d6d=['return\x20(function()\x20','innerHTML','addEventListener','{}.constructor(\x22return\x20this\x22)(\x20)','lastUpdated','bind','toDate','queue-container','Just\x20now','trace','table','data','constructor','error','console','m\x20in\x20queue'];a47_0x5ca7=function(){return _0x4a9d6d;};return a47_0x5ca7();}