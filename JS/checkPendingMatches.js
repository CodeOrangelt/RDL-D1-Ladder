const a10_0x5736fd=a10_0x2802;(function(_0x5def0b,_0x3f3f49){const _0x4e1455=a10_0x2802,_0x10a8bd=_0x5def0b();while(!![]){try{const _0x598b7b=parseInt(_0x4e1455(0xfc))/0x1+parseInt(_0x4e1455(0xe8))/0x2+-parseInt(_0x4e1455(0xe1))/0x3+parseInt(_0x4e1455(0xe9))/0x4+parseInt(_0x4e1455(0xea))/0x5+-parseInt(_0x4e1455(0xcb))/0x6*(-parseInt(_0x4e1455(0xcc))/0x7)+parseInt(_0x4e1455(0x109))/0x8*(-parseInt(_0x4e1455(0xdb))/0x9);if(_0x598b7b===_0x3f3f49)break;else _0x10a8bd['push'](_0x10a8bd['shift']());}catch(_0x1c09fa){_0x10a8bd['push'](_0x10a8bd['shift']());}}}(a10_0x3b1d,0x753cf));function a10_0x3b1d(){const _0x55e708=['empty','username','display','prototype','DOMContentLoaded','block','search','currentUser','zIndex','pendingMatchesCache','data','1480068RgIeuK','all','playersD3','email','top','removeItem','2305794uzYznV','absolute','console','style','Error\x20fetching\x20username:','users','split','162574yLIXdq','2995916mhYFbN','1436350yTKKKD','__proto__','apply','width','exception','2px\x20solid\x20white','report-match-notification','(((.+)+)+)+$','uid','body','10px','table','pendingMatchesD2','info','log','now','height','setItem','121240LYsHce','right','bind','playersD2','position','parse','borderRadius','-8px','error','approved','#ff3b30','constructor','winnerUsername','40ZiRTqf','currentUsername','pendingMatches','userId','disconnect','toString','pendingMatchesD3','addEventListener','getItem','stringify','docs','getElementById','7914jiXrqE','4417wkITdG','return\x20(function()\x20','none','winnerEmail'];a10_0x3b1d=function(){return _0x55e708;};return a10_0x3b1d();}const a10_0x58371d=(function(){let _0x2b1488=!![];return function(_0x626871,_0x4a581a){const _0x2678d1=_0x2b1488?function(){const _0xd2e8b8=a10_0x2802;if(_0x4a581a){const _0x1aad47=_0x4a581a[_0xd2e8b8(0xec)](_0x626871,arguments);return _0x4a581a=null,_0x1aad47;}}:function(){};return _0x2b1488=![],_0x2678d1;};}()),a10_0x24165c=a10_0x58371d(this,function(){const _0x39be95=a10_0x2802;return a10_0x24165c[_0x39be95(0xc4)]()['search'](_0x39be95(0xf1))[_0x39be95(0xc4)]()[_0x39be95(0x107)](a10_0x24165c)[_0x39be95(0xd6)](_0x39be95(0xf1));});a10_0x24165c();const a10_0x5e3ecc=(function(){let _0xd4752d=!![];return function(_0x343b81,_0xa9ede9){const _0x4b21cb=_0xd4752d?function(){const _0x21967f=a10_0x2802;if(_0xa9ede9){const _0x307621=_0xa9ede9[_0x21967f(0xec)](_0x343b81,arguments);return _0xa9ede9=null,_0x307621;}}:function(){};return _0xd4752d=![],_0x4b21cb;};}()),a10_0x1f3a59=a10_0x5e3ecc(this,function(){const _0x392a41=a10_0x2802,_0x5af402=function(){const _0x55fc20=a10_0x2802;let _0x38a0ba;try{_0x38a0ba=Function(_0x55fc20(0xcd)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1d1f0f){_0x38a0ba=window;}return _0x38a0ba;},_0x51dd56=_0x5af402(),_0x4650e3=_0x51dd56['console']=_0x51dd56[_0x392a41(0xe3)]||{},_0x2933d4=[_0x392a41(0xf8),'warn',_0x392a41(0xf7),_0x392a41(0x104),_0x392a41(0xee),_0x392a41(0xf5),'trace'];for(let _0x330380=0x0;_0x330380<_0x2933d4['length'];_0x330380++){const _0x5217e0=a10_0x5e3ecc[_0x392a41(0x107)][_0x392a41(0xd3)][_0x392a41(0xfe)](a10_0x5e3ecc),_0x25d4c3=_0x2933d4[_0x330380],_0x275322=_0x4650e3[_0x25d4c3]||_0x5217e0;_0x5217e0[_0x392a41(0xeb)]=a10_0x5e3ecc[_0x392a41(0xfe)](a10_0x5e3ecc),_0x5217e0['toString']=_0x275322['toString'][_0x392a41(0xfe)](_0x275322),_0x4650e3[_0x25d4c3]=_0x5217e0;}});function a10_0x2802(_0x24b4e4,_0x111399){const _0x1f6237=a10_0x3b1d();return a10_0x2802=function(_0x1f3a59,_0x5e3ecc){_0x1f3a59=_0x1f3a59-0xc3;let _0x5a18fc=_0x1f6237[_0x1f3a59];return _0x5a18fc;},a10_0x2802(_0x24b4e4,_0x111399);}a10_0x1f3a59();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10_0x5736fd(0xd9),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x523288=![]){const _0x4c80f7=a10_0x5736fd,_0x2a0e92=Date[_0x4c80f7(0xf9)](),_0xb1ca7d=checkNotificationCache();if(_0xb1ca7d!==null&&!_0x523288){updateNotificationDot(_0xb1ca7d);if(_0x2a0e92-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x2a0e92;const _0x52373d=auth[_0x4c80f7(0xd7)];if(!_0x52373d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x5001bc,_0x22a852,_0x1f74a8]=await Promise[_0x4c80f7(0xdc)]([checkForPendingMatchesInCollection(_0x52373d,_0x4c80f7(0x10b)),checkForPendingMatchesInCollection(_0x52373d,_0x4c80f7(0xf6)),checkForPendingMatchesInCollection(_0x52373d,_0x4c80f7(0xc5))]),_0x1bec78=_0x5001bc||_0x22a852||_0x1f74a8;updateNotificationDot(_0x1bec78),updateNotificationCache(_0x1bec78);}catch(_0x3e0a73){console[_0x4c80f7(0x104)]('Error\x20checking\x20pending\x20matches:',_0x3e0a73);}}async function checkForPendingMatchesInCollection(_0x1ebd3d,_0x2fdc8a){const _0x575f46=a10_0x5736fd,_0x5a60ea=_0x1ebd3d[_0x575f46(0xf2)],_0x52fb65=_0x1ebd3d[_0x575f46(0xde)],_0x4932bb=query(collection(db,_0x2fdc8a),where('winnerId','==',_0x5a60ea),where(_0x575f46(0x105),'==',![])),_0x1a1447=await getDocs(_0x4932bb);if(!_0x1a1447[_0x575f46(0xd0)])return!![];if(_0x52fb65){const _0x3b8429=query(collection(db,_0x2fdc8a),where(_0x575f46(0xcf),'==',_0x52fb65),where('approved','==',![])),_0x1e65a8=await getDocs(_0x3b8429);if(!_0x1e65a8[_0x575f46(0xd0)])return!![];}let _0x341b59=await getUsernameFromAllSources(_0x1ebd3d);if(_0x341b59){const _0x4e3df2=query(collection(db,_0x2fdc8a),where(_0x575f46(0x108),'==',_0x341b59),where(_0x575f46(0x105),'==',![])),_0x40d095=await getDocs(_0x4e3df2);if(!_0x40d095[_0x575f46(0xd0)])return!![];}return![];}async function getUsernameFromAllSources(_0x1282b7){const _0x17ecb9=a10_0x5736fd,_0x4c0133=localStorage[_0x17ecb9(0xc7)](_0x17ecb9(0x10a));if(_0x4c0133)return _0x4c0133;try{const [_0x528ec9,_0x57e957,_0x370cf2]=await Promise[_0x17ecb9(0xdc)]([getDocs(query(collection(db,'players'),where(_0x17ecb9(0x10c),'==',_0x1282b7[_0x17ecb9(0xf2)]))),getDocs(query(collection(db,_0x17ecb9(0xff)),where(_0x17ecb9(0x10c),'==',_0x1282b7[_0x17ecb9(0xf2)]))),getDocs(query(collection(db,_0x17ecb9(0xdd)),where(_0x17ecb9(0x10c),'==',_0x1282b7['uid'])))]);if(!_0x528ec9[_0x17ecb9(0xd0)]){const _0x1792ff=_0x528ec9['docs'][0x0][_0x17ecb9(0xda)]()[_0x17ecb9(0xd1)];return localStorage[_0x17ecb9(0xfb)](_0x17ecb9(0x10a),_0x1792ff),_0x1792ff;}if(!_0x57e957[_0x17ecb9(0xd0)]){const _0x55b160=_0x57e957[_0x17ecb9(0xc9)][0x0][_0x17ecb9(0xda)]()['username'];return localStorage[_0x17ecb9(0xfb)]('currentUsername',_0x55b160),_0x55b160;}if(!_0x370cf2[_0x17ecb9(0xd0)]){const _0x335c34=_0x370cf2[_0x17ecb9(0xc9)][0x0][_0x17ecb9(0xda)]()[_0x17ecb9(0xd1)];return localStorage[_0x17ecb9(0xfb)](_0x17ecb9(0x10a),_0x335c34),_0x335c34;}const _0x36b702=await getDoc(doc(db,_0x17ecb9(0xe6),_0x1282b7[_0x17ecb9(0xf2)]));if(_0x36b702['exists']()&&_0x36b702[_0x17ecb9(0xda)]()['username']){const _0x9ff3d5=_0x36b702[_0x17ecb9(0xda)]()[_0x17ecb9(0xd1)];return localStorage[_0x17ecb9(0xfb)]('currentUsername',_0x9ff3d5),_0x9ff3d5;}}catch(_0x51ac05){console[_0x17ecb9(0x104)](_0x17ecb9(0xe5),_0x51ac05);}if(_0x1282b7[_0x17ecb9(0xde)])return _0x1282b7['email'][_0x17ecb9(0xe7)]('@')[0x0];return null;}function updateNotificationCache(_0x4365d1){const _0x3c741d=a10_0x5736fd,_0x591f4a={'status':_0x4365d1,'timestamp':Date[_0x3c741d(0xf9)]()};localStorage[_0x3c741d(0xfb)](NOTIFICATION_CACHE_KEY,JSON[_0x3c741d(0xc8)](_0x591f4a));}function checkNotificationCache(){const _0x14d1db=a10_0x5736fd,_0x446fce=localStorage[_0x14d1db(0xc7)](NOTIFICATION_CACHE_KEY);if(!_0x446fce)return null;try{const {status:_0x54fc4e,timestamp:_0x493331}=JSON[_0x14d1db(0x101)](_0x446fce),_0x191da8=Date['now']();if(_0x191da8-_0x493331<CACHE_EXPIRY)return _0x54fc4e;}catch(_0x257e70){}return null;}export function updateNotificationDot(_0x3b715c){const _0x347116=a10_0x5736fd,_0x501d2e=new MutationObserver((_0x2ad686,_0x19976c)=>{const _0x24fe27=a10_0x2802,_0x4d34eb=document[_0x24fe27(0xca)](_0x24fe27(0xf0));_0x4d34eb&&(updateDotStyle(_0x4d34eb,_0x3b715c),_0x19976c[_0x24fe27(0xc3)]());});_0x501d2e['observe'](document[_0x347116(0xf3)],{'childList':!![],'subtree':!![]});const _0x5a7420=document[_0x347116(0xca)]('report-match-notification');_0x5a7420&&(updateDotStyle(_0x5a7420,_0x3b715c),_0x501d2e[_0x347116(0xc3)]()),setTimeout(()=>_0x501d2e[_0x347116(0xc3)](),0x1388);}function updateDotStyle(_0x334bca,_0x4d098e){const _0x304ecb=a10_0x5736fd;_0x4d098e?(_0x334bca[_0x304ecb(0xe4)][_0x304ecb(0xd2)]=_0x304ecb(0xd5),_0x334bca[_0x304ecb(0xe4)]['backgroundColor']=_0x304ecb(0x106),_0x334bca[_0x304ecb(0xe4)][_0x304ecb(0xed)]=_0x304ecb(0xf4),_0x334bca[_0x304ecb(0xe4)][_0x304ecb(0xfa)]=_0x304ecb(0xf4),_0x334bca[_0x304ecb(0xe4)][_0x304ecb(0x100)]=_0x304ecb(0xe2),_0x334bca[_0x304ecb(0xe4)][_0x304ecb(0xdf)]='-5px',_0x334bca['style'][_0x304ecb(0xfd)]=_0x304ecb(0x103),_0x334bca['style'][_0x304ecb(0x102)]='50%',_0x334bca['style']['border']=_0x304ecb(0xef),_0x334bca['style'][_0x304ecb(0xd8)]='999'):_0x334bca[_0x304ecb(0xe4)][_0x304ecb(0xd2)]=_0x304ecb(0xce);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x5736fd(0xc6)](a10_0x5736fd(0xd4),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x2d5af0=a10_0x2802;localStorage[_0x2d5af0(0xe0)](_0x2d5af0(0x10a)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});