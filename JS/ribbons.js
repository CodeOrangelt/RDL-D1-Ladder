const a50w=a50b;(function(a,b){const v=a50b,c=a();while(!![]){try{const d=parseInt(v(0xd4))/0x1*(-parseInt(v(0x101))/0x2)+-parseInt(v(0x105))/0x3+parseInt(v(0x134))/0x4+-parseInt(v(0x122))/0x5+-parseInt(v(0x120))/0x6*(parseInt(v(0xde))/0x7)+parseInt(v(0xb4))/0x8*(-parseInt(v(0xad))/0x9)+parseInt(v(0xfc))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a50a,0xe8f76));import{auth,db}from'./firebase-config.js';import{doc,getDoc,setDoc,collection,query,where,getDocs,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const RIBBON_DEFINITIONS={'Rematch\x20Ribbon':{'description':a50w(0x142),'image':a50w(0x132),'color':a50w(0x130)},'Overachiever\x20Ribbon':{'description':a50w(0xf4),'image':'../images/ribbons/Overachiever.png','color':'#96CEB4','levels':[0x64,0xc8,0x12c,0x190,0x1f4,0x258,0x2bc,0x320,0x384,0x3e8]},'Brick\x20Wall':{'description':'Amass\x20at\x20least\x2080%\x20overall\x20win\x20rate\x20percentage\x20(minimum\x2050\x20matches)','image':a50w(0x128),'color':a50w(0xda),'levels':[0x50,0x55,0x5a,0x5f,0x64]},'Collector\x20Ribbon':{'description':'Hold\x20more\x20than\x205\x20ribbons\x20at\x20a\x20time','image':'../images/ribbons/Collector.png','color':a50w(0x11b),'levels':[0x5,0xa,0xf,0x14,0x19,0x1e,0x23,0x28,0x2d,0x32]},'Sub-Gamer\x20Ribbon':{'description':'Play\x20over\x2050\x20subgame\x20matches','image':a50w(0x91),'color':'#A29BFE','levels':[0x32,0x64,0x96,0xc8,0xfa,0x12c,0x15e,0x190,0x1c2,0x1f4]},'Explorer\x20Ribbon':{'description':a50w(0x138),'image':'../images/ribbons/Explorer.png','color':'#55A3FF','levels':[0x14,0x28,0x3c,0x50,0x64,0x78,0x8c,0xa0,0xb4,0xc8]},'Socialite\x20Ribbon':{'description':a50w(0x126),'image':a50w(0xe6),'color':a50w(0x118),'levels':[0xa,0xf,0x14,0x19,0x1e,0x23,0x28,0x2d,0x32,0x37]},'Underdog\x20Ribbon':{'description':a50w(0x9a),'image':'../images/ribbons/Underdog.png','color':a50w(0xf0),'levels':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa]},'Domination\x20Ribbon':{'description':'Beat\x205\x20unique\x20pilots\x20in\x20a\x20rank\x20(including\x20your\x20own)','image':'../images/ribbons/Domination.png','color':a50w(0x137),'levels':[0x1,0x2,0x3,0x4,0x5]},'Top\x20Bronze\x20Pilot':{'description':a50w(0x9e),'image':a50w(0x14a),'color':'#CD7F32'},'Top\x20Silver\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Silver\x20rank','image':a50w(0x14a),'color':a50w(0x133)},'Top\x20Gold\x20Pilot':{'description':a50w(0x9f),'image':a50w(0x14a),'color':a50w(0xfb)},'Top\x20Emerald\x20Pilot':{'description':a50w(0xe1),'image':'../images/ribbons/toprank.png','color':'#50C878'}};export const RIBBON_CSS=a50w(0x10f);function a50a(){const aj=['iejHzgDL','qMvHDcbHihbPBg90ihDPDgGGDgHLicjszw1HDgnOiIbZDwjNyw1LihnLBgvJDgvK','rxjYB3iGy2HLy2TPBMCGDg9WihjHBMSGC3rHDhvZoG','rg9TAw5HDgLVBIbsAwjIB24','u29JAwfSAxrLifjPyMjVBG','8j+uJsbdAgvJA2LUzYbuB3aG','zw50CMLLCW','ktOG','z2v0sxrLBq','lI4VAw1Hz2vZl3jPyMjVBNmVDg9WCMfUAY5WBMC','z2v0','CMf0Aw5N','pc9KAxy+','q29SBgvJDg9YifjPyMjVBG','ic0Gtgv2zwWG','CMvTB3zLsxrLBq','z2v0ugXHEwvYrgf0yunHy2HLza','oYi+cIaGicaGicaGicaGicaGicaGicaG','igvHCM5Lzca','AxnvBMrLCMrVz1zPy3rVCNLgyxn0','lI4VAw1Hz2vZl3jPyMjVBNmVu3vIz2fTzxiUCg5N','CMvTyxrJAfDPBNm','ifbPBg90','ig5LDY91CgrHDgvKihjPyMjVBNmGzM9Yia','ig1HDgnOzxm','D2LUBMvYvxnLCM5HBwu','ksaTig5LDYbTyxrJAcbKzxrLy3rLza','yxbWCM92zwrnyxrJAgvZ','BwvTB3j5q2fJAgu','qMvHDcbHihbPBg90ihjHBMTLzcbOAwDOzxiGDgHHBIb5B3u','8j+oRYbgB3vUzca','Bwf0y2HLCW','zMLUzeLUzgv4','q2XHAw1Lzcb0AguGAgLNAgvZDcbZCg90ig9UihrOzsbSywrKzxiGzM9YiejYB256zsbYyw5R','q2XHAw1Lzcb0AguGAgLNAgvZDcbZCg90ig9UihrOzsbSywrKzxiGzM9YieDVBgqGCMfUAW','pgKGy2XHC3m9iMzHCYbMys1ZDgfYihjPyMjVBI1KzxzPy2uGyNjVBNPLlxn0yxiIpJWVAt4','A2v5','vw5Yyw5Rzwq','z2v0ugXHEwvYuMLIyM9UC0nHy2HLza','4P2mie5VihbSyxLLCIbKyxrHigzVDw5KigzVCIa','DgLTzxn0yw1W','zxzHBhvHDgvcCMLJA1DHBgXsAwjIB25gCM9Tv2LUuMf0zq','4P2mie5VDcb1BMrLCMrVzZOG','zxzHBhvHDgvdB2XSzwn0B3jsAwjIB25gCM9Tq291BNq','Dw5KzxjKB2DxAw5Z','CgvUzgLUz0v2ywX1yxrPB25Z','Bgv2zwXZ','rxjYB3iGC2f2Aw5NihjPyMjVBNm6','mJy5mtq1AvjHsxrg','8j+tIIa','qKfuq0HFrevmqvK','8j+rKsborvCGvg9WifjHBMSGqwnOAwv2zw1LBNq6ia','t3zLCMfJAgLLDMvYifjPyMjVBG','Dw5KzwzPBMvK','z2v0q2fJAgvtDgf0CW','mJaWuxvdB1j0','z2v0uMLIyM9Uq2fJAgvtDgf0CW','C2v0','yxbWCM92zwrnyxrJAgvZrdi','rxjYB3iGz2v0DgLUzYbWBgf5zxiGzgf0ysbMB3iG','AM9PBG','CMLIyM9UCW','BgfZDenSzwfUDxa','4P2mievYCM9YigLUihjPyMjVBIbLDMfSDwf0Aw9UoG','u3rHBMrHCMq','CgXHEwvYrgf0yunHy2HL','8j+rKsbeB21PBMf0Aw9UifjPyMjVBIbHD2fYzgvKoIbmzxzLBca','Dw5PCxvLt3bWB25LBNrZ','zMXVB3i','iJ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0ICMLIyM9UlwLTywDLlwnVBNrHAw5LCIi+cIaGicaGicaGicaGicaGica8Aw1NihnYyZ0I','Bg9ZzxjsyxrPBMC','C29YDa','C2v0sxrLBq','BwfW','Dg9mB2nHBgvuAw1Lu3rYAw5N','zxzHBhvHDgvbBgXsAwjIB25ZrNjVBurHDge','rxHWBg9YzxiGuMLIyM9U','zxjYB3i','Bgv2zwWTmq','zgvSzxrL','ihbSyxLLCIbYzwnVCMrZigzVCIb1BMrLCMrVzYbJywXJDwXHDgLVBNmUlI4','igLZifvUCMfUA2vKicG','ievmtYKSia','8j+gLsbozxCGDg9WihjHBMSGywnOAwv2zw1LBNrZigzVDw5KigzVCIbJywnOzwqGCgXHEwvYia','D2LUBMvYuMf0Aw5N','yMf0y2HuAw1LCG','cIaGicaGicaGpc9KAxy+cIaGica','mJLSy0PRCvK','AgfZ','4P2mie5VievmtYbYyxrPBMCGzgf0ysbMB3iG','C2v0q2fJAgvKtwf0y2HLCW','Bg9ZzxjvC2vYBMfTzq','zxzHBhvHDgvtB2nPywXPDgvsAwjIB25gCM9Tq291BNq','i0yWotmYqG','ihzZia','A2v5CW','igjLyxqG','ndyYnZbizM5Wwuq','ihbSyxLLCNmGzNjVBsa','BwfWugXHEwvK','q2XHAw1Lzcb0AguGAgLNAgvZDcbZCg90ig9UihrOzsbSywrKzxiGzM9YievTzxjHBgqGCMfUAW','cIaGicaGicaGicaGicaGica8l2rPDJ4kicaGicaGicaGicaGpc9KAxy+cIaGicaGicaGicaGia','zM9YrwfJAa','ywrK','q0fdsevFrfvsqvrjt04','lI4VAw1Hz2vZl3jPyMjVBNmVu29JAwfSAxrLlNbUzW','uMvTyxrJAcbsAwjIB24','CgXHEwvYC0qY','BM93','CgXHEwvYC0qZ','8j+oRYbvtKrfuKrprZOG','pgKGy2XHC3m9iMzHCYbMys1ZDgfYihjPyMjVBI1KzxzPy2uGC2LSDMvYlxn0yxiIpJWVAt4','y2HLy2TuB3bsyw5Ru3rHDhvZ','Bgv2zwW','CgfYC2u','i0zgotuWma','zxzHBhvHDgvfEhbSB3jLCLjPyMjVBKzYB21dB3vUDa','8j+uJsbdAgvJA2LUzYb1BMrLCMrVzZOGv2LUBMvYka','qNjPy2SGv2fSBa','ugXHEwvKig92zxiGmtaWig1HDgnOzxm','Dw5PCxvLtwfWCW','Bgv2zwWTmG','Dg9gAxHLza','Aw52ywXPzgf0zvbSyxLLCKnHy2HL','D2LUCW','BgvUz3rO','i0zgrdCWma','ndy1mdm5mdbKAevnqNG','ifjPyMjVBG','ihvUzgvYzg9NihzPy3rVCMLLCYbMB3iG','ksb2CYbmB3nLCIG','ievmtYaO','mZC2nJjXBMnNtwm','y2XLyw51Ca','C2L6zq','C3vIz2fTzu1HDgnOzxm','nti4nta1ofvxvMD4qq','BwLU','ChvZAa','q0Xfqu5vuf9jtLrfuLzbta','ywXS','Bg9N','C3rHCNrZv2L0Aa','Bwf0y2HdB3vUDa','zxzHBhvHDgvtDwjhyw1LCLjPyMjVBKzYB21dB3vUDa','yxnZAwDU','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zwz0oIa1mcu7cIaGicb0CMfUC2zVCM06ihrYyw5ZBgf0zvGOltuWjsK7cIaGicbIywnRz3jVDw5KoIbYz2jHkdaSmcWWldaUotuPoWOGicaGy29SB3i6ihDOAxrLoWOGicaGCgfKzgLUzZOGohb4ideYChG7cIaGicbIB3jKzxiTCMfKAxvZoIa2ChG7cIaGicbMB250lxnPEMu6ideYChG7cIaGicb3AgL0zs1ZCgfJztOGBM93CMfWoWOGicaGB3bHy2L0EtOGmdSkicaGihbVAw50zxiTzxzLBNrZoIbUB25LoWOGicaGDhjHBNnPDgLVBJOGB3bHy2L0EsaWlJnZoWOGicaGEI1PBMrLEdOGmtaWmdSkicaGihrLEhqTywXPz246ignLBNrLCJSkicaGig1HCMDPBI1IB3r0B206idHWEdSkicaGigjVCMrLCJOGmxb4ihnVBgLKihjNyMeOmJu1lcaYntuSidi1nsWGmc4YktSkFqOklM1PBgL0yxj5lxjPyMjVBJPOB3zLCJO6yMvMB3jLihSkicaGig9WywnPDhK6ide7cN0kcI8QifjLC3bVBNnPDMuGywrQDxn0BwvUDhmGkI8kqg1LzgLHicHTyxGTD2LKDgG6ideWmJrWEcKGEWOGicaGlM1PBgL0yxj5lxjPyMjVBIb7cIaGicaGicaGD2LKDgG6ideWmhb4oWOGicaGicaGigHLAwDODdOGmZrWEdSkicaGicaGicbTyxjNAw46idHWEca4ChGGohb4ida7cIaGicb9cIaGicakicaGic5YAwjIB24Tzgv2AwnLihSkicaGicaGicbMB250lxnPEMu6ideYChG7cIaGicb9cIaGicakicaGic5YAwjIB24TBgv2zwWTAw5KAwnHDg9YihSkicaGicaGicb3Awr0AdOGmJbWEdSkicaGicaGicbOzwLNAhq6idiWChG7cIaGicaGicaGzM9UDc1ZAxPLoIaXmhb4oWOGicaGicaGihrVCdOGltzWEdSkicaGicaGicbYAwDODdOGltzWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YB3C6BNrOlwnOAwXKkgv2zw4PihSkicaGicaGicbTyxjNAw4TBgvMDdOGntjWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1Uyw1LihSkicaGicaGicbMB250lxnPEMu6ideYChG7cIaGicaGicaGyM90Dg9ToIaTmJbWEdSkicaGih0kFqOkqg1LzgLHicHTyxGTD2LKDgG6idC2ohb4ksb7cIaGicaUBwLSAxrHCNKTCMLIyM9UihSkicaGicaGicb3Awr0AdOGodbWEdSkicaGicaGicbOzwLNAhq6idi4ChG7cIaGicaGicaGBwfYz2LUoIa2ChGGnNb4idzWEcaWoWOGicaGFqOGicaGcIaGicaUCMLIyM9UlwrLDMLJzsb7cIaGicaGicaGzM9UDc1ZAxPLoIaXmhb4oWOGicaGFqOGicaGcIaGicaUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCIb7cIaGicaGicaGD2LKDgG6ide4ChG7cIaGicaGicaGAgvPz2H0oIaXohb4oWOGicaGicaGigzVBNqTC2L6ztOGoxb4oWOGicaGicaGihrVCdOGltvWEdSkicaGicaGicbYAwDODdOGltvWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YB3C6BNrOlwnOAwXKkgv2zw4PihSkicaGicaGicbTyxjNAw4TBgvMDdOGndjWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1Uyw1LihSkicaGicaGicbMB250lxnPEMu6ideXChG7cIaGicaGicaGyM90Dg9ToIaTmtHWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YywnRlwLUBgLUzsb7cIaGicaGicaGz2fWoIa1ChG7cIaGicb9cN0kcKbTzwrPysaOBwf4lxDPzhrOoIa0odbWEcKGEWOGicaGlM1PBgL0yxj5lxjPyMjVBIb7cIaGicaGicaGD2LKDgG6idCWChG7cIaGicaGicaGAgvPz2H0oIaYnhb4oWOGicaGicaGig1HCMDPBJOGnxb4idvWEca1ChGGmdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YB3C6BNrOlwnOAwXKkgv2zw4PihSkicaGicaGicbTyxjNAw4TBgvMDdOGmZzWEdSkicaGih0kicaGiaOGicaGlNjPyMjVBI1YywnRlwLUBgLUzsb7cIaGicaGicaGz2fWoIa0ChG7cIaGicb9cIaGicakicaGic5YAwjIB24TBgv2zwWTAw5KAwnHDg9YihSkicaGicaGicb3Awr0AdOGmtzWEdSkicaGicaGicbOzwLNAhq6ide2ChG7cIaGicaGicaGzM9UDc1ZAxPLoIa4ChG7cIaGicaGicaGDg9WoIaTnhb4oWOGicaGicaGihjPz2H0oIaTnhb4oWOGicaGFqP9cGOUC3rHDhmTz3jPzcaUCMLIyM9UlxnLy3rPB24GEWOGicaGyMfJA2DYB3vUzdOGDhjHBNnWyxjLBNq7cIaGicbIB3jKzxi6ig5VBMu7cIaGicbWywrKAw5NoIaWoWP9cGOUC3rHDhmTz3jPzcaUCMLIyM9Ulxn0yxqTAxrLBsb7cIaGicbIywnRz3jVDw5KlwnVBg9YoIbYz2jHkdaSidaSidaSidaUmYK7cIaGicbWywrKAw5NoIaYnxb4oWOGicaGyM9YzgvYlxjHzgL1CZOGmtbWEdSkicaGihrLEhqTywXPz246ignLBNrLCJSkFqOklNn0yxrZlwDYAwqGlNjPyMjVBI1ZDgf0lwL0zw0GlNn0yxqTBgfIzwWGEWOGicaGzM9UDc1ZAxPLoIaXnNb4oWOGicaGDgv4Dc10CMfUC2zVCM06ihvWCgvYy2fZztSkicaGig9WywnPDhK6idaUotSkicaGig1HCMDPBI1IB3r0B206idiWChG7cIaGicbJB2XVCJOGCMDIysGYntuSidi1nsWGmJu1lcaWlJK1ktSkicaGigzVBNqTD2vPz2H0oIbIB2XKoWP9cGOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc0XihSGyMfJA2DYB3vUzdOGiZGWoda4mdSGFqOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc0YihSGyMfJA2DYB3vUzdOGi0nen0yZmJSGFqOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc0ZihSGyMfJA2DYB3vUzdOGi2i5zJfMyZSGFqOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc00ihSGyMfJA2DYB3vUzdOGi0zgrdCWmdSGFqOUCMLIyM9UlwXLDMvSlwLUzgLJyxrVCI5SzxzLBc01lxbSDxmGEYbIywnRz3jVDw5KoIaJntbdodC4oYb9cG','yxv0B0nSzwfUDxa','C2v0q2fJAgvKrgf0yq','rxjYB3iGz2v0DgLUzYbWBgf5zxiGCMLIyM9UCZO','8j+sVIbdywnOzsbOAxqGkgXVy2fSu3rVCMfNzsKGzM9Yia','vw5KzxjKB2CGuMLIyM9U','zxzHBhvHDgveB21PBMf0Aw9UuMLIyM9UrNjVBvjHBMTZ','4PQG77Ipie5Vign1CNjLBNqGCgXHEwvYigrHDgeGzM91BMqGzM9Yia','C3vIz2fTzvr5Cgu','i0zgnZy3nq','zxzHBhvHDgvpDMvYywnOAwv2zxjsAwjIB25gCM9Tq291BNq','C3rYAw5NAwz5','iZzdnunfnW','zw5KC1DPDgG','4P2mievYCM9YigzLDgnOAw5Nig1HDgnOzxm6','8j+pHIbvBMrLCMrVzYbsAwjIB24GDxbNCMfKztOGtgv2zwWG','8j+oRYbvtKrfuKrprYbwsunut1jzoIa','nZaYz09yA3bp','pc9KAxy+cIaGicaGicaGicaGia','mta2otGWnxDyDM1mDW','8j+AGcbcDwXRigXVywrPBMCG','iIakicaGicaGicaGicaGicaGicaGicaGywX0psi','ievmtYK','ugXHEwvKigf0igXLyxn0ideWihvUAxf1zsbWAwXVDhm','C2f2zvbSyxLLCLjPyMjVBNnpChrPBwL6zwq','lI4VAw1Hz2vZl3jPyMjVBNmVqNjPy2TxywXSlNbUzW','Dg90ywXnyxrJAgvZ','zgf0yq','u3vIluDHBwvYifjPyMjVBG','uMvTyxrJAa','zg9JCW','Bwf0y2HLC1bSyxLLza','z2v0ugXHEwvYtwf0y2HLC09WDgLTAxPLza','i0zgnKi2qG','DxnLCM5HBwu','lI4VAw1Hz2vZl3jPyMjVBNmVuMvTyxrJAc5WBMC','i0mWqZbdma','mtm4nJmYngruAfvuuW','z2v0q2fJAgvKrgf0yq','zwXVuMf0Aw5N','iZHfndrbra','ugXHEwvKigf0igXLyxn0idiWihvUAxf1zsbTyxbZ','Bgv2zwWTmW','yNvSA0XVywrqBgf5zxjeyxrH','8j+rKsbeB21PBMf0zwqG','Bwf0y2HdywnOzq','pgKGy2XHC3m9iMzHCYbMys1ZDgfYihjPyMjVBI1KzxzPy2uGz29Szc1ZDgfYiJ48l2K+','zxzHBhvHDgvvBMrLCMrVz1jPyMjVBKzYB21dB3vUDa','8j+tIIbcDwXRigXVywrLzca','CgXHEwvYCW'];a50a=function(){return aj;};return a50a();}class RibbonCacheManager{constructor(){const x=a50w;this['memoryCache']=new Map(),this[x(0xe5)]=0x3c*0x3c*0x3e8,this['CACHE_KEY_PREFIX']='ribbon_cache_',this[x(0xbb)]=Date[x(0xe9)](),this[x(0x108)]=0x1e*0x3c*0x3e8;}['getCacheKey'](a,b){return''+this['CACHE_KEY_PREFIX']+a+'_'+b;}[a50w(0x135)](a,b){const y=a50w;this[y(0x110)]();const c=this['getCacheKey'](a,b);if(this['memoryCache']['has'](c)){const f=this[y(0x99)]['get'](c);if(Date['now']()-f[y(0xa5)]<this['CACHE_DURATION'])return console[y(0x10a)]('🚀\x20Cache\x20hit\x20(memory)\x20for\x20'+a),f['data'];this[y(0x99)]['delete'](c);}const d=localStorage[y(0x149)](c);if(d)try{const g=JSON[y(0xef)](d);if(Date[y(0xe9)]()-g[y(0xa5)]<this[y(0xe5)])return this[y(0x99)]['set'](c,{'data':g['ribbons'],'timestamp':g['timestamp'],'matchCount':g['matchCount']}),console[y(0x10a)](y(0x113)+a),g['ribbons'];localStorage[y(0x150)](c);}catch(h){localStorage[y(0x150)](c);}return null;}[a50w(0x111)](a,b,c,d){const z=a50w,f=this['getCacheKey'](a,b),g=Date['now']();this[z(0x99)][z(0xb6)](f,{'data':c,'timestamp':g,'matchCount':d});try{const h={'ribbons':c,'matchCount':d,'timestamp':g,'version':0x3};localStorage[z(0xc5)](f,JSON['stringify'](h));}catch(i){this['clearOldCache']();try{localStorage['setItem'](f,JSON[z(0x11a)](data));}catch(j){}}}['shouldRefreshCache'](a,b,c){const A=a50w,d=this['getCacheKey'](a,b);if(this[A(0x99)][A(0xd5)](d)){const g=this['memoryCache'][A(0x14b)](d);return g[A(0x10c)]!==c;}const f=localStorage['getItem'](d);if(f)try{const h=JSON[A(0xef)](f);return h['matchCount']!==c;}catch(i){return!![];}return!![];}[a50w(0xf8)](a,b){const B=a50w,c=this['getCacheKey'](a,b);this[B(0x99)][B(0xcc)](c),localStorage[B(0x150)](c),console[B(0x10a)]('🗑️\x20Invalidated\x20cache\x20for\x20'+a+'\x20('+b+B(0x97));}[a50w(0x110)](){const C=a50w,a=Date[C(0xe9)]();a-this['lastCleanup']>this['CLEANUP_INTERVAL']&&(this[C(0x102)](),this['lastCleanup']=a);}[a50w(0x102)](){const D=a50w,a=Date['now']();let b=0x0,c=0x0;for(const [d,f]of this[D(0x99)][D(0x147)]()){a-f[D(0xa5)]>this[D(0xe5)]&&(this['memoryCache'][D(0xcc)](d),b++);}for(let g=localStorage[D(0xfa)]-0x1;g>=0x0;g--){const h=localStorage['key'](g);if(h&&h['startsWith'](this['CACHE_KEY_PREFIX']))try{const j=JSON[D(0xef)](localStorage['getItem'](h));a-j[D(0xa5)]>this[D(0xe5)]&&(localStorage['removeItem'](h),c++);}catch(k){localStorage['removeItem'](h),c++;}}}['clearOldCache'](){const E=a50w,a=[];for(let c=0x0;c<localStorage[E(0xfa)];c++){const d=localStorage['key'](c);if(d&&d[E(0x10b)](this['CACHE_KEY_PREFIX']))try{const f=JSON['parse'](localStorage['getItem'](d));a[E(0x107)]({'key':d,'timestamp':f[E(0xa5)]});}catch(g){localStorage['removeItem'](d);}}a[E(0xc4)]((h,j)=>h[E(0xa5)]-j[E(0xa5)]);const b=Math[E(0xc1)](a['length']/0x2);for(let h=0x0;h<b;h++){localStorage['removeItem'](a[h][E(0xa1)]);}}['getCacheStats'](){const F=a50w;return{'memoryEntries':this[F(0x99)][F(0x103)],'lastCleanup':new Date(this[F(0xbb)])['toLocaleTimeString']()};}}class MatchCacheManager{constructor(){const G=a50w;this[G(0x13c)]=new Map(),this[G(0xe5)]=0xf*0x3c*0x3e8,this[G(0xbb)]=Date[G(0xe9)]();}['getCachedMatches'](a,b){const H=a50w;this[H(0x110)]();const c=a+'_'+b,d=this[H(0x13c)][H(0x14b)](c);if(d&&Date['now']()-d['timestamp']<this[H(0xe5)])return console[H(0x10a)]('🎯\x20Cache\x20hit\x20(matches)\x20for\x20'+a),d[H(0x9c)];return d&&this['matchCache'][H(0xcc)](c),null;}[a50w(0xd7)](a,b,c){const I=a50w,d=a+'_'+b;this['matchCache'][I(0xb6)](d,{'matches':c,'timestamp':Date['now']()});}[a50w(0x110)](){const J=a50w,a=Date['now']();if(a-this['lastCleanup']>0x5*0x3c*0x3e8){let b=0x0;for(const [c,d]of this[J(0x13c)]['entries']()){a-d['timestamp']>this['CACHE_DURATION']&&(this[J(0x13c)][J(0xcc)](c),b++);}this[J(0xbb)]=a;}}[a50w(0xb3)](){const K=a50w;return{'entries':this['matchCache']['size'],'lastCleanup':new Date(this['lastCleanup'])[K(0xc7)]()};}}class RibbonSystem{constructor(){const L=a50w;this[L(0xaa)]=new Map(),this[L(0xd2)]=null,this[L(0xaf)]=0x32,this[L(0xbe)]=new Map();}async[a50w(0x13a)](a,b){const M=a50w,c=b==='D1'?M(0x140):b==='D2'?M(0xe8):'playersD3',d=collection(db,c),e=await getDocs(d),f=new Map();return e[M(0xe3)](g=>{const N=M,h=g[N(0x12a)]();h['username']&&(h[N(0x136)]!==undefined&&(h['rating']=h[N(0x136)]),f[N(0xb6)](h['username'],h));}),console['log'](M(0x13f)+f[M(0x103)]+M(0xdf)+c),f;}async[a50w(0xc8)](a,b,c,d){const O=a50w,e={},f=b[O(0x131)],g={'totalMatches':a['length'],'wins':0x0,'rematchWins':0x0,'subgameMatches':0x0,'uniqueMaps':new Set(),'uniqueOpponents':new Set(),'underdogWins':0x0,'dominatedRanks':new Set()},h=new Set();a['forEach'](p=>{const q=p['winnerUsername']===f,r=q?p['loserUsername']:p['winnerUsername'];if(r)h['add'](r);}),console['log'](O(0x123)+h[O(0x103)]+O(0xcd));const i=await this['bulkLoadPlayerData']([...h,f],d),j=i[O(0x14b)](f);!j&&console[O(0x10a)]('⚠️\x20No\x20current\x20player\x20data\x20found\x20for\x20'+f);const k={0x0:new Set(),0x1:new Set(),0x2:new Set(),0x3:new Set(),0x4:new Set()};a[O(0xe3)](p=>{const P=O,q=p['winnerUsername']===f,r=q?p['loserUsername']:p[P(0x96)];if(q){g['wins']++;p['subgameType']===P(0x12c)&&g['rematchWins']++;this[P(0x90)](p,f,j,i)&&g[P(0xa9)]++;const s=i['get'](r);if(s){const t=s['eloRating']||0x0,u=getPlayerRankTier(t);k[u]['add'](r);}}p['subgameType']&&p[P(0x117)]!=='Standard'&&g[P(0x104)]++,p[P(0xe0)]&&g[P(0xf5)][P(0xe4)](p[P(0xe0)]),r&&g['uniqueOpponents']['add'](r);}),Object[O(0xdc)](k)['forEach'](p=>{const Q=O;k[p][Q(0x103)]>=0x5&&g['dominatedRanks']['add'](parseInt(p));}),console[O(0x10a)]('🎯\x20Found\x20'+g['underdogWins']+O(0xfe)+f),console['log'](O(0x13b)+g['dominatedRanks'][O(0x103)]+'\x20ranks:\x20['+Array['from'](g['dominatedRanks'])[O(0xc6)](p=>getRankTierName(p))['join'](',\x20')+']');const l=g[O(0x129)]>0x0?g[O(0xf9)]/g['totalMatches']*0x64:0x0,m=[[O(0xb1),this['evaluateOverachieverRibbonFromCount'](g[O(0x129)],c)],[O(0xe7),this['evaluateRematchRibbonFromCount'](g[O(0x92)],c)],[O(0x12b),this['evaluateSubGamerRibbonFromCount'](g['subgameMatches'],c)],['Explorer\x20Ribbon',this[O(0xf1)](g[O(0xf5)][O(0x103)],c)],['Socialite\x20Ribbon',this[O(0xd9)](g['uniqueOpponents'][O(0x103)],c)],['Brick\x20Wall',this[O(0xa6)](l,c,g['totalMatches'])],['Underdog\x20Ribbon',this[O(0x13e)](g[O(0xa9)],c)],[O(0x144),this['evaluateDominationRibbonFromRanks'](g['dominatedRanks']['size'],c)]];m[O(0xe3)](([p,q])=>{q&&(e[p]=q);});const n=Object[O(0xdc)](c)[O(0xfa)]+Object['keys'](e)[O(0xfa)],o=this[O(0xa8)](n,c);return o&&(e['Collector\x20Ribbon']=o),e;}[a50w(0x115)](a,b){const R=a50w;if(a===0x0)return null;const c=b['Domination\x20Ribbon']||{'level':0x0};if(a>c[R(0xee)]){const d=[];for(let e=0x0;e<a;e++){d[R(0x107)](getRankTierName(e));}return console['log'](R(0xbf)+c['level']+'\x20→\x20'+a+'\x20(Dominated:\x20'+d['join'](',\x20')+')'),{'level':a,'awardedAt':new Date(),'dominatedRanks':d};}return null;}async[a50w(0xed)](a,b){const S=a50w;try{const c=b==='D1'?S(0x140):b==='D2'?'playersD2':'playersD3',d=await this['getPlayerDataCached'](a,b);if(!d||d[S(0x136)]===undefined)return console[S(0x10a)](S(0xd6)+a),null;const e=d[S(0x136)],f=getPlayerRankTier(e),g=getRankTierName(f);if(g===S(0xa2))return console[S(0x10a)]('❌\x20'+a+S(0xce)+e+'\x20ELO)'),null;console[S(0x10a)](S(0x146)+g+'\x20status\x20for\x20'+a+'\x20('+e+S(0x125));const h=collection(db,c),i=await getDocs(h);let j=null,k=-0x1,l=0x0;i['forEach'](n=>{const T=S,o=n['data'](),p=o['eloRating']||0x0,q=getPlayerRankTier(p);q===f&&(l++,p>k&&(k=p,j=o[T(0x131)]));});const m=j===a;return console['log'](S(0xae)+g+'\x20Tier:\x20'+l+'\x20players,\x20Top:\x20'+j+'\x20('+k+S(0xcf)+a+'\x20is\x20#1:\x20'+m),m?g:null;}catch(n){return console[S(0xca)](S(0x143),n),null;}}async['evaluateTopRankRibbon'](a,b,c){const U=a50w,d=await this[U(0xed)](a,b),e={};if(d){const f='Top\x20'+d+U(0x93);if(RIBBON_DEFINITIONS[f]){const g=c[f];!g?(console['log'](U(0xb0)+a+U(0x153)+f+'!'),e[f]={'level':0x1,'awardedAt':new Date(),'rank':d,'achievedAt':new Date()}):console[U(0x10a)]('✅\x20'+a+'\x20already\x20has\x20'+f+'\x20-\x20No\x20changes\x20needed');}}return Object[U(0xdc)](c)['forEach'](h=>{const V=U;h['startsWith']('Top\x20')&&h[V(0x11c)](V(0x93))&&(!e[h]&&console['log']('✅\x20Preserving\x20existing\x20'+h));}),e;}async['evaluateAllRibbonsForPlayerOptimized'](a,b='D1'){const W=a50w;try{const c=ribbonCache['getCachedData'](a,b);if(c){const k=await this['evaluateTopRankRibbon'](a,b,c);if(Object['keys'](k)['length']>0x0){console['log'](W(0xd0)+a),await this['savePlayerRibbonsOptimized'](a,k,b);const l={...c,...k};return ribbonCache[W(0x111)](a,b,l,0x0),l;}return c;}const [d,e]=await Promise['all']([this[W(0x151)](a,b),this['getPlayerRibbonsCached'](a,b)]);if(!d)return{};const f=d[W(0x12e)]||0x0,g=await this['evaluateTopRankRibbon'](a,b,e);if(!ribbonCache['shouldRefreshCache'](a,b,f)){if(Object['keys'](g)['length']>0x0){await this['savePlayerRibbonsOptimized'](a,g,b);const m={...e,...g};return ribbonCache['setCachedData'](a,b,m,f),m;}return ribbonCache[W(0x111)](a,b,e,f),e;}const h=await this['getPlayerMatchesOptimized'](a,b),i=await this[W(0xc8)](h,d,e,b);Object[W(0x10e)](i,g);Object['keys'](i)[W(0xfa)]>0x0&&(console['log']('💾\x20Saving\x20'+Object[W(0xdc)](i)[W(0xfa)]+W(0x94)+a),await this[W(0x127)](a,i,b));const j={...e,...i};return ribbonCache['setCachedData'](a,b,j,h['length']),j;}catch(n){return console[W(0xca)](W(0xbc),n),{};}}async['isUnderdogVictory'](a,b,c){const X=a50w,d=a['winnerUsername']===b;if(!d)return![];const e=a['loserUsername'],[f,g]=await Promise[X(0x109)]([this[X(0x151)](b,c),this['getPlayerDataCached'](e,c)]);if(!f||!g)return console[X(0x10a)]('⚠️\x20Missing\x20player\x20data\x20for\x20'+b+'\x20or\x20'+e),![];const h=f['eloRating']||0x0,i=g['eloRating']||0x0,j=getPlayerRankTier(h),k=getPlayerRankTier(i);console['log'](X(0xf2)+b+X(0x148)+h+'\x20ELO\x20('+getRankTierName(j)+X(0xff)+e+X(0x148)+i+X(0x100)+getRankTierName(k)+')');if(k>j)return console['log'](X(0x11f)+getRankTierName(j)+X(0xdd)+getRankTierName(k)+'!'),!![];return console[X(0x10a)](X(0xa7)+getRankTierName(j)+X(0xdb)+getRankTierName(k)),![];}[a50w(0x90)](a,b,c,d){const Y=a50w,e=a[Y(0x96)]===b;if(!e)return![];const f=a[Y(0xd8)],g=d[Y(0x14b)](f);if(!c||!g)return![];const h=c['eloRating']||0x0,i=g[Y(0x136)]||0x0,j=getPlayerRankTier(h),k=getPlayerRankTier(i);if(k>j)return console['log'](Y(0xeb)+getRankTierName(j)+'('+h+')\x20beat\x20'+getRankTierName(k)+'('+i+')'),!![];return![];}async['evaluateAllRibbonsFromData'](a,b,c,d){const Z=a50w,e={},f=b['username'],g={'totalMatches':a[Z(0xfa)],'wins':0x0,'rematchWins':0x0,'subgameMatches':0x0,'uniqueMaps':new Set(),'uniqueOpponents':new Set(),'underdogWins':0x0},h=new Set();a['forEach'](o=>{const a0=Z,p=o[a0(0x96)]===f,q=p?o['loserUsername']:o['winnerUsername'];if(q)h[a0(0xe4)](q);}),console['log'](Z(0x123)+h['size']+Z(0xcd));const i=await this['bulkLoadPlayerData']([...h,f],d),j=i['get'](f);!j&&console['log'](Z(0x116)+f);a['forEach'](o=>{const a1=Z,p=o[a1(0x96)]===f,q=p?o['loserUsername']:o[a1(0x96)];p&&(g[a1(0xf9)]++,o[a1(0x117)]===a1(0x12c)&&g['rematchWins']++,this[a1(0x90)](o,f,j,i)&&g[a1(0xa9)]++),o[a1(0x117)]&&o[a1(0x117)]!==a1(0xbd)&&g['subgameMatches']++,o['mapPlayed']&&g['uniqueMaps'][a1(0xe4)](o[a1(0xe0)]),q&&g['uniqueOpponents'][a1(0xe4)](q);}),console[Z(0x10a)](Z(0x9b)+g[Z(0xa9)]+'\x20underdog\x20victories\x20for\x20'+f);const k=g['totalMatches']>0x0?g['wins']/g['totalMatches']*0x64:0x0,l=[['Overachiever\x20Ribbon',this[Z(0x119)](g[Z(0x129)],c)],['Rematch\x20Ribbon',this['evaluateRematchRibbonFromCount'](g['rematchWins'],c)],[Z(0x12b),this[Z(0x10d)](g['subgameMatches'],c)],[Z(0xc9),this[Z(0xf1)](g['uniqueMaps']['size'],c)],[Z(0x145),this['evaluateSocialiteRibbonFromCount'](g[Z(0xc0)]['size'],c)],[Z(0xf3),this['evaluateBrickWallRibbonFromWinRate'](k,c,g['totalMatches'])],['Underdog\x20Ribbon',this[Z(0x13e)](g[Z(0xa9)],c)]];l[Z(0xe3)](([o,p])=>{p&&(e[o]=p);});const m=Object['keys'](c)['length']+Object['keys'](e)[Z(0xfa)],n=this['evaluateCollectorRibbonFromCount'](m,c);return n&&(e[Z(0x14e)]=n),e;}async[a50w(0x12f)](a,b){const a2=a50w,c=matchCache['getCachedMatches'](a,b);if(c)return c;try{const d=b==='D1'?a2(0x98):b==='D2'?a2(0xb7):'approvedMatchesD3',e=collection(db,d),[f,g]=await Promise[a2(0x109)]([getDocs(query(e,where('winnerUsername','==',a))),getDocs(query(e,where(a2(0xd8),'==',a)))]),h=new Set(),i=[];return f[a2(0xe3)](j=>{const a3=a2;if(!h['has'](j['id'])){h['add'](j['id']);const k={'id':j['id'],...j[a3(0x12a)]()};if(!k[a3(0xd1)])k['winnerRating']=0x0;if(!k['loserRating'])k['loserRating']=0x0;i[a3(0x107)](k);}}),g['forEach'](j=>{const a4=a2;if(!h[a4(0xd5)](j['id'])){h['add'](j['id']);const k={'id':j['id'],...j[a4(0x12a)]()};if(!k[a4(0xd1)])k['winnerRating']=0x0;if(!k[a4(0xc3)])k[a4(0xc3)]=0x0;i['push'](k);}}),matchCache[a2(0xd7)](a,b,i),i;}catch(j){return console['error'](a2(0x11d),j),[];}}async[a50w(0x151)](a,b){const a5=a50w;try{const c=b==='D1'?a5(0x140):b==='D2'?a5(0xe8):a5(0xea),d=collection(db,c),e=query(d,where(a5(0x131),'==',a),limit(0x1)),f=await getDocs(e);if(f['empty'])return console[a5(0x10a)](a5(0xa4)+a+'\x20in\x20'+c),null;const g=f[a5(0x12d)][0x0][a5(0x12a)]();return g['eloRating']!==undefined&&(g[a5(0x14c)]=g[a5(0x136)]),console[a5(0x10a)]('✅\x20Found\x20player\x20data\x20for\x20'+a+':\x20ELO\x20'+g[a5(0x136)]+',\x20Position\x20'+g['position']),g;}catch(h){return console[a5(0xca)](a5(0xb8)+a+':',h),null;}}async[a50w(0xa3)](a,b){const a6=a50w;try{const c='playerRibbons'+(b==='D1'?'':b),d=doc(db,c,a),e=await getDoc(d);return e['exists']()?e['data']()[a6(0xba)]||{}:{};}catch(f){return console[a6(0xca)](a6(0x112),f),{};}}async['savePlayerRibbonsOptimized'](a,b,c){const a7=a50w;try{const d='playerRibbons'+(c==='D1'?'':c),e=doc(db,d,a),f=await this[a7(0xa3)](a,c),g={...f,...b};await setDoc(e,{'username':a,'ladder':c,'ribbons':g,'lastUpdated':new Date()},{'merge':!![]});}catch(h){console['error'](a7(0xac),h);}}[a50w(0x119)](a,b){const a8=a50w,c=b[a8(0xb1)]||{'level':0x0},d=RIBBON_DEFINITIONS['Overachiever\x20Ribbon']['levels'],e=d['findIndex'](g=>a<g),f=e===-0x1?d[a8(0xfa)]:e;if(f>c[a8(0xee)])return{'level':f,'awardedAt':new Date()};return null;}['evaluateRematchRibbonFromCount'](a,b){if(a===0x0)return null;const c=b['Rematch\x20Ribbon']||{'level':0x0};if(a>c['level'])return{'level':a,'awardedAt':new Date()};return null;}[a50w(0x10d)](a,b){const a9=a50w,c=b['Sub-Gamer\x20Ribbon']||{'level':0x0},d=RIBBON_DEFINITIONS[a9(0x12b)][a9(0xab)],e=d[a9(0x9d)](g=>a<g),f=e===-0x1?d[a9(0xfa)]:e;if(f>c[a9(0xee)])return{'level':f,'awardedAt':new Date()};return null;}[a50w(0xf1)](a,b){const aa=a50w,c=b[aa(0xc9)]||{'level':0x0},d=RIBBON_DEFINITIONS[aa(0xc9)]['levels'],e=d[aa(0x9d)](g=>a<g),f=e===-0x1?d['length']:e;if(f>c['level'])return{'level':f,'awardedAt':new Date()};return null;}['evaluateSocialiteRibbonFromCount'](a,b){const ab=a50w,c=b[ab(0x145)]||{'level':0x0},d=RIBBON_DEFINITIONS[ab(0x145)][ab(0xab)],e=d[ab(0x9d)](g=>a<g),f=e===-0x1?d[ab(0xfa)]:e;if(f>c['level'])return{'level':f,'awardedAt':new Date()};return null;}['evaluateBrickWallRibbonFromWinRate'](a,b,c){const ac=a50w;if(c<0x32)return console[ac(0x10a)]('⚠️\x20Brick\x20Wall\x20ribbon\x20requires\x2050+\x20matches\x20(player\x20has\x20'+c+')'),null;const d=b['Brick\x20Wall']||{'level':0x0},e=RIBBON_DEFINITIONS[ac(0xf3)]['levels'],f=e[ac(0x9d)](h=>a<h),g=f===-0x1?e['length']:f;if(g>d[ac(0xee)])return console['log']('🏆\x20Brick\x20Wall\x20ribbon\x20awarded:\x20'+a[ac(0xf7)](0x1)+'%\x20win\x20rate\x20over\x20'+c+ac(0x95)),{'level':g,'awardedAt':new Date(),'winRate':a,'matchesPlayed':c};return null;}[a50w(0xa8)](a,b){const ad=a50w,c=b['Collector\x20Ribbon']||{'level':0x0},d=RIBBON_DEFINITIONS['Collector\x20Ribbon']['levels'],e=d[ad(0x9d)](g=>a<g),f=e===-0x1?d['length']:e;if(f>c[ad(0xee)])return{'level':f,'awardedAt':new Date()};return null;}['evaluateUnderdogRibbonFromCount'](a,b){const ae=a50w;if(a===0x0)return null;const c=b['Underdog\x20Ribbon']||{'level':0x0},d=RIBBON_DEFINITIONS[ae(0x114)]['levels'];let e=0x0;for(let f=0x0;f<d[ae(0xfa)];f++){if(a>=d[f])e=f+0x1;else break;}if(e>c[ae(0xee)])return console['log'](ae(0x11e)+c[ae(0xee)]+'\x20→\x20'+e+'\x20('+a+'\x20underdog\x20wins)'),{'level':e,'awardedAt':new Date()};return null;}}function getPlayerRankTier(a){if(a===undefined||a===null)return 0x0;const b=Number(a);if(isNaN(b))return 0x0;if(b>=0x7d0)return 0x4;if(b>=0x708)return 0x3;if(b>=0x640)return 0x2;if(b>=0x578)return 0x1;return 0x0;}function getRankTierName(a){const af=a50w,b=['Unranked','Bronze','Silver','Gold','Emerald'];return b[a]||af(0xa2);}const ribbonSystem=new RibbonSystem(),ribbonCache=new RibbonCacheManager(),matchCache=new MatchCacheManager();typeof window!==a50w(0xb2)&&(window[a50w(0xb5)]=()=>{return{'ribbon':ribbonCache['getCacheStats'](),'match':matchCache['getCacheStats']()};});export async function evaluatePlayerRibbons(a,b='D1'){return await ribbonSystem['evaluateAllRibbonsForPlayerOptimized'](a,b);}function a50b(a,b){const c=a50a();return a50b=function(d,e){d=d-0x90;let f=c[d];if(a50b['hSmnIw']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a50b['owaWpT']=g,a=arguments,a50b['hSmnIw']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a50b['owaWpT'](f),a[i]=f):f=j,f;},a50b(a,b);}export function getRibbonHTML(a,b){const ag=a50w,c=RIBBON_DEFINITIONS[a];if(!c)return'';const d=b[ag(0xee)]||0x1,e=a['replace'](ag(0xfd),'')['replace'](ag(0x141),''),f=i=>{const ah=ag;if(i<=0x1)return ah(0xcb);if(i<=0x2)return ah(0xf6);if(i<=0x3)return ah(0x139);if(i<=0x4)return'level-4';return'level-5-plus';},g=j=>{const ai=ag;if(j<=0x1)return'';const k=[];if(j>=0x2&&j<=0x4){const l=Math[ai(0x106)](j-0x1,0x3);for(let m=0x0;m<l;m++){k[ai(0x107)](ai(0xa0));}}if(j>=0x5&&j<=0x7){k['push'](ai(0xec));const n=Math['min'](j-0x5,0x2);for(let o=0x0;o<n;o++){k[ai(0x107)]('<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20bronze-star\x22></i>');}}return j>=0x8&&k['push'](ai(0x13d)),k['length']>0x0?'<div\x20class=\x22ribbon-devices\x22>'+k[ai(0xb9)]('')+'</div>':'';},h=c['description']+ag(0x14f)+d;return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22military-ribbon\x22\x20data-tooltip=\x22'+h+ag(0xc2)+c['image']+ag(0x124)+a+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22ribbon-image\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27block\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-fallback\x22\x20style=\x22display:\x20none;\x20background:\x20'+c['color']+ag(0x152)+e['substring'](0x0,0x6)+ag(0xe2)+g(d)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-name\x22>'+e+ag(0x121)+(d>0x1?'<div\x20class=\x22ribbon-level-indicator\x20'+f(d)+'\x22>'+d+ag(0x14d):'')+ag(0xd3);}