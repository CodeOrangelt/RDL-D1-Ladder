const a24_0x253d9d=a24_0x3524,a24_0x3fe34e=(function(){let _0x4aa740=!![];return function(_0xdf238b,_0x592fae){const _0x281900=_0x4aa740?function(){const _0x10a68f=a24_0x3524;if(_0x592fae){const _0x55b56b=_0x592fae[_0x10a68f(0x213)](_0xdf238b,arguments);return _0x592fae=null,_0x55b56b;}}:function(){};return _0x4aa740=![],_0x281900;};}()),a24_0x430921=a24_0x3fe34e(this,function(){const _0x173343=a24_0x3524,_0x5dd208=function(){let _0x7b5a9e;try{_0x7b5a9e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1a4875){_0x7b5a9e=window;}return _0x7b5a9e;},_0x32fcfc=_0x5dd208(),_0x12072a=_0x32fcfc['console']=_0x32fcfc['console']||{},_0x324cc4=['log','warn',_0x173343(0x1d5),_0x173343(0x210),'exception','table','trace'];for(let _0x58c959=0x0;_0x58c959<_0x324cc4['length'];_0x58c959++){const _0x161fae=a24_0x3fe34e['constructor']['prototype'][_0x173343(0x1fb)](a24_0x3fe34e),_0x466fb3=_0x324cc4[_0x58c959],_0x3aac1e=_0x12072a[_0x466fb3]||_0x161fae;_0x161fae['__proto__']=a24_0x3fe34e[_0x173343(0x1fb)](a24_0x3fe34e),_0x161fae['toString']=_0x3aac1e['toString'][_0x173343(0x1fb)](_0x3aac1e),_0x12072a[_0x466fb3]=_0x161fae;}});a24_0x430921();function a24_0x3524(_0x4db9a1,_0x108154){const _0x430921=a24_0x5ada();return a24_0x3524=function(_0x3fe34e,_0x4b1b5f){_0x3fe34e=_0x3fe34e-0x1d3;let _0x5adab1=_0x430921[_0x3fe34e];return _0x5adab1;},a24_0x3524(_0x4db9a1,_0x108154);}import{auth,db}from'./firebase-config.js';import{collection,query,where,orderBy,getDocs,doc,updateDoc,onSnapshot,limit,startAfter}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a24_0x5ada(){const _0x154276=['updateNotificationCount','pending','info','gameInvitations','createdAt','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Cancel\x20Invitation\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</strong></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<textarea\x20id=\x22response-message\x22\x20placeholder=\x22Type\x20your\x20message\x20here...\x22\x20rows=\x224\x22></textarea>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20id=\x22send-response\x22>Send\x20Message</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x22\x20id=\x22cancel-response\x22>Cancel</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','teamColor','createInvitationCard','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20respond-btn\x22\x20data-action=\x22respond\x22\x20data-invitation-id=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-overlay\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-content\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2090vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-header\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20space-between;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-bottom:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-close\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-body\x20textarea\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#1a1a1a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20resize:\x20vertical;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.modal-footer\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gap:\x200.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-top:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','#cancel-response','Message\x20sent!\x20(Feature\x20will\x20be\x20fully\x20implemented\x20in\x20future\x20update)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-inbox\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-inbox\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>No\x20','innerHTML','teamData','team_invite','getElementById','fromUserId','length','addEventListener','d\x20ago','message','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22team-invite-preview\x22\x20style=\x22background:\x20#1a1a1a;\x20padding:\x201rem;\x20border-radius:\x204px;\x20margin:\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20style=\x22color:\x20','dataset','forEach','loadInvitations','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','response-message','updateInvitationStatus','cancelled','remove','style','toUsername','data','getTimeAgo','status','inbox-content','\x22\x20created\x20successfully!','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','bind','active','sentInvitations','currentFilter','value','map','desc','sentUnsubscribe','filter','docs','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-card\x20','\x20invitations</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','hasMore','fromUsername','sent-invitation','outbox','appendChild','unsubscribe','modal-styles','lastDoc','error','Invitations\x20you\x20send\x20to\x20other\x20players\x20will\x20appear\x20here.','renderInvitations','apply','uid','openResponseModal','./ladderduos.js','click','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22modal-close\x22>&times;</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Regarding\x20invitation\x20to:\x20<strong>','toLocaleDateString','createElement','invitations','floor'];a24_0x5ada=function(){return _0x154276;};return a24_0x5ada();}class InboxManager{constructor(){const _0x1a3f1a=a24_0x3524;this['currentFilter']=_0x1a3f1a(0x1d4),this['invitations']=[],this[_0x1a3f1a(0x1fd)]=[],this[_0x1a3f1a(0x20d)]=null,this[_0x1a3f1a(0x202)]=null,this['pageSize']=0x14,this[_0x1a3f1a(0x20f)]=null,this[_0x1a3f1a(0x208)]=!![],this['init']();}async['init'](){auth['onAuthStateChanged'](_0x3a7920=>{const _0x275bf1=a24_0x3524;_0x3a7920?(this[_0x275bf1(0x1ed)](_0x3a7920[_0x275bf1(0x214)]),this['setupEventListeners']()):window['location']['href']='./login.html';});}['setupEventListeners'](){document['querySelectorAll']('.filter-btn')['forEach'](_0x5e1780=>{_0x5e1780['addEventListener']('click',()=>{const _0x109524=a24_0x3524;document['querySelectorAll']('.filter-btn')[_0x109524(0x1ec)](_0x9a613d=>_0x9a613d['classList'][_0x109524(0x1f2)](_0x109524(0x1fc))),_0x5e1780['classList']['add']('active'),this['currentFilter']=_0x5e1780['dataset'][_0x109524(0x203)],this['renderInvitations']();});});}['loadInvitations'](_0x156845){const _0x4bf36b=a24_0x3524,_0x256307=collection(db,'gameInvitations');let _0x4483b5=query(_0x256307,where('toUserId','==',_0x156845),orderBy(_0x4bf36b(0x1d7),'desc'),limit(this['pageSize']));this['unsubscribe']=onSnapshot(_0x4483b5,_0x461352=>{const _0x5e2793=_0x4bf36b;this['invitations']=_0x461352[_0x5e2793(0x204)][_0x5e2793(0x200)](_0x435752=>({'id':_0x435752['id'],..._0x435752[_0x5e2793(0x1f5)]()})),this[_0x5e2793(0x212)](),this['updateNotificationCount']();});let _0x2c6a00=query(_0x256307,where(_0x4bf36b(0x1e5),'==',_0x156845),orderBy(_0x4bf36b(0x1d7),_0x4bf36b(0x201)),limit(this['pageSize']));this[_0x4bf36b(0x202)]=onSnapshot(_0x2c6a00,_0x170c0f=>{const _0x4ca852=_0x4bf36b;this['sentInvitations']=_0x170c0f['docs']['map'](_0x9ee4b5=>({'id':_0x9ee4b5['id'],..._0x9ee4b5[_0x4ca852(0x1f5)](),'isSent':!![]})),this[_0x4ca852(0x212)]();});}[a24_0x253d9d(0x212)](){const _0x44ddb6=a24_0x253d9d,_0xb22ec8=document['getElementById'](_0x44ddb6(0x1f8));if(!_0xb22ec8)return;let _0xda9242=[];if(this['currentFilter']==='outbox')_0xda9242=this[_0x44ddb6(0x1fd)];else this['currentFilter']==='all'?_0xda9242=[...this['invitations'],...this['sentInvitations']]['sort']((_0x3e9896,_0x4ae987)=>{const _0x56476d=_0x44ddb6,_0xca3b81=_0x3e9896['createdAt']?.['toDate']?_0x3e9896['createdAt']['toDate']():new Date(_0x3e9896['createdAt']),_0x4e4ccd=_0x4ae987['createdAt']?.['toDate']?_0x4ae987[_0x56476d(0x1d7)]['toDate']():new Date(_0x4ae987['createdAt']);return _0x4e4ccd-_0xca3b81;}):_0xda9242=this['invitations']['filter'](_0x220063=>_0x220063[_0x44ddb6(0x1f7)]===this['currentFilter']);if(_0xda9242[_0x44ddb6(0x1e6)]===0x0){const _0x505c52=this['currentFilter']==='outbox'?'sent':this[_0x44ddb6(0x1fe)]==='all'?'':this['currentFilter'];_0xb22ec8['innerHTML']=_0x44ddb6(0x1e0)+_0x505c52+_0x44ddb6(0x207)+(this['currentFilter']===_0x44ddb6(0x20b)?_0x44ddb6(0x211):'When\x20other\x20players\x20invite\x20you\x20to\x20games,\x20they\x27ll\x20appear\x20here.')+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';return;}_0xb22ec8['innerHTML']=_0xda9242['map'](_0x52a670=>this['createInvitationCard'](_0x52a670))['join'](''),this['setupActionListeners']();}[a24_0x253d9d(0x1db)](_0x5a4a2f){const _0x34b26e=a24_0x253d9d,_0x51b46d=_0x5a4a2f['createdAt']?.['toDate']?_0x5a4a2f[_0x34b26e(0x1d7)]['toDate']():new Date(_0x5a4a2f['createdAt']),_0x203f2b=this[_0x34b26e(0x1f6)](_0x51b46d),_0x3e536a=_0x5a4a2f['isSent']||![];let _0x187578='';return _0x5a4a2f['type']==='team_invite'?_0x187578='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x5a4a2f['message']+_0x34b26e(0x1ea)+_0x5a4a2f['teamData'][_0x34b26e(0x1da)]+';\x20margin:\x200\x200\x200.5rem\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5a4a2f['teamData']['proposedTeamName']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22color:\x20#888;\x20font-size:\x200.9em;\x20margin:\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Duos\x20Ladder\x20Team\x20•\x20Color:\x20'+_0x5a4a2f[_0x34b26e(0x1e2)]['teamColor']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x187578='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>'+_0x5a4a2f['message']+_0x34b26e(0x1ee),_0x34b26e(0x206)+_0x5a4a2f[_0x34b26e(0x1f7)]+'\x20'+(_0x3e536a?_0x34b26e(0x20a):'')+'\x22\x20data-invitation-id=\x22'+_0x5a4a2f['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-from\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3e536a?'To:\x20'+_0x5a4a2f['toUsername']:_0x5a4a2f[_0x34b26e(0x209)])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3e536a?'<span\x20class=\x22sent-indicator\x22><i\x20class=\x22fas\x20fa-paper-plane\x22></i>\x20Sent</span>':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-time\x22>'+_0x203f2b+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22status-badge\x20status-'+_0x5a4a2f['status']+'\x22>'+_0x5a4a2f['status']+_0x34b26e(0x1fa)+_0x187578+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(!_0x3e536a&&_0x5a4a2f['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20accept-btn\x22\x20data-action=\x22accept\x22\x20data-invitation-id=\x22'+_0x5a4a2f['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Accept\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20decline-btn\x22\x20data-action=\x22decline\x22\x20data-invitation-id=\x22'+_0x5a4a2f['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Decline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x5a4a2f['type']!=='team_invite'?_0x34b26e(0x1dc)+_0x5a4a2f['id']+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x20Send\x20Message\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3e536a&&_0x5a4a2f['status']==='pending'?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22invitation-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22action-btn\x20cancel-btn\x22\x20data-action=\x22cancel\x22\x20data-invitation-id=\x22'+_0x5a4a2f['id']+_0x34b26e(0x1d8):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}['setupActionListeners'](){document['querySelectorAll']('.action-btn')['forEach'](_0x41fc0b=>{_0x41fc0b['addEventListener']('click',async _0x57d81a=>{const _0x56cedd=a24_0x3524,_0x28168b=_0x41fc0b['dataset']['action'],_0x4a58ea=_0x41fc0b[_0x56cedd(0x1eb)]['invitationId'];_0x41fc0b['disabled']=!![];const _0x295c60=_0x41fc0b['innerHTML'];_0x41fc0b['innerHTML']=_0x56cedd(0x205);try{switch(_0x28168b){case'accept':await this[_0x56cedd(0x1f0)](_0x4a58ea,'accepted');break;case'decline':await this[_0x56cedd(0x1f0)](_0x4a58ea,'declined');break;case'cancel':await this['updateInvitationStatus'](_0x4a58ea,_0x56cedd(0x1f1));break;case'respond':this[_0x56cedd(0x215)](_0x4a58ea);break;}}catch(_0x167288){console['error']('Error\x20performing\x20'+_0x28168b+':',_0x167288),alert('Failed\x20to\x20'+_0x28168b+'\x20invitation.\x20Please\x20try\x20again.');}finally{_0x41fc0b['disabled']=![],_0x41fc0b[_0x56cedd(0x1e1)]=_0x295c60;}});});}async['updateInvitationStatus'](_0x1b44e2,_0x283280){const _0x547e42=a24_0x253d9d;try{const _0x5a7d6a=this[_0x547e42(0x21b)]['find'](_0x340778=>_0x340778['id']===_0x1b44e2);_0x5a7d6a&&_0x5a7d6a['type']===_0x547e42(0x1e3)&&_0x283280==='accepted'&&await this['createTeamFromInvitation'](_0x5a7d6a);const _0x2f5759=doc(db,_0x547e42(0x1d6),_0x1b44e2);await updateDoc(_0x2f5759,{'status':_0x283280,'respondedAt':new Date()}),_0x5a7d6a&&(_0x5a7d6a[_0x547e42(0x1f7)]=_0x283280,_0x5a7d6a['respondedAt']=new Date(),this['renderInvitations']());}catch(_0x5f03a1){console['error']('Error\x20updating\x20invitation\x20status:',_0x5f03a1);throw _0x5f03a1;}}['openResponseModal'](_0xd7f1fb){const _0x58209a=a24_0x253d9d,_0x3f6f93=this['invitations']['find'](_0x35990c=>_0x35990c['id']===_0xd7f1fb);if(!_0x3f6f93)return;const _0x45fd0f=document[_0x58209a(0x21a)]('div');_0x45fd0f['className']='modal-overlay',_0x45fd0f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3>Send\x20Message\x20to\x20'+_0x3f6f93[_0x58209a(0x209)]+_0x58209a(0x218)+_0x3f6f93['value']+_0x58209a(0x1d9);if(!document[_0x58209a(0x1e4)]('modal-styles')){const _0x3fcb69=document['createElement']('style');_0x3fcb69['id']=_0x58209a(0x20e),_0x3fcb69['textContent']=_0x58209a(0x1dd),document['head'][_0x58209a(0x20c)](_0x3fcb69);}document['body']['appendChild'](_0x45fd0f),_0x45fd0f['querySelector']('.modal-close')[_0x58209a(0x1e7)]('click',()=>_0x45fd0f[_0x58209a(0x1f2)]()),_0x45fd0f['querySelector'](_0x58209a(0x1de))[_0x58209a(0x1e7)]('click',()=>_0x45fd0f['remove']()),_0x45fd0f[_0x58209a(0x1e7)]('click',_0x31c383=>{const _0x294522=_0x58209a;if(_0x31c383['target']===_0x45fd0f)_0x45fd0f[_0x294522(0x1f2)]();}),_0x45fd0f['querySelector']('#send-response')['addEventListener'](_0x58209a(0x217),()=>{const _0x6331c4=_0x58209a,_0xe4f725=document['getElementById'](_0x6331c4(0x1ef))[_0x6331c4(0x1ff)]['trim']();_0xe4f725&&(alert(_0x6331c4(0x1df)),_0x45fd0f['remove']());});}async['createTeamFromInvitation'](_0x1c13bb){const _0x3db4d3=a24_0x253d9d;try{const {createTeam:_0x3800b1}=await import(_0x3db4d3(0x216)),_0x4452cb=await _0x3800b1(_0x1c13bb[_0x3db4d3(0x209)],_0x1c13bb[_0x3db4d3(0x1f4)],_0x1c13bb['teamData']['proposedTeamName'],_0x1c13bb['teamData']['teamColor']);if(!_0x4452cb['success'])throw new Error(_0x4452cb[_0x3db4d3(0x210)]);alert('Team\x20\x22'+_0x1c13bb['teamData']['proposedTeamName']+_0x3db4d3(0x1f9));}catch(_0x306be2){console['error']('Error\x20creating\x20team:',_0x306be2);throw new Error('Failed\x20to\x20create\x20team:\x20'+_0x306be2[_0x3db4d3(0x1e9)]);}}[a24_0x253d9d(0x1d3)](){const _0x2b1b52=a24_0x253d9d,_0x420a00=this['invitations']['filter'](_0x35602d=>_0x35602d['status']==='pending')['length'],_0x4e3757=document['getElementById']('inbox-notification');_0x4e3757&&(_0x420a00>0x0?(_0x4e3757['style']['display']='inline-block',_0x4e3757['textContent']=_0x420a00>0x9?'9+':_0x420a00):_0x4e3757[_0x2b1b52(0x1f3)]['display']='none');}[a24_0x253d9d(0x1f6)](_0x5685b6){const _0x20af89=a24_0x253d9d,_0x1cd1b5=new Date(),_0x3d161b=_0x1cd1b5-_0x5685b6,_0xeb01e2=Math[_0x20af89(0x21c)](_0x3d161b/(0x3e8*0x3c)),_0xfbbd24=Math['floor'](_0x3d161b/(0x3e8*0x3c*0x3c)),_0x1efcac=Math['floor'](_0x3d161b/(0x3e8*0x3c*0x3c*0x18));if(_0xeb01e2<0x1)return'Just\x20now';if(_0xeb01e2<0x3c)return _0xeb01e2+'m\x20ago';if(_0xfbbd24<0x18)return _0xfbbd24+'h\x20ago';if(_0x1efcac<0x7)return _0x1efcac+_0x20af89(0x1e8);return _0x5685b6[_0x20af89(0x219)]();}['destroy'](){const _0x2ab802=a24_0x253d9d;this['unsubscribe']&&this['unsubscribe'](),this[_0x2ab802(0x202)]&&this['sentUnsubscribe']();}}document['addEventListener']('DOMContentLoaded',()=>{new InboxManager();});