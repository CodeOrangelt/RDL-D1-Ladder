const a32_0x426dc3=(function(){let _0x5d1928=!![];return function(_0x3e3142,_0x36808a){const _0x1f8df8=_0x5d1928?function(){if(_0x36808a){const _0xe9f82c=_0x36808a['apply'](_0x3e3142,arguments);return _0x36808a=null,_0xe9f82c;}}:function(){};return _0x5d1928=![],_0x1f8df8;};}()),a32_0x5809a3=a32_0x426dc3(this,function(){const _0x31cf1=a32_0x362f;let _0x3d8486;try{const _0x4460ff=Function('return\x20(function()\x20'+_0x31cf1(0xee)+');');_0x3d8486=_0x4460ff();}catch(_0x3413c3){_0x3d8486=window;}const _0x23a41a=_0x3d8486[_0x31cf1(0xe9)]=_0x3d8486[_0x31cf1(0xe9)]||{},_0x39f04d=[_0x31cf1(0xdb),'warn','info',_0x31cf1(0xbf),'exception','table','trace'];for(let _0x40233e=0x0;_0x40233e<_0x39f04d['length'];_0x40233e++){const _0x4b3ca=a32_0x426dc3['constructor'][_0x31cf1(0xc4)]['bind'](a32_0x426dc3),_0x24ca5c=_0x39f04d[_0x40233e],_0x4b0aac=_0x23a41a[_0x24ca5c]||_0x4b3ca;_0x4b3ca[_0x31cf1(0xf0)]=a32_0x426dc3['bind'](a32_0x426dc3),_0x4b3ca['toString']=_0x4b0aac[_0x31cf1(0xcc)]['bind'](_0x4b0aac),_0x23a41a[_0x24ca5c]=_0x4b3ca;}});function a32_0x362f(_0x28c818,_0x171bec){const _0x5809a3=a32_0x1df5();return a32_0x362f=function(_0x426dc3,_0x20031d){_0x426dc3=_0x426dc3-0xb7;let _0x1df537=_0x5809a3[_0x426dc3];return _0x1df537;},a32_0x362f(_0x28c818,_0x171bec);}a32_0x5809a3();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a32_0x2d2cfe from'./firebase-idle-wrapper.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x5c0870=![]){const _0x2d5955=a32_0x362f,_0x160608=document[_0x2d5955(0xda)]('#ladder-d2\x20tbody');if(!_0x160608){console['error'](_0x2d5955(0xba));return;}_0x160608['innerHTML']=_0x2d5955(0xe1);try{const _0x5b5350=Date[_0x2d5955(0xeb)]();if(!_0x5c0870&&playerCacheD2['data']&&_0x5b5350-playerCacheD2[_0x2d5955(0xe3)]<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2[_0x2d5955(0xe5)]);return;}const _0x11b40e=collection(db,'playersD2'),_0x3706a6=query(_0x11b40e,orderBy('position','asc')),_0x572b54=await a32_0x2d2cfe['getDocuments'](_0x11b40e),_0x2b1126=[];_0x572b54['forEach'](_0x70a47d=>{const _0x3fc01c=_0x2d5955,_0x53e077=_0x70a47d[_0x3fc01c(0xe5)]();_0x53e077['username']&&_0x2b1126['push']({..._0x53e077,'id':_0x70a47d['id'],'elo':_0x53e077['eloRating']||0x0,'position':_0x53e077['position']||Number[_0x3fc01c(0xc6)]});});const _0x3ae982=collection(db,'userProfiles'),_0x4a7ee6=await getDocs(_0x3ae982),_0x4a2a9e=new Map();_0x4a7ee6['forEach'](_0x28be66=>{const _0x2072d8=_0x2d5955,_0x1cc808=_0x28be66['data']();_0x1cc808['username']&&_0x4a2a9e['set'](_0x1cc808[_0x2072d8(0xd8)][_0x2072d8(0xf2)](),_0x1cc808);});for(const _0x285ba3 of _0x2b1126){const _0x1b30de=_0x285ba3['username']['toLowerCase']();if(_0x4a2a9e['has'](_0x1b30de)){const _0x5d477f=_0x4a2a9e['get'](_0x1b30de);_0x5d477f['country']&&(_0x285ba3[_0x2d5955(0xc1)]=_0x5d477f['country']['toLowerCase']());}}const _0x105a3a=_0x2b1126['map'](_0x3bbf98=>_0x3bbf98['username']),_0x7deb18=await fetchBatchMatchStatsD2(_0x105a3a);_0x2b1126['sort']((_0x1f7607,_0x5e3c84)=>{const _0x4810ef=_0x2d5955,_0x21b9ff=_0x7deb18['get'](_0x1f7607[_0x4810ef(0xd8)])?.[_0x4810ef(0xcf)]||0x0,_0x520f4c=_0x7deb18[_0x4810ef(0xed)](_0x5e3c84['username'])?.['totalMatches']||0x0;if(_0x21b9ff===0x0!==(_0x520f4c===0x0))return _0x21b9ff===0x0?0x1:-0x1;return(_0x1f7607['position']||0x3e7)-(_0x5e3c84[_0x4810ef(0xd7)]||0x3e7);}),_0x2b1126[_0x2d5955(0xc8)]((_0x27bbbd,_0x5e524b)=>{const _0x271356=_0x2d5955;_0x27bbbd[_0x271356(0xd7)]=_0x5e524b+0x1;}),playerCacheD2['data']=_0x2b1126,playerCacheD2['timestamp']=_0x5b5350,updateLadderDisplayD2(_0x2b1126);}catch(_0x2e381f){console[_0x2d5955(0xbf)]('Error\x20loading\x20D2\x20ladder:',_0x2e381f),_0x160608['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x2e381f['message']+_0x2d5955(0xbc);}}function getNextAvailablePositionD2(_0x2a2224){const _0x30e2bb=a32_0x362f;if(_0x2a2224[_0x30e2bb(0xdc)]===0x0)return 0x1;let _0x2022a2=0x0;return _0x2a2224[_0x30e2bb(0xc8)](_0x45448c=>{const _0x2f3d37=_0x30e2bb;_0x45448c[_0x2f3d37(0xd7)]&&typeof _0x45448c[_0x2f3d37(0xd7)]==='number'&&_0x45448c['position']>_0x2022a2&&(_0x2022a2=_0x45448c['position']);}),_0x2022a2+0x1;}function a32_0x1df5(){const _0x5d2ab8=['Bronze','change',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','D2\x20Ladder\x20table\x20body\x20not\x20found','set','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','player','Silver','error','#C0C0C0','country','previousElo','loserUsername','prototype','wins','MAX_SAFE_INTEGER','winnerScore','forEach','includes','%</td>\x0a\x20\x20\x20\x20</tr>','#50C878','toString','sort','#F44336','totalMatches','Error\x20updating\x20D2\x20player\x20positions:','Emerald','innerHTML','Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:','approvedMatchesD2','desc','push','position','username','playersD2','querySelector','log','length','size','color','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','gameMode','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','eloHistory','timestamp','abs','data','0.85em','kda','playerUsername','console','totalKills','now','newElo','get','{}.constructor(\x22return\x20this\x22)(\x20)','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','__proto__','inline','toLowerCase'];a32_0x1df5=function(){return _0x5d2ab8;};return a32_0x1df5();}async function updatePlayerPositions(_0x303e19,_0x94b66c){const _0x446693=a32_0x362f;try{const _0x3b4835=collection(db,_0x446693(0xd9)),_0x55bfb0=await getDocs(_0x3b4835),_0x2a2793=[];_0x55bfb0['forEach'](_0x19597a=>{const _0x272a90=_0x446693;_0x2a2793[_0x272a90(0xd6)]({'id':_0x19597a['id'],..._0x19597a[_0x272a90(0xe5)]()});});const _0x29efa5=_0x2a2793['find'](_0x40420d=>_0x40420d['username']===_0x303e19),_0x237c89=_0x2a2793['find'](_0x368600=>_0x368600[_0x446693(0xd8)]===_0x94b66c);if(!_0x29efa5||!_0x237c89){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x29efa5['position']>_0x237c89['position']){const _0x1758f3=_0x237c89['position'];for(const _0x46b745 of _0x2a2793){_0x46b745['position']>=_0x237c89['position']&&_0x46b745['position']<_0x29efa5[_0x446693(0xd7)]&&_0x46b745['username']!==_0x303e19&&await updateDoc(doc(db,_0x446693(0xd9),_0x46b745['id']),{'position':_0x46b745['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x29efa5['id']),{'position':_0x1758f3});if(_0x1758f3===0x1){const _0x3dd6eb=doc(db,'playersD2',_0x29efa5['id']),_0x5b4246=await getDoc(_0x3dd6eb);!_0x5b4246['data']()['firstPlaceDate']&&await updateDoc(_0x3dd6eb,{'firstPlaceDate':Timestamp[_0x446693(0xeb)]()});}if(_0x237c89['position']===0x1){const _0x4142d3=doc(db,'playersD2',_0x237c89['id']);await updateDoc(_0x4142d3,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x5c4402){console['error'](_0x446693(0xd0),_0x5c4402);}}function calculateStreakDays(_0x3066ed){const _0x3e8674=a32_0x362f;if(!_0x3066ed)return 0x0;const _0x1466a0=_0x3066ed['toDate'](),_0x4c61c2=new Date(),_0x4d648d=Math[_0x3e8674(0xe4)](_0x4c61c2-_0x1466a0);return Math['ceil'](_0x4d648d/(0x3e8*0x3c*0x3c*0x18));}function getPlayerRankNameD2(_0x102b65){const _0x462fc2=a32_0x362f;if(_0x102b65>=0x834)return _0x462fc2(0xd1);if(_0x102b65>=0x708)return'Gold';if(_0x102b65>=0x640)return _0x462fc2(0xbe);if(_0x102b65>=0x578)return _0x462fc2(0xb7);return'Unranked';}async function updateLadderDisplayD2(_0x559829){const _0x3ad1f3=a32_0x362f;_0x559829['sort']((_0x2613ee,_0x228b63)=>_0x2613ee[_0x3ad1f3(0xd7)]-_0x228b63['position']);const _0x473051=document[_0x3ad1f3(0xda)]('#ladder-d2\x20tbody');if(!_0x473051)return;_0x473051[_0x3ad1f3(0xd2)]='';const _0x2149a2=_0x559829['map'](_0x59f20a=>_0x59f20a['username']),_0x338715=await fetchBatchMatchStatsD2(_0x2149a2),_0x215658=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x215658&&(_0x215658['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x5358f5=_0x559829['map'](_0x549f71=>{const _0x400654=_0x3ad1f3,_0xe4a0a1=_0x338715[_0x400654(0xed)](_0x549f71['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD2(_0x549f71,_0xe4a0a1);})['join']('');_0x473051['innerHTML']=_0x5358f5,getPlayersLastEloChangesD2(_0x2149a2)['then'](_0x288779=>{const _0x22f889=_0x3ad1f3,_0x367f2a=new Map();_0x473051['querySelectorAll']('tr')[_0x22f889(0xc8)]((_0x8f834a,_0x302486)=>{_0x302486<_0x2149a2['length']&&_0x367f2a['set'](_0x2149a2[_0x302486],_0x8f834a);}),_0x288779[_0x22f889(0xc8)]((_0x2a6a72,_0x1aa1c5)=>{const _0x125857=_0x22f889,_0x524cc6=_0x367f2a['get'](_0x1aa1c5);if(_0x524cc6&&_0x2a6a72!==0x0){const _0x1e1561=_0x524cc6['querySelector']('td:nth-child(3)');if(_0x1e1561){const _0x255135=_0x2a6a72>0x0?'+'+_0x2a6a72:''+_0x2a6a72,_0x23df61=_0x1e1561['querySelector']('.trend-indicator');_0x23df61&&(_0x23df61['textContent']=_0x255135,_0x23df61['style'][_0x125857(0xde)]=_0x2a6a72>0x0?'#4CAF50':_0x125857(0xce),_0x23df61['style']['fontWeight']='bold',_0x23df61['style']['fontSize']=_0x125857(0xe6),_0x23df61['style']['display']=_0x125857(0xf1),_0x23df61['style']['visibility']='visible',_0x23df61['style']['opacity']='1');}}});})['catch'](_0x3d35c8=>console['error'](_0x3ad1f3(0xd3),_0x3d35c8));}function createPlayerRowD2(_0x14b0f8,_0x23628e){const _0x40112c=a32_0x362f,_0x545934=parseFloat(_0x14b0f8['elo'])||0x0;let _0x30fe8a='gray';if(_0x545934>=0x7d0)_0x30fe8a=_0x40112c(0xcb);else{if(_0x545934>=0x708)_0x30fe8a='#FFD700';else{if(_0x545934>=0x640)_0x30fe8a=_0x40112c(0xc0);else _0x545934>=0x578&&(_0x30fe8a='#CD7F32');}}let _0xc84fcb='';return _0x14b0f8[_0x40112c(0xc1)]&&(_0xc84fcb='<img\x20src=\x22../images/flags/'+_0x14b0f8['country'][_0x40112c(0xf2)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x14b0f8['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x14b0f8[_0x40112c(0xd7)]+_0x40112c(0xef)+encodeURIComponent(_0x14b0f8['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x30fe8a+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x14b0f8['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xc84fcb+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x30fe8a+_0x40112c(0xb9)+_0x545934+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x23628e[_0x40112c(0xcf)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x23628e[_0x40112c(0xc5)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x23628e['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x23628e[_0x40112c(0xe7)]+_0x40112c(0xdf)+_0x23628e['winRate']+_0x40112c(0xca);}async function getPlayersLastEloChangesD2(_0x3c46ce){const _0x59f4b5=a32_0x362f,_0x2d549e=new Map();_0x3c46ce['forEach'](_0x2b68f4=>_0x2d549e['set'](_0x2b68f4,0x0));try{const _0x536ef9=collection(db,'eloHistoryD2'),_0x3d005b=query(_0x536ef9,orderBy('timestamp','desc'),limit(0x64)),_0x3433d3=await getDocs(_0x3d005b),_0x3ca4b1=new Map(),_0xffe9f0=await getDocs(collection(db,'playersD2'));_0xffe9f0['forEach'](_0x48a2df=>{const _0x1cb004=a32_0x362f,_0x2e6a94=_0x48a2df['data']();_0x2e6a94[_0x1cb004(0xd8)]&&_0x3ca4b1['set'](_0x48a2df['id'],_0x2e6a94[_0x1cb004(0xd8)]);});const _0x42c091=new Map();_0x3433d3['forEach'](_0x5f51b9=>{const _0x5a7e37=a32_0x362f,_0x2f8217=_0x5f51b9['data']();let _0x2bf4bc=_0x2f8217['username']||_0x2f8217['playerUsername'];!_0x2bf4bc&&_0x2f8217[_0x5a7e37(0xbd)]&&_0x3ca4b1['has'](_0x2f8217['player'])&&(_0x2bf4bc=_0x3ca4b1['get'](_0x2f8217['player']));if(!_0x2bf4bc&&_0x2f8217['matchId']){}_0x2bf4bc&&_0x3c46ce[_0x5a7e37(0xc9)](_0x2bf4bc)&&(!_0x42c091['has'](_0x2bf4bc)&&_0x42c091[_0x5a7e37(0xbb)](_0x2bf4bc,[]),_0x42c091[_0x5a7e37(0xed)](_0x2bf4bc)[_0x5a7e37(0xd6)]({..._0x2f8217,'timestamp':_0x2f8217['timestamp']?.['seconds']||0x0,'username':_0x2bf4bc}));}),_0x42c091['forEach']((_0x4380e6,_0xbd748d)=>{const _0x1a061d=a32_0x362f;if(_0x4380e6['length']>0x0){_0x4380e6[_0x1a061d(0xcd)]((_0x112a9b,_0x1b4325)=>_0x1b4325[_0x1a061d(0xe3)]-_0x112a9b[_0x1a061d(0xe3)]);const _0xcb1ebc=_0x4380e6['find'](_0x1b335e=>_0x1b335e[_0x1a061d(0xb8)]!==undefined||_0x1b335e[_0x1a061d(0xec)]!==undefined&&_0x1b335e['previousElo']!==undefined);if(_0xcb1ebc){let _0x56ed79;if(_0xcb1ebc[_0x1a061d(0xb8)]!==undefined)_0x56ed79=_0xcb1ebc[_0x1a061d(0xb8)];else _0xcb1ebc['newElo']!==undefined&&_0xcb1ebc['previousElo']!==undefined&&(_0x56ed79=_0xcb1ebc[_0x1a061d(0xec)]-_0xcb1ebc[_0x1a061d(0xc2)]);_0x56ed79!==undefined&&_0x2d549e['set'](_0xbd748d,_0x56ed79);}}});if(_0x42c091[_0x59f4b5(0xdd)]===0x0){const _0x3bc9e1=collection(db,_0x59f4b5(0xe2)),_0x2475b2=query(_0x3bc9e1,where(_0x59f4b5(0xe0),'==','D2'),orderBy('timestamp',_0x59f4b5(0xd5)),limit(0x32));try{const _0x758589=await getDocs(_0x2475b2);console[_0x59f4b5(0xdb)]('D2:\x20Found',_0x758589[_0x59f4b5(0xdd)],'fallback\x20entries'),_0x758589['forEach'](_0x1ec18a=>{const _0x58e476=_0x59f4b5,_0x1faff3=_0x1ec18a[_0x58e476(0xe5)](),_0x3f6f3e=_0x1faff3['username']||_0x1faff3[_0x58e476(0xe8)];if(_0x3f6f3e&&_0x3c46ce['includes'](_0x3f6f3e)){const _0x557112=_0x1faff3[_0x58e476(0xb8)]||(_0x1faff3['newElo']!==undefined&&_0x1faff3['previousElo']!==undefined?_0x1faff3[_0x58e476(0xec)]-_0x1faff3[_0x58e476(0xc2)]:0x0);_0x557112!==0x0&&(_0x2d549e[_0x58e476(0xbb)](_0x3f6f3e,_0x557112),console[_0x58e476(0xdb)]('D2:\x20'+_0x3f6f3e+'\x20fallback\x20ELO\x20change:\x20'+_0x557112));}});}catch(_0x20bb19){}}}catch(_0x1a1ef7){console[_0x59f4b5(0xbf)]('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x1a1ef7);}return _0x2d549e;}async function fetchBatchMatchStatsD2(_0x578ca8){const _0x13516b=a32_0x362f,_0x2d6899=new Map();try{_0x578ca8[_0x13516b(0xc8)](_0x413eb1=>{const _0x29ddd5=_0x13516b;_0x2d6899[_0x29ddd5(0xbb)](_0x413eb1,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x4c5b96=collection(db,_0x13516b(0xd4)),_0x25accf=await getDocs(_0x4c5b96);_0x25accf['forEach'](_0x3d40d5=>{const _0x5e71ab=_0x13516b,_0x2970c0=_0x3d40d5[_0x5e71ab(0xe5)](),_0x3fcce7=_0x2970c0['winnerUsername'],_0x20eb88=_0x2970c0[_0x5e71ab(0xc3)];if(_0x578ca8['includes'](_0x3fcce7)){const _0x248cf8=_0x2d6899[_0x5e71ab(0xed)](_0x3fcce7);_0x248cf8['wins']++,_0x248cf8['totalMatches']++,_0x248cf8['totalKills']+=parseInt(_0x2970c0['winnerScore'])||0x0,_0x248cf8['totalDeaths']+=parseInt(_0x2970c0['loserScore'])||0x0;}if(_0x578ca8['includes'](_0x20eb88)){const _0x4b0e18=_0x2d6899[_0x5e71ab(0xed)](_0x20eb88);_0x4b0e18['losses']++,_0x4b0e18[_0x5e71ab(0xcf)]++,_0x4b0e18['totalKills']+=parseInt(_0x2970c0['loserScore'])||0x0,_0x4b0e18['totalDeaths']+=parseInt(_0x2970c0[_0x5e71ab(0xc7)])||0x0;}}),_0x578ca8['forEach'](_0x24df0f=>{const _0x34dbf9=_0x13516b,_0x31f4b5=_0x2d6899['get'](_0x24df0f);_0x31f4b5['kda']=_0x31f4b5['totalDeaths']>0x0?(_0x31f4b5[_0x34dbf9(0xea)]/_0x31f4b5['totalDeaths'])['toFixed'](0x2):_0x31f4b5[_0x34dbf9(0xea)]['toFixed'](0x2),_0x31f4b5['winRate']=_0x31f4b5['totalMatches']>0x0?(_0x31f4b5[_0x34dbf9(0xc5)]/_0x31f4b5['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x334d13){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x334d13);}return _0x2d6899;}export{displayLadderD2,updatePlayerPositions};