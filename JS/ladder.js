const a27_0x4552ba=a27_0x1919,a27_0x27fb5e=(function(){let _0x46fa4f=!![];return function(_0x397735,_0x526644){const _0x52c042=_0x46fa4f?function(){const _0x236d49=a27_0x1919;if(_0x526644){const _0x1e7181=_0x526644[_0x236d49(0x186)](_0x397735,arguments);return _0x526644=null,_0x1e7181;}}:function(){};return _0x46fa4f=![],_0x52c042;};}()),a27_0x361ced=a27_0x27fb5e(this,function(){const _0x310b80=a27_0x1919;let _0x119015;try{const _0x19a623=Function('return\x20(function()\x20'+_0x310b80(0x1af)+');');_0x119015=_0x19a623();}catch(_0x5cb921){_0x119015=window;}const _0x880d25=_0x119015['console']=_0x119015[_0x310b80(0x1aa)]||{},_0x57eb0c=['log','warn','info','error',_0x310b80(0x1bc),'table',_0x310b80(0x1db)];for(let _0x3840c1=0x0;_0x3840c1<_0x57eb0c['length'];_0x3840c1++){const _0x4a496e=a27_0x27fb5e[_0x310b80(0x19a)]['prototype']['bind'](a27_0x27fb5e),_0x819e9d=_0x57eb0c[_0x3840c1],_0x1d6cbc=_0x880d25[_0x819e9d]||_0x4a496e;_0x4a496e['__proto__']=a27_0x27fb5e['bind'](a27_0x27fb5e),_0x4a496e['toString']=_0x1d6cbc[_0x310b80(0x19e)]['bind'](_0x1d6cbc),_0x880d25[_0x819e9d]=_0x4a496e;}});a27_0x361ced();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a27_0x31df(){const _0x401cad=['d1-ladder-container','desc','eloHistory','winnerUsername','elo-recommendation-text-d1','council','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','apply','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20','remove','className','add','#FFD700','toLowerCase','disabled','country','querySelectorAll','length','Unranked','winRate','winnerScore','D1\x20toggle\x20clicked','approvedMatches','Error\x20fetching\x20batch\x20match\x20stats:','map','Ladder\x20table\x20body\x20not\x20found','style','constructor','block','none','owner','toString','has','elo-recommendation-text-duos','error','createElement','click','email','seconds','Recommendation\x20element\x20for\x20','change','get','duos','console','position',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','playerUsername','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','{}.constructor(\x22return\x20this\x22)(\x20)','d2-ladder-container','innerHTML','d3-ladder-container','log','username','classList','now','wins','loserUsername','players','max','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','exception','currentUser','active','querySelector','newElo','Gold','preventDefault','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','timestamp','textContent','abs','forEach','Error\x20finding\x20recommended\x20opponent','#ladder\x20tbody','admin-only-message','playersD2','#50C878','#F44336','totalMatches','elo-recommendation-text-d2','MAX_SAFE_INTEGER','Active','opacity','find','dispatchEvent','D2\x20toggle\x20clicked','addEventListener','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','data','<img\x20src=\x22../images/flags/','trace','</span>.\x20Challenge\x20other\x20teams!','eloRating','target','checked','admin','duos-ladder-container','not-allowed','Silver','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','inline','docs','elo-recommendation-text-d3','fontWeight','previousElo','appendChild','playersD','getElementById','display','hasTeam','roleName','playersD3','d1-switch','date','Error\x20loading\x20ladder:',';\x22>','set','#b9f1fc','totalKills','exists'];a27_0x31df=function(){return _0x401cad;};return a27_0x31df();}import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';function a27_0x1919(_0x28c596,_0x44fe54){const _0x361ced=a27_0x31df();return a27_0x1919=function(_0x27fb5e,_0x5ac2cd){_0x27fb5e=_0x27fb5e-0x17f;let _0x31dfd9=_0x361ced[_0x27fb5e];return _0x31dfd9;},a27_0x1919(_0x28c596,_0x44fe54);}const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x2ff61e=0x1){const _0x500639=a27_0x1919;try{document['getElementById']('loading-indicator')['style']['display']='block';const _0x429d10=await getLadderData(_0x2ff61e);_0x429d10['sort']((_0x113b4f,_0x131493)=>_0x131493['elo']-_0x113b4f['elo']);const _0x5bd51f=_0x429d10[_0x500639(0x197)](_0x43dad5=>_0x43dad5['id']),_0x492da5=await getEloHistoryBatch(_0x5bd51f,_0x2ff61e),_0x1795b3=_0x429d10[_0x500639(0x197)]((_0x592bff,_0x324a7d)=>{const _0x474f4e=_0x500639,_0x476f21=_0x492da5[_0x592bff['id']]||[],_0x117bcd=_0x476f21['sort']((_0x3030f6,_0x4829c0)=>new Date(_0x4829c0['date'])-new Date(_0x3030f6['date']))['slice'](0x0,0x5);return{..._0x592bff,'rank':_0x324a7d+0x1,'lastMatches':_0x117bcd,'recentActivity':_0x117bcd[_0x474f4e(0x190)]>0x0};});renderLadder(_0x1795b3),setupRealTimeUpdates(_0x2ff61e);}catch(_0x56bc44){console['error']('Error\x20loading\x20ladder\x20data:',_0x56bc44),document['getElementById']('error-message')['innerText']='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')['style']['display']='none';}}function setupRealTimeUpdates(_0x381032=0x1){const _0x14abb3=a27_0x1919;activeListeners['forEach'](_0x32a00e=>_0x32a00e()),activeListeners=[];const _0x26b9d3=_0x381032===0x1?'players':_0x14abb3(0x1eb)+_0x381032,_0x5c0a2d=_0x381032===0x1?'matches':'matchesD'+_0x381032,_0x1ea151=new Date();_0x1ea151['setDate'](_0x1ea151['getDate']()-0x1);const _0x3323ee=setupEfficientListener(_0x5c0a2d,[where(_0x14abb3(0x1f2),'>=',_0x1ea151['toISOString']()),limit(0xa),orderBy('date',_0x14abb3(0x180))],async _0xd294ab=>{_0xd294ab['length']>0x0&&await loadLadderData(_0x381032);});activeListeners['push'](_0x3323ee);}export function cleanupListeners(){activeListeners['forEach'](_0x357007=>_0x357007()),activeListeners=[];}function renderLadder(_0x296489){const _0x591776=a27_0x1919,_0x33f0ab=document[_0x591776(0x1ec)]('ladder-container');_0x33f0ab[_0x591776(0x1b1)]='',_0x296489['forEach'](_0x3ac349=>{const _0x2291d4=_0x591776,_0x200c88=document[_0x2291d4(0x1a2)]('div');_0x200c88[_0x2291d4(0x189)]='ladder-player',_0x200c88['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x3ac349['rank']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>'+(_0x3ac349[_0x2291d4(0x1b4)]||_0x3ac349['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x3ac349['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x3ac349['recentActivity']?_0x2291d4(0x1be):'inactive')+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x3ac349['recentActivity']?_0x2291d4(0x1d2):'Inactive')+_0x2291d4(0x1d8),_0x33f0ab[_0x2291d4(0x1ea)](_0x200c88);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x12bb7c=![]){const _0x29d5fa=a27_0x1919,_0x3ece81=document[_0x29d5fa(0x1bf)](_0x29d5fa(0x1ca));if(!_0x3ece81){console[_0x29d5fa(0x1a1)](_0x29d5fa(0x198));return;}_0x3ece81['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0x3e7405=Date[_0x29d5fa(0x1b6)]();if(!_0x12bb7c&&playerCache['data']&&_0x3e7405-playerCache[_0x29d5fa(0x1c5)]<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x5147b9=collection(db,'players'),_0x461937=await getDocs(_0x5147b9),_0x1b0a55=[];_0x461937[_0x29d5fa(0x1c8)](_0x162d94=>{const _0x3f546e=_0x29d5fa,_0x42b8e4=_0x162d94['data']();_0x1b0a55['push']({..._0x42b8e4,'id':_0x162d94['id'],'elo':_0x42b8e4['eloRating']||0x0,'position':_0x42b8e4['position']||Number[_0x3f546e(0x1d1)]});});const _0x48377=collection(db,'userProfiles'),_0x419fac=await getDocs(_0x48377),_0x1ff98c=new Map();_0x419fac['forEach'](_0x18cd80=>{const _0x464440=_0x29d5fa,_0x5bb080=_0x18cd80[_0x464440(0x1d9)]();_0x5bb080['username']&&_0x1ff98c['set'](_0x5bb080['username'][_0x464440(0x18c)](),_0x5bb080);}),_0x1b0a55[_0x29d5fa(0x1c8)](_0x1e0606=>{const _0x16a3c7=_0x29d5fa,_0x2c06a4=_0x1e0606[_0x16a3c7(0x1b4)]?.['toLowerCase']();if(_0x2c06a4&&_0x1ff98c['has'](_0x2c06a4)){const _0x49b0a7=_0x1ff98c[_0x16a3c7(0x1a8)](_0x2c06a4);_0x49b0a7[_0x16a3c7(0x18e)]&&(_0x1e0606[_0x16a3c7(0x18e)]=_0x49b0a7[_0x16a3c7(0x18e)]['toLowerCase']());}});const _0x11240a=_0x1b0a55[_0x29d5fa(0x197)](_0x56ee0d=>_0x56ee0d['username']),_0x108f7d=await fetchBatchMatchStats(_0x11240a);_0x1b0a55['sort']((_0x164c19,_0x2b7012)=>{const _0x4a2e9c=_0x29d5fa,_0x2cd084=_0x108f7d['get'](_0x164c19[_0x4a2e9c(0x1b4)])?.['totalMatches']||0x0,_0x150e41=_0x108f7d['get'](_0x2b7012[_0x4a2e9c(0x1b4)])?.[_0x4a2e9c(0x1cf)]||0x0;if(_0x2cd084===0x0!==(_0x150e41===0x0))return _0x2cd084===0x0?0x1:-0x1;return(_0x164c19[_0x4a2e9c(0x1ab)]||0x3e7)-(_0x2b7012[_0x4a2e9c(0x1ab)]||0x3e7);}),_0x1b0a55[_0x29d5fa(0x1c8)]((_0x59916c,_0x46e6cf)=>{_0x59916c['position']=_0x46e6cf+0x1;}),playerCache['data']=_0x1b0a55,playerCache[_0x29d5fa(0x1c5)]=_0x3e7405,updateLadderDisplay(_0x1b0a55,_0x108f7d);}catch(_0x5d138a){console[_0x29d5fa(0x1a1)](_0x29d5fa(0x1f3),_0x5d138a),_0x3ece81['innerHTML']=_0x29d5fa(0x187)+_0x5d138a['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x54ebe7){const _0x26980d=a27_0x1919,_0x4cc13a=new Map();try{_0x54ebe7['forEach'](_0x50c4c1=>{_0x4cc13a['set'](_0x50c4c1,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x143430=collection(db,_0x26980d(0x195)),_0x1c2476=await getDocs(_0x143430);_0x1c2476['forEach'](_0x267e6d=>{const _0x4b4321=_0x26980d,_0x2ce662=_0x267e6d['data'](),_0x498988=_0x2ce662[_0x4b4321(0x182)],_0x3a9ea8=_0x2ce662[_0x4b4321(0x1b8)];if(_0x54ebe7['includes'](_0x498988)){const _0x9b350e=_0x4cc13a['get'](_0x498988);_0x9b350e['wins']++,_0x9b350e['totalMatches']++,_0x9b350e['totalKills']+=parseInt(_0x2ce662[_0x4b4321(0x193)])||0x0,_0x9b350e['totalDeaths']+=parseInt(_0x2ce662['loserScore'])||0x0;}if(_0x54ebe7['includes'](_0x3a9ea8)){const _0x54140e=_0x4cc13a[_0x4b4321(0x1a8)](_0x3a9ea8);_0x54140e['losses']++,_0x54140e[_0x4b4321(0x1cf)]++,_0x54140e[_0x4b4321(0x1f7)]+=parseInt(_0x2ce662['loserScore'])||0x0,_0x54140e['totalDeaths']+=parseInt(_0x2ce662[_0x4b4321(0x193)])||0x0;}}),_0x54ebe7[_0x26980d(0x1c8)](_0x14b1d3=>{const _0x37c5d7=_0x26980d,_0x4a0bcd=_0x4cc13a['get'](_0x14b1d3);_0x4a0bcd['kda']=_0x4a0bcd['totalDeaths']>0x0?(_0x4a0bcd['totalKills']/_0x4a0bcd['totalDeaths'])['toFixed'](0x2):_0x4a0bcd['totalKills']['toFixed'](0x2),_0x4a0bcd['winRate']=_0x4a0bcd['totalMatches']>0x0?(_0x4a0bcd[_0x37c5d7(0x1b7)]/_0x4a0bcd[_0x37c5d7(0x1cf)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x2a56cc){console['error'](_0x26980d(0x196),_0x2a56cc);}return _0x4cc13a;}function createPlayerRow(_0x1e429d,_0x2fa7d8){const _0x2bb8bc=a27_0x1919,_0x5cc61b=parseFloat(_0x1e429d['elo'])||0x0;let _0x35db22='gray';if(_0x5cc61b>=0x7d0)_0x35db22=_0x2bb8bc(0x1cd);else{if(_0x5cc61b>=0x708)_0x35db22='#FFD700';else{if(_0x5cc61b>=0x640)_0x35db22='#b9f1fc';else _0x5cc61b>=0x578&&(_0x35db22='#CD7F32');}}let _0x57c5e2='';return _0x1e429d['country']&&(_0x57c5e2=_0x2bb8bc(0x1da)+_0x1e429d['country']['toLowerCase']()+_0x2bb8bc(0x1ae)+_0x1e429d[_0x2bb8bc(0x18e)]+_0x2bb8bc(0x185)),_0x2bb8bc(0x1c4)+_0x1e429d['position']+_0x2bb8bc(0x1c3)+encodeURIComponent(_0x1e429d[_0x2bb8bc(0x1b4)])+'&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x35db22+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1e429d[_0x2bb8bc(0x1b4)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x57c5e2+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x35db22+_0x2bb8bc(0x1ac)+_0x5cc61b+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2fa7d8['totalMatches']+_0x2bb8bc(0x1e4)+_0x2fa7d8['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2fa7d8['losses']+_0x2bb8bc(0x1e4)+_0x2fa7d8['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2fa7d8[_0x2bb8bc(0x192)]+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0xfefcfa){const _0x2f3259=a27_0x1919;if(_0xfefcfa>=0x7d0)return'Emerald';if(_0xfefcfa>=0x708)return _0x2f3259(0x1c1);if(_0xfefcfa>=0x640)return _0x2f3259(0x1e3);if(_0xfefcfa>=0x578)return'Bronze';return _0x2f3259(0x191);}async function getPlayersLastEloChanges(_0x2277cd){const _0x2a1287=a27_0x1919,_0x3fe937=new Map();_0x2277cd['forEach'](_0x55f0b4=>{_0x3fe937['set'](_0x55f0b4,0x0);});try{const _0x4caf5a=collection(db,'players'),_0x58f92b=await getDocs(_0x4caf5a),_0x1caa41=new Map(),_0x486d69=new Map();_0x58f92b[_0x2a1287(0x1c8)](_0x4a147b=>{const _0x17f331=_0x2a1287,_0xc6d81=_0x4a147b['data']();_0xc6d81['username']&&(_0x1caa41[_0x17f331(0x1f5)](_0x4a147b['id'],_0xc6d81['username']),_0x486d69['set'](_0xc6d81['username'][_0x17f331(0x18c)](),_0x4a147b['id']));});const _0x3487b0=collection(db,_0x2a1287(0x181)),_0x27b01e=query(_0x3487b0,orderBy('timestamp',_0x2a1287(0x180)),limit(0x12c)),_0xc93f1b=await getDocs(_0x27b01e);if(_0xc93f1b['empty'])return console[_0x2a1287(0x1b3)]('ELO\x20history\x20collection\x20is\x20empty'),_0x3fe937;if(_0xc93f1b['docs']['length']>0x0){const _0x30aca5=_0xc93f1b[_0x2a1287(0x1e6)][0x0][_0x2a1287(0x1d9)]();if(_0x30aca5['player']&&_0x1caa41['has'](_0x30aca5['player'])){}}const _0x46808a=new Map();let _0x14f0f1=0x0;_0xc93f1b['forEach'](_0x5ed209=>{const _0x536744=_0x2a1287,_0x25666a=_0x5ed209['data']();let _0x551f51=null;if(_0x25666a['player']&&_0x1caa41['has'](_0x25666a['player']))_0x551f51=_0x1caa41['get'](_0x25666a['player']);else{if(_0x25666a['username']&&_0x486d69[_0x536744(0x19f)](_0x25666a['username']['toLowerCase']()))_0x551f51=_0x25666a['username'];else _0x25666a[_0x536744(0x1ad)]&&_0x486d69['has'](_0x25666a['playerUsername'][_0x536744(0x18c)]())&&(_0x551f51=_0x25666a['playerUsername']);}_0x551f51&&_0x2277cd['includes'](_0x551f51)&&(_0x14f0f1++,!_0x46808a['has'](_0x551f51)&&_0x46808a['set'](_0x551f51,[]),_0x46808a[_0x536744(0x1a8)](_0x551f51)['push']({..._0x25666a,'timestamp':_0x25666a['timestamp']?.[_0x536744(0x1a5)]||0x0}));}),_0x46808a['forEach']((_0x35b8a2,_0x53758d)=>{const _0x8425cb=_0x2a1287;if(_0x35b8a2['length']>0x0){_0x35b8a2['sort']((_0x303331,_0x458401)=>_0x458401[_0x8425cb(0x1c5)]-_0x303331['timestamp']);const _0x803119=_0x35b8a2[_0x8425cb(0x1d4)](_0x143d4f=>_0x143d4f[_0x8425cb(0x1a7)]!==undefined||_0x143d4f[_0x8425cb(0x1c0)]!==undefined&&_0x143d4f['previousElo']!==undefined||_0x143d4f['newEloRating']!==undefined&&_0x143d4f['oldEloRating']!==undefined);if(_0x803119){let _0x1915bc;if(_0x803119[_0x8425cb(0x1a7)]!==undefined)_0x1915bc=parseInt(_0x803119['change']);else{if(_0x803119['newElo']!==undefined&&entry['previousElo']!==undefined)_0x1915bc=parseInt(_0x803119[_0x8425cb(0x1c0)])-parseInt(_0x803119[_0x8425cb(0x1e9)]);else _0x803119['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x1915bc=parseInt(_0x803119['newEloRating'])-parseInt(_0x803119['oldEloRating']));}!isNaN(_0x1915bc)&&_0x1915bc!==0x0&&_0x3fe937[_0x8425cb(0x1f5)](_0x53758d,_0x1915bc);}}});}catch(_0x2dea07){console['error']('Error\x20fetching\x20ELO\x20history:',_0x2dea07);}return _0x3fe937;}async function updateLadderDisplay(_0x3a4dfe,_0x52b0e=null){const _0x1dd856=a27_0x1919,_0x87e5c4=document[_0x1dd856(0x1bf)]('#ladder\x20tbody');if(!_0x87e5c4){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x412820=document['querySelector']('#ladder\x20thead\x20tr');_0x412820&&(_0x412820[_0x1dd856(0x1b1)]=_0x1dd856(0x1bb));const _0x505b23=_0x3a4dfe[_0x1dd856(0x197)](_0x239808=>_0x239808['username']);!_0x52b0e&&(_0x52b0e=await fetchBatchMatchStats(_0x505b23));const _0x28408c=_0x3a4dfe[_0x1dd856(0x197)](_0x2c83d3=>{const _0x15ec49=_0x52b0e['get'](_0x2c83d3['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRow(_0x2c83d3,_0x15ec49);})['join']('');_0x87e5c4['innerHTML']=_0x28408c,getPlayersLastEloChanges(_0x505b23)['then'](_0x5e2467=>{const _0x36be65=_0x1dd856,_0x452ddf=new Map();_0x87e5c4[_0x36be65(0x18f)]('tr')['forEach']((_0x3692e3,_0x2e8a5f)=>{_0x2e8a5f<_0x505b23['length']&&_0x452ddf['set'](_0x505b23[_0x2e8a5f],_0x3692e3);}),_0x5e2467['forEach']((_0x136f9e,_0x29e2c6)=>{const _0x5746e5=_0x36be65,_0x57abb0=_0x452ddf[_0x5746e5(0x1a8)](_0x29e2c6);if(_0x57abb0&&_0x136f9e!==0x0){const _0x2ee49e=_0x57abb0['querySelector']('td:nth-child(3)');if(_0x2ee49e){const _0x31ff8a=_0x136f9e>0x0?'+'+_0x136f9e:''+_0x136f9e,_0x5bd2a2=_0x2ee49e['querySelector']('.trend-indicator');if(_0x5bd2a2)_0x5bd2a2['textContent']=_0x31ff8a,_0x5bd2a2['style']['color']=_0x136f9e>0x0?'#4CAF50':_0x5746e5(0x1ce),_0x5bd2a2[_0x5746e5(0x199)][_0x5746e5(0x1e8)]='bold',_0x5bd2a2['style']['fontSize']='0.85em',_0x5bd2a2['style']['display']=_0x5746e5(0x1e5),_0x5bd2a2[_0x5746e5(0x199)]['visibility']='visible',_0x5bd2a2['style'][_0x5746e5(0x1d3)]='1';else{}}}});})['catch'](_0x22c651=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x22c651));}function initLadderToggles(){const _0x20ea13=a27_0x1919,_0x51b70b=document['getElementById'](_0x20ea13(0x1f1)),_0x10503f=document['getElementById']('d2-switch'),_0x44f5d0=document['getElementById']('d3-switch'),_0x3d539b=document['getElementById']('duos-switch'),_0x55f28e=document['getElementById'](_0x20ea13(0x17f)),_0x22f413=document[_0x20ea13(0x1ec)]('d2-ladder-container'),_0x4879e5=document['getElementById']('d3-ladder-container'),_0x5c2abf=document['getElementById'](_0x20ea13(0x1e1));function _0x39c6f8(){const _0x11d461=_0x20ea13;if(_0x55f28e)_0x55f28e['classList']['remove']('active');if(_0x22f413)_0x22f413['classList']['remove']('active');if(_0x4879e5)_0x4879e5[_0x11d461(0x1b5)]['remove']('active');if(_0x5c2abf)_0x5c2abf['style']['display']='none';if(_0x55f28e)_0x55f28e['style']['display']=_0x11d461(0x19c);if(_0x22f413)_0x22f413[_0x11d461(0x199)][_0x11d461(0x1ed)]='none';if(_0x4879e5)_0x4879e5['style'][_0x11d461(0x1ed)]='none';}_0x51b70b&&_0x51b70b['addEventListener']('click',()=>{const _0x4b1c20=_0x20ea13;console[_0x4b1c20(0x1b3)](_0x4b1c20(0x194)),_0x39c6f8();_0x55f28e&&(_0x55f28e['classList'][_0x4b1c20(0x18a)]('active'),_0x55f28e[_0x4b1c20(0x199)]['display']='block');document['getElementById'](_0x4b1c20(0x183))[_0x4b1c20(0x199)]['display']='block',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x4b1c20(0x19c),document['getElementById'](_0x4b1c20(0x1e7))['style'][_0x4b1c20(0x1ed)]='none';if(_0x51b70b)_0x51b70b[_0x4b1c20(0x1b5)]['add']('active');if(_0x10503f)_0x10503f['classList'][_0x4b1c20(0x188)]('active');if(_0x44f5d0)_0x44f5d0[_0x4b1c20(0x1b5)]['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x10503f&&_0x10503f['addEventListener']('click',()=>{const _0x5a79e2=_0x20ea13;console['log'](_0x5a79e2(0x1d6)),_0x39c6f8();_0x22f413&&(_0x22f413['classList'][_0x5a79e2(0x18a)]('active'),_0x22f413['style'][_0x5a79e2(0x1ed)]='block');document['getElementById']('elo-recommendation-text-d1')[_0x5a79e2(0x199)][_0x5a79e2(0x1ed)]='none',document[_0x5a79e2(0x1ec)](_0x5a79e2(0x1d0))['style']['display']='block',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x10503f)_0x10503f[_0x5a79e2(0x1b5)][_0x5a79e2(0x18a)](_0x5a79e2(0x1be));if(_0x51b70b)_0x51b70b['classList']['remove']('active');if(_0x44f5d0)_0x44f5d0[_0x5a79e2(0x1b5)]['remove'](_0x5a79e2(0x1be));displayLadderD2(),findBestOpponent('d2');}),_0x44f5d0&&_0x44f5d0[_0x20ea13(0x1d7)](_0x20ea13(0x1a3),()=>{const _0x168bb7=_0x20ea13;console['log']('D3\x20toggle\x20clicked'),_0x39c6f8();_0x4879e5&&(_0x4879e5['classList'][_0x168bb7(0x18a)](_0x168bb7(0x1be)),_0x4879e5['style']['display']=_0x168bb7(0x19b));document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x168bb7(0x1d0))[_0x168bb7(0x199)]['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='block';if(_0x44f5d0)_0x44f5d0[_0x168bb7(0x1b5)]['add']('active');if(_0x51b70b)_0x51b70b[_0x168bb7(0x1b5)]['remove']('active');if(_0x10503f)_0x10503f[_0x168bb7(0x1b5)]['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x3d539b&&_0x3d539b['addEventListener']('click',()=>{const _0x4f9c80=_0x20ea13;_0x39c6f8();if(_0x5c2abf)_0x5c2abf['style']['display']='block';displayLadderDuos(),findBestOpponent(_0x4f9c80(0x1a9)),document[_0x4f9c80(0x1ec)]('elo-recommendation-text-duos')&&(document['getElementById'](_0x4f9c80(0x1a0))['style']['display']='block'),document['getElementById']('elo-recommendation-text-d1')[_0x4f9c80(0x199)]['display']=_0x4f9c80(0x19c),document['getElementById']('elo-recommendation-text-d2')['style'][_0x4f9c80(0x1ed)]='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']=_0x4f9c80(0x19c);});}document[a27_0x4552ba(0x1d7)]('DOMContentLoaded',()=>{const _0x5676cb=a27_0x4552ba;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x5676cb(0x183))['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0x211d2d='d1'){const _0x3a1b0d=a27_0x4552ba,_0x1b811c='elo-recommendation-text-'+_0x211d2d,_0x5c23bc=document['getElementById'](_0x1b811c);if(!_0x5c23bc){console[_0x3a1b0d(0x1a1)](_0x3a1b0d(0x1a6)+_0x211d2d+'\x20not\x20found');return;}const _0x3c6ef6=auth[_0x3a1b0d(0x1bd)];if(!_0x3c6ef6){_0x5c23bc[_0x3a1b0d(0x1c6)]='';return;}try{const _0x2b090b=doc(db,'userProfiles',_0x3c6ef6['uid']),_0x17aa0a=await getDoc(_0x2b090b);if(!_0x17aa0a[_0x3a1b0d(0x1f8)]()){console['log']('No\x20user\x20profile\x20found'),_0x5c23bc['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x9deb5a=_0x17aa0a['data'](),_0x1e7d53=_0x9deb5a['username'];if(!_0x1e7d53){_0x5c23bc['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0xb492d5;switch(_0x211d2d){case'd1':_0xb492d5=_0x3a1b0d(0x1b9);break;case'd2':_0xb492d5='playersD2';break;case'd3':_0xb492d5=_0x3a1b0d(0x1f0);break;case'duos':_0xb492d5='playersDuos';break;default:_0xb492d5='players';}if(_0x211d2d==='duos'){const _0x2a40b6=collection(db,_0xb492d5),_0x45da05=query(_0x2a40b6,where('username','==',_0x1e7d53)),_0x3ba2b7=await getDocs(_0x45da05);if(_0x3ba2b7['empty']){_0x5c23bc['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder';return;}const _0x3a26c4=_0x3ba2b7[_0x3a1b0d(0x1e6)][0x0]['data'](),_0x23e821=parseInt(_0x3a26c4['eloRating'])||0x4b0;if(_0x3a26c4[_0x3a1b0d(0x1ee)]&&_0x3a26c4['teammate']){_0x5c23bc['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x3a26c4['teammate']+_0x3a1b0d(0x1dc);return;}const _0x2ab21d=await getDocs(_0x2a40b6);let _0x17a972=null,_0x377ab4=-0x1;_0x2ab21d[_0x3a1b0d(0x1c8)](_0x227685=>{const _0x5d0fdc=_0x3a1b0d,_0x22aa9b=_0x227685['data']();if(_0x22aa9b['username']===_0x1e7d53)return;if(_0x22aa9b[_0x5d0fdc(0x1ee)])return;const _0x3315fa=parseInt(_0x22aa9b['eloRating'])||0x4b0,_0x9d7b2f=Math[_0x5d0fdc(0x1c7)](_0x3315fa-_0x23e821),_0x44ae44=Math['max'](0x0,0xc8-_0x9d7b2f);_0x44ae44>_0x377ab4&&(_0x17a972=_0x22aa9b,_0x377ab4=_0x44ae44);});if(_0x17a972){const _0x422874=parseInt(_0x17a972[_0x3a1b0d(0x1dd)])||0x4b0;let _0x579d32='gray';if(_0x422874>=0x7d0)_0x579d32=_0x3a1b0d(0x1cd);else{if(_0x422874>=0x708)_0x579d32=_0x3a1b0d(0x18b);else{if(_0x422874>=0x640)_0x579d32='#C0C0C0';else _0x422874>=0x578&&(_0x579d32='#CD7F32');}}_0x5c23bc[_0x3a1b0d(0x1b1)]='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x579d32+_0x3a1b0d(0x1f4)+_0x17a972['username']+'</span>\x20(ELO:\x20'+_0x422874+')';}else _0x5c23bc['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x2c39a4=collection(db,_0xb492d5),_0x5629cc=query(_0x2c39a4,where('username','==',_0x1e7d53)),_0x1828f9=await getDocs(_0x5629cc);if(_0x1828f9['empty']){_0x5c23bc['textContent']='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0x211d2d['toUpperCase']()+'\x20ladder';return;}const _0x394040=_0x1828f9['docs'][0x0]['data'](),_0x19f972=parseInt(_0x394040['eloRating'])||0x5dc,_0x171ec4=await getDocs(_0x2c39a4);let _0x2d992d=null,_0x5f3bcb=-0x1;const _0x535dfe=getPlayerRankName(_0x19f972);_0x171ec4['forEach'](_0xec5bf=>{const _0x510ed3=_0x3a1b0d,_0x5238e9=_0xec5bf['data']();if(_0x5238e9[_0x510ed3(0x1b4)]===_0x1e7d53)return;const _0x4f1158=parseInt(_0x5238e9[_0x510ed3(0x1dd)])||0x5dc,_0xdc7146=getPlayerRankName(_0x4f1158),_0xc5c7cb=Math['abs'](_0x4f1158-_0x19f972),_0x48c74f=0x20,_0x2d9b52=0x1/(0x1+Math['pow'](0xa,(_0x4f1158-_0x19f972)/0x190)),_0x2f0c5b=Math['round'](_0x48c74f*(0x1-_0x2d9b52));if(_0x2f0c5b<=0x0)return;let _0x500c90=0x0;const _0x18844c=Math[_0x510ed3(0x1ba)](0x0,0x64-_0xc5c7cb*0.5),_0x427be0=_0x2f0c5b>=0x3&&_0x2f0c5b<=0x8?0x32:_0x2f0c5b>0x0&&_0x2f0c5b<0xf?0x1e:0xa,_0x258196=_0x535dfe===_0xdc7146?0x28:0x0;_0x500c90=_0x18844c+_0x427be0+_0x258196,_0x500c90>_0x5f3bcb&&(_0x2d992d=_0x5238e9,_0x5f3bcb=_0x500c90);});if(_0x2d992d){const _0x2a3df1=parseInt(_0x2d992d['eloRating'])||0x5dc;let _0x17f80d='gray';if(_0x2a3df1>=0x7d0)_0x17f80d='#50C878';else{if(_0x2a3df1>=0x708)_0x17f80d='#FFD700';else{if(_0x2a3df1>=0x640)_0x17f80d=_0x3a1b0d(0x1f6);else _0x2a3df1>=0x578&&(_0x17f80d='#CD7F32');}}_0x5c23bc['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x19f972+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x17f80d+';\x22>'+_0x2d992d['username']+'</span>';}else _0x5c23bc['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x19f972+')';}catch(_0x5ab225){console['error']('Error\x20finding\x20best\x20opponent:',_0x5ab225),_0x5c23bc['textContent']=_0x3a1b0d(0x1c9);}}auth['onAuthStateChanged'](_0x603b7a=>{const _0x3d0419=a27_0x4552ba,_0xf5cfa7=document['getElementById']('d1-ladder-container')&&document['getElementById']('d1-ladder-container')['style']['display']!==_0x3d0419(0x19c),_0x2bf80d=document['getElementById'](_0x3d0419(0x1b0))&&document[_0x3d0419(0x1ec)](_0x3d0419(0x1b0))['style'][_0x3d0419(0x1ed)]!=='none',_0x16e76d=document[_0x3d0419(0x1ec)](_0x3d0419(0x1b2))&&document['getElementById']('d3-ladder-container')['style'][_0x3d0419(0x1ed)]!=='none',_0x5a1fc9=document[_0x3d0419(0x1ec)]('duos-ladder-container')&&document['getElementById']('duos-ladder-container')[_0x3d0419(0x199)][_0x3d0419(0x1ed)]!=='none',_0x554406=_0xf5cfa7?'d1':_0x2bf80d?'d2':_0x16e76d?'d3':_0x5a1fc9?_0x3d0419(0x1a9):'d1';findBestOpponent(_0x554406);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x361980=document['getElementById']('duos-switch'),_0x117230=document['querySelector']('label[for=\x22duos-switch\x22]');_0x361980&&_0x117230&&(_0x361980['addEventListener']('change',async _0x2c6165=>{const _0x4556e0=a27_0x1919;if(_0x2c6165[_0x4556e0(0x1de)][_0x4556e0(0x1df)]){const _0x217a9b=auth?.[_0x4556e0(0x1bd)],_0x45277a=await checkIfUserIsAdmin(_0x217a9b);if(!_0x45277a){_0x2c6165[_0x4556e0(0x1c2)]();const _0x5c5848=document['getElementById']('d1-switch');return _0x5c5848&&(_0x5c5848['checked']=!![],_0x5c5848[_0x4556e0(0x1d5)](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth['onAuthStateChanged'](async _0xf2962e=>{const _0x3a57a6=a27_0x1919,_0xa51fb7=await checkIfUserIsAdmin(_0xf2962e);!_0xa51fb7?(_0x361980['disabled']=!![],_0x117230['style']['opacity']='0.5',_0x117230['style']['cursor']=_0x3a57a6(0x1e2),_0x117230['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x361980[_0x3a57a6(0x18d)]=![],_0x117230['style']['opacity']='1',_0x117230[_0x3a57a6(0x199)]['cursor']='pointer',_0x117230['title']='');}));});async function checkIfUserIsAdmin(_0x5389e1){const _0x2d2a1e=a27_0x4552ba;if(!_0x5389e1)return![];try{const _0x3ebaa0=['admin@ladder.com','brian2af@outlook.com'];if(_0x5389e1[_0x2d2a1e(0x1a4)]&&_0x3ebaa0['includes'](_0x5389e1[_0x2d2a1e(0x1a4)][_0x2d2a1e(0x18c)]()))return!![];const _0x33bfa6=['userProfiles','players',_0x2d2a1e(0x1cc),_0x2d2a1e(0x1f0)],_0x88bbe6=[_0x2d2a1e(0x1e0),_0x2d2a1e(0x19d),_0x2d2a1e(0x184),'creative\x20lead'];for(const _0x104185 of _0x33bfa6){try{const _0x18f337=doc(db,_0x104185,_0x5389e1['uid']),_0x3f0ea1=await getDoc(_0x18f337);if(_0x3f0ea1['exists']()){const _0x15a7ab=_0x3f0ea1[_0x2d2a1e(0x1d9)](),_0x1033a3=(_0x15a7ab[_0x2d2a1e(0x1ef)]||_0x15a7ab['role']||'')['toLowerCase']();if(_0x1033a3&&_0x88bbe6['includes'](_0x1033a3))return!![];}}catch(_0x153db3){console['warn']('Error\x20checking\x20'+_0x104185+':',_0x153db3);}}return![];}catch(_0x5929f6){return console['error']('Error\x20checking\x20admin\x20status:',_0x5929f6),![];}}function showAdminOnlyMessage(){const _0x2aa44e=a27_0x4552ba,_0x343bf1=document['getElementById'](_0x2aa44e(0x1cb));_0x343bf1&&_0x343bf1['remove']();const _0x2fbdef=document['createElement']('div');_0x2fbdef['id']='admin-only-message',_0x2fbdef['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x2fbdef[_0x2aa44e(0x1b1)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body'][_0x2aa44e(0x1ea)](_0x2fbdef),setTimeout(()=>{_0x2fbdef['parentNode']&&_0x2fbdef['remove']();},0xbb8);}