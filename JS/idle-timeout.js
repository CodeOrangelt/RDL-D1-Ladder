const a20_0x4e6c5f=a20_0x1ef2;function a20_0x1ef2(_0x1cba69,_0xa4fc59){const _0x3f8f3e=a20_0x5a20();return a20_0x1ef2=function(_0x553ff4,_0xc91f28){_0x553ff4=_0x553ff4-0x130;let _0x5a20e1=_0x3f8f3e[_0x553ff4];return _0x5a20e1;},a20_0x1ef2(_0x1cba69,_0xa4fc59);}import a20_0x207a95,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x47971f=a20_0x1ef2;if(document[_0x47971f(0x134)]('idle-overlay'))return;const _0x1f8c9d=document['createElement']('div');_0x1f8c9d['id']='idle-overlay',_0x1f8c9d['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x146b27=document['createElement']('div');_0x146b27['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x3a61c9=document['createElement']('h2');_0x3a61c9['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x3a61c9[_0x47971f(0x154)]['cssText']=_0x47971f(0x144);const _0x3349fb=document['createElement']('p');_0x3349fb['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x3349fb['style'][_0x47971f(0x132)]=_0x47971f(0x159);const _0x3a743e=document['createElement']('button');_0x3a743e['id']='resume-session-btn',_0x3a743e['textContent']='Return\x20to\x20Website',_0x3a743e['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20',_0x3a743e[_0x47971f(0x136)]=function(){const _0x14fa9a=_0x47971f;this['style'][_0x14fa9a(0x155)]='#3da05f';},_0x3a743e[_0x47971f(0x13d)]=function(){this['style']['backgroundColor']='#50C878';},_0x146b27['appendChild'](_0x3a61c9),_0x146b27[_0x47971f(0x15b)](_0x3349fb),_0x146b27[_0x47971f(0x15b)](_0x3a743e),_0x1f8c9d['appendChild'](_0x146b27),document['body']['appendChild'](_0x1f8c9d),_0x3a743e['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x46de1e=a20_0x1ef2;if(document['getElementById']('network-error-overlay'))return;const _0x496e34=document[_0x46de1e(0x14d)]('div');_0x496e34['id']='network-error-overlay',_0x496e34['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x53fc70=document['createElement'](_0x46de1e(0x147));_0x53fc70['style'][_0x46de1e(0x132)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x4851d5=document['createElement']('h2');_0x4851d5[_0x46de1e(0x158)]='Connection\x20Error',_0x4851d5[_0x46de1e(0x154)]['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x17c115=document['createElement']('p');_0x17c115[_0x46de1e(0x158)]='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x17c115['style'][_0x46de1e(0x132)]='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x9ad88e=document['createElement']('button');_0x9ad88e['id']=_0x46de1e(0x146),_0x9ad88e['textContent']='Retry\x20Connection',_0x9ad88e['style'][_0x46de1e(0x132)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x5c2958=document[_0x46de1e(0x14d)]('button');_0x5c2958['id']='reload-page-btn',_0x5c2958[_0x46de1e(0x158)]='Reload\x20Page',_0x5c2958[_0x46de1e(0x154)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x15adeb=document['createElement']('div');_0x15adeb['style']['cssText']=_0x46de1e(0x14c),_0x15adeb['appendChild'](_0x9ad88e),_0x15adeb['appendChild'](_0x5c2958),_0x53fc70[_0x46de1e(0x15b)](_0x4851d5),_0x53fc70[_0x46de1e(0x15b)](_0x17c115),_0x53fc70[_0x46de1e(0x15b)](_0x15adeb),_0x496e34['appendChild'](_0x53fc70),document['body']['appendChild'](_0x496e34),_0x9ad88e['addEventListener']('click',retryConnection),_0x5c2958['addEventListener']('click',()=>window['location'][_0x46de1e(0x148)]());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function a20_0x5a20(){const _0x52be3e=['warn','Pending\x20operations:','cssText','console','getElementById','error','onmouseover','preventDefault','idle-overlay','Idle\x20timeout\x20initialized:','RDL_NETWORK_ERROR','{}.constructor(\x22return\x20this\x22)(\x20)','resource-exhausted','onmouseout','mousedown','table','addEventListener','system','loading','network-error-overlay','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','keys','retry-connection-btn','div','reload','none','Active\x20listeners:','log','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','createElement','catch','info','resumeAllListeners','RDL_SESSION_SUSPENDED','click','mousemove','style','backgroundColor','forceIdleTimeout','Retrying\x20connection...','textContent','color:\x20#fff;\x20margin-bottom:\x2030px;','now','appendChild','DOMContentLoaded','Session\x20resumed','touchstart'];a20_0x5a20=function(){return _0x52be3e;};return a20_0x5a20();}function handleNetworkError(){const _0x5c93b0=a20_0x1ef2;clearTimeout(idleTimer);const _0xc9b5f5=document['getElementById'](_0x5c93b0(0x143));_0xc9b5f5&&(_0xc9b5f5['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a20_0x207a95['suspendAllListeners']();}function retryConnection(){const _0x2022cd=a20_0x1ef2;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x1a871b=document['querySelector']('#network-error-overlay\x20p');_0x1a871b&&(_0x1a871b['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x43172a=document['getElementById']('retry-connection-btn');_0x43172a&&(_0x43172a['disabled']=!![],_0x43172a[_0x2022cd(0x154)]['opacity']='0.5',_0x43172a['style']['cursor']='not-allowed');return;}const _0xea7db2=document[_0x2022cd(0x134)]('network-error-overlay');_0xea7db2&&(_0xea7db2['style']['display']=_0x2022cd(0x149));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log'](_0x2022cd(0x157));try{const {rdlFirestore:_0x324659}=window;if(_0x324659){const _0x30cd08=_0x324659['collection'](_0x2022cd(0x141));_0x324659['getDocs'](_0x30cd08)[_0x2022cd(0x14e)](_0x23a625=>{const _0x5a2237=_0x2022cd;console[_0x5a2237(0x135)]('Connection\x20test\x20failed:',_0x23a625),handleNetworkError();});}}catch(_0x11f70b){console[_0x2022cd(0x135)]('Failed\x20to\x20test\x20connection:',_0x11f70b),handleNetworkError();}a20_0x207a95['resumeAllListeners']();}function suspendSession(){const _0x426d3b=a20_0x1ef2;isSessionSuspended=!![];const _0x10a975=document['getElementById'](_0x426d3b(0x138));_0x10a975&&(_0x10a975[_0x426d3b(0x154)]['display']='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a20_0x207a95['suspendAllListeners']();}function resumeSession(){const _0x578e9c=a20_0x1ef2;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x12a94d=document['getElementById']('idle-overlay');_0x12a94d&&(_0x12a94d['style']['display']=_0x578e9c(0x149)),console['log'](_0x578e9c(0x15d)),resetIdleTimer(),a20_0x207a95[_0x578e9c(0x150)](),idleTimer&&Date[_0x578e9c(0x15a)]()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0x51fafb=a20_0x1ef2,_0x5aa6a0=(function(){let _0x164262=!![];return function(_0x431ce9,_0x1c43bb){const _0x4cb294=_0x164262?function(){if(_0x1c43bb){const _0x1bcc56=_0x1c43bb['apply'](_0x431ce9,arguments);return _0x1c43bb=null,_0x1bcc56;}}:function(){};return _0x164262=![],_0x4cb294;};}()),_0x12e58a=_0x5aa6a0(this,function(){const _0x954964=a20_0x1ef2;let _0x2b3f7d;try{const _0x23f67f=Function('return\x20(function()\x20'+_0x954964(0x13b)+');');_0x2b3f7d=_0x23f67f();}catch(_0x2dd9c5){_0x2b3f7d=window;}const _0x149791=_0x2b3f7d[_0x954964(0x133)]=_0x2b3f7d[_0x954964(0x133)]||{},_0x4c2d0d=['log',_0x954964(0x130),_0x954964(0x14f),'error','exception',_0x954964(0x13f),'trace'];for(let _0x294648=0x0;_0x294648<_0x4c2d0d['length'];_0x294648++){const _0x10b9cb=_0x5aa6a0['constructor']['prototype']['bind'](_0x5aa6a0),_0xb50e29=_0x4c2d0d[_0x294648],_0x5667a6=_0x149791[_0xb50e29]||_0x10b9cb;_0x10b9cb['__proto__']=_0x5aa6a0['bind'](_0x5aa6a0),_0x10b9cb['toString']=_0x5667a6['toString']['bind'](_0x5667a6),_0x149791[_0xb50e29]=_0x10b9cb;}});_0x12e58a(),createIdleOverlay();const _0x4453e5=[_0x51fafb(0x13e),_0x51fafb(0x153),'keypress','scroll',_0x51fafb(0x15e),_0x51fafb(0x152)];_0x4453e5['forEach'](_0x1c9217=>{const _0x1af173=_0x51fafb;document[_0x1af173(0x140)](_0x1c9217,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener'](_0x51fafb(0x135),function(_0x1dc6e7){const _0x4213c6=_0x51fafb;_0x1dc6e7[_0x4213c6(0x135)]&&(_0x1dc6e7['error']['message']&&_0x1dc6e7['error']['message']['includes']('network')||_0x1dc6e7['error']['code']&&(_0x1dc6e7['error']['code']==='unavailable'||_0x1dc6e7['error']['code']===_0x4213c6(0x13c)||_0x1dc6e7['error']['code']['includes']('network')))&&(handleNetworkError(),_0x1dc6e7[_0x4213c6(0x137)]());}),resetIdleTimer(),console['log'](_0x51fafb(0x139),IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x1cdc74=_0x51fafb;return console[_0x1cdc74(0x14b)]('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console['log'](_0x1cdc74(0x14a),a20_0x207a95['activeListeners']['size']),console['log'](_0x1cdc74(0x131),a20_0x207a95['pendingOperations']['size']),console['log']('Blocked\x20operations:',a20_0x207a95['blockedOperations']||0x0),{'suspended':window[_0x1cdc74(0x151)],'networkError':window[_0x1cdc74(0x13a)],'activeListeners':Array['from'](a20_0x207a95['activeListeners'][_0x1cdc74(0x145)]()),'pendingOperations':Array['from'](a20_0x207a95['pendingOperations'][_0x1cdc74(0x145)]()),'blockedCount':a20_0x207a95['blockedOperations']||0x0};},window[_0x51fafb(0x156)]=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']===a20_0x4e6c5f(0x142)?document['addEventListener'](a20_0x4e6c5f(0x15c),initIdleTimeout):initIdleTimeout();