function a17_0x123c(_0x1544ee,_0xb23d19){const _0x4456c2=a17_0x4259();return a17_0x123c=function(_0x4b450b,_0x20f3a8){_0x4b450b=_0x4b450b-0x138;let _0x42593f=_0x4456c2[_0x4b450b];return _0x42593f;},a17_0x123c(_0x1544ee,_0xb23d19);}function a17_0x4259(){const _0x35df0e=['checkSessionActive','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle','[FirebaseIdle]\x20Active\x20listeners:\x20','[FirebaseIdle]\x20Error\x20suspending\x20listener:','operation','set','\x20total\x20operations','__proto__','error','[FirebaseIdle]\x20Suspending\x20listener:','size','[FirebaseIdle]\x20Resuming\x20listeners:','exception','query','bind','function','log','get','substr','update','_suspendedListeners','includes','[FirebaseIdle]\x20All\x20listeners\x20suspended','return\x20(function()\x20','suspendAllListeners','message','prototype','code','Firebase:\x20Suspended','toString','[FirebaseIdle]\x20Suspension\x20test\x20complete','[FirebaseIdle]\x20Listeners\x20resumed','activeListeners','blockedOperations','pendingOperations','system','operationType','resumeAllListeners','deleteDocument','[FirebaseIdle]\x20Resuming\x20listener:','[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','catch','createListener','pendingTimeout','executePendingOperations','safeOperation','unsubscribe','debug','substring','getDocument','warn','forEach','RDL_SESSION_SUSPENDED','[FirebaseIdle]\x20Debug\x20mode\x20'];a17_0x4259=function(){return _0x35df0e;};return a17_0x4259();}const a17_0x10df35=a17_0x123c,a17_0x4b450b=(function(){let _0x479d44=!![];return function(_0x3eb05f,_0x5b533d){const _0x39d747=_0x479d44?function(){if(_0x5b533d){const _0x57b0cf=_0x5b533d['apply'](_0x3eb05f,arguments);return _0x5b533d=null,_0x57b0cf;}}:function(){};return _0x479d44=![],_0x39d747;};}()),a17_0x4456c2=a17_0x4b450b(this,function(){const _0x1e4c3e=a17_0x123c;let _0x2641a9;try{const _0x1fc160=Function(_0x1e4c3e(0x14f)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2641a9=_0x1fc160();}catch(_0x1dd2cf){_0x2641a9=window;}const _0x146fca=_0x2641a9['console']=_0x2641a9['console']||{},_0x44d1dc=['log',_0x1e4c3e(0x16b),'info',_0x1e4c3e(0x140),_0x1e4c3e(0x144),'table','trace'];for(let _0x4a6dcd=0x0;_0x4a6dcd<_0x44d1dc['length'];_0x4a6dcd++){const _0x533534=a17_0x4b450b['constructor'][_0x1e4c3e(0x152)]['bind'](a17_0x4b450b),_0x321924=_0x44d1dc[_0x4a6dcd],_0x6a6fac=_0x146fca[_0x321924]||_0x533534;_0x533534[_0x1e4c3e(0x13f)]=a17_0x4b450b[_0x1e4c3e(0x146)](a17_0x4b450b),_0x533534['toString']=_0x6a6fac['toString']['bind'](_0x6a6fac),_0x146fca[_0x321924]=_0x533534;}});a17_0x4456c2();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}['checkSessionActive'](){const _0x337332=a17_0x123c;if(window['RDL_SESSION_SUSPENDED']===!![])return console[_0x337332(0x148)](_0x337332(0x139)),this['blockedOperations']=(this[_0x337332(0x159)]||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn']('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log'](_0x337332(0x161)),![];return!![];}async['safeOperation'](_0x3cd5c9,_0x42906c,..._0x39986b){const _0x53ec0a=a17_0x123c;if(!this['checkSessionActive']()){const _0xf590fc=_0x42906c+'-'+Date['now']()+'-'+Math['random']()[_0x53ec0a(0x155)](0x24)[_0x53ec0a(0x169)](0x2,0x9);return this['pendingOperations'][_0x53ec0a(0x13d)](_0xf590fc,{'operation':_0x3cd5c9,'operationType':_0x42906c,'args':_0x39986b}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{const _0x4208e4=_0x53ec0a;this['pendingOperations']['clear'](),this[_0x4208e4(0x164)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x3cd5c9(..._0x39986b);}catch(_0x222087){if(_0x222087[_0x53ec0a(0x153)]==='unavailable'||_0x222087['code']==='resource-exhausted'||_0x222087[_0x53ec0a(0x151)]&&_0x222087[_0x53ec0a(0x151)][_0x53ec0a(0x14d)]('network'))return handleNetworkError(),null;throw _0x222087;}}async[a17_0x10df35(0x16a)](_0x3ce0b0){const _0x3cba22=a17_0x10df35;return this['safeOperation'](getDoc,_0x3cba22(0x149),_0x3ce0b0);}async['getDocuments'](_0x492cfa){const _0x2ce305=a17_0x10df35;return this['safeOperation'](getDocs,_0x2ce305(0x145),_0x492cfa);}async['addDocument'](_0x119c8e,_0x437d2f){const _0x3e710c=a17_0x10df35;return this[_0x3e710c(0x166)](addDoc,'add',_0x119c8e,_0x437d2f);}async['setDocument'](_0x14f65c,_0x9b5b31,_0x1b8ec0={}){const _0x3511aa=a17_0x10df35;return this['safeOperation'](setDoc,_0x3511aa(0x13d),_0x14f65c,_0x9b5b31,_0x1b8ec0);}async['updateDocument'](_0x3c8336,_0x18db3f){const _0x47cf26=a17_0x10df35;return this['safeOperation'](updateDoc,_0x47cf26(0x14b),_0x3c8336,_0x18db3f);}async[a17_0x10df35(0x15e)](_0x4c91af){return this['safeOperation'](deleteDoc,'delete',_0x4c91af);}[a17_0x10df35(0x150)](){const _0x4a5625=a17_0x10df35;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners'][_0x4a5625(0x142)]),this[_0x4a5625(0x14c)]=new Map(this['activeListeners']),this[_0x4a5625(0x158)]['forEach']((_0x3d3465,_0x2961e3)=>{const _0x144b80=_0x4a5625;console[_0x144b80(0x148)](_0x144b80(0x141),_0x2961e3);if(typeof _0x3d3465===_0x144b80(0x147))try{_0x3d3465(),console[_0x144b80(0x148)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x2961e3);}catch(_0x29f02a){console[_0x144b80(0x140)](_0x144b80(0x13b),_0x2961e3,_0x29f02a);}else{if(_0x3d3465&&typeof _0x3d3465[_0x144b80(0x167)]==='function')try{_0x3d3465['unsubscribe'](),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x2961e3);}catch(_0x2ddee7){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x2961e3,_0x2ddee7);}}}),this['activeListeners']['clear']();if(this[_0x4a5625(0x168)]){const _0x1bbfee=document['createElement']('div');_0x1bbfee['id']='firebase-suspend-indicator',_0x1bbfee['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x1bbfee['textContent']=_0x4a5625(0x154),document['body']['appendChild'](_0x1bbfee);}console['log'](_0x4a5625(0x14e));}['resumeAllListeners'](){const _0x4cda67=a17_0x10df35;if(!this['_suspendedListeners']||this['_suspendedListeners'][_0x4cda67(0x142)]===0x0){console[_0x4cda67(0x148)]('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log'](_0x4cda67(0x143),this['_suspendedListeners'][_0x4cda67(0x142)]),this[_0x4cda67(0x14c)]['forEach']((_0x53d4ca,_0x11b041)=>{const _0x2c9b38=_0x4cda67;console['log'](_0x2c9b38(0x15f),_0x11b041);try{if(typeof _0x53d4ca==='function'){console[_0x2c9b38(0x16b)](_0x2c9b38(0x160),_0x11b041);return;}const {query:_0xfd8c5e,callback:_0x9967f8,options:_0x9d62c9}=_0x53d4ca;if(_0xfd8c5e&&_0x9967f8){const _0x55bf8f=onSnapshot(_0xfd8c5e,_0x9967f8,_0x9d62c9||{});this[_0x2c9b38(0x158)][_0x2c9b38(0x13d)](_0x11b041,_0x55bf8f),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x11b041);}}catch(_0x48c139){console[_0x2c9b38(0x140)]('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x11b041,_0x48c139);}}),this['_suspendedListeners']['clear']();const _0x142c68=document['getElementById']('firebase-suspend-indicator');_0x142c68&&_0x142c68['remove'](),console['log'](_0x4cda67(0x157));}[a17_0x10df35(0x163)](_0x6fc6ba,_0x524e50,_0x264ff6={},_0x5d125f=null){const _0x20566e=a17_0x10df35,_0x38abf8=_0x5d125f||'listener_'+Date['now']()+'_'+Math['random']()['toString'](0x24)[_0x20566e(0x14a)](0x2,0x9);this[_0x20566e(0x168)]&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x38abf8);if(!this[_0x20566e(0x138)]())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x38abf8),()=>{};try{const _0x125446=onSnapshot(_0x6fc6ba,_0x524e50,_0x264ff6);return this['activeListeners']['set'](_0x38abf8,{'unsubscribe':_0x125446,'query':_0x6fc6ba,'callback':_0x524e50,'options':_0x264ff6}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x38abf8),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this[_0x20566e(0x158)]['size'])),()=>{const _0x5c16c7=_0x20566e;this['debug']&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x38abf8);try{_0x125446(),this['activeListeners']['delete'](_0x38abf8),this[_0x5c16c7(0x168)]&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x38abf8),console['log'](_0x5c16c7(0x13a)+this[_0x5c16c7(0x158)]['size']));}catch(_0x964659){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x38abf8+':',_0x964659);}};}catch(_0x355c02){return console[_0x20566e(0x140)]('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x38abf8+':',_0x355c02),()=>{};}}[a17_0x10df35(0x165)](_0x4acf5a='all'){const _0x2880d8=a17_0x10df35;console['log']('Executing\x20pending\x20'+_0x4acf5a+'\x20operations:\x20'+this['pendingOperations']['size']+_0x2880d8(0x13e));const _0x226d9a=new Map(this[_0x2880d8(0x15a)]);this['pendingOperations']['clear'](),_0x226d9a[_0x2880d8(0x16c)]((_0x16ee5b,_0x113ec7)=>{const _0x56be0f=_0x2880d8;_0x4acf5a==='all'||_0x16ee5b['operationType']===_0x4acf5a?(console['log']('Executing\x20delayed\x20'+_0x16ee5b['operationType']+'\x20operation'),this['safeOperation'](_0x16ee5b[_0x56be0f(0x13c)],_0x16ee5b[_0x56be0f(0x15c)],..._0x16ee5b['args'])[_0x56be0f(0x162)](_0x2c353a=>console['error']('Error\x20executing\x20pending\x20operation:',_0x2c353a))):this[_0x56be0f(0x15a)]['set'](_0x113ec7,_0x16ee5b);});}['enableDebug'](_0x3f2d60=!![]){const _0x51094b=a17_0x10df35;this['debug']=_0x3f2d60,console['log'](_0x51094b(0x16e)+(_0x3f2d60?'enabled':'disabled'));if(_0x3f2d60){const _0x4fe9ea=window[_0x51094b(0x16d)];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x51094b(0x15b),'test'))['then'](_0x48542a=>{const _0x5a2b12=_0x51094b;console[_0x5a2b12(0x148)]('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x48542a);})['catch'](_0x5eef53=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x5eef53);})['finally'](()=>{const _0x8bc516=_0x51094b;console[_0x8bc516(0x148)](_0x8bc516(0x156)),window['RDL_SESSION_SUSPENDED']=_0x4fe9ea;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x3aba42=window['suspendSession']||function(){},_0x1b1134=window['resumeSession']||function(){};window['suspendSession']=function(){_0x3aba42(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){const _0xf8f8d8=a17_0x123c;_0x1b1134(),firebaseIdle[_0xf8f8d8(0x15d)]();};}export default firebaseIdle;