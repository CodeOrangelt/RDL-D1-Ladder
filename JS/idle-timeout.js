const a20_0x13e259=a20_0x4bd3;import a20_0x37a5b6,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x5507d2=a20_0x4bd3;if(document['getElementById']('idle-overlay'))return;const _0x3194f7=document['createElement']('div');_0x3194f7['id']='idle-overlay',_0x3194f7['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x44a850=document['createElement']('div');_0x44a850['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x3aa36f=document['createElement']('h2');_0x3aa36f['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x3aa36f['style']['cssText']=_0x5507d2(0x1e6);const _0x33feaa=document['createElement']('p');_0x33feaa[_0x5507d2(0x1d2)]=_0x5507d2(0x1e1),_0x33feaa['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x3819e5=document['createElement']('button');_0x3819e5['id']='resume-session-btn',_0x3819e5['textContent']='Return\x20to\x20Website',_0x3819e5[_0x5507d2(0x1d3)]['cssText']=_0x5507d2(0x1f9),_0x3819e5['onmouseover']=function(){const _0x5b7dd7=_0x5507d2;this[_0x5b7dd7(0x1d3)]['backgroundColor']=_0x5b7dd7(0x1d1);},_0x3819e5[_0x5507d2(0x1ff)]=function(){const _0x495832=_0x5507d2;this['style'][_0x495832(0x1ca)]='#50C878';},_0x44a850['appendChild'](_0x3aa36f),_0x44a850['appendChild'](_0x33feaa),_0x44a850['appendChild'](_0x3819e5),_0x3194f7['appendChild'](_0x44a850),document[_0x5507d2(0x1cd)]['appendChild'](_0x3194f7),_0x3819e5['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function a20_0x4bd3(_0x54ccbe,_0x1fa53f){const _0x28839c=a20_0x3917();return a20_0x4bd3=function(_0x3c83b8,_0x594b3e){_0x3c83b8=_0x3c83b8-0x1c9;let _0x3917d3=_0x28839c[_0x3c83b8];return _0x3917d3;},a20_0x4bd3(_0x54ccbe,_0x1fa53f);}function createNetworkErrorOverlay(){const _0x3b005b=a20_0x4bd3;if(document['getElementById']('network-error-overlay'))return;const _0x1ffbbe=document['createElement'](_0x3b005b(0x1ec));_0x1ffbbe['id']='network-error-overlay',_0x1ffbbe['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x1105fe=document['createElement'](_0x3b005b(0x1ec));_0x1105fe[_0x3b005b(0x1d3)]['cssText']=_0x3b005b(0x1fe);const _0x535d34=document['createElement']('h2');_0x535d34['textContent']=_0x3b005b(0x1dc),_0x535d34[_0x3b005b(0x1d3)]['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x7abcc7=document['createElement']('p');_0x7abcc7['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x7abcc7['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x1da002=document[_0x3b005b(0x1fc)]('button');_0x1da002['id']='retry-connection-btn',_0x1da002['textContent']=_0x3b005b(0x1e8),_0x1da002['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x114f1c=document['createElement']('button');_0x114f1c['id']='reload-page-btn',_0x114f1c[_0x3b005b(0x1d2)]='Reload\x20Page',_0x114f1c['style'][_0x3b005b(0x1f8)]=_0x3b005b(0x1f6);const _0x182044=document[_0x3b005b(0x1fc)]('div');_0x182044[_0x3b005b(0x1d3)]['cssText']=_0x3b005b(0x1cc),_0x182044[_0x3b005b(0x1fa)](_0x1da002),_0x182044[_0x3b005b(0x1fa)](_0x114f1c),_0x1105fe['appendChild'](_0x535d34),_0x1105fe['appendChild'](_0x7abcc7),_0x1105fe[_0x3b005b(0x1fa)](_0x182044),_0x1ffbbe['appendChild'](_0x1105fe),document[_0x3b005b(0x1cd)]['appendChild'](_0x1ffbbe),_0x1da002['addEventListener']('click',retryConnection),_0x114f1c['addEventListener']('click',()=>window['location']['reload']());}function a20_0x3917(){const _0x5ccf9d=['none','backgroundColor','forceIdleTimeout','display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;','body','suspendAllListeners','code','retry-connection-btn','#3da05f','textContent','style','opacity','log','from','Pending\x20operations:','info','resumeAllListeners','0.5','#network-error-overlay\x20p','Connection\x20Error','Connection\x20test\x20failed:','touchstart','forEach','length','Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.','error','activeListeners','flex','console','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','RDL_SESSION_SUSPENDED','Retry\x20Connection','Active\x20listeners:','message','system','div','Retrying\x20connection...','network','mousedown','RDL_LAST_ACTIVITY','includes','toString','Session\x20suspended\x20due\x20to\x20inactivity','Forcing\x20idle\x20timeout...','size','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','network-error-overlay','cssText','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','appendChild','Blocked\x20operations:','createElement','DOMContentLoaded','\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20','onmouseout','unavailable'];a20_0x3917=function(){return _0x5ccf9d;};return a20_0x3917();}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x42262d=a20_0x4bd3;clearTimeout(idleTimer);const _0x4a10c9=document['getElementById']('network-error-overlay');_0x4a10c9&&(_0x4a10c9[_0x42262d(0x1d3)]['display']=_0x42262d(0x1e4)),window['RDL_NETWORK_ERROR']=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a20_0x37a5b6[_0x42262d(0x1ce)]();}function retryConnection(){const _0xce590d=a20_0x4bd3;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x405094=document['querySelector'](_0xce590d(0x1db));_0x405094&&(_0x405094['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x2a59db=document['getElementById'](_0xce590d(0x1d0));_0x2a59db&&(_0x2a59db['disabled']=!![],_0x2a59db['style'][_0xce590d(0x1d4)]=_0xce590d(0x1da),_0x2a59db['style']['cursor']='not-allowed');return;}const _0x1971d5=document['getElementById'](_0xce590d(0x1f7));_0x1971d5&&(_0x1971d5['style']['display']=_0xce590d(0x1c9));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console['log'](_0xce590d(0x1ed));try{const {rdlFirestore:_0x51480b}=window;if(_0x51480b){const _0x2b7de1=_0x51480b['collection'](_0xce590d(0x1eb));_0x51480b['getDocs'](_0x2b7de1)['catch'](_0x25a20f=>{const _0x584876=_0xce590d;console[_0x584876(0x1e2)](_0x584876(0x1dd),_0x25a20f),handleNetworkError();});}}catch(_0x36cac1){console['error']('Failed\x20to\x20test\x20connection:',_0x36cac1),handleNetworkError();}a20_0x37a5b6[_0xce590d(0x1d9)]();}function suspendSession(){const _0x380d0f=a20_0x4bd3;isSessionSuspended=!![];const _0x2b3fbb=document['getElementById']('idle-overlay');_0x2b3fbb&&(_0x2b3fbb['style']['display']='flex'),console['log'](_0x380d0f(0x1f3)),window[_0x380d0f(0x1e7)]=!![],a20_0x37a5b6[_0x380d0f(0x1ce)]();}function resumeSession(){const _0x174828=a20_0x4bd3;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x3443ba=document['getElementById']('idle-overlay');_0x3443ba&&(_0x3443ba[_0x174828(0x1d3)]['display']='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a20_0x37a5b6['resumeAllListeners'](),idleTimer&&Date['now']()-(window[_0x174828(0x1f0)]||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0x25b4d8=a20_0x4bd3,_0x23fc09=(function(){let _0x41ee6c=!![];return function(_0x4e4773,_0x19344b){const _0x544c0e=_0x41ee6c?function(){if(_0x19344b){const _0x400256=_0x19344b['apply'](_0x4e4773,arguments);return _0x19344b=null,_0x400256;}}:function(){};return _0x41ee6c=![],_0x544c0e;};}()),_0x3e9458=_0x23fc09(this,function(){const _0x28941d=a20_0x4bd3,_0x5d27f5=function(){let _0x51ca83;try{_0x51ca83=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x948ea1){_0x51ca83=window;}return _0x51ca83;},_0x3454f5=_0x5d27f5(),_0xae05ee=_0x3454f5['console']=_0x3454f5[_0x28941d(0x1e5)]||{},_0x7d8566=[_0x28941d(0x1d5),'warn',_0x28941d(0x1d8),'error','exception','table','trace'];for(let _0x508ad8=0x0;_0x508ad8<_0x7d8566[_0x28941d(0x1e0)];_0x508ad8++){const _0x2edc62=_0x23fc09['constructor']['prototype']['bind'](_0x23fc09),_0x21e6f2=_0x7d8566[_0x508ad8],_0x3060f2=_0xae05ee[_0x21e6f2]||_0x2edc62;_0x2edc62['__proto__']=_0x23fc09['bind'](_0x23fc09),_0x2edc62['toString']=_0x3060f2[_0x28941d(0x1f2)]['bind'](_0x3060f2),_0xae05ee[_0x21e6f2]=_0x2edc62;}});_0x3e9458(),createIdleOverlay();const _0x497b78=[_0x25b4d8(0x1ef),'mousemove','keypress','scroll',_0x25b4d8(0x1de),'click'];_0x497b78[_0x25b4d8(0x1df)](_0x4113d7=>{document['addEventListener'](_0x4113d7,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener'](_0x25b4d8(0x1e2),function(_0x35b81d){const _0x687a10=_0x25b4d8;_0x35b81d['error']&&(_0x35b81d['error']['message']&&_0x35b81d['error'][_0x687a10(0x1ea)][_0x687a10(0x1f1)](_0x687a10(0x1ee))||_0x35b81d['error']['code']&&(_0x35b81d['error'][_0x687a10(0x1cf)]===_0x687a10(0x200)||_0x35b81d['error'][_0x687a10(0x1cf)]==='resource-exhausted'||_0x35b81d[_0x687a10(0x1e2)]['code'][_0x687a10(0x1f1)]('network')))&&(handleNetworkError(),_0x35b81d['preventDefault']());}),resetIdleTimer(),console['log']('Idle\x20timeout\x20initialized:',IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x4ac832=_0x25b4d8;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console[_0x4ac832(0x1d5)]('Network\x20error:',window['RDL_NETWORK_ERROR']),console['log'](_0x4ac832(0x1e9),a20_0x37a5b6[_0x4ac832(0x1e3)]['size']),console['log'](_0x4ac832(0x1d7),a20_0x37a5b6['pendingOperations'][_0x4ac832(0x1f5)]),console[_0x4ac832(0x1d5)](_0x4ac832(0x1fb),a20_0x37a5b6['blockedOperations']||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a20_0x37a5b6[_0x4ac832(0x1e3)]['keys']()),'pendingOperations':Array[_0x4ac832(0x1d6)](a20_0x37a5b6['pendingOperations']['keys']()),'blockedCount':a20_0x37a5b6['blockedOperations']||0x0};},window[_0x25b4d8(0x1cb)]=function(){const _0x1f2702=_0x25b4d8;console[_0x1f2702(0x1d5)](_0x1f2702(0x1f4)),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document['addEventListener'](a20_0x13e259(0x1fd),initIdleTimeout):initIdleTimeout();