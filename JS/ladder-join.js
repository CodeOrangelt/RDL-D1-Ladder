const a23_0x62eb2b=a23_0x5b2e,a23_0x320f8a=(function(){let _0x133f28=!![];return function(_0x2c6952,_0x2662ee){const _0x5f391c=_0x133f28?function(){if(_0x2662ee){const _0x25b0e1=_0x2662ee['apply'](_0x2c6952,arguments);return _0x2662ee=null,_0x25b0e1;}}:function(){};return _0x133f28=![],_0x5f391c;};}()),a23_0x234020=a23_0x320f8a(this,function(){const _0x1184fd=a23_0x5b2e;let _0x250356;try{const _0x1d29ed=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x250356=_0x1d29ed();}catch(_0x3679d9){_0x250356=window;}const _0x1bfe9b=_0x250356[_0x1184fd(0x1e9)]=_0x250356[_0x1184fd(0x1e9)]||{},_0xc02dcc=[_0x1184fd(0x201),_0x1184fd(0x1fd),'info','error',_0x1184fd(0x1f4),'table',_0x1184fd(0x1df)];for(let _0x286078=0x0;_0x286078<_0xc02dcc['length'];_0x286078++){const _0x4bd676=a23_0x320f8a[_0x1184fd(0x207)][_0x1184fd(0x204)]['bind'](a23_0x320f8a),_0x36d142=_0xc02dcc[_0x286078],_0x48f16c=_0x1bfe9b[_0x36d142]||_0x4bd676;_0x4bd676[_0x1184fd(0x1f1)]=a23_0x320f8a['bind'](a23_0x320f8a),_0x4bd676['toString']=_0x48f16c['toString']['bind'](_0x48f16c),_0x1bfe9b[_0x36d142]=_0x4bd676;}});a23_0x234020();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';function a23_0x5b2e(_0x487834,_0x182e13){const _0x234020=a23_0x36e2();return a23_0x5b2e=function(_0x320f8a,_0x4d5316){_0x320f8a=_0x320f8a-0x1df;let _0x36e2ca=_0x234020[_0x320f8a];return _0x36e2ca;},a23_0x5b2e(_0x487834,_0x182e13);}function a23_0x36e2(){const _0x4deae4=['trace','value','error','forEach','DOMContentLoaded','empty','addEventListener','ladder-join-prompt','tiny-join-button','trim','console','reload','Ladder\x20changed\x20to:\x20','players','block','toLowerCase','ladder-join-status\x20success','playersD3','__proto__','join-ladder-button','getElementById','exception','className','uid','CTF','Error\x20checking\x20ladder\x20status:','playersD2','\x22\x20to\x20confirm.','exists','Ladder\x20join:\x20D2\x20radio\x20found:','warn','Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...',',\x20defaulting\x20to\x20D1','style','log','d2-switch','onclick','prototype','DUOS','input[name=\x22ladder\x22]','constructor','display','d1-switch','textContent','disabled','\x20ladder.','none','Ladder\x20join:\x20D1\x20radio\x20found:','Please\x20enter\x20your\x20username\x20to\x20confirm.','Successfully\x20joined\x20the\x20'];a23_0x36e2=function(){return _0x4deae4;};return a23_0x36e2();}import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document[a23_0x62eb2b(0x1e5)](a23_0x62eb2b(0x1e3),()=>{const _0x1e842f=a23_0x62eb2b,_0x12a50a=document[_0x1e842f(0x1f3)](_0x1e842f(0x209)),_0x1eeeb9=document['getElementById'](_0x1e842f(0x202));console[_0x1e842f(0x201)](_0x1e842f(0x20e),!!_0x12a50a),console['log'](_0x1e842f(0x1fc),!!_0x1eeeb9);function _0x1e110b(){const _0x486ffa=_0x1e842f;document['querySelectorAll'](_0x486ffa(0x206))[_0x486ffa(0x1e2)](_0x375c08=>{_0x375c08['addEventListener']('change',_0x57e592=>{const _0x5cd5ab=a23_0x5b2e;_0x57e592['target']['checked']&&(currentLadder=_0x57e592['target']['value'],console[_0x5cd5ab(0x201)](_0x5cd5ab(0x1eb)+currentLadder),checkUserLadderStatus());});});}_0x1e110b();const _0x491d27=document[_0x1e842f(0x1f3)](_0x1e842f(0x1f2));_0x491d27&&_0x491d27['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x2b72f2=>{const _0x28d43e=_0x1e842f;if(_0x2b72f2)checkUserLadderStatus();else{const _0x48ae72=document['getElementById'](_0x28d43e(0x1e6));_0x48ae72&&(_0x48ae72['style'][_0x28d43e(0x208)]=_0x28d43e(0x20d));}});});function getCollectionName(_0x33c180){const _0x571bbe=a23_0x62eb2b;switch(_0x33c180?.['toUpperCase']()){case'D1':return'players';case'D2':return _0x571bbe(0x1f9);case'D3':return'playersD3';case _0x571bbe(0x205):case'DUO':return'playersDuos';case _0x571bbe(0x1f7):return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x33c180+_0x571bbe(0x1ff));return _0x571bbe(0x1ec);}}async function checkUserLadderStatus(){const _0x3a5ac3=a23_0x62eb2b;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x525776=auth['currentUser'],_0x12f7e9=document['getElementById'](_0x3a5ac3(0x1e6)),_0x220604=document['getElementById']('join-ladder-type'),_0x17d3d0=document[_0x3a5ac3(0x1f3)](_0x3a5ac3(0x1e7));if(!_0x525776||!_0x525776[_0x3a5ac3(0x1f6)]||!_0x12f7e9||!_0x220604||!_0x17d3d0){if(_0x12f7e9)_0x12f7e9['style']['display']=_0x3a5ac3(0x20d);if(_0x17d3d0)_0x17d3d0['style']['display']='none';return;}try{try{await _0x525776['getIdToken'](![]);}catch(_0x9d3002){console[_0x3a5ac3(0x1e1)]('Authentication\x20verification\x20failed:',_0x9d3002),_0x12f7e9['style']['display']=_0x3a5ac3(0x20d),_0x17d3d0[_0x3a5ac3(0x200)]['display']='none';return;}const _0x4f1150=getCollectionName(currentLadder),_0x47902c=doc(db,_0x4f1150,_0x525776[_0x3a5ac3(0x1f6)]),_0x26e824=await getDoc(_0x47902c);if(_0x26e824[_0x3a5ac3(0x1fb)]())_0x12f7e9['style']['display']='none',_0x17d3d0['style']['display']='none';else{_0x12f7e9['style'][_0x3a5ac3(0x208)]='none',_0x17d3d0['style']['display']=_0x3a5ac3(0x1ed),_0x220604['textContent']=currentLadder,_0x17d3d0[_0x3a5ac3(0x203)]=()=>{const _0xa373f7=_0x3a5ac3;_0x12f7e9['style'][_0xa373f7(0x208)]===_0xa373f7(0x1ed)?_0x12f7e9['style']['display']=_0xa373f7(0x20d):_0x12f7e9['style']['display']='block';};const _0x601b50=document[_0x3a5ac3(0x1f3)]('join-username-input'),_0x16f17b=document[_0x3a5ac3(0x1f3)]('ladder-join-status');if(_0x601b50)_0x601b50['value']='';_0x16f17b&&(_0x16f17b['textContent']='',_0x16f17b[_0x3a5ac3(0x1f5)]='ladder-join-status');}}catch(_0x4a2f83){console[_0x3a5ac3(0x1e1)](_0x3a5ac3(0x1f8),_0x4a2f83),_0x12f7e9[_0x3a5ac3(0x200)]['display']=_0x3a5ac3(0x20d),_0x17d3d0['style']['display']='none';}}async function handleJoinLadder(){const _0x365dc3=a23_0x62eb2b,_0x1dcc1c=auth['currentUser'],_0x593255=document['getElementById']('join-ladder-button'),_0x3ce34f=document[_0x365dc3(0x1f3)]('ladder-join-status'),_0x11783f=document['getElementById']('join-username-input');if(!_0x1dcc1c||!_0x1dcc1c[_0x365dc3(0x1f6)]){_0x3ce34f['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x3ce34f['className']='ladder-join-status\x20error';return;}try{await _0x1dcc1c['getIdToken'](!![]);}catch(_0x38e63e){console['error']('Authentication\x20error:',_0x38e63e),_0x3ce34f['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x3ce34f['className']='ladder-join-status\x20error';return;}if(!_0x11783f||!_0x11783f['value'][_0x365dc3(0x1e8)]()){_0x3ce34f['textContent']=_0x365dc3(0x20f),_0x3ce34f['className']='ladder-join-status\x20error';return;}try{_0x593255['disabled']=!![],_0x3ce34f['textContent']='Verifying\x20username...',_0x3ce34f['className']='ladder-join-status\x20loading';let _0x282d83='',_0x3d2255=null;const _0x497fd9=['players','playersD2',_0x365dc3(0x1f0),'playersDuos','playersCTF','nonParticipants'];for(const _0x59d908 of _0x497fd9){try{const _0x4c5f6d=doc(db,_0x59d908,_0x1dcc1c['uid']),_0x27c4ee=await getDoc(_0x4c5f6d);if(_0x27c4ee[_0x365dc3(0x1fb)]()){_0x3d2255=_0x27c4ee['data']();if(_0x3d2255['username']){_0x282d83=_0x3d2255['username'];break;}}}catch(_0x4d5c21){console['error']('Error\x20checking\x20'+_0x59d908+':',_0x4d5c21);}}!_0x282d83&&_0x1dcc1c['email']&&(_0x282d83=_0x1dcc1c['email']['split']('@')[0x0]);if(!_0x282d83){_0x3ce34f[_0x365dc3(0x20a)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x3ce34f['className']='ladder-join-status\x20error',_0x593255[_0x365dc3(0x20b)]=![];return;}const _0x553bad=_0x11783f[_0x365dc3(0x1e0)][_0x365dc3(0x1e8)]();if(_0x282d83&&_0x553bad[_0x365dc3(0x1ee)]()!==_0x282d83['toLowerCase']()){_0x3ce34f['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x282d83+_0x365dc3(0x1fa),_0x3ce34f['className']='ladder-join-status\x20error',_0x593255['disabled']=![];return;}_0x3ce34f['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x4e71ed=getCollectionName(currentLadder),_0x11741c=doc(db,_0x4e71ed,_0x1dcc1c['uid']),_0x6c8a27=await getDoc(_0x11741c);if(_0x6c8a27['exists']()){_0x3ce34f['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+_0x365dc3(0x20c),_0x3ce34f['className']='ladder-join-status\x20error',_0x593255['disabled']=![];return;}try{await _0x1dcc1c['getIdToken'](!![]);}catch(_0x281c03){_0x3ce34f['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x3ce34f[_0x365dc3(0x1f5)]='ladder-join-status\x20error',_0x593255['disabled']=![];return;}const _0x81b475=_0x282d83,_0x3572ab=collection(db,_0x4e71ed),_0x2759b6=query(_0x3572ab,orderBy('position','desc'),limit(0x1)),_0x555911=await getDocs(_0x2759b6);let _0x27715c=0x1;if(!_0x555911[_0x365dc3(0x1e4)]){const _0x3bb25b=_0x555911['docs'][0x0]['data']();_0x27715c=(_0x3bb25b['position']||0x0)+0x1;}const _0x45a80f={'username':_0x81b475,'email':_0x1dcc1c['email'],'eloRating':0x4b0,'position':_0x27715c,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===_0x365dc3(0x205)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x11741c,_0x45a80f),currentLadder==='DUOS'?_0x3ce34f[_0x365dc3(0x20a)]=_0x365dc3(0x1fe):_0x3ce34f[_0x365dc3(0x20a)]=_0x365dc3(0x210)+currentLadder+'\x20ladder!\x20The\x20page\x20will\x20refresh...',_0x3ce34f['className']=_0x365dc3(0x1ef),setTimeout(()=>{const _0xf87c59=_0x365dc3;window['location'][_0xf87c59(0x1ea)]();},0x7d0);}catch(_0x3a0137){console[_0x365dc3(0x1e1)]('Error\x20joining\x20ladder:',_0x3a0137),_0x3ce34f['textContent']='Error\x20joining\x20ladder:\x20'+_0x3a0137['message'],_0x3ce34f['className']='ladder-join-status\x20error',_0x593255['disabled']=![];}}