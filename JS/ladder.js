const a27_0x3792c1=(function(){let _0xcd1705=!![];return function(_0x4d458c,_0x890928){const _0x4e4d9d=_0xcd1705?function(){const _0x2263ca=a27_0x2a7a;if(_0x890928){const _0x2c4b72=_0x890928[_0x2263ca(0x1c2)](_0x4d458c,arguments);return _0x890928=null,_0x2c4b72;}}:function(){};return _0xcd1705=![],_0x4e4d9d;};}()),a27_0x4533e0=a27_0x3792c1(this,function(){const _0x14db43=a27_0x2a7a,_0x5d8c5e=function(){let _0x2435b9;try{_0x2435b9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1f47f0){_0x2435b9=window;}return _0x2435b9;},_0x3573df=_0x5d8c5e(),_0x36be02=_0x3573df['console']=_0x3573df['console']||{},_0x4b0102=['log','warn','info',_0x14db43(0x1bc),'exception',_0x14db43(0x192),_0x14db43(0x1a7)];for(let _0x93192a=0x0;_0x93192a<_0x4b0102['length'];_0x93192a++){const _0x326bff=a27_0x3792c1[_0x14db43(0x1bb)][_0x14db43(0x19c)][_0x14db43(0x1d6)](a27_0x3792c1),_0x362019=_0x4b0102[_0x93192a],_0xac6538=_0x36be02[_0x362019]||_0x326bff;_0x326bff['__proto__']=a27_0x3792c1[_0x14db43(0x1d6)](a27_0x3792c1),_0x326bff[_0x14db43(0x1b1)]=_0xac6538['toString']['bind'](_0xac6538),_0x36be02[_0x362019]=_0x326bff;}});function a27_0x170a(){const _0x105b15=['onAuthStateChanged','Error\x20loading\x20ladder\x20data:','remove','innerText','role','loserScore','querySelector','cssText','toISOString','get','timestamp','country','forEach','empty','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','playersDuos','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toFixed','visible','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20','date','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','#FFD700','has','#CD7F32','Inactive','table','disabled','hasTeam','elo-recommendation-text-d2','opacity','length','D1\x20toggle\x20clicked','getElementById','change','\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20','prototype','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>','Bronze','eloRating','textContent','username','add','d2-switch','totalKills','wins','trace','Ladder\x20table\x20body\x20not\x20found','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#','newEloRating','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','sort','toLowerCase','You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder','td:nth-child(3)','admin-only-message','toString','d3-switch','#b9f1fc','<img\x20src=\x22../images/flags/','active','set','brian2af@outlook.com','elo-recommendation-text-','recentActivity','</span>.\x20Challenge\x20other\x20teams!','constructor','error','block','player','parentNode','Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents','style','apply','elo','display','inactive','classList','createElement','gray','playersD2','</span>\x20(ELO:\x20','Error\x20fetching\x20batch\x20match\x20stats:','docs','duos-switch','log','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','players','none','</span>','exists','playerUsername','innerHTML','bind','totalMatches','council','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','admin','newElo','oldEloRating','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20','data','d2-ladder-container','duos','duos-ladder-container','#50C878','not-allowed','d1-ladder-container','previousElo','elo-recommendation-text-d1','appendChild','Active','Error\x20fetching\x20ELO\x20history:'];a27_0x170a=function(){return _0x105b15;};return a27_0x170a();}a27_0x4533e0();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';function a27_0x2a7a(_0x539e80,_0x5eddc3){const _0x4533e0=a27_0x170a();return a27_0x2a7a=function(_0x3792c1,_0x43fcbd){_0x3792c1=_0x3792c1-0x178;let _0x170a65=_0x4533e0[_0x3792c1];return _0x170a65;},a27_0x2a7a(_0x539e80,_0x5eddc3);}const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x2d7f7e=0x1){const _0x4bd511=a27_0x2a7a;try{document['getElementById']('loading-indicator')['style']['display']='block';const _0x3b0ab5=await getLadderData(_0x2d7f7e);_0x3b0ab5['sort']((_0x2a041d,_0x2b43ef)=>_0x2b43ef[_0x4bd511(0x1c3)]-_0x2a041d['elo']);const _0x3ae30f=_0x3b0ab5['map'](_0x25cc04=>_0x25cc04['id']),_0x14fe93=await getEloHistoryBatch(_0x3ae30f,_0x2d7f7e),_0x411500=_0x3b0ab5['map']((_0x32160e,_0x2288b3)=>{const _0x5bff59=_0x4bd511,_0x3b231b=_0x14fe93[_0x32160e['id']]||[],_0x58786d=_0x3b231b['sort']((_0x3bc5d7,_0x25fa9b)=>new Date(_0x25fa9b[_0x5bff59(0x18c)])-new Date(_0x3bc5d7['date']))['slice'](0x0,0x5);return{..._0x32160e,'rank':_0x2288b3+0x1,'lastMatches':_0x58786d,'recentActivity':_0x58786d['length']>0x0};});renderLadder(_0x411500),setupRealTimeUpdates(_0x2d7f7e);}catch(_0x3b5a78){console[_0x4bd511(0x1bc)](_0x4bd511(0x179),_0x3b5a78),document['getElementById']('error-message')[_0x4bd511(0x17b)]='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById']('loading-indicator')['style']['display']='none';}}function setupRealTimeUpdates(_0x595f8f=0x1){const _0x164158=a27_0x2a7a;activeListeners['forEach'](_0xdfdfa4=>_0xdfdfa4()),activeListeners=[];const _0xaf811=_0x595f8f===0x1?'players':'playersD'+_0x595f8f,_0xf891ec=_0x595f8f===0x1?'matches':'matchesD'+_0x595f8f,_0x450e60=new Date();_0x450e60['setDate'](_0x450e60['getDate']()-0x1);const _0x4dcc2b=setupEfficientListener(_0xf891ec,[where('date','>=',_0x450e60[_0x164158(0x180)]()),limit(0xa),orderBy('date','desc')],async _0x1e5fa4=>{const _0x3c9f47=_0x164158;_0x1e5fa4[_0x3c9f47(0x197)]>0x0&&await loadLadderData(_0x595f8f);});activeListeners['push'](_0x4dcc2b);}export function cleanupListeners(){activeListeners['forEach'](_0x46d53b=>_0x46d53b()),activeListeners=[];}function renderLadder(_0x3c8c71){const _0x37b3bd=a27_0x2a7a,_0x4aae9a=document['getElementById']('ladder-container');_0x4aae9a['innerHTML']='',_0x3c8c71[_0x37b3bd(0x184)](_0x48d7f2=>{const _0x381108=_0x37b3bd,_0x18ad33=document[_0x381108(0x1c7)]('div');_0x18ad33['className']='ladder-player',_0x18ad33['innerHTML']=_0x381108(0x1a9)+_0x48d7f2['rank']+_0x381108(0x1ab)+(_0x48d7f2['username']||_0x48d7f2['id'])+_0x381108(0x19e)+_0x48d7f2['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x48d7f2[_0x381108(0x1b9)]?'active':_0x381108(0x1c5))+_0x381108(0x188)+(_0x48d7f2[_0x381108(0x1b9)]?_0x381108(0x1e8):_0x381108(0x191))+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x4aae9a[_0x381108(0x1e7)](_0x18ad33);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x126726=![]){const _0x8c43cd=a27_0x2a7a,_0x499c76=document['querySelector']('#ladder\x20tbody');if(!_0x499c76){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x499c76[_0x8c43cd(0x1d5)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>';try{const _0xb1f06e=Date['now']();if(!_0x126726&&playerCache['data']&&_0xb1f06e-playerCache['timestamp']<CACHE_DURATION){console[_0x8c43cd(0x1ce)]('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x6b55e3=collection(db,_0x8c43cd(0x1d0)),_0x506abd=await getDocs(_0x6b55e3),_0x1faced=[];_0x506abd['forEach'](_0x2f3c14=>{const _0x4b47c7=_0x8c43cd,_0x1407aa=_0x2f3c14['data']();_0x1faced['push']({..._0x1407aa,'id':_0x2f3c14['id'],'elo':_0x1407aa[_0x4b47c7(0x1a0)]||0x0,'position':_0x1407aa['position']||Number['MAX_SAFE_INTEGER']});});const _0x4d79cc=collection(db,'userProfiles'),_0x1dcd56=await getDocs(_0x4d79cc),_0x57bf33=new Map();_0x1dcd56['forEach'](_0x2b7076=>{const _0x37ee9c=_0x8c43cd,_0x40e1f5=_0x2b7076['data']();_0x40e1f5[_0x37ee9c(0x1a2)]&&_0x57bf33['set'](_0x40e1f5['username'][_0x37ee9c(0x1ad)](),_0x40e1f5);}),_0x1faced[_0x8c43cd(0x184)](_0xa7d6b0=>{const _0x3c0c85=_0x8c43cd,_0x23b3ba=_0xa7d6b0['username']?.['toLowerCase']();if(_0x23b3ba&&_0x57bf33[_0x3c0c85(0x18f)](_0x23b3ba)){const _0x96baae=_0x57bf33['get'](_0x23b3ba);_0x96baae['country']&&(_0xa7d6b0[_0x3c0c85(0x183)]=_0x96baae['country'][_0x3c0c85(0x1ad)]());}});const _0x159545=_0x1faced['map'](_0x3884cf=>_0x3884cf[_0x8c43cd(0x1a2)]),_0x8b2eb1=await fetchBatchMatchStats(_0x159545);_0x1faced['sort']((_0x4fd45f,_0x59f322)=>{const _0x5edb82=_0x8c43cd,_0x1a3385=_0x8b2eb1['get'](_0x4fd45f['username'])?.['totalMatches']||0x0,_0x5720a9=_0x8b2eb1[_0x5edb82(0x181)](_0x59f322['username'])?.['totalMatches']||0x0;if(_0x1a3385===0x0!==(_0x5720a9===0x0))return _0x1a3385===0x0?0x1:-0x1;return(_0x4fd45f['position']||0x3e7)-(_0x59f322['position']||0x3e7);}),_0x1faced['forEach']((_0x5b02cd,_0x4f9a84)=>{_0x5b02cd['position']=_0x4f9a84+0x1;}),playerCache['data']=_0x1faced,playerCache[_0x8c43cd(0x182)]=_0xb1f06e,updateLadderDisplay(_0x1faced,_0x8b2eb1);}catch(_0x38314f){console['error']('Error\x20loading\x20ladder:',_0x38314f),_0x499c76['innerHTML']=_0x8c43cd(0x18b)+_0x38314f['message']+_0x8c43cd(0x1d9);}}async function fetchBatchMatchStats(_0x59f77f){const _0x5c5510=a27_0x2a7a,_0x29826a=new Map();try{_0x59f77f['forEach'](_0x52c7de=>{_0x29826a['set'](_0x52c7de,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x2ef01b=collection(db,'approvedMatches'),_0x498052=await getDocs(_0x2ef01b);_0x498052[_0x5c5510(0x184)](_0x50489b=>{const _0x5d5a91=_0x5c5510,_0x13b9e1=_0x50489b['data'](),_0x3ba4b7=_0x13b9e1['winnerUsername'],_0x521dbf=_0x13b9e1['loserUsername'];if(_0x59f77f['includes'](_0x3ba4b7)){const _0x499261=_0x29826a[_0x5d5a91(0x181)](_0x3ba4b7);_0x499261['wins']++,_0x499261['totalMatches']++,_0x499261['totalKills']+=parseInt(_0x13b9e1['winnerScore'])||0x0,_0x499261['totalDeaths']+=parseInt(_0x13b9e1['loserScore'])||0x0;}if(_0x59f77f['includes'](_0x521dbf)){const _0x23522e=_0x29826a['get'](_0x521dbf);_0x23522e['losses']++,_0x23522e['totalMatches']++,_0x23522e[_0x5d5a91(0x1a5)]+=parseInt(_0x13b9e1[_0x5d5a91(0x17d)])||0x0,_0x23522e['totalDeaths']+=parseInt(_0x13b9e1['winnerScore'])||0x0;}}),_0x59f77f[_0x5c5510(0x184)](_0x1150f0=>{const _0x5a3e17=_0x5c5510,_0x4d58b1=_0x29826a[_0x5a3e17(0x181)](_0x1150f0);_0x4d58b1['kda']=_0x4d58b1['totalDeaths']>0x0?(_0x4d58b1['totalKills']/_0x4d58b1['totalDeaths'])['toFixed'](0x2):_0x4d58b1[_0x5a3e17(0x1a5)][_0x5a3e17(0x189)](0x2),_0x4d58b1['winRate']=_0x4d58b1[_0x5a3e17(0x1d7)]>0x0?(_0x4d58b1['wins']/_0x4d58b1['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x131abf){console['error'](_0x5c5510(0x1cb),_0x131abf);}return _0x29826a;}function createPlayerRow(_0x255c3c,_0x50b384){const _0x588dce=a27_0x2a7a,_0x23c760=parseFloat(_0x255c3c['elo'])||0x0;let _0x22e6f5=_0x588dce(0x1c8);if(_0x23c760>=0x7d0)_0x22e6f5='#50C878';else{if(_0x23c760>=0x708)_0x22e6f5=_0x588dce(0x18e);else{if(_0x23c760>=0x640)_0x22e6f5='#b9f1fc';else _0x23c760>=0x578&&(_0x22e6f5='#CD7F32');}}let _0x480ad8='';return _0x255c3c['country']&&(_0x480ad8=_0x588dce(0x1b4)+_0x255c3c['country']['toLowerCase']()+_0x588dce(0x1cf)+_0x255c3c['country']+_0x588dce(0x18d)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x255c3c['position']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x255c3c['username'])+_0x588dce(0x1dd)+_0x22e6f5+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x255c3c['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x480ad8+_0x588dce(0x19b)+_0x22e6f5+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x23c760+_0x588dce(0x19d)+_0x50b384['totalMatches']+_0x588dce(0x186)+_0x50b384[_0x588dce(0x1a6)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x50b384['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x50b384['kda']+_0x588dce(0x186)+_0x50b384['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0x1455a6){const _0x24199f=a27_0x2a7a;if(_0x1455a6>=0x7d0)return'Emerald';if(_0x1455a6>=0x708)return'Gold';if(_0x1455a6>=0x640)return'Silver';if(_0x1455a6>=0x578)return _0x24199f(0x19f);return'Unranked';}async function getPlayersLastEloChanges(_0xff25f){const _0x5392b1=a27_0x2a7a,_0x2b7b32=new Map();_0xff25f[_0x5392b1(0x184)](_0x5afb70=>{_0x2b7b32['set'](_0x5afb70,0x0);});try{const _0x3329c4=collection(db,_0x5392b1(0x1d0)),_0xfa97bc=await getDocs(_0x3329c4),_0x581a60=new Map(),_0xebeb73=new Map();_0xfa97bc['forEach'](_0x4f86b6=>{const _0x2390cf=_0x5392b1,_0xa9d155=_0x4f86b6[_0x2390cf(0x1de)]();_0xa9d155[_0x2390cf(0x1a2)]&&(_0x581a60[_0x2390cf(0x1b6)](_0x4f86b6['id'],_0xa9d155['username']),_0xebeb73['set'](_0xa9d155['username']['toLowerCase'](),_0x4f86b6['id']));});const _0x319601=collection(db,'eloHistory'),_0x382fad=query(_0x319601,orderBy(_0x5392b1(0x182),'desc'),limit(0x12c)),_0x50b872=await getDocs(_0x382fad);if(_0x50b872['empty'])return console['log']('ELO\x20history\x20collection\x20is\x20empty'),_0x2b7b32;if(_0x50b872['docs'][_0x5392b1(0x197)]>0x0){const _0x30ae23=_0x50b872[_0x5392b1(0x1cc)][0x0][_0x5392b1(0x1de)]();if(_0x30ae23['player']&&_0x581a60[_0x5392b1(0x18f)](_0x30ae23['player'])){}}const _0x3a10cd=new Map();let _0x195d04=0x0;_0x50b872['forEach'](_0x49f92c=>{const _0xf74126=_0x5392b1,_0x4bb90c=_0x49f92c['data']();let _0x1f71ec=null;if(_0x4bb90c[_0xf74126(0x1be)]&&_0x581a60['has'](_0x4bb90c['player']))_0x1f71ec=_0x581a60[_0xf74126(0x181)](_0x4bb90c['player']);else{if(_0x4bb90c['username']&&_0xebeb73['has'](_0x4bb90c[_0xf74126(0x1a2)]['toLowerCase']()))_0x1f71ec=_0x4bb90c['username'];else _0x4bb90c[_0xf74126(0x1d4)]&&_0xebeb73['has'](_0x4bb90c[_0xf74126(0x1d4)]['toLowerCase']())&&(_0x1f71ec=_0x4bb90c[_0xf74126(0x1d4)]);}_0x1f71ec&&_0xff25f['includes'](_0x1f71ec)&&(_0x195d04++,!_0x3a10cd['has'](_0x1f71ec)&&_0x3a10cd['set'](_0x1f71ec,[]),_0x3a10cd['get'](_0x1f71ec)['push']({..._0x4bb90c,'timestamp':_0x4bb90c[_0xf74126(0x182)]?.['seconds']||0x0}));}),_0x3a10cd['forEach']((_0x19ca80,_0x5945e3)=>{const _0x413c3a=_0x5392b1;if(_0x19ca80['length']>0x0){_0x19ca80[_0x413c3a(0x1ac)]((_0x3285e0,_0x554a21)=>_0x554a21[_0x413c3a(0x182)]-_0x3285e0[_0x413c3a(0x182)]);const _0x2ae7dc=_0x19ca80['find'](_0x1da450=>_0x1da450['change']!==undefined||_0x1da450['newElo']!==undefined&&_0x1da450['previousElo']!==undefined||_0x1da450[_0x413c3a(0x1aa)]!==undefined&&_0x1da450['oldEloRating']!==undefined);if(_0x2ae7dc){let _0x32d163;if(_0x2ae7dc['change']!==undefined)_0x32d163=parseInt(_0x2ae7dc[_0x413c3a(0x19a)]);else{if(_0x2ae7dc[_0x413c3a(0x1db)]!==undefined&&entry[_0x413c3a(0x1e5)]!==undefined)_0x32d163=parseInt(_0x2ae7dc[_0x413c3a(0x1db)])-parseInt(_0x2ae7dc['previousElo']);else _0x2ae7dc[_0x413c3a(0x1aa)]!==undefined&&entry[_0x413c3a(0x1dc)]!==undefined&&(_0x32d163=parseInt(_0x2ae7dc[_0x413c3a(0x1aa)])-parseInt(_0x2ae7dc['oldEloRating']));}!isNaN(_0x32d163)&&_0x32d163!==0x0&&_0x2b7b32['set'](_0x5945e3,_0x32d163);}}});}catch(_0x29bb36){console['error'](_0x5392b1(0x1e9),_0x29bb36);}return _0x2b7b32;}async function updateLadderDisplay(_0x4d1f95,_0x155eed=null){const _0x16cc67=a27_0x2a7a,_0xdaff58=document['querySelector']('#ladder\x20tbody');if(!_0xdaff58){console[_0x16cc67(0x1bc)](_0x16cc67(0x1a8));return;}const _0xf97357=document[_0x16cc67(0x17e)]('#ladder\x20thead\x20tr');_0xf97357&&(_0xf97357['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x3778ac=_0x4d1f95['map'](_0x1a0a9f=>_0x1a0a9f['username']);!_0x155eed&&(_0x155eed=await fetchBatchMatchStats(_0x3778ac));const _0x344b39=_0x4d1f95['map'](_0x30bafd=>{const _0x4f74ee=_0x155eed['get'](_0x30bafd['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRow(_0x30bafd,_0x4f74ee);})['join']('');_0xdaff58['innerHTML']=_0x344b39,getPlayersLastEloChanges(_0x3778ac)['then'](_0x5cc709=>{const _0x4ac7e1=new Map();_0xdaff58['querySelectorAll']('tr')['forEach']((_0x2880c4,_0x340204)=>{_0x340204<_0x3778ac['length']&&_0x4ac7e1['set'](_0x3778ac[_0x340204],_0x2880c4);}),_0x5cc709['forEach']((_0x409717,_0x185ea4)=>{const _0x35d93b=a27_0x2a7a,_0x520e19=_0x4ac7e1[_0x35d93b(0x181)](_0x185ea4);if(_0x520e19&&_0x409717!==0x0){const _0x787185=_0x520e19[_0x35d93b(0x17e)](_0x35d93b(0x1af));if(_0x787185){const _0x5221bb=_0x409717>0x0?'+'+_0x409717:''+_0x409717,_0x528df2=_0x787185['querySelector']('.trend-indicator');if(_0x528df2)_0x528df2['textContent']=_0x5221bb,_0x528df2[_0x35d93b(0x1c1)]['color']=_0x409717>0x0?'#4CAF50':'#F44336',_0x528df2['style']['fontWeight']='bold',_0x528df2['style']['fontSize']='0.85em',_0x528df2[_0x35d93b(0x1c1)]['display']='inline',_0x528df2['style']['visibility']=_0x35d93b(0x18a),_0x528df2[_0x35d93b(0x1c1)][_0x35d93b(0x196)]='1';else{}}}});})['catch'](_0x111450=>console[_0x16cc67(0x1bc)]('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x111450));}function initLadderToggles(){const _0x323fa9=a27_0x2a7a,_0x2dde04=document['getElementById']('d1-switch'),_0x53e61c=document['getElementById'](_0x323fa9(0x1a4)),_0xec618b=document[_0x323fa9(0x199)](_0x323fa9(0x1b2)),_0x418d1a=document['getElementById']('duos-switch'),_0x8be277=document['getElementById']('d1-ladder-container'),_0xb4b4e6=document[_0x323fa9(0x199)]('d2-ladder-container'),_0x53d7a6=document['getElementById']('d3-ladder-container'),_0x585dfa=document['getElementById'](_0x323fa9(0x1e1));function _0x4627a7(){const _0x5c4b78=_0x323fa9;if(_0x8be277)_0x8be277[_0x5c4b78(0x1c6)]['remove'](_0x5c4b78(0x1b5));if(_0xb4b4e6)_0xb4b4e6['classList']['remove']('active');if(_0x53d7a6)_0x53d7a6['classList'][_0x5c4b78(0x17a)](_0x5c4b78(0x1b5));if(_0x585dfa)_0x585dfa['style'][_0x5c4b78(0x1c4)]=_0x5c4b78(0x1d1);if(_0x8be277)_0x8be277[_0x5c4b78(0x1c1)]['display']='none';if(_0xb4b4e6)_0xb4b4e6['style']['display']=_0x5c4b78(0x1d1);if(_0x53d7a6)_0x53d7a6[_0x5c4b78(0x1c1)]['display']=_0x5c4b78(0x1d1);}_0x2dde04&&_0x2dde04['addEventListener']('click',()=>{const _0x4f09c6=_0x323fa9;console['log'](_0x4f09c6(0x198)),_0x4627a7();_0x8be277&&(_0x8be277['classList'][_0x4f09c6(0x1a3)](_0x4f09c6(0x1b5)),_0x8be277['style']['display']=_0x4f09c6(0x1bd));document['getElementById'](_0x4f09c6(0x1e6))[_0x4f09c6(0x1c1)]['display']='block',document['getElementById'](_0x4f09c6(0x195))['style'][_0x4f09c6(0x1c4)]=_0x4f09c6(0x1d1),document['getElementById']('elo-recommendation-text-d3')['style'][_0x4f09c6(0x1c4)]='none';if(_0x2dde04)_0x2dde04['classList'][_0x4f09c6(0x1a3)]('active');if(_0x53e61c)_0x53e61c['classList']['remove'](_0x4f09c6(0x1b5));if(_0xec618b)_0xec618b['classList'][_0x4f09c6(0x17a)]('active');displayLadder(),findBestOpponent('d1');}),_0x53e61c&&_0x53e61c['addEventListener']('click',()=>{const _0x4b9c02=_0x323fa9;console['log']('D2\x20toggle\x20clicked'),_0x4627a7();_0xb4b4e6&&(_0xb4b4e6['classList'][_0x4b9c02(0x1a3)]('active'),_0xb4b4e6['style'][_0x4b9c02(0x1c4)]=_0x4b9c02(0x1bd));document[_0x4b9c02(0x199)]('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x4b9c02(0x195))['style'][_0x4b9c02(0x1c4)]='block',document['getElementById']('elo-recommendation-text-d3')['style'][_0x4b9c02(0x1c4)]=_0x4b9c02(0x1d1);if(_0x53e61c)_0x53e61c['classList']['add'](_0x4b9c02(0x1b5));if(_0x2dde04)_0x2dde04['classList']['remove']('active');if(_0xec618b)_0xec618b['classList'][_0x4b9c02(0x17a)]('active');displayLadderD2(),findBestOpponent('d2');}),_0xec618b&&_0xec618b['addEventListener']('click',()=>{const _0x5aac7b=_0x323fa9;console['log']('D3\x20toggle\x20clicked'),_0x4627a7();_0x53d7a6&&(_0x53d7a6['classList'][_0x5aac7b(0x1a3)](_0x5aac7b(0x1b5)),_0x53d7a6['style'][_0x5aac7b(0x1c4)]='block');document['getElementById'](_0x5aac7b(0x1e6))['style']['display']='none',document['getElementById'](_0x5aac7b(0x195))['style'][_0x5aac7b(0x1c4)]=_0x5aac7b(0x1d1),document['getElementById']('elo-recommendation-text-d3')[_0x5aac7b(0x1c1)]['display']='block';if(_0xec618b)_0xec618b['classList']['add'](_0x5aac7b(0x1b5));if(_0x2dde04)_0x2dde04[_0x5aac7b(0x1c6)][_0x5aac7b(0x17a)]('active');if(_0x53e61c)_0x53e61c['classList']['remove']('active');displayLadderD3(),findBestOpponent('d3');}),_0x418d1a&&_0x418d1a['addEventListener']('click',()=>{const _0x150605=_0x323fa9;_0x4627a7();if(_0x585dfa)_0x585dfa['style'][_0x150605(0x1c4)]='block';displayLadderDuos(),findBestOpponent(_0x150605(0x1e0)),document['getElementById']('elo-recommendation-text-duos')&&(document['getElementById']('elo-recommendation-text-duos')['style']['display']=_0x150605(0x1bd)),document['getElementById'](_0x150605(0x1e6))['style']['display']=_0x150605(0x1d1),document['getElementById'](_0x150605(0x195))['style']['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';});}document['addEventListener']('DOMContentLoaded',()=>{initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='block';});export{displayLadder};async function findBestOpponent(_0xcdbdee='d1'){const _0x55bd2d=a27_0x2a7a,_0x63dd82=_0x55bd2d(0x1b8)+_0xcdbdee,_0x193d6f=document[_0x55bd2d(0x199)](_0x63dd82);if(!_0x193d6f){console[_0x55bd2d(0x1bc)]('Recommendation\x20element\x20for\x20'+_0xcdbdee+'\x20not\x20found');return;}const _0xe08f40=auth['currentUser'];if(!_0xe08f40){_0x193d6f['textContent']='';return;}try{const _0x1059b4=doc(db,'userProfiles',_0xe08f40['uid']),_0x210df5=await getDoc(_0x1059b4);if(!_0x210df5['exists']()){console['log']('No\x20user\x20profile\x20found'),_0x193d6f['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x3d1bb4=_0x210df5['data'](),_0x58e1dd=_0x3d1bb4['username'];if(!_0x58e1dd){_0x193d6f['textContent']=_0x55bd2d(0x1c0);return;}let _0x8977f8;switch(_0xcdbdee){case'd1':_0x8977f8='players';break;case'd2':_0x8977f8='playersD2';break;case'd3':_0x8977f8='playersD3';break;case'duos':_0x8977f8=_0x55bd2d(0x187);break;default:_0x8977f8=_0x55bd2d(0x1d0);}if(_0xcdbdee==='duos'){const _0x344833=collection(db,_0x8977f8),_0x390263=query(_0x344833,where('username','==',_0x58e1dd)),_0x34bc10=await getDocs(_0x390263);if(_0x34bc10[_0x55bd2d(0x185)]){_0x193d6f['textContent']=_0x55bd2d(0x1ae);return;}const _0x18e11f=_0x34bc10[_0x55bd2d(0x1cc)][0x0]['data'](),_0x4a4f4f=parseInt(_0x18e11f[_0x55bd2d(0x1a0)])||0x4b0;if(_0x18e11f['hasTeam']&&_0x18e11f['teammate']){_0x193d6f['innerHTML']='You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>'+_0x18e11f['teammate']+_0x55bd2d(0x1ba);return;}const _0x861cf9=await getDocs(_0x344833);let _0x3bd62=null,_0x291e0d=-0x1;_0x861cf9[_0x55bd2d(0x184)](_0x5cc454=>{const _0xa81c1a=_0x55bd2d,_0x42e5b5=_0x5cc454[_0xa81c1a(0x1de)]();if(_0x42e5b5['username']===_0x58e1dd)return;if(_0x42e5b5[_0xa81c1a(0x194)])return;const _0x22677c=parseInt(_0x42e5b5[_0xa81c1a(0x1a0)])||0x4b0,_0x50be99=Math['abs'](_0x22677c-_0x4a4f4f),_0x5dfea5=Math['max'](0x0,0xc8-_0x50be99);_0x5dfea5>_0x291e0d&&(_0x3bd62=_0x42e5b5,_0x291e0d=_0x5dfea5);});if(_0x3bd62){const _0x39f5a3=parseInt(_0x3bd62['eloRating'])||0x4b0;let _0x454822=_0x55bd2d(0x1c8);if(_0x39f5a3>=0x7d0)_0x454822=_0x55bd2d(0x1e2);else{if(_0x39f5a3>=0x708)_0x454822='#FFD700';else{if(_0x39f5a3>=0x640)_0x454822='#C0C0C0';else _0x39f5a3>=0x578&&(_0x454822=_0x55bd2d(0x190));}}_0x193d6f['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x454822+';\x22>'+_0x3bd62['username']+_0x55bd2d(0x1ca)+_0x39f5a3+')';}else _0x193d6f['textContent']='No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!';return;}const _0x160579=collection(db,_0x8977f8),_0x187e46=query(_0x160579,where('username','==',_0x58e1dd)),_0x4467dd=await getDocs(_0x187e46);if(_0x4467dd['empty']){_0x193d6f[_0x55bd2d(0x1a1)]='You\x27re\x20not\x20registered\x20on\x20the\x20'+_0xcdbdee['toUpperCase']()+'\x20ladder';return;}const _0x51e7a0=_0x4467dd[_0x55bd2d(0x1cc)][0x0]['data'](),_0x3a1361=parseInt(_0x51e7a0['eloRating'])||0x5dc,_0x5e3edd=await getDocs(_0x160579);let _0x2b348e=null,_0x46987c=-0x1;const _0xd8f10a=getPlayerRankName(_0x3a1361);_0x5e3edd[_0x55bd2d(0x184)](_0x3693b3=>{const _0x3d153c=_0x55bd2d,_0x447aba=_0x3693b3['data']();if(_0x447aba[_0x3d153c(0x1a2)]===_0x58e1dd)return;const _0x377744=parseInt(_0x447aba['eloRating'])||0x5dc,_0x574ca1=getPlayerRankName(_0x377744),_0x3a40a5=Math['abs'](_0x377744-_0x3a1361),_0x35e459=0x20,_0x47aa56=0x1/(0x1+Math['pow'](0xa,(_0x377744-_0x3a1361)/0x190)),_0x3a4528=Math['round'](_0x35e459*(0x1-_0x47aa56));if(_0x3a4528<=0x0)return;let _0x444771=0x0;const _0x515239=Math['max'](0x0,0x64-_0x3a40a5*0.5),_0x187aba=_0x3a4528>=0x3&&_0x3a4528<=0x8?0x32:_0x3a4528>0x0&&_0x3a4528<0xf?0x1e:0xa,_0x596f65=_0xd8f10a===_0x574ca1?0x28:0x0;_0x444771=_0x515239+_0x187aba+_0x596f65,_0x444771>_0x46987c&&(_0x2b348e=_0x447aba,_0x46987c=_0x444771);});if(_0x2b348e){const _0xbb5f2b=parseInt(_0x2b348e['eloRating'])||0x5dc;let _0x4bddb1='gray';if(_0xbb5f2b>=0x7d0)_0x4bddb1='#50C878';else{if(_0xbb5f2b>=0x708)_0x4bddb1='#FFD700';else{if(_0xbb5f2b>=0x640)_0x4bddb1=_0x55bd2d(0x1b3);else _0xbb5f2b>=0x578&&(_0x4bddb1=_0x55bd2d(0x190));}}_0x193d6f['innerHTML']='Based\x20on\x20your\x20ELO\x20('+_0x3a1361+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x4bddb1+';\x22>'+_0x2b348e[_0x55bd2d(0x1a2)]+_0x55bd2d(0x1d2);}else _0x193d6f['innerHTML']='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x3a1361+')';}catch(_0x11f301){console[_0x55bd2d(0x1bc)]('Error\x20finding\x20best\x20opponent:',_0x11f301),_0x193d6f['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x43834a=>{const _0x1ee8ff=a27_0x2a7a,_0x25a1e7=document[_0x1ee8ff(0x199)](_0x1ee8ff(0x1e4))&&document[_0x1ee8ff(0x199)]('d1-ladder-container')['style']['display']!==_0x1ee8ff(0x1d1),_0xf7f792=document['getElementById'](_0x1ee8ff(0x1df))&&document['getElementById'](_0x1ee8ff(0x1df))['style']['display']!=='none',_0x1bcb9f=document['getElementById']('d3-ladder-container')&&document['getElementById']('d3-ladder-container')[_0x1ee8ff(0x1c1)]['display']!==_0x1ee8ff(0x1d1),_0x1daea1=document[_0x1ee8ff(0x199)]('duos-ladder-container')&&document['getElementById']('duos-ladder-container')['style']['display']!=='none',_0x4adc01=_0x25a1e7?'d1':_0xf7f792?'d2':_0x1bcb9f?'d3':_0x1daea1?'duos':'d1';findBestOpponent(_0x4adc01);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x34c862=a27_0x2a7a,_0xc7417=document['getElementById'](_0x34c862(0x1cd)),_0x1030dc=document['querySelector']('label[for=\x22duos-switch\x22]');_0xc7417&&_0x1030dc&&(_0xc7417['addEventListener']('change',async _0x2aeba5=>{if(_0x2aeba5['target']['checked']){const _0x2f968a=auth?.['currentUser'],_0x353d5a=await checkIfUserIsAdmin(_0x2f968a);if(!_0x353d5a){_0x2aeba5['preventDefault']();const _0x559dfb=document['getElementById']('d1-switch');return _0x559dfb&&(_0x559dfb['checked']=!![],_0x559dfb['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth[_0x34c862(0x178)](async _0x3aa6f4=>{const _0x494045=_0x34c862,_0x5a20a1=await checkIfUserIsAdmin(_0x3aa6f4);!_0x5a20a1?(_0xc7417['disabled']=!![],_0x1030dc['style'][_0x494045(0x196)]='0.5',_0x1030dc['style']['cursor']=_0x494045(0x1e3),_0x1030dc['title']='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0xc7417[_0x494045(0x193)]=![],_0x1030dc['style'][_0x494045(0x196)]='1',_0x1030dc['style']['cursor']='pointer',_0x1030dc['title']='');}));});async function checkIfUserIsAdmin(_0x53033c){const _0x13d1fe=a27_0x2a7a;if(!_0x53033c)return![];try{const _0x31f82e=['admin@ladder.com',_0x13d1fe(0x1b7)];if(_0x53033c['email']&&_0x31f82e['includes'](_0x53033c['email'][_0x13d1fe(0x1ad)]()))return!![];const _0x160707=['userProfiles',_0x13d1fe(0x1d0),_0x13d1fe(0x1c9),'playersD3'],_0x822a31=[_0x13d1fe(0x1da),'owner',_0x13d1fe(0x1d8),'creative\x20lead'];for(const _0x45e0a4 of _0x160707){try{const _0x632922=doc(db,_0x45e0a4,_0x53033c['uid']),_0xa34e2d=await getDoc(_0x632922);if(_0xa34e2d[_0x13d1fe(0x1d3)]()){const _0x51e721=_0xa34e2d['data'](),_0x2ef4fa=(_0x51e721['roleName']||_0x51e721[_0x13d1fe(0x17c)]||'')[_0x13d1fe(0x1ad)]();if(_0x2ef4fa&&_0x822a31['includes'](_0x2ef4fa))return!![];}}catch(_0x4c7470){console['warn']('Error\x20checking\x20'+_0x45e0a4+':',_0x4c7470);}}return![];}catch(_0x5bc27f){return console['error']('Error\x20checking\x20admin\x20status:',_0x5bc27f),![];}}function showAdminOnlyMessage(){const _0x471e06=a27_0x2a7a,_0x596fc2=document['getElementById']('admin-only-message');_0x596fc2&&_0x596fc2['remove']();const _0x20b944=document['createElement']('div');_0x20b944['id']=_0x471e06(0x1b0),_0x20b944['style'][_0x471e06(0x17f)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20',_0x20b944['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>🔒\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x20b944),setTimeout(()=>{const _0x468896=_0x471e06;_0x20b944[_0x468896(0x1bf)]&&_0x20b944[_0x468896(0x17a)]();},0xbb8);}