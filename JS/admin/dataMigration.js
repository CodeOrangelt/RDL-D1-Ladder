function a0_0x53b9(){const _0x3006e7=['data','push','return\x20(function()\x20','size','commit','apply','name','players','trace','playersD3','warn','length','log','matchesD2','error','active','playersD2'];a0_0x53b9=function(){return _0x3006e7;};return a0_0x53b9();}function a0_0x1f9a(_0x11e039,_0x54a66b){const _0x3e80a4=a0_0x53b9();return a0_0x1f9a=function(_0x5a4c64,_0x44eabb){_0x5a4c64=_0x5a4c64-0x129;let _0x53b960=_0x3e80a4[_0x5a4c64];return _0x53b960;},a0_0x1f9a(_0x11e039,_0x54a66b);}const a0_0x5a4c64=(function(){let _0x50337b=!![];return function(_0x14ea0c,_0x294c0e){const _0xa24219=_0x50337b?function(){const _0x35f420=a0_0x1f9a;if(_0x294c0e){const _0xa475c9=_0x294c0e[_0x35f420(0x12e)](_0x14ea0c,arguments);return _0x294c0e=null,_0xa475c9;}}:function(){};return _0x50337b=![],_0xa24219;};}()),a0_0x3e80a4=a0_0x5a4c64(this,function(){const _0x3adbff=a0_0x1f9a,_0x882632=function(){const _0x2a1724=a0_0x1f9a;let _0xd10c5f;try{_0xd10c5f=Function(_0x2a1724(0x12b)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2a9a9d){_0xd10c5f=window;}return _0xd10c5f;},_0x435fc8=_0x882632(),_0x533cfe=_0x435fc8['console']=_0x435fc8['console']||{},_0x1995f0=[_0x3adbff(0x135),_0x3adbff(0x133),'info',_0x3adbff(0x137),'exception','table',_0x3adbff(0x131)];for(let _0x430d14=0x0;_0x430d14<_0x1995f0['length'];_0x430d14++){const _0x4fb5b7=a0_0x5a4c64['constructor']['prototype']['bind'](a0_0x5a4c64),_0x32eb81=_0x1995f0[_0x430d14],_0x255f75=_0x533cfe[_0x32eb81]||_0x4fb5b7;_0x4fb5b7['__proto__']=a0_0x5a4c64['bind'](a0_0x5a4c64),_0x4fb5b7['toString']=_0x255f75['toString']['bind'](_0x255f75),_0x533cfe[_0x32eb81]=_0x4fb5b7;}});a0_0x3e80a4();import{db}from'../firebase-config.js';import{collection,doc,getDoc,getDocs,writeBatch,setDoc}from'firebase/firestore';export async function migrateUserData(){const _0xd040c8=a0_0x1f9a,_0x4513b0=['players','playersD2',_0xd040c8(0x132),'nonParticipants','userProfiles'],_0x1d4a8b=[];let _0x31054a=writeBatch(db),_0x32c771=0x0;const _0x48dd10=collection(db,'userProfiles'),_0x1597a8=new Map(),_0x35bdb4=(_0x3b8b24,_0x18c048)=>{_0x32c771>=0x1f4&&(_0x1d4a8b['push'](_0x31054a),_0x31054a=writeBatch(db),_0x32c771=0x0);const _0x535a4c=doc(_0x48dd10,_0x3b8b24);_0x31054a['set'](_0x535a4c,_0x18c048),_0x32c771++;};for(const _0x50f509 of _0x4513b0){const _0x4fd267=collection(db,_0x50f509),_0x4c55a4=await getDocs(_0x4fd267);_0x4c55a4['docs']['forEach'](_0x41bd92=>{const _0x439189=_0xd040c8,_0x415dc7=_0x41bd92['id'],_0xd945c4=_0x41bd92['data']();!_0x1597a8['has'](_0x415dc7)&&_0x1597a8['set'](_0x415dc7,{'username':_0xd945c4['username']||_0xd945c4[_0x439189(0x12f)]||_0x415dc7,'email':_0xd945c4['email']||null,'discord':_0xd945c4['discord']||null,'createdAt':_0xd945c4['createdAt']||new Date()['toISOString'](),'divisions':[]});const _0x57de2b=_0x1597a8['get'](_0x415dc7);if(_0x50f509===_0x439189(0x130))_0x57de2b['divisions'][_0x439189(0x12a)]({'id':0x1,'elo':_0xd945c4['elo']||0x5dc,'isActive':_0xd945c4['active']!==![]});else{if(_0x50f509===_0x439189(0x139))_0x57de2b['divisions'][_0x439189(0x12a)]({'id':0x2,'elo':_0xd945c4['elo']||0x5dc,'isActive':_0xd945c4['active']!==![]});else _0x50f509===_0x439189(0x132)&&_0x57de2b['divisions']['push']({'id':0x3,'elo':_0xd945c4['elo']||0x5dc,'isActive':_0xd945c4[_0x439189(0x138)]!==![]});}});}for(const [_0x41ccb9,_0x63cfc7]of _0x1597a8['entries']()){_0x35bdb4(_0x41ccb9,_0x63cfc7);}_0x32c771>0x0&&_0x1d4a8b['push'](_0x31054a);const _0x3e318b=[];for(const _0x44fb12 of _0x1d4a8b){try{await _0x44fb12['commit'](),_0x3e318b['push']({'success':!![]});}catch(_0x2fd52e){_0x3e318b['push']({'success':![],'error':_0x2fd52e});}}return{'usersProcessed':_0x1597a8[_0xd040c8(0x12c)],'batchesExecuted':_0x3e318b[_0xd040c8(0x134)],'success':_0x3e318b['every'](_0x5dee8f=>_0x5dee8f['success'])};}export async function updateMatchReferences(){const _0xab95bb=a0_0x1f9a,_0x486b30=['matches',_0xab95bb(0x136),'matchesD3'];let _0x4d5a58=0x0;for(const _0x4f39d3 of _0x486b30){const _0x3b00c=collection(db,_0x4f39d3),_0x2c70d4=await getDocs(_0x3b00c),_0x331cfa=0x1f4;let _0xb791df=writeBatch(db),_0x7b037b=0x0;for(const _0x6ccbe of _0x2c70d4['docs']){const _0xf3a4c0=_0x6ccbe[_0xab95bb(0x129)](),_0x39efad=doc(db,_0x4f39d3,_0x6ccbe['id']);_0xb791df['update'](_0x39efad,{'isMigrated':!![],'lastModified':new Date()['toISOString']()}),_0x7b037b++,_0x4d5a58++,_0x7b037b>=_0x331cfa&&(await _0xb791df[_0xab95bb(0x12d)](),_0xb791df=writeBatch(db),_0x7b037b=0x0);}_0x7b037b>0x0&&await _0xb791df['commit']();}return{'updatedCount':_0x4d5a58};}