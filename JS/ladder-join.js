function a25_0x512d(_0x31d464,_0x122472){const _0x3583b8=a25_0x3262();return a25_0x512d=function(_0x2ccd8f,_0x1b4622){_0x2ccd8f=_0x2ccd8f-0x198;let _0x326211=_0x3583b8[_0x2ccd8f];return _0x326211;},a25_0x512d(_0x31d464,_0x122472);}const a25_0x2ccd8f=(function(){let _0x307480=!![];return function(_0x2da7f3,_0x32422e){const _0x3af9a1=_0x307480?function(){const _0x21a70f=a25_0x512d;if(_0x32422e){const _0x295811=_0x32422e[_0x21a70f(0x19a)](_0x2da7f3,arguments);return _0x32422e=null,_0x295811;}}:function(){};return _0x307480=![],_0x3af9a1;};}()),a25_0x3583b8=a25_0x2ccd8f(this,function(){const _0x208c91=a25_0x512d;let _0x3648d3;try{const _0x4f3e19=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3648d3=_0x4f3e19();}catch(_0x3f01d7){_0x3648d3=window;}const _0x2bd3c0=_0x3648d3['console']=_0x3648d3['console']||{},_0x3cc6ad=[_0x208c91(0x1a2),_0x208c91(0x1a7),_0x208c91(0x1ba),'error','exception',_0x208c91(0x1b3),_0x208c91(0x1a9)];for(let _0x16fac5=0x0;_0x16fac5<_0x3cc6ad[_0x208c91(0x1a6)];_0x16fac5++){const _0x74b8ee=a25_0x2ccd8f['constructor']['prototype']['bind'](a25_0x2ccd8f),_0xcb91bd=_0x3cc6ad[_0x16fac5],_0x2db797=_0x2bd3c0[_0xcb91bd]||_0x74b8ee;_0x74b8ee[_0x208c91(0x1c5)]=a25_0x2ccd8f['bind'](a25_0x2ccd8f),_0x74b8ee['toString']=_0x2db797['toString']['bind'](_0x2db797),_0x2bd3c0[_0xcb91bd]=_0x74b8ee;}});a25_0x3583b8();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x4fe39f=a25_0x512d,_0x3c4c79=document['getElementById'](_0x4fe39f(0x1c0)),_0x585188=document['getElementById']('d2-switch');console[_0x4fe39f(0x1a2)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x3c4c79),console[_0x4fe39f(0x1a2)]('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x585188);function _0x55aec4(){const _0x50c403=_0x4fe39f;document['querySelectorAll'](_0x50c403(0x1a3))['forEach'](_0xf34161=>{_0xf34161['addEventListener']('change',_0x232567=>{const _0x456d2e=a25_0x512d;_0x232567['target'][_0x456d2e(0x1c2)]&&(currentLadder=_0x232567[_0x456d2e(0x1a1)][_0x456d2e(0x1ae)],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x55aec4();const _0x275eca=document['getElementById'](_0x4fe39f(0x1b6));_0x275eca&&_0x275eca['addEventListener'](_0x4fe39f(0x1b5),handleJoinLadder),onAuthStateChanged(auth,_0x342735=>{const _0xf9c365=_0x4fe39f;if(_0x342735)checkUserLadderStatus();else{const _0x3b8994=document[_0xf9c365(0x1bf)]('ladder-join-prompt');_0x3b8994&&(_0x3b8994['style'][_0xf9c365(0x19d)]='none');}});});function getCollectionName(_0x5eca91){const _0x485c84=a25_0x512d;switch(_0x5eca91?.['toUpperCase']()){case'D1':return _0x485c84(0x1aa);case'D2':return'playersD2';case'D3':return _0x485c84(0x19b);case'DUOS':case'DUO':return'playersDuos';case _0x485c84(0x1b4):return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x5eca91+',\x20defaulting\x20to\x20D1');return _0x485c84(0x1aa);}}async function checkUserLadderStatus(){const _0x253e0a=a25_0x512d;console[_0x253e0a(0x1a2)]('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x207a66=auth['currentUser'],_0x45aab2=document['getElementById']('ladder-join-prompt'),_0xc84aea=document[_0x253e0a(0x1bf)]('join-ladder-type'),_0x3ce435=document[_0x253e0a(0x1bf)](_0x253e0a(0x1a5));if(!_0x207a66||!_0x207a66['uid']||!_0x45aab2||!_0xc84aea||!_0x3ce435){if(_0x45aab2)_0x45aab2[_0x253e0a(0x1c1)][_0x253e0a(0x19d)]='none';if(_0x3ce435)_0x3ce435['style']['display']=_0x253e0a(0x1a4);return;}try{try{await _0x207a66['getIdToken'](![]);}catch(_0x409329){console[_0x253e0a(0x1b0)]('Authentication\x20verification\x20failed:',_0x409329),_0x45aab2['style']['display']=_0x253e0a(0x1a4),_0x3ce435['style']['display']='none';return;}const _0x1f24cd=getCollectionName(currentLadder),_0x5d1ef3=doc(db,_0x1f24cd,_0x207a66['uid']),_0x2c8208=await getDoc(_0x5d1ef3);if(_0x2c8208['exists']())_0x45aab2[_0x253e0a(0x1c1)]['display']=_0x253e0a(0x1a4),_0x3ce435['style'][_0x253e0a(0x19d)]='none';else{_0x45aab2[_0x253e0a(0x1c1)]['display']='none',_0x3ce435['style'][_0x253e0a(0x19d)]=_0x253e0a(0x1b2),_0xc84aea[_0x253e0a(0x1ab)]=currentLadder,_0x3ce435['onclick']=()=>{const _0x1327fe=_0x253e0a;_0x45aab2['style'][_0x1327fe(0x19d)]===_0x1327fe(0x1b2)?_0x45aab2['style']['display']='none':_0x45aab2[_0x1327fe(0x1c1)]['display']='block';};const _0x3c75b6=document['getElementById'](_0x253e0a(0x199)),_0x4649d3=document['getElementById']('ladder-join-status');if(_0x3c75b6)_0x3c75b6['value']='';_0x4649d3&&(_0x4649d3['textContent']='',_0x4649d3['className']=_0x253e0a(0x1a0));}}catch(_0x702dc7){console['error']('Error\x20checking\x20ladder\x20status:',_0x702dc7),_0x45aab2[_0x253e0a(0x1c1)]['display']='none',_0x3ce435['style']['display']='none';}}function a25_0x3262(){const _0x52ee95=['className','join-username-input','apply','playersD3','trim','display','getIdToken','uid','ladder-join-status','target','log','input[name=\x22ladder\x22]','none','tiny-join-button','length','warn','message','trace','players','textContent','ladder-join-status\x20loading','Authentication\x20error:','value','docs','error','\x20ladder!\x20The\x20page\x20will\x20refresh...','block','table','CTF','click','join-ladder-button','\x20ladder.','playersCTF','data','info','split','exists','ladder-join-status\x20error','disabled','getElementById','d1-switch','style','checked','location','username','__proto__'];a25_0x3262=function(){return _0x52ee95;};return a25_0x3262();}async function handleJoinLadder(){const _0x32ba8c=a25_0x512d,_0x4b2357=auth['currentUser'],_0x2cecd6=document[_0x32ba8c(0x1bf)]('join-ladder-button'),_0x4213cc=document['getElementById']('ladder-join-status'),_0x3c712c=document['getElementById'](_0x32ba8c(0x199));if(!_0x4b2357||!_0x4b2357['uid']){_0x4213cc['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x4213cc['className']='ladder-join-status\x20error';return;}try{await _0x4b2357[_0x32ba8c(0x19e)](!![]);}catch(_0x24e934){console[_0x32ba8c(0x1b0)](_0x32ba8c(0x1ad),_0x24e934),_0x4213cc[_0x32ba8c(0x1ab)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x4213cc['className']='ladder-join-status\x20error';return;}if(!_0x3c712c||!_0x3c712c['value'][_0x32ba8c(0x19c)]()){_0x4213cc[_0x32ba8c(0x1ab)]='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x4213cc['className']='ladder-join-status\x20error';return;}try{_0x2cecd6['disabled']=!![],_0x4213cc['textContent']='Verifying\x20username...',_0x4213cc[_0x32ba8c(0x198)]=_0x32ba8c(0x1ac);let _0x42f968='',_0x301559=null;const _0x42a148=['players','playersD2','playersD3','playersDuos',_0x32ba8c(0x1b8),'nonParticipants'];for(const _0x151fb0 of _0x42a148){try{const _0x33737a=doc(db,_0x151fb0,_0x4b2357[_0x32ba8c(0x19f)]),_0xb0a84b=await getDoc(_0x33737a);if(_0xb0a84b[_0x32ba8c(0x1bc)]()){_0x301559=_0xb0a84b[_0x32ba8c(0x1b9)]();if(_0x301559['username']){_0x42f968=_0x301559[_0x32ba8c(0x1c4)];break;}}}catch(_0x387b83){console['error']('Error\x20checking\x20'+_0x151fb0+':',_0x387b83);}}!_0x42f968&&_0x4b2357['email']&&(_0x42f968=_0x4b2357['email'][_0x32ba8c(0x1bb)]('@')[0x0]);if(!_0x42f968){_0x4213cc[_0x32ba8c(0x1ab)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x4213cc[_0x32ba8c(0x198)]='ladder-join-status\x20error',_0x2cecd6['disabled']=![];return;}const _0xcf5351=_0x3c712c[_0x32ba8c(0x1ae)][_0x32ba8c(0x19c)]();if(_0x42f968&&_0xcf5351['toLowerCase']()!==_0x42f968['toLowerCase']()){_0x4213cc[_0x32ba8c(0x1ab)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x42f968+'\x22\x20to\x20confirm.',_0x4213cc['className']='ladder-join-status\x20error',_0x2cecd6['disabled']=![];return;}_0x4213cc[_0x32ba8c(0x1ab)]='Joining\x20'+currentLadder+'\x20ladder...';const _0x18c6fd=getCollectionName(currentLadder),_0x2db8aa=doc(db,_0x18c6fd,_0x4b2357['uid']),_0x4dfc73=await getDoc(_0x2db8aa);if(_0x4dfc73['exists']()){_0x4213cc['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+_0x32ba8c(0x1b7),_0x4213cc['className']='ladder-join-status\x20error',_0x2cecd6['disabled']=![];return;}try{await _0x4b2357['getIdToken'](!![]);}catch(_0x5c8318){_0x4213cc['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x4213cc['className']=_0x32ba8c(0x1bd),_0x2cecd6[_0x32ba8c(0x1be)]=![];return;}const _0x38aeac=_0x42f968,_0x5a11f=collection(db,_0x18c6fd),_0xedadd6=query(_0x5a11f,orderBy('position','desc'),limit(0x1)),_0x32d47c=await getDocs(_0xedadd6);let _0x5b6741=0x1;if(!_0x32d47c['empty']){const _0x48d867=_0x32d47c[_0x32ba8c(0x1af)][0x0]['data']();_0x5b6741=(_0x48d867['position']||0x0)+0x1;}const _0x5c3538={'username':_0x38aeac,'email':_0x4b2357['email'],'eloRating':0x4b0,'position':_0x5b6741,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x2db8aa,_0x5c3538),currentLadder==='DUOS'?_0x4213cc['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x4213cc[_0x32ba8c(0x1ab)]='Successfully\x20joined\x20the\x20'+currentLadder+_0x32ba8c(0x1b1),_0x4213cc['className']='ladder-join-status\x20success',setTimeout(()=>{const _0x29df53=_0x32ba8c;window[_0x29df53(0x1c3)]['reload']();},0x7d0);}catch(_0x3842d4){console['error']('Error\x20joining\x20ladder:',_0x3842d4),_0x4213cc[_0x32ba8c(0x1ab)]='Error\x20joining\x20ladder:\x20'+_0x3842d4[_0x32ba8c(0x1a8)],_0x4213cc['className']='ladder-join-status\x20error',_0x2cecd6[_0x32ba8c(0x1be)]=![];}}