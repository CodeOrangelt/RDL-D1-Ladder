function a10_0xfa0c(){const _0x294bb3=['addEventListener','999','50%','table','-8px','all','trace','setItem','#ff3b30','currentUsername','error','winnerEmail','toString','empty','now','users','2px\x20solid\x20white','getElementById','getItem','email','__proto__','{}.constructor(\x22return\x20this\x22)(\x20)','userId','playersD2','winnerId','bind','uid','disconnect','display','username','style','Error\x20checking\x20pending\x20matches:'];a10_0xfa0c=function(){return _0x294bb3;};return a10_0xfa0c();}const a10_0x51b322=a10_0x457e,a10_0x3ed7f5=(function(){let _0x4c62ea=!![];return function(_0x4bf349,_0x512547){const _0x283f9e=_0x4c62ea?function(){if(_0x512547){const _0xd6269b=_0x512547['apply'](_0x4bf349,arguments);return _0x512547=null,_0xd6269b;}}:function(){};return _0x4c62ea=![],_0x283f9e;};}()),a10_0x448f63=a10_0x3ed7f5(this,function(){const _0x5b3c7a=a10_0x457e,_0x7f819d=function(){const _0x30d868=a10_0x457e;let _0x3bacf3;try{_0x3bacf3=Function('return\x20(function()\x20'+_0x30d868(0x1be)+');')();}catch(_0x5a86ea){_0x3bacf3=window;}return _0x3bacf3;},_0x31692d=_0x7f819d(),_0x391bac=_0x31692d['console']=_0x31692d['console']||{},_0x38fb15=['log','warn','info',_0x5b3c7a(0x1b3),'exception',_0x5b3c7a(0x1ac),_0x5b3c7a(0x1af)];for(let _0xceb95c=0x0;_0xceb95c<_0x38fb15['length'];_0xceb95c++){const _0x302baf=a10_0x3ed7f5['constructor']['prototype']['bind'](a10_0x3ed7f5),_0x34413d=_0x38fb15[_0xceb95c],_0x615da0=_0x391bac[_0x34413d]||_0x302baf;_0x302baf[_0x5b3c7a(0x1bd)]=a10_0x3ed7f5[_0x5b3c7a(0x1c2)](a10_0x3ed7f5),_0x302baf['toString']=_0x615da0[_0x5b3c7a(0x1b5)][_0x5b3c7a(0x1c2)](_0x615da0),_0x391bac[_0x34413d]=_0x302baf;}});a10_0x448f63();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';function a10_0x457e(_0x3e47c7,_0x3c3a51){const _0x448f63=a10_0xfa0c();return a10_0x457e=function(_0x3ed7f5,_0x3d28df){_0x3ed7f5=_0x3ed7f5-0x1a9;let _0xfa0ce0=_0x448f63[_0x3ed7f5];return _0xfa0ce0;},a10_0x457e(_0x3e47c7,_0x3c3a51);}let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY='pendingMatchesCache',CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x181374=![]){const _0x44700a=a10_0x457e,_0x17ab63=Date['now'](),_0x1b72c4=checkNotificationCache();if(_0x1b72c4!==null&&!_0x181374){updateNotificationDot(_0x1b72c4);if(_0x17ab63-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x17ab63;const _0x4cc0af=auth['currentUser'];if(!_0x4cc0af){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x2aa813,_0x381d24,_0x2b4d30]=await Promise[_0x44700a(0x1ae)]([checkForPendingMatchesInCollection(_0x4cc0af,'pendingMatches'),checkForPendingMatchesInCollection(_0x4cc0af,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x4cc0af,'pendingMatchesD3')]),_0x51261e=_0x2aa813||_0x381d24||_0x2b4d30;updateNotificationDot(_0x51261e),updateNotificationCache(_0x51261e);}catch(_0x33b7c6){console['error'](_0x44700a(0x1c8),_0x33b7c6);}}async function checkForPendingMatchesInCollection(_0x57358d,_0x48c43c){const _0x554ee2=a10_0x457e,_0x2b2635=_0x57358d['uid'],_0x29b540=_0x57358d[_0x554ee2(0x1bc)],_0x1be3a1=query(collection(db,_0x48c43c),where(_0x554ee2(0x1c1),'==',_0x2b2635),where('approved','==',![])),_0x36ef43=await getDocs(_0x1be3a1);if(!_0x36ef43['empty'])return!![];if(_0x29b540){const _0x2b0197=query(collection(db,_0x48c43c),where(_0x554ee2(0x1b4),'==',_0x29b540),where('approved','==',![])),_0x5f54ed=await getDocs(_0x2b0197);if(!_0x5f54ed['empty'])return!![];}let _0x4df7ba=await getUsernameFromAllSources(_0x57358d);if(_0x4df7ba){const _0x4c1d06=query(collection(db,_0x48c43c),where('winnerUsername','==',_0x4df7ba),where('approved','==',![])),_0x55f185=await getDocs(_0x4c1d06);if(!_0x55f185['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x58ec65){const _0x4942b1=a10_0x457e,_0x556375=localStorage[_0x4942b1(0x1bb)](_0x4942b1(0x1b2));if(_0x556375)return _0x556375;try{const [_0x40e8c2,_0x15a440,_0x277392]=await Promise[_0x4942b1(0x1ae)]([getDocs(query(collection(db,'players'),where(_0x4942b1(0x1bf),'==',_0x58ec65[_0x4942b1(0x1c3)]))),getDocs(query(collection(db,_0x4942b1(0x1c0)),where('userId','==',_0x58ec65[_0x4942b1(0x1c3)]))),getDocs(query(collection(db,'playersD3'),where(_0x4942b1(0x1bf),'==',_0x58ec65['uid'])))]);if(!_0x40e8c2[_0x4942b1(0x1b6)]){const _0x512f2a=_0x40e8c2['docs'][0x0]['data']()['username'];return localStorage[_0x4942b1(0x1b0)]('currentUsername',_0x512f2a),_0x512f2a;}if(!_0x15a440['empty']){const _0x3c4cc8=_0x15a440['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x3c4cc8),_0x3c4cc8;}if(!_0x277392[_0x4942b1(0x1b6)]){const _0x4143bc=_0x277392['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x4143bc),_0x4143bc;}const _0x4454aa=await getDoc(doc(db,_0x4942b1(0x1b8),_0x58ec65['uid']));if(_0x4454aa['exists']()&&_0x4454aa['data']()['username']){const _0x3533a9=_0x4454aa['data']()[_0x4942b1(0x1c6)];return localStorage[_0x4942b1(0x1b0)]('currentUsername',_0x3533a9),_0x3533a9;}}catch(_0x45dc1c){console['error']('Error\x20fetching\x20username:',_0x45dc1c);}if(_0x58ec65['email'])return _0x58ec65['email']['split']('@')[0x0];return null;}function updateNotificationCache(_0x2b0d8c){const _0x3e170d=a10_0x457e,_0x1d75f1={'status':_0x2b0d8c,'timestamp':Date[_0x3e170d(0x1b7)]()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x1d75f1));}function checkNotificationCache(){const _0x82ebca=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x82ebca)return null;try{const {status:_0x58e2f1,timestamp:_0x43b3e6}=JSON['parse'](_0x82ebca),_0xd44e2b=Date['now']();if(_0xd44e2b-_0x43b3e6<CACHE_EXPIRY)return _0x58e2f1;}catch(_0x331149){}return null;}export function updateNotificationDot(_0x2777d7){const _0x183f8e=a10_0x457e,_0x35334a=new MutationObserver((_0x2573d4,_0x526aaa)=>{const _0x161048=a10_0x457e,_0x249b86=document[_0x161048(0x1ba)]('report-match-notification');_0x249b86&&(updateDotStyle(_0x249b86,_0x2777d7),_0x526aaa['disconnect']());});_0x35334a['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x3024dd=document[_0x183f8e(0x1ba)]('report-match-notification');_0x3024dd&&(updateDotStyle(_0x3024dd,_0x2777d7),_0x35334a[_0x183f8e(0x1c4)]()),setTimeout(()=>_0x35334a['disconnect'](),0x1388);}function updateDotStyle(_0x3ca69c,_0x2ca368){const _0x2be350=a10_0x457e;_0x2ca368?(_0x3ca69c['style'][_0x2be350(0x1c5)]='block',_0x3ca69c['style']['backgroundColor']=_0x2be350(0x1b1),_0x3ca69c['style']['width']='10px',_0x3ca69c[_0x2be350(0x1c7)]['height']='10px',_0x3ca69c[_0x2be350(0x1c7)]['position']='absolute',_0x3ca69c['style']['top']='-5px',_0x3ca69c['style']['right']=_0x2be350(0x1ad),_0x3ca69c['style']['borderRadius']=_0x2be350(0x1ab),_0x3ca69c['style']['border']=_0x2be350(0x1b9),_0x3ca69c['style']['zIndex']=_0x2be350(0x1aa)):_0x3ca69c['style']['display']='none';}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x51b322(0x1a9)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{localStorage['removeItem']('currentUsername'),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});