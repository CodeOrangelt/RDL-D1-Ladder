(function(_0x18c1f4,_0x4343c9){const _0x30f1a2=a1_0x2ed1,_0x3c4bad=_0x18c1f4();while(!![]){try{const _0x275200=-parseInt(_0x30f1a2(0x164))/0x1+parseInt(_0x30f1a2(0x183))/0x2*(parseInt(_0x30f1a2(0x18c))/0x3)+-parseInt(_0x30f1a2(0x172))/0x4+parseInt(_0x30f1a2(0x19b))/0x5*(-parseInt(_0x30f1a2(0x18f))/0x6)+parseInt(_0x30f1a2(0x17b))/0x7*(-parseInt(_0x30f1a2(0x187))/0x8)+-parseInt(_0x30f1a2(0x162))/0x9*(-parseInt(_0x30f1a2(0x192))/0xa)+parseInt(_0x30f1a2(0x19a))/0xb*(parseInt(_0x30f1a2(0x194))/0xc);if(_0x275200===_0x4343c9)break;else _0x3c4bad['push'](_0x3c4bad['shift']());}catch(_0xd04924){_0x3c4bad['push'](_0x3c4bad['shift']());}}}(a1_0x1f1d,0xac454));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';function a1_0x2ed1(_0x3ef0a9,_0x8446ac){const _0x25cfd2=a1_0x1f1d();return a1_0x2ed1=function(_0x27319c,_0x4bedd9){_0x27319c=_0x27319c-0x154;let _0x4bad58=_0x25cfd2[_0x27319c];return _0x4bad58;},a1_0x2ed1(_0x3ef0a9,_0x8446ac);}import{getFirestore,collection,getDocs,writeBatch,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{firebaseConfig}from'../firebase-config.js';const app=initializeApp(firebaseConfig),db=getFirestore(app);async function migrateToAggregatedMembers(){const _0x4a4cd9=a1_0x2ed1,_0x529819=(function(){let _0x25b318=!![];return function(_0x37d912,_0x3d34d1){const _0x181f09=_0x25b318?function(){if(_0x3d34d1){const _0x1c2928=_0x3d34d1['apply'](_0x37d912,arguments);return _0x3d34d1=null,_0x1c2928;}}:function(){};return _0x25b318=![],_0x181f09;};}()),_0x521268=_0x529819(this,function(){const _0x3f3909=a1_0x2ed1;return _0x521268[_0x3f3909(0x188)]()[_0x3f3909(0x19d)](_0x3f3909(0x159))[_0x3f3909(0x188)]()[_0x3f3909(0x15a)](_0x521268)[_0x3f3909(0x19d)]('(((.+)+)+)+$');});_0x521268();const _0x2aa502=(function(){let _0x218957=!![];return function(_0x3b730e,_0x23ce5d){const _0x1bdd04=_0x218957?function(){if(_0x23ce5d){const _0x4e60b5=_0x23ce5d['apply'](_0x3b730e,arguments);return _0x23ce5d=null,_0x4e60b5;}}:function(){};return _0x218957=![],_0x1bdd04;};}()),_0x425026=_0x2aa502(this,function(){const _0x310037=a1_0x2ed1;let _0x10f3e0;try{const _0x114c8b=Function(_0x310037(0x186)+_0x310037(0x17f)+');');_0x10f3e0=_0x114c8b();}catch(_0x42fd03){_0x10f3e0=window;}const _0x613bbc=_0x10f3e0[_0x310037(0x174)]=_0x10f3e0['console']||{},_0x3555c8=[_0x310037(0x17d),_0x310037(0x165),_0x310037(0x15e),_0x310037(0x16e),'exception',_0x310037(0x168),'trace'];for(let _0x36e31b=0x0;_0x36e31b<_0x3555c8['length'];_0x36e31b++){const _0x31e3df=_0x2aa502[_0x310037(0x15a)][_0x310037(0x173)][_0x310037(0x197)](_0x2aa502),_0x92d5c=_0x3555c8[_0x36e31b],_0x3f053b=_0x613bbc[_0x92d5c]||_0x31e3df;_0x31e3df[_0x310037(0x17e)]=_0x2aa502[_0x310037(0x197)](_0x2aa502),_0x31e3df[_0x310037(0x188)]=_0x3f053b[_0x310037(0x188)][_0x310037(0x197)](_0x3f053b),_0x613bbc[_0x92d5c]=_0x31e3df;}});_0x425026(),console['log'](_0x4a4cd9(0x184));try{console[_0x4a4cd9(0x17d)]('üì•\x20Fetching\x20all\x20collections...');const [_0x1b9973,_0xcbeee8,_0x1554aa,_0x3aa4e2,_0x514e07]=await Promise[_0x4a4cd9(0x160)]([getDocs(collection(db,'userProfiles')),getDocs(collection(db,'players')),getDocs(collection(db,_0x4a4cd9(0x185))),getDocs(collection(db,_0x4a4cd9(0x178))),getDocs(collection(db,_0x4a4cd9(0x16b)))]);console[_0x4a4cd9(0x17d)]('‚úÖ\x20Data\x20fetched:\x20'+_0x1b9973[_0x4a4cd9(0x177)]+_0x4a4cd9(0x166)+_0xcbeee8[_0x4a4cd9(0x177)]+'\x20D1,\x20'+_0x1554aa[_0x4a4cd9(0x177)]+_0x4a4cd9(0x18d)+_0x3aa4e2['size']+_0x4a4cd9(0x19c)+_0x514e07[_0x4a4cd9(0x177)]+'\x20non-participants');const _0x213655=new Map();_0x1b9973['forEach'](_0x4e83c9=>{const _0x38f8ad=_0x4a4cd9;_0x213655[_0x38f8ad(0x196)](_0x4e83c9['id'],_0x4e83c9[_0x38f8ad(0x157)]());});const _0x5a2832=new Map(),_0xe2b008=(_0x4243fe,_0x524615)=>{_0x4243fe['forEach'](_0x190add=>{const _0x178e1d=a1_0x2ed1,_0x533296=_0x190add['data'](),_0x31957d=_0x190add['id'];!_0x5a2832['has'](_0x31957d)&&_0x5a2832['set'](_0x31957d,{'userId':_0x31957d,'username':_0x533296[_0x178e1d(0x193)]||_0x533296['name']||_0x178e1d(0x18a),'ladders':[],'isNonParticipant':![]});const _0x44c05f=_0x5a2832['get'](_0x31957d);_0x44c05f[_0x178e1d(0x195)][_0x178e1d(0x161)]({'ladder':_0x524615,'elo':_0x533296[_0x178e1d(0x15c)]||_0x533296[_0x178e1d(0x191)]||0x4b0,'active':_0x533296['active']!==![]});});};_0xe2b008(_0xcbeee8,'D1'),_0xe2b008(_0x1554aa,'D2'),_0xe2b008(_0x3aa4e2,'D3'),_0x514e07[_0x4a4cd9(0x17c)](_0x57319f=>{const _0xe51337=_0x4a4cd9,_0x3740b2=_0x57319f[_0xe51337(0x157)](),_0x20dbee=_0x57319f['id'];!_0x5a2832[_0xe51337(0x190)](_0x20dbee)&&(_0x3740b2['username']||_0x3740b2['name'])&&_0x5a2832[_0xe51337(0x196)](_0x20dbee,{'userId':_0x20dbee,'username':_0x3740b2[_0xe51337(0x193)]||_0x3740b2['name'],'ladders':[],'isNonParticipant':!![]});}),console[_0x4a4cd9(0x17d)](_0x4a4cd9(0x176)+_0x5a2832[_0x4a4cd9(0x177)]+_0x4a4cd9(0x163)),console[_0x4a4cd9(0x17d)](_0x4a4cd9(0x18b));const _0x4eeae7=[];let _0x20f1ca=writeBatch(db),_0x3567e3=0x0,_0xdc9955=0x0;_0x5a2832[_0x4a4cd9(0x17c)]((_0xd96384,_0x5081d7)=>{const _0x3ca86f=_0x4a4cd9,_0x34629b=_0x213655[_0x3ca86f(0x156)](_0x5081d7)||{};let _0x21c6b2=0x0,_0xca671d=null;if(_0xd96384['ladders']['length']>0x0){const _0x262368=_0xd96384['ladders'][_0x3ca86f(0x15b)]((_0x12fbd6,_0x34eeaa)=>_0x34eeaa[_0x3ca86f(0x191)]-_0x12fbd6['elo']);_0x21c6b2=_0x262368[0x0]['elo'],_0xca671d=_0x262368[0x0][_0x3ca86f(0x181)];}const _0x27ede3={'userId':_0x5081d7,'username':_0xd96384[_0x3ca86f(0x193)],'profileImageUrl':_0x34629b[_0x3ca86f(0x198)]||null,'country':_0x34629b[_0x3ca86f(0x16d)]||null,'motto':_0x34629b[_0x3ca86f(0x199)]||null,'favoriteMap':_0x34629b['favoriteMap']||null,'favoriteWeapon':_0x34629b[_0x3ca86f(0x154)]||null,'isNonParticipant':_0xd96384[_0x3ca86f(0x155)],'ladders':_0xd96384[_0x3ca86f(0x195)],'primaryLadder':_0xca671d,'highestElo':_0x21c6b2,'rank':getPlayerRank(_0x21c6b2),'lastUpdated':new Date(),'migrationTimestamp':new Date()[_0x3ca86f(0x180)]()},_0x1a83af=doc(collection(db,_0x3ca86f(0x171)),_0x5081d7);_0x20f1ca['set'](_0x1a83af,_0x27ede3),_0x3567e3++,_0xdc9955++,_0x3567e3>=0x1c2&&(_0x4eeae7[_0x3ca86f(0x161)](_0x20f1ca[_0x3ca86f(0x15f)]()),_0x20f1ca=writeBatch(db),_0x3567e3=0x0,console[_0x3ca86f(0x17d)](_0x3ca86f(0x170)+_0x4eeae7['length']+'\x20('+_0xdc9955+_0x3ca86f(0x179)));}),_0x3567e3>0x0&&_0x4eeae7[_0x4a4cd9(0x161)](_0x20f1ca['commit']()),console['log']('üöÄ\x20Executing\x20'+_0x4eeae7['length']+_0x4a4cd9(0x16f)),await Promise[_0x4a4cd9(0x160)](_0x4eeae7),console['log'](_0x4a4cd9(0x15d)+_0x5a2832[_0x4a4cd9(0x177)]+_0x4a4cd9(0x182)),console['log'](_0x4a4cd9(0x18e));}catch(_0x285c5e){console[_0x4a4cd9(0x16e)]('‚ùå\x20Migration\x20failed:',_0x285c5e),_0x285c5e[_0x4a4cd9(0x175)]===_0x4a4cd9(0x16c)&&console[_0x4a4cd9(0x16e)](_0x4a4cd9(0x16a));}}function getPlayerRank(_0xb503b3){const _0x15ac22=a1_0x2ed1;if(_0xb503b3>=0x7d0)return _0x15ac22(0x158);if(_0xb503b3>=0x708)return _0x15ac22(0x17a);if(_0xb503b3>=0x640)return _0x15ac22(0x189);if(_0xb503b3>=0x578)return _0x15ac22(0x167);return _0x15ac22(0x169);}migrateToAggregatedMembers();function a1_0x1f1d(){const _0x506891=['Unknown','üíæ\x20Writing\x20aggregated\x20data...','262023YQTLqI','\x20D2,\x20','üí°\x20Refresh\x20your\x20members\x20page\x20to\x20see\x20the\x20results!','918uhLGDi','has','elo','97550zSoKRb','username','120fdAFie','ladders','set','bind','profileImageUrl','motto','1300519YWXeuK','17720gPReTK','\x20D3,\x20','search','favoriteWeapon','isNonParticipant','get','data','emerald','(((.+)+)+)+$','constructor','sort','eloRating','üéâ\x20Successfully\x20migrated\x20','info','commit','all','push','981foGaXX','\x20unique\x20members','140821OOfaGj','warn','\x20profiles,\x20','bronze','table','unranked','üîí\x20Permission\x20denied.\x20Make\x20sure\x20you\x27re\x20signed\x20in\x20as\x20an\x20admin\x20and\x20security\x20rules\x20allow\x20access\x20to\x20aggregatedMembers\x20collection.','nonParticipants','permission-denied','country','error','\x20batches...','üì¶\x20Prepared\x20batch\x20','aggregatedMembers','797244hpkvgj','prototype','console','code','‚öôÔ∏è\x20Processed\x20','size','playersD3','\x20members\x20processed)','gold','1409751XrJEwd','forEach','log','__proto__','{}.constructor(\x22return\x20this\x22)(\x20)','toISOString','ladder','\x20members\x20to\x20aggregated\x20collection!','8lshxAI','üîÑ\x20Starting\x20migration\x20to\x20aggregated\x20members...','playersD2','return\x20(function()\x20','40tJTbdW','toString','silver'];a1_0x1f1d=function(){return _0x506891;};return a1_0x1f1d();}