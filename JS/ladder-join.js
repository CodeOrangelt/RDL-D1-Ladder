const a25_0x2fc308=a25_0x3f14,a25_0x120292=(function(){let _0x2bceba=!![];return function(_0x3dd488,_0x14b2dd){const _0x4c310c=_0x2bceba?function(){const _0x5740c9=a25_0x3f14;if(_0x14b2dd){const _0x4c5f52=_0x14b2dd[_0x5740c9(0x12c)](_0x3dd488,arguments);return _0x14b2dd=null,_0x4c5f52;}}:function(){};return _0x2bceba=![],_0x4c310c;};}()),a25_0x3e56bc=a25_0x120292(this,function(){const _0x3d7aaa=a25_0x3f14;let _0x2eddb6;try{const _0x195aa5=Function(_0x3d7aaa(0x136)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2eddb6=_0x195aa5();}catch(_0x4edb5a){_0x2eddb6=window;}const _0x5088cc=_0x2eddb6[_0x3d7aaa(0x109)]=_0x2eddb6['console']||{},_0xc14bd1=[_0x3d7aaa(0x12a),'warn',_0x3d7aaa(0x108),'error','exception',_0x3d7aaa(0x135),'trace'];for(let _0xec6c9f=0x0;_0xec6c9f<_0xc14bd1['length'];_0xec6c9f++){const _0x56816a=a25_0x120292['constructor']['prototype']['bind'](a25_0x120292),_0x5e7897=_0xc14bd1[_0xec6c9f],_0x3e7f71=_0x5088cc[_0x5e7897]||_0x56816a;_0x56816a[_0x3d7aaa(0x117)]=a25_0x120292[_0x3d7aaa(0x11f)](a25_0x120292),_0x56816a['toString']=_0x3e7f71['toString']['bind'](_0x3e7f71),_0x5088cc[_0x5e7897]=_0x56816a;}});a25_0x3e56bc();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';function a25_0x3f14(_0x234f8d,_0x4d1379){const _0x3e56bc=a25_0x1526();return a25_0x3f14=function(_0x120292,_0xc6d351){_0x120292=_0x120292-0x108;let _0x1526ab=_0x3e56bc[_0x120292];return _0x1526ab;},a25_0x3f14(_0x234f8d,_0x4d1379);}let currentLadder='D1';document['addEventListener'](a25_0x2fc308(0x134),()=>{const _0x527b76=a25_0x2fc308,_0xd23d0=document[_0x527b76(0x12f)](_0x527b76(0x114)),_0x529884=document[_0x527b76(0x12f)]('d2-switch');console[_0x527b76(0x12a)]('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0xd23d0),console[_0x527b76(0x12a)]('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x529884);function _0x3c2bc5(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0x6ab983=>{_0x6ab983['addEventListener']('change',_0x59e429=>{const _0x364a1e=a25_0x3f14;_0x59e429['target']['checked']&&(currentLadder=_0x59e429['target']['value'],console[_0x364a1e(0x12a)]('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x3c2bc5();const _0x54cb8a=document[_0x527b76(0x12f)]('join-ladder-button');_0x54cb8a&&_0x54cb8a['addEventListener'](_0x527b76(0x111),handleJoinLadder),onAuthStateChanged(auth,_0x20d777=>{if(_0x20d777)checkUserLadderStatus();else{const _0x53dd55=document['getElementById']('ladder-join-prompt');_0x53dd55&&(_0x53dd55['style']['display']='none');}});});function a25_0x1526(){const _0x38e6b7=['info','console','uid','playersCTF','exists','Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.','Unknown\x20ladder\x20type:\x20','position','username','click','style','desc','d1-switch','Authentication\x20verification\x20failed:','Error\x20checking\x20','__proto__','players','Joining\x20','playersD3','\x20ladder!\x20The\x20page\x20will\x20refresh...','display','playersD2','split','bind','Please\x20enter\x20your\x20username\x20to\x20confirm.','ladder-join-status','\x20ladder.','trim','join-ladder-type','email','Checking\x20user\x20status\x20for\x20ladder:','join-username-input','none','textContent','log','onclick','apply','disabled','className','getElementById','tiny-join-button','error','nonParticipants','ladder-join-status\x20error','DOMContentLoaded','table','return\x20(function()\x20'];a25_0x1526=function(){return _0x38e6b7;};return a25_0x1526();}function getCollectionName(_0x33ba0e){const _0x10a31=a25_0x2fc308;switch(_0x33ba0e?.['toUpperCase']()){case'D1':return'players';case'D2':return _0x10a31(0x11d);case'D3':return'playersD3';case'DUOS':case'DUO':return'playersDuos';case'CTF':return _0x10a31(0x10b);default:console['warn'](_0x10a31(0x10e)+_0x33ba0e+',\x20defaulting\x20to\x20D1');return'players';}}async function checkUserLadderStatus(){const _0x1769af=a25_0x2fc308;console[_0x1769af(0x12a)](_0x1769af(0x126),currentLadder);const _0x52b435=auth['currentUser'],_0x159de8=document['getElementById']('ladder-join-prompt'),_0x5eab10=document['getElementById'](_0x1769af(0x124)),_0x459fb8=document[_0x1769af(0x12f)](_0x1769af(0x130));if(!_0x52b435||!_0x52b435['uid']||!_0x159de8||!_0x5eab10||!_0x459fb8){if(_0x159de8)_0x159de8['style'][_0x1769af(0x11c)]='none';if(_0x459fb8)_0x459fb8['style']['display']=_0x1769af(0x128);return;}try{try{await _0x52b435['getIdToken'](![]);}catch(_0x865325){console['error'](_0x1769af(0x115),_0x865325),_0x159de8['style']['display']=_0x1769af(0x128),_0x459fb8[_0x1769af(0x112)][_0x1769af(0x11c)]='none';return;}const _0x19b8a4=getCollectionName(currentLadder),_0x4adf24=doc(db,_0x19b8a4,_0x52b435['uid']),_0x3ce87f=await getDoc(_0x4adf24);if(_0x3ce87f[_0x1769af(0x10c)]())_0x159de8['style']['display']='none',_0x459fb8[_0x1769af(0x112)]['display']='none';else{_0x159de8['style']['display']=_0x1769af(0x128),_0x459fb8['style']['display']='block',_0x5eab10[_0x1769af(0x129)]=currentLadder,_0x459fb8[_0x1769af(0x12b)]=()=>{const _0x88d8a2=_0x1769af;_0x159de8['style']['display']==='block'?_0x159de8['style']['display']=_0x88d8a2(0x128):_0x159de8['style']['display']='block';};const _0x11ac5e=document['getElementById']('join-username-input'),_0x4d2e12=document[_0x1769af(0x12f)](_0x1769af(0x121));if(_0x11ac5e)_0x11ac5e['value']='';_0x4d2e12&&(_0x4d2e12[_0x1769af(0x129)]='',_0x4d2e12[_0x1769af(0x12e)]='ladder-join-status');}}catch(_0x3be6db){console[_0x1769af(0x131)]('Error\x20checking\x20ladder\x20status:',_0x3be6db),_0x159de8[_0x1769af(0x112)]['display']='none',_0x459fb8['style']['display']='none';}}async function handleJoinLadder(){const _0x3f9d3b=a25_0x2fc308,_0x4cdccc=auth['currentUser'],_0x3ee95c=document['getElementById']('join-ladder-button'),_0x39f4b3=document['getElementById']('ladder-join-status'),_0x352ac1=document['getElementById'](_0x3f9d3b(0x127));if(!_0x4cdccc||!_0x4cdccc['uid']){_0x39f4b3['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x39f4b3['className']='ladder-join-status\x20error';return;}try{await _0x4cdccc['getIdToken'](!![]);}catch(_0x4c54cf){console['error']('Authentication\x20error:',_0x4c54cf),_0x39f4b3['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x39f4b3[_0x3f9d3b(0x12e)]='ladder-join-status\x20error';return;}if(!_0x352ac1||!_0x352ac1['value'][_0x3f9d3b(0x123)]()){_0x39f4b3['textContent']=_0x3f9d3b(0x120),_0x39f4b3['className']='ladder-join-status\x20error';return;}try{_0x3ee95c[_0x3f9d3b(0x12d)]=!![],_0x39f4b3['textContent']='Verifying\x20username...',_0x39f4b3[_0x3f9d3b(0x12e)]='ladder-join-status\x20loading';let _0x389cf5='',_0x6cc8c8=null;const _0x3b028d=[_0x3f9d3b(0x118),'playersD2',_0x3f9d3b(0x11a),'playersDuos','playersCTF',_0x3f9d3b(0x132)];for(const _0x1dab39 of _0x3b028d){try{const _0x32b169=doc(db,_0x1dab39,_0x4cdccc['uid']),_0x3ccdbd=await getDoc(_0x32b169);if(_0x3ccdbd[_0x3f9d3b(0x10c)]()){_0x6cc8c8=_0x3ccdbd['data']();if(_0x6cc8c8[_0x3f9d3b(0x110)]){_0x389cf5=_0x6cc8c8[_0x3f9d3b(0x110)];break;}}}catch(_0x410d02){console['error'](_0x3f9d3b(0x116)+_0x1dab39+':',_0x410d02);}}!_0x389cf5&&_0x4cdccc[_0x3f9d3b(0x125)]&&(_0x389cf5=_0x4cdccc['email'][_0x3f9d3b(0x11e)]('@')[0x0]);if(!_0x389cf5){_0x39f4b3[_0x3f9d3b(0x129)]=_0x3f9d3b(0x10d),_0x39f4b3['className']='ladder-join-status\x20error',_0x3ee95c[_0x3f9d3b(0x12d)]=![];return;}const _0x2b572b=_0x352ac1['value']['trim']();if(_0x389cf5&&_0x2b572b['toLowerCase']()!==_0x389cf5['toLowerCase']()){_0x39f4b3['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x389cf5+'\x22\x20to\x20confirm.',_0x39f4b3[_0x3f9d3b(0x12e)]='ladder-join-status\x20error',_0x3ee95c[_0x3f9d3b(0x12d)]=![];return;}_0x39f4b3[_0x3f9d3b(0x129)]=_0x3f9d3b(0x119)+currentLadder+'\x20ladder...';const _0x1336c3=getCollectionName(currentLadder),_0x53d935=doc(db,_0x1336c3,_0x4cdccc[_0x3f9d3b(0x10a)]),_0x4a73c3=await getDoc(_0x53d935);if(_0x4a73c3[_0x3f9d3b(0x10c)]()){_0x39f4b3[_0x3f9d3b(0x129)]='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+_0x3f9d3b(0x122),_0x39f4b3['className']=_0x3f9d3b(0x133),_0x3ee95c['disabled']=![];return;}try{await _0x4cdccc['getIdToken'](!![]);}catch(_0x4293dc){_0x39f4b3['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x39f4b3[_0x3f9d3b(0x12e)]='ladder-join-status\x20error',_0x3ee95c[_0x3f9d3b(0x12d)]=![];return;}const _0x4ef030=_0x389cf5,_0x15e620=collection(db,_0x1336c3),_0x5b330c=query(_0x15e620,orderBy('position',_0x3f9d3b(0x113)),limit(0x1)),_0x5c64c8=await getDocs(_0x5b330c);let _0x55f29d=0x1;if(!_0x5c64c8['empty']){const _0x1399ad=_0x5c64c8['docs'][0x0]['data']();_0x55f29d=(_0x1399ad[_0x3f9d3b(0x10f)]||0x0)+0x1;}const _0x2e0b2f={'username':_0x4ef030,'email':_0x4cdccc['email'],'eloRating':0x4b0,'position':_0x55f29d,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x53d935,_0x2e0b2f),currentLadder==='DUOS'?_0x39f4b3['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x39f4b3['textContent']='Successfully\x20joined\x20the\x20'+currentLadder+_0x3f9d3b(0x11b),_0x39f4b3['className']='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x522251){console['error']('Error\x20joining\x20ladder:',_0x522251),_0x39f4b3['textContent']='Error\x20joining\x20ladder:\x20'+_0x522251['message'],_0x39f4b3['className']=_0x3f9d3b(0x133),_0x3ee95c['disabled']=![];}}