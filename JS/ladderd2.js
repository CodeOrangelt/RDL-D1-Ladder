const a30_0xe3d13c=a30_0x1164,a30_0x53e179=(function(){let _0x43a6ac=!![];return function(_0xde4ac7,_0x3bc77b){const _0xa310f9=_0x43a6ac?function(){if(_0x3bc77b){const _0x44135b=_0x3bc77b['apply'](_0xde4ac7,arguments);return _0x3bc77b=null,_0x44135b;}}:function(){};return _0x43a6ac=![],_0xa310f9;};}()),a30_0x5676d3=a30_0x53e179(this,function(){const _0x3de59d=a30_0x1164,_0x2aba70=function(){const _0xfd8ddd=a30_0x1164;let _0x1fff77;try{_0x1fff77=Function(_0xfd8ddd(0x13f)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x23283d){_0x1fff77=window;}return _0x1fff77;},_0x3db82f=_0x2aba70(),_0x409a94=_0x3db82f[_0x3de59d(0x147)]=_0x3db82f['console']||{},_0x16ca75=[_0x3de59d(0x13b),_0x3de59d(0x150),_0x3de59d(0x132),_0x3de59d(0x14d),_0x3de59d(0x168),'table','trace'];for(let _0x51542d=0x0;_0x51542d<_0x16ca75[_0x3de59d(0x173)];_0x51542d++){const _0x2f9ed2=a30_0x53e179['constructor'][_0x3de59d(0x13e)]['bind'](a30_0x53e179),_0x2dc01c=_0x16ca75[_0x51542d],_0x549277=_0x409a94[_0x2dc01c]||_0x2f9ed2;_0x2f9ed2[_0x3de59d(0x154)]=a30_0x53e179['bind'](a30_0x53e179),_0x2f9ed2[_0x3de59d(0x158)]=_0x549277[_0x3de59d(0x158)]['bind'](_0x549277),_0x409a94[_0x2dc01c]=_0x2f9ed2;}});function a30_0x5e3d(){const _0x571e24=['Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list','info','position','change','winnerScore','catch','gray','innerHTML','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','playersD2','log','getDocuments','totalDeaths','prototype','return\x20(function()\x20','push','newElo','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','firstPlaceDate','elo','equipped','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>','console','map','set','function','tokenImage','<img\x20src=\x22','error','#4CAF50','approvedMatchesD2','warn','forEach','%</td>\x0a\x20\x20\x20\x20</tr>','toFixed','__proto__','has','message','previousElo','toString','#50C878','seconds','totalKills','playerUsername','number','losses','visibility','refreshLadderDisplayD2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20fetching\x20batch\x20D2\x20match\x20stats:','toLowerCase','get','opacity','userProfiles','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','exception','totalMatches','tokenName','MAX_SAFE_INTEGER','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','player','style','data','timestamp','find','querySelector','length','username','country','fontWeight'];a30_0x5e3d=function(){return _0x571e24;};return a30_0x5e3d();}a30_0x5676d3();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a30_0x388e19 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x353ef1=![]){const _0x1268b0=a30_0x1164,_0x4c1ddd=document['querySelector']('#ladder-d2\x20tbody');if(!_0x4c1ddd){console['error']('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x4c1ddd['innerHTML']=_0x1268b0(0x146);try{const _0x33ed9c=Date['now']();if(!_0x353ef1&&playerCacheD2['data']&&_0x33ed9c-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x2db25b=collection(db,'playersD2'),_0x290f4f=await a30_0x388e19[_0x1268b0(0x13c)](_0x2db25b),_0x1f9e3e=[];_0x290f4f['forEach'](_0x40db04=>{const _0x3f3f7f=_0x1268b0,_0x2ac8fb=_0x40db04[_0x3f3f7f(0x16f)]();_0x2ac8fb['username']&&_0x1f9e3e[_0x3f3f7f(0x140)]({..._0x2ac8fb,'id':_0x40db04['id'],'elo':_0x2ac8fb['eloRating']||0x0,'position':_0x2ac8fb['position']||Number[_0x3f3f7f(0x16b)]});});const _0x512ce2=collection(db,_0x1268b0(0x166)),_0x1a1d79=await getDocs(_0x512ce2),_0xe4c76d=new Map();_0x1a1d79[_0x1268b0(0x151)](_0x610ee7=>{const _0x1eefb4=_0x610ee7['data']();_0x1eefb4['username']&&_0xe4c76d['set'](_0x1eefb4['username']['toLowerCase'](),_0x1eefb4);});for(const _0x2384c3 of _0x1f9e3e){const _0x3e76e9=_0x2384c3['username']['toLowerCase']();if(_0xe4c76d[_0x1268b0(0x155)](_0x3e76e9)){const _0x5c8545=_0xe4c76d['get'](_0x3e76e9);_0x5c8545['country']&&(_0x2384c3['country']=_0x5c8545[_0x1268b0(0x175)]['toLowerCase']());}}const _0x81beb=_0x1f9e3e[_0x1268b0(0x148)](_0x4944ec=>_0x4944ec['username']),_0x5cb1b9=await fetchBatchMatchStatsD2(_0x81beb);_0x1f9e3e['sort']((_0x2d2dc0,_0x503f04)=>{const _0x5053d8=_0x1268b0,_0x51dc82=_0x5cb1b9['get'](_0x2d2dc0[_0x5053d8(0x174)])?.[_0x5053d8(0x169)]||0x0,_0x4f6795=_0x5cb1b9['get'](_0x503f04[_0x5053d8(0x174)])?.['totalMatches']||0x0;if(_0x51dc82===0x0!==(_0x4f6795===0x0))return _0x51dc82===0x0?0x1:-0x1;return(_0x2d2dc0['position']||0x3e7)-(_0x503f04['position']||0x3e7);}),_0x1f9e3e['forEach']((_0x5dd3f2,_0x174b27)=>{_0x5dd3f2['position']=_0x174b27+0x1;}),playerCacheD2['data']=_0x1f9e3e,playerCacheD2['timestamp']=_0x33ed9c,updateLadderDisplayD2(_0x1f9e3e);}catch(_0x1fd149){console['error']('Error\x20loading\x20D2\x20ladder:',_0x1fd149),_0x4c1ddd[_0x1268b0(0x138)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x1fd149[_0x1268b0(0x156)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x2a83c7){if(_0x2a83c7['length']===0x0)return 0x1;let _0x6fcb6a=0x0;return _0x2a83c7['forEach'](_0x48f1a2=>{const _0x183eeb=a30_0x1164;_0x48f1a2['position']&&typeof _0x48f1a2['position']===_0x183eeb(0x15d)&&_0x48f1a2['position']>_0x6fcb6a&&(_0x6fcb6a=_0x48f1a2[_0x183eeb(0x133)]);}),_0x6fcb6a+0x1;}async function updatePlayerPositions(_0x458d9c,_0x4e0a5d){const _0x30090e=a30_0x1164;try{const _0x26cb12=collection(db,_0x30090e(0x13a)),_0x3967f6=await getDocs(_0x26cb12),_0x17ddb2=[];_0x3967f6['forEach'](_0x3f596e=>{const _0x17be16=_0x30090e;_0x17ddb2[_0x17be16(0x140)]({'id':_0x3f596e['id'],..._0x3f596e[_0x17be16(0x16f)]()});});const _0x277c9a=_0x17ddb2['find'](_0x45e181=>_0x45e181['username']===_0x458d9c),_0x3166e1=_0x17ddb2[_0x30090e(0x171)](_0xb1c8fd=>_0xb1c8fd['username']===_0x4e0a5d);if(!_0x277c9a||!_0x3166e1){console['error'](_0x30090e(0x131));return;}if(_0x277c9a[_0x30090e(0x133)]>_0x3166e1['position']){const _0x16d2b6=_0x3166e1['position'];for(const _0x3c0825 of _0x17ddb2){_0x3c0825['position']>=_0x3166e1['position']&&_0x3c0825['position']<_0x277c9a['position']&&_0x3c0825['username']!==_0x458d9c&&await updateDoc(doc(db,'playersD2',_0x3c0825['id']),{'position':_0x3c0825['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x277c9a['id']),{'position':_0x16d2b6});if(_0x16d2b6===0x1){const _0xa7364f=doc(db,_0x30090e(0x13a),_0x277c9a['id']),_0x30576d=await getDoc(_0xa7364f);!_0x30576d['data']()[_0x30090e(0x143)]&&await updateDoc(_0xa7364f,{'firstPlaceDate':Timestamp['now']()});}if(_0x3166e1['position']===0x1){const _0x30ca7f=doc(db,_0x30090e(0x13a),_0x3166e1['id']);await updateDoc(_0x30ca7f,{'firstPlaceDate':null});}playerCacheD2['timestamp']=0x0;}}catch(_0x4af340){console['error']('Error\x20updating\x20D2\x20player\x20positions:',_0x4af340);}}function getPlayerRankNameD2(_0x300ea9){if(_0x300ea9>=0x834)return'Emerald';if(_0x300ea9>=0x708)return'Gold';if(_0x300ea9>=0x640)return'Silver';if(_0x300ea9>=0x578)return'Bronze';return'Unranked';}window[a30_0xe3d13c(0x160)]=function(_0x1740b7=!![]){const _0xf2188d=a30_0xe3d13c;typeof displayLadderD2===_0xf2188d(0x14a)?displayLadderD2(_0x1740b7):console[_0xf2188d(0x150)]('displayLadderD2\x20function\x20not\x20available');};async function updateLadderDisplayD2(_0x11b7e9){const _0x3854f5=a30_0xe3d13c;_0x11b7e9['sort']((_0x529d09,_0x4c61d6)=>_0x529d09['position']-_0x4c61d6['position']);const _0x3c853e=document[_0x3854f5(0x172)]('#ladder-d2\x20tbody');if(!_0x3c853e)return;_0x3c853e[_0x3854f5(0x138)]='';const _0x480323=_0x11b7e9['map'](_0xee7a57=>_0xee7a57['username']),_0x194c4a=await fetchBatchMatchStatsD2(_0x480323);let _0x1dff6d=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x1dff6d=await getTokensByUsernames(_0x480323);}catch(_0x32666c){console[_0x3854f5(0x14d)]('D2:\x20Error\x20fetching\x20tokens:',_0x32666c);}const _0x450f66=document['querySelector']('#ladder-d2\x20thead\x20tr');_0x450f66&&(_0x450f66[_0x3854f5(0x138)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x5a3390=_0x11b7e9[_0x3854f5(0x148)](_0x174ff3=>{const _0x45034c=_0x3854f5,_0x55fa09=_0x194c4a['get'](_0x174ff3['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x53eb47=_0x1dff6d[_0x45034c(0x164)](_0x174ff3['username'])||[],_0x139672=getPrimaryDisplayToken(_0x53eb47);return createPlayerRowWithTokenD2(_0x174ff3,_0x55fa09,_0x139672);})['join']('');_0x3c853e['innerHTML']=_0x5a3390,getPlayersLastEloChangesD2(_0x480323)['then'](_0x33690e=>{const _0x5a4bc4=_0x3854f5,_0x507c03=new Map();_0x3c853e['querySelectorAll']('tr')['forEach']((_0x539c4e,_0x57ba5c)=>{_0x57ba5c<_0x480323['length']&&_0x507c03['set'](_0x480323[_0x57ba5c],_0x539c4e);}),_0x33690e[_0x5a4bc4(0x151)]((_0xda2a58,_0x54817f)=>{const _0x54e073=_0x5a4bc4,_0x1c2ffb=_0x507c03['get'](_0x54817f);if(_0x1c2ffb&&_0xda2a58!==0x0){const _0x4b7ebc=_0x1c2ffb[_0x54e073(0x172)]('td:nth-child(3)');if(_0x4b7ebc){const _0x1b6c28=_0xda2a58>0x0?'+'+_0xda2a58:''+_0xda2a58,_0x4b2ece=_0x4b7ebc['querySelector']('.trend-indicator');_0x4b2ece&&(_0x4b2ece['textContent']=_0x1b6c28,_0x4b2ece[_0x54e073(0x16e)]['color']=_0xda2a58>0x0?_0x54e073(0x14e):'#F44336',_0x4b2ece[_0x54e073(0x16e)][_0x54e073(0x176)]='bold',_0x4b2ece['style']['fontSize']='0.85em',_0x4b2ece['style']['display']='inline',_0x4b2ece[_0x54e073(0x16e)][_0x54e073(0x15f)]='visible',_0x4b2ece['style'][_0x54e073(0x165)]='1');}}});})[_0x3854f5(0x136)](_0x359b0c=>console['error']('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0x359b0c));}function createPlayerRowWithTokenD2(_0x4c5078,_0x225ac0,_0x54545f){const _0x46feb9=a30_0xe3d13c,_0x33aee8=parseFloat(_0x4c5078[_0x46feb9(0x144)])||0x0;let _0x1a7087=_0x46feb9(0x137);if(_0x33aee8>=0x7d0)_0x1a7087=_0x46feb9(0x159);else{if(_0x33aee8>=0x708)_0x1a7087='#FFD700';else{if(_0x33aee8>=0x640)_0x1a7087='#b9f1fc';else _0x33aee8>=0x578&&(_0x1a7087='#CD7F32');}}let _0x55bc73='';_0x4c5078['country']&&(_0x55bc73='<img\x20src=\x22../images/flags/'+_0x4c5078['country'][_0x46feb9(0x163)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4c5078['country']+_0x46feb9(0x16c));let _0x3b0a38='';return _0x54545f&&(_0x3b0a38=_0x46feb9(0x14c)+_0x54545f[_0x46feb9(0x14b)]+_0x46feb9(0x142)+_0x54545f['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x54545f[_0x46feb9(0x16a)]+'\x20'+(_0x54545f[_0x46feb9(0x145)]?'(Equipped)':'')+_0x46feb9(0x167)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4c5078[_0x46feb9(0x133)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x4c5078['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x1a7087+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4c5078['username']+_0x46feb9(0x161)+_0x55bc73+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3b0a38+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x1a7087+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x33aee8+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x225ac0['totalMatches']+_0x46feb9(0x139)+_0x225ac0['wins']+_0x46feb9(0x139)+_0x225ac0['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x225ac0['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x225ac0['winRate']+_0x46feb9(0x152);}async function getPlayersLastEloChangesD2(_0x243ba3){const _0x1efbf0=a30_0xe3d13c,_0x7dc80=new Map();_0x243ba3['forEach'](_0x13b408=>_0x7dc80['set'](_0x13b408,0x0));try{const _0x184b9d=collection(db,'eloHistoryD2'),_0x2fc378=query(_0x184b9d,orderBy(_0x1efbf0(0x170),'desc'),limit(0x64)),_0x3d8916=await getDocs(_0x2fc378),_0x30a5dd=new Map(),_0x2292db=await getDocs(collection(db,'playersD2'));_0x2292db['forEach'](_0x53f972=>{const _0xaf95f=_0x1efbf0,_0x369940=_0x53f972[_0xaf95f(0x16f)]();_0x369940['username']&&_0x30a5dd['set'](_0x53f972['id'],_0x369940['username']);});const _0x16f9df=new Map();_0x3d8916['forEach'](_0x551d23=>{const _0x293d45=_0x1efbf0,_0x24323c=_0x551d23['data']();let _0x727a27=_0x24323c['username']||_0x24323c[_0x293d45(0x15c)];!_0x727a27&&_0x24323c['player']&&_0x30a5dd['has'](_0x24323c[_0x293d45(0x16d)])&&(_0x727a27=_0x30a5dd[_0x293d45(0x164)](_0x24323c['player'])),_0x727a27&&_0x243ba3['includes'](_0x727a27)&&(!_0x16f9df['has'](_0x727a27)&&_0x16f9df['set'](_0x727a27,[]),_0x16f9df['get'](_0x727a27)['push']({..._0x24323c,'timestamp':_0x24323c['timestamp']?.[_0x293d45(0x15a)]||0x0,'username':_0x727a27}));}),_0x16f9df['forEach']((_0x1f3785,_0x2679ed)=>{const _0x57b431=_0x1efbf0;if(_0x1f3785['length']>0x0){_0x1f3785['sort']((_0x392994,_0xd0adca)=>_0xd0adca[_0x57b431(0x170)]-_0x392994['timestamp']);const _0xcd27d=_0x1f3785[_0x57b431(0x171)](_0x4b69d8=>_0x4b69d8['change']!==undefined||_0x4b69d8['newElo']!==undefined&&_0x4b69d8[_0x57b431(0x157)]!==undefined);if(_0xcd27d){let _0x52ff30;if(_0xcd27d[_0x57b431(0x134)]!==undefined)_0x52ff30=_0xcd27d['change'];else _0xcd27d['newElo']!==undefined&&_0xcd27d[_0x57b431(0x157)]!==undefined&&(_0x52ff30=_0xcd27d[_0x57b431(0x141)]-_0xcd27d[_0x57b431(0x157)]);_0x52ff30!==undefined&&_0x7dc80['set'](_0x2679ed,_0x52ff30);}}});if(_0x16f9df['size']===0x0){const _0xbe4e66=collection(db,'eloHistory'),_0x19e2fa=query(_0xbe4e66,where('gameMode','==','D2'),orderBy('timestamp','desc'),limit(0x32));try{const _0x4f38a7=await getDocs(_0x19e2fa);_0x4f38a7['forEach'](_0x7b7081=>{const _0x19144c=_0x1efbf0,_0x544e45=_0x7b7081[_0x19144c(0x16f)](),_0x5cb6ae=_0x544e45['username']||_0x544e45['playerUsername'];if(_0x5cb6ae&&_0x243ba3['includes'](_0x5cb6ae)){const _0x224346=_0x544e45[_0x19144c(0x134)]||(_0x544e45['newElo']!==undefined&&_0x544e45['previousElo']!==undefined?_0x544e45['newElo']-_0x544e45['previousElo']:0x0);_0x224346!==0x0&&_0x7dc80[_0x19144c(0x149)](_0x5cb6ae,_0x224346);}});}catch(_0x27aa26){}}}catch(_0x15cdf0){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x15cdf0);}return _0x7dc80;}function a30_0x1164(_0x474285,_0x14cab8){const _0x5676d3=a30_0x5e3d();return a30_0x1164=function(_0x53e179,_0x512d30){_0x53e179=_0x53e179-0x131;let _0x5e3d0d=_0x5676d3[_0x53e179];return _0x5e3d0d;},a30_0x1164(_0x474285,_0x14cab8);}async function fetchBatchMatchStatsD2(_0x4b27cf){const _0x2544de=a30_0xe3d13c,_0x296382=new Map();try{_0x4b27cf['forEach'](_0x5ce260=>{const _0x21db89=a30_0x1164;_0x296382[_0x21db89(0x149)](_0x5ce260,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x52c8af=collection(db,_0x2544de(0x14f)),_0x54a909=await getDocs(_0x52c8af);_0x54a909['forEach'](_0x3c588d=>{const _0x2e6069=_0x2544de,_0x31ad43=_0x3c588d['data'](),_0x285a9b=_0x31ad43['winnerUsername'],_0xa77178=_0x31ad43['loserUsername'];if(_0x4b27cf['includes'](_0x285a9b)){const _0x3fe84d=_0x296382['get'](_0x285a9b);_0x3fe84d['wins']++,_0x3fe84d['totalMatches']++,_0x3fe84d['totalKills']+=parseInt(_0x31ad43[_0x2e6069(0x135)])||0x0,_0x3fe84d[_0x2e6069(0x13d)]+=parseInt(_0x31ad43['loserScore'])||0x0;}if(_0x4b27cf['includes'](_0xa77178)){const _0x2f9c5c=_0x296382['get'](_0xa77178);_0x2f9c5c[_0x2e6069(0x15e)]++,_0x2f9c5c['totalMatches']++,_0x2f9c5c[_0x2e6069(0x15b)]+=parseInt(_0x31ad43['loserScore'])||0x0,_0x2f9c5c['totalDeaths']+=parseInt(_0x31ad43['winnerScore'])||0x0;}}),_0x4b27cf['forEach'](_0x18fc00=>{const _0x22d732=_0x2544de,_0x8fc15f=_0x296382['get'](_0x18fc00);_0x8fc15f['kda']=_0x8fc15f['totalDeaths']>0x0?(_0x8fc15f['totalKills']/_0x8fc15f['totalDeaths'])['toFixed'](0x2):_0x8fc15f[_0x22d732(0x15b)][_0x22d732(0x153)](0x2),_0x8fc15f['winRate']=_0x8fc15f['totalMatches']>0x0?(_0x8fc15f['wins']/_0x8fc15f['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x12afd1){console['error'](_0x2544de(0x162),_0x12afd1);}return _0x296382;}export{displayLadderD2,updatePlayerPositions};