function a10_0x559f(_0xce4a8,_0x1e81f3){const _0x4c8597=a10_0x2b8e();return a10_0x559f=function(_0x3b357d,_0x4d93ce){_0x3b357d=_0x3b357d-0xa7;let _0x3aa68d=_0x4c8597[_0x3b357d];return _0x3aa68d;},a10_0x559f(_0xce4a8,_0x1e81f3);}const a10_0x1501f3=a10_0x559f;(function(_0x1c73a5,_0x2dcdb5){const _0x433f79=a10_0x559f,_0x35d95e=_0x1c73a5();while(!![]){try{const _0x4fba89=-parseInt(_0x433f79(0xbc))/0x1+parseInt(_0x433f79(0xca))/0x2+-parseInt(_0x433f79(0xe9))/0x3*(parseInt(_0x433f79(0xbb))/0x4)+-parseInt(_0x433f79(0xb9))/0x5+parseInt(_0x433f79(0xed))/0x6*(parseInt(_0x433f79(0xec))/0x7)+-parseInt(_0x433f79(0xbf))/0x8*(parseInt(_0x433f79(0xd1))/0x9)+parseInt(_0x433f79(0xda))/0xa;if(_0x4fba89===_0x2dcdb5)break;else _0x35d95e['push'](_0x35d95e['shift']());}catch(_0x10f82b){_0x35d95e['push'](_0x35d95e['shift']());}}}(a10_0x2b8e,0x6d4cb));const a10_0x44331c=(function(){let _0x55e6d4=!![];return function(_0x37f2f3,_0x368d7f){const _0x22a275=_0x55e6d4?function(){const _0x5fb531=a10_0x559f;if(_0x368d7f){const _0x28bcd8=_0x368d7f[_0x5fb531(0xd2)](_0x37f2f3,arguments);return _0x368d7f=null,_0x28bcd8;}}:function(){};return _0x55e6d4=![],_0x22a275;};}()),a10_0x46d134=a10_0x44331c(this,function(){const _0x5818c2=a10_0x559f;return a10_0x46d134['toString']()[_0x5818c2(0xd0)](_0x5818c2(0xc2))[_0x5818c2(0xb5)]()[_0x5818c2(0xe3)](a10_0x46d134)[_0x5818c2(0xd0)](_0x5818c2(0xc2));});a10_0x46d134();const a10_0x4d93ce=(function(){let _0x1266c6=!![];return function(_0x586830,_0x299e24){const _0x112b8a=_0x1266c6?function(){const _0x55264a=a10_0x559f;if(_0x299e24){const _0x2f1403=_0x299e24[_0x55264a(0xd2)](_0x586830,arguments);return _0x299e24=null,_0x2f1403;}}:function(){};return _0x1266c6=![],_0x112b8a;};}()),a10_0x3b357d=a10_0x4d93ce(this,function(){const _0x5513eb=a10_0x559f,_0x1f7216=function(){const _0x2fa88e=a10_0x559f;let _0x5c78d4;try{_0x5c78d4=Function(_0x2fa88e(0xa9)+_0x2fa88e(0xc4)+');')();}catch(_0x559523){_0x5c78d4=window;}return _0x5c78d4;},_0x537a17=_0x1f7216(),_0x2d5449=_0x537a17['console']=_0x537a17['console']||{},_0x466807=[_0x5513eb(0xa8),_0x5513eb(0xe7),_0x5513eb(0xa7),_0x5513eb(0xc1),_0x5513eb(0xde),_0x5513eb(0xe4),_0x5513eb(0xd7)];for(let _0x510e4e=0x0;_0x510e4e<_0x466807[_0x5513eb(0xdc)];_0x510e4e++){const _0x52e59a=a10_0x4d93ce['constructor'][_0x5513eb(0xee)][_0x5513eb(0xac)](a10_0x4d93ce),_0x34d1d0=_0x466807[_0x510e4e],_0x3d273e=_0x2d5449[_0x34d1d0]||_0x52e59a;_0x52e59a['__proto__']=a10_0x4d93ce[_0x5513eb(0xac)](a10_0x4d93ce),_0x52e59a[_0x5513eb(0xb5)]=_0x3d273e[_0x5513eb(0xb5)][_0x5513eb(0xac)](_0x3d273e),_0x2d5449[_0x34d1d0]=_0x52e59a;}});a10_0x3b357d();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10_0x1501f3(0xc8),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x4308f8=![]){const _0x29201f=a10_0x1501f3,_0x3d8617=Date[_0x29201f(0xb6)](),_0xa188c4=checkNotificationCache();if(_0xa188c4!==null&&!_0x4308f8){updateNotificationDot(_0xa188c4);if(_0x3d8617-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x3d8617;const _0x2fdc0d=auth[_0x29201f(0xeb)];if(!_0x2fdc0d){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x5c67ba,_0x11e175,_0x37c4ba]=await Promise['all']([checkForPendingMatchesInCollection(_0x2fdc0d,_0x29201f(0xba)),checkForPendingMatchesInCollection(_0x2fdc0d,_0x29201f(0xb2)),checkForPendingMatchesInCollection(_0x2fdc0d,_0x29201f(0xb8))]),_0x35f831=_0x5c67ba||_0x11e175||_0x37c4ba;updateNotificationDot(_0x35f831),updateNotificationCache(_0x35f831);}catch(_0x4a0f2d){console[_0x29201f(0xc1)](_0x29201f(0xb7),_0x4a0f2d);}}async function checkForPendingMatchesInCollection(_0x429193,_0x129c29){const _0x2038e9=a10_0x1501f3,_0xd07a6d=_0x429193[_0x2038e9(0xdf)],_0x40237b=_0x429193[_0x2038e9(0xdb)],_0x1c227e=query(collection(db,_0x129c29),where('winnerId','==',_0xd07a6d),where('approved','==',![])),_0x4a3e42=await getDocs(_0x1c227e);if(!_0x4a3e42[_0x2038e9(0xd4)])return!![];if(_0x40237b){const _0x566bce=query(collection(db,_0x129c29),where('winnerEmail','==',_0x40237b),where(_0x2038e9(0xaf),'==',![])),_0x48eb97=await getDocs(_0x566bce);if(!_0x48eb97[_0x2038e9(0xd4)])return!![];}let _0x33885c=await getUsernameFromAllSources(_0x429193);if(_0x33885c){const _0x5c1eb4=query(collection(db,_0x129c29),where(_0x2038e9(0xae),'==',_0x33885c),where(_0x2038e9(0xaf),'==',![])),_0x1adc24=await getDocs(_0x5c1eb4);if(!_0x1adc24[_0x2038e9(0xd4)])return!![];}return![];}async function getUsernameFromAllSources(_0x32a7f5){const _0x824dee=a10_0x1501f3,_0x4f851f=localStorage[_0x824dee(0xcb)](_0x824dee(0xad));if(_0x4f851f)return _0x4f851f;try{const [_0x36c3a9,_0x45a6d6,_0x5b17ba]=await Promise[_0x824dee(0xef)]([getDocs(query(collection(db,_0x824dee(0xbd)),where(_0x824dee(0xe8),'==',_0x32a7f5[_0x824dee(0xdf)]))),getDocs(query(collection(db,'playersD2'),where(_0x824dee(0xe8),'==',_0x32a7f5[_0x824dee(0xdf)]))),getDocs(query(collection(db,'playersD3'),where(_0x824dee(0xe8),'==',_0x32a7f5['uid'])))]);if(!_0x36c3a9[_0x824dee(0xd4)]){const _0xef688a=_0x36c3a9[_0x824dee(0xe5)][0x0][_0x824dee(0xb4)]()[_0x824dee(0xcc)];return localStorage[_0x824dee(0xb3)](_0x824dee(0xad),_0xef688a),_0xef688a;}if(!_0x45a6d6['empty']){const _0x58f01a=_0x45a6d6[_0x824dee(0xe5)][0x0][_0x824dee(0xb4)]()[_0x824dee(0xcc)];return localStorage['setItem'](_0x824dee(0xad),_0x58f01a),_0x58f01a;}if(!_0x5b17ba[_0x824dee(0xd4)]){const _0x5b2508=_0x5b17ba[_0x824dee(0xe5)][0x0][_0x824dee(0xb4)]()['username'];return localStorage[_0x824dee(0xb3)](_0x824dee(0xad),_0x5b2508),_0x5b2508;}const _0x5db839=await getDoc(doc(db,'users',_0x32a7f5[_0x824dee(0xdf)]));if(_0x5db839[_0x824dee(0xc3)]()&&_0x5db839[_0x824dee(0xb4)]()[_0x824dee(0xcc)]){const _0x1c0bb3=_0x5db839['data']()[_0x824dee(0xcc)];return localStorage['setItem'](_0x824dee(0xad),_0x1c0bb3),_0x1c0bb3;}}catch(_0x1bb7eb){console[_0x824dee(0xc1)](_0x824dee(0xc0),_0x1bb7eb);}if(_0x32a7f5[_0x824dee(0xdb)])return _0x32a7f5[_0x824dee(0xdb)][_0x824dee(0xd6)]('@')[0x0];return null;}function updateNotificationCache(_0x1ec98b){const _0x49c563=a10_0x1501f3,_0x4ae7ee={'status':_0x1ec98b,'timestamp':Date[_0x49c563(0xb6)]()};localStorage[_0x49c563(0xb3)](NOTIFICATION_CACHE_KEY,JSON['stringify'](_0x4ae7ee));}function checkNotificationCache(){const _0x41799b=a10_0x1501f3,_0x48d991=localStorage[_0x41799b(0xcb)](NOTIFICATION_CACHE_KEY);if(!_0x48d991)return null;try{const {status:_0x2632df,timestamp:_0x104f5a}=JSON[_0x41799b(0xab)](_0x48d991),_0x5f622e=Date['now']();if(_0x5f622e-_0x104f5a<CACHE_EXPIRY)return _0x2632df;}catch(_0x51b6cc){}return null;}export function updateNotificationDot(_0x24525b){const _0x1c5c8d=a10_0x1501f3,_0x541674=new MutationObserver((_0x2b263c,_0x50a0e1)=>{const _0x7300ed=a10_0x559f,_0x2e1857=document[_0x7300ed(0xdd)](_0x7300ed(0xf0));_0x2e1857&&(updateDotStyle(_0x2e1857,_0x24525b),_0x50a0e1[_0x7300ed(0xd9)]());});_0x541674[_0x1c5c8d(0xe1)](document[_0x1c5c8d(0xd3)],{'childList':!![],'subtree':!![]});const _0x213a5b=document['getElementById'](_0x1c5c8d(0xf0));_0x213a5b&&(updateDotStyle(_0x213a5b,_0x24525b),_0x541674['disconnect']()),setTimeout(()=>_0x541674[_0x1c5c8d(0xd9)](),0x1388);}function updateDotStyle(_0x2a71ee,_0x5da561){const _0x5e5b8f=a10_0x1501f3;_0x5da561?(_0x2a71ee[_0x5e5b8f(0xc5)][_0x5e5b8f(0xc7)]=_0x5e5b8f(0xce),_0x2a71ee['style'][_0x5e5b8f(0xbe)]=_0x5e5b8f(0xea),_0x2a71ee['style']['width']=_0x5e5b8f(0xd8),_0x2a71ee[_0x5e5b8f(0xc5)][_0x5e5b8f(0xaa)]=_0x5e5b8f(0xd8),_0x2a71ee[_0x5e5b8f(0xc5)]['position']='absolute',_0x2a71ee[_0x5e5b8f(0xc5)][_0x5e5b8f(0xd5)]='-5px',_0x2a71ee[_0x5e5b8f(0xc5)][_0x5e5b8f(0xb0)]=_0x5e5b8f(0xb1),_0x2a71ee['style'][_0x5e5b8f(0xe0)]='50%',_0x2a71ee[_0x5e5b8f(0xc5)]['border']=_0x5e5b8f(0xe2),_0x2a71ee['style'][_0x5e5b8f(0xc9)]=_0x5e5b8f(0xcd)):_0x2a71ee[_0x5e5b8f(0xc5)]['display']=_0x5e5b8f(0xe6);}function a10_0x2b8e(){const _0x4ff0b0=['info','log','return\x20(function()\x20','height','parse','bind','currentUsername','winnerUsername','approved','right','-8px','pendingMatchesD2','setItem','data','toString','now','Error\x20checking\x20pending\x20matches:','pendingMatchesD3','4258680hprMwM','pendingMatches','3316dpMVBK','185827SjZibJ','players','backgroundColor','26008NQUmuH','Error\x20fetching\x20username:','error','(((.+)+)+)+$','exists','{}.constructor(\x22return\x20this\x22)(\x20)','style','addEventListener','display','pendingMatchesCache','zIndex','842226ssHGIs','getItem','username','999','block','DOMContentLoaded','search','1458vKPVLx','apply','body','empty','top','split','trace','10px','disconnect','9433500IGXgXj','email','length','getElementById','exception','uid','borderRadius','observe','2px\x20solid\x20white','constructor','table','docs','none','warn','userId','705kfENNd','#ff3b30','currentUser','70189vdZdKI','504QKgAqm','prototype','all','report-match-notification','removeItem'];a10_0x2b8e=function(){return _0x4ff0b0;};return a10_0x2b8e();}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x1501f3(0xc6)](a10_0x1501f3(0xcf),()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x175b1a=a10_0x559f;localStorage[_0x175b1a(0xf1)](_0x175b1a(0xad)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});