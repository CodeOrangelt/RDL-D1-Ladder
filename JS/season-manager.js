const a52_0x201fe4=a52_0x4e5c;(function(_0x457ae7,_0x3b4a53){const _0xaac0c6=a52_0x4e5c,_0x38c454=_0x457ae7();while(!![]){try{const _0x368463=parseInt(_0xaac0c6(0x16b))/0x1+-parseInt(_0xaac0c6(0x169))/0x2*(parseInt(_0xaac0c6(0x13a))/0x3)+-parseInt(_0xaac0c6(0x154))/0x4*(-parseInt(_0xaac0c6(0x149))/0x5)+parseInt(_0xaac0c6(0x170))/0x6+parseInt(_0xaac0c6(0x14f))/0x7*(parseInt(_0xaac0c6(0x13f))/0x8)+-parseInt(_0xaac0c6(0x172))/0x9+parseInt(_0xaac0c6(0x13b))/0xa*(parseInt(_0xaac0c6(0x157))/0xb);if(_0x368463===_0x3b4a53)break;else _0x38c454['push'](_0x38c454['shift']());}catch(_0x1a0312){_0x38c454['push'](_0x38c454['shift']());}}}(a52_0x5032,0xc5b54));const a52_0x4ebaff=(function(){let _0x24435e=!![];return function(_0x412976,_0xcabca0){const _0x478087=_0x24435e?function(){const _0x3a6242=a52_0x4e5c;if(_0xcabca0){const _0x7d96d9=_0xcabca0[_0x3a6242(0x146)](_0x412976,arguments);return _0xcabca0=null,_0x7d96d9;}}:function(){};return _0x24435e=![],_0x478087;};}()),a52_0x224b24=a52_0x4ebaff(this,function(){const _0x14eee6=a52_0x4e5c;return a52_0x224b24[_0x14eee6(0x168)]()[_0x14eee6(0x167)]('(((.+)+)+)+$')[_0x14eee6(0x168)]()[_0x14eee6(0x14b)](a52_0x224b24)[_0x14eee6(0x167)](_0x14eee6(0x140));});a52_0x224b24();function a52_0x5032(){const _0x2d5688=['757027mmfIbg','getElementById','{}.constructor(\x22return\x20this\x22)(\x20)','push','reload','4311516LjgmVm','style','14251347bQYaaB','position','2481jkFClT','130ypkCPr','display','none','block','8DJezwi','(((.+)+)+)+$','Please\x20enter\x20your\x20password','resetSeason','seasonCount','bind','reset-confirmation','apply','addEventListener','error','10UknYLS','table','constructor','setupEventListeners','log','seasons','2423729CNUsIX','season','\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.','info','exception','41804VZBRFs','reset-password','metadata','743644WNniza','return\x20(function()\x20','Season\x20','Invalid\x20password\x20or\x20authentication\x20failed','console','length','Authentication\x20error:','click','data','value','currentUser','eloRating','credential','players','docs','reset-season','search','toString','794mYQylr','__proto__'];a52_0x5032=function(){return _0x2d5688;};return a52_0x5032();}const a52_0x25c160=(function(){let _0x384f07=!![];return function(_0x79966f,_0x15e663){const _0x402ecb=_0x384f07?function(){const _0x14dcf5=a52_0x4e5c;if(_0x15e663){const _0x4ace55=_0x15e663[_0x14dcf5(0x146)](_0x79966f,arguments);return _0x15e663=null,_0x4ace55;}}:function(){};return _0x384f07=![],_0x402ecb;};}()),a52_0x2ea939=a52_0x25c160(this,function(){const _0x48a2a4=a52_0x4e5c;let _0x242cac;try{const _0x4e125c=Function(_0x48a2a4(0x158)+_0x48a2a4(0x16d)+');');_0x242cac=_0x4e125c();}catch(_0x12c0f7){_0x242cac=window;}const _0x3192c8=_0x242cac['console']=_0x242cac[_0x48a2a4(0x15b)]||{},_0x5bac08=[_0x48a2a4(0x14d),'warn',_0x48a2a4(0x152),_0x48a2a4(0x148),_0x48a2a4(0x153),_0x48a2a4(0x14a),'trace'];for(let _0x19e465=0x0;_0x19e465<_0x5bac08[_0x48a2a4(0x15c)];_0x19e465++){const _0x1cd66b=a52_0x25c160['constructor']['prototype']['bind'](a52_0x25c160),_0x40b0bd=_0x5bac08[_0x19e465],_0x185e6e=_0x3192c8[_0x40b0bd]||_0x1cd66b;_0x1cd66b[_0x48a2a4(0x16a)]=a52_0x25c160['bind'](a52_0x25c160),_0x1cd66b[_0x48a2a4(0x168)]=_0x185e6e[_0x48a2a4(0x168)][_0x48a2a4(0x144)](_0x185e6e),_0x3192c8[_0x40b0bd]=_0x1cd66b;}});a52_0x2ea939();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a52_0x4e5c(_0x4fe1cd,_0x28e2c6){const _0x2016ad=a52_0x5032();return a52_0x4e5c=function(_0x2ea939,_0x25c160){_0x2ea939=_0x2ea939-0x139;let _0xe35f93=_0x2016ad[_0x2ea939];return _0xe35f93;},a52_0x4e5c(_0x4fe1cd,_0x28e2c6);}class SeasonManager{constructor(){const _0x2e42ee=a52_0x4e5c;this[_0x2e42ee(0x14c)]();}[a52_0x201fe4(0x14c)](){const _0x2e496c=a52_0x201fe4,_0x4344fb=document[_0x2e496c(0x16c)](_0x2e496c(0x166)),_0x14d380=document[_0x2e496c(0x16c)]('confirm-reset'),_0x1c6a8e=document[_0x2e496c(0x16c)]('cancel-reset');_0x4344fb?.[_0x2e496c(0x147)](_0x2e496c(0x15e),()=>{const _0x4cb610=_0x2e496c;document['getElementById'](_0x4cb610(0x145))[_0x4cb610(0x171)][_0x4cb610(0x13c)]=_0x4cb610(0x13e);}),_0x14d380?.[_0x2e496c(0x147)](_0x2e496c(0x15e),async()=>{const _0x4f840c=_0x2e496c,_0x560136=document[_0x4f840c(0x16c)]('reset-password'),_0x4ecca6=auth[_0x4f840c(0x161)];if(!_0x4ecca6||!_0x560136[_0x4f840c(0x160)]){alert(_0x4f840c(0x141));return;}try{const _0x216f38=EmailAuthProvider[_0x4f840c(0x163)](_0x4ecca6['email'],_0x560136[_0x4f840c(0x160)]);await reauthenticateWithCredential(_0x4ecca6,_0x216f38),await this['resetSeason'](),_0x560136[_0x4f840c(0x160)]='',document[_0x4f840c(0x16c)](_0x4f840c(0x145))[_0x4f840c(0x171)]['display']=_0x4f840c(0x13d);}catch(_0x19579e){alert(_0x4f840c(0x15a)),console['error'](_0x4f840c(0x15d),_0x19579e);}}),_0x1c6a8e?.[_0x2e496c(0x147)](_0x2e496c(0x15e),()=>{const _0x4899d1=_0x2e496c,_0xe7e9ce=document['getElementById'](_0x4899d1(0x155));_0xe7e9ce[_0x4899d1(0x160)]='',document[_0x4899d1(0x16c)]('reset-confirmation')[_0x4899d1(0x171)][_0x4899d1(0x13c)]=_0x4899d1(0x13d);});}async[a52_0x201fe4(0x142)](){const _0x4b8024=a52_0x201fe4;try{const _0x371d31=await getDoc(doc(db,_0x4b8024(0x156),_0x4b8024(0x143)));let _0xcd1b19=0x1;_0x371d31['exists']()&&(_0xcd1b19=_0x371d31['data']()['count']+0x1);const _0x58a5a0=await getDocs(collection(db,_0x4b8024(0x164))),_0xebd2ae={'players':[],'date':new Date(),'seasonNumber':_0xcd1b19};for(const _0x20dcdc of _0x58a5a0[_0x4b8024(0x165)]){const _0x53b262=_0x20dcdc[_0x4b8024(0x15f)]();_0xebd2ae[_0x4b8024(0x164)][_0x4b8024(0x16e)]({'username':_0x53b262['username'],'position':_0x53b262[_0x4b8024(0x139)],'eloRating':_0x53b262[_0x4b8024(0x162)]||0x4b0}),await setDoc(doc(db,_0x4b8024(0x164),_0x20dcdc['id']),{..._0x53b262,'eloRating':0x4b0,'position':_0x53b262[_0x4b8024(0x139)]});}await setDoc(doc(db,_0x4b8024(0x14e),_0x4b8024(0x150)+_0xcd1b19),_0xebd2ae),await setDoc(doc(db,_0x4b8024(0x156),_0x4b8024(0x143)),{'count':_0xcd1b19}),alert(_0x4b8024(0x159)+_0xcd1b19+_0x4b8024(0x151)),location[_0x4b8024(0x16f)]();}catch(_0x4c0352){console[_0x4b8024(0x148)]('Error\x20resetting\x20season:',_0x4c0352),alert('Error\x20resetting\x20season.\x20Please\x20try\x20again.');}}}export const seasonManager=new SeasonManager();