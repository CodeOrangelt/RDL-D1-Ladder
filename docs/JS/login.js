(function(_0x30a997,_0x47b14c){const _0x5b534d=a0_0x23a8,_0x43963a=_0x30a997();while(!![]){try{const _0x53e7c5=parseInt(_0x5b534d(0xe4))/0x1+-parseInt(_0x5b534d(0x11d))/0x2+parseInt(_0x5b534d(0xf4))/0x3+-parseInt(_0x5b534d(0xe9))/0x4+parseInt(_0x5b534d(0xec))/0x5*(parseInt(_0x5b534d(0x122))/0x6)+-parseInt(_0x5b534d(0x11a))/0x7+parseInt(_0x5b534d(0x102))/0x8;if(_0x53e7c5===_0x47b14c)break;else _0x43963a['push'](_0x43963a['shift']());}catch(_0x424a25){_0x43963a['push'](_0x43963a['shift']());}}}(a0_0x2dd7,0x5e4c0));const a0_0x2ede24=(function(){let _0x4083d4=!![];return function(_0x383895,_0x7d9f2a){const _0x5777d4=_0x4083d4?function(){if(_0x7d9f2a){const _0x1c6cf0=_0x7d9f2a['apply'](_0x383895,arguments);return _0x7d9f2a=null,_0x1c6cf0;}}:function(){};return _0x4083d4=![],_0x5777d4;};}()),a0_0x3ecee8=a0_0x2ede24(this,function(){const _0x5ec890=a0_0x23a8;let _0x231710;try{const _0x1a7a1f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x231710=_0x1a7a1f();}catch(_0x53d088){_0x231710=window;}const _0x33af1c=_0x231710[_0x5ec890(0xf6)]=_0x231710['console']||{},_0x5eb5c7=[_0x5ec890(0xfe),'warn',_0x5ec890(0xfb),_0x5ec890(0xff),'exception','table',_0x5ec890(0x11b)];for(let _0x5a9980=0x0;_0x5a9980<_0x5eb5c7['length'];_0x5a9980++){const _0x2dc92b=a0_0x2ede24['constructor'][_0x5ec890(0xf5)]['bind'](a0_0x2ede24),_0x3e4f51=_0x5eb5c7[_0x5a9980],_0x38c425=_0x33af1c[_0x3e4f51]||_0x2dc92b;_0x2dc92b['__proto__']=a0_0x2ede24['bind'](a0_0x2ede24),_0x2dc92b['toString']=_0x38c425['toString']['bind'](_0x38c425),_0x33af1c[_0x3e4f51]=_0x2dc92b;}});a0_0x3ecee8();function a0_0x2dd7(){const _0x151a35=['14118360BHZXGE','uid','login-container','disabled','Error\x20checking\x20verification\x20status:','docs','gameMode','Email\x20not\x20yet\x20verified,\x20waiting...','nonParticipants','style','data','Attempting\x20Firebase\x20signInWithEmailAndPassword...','Login\x20error:','display','register-error','message','preventDefault','register-container','user','location','verificationCheckInterval','block','username','empty','4068820IEZUUQ','trace','getElementById','1415894PGOJDg','trim','href','Login\x20failed:\x20','playersDuos','28992WxOIaJ','User\x20signed\x20in:','255475IXiNRJ','playersD2','textContent','\x20collection','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Setting\x20up\x20your\x20account...\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','1827832nQLIUd','register-form','Error\x20resending\x20verification\x20email:','5MLWihV','Please\x20enter\x20your\x20password\x20to\x20resend\x20verification\x20email','login-error','string','email','then','innerHTML','addEventListener','321909VuSzet','prototype','console','\x20added\x20to\x20nonParticipants\x20collection','auth/email-already-in-use','length','value','info','players','verification-answer','log','error','.\x20Please\x20check\x20your\x20inbox.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','register-email'];a0_0x2dd7=function(){return _0x151a35;};return a0_0x2dd7();}import{createUserWithEmailAndPassword,signInWithEmailAndPassword,sendEmailVerification,signOut}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{doc,setDoc,collection,getDocs,query,where,getDoc,updateDoc,deleteDoc,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{auth,db}from'./firebase-config.js';function setupVerificationListener(_0x4f5119,_0x366c87){console['log']('Setting\x20up\x20email\x20verification\x20listener\x20for:',_0x4f5119);const _0x42384f=setInterval(async()=>{const _0x1987bd=a0_0x23a8;try{console['log']('Checking\x20if\x20email\x20has\x20been\x20verified...');const _0x741dc=await signInWithEmailAndPassword(auth,_0x4f5119,_0x366c87),_0x1be8bd=_0x741dc['user'];await _0x1be8bd['getIdToken'](!![]),_0x1be8bd['emailVerified']?(console['log']('Email\x20has\x20been\x20verified!\x20Redirecting\x20to\x20login\x20page...'),clearInterval(_0x42384f),document['getElementById']('register-error')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Email\x20verified\x20successfully!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setTimeout(()=>{const _0x2b6234=a0_0x23a8;document['getElementById'](_0x2b6234(0x113))['style']['display']='none',document['getElementById']('login-container')[_0x2b6234(0x10b)]['display']=_0x2b6234(0x117),document['getElementById']('login-email')[_0x2b6234(0xfa)]=_0x4f5119,document[_0x2b6234(0x11c)](_0x2b6234(0xee))['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Your\x20account\x20has\x20been\x20verified!\x20You\x20can\x20now\x20log\x20in.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';},0x7d0)):(console['log'](_0x1987bd(0x109)),await signOut(auth));}catch(_0x29436e){console[_0x1987bd(0xff)](_0x1987bd(0x106),_0x29436e),clearInterval(_0x42384f);}},0x1388);window['verificationCheckInterval']=_0x42384f,setTimeout(()=>{const _0x4b3abc=a0_0x23a8;window['verificationCheckInterval']&&(clearInterval(window['verificationCheckInterval']),window[_0x4b3abc(0x116)]=null,console['log']('Stopped\x20checking\x20for\x20email\x20verification\x20(timeout\x20reached)'));},0x5*0x3c*0x3e8);}async function isUsernameAvailable(_0x4d3823){const _0x55f316=a0_0x23a8;if(!_0x4d3823||typeof _0x4d3823!==_0x55f316(0xef)||_0x4d3823[_0x55f316(0x11e)]()['length']<0x3)return document['getElementById'](_0x55f316(0x110))['textContent']='Username\x20must\x20be\x20at\x20least\x203\x20characters\x20long',![];const _0x450e45=_0x4d3823[_0x55f316(0x11e)]();try{const _0x15dda2=/^[a-zA-Z0-9_-]{3,20}$/;if(!_0x15dda2['test'](_0x450e45))return document['getElementById']('register-error')['textContent']='Username\x20can\x20only\x20contain\x20letters,\x20numbers,\x20underscores\x20and\x20hyphens',![];const [_0x518c82,_0x428471,_0x25625a]=await Promise['all']([getDocs(query(collection(db,_0x55f316(0xfc)),where('username','==',_0x450e45))),getDocs(query(collection(db,'pendingRegistrations'),where(_0x55f316(0x118),'==',_0x450e45))),getDocs(query(collection(db,'nonParticipants'),where(_0x55f316(0x118),'==',_0x450e45)))]);if(!_0x518c82['empty']||!_0x428471['empty']||!_0x25625a[_0x55f316(0x119)])return document[_0x55f316(0x11c)]('register-error')[_0x55f316(0xe6)]='Username\x20is\x20already\x20taken',![];return!![];}catch(_0x1b53a2){return console['error']('Error\x20checking\x20username:',_0x1b53a2),document['getElementById']('register-error')['textContent']='Unable\x20to\x20verify\x20username\x20availability.\x20Please\x20try\x20again\x20later.',![];}}async function handleRegister(_0xb17159){const _0x342991=a0_0x23a8;_0xb17159['preventDefault']();const _0x38e3c9=document['getElementById'](_0x342991(0x110));_0x38e3c9['textContent']='';const _0x1eb1ce=document['getElementById'](_0x342991(0x101))['value'],_0xb1c1b6=document[_0x342991(0x11c)]('register-password')['value'],_0x413c95=document['getElementById']('register-username')[_0x342991(0xfa)],_0x361315=document[_0x342991(0x11c)](_0x342991(0xfd))[_0x342991(0xfa)]['toLowerCase'](),_0x36b645=document['getElementById']('register-mode')[_0x342991(0xfa)],_0x24b9f7=document['getElementById']('non-participant')?.['checked']||![];if(_0x24b9f7&&_0x36b645!==''){_0x38e3c9[_0x342991(0xe6)]='Please\x20unselect\x20a\x20game\x20mode\x20if\x20you\x20choose\x20Non-Participant.';return;}if(!_0x24b9f7&&_0x36b645===''){_0x38e3c9[_0x342991(0xe6)]='Please\x20select\x20a\x20game\x20mode\x20or\x20check\x20Non-Participant.';return;}try{const _0x1b5f2a=['purple','magenta'];if(!_0x1b5f2a['includes'](_0x361315)){_0x38e3c9['textContent']='Incorrect\x20answer\x20to\x20verification\x20question';return;}const _0x321761=await isUsernameAvailable(_0x413c95);if(!_0x321761)return;const _0x40c986=await createUserWithEmailAndPassword(auth,_0x1eb1ce,_0xb1c1b6),_0x21f439=_0x40c986['user'];await sendEmailVerification(_0x21f439),await setDoc(doc(db,'pendingRegistrations',_0x21f439[_0x342991(0x103)]),{'username':_0x413c95['trim'](),'email':_0x1eb1ce,'gameMode':_0x36b645,'nonParticipant':_0x24b9f7,'createdAt':new Date(),'verified':![]}),_0x38e3c9[_0x342991(0xf2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Registration\x20pending!\x20Please\x20check\x20your\x20email\x20to\x20verify\x20your\x20account.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resendVerificationEmail(\x27'+_0x1eb1ce+'\x27)\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',await signOut(auth),setupVerificationListener(_0x1eb1ce,_0xb1c1b6);}catch(_0x1de89e){console['error']('Registration\x20error:',_0x1de89e),_0x38e3c9[_0x342991(0xe6)]=_0x1de89e['code']===_0x342991(0xf8)?'Email\x20address\x20is\x20already\x20registered':'Registration\x20failed.\x20Please\x20try\x20again\x20later.';}}async function handleLogin(_0x3340f9){const _0x54a55a=a0_0x23a8;_0x3340f9['preventDefault']();const _0x494d28=document['getElementById']('login-email')[_0x54a55a(0xfa)],_0x2a0374=document['getElementById']('login-password')['value'],_0x39d0ba=document['getElementById']('login-error');console['log']('Login\x20attempt\x20started\x20for:',_0x494d28),_0x39d0ba['textContent']='';try{console['log'](_0x54a55a(0x10d));const _0x3b8aaa=await signInWithEmailAndPassword(auth,_0x494d28,_0x2a0374),_0x54d75e=_0x3b8aaa['user'];console['log']('User\x20signed\x20in:',_0x54d75e['uid']);const _0x367218=['players',_0x54a55a(0xe5),'playersD3','playersDuos','playersCTF','nonParticipants'];console['log']('Checking\x20if\x20user\x20exists\x20in\x20any\x20collection...');let _0x256c06=![],_0x52333d=await Promise['all'](_0x367218['map'](_0x927956=>getDoc(doc(db,_0x927956,_0x54d75e['uid']))));for(let _0x2a94eb=0x0;_0x2a94eb<_0x52333d[_0x54a55a(0xf9)];_0x2a94eb++){if(_0x52333d[_0x2a94eb]['exists']()){_0x256c06=!![],console['log']('User\x20found\x20in\x20'+_0x367218[_0x2a94eb]+_0x54a55a(0xe7));break;}}if(!_0x256c06){console['log']('User\x20not\x20found\x20in\x20any\x20collection,\x20checking\x20pending\x20registration');const _0x2d1446=doc(db,'pendingRegistrations',_0x54d75e[_0x54a55a(0x103)]),_0xbbf301=await getDoc(_0x2d1446);if(_0xbbf301['exists']()){const _0x5a4d75=_0xbbf301[_0x54a55a(0x10c)]();console['log']('Found\x20pending\x20registration:',_0x5a4d75);if(_0x54d75e['emailVerified']){console['log']('Email\x20is\x20verified,\x20processing\x20registration'),_0x39d0ba['innerHTML']=_0x54a55a(0xe8);if(_0x5a4d75['nonParticipant'])console['log']('Processing\x20non-participant\x20registration'),await setDoc(doc(db,_0x54a55a(0x10a),_0x54d75e['uid']),{'username':_0x5a4d75['username'],'email':_0x54d75e['email'],'createdAt':serverTimestamp(),'isNonParticipant':!![]}),console[_0x54a55a(0xfe)]('User\x20'+_0x5a4d75['username']+_0x54a55a(0xf7));else{let _0x249261;switch(_0x5a4d75['gameMode']){case'D1':_0x249261='players';break;case'D2':_0x249261='playersD2';break;case'D3':_0x249261='playersD3';break;case'Duos':_0x249261=_0x54a55a(0x121);break;case'CTF':_0x249261='playersCTF';break;default:_0x249261='players';}console['log']('Processing\x20'+_0x5a4d75['gameMode']+'\x20player\x20registration\x20to\x20'+_0x249261);const _0x3354d8=collection(db,_0x249261),_0x2f5860=query(_0x3354d8,orderBy('position','desc'),limit(0x1)),_0xc15f52=await getDocs(_0x2f5860),_0x427c98=_0xc15f52['empty']?0x1:_0xc15f52[_0x54a55a(0x107)][0x0]['data']()['position']+0x1;await setDoc(doc(db,_0x249261,_0x54d75e['uid']),{'username':_0x5a4d75[_0x54a55a(0x118)],'email':_0x54d75e[_0x54a55a(0xf0)],'eloRating':0x4b0,'position':_0x427c98,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':_0x5a4d75[_0x54a55a(0x108)]}),console[_0x54a55a(0xfe)]('New\x20player\x20'+_0x5a4d75['username']+'\x20added\x20to\x20'+_0x249261+'\x20at\x20position\x20'+_0x427c98);}await deleteDoc(_0x2d1446),setTimeout(()=>{const _0x1a59a6=_0x54a55a;window[_0x1a59a6(0x115)][_0x1a59a6(0x11f)]='../index.html';},0x7d0);return;}else{_0x39d0ba[_0x54a55a(0xf2)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22warning-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Please\x20verify\x20your\x20email\x20to\x20complete\x20your\x20registration.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22resend-button\x22\x20class=\x22resend-button\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Resend\x20Verification\x20Email\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>',document[_0x54a55a(0x11c)]('resend-button')[_0x54a55a(0xf3)]('click',()=>{resendVerificationEmail(_0x494d28);}),await signOut(auth);return;}}}window[_0x54a55a(0x115)]['href']='../index.html';}catch(_0x258ebd){console[_0x54a55a(0xff)]('Login\x20error:',_0x258ebd),_0x39d0ba['textContent']=_0x54a55a(0x120)+_0x258ebd['message'];}}function a0_0x23a8(_0x2c1ffe,_0x3a179c){const _0x25e211=a0_0x2dd7();return a0_0x23a8=function(_0x3ecee8,_0x2ede24){_0x3ecee8=_0x3ecee8-0xe3;let _0x222d1f=_0x25e211[_0x3ecee8];return _0x222d1f;},a0_0x23a8(_0x2c1ffe,_0x3a179c);}function loginFormHandler(_0x3e8c14){const _0x45931b=a0_0x23a8;_0x3e8c14['preventDefault']();const _0x3348b2=document['getElementById']('login-email')['value']['trim'](),_0x5f50a5=document['getElementById']('login-password')['value'],_0x33bb6d=document[_0x45931b(0x11c)]('login-error');signInWithEmailAndPassword(auth,_0x3348b2,_0x5f50a5)[_0x45931b(0xf1)](_0x3dfbdd=>{const _0xe10099=_0x45931b;console['log'](_0xe10099(0xe3),_0x3dfbdd['user']),window['location'][_0xe10099(0x11f)]='../index.html';})['catch'](_0x6f8bb7=>{const _0x1b7dbe=_0x45931b;console['error'](_0x1b7dbe(0x10e),_0x6f8bb7),_0x33bb6d[_0x1b7dbe(0xe6)]='Login\x20error:\x20'+_0x6f8bb7[_0x1b7dbe(0x111)],_0x33bb6d['style']['display']='block';});}async function resendVerificationEmail(_0x157d75){const _0x540897=a0_0x23a8;console['log']('Attempting\x20to\x20resend\x20verification\x20email\x20to:',_0x157d75);try{const _0x3cda3a=document['getElementById']('login-password')?.[_0x540897(0xfa)];if(!_0x3cda3a){console[_0x540897(0xff)]('Password\x20not\x20available\x20for\x20resending\x20verification'),document['getElementById']('login-error')['textContent']=_0x540897(0xed);return;}const _0x383127=await signInWithEmailAndPassword(auth,_0x157d75,_0x3cda3a),_0x17ec89=_0x383127[_0x540897(0x114)];console['log']('User\x20signed\x20in\x20for\x20verification\x20email:',_0x17ec89[_0x540897(0x103)]),await sendEmailVerification(_0x17ec89),console['log']('Verification\x20email\x20sent'),document['getElementById']('login-error')['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22success-message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Verification\x20email\x20has\x20been\x20resent\x20to\x20'+_0x157d75+_0x540897(0x100),await signOut(auth);}catch(_0x43bfae){console[_0x540897(0xff)](_0x540897(0xeb),_0x43bfae),document['getElementById']('login-error')[_0x540897(0xe6)]='Error\x20sending\x20verification\x20email:\x20'+_0x43bfae[_0x540897(0x111)];}}window['resendVerificationEmail']=function(_0xd1d9be){console['log']('Window.resendVerificationEmail\x20called\x20with:',_0xd1d9be),resendVerificationEmail(_0xd1d9be);},document['addEventListener']('DOMContentLoaded',()=>{const _0x568180=a0_0x23a8,_0x46853a=document['getElementById']('non-participant'),_0x5aaf36=document['getElementById']('register-mode');_0x46853a&&_0x5aaf36&&_0x46853a['addEventListener']('change',function(){const _0xab1f87=a0_0x23a8;this['checked']?(_0x5aaf36[_0xab1f87(0xfa)]='',_0x5aaf36['disabled']=!![]):_0x5aaf36[_0xab1f87(0x105)]=![];});const _0x20c046=document['getElementById'](_0x568180(0xea)),_0x5dea86=document[_0x568180(0x11c)]('login-form');_0x20c046&&_0x20c046[_0x568180(0xf3)]('submit',handleRegister);_0x5dea86&&_0x5dea86['addEventListener']('submit',handleLogin);const _0x54b4d4=document['getElementById']('show-register'),_0x248a59=document['getElementById']('show-login');_0x54b4d4&&_0x54b4d4['addEventListener']('click',_0x5da814=>{const _0x8aa6a=_0x568180;_0x5da814['preventDefault'](),document['getElementById'](_0x8aa6a(0x104))[_0x8aa6a(0x10b)]['display']='none',document['getElementById'](_0x8aa6a(0x113))['style']['display']='block';}),_0x248a59&&_0x248a59['addEventListener']('click',_0x22d580=>{const _0x5e5447=_0x568180;_0x22d580[_0x5e5447(0x112)](),document['getElementById']('register-container')[_0x5e5447(0x10b)][_0x5e5447(0x10f)]='none',document['getElementById']('login-container')['style']['display']='block';});});