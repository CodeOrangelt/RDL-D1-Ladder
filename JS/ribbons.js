const a48_0xdd6c79=a48_0x2911,a48_0x168f51=(function(){let _0x4ba577=!![];return function(_0x5b3430,_0x20659d){const _0x4e1809=_0x4ba577?function(){if(_0x20659d){const _0x203357=_0x20659d['apply'](_0x5b3430,arguments);return _0x20659d=null,_0x203357;}}:function(){};return _0x4ba577=![],_0x4e1809;};}()),a48_0x182da3=a48_0x168f51(this,function(){const _0x40b114=a48_0x2911,_0x4b90f7=function(){const _0x317ec2=a48_0x2911;let _0x2484ae;try{_0x2484ae=Function(_0x317ec2(0x156)+_0x317ec2(0x112)+');')();}catch(_0xd064d8){_0x2484ae=window;}return _0x2484ae;},_0x56797a=_0x4b90f7(),_0x41be78=_0x56797a['console']=_0x56797a[_0x40b114(0x13a)]||{},_0x531d6d=['log','warn',_0x40b114(0x15d),_0x40b114(0x10a),_0x40b114(0x130),'table',_0x40b114(0x121)];for(let _0x4452c4=0x0;_0x4452c4<_0x531d6d['length'];_0x4452c4++){const _0x4c0d3a=a48_0x168f51[_0x40b114(0x111)][_0x40b114(0x16d)]['bind'](a48_0x168f51),_0x37b29c=_0x531d6d[_0x4452c4],_0x6c4458=_0x41be78[_0x37b29c]||_0x4c0d3a;_0x4c0d3a['__proto__']=a48_0x168f51['bind'](a48_0x168f51),_0x4c0d3a['toString']=_0x6c4458['toString']['bind'](_0x6c4458),_0x41be78[_0x37b29c]=_0x4c0d3a;}});a48_0x182da3();import{auth,db}from'./firebase-config.js';import{doc,getDoc,setDoc,collection,query,where,getDocs,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const RIBBON_DEFINITIONS={'Rematch\x20Ribbon':{'description':'Beat\x20a\x20pilot\x20with\x20the\x20\x22Rematch\x22\x20subgame\x20selected','image':'../images/ribbons/Rematch.png','color':'#FF6B6B'},'Overachiever\x20Ribbon':{'description':'Played\x20over\x20100\x20matches','image':'../images/ribbons/Overachiever.png','color':a48_0xdd6c79(0x157),'levels':[0x64,0xc8,0x12c,0x190,0x1f4,0x258,0x2bc,0x320,0x384,0x3e8]},'Brick\x20Wall':{'description':'Amass\x20at\x20least\x2080%\x20overall\x20win\x20rate\x20percentage\x20(minimum\x2050\x20matches)','image':a48_0xdd6c79(0x102),'color':'#F0932B','levels':[0x50,0x55,0x5a,0x5f,0x64]},'Collector\x20Ribbon':{'description':'Hold\x20more\x20than\x205\x20ribbons\x20at\x20a\x20time','image':a48_0xdd6c79(0x127),'color':'#6C5CE7','levels':[0x5,0xa,0xf,0x14,0x19,0x1e,0x23,0x28,0x2d,0x32]},'Sub-Gamer\x20Ribbon':{'description':a48_0xdd6c79(0x15c),'image':'../images/ribbons/Subgamer.png','color':'#A29BFE','levels':[0x32,0x64,0x96,0xc8,0xfa,0x12c,0x15e,0x190,0x1c2,0x1f4]},'Explorer\x20Ribbon':{'description':'Played\x20at\x20least\x2020\x20unique\x20maps','image':a48_0xdd6c79(0x101),'color':'#55A3FF','levels':[0x14,0x28,0x3c,0x50,0x64,0x78,0x8c,0xa0,0xb4,0xc8]},'Socialite\x20Ribbon':{'description':'Played\x20at\x20least\x2010\x20unique\x20pilots','image':'../images/ribbons/Socialite.png','color':'#FF7675','levels':[0xa,0xf,0x14,0x19,0x1e,0x23,0x28,0x2d,0x32,0x37]},'Underdog\x20Ribbon':{'description':'Beat\x20a\x20pilot\x20ranked\x20higher\x20than\x20you','image':'../images/ribbons/Underdog.png','color':'#FF9500','levels':[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0x9,0xa]},'Domination\x20Ribbon':{'description':a48_0xdd6c79(0x150),'image':'../images/ribbons/Domination.png','color':'#8E44AD','levels':[0x1,0x2,0x3,0x4,0x5]},'Top\x20Bronze\x20Pilot':{'description':a48_0xdd6c79(0xf2),'image':'../images/ribbons/toprank.png','color':'#CD7F32'},'Top\x20Silver\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Silver\x20rank','image':'../images/ribbons/toprank.png','color':'#C0C0C0'},'Top\x20Gold\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Gold\x20rank','image':'../images/ribbons/toprank.png','color':a48_0xdd6c79(0x14a)},'Top\x20Emerald\x20Pilot':{'description':'Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Emerald\x20rank','image':'../images/ribbons/toprank.png','color':'#50C878'}};export const RIBBON_CSS='\x0a/*\x20Stats\x20integration\x20styles\x20*/\x0a.ribbon-section\x20{\x0a\x20\x20\x20\x20grid-column:\x201\x20/\x20-1;\x0a\x20\x20\x20\x20margin-top:\x201rem;\x0a}\x0a\x0a.ribbon-stat-item.full-width\x20{\x0a\x20\x20\x20\x20grid-column:\x201\x20/\x20-1;\x0a\x20\x20\x20\x20margin-bottom:\x200;\x0a}\x0a\x0a/*\x20Military\x20Ribbon\x20Rack\x20Styling\x20-\x20NO\x20OUTER\x20CONTAINER\x20*/\x0a.ribbon-rack-inline\x20{\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20gap:\x208px;\x0a\x20\x20\x20\x20padding:\x200;\x0a\x20\x20\x20\x20background:\x20transparent;\x0a\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20box-shadow:\x20none;\x0a\x20\x20\x20\x20margin-top:\x2020px;\x0a\x20\x20\x20\x20max-width:\x20100%;\x0a\x20\x20\x20\x20align-items:\x20flex-start;\x0a}\x0a\x0a.ribbon-rack-empty-inline\x20{\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20padding:\x2060px\x2040px;\x0a\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.3);\x0a\x20\x20\x20\x20border-radius:\x2012px;\x0a\x20\x20\x20\x20border:\x202px\x20solid\x20rgba(255,\x20255,\x20255,\x200.1);\x0a\x20\x20\x20\x20margin-top:\x2020px;\x0a}\x0a\x0a.empty-rack-text\x20{\x0a\x20\x20\x20\x20color:\x20#888;\x0a\x20\x20\x20\x20font-style:\x20italic;\x0a\x20\x20\x20\x20font-size:\x201.2rem;\x0a}\x0a\x0a/*\x20Ribbon\x20Rows\x20*/\x0a.ribbon-row\x20{\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20gap:\x206px;\x0a\x20\x20\x20\x20margin-bottom:\x206px;\x0a\x20\x20\x20\x20justify-content:\x20flex-start;\x0a}\x0a\x0a.ribbon-row:nth-child(even)\x20{\x0a\x20\x20\x20\x20margin-left:\x2060px;\x0a}\x0a\x0a/*\x20Individual\x20Military\x20Ribbon\x20Styling\x20-\x20FIXED\x20OVERFLOW\x20FOR\x20LEVEL\x20INDICATOR\x20*/\x0a.military-ribbon\x20{\x0a\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20transition:\x20transform\x200.3s\x20ease;\x0a\x20\x20\x20\x20flex-shrink:\x200;\x0a\x20\x20\x20\x20width:\x20190px;\x0a\x20\x20\x20\x20height:\x2060px;\x0a\x20\x20\x20\x20border:\x203px\x20solid\x20#333;\x0a\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20overflow:\x20visible;\x20/*\x20Changed\x20from\x20hidden\x20to\x20visible\x20*/\x0a\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.8);\x0a\x20\x20\x20\x20margin:\x2012px\x2012px\x2012px\x200;\x20/*\x20Added\x20margin\x20to\x20prevent\x20clipping\x20*/\x0a}\x0a\x0a.military-ribbon:hover\x20{\x0a\x20\x20\x20\x20transform:\x20translateY(-4px);\x0a\x20\x20\x20\x20z-index:\x2010;\x0a}\x0a\x0a/*\x20Ribbon\x20image\x20container\x20to\x20handle\x20the\x20actual\x20overflow\x20*/\x0a.ribbon-image-container\x20{\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20border-radius:\x201px;\x0a}\x0a\x0a.ribbon-image\x20{\x0a\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20object-fit:\x20cover;\x0a\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20image-rendering:\x20crisp-edges;\x0a}\x0a\x0a.ribbon-fallback\x20{\x0a\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20text-shadow:\x200\x202px\x204px\x20rgba(0,0,0,0.8);\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20line-height:\x201;\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20left:\x200;\x0a}\x0a\x0a.ribbon-name\x20{\x0a\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20color:\x20rgba(255,\x20255,\x20255,\x200.9);\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20line-height:\x201.2;\x0a\x20\x20\x20\x20margin-top:\x206px;\x0a\x20\x20\x20\x20max-width:\x20120px;\x0a\x20\x20\x20\x20overflow:\x20hidden;\x0a\x20\x20\x20\x20text-overflow:\x20ellipsis;\x0a\x20\x20\x20\x20white-space:\x20nowrap;\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20bottom:\x20-24px;\x0a\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20transform:\x20translateX(-50%);\x0a\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20font-weight:\x20500;\x0a}\x0a\x0a.military-ribbon:hover\x20.ribbon-name\x20{\x0a\x20\x20\x20\x20display:\x20block;\x0a}\x0a\x0a.ribbon-devices\x20{\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20right:\x206px;\x0a\x20\x20\x20\x20transform:\x20translateY(-50%);\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20gap:\x203px;\x0a\x20\x20\x20\x20z-index:\x205;\x0a}\x0a\x0a.ribbon-device\x20{\x0a\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20text-shadow:\x200\x200\x204px\x20rgba(0,0,0,0.9);\x0a\x20\x20\x20\x20filter:\x20drop-shadow(0\x202px\x204px\x20rgba(0,0,0,0.8));\x0a}\x0a\x0a.bronze-star\x20{\x0a\x20\x20\x20\x20color:\x20#CD7F32;\x0a}\x0a\x0a.silver-star\x20{\x0a\x20\x20\x20\x20color:\x20#C0C0C0;\x0a}\x0a\x0a.gold-star\x20{\x0a\x20\x20\x20\x20color:\x20#FFD700;\x0a}\x0a\x0a/*\x20Level\x20indicator\x20-\x20NOW\x20FULLY\x20VISIBLE\x20*/\x0a.ribbon-level-indicator\x20{\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20top:\x20-8px;\x0a\x20\x20\x20\x20right:\x20-8px;\x0a\x20\x20\x20\x20background:\x20#FFD700;\x0a\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20border-radius:\x2050%;\x0a\x20\x20\x20\x20width:\x2024px;\x0a\x20\x20\x20\x20height:\x2024px;\x0a\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20border:\x203px\x20solid\x20#FFF;\x0a\x20\x20\x20\x20box-shadow:\x200\x204px\x208px\x20rgba(0,0,0,0.7);\x0a\x20\x20\x20\x20z-index:\x206;\x0a}\x0a\x0a/*\x20Custom\x20tooltip\x20-\x20only\x20this\x20one\x20will\x20show\x20*/\x0a.military-ribbon::before\x20{\x0a\x20\x20\x20\x20content:\x20attr(data-tooltip);\x0a\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20bottom:\x20100%;\x0a\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20transform:\x20translateX(-50%);\x0a\x20\x20\x20\x20background:\x20rgba(0,0,0,0.95);\x0a\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20padding:\x208px\x2012px;\x0a\x20\x20\x20\x20border-radius:\x206px;\x0a\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20white-space:\x20nowrap;\x0a\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20transition:\x20opacity\x200.3s;\x0a\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20margin-bottom:\x208px;\x0a\x20\x20\x20\x20border:\x201px\x20solid\x20rgba(255,\x20255,\x20255,\x200.2);\x0a}\x0a\x0a.military-ribbon:hover::before\x20{\x0a\x20\x20\x20\x20opacity:\x201;\x0a}\x0a\x0a/*\x20Responsive\x20adjustments\x20*/\x0a@media\x20(max-width:\x201024px)\x20{\x0a\x20\x20\x20\x20.military-ribbon\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2034px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x208px\x208px\x208px\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-device\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-level-indicator\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x20-6px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-6px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-row:nth-child(even)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x2052px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-name\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x20-20px;\x0a\x20\x20\x20\x20}\x0a}\x0a\x0a@media\x20(max-width:\x20768px)\x20{\x0a\x20\x20\x20\x20.military-ribbon\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2080px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2028px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x206px\x206px\x206px\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-device\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2010px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-level-indicator\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2018px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2018px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x209px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x20-5px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-5px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-row:nth-child(even)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x2042px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-name\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2011px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x20-18px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-rack-inline\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gap:\x205px;\x0a\x20\x20\x20\x20}\x0a}\x0a\x0a@media\x20(max-width:\x20480px)\x20{\x0a\x20\x20\x20\x20.military-ribbon\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2070px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x205px\x205px\x205px\x200;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-row:nth-child(even)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-left:\x2036px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-rack-inline\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20gap:\x204px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20.ribbon-level-indicator\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x20-4px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-4px;\x0a\x20\x20\x20\x20}\x0a}\x0a\x0a.stats-grid\x20.ribbon-section\x20{\x0a\x20\x20\x20\x20background:\x20transparent;\x0a\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20padding:\x200;\x0a}\x0a\x0a.stats-grid\x20.ribbon-stat-item\x20{\x0a\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.3);\x0a\x20\x20\x20\x20padding:\x2025px;\x0a\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20text-align:\x20center;\x0a}\x0a\x0a.stats-grid\x20.ribbon-stat-item\x20.stat-label\x20{\x0a\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20text-transform:\x20uppercase;\x0a\x20\x20\x20\x20opacity:\x200.9;\x0a\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20color:\x20rgba(255,\x20255,\x20255,\x200.95);\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a}\x0a\x0a.ribbon-level-indicator.level-1\x20{\x20background:\x20#808080;\x20}\x0a.ribbon-level-indicator.level-2\x20{\x20background:\x20#CD7F32;\x20}\x0a.ribbon-level-indicator.level-3\x20{\x20background:\x20#b9f1fc;\x20}\x0a.ribbon-level-indicator.level-4\x20{\x20background:\x20#FFD700;\x20}\x0a.ribbon-level-indicator.level-5-plus\x20{\x20background:\x20#50C878;\x20}\x0a';class RibbonCacheManager{constructor(){const _0x1e1de2=a48_0xdd6c79;this[_0x1e1de2(0x105)]=new Map(),this['CACHE_DURATION']=0x3c*0x3c*0x3e8,this[_0x1e1de2(0x144)]='ribbon_cache_',this[_0x1e1de2(0xf5)]=Date['now'](),this['CLEANUP_INTERVAL']=0x1e*0x3c*0x3e8;}[a48_0xdd6c79(0x136)](_0x3d76b4,_0x3e61b4){return''+this['CACHE_KEY_PREFIX']+_0x3d76b4+'_'+_0x3e61b4;}['getCachedData'](_0x216818,_0x29175f){const _0x7501bb=a48_0xdd6c79;this['autoCleanup']();const _0x59f199=this[_0x7501bb(0x136)](_0x216818,_0x29175f);if(this['memoryCache'][_0x7501bb(0xfd)](_0x59f199)){const _0x4e4139=this[_0x7501bb(0x105)]['get'](_0x59f199);if(Date['now']()-_0x4e4139[_0x7501bb(0x106)]<this['CACHE_DURATION'])return console['log']('🚀\x20Cache\x20hit\x20(memory)\x20for\x20'+_0x216818),_0x4e4139['data'];this['memoryCache']['delete'](_0x59f199);}const _0x232afe=localStorage['getItem'](_0x59f199);if(_0x232afe)try{const _0x54733d=JSON['parse'](_0x232afe);if(Date['now']()-_0x54733d[_0x7501bb(0x106)]<this['CACHE_DURATION'])return this['memoryCache']['set'](_0x59f199,{'data':_0x54733d['ribbons'],'timestamp':_0x54733d[_0x7501bb(0x106)],'matchCount':_0x54733d['matchCount']}),console['log']('💾\x20Cache\x20hit\x20(localStorage)\x20for\x20'+_0x216818),_0x54733d['ribbons'];localStorage[_0x7501bb(0xed)](_0x59f199);}catch(_0x20a883){localStorage['removeItem'](_0x59f199);}return null;}[a48_0xdd6c79(0x129)](_0x2b0031,_0x52a6f1,_0x41b8e3,_0x263454){const _0x85af8d=a48_0xdd6c79,_0x4dc694=this['getCacheKey'](_0x2b0031,_0x52a6f1),_0x483875=Date['now']();this['memoryCache']['set'](_0x4dc694,{'data':_0x41b8e3,'timestamp':_0x483875,'matchCount':_0x263454});try{const _0x2394f7={'ribbons':_0x41b8e3,'matchCount':_0x263454,'timestamp':_0x483875,'version':0x3};localStorage['setItem'](_0x4dc694,JSON['stringify'](_0x2394f7));}catch(_0x4286c7){this[_0x85af8d(0x12c)]();try{localStorage['setItem'](_0x4dc694,JSON['stringify'](data));}catch(_0x12008e){}}}[a48_0xdd6c79(0x118)](_0x576e02,_0x4a9f2c,_0x28c178){const _0x30545c=a48_0xdd6c79,_0x11998a=this['getCacheKey'](_0x576e02,_0x4a9f2c);if(this['memoryCache']['has'](_0x11998a)){const _0x818569=this['memoryCache']['get'](_0x11998a);return _0x818569['matchCount']!==_0x28c178;}const _0x3937c6=localStorage['getItem'](_0x11998a);if(_0x3937c6)try{const _0x5950a6=JSON[_0x30545c(0x15a)](_0x3937c6);return _0x5950a6['matchCount']!==_0x28c178;}catch(_0x3a0dab){return!![];}return!![];}['invalidatePlayerCache'](_0x357289,_0x2b6fef){const _0x32f618=a48_0xdd6c79,_0x5e5c95=this[_0x32f618(0x136)](_0x357289,_0x2b6fef);this['memoryCache'][_0x32f618(0x13c)](_0x5e5c95),localStorage['removeItem'](_0x5e5c95),console['log']('🗑️\x20Invalidated\x20cache\x20for\x20'+_0x357289+'\x20('+_0x2b6fef+')\x20-\x20new\x20match\x20detected');}[a48_0xdd6c79(0x133)](){const _0x31b025=a48_0xdd6c79,_0x528a59=Date[_0x31b025(0xfe)]();_0x528a59-this['lastCleanup']>this[_0x31b025(0x125)]&&(this['cleanup'](),this[_0x31b025(0xf5)]=_0x528a59);}['cleanup'](){const _0x2a1cc9=a48_0xdd6c79,_0x14ec30=Date['now']();let _0x276028=0x0,_0x656e98=0x0;for(const [_0x4d94cb,_0x682981]of this['memoryCache']['entries']()){_0x14ec30-_0x682981['timestamp']>this['CACHE_DURATION']&&(this['memoryCache'][_0x2a1cc9(0x13c)](_0x4d94cb),_0x276028++);}for(let _0x23c899=localStorage['length']-0x1;_0x23c899>=0x0;_0x23c899--){const _0x2e5e03=localStorage['key'](_0x23c899);if(_0x2e5e03&&_0x2e5e03['startsWith'](this[_0x2a1cc9(0x144)]))try{const _0x21c638=JSON[_0x2a1cc9(0x15a)](localStorage['getItem'](_0x2e5e03));_0x14ec30-_0x21c638[_0x2a1cc9(0x106)]>this['CACHE_DURATION']&&(localStorage['removeItem'](_0x2e5e03),_0x656e98++);}catch(_0x1dd6f9){localStorage[_0x2a1cc9(0xed)](_0x2e5e03),_0x656e98++;}}}[a48_0xdd6c79(0x12c)](){const _0x566412=a48_0xdd6c79,_0x309b94=[];for(let _0x4c5039=0x0;_0x4c5039<localStorage['length'];_0x4c5039++){const _0x25c8f5=localStorage['key'](_0x4c5039);if(_0x25c8f5&&_0x25c8f5['startsWith'](this['CACHE_KEY_PREFIX']))try{const _0x38daa9=JSON['parse'](localStorage['getItem'](_0x25c8f5));_0x309b94[_0x566412(0x143)]({'key':_0x25c8f5,'timestamp':_0x38daa9['timestamp']});}catch(_0x3a67a6){localStorage['removeItem'](_0x25c8f5);}}_0x309b94['sort']((_0x18d48f,_0x282daf)=>_0x18d48f[_0x566412(0x106)]-_0x282daf['timestamp']);const _0x1996ad=Math['floor'](_0x309b94['length']/0x2);for(let _0x31a500=0x0;_0x31a500<_0x1996ad;_0x31a500++){localStorage['removeItem'](_0x309b94[_0x31a500]['key']);}}['getCacheStats'](){const _0x415bb4=a48_0xdd6c79;return{'memoryEntries':this['memoryCache'][_0x415bb4(0x16e)],'lastCleanup':new Date(this['lastCleanup'])[_0x415bb4(0x166)]()};}}class MatchCacheManager{constructor(){this['matchCache']=new Map(),this['CACHE_DURATION']=0xf*0x3c*0x3e8,this['lastCleanup']=Date['now']();}[a48_0xdd6c79(0x12e)](_0xaaa30a,_0x195cb8){const _0x19d48b=a48_0xdd6c79;this['autoCleanup']();const _0x486466=_0xaaa30a+'_'+_0x195cb8,_0x55aabb=this['matchCache']['get'](_0x486466);if(_0x55aabb&&Date['now']()-_0x55aabb[_0x19d48b(0x106)]<this['CACHE_DURATION'])return console['log']('🎯\x20Cache\x20hit\x20(matches)\x20for\x20'+_0xaaa30a),_0x55aabb['matches'];return _0x55aabb&&this['matchCache'][_0x19d48b(0x13c)](_0x486466),null;}['setCachedMatches'](_0x4bfa9f,_0x5b04a7,_0x49d445){const _0x14fb8a=a48_0xdd6c79,_0x1f62eb=_0x4bfa9f+'_'+_0x5b04a7;this[_0x14fb8a(0x145)][_0x14fb8a(0xff)](_0x1f62eb,{'matches':_0x49d445,'timestamp':Date['now']()});}['autoCleanup'](){const _0x5a6260=a48_0xdd6c79,_0x4beb95=Date['now']();if(_0x4beb95-this['lastCleanup']>0x5*0x3c*0x3e8){let _0x3cd1e3=0x0;for(const [_0x448c9d,_0x2a86c6]of this[_0x5a6260(0x145)][_0x5a6260(0x16b)]()){_0x4beb95-_0x2a86c6[_0x5a6260(0x106)]>this['CACHE_DURATION']&&(this['matchCache']['delete'](_0x448c9d),_0x3cd1e3++);}this['lastCleanup']=_0x4beb95;}}['getCacheStats'](){return{'entries':this['matchCache']['size'],'lastCleanup':new Date(this['lastCleanup'])['toLocaleTimeString']()};}}class RibbonSystem{constructor(){const _0x551e3b=a48_0xdd6c79;this['pendingEvaluations']=new Map(),this[_0x551e3b(0x141)]=null,this['BATCH_DELAY']=0x32,this['playerDataCache']=new Map();}async['bulkLoadPlayerData'](_0x2f6a89,_0x27d86e){const _0x575b5e=a48_0xdd6c79,_0x3f7490=_0x27d86e==='D1'?'players':_0x27d86e==='D2'?_0x575b5e(0x14f):'playersD3',_0x205a89=collection(db,_0x3f7490),_0x17a3bc=await getDocs(_0x205a89),_0x4c34cc=new Map();return _0x17a3bc['forEach'](_0x19c23c=>{const _0x2764cb=_0x575b5e,_0x46e161=_0x19c23c[_0x2764cb(0x155)]();_0x46e161['username']&&(_0x46e161['eloRating']!==undefined&&(_0x46e161['rating']=_0x46e161[_0x2764cb(0xf9)]),_0x4c34cc[_0x2764cb(0xff)](_0x46e161[_0x2764cb(0x14c)],_0x46e161));}),console['log']('📊\x20Bulk\x20loaded\x20'+_0x4c34cc['size']+_0x575b5e(0x123)+_0x3f7490),_0x4c34cc;}async[a48_0xdd6c79(0x10b)](_0x4cd23f,_0x126faa,_0x466c2e,_0x510e3d){const _0x363abd=a48_0xdd6c79,_0x9bd651={},_0x44305d=_0x126faa[_0x363abd(0x14c)],_0x2d0eb2={'totalMatches':_0x4cd23f['length'],'wins':0x0,'rematchWins':0x0,'subgameMatches':0x0,'uniqueMaps':new Set(),'uniqueOpponents':new Set(),'underdogWins':0x0,'dominatedRanks':new Set()},_0x11f1f2=new Set();_0x4cd23f[_0x363abd(0x169)](_0x536db7=>{const _0x2bd5ff=_0x363abd,_0x152317=_0x536db7[_0x2bd5ff(0x147)]===_0x44305d,_0xe2dd0f=_0x152317?_0x536db7['loserUsername']:_0x536db7['winnerUsername'];if(_0xe2dd0f)_0x11f1f2['add'](_0xe2dd0f);}),console[_0x363abd(0x13b)](_0x363abd(0x162)+_0x11f1f2['size']+_0x363abd(0x148));const _0x475467=await this['bulkLoadPlayerData']([..._0x11f1f2,_0x44305d],_0x510e3d),_0x2af698=_0x475467[_0x363abd(0x158)](_0x44305d);!_0x2af698&&console['log']('⚠️\x20No\x20current\x20player\x20data\x20found\x20for\x20'+_0x44305d);const _0x3fc5f0={0x0:new Set(),0x1:new Set(),0x2:new Set(),0x3:new Set(),0x4:new Set()};_0x4cd23f['forEach'](_0x2b6acd=>{const _0x52ccda=_0x363abd,_0x287822=_0x2b6acd['winnerUsername']===_0x44305d,_0x3b9f35=_0x287822?_0x2b6acd['loserUsername']:_0x2b6acd['winnerUsername'];if(_0x287822){_0x2d0eb2['wins']++;_0x2b6acd[_0x52ccda(0x116)]==='Rematch'&&_0x2d0eb2['rematchWins']++;this[_0x52ccda(0x120)](_0x2b6acd,_0x44305d,_0x2af698,_0x475467)&&_0x2d0eb2['underdogWins']++;const _0x1f54cd=_0x475467['get'](_0x3b9f35);if(_0x1f54cd){const _0x1c2552=_0x1f54cd[_0x52ccda(0xf9)]||0x0,_0x52825b=getPlayerRankTier(_0x1c2552);_0x3fc5f0[_0x52825b][_0x52ccda(0xfb)](_0x3b9f35);}}_0x2b6acd['subgameType']&&_0x2b6acd['subgameType']!=='Standard'&&_0x2d0eb2['subgameMatches']++,_0x2b6acd[_0x52ccda(0x114)]&&_0x2d0eb2['uniqueMaps']['add'](_0x2b6acd['mapPlayed']),_0x3b9f35&&_0x2d0eb2[_0x52ccda(0x109)][_0x52ccda(0xfb)](_0x3b9f35);}),Object['keys'](_0x3fc5f0)['forEach'](_0x5ca4df=>{_0x3fc5f0[_0x5ca4df]['size']>=0x5&&_0x2d0eb2['dominatedRanks']['add'](parseInt(_0x5ca4df));}),console[_0x363abd(0x13b)](_0x363abd(0x117)+_0x2d0eb2['underdogWins']+'\x20underdog\x20victories\x20for\x20'+_0x44305d),console[_0x363abd(0x13b)]('👑\x20Dominated\x20'+_0x2d0eb2['dominatedRanks']['size']+'\x20ranks:\x20['+Array['from'](_0x2d0eb2['dominatedRanks'])['map'](_0x48f45c=>getRankTierName(_0x48f45c))[_0x363abd(0xf4)](',\x20')+']');const _0x550a37=_0x2d0eb2['totalMatches']>0x0?_0x2d0eb2['wins']/_0x2d0eb2['totalMatches']*0x64:0x0,_0x4e3f6f=[['Overachiever\x20Ribbon',this[_0x363abd(0x15e)](_0x2d0eb2['totalMatches'],_0x466c2e)],['Rematch\x20Ribbon',this['evaluateRematchRibbonFromCount'](_0x2d0eb2['rematchWins'],_0x466c2e)],['Sub-Gamer\x20Ribbon',this['evaluateSubGamerRibbonFromCount'](_0x2d0eb2['subgameMatches'],_0x466c2e)],['Explorer\x20Ribbon',this[_0x363abd(0x15b)](_0x2d0eb2['uniqueMaps']['size'],_0x466c2e)],['Socialite\x20Ribbon',this['evaluateSocialiteRibbonFromCount'](_0x2d0eb2[_0x363abd(0x109)][_0x363abd(0x16e)],_0x466c2e)],['Brick\x20Wall',this[_0x363abd(0x151)](_0x550a37,_0x466c2e,_0x2d0eb2['totalMatches'])],[_0x363abd(0x154),this['evaluateUnderdogRibbonFromCount'](_0x2d0eb2['underdogWins'],_0x466c2e)],['Domination\x20Ribbon',this['evaluateDominationRibbonFromRanks'](_0x2d0eb2['dominatedRanks']['size'],_0x466c2e)]];_0x4e3f6f['forEach'](([_0x5b746a,_0x5ae1a5])=>{_0x5ae1a5&&(_0x9bd651[_0x5b746a]=_0x5ae1a5);});const _0x22a6dd=Object['keys'](_0x466c2e)['length']+Object['keys'](_0x9bd651)[_0x363abd(0x10f)],_0x21d2ed=this['evaluateCollectorRibbonFromCount'](_0x22a6dd,_0x466c2e);return _0x21d2ed&&(_0x9bd651['Collector\x20Ribbon']=_0x21d2ed),_0x9bd651;}['evaluateDominationRibbonFromRanks'](_0x38f5ee,_0x3cefee){const _0x336ffd=a48_0xdd6c79;if(_0x38f5ee===0x0)return null;const _0x5aeda4=_0x3cefee['Domination\x20Ribbon']||{'level':0x0};if(_0x38f5ee>_0x5aeda4['level']){const _0x2aa64c=[];for(let _0x8fe0c7=0x0;_0x8fe0c7<_0x38f5ee;_0x8fe0c7++){_0x2aa64c[_0x336ffd(0x143)](getRankTierName(_0x8fe0c7));}return console[_0x336ffd(0x13b)]('👑\x20Domination\x20Ribbon\x20awarded:\x20Level\x20'+_0x5aeda4['level']+'\x20→\x20'+_0x38f5ee+'\x20(Dominated:\x20'+_0x2aa64c['join'](',\x20')+')'),{'level':_0x38f5ee,'awardedAt':new Date(),'dominatedRanks':_0x2aa64c};}return null;}async['checkTopRankStatus'](_0x4d4ed8,_0x24b6e8){const _0x413459=a48_0xdd6c79;try{const _0x45bd84=_0x24b6e8==='D1'?_0x413459(0x140):_0x24b6e8==='D2'?'playersD2':_0x413459(0x142),_0x211cee=await this['getPlayerDataCached'](_0x4d4ed8,_0x24b6e8);if(!_0x211cee||_0x211cee['eloRating']===undefined)return console[_0x413459(0x13b)](_0x413459(0x137)+_0x4d4ed8),null;const _0x21220a=_0x211cee['eloRating'],_0x18c140=getPlayerRankTier(_0x21220a),_0x38dcfb=getRankTierName(_0x18c140);if(_0x38dcfb==='Unranked')return console['log']('❌\x20'+_0x4d4ed8+_0x413459(0x11b)+_0x21220a+_0x413459(0x167)),null;console['log']('🔍\x20Checking\x20Top\x20'+_0x38dcfb+_0x413459(0x153)+_0x4d4ed8+'\x20('+_0x21220a+'\x20ELO)');const _0x19e5a7=collection(db,_0x45bd84),_0x12464b=await getDocs(_0x19e5a7);let _0x12fbe8=null,_0x2b42cb=-0x1,_0x4accba=0x0;_0x12464b['forEach'](_0x599646=>{const _0x498da3=_0x599646['data'](),_0x316a9f=_0x498da3['eloRating']||0x0,_0xa70a1e=getPlayerRankTier(_0x316a9f);_0xa70a1e===_0x18c140&&(_0x4accba++,_0x316a9f>_0x2b42cb&&(_0x2b42cb=_0x316a9f,_0x12fbe8=_0x498da3['username']));});const _0x3b983f=_0x12fbe8===_0x4d4ed8;return console['log']('📊\x20'+_0x38dcfb+_0x413459(0x100)+_0x4accba+_0x413459(0x128)+_0x12fbe8+'\x20('+_0x2b42cb+'\x20ELO),\x20'+_0x4d4ed8+_0x413459(0x119)+_0x3b983f),_0x3b983f?_0x38dcfb:null;}catch(_0x426506){return console['error']('Error\x20checking\x20top\x20rank\x20status:',_0x426506),null;}}async['evaluateTopRankRibbon'](_0xbfde2a,_0x1125b2,_0x3a4147){const _0x28aacc=a48_0xdd6c79,_0x12d5f5=await this['checkTopRankStatus'](_0xbfde2a,_0x1125b2),_0xce8108={};if(_0x12d5f5){const _0x226d82='Top\x20'+_0x12d5f5+'\x20Pilot';if(RIBBON_DEFINITIONS[_0x226d82]){const _0x1c5d78=_0x3a4147[_0x226d82];!_0x1c5d78?(console['log']('👑\x20NEW\x20Top\x20Rank\x20Achievement:\x20'+_0xbfde2a+_0x28aacc(0x139)+_0x226d82+'!'),_0xce8108[_0x226d82]={'level':0x1,'awardedAt':new Date(),'rank':_0x12d5f5,'achievedAt':new Date()}):console['log']('✅\x20'+_0xbfde2a+_0x28aacc(0xf3)+_0x226d82+'\x20-\x20No\x20changes\x20needed');}}return Object[_0x28aacc(0x14d)](_0x3a4147)['forEach'](_0x46103e=>{const _0xc71748=_0x28aacc;_0x46103e[_0xc71748(0x115)]('Top\x20')&&_0x46103e['endsWith'](_0xc71748(0x163))&&(!_0xce8108[_0x46103e]&&console['log']('✅\x20Preserving\x20existing\x20'+_0x46103e));}),_0xce8108;}async[a48_0xdd6c79(0x134)](_0x59846a,_0x416c40='D1'){const _0x2b6350=a48_0xdd6c79;try{const _0x2c9bbc=ribbonCache[_0x2b6350(0x11c)](_0x59846a,_0x416c40);if(_0x2c9bbc){const _0x14d10d=await this[_0x2b6350(0x146)](_0x59846a,_0x416c40,_0x2c9bbc);if(Object['keys'](_0x14d10d)['length']>0x0){console[_0x2b6350(0x13b)](_0x2b6350(0x13d)+_0x59846a),await this['savePlayerRibbonsOptimized'](_0x59846a,_0x14d10d,_0x416c40);const _0x4373d0={..._0x2c9bbc,..._0x14d10d};return ribbonCache['setCachedData'](_0x59846a,_0x416c40,_0x4373d0,0x0),_0x4373d0;}return _0x2c9bbc;}const [_0x4e5481,_0x4398ba]=await Promise['all']([this['getPlayerDataCached'](_0x59846a,_0x416c40),this[_0x2b6350(0x10c)](_0x59846a,_0x416c40)]);if(!_0x4e5481)return{};const _0x56f831=_0x4e5481['matchesPlayed']||0x0,_0x5b6ac6=await this['evaluateTopRankRibbon'](_0x59846a,_0x416c40,_0x4398ba);if(!ribbonCache['shouldRefreshCache'](_0x59846a,_0x416c40,_0x56f831)){if(Object['keys'](_0x5b6ac6)['length']>0x0){await this[_0x2b6350(0x168)](_0x59846a,_0x5b6ac6,_0x416c40);const _0x54a5d9={..._0x4398ba,..._0x5b6ac6};return ribbonCache['setCachedData'](_0x59846a,_0x416c40,_0x54a5d9,_0x56f831),_0x54a5d9;}return ribbonCache['setCachedData'](_0x59846a,_0x416c40,_0x4398ba,_0x56f831),_0x4398ba;}const _0x15b587=await this['getPlayerMatchesOptimized'](_0x59846a,_0x416c40),_0x29a53a=await this['evaluateAllRibbonsFromData'](_0x15b587,_0x4e5481,_0x4398ba,_0x416c40);Object['assign'](_0x29a53a,_0x5b6ac6);Object['keys'](_0x29a53a)['length']>0x0&&(console['log']('💾\x20Saving\x20'+Object['keys'](_0x29a53a)[_0x2b6350(0x10f)]+'\x20new/updated\x20ribbons\x20for\x20'+_0x59846a),await this['savePlayerRibbonsOptimized'](_0x59846a,_0x29a53a,_0x416c40));const _0x5bebf9={..._0x4398ba,..._0x29a53a};return ribbonCache['setCachedData'](_0x59846a,_0x416c40,_0x5bebf9,_0x15b587['length']),_0x5bebf9;}catch(_0x3eeb7b){return console[_0x2b6350(0x10a)](_0x2b6350(0x13f),_0x3eeb7b),{};}}async[a48_0xdd6c79(0x132)](_0xbfd8e4,_0x8b4e6,_0x21f546){const _0x533358=a48_0xdd6c79,_0x183ae0=_0xbfd8e4['winnerUsername']===_0x8b4e6;if(!_0x183ae0)return![];const _0x5a5084=_0xbfd8e4['loserUsername'],[_0x13b16a,_0x5babf5]=await Promise[_0x533358(0x12d)]([this['getPlayerDataCached'](_0x8b4e6,_0x21f546),this['getPlayerDataCached'](_0x5a5084,_0x21f546)]);if(!_0x13b16a||!_0x5babf5)return console['log'](_0x533358(0x14b)+_0x8b4e6+'\x20or\x20'+_0x5a5084),![];const _0x380c70=_0x13b16a['eloRating']||0x0,_0x3331e3=_0x5babf5['eloRating']||0x0,_0x5007e5=getPlayerRankTier(_0x380c70),_0x41d418=getPlayerRankTier(_0x3331e3);console[_0x533358(0x13b)]('🔍\x20Checking\x20underdog:\x20Winner('+_0x8b4e6+'):\x20'+_0x380c70+'\x20ELO\x20('+getRankTierName(_0x5007e5)+')\x20vs\x20Loser('+_0x5a5084+_0x533358(0x165)+_0x3331e3+_0x533358(0x107)+getRankTierName(_0x41d418)+')');if(_0x41d418>_0x5007e5)return console['log']('🎯\x20UNDERDOG\x20VICTORY:\x20'+getRankTierName(_0x5007e5)+_0x533358(0x13e)+getRankTierName(_0x41d418)+'!'),!![];return console['log']('❌\x20Not\x20underdog:\x20'+getRankTierName(_0x5007e5)+'\x20vs\x20'+getRankTierName(_0x41d418)),![];}['isUnderdogVictoryFast'](_0x43f6a1,_0xfa1926,_0x53f7af,_0x58505c){const _0x8e6bc2=a48_0xdd6c79,_0x15aafa=_0x43f6a1['winnerUsername']===_0xfa1926;if(!_0x15aafa)return![];const _0x332b72=_0x43f6a1['loserUsername'],_0x30d1f9=_0x58505c['get'](_0x332b72);if(!_0x53f7af||!_0x30d1f9)return![];const _0x17fbe7=_0x53f7af['eloRating']||0x0,_0xdccf92=_0x30d1f9['eloRating']||0x0,_0x4653f6=getPlayerRankTier(_0x17fbe7),_0x148ae6=getPlayerRankTier(_0xdccf92);if(_0x148ae6>_0x4653f6)return console['log']('🎯\x20UNDERDOG:\x20'+getRankTierName(_0x4653f6)+'('+_0x17fbe7+_0x8e6bc2(0xf8)+getRankTierName(_0x148ae6)+'('+_0xdccf92+')'),!![];return![];}async['evaluateAllRibbonsFromData'](_0x5f2939,_0x4e8bc3,_0x5857fc,_0xa620a1){const _0x3d88e5=a48_0xdd6c79,_0xb14c42={},_0x34cd6a=_0x4e8bc3[_0x3d88e5(0x14c)],_0x2ad142={'totalMatches':_0x5f2939[_0x3d88e5(0x10f)],'wins':0x0,'rematchWins':0x0,'subgameMatches':0x0,'uniqueMaps':new Set(),'uniqueOpponents':new Set(),'underdogWins':0x0},_0x3e72d5=new Set();_0x5f2939['forEach'](_0x460e82=>{const _0x6104b1=_0x460e82['winnerUsername']===_0x34cd6a,_0x116b29=_0x6104b1?_0x460e82['loserUsername']:_0x460e82['winnerUsername'];if(_0x116b29)_0x3e72d5['add'](_0x116b29);}),console['log']('🚀\x20Bulk\x20loading\x20'+_0x3e72d5['size']+'\x20player\x20records\x20for\x20underdog\x20calculations...');const _0x283a3a=await this['bulkLoadPlayerData']([..._0x3e72d5,_0x34cd6a],_0xa620a1),_0x458e86=_0x283a3a['get'](_0x34cd6a);!_0x458e86&&console['log'](_0x3d88e5(0x12f)+_0x34cd6a);_0x5f2939[_0x3d88e5(0x169)](_0x446df5=>{const _0x58617c=_0x3d88e5,_0x414585=_0x446df5['winnerUsername']===_0x34cd6a,_0x466911=_0x414585?_0x446df5['loserUsername']:_0x446df5['winnerUsername'];_0x414585&&(_0x2ad142[_0x58617c(0x159)]++,_0x446df5['subgameType']==='Rematch'&&_0x2ad142['rematchWins']++,this['isUnderdogVictoryFast'](_0x446df5,_0x34cd6a,_0x458e86,_0x283a3a)&&_0x2ad142['underdogWins']++),_0x446df5['subgameType']&&_0x446df5[_0x58617c(0x116)]!==_0x58617c(0xfc)&&_0x2ad142[_0x58617c(0x108)]++,_0x446df5['mapPlayed']&&_0x2ad142['uniqueMaps'][_0x58617c(0xfb)](_0x446df5['mapPlayed']),_0x466911&&_0x2ad142['uniqueOpponents']['add'](_0x466911);}),console['log']('🎯\x20Found\x20'+_0x2ad142[_0x3d88e5(0x12b)]+_0x3d88e5(0x11f)+_0x34cd6a);const _0x3ca61f=_0x2ad142['totalMatches']>0x0?_0x2ad142['wins']/_0x2ad142['totalMatches']*0x64:0x0,_0x3ba2f9=[['Overachiever\x20Ribbon',this['evaluateOverachieverRibbonFromCount'](_0x2ad142['totalMatches'],_0x5857fc)],['Rematch\x20Ribbon',this['evaluateRematchRibbonFromCount'](_0x2ad142['rematchWins'],_0x5857fc)],['Sub-Gamer\x20Ribbon',this['evaluateSubGamerRibbonFromCount'](_0x2ad142['subgameMatches'],_0x5857fc)],['Explorer\x20Ribbon',this[_0x3d88e5(0x15b)](_0x2ad142['uniqueMaps']['size'],_0x5857fc)],[_0x3d88e5(0x131),this['evaluateSocialiteRibbonFromCount'](_0x2ad142[_0x3d88e5(0x109)]['size'],_0x5857fc)],[_0x3d88e5(0xf1),this['evaluateBrickWallRibbonFromWinRate'](_0x3ca61f,_0x5857fc,_0x2ad142['totalMatches'])],[_0x3d88e5(0x154),this['evaluateUnderdogRibbonFromCount'](_0x2ad142['underdogWins'],_0x5857fc)]];_0x3ba2f9['forEach'](([_0xf29b6f,_0xc0bc2c])=>{_0xc0bc2c&&(_0xb14c42[_0xf29b6f]=_0xc0bc2c);});const _0x3a9e1e=Object['keys'](_0x5857fc)['length']+Object['keys'](_0xb14c42)['length'],_0x1c0bb8=this['evaluateCollectorRibbonFromCount'](_0x3a9e1e,_0x5857fc);return _0x1c0bb8&&(_0xb14c42['Collector\x20Ribbon']=_0x1c0bb8),_0xb14c42;}async['getPlayerMatchesOptimized'](_0x83da4c,_0xa45bf3){const _0x551e21=a48_0xdd6c79,_0xc8756d=matchCache['getCachedMatches'](_0x83da4c,_0xa45bf3);if(_0xc8756d)return _0xc8756d;try{const _0x62c361=_0xa45bf3==='D1'?'approvedMatches':_0xa45bf3==='D2'?'approvedMatchesD2':'approvedMatchesD3',_0x24340a=collection(db,_0x62c361),[_0x3fc776,_0xab9d04]=await Promise['all']([getDocs(query(_0x24340a,where('winnerUsername','==',_0x83da4c))),getDocs(query(_0x24340a,where('loserUsername','==',_0x83da4c)))]),_0x443537=new Set(),_0x161a92=[];return _0x3fc776['forEach'](_0x349d93=>{if(!_0x443537['has'](_0x349d93['id'])){_0x443537['add'](_0x349d93['id']);const _0x419884={'id':_0x349d93['id'],..._0x349d93['data']()};if(!_0x419884['winnerRating'])_0x419884['winnerRating']=0x0;if(!_0x419884['loserRating'])_0x419884['loserRating']=0x0;_0x161a92['push'](_0x419884);}}),_0xab9d04['forEach'](_0x213630=>{const _0x4ec4aa=a48_0x2911;if(!_0x443537['has'](_0x213630['id'])){_0x443537['add'](_0x213630['id']);const _0x5a0422={'id':_0x213630['id'],..._0x213630[_0x4ec4aa(0x155)]()};if(!_0x5a0422['winnerRating'])_0x5a0422[_0x4ec4aa(0x113)]=0x0;if(!_0x5a0422[_0x4ec4aa(0x11a)])_0x5a0422['loserRating']=0x0;_0x161a92['push'](_0x5a0422);}}),matchCache[_0x551e21(0x160)](_0x83da4c,_0xa45bf3,_0x161a92),_0x161a92;}catch(_0x12645a){return console['error']('❌\x20Error\x20fetching\x20matches:',_0x12645a),[];}}async[a48_0xdd6c79(0x161)](_0x38bd78,_0x17668b){const _0x2e98b8=a48_0xdd6c79;try{const _0x2909a2=_0x17668b==='D1'?_0x2e98b8(0x140):_0x17668b==='D2'?_0x2e98b8(0x14f):'playersD3',_0x27413f=collection(db,_0x2909a2),_0x568ea5=query(_0x27413f,where('username','==',_0x38bd78),limit(0x1)),_0x53aa10=await getDocs(_0x568ea5);if(_0x53aa10[_0x2e98b8(0xfa)])return console['log']('❌\x20No\x20player\x20data\x20found\x20for\x20'+_0x38bd78+'\x20in\x20'+_0x2909a2),null;const _0x2ec427=_0x53aa10[_0x2e98b8(0x12a)][0x0]['data']();return _0x2ec427[_0x2e98b8(0xf9)]!==undefined&&(_0x2ec427['rating']=_0x2ec427['eloRating']),console[_0x2e98b8(0x13b)]('✅\x20Found\x20player\x20data\x20for\x20'+_0x38bd78+':\x20ELO\x20'+_0x2ec427['eloRating']+_0x2e98b8(0x104)+_0x2ec427['position']),_0x2ec427;}catch(_0xca3508){return console[_0x2e98b8(0x10a)]('Error\x20getting\x20player\x20data\x20for\x20'+_0x38bd78+':',_0xca3508),null;}}async['getPlayerRibbonsCached'](_0x308818,_0x3f422f){const _0x5c1a73=a48_0xdd6c79;try{const _0x2db445='playerRibbons'+(_0x3f422f==='D1'?'':_0x3f422f),_0x46b44f=doc(db,_0x2db445,_0x308818),_0x2488c3=await getDoc(_0x46b44f);return _0x2488c3['exists']()?_0x2488c3[_0x5c1a73(0x155)]()[_0x5c1a73(0x10e)]||{}:{};}catch(_0x3f6b02){return console['error']('Error\x20getting\x20player\x20ribbons:',_0x3f6b02),{};}}async['savePlayerRibbonsOptimized'](_0x43dd8e,_0x898f5d,_0x466e5b){const _0xa7dd0d=a48_0xdd6c79;try{const _0x4e1f3f='playerRibbons'+(_0x466e5b==='D1'?'':_0x466e5b),_0x12f8e2=doc(db,_0x4e1f3f,_0x43dd8e),_0xd59758=await this[_0xa7dd0d(0x10c)](_0x43dd8e,_0x466e5b),_0x1f2cb7={..._0xd59758,..._0x898f5d};await setDoc(_0x12f8e2,{'username':_0x43dd8e,'ladder':_0x466e5b,'ribbons':_0x1f2cb7,'lastUpdated':new Date()},{'merge':!![]});}catch(_0x2294e8){console['error'](_0xa7dd0d(0xee),_0x2294e8);}}['evaluateOverachieverRibbonFromCount'](_0x5972b9,_0x56d15b){const _0x54c266=a48_0xdd6c79,_0xc24814=_0x56d15b[_0x54c266(0x126)]||{'level':0x0},_0x49b7e2=RIBBON_DEFINITIONS['Overachiever\x20Ribbon'][_0x54c266(0xef)],_0x54427f=_0x49b7e2['findIndex'](_0x146150=>_0x5972b9<_0x146150),_0x43adba=_0x54427f===-0x1?_0x49b7e2['length']:_0x54427f;if(_0x43adba>_0xc24814['level'])return{'level':_0x43adba,'awardedAt':new Date()};return null;}['evaluateRematchRibbonFromCount'](_0x42911d,_0x302ad6){const _0x2db327=a48_0xdd6c79;if(_0x42911d===0x0)return null;const _0x680d0f=_0x302ad6['Rematch\x20Ribbon']||{'level':0x0};if(_0x42911d>_0x680d0f[_0x2db327(0x152)])return{'level':_0x42911d,'awardedAt':new Date()};return null;}['evaluateSubGamerRibbonFromCount'](_0x56d98d,_0x214a8b){const _0x3ed0c7=a48_0xdd6c79,_0x184beb=_0x214a8b['Sub-Gamer\x20Ribbon']||{'level':0x0},_0xcf375=RIBBON_DEFINITIONS['Sub-Gamer\x20Ribbon']['levels'],_0x15a204=_0xcf375['findIndex'](_0x2340fa=>_0x56d98d<_0x2340fa),_0x5e6bed=_0x15a204===-0x1?_0xcf375[_0x3ed0c7(0x10f)]:_0x15a204;if(_0x5e6bed>_0x184beb['level'])return{'level':_0x5e6bed,'awardedAt':new Date()};return null;}[a48_0xdd6c79(0x15b)](_0x261271,_0x1f0050){const _0xd44919=a48_0xdd6c79,_0xaec75b=_0x1f0050['Explorer\x20Ribbon']||{'level':0x0},_0x54b281=RIBBON_DEFINITIONS[_0xd44919(0x138)]['levels'],_0x58eff5=_0x54b281['findIndex'](_0x25c2f7=>_0x261271<_0x25c2f7),_0x36441e=_0x58eff5===-0x1?_0x54b281['length']:_0x58eff5;if(_0x36441e>_0xaec75b[_0xd44919(0x152)])return{'level':_0x36441e,'awardedAt':new Date()};return null;}['evaluateSocialiteRibbonFromCount'](_0x3f8b40,_0x387f03){const _0x54684f=a48_0xdd6c79,_0x2d8523=_0x387f03['Socialite\x20Ribbon']||{'level':0x0},_0x134a2b=RIBBON_DEFINITIONS['Socialite\x20Ribbon']['levels'],_0xcc3a5e=_0x134a2b['findIndex'](_0x2d4568=>_0x3f8b40<_0x2d4568),_0x21e77b=_0xcc3a5e===-0x1?_0x134a2b[_0x54684f(0x10f)]:_0xcc3a5e;if(_0x21e77b>_0x2d8523['level'])return{'level':_0x21e77b,'awardedAt':new Date()};return null;}['evaluateBrickWallRibbonFromWinRate'](_0x50fcc7,_0x38f55b,_0x2e0455){const _0x3b2a7c=a48_0xdd6c79;if(_0x2e0455<0x32)return console[_0x3b2a7c(0x13b)]('⚠️\x20Brick\x20Wall\x20ribbon\x20requires\x2050+\x20matches\x20(player\x20has\x20'+_0x2e0455+')'),null;const _0x247c2b=_0x38f55b['Brick\x20Wall']||{'level':0x0},_0x1acf4a=RIBBON_DEFINITIONS['Brick\x20Wall']['levels'],_0x1bd8b4=_0x1acf4a['findIndex'](_0x243da5=>_0x50fcc7<_0x243da5),_0x2b5bbd=_0x1bd8b4===-0x1?_0x1acf4a['length']:_0x1bd8b4;if(_0x2b5bbd>_0x247c2b['level'])return console['log']('🏆\x20Brick\x20Wall\x20ribbon\x20awarded:\x20'+_0x50fcc7['toFixed'](0x1)+'%\x20win\x20rate\x20over\x20'+_0x2e0455+'\x20matches'),{'level':_0x2b5bbd,'awardedAt':new Date(),'winRate':_0x50fcc7,'matchesPlayed':_0x2e0455};return null;}[a48_0xdd6c79(0x16a)](_0x3c045b,_0x1605f8){const _0x537838=_0x1605f8['Collector\x20Ribbon']||{'level':0x0},_0x1dcffc=RIBBON_DEFINITIONS['Collector\x20Ribbon']['levels'],_0x17af91=_0x1dcffc['findIndex'](_0x66fb54=>_0x3c045b<_0x66fb54),_0x3c40b3=_0x17af91===-0x1?_0x1dcffc['length']:_0x17af91;if(_0x3c40b3>_0x537838['level'])return{'level':_0x3c40b3,'awardedAt':new Date()};return null;}['evaluateUnderdogRibbonFromCount'](_0x153d47,_0x7102ad){const _0x3c3925=a48_0xdd6c79;if(_0x153d47===0x0)return null;const _0xc71427=_0x7102ad['Underdog\x20Ribbon']||{'level':0x0},_0x5a4b00=RIBBON_DEFINITIONS['Underdog\x20Ribbon'][_0x3c3925(0xef)];let _0x4a0c9f=0x0;for(let _0x5a0114=0x0;_0x5a0114<_0x5a4b00['length'];_0x5a0114++){if(_0x153d47>=_0x5a4b00[_0x5a0114])_0x4a0c9f=_0x5a0114+0x1;else break;}if(_0x4a0c9f>_0xc71427['level'])return console['log']('🏆\x20Underdog\x20Ribbon\x20upgrade:\x20Level\x20'+_0xc71427['level']+_0x3c3925(0x10d)+_0x4a0c9f+'\x20('+_0x153d47+'\x20underdog\x20wins)'),{'level':_0x4a0c9f,'awardedAt':new Date()};return null;}}function getPlayerRankTier(_0x21a5fe){if(_0x21a5fe===undefined||_0x21a5fe===null)return 0x0;const _0x381b4f=Number(_0x21a5fe);if(isNaN(_0x381b4f))return 0x0;if(_0x381b4f>=0x7d0)return 0x4;if(_0x381b4f>=0x708)return 0x3;if(_0x381b4f>=0x640)return 0x2;if(_0x381b4f>=0x578)return 0x1;return 0x0;}function getRankTierName(_0x533600){const _0xc887ad=a48_0xdd6c79,_0x161ac9=[_0xc887ad(0x11d),'Bronze',_0xc887ad(0x164),'Gold',_0xc887ad(0x122)];return _0x161ac9[_0x533600]||'Unranked';}function a48_0x2911(_0x7eb93c,_0x93d2a6){const _0x182da3=a48_0x2997();return a48_0x2911=function(_0x168f51,_0x506788){_0x168f51=_0x168f51-0xed;let _0x2997be=_0x182da3[_0x168f51];return _0x2997be;},a48_0x2911(_0x7eb93c,_0x93d2a6);}const ribbonSystem=new RibbonSystem(),ribbonCache=new RibbonCacheManager(),matchCache=new MatchCacheManager();typeof window!=='undefined'&&(window['getRibbonCacheStats']=()=>{const _0x2f00d5=a48_0xdd6c79;return{'ribbon':ribbonCache[_0x2f00d5(0x15f)](),'match':matchCache[_0x2f00d5(0x15f)]()};});function a48_0x2997(){const _0x40038d=['removeItem','Error\x20saving\x20ribbons:','levels','<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20silver-star\x22></i>','Brick\x20Wall','Claimed\x20the\x20highest\x20spot\x20on\x20the\x20ladder\x20for\x20Bronze\x20rank','\x20already\x20has\x20','join','lastCleanup','</div>','image',')\x20beat\x20','eloRating','empty','add','Standard','has','now','set','\x20Tier:\x20','../images/ribbons/Explorer.png','../images/ribbons/BrickWall.png','description',',\x20Position\x20','memoryCache','timestamp','\x20ELO\x20(','subgameMatches','uniqueOpponents','error','evaluateAllRibbonsFromData','getPlayerRibbonsCached','\x20→\x20','ribbons','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22military-ribbon\x22\x20data-tooltip=\x22','constructor','{}.constructor(\x22return\x20this\x22)(\x20)','winnerRating','mapPlayed','startsWith','subgameType','🎯\x20Found\x20','shouldRefreshCache','\x20is\x20#1:\x20','loserRating','\x20is\x20Unranked\x20(','getCachedData','Unranked',';\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20underdog\x20victories\x20for\x20','isUnderdogVictoryFast','trace','Emerald','\x20players\x20from\x20','<div\x20class=\x22ribbon-devices\x22>','CLEANUP_INTERVAL','Overachiever\x20Ribbon','../images/ribbons/Collector.png','\x20players,\x20Top:\x20','setCachedData','docs','underdogWins','clearOldCache','all','getCachedMatches','⚠️\x20No\x20current\x20player\x20data\x20found\x20for\x20','exception','Socialite\x20Ribbon','isUnderdogVictory','autoCleanup','evaluateAllRibbonsForPlayerOptimized','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getCacheKey','❌\x20No\x20ELO\x20rating\x20data\x20for\x20','Explorer\x20Ribbon','\x20earned\x20','console','log','delete','🆕\x20New\x20top\x20rank\x20achievements\x20found\x20for\x20cached\x20player\x20','\x20beat\x20','❌\x20Error\x20in\x20ribbon\x20evaluation:','players','batchTimer','playersD3','push','CACHE_KEY_PREFIX','matchCache','evaluateTopRankRibbon','winnerUsername','\x20player\x20records\x20for\x20underdog\x20calculations...','level-5-plus','#FFD700','⚠️\x20Missing\x20player\x20data\x20for\x20','username','keys','level-1','playersD2','Beat\x205\x20unique\x20pilots\x20in\x20a\x20rank\x20(including\x20your\x20own)','evaluateBrickWallRibbonFromWinRate','level','\x20status\x20for\x20','Underdog\x20Ribbon','data','return\x20(function()\x20','#96CEB4','get','wins','parse','evaluateExplorerRibbonFromCount','Play\x20over\x2050\x20subgame\x20matches','info','evaluateOverachieverRibbonFromCount','getCacheStats','setCachedMatches','getPlayerDataCached','🚀\x20Bulk\x20loading\x20','\x20Pilot','Silver','):\x20','toLocaleTimeString','\x20ELO)','savePlayerRibbonsOptimized','forEach','evaluateCollectorRibbonFromCount','entries','level-3','prototype','size'];a48_0x2997=function(){return _0x40038d;};return a48_0x2997();}export async function evaluatePlayerRibbons(_0x4eb927,_0x24cd37='D1'){const _0x1f826c=a48_0xdd6c79;return await ribbonSystem[_0x1f826c(0x134)](_0x4eb927,_0x24cd37);}export function getRibbonHTML(_0x2bf132,_0x3a6423){const _0x383531=a48_0xdd6c79,_0x556da2=RIBBON_DEFINITIONS[_0x2bf132];if(!_0x556da2)return'';const _0x166d7f=_0x3a6423['level']||0x1,_0x385f30=_0x2bf132['replace']('\x20Ribbon','')['replace']('\x20Badge',''),_0x3c239a=_0x5790cb=>{const _0x5d4a8e=a48_0x2911;if(_0x5790cb<=0x1)return _0x5d4a8e(0x14e);if(_0x5790cb<=0x2)return'level-2';if(_0x5790cb<=0x3)return _0x5d4a8e(0x16c);if(_0x5790cb<=0x4)return'level-4';return _0x5d4a8e(0x149);},_0x36022f=_0x32ec8a=>{const _0x42a11e=a48_0x2911;if(_0x32ec8a<=0x1)return'';const _0x4aee58=[];if(_0x32ec8a>=0x2&&_0x32ec8a<=0x4){const _0x5936a5=Math['min'](_0x32ec8a-0x1,0x3);for(let _0x7ea580=0x0;_0x7ea580<_0x5936a5;_0x7ea580++){_0x4aee58['push']('<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20bronze-star\x22></i>');}}if(_0x32ec8a>=0x5&&_0x32ec8a<=0x7){_0x4aee58[_0x42a11e(0x143)](_0x42a11e(0xf0));const _0x5295f2=Math['min'](_0x32ec8a-0x5,0x2);for(let _0x387954=0x0;_0x387954<_0x5295f2;_0x387954++){_0x4aee58['push']('<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20bronze-star\x22></i>');}}return _0x32ec8a>=0x8&&_0x4aee58['push']('<i\x20class=\x22fas\x20fa-star\x20ribbon-device\x20gold-star\x22></i>'),_0x4aee58['length']>0x0?_0x42a11e(0x124)+_0x4aee58[_0x42a11e(0xf4)]('')+_0x42a11e(0xf6):'';},_0x576868=_0x556da2[_0x383531(0x103)]+'\x20-\x20Level\x20'+_0x166d7f;return _0x383531(0x110)+_0x576868+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-image-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x556da2[_0x383531(0xf7)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x2bf132+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22ribbon-image\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27;\x20this.nextElementSibling.style.display=\x27block\x27;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-fallback\x22\x20style=\x22display:\x20none;\x20background:\x20'+_0x556da2['color']+_0x383531(0x11e)+_0x385f30['substring'](0x0,0x6)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x36022f(_0x166d7f)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22ribbon-name\x22>'+_0x385f30+_0x383531(0x135)+(_0x166d7f>0x1?'<div\x20class=\x22ribbon-level-indicator\x20'+_0x3c239a(_0x166d7f)+'\x22>'+_0x166d7f+_0x383531(0xf6):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';}