function a47_0x3951(_0x3b3a94,_0x16ed59){const _0x4c00e5=a47_0xa672();return a47_0x3951=function(_0x5f3e4b,_0x2fc1df){_0x5f3e4b=_0x5f3e4b-0x15a;let _0xa67277=_0x4c00e5[_0x5f3e4b];return _0xa67277;},a47_0x3951(_0x3b3a94,_0x16ed59);}const a47_0x5f3e4b=(function(){let _0x2cbaae=!![];return function(_0x5c0126,_0x3e5a1c){const _0xff8778=_0x2cbaae?function(){const _0x1ae2c0=a47_0x3951;if(_0x3e5a1c){const _0x3aa268=_0x3e5a1c[_0x1ae2c0(0x15e)](_0x5c0126,arguments);return _0x3e5a1c=null,_0x3aa268;}}:function(){};return _0x2cbaae=![],_0xff8778;};}()),a47_0x4c00e5=a47_0x5f3e4b(this,function(){const _0x33aadb=a47_0x3951,_0x1db96d=function(){const _0x42fc0b=a47_0x3951;let _0x382a32;try{_0x382a32=Function(_0x42fc0b(0x15f)+_0x42fc0b(0x15d)+');')();}catch(_0x1162c4){_0x382a32=window;}return _0x382a32;},_0xd97e5c=_0x1db96d(),_0xbcf32d=_0xd97e5c['console']=_0xd97e5c['console']||{},_0x17ef7b=[_0x33aadb(0x15c),'warn','info','error','exception','table',_0x33aadb(0x15a)];for(let _0x52df5c=0x0;_0x52df5c<_0x17ef7b['length'];_0x52df5c++){const _0x159b6e=a47_0x5f3e4b['constructor']['prototype']['bind'](a47_0x5f3e4b),_0x244279=_0x17ef7b[_0x52df5c],_0x4c757e=_0xbcf32d[_0x244279]||_0x159b6e;_0x159b6e['__proto__']=a47_0x5f3e4b[_0x33aadb(0x163)](a47_0x5f3e4b),_0x159b6e['toString']=_0x4c757e[_0x33aadb(0x168)]['bind'](_0x4c757e),_0xbcf32d[_0x244279]=_0x159b6e;}});a47_0x4c00e5();import{db}from'./firebase-config.js';function a47_0xa672(){const _0x287d1c=['trace','Just\x20now','log','{}.constructor(\x22return\x20this\x22)(\x20)','apply','return\x20(function()\x20','Error\x20in\x20queue\x20listener:','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','length','bind','data','error','readyPlayers','getElementById','toString','username','lastUpdated'];a47_0xa672=function(){return _0x287d1c;};return a47_0xa672();}import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,'readyPlayers'),activePlayersQuery=query(readyPlayersRef,where('isReady','==',!![]));function updateQueueDisplay(_0x7259e5){const _0x184521=a47_0x3951,_0x2456f0=document[_0x184521(0x167)]('queue-container');if(!_0x2456f0)return;if(_0x7259e5[_0x184521(0x162)]===0x0){_0x2456f0['style']['display']='none';return;}_0x2456f0['style']['display']='block';let _0x32dae1='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20';_0x7259e5['forEach'](_0xca5a6f=>{const _0x27350e=_0x184521;_0x32dae1+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>'+(_0xca5a6f[_0x27350e(0x169)]||'Unknown\x20Player')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>'+formatQueueTime(_0xca5a6f['lastUpdated'])+_0x27350e(0x161);}),_0x32dae1+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x2456f0['innerHTML']=_0x32dae1;}function formatQueueTime(_0x4ba9a9){const _0x31eb6c=a47_0x3951;if(!_0x4ba9a9)return'Just\x20now';const _0x20e8c0=_0x4ba9a9['toDate']?_0x4ba9a9['toDate']():new Date(_0x4ba9a9),_0x262413=new Date(),_0x516d17=Math['floor']((_0x262413-_0x20e8c0)/0xea60);if(_0x516d17<0x1)return _0x31eb6c(0x15b);return _0x516d17+'m\x20in\x20queue';}async function checkQueueTimeout(_0x5df2d1){const _0x26f70e=a47_0x3951;if(!_0x5df2d1['lastUpdated'])return;const _0x5cb5ed=_0x5df2d1['lastUpdated']['toDate']?_0x5df2d1['lastUpdated']['toDate']():new Date(_0x5df2d1['lastUpdated']),_0x306dd7=new Date(),_0x1f9887=Math['floor']((_0x306dd7-_0x5cb5ed)/0xea60);if(_0x1f9887>=0x1e)try{const _0x26faf3=doc(db,_0x26f70e(0x166),_0x5df2d1['id']);await updateDoc(_0x26faf3,{'isReady':![]});}catch(_0x324385){console[_0x26f70e(0x165)]('Error\x20removing\x20player\x20from\x20queue:',_0x324385);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x518fac=>{const _0x4639ed=[];_0x518fac['forEach'](_0x3b0a2c=>{const _0x224764=a47_0x3951,_0xf1fa61=_0x3b0a2c[_0x224764(0x164)]();if(_0xf1fa61['isReady']===!![]){const _0x3c6bae={'id':_0x3b0a2c['id'],'username':_0xf1fa61[_0x224764(0x169)],'lastUpdated':_0xf1fa61[_0x224764(0x16a)]||new Date()};_0x4639ed['push'](_0x3c6bae),checkQueueTimeout(_0x3c6bae);}}),updateQueueDisplay(_0x4639ed);},_0x49970a=>{const _0xfa79ea=a47_0x3951;console['error'](_0xfa79ea(0x160),_0x49970a);});window['addEventListener']('unload',()=>{unsubscribe();});