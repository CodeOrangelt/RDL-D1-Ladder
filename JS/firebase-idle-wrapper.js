const a19_0xedf298=a19_0x408d,a19_0x1d3265=(function(){let _0x504f2a=!![];return function(_0x35692e,_0x45b18b){const _0x6b79a3=_0x504f2a?function(){const _0x89f61e=a19_0x408d;if(_0x45b18b){const _0x3bc3e5=_0x45b18b[_0x89f61e(0x1c6)](_0x35692e,arguments);return _0x45b18b=null,_0x3bc3e5;}}:function(){};return _0x504f2a=![],_0x6b79a3;};}()),a19_0x3aa78f=a19_0x1d3265(this,function(){const _0x102570=a19_0x408d;let _0x548338;try{const _0x159160=Function('return\x20(function()\x20'+_0x102570(0x1c5)+');');_0x548338=_0x159160();}catch(_0x4c32fd){_0x548338=window;}const _0x345e93=_0x548338['console']=_0x548338[_0x102570(0x1d5)]||{},_0x1d5640=['log','warn',_0x102570(0x1d3),'error',_0x102570(0x1ae),'table','trace'];for(let _0x4c99ac=0x0;_0x4c99ac<_0x1d5640['length'];_0x4c99ac++){const _0x486b0f=a19_0x1d3265['constructor'][_0x102570(0x1bf)][_0x102570(0x1c0)](a19_0x1d3265),_0x5833cb=_0x1d5640[_0x4c99ac],_0x184184=_0x345e93[_0x5833cb]||_0x486b0f;_0x486b0f['__proto__']=a19_0x1d3265['bind'](a19_0x1d3265),_0x486b0f['toString']=_0x184184[_0x102570(0x1bd)]['bind'](_0x184184),_0x345e93[_0x5833cb]=_0x486b0f;}});a19_0x3aa78f();function a19_0x408d(_0xfe1947,_0x293a49){const _0x3aa78f=a19_0x38ee();return a19_0x408d=function(_0x1d3265,_0xe9c05e){_0x1d3265=_0x1d3265-0x1aa;let _0x38ee55=_0x3aa78f[_0x1d3265];return _0x38ee55;},a19_0x408d(_0xfe1947,_0x293a49);}import{auth,db}from'./firebase-config.js';function a19_0x38ee(){const _0x4ac65e=['args','set','[FirebaseIdle]\x20Debug\x20mode\x20','RDL_SESSION_SUSPENDED','exception','error','[FirebaseIdle]\x20Error\x20resuming\x20listener:','executePendingOperations','[FirebaseIdle]\x20Resuming\x20listener:','resumeSession','finally','size','[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20','getDocument','addDocument','function','_suspendedListeners','[FirebaseIdle]\x20Active\x20listeners:\x20','[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20','toString','safeOperation','prototype','bind','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','blockedOperations','query','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','{}.constructor(\x22return\x20this\x22)(\x20)','apply','pendingOperations','pendingTimeout','operationType','random','log','suspendSession','[FirebaseIdle]\x20Resuming\x20listeners:','getDocuments','debug','clear','Executing\x20pending\x20','textContent','info','warn','console','activeListeners','style','createListener'];a19_0x38ee=function(){return _0x4ac65e;};return a19_0x38ee();}import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x55700e=a19_0x408d;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this['pendingTimeout']=null,this[_0x55700e(0x1c2)]=0x0,this['debug']=![];}['checkSessionActive'](){const _0x4f449d=a19_0x408d;if(window['RDL_SESSION_SUSPENDED']===!![])return console[_0x4f449d(0x1cb)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this[_0x4f449d(0x1c2)]||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0x4f449d(0x1d4)]('[FirebaseIdle]\x20Blocked\x20'+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x30fd9b,_0x18430d,..._0x2347cb){const _0x36cfc1=a19_0x408d;if(!this['checkSessionActive']()){const _0x41497e=_0x18430d+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations']['set'](_0x41497e,{'operation':_0x30fd9b,'operationType':_0x18430d,'args':_0x2347cb}),!this['pendingTimeout']&&(this[_0x36cfc1(0x1c8)]=setTimeout(()=>{const _0x23f2a5=_0x36cfc1;this[_0x23f2a5(0x1c7)]['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x30fd9b(..._0x2347cb);}catch(_0x3c51b2){if(_0x3c51b2['code']==='unavailable'||_0x3c51b2['code']==='resource-exhausted'||_0x3c51b2['message']&&_0x3c51b2['message']['includes']('network'))return handleNetworkError(),null;throw _0x3c51b2;}}async['getDocument'](_0x29da68){const _0x2c7ef3=a19_0x408d;return this[_0x2c7ef3(0x1be)](getDoc,'get',_0x29da68);}async[a19_0xedf298(0x1ce)](_0xff99b1){const _0x5822fe=a19_0xedf298;return this['safeOperation'](getDocs,_0x5822fe(0x1c3),_0xff99b1);}async[a19_0xedf298(0x1b8)](_0x51ab43,_0x9148e6){return this['safeOperation'](addDoc,'add',_0x51ab43,_0x9148e6);}async['setDocument'](_0x34c3b0,_0x4e7ab6,_0x5777f8={}){return this['safeOperation'](setDoc,'set',_0x34c3b0,_0x4e7ab6,_0x5777f8);}async['updateDocument'](_0x286458,_0x416bcb){return this['safeOperation'](updateDoc,'update',_0x286458,_0x416bcb);}async['deleteDocument'](_0x55f4b3){return this['safeOperation'](deleteDoc,'delete',_0x55f4b3);}['suspendAllListeners'](){const _0x181bf4=a19_0xedf298;console[_0x181bf4(0x1cb)]('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this['activeListeners'][_0x181bf4(0x1b5)]),this[_0x181bf4(0x1ba)]=new Map(this['activeListeners']),this['activeListeners']['forEach']((_0x4e037e,_0x46cd75)=>{console['log']('[FirebaseIdle]\x20Suspending\x20listener:',_0x46cd75);if(typeof _0x4e037e==='function')try{_0x4e037e(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x46cd75);}catch(_0x23901d){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x46cd75,_0x23901d);}}),this['activeListeners']['clear']();if(this['debug']){const _0x3505e5=document['createElement']('div');_0x3505e5['id']='firebase-suspend-indicator',_0x3505e5[_0x181bf4(0x1d7)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3505e5[_0x181bf4(0x1d2)]='Firebase:\x20Suspended',document['body']['appendChild'](_0x3505e5);}console[_0x181bf4(0x1cb)]('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x510717=a19_0xedf298;if(!this[_0x510717(0x1ba)]||this[_0x510717(0x1ba)]['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console[_0x510717(0x1cb)](_0x510717(0x1cd),this['_suspendedListeners']['size']),this['_suspendedListeners']['forEach']((_0x96be2a,_0xa2e5c5)=>{const _0x26cdaa=_0x510717;console['log'](_0x26cdaa(0x1b2),_0xa2e5c5);try{if(typeof _0x96be2a===_0x26cdaa(0x1b9)){console[_0x26cdaa(0x1d4)]('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0xa2e5c5);return;}const {query:_0x282e57,callback:_0x560f23,options:_0x5e67f4}=_0x96be2a;if(_0x282e57&&_0x560f23){const _0x4bec7e=onSnapshot(_0x282e57,_0x560f23,_0x5e67f4||{});this['activeListeners']['set'](_0xa2e5c5,_0x4bec7e),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0xa2e5c5);}}catch(_0x9ffc8f){console['error'](_0x26cdaa(0x1b0),_0xa2e5c5,_0x9ffc8f);}}),this['_suspendedListeners'][_0x510717(0x1d0)]();const _0x217ff1=document['getElementById']('firebase-suspend-indicator');_0x217ff1&&_0x217ff1['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}[a19_0xedf298(0x1d8)](_0x175a55,_0x43fe17,_0x506772={},_0x42ccf8=null){const _0xa8ddfb=a19_0xedf298,_0x1ec115=_0x42ccf8||'listener_'+Date['now']()+'_'+Math[_0xa8ddfb(0x1ca)]()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console['log']('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x1ec115);if(!this['checkSessionActive']())return console['log'](_0xa8ddfb(0x1bc)+_0x1ec115),()=>{};try{const _0x127d86=onSnapshot(_0x175a55,_0x43fe17,_0x506772);return this['activeListeners'][_0xa8ddfb(0x1ab)](_0x1ec115,{'unsubscribe':_0x127d86,'query':_0x175a55,'callback':_0x43fe17,'options':_0x506772}),this[_0xa8ddfb(0x1cf)]&&(console[_0xa8ddfb(0x1cb)]('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x1ec115),console['log'](_0xa8ddfb(0x1bb)+this['activeListeners']['size'])),()=>{const _0x4beed9=_0xa8ddfb;this[_0x4beed9(0x1cf)]&&console['log']('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x1ec115);try{_0x127d86(),this[_0x4beed9(0x1d6)]['delete'](_0x1ec115),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x1ec115),console[_0x4beed9(0x1cb)](_0x4beed9(0x1bb)+this[_0x4beed9(0x1d6)]['size']));}catch(_0x456c89){console[_0x4beed9(0x1af)](_0x4beed9(0x1b6)+_0x1ec115+':',_0x456c89);}};}catch(_0x3ab099){return console[_0xa8ddfb(0x1af)](_0xa8ddfb(0x1c4)+_0x1ec115+':',_0x3ab099),()=>{};}}[a19_0xedf298(0x1b1)](_0x14e6a8='all'){const _0xcf1b90=a19_0xedf298;console['log'](_0xcf1b90(0x1d1)+_0x14e6a8+'\x20operations:\x20'+this['pendingOperations']['size']+'\x20total\x20operations');const _0x578978=new Map(this[_0xcf1b90(0x1c7)]);this['pendingOperations']['clear'](),_0x578978['forEach']((_0x45caca,_0x1badce)=>{const _0x92e8bd=_0xcf1b90;_0x14e6a8==='all'||_0x45caca[_0x92e8bd(0x1c9)]===_0x14e6a8?(console['log']('Executing\x20delayed\x20'+_0x45caca[_0x92e8bd(0x1c9)]+'\x20operation'),this['safeOperation'](_0x45caca['operation'],_0x45caca['operationType'],..._0x45caca[_0x92e8bd(0x1aa)])['catch'](_0x1ff971=>console[_0x92e8bd(0x1af)]('Error\x20executing\x20pending\x20operation:',_0x1ff971))):this['pendingOperations'][_0x92e8bd(0x1ab)](_0x1badce,_0x45caca);});}['enableDebug'](_0x560540=!![]){const _0x41a3df=a19_0xedf298;this['debug']=_0x560540,console['log'](_0x41a3df(0x1ac)+(_0x560540?'enabled':'disabled'));if(_0x560540){const _0x5555f1=window['RDL_SESSION_SUSPENDED'];window[_0x41a3df(0x1ad)]=!![],console[_0x41a3df(0x1cb)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this[_0x41a3df(0x1b7)](doc(db,'system','test'))['then'](_0x46493d=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x46493d);})['catch'](_0x1b18e1=>{const _0x2ce068=_0x41a3df;console['log'](_0x2ce068(0x1c1),_0x1b18e1);})[_0x41a3df(0x1b4)](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x5555f1;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x58579c=a19_0xedf298,_0x3c8c7d=window[_0x58579c(0x1cc)]||function(){},_0x5afd1e=window['resumeSession']||function(){};window[_0x58579c(0x1cc)]=function(){_0x3c8c7d(),firebaseIdle['suspendAllListeners']();},window[_0x58579c(0x1b3)]=function(){_0x5afd1e(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;