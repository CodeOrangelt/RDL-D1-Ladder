const a19_0x39599e=a19_0x1b0b,a19_0x2a4e7e=(function(){let _0x3a92ac=!![];return function(_0x2180a0,_0x54fd34){const _0x514564=_0x3a92ac?function(){if(_0x54fd34){const _0xcd3e93=_0x54fd34['apply'](_0x2180a0,arguments);return _0x54fd34=null,_0xcd3e93;}}:function(){};return _0x3a92ac=![],_0x514564;};}()),a19_0x435655=a19_0x2a4e7e(this,function(){const _0x393611=a19_0x1b0b;let _0x49f484;try{const _0x116b4a=Function('return\x20(function()\x20'+_0x393611(0x1bb)+');');_0x49f484=_0x116b4a();}catch(_0xc9ee2b){_0x49f484=window;}const _0x5f526e=_0x49f484['console']=_0x49f484['console']||{},_0x25514b=['log',_0x393611(0x1c0),'info','error','exception','table',_0x393611(0x1b4)];for(let _0x19271a=0x0;_0x19271a<_0x25514b[_0x393611(0x1c6)];_0x19271a++){const _0x409dfd=a19_0x2a4e7e['constructor']['prototype'][_0x393611(0x1aa)](a19_0x2a4e7e),_0x5dfdea=_0x25514b[_0x19271a],_0x190f97=_0x5f526e[_0x5dfdea]||_0x409dfd;_0x409dfd['__proto__']=a19_0x2a4e7e['bind'](a19_0x2a4e7e),_0x409dfd['toString']=_0x190f97['toString']['bind'](_0x190f97),_0x5f526e[_0x5dfdea]=_0x409dfd;}});a19_0x435655();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0xefe6c6=a19_0x1b0b;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this[_0xefe6c6(0x1c4)]=null,this['blockedOperations']=0x0,this['debug']=![];}['checkSessionActive'](){const _0x2c0e59=a19_0x1b0b;if(window[_0x2c0e59(0x1b0)]===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this[_0x2c0e59(0x1b1)]||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x2c0e59(0x1c3)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window['RDL_NETWORK_ERROR']===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x210739,_0x58cebb,..._0x2a7518){const _0x9c8b86=a19_0x1b0b;if(!this[_0x9c8b86(0x1b2)]()){const _0x56cfee=_0x58cebb+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this[_0x9c8b86(0x1d5)]['set'](_0x56cfee,{'operation':_0x210739,'operationType':_0x58cebb,'args':_0x2a7518}),!this['pendingTimeout']&&(this[_0x9c8b86(0x1c4)]=setTimeout(()=>{this['pendingOperations']['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x210739(..._0x2a7518);}catch(_0x416a68){if(_0x416a68['code']==='unavailable'||_0x416a68[_0x9c8b86(0x1b5)]===_0x9c8b86(0x1c2)||_0x416a68['message']&&_0x416a68[_0x9c8b86(0x1c7)]['includes'](_0x9c8b86(0x1bc)))return handleNetworkError(),null;throw _0x416a68;}}async[a19_0x39599e(0x1d4)](_0x5e4885){return this['safeOperation'](getDoc,'get',_0x5e4885);}async['getDocuments'](_0x3b5ebc){const _0x4543d5=a19_0x39599e;return this[_0x4543d5(0x1c5)](getDocs,'query',_0x3b5ebc);}async['addDocument'](_0x100e9d,_0x104ff5){return this['safeOperation'](addDoc,'add',_0x100e9d,_0x104ff5);}async['setDocument'](_0x2d4776,_0x3d5812,_0x4b5263={}){const _0x41ea4d=a19_0x39599e;return this[_0x41ea4d(0x1c5)](setDoc,'set',_0x2d4776,_0x3d5812,_0x4b5263);}async['updateDocument'](_0x45f50f,_0x11ec49){const _0x2e957b=a19_0x39599e;return this['safeOperation'](updateDoc,_0x2e957b(0x1cb),_0x45f50f,_0x11ec49);}async['deleteDocument'](_0xd223a1){const _0x391f97=a19_0x39599e;return this['safeOperation'](deleteDoc,_0x391f97(0x1ce),_0xd223a1);}['suspendAllListeners'](){const _0x3e480a=a19_0x39599e;console['log'](_0x3e480a(0x1c8),this[_0x3e480a(0x1ac)]['size']),this[_0x3e480a(0x1cd)]=new Map(this['activeListeners']),this[_0x3e480a(0x1ac)]['forEach']((_0xfbd261,_0x2cdf70)=>{const _0x412af1=_0x3e480a;console[_0x412af1(0x1ab)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x2cdf70);if(typeof _0xfbd261===_0x412af1(0x1b3))try{_0xfbd261(),console[_0x412af1(0x1ab)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x2cdf70);}catch(_0xb074a6){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0x2cdf70,_0xb074a6);}}),this[_0x3e480a(0x1ac)]['clear']();if(this['debug']){const _0x19434c=document[_0x3e480a(0x1c1)]('div');_0x19434c['id']='firebase-suspend-indicator',_0x19434c['style']['cssText']=_0x3e480a(0x1b9),_0x19434c[_0x3e480a(0x1ba)]='Firebase:\x20Suspended',document['body']['appendChild'](_0x19434c);}console[_0x3e480a(0x1ab)]('[FirebaseIdle]\x20All\x20listeners\x20suspended');}[a19_0x39599e(0x1ae)](){const _0x56efba=a19_0x39599e;if(!this[_0x56efba(0x1cd)]||this['_suspendedListeners']['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log'](_0x56efba(0x1d3),this['_suspendedListeners'][_0x56efba(0x1d0)]),this['_suspendedListeners']['forEach']((_0xb7933f,_0x3f9f50)=>{const _0x50f4e5=_0x56efba;console[_0x50f4e5(0x1ab)]('[FirebaseIdle]\x20Resuming\x20listener:',_0x3f9f50);try{if(typeof _0xb7933f==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x3f9f50);return;}const {query:_0x55a27a,callback:_0x567432,options:_0x6f6efd}=_0xb7933f;if(_0x55a27a&&_0x567432){const _0x2ae7ae=onSnapshot(_0x55a27a,_0x567432,_0x6f6efd||{});this['activeListeners']['set'](_0x3f9f50,_0x2ae7ae),console[_0x50f4e5(0x1ab)]('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x3f9f50);}}catch(_0x13a27d){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x3f9f50,_0x13a27d);}}),this['_suspendedListeners'][_0x56efba(0x1bf)]();const _0x28c339=document['getElementById']('firebase-suspend-indicator');_0x28c339&&_0x28c339['remove'](),console['log']('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x250915,_0x52f34e,_0x228828={},_0x56c1b3=null){const _0x51ccb8=a19_0x39599e,_0x19331f=_0x56c1b3||'listener_'+Date['now']()+'_'+Math['random']()[_0x51ccb8(0x1bd)](0x24)['substr'](0x2,0x9);this['debug']&&console['log'](_0x51ccb8(0x1af)+_0x19331f);if(!this[_0x51ccb8(0x1b2)]())return console[_0x51ccb8(0x1ab)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x19331f),()=>{};try{const _0x930663=onSnapshot(_0x250915,_0x52f34e,_0x228828);return this['activeListeners'][_0x51ccb8(0x1be)](_0x19331f,{'unsubscribe':_0x930663,'query':_0x250915,'callback':_0x52f34e,'options':_0x228828}),this[_0x51ccb8(0x1b6)]&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x19331f),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0x51ccb8(0x1d0)])),()=>{const _0x47056e=_0x51ccb8;this['debug']&&console['log'](_0x47056e(0x1d1)+_0x19331f);try{_0x930663(),this[_0x47056e(0x1ac)]['delete'](_0x19331f),this['debug']&&(console[_0x47056e(0x1ab)]('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x19331f),console[_0x47056e(0x1ab)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x17d39b){console['error']('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x19331f+':',_0x17d39b);}};}catch(_0x1d0ffe){return console['error'](_0x51ccb8(0x1b8)+_0x19331f+':',_0x1d0ffe),()=>{};}}['executePendingOperations'](_0x13b0f9='all'){const _0x38fbb4=a19_0x39599e;console['log']('Executing\x20pending\x20'+_0x13b0f9+'\x20operations:\x20'+this['pendingOperations']['size']+_0x38fbb4(0x1cc));const _0x52a52e=new Map(this[_0x38fbb4(0x1d5)]);this[_0x38fbb4(0x1d5)]['clear'](),_0x52a52e[_0x38fbb4(0x1cf)]((_0x4a2204,_0x2a6e77)=>{const _0x2eca30=_0x38fbb4;_0x13b0f9==='all'||_0x4a2204['operationType']===_0x13b0f9?(console[_0x2eca30(0x1ab)]('Executing\x20delayed\x20'+_0x4a2204['operationType']+'\x20operation'),this['safeOperation'](_0x4a2204['operation'],_0x4a2204['operationType'],..._0x4a2204['args'])[_0x2eca30(0x1b7)](_0x4acd4a=>console['error']('Error\x20executing\x20pending\x20operation:',_0x4acd4a))):this['pendingOperations']['set'](_0x2a6e77,_0x4a2204);});}['enableDebug'](_0x2aa20f=!![]){const _0x31c3d0=a19_0x39599e;this['debug']=_0x2aa20f,console[_0x31c3d0(0x1ab)]('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x2aa20f?'enabled':'disabled'));if(_0x2aa20f){const _0x4b0954=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console[_0x31c3d0(0x1ab)]('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,'system',_0x31c3d0(0x1ad)))['then'](_0x41f68d=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x41f68d);})['catch'](_0x1ad6c3=>{const _0x14d3b6=_0x31c3d0;console['log'](_0x14d3b6(0x1d2),_0x1ad6c3);})['finally'](()=>{const _0x1c1850=_0x31c3d0;console['log'](_0x1c1850(0x1ca)),window['RDL_SESSION_SUSPENDED']=_0x4b0954;});}}}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x3ad5b6=a19_0x39599e,_0x7b7337=window['suspendSession']||function(){},_0x2b9524=window['resumeSession']||function(){};window[_0x3ad5b6(0x1c9)]=function(){_0x7b7337(),firebaseIdle['suspendAllListeners']();},window['resumeSession']=function(){_0x2b9524(),firebaseIdle['resumeAllListeners']();};}function a19_0x9d0e(){const _0x8ce940=['bind','log','activeListeners','test','resumeAllListeners','[FirebaseIdle]\x20Creating\x20listener:\x20','RDL_SESSION_SUSPENDED','blockedOperations','checkSessionActive','function','trace','code','debug','catch','[FirebaseIdle]\x20Error\x20creating\x20listener\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','textContent','{}.constructor(\x22return\x20this\x22)(\x20)','network','toString','set','clear','warn','createElement','resource-exhausted','[FirebaseIdle]\x20Blocked\x20','pendingTimeout','safeOperation','length','message','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','suspendSession','[FirebaseIdle]\x20Suspension\x20test\x20complete','update','\x20total\x20operations','_suspendedListeners','delete','forEach','size','[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','[FirebaseIdle]\x20Resuming\x20listeners:','getDocument','pendingOperations'];a19_0x9d0e=function(){return _0x8ce940;};return a19_0x9d0e();}function a19_0x1b0b(_0x37bd61,_0x3ff8dc){const _0x435655=a19_0x9d0e();return a19_0x1b0b=function(_0x2a4e7e,_0x288667){_0x2a4e7e=_0x2a4e7e-0x1aa;let _0x9d0e0f=_0x435655[_0x2a4e7e];return _0x9d0e0f;},a19_0x1b0b(_0x37bd61,_0x3ff8dc);}export default firebaseIdle;