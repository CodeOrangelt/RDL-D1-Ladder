const a17_0x51d62c=a17_0x1ec6,a17_0x1a0c31=(function(){let _0x274dbe=!![];return function(_0x2e1e34,_0x46ce9a){const _0x33d750=_0x274dbe?function(){if(_0x46ce9a){const _0x4d833d=_0x46ce9a['apply'](_0x2e1e34,arguments);return _0x46ce9a=null,_0x4d833d;}}:function(){};return _0x274dbe=![],_0x33d750;};}()),a17_0x6c021e=a17_0x1a0c31(this,function(){const _0x2a510e=a17_0x1ec6;let _0x1c5ea9;try{const _0x3882d9=Function(_0x2a510e(0x200)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1c5ea9=_0x3882d9();}catch(_0x4ea44c){_0x1c5ea9=window;}const _0x2614b5=_0x1c5ea9[_0x2a510e(0x208)]=_0x1c5ea9['console']||{},_0x2453f3=[_0x2a510e(0x204),'warn','info',_0x2a510e(0x201),'exception','table','trace'];for(let _0x1d849f=0x0;_0x1d849f<_0x2453f3['length'];_0x1d849f++){const _0x3dd44f=a17_0x1a0c31[_0x2a510e(0x206)][_0x2a510e(0x1f2)]['bind'](a17_0x1a0c31),_0x46f262=_0x2453f3[_0x1d849f],_0x395169=_0x2614b5[_0x46f262]||_0x3dd44f;_0x3dd44f['__proto__']=a17_0x1a0c31[_0x2a510e(0x1f4)](a17_0x1a0c31),_0x3dd44f['toString']=_0x395169[_0x2a510e(0x207)]['bind'](_0x395169),_0x2614b5[_0x46f262]=_0x3dd44f;}});a17_0x6c021e();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x532720=a17_0x1ec6;this['activeListeners']=new Map(),this[_0x532720(0x1fc)]=new Map(),this['pendingTimeout']=null,this['blockedOperations']=0x0,this['debug']=![];}[a17_0x51d62c(0x1f5)](){const _0x21ad85=a17_0x51d62c;if(window['RDL_SESSION_SUSPENDED']===!![])return console['log'](_0x21ad85(0x1ed)),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console[_0x21ad85(0x202)]('[FirebaseIdle]\x20Blocked\x20'+this[_0x21ad85(0x20c)]+_0x21ad85(0x20e)),![];if(window['RDL_NETWORK_ERROR']===!![])return console[_0x21ad85(0x204)](_0x21ad85(0x1e9)),![];return!![];}async['safeOperation'](_0x3746ac,_0x4bbb67,..._0x19127e){const _0x1614e2=a17_0x51d62c;if(!this['checkSessionActive']()){const _0x75b55f=_0x4bbb67+'-'+Date['now']()+'-'+Math['random']()['toString'](0x24)['substring'](0x2,0x9);return this['pendingOperations'][_0x1614e2(0x1f0)](_0x75b55f,{'operation':_0x3746ac,'operationType':_0x4bbb67,'args':_0x19127e}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{const _0x109b12=_0x1614e2;this[_0x109b12(0x1fc)]['clear'](),this['pendingTimeout']=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x3746ac(..._0x19127e);}catch(_0x384821){if(_0x384821['code']==='unavailable'||_0x384821['code']==='resource-exhausted'||_0x384821['message']&&_0x384821['message']['includes']('network'))return handleNetworkError(),null;throw _0x384821;}}async['getDocument'](_0x375339){const _0x16bca1=a17_0x51d62c;return this[_0x16bca1(0x1ff)](getDoc,'get',_0x375339);}async['getDocuments'](_0x4c57b8){const _0x254b22=a17_0x51d62c;return this[_0x254b22(0x1ff)](getDocs,'query',_0x4c57b8);}async['addDocument'](_0x1b288c,_0x57e3e7){const _0x1c2e5d=a17_0x51d62c;return this['safeOperation'](addDoc,_0x1c2e5d(0x20d),_0x1b288c,_0x57e3e7);}async['setDocument'](_0x15c511,_0x347abc,_0x434343={}){const _0x44fdf0=a17_0x51d62c;return this[_0x44fdf0(0x1ff)](setDoc,_0x44fdf0(0x1f0),_0x15c511,_0x347abc,_0x434343);}async['updateDocument'](_0x4332c0,_0x55464a){return this['safeOperation'](updateDoc,'update',_0x4332c0,_0x55464a);}async['deleteDocument'](_0x16c0df){const _0x1ebf6f=a17_0x51d62c;return this[_0x1ebf6f(0x1ff)](deleteDoc,'delete',_0x16c0df);}['suspendAllListeners'](){const _0x2dd648=a17_0x51d62c;console['log']('[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:',this[_0x2dd648(0x1f7)]['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this[_0x2dd648(0x1f7)]['forEach']((_0x5ddd95,_0x345e3d)=>{const _0x3c8275=_0x2dd648;console[_0x3c8275(0x204)]('[FirebaseIdle]\x20Suspending\x20listener:',_0x345e3d);if(typeof _0x5ddd95==='function')try{_0x5ddd95(),console[_0x3c8275(0x204)]('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0x345e3d);}catch(_0x4cc537){console['error'](_0x3c8275(0x205),_0x345e3d,_0x4cc537);}}),this['activeListeners'][_0x2dd648(0x1f8)]();if(this['debug']){const _0x20d4fb=document['createElement']('div');_0x20d4fb['id']='firebase-suspend-indicator',_0x20d4fb['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x20d4fb['textContent']='Firebase:\x20Suspended',document[_0x2dd648(0x1ee)][_0x2dd648(0x1e8)](_0x20d4fb);}console[_0x2dd648(0x204)]('[FirebaseIdle]\x20All\x20listeners\x20suspended');}['resumeAllListeners'](){const _0x880f16=a17_0x51d62c;if(!this[_0x880f16(0x20b)]||this[_0x880f16(0x20b)]['size']===0x0){console['log']('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this[_0x880f16(0x20b)][_0x880f16(0x1f6)]((_0x1ee8f8,_0x359a46)=>{const _0x5ef3de=_0x880f16;console['log'](_0x5ef3de(0x1fa),_0x359a46);try{if(typeof _0x1ee8f8==='function'){console[_0x5ef3de(0x202)]('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x359a46);return;}const {query:_0x2c7b48,callback:_0x4d62f8,options:_0x190b85}=_0x1ee8f8;if(_0x2c7b48&&_0x4d62f8){const _0x59b905=onSnapshot(_0x2c7b48,_0x4d62f8,_0x190b85||{});this['activeListeners']['set'](_0x359a46,_0x59b905),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x359a46);}}catch(_0x590adc){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x359a46,_0x590adc);}}),this['_suspendedListeners']['clear']();const _0x360559=document['getElementById']('firebase-suspend-indicator');_0x360559&&_0x360559[_0x880f16(0x1f9)](),console[_0x880f16(0x204)]('[FirebaseIdle]\x20Listeners\x20resumed');}['createListener'](_0x488e56,_0x51029c,_0x95d989={},_0x5518e6=null){const _0x3f9339=a17_0x51d62c,_0x3d1f43=_0x5518e6||_0x3f9339(0x1f3)+Date['now']()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console[_0x3f9339(0x204)]('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x3d1f43);if(!this['checkSessionActive']())return console['log']('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x3d1f43),()=>{};try{const _0x489ad6=onSnapshot(_0x488e56,_0x51029c,_0x95d989);return this[_0x3f9339(0x1f7)]['set'](_0x3d1f43,{'unsubscribe':_0x489ad6,'query':_0x488e56,'callback':_0x51029c,'options':_0x95d989}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x3d1f43),console['log'](_0x3f9339(0x20a)+this[_0x3f9339(0x1f7)][_0x3f9339(0x1ea)])),()=>{const _0x243671=_0x3f9339;this['debug']&&console['log'](_0x243671(0x1fb)+_0x3d1f43);try{_0x489ad6(),this['activeListeners']['delete'](_0x3d1f43),this['debug']&&(console['log'](_0x243671(0x1ef)+_0x3d1f43),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners'][_0x243671(0x1ea)]));}catch(_0x295bd9){console[_0x243671(0x201)]('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x3d1f43+':',_0x295bd9);}};}catch(_0xf6ab8){return console['error']('[FirebaseIdle]\x20Error\x20creating\x20listener\x20'+_0x3d1f43+':',_0xf6ab8),()=>{};}}['executePendingOperations'](_0x462eb9='all'){const _0xcc4705=a17_0x51d62c;console[_0xcc4705(0x204)]('Executing\x20pending\x20'+_0x462eb9+'\x20operations:\x20'+this['pendingOperations']['size']+'\x20total\x20operations');const _0x555ce7=new Map(this[_0xcc4705(0x1fc)]);this[_0xcc4705(0x1fc)][_0xcc4705(0x1f8)](),_0x555ce7['forEach']((_0x437c9d,_0x37d698)=>{const _0x5ef740=_0xcc4705;_0x462eb9==='all'||_0x437c9d['operationType']===_0x462eb9?(console['log']('Executing\x20delayed\x20'+_0x437c9d['operationType']+_0x5ef740(0x1fe)),this['safeOperation'](_0x437c9d['operation'],_0x437c9d['operationType'],..._0x437c9d['args'])[_0x5ef740(0x203)](_0x2c30a3=>console['error'](_0x5ef740(0x1e7),_0x2c30a3))):this['pendingOperations'][_0x5ef740(0x1f0)](_0x37d698,_0x437c9d);});}['enableDebug'](_0x3510a7=!![]){const _0x14f3cb=a17_0x51d62c;this['debug']=_0x3510a7,console['log'](_0x14f3cb(0x1fd)+(_0x3510a7?'enabled':'disabled'));if(_0x3510a7){const _0x534202=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x14f3cb(0x1eb),'test'))[_0x14f3cb(0x1e6)](_0x52eb7d=>{console['log']('[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension',_0x52eb7d);})[_0x14f3cb(0x203)](_0x41504e=>{const _0x137e79=_0x14f3cb;console['log'](_0x137e79(0x1ec),_0x41504e);})['finally'](()=>{console['log']('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x534202;});}}}function a17_0xf51c(){const _0x45d757=['then','Error\x20executing\x20pending\x20operation:','appendChild','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error','size','system','[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):','[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle','body','[FirebaseIdle]\x20Listener\x20removed:\x20','set','suspendAllListeners','prototype','listener_','bind','checkSessionActive','forEach','activeListeners','clear','remove','[FirebaseIdle]\x20Resuming\x20listener:','[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20','pendingOperations','[FirebaseIdle]\x20Debug\x20mode\x20','\x20operation','safeOperation','return\x20(function()\x20','error','warn','catch','log','[FirebaseIdle]\x20Error\x20suspending\x20listener:','constructor','toString','console','suspendSession','[FirebaseIdle]\x20Active\x20listeners:\x20','_suspendedListeners','blockedOperations','add','\x20operations\x20during\x20idle\x20state'];a17_0xf51c=function(){return _0x45d757;};return a17_0xf51c();}const firebaseIdle=new FirebaseIdleWrapper();function a17_0x1ec6(_0x361504,_0x469d87){const _0x6c021e=a17_0xf51c();return a17_0x1ec6=function(_0x1a0c31,_0x1da6e2){_0x1a0c31=_0x1a0c31-0x1e6;let _0xf51cf7=_0x6c021e[_0x1a0c31];return _0xf51cf7;},a17_0x1ec6(_0x361504,_0x469d87);}export function enhanceIdleTimeout(){const _0x384bdb=a17_0x51d62c,_0xa1518f=window[_0x384bdb(0x209)]||function(){},_0x5d1511=window['resumeSession']||function(){};window[_0x384bdb(0x209)]=function(){const _0x1dd594=_0x384bdb;_0xa1518f(),firebaseIdle[_0x1dd594(0x1f1)]();},window['resumeSession']=function(){_0x5d1511(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;