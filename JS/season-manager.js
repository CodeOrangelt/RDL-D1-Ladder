const a52_0x3a1dc2=a52_0x5356;function a52_0x5356(_0x4a35b7,_0x462635){const _0x2ac663=a52_0x3310();return a52_0x5356=function(_0x516ae9,_0x367157){_0x516ae9=_0x516ae9-0x179;let _0x11f22f=_0x2ac663[_0x516ae9];return _0x11f22f;},a52_0x5356(_0x4a35b7,_0x462635);}(function(_0x56965d,_0x41e26c){const _0x88d83f=a52_0x5356,_0xeb92d4=_0x56965d();while(!![]){try{const _0x18e6bb=parseInt(_0x88d83f(0x197))/0x1+parseInt(_0x88d83f(0x196))/0x2*(-parseInt(_0x88d83f(0x1a7))/0x3)+parseInt(_0x88d83f(0x18f))/0x4*(-parseInt(_0x88d83f(0x191))/0x5)+parseInt(_0x88d83f(0x1b0))/0x6*(-parseInt(_0x88d83f(0x1af))/0x7)+-parseInt(_0x88d83f(0x184))/0x8+parseInt(_0x88d83f(0x1a8))/0x9*(-parseInt(_0x88d83f(0x1a9))/0xa)+parseInt(_0x88d83f(0x1a2))/0xb*(parseInt(_0x88d83f(0x18c))/0xc);if(_0x18e6bb===_0x41e26c)break;else _0xeb92d4['push'](_0xeb92d4['shift']());}catch(_0x314b04){_0xeb92d4['push'](_0xeb92d4['shift']());}}}(a52_0x3310,0x845ba));const a52_0x218ab7=(function(){let _0xcb4487=!![];return function(_0x1e4c97,_0x101b8c){const _0x54a7e4=_0xcb4487?function(){const _0x321b8a=a52_0x5356;if(_0x101b8c){const _0x37b728=_0x101b8c[_0x321b8a(0x1aa)](_0x1e4c97,arguments);return _0x101b8c=null,_0x37b728;}}:function(){};return _0xcb4487=![],_0x54a7e4;};}()),a52_0x1df052=a52_0x218ab7(this,function(){const _0x2cd2aa=a52_0x5356;return a52_0x1df052[_0x2cd2aa(0x182)]()[_0x2cd2aa(0x199)](_0x2cd2aa(0x17f))[_0x2cd2aa(0x182)]()[_0x2cd2aa(0x1a4)](a52_0x1df052)[_0x2cd2aa(0x199)](_0x2cd2aa(0x17f));});function a52_0x3310(){const _0x6c1273=['none','bind','metadata','docs','2519013XIXrQz','12TAZcGK','trace','season','table','reset-password','eloRating','Please\x20enter\x20your\x20password','console','addEventListener','prototype','(((.+)+)+)+$','data','info','toString','credential','2321952HxaYBa','warn','Invalid\x20password\x20or\x20authentication\x20failed','confirm-reset','username','value','style','resetSeason','7764NpgSFs','setupEventListeners','position','404ibIilS','getElementById','33465QLpFpQ','seasonCount','Season\x20','count','exists','8DWFVHJ','61412CBHYKu','click','search','Authentication\x20error:','seasons','return\x20(function()\x20','display','reload','reset-season','\x20has\x20been\x20archived\x20and\x20players\x20have\x20been\x20reset.','Error\x20resetting\x20season.\x20Please\x20try\x20again.','52855PthARi','reset-confirmation','constructor','log','players','656256tqqOnm','302157RoRBwx','20mmlxVa','apply'];a52_0x3310=function(){return _0x6c1273;};return a52_0x3310();}a52_0x1df052();const a52_0x367157=(function(){let _0xbc2a23=!![];return function(_0x3311d6,_0xc3da0){const _0x154c88=_0xbc2a23?function(){if(_0xc3da0){const _0x35d147=_0xc3da0['apply'](_0x3311d6,arguments);return _0xc3da0=null,_0x35d147;}}:function(){};return _0xbc2a23=![],_0x154c88;};}()),a52_0x516ae9=a52_0x367157(this,function(){const _0x543c3c=a52_0x5356;let _0x1b8302;try{const _0x217d6a=Function(_0x543c3c(0x19c)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1b8302=_0x217d6a();}catch(_0x4691aa){_0x1b8302=window;}const _0xddb87b=_0x1b8302[_0x543c3c(0x17c)]=_0x1b8302[_0x543c3c(0x17c)]||{},_0x1138e9=[_0x543c3c(0x1a5),_0x543c3c(0x185),_0x543c3c(0x181),'error','exception',_0x543c3c(0x1b3),_0x543c3c(0x1b1)];for(let _0x3f378e=0x0;_0x3f378e<_0x1138e9['length'];_0x3f378e++){const _0x55e876=a52_0x367157[_0x543c3c(0x1a4)][_0x543c3c(0x17e)][_0x543c3c(0x1ac)](a52_0x367157),_0x5fabd2=_0x1138e9[_0x3f378e],_0x3dee7e=_0xddb87b[_0x5fabd2]||_0x55e876;_0x55e876['__proto__']=a52_0x367157[_0x543c3c(0x1ac)](a52_0x367157),_0x55e876[_0x543c3c(0x182)]=_0x3dee7e[_0x543c3c(0x182)][_0x543c3c(0x1ac)](_0x3dee7e),_0xddb87b[_0x5fabd2]=_0x55e876;}});a52_0x516ae9();import{db}from'./firebase-config.js';import{collection,getDocs,setDoc,doc,increment}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{EmailAuthProvider,reauthenticateWithCredential}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';class SeasonManager{constructor(){this['setupEventListeners']();}[a52_0x3a1dc2(0x18d)](){const _0x4f421c=a52_0x3a1dc2,_0x4f8264=document[_0x4f421c(0x190)](_0x4f421c(0x19f)),_0x418a67=document[_0x4f421c(0x190)](_0x4f421c(0x187)),_0x5a4ac5=document['getElementById']('cancel-reset');_0x4f8264?.[_0x4f421c(0x17d)](_0x4f421c(0x198),()=>{const _0x49f9cb=_0x4f421c;document[_0x49f9cb(0x190)](_0x49f9cb(0x1a3))[_0x49f9cb(0x18a)][_0x49f9cb(0x19d)]='block';}),_0x418a67?.[_0x4f421c(0x17d)](_0x4f421c(0x198),async()=>{const _0xd63b7e=_0x4f421c,_0x5d4771=document[_0xd63b7e(0x190)](_0xd63b7e(0x179)),_0x49343a=auth['currentUser'];if(!_0x49343a||!_0x5d4771['value']){alert(_0xd63b7e(0x17b));return;}try{const _0xc57403=EmailAuthProvider[_0xd63b7e(0x183)](_0x49343a['email'],_0x5d4771[_0xd63b7e(0x189)]);await reauthenticateWithCredential(_0x49343a,_0xc57403),await this[_0xd63b7e(0x18b)](),_0x5d4771[_0xd63b7e(0x189)]='',document[_0xd63b7e(0x190)]('reset-confirmation')[_0xd63b7e(0x18a)][_0xd63b7e(0x19d)]=_0xd63b7e(0x1ab);}catch(_0x43c94b){alert(_0xd63b7e(0x186)),console['error'](_0xd63b7e(0x19a),_0x43c94b);}}),_0x5a4ac5?.[_0x4f421c(0x17d)](_0x4f421c(0x198),()=>{const _0x3b1f4b=_0x4f421c,_0x36e2de=document[_0x3b1f4b(0x190)](_0x3b1f4b(0x179));_0x36e2de[_0x3b1f4b(0x189)]='',document[_0x3b1f4b(0x190)](_0x3b1f4b(0x1a3))[_0x3b1f4b(0x18a)][_0x3b1f4b(0x19d)]=_0x3b1f4b(0x1ab);});}async[a52_0x3a1dc2(0x18b)](){const _0x3d7dda=a52_0x3a1dc2;try{const _0x2cd20d=await getDoc(doc(db,_0x3d7dda(0x1ad),_0x3d7dda(0x192)));let _0x48dfe8=0x1;_0x2cd20d[_0x3d7dda(0x195)]()&&(_0x48dfe8=_0x2cd20d[_0x3d7dda(0x180)]()[_0x3d7dda(0x194)]+0x1);const _0x18fbc8=await getDocs(collection(db,_0x3d7dda(0x1a6))),_0x348be2={'players':[],'date':new Date(),'seasonNumber':_0x48dfe8};for(const _0x1a8725 of _0x18fbc8[_0x3d7dda(0x1ae)]){const _0x1837f2=_0x1a8725[_0x3d7dda(0x180)]();_0x348be2[_0x3d7dda(0x1a6)]['push']({'username':_0x1837f2[_0x3d7dda(0x188)],'position':_0x1837f2[_0x3d7dda(0x18e)],'eloRating':_0x1837f2[_0x3d7dda(0x17a)]||0x4b0}),await setDoc(doc(db,_0x3d7dda(0x1a6),_0x1a8725['id']),{..._0x1837f2,'eloRating':0x4b0,'position':_0x1837f2[_0x3d7dda(0x18e)]});}await setDoc(doc(db,_0x3d7dda(0x19b),_0x3d7dda(0x1b2)+_0x48dfe8),_0x348be2),await setDoc(doc(db,_0x3d7dda(0x1ad),_0x3d7dda(0x192)),{'count':_0x48dfe8}),alert(_0x3d7dda(0x193)+_0x48dfe8+_0x3d7dda(0x1a0)),location[_0x3d7dda(0x19e)]();}catch(_0x132968){console['error']('Error\x20resetting\x20season:',_0x132968),alert(_0x3d7dda(0x1a1));}}}export const seasonManager=new SeasonManager();