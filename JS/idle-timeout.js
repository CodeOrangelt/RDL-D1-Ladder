const a22_0x513c56=a22_0x1ec7;function a22_0x1ec7(_0x507a36,_0x1af9ef){const _0x273d45=a22_0x3c8d();return a22_0x1ec7=function(_0x56b993,_0x412faa){_0x56b993=_0x56b993-0x7f;let _0x3c8dd4=_0x273d45[_0x56b993];return _0x3c8dd4;},a22_0x1ec7(_0x507a36,_0x1af9ef);}import a22_0x560fb9,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0x53dff8=a22_0x1ec7;if(document['getElementById'](_0x53dff8(0x8b)))return;const _0x23ab32=document['createElement']('div');_0x23ab32['id']='idle-overlay',_0x23ab32['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x1f23ce=document['createElement'](_0x53dff8(0xa7));_0x1f23ce[_0x53dff8(0x9a)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x380b6d=document['createElement']('h2');_0x380b6d['textContent']='Session\x20Suspended\x20Due\x20to\x20Inactivity',_0x380b6d[_0x53dff8(0x9a)]['cssText']=_0x53dff8(0x9e);const _0x107687=document['createElement']('p');_0x107687['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x107687[_0x53dff8(0x9a)]['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x5cfd65=document['createElement']('button');_0x5cfd65['id']=_0x53dff8(0x9f),_0x5cfd65['textContent']='Return\x20to\x20Website',_0x5cfd65[_0x53dff8(0x9a)]['cssText']=_0x53dff8(0x9b),_0x5cfd65[_0x53dff8(0xac)]=function(){const _0x54c70d=_0x53dff8;this[_0x54c70d(0x9a)]['backgroundColor']=_0x54c70d(0x83);},_0x5cfd65['onmouseout']=function(){const _0x15aaff=_0x53dff8;this['style'][_0x15aaff(0xa4)]='#50C878';},_0x1f23ce[_0x53dff8(0x8f)](_0x380b6d),_0x1f23ce['appendChild'](_0x107687),_0x1f23ce['appendChild'](_0x5cfd65),_0x23ab32[_0x53dff8(0x8f)](_0x1f23ce),document['body'][_0x53dff8(0x8f)](_0x23ab32),_0x5cfd65['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x270cb0=a22_0x1ec7;if(document['getElementById']('network-error-overlay'))return;const _0x5ad464=document['createElement']('div');_0x5ad464['id']='network-error-overlay',_0x5ad464['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x499218=document['createElement']('div');_0x499218[_0x270cb0(0x9a)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0xdef5bd=document['createElement']('h2');_0xdef5bd['textContent']='Connection\x20Error',_0xdef5bd['style']['cssText']=_0x270cb0(0xa8);const _0x4fdc1e=document['createElement']('p');_0x4fdc1e['textContent']='We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.',_0x4fdc1e['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0xbc454f=document[_0x270cb0(0xa5)](_0x270cb0(0xa3));_0xbc454f['id']='retry-connection-btn',_0xbc454f['textContent']=_0x270cb0(0xa6),_0xbc454f[_0x270cb0(0x9a)]['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20';const _0x192e26=document['createElement']('button');_0x192e26['id']=_0x270cb0(0x90),_0x192e26['textContent']='Reload\x20Page',_0x192e26['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x107c30=document[_0x270cb0(0xa5)]('div');_0x107c30['style']['cssText']='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x107c30['appendChild'](_0xbc454f),_0x107c30['appendChild'](_0x192e26),_0x499218['appendChild'](_0xdef5bd),_0x499218['appendChild'](_0x4fdc1e),_0x499218['appendChild'](_0x107c30),_0x5ad464['appendChild'](_0x499218),document['body'][_0x270cb0(0x8f)](_0x5ad464),_0xbc454f['addEventListener']('click',retryConnection),_0x192e26[_0x270cb0(0x96)]('click',()=>window[_0x270cb0(0x9c)]['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x18e426=a22_0x1ec7;clearTimeout(idleTimer);const _0x52dee6=document[_0x18e426(0x97)](_0x18e426(0x84));_0x52dee6&&(_0x52dee6['style']['display']='flex'),window['RDL_NETWORK_ERROR']=!![],console[_0x18e426(0x98)]('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x560fb9['suspendAllListeners']();}function a22_0x3c8d(){const _0x2c463d=['none','RDL_SESSION_SUSPENDED','Network\x20error:','RDL_NETWORK_ERROR','#3da05f','network-error-overlay','cursor','forceIdleTimeout','prototype','touchstart','mousemove','table','idle-overlay','exception','size','Connection\x20test\x20failed:','appendChild','reload-page-btn','bind','code','now','keys','checkFirebaseIdleStatus','addEventListener','getElementById','log','preventDefault','style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','location','network','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','resume-session-btn','forEach','error','{}.constructor(\x22return\x20this\x22)(\x20)','button','backgroundColor','createElement','Retry\x20Connection','div','color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','Idle\x20timeout\x20initialized:','display','Pending\x20operations:','onmouseover','return\x20(function()\x20'];a22_0x3c8d=function(){return _0x2c463d;};return a22_0x3c8d();}function retryConnection(){const _0x269448=a22_0x1ec7;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x10f5e1=document['querySelector']('#network-error-overlay\x20p');_0x10f5e1&&(_0x10f5e1['textContent']='Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.');const _0x47a8d7=document['getElementById']('retry-connection-btn');_0x47a8d7&&(_0x47a8d7['disabled']=!![],_0x47a8d7['style']['opacity']='0.5',_0x47a8d7['style'][_0x269448(0x85)]='not-allowed');return;}const _0x3f9747=document['getElementById'](_0x269448(0x84));_0x3f9747&&(_0x3f9747[_0x269448(0x9a)]['display']=_0x269448(0x7f));window['RDL_NETWORK_ERROR']=![],resetIdleTimer(),console[_0x269448(0x98)]('Retrying\x20connection...');try{const {rdlFirestore:_0x46b2c6}=window;if(_0x46b2c6){const _0x2390f4=_0x46b2c6['collection']('system');_0x46b2c6['getDocs'](_0x2390f4)['catch'](_0x5a6efe=>{const _0x3e44c3=_0x269448;console[_0x3e44c3(0xa1)](_0x3e44c3(0x8e),_0x5a6efe),handleNetworkError();});}}catch(_0x20abb8){console['error']('Failed\x20to\x20test\x20connection:',_0x20abb8),handleNetworkError();}a22_0x560fb9['resumeAllListeners']();}function suspendSession(){const _0x115ba8=a22_0x1ec7;isSessionSuspended=!![];const _0xdcef42=document['getElementById']('idle-overlay');_0xdcef42&&(_0xdcef42['style'][_0x115ba8(0xaa)]='flex'),console[_0x115ba8(0x98)]('Session\x20suspended\x20due\x20to\x20inactivity'),window['RDL_SESSION_SUSPENDED']=!![],a22_0x560fb9['suspendAllListeners']();}function resumeSession(){const _0x57ed75=a22_0x1ec7;isSessionSuspended=![],window[_0x57ed75(0x80)]=![];const _0x3479c8=document['getElementById']('idle-overlay');_0x3479c8&&(_0x3479c8['style']['display']='none'),console['log']('Session\x20resumed'),resetIdleTimer(),a22_0x560fb9['resumeAllListeners'](),idleTimer&&Date[_0x57ed75(0x93)]()-(window['RDL_LAST_ACTIVITY']||0x0)>IDLE_TIMEOUT*0x2&&(console['log']('Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page'),window['location']['reload']());}function initIdleTimeout(){const _0x33ec64=a22_0x1ec7,_0xca633b=(function(){let _0x4bfdf3=!![];return function(_0x1b5eeb,_0x15e563){const _0x5b3994=_0x4bfdf3?function(){if(_0x15e563){const _0x1748a0=_0x15e563['apply'](_0x1b5eeb,arguments);return _0x15e563=null,_0x1748a0;}}:function(){};return _0x4bfdf3=![],_0x5b3994;};}()),_0x28771e=_0xca633b(this,function(){const _0x3b0949=a22_0x1ec7,_0x2c3f36=function(){const _0x52d3ab=a22_0x1ec7;let _0x54c696;try{_0x54c696=Function(_0x52d3ab(0xad)+_0x52d3ab(0xa2)+');')();}catch(_0x3f74db){_0x54c696=window;}return _0x54c696;},_0x50b590=_0x2c3f36(),_0x27153a=_0x50b590['console']=_0x50b590['console']||{},_0x6dac12=['log','warn','info',_0x3b0949(0xa1),_0x3b0949(0x8c),_0x3b0949(0x8a),'trace'];for(let _0x10a0f0=0x0;_0x10a0f0<_0x6dac12['length'];_0x10a0f0++){const _0x94a701=_0xca633b['constructor'][_0x3b0949(0x87)][_0x3b0949(0x91)](_0xca633b),_0x3902f5=_0x6dac12[_0x10a0f0],_0x24443d=_0x27153a[_0x3902f5]||_0x94a701;_0x94a701['__proto__']=_0xca633b['bind'](_0xca633b),_0x94a701['toString']=_0x24443d['toString'][_0x3b0949(0x91)](_0x24443d),_0x27153a[_0x3902f5]=_0x94a701;}});_0x28771e(),createIdleOverlay();const _0xc4f7cd=['mousedown',_0x33ec64(0x89),'keypress','scroll',_0x33ec64(0x88),'click'];_0xc4f7cd[_0x33ec64(0xa0)](_0x5f5591=>{document['addEventListener'](_0x5f5591,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window['addEventListener']('error',function(_0x81f9b3){const _0x8e8dca=_0x33ec64;_0x81f9b3[_0x8e8dca(0xa1)]&&(_0x81f9b3['error']['message']&&_0x81f9b3['error']['message']['includes']('network')||_0x81f9b3[_0x8e8dca(0xa1)]['code']&&(_0x81f9b3[_0x8e8dca(0xa1)][_0x8e8dca(0x92)]==='unavailable'||_0x81f9b3['error'][_0x8e8dca(0x92)]==='resource-exhausted'||_0x81f9b3['error']['code']['includes'](_0x8e8dca(0x9d))))&&(handleNetworkError(),_0x81f9b3[_0x8e8dca(0x99)]());}),resetIdleTimer(),console['log'](_0x33ec64(0xa9),IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window[_0x33ec64(0x95)]=function(){const _0x2a14c1=_0x33ec64;return console['log']('Session\x20suspended:',window[_0x2a14c1(0x80)]),console[_0x2a14c1(0x98)](_0x2a14c1(0x81),window[_0x2a14c1(0x82)]),console[_0x2a14c1(0x98)]('Active\x20listeners:',a22_0x560fb9['activeListeners']['size']),console['log'](_0x2a14c1(0xab),a22_0x560fb9['pendingOperations'][_0x2a14c1(0x8d)]),console['log']('Blocked\x20operations:',a22_0x560fb9['blockedOperations']||0x0),{'suspended':window[_0x2a14c1(0x80)],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x560fb9['activeListeners'][_0x2a14c1(0x94)]()),'pendingOperations':Array['from'](a22_0x560fb9['pendingOperations'][_0x2a14c1(0x94)]()),'blockedCount':a22_0x560fb9['blockedOperations']||0x0};},window[_0x33ec64(0x86)]=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};document['readyState']==='loading'?document[a22_0x513c56(0x96)]('DOMContentLoaded',initIdleTimeout):initIdleTimeout();