(function(_0x24076f,_0xaf98e5){const _0x3587fb=a0_0x366f,_0xc3b198=_0x24076f();while(!![]){try{const _0x5147b2=parseInt(_0x3587fb(0x151))/0x1*(parseInt(_0x3587fb(0x134))/0x2)+parseInt(_0x3587fb(0x155))/0x3+-parseInt(_0x3587fb(0x150))/0x4+parseInt(_0x3587fb(0x14a))/0x5+-parseInt(_0x3587fb(0x145))/0x6+parseInt(_0x3587fb(0x142))/0x7*(-parseInt(_0x3587fb(0x140))/0x8)+-parseInt(_0x3587fb(0x14e))/0x9;if(_0x5147b2===_0xaf98e5)break;else _0xc3b198['push'](_0xc3b198['shift']());}catch(_0x138713){_0xc3b198['push'](_0xc3b198['shift']());}}}(a0_0x8f0a,0x8fb8f));const a0_0x29f1c7=(function(){let _0x1e9222=!![];return function(_0x2686f9,_0x4fa85e){const _0x542308=_0x1e9222?function(){const _0x5f0101=a0_0x366f;if(_0x4fa85e){const _0x3a21cf=_0x4fa85e[_0x5f0101(0x152)](_0x2686f9,arguments);return _0x4fa85e=null,_0x3a21cf;}}:function(){};return _0x1e9222=![],_0x542308;};}()),a0_0x59a86b=a0_0x29f1c7(this,function(){const _0x52d87d=a0_0x366f,_0x3c4d31=function(){let _0xbfa318;try{_0xbfa318=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1c9bf7){_0xbfa318=window;}return _0xbfa318;},_0x390e50=_0x3c4d31(),_0x921cfe=_0x390e50['console']=_0x390e50['console']||{},_0x133578=[_0x52d87d(0x13f),'warn','info','error','exception','table',_0x52d87d(0x148)];for(let _0x4bd5c2=0x0;_0x4bd5c2<_0x133578['length'];_0x4bd5c2++){const _0x49ca32=a0_0x29f1c7[_0x52d87d(0x133)][_0x52d87d(0x135)]['bind'](a0_0x29f1c7),_0x363a21=_0x133578[_0x4bd5c2],_0x1a7ce7=_0x921cfe[_0x363a21]||_0x49ca32;_0x49ca32['__proto__']=a0_0x29f1c7['bind'](a0_0x29f1c7),_0x49ca32['toString']=_0x1a7ce7['toString']['bind'](_0x1a7ce7),_0x921cfe[_0x363a21]=_0x49ca32;}});function a0_0x366f(_0x5c51d1,_0x19c8d0){const _0x4e8f66=a0_0x8f0a();return a0_0x366f=function(_0x59a86b,_0x29f1c7){_0x59a86b=_0x59a86b-0x131;let _0x38da71=_0x4e8f66[_0x59a86b];return _0x38da71;},a0_0x366f(_0x5c51d1,_0x19c8d0);}a0_0x59a86b();import{doc,getDoc,getDocs,collection}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const tokenCache=new Map(),CACHE_DURATION=0x5*0x3c*0x3e8;export async function getUserTokens(_0x446ac6){const _0x4bd9f1=a0_0x366f,_0x5c7c7d='tokens_'+_0x446ac6,_0x23dcab=tokenCache[_0x4bd9f1(0x153)](_0x5c7c7d);if(_0x23dcab&&Date[_0x4bd9f1(0x149)]()-_0x23dcab[_0x4bd9f1(0x138)]<CACHE_DURATION)return _0x23dcab['tokens'];try{const _0x44ea7d=doc(db,'userTokens',_0x446ac6),_0x3b7bd0=await getDoc(_0x44ea7d);let _0x3608c1=[];return _0x3b7bd0[_0x4bd9f1(0x144)]()&&(_0x3608c1=_0x3b7bd0[_0x4bd9f1(0x14d)]()[_0x4bd9f1(0x141)]||[]),tokenCache[_0x4bd9f1(0x154)](_0x5c7c7d,{'tokens':_0x3608c1,'timestamp':Date['now']()}),_0x3608c1;}catch(_0x476a8b){return console['error']('Error\x20fetching\x20user\x20tokens:',_0x476a8b),[];}}export async function getBulkUserTokens(_0x13e741){const _0x39e20b=a0_0x366f,_0x652aee=new Map(),_0x1cd90b=[];_0x13e741['forEach'](_0x75f1eb=>{const _0x28ad82=a0_0x366f,_0x100993=_0x28ad82(0x13a)+_0x75f1eb,_0x3662bd=tokenCache['get'](_0x100993);_0x3662bd&&Date['now']()-_0x3662bd[_0x28ad82(0x138)]<CACHE_DURATION?_0x652aee[_0x28ad82(0x154)](_0x75f1eb,_0x3662bd['tokens']):_0x1cd90b[_0x28ad82(0x13d)](_0x75f1eb);});if(_0x1cd90b[_0x39e20b(0x147)]>0x0)try{const _0x14fe66=_0x1cd90b[_0x39e20b(0x131)](async _0x267156=>{const _0x4d1694=_0x39e20b,_0x1f30c0=doc(db,_0x4d1694(0x136),_0x267156),_0x31ae9b=await getDoc(_0x1f30c0);let _0x39cbf1=[];_0x31ae9b[_0x4d1694(0x144)]()&&(_0x39cbf1=_0x31ae9b['data']()['tokens']||[]);const _0x16b0a5=_0x4d1694(0x13a)+_0x267156;return tokenCache['set'](_0x16b0a5,{'tokens':_0x39cbf1,'timestamp':Date['now']()}),[_0x267156,_0x39cbf1];}),_0x400250=await Promise[_0x39e20b(0x14f)](_0x14fe66);_0x400250[_0x39e20b(0x143)](([_0x37070a,_0x4f38d3])=>{_0x652aee['set'](_0x37070a,_0x4f38d3);});}catch(_0x31691f){console['error']('Error\x20fetching\x20bulk\x20user\x20tokens:',_0x31691f);}return _0x652aee;}export async function getTokensByUsernames(_0x15524c){const _0x2e9b3c=a0_0x366f,_0x1fd402=new Map();try{const _0xdaed4d=collection(db,_0x2e9b3c(0x13c)),_0x4d2514=await getDocs(_0xdaed4d),_0x1a6c34=new Map();_0x4d2514['forEach'](_0x466669=>{const _0x49e37f=_0x2e9b3c,_0x2e73a2=_0x466669['data']();_0x2e73a2['username']&&_0x15524c['includes'](_0x2e73a2[_0x49e37f(0x14c)])&&_0x1a6c34[_0x49e37f(0x154)](_0x2e73a2[_0x49e37f(0x14c)],_0x466669['id']);});const _0x5f34b7=Array['from'](_0x1a6c34['values']());if(_0x5f34b7[_0x2e9b3c(0x147)]>0x0){const _0x2010cf=await getBulkUserTokens(_0x5f34b7);_0x1a6c34['forEach']((_0x10e8ae,_0x1ac80a)=>{const _0x415d66=_0x2e9b3c,_0x31afd0=_0x2010cf[_0x415d66(0x153)](_0x10e8ae)||[];_0x1fd402['set'](_0x1ac80a,_0x31afd0);});}}catch(_0x1f9f5b){console[_0x2e9b3c(0x13e)](_0x2e9b3c(0x137),_0x1f9f5b);}return _0x1fd402;}export function clearTokenCache(_0x6b9a47=null){const _0x45782a=a0_0x366f;if(_0x6b9a47){const _0x512186='tokens_'+_0x6b9a47;tokenCache['delete'](_0x512186),console['log']('ðŸ—‘ï¸\x20Cleared\x20token\x20cache\x20for\x20user:\x20'+_0x6b9a47);}else tokenCache[_0x45782a(0x132)](),console['log']('ðŸ—‘ï¸\x20Cleared\x20all\x20token\x20cache');}function a0_0x8f0a(){const _0x427592=['1607692ZCKdLW','269734MyWmWg','apply','get','set','2934549JDGiea','map','clear','constructor','6AtxxnE','prototype','userTokens','Error\x20fetching\x20tokens\x20by\x20usernames:','timestamp','getTime','tokens_','seconds','userProfiles','push','error','log','328jBGQWn','tokens','29043gQhOOM','forEach','exists','5837790uRLoYc','sort','length','trace','now','2151400MURjEg','purchasedAt','username','data','755829CcOEZm','all'];a0_0x8f0a=function(){return _0x427592;};return a0_0x8f0a();}export async function forceRefreshUserTokens(_0x142214){return clearTokenCache(_0x142214),await getUserTokens(_0x142214);}export function getPrimaryDisplayToken(_0x2d0398){const _0x305d6d=a0_0x366f;if(!_0x2d0398||_0x2d0398['length']===0x0)return null;const _0x32970a=_0x2d0398['find'](_0x3da8bd=>_0x3da8bd['equipped']===!![]);if(_0x32970a)return _0x32970a;const _0x1a1128=[..._0x2d0398][_0x305d6d(0x146)]((_0x167e4c,_0x165e05)=>{const _0x4d1fc9=_0x305d6d;let _0x24f97d,_0x2085f8;if(_0x167e4c[_0x4d1fc9(0x14b)]){if(_0x167e4c['purchasedAt'][_0x4d1fc9(0x13b)])_0x24f97d=_0x167e4c[_0x4d1fc9(0x14b)]['seconds'];else{if(_0x167e4c['purchasedAt']instanceof Date)_0x24f97d=_0x167e4c['purchasedAt']['getTime']()/0x3e8;else typeof _0x167e4c['purchasedAt']==='string'?_0x24f97d=new Date(_0x167e4c['purchasedAt'])['getTime']()/0x3e8:_0x24f97d=0x0;}}else _0x24f97d=0x0;if(_0x165e05['purchasedAt']){if(_0x165e05[_0x4d1fc9(0x14b)]['seconds'])_0x2085f8=_0x165e05['purchasedAt']['seconds'];else{if(_0x165e05['purchasedAt']instanceof Date)_0x2085f8=_0x165e05[_0x4d1fc9(0x14b)][_0x4d1fc9(0x139)]()/0x3e8;else typeof _0x165e05['purchasedAt']==='string'?_0x2085f8=new Date(_0x165e05['purchasedAt'])['getTime']()/0x3e8:_0x2085f8=0x0;}}else _0x2085f8=0x0;return _0x2085f8-_0x24f97d;});return _0x1a1128[0x0];}