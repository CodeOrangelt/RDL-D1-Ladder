const a30_0x2e1ddf=(function(){let _0x599a63=!![];return function(_0x1edabd,_0x30f13b){const _0x285b30=_0x599a63?function(){if(_0x30f13b){const _0x53bf55=_0x30f13b['apply'](_0x1edabd,arguments);return _0x30f13b=null,_0x53bf55;}}:function(){};return _0x599a63=![],_0x285b30;};}()),a30_0x1e449e=a30_0x2e1ddf(this,function(){const _0x4b556f=a30_0xe3ae,_0x56a205=function(){let _0x3837f1;try{_0x3837f1=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4d8d22){_0x3837f1=window;}return _0x3837f1;},_0x436ba1=_0x56a205(),_0xd31dc7=_0x436ba1[_0x4b556f(0x130)]=_0x436ba1['console']||{},_0x321d9e=['log','warn',_0x4b556f(0x136),'error',_0x4b556f(0x14f),'table',_0x4b556f(0x152)];for(let _0x2fe829=0x0;_0x2fe829<_0x321d9e['length'];_0x2fe829++){const _0x5430fd=a30_0x2e1ddf[_0x4b556f(0x143)][_0x4b556f(0x134)]['bind'](a30_0x2e1ddf),_0x3aa3b4=_0x321d9e[_0x2fe829],_0x494fee=_0xd31dc7[_0x3aa3b4]||_0x5430fd;_0x5430fd['__proto__']=a30_0x2e1ddf['bind'](a30_0x2e1ddf),_0x5430fd['toString']=_0x494fee['toString'][_0x4b556f(0x121)](_0x494fee),_0xd31dc7[_0x3aa3b4]=_0x5430fd;}});a30_0x1e449e();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import a30_0x258c30 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x3c3828=![]){const _0x49d25f=a30_0xe3ae,_0x1a409a=document['querySelector']('#ladder-d2\x20tbody');if(!_0x1a409a){console[_0x49d25f(0x14a)]('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x1a409a['innerHTML']='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x31eb03=Date['now']();if(!_0x3c3828&&playerCacheD2[_0x49d25f(0x151)]&&_0x31eb03-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x23524c=collection(db,'playersD2'),_0xe71de8=await a30_0x258c30['getDocuments'](_0x23524c),_0x1a9bbb=[];_0xe71de8[_0x49d25f(0x157)](_0x5cf551=>{const _0xa3df87=_0x49d25f,_0x502d3b=_0x5cf551['data']();_0x502d3b[_0xa3df87(0x15d)]&&_0x1a9bbb['push']({..._0x502d3b,'id':_0x5cf551['id'],'elo':_0x502d3b['eloRating']||0x0,'position':_0x502d3b['position']||Number[_0xa3df87(0x148)]});});const _0x5b2e9b=collection(db,_0x49d25f(0x14e)),_0x3e4dca=await getDocs(_0x5b2e9b),_0x1a0f20=new Map();_0x3e4dca[_0x49d25f(0x157)](_0x5b5298=>{const _0x3ebfa5=_0x49d25f,_0x48d236=_0x5b5298[_0x3ebfa5(0x151)]();_0x48d236['username']&&_0x1a0f20['set'](_0x48d236['username']['toLowerCase'](),_0x48d236);});for(const _0x40a1dc of _0x1a9bbb){const _0x54a0d7=_0x40a1dc[_0x49d25f(0x15d)]['toLowerCase']();if(_0x1a0f20[_0x49d25f(0x155)](_0x54a0d7)){const _0x9287c9=_0x1a0f20['get'](_0x54a0d7);_0x9287c9['country']&&(_0x40a1dc[_0x49d25f(0x140)]=_0x9287c9['country']['toLowerCase']()),_0x40a1dc['points']=_0x9287c9[_0x49d25f(0x133)]||0x0;}else _0x40a1dc[_0x49d25f(0x133)]=0x0;}const _0x2aaa21=_0x1a9bbb[_0x49d25f(0x139)](_0x5da655=>_0x5da655[_0x49d25f(0x15d)]),_0x5bf3fb=await fetchBatchMatchStatsD2(_0x2aaa21);_0x1a9bbb[_0x49d25f(0x13a)]((_0x10752c,_0x292885)=>{const _0x246a90=_0x49d25f,_0x42495d=_0x5bf3fb['get'](_0x10752c[_0x246a90(0x15d)])?.['totalMatches']||0x0,_0x24f899=_0x5bf3fb['get'](_0x292885['username'])?.[_0x246a90(0x12a)]||0x0;if(_0x42495d===0x0!==(_0x24f899===0x0))return _0x42495d===0x0?0x1:-0x1;return(_0x10752c['position']||0x3e7)-(_0x292885['position']||0x3e7);}),_0x1a9bbb['forEach']((_0x6924ae,_0x397cd0)=>{const _0x14a074=_0x49d25f;_0x6924ae[_0x14a074(0x156)]=_0x397cd0+0x1;}),playerCacheD2['data']=_0x1a9bbb,playerCacheD2['timestamp']=_0x31eb03,updateLadderDisplayD2(_0x1a9bbb);}catch(_0x4ca4eb){console['error']('Error\x20loading\x20D2\x20ladder:',_0x4ca4eb),_0x1a409a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0x4ca4eb['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x153ffc){const _0x35bd85=a30_0xe3ae;if(_0x153ffc['length']===0x0)return 0x1;let _0x23e941=0x0;return _0x153ffc[_0x35bd85(0x157)](_0x3fa1ff=>{_0x3fa1ff['position']&&typeof _0x3fa1ff['position']==='number'&&_0x3fa1ff['position']>_0x23e941&&(_0x23e941=_0x3fa1ff['position']);}),_0x23e941+0x1;}async function updatePlayerPositions(_0xf63ff0,_0x1aa078){const _0x3bb234=a30_0xe3ae;try{const _0x419230=collection(db,'playersD2'),_0x447eb6=await getDocs(_0x419230),_0x1f2de3=[];_0x447eb6['forEach'](_0x69f5be=>{const _0x2bb17c=a30_0xe3ae;_0x1f2de3[_0x2bb17c(0x149)]({'id':_0x69f5be['id'],..._0x69f5be['data']()});});const _0x4bbef1=_0x1f2de3['find'](_0x19ba1f=>_0x19ba1f[_0x3bb234(0x15d)]===_0xf63ff0),_0x5f3896=_0x1f2de3['find'](_0x524632=>_0x524632['username']===_0x1aa078);if(!_0x4bbef1||!_0x5f3896){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x4bbef1['position']>_0x5f3896['position']){const _0x733930=_0x5f3896['position'];for(const _0x2dab1e of _0x1f2de3){_0x2dab1e[_0x3bb234(0x156)]>=_0x5f3896[_0x3bb234(0x156)]&&_0x2dab1e['position']<_0x4bbef1['position']&&_0x2dab1e[_0x3bb234(0x15d)]!==_0xf63ff0&&await updateDoc(doc(db,_0x3bb234(0x125),_0x2dab1e['id']),{'position':_0x2dab1e['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x4bbef1['id']),{'position':_0x733930});if(_0x733930===0x1){const _0xc9708d=doc(db,'playersD2',_0x4bbef1['id']),_0x35240a=await getDoc(_0xc9708d);!_0x35240a['data']()['firstPlaceDate']&&await updateDoc(_0xc9708d,{'firstPlaceDate':Timestamp['now']()});}if(_0x5f3896[_0x3bb234(0x156)]===0x1){const _0xf61175=doc(db,'playersD2',_0x5f3896['id']);await updateDoc(_0xf61175,{'firstPlaceDate':null});}playerCacheD2[_0x3bb234(0x135)]=0x0;}}catch(_0x24e269){console[_0x3bb234(0x14a)]('Error\x20updating\x20D2\x20player\x20positions:',_0x24e269);}}function getPlayerRankNameD2(_0x23675c){const _0x241092=a30_0xe3ae;if(_0x23675c>=0x834)return _0x241092(0x158);if(_0x23675c>=0x708)return _0x241092(0x132);if(_0x23675c>=0x640)return'Silver';if(_0x23675c>=0x578)return _0x241092(0x159);return _0x241092(0x13c);}function a30_0xe3ae(_0xdb43cf,_0x4020ab){const _0x1e449e=a30_0x3061();return a30_0xe3ae=function(_0x2e1ddf,_0x373260){_0x2e1ddf=_0x2e1ddf-0x121;let _0x30618e=_0x1e449e[_0x2e1ddf];return _0x30618e;},a30_0xe3ae(_0xdb43cf,_0x4020ab);}window['refreshLadderDisplayD2']=function(_0x4d1114=!![]){typeof displayLadderD2==='function'?displayLadderD2(_0x4d1114):console['warn']('displayLadderD2\x20function\x20not\x20available');};async function updateLadderDisplayD2(_0x3f4acb){const _0x25ec4a=a30_0xe3ae;_0x3f4acb['sort']((_0x2d4278,_0x4be3a4)=>_0x2d4278['position']-_0x4be3a4['position']);const _0x21dfd7=document['querySelector']('#ladder-d2\x20tbody');if(!_0x21dfd7)return;_0x21dfd7[_0x25ec4a(0x146)]='';const _0x291182=_0x3f4acb['map'](_0x421e75=>_0x421e75['username']),_0x330323=await fetchBatchMatchStatsD2(_0x291182);let _0x1361bf=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x1361bf=await getTokensByUsernames(_0x291182);}catch(_0xb9230f){console['error']('D2:\x20Error\x20fetching\x20tokens:',_0xb9230f);}const _0x7d5e98=document['querySelector'](_0x25ec4a(0x145));_0x7d5e98&&(_0x7d5e98['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x1bfbe1=_0x3f4acb['map'](_0x4bb609=>{const _0x3d06ea=_0x330323['get'](_0x4bb609['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0x3ae514=_0x1361bf['get'](_0x4bb609['username'])||[],_0x1a7c2b=getPrimaryDisplayToken(_0x3ae514);return createPlayerRowWithTokenD2(_0x4bb609,_0x3d06ea,_0x1a7c2b);})[_0x25ec4a(0x124)]('');_0x21dfd7['innerHTML']=_0x1bfbe1,getPlayersLastEloChangesD2(_0x291182)[_0x25ec4a(0x12e)](_0x12a752=>{const _0x1c5e9b=_0x25ec4a,_0x13412a=new Map();_0x21dfd7['querySelectorAll']('tr')[_0x1c5e9b(0x157)]((_0x4258af,_0x3ca7ee)=>{_0x3ca7ee<_0x291182['length']&&_0x13412a['set'](_0x291182[_0x3ca7ee],_0x4258af);}),_0x12a752['forEach']((_0x56ee3f,_0x45657d)=>{const _0x5e07f8=_0x1c5e9b,_0x43ae89=_0x13412a[_0x5e07f8(0x15c)](_0x45657d);if(_0x43ae89&&_0x56ee3f!==0x0){const _0x4844ac=_0x43ae89[_0x5e07f8(0x128)](_0x5e07f8(0x15a));if(_0x4844ac){const _0x4a084b=_0x56ee3f>0x0?'+'+_0x56ee3f:''+_0x56ee3f,_0x32ed8e=_0x4844ac[_0x5e07f8(0x128)](_0x5e07f8(0x122));_0x32ed8e&&(_0x32ed8e['textContent']=_0x4a084b,_0x32ed8e[_0x5e07f8(0x15e)]['color']=_0x56ee3f>0x0?_0x5e07f8(0x14b):'#F44336',_0x32ed8e['style'][_0x5e07f8(0x144)]='bold',_0x32ed8e['style']['fontSize']='0.85em',_0x32ed8e['style']['display']='inline',_0x32ed8e['style']['visibility']='visible',_0x32ed8e['style']['opacity']='1');}}});})['catch'](_0xafd4fe=>console['error']('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0xafd4fe));}function createPlayerRowWithTokenD2(_0x21853d,_0x29ad05,_0x4f069f){const _0x5a9738=a30_0xe3ae,_0x7d963=parseFloat(_0x21853d['elo'])||0x0;let _0x1369e1='gray';if(_0x7d963>=0x7d0)_0x1369e1=_0x5a9738(0x129);else{if(_0x7d963>=0x708)_0x1369e1='#FFD700';else{if(_0x7d963>=0x640)_0x1369e1=_0x5a9738(0x137);else _0x7d963>=0x578&&(_0x1369e1=_0x5a9738(0x13f));}}let _0xe4920b='';_0x21853d['country']&&(_0xe4920b='<img\x20src=\x22../images/flags/'+_0x21853d['country'][_0x5a9738(0x12d)]()+_0x5a9738(0x154)+_0x21853d[_0x5a9738(0x140)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x558e51='';return _0x4f069f&&(_0x558e51=_0x5a9738(0x138)+_0x4f069f['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x4f069f['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x4f069f['tokenName']+'\x20'+(_0x4f069f['equipped']?_0x5a9738(0x12f):'')+_0x5a9738(0x147)),'\x0a<tr>\x0a\x20\x20\x20\x20<td>'+_0x21853d['position']+_0x5a9738(0x150)+encodeURIComponent(_0x21853d[_0x5a9738(0x15d)])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x1369e1+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x21853d[_0x5a9738(0x15d)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0xe4920b+_0x5a9738(0x126)+_0x558e51+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x1369e1+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x7d963+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td>'+_0x29ad05[_0x5a9738(0x12a)]+'</td>\x0a\x20\x20\x20\x20<td>'+_0x29ad05['wins']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x29ad05['losses']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x29ad05['kda']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x29ad05['winRate']+_0x5a9738(0x14d)+(_0x21853d[_0x5a9738(0x133)]||0x0)+_0x5a9738(0x13b);}async function getPlayersLastEloChangesD2(_0x25e669){const _0x300d61=a30_0xe3ae,_0x1a58d1=new Map();_0x25e669['forEach'](_0x830f9=>_0x1a58d1['set'](_0x830f9,0x0));try{const _0x52c272=collection(db,_0x300d61(0x15b)),_0x48f9a5=query(_0x52c272,orderBy('timestamp','desc'),limit(0x64)),_0x2e46d8=await getDocs(_0x48f9a5),_0x515408=new Map(),_0x70b14a=await getDocs(collection(db,'playersD2'));_0x70b14a[_0x300d61(0x157)](_0x33ec18=>{const _0x2a97fd=_0x300d61,_0x1fdb44=_0x33ec18['data']();_0x1fdb44[_0x2a97fd(0x15d)]&&_0x515408[_0x2a97fd(0x13d)](_0x33ec18['id'],_0x1fdb44[_0x2a97fd(0x15d)]);});const _0x579a8c=new Map();_0x2e46d8['forEach'](_0x744a0e=>{const _0x53f3df=_0x300d61,_0x30cd11=_0x744a0e['data']();let _0x4bfb9f=_0x30cd11[_0x53f3df(0x15d)]||_0x30cd11['playerUsername'];!_0x4bfb9f&&_0x30cd11['player']&&_0x515408['has'](_0x30cd11['player'])&&(_0x4bfb9f=_0x515408['get'](_0x30cd11['player'])),_0x4bfb9f&&_0x25e669['includes'](_0x4bfb9f)&&(!_0x579a8c['has'](_0x4bfb9f)&&_0x579a8c['set'](_0x4bfb9f,[]),_0x579a8c['get'](_0x4bfb9f)[_0x53f3df(0x149)]({..._0x30cd11,'timestamp':_0x30cd11['timestamp']?.[_0x53f3df(0x141)]||0x0,'username':_0x4bfb9f}));}),_0x579a8c['forEach']((_0x5759bf,_0x5be8a5)=>{const _0x1db47=_0x300d61;if(_0x5759bf['length']>0x0){_0x5759bf['sort']((_0xfec13c,_0x542fbe)=>_0x542fbe['timestamp']-_0xfec13c[_0x1db47(0x135)]);const _0x33c041=_0x5759bf['find'](_0xc62ee0=>_0xc62ee0[_0x1db47(0x131)]!==undefined||_0xc62ee0[_0x1db47(0x14c)]!==undefined&&_0xc62ee0[_0x1db47(0x123)]!==undefined);if(_0x33c041){let _0x2cde7e;if(_0x33c041[_0x1db47(0x131)]!==undefined)_0x2cde7e=_0x33c041['change'];else _0x33c041[_0x1db47(0x14c)]!==undefined&&_0x33c041['previousElo']!==undefined&&(_0x2cde7e=_0x33c041['newElo']-_0x33c041['previousElo']);_0x2cde7e!==undefined&&_0x1a58d1[_0x1db47(0x13d)](_0x5be8a5,_0x2cde7e);}}});if(_0x579a8c['size']===0x0){const _0x245988=collection(db,'eloHistory'),_0x289c6f=query(_0x245988,where('gameMode','==','D2'),orderBy(_0x300d61(0x135),'desc'),limit(0x32));try{const _0x48a1cb=await getDocs(_0x289c6f);_0x48a1cb['forEach'](_0x2923fe=>{const _0x13aab4=_0x300d61,_0xff1458=_0x2923fe['data'](),_0x3e4f69=_0xff1458['username']||_0xff1458['playerUsername'];if(_0x3e4f69&&_0x25e669[_0x13aab4(0x13e)](_0x3e4f69)){const _0x424c73=_0xff1458['change']||(_0xff1458[_0x13aab4(0x14c)]!==undefined&&_0xff1458[_0x13aab4(0x123)]!==undefined?_0xff1458['newElo']-_0xff1458['previousElo']:0x0);_0x424c73!==0x0&&_0x1a58d1['set'](_0x3e4f69,_0x424c73);}});}catch(_0x2a127e){}}}catch(_0x2cd17a){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0x2cd17a);}return _0x1a58d1;}async function fetchBatchMatchStatsD2(_0x170811){const _0x3cfa13=a30_0xe3ae,_0x1615fb=new Map();try{_0x170811['forEach'](_0xe9a326=>{const _0x4ab07e=a30_0xe3ae;_0x1615fb[_0x4ab07e(0x13d)](_0xe9a326,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x35e908=collection(db,'approvedMatchesD2'),_0x1ac562=await getDocs(_0x35e908);_0x1ac562['forEach'](_0x3a192a=>{const _0x32539e=a30_0xe3ae,_0x287332=_0x3a192a[_0x32539e(0x151)](),_0x3d7b92=_0x287332[_0x32539e(0x153)],_0x3734b4=_0x287332['loserUsername'];if(_0x170811['includes'](_0x3d7b92)){const _0x495be4=_0x1615fb[_0x32539e(0x15c)](_0x3d7b92);_0x495be4['wins']++,_0x495be4['totalMatches']++,_0x495be4['totalKills']+=parseInt(_0x287332['winnerScore'])||0x0,_0x495be4['totalDeaths']+=parseInt(_0x287332['loserScore'])||0x0;}if(_0x170811[_0x32539e(0x13e)](_0x3734b4)){const _0x4534d5=_0x1615fb[_0x32539e(0x15c)](_0x3734b4);_0x4534d5['losses']++,_0x4534d5['totalMatches']++,_0x4534d5[_0x32539e(0x127)]+=parseInt(_0x287332['loserScore'])||0x0,_0x4534d5['totalDeaths']+=parseInt(_0x287332['winnerScore'])||0x0;}}),_0x170811['forEach'](_0x442a4b=>{const _0x5cbdad=a30_0xe3ae,_0x3266aa=_0x1615fb['get'](_0x442a4b);_0x3266aa['kda']=_0x3266aa['totalDeaths']>0x0?(_0x3266aa['totalKills']/_0x3266aa[_0x5cbdad(0x142)])[_0x5cbdad(0x12b)](0x2):_0x3266aa['totalKills']['toFixed'](0x2),_0x3266aa[_0x5cbdad(0x12c)]=_0x3266aa['totalMatches']>0x0?(_0x3266aa['wins']/_0x3266aa[_0x5cbdad(0x12a)]*0x64)['toFixed'](0x1):0x0;});}catch(_0x215e48){console[_0x3cfa13(0x14a)]('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x215e48);}return _0x1615fb;}export{displayLadderD2,updatePlayerPositions};function a30_0x3061(){const _0x27910e=['bind','.trend-indicator','previousElo','join','playersD2','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','totalKills','querySelector','#50C878','totalMatches','toFixed','winRate','toLowerCase','then','(Equipped)','console','change','Gold','points','prototype','timestamp','info','#b9f1fc','<img\x20src=\x22','map','sort','</td>\x0a</tr>','Unranked','set','includes','#CD7F32','country','seconds','totalDeaths','constructor','fontWeight','#ladder-d2\x20thead\x20tr','innerHTML','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','MAX_SAFE_INTEGER','push','error','#4CAF50','newElo','%</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','userProfiles','exception','</td>\x0a\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','data','trace','winnerUsername','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','has','position','forEach','Emerald','Bronze','td:nth-child(3)','eloHistoryD2','get','username','style'];a30_0x3061=function(){return _0x27910e;};return a30_0x3061();}