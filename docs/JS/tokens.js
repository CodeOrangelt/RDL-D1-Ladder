(function(_0x413c09,_0x161935){const _0x8c2bd4=a0_0x23aa,_0x26e08c=_0x413c09();while(!![]){try{const _0x18f967=parseInt(_0x8c2bd4(0x1bb))/0x1+parseInt(_0x8c2bd4(0x1bc))/0x2*(parseInt(_0x8c2bd4(0x1b5))/0x3)+-parseInt(_0x8c2bd4(0x1c1))/0x4*(-parseInt(_0x8c2bd4(0x1c3))/0x5)+parseInt(_0x8c2bd4(0x1ba))/0x6+parseInt(_0x8c2bd4(0x1c5))/0x7*(parseInt(_0x8c2bd4(0x1bf))/0x8)+-parseInt(_0x8c2bd4(0x1ce))/0x9+-parseInt(_0x8c2bd4(0x1c6))/0xa;if(_0x18f967===_0x161935)break;else _0x26e08c['push'](_0x26e08c['shift']());}catch(_0x32fc8e){_0x26e08c['push'](_0x26e08c['shift']());}}}(a0_0x1118,0xd66d4));function a0_0x1118(){const _0x1812d3=['57oYBelh','return\x20(function()\x20','now','get','timestamp','8154246dKeAKS','1574657KuCkOQ','6346BYSaWR','__proto__','length','3559984zCWXJZ','bind','4968876tybvWV','sort','5QUgVlu','trace','7sUsODR','32256620sPIWsX','set','console','apply','error','tokens','delete','toString','5195232NyjhWA','getTime','seconds','find'];a0_0x1118=function(){return _0x1812d3;};return a0_0x1118();}const a0_0x4f4f8b=(function(){let _0x279f21=!![];return function(_0x96f52d,_0x1a846c){const _0x25aa7d=_0x279f21?function(){const _0x1dd9af=a0_0x23aa;if(_0x1a846c){const _0x1aa1dd=_0x1a846c[_0x1dd9af(0x1c9)](_0x96f52d,arguments);return _0x1a846c=null,_0x1aa1dd;}}:function(){};return _0x279f21=![],_0x25aa7d;};}()),a0_0x1b0b9d=a0_0x4f4f8b(this,function(){const _0x2b9426=a0_0x23aa;let _0x418888;try{const _0x3d1cf8=Function(_0x2b9426(0x1b6)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x418888=_0x3d1cf8();}catch(_0x2f0c8b){_0x418888=window;}const _0xe254ac=_0x418888[_0x2b9426(0x1c8)]=_0x418888['console']||{},_0x2b4400=['log','warn','info',_0x2b9426(0x1ca),'exception','table',_0x2b9426(0x1c4)];for(let _0x38642f=0x0;_0x38642f<_0x2b4400[_0x2b9426(0x1be)];_0x38642f++){const _0x4fc6fb=a0_0x4f4f8b['constructor']['prototype'][_0x2b9426(0x1c0)](a0_0x4f4f8b),_0x1ffdd4=_0x2b4400[_0x38642f],_0x2df89f=_0xe254ac[_0x1ffdd4]||_0x4fc6fb;_0x4fc6fb[_0x2b9426(0x1bd)]=a0_0x4f4f8b[_0x2b9426(0x1c0)](a0_0x4f4f8b),_0x4fc6fb['toString']=_0x2df89f[_0x2b9426(0x1cd)][_0x2b9426(0x1c0)](_0x2df89f),_0xe254ac[_0x1ffdd4]=_0x4fc6fb;}});a0_0x1b0b9d();function a0_0x23aa(_0x4513e0,_0x307786){const _0x137900=a0_0x1118();return a0_0x23aa=function(_0x1b0b9d,_0x4f4f8b){_0x1b0b9d=_0x1b0b9d-0x1b3;let _0x28e28b=_0x137900[_0x1b0b9d];return _0x28e28b;},a0_0x23aa(_0x4513e0,_0x307786);}import{doc,getDoc,getDocs,collection}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const tokenCache=new Map(),CACHE_DURATION=0x5*0x3c*0x3e8;export async function getUserTokens(_0xf04bc1){const _0x378ebf=a0_0x23aa,_0x2f3a33='tokens_'+_0xf04bc1,_0x28998a=tokenCache['get'](_0x2f3a33);if(_0x28998a&&Date['now']()-_0x28998a[_0x378ebf(0x1b9)]<CACHE_DURATION)return _0x28998a['tokens'];try{const _0x57e8b=doc(db,'userTokens',_0xf04bc1),_0x5e2841=await getDoc(_0x57e8b);let _0x1b0ab1=[];return _0x5e2841['exists']()&&(_0x1b0ab1=_0x5e2841['data']()[_0x378ebf(0x1cb)]||[]),tokenCache[_0x378ebf(0x1c7)](_0x2f3a33,{'tokens':_0x1b0ab1,'timestamp':Date['now']()}),_0x1b0ab1;}catch(_0x53d762){return console['error']('Error\x20fetching\x20user\x20tokens:',_0x53d762),[];}}export async function getBulkUserTokens(_0x26ba26){const _0x1e5936=new Map(),_0x4767a6=[];_0x26ba26['forEach'](_0x49316e=>{const _0x1c9f0f=a0_0x23aa,_0x4385f7='tokens_'+_0x49316e,_0x65525d=tokenCache['get'](_0x4385f7);_0x65525d&&Date[_0x1c9f0f(0x1b7)]()-_0x65525d[_0x1c9f0f(0x1b9)]<CACHE_DURATION?_0x1e5936['set'](_0x49316e,_0x65525d['tokens']):_0x4767a6['push'](_0x49316e);});if(_0x4767a6['length']>0x0)try{const _0x20f468=_0x4767a6['map'](async _0x4d11b5=>{const _0x377bd3=a0_0x23aa,_0x21ba68=doc(db,'userTokens',_0x4d11b5),_0x7e87d9=await getDoc(_0x21ba68);let _0x5e2b86=[];_0x7e87d9['exists']()&&(_0x5e2b86=_0x7e87d9['data']()['tokens']||[]);const _0x55fc48='tokens_'+_0x4d11b5;return tokenCache[_0x377bd3(0x1c7)](_0x55fc48,{'tokens':_0x5e2b86,'timestamp':Date['now']()}),[_0x4d11b5,_0x5e2b86];}),_0x4efb14=await Promise['all'](_0x20f468);_0x4efb14['forEach'](([_0x2d0411,_0x2c5b2c])=>{const _0x198577=a0_0x23aa;_0x1e5936[_0x198577(0x1c7)](_0x2d0411,_0x2c5b2c);});}catch(_0x179344){console['error']('Error\x20fetching\x20bulk\x20user\x20tokens:',_0x179344);}return _0x1e5936;}export async function getTokensByUsernames(_0x32e78d){const _0xd4df04=new Map();try{const _0x14b04e=collection(db,'userProfiles'),_0x51effb=await getDocs(_0x14b04e),_0x4a7df9=new Map();_0x51effb['forEach'](_0x3a563c=>{const _0x5e9b79=a0_0x23aa,_0x34149a=_0x3a563c['data']();_0x34149a['username']&&_0x32e78d['includes'](_0x34149a['username'])&&_0x4a7df9[_0x5e9b79(0x1c7)](_0x34149a['username'],_0x3a563c['id']);});const _0x5eb91f=Array['from'](_0x4a7df9['values']());if(_0x5eb91f['length']>0x0){const _0x49bd48=await getBulkUserTokens(_0x5eb91f);_0x4a7df9['forEach']((_0x31b444,_0x5a8335)=>{const _0x1f116a=a0_0x23aa,_0x463cdd=_0x49bd48[_0x1f116a(0x1b8)](_0x31b444)||[];_0xd4df04['set'](_0x5a8335,_0x463cdd);});}}catch(_0x353587){console['error']('Error\x20fetching\x20tokens\x20by\x20usernames:',_0x353587);}return _0xd4df04;}export function clearTokenCache(_0x4df11b=null){const _0x210a8b=a0_0x23aa;if(_0x4df11b){const _0x12716f='tokens_'+_0x4df11b;tokenCache[_0x210a8b(0x1cc)](_0x12716f),console['log']('ðŸ—‘ï¸\x20Cleared\x20token\x20cache\x20for\x20user:\x20'+_0x4df11b);}else tokenCache['clear'](),console['log']('ðŸ—‘ï¸\x20Cleared\x20all\x20token\x20cache');}export async function forceRefreshUserTokens(_0xc7af78){return clearTokenCache(_0xc7af78),await getUserTokens(_0xc7af78);}export function getPrimaryDisplayToken(_0x1d7647){const _0x567e31=a0_0x23aa;if(!_0x1d7647||_0x1d7647['length']===0x0)return null;const _0x1ef119=_0x1d7647[_0x567e31(0x1b4)](_0x3c7d17=>_0x3c7d17['equipped']===!![]);if(_0x1ef119)return _0x1ef119;const _0x197826=[..._0x1d7647][_0x567e31(0x1c2)]((_0x38711f,_0x4aa196)=>{const _0x3202d5=_0x567e31;let _0x46f98e,_0x37a6ca;if(_0x38711f['purchasedAt']){if(_0x38711f['purchasedAt'][_0x3202d5(0x1b3)])_0x46f98e=_0x38711f['purchasedAt'][_0x3202d5(0x1b3)];else{if(_0x38711f['purchasedAt']instanceof Date)_0x46f98e=_0x38711f['purchasedAt']['getTime']()/0x3e8;else typeof _0x38711f['purchasedAt']==='string'?_0x46f98e=new Date(_0x38711f['purchasedAt'])['getTime']()/0x3e8:_0x46f98e=0x0;}}else _0x46f98e=0x0;if(_0x4aa196['purchasedAt']){if(_0x4aa196['purchasedAt']['seconds'])_0x37a6ca=_0x4aa196['purchasedAt']['seconds'];else{if(_0x4aa196['purchasedAt']instanceof Date)_0x37a6ca=_0x4aa196['purchasedAt'][_0x3202d5(0x1cf)]()/0x3e8;else typeof _0x4aa196['purchasedAt']==='string'?_0x37a6ca=new Date(_0x4aa196['purchasedAt'])[_0x3202d5(0x1cf)]()/0x3e8:_0x37a6ca=0x0;}}else _0x37a6ca=0x0;return _0x37a6ca-_0x46f98e;});return _0x197826[0x0];}