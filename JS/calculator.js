function a9b(a,b){const c=a9a();return a9b=function(d,e){d=d-0x107;let f=c[d];if(a9b['ZsDVMj']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a9b['NIcTcn']=g,a=arguments,a9b['ZsDVMj']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a9b['NIcTcn'](f),a[i]=f):f=j,f;},a9b(a,b);}const a9p=a9b;(function(a,b){const h=a9b,c=a();while(!![]){try{const d=-parseInt(h(0x131))/0x1+parseInt(h(0x11a))/0x2*(-parseInt(h(0x12c))/0x3)+parseInt(h(0x132))/0x4*(-parseInt(h(0x10f))/0x5)+parseInt(h(0x152))/0x6*(parseInt(h(0x122))/0x7)+parseInt(h(0x14c))/0x8+parseInt(h(0x133))/0x9*(-parseInt(h(0x120))/0xa)+parseInt(h(0x155))/0xb;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a9a,0x44ef0));function a9a(){const y=['y3vYCMvUDeXHzgrLCG','y2fSy3vSyxrLtwf0y2G','mZq1mde5mgrTyKXYvG','Dgv4DenVBNrLBNq','mteYn0PoBNnZva','ugXLyxnLihnLBgvJDcbKAwzMzxjLBNqGCgXHEwvYCYbMB3iGD2LUBMvYigfUzcbSB3nLCG','i0mWqZbdma','z2v0','re9nq29UDgvUDeXVywrLza','zgvZyW','igXHzgrLCG','D2LUBMvYlw5LDY1LBg8','yMXVy2S','CMvTB3zL','mtjVt1fVrgW','cIaGcKv4CgvJDgvKifnJB3jLCZOkica','cGPgB3jTDwXHifvZzwq6cIaGtMv3ifjHDgLUzYa9ie9SzcbsyxrPBMCGkYbllwzHy3rVCIddLYaOqwn0DwfSifnJB3jLic0GrxHWzwn0zwqGu2nVCMuPcIaGsY1Mywn0B3iGpsaZmGOGiefJDhvHBcbty29YztOGv2LUBMvYid0GmsWGtg9ZzxiGpsaWcIaGcG','ywrKrxzLBNrmAxn0zw5LCG','ieHPz2GGruXpigDHAw4','ntm4mdK4EePbENvS','mtCWnZmYvgfprfPc','owzHzvvytW','lMXHzgrLCI1IDg4','Bg9ZzxiTzwXVlwnOyw5Nzq','Bg9ZzxjdAgfUz2u','DxnLCM5HBwu','z2v0ruXpuMfUA0nSyxnZ','Bwf0y2GTCMvZDwX0','cGPjBML0AwfSifjHDgLUz3m6cIaG','id0G','tg9HzgvKia','zxHWzwn0zwrty29YzvDPBM5LCG','BgfKzgvY','D2LUBMvYlxnLBgvJDa','zgLZCgXHEq','CgXHEwvYCW','zgLZCgXHEunHBgn1Bgf0Aw9Urgv0ywLSCW','ievmtYKkicaGicaGicaGicaGpc9VChrPB24+','DMfSDwu','zxHWzwn0zwrty29YzuXVC2vY','z29Sza','y2fSy3vSyxrLruXp','CM91BMq','C2v0DxbfDMvUDeXPC3rLBMvYCW','pg9WDgLVBIb2ywX1zt0IiJ5tzwXLy3qGysbWBgf5zxiUlI48l29WDgLVBJ4','tMv3ievmtZOG','mJe2mZeWnhfis2L5CW','y2fSy3vSyxrPB24Tzgv0ywLSCW','yNjVBNPL','zwXVuMf0Aw5N','C3r5Bgu','zgLZCgXHEu1HDgnOuMvZDwX0','mtK1mtHzBuH4Dgy','D2LUBMvYlwn1CNjLBNqTzwXV','cIaG','mti4nte5mJDMz2vQr1u','iJ4kicaGicaGicaGicaGicaGia','C29YDa','DxbKyxrLrhjVCgrVD25Z','Aw5PDa','ywrK','icSG','q3vYCMvUDcbfte86ia','Dg9gAxHLza','DMfSDwvZ','mZvfsLjoBK0','BMv3v2LUBMvYuMf0Aw5N','CgXHEwvYC0qZ','y2XLyxi','y2HHBMDL','z2v0ruXpq29SB3i','zwXV','z3jPza','y2XPy2S','Bg9ZzxiTBMv3lwvSBW','jsbJAgfUy2uGDg8GD2LUkqOkruXpienOyw5Nzxm6cIaG','mJq5mte0vuvqBNjn','z2v0rwXLBwvUDej5swq','cIaGicaGicaG','Bg9ZzxiTBMfTzq'];a9a=function(){return y;};return a9a();}import{collection,getDocs,query,orderBy}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';class ELOCalculator{constructor(){const i=a9b;this[i(0x11e)]='D1',this[i(0x141)]=new Map(),this[i(0x109)]();}['init'](){const j=a9b;this[j(0x149)](),this['loadPlayers']();}['setupEventListeners'](){const k=a9b;document['querySelectorAll'](k(0x134))['forEach'](a=>{const l=k;a['addEventListener'](l(0x117),b=>{const m=l;document['querySelectorAll'](m(0x134))['forEach'](c=>c['classList'][m(0x12b)]('active')),b['target']['classList'][m(0x10a)]('active'),this[m(0x11e)]=b['target']['dataset'][m(0x13e)],this['loadPlayers']();});}),document['getElementById']('refresh-players')['addEventListener']('click',()=>{this['loadPlayers']();}),document[k(0x11b)](k(0x13f))[k(0x12f)](k(0x113),()=>this[k(0x11f)]()),document['getElementById']('loser-select')['addEventListener']('change',()=>this['calculateMatch']());}async['loadPlayers'](){const n=a9b;try{this[n(0x108)]('<option\x20value=\x22\x22>Loading\x20players...</option>');const a=this['currentLadder']==='D1'?n(0x141):this[n(0x11e)]==='D2'?'playersD2':n(0x111),b=collection(db,a),c=query(b,orderBy('eloRating',n(0x127))),d=await getDocs(c);this['players'][n(0x112)](),d['forEach'](e=>{const o=n,f=e['data']();f['username']&&this['players']['set'](f[o(0x137)],{'id':e['id'],'username':f['username'],'elo':parseInt(f[o(0x14f)])||0x4b0,'position':f['position']||0x3e7});}),this['updateDropdowns'](),console['log'](n(0x13c)+this['players']['size']+'\x20players\x20from\x20'+this['currentLadder']+n(0x128));}catch(e){console['error']('Error\x20loading\x20players:',e),this[n(0x108)]('<option\x20value=\x22\x22>Error\x20loading\x20players</option>');}}[a9p(0x108)](a=null){const q=a9p,b=document[q(0x11b)]('winner-select'),c=document['getElementById']('loser-select');if(a){b['innerHTML']=a,c['innerHTML']=a;return;}let d=q(0x14a);const e=Array['from'](this['players'][q(0x10e)]())[q(0x107)]((f,g)=>g['elo']-f[q(0x115)]);e['forEach'](f=>{const r=q,g=this[r(0x138)](f[r(0x115)]);d+='<option\x20value=\x22'+f['username']+'\x22\x20data-elo=\x22'+f['elo']+'\x22\x20class=\x22'+g+r(0x156)+f['username']+'\x20('+f['elo']+r(0x143);}),b['innerHTML']=d,c['innerHTML']=d;}[a9p(0x11f)](){const s=a9p,a=document[s(0x11b)](s(0x13f)),b=document['getElementById']('loser-select'),c=a['value'],d=b[s(0x144)];if(!c||!d){document['getElementById'](s(0x139))['style']['display']='none',document[s(0x11b)](s(0x14d))[s(0x150)][s(0x140)]='none';return;}if(c===d){alert(s(0x123));return;}const e=this[s(0x141)][s(0x125)](c),f=this[s(0x141)][s(0x125)](d);if(!e||!f){console['error']('Player\x20not\x20found');return;}const g=this[s(0x147)](e[s(0x115)],f['elo']);this['displayMatchResult'](e,f,g),this[s(0x142)](e,f,g);}[a9p(0x147)](a,b,c=0x20){const t=a9p,d=0x1/(0x1+Math['pow'](0xa,(b-a)/0x190)),e=0x1/(0x1+Math['pow'](0xa,(a-b)/0x190)),f=a+c*(0x1-d),g=b+c*(0x0-e);return{'winnerChange':Math['round'](f-a),'loserChange':Math['round'](g-b),'newWinnerRating':Math[t(0x148)](f),'newLoserRating':Math['round'](g),'expectedScoreWinner':d,'expectedScoreLoser':e};}[a9p(0x151)](a,b,c){const u=a9p;document[u(0x11b)]('winner-name')['textContent']=a['username'],document['getElementById'](u(0x153))[u(0x121)]=u(0x10c)+a[u(0x115)],document['getElementById']('winner-elo-change')['textContent']='+'+c['winnerChange'],document[u(0x11b)](u(0x129))[u(0x121)]=u(0x14b)+c[u(0x110)],document[u(0x11b)](u(0x11d))[u(0x121)]=b['username'],document['getElementById']('loser-current-elo')[u(0x121)]=u(0x10c)+b[u(0x115)],document[u(0x11b)](u(0x135))[u(0x121)]=''+c[u(0x136)],document['getElementById'](u(0x118))[u(0x121)]=u(0x14b)+c['newLoserRating'];const d=this[u(0x114)](a[u(0x115)]),e=this[u(0x114)](b['elo']);document['getElementById']('winner-name')['style']['color']=d,document['getElementById'](u(0x11d))[u(0x150)]['color']=e,document['getElementById'](u(0x139))[u(0x150)][u(0x140)]=u(0x116);}['displayCalculationDetails'](a,b,c){const v=a9p,d=v(0x13a)+a[v(0x137)]+':\x20'+a[v(0x115)]+'\x0a\x20\x20'+b['username']+':\x20'+b['elo']+v(0x12d)+a[v(0x137)]+':\x20'+c[v(0x13d)][v(0x10d)](0x3)+'\x20('+(c['expectedScoreWinner']*0x64)[v(0x10d)](0x1)+'%\x20chance\x20to\x20win)\x0a\x20\x20'+b[v(0x137)]+':\x20'+c[v(0x145)]['toFixed'](0x3)+'\x20('+(c[v(0x145)]*0x64)['toFixed'](0x1)+v(0x119)+a[v(0x137)]+':\x20'+a['elo']+v(0x10b)+c['winnerChange']+v(0x13b)+c['newWinnerRating']+v(0x154)+b[v(0x137)]+':\x20'+b['elo']+v(0x10b)+c['loserChange']+'\x20=\x20'+c['newLoserRating']+v(0x12e)+(c['winnerChange']>0x14?v(0x130):'')+'\x0a'+(c['winnerChange']<0x5?'Low\x20ELO\x20gain.':'')+v(0x11c);document[v(0x11b)]('calculation-text')['textContent']=d,document['getElementById']('calculation-details')['style']['display']=v(0x12a);}[a9p(0x114)](a){const w=a9p;if(a>=0x7d0)return'#50C878';else{if(a>=0x708)return'#FFD700';else{if(a>=0x640)return w(0x124);else{if(a>=0x578)return'#CD7F32';else return'#808080';}}}}['getELORankClass'](a){const x=a9p;if(a>=0x7d0)return'emerald';else{if(a>=0x708)return x(0x146);else{if(a>=0x640)return'silver';else{if(a>=0x578)return x(0x14e);else return'unranked';}}}}}document['addEventListener'](a9p(0x126),()=>{document['getElementById']('sandbox')&&new ELOCalculator();});