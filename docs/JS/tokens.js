(function(_0x45cc9a,_0x45049d){const _0x359037=a0_0x272d,_0x19918d=_0x45cc9a();while(!![]){try{const _0x5ae07c=-parseInt(_0x359037(0xab))/0x1*(parseInt(_0x359037(0xa8))/0x2)+parseInt(_0x359037(0xb8))/0x3+parseInt(_0x359037(0xa7))/0x4*(-parseInt(_0x359037(0x9e))/0x5)+parseInt(_0x359037(0xbd))/0x6*(parseInt(_0x359037(0xa5))/0x7)+-parseInt(_0x359037(0xb7))/0x8*(parseInt(_0x359037(0xb6))/0x9)+parseInt(_0x359037(0xb5))/0xa*(-parseInt(_0x359037(0xa4))/0xb)+parseInt(_0x359037(0xae))/0xc;if(_0x5ae07c===_0x45049d)break;else _0x19918d['push'](_0x19918d['shift']());}catch(_0xe1fe7a){_0x19918d['push'](_0x19918d['shift']());}}}(a0_0x20a4,0x78944));const a0_0x36c2bb=(function(){let _0x5201f6=!![];return function(_0x9a3f3f,_0x2067d2){const _0x42e19f=_0x5201f6?function(){if(_0x2067d2){const _0x22a008=_0x2067d2['apply'](_0x9a3f3f,arguments);return _0x2067d2=null,_0x22a008;}}:function(){};return _0x5201f6=![],_0x42e19f;};}()),a0_0x51dcf3=a0_0x36c2bb(this,function(){const _0xe2ca98=a0_0x272d;let _0x333adb;try{const _0x320464=Function('return\x20(function()\x20'+_0xe2ca98(0xa1)+');');_0x333adb=_0x320464();}catch(_0x51c3ee){_0x333adb=window;}const _0x416844=_0x333adb[_0xe2ca98(0xac)]=_0x333adb['console']||{},_0x4aa0b7=['log','warn','info','error','exception',_0xe2ca98(0xaa),'trace'];for(let _0x1c4e35=0x0;_0x1c4e35<_0x4aa0b7[_0xe2ca98(0xb4)];_0x1c4e35++){const _0x162880=a0_0x36c2bb['constructor']['prototype']['bind'](a0_0x36c2bb),_0x3b3532=_0x4aa0b7[_0x1c4e35],_0x2cff7d=_0x416844[_0x3b3532]||_0x162880;_0x162880[_0xe2ca98(0xb1)]=a0_0x36c2bb['bind'](a0_0x36c2bb),_0x162880['toString']=_0x2cff7d['toString'][_0xe2ca98(0xb2)](_0x2cff7d),_0x416844[_0x3b3532]=_0x162880;}});a0_0x51dcf3();import{doc,getDoc,getDocs,collection}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';const tokenCache=new Map(),CACHE_DURATION=0x5*0x3c*0x3e8;function a0_0x20a4(){const _0x17bfd4=['67646vdOGAR','console','username','8956416mOwzip','now','seconds','__proto__','bind','ðŸ—‘ï¸\x20Cleared\x20all\x20token\x20cache','length','20XIpHiI','9yfYpKq','3912600gXfxEh','2271279jYEpbc','data','set','push','purchasedAt','291174ZwcWrj','getTime','tokens_','34865AAvGGv','exists','Error\x20fetching\x20bulk\x20user\x20tokens:','{}.constructor(\x22return\x20this\x22)(\x20)','forEach','values','1435093rmNGjJ','21NVBBWi','from','116TvLdFo','6sbsmJO','userProfiles','table'];a0_0x20a4=function(){return _0x17bfd4;};return a0_0x20a4();}export async function getUserTokens(_0x292687){const _0x3fd227=a0_0x272d,_0x7b8048='tokens_'+_0x292687,_0x3ca788=tokenCache['get'](_0x7b8048);if(_0x3ca788&&Date['now']()-_0x3ca788['timestamp']<CACHE_DURATION)return _0x3ca788['tokens'];try{const _0x3d520a=doc(db,'userTokens',_0x292687),_0x15ffa6=await getDoc(_0x3d520a);let _0x59fd47=[];return _0x15ffa6[_0x3fd227(0x9f)]()&&(_0x59fd47=_0x15ffa6['data']()['tokens']||[]),tokenCache['set'](_0x7b8048,{'tokens':_0x59fd47,'timestamp':Date['now']()}),_0x59fd47;}catch(_0x42373d){return console['error']('Error\x20fetching\x20user\x20tokens:',_0x42373d),[];}}export async function getBulkUserTokens(_0x1a8b66){const _0x2e197d=a0_0x272d,_0x25e156=new Map(),_0x970b8d=[];_0x1a8b66[_0x2e197d(0xa2)](_0x5a3372=>{const _0x54e94b=_0x2e197d,_0x1cefa3=_0x54e94b(0xbf)+_0x5a3372,_0xe1ceef=tokenCache['get'](_0x1cefa3);_0xe1ceef&&Date[_0x54e94b(0xaf)]()-_0xe1ceef['timestamp']<CACHE_DURATION?_0x25e156['set'](_0x5a3372,_0xe1ceef['tokens']):_0x970b8d[_0x54e94b(0xbb)](_0x5a3372);});if(_0x970b8d[_0x2e197d(0xb4)]>0x0)try{const _0x3fb58b=_0x970b8d['map'](async _0x591935=>{const _0x241364=_0x2e197d,_0x39c73a=doc(db,'userTokens',_0x591935),_0x372fe3=await getDoc(_0x39c73a);let _0x28f9c2=[];_0x372fe3['exists']()&&(_0x28f9c2=_0x372fe3[_0x241364(0xb9)]()['tokens']||[]);const _0x482718='tokens_'+_0x591935;return tokenCache[_0x241364(0xba)](_0x482718,{'tokens':_0x28f9c2,'timestamp':Date['now']()}),[_0x591935,_0x28f9c2];}),_0x8a2870=await Promise['all'](_0x3fb58b);_0x8a2870[_0x2e197d(0xa2)](([_0x1c1d0e,_0x5f108b])=>{_0x25e156['set'](_0x1c1d0e,_0x5f108b);});}catch(_0x3d5c20){console['error'](_0x2e197d(0xa0),_0x3d5c20);}return _0x25e156;}export async function getTokensByUsernames(_0x41e022){const _0x517212=a0_0x272d,_0x55f64a=new Map();try{const _0x466b4e=collection(db,_0x517212(0xa9)),_0x3d8c3d=await getDocs(_0x466b4e),_0x508fbb=new Map();_0x3d8c3d['forEach'](_0x1e76c5=>{const _0x28b00b=_0x517212,_0x41b4a7=_0x1e76c5[_0x28b00b(0xb9)]();_0x41b4a7[_0x28b00b(0xad)]&&_0x41e022['includes'](_0x41b4a7['username'])&&_0x508fbb['set'](_0x41b4a7['username'],_0x1e76c5['id']);});const _0x19cd56=Array[_0x517212(0xa6)](_0x508fbb[_0x517212(0xa3)]());if(_0x19cd56[_0x517212(0xb4)]>0x0){const _0x1c3e25=await getBulkUserTokens(_0x19cd56);_0x508fbb[_0x517212(0xa2)]((_0x2f3876,_0x346384)=>{const _0xbcb6ea=_0x517212,_0x54facb=_0x1c3e25['get'](_0x2f3876)||[];_0x55f64a[_0xbcb6ea(0xba)](_0x346384,_0x54facb);});}}catch(_0x27c9fb){console['error']('Error\x20fetching\x20tokens\x20by\x20usernames:',_0x27c9fb);}return _0x55f64a;}function a0_0x272d(_0xce56b4,_0x2949c8){const _0x18af97=a0_0x20a4();return a0_0x272d=function(_0x51dcf3,_0x36c2bb){_0x51dcf3=_0x51dcf3-0x9e;let _0x1c2378=_0x18af97[_0x51dcf3];return _0x1c2378;},a0_0x272d(_0xce56b4,_0x2949c8);}export function clearTokenCache(_0x484911=null){const _0x475e82=a0_0x272d;if(_0x484911){const _0x4ee663=_0x475e82(0xbf)+_0x484911;tokenCache['delete'](_0x4ee663),console['log']('ðŸ—‘ï¸\x20Cleared\x20token\x20cache\x20for\x20user:\x20'+_0x484911);}else tokenCache['clear'](),console['log'](_0x475e82(0xb3));}export async function forceRefreshUserTokens(_0x4932ae){return clearTokenCache(_0x4932ae),await getUserTokens(_0x4932ae);}export function getPrimaryDisplayToken(_0xf8bc11){const _0x1b69ab=a0_0x272d;if(!_0xf8bc11||_0xf8bc11[_0x1b69ab(0xb4)]===0x0)return null;const _0x19d07e=_0xf8bc11['find'](_0x1ff7a6=>_0x1ff7a6['equipped']===!![]);if(_0x19d07e)return _0x19d07e;const _0x22a921=[..._0xf8bc11]['sort']((_0x482f09,_0x4fbea2)=>{const _0x4a9750=_0x1b69ab;let _0x18c818,_0x58aed1;if(_0x482f09['purchasedAt']){if(_0x482f09[_0x4a9750(0xbc)]['seconds'])_0x18c818=_0x482f09[_0x4a9750(0xbc)][_0x4a9750(0xb0)];else{if(_0x482f09['purchasedAt']instanceof Date)_0x18c818=_0x482f09['purchasedAt']['getTime']()/0x3e8;else typeof _0x482f09[_0x4a9750(0xbc)]==='string'?_0x18c818=new Date(_0x482f09[_0x4a9750(0xbc)])['getTime']()/0x3e8:_0x18c818=0x0;}}else _0x18c818=0x0;if(_0x4fbea2['purchasedAt']){if(_0x4fbea2['purchasedAt']['seconds'])_0x58aed1=_0x4fbea2['purchasedAt']['seconds'];else{if(_0x4fbea2['purchasedAt']instanceof Date)_0x58aed1=_0x4fbea2['purchasedAt'][_0x4a9750(0xbe)]()/0x3e8;else typeof _0x4fbea2['purchasedAt']==='string'?_0x58aed1=new Date(_0x4fbea2[_0x4a9750(0xbc)])['getTime']()/0x3e8:_0x58aed1=0x0;}}else _0x58aed1=0x0;return _0x58aed1-_0x18c818;});return _0x22a921[0x0];}