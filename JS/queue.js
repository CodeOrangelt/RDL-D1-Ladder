const a48_0x370a3c=a48_0x5948,a48_0x4eab2c=(function(){let _0x3d9b4a=!![];return function(_0x4bad60,_0x40ed32){const _0x20f8c0=_0x3d9b4a?function(){const _0x1b5131=a48_0x5948;if(_0x40ed32){const _0x25ccfe=_0x40ed32[_0x1b5131(0x1f1)](_0x4bad60,arguments);return _0x40ed32=null,_0x25ccfe;}}:function(){};return _0x3d9b4a=![],_0x20f8c0;};}()),a48_0x388dd7=a48_0x4eab2c(this,function(){const _0x588466=a48_0x5948,_0x181b6e=function(){const _0x1ad0d8=a48_0x5948;let _0x10cfb2;try{_0x10cfb2=Function(_0x1ad0d8(0x1ed)+_0x1ad0d8(0x1ee)+');')();}catch(_0x42a35c){_0x10cfb2=window;}return _0x10cfb2;},_0x57a866=_0x181b6e(),_0x575c90=_0x57a866[_0x588466(0x1f0)]=_0x57a866[_0x588466(0x1f0)]||{},_0x3155b2=[_0x588466(0x1f9),_0x588466(0x1d1),_0x588466(0x1e4),_0x588466(0x1e9),_0x588466(0x1ec),_0x588466(0x1e6),_0x588466(0x1d9)];for(let _0x241ed3=0x0;_0x241ed3<_0x3155b2[_0x588466(0x1e8)];_0x241ed3++){const _0x798af0=a48_0x4eab2c[_0x588466(0x1f3)][_0x588466(0x1ea)][_0x588466(0x1fd)](a48_0x4eab2c),_0x45d227=_0x3155b2[_0x241ed3],_0x577297=_0x575c90[_0x45d227]||_0x798af0;_0x798af0[_0x588466(0x1e7)]=a48_0x4eab2c[_0x588466(0x1fd)](a48_0x4eab2c),_0x798af0[_0x588466(0x1df)]=_0x577297[_0x588466(0x1df)][_0x588466(0x1fd)](_0x577297),_0x575c90[_0x45d227]=_0x798af0;}});a48_0x388dd7();import{db}from'./firebase-config.js';import{collection,query,where,onSnapshot,updateDoc,doc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';const readyPlayersRef=collection(db,a48_0x370a3c(0x1dd)),activePlayersQuery=query(readyPlayersRef,where(a48_0x370a3c(0x1eb),'==',!![]));function updateQueueDisplay(_0x280f1e){const _0x21defa=a48_0x370a3c,_0x16d954=document[_0x21defa(0x1d8)](_0x21defa(0x1f8));if(!_0x16d954)return;if(_0x280f1e[_0x21defa(0x1e8)]===0x0){_0x16d954[_0x21defa(0x1e2)][_0x21defa(0x1f7)]=_0x21defa(0x1e5);return;}_0x16d954[_0x21defa(0x1e2)][_0x21defa(0x1f7)]=_0x21defa(0x1f5);let _0x236849=_0x21defa(0x1e1);_0x280f1e[_0x21defa(0x1d4)](_0x4d3695=>{const _0x568d0f=_0x21defa;_0x236849+=_0x568d0f(0x1f2)+(_0x4d3695[_0x568d0f(0x1fc)]||_0x568d0f(0x1f6))+_0x568d0f(0x1e3)+formatQueueTime(_0x4d3695[_0x568d0f(0x1f4)])+_0x568d0f(0x1dc);}),_0x236849+=_0x21defa(0x1e0),_0x16d954[_0x21defa(0x1d6)]=_0x236849;}function a48_0x5948(_0x2e4c7f,_0x3649fb){_0x2e4c7f=_0x2e4c7f-0x1d1;const _0x388dd7=a48_0x59c0();let _0x4eab2c=_0x388dd7[_0x2e4c7f];return _0x4eab2c;}function formatQueueTime(_0x48c9cb){const _0x164a33=a48_0x370a3c;if(!_0x48c9cb)return _0x164a33(0x1d2);const _0x408ebe=_0x48c9cb[_0x164a33(0x1ef)]?_0x48c9cb[_0x164a33(0x1ef)]():new Date(_0x48c9cb),_0xb4b0d5=new Date(),_0x3aba52=Math[_0x164a33(0x1db)]((_0xb4b0d5-_0x408ebe)/0xea60);if(_0x3aba52<0x1)return _0x164a33(0x1d2);return _0x3aba52+_0x164a33(0x1d5);}function a48_0x59c0(){const _0x50f5e8=['warn','Just\x20now','unload','forEach','m\x20in\x20queue','innerHTML','Error\x20removing\x20player\x20from\x20queue:','getElementById','trace','push','floor','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','readyPlayers','Error\x20in\x20queue\x20listener:','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-box\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Waiting\x20for\x20a\x20game</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22queue-list\x22>\x0a\x20\x20\x20\x20','style','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22queue-time\x22>','info','none','table','__proto__','length','error','prototype','isReady','exception','return\x20(function()\x20','{}.constructor(\x22return\x20this\x22)(\x20)','toDate','console','apply','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22player-name\x22>','constructor','lastUpdated','block','Unknown\x20Player','display','queue-container','log','data','addEventListener','username','bind'];a48_0x59c0=function(){return _0x50f5e8;};return a48_0x59c0();}async function checkQueueTimeout(_0x50da82){const _0x148fcd=a48_0x370a3c;if(!_0x50da82[_0x148fcd(0x1f4)])return;const _0x1e6be0=_0x50da82[_0x148fcd(0x1f4)][_0x148fcd(0x1ef)]?_0x50da82[_0x148fcd(0x1f4)][_0x148fcd(0x1ef)]():new Date(_0x50da82[_0x148fcd(0x1f4)]),_0x267b3b=new Date(),_0x1a9cd5=Math[_0x148fcd(0x1db)]((_0x267b3b-_0x1e6be0)/0xea60);if(_0x1a9cd5>=0x1e)try{const _0x3daf2d=doc(db,_0x148fcd(0x1dd),_0x50da82['id']);await updateDoc(_0x3daf2d,{'isReady':![]});}catch(_0xabcac1){console[_0x148fcd(0x1e9)](_0x148fcd(0x1d7),_0xabcac1);}}const unsubscribe=onSnapshot(readyPlayersRef,_0x2b55ae=>{const _0x43f894=a48_0x370a3c,_0x3fff5c=[];_0x2b55ae[_0x43f894(0x1d4)](_0x998456=>{const _0x4da989=_0x43f894,_0x5b0f53=_0x998456[_0x4da989(0x1fa)]();if(_0x5b0f53[_0x4da989(0x1eb)]===!![]){const _0xfe3f85={'id':_0x998456['id'],'username':_0x5b0f53[_0x4da989(0x1fc)],'lastUpdated':_0x5b0f53[_0x4da989(0x1f4)]||new Date()};_0x3fff5c[_0x4da989(0x1da)](_0xfe3f85),checkQueueTimeout(_0xfe3f85);}}),updateQueueDisplay(_0x3fff5c);},_0x44d875=>{const _0x5cb25b=a48_0x370a3c;console[_0x5cb25b(0x1e9)](_0x5cb25b(0x1de),_0x44d875);});window[a48_0x370a3c(0x1fb)](a48_0x370a3c(0x1d3),()=>{unsubscribe();});