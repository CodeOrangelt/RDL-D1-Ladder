import a22_0x535566,{enhanceIdleTimeout}from'./firebase-idle-wrapper.js';const IDLE_TIMEOUT=0xea60;function a22_0x5529(_0x1eacb9,_0x4c72a8){const _0x1e67f6=a22_0x391e();return a22_0x5529=function(_0x108fb8,_0x34d562){_0x108fb8=_0x108fb8-0xa9;let _0x391e87=_0x1e67f6[_0x108fb8];return _0x391e87;},a22_0x5529(_0x1eacb9,_0x4c72a8);}let idleTimer=null,isSessionSuspended=![],networkErrorRetryCount=0x0;const MAX_NETWORK_RETRIES=0x3;function createIdleOverlay(){const _0xc988ca=a22_0x5529;if(document['getElementById']('idle-overlay'))return;const _0x19c5d2=document['createElement']('div');_0x19c5d2['id']=_0xc988ca(0xc9),_0x19c5d2['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20';const _0x3e8ce3=document['createElement']('div');_0x3e8ce3['style'][_0xc988ca(0xae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x46d321=document['createElement']('h2');_0x46d321['textContent']=_0xc988ca(0xba),_0x46d321['style']['cssText']=_0xc988ca(0xb2);const _0x4297ea=document['createElement']('p');_0x4297ea['textContent']='Your\x20session\x20has\x20been\x20suspended\x20after\x201\x20minutes\x20of\x20inactivity\x20for\x20security\x20reasons.',_0x4297ea['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x1086f7=document['createElement']('button');_0x1086f7['id']='resume-session-btn',_0x1086f7['textContent']='Return\x20to\x20Website',_0x1086f7['style']['cssText']=_0xc988ca(0xb0),_0x1086f7['onmouseover']=function(){this['style']['backgroundColor']='#3da05f';},_0x1086f7[_0xc988ca(0xb9)]=function(){const _0x226f6f=_0xc988ca;this['style']['backgroundColor']=_0x226f6f(0xd4);},_0x3e8ce3[_0xc988ca(0xca)](_0x46d321),_0x3e8ce3[_0xc988ca(0xca)](_0x4297ea),_0x3e8ce3['appendChild'](_0x1086f7),_0x19c5d2['appendChild'](_0x3e8ce3),document['body']['appendChild'](_0x19c5d2),_0x1086f7['addEventListener']('click',resumeSession),createNetworkErrorOverlay();}function createNetworkErrorOverlay(){const _0x5262c0=a22_0x5529;if(document['getElementById']('network-error-overlay'))return;const _0x16fc67=document['createElement']('div');_0x16fc67['id']='network-error-overlay',_0x16fc67[_0x5262c0(0xa9)][_0x5262c0(0xae)]=_0x5262c0(0xdb);const _0x1d4dcd=document[_0x5262c0(0xdc)]('div');_0x1d4dcd[_0x5262c0(0xa9)][_0x5262c0(0xae)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#202020;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2030px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x200\x2020px\x20rgba(0,\x200,\x200,\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#444;\x0a\x20\x20\x20\x20';const _0x13a479=document[_0x5262c0(0xdc)]('h2');_0x13a479[_0x5262c0(0xbf)]='Connection\x20Error',_0x13a479[_0x5262c0(0xa9)]['cssText']='color:\x20#ff5555;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;';const _0x1b6c10=document['createElement']('p');_0x1b6c10['textContent']=_0x5262c0(0xde),_0x1b6c10['style']['cssText']='color:\x20#fff;\x20margin-bottom:\x2030px;';const _0x33680d=document['createElement']('button');_0x33680d['id']='retry-connection-btn',_0x33680d['textContent']='Retry\x20Connection',_0x33680d['style'][_0x5262c0(0xae)]=_0x5262c0(0xaf);const _0x563e60=document[_0x5262c0(0xdc)]('button');_0x563e60['id']=_0x5262c0(0xdf),_0x563e60['textContent']='Reload\x20Page',_0x563e60['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#5555ff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20';const _0x4123b2=document['createElement']('div');_0x4123b2['style'][_0x5262c0(0xae)]='display:\x20flex;\x20justify-content:\x20center;\x20gap:\x2010px;',_0x4123b2['appendChild'](_0x33680d),_0x4123b2['appendChild'](_0x563e60),_0x1d4dcd['appendChild'](_0x13a479),_0x1d4dcd['appendChild'](_0x1b6c10),_0x1d4dcd[_0x5262c0(0xca)](_0x4123b2),_0x16fc67[_0x5262c0(0xca)](_0x1d4dcd),document['body']['appendChild'](_0x16fc67),_0x33680d['addEventListener']('click',retryConnection),_0x563e60['addEventListener']('click',()=>window['location']['reload']());}function resetIdleTimer(){if(isSessionSuspended)return;clearTimeout(idleTimer),idleTimer=setTimeout(suspendSession,IDLE_TIMEOUT);}function handleNetworkError(){const _0x296aca=a22_0x5529;clearTimeout(idleTimer);const _0x4cc100=document['getElementById'](_0x296aca(0xd1));_0x4cc100&&(_0x4cc100['style']['display']='flex'),window[_0x296aca(0xd9)]=!![],console['log']('Network\x20error\x20detected,\x20showing\x20error\x20overlay'),a22_0x535566['suspendAllListeners']();}function retryConnection(){const _0x4e1e12=a22_0x5529;networkErrorRetryCount++;if(networkErrorRetryCount>MAX_NETWORK_RETRIES){const _0x5d54e6=document['querySelector']('#network-error-overlay\x20p');_0x5d54e6&&(_0x5d54e6[_0x4e1e12(0xbf)]=_0x4e1e12(0xdd));const _0x55c7dc=document['getElementById'](_0x4e1e12(0xc5));_0x55c7dc&&(_0x55c7dc['disabled']=!![],_0x55c7dc['style'][_0x4e1e12(0xb6)]='0.5',_0x55c7dc['style'][_0x4e1e12(0xd3)]='not-allowed');return;}const _0x54f3d2=document['getElementById']('network-error-overlay');_0x54f3d2&&(_0x54f3d2['style']['display']='none');window[_0x4e1e12(0xd9)]=![],resetIdleTimer(),console['log']('Retrying\x20connection...');try{const {rdlFirestore:_0x3ab5fd}=window;if(_0x3ab5fd){const _0x4751f9=_0x3ab5fd['collection'](_0x4e1e12(0xbc));_0x3ab5fd[_0x4e1e12(0xab)](_0x4751f9)[_0x4e1e12(0xc4)](_0x5befda=>{const _0x109563=_0x4e1e12;console[_0x109563(0xc7)]('Connection\x20test\x20failed:',_0x5befda),handleNetworkError();});}}catch(_0x828f42){console['error']('Failed\x20to\x20test\x20connection:',_0x828f42),handleNetworkError();}a22_0x535566['resumeAllListeners']();}function suspendSession(){const _0x1a29a5=a22_0x5529;isSessionSuspended=!![];const _0x5f43d3=document[_0x1a29a5(0xac)]('idle-overlay');_0x5f43d3&&(_0x5f43d3['style']['display']='flex'),console['log']('Session\x20suspended\x20due\x20to\x20inactivity'),window[_0x1a29a5(0xcd)]=!![],a22_0x535566['suspendAllListeners']();}function resumeSession(){const _0x5c4d95=a22_0x5529;isSessionSuspended=![],window['RDL_SESSION_SUSPENDED']=![];const _0x3eb0dc=document['getElementById']('idle-overlay');_0x3eb0dc&&(_0x3eb0dc['style'][_0x5c4d95(0xc8)]='none'),console[_0x5c4d95(0xd5)]('Session\x20resumed'),resetIdleTimer(),a22_0x535566[_0x5c4d95(0xc6)](),idleTimer&&Date['now']()-(window[_0x5c4d95(0xbd)]||0x0)>IDLE_TIMEOUT*0x2&&(console[_0x5c4d95(0xd5)](_0x5c4d95(0xd0)),window[_0x5c4d95(0xbe)]['reload']());}function initIdleTimeout(){const _0xdff239=a22_0x5529,_0x41e85f=(function(){let _0xd0741d=!![];return function(_0x4ab817,_0x478158){const _0x733e40=_0xd0741d?function(){if(_0x478158){const _0xbde7bd=_0x478158['apply'](_0x4ab817,arguments);return _0x478158=null,_0xbde7bd;}}:function(){};return _0xd0741d=![],_0x733e40;};}()),_0xdf8bbd=_0x41e85f(this,function(){const _0x22acc4=a22_0x5529,_0x11f54a=function(){const _0x294fef=a22_0x5529;let _0x8cccd0;try{_0x8cccd0=Function(_0x294fef(0xad)+_0x294fef(0xb8)+');')();}catch(_0x56aef6){_0x8cccd0=window;}return _0x8cccd0;},_0x4cdb8a=_0x11f54a(),_0x3110fa=_0x4cdb8a['console']=_0x4cdb8a['console']||{},_0x7d482b=['log','warn','info',_0x22acc4(0xc7),'exception','table','trace'];for(let _0x44a883=0x0;_0x44a883<_0x7d482b['length'];_0x44a883++){const _0x4112b2=_0x41e85f[_0x22acc4(0xb1)][_0x22acc4(0xd2)][_0x22acc4(0xcf)](_0x41e85f),_0x51b2c2=_0x7d482b[_0x44a883],_0x4b43e3=_0x3110fa[_0x51b2c2]||_0x4112b2;_0x4112b2[_0x22acc4(0xaa)]=_0x41e85f[_0x22acc4(0xcf)](_0x41e85f),_0x4112b2['toString']=_0x4b43e3['toString']['bind'](_0x4b43e3),_0x3110fa[_0x51b2c2]=_0x4112b2;}});_0xdf8bbd(),createIdleOverlay();const _0x50b924=[_0xdff239(0xda),'mousemove','keypress',_0xdff239(0xb5),'touchstart','click'];_0x50b924['forEach'](_0x56c4a8=>{document['addEventListener'](_0x56c4a8,()=>{window['RDL_LAST_ACTIVITY']=Date['now'](),resetIdleTimer();},!![]);}),window[_0xdff239(0xcc)](_0xdff239(0xc7),function(_0x28aaff){const _0x57e58b=_0xdff239;_0x28aaff['error']&&(_0x28aaff['error']['message']&&_0x28aaff['error'][_0x57e58b(0xb3)][_0x57e58b(0xce)]('network')||_0x28aaff['error']['code']&&(_0x28aaff['error']['code']===_0x57e58b(0xc1)||_0x28aaff['error']['code']===_0x57e58b(0xc3)||_0x28aaff[_0x57e58b(0xc7)][_0x57e58b(0xd6)]['includes'](_0x57e58b(0xcb))))&&(handleNetworkError(),_0x28aaff['preventDefault']());}),resetIdleTimer(),console[_0xdff239(0xd5)](_0xdff239(0xd7),IDLE_TIMEOUT,'ms'),window['suspendSession']=suspendSession,window['resumeSession']=resumeSession,enhanceIdleTimeout(),window['checkFirebaseIdleStatus']=function(){const _0x1f7455=_0xdff239;return console['log']('Session\x20suspended:',window['RDL_SESSION_SUSPENDED']),console['log']('Network\x20error:',window['RDL_NETWORK_ERROR']),console[_0x1f7455(0xd5)]('Active\x20listeners:',a22_0x535566['activeListeners']['size']),console['log'](_0x1f7455(0xb7),a22_0x535566['pendingOperations']['size']),console[_0x1f7455(0xd5)]('Blocked\x20operations:',a22_0x535566[_0x1f7455(0xb4)]||0x0),{'suspended':window['RDL_SESSION_SUSPENDED'],'networkError':window['RDL_NETWORK_ERROR'],'activeListeners':Array['from'](a22_0x535566['activeListeners'][_0x1f7455(0xc2)]()),'pendingOperations':Array[_0x1f7455(0xc0)](a22_0x535566[_0x1f7455(0xd8)]['keys']()),'blockedCount':a22_0x535566['blockedOperations']||0x0};},window[_0xdff239(0xbb)]=function(){console['log']('Forcing\x20idle\x20timeout...'),suspendSession();};}export{initIdleTimeout,isSessionSuspended,handleNetworkError};function a22_0x391e(){const _0x3f3b2f=['style','__proto__','getDocs','getElementById','return\x20(function()\x20','cssText','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#50C878;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20background-color\x200.3s;\x0a\x20\x20\x20\x20','constructor','color:\x20#50C878;\x20margin-bottom:\x2020px;\x20font-size:\x2024px;','message','blockedOperations','scroll','opacity','Pending\x20operations:','{}.constructor(\x22return\x20this\x22)(\x20)','onmouseout','Session\x20Suspended\x20Due\x20to\x20Inactivity','forceIdleTimeout','system','RDL_LAST_ACTIVITY','location','textContent','from','unavailable','keys','resource-exhausted','catch','retry-connection-btn','resumeAllListeners','error','display','idle-overlay','appendChild','network','addEventListener','RDL_SESSION_SUSPENDED','includes','bind','Session\x20was\x20idle\x20for\x20too\x20long,\x20reloading\x20page','network-error-overlay','prototype','cursor','#50C878','log','code','Idle\x20timeout\x20initialized:','pendingOperations','RDL_NETWORK_ERROR','mousedown','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20rgba(0,\x200,\x200,\x200.85);\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20backdrop-filter:\x20blur(5px);\x0a\x20\x20\x20\x20','createElement','Multiple\x20connection\x20attempts\x20failed.\x20Please\x20reload\x20the\x20page\x20or\x20try\x20again\x20later.','We\x27re\x20having\x20trouble\x20connecting\x20to\x20the\x20server.\x20This\x20may\x20be\x20due\x20to\x20network\x20issues\x20or\x20server\x20maintenance.','reload-page-btn'];a22_0x391e=function(){return _0x3f3b2f;};return a22_0x391e();}document['readyState']==='loading'?document['addEventListener']('DOMContentLoaded',initIdleTimeout):initIdleTimeout();