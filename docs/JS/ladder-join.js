(function(_0x5e08a6,_0x4f5f9e){const _0x984638=a0_0x2620,_0xcc9c19=_0x5e08a6();while(!![]){try{const _0x33f625=-parseInt(_0x984638(0x167))/0x1+parseInt(_0x984638(0x166))/0x2*(-parseInt(_0x984638(0x16d))/0x3)+parseInt(_0x984638(0x163))/0x4+-parseInt(_0x984638(0x174))/0x5+parseInt(_0x984638(0x17d))/0x6+parseInt(_0x984638(0x16b))/0x7+parseInt(_0x984638(0x15b))/0x8*(parseInt(_0x984638(0x170))/0x9);if(_0x33f625===_0x4f5f9e)break;else _0xcc9c19['push'](_0xcc9c19['shift']());}catch(_0x3c0d72){_0xcc9c19['push'](_0xcc9c19['shift']());}}}(a0_0x1986,0xaf73c));function a0_0x1986(){const _0x4566ea=['join-ladder-button','4vqJGWX','849432DaxJZc','checked','toLowerCase','block','5371807kKlNBZ','disabled','1608879AfVwQD','playersCTF','style','27BUCjqB','uid','getElementById','ladder-join-status\x20success','607675DYJLfl','Ladder\x20changed\x20to:\x20','prototype','textContent','\x20ladder!\x20The\x20page\x20will\x20refresh...','trim','join-username-input','playersD3','currentUser','8522988BIuNcG','{}.constructor(\x22return\x20this\x22)(\x20)','console','You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.','className','Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.','message','error','return\x20(function()\x20','email','playersD2','empty','toString','ladder-join-status\x20error','\x20ladder.','value','1399656GUEeEB','log','none',',\x20defaulting\x20to\x20D1','display','info','Successfully\x20joined\x20the\x20','tiny-join-button','197740ecQQjJ','position'];a0_0x1986=function(){return _0x4566ea;};return a0_0x1986();}const a0_0x44ba03=(function(){let _0x3d749f=!![];return function(_0x5a3e34,_0x15e3be){const _0x4fcfc8=_0x3d749f?function(){if(_0x15e3be){const _0x2c7427=_0x15e3be['apply'](_0x5a3e34,arguments);return _0x15e3be=null,_0x2c7427;}}:function(){};return _0x3d749f=![],_0x4fcfc8;};}()),a0_0x56e2e2=a0_0x44ba03(this,function(){const _0x209afd=a0_0x2620;let _0x5bf2ff;try{const _0x2edfd4=Function(_0x209afd(0x185)+_0x209afd(0x17e)+');');_0x5bf2ff=_0x2edfd4();}catch(_0x5765e5){_0x5bf2ff=window;}const _0x29ca24=_0x5bf2ff['console']=_0x5bf2ff[_0x209afd(0x17f)]||{},_0x4ee446=['log','warn',_0x209afd(0x160),'error','exception','table','trace'];for(let _0x3587e1=0x0;_0x3587e1<_0x4ee446['length'];_0x3587e1++){const _0xc08072=a0_0x44ba03['constructor'][_0x209afd(0x176)]['bind'](a0_0x44ba03),_0x49514a=_0x4ee446[_0x3587e1],_0x2cc531=_0x29ca24[_0x49514a]||_0xc08072;_0xc08072['__proto__']=a0_0x44ba03['bind'](a0_0x44ba03),_0xc08072[_0x209afd(0x189)]=_0x2cc531[_0x209afd(0x189)]['bind'](_0x2cc531),_0x29ca24[_0x49514a]=_0xc08072;}});function a0_0x2620(_0x20bf8c,_0x3d0821){const _0x81a84e=a0_0x1986();return a0_0x2620=function(_0x56e2e2,_0x44ba03){_0x56e2e2=_0x56e2e2-0x15b;let _0x14e3b1=_0x81a84e[_0x56e2e2];return _0x14e3b1;},a0_0x2620(_0x20bf8c,_0x3d0821);}a0_0x56e2e2();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x534f42=a0_0x2620,_0x7fd48b=document['getElementById']('d1-switch'),_0x51b091=document['getElementById']('d2-switch');console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x7fd48b),console[_0x534f42(0x15c)]('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x51b091);function _0x4a4a2b(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0x2665d7=>{_0x2665d7['addEventListener']('change',_0x1bd3b3=>{const _0xe72e2c=a0_0x2620;_0x1bd3b3['target'][_0xe72e2c(0x168)]&&(currentLadder=_0x1bd3b3['target']['value'],console['log'](_0xe72e2c(0x175)+currentLadder),checkUserLadderStatus());});});}_0x4a4a2b();const _0x49255b=document['getElementById']('join-ladder-button');_0x49255b&&_0x49255b['addEventListener']('click',handleJoinLadder),onAuthStateChanged(auth,_0x494892=>{const _0x105b81=_0x534f42;if(_0x494892)checkUserLadderStatus();else{const _0x5dac7f=document['getElementById']('ladder-join-prompt');_0x5dac7f&&(_0x5dac7f['style'][_0x105b81(0x15f)]=_0x105b81(0x15d));}});});function getCollectionName(_0x219759){const _0x1de921=a0_0x2620;switch(_0x219759?.['toUpperCase']()){case'D1':return'players';case'D2':return _0x1de921(0x187);case'D3':return'playersD3';case'DUOS':case'DUO':return'playersDuos';case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x219759+_0x1de921(0x15e));return'players';}}async function checkUserLadderStatus(){const _0x12abb9=a0_0x2620;console['log']('Checking\x20user\x20status\x20for\x20ladder:',currentLadder);const _0x5b042d=auth['currentUser'],_0xe89f4a=document['getElementById']('ladder-join-prompt'),_0x31a82e=document['getElementById']('join-ladder-type'),_0x31f1d4=document['getElementById'](_0x12abb9(0x162));if(!_0x5b042d||!_0x5b042d['uid']||!_0xe89f4a||!_0x31a82e||!_0x31f1d4){if(_0xe89f4a)_0xe89f4a['style']['display']=_0x12abb9(0x15d);if(_0x31f1d4)_0x31f1d4['style']['display']=_0x12abb9(0x15d);return;}try{try{await _0x5b042d['getIdToken'](![]);}catch(_0x4498b0){console['error']('Authentication\x20verification\x20failed:',_0x4498b0),_0xe89f4a[_0x12abb9(0x16f)][_0x12abb9(0x15f)]=_0x12abb9(0x15d),_0x31f1d4['style']['display']='none';return;}const _0x51c381=getCollectionName(currentLadder),_0x2e5b74=doc(db,_0x51c381,_0x5b042d['uid']),_0x21c06a=await getDoc(_0x2e5b74);if(_0x21c06a['exists']())_0xe89f4a['style']['display']='none',_0x31f1d4['style']['display']='none';else{_0xe89f4a[_0x12abb9(0x16f)][_0x12abb9(0x15f)]='none',_0x31f1d4[_0x12abb9(0x16f)]['display']='block',_0x31a82e['textContent']=currentLadder,_0x31f1d4['onclick']=()=>{const _0x104dd9=_0x12abb9;_0xe89f4a[_0x104dd9(0x16f)]['display']===_0x104dd9(0x16a)?_0xe89f4a['style']['display']=_0x104dd9(0x15d):_0xe89f4a[_0x104dd9(0x16f)]['display']=_0x104dd9(0x16a);};const _0x38a729=document[_0x12abb9(0x172)]('join-username-input'),_0x51031c=document[_0x12abb9(0x172)]('ladder-join-status');if(_0x38a729)_0x38a729['value']='';_0x51031c&&(_0x51031c['textContent']='',_0x51031c[_0x12abb9(0x181)]='ladder-join-status');}}catch(_0x32fe7b){console['error']('Error\x20checking\x20ladder\x20status:',_0x32fe7b),_0xe89f4a['style']['display']=_0x12abb9(0x15d),_0x31f1d4[_0x12abb9(0x16f)]['display']='none';}}async function handleJoinLadder(){const _0x297f5a=a0_0x2620,_0x91e2e7=auth[_0x297f5a(0x17c)],_0x2744b0=document['getElementById'](_0x297f5a(0x165)),_0x1e46d1=document['getElementById']('ladder-join-status'),_0x372959=document['getElementById'](_0x297f5a(0x17a));if(!_0x91e2e7||!_0x91e2e7[_0x297f5a(0x171)]){_0x1e46d1[_0x297f5a(0x177)]=_0x297f5a(0x180),_0x1e46d1[_0x297f5a(0x181)]=_0x297f5a(0x18a);return;}try{await _0x91e2e7['getIdToken'](!![]);}catch(_0x2736c9){console['error']('Authentication\x20error:',_0x2736c9),_0x1e46d1['textContent']='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x1e46d1['className']='ladder-join-status\x20error';return;}if(!_0x372959||!_0x372959[_0x297f5a(0x18c)][_0x297f5a(0x179)]()){_0x1e46d1['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x1e46d1['className']='ladder-join-status\x20error';return;}try{_0x2744b0['disabled']=!![],_0x1e46d1['textContent']='Verifying\x20username...',_0x1e46d1[_0x297f5a(0x181)]='ladder-join-status\x20loading';let _0x555c22='',_0x4a9bf8=null;const _0x578012=['players',_0x297f5a(0x187),_0x297f5a(0x17b),'playersDuos',_0x297f5a(0x16e),'nonParticipants'];for(const _0xa09c55 of _0x578012){try{const _0x596fb4=doc(db,_0xa09c55,_0x91e2e7['uid']),_0xa36174=await getDoc(_0x596fb4);if(_0xa36174['exists']()){_0x4a9bf8=_0xa36174['data']();if(_0x4a9bf8['username']){_0x555c22=_0x4a9bf8['username'];break;}}}catch(_0x5707e9){console['error']('Error\x20checking\x20'+_0xa09c55+':',_0x5707e9);}}!_0x555c22&&_0x91e2e7[_0x297f5a(0x186)]&&(_0x555c22=_0x91e2e7[_0x297f5a(0x186)]['split']('@')[0x0]);if(!_0x555c22){_0x1e46d1[_0x297f5a(0x177)]=_0x297f5a(0x182),_0x1e46d1['className']='ladder-join-status\x20error',_0x2744b0[_0x297f5a(0x16c)]=![];return;}const _0x1b45a8=_0x372959[_0x297f5a(0x18c)]['trim']();if(_0x555c22&&_0x1b45a8['toLowerCase']()!==_0x555c22[_0x297f5a(0x169)]()){_0x1e46d1[_0x297f5a(0x177)]='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x555c22+'\x22\x20to\x20confirm.',_0x1e46d1['className']='ladder-join-status\x20error',_0x2744b0[_0x297f5a(0x16c)]=![];return;}_0x1e46d1[_0x297f5a(0x177)]='Joining\x20'+currentLadder+'\x20ladder...';const _0x3c6d3f=getCollectionName(currentLadder),_0x4a23a0=doc(db,_0x3c6d3f,_0x91e2e7['uid']),_0x13faa6=await getDoc(_0x4a23a0);if(_0x13faa6['exists']()){_0x1e46d1['textContent']='You\x20are\x20already\x20part\x20of\x20the\x20'+currentLadder+_0x297f5a(0x18b),_0x1e46d1['className']=_0x297f5a(0x18a),_0x2744b0[_0x297f5a(0x16c)]=![];return;}try{await _0x91e2e7['getIdToken'](!![]);}catch(_0x364c91){_0x1e46d1[_0x297f5a(0x177)]='Authentication\x20failed.\x20Please\x20sign\x20in\x20again.',_0x1e46d1[_0x297f5a(0x181)]='ladder-join-status\x20error',_0x2744b0['disabled']=![];return;}const _0x235c82=_0x555c22,_0x1b4290=collection(db,_0x3c6d3f),_0x5149f8=query(_0x1b4290,orderBy(_0x297f5a(0x164),'desc'),limit(0x1)),_0xccb644=await getDocs(_0x5149f8);let _0x31732d=0x1;if(!_0xccb644[_0x297f5a(0x188)]){const _0x6aafff=_0xccb644['docs'][0x0]['data']();_0x31732d=(_0x6aafff['position']||0x0)+0x1;}const _0x5df00f={'username':_0x235c82,'email':_0x91e2e7['email'],'eloRating':0x4b0,'position':_0x31732d,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder==='DUOS'&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x4a23a0,_0x5df00f),currentLadder==='DUOS'?_0x1e46d1['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x1e46d1['textContent']=_0x297f5a(0x161)+currentLadder+_0x297f5a(0x178),_0x1e46d1[_0x297f5a(0x181)]=_0x297f5a(0x173),setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x35f435){console[_0x297f5a(0x184)]('Error\x20joining\x20ladder:',_0x35f435),_0x1e46d1['textContent']='Error\x20joining\x20ladder:\x20'+_0x35f435[_0x297f5a(0x183)],_0x1e46d1['className']='ladder-join-status\x20error',_0x2744b0['disabled']=![];}}