const a33_0x26a365=(function(){let _0x11110f=!![];return function(_0x3c8cac,_0x14b7dd){const _0x426d47=_0x11110f?function(){const _0x37c5f5=a33_0x29e1;if(_0x14b7dd){const _0x26e2c2=_0x14b7dd[_0x37c5f5(0xf8)](_0x3c8cac,arguments);return _0x14b7dd=null,_0x26e2c2;}}:function(){};return _0x11110f=![],_0x426d47;};}()),a33_0x22c743=a33_0x26a365(this,function(){const _0x5bbc1a=a33_0x29e1,_0x1c5107=function(){let _0x227da5;try{_0x227da5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xa3aa4f){_0x227da5=window;}return _0x227da5;},_0x2d2788=_0x1c5107(),_0x5e9533=_0x2d2788['console']=_0x2d2788['console']||{},_0x3fdad2=['log','warn',_0x5bbc1a(0xee),'error',_0x5bbc1a(0xfa),_0x5bbc1a(0xd4),'trace'];for(let _0x3ce318=0x0;_0x3ce318<_0x3fdad2['length'];_0x3ce318++){const _0x3190a0=a33_0x26a365['constructor'][_0x5bbc1a(0x108)]['bind'](a33_0x26a365),_0x353358=_0x3fdad2[_0x3ce318],_0x6f3897=_0x5e9533[_0x353358]||_0x3190a0;_0x3190a0['__proto__']=a33_0x26a365['bind'](a33_0x26a365),_0x3190a0['toString']=_0x6f3897['toString']['bind'](_0x6f3897),_0x5e9533[_0x353358]=_0x3190a0;}});a33_0x22c743();import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';import{getRankStyle}from'./ranks.js';import a33_0x22304e from'./firebase-idle-wrapper.js';const styleEl=document['createElement']('style');styleEl['textContent']='\x0a\x20\x20.streak-indicator\x20{\x0a\x20\x20\x20\x20font-size:\x200.9em;\x0a\x20\x20\x20\x20color:\x20#FF4500;\x0a\x20\x20\x20\x20margin-left:\x205px;\x0a\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20}\x0a',document['head']['appendChild'](styleEl);const playerCacheD3={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD3(_0x15c134=![]){const _0x34e835=a33_0x29e1,_0xbe82d8=document[_0x34e835(0xe5)](_0x34e835(0xda));if(!_0xbe82d8){console[_0x34e835(0x112)]('D3\x20Ladder\x20table\x20body\x20not\x20found');return;}_0xbe82d8[_0x34e835(0xd7)]=_0x34e835(0xe8);try{const _0x4f25ea=Date['now']();if(!_0x15c134&&playerCacheD3[_0x34e835(0xde)]&&_0x4f25ea-playerCacheD3['timestamp']<CACHE_DURATION){updateLadderDisplayD3(playerCacheD3['data']);return;}const _0x55e0ba=collection(db,'playersD3'),_0x1a86cb=await getDocs(_0x55e0ba),_0x1e4d25=[];_0x1a86cb[_0x34e835(0x10a)](_0x1471dd=>{const _0xf27ee9=_0x34e835,_0x2d0be8=_0x1471dd[_0xf27ee9(0xde)]();_0x2d0be8['username']&&_0x1e4d25['push']({..._0x2d0be8,'id':_0x1471dd['id'],'elo':_0x2d0be8['eloRating']||0x0,'position':_0x2d0be8['position']||Number['MAX_SAFE_INTEGER']});});const _0x2724f3=collection(db,_0x34e835(0xd9)),_0x136e29=await getDocs(_0x2724f3),_0x3cc1a6=new Map();_0x136e29['forEach'](_0x5252b7=>{const _0x99e919=_0x34e835,_0x1520ba=_0x5252b7[_0x99e919(0xde)]();_0x1520ba['username']&&_0x3cc1a6['set'](_0x1520ba[_0x99e919(0xfc)][_0x99e919(0x110)](),_0x1520ba);});for(const _0x30123e of _0x1e4d25){const _0x28a74d=_0x30123e[_0x34e835(0xfc)]['toLowerCase']();if(_0x3cc1a6['has'](_0x28a74d)){const _0x54d52e=_0x3cc1a6['get'](_0x28a74d);_0x54d52e[_0x34e835(0xed)]&&(_0x30123e['country']=_0x54d52e['country']['toLowerCase']());}}const _0x16cf94=_0x1e4d25['map'](_0x49d6b1=>_0x49d6b1[_0x34e835(0xfc)]),_0x2b7fd7=await fetchBatchMatchStatsD3(_0x16cf94);_0x1e4d25['sort']((_0x421530,_0x4b7921)=>{const _0x3a1799=_0x34e835,_0x4ca633=_0x2b7fd7[_0x3a1799(0xf0)](_0x421530[_0x3a1799(0xfc)])?.[_0x3a1799(0x10d)]||0x0,_0x597359=_0x2b7fd7['get'](_0x4b7921['username'])?.[_0x3a1799(0x10d)]||0x0;if(_0x4ca633===0x0!==(_0x597359===0x0))return _0x4ca633===0x0?0x1:-0x1;return(_0x421530[_0x3a1799(0xe7)]||0x3e7)-(_0x4b7921['position']||0x3e7);}),_0x1e4d25['forEach']((_0xb5d5be,_0xaa74d)=>{_0xb5d5be['position']=_0xaa74d+0x1;}),playerCacheD3['data']=_0x1e4d25,playerCacheD3['timestamp']=_0x4f25ea,updateLadderDisplayD3(_0x1e4d25);}catch(_0x4fe515){console['error']('Error\x20loading\x20D3\x20ladder:',_0x4fe515),_0xbe82d8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D3\x20ladder\x20data:\x20'+_0x4fe515[_0x34e835(0xd3)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function calculateStreakDays(_0x4189e0){const _0x45506e=a33_0x29e1;if(!_0x4189e0)return 0x0;const _0x338a61=_0x4189e0[_0x45506e(0xdf)](),_0x2eae55=new Date(),_0x2efda2=Math['abs'](_0x2eae55-_0x338a61);return Math[_0x45506e(0xfb)](_0x2efda2/(0x3e8*0x3c*0x3c*0x18));}async function updatePlayerPositions(_0x386dc7,_0x40cc72){const _0x43ad39=a33_0x29e1;try{const _0x45b564=collection(db,_0x43ad39(0xe4)),_0x3899ba=await getDocs(_0x45b564),_0x4fb00c=[];_0x3899ba[_0x43ad39(0x10a)](_0x572b25=>{_0x4fb00c['push']({'id':_0x572b25['id'],..._0x572b25['data']()});});const _0x5ec466=_0x4fb00c['find'](_0x419cd5=>_0x419cd5['username']===_0x386dc7),_0x17844a=_0x4fb00c[_0x43ad39(0xd2)](_0x47c07f=>_0x47c07f['username']===_0x40cc72);if(!_0x5ec466||!_0x17844a){console[_0x43ad39(0x112)]('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D3\x20players\x20list');return;}if(_0x5ec466['position']>_0x17844a[_0x43ad39(0xe7)]){const _0x45a380=_0x17844a['position'];for(const _0x18a569 of _0x4fb00c){_0x18a569['position']>=_0x17844a['position']&&_0x18a569[_0x43ad39(0xe7)]<_0x5ec466['position']&&_0x18a569['username']!==_0x386dc7&&await updateDoc(doc(db,'playersD3',_0x18a569['id']),{'position':_0x18a569['position']+0x1});}await updateDoc(doc(db,_0x43ad39(0xe4),_0x5ec466['id']),{'position':_0x45a380});if(_0x45a380===0x1){const _0x1867b9=doc(db,'playersD3',_0x5ec466['id']),_0x4bbddd=await getDoc(_0x1867b9);!_0x4bbddd['data']()['firstPlaceDate']&&await updateDoc(_0x1867b9,{'firstPlaceDate':Timestamp['now']()});}if(_0x17844a['position']===0x1){const _0x43c630=doc(db,'playersD3',_0x17844a['id']);await updateDoc(_0x43c630,{'firstPlaceDate':null});}}}catch(_0x1a5b39){console['error']('Error\x20updating\x20D3\x20player\x20positions:',_0x1a5b39);}}function a33_0x29e1(_0x16f5ef,_0x40834a){const _0x22c743=a33_0x555c();return a33_0x29e1=function(_0x26a365,_0x54eb8d){_0x26a365=_0x26a365-0xd2;let _0x555c83=_0x22c743[_0x26a365];return _0x555c83;},a33_0x29e1(_0x16f5ef,_0x40834a);}async function updateLadderDisplayD3(_0x5eee59){const _0x2801e4=a33_0x29e1;_0x5eee59['sort']((_0x309616,_0x322f2b)=>_0x309616[_0x2801e4(0xe7)]-_0x322f2b[_0x2801e4(0xe7)]);const _0x429234=document['querySelector']('#ladder-d3\x20tbody');if(!_0x429234)return;_0x429234['innerHTML']='';const _0x32e752=_0x5eee59['map'](_0x114680=>_0x114680[_0x2801e4(0xfc)]),_0xd76ddf=await fetchBatchMatchStatsD3(_0x32e752),_0x771f14=document[_0x2801e4(0xe5)](_0x2801e4(0xd5));_0x771f14[_0x2801e4(0xd7)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20';const _0x4b71f7=_0x5eee59['map'](_0x139cae=>{const _0x44db51=_0x2801e4,_0xa2cc86=_0xd76ddf['get'](_0x139cae[_0x44db51(0xfc)])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRowD3(_0x139cae,_0xa2cc86);})[_0x2801e4(0xdd)]('');_0x429234['innerHTML']=_0x4b71f7,getPlayersLastEloChangesD3(_0x32e752)['then'](_0x2395d5=>{const _0x577b84=_0x2801e4,_0x3693f0=new Map();_0x429234['querySelectorAll']('tr')[_0x577b84(0x10a)]((_0x328321,_0x7e521a)=>{_0x7e521a<_0x32e752['length']&&_0x3693f0['set'](_0x32e752[_0x7e521a],_0x328321);}),_0x2395d5['forEach']((_0x46f90a,_0x5bfa2d)=>{const _0x2dcd9c=_0x577b84,_0x3b9f48=_0x3693f0['get'](_0x5bfa2d);if(_0x3b9f48&&_0x46f90a!==0x0){const _0x34f404=_0x3b9f48[_0x2dcd9c(0xe5)]('td:nth-child(3)');if(_0x34f404){const _0x14e365=_0x46f90a>0x0?'+'+_0x46f90a:''+_0x46f90a,_0x681f2a=_0x34f404['querySelector'](_0x2dcd9c(0xe2));_0x681f2a&&(_0x681f2a[_0x2dcd9c(0xfe)]=_0x14e365,_0x681f2a['style']['color']=_0x46f90a>0x0?_0x2dcd9c(0xf7):'#F44336',_0x681f2a[_0x2dcd9c(0x10c)]['fontWeight']='bold',_0x681f2a['style'][_0x2dcd9c(0xec)]='0.85em',_0x681f2a['style'][_0x2dcd9c(0x101)]='inline',_0x681f2a['style'][_0x2dcd9c(0xeb)]=_0x2dcd9c(0xf5),_0x681f2a[_0x2dcd9c(0x10c)][_0x2dcd9c(0xe1)]='1');}}});})[_0x2801e4(0x104)](_0x467661=>console['error'](_0x2801e4(0xf1),_0x467661));}async function fetchBatchMatchStatsD3(_0x25ad37){const _0xc5f7b1=a33_0x29e1,_0x25fb22=new Map();try{const _0x58a3c0=collection(db,'approvedMatchesD3'),_0x41309d=await getDocs(_0x58a3c0);_0x41309d['forEach'](_0x487d37=>{const _0x542e35=a33_0x29e1,_0x2ed621=_0x487d37['data']();if(_0x25ad37['includes'](_0x2ed621['winnerUsername'])){const _0x171eea=_0x2ed621[_0x542e35(0x106)];!_0x25fb22['has'](_0x171eea)&&_0x25fb22['set'](_0x171eea,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x130c11=_0x25fb22['get'](_0x171eea);_0x130c11['wins']++,_0x130c11['totalMatches']++,_0x130c11['totalKills']+=parseInt(_0x2ed621['winnerScore'])||0x0,_0x130c11['totalDeaths']+=parseInt(_0x2ed621[_0x542e35(0xe0)])||0x0;}if(_0x25ad37['includes'](_0x2ed621[_0x542e35(0xff)])){const _0x284cee=_0x2ed621['loserUsername'];!_0x25fb22['has'](_0x284cee)&&_0x25fb22[_0x542e35(0xf6)](_0x284cee,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});const _0x53d987=_0x25fb22['get'](_0x284cee);_0x53d987['losses']++,_0x53d987['totalMatches']++,_0x53d987[_0x542e35(0xfd)]+=parseInt(_0x2ed621[_0x542e35(0xe0)])||0x0,_0x53d987['totalDeaths']+=parseInt(_0x2ed621['winnerScore'])||0x0;}}),_0x25fb22['forEach'](_0xc59445=>{const _0x2475a4=a33_0x29e1;_0xc59445['kda']=_0xc59445['totalDeaths']>0x0?(_0xc59445[_0x2475a4(0xfd)]/_0xc59445['totalDeaths'])[_0x2475a4(0xdb)](0x2):_0xc59445['totalKills'],_0xc59445['winRate']=_0xc59445['totalMatches']>0x0?(_0xc59445[_0x2475a4(0x105)]/_0xc59445['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x36bb44){console['error'](_0xc5f7b1(0x111),_0x36bb44);}return _0x25fb22;}function createPlayerRowD3(_0x49ba10,_0x1cc14f){const _0x232a87=a33_0x29e1,_0x3150fa=parseFloat(_0x49ba10[_0x232a87(0xdc)])||0x0;let _0x14765d='gray';if(_0x3150fa>=0x7d0)_0x14765d='#50C878';else{if(_0x3150fa>=0x708)_0x14765d='#FFD700';else{if(_0x3150fa>=0x640)_0x14765d='#C0C0C0';else _0x3150fa>=0x578&&(_0x14765d='#CD7F32');}}let _0x168b69='';return _0x49ba10['country']&&(_0x168b69=_0x232a87(0x103)+_0x49ba10['country']['toLowerCase']()+_0x232a87(0xe3)+_0x49ba10[_0x232a87(0xed)]+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>'),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x49ba10[_0x232a87(0xe7)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x49ba10['username'])+'&ladder=d3\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x14765d+_0x232a87(0x10b)+_0x49ba10[_0x232a87(0xfc)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x168b69+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x14765d+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x3150fa+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cc14f['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cc14f['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cc14f['losses']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cc14f['kda']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x1cc14f['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}async function getPlayersLastEloChangesD3(_0x3c6576){const _0xddb0ce=a33_0x29e1,_0x5d4f3c=new Map();_0x3c6576[_0xddb0ce(0x10a)](_0x42368b=>_0x5d4f3c[_0xddb0ce(0xf6)](_0x42368b,0x0));try{console['log'](_0xddb0ce(0x113),_0x3c6576);const _0x3f02ee=new Map(),_0x3f5a82=await getDocs(collection(db,'playersD3'));_0x3f5a82['forEach'](_0x2cbca7=>{const _0xd78aa7=_0x2cbca7['data']();_0xd78aa7['username']&&_0x3f02ee['set'](_0x2cbca7['id'],_0xd78aa7['username']);}),console['log']('D3:\x20Player\x20ID\x20mappings:',Array['from'](_0x3f02ee['entries']()));const _0x192c1d=collection(db,_0xddb0ce(0x10f)),_0x20a402=query(_0x192c1d,orderBy('timestamp','desc'),limit(0x64)),_0x1c652d=await getDocs(_0x20a402);_0x1c652d[_0xddb0ce(0xf2)]?console['log']('D3:\x20eloHistoryD3\x20is\x20empty,\x20trying\x20fallback...'):console['log']('D3:\x20Found\x20'+_0x1c652d['size']+'\x20entries\x20in\x20eloHistoryD3');const _0x3cff70=new Map();_0x1c652d['forEach'](_0x22f4ca=>{const _0x43e3fc=_0xddb0ce,_0x14e7f3=_0x22f4ca['data']();let _0x36c270=null;if(_0x14e7f3['username'])_0x36c270=_0x14e7f3['username'];else{if(_0x14e7f3['playerUsername'])_0x36c270=_0x14e7f3['playerUsername'];else{if(_0x14e7f3[_0x43e3fc(0xf9)]&&typeof _0x14e7f3['player']==='string')_0x36c270=_0x14e7f3[_0x43e3fc(0xf9)];else{if(_0x14e7f3['player']&&_0x3f02ee['has'](_0x14e7f3['player']))_0x36c270=_0x3f02ee['get'](_0x14e7f3[_0x43e3fc(0xf9)]);else _0x14e7f3['playerId']&&_0x3f02ee['has'](_0x14e7f3['playerId'])&&(_0x36c270=_0x3f02ee[_0x43e3fc(0xf0)](_0x14e7f3[_0x43e3fc(0x100)]));}}}(_0x14e7f3['username']===_0x43e3fc(0xd6)||_0x14e7f3['playerUsername']==='pilot'||_0x14e7f3['player']&&_0x3f02ee[_0x43e3fc(0xf0)](_0x14e7f3['player'])===_0x43e3fc(0xd6))&&console[_0x43e3fc(0xf3)]('D3:\x20Found\x20pilot\x20entry:',_0x14e7f3),_0x36c270&&_0x3c6576[_0x43e3fc(0xe6)](_0x36c270)&&(!_0x3cff70['has'](_0x36c270)&&_0x3cff70['set'](_0x36c270,[]),_0x3cff70['get'](_0x36c270)[_0x43e3fc(0xe9)]({..._0x14e7f3,'timestamp':_0x14e7f3[_0x43e3fc(0xef)]?.['seconds']||0x0}));}),console['log']('D3:\x20Found\x20entries\x20for\x20'+_0x3cff70['size']+'\x20players'),_0x3cff70[_0xddb0ce(0x10a)]((_0x387f1a,_0x581b0c)=>{const _0x3e314a=_0xddb0ce;if(_0x387f1a['length']>0x0){_0x387f1a['sort']((_0x48a4f3,_0x3d23d5)=>_0x3d23d5[_0x3e314a(0xef)]-_0x48a4f3['timestamp']);const _0x54fc15=_0x387f1a['find'](_0x356c1c=>_0x356c1c[_0x3e314a(0x102)]!==undefined||_0x356c1c['newElo']!==undefined&&_0x356c1c['previousElo']!==undefined);if(_0x54fc15){let _0x3b492a;if(_0x54fc15[_0x3e314a(0x102)]!==undefined)_0x3b492a=_0x54fc15['change'];else _0x54fc15['newElo']!==undefined&&_0x54fc15[_0x3e314a(0xf4)]!==undefined&&(_0x3b492a=_0x54fc15[_0x3e314a(0xd8)]-_0x54fc15['previousElo']);_0x3b492a!==undefined&&(_0x5d4f3c[_0x3e314a(0xf6)](_0x581b0c,_0x3b492a),console['log']('D3:\x20'+_0x581b0c+'\x20ELO\x20change:\x20'+_0x3b492a));}}});if(_0x3cff70['size']===0x0){console['log']('D3:\x20No\x20entries\x20found\x20in\x20eloHistoryD3,\x20trying\x20fallback...');const _0x4bbab4=collection(db,'eloHistory'),_0x3737f3=query(_0x4bbab4,where('gameMode','==','D3'),orderBy('timestamp','desc'),limit(0x32));try{const _0x1a59e7=await getDocs(_0x3737f3);console['log']('D3:\x20Found\x20'+_0x1a59e7['size']+'\x20fallback\x20entries'),_0x1a59e7['forEach'](_0x4e93ac=>{const _0x24b931=_0xddb0ce,_0x318b65=_0x4e93ac['data']();let _0x297396=_0x318b65['username']||_0x318b65['playerUsername'];!_0x297396&&_0x318b65['player']&&_0x3f02ee[_0x24b931(0x107)](_0x318b65['player'])&&(_0x297396=_0x3f02ee['get'](_0x318b65['player']));if(_0x297396&&_0x3c6576['includes'](_0x297396)){const _0x58641b=_0x318b65[_0x24b931(0x102)]||(_0x318b65['newElo']!==undefined&&_0x318b65[_0x24b931(0xf4)]!==undefined?_0x318b65[_0x24b931(0xd8)]-_0x318b65['previousElo']:0x0);_0x58641b!==0x0&&(_0x5d4f3c[_0x24b931(0xf6)](_0x297396,_0x58641b),console['log'](_0x24b931(0xea)+_0x297396+'\x20fallback\x20ELO\x20change:\x20'+_0x58641b));}});}catch(_0x3bc271){console['log']('D3:\x20Fallback\x20query\x20failed:',_0x3bc271);}}const _0x207f62=Array['from'](_0x5d4f3c[_0xddb0ce(0x109)]())[_0xddb0ce(0x10e)](([_0x1cf4ce,_0x40dc7f])=>_0x40dc7f!==0x0);console['log']('D3:\x20Final\x20ELO\x20changes:',_0x207f62);}catch(_0x10c5c1){console['error']('D3:\x20Error\x20fetching\x20ELO\x20history:',_0x10c5c1);}return _0x5d4f3c;}function a33_0x555c(){const _0x4d203c=['find','message','table','#ladder-d3\x20thead\x20tr','pilot','innerHTML','newElo','userProfiles','#ladder-d3\x20tbody','toFixed','elo','join','data','toDate','loserScore','opacity','.trend-indicator','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','playersD3','querySelector','includes','position','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D3\x20ladder\x20data...</td></tr>','push','D3:\x20','visibility','fontSize','country','info','timestamp','get','Error\x20updating\x20D3\x20ELO\x20trend\x20indicators:','empty','log','previousElo','visible','set','#4CAF50','apply','player','exception','ceil','username','totalKills','textContent','loserUsername','playerId','display','change','<img\x20src=\x22../images/flags/','catch','wins','winnerUsername','has','prototype','entries','forEach',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','style','totalMatches','filter','eloHistoryD3','toLowerCase','Error\x20fetching\x20batch\x20match\x20stats\x20for\x20D3:','error','D3:\x20Looking\x20for\x20ELO\x20changes\x20for\x20users:'];a33_0x555c=function(){return _0x4d203c;};return a33_0x555c();}export{displayLadderD3,updatePlayerPositions};