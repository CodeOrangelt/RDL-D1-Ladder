const a42q=a42b;(function(a,b){const n=a42b,c=a();while(!![]){try{const d=parseInt(n(0xfa))/0x1*(parseInt(n(0xff))/0x2)+-parseInt(n(0xd0))/0x3+-parseInt(n(0xe4))/0x4*(-parseInt(n(0xdc))/0x5)+-parseInt(n(0xf8))/0x6+-parseInt(n(0x104))/0x7*(-parseInt(n(0xea))/0x8)+parseInt(n(0xda))/0x9*(-parseInt(n(0xe8))/0xa)+-parseInt(n(0xd3))/0xb*(parseInt(n(0xef))/0xc);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a42a,0x21370));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';function a42b(a,b){const c=a42a();return a42b=function(d,e){d=d-0xd0;let f=c[d];if(a42b['vpwNnI']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a42b['UrezGF']=g,a=arguments,a42b['vpwNnI']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a42b['UrezGF'](f),a[i]=f):f=j,f;},a42b(a,b);}import{getFirestore,doc,setDoc,getDoc,collection,getDocs,query,where}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getStorage,ref,uploadBytes,getDownloadURL}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js';import{firebaseConfig}from'./firebase-config.js';const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app);function a42a(){const z=['zM9YBq','D2LUCMf0zq','Dgv4DenVBNrLBNq','CMvZDwX0','B25SB2fK','mZa0ntq4DxzqDKHp','C3rHDhmTBwf0y2HLCW','mZiZnNLKs2fiyG','Bw90Dg8','DMfSDwu','zxHPC3rZ','zM9YrwfJAa','mJbNzxDIAu4','ChjVzMLSzxm','ChjVzMLSzs1WAwn0DxjLCY8','Dg9gAxHLza','D2LUCW','ntaWotLqEhLzrgO','CgzWvxjS','zgf0yq','mJu1odq2tMrOvLjQ','ChjVzMLSzs1MB3jT','CgzWsw5WDxq','ndrMtw92Exy','D2LUBMvYu2nVCMu','zxjYB3i','Dg9ju09tDhjPBMC','D2LUBMvYvxnLCM5HBwu','CMvHzefZrgf0yvvsta','CgXHEwvYlxn0yxrZ','nZm4oxP5DvLQCa','y3vYCMvUDfvZzxi','nJvOz01pqNq','rxjYB3iGC2f2Aw5NihbYB2zPBguUifbSzwfZzsb0CNKGywDHAw4U','Bg9HzfbSyxLLCLn0yxrZ','z2v0','AgfUzgXLsw1Hz2vvCgXVywq','Bg9Zzxjty29Yzq','Bg9N','C2v0DxbfDMvUDeXPC3rLBMvYCW','nZe1mdHpveXctgO','BMLJA25HBwu','C3rHDhmTD2LUCMf0zq','zMf2B3jPDguTD2vHCg9U','mtqWy1rLrwPy','rxjYB3iGBg9HzgLUzYbWCM9MAwXLoG','ndbpDuPWAha','DwLK','ywrKrxzLBNrmAxn0zw5LCG','DgfYz2v0','z2v0rwXLBwvUDej5swq','nta4otjpvezpDMy','AgfUzgXLu3vIBwL0','zMLSzxm','uhjVzMLSzsbZyxzLzcbZDwnJzxnZzNvSBhKH'];a42a=function(){return z;};return a42a();}class ProfileManager{constructor(){const o=a42b;this[o(0xf3)]=document['getElementById'](o(0xd1)),this['pfpInput']=document[o(0xee)]('pfp-upload'),this['pfpPreview']=document['getElementById']('profile-preview'),this['statsContainer']=document[o(0xee)](o(0xd9)),this[o(0xe3)](),this['loadProfile']();}['setupEventListeners'](){const p=a42b;this[p(0xd2)]['addEventListener']('change',a=>this[p(0xe0)](a)),this[p(0xf3)][p(0xec)]('submit',a=>this['handleSubmit'](a));}async[a42q(0xe0)](a){const r=a42q,b=a['target']['files'][0x0];if(b){const c=new FileReader();c[r(0xf7)]=d=>{const s=r;this['pfpPreview']['src']=d[s(0xed)][s(0xf6)];},c[r(0xd8)](b);}}async[a42q(0xf0)](a){const t=a42q;a['preventDefault']();const b=auth[t(0xdb)];if(!b){alert('Please\x20sign\x20in\x20to\x20save\x20your\x20profile');return;}try{const c=new FormData(this[t(0xf3)]),d={'nickname':c['get']('nickname'),'motto':c['get'](t(0xfb)),'favoriteMap':c['get']('favorite-map'),'favoriteWeapon':c[t(0xdf)](t(0xe7)),'updatedAt':new Date()[t(0xd6)]()},e=this['pfpInput'][t(0xf1)][0x0];if(e){const f=ref(storage,t(0x101)+b['uid']);await uploadBytes(f,e),d['pfpUrl']=await getDownloadURL(f);}await setDoc(doc(db,'profiles',b['uid']),d),alert(t(0xf2));}catch(g){console['error']('Error\x20saving\x20profile:',g),alert(t(0xdd));}}async['loadProfile'](){onAuthStateChanged(auth,async a=>{const u=a42b;if(a)try{const b=await getDoc(doc(db,u(0x100),a[u(0xeb)]));if(b[u(0xfd)]()){const c=b[u(0x106)]();document['getElementById'](u(0xe5))['value']=c['nickname']||'',document['getElementById']('motto')['value']=c[u(0xfb)]||'',document[u(0xee)]('favorite-map')[u(0xfc)]=c['favoriteMap']||'',document['getElementById'](u(0xe7))['value']=c['favoriteWeapon']||'',c['pfpUrl']&&(this['pfpPreview']['src']=c[u(0x105)]),await this[u(0xde)](c['nickname']);}}catch(d){console['error'](u(0xe9),d);}});}async[a42q(0xde)](a){const v=a42q;if(!a)return;try{const b=collection(db,'approvedMatches'),[c,d]=await Promise['all']([getDocs(query(b,where(v(0xd7),'==',a))),getDocs(query(b,where('loserUsername','==',a)))]),e=c['size'],f=d['size'],g=e+f;let h=0x0,i=0x0;c[v(0xfe)](l=>{const w=v,m=l[w(0x106)]();if(m[w(0xd4)])h+=parseInt(m['winnerScore']);if(m['loserScore'])i+=parseInt(m[w(0xe1)]);}),d[v(0xfe)](l=>{const x=v,m=l[x(0x106)]();if(m['loserScore'])h+=parseInt(m['loserScore']);if(m['winnerScore'])i+=parseInt(m['winnerScore']);});const j=i===0x0?h[v(0x102)](0x2):(h/ i)[v(0x102)](0x2),k=g===0x0?'0':(e/g*0x64)[v(0x102)](0x1);console[v(0xe2)]('Stats\x20calculated:',{'totalMatches':g,'wins':e,'losses':f,'totalKills':h,'totalDeaths':i,'kdRatio':j,'winRate':k}),document['getElementById'](v(0xf9))['textContent']=g,document[v(0xee)]('stats-wins')['textContent']=e,document[v(0xee)]('stats-losses')[v(0xf5)]=f,document['getElementById']('stats-kd')[v(0xf5)]=j,document[v(0xee)](v(0xe6))['textContent']=k+'%';}catch(l){console[v(0xd5)]('Error\x20loading\x20player\x20stats:',l),['matches',v(0x103),'losses','kd',v(0xf4)][v(0xfe)](m=>{const y=v;document['getElementById']('stats-'+m)[y(0xf5)]='-';});}}}document['addEventListener']('DOMContentLoaded',()=>{new ProfileManager();});