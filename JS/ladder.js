const a27_0x5135c7=(function(){let _0x89c297=!![];return function(_0x270a70,_0x4fc21c){const _0x136fed=_0x89c297?function(){if(_0x4fc21c){const _0x37c19a=_0x4fc21c['apply'](_0x270a70,arguments);return _0x4fc21c=null,_0x37c19a;}}:function(){};return _0x89c297=![],_0x136fed;};}()),a27_0x5a5ebb=a27_0x5135c7(this,function(){const _0x2afd15=a27_0x5969,_0x18ab59=function(){let _0x2c90c9;try{_0x2c90c9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x44b662){_0x2c90c9=window;}return _0x2c90c9;},_0x45d9d3=_0x18ab59(),_0x13da05=_0x45d9d3[_0x2afd15(0x1ea)]=_0x45d9d3['console']||{},_0x565dc9=['log','warn',_0x2afd15(0x23b),'error','exception','table','trace'];for(let _0x5e4b20=0x0;_0x5e4b20<_0x565dc9[_0x2afd15(0x1f1)];_0x5e4b20++){const _0xe273a7=a27_0x5135c7['constructor']['prototype'][_0x2afd15(0x233)](a27_0x5135c7),_0x1f2ace=_0x565dc9[_0x5e4b20],_0x31ca80=_0x13da05[_0x1f2ace]||_0xe273a7;_0xe273a7[_0x2afd15(0x1f5)]=a27_0x5135c7['bind'](a27_0x5135c7),_0xe273a7['toString']=_0x31ca80['toString']['bind'](_0x31ca80),_0x13da05[_0x1f2ace]=_0xe273a7;}});a27_0x5a5ebb();import{db}from'./firebase-config.js';import{collection,getDocs,deleteDoc,doc,getDoc,query,where,updateDoc,Timestamp,onSnapshot,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{getRankStyle}from'./ranks.js';import{displayLadderD2}from'./ladderd2.js';import{displayLadderD3}from'./ladderd3.js';import{getAuth}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{getLadderData,getEloHistoryBatch,setupEfficientListener}from'./services/firebaseService.js';import{displayLadderDuos}from'./ladderduos.js';function a27_0xa420(){const _0x285fb2=['exists','</span>.\x20Challenge\x20other\x20teams!','log','players','totalMatches','d3-switch','visibility','recentActivity','losses','d2-switch','classList','loserScore','playerUsername','totalKills','eloRating','preventDefault','username','setDate','textContent','active','elo-recommendation-text-d1','admin-only-message','\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','You\x27re\x20not\x20registered\x20on\x20the\x20DUOS\x20ladder','disabled','#ladder\x20thead\x20tr','d1-ladder-container','timestamp','previousElo','oldEloRating','toFixed','newElo','set','innerHTML','owner','date','duos-ladder-container','createElement','\x20ladder','remove','display','find','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20ladder\x20data:\x20','addEventListener','console','d1-switch','country','ladder-container','get','map','No\x20available\x20teammates\x20found.\x20More\x20players\x20needed\x20on\x20DUOS\x20ladder!','length','#F44336','elo-recommendation-text-d2','Based\x20on\x20your\x20ELO\x20(','__proto__','opacity','docs','You\x27re\x20not\x20registered\x20on\x20the\x20','bold','getDate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','userProfiles','onAuthStateChanged','elo-recommendation-text-duos','Error\x20loading\x20ladder\x20data:','click','#FFD700','style','forEach','error','duos','Unranked','playersDuos','role','none','<img\x20src=\x22../images/flags/','newEloRating','checked','playersD3','inactive','cursor','block','uid','loading-indicator','d2-ladder-container','Error\x20finding\x20best\x20opponent:','elo-recommendation-text-','\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x2050%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20#2a2a2a;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x201.5rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff6b6b;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x201000;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.5);\x0a\x20\x20\x20\x20','You\x27re\x20teamed\x20with\x20<span\x20class=\x22recommendation-highlight\x22>','<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20ladder\x20data...</td></tr>','sort','div','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','includes','teammate','email','data','position','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-name\x22>','Bronze','desc','title','gray','fontWeight','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username=','d3-ladder-container','ELO\x20history\x20collection\x20is\x20empty','eloHistory','Recommendation\x20element\x20for\x20','toLowerCase','add','innerText','totalDeaths','admin','label[for=\x22duos-switch\x22]','getElementById','bind','player','Gold','#ladder\x20tbody',';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>','abs','rank','#50C878','info','has','0.5','wins','winnerScore','&ladder=d1\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'];a27_0xa420=function(){return _0x285fb2;};return a27_0xa420();}const auth=getAuth();let activeListeners=[];export async function loadLadderData(_0x41ee41=0x1){const _0x5a14a6=a27_0x5969;try{document[_0x5a14a6(0x232)]('loading-indicator')['style'][_0x5a14a6(0x1e6)]=_0x5a14a6(0x210);const _0x40e3d8=await getLadderData(_0x41ee41);_0x40e3d8[_0x5a14a6(0x219)]((_0x524b0f,_0x2b0a7e)=>_0x2b0a7e['elo']-_0x524b0f['elo']);const _0x1e3a6b=_0x40e3d8['map'](_0x3eb2ce=>_0x3eb2ce['id']),_0x382e20=await getEloHistoryBatch(_0x1e3a6b,_0x41ee41),_0x1b4dc8=_0x40e3d8['map']((_0x3ac2b8,_0x1e5e26)=>{const _0x118a97=_0x5a14a6,_0x291082=_0x382e20[_0x3ac2b8['id']]||[],_0x62e2ae=_0x291082['sort']((_0x4d991f,_0x2a0cb9)=>new Date(_0x2a0cb9['date'])-new Date(_0x4d991f['date']))['slice'](0x0,0x5);return{..._0x3ac2b8,'rank':_0x1e5e26+0x1,'lastMatches':_0x62e2ae,'recentActivity':_0x62e2ae[_0x118a97(0x1f1)]>0x0};});renderLadder(_0x1b4dc8),setupRealTimeUpdates(_0x41ee41);}catch(_0x3fca3e){console['error'](_0x5a14a6(0x1ff),_0x3fca3e),document[_0x5a14a6(0x232)]('error-message')[_0x5a14a6(0x22e)]='Failed\x20to\x20load\x20ladder\x20data.\x20Please\x20try\x20again.';}finally{document['getElementById'](_0x5a14a6(0x212))['style']['display']=_0x5a14a6(0x209);}}function setupRealTimeUpdates(_0x3cab49=0x1){const _0x438227=a27_0x5969;activeListeners['forEach'](_0x4fa5cd=>_0x4fa5cd()),activeListeners=[];const _0x1a19c0=_0x3cab49===0x1?_0x438227(0x1c1):'playersD'+_0x3cab49,_0x24857c=_0x3cab49===0x1?'matches':'matchesD'+_0x3cab49,_0x5940cd=new Date();_0x5940cd[_0x438227(0x1cf)](_0x5940cd[_0x438227(0x1fa)]()-0x1);const _0x4d28d1=setupEfficientListener(_0x24857c,[where(_0x438227(0x1e1),'>=',_0x5940cd['toISOString']()),limit(0xa),orderBy('date','desc')],async _0x38d5b4=>{_0x38d5b4['length']>0x0&&await loadLadderData(_0x3cab49);});activeListeners['push'](_0x4d28d1);}export function cleanupListeners(){activeListeners['forEach'](_0x4237c9=>_0x4237c9()),activeListeners=[];}function renderLadder(_0x29682c){const _0x542cbc=a27_0x5969,_0x48cce9=document['getElementById'](_0x542cbc(0x1ed));_0x48cce9[_0x542cbc(0x1df)]='',_0x29682c[_0x542cbc(0x203)](_0x14b341=>{const _0xae1e9c=_0x542cbc,_0x220b5f=document[_0xae1e9c(0x1e3)](_0xae1e9c(0x21a));_0x220b5f['className']='ladder-player',_0x220b5f['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22rank\x22>#'+_0x14b341[_0xae1e9c(0x239)]+_0xae1e9c(0x221)+(_0x14b341['username']||_0x14b341['id'])+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-elo\x22>'+_0x14b341['elo']+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22player-activity\x20'+(_0x14b341[_0xae1e9c(0x1c5)]?'active':_0xae1e9c(0x20e))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x14b341['recentActivity']?'Active':'Inactive')+'\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x48cce9['appendChild'](_0x220b5f);});}const playerCache={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadder(_0x5d7083=![]){const _0x111997=a27_0x5969,_0x443e87=document['querySelector'](_0x111997(0x236));if(!_0x443e87){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}_0x443e87['innerHTML']=_0x111997(0x218);try{const _0x30367d=Date['now']();if(!_0x5d7083&&playerCache['data']&&_0x30367d-playerCache['timestamp']<CACHE_DURATION){console['log']('Using\x20cached\x20D1\x20ladder\x20data'),updateLadderDisplay(playerCache['data']);return;}const _0x1abfdc=collection(db,'players'),_0x33daec=await getDocs(_0x1abfdc),_0x48a1a3=[];_0x33daec['forEach'](_0x16eb59=>{const _0xa25dbc=_0x111997,_0x2b7235=_0x16eb59[_0xa25dbc(0x21f)]();_0x48a1a3['push']({..._0x2b7235,'id':_0x16eb59['id'],'elo':_0x2b7235[_0xa25dbc(0x1cc)]||0x0,'position':_0x2b7235['position']||Number['MAX_SAFE_INTEGER']});});const _0x421a59=collection(db,'userProfiles'),_0x4adeff=await getDocs(_0x421a59),_0x4fc404=new Map();_0x4adeff['forEach'](_0x1d1230=>{const _0x30012f=_0x111997,_0x4fb8b7=_0x1d1230['data']();_0x4fb8b7['username']&&_0x4fc404['set'](_0x4fb8b7['username'][_0x30012f(0x22c)](),_0x4fb8b7);}),_0x48a1a3['forEach'](_0x11f20c=>{const _0x684b27=_0x111997,_0x112f92=_0x11f20c[_0x684b27(0x1ce)]?.[_0x684b27(0x22c)]();if(_0x112f92&&_0x4fc404['has'](_0x112f92)){const _0x40c90b=_0x4fc404[_0x684b27(0x1ee)](_0x112f92);_0x40c90b[_0x684b27(0x1ec)]&&(_0x11f20c['country']=_0x40c90b['country'][_0x684b27(0x22c)]());}});const _0x1bb8c7=_0x48a1a3['map'](_0x2d009a=>_0x2d009a[_0x111997(0x1ce)]),_0x1a099f=await fetchBatchMatchStats(_0x1bb8c7);_0x48a1a3[_0x111997(0x219)]((_0x275d2d,_0x4ad53c)=>{const _0x5a7959=_0x111997,_0x2518c1=_0x1a099f[_0x5a7959(0x1ee)](_0x275d2d[_0x5a7959(0x1ce)])?.['totalMatches']||0x0,_0xce1f18=_0x1a099f[_0x5a7959(0x1ee)](_0x4ad53c[_0x5a7959(0x1ce)])?.['totalMatches']||0x0;if(_0x2518c1===0x0!==(_0xce1f18===0x0))return _0x2518c1===0x0?0x1:-0x1;return(_0x275d2d[_0x5a7959(0x220)]||0x3e7)-(_0x4ad53c['position']||0x3e7);}),_0x48a1a3['forEach']((_0x3af1c2,_0x52d044)=>{_0x3af1c2['position']=_0x52d044+0x1;}),playerCache['data']=_0x48a1a3,playerCache['timestamp']=_0x30367d,updateLadderDisplay(_0x48a1a3,_0x1a099f);}catch(_0x128834){console['error']('Error\x20loading\x20ladder:',_0x128834),_0x443e87[_0x111997(0x1df)]=_0x111997(0x1e8)+_0x128834['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}async function fetchBatchMatchStats(_0x1a0e35){const _0x13f807=a27_0x5969,_0x53c5be=new Map();try{_0x1a0e35['forEach'](_0x5105a6=>{const _0x3f59d9=a27_0x5969;_0x53c5be[_0x3f59d9(0x1de)](_0x5105a6,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x363240=collection(db,'approvedMatches'),_0x43c6e5=await getDocs(_0x363240);_0x43c6e5['forEach'](_0x91955b=>{const _0x481488=a27_0x5969,_0x19a17f=_0x91955b['data'](),_0x2983f5=_0x19a17f['winnerUsername'],_0x49b1ea=_0x19a17f['loserUsername'];if(_0x1a0e35['includes'](_0x2983f5)){const _0x5ab3d0=_0x53c5be[_0x481488(0x1ee)](_0x2983f5);_0x5ab3d0[_0x481488(0x23e)]++,_0x5ab3d0['totalMatches']++,_0x5ab3d0['totalKills']+=parseInt(_0x19a17f[_0x481488(0x23f)])||0x0,_0x5ab3d0[_0x481488(0x22f)]+=parseInt(_0x19a17f[_0x481488(0x1c9)])||0x0;}if(_0x1a0e35[_0x481488(0x21c)](_0x49b1ea)){const _0x9ea97a=_0x53c5be['get'](_0x49b1ea);_0x9ea97a['losses']++,_0x9ea97a[_0x481488(0x1c2)]++,_0x9ea97a['totalKills']+=parseInt(_0x19a17f['loserScore'])||0x0,_0x9ea97a[_0x481488(0x22f)]+=parseInt(_0x19a17f[_0x481488(0x23f)])||0x0;}}),_0x1a0e35['forEach'](_0x52f47c=>{const _0x36d5cb=a27_0x5969,_0x468e6d=_0x53c5be['get'](_0x52f47c);_0x468e6d['kda']=_0x468e6d['totalDeaths']>0x0?(_0x468e6d[_0x36d5cb(0x1cb)]/_0x468e6d['totalDeaths'])[_0x36d5cb(0x1dc)](0x2):_0x468e6d[_0x36d5cb(0x1cb)]['toFixed'](0x2),_0x468e6d['winRate']=_0x468e6d['totalMatches']>0x0?(_0x468e6d[_0x36d5cb(0x23e)]/_0x468e6d['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x4d9304){console[_0x13f807(0x204)]('Error\x20fetching\x20batch\x20match\x20stats:',_0x4d9304);}return _0x53c5be;}function createPlayerRow(_0x111b8f,_0x3c084b){const _0x2891a4=a27_0x5969,_0x2d4bc1=parseFloat(_0x111b8f['elo'])||0x0;let _0x45ed3f='gray';if(_0x2d4bc1>=0x7d0)_0x45ed3f='#50C878';else{if(_0x2d4bc1>=0x708)_0x45ed3f='#FFD700';else{if(_0x2d4bc1>=0x640)_0x45ed3f='#b9f1fc';else _0x2d4bc1>=0x578&&(_0x45ed3f='#CD7F32');}}let _0x3796d7='';return _0x111b8f['country']&&(_0x3796d7=_0x2891a4(0x20a)+_0x111b8f['country'][_0x2891a4(0x22c)]()+'.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x111b8f['country']+_0x2891a4(0x1d4)),'\x0a\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x111b8f['position']+_0x2891a4(0x227)+encodeURIComponent(_0x111b8f['username'])+_0x2891a4(0x240)+_0x45ed3f+';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x111b8f['username']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x3796d7+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x45ed3f+_0x2891a4(0x237)+_0x2d4bc1+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c084b['totalMatches']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c084b['wins']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c084b[_0x2891a4(0x1c6)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x3c084b['kda']+_0x2891a4(0x21b)+_0x3c084b['winRate']+'%</td>\x0a\x20\x20\x20\x20</tr>';}function getPlayerRankName(_0xa53966){const _0x20a091=a27_0x5969;if(_0xa53966>=0x7d0)return'Emerald';if(_0xa53966>=0x708)return _0x20a091(0x235);if(_0xa53966>=0x640)return'Silver';if(_0xa53966>=0x578)return _0x20a091(0x222);return _0x20a091(0x206);}async function getPlayersLastEloChanges(_0x59932c){const _0x4d6db2=a27_0x5969,_0x1c36d5=new Map();_0x59932c[_0x4d6db2(0x203)](_0x5636cb=>{_0x1c36d5['set'](_0x5636cb,0x0);});try{const _0xf96bd=collection(db,_0x4d6db2(0x1c1)),_0x58a398=await getDocs(_0xf96bd),_0x445f66=new Map(),_0x3f590d=new Map();_0x58a398[_0x4d6db2(0x203)](_0x48d78f=>{const _0x16dfbc=_0x4d6db2,_0x5b5bb7=_0x48d78f[_0x16dfbc(0x21f)]();_0x5b5bb7[_0x16dfbc(0x1ce)]&&(_0x445f66[_0x16dfbc(0x1de)](_0x48d78f['id'],_0x5b5bb7['username']),_0x3f590d['set'](_0x5b5bb7['username']['toLowerCase'](),_0x48d78f['id']));});const _0x67526d=collection(db,_0x4d6db2(0x22a)),_0x52acb5=query(_0x67526d,orderBy(_0x4d6db2(0x1d9),_0x4d6db2(0x223)),limit(0x12c)),_0x53b339=await getDocs(_0x52acb5);if(_0x53b339['empty'])return console[_0x4d6db2(0x1c0)](_0x4d6db2(0x229)),_0x1c36d5;if(_0x53b339[_0x4d6db2(0x1f7)][_0x4d6db2(0x1f1)]>0x0){const _0x2d0aca=_0x53b339[_0x4d6db2(0x1f7)][0x0]['data']();if(_0x2d0aca[_0x4d6db2(0x234)]&&_0x445f66['has'](_0x2d0aca[_0x4d6db2(0x234)])){}}const _0x2bdbb2=new Map();let _0x36cf93=0x0;_0x53b339['forEach'](_0xe9fe53=>{const _0x4859a0=_0x4d6db2,_0x5bcecf=_0xe9fe53['data']();let _0x4d6f9d=null;if(_0x5bcecf['player']&&_0x445f66['has'](_0x5bcecf['player']))_0x4d6f9d=_0x445f66['get'](_0x5bcecf[_0x4859a0(0x234)]);else{if(_0x5bcecf['username']&&_0x3f590d[_0x4859a0(0x23c)](_0x5bcecf['username']['toLowerCase']()))_0x4d6f9d=_0x5bcecf['username'];else _0x5bcecf[_0x4859a0(0x1ca)]&&_0x3f590d['has'](_0x5bcecf['playerUsername']['toLowerCase']())&&(_0x4d6f9d=_0x5bcecf['playerUsername']);}_0x4d6f9d&&_0x59932c[_0x4859a0(0x21c)](_0x4d6f9d)&&(_0x36cf93++,!_0x2bdbb2[_0x4859a0(0x23c)](_0x4d6f9d)&&_0x2bdbb2[_0x4859a0(0x1de)](_0x4d6f9d,[]),_0x2bdbb2['get'](_0x4d6f9d)['push']({..._0x5bcecf,'timestamp':_0x5bcecf['timestamp']?.['seconds']||0x0}));}),_0x2bdbb2['forEach']((_0x56a19e,_0x86260f)=>{const _0x610be9=_0x4d6db2;if(_0x56a19e['length']>0x0){_0x56a19e['sort']((_0x4dea88,_0x750e3e)=>_0x750e3e['timestamp']-_0x4dea88[_0x610be9(0x1d9)]);const _0x660133=_0x56a19e[_0x610be9(0x1e7)](_0x4586bc=>_0x4586bc['change']!==undefined||_0x4586bc['newElo']!==undefined&&_0x4586bc['previousElo']!==undefined||_0x4586bc[_0x610be9(0x20b)]!==undefined&&_0x4586bc[_0x610be9(0x1db)]!==undefined);if(_0x660133){let _0x4a088b;if(_0x660133['change']!==undefined)_0x4a088b=parseInt(_0x660133['change']);else{if(_0x660133[_0x610be9(0x1dd)]!==undefined&&entry[_0x610be9(0x1da)]!==undefined)_0x4a088b=parseInt(_0x660133[_0x610be9(0x1dd)])-parseInt(_0x660133['previousElo']);else _0x660133['newEloRating']!==undefined&&entry['oldEloRating']!==undefined&&(_0x4a088b=parseInt(_0x660133[_0x610be9(0x20b)])-parseInt(_0x660133['oldEloRating']));}!isNaN(_0x4a088b)&&_0x4a088b!==0x0&&_0x1c36d5['set'](_0x86260f,_0x4a088b);}}});}catch(_0x32d412){console['error']('Error\x20fetching\x20ELO\x20history:',_0x32d412);}return _0x1c36d5;}async function updateLadderDisplay(_0x16ce7a,_0x2a68ab=null){const _0x37ff22=a27_0x5969,_0x98f16c=document['querySelector'](_0x37ff22(0x236));if(!_0x98f16c){console['error']('Ladder\x20table\x20body\x20not\x20found');return;}const _0x4820bd=document['querySelector'](_0x37ff22(0x1d7));_0x4820bd&&(_0x4820bd['innerHTML']=_0x37ff22(0x1fb));const _0x195896=_0x16ce7a['map'](_0x16880e=>_0x16880e[_0x37ff22(0x1ce)]);!_0x2a68ab&&(_0x2a68ab=await fetchBatchMatchStats(_0x195896));const _0x3f0d93=_0x16ce7a[_0x37ff22(0x1ef)](_0x2fc554=>{const _0x9ee457=_0x2a68ab['get'](_0x2fc554['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0};return createPlayerRow(_0x2fc554,_0x9ee457);})['join']('');_0x98f16c['innerHTML']=_0x3f0d93,getPlayersLastEloChanges(_0x195896)['then'](_0x27c2bb=>{const _0x180c7c=new Map();_0x98f16c['querySelectorAll']('tr')['forEach']((_0x59b313,_0x4e6bd3)=>{_0x4e6bd3<_0x195896['length']&&_0x180c7c['set'](_0x195896[_0x4e6bd3],_0x59b313);}),_0x27c2bb['forEach']((_0x39f3f9,_0x236c49)=>{const _0x570eb6=a27_0x5969,_0x4386dd=_0x180c7c['get'](_0x236c49);if(_0x4386dd&&_0x39f3f9!==0x0){const _0x42d350=_0x4386dd['querySelector']('td:nth-child(3)');if(_0x42d350){const _0x14bdb0=_0x39f3f9>0x0?'+'+_0x39f3f9:''+_0x39f3f9,_0x54e3ee=_0x42d350['querySelector']('.trend-indicator');if(_0x54e3ee)_0x54e3ee['textContent']=_0x14bdb0,_0x54e3ee['style']['color']=_0x39f3f9>0x0?'#4CAF50':_0x570eb6(0x1f2),_0x54e3ee['style'][_0x570eb6(0x226)]=_0x570eb6(0x1f9),_0x54e3ee[_0x570eb6(0x202)]['fontSize']='0.85em',_0x54e3ee['style']['display']='inline',_0x54e3ee['style'][_0x570eb6(0x1c4)]='visible',_0x54e3ee['style']['opacity']='1';else{}}}});})['catch'](_0x100541=>console['error']('Error\x20updating\x20ELO\x20trend\x20indicators:',_0x100541));}function initLadderToggles(){const _0x373941=a27_0x5969,_0x2d79ba=document[_0x373941(0x232)]('d1-switch'),_0x453619=document['getElementById'](_0x373941(0x1c7)),_0xf29633=document['getElementById'](_0x373941(0x1c3)),_0x2de418=document[_0x373941(0x232)]('duos-switch'),_0x57f18d=document['getElementById']('d1-ladder-container'),_0x222341=document['getElementById'](_0x373941(0x213)),_0x49e656=document[_0x373941(0x232)]('d3-ladder-container'),_0x4ae75a=document[_0x373941(0x232)]('duos-ladder-container');function _0x5cd417(){const _0x52694c=_0x373941;if(_0x57f18d)_0x57f18d['classList']['remove']('active');if(_0x222341)_0x222341['classList']['remove']('active');if(_0x49e656)_0x49e656['classList'][_0x52694c(0x1e5)]('active');if(_0x4ae75a)_0x4ae75a['style']['display']='none';if(_0x57f18d)_0x57f18d['style']['display']='none';if(_0x222341)_0x222341[_0x52694c(0x202)]['display']=_0x52694c(0x209);if(_0x49e656)_0x49e656['style']['display']='none';}_0x2d79ba&&_0x2d79ba['addEventListener']('click',()=>{const _0x36941c=_0x373941;console['log']('D1\x20toggle\x20clicked'),_0x5cd417();_0x57f18d&&(_0x57f18d['classList']['add']('active'),_0x57f18d['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='block',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x36941c(0x209),document['getElementById']('elo-recommendation-text-d3')['style']['display']='none';if(_0x2d79ba)_0x2d79ba[_0x36941c(0x1c8)][_0x36941c(0x22d)]('active');if(_0x453619)_0x453619['classList']['remove'](_0x36941c(0x1d1));if(_0xf29633)_0xf29633[_0x36941c(0x1c8)]['remove']('active');displayLadder(),findBestOpponent('d1');}),_0x453619&&_0x453619['addEventListener'](_0x373941(0x200),()=>{const _0x1b98fb=_0x373941;console['log']('D2\x20toggle\x20clicked'),_0x5cd417();_0x222341&&(_0x222341['classList']['add']('active'),_0x222341['style']['display']='block');document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById'](_0x1b98fb(0x1f3))['style']['display']=_0x1b98fb(0x210),document['getElementById']('elo-recommendation-text-d3')[_0x1b98fb(0x202)][_0x1b98fb(0x1e6)]=_0x1b98fb(0x209);if(_0x453619)_0x453619['classList']['add']('active');if(_0x2d79ba)_0x2d79ba['classList'][_0x1b98fb(0x1e5)]('active');if(_0xf29633)_0xf29633['classList']['remove'](_0x1b98fb(0x1d1));displayLadderD2(),findBestOpponent('d2');}),_0xf29633&&_0xf29633['addEventListener']('click',()=>{const _0x12b71d=_0x373941;console['log']('D3\x20toggle\x20clicked'),_0x5cd417();_0x49e656&&(_0x49e656['classList']['add']('active'),_0x49e656['style']['display']=_0x12b71d(0x210));document[_0x12b71d(0x232)]('elo-recommendation-text-d1')['style']['display']='none',document[_0x12b71d(0x232)]('elo-recommendation-text-d2')[_0x12b71d(0x202)]['display']='none',document['getElementById']('elo-recommendation-text-d3')['style']['display']='block';if(_0xf29633)_0xf29633['classList'][_0x12b71d(0x22d)]('active');if(_0x2d79ba)_0x2d79ba['classList']['remove']('active');if(_0x453619)_0x453619['classList'][_0x12b71d(0x1e5)]('active');displayLadderD3(),findBestOpponent('d3');}),_0x2de418&&_0x2de418[_0x373941(0x1e9)]('click',()=>{const _0x900255=_0x373941;_0x5cd417();if(_0x4ae75a)_0x4ae75a[_0x900255(0x202)]['display']=_0x900255(0x210);displayLadderDuos(),findBestOpponent(_0x900255(0x205)),document['getElementById'](_0x900255(0x1fe))&&(document['getElementById']('elo-recommendation-text-duos')[_0x900255(0x202)]['display']='block'),document['getElementById']('elo-recommendation-text-d1')['style']['display']='none',document['getElementById']('elo-recommendation-text-d2')['style']['display']=_0x900255(0x209),document['getElementById']('elo-recommendation-text-d3')['style'][_0x900255(0x1e6)]='none';});}document['addEventListener']('DOMContentLoaded',()=>{const _0x48369a=a27_0x5969;initLadderToggles(),displayLadder(),findBestOpponent('d1'),document['getElementById'](_0x48369a(0x1d2))[_0x48369a(0x202)]['display']='block';});export{displayLadder};async function findBestOpponent(_0x4e0aa7='d1'){const _0x94633c=a27_0x5969,_0x13bfcd=_0x94633c(0x215)+_0x4e0aa7,_0x313b63=document['getElementById'](_0x13bfcd);if(!_0x313b63){console[_0x94633c(0x204)](_0x94633c(0x22b)+_0x4e0aa7+'\x20not\x20found');return;}const _0xafefb4=auth['currentUser'];if(!_0xafefb4){_0x313b63[_0x94633c(0x1d0)]='';return;}try{const _0x360056=doc(db,'userProfiles',_0xafefb4[_0x94633c(0x211)]),_0x5dcf4a=await getDoc(_0x360056);if(!_0x5dcf4a[_0x94633c(0x1be)]()){console['log']('No\x20user\x20profile\x20found'),_0x313b63['textContent']='Complete\x20your\x20profile\x20to\x20see\x20recommended\x20opponents';return;}const _0x27ea4a=_0x5dcf4a['data'](),_0x22b791=_0x27ea4a['username'];if(!_0x22b791){_0x313b63['textContent']='Set\x20your\x20username\x20to\x20see\x20recommended\x20opponents';return;}let _0x326afa;switch(_0x4e0aa7){case'd1':_0x326afa='players';break;case'd2':_0x326afa='playersD2';break;case'd3':_0x326afa='playersD3';break;case'duos':_0x326afa=_0x94633c(0x207);break;default:_0x326afa='players';}if(_0x4e0aa7==='duos'){const _0x22d334=collection(db,_0x326afa),_0x45c6fb=query(_0x22d334,where('username','==',_0x22b791)),_0x4eda07=await getDocs(_0x45c6fb);if(_0x4eda07['empty']){_0x313b63['textContent']=_0x94633c(0x1d5);return;}const _0x5d555f=_0x4eda07['docs'][0x0]['data'](),_0x391e99=parseInt(_0x5d555f['eloRating'])||0x4b0;if(_0x5d555f['hasTeam']&&_0x5d555f['teammate']){_0x313b63[_0x94633c(0x1df)]=_0x94633c(0x217)+_0x5d555f[_0x94633c(0x21d)]+_0x94633c(0x1bf);return;}const _0x5dd568=await getDocs(_0x22d334);let _0xc23f38=null,_0x4339e7=-0x1;_0x5dd568['forEach'](_0x39a22a=>{const _0x391121=_0x94633c,_0x23e8f9=_0x39a22a['data']();if(_0x23e8f9['username']===_0x22b791)return;if(_0x23e8f9['hasTeam'])return;const _0x134199=parseInt(_0x23e8f9['eloRating'])||0x4b0,_0x36b8c5=Math[_0x391121(0x238)](_0x134199-_0x391e99),_0x2f9bd9=Math['max'](0x0,0xc8-_0x36b8c5);_0x2f9bd9>_0x4339e7&&(_0xc23f38=_0x23e8f9,_0x4339e7=_0x2f9bd9);});if(_0xc23f38){const _0x5c39c9=parseInt(_0xc23f38[_0x94633c(0x1cc)])||0x4b0;let _0x4b6a1c=_0x94633c(0x225);if(_0x5c39c9>=0x7d0)_0x4b6a1c=_0x94633c(0x23a);else{if(_0x5c39c9>=0x708)_0x4b6a1c='#FFD700';else{if(_0x5c39c9>=0x640)_0x4b6a1c='#C0C0C0';else _0x5c39c9>=0x578&&(_0x4b6a1c='#CD7F32');}}_0x313b63['innerHTML']='Looking\x20for\x20a\x20teammate?\x20Consider\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x4b6a1c+';\x22>'+_0xc23f38['username']+'</span>\x20(ELO:\x20'+_0x5c39c9+')';}else _0x313b63[_0x94633c(0x1d0)]=_0x94633c(0x1f0);return;}const _0x4d68ce=collection(db,_0x326afa),_0xe72294=query(_0x4d68ce,where(_0x94633c(0x1ce),'==',_0x22b791)),_0x2f7c4a=await getDocs(_0xe72294);if(_0x2f7c4a['empty']){_0x313b63['textContent']=_0x94633c(0x1f8)+_0x4e0aa7['toUpperCase']()+_0x94633c(0x1e4);return;}const _0x4791b9=_0x2f7c4a['docs'][0x0]['data'](),_0x5c669e=parseInt(_0x4791b9['eloRating'])||0x5dc,_0x350824=await getDocs(_0x4d68ce);let _0x3309b6=null,_0xae58fe=-0x1;const _0x6c4881=getPlayerRankName(_0x5c669e);_0x350824['forEach'](_0x51d01f=>{const _0x6c566a=_0x94633c,_0x2f6b91=_0x51d01f[_0x6c566a(0x21f)]();if(_0x2f6b91[_0x6c566a(0x1ce)]===_0x22b791)return;const _0x1d3dbc=parseInt(_0x2f6b91[_0x6c566a(0x1cc)])||0x5dc,_0x1a791d=getPlayerRankName(_0x1d3dbc),_0x30d090=Math['abs'](_0x1d3dbc-_0x5c669e),_0x3f5ef3=0x20,_0x17d048=0x1/(0x1+Math['pow'](0xa,(_0x1d3dbc-_0x5c669e)/0x190)),_0x493e95=Math['round'](_0x3f5ef3*(0x1-_0x17d048));if(_0x493e95<=0x0)return;let _0x5b53f6=0x0;const _0x571dcb=Math['max'](0x0,0x64-_0x30d090*0.5),_0x1ae465=_0x493e95>=0x3&&_0x493e95<=0x8?0x32:_0x493e95>0x0&&_0x493e95<0xf?0x1e:0xa,_0x4e8370=_0x6c4881===_0x1a791d?0x28:0x0;_0x5b53f6=_0x571dcb+_0x1ae465+_0x4e8370,_0x5b53f6>_0xae58fe&&(_0x3309b6=_0x2f6b91,_0xae58fe=_0x5b53f6);});if(_0x3309b6){const _0x3e0a54=parseInt(_0x3309b6[_0x94633c(0x1cc)])||0x5dc;let _0x4ef860='gray';if(_0x3e0a54>=0x7d0)_0x4ef860=_0x94633c(0x23a);else{if(_0x3e0a54>=0x708)_0x4ef860=_0x94633c(0x201);else{if(_0x3e0a54>=0x640)_0x4ef860='#b9f1fc';else _0x3e0a54>=0x578&&(_0x4ef860='#CD7F32');}}_0x313b63[_0x94633c(0x1df)]=_0x94633c(0x1f4)+_0x5c669e+'),\x20you\x20should\x20be\x20playing\x20<span\x20class=\x22recommendation-highlight\x22\x20style=\x22color:\x20'+_0x4ef860+';\x22>'+_0x3309b6['username']+'</span>';}else _0x313b63[_0x94633c(0x1df)]='No\x20ideal\x20opponent\x20found\x20for\x20your\x20current\x20ELO\x20('+_0x5c669e+')';}catch(_0x8d6464){console['error'](_0x94633c(0x214),_0x8d6464),_0x313b63['textContent']='Error\x20finding\x20recommended\x20opponent';}}auth['onAuthStateChanged'](_0x2d4f0c=>{const _0x264638=a27_0x5969,_0x5af08c=document['getElementById']('d1-ladder-container')&&document['getElementById'](_0x264638(0x1d8))['style']['display']!==_0x264638(0x209),_0x2b6cc3=document['getElementById'](_0x264638(0x213))&&document['getElementById'](_0x264638(0x213))[_0x264638(0x202)]['display']!=='none',_0x2c8646=document['getElementById']('d3-ladder-container')&&document['getElementById'](_0x264638(0x228))['style']['display']!==_0x264638(0x209),_0x98e2d=document['getElementById'](_0x264638(0x1e2))&&document['getElementById']('duos-ladder-container')[_0x264638(0x202)][_0x264638(0x1e6)]!=='none',_0x38bd88=_0x5af08c?'d1':_0x2b6cc3?'d2':_0x2c8646?'d3':_0x98e2d?'duos':'d1';findBestOpponent(_0x38bd88);}),document['addEventListener']('DOMContentLoaded',()=>{const _0x653c27=a27_0x5969,_0x3d2d01=document['getElementById']('duos-switch'),_0x405f49=document['querySelector'](_0x653c27(0x231));_0x3d2d01&&_0x405f49&&(_0x3d2d01['addEventListener']('change',async _0x21bb4d=>{const _0x30539a=_0x653c27;if(_0x21bb4d['target'][_0x30539a(0x20c)]){const _0x1582bf=auth?.['currentUser'],_0x2316c3=await checkIfUserIsAdmin(_0x1582bf);if(!_0x2316c3){_0x21bb4d[_0x30539a(0x1cd)]();const _0x18f462=document['getElementById'](_0x30539a(0x1eb));return _0x18f462&&(_0x18f462['checked']=!![],_0x18f462['dispatchEvent'](new Event('change'))),showAdminOnlyMessage(),![];}}}),auth[_0x653c27(0x1fd)](async _0x3d0756=>{const _0x2b90ab=_0x653c27,_0x484c4d=await checkIfUserIsAdmin(_0x3d0756);!_0x484c4d?(_0x3d2d01[_0x2b90ab(0x1d6)]=!![],_0x405f49[_0x2b90ab(0x202)]['opacity']=_0x2b90ab(0x23d),_0x405f49[_0x2b90ab(0x202)][_0x2b90ab(0x20f)]='not-allowed',_0x405f49[_0x2b90ab(0x224)]='Duos\x20ladder\x20is\x20currently\x20admin-only'):(_0x3d2d01['disabled']=![],_0x405f49['style'][_0x2b90ab(0x1f6)]='1',_0x405f49['style']['cursor']='pointer',_0x405f49['title']='');}));});function a27_0x5969(_0x42706c,_0x40b42a){const _0x5a5ebb=a27_0xa420();return a27_0x5969=function(_0x5135c7,_0x52a290){_0x5135c7=_0x5135c7-0x1be;let _0xa42008=_0x5a5ebb[_0x5135c7];return _0xa42008;},a27_0x5969(_0x42706c,_0x40b42a);}async function checkIfUserIsAdmin(_0x48e8a8){const _0x41623f=a27_0x5969;if(!_0x48e8a8)return![];try{const _0x45c3d8=['admin@ladder.com','brian2af@outlook.com'];if(_0x48e8a8['email']&&_0x45c3d8[_0x41623f(0x21c)](_0x48e8a8[_0x41623f(0x21e)]['toLowerCase']()))return!![];const _0x1444ad=[_0x41623f(0x1fc),'players','playersD2',_0x41623f(0x20d)],_0x34fb5f=[_0x41623f(0x230),_0x41623f(0x1e0),'council','creative\x20lead'];for(const _0x289cc9 of _0x1444ad){try{const _0x4c2c6b=doc(db,_0x289cc9,_0x48e8a8[_0x41623f(0x211)]),_0x1d31c9=await getDoc(_0x4c2c6b);if(_0x1d31c9['exists']()){const _0x15ddfc=_0x1d31c9[_0x41623f(0x21f)](),_0x39966a=(_0x15ddfc['roleName']||_0x15ddfc[_0x41623f(0x208)]||'')[_0x41623f(0x22c)]();if(_0x39966a&&_0x34fb5f[_0x41623f(0x21c)](_0x39966a))return!![];}}catch(_0x2b0f95){console['warn']('Error\x20checking\x20'+_0x289cc9+':',_0x2b0f95);}}return![];}catch(_0x4f9472){return console['error']('Error\x20checking\x20admin\x20status:',_0x4f9472),![];}}function showAdminOnlyMessage(){const _0xd06096=a27_0x5969,_0x3eba60=document[_0xd06096(0x232)](_0xd06096(0x1d3));_0x3eba60&&_0x3eba60[_0xd06096(0x1e5)]();const _0x5c95a6=document['createElement']('div');_0x5c95a6['id']='admin-only-message',_0x5c95a6[_0xd06096(0x202)]['cssText']=_0xd06096(0x216),_0x5c95a6['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>ðŸ”’\x20Duos\x20Ladder\x20-\x20Admin\x20Only</strong><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20#ccc;\x22>Currently\x20in\x20testing\x20phase</span>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x5c95a6),setTimeout(()=>{_0x5c95a6['parentNode']&&_0x5c95a6['remove']();},0xbb8);}