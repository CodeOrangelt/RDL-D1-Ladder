const a23_0xf137ac=(function(){let _0x4094ff=!![];return function(_0x3f5242,_0x437328){const _0x43eb5a=_0x4094ff?function(){if(_0x437328){const _0x4e149b=_0x437328['apply'](_0x3f5242,arguments);return _0x437328=null,_0x4e149b;}}:function(){};return _0x4094ff=![],_0x43eb5a;};}()),a23_0x372036=a23_0xf137ac(this,function(){const _0x1ca66e=a23_0x1588;let _0x1a9695;try{const _0x21dd98=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1a9695=_0x21dd98();}catch(_0x42f1ad){_0x1a9695=window;}const _0x7c2a88=_0x1a9695['console']=_0x1a9695['console']||{},_0x882fde=['log',_0x1ca66e(0x18c),_0x1ca66e(0x18e),'error',_0x1ca66e(0x1a8),_0x1ca66e(0x1a6),'trace'];for(let _0x5da58f=0x0;_0x5da58f<_0x882fde['length'];_0x5da58f++){const _0x4afedd=a23_0xf137ac['constructor']['prototype'][_0x1ca66e(0x181)](a23_0xf137ac),_0x594efa=_0x882fde[_0x5da58f],_0x8ab7=_0x7c2a88[_0x594efa]||_0x4afedd;_0x4afedd['__proto__']=a23_0xf137ac['bind'](a23_0xf137ac),_0x4afedd[_0x1ca66e(0x1a7)]=_0x8ab7['toString'][_0x1ca66e(0x181)](_0x8ab7),_0x7c2a88[_0x594efa]=_0x4afedd;}});a23_0x372036();import{doc,getDoc,getDocs,setDoc,query,collection,orderBy,limit,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentLadder='D1';document['addEventListener']('DOMContentLoaded',()=>{const _0x25bc09=a23_0x1588,_0x3b87e6=document['getElementById']('d1-switch'),_0x49c327=document['getElementById']('d2-switch');console['log']('Ladder\x20join:\x20D1\x20radio\x20found:',!!_0x3b87e6),console['log']('Ladder\x20join:\x20D2\x20radio\x20found:',!!_0x49c327);function _0x4cd688(){document['querySelectorAll']('input[name=\x22ladder\x22]')['forEach'](_0x7045c9=>{const _0x116d96=a23_0x1588;_0x7045c9['addEventListener'](_0x116d96(0x192),_0x50c757=>{const _0x526cc6=_0x116d96;_0x50c757[_0x526cc6(0x194)]['checked']&&(currentLadder=_0x50c757[_0x526cc6(0x194)][_0x526cc6(0x19f)],console['log']('Ladder\x20changed\x20to:\x20'+currentLadder),checkUserLadderStatus());});});}_0x4cd688();const _0x55e067=document['getElementById']('join-ladder-button');_0x55e067&&_0x55e067[_0x25bc09(0x186)]('click',handleJoinLadder),onAuthStateChanged(auth,_0xf7080a=>{const _0x256bcb=_0x25bc09;if(_0xf7080a)checkUserLadderStatus();else{const _0x32f178=document[_0x256bcb(0x198)](_0x256bcb(0x191));_0x32f178&&(_0x32f178['style']['display']=_0x256bcb(0x18d));}});});function getCollectionName(_0x532910){const _0x446114=a23_0x1588;switch(_0x532910?.['toUpperCase']()){case'D1':return'players';case'D2':return'playersD2';case'D3':return _0x446114(0x1a3);case _0x446114(0x19d):case'DUO':return'playersDuos';case'CTF':return'playersCTF';default:console['warn']('Unknown\x20ladder\x20type:\x20'+_0x532910+',\x20defaulting\x20to\x20D1');return _0x446114(0x195);}}function a23_0x1588(_0x23cf62,_0x121fc1){const _0x372036=a23_0xeb58();return a23_0x1588=function(_0xf137ac,_0x2e74af){_0xf137ac=_0xf137ac-0x180;let _0xeb5873=_0x372036[_0xf137ac];return _0xeb5873;},a23_0x1588(_0x23cf62,_0x121fc1);}function a23_0xeb58(){const _0x306159=['display','bind','join-username-input','\x20ladder.','trim','style','addEventListener','You\x20are\x20already\x20part\x20of\x20the\x20','position','getIdToken','currentUser','Authentication\x20failed.\x20Please\x20sign\x20in\x20again.','warn','none','info','textContent','disabled','ladder-join-prompt','change','Authentication\x20verification\x20failed:','target','players','toLowerCase','className','getElementById','block','\x20ladder!\x20The\x20page\x20will\x20refresh...','Successfully\x20joined\x20the\x20','error','DUOS','ladder-join-status','value','Authentication\x20error:','Error\x20checking\x20ladder\x20status:','nonParticipants','playersD3','data','exists','table','toString','exception','uid','Checking\x20user\x20status\x20for\x20ladder:'];a23_0xeb58=function(){return _0x306159;};return a23_0xeb58();}async function checkUserLadderStatus(){const _0x44f3fc=a23_0x1588;console['log'](_0x44f3fc(0x1aa),currentLadder);const _0x5e0647=auth['currentUser'],_0x5c0e4f=document[_0x44f3fc(0x198)](_0x44f3fc(0x191)),_0x490a84=document['getElementById']('join-ladder-type'),_0x3e9875=document[_0x44f3fc(0x198)]('tiny-join-button');if(!_0x5e0647||!_0x5e0647['uid']||!_0x5c0e4f||!_0x490a84||!_0x3e9875){if(_0x5c0e4f)_0x5c0e4f['style']['display']='none';if(_0x3e9875)_0x3e9875['style'][_0x44f3fc(0x180)]='none';return;}try{try{await _0x5e0647[_0x44f3fc(0x189)](![]);}catch(_0x239223){console[_0x44f3fc(0x19c)](_0x44f3fc(0x193),_0x239223),_0x5c0e4f['style']['display']=_0x44f3fc(0x18d),_0x3e9875[_0x44f3fc(0x185)]['display']=_0x44f3fc(0x18d);return;}const _0xf457d3=getCollectionName(currentLadder),_0x2f12fe=doc(db,_0xf457d3,_0x5e0647['uid']),_0xc9b44b=await getDoc(_0x2f12fe);if(_0xc9b44b['exists']())_0x5c0e4f['style']['display']='none',_0x3e9875['style']['display']=_0x44f3fc(0x18d);else{_0x5c0e4f['style'][_0x44f3fc(0x180)]=_0x44f3fc(0x18d),_0x3e9875['style']['display']='block',_0x490a84['textContent']=currentLadder,_0x3e9875['onclick']=()=>{const _0x1a6b53=_0x44f3fc;_0x5c0e4f['style'][_0x1a6b53(0x180)]==='block'?_0x5c0e4f['style'][_0x1a6b53(0x180)]='none':_0x5c0e4f[_0x1a6b53(0x185)]['display']=_0x1a6b53(0x199);};const _0x1ff2e5=document['getElementById'](_0x44f3fc(0x182)),_0x727d0a=document[_0x44f3fc(0x198)](_0x44f3fc(0x19e));if(_0x1ff2e5)_0x1ff2e5['value']='';_0x727d0a&&(_0x727d0a['textContent']='',_0x727d0a['className']=_0x44f3fc(0x19e));}}catch(_0x2c9143){console['error'](_0x44f3fc(0x1a1),_0x2c9143),_0x5c0e4f['style']['display']='none',_0x3e9875['style']['display']=_0x44f3fc(0x18d);}}async function handleJoinLadder(){const _0x263a2c=a23_0x1588,_0x1571cd=auth[_0x263a2c(0x18a)],_0x1b173b=document['getElementById']('join-ladder-button'),_0x24d991=document[_0x263a2c(0x198)](_0x263a2c(0x19e)),_0x3468ca=document['getElementById'](_0x263a2c(0x182));if(!_0x1571cd||!_0x1571cd['uid']){_0x24d991['textContent']='You\x20must\x20be\x20signed\x20in\x20to\x20join\x20a\x20ladder.',_0x24d991['className']='ladder-join-status\x20error';return;}try{await _0x1571cd['getIdToken'](!![]);}catch(_0x311d94){console[_0x263a2c(0x19c)](_0x263a2c(0x1a0),_0x311d94),_0x24d991['textContent']=_0x263a2c(0x18b),_0x24d991[_0x263a2c(0x197)]='ladder-join-status\x20error';return;}if(!_0x3468ca||!_0x3468ca[_0x263a2c(0x19f)][_0x263a2c(0x184)]()){_0x24d991['textContent']='Please\x20enter\x20your\x20username\x20to\x20confirm.',_0x24d991['className']='ladder-join-status\x20error';return;}try{_0x1b173b['disabled']=!![],_0x24d991[_0x263a2c(0x18f)]='Verifying\x20username...',_0x24d991['className']='ladder-join-status\x20loading';let _0x6b0b68='',_0x5f59ae=null;const _0x2383f0=['players','playersD2','playersD3','playersDuos','playersCTF',_0x263a2c(0x1a2)];for(const _0x300e1b of _0x2383f0){try{const _0x71d3d2=doc(db,_0x300e1b,_0x1571cd[_0x263a2c(0x1a9)]),_0x4e3d0f=await getDoc(_0x71d3d2);if(_0x4e3d0f[_0x263a2c(0x1a5)]()){_0x5f59ae=_0x4e3d0f[_0x263a2c(0x1a4)]();if(_0x5f59ae['username']){_0x6b0b68=_0x5f59ae['username'];break;}}}catch(_0x353e8c){console['error']('Error\x20checking\x20'+_0x300e1b+':',_0x353e8c);}}!_0x6b0b68&&_0x1571cd['email']&&(_0x6b0b68=_0x1571cd['email']['split']('@')[0x0]);if(!_0x6b0b68){_0x24d991[_0x263a2c(0x18f)]='Could\x20not\x20verify\x20your\x20account.\x20Please\x20contact\x20an\x20administrator.',_0x24d991['className']='ladder-join-status\x20error',_0x1b173b['disabled']=![];return;}const _0x284b75=_0x3468ca['value']['trim']();if(_0x6b0b68&&_0x284b75[_0x263a2c(0x196)]()!==_0x6b0b68['toLowerCase']()){_0x24d991['textContent']='Username\x20doesn\x27t\x20match.\x20Please\x20enter\x20\x22'+_0x6b0b68+'\x22\x20to\x20confirm.',_0x24d991['className']='ladder-join-status\x20error',_0x1b173b['disabled']=![];return;}_0x24d991['textContent']='Joining\x20'+currentLadder+'\x20ladder...';const _0x29d976=getCollectionName(currentLadder),_0x419c85=doc(db,_0x29d976,_0x1571cd['uid']),_0x5640bf=await getDoc(_0x419c85);if(_0x5640bf['exists']()){_0x24d991[_0x263a2c(0x18f)]=_0x263a2c(0x187)+currentLadder+_0x263a2c(0x183),_0x24d991['className']='ladder-join-status\x20error',_0x1b173b['disabled']=![];return;}try{await _0x1571cd['getIdToken'](!![]);}catch(_0x5144ad){_0x24d991['textContent']=_0x263a2c(0x18b),_0x24d991['className']='ladder-join-status\x20error',_0x1b173b[_0x263a2c(0x190)]=![];return;}const _0x20b332=_0x6b0b68,_0x14bb4d=collection(db,_0x29d976),_0x36eb43=query(_0x14bb4d,orderBy(_0x263a2c(0x188),'desc'),limit(0x1)),_0x1c9003=await getDocs(_0x36eb43);let _0x5dfdf1=0x1;if(!_0x1c9003['empty']){const _0x305375=_0x1c9003['docs'][0x0]['data']();_0x5dfdf1=(_0x305375['position']||0x0)+0x1;}const _0x2e64e8={'username':_0x20b332,'email':_0x1571cd['email'],'eloRating':0x4b0,'position':_0x5dfdf1,'createdAt':serverTimestamp(),'isAdmin':![],'matches':0x0,'wins':0x0,'losses':0x0,'gameMode':currentLadder,...currentLadder===_0x263a2c(0x19d)&&{'hasTeam':![],'teamId':null,'teamName':null,'teammate':null,'teamColor':null,'lookingForTeam':!![],'tierValue':0x3e8}};await setDoc(_0x419c85,_0x2e64e8),currentLadder==='DUOS'?_0x24d991['textContent']='Successfully\x20joined\x20the\x20Duos\x20ladder!\x20You\x20can\x20now\x20form\x20teams\x20with\x20other\x20players.\x20The\x20page\x20will\x20refresh...':_0x24d991[_0x263a2c(0x18f)]=_0x263a2c(0x19b)+currentLadder+_0x263a2c(0x19a),_0x24d991['className']='ladder-join-status\x20success',setTimeout(()=>{window['location']['reload']();},0x7d0);}catch(_0x52fe97){console['error']('Error\x20joining\x20ladder:',_0x52fe97),_0x24d991['textContent']='Error\x20joining\x20ladder:\x20'+_0x52fe97['message'],_0x24d991['className']='ladder-join-status\x20error',_0x1b173b['disabled']=![];}}