const a48J=a48b;(function(a,b){const I=a48b,c=a();while(!![]){try{const d=parseInt(I(0x166))/0x1+-parseInt(I(0x191))/0x2*(parseInt(I(0x152))/0x3)+parseInt(I(0x1c7))/0x4*(-parseInt(I(0x171))/0x5)+-parseInt(I(0x153))/0x6*(-parseInt(I(0x165))/0x7)+-parseInt(I(0x13e))/0x8+-parseInt(I(0x17a))/0x9+parseInt(I(0x1a6))/0xa;if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(a48a,0x4a9ac));import{approveReport}from'./ladderalgorithm.js';import{approveReportD2}from'./ladderalgorithm-d2.js';import{approveReportD3}from'./ladderalgorithm-d3.js';import{checkPendingMatches,updatePendingMatchNotification,updateNotificationDot}from'./checkPendingMatches.js';import{collection,getDocs,query,where,orderBy,serverTimestamp,doc,setDoc,getDoc,addDoc,updateDoc,deleteDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js';import{auth,db}from'./firebase-config.js';let currentUserEmail=null,confirmationNotification=null,outstandingReportData=null,currentGameMode='D1',outstandingMatches=[];document[a48J(0x181)]('DOMContentLoaded',async()=>{const K=a48J,a={'authWarning':document['getElementById']('auth-warning'),'reportForm':document['getElementById']('report-form'),'winnerUsername':document[K(0x17c)]('winner-username'),'loserUsername':document[K(0x17c)](K(0x195)),'loserScore':document[K(0x17c)](K(0x145)),'suicides':document[K(0x17c)]('suicides'),'mapPlayed':document[K(0x17c)]('map-played'),'loserComment':document['getElementById']('loser-comment'),'reportError':document[K(0x17c)]('report-error'),'reportLightbox':document['getElementById']('report-lightbox')};Object['entries'](a)['forEach'](([f,g])=>{const L=K;!g&&console[L(0x1d1)]('Element\x20\x27'+f+L(0x1b7));});const b=document['getElementById']('d1-mode'),c=document['getElementById']('d2-mode'),d=document['getElementById']('d3-mode');b['addEventListener']('click',()=>{const M=K;e('D1'),b['classList'][M(0x19a)](M(0x133)),c[M(0x200)][M(0x18a)]('active'),d[M(0x200)]['remove'](M(0x133));}),c['addEventListener'](K(0x1f1),()=>{const N=K;e('D2'),c['classList'][N(0x19a)](N(0x133)),b[N(0x200)][N(0x18a)](N(0x133)),d['classList'][N(0x18a)]('active');}),d['addEventListener']('click',()=>{const O=K;e('D3'),d[O(0x200)]['add']('active'),b[O(0x200)]['remove'](O(0x133)),c[O(0x200)][O(0x18a)]('active');});function e(f){const P=K;currentGameMode=f,console['log'](P(0x1b1)+currentGameMode),auth[P(0x1df)]&&checkUserInLadderAndLoadOpponents(auth[P(0x1df)]['uid']);}setupAuthStateListener(a),setupReportForm(a),auth['currentUser']?(console['log']('User\x20already\x20logged\x20in,\x20checking\x20D1\x20ladder\x20status'),checkUserInLadderAndLoadOpponents(auth[K(0x1df)][K(0x132)])):console[K(0x14a)]('No\x20user\x20logged\x20in\x20yet,\x20waiting\x20for\x20auth\x20state\x20change');});function setupAuthStateListener(a){onAuthStateChanged(auth,async b=>{b?handleUserSignedIn(b,a):handleUserSignedOut(a);});}async function handleUserSignedIn(a,b){const Q=a48J;if(!b){console[Q(0x1d9)](Q(0x188));return;}currentUserEmail=a['email']||null;const c=a['uid'];try{const d=doc(db,'nonParticipants',c);try{const i=await getDoc(d);console['log']('Non-participant\x20check:',{'exists':i['exists'](),'data':i['exists']()?i[Q(0x1d8)]():null});if(i[Q(0x169)]()&&i[Q(0x1d8)]()[Q(0x1ce)]===!![]){b['authWarning']&&(b[Q(0x177)]['style'][Q(0x14d)]='block',b['authWarning']['textContent']='Non-participants\x20cannot\x20report\x20games.');b[Q(0x1b6)]&&(b[Q(0x1b6)]['style'][Q(0x14d)]=Q(0x15b));return;}}catch(j){console[Q(0x1d1)](Q(0x1d4),j);}const e=[Q(0x1cd),Q(0x180),Q(0x16e),'playersDuos','playersCTF'];let f=![],g='';for(const k of e){try{const l=doc(db,k,c),m=await getDoc(l);if(m['exists']()){f=!![],g=m['data']()['username'],console[Q(0x14a)](Q(0x1cc)+k+'\x20with\x20username:\x20'+g);if(k==='players'&&currentGameMode!=='D1'){currentGameMode='D1';const n=document['getElementById'](Q(0x14b)),o=document['getElementById'](Q(0x137)),p=document[Q(0x17c)](Q(0x1c3));n['classList']['add']('active'),o[Q(0x200)]['remove'](Q(0x133)),p['classList']['remove']('active');}else{if(k==='playersD2'&&currentGameMode!=='D2'){currentGameMode='D2';const q=document['getElementById'](Q(0x14b)),r=document[Q(0x17c)](Q(0x137)),s=document['getElementById']('d3-mode');r[Q(0x200)][Q(0x19a)]('active'),q[Q(0x200)]['remove'](Q(0x133)),s[Q(0x200)]['remove']('active');}}break;}}catch(t){console[Q(0x1d1)]('Error\x20checking\x20'+k+Q(0x174),t);}}if(!f){b['authWarning']&&(b[Q(0x177)][Q(0x17d)]['display']='block',b['authWarning'][Q(0x151)]='You\x20are\x20not\x20registered\x20in\x20any\x20ladder.');b['reportForm']&&(b[Q(0x1b6)][Q(0x17d)]['display']=Q(0x15b));return;}const h=await checkUserInLadderAndLoadOpponents(c);if(!h){console[Q(0x1d1)]('User\x20is\x20not\x20in\x20the\x20'+currentGameMode+Q(0x1ae));for(const u of['players','playersD2',Q(0x16e)]){if(u===(currentGameMode==='D1'?'players':currentGameMode==='D2'?'playersD2':'playersD3'))continue;const v=doc(db,u,c);try{const w=await getDoc(v);if(w[Q(0x169)]()){const x=u==='players'?'D1':u==='playersD2'?'D2':'D3';console['log']('User\x20found\x20in\x20'+u+Q(0x1e4)+x+Q(0x1be));const y=document['getElementById']('d1-mode'),z=document['getElementById'](Q(0x137)),A=document['getElementById'](Q(0x1c3));if(x==='D1')y['classList'][Q(0x19a)](Q(0x133)),z['classList']['remove']('active'),A['classList'][Q(0x18a)]('active');else x==='D2'?(z[Q(0x200)][Q(0x19a)](Q(0x133)),y['classList']['remove'](Q(0x133)),A['classList'][Q(0x18a)]('active')):(A[Q(0x200)][Q(0x19a)](Q(0x133)),y['classList'][Q(0x18a)](Q(0x133)),z[Q(0x200)][Q(0x18a)](Q(0x133)));currentGameMode=x,await checkUserInLadderAndLoadOpponents(c);break;}}catch(B){console['warn']('Error\x20checking\x20'+u+':',B);}}}}catch(C){console[Q(0x1d9)]('Error\x20during\x20sign-in\x20handling:',C);}}function handleUserSignedOut(a){const R=a48J;a[R(0x177)][R(0x17d)]['display']=R(0x1ba),a[R(0x1b6)]['style']['display']='none',currentUserEmail=null;}async function updateUserDisplay(a,b){const S=a48J,c=collection(db,S(0x1cd)),d=query(c,where('email','==',a)),e=await getDocs(d);if(!e['empty']){const f=e[S(0x163)][0x0][S(0x1d8)]()[S(0x1a2)];b['loserUsername'][S(0x151)]=f;}}async function populateWinnerDropdown(a){const T=a48J;try{const b=collection(db,'players'),c=await getDocs(b);a[T(0x155)]=T(0x1c1),!c[T(0x198)]&&c['forEach'](d=>{const U=T,e=d[U(0x1d8)]();if(e['email']!==currentUserEmail){const f=document['createElement']('option');f[U(0x1e8)]=e[U(0x183)],f[U(0x151)]=e['username'],a['appendChild'](f);}});}catch(d){console['error']('Error\x20populating\x20winner\x20dropdown:',d);throw d;}}function a48a(){const aB=['yxbWCM92zs1IDxr0B24','BgLNAhrIB3GTBg9ZzxiTC2nVCMu','D2LUBMvYt2XKrwXV','ig1HDgnOzxmGzM91BMq','uMvQzwn0Aw5Nig1HDgnOia','z3jLzw4','zg9JCW','nhb4','nZyZmZu3uM1SDwTl','mtiXnJq3rgfLC0Xw','pc9ZCgfUpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iM1HDgnOlwrLDgfPBc1PDgvTiJ5ty29YztOGpYaTia','rxjYB3iGCMvQzwn0Aw5NihjLCg9YDdO','zxHPC3rZ','yMfJA2DYB3vUzenVBg9Y','pc9ZCgfUpGOGicaGicaGicaGica8l2rPDJ4kicaGicaGicaGicaGpgrPDIbJBgfZCZ0IBwf0y2GTywn0Aw9UCYi+cIaGicaGicaGicaGicaGica8yNv0Dg9UignSyxnZpsjIDg4GDMLLDY1KzxrHAwWTyNrUiIbKyxrHlwLKpsi','CgfYzw50tM9Kzq','CMvTB3zLqxr0CMLIDxrL','CgXHEwvYC0qZ','uMvQzwn0igj1DhrVBIbHzgrLzdO','y29SB3i','mtG3ntbYsgPHzwe','rxjYB3iGzMv0y2HPBMCGCgXHEwvYigrHDgeUifbSzwfZzsb0CNKGywDHAw4U','D2LUBMvYlxn1AwnPzgvZ','ignVBgXLy3rPB246','u3rHBMrHCMqGtwf0y2G','pc9ZCgfUpGOGicaGicaGicaGicaGicaGphnWyw4Gy2XHC3m9iM1HDgnOlwrLDgfPBc1PDgvTiJ5eyxrLoIa','yxv0AfDHCM5PBMC','tM8GBwf0y2HLCYbMB3vUzcbIEsb3Aw5UzxjjzcWGDhj5Aw5NihDPBM5LCKvTywLS','CMvWB3j0rxjYB3i','mJK1mtK3m05xChP6uW','BgLNAhrIB3GTy29TBwvUDa','z2v0rwXLBwvUDej5swq','C3r5Bgu','rxjYB3iGy2HLy2TPBMCGB3v0C3rHBMrPBMCGCMvWB3j0CZO','ww91icG','CgXHEwvYC0qY','ywrKrxzLBNrmAxn0zw5LCG','BgLNAhrIB3GTC3vIz2fTzq','zw1HAwW','B3v0C3rHBMrPBMCTBwf0y2HLCY1SAxn0','CgfKzgLUzW','Cg9ZAxrPB24','zgLZywjSzwq','rwXLBwvUDhmGB2jQzwn0igLZig51BgWGB3iGDw5KzwzPBMvK','y2XVBMvoB2rL','CMvTB3zL','C2nYB2XSsw50B1zPzxC','rxjYB3iGCMvWB3j0Aw5NigDHBwuUifbSzwfZzsb0CNKGywDHAw4U','y2fUy2vSlwj1DhrVBG','twf0y2GGyxbWCM92zwqGC3vJy2vZC2z1BgX5','zgf0ys1LzgL0lwLK','CMvWB3j0lwvYCM9Y','mJm3mdG2wMjTwLDb','rMfPBgvKihrVihvWzgf0zsbYzxbVCNqUifbSzwfZzsb0CNKGywDHAw4U','z2v0qxr0CMLIDxrL','pg9WDgLVBIb2ywX1zt0IiJ5tzwXLy3qGt3bWB25LBNq8l29WDgLVBJ4','Bg9ZzxiTDxnLCM5HBwu','CMvWBgfJzunOAwXK','CMDIysGYntuSidi1nsWGmJu1lcaWlJa1kq','zw1WDhK','uMvWB3j0igHHCYbIzwvUihn1y2nLC3nMDwXSEsb1CgrHDgvKlG','ywrK','ywXS','CMvQzwn0lwj1DhrVBG','vxbKyxrLifjLCg9YDa','uMvWB3j0ieDHBwu','D2HPDgu','C3vIBwL0','r2fTzsbYzxbVCNrLzcbZDwnJzxnZzNvSBhKU','DxnLCM5HBwu','BwvZC2fNzq','iJ5fzgL0ifjLCg9YDdWVyNv0Dg9UpGOGicaGicaGicaGicaGicaGpgj1DhrVBIbJBgfZCZ0IyNrUigrHBMDLCI1IDxr0B24GCMvZy2LUzc1YzxbVCNqTyNrUiIbKyxrHlwLKpsi','y2f0y2G','mta5mtG4nZbVwwv2A1K','tM8GBg9ZzxiGzM91BMqGzM9YihrOAxmGBwf0y2G','y2XHC3noyw1L','t25SEsb0AguGD2LUBMvYig9MihrOzsbTyxrJAcbJyw4GCMvQzwn0igL0','zgf0ys1Pza','rxjYB3iGBg9HzgLUzYbVChbVBMvUDhmGBgLZDdO','Bg9ZzxjfBwfPBa','B3v0C3rHBMrPBMCTBw9KywW','igXHzgrLCI4Gq2HLy2TPBMCGB3rOzxiGBgfKzgvYCY4','twf0y2GGCMvWB3j0ihjLAMvJDgvKihn1y2nLC3nMDwXSEq','Bg9ZzxiTy29TBwvUDa','r2fTzsbTB2rLihnLDcb0BZOG','q2HLy2TPBMCGCMvWB3j0CYbMB3iGDxnLCJOG','BgLNAhrIB3GTD2LUBMvY','vxnPBMCGy29SBgvJDgLVBJOG','BwfYz2LUuMLNAhq','CMvWB3j0rM9YBq','jYbUB3qGzM91BMqGAw4GDgHLierptq','BwfWugXHEwvK','y2fSBa','yMXVy2S','CxvLCNLtzwXLy3rVCG','Dgv4Da','C2v0qxr0CMLIDxrL','ig1Vzgu','Bg9ZzxjvC2vYBMfTzq','C21VB3rO','pg9WDgLVBIb2ywX1zt0IiJ5tzwXLy3qGv2LUBMvYpc9VChrPB24+','C3vIz2fTzs10ExbL','zdmTBw9Kzq','BgLNAhrIB3GTBwfW','ihrVia','yxbWzw5Kq2HPBgq','ndKYCKfXDLLK','Bg9ZzxjdB21Tzw50','CMvWB3j0lwXPz2H0yM94','mtbWEa','lMvKAxqTCMvWB3j0lwj0BG','vxnLCIbMB3vUzcbPBIbJB2XSzwn0Aw9Uia','CgXHEwvYCW','AxnoB25qyxj0AwnPCgfUDa','tgLNAhrIB3GGzwXLBwvUDcbUB3qGzM91BMq','B25bDxrOu3rHDgvdAgfUz2vK','D2fYBG','pha+tM8GB3v0C3rHBMrPBMCGBwf0y2HLCYbMB3vUzcbPBIb0AguGy3vYCMvUDcbNyw1Lig1VzguUpc9WpG','BgLNAhrIB3GTC3vPy2LKzxm','rxjYB3iGy2HLy2TPBMCGBM9UlxbHCNrPy2LWyw50ihn0yxr1CZO','Aw5Zzxj0qMvMB3jL','CxvLCNLtzwXLy3rVCKfSBa','uMvWB3j0igzVCM0GCMvZzxq','zgf0yq','zxjYB3i','D2LUBMvYvxnLCM5HBwu','C2HVDW','Dg9eyxrL','vw5RBM93BG','yNv0Dg9U','y3vYCMvUDfvZzxi','C3vPy2LKzxm','CMvSB2fK','yM9YzgvYuMfKAxvZ','uxvLCNKGyNKGD2LUBMvYvxnLCM5HBwuGCMvZDwX0CZOG','lcbZD2L0y2HPBMCGDg8G','rxjYB3iGy2HLy2TPBMCGBgfKzgvYig1LBwjLCNnOAxaUifbSzwfZzsb0CNKGywDHAw4GBgf0zxiU','ww91igfYzsbUB3qGCMvNAxn0zxjLzcbPBIb0AguG','twf0y2GG','DMfSDwu','igzYB20G','BgLNAhrIB3GTBg9Zzxi','iJ4kicaGicaGicaGicaGpgGZpG','uxvLCNKGyNKGD2LUBMvYrw1HAwWGCMvZDwX0CZOG','CMvWB3j0lwzVCM0','y2fUy2vSlwvKAxqTyNrU','uMvQzwn0ie1HDgnO','ihzZia','y2XPy2S','v2LUBMvYoIa','yxv0Ac13yxjUAw5N','zgvMyxvSDcbJB2XSzwn0Aw9U','z2fTzu1Vzgu','y2XVC2uTB3v0C3rHBMrPBMCTyNrU','i2qZmMyYzG','CMvK','DgHLBG','q3vYCMvUDcb1C2vYigLUzM86','zM9YrwfJAa','igzVCIbNyw1Lig1Vzgu6ia','icHfte86ia','C2L6zq','y3jLyxrLrwXLBwvUDa','y2XHC3nmAxn0','C3vIz2fTzvr5Cgu','rM91BMqGCgvUzgLUzYbTyxrJAdO','tg9HzgLUzYbVChbVBMvUDhmGzNjVBsbJB2XSzwn0Aw9UoIa','tM8GCgvUzgLUzYbTyxrJAgvZigzVDw5KigzVCIb0AgLZihvZzxi','C29Tzq','re9nq29UDgvUDeXVywrLza','yxbWCM92zwq','Dg9mB2nHBgveyxrLu3rYAw5N','yM9YzgvY','u2vSzwn0zwqGB3bWB25LBNqGBM90igzVDw5K','twf0y2GGCMvWB3j0zwqGAw4G','DwLK','ywn0AxzL','rxjYB3i6ia','Bg9ZzxjtDwLJAwrLCW','Bg9Zzxjty29Yzq','zdiTBw9Kzq','ww91ig11C3qGyMuGBg9Nz2vKigLUihrVihjLAMvJDcbHig1HDgnO','rMfPBgvKihrVihjLC2nPBMqGCMvWB3j0lIbqBgvHC2uGDhj5igfNywLUlG','tM90ihjLz2LZDgvYzwqGAw4GDgHPCYbSywrKzxi','uMvXDwLYzwqGzwXLBwvUDhmGBM90igzVDw5KigzVCIbSB2fKt3bWB25LBNrZtgLZDa','q2HLy2TPBMCGAwyGDxnLCIbLEgLZDhmGAw4Gy29SBgvJDgLVBJOG','zwXVuMf0Aw5N','mZq5mdK0nhvlzKXOsa','tM8GB3bWB25LBNrZigf2ywLSywjSzq','r2fTzsbYzxbVCNrLzcbZDwnJzxnZzNvSBhKH','CgvUzgLUz01HDgnOzxnemW','rxjYB3iGC3vIBwL0DgLUzYbYzxbVCNq6','rxjYB3iGCMvQzwn0Aw5Nig1HDgnOoG','tM8GD2LUBMvYigzVDw5KigzVCIb0AgLZig1HDgnO','Bg9ZzxiTC2nVCMu','CMvZzxq','D2LUBMvYlxvZzxjUyw1L','CgvUzgLUz01HDgnOzxm','ww91CIbWBgf5zxiGChjVzMLSzsbUB3qGzM91BMq','Bg9N','zdeTBw9Kzq','DgfYz2v0','zgLZCgXHEq','rxjYB3i6ieXVC2vYigrHDgeGBM90igzVDw5KlG','Bg9Zzxjjza','Dw5KzwzPBMvK','Dgv4DenVBNrLBNq','m0v5wgjODW','mJrosMXdBNu','D2LUBMvYrw1HAwW','Aw5Uzxjive1m','CgvUzgLUz01HDgnOzxnemG','rM91BMqGyNv0Dg9UCYbJB250ywLUzxi6','D2LUBMvYswq','y3jLyxrLzef0','DhLWzq','BM9Uzq','igLUia'];a48a=function(){return aB;};return a48a();}function setupReportForm(a){const V=a48J;if(!a[V(0x1b6)])return;a['reportForm']['addEventListener'](V(0x1a0),async b=>{const W=V;b['preventDefault']();try{await submitReport(a),a['reportForm'][W(0x146)](),alert(W(0x1a1));}catch(c){console[W(0x1d9)](W(0x142),c),a[W(0x179)][W(0x151)]=W(0x18c);}});}async function submitReport(a){const X=a48J,b=currentGameMode==='D1'?X(0x148):currentGameMode==='D2'?'pendingMatchesD2':X(0x141),c=collection(db,b),d=doc(c);try{const e=auth[X(0x1df)];if(!e)throw new Error('User\x20not\x20authenticated');const f=e['uid'],g=currentGameMode==='D1'?X(0x1cd):currentGameMode==='D2'?'playersD2':X(0x16e),h=await getDoc(doc(db,g,f));if(!h[X(0x169)]())throw new Error(X(0x149));const i=document[X(0x17c)](X(0x1c2)),j=a['winnerUsername'][X(0x1e8)];if(!j)throw new Error('Please\x20select\x20an\x20opponent');const k=query(collection(db,g),where('username','==',j)),l=await getDocs(k);if(l['empty'])throw new Error(X(0x130));const m=l['docs'][0x0]['data'](),n=l['docs'][0x0]['id'],o={'matchId':d['id'],'loserUsername':h[X(0x1d8)]()['username'],'loserId':f,'winnerUsername':m['username'],'winnerId':n,'loserScore':a[X(0x136)]['value'],'loserSuicides':a['suicides']['value'],'mapPlayed':a[X(0x1b8)]['value'],'loserComment':a['loserComment'][X(0x1e8)],'subgameType':i?i['value']:'','gameMode':currentGameMode,'approved':![],'createdAt':serverTimestamp(),'winnerOldElo':m['eloRating']||null,'losersOldElo':h[X(0x1d8)]()['eloRating']||null};await setDoc(d,o),console[X(0x14a)](X(0x131)+b+'\x20with\x20ID:\x20'+d['id']),a['reportError']['textContent']=X(0x140),a['reportError'][X(0x17d)]['color']=X(0x162),updatePendingMatchNotification();}catch(p){console['error'](X(0x142),p),a[X(0x179)][X(0x151)]=X(0x134)+p[X(0x1a3)],a['reportError'][X(0x17d)]['color']=X(0x1f8);throw p;}}function a48b(a,b){const c=a48a();return a48b=function(d,e){d=d-0x127;let f=c[d];if(a48b['VdhsRl']===undefined){var g=function(l){const m='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let n='',o='';for(let p=0x0,q,r,s=0x0;r=l['charAt'](s++);~r&&(q=p%0x4?q*0x40+r:r,p++%0x4)?n+=String['fromCharCode'](0xff&q>>(-0x2*p&0x6)):0x0){r=m['indexOf'](r);}for(let t=0x0,u=n['length'];t<u;t++){o+='%'+('00'+n['charCodeAt'](t)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(o);};a48b['mUMrnf']=g,a=arguments,a48b['VdhsRl']=!![];}const h=c[0x0],i=d+h,j=a[i];return!j?(f=a48b['mUMrnf'](f),a[i]=f):f=j,f;},a48b(a,b);}async function checkForOutstandingReports(a,b,c=null){const Y=a48J;console['log'](Y(0x1b2)+a+Y(0x15c)+(c||Y(0x1f4)));const d=c||(currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':Y(0x141));console[Y(0x14a)](Y(0x1b4)+d);try{const e=auth['currentUser'];if(!e){console[Y(0x14a)]('No\x20authenticated\x20user\x20found');return;}const f=e['uid'],g=collection(db,d),h=query(g,where('winnerId','==',f),where('approved','==',![]));let i=await getDocs(h);console[Y(0x14a)]('Query\x20by\x20winnerId\x20results:\x20'+i['size']+Y(0x160));if(i[Y(0x198)]&&e[Y(0x183)]){console[Y(0x14a)](Y(0x178));const j=query(g,where('winnerEmail','==',e[Y(0x183)]),where(Y(0x12d),'==',![]));i=await getDocs(j),console['log'](Y(0x1ec)+i[Y(0x1fe)]+'\x20matches\x20found');}if(i[Y(0x198)]){console[Y(0x14a)]('No\x20matches\x20found\x20by\x20email\x20either,\x20trying\x20winnerUsername');const k=currentGameMode==='D1'?'players':Y(0x180),l=await getDoc(doc(db,k,f));if(l['exists']()&&l['data']()[Y(0x1a2)]){const m=l['data']()[Y(0x1a2)],n=query(g,where(Y(0x1da),'==',m),where(Y(0x12d),'==',![]));i=await getDocs(n),console['log'](Y(0x1e3)+i['size']+'\x20matches\x20found');}}if(!i['empty']){const o=i['docs'][0x0]['data']();return console[Y(0x14a)](Y(0x128),o),o['id']=i[Y(0x163)][0x0]['id'],autoFillReportForm(o),updateNotificationDot(!![]),!![];}else return console['log'](Y(0x12a)),updateNotificationDot(![]),![];}catch(p){console[Y(0x1d9)](Y(0x17e),p);}}function autoFillReportForm(a){const Z=a48J;console['log']('Report\x20Data\x20in\x20autoFillReportForm:',a);if(a){const b=parseInt(a['loserScore']||'0'),c=b<0x12?0x14:b+0x2,d=a[Z(0x1f5)]||currentGameMode,e=d==='D1'?'players':d==='D2'?'playersD2':'playersD3';console['log']('Using\x20players\x20collection:\x20'+e+Z(0x1fc)+d);let f;a[Z(0x158)]?f=getDoc(doc(db,e,a['winnerId']))[Z(0x1f9)](h=>h['exists']()?{'id':h['id'],'data':h[Z(0x1d8)]()}:null):f=getDocs(query(collection(db,e),where(Z(0x1a2),'==',a[Z(0x1da)])))['then'](h=>!h[Z(0x198)]?{'id':h[Z(0x163)][0x0]['id'],'data':h['docs'][0x0]['data']()}:null);let g;a[Z(0x14f)]?g=getDoc(doc(db,e,a[Z(0x14f)]))[Z(0x1f9)](h=>h['exists']()?{'id':h['id'],'data':h['data']()}:null):g=getDocs(query(collection(db,e),where(Z(0x1a2),'==',a[Z(0x1bf)])))['then'](h=>!h[Z(0x198)]?{'id':h[Z(0x163)][0x0]['id'],'data':h[Z(0x163)][0x0]['data']()}:null),Promise[Z(0x19b)]([f,g])['then'](([h,i])=>{const a0=Z;if(!h){console['error'](a0(0x144)),alert('Error:\x20Winner\x20data\x20not\x20found.');return;}if(!i){console['error'](a0(0x1a7)),alert(a0(0x14e));return;}const j=a[a0(0x15f)]!=null?a['winnerOldElo']:h['data']['eloRating'],k=a['losersOldElo']!=null?a['losersOldElo']:i[a0(0x1d8)][a0(0x13d)],l=h[a0(0x1d8)][a0(0x1a2)],m=i['data'][a0(0x1a2)];console[a0(0x14a)](a0(0x1f2)+l+a0(0x1fd)+j+'),\x20Loser:\x20'+m+a0(0x1fd)+k+')');const n=document['getElementById']('report-lightbox');if(!n){console[a0(0x1d9)](a0(0x1cf));return;}document['getElementById'](a0(0x1b3))[a0(0x151)]=l,document['getElementById']('lightbox-loser')[a0(0x151)]=m,document[a0(0x17c)](a0(0x15e))[a0(0x151)]=a[a0(0x136)]||'0',document['getElementById']('lightbox-suicides')['textContent']=a[a0(0x135)]||'0',document['getElementById'](a0(0x1c4))[a0(0x151)]=a[a0(0x1b8)]||'Not\x20specified',document['getElementById'](a0(0x17b))[a0(0x151)]=a[a0(0x1c8)]||'No\x20comment',document['getElementById'](a0(0x182))[a0(0x151)]=a['subgameType']||a0(0x175);const o=document['getElementById']('winner-score');o&&(o['value']=c,o['readOnly']=!![],o[a0(0x17d)][a0(0x16a)]=a0(0x197));showLightbox();const p=document[a0(0x1bb)]('.lightbox-buttons');if(p){console[a0(0x14a)](a0(0x157),p);const t=document[a0(0x17c)](a0(0x19c));t&&t[a0(0x18a)]();const u=document[a0(0x1ff)](a0(0x1de));u['id']=a0(0x19c),u['className']='button\x20danger-button',u['textContent']=a0(0x1ef),u['style']['backgroundColor']=a0(0x1f7),u[a0(0x17d)]['color']='white',u['style'][a0(0x1b5)]=a0(0x1ca),u['style'][a0(0x185)]='8px\x2016px',u[a0(0x17d)][a0(0x12f)]='none',u['style'][a0(0x1e2)]=a0(0x164),u['style']['cursor']='pointer',u[a0(0x17d)]['fontWeight']='bold',p['prepend'](u),console['log'](a0(0x16f),u);}const q=document['getElementById'](a0(0x15d)),r=document[a0(0x17c)](a0(0x19c)),s=document['getElementById'](a0(0x18d));if(q){const v=q[a0(0x189)](!![]);q[a0(0x16c)]['replaceChild'](v,q),v[a0(0x181)](a0(0x1f1),async function(){const a1=a0;try{const w=document[a1(0x17c)]('winner-score')['value'],x=document['getElementById'](a1(0x173))['value']||'0',y=document[a1(0x17c)]('winner-comment')['value']||'';console[a1(0x14a)](a1(0x1fa),{'uid':auth[a1(0x1df)]?.[a1(0x132)],'email':auth['currentUser']?.['email'],'isAdmin':auth[a1(0x1df)]?.[a1(0x183)]==='admin@ladder.com'||auth[a1(0x1df)]?.['email']==='brian2af@outlook.com'});const z=a[a1(0x1f5)]||currentGameMode;if(z==='D3')await approveReportD3(a['id'],w,x,y);else z==='D2'?await approveReportD2(a['id'],w,x,y):await approveReport(a['id'],w,x,y);document['getElementById'](a1(0x1c9))['style']['display']=a1(0x15b),alert(a1(0x18e)),updatePendingMatchNotification(),location[a1(0x1e1)]();const A=z==='D1'?'players':'playersD2',B=doc(db,A,h['id']),C=doc(db,A,i['id']),[D,E]=await Promise[a1(0x19b)]([getDoc(B),getDoc(C)]);if(D[a1(0x169)]()&&E[a1(0x169)]()){const F=D['data'](),G=E[a1(0x1d8)]();F['position']>G['position']?(await updateDoc(B,{'position':G[a1(0x186)]}),console['log']('Winner\x20'+F[a1(0x1a2)]+'\x20moved\x20to\x20position\x20'+G['position'])):console['log']('No\x20position\x20change\x20needed;\x20winner\x20is\x20already\x20above\x20the\x20loser.');}}catch(H){console[a1(0x1d9)]('Error\x20approving\x20report:',H),alert('Error\x20approving\x20match:\x20'+H['message']);}});}if(r){const w=r[a0(0x189)](!![]);r[a0(0x16c)][a0(0x196)](w,r),w[a0(0x181)]('click',async function(){const a2=a0;try{const x=prompt('Please\x20provide\x20a\x20reason\x20for\x20rejecting\x20this\x20match\x20report:','');if(x===null)return;await rejectReport(a['id'],x),hideLightbox(),alert(a2(0x1af)),updatePendingMatchNotification(),location[a2(0x1e1)]();}catch(y){console['error'](a2(0x168),y),alert('Error\x20rejecting\x20match:\x20'+y[a2(0x1a3)]);}});}if(s){const x=s['cloneNode'](!![]);s['parentNode']['replaceChild'](x,s),x['addEventListener'](a0(0x1f1),hideLightbox);}})[Z(0x1a5)](h=>{const a3=Z;console[a3(0x1d9)]('Error\x20processing\x20player\x20data:',h),alert(a3(0x172));});}}function showLightbox(){const a4=a48J;console[a4(0x14a)]('Showing\x20lightbox');const a=document[a4(0x17c)]('report-lightbox');if(!a){console[a4(0x1d9)]('Lightbox\x20element\x20not\x20found');return;}a['classList'][a4(0x19a)](a4(0x1db));}function hideLightbox(){const a5=a48J,a=document[a5(0x17c)](a5(0x1c9));a['classList']['remove']('show');}async function rejectReport(a,b){const a6=a48J;try{const c=currentGameMode==='D1'?a6(0x148):currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',d=currentGameMode==='D1'?'RejectedD1':currentGameMode==='D2'?'RejectedD2':'RejectedD3';console['log'](a6(0x161)+a+a6(0x1e9)+c+a6(0x1c5)+d);const e=auth[a6(0x1df)];if(!e)throw new Error(a6(0x138));const f=doc(db,c,a),g=await getDoc(f);if(!g[a6(0x169)]())throw new Error('Match\x20report\x20not\x20found');const h=g['data'](),i=h['winnerId']&&h['winnerId']===e['uid']||h[a6(0x154)]&&h[a6(0x154)]===e['email']||h['winnerUsername']&&h[a6(0x1da)]===await getUsernameFromId(e['uid']);if(!i)throw new Error(a6(0x1a9));const j={...h,'rejectedAt':serverTimestamp(),'rejectedBy':e['uid'],'rejectionReason':b||'No\x20reason\x20provided','originalDocumentId':a},k=doc(collection(db,d));return await setDoc(k,j),await deleteDoc(f),console['log'](a6(0x1e7)+a+'\x20rejected\x20successfully'),updatePendingMatchNotification(),!![];}catch(l){console[a6(0x1d9)](a6(0x143),l);throw l;}}async function getUsernameFromId(a){const a7=a48J,b=await getDoc(doc(db,a7(0x1cd),a));if(b[a7(0x169)]())return b['data']()['username'];const c=await getDoc(doc(db,a7(0x180),a));if(c[a7(0x169)]())return c['data']()['username'];return null;}async function loadOpponentsList(a){const a8=a48J;try{const b=document['getElementById']('report-error'),c=document['getElementById'](a8(0x195)),d=document[a8(0x17c)](a8(0x147));if(!b||!c||!d){console['error'](a8(0x13b));return;}const e=currentGameMode==='D1'?'players':currentGameMode==='D2'?a8(0x180):'playersD3';console[a8(0x14a)](a8(0x129)+e);const f=await getDoc(doc(db,e,a));if(!f['exists']()){b['textContent']='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+'\x20ladder.',b['style']['color']=a8(0x1f8),c[a8(0x151)]=a8(0x13a),d[a8(0x187)]=!![];return;}const g=f[a8(0x1d8)](),h=g['username'];c['textContent']=a8(0x17f)+h+')',b['textContent']='',d[a8(0x187)]=![];const i=collection(db,e),j=await getDocs(i);if(j[a8(0x198)]){console['log'](a8(0x13f));return;}d['innerHTML']=a8(0x194),j['forEach'](k=>{const a9=a8,l=k[a9(0x1d8)]();if(k['id']!==a){const m=document[a9(0x1ff)]('option');m[a9(0x1e8)]=l[a9(0x1a2)],m[a9(0x151)]=l[a9(0x1a2)],m['dataset']['uid']=k['id'],d[a9(0x1c6)](m);}});}catch(k){console['error'](a8(0x1ab),k),document[a8(0x17c)]('report-error')['textContent']='Error\x20loading\x20opponents.\x20Please\x20try\x20again\x20later.',document['getElementById']('report-error')[a8(0x17d)][a8(0x170)]='red';}}async function checkUserInLadderAndLoadOpponents(a){const aa=a48J;try{const b=document[aa(0x17c)](aa(0x190)),c=document[aa(0x17c)](aa(0x195)),d=document['getElementById'](aa(0x147)),e=document[aa(0x17c)](aa(0x1ed)),f=document['getElementById']('auth-warning');b[aa(0x151)]='Checking\x20if\x20you\x20are\x20registered\x20in\x20'+currentGameMode+'\x20ladder...',b[aa(0x17d)]['color']=aa(0x19f);const g=currentGameMode==='D1'?aa(0x1cd):currentGameMode==='D2'?aa(0x180):'playersD3';console[aa(0x14a)](aa(0x13c)+g);const h=await getDoc(doc(db,g,a));if(!h['exists']())return b[aa(0x151)]=aa(0x1e6)+currentGameMode+'\x20ladder.',b[aa(0x17d)]['color']='red',c['textContent']='Not\x20registered\x20in\x20this\x20ladder',d[aa(0x187)]=!![],d[aa(0x155)]=aa(0x194),f['style'][aa(0x14d)]='block',f[aa(0x151)]='You\x20are\x20not\x20registered\x20in\x20the\x20'+currentGameMode+'\x20ladder.',![];b[aa(0x151)]='',f[aa(0x17d)]['display']=aa(0x15b);const i=h[aa(0x1d8)](),j=i[aa(0x1a2)];c[aa(0x151)]=aa(0x17f)+j+')',d['disabled']=![],e['style']['display']=aa(0x1ba),await loadOpponentsList(a);const k=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3';return await checkForOutstandingReports(i[aa(0x183)],null,k),!![];}catch(l){return console[aa(0x1d9)]('Error\x20checking\x20if\x20user\x20is\x20in\x20ladder:',l),document[aa(0x17c)]('report-error')['textContent']=aa(0x1e5),document['getElementById']('report-error')['style']['color']='red',![];}}export async function fetchOutstandingMatches(){const ab=a48J,a=auth['currentUser'];if(!a)return[];try{const b=[],c=currentGameMode==='D1'?ab(0x148):currentGameMode==='D2'?ab(0x156):ab(0x141),d=collection(db,c),e=[query(d,where('loserId','==',a['uid']),where(ab(0x12d),'==',![])),query(d,where(ab(0x1ac),'==',a[ab(0x183)]),where(ab(0x12d),'==',![])),query(d,where(ab(0x158),'==',a['uid']),where(ab(0x12d),'==',![])),query(d,where('winnerEmail','==',a[ab(0x183)]),where('approved','==',![]))],f=currentGameMode==='D1'?ab(0x1cd):currentGameMode==='D2'?ab(0x180):ab(0x16e),g=await getDocs(query(collection(db,f),where(ab(0x183),'==',a['email'])));let h=null;!g['empty']&&(h=g[ab(0x163)][0x0]['data']()['username'],h&&e['push'](query(d,where(ab(0x1bf),'==',h),where(ab(0x12d),'==',![])),query(d,where(ab(0x1da),'==',h),where(ab(0x12d),'==',![]))));for(const i of e){const j=await getDocs(i);!j['empty']&&j[ab(0x1fb)](k=>{const ac=ab;!b[ac(0x12b)](l=>l['id']===k['id'])&&b['push']({'id':k['id'],...k[ac(0x1d8)]()});});}return b['sort']((k,l)=>{const ad=ab,m=k['createdAt']?.['toDate']()||new Date(0x0),n=l[ad(0x159)]?.['toDate']()||new Date(0x0);return n-m;}),outstandingMatches=b,b;}catch(k){return console[ab(0x1d9)]('Error\x20fetching\x20outstanding\x20matches:',k),[];}}export function renderOutstandingMatches(){const ae=a48J,a=document[ae(0x17c)]('outstanding-matches-list');if(outstandingMatches['length']===0x0){a['innerHTML']=ae(0x1d2);return;}let b='';const c=auth['currentUser'];if(!c)return;outstandingMatches['forEach'](d=>{const af=ae,e=d[af(0x159)]?.[af(0x1dc)]()?d[af(0x159)]['toDate']()[af(0x12e)]():'Unknown\x20date',f=d['loserEmail']===c['email']||d['loserId']===c['uid'];b+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-item\x22\x20data-id=\x22'+d['id']+af(0x1eb)+(d[af(0x1da)]||'Winner')+af(0x1f0)+(d[af(0x1bf)]||'Loser')+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22match-details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22match-detail-item\x22>Map:\x20'+(d['mapPlayed']||'Unknown')+af(0x176)+e+af(0x167)+(d[af(0x136)]||'0')+af(0x16b)+d['id']+'\x22>View\x20Details</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(f?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20edit-report-btn\x22\x20data-id=\x22'+d['id']+af(0x1a4)+d['id']+'\x22>Rescind\x20Report</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}),a['innerHTML']=b,document[ae(0x1d6)]('.view-detail-btn')[ae(0x1fb)](d=>{const ag=ae;d[ag(0x181)]('click',function(){const ah=ag,e=this['getAttribute'](ah(0x1aa)),f=outstandingMatches['find'](g=>g['id']===e);document['getElementById'](ah(0x1ad))[ah(0x200)]['remove'](ah(0x1db)),showMatchLightbox(f);});}),document['querySelectorAll'](ae(0x1cb))['forEach'](d=>{const ai=ae;d[ai(0x181)]('click',function(){const aj=ai,e=this['getAttribute'](aj(0x1aa)),f=outstandingMatches['find'](g=>g['id']===e);document[aj(0x17c)]('outstanding-modal')[aj(0x200)]['remove'](aj(0x1db)),editReport(f);});}),document[ae(0x1d6)]('.rescind-report-btn')['forEach'](d=>{const ak=ae;d[ak(0x181)](ak(0x1f1),function(){const al=ak,e=this[al(0x193)](al(0x1aa)),f=outstandingMatches['find'](g=>g['id']===e);confirm('Are\x20you\x20sure\x20you\x20want\x20to\x20rescind\x20this\x20match\x20report\x20against\x20'+(f['winnerUsername']||'opponent')+'?')&&rescindReport(f);});});}export async function rescindReport(a){const am=a48J;try{const b=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?'pendingMatchesD2':'pendingMatchesD3',c=doc(db,b,a['id']);await deleteDoc(c),alert('Report\x20has\x20been\x20successfully\x20rescinded.'),await fetchOutstandingMatches(),renderOutstandingMatches();}catch(d){console[am(0x1d9)]('Error\x20rescinding\x20report:',d),alert(am(0x139));}}export function editReport(a){const an=a48J,b=document['getElementById'](an(0x1ed)),c=document['getElementById']('loser-score'),d=document[an(0x17c)]('suicides'),e=document[an(0x17c)]('map-played'),f=document[an(0x17c)](an(0x1b0));b[an(0x17d)]['display']=an(0x1ba),document[an(0x17c)](an(0x1f3))[an(0x17d)]['display']=an(0x15b);if(a['loserScore'])c['value']=a[an(0x136)];if(a[an(0x135)])d[an(0x1e8)]=a['loserSuicides'];if(a[an(0x1b8)])e['value']=a['mapPlayed'];if(a['loserComment'])f[an(0x1e8)]=a['loserComment'];const g=document[an(0x17c)]('winner-username');g&&a['winnerUsername']&&Array['from'](g['options'])[an(0x1fb)](j=>{const ao=an;j[ao(0x1bc)]===a['winnerUsername']&&(j['selected']=!![]);});const h=document[an(0x17c)](an(0x1c2));h&&a[an(0x127)]&&(h[an(0x1e8)]=a['subgameType']);b[an(0x1bd)]('data-edit-id',a['id']);const i=b[an(0x1bb)]('button[type=\x22submit\x22]');i['textContent']=an(0x19d);if(!document[an(0x17c)](an(0x1ee))){const j=document['createElement'](an(0x1de));j['id']='cancel-edit-btn',j[an(0x1a8)]='btn',j[an(0x17d)]['backgroundColor']='#6a1b9a',j[an(0x17d)][an(0x1b5)]=an(0x1ca),j['textContent']='Cancel\x20Edit',j[an(0x15a)]=an(0x1de),i[an(0x16c)][an(0x1d5)](j,i),j['addEventListener']('click',function(k){const ap=an;k['preventDefault'](),b[ap(0x146)](),b['removeAttribute'](ap(0x18f)),i['textContent']=ap(0x19e),this['remove'](),initReportForm();});}b[an(0x18b)]({'behavior':an(0x1c0)});}function initReportForm(){const aq=a48J;console['log'](aq(0x1d7));}export function showMatchLightbox(a){const ar=a48J,b=document[ar(0x17c)](ar(0x1c9));document['getElementById']('lightbox-game-mode')['textContent']=currentGameMode,document[ar(0x17c)]('lightbox-winner')[ar(0x151)]=a['winnerUsername']||ar(0x1dd),document['getElementById'](ar(0x1ea))['textContent']=a[ar(0x1bf)]||'Unknown',document['getElementById'](ar(0x15e))[ar(0x151)]=a[ar(0x136)]||'0',document['getElementById'](ar(0x1d3))[ar(0x151)]=a['loserSuicides']||'0',document['getElementById'](ar(0x1c4))[ar(0x151)]=a[ar(0x1b8)]||ar(0x1dd),document['getElementById']('lightbox-comment')['textContent']=a[ar(0x1c8)]||'No\x20comment',document['getElementById']('lightbox-subgame')[ar(0x151)]=a['subgameType']||'Standard\x20Match',b[ar(0x200)]['add'](ar(0x1db));}export function setCurrentGameMode(a){currentGameMode=a;}export function initOutstandingMatches(){const as=a48J;document['addEventListener'](as(0x12c),()=>{const at=as,a=document[at(0x17c)]('view-outstanding-btn'),b=document['getElementById']('view-outstanding-container'),c=document[at(0x17c)]('outstanding-modal'),d=document['getElementById'](at(0x1f6)),e=document['getElementById'](at(0x18d)),f=document['getElementById']('d1-mode'),g=document[at(0x17c)](at(0x137)),h=document['getElementById'](at(0x1c3));if(f)f['addEventListener']('click',()=>{setCurrentGameMode('D1');});if(g)g[at(0x181)](at(0x1f1),()=>{setCurrentGameMode('D2');});if(h)h[at(0x181)]('click',()=>{setCurrentGameMode('D3');});auth[at(0x1d0)](k=>{const au=at;k?b['style']['display']=au(0x1ba):b[au(0x17d)]['display']='none';});a&&a['addEventListener'](at(0x1f1),async()=>{const av=at;c[av(0x200)][av(0x19a)]('show'),document['getElementById'](av(0x184))[av(0x155)]='<div\x20class=\x22loading\x22>Loading\x20your\x20matches...</div>',await fetchOutstandingMatches(),renderOutstandingMatches();});d&&d[at(0x181)](at(0x1f1),()=>{const aw=at;c[aw(0x200)][aw(0x18a)](aw(0x1db));});e&&e[at(0x181)](at(0x1f1),()=>{const ax=at;document['getElementById']('report-lightbox')[ax(0x200)]['remove']('show');});c&&c['addEventListener'](at(0x1f1),k=>{const ay=at;k[ay(0x14c)]===c&&c['classList'][ay(0x18a)](ay(0x1db));});const i=document['getElementById']('report-lightbox');i&&i[at(0x181)](at(0x1f1),k=>{const az=at;k[az(0x14c)]===i&&i['classList']['remove']('show');});const j=document['getElementById']('report-form');if(j){const k=j['onsubmit'];j['onsubmit']=async function(l){const aA=at;l['preventDefault']();const m=this['getAttribute']('data-edit-id');if(m)try{const n=document['getElementById'](aA(0x145))[aA(0x1e8)],o=document[aA(0x17c)](aA(0x1e0))[aA(0x1e8)],p=document[aA(0x17c)]('map-played')['value'],q=document[aA(0x17c)](aA(0x1b0))['value'],r=currentGameMode==='D1'?'pendingMatches':currentGameMode==='D2'?aA(0x156):'pendingMatchesD3',s=doc(db,r,m);await updateDoc(s,{'loserScore':Number(n),'loserSuicides':Number(o),'mapPlayed':p,'loserComment':q,'subgameType':document[aA(0x17c)]('subgame-type')['value'],'updatedAt':new Date()}),alert(aA(0x199)),this['reset'](),this[aA(0x16d)](aA(0x18f));const t=this['querySelector']('button[type=\x22submit\x22]');t['textContent']=aA(0x19e);const u=document[aA(0x17c)]('cancel-edit-btn');if(u)u[aA(0x18a)]();}catch(v){console['error']('Error\x20updating\x20report:',v),document['getElementById'](aA(0x190))['textContent']=aA(0x192);}else typeof k==='function'&&k[aA(0x1b9)](this,l);};}});}typeof window!==a48J(0x150)&&(window['showMatchLightbox']=showMatchLightbox,window['editReport']=editReport,window['rescindReport']=rescindReport,window['fetchOutstandingMatches']=fetchOutstandingMatches,window['renderOutstandingMatches']=renderOutstandingMatches);initOutstandingMatches();