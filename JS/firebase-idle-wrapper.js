const a17_0x3cddc8=a17_0x4a8b,a17_0x12b5da=(function(){let _0xb3325d=!![];return function(_0x3e084e,_0x485457){const _0x5bb7da=_0xb3325d?function(){if(_0x485457){const _0x43d5ff=_0x485457['apply'](_0x3e084e,arguments);return _0x485457=null,_0x43d5ff;}}:function(){};return _0xb3325d=![],_0x5bb7da;};}()),a17_0x4bdcb3=a17_0x12b5da(this,function(){const _0x1c6c21=a17_0x4a8b;let _0x4b1db1;try{const _0x131c8c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4b1db1=_0x131c8c();}catch(_0x43370e){_0x4b1db1=window;}const _0x4cd761=_0x4b1db1['console']=_0x4b1db1['console']||{},_0xe33a80=['log','warn',_0x1c6c21(0xc3),'error','exception','table','trace'];for(let _0x2064e9=0x0;_0x2064e9<_0xe33a80['length'];_0x2064e9++){const _0x2185ea=a17_0x12b5da[_0x1c6c21(0xae)]['prototype'][_0x1c6c21(0xbd)](a17_0x12b5da),_0x4a29d8=_0xe33a80[_0x2064e9],_0x2d25cb=_0x4cd761[_0x4a29d8]||_0x2185ea;_0x2185ea['__proto__']=a17_0x12b5da['bind'](a17_0x12b5da),_0x2185ea['toString']=_0x2d25cb['toString']['bind'](_0x2d25cb),_0x4cd761[_0x4a29d8]=_0x2185ea;}});function a17_0x2899(){const _0x25021d=['getElementById','constructor','system','log','Error\x20executing\x20pending\x20operation:','pendingTimeout','clear','\x20operation','finally','suspendAllListeners','createListener','updateDocument','executePendingOperations','toString','pendingOperations','\x20total\x20operations','bind','now','activeListeners','error','catch','RDL_NETWORK_ERROR','info','[FirebaseIdle]\x20TEST\x20FAILED\x20-\x20read\x20succeeded\x20during\x20suspension','blockedOperations','appendChild','remove','listener_','enableDebug','unsubscribe','resumeAllListeners','[FirebaseIdle]\x20Blocked\x20','code','query','network','Executing\x20delayed\x20','add','unavailable','[FirebaseIdle]\x20Suspending\x20all\x20active\x20listeners:','set','debug','getDocuments','resource-exhausted','resumeSession','forEach','_suspendedListeners','safeOperation','[FirebaseIdle]\x20Error\x20creating\x20listener\x20'];a17_0x2899=function(){return _0x25021d;};return a17_0x2899();}a17_0x4bdcb3();import{auth,db}from'./firebase-config.js';import{handleNetworkError}from'./idle-timeout.js';import{getDoc,getDocs,collection,doc,query,where,orderBy,limit,startAfter,addDoc,setDoc,updateDoc,deleteDoc,onSnapshot,getCountFromServer,writeBatch,serverTimestamp,Timestamp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';class FirebaseIdleWrapper{constructor(){const _0x2b5a86=a17_0x4a8b;this['activeListeners']=new Map(),this['pendingOperations']=new Map(),this[_0x2b5a86(0xb2)]=null,this[_0x2b5a86(0xc5)]=0x0,this['debug']=![];}['checkSessionActive'](){const _0x1fa452=a17_0x4a8b;if(window['RDL_SESSION_SUSPENDED']===!![])return console[_0x1fa452(0xb0)]('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20session\x20idle'),this['blockedOperations']=(this['blockedOperations']||0x0)+0x1,this['blockedOperations']%0xa===0x0&&console['warn'](_0x1fa452(0xcc)+this['blockedOperations']+'\x20operations\x20during\x20idle\x20state'),![];if(window[_0x1fa452(0xc2)]===!![])return console['log']('[FirebaseIdle]\x20Operation\x20blocked\x20-\x20network\x20error'),![];return!![];}async['safeOperation'](_0x38114b,_0x49deb3,..._0x39b306){const _0x31de2d=a17_0x4a8b;if(!this['checkSessionActive']()){const _0x3ac9c6=_0x49deb3+'-'+Date[_0x31de2d(0xbe)]()+'-'+Math['random']()[_0x31de2d(0xba)](0x24)['substring'](0x2,0x9);return this['pendingOperations'][_0x31de2d(0xd4)](_0x3ac9c6,{'operation':_0x38114b,'operationType':_0x49deb3,'args':_0x39b306}),!this['pendingTimeout']&&(this['pendingTimeout']=setTimeout(()=>{const _0x4c8d39=_0x31de2d;this['pendingOperations'][_0x4c8d39(0xb3)](),this[_0x4c8d39(0xb2)]=null;},0x5*0x3c*0x3e8)),null;}try{return await _0x38114b(..._0x39b306);}catch(_0x47d7f5){if(_0x47d7f5['code']===_0x31de2d(0xd2)||_0x47d7f5[_0x31de2d(0xcd)]===_0x31de2d(0xd7)||_0x47d7f5['message']&&_0x47d7f5['message']['includes'](_0x31de2d(0xcf)))return handleNetworkError(),null;throw _0x47d7f5;}}async['getDocument'](_0x22f36e){return this['safeOperation'](getDoc,'get',_0x22f36e);}async[a17_0x3cddc8(0xd6)](_0x143355){const _0x4258d6=a17_0x3cddc8;return this[_0x4258d6(0xdb)](getDocs,_0x4258d6(0xce),_0x143355);}async['addDocument'](_0x1ef40f,_0x26ed71){const _0x231cff=a17_0x3cddc8;return this['safeOperation'](addDoc,_0x231cff(0xd1),_0x1ef40f,_0x26ed71);}async['setDocument'](_0x399192,_0x1c3ec4,_0x3f3c27={}){const _0x6c0bf2=a17_0x3cddc8;return this[_0x6c0bf2(0xdb)](setDoc,'set',_0x399192,_0x1c3ec4,_0x3f3c27);}async[a17_0x3cddc8(0xb8)](_0x4381da,_0x4a74da){return this['safeOperation'](updateDoc,'update',_0x4381da,_0x4a74da);}async['deleteDocument'](_0x1e86e1){return this['safeOperation'](deleteDoc,'delete',_0x1e86e1);}['suspendAllListeners'](){const _0x43d0af=a17_0x3cddc8;console['log'](_0x43d0af(0xd3),this['activeListeners']['size']),this['_suspendedListeners']=new Map(this['activeListeners']),this['activeListeners'][_0x43d0af(0xd9)]((_0x2b6f6f,_0xfa9345)=>{const _0x516e35=_0x43d0af;console[_0x516e35(0xb0)]('[FirebaseIdle]\x20Suspending\x20listener:',_0xfa9345);if(typeof _0x2b6f6f==='function')try{_0x2b6f6f(),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0xfa9345);}catch(_0x148896){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0xfa9345,_0x148896);}else{if(_0x2b6f6f&&typeof _0x2b6f6f[_0x516e35(0xca)]==='function')try{_0x2b6f6f['unsubscribe'](),console['log']('[FirebaseIdle]\x20Successfully\x20suspended\x20listener:',_0xfa9345);}catch(_0x1547d2){console['error']('[FirebaseIdle]\x20Error\x20suspending\x20listener:',_0xfa9345,_0x1547d2);}}}),this['activeListeners']['clear']();if(this[_0x43d0af(0xd5)]){const _0x3f658e=document['createElement']('div');_0x3f658e['id']='firebase-suspend-indicator',_0x3f658e['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#333;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#ff5555;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x205px\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x3f658e['textContent']='Firebase:\x20Suspended',document['body'][_0x43d0af(0xc6)](_0x3f658e);}console['log']('[FirebaseIdle]\x20All\x20listeners\x20suspended');}[a17_0x3cddc8(0xcb)](){const _0x329036=a17_0x3cddc8;if(!this['_suspendedListeners']||this[_0x329036(0xda)]['size']===0x0){console[_0x329036(0xb0)]('[FirebaseIdle]\x20No\x20listeners\x20to\x20resume');return;}console['log']('[FirebaseIdle]\x20Resuming\x20listeners:',this['_suspendedListeners']['size']),this['_suspendedListeners']['forEach']((_0x66573e,_0x6d06e6)=>{const _0x17f0ee=_0x329036;console['log']('[FirebaseIdle]\x20Resuming\x20listener:',_0x6d06e6);try{if(typeof _0x66573e==='function'){console['warn']('[FirebaseIdle]\x20Cannot\x20resume\x20listener\x20directly:',_0x6d06e6);return;}const {query:_0x160ede,callback:_0x407cfb,options:_0x45a569}=_0x66573e;if(_0x160ede&&_0x407cfb){const _0x5d8bca=onSnapshot(_0x160ede,_0x407cfb,_0x45a569||{});this[_0x17f0ee(0xbf)]['set'](_0x6d06e6,_0x5d8bca),console['log']('[FirebaseIdle]\x20Successfully\x20resumed\x20listener:',_0x6d06e6);}}catch(_0xe16bbc){console['error']('[FirebaseIdle]\x20Error\x20resuming\x20listener:',_0x6d06e6,_0xe16bbc);}}),this['_suspendedListeners'][_0x329036(0xb3)]();const _0x4286f0=document[_0x329036(0xad)]('firebase-suspend-indicator');_0x4286f0&&_0x4286f0[_0x329036(0xc7)](),console[_0x329036(0xb0)]('[FirebaseIdle]\x20Listeners\x20resumed');}[a17_0x3cddc8(0xb7)](_0x2e7d40,_0x225c56,_0x36ce03={},_0x12f64e=null){const _0x1f8efa=a17_0x3cddc8,_0x1acf4b=_0x12f64e||_0x1f8efa(0xc8)+Date[_0x1f8efa(0xbe)]()+'_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9);this['debug']&&console[_0x1f8efa(0xb0)]('[FirebaseIdle]\x20Creating\x20listener:\x20'+_0x1acf4b);if(!this['checkSessionActive']())return console[_0x1f8efa(0xb0)]('[FirebaseIdle]\x20Session\x20suspended,\x20not\x20creating\x20listener:\x20'+_0x1acf4b),()=>{};try{const _0x207157=onSnapshot(_0x2e7d40,_0x225c56,_0x36ce03);return this['activeListeners']['set'](_0x1acf4b,{'unsubscribe':_0x207157,'query':_0x2e7d40,'callback':_0x225c56,'options':_0x36ce03}),this['debug']&&(console['log']('[FirebaseIdle]\x20Listener\x20created:\x20'+_0x1acf4b),console[_0x1f8efa(0xb0)]('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size'])),()=>{const _0x13b529=_0x1f8efa;this['debug']&&console[_0x13b529(0xb0)]('[FirebaseIdle]\x20Manually\x20unsubscribing\x20listener:\x20'+_0x1acf4b);try{_0x207157(),this[_0x13b529(0xbf)]['delete'](_0x1acf4b),this[_0x13b529(0xd5)]&&(console[_0x13b529(0xb0)]('[FirebaseIdle]\x20Listener\x20removed:\x20'+_0x1acf4b),console['log']('[FirebaseIdle]\x20Active\x20listeners:\x20'+this['activeListeners']['size']));}catch(_0x46ddeb){console[_0x13b529(0xc0)]('[FirebaseIdle]\x20Error\x20unsubscribing\x20listener\x20'+_0x1acf4b+':',_0x46ddeb);}};}catch(_0xb5a6ff){return console['error'](_0x1f8efa(0xdc)+_0x1acf4b+':',_0xb5a6ff),()=>{};}}[a17_0x3cddc8(0xb9)](_0x308bde='all'){const _0x1aafc0=a17_0x3cddc8;console['log']('Executing\x20pending\x20'+_0x308bde+'\x20operations:\x20'+this['pendingOperations']['size']+_0x1aafc0(0xbc));const _0x53c8d0=new Map(this[_0x1aafc0(0xbb)]);this['pendingOperations']['clear'](),_0x53c8d0[_0x1aafc0(0xd9)]((_0x298e56,_0x4d085b)=>{const _0x54653c=_0x1aafc0;_0x308bde==='all'||_0x298e56['operationType']===_0x308bde?(console['log'](_0x54653c(0xd0)+_0x298e56['operationType']+_0x54653c(0xb4)),this['safeOperation'](_0x298e56['operation'],_0x298e56['operationType'],..._0x298e56['args'])[_0x54653c(0xc1)](_0x156f67=>console['error'](_0x54653c(0xb1),_0x156f67))):this[_0x54653c(0xbb)][_0x54653c(0xd4)](_0x4d085b,_0x298e56);});}[a17_0x3cddc8(0xc9)](_0x29c7d4=!![]){const _0x3a8bbe=a17_0x3cddc8;this[_0x3a8bbe(0xd5)]=_0x29c7d4,console['log']('[FirebaseIdle]\x20Debug\x20mode\x20'+(_0x29c7d4?'enabled':'disabled'));if(_0x29c7d4){const _0x4818c7=window['RDL_SESSION_SUSPENDED'];window['RDL_SESSION_SUSPENDED']=!![],console['log']('[FirebaseIdle]\x20Testing\x20suspension\x20-\x20attempting\x20read...'),this['getDocument'](doc(db,_0x3a8bbe(0xaf),'test'))['then'](_0x17c71a=>{const _0x423461=_0x3a8bbe;console['log'](_0x423461(0xc4),_0x17c71a);})['catch'](_0x218f57=>{console['log']('[FirebaseIdle]\x20Error\x20during\x20test\x20(expected):',_0x218f57);})[_0x3a8bbe(0xb5)](()=>{const _0x229b59=_0x3a8bbe;console[_0x229b59(0xb0)]('[FirebaseIdle]\x20Suspension\x20test\x20complete'),window['RDL_SESSION_SUSPENDED']=_0x4818c7;});}}}function a17_0x4a8b(_0x2dd9f8,_0x55a380){const _0x4bdcb3=a17_0x2899();return a17_0x4a8b=function(_0x12b5da,_0x537a02){_0x12b5da=_0x12b5da-0xad;let _0x289949=_0x4bdcb3[_0x12b5da];return _0x289949;},a17_0x4a8b(_0x2dd9f8,_0x55a380);}const firebaseIdle=new FirebaseIdleWrapper();export function enhanceIdleTimeout(){const _0x437577=a17_0x3cddc8,_0x2e245e=window['suspendSession']||function(){},_0x24e212=window['resumeSession']||function(){};window['suspendSession']=function(){const _0x2364a9=a17_0x4a8b;_0x2e245e(),firebaseIdle[_0x2364a9(0xb6)]();},window[_0x437577(0xd8)]=function(){_0x24e212(),firebaseIdle['resumeAllListeners']();};}export default firebaseIdle;