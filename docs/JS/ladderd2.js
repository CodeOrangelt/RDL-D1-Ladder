(function(_0x287e78,_0x280d85){const _0x2f16c6=a0_0x50ba,_0x233b90=_0x287e78();while(!![]){try{const _0xe695ba=parseInt(_0x2f16c6(0x18e))/0x1*(parseInt(_0x2f16c6(0x172))/0x2)+parseInt(_0x2f16c6(0x179))/0x3+-parseInt(_0x2f16c6(0x178))/0x4*(parseInt(_0x2f16c6(0x181))/0x5)+-parseInt(_0x2f16c6(0x187))/0x6+parseInt(_0x2f16c6(0x192))/0x7*(parseInt(_0x2f16c6(0x1a7))/0x8)+parseInt(_0x2f16c6(0x190))/0x9+parseInt(_0x2f16c6(0x194))/0xa*(-parseInt(_0x2f16c6(0x19b))/0xb);if(_0xe695ba===_0x280d85)break;else _0x233b90['push'](_0x233b90['shift']());}catch(_0xe3db03){_0x233b90['push'](_0x233b90['shift']());}}}(a0_0x1787,0xc5e8f));const a0_0x839bd9=(function(){let _0x7116f5=!![];return function(_0x1661c2,_0x42b5aa){const _0x5e0cf9=_0x7116f5?function(){if(_0x42b5aa){const _0x16493a=_0x42b5aa['apply'](_0x1661c2,arguments);return _0x42b5aa=null,_0x16493a;}}:function(){};return _0x7116f5=![],_0x5e0cf9;};}()),a0_0x5399ad=a0_0x839bd9(this,function(){const _0x57a76a=a0_0x50ba,_0x33f2de=function(){const _0x490ec9=a0_0x50ba;let _0x90974e;try{_0x90974e=Function('return\x20(function()\x20'+_0x490ec9(0x171)+');')();}catch(_0x553fcb){_0x90974e=window;}return _0x90974e;},_0x12b554=_0x33f2de(),_0x513a66=_0x12b554[_0x57a76a(0x199)]=_0x12b554['console']||{},_0x14460c=['log',_0x57a76a(0x184),'info',_0x57a76a(0x18d),'exception','table','trace'];for(let _0x16be39=0x0;_0x16be39<_0x14460c[_0x57a76a(0x168)];_0x16be39++){const _0x32f83e=a0_0x839bd9['constructor']['prototype']['bind'](a0_0x839bd9),_0x30e2ed=_0x14460c[_0x16be39],_0x37ebfd=_0x513a66[_0x30e2ed]||_0x32f83e;_0x32f83e['__proto__']=a0_0x839bd9['bind'](a0_0x839bd9),_0x32f83e['toString']=_0x37ebfd['toString']['bind'](_0x37ebfd),_0x513a66[_0x30e2ed]=_0x32f83e;}});function a0_0x1787(){const _0x1031c0=['5592366gHKxLU','previousElo',';\x20text-decoration:\x20none;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','timestamp','playersD2','gameMode','error','1BthCsL','userProfiles','3063654OfwvvE','Unranked','63nUGvhv','has','10JeMvYB','loserScore','catch','losses','points','console','totalDeaths','14325971eDZSDe','querySelector','find','username','firstPlaceDate','totalKills','#F44336','innerHTML','set','kda','Error\x20loading\x20D2\x20ladder:','#50C878','562664flBReJ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','display','winRate','includes','0.85em','desc','length','join','toFixed','data','.png\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22','MAX_SAFE_INTEGER','#ladder-d2\x20tbody','winnerScore','#DC143C','{}.constructor(\x22return\x20this\x22)(\x20)','2922634DquRBp','playerUsername','\x0a<tr>\x0a\x20\x20\x20\x20<td>','sort','get','%</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20gray;\x22>','1088ZPbFTh','2104383PAZjcD','displayLadderD2\x20function\x20not\x20available','#C0C0C0','totalMatches','position','toLowerCase','D2:\x20Error\x20fetching\x20tokens:','change','1675rLrlXm','forEach','\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22width:\x2035px;\x20height:\x2035px;\x20margin-left:\x205px;\x20vertical-align:\x20middle;\x20object-fit:\x20contain;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>','warn','#CD7F32','visibility'];a0_0x1787=function(){return _0x1031c0;};return a0_0x1787();}a0_0x5399ad();import{collection,getDocs,doc,getDoc,query,where,updateDoc,Timestamp,orderBy,limit}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db}from'./firebase-config.js';function a0_0x50ba(_0x541ed5,_0x3f2262){const _0x5d2430=a0_0x1787();return a0_0x50ba=function(_0x5399ad,_0x839bd9){_0x5399ad=_0x5399ad-0x167;let _0x45a122=_0x5d2430[_0x5399ad];return _0x45a122;},a0_0x50ba(_0x541ed5,_0x3f2262);}import a0_0x4f7552 from'./firebase-idle-wrapper.js';import{getTokensByUsernames,getPrimaryDisplayToken,clearTokenCache}from'./tokens.js';const playerCacheD2={'data':null,'timestamp':0x0},CACHE_DURATION=0x7530;async function displayLadderD2(_0x4d950b=![]){const _0x1a4ba5=a0_0x50ba,_0x582e88=document['querySelector']('#ladder-d2\x20tbody');if(!_0x582e88){console['error']('D2\x20Ladder\x20table\x20body\x20not\x20found');return;}_0x582e88[_0x1a4ba5(0x1a2)]='<tr><td\x20colspan=\x228\x22\x20class=\x22loading-cell\x22>Loading\x20D2\x20ladder\x20data...</td></tr>';try{const _0x2e845e=Date['now']();if(!_0x4d950b&&playerCacheD2[_0x1a4ba5(0x16b)]&&_0x2e845e-playerCacheD2['timestamp']<CACHE_DURATION){updateLadderDisplayD2(playerCacheD2['data']);return;}const _0x5bdca0=collection(db,'playersD2'),_0x1f8589=await a0_0x4f7552['getDocuments'](_0x5bdca0),_0x3ea176=[];_0x1f8589[_0x1a4ba5(0x182)](_0x8c19ca=>{const _0x19e953=_0x1a4ba5,_0x43a080=_0x8c19ca[_0x19e953(0x16b)]();_0x43a080['username']&&_0x3ea176['push']({..._0x43a080,'id':_0x8c19ca['id'],'elo':_0x43a080['eloRating']||0x0,'position':_0x43a080['position']||Number[_0x19e953(0x16d)]});});const _0x2be467=collection(db,_0x1a4ba5(0x18f)),_0x42685c=await getDocs(_0x2be467),_0x1e1cca=new Map();_0x42685c['forEach'](_0x537a05=>{const _0x3dca08=_0x537a05['data']();_0x3dca08['username']&&_0x1e1cca['set'](_0x3dca08['username']['toLowerCase'](),_0x3dca08);});for(const _0x13a64b of _0x3ea176){const _0x383c20=_0x13a64b['username'][_0x1a4ba5(0x17e)]();if(_0x1e1cca[_0x1a4ba5(0x193)](_0x383c20)){const _0x43250c=_0x1e1cca['get'](_0x383c20);_0x43250c['country']&&(_0x13a64b['country']=_0x43250c['country']['toLowerCase']()),_0x13a64b['points']=_0x43250c[_0x1a4ba5(0x198)]||0x0;}else _0x13a64b['points']=0x0;}const _0xdb6014=_0x3ea176['map'](_0x213489=>_0x213489['username']),_0x15b30b=await fetchBatchMatchStatsD2(_0xdb6014);_0x3ea176[_0x1a4ba5(0x175)]((_0x11e3a7,_0x27e0c1)=>{const _0x41b94a=_0x1a4ba5,_0x26b210=_0x15b30b['get'](_0x11e3a7[_0x41b94a(0x19e)])?.[_0x41b94a(0x17c)]||0x0,_0x3e0136=_0x15b30b['get'](_0x27e0c1['username'])?.[_0x41b94a(0x17c)]||0x0;if(_0x26b210===0x0!==(_0x3e0136===0x0))return _0x26b210===0x0?0x1:-0x1;return(_0x11e3a7['position']||0x3e7)-(_0x27e0c1[_0x41b94a(0x17d)]||0x3e7);}),_0x3ea176['forEach']((_0x5e3ee2,_0x372f36)=>{const _0x27c975=_0x1a4ba5;_0x5e3ee2[_0x27c975(0x17d)]=_0x372f36+0x1;}),playerCacheD2['data']=_0x3ea176,playerCacheD2['timestamp']=_0x2e845e,updateLadderDisplayD2(_0x3ea176);}catch(_0xee7fc0){console[_0x1a4ba5(0x18d)](_0x1a4ba5(0x1a5),_0xee7fc0),_0x582e88['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20colspan=\x228\x22\x20style=\x22text-align:\x20center;\x20color:\x20red;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Error\x20loading\x20D2\x20ladder\x20data:\x20'+_0xee7fc0['message']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';}}function getNextAvailablePositionD2(_0x1dc4c8){const _0x509b95=a0_0x50ba;if(_0x1dc4c8[_0x509b95(0x168)]===0x0)return 0x1;let _0x5ccd6d=0x0;return _0x1dc4c8[_0x509b95(0x182)](_0x47338a=>{const _0x50ad2d=_0x509b95;_0x47338a['position']&&typeof _0x47338a[_0x50ad2d(0x17d)]==='number'&&_0x47338a['position']>_0x5ccd6d&&(_0x5ccd6d=_0x47338a[_0x50ad2d(0x17d)]);}),_0x5ccd6d+0x1;}async function updatePlayerPositions(_0x58daee,_0x3ec342){const _0x2c2926=a0_0x50ba;try{const _0x1ff03a=collection(db,_0x2c2926(0x18b)),_0x56a03d=await getDocs(_0x1ff03a),_0x5c0f89=[];_0x56a03d['forEach'](_0x428c45=>{_0x5c0f89['push']({'id':_0x428c45['id'],..._0x428c45['data']()});});const _0x18f2c4=_0x5c0f89['find'](_0x1114a9=>_0x1114a9['username']===_0x58daee),_0x2ce194=_0x5c0f89[_0x2c2926(0x19d)](_0x103c5d=>_0x103c5d[_0x2c2926(0x19e)]===_0x3ec342);if(!_0x18f2c4||!_0x2ce194){console['error']('Could\x20not\x20find\x20winner\x20or\x20loser\x20in\x20D2\x20players\x20list');return;}if(_0x18f2c4['position']>_0x2ce194['position']){const _0xfa289a=_0x2ce194['position'];for(const _0xce54f5 of _0x5c0f89){_0xce54f5['position']>=_0x2ce194['position']&&_0xce54f5['position']<_0x18f2c4['position']&&_0xce54f5['username']!==_0x58daee&&await updateDoc(doc(db,'playersD2',_0xce54f5['id']),{'position':_0xce54f5['position']+0x1});}await updateDoc(doc(db,'playersD2',_0x18f2c4['id']),{'position':_0xfa289a});if(_0xfa289a===0x1){const _0x28fa0e=doc(db,'playersD2',_0x18f2c4['id']),_0x4af62b=await getDoc(_0x28fa0e);!_0x4af62b['data']()[_0x2c2926(0x19f)]&&await updateDoc(_0x28fa0e,{'firstPlaceDate':Timestamp['now']()});}if(_0x2ce194[_0x2c2926(0x17d)]===0x1){const _0x235527=doc(db,_0x2c2926(0x18b),_0x2ce194['id']);await updateDoc(_0x235527,{'firstPlaceDate':null});}playerCacheD2[_0x2c2926(0x18a)]=0x0;}}catch(_0x2096bc){console[_0x2c2926(0x18d)]('Error\x20updating\x20D2\x20player\x20positions:',_0x2096bc);}}function getPlayerRankNameD2(_0x4e93d4,_0x5e9209=0x0,_0x8f9f32=0x0){const _0x1402ee=a0_0x50ba;if(_0x5e9209===0x0)return _0x1402ee(0x191);if(_0x4e93d4>=0x3e8&&_0x8f9f32>=0x50&&_0x5e9209>=0x14)return'Emerald';if(_0x4e93d4>=0x2bc)return'Gold';if(_0x4e93d4>=0x1f4)return'Silver';if(_0x4e93d4>=0xc8)return'Bronze';return'Unranked';}window['refreshLadderDisplayD2']=function(_0x4bdbb7=!![]){const _0x4b07f3=a0_0x50ba;typeof displayLadderD2==='function'?displayLadderD2(_0x4bdbb7):console['warn'](_0x4b07f3(0x17a));};async function updateLadderDisplayD2(_0x534762){const _0x805dbb=a0_0x50ba;_0x534762[_0x805dbb(0x175)]((_0x5de3c9,_0x29931f)=>_0x5de3c9['position']-_0x29931f['position']);const _0x302178=document[_0x805dbb(0x19c)](_0x805dbb(0x16e));if(!_0x302178)return;_0x302178[_0x805dbb(0x1a2)]='';const _0x1d1875=_0x534762['map'](_0x210ced=>_0x210ced['username']),_0x516825=await fetchBatchMatchStatsD2(_0x1d1875);let _0x2d2263=new Map();try{typeof clearTokenCache==='function'&&clearTokenCache(),_0x2d2263=await getTokensByUsernames(_0x1d1875);}catch(_0x3fa16d){console['error'](_0x805dbb(0x17f),_0x3fa16d);}const _0x86b301=document[_0x805dbb(0x19c)]('#ladder-d2\x20thead\x20tr');_0x86b301&&(_0x86b301['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Rank</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Username</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>ELO</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Matches</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Wins</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Losses</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>K/D</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Win\x20Rate</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th>Points</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20');const _0x57892b=_0x534762['map'](_0x28ea89=>{const _0x20cd89=_0x516825['get'](_0x28ea89['username'])||{'totalMatches':0x0,'wins':0x0,'losses':0x0,'kda':0x0,'winRate':0x0,'totalKills':0x0,'totalDeaths':0x0},_0xce1a5b=_0x2d2263['get'](_0x28ea89['username'])||[],_0x51e883=getPrimaryDisplayToken(_0xce1a5b);return createPlayerRowWithTokenD2(_0x28ea89,_0x20cd89,_0x51e883);})[_0x805dbb(0x169)]('');_0x302178[_0x805dbb(0x1a2)]=_0x57892b,getPlayersLastEloChangesD2(_0x1d1875)['then'](_0x2437d8=>{const _0x438889=new Map();_0x302178['querySelectorAll']('tr')['forEach']((_0x14df94,_0x142982)=>{_0x142982<_0x1d1875['length']&&_0x438889['set'](_0x1d1875[_0x142982],_0x14df94);}),_0x2437d8['forEach']((_0x1f4d43,_0x549672)=>{const _0x16b1f1=a0_0x50ba,_0x535b41=_0x438889['get'](_0x549672);if(_0x535b41&&_0x1f4d43!==0x0){const _0x516d8f=_0x535b41['querySelector']('td:nth-child(3)');if(_0x516d8f){const _0x36e7c9=_0x1f4d43>0x0?'+'+_0x1f4d43:''+_0x1f4d43,_0x1d02df=_0x516d8f['querySelector']('.trend-indicator');_0x1d02df&&(_0x1d02df['textContent']=_0x36e7c9,_0x1d02df['style']['color']=_0x1f4d43>0x0?'#4CAF50':_0x16b1f1(0x1a1),_0x1d02df['style']['fontWeight']='bold',_0x1d02df['style']['fontSize']=_0x16b1f1(0x1ac),_0x1d02df['style'][_0x16b1f1(0x1a9)]='inline',_0x1d02df['style'][_0x16b1f1(0x186)]='visible',_0x1d02df['style']['opacity']='1');}}});})[_0x805dbb(0x196)](_0x29ca89=>console[_0x805dbb(0x18d)]('Error\x20updating\x20D2\x20ELO\x20trend\x20indicators:',_0x29ca89));}function createPlayerRowWithTokenD2(_0x45cd92,_0x8bb155,_0x35c478){const _0x502495=a0_0x50ba,_0x2fbc3f=parseFloat(_0x45cd92['elo'])||0x0;let _0x42916d=_0x502495(0x170);if(_0x8bb155['totalMatches']===0x0)_0x42916d='#DC143C';else{if(_0x2fbc3f>=0x3e8&&_0x8bb155['winRate']>=0x50&&_0x8bb155['totalMatches']>=0x14)_0x42916d=_0x502495(0x1a6);else{if(_0x2fbc3f>=0x2bc)_0x42916d='#FFD700';else{if(_0x2fbc3f>=0x1f4)_0x42916d=_0x502495(0x17b);else _0x2fbc3f>=0xc8&&(_0x42916d=_0x502495(0x185));}}}let _0x26ac88='';_0x45cd92['country']&&(_0x26ac88='<img\x20src=\x22../images/flags/'+_0x45cd92['country']['toLowerCase']()+_0x502495(0x16c)+_0x45cd92['country']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-flag\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22margin-left:\x205px;\x20vertical-align:\x20middle;\x20width:\x2020px;\x20height:\x20auto;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onerror=\x22this.style.display=\x27none\x27\x22>');let _0x50d68a='';return _0x35c478&&(_0x50d68a='<img\x20src=\x22'+_0x35c478['tokenImage']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alt=\x22'+_0x35c478['tokenName']+'\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22player-token\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22'+_0x35c478['tokenName']+'\x20'+(_0x35c478['equipped']?'(Equipped)':'')+_0x502495(0x183)),_0x502495(0x174)+_0x45cd92[_0x502495(0x17d)]+'</td>\x0a\x20\x20\x20\x20<td\x20style=\x22position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22profile.html?username='+encodeURIComponent(_0x45cd92['username'])+'&ladder=d2\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20style=\x22color:\x20'+_0x42916d+_0x502495(0x189)+_0x45cd92['username']+_0x502495(0x1a8)+_0x26ac88+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x50d68a+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td\x20style=\x22color:\x20'+_0x42916d+';\x20position:\x20relative;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22elo-container\x22\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22elo-value\x22>'+_0x2fbc3f+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22trend-indicator\x22\x20style=\x22margin-left:\x205px;\x22></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20<td>'+_0x8bb155['totalMatches']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x8bb155['wins']+'</td>\x0a\x20\x20\x20\x20<td>'+_0x8bb155[_0x502495(0x197)]+'</td>\x0a\x20\x20\x20\x20<td>'+_0x8bb155[_0x502495(0x1a4)]+'</td>\x0a\x20\x20\x20\x20<td>'+_0x8bb155[_0x502495(0x1aa)]+_0x502495(0x177)+(_0x45cd92['points']||0x0)+'</td>\x0a</tr>';}async function getPlayersLastEloChangesD2(_0x27b33d){const _0x283655=a0_0x50ba,_0x145ad9=new Map();_0x27b33d[_0x283655(0x182)](_0x5e7466=>_0x145ad9['set'](_0x5e7466,0x0));try{const _0x5f23f5=collection(db,'eloHistoryD2'),_0x4b3415=query(_0x5f23f5,orderBy('timestamp','desc'),limit(0x64)),_0x5454f3=await getDocs(_0x4b3415),_0x1145f2=new Map(),_0x413a0b=await getDocs(collection(db,'playersD2'));_0x413a0b['forEach'](_0x17d31f=>{const _0x3ceb9b=_0x283655,_0x3b5a8d=_0x17d31f[_0x3ceb9b(0x16b)]();_0x3b5a8d['username']&&_0x1145f2['set'](_0x17d31f['id'],_0x3b5a8d['username']);});const _0x3ff6e2=new Map();_0x5454f3['forEach'](_0x31c5ff=>{const _0x297658=_0x283655,_0x26119f=_0x31c5ff[_0x297658(0x16b)]();let _0x250b77=_0x26119f['username']||_0x26119f[_0x297658(0x173)];!_0x250b77&&_0x26119f['player']&&_0x1145f2[_0x297658(0x193)](_0x26119f['player'])&&(_0x250b77=_0x1145f2['get'](_0x26119f['player'])),_0x250b77&&_0x27b33d['includes'](_0x250b77)&&(!_0x3ff6e2['has'](_0x250b77)&&_0x3ff6e2['set'](_0x250b77,[]),_0x3ff6e2['get'](_0x250b77)['push']({..._0x26119f,'timestamp':_0x26119f['timestamp']?.['seconds']||0x0,'username':_0x250b77}));}),_0x3ff6e2['forEach']((_0x4d655f,_0x4eae46)=>{const _0x1f1e87=_0x283655;if(_0x4d655f[_0x1f1e87(0x168)]>0x0){_0x4d655f['sort']((_0x2878ca,_0x5388d6)=>_0x5388d6['timestamp']-_0x2878ca[_0x1f1e87(0x18a)]);const _0xc470b0=_0x4d655f['find'](_0x208671=>_0x208671[_0x1f1e87(0x180)]!==undefined||_0x208671['newElo']!==undefined&&_0x208671['previousElo']!==undefined);if(_0xc470b0){let _0x1a59f3;if(_0xc470b0['change']!==undefined)_0x1a59f3=_0xc470b0['change'];else _0xc470b0['newElo']!==undefined&&_0xc470b0[_0x1f1e87(0x188)]!==undefined&&(_0x1a59f3=_0xc470b0['newElo']-_0xc470b0[_0x1f1e87(0x188)]);_0x1a59f3!==undefined&&_0x145ad9[_0x1f1e87(0x1a3)](_0x4eae46,_0x1a59f3);}}});if(_0x3ff6e2['size']===0x0){const _0x462795=collection(db,'eloHistory'),_0x45c589=query(_0x462795,where(_0x283655(0x18c),'==','D2'),orderBy('timestamp',_0x283655(0x167)),limit(0x32));try{const _0x3efaa6=await getDocs(_0x45c589);_0x3efaa6['forEach'](_0x5846af=>{const _0x5af2ef=_0x283655,_0x3621b0=_0x5846af['data'](),_0x52eab2=_0x3621b0[_0x5af2ef(0x19e)]||_0x3621b0['playerUsername'];if(_0x52eab2&&_0x27b33d['includes'](_0x52eab2)){const _0x13aac8=_0x3621b0['change']||(_0x3621b0['newElo']!==undefined&&_0x3621b0[_0x5af2ef(0x188)]!==undefined?_0x3621b0['newElo']-_0x3621b0['previousElo']:0x0);_0x13aac8!==0x0&&_0x145ad9['set'](_0x52eab2,_0x13aac8);}});}catch(_0x495fff){}}}catch(_0xd4ae2){console['error']('D2:\x20Error\x20fetching\x20ELO\x20history:',_0xd4ae2);}return _0x145ad9;}async function fetchBatchMatchStatsD2(_0x120829){const _0x3f5746=a0_0x50ba,_0x6ad98e=new Map();try{_0x120829['forEach'](_0x4a0b20=>{const _0x38b299=a0_0x50ba;_0x6ad98e[_0x38b299(0x1a3)](_0x4a0b20,{'totalMatches':0x0,'wins':0x0,'losses':0x0,'totalKills':0x0,'totalDeaths':0x0,'kda':0x0,'winRate':0x0});});const _0x10ccf7=collection(db,'approvedMatchesD2'),_0x272e9a=await getDocs(_0x10ccf7);_0x272e9a['forEach'](_0x4e0aaf=>{const _0x489ba2=a0_0x50ba,_0x41293c=_0x4e0aaf['data'](),_0x5f197c=_0x41293c['winnerUsername'],_0x244793=_0x41293c['loserUsername'];if(_0x120829[_0x489ba2(0x1ab)](_0x5f197c)){const _0x2d570b=_0x6ad98e[_0x489ba2(0x176)](_0x5f197c);_0x2d570b['wins']++,_0x2d570b['totalMatches']++,_0x2d570b['totalKills']+=parseInt(_0x41293c['winnerScore'])||0x0,_0x2d570b['totalDeaths']+=parseInt(_0x41293c[_0x489ba2(0x195)])||0x0;}if(_0x120829[_0x489ba2(0x1ab)](_0x244793)){const _0x5a3b66=_0x6ad98e['get'](_0x244793);_0x5a3b66['losses']++,_0x5a3b66[_0x489ba2(0x17c)]++,_0x5a3b66['totalKills']+=parseInt(_0x41293c['loserScore'])||0x0,_0x5a3b66[_0x489ba2(0x19a)]+=parseInt(_0x41293c[_0x489ba2(0x16f)])||0x0;}}),_0x120829[_0x3f5746(0x182)](_0x15b232=>{const _0x116c2a=_0x3f5746,_0x3110b3=_0x6ad98e['get'](_0x15b232);_0x3110b3[_0x116c2a(0x1a4)]=_0x3110b3['totalDeaths']>0x0?(_0x3110b3[_0x116c2a(0x1a0)]/_0x3110b3['totalDeaths'])['toFixed'](0x2):_0x3110b3['totalKills'][_0x116c2a(0x16a)](0x2),_0x3110b3['winRate']=_0x3110b3['totalMatches']>0x0?(_0x3110b3['wins']/_0x3110b3['totalMatches']*0x64)['toFixed'](0x1):0x0;});}catch(_0x292d2a){console['error']('Error\x20fetching\x20batch\x20D2\x20match\x20stats:',_0x292d2a);}return _0x6ad98e;}export{displayLadderD2,updatePlayerPositions};