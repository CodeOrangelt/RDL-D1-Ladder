const a10_0x3d0448=a10_0x562d,a10_0x49fbdd=(function(){let _0x330ce6=!![];return function(_0x531dea,_0x214f7b){const _0x4fa475=_0x330ce6?function(){if(_0x214f7b){const _0x2a7635=_0x214f7b['apply'](_0x531dea,arguments);return _0x214f7b=null,_0x2a7635;}}:function(){};return _0x330ce6=![],_0x4fa475;};}()),a10_0x556677=a10_0x49fbdd(this,function(){const _0x5b888e=a10_0x562d;let _0x23c3af;try{const _0x26e57d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x23c3af=_0x26e57d();}catch(_0x455a12){_0x23c3af=window;}const _0x255d47=_0x23c3af['console']=_0x23c3af['console']||{},_0x4f776e=['log','warn','info',_0x5b888e(0x1fd),'exception','table','trace'];for(let _0x9f7216=0x0;_0x9f7216<_0x4f776e['length'];_0x9f7216++){const _0x3498a9=a10_0x49fbdd['constructor'][_0x5b888e(0x1f9)]['bind'](a10_0x49fbdd),_0x1ce6d6=_0x4f776e[_0x9f7216],_0x1704c7=_0x255d47[_0x1ce6d6]||_0x3498a9;_0x3498a9['__proto__']=a10_0x49fbdd['bind'](a10_0x49fbdd),_0x3498a9[_0x5b888e(0x1fa)]=_0x1704c7['toString']['bind'](_0x1704c7),_0x255d47[_0x1ce6d6]=_0x3498a9;}});a10_0x556677();import{collection,query,where,getDocs,doc,getDoc}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';import{db,auth}from'./firebase-config.js';let lastCheckTime=0x0;const CHECK_INTERVAL=0x2710,NOTIFICATION_CACHE_KEY=a10_0x3d0448(0x1ee),CACHE_EXPIRY=0xea60;export async function checkPendingMatches(_0x128657=![]){const _0x182b80=a10_0x3d0448,_0x593086=Date[_0x182b80(0x1e7)](),_0x3c2b54=checkNotificationCache();if(_0x3c2b54!==null&&!_0x128657){updateNotificationDot(_0x3c2b54);if(_0x593086-lastCheckTime<CHECK_INTERVAL)return;}lastCheckTime=_0x593086;const _0x21dded=auth['currentUser'];if(!_0x21dded){updateNotificationDot(![]),updateNotificationCache(![]);return;}try{const [_0x54948d,_0x2df95d,_0x52f15b]=await Promise['all']([checkForPendingMatchesInCollection(_0x21dded,'pendingMatches'),checkForPendingMatchesInCollection(_0x21dded,'pendingMatchesD2'),checkForPendingMatchesInCollection(_0x21dded,_0x182b80(0x1e8))]),_0x48ce87=_0x54948d||_0x2df95d||_0x52f15b;updateNotificationDot(_0x48ce87),updateNotificationCache(_0x48ce87);}catch(_0x118cda){console['error']('Error\x20checking\x20pending\x20matches:',_0x118cda);}}function a10_0x31d5(){const _0x3a64c7=['10px','addEventListener','Error\x20fetching\x20username:','playersD2','approved','border','now','pendingMatchesD3','disconnect','stringify','playersD3','winnerId','parse','pendingMatchesCache','style','999','currentUsername','uid','email','block','empty','username','userId','data','prototype','toString','getElementById','display','error'];a10_0x31d5=function(){return _0x3a64c7;};return a10_0x31d5();}async function checkForPendingMatchesInCollection(_0x1f7aba,_0x9396c3){const _0x3749fd=a10_0x3d0448,_0x239b30=_0x1f7aba[_0x3749fd(0x1f2)],_0x42f7db=_0x1f7aba['email'],_0x489f40=query(collection(db,_0x9396c3),where(_0x3749fd(0x1ec),'==',_0x239b30),where(_0x3749fd(0x1e5),'==',![])),_0xa3b05c=await getDocs(_0x489f40);if(!_0xa3b05c['empty'])return!![];if(_0x42f7db){const _0x1ba8a9=query(collection(db,_0x9396c3),where('winnerEmail','==',_0x42f7db),where('approved','==',![])),_0x23c42b=await getDocs(_0x1ba8a9);if(!_0x23c42b['empty'])return!![];}let _0x838a72=await getUsernameFromAllSources(_0x1f7aba);if(_0x838a72){const _0x5b43f3=query(collection(db,_0x9396c3),where('winnerUsername','==',_0x838a72),where('approved','==',![])),_0x41e519=await getDocs(_0x5b43f3);if(!_0x41e519['empty'])return!![];}return![];}async function getUsernameFromAllSources(_0x5eba1a){const _0x26fbf3=a10_0x3d0448,_0x2d807a=localStorage['getItem']('currentUsername');if(_0x2d807a)return _0x2d807a;try{const [_0x495dd1,_0x698c05,_0x5b6443]=await Promise['all']([getDocs(query(collection(db,'players'),where(_0x26fbf3(0x1f7),'==',_0x5eba1a[_0x26fbf3(0x1f2)]))),getDocs(query(collection(db,_0x26fbf3(0x1e4)),where('userId','==',_0x5eba1a[_0x26fbf3(0x1f2)]))),getDocs(query(collection(db,_0x26fbf3(0x1eb)),where('userId','==',_0x5eba1a[_0x26fbf3(0x1f2)])))]);if(!_0x495dd1['empty']){const _0x262776=_0x495dd1['docs'][0x0][_0x26fbf3(0x1f8)]()['username'];return localStorage['setItem']('currentUsername',_0x262776),_0x262776;}if(!_0x698c05['empty']){const _0x5e176=_0x698c05['docs'][0x0]['data']()['username'];return localStorage['setItem']('currentUsername',_0x5e176),_0x5e176;}if(!_0x5b6443[_0x26fbf3(0x1f5)]){const _0xb64aff=_0x5b6443['docs'][0x0][_0x26fbf3(0x1f8)]()['username'];return localStorage['setItem']('currentUsername',_0xb64aff),_0xb64aff;}const _0x5e09b2=await getDoc(doc(db,'users',_0x5eba1a['uid']));if(_0x5e09b2['exists']()&&_0x5e09b2[_0x26fbf3(0x1f8)]()['username']){const _0x1800cb=_0x5e09b2['data']()[_0x26fbf3(0x1f6)];return localStorage['setItem']('currentUsername',_0x1800cb),_0x1800cb;}}catch(_0x961fb6){console[_0x26fbf3(0x1fd)](_0x26fbf3(0x1e3),_0x961fb6);}if(_0x5eba1a['email'])return _0x5eba1a[_0x26fbf3(0x1f3)]['split']('@')[0x0];return null;}function updateNotificationCache(_0x5bf477){const _0x54c50e=a10_0x3d0448,_0x5e847b={'status':_0x5bf477,'timestamp':Date['now']()};localStorage['setItem'](NOTIFICATION_CACHE_KEY,JSON[_0x54c50e(0x1ea)](_0x5e847b));}function checkNotificationCache(){const _0x3d4fab=a10_0x3d0448,_0x2ffacf=localStorage['getItem'](NOTIFICATION_CACHE_KEY);if(!_0x2ffacf)return null;try{const {status:_0x2a8780,timestamp:_0x14e7d1}=JSON[_0x3d4fab(0x1ed)](_0x2ffacf),_0x31ce92=Date['now']();if(_0x31ce92-_0x14e7d1<CACHE_EXPIRY)return _0x2a8780;}catch(_0x49a631){}return null;}export function updateNotificationDot(_0x2c96d4){const _0x1c1a57=new MutationObserver((_0x120d4e,_0x425e9c)=>{const _0x3ced0e=a10_0x562d,_0x3a4f9e=document[_0x3ced0e(0x1fb)]('report-match-notification');_0x3a4f9e&&(updateDotStyle(_0x3a4f9e,_0x2c96d4),_0x425e9c[_0x3ced0e(0x1e9)]());});_0x1c1a57['observe'](document['body'],{'childList':!![],'subtree':!![]});const _0x1448cb=document['getElementById']('report-match-notification');_0x1448cb&&(updateDotStyle(_0x1448cb,_0x2c96d4),_0x1c1a57['disconnect']()),setTimeout(()=>_0x1c1a57['disconnect'](),0x1388);}function updateDotStyle(_0x57e337,_0x491f00){const _0x5d6905=a10_0x3d0448;_0x491f00?(_0x57e337[_0x5d6905(0x1ef)][_0x5d6905(0x1fc)]=_0x5d6905(0x1f4),_0x57e337[_0x5d6905(0x1ef)]['backgroundColor']='#ff3b30',_0x57e337['style']['width']=_0x5d6905(0x1e1),_0x57e337['style']['height']=_0x5d6905(0x1e1),_0x57e337['style']['position']='absolute',_0x57e337['style']['top']='-5px',_0x57e337['style']['right']='-8px',_0x57e337['style']['borderRadius']='50%',_0x57e337[_0x5d6905(0x1ef)][_0x5d6905(0x1e6)]='2px\x20solid\x20white',_0x57e337['style']['zIndex']=_0x5d6905(0x1f0)):_0x57e337[_0x5d6905(0x1ef)]['display']='none';}function a10_0x562d(_0x324e17,_0xa6812b){const _0x556677=a10_0x31d5();return a10_0x562d=function(_0x49fbdd,_0x36516a){_0x49fbdd=_0x49fbdd-0x1e1;let _0x31d5ae=_0x556677[_0x49fbdd];return _0x31d5ae;},a10_0x562d(_0x324e17,_0xa6812b);}export function updatePendingMatchNotification(){checkPendingMatches(!![]);}document[a10_0x3d0448(0x1e2)]('DOMContentLoaded',()=>{setTimeout(()=>checkPendingMatches(),0x1f4),auth['onAuthStateChanged'](()=>{const _0x2e2298=a10_0x562d;localStorage['removeItem'](_0x2e2298(0x1f1)),setTimeout(()=>checkPendingMatches(!![]),0x1f4);}),setInterval(()=>checkPendingMatches(),0xea60);});